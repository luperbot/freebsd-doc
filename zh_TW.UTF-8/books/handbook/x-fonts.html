<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>6.5. 在 X11 中使用字型</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD 使用手冊" /><link rel="up" href="x11.html" title="章 6. X Window 視窗系統" /><link rel="prev" href="x-config.html" title="6.4. 設定 X11" /><link rel="next" href="x-xdm.html" title="6.6. The X Display Manager" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.5. 在 X11 中使用字型</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="x-config.html">前一頁</a> </td><th width="60%" align="center">章 6. X Window 視窗系統</th><td width="20%" align="right"> <a accesskey="n" href="x-xdm.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-fonts"></a>6.5. 在 X11 中使用字型</h2></div><div><span class="authorgroup">Contributed by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="type1"></a>6.5.1. Type1 規格的字型</h3></div></div></div><p>The default fonts that ship with
      X11 are less than ideal for typical
    desktop publishing applications.  Large presentation fonts show up
    jagged and unprofessional looking, and small fonts in
    <span class="application"><span class="trademark">Netscape</span>®</span> are almost completely unintelligible.
    However, there are several free, high quality Type1 (<span class="trademark">PostScript</span>®) fonts
    available which can be readily used
    with X11.  For instance, the URW font collection
    (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/urwfonts/pkg-descr">x11-fonts/urwfonts</a>) includes
    high quality versions of standard type1 fonts (<span class="trademark">Times Roman</span>®,
    <span class="trademark">Helvetica</span>®, <span class="trademark">Palatino</span>® and others).  The Freefonts collection
    (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/freefonts/pkg-descr">x11-fonts/freefonts</a>) includes
    many more fonts, but most of them are intended for use in
    graphics software such as the <span class="application">Gimp</span>, and are not
    complete enough to serve as screen fonts.  In addition,
    X11 can be configured to use
    <span class="trademark">TrueType</span>® fonts with a minimum of effort.  For more details on
    this, see the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=X&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">X</span>(7)</span></a> manual page or the
    <a class="link" href="x-fonts.html#truetype" title="6.5.2. TrueType® 規格的字型">section on <span class="trademark">TrueType</span>® fonts</a>.</p><p>To install the above Type1 font collections from the ports
        collection, run the following commands:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11-fonts/urwfonts</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>And likewise with the freefont or other collections.  To have the X
      server detect these fonts, add an appropriate line to the
      X server configuration file (<code class="filename">/etc/X11/xorg.conf</code>),
      which reads:</p><pre class="programlisting">FontPath "/usr/local/lib/X11/fonts/URW/"</pre><p>Alternatively, at the command line in the X session
        run:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xset fp+ /usr/local/lib/X11/fonts/URW</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>This will work but will be lost when the X session is closed,
    unless it is added to the startup file (<code class="filename">~/.xinitrc</code>
    for a normal <code class="command">startx</code> session,
    or <code class="filename">~/.xsession</code> when logging in through a
    graphical login manager like <span class="application">XDM</span>).
    A third way is to use the new
    <code class="filename">/usr/local/etc/fonts/local.conf</code> file: see the
    section on <a class="link" href="x-fonts.html#antialias" title="6.5.3. Anti-Aliased 規格的字型">anti-aliasing</a>.
    </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="truetype"></a>6.5.2. <span class="trademark">TrueType</span>® 規格的字型</h3></div></div></div><a id="idp71588432" class="indexterm"></a><a id="idp71588944" class="indexterm"></a><p><span class="application">Xorg</span> has built in support
    for rendering <span class="trademark">TrueType</span>® fonts.  There are two different modules
    that can enable this functionality.  The freetype module is used
    in this example because it is more consistent with the other font
    rendering back-ends.  To enable the freetype module just add the
    following line to the <code class="literal">"Module"</code> section of the
    <code class="filename">/etc/X11/xorg.conf</code> file.</p><pre class="programlisting">Load  "freetype"</pre><p>Now make a directory for the <span class="trademark">TrueType</span>® fonts (for example,
      <code class="filename">/usr/local/lib/X11/fonts/TrueType</code>)
      and copy all of the <span class="trademark">TrueType</span>® fonts into this directory.  Keep in
      mind that <span class="trademark">TrueType</span>® fonts cannot be directly taken from a
      <span class="trademark">Macintosh</span>®; they must be in <span class="trademark">UNIX</span>®/<span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>® format for use by
      X11.  Once the files have been
      copied into this directory, use
      <span class="application">ttmkfdir</span> to create a
      <code class="filename">fonts.dir</code> file, so that the X font renderer
      knows that these new files have been installed.
      <code class="command">ttmkfdir</code> is available from the FreeBSD
      Ports Collection as
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/ttmkfdir/pkg-descr">x11-fonts/ttmkfdir</a>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/local/lib/X11/fonts/TrueType</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ttmkfdir -o fonts.dir</code></strong></pre><p>Now add the <span class="trademark">TrueType</span>® directory to the font
      path.  This is just the same as described above for <a class="link" href="x-fonts.html#type1" title="6.5.1. Type1 規格的字型">Type1</a> fonts, that is, use</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xset fp+ /usr/local/lib/X11/fonts/TrueType</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>or add a <code class="literal">FontPath</code> line to the
       <code class="filename">xorg.conf</code> file.</p><p>That's it.  Now <span class="application"><span class="trademark">Netscape</span>®</span>,
        <span class="application">Gimp</span>,
        <span class="application"><span class="trademark">StarOffice</span>™</span>, and all of the other X
        applications should now recognize the installed <span class="trademark">TrueType</span>®
        fonts.  Extremely small fonts (as with text in a high resolution
        display on a web page) and extremely large fonts (within
        <span class="application"><span class="trademark">StarOffice</span>™</span>) will look much better
        now.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="antialias"></a>6.5.3. Anti-Aliased 規格的字型</h3></div><div><span class="authorgroup">Updated by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Joe Marcus</span> <span class="surname">Clarke</span></span>. </span></div></div></div><a id="idp71618128" class="indexterm"></a><a id="idp71618640" class="indexterm"></a><p>Anti-aliasing has been available in X11 since
      <span class="application"><span class="trademark">XFree86</span>™</span> 4.0.2.  However, font
      configuration was cumbersome before the introduction of
      <span class="application"><span class="trademark">XFree86</span>™</span> 4.3.0.
      Beginning with
      <span class="application"><span class="trademark">XFree86</span>™</span> 4.3.0, all fonts in X11
      that are found
      in <code class="filename">/usr/local/lib/X11/fonts/</code> and
      <code class="filename">~/.fonts/</code> are automatically
      made available for anti-aliasing to Xft-aware applications.  Not
      all applications are Xft-aware, but many have received Xft support.
      Examples of Xft-aware applications include Qt 2.3 and higher (the
      toolkit for the <span class="application">KDE</span> desktop),
      GTK+ 2.0 and higher (the toolkit for the
      <span class="application">GNOME</span> desktop), and
      <span class="application">Mozilla</span> 1.2 and higher.
    </p><p>In order to control which fonts are anti-aliased, or to
      configure anti-aliasing properties, create (or edit, if it
      already exists) the file
      <code class="filename">/usr/local/etc/fonts/local.conf</code>.  Several
      advanced features of the Xft font system can be tuned using
      this file; this section describes only some simple
      possibilities.  For more details, please see
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fonts-conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fonts-conf</span>(5)</span></a>.</p><a id="idp71629264" class="indexterm"></a><p>This file must be in XML format.  Pay careful attention to
      case, and make sure all tags are properly closed.  The file
      begins with the usual XML header followed by a DOCTYPE
      definition, and then the <code class="literal">&lt;fontconfig&gt;</code> tag:</p><pre class="programlisting">
      &lt;?xml version="1.0"?&gt;
      &lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
      &lt;fontconfig&gt;
    </pre><p>As previously stated, all fonts in
      <code class="filename">/usr/local/lib/X11/fonts/</code> as well as
      <code class="filename">~/.fonts/</code> are already made available to
      Xft-aware applications.  If you wish to add another directory
      outside of these two directory trees, add a line similar to the
      following to
      <code class="filename">/usr/local/etc/fonts/local.conf</code>:</p><pre class="programlisting">&lt;dir&gt;/path/to/my/fonts&lt;/dir&gt;</pre><p>After adding new fonts, and especially new font directories,
      you should run the following command to rebuild the font
      caches:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fc-cache -f</code></strong></pre><p>Anti-aliasing makes borders slightly fuzzy, which makes very
      small text more readable and removes <span class="quote">“<span class="quote">staircases</span>”</span> from
      large text, but can cause eyestrain if applied to normal text.  To
      exclude font sizes smaller than 14 point from anti-aliasing, include
      these lines:</p><pre class="programlisting">        &lt;match target="font"&gt;
            &lt;test name="size" compare="less"&gt;
                &lt;double&gt;14&lt;/double&gt;
            &lt;/test&gt;
            &lt;edit name="antialias" mode="assign"&gt;
                &lt;bool&gt;false&lt;/bool&gt;
            &lt;/edit&gt;
        &lt;/match&gt;
        &lt;match target="font"&gt;
            &lt;test name="pixelsize" compare="less" qual="any"&gt;
                &lt;double&gt;14&lt;/double&gt;
            &lt;/test&gt;
            &lt;edit mode="assign" name="antialias"&gt;
                &lt;bool&gt;false&lt;/bool&gt;
            &lt;/edit&gt;
        &lt;/match&gt;</pre><a id="idp71635408" class="indexterm"></a><p>Spacing for some monospaced fonts may also be inappropriate
      with anti-aliasing.  This seems to be an issue with
      <span class="application">KDE</span>, in particular.  One possible fix for
      this is to force the spacing for such fonts to be 100.  Add the
      following lines:</p><pre class="programlisting">       &lt;match target="pattern" name="family"&gt;
           &lt;test qual="any" name="family"&gt;
               &lt;string&gt;fixed&lt;/string&gt;
           &lt;/test&gt;
           &lt;edit name="family" mode="assign"&gt;
               &lt;string&gt;mono&lt;/string&gt;
           &lt;/edit&gt;
        &lt;/match&gt;
        &lt;match target="pattern" name="family"&gt;
            &lt;test qual="any" name="family"&gt;
                &lt;string&gt;console&lt;/string&gt;
            &lt;/test&gt;
            &lt;edit name="family" mode="assign"&gt;
                &lt;string&gt;mono&lt;/string&gt;
            &lt;/edit&gt;
        &lt;/match&gt;</pre><p>(this aliases the other common names for fixed fonts as
        <code class="literal">"mono"</code>), and then add:</p><pre class="programlisting">         &lt;match target="pattern" name="family"&gt;
             &lt;test qual="any" name="family"&gt;
                 &lt;string&gt;mono&lt;/string&gt;
             &lt;/test&gt;
             &lt;edit name="spacing" mode="assign"&gt;
                 &lt;int&gt;100&lt;/int&gt;
             &lt;/edit&gt;
         &lt;/match&gt;      </pre><p>Certain fonts, such as Helvetica, may have a problem when
	anti-aliased.  Usually this manifests itself as a font that
	seems cut in half vertically.  At worst, it may cause
	applications such as <span class="application">Mozilla</span> to
	crash.  To avoid this, consider adding the following to
	<code class="filename">local.conf</code>:</p><pre class="programlisting">         &lt;match target="pattern" name="family"&gt;
             &lt;test qual="any" name="family"&gt;
                 &lt;string&gt;Helvetica&lt;/string&gt;
             &lt;/test&gt;
             &lt;edit name="family" mode="assign"&gt;
                 &lt;string&gt;sans-serif&lt;/string&gt;
             &lt;/edit&gt;
         &lt;/match&gt;        </pre><p>Once you have finished editing
        <code class="filename">local.conf</code> make sure you end the file
        with the <code class="literal">&lt;/fontconfig&gt;</code> tag.  Not doing this will cause
        your changes to be ignored.</p><p>The default font set that comes with
	 X11 is not very
         desirable when it comes to anti-aliasing.  A much better
	 set of default fonts can be found in the
	 <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/bitstream-vera/pkg-descr">x11-fonts/bitstream-vera</a>
	 port.  This port will install a
	 <code class="filename">/usr/local/etc/fonts/local.conf</code> file
	 if one does not exist already.  If the file does exist,
	 the port will create a <code class="filename">/usr/local/etc/fonts/local.conf-vera
	 </code> file.  Merge the contents of this file into
	 <code class="filename">/usr/local/etc/fonts/local.conf</code>, and the
	 Bitstream fonts will automatically replace the default
	 X11 Serif, Sans Serif, and Monospaced
	 fonts.</p><p>Finally, users can add their own settings via their personal
        <code class="filename">.fonts.conf</code> files.  To do this, each user should
	simply create a <code class="filename">~/.fonts.conf</code>.  This file must
	also be in XML format.</p><a id="idp71652944" class="indexterm"></a><a id="idp71653456" class="indexterm"></a><p>One last point: with an LCD screen, sub-pixel sampling may be
        desired.  This basically treats the (horizontally separated)
        red, green and blue components separately to improve the horizontal
        resolution; the results can be dramatic.  To enable this, add the
        line somewhere in the <code class="filename">local.conf</code> file:</p><pre class="programlisting">
         &lt;match target="font"&gt;
             &lt;test qual="all" name="rgba"&gt;
                 &lt;const&gt;unknown&lt;/const&gt;
             &lt;/test&gt;
             &lt;edit name="rgba" mode="assign"&gt;
                 &lt;const&gt;rgb&lt;/const&gt;
             &lt;/edit&gt;
         &lt;/match&gt;
       </pre><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">Depending on the sort of display,
	 <code class="literal">rgb</code> may need to be changed to <code class="literal">bgr</code>,
	 <code class="literal">vrgb</code> or <code class="literal">vbgr</code>: experiment and
	 see which works best.</p></div><a id="idp71657680" class="indexterm"></a><p>Anti-aliasing should be enabled the next time the X
         server is started.  However, programs must know how to take
         advantage of it.  At present, the Qt toolkit does,
         so the entire <span class="application">KDE</span> environment can
         use anti-aliased fonts.
	 GTK+ and
         <span class="application">GNOME</span> can also be made to use
         anti-aliasing via the <span class="quote">“<span class="quote">Font</span>”</span> capplet (see <a class="xref" href="x11-wm.html#x11-wm-gnome-antialias" title="6.7.1.3. Anti-aliased Fonts with GNOME">節 6.7.1.3, “Anti-aliased Fonts with GNOME”</a> for details).  By default,
         <span class="application">Mozilla</span> 1.2 and greater will
         automatically use anti-aliasing. To disable this, rebuild
         <span class="application">Mozilla</span> with the
         <code class="varname">-DWITHOUT_XFT</code> flag.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="x-config.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="x11.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="x-xdm.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">6.4. 設定 X11 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 6.6. The X Display Manager</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>