<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>11.5. Installing MATLAB®</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD 使用手冊" /><link rel="up" href="linuxemu.html" title="章 11. 與 Linux Binary 的相容方面" /><link rel="prev" href="linuxemu-maple.html" title="11.4. Installing Maple™" /><link rel="next" href="linuxemu-oracle.html" title="11.6. Installing Oracle®" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.5. Installing <span class="trademark">MATLAB</span>®</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="linuxemu-maple.html">前一頁</a> </td><th width="60%" align="center">章 11. 與 Linux Binary 的相容方面</th><td width="20%" align="right"> <a accesskey="n" href="linuxemu-oracle.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-matlab"></a>11.5. Installing <span class="trademark">MATLAB</span>®</h2></div><div><span class="authorgroup">Contributed by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Dan</span> <span class="surname">Pelleg</span></span>. </span></div></div></div><a id="idp75114576" class="indexterm"></a><p>This document describes the process of installing the Linux
      version of <span class="application"><span class="trademark">MATLAB</span>® version 6.5</span> onto
      a FreeBSD system.  It works quite well, with the exception of the
      <span class="application"><span class="trademark">Java Virtual Machine</span>™</span> (see
      <a class="xref" href="linuxemu-matlab.html#matlab-jre" title="11.5.3. Linking the Java™ Runtime Environment">節 11.5.3, “Linking the <span class="trademark">Java</span>™ Runtime Environment”</a>).</p><p>The Linux version of <span class="application"><span class="trademark">MATLAB</span>®</span> can be
      ordered directly from The MathWorks at <code class="uri"><a class="uri" href="http://www.mathworks.com" target="_top">http://www.mathworks.com</a></code>.  Make sure you also get
      the license file or instructions how to create it.  While you
      are there, let them know you would like a native FreeBSD
      version of their software.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75119568"></a>11.5.1. Installing <span class="trademark">MATLAB</span>®</h3></div></div></div><p>To install <span class="application"><span class="trademark">MATLAB</span>®</span>, do the
	following:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Insert the installation CD and mount it.
	    Become <code class="systemitem">root</code>, as recommended by the
	    installation script.  To start the installation script
	    type:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/compat/linux/bin/sh /cdrom/install</code></strong></pre><div xmlns="" class="tip"><h3 class="admontitle">提示: </h3><p xmlns="http://www.w3.org/1999/xhtml">The installer is graphical.  If you get errors about
	      not being able to open a display, type
	      <code class="command">setenv HOME ~USER</code>,
	      where <em class="replaceable"><code>USER</code></em> is the user you did a
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> as.</p></div></li><li class="step"><p>
	    When asked for the <span class="application"><span class="trademark">MATLAB</span>®</span> root
	    directory, type:
	    <strong class="userinput"><code>/compat/linux/usr/local/matlab</code></strong>.</p><div xmlns="" class="tip"><h3 class="admontitle">提示: </h3><p xmlns="http://www.w3.org/1999/xhtml">For easier typing on the rest of the installation
	      process, type this at your shell prompt:
	      <code class="command">set MATLAB=/compat/linux/usr/local/matlab</code></p></div></li><li class="step"><p>Edit the license file as instructed when
	    obtaining the <span class="application"><span class="trademark">MATLAB</span>®</span> license.</p><div xmlns="" class="tip"><h3 class="admontitle">提示: </h3><p xmlns="http://www.w3.org/1999/xhtml">You can prepare this file in advance using your
	      favorite editor, and copy it to
	      <code class="filename">$MATLAB/license.dat</code> before the
	      installer asks you to edit it.</p></div></li><li class="step"><p>Complete the installation process.</p></li></ol></div><p>At this point your <span class="application"><span class="trademark">MATLAB</span>®</span>
	installation is complete.  The following steps apply
	<span class="quote">“<span class="quote">glue</span>”</span> to connect it to your FreeBSD system.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75142608"></a>11.5.2. License Manager Startup</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Create symlinks for the license manager scripts:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s $MATLAB/etc/lmboot /usr/local/etc/lmboot_TMW</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s $MATLAB/etc/lmdown /usr/local/etc/lmdown_TMW</code></strong></pre></li><li class="step"><p>Create a startup file at
	    <code class="filename">/usr/local/etc/rc.d/flexlm.sh</code>.  The
	    example below is a modified version of the distributed
	    <code class="filename">$MATLAB/etc/rc.lm.glnx86</code>.  The changes
	    are file locations, and startup of the license manager
	    under Linux emulation.</p><pre class="programlisting">#!/bin/sh
case "$1" in
  start)
        if [ -f /usr/local/etc/lmboot_TMW ]; then
              /compat/linux/bin/sh /usr/local/etc/lmboot_TMW -u <em class="replaceable"><code>username</code></em> &amp;&amp; echo 'MATLAB_lmgrd'
        fi
        ;;
  stop)
	if [ -f /usr/local/etc/lmdown_TMW ]; then
            /compat/linux/bin/sh /usr/local/etc/lmdown_TMW  &gt; /dev/null 2&gt;&amp;1
	fi
        ;;
  *)
	echo "Usage: $0 {start|stop}"
	exit 1
	;;
esac

exit 0</pre><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">The file must be made executable:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod +x /usr/local/etc/rc.d/flexlm.sh</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">You must also replace
	      <em class="replaceable"><code>username</code></em> above with the name
	      of a valid user on your system (and not
	      <code class="systemitem">root</code>).</p></div></li><li class="step"><p>Start the license manager with the command:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/flexlm.sh start</code></strong></pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="matlab-jre"></a>11.5.3. Linking the <span class="trademark">Java</span>™ Runtime Environment</h3></div></div></div><p>Change the <span class="application"><span class="trademark">Java</span>™</span> Runtime
	Environment (JRE) link to one working under FreeBSD:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd $MATLAB/sys/java/jre/glnx86/</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>unlink jre; ln -s ./jre1.1.8 ./jre</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75157072"></a>11.5.4. Creating a <span class="trademark">MATLAB</span>® Startup Script</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Place the following startup script in
	    <code class="filename">/usr/local/bin/matlab</code>:
	  </p><pre class="programlisting">#!/bin/sh
/compat/linux/bin/sh /compat/linux/usr/local/matlab/bin/matlab "$@"</pre></li><li class="step"><p>Then type the command
	    <code class="command">chmod +x /usr/local/bin/matlab</code>.</p></li></ol></div><div xmlns="" class="tip"><h3 class="admontitle">提示: </h3><p xmlns="http://www.w3.org/1999/xhtml">Depending on your version of
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a>, you
	  may run into errors when running this script.  To avoid that,
	  edit the file
	  <code class="filename">/compat/linux/usr/local/matlab/bin/matlab</code>,
	  and change the line that says:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">if [ `expr "$lscmd" : '.*-&gt;.*'` -ne 0 ]; then</pre><p xmlns="http://www.w3.org/1999/xhtml">(in version 13.0.1 it is on line 410) to this
	  line:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">if test -L $newbase; then</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75168336"></a>11.5.5. Creating a <span class="trademark">MATLAB</span>® Shutdown Script</h3></div></div></div><p>The following is needed to solve a problem with <span class="trademark">MATLAB</span>®
	not exiting correctly.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Create a file
	    <code class="filename">$MATLAB/toolbox/local/finish.m</code>, and
	    in it put the single line:</p><pre class="programlisting">! $MATLAB/bin/finish.sh</pre><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">The <code class="literal">$MATLAB</code> is
	    literal.</p></div><div xmlns="" class="tip"><h3 class="admontitle">提示: </h3><p xmlns="http://www.w3.org/1999/xhtml">In the same directory, you will find the files
	      <code class="filename">finishsav.m</code> and
	      <code class="filename">finishdlg.m</code>, which let you save
	      your workspace before quitting.  If you use either of
	      them, insert the line above immediately after the
	      <code class="literal">save</code> command.</p></div></li><li class="step"><p>Create a file
	    <code class="filename">$MATLAB/bin/finish.sh</code>, which will
	    contain the following:</p><pre class="programlisting">#!/usr/compat/linux/bin/sh
(sleep 5; killall -1 matlab_helper) &amp;
exit 0</pre></li><li class="step"><p>Make the file executable:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod +x $MATLAB/bin/finish.sh</code></strong></pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="matlab-using"></a>11.5.6. Using <span class="trademark">MATLAB</span>®</h3></div></div></div><p>At this point you are ready to type
	<code class="command">matlab</code> and start using it.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="linuxemu-maple.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="linuxemu.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="linuxemu-oracle.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">11.4. Installing <span class="trademark">Maple</span>™ </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 11.6. Installing <span class="trademark">Oracle</span>®</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>