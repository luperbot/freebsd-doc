<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>12.13. Adding Swap Space</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD 使用手冊" /><link rel="up" href="config-tuning.html" title="章 12. 設定與效能調校(Tuning)" /><link rel="prev" href="configtuning-kernel-limits.html" title="12.12. Tuning Kernel Limits" /><link rel="next" href="acpi-overview.html" title="12.14. Power and Resource Management" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.13. Adding Swap Space</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configtuning-kernel-limits.html">前一頁</a> </td><th width="60%" align="center">章 12. 設定與效能調校(Tuning)</th><td width="20%" align="right"> <a accesskey="n" href="acpi-overview.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="adding-swap-space"></a>12.13. Adding Swap Space</h2></div></div></div><p>No matter how well you plan, sometimes a system does not run
      as you expect.  If you find you need more swap space, it is
      simple enough to add.  You have three ways to increase swap
      space: adding a new hard drive, enabling swap over NFS, and
      creating a swap file on an existing partition.</p><p>For information on how to encrypt swap space, what options
      for this task exist and why it should be done, please refer to
      <a class="xref" href="swap-encrypting.html" title="18.14. Encrypting Swap">節 18.14, “Encrypting Swap”</a> of the Handbook.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="new-drive-swap"></a>12.13.1. Swap on a New Hard Drive</h3></div></div></div><p>The best way to add swap, of course, is to use this as an
	excuse to add another hard drive.  You can always use another
	hard drive, after all.  If you can do this, go reread the
	discussion of swap space
	in <a class="xref" href="bsdinstall-partitioning.html#configtuning-initial" title="2.6.1. Designing the Partition Layout">節 2.6.1, “Designing the Partition Layout”</a>
	of the Handbook for some suggestions on how to best
	arrange your swap.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="nfs-swap"></a>12.13.2. Swapping over NFS</h3></div></div></div><p>Swapping over NFS is only recommended if you do not have a
	local hard disk to swap to; NFS swapping will be limited
	by the available network bandwidth and puts an additional
	burden on the NFS server.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="create-swapfile"></a>12.13.3. Swapfiles</h3></div></div></div><p>You can create a file of a specified size to use as a swap
	file.  In our example here we will use a 64MB file called
	<code class="filename">/usr/swap0</code>.  You can use any name you
	want, of course.</p><div class="example"><a id="idp77068240"></a><div class="example-title">範例 12.1. Creating a Swapfile on FreeBSD</div><div class="example-contents"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Be certain that your kernel configuration includes
	    the memory disk driver (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>).  It is default in
	    <code class="filename">GENERIC</code> kernel.</p><pre class="programlisting">device   md   # Memory "disks"</pre></li><li class="listitem"><p>Create a swapfile (<code class="filename">/usr/swap0</code>):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/usr/swap0 bs=1024k count=64</code></strong></pre></li><li class="listitem"><p>Set proper permissions on (<code class="filename">/usr/swap0</code>):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 0600 /usr/swap0</code></strong></pre></li><li class="listitem"><p>Enable the swap file in <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">swapfile="/usr/swap0"   # Set to name of swapfile if aux swapfile desired.</pre></li><li class="listitem"><p>Reboot the machine or to enable the swap file immediately,
            type:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f /usr/swap0 -u 0 &amp;&amp; swapon /dev/md0</code></strong></pre></li></ol></div></div></div><br class="example-break" /></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configtuning-kernel-limits.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="acpi-overview.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">12.12. Tuning Kernel Limits </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 12.14. Power and Resource Management</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>