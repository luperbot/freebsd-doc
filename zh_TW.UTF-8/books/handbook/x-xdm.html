<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>6.6. The X Display Manager</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD 使用手冊" /><link rel="up" href="x11.html" title="章 6. X Window 視窗系統" /><link rel="prev" href="x-fonts.html" title="6.5. 在 X11 中使用字型" /><link rel="next" href="x11-wm.html" title="6.7. 桌面環境" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.6. The X Display Manager</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="x-fonts.html">前一頁</a> </td><th width="60%" align="center">章 6. X Window 視窗系統</th><td width="20%" align="right"> <a accesskey="n" href="x11-wm.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-xdm"></a>6.6. The X Display Manager</h2></div><div><span class="authorgroup">Contributed by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Seth</span> <span class="surname">Kingsley</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71550160"></a>6.6.1. Overview</h3></div></div></div><a id="idp71550800" class="indexterm"></a><p>The X Display Manager (<span class="application">XDM</span>) is
        an optional part of the X Window System that is used for login
        session management.  This is useful for several types of
        situations, including minimal <span class="quote">“<span class="quote">X Terminals</span>”</span>,
        desktops, and large network display
        servers.  Since the X Window System is network and protocol
        independent, there are a wide variety of possible configurations
        for running X clients and servers on different machines
        connected by a network.  <span class="application">XDM</span> provides
        a graphical interface for choosing which display server to
        connect to, and entering authorization information such as a
        login and password combination.</p><p>Think of <span class="application">XDM</span> as
        providing the same functionality to the user as the
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a> utility (see <a class="xref" href="term.html#term-config" title="26.3.2. Configuration">節 26.3.2, “Configuration”</a> for
          details).  That is, it performs system logins to the display
          being connected to and then runs a session manager on behalf of
          the user (usually an X window
          manager).  <span class="application">XDM</span> then waits for this
          program to exit, signaling that the user is done and should be
          logged out of the display.  At this point,
          <span class="application">XDM</span> can display the login and display
          chooser screens for the next user to login.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71555664"></a>6.6.2. Using XDM</h3></div></div></div><p>The <span class="application">XDM</span> daemon program is
        located in <code class="filename">/usr/local/bin/xdm</code>.  This program
        can be run at any time as <code class="systemitem">root</code> and it will
        start managing the X display on the local machine.  If
        <span class="application">XDM</span> is to be run every
        time the machine boots up, a convenient way to do this is by
        adding an entry to <code class="filename">/etc/ttys</code>.  For more
        information about the format and usage of this file, see <a class="xref" href="term.html#term-etcttys" title="26.3.2.1. Adding an Entry to /etc/ttys">節 26.3.2.1, “Adding an Entry to <code class="filename">/etc/ttys</code>”</a>.  There is a line in the default
        <code class="filename">/etc/ttys</code> file for running the
        <span class="application">XDM</span> daemon on a virtual terminal:</p><pre class="screen">ttyv8   "/usr/local/bin/xdm -nodaemon"  xterm   off secure</pre><p>By default this entry is disabled; in order to enable it
        change field 5 from <code class="literal">off</code> to
        <code class="literal">on</code> and restart <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> using the
        directions in <a class="xref" href="term.html#term-hup" title="26.3.2.2. Force init to Reread /etc/ttys">節 26.3.2.2, “Force <code class="command">init</code> to Reread
	  <code class="filename">/etc/ttys</code>”</a>.  The first field, the
        name of the terminal this program will manage, is
        <code class="literal">ttyv8</code>.  This means that
        <span class="application">XDM</span> will start running on the 9th
        virtual terminal.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71567824"></a>6.6.3. Configuring XDM</h3></div></div></div><p>The <span class="application">XDM</span> configuration directory
        is located in <code class="filename">/usr/local/lib/X11/xdm</code>.  In
        this directory there are several files used to change the
        behavior and appearance of
        <span class="application">XDM</span>.  Typically these files will
        be found:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>File</th><th>Description</th></tr></thead><tbody><tr><td><code class="filename">Xaccess</code></td><td>Client authorization ruleset.</td></tr><tr><td><code class="filename">Xresources</code></td><td>Default X resource values.</td></tr><tr><td><code class="filename">Xservers</code></td><td>List of remote and local displays to manage.</td></tr><tr><td><code class="filename">Xsession</code></td><td>Default session script for logins.</td></tr><tr><td><code class="filename">Xsetup_</code>*</td><td>Script to launch applications before the login
                  interface.</td></tr><tr><td><code class="filename">xdm-config</code></td><td>Global configuration for all displays running on
                  this machine.</td></tr><tr><td><code class="filename">xdm-errors</code></td><td>Errors generated by the server program.</td></tr><tr><td><code class="filename">xdm-pid</code></td><td>The process ID of the currently running XDM.</td></tr></tbody></table></div><p>Also in this directory are a few scripts and programs used
        to set up the desktop when <span class="application">XDM</span> is
        running.  The purpose of each of these files will be briefly
        described.  The exact syntax and usage of all of these files is
        described in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a>.</p><p>The default configuration is a simple rectangular login
        window with the hostname of the machine displayed at the top in
        a large font and <span class="quote">“<span class="quote">Login:</span>”</span> and
        <span class="quote">“<span class="quote">Password:</span>”</span> prompts below.  This is a good starting
        point for changing the look and feel of
        <span class="application">XDM</span> screens.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71599440"></a>6.6.3.1. Xaccess</h4></div></div></div><p>The protocol for connecting to
          <span class="application">XDM</span>-controlled displays is called
          the X Display Manager Connection Protocol (XDMCP).  This file
          is a ruleset for controlling XDMCP connections from remote
	  machines.  It is ignored unless the <code class="filename">xdm-config</code>
	  is changed to listen for remote connections.  By default, it does
	  not allow any clients to connect.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71601360"></a>6.6.3.2. Xresources</h4></div></div></div><p>This is an application-defaults file for the display
          chooser and login screens.  In it, the appearance
          of the login program can be modified.  The format is identical
          to the app-defaults file described in the
	  X11 documentation.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71602512"></a>6.6.3.3. Xservers</h4></div></div></div><p>This is a list of the remote displays the chooser should
          provide as choices.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71603664"></a>6.6.3.4. Xsession</h4></div></div></div><p>This is the default session script for
          <span class="application">XDM</span> to run after a user has logged
          in.  Normally each user will have a customized session script
          in <code class="filename">~/.xsession</code> that overrides this
          script.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71605712"></a>6.6.3.5. Xsetup_*</h4></div></div></div><p>These will be run automatically before displaying the
          chooser or login interfaces.  There is a script for each
          display being used, named <code class="filename">Xsetup_</code> followed
          by the local display number (for instance
          <code class="filename">Xsetup_0</code>).  Typically these scripts will
          run one or two programs in the background such as
          <code class="command">xconsole</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71612240"></a>6.6.3.6. xdm-config</h4></div></div></div><p>This contains settings in the form of app-defaults
          that are applicable to every display that this installation
          manages.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71613392"></a>6.6.3.7. xdm-errors</h4></div></div></div><p>This contains the output of the X servers that
          <span class="application">XDM</span> is trying to run.  If a display
          that <span class="application">XDM</span> is trying to start hangs
          for some reason, this is a good place to look for error
          messages.  These messages are also written to the user's
          <code class="filename">~/.xsession-errors</code> file on a per-session
          basis.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71615824"></a>6.6.4. Running a Network Display Server</h3></div></div></div><p>In order for other clients to connect to the display
        server, you must edit the access control rules, and enable the connection
        listener.  By default these are set to conservative values.
        To make <span class="application">XDM</span> listen for connections,
        first comment out a line in the <code class="filename">xdm-config</code>
        file:</p><pre class="screen">! SECURITY: do not listen for XDMCP or Chooser requests
! Comment out this line if you want to manage X terminals with xdm
DisplayManager.requestPort:     0</pre><p>and then restart <span class="application">XDM</span>.  Remember that
        comments in app-defaults files begin with a <span class="quote">“<span class="quote">!</span>”</span>
        character, not the usual <span class="quote">“<span class="quote">#</span>”</span>.  More strict
        access controls may be desired —— look at the example
        entries in <code class="filename">Xaccess</code>, and refer to the
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a> manual page for further infomation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71625168"></a>6.6.5. Replacements for XDM</h3></div></div></div><p>Several replacements for the default
          <span class="application">XDM</span> program exist.  One of them,
          <span class="application">kdm</span> (bundled with
          <span class="application">KDE</span>) is described later in this
          chapter.  The <span class="application">kdm</span> display manager offers many visual
          improvements and cosmetic frills, as well as the
          functionality to allow users to choose their window manager
          of choice at login time.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="x-fonts.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="x11.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="x11-wm.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">6.5. 在 X11 中使用字型 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 6.7. 桌面環境</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>