<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>9.5. kernel 設定檔解說</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD 使用手冊" /><link rel="up" href="kernelconfig.html" title="章 9. 設定 FreeBSD Kernel" /><link rel="prev" href="kernelconfig-building.html" title="9.4. 重新調配、編譯 kernel" /><link rel="next" href="kernelconfig-trouble.html" title="9.6. If Something Goes Wrong" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">9.5. kernel 設定檔解說</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="kernelconfig-building.html">前一頁</a> </td><th width="60%" align="center">章 9. 設定 FreeBSD Kernel</th><td width="20%" align="right"> <a accesskey="n" href="kernelconfig-trouble.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-config"></a>9.5. kernel 設定檔解說</h2></div><div><span class="authorgroup">Updated for FreeBSD 6.X by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Joel</span> <span class="surname">Dahl</span></span>. </span></div></div></div><a id="idp73157712" class="indexterm"></a><a id="idp73158864" class="indexterm"></a><a id="idp73159376" class="indexterm"></a><p>kernel 設定檔的內容格式相當簡單。
      每一行都包括一個關鍵字，以及一個或多個參數。事實上，
      很多行大多只有一個參數。任何以 <code class="literal">#</code>
      開頭的敘述都將被視為註解而被忽略。
      接下來將以在 <code class="filename">GENERIC</code> 所出現的順序一一介紹之。
      <a id="kernelconfig-options"></a>若要看與該平台架構有關的各選項、設備列表，
      請參閱與 <code class="filename">GENERIC</code> 檔同目錄的 <code class="filename">NOTES</code>
      檔。  而與平台架構差異較無關的通用部份，則可參閱
      <code class="filename">/usr/src/sys/conf/NOTES</code>。</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">若為了測試，而需要一份含有所有可用設定的設定檔，那麼請以
	<code class="systemitem">root</code> 身份下：</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf &amp;&amp; make LINT</code></strong></pre></div><a id="idp73169616" class="indexterm"></a><p>下面為 <code class="filename">GENERIC</code> 設定檔的範例，
      其中包括說明用的註釋。  這例子應該與您機器上的
      <code class="filename">/usr/src/sys/i386/conf/GENERIC</code>
      相當接近。</p><a id="idp73171920" class="indexterm"></a><pre class="programlisting">machine		i386</pre><p>此處是指機器架構，必須為
      <code class="literal">alpha</code>、<code class="literal">amd64</code>、
      <code class="literal">i386</code>、<code class="literal">ia64</code>、
      <code class="literal">pc98</code>、<code class="literal">powerpc</code>、
      <code class="literal">sparc64</code> 其中之一。</p><a id="idp73180752" class="indexterm"></a><pre class="programlisting">cpu          I486_CPU
cpu          I586_CPU
cpu          I686_CPU</pre><p>上面設定是指定要用哪一種 CPU 型號。  也可以同時加上多組 CPU 型號
      (比如說萬一不確定是否要用 <code class="literal">I586_CPU</code> 或
      <code class="literal">I686_CPU</code>)。  然而自訂 kernel 的話，建議先確認自己的
      CPU 型號，然後只用最適合的那組就好了。  若不確定 CPU 到底是用哪一種，
      可以查閱 <code class="filename">/var/run/dmesg.boot</code>
      的開機訊息以確定。</p><a id="idp73183824" class="indexterm"></a><pre class="programlisting">ident          GENERIC</pre><p>這是設定該 kernel 名稱為何，可以隨意命名之，像是取名為
      <code class="literal">MYKERNEL</code>，若是有照先前說明來作大概會取這樣名字。
      <code class="literal">ident</code> 後面的字串會在開機時顯示，因此若要辨認新 kernel
      與常用 kernel 的話，就設定不同組名稱即可(比如在自訂實驗用的
      kernel)。</p><pre class="programlisting">#To statically compile in device wiring instead of /boot/device.hints
#hints          "GENERIC.hints"         # Default places to look for devices.</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=device.hints&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">device.hints</span>(5)</span></a> 可用來設定各項驅動程式的選項。
      開機時 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> 會檢查預設的 <code class="filename">/boot/device.hints</code>
      設定檔。  使用 <code class="literal">hints</code> 選項，就可以把這些 hints
      靜態編入 kernel 內。  如此一來就不必在 <code class="filename">/boot</code>
      內建立 <code class="filename">device.hints</code> 檔。</p><pre class="programlisting">makeoptions     DEBUG=-g          # Build kernel with gdb(1) debug symbols</pre><p>加上 <code class="option">-g</code> 選項的話，FreeBSD 會在編譯過程加上 debug
      用的資訊，透過這選項會讓 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gcc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gcc</span>(1)</span></a> 啟用 debug
      所會用到的相關資訊。</p><pre class="programlisting">options          SCHED_4BSD         # 4BSD scheduler</pre><p>FreeBSD. 傳統所用(並且是預設)的系統 CPU scheduler。  若您不清楚要如何設定
      ，請保留這設定。</p><pre class="programlisting">options          PREEMPTION         # Enable kernel thread preemption</pre><p>Allows threads that are in the kernel to be preempted
      by higher priority threads.  It helps with interactivity and
      allows interrupt threads to run sooner rather than waiting.</p><pre class="programlisting">options          INET              # InterNETworking</pre><p>Networking support.  Leave this in, even if you do not plan to
      be connected to a network.  Most programs require at least loopback
      networking (i.e., making network connections within your PC), so
      this is essentially mandatory.</p><pre class="programlisting">options          INET6             # IPv6 communications protocols</pre><p>This enables the IPv6 communication protocols.</p><pre class="programlisting">options          FFS               # Berkeley Fast Filesystem</pre><p>This is the basic hard drive file system.  Leave it in if you
      boot from the hard disk.</p><pre class="programlisting">options          SOFTUPDATES       # Enable FFS Soft Updates support</pre><p>This option enables Soft Updates in the kernel, this will
      help speed up write access on the disks.  Even when this
      functionality is provided by the kernel, it must be turned on
      for specific disks.  Review the output from <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> to see
      if Soft Updates is enabled for your system disks.  If you do not
      see the <code class="literal">soft-updates</code> option then you will
      need to activate it using the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a> (for existing
      file systems) or <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> (for new file systems)
      commands.</p><pre class="programlisting">options          UFS_ACL           # Support for access control lists</pre><p>This option enables kernel support
      for access control lists.  This relies on the use of extended
      attributes and <acronym class="acronym">UFS2</acronym>, and the feature is described
      in detail in <a class="xref" href="fs-acl.html" title="14.9. Access Control Lists">節 14.9, “Access Control Lists”</a>.  <acronym class="acronym">ACL</acronym>s are
      enabled by default and should not be
      disabled in the kernel if they have been used previously on a file
      system, as this will remove the access control lists, changing the
      way files are protected in unpredictable ways.</p><pre class="programlisting">options          UFS_DIRHASH       # Improve performance on big directories</pre><p>This option includes functionality to speed up disk
      operations on large directories, at the expense of using
      additional memory.  You would normally keep this for a large
      server, or interactive workstation, and remove it if you are
      using FreeBSD on a smaller system where memory is at a premium and
      disk access speed is less important, such as a firewall.</p><pre class="programlisting">options          MD_ROOT           # MD is a potential root device</pre><p>This option enables support for a memory backed virtual disk
      used as a root device.</p><a id="idp73211984" class="indexterm"></a><a id="idp73221456" class="indexterm"></a><pre class="programlisting">options          NFSCLIENT         # Network Filesystem Client
options          NFSSERVER         # Network Filesystem Server
options          NFS_ROOT          # NFS usable as /, requires NFSCLIENT</pre><p>The network file system.  Unless you plan to mount partitions
      from a <span class="trademark">UNIX</span>® file server over TCP/IP, you can comment these
      out.</p><a id="idp73223888" class="indexterm"></a><pre class="programlisting">options          MSDOSFS           # MSDOS Filesystem</pre><p>The <span class="trademark">MS-DOS</span>® file system.  Unless you plan to mount a DOS formatted
      hard drive partition at boot time, you can safely comment this out.
      It will be automatically loaded the first time you mount a DOS
      partition, as described above.  Also, the excellent
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/mtools/pkg-descr">emulators/mtools</a> software
      allows you to access DOS floppies without having to mount and
      unmount them (and does not require <code class="literal">MSDOSFS</code> at
      all).</p><pre class="programlisting">options          CD9660            # ISO 9660 Filesystem</pre><p>The ISO 9660 file system for CDROMs.  Comment it out if you do
      not have a CDROM drive or only mount data CDs occasionally (since it
      will be dynamically loaded the first time you mount a data CD).
      Audio CDs do not need this file system.</p><pre class="programlisting">options          PROCFS            # Process filesystem(requires PSEUDOFS)</pre><p>The process file system.  This is a <span class="quote">“<span class="quote">pretend</span>”</span>
      file system mounted on <code class="filename">/proc</code> which allows
      programs like <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> to give you more information on what
      processes are running.  Use of <code class="literal">PROCFS</code>
      is not required under most circumstances, as most
      debugging and monitoring tools have been adapted to run without
      <code class="literal">PROCFS</code>: installs will not mount this file
      system by default.</p><pre class="programlisting">options          PSEUDOFS          # Pseudo-filesystem framework</pre><p>6.X kernels making use of <code class="literal">PROCFS</code> must also
      include support for <code class="literal">PSEUDOFS</code>.</p><pre class="programlisting">options          GEOM_GPT          # GUID Partition Tables.</pre><p>This option brings the ability to have a large number of
      partitions on a single disk.</p><pre class="programlisting">options          COMPAT_43         # Compatible with BSD 4.3 [KEEP THIS!]</pre><p>Compatibility with 4.3BSD.  Leave this in; some programs will
      act strangely if you comment this out.</p><pre class="programlisting">options          COMPAT_FREEBSD4   # Compatible with FreeBSD4</pre><p>This option is required on FreeBSD 5.X <span class="trademark">i386</span>™ and Alpha systems
      to support applications compiled on older versions of FreeBSD
      that use older system call interfaces.  It is recommended that
      this option be used on all <span class="trademark">i386</span>™ and Alpha systems that may
      run older applications; platforms that gained support only in
      5.X, such as ia64 and <span class="trademark">Sparc64</span>®, do not require this option.</p><pre class="programlisting">options          COMPAT_FREEBSD5   # 與 FreeBSD5 相容</pre><p>此行是 FreeBSD 6.X 及更新的版本若需支援 FreeBSD 5.X
      系統呼叫才需要設定。</p><pre class="programlisting">options          SCSI_DELAY=5000  # Delay (in ms) before probing SCSI</pre><p>This causes the kernel to pause for 5 seconds before probing
      each SCSI device in your system.  If you only have IDE hard drives,
      you can ignore this, otherwise you can try to lower this
      number, to speed up booting.  Of course, if
      you do this and FreeBSD has trouble recognizing your SCSI devices,
      you will have to raise it again.</p><pre class="programlisting">options          KTRACE            # ktrace(1) support</pre><p>This enables kernel process tracing, which is useful in
      debugging.</p><pre class="programlisting">options          SYSVSHM           # SYSV-style shared memory</pre><p>This option provides for System V shared memory.  The most
      common use of this is the XSHM extension in X, which many
      graphics-intensive programs will automatically take advantage of for
      extra speed.  If you use X, you will definitely want to include
      this.</p><pre class="programlisting">options          SYSVMSG           # SYSV-style message queues</pre><p>Support for System V messages.  This option only adds
      a few hundred bytes to the kernel.</p><pre class="programlisting">options          SYSVSEM           # SYSV-style semaphores</pre><p>Support for System V semaphores.  Less commonly used but only
      adds a few hundred bytes to the kernel.</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">The <code class="option">-p</code> option of the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipcs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ipcs</span>(1)</span></a> command will
	list any processes using each of these System V facilities.</p></div><pre class="programlisting">options 	     _KPOSIX_PRIORITY_SCHEDULING # POSIX P1003_1B real-time extensions</pre><p>Real-time extensions added in the 1993 <span class="trademark">POSIX</span>®.  Certain
      applications in the Ports Collection use these
      (such as <span class="application"><span class="trademark">StarOffice</span>™</span>).</p><pre class="programlisting">options          KBD_INSTALL_CDEV  # install a CDEV entry in /dev</pre><p>This option is required to allow the creation of keyboard device
      nodes in <code class="filename">/dev</code>.</p><pre class="programlisting">options          ADAPTIVE_GIANT    # Giant mutex is adaptive.</pre><p>Giant is the name of a mutual exclusion mechanism (a sleep mutex)
      that protects a large set of kernel resources.  Today, this is an
      unacceptable performance bottleneck which is actively being replaced
      with locks that protect individual resources.  The
      <code class="literal">ADAPTIVE_GIANT</code> option causes Giant to be included
      in the set of mutexes adaptively spun on.  That is, when a thread
      wants to lock the Giant mutex, but it is already locked by a thread
      on another CPU, the first thread will keep running and wait for the
      lock to be released.  Normally, the thread would instead go back to
      sleep and wait for its next chance to run.  If you are not sure,
      leave this in.</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">Note that on FreeBSD 8.0-CURRENT and later versions, all mutexes are
	adaptive by default, unless explicitly set to non-adaptive by
	compiling with the <code class="literal">NO_ADAPTIVE_MUTEXES</code> option.  As
	a result, Giant is adaptive by default now, and the
	<code class="literal">ADAPTIVE_GIANT</code> option has been removed from the
	kernel configuration.</p></div><a id="idp73257168" class="indexterm"></a><pre class="programlisting">device          apic               # I/O APIC</pre><p>The apic device enables the use of the I/O APIC for interrupt
      delivery.  The apic device can be used in both UP and SMP kernels, but
      is required for SMP kernels.  Add <code class="literal">options SMP</code> to
      include support for multiple processors.</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">apic 只限 i386 架構才有，其他架構則不必加上這行。</p></div><pre class="programlisting">device          eisa</pre><p>Include this if you have an EISA motherboard.  This enables
      auto-detection and configuration support for all devices on the EISA
      bus.</p><pre class="programlisting">device          pci</pre><p>Include this if you have a PCI motherboard.  This enables
      auto-detection of PCI cards and gatewaying from the PCI to ISA
      bus.</p><pre class="programlisting"># Floppy drives
device          fdc</pre><p>This is the floppy drive controller.</p><pre class="programlisting"># ATA and ATAPI devices
device          ata</pre><p>This driver supports all ATA and ATAPI devices.  You only need
      one <code class="literal">device ata</code> line for the kernel to detect all
      PCI ATA/ATAPI devices on modern machines.</p><pre class="programlisting">device          atadisk                 # ATA disk drives</pre><p>This is needed along with <code class="literal">device ata</code> for
      ATA disk drives.</p><pre class="programlisting">device          ataraid                 # ATA RAID drives</pre><p>This is needed along with <code class="literal">device ata</code> for ATA
      RAID drives.</p><pre class="programlisting"><a id="kernelconfig-atapi"></a>
device          atapicd                 # ATAPI CDROM drives</pre><p>This is needed along with <code class="literal">device ata</code> for
      ATAPI CDROM drives.</p><pre class="programlisting">device          atapifd                 # ATAPI floppy drives</pre><p>This is needed along with <code class="literal">device ata</code> for
      ATAPI floppy drives.</p><pre class="programlisting">device          atapist                 # ATAPI tape drives</pre><p>This is needed along with <code class="literal">device ata</code> for
      ATAPI tape drives.</p><pre class="programlisting">options         ATA_STATIC_ID           # Static device numbering</pre><p>This makes the controller number static; without this,
      the device numbers are dynamically allocated.</p><pre class="programlisting"># SCSI Controllers
device          ahb        # EISA AHA1742 family
device          ahc        # AHA2940 and onboard AIC7xxx devices
options         AHC_REG_PRETTY_PRINT    # Print register bitfields in debug
                                        # output.  Adds ~128k to driver.
device          ahd        # AHA39320/29320 and onboard AIC79xx devices
options         AHD_REG_PRETTY_PRINT    # Print register bitfields in debug
				        # output.  Adds ~215k to driver.
device          amd        # AMD 53C974 (Teckram DC-390(T))
device          isp        # Qlogic family
device          ispfw      # Firmware for QLogic HBAs- normally a module
device          mpt        # LSI-Logic MPT-Fusion
#device         ncr        # NCR/Symbios Logic
device          sym        # NCR/Symbios Logic (newer chipsets + those of `ncr')
device          trm        # Tekram DC395U/UW/F DC315U adapters

device          adv        # Advansys SCSI adapters
device          adw        # Advansys wide SCSI adapters
device          aha        # Adaptec 154x SCSI adapters
device          aic        # Adaptec 15[012]x SCSI adapters, AIC-6[23]60.
device          bt         # Buslogic/Mylex MultiMaster SCSI adapters

device          ncv        # NCR 53C500
device          nsp        # Workbit Ninja SCSI-3
device          stg        # TMC 18C30/18C50</pre><p>SCSI controllers.  Comment out any you do not have in your
      system.  If you have an IDE only system, you can remove these
      altogether.  The <code class="literal">*_REG_PRETTY_PRINT</code> lines are
      debugging options for their respective drivers.</p><pre class="programlisting"># SCSI peripherals
device          scbus      # SCSI bus (required for SCSI)
device          ch         # SCSI media changers
device          da         # Direct Access (disks)
device          sa         # Sequential Access (tape etc)
device          cd         # CD
device          pass       # Passthrough device (direct SCSI access)
device          ses        # SCSI Environmental Services (and SAF-TE)</pre><p>SCSI peripherals.  Again, comment out any you do not have, or if
      you have only IDE hardware, you can remove them completely.</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">The USB <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a> driver and a few other drivers use
	the SCSI subsystem even though they are not real SCSI devices.
	Therefore make sure not to remove SCSI support, if any such
	drivers are included in the kernel configuration.</p></div><pre class="programlisting"># RAID controllers interfaced to the SCSI subsystem
device          amr        # AMI MegaRAID
device          arcmsr     # Areca SATA II RAID
device          asr        # DPT SmartRAID V, VI and Adaptec SCSI RAID
device          ciss       # Compaq Smart RAID 5*
device          dpt        # DPT Smartcache III, IV - See NOTES for options
device          hptmv      # Highpoint RocketRAID 182x
device          rr232x     # Highpoint RocketRAID 232x
device          iir        # Intel Integrated RAID
device          ips        # IBM (Adaptec) ServeRAID
device          mly        # Mylex AcceleRAID/eXtremeRAID
device          twa        # 3ware 9000 series PATA/SATA RAID

# RAID controllers
device          aac        # Adaptec FSA RAID
device          aacp       # SCSI passthrough for aac (requires CAM)
device          ida        # Compaq Smart RAID
device          mfi        # LSI MegaRAID SAS
device          mlx        # Mylex DAC960 family
device          pst        # Promise Supertrak SX6000
device          twe        # 3ware ATA RAID</pre><p>Supported RAID controllers.  If you do not have any of these,
      you can comment them out or remove them.</p><pre class="programlisting"># atkbdc0 controls both the keyboard and the PS/2 mouse
device          atkbdc     # AT keyboard controller</pre><p>The keyboard controller (<code class="literal">atkbdc</code>) provides I/O
      services for the AT keyboard and PS/2 style pointing devices.  This
      controller is required by the keyboard driver
      (<code class="literal">atkbd</code>) and the PS/2 pointing device driver
      (<code class="literal">psm</code>).</p><pre class="programlisting">device          atkbd      # AT keyboard</pre><p>The <code class="literal">atkbd</code> driver, together with
      <code class="literal">atkbdc</code> controller, provides access to the AT 84
      keyboard or the AT enhanced keyboard which is connected to the AT
      keyboard controller.</p><pre class="programlisting">device          psm        # PS/2 mouse</pre><p>Use this device if your mouse plugs into the PS/2 mouse
      port.</p><pre class="programlisting">device          kbdmux        # keyboard multiplexer</pre><p>多重鍵盤的支援。  若不打算同時接多組鍵盤的話，
      那麼若要移除該行也沒關係。</p><pre class="programlisting">device          vga        # VGA video card driver</pre><p>The video card driver.</p><pre class="programlisting">
device          splash     # Splash screen and screen saver support</pre><p>Splash screen at start up!  Screen savers require this
      too.</p><pre class="programlisting"># syscons is the default console driver, resembling an SCO console
device          sc</pre><p><code class="literal">sc</code> is the default console driver and
      resembles a SCO console.  Since most full-screen programs access the
      console through a terminal database library like
      <code class="filename">termcap</code>, it should not matter whether you use
      this or <code class="literal">vt</code>, the <code class="literal">VT220</code>
      compatible console driver.  When you log in, set your
      <code class="envar">TERM</code> variable to <code class="literal">scoansi</code> if
      full-screen programs have trouble running under this console.</p><pre class="programlisting"># Enable this for the pcvt (VT220 compatible) console driver
#device          vt
#options         XSERVER          # support for X server on a vt console
#options         FAT_CURSOR       # start with block cursor</pre><p>This is a VT220-compatible console driver, backward compatible to
      VT100/102.  It works well on some laptops which have hardware
      incompatibilities with <code class="literal">sc</code>.  Also set your
      <code class="envar">TERM</code> variable to <code class="literal">vt100</code> or
      <code class="literal">vt220</code> when you log in.  This driver might also
      prove useful when connecting to a large number of different machines
      over the network, where <code class="filename">termcap</code> or
      <code class="filename">terminfo</code> entries for the <code class="literal">sc</code>
      device are often not available —— <code class="literal">vt100</code>
      should be available on virtually any platform.</p><pre class="programlisting">device          agp</pre><p>Include this if you have an AGP card in the system.  This
      will enable support for AGP, and AGP GART for boards which
      have these features.</p><a id="idp73301712" class="indexterm"></a><pre class="programlisting"># Power management support (see NOTES for more options)
#device          apm</pre><p>Advanced Power Management support.  Useful for laptops,
      although in FreeBSD 5.X and above this is disabled in
      <code class="filename">GENERIC</code> by default.</p><pre class="programlisting"># Add suspend/resume support for the i8254.
device           pmtimer</pre><p>Timer device driver for power management events, such as APM and
      ACPI.</p><pre class="programlisting"># PCCARD (PCMCIA) support
# PCMCIA and cardbus bridge support
device          cbb               # cardbus (yenta) bridge
device          pccard            # PC Card (16-bit) bus
device          cardbus           # CardBus (32-bit) bus</pre><p>PCMCIA support.  You want this if you are using a
      laptop.</p><pre class="programlisting"># Serial (COM) ports
device          sio               # 8250, 16[45]50 based serial ports</pre><p>These are the serial ports referred to as
      <code class="filename">COM</code> ports in the <span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>®
      world.</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">If you have an internal modem on <code class="filename">COM4</code>
	and a serial port at <code class="filename">COM2</code>, you will have
	to change the IRQ of the modem to 2 (for obscure technical reasons,
	IRQ2 = IRQ 9) in order to access it
	from FreeBSD.  If you have a multiport serial card, check the
	manual page for <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> for more information on the proper
	values to add to your <code class="filename">/boot/device.hints</code>.
	Some video cards (notably those based on
	S3 chips) use IO addresses in the form of
	<code class="literal">0x*2e8</code>, and since many cheap serial cards do
	not fully decode the 16-bit IO address space, they clash with
	these cards making the <code class="filename">COM4</code> port
	practically unavailable.</p><p xmlns="http://www.w3.org/1999/xhtml">Each serial port is required to have a unique IRQ (unless you
        are using one of the multiport cards where shared interrupts are
	supported), so the default IRQs for <code class="filename">COM3</code>
	and <code class="filename">COM4</code> cannot be used.</p></div><pre class="programlisting"># Parallel port
device          ppc</pre><p>This is the ISA-bus parallel port interface.</p><pre class="programlisting">device          ppbus      # Parallel port bus (required)</pre><p>Provides support for the parallel port bus.</p><pre class="programlisting">device          lpt        # Printer</pre><p>Support for parallel port printers.</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">All three of the above are required to enable parallel printer
	support.</p></div><pre class="programlisting">device          plip       # TCP/IP over parallel</pre><p>This is the driver for the parallel network interface.</p><pre class="programlisting">device          ppi        # Parallel port interface device</pre><p>The general-purpose I/O (<span class="quote">“<span class="quote">geek port</span>”</span>) + IEEE1284
      I/O.</p><pre class="programlisting">#device         vpo        # Requires scbus and da</pre><a id="idp73321936" class="indexterm"></a><p>This is for an Iomega Zip drive.  It requires
      <code class="literal">scbus</code> and <code class="literal">da</code> support.  Best
      performance is achieved with ports in EPP 1.9 mode.</p><pre class="programlisting">#device         puc</pre><p>Uncomment this device if you have a <span class="quote">“<span class="quote">dumb</span>”</span> serial
      or parallel PCI card that is supported by the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=puc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">puc</span>(4)</span></a> glue
      driver.</p><pre class="programlisting"># PCI Ethernet NICs.
device          de         # DEC/Intel DC21x4x (<span class="quote">“<span class="quote">Tulip</span>”</span>)
device          em         # Intel PRO/1000 adapter Gigabit Ethernet Card
device          ixgb       # Intel PRO/10GbE Ethernet Card
device          txp        # 3Com 3cR990 (<span class="quote">“<span class="quote">Typhoon</span>”</span>)
device          vx         # 3Com 3c590, 3c595 (<span class="quote">“<span class="quote">Vortex</span>”</span>)</pre><p>Various PCI network card drivers.  Comment out or remove any of
      these not present in your system.</p><pre class="programlisting"># PCI Ethernet NICs that use the common MII bus controller code.
# NOTE: Be sure to keep the 'device miibus' line in order to use these NICs!
device          miibus     # MII bus support</pre><p>MII bus support is required for some PCI 10/100 Ethernet NICs,
      namely those which use MII-compliant transceivers or implement
      transceiver control interfaces that operate like an MII.  Adding
      <code class="literal">device miibus</code> to the kernel config pulls in
      support for the generic miibus API and all of the PHY drivers,
      including a generic one for PHYs that are not specifically handled
      by an individual driver.</p><pre class="programlisting">device          bce        # Broadcom BCM5706/BCM5708 Gigabit Ethernet
device          bfe        # Broadcom BCM440x 10/100 Ethernet
device          bge        # Broadcom BCM570xx Gigabit Ethernet
device          dc         # DEC/Intel 21143 and various workalikes
device          fxp        # Intel EtherExpress PRO/100B (82557, 82558)
device          lge        # Level 1 LXT1001 gigabit ethernet
device          msk        # Marvell/SysKonnect Yukon II Gigabit Ethernet
device          nge        # NatSemi DP83820 gigabit ethernet
device          nve        # nVidia nForce MCP on-board Ethernet Networking
device          pcn        # AMD Am79C97x PCI 10/100 (precedence over 'lnc')
device          re         # RealTek 8139C+/8169/8169S/8110S
device          rl         # RealTek 8129/8139
device          sf         # Adaptec AIC-6915 (<span class="quote">“<span class="quote">Starfire</span>”</span>)
device          sis        # Silicon Integrated Systems SiS 900/SiS 7016
device          sk         # SysKonnect SK-984x &amp; SK-982x gigabit Ethernet
device          ste        # Sundance ST201 (D-Link DFE-550TX)
device          stge       # Sundance/Tamarack TC9021 gigabit Ethernet
device          ti         # Alteon Networks Tigon I/II gigabit Ethernet
device          tl         # Texas Instruments ThunderLAN
device          tx         # SMC EtherPower II (83c170 <span class="quote">“<span class="quote">EPIC</span>”</span>)
device          vge        # VIA VT612x gigabit ethernet
device          vr         # VIA Rhine, Rhine II
device          wb         # Winbond W89C840F
device          xl         # 3Com 3c90x (<span class="quote">“<span class="quote">Boomerang</span>”</span>, <span class="quote">“<span class="quote">Cyclone</span>”</span>)</pre><p>Drivers that use the MII bus controller code.</p><pre class="programlisting"># ISA Ethernet NICs.  pccard NICs included.
device          cs         # Crystal Semiconductor CS89x0 NIC
# 'device ed' requires 'device miibus'
device          ed         # NE[12]000, SMC Ultra, 3c503, DS8390 cards
device          ex         # Intel EtherExpress Pro/10 and Pro/10+
device          ep         # Etherlink III based cards
device          fe         # Fujitsu MB8696x based cards
device          ie         # EtherExpress 8/16, 3C507, StarLAN 10 etc.
device          lnc        # NE2100, NE32-VL Lance Ethernet cards
device          sn         # SMC's 9000 series of Ethernet chips
device          xe         # Xircom pccard Ethernet

# ISA devices that use the old ISA shims
#device         le</pre><p>ISA Ethernet drivers.  See
      <code class="filename">/usr/src/sys/i386/conf/NOTES</code> for details
of which cards are
      supported by which driver.</p><pre class="programlisting"># Wireless NIC cards
device          wlan       # 802.11 support</pre><p>對 802.11 標準的支援。  若要無線上網，則需加上這行。</p><pre class="programlisting">device          wlan_wep        # 802.11 WEP support
device          wlan_ccmp       # 802.11 CCMP support
device          wlan_tkip       # 802.11 TKIP support</pre><p>對 802.11 加密設備的支援。  若要安全加密以及 802.11i 安全協定，
      則需加上這行。</p><pre class="programlisting">device          an         # Aironet 4500/4800 802.11 wireless NICs.
device          ath             # Atheros pci/cardbus NIC's
device          ath_hal         # Atheros HAL (Hardware Access Layer)
device          ath_rate_sample # SampleRate tx rate control for ath
device          an         # Aironet 4500/4800 802.11 wireless NICs.
device          awi        # BayStack 660 and others
device          ral        # Ralink Technology RT2500 wireless NICs.
device          wi         # WaveLAN/Intersil/Symbol 802.11 wireless NICs.
#device         wl         # Older non 802.11 Wavelan wireless NIC.</pre><p>Support for various wireless cards.</p><pre class="programlisting"># Pseudo devices
device   loop          # Network loopback</pre><p>This is the generic loopback device for TCP/IP.  If you telnet
      or FTP to <code class="systemitem">localhost</code> (a.k.a. <code class="systemitem">127.0.0.1</code>) it will come back at you through
      this device.  This is <span class="emphasis"><em>mandatory</em></span>.</p><pre class="programlisting">device   random        # Entropy device</pre><p>Cryptographically secure random number generator.</p><pre class="programlisting">device   ether         # Ethernet support</pre><p><code class="literal">ether</code> is only needed if you have an Ethernet
      card.  It includes generic Ethernet protocol code.</p><pre class="programlisting">device   sl            # Kernel SLIP</pre><p><code class="literal">sl</code> is for SLIP support.  This has been almost
      entirely supplanted by PPP, which is easier to set up, better suited
      for modem-to-modem connection, and more powerful.</p><pre class="programlisting">device   ppp           # Kernel PPP</pre><p>This is for kernel PPP support for dial-up connections.  There
      is also a version of PPP implemented as a userland application that
      uses <code class="literal">tun</code> and offers more flexibility and features
      such as demand dialing.</p><pre class="programlisting">device   tun           # Packet tunnel.</pre><p>This is used by the userland PPP software.
      See
      the <a class="link" href="userppp.html" title="27.2. Using User PPP">PPP</a> section of this book for more
      information.</p><pre class="programlisting"><a id="kernelconfig-ptys"></a>
device   pty           # Pseudo-ttys (telnet etc)</pre><p>This is a <span class="quote">“<span class="quote">pseudo-terminal</span>”</span> or simulated login port.
      It is used by incoming <code class="command">telnet</code> and
      <code class="command">rlogin</code> sessions,
      <span class="application">xterm</span>, and some other applications such
      as <span class="application">Emacs</span>.</p><pre class="programlisting">device   md            # Memory <span class="quote">“<span class="quote">disks</span>”</span></pre><p>Memory disk pseudo-devices.</p><pre class="programlisting">device   gif           # IPv6 and IPv4 tunneling</pre><p>This implements IPv6 over IPv4 tunneling, IPv4 over IPv6 tunneling,
      IPv4 over IPv4 tunneling, and IPv6 over IPv6 tunneling.  The
      <code class="literal">gif</code> device is
      <span class="quote">“<span class="quote">auto-cloning</span>”</span>, and will create device nodes as
      needed.</p><pre class="programlisting">device   faith         # IPv6-to-IPv4 relaying (translation)</pre><p>This pseudo-device captures packets that are sent to it and
      diverts them to the IPv4/IPv6 translation daemon.</p><pre class="programlisting"># The `bpf' device enables the Berkeley Packet Filter.
# Be aware of the administrative consequences of enabling this!
# Note that 'bpf' is required for DHCP.
device   bpf           # Berkeley packet filter</pre><p>This is the Berkeley Packet Filter.  This pseudo-device allows
      network interfaces to be placed in promiscuous mode, capturing every
      packet on a broadcast network (e.g., an Ethernet).  These packets
      can be captured to disk and or examined with the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcpdump</span>(1)</span></a>
      program.</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">The <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bpf&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bpf</span>(4)</span></a> device is also used by
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a> to obtain the IP address of the default router
	(gateway) and so on.  If you use DHCP, leave this
	uncommented.</p></div><pre class="programlisting"># USB support
device          uhci          # UHCI PCI-&gt;USB interface
device          ohci          # OHCI PCI-&gt;USB interface
device          ehci          # EHCI PCI-&gt;USB interface (USB 2.0)
device          usb           # USB Bus (required)
#device         udbp          # USB Double Bulk Pipe devices
device          ugen          # Generic
device          uhid          # <span class="quote">“<span class="quote">Human Interface Devices</span>”</span>
device          ukbd          # Keyboard
device          ulpt          # Printer
device          umass         # Disks/Mass storage - Requires scbus and da
device          ums           # Mouse
device          ural          # Ralink Technology RT2500USB wireless NICs
device          urio          # Diamond Rio 500 MP3 player
device          uscanner      # Scanners
# USB Ethernet, requires mii
device          aue           # ADMtek USB Ethernet
device          axe           # ASIX Electronics USB Ethernet
device          cdce          # Generic USB over Ethernet
device          cue           # CATC USB Ethernet
device          kue           # Kawasaki LSI USB Ethernet
device          rue           # RealTek RTL8150 USB Ethernet</pre><p>Support for various USB devices.</p><pre class="programlisting"># FireWire support
device          firewire      # FireWire bus code
device          sbp           # SCSI over FireWire (Requires scbus and da)
device          fwe           # Ethernet over FireWire (non-standard!)</pre><p>Support for various Firewire devices.</p><p>For more information and additional devices supported by
      FreeBSD, see
      <code class="filename">/usr/src/sys/i386/conf/NOTES</code>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73367632"></a>9.5.1. Large Memory Configurations (<acronym class="acronym">PAE</acronym>)</h3></div></div></div><a id="idp73368656" class="indexterm"></a><p>Large memory configuration machines require access to
	  more than the 4 gigabyte limit on User+Kernel Virtual
	  Address (<acronym class="acronym">KVA</acronym>) space.  Due to this
	  limitation, Intel added support for 36-bit physical address
	  space access in the <span class="trademark">Pentium</span>® Pro and later line of CPUs.</p><p>The Physical Address Extension (<acronym class="acronym">PAE</acronym>)
	  capability of the <span class="trademark">Intel</span>® <span class="trademark">Pentium</span>® Pro and later CPUs
	  allows memory configurations of up to 64 gigabytes.
	  FreeBSD provides support for this capability via the
	  <code class="option">PAE</code> kernel configuration option, available
	  in all current release versions of FreeBSD.  Due to
	  the limitations of the Intel memory architecture, no distinction
	  is made for memory above or below 4 gigabytes.  Memory allocated
	  above 4 gigabytes is simply added to the pool of available
	  memory.</p><p>To enable <acronym class="acronym">PAE</acronym> support in the kernel,
	  simply add the following line to your kernel configuration
	  file:</p><pre class="programlisting">options		    PAE</pre><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">The <acronym class="acronym">PAE</acronym> support in FreeBSD is only
	    available for <span class="trademark">Intel</span>® IA-32 processors.  It should also be
	    noted, that the <acronym class="acronym">PAE</acronym> support in FreeBSD has
	    not received wide testing, and should be considered beta
	    quality compared to other stable features of FreeBSD.</p></div><p><acronym class="acronym">PAE</acronym> support in FreeBSD has a few limitations:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A process is not able to access more than 4
	      gigabytes of VM space.</p></li><li class="listitem"><p><acronym class="acronym">KLD</acronym> modules cannot be loaded into
	      a <acronym class="acronym">PAE</acronym> enabled kernel, due to the
	      differences in the build framework of a module and the
	      kernel.</p></li><li class="listitem"><p>Device drivers that do not use the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bus_dma&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">bus_dma</span>(9)</span></a>
	      interface will cause data corruption in a
	      <acronym class="acronym">PAE</acronym> enabled kernel and are not
	      recommended for use.  For this reason, a
	      <code class="filename">PAE</code> kernel
	      configuration file is provided in FreeBSD which
	      excludes all drivers not known to work in a <acronym class="acronym">PAE</acronym> enabled
	      kernel.</p></li><li class="listitem"><p>Some system tunables determine memory resource usage
	      by the amount of available physical memory.  Such
	      tunables can unnecessarily over-allocate due to the
	      large memory nature of a <acronym class="acronym">PAE</acronym> system.
	      One such example is the <code class="option">kern.maxvnodes</code>
	      sysctl, which controls the maximum number of vnodes allowed
	      in the kernel.  It is advised to adjust this and other
	      such tunables to a reasonable value.</p></li><li class="listitem"><p>It might be necessary to increase the kernel virtual
	      address (<acronym class="acronym">KVA</acronym>) space or to reduce the
	      amount of specific kernel resource that is heavily used
	      (see above) in order to avoid <acronym class="acronym">KVA</acronym>
	      exhaustion.  The <code class="option">KVA_PAGES</code> kernel option
	      can be used for increasing the
	      <acronym class="acronym">KVA</acronym> space.</p></li></ul></div><p>For performance and stability concerns, it is advised to
	  consult the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tuning&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">tuning</span>(7)</span></a> manual page.  The <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pae&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pae</span>(4)</span></a>
	  manual page contains up-to-date information on FreeBSD's
	  <acronym class="acronym">PAE</acronym> support.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="kernelconfig-building.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="kernelconfig.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="kernelconfig-trouble.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">9.4. 重新調配、編譯 kernel </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 9.6. If Something Goes Wrong</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>