<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>12.17. Avoid use of the .error construct</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="porting-dads.html" title="章 12. Dos and Don'ts" /><link rel="prev" href="dads-deprecated.html" title="12.16. Marking a port for removal with DEPRECATED or EXPIRATION_DATE" /><link rel="next" href="dads-sysctl.html" title="12.18. sysctl 使用時機" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.17. Avoid use of the <code class="literal">.error</code> construct</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dads-deprecated.html">前一頁</a> </td><th width="60%" align="center">章 12. Dos and Don'ts</th><td width="20%" align="right"> <a accesskey="n" href="dads-sysctl.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-dot-error"></a>12.17. Avoid use of the <code class="literal">.error</code> construct</h2></div></div></div><p>The correct way for a <code class="filename">Makefile</code> to
	  signal that the port can not be installed due to some external
	  factor (for instance, the user has specified an illegal
	  combination of build options) is to set a nonblank value to
	  <code class="varname">IGNORE</code>.  This value will be formatted and
	  shown to the user by <code class="command">make install</code>.</p><p>It is a common mistake to use <code class="literal">.error</code>
	  for this purpose.  The problem with this is that many
	  automated tools that work with the ports tree will fail in
	  this situation.  The most common occurrence of this is seen
	  when trying to build <code class="filename">/usr/ports/INDEX</code>
	  (see <a class="xref" href="testing.html#make-describe" title="9.1. Running make describe">節 9.1, “Running <code class="command">make describe</code>”</a>).  However, even more
	  trivial commands such as <code class="command">make -V maintainer</code>
	  also fail in this scenario.  This is not acceptable.</p><div class="example"><a id="dot-error-breaks-index"></a><div class="example-title">範例 12.1. How to avoid using <code class="literal">.error</code></div><div class="example-contents"><p>Assume that someone has the line
	    </p><pre class="programlisting">USE_POINTYHAT=yes</pre><p>
	    in <code class="filename">make.conf</code>.  The first of
	    the next two <code class="filename">Makefile</code> snippets will
	    cause <code class="command">make index</code> to fail, while the
	    second one will not:</p><pre class="programlisting">.if USE_POINTYHAT
.error "POINTYHAT is not supported"
.endif</pre><pre class="programlisting">.if USE_POINTYHAT
IGNORE=POINTYHAT is not supported
.endif</pre></div></div><br class="example-break" /></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dads-deprecated.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="porting-dads.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="dads-sysctl.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">12.16. Marking a port for removal with <code class="varname">DEPRECATED</code>
	  or <code class="varname">EXPIRATION_DATE</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 12.18. <code class="filename">sysctl</code> 使用時機</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>