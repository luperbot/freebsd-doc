<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>3.2. 撰寫該軟體的說明檔</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="quick-porting.html" title="章 3. 打造 Port 快速上手篇" /><link rel="prev" href="quick-porting.html" title="章 3. 打造 Port 快速上手篇" /><link rel="next" href="porting-checksum.html" title="3.3. 產生 checksum 用途的 distinfo 檔" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.2. 撰寫該軟體的說明檔</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="quick-porting.html">前一頁</a> </td><th width="60%" align="center">章 3. 打造 Port 快速上手篇</th><td width="20%" align="right"> <a accesskey="n" href="porting-checksum.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-desc"></a>3.2. 撰寫該軟體的說明檔</h2></div></div></div><p>無論是否打算再加工做成 package，有 2 個檔案是任何實體 port (Slave
	  port則不一定)都必須要具備的。  這 2 個檔分別是
	  <code class="filename">pkg-descr</code> 檔及 <code class="filename">pkg-plist</code>
	  檔。  這兩個檔案檔名前面都有 <code class="filename">pkg-</code>
	  以跟其他檔案做區別。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp63534544"></a>3.2.1. <code class="filename">pkg-descr</code></h3></div></div></div><p>這是此 port 的詳細說明檔，請用一段或幾段文字來說明該 port
	    的作用，並附上 WWW 網址(若有的話)。</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">請注意，這檔絕非「該軟體的說明手冊」或是「如何編譯、使用該
	      port 的說明」。  若是從該軟體的 <code class="filename">README</code>
	      或 manpage 直接複製過來的話，請注意，因為它們通常都寫得太詳細、
	      格式較特別(比如 manpage 會自動調整空白)，
	      請儘量避免這些冗長贅詞或採用特殊格式。若該軟體有官方版首頁的話，
	      請在此列出來。  每個網址請用 <code class="literal">WWW:</code> 作為開頭，
	      這樣子相關工具程式就會自動處理完畢。</p></div><p>該 port 的 <code class="filename">pkg-descr</code> 內容，大致如下面例子
	    ：</p><pre class="programlisting">This is a port of oneko, in which a cat chases a poor mouse all over
the screen.
 :
(etc.)

WWW: http://www.oneko.org/</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp63544784"></a>3.2.2. <code class="filename">pkg-plist</code></h3></div></div></div><p>這是該 port 所會裝的所有檔案清單，另外因為 package
	    會由這清單所產生，因此也被稱為『packing list
	    (打包清單)』。 以 <code class="literal">${PREFIX}</code> 為基準點，
	    而用相對路徑表示。(<code class="literal">${PREFIX}</code> 通常是
	    <code class="filename">/usr/local</code> 或 <code class="filename">/usr/X11R6</code>)
	    但是如果該程式有安裝 man page 的話，則要以類似
	    <code class="varname">MAN<em class="replaceable"><code>n</code></em>=</code> 的方式寫在
	    <code class="filename">Makefile</code> 內，不能列在
	    <code class="filename">pkg-plist</code> 哦。
	    除了列出檔案以外，也要把該 port 所會建立的目錄也列進去，
	    方式有兩種：一種是寫在 <code class="filename">pkg-plist</code> 內的方式，
	    比如：<code class="literal">@dirrm</code>。  至於另外一種方式，則是寫在
	    <code class="filename">Makefile</code> 內，比如：
	    <code class="literal">PLIST_FILES=</code> 之類的方式。</p><p>該 port 的 <code class="filename">pkg-plist</code> 內容，
	    大致如下面例子:</p><pre class="programlisting">bin/oneko
lib/X11/app-defaults/Oneko
lib/X11/oneko/cat1.xpm
lib/X11/oneko/cat2.xpm
lib/X11/oneko/mouse.xpm
@dirrm lib/X11/oneko</pre><p>關於 packing list 方面，可以參閱 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_create&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_create</span>(1)</span></a> 會有詳解
	    。</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">建議清單內的檔名，依照字母順序作排序，那麼下次要升級時，
	      會比較清楚、方便來更新這份清單。 </p></div><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">手動生這份清單實在太苦了。尤其若該 port 會裝一大堆檔案的話，
	      請多善用 <a class="link" href="plist-autoplist.html" title="7.5. 自動產生 package list">自動產生 packing
	      list</a> 會比較省時省力唷。</p></div><p>只有在一種情況下可以省略不用生 <code class="filename">pkg-plist</code>
	    檔：  若安裝的 port 相當單純，只有裝一些檔案，
	    以及都在同一目錄下的話，那麼可以在 <code class="filename">Makefile</code>
	    內改用 <code class="varname">PLIST_FILES</code> 及
	    <code class="varname">PLIST_DIRS</code> 來取代。
	    比如，可以在上述的 <code class="filename">oneko</code> port 內不必附上
	    <code class="filename">pkg-plist</code> ，而只需在
	    <code class="filename">Makefile</code> 內加入下列幾行：</p><pre class="programlisting">PLIST_FILES=    bin/oneko \
                lib/X11/app-defaults/Oneko \
                lib/X11/oneko/cat1.xpm \
                lib/X11/oneko/cat2.xpm \
                lib/X11/oneko/mouse.xpm
PLIST_DIRS=     lib/X11/oneko</pre><p>當然，若該 port 並無安裝自屬的目錄的話，就不必設
	    <code class="varname">PLIST_DIRS</code> 囉。</p><p>然而，使用 <code class="varname">PLIST_FILES</code>、
	    <code class="varname">PLIST_DIRS</code> 是必須付出代價：
	    不能使用 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_create&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_create</span>(1)</span></a> 內所說的 command sequences。
	    因此，這招僅適用於較簡單的 port ，以及簡化該 port 的作法。
	    此外，這招還有一個好處：可以減少 ports collection 的整體檔案總數。
	    所以，在考慮是否一定要用 <code class="filename">pkg-plist</code> 之前，
	    可以先斟酌這個替代方案看看。</p><p>後面會介紹到如何運用 <code class="filename">pkg-plist</code>、
	    <code class="varname">PLIST_FILES</code> 這些技巧以因應 <a class="link" href="plist.html" title="章 7. Advanced pkg-plist practices">更複雜的狀況</a>。</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="quick-porting.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="quick-porting.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="porting-checksum.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">章 3. 打造 Port 快速上手篇 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 3.3. 產生 checksum 用途的 distinfo 檔</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>