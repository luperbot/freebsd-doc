<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>6.16. Using wxWidgets</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="special.html" title="章 6. Special considerations" /><link rel="prev" href="using-sdl.html" title="6.15. Using SDL" /><link rel="next" href="using-lua.html" title="6.17. Using Lua" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.16. Using <span class="application">wxWidgets</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-sdl.html">前一頁</a> </td><th width="60%" align="center">章 6. Special considerations</th><td width="20%" align="right"> <a accesskey="n" href="using-lua.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-wx"></a>6.16. Using <span class="application">wxWidgets</span></h2></div></div></div><p>This section describes the status of the
	<span class="application">wxWidgets</span> libraries in the ports tree and
	its integration with the ports system.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-introduction"></a>6.16.1. Introduction</h3></div></div></div><p>There are many versions of the
	  <span class="application">wxWidgets</span> libraries which conflict
	  between them (install files under the same name).  In the ports tree
	  this problem has been solved by installing each version under a
	  different name using version number suffixes.</p><p>The obvious disadvantage of this is that each application has to
	  be modified to find the expected version.  Fortunately, most of the
	  applications call the <code class="command">wx-config</code> script to
	  determine the necessary compiler and linker flags.  The script is
	  named differently for every available version.  Majority of
	  applications respect an environment variable, or accept a configure
	  argument, to specify which <code class="command">wx-config</code> script to
	  call.  Otherwise they have to be patched.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-version"></a>6.16.2. Version selection</h3></div></div></div><p>To make your port use a specific version of
	  <span class="application">wxWidgets</span> there are two variables
	  available for defining (if only one is defined the other will be set
	  to a default value):</p><div class="table"><a id="wx-ver-sel-table"></a><div class="table-title">表格 6.22. Variables to select <span class="application">wxWidgets</span>
	    versions</div><div class="table-contents"><table summary="Variables to select wxWidgets&#10;&#9;    versions" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Variable</th><th>Description</th><th>Default value</th></tr></thead><tbody><tr><td><code class="varname">USE_WX</code></td><td>List of versions the port can use</td><td>All available versions</td></tr><tr><td><code class="varname">USE_WX_NOT</code></td><td>List of versions the port can not use</td><td>None</td></tr></tbody></table></div></div><br class="table-break" /><p>The following is a list of available
	  <span class="application">wxWidgets</span> versions and the corresponding
	  ports in the tree:</p><div class="table"><a id="idp68899792"></a><div class="table-title">表格 6.23. Available <span class="application">wxWidgets</span>
	    versions</div><div class="table-contents"><table summary="Available wxWidgets&#10;&#9;    versions" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Version</th><th>Port</th></tr></thead><tbody><tr><td><code class="literal">2.4</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/wxgtk24/pkg-descr">x11-toolkits/wxgtk24</a></td></tr><tr><td><code class="literal">2.6</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/wxgtk26/pkg-descr">x11-toolkits/wxgtk26</a></td></tr><tr><td><code class="literal">2.8</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/wxgtk28/pkg-descr">x11-toolkits/wxgtk28</a></td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">The versions starting from <code class="literal">2.5</code> also come in
	    Unicode version and are installed by a slave port named like the
	    normal one plus a <code class="literal">-unicode</code> suffix, but this can
	    be handled with variables (see <a class="xref" href="using-wx.html#wx-unicode" title="6.16.4. Unicode">節 6.16.4, “Unicode”</a>).</p></div><p>The variables in <a class="xref" href="using-wx.html#wx-ver-sel-table" title="表格 6.22. Variables to select wxWidgets versions">表格 6.22, “Variables to select <span class="application">wxWidgets</span>
	    versions”</a> can be set
	  to one or more of the following combinations separated by
	  spaces:</p><div class="table"><a id="idp68918736"></a><div class="table-title">表格 6.24. <span class="application">wxWidgets</span> version
	    specifications</div><div class="table-contents"><table summary="wxWidgets version&#10;&#9;    specifications" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>Single version</td><td><code class="literal">2.4</code></td></tr><tr><td>Ascending range</td><td><code class="literal">2.4+</code></td></tr><tr><td>Descending range</td><td><code class="literal">2.6-</code></td></tr><tr><td>Full range (must be ascending)</td><td><code class="literal">2.4-2.6</code></td></tr></tbody></table></div></div><br class="table-break" /><p>There are also some variables to select the preferred versions
	  from the available ones.  They can be set to a list of versions, the
	  first ones will have higher priority.</p><div class="table"><a id="idp68928080"></a><div class="table-title">表格 6.25. Variables to select preferred
	    <span class="application">wxWidgets</span> versions</div><div class="table-contents"><table summary="Variables to select preferred&#10;&#9;    wxWidgets versions" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Designed for</th></tr></thead><tbody><tr><td><code class="varname">WANT_WX_VER</code></td><td>the port</td></tr><tr><td><code class="varname">WITH_WX_VER</code></td><td>the user</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-components"></a>6.16.3. Component selection</h3></div></div></div><p>There are other applications that, while not being
	  <span class="application">wxWidgets</span> libraries, are related to them.
	  These applications can be specified in the
	  <code class="varname">WX_COMPS</code> variable.  The following components are
	  available:</p><div class="table"><a id="idp68948816"></a><div class="table-title">表格 6.26. Available <span class="application">wxWidgets</span>
	    components</div><div class="table-contents"><table summary="Available wxWidgets&#10;&#9;    components" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th><th>Version restriction</th></tr></thead><tbody><tr><td><code class="literal">wx</code></td><td>main library</td><td>none</td></tr><tr><td><code class="literal">contrib</code></td><td>contributed libraries</td><td><code class="literal">none</code></td></tr><tr><td><code class="literal">python</code></td><td><span class="application">wxPython</span>
		  (<span class="application">Python</span> bindings)</td><td><code class="literal">2.4-2.6</code></td></tr><tr><td><code class="literal">mozilla</code></td><td><span class="application">wxMozilla</span></td><td><code class="literal">2.4</code></td></tr><tr><td><code class="literal">svg</code></td><td><span class="application">wxSVG</span></td><td><code class="literal">2.6</code></td></tr></tbody></table></div></div><br class="table-break" /><p>The dependency type can be selected for each component by adding
	  a suffix separated by a semicolon.  If not present then a default
	  type will be used (see <a class="xref" href="using-wx.html#wx-def-dep-types" title="表格 6.28. Default wxWidgets dependency types">表格 6.28, “Default <span class="application">wxWidgets</span> dependency
	    types”</a>).  The
	  following types are available:</p><div class="table"><a id="idp68963536"></a><div class="table-title">表格 6.27. Available <span class="application">wxWidgets</span> dependency
	    types</div><div class="table-contents"><table summary="Available wxWidgets dependency&#10;&#9;    types" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">build</code></td><td>Component is required for building, equivalent to
		  <code class="varname">BUILD_DEPENDS</code></td></tr><tr><td><code class="literal">run</code></td><td>Component is required for running, equivalent to
		  <code class="varname">RUN_DEPENDS</code></td></tr><tr><td><code class="literal">lib</code></td><td>Component is required for building and running,
		  equivalent to <code class="varname">LIB_DEPENDS</code></td></tr></tbody></table></div></div><br class="table-break" /><p>The default values for the components are detailed in the
	  following table:</p><div class="table"><a id="wx-def-dep-types"></a><div class="table-title">表格 6.28. Default <span class="application">wxWidgets</span> dependency
	    types</div><div class="table-contents"><table summary="Default wxWidgets dependency&#10;&#9;    types" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Component</th><th>Dependency type</th></tr></thead><tbody><tr><td><code class="literal">wx</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">contrib</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">python</code></td><td><code class="literal">run</code></td></tr><tr><td><code class="literal">mozilla</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">svg</code></td><td><code class="literal">lib</code></td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="wx-components-example"></a><div class="example-title">範例 6.5. Selecting <span class="application">wxWidgets</span>
	    components</div><div class="example-contents"><p>The following fragment corresponds to a port which uses
	    <span class="application">wxWidgets</span> version
	    <code class="literal">2.4</code> and its contributed libraries.</p><pre class="programlisting">USE_WX=       2.4
WX_COMPS=     wx contrib</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-unicode"></a>6.16.4. Unicode</h3></div></div></div><p>The <span class="application">wxWidgets</span> library supports
	  Unicode since version <code class="literal">2.5</code>.  In the ports tree
	  both versions are available and can be selected with the following
	  variables:</p><div class="table"><a id="wx-unicode-var-table"></a><div class="table-title">表格 6.29. Variables to select Unicode in
	    <span class="application">wxWidgets</span>
	    versions</div><div class="table-contents"><table summary="Variables to select Unicode in&#10;&#9;    wxWidgets&#10;&#9;    versions" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Variable</th><th>Description</th><th>Designed for</th></tr></thead><tbody><tr><td><code class="varname">WX_UNICODE</code></td><td>The port works <span class="emphasis"><em>only</em></span> with the
		  Unicode version</td><td>the port</td></tr><tr><td><code class="varname">WANT_UNICODE</code></td><td>The port works with both versions but prefers the
		  Unicode one</td><td>the port</td></tr><tr><td><code class="varname">WITH_UNICODE</code></td><td>The port will use the Unicode version</td><td>the user</td></tr><tr><td><code class="varname">WITHOUT_UNICODE</code></td><td>The port will use the normal version if
		  supported (when <code class="varname">WX_UNICODE</code> is not
		  defined)</td><td>the user</td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">Do not use <code class="varname">WX_UNICODE</code> for ports that can
	    use both Unicode and normal versions.  If you want the port to use
	    Unicode by default define <code class="varname">WANT_UNICODE</code>
	    instead.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-version-detection"></a>6.16.5. Detecting installed versions</h3></div></div></div><p>To detect an installed version you have to define
	  <code class="varname">WANT_WX</code>.  If you do not set it to a specific
	  version then the components will have a version suffix.  The
	  <code class="varname">HAVE_WX</code> variable will be filled after
	  detection.</p><div class="example"><a id="wx-ver-det-example"></a><div class="example-title">範例 6.6. Detecting installed <span class="application">wxWidgets</span>
	    versions and components</div><div class="example-contents"><p>The following fragment can be used in a port that uses
	    <span class="application">wxWidgets</span> if it is installed, or an
	    option is selected.</p><pre class="programlisting">WANT_WX=        yes

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITH_WX) || ${HAVE_WX:Mwx-2.4} != ""
USE_WX=         2.4
CONFIGURE_ARGS+=--enable-wx
.endif</pre><p>The following fragment can be used in a port that enables
	    <span class="application">wxPython</span> support if it is installed or
	    if an option is selected, in addition to
	    <span class="application">wxWidgets</span>, both version
	    <code class="literal">2.6</code>.</p><pre class="programlisting">USE_WX=         2.6
WX_COMPS=       wx
WANT_WX=        2.6

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITH_WXPYTHON) || ${HAVE_WX:Mpython} != ""
WX_COMPS+=      python
CONFIGURE_ARGS+=--enable-wxpython
.endif</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-defined-variables"></a>6.16.6. Defined variables</h3></div></div></div><p>The following variables are available in the port (after
	  defining one from <a class="xref" href="using-wx.html#wx-ver-sel-table" title="表格 6.22. Variables to select wxWidgets versions">表格 6.22, “Variables to select <span class="application">wxWidgets</span>
	    versions”</a>).</p><div class="table"><a id="idp69038800"></a><div class="table-title">表格 6.30. Variables defined for ports that use
	    <span class="application">wxWidgets</span></div><div class="table-contents"><table summary="Variables defined for ports that use&#10;&#9;    wxWidgets" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="varname">WX_CONFIG</code></td><td>The path to the <span class="application">wxWidgets</span>
		  <code class="command">wx-config</code> script (with different
		  name)</td></tr><tr><td><code class="varname">WXRC_CMD</code></td><td>The path to the <span class="application">wxWidgets</span>
		  <code class="command">wxrc</code> program (with different
		  name)</td></tr><tr><td><code class="varname">WX_VERSION</code></td><td>The <span class="application">wxWidgets</span> version that
		  is going to be used (e.g., <code class="literal">2.6</code>)</td></tr><tr><td><code class="varname">WX_UNICODE</code></td><td>If not defined but Unicode is going to be used then it
		  will be defined</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-premk"></a>6.16.7. Processing in <code class="filename">bsd.port.pre.mk</code></h3></div></div></div><p>If you need to use the variables for running commands right
	  after including <code class="filename">bsd.port.pre.mk</code> you need to
	  define <code class="varname">WX_PREMK</code>.</p><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">If you define <code class="varname">WX_PREMK</code>, then the version,
	    dependencies, components and defined variables will not change if
	    you modify the <span class="application">wxWidgets</span> port variables
	    <span class="emphasis"><em>after</em></span> including
	    <code class="filename">bsd.port.pre.mk</code>.</p></div><div class="example"><a id="wx-premk-example"></a><div class="example-title">範例 6.7. Using <span class="application">wxWidgets</span> variables in
	    commands</div><div class="example-contents"><p>The following fragment illustrates the use of
	    <code class="varname">WX_PREMK</code> by running the
	    <code class="command">wx-config</code> script to obtain the full version
	    string, assign it to a variable and pass it to the program.</p><pre class="programlisting">USE_WX=         2.4
WX_PREMK=       yes

.include &lt;bsd.port.pre.mk&gt;

.if exists(${WX_CONFIG})
VER_STR!=       ${WX_CONFIG} --release

PLIST_SUB+=     VERSION="${VER_STR}"
.endif</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">The <span class="application">wxWidgets</span> variables can be
	    safely used in commands when they are inside targets without the
	    need of <code class="varname">WX_PREMK</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-additional-config-args"></a>6.16.8. Additional <code class="command">configure</code> arguments</h3></div></div></div><p>Some GNU <code class="command">configure</code> scripts can not find
	  <span class="application">wxWidgets</span> with just the
	  <code class="literal">WX_CONFIG</code> environment variable set, requiring
	  additional arguments.  The <code class="varname">WX_CONF_ARGS</code> variable
	  can be used for provide them.</p><div class="table"><a id="idp69062352"></a><div class="table-title">表格 6.31. Legal values for <code class="varname">WX_CONF_ARGS</code></div><div class="table-contents"><table summary="Legal values for WX_CONF_ARGS" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Possible value</th><th>Resulting argument</th></tr></thead><tbody><tr><td><code class="literal">absolute</code></td><td><code class="literal">--with-wx-config=${WX_CONFIG}</code></td></tr><tr><td><code class="literal">relative</code></td><td><code class="literal">--with-wx=${LOCALBASE}
		    --with-wx-config=${WX_CONFIG:T}</code></td></tr></tbody></table></div></div><br class="table-break" /></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-sdl.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="using-lua.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">6.15. Using SDL </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 6.17. Using <span class="application">Lua</span></td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>