<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>6.7. Using X11</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="special.html" title="章 6. Special considerations" /><link rel="prev" href="using-perl.html" title="6.6. Using perl" /><link rel="next" href="using-gnome.html" title="6.8. Using GNOME" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.7. Using X11</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-perl.html">前一頁</a> </td><th width="60%" align="center">章 6. Special considerations</th><td width="20%" align="right"> <a accesskey="n" href="using-gnome.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-x11"></a>6.7. Using X11</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-variables"></a>6.7.1. X.Org components</h3></div></div></div><p>The X11 implementation available in The Ports Collection is X.Org.
	  If your application depends on X components, set
	  <code class="varname">USE_XORG</code> to the list of required components.
	  Available components, at the time of writing, are:</p><p><code class="literal">bigreqsproto compositeproto damageproto dmx dmxproto
	  evieproto fixesproto fontcacheproto fontenc fontsproto fontutil
	  glproto ice inputproto kbproto libfs oldx printproto randrproto
	  recordproto renderproto resourceproto scrnsaverproto sm trapproto
	  videoproto x11 xau xaw xaw6 xaw7 xaw8 xbitmaps xcmiscproto xcomposite
	  xcursor xdamage xdmcp xevie xext xextproto xf86bigfontproto
	  xf86dgaproto xf86driproto xf86miscproto xf86rushproto
	  xf86vidmodeproto xfixes xfont xfontcache xft xi xinerama
	  xineramaproto xkbfile xkbui xmu xmuu xorg-server xp xpm xprintapputil
	  xprintutil xpr oto xproxymngproto xrandr xrender xres xscrnsaver xt
	  xtrans xtrap xtst xv xvmc xxf86dga xxf86misc xxf86vm</code>.</p><p>Always up-to-date list can be found in
	  <code class="filename">/usr/ports/Mk/bsd.xorg.mk</code>.</p><p>The Mesa Project is an effort to provide free OpenGL
	  implementation.  You can specify a dependency on various components
	  of this project with <code class="varname">USE_GL</code> variable.
	  Valid options are: <code class="literal">glut, glu, glw, gl</code> and
	  <code class="literal">linux</code>.  For backwards compatibility, the value
	  of <code class="literal">yes</code> maps to <code class="literal">glu</code>.</p><div class="example"><a id="use-xorg-example"></a><div class="example-title">範例 6.1. USE_XORG example</div><div class="example-contents"><pre class="programlisting">USE_XORG=   xrender xft xkbfile xt xaw
USE_GL=     glu</pre></div></div><br class="example-break" /><p>Many ports define <code class="varname">USE_XLIB</code>, which makes
	  the port depend on all the 50 or so libraries.  This variable
	  exists for backwards compatibility, as it predates modular X.Org,
	  and should not be used on new ports.</p><div class="table"><a id="idp68312272"></a><div class="table-title">表格 6.5. Variables for ports that use X</div><div class="table-contents"><table summary="Variables for ports that use X" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">USE_XLIB</code></td><td>The port uses the X libraries.  Deprecated - use a list of
		X.Org components in <code class="varname">USE_XORG</code> variable
		instead.</td></tr><tr><td><code class="varname">USE_IMAKE</code></td><td>會用到 <code class="command">imake</code> 的 port。</td></tr><tr><td><code class="varname">USE_X_PREFIX</code></td><td>Deprecated.  Today it is equivalent to
		<code class="varname">USE_XLIB</code> and can be replaced by it
		freely.</td></tr><tr><td><code class="varname">XMKMF</code></td><td>Set to the path of <code class="command">xmkmf</code> if not in the
		<code class="envar">PATH</code>.  Defaults to <code class="literal">xmkmf
		  -a</code>.</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="idp68321616"></a><div class="table-title">表格 6.6. Variables for depending on individual parts of X11</div><div class="table-contents"><table summary="Variables for depending on individual parts of X11" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">X_IMAKE_PORT</code></td><td>Port providing <code class="command">imake</code> and several
		other utilities used to build X11.</td></tr><tr><td><code class="varname">X_LIBRARIES_PORT</code></td><td>Port providing X11 libraries.</td></tr><tr><td><code class="varname">X_CLIENTS_PORT</code></td><td>Port providing X clients.</td></tr><tr><td><code class="varname">X_SERVER_PORT</code></td><td>Port providing X server.</td></tr><tr><td><code class="varname">X_FONTSERVER_PORT</code></td><td>Port providing font server.</td></tr><tr><td><code class="varname">X_PRINTSERVER_PORT</code></td><td>Port providing print server.</td></tr><tr><td><code class="varname">X_VFBSERVER_PORT</code></td><td>Port providing virtual framebuffer server.</td></tr><tr><td><code class="varname">X_NESTSERVER_PORT</code></td><td>Port providing a nested X server.</td></tr><tr><td><code class="varname">X_FONTS_ENCODINGS_PORT</code></td><td>Port providing encodings for fonts.</td></tr><tr><td><code class="varname">X_FONTS_MISC_PORT</code></td><td>Port providing miscellaneous bitmap fonts.</td></tr><tr><td><code class="varname">X_FONTS_100DPI_PORT</code></td><td>Port providing 100dpi bitmap fonts.</td></tr><tr><td><code class="varname">X_FONTS_75DPI_PORT</code></td><td>Port providing 75dpi bitmap fonts.</td></tr><tr><td><code class="varname">X_FONTS_CYRILLIC_PORT</code></td><td>Port providing cyrillic bitmap fonts.</td></tr><tr><td><code class="varname">X_FONTS_TTF_PORT</code></td><td>Port providing <span class="trademark">TrueType</span>® fonts.</td></tr><tr><td><code class="varname">X_FONTS_TYPE1_PORT</code></td><td>Port providing Type1 fonts.</td></tr><tr><td><code class="varname">X_MANUALS_PORT</code></td><td>Port providing developer oriented manual pages</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="using-x11-vars"></a><div class="example-title">範例 6.2. Using some X11 related variables in port</div><div class="example-contents"><pre class="programlisting"># Use X11 libraries and depend on
# font server as well as cyrillic fonts.
RUN_DEPENDS=   ${LOCALBASE}/bin/xfs:${X_FONTSERVER_PORT} \
               ${LOCALBASE}/lib/X11/fonts/cyrillic/crox1c.pcf.gz:${X_FONTS_CYRILLIC_PORT}

USE_XORG=      yes</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-motif"></a>6.7.2. Ports that require Motif</h3></div></div></div><p>If your port requires a Motif library, define
	  <code class="varname">USE_MOTIF</code> in the <code class="filename">Makefile</code>.
	  Default Motif implementation is
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/open-motif/pkg-descr">x11-toolkits/open-motif</a>.
	  Users can choose
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/lesstif/pkg-descr">x11-toolkits/lesstif</a> instead
	  by setting <code class="varname">WANT_LESSTIF</code> variable.</p><p>The <code class="varname">MOTIFLIB</code> variable will be set by
	  <code class="filename">bsd.port.mk</code> to reference the appropriate
	  Motif library.  Please patch the source of your port to
	  use <code class="literal">${MOTIFLIB}</code> wherever the Motif library is referenced in the original
	  <code class="filename">Makefile</code> or
	  <code class="filename">Imakefile</code>.</p><p>There are two common cases:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>If the port refers to the Motif library as
	      <code class="literal">-lXm</code> in its <code class="filename">Makefile</code> or
	      <code class="filename">Imakefile</code>, simply substitute
	      <code class="literal">${MOTIFLIB}</code> for it.</p></li><li class="listitem"><p>If the port uses <code class="literal">XmClientLibs</code> in its
	      <code class="filename">Imakefile</code>, change it to
	      <code class="literal">${MOTIFLIB} ${XTOOLLIB}
		${XLIB}</code>.</p></li></ul></div><p>Note that <code class="varname">MOTIFLIB</code> (usually) expands to
	  <code class="literal">-L/usr/X11R6/lib -lXm</code> or
	  <code class="literal">/usr/X11R6/lib/libXm.a</code>, so there is no need to
	  add <code class="literal">-L</code> or <code class="literal">-l</code> in front.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68367824"></a>6.7.3. X11 fonts</h3></div></div></div><p>If your port installs fonts for the X Window System, put them in
	  <code class="filename">LOCALBASE/lib/X11/fonts/local</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68369360"></a>6.7.4. Getting fake <code class="envar">DISPLAY</code> using Xvfb</h3></div></div></div><p>Some applications require a working X11 display for compilation to
	  succeed.  This pose a problem for machines which operates headless.
	  When the following variable is used, the build infrastructure will
	  start the virtual framebuffer
	  X server.  The working <code class="envar">DISPLAY</code> is then passed
	  to the build.</p><pre class="programlisting">USE_DISPLAY=  yes</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="desktop-entries"></a>6.7.5. Desktop entries</h3></div></div></div><p>可藉由設定
	  <code class="varname">DESKTOP_ENTRIES</code> 變數，以輕鬆設定 port 的 X 選單項目
	  (Desktop Entries，請參閱 <a class="link" href="http://standards.freedesktop.org/desktop-entry-spec/latest/" target="_top">
	  Freedesktop standard</a>)。  這些項目會在相應的桌面環境如 GNOME
	  或 KDE 的應用程式選單中出現。  <code class="filename">.desktop</code> 檔案
	  將會被建立、安裝以及自動加入 <code class="filename">pkg-plist</code>
	  中。語法為：</p><pre class="programlisting">DESKTOP_ENTRIES=  "NAME" "COMMENT" "ICON" "COMMAND" "CATEGORY" StartupNotify</pre><p>可供使用的分類可參考 <a class="link" href="http://standards.freedesktop.org/menu-spec/latest/apa.html" target="_top">
	  Freedesktop 網站</a>。  而 <code class="varname">StartupNotify</code>
	  變數會決定程式，是否支援 startup noficication 的環境。
	  </p><p>範例：</p><pre class="programlisting">DESKTOP_ENTRIES=  "ToME" "Roguelike game based on JRR Tolkien's work" \
                  "${DATADIR}/xtra/graf/tome-128.png" \
                  "tome -v -g" "Application;Game;RolePlaying" \
                  false</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-perl.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="using-gnome.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">6.6. Using <code class="literal">perl</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 6.8. Using GNOME</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>
