<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>5.8. MASTERDIR</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="makefile.html" title="章 5. 設定 Makefile" /><link rel="prev" href="makefile-depend.html" title="5.7. Dependencies" /><link rel="next" href="makefile-manpages.html" title="5.9. Manpages" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5.8. <code class="varname">MASTERDIR</code></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="makefile-depend.html">前一頁</a> </td><th width="60%" align="center">章 5. 設定 Makefile</th><td width="20%" align="right"> <a accesskey="n" href="makefile-manpages.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-masterdir"></a>5.8. <code class="varname">MASTERDIR</code></h2></div></div></div><p>If your port needs to build slightly different versions of
	packages by having a variable (for instance, resolution, or paper
	size) take different values, create one subdirectory per package to
	make it easier for users to see what to do, but try to share as many
	files as possible between ports.  Typically you only need a very short
	<code class="filename">Makefile</code> in all but one of the directories if you
	use variables cleverly.  In the sole <code class="filename">Makefile</code>,
	you can use <code class="varname">MASTERDIR</code> to specify the directory
	where the rest of the files are.  Also, use a variable as part of
	<a class="link" href="makefile-naming.html#porting-pkgname" title="5.2.5. Package Naming Conventions"><code class="varname">PKGNAMESUFFIX</code></a> so
	the packages will have different names.</p><p>This will be best demonstrated by an example.  This is part of
	<code class="filename">japanese/xdvi300/Makefile</code>;</p><pre class="programlisting">PORTNAME=       xdvi
PORTVERSION=    17
PKGNAMEPREFIX=  ja-
PKGNAMESUFFIX=  ${RESOLUTION}
 :
# default
RESOLUTION?=   300
.if ${RESOLUTION} != 118 &amp;&amp; ${RESOLUTION} != 240 &amp;&amp; \
       ${RESOLUTION} != 300 &amp;&amp; ${RESOLUTION} != 400
       @${ECHO_MSG} "Error: invalid value for RESOLUTION: \"${RESOLUTION}\""
       @${ECHO_MSG} "Possible values are: 118, 240, 300 (default) and 400."
       @${FALSE}
.endif</pre><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/japanese/xdvi300/pkg-descr">japanese/xdvi300</a> also has all the regular
	patches, package files, etc.  If you type <code class="command">make</code>
	there, it will take the default value for the resolution (300) and
	build the port normally.</p><p>As for other resolutions, this is the <span class="emphasis"><em>entire</em></span>
	<code class="filename">xdvi118/Makefile</code>:</p><pre class="programlisting">RESOLUTION=     118
MASTERDIR=      ${.CURDIR}/../xdvi300

.include "${MASTERDIR}/Makefile"</pre><p>(<code class="filename">xdvi240/Makefile</code> and
	<code class="filename">xdvi400/Makefile</code> are similar).  The
	<code class="varname">MASTERDIR</code> definition tells
	<code class="filename">bsd.port.mk</code> that the regular set of
	subdirectories like <code class="varname">FILESDIR</code> and
	<code class="varname">SCRIPTDIR</code> are to be found under
	<code class="filename">xdvi300</code>.  The <code class="literal">RESOLUTION=118</code>
	line will override the <code class="literal">RESOLUTION=300</code> line in
	<code class="filename">xdvi300/Makefile</code> and the port will be built with
	resolution set to 118.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="makefile-depend.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="makefile.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="makefile-manpages.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">5.7. Dependencies </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 5.9. Manpages</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>