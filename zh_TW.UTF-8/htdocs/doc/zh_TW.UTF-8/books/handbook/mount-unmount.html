<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>4.7. 掛載與卸載檔案系統</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD 使用手冊" /><link rel="up" href="basics.html" title="章 4. UNIX 基礎概念" /><link rel="prev" href="disk-organization.html" title="4.6. 磁碟組織" /><link rel="next" href="basics-processes.html" title="4.8. 程序" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.7. 掛載與卸載檔案系統</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="disk-organization.html">前一頁</a> </td><th width="60%" align="center">章 4. UNIX 基礎概念</th><td width="20%" align="right"> <a accesskey="n" href="basics-processes.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mount-unmount"></a>4.7. 掛載與卸載檔案系統</h2></div></div></div><p>檔案系統就像一顆樹。<code class="filename">/</code>
      就像是樹根，而 <code class="filename">/dev</code>，<code class="filename">/usr</code>
      以及其他在根目錄下的目錄就像是樹枝，而這些樹枝上面又還有分支，像是
      <code class="filename">/usr/local</code> 等。</p><a id="idp70402640" class="indexterm"></a><p>因為某些原因，我們會將一些目錄分別放在不同的檔案系統上。
      如 <code class="filename">/var</code> 包含了可能會滿出來的
      <code class="filename">log/</code>，<code class="filename">spool/</code>
      等目錄以及各式各樣的暫存檔。
      把根檔案系統塞到滿出來顯然不是個好主意，所以我們往往會比較傾向把
      <code class="filename">/var</code> 從 <code class="filename">/</code> 中拉出來。</p><p>另一個常見到把某些目錄放在不同檔案系統上的理由是：
      這些檔案在不同的實體或虛擬磁碟機上。
      像是<a class="link" href="network-nfs.html" title="29.3. Network File System (NFS)">網路檔案系統</a>
      (Network File System) 或是光碟機。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-fstab"></a>4.7.1.  <code class="filename">fstab</code> 檔</h3></div></div></div><a id="idp70411728" class="indexterm"></a><p>在 <code class="filename">/etc/fstab</code>
	裡面有設定的檔案系統會在<a class="link" href="boot.html" title="章 13. FreeBSD 開機流程篇">開機</a>
	的過程中自動地被掛載
	(除非該檔案系統有被加上 <code class="option">noauto</code> 參數)。</p><p><code class="filename">/etc/fstab</code> 檔案內容的格式如下：</p><pre class="programlisting"><em class="replaceable"><code>device</code></em>       <em class="replaceable"><code>/mount-point</code></em> <em class="replaceable"><code>fstype</code></em>     <em class="replaceable"><code>options</code></em>      <em class="replaceable"><code>dumpfreq</code></em>     <em class="replaceable"><code>passno</code></em></pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">device</code></span></dt><dd><p>裝置名稱 (該裝置必須真的存在)。 詳情請參閱
	      <a class="xref" href="disks-naming.html" title="18.2. 裝置名稱">節 18.2, “裝置名稱”</a>.</p></dd><dt><span class="term"><code class="literal">mount-point</code></span></dt><dd><p>檔案系統要掛載到的目錄 (該目錄必須真的存在)。</p></dd><dt><span class="term"><code class="literal">fstype</code></span></dt><dd><p>檔案系統類型，這是要傳給 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> 的參數。
	      FreeBSD 預設的檔案系統是 <code class="literal">ufs</code>。</p></dd><dt><span class="term"><code class="literal">options</code></span></dt><dd><p>可讀可寫的檔案系統用
	      <code class="option">rw</code>，而唯讀的檔案系統則是用
	      <code class="option">ro</code>，後面視需要還可以加其他選項。
	      常見的選項如 <code class="option">noauto</code>
	      是用在不要於開機過程中自動的掛載的檔案系統。
	      其他選項可參閱 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> 說明。</p></dd><dt><span class="term"><code class="literal">dumpfreq</code></span></dt><dd><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> 由此項目決定那些檔案系統需要傾印。
	      如果這格空白則以零為預設值。</p></dd><dt><span class="term"><code class="literal">passno</code></span></dt><dd><p>這個項目決定檔案系統檢查的順序。
	      對於要跳過檢查的檔案系統，它們的 <code class="literal">passno</code>
	      值要設為零。 根檔案系統的 <code class="literal">passno</code> 值應設為一
	      (因為需要比所有其他的還要先檢查)，而其他的檔案系統的
	      <code class="literal">passno</code> 值應該要設得比一大。
	      若有多個檔案系統具有相同的 <code class="literal">passno</code> 值，則
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> 會試著平行地(如果可能的話)檢查這些檔案系統。</p></dd></dl></div><p>更多關於 <code class="filename">/etc/fstab</code>
	檔案格式及選項的資訊請參閱 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> 說明文件。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-mount"></a>4.7.2. <code class="command">mount</code> 指令</h3></div></div></div><a id="idp70449616" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> 指令是拿來掛載檔案系統用的。</p><p>基本的操作指令格式如下:</p><div class="informalexample"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount device mountpoint</code></strong></pre></div><p>在 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
	裡面有提到一大堆的選項，不過最常用的就是這些：</p><div class="variablelist"><div class="variablelist-title">掛載選項</div><dl class="variablelist"><dt><span class="term"><code class="option">-a</code></span></dt><dd><p>把 <code class="filename">/etc/fstab</code>
	      裡面所有還沒有被掛載、沒有被標記成 <span class="quote">“<span class="quote">noauto</span>”</span>
	      而且沒有用 <code class="option">-t</code> 排除的檔案系統掛載起來。</p></dd><dt><span class="term"><code class="option">-d</code></span></dt><dd><p>執行所有的動作，但是不真的去呼叫掛載的 system call。
	      這個選項和 <code class="option">-v</code> 搭配拿來推測 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
	      將要做什麼動作時很好用。</p></dd><dt><span class="term"><code class="option">-f</code></span></dt><dd><p>強迫掛載不乾淨的檔案系統 (危險)，或是用來強制取消寫入權限
	      (把檔案系統的掛載狀態從可存取變成唯讀)。</p></dd><dt><span class="term"><code class="option">-r</code></span></dt><dd><p>用唯讀的方式掛載檔案系統。 這個選項和在 <code class="option">-o</code>
	      選項中指定 <code class="option">ro</code> (在 FreeBSD 5.2之前的版本是用
	      <code class="option">rdonly</code>) 參數是一樣的。</p></dd><dt><span class="term"><code class="option">-t</code>
	    <em class="replaceable"><code>fstype</code></em></span></dt><dd><p>用指定的檔案系統型態 (fstype)
	      來掛載指定的檔案系統，或是在有 <code class="option">-a</code>
	      選項時只掛載指定型態的檔案系統。</p><p>預設的檔案系統是 <span class="quote">“<span class="quote">ufs</span>”</span>。</p></dd><dt><span class="term"><code class="option">-u</code></span></dt><dd><p>更新檔案系統的掛載選項。</p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>顯示較詳細資訊。</p></dd><dt><span class="term"><code class="option">-w</code></span></dt><dd><p>以可存取的模式掛載檔案系統。</p></dd></dl></div><p><code class="option">-o</code> 選項後面會接著以逗號分隔的參數，例如：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">noexec</span></dt><dd><p>不允許在這個檔案系統上執行二進位程式碼，
	      這也是一個蠻有用的安全選項。</p></dd><dt><span class="term">nosuid</span></dt><dd><p>不解析檔案系統上的 setuid 或 setgid 旗標，
	      這也是一個蠻有用的安全選項。</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-umount"></a>4.7.3. <code class="command">umount</code> 指令</h3></div></div></div><a id="idp70487888" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a> 指令的參數可以是掛載點
	  (mountpoint)，裝置名稱，以及 <code class="option">-a</code> 或是
	  <code class="option">-A</code> 等選項。</p><p>加上 <code class="option">-f</code> 可以強制卸載，加上 <code class="option">-v</code>
	  則是會顯示詳細資訊。  要注意的是一般來說用 <code class="option">-f</code>
	  並不是個好主意，強制卸載檔案系統有可能會造成電腦當機，
	  或者損壞檔案系統內的資料。</p><p><code class="option">-a</code> 和 <code class="option">-A</code>
	  是用來卸載所有已掛載的檔案系統，另外還可以用 <code class="option">-t</code>
	  來指定要卸載的是哪些種類的檔案系統。  要注意的是 <code class="option">-A</code>
	  並不會試圖卸載根檔案系統。</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="disk-organization.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="basics-processes.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">4.6. 磁碟組織 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 4.8. 程序</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>