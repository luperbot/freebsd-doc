<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>16.9. MAC Policies with Labeling Features</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD 使用手冊" /><link rel="up" href="mac.html" title="章 16. Mandatory Access Control" /><link rel="prev" href="mac-portacl.html" title="16.8. The MAC portacl Module" /><link rel="next" href="mac-partition.html" title="16.10. The MAC partition Module" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">16.9. MAC Policies with Labeling Features</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mac-portacl.html">前一頁</a> </td><th width="60%" align="center">章 16. Mandatory Access Control</th><td width="20%" align="right"> <a accesskey="n" href="mac-partition.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-labelingpolicies"></a>16.9. MAC Policies with Labeling Features</h2></div></div></div><p>The next few sections will discuss <acronym class="acronym">MAC</acronym>
      policies which use labels.</p><p>From here on this chapter will focus on the features
      of <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_biba&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_biba</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_lomac&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_lomac</span>(4)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_partition&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_partition</span>(4)</span></a>, and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_mls&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_mls</span>(4)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">This is an example configuration only and should not be
        considered for a production implementation.  The goal is
	to document and show the syntax as well as examples for
	implementation and testing.</p></div><p>For these policies to work correctly several
      preparations must be made.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mac-prep"></a>16.9.1. Preparation for Labeling Policies</h3></div></div></div><p>The following changes are required in the
	<code class="filename">login.conf</code> file:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>An <code class="literal">insecure</code> class, or another
	    class of similar type, must be
	    added.  The login class of <code class="literal">insecure</code>
	    is not required and just used as an example here; different
	    configurations may use another class name.</p></li><li class="listitem"><p>The <code class="literal">insecure</code> class should have
	    the following settings and definitions.  Several of these
	    can be altered but the line which defines the default
	    label is a requirement and must remain.</p><pre class="programlisting">insecure:\
	:copyright=/etc/COPYRIGHT:\
	:welcome=/etc/motd:\
	:setenv=MAIL=/var/mail/$,BLOCKSIZE=K:\
	:path=~/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin:\
	:manpath=/usr/share/man /usr/local/man:\
	:nologin=/usr/sbin/nologin:\
	:cputime=1h30m:\
	:datasize=8M:\
	:vmemoryuse=100M:\
	:stacksize=2M:\
	:memorylocked=4M:\
	:memoryuse=8M:\
	:filesize=8M:\
	:coredumpsize=8M:\
	:openfiles=24:\
	:maxproc=32:\
	:priority=0:\
	:requirehome:\
	:passwordtime=91d:\
	:umask=022:\
	:ignoretime@:\
	:label=partition/13,mls/5,biba/low:</pre><p>The <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cap_mkdb&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cap_mkdb</span>(1)</span></a> command needs to be ran on
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> before any of the
	    users can be switched over to the new class.</p><p>The <code class="systemitem">root</code> username should also be placed
	    into a login class; otherwise, almost every command
	    executed by <code class="systemitem">root</code> will require the
	    use of <code class="command">setpmac</code>.</p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">Rebuilding the <code class="filename">login.conf</code>
	      database may cause some errors later with the daemon
	      class.  Simply uncommenting the daemon account and
	      rebuilding the database should alleviate these
	      issues.</p></div></li><li class="listitem"><p>Ensure that all partitions on which
	    <acronym class="acronym">MAC</acronym> labeling will be implemented support
	    the <code class="option">multilabel</code>.  We must do this because
	    many of the examples here contain different labels for
	    testing purposes.  Review the output from the
	    <code class="command">mount</code> command as a precautionary
            measure.</p></li><li class="listitem"><p>Switch any users who will have the higher security
	    mechanisms enforced over to the new user class.  A quick
	    run of <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> or <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a> should do the
	    trick.</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mac-portacl.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="mac.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="mac-partition.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">16.8. The MAC portacl Module </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 16.10. The MAC partition Module</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>