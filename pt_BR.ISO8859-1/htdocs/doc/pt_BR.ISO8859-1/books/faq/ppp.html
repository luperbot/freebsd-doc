<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Capítulo 14. PPP</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Perguntas mais freqüentes sobre FreeBSD 2.X, 3.X e 4.X" /><link rel="up" href="index.html" title="Perguntas mais freqüentes sobre FreeBSD 2.X, 3.X e 4.X" /><link rel="prev" href="security.html" title="Capítulo 13. Segurança" /><link rel="next" href="serial.html" title="Capítulo 15. Comunicações Seriais" /><link rel="copyright" href="legalnotice.html" title="Nota Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Capítulo 14. PPP</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="security.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="serial.html">Próxima</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ppp"></a>Capítulo 14. PPP</h1></div></div></div><div class="qandaset"><a id="idp69975888"></a><dl><dt>14.1. <a href="ppp.html#idp69976144">Não consigo fazer meu ppp(8) funcionar.  O
	    que estou fazendo de errado?</a></dt><dt>14.2. <a href="ppp.html#idp69994960">Por que o ppp(8) fica pendurado quando eu o
	    inicializo?</a></dt><dt>14.3. <a href="ppp.html#idp70001360">Porque o ppp(8) não disca em
	    modo-auto
	  </a></dt><dt>14.4. <a href="ppp.html#idp70020560">O que No route to host
	    significa?</a></dt><dt>14.5. <a href="ppp.html#idp70038608">Porque minha conexão cai depois de (em média)
	    3 minutos?</a></dt><dt>14.6. <a href="ppp.html#idp70045264">Por que minha conexão cai quando está
	    sobrecarregada?</a></dt><dt>14.7. <a href="ppp.html#idp70047952">Por que minha conexão cai após um
	    período aleatório de tempo?</a></dt><dt>14.8. <a href="ppp.html#idp70051152">Por que minha conexão fica pendurada depois de
	    um período aleatório de tempo?</a></dt><dt>14.9. <a href="ppp.html#idp70066256">A extremidade remota não está
	    respondendo.  O que eu posso fazer?</a></dt><dt>14.10. <a href="ppp.html#idp70072400">O ppp(8) está travado.  O que eu posso
	    fazer?</a></dt><dt>14.11. <a href="ppp.html#idp70084048">Por que não acontece nada depois da mensagem
	    &#8220;Login OK!&#8221;?</a></dt><dt>14.12. <a href="ppp.html#idp70093776">Eu vejo os mesmos erros sobre magic is the
	      same.  O que significa?</a></dt><dt>14.13. <a href="ppp.html#idp70129232">As negociações LCP continuam até
	    que a conexão seja fechada.  O que está
	    errado?</a></dt><dt>14.14. <a href="ppp.html#idp70154832">Por que o ppp(8) trava logo apó a
	    conexão?</a></dt><dt>14.15. <a href="ppp.html#idp70159568">Por que o ppp(8) trava quando executo
	    comandos shell pelo ppp(8)?</a></dt><dt>14.16. <a href="ppp.html#idp70167376">Como uma conexão por ppp(8) usando um nunca
	    termina?</a></dt><dt>14.17. <a href="ppp.html#idp70175952">Por que o ppp(8) disca sem nenhuma razão no
	    modo -auto?</a></dt><dt>14.18. <a href="ppp.html#idp70190800">O que estes erros de CCP significam?</a></dt><dt>14.19. <a href="ppp.html#idp70207184">Por que o ppp(8) trava durante a
	    transferência de arquivo com erros de
	    IO(Input/Output)?</a></dt><dt>14.20. <a href="ppp.html#idp70211408">Por que o ppp(8) não loga minha velocidade
	    de conexão?</a></dt><dt>14.21. <a href="ppp.html#idp70224208">Por que o ppp(8) ignora o caracter
	    \ no meu script de
	    conversação?</a></dt><dt>14.22. <a href="ppp.html#idp70233808">Por que o ppp(8) dá um seg-fault, mas eu
	    não vejo nenhum arquivo
	    ppp.core?</a></dt><dt>14.23. <a href="ppp.html#idp70264016">Por que o processo que força a discagem em auto
	    mode nunca conecta?</a></dt><dt>14.24. <a href="ppp.html#idp70323536">Por que a maioria dos jogos não funciona com a
	    opção -nat?</a></dt><dt>14.25. <a href="ppp.html#idp70342224">Alguém fez uma lista de número de portas
	    úteis?</a></dt><dt>14.26. <a href="ppp.html#idp70357328">O que são erros FCS?</a></dt><dt>14.27. <a href="ppp.html#PPPoEwithNAT">Por que a conexão do MacOS e Windows98 travam
	    ao rodar o PPPoE no gateway?</a></dt><dt>14.28. <a href="ppp.html#idp70393424">Nada disso me ajudou - Eu estou desesperado!  O que eu
	    posso fazer?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp69976144"></a><a id="userppp"></a><p><strong>14.1.</strong></p></td><td align="left" valign="top"><p>Não consigo fazer meu <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> funcionar.  O
	    que estou fazendo de errado?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Deve-se primeiro ler a man page do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> e <a class="link" href="../handbook/ppp-and-slip.html#USERPPP" target="_top">
	      seção PPP do Manual do FreeBSD</a>.
	    Habilite os logs com o comando</p><pre class="programlisting">set log Phase Chat Connect Carrier lcp ipcp ccp command</pre><p>Este comando pode ser digitado no prompt do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    ou pode ser colocado no
	    <code class="filename">/etc/ppp/ppp.conf</code> (A
	    seção <code class="literal">default</code> no
	    início do arquivo é o melhor lugar para
	    colocar isso).  Tenha certeza de que
	    seu<code class="filename">/etc/syslog.conf</code> (veja
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">syslog.conf</span>(5)</span></a>) tenha as linhas</p><pre class="programlisting">!ppp *.*/var/log/ppp.log</pre><p>e que o arquivo <code class="filename">/var/log/ppp.log</code>
	    exista.  Agora pode-se ver o que está acontecendo
	    analisando seu arquivo de log.  Não se preocupe se
	    isso não faz sentido mas se precisar de ajuda, esta
	    informação fará sentido a
	    eles.</p><p>Se a sua versão do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> não
	    suporta o comando set log ,deve-se fazer o download da
	    <a class="link" href="http://people.FreeBSD.org/~brian/" target="_top">
	      versão mais recente</a>.  O FreeBSD 2.1.5 (e
	    posteriores) suporta a compilação do
	    código mais recente.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp69994960"></a><a id="ppp-hangs"></a><p><strong>14.2.</strong></p></td><td align="left" valign="top"><p>Por que o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> fica pendurado quando eu o
	    inicializo?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Isso normalmente acontece porque seu hostname
	    não esta sendo resolvido.  A melhor maneira de
	    corrigir isso é certificar-se de que o
	    <code class="filename">/etc/hosts</code> está sendo
	    consultado pelo resolvedor; editando primeiro o
	    <code class="filename">/etc/host.conf</code> e colocando
	    <code class="literal">hosts</code> na primeira linha.  Para isso,
	    simplesmente adicione no <code class="filename">/etc/hosts/</code>
	    uma entrada para sua máquina local.  Se não
	    tem nenhuma rede local, mude a linha do
	    <code class="systemitem">localhost</code>:</p><pre class="programlisting">127.0.0.1        foo.example.com foo localhost</pre><p>Senão, adicione uma outra entrada para seu
	    host.  Consulte as man pages relevantes para maiores
	    detalhes.</p><p>Ao terminar, deve ser possível dar um
	    <code class="command">ping -c1 `nomedohost`</code> com sucesso.
		</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70001360"></a><a id="ppp-nodial-auto"></a><p><strong>14.3.</strong></p></td><td align="left" valign="top"><p>Porque o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> não disca em
	    modo<code class="literal">-auto</code>
	  </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Primeiro verifique se há uma rota
	    padrão.  Ao executar um <code class="command">netstat
	      -rn</code> (veja <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netstat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">netstat</span>(1)</span></a>), devem aparecer duas
	    entradas como essas:</p><pre class="programlisting">Destination        Gateway            Flags     Refs     Use     Netif Expire
default            10.0.0.2           UGSc        0        0      tun0
10.0.0.2           10.0.0.1           UH          0        0      tun0</pre><p>Assume-se o uso do endereço recomendado pelo
	    Manual do FreeBSD, páginas de manual ou no
	    arquivo ppp.conf.sample.  Se a rota padrão
	    não foi definida, é possível que a
	    versão do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> seja antiga, uma vez que
	    não entendem a palavra <code class="literal">HISADDR</code>
	    no arquivo ppp.conf.  Se a versão do seu FreeBSD
	    for anterior a  2.2.5, mude a linha</p><pre class="programlisting">add 0 0 HISADDR</pre><p>para</p><pre class="programlisting">add 0 0 10.0.0.2</pre><p>Outra razão para a rota padrão estar
	    ausente, pode ser porquê você equivocadamente
	    definiu uma rota default em seu arquivo
	    <code class="filename">/etc/rc.conf</code> (veja <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>)
	    (este arquivo era chamado
	    <code class="filename">/etc/sysconfig</code> nas versões
	    anteriores a 2.2.2) e omitiu a linha</p><pre class="programlisting">delete ALL</pre><p>no <code class="filename">ppp.conf</code>.  Se este for o
	    problema, volte para <a class="link" href="../handbook/ppp-and-slip.html#USERPPP-FINAL" target="_top">
	      seção de configurações
	      Finais do Manual do FreeBSD.</a></p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70020560"></a><a id="no-route-to-host"></a><p><strong>14.4.</strong></p></td><td align="left" valign="top"><p>O que <span class="errorname">No route to host</span>
	    significa?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Este erro é causado pela falta das linhas</p><pre class="programlisting">MYADDR:
  delete ALL
  add 0 0 HISADDR</pre><p>no seu arquivo
	    <code class="filename">/etc/ppp/ppp.linkup</code>.  Isso somente
	    é necessário se você tem um IP
	    dinâmico ou não sabe o endereço do seu
	    gateway.  Se você esta usando o modo interativo,
	    pode-se digitar o seguinte, depois de ter entrado no
	    <code class="literal">modo packet</code> (O modo packet é
	    indicado pelo <acronym class="acronym">PPP</acronym> maiísculo no
	    prompt):
	  </p><pre class="programlisting">delete ALL
add 0 0 HISADDR</pre><p>Consulte a <a class="link" href="../handbook/ppp-and-slip.html#USERPPP-DYNAMICIP" target="_top">
	      seção PPP e Endereços IPs
	      dinâmicos</a> do Manual do FreeBSD para
	    maiores detalhes
	  </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70038608"></a><a id="connection-threeminutedrop"></a><p><strong>14.5.</strong></p></td><td align="left" valign="top"><p>Porque minha conexão cai depois de (em média)
	    3 minutos?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O default timeout do PPP é de 3 minutos.  Isso pode
	    ser ajustado com a linha</p><pre class="programlisting">set timeout <em class="replaceable"><code>NNN</code></em></pre><p>Onde NNN é o número em
	    segundos de inatividade antes da conexão ser
	    fechada.  Se <em class="replaceable"><code>NNN</code></em> é zero a conexão
	    nunca será fechada devido a um timeout.  É
	    possível colocar esse comando no
	    <code class="filename">ppp.conf</code> ou digitá-lo no modo
	    interativo.  Também é
	    possível que isso seja ajustado enquanto sua
	    conexão esta ativa conectando
	    pelo socket do servidor <span class="application">ppp</span> usando
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">telnet</span>(1)</span></a> ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pppctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pppctl</span>(8)</span></a>.  Consulte a man
	    page do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> para maiores detalhes.
	  </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70045264"></a><a id="ppp-drop-heavy-load"></a><p><strong>14.6.</strong></p></td><td align="left" valign="top"><p>Por que minha conexão cai quando está
	    sobrecarregada?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Se você tem o relatório da qualidade da
	    ligação (opção LPR)
	    configurado é possível que muitos pacotes
	    LQR entre sua máquina e a origem estejam sendo
	    perdidos.  O ppp deduz que sua linha deve ser ruim e
	    desconecta.  Antes da versão 2.2.5 do FreeBSD, o
	    LQR era habilitado por default.  Agora ele é
	    desabilitado por default.  O LQR pode ser desabilitado com
	    a linha</p><pre class="programlisting">disable lqr</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70047952"></a><a id="ppp-drop-random"></a><p><strong>14.7.</strong></p></td><td align="left" valign="top"><p>Por que minha conexão cai após um
	    período aleatório de tempo?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Às vezes, em uma linha telefônica com
	    ruídos, ou quando a linha tem espera de
	    ligações,  seu modem pode desligar, pensando
	    (incorretamente) que perdeu o sinal de linha.</p><p>Existem ajustes em grande parte dos modems
	    determinando o quão tolerante ele deve ser a
	    respeito de perdas de sinal de linha.  No USR Sportster,
	    por exemplo, isso é medido  pelo registrador S10 em
	    décimos de segundo.  Para fazer com que seu modem
	    não caia, poderia-se adicionar a seguinte string
	    dial up para envio/espera:</p><pre class="programlisting">set dial "...... ATS10=10OK......"
	   </pre><p>Consulte o manual do seu modem para detalhes.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70051152"></a><a id="ppp-hangs-random"></a><p><strong>14.8.</strong></p></td><td align="left" valign="top"><p>Por que minha conexão fica pendurada depois de
	    um período aleatório de tempo?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Muitas pessoas experimentam conexões presas sem
	    aparentemente nenhuma explicação.</p><p>Se você usa um modem externo, você
	    simplesmente pode tentar um <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> para ver se a luz
	    <acronym class="acronym">TD</acronym> fica piscando quando você
	    transmite dados.  Se piscar (e a luz do
	    <acronym class="acronym">RD</acronym> não), o problema é com
	    a extremidade remota.  Se o <acronym class="acronym">TD</acronym>
	    não piscar, o problema é local.  Com um
	    modem interno você precisará usar o comando
	    <code class="literal">set server</code> no seu arquivo ppp.conf.
	    Quando ocorrer de cair, conecte com o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> usando o
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pppctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pppctl</span>(8)</span></a>.  Se a conexão de sua rede voltar de
	    repente (o ppp voltou devido a atividade no
	    diagnóstico do socket) ou se você não
	    consegue conectar (assumindo que o comando <code class="literal">set
	      socket</code> foi iniciado com sucesso) o problema
	    é local.  Se você puder conectar e ainda as
	    coisas estiverem "penduradas" habilite os logs do async
	    local com o comando <code class="literal">set log local async</code>
	    e use o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> de outra janela ou terminal para
	    forçar a atividade da conexão.  Os logs
	    async irão mostrar os dados que estão sendo
	    transmitidos e recebidos durante a ligação.
	    Se os dados estão indo e não estão
	    voltando, o problema é remoto.</p><p>Tendo estabelecido que o problema é local ou
	    remoto, você tem agora duas possibilidades:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Se o problema é remoto, leia a
		secção <a class="xref" href="ppp.html#ppp-remote-not-responding" title="14.9.">P: 14.9</a>.</p></li><li class="listitem"><p>Se o problema for remoto, leia a
		secção <a class="xref" href="ppp.html#ppp-hung" title="14.10.">P: 14.10</a>.</p></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70066256"></a><a id="ppp-remote-not-responding"></a><p><strong>14.9.</strong></p></td><td align="left" valign="top"><p>A extremidade remota não está
	    respondendo.  O que eu posso fazer?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Há muito pouco que pode ser feito em
	    relação a isso.  A maioria dos provedores
	    irão recusar ajuda-lo se você não usar
	    o Windows.  Você pode habilitar a
	    <code class="literal">lqr</code> no seu arquivo
	    <code class="filename">ppp.conf</code>, permitindo ao <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    detectar a falha remota e desligar-se, mas essa
	    detecção é relativamente lenta e
	    consequentemente inútil.  Pode-se querer evitar
	    dizer ao seu provedor que você está rodando o
	    user-ppp....</p><p>Primeiro tente desabilitar toda compressão
	    local adicionando o seguinte em sua
	    configuração:</p><pre class="programlisting">disable pred1 deflate deflate24 protocomp acfcomp shortseq vj
deny pred1 deflate deflate24 protocomp acfcomp shortseq vj</pre><p>Então reconecte para assegurar de que isso
	    não fez diferença.  Se as coisas melhoraram
	    ou se o problema foi resolvido completamente, determine
	    quais ajustes fizeram a diferença através de
	    tentativas e erros.  Isto fornecerá uma boa cartada
	    quando você contactar seu provedor (embora possa
	    parecer que você não esteja rodando um
	    produto Microsoft).</p><p>Antes de contactar seu provedor, habilite  o log async
	    localmente e aguarde até que sua conexão
	    caia novamente.  Isto pode usar um bocado de espaço
	    em disco.  A última leitura de dados da porta pode
	    ser de seu interesse.  São geramente dados em
	    ascii, e podem mesmo descrever o problema (<span class="quote">&#8220;<span class="quote">Memory
	      fault, core dumped</span>&#8221;</span>?).</p><p>Se seu provedor for prestativo, ele deve ser capaz de
	    habilitar o log da extremidade da conexão dele,
	    então quando a proxima queda de link ocorrer, eles
	    podem ser capazes de dizer porque o seu lado esta tendo
	    problemas.  Sinta-se livre para enviar os detalhes para
	    Brian Somers ou peça para seu provedor
	    contactá-lo diretamente.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70072400"></a><a id="ppp-hung"></a><p><strong>14.10.</strong></p></td><td align="left" valign="top"><p>O <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> está travado.  O que eu posso
	    fazer?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A melhor coisa a fazer aqui é recompilar o
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> adicionando <code class="literal">CFLAGS+=-g </code>e
	    <code class="literal">STRIP=</code> no final do Makefile, depois
	    faça <code class="command">make clean &amp;&amp; make &amp;&amp;
	      make install</code>.  Quando o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> ficar
	    travado, procure o id do processo com um <code class="command">ps ajxww
	      | fgrep ppp</code> e execute <code class="command">gdb ppp
	    </code>PID.  No prompt do gdb você pode
	    então usar o <code class="command">bt</code> para obter um
	    rastreamento da pilha.</p><p>Envie os resultados para:
	    <code class="email">&lt;<a xmlns="" class="email" href="mailto:brian@Awfulhak.org">brian@Awfulhak.org</a>&gt;</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70084048"></a><a id="ppp-loginok-thennothing"></a><p><strong>14.11.</strong></p></td><td align="left" valign="top"><p>Por que não acontece nada depois da mensagem
	    <span class="quote">&#8220;<span class="quote">Login OK!</span>&#8221;</span>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Antes da versão 2.2.5 do FreeBSD, uma vez que a
	    conexão foi estabelecida, o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> espera que o
	    modem remoto inicie o protocolo do controle de linha
	    (LCP), Muitos provedores não iniciarão a
	    negociação e esperarção que o
	    cliente a faça.  Para forçar o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    para iniciar o LCP, use a seguinte linha:</p><pre class="programlisting">set openmode active</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Nota: isto geralmente não prejudica em nada
	      se a negociação for iniciada por ambos os
	      lados, assim, a opção openmode é
	      agora ativada por padrão.  Entretanto, na
	      próxima seção será explicado
	      quando isso realmente <span class="emphasis"><em>proporciona</em></span>
	      algum problema.</p></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70093776"></a><a id="ppp-same-magic"></a><p><strong>14.12.</strong></p></td><td align="left" valign="top"><p>Eu vejo os mesmos erros sobre <code class="literal">magic is the
	      same</code>.  O que significa?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ocasionalmente, depois da conexão, você
	    pode ver mensagens no log dizendo <span class="quote">&#8220;<span class="quote">"magic is the
	      same"</span>&#8221;</span>.  Às vezes essas mensagens
	    são sem importância e as vezes um lado ou o
	    outro sai.  A maioria das implementações do
	    ppp não consegue continuar com esse problema, e
	    mesmo se a conexão estiver para ser estabelecida,
	    você verá repetidas requisições
	    de configuração e reconhecimentos de
	    configuração no arquivo de log até
	    que o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> eventualmente desista e feche a
	    conexão.</p><p>Isto normalmente acontece em máquinas com
	    discos lentos que estão dando spawning getty na
	    porta e executam o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> através de um login
	    script ou programa depois do login.  Eu também ouvi
	    relatórios disso estar acontecendo consistentemente
	    ao usar slirp.  A razão é que no tempo entre
	    saída do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a> e a
	    inicialização do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>, o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> do
	    lado cliente começa a emitir pacotes do protocolo
	    do controle da linha LCP).  Porque o ECHO ainda esta
	    ligado na porta do servidor, o cliente então
	    vê esses pacotes serem <span class="quote">&#8220;<span class="quote">refletidos</span>&#8221;</span> de
	    volta.</p><p>Uma parte da negociação LCP deve
	    estabelecer um número mágico para cada lado
	    da ligação de modo que as
	    <span class="quote">&#8220;<span class="quote">reflexões</span>&#8221;</span> possam ser detectadas.  O
	    protocolo diz que quando um ponto tenta negociar o mesmo
	    número mágico, um NAK deve ser emitido e um
	    novo número mágico deve ser escolhido.
	    Durante o período que a porta do server tem o ECHO
	    ligado, o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> cliente manda pacotes LCP, vê o
	    mesmo número mágico nos pacotes refletidos e
	    manda NAKs a ele.  Ve-se também o NAK que foi
	    refletido (que significa que o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> deve mudar o seu
	    número mágico).  Isto produz um
	    número potencialmente enorme de mudanças de
	    números mágicos que estão sendo
	    empilhados no buffer do tty do servidor.  Tão logo
	    o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> se inicia no servidor, ele é inundado
	    com  mudanças de números mágicos
	    imediatamente ao negociar o LCP, e desiste.  Enquanto
	    isso, o cliente não vê por muito tempo as
	    reflexões e fica feliz apenas por algum tempo,
	    até receber a desconexão do servidor.</p><p>Isto pode ser evitado permitindo que a
	    negociação seja iniciada pelo servidor
	    (peer), adicionando a seguinte linha no seu arquivo
	    ppp.conf:</p><pre class="programlisting">set openmode passive</pre><p>Isso diz ao <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> para esperar que o servidor
	    inicie as negociações LCP.  Alguns
	    servidores, entretanto, podem nunca iniciar as
	    negociações.  Se este for o caso, você
	    deve fazer algo como:</p><pre class="programlisting">set openmode active 3</pre><p>Isto diz ao <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> para ser passivo durante 3
	    segundos, e então começar a enviar
	    requisições LCP.  Se o servidor (peer)
	    começar a enviar requisições durante
	    esse período, o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> irá responder
	    imediatamente, ao invés de aguardar pelo
	    período completo de 3 segundos.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70129232"></a><a id="ppp-lcp-constant"></a><p><strong>14.13.</strong></p></td><td align="left" valign="top"><p>As negociações LCP continuam até
	    que a conexão seja fechada.  O que está
	    errado?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Há atualmente uma característica
	    faltando no ppp onde ele não associa respostas LCP
	    , CCP &amp; IPCP com suas requisições
	    originais.  Como consequência, se uma
	    implementação ppp é 6 segundos mais
	    lenta do que o outro lado, esse lado emitirá duas
	    requisões adicionais de configuração
	    LCP.  Isto é fatal.</p><p>Considere duas implementações,
	    <code class="systemitem">A</code> e <code class="systemitem">B</code>.
	    <code class="systemitem">A</code> emite requisições LCP
	    imediatamente após a conexão e
	    <code class="systemitem">B</code> leva 7 segundos para iniciar.  Quando
	    <code class="systemitem">B</code> inicia, <code class="systemitem">A</code> emitiu 3 LCP
	    REQs.  Nós estamos supondo que a linha ECHO esteja
	    desabilitada, senão nós veríamos
	    problemas com número mágico como descritos
	    na seção anterior.  <code class="systemitem">B</code> emite
	    um REQ, entao um ACK para o primeiro dos REQs de
	    <code class="systemitem">A</code>.  Isto resulta em <code class="systemitem">A</code>
	    entrando no estado <acronym class="acronym">OPENED</acronym> e enviando um
	    ACK (o primeiro) de volta a <code class="systemitem">B</code>.  Enquanto
	    isso, <code class="systemitem">B</code> envia de volta mais dois ACKs em
	    resposta aos dois REQs adicionais enviados por
	    <code class="systemitem">A</code> antes de <code class="systemitem">B</code> ter
	    iniciado.  <code class="systemitem">B</code> então recebe o
	    primeiro ACK de <code class="systemitem">A</code> e também entra
	    no estado de <acronym class="acronym">OPENED</acronym>.
	    <code class="systemitem">A</code> recebe o segundo ACK de
	    <code class="systemitem">B</code> e retorna ao estado de
	    <acronym class="acronym">REQ-SENT</acronym>, enviando um outro (seguinte)
	    REQ conforme a RFC ordena.  Então, recebe o
	    terceiro ACK e entra no estado OPENED.  Enquanto isso,
	    <code class="systemitem">B</code> recebe REQ (posterior) de
	    <code class="systemitem">A</code>, tendo como resultado uma
	    reversão para o estado <acronym class="acronym">ACK-SENT</acronym>
	    e enviando um outro (segundo) REQ e (depois) ACK conforme
	    a RFC.  Conseguindo o REQ, <code class="systemitem">A</code> entra em
	    <acronym class="acronym">REQ-SENT</acronym> e envia outro REQ.
	    Imediatamente recebe o ACK seguinte e entra em
	    <acronym class="acronym">OPENED</acronym>.</p><p>Isto continuará até que um dos lados
	    descubra que eles não estão indo a lugar
	    algum e desista.</p><p>A melhor maneira de evitar isso é configurar um
	    lado para ser <code class="literal">passivo</code> - isso faz com
	    que um lado espere pelo outro para iniciar uma
	    negociação.  Isto pode ser feito com o
	    comando</p><pre class="programlisting">set openmode passive</pre><p>Deve-se ter cuidado com esta opção.
	    Você também deve usar o comando</p><pre class="programlisting">set stopped N</pre><p>para limitar a quantidade de tempo que o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    esperará pelo outro lado iniciar a
	    negociação.  Alternativamente o
	    comando</p><pre class="programlisting">set openmode active N</pre><p>(onde <em class="replaceable"><code>N</code></em> é o
	    número de segundos para esperar antes de iniciar as
	    negociações) pode ser usado.  Consulte as
	    páginas de manual para detalhes.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70154832"></a><a id="ppp-lockups"></a><p><strong>14.14.</strong></p></td><td align="left" valign="top"><p>Por que o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> trava logo apó a
	    conexão?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Antes da versão 2.2.5 do FreeBSD, era
	    possível que sua ligação fosse
	    desabilitada logo após a conexão, devido a
	    incapacidade de negociação da
	    compressão Predictor1 do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>.  Isto
	    aconteceria somente se ambos os lados tentassem negociar
	    protocolos diferentes do controle da compressão
	    (CCP).  Este problema atualmente esta corrigido, mas se
	    você ainda roda uma versão antiga do
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>, o problema pode ser resolvido com a
	    linha:</p><pre class="programlisting">disable pred1</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70159568"></a><a id="ppp-shell-test-lockup"></a><p><strong>14.15.</strong></p></td><td align="left" valign="top"><p>Por que o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> trava quando executo
	    comandos shell pelo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Quando executa-se o <code class="command">shell</code> com o
	    comando <code class="command">!</code> , o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> executa um
	    shell (ou se você passar quaisquer argumentos, o
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> executará aqueles argumentos).  Ppp
	    aguardará o comando terminar antes de continuar.
	    Se você tentar usar a sua ligaço ppp enquanto
	    é executado o comando, a ligação
	    aparacerá congelada.  Isto porque o ppp
	    estará esperando pelo finalização da
	    comando.</p><p>Se você desejar executar comandos assim, use o
	    comando <code class="command">!bg</code>.  Ele executará o
	    comando em background e o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> poderá
	    continuar a servir a conexão normalmente.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70167376"></a><a id="ppp-nullmodem"></a><p><strong>14.16.</strong></p></td><td align="left" valign="top"><p>Como uma conexão por <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> usando um nunca
	    termina?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Não há nenhuma maneira para que o
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> determine automaticamente que uma
	    conexão direta caiu.  Isto é devido
	    às linhas que são usadas na série de
	    cable null modems.  Ao usar esse tipo de conexão o
	    LQR deve sempre ser habilitado com a linha:</p><pre class="programlisting">enable lqr</pre><p>A LQR é aceita por padrão, se negociada
	    com o outro lado.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70175952"></a><a id="ppp-auto-noreasondial"></a><p><strong>14.17.</strong></p></td><td align="left" valign="top"><p>Por que o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> disca sem nenhuma razão no
	    modo -auto?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Se o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> esta discando inesperadamente,
	    você deve determinar a causa, e setar os filtros de
	    discagem (dfilters) para evitar esse comportamento.</p><p>Para determinar a causa, use a seguinte linha:</p><pre class="programlisting">set log +tcp/ip</pre><p>Isto registrará todo o tráfego
	    através da conexão.  A próxima vez
	    que a linha acima for ativada, você verá a
	    razão logada.</p><p>Você pode agora desabilitar a discagem sob estas
	    circunstâncias.  Geralmente, este tipo de problema
	    ocorre devido aos lookups do DNS.  Para evitar que os
	    lookups do DNS estabeleçam uma conexão (isto
	    <span class="emphasis"><em>não</em></span> impedirá que o
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> passe os pacotes através de uma
	    conexão já estabelecida) use o
	    seguinte:</p><pre class="programlisting">set dfilter 1 deny udp src eq 53
set dfilter 2 deny udp dst eq 53
set dfilter 3 permit 0/0 0/0</pre><p>Nem sempre isso é apropriado, porque irá
	    interromper suas capacidades de discagem por demanda - a
	    maioria dos programas precisarão de lookup do DNS
	    antes de fazer alguma outra coisa relacionada a
	    rede.</p><p>No caso do DNS, você deve tentar determinar o
	    que esta realmente tentando resolver um hostname.  Na
	    maioria das vezes o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> é o culpado.
	    Você deve certificar-se que o sendmail não
	    deve fazer nenhum DNS lookup em seu arquivo de
	    configuração.  Veja na seção
	    <a class="link" href="admin.html#ispmail" title="10.12.">Configuração de
	      Mail</a> para detalhes de como criar seu
	    próprio arquivo de configuração e o
	    que deve conter nele.  Você pode também
	    adicionar a seguinte linha ao seu arquivo
	    <code class="filename">.mc</code>:</p><pre class="programlisting">define(`confDELIVERY_MODE', `d')dnl
	  </pre><p>Isto fará o sendmail enfileirar tudo,
	    até que a fila esteja funcionando (normalmente o
	    sendmail é invocado com <code class="option">-bd -q30m</code>,
	    dizendo a ele para rodar a fila (queue) a cada 30minutos)
	    ou até que o <code class="command">sendmail</code> -q seja
	    feito (talvez do arquivo ppp.linkup)</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70190800"></a><a id="ccp-errors"></a><p><strong>14.18.</strong></p></td><td align="left" valign="top"><p>O que estes erros de CCP significam?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Eu estou vendo os seguintes erros em
	    meus logs:</p><pre class="programlisting">CCP: CcpSendConfigReq
CCP: Received Terminate Ack (1) state = Req-Sent (6)</pre><p>Isto é porque o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> esta tentando
	    negociar a compressão Predictor1, e o outro ponto
	    não quer negociar nenhuma compressão.  As
	    mensagens são inofensivas, mas se você
	    desejar remove-las, poderá desabilitar a
	    compressão Predictor1 também
	    localmente:</p><pre class="programlisting">disable pred1</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70207184"></a><a id="ppp-lockup-ioerrors"></a><p><strong>14.19.</strong></p></td><td align="left" valign="top"><p>Por que o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> trava durante a
	    transferência de arquivo com erros de
	    IO(Input/Output)?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>No FreeBSD 2.2.2 e anteriores, havia um bug no driver
	    tun, que impedia pacotes de entrada de um tamanho maior do
	    que o MTU da interface.  O O recebimento de pacotes
	    maiores que o MTU da interface resulta em erro de IO que
	    é logado através do syslogd.</p><p>A especificação do ppp diz que um MTU de
	    1500 deve ser <span class="emphasis"><em>sempre</em></span> aceito como
	    mínimo.  Apesar de todas as
	    negociações de LCP, é possível
	    diminuir o MTU para menos de 1500, independentemente
	    disso, seu provedor irá transmitir pacotes de 1500
	    para você, e isso travará sua
	    conexão.</p><p>O problema pode ser contornado por nunca ajustar um
	    MTU menor que 1500 sobre o FreeBSD 2.2.2 ou
	    anteriores.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70211408"></a><a id="ppp-connectionspeed"></a><p><strong>14.20.</strong></p></td><td align="left" valign="top"><p>Por que o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> não loga minha velocidade
	    de conexão?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A fim de logar todas as linhas de
	    <span class="quote">&#8220;<span class="quote">conversação</span>&#8221;</span> de seu modem
	    você deve habilitar o seguinte:</p><pre class="programlisting">set log +connect</pre><p>Isto irá fazer o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> logar tudo,
	    até a ultima requisição
	    <span class="quote">&#8220;<span class="quote">expect</span>&#8221;</span>.</p><p>Se você desejar ver sua velocidade de
	    conexão e estiver usando PAP ou CHAP (e
	    consequentemente não tenha qualquer coisa para o
	    <span class="quote">&#8220;<span class="quote">chat</span>&#8221;</span> depois do CONNECT no script de
	    discagem - no <code class="literal">set login</code> script),
	    você deve certificar-se que instruiu o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> a
	    ``a esperar" a linha inteira CONNECT, algo como:</p><pre class="programlisting">set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 4 \
  \"\" ATZ OK-ATZ-OK ATDT\\T TIMEOUT 60 CONNECT \\c \\n"</pre><p>Aqui nosso CONNECT, não envia nada, ele espera
	    então um line-feed, forçando o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> a
	    ler toda a resposta do CONNECT.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70224208"></a><a id="ppp-ignores-backslash"></a><p><strong>14.21.</strong></p></td><td align="left" valign="top"><p>Por que o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> ignora o caracter
	    <code class="literal">\</code> no meu script de
	    conversação?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O Ppp analiza cada linha no seu arquivo de
	    configuração, então isso pode ser
	    interpretado como string tal como <code class="literal">set phone "123
	      456 789"</code> corretamente e compreende de fato que
	    o número é um
	    <span class="emphasis"><em>único</em></span> argumento.  A fim de
	    especificar um caracter<code class="literal">"</code>,
	    você deve escapar desse comportamento, usando um a
	    barra invertida <code class="literal">\</code>.</p><p>Quando o script de conversação analizar
	    cada argumento, ele reinterpretará o argumento a
	    fim de encontrar quaisquer sequências especiais como
	    <code class="literal">\P</code> ou <code class="literal">\T</code> (veja a man
	    page).  Como resultado desta dupla análise,
	    você deve conseguir usar o número correto de
	    espaços.</p><p>Se você deseja enviar um caracter
	    <code class="literal">\</code> para dizer a seu modem, você
	    precisará de algo assim:</p><pre class="programlisting">set dial "\"\" ATZ OK-ATZ-OK AT\\\\X OK"</pre><p>resultando a seguinte sequência:</p><pre class="programlisting">ATZ
OK
AT\X
OK</pre><p>ou</p><pre class="programlisting">set phone 1234567
set dial "\"\" ATZ OK ATDT\\T"</pre><p>resultando na seguindo sequência:</p><pre class="programlisting">ATZ
OK
ATDT1234567</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70233808"></a><a id="ppp-segfault-nocore"></a><p><strong>14.22.</strong></p></td><td align="left" valign="top"><p>Por que o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> dá um seg-fault, mas eu
	    não vejo nenhum arquivo
	    <code class="filename">ppp.core</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O Ppp (ou qualquer programa desta natureza) nunca
	    dever dar core dump.  Porque o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> roda com um
	    e-userid (effective user id) 0, o sistema operacional
	    não irá escrever a imagem do core do
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> em disco antes de terminá-lo.  Mas se
	    acontecer de o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> terminar devido a uma falha de
	    segmentação ou algum outro sinal que
	    normalmente causaria um core dumped,
	    <span class="emphasis"><em>e</em></span> você tem certeza de que esta
	    usando uma versão mais recente do ppp (veja o
	    começo desta seção), você deve
	    fazer o seguinte:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>tar xfz ppp-*.src.tar.gz</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cd ppp*/ppp</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>echo STRIP= &gt;&gt;Makefile</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>echo CFLAGS+=-g &gt;&gt;Makefile</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>make clean all</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>su</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 555 /usr/sbin/ppp</code></strong></pre><p>Você agora tem uma versão
	    debugável do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> instalada.  Você
	    precisará ser <code class="systemitem">root</code> para rodar
	    o ppp porque todos os seus privilégios foram
	    revogados.  Quando você iniciar o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>, tome
	    nota com cuidado de qual era o seu diretório
	    corrente naquele instante.</p><p>Agora, quando o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> receber uma
	    violação de segmento (seg-fault), você
	    terá um arquivo chamado ppp.core.  Você deve
	    então fazer o seguinte:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>gdb /usr/sbin/ppp ppp.core</code></strong>
<code class="prompt">(gdb)</code> <strong class="userinput"><code>bt</code></strong>
.......
<code class="prompt">(gdb)</code> <strong class="userinput"><code>f 0</code></strong>
......
<code class="prompt">(gdb)</code> <strong class="userinput"><code>i args</code></strong>
......
<code class="prompt">(gdb)</code> <strong class="userinput"><code>l</code></strong>
.......</pre><p>Toda essa informação deve ser dada com a
	    sua pergunta, sendo possível agora diagnosticar o
	    problema.</p><p>Se você é familiarizado com o gdb,
	    você pode desejar encontrar alguns outros bits e
	    partes como as que causaram o dump e também os
	    endereços e valores das variáveis
	    revelantes.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70264016"></a><a id="ppp-autodialprocess-noconnect"></a><p><strong>14.23.</strong></p></td><td align="left" valign="top"><p>Por que o processo que força a discagem em auto
	    mode nunca conecta?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Este era um problema conhecido na
	    configuração <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> para negociar um IP
	    local dinâmico com o outro ponto no auto mode.  Isto
	    foi corrigido na versão mais recente.  Procure na
	    man page do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> por
	    <code class="literal">iface</code>.</p><p>O problema era que quando este programa inicial chamava
	    o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=connect&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">connect</span>(2)</span></a>, o número IP da interface tun
	    estava atribuído ao endpoint do soquete.  O
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> cria o primeiro
	    pacote de saída e escreve-o no dispositivo tun.  O
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> então lê o pacote e estabelece a
	    conexão.  Se em consequência da
	    atribuição dinâmica do IP do
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> o endereço da interface for mudado, o
	    endpoint do soquete original será inválido.
	    Todos os pacotes subsequentes emitidos ao outro ponto
	    serão geralmente descartados.  Mesmo se não
	    forem descartados, nenhuma das respostas irá voltar
	    pela rota da máquina de origem, isto porque o
	    número IP já não pertence a essa
	    máquina.</p><p>Há diversas maneiras teóricas para
	    abordargem desse problema.  Seria mais agradável se
	    o ponto reatribuísse,  se possível o mesmo
	    número IP <code class="literal">:-)</code> A versão
	    atual do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> faz isso, mas a maioria das outras
	    implementações não.</p><p>O método mais fácil do nosso lado, seria
	    nunca mudar o número IP da interface tun, mas ao
	    invés disso, mudar todos os pacotes de saída
	    de modo que a origem do número IP é mudada
	    da interface IP para o IP negociado dinâmicamente.
	    Isto é essencialmente o que a opção
	    <code class="literal">iface-alias</code> na versão mais
	    recente do ppp faz (com a ajuda da <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=libalias&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">libalias</span>(3)</span></a> e da
	    opção <code class="option">-nat</code> do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>) -
	    esta mantendo endereços anteriores da interface e
	    fazendo NAT do último endereço
	    negociado.</p><p>Uma outra alternativa (e provavelmente a mais
	    confiável) seria implementar uma chamada de sistema
	    que mudasse todos os soquetes ligados de um IP para outro.
	    O <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> usaria essa chamada para modificar os
	    soquetes de todos os programas em execução
	    quando um novo endereço IP é negociado.  O
	    mesmo sistema de chamadas poderia ser usado por clientes
	    dhcp quando são forçados a religar seus
	    soquetes.</p><p>Ainda, outra possibilidade é permitir a
	    interface para ser ativada sem um número IP.  Os
	    pacotes de saída seriam dados um número IP
	    255.255.255.255 até que a primeira SIOCAIFADDR
	    ioctl esteja pronta.  Isto resultaria na completa
	    ligação com o soquete.  Seria até o
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> mudar o número IP de origem, mas somente
	    se foi setado para 255.255.255.255, e somente o
	    número IP e o IP checksum deveriam ser mudados.
	    Isto porém, é um pequeno hack do
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> que deve estar
	    enviando maus pacotes para uma interface configurada, na
	    suposição de que algum outro mecanismo
	    é capaz de corrigir as coisas de forma
	    restrospectiva.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70323536"></a><a id="ppp-nat-games"></a><p><strong>14.24.</strong></p></td><td align="left" valign="top"><p>Por que a maioria dos jogos não funciona com a
	    opção -nat?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A razão para os jogos e outros programas
	    não funcionarem quando a libalias esta em uso
	    é porque a máquina de fora irá tentar
	    abrir uma conexão ou enviar pacotes UDP (não
	    solicitados) para a máquina de dentro.  O software
	    NAT não sabe que deve enviar esses pacotes para a
	    máquina interna.</p><p>Para que as coisas funcionem, certifique-se de que a
	    única coisa que esta rodando é o software
	    que você esta tendo problemas, a seguir rode o
	    tcpdump na interface tun do gateway ou habilite <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    tcp/ip logging (<code class="literal">set log+tcp/ip</code>) na
	    gateway.</p><p>Quando você iniciar o software, você deve
	    ver pacotes passando através da máquina
	    gateway.  Quando alguma coisa volta vindo de fora,
	    será descartado (este é o problema).  Tome
	    nota do número da porta desses pacotes e a seguir
	    feche o software.  Faça isso algumas vezes para ver
	    se os números da porta são consistentes.  Se
	    eles forem, a seguinte linha no
	    <code class="filename">/etc/ppp/ppp.conf</code> fará o
	    software funcional:</p><pre class="programlisting">nat port <em class="replaceable"><code>proto</code></em><em class="replaceable"><code>máquinainterna</code></em>:
<em class="replaceable"><code>porta</code></em><em class="replaceable"><code>porta</code></em></pre><p>Onde <em class="replaceable"><code>proto</code></em> é ou
	    <code class="literal">tcp</code> ou <code class="literal">udp</code>,
	    <em class="replaceable"><code>máquinainterna</code></em> é
	    a máquina de onde você quer que os pacotes
	    sejam enviados e <em class="replaceable"><code>porta</code></em> é
	    número da porta de destino dos pacotes.</p><p>Você não poderá usar o software em
	    outras máquinas sem mudar o comando acima, e rodar
	    o software em duas máquinas internas ao mesmo tempo
	    é fora de questão - Apesar de tudo, o lado
	    de fora esta vendo toda sua rede interna como sendo
	    somente uma máquina.</p><p>Se os números da porta não são
	    consistentes, há ainda mais 3
	    opções.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Enviar o suporte na libalias.  Exemplos de 'casos
		especiais' podem ser encontrados em
		<code class="filename">/usr/src/lib/libalias/alias_*.c </code>
		(<code class="filename">alias_ftp.c</code> eh um bom tipo de
		protocolo).  Isto geralmente envolve ler determinados
		pacotes reconhecidos na saída, identificando a
		instrução que chama a máquina
		externa para iniciar a conexão de volta para a
		máquina interna em uma porta (aleatória)
		específica e setar a <span class="quote">&#8220;<span class="quote">rota</span>&#8221;</span> na
		tabela de aliases de modo que os pacotes subsequentes
		saibam para onde ir.</p><p>Esta solução é a mais
		difícil, mas é a melhor e irá
		fazer o software trabalhar com múltipla
		máquinas.</p></li><li class="listitem"><p>Use um proxy.  A aplicação
		poderá suportar sock5 por exemplo, ou (como no
		caso do <span class="quote">&#8220;<span class="quote">cvsup</span>&#8221;</span>) pode ter uma
		opção <span class="quote">&#8220;<span class="quote">passive</span>&#8221;</span> que evita
		sempre requisições feitas pelo outro
		ponto de volta para a máquina local.</p></li><li class="listitem"><p>Redirecione tudo para a máquina interna
		usando <code class="literal">nat addr</code>.  Pode-se dizer que
		essa seja a apelação.</p></li></ol></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70342224"></a><a id="useful-port-numbers"></a><p><strong>14.25.</strong></p></td><td align="left" valign="top"><p>Alguém fez uma lista de número de portas
	    úteis?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Não ainda, mas a intensão é
	    produzir tal lista (se algum interesse for mostrado).  Em
	    cada exemplo, <em class="replaceable"><code>internal</code></em> deve ser
	    substítuido pelo IP da máquina que esta
	    jogando o jogo.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">Asheron's Call</span></p><p><code class="literal">nat port udp 
		    internal:65000
		  65000</code></p><p>Mude manualmente o número da porta dentro
		do jogo para 65000.  Se você começar com
		um determinado número de máquinas que
		você deseja jogar atribua uma porta para cada
		(por ex 65001, 65002, etc) e adicione uma
		<code class="literal">porta nat</code> para cada uma.</p></li><li class="listitem"><p><span class="application">Half Life</span></p><p><code class="literal">nat port udp
		  internal:27005
		  27015</code></p></li><li class="listitem"><p><span class="application"> PCAnywhere
		  8.0</span></p><p><code class="literal">nat port udp
		  internal:5632 5632
		</code></p><p><code class="literal">nat port tcp
		  internal:5631 5631
		</code></p></li><li class="listitem"><p><span class="application">Quake</span></p><p><code class="literal">nat port udp
		  internal:6112
		  6112</code></p><p>Alternativamente, você pode querer ir em
		<a class="link" href="www.battle.net" target="_top"> www.batle.net</a>
		para dar uma olhada no suporte de proxy do
		quake.</p></li><li class="listitem"><p><span class="application">Quake 2</span></p><p><code class="literal">nat port udp
		  internal:27901
		  27901</code></p><p><code class="literal">nat port udp
		  internal:60021
		  60021</code></p><p><code class="literal">nat port udp
		  internal:60040
		  60040</code></p></li><li class="listitem"><p><span class="application">Red Alert</span></p><p><code class="literal">nat port udp
		  internal:8675
		  8675</code></p><p><code class="literal">nat port udp
		  internal:5009 5009
		</code></p></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70357328"></a><a id="fcs-errors"></a><p><strong>14.26.</strong></p></td><td align="left" valign="top"><p>O que são erros FCS?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>FCS significa <code class="literal">F</code>rame
	    <code class="literal">C</code>heck <code class="literal">S</code>equence.
	    Cada pacote do ppp tem um checksum anexado para
	    assegurar-se de que os dados que estão sendo
	    recebidos sejam os dados que estão sendo emitidos.
	    Se o FCS de um pacote de entrada estiver incorreto, o
	    pacote sera perdido e a contagem do HDLC FCS é
	    aumentada.  Os valores de erro HDLC podem ser mostrados
	    usando o comando <code class="literal">show hdlc</code>.</p><p>Se a sua ligação é ruim  ou se o
	    driver serial esta perdendo pacotes), você
	    irá ver ocasionalmente erros FCS.  Isto geralmente
	    não é motivo para se preocupar, embora
	    diminua substancialmente os protocolos de
	    compressão.  Se você tem um modem externo,
	    certifique-se que seu cabo esteja protegido corretamente
	    de interferências - Isso pode erradicar o
	    problema.</p><p>Se sua ligação congelar assim que
	    você conectar e vier um grande número de
	    erros FCS, pode ser porque seu link não esta com o
	    bit 8 limpo.  Certifique-se que seu modem não
	    esteja usando o controle de fluxo do software (XON/XOFF).
	    Se o seu datalink deve usar software de controle de fluxo,
	    use o comando <code class="literal">set accmap 0x000a0000</code>
	    para dizer ao ppp para ignorar os caracteres
	    <code class="literal">^Q</code> e <code class="literal">^S</code>.</p><p>Uma outra razão para estar vendo muitos erros
	    FCS pode ser que a extremidade remota parou de comunicar
	    com o <acronym class="acronym">PPP</acronym>.  Você pode querer
	    habilitar registros <code class="literal">async</code> neste ponto
	    para determinar se os dados entrantes são realmente
	    um alerta de início de sessão do prompt da
	    shell.  Se você tiver um prompt shell na extremidade
	    remota, é possível terminar o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> sem
	    deixar cair a linha usando o comando <code class="literal">close
	      lcp</code> (o comando <code class="literal">term</code>
	    irá reconectar você shell da máquina
	    remota).  Se nada em seus logs indicar o porque de sua
	    ligação ter sido terminada, você pode
	    perguntar ao administrador remoto (do seu provedor?)
	    porque a sessão foi terminada.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="PPPoEwithNAT"></a><a id="macos-win98-pppoe-freeze"></a><p><strong>14.27.</strong></p></td><td align="left" valign="top"><p>Por que a conexão do MacOS e Windows98 travam
	    ao rodar o PPPoE no gateway?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Agradecimentos a Michael Wozniak
	    <code class="email">&lt;<a xmlns="" class="email" href="mailto:mwozniak@netcom.ca">mwozniak@netcom.ca</a>&gt;</code> por descobrir o
	    problema, e a Dan Flemming
	    <code class="email">&lt;<a xmlns="" class="email" href="mailto:danflemming@mac.com">danflemming@mac.com</a>&gt;</code> pela
	    solução do Mac:</p><p>Isto é devido ao que é chamado de
	    roteador <span class="quote">&#8220;<span class="quote">Buraco Negro</span>&#8221;</span> (<span class="foreignphrase"><em class="foreignphrase">Black
	      Hole</em></span>).  MacOS e Windows98 (e talvez
	    outros SO's da Microsoft) envia m pacotes TCP com um
	    tamanho de segmento requisitado muito grande para ser
	    contido em um frame do PPPoE (MTU por default na ethernet
	    é de 1500) <span class="emphasis"><em>e</em></span> tenha o
	    <span class="quote">&#8220;<span class="quote">não fragmento</span>&#8221;</span> do bit ajustado
	    (default do TCP) e o roteador Telco não esta
	    enviando ICMP <span class="quote">&#8220;<span class="quote">deve ser fragmentado</span>&#8221;</span> de volta
	    ao sitio www que você esta tentando carregar.
	    (Alternativamente o roteador está enviando pacotes
	    ICMP corretamente, mas o firewall no sitio www esta
	    deixando perdê-los).  Quando o servidor www esta
	    enviando seus frames que não cabem no pipe do PPPoE
	    o roteador Telco deixa-os perder e sua página
	    não é carregada (algumas páginas
	    gráficas carregam porque são menores que um
	    MSS).  Esta parece ser a configuração
	    default da maioria dos Telco PPPoE (somente eles sabem
	    como programar o roteador).</p><p>Um maneira de fixar isso é usando o regedit em
	    sua seu Windows 95/98 e adicionar a seguinte entrada de
	    registro:</p><pre class="programlisting">HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Class\NetTrans\0000\MaxMTU</pre><p>Deve ser uma string com um valor <span class="quote">&#8220;<span class="quote">1436</span>&#8221;</span>,
	    porque há relatos de que alguns roteadores ADSL
	    são incapazes de tratar os pacotes maiores que
	    esse.  Esta chave de registro foi mudada para
	    <code class="literal">Tcpip\Parameters\Interfaces\ID-para-o-adptador\MTU</code>
	    no windows 2000 e tornou-se um DWORD.</p><p>Consulte os documentos da Microsoft <a class="link" href="http://support.microsoft.com/support/kb/articles/Q158/4/74.asp" target="_top">
	      Q158474 - Windows TCPIP Entradas de registroi</a> e
	    <a class="link" href="http://support.microsoft.com/support/kb/articles/Q120/6/42.asp" target="_top">
	      Q120642 - TCPIP &amp; NBT Parametros de
	      configuração para Windows NT</a> para
	    maiores informacoes sobre alterações de MTU
	    no Windows para funcionar com um roteador NAT.</p><p>Uma outra possibilidade do regedit sob o Windows 2000
	    é setar
	    <code class="literal">Tcpip\Parameters\Interfaces\ID-para-o-adaptador\EnablePMTUBHDetect</code>
	    DWORD para 1 como mencionado no documento original da
	    Microsoft 120642 comentado acima.</p><p>Infelizmente o MacOS não oferece uma
	    mudança TCP/IP nas configurações da
	    interface.  Entretanto, há um software comercial
	    disponível, o OTAdvancedTuner (OT para
	    OpenTransport, a pilha TCP/IP do MacOS) feito pela <a class="link" href="http://www.softworks.com/" target="_top"> Sustainable
	      Softworks</a>, ele permite aos usuários
	    customizar as configurações TCP/IP.  Os
	    usuários de NAT do MacOS devem selecionar o
	    <code class="literal">ip_interface_MTU</code> no menu drop-down,
	    colocar <code class="literal">1450</code> em vez de
	    <code class="literal">1500</code>, clique na caixa próximo ao
	    <code class="literal">Save as Auto Configure</code>, e clique em
	    <code class="literal">Make Active</code>.</p><p>Versões mais recentes do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> (2.3 ou
	    mais recente) tem o comando <code class="command">enable
	      tcpmssfixup</code> que irá automaticamente
	    ajustar um valor apropriado ao MSS.  Esta facilidade
	    é habilitada por default.  Se você for
	    apaixonado pela versão mais antiga do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    você pode querer dar uma olhada no
	    <code class="literal">port</code> do
	    <span class="application">tcpmssd</span>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70393424"></a><a id="desperation"></a><p><strong>14.28.</strong></p></td><td align="left" valign="top"><p>Nada disso me ajudou - Eu estou desesperado!  O que eu
	    posso fazer?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Se tudo falhar, envie o máximo de
	    informacões que você puder, incluindo seus
	    arquivos de configuração, a forma como
	    está iniciando o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>, os trechos relevantes
	    de seu arquivo de log e a saída do comando
	    <code class="command">netstat -rn</code> (antes e depois de
	    conectado) para a lista <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">lista de 
  discussão para perguntas gerais sobre o FreeBSD</a> ou para o grupo de
	    notícias <a class="link" href="news:comp.unix.bsd.freebsd.misc" target="_top">comp.unix.bsd.freebsd.misc</a>.
	    Alguém deve ajudar a solucionar seu
	    problema.</p></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="security.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="serial.html">Próxima</a></td></tr><tr><td width="40%" align="left" valign="top">Capítulo 13. Segurança </td><td width="20%" align="center"><a accesskey="h" href="index.html">Principal</a></td><td width="40%" align="right" valign="top"> Capítulo 15. Comunicações Seriais</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Este, e outros documentos, podem ser obtidos em
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Para perguntas sobre FreeBSD, leia a
    <a href="http://www.FreeBSD.org/docs.html">documentação</a> antes de contatar
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Para perguntas sobre esta documentação, envie e-mail para
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>