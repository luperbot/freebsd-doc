<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Capítulo 15. Comunicações Seriais</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Perguntas mais freqüentes sobre FreeBSD 2.X, 3.X e 4.X" /><link rel="up" href="index.html" title="Perguntas mais freqüentes sobre FreeBSD 2.X, 3.X e 4.X" /><link rel="prev" href="ppp.html" title="Capítulo 14. PPP" /><link rel="next" href="misc.html" title="Capítulo 16. Perguntas Variadas" /><link rel="copyright" href="legalnotice.html" title="Nota Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Capítulo 15. Comunicações Seriais</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ppp.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="misc.html">Próxima</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serial"></a>Capítulo 15. Comunicações Seriais</h1></div></div></div><p>Essa seção cobre as perguntas mais comuns
      sobre comunicação serial com o FreeBSD.  PPP e
      SLIP são abordados na seção
    <a class="xref" href="networking.html" title="Capítulo 12. Redes">Capítulo 12, <em>Redes</em></a>.</p><div class="qandaset"><a id="idp70399952"></a><dl><dt>15.1. <a href="serial.html#idp70400208">Como eu posso dizer se o FreeBSD encontrou minhas
	    portas seriais?</a></dt><dt>15.2. <a href="serial.html#idp70433360">Como eu posso dizer se o FreeBSD encontrou minha placa
	    de fax modem?</a></dt><dt>15.3. <a href="serial.html#idp70439632">Eu acabei de atualizar para a versão 2.0.5 e as
	    minhas
	    tty0X
	    desapareceram!  Como eu resolvo esse problema?</a></dt><dt>15.4. <a href="serial.html#idp70442448">Como eu acesso as portas seriais no FreeBSD?</a></dt><dt>15.5. <a href="serial.html#idp70450384">Como eu habilito suporte para uma placa serial de
	    múltiplas portas?</a></dt><dt>15.6. <a href="serial.html#idp70461776">O FreeBSD pode trabalhar com placas seriais de
	    múltiplas portas compartilhando irqs?</a></dt><dt>15.7. <a href="serial.html#idp70463824">Posso definir os parâmetros seriais
	    padrão para uma porta?</a></dt><dt>15.8. <a href="serial.html#idp70476624">Como eu habilito logins dial-up no meu modem?</a></dt><dt>15.9. <a href="serial.html#idp70506832">Como eu conecto um terminal burro ao meu
	    FreeBSD?</a></dt><dt>15.10. <a href="serial.html#idp70514512">Por que eu não posso executar o
	    tip ou o cu?</a></dt><dt>15.11. <a href="serial.html#idp70536400">Meu modem modelo Hayes não é suportado -
	    o que eu posso fazer?</a></dt><dt>15.12. <a href="serial.html#idp70557264">Como posso entrar nestes comandos AT?</a></dt><dt>15.13. <a href="serial.html#idp70573904">Porque o sinal &lt;@&gt; para a
	    capacidade pn não
	    funciona?</a></dt><dt>15.14. <a href="serial.html#idp70579024">Como eu posso discar um número de telefone pela
	    linha de comando?</a></dt><dt>15.15. <a href="serial.html#idp70590544">Tenho que definir a taxa de bits por segundo sempre
	    que fazer isso?</a></dt><dt>15.16. <a href="serial.html#idp70594512">Como posso facilmente acessar vários hosts
	    através de um terminal
	      server?</a></dt><dt>15.17. <a href="serial.html#idp70606160">O &#8220;tip&#8221; pode tentar discar mais de uma
	    linha por vez?</a></dt><dt>15.18. <a href="serial.html#idp70615248">Por que eu tenho que pressionar duas vezes o
	    CTRL+P
	    para enviar CTRL+P
	    uma única vez?</a></dt><dt>15.19. <a href="serial.html#idp70637776">Por que tudo o que eu digito inesperadamente
	    está em CAIXA ALTA?</a></dt><dt>15.20. <a href="serial.html#idp70656080">Como eu posso transferir arquivos com o
	    tip?</a></dt><dt>15.21. <a href="serial.html#idp70665808">Como eu posso executar o zmodem com o
	    tip?</a></dt><dt>15.22. <a href="serial.html#idp70676432">O FreeBSD pode vir a não encontrar minhas
	    portas seriais, mesmo quando as
	    configurações estão corretas?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp70400208"></a><a id="found-serial"></a><p><strong>15.1.</strong></p></td><td align="left" valign="top"><p>Como eu posso dizer se o FreeBSD encontrou minhas
	    portas seriais?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Assim que o kernel do FreeBSD é carregado, ele
	    irá varrer as portas seriais do seu sistema
	    procurando dispositivos nas portas configuradas no kernel.
	    Pode-se observar atentamente as mensagens que o sistema
	    exibe, ou então executar o seguinte comando:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>dmesg | grep sio</code></strong></pre><p>assim que o sistema estiver em funcionamento e
	    execução.</p><p>Aqui estão alguns exemplos dos resultados do
	    comando executado acima:</p><pre class="programlisting">sio0 at 0x3f8-0x3ff irq 4 on isa
sio0: type 16550A
sio1 at 0x2f8-0x2ff irq 3 on isa
sio1: type 16550A</pre><p>Eles mostram duas portas seriais.  A primeira
	    está na irq 4, está usando o endereço
	    de porta <code class="literal">0x3f8</code>, e tem um chip modelo
	    UART 16550A.  O segundo utiliza o mesmo tipo de chip mas
	    está na irq 3 e seu endereço de porta
	    é <code class="literal">0x2f8</code>.  Modems internos
	    são tratados como se fossem portas seriais --
	    exceto que sempre tem um modem <span class="quote">&#8220;<span class="quote">conectado</span>&#8221;</span>
	    à porta.</p><p>O <span class="foreignphrase"><em class="foreignphrase">kernel</em></span>
	    <code class="filename">GENERIC</code> tem suporte para duas portas
	    seriais utilizando os mesmos irqs e
	    configurações de endereços de portas
	    do exemplo acima.  Se tais configurações
	    não estão certas para seu sistema, ou se
	    você adicionou placas de modem ou tem mais portas
	    seriais para o qual o
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> foi configurado,
	    apenas recompile seu
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span>.  Veja a a
	    seção de <a class="link" href="kernelconfig.html#make-kernel" title="8.1.">compilação do
	      <span class="foreignphrase"><em class="foreignphrase">kernel</em></span></a> para obter
	    mais detalhes.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70433360"></a><a id="found-modem"></a><p><strong>15.2.</strong></p></td><td align="left" valign="top"><p>Como eu posso dizer se o FreeBSD encontrou minha placa
	    de fax modem?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Refira-se à resposta da pergunta
	    anterior.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70439632"></a><a id="missing-tty0X"></a><p><strong>15.3.</strong></p></td><td align="left" valign="top"><p>Eu acabei de atualizar para a versão 2.0.5 e as
	    minhas
	    <code class="filename">tty0X</code>
	    desapareceram!  Como eu resolvo esse problema?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Não se preocupe, eles foram incluídos
	    com os dispositivos
	    <code class="filename">ttydX</code>.
	    No entanto, você deve mudar todos os arquivos da
	    configuração antiga que você
	    tiver.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70442448"></a><a id="access-serial-ports"></a><p><strong>15.4.</strong></p></td><td align="left" valign="top"><p>Como eu acesso as portas seriais no FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A terceira porta serial, <code class="filename">sio2</code>
	    (veja <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a>, conhecida como COM3 no DOS),
	    está na <code class="filename">/dev/cuaa2</code> para os
	    dispositivos dial-out, e na
	    <code class="filename">/dev/ttyd2</code> para os dispositivos
	    dial-in.  Qual é a diferença entre essas
	    duas classes de dispositivos?</p><p>Você utiliza
	    <code class="filename">ttydX</code>
	    para dial-ins.  Quando o
	    <code class="filename">/dev/ttydX</code>
	    se abre no modo de bloqueio, um processo irá
	    aguardar que o dispositivo
	    <code class="filename">cuaaX</code>
	    correspondente torne-se inativo, e aguarda a
	    detecção do <span class="foreignphrase"><em class="foreignphrase">carrier
	      detect</em></span> da linha para ativar-se.  Quando
	    a
	    <code class="filename">cuaaX</code>
	    se abre, ela deixa claro que a porta não esta ainda
	    em uso pelo dispositivo
	    <code class="filename">ttydX</code>.
	    Se a porta estiver disponível, ela é
	    <span class="quote">&#8220;<span class="quote">roubada</span>&#8221;</span> do dispositivo
	    <code class="filename">ttydX</code>.
	    Além disso, o dispositivo
	    <code class="filename">cuaaX</code>
	    não se importa com o carrier detect.  Com esse
	    esquema de auto-resposta do modem, você pode ter
	    usuários remotos conectando e você pode ainda
	    discar para fora com o mesmo modem, que o sistema
	    irá cuidar de todos os conflitos.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70450384"></a><a id="enable-multiport-serial"></a><p><strong>15.5.</strong></p></td><td align="left" valign="top"><p>Como eu habilito suporte para uma placa serial de
	    múltiplas portas?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Novamente, a seção de
	    configuração do
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> provê
	    informações sobre a
	    configuração de seu
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span>.  Para uma placa
	    serial de múltiplas portas, coloque uma linha
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> para cada porta serial da placa, no arquivo de
	    configuração do
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span>.  Mas coloque o irq
	    e as espeficicações do vetor apenas em uma
	    das entradas.  Todas as portas da placa devem compartilhar
	    uma irq.  Para consistência, utilize a última
	    porta serial para especificar a irq.  Além disso,
	    especifique a opção
	    <code class="literal">COM_MULTIPORT</code>.</p><p>O exemplo seguinte é para uma placa serial AST
	    4-portas na irq 7:</p><pre class="programlisting">options "COM_MULTIPORT"
device sio4 at isa? port 0x2a0 tty flags 0x781
device sio5 at isa? port 0x2a8 tty flags 0x781
device sio6 at isa? port 0x2b0 tty flags 0x781
device sio7 at isa? port 0x2b8 tty flags 0x781 irq 7 vector siointr</pre><p>As flags indicam que a porta master tem um
	    <span class="quote">&#8220;<span class="quote">minor number</span>&#8221;</span> 7 (<code class="literal">0x700</code>),
	    diagnósticos habilitados durante o escaneamento
	    (<code class="literal">0x080</code>), e todas as portas compartilham
	    uma irq (<code class="literal">0x001</code>).</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70461776"></a><a id="multiport-serial-share-irq"></a><p><strong>15.6.</strong></p></td><td align="left" valign="top"><p>O FreeBSD pode trabalhar com placas seriais de
	    múltiplas portas compartilhando irqs?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ainda não.  Você deverá utilizar
	    uma irq diferente para cada placa.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70463824"></a><a id="default-serial-params"></a><p><strong>15.7.</strong></p></td><td align="left" valign="top"><p>Posso definir os parâmetros seriais
	    padrão para uma porta?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O
	    <code class="filename">ttydX</code>
	    (<code class="filename">cuaaX</code>)
	    é um dispositivo regular que você vai querer
	    abrir para suas aplicações.  Quando um
	    processo abre um dispositivo, ele tem um conjunto
	    padrão de configurações de terminais
	    de E/S.  Você pode ver essas
	    configurações  com o comando</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>stty -a -f /dev/ttyd1</code></strong></pre><p>Ao alterar as configurações para esse
	    dispositivo, elas se manterão em efeito até
	    que o dispositivo seja fechado.  Quando ele for reaberto,
	    vai para o estado padrão.  Para fazer
	    mudanças nos ajustes padrão, pode-se abrir e
	    ajustar as configurações do <span class="quote">&#8220;<span class="quote">estado
	      inicial</span>&#8221;</span> do dispositivo.  Por exemplo, para ligar
	    o modo <acronym class="acronym">CLOCAL</acronym>, 8 bits, e o controle de
	    fluxo <acronym class="acronym">XON/XOFF</acronym> padrão para a
	    ttyd5, faça:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>stty -f /dev/ttyid5 clocal cs8 ixon ixoff</code></strong></pre><p>Um bom lugar para fazer isso é no
	    <code class="filename">/etc/rc.serial</code>.  Agora, uma
	    aplicação terá estas
	    configurações por padrão quando abrir
	    o <code class="filename">ttyd5</code>.  No entanto, pode-se ainda
	    modificar estas configurações a seu
	    gosto.</p><p>Você pode prevenir certas
	    configurações de serem modificadas por uma
	    aplicação fazendo ajustes no dispositivo de
	    <span class="quote">&#8220;<span class="quote">lock state</span>&#8221;</span>.  Por exemplo, para travar a
	    velocidade do <code class="filename">ttyd5</code> em 57600 bps,
	    faça:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>stty -f /dev/ttyld5 57600</code></strong></pre><p>Agora, uma aplicação, ao abrir o
	    <code class="filename">ttyd5</code>, se tentar modificar a
	    velocidade da porta, ficará travada a 57600
	    bps.</p><p>Naturalmente você deve garantir que os
	    dispositivos de estado inicial e o estado de trava
	    (<code class="literal">lock</code>) tenham permissão de
	    escrita apenas para o <code class="systemitem">root</code>.  O script
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=MAKEDEV&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">MAKEDEV</span>(8)</span></a> <span class="emphasis"><em>NÃO</em></span> faz isso
	    quando ele cria as entradas de dispositivos.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70476624"></a><a id="enable-dialup"></a><p><strong>15.8.</strong></p></td><td align="left" valign="top"><p>Como eu habilito logins dial-up no meu modem?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Então você quer tornar-se um provedor de
	    serviços internet, não é?  Primeiro,
	    você precisa de um ou mais modems que auto-respondam
	    às chamadas.  Seu modem precisa confirmar o
	    <span class="quote">&#8220;<span class="quote">carrier detect</span>&#8221;</span> quando ele for detectado e
	    não fazê-lo todo o tempo.  Ele
	    precisará desligar o telefone e resetar a si mesmo
	    quando a linha <acronym class="acronym">DTR</acronym> (Data Terminal
	    Ready) alternar de ligado para desligado.  Ele
	    provavelmente deve utilizar o controle de fluxo
	    <code class="filename">RTS/CTS</code> ou nenhum controle local de
	    fluxo.  Finalmente, ele deve utilizar uma velocidade
	    constante entre o computador e si mesmo, mas (para ser
	    simpático com seus usuários) ele deve
	    negociar uma velocidade entre si mesmo e o modem
	    remoto.</p><p>Para muitos modems compatíveis com o conjunto
	    de comandos do Hayes este comando criará estas
	    configurações e as armazenará na
	    memória não volátil:</p><pre class="programlisting">AT &amp;C1 &amp;D3 &amp;K3 &amp;Q6 S0=1 &amp;W</pre><p>Veja a seção <a class="link" href="serial.html#direct-at" title="15.12.">
	      enviando comandos AT</a> abaixo para mais
	    informações sobre como fazer estas
	    configurações sem o auxílio de um
	    programa de terminal MS-DOS.</p><p>Depois, faça uma entrada em
	    <code class="filename">/etc/ttys</code> (veja <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a>) para o
	    modem.  Este arquivo lista todas as portas nas quais o
	    sistema irá aguardar pelos logins.  Adicione uma
	    parecida com essa:</p><pre class="programlisting">ttyd1 "/usr/libexec/getty std.57600" dialup on insecure</pre><p>Esta linha indica que a segunda porta serial
	    (<code class="filename">/dev/ttyd1</code>) tem um modem
	    conectado e rodando a 57600 bps e sem paridade
	    (<code class="literal">std.57600</code>, que vem do arquivo
	    <code class="filename">/etc/gettytab</code>, veja
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a>).  O tipo de terminal para esta porta
	    é <code class="literal">dialup</code>.  A porta esta
	    <code class="literal">ligada</code> e é
	    <code class="literal">insegura</code> - quer dizer que o login do
	    usuário <code class="systemitem">root</code> não
	    é permitido.  Para portas dialin como esta,
	    utiliza-se a entrada
	    <code class="filename">ttydX</code></p><p>É uma prática comum utilizar
	    <code class="literal">dialup</code> como o tipo do terminal.  Muitos
	    usuários configuram um
	    <span class="foreignphrase"><em class="foreignphrase">prompt</em></span> para seus arquivos
	    <code class="filename">.profile</code> ou
	    <code class="filename">.login</code> para o tipo de terminal
	    existente se o tipo iniciante é dialup.  O exemplo
	    mostra a porta como insegura.  Para tornar-se
	    <code class="systemitem">root</code> nesta porta, você tem que
	    logar-se como um usuário regular, e então
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> para tornar-se <code class="systemitem">root</code>.  Se
	    você usar <code class="literal">seguro</code>, então o
	    <code class="systemitem">root</code> vai poder efetuar o login
	    diretamente.</p><p>Após efetuar as operações no
	    <code class="filename">/etc/ttys</code>, você precisa enviar
	    um sinal de <span class="foreignphrase"><em class="foreignphrase">hangup</em></span> ou
	    <acronym class="acronym">HUP</acronym> para o processo
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP 1</code></strong></pre><p>Esse comando forçará a releitura do
	    arquivo <code class="filename">/etc/ttys</code>.  O processo init
	    iniciará os processos getty em todas as portas
	    configuradas em <code class="literal">on</code> (ligadas).
	    Você pode descobrir se seus logins estão
	    disponíveis para sua porta digitando:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ps -ax | grep '[t]tyd1'</code></strong></pre><p>Você deve ver algo como:</p><pre class="programlisting">747 ??  I      0:00.04 /usr/libexec/getty std.57600 ttyd1</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70506832"></a><a id="dumb-terminal"></a><p><strong>15.9.</strong></p></td><td align="left" valign="top"><p>Como eu conecto um terminal burro ao meu
	    FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Se você esta usando outro computador como um
	    terminal de seu sistema FreeBSD, consiga um cabo
	    <span class="quote">&#8220;<span class="quote">null modem</span>&#8221;</span> para ser usado entre as duas
	    portas seriais.  Se você esta utilizando um terminal
	    próprio, veja as instruções que o
	    acompanham.</p><p>Então, modifique o
	    <code class="filename">/etc/ttys</code> (veja <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a>), como
	    acima.  Por exemplo, se você esta ligando um
	    terminal WYSE 50 à quinta porta serial, utilize uma
	    entrada como esta::</p><pre class="programlisting">ttyd4 "/usr/libexec/getty std.38400" wyse50 on secure</pre><p>Esse exemplo mostra que a porta em
	    <code class="filename">/dev/ttyd4</code> tem um terminal wyse50
	    conectado a 38400 bps (bits por segundo) sem nenhuma
	    paridade (<code class="literal">std.38400</code> de
	    <code class="filename">/etc/gettytab</code>, veja
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a>)) e o login do <code class="systemitem">root</code>
	    é permitido (<code class="literal">seguro</code>).</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70514512"></a><a id="cannot-tip"></a><p><strong>15.10.</strong></p></td><td align="left" valign="top"><p>Por que eu não posso executar o
	    <code class="command">tip</code> ou o <code class="command">cu</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Em seu sistema, os programas <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> e <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a>
	    são provavelmente executáveis somente pro
	    <code class="systemitem">uucp</code> e para o grupo
	    <code class="systemitem">dialer</code>.  Você pode utilizar o
	    grupo <code class="systemitem">dialer</code> para controlar quem
	    acessa o seu modem ou sistemas remotos.  Basta adicionar
	    você mesmo ao grupo dialer.</p><p>Alternativamente, você pode permitir a todos no
	    seu sistema executarem o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> e o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a>
	    digitando:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 4511 /usr/bin/cu</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 4511 /usr/bin/tip</code></strong></pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70536400"></a><a id="hayes-unsupported"></a><p><strong>15.11.</strong></p></td><td align="left" valign="top"><p>Meu modem modelo Hayes não é suportado -
	    o que eu posso fazer?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>De fato a manpage para o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> esta
	    desatualizada.  Há um discador generico do Hayes
	    já incorporado.  Apenas insira
	    <code class="literal">at=hayes</code> em seu arquivo
	    <code class="filename">/etc/remote</code> (veja
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=remote&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">remote</span>(5)</span></a>).</p><p>O drive do Hayes não é inteligente o
	    bastante para reconhecer algumas das avançadas
	    características dos modems mais novos - mensagens
	    como <code class="literal">BUSY</code>, <code class="literal">NO
	      DIALTONE</code>, ou <code class="literal">CONNECT 115200</code>
	    estarão apenas confundindo-o.  Você deve
	    desabilitar estas mensagens quando utilizar o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a>
	    (com o comando <code class="literal">ATX0&amp;W</code>).</p><p>Além disso, o timeout para discagem com o
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> é de 60 segundos.  Seu modem deve
	    utilizar um valor menor, senão o tip pensará
	    que existe um problema de comunicação.
	    Tente <code class="literal">ATS7=45&amp;W</code>.</p><p>De fato, como o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> não foi compilado
	    para suportar HAYES, essa funcionalidade não
	    é completamente suportada.  A solução
	    é editar o arquivo <code class="filename">tipconf.h</code>
	    no diretório
	    <code class="filename">/usr/src/usr.bin/tip/tip</code>.  Obviamente
	    você precisa da distribuição fonte
	    para fazer isso.</p><p>Edite a linha <code class="literal">#define HAYES 0</code>
	    alterando-a para <code class="literal">#define HAYES 1</code>.
	    Depois digite <code class="command">make</code> e <code class="command">make
	      install</code>.  Tudo funcionará bem depois
	    disso.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70557264"></a><a id="direct-at"></a><p><strong>15.12.</strong></p></td><td align="left" valign="top"><p>Como posso entrar nestes comandos AT?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Faça o que é chamado de uma entrada
	    <span class="quote">&#8220;<span class="quote">direta</span>&#8221;</span> no seu
	    <code class="filename">/etc/remote</code> (veja <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=remote&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">remote</span>(5)</span></a>).
	    Por exemplo, se o seu modem está definido na
	    primeira porta serial,
	    <code class="filename">/dev/cuaa0</code>, coloque a seguinte
	    linha:</p><pre class="programlisting">cuaa0:dv=/dev/cuaa0:br#19200:pa=none</pre><p>Utilize a taxa de velocidade mais alta que seu modem
	    suportar na capacidade br.  Então digite
	    <code class="command">tip cuaa0</code>
	    (veja <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a>) e você estará conectado ao
	    seu modem.</p><p>Se não existir nenhum
	    <code class="filename">/dev/cuaa0</code> no sistema,
	    faça isso:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /dev</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sh MAKEDEV cuaa0</code></strong></pre><p>Ou utilize cu como <code class="systemitem">root</code> com o
	    seguinte comando:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cu -lline -sspeed</code></strong></pre><p>com a <em class="replaceable"><code>line</code></em> sendo a porta
	    serial (por exemplo, <code class="filename">/dev/cuaa0</code>)
	    e <em class="replaceable"><code>speed</code></em> sendo a velocidade (por
	    exemplo, <code class="literal">57600</code>).  Quando terminar com
	    os comandos AT, digite <code class="literal">~.</code> para
	    sair.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70573904"></a><a id="gt-failure"></a><p><strong>15.13.</strong></p></td><td align="left" valign="top"><p>Porque o sinal <code class="literal">&lt;@&gt;</code> para a
	    capacidade pn não
	    funciona?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O sinal <code class="literal">&lt;@&gt;</code> no número
	    de telefone diz ao tip para procurar em
	    <code class="filename">/etc/phones</code> por um número de
	    telefone.  Mas o sinal <code class="literal">&lt;@&gt;</code>
	    é também um caracter especial em arquivos
	    como o <code class="filename">/etc/remote</code>.  Escape dele com
	    um <code class="literal">\</code> (barra invertida):</p><pre class="programlisting">pn=\@</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70579024"></a><a id="dial-command-line"></a><p><strong>15.14.</strong></p></td><td align="left" valign="top"><p>Como eu posso discar um número de telefone pela
	    linha de comando?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Coloque o que é chamado de uma entrada
	    <span class="quote">&#8220;<span class="quote">genérica</span>&#8221;</span> no arquivo
	    <code class="filename">/etc/remote</code> (veja <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=remote&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">remote</span>(5)</span></a>).
	    Por exemplo:</p><pre class="programlisting">tip115200|Disque para qualquer número em 115200 bps:\
        :dv=/dev/cuaa0:br#115200:at=hayes:pa=none:du:
tip57600|Disque para qualquer número em 57600 bps:\
        :dv=/dev/cuaa0:br#57600:at=hayes:pa=none:du:</pre><p>Depois você pode fazer algo como <code class="command">tip
	      -115200 5551234</code>.  Se preferir o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a> ao
	    invés do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a>, utilize uma entrada
	    genérica:</p><pre class="programlisting">cu115200|Use o cu para discar qualquer número em 115200bps:\
        :dv=/dev/cuaa1:br#57600:at=hayes:pa=none:du:</pre><p>e digite <code class="command">cu 5551234 -s
	      115200</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70590544"></a><a id="set-bps"></a><p><strong>15.15.</strong></p></td><td align="left" valign="top"><p>Tenho que definir a taxa de bits por segundo sempre
	    que fazer isso?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Coloque uma entrada para <code class="literal">tip1200</code> ou
	    para <code class="literal">cu1200</code>, mas vá em frente e
	    utilize quaisquer taxas de bps (bits por segundo) que
	    sejam apropriadas para a capacidade br.  O <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> diz
	    que um bom padrão é 1200 bps porquê
	    ele procura uma entrada <code class="literal">tip1200</code>.  De
	    qualquer forma, você não precisa utilizar
	    1200 bps.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70594512"></a><a id="terminal-server"></a><p><strong>15.16.</strong></p></td><td align="left" valign="top"><p>Como posso facilmente acessar vários hosts
	    através de um <code class="literal">terminal
	      server</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ao invés de esperar até a
	    conexão, digitando <code class="literal">CONNECT
	      host</code> sempre, use a
	    opção <code class="literal">cm</code> do tip.  Por
	    exemplo, estas entradas em
	    <code class="filename">/etc/remote</code> (veja
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=remote&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">remote</span>(5)</span></a>):</p><pre class="programlisting">pain|pain.deep13.com|Forrester's machine:\
        :cm=CONNECT pain\n:tc=deep13:
muffin|muffin.deep13.com|Frank's machine:\
        :cm=CONNECT muffin\n:tc=deep13:
deep13:Gizmonics Institute terminal server:\
        :dv=/dev/cuaa2:br#38400:at=hayes:du:pa=none:pn=5551234:</pre><p>permitirá a você digitar <code class="command">tip
	      pain</code> ou <code class="command">tip muffin</code> para se
	    conectar aos hosts <code class="systemitem">pain</code> ou
	    <code class="systemitem">muffin</code>; e <code class="command">tip deep13</code>
	    para se conectar ao <code class="literal">terminal
	      server</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70606160"></a><a id="tip-multiline"></a><p><strong>15.17.</strong></p></td><td align="left" valign="top"><p>O <span class="quote">&#8220;<span class="quote">tip</span>&#8221;</span> pode tentar discar mais de uma
	    linha por vez?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Normalmente esse é um problema tradicional onde
	    uma universidade possue várias linhas de modems e
	    vários milhares de estudantes tentando
	    usá-las...</p><p>Faça uma entrada para sua universidade
	    em<code class="filename">/etc/remote</code> (veja <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=remote&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">remote</span>(5)</span></a>) e
	    utilize a <code class="literal">&lt;\@&gt;</code> para a
	    característica <code class="literal">pn</code>:</p><pre class="programlisting">big-university:\
        :pn=\@:tc=dialout
dialout:\
        :dv=/dev/cuaa3:br#9600:at=courier:du:pa=none:</pre><p>Então, liste os números de telefones
	    para a universidade em <code class="filename">/etc/phones</code>
	    (veja <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=phones&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">phones</span>(5)</span></a>):</p><pre class="programlisting">big-university 5551111
big-university 5551112
big-university 5551113
big-university 5551114</pre><p>O <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> tentará usar cada um na ordem
	    listada, e depois desistirá.  Se você quer
	    manter-se tentando, execute o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> em um loop
	    while.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70615248"></a><a id="multi-controlp"></a><p><strong>15.18.</strong></p></td><td align="left" valign="top"><p>Por que eu tenho que pressionar duas vezes o
	    <span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>P</strong></span>
	    para enviar <span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>P</strong></span>
	    uma única vez?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>P</strong></span>
	    é o padrão para <span class="quote">&#8220;<span class="quote">force
	      character</span>&#8221;</span>, utilizado para dizer ao <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a>
	    que o próximo caracter é um dado literal.
	    Você pode definir o force character para qualquer
	    outro caracter com o escape <code class="literal">~s</code>, que
	    quer dizer <span class="quote">&#8220;<span class="quote">defina uma variável</span>&#8221;</span>.</p><p>Digite <code class="literal">~sforce=single-char
	      </code> seguido de uma
	    <span class="emphasis"><em>newline</em></span>.
	    <em class="replaceable"><code>single-charcaracter</code></em> é
	    qualquer caracter único.  Se você deixar
	    <em class="replaceable"><code>single-char</code></em>, então o
	    <span class="quote">&#8220;<span class="quote">force character</span>&#8221;</span> será o caracter
	    nulo, que você pode ao digitar <span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>2</strong></span>
	    ou <span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>SPACE</strong></span>.
	    Um valor muito bom para o
	    <em class="replaceable"><code>single-char</code></em> é <span class="keycap"><strong>SHIFT</strong></span>+<span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>6</strong></span>,
	    o qual eu vi sendo usado em alguns servidores de
	    terminais.</p><p>Você pode ter o <span class="quote">&#8220;<span class="quote">force character</span>&#8221;</span>
	    que você quiser especificando o seguinte em seu
	    arquivo <code class="filename">$HOME/.tiprc</code> o
	    seguinte:</p><pre class="programlisting">force=<em class="replaceable"><code>single-char</code></em></pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70637776"></a><a id="uppercase"></a><p><strong>15.19.</strong></p></td><td align="left" valign="top"><p>Por que tudo o que eu digito inesperadamente
	    está em CAIXA ALTA?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Você deve ter pressionado <span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>A</strong></span>,
	    o <span class="quote">&#8220;<span class="quote">raise character do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a></span>&#8221;</span>,
	    especialmente projetado para pessoas com teclas
	    <span class="keycap"><strong>Caps Lock</strong></span> que não funcionam.  Use
	    o <code class="literal">~s</code> como acima, e defina a
	    variável <span class="quote">&#8220;<span class="quote">raisechar</span>&#8221;</span> para algo
	    razoável.  De fato, você pode definir isso
	    para o <span class="emphasis"><em>force character</em></span> também,
	    se você nunca espera utilizar ambas as
	    características.</p><p>Aqui está um exemplo de arquivo
	    <code class="filename">.tiprc</code> perfeito para os
	    usuários de Emacs que precisam digitar muitos
	    <span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>2</strong></span>
	    e <span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>A</strong></span>:</p><pre class="programlisting">force=^^
raisechar=^^</pre><p>O ^^ é obtido com <span class="keycap"><strong>SHIFT</strong></span>+<span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>6</strong></span>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70656080"></a><a id="tip-filetransfer"></a><p><strong>15.20.</strong></p></td><td align="left" valign="top"><p>Como eu posso transferir arquivos com o
	    <code class="command">tip</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Se você está conversando com outro
	    sistema Unix, você pode enviar e receber arquivos
	    com <code class="literal">~p</code> (put) e com
	    <code class="literal">~t</code> (take).  Estes comandos executam o
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cat</span>(1)</span></a> e o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=echo&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">echo</span>(1)</span></a> no sistema remoto para
	    aceitar e enviar arquivos.  Sua sintaxe é:</p><pre class="programlisting">~p &lt;local-file&gt; [&lt;remote-file&gt;]
~t &lt;remote-file&gt; [&lt;local-file&gt;]</pre><p>Não há nenhuma checagem de erro,
	    então você provavelmente deve usar um outro
	    protocolo, como o zmodem</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70665808"></a><a id="zmodem-tip"></a><p><strong>15.21.</strong></p></td><td align="left" valign="top"><p>Como eu posso executar o zmodem com o
	    <span class="application">tip</span>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Primeiro, instale um dos programas zmodem da
	    coleção de <code class="literal">ports</code> (tais
	    como <span class="application">lrzsz</span> ou o
	    <span class="application">rzsz</span>).</p><p>Para receber arquivos, inicie o programa de envio no
	    destino remoto.  Então, pressione ENTER e digite
	    <code class="literal">~C rz</code> (ou <code class="literal">~C lrz</code>
	    caso tenha instalado o <span class="application">lrzsz</span>)
	    para iniciar o recebimento local</p><p>Para enviar arquivos, inicie o programa do lado
	    remoto.  Depois, aperte ENTER e digite <code class="literal">~C sz
	      arquivos</code> (ou
	    <code class="literal">~C lsz
	      arquivos</code>) para
	    envia-los ao sistema remoto.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70676432"></a><a id="cannot-find-serial"></a><p><strong>15.22.</strong></p></td><td align="left" valign="top"><p>O FreeBSD pode vir a não encontrar minhas
	    portas seriais, mesmo quando as
	    configurações estão corretas?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Sim, se sua placa-mãe for Acer UARTS.  Elas
	    não escaneiam corretamente o barramento serial,
	    não permitindo que o FreeBSD encontre as Serial
	    Input/Output (sio) da placa.  O patch disponível em
	    <a class="link" href="http://www.lemis.com/serial-port-patch.html" target="_top">www.lemis.com</a>
	    pode corrigir esse problema.</p></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ppp.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="misc.html">Próxima</a></td></tr><tr><td width="40%" align="left" valign="top">Capítulo 14. PPP </td><td width="20%" align="center"><a accesskey="h" href="index.html">Principal</a></td><td width="40%" align="right" valign="top"> Capítulo 16. Perguntas Variadas</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Este, e outros documentos, podem ser obtidos em
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Para perguntas sobre FreeBSD, leia a
    <a href="http://www.FreeBSD.org/docs.html">documentação</a> antes de contatar
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Para perguntas sobre esta documentação, envie e-mail para
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>