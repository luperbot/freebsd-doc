<?xml version="1.0" encoding="koi8-r"?>
<!--
     The FreeBSD Russian Documentation Project

     $FreeBSD$

     Original revision: r46469
-->
<!--
Translation:	Taras Korenko,
		Alexander Nedotsukov
 -->
<article xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:lang="ru">
  <info><title xmlns:xlink="http://www.w3.org/1999/xlink">Универсальная Система Печати Unix на FreeBSD</title>
    

    <authorgroup xmlns:xlink="http://www.w3.org/1999/xlink">
      <author xmlns:xlink="http://www.w3.org/1999/xlink"><personname xmlns:xlink="http://www.w3.org/1999/xlink"><firstname xmlns:xlink="http://www.w3.org/1999/xlink">Chess</firstname><surname xmlns:xlink="http://www.w3.org/1999/xlink">Griffin</surname></personname><affiliation xmlns:xlink="http://www.w3.org/1999/xlink">
	  <address xmlns:xlink="http://www.w3.org/1999/xlink"><email xmlns:xlink="http://www.w3.org/1999/xlink">chess@chessgriffin.com</email></address>
	</affiliation></author>
    </authorgroup>

    <legalnotice xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="trademarks" role="trademarks">
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD это зарегистрированная торговая
  марка FreeBSD Foundation.</para>
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">Многие из обозначений, используемые
  производителями и продавцами для обозначения своих продуктов, заявляются
  в качестве торговых марок.  Когда такие обозначения появляются в этом
  документе, и Проекту FreeBSD известно о торговой марке, к обозначению
  добавляется знак <quote xmlns:xlink="http://www.w3.org/1999/xlink">TM</quote> или
  <quote xmlns:xlink="http://www.w3.org/1999/xlink">(R)</quote>.</para>
    </legalnotice>

    <pubdate xmlns:xlink="http://www.w3.org/1999/xlink">$FreeBSD$</pubdate>

    <releaseinfo xmlns:xlink="http://www.w3.org/1999/xlink">$FreeBSD$</releaseinfo>

    <abstract xmlns:xlink="http://www.w3.org/1999/xlink">
      <para xmlns:xlink="http://www.w3.org/1999/xlink">Эта статья посвящена конфигурированию Универсальной Системы Печати
	UNIX (CUPS) на FreeBSD.</para>
    </abstract>
  </info>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Знакомимся с Универсальной Системой Печати UNIX (CUPS)</title>

    <indexterm xmlns:xlink="http://www.w3.org/1999/xlink"><primary xmlns:xlink="http://www.w3.org/1999/xlink">printing</primary></indexterm>
    <indexterm xmlns:xlink="http://www.w3.org/1999/xlink"><primary xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</primary></indexterm>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Универсальная Система Печати UNIX (Common Unix Printing System, или
      сокращенно <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application>), предоставляет переносимую
      среду печати для <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">UNIX</trademark> и <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">UNIX</trademark>-подобных операционных систем.  Она была
      разработана компанией Easy Software Products, чтобы предоставить
      стандартное решение в печати для всех разработчиков и пользователей
      <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">UNIX</trademark>.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Универсальная Система Печати UNIX использует протокол межсетевой
      печати (Internet Printing Protocol, <acronym xmlns:xlink="http://www.w3.org/1999/xlink">IPP</acronym>) как
      основу для управления заданиями на печать и очередями.  Также
      частично поддерживаются следующие протоколы: <acronym xmlns:xlink="http://www.w3.org/1999/xlink">LPD</acronym>,
      <acronym xmlns:xlink="http://www.w3.org/1999/xlink">SMB</acronym> и AppSocket (также известный как JetDirect).
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> дает возможность обзора сетевых
      принтеров и использования опций, базирующихся на ПостСкрипт Описании
      Принтеров (PostScript Printer Definition, <acronym xmlns:xlink="http://www.w3.org/1999/xlink">PPD</acronym>),
      чтобы поддерживать в <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">UNIX</trademark> общепринятые традиции печати.  В результате
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> идеально подходит для совместного
      использования принтеров в смешанной среде из FreeBSD, <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Linux</trademark>,
      <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Mac OS</trademark> X или <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark>.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Официальный сайт Универсальной Системы Печати UNIX -
	<uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.cups.org/">http://www.cups.org/</uri>.</para>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups-install">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Установка сервера печати CUPS</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Для установки <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> используя пакет,
      запустите на выполнение такую команду:</para>

    <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">pkg install cups</userinput></screen>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Другие необязательные, но рекомендуемые к установке
      пакеты это <package xmlns:xlink="http://www.w3.org/1999/xlink">print/gutenprint-cups</package>
      и <package xmlns:xlink="http://www.w3.org/1999/xlink">print/hplip</package>, каждый из которых
      добавляет драйвера и утилиты для разнообразных принтеров.  После
      установки файлы конфигурации <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> могут быть
      найдены в директории <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/cups</filename>.</para>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups-configuring-server">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Настройка сервера печати CUPS</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Чтобы настроить сервер <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> необходимо
      отредактировать несколько конфигурационных файлов.  Для начала создайте
      или исправьте файл <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/devfs.rules</filename> и добавьте
      следующую информацию для того, чтобы установить соответствующие права
      на все потенциальные файлы устройств принтеров и связать принтеры
      с группой пользователей <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="groupname">cups</systemitem>:</para>

    <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">[system=10]
add path 'unlpt*' mode 0660 group cups
add path 'ulpt*' mode 0660 group cups
add path 'lpt*' mode 0660 group cups
add path 'usb/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X</replaceable>.<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">Y</replaceable>.<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">Z</replaceable>' mode 0660 group cups</programlisting>

    <note xmlns:xlink="http://www.w3.org/1999/xlink">
      <para xmlns:xlink="http://www.w3.org/1999/xlink">Замените <replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X</replaceable>,
	<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">Y</replaceable> и <replaceable xmlns:xlink="http://www.w3.org/1999/xlink">Z</replaceable> номерами
	соответствующего принтеру целевого устройства USB, отображаемого
	в каталоге <filename xmlns:xlink="http://www.w3.org/1999/xlink">/dev/usb</filename>.  Чтобы
	найти требуемые значения, просмотрите вывод <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">dmesg</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> и найдите
	связанное с вашим принтером имя специального устройства
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">ugen<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X</replaceable>.<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">Y</replaceable></filename>,
	последнее будет символической ссылкой на искомое устройство в каталоге
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">/dev/usb</filename>.</para>
    </note>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Затем, добавьте следующие две записи в
      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/rc.conf</filename>:</para>

    <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">cupsd_enable="YES"
devfs_system_ruleset="system"</programlisting>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Эти две записи будут запускать сервер печати
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> во время загрузки системы и
      применять локальное правило devfs, созданное выше.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Для того, чтобы печать <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> стала
      доступна для некоторых <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Microsoft</trademark> <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark> клиентов, необходимо
      раскомментировать следующую запись в
      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/cups/mime.types</filename> и
      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/cups/mime.convs</filename>:</para>

    <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">application/octet-stream</programlisting>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">По окончанию внесения изменений службы <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">devfs</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> и
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> необходимо перезапустить, для чего
      перезагрузите операционную систему или выполните от пользователя
      <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="username">root</systemitem> следующие две команды:</para>

    <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">/etc/rc.d/devfs restart</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/rc.d/cupsd restart</userinput></screen>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups-configuring-printers">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Настройка принтеров на сервере печати CUPS</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">После того, как система <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> была
      установлена и сконфигурирована, системный администратор может начать
      конфигурирование локальных принтеров, подключенных к серверу печати
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application>.  Эта часть процесса очень похожа,
      если не идентична настройке принтеров <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application>
      в других <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">UNIX</trademark>-подобных операционных системах, таких как
      дистрибутивы <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Linux</trademark>.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Основным способом управления и администрирования сервера
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> является веб-интерфейс,
      на который можно попасть запустив веб-браузер и набрав
      <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://localhost:631">http://localhost:631</uri> в его адресной строке.
      Если сервер <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> находится на другой
      машине в сети, замените <systemitem xmlns:xlink="http://www.w3.org/1999/xlink">localhost</systemitem> на
      <acronym xmlns:xlink="http://www.w3.org/1999/xlink">IP</acronym> адрес сервера.  Веб-интерфейс
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> достаточно очевиден, там есть разделы
      для управления принтерами и заданиями на печать, авторизацией
      пользователей и т.п.  Кроме того, в правой части страницы
      администрирования есть несколько флажков (check-box), дающих
      удобный доступ к часто меняемым установкам, таким как разрешение
      публичного доступа к подключенным к системе принтерам, предоставление
      удаленного управления сервером <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application>,
      изменение уровня доступа пользователей к принтерам и их заданиям
      на печать.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Добавление принтера в общем такое же простое, как нажатие
      <quote xmlns:xlink="http://www.w3.org/1999/xlink">Add Printer</quote> на странице администрирования
      веб-интерфейса сервера <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> или как нажатие
      одной из кнопок <quote xmlns:xlink="http://www.w3.org/1999/xlink">New Printers Found</quote> на той же
      странице администрирования.  Когда перед вами предстанет выпадающий
      список <quote xmlns:xlink="http://www.w3.org/1999/xlink">Device</quote>, просто выберите требуемый локально
      подключенный принтер, а дальше следуйте подсказкам интерфейса.
      В случае если были установлены порты или пакеты
      <package xmlns:xlink="http://www.w3.org/1999/xlink">print/gutenprint-cups</package> или
      <package xmlns:xlink="http://www.w3.org/1999/xlink">print/hplip</package>, как указывалось выше,
      дополнительные драйвера печати будут доступны на последующих
      страницах, что может обеспечить большую надежность и расширенные
      возможности.</para>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups-clients">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Конфигурирование клиентов CUPS</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">После того, как сервер <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> был настроен,
      принтеры добавлены и сделаны доступными в сети, следующий шаг -
      это настройка клиентов или машин, которые будут иметь доступ к серверу
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application>.  Если у вас единственный настольный
      компьютер, который работает одновременно и сервером и клиентом,
      то в большинстве этой информации вы не нуждаетесь.</para>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups-clients-unix">
      <title xmlns:xlink="http://www.w3.org/1999/xlink"><trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">UNIX</trademark> клиенты</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">На <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">UNIX</trademark> клиентах также потребуется установить
	<application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application>.  После установки системы
	печати на клиенте, <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application>-принтеры,
	присутствующие в сети, чаще всего автоматически находятся
	менеджерами принтеров разных графических оболочек, таких как
	<application xmlns:xlink="http://www.w3.org/1999/xlink">GNOME</application> или <application xmlns:xlink="http://www.w3.org/1999/xlink">KDE</application>.
	В качестве альтернативы, вы можете воспользоваться веб-интерфейсом
	<application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> на клиентской машине по адресу
	<uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://localhost:631">http://localhost:631</uri> и на странице
	администрирования выбрать <quote xmlns:xlink="http://www.w3.org/1999/xlink">Add Printer</quote>.  Когда
	перед вами предстанет выпадающий список <quote xmlns:xlink="http://www.w3.org/1999/xlink">Device</quote>,
	просто выберите сетевой <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> принтер, если
	он был обнаружен автоматически, или выберите <literal xmlns:xlink="http://www.w3.org/1999/xlink">ipp</literal>
	или <literal xmlns:xlink="http://www.w3.org/1999/xlink">http</literal> и введите <acronym xmlns:xlink="http://www.w3.org/1999/xlink">IPP</acronym> или
	<acronym xmlns:xlink="http://www.w3.org/1999/xlink">HTTP</acronym> адрес (<acronym xmlns:xlink="http://www.w3.org/1999/xlink">URI</acronym>) сетевого
	<application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> принтера:</para>

	<programlisting xmlns:xlink="http://www.w3.org/1999/xlink">ipp://<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">server-name-or-ip</replaceable>/printers/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">printername</replaceable></programlisting>

	<programlisting xmlns:xlink="http://www.w3.org/1999/xlink">http://<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">server-name-or-ip</replaceable>:631/printers/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">printername</replaceable></programlisting>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Если <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> клиент не находит в сети
	принтеры, доступные через сервер <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application>,
	то иногда помогает создание или изменение файла
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/cups/client.conf</filename> с добавлением
	единственной записи, подобной следующей:</para>

      <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">ServerName <replaceable xmlns:xlink="http://www.w3.org/1999/xlink">server-ip</replaceable></programlisting>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">В этом случае <replaceable xmlns:xlink="http://www.w3.org/1999/xlink">server-ip</replaceable> необходимо
	заменить на <acronym xmlns:xlink="http://www.w3.org/1999/xlink">IP</acronym> адрес сервера
	<application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> в сети.</para>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups-clients-windows">
      <title xmlns:xlink="http://www.w3.org/1999/xlink"><trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark>-клиенты</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Версии <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark>, предшествующие XP, не имели встроенной
	поддержки протокола <acronym xmlns:xlink="http://www.w3.org/1999/xlink">IPP</acronym>.  Однако <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark> XP
	и более поздние версии уже обладают такой возможностью.  Следовательно,
	добавить <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> принтер в этих версиях
	<trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark> довольно просто.  В большинстве случаев, администратору
	<trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark> потребуется запустить мастера установки принтера
	(<literal xmlns:xlink="http://www.w3.org/1999/xlink">Add Printer</literal>) выбрать сетевой принтер
	(<literal xmlns:xlink="http://www.w3.org/1999/xlink">Network Printer</literal>), а затем ввести
	<acronym xmlns:xlink="http://www.w3.org/1999/xlink">URI</acronym> следующего формата:</para>

      <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">http://<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">server-name-or-ip</replaceable>:631/printers/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">printername</replaceable></programlisting>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Если используется версия <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark> без поддержки протокола
	<acronym xmlns:xlink="http://www.w3.org/1999/xlink">IPP</acronym>, то общим случаем подключения к
	<application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application>-принтеру будет совместное
	использование <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> и
	<package xmlns:xlink="http://www.w3.org/1999/xlink">net/samba3</package>.  Описание этой
	возможности выходит за рамки данной статьи.</para>
    </sect2>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups-troubleshooting">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Устранение неполадок с CUPS</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Проблемы c <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> часто возникают
      из-за неверных прав доступа.  Сначала дважды проверьте права доступа
      в <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">devfs</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> (сверьтесь с уже описанными выше).  Затем, проверьте
      реальные права устройств, созданных в файловой системе.  Также бывает
      полезным удостовериться, что ваш пользователь входит в группу
      <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="groupname">cups</systemitem>.  Если у вас складывается впечатление,
      что флажки прав доступа на странице администрирования веб-интерфейса
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> не работают, то иным решением
      может быть резервное копирование конфигурационного файла
      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/cups/cupsd.conf</filename> и редактирование
      разных опций конфигурации с подбором их комбинаций.
      Ниже приведено содержимое тестового файла конфигурации
      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/cups/cupsd.conf</filename>.
      Пожалуйста, обратите внимание на то, что безопасность в этом примере
      <filename xmlns:xlink="http://www.w3.org/1999/xlink">cupsd.conf</filename> была пожертвована в угоду простоте
      настройки; как только администратор успешно подсоединится к серверу
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> и сконфигурирует клиентов,
      рекомендуется пересмотреть данную конфигурацию и добавить разграничение
      доступа.</para>

    <programlisting xmlns:xlink="http://www.w3.org/1999/xlink"># Log general information in error_log - change "info" to "debug" for
# troubleshooting...
LogLevel info

# Administrator user group...
SystemGroup wheel

# Listen for connections on Port 631.
Port 631
#Listen localhost:631
Listen /var/run/cups.sock

# Show shared printers on the local network.
Browsing On
BrowseOrder allow,deny
#BrowseAllow @LOCAL
BrowseAllow 192.168.1.* # change to local LAN settings
BrowseAddress 192.168.1.* # change to local LAN settings

# Default authentication type, when authentication is required...
DefaultAuthType Basic
DefaultEncryption Never # comment this line to allow encryption

# Allow access to the server from any machine on the LAN
&lt;Location /&gt;
  Order allow,deny
  #Allow localhost
  Allow 192.168.1.* # change to local LAN settings
&lt;/Location&gt;

# Allow access to the admin pages from any machine on the LAN
&lt;Location /admin&gt;
  #Encryption Required
  Order allow,deny
  #Allow localhost
  Allow 192.168.1.* # change to local LAN settings
&lt;/Location&gt;

# Allow access to configuration files from any machine on the LAN
&lt;Location /admin/conf&gt;
  AuthType Basic
  Require user @SYSTEM
  Order allow,deny
  #Allow localhost
  Allow 192.168.1.* # change to local LAN settings
&lt;/Location&gt;

# Set the default printer/job policies...
&lt;Policy default&gt;
  # Job-related operations must be done by the owner or an adminstrator...
  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs \
Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription \
Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job \
CUPS-Move-Job&gt;
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # All administration operations require an adminstrator to authenticate...
  &lt;Limit Pause-Printer Resume-Printer Set-Printer-Attributes Enable-Printer \
Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs \
Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer \
Promote-Job Schedule-Job-After CUPS-Add-Printer CUPS-Delete-Printer CUPS-Add-Class \
CUPS-Delete-Class CUPS-Accept-Jobs CUPS-Reject-Jobs CUPS-Set-Default&gt;
    AuthType Basic
    Require user @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # Only the owner or an administrator can cancel or authenticate a job...
  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit All&gt;
    Order deny,allow
  &lt;/Limit&gt;
&lt;/Policy&gt;</programlisting>
  </sect1>

  <index xmlns:xlink="http://www.w3.org/1999/xlink"/>
</article>
