<?xml version="1.0" encoding="koi8-r"?>
<!--
     The FreeBSD Russian Documentation Project

     $FreeBSDru: frdp/doc/ru_RU.KOI8-R/articles/releng/article.xml,v 1.15 2006/03/22 16:48:41 marck Exp $

     Original revision: r39632
-->
<article xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:lang="ru">
  

  <info><title xmlns:xlink="http://www.w3.org/1999/xlink">Подготовка релизов FreeBSD</title>
    

    <confgroup xmlns:xlink="http://www.w3.org/1999/xlink">
      <confdates xmlns:xlink="http://www.w3.org/1999/xlink">Ноябрь 2001</confdates>

      <conftitle xmlns:xlink="http://www.w3.org/1999/xlink">BSDCon Europe</conftitle>
    </confgroup>

    <authorgroup xmlns:xlink="http://www.w3.org/1999/xlink">
      <author xmlns:xlink="http://www.w3.org/1999/xlink"><personname xmlns:xlink="http://www.w3.org/1999/xlink"><firstname xmlns:xlink="http://www.w3.org/1999/xlink">Murray</firstname><surname xmlns:xlink="http://www.w3.org/1999/xlink">Stokely</surname></personname><personblurb xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Я участвовал в разработке продуктов на основе FreeBSD с
	    1997 года в компаниях Walnut Creek CDROM, BSDi, а теперь Wind River
	    Systems.  FreeBSD 4.4 была первым официальным релизом FreeBSD, в
	    выпуске которого я принимал значительное участие.</para>
	</personblurb><affiliation xmlns:xlink="http://www.w3.org/1999/xlink">
	  <address xmlns:xlink="http://www.w3.org/1999/xlink">
	    <email xmlns:xlink="http://www.w3.org/1999/xlink">murray@FreeBSD.org</email>

	    <otheraddr xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.FreeBSD.org/~murray/">http://www.FreeBSD.org/~murray/</otheraddr>
	  </address>
	</affiliation></author>
    </authorgroup>

    <legalnotice xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="trademarks" role="trademarks">
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD это зарегистрированная торговая
  марка FreeBSD Foundation.</para>
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">CVSup это зарегистрированная торговая
  марка John D. Polstra.</para>
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">Intel, Celeron, EtherExpress, i386,
  i486, Itanium, Pentium и Xeon это торговые марки или зарегистрированные
  торговые марки Intel Corporation или ее дочерних компаний в Соединенных
  Штатах и других странах.</para>
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">Многие из обозначений, используемые
  производителями и продавцами для обозначения своих продуктов, заявляются
  в качестве торговых марок.  Когда такие обозначения появляются в этом
  документе, и Проекту FreeBSD известно о торговой марке, к обозначению
  добавляется знак <quote xmlns:xlink="http://www.w3.org/1999/xlink">TM</quote> или
  <quote xmlns:xlink="http://www.w3.org/1999/xlink">(R)</quote>.</para>
    </legalnotice>

    <pubdate xmlns:xlink="http://www.w3.org/1999/xlink">$FreeBSD$</pubdate>

    <releaseinfo xmlns:xlink="http://www.w3.org/1999/xlink">$FreeBSD$</releaseinfo>

    <abstract xmlns:xlink="http://www.w3.org/1999/xlink">
      <para xmlns:xlink="http://www.w3.org/1999/xlink">В этой статье описывается подход, который используется группой
	подготовки релизов FreeBSD для создания качественных версий
	Операционной Системы FreeBSD.  В ней детально описывается методология,
	используемая для официальных релизов FreeBSD и рассказывается об
	инструментах, доступных тем, кто интересуется созданием
	модифицированных релизов FreeBSD для тиражирования внутри организации
	или в коммерческих целях.</para>
    </abstract>
  </info>

  <!-- Введение -->

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="introduction">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Введение</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Разработка FreeBSD представляет собой весьма открытый процесс.
      FreeBSD составляется в результате общих усилий тысяч людей по всему миру.
      Проект FreeBSD предоставляет анонимный публичный доступ по протоколу
      <acronym xmlns:xlink="http://www.w3.org/1999/xlink">CVS</acronym>[1], так что любой может получить доступ к журналу
      изменений, разницам (патчам) между ветками разработки и другим
      продвинутым возможностям, которые даёт строгое управление исходным кодом.
      Это сильно помогает в привлечении к FreeBSD всё большего количества
      талантливых разработчиков.  Однако, и я думаю, что все со мной
      согласятся, наступит хаос, если доступ по записи будет открыт всем в
      Internet.  Поэтому только <quote xmlns:xlink="http://www.w3.org/1999/xlink">избранная</quote> группа примерно из
      300 человек имеет доступ по записи в <acronym xmlns:xlink="http://www.w3.org/1999/xlink">CVS</acronym>-хранилище.
      Эти <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">коммиттеры[5]</emphasis> отвечают в целом за разработку
      FreeBSD.  Выбираемая из самых заслуженных разработчиков <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">группа
      правления[6]</emphasis> обеспечивает некоторый уровень управления
      проектом.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Темп разработок, ведущихся во <systemitem xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD</systemitem>, оставляет мало времени на тщательную
      доводку системы до качества продуктивного релиза.  Для решения этой
      проблемы разработка ведётся в два параллельных потока.  Основной веткой
      разработки является <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">HEAD</emphasis>, она же <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">основная
      линия</emphasis> нашего дерева CVS, известная также под именем
      <quote xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD-CURRENT</quote> или, для краткости,
      <quote xmlns:xlink="http://www.w3.org/1999/xlink">-CURRENT</quote>.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Поддерживается и более стабильная ветка, известная как
      <quote xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD-STABLE</quote> или, для краткости, <quote xmlns:xlink="http://www.w3.org/1999/xlink">-STABLE</quote>.
      Обе ветки находятся в основном CVS-хранилище в Калифорнии и реплицируются
      при помощи <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application>[2] на
      зеркала по всему миру.  FreeBSD-CURRENT[7] является <quote xmlns:xlink="http://www.w3.org/1999/xlink">передним
      краем</quote> работ над FreeBSD, через который попадают все изменения в
      системе.  FreeBSD-STABLE является веткой разработки, из которой создаются
      основные релизы.  В эту ветку изменения попадают разными путями, и
      предполагается, что сначала они попали в FreeBSD-CURRENT, где были
      тщательно протестированы сообществом наших пользователей.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">В промежутке между релизами машинами Проекта FreeBSD, выделенными для
      построения системы, ежемесячно автоматически собираются снэпшоты,
      которые доступны для закачки по адресу <systemitem xmlns:xlink="http://www.w3.org/1999/xlink">ftp://ftp.freebsd.org/pub/FreeBSD/snapshots/</systemitem>.
      Общедоступность
      снэпшотов бинарных релизов, а также желание сообщества наших
      пользователей отслеживать работу над -STABLE при помощи CVSup и
      <quote xmlns:xlink="http://www.w3.org/1999/xlink"><command xmlns:xlink="http://www.w3.org/1999/xlink">make</command> <buildtarget>world</buildtarget></quote>[7]
      помогает поддержать весьма хорошее качество FreeBSD-STABLE, даже до
      выполнения мероприятий проверки качества, предваряющих выпуск основных
      релизов.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">В процессе выпуска релиза пользователи постоянно присылают сообщения
      об ошибках и пожелания по расширению функциональности.  Сообщения о
      проблемах попадают в нашу базу данных <application xmlns:xlink="http://www.w3.org/1999/xlink">GNATS</application>[8] по электронной почте, посредством
      утилиты <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">send-pr</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">1</manvolnum></citerefentry> или через Web-интерфейс, доступный по адресу
      <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.FreeBSD.org/send-pr.html">http://www.FreeBSD.org/send-pr.html</uri>.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Для удовлетворения наших самых консервативно настроенных
      пользователей, начиная с FreeBSD 4.3, появились ветки для отдельных
      релизов.  Эти ветки создаются вскоре после того, как выпускается
      окончательный релиз.  После его выхода в ветку релиза помещаются только
      самые критичные исправления и добавления, касающиеся безопасности.  Кроме
      обновлений исходных текстов посредством CVS, для систем веток
      <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">RELENG_<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X</replaceable>_<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">Y</replaceable></emphasis>
      имеются и бинарные наборы патчей.</para>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Что обсуждается в данном документе?</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">В последующих главах этой статьи обсуждаются:</para>

      <variablelist xmlns:xlink="http://www.w3.org/1999/xlink">
	<varlistentry xmlns:xlink="http://www.w3.org/1999/xlink">
	  <term xmlns:xlink="http://www.w3.org/1999/xlink"><xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="release-proc"/></term>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Различные этапы процесса подготовки релиза вплоть до
	      построения актуальной системы.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xmlns:xlink="http://www.w3.org/1999/xlink">
	  <term xmlns:xlink="http://www.w3.org/1999/xlink"><xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="release-build"/></term>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Процесс сборки.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xmlns:xlink="http://www.w3.org/1999/xlink">
	  <term xmlns:xlink="http://www.w3.org/1999/xlink"><xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="extensibility"/></term>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Как базовый релиз может быть расширен
	       третьими сторонами.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xmlns:xlink="http://www.w3.org/1999/xlink">
	  <term xmlns:xlink="http://www.w3.org/1999/xlink"><xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="lessons-learned"/></term>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Некоторые из уроков, полученных при выпуске релиза
	      FreeBSD 4.4.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xmlns:xlink="http://www.w3.org/1999/xlink">
	  <term xmlns:xlink="http://www.w3.org/1999/xlink"><xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="future"/></term>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Направления будущих работ.</para>
	  </listitem>
	</varlistentry>
      </variablelist>
    </sect2>

  </sect1>

  <!-- Процесс выпуска релиза -->
  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="release-proc">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Процесс выпуска релиза</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Новые релизы FreeBSD выпускаются из ветки -STABLE с интервалом
      примерно в четыре месяца.  Процесс выпуска релизов FreeBSD начинается за
      45 дней до предполагаемой даты релиза с того, что ответственный за релиз
      посылает сообщение по электронной почте в адрес списков рассылки для
      разработчиков, чтобы напомнить последним о наличии всего лишь 15 дней на
      внесение новых изменений до момента заморозки кода.  В этот период многие
      разработчики выполняют действия, известные как
      <quote xmlns:xlink="http://www.w3.org/1999/xlink">MFC-переносы</quote>.  <acronym xmlns:xlink="http://www.w3.org/1999/xlink">MFC</acronym> означает
      <quote xmlns:xlink="http://www.w3.org/1999/xlink">Merge From CURRENT</quote> (перенос из CURRENT) и описывает
      процесс переноса протестированных изменений из нашего дерева разработки
      -CURRENT в наше дерево -STABLE.</para>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Просмотр кода</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">За тридцать дней до предполагаемого релиза хранилище исходных
	текстов переводится в режим <quote xmlns:xlink="http://www.w3.org/1999/xlink">стабилизации кода</quote>.  В этот
	период все изменения в дереве -STABLE должны подтверждаться Группа Выпуска Релизов FreeBSD <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">re@FreeBSD.org</email>.
	В первый 15-дневный период разрешены следующие типы изменений:</para>

      <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Исправления ошибок.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Обновление документации.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Исправления любого характера, касающиеся безопасности.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Незначительные исправления в драйверах устройств, такие, как,
	    например, добавление новых ID устройств.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Любые другие изменения, которые одобряет группа подготовки
	    релиза, с учётом потенциального риска.</para>
	</listitem>
      </itemizedlist>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">После первых 15 дней стабилизации кода выпускается
	<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">предварительный релиз</emphasis>, предназначенный для широкого
	тестирования, а код переводится в состояние <quote xmlns:xlink="http://www.w3.org/1999/xlink">заморозки</quote>,
	когда становится гораздо труднее доказывать необходимость внесения
	новых изменений в систему, если они не касаются исправления серьёзных
	ошибок или информационной безопасности.  Во время заморозки кода каждую
	неделю выпускается не менее одной предварительной версии релиза, до тех
	пор, пока не будет готов окончательный вариант релиза.  В дни,
	предшествующие выпуску окончательного релиза, группа его подготовки
	работает в постоянном контакте со службой безопасности и людьми,
	поддерживающими документацию и порты, чтобы обеспечить доступность всех
	компонентов, необходимых для успешного выпуска релиза.</para>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Контрольный список для проверки окончательного релиза</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">После того, как для широкого тестирования было выпущено несколько
	предварительных релизов и все основные проблемы были решены, может
	начаться процесс <quote xmlns:xlink="http://www.w3.org/1999/xlink">шлифовки</quote> окончательного релиза.</para>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="rel-branch">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Создание ветки релиза</title>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Как сказано во вводной части, ветка
	  <literal xmlns:xlink="http://www.w3.org/1999/xlink">RELENG_<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X</replaceable>_<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">Y</replaceable></literal>
	  является сравнительно новым добавлением в нашей методологии
	  подготовки релизов.  Первым шагом в создании этой ветки является
	  проверка того, что вы работаете с самой последней версией исходных
	  текстов <literal xmlns:xlink="http://www.w3.org/1999/xlink">RELENG_<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X</replaceable></literal>, из
	  <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">которой</emphasis> вы хотите создать новую ветку.</para>

	<screen xmlns:xlink="http://www.w3.org/1999/xlink">/usr/src<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cvs update -rRELENG_4 -P -d</userinput></screen>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Следующим шагом является создание <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">тэга</emphasis> точки
	  ответвления, чтобы диффы облегчили работу с началом ветки в CVS:</para>

	<screen xmlns:xlink="http://www.w3.org/1999/xlink">/usr/src<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cvs rtag -rRELENG_4 RELENG_4_8_BP src</userinput></screen>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">После этого создаётся тэг новой ветки по команде:</para>

	<screen xmlns:xlink="http://www.w3.org/1999/xlink">/usr/src<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cvs rtag -b -rRELENG_4_8_BP RELENG_4_8 src</userinput></screen>

	<note xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink"><emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Использование тэгов
	    <literal xmlns:xlink="http://www.w3.org/1999/xlink">RELENG_<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">*</replaceable></literal> разрешено
	    только менеджерам CVS и участникам группы по выпуску
	    релизов.</emphasis></para>
	</note>

	<sidebar xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink"><quote xmlns:xlink="http://www.w3.org/1999/xlink"><emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Тэгом</emphasis></quote> в понятии CVS
	    называют метку, которая идентифицирует исходный текст в некоторый
	    момент времени.  Вводя тэг в дерево, мы обеспечиваем то, что в
	    будущем тот, кто строит релиз, всегда сможет воспользоваться тем же
	    самым кодом, что использовался нами для создания официальных
	    релизов Проекта FreeBSD.</para>
	</sidebar>

	<mediaobject xmlns:xlink="http://www.w3.org/1999/xlink">
	  <imageobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <imagedata fileref="branches-head" align="center"/>
	  </imageobject>

	  <textobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <phrase xmlns:xlink="http://www.w3.org/1999/xlink">Ветви разработки FreeBSD</phrase>
	  </textobject>
	</mediaobject>

	<mediaobject xmlns:xlink="http://www.w3.org/1999/xlink">
	  <imageobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <imagedata fileref="branches-releng3" align="center"/>
	  </imageobject>

	  <textobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <phrase xmlns:xlink="http://www.w3.org/1999/xlink">Ветка FreeBSD 3.x STABLE</phrase>
	  </textobject>
	</mediaobject>

	<mediaobject xmlns:xlink="http://www.w3.org/1999/xlink">
	  <imageobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <imagedata fileref="branches-releng4" align="center"/>
	  </imageobject>

	  <textobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <phrase xmlns:xlink="http://www.w3.org/1999/xlink">Ветка FreeBSD 4.x STABLE</phrase>
	  </textobject>
	</mediaobject>

	<mediaobject xmlns:xlink="http://www.w3.org/1999/xlink">
	  <imageobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <imagedata fileref="branches-releng5" align="center"/>
	  </imageobject>

	  <textobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <phrase xmlns:xlink="http://www.w3.org/1999/xlink">Ветка FreeBSD 5.x STABLE</phrase>
	  </textobject>
	</mediaobject>

	<mediaobject xmlns:xlink="http://www.w3.org/1999/xlink">
	  <imageobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <imagedata fileref="branches-releng6" align="center"/>
	  </imageobject>

	  <textobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <phrase xmlns:xlink="http://www.w3.org/1999/xlink">Ветка FreeBSD 6.x STABLE</phrase>
	  </textobject>
	</mediaobject>

	<mediaobject xmlns:xlink="http://www.w3.org/1999/xlink">
	  <imageobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <imagedata fileref="branches-releng7" align="center"/>
	  </imageobject>

	  <textobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <phrase xmlns:xlink="http://www.w3.org/1999/xlink">Ветка FreeBSD 7.x STABLE</phrase>
	  </textobject>
	</mediaobject>

	<mediaobject xmlns:xlink="http://www.w3.org/1999/xlink">
	  <imageobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <imagedata fileref="branches-releng8" align="center"/>
	  </imageobject>

	  <textobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <phrase xmlns:xlink="http://www.w3.org/1999/xlink">Ветка FreeBSD 8.x STABLE</phrase>
	  </textobject>
	</mediaobject>

	<mediaobject xmlns:xlink="http://www.w3.org/1999/xlink">
	  <imageobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <imagedata fileref="branches-releng9" align="center"/>
	  </imageobject>

	  <textobject xmlns:xlink="http://www.w3.org/1999/xlink">
	    <phrase xmlns:xlink="http://www.w3.org/1999/xlink">Ветка FreeBSD 9.x STABLE</phrase>
	  </textobject>
	</mediaobject>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="versionbump">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Увеличение номера версии</title>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Перед тем, как окончательный релиз будет помечен, построен и
	  выпущен, необходимо модифицировать следующие файлы, отразив в них
	  корректную версию FreeBSD:</para>

	<itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">doc/ru_RU.KOI8-R/books/handbook/mirrors/chapter.xml</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">doc/en_US.ISO8859-1/books/porters-handbook/book.xml</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">doc/share/xml/freebsd.ent</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/Makefile.inc1</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/UPDATING</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/gnu/usr.bin/groff/tmac/mdoc.local</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/release/Makefile</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/release/doc/en_US.ISO8859-1/share/xml/release.dsl</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/release/doc/share/examples/Makefile.relnotesng</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/release/doc/share/xml/release.ent</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/share/examples/cvsup/standard-supfile</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/sys/conf/newvers.sh</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/sys/sys/param.h</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/usr.sbin/pkg_install/add/main.c</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">www/en/docs/man.xml</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">www/en/cgi/ports.cgi</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">ports/Tools/scripts/release/config</filename></para>
	  </listitem>
	</itemizedlist>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Новый релиз должен быть также отражён в файлах замечаний к релизу
	  и информации о замеченных ошибках (в ветке релиза), а файлы
	  соответствующим образом обрезаны (в ветке stable/current):</para>

	<itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/release/doc/en_US.ISO8859-1/relnotes/common/new.xml</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/release/doc/en_US.ISO8859-1/errata/article.xml</filename></para>
	  </listitem>
	</itemizedlist>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Утилита <application xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</application> должна быть
	  обновлена и указывать количество доступных портов и объём дискового
	  пространства, требуемого для Коллекции Портов[4].  На данный момент эта
	  информация хранится в файле
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">src/usr.sbin/sysinstall/dist.c</filename>.</para>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">После построения релиза для оповещения мирового сообщества о
	  выпуске релиза необходимо обновить некоторые файлы.</para>

	<itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">doc/share/images/articles/releng/branches-releng<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X</replaceable>.pic</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">www/share/xml/advisories.xml</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">www/share/xml/includes.release.xml</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">www/share/xml/includes.release.xsl</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">www/en/releases/*</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">www/en/releng/index.xml</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">www/en/news/news.xml</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">www/en/search/web.atoz</filename></para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/share/misc/bsd-family-tree</filename></para>
	  </listitem>
	</itemizedlist>
      </sect3>

    <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="versionbump-major">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Подготовка новой старшей релиз ветки
	(RELENG_<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X</replaceable>)</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Когда новая старшая релиз ветка, такая как <literal xmlns:xlink="http://www.w3.org/1999/xlink">RELENG_6</literal>
	ответвляется из HEAD, некоторые дополнительные файлы должны
	быть обновлены перед тем, как релизы будут созданы из
	этой новой ветки.</para>

      <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
       <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">src/share/examples/cvsup/stable-supfile</filename>
	    - когда применимо, должен быть обновлен, чтобы указывать на новую
	    -STABLE ветку.</para>
	</listitem>
      </itemizedlist>

    </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Создание тэгов релиза</title>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">При готовности окончательного релиза следующая команда создаст
	  тэг <literal xmlns:xlink="http://www.w3.org/1999/xlink">RELENG_4_8_0_RELEASE</literal>.</para>

	<screen xmlns:xlink="http://www.w3.org/1999/xlink">/usr/src<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cvs rtag -rRELENG_4_8 RELENG_4_8_0_RELEASE src</userinput></screen>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Менеджеры документации и портов отвечают за внесение тэга в
	  соответствующие ветки с тэгом
	  <literal xmlns:xlink="http://www.w3.org/1999/xlink">RELEASE_4_8_0</literal>.</para>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Иногда в последний момент, уже <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">после</emphasis>
	  создания последних тэгов может потребоваться внесение исправлений.
	  На практике это не является проблемой, так как <acronym xmlns:xlink="http://www.w3.org/1999/xlink">CVS</acronym>
	  позволяет выполнять манипуляции с тэгами по команде <command xmlns:xlink="http://www.w3.org/1999/xlink">cvs
	  tag -d <replaceable xmlns:xlink="http://www.w3.org/1999/xlink">tagname filename</replaceable></command>.  Очень
	  важно, чтобы все последние изменения были помечены соответствующим
	  тэгом, как часть релиза.  Релизы FreeBSD должны быть всегда
	  повторяемыми.  Локальные изменения в параметры окружения выпускающего
	  релиз недопустимы.</para>
      </sect3>
    </sect2>
  </sect1>

  <!-- Построение релизов -->
  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="release-build">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Построение релизов</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink"><quote xmlns:xlink="http://www.w3.org/1999/xlink">Релизы</quote> FreeBSD могут быть построены любым человеком,
      имеющим быстродействующую машину и доступ к хранилищу исходных текстов.
      (Это должен быть любой, так как мы предоставляем анонимный доступ к CVS!
      Обратитесь к Руководству для прояснения деталей.)
      <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Единственным</emphasis> особым требованием является наличие
      устройства <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">md</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">4</manvolnum></citerefentry>.  Если устройство в вашем ядре
      не подгружено, то модуль ядра должен быть подгружен автоматически при
      выполнении команды <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">mdconfig</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> на этапе создания носителя для
      загрузки.  Все инструменты, необходимые для построения релиза, доступны
      из хранилища CVS в каталоге <filename xmlns:xlink="http://www.w3.org/1999/xlink">src/release</filename>.  Эти
      инструменты предоставляют единый метод построения релизов FreeBSD.
      Полный релиз может быть реально построен при помощи лишь одной команды,
      включая создание <acronym xmlns:xlink="http://www.w3.org/1999/xlink">ISO</acronym>-образов, подходящих для записи на
      CDROM, установочных дискет и установочного каталога FTP.  Эта команда
      называется соответствующим образом: <command xmlns:xlink="http://www.w3.org/1999/xlink">make
      release</command>.</para>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink"><command xmlns:xlink="http://www.w3.org/1999/xlink">make release</command></title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Для успешного построения релиза вы должны сначала заполнить каталог
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/obj</filename>, запустив команду <command xmlns:xlink="http://www.w3.org/1999/xlink">make
	world</command> или просто <command xmlns:xlink="http://www.w3.org/1999/xlink">make buildworld</command>.  Цель,
	выполняемая для построения релиза, требует корректного задания
	нескольких переменных, используемых при его сборке:</para>

      <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink"><varname xmlns:xlink="http://www.w3.org/1999/xlink">CHROOTDIR</varname> - Каталог, используемый в среде с
	    изменённой корневой файловой системой при построении полного
	    релиза.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink"><varname xmlns:xlink="http://www.w3.org/1999/xlink">BUILDNAME</varname> - Наименование строящегося
	    релиза.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink"><varname xmlns:xlink="http://www.w3.org/1999/xlink">CVSROOT</varname> - Местонахождение
	    CVS-хранилища.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink"><varname xmlns:xlink="http://www.w3.org/1999/xlink">RELEASETAG</varname> - Тэг CVS, соответствующий
	    релизу, который вы собираетесь строить.</para>
	</listitem>
      </itemizedlist>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Если у вас ещё нет доступа к локальному CVS-хранилищу, то вы можете
	зеркалировать одно из них при помощи <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/synching.html#CVSUP">
	CVSup</link>.  Поставляемый sup-файл,
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/share/examples/cvsup/cvs-supfile</filename>, может
	служить хорошей отправной точкой для зеркалирования хранилища
	CVS.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Если <varname xmlns:xlink="http://www.w3.org/1999/xlink">RELEASETAG</varname> опущен, то релиз будет строиться
	из ветки <literal xmlns:xlink="http://www.w3.org/1999/xlink">HEAD</literal> (известной как -CURRENT).  Релизы,
	строящиеся из этой ветки обычно называют <quote xmlns:xlink="http://www.w3.org/1999/xlink">снэпшотами
	-CURRENT</quote>.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Для настройки построения релиза существует много других переменных
	Большинство из этих переменных описаны в начале файла
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">src/release/Makefile</filename>.  Точная команда, служащая
	для построения официального релиза FreeBSD 4.7 (x86) такова:</para>

      <screen xmlns:xlink="http://www.w3.org/1999/xlink"><command xmlns:xlink="http://www.w3.org/1999/xlink">make release CHROOTDIR=/local3/release \
	BUILDNAME=4.7-RELEASE \
	CVSROOT=/host/cvs/usr/home/ncvs \
	RELEASETAG=RELENG_4_7_0_RELEASE</command></screen>

      <para xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">Makefile</filename> для релиза может быть разбит на
	несколько различных шагов.</para>

      <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Создание чистого системного окружения в отдельной иерархии
	    каталогов по команде <quote xmlns:xlink="http://www.w3.org/1999/xlink"><command xmlns:xlink="http://www.w3.org/1999/xlink">make
	    installworld</command></quote>.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Выгрузка из CVS чистой версии исходных текстов системы,
	    документации и портов в иерархию для построения релиза.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Создание копии <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc</filename> и
	    <filename xmlns:xlink="http://www.w3.org/1999/xlink">/dev</filename> в окружении с изменённым корнем файловой
	    системы.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Смена корневой файловой системы на иерархию построения релиза,
	    чтобы избежать влияния внешнего окружения на построение.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Выполнение <command xmlns:xlink="http://www.w3.org/1999/xlink">make world</command> в окружении с
	    изменённой корневой файловой системой.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Построение бинарных файлов для работы с Kerberos.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Построение ядра <filename xmlns:xlink="http://www.w3.org/1999/xlink">GENERIC</filename>.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Создание промежуточного дерева каталогов, где будут строиться
	    бинарные файлы и формироваться дистрибутивы.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Построение и установка инструментов для работы с документацией,
	    необходимых для преобразования исходных текстов документации (SGML)
	    в формат HTML и текстовые документы, которые сопутствуют
	    релиз.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Построение и установка актуальной документации (руководства
	    пользователей, учебники, замечания к релизу, перечень аппаратной
	    совместимости и так далее.)</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Построение <quote xmlns:xlink="http://www.w3.org/1999/xlink">свёрнутых</quote> бинарных файлов,
	    используемых на установочных дискетах.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Подготовка дистрибутивных архивов бинарных файлов и исходных
	    текстов.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Создание загрузочного носителя
	    и <quote xmlns:xlink="http://www.w3.org/1999/xlink">fixit</quote>-дискеты.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Создание иерархии для установки при помощи FTP.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink"><emphasis xmlns:xlink="http://www.w3.org/1999/xlink">(опционально)</emphasis> Создание образов ISO для
	    носителей CDROM/DVD.</para>
	</listitem>
      </itemizedlist>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Для получения более полной информации об инфраструктуре построения
	релизов, пожалуйста, обратитесь к справочной странице
	по <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">release</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">7</manvolnum></citerefentry>.</para>

      <note xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Важно, чтобы из файла <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/make.conf</filename> были
	  удалены все установки, специфичные для конкретного хоста.  К примеру,
	  будет глупо распространять бинарные файлы, построенные на системе с
	  переменной <varname xmlns:xlink="http://www.w3.org/1999/xlink">CPUTYPE</varname>, указывающей на определённый
	  тип процессора.</para>
      </note>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Программное обеспечение третьих лиц (<quote xmlns:xlink="http://www.w3.org/1999/xlink">ports</quote>)</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink"><link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.FreeBSD.org/ports">Коллекция портов
	FreeBSD</link> содержит более 24,000 программных пакетов
	сторонних разработчиков, которые доступны для FreeBSD.  За поддержку
	целостности дерева портов, которое может использоваться для создания
	бинарных пакетов, поставляемых с официальными релизами FreeBSD,
	отвечает Группа Менеджеров Дерева Портов FreeBSD <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">portmgr@FreeBSD.org</email>.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Рассмотрение работ с нашей коллекцией пакетов сторонних
	разработчиков при подготовке релизов выходит за рамки этого
	документа.  Этот вопрос глубоко рассмотрен в отдельной
	статье, <link xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{{url.articles.releng-packages}}}/article.html">The Release Engineering of Third Party Packages</link>.</para>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">ISO с релизами</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Начиная с FreeBSD 4.4, Проект FreeBSD принял решение распространять
	все четыре образа ISO, ранее продаваемые через
	<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">BSDi/Wind River Systems/FreeBSD Mall</emphasis> как
	<quote xmlns:xlink="http://www.w3.org/1999/xlink">официальные</quote> дистрибутивы на CDROM.  Каждый из четырёх
	дисков должен содержать файл <filename xmlns:xlink="http://www.w3.org/1999/xlink">README.TXT</filename>,
	описывающий содержимое диска, файл <filename xmlns:xlink="http://www.w3.org/1999/xlink">CDROM.INF</filename>, в
	котором находятся мета-данные о диске для того, чтобы
	<citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> мог проверять и использовать содержимое, а также
	файл <filename xmlns:xlink="http://www.w3.org/1999/xlink">filename.txt</filename>, содержащий перечень содержимого
	на диске.  Этот <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">перечень</emphasis> может быть создан простой
	командой:</para>

      <screen xmlns:xlink="http://www.w3.org/1999/xlink">/stage/cdrom<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">find . -type f | sed -e 's/^\.\///' | sort &gt; filename.txt</userinput></screen>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Специфичные требования для каждого CD описываются ниже.</para>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Диск 1</title>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Первый диск практически полностью создаётся командой
	  <command xmlns:xlink="http://www.w3.org/1999/xlink">make release</command>.  Единственным изменением, которое
	  нужно внести в каталог <filename xmlns:xlink="http://www.w3.org/1999/xlink">disc1</filename>, является
	  добавление подкаталога <filename xmlns:xlink="http://www.w3.org/1999/xlink">tools</filename>,
	  а также перенос максимально
	  возможного количества программных пакетов сторонних разработчиков,
	  которые поместятся на диск.  Каталог <filename xmlns:xlink="http://www.w3.org/1999/xlink">tools</filename>
	  содержит программное обеспечение, позволяющее пользователям создавать
	  установочные дискеты из других операционных систем.  Этот диск нужно
	  сделать загрузочным, чтобы пользователям современных ПК не нужно было
	  создавать установочные дискеты.</para>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Если в релиз необходимо включить специализированное ядро, то
	  необходимо модифицировать <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> и <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">release</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">7</manvolnum></citerefentry>,
	  добавив в них инструкции по установке.  Соответствующий код
	  находится в <filename xmlns:xlink="http://www.w3.org/1999/xlink">src/release</filename> и
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">src/usr.sbin/sysinstall</filename>.  В частности,
	  в <filename xmlns:xlink="http://www.w3.org/1999/xlink">src/usr.sbin/sysinstall</filename> необходимо будет
	  редактировать <filename xmlns:xlink="http://www.w3.org/1999/xlink">src/release/Makefile</filename>,
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">dist.c</filename>, <filename xmlns:xlink="http://www.w3.org/1999/xlink">dist.h</filename>,
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">menus.c</filename>, <filename xmlns:xlink="http://www.w3.org/1999/xlink">install.c</filename> и
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">Makefile</filename>.  Также может потребоваться обновить
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall.8</filename>.</para>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Диск 2</title>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Второй диск также в основном создаётся по команде <command xmlns:xlink="http://www.w3.org/1999/xlink">make
	  release</command>.  Он содержит <quote xmlns:xlink="http://www.w3.org/1999/xlink">живую файловую
	  систему</quote>, которую можно использовать из <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> для
	  исправления процесса установки FreeBSD.  Этот диск должен быть
	  загрузочным и содержать также упакованную копию хранилища CVS в
	  каталоге <filename xmlns:xlink="http://www.w3.org/1999/xlink">CVSROOT</filename> и демонстрационные версии
	  коммерческого программного обеспечения в каталоге
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">commerce</filename>.</para>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Диски 3 и 4</title>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Оставшиеся два диска содержат дополнительные программные пакеты
	  для FreeBSD.  Они должны быть объединены в группы (кластеры), чтобы
	  отдельный пакет и все его <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">зависимости</emphasis> находились
	  на одном и том же диске.  Дополнительная информация о создании этих
	  дисков находится в статье <link xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{{url.articles.releng-packages}}}/article.html">The Release Engineering of Third Party Packages</link>.</para>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Поддержка нескольких дисков</title>

	<para xmlns:xlink="http://www.w3.org/1999/xlink"><application xmlns:xlink="http://www.w3.org/1999/xlink">Sysinstall</application> поддерживает установку
	  пакетов с нескольких дисков.  Для это нужно, чтобы на каждом диске
	  был файл <filename xmlns:xlink="http://www.w3.org/1999/xlink">INDEX</filename>, содержащий названия всех пакетов
	  со всех дисков, с дополнительным полем, указывающем на каком диске
	  содержится данный конкретный пакет.  Также, на каждом диске, в файле
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">cdrom.inf</filename> должна быть указана переменная
	  <literal xmlns:xlink="http://www.w3.org/1999/xlink">CD_VOLUME</literal> для того, чтобы sysinstall мог
	  определить какой этой диск.  Когда пользователь будет пытаться
	  установить пакет, которого нет на текущем диске, sysinstall выдаст
	  запрос на вставку соответствующего диска.</para>
      </sect3>
    </sect2>
  </sect1>

  <!-- Распространение -->
  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="distribution">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Распространение</title>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="dist-ftp">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Серверы FTP</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">После того, как релиз был тщательно протестирован и подготовлен к
	распространению, должен быть обновлён главный FTP-сервер.  Все
	официальные общедоступные серверы FTP-серверы FreeBSD являются
	зеркалами главного сервера, открытого только другим серверам FTP.  Этот
	сервер известен под именем <systemitem xmlns:xlink="http://www.w3.org/1999/xlink">ftp-master</systemitem>.  Когда релиз
	готов, на сервере <systemitem xmlns:xlink="http://www.w3.org/1999/xlink">ftp-master</systemitem> должны быть изменены
	следующие строки:</para>

      <variablelist xmlns:xlink="http://www.w3.org/1999/xlink">
	<varlistentry xmlns:xlink="http://www.w3.org/1999/xlink">
	  <term xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">/pub/FreeBSD/releases/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">arch</replaceable>/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X.Y</replaceable>-RELEASE/</filename></term>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Установочный каталог FTP, получаемый по команде <command xmlns:xlink="http://www.w3.org/1999/xlink">make
	      release</command>.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xmlns:xlink="http://www.w3.org/1999/xlink">
	  <term xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">/pub/FreeBSD/ports/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">arch</replaceable>/packages-<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X.Y</replaceable>-release/</filename></term>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Полный комплект построенных пакетов для этого релиза.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xmlns:xlink="http://www.w3.org/1999/xlink">
	  <term xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">/pub/FreeBSD/releases/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">arch</replaceable>/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X.Y</replaceable>-RELEASE/tools</filename></term>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Символическая ссылка на
	      <filename xmlns:xlink="http://www.w3.org/1999/xlink">../../../tools</filename>.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xmlns:xlink="http://www.w3.org/1999/xlink">
	  <term xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">/pub/FreeBSD/releases/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">arch</replaceable>/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X.Y</replaceable>-RELEASE/packages</filename></term>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Символическая ссылка на
	      <filename xmlns:xlink="http://www.w3.org/1999/xlink">../../../ports/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">arch</replaceable>/packages-<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X.Y</replaceable>-release</filename>.</para>
	  </listitem>
	</varlistentry>

	<varlistentry xmlns:xlink="http://www.w3.org/1999/xlink">
	  <term xmlns:xlink="http://www.w3.org/1999/xlink"><filename xmlns:xlink="http://www.w3.org/1999/xlink">/pub/FreeBSD/releases/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">arch</replaceable>/ISO-IMAGES/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X.Y</replaceable>/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X.Y</replaceable>-RELEASE-<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">arch</replaceable>-*.iso</filename></term>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">ISO-образы.  Здесь <quote xmlns:xlink="http://www.w3.org/1999/xlink">*</quote> это
	      <filename xmlns:xlink="http://www.w3.org/1999/xlink">disc1</filename>, <filename xmlns:xlink="http://www.w3.org/1999/xlink">disc2</filename> и так
	      далее.  Только если здесь есть <filename xmlns:xlink="http://www.w3.org/1999/xlink">disc1</filename> и
	      альтернативный первый установочный CD (например, обрезанная
	      установка без оконной системы), то здесь может быть также
	      и <filename xmlns:xlink="http://www.w3.org/1999/xlink">mini</filename>.</para>
	  </listitem>
	</varlistentry>
      </variablelist>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Для получения дополнительной информации о системе зеркальных
	FTP-серверов FreeBSD, пожалуйста, прочтите статью о <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="../../../../doc/ru_RU.KOI8-R/articles/hubs">Зеркалировании FreeBSD</link>.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Может пройти от нескольких часов до двух дней между тем, как
	обновится <systemitem xmlns:xlink="http://www.w3.org/1999/xlink">ftp-master</systemitem>, и на основной массе FTP-серверов
	1-го уровня появится новое программное обеспечение, в зависимости от
	того, в тоже самое ли время пакет был загружен.  Обязательно, чтобы
	выпускающие релиз координировали свои действия с <link xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://lists.FreeBSD.org/mailman/listinfo/mirror-announce">Администраторы
  зеркальных сайтов FreeBSD</link>
	до того, как объявлять об общедоступности нового программного
	обеспечения с серверов FTP.  В идеальном случае набор пакетов к
	релизу должен быть загружен по крайней мере за четыре дня до момента
	выпуска релиза.  Релиз должен быть загружен в промежутке от 24 до 48
	часов до момента выхода запланированного релиза с выключенными
	полномочиями <quote xmlns:xlink="http://www.w3.org/1999/xlink">other</quote>.  Это позволит зеркалирующим серверам
	сгрузить его, но никто не сможет получить его с зеркальных серверов.
	В момент выхода релиза должно быть послано сообщение в адрес
	<link xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://lists.FreeBSD.org/mailman/listinfo/mirror-announce">Администраторы
  зеркальных сайтов FreeBSD</link>, говорящее о том, что релиз выпущен и наступило
	время для открытия доступа на зеркальных серверах.  Обязательно
	вместе со временем укажите и часовой пояс, например, относительно
	GMT.</para>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="dist-cdrom">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Тиражирование CD-ROM</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Вскоре появится: Советы по передаче ISO-образов FreeBSD на
	тиражирование и применяемые меры по контролю качества.</para>
    </sect2>
  </sect1>

  <!-- Расширяемость -->
  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="extensibility">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Расширяемость</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Хотя FreeBSD представляет собой законченную операционную систему,
      ничего не заставляет вас использовать систему только в том виде, который
      приготовлен нами для распространения.  Мы попытались спроектировать
      систему максимально расширяемой, чтобы она могла выполнять роль
      платформы, на основе которой можно строить другие коммерческие продукты.
      Единственным <quote xmlns:xlink="http://www.w3.org/1999/xlink">правилом</quote>, которое мы налагаем, является
      настоятельная рекомендация документировать улучшения, вносимые вами в
      дистрибутив FreeBSD с нетривиальными изменениями!  Сообщество FreeBSD
      может помогать только пользователям того программного обеспечения,
      которое распространяем мы.  Мы определённо приветствуем улучшения в
      форме, например, инструментов установки и администрирования, но не можем
      отвечать на вопросы о них.</para>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Создание модифицированных загрузочных дискет</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Во многих местах имеются сложные условия, которые требуют
	размещения дополнительных модулей ядра или пользовательских
	инструментов на установочные дискеты.  <quote xmlns:xlink="http://www.w3.org/1999/xlink">Быстрым и
	неаккуратным</quote> способом сделать это является изменение
	промежуточного каталога в существующей иерархии при выполнении
	<command xmlns:xlink="http://www.w3.org/1999/xlink">make release</command>:</para>

      <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Примените патчи или добавьте дополнительные файлы в каталог
	    построения релиза с изменённых корнем файловой системы.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink"><command xmlns:xlink="http://www.w3.org/1999/xlink">rm
	    ${CHROOTDIR}/usr/obj/usr/src/release/release.[59]</command></para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">перестройте <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>, ядро и остальные части системы,
	    которые коснулись ваши изменения.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink"><command xmlns:xlink="http://www.w3.org/1999/xlink">chroot ${CHROOTDIR} ./mk floppies</command></para>
	</listitem>
      </itemizedlist>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Дискеты нового релиза будут находиться в
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">${CHROOTDIR}/R/stage/floppies</filename>.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Либо может быть вызвана цель
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">boot.flp</filename> построения или скрипт создания файловой
	системы, <filename xmlns:xlink="http://www.w3.org/1999/xlink">src/release/scripts/doFS.sh</filename>, которые
	может быть вызван напрямую.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Локальные патчи могут быть также приложены к построению релиза при
	помощи задания переменной <varname xmlns:xlink="http://www.w3.org/1999/xlink">LOCAL_PATCH</varname> при выполнении
	<command xmlns:xlink="http://www.w3.org/1999/xlink">make release</command>.</para>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Скрипты <command xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</command></title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Инструмент установки и настройки системы FreeBSD,
	<citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>, может работать по сценарию, полезному для
	автоматизированной установки в больших компаниях.  Эта функциональность
	может использоваться совместно с технологией <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Intel</trademark> PXE[12] для
	первоначальной установки систем из сети, или с модифицированными
	загрузочными дискетами со скриптами sysinstall.  Пример скрипта для
	sysinstall доступен в дереве CVS в виде файла
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">src/release/sysinstall/install.cfg</filename>.</para>
    </sect2>
  </sect1>

  <!-- Извлечённые уроки -->
  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="lessons-learned">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Уроки, извлечённые из FreeBSD 4.4</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Формально процесс подготовки релиза для 4.4 начался 1 августа 2001
      года.  После этой даты все без исключения изменения в ветке
      <literal xmlns:xlink="http://www.w3.org/1999/xlink">RELENG_4</literal> FreeBSD подтверждались Группа Выпуска Релизов FreeBSD <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">re@FreeBSD.org</email>.  Первый
      предварительный релиз для архитектуры x86 был выпущен 16 августа, за
      ним выходило ещё 4 предварительных релиза, и всё закончилось 18 августа
      выпуском окончательного релиза.  Руководитель службы безопасности очень
      плотно занимался процессом выпуска в последнюю неделю, так как в
      предыдущих предварительных релизах были найдены проблемы, касающиеся
      информационной безопасности.  Чуть более чем за месяц в адрес Группа Выпуска Релизов FreeBSD <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">re@FreeBSD.org</email>
      поступило более <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">500</emphasis> писем.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Сообщество наших пользователей весьма чётко показало, что
      безопасность и стабильность релиза FreeBSD не должна приноситься в жертву
      любым назначенным срокам окончания работ или планируемым датам выхода
      релиза.  Проект FreeBSD за время своего существования значительно вырос,
      и никогда ранее необходимость в стандартизации процедур подготовки
      релизов не стояла так остро.  Это стало ещё более важно, когда FreeBSD
      была перенесена на новые аппаратные платформы.</para>
  </sect1>

  <!-- Направления будущих работ -->
  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="future">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Направления будущих работ</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Нашим работам по подготовке релизов жизненно важно расти вместе с
      увеличением количества пользователей системы.  Вместе с этим мы очень
      плотно работаем над документированием действий, выполняемых при выпуске
      релизов FreeBSD.</para>

    <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
      <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink"><emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Параллелизм</emphasis> - некоторые этапы построения
	  релиза на самом деле выполнять параллельно
	  <quote xmlns:xlink="http://www.w3.org/1999/xlink">затруднительно</quote>.  Большинство выполняемых задач весьма
	  интенсивно работают с I/O, так что для ускорения процесса
	  <command xmlns:xlink="http://www.w3.org/1999/xlink">make release</command> наличие нескольких высокоскоростных
	  дисков гораздо более важно, чем использование нескольких процессоров.
	  Если для различных иерархий в <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">chroot</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">2</manvolnum></citerefentry>-окружении используется
	  несколько дисков, то извлечение из CVS деревьев
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">ports</filename> и <filename xmlns:xlink="http://www.w3.org/1999/xlink">doc</filename> может
	  выполняться одновременно с командой <command xmlns:xlink="http://www.w3.org/1999/xlink">make world</command> на
	  другом диске.  Использование <acronym xmlns:xlink="http://www.w3.org/1999/xlink">RAID</acronym>-решений
	  (аппаратных или программных) может значительно сократить общее время
	  построения.</para>
      </listitem>

      <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink"><emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Кроссплатформенное построение
	  релизов</emphasis> - Построить релиз для IA-64 или Alpha на
	  x86-оборудовании? <command xmlns:xlink="http://www.w3.org/1999/xlink">make TARGET=ia64 release</command>.</para>
      </listitem>

      <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink"><emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Тестирование</emphasis> - Нам нужна улучшенная
	  автоматизированная система тестирования корректности для
	  FreeBSD.</para>
      </listitem>

      <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink"><emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Инструменты установки</emphasis> - Наша программа
	  установки давно пережила свой век.  В разработке находятся несколько
	  проектов, которые должны дать улучшенную технологию установки.
	  Одним из таких проектов был libh, целью которого было создание
	  новой интеллектуальной технологии работы с пакетами и программы
	  установки с GUI.</para>
      </listitem>
    </itemizedlist>
  </sect1>

  <!-- Благодарности -->
  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="ackno">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Благодарности</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Я рад поблагодарить Джордана Хаббарда (Jordan Hubbard) за то, что он
      дал мне возможность взять под свою ответственность некоторые части
      процесса подготовки релиза FreeBSD 4.4, а также за все годы его работы,
      сделавшие FreeBSD такой, какой она является сейчас.  Конечно, релиз не
      был бы возможен без той работы, которую проделали Satoshi Asami <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">asami@FreeBSD.org</email>, Steve Price <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">steve@FreeBSD.org</email>,
      Bruce A. Mah <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">bmah@FreeBSD.org</email>, Nik Clayton <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">nik@FreeBSD.org</email>, David O'Brien <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">obrien@FreeBSD.org</email>, Kris Kennaway <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">kris@FreeBSD.org</email>, John Baldwin <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">jhb@FreeBSD.org</email> и остальные члены
      сообщества разработчиков FreeBSD.  Я также рад выразить благодарность
      Rodney Grimes <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">rgrimes@FreeBSD.org</email> и Poul-Henning Kamp <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">phk@FreeBSD.org</email>, а также остальным, работавшим над инструментами
      подготовки релизов в первые годы существования FreeBSD.  Эта статья была
      также написана под впечатлением документации по подготовке релизов от
      CSRG[13], NetBSD Project[10] и замечаний Джона Балдвина (John Baldwin)
      по предлагаемому процессу подготовки релизов[11].</para>
  </sect1>

  <!-- Раздел ссылок / Библиография -->
  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="biblio">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Справочная литература</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">[1] CVS - Concurrent Versions System
      <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.cvshome.org">http://www.cvshome.org</uri></para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">[2] CVSup - The CVS-Optimized General Purpose Network File
      Distribution System <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.polstra.com/projects/freeware/CVSup">http://www.polstra.com/projects/freeware/CVSup</uri></para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">[3] <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://pointyhat.FreeBSD.org">http://pointyhat.FreeBSD.org</uri></para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">[4] Коллекция портов FreeBSD
      <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.FreeBSD.org/ports">http://www.FreeBSD.org/ports</uri></para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">[5] Коммиттеры FreeBSD <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/articles/contributors/staff-committers.html">http://www.FreeBSD.org/doc/en_US.ISO8859-1/articles/contributors/staff-committers.html</uri></para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">[6] Правление FreeBSD <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="../../../../administration.html#t-core">../../../../administration.html#t-core</uri></para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">[7] Руководство FreeBSD <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook">http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook</uri></para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">[8] GNATS: The GNU Bug Tracking System
      <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.gnu.org/software/gnats">http://www.gnu.org/software/gnats</uri></para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">[9] Статистика FreeBSD PR
      <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.FreeBSD.org/prstats/index.html">http://www.FreeBSD.org/prstats/index.html</uri></para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">[10] NetBSD Developer Documentation: Release Engineering <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.NetBSD.org/developers/releng/index.html">http://www.NetBSD.org/developers/releng/index.html</uri></para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">[11] John Baldwin's FreeBSD Release Engineering Proposal <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://people.FreeBSD.org/~jhb/docs/releng.txt">http://people.FreeBSD.org/~jhb/docs/releng.txt</uri></para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">[12] PXE Jumpstart Guide <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/articles/pxe/index.html">http://www.FreeBSD.org/doc/en_US.ISO8859-1/articles/pxe/index.html</uri></para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">[13] Marshall Kirk McKusick, Michael J. Karels, and Keith Bostic:
      <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://docs.FreeBSD.org/44doc/papers/releng.html">
      <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">The Release Engineering of 4.3BSD</emphasis></link></para>
  </sect1>
</article>
