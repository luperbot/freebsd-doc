<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>3. Действия, необходимые во время установки FreeBSD</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Настройка журналирования UFS для настольного компьютера." /><link rel="up" href="index.html" title="Настройка журналирования UFS для настольного компьютера." /><link rel="prev" href="understanding-journaling.html" title="2. Реализация журналирования в FreeBSD" /><link rel="next" href="configure-journal.html" title="4. Настройка журналирования" /><link rel="copyright" href="trademarks.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. Действия, необходимые во время установки FreeBSD</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="understanding-journaling.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="configure-journal.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="reserve-space"></a>3. Действия, необходимые во время установки FreeBSD</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72090064"></a>3.1. Выделение места под журналирование</h3></div></div></div><p>Типичный настольный компьютер обычно имеет один жесткий диск, на
	котором хранится как операционная система, так и пользовательские
	данные. Вероятно, что схема разбития винчестера (по умолчанию),
	выбранная в меню <span class="application">sysinstall</span>, является
	более или менее подходящей: настольному компьютеру не требуется большой
	раздел <code class="filename">/var</code>, в то время, как для раздела
	<code class="filename">/usr</code> выделяется значительный объем дискового
	пространства, ввиду того, что пользовательские данные и множество
	пэкэджей хранятся именно в поддиректориях <code class="filename">/usr</code>.
	</p><p>Разбиение по умолчанию (получаемое при нажатии <span class="keycap"><strong>A</strong></span>
	в редакторе разделов FreeBSD, называемом
	<span class="application">Disklabel</span>) не оставляет свободного места.
	Каждый подлежащий журналированию раздел требует отдельного раздела
	для журнала. Ввиду того, что раздел <code class="filename">/usr</code> -
	наибольший, есть смысл немного уменьшить его размер, чтобы получить
	пространство, необходимое для журнала.</p><p>В нашем примере используется жесткий диск размером 80 Гб.
	Следующий скриншот показывает результаты разбиения по умолчанию,
	выполненного при помощи <span class="application">Disklabel</span>
	в процессе установки операционной системы:</p><div class="mediaobject"><img src="disklabel1.png" /></div><p>Если это разбиение более или менее вас устраивает, то его легко
	модифицировать для журналирования. Используйте клавиши со стрелками
	для того, чтобы выделить раздел, отведенный под
	<code class="filename">/usr</code>, потом нажмите <span class="keycap"><strong>D</strong></span>
	чтобы удалить его.</p><p>Теперь переведите подсвечивание к имени диска, находящемуся вверху
	экрана, и нажмите <span class="keycap"><strong>C</strong></span> - создайте новый раздел
	<code class="filename">/usr</code>. Новый раздел должен быть меньше на 1 Гб
	(если вы собираетесь журналировать только <code class="filename">/usr</code>)
	или на 2 Гб (если журналированию подлежат как
	<code class="filename">/usr</code>, так и <code class="filename">/var</code>).
	Во всплывающем окне выберите "создать файловую систему" и укажите
	<code class="filename">/usr</code> точкой монтирования.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Следует ли журналировать <code class="filename">/var</code> раздел?
	  Обычно есть смысл журналировать большие разделы. Вы можете решить
	  не журналировать <code class="filename">/var</code>, однако журналирование
	  на обычном настольном компьютере не причинит вреда.  Если
	  файловая система не нагружена (что типично для настольной системы),
	  то можно выделить меньше дискового пространства под журнал.</p><p xmlns="http://www.w3.org/1999/xhtml">В этом примере подразумевается журналирование двух файловых
	  систем: <code class="filename">/usr</code> и <code class="filename">/var</code>.
	  Естественно, вы можете подкорректировать процедуру под свои
	  задачи.</p></div><p>Чтобы не усложнять описываемую методику, для создания разделов,
	необходимых для размещения журналов, мы будем использовать утилиту
	<span class="application">sysinstall</span>. Однако, во время установки
	утилита <span class="application">sysinstall</span> требует указания
	точек монтирования для каждого созданного вами раздела. Но разделы,
	содержащие журналы, вам никогда и никуда монтировать
	не придется.</p><p>Чтобы избежать вопросов о точках монтирования, мы создадим разделы
	под журналы и установим их тип в swap. Раздел, предназначенный для
	свопа, никогда и никуда не монтируется, плюс к тому, утилита
	<span class="application">sysinstall</span> позволяет создавать столько
	разделов под своп, сколько необходимо. После первой перезагрузки
	необходимо подредактировать файл <code class="filename">/etc/fstab</code>,
	удалив в нём лишние записи о своп-разделах.</p><p>Для создания своп-раздела, используя клавиши со стрелками,
	перемещайте подсвечивание к верхней части экрана в утилите
	<span class="application">Disklabel</span> так, чтобы стало подсвеченным
	имя диска. Потом, нажмите <span class="keycap"><strong>N</strong></span>, введите необходимый
	размер раздела (<em class="replaceable"><code>1024M</code></em>), а после -
	выберите во всплывшем окне <span class="quote"><<<span class="quote">swap space</span>>></span>. Повторите
	эти шаги для всех оставшихся журналов. В этом примере мы создаем
	два раздела, на которых будут размещаться журналы для
	<code class="filename">/usr</code> и <code class="filename">/var</code>. Конечный
	результат показан на следующем скриншоте:</p><div class="mediaobject"><img src="disklabel2.png" /></div><p>По завершении создания разделов мы рекомендуем вам записать
	на бумагу названия разделов и их точек монтирования: с этой информацией
	вы будете сверяться во время конфигурирования. Это также поможет
	уменьшить количество ошибок, приводящих к повреждению установки.
	Следующая табличка отображает наши заметки, сделанные для данного
	примера:</p><div class="table"><a id="idp72151632"></a><div class="table-title">Таблица 1. Разделы и журналы</div><div class="table-contents"><table summary="Разделы и журналы" width="100%" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Раздел</th><th>Точка монтирования</th><th>Журнал</th></tr></thead><tbody><tr><td>ad0s1d</td><td>/var</td><td>ad0s1h</td></tr><tr><td>ad0s1f</td><td>/usr</td><td>ad0s1g</td></tr></tbody></table></div></div><br class="table-break" /><p>Дальше продолжайте обычную установку. Однако, мы рекомендуем
	вам отложить инсталляцию приложений сторонних разработчиков (пакетов)
	до полной настройки журналирования.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="first-boot"></a>3.2. Первая загрузка</h3></div></div></div><p>Ваша система загрузится нормально, однако вам необходимо будет
	подредактировать <code class="filename">/etc/fstab</code> и удалить те
	лишние своп-разделы, которые вы создавали под журналы.
	Как правило, в названии файла устройства, созданного автоматически
	утилитой <span class="application">sysinstall</span>, присутствует
	суффикс <span class="quote"><<<span class="quote">b</span>>></span> (в нашем примере это ad0s1b). Удалите
	другие записи о своп-разделах и перезагрузите компьютер, после чего
	FreeBSD перестанет их использовать.</p><p>После второй перезагрузки, компьютер будет готов к
	конфигурированию журналирования.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="understanding-journaling.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="configure-journal.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">2. Реализация журналирования в FreeBSD </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 4. Настройка журналирования</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>