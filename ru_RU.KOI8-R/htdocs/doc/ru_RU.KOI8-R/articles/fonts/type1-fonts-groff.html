<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>7. Использование шрифтов в формате type 1 с программой Groff</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Шрифты и FreeBSD" /><link rel="up" href="index.html" title="Шрифты и FreeBSD" /><link rel="prev" href="type1-fonts-ghostscript.html" title="6. Использование шрифтов type 1 с пакетом Ghostscript" /><link rel="next" href="convert-truetype.html" title="8. Преобразование файлов шрифтов TrueType в формат groff/PostScript для использования с groff" /><link rel="copyright" href="trademarks.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7. Использование шрифтов в формате type 1 с программой Groff</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="type1-fonts-ghostscript.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="convert-truetype.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="type1-fonts-groff"></a>7. Использование шрифтов в формате type 1 с программой Groff</h2></div></div></div><p>Теперь, когда новый шрифт может быть использован как с <span class="application">X11</span>, так и в
      <span class="application">Ghostscript</span>, как использовать его с программой <span class="application">groff</span>?  Во-первых, так как
      мы имеем дело со <span class="trademark">PostScript</span>(R)-шрифтами формата type 1, то подходящим
      устройством <span class="application">groff</span> является <span class="emphasis"><em>ps</em></span>.  Для каждого шрифта,
      который может использоваться программой <span class="application">groff</span>, должен быть создан файл
      шрифта.  Имя шрифта для <span class="application">groff</span> является просто именем файла из каталога
      <code class="filename">/usr/share/groff_font/devps</code>.  В нашем примере
      файлом шрифта может быть
      <code class="filename">/usr/share/groff_font/devps/SHOWBOAT</code>.  Файл должен
      быть создан с помощью утилит, поставляемых с программой <span class="application">groff</span>.</p><p>Первой утилитой является <code class="command">afmtodit</code>.  Обычно она не
      устанавливается, так что она должна быть получена из дистрибутива с
      исходными текстами.  Я обнаружил, что нужно изменить первую строку файла,
      что я делал так:</p><div class="informalexample"><pre class="screen">
<code class="prompt">%</code> <strong class="userinput"><code>cp /usr/src/gnu/usr.bin/groff/afmtodit/afmtodit.pl /tmp</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>ex /tmp/afmtodit.pl
:1c
#!/usr/bin/perl -P-
.
:wq</code></strong></pre></div><p>Эта утилита создаст файл шрифтов для <span class="application">groff</span> из файла метрик (с
      окончанием <code class="filename">.afm</code>).  Продолжая с нашим
      примером:</p><div class="informalexample"><pre class="screen">
<em class="lineannotation"><span class="lineannotation">Многие файлы .afm в формате Mac
... строки разделены символом ^M.  Нам нужно преобразовать их в
разделитель ^J в стиле <span class="trademark">UNIX</span>(R)</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>cd /tmp</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cat /usr/local/share/fonts/type1/showboat.afm |
	tr '\015' '\012' &gt;showboat.afm</code></strong>

<em class="lineannotation"><span class="lineannotation">Теперь создаем файл шрифтов groff</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>cd /usr/share/groff_font/devps</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>/tmp/afmtodit.pl -d DESC -e text.enc /tmp/showboat.afm generate/textmap SHOWBOAT</code></strong></pre></div><p>Теперь к шрифту можно обращаться по имени SHOWBOAT.</p><p>Если в системе для управления принтерами используется программа
      <span class="application">Ghostscript</span>, то больше ничего делать не нужно.  Однако, если используются
      настоящие <span class="trademark">PostScript</span>(R)-принтеры, то для использования шрифта его нужно
      загрузить в принтер (если только в принтере шрифт showboat не встроен или
      не имеется на диске со шрифтами).  Последний шаг заключается в создании
      загружаемого шрифта.  Утилита <code class="command">pfbtops</code> используется для
      создания шрифта в формате <code class="filename">.pfa</code>, а файл для
      <code class="filename">загрузки</code> изменяется для указания нового шрифта.
      Файл для <code class="filename">загрузки</code> должен ссылаться на внутреннее имя
      шрифта.  Оно может быть легко определено из файла шрифтов groff, как
      это показывается здесь:</p><div class="informalexample"><pre class="screen">
<em class="lineannotation"><span class="lineannotation">Создание файла шрифта .pfa</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>pfbtops /usr/local/share/fonts/type1/showboat.pfb &gt;showboat.pfa</code></strong></pre></div><p>Конечно, если файл <code class="filename">.pfa</code> уже имеется, для его
      использования создаем символическую ссылку на него.</p><div class="informalexample"><pre class="screen">
<em class="lineannotation"><span class="lineannotation">Получение внутреннего имени шрифта</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>fgrep internalname SHOWBOAT</code></strong>
internalname Showboat

<em class="lineannotation"><span class="lineannotation">Указываем утилите groff, что шрифт должен быть загружен</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>ex download
:$a
Showboat      showboat.pfa
.
:wq</code></strong></pre></div><p>Для тестирования шрифта:</p><div class="informalexample"><pre class="screen">
<code class="prompt">%</code> <strong class="userinput"><code>cd /tmp</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cat &gt;example.t &lt;&lt;EOF
.sp 5
.ps 16
This is an example of the Showboat font:
.br
.ps 48
.vs (\n(.s+2)p
.sp
.ft SHOWBOAT
ABCDEFGHI
.br
JKLMNOPQR
.br
STUVWXYZ
.sp
.ps 16
.vs (\n(.s+2)p
.fp 5 SHOWBOAT
.ft R
To use it for the first letter of a paragraph, it will look like:
.sp 50p
\s(48\f5H\s0\fRere is the first sentence of a paragraph that uses the
showboat font as its first letter.
Additional vertical space must be used to allow room for the larger
letter.
EOF</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>groff -Tps example.t &gt;example.ps</code></strong>

<em class="lineannotation"><span class="lineannotation">Для использования с ghostscript/ghostview</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>ghostview example.ps</code></strong>

<em class="lineannotation"><span class="lineannotation">Для его печати</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>lpr -Ppostscript example.ps</code></strong></pre></div><p>Справочная информация:
      <code class="filename">/usr/src/gnu/usr.bin/groff/afmtodit/afmtodit.man</code>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=groff_font&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">groff_font</span>(5)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=groff_char&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">groff_char</span>(7)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pfbtops&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pfbtops</span>(1)</span></a>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="type1-fonts-ghostscript.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="convert-truetype.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">6. Использование шрифтов type 1 с пакетом Ghostscript </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 8. Преобразование файлов шрифтов TrueType в формат groff/PostScript для
      использования с groff</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>