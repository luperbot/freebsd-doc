<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>2. Требования к зеркалам FreeBSD</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Поддержка зеркал FreeBSD" /><link rel="up" href="index.html" title="Поддержка зеркал FreeBSD" /><link rel="prev" href="index.html" title="Поддержка зеркал FreeBSD" /><link rel="next" href="mirror-howto.html" title="3. Как вести зеркало FreeBSD" /><link rel="copyright" href="trademarks.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2. Требования к зеркалам FreeBSD</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="index.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="mirror-howto.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-requirements"></a>2. Требования к зеркалам FreeBSD</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-diskspace"></a>2.1. Дисковое пространство</h3></div></div></div><p>Одним из наиболее важных требований является дисковое пространство.
	В зависимости от набора релизов, архитектур и степени полноты зеркала
	вам может потребоваться огромный объем диска.  Не лишним будет
	помнить, что <span class="emphasis"><em>официальное</em></span> зеркало, скорее всего,
	должно быть полным.  Веб-страницы всегда должны
	зеркалироваться полностью.  Кроме того, учтите, что приводимые оценки
	объема относятся к состоянию на момент последнего редактирования
	данной статьи (9.3-RELEASE/10.1-RELEASE).
	Дальнейший процесс разработки и последующие релизы только увеличат
	требуемый объем.  Кроме того, разумно будет зарезервировать некоторое
	(10-20%) дополнительное пространство спокойствия ради.  Вот некоторые
	оценки объема:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Полное зеркало FTP: 1.4 TB</p></li><li class="listitem"><p>Комплект изменений CTM: 10 GB</p></li><li class="listitem"><p>Веб-страницы: 1 GB</p></li></ul></div><p>Текущее использование диска зеркалом FTP можно посмотреть на
	<a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/dir.sizes" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/dir.sizes</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-bandwidth"></a>2.2. Требования к сетевой связности и пропускной способности</h3></div></div></div><p>Разумеется, у вас должно быть подключение к интернет.
	Требуемая пропускная способность ваших каналов зависит от
	предполагаемого профиля использования вашего зеркала.
	Если вы собираетесь копировать некоторые части FreeBSD для
	локального использования на вашей машине или в интранете,
	требования могут быть много мягче, чем для публичного зеркала.
	Для официального зеркала необходимая пропускная способность
	увеличивается еще больше.  Мы можем дать лишь очень грубые
	оценки:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Зеркало для локального доступа: фактически минимум не
	    определен, но канал шириной менее 2 Mbps может сделать процесс
	    обновления мучительно медленным.</p></li><li class="listitem"><p>Неофициальное публичное зеркало: 34 Mbps выглядит
	    неплохо для начала.</p></li><li class="listitem"><p>Официальное зеркало: рекомендуется канал шириной более
	    100 Mbps; кроме того, ваша машина должна стоять как можно ближе к
	    граничным маршрутизаторам вашей сети.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-system"></a>2.3. Системные требования, процессор и память</h3></div></div></div><p>Эти требования в первую очередь определяются максимальным ожидаемым
	количеством клиентов (устанавливается администратором сервера).
	Также, на требуемые ресурсы влияет список сервисов, которые вы будете
	предоставлять.  Зеркала FTP и/или HTTP не требуют особенно много
	ресурсов.  Будьте на чеку, если планируете предоставлять rsync.
	Выбор rsync может иметь огромное влияние на требования к аппаратным
	ресурсам, поскольку rsync признан "прожорливым" по памяти.
	Вот некоторые советы по конфигурации аппаратной части сервера:</p><p>Для умеренно посещаемого сайта, предоставляющего
	<span class="application">rsync</span>, можно использовать процессор
	с частотой 800MHz - 1 GHz и по крайней мере 512MB памяти.
	Скорее всего, данная конфигурация может считаться минимальной для
	<span class="emphasis"><em>официального</em></span> зеркала.</p><p>Для регулярно посещаемого сайта вам потребуется больше памяти
	(хорошим стартом будет 2GB) и больше процессорной мощности, что может
	означать требование многопроцессорной (SMP) платформы.</p><p>Кроме того, вам потребуется быстрая дисковая подсистема, в первую
	очередь, для работы с репозиторием SVN (крайне рекомендуем RAID).
	Контроллер SCSI, оборудованный собственной памятью, также может
	ощутимо ускорить процесс, поскольку большая часть сервисов связана
	с большим количеством дисковых запросов небольшого размера.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-services"></a>2.4. Предоставляемые сервисы</h3></div></div></div><p>Всякое зеркало должно предоставлять набор основных сервисов.
	Помимо требуемого минимального набора, существуют дополнительные
	сервисы, которые администратор сервера может пожелать предоставлять.
	Этот раздел описывает, какие сервисы вы можете предоставлять, и какие
	действия для этого потребуются от вас.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-serv-ftp"></a>2.4.1. FTP (требуется для FTP зеркала)</h4></div></div></div><p>Это один из наиболее базовых сервисов; его предоставление требуется
	  для каждого зеркала, распространяющего файлы FreeBSD по FTP.
	  Доступ по FTP должен быть анонимным, и не должны применяться
	  какие-либо ограничения по соотношению объема передано/принято
	  (что вообще является, на наш взгляд, странным подходом).
	  Закачка (upload) файлов на сервер не требуется (и
	  <span class="emphasis"><em>должна</em></span> быть запрещена в разделе FreeBSD).
	  Кроме того, архив файлов FreeBSD должен быть доступен с путем
	  <code class="filename">/pub/FreeBSD</code>.</p><p>
	  Для предоставления анонимного FTP доступа может быть использован
	  целый ряд программ (перечислены в алфавитном порядке):</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">/usr/libexec/ftpd</code>: базовый
	      FTP-даемон FreeBSD.  Не забудьте прочитать <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ftpd</span>(8)</span></a>.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/ncftpd/pkg-descr">ftp/ncftpd</a>: коммерческий
	      пакет, свободен для использования в учебных целях.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/oftpd/pkg-descr">ftp/oftpd</a>: FTP-даемон,
	      написанный в основном с точки зрения защищенности.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/proftpd/pkg-descr">ftp/proftpd</a>: Модульный
	      и очень гибкий FTP-даемон.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/pure-ftpd/pkg-descr">ftp/pure-ftpd</a>:
	      Еще один FTP-даемон, разработанный с позиций защищенности.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/twoftpd/pkg-descr">ftp/twoftpd</a>:
	      См. предыдущий пункт.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/vsftpd/pkg-descr">ftp/vsftpd</a>:
	      <span class="quote"><<<span class="quote">очень защищенный</span>>></span> (<span class="quote"><<<span class="quote">very secure</span>>></span>)
	      ftpd.</p></li></ul></div><p><span class="application">ftpd</span>,
	  <span class="application">proftpd</span> и, возможно,
	  <span class="application">ncftpd</span> являются наиболее часто
	  встречающимися FTP серверами.
	  Прочие распространены среди существующих зеркал в существенно
	  меньшей степени.  Дополнительным поводом для рассмотрения может
	  являться возможность гибко ограничивать количество одновременных
	  соединений, что поможет вам удержать в нужных рамках потребление
	  пропускной способности ваших каналов и машинные ресурсы.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-serv-rsync"></a>2.4.2. Rsync (необязательный сервис для FTP зеркала)</h4></div></div></div><p>
	  <span class="application">Rsync</span> часто используется для
	  предоставления доступа к FTP-области FreeBSD, чтобы другие зеркала
	  могли синхронизироваться по вашему.  Протокол rsync во многом
	  отличается от FTP, в частности, он гораздо гуманнее с точки зрения
	  пропускной способности каналов, поскольку не требует передачи
	  измененного файла целиком (передаются лишь различия).  Взамен
	  <span class="application">Rsync</span> требует значительных объемов
	  памяти.  Размер каждого процесса зависит от размера синхронизируемого
	  модуля (в основном от количества директорий и файлов).
	  <span class="application">Rsync</span> может использовать в качестве
	  транспортного протокола <code class="command">rsh</code> или
	  <code class="command">ssh</code> (по умолчанию); также, может использоваться
	  внутренний протокол <span class="application">rsync</span> (этот метод
	  предпочтителен для публичных rsync-серверов).
	  Поддерживается авторизация клиентов и различные ограничения.
	  Для протокола rsync существует единственный пакет:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/rsync/pkg-descr">net/rsync</a></p></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-serv-http"></a>2.4.3. HTTP (требуется для веб-страниц, дополнителен для FTP зеркал)</h4></div></div></div><p>Если вы хотите поддерживать зеркало веб-страниц FreeBSD,
	  вам потребуется установить веб-сервер.
	  Дополнительно, вы можете предоставлять HTTP доступ к FTP-набору
	  файлов FreeBSD.  Выбор веб-сервера остается на усмотрение
	  администратора зеркала.  Некоторые из наиболее популярных
	  веб-серверов перечислены ниже.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache13/pkg-descr">www/apache13</a>:
	      <span class="application">Apache</span> - самый
	      широко распространённый в Интернете веб-сервер, активно
	      используемый проектом FreeBSD.  Вы можете также использовать
	      веб-сервер <span class="application">Apache</span> следующего
	      поколения, доступный в коллекции портов как
	      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache22/pkg-descr">www/apache22</a>.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/thttpd/pkg-descr">www/thttpd</a>:
	      Для обслуживания большого количества запросов к статическим
	      документам сервер thttpd может оказаться более эффективным, чем
	      <span class="application">Apache</span>.  thttpd отлично оптимизирован
	      по производительности при работе под FreeBSD.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/boa/pkg-descr">www/boa</a>:
	      <span class="application">Boa</span> - еще одна
	      альтернатива <span class="application">thttpd</span> и
	      <span class="application">Apache</span>.  Этот сервер
	      должен быть ощутимо более высокопроизводительным, чем
	      <span class="application">Apache</span>,
	      для полностью статических страниц.  На время написания данного
	      документа, впрочем, он не так хорошо оптимизирован под
	      FreeBSD, как <span class="application">thttpd</span>.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/nginx/pkg-descr">www/nginx</a>:
	      <span class="application">Nginx</span> -
	      высокопроизводительный веб-сервер, отличающийся низкими
	      требованиями к объему оперативной памяти и обладающий
	      ключевыми функциональными возможностями для построения
	      современной веб-инфраструктуры.  Функциональные
	      возможности включают следующее: HTTP-сервер, обратный
	      прокси для HTTP, почтовый прокси сервер, кеширование,
	      балансировка нагрузки, сжатие, ограничение количества
	      запросов, мультиплексирование и повторное использование
	      соединений, поддержка разгрузки SSL (SSL offload) и
	      вещания медиапотоков (media streaming).</p></li></ul></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="index.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="mirror-howto.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Поддержка зеркал FreeBSD </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 3. Как вести зеркало FreeBSD</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>