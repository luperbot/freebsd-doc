<?xml version="1.0" encoding="koi8-r"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>Поддержка зеркал FreeBSD</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="description" content="Рабочий вариант статьи, описывающей процесс создания и поддержки зеркала FreeBSD и адресованной администраторам зеркал." /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div xml:lang="ru" class="article" lang="ru"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68682064"></a>Поддержка зеркал FreeBSD</h1></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Jun</span> <span class="surname">Kuriyama</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a xmlns="" class="email" href="mailto:kuriyama@FreeBSD.org">kuriyama@FreeBSD.org</a>&gt;</code></p></div></div></div><div class="author"><h3 class="author"><span class="firstname">Valentino</span> <span class="surname">Vaschetto</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a xmlns="" class="email" href="mailto:logo@FreeBSD.org">logo@FreeBSD.org</a>&gt;</code></p></div></div></div><div class="author"><h3 class="author"><span class="firstname">Daniel</span> <span class="surname">Lang</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a xmlns="" class="email" href="mailto:dl@leo.org">dl@leo.org</a>&gt;</code></p></div></div></div><div class="author"><h3 class="author"><span class="firstname">Ken</span> <span class="surname">Smith</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a xmlns="" class="email" href="mailto:kensmith@FreeBSD.org">kensmith@FreeBSD.org</a>&gt;</code></p></div></div></div><div class="author"><h3 class="author"><span class="firstname">Дмитрий</span> <span class="surname">Морозовский</span></h3><span class="contrib">Перевод на русский язык: </span> </div></div></div><div>Издание: <a href="https://svnweb.freebsd.org/changeset/doc/"><span class="svnref"></span></a></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="trademarks"></a><p>FreeBSD это зарегистрированная торговая
  марка FreeBSD Foundation.</p><p>Многие из обозначений, используемые
  производителями и продавцами для обозначения своих продуктов, заявляются
  в качестве торговых марок.  Когда такие обозначения появляются в этом
  документе, и Проекту FreeBSD известно о торговой марке, к обозначению
  добавляется знак <span class="quote"><<<span class="quote">TM</span>>></span> или
  <span class="quote"><<<span class="quote">(R)</span>>></span>.</p></div></div><div>    .</div><div><div xmlns="http://www.w3.org/1999/xhtml" class="abstract"><div class="abstract-title">Аннотация</div><p>Рабочий вариант статьи, описывающей процесс создания и поддержки
	зеркала FreeBSD и адресованной администраторам зеркал.</p></div></div></div><hr /></div><div class="toc"><div class="toc-title">Содержание</div><dl class="toc"><dt><span class="sect1"><a href="#mirror-contact">1. Контактная информация</a></span></dt><dt><span class="sect1"><a href="#mirror-requirements">2. Требования к зеркалам FreeBSD</a></span></dt><dt><span class="sect1"><a href="#mirror-howto">3. Как вести зеркало FreeBSD</a></span></dt><dt><span class="sect1"><a href="#mirror-where">4. С какого сервера синхронизироваться</a></span></dt><dt><span class="sect1"><a href="#mirror-official">5. Официальные зеркала</a></span></dt><dt><span class="sect1"><a href="#mirror-statpages">6. Статистика некоторых зеркал</a></span></dt></dl></div><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">На текущий момент заявки на подключение новых зеркал
      не принимаются.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-contact"></a>1. Контактная информация</h2></div></div></div><p>Координаторы системы зеркал доступны по электронной почте по адресу
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:mirror-admin@FreeBSD.org">mirror-admin@FreeBSD.org</a>&gt;</code>.  Помимо этого, существует
      <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">Список рассылки, посвящённый зеркалированию FreeBSD</a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-requirements"></a>2. Требования к зеркалам FreeBSD</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-diskspace"></a>2.1. Дисковое пространство</h3></div></div></div><p>Одним из наиболее важных требований является дисковое пространство.
	В зависимости от набора релизов, архитектур и степени полноты зеркала
	вам может потребоваться огромный объем диска.  Не лишним будет
	помнить, что <span class="emphasis"><em>официальное</em></span> зеркало, скорее всего,
	должно быть полным.  Веб-страницы всегда должны
	зеркалироваться полностью.  Кроме того, учтите, что приводимые оценки
	объема относятся к состоянию на момент последнего редактирования
	данной статьи (9.3-RELEASE/10.1-RELEASE).
	Дальнейший процесс разработки и последующие релизы только увеличат
	требуемый объем.  Кроме того, разумно будет зарезервировать некоторое
	(10-20%) дополнительное пространство спокойствия ради.  Вот некоторые
	оценки объема:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Полное зеркало FTP: 1.4 TB</p></li><li class="listitem"><p>Комплект изменений CTM: 10 GB</p></li><li class="listitem"><p>Веб-страницы: 1 GB</p></li></ul></div><p>Текущее использование диска зеркалом FTP можно посмотреть на
	<a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/dir.sizes" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/dir.sizes</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-bandwidth"></a>2.2. Требования к сетевой связности и пропускной способности</h3></div></div></div><p>Разумеется, у вас должно быть подключение к интернет.
	Требуемая пропускная способность ваших каналов зависит от
	предполагаемого профиля использования вашего зеркала.
	Если вы собираетесь копировать некоторые части FreeBSD для
	локального использования на вашей машине или в интранете,
	требования могут быть много мягче, чем для публичного зеркала.
	Для официального зеркала необходимая пропускная способность
	увеличивается еще больше.  Мы можем дать лишь очень грубые
	оценки:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Зеркало для локального доступа: фактически минимум не
	    определен, но канал шириной менее 2 Mbps может сделать процесс
	    обновления мучительно медленным.</p></li><li class="listitem"><p>Неофициальное публичное зеркало: 34 Mbps выглядит
	    неплохо для начала.</p></li><li class="listitem"><p>Официальное зеркало: рекомендуется канал шириной более
	    100 Mbps; кроме того, ваша машина должна стоять как можно ближе к
	    граничным маршрутизаторам вашей сети.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-system"></a>2.3. Системные требования, процессор и память</h3></div></div></div><p>Эти требования в первую очередь определяются максимальным ожидаемым
	количеством клиентов (устанавливается администратором сервера).
	Также, на требуемые ресурсы влияет список сервисов, которые вы будете
	предоставлять.  Зеркала FTP и/или HTTP не требуют особенно много
	ресурсов.  Будьте на чеку, если планируете предоставлять rsync.
	Выбор rsync может иметь огромное влияние на требования к аппаратным
	ресурсам, поскольку rsync признан "прожорливым" по памяти.
	Вот некоторые советы по конфигурации аппаратной части сервера:</p><p>Для умеренно посещаемого сайта, предоставляющего
	<span class="application">rsync</span>, можно использовать процессор
	с частотой 800MHz - 1 GHz и по крайней мере 512MB памяти.
	Скорее всего, данная конфигурация может считаться минимальной для
	<span class="emphasis"><em>официального</em></span> зеркала.</p><p>Для регулярно посещаемого сайта вам потребуется больше памяти
	(хорошим стартом будет 2GB) и больше процессорной мощности, что может
	означать требование многопроцессорной (SMP) платформы.</p><p>Кроме того, вам потребуется быстрая дисковая подсистема, в первую
	очередь, для работы с репозиторием SVN (крайне рекомендуем RAID).
	Контроллер SCSI, оборудованный собственной памятью, также может
	ощутимо ускорить процесс, поскольку большая часть сервисов связана
	с большим количеством дисковых запросов небольшого размера.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-services"></a>2.4. Предоставляемые сервисы</h3></div></div></div><p>Всякое зеркало должно предоставлять набор основных сервисов.
	Помимо требуемого минимального набора, существуют дополнительные
	сервисы, которые администратор сервера может пожелать предоставлять.
	Этот раздел описывает, какие сервисы вы можете предоставлять, и какие
	действия для этого потребуются от вас.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-serv-ftp"></a>2.4.1. FTP (требуется для FTP зеркала)</h4></div></div></div><p>Это один из наиболее базовых сервисов; его предоставление требуется
	  для каждого зеркала, распространяющего файлы FreeBSD по FTP.
	  Доступ по FTP должен быть анонимным, и не должны применяться
	  какие-либо ограничения по соотношению объема передано/принято
	  (что вообще является, на наш взгляд, странным подходом).
	  Закачка (upload) файлов на сервер не требуется (и
	  <span class="emphasis"><em>должна</em></span> быть запрещена в разделе FreeBSD).
	  Кроме того, архив файлов FreeBSD должен быть доступен с путем
	  <code class="filename">/pub/FreeBSD</code>.</p><p>
	  Для предоставления анонимного FTP доступа может быть использован
	  целый ряд программ (перечислены в алфавитном порядке):</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">/usr/libexec/ftpd</code>: базовый
	      FTP-даемон FreeBSD.  Не забудьте прочитать <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ftpd</span>(8)</span></a>.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/ncftpd/pkg-descr">ftp/ncftpd</a>: коммерческий
	      пакет, свободен для использования в учебных целях.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/oftpd/pkg-descr">ftp/oftpd</a>: FTP-даемон,
	      написанный в основном с точки зрения защищенности.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/proftpd/pkg-descr">ftp/proftpd</a>: Модульный
	      и очень гибкий FTP-даемон.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/pure-ftpd/pkg-descr">ftp/pure-ftpd</a>:
	      Еще один FTP-даемон, разработанный с позиций защищенности.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/twoftpd/pkg-descr">ftp/twoftpd</a>:
	      См. предыдущий пункт.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/vsftpd/pkg-descr">ftp/vsftpd</a>:
	      <span class="quote"><<<span class="quote">очень защищенный</span>>></span> (<span class="quote"><<<span class="quote">very secure</span>>></span>)
	      ftpd.</p></li></ul></div><p><span class="application">ftpd</span>,
	  <span class="application">proftpd</span> и, возможно,
	  <span class="application">ncftpd</span> являются наиболее часто
	  встречающимися FTP серверами.
	  Прочие распространены среди существующих зеркал в существенно
	  меньшей степени.  Дополнительным поводом для рассмотрения может
	  являться возможность гибко ограничивать количество одновременных
	  соединений, что поможет вам удержать в нужных рамках потребление
	  пропускной способности ваших каналов и машинные ресурсы.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-serv-rsync"></a>2.4.2. Rsync (необязательный сервис для FTP зеркала)</h4></div></div></div><p>
	  <span class="application">Rsync</span> часто используется для
	  предоставления доступа к FTP-области FreeBSD, чтобы другие зеркала
	  могли синхронизироваться по вашему.  Протокол rsync во многом
	  отличается от FTP, в частности, он гораздо гуманнее с точки зрения
	  пропускной способности каналов, поскольку не требует передачи
	  измененного файла целиком (передаются лишь различия).  Взамен
	  <span class="application">Rsync</span> требует значительных объемов
	  памяти.  Размер каждого процесса зависит от размера синхронизируемого
	  модуля (в основном от количества директорий и файлов).
	  <span class="application">Rsync</span> может использовать в качестве
	  транспортного протокола <code class="command">rsh</code> или
	  <code class="command">ssh</code> (по умолчанию); также, может использоваться
	  внутренний протокол <span class="application">rsync</span> (этот метод
	  предпочтителен для публичных rsync-серверов).
	  Поддерживается авторизация клиентов и различные ограничения.
	  Для протокола rsync существует единственный пакет:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/rsync/pkg-descr">net/rsync</a></p></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-serv-http"></a>2.4.3. HTTP (требуется для веб-страниц, дополнителен для FTP зеркал)</h4></div></div></div><p>Если вы хотите поддерживать зеркало веб-страниц FreeBSD,
	  вам потребуется установить веб-сервер.
	  Дополнительно, вы можете предоставлять HTTP доступ к FTP-набору
	  файлов FreeBSD.  Выбор веб-сервера остается на усмотрение
	  администратора зеркала.  Некоторые из наиболее популярных
	  веб-серверов перечислены ниже.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache13/pkg-descr">www/apache13</a>:
	      <span class="application">Apache</span> - самый
	      широко распространённый в Интернете веб-сервер, активно
	      используемый проектом FreeBSD.  Вы можете также использовать
	      веб-сервер <span class="application">Apache</span> следующего
	      поколения, доступный в коллекции портов как
	      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache22/pkg-descr">www/apache22</a>.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/thttpd/pkg-descr">www/thttpd</a>:
	      Для обслуживания большого количества запросов к статическим
	      документам сервер thttpd может оказаться более эффективным, чем
	      <span class="application">Apache</span>.  thttpd отлично оптимизирован
	      по производительности при работе под FreeBSD.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/boa/pkg-descr">www/boa</a>:
	      <span class="application">Boa</span> - еще одна
	      альтернатива <span class="application">thttpd</span> и
	      <span class="application">Apache</span>.  Этот сервер
	      должен быть ощутимо более высокопроизводительным, чем
	      <span class="application">Apache</span>,
	      для полностью статических страниц.  На время написания данного
	      документа, впрочем, он не так хорошо оптимизирован под
	      FreeBSD, как <span class="application">thttpd</span>.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/nginx/pkg-descr">www/nginx</a>:
	      <span class="application">Nginx</span> -
	      высокопроизводительный веб-сервер, отличающийся низкими
	      требованиями к объему оперативной памяти и обладающий
	      ключевыми функциональными возможностями для построения
	      современной веб-инфраструктуры.  Функциональные
	      возможности включают следующее: HTTP-сервер, обратный
	      прокси для HTTP, почтовый прокси сервер, кеширование,
	      балансировка нагрузки, сжатие, ограничение количества
	      запросов, мультиплексирование и повторное использование
	      соединений, поддержка разгрузки SSL (SSL offload) и
	      вещания медиапотоков (media streaming).</p></li></ul></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-howto"></a>3. Как вести зеркало FreeBSD</h2></div></div></div><p>Теперь вам известно, какая потребуется машина и как предоставлять
      сервисы, но не как получить их самому. :-)
      В этом разделе описывается процесс ведения зеркала и поддержания
      его в актуальном состоянии, в том числе какие инструменты
      использовать и какие сайты выбирать в качестве источников для
      синхронизации.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-ftp-rsync"></a>3.1. Зеркалирование FTP-области</h3></div></div></div><p>Файлы, доступные по FTP, составляют большую часть зеркала.
	Они включают <span class="emphasis"><em>дистрибутивные наборы</em></span>, необходимые
	для установки по сети, <span class="emphasis"><em>ветви (branches)</em></span>,
	в которых отражено текущее состояние исходных текстов,
	<span class="emphasis"><em>образы ISO</em></span> для записи компакт-дисков с
	дистрибутивами для установки, образами <span class="quote"><<<span class="quote">живых</span>>></span> файловых
	систем и пакетами, дерево портов, исходные дистрибутивы для сборки
	портов и кучу готовых пакетов.  И, разумеется, все
	вышеописанное - для разных версий FreeBSD и различных
	архитектур.</p><p>Наиболее эффективным будет синхронизация FTP-области при помощи
	  <span class="application">rsync</span>.  Для этого следует установить
	  пакет <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/rsync/pkg-descr">net/rsync</a>, который был
	  описан в разделе <a class="xref" href="#mirror-serv-rsync" title="2.4.2. Rsync (необязательный сервис для FTP зеркала)">Раздел 2.4.2, <<Rsync (необязательный сервис для FTP зеркала)>></a>.
	  Поскольку доступ по протоколу <span class="application">rsync</span> не
	  является обязательным, выбранный вами сайт может его не
	  поддерживать.  Возможно, вам придется немного поискать в сетевой
	  окрестности зеркало, поддерживающее
	  <span class="application">rsync</span>.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Поскольку от количества клиентов
	    <span class="application">rsync</span> ощутимо зависит загрузка сервера,
	    большинство администраторов вводят ограничения доступа.  Для
	    поддержания зеркала вам следует связаться с администратором сайта,
	    с которым вы будете синхронизироваться, для уточнения локальных
	    правил и, возможно, для внесения в них исключения для вас
	    (поскольку вы также поддерживаете зеркало).</p></div><p>Строка для синхронизации FreeBSD по rsync выглядит примерно
	  так:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>rsync -vaHz --delete rsync://ftp4.de.FreeBSD.org/FreeBSD/ /pub/FreeBSD/</code></strong></pre><p>Загляните в документацию по <span class="application">rsync</span>,
	  также доступную по адресу
	  <a class="link" href="http://rsync.samba.org/" target="_top">http://rsync.samba.org/</a>
	  за дополнительной информацией по различным опциям rsync.
	  Обратите внимание, что в случае синхронизации модуля целиком (а не
	  отдельного каталога) необходимо явно указать результирующий каталог,
	  потому что каталог с именем модуля (в данном случае "FreeBSD")
	  не создается.  Для поддержания актуальности вам потребуется
	  создать скрипт для запуска подобной команды из <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-www"></a>3.2. Зеркалирование страниц WWW</h3></div></div></div><p>Веб-сайт FreeBSD следует зеркалировать исключительно при
	помощи <span class="application">rsync</span>.</p><p>Командная строка для синхронизации веб-сайта FreeBSD
	выглядит примерно так:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>rsync -vaHz --delete rsync://bit0.us-west.freebsd.org/FreeBSD-www-data/ /usr/local/www/</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-how-often"></a>3.3. Как часто синхронизироваться?</h3></div></div></div><p>Каждое зеркало должно регулярно обновляться.  Вам потребуется
	какой-то набор скриптов, выполняемых посредством <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>.
	Поскольку каждый администратор, как правило, пишет такие скрипты сам
	и на свой лад, мы не можем выдать конкретных указаний.  Общие же советы
	выглядят так:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Создайте скрипт с командой, которая запустит нужное приложение
	    для обновления зеркала.  Рекомендуем использовать скрипт на языке
	    обычного <code class="command">/bin/sh</code>.</p></li><li class="step"><p>Добавьте команд перенаправления вывода, чтобы записать
	    диагностику работы в файл.</p></li><li class="step"><p>Попробуйте, как ваш скрипт работает.  По завершении проверьте
	    логи.</p></li><li class="step"><p>При помощи утилиты <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">crontab</span>(1)</span></a> добавьте ваш скрипт в таблицу
	    регулярных заданий <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">crontab</span>(5)</span></a> соответствующего пользователя.
	    Это должен быть пользователь, отличный от пользователя FTP-даемона,
	    чтобы файлы в FTP-области без атрибута "чтение для всех" не были
	    доступны анонимным FTP-пользователям.  Данное свойство используется
	    для тестирования перед выходом новых релизов, для того чтобы
	    удостовериться, что все официальные зеркала содержат все
	    необходимые файлы к моменту официального объявления релиза.</p></li></ol></div><p>Некоторые рекомендуемые установки частоты обновления:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FTP-набор: раз в сутки</p></li><li class="listitem"><p>WWW-страницы: раз в сутки</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-where"></a>4. С какого сервера синхронизироваться</h2></div></div></div><p>Это важный вопрос, так что мы попытаемся пояснить, откуда берутся
      ответы.  Для начала повторим еще несколько раз: <span class="emphasis"><em>никогда
      не синхронизируйтесь с <code class="systemitem">ftp.FreeBSD.org</code>
      </em></span>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-organization"></a>4.1. Организация системы зеркал</h3></div></div></div><p>Зеркала организуются по странам.  Имена хостов всех официальных
	зеркал построены по принципу
	<code class="systemitem">ftpN.CC.FreeBSD.org</code>,
	где <span class="emphasis"><em>CC</em></span> (country code) - домен
	верхнего уровня страны, где расположено зеркало,
	<span class="emphasis"><em>N</em></span> - номер зеркала в данной стране.
	Этот же принцип применим к именам хостов
	<code class="systemitem">wwwN.CC.FreeBSD.org</code> и т.п.
	Кроме того, есть зеркала без доменной части, обозначающей страну.
	Все они имеют очень хорошие внешние каналы и обслуживают большое число
	одновременных соединений.
	Имя <code class="systemitem">ftp.FreeBSD.org</code> на самом деле
	указывает на две машины, одна из которых в настоящее время находится
	в Дании, а другая в США.
	Ни одна из этих машин <span class="emphasis"><em>НЕ</em></span> является основным
	сайтом, и потому не должна использоваться для синхронизации.
	Масса документации для <span class="quote"><<<span class="quote">живых</span>>></span> пользователей указывает на
	<code class="systemitem">ftp.FreeBSD.org</code>, так что автоматическим
	системам ведения зеркал следует выбирать другие источники
	синхронизации.</p><p>Кроме того, существует иерархия зеркал в терминах их удаленности от
	центра, или <span class="emphasis"><em>слоях</em></span>.  Основные сайты могут быть
	описаны как <span class="emphasis"><em>Зеркала нулевого слоя</em></span>.  Зеркала,
	синхронизирующиеся по ним, считаются <span class="emphasis"><em>слоем 1</em></span>,
	следующие - <span class="emphasis"><em>слоем 2</em></span> и т.д.  Официальные
	сайты приглашаются на низкие слои, однако следует помнить, что чем
	меньше номер слоя, тем выше требования к зеркалу, как было описано в
	<a class="xref" href="#mirror-requirements" title="2. Требования к зеркалам FreeBSD">Раздел 2, <<Требования к зеркалам FreeBSD>></a>.  Помимо того, доступ к
	зеркалам 1 слоя может быть ограничен; безусловно ограничен доступ к
	основным сайтам.  Иерархия <span class="emphasis"><em>слоев</em></span> не отражается в
	DNS и, вообще говоря, нигде (кроме мастер-сайтов) не документирована.
	Тем не менее, официальные зеркала с малыми (1-4, как правило) номерами
	обычно представляют первый слой.  (Это грубая оценка, и ни в коем
	случае не правило).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-where"></a>4.2. Так откуда же мне синхронизироваться?</h3></div></div></div><p>Главное - НЕ с
	<code class="systemitem">ftp.FreeBSD.org</code>.  Короткий ответ:
	с зеркала, которое расположено недалеко от вас в терминах Интернет,
	и/или доступ к которому наилучший.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-simple"></a>4.2.1. Я хочу получить копию зеркала хоть откуда-нибудь!</h4></div></div></div><p>Если у вас нет каких-либо специальных предпочтений или
	  требований, см. <a class="xref" href="#mirror-where-where" title="4.2. Так откуда же мне синхронизироваться?">Раздел 4.2, <<Так откуда же мне синхронизироваться?>></a>.
	  Это означает:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Выберите те из них, с которыми вам работать быстрее всего
	      (меньшее число промежуточных узлов и время отклика), и которые
	      предоставляют нужные вам сервисы (такие как
	      <span class="application">rsync</span>).</p></li><li class="step"><p>Свяжитесь с администраторами выбранного сервера, опишите
	      ваши запросы и уточните их правила.</p></li><li class="step"><p>Сконфигурируйте ваше зеркало, как описывалось выше.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-official"></a>4.2.2. Я поддерживаю официальное зеркало, какой сайт
	  мне выбрать?</h4></div></div></div><p>В основном, правила, описанные в
	  <a class="xref" href="#mirror-where-simple" title="4.2.1. Я хочу получить копию зеркала хоть откуда-нибудь!">Раздел 4.2.1, <<Я хочу получить копию зеркала хоть откуда-нибудь!>></a>, применимы.  Дополнительно
	  можно убедиться, что выбранный сайт принадлежит низкому слою.
	  Другие соображения относительно <span class="emphasis"><em>официальных</em></span>
	  зеркал описаны в <a class="xref" href="#mirror-official" title="5. Официальные зеркала">Раздел 5, <<Официальные зеркала>></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-master"></a>4.2.3. Мне нужен доступ к основным сайтам!</h4></div></div></div><p>При наличии достаточных причин вы можете получить доступ
	  к одному из основных сайтов.  Доступ к ним ограничен; существуют
	  специальные правила их использования.  Наличие у вас статуса
	  <span class="emphasis"><em>официального</em></span> зеркала, безусловно, является
	  хорошим подспорьем.  В противном случае убедитесь, что ваша
	  страна действительно нуждается еще в одном зеркале.
	  Если их уже три или более, сначала свяжитесь с администратором
	  соответствующей зоны DNS (<code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@CC.FreeBSD.org">hostmaster@CC.FreeBSD.org</a>&gt;</code>)
	  или напишите в <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">Список рассылки, посвящённый зеркалированию FreeBSD</a>.</p><p>Доступ к одному из мастер-сайтов или подходящему зеркалу 1 уровня
	  вам помогут обеспечить те же, кто помогал вам получить статус
	  <span class="emphasis"><em>официального</em></span> зеркала.  В случае неудачи
	  свяжитесь с <code class="email">&lt;<a xmlns="" class="email" href="mailto:mirror-admin@FreeBSD.org">mirror-admin@FreeBSD.org</a>&gt;</code> и попросите
	  помощи у них.</p><p>Существует один основной сайт для синхронизации набора файлов
	  FTP.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-master-ftp"></a>4.2.3.1. ftp-master.FreeBSD.org</h5></div></div></div><p>Это основной сервер для синхронизации FTP набора.</p><p>В дополнение к FTP, <code class="systemitem">ftp-master.FreeBSD.org</code>
	    поддерживает доступ по <span class="application">rsync</span>.
	    Использование этих протоколов описано в
	    <a class="xref" href="#mirror-ftp-rsync" title="3.1. Зеркалирование FTP-области">Раздел 3.1, <<Зеркалирование FTP-области>></a>.</p><p>Приветствуется предоставление зеркалами
	    <span class="emphasis"><em>1 уровня</em></span> доступа к FTP-области по протоколу
	    <span class="application">rsync</span>.</p></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-official"></a>5. Официальные зеркала</h2></div></div></div><p>Официальные зеркала обладают следующим свойствами:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>a) имеют запись в домене <code class="systemitem">FreeBSD.org</code>
	  (обычно типа CNAME).</p></li><li class="listitem"><p>b) присутствуют в списке официальных зеркал в Руководстве
	  по FreeBSD и другой документации.</p></li></ul></div><p>На настоящий момент это все, что отличает их от прочих зеркал.
      Официальные зеркала не обязательно принадлежат к
      <span class="emphasis"><em>Первому уровню</em></span>, однако, вряд ли можно найти
      зеркало <span class="emphasis"><em>уровня 1</em></span>, не являющееся официальным.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-official-requirements"></a>5.1. Отдельные требования к официальным зеркалам 1 уровня</h3></div></div></div><p>Описать требования для всех официальных зеркал не так просто,
	поскольку проект FreeBSD достаточно мягок в этом отношении.
	Несколько проще указать, что требуется от <span class="emphasis"><em>официальных
	зеркал уровня 1</em></span>.  Прочие официальные зеркала должны
	рассматривать этот список как <span class="emphasis"><em>настойчивые
	пожелания</em></span>.</p><p>Зеркала 1 уровня должны:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>поддерживать полный список файлов</p></li><li class="listitem"><p>предоставлять доступ для других зеркал</p></li><li class="listitem"><p>обеспечивать доступ по протоколам
	    <span class="application">FTP</span> и
	    <span class="application">rsync</span>.</p></li></ul></div><p>Кроме того, администратор такого зеркала должен быть подписан
	на <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">Список рассылки, посвящённый зеркалированию FreeBSD</a>.  См. <a class="link" href="http://www.FreeBSD.org/doc/ru_RU.KOI8-R/books/handbook/eresources.html#ERESOURCES-MAIL" target="_top">здесь</a>
	для дополнительной информации о подписке.</p><div xmlns="" class="important"><h3 class="admontitle">Важно: </h3><p xmlns="http://www.w3.org/1999/xhtml">Администраторы зеркал, в особенности 1 уровня, должны
	  <span class="emphasis"><em>очень</em></span> внимательно следить за
	  <a class="link" href="http://www.FreeBSD.org/releng/" target="_top">графиком релизов</a>.
	  Это поможет подготовиться к крупным всплескам нагрузки на зеркало,
	  которые всегда происходят после очередного релиза.</p><p xmlns="http://www.w3.org/1999/xhtml">Кроме того, важно поддерживать актуальность зеркал (в особенности
	  зеркал уровня 1).  Если Зеркало1 не синхронизировалось в течение
	  длительного времени, то зеркала следующего уровня будут
	  синхронизироваться по устаревшей информации и т.д.
	  Поддерживайте актуальность ваших зеркал!</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-official-become"></a>5.2. Как стать официальным зеркалом?</h3></div></div></div><p>На текущий момент заявки на подключение новых зеркал
	не принимаются.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-statpages"></a>6. Статистика некоторых зеркал</h2></div></div></div><p>Вот несколько ссылок на статистику использования зеркал</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-statpagesftp"></a>6.1. Статистика FTP сайтов</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ftp.is.FreeBSD.org - <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@is.FreeBSD.org">hostmaster@is.FreeBSD.org</a>&gt;</code> -
	    <a class="link" href="http://www.rhnet.is/status/draupnir/draupnir.html" target="_top">
	    (загрузка канала)</a>
	    <a class="link" href="http://www.rhnet.is/status/ftp/ftp-notendur.html" target="_top">(FTP
	    процессы)</a>
	    <a class="link" href="http://www.rhnet.is/status/ftp/http-notendur.html" target="_top">
	    (HTTP процессы)</a></p></li><li class="listitem"><p>ftp.cz.FreeBSD.org - <code class="email">&lt;<a xmlns="" class="email" href="mailto:cejkar@fit.vutbr.cz">cejkar@fit.vutbr.cz</a>&gt;</code> -
	    <a class="link" href="http://www.cz.FreeBSD.org/stats/mrtg/net.html" target="_top">
	    (загрузка канала)</a>
	    <a class="link" href="http://www.freebsd.cz/stats/mrtg/ftpd.html" target="_top">
	    (FTP процессы)</a>
	    <a class="link" href="http://www.freebsd.cz/stats/mrtg/rsyncd.html" target="_top">
	    (rsync процессы)</a></p></li><li class="listitem"><p>ftp2.ru.FreeBSD.org - <code class="email">&lt;<a xmlns="" class="email" href="mailto:mirror@macomnet.ru">mirror@macomnet.ru</a>&gt;</code> -
	    <a class="link" href="http://mirror.macomnet.net/mrtg/mirror.macomnet.net_195.128.64.25.html" target="_top">(Bandwidth)</a>
	    <a class="link" href="http://mirror.macomnet.net/mrtg/mirror.macomnet.net_proc.html" target="_top">(HTTP and FTP users)</a></p></li></ul></div></div></div></div></body></html>