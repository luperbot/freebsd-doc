<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>2. Процесс выпуска релиза</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Подготовка релизов FreeBSD" /><link rel="up" href="index.html" title="Подготовка релизов FreeBSD" /><link rel="prev" href="index.html" title="Подготовка релизов FreeBSD" /><link rel="next" href="release-build.html" title="3. Построение релизов" /><link rel="copyright" href="trademarks.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2. Процесс выпуска релиза</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="index.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="release-build.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="release-proc"></a>2. Процесс выпуска релиза</h2></div></div></div><p>Новые релизы FreeBSD выпускаются из ветки -STABLE с интервалом
      примерно в четыре месяца.  Процесс выпуска релизов FreeBSD начинается за
      45 дней до предполагаемой даты релиза с того, что ответственный за релиз
      посылает сообщение по электронной почте в адрес списков рассылки для
      разработчиков, чтобы напомнить последним о наличии всего лишь 15 дней на
      внесение новых изменений до момента заморозки кода.  В этот период многие
      разработчики выполняют действия, известные как
      <span class="quote"><<<span class="quote">MFC-переносы</span>>></span>.  <acronym class="acronym">MFC</acronym> означает
      <span class="quote"><<<span class="quote">Merge From CURRENT</span>>></span> (перенос из CURRENT) и описывает
      процесс переноса протестированных изменений из нашего дерева разработки
      -CURRENT в наше дерево -STABLE.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72101200"></a>2.1. Просмотр кода</h3></div></div></div><p>За тридцать дней до предполагаемого релиза хранилище исходных
	текстов переводится в режим <span class="quote"><<<span class="quote">стабилизации кода</span>>></span>.  В этот
	период все изменения в дереве -STABLE должны подтверждаться Группа Выпуска Релизов FreeBSD <code class="email">&lt;<a xmlns="" class="email" href="mailto:re@FreeBSD.org">re@FreeBSD.org</a>&gt;</code>.
	В первый 15-дневный период разрешены следующие типы изменений:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Исправления ошибок.</p></li><li class="listitem"><p>Обновление документации.</p></li><li class="listitem"><p>Исправления любого характера, касающиеся безопасности.</p></li><li class="listitem"><p>Незначительные исправления в драйверах устройств, такие, как,
	    например, добавление новых ID устройств.</p></li><li class="listitem"><p>Любые другие изменения, которые одобряет группа подготовки
	    релиза, с учётом потенциального риска.</p></li></ul></div><p>После первых 15 дней стабилизации кода выпускается
	<span class="emphasis"><em>предварительный релиз</em></span>, предназначенный для широкого
	тестирования, а код переводится в состояние <span class="quote"><<<span class="quote">заморозки</span>>></span>,
	когда становится гораздо труднее доказывать необходимость внесения
	новых изменений в систему, если они не касаются исправления серьёзных
	ошибок или информационной безопасности.  Во время заморозки кода каждую
	неделю выпускается не менее одной предварительной версии релиза, до тех
	пор, пока не будет готов окончательный вариант релиза.  В дни,
	предшествующие выпуску окончательного релиза, группа его подготовки
	работает в постоянном контакте со службой безопасности и людьми,
	поддерживающими документацию и порты, чтобы обеспечить доступность всех
	компонентов, необходимых для успешного выпуска релиза.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72123216"></a>2.2. Контрольный список для проверки окончательного релиза</h3></div></div></div><p>После того, как для широкого тестирования было выпущено несколько
	предварительных релизов и все основные проблемы были решены, может
	начаться процесс <span class="quote"><<<span class="quote">шлифовки</span>>></span> окончательного релиза.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rel-branch"></a>2.2.1. Создание ветки релиза</h4></div></div></div><p>Как сказано во вводной части, ветка
	  <code class="literal">RELENG_<em class="replaceable"><code>X</code></em>_<em class="replaceable"><code>Y</code></em></code>
	  является сравнительно новым добавлением в нашей методологии
	  подготовки релизов.  Первым шагом в создании этой ветки является
	  проверка того, что вы работаете с самой последней версией исходных
	  текстов <code class="literal">RELENG_<em class="replaceable"><code>X</code></em></code>, из
	  <span class="emphasis"><em>которой</em></span> вы хотите создать новую ветку.</p><pre class="screen">/usr/src<code class="prompt">#</code> <strong class="userinput"><code>cvs update -rRELENG_4 -P -d</code></strong></pre><p>Следующим шагом является создание <span class="emphasis"><em>тэга</em></span> точки
	  ответвления, чтобы диффы облегчили работу с началом ветки в CVS:</p><pre class="screen">/usr/src<code class="prompt">#</code> <strong class="userinput"><code>cvs rtag -rRELENG_4 RELENG_4_8_BP src</code></strong></pre><p>После этого создаётся тэг новой ветки по команде:</p><pre class="screen">/usr/src<code class="prompt">#</code> <strong class="userinput"><code>cvs rtag -b -rRELENG_4_8_BP RELENG_4_8 src</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="emphasis"><em>Использование тэгов
	    <code class="literal">RELENG_<em class="replaceable"><code>*</code></em></code> разрешено
	    только менеджерам CVS и участникам группы по выпуску
	    релизов.</em></span></p></div><div class="sidebar"><div xmlns="" class="titlepage"></div><p><span class="quote"><<<span class="quote"><span class="emphasis"><em>Тэгом</em></span></span>>></span> в понятии CVS
	    называют метку, которая идентифицирует исходный текст в некоторый
	    момент времени.  Вводя тэг в дерево, мы обеспечиваем то, что в
	    будущем тот, кто строит релиз, всегда сможет воспользоваться тем же
	    самым кодом, что использовался нами для создания официальных
	    релизов Проекта FreeBSD.</p></div><div class="mediaobject" align="center"><img src="branches-head.png" align="middle" alt="Ветви разработки FreeBSD" /></div><div class="mediaobject" align="center"><img src="branches-releng3.png" align="middle" alt="Ветка FreeBSD 3.x STABLE" /></div><div class="mediaobject" align="center"><img src="branches-releng4.png" align="middle" alt="Ветка FreeBSD 4.x STABLE" /></div><div class="mediaobject" align="center"><img src="branches-releng5.png" align="middle" alt="Ветка FreeBSD 5.x STABLE" /></div><div class="mediaobject" align="center"><img src="branches-releng6.png" align="middle" alt="Ветка FreeBSD 6.x STABLE" /></div><div class="mediaobject" align="center"><img src="branches-releng7.png" align="middle" alt="Ветка FreeBSD 7.x STABLE" /></div><div class="mediaobject" align="center"><img src="branches-releng8.png" align="middle" alt="Ветка FreeBSD 8.x STABLE" /></div><div class="mediaobject" align="center"><img src="branches-releng9.png" align="middle" alt="Ветка FreeBSD 9.x STABLE" /></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="versionbump"></a>2.2.2. Увеличение номера версии</h4></div></div></div><p>Перед тем, как окончательный релиз будет помечен, построен и
	  выпущен, необходимо модифицировать следующие файлы, отразив в них
	  корректную версию FreeBSD:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">doc/ru_RU.KOI8-R/books/handbook/mirrors/chapter.xml</code></p></li><li class="listitem"><p><code class="filename">doc/en_US.ISO8859-1/books/porters-handbook/book.xml</code></p></li><li class="listitem"><p><code class="filename">doc/share/xml/freebsd.ent</code></p></li><li class="listitem"><p><code class="filename">src/Makefile.inc1</code></p></li><li class="listitem"><p><code class="filename">src/UPDATING</code></p></li><li class="listitem"><p><code class="filename">src/gnu/usr.bin/groff/tmac/mdoc.local</code></p></li><li class="listitem"><p><code class="filename">src/release/Makefile</code></p></li><li class="listitem"><p><code class="filename">src/release/doc/en_US.ISO8859-1/share/xml/release.dsl</code></p></li><li class="listitem"><p><code class="filename">src/release/doc/share/examples/Makefile.relnotesng</code></p></li><li class="listitem"><p><code class="filename">src/release/doc/share/xml/release.ent</code></p></li><li class="listitem"><p><code class="filename">src/share/examples/cvsup/standard-supfile</code></p></li><li class="listitem"><p><code class="filename">src/sys/conf/newvers.sh</code></p></li><li class="listitem"><p><code class="filename">src/sys/sys/param.h</code></p></li><li class="listitem"><p><code class="filename">src/usr.sbin/pkg_install/add/main.c</code></p></li><li class="listitem"><p><code class="filename">www/en/docs/man.xml</code></p></li><li class="listitem"><p><code class="filename">www/en/cgi/ports.cgi</code></p></li><li class="listitem"><p><code class="filename">ports/Tools/scripts/release/config</code></p></li></ul></div><p>Новый релиз должен быть также отражён в файлах замечаний к релизу
	  и информации о замеченных ошибках (в ветке релиза), а файлы
	  соответствующим образом обрезаны (в ветке stable/current):</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">src/release/doc/en_US.ISO8859-1/relnotes/common/new.xml</code></p></li><li class="listitem"><p><code class="filename">src/release/doc/en_US.ISO8859-1/errata/article.xml</code></p></li></ul></div><p>Утилита <span class="application">sysinstall</span> должна быть
	  обновлена и указывать количество доступных портов и объём дискового
	  пространства, требуемого для Коллекции Портов[4].  На данный момент эта
	  информация хранится в файле
	  <code class="filename">src/usr.sbin/sysinstall/dist.c</code>.</p><p>После построения релиза для оповещения мирового сообщества о
	  выпуске релиза необходимо обновить некоторые файлы.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">doc/share/images/articles/releng/branches-releng<em class="replaceable"><code>X</code></em>.pic</code></p></li><li class="listitem"><p><code class="filename">www/share/xml/advisories.xml</code></p></li><li class="listitem"><p><code class="filename">www/share/xml/includes.release.xml</code></p></li><li class="listitem"><p><code class="filename">www/share/xml/includes.release.xsl</code></p></li><li class="listitem"><p><code class="filename">www/en/releases/*</code></p></li><li class="listitem"><p><code class="filename">www/en/releng/index.xml</code></p></li><li class="listitem"><p><code class="filename">www/en/news/news.xml</code></p></li><li class="listitem"><p><code class="filename">www/en/search/web.atoz</code></p></li><li class="listitem"><p><code class="filename">src/share/misc/bsd-family-tree</code></p></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="versionbump-major"></a>2.2.3. Подготовка новой старшей релиз ветки
	(RELENG_<em class="replaceable"><code>X</code></em>)</h4></div></div></div><p>Когда новая старшая релиз ветка, такая как <code class="literal">RELENG_6</code>
	ответвляется из HEAD, некоторые дополнительные файлы должны
	быть обновлены перед тем, как релизы будут созданы из
	этой новой ветки.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">src/share/examples/cvsup/stable-supfile</code>
	    - когда применимо, должен быть обновлен, чтобы указывать на новую
	    -STABLE ветку.</p></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72339024"></a>2.2.4. Создание тэгов релиза</h4></div></div></div><p>При готовности окончательного релиза следующая команда создаст
	  тэг <code class="literal">RELENG_4_8_0_RELEASE</code>.</p><pre class="screen">/usr/src<code class="prompt">#</code> <strong class="userinput"><code>cvs rtag -rRELENG_4_8 RELENG_4_8_0_RELEASE src</code></strong></pre><p>Менеджеры документации и портов отвечают за внесение тэга в
	  соответствующие ветки с тэгом
	  <code class="literal">RELEASE_4_8_0</code>.</p><p>Иногда в последний момент, уже <span class="emphasis"><em>после</em></span>
	  создания последних тэгов может потребоваться внесение исправлений.
	  На практике это не является проблемой, так как <acronym class="acronym">CVS</acronym>
	  позволяет выполнять манипуляции с тэгами по команде <code class="command">cvs
	  tag -d <em class="replaceable"><code>tagname filename</code></em></code>.  Очень
	  важно, чтобы все последние изменения были помечены соответствующим
	  тэгом, как часть релиза.  Релизы FreeBSD должны быть всегда
	  повторяемыми.  Локальные изменения в параметры окружения выпускающего
	  релиз недопустимы.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="index.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="release-build.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Подготовка релизов FreeBSD </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 3. Построение релизов</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>