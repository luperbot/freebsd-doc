<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>18.3. RAID0 - Создание дисковой последовательности (Striping)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="GEOM.html" title="Глава 18. GEOM: Модульная инфраструктура преобразования дисковых запросов" /><link rel="prev" href="GEOM-intro.html" title="18.2. Введение в GEOM" /><link rel="next" href="GEOM-mirror.html" title="18.4. RAID1 - Зеркалирование (Mirroring)" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">18.3. RAID0 - Создание дисковой последовательности (Striping)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="GEOM-intro.html">Пред.</a> </td><th width="60%" align="center">Глава 18. GEOM: Модульная инфраструктура преобразования дисковых запросов</th><td width="20%" align="right"> <a accesskey="n" href="GEOM-mirror.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="GEOM-striping"></a>18.3. RAID0 - Создание дисковой последовательности (Striping)</h2></div><div><span class="authorgroup">Написали <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>  <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp92599888" class="indexterm"></a><a id="idp92600656" class="indexterm"></a><p>Создание дисковой последовательности (Striping) -
      метод, применяемый, чтобы скомбинировать несколько физических дисков в
      один логический.  Во многих случаях это делается с использованием
      аппаратных контроллеров.  Дисковая подсистема GEOM предоставляет
      программную поддержку <acronym class="acronym">RAID</acronym>0, иногда называемую
      дисковой последовательностью (Stripe).</p><p>В <acronym class="acronym">RAID</acronym> уровня 0 данные разбиваются на блоки,
      которые параллельно записываются на все диски массива.  Вместо того,
      чтобы ждать записи 256k на один диск, <acronym class="acronym">RAID</acronym>0 может
      параллельно записывать по 64k на каждый из четырёх дисков, обеспечивая
      более высокую производительность ввода/вывода.  Производительность также
      может быть увеличена за счет использования большего числа дисков.</p><p>Все диски последовательности <acronym class="acronym">RAID</acronym>0
      должны быть одного размера, так как запись и считывание с дисков
      происходят параллельно.</p><div class="mediaobject" align="center"><img src="geom/striping.png" align="middle" alt="Иллюстрация дисковой последовательности" /></div><div class="procedure"><a id="idp92610384"></a><div class="procedure-title">Процедура 18.1. Создание дисковой последовательности
	 из неформатированных ATA дисков</div><ol class="procedure" type="1"><li class="step"><p>Загрузите модуль <code class="filename">geom_stripe.ko</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload geom_stripe</code></strong></pre></li><li class="step"><p>Убедитесь, что существует подходящая точка монтирования.
	Если вы планируете сделать логический диск корневым разделом,
	используйте временную точку монтирования, например <code class="filename">/mnt</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /mnt</code></strong></pre></li><li class="step"><p>Определите имена устройств, которые будут
	объединены в последовательность, и создайте новое устройство для
	последовательности.  Например, чтобы создать
	дисковую последовательность из двух неиспользуемых и неразмеченных
	<acronym class="acronym">ATA</acronym> дисков, например <code class="filename">/dev/ad2</code> и
	<code class="filename">/dev/ad3</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gstripe label -v st0 /dev/ad2 /dev/ad3</code></strong>
Metadata value stored on /dev/ad2.
Metadata value stored on /dev/ad3.
Done.</pre></li><li class="step"><p>Запишите стандартную метку, также известную как таблица
	разделов, в новый том, и установите стандартный загрузчик:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -wB /dev/stripe/st0</code></strong></pre></li><li class="step"><p>Теперь в <code class="filename">/dev/stripe</code>
	кроме <code class="filename">st0</code> появились ещё два устройства -
	<code class="filename">st0a</code> и <code class="filename">st0c</code>.
	Теперь создайте файловую систему на устройстве <code class="filename">st0a</code>,
	используя утилиту <code class="command">newfs</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs -U /dev/stripe/st0a</code></strong></pre><p>На экране промелькнет множество цифр, и через несколько
	секунд процесс будет завершен.  Логический диск создан и готов
	к монтированию.</p></li></ol></div><p>Смонтируйте его вручную:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/stripe/st0a /mnt</code></strong></pre><p>Чтобы монтировать созданную дисковую последовательность
    автоматически во время загрузки, добавьте информацию о ней в
    файл <code class="filename">/etc/fstab</code>.  Создайте постоянную точку
    монтирования и назовите её, к примеру, <code class="filename">stripe</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /stripe</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>echo "/dev/stripe/st0a /stripe ufs rw 2 2" \</code></strong>
    <strong class="userinput"><code>&gt;&gt; /etc/fstab</code></strong></pre><p>Чтобы модуль <code class="filename">geom_stripe.ko</code> автоматически загружался во время инициализации
    системы, добавьте строку в
    <code class="filename">/boot/loader.conf</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 'geom_stripe_load="YES"' &gt;&gt; /boot/loader.conf</code></strong></pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="GEOM-intro.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="GEOM.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="GEOM-mirror.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">18.2. Введение в GEOM </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 18.4. RAID1 - Зеркалирование (Mirroring)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>