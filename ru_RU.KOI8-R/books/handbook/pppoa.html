<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>23.6. Использование PPP через ATM (PPPoA)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="ppp-and-slip.html" title="Глава 23. PPP и SLIP" /><link rel="prev" href="pppoe.html" title="23.5. Использование PPP через Ethernet (PPPoE)" /><link rel="next" href="slip.html" title="23.7. Использование SLIP" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">23.6. Использование <span class="application">PPP</span> через ATM
      (PPPoA)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="pppoe.html">Пред.</a> </td><th width="60%" align="center">Глава 23. PPP и SLIP</th><td width="20%" align="right"> <a accesskey="n" href="slip.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pppoa"></a>23.6. Использование <span class="application">PPP</span> через ATM
      (PPPoA)</h2></div></div></div><a id="idp95957456" class="indexterm"></a><a id="idp95958224" class="indexterm"></a><p>Далее описано как настроить PPP через ATM (PPP over ATM, PPPoA).
      PPPoA популярен у европейских провайдеров DSL.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95959760"></a>23.6.1. Использование PPPoA с Alcatel <span class="trademark">SpeedTouch</span>TM USB</h3></div></div></div><p>Поддержка PPPoA для этого устройства в FreeBSD поставляется в
	виде порта, поскольку встроенное программное обеспечение поставляется
	под <a class="link" href="http://www.speedtouchdsl.com/disclaimer_lx.htm" target="_top">лицензионным
	соглашением Alcatel</a> и не может свободно распространяться с
	основной системой FreeBSD.</p><p>Для установки этой программы, просто используйте
	<a class="link" href="ports.html" title="Глава 5. Установка приложений: порты и пакеты">коллекцию портов</a>.  Установите
	порт <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pppoa/pkg-descr">net/pppoa</a> и следуйте
	инструкциям.</p><p>Как и многие устройства USB, Alcatel <span class="trademark">SpeedTouch</span>TM USB должен
	загрузить встроенное программное обеспечение с компьютера.
	Возможна автоматизация этого процесса в FreeBSD, чтобы эта
	передача происходила при подключении устройства к порту USB.
	Для включения этой автоматической передачи необходимо добавить
	в <code class="filename">/etc/usbd.conf</code> нижеприведенную информацию.
	Этот файл необходимо отредактировать под пользователем
	<code class="systemitem">root</code>.</p><pre class="programlisting">device "Alcatel SpeedTouch USB"
    devname "ugen[0-9]+"
    vendor 0x06b9
    product 0x4061
    attach "/usr/local/sbin/modem_run -f /usr/local/libdata/mgmt.o"</pre><p>Для включения даемона USB, <span class="application">usbd</span>,
	поместите в <code class="filename">/etc/rc.conf</code> следующую строку:</p><pre class="programlisting">usbd_enable="YES"</pre><p>Возможна также настройка
	<span class="application">ppp</span> для дозвона при запуске.  Для этого
	добавьте в <code class="filename">/etc/rc.conf</code> нижеприведенные строки.
	Опять же, для этого вам необходимо войти под пользователем
	<code class="systemitem">root</code>.</p><pre class="programlisting">ppp_enable="YES"
ppp_mode="ddial"
ppp_profile="adsl"</pre><p>Необходимо также использовать пример файла
	<code class="filename">ppp.conf</code>, поставляемый с портом
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pppoa/pkg-descr">net/pppoa</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95982416"></a>23.6.2. Использование mpd</h3></div></div></div><p>Вы можете использовать <span class="application">mpd</span> для
	подключения к различным сервисам, в частности к сервисам PPTP.
	Вы можете найти <span class="application">mpd</span> в коллекции
	портов, <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/mpd/pkg-descr">net/mpd</a>.
	Многие ADSL модемы требуют, чтобы PPTP туннель был создан между
	модемом и компьютером, один из таких модемов это Alcatel
	<span class="trademark">SpeedTouch</span>TM Home.</p><p>Сначала установите порт, затем настройте
	<span class="application">mpd</span> под собственные нужды и настройки
	провайдера.  Порт помещает набор примеров настройки в каталог
	<code class="filename"><em class="replaceable"><code>PREFIX</code></em>/etc/mpd/</code>.
	<em class="replaceable"><code>PREFIX</code></em> означает каталог, в который
	устанавливаются порты, по умолчанию это
	<code class="filename">/usr/local/</code>.  Полное руководство по настройке
	<span class="application">mpd</span> доступно в HTML формате после
	установки порта.  Оно находится в
	<code class="filename"><em class="replaceable"><code>PREFIX</code></em>/share/doc/mpd/</code>.
	Ниже находится пример настройки <span class="application">mpd</span>
	для соединения с ADSL сервисом.  Настройка разделена на два
	файла, первый это <code class="filename">mpd.conf</code>:</p><pre class="programlisting">default:
    load adsl

adsl:
    new -i ng0 adsl adsl
    set bundle authname <em class="replaceable"><code>username</code></em> <a id="co-mpd-ex-user"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
    set bundle password <em class="replaceable"><code>password</code></em> <a id="co-mpd-ex-pass"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
    set bundle disable multilink

    set link no pap acfcomp protocomp
    set link disable chap
    set link accept chap
    set link keep-alive 30 10

    set ipcp no vjcomp
    set ipcp ranges 0.0.0.0/0 0.0.0.0/0

    set iface route default
    set iface disable on-demand
    set iface enable proxy-arp
    set iface idle 0

    open</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-user"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Имя пользователя, используемое для аутентификации у
	  провайдера.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-pass"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Пароль, используемый для аутентификации у
	  провайдера.</p></td></tr></table></div><p>Файл <code class="filename">mpd.links</code> содержит информацию о соединении
      или соединениях, которые вы планируете установить.  Пример
      <code class="filename">mpd.links</code>, соответствующий приведенному выше
      примеру:</p><pre class="programlisting">adsl:
    set link type pptp
    set pptp mode active
    set pptp enable originate outcall
    set pptp self <em class="replaceable"><code>10.0.0.1</code></em> <a id="co-mpd-ex-self"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
    set pptp peer <em class="replaceable"><code>10.0.0.138</code></em> <a id="co-mpd-ex-peer"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-self"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>IP адрес компьютера FreeBSD, с которого вы будете использовать
	  <span class="application">mpd</span>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-peer"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>IP адрес модема ADSL.  Для Alcatel
	  <span class="trademark">SpeedTouch</span>TM Home этот адрес по умолчанию <code class="systemitem">10.0.0.138</code>.</p></td></tr></table></div><p>Инициализация соединения возможно простым выполнением следующей
      команды под <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mpd -b <em class="replaceable"><code>adsl</code></em></code></strong></pre><p>Вы можете просмотреть статус соединения с помощью следующей
      команды:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>ng0</code></em></code></strong>
ng0: flags=88d1&lt;UP,POINTOPOINT,RUNNING,NOARP,SIMPLEX,MULTICAST&gt; mtu 1500
     inet 216.136.204.117 --&gt; 204.152.186.171 netmask 0xffffffff</pre><p>Использование <span class="application">mpd</span> это рекомендуемый
      способ подключения к сервису ADSL из FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96008656"></a>23.6.3. Использование pptpclient</h3></div></div></div><p>Возможно также использование FreeBSD для подключения к сервисам
	PPPoA с помощью
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pptpclient/pkg-descr">net/pptpclient</a>.</p><p>Для подключения к сервису DSL с использованием <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pptpclient/pkg-descr">net/pptpclient</a>, установите порт или
	пакет и отредактируйте <code class="filename">/etc/ppp/ppp.conf</code>.
	Вам потребуется работать под <code class="systemitem">root</code>.
	Пример настройки <code class="filename">ppp.conf</code> дан ниже.
	За дальнейшей информацией по параметрам <code class="filename">ppp.conf</code>
	обратитесь к странице справочника <span class="application">ppp</span>,
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>.</p><pre class="programlisting">adsl:
 set log phase chat lcp ipcp ccp tun command
 set timeout 0
 enable dns
 set authname <em class="replaceable"><code>username</code></em> <a id="co-pptp-ex-user"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
 set authkey <em class="replaceable"><code>password</code></em> <a id="co-pptp-ex-pass"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
 set ifaddr 0 0
 add default HISADDR</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-pptp-ex-user"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Имя пользователя вашей учетной записи у провайдера DSL.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-pptp-ex-pass"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Пароль для вашей учетной записи.</p></td></tr></table></div><div xmlns="" class="warning"><h3 class="admontitle">Предупреждение: </h3><p xmlns="http://www.w3.org/1999/xhtml">Поскольку вам необходимо поместить пароль в незашифрованном виде в
	файл <code class="filename">ppp.conf</code>, убедитесь что никто другой не
	сможет прочесть содержимое этого файла.  Следующая последовательность
	команд сделает этот файл доступным для чтения только пользователю
	<code class="systemitem">root</code>.  Обратитесь к страницам справочника
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a> и <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chown</span>(8)</span></a> за дальнейшей информацией.</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chown root:wheel /etc/ppp/ppp.conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 600 /etc/ppp/ppp.conf</code></strong></pre></div><p>Следующая команда откроет туннель для PPP сессии к вашему
	DSL маршрутизатору.  Модемы Ethernet DSL поставляются с настроенным
	IP адресом локальной сети, к которому вы подключаетесь. У
	Alcatel <span class="trademark">SpeedTouch</span>TM Home этот адрес <code class="systemitem">10.0.0.138</code>.  В документации на ваш
	маршрутизатор должно быть указано, какой адрес используется.
	Для открытия туннеля и начала PPP сессии выполните:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pptp <em class="replaceable"><code>address</code></em> <em class="replaceable"><code>adsl</code></em></code></strong></pre><div xmlns="" class="tip"><h3 class="admontitle">Подсказка: </h3><p xmlns="http://www.w3.org/1999/xhtml">Чтобы вернуться в приглашение командной строки после выполнения
	  этой команды, добавьте символ <span class="quote"><<<span class="quote">&amp;</span>>></span> в конец
	  строки.</p></div><p>Устройство виртуального туннеля <code class="filename">tun</code>
	будет создано для взаимодействия между процессами
	<span class="application">pptp</span> и <span class="application">ppp</span>.
	Как только вы вернетесь в приглашение, или процесс
	<span class="application">pptp</span> выполнит соединение, вы можете
	проверить туннель примерно такой командой:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>tun0</code></em></code></strong>
tun0: flags=8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500
        inet 216.136.204.21 --&gt; 204.152.186.171 netmask 0xffffff00
        Opened by PID 918</pre><p>Если вы не сможете соединиться, проверьте настройку
	маршрутизатора, которая обычно доступна через
	<span class="application">telnet</span> или через веб браузер.
	Если вы все еще не можете подключиться, проверьте вывод команды
	<code class="command">pptp</code> и содержимое лог файла
	<span class="application">ppp</span>,
	<code class="filename">/var/log/ppp.log</code>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pppoe.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="ppp-and-slip.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="slip.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">23.5. Использование PPP через Ethernet (PPPoE) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 23.7. Использование SLIP</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>