<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>A.4. Использование Subversion</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="mirrors.html" title="Приложение A. Получение FreeBSD" /><link rel="prev" href="ctm.html" title="A.3. Использование CTM" /><link rel="next" href="mirrors-rsync.html" title="A.5. Использование rsync" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">A.4. Использование <span class="application">Subversion</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ctm.html">Пред.</a> </td><th width="60%" align="center">Приложение A. Получение FreeBSD</th><td width="20%" align="right"> <a accesskey="n" href="mirrors-rsync.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="svn"></a>A.4. Использование <span class="application">Subversion</span></h2></div></div></div><a id="idp101692368" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="svn-intro"></a>A.4.1. Введение</h3></div></div></div><p>По состоянию на июль 2012 года FreeBSD использует
	<span class="application">Subversion</span> в качестве основной
	системы контроля версий для хранения всего исходного кода
	FreeBSD, документации и Коллекции Портов.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">Subversion</span> в основном
	  является инструментом разработчика.  Большинству
	  пользователей следует использовать
	  <code class="command">freebsd-update</code> (<a class="xref" href="updating-upgrading-freebsdupdate.html" title="21.2. Обновление FreeBSD">Раздел 21.2, <<Обновление FreeBSD>></a>) для
	  обновления основной системы FreeBSD и
	  <code class="command">portsnap</code> (<a class="xref" href="ports-using.html" title="5.6. Использование Коллекции Портов">Раздел 5.6, <<Использование Коллекции Портов>></a>) для обновления Коллекции Портов
	  FreeBSD.</p></div><p>В этом разделе демонстрируется, как устанавливать
	<span class="application">Subversion</span> в системе FreeBSD и затем
	использовать его для создания локальной копии репозитория
	FreeBSD.  Здесь приводится список доступных зеркал
	<span class="application">Subversion</span> для FreeBSD, а также ссылки
	на дополнительную информацию по использованию
	<span class="application">Subversion</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="svn-install"></a>A.4.2. Установка</h3></div></div></div><p><span class="application">Subversion</span> должен быть
	установлен до его использования для получения содержимого
	любого из репозиториев.  Если уже имеется копия дерева портов,
	<span class="application">Subversion</span> можно установить
	следующим образом:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/devel/subversion</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Если дерево портов недоступно,
	<span class="application">Subversion</span> можно установить из
	пакета:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r subversion</code></strong></pre><p>Если для управления пакетов используется
	<span class="application">pkgng</span>, то
	<span class="application">Subversion</span> можно установить с его
	помощью:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install devel/subversion</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="svn-usage"></a>A.4.3. Работа с <span class="application">Subversion</span></h3></div></div></div><p>Команда <code class="command">svn</code> используется для извлечения
	чистой копии исходных кодов в локальный каталог.  Файлы в этом
	каталоге называются <span class="emphasis"><em>локальной рабочей
	  копией</em></span>.</p><div xmlns="" class="warning"><h3 class="admontitle">Предупреждение: </h3><p xmlns="http://www.w3.org/1999/xhtml">Если локальный каталог уже существует, но не был создан
	  с помощью <code class="command">svn</code>, переименуйте его или
	  удалите перед загрузкой.  Загрузка в существующий
	  не-<code class="command">svn</code> каталог может вызвать конфликты
	  между существующими файлами и получаемыми из
	  репозитория.</p></div><p><span class="application">Subversion</span> для обозначения
	репозитория использует <acronym class="acronym">URL</acronym>, которые имеют
	вид <em class="replaceable"><code>протокол://имя/путь</code></em>.  Зеркала
	могут поддерживать различные протоколы как указано ниже.
	Первый компонент пути обозначает используемый репозиторий.
	Существует три различных репозитория: <code class="literal">base</code>
	для исходного кода основной системы FreeBSD,
	<code class="literal">ports</code> для Коллекции Портов и
	<code class="literal">doc</code> для документации.  Например, URL
	<code class="literal">svn://svn0.us-east.FreeBSD.org/ports/head/</code>
	указывает на главную ветвь репозитория портов на зеркале
	<code class="systemitem">svn0.us-east.FreeBSD.org</code>
	с использованием протокола <code class="literal">svn</code>.</p><p>Загрузка из данного репозитория выполняется следующей
	командой:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn checkout <em class="replaceable"><code>svn-mirror</code></em>/<em class="replaceable"><code>repository</code></em>/<em class="replaceable"><code>branch</code></em> <em class="replaceable"><code>lwcdir</code></em></code></strong></pre><p>где:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><em class="replaceable"><code>svn-mirror</code></em> - URL
	    для одного из <a class="link" href="svn.html#svn-mirrors" title="A.4.4. Сайты зеркала Subversion">сайтов зеркала
	      Subversion</a>.</p></li><li class="listitem"><p><em class="replaceable"><code>repository</code></em> - один из
	    репозиториев проекта, т.е. <code class="literal">base</code>,
	    <code class="literal">ports</code> или
	    <code class="literal">doc</code>.</p></li><li class="listitem"><p><em class="replaceable"><code>branch</code></em> зависит от
	    используемого репозитория.  <code class="literal">ports</code> и
	    <code class="literal">doc</code> в основном обновляются в ветви
	    <code class="literal">head</code>, в то время как
	    <code class="literal">base</code> содержит последнюю версию -CURRENT
	    в <code class="literal">head</code> и соответственно последние
	    версии ветви -STABLE в <code class="literal">stable/8</code> (для
	    8.<em class="replaceable"><code>x</code></em>),
	    <code class="literal">stable/9</code>
	    (9.<em class="replaceable"><code>x</code></em>) и
	    <code class="literal">stable/10</code>
	    (10.<em class="replaceable"><code>x</code></em>).</p></li><li class="listitem"><p><em class="replaceable"><code>lwcdir</code></em> - каталог
	    для размещения содержимого указанной ветви.  Обычно это
	    <code class="filename">/usr/ports</code> для
	    <code class="literal">ports</code>,
	    <code class="filename">/usr/src</code> для
	    <code class="literal">base</code> и
	    <code class="filename">/usr/doc</code> для
	    <code class="literal">doc</code>.</p></li></ul></div><p>В этом примере загружается Коллекция Портов с западного
	репозитория США с использованием протокола
	<acronym class="acronym">HTTPS</acronym> и размещением локальной рабочей копии
	в <code class="filename">/usr/ports</code>.  Если
	<code class="filename">/usr/ports</code> уже присутствует, но не был
	создан с помощью <code class="command">svn</code>, не забудьте его
	переименовать или удалить перед загрузкой.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn checkout <em class="replaceable"><code>https://svn0.us-west.FreeBSD.org</code></em>/ports/head /usr/ports</code></strong></pre><p>Поскольку на первоначальном этапе с удалённого репозитория
	загружается вся ветвь целиком, на это может уйти некоторое
	время.  Пожалуйста, будьте терпеливы.</p><p>После первоначальной загрузки локальную рабочую копию
	можно обновить:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn update <em class="replaceable"><code>lwcdir</code></em></code></strong></pre><p>Для обновления <code class="filename">/usr/ports</code>, созданного
	в вышеприведённом примере, используйте:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn update /usr/ports</code></strong></pre><p>Обновление намного быстрее загрузки, т.к. передаются
	только файлы с изменениями.</p><p>Альтернативный способ обновления локальной рабочей копии
	после загрузки обеспечивается в <code class="filename">Makefile</code>
	в каталогах <code class="filename">/usr/ports</code>,
	<code class="filename">/usr/src</code> и <code class="filename">/usr/doc</code>.
	Используйте цель <code class="buildtarget">update</code> с заданной
	переменной <code class="varname">SVN_UPDATE</code>.  Пример для
	обновления <code class="filename">/usr/src</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make update SVN_UPDATE=yes</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="svn-mirrors"></a>A.4.4. Сайты зеркала
	<span class="application">Subversion</span></h3></div></div></div><a id="idp101768528" class="indexterm"></a><p>Все зеркала покрывают все репозитории.</p><p>Главный сервер <span class="application">Subversion</span> FreeBSD
	<code class="systemitem">svn.FreeBSD.org</code>
	является общедоступным для чтения.  Это может измениться в
	будущем, поэтому пользователям рекомендуется использовать одно
	из официальных зеркал.  Для просмотра репозиториев
	<span class="application">Subversion</span> FreeBSD через браузер
	используйте <a class="link" href="http://svnweb.FreeBSD.org/" target="_top">http://svnweb.FreeBSD.org/</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Сеть зеркал <span class="application">Subversion</span> FreeBSD
	  находится на раннем этапе развития и скорее всего будет
	  меняться.  Не полагайтесь на неизменность этого списка.  В
	  частности, серверные сертификаты <acronym class="acronym">SSL</acronym>
	  скорее всего изменятся.</p></div><div class="informaltable"><table border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Название</th><th>Протоколы</th><th>Местоположение</th><th><acronym class="acronym">SSL</acronym> Fingerprint</th></tr></thead><tbody><tr><td><code class="systemitem">svn0.us-west.FreeBSD.org</code></td><td><code class="literal">svn</code>, <a class="link" href="http://svn0.us-west.FreeBSD.org/" target="_top"><code class="literal">http</code></a>,
		<a class="link" href="https://svn0.us-west.FreeBSD.org/" target="_top"><code class="literal">https</code></a></td><td>США, Калифорния</td><td>SHA1
		<code class="literal">1C:BD:85:95:11:9F:EB:75:A5:4B:C8:A3:FE:08:E4:02:73:06:1E:61</code></td></tr><tr><td><code class="systemitem">svn0.us-east.FreeBSD.org</code></td><td><code class="literal">svn</code>, <a class="link" href="http://svn0.us-east.FreeBSD.org/" target="_top"><code class="literal">http</code></a>,
		<a class="link" href="https://svn0.us-east.FreeBSD.org/" target="_top"><code class="literal">https</code></a>,
		<code class="literal">rsync</code></td><td>Сша, Нью Джерси</td><td>SHA1
		<code class="literal">1C:BD:85:95:11:9F:EB:75:A5:4B:C8:A3:FE:08:E4:02:73:06:1E:61</code></td></tr><tr><td><code class="systemitem">svn0.eu.FreeBSD.org</code></td><td><code class="literal">svn</code>, <a class="link" href="http://svn0.eu.FreeBSD.org/" target="_top"><code class="literal">http</code></a>,
		<a class="link" href="https://svn0.eu.FreeBSD.org/" target="_top"><code class="literal">https</code></a>,
		<code class="literal">rsync</code></td><td>Великобритания</td><td>SHA1
		<code class="literal">39:B0:53:35:CE:60:C7:BB:00:54:96:96:71:10:94:BB:CE:1C:07:A7</code></td></tr><tr><td><code class="systemitem">svn0.ru.FreeBSD.org</code></td><td><code class="literal">svn</code>, <a class="link" href="http://svn0.ru.FreeBSD.org/" target="_top"><code class="literal">http</code></a>,
		<a class="link" href="https://svn0.ru.FreeBSD.org/" target="_top"><code class="literal">https</code></a>,
		<code class="literal">rsync</code></td><td>Россия, Москва</td><td>SHA1
		<code class="literal">F6:44:AA:B9:03:89:0E:3E:8C:4D:4D:14:F0:27:E6:C7:C1:8B:17:C5</code></td></tr></tbody></table></div><p>Предпочтительным протоколом является
	<acronym class="acronym">HTTPS</acronym>, который обеспечивает защиту от
	других компьютеров, маскирующихся под зеркало FreeBSD (известно
	как атака <span class="quote"><<<span class="quote">человек посредине</span>>></span>), и прочих,
	пытающихся послать плохое содержимое конечному
	пользователю.</p><p>При первом соединении с зеркалом по
	<acronym class="acronym">HTTPS</acronym> пользователю будет предложено
	проверить <span class="emphasis"><em>fingerprint</em></span> (отпечаток)
	сервера:</p><pre class="screen">Error validating server certificate for 'https://svn0.us-west.freebsd.org:443':
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
 - The certificate hostname does not match.
Certificate information:
 - Hostname: svnmir.ysv.FreeBSD.org
 - Valid: from Jul 29 22:01:21 2013 GMT until Dec 13 22:01:21 2040 GMT
 - Issuer: clusteradm, FreeBSD.org, (null), CA, US (clusteradm@FreeBSD.org)
 - Fingerprint: 1C:BD:85:95:11:9F:EB:75:A5:4B:C8:A3:FE:08:E4:02:73:06:1E:61
(R)eject, accept (t)emporarily or accept (p)ermanently?</pre><p>Сравните отпечаток с вышеуказанными в таблице.  Если
	отпечаток совпадает, сертификат безопасности сервера можно
	принять на временной или постоянной основе.  Временный
	сертификат действует до конца сессии с сервером, и при
	следующем соединении этап верификации будет повторён.
	Постоянное принятие сертификата сохраняет параметры
	аутентификации в <code class="filename">~/.subversion/auth/</code>, и
	пользователю не придётся проверять отпечаток снова до
	истечения сертификата.</p><p>Если <code class="literal">https</code> не получается использовать
	из-за фаервола или иных проблем, <code class="literal">svn</code>
	- следующий выбор с чуть более быстрой передачей.  Если
	ни один из них не может быть использован, используйте
	<code class="literal">http</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101809616"></a>A.4.5. Дополнительная информация</h3></div></div></div><p>Для получения другой информации по использованию
	<span class="application">Subversion</span> смотрите
	<span class="quote"><<<span class="quote">книгу Subversion</span>>></span> по названию
	<a class="link" href="http://svnbook.red-bean.com/" target="_top">Version
	  Control with Subversion</a> или <a class="link" href="http://subversion.apache.org/docs/" target="_top">Документацию
	  Subversion</a>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ctm.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="mirrors.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="mirrors-rsync.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">A.3. Использование CTM </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> A.5. Использование <span class="application">rsync</span></td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>