<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>11.5. Установка MATLAB(R)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="linuxemu.html" title="Глава 11. Двоичная совместимость с Linux" /><link rel="prev" href="linuxemu-maple.html" title="11.4. Установка MapleTM" /><link rel="next" href="linuxemu-oracle.html" title="11.6. Установка Oracle(R)" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.5. Установка <span class="trademark">MATLAB</span>(R)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="linuxemu-maple.html">Пред.</a> </td><th width="60%" align="center">Глава 11. Двоичная совместимость с Linux</th><td width="20%" align="right"> <a accesskey="n" href="linuxemu-oracle.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-matlab"></a>11.5. Установка <span class="trademark">MATLAB</span>(R)</h2></div></div></div><a id="idp85170000" class="indexterm"></a><p>Этот документ описывает процесс установки Linux-версии
      <span class="application"><span class="trademark">MATLAB</span>(R) версии 6.5</span> на систему
      FreeBSD.  Эта программа работает вполне нормально, за исключением
      <span class="application"><span class="trademark">Java Virtual Machine</span>TM</span> (см.
      <a class="xref" href="linuxemu-matlab.html#matlab-jre" title="11.5.3. Связь с JavaTM Runtime Environment">Раздел 11.5.3, <<Связь с <span class="trademark">Java</span>TM Runtime Environment>></a>).</p><p>Linux-версию <span class="application"><span class="trademark">MATLAB</span>(R)</span> можно приобрести
      непосредственно в компании The MathWorks на сайте <code class="uri"><a class="uri" href="http://www.mathworks.com" target="_top">http://www.mathworks.com</a></code>.  Не забудьте получить
      файл лицензии или инструкции по его созданию.  По ходу дела дайте
      знать производителю, что хотели бы увидеть версию их ПО специально
      для FreeBSD.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85174864"></a>11.5.1. Процесс установки <span class="trademark">MATLAB</span>(R)</h3></div></div></div><p>Для установки <span class="application"><span class="trademark">MATLAB</span>(R)</span> выполните
	следующие шаги:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Вставьте инсталляционный CD и смонтируйте его.
	    Станьте пользователем <code class="systemitem">root</code>, как рекомендует
	    скрипт установки.  Для запуска скрипта установки наберите:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/compat/linux/bin/sh /cdrom/install</code></strong></pre><div xmlns="" class="tip"><h3 class="admontitle">Подсказка: </h3><p xmlns="http://www.w3.org/1999/xhtml">Запускается графический инсталлятор.  Если вы получаете
	      сообщения о невозможности открыть дисплей, наберите
	      <code class="command">setenv HOME ~<em class="replaceable"><code>USER</code></em></code>,
	      где <em class="replaceable"><code>USER</code></em> - пользователь, от
	      имени которого выполнена команда <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>.</p></div></li><li class="step"><p>
	    При запросе корневого каталога
	    <span class="application"><span class="trademark">MATLAB</span>(R)</span>, наберите:
	    <strong class="userinput"><code>/compat/linux/usr/local/matlab</code></strong>.</p><div xmlns="" class="tip"><h3 class="admontitle">Подсказка: </h3><p xmlns="http://www.w3.org/1999/xhtml">Чтобы упростить набор остальных команд в ходе установки,
	      выполните в командном интерпретаторе следующую команду:
	      <code class="command">set MATLAB=/compat/linux/usr/local/matlab</code></p></div></li><li class="step"><p>Отредактируйте файл лицензии в соответствии с инструкциями
	    в полученной лицензии <span class="application"><span class="trademark">MATLAB</span>(R)</span>.</p><div xmlns="" class="tip"><h3 class="admontitle">Подсказка: </h3><p xmlns="http://www.w3.org/1999/xhtml">Этот файл можно подготовить заранее с помощью любого
	      текстового редактора и скопировать его в
	      <code class="filename">$MATLAB/license.dat</code> до того, как
	      инсталлятор попросит его отредактировать.</p></div></li><li class="step"><p>Завершите процесс установки.</p></li></ol></div><p>В этот момент ваша установка <span class="application"><span class="trademark">MATLAB</span>(R)</span>
	завершена.  Следующие шаги позволяют <span class="quote"><<<span class="quote">связать</span>>></span>
	эту программу с вашей системой FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85194064"></a>11.5.2. Запуск диспетчера лицензий</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Создайте символические ссылки для скриптов диспетчера
	    лицензий:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s $MATLAB/etc/lmboot /usr/local/etc/lmboot_TMW</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s $MATLAB/etc/lmdown /usr/local/etc/lmdown_TMW</code></strong></pre></li><li class="step"><p>Создайте файл запуска
	    <code class="filename">/usr/local/etc/rc.d/flexlm.sh</code>.
	    Представленный ниже пример - измененная версия входящего
	    в дистрибутив файла <code class="filename">$MATLAB/etc/rc.lm.glnx86</code>.
	    Изменены местонахождения файлов и диспетчер лицензий запускается
	    под эмулятором Linux.</p><pre class="programlisting">#!/bin/sh
case "$1" in
  start)
        if [ -f /usr/local/etc/lmboot_TMW ]; then
              /compat/linux/bin/sh /usr/local/etc/lmboot_TMW -u <em class="replaceable"><code>username</code></em> &amp;&amp; echo 'MATLAB_lmgrd'
        fi
        ;;
  stop)
        if [ -f /usr/local/etc/lmdown_TMW ]; then
            /compat/linux/bin/sh /usr/local/etc/lmdown_TMW  &gt; /dev/null 2&gt;&amp;1
        fi
        ;;
  *)
        echo "Usage: $0 {start|stop}"
        exit 1
        ;;
esac

exit 0</pre><div xmlns="" class="important"><h3 class="admontitle">Важно: </h3><p xmlns="http://www.w3.org/1999/xhtml">Этот файл надо сделать выполняемым:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod +x /usr/local/etc/rc.d/flexlm.sh</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">Вы также должны заменить <em class="replaceable"><code>username</code></em>
	      именем пользователя в вашей системе (но не
	      <code class="systemitem">root</code>).</p></div></li><li class="step"><p>Запустите диспетчер лицензий с помощью команды:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/flexlm.sh start</code></strong></pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="matlab-jre"></a>11.5.3. Связь с <span class="trademark">Java</span>TM Runtime Environment</h3></div></div></div><p>Измените ссылку <span class="application"><span class="trademark">Java</span>TM</span> Runtime
	Environment (JRE) так, чтобы он ссылалась на версию, работающую
	в FreeBSD:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd $MATLAB/sys/java/jre/glnx86/</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>unlink jre; ln -s ./jre1.1.8 ./jre</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85225168"></a>11.5.4. Создание скрипта запуска <span class="trademark">MATLAB</span>(R)</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Поместите следующий скрипт запуска в файл
	    <code class="filename">/usr/local/bin/matlab</code>:
	  </p><pre class="programlisting">#!/bin/sh
/compat/linux/bin/sh /compat/linux/usr/local/matlab/bin/matlab "$@"</pre></li><li class="step"><p>Затем выполните команду
	    <code class="command">chmod +x /usr/local/bin/matlab</code>.</p></li></ol></div><div xmlns="" class="tip"><h3 class="admontitle">Подсказка: </h3><p xmlns="http://www.w3.org/1999/xhtml">В зависимости от версии
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a>, при
	  выполнении этого скрипта могут быть выданы сообщения об ошибках.
	  Чтобы избежать этого, отредактируйте файл
	  <code class="filename">/compat/linux/usr/local/matlab/bin/matlab</code>
	  и измените строку вида:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">if [ `expr "$lscmd" : '.*-&gt;.*'` -ne 0 ]; then</pre><p xmlns="http://www.w3.org/1999/xhtml">(в версии 13.0.1 это строка 410) на следующую строку:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">if test -L $newbase; then</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85236304"></a>11.5.5. Создание скрипта остановки <span class="trademark">MATLAB</span>(R)</h3></div></div></div><p>Следующие действия необходимы для решения проблемы с
	некорректным завершением работы <span class="trademark">MATLAB</span>(R).</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Создайте файл
	    <code class="filename">$MATLAB/toolbox/local/finish.m</code> и поместите
	    в него одну строку:</p><pre class="programlisting">! $MATLAB/bin/finish.sh</pre><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="literal">$MATLAB</code> - литерал.</p></div><div xmlns="" class="tip"><h3 class="admontitle">Подсказка: </h3><p xmlns="http://www.w3.org/1999/xhtml">В том же каталоге находятся файлы
	      <code class="filename">finishsav.m</code> и
	      <code class="filename">finishdlg.m</code>, которые позволяют
	      сохранять рабочее пространство перед выходом.  Если вы
	      используете любой из них, вставьте представленную выше
	      строку сразу после команды <code class="literal">save</code>.</p></div></li><li class="step"><p>Создайте файл
	    <code class="filename">$MATLAB/bin/finish.sh</code>, который будет
	    содержать следующий скрипт:</p><pre class="programlisting">#!/usr/compat/linux/bin/sh
(sleep 5; killall -1 matlab_helper) &amp;
exit 0</pre></li><li class="step"><p>Сделайте этот файл выполняемым:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod +x $MATLAB/bin/finish.sh</code></strong></pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="matlab-using"></a>11.5.6. Использование <span class="trademark">MATLAB</span>(R)</h3></div></div></div><p>В этот момент все готово для выполнения команды
	<code class="command">matlab</code> и начала использования этой программы.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="linuxemu-maple.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="linuxemu.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="linuxemu-oracle.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">11.4. Установка <span class="trademark">Maple</span>TM </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 11.6. Установка <span class="trademark">Oracle</span>(R)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>