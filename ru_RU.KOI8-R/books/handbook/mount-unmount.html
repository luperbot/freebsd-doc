<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>4.7. Монтирование и размонтирование файловых систем</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="basics.html" title="Глава 4. Основы UNIX" /><link rel="prev" href="disk-organization.html" title="4.6. Организация дисков" /><link rel="next" href="basics-processes.html" title="4.8. Процессы" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.7. Монтирование и размонтирование файловых систем</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="disk-organization.html">Пред.</a> </td><th width="60%" align="center">Глава 4. Основы UNIX</th><td width="20%" align="right"> <a accesskey="n" href="basics-processes.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mount-unmount"></a>4.7. Монтирование и размонтирование файловых систем</h2></div></div></div><p>Файловая система лучше всего представима в виде дерева, с
      корнем в <code class="filename">/</code>.  Каталоги,
      <code class="filename">/dev</code>, <code class="filename">/usr</code> и прочие
      - это ветви дерева, которые, в свою очередь, являются
      корнями для поддеревьев, также имеющих ветви
      (<code class="filename">/usr/local</code>), и т.д.</p><a id="idp79467344" class="indexterm"></a><p>Хорошей практикой является разнесение некоторых особо важных
      каталогов на разные файловые системы.  Например,
      <code class="filename">/var</code>, содержит
      <code class="filename">log/</code>, <code class="filename">spool/</code>, а также
      всевозможные временные файлы и нередко может занять все свободное
      место на диске.  Поэтому лучше смонтировать
      <code class="filename">/var</code> отдельно, чтобы избежать переполнения
      <code class="filename">/</code>.</p><p>Часто бывает так, что некоторые разделы файловой системы
      расположены на разных физических носителях (дисках, CDROM),
      виртуальных или сетевых (например, <a class="link" href="network-nfs.html" title="25.3. Network File System (NFS)">сетевая
      файловая система (Network File System, NFS)</a>).  В этом
      случае узлы файловой иерархии будут расположены на разных
      файловых системах.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-fstab"></a>4.7.1. Файл <code class="filename">fstab</code></h3></div></div></div><a id="idp79480400" class="indexterm"></a><p>Файловые системы, перечисленные в
	<code class="filename">/etc/fstab</code>, монтируются автоматически в
	<a class="link" href="boot.html" title="Глава 13. Процесс загрузки FreeBSD">процессе загрузки</a>
	(если, конечно, для них не
	указана опция <code class="option">noauto</code>).</p><p>Формат файла <code class="filename">/etc/fstab</code>
	следующий (файловые системы перечисляются построчно):</p><pre class="programlisting">
	<em class="replaceable"><code>устройство</code></em>	<em class="replaceable"><code>/точка-монтирования</code></em>	<em class="replaceable"><code>тип файловой системы</code></em>	<em class="replaceable"><code>опции</code></em>	<em class="replaceable"><code>частота дампов</code></em>	<em class="replaceable"><code>порядок проверки</code></em></pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">устройство</code></span></dt><dd><p>Имя устройства (которое должно присутствовать), как описано в
	      <a class="xref" href="disks-naming.html" title="17.2. Имена устройств">Раздел 17.2, <<Имена устройств>></a>.</p></dd><dt><span class="term"><code class="literal">точка монтирования</code></span></dt><dd><p>Каталог (существующий), куда следует смонтировать
	      файловую систему.</p></dd><dt><span class="term"><code class="literal">тип файловой системы</code></span></dt><dd><p>Тип файловой системы, который передается программе
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.  По умолчанию FreeBSD использует
	      <code class="literal">ufs</code>.</p></dd><dt><span class="term"><code class="literal">опции</code></span></dt><dd><p>Например, <code class="option">rw</code>, для монтирования
	      файловой системы в режиме <span class="quote"><<<span class="quote">чтение-запись</span>>></span>,
	      или <code class="option">ro</code>, для режима <span class="quote"><<<span class="quote">только
	      чтение</span>>></span>, за которыми могут следовать и другие
	      опции.  Довольно часто используется
	      опция <code class="option">noauto</code>, чтобы не монтировать
	      автоматически файловые системы в процессе загрузки.
	      Об остальных опциях можно прочитать в
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.</p></dd><dt><span class="term"><code class="literal">частота дампов</code></span></dt><dd><p>Используется утилитой <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> для определения
	      файловых систем, с которых необходимо периодически
	      снимать специальные архивные копии.  При отсутствии этого
	      параметра принимается равным нулю.</p></dd><dt><span class="term"><code class="literal">порядок проверки</code></span></dt><dd><p>Определяет порядок, в котором следует проверять
	      файловые системы (чаще всего, в случае некорректного
	      размонтирования или внезапной перезагрузки системы).  Если
	      файловую системы не нужно проверять, этот параметр должен
	      быть установлен в ноль.  Для корневой файловой системы
	      (которая должна быть проверена в первую очередь)
	      установите его в 1.  Для всех остальных - 2 или
	      больше.  Если две или более файловые системы имеют
	      одинаковое значение <code class="literal">passno</code>,
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> попытается проверять их параллельно (если,
	      конечно, это возможно физически).</p></dd></dl></div><p>Обратитесь к <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> за дополнительной информацией
	о формате файла <code class="filename">/etc/fstab</code> и различных
	опциях монтирования.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-mount"></a>4.7.2. Команда <code class="command">mount</code></h3></div></div></div><a id="idp79518928" class="indexterm"></a><p>Команда <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> используется, как следует из ее имени,
	для монтирования файловых систем.</p><p>Пример использования (простейший случай):</p><div class="informalexample"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount <em class="replaceable"><code>устройство</code></em> <em class="replaceable"><code>точка-монтирования</code></em></code></strong></pre></div><p>Перечислим основные опции, которые может принимать команда
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> (полный список смотрите на странице
	справочника):</p><div class="variablelist"><div class="variablelist-title">Опции монтирования</div><dl class="variablelist"><dt><span class="term"><code class="option">-a</code></span></dt><dd><p>Смонтировать все файловые системы, перечисленные в
	      файле <code class="filename">/etc/fstab</code>.  Исключение
	      составляют помеченные как <span class="quote"><<<span class="quote">noauto</span>>></span>,
	      перечисленные после опции <code class="option">-t</code> и уже
	      смонтированные.</p></dd><dt><span class="term"><code class="option">-d</code></span></dt><dd><p>Сделать все, кроме самого системного вызова mount.
	      Эта опция полезна вместе с флагом <code class="option">-v</code>
	      для определения того, что на самом деле пытается сделать
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.</p></dd><dt><span class="term"><code class="option">-f</code></span></dt><dd><p>Монтировать поврежденный раздел (опасно!),
	      или форсировать отмену всех запросов на запись при
	      изменении режима монтирования с
	      <span class="quote"><<<span class="quote">чтение-запись</span>>></span> на <span class="quote"><<<span class="quote">только
	      чтение</span>>></span>.</p></dd><dt><span class="term"><code class="option">-r</code></span></dt><dd><p>Монтировать файловую систему в режиме <span class="quote"><<<span class="quote">только
	      для чтения</span>>></span>.  То же самое, что и указание
	      аргумента <code class="option">ro</code> для опции
	      <code class="option">-o</code>.</p></dd><dt><span class="term"><code class="option">-t</code>
	    <em class="replaceable"><code>fstype</code></em></span></dt><dd><p>Монтировать файловую систему как систему указанного
	      типа, или, в случае опции <code class="option">-a</code>, только
	      файловые системы данного типа.</p><p>По умолчанию, тип файловой системы -
	      <span class="quote"><<<span class="quote">ufs</span>>></span>.</p></dd><dt><span class="term"><code class="option">-u</code></span></dt><dd><p>Обновить опции монтирования для файловой
	      системы.</p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>Выдавать более подробную информацию.</p></dd><dt><span class="term"><code class="option">-w</code></span></dt><dd><p>Монтировать файловую систему в режиме
	      <span class="quote"><<<span class="quote">чтение-запись</span>>></span>.</p></dd></dl></div><p>Опция <code class="option">-o</code> принимает разделенные запятыми
	аргументы, включая нижеперечисленные:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">noexec</span></dt><dd><p>Запрет на исполнение бинарных файлов на файловой
	      системе (тоже полезная опция для повышения безопасности
	      системы).</p></dd><dt><span class="term">nosuid</span></dt><dd><p>Игнорировать setuid и setgid биты на файловой системе
	      (еще одна полезная опция для повышения безопасности
	      системы).</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-umount"></a>4.7.3. Команда <code class="command">umount</code></h3></div></div></div><a id="idp79563344" class="indexterm"></a><p>Команда <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a> принимает в качестве параметра точку
	монтирования какой-либо файловой системы, имя устройства, опцию
	<code class="option">-a</code> или <code class="option">-A</code>.</p><p>Кроме того, вы можете дополнительно указать опцию
	<code class="option">-f</code> для форсированного размонтирования файловой
	системы, и <code class="option">-v</code> для получения более подробной
	информации.  Имейте ввиду, что это в общем случае опасно и
	потому не рекомендуется, так как тем самым вы можете нарушить
	работу компьютера или повредить данные на файловой системе.</p><p>Опции <code class="option">-a</code> и <code class="option">-A</code>
	используются для размонтирования всех файловых систем (разве
	что вы укажете опцию <code class="option">-t</code>).  Разница состоит в
	том, что <code class="option">-A</code> не пытается размонтировать
	корневую файловую систему.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="disk-organization.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="basics-processes.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">4.6. Организация дисков </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 4.8. Процессы</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>