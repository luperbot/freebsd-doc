<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>4.2. Виртуальные консоли и терминалы</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="basics.html" title="Глава 4. Основы UNIX" /><link rel="prev" href="basics.html" title="Глава 4. Основы UNIX" /><link rel="next" href="users-synopsis.html" title="4.3. Пользователи и основы управления учетными записями" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.2. Виртуальные консоли и терминалы</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="basics.html">Пред.</a> </td><th width="60%" align="center">Глава 4. Основы UNIX</th><td width="20%" align="right"> <a accesskey="n" href="users-synopsis.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="consoles"></a>4.2. Виртуальные консоли и терминалы</h2></div></div></div><a id="idp78490064" class="indexterm"></a><a id="idp78490576" class="indexterm"></a><p>FreeBSD можно использовать разными способами.  Один из них -
      набор команд в текстовом терминале.  Используйте этот способ, и вся
      гибкость и мощь систем <span class="trademark">UNIX</span>(R) будет в ваших руках.  Этот раздел
      рассказывает о <span class="quote"><<<span class="quote">терминалах</span>>></span>, <span class="quote"><<<span class="quote">консолях</span>>></span> и их
      использовании в FreeBSD.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-intro"></a>4.2.1. Консоль</h3></div></div></div><a id="idp78493520" class="indexterm"></a><p>Если во время установки вы не настроили FreeBSD для автоматического
	запуска графической среды при загрузке, система запросит ввод
	логина сразу после завершения стартовых скриптов.  Вы увидите примерно
	следующее:</p><pre class="screen">Additional ABI support:.
Local package initialization:.
Additional TCP options:.

Fri Sep 20 13:01:06 EEST 2002

FreeBSD/i386 (pc3.example.org) (ttyv0)

login:</pre><p>В вашей системе сообщение может быть другим, но очень похожим на
	это.  В данный момент нас интересуют последние две строки.  Вторая с
	конца строка:</p><pre class="programlisting">FreeBSD/i386 (pc3.example.org) (ttyv0)</pre><p>В этой строке содержится немного информации о только что загруженной
	системе.  Это консоль <span class="quote"><<<span class="quote">FreeBSD</span>>></span>, работающей на
	Intel или совместимом процессоре x86
	архитектуры<a href="#ftn.idp78500432" class="footnote" id="idp78500432"><sup class="footnote">[1]</sup></a>.  Имя этого компьютера (у каждого компьютера <span class="trademark">UNIX</span>(R) есть
	имя) <code class="systemitem">pc3.example.org</code>, и в данный момент вы видите
	системную консоль - терминал
	<code class="filename">ttyv0</code>.</p><p>Наконец, последняя строка всегда:</p><pre class="programlisting">login:</pre><p>Здесь вам предлагается ввести <span class="quote"><<<span class="quote">имя пользователя</span>>></span>,
	чтобы войти в FreeBSD.  Следующий раздел описывает способ, которым вы
	можете сделать это.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-login"></a>4.2.2. Вход в FreeBSD</h3></div></div></div><p>FreeBSD это многопользовательская, многопроцессорная система.  Это
	формальное описание системы, которая может быть использована множеством
	разных людей, одновременно запускающих большое количество программ на
	одном компьютере.</p><p>Любой многопользовательской системе нужен способ отличать каждого
	<span class="quote"><<<span class="quote">пользователя</span>>></span> от остальных.  В FreeBSD (и всех
	<span class="trademark">UNIX</span>(R)-подобных операционных системах), эта задача решается путем
	<span class="quote"><<<span class="quote">входа</span>>></span> пользователя в систему перед запуском каких-либо
	программ.  У каждого пользователя есть уникальное имя (<span class="quote"><<<span class="quote">имя
	пользователя</span>>></span>) и персональный, секретный ключ
	(<span class="quote"><<<span class="quote">пароль</span>>></span>).  Перед тем, как разрешить пользователю
	выполнять какие-либо программы, FreeBSD запрашивает их оба.</p><a id="idp78513488" class="indexterm"></a><p>Сразу после загрузки FreeBSD и завершения работы стартовых
	скриптов<a href="#ftn.idp78514384" class="footnote" id="idp78514384"><sup class="footnote">[2]</sup></a>, система предложит вам ввести имя пользователя:</p><pre class="screen">login:</pre><p>В этом примере, предположим что ваше имя пользователя
	<code class="systemitem">john</code>.  Введите <code class="literal">john</code> в этом
	приглашении и нажмите <span class="keycap"><strong>Enter</strong></span>.  Далее должно появиться
	приглашение ввести <span class="quote"><<<span class="quote">пароль</span>>></span>:</p><pre class="screen">login: <strong class="userinput"><code>john</code></strong>
Password:</pre><p>Введите соответствующий имени <code class="systemitem">john</code> пароль и
	нажмите <span class="keycap"><strong>Enter</strong></span>.  Пароль <span class="emphasis"><em>не виден</em></span>!
	Не беспокойтесь об этом.  Это сделано по соображениям
	безопасности.</p><p>Если вы ввели пароль правильно, то сразу же войдете в FreeBSD
	и можете начать выполнять команды.</p><p>Вы увидите сообщение дня (<acronym class="acronym">MOTD</acronym>, или message of
	the day) за которым последует командная строка (с символом
	<code class="literal">#</code>, <code class="literal">$</code>, или <code class="literal">%</code>).
	Это означает, что вы успешно вошли в FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-virtual"></a>4.2.3. Множественные консоли</h3></div></div></div><p>Запуск команд <span class="trademark">UNIX</span>(R) из консоли - это конечно хорошо, но FreeBSD может
	выполнять множество программ одновременно, поэтому наличие одной консоли
	может быть недостатком.  В таком случае очень полезны <span class="quote"><<<span class="quote">виртуальные
	консоли</span>>></span>.</p><p>FreeBSD может быть настроена для работы с несколькими виртуальными
	консолями.  Вы можете переключаться с одной виртуальной консоли на
	другую,	нажимая соответствующие сочетания клавиш на клавиатуре.  У
	каждой консоли есть свой канал вывода и FreeBSD заботится о том, чтобы
	правильно перенаправить ввод с клавиатуры и вывод на монитор, как только
	вы переключитесь с одной консоли на другую.</p><p>Для переключения между консолями зарезервированы специальные
	комбинации клавиш<a href="#ftn.idp78537680" class="footnote" id="idp78537680"><sup class="footnote">[3]</sup></a>.  Вы можете использовать сочетания
	<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>,
	<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F2</strong></span>, до
	<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F8</strong></span> чтобы
	переключаться между различными виртуальными консолями в FreeBSD.</p><p>При переключении от одной консоли к другой, FreeBSD заботится о
	сохранении и восстановлении вывода на экран.  Результатом является
	<span class="quote"><<<span class="quote">иллюзия</span>>></span> наличия множества <span class="quote"><<<span class="quote">виртуальных</span>>></span>
	экранов и клавиатур, которые могут быть использованы для ввода и запуска
	команд FreeBSD.  Программы, которые вы запускаете на одной виртуальной
	консоли, не прекращают выполнение, когда консоль становится невидимой.
	Они продолжают выполняться, когда вы переключаетесь на другую
	виртуальную консоль.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-ttys"></a>4.2.4. Файл <code class="filename">/etc/ttys</code></h3></div></div></div><p>В конфигурации по умолчанию FreeBSD запускает восемь виртуальных
	консолей. Тем не менее, это не ограничение оборудования, и вы можете
	легко настроить систему  для загрузки большего или меньшего числа
	виртуальных консолей.  Число и параметры виртуальных консолей задаются
	в файле <code class="filename">/etc/ttys</code>.</p><p>Вы можете использовать это файл для настройки виртуальных консолей
	FreeBSD.  Любая не закомментированная строка в этом файле
	(строка, не начинающаяся с символа <code class="literal">#</code>), содержит
	настройки для одного терминала или виртуальной консоли.  Версия этого
	файла по умолчанию, поставляемая с FreeBSD, содержит настройки для
	девяти
	виртуальных консолей и включает восемь терминалов.  Это строки, начинающиеся с
	<code class="literal">ttyv</code>:</p><pre class="programlisting"># name  getty                           type    status          comments
#
ttyv0   "/usr/libexec/getty Pc"         cons25  on  secure
# Virtual terminals
ttyv1   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv2   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv3   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv4   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv5   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv6   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv7   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv8   "/usr/X11R6/bin/xdm -nodaemon"  xterm   off secure</pre><p>За детальным описанием каждой колонки этого файла и всех опций,
	которые можно указать для настройки виртуальных консолей, обращайтесь
	к <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-singleuser"></a>4.2.5. Консоль в однопользовательском режиме</h3></div></div></div><p>Детальное описание <span class="quote"><<<span class="quote">однопользовательского режима</span>>></span>
	можно найти в <a class="xref" href="boot-init.html#boot-singleuser" title="13.6.2. Однопользовательский режим">Раздел 13.6.2, <<Однопользовательский режим>></a>.  Стоит отметить, что
	при работе FreeBSD в однопользовательском режиме есть только одна
	консоль.  Виртуальных консолей нет.  Установки консоли в
	однопользовательском режиме можно найти в файле
	<code class="filename">/etc/ttys</code>.  Обратите внимание на строку,
	начинающуюся с <code class="literal">console</code>:</p><pre class="programlisting"># name  getty                           type    status          comments
#
# If console is marked "insecure", then init will ask for the root password
# when going to single-user mode.
console none                            unknown off secure</pre><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Как сказано в комментариях выше строки <code class="literal">console</code>,
	  можно отредактировать эту строку и изменить <code class="literal">secure</code>
	  на <code class="literal">insecure</code>.  Если вы сделаете это, FreeBSD даже
	  при загрузке в однопользовательском режиме будет запрашивать пароль
	  <code class="systemitem">root</code>.</p><p xmlns="http://www.w3.org/1999/xhtml"><span class="emphasis"><em>Будьте осторожны при изменении этого значения на
	  <code class="literal">insecure</code></em></span>.  Если вы забудете
	  пароль <code class="systemitem">root</code>, загрузка в однопользовательский
	  режим сильно усложнится.  Это все еще возможно, но несколько
	  более сложно для тех, кто еще не очень освоился с процессом
	  загрузки FreeBSD и вызова программ.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-vidcontrol"></a>4.2.6. Изменение видеорежимов консоли</h3></div></div></div><p>Установленный по умолчанию размер изображения для консоли FreeBSD
	может быть изменен до значения 1024x768, 1280x1024, или любого
	другого, который поддерживается вашим монитором и видеокартой.
	Для того, чтобы задействовать иной видеорежим, вам прежде всего
	необходимо будет пересобрать ядро вашей системы, добавив в файл
	конфигурации две дополнительные опции:</p><pre class="programlisting">options VESA
options SC_PIXEL_MODE</pre><p>После пересборки и установки ядра воспользуйтесь утилитой
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a> для определения видеорежимов, поддерживаемых
	вашим оборудованием.  Чтобы получить перечень видеорежимов,
	выполните следующую команду:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vidcontrol -i mode</code></strong></pre><p>Команда отобразит список поддерживаемых видеорежимов.  Теперь
	вы можете выбрать один из них и установить его на консоли при помощи
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vidcontrol MODE_279</code></strong></pre><p>Если новый видеорежим вас устраивает, то его можно определить
	устанавливаемым автоматически во время старта системы, для чего
	добавьте в <code class="filename">/etc/rc.conf</code> следующую строку:</p><pre class="programlisting">allscreens_flags="MODE_279"</pre></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp78500432" class="footnote"><p><a href="#idp78500432" class="para"><sup class="para">[1] </sup></a>Это следует из обозначения <code class="literal">i386</code>.  Обратите
	    внимание, что даже если FreeBSD работает не на процессоре
	    Intel 386, это обозначение будет <code class="literal">i386</code>.
	    Здесь показан не тип процессора, а его
	    <span class="quote"><<<span class="quote">архитектура</span>>></span>.</p></div><div id="ftn.idp78514384" class="footnote"><p><a href="#idp78514384" class="para"><sup class="para">[2] </sup></a>Стартовые скрипты - это программы, запускаемые
	    автоматически во время загрузки FreeBSD.  Их основная задача
	    - подготовить систему к запуску других программ и запустить
	    настроенные сервисы, которые будут работать в фоновом режиме,
	    выполняя полезную работу.</p></div><div id="ftn.idp78537680" class="footnote"><p><a href="#idp78537680" class="para"><sup class="para">[3] </sup></a>Подробное техническое описание деталей работы драйверов консолей
	    FreeBSD и клавиатуры можно найти в <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syscons&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">syscons</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atkbd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atkbd</span>(4)</span></a>,
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a> и <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kbdcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kbdcontrol</span>(1)</span></a>.  Здесь мы не раскрываем
	    деталей, однако интересующиеся этим вопросом всегда могут обратиться
	    к страницам справочника  за более подробным объяснением того,
	    как это работает.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="basics.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="users-synopsis.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Глава 4. Основы UNIX </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 4.3. Пользователи и основы управления учетными записями</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>