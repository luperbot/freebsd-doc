<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>25.5. Автоматическая настройка сети (DHCP)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="network-servers.html" title="Глава 25. Сетевые серверы" /><link rel="prev" href="network-nis.html" title="25.4. Network Information System (NIS/YP)" /><link rel="next" href="network-dns.html" title="25.6. Domain Name System (DNS)" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">25.5. Автоматическая настройка сети (DHCP)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-nis.html">Пред.</a> </td><th width="60%" align="center">Глава 25. Сетевые серверы</th><td width="20%" align="right"> <a accesskey="n" href="network-dns.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-dhcp"></a>25.5. Автоматическая настройка сети (DHCP)</h2></div><div><span class="authorgroup">Текст написал <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Greg</span> <span class="surname">Sutter</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98023504"></a>25.5.1. Что такое DHCP?</h3></div></div></div><a id="idp98024144" class="indexterm"></a><a id="idp98025296" class="indexterm"></a><p>DHCP, или Dynamic Host Configuration Protocol (Протокол
      Динамической Конфигурации Хостов), описывает порядок, по которому
      система может подключиться к сети и получить необходимую информацию
      для работы в ней.  Во FreeBSD используется
      <code class="command">dhclient</code>, импортированный из OpenBSD 3.7.
      Вся информация здесь, относительно <code class="command">dhclient</code> относится
      либо к ISC, либо к DHCP клиентам.  DHCP сервер включён в ISC
      дистрибутив.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98027472"></a>25.5.2. Что описывается в этом разделе</h3></div></div></div><p>В этом разделе описываются, как компоненты клиентской части ISC или OpenBSD
      DHCP клиента, так и компоненты ISC DHCP системы со стороны сервера.
      Программа, работающая на клиентской
      стороне, <code class="command">dhclient</code>, интегрирована в поставку FreeBSD,
      а серверная часть доступна в виде порта <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp42-server/pkg-descr">net/isc-dhcp42-server</a>.  Кроме ссылок ниже,
      много полезной информации находится на страницах справочной системы,
      описывающих <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcp-options</span>(5)</span></a> и
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.conf</span>(5)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98031696"></a>25.5.3. Как это работает</h3></div></div></div><a id="idp98032336" class="indexterm"></a><p>Когда на клиентской машине выполняется программа
      <code class="command">dhclient</code>, являющаяся клиентом DHCP, она начинает
      широковещательную рассылку запросов на получение настроечной информации.
      По умолчанию эти запросы делаются на 68 порт UDP.	Сервер отвечает на UDP
      67, выдавая клиенту адрес IP и другую необходимую информацию, такую, как
      сетевую маску, маршрутизатор и серверы DNS.  Вся эта информация даётся в
      форме <span class="quote"><<<span class="quote">аренды</span>>></span> DHCP и верна только определенное время (что
      настраивается администратором сервера DHCP).  При таком подходе
      устаревшие адреса IP тех клиентов, которые больше не подключены к сети,
      могут автоматически использоваться повторно.</p><p>Клиенты DHCP могут получить от сервера очень много информации.
      Подробный список находится в странице Справочника
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcp-options</span>(5)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98043600"></a>25.5.4. Интеграция с FreeBSD</h3></div></div></div><p>DHCP клиент от OpenBSD, <code class="command">dhclient</code>, полностью
      интегрирован во FreeBSD.  Поддержка клиента DHCP есть как в программе
      установки, так и в самой системе, что исключает необходимость в
      знании подробностей конфигурации сети в любой сети, имеющей сервер
      DHCP.</p><a id="idp98045008" class="indexterm"></a><p>DHCP поддерживается утилитой <span class="application">sysinstall</span>.
      При настройке сетевого интерфейса из программы
      <span class="application">sysinstall</span> второй
      вопрос, который вам задается: <span class="quote"><<<span class="quote">Do you want to try DHCP
      configuration of the interface?</span>>></span> (<span class="quote"><<<span class="quote">Хотите ли вы попробовать
      настроить этот интерфейс через DHCP?</span>>></span>).  Утвердительный ответ
      приведёт к запуску программы <code class="command">dhclient</code>, и при удачном
      его выполнении к автоматическому заданию информации для настройки
      интерфейса.</p><p>Есть две вещи, которые вы должны сделать для того, чтобы ваша
      система использовала DHCP при загрузке:</p><a id="idp98048720" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Убедитесь, что устройство <code class="filename">bpf</code>
	  включено в компиляцию вашего ядра.  Чтобы это сделать, добавьте
	  строчку <code class="literal">device bpf</code> в конфигурационный
	  файл ядра и перестройте ядро.  Более подробная информация о
	  построении ядер имеется в <a class="xref" href="kernelconfig.html" title="Глава 9. Настройка ядра FreeBSD">Глава 9, <em>Настройка ядра FreeBSD</em></a>.</p><p>Устройство <code class="filename">bpf</code> уже является частью
	  ядра <code class="filename">GENERIC</code>, которое поставляется вместе с
	  FreeBSD, так что, если вы не используете другое ядро, то вам и
	  не нужно его делать для того, чтобы работал DHCP.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Те, кто беспокоится о безопасности, должны иметь в виду, что
	    устройство <code class="filename">bpf</code> является также тем самым
	    устройством, которое позволяет работать программам-снифферам
	    пакетов (хотя для этого они должны быть запущены пользователем
	    <code class="systemitem">root</code>).  Наличие устройства
	    <code class="filename">bpf</code> <span class="emphasis"><em>необходимо</em></span> для
	    использования DHCP, но если вы чересчур беспокоитесь о
	    безопасности, то вам нельзя добавлять устройство
	    <code class="filename">bpf</code> в ядро только для того, чтобы
	    в неопределённом будущем использовать DHCP.</p></div></li><li class="listitem"><p>По умолчанию, конфигурирование FreeBSD по протоколу DHCP
	  выполняется фоновым процессом, или <em class="firstterm">асинхронно</em>.
	  Остальные стартовые скрипты продолжают работу не ожидая завершения
	  процесса конфигурирования, тем самым ускоряя загрузку системы.</p><p>Фоновое конфигурирование не создает проблем в случае, если
	  сервер DHCP быстро отвечает на запросы, и процесс конфигурирования
	  происходит быстро.  Однако, в некоторых случаях настройка по DHCP
	  может длиться значительное время.  При этом запуск сетевых сервисов
	  может потерпеть неудачу, если будет произведен ранее завершения
	  конфигурирования по DHCP.  Запуск DHCP
	  в <em class="firstterm">синхронном</em> режиме предотвращает проблему,
	  откладывая выполнение остальных стартовых скриптов до момента
	  завершения конфигурирования по DHCP.</p><p>Для осуществления фонового конфигурирования по DHCP
	  (асинхронный режим), используйте значение
	  <span class="quote"><<<span class="quote"><code class="literal">DHCP</code></span>>></span>
	  в <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">ifconfig_<em class="replaceable"><code>fxp0</code></em>="DHCP"</pre><p>Для откладывания запуска стартовых скриптов до завершения
	  конфигурирования по DHCP (синхронный режим), укажите значение
	  <span class="quote"><<<span class="quote"><code class="literal">SYNCDHCP</code></span>>></span>:</p><pre class="programlisting">ifconfig_<em class="replaceable"><code>fxp0</code></em>="SYNCDHCP"</pre><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Замените используемое в этих примерах имя
	    <em class="replaceable"><code>fxp0</code></em> на имя интерфейса, который
	    необходимо сконфигурировать динамически, как это описано
	    в <a class="xref" href="config-network-setup.html" title="12.8. Настройка карт сетевых интерфейсов">Раздел 12.8, <<Настройка карт сетевых интерфейсов>></a>.</p></div><p>Если <code class="command">dhclient</code> в вашей системе находится
	  в другом месте или если вы хотите задать дополнительные параметры для
	  <code class="command">dhclient</code>, то также укажите следующее (изменив так,
	  как вам нужно):</p><pre class="programlisting">dhclient_program="/sbin/dhclient"
dhclient_flags=""</pre></li></ul></div><a id="idp98069200" class="indexterm"></a><p>Сервер DHCP, <span class="application">dhcpd</span>, включён как часть порта
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp42-server/pkg-descr">net/isc-dhcp42-server</a> в коллекцию
      портов.  Этот порт содержит DHCP-сервер от ISC и документацию.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98075856"></a>25.5.5. Файлы</h3></div></div></div><a id="idp98076496" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/etc/dhclient.conf</code></p><p><code class="command">dhclient</code> требует наличия конфигурационного
	  файла, <code class="filename">/etc/dhclient.conf</code>.  Как правило, файл
	  содержит только комментарии, а настройки по умолчанию достаточно
	  хороши.  Этот настроечный файл описан на страницах справочной
	  системы по <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.conf</span>(5)</span></a>.</p></li><li class="listitem"><p><code class="filename">/sbin/dhclient</code></p><p><code class="command">dhclient</code> скомпонован статически и находится
	  в каталоге <code class="filename">/sbin</code>.  На страница Справочника
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a> дается более подробная информация о
	  <code class="command">dhclient</code>.</p></li><li class="listitem"><p><code class="filename">/sbin/dhclient-script</code></p><p><code class="command">dhclient-script</code> является специфичным для
	  FreeBSD скриптом настройки клиента DHCP.  Он описан в
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient-script&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient-script</span>(8)</span></a>, но для нормального функционирования
	  никаких модификаций со стороны пользователя не требуется.</p></li><li class="listitem"><p><code class="filename">/var/db/dhclient.leases</code></p><p>В этом файле клиент DHCP хранит базу данных выданных к
	  использованию адресов в виде журнала.  На странице
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.leases&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.leases</span>(5)</span></a> дается гораздо более подробное
	  описание.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98092496"></a>25.5.6. Дополнительная литература</h3></div></div></div><p>Полное описание протокола DHCP дается в <a class="link" href="http://www.freesoft.org/CIE/RFC/2131/" target="_top">RFC 2131</a>.  Кроме
	того, дополнительная информация есть на сервере <code class="uri"><a class="uri" href="http://www.dhcp.org/" target="_top">http://www.dhcp.org/</a></code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-dhcp-server"></a>25.5.7. Установка и настройка сервера DHCP</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98095440"></a>25.5.7.1. Чему посвящён этот раздел</h4></div></div></div><p>Этот раздел даёт информацию о том, как настроить систему
	  FreeBSD для работы в качестве сервера DHCP на основе реализации
	  пакета DHCP от ISC (Internet Systems Consortium).</p><p>Серверная часть пакета не поставляется как часть FreeBSD, так
	  что вам потребуется установить порт <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp42-server/pkg-descr">net/isc-dhcp42-server</a> для получения
	  этого сервиса.  Обратитесь к <a class="xref" href="ports.html" title="Глава 5. Установка приложений: порты и пакеты">Глава 5, <em>Установка приложений: порты и пакеты</em></a> для получения
	  более полной информации об использовании коллекции портов.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98101968"></a>25.5.7.2. Установка сервера DHCP</h4></div></div></div><a id="idp98102608" class="indexterm"></a><p>Для того, чтобы настроить систему FreeBSD на работу в качестве
	  сервера DHCP, вам необходимо обеспечить присутствие устройства
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bpf&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bpf</span>(4)</span></a>, вкомпилированного в ядро.  Для этого
	  добавьте строку <code class="literal">device bpf</code> в файл
	  конфигурации вашего ядра.  Для получения более полной информации о
	  построении ядер, обратитесь к <a class="xref" href="kernelconfig.html" title="Глава 9. Настройка ядра FreeBSD">Глава 9, <em>Настройка ядра FreeBSD</em></a>.</p><p>Устройство <code class="filename">bpf</code> уже входит в состав
	  ядра <code class="filename">GENERIC</code>, поставляемого с FreeBSD, так что
	  вам не нужно создавать собственное ядро для обеспечения работы
	  DHCP.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Те, кто обращает особое внимание на вопросы безопасности,
	    должны заметить, что <code class="filename">bpf</code> является тем
	    устройством, что позволяет нормально работать снифферам пакетов
	    (хотя таким программам требуются привилегированный доступ).
	    Наличие устройства <code class="filename">bpf</code>
	    <span class="emphasis"><em>обязательно</em></span> для использования DHCP, но если
	    вы очень обеспокоены безопасностью, наверное, вам не нужно
	    включать <code class="filename">bpf</code> в ваше ядро только потому,
	    что в отдалённом будущем вы собираетесь использовать DHCP.</p></div><p>Следующим действием, которое вам нужно выполнить, является
	  редактирование примерного <code class="filename">dhcpd.conf</code>, который
	  устанавливается в составе порта <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp42-server/pkg-descr">net/isc-dhcp42-server</a>.  По умолчанию это
	  файл <code class="filename">/usr/local/etc/dhcpd.conf.sample</code>, и вы
	  должны скопировать его в файл
	  <code class="filename">/usr/local/etc/dhcpd.conf</code> перед тем, как его
	  редактировать.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98111312"></a>25.5.7.3. Настройка сервера DHCP</h4></div></div></div><a id="idp98111952" class="indexterm"></a><p><code class="filename">dhcpd.conf</code> состоит из деклараций
	  относительно подсетей и хостов, и проще всего описывается на
	  примере:</p><pre class="programlisting">option domain-name "example.com";<a id="domain-name"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
option domain-name-servers 192.168.4.100;<a id="domain-name-servers"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
option subnet-mask 255.255.255.0;<a id="subnet-mask"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>

default-lease-time 3600;<a id="default-lease-time"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
max-lease-time 86400;<a id="max-lease-time"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span>
ddns-update-style none;<a id="ddns-update-style"></a><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span>

subnet 192.168.4.0 netmask 255.255.255.0 {
  range 192.168.4.129 192.168.4.254;<a id="range"></a><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span>
  option routers 192.168.4.1;<a id="routers"></a><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span>
}

host mailhost {
  hardware ethernet 02:03:04:05:06:07;<a id="hardware"></a><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span>
  fixed-address mailhost.example.com;<a id="fixed-address"></a><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span>
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#domain-name"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Этот параметр задаёт домен, который будет выдаваться
	      клиентам в качестве домена, используемого по умолчанию при
	      поиске.  Обратитесь к страницам справочной системы по
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=resolv.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">resolv.conf</span>(5)</span></a> для получения дополнительной информации о
	      том, что это значит.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#domain-name-servers"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Этот параметр задаёт список разделённых запятыми серверов
	      DNS, которые должен использовать клиент.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#subnet-mask"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Маска сети, которая будет выдаваться клиентам.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#default-lease-time"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Клиент может запросить определённое время, которое будет
	      действовать выданная информация.  В противном случае сервер
	      выдаст настройки с этим сроком (в секундах).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#max-lease-time"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Это максимальное время, на которое сервер будет выдавать
	      конфигурацию.  Если клиент запросит больший срок, он будет
	      подтверждён, но будет действовать только
	      <code class="literal">max-lease-time</code> секунд.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#ddns-update-style"><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Этот параметр задаёт, будет ли сервер DHCP пытаться
	      обновить DNS при выдаче или освобождении конфигурационной
	      информации.  В реализации ISC этот параметр является
	      <span class="emphasis"><em>обязательным</em></span>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#range"><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Это определение того, какие IP-адреса должны использоваться
	      в качестве резерва для выдачи клиентам.  IP-адреса между и
	      включая границы, будут выдаваться клиентам.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#routers"><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Объявление маршрутизатора, используемого по умолчанию,
	      который будет выдаваться клиентам.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#hardware"><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Аппаратный MAC-адрес хоста (чтобы сервер DHCP мог
	      распознать хост, когда тот делает запрос).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#fixed-address"><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Определение того, что хосту всегда будет выдаваться один и
	      тот же IP-адрес.  Заметьте, что указание здесь имени хоста
	      корректно, так как сервер DHCP будет разрешать имя хоста
	      самостоятельно до того, как выдать конфигурационную
	      информацию.</p></td></tr></table></div><p>Когда вы закончите составлять свой
	  <code class="filename">dhcpd.conf</code>, нужно разрешить запуск сервера DHCP
	  в файле <code class="filename">/etc/rc.conf</code>, добавив в него
	  строки</p><pre class="programlisting">dhcpd_enable="YES"
dhcpd_ifaces="dc0"</pre><p>Замените <code class="literal">dc0</code> именем интерфейса (или именами
	  интерфейсов, разделяя их пробелами), на котором(ых) сервер DHCP
	  должен принимать запросы от клиентов.</p><p>Затем вы можете стартовать сервер DHCP при помощи команды</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/isc-dhcpd start</code></strong></pre><p>Если в будущем вам понадобится сделать изменения в настройке
	  вашего сервера, то важно заметить, что посылка сигнала
	  <code class="literal">SIGHUP</code> приложению
	  <span class="application">dhcpd</span> <span class="emphasis"><em>не приведёт</em></span> к
	  перезагрузке настроек, как это бывает для большинства даемонов.
	  Вам нужно послать сигнал <code class="literal">SIGTERM</code> для остановки
	  процесса, а затем перезапустить его при помощи вышеприведённой
	  команды.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98151248"></a>25.5.7.4. Файлы</h4></div></div></div><a id="idp98151888" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/usr/local/sbin/dhcpd</code></p><p><span class="application">dhcpd</span> скомпонован статически и
	      расположен в каталоге <code class="filename">/usr/local/sbin</code>.
	      Страницы справочной системы <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhcpd</span>(8)</span></a>,
	      устанавливаемые портом, содержат более полную информацию о
	      <span class="application">dhcpd</span>.</p></li><li class="listitem"><p><code class="filename">/usr/local/etc/dhcpd.conf</code></p><p><span class="application">dhcpd</span> требует наличия
	      конфигурационного файла,
	      <code class="filename">/usr/local/etc/dhcpd.conf</code>, до того, как
	      он будет запущен и начнёт предоставлять сервис клиентам.
	      Необходимо, чтобы этот файл содержал все данные, которая
	      будет выдаваться обслуживаемым клиентам, а также информацию о
	      работе сервера.  Этот конфигурационный файл описывается на
	      страницах справочной системы <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcpd.conf</span>(5)</span></a>, которые
	      устанавливаются портом.</p></li><li class="listitem"><p><code class="filename">/var/db/dhcpd.leases</code></p><p>Сервер DHCP ведёт базу данных выданной информации в этом
	      файле, который записывается в виде протокола.  Страницы
	      справочной системы <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd.leases&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcpd.leases</span>(5)</span></a>, устанавливаемые портом,
	      дают гораздо более подробное описание.</p></li><li class="listitem"><p><code class="filename">/usr/local/sbin/dhcrelay</code></p><p><span class="application">dhcrelay</span> используется в сложных
	      ситуациях, когда сервер DHCP пересылает запросы от клиента
	      другому серверу DHCP в отдельной сети.  Если вам нужна такая
	      функциональность, то установите порт <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp42-relay/pkg-descr">net/isc-dhcp42-relay</a>.  На страницах
	      справочной системы <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcrelay&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhcrelay</span>(8)</span></a>, которые устанавливаются
	      портом, даётся более полное описание.</p></li></ul></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-nis.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="network-dns.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">25.4. Network Information System (NIS/YP) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 25.6. Domain Name System (<acronym class="acronym">DNS</acronym>)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>