<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>11.7. Установка SAP(R) R/3(R)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="linuxemu.html" title="Глава 11. Двоичная совместимость с Linux" /><link rel="prev" href="linuxemu-oracle.html" title="11.6. Установка Oracle(R)" /><link rel="next" href="linuxemu-advanced.html" title="11.8. Дополнительные сведения" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.7. Установка <span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="linuxemu-oracle.html">Пред.</a> </td><th width="60%" align="center">Глава 11. Двоичная совместимость с Linux</th><td width="20%" align="right"> <a accesskey="n" href="linuxemu-advanced.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sapr3"></a>11.7. Установка <span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</h2></div><div><span class="authorgroup">Предоставил <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Holger</span> <span class="surname">Kipp</span></span>. </span></div><div><span class="authorgroup">Исходную версию преобразовал в SGML <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Valentino</span> <span class="surname">Vaschetto</span></span>. </span></div></div></div><a id="idp85360720" class="indexterm"></a><p>Инсталляции систем <span class="application"><span class="trademark">SAP</span>(R)</span> на базе FreeBSD
      не будут поддерживаться службой поддержки <span class="trademark">SAP</span>(R) - они
      предоставляют поддержку только на сертифицированных платформах.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="preface"></a>11.7.1. Предисловие</h3></div></div></div><p>Этот документ описывает возможный способ установки системы
	<span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</span> с
	<span class="application">СУБД <span class="trademark">Oracle</span>(R) Database</span> на машине с ОС
	FreeBSD, включая установку FreeBSD и
	<span class="application"><span class="trademark">Oracle</span>(R)</span>. Будут описаны две
	разные конфигурации:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R) 4.6B (IDES)</span> с
	  <span class="application"><span class="trademark">Oracle</span>(R) 8.0.5</span> на FreeBSD 4.3-STABLE</p></li><li class="listitem"><p><span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R) 4.6C</span> с
	  <span class="application"><span class="trademark">Oracle</span>(R) 8.1.7</span> на FreeBSD 4.5-STABLE</p></li></ul></div><p>Хотя в этом документе мы пытаемся подробно описать все важные
	шаги, он не заменяет руководства по установке
	<span class="application"><span class="trademark">Oracle</span>(R)</span> и
	<span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</span>.</p><p>По специфическим вопросам <span class="application"><span class="trademark">SAP</span>(R)</span> и
	<span class="application"><span class="trademark">Oracle</span>(R)</span> обратитесь к документации,
	поставляемой в составе <span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</span>
	Linux edition, а также к другим источникам информации об
	<span class="application"><span class="trademark">Oracle</span>(R)</span> и
	<span class="application"><span class="trademark">SAP</span>(R) OSS</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="software"></a>11.7.2. Программное обеспечение</h3></div></div></div><p>Для установки <span class="application"><span class="trademark">SAP</span>(R)</span> были использованы
	следующие диски CD-ROM:</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="software-46b"></a>11.7.2.1. <span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R) 4.6B, <span class="trademark">Oracle</span>(R) 8.0.5</h4></div></div></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Имя</th><th>Номер</th><th>Описание</th></tr></thead><tbody><tr><td>KERNEL</td><td>51009113</td><td>SAP Kernel Oracle /
		Installation / AIX, Linux, Solaris</td></tr><tr><td>RDBMS</td><td>51007558</td><td>Oracle / RDBMS 8.0.5.X /
		Linux</td></tr><tr><td>EXPORT1</td><td>51010208</td><td>IDES / DB-Export /
		Диск 1 из 6</td></tr><tr><td>EXPORT2</td><td>51010209</td><td>IDES / DB-Export /
		Диск 2 из 6</td></tr><tr><td>EXPORT3</td><td>51010210</td><td>IDES / DB-Export /
		Диск 3 из 6</td></tr><tr><td>EXPORT4</td><td>51010211</td><td>IDES / DB-Export /
		Диск 4 из 6</td></tr><tr><td>EXPORT5</td><td>51010212</td><td>IDES / DB-Export /
		Диск 5 из 6</td></tr><tr><td>EXPORT6</td><td>51010213</td><td>IDES / DB-Export /
		Диск 6 из 6</td></tr></tbody></table></div><p>Кроме того, мы использовали CD <span class="application"><span class="trademark">Oracle</span>(R) 8
	Server</span> (Опытная версия 8.0.5 для Linux,
	ядро версии 2.0.33), который не обязательно понадобится, и
	FreeBSD 4.3-STABLE (она вышла всего через несколько дней после 4.3
	RELEASE).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="software-46c"></a>11.7.2.2. <span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R) 4.6C SR2, <span class="trademark">Oracle</span>(R) 8.1.7</h4></div></div></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Имя</th><th>Номер</th><th>Описание</th></tr></thead><tbody><tr><td>KERNEL</td><td>51014004</td><td>SAP Kernel Oracle /
		  SAP Kernel Version 4.6D / DEC, Linux</td></tr><tr><td>RDBMS</td><td>51012930</td><td>Oracle 8.1.7/ RDBMS /
		  Linux</td></tr><tr><td>EXPORT1</td><td>51013953</td><td>Release 4.6C SR2 / Export
		  / Диск 1 из 4</td></tr><tr><td>EXPORT1</td><td>51013953</td><td>Release 4.6C SR2 / Export
		  / Диск 2 из 4</td></tr><tr><td>EXPORT1</td><td>51013953</td><td>Release 4.6C SR2 / Export
		  / Диск 3 bp 4</td></tr><tr><td>EXPORT1</td><td>51013953</td><td>Release 4.6C SR2 / Export
		  / Диск 4 из 4</td></tr><tr><td>LANG1</td><td>51013954</td><td>Release 4.6C SR2 /
		  Language / DE, EN, FR / Диск 1 из 3</td></tr></tbody></table></div><p>В зависимости от языков, которые необходимо установить,
	  могут потребоваться дополнительные CD. Здесь мы использовали
	  только немецкий и английский языки, поэтому потребовался только
	  первый языковой CD.  Обратите внимание, что номера всех
	  EXPORT CD идентичны.  Все три языковых CD тоже имеют один номер
	  (это отличается от нумерации CD в версии 4.6B IDES).  На момент
	  написания этого раздела (20.03.2002) установленное ПО работало
	  на FreeBSD 4.5-STABLE.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sap-notes"></a>11.7.3. Примечания по <span class="trademark">SAP</span>(R)</h3></div></div></div><p>Прочитайте следующие документы перед установкой
	<span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</span> - они пригодятся в ходе
	установки:</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sap-notes-46b"></a>11.7.3.1. <span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R) 4.6B, <span class="trademark">Oracle</span>(R) 8.0.5</h4></div></div></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Номер</th><th>Название</th></tr></thead><tbody><tr><td>0171356</td><td>SAP Software on Linux: Essential
		  Comments</td></tr><tr><td>0201147</td><td>INST: 4.6C R/3 Inst. on UNIX -
		  Oracle</td></tr><tr><td>0373203</td><td>Update / Migration Oracle 8.0.5 --&gt;
		  8.0.6/8.1.6 LINUX</td></tr><tr><td>0072984</td><td>Release of Digital UNIX 4.0B for
		  Oracle</td></tr><tr><td>0130581</td><td>R3SETUP step DIPGNTAB terminates</td></tr><tr><td>0144978</td><td>Your system has not been installed
		  correctly</td></tr><tr><td>0162266</td><td>Questions and tips for R3SETUP on Windows
		  NT / W2K</td></tr></tbody></table></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sap-notes-46c"></a>11.7.3.2. <span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R) 4.6C, <span class="trademark">Oracle</span>(R) 8.1.7</h4></div></div></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Номер</th><th>Название</th></tr></thead><tbody><tr><td>0015023</td><td>Initializing table TCPDB (RSXP0004)
		  (EBCDIC)</td></tr><tr><td>0045619</td><td>R/3 with several languages or
		  typefaces</td></tr><tr><td>0171356</td><td>SAP Software on Linux: Essential
		  Comments</td></tr><tr><td>0195603</td><td>RedHat 6.1 Enterprise version:
		  Known problems</td></tr><tr><td>0212876</td><td>The new archiving tool SAPCAR</td></tr><tr><td>0300900</td><td>Linux: Released DELL Hardware</td></tr><tr><td>0377187</td><td>RedHat 6.2: important remarks</td></tr><tr><td>0387074</td><td>INST: R/3 4.6C SR2 Installation on
		  UNIX</td></tr><tr><td>0387077</td><td>INST: R/3 4.6C SR2 Inst. on UNIX -
		  Oracle</td></tr><tr><td>0387078</td><td>SAP Software on UNIX: OS Dependencies
		  4.6C SR2</td></tr></tbody></table></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="hardware-requirements"></a>11.7.4. Требования к аппаратному обеспечению</h3></div></div></div><p>Следующего оборудования достаточно для установки
	<span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R) System</span>.  Для производственного
	использования необходима более точная оценка параметров:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Компонент</th><th>4.6B</th><th>4.6C</th></tr></thead><tbody><tr><td>Процессор</td><td>2 x 800MHz <span class="trademark">Pentium</span>(R) III</td><td>2 x 800MHz <span class="trademark">Pentium</span>(R) III</td></tr><tr><td>Память</td><td>1GB ECC</td><td>2GB ECC</td></tr><tr><td>Объем дисков</td><td>50-60GB (IDES)</td><td>50-60GB (IDES)</td></tr></tbody></table></div><p>Для производственного использования рекомендуются процессоры
	<span class="trademark">Xeon</span>TM с большим кешем, высокоскоростной доступ к дискам (SCSI,
	аппаратный RAID-контроллер), USV и ECC-RAM.  Большой объем дискового
	пространства связан с заранее сконфигурированной системой IDES,
	которая создает 27 Гбайт файлов базы данных по ходу установки.
	Этого пространства также достаточно для исходных производственных
	систем и прикладных данных.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="hardware-46b"></a>11.7.4.1. <span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R) 4.6B, <span class="trademark">Oracle</span>(R) 8.0.5</h4></div></div></div><p>Было использовано следующее стандартное оборудование:
	двухпроцессорная материнская плата с двумя процессорами
	<span class="trademark">Pentium</span>(R) III 800 MHz, SCSI-контроллером <span class="trademark">Adaptec</span>(R) 29160
	Ultra160 (для работы с 40/80 Гбайт стримером DLT и приводом
	CDROM), <span class="trademark">Mylex</span>(R) <span class="trademark">AcceleRAID</span>TM (2 канала, firmware 6.00-1-00 с
	32 Мбайт RAM). К RAID-контроллеру <span class="trademark">Mylex</span>(R) подключены два диска
	по 17 Гбайт (зеркалированы) и четыре диска по 36 Гбайт
	(RAID уровня 5).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="hardware-46c"></a>11.7.4.2. <span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R) 4.6C, <span class="trademark">Oracle</span>(R) 8.1.7</h4></div></div></div><p>Для этой установки был использован <span class="trademark">Dell</span>TM <span class="trademark">PowerEdge</span>TM 2500:
	двухпроцессорная плата с двумя процессорами <span class="trademark">Pentium</span>(R) III
	1000 MHz (256 Кбайт кэш), 2 Гбайта PC133 ECC SDRAM,
	PERC/3 DC PCI RAID-контроллер со 128 Мбайтами и приводом
	EIDE DVD-ROM. К RAID-контроллеру подключены два диска по
	18 Гбайт (зеркалированы) и четыре диска по 36 Гбайт
	(RAID уровня 5).</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installation"></a>11.7.5. Установка FreeBSD</h3></div></div></div><p>Сначала надо установить FreeBSD. Есть несколько способов сделать
	это; подробнее
	см. <a class="xref" href="install-diff-media.html" title="2.13. Подготовка собственного источника установки">Раздел 2.13, <<Подготовка собственного источника установки>></a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disk-layout"></a>11.7.5.1. Компоновка дисков</h4></div></div></div><p>Для простоты диски при установке
	  <span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R) 46B</span> и <span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R) 46C
	  SR2</span> использовались одинаково. Изменились только
	  имена устройств, поскольку установка выполнялась на разное
	  оборудование (<code class="filename">/dev/da</code> и
	  <code class="filename">/dev/amr</code>, соответственно, так что при
	  использовании AMI <span class="trademark">MegaRAID</span>(R) будут задействованы устройства
	  <code class="filename">/dev/amr0s1a</code> вместо <code class="filename">/dev/da0s1a</code>):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Файловая система</th><th>Размер (в блока по 1 Кбайту)</th><th>Размер (Гбайт)</th><th>Смонтирована в</th></tr></thead><tbody><tr><td><code class="filename">/dev/da0s1a</code></td><td>1.016.303</td><td>1</td><td><code class="filename">/</code></td></tr><tr><td><code class="filename">/dev/da0s1b</code></td><td> </td><td>6</td><td>swap</td></tr><tr><td><code class="filename">/dev/da0s1e</code></td><td>2.032.623</td><td>2</td><td><code class="filename">/var</code></td></tr><tr><td><code class="filename">/dev/da0s1f</code></td><td>8.205.339</td><td>8</td><td><code class="filename">/usr</code></td></tr><tr><td><code class="filename">/dev/da1s1e</code></td><td>45.734.361</td><td>45</td><td><code class="filename">/compat/linux/oracle</code></td></tr><tr><td><code class="filename">/dev/da1s1f</code></td><td>2.032.623</td><td>2</td><td><code class="filename">/compat/linux/sapmnt</code></td></tr><tr><td><code class="filename">/dev/da1s1g</code></td><td>2.032.623</td><td>2</td><td><code class="filename">/compat/linux/usr/sap</code></td></tr></tbody></table></div><p>Конфигурируем и инициализируем заранее два логических диска
	  с помощью ПО RAID <span class="trademark">Mylex</span>(R) или PERC/3. Программы конфигурирования
	  можно запустить в ходе загрузки <acronym class="acronym">BIOS</acronym>.</p><p>Обратите внимание, что использованная компоновка дисков
	  немного отличается от рекомендованной <span class="trademark">SAP</span>(R), поскольку <span class="trademark">SAP</span>(R)
	  рекомендует монтировать подкаталоги
	  <span class="application"><span class="trademark">Oracle</span>(R)</span> (и некоторые другие)
	  отдельно - мы решили просто создать подкаталоги.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makeworldandnewkernel"></a>11.7.5.2. <code class="command">make world</code> и новое ядро</h4></div></div></div><p>Загрузите последние исходные коды ветки -STABLE. Пересоздайте
 	  систему и ваше специализированное ядро после необходимых изменений
	  в файле конфигурации ядра.  В него надо включить
	  <a class="link" href="sapr3.html#kerneltuning" title="11.7.7.6. Настройка ядра">параметры ядра</a>, требуемые
	  для <span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</span> и
	  <span class="application"><span class="trademark">Oracle</span>(R)</span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingthelinuxenviornment"></a>11.7.6. Установка среды Linux</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installinglinuxbase-system"></a>11.7.6.1. Установка базовой системы Linux</h4></div></div></div><p>Сначала необходимо установить порт
	  <a class="link" href="linuxemu-lbc-install.html#linuxemu-libs-port" title="11.2.1.1. Установка с помощью порта linux_base">linux_base</a>
	  (от имени пользователя <code class="systemitem">root</code>):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/emulators/linux_base</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install distclean</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installinglinuxdevelopment"></a>11.7.6.2. Установка среды разработки Linux</h4></div></div></div><p>Среда разработки Linux необходима, если вы хотите установить
	  <span class="application"><span class="trademark">Oracle</span>(R)</span> в ОС FreeBSD, как описано в
	  <a class="xref" href="linuxemu-oracle.html" title="11.6. Установка Oracle(R)">Раздел 11.6, <<Установка <span class="trademark">Oracle</span>(R)>></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/devel/linux_devtools</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install distclean</code></strong></pre><p>Среда разработки Linux была установлена только для
	  <span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R) 46B IDES</span>. Она не нужна, если
	  <span class="application">сервер <span class="trademark">Oracle</span>(R)</span> не перекомпоновывается
	  в системе FreeBSD. Именно так и происходит, если вы используете
	  tar-архив (tarball) <span class="application"><span class="trademark">Oracle</span>(R)</span> с
	  Linux-системы.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingnecessaryrpms"></a>11.7.6.3. Установка необходимых пакетов RPM</h4></div></div></div><a id="idp85599440" class="indexterm"></a><p>Для запуска программы <code class="command">R3SETUP</code> необходима
	  поддержка модулей PAM. В ходе первой установки
	  <span class="application"><span class="trademark">SAP</span>(R)</span> на ОС FreeBSD 4.3-STABLE мы
	  попытались установить PAM со всеми необходимыми пакетами и,
	  в конце концов, принудительно установили пакет PAM, что и
	  сработало. Для <span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R) 4.6C SR2</span> мы
	  сразу принудительно установили PAM RPM, что тоже сработало,
	  так что похоже, что пакеты, от которых декларирована зависимость,
	  не нужны:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpm -i --ignoreos --nodeps --root /compat/linux --dbpath /var/lib/rpm \
pam-0.68-7.i386.rpm</code></strong></pre><p>Чтобы <span class="application"><span class="trademark">Oracle</span>(R) 8.0.5</span> мог запустить
	  интеллектуального агента, нам также пришлось установить пакет
	  RedHat Tcl <code class="filename">tcl-8.0.5-30.i386.rpm</code> (иначе
	  перекомпоновка в ходе установки <span class="application"><span class="trademark">Oracle</span>(R)</span>
	  не выполнится).  Есть и другие проблемы с перекомпоновкой
	  <span class="application"><span class="trademark">Oracle</span>(R)</span>, но это проблема
	  <span class="application"><span class="trademark">Oracle</span>(R)</span> на Linux, не связанная с
	  особенностями FreeBSD.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxprocandfallbackelfbrand"></a>11.7.6.4. Дополнительные советы</h4></div></div></div><p>Может также иметь смысл добавить <code class="literal">linprocfs</code>
	  в <code class="filename">/etc/fstab</code>; подробнее об этом см. на
	  странице справочника <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=linprocfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">linprocfs</span>(5)</span></a>. Еще можно установить
	  параметр <code class="literal">kern.fallback_elf_brand=3</code> в файле
	  <code class="filename">/etc/sysctl.conf</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingsapr3env"></a>11.7.7. Создание среды <span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="filesystemsandmountpoints"></a>11.7.7.1. Создание необходимых файловых систем и точек монтирования</h4></div></div></div><p>Для простой установки достаточно создать следующие файловые
	  системы:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>точка монтирования</th><th>размер в Гбайтах</th></tr></thead><tbody><tr><td><code class="filename">/compat/linux/oracle</code></td><td>45 GB</td></tr><tr><td><code class="filename">/compat/linux/sapmnt</code></td><td>2 GB</td></tr><tr><td><code class="filename">/compat/linux/usr/sap</code></td><td>2 GB</td></tr></tbody></table></div><p>Также необходимо создать несколько ссылок. В противном случае,
	  инсталлятор <span class="application"><span class="trademark">SAP</span>(R)</span> будет выдавать
	  сообщения об ошибках, поскольку он проверяет созданные ссылки:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/oracle /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/sapmnt /sapmnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/usr/sap /usr/sap</code></strong></pre><p>Возможные сообщения об ошибках в ходе установки (в данном
	  случае, для установки System <span class="emphasis"><em>PRD</em></span> и
	  <span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R) 4.6C SR2</span>):</p><pre class="screen">INFO 2002-03-19 16:45:36 R3LINKS_IND_IND SyLinkCreate:200
    Checking existence of symbolic link /usr/sap/PRD/SYS/exe/dbg to
    /sapmnt/PRD/exe. Creating if it does not exist...

WARNING 2002-03-19 16:45:36 R3LINKS_IND_IND SyLinkCreate:400
    Link /usr/sap/PRD/SYS/exe/dbg exists but it points to file
    /compat/linux/sapmnt/PRD/exe instead of /sapmnt/PRD/exe. The
    program cannot go on as long as this link exists at this
    location. Move the link to another location.

ERROR 2002-03-19 16:45:36 R3LINKS_IND_IND Ins_SetupLinks:0
    can not setup link '/usr/sap/PRD/SYS/exe/dbg' with content
    '/sapmnt/PRD/exe'</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingusersanddirectories"></a>11.7.7.2. Создание пользователей и каталогов</h4></div></div></div><p>Для системы <span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</span> необходимы два
	  пользователя и три группы.  Имена пользователей зависят от
	  идентификатора системы <span class="application"><span class="trademark">SAP</span>(R)</span> (SID),
	  который состоит из трех букв. Некоторые из этих идентификаторов
	  зарезервированы <span class="application"><span class="trademark">SAP</span>(R)</span> (например,
	  <code class="literal">SAP</code> и <code class="literal">NIX</code>. Полный
	  список см. в документации <span class="application"><span class="trademark">SAP</span>(R)</span>).
	  Для установки IDES мы использовали <code class="literal">IDS</code>,
	  а для установки 4.6C SR2 - <code class="literal">PRD</code>, поскольку
	  эта система предназначалась для промышленного использования.
	  Поэтому нам понадобились следующие группы (идентификаторы групп
	  могут отличаться, мы просто указали наши значения, использованные
	  при установке):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>идентификатор группы</th><th>имя группы</th><th>описание</th></tr></thead><tbody><tr><td>100</td><td>dba</td><td>Администратор базы данных</td></tr><tr><td>101</td><td>sapsys</td><td>Система <span class="trademark">SAP</span>(R)</td></tr><tr><td>102</td><td>oper</td><td>Оператор базы данных</td></tr></tbody></table></div><p>Для стандартной установки
	  <span class="application"><span class="trademark">Oracle</span>(R)</span> используется только группа
	  <code class="systemitem">dba</code>. В качестве группы
	  <code class="systemitem">oper</code> используется та же группа
	  <code class="systemitem">dba</code> (подробнее об этом см. в
	  документации <span class="application"><span class="trademark">Oracle</span>(R)</span> и
	  <span class="application"><span class="trademark">SAP</span>(R)</span>).</p><p>Нам также нужны следующие пользователи:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th>идентификатор пользователя</th><th>имя пользователя</th><th>общий вид имени</th><th>группа</th><th>дополнительные группы</th><th>описание</th></tr></thead><tbody><tr><td>1000</td><td>idsadm/prdadm</td><td><em class="replaceable"><code>sid</code></em>adm</td><td>sapsys</td><td>oper</td><td>Администратор <span class="trademark">SAP</span>(R)</td></tr><tr><td>1002</td><td>oraids/oraprd</td><td>ora<em class="replaceable"><code>sid</code></em></td><td>dba</td><td>oper</td><td>Администратор <span class="trademark">Oracle</span>(R)</td></tr></tbody></table></div><p>Добавление пользователей с помощью <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a>
	  требует следующих параметров для <span class="quote"><<<span class="quote">Администратора <span class="trademark">SAP</span>(R)</span>>></span>
	  (обратите внимание на командный интерпретатор и начальный
	  каталог):</p><pre class="programlisting">Name: <em class="replaceable"><code>sid</code></em>adm
Password: ******
Fullname: SAP Administrator <em class="replaceable"><code>SID</code></em>
Uid: 1000
Gid: 101 (sapsys)
Class:
Groups: sapsys dba
HOME: /home/<em class="replaceable"><code>sid</code></em>adm
Shell: bash  (/compat/linux/bin/bash)</pre><p>а для <span class="quote"><<<span class="quote">Администратора <span class="trademark">Oracle</span>(R)</span>>></span>:</p><pre class="programlisting">Name: ora<em class="replaceable"><code>sid</code></em>
Password: ******
Fullname: Oracle Administrator <em class="replaceable"><code>SID</code></em>
Uid: 1002
Gid: 100 (dba)
Class:
Groups: dba
HOME: /oracle/<em class="replaceable"><code>sid</code></em>
Shell: bash  (/compat/linux/bin/bash)</pre><p>Для него также надо указать группу
	  <code class="systemitem">oper</code>, если вы используете обе группы,
	  <code class="systemitem">dba</code> и <code class="systemitem">oper</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingdirectories"></a>11.7.7.3. Создание каталогов</h4></div></div></div><p>Эти каталоги обычно создаются в отдельных файловых системах.
	  Впрочем, все зависит от ваших требований.  Мы решили создавать их
	  как обычные каталоги, поскольку в любом случае они находятся на
	  одном массиве RAID 5:</p><p>Сначала мы установим владельцев и права для ряда каталогов (от
	  имени пользователя <code class="systemitem">root</code>):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 775 /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 777 /sapmnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown root:dba /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown <em class="replaceable"><code>sid</code></em>adm:sapsys /compat/linux/usr/sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 775 /compat/linux/usr/sap</code></strong></pre><p>Затем, мы создадим каталоги от имени пользователя
	  <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code>.  Все они
	  будут размещены в каталоге
	  <code class="filename">/oracle/<em class="replaceable"><code>SID</code></em></code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - ora<em class="replaceable"><code>sid</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/<em class="replaceable"><code>SID</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir mirrlogA mirrlogB origlogA origlogB</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir sapdata1 sapdata2 sapdata3 sapdata4 sapdata5 sapdata6</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir saparch sapreorg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong></pre><p>Для установки <span class="application"><span class="trademark">Oracle</span>(R) 8.1.7</span>
	  потребуется несколько дополнительных каталогов:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - ora<em class="replaceable"><code>sid</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir 805_32</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir client stage</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir client/80x_32</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir stage/817_32</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/<em class="replaceable"><code>SID</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir 817_32</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Каталог <code class="filename">client/80x_32</code> должен иметь
	  точно такое имя. Не заменяйте <span class="emphasis"><em>x</em></span> числом или
	  другим символом.</p></div><p>На третьем шаге мы создаем каталоги от имени пользователя
	  <code class="systemitem"><em class="replaceable"><code>sid</code></em>adm</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - <em class="replaceable"><code>sid</code></em>adm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir <em class="replaceable"><code>SID</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir trans</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="entriesinslashetcslashservices"></a>11.7.7.4. Записи в файле <code class="filename">/etc/services</code></h4></div></div></div><p>Для системы <span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</span> необходим ряд
	  записей в файле <code class="filename">/etc/services</code>, которые не
	  будут правильно созданы при установке под FreeBSD.  Пожалуйста,
	  добавьте следующие записи (потребуются, по крайней мере, записи,
	  соответствующие номеру экземпляра - в данном случае,
	  <code class="literal">00</code>.  Не повредит добавить все записи, от
	  <code class="literal">00</code> до <code class="literal">99</code>, для
	  <code class="literal">dp</code>, <code class="literal">gw</code>, <code class="literal">sp</code>
	  и <code class="literal">ms</code>).  Если вы собираетесь использовать
	  <span class="application">SAProuter</span> или вам необходим доступ к
	  <span class="application"><span class="trademark">SAP</span>(R)</span> OSS, потребуется также запись для
	  <code class="literal">99</code>, поскольку порт 3299 обычно используется
	  для процесса <span class="application">SAProuter</span> в целевой
	  системе:</p><pre class="programlisting">
sapdp00  3200/tcp # SAP Dispatcher.      3200 + Instance-Number
sapgw00  3300/tcp # SAP Gateway.         3300 + Instance-Number
sapsp00  3400/tcp #                      3400 + Instance-Number
sapms00  3500/tcp #                      3500 + Instance-Number
sapms<em class="replaceable"><code>SID</code></em> 3600/tcp # SAP Message Server.  3600 + Instance-Number
sapgw00s   4800/tcp # SAP Secure Gateway   4800 + Instance-Number</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="necessarylocales"></a>11.7.7.5. Необходимые локали</h4></div></div></div><a id="idp85806800" class="indexterm"></a><p>Системе <span class="application"><span class="trademark">SAP</span>(R)</span> нужны, по крайней
	  мере, две локали, не входящие в стандартную установку RedHat.
	  <span class="trademark">SAP</span>(R) предлагает необходимые пакеты RPM для загрузки со своего
	  FTP-сервера (который доступен только для клиентов с доступом к
	  OSS).  См. список необходимых пакетов RPM в заметке
	  0171356.</p><p>Можно также просто создать соответствующие ссылки
	  (например, с <span class="emphasis"><em>de_DE</em></span> и
	  <span class="emphasis"><em>en_US</em></span>), но мы не рекомендуем это для
	  производственной системы (хотя это и сработало для системы
	  IDES безо всяких проблем).  Необходимы следующие локали:</p><pre class="programlisting">de_DE.ISO-8859-1
en_US.ISO-8859-1</pre><p>Создайте ссылки следующим образом:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /compat/linux/usr/share/locale</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s de_DE de_DE.ISO-8859-1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s en_US en_US.ISO-8859-1</code></strong></pre><p>Если их не будет, в ходе установки возникнет ряд проблем.
	  Если их просто проигнорировать (установив <code class="literal">STATUS</code>
	  для соответствующих шагов равным <code class="literal">OK</code> в файле
	  <code class="filename">CENTRDB.R3S</code>), нельзя будет зарегистрироваться
	  в системе <span class="application"><span class="trademark">SAP</span>(R)</span> без дополнительных
	  усилий.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="kerneltuning"></a>11.7.7.6. Настройка ядра</h4></div></div></div><a id="idp85820624" class="indexterm"></a><p>Системам <span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</span> надо много
	  ресурсов.  Поэтому мы добавили следующие параметры в файл
	  конфигурации ядра:</p><pre class="programlisting"># Для пожирателей памяти (SAP и Oracle):
options MAXDSIZ="(1024*1024*1024)"
options DFLDSIZ="(1024*1024*1024)"
# Необходимые опции System V.
options SYSVSHM #совместно используемая память в стиле SYSV
options SHMMAXPGS=262144 #макс. количество страниц совместно используемой
#options SHMMAXPGS=393216 #use this for the 46C inst.parameters
options SHMMNI=256 #макс. количество идентификаторов совместно используемой
options SHMSEG=100 #макс. количество сегментов разд. памяти на процесс
options SYSVMSG #очереди сообщений в стиле SYSV
options MSGSEG=32767 #макс. количество сегментов сообщений в системе
options MSGSSZ=32 #размер сегмента сообщений. ДОЛЖЕН быть степенью 2
options MSGMNB=65535 #макс. символов на очередь сообщений
options MSGTQL=2046 #макс. количество сообщений в системе
options SYSVSEM #семафоры в стиле SYSV
options SEMMNU=256 #количество структур UNDO семафоров
options SEMMNS=1024 #количество семафоров в системе
options SEMMNI=520 #количество идентификаторов семафоров
options SEMUME=100       #количество ключей UNDO</pre><p>Минимальные значения указаны в документации, поставляемой
	  вместе с <span class="trademark">SAP</span>(R).  Поскольку описания для Linux нет, дополнительную
	  информацию см. в разделе HP-UX (32-bit). Поскольку в системе, на
	  которую устанавливалась версия 4.6C SR2, оперативной памяти больше, сегменты совместно используемой можно сделать больше как для
	  <span class="application"><span class="trademark">SAP</span>(R)</span>, так и для
	  <span class="application"><span class="trademark">Oracle</span>(R)</span>, поэтому задайте большее
	  количество страниц совместно используемой памяти.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">При стандартной установке FreeBSD на <span class="trademark">i386</span>TM,
	  задайте значения <code class="literal">MAXDSIZ</code> и <code class="literal">DFLDSIZ</code> не более 1 Гбайта. В противном
	  случае могут выдаваться странные ошибки вроде
	  <span class="errorname">ORA-27102: out of memory</span> и
	  <span class="errorname">Linux Error: 12: Cannot allocate
	  memory</span>.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingsapr3"></a>11.7.8. Установка <span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="preparingsapcdroms"></a>11.7.8.1. Подготовка дисков CDROM <span class="trademark">SAP</span>(R)</h4></div></div></div><p>В ходе установки придется монтировать и демонтировать
	  много дисков CDROM.  При наличии достаточного количества приводов
	  CDROM, можно смонтировать их все.  Мы же решили скопировать
	  содержимое дисков CDROM в соответствующие каталоги:</p><pre class="programlisting">/oracle/<em class="replaceable"><code>SID</code></em>/sapreorg/<em class="replaceable"><code>имя_cd</code></em></pre><p>где <em class="replaceable"><code>имя_cd</code></em> - одно из следующих
	  <code class="filename">KERNEL</code>,
	  <code class="filename">RDBMS</code>, <code class="filename">EXPORT1</code>,
	  <code class="filename">EXPORT2</code>, <code class="filename">EXPORT3</code>,
	  <code class="filename">EXPORT4</code>, <code class="filename">EXPORT5</code> и
	  <code class="filename">EXPORT6</code> для установки 4.6B/IDES, и
	  <code class="filename">KERNEL</code>, <code class="filename">RDBMS</code>,
	  <code class="filename">DISK1</code>, <code class="filename">DISK2</code>,
	  <code class="filename">DISK3</code>, <code class="filename">DISK4</code> и
	  <code class="filename">LANG</code> для установки 4.6C SR2.  Все имена
	  файлов на смонтированных дисках должны быть в верхнем регистре,
	  в противном случае, используйте при монтировании опцию
	  <code class="option">-g</code>.  Поэтому используйте следующие команды:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount_cd9660 -g /dev/cd0a /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp -R /mnt/* /oracle/<em class="replaceable"><code>SID</code></em>/sapreorg/имя_cd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>umount /mnt</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="runningtheinstall-script"></a>11.7.8.2. Запуск скрипта установки</h4></div></div></div><p>Сначала надо подготовить каталог <code class="filename">install</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/<em class="replaceable"><code>SID</code></em>/sapreorg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd install</code></strong></pre><p>Затем запускается скрипт установки, который скопирует почти
	  все необходимые файлы в каталог
	  <code class="filename">install</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/oracle/<em class="replaceable"><code>SID</code></em>/sapreorg/KERNEL/UNIX/INSTTOOL.SH</code></strong></pre><p>Дистрибутив IDES (4.6B) включает полностью настроенную
	  демонстрационную систему <span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R), поэтому он включает шесть
	  дисков EXPORT CD, а не три.  В этот момент шаблон установки
	  <code class="filename">CENTRDB.R3S</code> предназначен для установки
	  стандартного центрального экземпляра
	  (<span class="application"><span class="trademark">R/3</span>(R)</span> и базы данных), а не для
	  установки центрального экземпляра IDES, поэтому необходимо
	  скопировать соответствующий файл <code class="filename">CENTRDB.R3S</code>
	  из каталога <code class="filename">EXPORT1</code>, иначе
	  команда <code class="command">R3SETUP</code> запросит только три диска
	  EXPORT CDs.</p><p>Более новый релиз <span class="application"><span class="trademark">SAP</span>(R) 4.6C SR2</span>
	  включает четыре диска EXPORT CD.  Шаги установки определяет файл
	  параметров <code class="filename">CENTRAL.R3S</code>. В отличие от
	  прежних релизов, больше нет отдельных шаблонов установки для
	  центрального экземпляра с базой данных или без нее.
	  <span class="application"><span class="trademark">SAP</span>(R)</span> использует отдельный шаблон для
	  установки базы данных.  Для перезапуска установки в дальнейшем,
	  однако, достаточно перезапустить исходный файл.</p><p>В ходе установки и после нее <span class="application"><span class="trademark">SAP</span>(R)</span>
	  требует, чтобы команда <code class="command">hostname</code> возвращала
	  только имя компьютера, не уточнённое именем домена.  Поэтому либо
	  задайте имя хоста в соответствии с этим требованием, либо
	  настройте псевдоним с помощью команды
	  <code class="command">alias hostname='hostname -s'</code> для пользователей
	  <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code> и
	  <code class="systemitem"><em class="replaceable"><code>sid</code></em>adm</code> (и для
	  пользователя <code class="systemitem">root</code>, про крайней мере,
	  в ходе шагов по установке, выполняемых от имени
	  <code class="systemitem">root</code>). Можно также изменить
	  файлы <code class="filename">.profile</code> и <code class="filename">.login</code>
	  для обоих пользователей, которые создаются в ходе установки
	  <span class="application"><span class="trademark">SAP</span>(R)</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="startr3setup-46B"></a>11.7.8.3. Запуск <code class="command">R3SETUP</code> 4.6B</h4></div></div></div><p>Проверьте, что переменная среды <code class="envar">LD_LIBRARY_PATH</code>
	  установлена правильно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>export LD_LIBRARY_PATH=/oracle/IDS/lib:/sapmnt/IDS/exe:/oracle/805_32/lib</code></strong></pre><p>Выполните команду <code class="command">R3SETUP</code> от имени
	  пользователя <code class="systemitem">root</code> из каталога установки:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/IDS/sapreorg/install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRDB.R3S</code></strong></pre><p>Скрипт затем задает ряд вопросов (стандартные ответы даны
	  в скобках, а затем представлены реальные ответы):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Вопрос</th><th>Стандартное значение</th><th>Ответ</th></tr></thead><tbody><tr><td>Enter SAP System ID</td><td>[C11]</td><td>IDS<span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter SAP Instance Number</td><td>[00]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter SAPMOUNT Directory</td><td>[/sapmnt]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter name of SAP central host</td><td>[troubadix.domain.de]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter name of SAP db host</td><td>[troubadix]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Select character set</td><td>[1] (WE8DEC)</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter Oracle server version (1) Oracle 8.0.5, (2) Oracle 8.0.6, (3) Oracle 8.1.5, (4) Oracle 8.1.6</td><td> </td><td>1<span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Extract Oracle Client archive</td><td>[1] (Yes, extract)</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter path to KERNEL CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/KERNEL</td></tr><tr><td>Enter path to RDBMS CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/RDBMS</td></tr><tr><td>Enter path to EXPORT1 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT1</td></tr><tr><td>Directory to copy EXPORT1 CD</td><td>[/oracle/IDS/sapreorg/CD4_DIR]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter path to EXPORT2 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT2</td></tr><tr><td>Directory to copy EXPORT2 CD</td><td>[/oracle/IDS/sapreorg/CD5_DIR]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter path to EXPORT3 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT3</td></tr><tr><td>Directory to copy EXPORT3 CD</td><td>[/oracle/IDS/sapreorg/CD6_DIR]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter path to EXPORT4 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT4</td></tr><tr><td>Directory to copy EXPORT4 CD</td><td>[/oracle/IDS/sapreorg/CD7_DIR]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter path to EXPORT5 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT5</td></tr><tr><td>Directory to copy EXPORT5 CD</td><td>[/oracle/IDS/sapreorg/CD8_DIR]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter path to EXPORT6 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT6</td></tr><tr><td>Directory to copy EXPORT6 CD</td><td>[/oracle/IDS/sapreorg/CD9_DIR]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter amount of RAM for SAP + DB</td><td> </td><td>850<span class="keycap"><strong>Enter</strong></span> (in Megabytes)</td></tr><tr><td>Service Entry Message Server</td><td>[3600]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter Group-ID of sapsys</td><td>[101]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter Group-ID of oper</td><td>[102]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter Group-ID of dba</td><td>[100]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter User-ID of <em class="replaceable"><code>sid</code></em>adm</td><td>[1000]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter User-ID of ora<em class="replaceable"><code>sid</code></em></td><td>[1002]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Number of parallel procs</td><td>[2]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr></tbody></table></div><p>Если вы не скопировали диски в разные каталоги,
	  инсталлятор <span class="application"><span class="trademark">SAP</span>(R)</span> не сможет найти
	  необходимые CD (идентифицируемые файлом
	  <code class="filename">LABEL.ASC</code> на диске) и попросит затем
	  вставить и смонтировать CD, и подтвердить или ввести точку
	  его монтирования.</p><p>Файл <code class="filename">CENTRDB.R3S</code> может содержать
	  ошибки.  В нашем случае, он снова запросил EXPORT4 CD, но
	  указал корректный ключ (6_LOCATION, затем 7_LOCATION и т.д.),
	  так что, можно просто продолжать вводить корректные
	  значения.</p><p>За исключением нескольких упомянутых ниже проблем, все
	  должно идти нормально до момента, когда придется устанавливать
	  программное обеспечение для работы с базой данных <span class="trademark">Oracle</span>(R).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="startr3setup-46C"></a>11.7.8.4. Запуск <code class="command">R3SETUP</code> 4.6C SR2</h4></div></div></div><p>Проверьте, что переменная среды <code class="envar">LD_LIBRARY_PATH</code>
	  установлена правильно.  Это значение отличается от использованного
	  при установке версии 4.6B с
	  <span class="application"><span class="trademark">Oracle</span>(R) 8.0.5</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>export LD_LIBRARY_PATH=/sapmnt/PRD/exe:/oracle/PRD/817_32/lib</code></strong></pre><p>Выполните команду <code class="command">R3SETUP</code> от имени
	  пользователя <code class="systemitem">root</code> из каталога установки:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/PRD/sapreorg/install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRAL.R3S</code></strong></pre><p>Скрипт затем задаст ряд вопросов (стандартные значения
	  даны в скобках, а затем идут реальные ответы):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Вопрос</th><th>Стандартное значение</th><th>Ответ</th></tr></thead><tbody><tr><td>Enter SAP System ID</td><td>[C11]</td><td>PRD<span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter SAP Instance Number</td><td>[00]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter SAPMOUNT Directory</td><td>[/sapmnt]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter name of SAP central host</td><td>[majestix]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter Database System ID</td><td>[PRD]</td><td>PRD<span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter name of SAP db host</td><td>[majestix]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Select character set</td><td>[1] (WE8DEC)</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter Oracle server version (2) Oracle 8.1.7</td><td> </td><td>2<span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Extract Oracle Client archive</td><td>[1] (Yes, extract)</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter path to KERNEL CD</td><td>[/sapcd]</td><td>/oracle/PRD/sapreorg/KERNEL</td></tr><tr><td>Enter amount of RAM for SAP + DB</td><td>2044</td><td>1800<span class="keycap"><strong>Enter</strong></span> (in Megabytes)</td></tr><tr><td>Service Entry Message Server</td><td>[3600]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter Group-ID of sapsys</td><td>[100]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter Group-ID of oper</td><td>[101]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter Group-ID of dba</td><td>[102]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter User-ID of <code class="systemitem">oraprd</code></td><td>[1002]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter User-ID of <code class="systemitem">prdadm</code></td><td>[1000]</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>LDAP support</td><td> </td><td>3<span class="keycap"><strong>Enter</strong></span> (no support)</td></tr><tr><td>Installation step completed</td><td>[1] (continue)</td><td><span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Choose installation service</td><td>[1] (DB inst,file)</td><td><span class="keycap"><strong>Enter</strong></span></td></tr></tbody></table></div><p>Пока создание пользователей дает сообщение об ошибке при
	  установке на стадиях OSUSERDBSID_IND_ORA (создание пользователя
	  <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code>) и
	  OSUSERSIDADM_IND_ORA (создание пользователя
	  <code class="systemitem"><em class="replaceable"><code>sid</code></em>adm</code>).</p><p>За исключением некоторых упомянутых далее проблем, все
	  должно идти нормально до момента, когда придется устанавливать
	  программное обеспечение для работы с базой данных <span class="trademark">Oracle</span>(R).</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingoracle805"></a>11.7.9. Установка <span class="trademark">Oracle</span>(R) 8.0.5</h3></div></div></div><p>Описания возможных проблем с Linux и <span class="application">Сервером
	<span class="trademark">Oracle</span>(R)</span> см. в соответствующих файлах
	<span class="trademark">SAP</span>(R) Notes и <span class="trademark">Oracle</span>(R) <code class="filename">Readme</code>. Большинство,
	если не все проблемы, связаны с несовместимыми библиотеками.</p><p>Подробнее об установке <span class="application"><span class="trademark">Oracle</span>(R)</span>
	см. в разделе <a class="link" href="linuxemu-oracle.html" title="11.6. Установка Oracle(R)">Установка
	<span class="trademark">Oracle</span>(R)</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingtheoracle805withorainst"></a>11.7.9.1. Установка <span class="trademark">Oracle</span>(R) 8.0.5 с помощью <code class="command">orainst</code></h4></div></div></div><p>Если надо использовать <span class="application"><span class="trademark">Oracle</span>(R)
	  8.0.5</span>, для успешной перекомпоновки понадобится
	  несколько дополнительных библиотек, поскольку
	  <span class="application"><span class="trademark">Oracle</span>(R) 8.0.5</span> был скомпонован со
	  старой версией glibc (RedHat 6.0), но уже RedHat 6.1 использует
	  новую библиотеку glibc. Так что, для успешной перекомпоновки
	  нужно установить следующие дополнительные пакеты:</p><p><code class="filename">compat-libs-5.2-2.i386.rpm</code></p><p><code class="filename">compat-glibc-5.2-2.0.7.2.i386.rpm</code></p><p><code class="filename">compat-egcs-5.2-1.0.3a.1.i386.rpm</code></p><p><code class="filename">compat-egcs-c++-5.2-1.0.3a.1.i386.rpm</code></p><p><code class="filename">compat-binutils-5.2-2.9.1.0.23.1.i386.rpm</code></p><p>Дополнительную информацию см. в файлах <span class="trademark">SAP</span>(R) Notes или <span class="trademark">Oracle</span>(R)
	  <code class="filename">Readme</code>.  Если установить эти пакеты не
	  представляется возможным (на момент установки у нас не было
	  времени, чтобы это проверить), можно использовать исходные двоичные
	  модули или перекомпонованные двоичные модули с исходной системы
	  RedHat.</p><p>Для компиляции интеллектуального агента должен быть
	  установлен пакет RedHat Tcl.  Если вы не можете найти пакет
	  <code class="filename">tcl-8.0.3-20.i386.rpm</code>, подойдет и более
	  новый, вроде <code class="filename">tcl-8.0.5-30.i386.rpm</code> для
	  RedHat 6.1.</p><p>За исключением перекомпоновки, установка выполняется
	  просто:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - oraids</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export TERM=xterm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export ORACLE_TERM=xterm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export ORACLE_HOME=/oracle/IDS</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/orainst_sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./orainst</code></strong></pre><p>Нажимайте на всех экранах клавишу <span class="keycap"><strong>Enter</strong></span>,
	  пока программное обеспечение не будет установлено, убрав только
	  пометку выбора с <span class="emphasis"><em><span class="trademark">Oracle</span>(R) On-Line Text Viewer</em></span>,
	  поскольку этого компонента для Linux сейчас нет.
	  <span class="application"><span class="trademark">Oracle</span>(R)</span> затем захочет
	  перекомпоновать модули с помощью
	  <code class="command">i386-glibc20-linux-gcc</code>
	  вместо имеющихся <code class="command">gcc</code>, <code class="command">egcs</code>
	  или <code class="command">i386-redhat-linux-gcc</code>.</p><p>Из-за нехватки времени мы решили использовать двоичные
	  модули из версии <span class="application"><span class="trademark">Oracle</span>(R) 8.0.5
	  PreProduction</span> после того, как первая попытка
	  заставить работать версию с RDBMS CD провалилась, - попытки
	  найти и загрузить требуемые пакеты RPM нам показались настоящим
	  кошмаром.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingtheoracle805preproduction"></a>11.7.9.2. Установка <span class="trademark">Oracle</span>(R) 8.0.5 Pre-production Release для
	  Linux (ядро 2.0.33)</h4></div></div></div><p>Эту установку выполнить очень легко. Монтируем CD, запускаем
	  инсталлятор.  Затем он запрашивает местонахождение начального
	  каталога <span class="trademark">Oracle</span>(R) и копирует туда двоичные модули.  Мы, однако,
	  не удаляли остатки прежних попыток установить RDBMS.</p><p>В конечном итоге, базу данных <span class="application"><span class="trademark">Oracle</span>(R)</span>
	  удалось запустить без проблем.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingoracle817"></a>11.7.10. Установка tar-архива <span class="trademark">Oracle</span>(R) 8.1.7 для Linux</h3></div></div></div><p>Создайте tar-архив <code class="filename">oracle81732.tgz</code>
	каталога установки на Linux-системе и разархивируйте его в
	каталог <code class="filename">/oracle/<em class="replaceable"><code>SID</code></em>/817_32/</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="continuewithsapr4installation"></a>11.7.11. Продолжение установки <span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</h3></div></div></div><p>Сначала проверьте настройку среды для пользователей
	<code class="systemitem">idsamd</code> (<em class="replaceable"><code>sid</code></em>adm) и
	<code class="systemitem">oraids</code> (ora<em class="replaceable"><code>sid</code></em>). У
	них обоих должны теперь быть файлы <code class="filename">.profile</code>,
	<code class="filename">.login</code> и <code class="filename">.cshrc</code>,
	использующие <code class="command">hostname</code>. Если имя хоста в системе
	полностью уточнено, надо заменить <code class="command">hostname</code>
	командой <code class="command">hostname -s</code> во всех трех файлах.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="databaseload"></a>11.7.11.1. Загрузка базы данных</h4></div></div></div><p>Потом команду <code class="command">R3SETUP</code> можно либо
	  перезапустить, либо продолжить (в зависимости от того, была
	  ли завершена ее работа).  <code class="command">R3SETUP</code> затем
	  создает табличные пространства и загружает данные (для 46B
	  IDES - с дисков от EXPORT1 до EXPORT6, для 46C -
	  с дисков от DISK1 до DISK4) в базу данных с помощью утилиты
	  <code class="command">R3load</code>.</p><p>После завершения загрузки базы данных (это может занять
	  несколько часов), будет запрошено несколько паролей.  Для тестовых
	  установок можно использовать хорошо известные стандартные
	  пароли (но если защита важна - используйте другие!):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Вопрос</th><th>Ответ</th></tr></thead><tbody><tr><td>Enter Password for sapr3</td><td>sap<span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Confirum Password for sapr3</td><td>sap<span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter Password for sys</td><td>change_on_install<span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Confirm Password for sys</td><td>change_on_install<span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter Password for system</td><td>manager<span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Confirm Password for system</td><td>manager<span class="keycap"><strong>Enter</strong></span></td></tr></tbody></table></div><p>Мы столкнулись с несколькими проблемами с
	  <code class="command">dipgntab</code> при установке 4.6B.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="listener"></a>11.7.11.2. Процесс прослушивания</h4></div></div></div><p>Запустите процесс прослушивания
	  (<span class="application"><span class="trademark">Oracle</span>(R)</span> Listener) от имени
	  пользователя <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code>
	  следующим образом:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>umask 0; lsnrctl start</code></strong></pre><p>В противном случае, вы можете получить сообщение об
	  ошибке <span class="errorcode">ORA-12546</span>, поскольку у сокетов
	  будут неправильные права доступа. См. <span class="trademark">SAP</span>(R) Note 072984.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mnlstables"></a>11.7.11.3. Обновление таблиц MNLS</h4></div></div></div><p>Если вы планируете использовать в системе
	  <span class="application"><span class="trademark">SAP</span>(R)</span> языки, для которых не
	  подходит кодировка Latin-1, придется изменить таблицы
	  Multi National Language Support. Эта процедура описана в
	  <span class="trademark">SAP</span>(R) OSS Notes 15023 и 45619. Если же нет, можете пропустить
	  этот вопрос в ходе установки <span class="application"><span class="trademark">SAP</span>(R)</span>.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Если вам не нужна поддержка MNLS, все равно необходимо
	  проверить таблицу TCPDB и инициализировать ее, если это еще не
	  было сделано. Дополнительную информацию см. в <span class="trademark">SAP</span>(R) Note 0015023
	  и 0045619.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="postinstallationsteps"></a>11.7.12. Шаги после установки</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="requestsapr3licensekey"></a>11.7.12.1. Запрос лицензионного ключа <span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</h4></div></div></div><p>Вы должны запросить ваш лицензионный ключ
	  <span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</span>. Это необходимо, поскольку
	  временная лицензия, использованная в ходе установки, действительна
	  только четыре недели. Сначала получите ключ оборудования.
	  Зарегистрируйтесь как пользователь <code class="systemitem">idsadm</code>
	  и вызовите команду <code class="command">saplicense</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sapmnt/IDS/exe/saplicense -get</code></strong></pre><p>При вызове команды <code class="command">saplicense</code> без
	  параметров будет выдан список опций.  После получения
	  лицензионного ключа, его можно установить с помощью
	  команды:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sapmnt/IDS/exe/saplicense -install</code></strong></pre><p>Затем вас попросят ввести следующие значения:</p><pre class="programlisting">SAP SYSTEM ID   = <em class="replaceable"><code>SID, 3 символа</code></em>
CUSTOMER KEY    = <em class="replaceable"><code>ключ оборудования, 11 символов</code></em>
INSTALLATION NO = <em class="replaceable"><code>установка, 10 цифр</code></em>
EXPIRATION DATE = <em class="replaceable"><code>yyyymmdd, обычно - "99991231"</code></em>
LICENSE KEY     = <em class="replaceable"><code>лицензионный ключ, 24 символа</code></em></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingusers"></a>11.7.12.2. Создание пользователей</h4></div></div></div><p>Создайте пользователя в клиенте 000 (некоторые задачи
	  обязательно надо выполнять из клиента 000, от имени пользователя,
	  отличающегося от <code class="systemitem">sap*</code> и
	  <code class="systemitem">ddic</code>).  В качестве имени пользователя мы
	  обычно выбираем <code class="systemitem">wartung</code> (или
	  <code class="systemitem">service</code>, по английски).  Требуются профили
	  <code class="literal">sap_new</code> и <code class="literal">sap_all</code>. Для
	  дополнительной защиты надо изменить пароли стандартных
	  пользователей на всех клиентах (в том числе, пользователей
	  <code class="systemitem">sap*</code> и <code class="systemitem">ddic</code>).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="configtranssysprofileopermodesetc"></a>11.7.12.3. Конфигурирование системы передачи, профиля, режимов работы и т.п.</h4></div></div></div><p>В клиенте 000, от имени пользователя, отличающегося от
	  <code class="systemitem">ddic</code> и <code class="systemitem">sap*</code>,
	  выполните, как минимум, следующее:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Задача</th><th>Транзакция</th></tr></thead><tbody><tr><td>Сконфигурируйте систему передачи, например, как <span class="emphasis"><em>Stand-Alone Transport Domain Entity</em></span></td><td>STMS</td></tr><tr><td>Создайте/Отредактируйте профиль для системы</td><td>RZ10</td></tr><tr><td>Сконфигурируйте режимы работы и экземпляры</td><td>RZ04</td></tr></tbody></table></div><p>Эти и другие шаги, которые надо выполнить после установки,
	  подробно описаны в руководствах по установке
	  <span class="application"><span class="trademark">SAP</span>(R)</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="editintsidsap"></a>11.7.12.4. Редактирование <code class="filename">init<em class="replaceable"><code>sid</code></em>.sap</code> (<code class="filename">initIDS.sap</code>)</h4></div></div></div><p>Файл <code class="filename">/oracle/IDS/dbs/initIDS.sap</code>
	  содержит профиль резервного копирования
	  <span class="application"><span class="trademark">SAP</span>(R)</span>.  Здесь надо задать размер
	  используемой ленты, тип сжатия и т.д.  Чтобы можно было
	  использовать <code class="command">sapdba</code> /
	  <code class="command">brbackup</code>, мы изменили следующие значения:</p><pre class="programlisting">compress = hardware
archive_function = copy_delete_save
cpio_flags = "-ov --format=newc --block-size=128 --quiet"
cpio_in_flags = "-iuv --block-size=128 --quiet"
tape_size = 38000M
tape_address = /dev/nsa0
tape_address_rew = /dev/sa0</pre><p>Объяснения:</p><p><code class="varname">compress</code>: мы использовали ленту HP DLT1,
	  которая поддерживает аппаратное сжатие.</p><p><code class="varname">archive_function</code>: этот параметр задает
	  стандартное поведение для сохранения архивных журналов <span class="trademark">Oracle</span>(R):
	  новые журнальные файлы сохраняются на ленту, уже сохраненные
	  файлы журнала сохраняются еще раз, а затем удаляются.  Это
	  предотвращает многочисленные проблемы, если потребуется
	  восстановить базу данных, а одна из архивных лент окажется
	  сбойной.</p><p><code class="varname">cpio_flags</code>: по умолчанию используется
	  <code class="option">-B</code>, что устанавливает размер блока 5120 байт.
	  Для лент DLT компания HP рекомендует размер блока не меньше
	  32 Кбайт, поэтому мы использовали значение
	  <code class="option">--block-size=128</code> для задания размера блока
	  64 Кбайта.  Опция <code class="option">--format=newc</code> необходима,
	  поскольку у нас есть индексные дескрипторы (inodes) с номерами
	  больше 65535.  Последняя опция, <code class="option">--quiet</code> необходима
	  потому, что иначе команда <code class="command">brbackup</code> выдает
	  сообщение об ошибке, как только команда <code class="command">cpio</code>
	  выдаст количество сохраненных блоков.</p><p><code class="varname">cpio_in_flags</code>: флаги, необходимые для
	  загрузки данных с ленты.  Формат распознается автоматически.</p><p><code class="varname">tape_size</code>: обычно этот параметр задает
	  реальную ёмкость ленты. Из соображений надежности (мы используем
	  аппаратное сжатие), задано значение несколько меньше
	  фактического.</p><p><code class="varname">tape_address</code>: устройство без перемотки
	  для использования в команде <code class="command">cpio</code>.</p><p><code class="varname">tape_address_rew</code>: устройство с
	  перемоткой для использования в команде
	  <code class="command">cpio</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86199120"></a>11.7.12.5. Проблемы конфигурирования после установки</h4></div></div></div><p>Следующие параметры <span class="application"><span class="trademark">SAP</span>(R)</span> надо
	  настроить после установки (примеры для IDES 46B,
	  1 Гбайт памяти):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Имя</th><th>Значение</th></tr></thead><tbody><tr><td>ztta/roll_extension</td><td>250000000</td></tr><tr><td>abap/heap_area_dia</td><td>300000000</td></tr><tr><td>abap/heap_area_nondia</td><td>400000000</td></tr><tr><td>em/initial_size_MB</td><td>256</td></tr><tr><td>em/blocksize_kB</td><td>1024</td></tr><tr><td>ipc/shm_psize_40</td><td>70000000</td></tr></tbody></table></div><p><span class="trademark">SAP</span>(R) Note 0013026:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Имя</th><th>Значение</th></tr></thead><tbody><tr><td>ztta/dynpro_area</td><td>2500000</td></tr></tbody></table></div><p><span class="trademark">SAP</span>(R) Note 0157246:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Имя</th><th>Значение</th></tr></thead><tbody><tr><td>rdisp/ROLL_MAXFS</td><td>16000</td></tr><tr><td>rdisp/PG_MAXFS</td><td>30000</td></tr></tbody></table></div><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">При указанных выше параметрах в системе с 1 Гбайт
	    памяти можно обнаружить примерно следующее использование
	    памяти:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">Mem: 547M Active, 305M Inact, 109M Wired, 40M Cache, 112M Buf, 3492K Free</pre></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="problemsduringinstallation"></a>11.7.13. Проблемы в ходе установки</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="restartr3setup"></a>11.7.13.1. Перезапуск <code class="command">R3SETUP</code> после устранения проблемы</h4></div></div></div><p><code class="command">R3SETUP</code> останавливается при выявлении
	  ошибки.  Если вы просмотрели соответствующие журнальные файлы и
	  исправили ошибку, придется запускать <code class="command">R3SETUP</code>
	  снова, обычно выбирая REPEAT как опцию для последнего шага,
	  на котором команда <code class="command">R3SETUP</code> выдала сообщение
	  об ошибке.</p><p>Для перезапуска команды <code class="command">R3SETUP</code> просто
	  запустите её с соответствующим файлом
	  <code class="filename">R3S</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRDB.R3S</code></strong></pre><p>для 4.6B или с файлом</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRAL.R3S</code></strong></pre><p>для 4.6C, независимо от того, произошла ли ошибка
	    при работе с файлом <code class="filename">CENTRAL.R3S</code> или
	    <code class="filename">DATABASE.R3S</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">На некоторых стадиях команда <code class="command">R3SETUP</code>
	    предполагает, что запущены и работают процессы как сервера
	    базы данных, так и <span class="application"><span class="trademark">SAP</span>(R)</span> (поскольку
	    эти шаги уже выполнены).  Если возникнут ошибки и, например,
	    запустить сервер базы данных не получится, придется вручную
	    запускать сервер базы данных и <span class="application"><span class="trademark">SAP</span>(R)</span>
	    после исправления ошибок и до повторного запуска
	    <code class="command">R3SETUP</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Не забудьте также снова запустить процесс прослушивания
	    <span class="application"><span class="trademark">Oracle</span>(R)</span> (как пользователь
	    <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code> с помощью
	    команды <code class="command">umask 0; lsnrctl start</code>), если он тоже
	    был остановлен (например, из-за необходимой перезагрузки
	    системы).</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="indoraduringduringr3setup"></a>11.7.13.2. OSUSERSIDADM_IND_ORA в ходе <code class="command">R3SETUP</code></h4></div></div></div><p>Если <code class="command">R3SETUP</code> выдает сообщения об
	  ошибках на этом этапе, отредактируйте используемый при этом
	  файл шаблона <code class="command">R3SETUP</code>
	  (<code class="filename">CENTRDB.R3S</code> (4.6B), либо
	  <code class="filename">CENTRAL.R3S</code> или
	  <code class="filename">DATABASE.R3S</code> (4.6C)).
	  Найдите раздел <code class="literal">[OSUSERSIDADM_IND_ORA]</code> или
	  поищите единственную запись <code class="literal">STATUS=ERROR</code> и
	  отредактируйте следующие значения:</p><pre class="programlisting">HOME=/home/<em class="replaceable"><code>sid</code></em>adm (было пусто)
STATUS=OK (был статус ERROR)
	</pre><p>Затем надо снова перезапустить
	  <code class="command">R3SETUP</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="indoraduringr3setup"></a>11.7.13.3. OSUSERDBSID_IND_ORA в ходе <code class="command">R3SETUP</code></h4></div></div></div><p>Возможно, команда <code class="command">R3SETUP</code> также выдаст
	  сообщения об ошибке на этой стадии.  Ошибка здесь аналогична
	  возникающей на стадии OSUSERSIDADM_IND_ORA. Просто отредактируйте
	  используемый файл шаблона <code class="command">R3SETUP</code>
	  (<code class="filename">CENTRDB.R3S</code> (4.6B), либо
	  <code class="filename">CENTRAL.R3S</code> или
	  <code class="filename">DATABASE.R3S</code> (4.6C)).
	  Найдите раздел <code class="literal">[OSUSERDBSID_IND_ORA]</code> или поищите
	  единственную запись <code class="literal">STATUS=ERROR</code> и
	  отредактируйте следующее значение в этом разделе:</p><pre class="programlisting">STATUS=OK</pre><p>Затем перезапустите <code class="command">R3SETUP</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="oraviewvrffilenotfound"></a>11.7.13.4. <span class="errorname">oraview.vrf FILE NOT FOUND</span> в ходе установки <span class="trademark">Oracle</span>(R)</h4></div></div></div><p>Вы не сняли выбор с <span class="emphasis"><em><span class="trademark">Oracle</span>(R) On-Line Text
	  Viewer</em></span> перед началом установки.  Он помечен для
	  установки, хотя этот продукт и не доступен сейчас для Linux.
	  Снимите пометку с этого продукта в меню установки
	  <span class="application"><span class="trademark">Oracle</span>(R)</span> и перезапустите
	  установку.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="textenvincalid"></a>11.7.13.5. <span class="errorname">TEXTENV_INVALID</span> в ходе <code class="command">R3SETUP</code>, RFC или запуска SAPgui</h4></div></div></div><p>Если возникает эта ошибка, не найдена нужная локаль.
	  <span class="trademark">SAP</span>(R) Note 0171356 перечисляет необходимые пакеты RPM, которые
	  надо установить (например, <code class="filename">saplocales-1.0-3</code>,
	  <code class="filename">saposcheck-1.0-1</code> для RedHat 6.1).  Если
	  игнорировать все ошибки и менять <code class="literal">STATUS</code>
	  соответствующих шагов с <code class="literal">ERROR</code> на
	  <code class="literal">OK</code> (в файле <code class="filename">CENTRDB.R3S</code>)
	  каждый раз, когда <code class="command">R3SETUP</code> сообщает об
	  ошибке и просто перезапуск ать <code class="command">R3SETUP</code>, система
	  <span class="application"><span class="trademark">SAP</span>(R)</span> не будет правильно
	  сконфигурирована, и вы затем не сможете подключиться к системе
	  с помощью <span class="application">SAPgui</span>, хотя запустить
	  систему и получится.  Попытка подключения с помощью старой
	  Linux-версии <span class="application">SAPgui</span> приведет к выдаче
	  следующих сообщений:</p><pre class="programlisting">Sat May 5 14:23:14 2001
*** ERROR =&gt; no valid userarea given [trgmsgo. 0401]
Sat May 5 14:23:22 2001
*** ERROR =&gt; ERROR NR 24 occured [trgmsgi. 0410]
*** ERROR =&gt; Error when generating text environment. [trgmsgi. 0435]
*** ERROR =&gt; function failed [trgmsgi. 0447]
*** ERROR =&gt; no socket operation allowed [trxio.c 3363]
Speicherzugriffsfehler</pre><p>Это связано с тем, что система
	  <span class="application"><span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</span> не может корректно назначить
	  локаль и сама не была надлежащим образом сконфигурирована
	  (не хватает записей в некоторых таблицах базы данных).  Чтобы
	  можно было подключиться к <span class="application"><span class="trademark">SAP</span>(R)</span>,
	  добавьте следующие записи в файл <code class="filename">DEFAULT.PFL</code>
	  (см. Note 0043288):</p><pre class="programlisting">abap/set_etct_env_at_new_mode = 0
install/collate/active = 0
rscp/TCP0B = TCP0B</pre><p>Перезапустите систему <span class="application"><span class="trademark">SAP</span>(R)</span>. Теперь
	  вы можете подключиться к системе, хотя специфические для страны
	  языковые установки могут работать не так, как предполагалось.
	  После исправления настроек страны (и добавления соответствующих
	  локалей) эти записи можно удалить из файла
	  <code class="filename">DEFAULT.PFL</code> и перезапустить систему <span class="application"><span class="trademark">SAP</span>(R)</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ora-00001"></a>11.7.13.6. <span class="errorcode">ORA-00001</span></h4></div></div></div><p>Эта ошибка возникает только с
	  <span class="application"><span class="trademark">Oracle</span>(R) 8.1.7</span> на FreeBSD.
	  Причина в том, что сервер <span class="application"><span class="trademark">Oracle</span>(R)</span>
	  не может правильно проинициализироваться и аварийно завершает
	  работу, оставляя не освобожденными в системе семафоры и
	  совместно используемую память.  При следующей попытке запустить сервер
	  базы данных выдается ошибка <span class="errorcode">ORA-00001</span>.</p><p>Найдите оставшиеся семафоры и сегменты памяти с помощью
	  команды <code class="command">ipcs -a</code> и удалите с помощью
	  <code class="command">ipcrm</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ora-00445pmon"></a>11.7.13.7. <span class="errorcode">ORA-00445</span> (фоновый процесс PMON не запущен)</h4></div></div></div><p>Эта ошибка произошла с <span class="application"><span class="trademark">Oracle</span>(R) 8.1.7</span>.
	  Она выдается, если сервер был запущен с помощью обычного
	  скрипта <code class="command">startsap</code> (например,
	  <code class="command">startsap_majestix_00</code>) от имени пользователя
	  <code class="systemitem">prdadm</code>.</p><p>Возможный способ обхода - запускать сервер базы данных
	  от имени пользователя <code class="systemitem">oraprd</code> с помощью
	  <code class="command">svrmgrl</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>svrmgrl</code></strong>
SVRMGR&gt; <strong class="userinput"><code>connect internal;</code></strong>
SVRMGR&gt; <strong class="userinput"><code>startup</code></strong>;
SVRMGR&gt; <strong class="userinput"><code>exit</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ora-12546"></a>11.7.13.8. <span class="errorcode">ORA-12546</span> (запускайте процесс прослушивания с правильными правами)</h4></div></div></div><p>Запускайте процесс прослушивания
	  <span class="application"><span class="trademark">Oracle</span>(R)</span> от имени пользователя
	  <code class="systemitem">oraids</code> следующими командами:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umask 0; lsnrctl start</code></strong></pre><p>В противном случае, вы можете получить сообщение об ошибке
	  <span class="errorcode">ORA-12546</span>, поскольку сокеты не будут иметь
	  нужных прав доступа. См. <span class="trademark">SAP</span>(R) Note 0072984.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ora-27102"></a>11.7.13.9. <span class="errorcode">ORA-27102</span> (не хватает памяти)</h4></div></div></div><p>Эта ошибка произошла при попытке использовать значения
	  <code class="literal">MAXDSIZ</code> и <code class="literal">DFLDSIZ</code> больше
	  1 Гбайта (1024x1024x1024).  Кроме того, мы получили
	  <span class="errorname">Linux Error 12: Cannot allocate memory</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dipgntabindind"></a>11.7.13.10. [DIPGNTAB_IND_IND] в ходе <code class="command">R3SETUP</code></h4></div></div></div><p>В общем случае, см. <span class="trademark">SAP</span>(R) Note 0130581
	  (прекращается работа <code class="command">R3SETUP</code> на шаге
	  <code class="literal">DIPGNTAB</code>).  В ходе установки
	  IDES-версии по каким-то причинам процесс установки использовал
	  вместо правильного имени системы <span class="application"><span class="trademark">SAP</span>(R)</span>,
	  <span class="quote"><<<span class="quote">IDS</span>>></span>, пустую строку, <code class="literal">""</code>.  Это
	  приводит к небольшим проблемам при доступе к каталогам, поскольку пути
	  генерируются динамически на базе <em class="replaceable"><code>SID</code></em>
	  (в данном случае, IDS).  Поэтому вместо обращения к:</p><pre class="programlisting">/usr/sap/IDS/SYS/...
/usr/sap/IDS/DVMGS00</pre><p>используются следующие пути:</p><pre class="programlisting">/usr/sap//SYS/...
/usr/sap/D00</pre><p>Чтобы продолжить установку мы создали ссылку и дополнительный
	  каталог:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pwd</code></strong>
/compat/linux/usr/sap
<code class="prompt">#</code> <strong class="userinput"><code>ls -l</code></strong>
total 4
drwxr-xr-x 3  idsadm sapsys 512 May 5 11:20 D00
drwxr-x--x 5  idsadm sapsys 512 May 5 11:35 IDS
lrwxr-xr-x 1  root   sapsys 7 May 5 11:35 SYS -&gt; IDS/SYS
drwxrwxr-x 2  idsadm sapsys 512 May 5 13:00 tmp
drwxrwxr-x 11 idsadm sapsys 512 May 4 14:20 trans</pre><p>Мы также нашли документы <span class="trademark">SAP</span>(R) Notes (0029227 и 0008401),
	  описывающие это поведение.  Мы не столкнулись с подобными
	  проблемами при установке
	  <span class="application"><span class="trademark">SAP</span>(R) 4.6C</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rfcrswboiniindind"></a>11.7.13.11. [RFCRSWBOINI_IND_IND] в ходе <code class="command">R3SETUP</code></h4></div></div></div><p>В ходе установки <span class="application"><span class="trademark">SAP</span>(R) 4.6C</span>,
	  эта ошибка возникла в результате другой ошибки, произошедшей
	  ранее по ходу установки. В данном случае придется просмотреть
	  соответствующие журнальные файлы и устранить исходную
	  проблему.</p><p>Если после просмотра журнальных файлов выявлена только эта
	  ошибка (проверьте <span class="trademark">SAP</span>(R) Notes), можно поменять
	  <code class="literal">STATUS</code> соответствующего шага с <code class="literal">ERROR</code> на <code class="literal">OK</code> (в файле
	  <code class="filename">CENTRDB.R3S</code>) и перезапустить
	  <code class="command">R3SETUP</code>. После установки надо
	  выполнить отчет <code class="literal">RSWBOINS</code> из транзакции SE38.
	  Дополнительную информацию о стадиях <code class="literal">RFCRSWBOINI</code>
	  и <code class="literal">RFCRADDBDIF</code> см. в <span class="trademark">SAP</span>(R) Note 0162266.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rfcraddbdifindind"></a>11.7.13.12. [RFCRADDBDIF_IND_IND] в ходе <code class="command">R3SETUP</code></h4></div></div></div><p>Здесь применяются те же ограничения: проверьте путем просмотра
	  журнальных файлов, что эта ошибка не вызвана какими-то предыдущими
	  проблемами.</p><p>Если подтверждается, что применим документ <span class="trademark">SAP</span>(R) Note 0162266,
	  просто поменяйте <code class="literal">STATUS</code> соответствующего
	  шага с <code class="literal">ERROR</code> на <code class="literal">OK</code> (в
	  файле <code class="filename">CENTRDB.R3S</code>) и перезапустите <code class="command">R3SETUP</code>. После установки надо выполнить
	  отчет <code class="literal">RADDBDIF</code> из транзакции SE38.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sigactionsig31"></a>11.7.13.13. <span class="errorcode">sigaction sig31: File size limit exceeded</span></h4></div></div></div><p>Это сообщение об ошибке выдается в ходе запуска процессов
	  <span class="application"><span class="trademark">SAP</span>(R)</span> <span class="emphasis"><em>disp+work</em></span>.
	  Если <span class="application"><span class="trademark">SAP</span>(R)</span> запускается скриптом
	  <code class="command">startsap</code>, запускаются отдельные подпроцессы,
	  выполняющие грязную работу по запуску всех остальных процессов
	  <span class="application"><span class="trademark">SAP</span>(R)</span>. В результате, сам скрипт
	  не получит уведомления, если что-то пойдет не так.</p><p>Чтобы проверить, нормально ли запустились процессы
	  <span class="application"><span class="trademark">SAP</span>(R)</span>, посмотрите на состояние
	  процессов с помощью команды <code class="command">ps ax |
	  grep <em class="replaceable"><code>SID</code></em></code>, которая выдаст
	  список всех процессов <span class="application"><span class="trademark">Oracle</span>(R)</span> и
	  <span class="application"><span class="trademark">SAP</span>(R)</span>.  Если похоже, что некоторых
	  процессов не хватает или вы не можете подключиться к системе
	  <span class="application"><span class="trademark">SAP</span>(R)</span>, просмотрите соответствующие
	  журнальные файлы, которые можно найти в каталоге
	  <code class="filename">/usr/sap/<em class="replaceable"><code>SID</code></em>/DVEBMGS<em class="replaceable"><code>nr</code></em>/work/</code>.
	  Надо просматривать файлы <code class="filename">dev_ms</code> и
	  <code class="filename">dev_disp</code>.</p><p>Сигнал 31 выдается, если объем памяти, совместно используемой
	  <span class="application"><span class="trademark">Oracle</span>(R)</span> и
	  <span class="application"><span class="trademark">SAP</span>(R)</span>, превосходит заданный в файле
	  конфигурации ядра, и от него можно избавиться, указав большее
	  значение:</p><pre class="programlisting"># большее значение для производственных систем 46C:
options SHMMAXPGS=393216
# меньшее значение, достаточное для 46B:
#options SHMMAXPGS=262144</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="saposcolfails"></a>11.7.13.14. Сбой при запуске <code class="command">saposcol</code></h4></div></div></div><p>Есть ряд проблем с программой <code class="command">saposcol</code>
	  (версии 4.6D). Система <span class="application"><span class="trademark">SAP</span>(R)</span> использует
	  <code class="command">saposcol</code> для сбора данных о производительности
	  системы.  Эта программа не нужна для использования системы
	  <span class="application"><span class="trademark">SAP</span>(R)</span>, так что проблему можно отнести
	  к несерьезным.  Более старые версии (4.6B) работают, но собирают
	  не все данные (многие вызовы просто возвращают 0, например,
	  для использования процессора).</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="linuxemu-oracle.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="linuxemu.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="linuxemu-advanced.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">11.6. Установка <span class="trademark">Oracle</span>(R) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 11.8. Дополнительные сведения</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>