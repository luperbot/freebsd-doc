<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>12.10. Файлы настройки</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="config-tuning.html" title="Глава 12. Настройка и оптимизация" /><link rel="prev" href="configtuning-virtual-hosts.html" title="12.9. Настройка виртуальных серверов" /><link rel="next" href="configtuning-sysctl.html" title="12.11. Настройка с помощью sysctl" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.10. Файлы настройки</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configtuning-virtual-hosts.html">Пред.</a> </td><th width="60%" align="center">Глава 12. Настройка и оптимизация</th><td width="20%" align="right"> <a accesskey="n" href="configtuning-sysctl.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-configfiles"></a>12.10. Файлы настройки</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86850256"></a>12.10.1. Каталог <code class="filename">/etc</code></h3></div></div></div><p>Во FreeBSD определён ряд каталогов, предназначенных для
	хранения конфигурационных файлов.  Это:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="filename">/etc</code></td><td>Основные файлы конфигурации системы.  Тут размещены
		системно-зависимые данные.</td></tr><tr><td><code class="filename">/etc/defaults</code></td><td>Версии системных конфигурационных файлов по
		умолчанию.</td></tr><tr><td><code class="filename">/etc/mail</code></td><td>Дополнительные конфигурационные файлы <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a>,
		другие конфигурационные файлы MTA.
	      </td></tr><tr><td><code class="filename">/etc/ppp</code></td><td>Настройка для user- и kernel-ppp программ.
	      </td></tr><tr><td><code class="filename">/etc/namedb</code></td><td>Основное место расположения данных <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a>.
		Обычно <code class="filename">named.conf</code> и файлы зон
		расположены здесь.</td></tr><tr><td><code class="filename">/usr/local/etc</code></td><td>Конфигурационные файлы установленных приложений.  Могут
		содержать подкаталоги приложений.</td></tr><tr><td><code class="filename">/usr/local/etc/rc.d</code></td><td>Скрипты запуска/остановки установленных приложений.</td></tr><tr><td><code class="filename">/var/db</code></td><td>Автоматически генерируемые системно-специфичные файлы
		баз данных, такие как база данных пакетов, и так
		далее</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86874704"></a>12.10.2. Имена хостов</h3></div></div></div><a id="idp86875344" class="indexterm"></a><a id="idp86875856" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86876368"></a>12.10.2.1. <code class="filename">/etc/resolv.conf</code></h4></div></div></div><a id="idp86877136" class="indexterm"></a><p><code class="filename">/etc/resolv.conf</code> определяет, как
	  резолвер (resolver) FreeBSD получает доступ к Системе Доменных
	  Имён (DNS).</p><p>Основные записи <code class="filename">resolv.conf</code>:
	</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="literal">nameserver</code></td><td>IP адрес сервера имён.  Сервера опрашиваются в порядке
		  описания.  Максимальное количество адресов - три.</td></tr><tr><td><code class="literal">search</code></td><td>Список доменов для поиска с помощью hostname lookup.
		  Обычно определяется доменом, в котором находится
		  компьютер.</td></tr><tr><td><code class="literal">domain</code></td><td>Домен, в котором находится компьютер.</td></tr></tbody></table></div><p>Типичный вид <code class="filename">resolv.conf</code>:</p><pre class="programlisting">search example.com
nameserver 147.11.1.11
nameserver 147.11.100.30</pre><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Опции <code class="literal">search</code> и
	  <code class="literal">domain</code> нельзя использовать
	  совместно.</p></div><p>Если вы используете DHCP, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a> обычно перезаписывает
	  <code class="filename">resolv.conf</code> информацией, полученной от серверов
	   DHCP.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86894160"></a>12.10.2.2. <code class="filename">/etc/hosts</code></h4></div></div></div><a id="idp86894928" class="indexterm"></a><p><code class="filename">/etc/hosts</code> - простая текстовая база
	   данных, напоминающая старый Интернет.  Она работает совместно с
	   DNS и NIS, сопоставляя доменные имена IP адресу.
	   Отдельные компьютеры, соединённые с помощью локальной сети, могут
	   быть записаны тут вместо <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> сервера с целью упрощения.
	   Кроме того, <code class="filename">/etc/hosts</code> используется для
	   записи IP адресов и соответствующих им доменов, избавляя от
	   внешнего трафика, используемого для запросов к DNS серверам.</p><pre class="programlisting"># $FreeBSD$
#
# Host Database
# This file should contain the addresses and aliases
# for local hosts that share this file.
# In the presence of the domain name service or NIS, this file may
# not be consulted at all; see /etc/nsswitch.conf for the resolution order.
#
#
::1                     localhost localhost.my.domain myname.my.domain
127.0.0.1               localhost localhost.my.domain myname.my.domain

#
# Imaginary network.
#10.0.0.2               myname.my.domain myname
#10.0.0.3               myfriend.my.domain myfriend
#
# According to RFC 1918, you can use the following IP networks for
# private nets which will never be connected to the Internet:
#
#       10.0.0.0        -   10.255.255.255
#       172.16.0.0      -   172.31.255.255
#       192.168.0.0     -   192.168.255.255
#
# In case you want to be able to connect to the Internet, you need
# real official assigned numbers.  PLEASE PLEASE PLEASE do not try
# to invent your own network numbers but instead get one from your
# network provider (if any) or from the Internet Registry (ftp to
# rs.internic.net, directory `/templates').
#</pre><p>Формат <code class="filename">/etc/hosts</code>:</p><pre class="programlisting">[IP адрес в Интернете] [имя компьютера] [alias1] [alias2] ...</pre><p>Например:</p><pre class="programlisting">10.0.0.1 myRealHostname.example.com myRealHostname foobar1 foobar2</pre><p>За дополнительной информацией обращайтесь к  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts</span>(5)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86900944"></a>12.10.3. Настройка лог файлов</h3></div></div></div><a id="idp86905808" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86906320"></a>12.10.3.1. <code class="filename">syslog.conf</code></h4></div></div></div><a id="idp86907088" class="indexterm"></a><p><code class="filename">syslog.conf</code> is является файлом конфигурации
	  для <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a>.  В нём указываются, типы сообщений
	  генерируемые <code class="command">syslog</code>, и лог файлы, в которые они
	  записываются.</p><pre class="programlisting"># $FreeBSD$
#
#       Spaces ARE valid field separators in this file. However,
#       other *nix-like systems still insist on using tabs as field
#       separators. If you are sharing this file between systems, you
#       may want to use only tabs as field separators here.
#       Consult the syslog.conf(5) manual page.
*.err;kern.debug;auth.notice;mail.crit          /dev/console
*.notice;kern.debug;lpr.info;mail.crit;news.err /var/log/messages
security.*                                      /var/log/security
mail.info                                       /var/log/maillog
lpr.info                                        /var/log/lpd-errs
cron.*                                          /var/log/cron
*.err                                           root
*.notice;news.err                               root
*.alert                                         root
*.emerg                                         *
# uncomment this to log all writes to /dev/console to /var/log/console.log
#console.info                                   /var/log/console.log
# uncomment this to enable logging of all log messages to /var/log/all.log
#*.*                                            /var/log/all.log
# uncomment this to enable logging to a remote log host named loghost
#*.*                                            @loghost
# uncomment these if you're running inn
# news.crit                                     /var/log/news/news.crit
# news.err                                      /var/log/news/news.err
# news.notice                                   /var/log/news/news.notice
!startslip
*.*                                             /var/log/slip.log
!ppp
*.*                                             /var/log/ppp.log</pre><p>За более полной информацией обратитесь
	  к <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">syslog.conf</span>(5)</span></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86911056"></a>12.10.3.2. <code class="filename">newsyslog.conf</code></h4></div></div></div><a id="idp86911824" class="indexterm"></a><p><code class="filename">newsyslog.conf</code> - конфигурационный файл
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newsyslog</span>(8)</span></a>, программы, обычно контролируемой <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>.
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newsyslog</span>(8)</span></a> определяет, когда лог-файлы нуждаются в
	  архивировании и перегруппировке.
	  <code class="filename">logfile</code> перемещается в
	  <code class="filename">logfile.0</code>, <code class="filename">logfile.0</code>
	  перемещается в <code class="filename">logfile.1</code>, и так далее.
	  Другое именование получится при архивировании с помощью
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gzip</span>(1)</span></a>: <code class="filename">logfile.0.gz</code>,
	  <code class="filename">logfile.1.gz</code>, и т.д.</p><p><code class="filename">newsyslog.conf</code> показывает, какие лог файлы
	  должны быть проинспектированы, сколько их должно быть сохранено, и когда
	  они должны быть пересмотрены.  Лог файлы могут быть перегруппированы
	  и/или заархивированы, когда они либо достигнут определённого
	  размера, либо при достижении определённых даты/времени.</p><pre class="programlisting"># configuration file for newsyslog
# $FreeBSD$
#
# filename          [owner:group]    mode count size when [ZB] [/pid_file] [sig_num]
/var/log/cron                           600  3     100  *     Z
/var/log/amd.log                        644  7     100  *     Z
/var/log/kerberos.log                   644  7     100  *     Z
/var/log/lpd-errs                       644  7     100  *     Z
/var/log/maillog                        644  7     *    @T00  Z
/var/log/sendmail.st                    644  10    *    168   B
/var/log/messages                       644  5     100  *     Z
/var/log/all.log                        600  7     *    @T00  Z
/var/log/slip.log                       600  3     100  *     Z
/var/log/ppp.log                        600  3     100  *     Z
/var/log/security                       600  10    100  *     Z
/var/log/wtmp                           644  3     *    @01T05 B
/var/log/daily.log                      640  7     *    @T00  Z
/var/log/weekly.log                     640  5     1    $W6D0 Z
/var/log/monthly.log                    640  12    *    $M1D0 Z
/var/log/console.log                    640  5     100  *     Z</pre><p>За дополнительной информацией обращайтесь к
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newsyslog</span>(8)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="configtuning-sysctlconf"></a>12.10.4. <code class="filename">sysctl.conf</code></h3></div></div></div><a id="idp86934224" class="indexterm"></a><a id="idp86934736" class="indexterm"></a><p><code class="filename">sysctl.conf</code> очень похож на
	<code class="filename">rc.conf</code>.  Значения устанавливаются в виде
	<code class="literal">variable=value</code>.  Указанные значения устанавливаются
	после перевода системы в многопользовательский режим.  Однако не все
	переменные могут быть установлены в этом режиме.</p><p>Пример <code class="filename">sysctl.conf</code>, настроенного для выключения
	протоколирования фатальных ошибок программ и разрешения
	Linux-программам определять, что они запускаются под FreeBSD:</p><pre class="programlisting">kern.logsigexit=0       # Do not log fatal signal exits (e.g. sig 11)
compat.linux.osname=FreeBSD
compat.linux.osrelease=4.3-STABLE</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configtuning-virtual-hosts.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="configtuning-sysctl.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">12.9. Настройка виртуальных серверов </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 12.11. Настройка с помощью sysctl</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>