<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>11.6. Установка Oracle(R)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="linuxemu.html" title="Глава 11. Двоичная совместимость с Linux" /><link rel="prev" href="linuxemu-matlab.html" title="11.5. Установка MATLAB(R)" /><link rel="next" href="sapr3.html" title="11.7. Установка SAP(R) R/3(R)" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.6. Установка <span class="trademark">Oracle</span>(R)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="linuxemu-matlab.html">Пред.</a> </td><th width="60%" align="center">Глава 11. Двоичная совместимость с Linux</th><td width="20%" align="right"> <a accesskey="n" href="sapr3.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-oracle"></a>11.6. Установка <span class="trademark">Oracle</span>(R)</h2></div><div><span class="authorgroup">Предоставил <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marcel</span> <span class="surname">Moolenaar</span></span>. </span></div></div></div><a id="idp85255888" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85257168"></a>11.6.1. Введение</h3></div></div></div><p>Ниже описан процесс установки <span class="application"><span class="trademark">Oracle</span>(R)
      8.0.5</span> и <span class="application"><span class="trademark">Oracle</span>(R) 8.0.5.1 Enterprise
      Edition</span> для Linux на систему FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85259856"></a>11.6.2. Установка Linux-среды</h3></div></div></div><p>Удостоверьтесь, что порты
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a> и
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/linux_devtools/pkg-descr">devel/linux_devtools</a> установлены
	на вашей системе.  Если у вас возникнут трудности с этими портами,
	воспользуйтесь пакетами или более ранними их версиями из
	Коллекции Портов.</p><p>Если вы хотите использовать интеллектуальный агент (intelligent
	agent), придется также установить пакет TCL от Red Hat:
	<code class="filename">tcl-8.0.3-20.i386.rpm</code>.  Универсальная команда
	для установки пакетов с помощью официального порта
	<span class="application">RPM</span>
	(<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/archivers/rpm/pkg-descr">archivers/rpm</a>):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpm -i --ignoreos --root /compat/linux --dbpath /var/lib/rpm <em class="replaceable"><code>пакет</code></em></code></strong></pre><p>Установка этого <em class="replaceable"><code>пакета</code></em> должна
	пройти без каких-либо ошибок.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85269456"></a>11.6.3. Создание среды <span class="trademark">Oracle</span>(R)</h3></div></div></div><p>Прежде чем вы сможете установить
	<span class="application"><span class="trademark">Oracle</span>(R)</span>, необходимо настроить
	соответствующую среду.  В этом документе описано, что
	<span class="emphasis"><em>специально</em></span> нужно сделать, чтобы запустить
	<span class="application"><span class="trademark">Oracle</span>(R)</span> для Linux под FreeBSD -
	это не пересказ официального руководства по установке
	<span class="application"><span class="trademark">Oracle</span>(R)</span>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-kernel-tuning"></a>11.6.3.1. Настройка ядра</h4></div></div></div><a id="idp85274064" class="indexterm"></a><p>Как описано в руководстве по установке
	  <span class="application"><span class="trademark">Oracle</span>(R)</span>, необходимо
	  установить максимальный размер совместно используемой (shared) памяти.  Не используйте
	  <code class="literal">SHMMAX</code> под FreeBSD.  <code class="literal">SHMMAX</code>
	  просто вычисляется, исходя из <code class="literal">SHMMAXPGS</code> и
	  <code class="literal">PGSIZE</code>.  Следовательно, нужно задавать
	  <code class="literal">SHMMAXPGS</code>.  За информацией о прочих опциях
	  обратитесь к официальному руководству.  Пример настроек:</p><pre class="programlisting">options SHMMAXPGS=10000
options SHMMNI=100
options SHMSEG=10
options SEMMNS=200
options SEMMNI=70
options SEMMSL=61</pre><p>Установите эти опции в зависимости от того, как и для чего
	  вы будете использовать <span class="application"><span class="trademark">Oracle</span>(R)</span>.</p><p>Не забудьте добавить следующие строки в файл конфигурации
	  ядра:</p><pre class="programlisting">options SYSVSHM # совместно используемая память SysV
options SYSVSEM # семафоры SysV
options SYSVMSG # межпроцессное взаимодействие SysV</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-oracle-account"></a>11.6.3.2. Учетная запись <span class="trademark">Oracle</span>(R)</h4></div></div></div><p>Создайте специальную учетную запись
	  <code class="systemitem">oracle</code>, как и любую другую учетную запись.
	  Единственное отличие в том, что для <code class="systemitem">oracle</code>
	  необходимо указать командный интерпретатор Linux.
	  Добавьте <code class="filename">/compat/linux/bin/bash</code> в
	  <code class="filename">/etc/shells</code> и установите для
	  <code class="systemitem">oracle</code> командный интерпретатор
	  <code class="filename">/compat/linux/bin/bash</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-environment"></a>11.6.3.3. Переменные среды</h4></div></div></div><p>Кроме стандартных переменных среды
	  <span class="application"><span class="trademark">Oracle</span>(R)</span>, таких как
	  <code class="envar">ORACLE_HOME</code> и <code class="envar">ORACLE_SID</code>, вам нужно
	  будет установить следующие переменные среды:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Переменная</th><th>Значение</th></tr></thead><tbody><tr><td><code class="envar">LD_LIBRARY_PATH</code></td><td><code class="literal">$ORACLE_HOME/lib</code></td></tr><tr><td><code class="envar">CLASSPATH</code></td><td><code class="literal">$ORACLE_HOME/jdbc/lib/classes111.zip</code></td></tr><tr><td><code class="envar">PATH</code></td><td><code class="literal">/compat/linux/bin
/compat/linux/sbin
/compat/linux/usr/bin
/compat/linux/usr/sbin
/bin
/sbin
/usr/bin
/usr/sbin
/usr/local/bin
$ORACLE_HOME/bin</code></td></tr></tbody></table></div><p>Желательно устанавливать все переменные среды в файле
	  <code class="filename">.profile</code>.  Вот реальный пример:</p><pre class="programlisting">ORACLE_BASE=/oracle; export ORACLE_BASE
ORACLE_HOME=/oracle; export ORACLE_HOME
LD_LIBRARY_PATH=$ORACLE_HOME/lib
export LD_LIBRARY_PATH
ORACLE_SID=ORCL; export ORACLE_SID
ORACLE_TERM=386x; export ORACLE_TERM
CLASSPATH=$ORACLE_HOME/jdbc/lib/classes111.zip
export CLASSPATH
PATH=/compat/linux/bin:/compat/linux/sbin:/compat/linux/usr/bin
PATH=$PATH:/compat/linux/usr/sbin:/bin:/sbin:/usr/bin:/usr/sbin
PATH=$PATH:/usr/local/bin:$ORACLE_HOME/bin
export PATH</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85325776"></a>11.6.4. Установка <span class="trademark">Oracle</span>(R)</h3></div></div></div><p>Из-за небольшой несовместимости с Linux-эмулятором, вам нужно
	будет создать подкаталог <code class="filename">.oracle</code> в каталоге
	<code class="filename">/var/tmp</code> прежде, чем можно будет начать
	установку.  Сделайте ее владельцем пользователя
	<code class="systemitem">oracle</code>.
	Если вы все сделали правильно, то установка
	<span class="application"><span class="trademark">Oracle</span>(R)</span> должна пройти без проблем.  Если
	какие-либо трудности все же возникли, проверьте еще раз все
	конфигурационные файлы и/или целостность дистрибутива
	<span class="application"><span class="trademark">Oracle</span>(R)</span>.  После окончания установки
	<span class="application"><span class="trademark">Oracle</span>(R)</span> примените патчи,
	описанные в следующих двух подразделах.</p><p>Одна из часто возникающих проблем - неправильно
	установленный адаптер TCP-протокола.  В результате, невозможно
	запустить процессы прослушивания TCP.  Вот решение проблемы:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/network/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make -f ins_network.mk ntcontab.o</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ar r libnetwork.a ntcontab.o</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/network/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make -f ins_network.mk install</code></strong></pre><p>Не забудьте повторно запустить <code class="filename">root.sh</code>!</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-patch-root"></a>11.6.4.1. Изменение root.sh</h4></div></div></div><p>При установке <span class="application"><span class="trademark">Oracle</span>(R)</span>
	  необходимо выполнить некоторые действия от имени
	  пользователя <code class="systemitem">root</code>.  Они записаны в
	  скрипте командного интерпретатора <code class="filename">root.sh</code>,
	  который находится в каталоге <code class="filename">orainst</code>.
	  Перед запуском, примените к нему следующий патч (исправляет
	  местонахождение утилиты chown), либо запускайте его в командном
	  интерпретаторе Linux.</p><pre class="programlisting">*** orainst/root.sh.orig Tue Oct 6 21:57:33 1998
--- orainst/root.sh Mon Dec 28 15:58:53 1998
***************
*** 31,37 ****
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/bin/chown
#
# Define variables to be used in this script
--- 31,37 ----
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/usr/sbin/chown
#
# Define variables to be used in this script</pre><p>Если вы устанавливаете <span class="application"><span class="trademark">Oracle</span>(R)</span>
	  не с компакт-диска, можно изменить исходный файл
	  <code class="filename">root.sh</code>.  Он называется
	  <code class="filename">rthd.sh</code> и находится в каталоге
	  <code class="filename">orainst</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-patch-tcl"></a>11.6.4.2. Изменение genclntsh</h4></div></div></div><p>Скрипт <code class="command">genclntsh</code> используется для того,
	  чтобы создать единую совместно используемую клиентскую библиотеку,
	  которая используется для создания демонстраций.  Примените
	  следующий патч, чтобы закомментировать определение переменной
	  <code class="envar">PATH</code>:</p><pre class="programlisting">*** bin/genclntsh.orig Wed Sep 30 07:37:19 1998
--- bin/genclntsh Tue Dec 22 15:36:49 1998
***************
*** 32,38 ****
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst
--- 32,38 ----
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! #PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85357392"></a>11.6.5. Запуск <span class="trademark">Oracle</span>(R)</h3></div></div></div><p>Теперь, если вы все сделали правильно, то можете использовать
	<span class="application"><span class="trademark">Oracle</span>(R)</span> так же, как и в системе
	Linux.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="linuxemu-matlab.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="linuxemu.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="sapr3.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">11.5. Установка <span class="trademark">MATLAB</span>(R) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 11.7. Установка <span class="trademark">SAP</span>(R) <span class="trademark">R/3</span>(R)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>