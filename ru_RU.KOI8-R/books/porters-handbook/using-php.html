<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>6.13. Веб-приложения, Apache и PHP</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD по созданию портов" /><link rel="up" href="special.html" title="Глава 6. Особые соглашения" /><link rel="prev" href="using-java.html" title="6.12. Использование Java" /><link rel="next" href="using-python.html" title="6.14. Использование Python" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.13. Веб-приложения, Apache и PHP</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-java.html">Пред.</a> </td><th width="60%" align="center">Глава 6. Особые соглашения</th><td width="20%" align="right"> <a accesskey="n" href="using-python.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-php"></a>6.13. Веб-приложения, Apache и PHP</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-apache"></a>6.13.1. Apache</h3></div></div></div><div class="table"><a id="idp77872208"></a><div class="table-title">Таблица 6.18. Переменные для портов, использующих Apache</div><div class="table-contents"><table summary="Переменные для портов, использующих Apache" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">USE_APACHE</code></td><td>Порт требует Apache.  Возможные значения:
		<code class="literal">yes</code> (берёт любую версию),
		<code class="literal">22</code>, <code class="literal">24</code>,
		<code class="literal">22-24</code>, <code class="literal">22+</code>
		и так далее.  Версия по умолчанию
		<code class="literal">22</code>.  Более подробная информация
		содержится в файле
		<code class="filename">ports/Mk/bsd.apache.mk</code> и на
		странице <a class="link" href="http://wiki.freebsd.org/Apache/" target="_top">wiki.freebsd.org/Apache/</a>.</td></tr><tr><td><code class="varname">APXS</code></td><td>Полный путь к исполняемому файлу
		<code class="command">apxs</code>.  Может быть переопределен в
		вашем порту.</td></tr><tr><td><code class="varname">HTTPD</code></td><td>Полный путь к исполняемому файлу
		<code class="command">httpd</code>.  Может быть переопределен в
		вашем порту.</td></tr><tr><td><code class="varname">APACHE_VERSION</code></td><td>Версия установленного Apache (переменная только
		для чтения).  Эта переменная доступна только после
		подключения <code class="filename">bsd.port.pre.mk</code>.
		Возможные значения: <code class="literal">22</code>,
		<code class="literal">24</code>.</td></tr><tr><td><code class="varname">APACHEMODDIR</code></td><td>Каталог для модулей Apache.  Значение переменной
		автоматически подставляется в
		<code class="filename">pkg-plist</code>.</td></tr><tr><td><code class="varname">APACHEINCLUDEDIR</code></td><td>Каталог для заголовков Apache.  Значение
		переменной автоматически подставляется в
		<code class="filename">pkg-plist</code>.</td></tr><tr><td><code class="varname">APACHEETCDIR</code></td><td>Каталог для конфигурационных файлов Apache.
		Значение переменной автоматически подставляется в
		<code class="filename">pkg-plist</code>.</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="idp77897680"></a><div class="table-title">Таблица 6.19. Используемые переменные при портировании модулей
	  Apache</div><div class="table-contents"><table summary="Используемые переменные при портировании модулей&#10;&#9;  Apache" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">MODULENAME</code></td><td>Название модуля.  Значением по умолчанию
		является <code class="varname">PORTNAME</code>.  Пример:
		<code class="literal">mod_hello</code></td></tr><tr><td><code class="varname">SHORTMODNAME</code></td><td>Краткое название модуля.  Наследуется
		автоматически от <code class="varname">MODULENAME</code>, но
		может быть переопределено.  Пример:
		<code class="literal">hello</code></td></tr><tr><td><code class="varname">AP_FAST_BUILD</code></td><td>Использовать <code class="command">apxs</code> для
		компиляции и установки модуля.</td></tr><tr><td><code class="varname">AP_GENPLIST</code></td><td>Также автоматически создает
		<code class="filename">pkg-plist</code>.</td></tr><tr><td><code class="varname">AP_INC</code></td><td>Добавляет каталог к пути поиска заголовков
		во время компиляции.</td></tr><tr><td><code class="varname">AP_LIB</code></td><td>Добавляет каталог к пути поиска библиотек во
		время компиляции.</td></tr><tr><td><code class="varname">AP_EXTRAS</code></td><td>Дополнительные флаги, передаваемые
		<code class="command">apxs</code>.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="web-apps"></a>6.13.2. Веб-приложения</h3></div></div></div><p>Веб-приложения следует устанавливать в
	<code class="filename">PREFIX/www/appname</code>.  Для вашего удобства
	этот путь одинаково доступен в <code class="filename">Makefile</code>
	и <code class="filename">pkg-plist</code> как переменная
	<code class="varname">WWWDIR</code>, а путь относительно
	<code class="varname">PREFIX</code> доступен в
	<code class="filename">Makefile</code> как
	<code class="varname">WWWDIR_REL</code>.</p><p>Пользователь и группа процесса веб-сервера доступны как
	<code class="varname">WWWOWN</code> и <code class="varname">WWWGRP</code>, в
	случае если вам нужно изменить владельца для некоторых
	файлов.  Значением по умолчанию и для владельца, и для группы
	является <code class="literal">www</code>.  Если вы хотите использовать
	в вашем порте другие значения, воспользуйтесь для этого
	нотацией <code class="literal">WWWOWN?= myuser</code>, чтобы позволить
	пользователю легко переопределить их.</p><p>Не добавляйте зависимость от Apache, если веб-приложение
	явным образом не нуждается в Apache.  Учитывайте, что
	пользователи могут пожелать запустить ваше веб-приложение на
	другом веб-сервере помимо Apache.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="php-variables"></a>6.13.3. PHP</h3></div></div></div><div class="table"><a id="idp77918672"></a><div class="table-title">Таблица 6.20. Переменные для портов, использующих PHP</div><div class="table-contents"><table summary="Переменные для портов, использующих PHP" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">USE_PHP</code></td><td>Порт требует PHP.  Значение
		<code class="literal">yes</code> добавляет зависимость от PHP.
		Вместо этого может быть указан перечень требуемых
		расширений PHP.  Пример:
		<code class="literal">pcre xml gettext</code></td></tr><tr><td><code class="varname">DEFAULT_PHP_VER</code></td><td>Выбирает старший номер версии, с которым будет
		установлен PHP как зависимость в случае, когда PHP
		еще не установлен.  По умолчанию
		<code class="literal">5</code>.  Возможные значения:
		<code class="literal">4</code>, <code class="literal">5</code></td></tr><tr><td><code class="varname">IGNORE_WITH_PHP</code></td><td>Порт не работает с PHP данной версии.  Возможные
		значения: <code class="literal">4</code>,
		<code class="literal">5</code></td></tr><tr><td><code class="varname">USE_PHPIZE</code></td><td>Порт будет построен как расширение PHP.</td></tr><tr><td><code class="varname">USE_PHPEXT</code></td><td>Порт будет считаться расширением PHP, включая
		установку и регистрацию в реестре расширений.</td></tr><tr><td><code class="varname">USE_PHP_BUILD</code></td><td>Установить PHP как зависимость времени
		построения.</td></tr><tr><td><code class="varname">WANT_PHP_CLI</code></td><td>Хочет CLI (командная строка) версию PHP.</td></tr><tr><td><code class="varname">WANT_PHP_CGI</code></td><td>Хочет CGI версию PHP.</td></tr><tr><td><code class="varname">WANT_PHP_MOD</code></td><td>Хочет PHP как модуль Apache.</td></tr><tr><td><code class="varname">WANT_PHP_SCR</code></td><td>Хочет CLI или CGI версию PHP.</td></tr><tr><td><code class="varname">WANT_PHP_WEB</code></td><td>Хочет модуль Apache или CGI версию PHP.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77945424"></a>6.13.4. Модули PEAR</h3></div></div></div><p>Портирование модулей PEAR является очень простым
	процессом.</p><p>Используйте переменные <code class="varname">FILES</code>,
	<code class="varname">TESTS</code>, <code class="varname">DATA</code>,
	<code class="varname">SQLS</code>, <code class="varname">SCRIPTFILES</code>,
	<code class="varname">DOCS</code> and <code class="varname">EXAMPLES</code> для
	перечисления файлов, которые вы хотите установить.  Все
	перечисленные файлы будут автоматически установлены в
	подходящие места и добавлены в
	<code class="filename">pkg-plist</code>.</p><p>Подключите
	<code class="filename">${PORTSDIR}/devel/pear/bsd.pear.mk</code>
	на последней строке <code class="filename">Makefile</code>.</p><div class="example"><a id="pear-makefile"></a><div class="example-title">Пример 6.7. Пример Makefile для классов PEAR</div><div class="example-contents"><pre class="programlisting">PORTNAME=	Date
PORTVERSION=	1.4.3
CATEGORIES=	devel www pear

MAINTAINER=	example@domain.com
COMMENT=	PEAR Date and Time Zone Classes

BUILD_DEPENDS=	${PEARDIR}/PEAR.php:${PORTSDIR}/devel/pear-PEAR
RUN_DEPENDS:=	${BUILD_DEPENDS}

FILES=		Date.php Date/Calc.php Date/Human.php Date/Span.php     \
		Date/TimeZone.php
TESTS=		test_calc.php test_date_methods_span.php testunit.php   \
		testunit_date.php testunit_date_span.php wknotest.txt   \
		bug674.php bug727_1.php bug727_2.php bug727_3.php       \
		bug727_4.php bug967.php weeksinmonth_4_monday.txt       \
		weeksinmonth_4_sunday.txt weeksinmonth_rdm_monday.txt   \
		weeksinmonth_rdm_sunday.txt
DOCS=		TODO
_DOCSDIR=	.

.include &lt;bsd.port.pre.mk&gt;
.include "${PORTSDIR}/devel/pear/bsd.pear.mk"
.include &lt;bsd.port.post.mk&gt;</pre></div></div><br class="example-break" /></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-java.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="using-python.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">6.12. Использование Java </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 6.14. Использование Python</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>