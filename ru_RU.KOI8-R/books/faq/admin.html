<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>Глава 10. Системное администрирование</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Часто задаваемые вопросы по FreeBSD 8.X, 9.X и 10.X" /><link rel="up" href="index.html" title="Часто задаваемые вопросы по FreeBSD 8.X, 9.X и 10.X" /><link rel="prev" href="all-about-zfs.html" title="Глава 9. ZFS" /><link rel="next" href="x.html" title="Глава 11. X Window System и виртуальные консоли" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Глава 10. Системное администрирование</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="all-about-zfs.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="x.html">След.</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="admin"></a>Глава 10. Системное администрирование</h1></div></div></div><div class="qandaset"><a id="idp76540752"></a><dl><dt>10.1. <a href="admin.html#idp76541008">Где расположены файлы конфигурации системы?</a></dt><dt>10.2. <a href="admin.html#idp76554576">Как проще всего добавить пользователя?</a></dt><dt>10.3. <a href="admin.html#idp76564432">Почему после редактирования моего файла
	    crontab я получаю сообщения вида
	    root: not found?</a></dt><dt>10.4. <a href="admin.html#idp76569808">Команда su выдает ошибку
	    you are not in the correct group to su
	      root, когда я пытаюсь сменить привилегии на
	    root.</a></dt><dt>10.5. <a href="admin.html#idp76583504">Я сделал ошибку в файле rc.conf или в
	    каком-то другом файле начальной загрузки, и теперь не могу его
	    отредактировать из-за того, что файловая система находится в
	    режиме только для чтения.  Что мне делать?</a></dt><dt>10.6. <a href="admin.html#idp76596816">У меня проблемы с установкой принтера.</a></dt><dt>10.7. <a href="admin.html#idp76599376">Раскладка клавиатуры неверна.</a></dt><dt>10.8. <a href="admin.html#idp76602576">Почему не получается заставить работать дисковые квоты?</a></dt><dt>10.9. <a href="admin.html#idp76632272">Поддерживает ли FreeBSD вызовы IPC из System V?</a></dt><dt>10.10. <a href="admin.html#idp76640848">Какое другое программное обеспечение для почтового
	    сервера можно использовать вместо
	    Sendmail?</a></dt><dt>10.11. <a href="admin.html#idp76645072">Я забыл пароль пользователя root!  Что
	    делать?</a></dt><dt>10.12. <a href="admin.html#idp76665424">Как запретить перезагрузку по нажатию Control+Alt+Delete?</a></dt><dt>10.13. <a href="admin.html#idp76678224">Как преобразовать текстовые файлы DOS в формат UNIX(R)?</a></dt><dt>10.14. <a href="admin.html#idp76692176">Как перечитать содержимое /etc/rc.conf
	    и перестартовать /etc/rc без перезагрузки
	    системы?</a></dt><dt>10.15. <a href="admin.html#idp76697424">Я пытался обновить мою систему до последней
	    -STABLE, а получил
	    -BETAx,
	    -RC или
	    -PRERELEASE!  Что происходит?</a></dt><dt>10.16. <a href="admin.html#idp76710096">Я попытался установить новое ядро, однако утилита
	    chflags(1) не сработала.  Как это обойти?</a></dt><dt>10.17. <a href="admin.html#idp76722000">Не получается изменить системное время больше чем на одну
	    секунду!  Как это обойти?</a></dt><dt>10.18. <a href="admin.html#idp76729040">В rpc.statd; есть ошибка работы с памятью!
	    Он использует 256 Мбайт оперативной памяти!</a></dt><dt>10.19. <a href="admin.html#idp76740048">Почему я не могу снять с файла флаг schg?</a></dt><dt>10.20. <a href="admin.html#idp76748368">Что такое vnlru?</a></dt><dt>10.21. <a href="admin.html#idp76751440">Что означают различные состояния памяти, показываемые утилитой
	    top?</a></dt><dt>10.22. <a href="admin.html#idp76761040">Сколько свободной памяти доступно?</a></dt><dt>10.23. <a href="admin.html#idp76765008">Что такое /var/empty?</a></dt><dt>10.24. <a href="admin.html#idp76769872">Я поменял /etc/newsyslog.conf.
	    Как проверить правильность изменений?</a></dt><dt>10.25. <a href="admin.html#idp76778192">Как поправить часовой пояс?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp76541008"></a><a id="startup-config-files"></a><p><strong>10.1.</strong></p></td><td align="left" valign="top"><p>Где расположены файлы конфигурации системы?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Основным конфигурационным файлом является
	    <code class="filename">/etc/defaults/rc.conf</code>, который описан
	    в <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>).  Этот файл подключают системные
	    скрипты запуска, такие как <code class="filename">/etc/rc</code> и
	    <code class="filename">/etc/rc.d</code>, которые описаны в
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a>.  <span class="emphasis"><em>Не редактируйте этот
	      файл!</em></span>  Вместо изменения параметра в
	    <code class="filename">/etc/defaults/rc.conf</code> скопируйте
	    эту строку в <code class="filename">/etc/rc.conf</code> и поменяйте
	    значение там.</p><p>Пример запуска <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a>, поставляемого с системой
	    сервера DNS:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 'named_enable="YES"' &gt;&gt; /etc/rc.conf</code></strong></pre><p>Чтобы запустить местные сервисы, поместите скрипты в каталог
	    <code class="filename">/usr/local/etc/rc.d</code>.
	    У этих скриптов
	    должен быть выставлен бит выполнимости, по умолчанию
	    используются права доступа <code class="literal">555</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76554576"></a><a id="adding-users"></a><p><strong>10.2.</strong></p></td><td align="left" valign="top"><p>Как проще всего добавить пользователя?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Используйте команду <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> или <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> в случае
	    выполнения более сложных операций.</p><p>Чтобы удалить пользователя, используйте команду
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rmuser</span>(8)</span></a> или, если это будет необходимо, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76564432"></a><a id="root-not-found-cron-errors"></a><p><strong>10.3.</strong></p></td><td align="left" valign="top"><p>Почему после редактирования моего файла
	    <code class="filename">crontab</code> я получаю сообщения вида
	    <span class="errorname">root: not found</span>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Обычно это случается при редактировании системного
	    файла crontab.</p><p>Это неправильный подход, потому что системный crontab
	    имеет формат, отличный от пользовательских crontab.
	    Системный crontab имеет дополнительное поле, указывающее,
	    под каким пользователем запускать команду.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>
	    полагает, что имя пользователя является первым словом в
	    команде на выполнение.  Поскольку такой команды не
	    существует, отображается это сообщение об ошибке.</p><p>Чтобы удалить лишний неправильный crontab:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>crontab -r</code></strong></pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76569808"></a><a id="su-wheel-group"></a><p><strong>10.4.</strong></p></td><td align="left" valign="top"><p>Команда <code class="command">su</code> выдает ошибку
	    <span class="errorname">you are not in the correct group to su
	      root</span>, когда я пытаюсь сменить привилегии на
	    <code class="systemitem">root</code>.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Это особенность работы системы защиты.  Для того,
	    чтобы сменить пользовательский идентификатор с помощью
	    <code class="command">su</code> на пользователя <code class="systemitem">root</code> или любого другого
	    с привилегиями суперпользователя, учётная запись должна
	    являться членом группы <code class="systemitem">wheel</code>.  Если бы этого не
	    было, то любой, имеющий доступ к системе и узнавший пароль
	    пользователя <code class="systemitem">root</code>, смог бы получить в
	    системе уровень доступа суперпользователя.</p><p>Чтобы разрешить кому-либо менять привилегии на
	    <code class="systemitem">root</code>, включите
	    его в группу <code class="systemitem">wheel</code> с помощью
	    <code class="command">pw</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupmod wheel -m lisa</code></strong></pre><p>В примере выше пользователь <code class="systemitem">lisa</code> будет добавлен в группу
	    <code class="systemitem">wheel</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76583504"></a><a id="rcconf-readonly"></a><p><strong>10.5.</strong></p></td><td align="left" valign="top"><p>Я сделал ошибку в файле <code class="filename">rc.conf</code> или в
	    каком-то другом файле начальной загрузки, и теперь не могу его
	    отредактировать из-за того, что файловая система находится в
	    режиме только для чтения.  Что мне делать?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Перезапустите систему, используя в приглашении
	    загрузчика команду <strong class="userinput"><code>boot -s</code></strong> для
	    входа в однопользовательский режим.  При получении
	    приглашения на ввод полного пути до командного процессора
	    нажмите <code class="literal">Enter</code>, а затем выполните
	    команду <code class="command">mount -urw /</code> для повторного
	    монтирования корневой файловой системы в режиме
	    чтения/записи.  Вам может также потребоваться выполнить
	    команду <code class="command">mount -a -t ufs</code> для
	    монтирования файловой системы, в которой расположен ваш
	    любимый текстовый редактор.  Если редактор расположен на
	    сетевой файловой системе, либо выполните сетевые настройки
	    вручную до монтирования сетевой файловой системы, либо
	    воспользоваться редактором, находящимся в локальной
	    файловой системе, таким, как <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ed</span>(1)</span></a>.</p><p>Чтобы использовать полноэкранный редактор, такой как
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a> или <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=emacs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">emacs</span>(1)</span></a>, выполните команду
	    <code class="command">export TERM=xterm</code> во FreeBSD 9.0+ или
	    <code class="command">export TERM=cons25</code> во FreeBSD 8.X, чтобы
	    такие редакторы смогли корректно взять данные из базы
	    данных <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=termcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">termcap</span>(5)</span></a>.</p><p>После выполнения этих шагов отредактируйте файл
	    <code class="filename">/etc/rc.conf</code> для исправления ошибки.
	    Сообщение об ошибке, выводимое сразу же после сообщений
	    при загрузке ядра, должно указать на номер строки в файле,
	    которая содержит ошибку.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76596816"></a><a id="printer-setup"></a><p><strong>10.6.</strong></p></td><td align="left" valign="top"><p>У меня проблемы с установкой принтера.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Обратитесь к соответствующему <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/printing.html" target="_top">разделу</a>
	    Руководства, посвящённому печати, за советами по
	    разрешению проблем.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76599376"></a><a id="keyboard-mappings"></a><p><strong>10.7.</strong></p></td><td align="left" valign="top"><p>Раскладка клавиатуры неверна.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Обратитесь к разделу Руководства, посвящённому
	    <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/using-localization.html" target="_top">
	    использованию локализации</a>, а именно к части, описывающей
	    <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/using-localization.html#setting-console" target="_top">
	    настройку консоли</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76602576"></a><a id="user-quotas"></a><p><strong>10.8.</strong></p></td><td align="left" valign="top"><p>Почему не получается заставить работать дисковые квоты?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Возможно, что ядро не сконфигурировано должным
	        образом для работы с квотами.  В этом случае добавьте
	        следующую строчку в конфигурационный файл ядра и
		пересоберите ядро:</p><pre class="programlisting">options QUOTA</pre><p>Прочтите <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/quotas.html" target="_top">главу
		руководства по квотам</a> для полной
		информации.</p></li><li class="listitem"><p>Не включайте квотирование на разделе
		<code class="filename">/</code>.</p></li><li class="listitem"><p>Помещайте файл с квотами в ту файловую систему,
		которую он обслуживает:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Файловая система</th><th>Файл квот</th></tr></thead><tbody><tr><td><code class="filename">/usr</code></td><td><code class="filename">/usr/admin/quotas</code></td></tr><tr><td><code class="filename">/home</code></td><td><code class="filename">/home/admin/quotas</code></td></tr><tr><td>...</td><td>...</td></tr></tbody></table></div></li></ol></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76632272"></a><a id="sysv-ipc"></a><p><strong>10.9.</strong></p></td><td align="left" valign="top"><p>Поддерживает ли FreeBSD вызовы IPC из System V?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Да, во FreeBSD в ядро <code class="filename">GENERIC</code>
	    включена поддержка IPC в стиле System V, в том числе
	    совместно используемой памяти, сообщений и семафоров.
	    В вашем собственном ядре поддержка может быть включена
	    посредством загрузки модулей ядра
	    <code class="filename">sysvshm.ko</code>,
	    <code class="filename">sysvsem.ko</code> и
	    <code class="filename">sysvmsg.ko</code> или добавлением в
	    конфигурационный файл ядра следующих строк:</p><pre class="programlisting">options    SYSVSHM	  # enable shared memory
options    SYSVSEM	  # enable for semaphores
options    SYSVMSG	  # enable for messaging</pre><p>Перекомпилируйте и переустановите ядро.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76640848"></a><a id="sendmail-alternative"></a><p><strong>10.10.</strong></p></td><td align="left" valign="top"><p>Какое другое программное обеспечение для почтового
	    сервера можно использовать вместо
	    <span class="application">Sendmail</span>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Сервер <a class="link" href="http://www.sendmail.org/" target="_top"><span class="application">Sendmail</span></a>
	    является программным обеспечением для работы почтового
	    сервера во FreeBSD, используемым по умолчанию, но его можно
	    заменить другим MTA, установленным из Коллекции Портов.
	    В дереве портов имеется <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/exim/pkg-descr">mail/exim</a>,
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/postfix/pkg-descr">mail/postfix</a> и
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/qmail/pkg-descr">mail/qmail</a>.  Проверьте архивы списков
	    рассылки на предмет обсуждения достоинств и недостатков
	    имеющихся MTA.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76645072"></a><a id="forgot-root-pw"></a><p><strong>10.11.</strong></p></td><td align="left" valign="top"><p>Я забыл пароль пользователя <code class="systemitem">root</code>!  Что
	    делать?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Без паники!  Перезапустите систему, наберите
	    <strong class="userinput"><code>boot -s</code></strong> в приглашении
	    <code class="literal">Boot:</code> для входа в однопользовательский
	    режим.  На вопрос об используемой оболочке нажмите
	    <span class="keycap"><strong>Enter</strong></span> для получения приглашения
	    <code class="prompt">#</code>.  Введите <code class="command">mount -urw /</code>,
	    чтобы перемонтировать корневую файловую систему в режиме
	    чтения/записи, после чего выполните команду <code class="command">mount
	      -a</code> для монтирования всех файловых систем.
	    Запустите команду <code class="command">passwd root</code>, чтобы
	    сменить пароль пользователя <code class="systemitem">root</code>, а затем <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=exit&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">exit</span>(1)</span></a>
	    для продолжения процесса загрузки.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Если при входе в однопользовательский режим
	      предлагается ввести пароль пользователя <code class="systemitem">root</code>, это означает, что
	      консоль была помечена как <code class="literal">insecure</code> в
	      <code class="filename">/etc/ttys</code>.  В этом случае
	      потребуется загрузиться с установочного диска FreeBSD,
	      выбрать <span class="guimenuitem">Live CD</span> или
	      <span class="guimenuitem">Shell</span> в начале процесса
	      установки и выполнить указанные выше команды.  В этом
	      случае смонтируйте нужный раздел и выполните туда
	      chroot.  Например, замените команду <code class="command">mount
	        -urw /</code> на <code class="command">mount /dev/ada0p1 /mnt;
	        chroot /mnt</code> для системы, расположенной на
	      <em class="replaceable"><code>ada0p1</code></em>.</p></div><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Если корневой раздел не получается смонтировать в
	      однопользовательском режиме, то возможно, что разделы
	      являются зашифрованными, и смонтировать их без ключей
	      доступа не представляется возможным.  За дополнительной
	      информацией обращайтесь к разделу <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/disks-encrypting.html" target="_top">Руководства</a>,
	      посвященному шифрованию дисков во FreeBSD.</p></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76665424"></a><a id="CAD-reboot"></a><p><strong>10.12.</strong></p></td><td align="left" valign="top"><p>Как запретить перезагрузку по нажатию <span class="keycap"><strong>Control</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Delete</strong></span>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>При использовании стандартного драйвера консоли
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syscons&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">syscons</span>(4)</span></a> перегенерируйте и установите новое ядро
	    с таким параметром в конфигурационном файле:</p><pre class="programlisting">options SC_DISABLE_REBOOT</pre><p>Этого также можно достичь установкой следующего <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>,
	    что не требует перезагрузки или пересборки ядра:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl hw.syscons.kbd_reboot=0</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Оба этих метода являются взаимоисключающими.  Данный
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> не существует, если ядро скомпилировано
	      с параметром <code class="literal">SC_DISABLE_REBOOT</code>.</p></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76678224"></a><a id="dos-to-unix-txt"></a><p><strong>10.13.</strong></p></td><td align="left" valign="top"><p>Как преобразовать текстовые файлы DOS в формат <span class="trademark">UNIX</span>(R)?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Воспользуйтесь следующей командой <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=perl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">perl</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>perl -i.bak -npe 's/\r\n/\n/g' file(s)</code></strong></pre><p>где <em class="replaceable"><code>file(s)</code></em> - это один или
	    несколько файлов для обработки.
	    Преобразование делается в том же самом файле, оригинальные файлы
	    сохраняются с расширением <code class="filename">.bak</code>.</p><p>Либо используйте <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tr</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>tr -d '\r' &lt; dos-text-file &gt; unix-file</code></strong></pre><p>где <em class="replaceable"><code>dos-text-file</code></em> - это имя файла,
	    содержащего текст DOS, а в файл
	    <em class="replaceable"><code>unix-file</code></em> будет помещён уже
	    преобразованный текст.  Этот способ может работать гораздо
	    быстрее, чем при использовании <code class="command">perl</code>.</p><p>Еще один способ отформатировать тестовые файлы DOS
	    состоит в использовании <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/converters/dosunix/pkg-descr">converters/dosunix</a> из Коллекции
	    Портов.  Для получения дополнительной информации ознакомьтесь
	    с документацией порта.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76692176"></a><a id="reread-rc"></a><p><strong>10.14.</strong></p></td><td align="left" valign="top"><p>Как перечитать содержимое <code class="filename">/etc/rc.conf</code>
	    и перестартовать <code class="filename">/etc/rc</code> без перезагрузки
	    системы?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Перейдите в однопользовательский режим, а затем возвратитесь обратно
	    в многопользовательский.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown now</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>return</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong></pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76697424"></a><a id="release-candidate"></a><p><strong>10.15.</strong></p></td><td align="left" valign="top"><p>Я пытался обновить мою систему до последней
	    <span class="emphasis"><em>-STABLE</em></span>, а получил
	    <span class="emphasis"><em>-BETA<em class="replaceable"><code>x</code></em></em></span>,
	    <span class="emphasis"><em>-RC</em></span> или
	    <span class="emphasis"><em>-PRERELEASE</em></span>!  Что происходит?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Краткий ответ: это же просто название.
	    <span class="emphasis"><em>RC</em></span> означает
	    <span class="quote"><<<span class="quote">Release Candidate</span>>></span>.  Это значит, что вскоре
	    произойдет выход релиза.  Во FreeBSD появление
	    <span class="emphasis"><em>-PRERELEASE</em></span>, как
	    правило, равнозначно прекращению внесения изменений в код системы
	    перед появлением релиза.  (Для некоторых релизом метка
	    <span class="emphasis"><em>-BETA</em></span> использовалась точно так же, как и
	    <span class="emphasis"><em>-PRERELEASE</em></span>.)</p><p>Подробный ответ: во FreeBSD релизы выпускаются из одного из
	    двух мест.  Крупные релизы, точка-ноль, такие, как
	    9.0-RELEASE и 10.0-RELEASE, ответвляются от основного потока
	    разработки, более известного как <a class="link" href="introduction.html#current" title="1.8.">-CURRENT</a>.  Мелкие релизы, такие, как
	    6.3-RELEASE или 5.2-RELEASE, являлись снэпшотами активной ветки
	    <a class="link" href="introduction.html#stable" title="1.9.">-STABLE</a>.  Начиная с 4.3-RELEASE,
	    каждый релиз также имеет свою ветвь, которой могут следовать те,
	    кому необходим сверхконсервативный метод обновления (как правило,
	    внесение только тех исправлений, которые касаются вопросов
	    обеспечения безопасности).</p><p>Когда делается релиз, то ветвь, из которой он выпускается,
	    подвергается некоторой подготовке.  Частью этого процесса является
	    замораживание кода.  Когда инициируется замораживание кода, то имя
	    ветки изменяется для того, чтобы отразить факт близости релиза.
	    Например, если ветка называлась 6.2-STABLE, то её имя будет
	    изменено на 6.3-PRERELEASE, чтобы обозначить момент прекращения
	    внесения изменений в код системы и период дополнительного
	    тестирования перед выходом релиза.  В это время исправления ошибок
	    могут быть внесены в код системы для того, чтобы быть включенными в
	    релиз.  Когда исходный код подготовлен к выпуску релиза, имя будет
	    изменено на 6.3-RC для обозначения того, что релиз будет сделан,
	    скорее всего, именно из этого кода.  Когда код находится на этапе
	    RC, в нём могут исправляться только самые критичные ошибки.  Как
	    только релиз (в нашем примере 6.3-RELEASE) и ветка релиза будут
	    созданы, ветвь будет переименована в 6.3-STABLE.</p><p>Для получения дополнительной информации о номерах версий и
	    различных ветках Subversion обратитесь к статье о <a class="link" href="../../../../doc/ru_RU.KOI8-R/articles/releng/article.html" target="_top">выпуске
	    релизов</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76710096"></a><a id="kernel-chflag-failure"></a><p><strong>10.16.</strong></p></td><td align="left" valign="top"><p>Я попытался установить новое ядро, однако утилита
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a> не сработала.  Как это обойти?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Краткий ответ: Режим безопасности имеет значение
	    больше нуля.  Для установки ядра перезагрузите машину и
	    войдите в однопользовательский режим.</p><p>Подробный ответ: FreeBSD запрещает менять системные
	    флаги при работе на уровнях безопасности, превышающих 0.
	    Чтобы проверить текущий уровень безопасности:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl kern.securelevel</code></strong></pre><p>Уровень безопасности нельзя понизить в
	    многопользовательском режиме, поэтому для установки ядра
	    загрузитесь в однопользовательский режим, или измените
	    уровень безопасности в <code class="filename">/etc/rc.conf</code>,
	    а затем выполните перезагрузку.  Обратитесь к странице
	    Справочника по <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> за подробной информацией о
	    <code class="literal">securelevel</code> и посмотрите
	    <code class="filename">/etc/defaults/rc.conf</code> и справочную
	    страницу по <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> для выяснения подробностей о
	    файле <code class="filename">rc.conf</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76722000"></a><a id="kernel-securelevel-time"></a><p><strong>10.17.</strong></p></td><td align="left" valign="top"><p>Не получается изменить системное время больше чем на одну
	    секунду!  Как это обойти?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Краткий ответ: Система работает на уровне безопасности
	    со значением выше 1.  Для смены даты перезагрузите машину
	    и войдите в однопользовательский режим.</p><p>Подробный ответ: FreeBSD запрещает менять системное время
	    больше чем на одну секунду на уровне безопасности выше 1.
	    Чтобы определить уровень безопасности:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl kern.securelevel</code></strong></pre><p>Уровень безопасности нельзя понизить в
	    многопользовательском режиме.  Для изменения даты
	    перезагрузите систему в однопользовательский режим,
	    либо измените уровень безопасности в
	    <code class="filename">/etc/rc.conf</code>, а затем выполните
	    перезагрузку.  Обратитесь к странице Справочника по
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> за подробной информацией о
	    <code class="literal">securelevel</code> и посмотрите
	    <code class="filename">/etc/defaults/rc.conf</code> и справочную
	    страницу по <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> для выяснения подробностей о
	    файле <code class="filename">rc.conf</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76729040"></a><a id="statd-mem-leak"></a><p><strong>10.18.</strong></p></td><td align="left" valign="top"><p>В <code class="command">rpc.statd</code>; есть ошибка работы с памятью!
	    Он использует 256 Мбайт оперативной памяти!</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Нет, там нет ошибок и он не использует 256 Мбайт памяти.
	    Для удобства <code class="command">rpc.statd</code> отображает неприлично
	    большой кусок памяти в своё адресное пространство.  Здесь нет
	    ничего неправильного с технической точки зрения, это просто
	    сбивает с толку программы вроде <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> и <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a></p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.statd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpc.statd</span>(8)</span></a> отображает свой статусный файл
	    (находящийся на <code class="filename">/var</code>)
	    в свое адресное
	    пространство.  Для того, чтобы постоянно не беспокоиться о будущих
	    переотражениях, когда файл вырастет в размерах, он просто
	    отображает его с огромным размером заранее.  Это просто заметить
	    в исходных текстах, где как вы можете увидеть параметр длина
	    к функции <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mmap&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">mmap</span>(2)</span></a> имеет значение
	    <code class="literal">0x10000000</code>, или одна шестнадцатая адресного
	    пространства для IA32, то есть 256 Мбайт.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76740048"></a><a id="unsetting-schg"></a><p><strong>10.19.</strong></p></td><td align="left" valign="top"><p>Почему я не могу снять с файла флаг <code class="literal">schg</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Система работает с уровнем защиты выше нуля.  Понизьте
	    уровень защиты и попробуйте еще раз.  Для получения более
	    подробной информации обратитесь к <a class="link" href="security.html#securelevel" title="13.2.">разделу <acronym class="acronym">FAQ</acronym>
	      об уровне защиты</a> и
	    справочной странице <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76748368"></a><a id="vnlru"></a><p><strong>10.20.</strong></p></td><td align="left" valign="top"><p>Что такое <code class="literal">vnlru</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><code class="literal">vnlru</code> сбрасывает и освобождает
	    vnode, когда система достигает ограничения по параметру
	    <code class="varname">kern.maxvnodes</code>.  Этот поток ядра в
	    основном работает вхолостую и активируется только при
	    наличии огромного объема ОЗУ и обращении к десяткам тысяч
	    файлов небольшого размера.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76751440"></a><a id="top-memory-states"></a><p><strong>10.21.</strong></p></td><td align="left" valign="top"><p>Что означают различные состояния памяти, показываемые утилитой
	    <code class="command">top</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">Active</code>: по статистике страницы недавно
		использовались.</p></li><li class="listitem"><p><code class="literal">Inactive</code>: по статистике страницы
		 недавно не использовались.</p></li><li class="listitem"><p><code class="literal">Cache</code>: (наиболее часто)
		страницы, которых перемещены из числа неактивных в статус, в
		котором они содержат данные, но которые могут часто сразу же
		использоваться повторно (как с их старым содержимым, так и
		повторно с новым).  Это может быть некоторое непосредственное
		перемещение из состояния <code class="literal">active</code> в состояние
		<code class="literal">cache</code>, если известно, что страница чиста (не
		модифицировалась), но такое
		перемещение определяется политикой, зависящей от выбора
		алгоритма разработчиком VM-системы.</p></li><li class="listitem"><p><code class="literal">Free</code>: страницы, не содержащие данных,
		и которые могут быть использованы при некоторых условиях,
		когда страницы кэша могут не подойти.  Свободные страницы
		могут повторно использоваться в состояниях прерывания или
		процессах.</p></li><li class="listitem"><p><code class="literal">Wired</code>: страницы, зафиксированные в
		памяти, обычно для использования ядром, а также иногда для
		специального использования процессами.</p></li></ul></div><p>Страницы чаще всего записываются на диск (типа синхронизации
	    VM), когда они находятся в неактивном состоянии, однако страницы
	    в активном состоянии также могут сбрасываться.  Это зависит от
	    наличия и возможности отслеживания со стороны ЦП бита
	    'модифицированности', и в некоторых ситуациях это может быть лучше
	    для блока синхронизируемых страниц VM, вне зависимости от их
	    активности.  В большинстве встречающихся ситуаций лучше всего
	    представлять неактивную очередь как очередь сравнительно
	    неиспользуемых страниц, которые могут быть, а могут и не быть в
	    процессе записи на диск.  Кэшируемые страницы уже
	    синхронизированы, не отображаются, но доступны для
	    непосредственного использования процессом со своей старой или новой
	    привязкой.  Свободные страницы доступны на уровне прерывания,
	    однако кэшируемые или свободные страницы могут использоваться в
	    процессе повторно.  Кэшируемые страницы недостаточно заблокированы
	    для того, чтобы быть доступными на уровне прерывания.</p><p>Есть ещё некоторые другие флаги (например, флаг занятости или
	    счётчик занятости), которые могут изменить некоторые описанные
	    правила.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76761040"></a><a id="free-memory-amount"></a><p><strong>10.22.</strong></p></td><td align="left" valign="top"><p>Сколько свободной памяти доступно?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Есть несколько понятий <span class="quote"><<<span class="quote">свободной памяти</span>>></span>.  В
	    одном случае это объём памяти, непосредственно доступной в данный
	    момент без страничной выгрузки чего-либо.  Этот объём равен
	    примерно размеру очереди кэша + размер очереди на высвобождение (с
	    учётом допустимых отклонений, зависящих от настроек системы).  В
	    другом случае <span class="quote"><<<span class="quote">свободная память</span>>></span> обозначает общий
	    объём пространства <acronym class="acronym">VM</acronym>.  Он может сложно
	    вычисляться, но зависит от объёма раздела подкачки и памяти.
	    Другие определения <span class="quote"><<<span class="quote">свободной памяти</span>>></span> также возможны,
	    но они достаточно бесполезны, ведь в любом случае важно сохранять
	    низкий уровень подкачки и избегать исчерпания раздела
	    подкачки.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76765008"></a><a id="var-empty"></a><p><strong>10.23.</strong></p></td><td align="left" valign="top"><p>Что такое <code class="filename">/var/empty</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><code class="filename">/var/empty</code> представляет собой
	    каталог, который используется в программе <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a>
	    при выполнении разделения полномочий.  Каталог
	    <code class="filename">/var/empty</code> пуст, его владельцем
	    является <code class="systemitem">root</code>,
	    и на нём установлен флаг <code class="literal">schg</code>.
	    Этот каталог не должен удаляться.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76769872"></a><a id="newsyslog-expectations"></a><p><strong>10.24.</strong></p></td><td align="left" valign="top"><p>Я поменял <code class="filename">/etc/newsyslog.conf</code>.
	    Как проверить правильность изменений?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Чтобы посмотреть, что будет делать <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newsyslog</span>(8)</span></a>,
	    используйте следующую команду:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>newsyslog -nrvv</code></strong></pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76778192"></a><a id="timezone"></a><p><strong>10.25.</strong></p></td><td align="left" valign="top"><p>Как поправить часовой пояс?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Используйте <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tzsetup&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tzsetup</span>(8)</span></a>.</p></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="all-about-zfs.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="x.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Глава 9. ZFS </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Глава 11. X Window System и виртуальные консоли</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>