<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>Глава 15. Коммуникационные адаптеры</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Часто задаваемые вопросы по FreeBSD 8.X, 9.X и 10.X" /><link rel="up" href="index.html" title="Часто задаваемые вопросы по FreeBSD 8.X, 9.X и 10.X" /><link rel="prev" href="ppp.html" title="Глава 14. PPP" /><link rel="next" href="misc.html" title="Глава 16. Разное" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Глава 15. Коммуникационные адаптеры</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ppp.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="misc.html">След.</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serial"></a>Глава 15. Коммуникационные адаптеры</h1></div></div></div><p>В этом разделе освещены вопросы о работе последовательных
      адаптеров во FreeBSD.  Протокол PPP рассматривается в разделе
      <a class="link" href="networking.html" title="Глава 12. Работа в сети">Работа в сети</a>.</p><div class="qandaset"><a id="idp77613776"></a><dl><dt>15.1. <a href="serial.html#idp77614032">Какие многопортовые последовательные адаптеры поддерживаются во
	    FreeBSD?</a></dt><dt>15.2. <a href="serial.html#idp77619280">Как сделать, чтобы приглашение boot: выводилось на консоль на
	    последовательном порту?</a></dt><dt>15.3. <a href="serial.html#idp77621968">Как узнать, обнаружила ли FreeBSD последовательные порты
	    или внутренние модемы?</a></dt><dt>15.4. <a href="serial.html#idp77627472">Как осуществляется доступ к последовательным портам во
	    FreeBSD?</a></dt><dt>15.5. <a href="serial.html#idp77634000">Как включить поддержку многопортовых последовательных
	    адаптеров?</a></dt><dt>15.6. <a href="serial.html#idp77661520">Можно ли настроить для порта режим работы по умолчанию?</a></dt><dt>15.7. <a href="serial.html#idp77664080">Как сделать вход через модем?</a></dt><dt>15.8. <a href="serial.html#idp77670864">Как подключить терминал к FreeBSD?</a></dt><dt>15.9. <a href="serial.html#idp77673424">Почему не удаётся запустить tip или
	    cu?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp77614032"></a><a id="multiport-serial-support"></a><p><strong>15.1.</strong></p></td><td align="left" valign="top"><p>Какие многопортовые последовательные адаптеры поддерживаются во
	    FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Список таких устройств находится в главе Руководства
	    <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/serial.html" target="_top">Последовательные
	    соединения</a>.</p><p>Большинство многопортовых PCI адаптеров на базе 16550 и их
	    клоны поддерживаются без дополнительных усилий.</p><p>Некоторые безымянные клоны таких адаптеров тоже работают
	    нормально, особенно те, которые заявляют о своей совместимости
	    с AST.</p><p>Прочтите страницы Справочника <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uart&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">uart</span>(4)</span></a> и <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> для получения
	    подробной информации о конфигурировании таких адаптеров.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77619280"></a><a id="serial-console-prompt"></a><p><strong>15.2.</strong></p></td><td align="left" valign="top"><p>Как сделать, чтобы приглашение boot: выводилось на консоль на
	    последовательном порту?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Подробная информация находится в <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/serialconsole-setup.html" target="_top">этом
	    разделе Руководства</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77621968"></a><a id="found-serial"></a><p><strong>15.3.</strong></p></td><td align="left" valign="top"><p>Как узнать, обнаружила ли FreeBSD последовательные порты
	    или внутренние модемы?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>В процессе своей загрузки ядро FreeBSD будет пытаться
	    найти последовательные порты, с поддержкой которых ядро
	    сконфигурировано.  Внимательно просмотрите сообщения
	    загрузки либо выполните такую команду после того,
	    как система запустилась и работает:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>dmesg | grep -E "^sio[0-9]"</code></strong>
sio0: &lt;16550A-compatible COM port&gt; port 0x3f8-0x3ff irq 4 flags 0x10 on acpi0
sio0: type 16550A
sio1: &lt;16550A-compatible COM port&gt; port 0x2f8-0x2ff irq 3 on acpi0
sio1: type 16550A</pre><p>Здесь присутствуют два последовательных порта.  Первый
	    находится на IRQ4, порт ввода/вывода
	    <code class="literal">0x3f8</code>, и построен на микросхеме UART
	    типа 16550A.  Второй использует тот же тип микросхемы, но
	    находится на IRQ3 и использует адрес порта ввода/вывода
	    <code class="literal">0x2f8</code>.  Внутренние модемы выглядят
	    точно также, как последовательные порты, за исключением
	    того, что модем к ним подключен всегда.</p><p>В ядро <code class="filename">GENERIC</code> встроена поддержка
	    двух последовательных портов, с теми же IRQ и адресами
	    портов ввода/вывода, как указано в примере выше.  Если эти
	    настройки не соответствуют системе или имеется больше
	    внутренних модемов или последовательных портов, чем
	    описано в ядре, переконфигурируйте его, следуя инструкциям
	    в разделе <a class="link" href="kernelconfig.html#make-kernel" title="7.1.">о построении
	      ядра</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77627472"></a><a id="access-serial-ports"></a><p><strong>15.4.</strong></p></td><td align="left" valign="top"><p>Как осуществляется доступ к последовательным портам во
	    FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Третий последовательный порт, <code class="filename">sio2</code>
	    или <code class="filename">COM3</code>, обозначается как
	    <code class="filename">/dev/cuad2</code> для устройств, выполняющих
	    исходящие звонки, и <code class="filename">/dev/ttyd2</code> для
	    устройств, принимающих входящие звонки.  Какая разница
	    между этими двумя классами устройств?</p><p>При открытии <code class="filename">/dev/ttydX</code> в
	    блокирующем режиме процесс будет ожидать неактивности
	    соответствующего устройства <code class="filename">cuadX</code>, а
	    затем появления сигнала о наличии несущей.  При открытии
	    устройства <code class="filename">cuadX</code> он проверяет, что
	    последовательный порт не занят устройством
	    <code class="filename">ttydX</code>.  Если порт доступен, он
	    похищает его у устройства <code class="filename">ttydX</code>.
	    Также устройство <code class="filename">cuadX</code> не следит за
	    наличием несущей.  С такой схемой работы и модемом
	    в режиме автоответа удалённые пользователи могут входить
	    в систему, а локальные пользователи через тот же модем
	    могут по прежнему осуществлять исходящие звонки, а система
	    позаботится о возможных конфликтах.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77634000"></a><a id="enable-multiport-serial"></a><p><strong>15.5.</strong></p></td><td align="left" valign="top"><p>Как включить поддержку многопортовых последовательных
	    адаптеров?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Информация о конфигурировании ядра содержится в
	    соответствующем разделе, посвящённом этому вопросу.  Для
	    многопортовых последовательных адаптеров добавьте в файл
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=device.hints&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">device.hints</span>(5)</span></a> по строке <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> на каждый порт.
	    Но IRQ должен быть указан только у одного порта.  Все порты
	    на адаптере должны использовать одно и то же значение IRQ.
	    Для обеспечения согласованности используйте для указания IRQ
	    последний последовательный порт.  Также укажите следующую
	    опцию в файле конфигурации ядра:</p><pre class="programlisting">COM_MULTIPORT</pre><p>В следующем примере указано содержимое
	    <code class="filename">/boot/device.hints</code> для 4-портового
	    последовательного адаптера AST на IRQ 12:</p><pre class="programlisting">hint.sio.4.at="isa"
hint.sio.4.port="0x2a0"
hint.sio.4.flags="0x701"
hint.sio.5.at="isa"
hint.sio.5.port="0x2a8"
hint.sio.5.flags="0x701"
hint.sio.6.at="isa"
hint.sio.6.port="0x2b0"
hint.sio.6.flags="0x701"
hint.sio.7.at="isa"
hint.sio.7.port="0x2b8"
hint.sio.7.flags="0x701"
hint.sio.7.irq="12"</pre><p>Флаги указывают, что управляющий порт имеет младший номер
	    устройства <code class="literal">7</code> (<code class="literal">0x700</code>),
	    и все порты совместно используют один и тот же номер IRQ
	    (<code class="literal">0x001</code>).</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77661520"></a><a id="default-serial-params"></a><p><strong>15.6.</strong></p></td><td align="left" valign="top"><p>Можно ли настроить для порта режим работы по умолчанию?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Смотрите раздел Руководства FreeBSD, посвящённый <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/serial.html#serial-hw-config" target="_top">последовательным
	    соединениям</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77664080"></a><a id="enable-dialup"></a><p><strong>15.7.</strong></p></td><td align="left" valign="top"><p>Как сделать вход через модем?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ознакомьтесь с разделом Руководства FreeBSD, посвящённым
	    <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/dialup.html" target="_top">входящим
	    соединениям</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77670864"></a><a id="dumb-terminal"></a><p><strong>15.8.</strong></p></td><td align="left" valign="top"><p>Как подключить терминал к FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Информация по этому вопросу находится в разделе <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/term.html" target="_top">Терминалы</a>
	    Руководства FreeBSD.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77673424"></a><a id="cannot-tip"></a><p><strong>15.9.</strong></p></td><td align="left" valign="top"><p>Почему не удаётся запустить <code class="command">tip</code> или
	    <code class="command">cu</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Встроенные утилиты <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> и <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a> могут
	    получить доступ к каталогу
	    <code class="filename">/var/spool/lock</code>
	    только из-под пользователя
	    <code class="systemitem">uucp</code> и членов
	    группы <code class="systemitem">dialer</code>.
	    Используйте группу <code class="systemitem">dialer</code> для управления
	    доступом к модему или удалённым системам посредством
	    добавления в неё пользовательских учётных записей.</p><p>Либо же можно разрешить всем запускать
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> и <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 4511 /usr/bin/cu</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 4511 /usr/bin/tip</code></strong></pre></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ppp.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="misc.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Глава 14. PPP </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Глава 16. Разное</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>