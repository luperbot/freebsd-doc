<?xml version="1.0" encoding="iso-8859-1"?>
<article xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:lang="de">
  <info><title xmlns:xlink="http://www.w3.org/1999/xlink">Einführung in NanoBSD</title>
    

    <authorgroup xmlns:xlink="http://www.w3.org/1999/xlink">
      <author xmlns:xlink="http://www.w3.org/1999/xlink"><personname xmlns:xlink="http://www.w3.org/1999/xlink"><firstname xmlns:xlink="http://www.w3.org/1999/xlink">Daniel</firstname><surname xmlns:xlink="http://www.w3.org/1999/xlink">Gerzo</surname></personname></author>
    </authorgroup>

    <pubdate xmlns:xlink="http://www.w3.org/1999/xlink">$FreeBSD$</pubdate>

    <copyright xmlns:xlink="http://www.w3.org/1999/xlink">
      <year xmlns:xlink="http://www.w3.org/1999/xlink">2006</year>
      <holder xmlns:xlink="http://www.w3.org/1999/xlink">The FreeBSD Documentation Project</holder>
    </copyright>

    <legalnotice xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="trademarks" role="trademarks">
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD ist ein eingetragenes
  Warenzeichen der FreeBSD Foundation.</para>
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">Viele Produktbezeichnungen von
  Herstellern und Verkäufern sind Warenzeichen.  Soweit dem
  FreeBSD Project das Warenzeichen bekannt ist, werden die in diesem
  Dokument vorkommenden Bezeichnungen mit dem Symbol
  <quote xmlns:xlink="http://www.w3.org/1999/xlink">&#8482;</quote> oder dem Symbol <quote xmlns:xlink="http://www.w3.org/1999/xlink">®</quote>
  gekennzeichnet.</para>
    </legalnotice>

    <abstract xmlns:xlink="http://www.w3.org/1999/xlink">
      <para xmlns:xlink="http://www.w3.org/1999/xlink">Dieses Dokument stellt Informationen zu den
	<application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> Werkzeugen bereit, die dazu
	verwendet werden können ein FreeBSD Abbild für eingebettete
	Systeme zu erstellen, welche auf eine Compact Flash Karte
	passen (oder andere Massenspeicher).</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink"><emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Übersetzt von Björn
	  Heidotting</emphasis>.</para>
    </abstract>
  </info>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="intro">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Einführung in NanoBSD</title>

    <indexterm xmlns:xlink="http://www.w3.org/1999/xlink"><primary xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</primary></indexterm>

    <para xmlns:xlink="http://www.w3.org/1999/xlink"><application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> ist ein Werkzeug welches
      derzeit von Poul-Henning Kamp entwickelt wird.  Es erstellt ein FreeBSD
      Systemabbild für eingebettete Systeme, die auf eine Compact
      Flash Karte passen (oder andere Massenspeicher).</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Es kann dazu benutzt werden um spezialisierte
      Installationsabbilder zu bauen, entworfen für die einfache
      Installation und Wartung von Systemen die als "Computer
      Appliances" bekannt sind.  Computer Appliances haben ihre Hard-
      und Software fest verbaut, dass bedeutet alle Anwendungen sind
      vorinstalliert.  Die Appliance wird an ein bestehendes Netzwerk
      angeschlossen und kann mit der Arbeit (fast) sofort
      beginnen.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Zu den Eigenschaften von <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application>
      gehören:</para>

    <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
      <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Ports und Pakete funktionieren wie in FreeBSD &#8212; Jede
	  einzelne Anwendung kann auf dem
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> Abbild installiert und
	  benutzt werden, auf die gleiche Weise wie Sie es aus FreeBSD
	  gewohnt sind.</para>
      </listitem>

      <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Keine fehlende Funktionalität &#8212; Wenn es möglich
	  ist, etwas mit FreeBSD zu tun, ist es auch möglich, die
	  gleiche Sache mit <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> zu tun,
	  es sei denn, eine oder mehrere Funktionen wurden
	  ausdrücklich vor dem Bau des
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> Abbilds entfernt.</para>
      </listitem>

      <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Zur Laufzeit ist alles read-only  &#8212; Es ist sicher
	  den Stromstecker zu ziehen.  Es besteht dann keine
	  Notwendigkeit, einen <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">fsck</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> nach einem nicht
	  ordnungsgemäßem Herunterfahren des Systems
	  auszuführen.</para>
      </listitem>

      <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Einfach zu bauen und anzupassen &#8212; Unter Verwendung
	  von nur einem Shell-Skript und einer Konfigurationsdatei ist
	  es möglich, ein reduziertes und angepasstes Abbild zu
	  bauen, welches jegliche Reihe von Anforderungen
	  erfüllt.</para>
      </listitem>
    </itemizedlist>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="howto">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD Anleitung</title>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="design">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Das Design von NanoBSD</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Sobald das Abbild auf dem Medium verfügbar ist, kann
	<application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> gebootet werden.  Der
	Massenspeicher ist standardmäßig in drei Teile
	unterteilt:</para>

      <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Zwei Abbild Partitionen: <literal xmlns:xlink="http://www.w3.org/1999/xlink">code#1</literal> und
	    <literal xmlns:xlink="http://www.w3.org/1999/xlink">code#2</literal>.</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Die Partition der Konfigurationsdatei, welche zur
	    Laufzeit unter dem <filename xmlns:xlink="http://www.w3.org/1999/xlink">/cfg</filename> Verzeichnis gemountet
	    werden kann.</para>
	</listitem>
      </itemizedlist>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Diese Partitionen sind im Allgemeinen read-only.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Die <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc</filename> und
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">/var</filename> Verzeichnisse sind
	<citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">md</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">4</manvolnum></citerefentry> (malloc) Speicher.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Die Partition der Konfigurationsdatei besteht unter dem
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">/cfg</filename> Verzeichnis.  Sie
	enthält Dateien für das <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc</filename> Verzeichnis und wird
	direkt nach dem Botten read-only eingehangen, weshalb es
	erforderlich ist geänderte Dateien von <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc</filename> zurück nach <filename xmlns:xlink="http://www.w3.org/1999/xlink">/cfg</filename> zu kopieren falls die
	Änderungen nach einem Neustart bestehen bleiben
	sollen.</para>

      <example xmlns:xlink="http://www.w3.org/1999/xlink">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Dauerhafte Änderungen in
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/resolv.conf</filename> vornehmen</title>

	<screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">vi /etc/resolv.conf</userinput>
[...]
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">mount /cfg</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cp /etc/resolv.conf /cfg</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">umount /cfg</userinput></screen>
      </example>

      <note xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Die <filename xmlns:xlink="http://www.w3.org/1999/xlink">/cfg</filename>
	  Partition sollte nur während des Bootvorgangs und zu
	  Änderungen an den Konfigurationsdateien gemountet
	  werden.</para>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Die <filename xmlns:xlink="http://www.w3.org/1999/xlink">/cfg</filename>
	  Partition jederzeit gemountet zu haben ist keine gute Idee,
	  besonders wenn das <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> System
	  auf einem Massenspeicher betrieben wird, der eventuell druch
	  eine große Anzahl von Schreiboperationen nachteilig
	  beeinträchtigt wird (z. B. wenn der Dateisystem-Syncer den
	  Speicher mit Daten überflutet).</para>
      </note>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Ein NanoBSD Abbild erstellen</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Ein <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> Abbild wird über
	ein einfaches <filename xmlns:xlink="http://www.w3.org/1999/xlink">nanobsd.sh</filename> Shell-Skript
	gebaut, das sich unter <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/src/tools/tools/nanobsd</filename>
	befindet.  Das Skript erstellt ein Abbild, welches dann
	mittels <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">dd</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">1</manvolnum></citerefentry> auf einen Massenspeicher kopiert werden
	kann.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Die folgenden Kommandos sind notwendig um ein
	<application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> Abbild zu erstellen:</para>

      <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cd /usr/src/tools/tools/nanobsd</userinput> <co xml:id="nbsd-cd"/>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">sh nanobsd.sh</userinput> <co xml:id="nbsd-sh"/>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cd /usr/obj/nanobsd.full</userinput> <co xml:id="nbsd-cd2"/>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">dd if=_.disk.full of=/dev/da0 bs=64k</userinput> <co xml:id="nbsd-dd"/></screen>

      <calloutlist xmlns:xlink="http://www.w3.org/1999/xlink">
	<callout arearefs="nbsd-cd">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Wechsel in das Basisverzeichnis des
	    <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> Skripts.</para>
	</callout>

	<callout arearefs="nbsd-sh">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Den Bauprozess starten.</para>
	</callout>

	<callout arearefs="nbsd-cd2">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Wechsel in das Verzeichnis, in dem  das gebaute Abbild
	    liegt.</para>
	</callout>

	<callout arearefs="nbsd-dd">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink"><application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> auf einem
	    Massenspeicher installieren.</para>
	</callout>
      </calloutlist>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Ein NanoBSD Abbild anpassen</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Dies ist wahrscheinlich das wichtigste und interessanteste
	Merkmal von <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application>.  Hierbei
	werden Sie auch die meiste Zeit mit der Entwicklung von
	<application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> verbringen.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Der Aufruf des folgenden Kommandos wird
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">nanobsd.sh</filename> dazu zwingen, seine
	Konfiguration aus <filename xmlns:xlink="http://www.w3.org/1999/xlink">myconf.nano</filename> aus dem
	aktuellen Verzeichnis zu lesen:</para>

      <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">sh nanobsd.sh -c myconf.nano</userinput></screen>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Die Anpassung wird auf zwei Arten geschehen:</para>

      <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Konfigurations-Optionen</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Benutzerdefinierte Funktionen</para>
	</listitem>
      </itemizedlist>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Konfigurations-Optionen</title>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Durch Konfigurationseinstellungen ist es möglich
	  Optionen zu übergeben, die sowohl die
	  <buildtarget>buildworld</buildtarget> und
	  <buildtarget>installworld</buildtarget> Phasen des
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> Bauprozesses betreffen,
	  sowie interne Optionen, die den Haupt-Bauprozess von
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> beeinflussen. Durch diese
	  Optionen ist es möglich, das System so zu reduzieren, dass
	  es mit wenig Platz, etwa 64 MB auskommt. Sie können die
	  Konfigurationsdateien dazu nutzten FreeBSD noch weiter zu
	  trimmen, bis es nur noch aus dem Kernel und zwei oder drei
	  Dateien im Userland besteht.</para>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Die Konfigurationsdatei besteht aus
	  Konfigurations-Optionen, welche die Standardwerte
	  überschreiben.</para>

	<itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><literal xmlns:xlink="http://www.w3.org/1999/xlink">NANO_NAME</literal> &#8212; Name des Build
	      (wird verwendet, um die workdir Namen zu
	      konstruieren).</para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><literal xmlns:xlink="http://www.w3.org/1999/xlink">NANO_SRC</literal> &#8212; Pfad zum
	      Quelltextverzeichnis, das für den Bau des Abbilds
	      verwendet wird.</para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><literal xmlns:xlink="http://www.w3.org/1999/xlink">NANO_KERNEL</literal> &#8212; Name der
	      Kernelkonfigurationsdatei, die für den Bau des Kernels
	      verwendet wird.</para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><literal xmlns:xlink="http://www.w3.org/1999/xlink">CONF_BUILD</literal> &#8212; Optionen für
	      die <buildtarget>buildworld</buildtarget> Phase des
	      Bauprozesses.</para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><literal xmlns:xlink="http://www.w3.org/1999/xlink">CONF_INSTALL</literal> &#8212; Optionen
	      für die <buildtarget>installworld</buildtarget> Phase
	      des Bauprozesses.</para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><literal xmlns:xlink="http://www.w3.org/1999/xlink">CONF_WORLD</literal> &#8212; Optionen für
	      die <buildtarget>buildworld</buildtarget> und
	      <buildtarget>installworld</buildtarget> Phasen des
	      Bauprozesses.</para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><literal xmlns:xlink="http://www.w3.org/1999/xlink">FlashDevice</literal> &#8212; Definiert den
	      zu benutzenden Medientyp.  Überprüfen Sie die
	      Datei <filename xmlns:xlink="http://www.w3.org/1999/xlink">FlashDevice.sub</filename> für
	      weitere Informationen.</para>
	  </listitem>
	</itemizedlist>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Benutzerdefinierte Funktionen</title>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Mit Hilfe von Shell-Funktionen in der
	  Konfigurationsdatei besteht die Möglichkeit zur
	  Feinabstimmung von <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application>.  Das
	  folgende Beispiel illustriert das Grundmodell von
	  benutzerdefinierten Funktionen:</para>

	  <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">cust_foo () (
	echo "bar=baz" &gt; \
		${NANO_WORLDDIR}/etc/foo
)
customize_cmd cust_foo</programlisting>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Ein besseres Beispiel für eine Anpassung ist folgende,
	  welche die Standardgröße des <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc</filename> Verzeichnisses von 5 MB
	  auf 30 MB ändert:</para>

	<programlisting xmlns:xlink="http://www.w3.org/1999/xlink">cust_etc_size () (
	cd ${NANO_WORLDDIR}/conf
	echo 30000 &gt; default/etc/md_size
)
customize_cmd cust_etc_size</programlisting>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Es gibt ein paar vordefinierte Standardfunktionen die
	  Sie nutzen können:</para>

	<itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><literal xmlns:xlink="http://www.w3.org/1999/xlink">cust_comconsole</literal> &#8212;
	      Deaktiviert <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">getty</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> auf den VGA Geräten (den
	      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/dev/ttyv*</filename> Gerätedateien) und
	      ermöglicht die Nutzung der seriellen Schnittstelle COM1
	      als Systemkonsole.</para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><literal xmlns:xlink="http://www.w3.org/1999/xlink">cust_allow_ssh_root</literal> &#8212;
	      Erlaubt es <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="username">root</systemitem> sich über
	      <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">sshd</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> anzumelden.</para>
	  </listitem>

	  <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink"><literal xmlns:xlink="http://www.w3.org/1999/xlink">cust_install_files</literal> &#8212;
	      Installiert Dateien aus dem <filename xmlns:xlink="http://www.w3.org/1999/xlink">nanobsd/Files</filename>
	      Verzeichnis, das einige nützliche Skripte für die
	      Systemverwaltung enthält.</para>
	  </listitem>
	</itemizedlist>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Pakete hinzufügen</title>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Durch benutzerdefinierte Funktionen können Pakete zum
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> Abbild hinzugefügt
	  werden.  Die nachfolgende Funktion installiert alle Pakete
	  aus
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/src/tools/tools/nanobsd/packages</filename>:</para>

	<programlisting xmlns:xlink="http://www.w3.org/1999/xlink">install_packages () (
mkdir -p ${NANO_WORLDDIR}/packages
cp /usr/src/tools/tools/nanobsd/packages/* ${NANO_WORLDDIR}/packages
chroot ${NANO_WORLDDIR} sh -c 'cd packages; pkg_add -v *;cd ..;'
rm -rf ${NANO_WORLDDIR}/packages
)
customize_cmd install_packages</programlisting>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Beispiel einer Konfigurationsdatei</title>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Ein komplettes Beispiel für eine Konfigurationsdatei
	  zum Erstellen eines benutzerdefinierten
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> Abbilds könnte folgende
	  sein:</para>

	<programlisting xmlns:xlink="http://www.w3.org/1999/xlink">NANO_NAME=custom
NANO_SRC=/usr/src
NANO_KERNEL=MYKERNEL
NANO_IMAGES=2

CONF_BUILD='
NO_KLDLOAD=YES
NO_NETGRAPH=YES
NO_PAM=YES
'

CONF_INSTALL='
NO_ACPI=YES
NO_BLUETOOTH=YES
NO_CVS=YES
NO_FORTRAN=YES
NO_HTML=YES
NO_LPR=YES
NO_MAN=YES
NO_SENDMAIL=YES
NO_SHAREDOCS=YES
NO_EXAMPLES=YES
NO_INSTALLLIB=YES
NO_CALENDAR=YES
NO_MISC=YES
NO_SHARE=YES
'

CONF_WORLD='
NO_BIND=YES
NO_MODULES=YES
NO_KERBEROS=YES
NO_GAMES=YES
NO_RESCUE=YES
NO_LOCALES=YES
NO_SYSCONS=YES
NO_INFO=YES
'

FlashDevice SanDisk 1G

cust_nobeastie() (
	touch ${NANO_WORLDDIR}/boot/loader.conf
	echo "beastie_disable=\"YES\"" &gt;&gt; ${NANO_WORLDDIR}/boot/loader.conf
)

customize_cmd cust_comconsole
customize_cmd cust_install_files
customize_cmd cust_allow_ssh_root
customize_cmd cust_nobeastie</programlisting>
      </sect3>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD aktualisieren</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">The Update-Prozess von <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application>
	ist relativ einfach:</para>

      <procedure xmlns:xlink="http://www.w3.org/1999/xlink">
	<step xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Erstellen Sie ein neues
	    <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> Abbild.</para>
	</step>

	<step xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Laden Sie das neue Abbild in eine unbenutzte Partition
	    eines laufenden <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application>
	    Systems.</para>

	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Der wichtigste Unterschied dieses Schrittes zur ersten
	    <application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> Installation besteht
	    darin, das jetzt anstatt der Datei
	    <filename xmlns:xlink="http://www.w3.org/1999/xlink">_.disk.full</filename> (enthält ein Abbild der
	    gesamten Platte) die Datei
	    <filename xmlns:xlink="http://www.w3.org/1999/xlink">_.disk.image</filename> (enthält ein Abbild
	    einer einzelnen System-Partition) installiert wird.</para>
	</step>

	<step xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Neustart, um das System von der neu installierten
	    Partition zu starten.</para>
	</step>

	<step xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Wenn alles gut geht, ist die Aktualisierung
	    abgeschlossen.</para>
	</step>

	<step xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Wenn etwas schief läuft, starten Sie wieder in die
	    vorherige Partition (die das alte, funktionierende Abbild
	    enthält) um die System-Funktionalität so schnell wie
	    möglich wieder herzustellen. Beheben Sie alle Probleme
	    des neu gebauten Abbilds, und wiederholen Sie den
	    Vorgang.</para>
	</step>
      </procedure>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Um das neue Abbild auf das laufende
	<application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> System zu installieren, ist
	es möglich, entweder das <filename xmlns:xlink="http://www.w3.org/1999/xlink">updatep1</filename> oder
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">updatep2</filename> Skript im <filename xmlns:xlink="http://www.w3.org/1999/xlink">/root</filename> Verzeichnis zu verwenden,
	je nachdem, von welcher Partition das aktuelle System
	läuft.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">In Abhängigkeit davon welche Dienste der Host, der das
	<application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> Abbild anbietet, und welche
	Art von Transfer bevorzugt wird, bestehen eine von drei zu
	prüfenden Möglichkeiten:</para>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Verwendung von <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">ftp</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">1</manvolnum></citerefentry></title>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Wenn die Übertragungsgeschwindigkeit an erster
	  Stelle steht, verwenden Sie dieses Beispiel:</para>

	<screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">ftp myhost
get _.disk.image "| sh updatep1"</userinput></screen>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Verwendung von <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">ssh</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">1</manvolnum></citerefentry></title>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Wenn eine sichere Übertragung bevorzugt wird,
	  sollten Sie die Verwendung dieses Beispiels in Betracht
	  ziehen:</para>

	<screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">ssh myhost cat _.disk.image.gz | zcat | sh updatep1</userinput></screen>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink">
	<title xmlns:xlink="http://www.w3.org/1999/xlink">Verwendung von <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">nc</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">1</manvolnum></citerefentry></title>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Verwenden Sie dieses Beispiel, wenn auf dem Remote-Host
	  kein <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">ftpd</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> oder <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">sshd</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> Dienst läuft:</para>

	<procedure xmlns:xlink="http://www.w3.org/1999/xlink">
	  <step xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Zunächst öffnen Sie eine TCP-Listener auf dem Host
	      der das Abbild bereitstellt und zum Client
	      sendet:</para>

	    <screen xmlns:xlink="http://www.w3.org/1999/xlink">myhost<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">nc -l 2222 &lt; _.disk.image</userinput></screen>

	    <note xmlns:xlink="http://www.w3.org/1999/xlink">
	      <para xmlns:xlink="http://www.w3.org/1999/xlink">Stellen Sie sicher das der benutzte Port nicht
		blockiert wird, um eingehende Verbindungen, vom
		<application xmlns:xlink="http://www.w3.org/1999/xlink">NanoBSD</application> Host durch die
		Firewall, zu ermöglichen.</para>
	    </note>
	  </step>

	  <step xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Verbinden Sie sich zum Host der das Abbild
	      bereitstellt und führen Sie das
	      <filename xmlns:xlink="http://www.w3.org/1999/xlink">updatep1</filename> Skript aus:</para>

	    <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">nc myhost 2222 | sh updatep1</userinput></screen>
	  </step>
	</procedure>
      </sect3>
    </sect2>
  </sect1>

  <index xmlns:xlink="http://www.w3.org/1999/xlink"/>
</article>
