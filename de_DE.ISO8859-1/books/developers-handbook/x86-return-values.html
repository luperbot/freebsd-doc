<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>11.4. Rückgabewerte</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Developers' Handbook" /><link rel="up" href="x86.html" title="Kapitel 11. x86-Assembler-Programmierung" /><link rel="prev" href="x86-system-calls.html" title="11.3. Systemaufrufe" /><link rel="next" href="x86-portable-code.html" title="11.5. Portablen Code erzeugen" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.4. Rückgabewerte</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="x86-system-calls.html">Zurück</a> </td><th width="60%" align="center">Kapitel 11. x86-Assembler-Programmierung</th><td width="20%" align="right"> <a accesskey="n" href="x86-portable-code.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x86-return-values"></a>11.4. Rückgabewerte</h2></div><div><span class="authorgroup">Übersetzt von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Hagen</span> <span class="surname">Kühl</span></span>. </span></div></div></div><p>Ein Systemaufruf wäre meistens nicht sehr
      nützlich, wenn er nicht irgendeinen Wert zurückgibt:
      Beispielsweise den Dateideskriptor einer geöffneten Datei,
      die Anzahl an Bytes die in einen Puffer gelesen wurde, die
      Systemzeit, etc.</p><p>Außerdem muss Sie das System informieren, falls ein
      Fehler auftritt: Wenn eine Datei nicht existiert, die
      Systemressourcen erschöpft sind, wir ein ungültiges
      Argument übergeben haben, etc.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x86-man-pages"></a>11.4.1. Manualpages</h3></div></div></div><p>Der herkömmliche Ort, um nach Informationen über
	verschiedene Systemaufrufe unter <span class="trademark">UNIX</span>®-Systemen zu suchen,
	sind die Manualpages. FreeBSD beschreibt seine Systemaufrufe
	in Abschnitt 2, manchmal auch Abschnitt 3.</p><p>In
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=open&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">open</span>(2)</span></a>
	steht beispielsweise:</p><div class="blockquote"><blockquote class="blockquote"><p>Falls erfolgreich, gibt
	<code class="function">open()</code> einen nicht negativen Integerwert,
	als Dateideskriptor bezeichnet, zurück. Es gibt
	<code class="varname">-1</code> im Fehlerfall zurück und setzt
	<code class="varname">errno</code> um den Fehler
	anzuzeigen.</p></blockquote></div><p>Ein Assembler-Programmierer, der neu bei <span class="trademark">UNIX</span>® und
	FreeBSD ist, wird sich sofort fragen: Wo finde ich
	<code class="varname">errno</code> und wie erreiche ich es?</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Die Information der Manualpage bezieht sich auf
	C-Programme. Der Assembler-Programmierer benötigt
	zusätzliche Informationen.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x86-where-return-values"></a>11.4.2. Wo sind die Rückgabewerde?</h3></div></div></div><p>Leider gilt: Es kommt darauf an... Für die meisten
	Systemaufrufe liegt er in <code class="varname">EAX</code>, aber nicht für alle. Eine
	gute Daumenregel, wenn man zum ersten Mal mit einem
	Systemaufruf arbeitet, ist in <code class="varname">EAX</code> nach dem Rückgabewert zu
	suchen. Wenn er nicht dort ist, sind weitere Untersuchungen
	nötig.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Mir ist ein Systemaufruf bekannt, der den
	Rückgabewert in <code class="varname">EDX</code>
	ablegt: <code class="function">SYS_fork</code> Alle
	anderen mit denen ich bisher gearbeitet habe verwenden
	<code class="varname">EAX</code>. Allerdings habe ich
	noch nicht mit allen gearbeitet.</p></div><div xmlns="" class="tip"><h3 class="admontitle">Tipp: </h3><p xmlns="http://www.w3.org/1999/xhtml">Wenn Sie die Antwort weder hier, noch irgendwo anders
	finden, studieren Sie den Quelltext von
	<span class="application">libc</span> und sehen sich an, wie es mit
	dem Kernel zusammenarbeitet.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x86-where-errno"></a>11.4.3. Wo ist <code class="varname">errno</code>?</h3></div></div></div><p>Tatsächlich, nirgendwo...</p><p><code class="varname">errno</code> ist ein Teil der Sprache C, nicht
	des <span class="trademark">UNIX</span>®-Kernels. Wenn man direkt auf Kernel-Dienste
	zugreift, wird der Fehlercode in <code class="varname">EAX</code> zurückgegeben, das selbe
	Register in dem der Rückgabewert, bei einem erfolgreichen
	Aufruf landet.</p><p>Das macht auch Sinn. Wenn kein Fehler auftritt, gibt es
	keinen Fehlercode. Wenn ein Fehler auftritt, gibt es keinen
	Rückgabewert. Ein einziges Register kann also beides
	enthalten.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x86-how-to-know-error"></a>11.4.4. Feststellen, dass ein Fehler aufgetreten ist</h3></div></div></div><p>Wenn Sie die Standard FreeBSD-Aufrufkonvention verwenden
	wird das <code class="varname">carry flag</code>
	gelöscht wenn der Aufruf erfolgreich ist und gesetzt wenn
	ein Fehler auftritt.</p><p>Wenn Sie den Linux-Emulationsmodus verwenden ist der
	vorzeichenbehaftete Wert in <code class="varname">EAX</code> nicht negativ, bei einem
	erfolgreichen Aufruf. Wenn ein Fehler auftritt ist der Wert
	negativ, also <code class="varname">-errno</code>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="x86-system-calls.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="x86.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="x86-portable-code.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">11.3. Systemaufrufe </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 11.5. Portablen Code erzeugen</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>