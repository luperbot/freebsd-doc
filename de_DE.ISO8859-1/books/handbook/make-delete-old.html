<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>26.8. Veraltete Dateien, Verzeichnisse und Bibliotheken löschen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="updating-upgrading.html" title="Kapitel 26. FreeBSD aktualisieren" /><link rel="prev" href="makeworld.html" title="26.7. Das komplette Basissystem neu bauen" /><link rel="next" href="small-lan.html" title="26.9. Installation mehrerer Maschinen" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">26.8. Veraltete Dateien, Verzeichnisse und Bibliotheken
      löschen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="makeworld.html">Zurück</a> </td><th width="60%" align="center">Kapitel 26. FreeBSD aktualisieren</th><td width="20%" align="right"> <a accesskey="n" href="small-lan.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="make-delete-old"></a>26.8. Veraltete Dateien, Verzeichnisse und Bibliotheken
      löschen</h2></div><div><span class="authorgroup">Basiert auf Notizen von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Anton</span> <span class="surname">Shterenlikht</span></span>. </span></div></div></div><a id="idp86168400" class="indexterm"></a><p>Aufgrund der ständigen Weiterentwicklung von FreeBSD kann es
      dazu kommen, dass Dateien (und deren Inhalte) obsolet werden, weil
      deren Funktionalität entweder in anderen Dateien implementiert
      wurde, sich die Versionsnummer der Bibliothek geändert hat
      oder deren Funktion nicht mehr benötigt wird.  Dies kann
      sowohl Dateien und Verzeichnis, aber auch Bibliotheken betreffen.
      Diese veralteten Dateien sollten daher entfernt werden, bevor Sie
      Ihr System aktualisieren.  Der Vorteil für den Benutzer ist
      darin zu sehen, dass dessen System (sowie dessen Backup) von
      nicht mehr benötigten Dateien gereinigt wird.  Falls die
      obsolete Bibliothek Sicherheits- oder Stabilitätsprobleme
      aufweist, sollte das System ebenfalls aktualisiert werden, um
      Ihr System sicher zu halten und/oder durch die fehlerhafte
      Bibliothek verursachte Systemabstürze zu vermeiden.  Veraltete
      Dateien, Verzeichnisse und Bibliotheken sind in der Datei
      <code class="filename">/usr/src/ObsoleteFiles.inc</code> aufgelistet.  Die
      folgenden Anweisungen sollen Ihnen dabei helfen, diese Dateien
      während der Systemaktualisierung zu entfernen.</p><p>Im Folgenden wird angenommen, dass Sie den Anweisungen von
      <a class="xref" href="makeworld.html#canonical-build" title="26.7.1. Richtig aktualisieren">Abschnitt 26.7.1, &#8222;Richtig aktualisieren&#8220;</a> folgen.  Nachdem Sie
      <code class="command">make installworld</code>
      sowie <code class="command">mergemaster</code> erfolgreich ausgeführt
      haben, sollten Sie Ihr System auf veraltete Dateien und
      Bibliotheken hin überprüfen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make check-old</code></strong></pre><p>Werden dabei veraltete Dateien gefunden, können diese
      im nächsten Schritt entfernt werden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make delete-old</code></strong></pre><div xmlns="" class="tip"><h3 class="admontitle">Tipp: </h3><p xmlns="http://www.w3.org/1999/xhtml">Weitere interessante Targets finden sich in der Datei
	<code class="filename">/usr/src/Makefile</code>.</p></div><p>Bei jeder Datei wird nachgefragt, ob Sie diese wirklich
      löschen wollen.  Es ist aber auch möglich, alle
      Dateien automatisch löschen zu lassen.  Dies erreichen Sie,
      indem Sie die Umgebungsvariable
      <code class="varname">BATCH_DELETE_OLD_FILES</code> entsprechend
      setzen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DBATCH_DELETE_OLD_FILES delete-old</code></strong></pre><p>Alternativ können Sie auch den folgenden Befehl
      einsetzen (und jeweils die Antwort <code class="command">yes</code>
      an die einzelnen Abfragen weiterreichen):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>yes | make delete-old</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Warnung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Das Löschen veralteter Dateien kann dazu führen,
	  dass Programme, die auf diese Dateien angewiesen sind, nicht mehr
	  funktionieren.  Dies gilt insbesondere für veraltete
	  Bibliotheken.  In den meisten Fällen ist es dann notwendig,
	  Programme, Ports und Bibliotheken, welche die veraltete
	  Bibliothek verwenden, neu zu bauen, bevor Sie den Befehl
	  <code class="command">make
	  delete-old-libs</code>
	  ausführen.</p></div><p>Die Ports-Sammlung enthält Werkzeuge, die Ihnen beim
      Prüfen von Bibliothek-Abhängigkeiten helfen können:
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/libchk/pkg-descr">sysutils/libchk</a>
      sowie <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/bsdadminscripts/pkg-descr">sysutils/bsdadminscripts</a>.</p><p>Veraltete Bibliotheken können zu Konflikten mit neueren
      Bibliotheken führen und beispielsweise folgende
      Meldungen verursachen:</p><pre class="screen">/usr/bin/ld: warning: libz.so.4, needed by /usr/local/lib/libtiff.so, may conflict with libz.so.5
/usr/bin/ld: warning: librpcsvc.so.4, needed by /usr/local/lib/libXext.so, may conflict with librpcsvc.so.5</pre><p>Um diese Probleme zu lösen, müssen Sie zuerst
      herausfinden, welcher Port die Bibliothek installiert hat:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_info -W  /usr/local/lib/libtiff.so</code></strong>
/usr/local/lib/libtiff.so was installed by package tiff-3.9.4
<code class="prompt">#</code> <strong class="userinput"><code>pkg_info -W /usr/local/lib/libXext.so</code></strong>
/usr/local/lib/libXext.so was installed by package libXext-1.1.1,1</pre><p>Danach deinstallieren Sie den Port und bauen ihn neu, um ihn
      danach erneut zu installieren.  Dieser Vorgang kann durch den
      Einsatz der Werkzeuge <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portmaster/pkg-descr">ports-mgmt/portmaster</a> oder <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a> automatisiert
      werden.  Nachdem Sie alle Ports erfolgreich neu gebaut haben
      (und Sie daher keine veralteten Bibliotheken mehr verwenden)
      können Sie die veralteten Bibliotheken endgültig
      entfernen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make delete-old-libs</code></strong></pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="makeworld.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="updating-upgrading.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="small-lan.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">26.7. Das komplette Basissystem neu bauen </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 26.9. Installation mehrerer Maschinen</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>