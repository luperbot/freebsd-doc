<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>31.4. NIS/YP &#8211; Network Information Service</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="network-servers.html" title="Kapitel 31. Netzwerkserver" /><link rel="prev" href="network-nfs.html" title="31.3. NFS &#8211; Network File System" /><link rel="next" href="network-dhcp.html" title="31.5. Automatische Netzwerkkonfiguration mit DHCP" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">31.4. NIS/YP &#8211; Network Information Service</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-nfs.html">Zurück</a> </td><th width="60%" align="center">Kapitel 31. Netzwerkserver</th><td width="20%" align="right"> <a accesskey="n" href="network-dhcp.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-nis"></a>31.4. NIS/YP &#8211; Network Information Service</h2></div><div><span class="authorgroup">Beigetragen von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Swingle</span></span>. </span></div><div><span class="authorgroup">Erweitert von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Eric</span> <span class="surname">Ogren</span></span> und <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Udo</span> <span class="surname">Erdelhoff</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89569744"></a>31.4.1. Was ist NIS?</h3></div></div></div><a id="idp89570384" class="indexterm"></a><a id="idp89570896" class="indexterm"></a><a id="idp89571408" class="indexterm"></a><a id="idp89580240" class="indexterm"></a><a id="idp89580752" class="indexterm"></a><a id="idp89581264" class="indexterm"></a><a id="idp89581776" class="indexterm"></a><p><acronym class="acronym">NIS</acronym>
	wurde von Sun Microsystems entwickelt, um <span class="trademark">UNIX</span>®-Systeme
	(ursprünglich <span class="trademark">SunOS</span>&#8482;) zentral verwalten zu können.
	Mittlerweile hat es sich zu einem Industriestandard entwickelt,
	der von allen wichtigen <span class="trademark">UNIX</span>®-Systemen (<span class="trademark">Solaris</span>&#8482;, HP-UX,
	<span class="trademark">AIX</span>®, Linux, NetBSD, OpenBSD, FreeBSD und anderen)
	unterstützt wird.</p><a id="idp89585360" class="indexterm"></a><p><acronym class="acronym">NIS</acronym> war
       ursprünglich als <span class="emphasis"><em>Yellow Pages</em></span> bekannt,
       aus markenrechtlichen Gründen wurde der Name aber
       geändert.  Die alte Bezeichnung (sowie die Abkürzung YP)
       wird aber nach wie vor häufig verwendet.</p><a id="idp89587664" class="indexterm"></a><p>Bei NIS handelt es sich um ein RPC-basiertes
        Client/Server-System. Eine Gruppe von Rechnern greift dabei
        innerhalb einer NIS-Domäne auf gemeinsame
        Konfigurationsdateien zu.  Ein Systemadministrator wird dadurch
        in die Lage versetzt, NIS-Clients mit minimalem Aufwand
        einzurichten, sowie Änderungen an der Systemkonfiguration
        von einem zentralen Ort aus durchzuführen.</p><a id="idp89589328" class="indexterm"></a><p>Die Funktion entspricht dem Domänensystem von
        <span class="trademark">Windows NT</span>®; auch wenn sich die interne Umsetzung unterscheidet,
        sind die Basisfunktionen vergleichbar.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89591120"></a>31.4.2. Wichtige Prozesse und Begriffe</h3></div></div></div><p>Es gibt verschiedene Begriffe und Anwenderprozesse, auf die
        Sie stoßen werden, wenn Sie NIS unter FreeBSD einrichten,
        egal ob Sie einen Server oder einen Client konfigurieren:</p><a id="idp89592144" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Begriff</th><th>Beschreibung</th></tr></thead><tbody><tr><td>NIS-Domänenname</td><td>Ein NIS-Masterserver sowie alle Clients
	        (inklusive der Slaveserver) haben einen
	        NIS-Domänennamen.  Dieser hat (ähnlich den
	        <span class="trademark">Windows NT</span>®-Domänennamen) nichts mit DNS zu tun.
	      </td></tr><tr><td><span class="application">rpcbind</span></td><td>Muss laufen, damit RPC (Remote Procedure Call, ein
                von NIS verwendetes Netzwerkprotokoll) funktioniert.
                NIS-Server sowie Clients funktionieren ohne
                <span class="application">rpcbind</span> nicht.</td></tr><tr><td><span class="application">ypbind</span></td><td><span class="quote">&#8222;<span class="quote">Bindet</span>&#8220;</span> einen NIS-Client an seinen
                NIS-Server.  Der Client bezieht den
                NIS-Domänennamen vom System und stellt über
                das RPC-Protokoll eine Verbindung zum NIS-Server her.
                <span class="application">ypbind</span> ist der zentrale
                Bestandteil der Client-Server-Kommunikation in einer
                NIS-Umgebung.  Wird <span class="application">&gt;ypbind</span>
                auf einem Client beendet, ist dieser nicht mehr in der
                Lage, auf den NIS-Server zuzugreifen.</td></tr><tr><td><span class="application">ypserv</span></td><td>Sollte nur auf dem NIS-Server laufen, da es sich um
                den Serverprozess selbst handelt.  Wenn <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a>
                nicht mehr läuft, kann der Server nicht mehr auf
                NIS-Anforderungen reagieren (wenn ein Slaveserver
                existiert, kann dieser als Ersatz fungieren).  Einige
                NIS-Systeme (allerdings nicht das von FreeBSD) versuchen
                allerdings erst gar nicht, sich mit einem anderen Server
                zu verbinden, wenn der bisher verwendete Server nicht
                mehr reagiert.  Die einzige Lösung dieses Problems
                besteht dann darin, den Serverprozess (oder gar den
                Server selbst) oder den
                <span class="application">ypbind</span>-Prozess auf dem Client
                neu zu starten.</td></tr><tr><td><span class="application">rpc.yppasswdd</span></td><td>Ein weiterer Prozess, der nur auf dem
               NIS-Masterserver laufen sollte.  Es handelt sich um einen
               Daemonprozess, der es NIS-Clients ermöglicht, sich
               auf dem NIS-Masterserver anzumelden, um ihr Passwort zu
               ändern.</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89611216"></a>31.4.3. Wie funktioniert NIS?</h3></div></div></div><p>In einer NIS-Umgebung gibt es drei Rechnerarten:
        Masterserver, Slaveserver und Clients.  Server dienen als
        zentraler Speicherort für Rechnerkonfigurationen.
        Masterserver speichern die maßgebliche Kopie dieser
        Informationen, während Slaveserver diese Informationen
        aus Redundanzgründen spiegeln.  Die Clients beziehen
        ihre Informationen immer vom Server.</p><p>Auf diese Art und Weise können Informationen aus
        verschiedenen Dateien von mehreren Rechnern gemeinsam
        verwendet werden. <code class="filename">master.passwd</code>,
        <code class="filename">group</code>, und <code class="filename">hosts</code>
        werden oft gemeinsam über NIS verwendet.  Immer, wenn
        ein Prozess auf einem Client auf Informationen zugreifen will,
        die normalerweise in lokalen Dateien vorhanden wären,
        wird stattdessen eine Anfrage an den NIS-Server gestellt, an
        den der Client gebunden ist.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89613776"></a>31.4.3.1. Arten von NIS-Rechnern</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="idp89614928" class="indexterm"></a><p>Ein <span class="emphasis"><em>NIS-Masterserver</em></span> verwaltet,
              ähnlich einem <span class="trademark">Windows NT</span>®-Domänencontroller, die
              von allen NIS-Clients gemeinsam verwendeten Dateien.
              <code class="filename">passwd</code>, <code class="filename">group</code>,
              sowie verschiedene andere von den Clients verwendete
              Dateien existieren auf dem Masterserver.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ein Rechner kann auch für mehrere
              NIS-Domänen als Masterserver fungieren.  Dieser
              Abschnitt konzentriert sich im Folgenden allerdings auf
              eine relativ kleine NIS-Umgebung.</p></div></li><li class="listitem"><a id="idp89623376" class="indexterm"></a><p><span class="emphasis"><em>NIS-Slaveserver</em></span>. Ähnlich
              einem <span class="trademark">Windows NT</span>®-Backupdomänencontroller, verwalten
              NIS-Slaveserver Kopien der Daten des NIS-Masterservers.
              NIS-Slaveserver bieten die Redundanz, die für
              kritische Umgebungen benötigt wird.  Zusätzlich
              entlasten Slaveserver den Masterserver:  NIS-Clients
              verbinden sich immer mit dem NIS-Server, der zuerst
	      reagiert.  Dieser Server kann auch ein Slaveserver sein.
	    </p></li><li class="listitem"><a id="idp89626064" class="indexterm"></a><p><span class="emphasis"><em>NIS-Clients</em></span>.  NIS-Clients
              identifizieren sich gegenüber dem NIS-Server
	      (ähnlich den <span class="trademark">Windows NT</span>®-Workstations), um sich am
	      Server anzumelden.</p></li></ul></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89628880"></a>31.4.4. NIS/YP konfigurieren</h3></div></div></div><p>Dieser Abschnitt beschreibt an Hand eines Beispiels die
        Einrichtung einer NIS-Umgebung.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89630032"></a>31.4.4.1. Planung</h4></div></div></div><p>Nehmen wir an, Sie seien der Administrator eines kleinen
          Universitätsnetzes.  Dieses Netz besteht aus
          fünfzehn FreeBSD-Rechnern, für die derzeit keine
          zentrale Verwaltung existiert, jeder Rechner hat also eine
          eigene Version von <code class="filename">/etc/passwd</code> und
          <code class="filename">/etc/master.passwd</code>.  Diese Dateien werden
          manuell synchron gehalten; legen Sie einen neuen Benutzer an,
          so muss dies auf allen fünfzehn Rechnern manuell
          erledigt werden (unter Verwendung von
          <code class="command">adduser</code>).  Da diese Lösung sehr
          ineffizient ist, soll das Netzwerk in Zukunft NIS verwenden,
          wobei zwei der Rechner als Server dienen sollen.</p><p>In Zukunft soll das Netz also wie folgt aussehen:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Rechnername</th><th>IP-Adresse</th><th>Rechneraufgabe</th></tr></thead><tbody><tr><td><code class="systemitem">ellington</code></td><td><code class="systemitem">10.0.0.2</code></td><td>NIS-Master</td></tr><tr><td><code class="systemitem">coltrane</code></td><td><code class="systemitem">10.0.0.3</code></td><td>NIS-Slave</td></tr><tr><td><code class="systemitem">basie</code></td><td><code class="systemitem">10.0.0.4</code></td><td>Workstation der Fakultät</td></tr><tr><td><code class="systemitem">bird</code></td><td><code class="systemitem">10.0.0.5</code></td><td>Clientrechner</td></tr><tr><td><code class="systemitem">cli[1-11]</code></td><td><code class="systemitem">10.0.0.[6-17]</code></td><td>Verschiedene andere Clients</td></tr></tbody></table></div><p>Wenn Sie NIS das erste Mal einrichten, ist es ratsam, sich
          zuerst über die Vorgangsweise Gedanken zu machen.
          Unabhängig von der Größe Ihres Netzwerks
          müssen Sie stets einige Entscheidungen treffen.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89650384"></a>31.4.4.1.1. Einen NIS-Domänennamen wählen</h5></div></div></div><a id="idp89651024" class="indexterm"></a><p>Dies muss nicht der <span class="quote">&#8222;<span class="quote">Domainname</span>&#8220;</span> sein.  Es
            handelt sich vielmehr um den <span class="quote">&#8222;<span class="quote">NIS-Domainnamen</span>&#8220;</span>.
            Wenn ein Client Informationen anfordert, ist in dieser
            Anforderung der Name der NIS-Domäne enthalten.
            Dadurch weiß jeder Server im Netzwerk, auf welche
            Anforderung er antworten muss.  Stellen Sie sich den
            NIS-Domänennamen als den Namen einer Gruppe von
            Rechnern vor, die etwas gemeinsam haben.</p><p>Manchmal wird der Name der Internetdomäne auch
            für die NIS-Domäne verwendet.  Dies ist allerdings
            nicht empfehlenswert, da dies bei der Behebung von Problemen
            verwirrend sein kann.  Der Name der NIS-Domäne sollte
            innerhalb Ihres Netzwerks einzigartig sein.  Hilfreich ist
            es, wenn der Name die Gruppe der in ihr zusammengefassten
            Rechner beschreibt.  Die Kunstabteilung von Acme Inc.
            hätte daher die NIS-Domäne
            <span class="quote">&#8222;<span class="quote">acme-art</span>&#8220;</span>.  Für unser Beispiel verwenden
            wir den NIS-Domänennamen
            <code class="literal">test-domain</code>.</p><a id="idp89654480" class="indexterm"></a><p>Es gibt jedoch auch Betriebssysteme (vor allem <span class="trademark">SunOS</span>&#8482;),
            die als NIS-Domänennamen den Name der
            Internetdomäne verwenden.  Wenn dies für einen
            oder mehrere Rechner Ihres Netzwerks zutrifft,
            <span class="emphasis"><em>müssen</em></span> Sie den Namen der
            Internetdomäne als Ihren NIS-Domänennamen
            verwenden.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89656272"></a>31.4.4.1.2. Anforderungen an den Server</h5></div></div></div><p>Wenn Sie einen NIS-Server einrichten wollen, müssen
            Sie einige Dinge beachten.  Eine unangenehme Eigenschaft
            von NIS ist die Abhängigkeit der Clients vom Server.
            Wenn sich der Client nicht über den Server mit seiner
            NIS-Domäne verbinden kann, wird der Rechner oft
            unbenutzbar, da das Fehlen von Benutzer- und
            Gruppeninformationen zum Einfrieren des Clients führt.
            Daher sollten Sie für den Server einen Rechner
            auswählen, der nicht regelmäßig neu
            gestartet werden muss und der nicht für Testversuche
            verwendet wird.  Idealerweise handelt es sich um einen
            alleinstehenden Rechner, dessen einzige Aufgabe es ist, als
            NIS-Server zu dienen.  Wenn Sie ein Netzwerk haben, das
            nicht zu stark ausgelastet ist, ist es auch möglich,
            den NIS-Server als weiteren Dienst auf einem anderen Rechner
            laufen zu lassen.  Denken Sie aber daran, dass ein Ausfall
            des NIS-Servers <span class="emphasis"><em>alle</em></span> NIS-Clients
            betrifft.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89658064"></a>31.4.4.2. NIS-Server</h4></div></div></div><p>Die verbindlichen Kopien aller NIS-Informationen befinden
          sich auf einem einzigen Rechner, dem NIS-Masterserver.  Die
          Datenbanken, in denen die Informationen gespeichert sind,
          bezeichnet man als NIS-Maps.  Unter FreeBSD werden diese
          Maps unter <code class="filename">/var/yp/[domainname]</code>
          gespeichert, wobei <code class="filename">[domainname]</code> der
          Name der NIS-Domäne ist.  Ein einzelner NIS-Server
          kann gleichzeitig mehrere NIS-Domänen verwalten, daher
          können auch mehrere Verzeichnisse vorhanden sein.  Jede
          Domäne verfügt über ein eigenes Verzeichnis
          sowie einen eigenen, von anderen Domänen
          unabhängigen Satz von NIS-Maps.</p><p>NIS-Master- und Slaveserver verwenden den
          <code class="command">ypserv</code>-Daemon, um NIS-Anfragen zu
          bearbeiten.  <code class="command">ypserv</code> empfängt
          eingehende Anfragen der NIS-Clients, ermittelt aus der
          angeforderten Domäne und Map einen Pfad zur
          entsprechenden Datenbank, und sendet die angeforderten
          Daten von der Datenbank zum Client.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89661008"></a>31.4.4.2.1. Einen NIS-Masterserver einrichten</h5></div></div></div><a id="idp89661648" class="indexterm"></a><p>Abhängig von Ihren Anforderungen ist die
            Einrichtung eines NIS-Masterservers relativ einfach, da
            NIS von FreeBSD bereits in der Standardkonfiguration
            unterstützt wird.  Sie müssen nur folgende
            Zeilen in <code class="filename">/etc/rc.conf</code> einfügen:
          </p><div class="procedure"><ol class="procedure" type="1"><li class="step"><pre class="programlisting">nisdomainname="test-domain"</pre><p>Diese Zeile setzt den NIS-Domänennamen auf
                <code class="literal">test-domain</code>, wenn Sie das Netzwerk
                initialisieren (beispielsweise nach einem Systemstart).
              </p></li><li class="step"><pre class="programlisting">nis_server_enable="YES"</pre><p>
                Dadurch werden die NIS-Serverprozesse gestartet.</p></li><li class="step"><pre class="programlisting">nis_yppasswdd_enable="YES"</pre><p>
                Durch diese Zeile wird der
                <code class="command">rpc.yppasswdd</code>-Daemon aktiviert, der,
                wie bereits erwähnt, die Änderung von
                NIS-Passwörtern von einem Client aus
                ermöglicht.</p></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">In Abhängigkeit von Ihrer NIS-Konfiguration
              können weitere Einträge erforderlich sein.
	      Weitere Informationen finden Sie im Abschnitt
              <a class="link" href="network-nis.html#nis-server-is-client" title="31.4.10. NIS-Server, die auch als NIS-Clients arbeiten">NIS-Server, die
              auch als NIS-Clients arbeiten</a>.</p></div><p>Nachdem Sie obige Parameter konfiguriert haben, müssen
            Sie nur noch <code class="command">/etc/netstart</code> als Superuser
            ausführen, um alles entsprechend Ihren Vorgaben in der
            Datei <code class="filename">/etc/rc.conf</code> einzurichten.
            Bevor Sie die NIS-Maps einrichten können, müssen Sie
            nun noch den <span class="application">ypserv</span>-Daemon
            manuell starten:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service ypserv start</code></strong></pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89676112"></a>31.4.4.2.2. Die NIS-Maps initialisieren</h5></div></div></div><a id="idp89676752" class="indexterm"></a><p><span class="emphasis"><em>NIS-Maps</em></span> sind Datenbanken, die
            sich im Verzeichnis <code class="filename">/var/yp</code> befinden.
            Sie werden am NIS-Masterserver aus den Konfigurationsdateien
            unter <code class="filename">/etc</code> erzeugt.  Einzige Ausnahme:
            <code class="filename">/etc/master.passwd</code>.  Dies ist auch
            sinnvoll, da Sie die Passwörter für Ihr
            <code class="systemitem">root</code>- oder andere
            Administratorkonten nicht an alle Server der NIS-Domäne
            verteilen wollen.  Bevor Sie also die NIS-Maps des
            Masterservers einrichten, sollten Sie Folgendes tun:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp /etc/master.passwd /var/yp/master.passwd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi master.passwd</code></strong></pre><p>Entfernen Sie alle Systemkonten
            (wie <code class="systemitem">bin</code>, <code class="systemitem">tty</code>,
            <code class="systemitem">kmem</code> oder <code class="systemitem">games</code>),
            sowie alle Konten, die Sie nicht an die NIS-Clients
            weitergeben wollen (beispielsweise <code class="systemitem">root</code>
            und alle Konten mit der UID 0 (=Superuser).</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Stellen Sie sicher, dass
            <code class="filename">/var/yp/master.passwd</code> weder von der
            Gruppe noch von der Welt gelesen werden kann (Zugriffsmodus
            600)!  Ist dies nicht der Fall, ändern Sie dies mit
            <code class="command">chmod</code>.</p></div><a id="idp89691344" class="indexterm"></a><p>Nun können Sie die NIS-Maps initialisieren.
	    FreeBSD verwendet dafür das Skript
	    <code class="command">ypinit</code> (lesen Sie dazu auch
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypinit&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypinit</span>(8)</span></a>).  Dieses Skript ist auf fast allen
	    UNIX-Betriebssystemen verfügbar.  Bei
            Digitals Unix/Compaq Tru64 UNIX nennt es sich allerdings
            <code class="command">ypsetup</code>.  Da wir Maps für einen
            NIS-Masterserver erzeugen, verwenden wir
            <code class="command">ypinit</code> mit der Option
            <code class="option">-m</code>.  Nachdem Sie die beschriebenen
            Aktionen durchgeführt haben, erzeugen Sie nun die
            NIS-Maps:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>ypinit -m test-domain</code></strong>
Server Type: MASTER Domain: test-domain
Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.
Do you want this procedure to quit on non-fatal errors? [y/n: n] <strong class="userinput"><code>n</code></strong>
Ok, please remember to go back and redo manually whatever fails.
If you don't, something might not work.
At this point, we have to construct a list of this domains YP servers.
rod.darktech.org is already known as master server.
Please continue to add any slave servers, one per line. When you are
done with the list, type a &lt;control D&gt;.
master server   :  ellington
next host to add:  <strong class="userinput"><code>coltrane</code></strong>
next host to add:  <strong class="userinput"><code>^D</code></strong>
The current list of NIS servers looks like this:
ellington
coltrane
Is this correct?  [y/n: y] <strong class="userinput"><code>y</code></strong>

[..output from map generation..]

NIS Map update completed.
ellington has been setup as an YP master server without any errors.</pre><p>Dadurch erzeugt <code class="command">ypinit</code>
            <code class="filename">/var/yp/Makefile</code> aus der Datei
            <code class="filename">/var/yp/Makefile.dist</code>.
            Durch diese Datei wird festgelegt, dass Sie in einer
            NIS-Umgebung mit nur einem Server arbeiten und dass alle
            Clients unter FreeBSD laufen.  Da
            <code class="literal">test-domain</code> aber auch über einen
            Slaveserver verfügt, müssen Sie
            <code class="filename">/var/yp/Makefile</code> entsprechend anpassen:
          </p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>vi /var/yp/Makefile</code></strong></pre><p>Sie sollten die Zeile</p><pre class="programlisting">NOPUSH = "True"</pre><p>auskommentieren (falls dies nicht bereits der Fall ist).</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89726544"></a>31.4.4.2.3. Einen NIS-Slaveserver einrichten</h5></div></div></div><a id="idp89727184" class="indexterm"></a><p>Ein NIS-Slaveserver ist noch einfacher einzurichten als
            ein Masterserver.  Melden Sie sich am Slaveserver an und
            ändern Sie <code class="filename">/etc/rc.conf</code> analog
            zum Masterserver.  Der einzige Unterschied besteht in der
            Verwendung der Option <code class="option">-s</code>, wenn Sie
            <code class="command">ypinit</code> aufrufen.  Die Option
            <code class="option">-s</code> erfordert den Namen des
            NIS-Masterservers, daher sieht unsere Ein- und Ausgabe wie
            folgt aus:</p><pre class="screen">coltrane<code class="prompt">#</code> <strong class="userinput"><code>ypinit -s ellington test-domain</code></strong>

Server Type: SLAVE Domain: test-domain Master: ellington

Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.

Do you want this procedure to quit on non-fatal errors? [y/n: n]  <strong class="userinput"><code>n</code></strong>

Ok, please remember to go back and redo manually whatever fails.
If you don't, something might not work.
There will be no further questions. The remainder of the procedure
should take a few minutes, to copy the databases from ellington.
Transferring netgroup...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byuser...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byhost...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring group.bygid...
ypxfr: Exiting: Map successfully transferred
Transferring group.byname...
ypxfr: Exiting: Map successfully transferred
Transferring services.byname...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.byname...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.byname...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring netid.byname...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring ypservers...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byname...
ypxfr: Exiting: Map successfully transferred

coltrane has been setup as an YP slave server without any errors.
Don't forget to update map ypservers on ellington.</pre><p>Sie sollten nun über das Verzeichnis
            <code class="filename">/var/yp/test-domain</code> verfügen.
            Die Kopien der NIS-Masterserver-Maps sollten sich in diesem
            Verzeichnis befinden.  Allerdings müssen Sie diese
            auch aktuell halten.  Die folgenden Einträge in
            <code class="filename">/etc/crontab</code> erledigen diese Aufgabe:
          </p><pre class="programlisting">20      *       *       *       *       root   /usr/libexec/ypxfr passwd.byname
21      *       *       *       *       root   /usr/libexec/ypxfr passwd.byuid</pre><p>Diese zwei Zeilen zwingen den Slaveserver, seine Maps
            mit denen des Masterservers zu synchronisieren.  Diese
            Einträge sind nicht zwar nicht unbedingt nötig,
            da der Masterserver automatisch versucht, alle
            Änderungen seiner NIS-Maps an seine
            Slaveserver weiterzugeben.  Da Passwortinformationen aber
            auch für nur vom Slaveserver abhängige Systeme
            vital sind,
            ist es eine gute Idee, diese Aktualisierungen zu erzwingen.
            Besonders wichtig ist dies in stark ausgelasteten Netzen,
            in denen Map-Aktualisierungen unvollständig sein
            könnten.</p><p>Führen Sie nun <code class="command">/etc/netstart</code>
            auch auf dem Slaveserver aus, um den NIS-Server erneut zu
            starten.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89735120"></a>31.4.4.3. NIS-Clients</h4></div></div></div><p>Ein NIS-Client <code class="literal">bindet</code> sich unter
          Verwendung des <code class="command">ypbind</code>-Daemons an einen
          NIS-Server.  <code class="command">ypbind</code> prüft die
          Standarddomäne des Systems (die durch
          <code class="command">domainname</code> gesetzt wird), und beginnt
          RPCs über das lokale Netzwerk zu verteilen (broadcast).
          Diese Anforderungen legen den Namen der Domäne fest,
          für die <code class="command">ypbind</code> eine Bindung erzeugen
          will.  Wenn der Server der entsprechenden Domäne eine
          solche Anforderung erhält, schickt er eine Antwort an
          <code class="command">ypbind</code>.  <code class="command">ybind</code> speichert
          daraufhin die Adresse des Servers.  Wenn mehrere Server
          verfügbar sind (beispielsweise ein Master- und mehrere
          Slaveserver), verwendet <code class="command">ypbind</code> die erste
          erhaltene Adresse.  Ab diesem Zeitpunkt richtet der Client alle
          Anfragen an genau diesen Server.  <code class="command">ypbind</code>
          <span class="quote">&#8222;<span class="quote">pingt</span>&#8220;</span> den Server gelegentlich an, um
          sicherzustellen, dass der Server funktioniert.  Antwortet der
          Server innerhalb eines bestimmten Zeitraums nicht (Timeout),
          markiert <code class="command">ypbind</code> die Domäne als
          ungebunden und beginnt erneut, RPCs über das Netzwerk zu
          verteilen, um einen anderen Server zu finden.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89756880"></a>31.4.4.3.1. Einen NIS-Client konfigurieren</h5></div></div></div><a id="idp89757520" class="indexterm"></a><p>Einen FreeBSD-Rechner als NIS-Client einzurichten, ist
            recht einfach.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Fügen Sie folgende Zeilen in
                <code class="filename">/etc/rc.conf</code> ein, um den
                NIS-Domänennamen festzulegen, und um
                <code class="command">ypbind</code> bei der Initialisierung des
                Netzwerks zu starten:</p><pre class="programlisting">nisdomainname="test-domain"
nis_client_enable="YES"</pre></li><li class="step"><p>Um alle Passworteinträge des NIS-Servers zu
                importieren, löschen Sie alle Benutzerkonten in
                <code class="filename">/etc/master.passwd</code> und fügen
                mit <code class="command">vipw</code> folgende Zeile am Ende der
                Datei ein:</p><pre class="programlisting">+:::::::::</pre><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Diese Zeile legt für alle gültigen
                  Benutzerkonten der NIS-Server-Maps einen Zugang an.
                  Es gibt verschiedene Wege, Ihren NIS-Client durch
                  Änderung dieser Zeile zu konfigurieren.  Lesen
                  Sie dazu auch den Abschnitt über
                  <a class="link" href="network-nis.html#netgroups" title="31.4.7. Netzgruppen verwenden">Netzgruppen</a> weiter
                  unten.  Weitere detaillierte Informationen finden Sie
                  im Buch <code class="literal">Managing NFS and NIS</code> von
                  O'Reilly.</p></div><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Sie sollten zumindest ein lokales Benutzerkonto,
                  das nicht über NIS importiert wird, in Ihrer
                  <code class="filename">/etc/master.passwd</code> behalten.
                  Dieser Benutzer sollte außerdem ein Mitglied der
                  Gruppe <code class="systemitem">wheel</code> sein.  Wenn es
                  mit NIS Probleme gibt, können Sie diesen Zugang
                  verwenden, um sich anzumelden,
                  <code class="systemitem">root</code> zu werden und das Problem
                  zu beheben.</p></div></li><li class="step"><p>Um alle möglichen Gruppeneinträge vom
                NIS-Server zu importieren, fügen sie folgende Zeile
                in <code class="filename">/etc/group</code> ein:</p><pre class="programlisting">+:*::</pre></li></ol></div><p>Um den NIS-Client sofort zu starten, führen Sie als
            Superuser die folgenden Befehle aus:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/netstart</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>service ypbind start</code></strong></pre><p>Nachdem Sie diese Schritte erledigt haben, sollten Sie
            mit <code class="command">ypcat passwd</code> die
            <code class="literal">passwd-Map</code> des NIS-Servers anzeigen
            können.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89776464"></a>31.4.5. Sicherheit unter NIS</h3></div></div></div><a id="idp89785424" class="indexterm"></a><p>Im Allgemeinen kann jeder entfernte Anwender einen RPC an
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> schicken, um den Inhalt Ihrer NIS-Maps abzurufen,
        falls er Ihren NIS-Domänennamen kennt.  Um solche
        unautorisierten Transaktionen zu verhindern, unterstützt
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> <span class="quote">&#8222;<span class="quote">securenets</span>&#8220;</span>, durch die man den
        Zugriff auf bestimmte Rechner beschränken kann.
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> versucht, beim Systemstart die Informationen
        über <code class="literal">securenets</code> aus der Datei
        <code class="filename">/var/yp/securenets</code> zu laden.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Die Datei <code class="filename">securenets</code> kann auch
	  in einem anderen Verzeichnis stehen, das mit der Option
          <code class="option">-p</code> angegeben wird.  Diese Datei
          enthält Einträge, die aus einer Netzwerkadresse und
          einer Netzmaske bestehen, die durch Leerzeichen getrennt
          werden.  Kommentarzeilen beginnen mit <span class="quote">&#8222;<span class="quote">#</span>&#8220;</span>.
          <code class="filename">/var/yp/securnets</code> könnte
          beispielsweise so aussehen:</p></div><pre class="programlisting"># allow connections from local host -- mandatory
127.0.0.1     255.255.255.255
# allow connections from any host
# on the 192.168.128.0 network
192.168.128.0 255.255.255.0
# allow connections from any host
# between 10.0.0.0 to 10.0.15.255
# this includes the machines in the testlab
10.0.0.0      255.255.240.0</pre><p>Wenn <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> eine Anforderung von einer zu diesen
        Regeln passenden Adresse erhält, wird die Anforderung
        bearbeitet.  Gibt es keine passende Regel, wird die
        Anforderung ignoriert und eine Warnmeldung aufgezeichnet.  Wenn
        <code class="filename">/var/yp/securenets</code> nicht vorhanden ist,
        erlaubt <code class="command">ypserv</code> Verbindungen von jedem Rechner
        aus.</p><p><code class="command">ypserv</code> unterstützt auch das
        <span class="application">TCP-Wrapper</span>-Paket von Wietse Venema.
        Mit diesem Paket kann der Administrator für
        Zugriffskontrollen die Konfigurationsdateien von
        <span class="application">TCP-Wrapper</span> anstelle von
        <code class="filename">/var/yp/securenets</code> verwenden.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Während beide Kontrollmechanismen einige Sicherheit
          gewähren, beispielsweise durch privilegierte Ports, sind
          sie gegenüber <span class="quote">&#8222;<span class="quote">IP spoofing</span>&#8220;</span>-Attacken
          verwundbar.  Jeder NIS-Verkehr sollte daher von Ihrer Firewall
          blockiert werden.</p><p xmlns="http://www.w3.org/1999/xhtml">Server, die <code class="filename">/var/yp/securenets</code>
          verwenden, können Schwierigkeiten bei der Anmeldung von
          Clients haben, die ein veraltetes TCP/IP-Subsystem
          besitzen.  Einige dieser TCP/IP-Subsysteme setzen alle
          Rechnerbits auf Null, wenn Sie einen
          <code class="literal">Broadcast</code> durchführen und/oder
          können die Subnetzmaske nicht auslesen, wenn sie die
	  Broadcast-Adresse berechnen.  Einige Probleme können
	  durch Änderungen der Clientkonfiguration behoben werden.
          Andere hingegen lassen sich nur durch das Entfernen des
          betreffenden Rechners aus dem Netzwerk oder den Verzicht auf
          <code class="filename">/var/yp/securenets</code> umgehen.</p><p xmlns="http://www.w3.org/1999/xhtml">Die Verwendung von <code class="filename">/var/yp/securenets</code>
          auf einem Server mit einem solch veralteten
          TCP/IP-Subsystem ist eine sehr schlechte Idee, die zu
          einem Verlust der NIS-Funktionalität für große
          Teile Ihres Netzwerks führen kann.</p><a xmlns="http://www.w3.org/1999/xhtml" id="idp89800400" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">Die Verwendung der <span class="application">TCP-Wrapper</span>
          verlangsamt die Reaktion Ihres NIS-Servers.  Diese
          zusätzliche Reaktionszeit kann in Clientprogrammen zu
          Timeouts führen.  Dies vor allem in Netzwerken, die
          stark ausgelastet sind, oder nur über langsame NIS-Server
          verfügen.  Wenn ein oder mehrere Ihrer Clientsysteme
          dieses Problem aufweisen, sollten Sie die betreffenden Clients
          in NIS-Slaveserver umwandeln, und diese an sich selbst binden.
        </p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89830992"></a>31.4.6. Bestimmte Benutzer an der Anmeldung hindern</h3></div></div></div><a id="idp89831632" class="indexterm"></a><p>In unserem Labor gibt es den Rechner <code class="systemitem">basie</code>,
        der nur für Mitarbeiter der Fakultät bestimmt ist.
        Wir wollen diesen Rechner nicht aus der NIS-Domäne
        entfernen, obwohl <code class="filename">passwd</code> des
        NIS-Masterservers Benutzerkonten sowohl für
        Fakultätsmitarbeiter als auch für Studenten
        enthält.  Was können wir also tun?</p><p>Es gibt eine Möglichkeit, bestimmte Benutzer an der
        Anmeldung an einem bestimmten Rechner zu hindern, selbst wenn
        diese in der NIS-Datenbank vorhanden sind.  Dazu müssen
        Sie lediglich an diesem Rechner den Eintrag
	<code class="literal">-Benutzername</code> und die richtige Anzahl von
	von Doppelpunkten an das Ende von
        <code class="filename">/etc/master.passwd</code> setzen,
        wobei <em class="replaceable"><code>Benutzername</code></em> der zu
	blockierende Benutzername ist.  Die Zeile mit dem geblockten
	Benutzer muss dabei vor der <code class="literal">+</code> Zeile, für
	zugelassene Benutzer stehen.  Diese Änderung sollte
        bevorzugt durch <code class="command">vipw</code> erledigt werden, da
        <code class="command">vipw</code> Ihre Änderungen an
        <code class="filename">/etc/master.passwd</code> auf Plausibilität
        überprüft und nach erfolgter Änderung die
        Passwortdatenbank automatisch aktualisiert.  Um also den
        Benutzer <code class="systemitem">bill</code> an der Anmeldung am Rechner
        <code class="systemitem">basie</code> zu hindern, gehen wir wie folgt vor:
      </p><pre class="screen">basie<code class="prompt">#</code> <strong class="userinput"><code>vipw</code></strong>
<strong class="userinput"><code>[add -bill to the end, exit]</code></strong>
vipw: rebuilding the database...
vipw: done

basie<code class="prompt">#</code> <strong class="userinput"><code>cat /etc/master.passwd</code></strong>

root:[password]:0:0::0:0:The super-user:/root:/bin/csh
toor:[password]:0:0::0:0:The other super-user:/root:/bin/sh
daemon:*:1:1::0:0:Owner of many system processes:/root:/sbin/nologin
operator:*:2:5::0:0:System &amp;:/:/sbin/nologin
bin:*:3:7::0:0:Binaries Commands and Source,,,:/:/sbin/nologin
tty:*:4:65533::0:0:Tty Sandbox:/:/sbin/nologin
kmem:*:5:65533::0:0:KMem Sandbox:/:/sbin/nologin
games:*:7:13::0:0:Games pseudo-user:/usr/games:/sbin/nologin
news:*:8:8::0:0:News Subsystem:/:/sbin/nologin
man:*:9:9::0:0:Mister Man Pages:/usr/share/man:/sbin/nologin
bind:*:53:53::0:0:Bind Sandbox:/:/sbin/nologin
uucp:*:66:66::0:0:UUCP pseudo-user:/var/spool/uucppublic:/usr/libexec/uucp/uucico
xten:*:67:67::0:0:X-10 daemon:/usr/local/xten:/sbin/nologin
pop:*:68:6::0:0:Post Office Owner:/nonexistent:/sbin/nologin
nobody:*:65534:65534::0:0:Unprivileged user:/nonexistent:/sbin/nologin
-bill:::::::::
+:::::::::

basie<code class="prompt">#</code></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="netgroups"></a>31.4.7. Netzgruppen verwenden</h3></div><div><span class="authorgroup">Beigetragen von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Udo</span> <span class="surname">Erdelhoff</span></span>. </span></div></div></div><a id="idp89843280" class="indexterm"></a><p>Die im letzten Abschnitt beschriebene Methode eignet sich
        besonders, wenn Sie spezielle Regeln für wenige
        Benutzer oder wenige Rechner benötigen.  In großen
        Netzwerken werden Sie allerdings
        <span class="emphasis"><em>mit Sicherheit</em></span> vergessen, einige Benutzer
        von der Anmeldung an bestimmten Rechnern auszuschließen.
        Oder Sie werden gezwungen sein, jeden Rechner einzeln zu
        konfigurieren.  Dadurch verlieren Sie aber den Hauptvorteil von
        NIS, die <span class="emphasis"><em>zentrale</em></span> Verwaltung.</p><p>Die Lösung für dieses Problem sind
        <span class="emphasis"><em>Netzgruppen</em></span>.  Ihre Aufgabe und Bedeutung
        ist vergleichbar mit normalen, von UNIX-Dateisystemen
        verwendeten Gruppen.  Die Hauptunterschiede sind das Fehlen
        einer numerischen ID sowie die Möglichkeit, Netzgruppen
        zu definieren, die sowohl Benutzer als auch andere Netzgruppen
        enthalten.</p><p>Netzgruppen wurden entwickelt, um große, komplexe
        Netzwerke mit Hunderten Benutzern und Rechnern zu verwalten.
        Sie sind also von Vorteil, wenn Sie von dieser Situation
        betroffen sind.  Andererseits ist es dadurch beinahe
        unmöglich, Netzgruppen mit einfachen Beispielen zu
        erklären.  Das hier verwendete Beispiel veranschaulicht
        dieses Problem.</p><p>Nehmen wir an, dass Ihre erfolgreiche Einführung von
        NIS die Aufmerksamkeit Ihrer Vorgesetzten geweckt hat.  Ihre
        nächste Aufgabe besteht nun darin, Ihre NIS-Domäne
        um zusätzliche Rechner zu erweitern.  Die folgenden
        Tabellen enthalten die neuen Benutzer und Rechner inklusive
        einer kurzen Beschreibung.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Benutzername(n)</th><th>Beschreibung</th></tr></thead><tbody><tr><td><code class="systemitem">alpha</code>,
                <code class="systemitem">beta</code></td><td>Beschäftigte der IT-Abteilung</td></tr><tr><td><code class="systemitem">charlie</code>,
                 <code class="systemitem">delta</code></td><td>Die neuen Lehrlinge der IT-Abteilung</td></tr><tr><td><code class="systemitem">echo</code>,
                <code class="systemitem">foxtrott</code>,
                <code class="systemitem">golf</code>, ...</td><td>Normale Mitarbeiter</td></tr><tr><td><code class="systemitem">able</code>,
                <code class="systemitem">baker</code>, ...</td><td>Externe Mitarbeiter</td></tr></tbody></table></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Rechnername(n)</th><th>Beschreibung</th></tr></thead><tbody><tr><td><code class="systemitem">war</code>, <code class="systemitem">death</code>,
                <code class="systemitem">famine</code>, <code class="systemitem">pollution</code></td><td>Ihre wichtigsten Server.  Nur IT-Fachleute
                dürfen sich an diesen Rechnern anmelden.</td></tr><tr><td><code class="systemitem">pride</code>, <code class="systemitem">greed</code>,
                <code class="systemitem">envy</code>, <code class="systemitem">wrath</code>,
                <code class="systemitem">lust</code>, <code class="systemitem">sloth</code></td><td>Weniger wichtige Server.  Alle Mitarbeiter der
                IT-Abteilung dürfen sich auf diesen Rechnern
                anmelden.</td></tr><tr><td><code class="systemitem">one</code>, <code class="systemitem">two</code>,
                <code class="systemitem">three</code>, <code class="systemitem">four</code>, ...</td><td>Gewöhnliche Arbeitsrechner.  Nur die
                <span class="emphasis"><em>wirklichen</em></span> Mitarbeiter dürfen
                diese Rechner verwenden.</td></tr><tr><td><code class="systemitem">trashcan</code></td><td>Ein sehr alter Rechner ohne kritische Daten. Sogar
                externe Mitarbeiter dürfen diesen Rechner
                verwenden.</td></tr></tbody></table></div><p>Wollten Sie diese Einschränkungen umsetzen, indem Sie
        jeden Benutzer einzeln blockieren, müssten Sie auf jedem
        System für jeden Benutzer eine entsprechende Zeile in
        <code class="filename">passwd</code> einfügen.  Wenn Sie nur einen
        Eintrag vergessen, haben Sie ein Problem.  Es mag noch angehen,
        dies während der ersten Installation zu erledigen, im
        täglichen Betrieb werden Sie allerdings
        <span class="emphasis"><em>mit Sicherheit</em></span> einmal vergessen, die
        entsprechenden Einträge anzulegen.  Vergessen Sie nicht:
        Murphy war Optimist.</p><p>Die Verwendung von Netzgruppen hat in dieser Situation
        mehrere Vorteile.  Sie müssen nicht jeden Benutzer einzeln
        verwalten;  weisen Sie stattdessen den Benutzer einer Netzgruppe
        zu und erlauben oder verbieten Sie allen Mitglieder dieser
        Gruppe die Anmeldung an einem Server.  Wenn Sie einen neuen
        Rechner hinzufügen, müssen Sie
        Zugangsbeschränkungen nur für die Netzgruppen
        festlegen.  Legen Sie einen neuen Benutzer an, müssen Sie
        ihn nur einer oder mehrere Netzgruppen zuweisen.  Diese
        Veränderungen sind voneinander unabhängig; Anweisungen
        der Form <span class="quote">&#8222;<span class="quote">für diese Kombination aus Benutzer und
        Rechner mache Folgendes ...</span>&#8220;</span> sind nicht mehr nötig.
        Wenn Sie die Einrichtung von NIS sorgfältig geplant haben,
        müssen Sie nur noch eine zentrale Konfigurationsdatei
        bearbeiten, um den Zugriff auf bestimmte Rechner zu erlauben
        oder zu verbieten.</p><p>Der erste Schritt ist die Initialisierung der NIS-Maps
        der Netzgruppe.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypinit&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypinit</span>(8)</span></a> kann dies unter FreeBSD nicht
        automatisch durchführen.  Sind die Maps aber erst einmal
        erzeugt, werden sie jedoch von NIS problemlos unterstützt.
        Um eine leere Map zu erzeugen, geben Sie Folgendes ein:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>vi /var/yp/netgroup</code></strong></pre><p>Danach legen Sie die Einträge an.  Für unser
        Beispiel benötigen wir mindestens vier Netzgruppen:
        IT-Beschäftige, IT-Lehrlinge, normale Beschäftigte
        sowie Externe.</p><pre class="programlisting">IT_EMP  (,alpha,test-domain)    (,beta,test-domain)
IT_APP  (,charlie,test-domain)  (,delta,test-domain)
USERS   (,echo,test-domain)     (,foxtrott,test-domain) \
        (,golf,test-domain)
INTERNS (,able,test-domain)     (,baker,test-domain)</pre><p>Bei <code class="literal">IT_EMP</code>, <code class="literal">IT_APP</code>
        usw. handelt es sich um Netzgruppennamen.  In den Klammern
        werden diesen Netzgruppen jeweils ein oder mehrere
        Benutzerkonten hinzugefügt.  Die drei Felder in der
        Klammer haben folgende Bedeutung:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Der Name des Rechners, auf dem die folgenden Werte
            gültig sind.  Legen Sie keinen Rechnernamen fest, ist
            der Eintrag auf allen Rechnern gültig. Dadurch
            gehen Sie vielen Problemen aus dem Weg.</p></li><li class="listitem"><p>Der Name des Benutzerkontos, der zu dieser Netzgruppe
            gehört.</p></li><li class="listitem"><p>Die NIS-Domäne für das Benutzerkonto.  Sie
            können Benutzerkonten von anderen NIS-Domänen in
            Ihre Netzgruppe importieren, wenn Sie mehrere
            NIS-Domänen verwalten.</p></li></ol></div><p>Jedes Feld kann Wildcards enthalten.  Die Einzelheiten
	entnehmen Sie bitte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netgroup&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">netgroup</span>(5)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp89890640" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">Netzgruppennamen sollten nicht länger als 8 Zeichen
          sein, vor allem dann, wenn Sie Rechner mit verschiedenen
          Betriebssystemen in Ihrer NIS-Domäne haben.  Es wird
          zwischen Groß- und Kleinschreibung unterschieden.
          Die Verwendung von Großbuchstaben für
          Netzgruppennamen ermöglicht eine leichte Unterscheidung
          zwischen Benutzern, Rechnern und Netzgruppen.</p><p xmlns="http://www.w3.org/1999/xhtml">Einige NIS-Clients (dies gilt nicht für FreeBSD)
          können keine Netzgruppen mit einer großen Anzahl
          von Einträgen verwalten.  Einige ältere Versionen
	  von <span class="trademark">SunOS</span>&#8482; haben beispielsweise Probleme, wenn Netzgruppen
	  mehr als fünfzehn <span class="emphasis"><em>Einträge</em></span>
          enthalten.  Sie können dieses Problem umgehen, indem Sie
          mehrere Subnetzgruppen mit weniger als fünfzehn Benutzern
          anlegen und diese Subnetzgruppen wiederum in einer Netzgruppe
          zusammenfassen:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">BIGGRP1  (,joe1,domain)  (,joe2,domain)  (,joe3,domain) [...]
BIGGRP2  (,joe16,domain)  (,joe17,domain) [...]
BIGGRP3  (,joe31,domain)  (,joe32,domain)
BIGGROUP  BIGGRP1 BIGGRP2 BIGGRP3</pre><p xmlns="http://www.w3.org/1999/xhtml">Sie können diesen Vorgang wiederholen, wenn Sie mehr
          als 255 Benutzer in einer einzigen Netzgruppe benötigen.
        </p></div><p>Das Aktivieren und Verteilen Ihre neuen NIS-Map ist
        einfach:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
ellington<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong></pre><p>Dadurch werden die NIS-Maps <code class="filename">netgroup</code>,
        <code class="filename">netgroup.byhost</code> und
        <code class="filename">netgroup.byuser</code> erzeugt.  Prüfen Sie
        die Verfügbarkeit Ihrer neuen NIS-Maps mit <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypcat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypcat</span>(1)</span></a>.
      </p><pre class="screen">ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup</code></strong>
ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup.byhost</code></strong>
ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup.byuser</code></strong></pre><p>Die Ausgabe des ersten Befehls gibt den Inhalt von
        <code class="filename">/var/yp/netgroup</code> wieder.  Der zweite Befehl
        erzeugt nur dann eine Ausgabe, wenn Sie rechnerspezifische
        Netzgruppen erzeugt haben.  Der dritte Befehl gibt die
        Netzgruppen nach Benutzern sortiert aus.</p><p>Die Einrichtung der Clients ist einfach.  Sie müssen
        lediglich auf dem Server <code class="systemitem">war</code>
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a> aufrufen und die Zeile</p><pre class="programlisting">+:::::::::</pre><p>durch</p><pre class="programlisting">+@IT_EMP:::::::::</pre><p>ersetzen.</p><p>Ab sofort werden nur noch die Daten der in der Netzgruppe
        <code class="literal">IT_EMP</code> vorhandenen Benutzer in die
        Passwortdatenbank von <code class="systemitem">war</code> importiert.
        Nur diese Benutzer dürfen sich am Server anmelden.</p><p>Unglücklicherweise gilt diese Einschränkung auch
        für die <code class="literal">~</code>-Funktion der Shell und
        für alle Routinen, die auf Benutzernamen und numerische
        Benutzer-IDs zugreifen.  Oder anders formuliert,
        <code class="command">cd ~user</code> ist nicht
        möglich, <code class="command">ls -l</code> zeigt die numerische
        Benutzer-ID statt dem Benutzernamen und
        <code class="command">find . -user joe -print</code> erzeugt die
        Fehlermeldung <span class="errorname">No such user</span>.  Um dieses
        Problem zu beheben, müssen Sie alle Benutzereinträge
        importieren, <span class="emphasis"><em>ohne ihnen jedoch zu erlauben, sich an
        Ihrem Server anzumelden</em></span>.</p><p>Dazu fügen Sie eine weitere Zeile in
        <code class="filename">/etc/master.passwd</code> ein.  Diese Zeile sollte
        ähnlich der folgenden aussehen:</p><p><code class="literal">+:::::::::/sbin/nologin</code>, was in etwa
        <span class="quote">&#8222;<span class="quote">Importiere alle Einträge, aber ersetze die Shell in
        den importierten Einträgen durch
        <code class="filename">/sbin/nologin</code></span>&#8220;</span> entspricht.  Sie
        können jedes Feld dieses Eintrages ersetzen, indem Sie
        einen Standardwert in <code class="filename">/etc/master.passwd</code>
        eintragen.</p><div xmlns="" class="warning"><h3 class="admontitle">Warnung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Stellen Sie sicher, dass die Zeile
        <code class="literal">+:::::::::/sbin/nologin</code>
        <span class="emphasis"><em>nach</em></span> der Zeile
        <code class="literal">+@IT_EMP:::::::::</code> eingetragen ist.  Sonst
        haben alle via NIS importierten Benutzerkonten
        <code class="filename">/sbin/nologin</code> als Loginshell.</p></div><p>Danach müssen Sie nur mehr eine einzige NIS-Map
        ändern, wenn ein neuer Mitarbeiter berücksichtigt
        werden muss.  Für weniger wichtige Server gehen Sie analog
        vor, indem Sie den alten Eintrag <code class="literal">+:::::::::</code>
        in den lokalen Versionen von
        <code class="filename">/etc/master.passwd</code> durch folgende
        Einträge ersetzen:</p><pre class="programlisting">+@IT_EMP:::::::::
+@IT_APP:::::::::
+:::::::::/sbin/nologin</pre><p>Die entsprechenden Zeilen für normale Arbeitsplätze
        lauten:</p><pre class="programlisting">+@IT_EMP:::::::::
+@USERS:::::::::
+:::::::::/sbin/nologin</pre><p>Ab jetzt wäre alles wunderbar, allerdings ändert
        sich kurz darauf die Firmenpolitik:  Die IT-Abteilung beginnt
        damit, externe Mitarbeiter zu beschäftigen.  Externe
        dürfen sich an normalen Arbeitsplätzen sowie an den
        weniger wichtigen Servern anmelden.  Die IT-Lehrlinge
        dürfen sich nun auch an den Hauptservern anmelden.  Sie
        legen also die neue Netzgruppe <code class="literal">IT_INTERN</code> an,
        weisen Ihr die neuen IT-Externen als Benutzer zu und beginnen
        damit, die Konfiguration auf jedem einzelnen Rechner zu
        ändern ...  Halt.  Sie haben gerade die alte Regel
        <span class="quote">&#8222;<span class="quote">Fehler in der zentralisierten Planung führen zu
        globaler Verwirrung.</span>&#8220;</span> bestätigt.</p><p>Da NIS in der Lage ist, Netzgruppen aus anderen Netzgruppen
        zu bilden, lassen sich solche Situationen leicht vermeiden.
        Eine Möglichkeit ist die Erzeugung rollenbasierter
        Netzgruppen.  Sie könnten eine Netzgruppe
        <code class="literal">BIGSRV</code> erzeugen, um den Zugang zu
        den wichtigsten Servern zu beschränken, eine weitere
        Gruppe <code class="literal">SMALLSRV</code> für die weniger
        wichtigen Server und eine dritte Netzgruppe
        <code class="literal">USERBOX</code> für die normalen
        Arbeitsplatzrechner.  Jede dieser Netzgruppen enthält die
        Netzgruppen, die sich auf diesen Rechnern anmelden dürfen.
        Die Einträge der Netzgruppen in der NIS-Map sollten
        ähnlich den folgenden aussehen:</p><pre class="programlisting">BIGSRV    IT_EMP  IT_APP
SMALLSRV  IT_EMP  IT_APP  ITINTERN
USERBOX   IT_EMP  ITINTERN USERS</pre><p>Diese Methode funktioniert besonders gut, wenn Sie
        Rechner in Gruppen mit identischen Beschränkungen einteilen
        können.  Unglücklicherweise ist dies die Ausnahme und
        nicht die Regel.  Meistens werden Sie die Möglichkeit zur
	rechnerspezischen Zugangsbeschränkung benötigen.
      </p><p>Rechnerspezifische Netzgruppen sind die zweite
        Möglichkeit, um mit den oben beschriebenen Änderungen
        umzugehen.  In diesem Szenario enthält
        <code class="filename">/etc/master.passwd</code> auf jedem Rechner zwei
        mit <span class="quote">&#8222;<span class="quote">+</span>&#8220;</span> beginnende Zeilen.  Die erste Zeile
        legt die Netzgruppe mit den Benutzern fest, die sich auf diesem
        Rechner anmelden dürfen.  Die zweite Zeile weist allen
        anderen Benutzern <code class="filename">/sbin/nologin</code> als Shell
        zu.  Verwenden Sie auch hier (analog zu den Netzgruppen)
        Großbuchstaben für die Rechnernamen.  Die Zeilen
        sollten also ähnlich den folgenden aussehen:</p><pre class="programlisting">+@<em class="replaceable"><code>BOXNAME</code></em>:::::::::
+:::::::::/sbin/nologin</pre><p>Wenn Sie dies für alle Rechner erledigt haben, werden
        Sie die lokalen Versionen von
        <code class="filename">/etc/master.passwd</code> nie mehr verändern
        müssen.  Alle weiteren Änderungen geschehen über
        die NIS-Maps.  Nachfolgend ein Beispiel für eine
        mögliche Netzgruppen-Map, die durch einige Besonderheiten
        erweitert wurde:</p><pre class="programlisting"># Define groups of users first
IT_EMP    (,alpha,test-domain)    (,beta,test-domain)
IT_APP    (,charlie,test-domain)  (,delta,test-domain)
DEPT1     (,echo,test-domain)     (,foxtrott,test-domain)
DEPT2     (,golf,test-domain)     (,hotel,test-domain)
DEPT3     (,india,test-domain)    (,juliet,test-domain)
ITINTERN  (,kilo,test-domain)     (,lima,test-domain)
D_INTERNS (,able,test-domain)     (,baker,test-domain)
#
# Now, define some groups based on roles
USERS     DEPT1   DEPT2     DEPT3
BIGSRV    IT_EMP  IT_APP
SMALLSRV  IT_EMP  IT_APP    ITINTERN
USERBOX   IT_EMP  ITINTERN  USERS
#
# And a groups for a special tasks
# Allow echo and golf to access our anti-virus-machine
SECURITY  IT_EMP  (,echo,test-domain)  (,golf,test-domain)
#
# machine-based netgroups
# Our main servers
WAR       BIGSRV
FAMINE    BIGSRV
# User india needs access to this server
POLLUTION  BIGSRV  (,india,test-domain)
#
# This one is really important and needs more access restrictions
DEATH     IT_EMP
#
# The anti-virus-machine mentioned above
ONE       SECURITY
#
# Restrict a machine to a single user
TWO       (,hotel,test-domain)
# [...more groups to follow]
      </pre><p>Wenn Sie eine Datenbank verwenden, um Ihre Benutzerkonten zu
        verwalten, sollten Sie den ersten Teil der NIS-Map mit Ihren
        Datenbanktools erstellen können.  Auf diese Weise haben
        neue Benutzer automatisch Zugriff auf die Rechner.</p><p>Eine letzte Warnung:  Es ist nicht immer ratsam,
        rechnerbasierte Netzgruppen zu verwenden.  Wenn Sie Dutzende
        oder gar Hunderte identische Rechner einrichten müssen,
        sollten Sie rollenbasierte Netzgruppen verwenden, um die
        Grösse der NISs-Maps in Grenzen zu halten.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89935952"></a>31.4.8. Weitere wichtige Punkte</h3></div></div></div><p>Nachdem Sie Ihre NIS-Umgebung eingerichtet haben,
        müssen Sie einige Dinge anders als bisher erledigen.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Jedes Mal, wenn Sie einen neuen Benutzer anlegen wollen,
            tun Sie dies <span class="emphasis"><em>ausschließlich</em></span> am
            NIS-Masterserver.  Außerdem
            <span class="emphasis"><em>müssen</em></span> Sie anschließend die
            NIS-Maps neu erzeugen.  Wenn Sie diesen Punkt vergessen,
            kann sich der neue Benutzer <span class="emphasis"><em>nur</em></span> am
            NIS-Masterserver anmelden.  Wenn Sie also den neuen Benutzer
	    <code class="systemitem">jsmith</code> anlegen, gehen Sie
	    folgerndermassen vor:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw useradd jsmith</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make test-domain</code></strong></pre><p>Statt <code class="command">pw useradd jsmith</code> könnten
            Sie auch <code class="command">adduser jsmith</code> verwenden.</p></li><li class="listitem"><p><span class="emphasis"><em>Tragen Sie die Administratorkonten nicht
            in die NIS-Maps ein</em></span>.  Administratorkonten und
            Passwörter dürfen nicht auf Rechnern verbreitet
            werden, auf denen sich Benutzer anmelden können, die
            auf diese Konten keine Zugriff haben sollen.</p></li><li class="listitem"><p><span class="emphasis"><em>Sichern Sie die NIS-Master- und Slaveserver
            und minimieren Sie die Ausfallzeiten</em></span>.  Wenn
            diese Rechner gehackt oder einfach nur ausgeschaltet werden,
            haben viele Leute keinen Netzwerkzugriff mehr.</p><p>Dies ist die größte Schwäche
            jeder zentralen Verwaltung.  Wenn Sie Ihre NIS-Server nicht
            schützen, werden Sie viele verärgerte Anwender
            haben.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89946192"></a>31.4.9. Kompatibilität zu NIS v1</h3></div></div></div><a id="idp89946832" class="indexterm"></a><p><span class="application">ypserv</span> unterstützt NIS v1
        unter FreeBSD nur eingeschränkt.  Die NIS-Implementierung
        von FreeBSD verwendet nur NIS v2, andere Implementierungen
        unterstützen aus Gründen der
        Abwärtskompatibilität mit älteren Systemen auch
        NIS v1.  Die mit diesen Systemen gelieferten
        <span class="application">ypbind</span>-Daemonen versuchen, sich an
        einen NIS-v1-Server zu binden (Dies selbst dann, wenn sie ihn
	nie benötigen.  Außerdem versuchen Sie auch dann,
	einen v1-Server zu erreichen, wenn Sie zuvor eine Antwort von
	einem v2-Server erhalten.).  Während normale Clientaufrufe
        unter FreeBSD unterstützt werden, sind Anforderungen zum
        Transfer von v1-Maps nicht möglich.  Daher kann FreeBSD
        nicht als Client oder Server verwendet werden, wenn ein
        NIS-Server vorhanden ist, der nur NIS v1 unterstützt.
        Glücklicherweise sollte es heute keine Server mehr geben,
        die nur NIS v1 unterstützen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="nis-server-is-client"></a>31.4.10. NIS-Server, die auch als NIS-Clients arbeiten</h3></div></div></div><p>Wenn Sie <span class="application">ypserv</span> in einer
        Multi-Serverdomäne verwenden, in der NIS-Server
        gleichzeitig als NIS-Clients arbeiten, ist es eine gute Idee,
        diese Server zu zwingen, sich an sich selbst zu binden.  Damit
        wird verhindert, dass Bindeanforderungen gesendet werden und
        sich die Server gegenseitig binden.  Sonst könnten seltsame
        Fehler auftreten, wenn ein Server ausfällt, auf den andere
        Server angewiesen sind.  Letztlich werden alle Clients einen
        Timeout melden, und versuchen, sich an andere Server zu binden.
        Die dadurch entstehende Verzögerung kann beträchtlich
        sein.  Außerdem kann der Fehler erneut auftreten, da sich
        die Server wiederum aneinander binden könnten.</p><p>Sie können einen Rechner durch die Verwendung von
        <code class="command">ypbind</code> sowie der Option <code class="option">-S</code>
        zwingen, sich an einen bestimmten Server zu binden.  Um diesen
        Vorgang zu automatisieren, können Sie folgende Zeilen in
        <code class="filename">/etc/rc.conf</code> einfügen:</p><pre class="programlisting">nis_client_enable="YES"	# run client stuff as well
nis_client_flags="-S <em class="replaceable"><code>NIS domain</code></em>,<em class="replaceable"><code>server</code></em>"</pre><p>Lesen Sie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypbind&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypbind</span>(8)</span></a>, wenn Sie weitere Informationen
        benötigen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89958992"></a>31.4.11. Passwortformate</h3></div></div></div><a id="idp89959632" class="indexterm"></a><p>Unterschiedliche Passwortformate sind das Hauptproblem,
	das beim Einrichten eines NIS-Servers auftreten kann.
	Wenn der NIS-Server mit DES verschlüsselte Passwörter
	verwendet, werden nur Clients unterstützt, die ebenfalls
	DES benutzen.  Wenn sich auf Ihrem Netzwerk beispielsweise
	<span class="trademark">Solaris</span>&#8482; NIS-Clients befinden, müssen die Passwörter
	mit DES verschlüsselt werden.</p><p>Welches Format die Server und Clients verwenden,
	steht in <code class="filename">/etc/login.conf</code>.  Wenn ein
	System Passwörter mit DES verschlüsselt,
	enthält die <code class="literal">default</code>-Klasse einen
	Eintrag wie den folgenden:</p><pre class="programlisting">default:\
	:passwd_format=des:\
	:copyright=/etc/COPYRIGHT:\
	[weitere Einträge]</pre><p>Mögliche Werte für
	<code class="literal">passwd_format</code> sind unter anderem
	<code class="literal">blf</code> und <code class="literal">md5</code> (mit
	Blowfish und MD5 verschlüsselte Passwörter).</p><p>Wenn die Datei <code class="filename">/etc/login.conf</code>
	geändert wird, muss die Login-Capability Datenbank
	neu erstellt werden.  Geben Sie dazu als
	<code class="systemitem">root</code> den folgenden Befehl ein:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cap_mkdb /etc/login.conf</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Das Format der schon in
	  <code class="filename">/etc/master.passwd</code> befindlichen
	  Passwörter wird erst aktualisiert, wenn ein Benutzer
	  sein Passwort ändert, <span class="emphasis"><em>nachdem</em></span>
	  die Datenbank neu erstellt wurde.</p></div><p>Damit die Passwörter auch im gewählten
	Format abgespeichert werden, muss mit
	<code class="literal">crypt_default</code> in der Datei
	<code class="filename">/etc/auth.conf</code> die richtige
	Priorität der Formate eingestellt werden.  Das
	gewählte Format sollte als Erstes in der Liste
	stehen.  Sollen die Passwörter mit DES verschlüsselt
	werden, verwenden Sie den folgenden Eintrag:</p><pre class="programlisting">crypt_default	=	des blf md5</pre><p>Wenn Sie alle FreeBSD NIS-Server und NIS-Clients entsprechend
	den obigen Schritten eingestellt haben, wird im ganzen
	Netzwerk dasselbe Passwortformat verwendet.  Falls Sie
	Probleme mit der Authentifizierung eines NIS-Clients
	haben, kontrollieren Sie die verwendeten Passwortformate.
	In einer heterogenen Umgebung werden Sie DES benutzen
	müssen, da dies der meist unterstützte Standard
	ist.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-nfs.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="network-dhcp.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">31.3. NFS &#8211; Network File System </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 31.5. Automatische Netzwerkkonfiguration mit DHCP</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>