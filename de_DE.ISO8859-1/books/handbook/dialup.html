<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>28.4. Einwählverbindungen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="serialcomms.html" title="Kapitel 28. Serielle Datenübertragung" /><link rel="prev" href="term.html" title="28.3. Terminals" /><link rel="next" href="dialout.html" title="28.5. Verbindungen nach Außen" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">28.4. Einwählverbindungen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="term.html">Zurück</a> </td><th width="60%" align="center">Kapitel 28. Serielle Datenübertragung</th><td width="20%" align="right"> <a accesskey="n" href="dialout.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dialup"></a>28.4. Einwählverbindungen</h2></div><div><span class="authorgroup">Beigetragen von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Guy</span> <span class="surname">Helmer</span></span>. </span></div><div><span class="authorgroup">Mit Anmerkungen von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Sean</span> <span class="surname">Kelly</span></span>. </span></div></div></div><div xmlns="" class="warning"><h3 class="admontitle">Warnung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Mit FreeBSD 8.0 wurden die Gerätedateien für
	serielle Ports von
	<code class="filename">/dev/ttydN</code> in
	<code class="filename">/dev/ttyuN</code>
	umbenannt.  Setzen Sie noch FreeBSD 7.X ein, müssen
	Sie die Befehle in den folgenden Abschnitten entsprechend
	anpassen.</p></div><a id="idp86736464" class="indexterm"></a><p>Das Einrichten von Einwählverbindungen ähnelt dem
      Anschließen von Terminals, nur dass Sie anstelle eines
      Terminals ein Modem verwenden.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86737360"></a>28.4.1. Externe und interne Modems</h3></div></div></div><p>Externe Modems sind für Einwählverbindungen besser
	  geeignet, da sie die Konfiguration in nicht flüchtigem RAM
	  speichern können.  Zudem verfügen Sie über
	  Leuchtanzeigen, die den Status wichtiger RS-232 Signale
	  anzeigen und unter Umständen Besucher beeindrucken
	  können.</p><p>Interne Modems verfügen normalerweise nicht über
	  nicht flüchtiges RAM und lassen sich meist nur über
	  DIP-Schalter konfigurieren.  Selbst wenn ein internes Modem
	  Leuchtanzeigen besitzt, sind diese meist schwer einzusehen, wenn
	  das Modem eingebaut ist.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86738768"></a>28.4.1.1. Modems und Kabel</h4></div></div></div><a id="idp86739408" class="indexterm"></a><p>Mit einem externen Modem müssen Sie das richtige Kabel
	  benutzen:  Ein Standard RS-232C Kabel, bei dem die folgenden
	  Signale miteinander verbunden sind, sollte ausreichen:</p><div class="table"><a id="serialcomms-signal-names"></a><div class="table-title">Tabelle 28.4. Signalnamen</div><div class="table-contents"><table summary="Signalnamen" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th align="left">Abkürzung</th><th align="left">Bedeutung</th></tr></thead><tbody><tr><td><acronym class="acronym">RD</acronym></td><td>Received Data</td></tr><tr><td><acronym class="acronym">TD</acronym></td><td>Transmitted Data</td></tr><tr><td><acronym class="acronym">DTR</acronym></td><td>Data Terminal Ready</td></tr><tr><td><acronym class="acronym">DSR</acronym></td><td>Data Set Ready</td></tr><tr><td><acronym class="acronym">DCD</acronym></td><td>Data Carrier Detect (dadurch erkennt RS-232
                    das Signal <span class="emphasis"><em>Received Line</em></span>)</td></tr><tr><td><acronym class="acronym">SG</acronym></td><td>Signal Ground</td></tr><tr><td><acronym class="acronym">RTS</acronym></td><td>Request to Send</td></tr><tr><td><acronym class="acronym">CTS</acronym></td><td>Clear to Send</td></tr></tbody></table></div></div><br class="table-break" /><p>Ab Geschwindigkeiten von 2400 bps benötigt FreeBSD die
	  Signale <acronym class="acronym">RTS</acronym> und <acronym class="acronym">CTS</acronym>
	  für die Flusssteuerung.  Das Signal
	  <acronym class="acronym">CD</acronym> zeigt an, ob ein Träger vorliegt, das
	  heißt ob die Verbindung aufgebaut ist oder beendet wurde.
	  <acronym class="acronym">DTR</acronym> zeigt an, dass das Gerät
	  betriebsbereit ist.  Es gibt einige Kabel, bei denen nicht alle
	  nötigen Signale verbunden sind.  Wenn Sie Probleme der Art
	  haben, dass zum Beispiel die Sitzung nicht beendet wird,
	  obwohl die Verbindung beendet wurde, kann das an einem solchen
	  Kabel liegen.</p><p>Wie andere <span class="trademark">UNIX</span>® Betriebssysteme auch, benutzt FreeBSD
	  Hardwaresignale, um festzustellen, ob ein Anruf
	  beantwortet wurde, eine Verbindung beendet wurde, oder um die
	  Verbindung zu schließen und das Modem zurückzusetzen.
	  FreeBSD vermeidet es, dem Modem Kommandos zu senden, oder den
	  Statusreport des Modems abzufragen.  Falls Sie ein Benutzer
	  von PC-basierenden Bulletin Board Systemen sind, mag Sie das
	  verwundern.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86811472"></a>28.4.2. Schnittstellenbausteine</h3></div></div></div><p>FreeBSD unterstützt EIA RS-232C (CCITT V.24) serielle
	  Schnittstellen, die auf den NS8250, NS16450, NS16550 oder NS16550A
	  Bausteinen basieren.  Die Bausteine der Serie 16550 verfügen
	  über einen 16 Byte großen Puffer, der als FIFO angelegt
	  ist.  Wegen Fehler in der FIFO-Logik kann der Puffer in einem 16550
	  Baustein allerdings nicht genutzt werden, das heißt der
	  Baustein muss als 16450 betrieben werden.  Bei allen
	  Bausteinen ohne Puffer und dem 16550 Baustein muss jedes
	  Byte einzeln von dem Betriebssystem verarbeitet werden, was
	  Fehler bei hohen Geschwindigkeiten oder großer Systemlast
	  erzeugt.  Es sollten daher nach Möglichkeit serielle
	  Schnittstellen, die auf 16550A Bausteinen basieren, eingesetzt
	  werden.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86812624"></a>28.4.3. Überblick</h3></div></div></div><a id="idp86813264" class="indexterm"></a><p>Wie bei Terminals auch, startet <code class="command">init</code> für
	jede serielle Schnittstelle, die eine Einwählverbindung zur
	Verfügung stellt, einen <code class="command">getty</code> Prozess.
	Wenn das Modem beispielsweise an <code class="filename">/dev/ttyu0</code>
	angeschlossen ist, sollte in der Ausgabe von <code class="command">ps
	  ax</code> eine Zeile wie die folgende erscheinen:</p><pre class="screen"> 4850 ??  I      0:00.09 /usr/libexec/getty V19200 ttyu0</pre><p>Wenn sich ein Benutzer einwählt und die Verbindung
        aufgebaut ist, zeigt das Modem dies durch das <acronym class="acronym">CD</acronym>
	Signal (Carrier Detect) an.  Der Kernel merkt, dass ein Signal
	anliegt und vollendet das Öffnen der Schnittstelle durch
	<code class="command">getty</code>.  Dann sendet <code class="command">getty</code> das
	Anmeldeprompt mit der ersten für die Verbindung vereinbarten
	Geschwindigkeit und wartet auf eine Antwort.  Wenn die Antwort
	unverständlich ist, weil zum Beispiel die Geschwindigkeit des
	Modems von <code class="command">getty</code>s Geschwindigkeit abweicht,
	versucht <code class="command">getty</code> die Geschwindigkeit solange
	anzupassen, bis es eine verständliche Antwort
	erhält.</p><a id="idp86818384" class="indexterm"></a><p><code class="command">getty</code> führt, nachdem der Benutzer seinen
	Namen eingegeben hat, <code class="filename">/usr/bin/login</code> aus,
	welches das Passwort abfragt und danach die Shell des
	Benutzers startet.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86841168"></a>28.4.4. Konfigurationsdateien</h3></div></div></div><p>Drei Konfigurationsdateien in <code class="filename">/etc</code>
        steuern, ob eine Einwahl in Ihr FreeBSD-System möglich ist.
	Die erste, <code class="filename">/etc/gettytab</code>, konfiguriert den
	<code class="filename">/usr/libexec/getty</code> Dæmon.  In
	<code class="filename">/etc/ttys</code> wird festgelegt, auf welchen
	Schnittstellen <code class="filename">/sbin/init</code> einen
	<code class="command">getty</code> Prozess startet.  Schließlich
	haben Sie in <code class="filename">/etc/rc.d/serial</code> die
	Möglichkeit, Schnittstellen zu initialisieren.</p><p>Es gibt zwei Ansichten darüber, wie Modems für
        Einwählverbindungen unter <span class="trademark">UNIX</span>® zu konfigurieren sind.  Zum
	einen kann die Geschwindigkeit zwischen dem Modem und dem Computer
	fest eingestellt werden.  Sie ist damit unabhängig von der
	Geschwindigkeit, mit der sich der entfernte Benutzer einwählt.
	Dies hat den Vorteil, dass der entfernte Benutzer das
	Anmeldeprompt sofort bekommt.  Der Nachteil bei diesem Verfahren
	ist, dass das System die tatsächliche Geschwindigkeit
	der Verbindung nicht kennt.  Damit können bildschirmorientierte
	Programme wie <span class="application">Emacs</span> ihren
	Bildschirmaufbau nicht an langsame Verbindungen anpassen,
	um die Antwortzeiten zu verbessern.</p><p>Die andere Möglichkeit besteht darin, die Geschwindigkeit
        der RS-232 Schnittstelle des lokalen Modems an die Geschwindigkeit
	des entfernten Modems anzupassen.  Bei einer V.32bis (14400 bps)
	Verbindung kann das lokale Modem die RS-232 Schnittstelle mit
	19200 bps betreiben, während bei einer Verbindung mit
	2400 bps die RS-232 Schnittstelle mit 2400 bps
	betrieben wird.  Da <code class="command">getty</code> die
	Verbindungsgeschwindigkeit des Modems nicht kennt, startet es
	den Anmeldevorgang mit der Ausgabe
	von <code class="prompt">login:</code> und wartet auf eine Antwort.  Wenn der
	Benutzer der Gegenstelle nun nur unverständliche Zeichen
	erhält, muss er solange <span class="keycap"><strong>Enter</strong></span>
	drücken, bis das Anmeldeprompt erscheint.  Solange die
	Geschwindigkeiten nicht übereinstimmen, sind die Antworten der
	Gegenstelle für <code class="command">getty</code> ebenfalls
	unverständlich.  In diesem Fall wechselt
	<code class="command">getty</code> zur nächsten Geschwindigkeit und gibt
	wieder <code class="prompt">login:</code> aus.  In aller Regel erhält der
	Benutzer der Gegenstelle nach ein bis zwei Tastendrücken
	eine erkennbare Anmeldeaufforderung.  Diese Anmeldeprozedur sieht
	nicht so sauber wie die Methode mit einer festen Geschwindigkeit
	aus, bietet dem Benutzer einer langsamen Verbindung allerdings den
	Vorteil, dass sich bildschirmorientierte Programme an die
	Geschwindigkeit anpassen können.</p><p>Im Folgenden wird die Konfiguration für beide Methoden
        besprochen, doch die Methode der angepassten Geschwindigkeit
	wird bei der Diskussion bevorzugt.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86849360"></a>28.4.4.1. <code class="filename">/etc/gettytab</code></h4></div></div></div><a id="idp86850128" class="indexterm"></a><p>Mit <code class="filename">/etc/gettytab</code> wird <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a> im
	Stil von <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=termcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">termcap</span>(5)</span></a> konfiguriert.  Das Format dieser Datei und
	die Bedeutung der Einträge wird in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a>
	beschrieben.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86854096"></a>28.4.4.1.1. Konfiguration für feste Geschwindigkeit</h5></div></div></div><p>Wenn Sie die Modemgeschwindigkeit vorgeben, werden Sie in
	    <code class="filename">/etc/gettytab</code> nichts ändern
	    müssen.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86855632"></a>28.4.4.1.2. Konfiguration für angepasste Geschwindigkeit</h5></div></div></div><p>In <code class="filename">/etc/gettytab</code> müssen
	    Einträge für die Geschwindigkeiten, die Sie benutzen
	    wollen, sein.  Wenn Sie ein 2400 bps Modem besitzen,
	    können Sie wahrscheinlich den schon vorhandenen
	    <code class="literal">D2400</code> Eintrag benutzen.</p><pre class="programlisting">#
# Fast dialup terminals, 2400/1200/300 rotary (can start either way)
#
D2400|d2400|Fast-Dial-2400:\
        :nx=D1200:tc=2400-baud:
3|D1200|Fast-Dial-1200:\
        :nx=D300:tc=1200-baud:
5|D300|Fast-Dial-300:\
        :nx=D2400:tc=300-baud:</pre><p>Wenn Sie ein Modem mit einer höheren Geschwindigkeit
	    besitzen, müssen Sie wahrscheinlich in
	    <code class="filename">/etc/gettytab</code> weitere Einträge
	    erstellen.  Hier ist ein Beispiel, das Sie mit einem 14400 bps
	    Modem benutzen können:</p><pre class="programlisting">#
# Additions for a V.32bis Modem
#
um|V300|High Speed Modem at 300,8-bit:\
        :nx=V19200:tc=std.300:
un|V1200|High Speed Modem at 1200,8-bit:\
        :nx=V300:tc=std.1200:
uo|V2400|High Speed Modem at 2400,8-bit:\
        :nx=V1200:tc=std.2400:
up|V9600|High Speed Modem at 9600,8-bit:\
        :nx=V2400:tc=std.9600:
uq|V19200|High Speed Modem at 19200,8-bit:\
        :nx=V9600:tc=std.19200:</pre><p>Die damit erzeugten Verbindungen verwenden 8 Bit und keine
	    Parität.</p><p>Im obigen Beispiel startet die Geschwindigkeit bei
	    19200 bps (eine V.32bis Verbindung) und geht dann
	    über 9600 bps (V.32), 400 bps, 1200 bps
	    und 300 bps wieder zurück zu 19200 bps.
	    Das Schlüsselwort <code class="literal">nx=</code>
	    (<span class="foreignphrase"><em class="foreignphrase">next table</em></span>) sorgt für
	    das zyklische Durchlaufen der Geschwindigkeiten.  Jede Zeile
	    zieht zudem noch mit <code class="literal">tc=</code>
	    (<span class="foreignphrase"><em class="foreignphrase">table continuation</em></span>)
	    die Vorgabewerte für die jeweilige Geschwindigkeit an.</p><p>Wenn Sie ein 28800 bps Modem besitzen und/oder Kompression
	    mit einem 14400 bps Modem benutzen wollen, brauchen Sie
	    höhere Geschwindigkeiten als 19200 bps.  Das folgende
	    Beispiel startet mit 57600 bps:</p><pre class="programlisting">#
# Additions for a V.32bis or V.34 Modem
# Starting at 57600 bps
#
vm|VH300|Very High Speed Modem at 300,8-bit:\
        :nx=VH57600:tc=std.300:
vn|VH1200|Very High Speed Modem at 1200,8-bit:\
        :nx=VH300:tc=std.1200:
vo|VH2400|Very High Speed Modem at 2400,8-bit:\
        :nx=VH1200:tc=std.2400:
vp|VH9600|Very High Speed Modem at 9600,8-bit:\
        :nx=VH2400:tc=std.9600:
vq|VH57600|Very High Speed Modem at 57600,8-bit:\
        :nx=VH9600:tc=std.57600:</pre><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Wenn Sie eine langsame CPU oder ein stark ausgelastetes
	      System besitzen und sich kein 16550A in Ihrem System befindet,
	      erhalten Sie bei 57600 bps vielleicht
	      <span class="errorname">sio</span> Fehlermeldungen der Form <span class="quote">&#8222;<span class="quote">silo
	      overflow</span>&#8220;</span>.</p></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dialup-ttys"></a>28.4.4.2. <code class="filename">/etc/ttys</code></h4></div></div></div><a id="idp86869200" class="indexterm"></a><p><code class="filename">/etc/ttys</code> wurde bereits in <a class="xref" href="term.html#ex-etc-ttys" title="Beispiel 28.1. Einträge in /etc/ttys hinzufügen">Beispiel 28.1, &#8222;Einträge in <code class="filename">/etc/ttys</code>
	    hinzufügen&#8220;</a> besprochen.  Die Konfiguration für
	  Modems ist ähnlich, allerdings braucht
	  <code class="command">getty</code> ein anderes Argument und es muss
	  ein anderer Terminaltyp angegeben werden.  Der Eintrag für
	  beide Methoden (feste und angepasste Geschwindigkeit) hat die
	  folgende Form:</p><pre class="programlisting">ttyu0   "/usr/libexec/getty <em class="replaceable"><code>xxx</code></em>"   dialup on</pre><p>Das erste Feld der obigen Zeile gibt die Gerätedatei
	  für diesen Eintrag an &#8211; <code class="filename">ttyu0</code>
	  bedeutet, dass <code class="command">getty</code> mit
	  <code class="filename">/dev/ttyu0</code> arbeitet.  Das zweite Feld
	  <code class="literal">"/usr/libexec/getty xxx"</code>
	  gibt das Kommando an, das <code class="command">init</code> für dieses
	  Gerät startet (<em class="replaceable"><code>xxx</code></em> wird durch
	  einen passenden Eintrag aus <code class="filename">/etc/gettytab</code>
	  ersetzt).  Die Vorgabe für den Terminaltyp, hier
	  <code class="literal">dialup</code>, wird im dritten Feld angegeben.  Das
	  vierte Feld, <code class="literal">on</code>, zeigt
	  <code class="command">init</code> an, dass die Schnittstelle aktiviert
	  ist.  Im fünften Feld könnte noch
	  <code class="literal">secure</code> angegeben werden, um Anmeldungen von
	  <code class="systemitem">root</code> zu erlauben, doch sollte das wirklich
	  nur für physikalisch sichere Terminals, wie die
	  Systemkonsole, aktiviert werden.</p><p>Die Vorgabe für den Terminaltyp,
	  <code class="literal">dialup</code> im obigen Beispiel, hängt von lokalen
	  Gegebenheiten ab.  Traditionell wird <code class="literal">dialup</code>
	  für Einwählverbindungen verwendet, so dass die
	  Benutzer in ihren Anmeldeskripten den Terminaltyp auf ihren
	  Terminal abstimmen können, wenn der Typ auf
	  <code class="literal">dialup</code> gesetzt ist.  Wenn Sie aber
	  beispielsweise nur VT102 Terminals oder Emulatoren einsetzen,
	  können Sie den Terminaltyp hier auch fest auf
	  <code class="literal">vt102</code> setzen.</p><p>Nachdem Sie <code class="filename">/etc/ttys</code> geändert
	  haben, müssen Sie <code class="command">init</code> ein
	  <acronym class="acronym">HUP</acronym> Signal schicken, damit es die Datei wieder
	  einliest.  Sie können dazu das folgende Kommando
	  verwenden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP 1</code></strong></pre><p>Wenn Sie das System zum ersten Mal konfigurieren, sollten Sie
	  dieses Kommando erst ausführen, wenn Sie Ihr Modem richtig
	  konfiguriert und angeschlossen haben.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86886480"></a>28.4.4.2.1. Konfiguration für feste Geschwindigkeit</h5></div></div></div><p>Das Argument von <code class="command">getty</code> muss in
	    diesem Fall eine feste Geschwindigkeit vorgeben.  Der Eintrag
	    für ein Modem, das fest auf 19200 bps eingestellt ist,
	    könnte wie folgt aussehen:</p><pre class="programlisting">ttyu0   "/usr/libexec/getty std.19200"   dialup on</pre><p>Wenn Ihr Modem auf eine andere Geschwindigkeit eingestellt
	    ist, setzen Sie anstelle von <code class="literal">std.19200</code> einen
	    passenden Eintrag der Form
	    <code class="literal">std.speed</code> ein.
	    Stellen Sie sicher, dass dies auch ein gültiger
	    Verbindungstyp aus <code class="filename">/etc/gettytab</code>
	    ist.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86890064"></a>28.4.4.2.2. Konfiguration für angepasste Geschwindigkeit</h5></div></div></div><p>Das Argument von <code class="command">getty</code> muss hier auf
	    einen der Einträge aus <code class="filename">/etc/gettytab</code>
	    zeigen, der zu einer Kette von Einträgen gehört, die
	    die zu probierenden Geschwindigkeiten beschreiben.  Wenn Sie
	    dem obigen Beispiel gefolgt sind und zusätzliche
	    Einträge in <code class="filename">/etc/gettytab</code> erzeugt
	    haben, können Sie die folgende Zeile verwenden:</p><pre class="programlisting">ttyu0   "/usr/libexec/getty V19200"   dialup on</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86893008"></a>28.4.4.3. <code class="filename">/etc/rc.d/serial</code></h4></div></div></div><a id="idp86893776" class="indexterm"></a><p>Modems, die höhere Geschwindigkeiten unterstützen,
	  zum Beispiel V.32, V.32bis und V.34 Modems, benutzen
	  Hardware-Flusssteuerung (<code class="literal">RTS/CTS</code>).  Für
	  die entsprechenden Schnittstellen können Sie die
	  Flusssteuerung mit <code class="command">stty</code> in
	  <code class="filename">/etc/rc.d/serial</code> einstellen.</p><p>Um beispielsweise die Hardware-Flusssteuerung
	  für die Geräte zur Ein- und Auswahl der zweiten
	  seriellen Schnittstelle (<code class="filename">COM2</code>)
	  zu aktivieren, benutzen Sie die Dateien zur Initialisierung der
	  entsprechenden Geräte und fügen die folgenden Zeilen in
	  <code class="filename">/etc/rc.d/serial</code> hinzu:</p><pre class="programlisting"># Serial port initial configuration
stty -f /dev/ttyu1.init crtscts
stty -f /dev/cuad1.init crtscts</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86902608"></a>28.4.5. Modemkonfiguration</h3></div></div></div><p>Wenn Sie ein Modem besitzen, das seine Konfiguration in nicht
        flüchtigem RAM speichert, werden Sie ein Terminalprogramm wie
	<span class="application">Telix</span> unter <span class="trademark">MS-DOS</span>® oder
	<code class="command">tip</code> unter FreeBSD benötigen, um die Parameter
	einzustellen.  Verbinden Sie sich mit derselben Geschwindigkeit, die
	<code class="command">getty</code> zuerst benutzen würde, mit dem Modem und
	treffen Sie folgende Einstellungen:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">DCD</acronym> ist eingeschaltet, wenn das
	    Trägersignal des entfernten Modems erkannt wird.</p></li><li class="listitem"><p>Im Betrieb liegt <acronym class="acronym">DTR</acronym> an.  Bei einem Verlust
	    von DTR legt das Modem auf und setzt sich zurück.</p></li><li class="listitem"><p><acronym class="acronym">CTS</acronym> Flusssteuerung ist für
	    ausgehende Daten aktiviert.</p></li><li class="listitem"><p><acronym class="acronym">XON/XOFF</acronym> Flusssteuerung ist
	    ausgeschaltet.</p></li><li class="listitem"><p><acronym class="acronym">RTS</acronym> Flusssteuerung ist für
	    eingehende Daten aktiviert.</p></li><li class="listitem"><p>Keine Rückmeldungen ausgeben.</p></li><li class="listitem"><p>Die Echo-Funktion ist deaktiviert.</p></li></ul></div><p>In der Dokumentation Ihres Modems finden Sie die nötigen
        Befehle, die Sie absetzen müssen, und/oder nötigen
        DIP-Schalterstellungen, um die obigen Einstellungen zu
	treffen.</p><p>Für ein externes 14400 <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® gelten zum
        Beispiel die folgenden Befehle:</p><pre class="programlisting">ATZ
AT&amp;C1&amp;D2&amp;H1&amp;I0&amp;R2&amp;W</pre><p>Bei dieser Gelegenheit können Sie auch gleich andere
        Einstellungen, zum Beispiel ob Sie V42.bis und/oder MNP5
	Kompression benutzen wollen, an Ihrem Modem vornehmen.</p><p>Bei einem externen 14400 <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>®
	müssen Sie auch noch einige DIP-Schalter einstellen.
	Die folgenden Einstellungen können Sie vielleicht
	als Beispiel für andere Modems verwenden:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Schalter 1: OBEN &#8211; DTR normal</p></li><li class="listitem"><p>Schalter 2: N/A (Rückmeldungen als Text/numerische
	    Rückmeldungen)</p></li><li class="listitem"><p>Schalter 3: OBEN &#8211; Keine Rückmeldungen
	    ausgeben</p></li><li class="listitem"><p>Schalter 4: UNTEN &#8211; Echo-Funktion aus</p></li><li class="listitem"><p>Schalter 5: OBEN &#8211; Rufannahme aktiviert</p></li><li class="listitem"><p>Schalter 6: OBEN &#8211; Carrier Detect normal</p></li><li class="listitem"><p>Schalter 7: OBEN &#8211; Einstellungen aus dem NVRAM laden</p></li><li class="listitem"><p>Schalter 8: N/A (Smart Mode/Dumb Mode)</p></li></ul></div><p>Für Einwählverbindungen sollten die
        Rückmeldungen deaktiviert sein, da sonst
	<code class="command">getty</code> dem Modem das Anmeldeprompt
	<code class="prompt">login:</code> schickt und das Modem im Kommandomodus das
	Prompt wieder ausgibt (Echo-Funktion) oder eine Rückmeldung gibt.
	Das führt dann zu einer länglichen und fruchtlosen
	Kommunikation zwischen dem Modem und
	<code class="command">getty</code>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86929232"></a>28.4.5.1. Konfiguration für feste Geschwindigkeit</h4></div></div></div><p>Die Geschwindigkeit zwischen Modem und Computer muss auf
	  einen festen Wert eingestellt werden.  Mit einem externen 14400
	  <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® Modem setzen die folgenden Kommandos die
	  Geschwindigkeit auf den Wert der Datenendeinrichtung fest:</p><pre class="programlisting">ATZ
AT&amp;B1&amp;W</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86940240"></a>28.4.5.2. Konfiguration für angepasste Geschwindigkeit</h4></div></div></div><p>In diesem Fall muss die Geschwindigkeit der seriellen
	  Schnittstelle des Modems der eingehenden Geschwindigkeit
	  angepasst werden.  Für ein externes
	  14400 <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>®
	  Modem erlauben die folgenden Befehle eine Anpassung der
	  Geschwindigkeit der seriellen Schnittstelle für
	  Verbindungen, die keine Fehlerkorrektur verwenden:</p><pre class="programlisting">ATZ
AT&amp;B2&amp;W</pre><p>Verbindungen mit Fehlerkorrektur (V.42, MNP) verwenden die
	  Geschwindigkeit der Datenendeinrichtung.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86943184"></a>28.4.5.3. Überprüfen der Modemkonfiguration</h4></div></div></div><p>Die meisten Modems verfügen über Kommandos, die die
	  Konfiguration des Modems in lesbarer Form ausgeben.  Auf einem
	  externen 14400 <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® zeigt
	  <code class="command">ATI5</code> die Einstellungen im nicht
	  flüchtigen RAM an.  Um die wirklichen
	  Einstellungen unter Berücksichtigung der DIP-Schalter zu
	  sehen, benutzen Sie <code class="command">ATZ</code> gefolgt von
	  <code class="command">ATI4</code>.</p><p>Wenn Sie ein anderes Modem benutzen, schauen Sie bitte in der
	  Dokumentation Ihres Modems nach, wie Sie die Konfiguration des
	  Modems überprüfen können.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86947152"></a>28.4.6. Fehlersuche</h3></div></div></div><p>Bei Problemen können Sie die Einwählverbindung anhand
        der folgenden Punkte überprüfen:</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86948176"></a>28.4.6.1. Überprüfen des FreeBSD-Systems</h4></div></div></div><p>Schließen Sie das Modem an das FreeBSD-System an und
	  booten Sie das System.  Wenn Ihr Modem über
	  Statusindikatoren verfügt, überprüfen Sie, ob der
	  <acronym class="acronym">DTR</acronym> Indikator leuchtet, wenn das Anmeldeprompt
	  erscheint.  Dies zeigt an, dass das FreeBSD-System einen
	  <code class="command">getty</code> Prozess auf der entsprechenden
	  Schnittstelle gestartet hat und das Modem auf einkommende
	  Verbindungen wartet.</p><p>Wenn der <acronym class="acronym">DTR</acronym>-Indikator nicht leuchtet,
	  melden Sie sich an dem FreeBSD-System an und überprüfen mit
	  <code class="command">ps ax</code>, ob FreeBSD einen
	  <code class="command">getty</code>-Prozess auf der entsprechenden
	  Schnittstelle gestartet hat.  Unter den angezeigten Prozessen
	  sollten Sie ähnliche wie die folgenden finden:</p><pre class="screen">  114 ??  I      0:00.10 /usr/libexec/getty V19200 ttyu0
  115 ??  I      0:00.10 /usr/libexec/getty V19200 ttyu1</pre><p>Wenn das Modem noch keinen Anruf entgegengenommen hat und Sie
	  stattdessen die folgende Zeile sehen</p><pre class="screen">  114 d0  I      0:00.10 /usr/libexec/getty V19200 ttyu0</pre><p>bedeutet dies, dass <code class="command">getty</code> die
	  Schnittstelle schon geöffnet hat und zeigt Kabelprobleme
	  oder eine falsche Modemkonfiguration an, da
	  <code class="command">getty</code> die Schnittstelle erst dann öffnen
	  kann, wenn das <acronym class="acronym">CD</acronym> Signal (Carrier Detect) vom
	  Modem anliegt.</p><p>Wenn Sie keine <code class="command">getty</code>-Prozesse auf den
	  gewünschten <code class="filename">ttyuN</code>
	  Ports finden, untersuchen Sie bitte <code class="filename">/etc/ttys</code>
	  auf Fehler.  Suchen Sie auch in <code class="filename">/var/log/messages</code>
	  nach Meldungen von <code class="command">init</code> oder
	  <code class="command">getty</code>.  Wenn Sie dort Meldungen finden,
	  sollten Sie noch einmal die beiden Konfigurationsdateien
	  <code class="filename">/etc/ttys</code> und <code class="filename">/etc/gettytab</code>
	  nach Fehlern durchsehen.  Überprüfen Sie auch, ob die
	  Gerätedateien
	  <code class="filename">/dev/ttyuN</code>
	  vorhanden sind.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86983120"></a>28.4.6.2. Einwählversuch</h4></div></div></div><p>Versuchen Sie, sich in Ihr System einzuwählen.  Auf dem
	  entfernten System stellen Sie bitte die folgenden
	  Kommunikationsparameter ein: 8 Bit, keine Parität, ein
	  Stop-Bit.  Wenn Sie kein Anmeldeprompt erhalten oder nur
	  unleserliche Zeichen sehen, drücken Sie mehrmals, in
	  Abständen von ungefähr einer Sekunde,
	  <span class="keycap"><strong>Enter</strong></span>.  Wenn Sie immer noch nicht die
	  <code class="prompt">login:</code> Meldung sehen, schicken Sie ein
	  <code class="command">BREAK</code> Kommando.  Wenn Sie zur Einwahl ein
	  Highspeed-Modem benutzen, verwenden Sie eine feste
	  Geschwindigkeit auf der seriellen Schnittstelle des Modems
	  (<code class="command">AT&amp;B1</code> für ein
	  <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>®).</p><p>Wenn Sie jetzt immer noch kein Anmeldeprompt erhalten,
	  überprüfen Sie nochmals <code class="filename">/etc/gettytab</code>
	  und stellen sicher, dass</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>der Verbindungstyp in <code class="filename">/etc/ttys</code> zu
	      einem gültigen Eintrag in <code class="filename">/etc/gettytab</code>
	      gehört,</p></li><li class="listitem"><p>jeder der <code class="literal">nx=</code> Einträge in
	      <code class="filename">gettytab</code> gültig ist und</p></li><li class="listitem"><p>jeder <code class="literal">tc=</code> Eintrag auf einen
	      gültigen Eintrag in <code class="filename">gettytab</code>
	      verweist.</p></li></ul></div><p>Wenn das Modem an Ihrem FreeBSD-System auf einen eingehenden Anruf
	  nicht antwortet, stellen Sie sicher, dass das Modem so
	  konfiguriert ist, dass es einen Anruf beantwortet, wenn
	  <acronym class="acronym">DTR</acronym> anliegt.  Wenn Ihr Modem Statusindikatoren
	  besitzt, können Sie das Anliegen von <acronym class="acronym">DTR</acronym>
	  anhand der Leuchten überprüfen.</p><p>Wenn Sie alles schon mehrfach überprüft haben und
	  es immer noch noch nicht funktioniert, machen Sie erst einmal
	  eine Pause, bevor Sie weitermachen.  Wenn es immer noch nicht
	  funktioniert, können Sie eine Mail an die Mailingliste
	  'Fragen und Antworten zu FreeBSD'
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;</code> schicken, in der Sie Ihr Modem und Ihr Problem
	  beschreiben und Ihnen sollte geholfen werden.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="term.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="serialcomms.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="dialout.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">28.3. Terminals </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 28.5. Verbindungen nach Außen</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>