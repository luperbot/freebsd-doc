<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>17.17. Fehler im MAC beheben</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="mac.html" title="Kapitel 17. Verbindliche Zugriffskontrolle" /><link rel="prev" href="mac-userlocked.html" title="17.16. Beispiel 2: User Lock Down" /><link rel="next" href="audit.html" title="Kapitel 18. Security Event Auditing" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">17.17. Fehler im MAC beheben</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mac-userlocked.html">Zurück</a> </td><th width="60%" align="center">Kapitel 17. Verbindliche Zugriffskontrolle</th><td width="20%" align="right"> <a accesskey="n" href="audit.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-troubleshoot"></a>17.17. Fehler im MAC beheben</h2></div></div></div><a id="idp80414416" class="indexterm"></a><p>Während der Entwicklung des Frameworks haben einige Nutzer auf
      Probleme hingewiesen.  Einige davon werden hier aufgeführt:</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80415568"></a>17.17.1. Die Option <code class="option">multilabel</code> greift nicht auf der
        <code class="filename">/</code>-Partition</h3></div></div></div><p>Es scheint, dass etwa jedem fünfzigsten Nutzer dieses Problem
        widerfährt.  Und in der Tat - auch wir kennen es aus der
        Entwicklung.  Genauere Untersuchungen dieses <span class="quote">&#8222;<span class="quote">Bugs</span>&#8220;</span>
        machten uns glauben, dass es sich entweder um einen Fehler in oder eine
        fehlerhafte Interpretation der Dokumentation handelt.  Warum auch immer
        dieser Fehler auftritt - er kann mit folgender Prozedur behoben
        werden:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Öffnen Sie die Datei <code class="filename">/etc/fstab</code> und
	    setzen Sie die Rootpartition auf <code class="option">ro</code> wie
	    <span class="quote">&#8222;<span class="quote">read-only</span>&#8220;</span>.</p></li><li class="step"><p>Starten Sie in den Einzelnutzermodus.</p></li><li class="step"><p>Rufen Sie <code class="command">tunefs</code> <code class="option">-l enable</code>
	    für <code class="filename">/</code> auf.</p></li><li class="step"><p>Starten Sie in den Mehrbenutzermodus.</p></li><li class="step"><p>Führen Sie <code class="command">mount</code>
	    <code class="option">-urw</code> <code class="filename">/</code> aus und ändern
	    Sie anschließend in der Datei <code class="filename">/etc/fstab</code>
	    die Option <code class="option">ro</code> zurück in <code class="option">rw</code>.
	    Starten Sie das System noch einmal neu.</p></li><li class="step"><p>Achten Sie besonders auf die Ausgabe von
	  <code class="command">mount</code> um sich zu versichern, dass die
	  <code class="option">multilabel</code> korrekt für das root-Dateisystem
	  gesetzt wurde.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80432464"></a>17.17.2. Mit der aktivierten MAC kann ich keinen X11 Server starten</h3></div></div></div><p>Dies kann durch die Richtlinie <code class="literal">partition</code>
	oder einer fehlerhaften Verwendung einer Richtlinie, die mit Labels
	arbeitet, auftreten.  Zum debuggen versuchen Sie folgendes:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Schauen Sie sich die Fehlermeldungen genau an.  Wenn der Nutzer
	    einer <code class="literal">insecure</code> Klasse angehört, ist
	    wahrscheinlich die Richtlinie <code class="literal">partition</code> die
	    Ursache.  Versuchen Sie, die Nutzerklasse auf
	    <code class="literal">default</code> zu stellen und danach die Datenbank mit
	    <code class="command">cap_mkdb</code> zu erneuern.  Wenn das Problem dadurch
	    nicht gelöst wird, gehen Sie weiter zu Schritt 2.</p></li><li class="step"><p>Gehen Sie die Label-Richtlinien Schritt für Schritt
            nocheinmal durch. Achten Sie darauf, dass für den Nutzer, bei
            dem das Problem auftritt, für X11 und das Verzeichnis
            <code class="filename">/dev</code> alle Einstellungen
            korrekt sind.</p></li><li class="step"><p>Falls all dies nicht helfen sollte, senden Sie die
	    Fehlermeldung und eine Beschreibung ihrer Arbeitsumgebung an die
	    (englisch-sprachige) TrustedBSD Diskussionsliste auf der <a class="link" href="http://www.TrustedBSD.org" target="_top">TrustedBSD</a> Webseite oder an
	    die <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">FreeBSD general
  questions</a> Mailingliste.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80439888"></a>17.17.3. Error: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=_secure_path&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">_secure_path</span>(3)</span></a> cannot stat
        <code class="filename">.login_conf</code></h3></div></div></div><p>Wenn ich versuche, von <code class="systemitem">root</code> zu einem anderen
        Nutzer des Systems zu wechseln, erhalte ich die Fehlermeldung
        <span class="errorname">_secure_path: unable to state .login_conf</span>.
      </p><p>Diese Meldung wird gewöhnlich ausgegeben, wenn der Nutzer ein
        höhere Label-Einstellung hat als der, dessen Identität man
        annehmen möchte.  Ausführlich: Wenn ein Nutzer
        <code class="systemitem">joe</code> als <code class="option">biba/low</code> gelabelt wurde,
        kann <code class="systemitem">root</code>, der <code class="option">biba/high</code> als
        Voreinstellung trägt, das Heimatverzeichnis von
        <code class="systemitem">joe</code> nicht einsehen.  Das passiert unabhänig
        davon, ob <code class="systemitem">root</code> vorher mit <code class="command">su</code>
        die Identität von <code class="systemitem">joe</code> angenommen hat oder
        nicht, da das Label sich nicht ändert.  Hier haben wir also einen
        Fall, in dem das Gewährleistungsmodell von Biba verhindert, das
        der Superuser Objekte einer niedrigeren Integrität betrachten
        kann.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80459600"></a>17.17.4. Der Nutzer <code class="systemitem">root</code> ist kaputt!</h3></div></div></div><p>Im normalen oder sogar im Einzelbenutzermodus wird
        <code class="systemitem">root</code> nicht anerkannt.  Das Kommando
        <code class="command">whoami</code> liefert 0 (null) und <code class="command">su</code>
        liefert <span class="errorname">who are you?</span> zurück.  Was geht da
        vor?</p><p>Das kann passieren, wenn eine Label-Richtlinie ausgeschaltet wird -
        entweder durch <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> oder wenn das Richtlinienmodul entladen
        wurde.  Wenn eine Richtlinie deaktiviert oder auch nur
        vorübergehen deaktiviert wird, muß die
        Befähigungsdatenbank neu konfiguriert werden, d.h. die
        <code class="option">label</code> Option muß entfernt werden.
        Überprüfen Sie, ob alle <code class="option">label</code> Einträge
        aus der Datei <code class="filename">/etc/login.conf</code> entfernt wurden und
        bauen Sie die Datenbank mit <code class="command">cap_mkdb</code> neu.</p><p>Dieser Fehler kann auch auftreten, wenn eine Richtlinie den Zugriff
        auf die Datei <code class="filename">master.passwd</code> einschränkt.
        Normalerweise passiert das nur, wenn ein Administrator ein Label an
        diese Datei vergibt, das mit der allgemeingültigen Richtlinie, die
        das System verwendet, in Konflikt steht.  In solchen Fällen werden
        die Nutzerinformationen vom System ausgelesen und jeder weitere Zugriff
        wird blockiert, sobald das neue Label greift.  Wenn man die Richtlinie
        via  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> ausschaltet, sollte es erstmal wieder gehen.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mac-userlocked.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="mac.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="audit.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">17.16. Beispiel 2: User Lock Down </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> Kapitel 18. Security Event Auditing</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>