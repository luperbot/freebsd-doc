<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>33.2. Gateways und Routen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="advanced-networking.html" title="Kapitel 33. Weiterführende Netzwerkthemen" /><link rel="prev" href="advanced-networking.html" title="Kapitel 33. Weiterführende Netzwerkthemen" /><link rel="next" href="network-wireless.html" title="33.3. Drahtlose Netzwerke" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">33.2. Gateways und Routen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="advanced-networking.html">Zurück</a> </td><th width="60%" align="center">Kapitel 33. Weiterführende Netzwerkthemen</th><td width="20%" align="right"> <a accesskey="n" href="network-wireless.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-routing"></a>33.2. Gateways und Routen</h2></div><div><span class="authorgroup">Beigetragen von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Coranth</span> <span class="surname">Gryphon</span></span>. </span></div></div></div><a id="idp92002768" class="indexterm"></a><a id="idp92003536" class="indexterm"></a><a id="idp92004304" class="indexterm"></a><p>Damit ein Rechner einen anderen über ein Netzwerk
      finden kann, muss ein Mechanismus vorhanden sein, der
      beschreibt, wie man von einem Rechner zum anderen gelangt.
      Dieser Vorgang wird als <em class="firstterm">Routing</em>
      bezeichnet.  Eine <span class="quote">&#8222;<span class="quote">Route</span>&#8220;</span> besteht aus einem
      definierten Adressenpaar: Einem <span class="quote">&#8222;<span class="quote">Ziel</span>&#8220;</span> und einem
      <span class="quote">&#8222;<span class="quote">Gateway</span>&#8220;</span>.  Dieses Paar zeigt an, dass Sie
      über das <span class="emphasis"><em>Gateway</em></span> zum
      <span class="emphasis"><em>Ziel</em></span> gelangen wollen.  Es gibt drei Arten
      von Zielen: Einzelne Rechner (Hosts), Subnetze und das
      <span class="quote">&#8222;<span class="quote">Standard</span>&#8220;</span>ziel.  Die <span class="quote">&#8222;<span class="quote">Standardroute</span>&#8220;</span>
      wird verwendet, wenn keine andere Route zutrifft.  Wir werden
      Standardrouten später etwas genauer behandeln.
      Außerdem gibt es drei Arten von Gateways: Einzelne Rechner
      (Hosts), Schnittstellen (Interfaces, auch als <span class="quote">&#8222;<span class="quote">Links</span>&#8220;</span>
      bezeichnet), sowie Ethernet Hardware-Adressen (MAC-Adressen).
    </p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92009040"></a>33.2.1. Ein Beispiel</h3></div></div></div><p>Um die verschiedenen Aspekte des Routings zu
	veranschaulichen, verwenden wir folgende Ausgaben von
	<code class="command">netstat</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>netstat -r</code></strong>
Routing tables

Destination               Gateway            Flags       Refs     Use     Netif Expire

default                   outside-gw         UGSc        37       418     ppp0
localhost                 localhost          UH          0        181     lo0
test0                     0:e0:b5:36:cf:4f   UHLW        5        63288   ed0    77
10.20.30.255              link#1             UHLW        1        2421
example.com               link#1             UC          0        0
host1                     0:e0:a8:37:8:1e    UHLW        3        4601    lo0
host2                     0:e0:a8:37:8:1e    UHLW        0        5       lo0 =&gt;
host2.example.com         link#1             UC          0        0
224                       link#1             UC          0        0
</pre><a id="idp92011472" class="indexterm"></a><p>Die ersten zwei Zeilen geben die Standardroute (die wir
	im <a class="link" href="network-routing.html#network-routing-default" title="33.2.2. Standardrouten"> nächsten
	Abschnitt</a> behandeln), sowie die
	<code class="systemitem">localhost</code> Route an.</p><a id="idp92013648" class="indexterm"></a><p>Das in der Routingtabelle für
	<code class="literal">localhost</code> festgelegte Interface
	(<code class="literal">Netif</code>-Spalte)
	<code class="filename">lo0</code>, ist auch als loopback-Gerät
	(Prüfschleife) bekannt.  Das heißt, dass der ganze
	Datenverkehr für dieses Ziel intern (innerhalb des
	Gerätes) bleibt, anstatt ihn über ein Netzwerk (LAN)
	zu versenden, da das Ziel dem Start entspricht.</p><a id="idp92015952" class="indexterm"></a><p>Der nächste auffällige Punkt sind die mit
	<code class="systemitem">0:e0:</code> beginnenden Adressen.  Es
	handelt sich dabei um Ethernet Hardwareadressen, die auch als
	MAC-Adressen bekannt sind.  FreeBSD identifiziert Rechner im
	lokalen Netz automatisch (im Beispiel <code class="systemitem">test0</code>)
	und fügt eine direkte Route zu diesem Rechner hinzu.  Dies
	passiert über die Ethernet-Schnittstelle
	<code class="filename">ed0</code>.  Außerdem existiert ein Timeout
	(in der Spalte <code class="literal">Expire</code>) für diese Art
	von Routen, der verwendet wird, wenn dieser Rechner in einem
	definierten Zeitraum nicht reagiert.  Wenn dies passiert, wird
	die Route zu diesem Rechner automatisch gelöscht.
	Rechner im lokalen Netz werden durch einen als RIP (Routing
	Information Protocol) bezeichneten Mechanismus identifiziert,
	der den kürzesten Weg zu den jeweiligen Rechnern
	bestimmt.</p><a id="idp92019152" class="indexterm"></a><p>FreeBSD fügt außerdem Subnetzrouten für das
	lokale Subnetz hinzu (<code class="systemitem">10.20.30.255</code> ist die Broadcast-Adresse
	für das Subnetz <code class="systemitem">10.20.30</code>,
	<code class="systemitem">example.com</code> ist der zu
	diesem Subnetz gehörige Domainname).  Das Ziel
	<code class="literal">link#1</code> bezieht sich auf die erste
	Ethernet-Karte im Rechner.  Sie können auch feststellen,
	dass keine zusätzlichen Schnittstellen angegeben
	sind.</p><p>Routen für Rechner im lokalen Netz und lokale
	Subnetze werden automatisch durch den
	<span class="application">routed</span> Daemon konfiguriert.  Ist
	dieser nicht gestartet, sind nur statisch definierte
	(explizit eingegebene) Routen vorhanden.</p><p>Die Zeile <code class="literal">host1</code> bezieht sich auf
	unseren Rechner, der durch seine Ethernetadresse bekannt ist.
	Da unser Rechner der Sender ist, verwendet FreeBSD automatisch
	das Loopback-Gerät (<code class="filename">lo0</code>),
	anstatt den Datenverkehr über die Ethernetschnittstelle
	zu senden.</p><p>Die zwei <code class="literal">host2</code> Zeilen sind ein Beispiel
	dafür, was passiert, wenn wir ein <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> Alias
	verwenden (Lesen Sie dazu den Abschnitt über Ethernet,
	wenn Sie wissen wollen, warum wir das tun sollten.).  Das
	Symbol <code class="literal">=&gt;</code> (nach der
	<code class="filename">lo0</code>-Schnittstelle) sagt aus, dass wir
	nicht nur das Loopbackgerät verwenden (da sich die
	Adresse auf den lokalen Rechner bezieht), sondern dass es sich
	zusätzlich auch um ein Alias handelt.  Solche Routen sind
	nur auf Rechnern vorhanden, die den Alias bereitstellen;
	alle anderen Rechner im lokalen Netz haben für solche
	Routen nur eine einfache <code class="literal">link#1</code>
	Zeile.</p><p>Die letzte Zeile (Zielsubnetz <code class="literal">224</code>)
	behandelt das Multicasting, das wir in einem anderen Abschnitt
	besprechen werden.</p><p>Schließlich gibt es für Routen noch
	verschiedene Attribute, die Sie in der Spalte
	<code class="literal">Flags</code> finden.  Nachfolgend finden Sie eine
	kurze Übersicht von einigen dieser Flags und ihrer
	Bedeutung:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>U</td><td>Up: Die Route ist aktiv.</td></tr><tr><td>H</td><td>Host: Das Ziel der Route ist ein einzelner
		Rechner (Host).</td></tr><tr><td>G</td><td>Gateway: Alle Daten, die an dieses Ziel gesendet
		werden, werden von diesem System an ihr jeweiliges
		Ziel weitergeleitet.</td></tr><tr><td>S</td><td>Static: Diese Route wurde manuell konfiguriert,
		das heißt sie wurde <span class="emphasis"><em>nicht</em></span>
		automatisch vom System erzeugt.</td></tr><tr><td>C</td><td>Clone: Erzeugt eine neue Route, basierend auf der
		Route für den Rechner, mit dem wir uns verbinden.
		Diese Routenart wird normalerweise für lokale
		Netzwerke verwendet.</td></tr><tr><td>W</td><td>WasCloned: Eine Route, die automatisch
		konfiguriert wurde.  Sie basiert auf einer lokalen
		Netzwerkroute (Clone).</td></tr><tr><td>L</td><td>Link: Die Route beinhaltet einen Verweis auf eine
		Ethernetkarte (MAC-Adresse).</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-routing-default"></a>33.2.2. Standardrouten</h3></div></div></div><a id="idp92049232" class="indexterm"></a><a id="idp92050000" class="indexterm"></a><p>Wenn sich der lokale Rechner mit einem entfernten Rechner
	verbinden will, wird die Routingtabelle überprüft,
	um festzustellen, ob bereits ein bekannter Pfad vorhanden ist.
	Gehört dieser entfernte Rechner zu einem Subnetz, dessen
	Pfad uns bereits bekannt ist
	(<span class="foreignphrase"><em class="foreignphrase">Cloned route</em></span>), dann versucht der
	lokale Rechner über diese Schnittstelle eine Verbindung
	herzustellen.</p><p>Wenn alle bekannten Pfade nicht funktionieren, hat der
	lokale Rechner eine letzte Möglichkeit: Die
	Standardroute (Defaultroute).  Bei dieser
	Route handelt es sich um eine spezielle Gateway-Route
	(gewöhnlich die einzige im System vorhandene), die im
	Flags-Feld immer mit <code class="literal">C</code> gekennzeichnet ist.
	Für Rechner im lokalen Netzwerk ist dieses Gateway auf
	<span class="emphasis"><em>welcher Rechner auch immer eine Verbindung nach
	außen hat</em></span> gesetzt (entweder über eine
	PPP-Verbindung, DSL, ein Kabelmodem, T1 oder eine beliebige
	andere Netzwerkverbindung).</p><p>Wenn Sie die Standardroute für einen Rechner
	konfigurieren, der selbst als Gateway zur Außenwelt
	funktioniert, wird die Standardroute zum Gateway-Rechner Ihres
	Internetanbieter (ISP) gesetzt.</p><p>Sehen wir uns ein Beispiel für Standardrouten an.  So
	sieht eine übliche Konfiguration aus:</p><div class="mediaobject"><img src="advanced-networking/net-routing.png" /></div><p>Die Rechner <code class="systemitem">Local1</code> und
	<code class="systemitem">Local2</code> befinden sich auf Ihrer Seite.
	<code class="systemitem">Local1</code> ist mit einem ISP über eine
	PPP-Verbindung verbunden.  Dieser PPP-Server ist über ein
	lokales Netzwerk mit einem anderen Gateway-Rechner verbunden,
	der über eine Schnittstelle die Verbindung des ISP zum
	Internet herstellt.</p><p>Die Standardrouten für Ihre Maschinen lauten:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Host</th><th>Standard Gateway</th><th>Schnittstelle</th></tr></thead><tbody><tr><td>Local2</td><td>Local1</td><td>Ethernet</td></tr><tr><td>Local1</td><td>T1-GW</td><td>PPP</td></tr></tbody></table></div><p>Eine häufig gestellte Frage lautet: <span class="quote">&#8222;<span class="quote">Warum (oder
	wie) sollten wir <code class="systemitem">T1-GW</code> als Standard-Gateway
	für <code class="systemitem">Local1</code> setzen, statt den (direkt
	verbundenen) ISP-Server zu verwenden?</span>&#8220;</span>.</p><p>Bedenken Sie, dass die PPP-Schnittstelle für die
	Verbindung eine Adresse des lokalen Netzes des ISP verwendet.
	Daher werden Routen für alle anderen Rechner im lokalen
	Netz des ISP automatisch erzeugt.  Daraus folgt, dass Sie
	bereits wissen, wie Sie <code class="systemitem">T1-GW</code> erreichen
	können!  Es ist also unnötig, einen Zwischenschritt
	über den ISP-Server zu machen.</p><p>Es ist üblich, die Adresse <code class="systemitem">X.X.X.1</code> als Gateway-Adresse für
	ihr lokales Netzwerk zu verwenden.  Für unser Beispiel
	bedeutet dies Folgendes: Wenn Ihr lokaler Klasse-C-Adressraum
	<code class="systemitem">10.20.30</code> ist und Ihr ISP
	<code class="systemitem">10.9.9</code> verwendet, sehen die
	Standardrouten so aus:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Rechner (Host)</th><th>Standardroute</th></tr></thead><tbody><tr><td>Local2 (10.20.30.2)</td><td>Local1 (10.20.30.1)</td></tr><tr><td>Local1 (10.20.30.1, 10.9.9.30)</td><td>T1-GW (10.9.9.1)</td></tr></tbody></table></div><p>Sie können die Standardroute ganz einfach in der Datei
	<code class="filename">/etc/rc.conf</code> festlegen.  In unserem
	Beispiel wurde auf dem Rechner <code class="systemitem">Local2</code>
	folgende Zeile in <code class="filename">/etc/rc.conf</code>
	eingefügt:</p><pre class="programlisting">defaultrouter="10.20.30.1"</pre><p>Die Standardroute kann über <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a> auch direkt
	gesetzt werden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add default 10.20.30.1</code></strong></pre><p>Weitere Informationen zum Bearbeiten von
	Netzwerkroutingtabellen finden Sie in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-dual-homed-hosts"></a>33.2.3. Rechner mit zwei Heimatnetzen</h3></div></div></div><a id="idp92084816" class="indexterm"></a><p>Es gibt noch eine Konfigurationsmöglichkeit, die wir
	besprechen sollten, und zwar Rechner, die sich in zwei
	Netzwerken befinden.  Technisch gesehen, zählt jeder als
	Gateway arbeitende Rechner zu den Rechnern mit zwei
	Heimatnetzen (im obigen Beispiel unter Verwendung einer
	PPP-Verbindung).  In der Praxis meint man damit allerdings nur
	Rechner, die sich in zwei lokalen Netzen befinden.</p><p>Entweder verfügt der Rechner über zwei
	Ethernetkarten und jede dieser Karten hat eine Adresse in
	einem separaten Subnetz, oder der Rechner hat nur eine
	Ethernetkarte und verwendet <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> Aliasing.  Die
	erste Möglichkeit wird verwendet, wenn zwei physikalisch
	getrennte Ethernet-Netzwerke vorhanden sind, die zweite, wenn
	es nur ein physikalisches Ethernet-Netzwerk gibt, das aber aus
	zwei logisch getrennten Subnetzen besteht.</p><p>In beiden Fällen werden Routingtabellen erstellt,
	damit jedes Subnetz weiß, dass dieser Rechner als Gateway
	zum anderen Subnetz arbeitet (<span class="foreignphrase"><em class="foreignphrase">inbound
	route</em></span>).  Diese Konfiguration (der
	Gateway-Rechner arbeitet als Router zwischen den Subnetzen) wird
	häufig verwendet, wenn es darum geht, Paketfilterung oder
	eine Firewall (in eine oder beide Richtungen) zu implementieren.
      </p><p>Soll dieser Rechner Pakete zwischen den beiden
	Schnittstellen weiterleiten, müssen Sie diese Funktion
	manuell konfigurieren und aktivieren.  Lesen Sie den
	nächsten Abschnitt, wenn Sie weitere Informationen zu
	diesem Thema benötigen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-dedicated-router"></a>33.2.4. Einen Router konfigurieren</h3></div></div></div><a id="idp92089168" class="indexterm"></a><p>Ein Netzwerkrouter ist einfach ein System, das Pakete von
	einer Schnittstelle zur anderen weiterleitet.
	Internetstandards und gute Ingenieurspraxis sorgten
	dafür, dass diese Funktion in FreeBSD in der Voreinstellung
	deaktiviert ist.  Sie können diese Funktion aktivieren,
	indem Sie in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>  folgende Änderung
	durchführen:</p><pre class="programlisting">gateway_enable="YES"          # Auf YES setzen, wenn der Rechner als Gateway arbeiten soll</pre><p>Diese Option setzt die <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>-Variable
	<code class="varname">net.inet.ip.forwarding</code> auf
	<code class="literal">1</code>.  Wenn Sie das Routing kurzzeitig
	unterbrechen wollen, können Sie die Variable auf
	<code class="literal">0</code> setzen.</p><a id="idp92098000" class="indexterm"></a><a id="idp92098768" class="indexterm"></a><a id="idp92099536" class="indexterm"></a><p>Ihr neuer Router benötigt nun noch Routen, um zu
	wissen, wohin er den Verkehr senden soll.  Haben Sie ein
	(sehr) einfaches Netzwerk, können Sie statische Routen
	verwenden.  FreeBSD verfügt über den Standard
	BSD-Routing-Daemon <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=routed&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">routed</span>(8)</span></a>, der RIP (sowohl Version 1
	als auch Version 2) und IRDP versteht.  BGP v4,
	OSPF v2 und andere Protokolle werden von
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/zebra/pkg-descr">net/zebra</a>
	unterstützt.  Es stehen auch kommerzielle Produkte
	wie <span class="application">gated</span> zur Verfügung.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-static-routes"></a>33.2.5. Statische Routen einrichten</h3></div><div><span class="authorgroup">Beigetragen von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Al</span> <span class="surname">Hoang</span></span>. </span></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92110032"></a>33.2.5.1. Manuelle Konfiguration</h4></div></div></div><p>Nehmen wir an, dass wir über folgendes Netzwerk
	  verfügen:</p><div class="mediaobject"><img src="advanced-networking/static-routes.png" /></div><p><code class="systemitem">RouterA</code>, ein FreeBSD-Rechner, dient als
	  Router für den Zugriff auf das Internet.  Die
	  Standardroute ist auf <code class="systemitem">10.0.0.1</code>
	  gesetzt, damit ein Zugriff auf das Internet möglich wird.
	  Wir nehmen nun an, dass <code class="systemitem">RouterB</code> bereits
	  konfiguriert ist und daher weiß, wie er andere Rechner
	  erreichen kann.  Dazu wird die Standardroute von
	  <code class="systemitem">RouterB</code> auf
	  <code class="systemitem">192.168.1.1</code> gesetzt, da dieser
	  Rechner als Gateway fungiert.</p><p>Sieht man sich die Routingtabelle für
	  <code class="systemitem">RouterA</code> an, erhält man folgende Ausgabe:
	</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>netstat -nr</code></strong>
Routing tables

Internet:
Destination        Gateway            Flags    Refs      Use  Netif  Expire
default            10.0.0.1           UGS         0    49378    xl0
127.0.0.1          127.0.0.1          UH          0        6    lo0
10.0.0/24          link#1             UC          0        0    xl0
192.168.1/24       link#2             UC          0        0    xl1</pre><p>Mit dieser Routingtabelle kann <code class="systemitem">RouterA</code>
	  unser internes Netz 2 nicht erreichen, da keine Route zum
	  Rechner <code class="systemitem">192.168.2.0/24</code>
	  vorhanden ist.  Um dies zu korrigieren, kann die Route manuell
	  gesetzt werden.  Durch den folgenden Befehl wird das
	  interne Netz 2 in die Routingtabelle des Rechners
	  <code class="systemitem">RouterA</code> aufgenommen, indem
	  <code class="systemitem">192.168.1.2</code> als nächster
	  Zwischenschritt verwenden wird:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add -net 192.168.2.0/24 192.168.1.2</code></strong></pre><p>Ab sofort kann <code class="systemitem">RouterA</code> alle Rechner des
	  Netzwerks <code class="systemitem">192.168.2.0/24</code>
	  erreichen.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92122064"></a>33.2.5.2. Routen dauerhaft einrichten</h4></div></div></div><p>Das obige Beispiel ist für die Konfiguration einer
	  statischen Route auf einem laufenden System geeignet.  Diese
	  Information geht jedoch verloren, wenn der FreeBSD-Rechner neu
	  gestartet werden muss.  Um dies zu verhindern, wird diese
	  Route in <code class="filename">/etc/rc.conf</code> eingetragen:</p><pre class="programlisting"># Add Internal Net 2 as a static route
static_routes="internalnet2"
route_internalnet2="-net 192.168.2.0/24 192.168.1.2"</pre><p>Die Variable <code class="literal">static_routes</code> enthält
	  eine Reihe von Strings, die durch Leerzeichen getrennt sind.
	  Jeder String bezieht sich auf den Namen einer Route.  In
	  unserem Beispiel hat <code class="literal">static_routes</code>
	  <em class="replaceable"><code>internalnet2</code></em> als einzigen String.
	  Zusätzlich verwendet man die Konfigurationsvariable
	  <code class="literal">route_internalnet2</code>,
	  in der alle sonstigen an <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a> zu übergebenden
	  Parameter festgelegt werden.  In obigen Beispiel hätte
	  man folgenden Befehl verwendet:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add -net 192.168.2.0/24 192.168.1.2</code></strong></pre><p>Daher wird
	  <code class="literal">"-net 192.168.2.0/24 192.168.1.2"</code> als
	  Parameter der Variable <code class="literal">route_</code> angegeben.
	</p><p>Wie bereits erwähnt, können bei
	  <code class="literal">static_routes</code> auch mehrere Strings
	  angegeben werden.  Dadurch lassen sich mehrere statische
	  Routen anlegen.  Durch folgende Zeilen werden auf einem
	  imaginären Rechner statische Routen zu den Netzwerken
	  <code class="systemitem">192.168.0.0/24</code> sowie <code class="systemitem">192.168.1.0/24</code> definiert:</p><pre class="programlisting">static_routes="net1 net2"
route_net1="-net 192.168.0.0/24 192.168.0.1"
route_net2="-net 192.168.1.0/24 192.168.1.1"</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-routing-propagation"></a>33.2.6. Verteilung von Routing-Informationen</h3></div></div></div><a id="idp92181456" class="indexterm"></a><p>Wir haben bereits darüber gesprochen, wie wir unsere
	Routen zur Außenwelt definieren, aber nicht darüber,
	wie die Außenwelt uns finden kann.</p><p>Wir wissen bereits, dass Routing-Tabellen so erstellt
	werden können, dass sämtlicher Verkehr für
	einen bestimmten Adressraum (in unserem Beispiel ein
	Klasse-C-Subnetz) zu einem bestimmten Rechner in diesem
	Netzwerk gesendet wird, der die eingehenden Pakete im Subnetz
	verteilt.</p><p>Wenn Sie einen Adressraum für Ihre Seite zugewiesen
	bekommen, richtet Ihr Diensteanbieter seine Routingtabellen so
	ein, dass der ganze Verkehr für Ihr Subnetz entlang Ihrer
	PPP-Verbindung zu Ihrer Seite gesendet wird.  Aber woher
	wissen die Seiten in der Außenwelt, dass sie die Daten an
	Ihren ISP senden sollen?</p><p>Es gibt ein System (ähnlich dem verbreiteten DNS),
	das alle zugewiesenen Adressräume verwaltet und ihre
	Verbindung zum Internet-Backbone definiert und dokumentiert.
	Der <span class="quote">&#8222;<span class="quote">Backbone</span>&#8220;</span> ist das Netz aus
	Hauptverbindungen, die den Internetverkehr in der ganzen Welt
	transportieren und verteilen.  Jeder Backbone-Rechner
	verfügt über eine Kopie von Haupttabellen, die den
	Verkehr für ein bestimmtes Netzwerk hierarchisch vom
	Backbone über eine Kette von Diensteanbietern bis hin zu
	Ihrer Seite leiten.</p><p>Es ist die Aufgabe Ihres Diensteanbieters, den
	Backbone-Seiten mitzuteilen, dass sie mit Ihrer Seite
	verbunden wurden.  Durch diese Mitteilung der Route ist nun
	auch der Weg zu Ihnen bekannt.  Dieser Vorgang wird als
	<span class="emphasis"><em>Bekanntmachung von Routen</em></span>
	(<span class="foreignphrase"><em class="foreignphrase">routing propagation</em></span>)
	bezeichnet.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-routing-troubleshooting"></a>33.2.7. Problembehebung</h3></div></div></div><a id="idp92186192" class="indexterm"></a><p>Manchmal kommt es zu Problemen bei der Bekanntmachung von
	Routen, und einige Seiten sind nicht in der Lage, Sie zu
	erreichen.  Vielleicht der nützlichste Befehl, um
	festzustellen, wo das Routing nicht funktioniert, ist
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a>.  Er ist außerdem sehr nützlich,
	wenn Sie einen entfernten Rechner nicht erreichen können
	(lesen Sie dazu auch <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a>).</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a> wird mit dem zu erreichenden Rechner
	(Host) ausgeführt.  Angezeigt werden die Gateway-Rechner
	entlang des Verbindungspfades.  Schließlich wird der
	Zielrechner erreicht oder es kommt zu einem Verbindungsabbruch
	(beispielsweise durch Nichterreichbarkeit eines
	Gateway-Rechners).</p><p>Weitere Informationen finden Sie in
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-routing-multicast"></a>33.2.8. Multicast-Routing</h3></div></div></div><a id="idp92192208" class="indexterm"></a><a id="idp92192976" class="indexterm"></a><p>FreeBSD unterstützt sowohl Multicast-Anwendungen als
	auch Multicast-Routing.  Multicast-Anwendungen müssen
	nicht konfiguriert werden, sie laufen einfach.
	Multicast-Routing muss in der Kernelkonfiguration aktiviert
	werden:</p><pre class="programlisting">options MROUTING</pre><p>Zusätzlich muss <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrouted</span>(8)</span></a>, der
	Multicast-Routing-Daemon, über die Datei
	<code class="filename">/etc/mrouted.conf</code> eingerichtet werden,
	um Tunnel und <acronym class="acronym">DVMRP</acronym> zu aktivieren.  Weitere
	Informationen zu diesem Thema finden Sie in
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrouted</span>(8)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrouted</span>(8)</span></a>, der Multicast Routing Daemon,
	  verwendet das <acronym class="acronym">DVMRP</acronym> Multicast Routing
	  Protocol, das inzwischen in den meisten Multicast-Installationen
	  durch <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pim&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pim</span>(4)</span></a> ersetzt wurde.   <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrouted</span>(8)</span></a> sowie die
	  damit in Verbindung stehenden Werkzeuge <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=map-mbone&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">map-mbone</span>(8)</span></a> und
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrinfo&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrinfo</span>(8)</span></a>können über die FreeBSD-Ports-Sammlung
	  (genauer den Port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/mrouted/pkg-descr">net/mrouted</a>) installiert werden.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="advanced-networking.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="advanced-networking.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="network-wireless.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">Kapitel 33. Weiterführende Netzwerkthemen </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 33.3. Drahtlose Netzwerke</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>