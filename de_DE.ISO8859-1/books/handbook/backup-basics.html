<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>19.12. Datensicherung</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="disks.html" title="Kapitel 19. Speichermedien" /><link rel="prev" href="backup-strategies.html" title="19.11. Backup-Strategien" /><link rel="next" href="disks-virtual.html" title="19.13. Netzwerk-, speicher- und dateibasierte Dateisysteme" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">19.12. Datensicherung</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="backup-strategies.html">Zurück</a> </td><th width="60%" align="center">Kapitel 19. Speichermedien</th><td width="20%" align="right"> <a accesskey="n" href="disks-virtual.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="backup-basics"></a>19.12. Datensicherung</h2></div></div></div><p>Die drei wichtigsten Programme zur Sicherung von Daten sind
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> und <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81604432"></a>19.12.1. Sichern und Wiederherstellen</h3></div></div></div><a id="idp81605072" class="indexterm"></a><a id="idp81605584" class="indexterm"></a><a id="idp81606096" class="indexterm"></a><a id="idp81607376" class="indexterm"></a><a id="idp81608656" class="indexterm"></a><a id="idp81609424" class="indexterm"></a><p><code class="command">dump</code> und <code class="command">restore</code> sind die
	traditionellen Backup-Programme in <span class="trademark">UNIX</span>® Systemen.  Sie betrachten das
	Laufwerk als eine Ansammlung von Blöcken, operieren also unterhalb
	des Abstraktionslevels von Dateien, Links und Verzeichnissen, die die
        Grundlage des Dateisystemkonzepts bilden.  Im Gegensatz zu anderen
        Backup-Programmen sichert <code class="command">dump</code> ein ganzes Dateisystem
        auf einem Gerät.  Es ist nicht möglich nur einen Teil des
	Dateisystems, oder einen Verzeichnisbaum, der mehr als ein Dateisystem
	umfasst, zu sichern.  Das <code class="command">dump</code>-Kommando schreibt
	keine Dateien oder Verzeichnisse auf das Band, sondern die Blöcke,
	aus denen Dateien und Verzeichnisse bestehen.  Wenn
	<code class="command">restore</code> für das Extrahieren von Daten verwendet
	wird, werden temporäre Dateien standardmäßig in
	<code class="filename">/tmp/</code> abgelegt - wenn Sie von einer Platte mit
	einem kleinen <code class="filename">/tmp</code>-Verzeichnis zurücksichern,
	müssen Sie möglicherweise die Umgebungsvariable
	<code class="envar">TMPDIR</code> auf ein Verzeichnis mit mehr freiem Speicherplatz
	setzen, damit die Wiederherstellung gelingt.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Wenn Sie mit <code class="command">dump</code> das Root-Verzeichnis
	sichern, werden <code class="filename">/home</code>, <code class="filename">/usr</code>
	und viele andere Verzeichnisse nicht gesichert, da dies normalerweise
	Mountpunkte für andere Dateisysteme oder symbolische Links
	zu diesen Dateisystemen sind.</p></div><p><code class="command">dump</code> hat einige Eigenarten, die noch aus den
        frühen Tagen der Version 6 von AT&amp;T UNIX (ca. 1975)
	stammen.  Die Parameter
        sind für 9-Spur-Bänder (6250 bpi) voreingestellt,
	nicht auf die heute üblichen Medien hoher Dichte (bis zu
	62.182 ftpi).  Bei der Verwendung der Kapazitäten
	moderner Bandlaufwerke muss diese Voreinstellung auf der
	Kommandozeile überschrieben werden.</p><a id="idp81616208" class="indexterm"></a><p><code class="command">rdump</code> und <code class="command">rrestore</code>
	können Daten über
        Netzwerk auf ein Band, das sich in einem Laufwerk eines anderen
        Computers befindet, überspielen.  Beide Programme benutzen die
        Funktionen <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcmd&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">rcmd</span>(3)</span></a> und <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ruserok&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">ruserok</span>(3)</span></a> zum
	Zugriff auf das entfernte
        Bandlaufwerk.  Daher muss der Anwender, der das Backup
        durchführt, auf dem entfernten Rechner in
        <code class="filename">.rhosts</code> eingetragen sein.</p><p>Die Argumente zu <code class="command">rdump</code> und
	<code class="command">rrestore</code> müssen
        zur Verwendung auf dem entfernten Computer geeignet sein.
	Wenn Sie zum Beispiel mit <code class="command">rdump</code> von einem
	FreeBSD-Rechner aus auf ein Exabyte-Bandlaufwerk einer Sun mit
	Namen <code class="systemitem">komodo</code> zugreifen möchten, setzen Sie
	das folgende Kommando ab:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/rdump 0dsbfu 54000 13000 126 komodo:/dev/nsa8 /dev/da0a 2&gt;&amp;1</code></strong></pre><p>Zum Ausführen dieses Kommandos müssen Sie auf dem
	entfernten Rechner in <code class="filename">.rhosts</code> eingetragen
	sein.  Die r-Kommandos sind ein großes Sicherheitsrisiko,
	daher sollten Sie deren Verwendung sorgfältig
	abwägen.</p><p>Es ist auch möglich, <code class="command">dump</code> und
	<code class="command">restore</code> über eine gesicherte Verbindung
	mit <code class="command">ssh</code> einzusetzen:</p><div class="example"><a id="idp81629264"></a><div class="example-title">Beispiel 19.1. <code class="command">dump</code> mit <span class="application">ssh</span>
	  benutzen</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/dump -0uan -f - /usr | gzip -2 | ssh -c blowfish \
	  targetuser@targetmachine.example.com dd of=/mybigfiles/dump-usr-l0.gz</code></strong></pre></div></div><br class="example-break" /><p>Sie können ebenfalls mit der internen Methode
	von <code class="command">dump</code> auf entfernte Rechner zugreifen,
	indem Sie die Umgebungsvariable <code class="envar">RSH</code>
	setzen:</p><div class="example"><a id="idp81636944"></a><div class="example-title">Beispiel 19.2. <code class="command">dump</code> über <span class="application">ssh</span>
	  mit gesetzter <code class="envar">RSH</code> benutzen</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>env RSH=/usr/bin/ssh /sbin/dump -0uan -f tatargetuser@targetmachine.example.com:/dev/sa0 /usr</code></strong></pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81639760"></a>19.12.2. <code class="command">tar</code></h3></div></div></div><a id="idp81640528" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> stammt ebenfalls aus Version 6 von AT&amp;T UNIX
	(ca. 1975).  <code class="command">tar</code> arbeitet mit dem Dateisystem,
	denn es schreibt Dateien und Verzeichnisse auf das Band.
	<code class="command">tar</code> unterstützt zwar nicht alle Optionen,
	die bei <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> zur Verfügung stehen, aber dafür
	erfordert es auch nicht die ungewöhnliche Kommando-Pipeline,
	die von <code class="command">cpio</code> verwendet wird.</p><a id="idp81657168" class="indexterm"></a><p>Um Daten mit <code class="command">tar</code> auf ein an einer
	Sun-Workstation (namens <code class="systemitem">komodo</code>) angeschlossenes
	Exabyte-Bandlaufwerk zu archivieren, geben Sie Folgendes ein:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar cf - . | rsh komodo dd of=tape-device obs=20b</code></strong></pre><p>Wenn Sie Bedenken bezüglich der Sicherheit beim Backup
        über das Netz haben, sollten Sie <code class="command">ssh</code> anstatt
        <code class="command">rsh</code> benutzen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81661136"></a>19.12.3. Cpio</h3></div></div></div><a id="idp81661776" class="indexterm"></a><a id="idp81663184" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> ist das ursprüngliche Programm von
	<span class="trademark">UNIX</span>® Systemen zum Dateitransfer mit magnetischen Medien.
	<code class="command">cpio</code> hat (neben vielen anderen
	Leistungsmerkmalen) Optionen zum Byte-Swapping, zum Schreiben
        einer Anzahl verschiedener Archivformate und zum Weiterleiten von
        Daten an andere Programme über eine Pipeline.  Dieses letzte
        Leistungsmerkmal macht <code class="command">cpio</code> zu einer
	ausgezeichneten Wahl für Installationsmedien.  Leider kann
	<code class="command">cpio</code> keine
        Dateibäume durchlaufen, so dass eine Liste der zu bearbeitenden
        Dateien über <code class="filename">stdin</code> angegeben werden
        muss.</p><p><code class="command">cpio</code> unterstützt keine Backups
	über das Netzwerk.  Man kann aber eine Pipeline und
	<code class="command">rsh</code> verwenden, um
        Daten an ein entferntes Bandlaufwerk zu senden.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>for f in directory_list; do</code></strong>
<strong class="userinput"><code>find $f &gt;&gt; backup.list</code></strong>
<strong class="userinput"><code>done</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cpio -v -o --format=newc &lt; backup.list | ssh user@host "cat &gt; backup_device"</code></strong></pre><p>Dabei steht <em class="replaceable"><code>directory_list</code></em> für
	eine Aufzählung der Verzeichnisse, die Sie sichern wollen.
	<em class="replaceable"><code>user</code></em>@<em class="replaceable"><code>host</code></em>
	gibt den Benutzer auf dem Zielrechner an, der die Sicherung
	laufen lässt.  Der Ort der Sicherung wird durch
	<em class="replaceable"><code>backup_device</code></em> angegeben
	(z.B. <code class="filename">/dev/nsa0</code>).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81677264"></a>19.12.4. <code class="command">pax</code></h3></div></div></div><a id="idp81678032" class="indexterm"></a><a id="idp81679312" class="indexterm"></a><a id="idp81679952" class="indexterm"></a><a id="idp81680464" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pax&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pax</span>(1)</span></a> ist die Antwort von IEEE/<span class="trademark">POSIX</span>® auf
	<code class="command">tar</code> und <code class="command">cpio</code>.
        Über die Jahre hinweg sind die verschiedenen
        Versionen von <code class="command">tar</code> und <code class="command">cpio</code> leicht
	inkompatibel geworden.  Daher hat <span class="trademark">POSIX</span>®, statt eine Standardisierung
	zwischen diesen auszufechten, ein neues Archivprogramm geschaffen.
	<code class="command">pax</code> versucht viele der unterschiedlichen
	<code class="command">cpio</code>- und <code class="command">tar</code>-Formate zu lesen
        und zu schreiben, außerdem einige neue, eigene Formate.  Die
        Kommandostruktur ähnelt eher <code class="command">cpio</code> als
	<code class="command">tar</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-programs-amanda"></a>19.12.5. <span class="application">Amanda</span></h3></div></div></div><a id="idp81695824" class="indexterm"></a><a id="idp81697104" class="indexterm"></a><p><span class="application">Amanda</span>
        (Advanced Maryland Network Disk Archiver) ist ein
        Client/Server-Backupsystem, nicht nur ein einzelnes Programm.
	Ein <span class="application">Amanda</span>-Server kann auf einem
	einzigen Bandlaufwerk Datensicherungen von jeder beliebigen
	Anzahl von Computern speichern, sofern auf diesen jeweils ein
	<span class="application">Amanda</span>-Client läuft und sie
	über Netzwerk mit dem <span class="application">Amanda</span>-Server
	verbunden sind.</p><p>Ein häufiges Problem bei Standorten mit einer Anzahl
        großer Festplatten ist, dass das Kopieren der Daten auf
	Band langsamer vor sich geht als solche Daten anfallen.
	<span class="application">Amanda</span> löst dieses Problem
	durch Verwendung einer <span class="quote">&#8222;<span class="quote">Holding Disk</span>&#8220;</span>, einer Festplatte
        zum gleichzeitigen Zwischenspeichern mehrerer Dateisysteme.</p><p>Für Datensicherungen über einen längeren
	Zeitraum erzeugt <span class="application">Amanda</span>
	<span class="quote">&#8222;<span class="quote">Archivsets</span>&#8220;</span> von allen Dateisystemen, die in
	<span class="application">Amandas</span> Konfigurationsdatei genannt
	werden.  Ein Archivset ist eine Gruppe von Bändern mit
	vollen Backups und Reihen von inkrementellen (oder differentiellen)
	Backups, die jeweils nur die Unterschiede zum vorigen
        Backup enthalten.  Zur Wiederherstellung von beschädigten
        Dateisystemen benötigt man Das Letzte volle Backup und alle
        darauf folgenden inkrementellen Backups.</p><p>Die Konfigurationsdatei ermöglicht die Feineinstellung
	der Backups und des Netzwerkverkehrs von
	<span class="application">Amanda</span>.  <span class="application">Amanda</span>
	kann zum Schreiben der Daten auf das Band jedes der oben
	beschriebenen Backuprogramme verwenden.
	<span class="application">Amanda</span> ist nicht Teil des Basissystems,
	Sie müssen <span class="application">Amanda</span> über
	die Ports-Sammlung oder als Paket installieren.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81705040"></a>19.12.6. Tue nichts</h3></div></div></div><p><span class="quote">&#8222;<span class="quote">Tue nichts</span>&#8220;</span> ist kein Computerprogramm, sondern die
        am häufigsten angewendete Backupstrategie.  Diese kostet nichts,
        man muss keinen Backup Plan befolgen, einfach nur nein sagen.  Wenn
        etwas passiert, einfach grinsen und ertragen!</p><p>Wenn Ihre Zeit und Ihre Daten nicht so wichtig sind, dann ist
        die Strategie <span class="quote">&#8222;<span class="quote">Tue nichts</span>&#8220;</span> das geeignetste Backup-Programm
        für Ihren Computer.  Aber <span class="trademark">UNIX</span>® ist ein nützliches Werkzeug,
	Sie müssen damit rechnen, dass Sie innerhalb von sechs Monaten
	eine Sammlung von Dateien haben, die für Sie wertvoll geworden
        sind.</p><p><span class="quote">&#8222;<span class="quote">Tue nichts</span>&#8220;</span> ist die richtige Backupmethode für
        <code class="filename">/usr/obj</code> und andere Verzeichnisbäume, die
        vom Computer exakt wiedererzeugt werden können.  Ein Beispiel
        sind die Dateien, die diese Handbuchseiten darstellen &#8211; sie
        wurden aus Quelldateien im Format <acronym class="acronym">SGML</acronym> erzeugt.
	Es ist nicht nötig, Sicherheitskopien der Dateien in den
        sekundären Formaten wie etwa <acronym class="acronym">HTML</acronym> zu
        erstellen.  Die Quelldateien in <acronym class="acronym">SGML</acronym> sollten jedoch
        in die regelmäßigen Backups mit einbezogen werden.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81718224"></a>19.12.7. Welches Backup-Programm ist am Besten?</h3></div></div></div><a id="idp81718864" class="indexterm"></a><p><code class="command">dump</code>, <span class="emphasis"><em>Punkt und Schluss.</em></span>
	Elizabeth D. Zwicky hat alle hier genannten Backup-Programme
	bis zur Erschöpfung ausgetestet.  Ihre eindeutige Wahl zur
	Sicherung aller Daten mit Berücksichtigung aller Besonderheiten
	von <span class="trademark">UNIX</span>® Dateisystemen ist <code class="command">dump</code>.</p><p>Elizabeth erzeugte Dateisysteme mit einer großen Vielfalt
        ungewöhnlicher Bedingungen (und einiger gar nicht so
        ungewöhnlicher) und testete jedes Programm durch ein Backup und
        eine Wiederherstellung dieser Dateisysteme.  Unter den Besonderheiten
        waren Dateien mit Löchern, Dateien mit Löchern und einem
        Block mit Null-Zeichen, Dateien mit ausgefallenen Buchstaben im
        Dateinamen, unlesbare und nichtschreibbare Dateien,
        Gerätedateien, Dateien, deren Länge sich während des
        Backups ändert, Dateien, die während des Backups erzeugt und
        gelöscht werden, u.v.m.  Sie berichtete über ihre Ergebnisse
        in LISA V im Oktober 1991, s. <a class="link" href="http://www.coredumps.de/doc/dump/zwicky/testdump.doc.html" target="_top">Torture-testing
          Backup and Archive Programs</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81722576"></a>19.12.8. Die Wiederherstellung in einem Notfall</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81723216"></a>19.12.8.1. Vor dem Unglück</h4></div></div></div><p>Es sind nur vier Vorkehrungen zu treffen, um auf jedes
          erdenkliche Unglück vorbereitet zu sein.</p><a id="idp81740752" class="indexterm"></a><p>Als erstes drucken Sie das bsdlabel jeder Ihrer Festplatten
          (z.B. mittels <code class="command">bsdlabel da0 | lpr</code>), die
          Partitions- und Dateisystemtabelle jeder Festplatte (mit
          <code class="filename">/etc/fstab</code>) sowie alle Bootmeldungen, jeweils
          in zweifacher Ausfertigung.</p><a id="idp81742800" class="indexterm"></a><p>Zweitens, brennen Sie eine <span class="quote">&#8222;<span class="quote">livefs</span>&#8220;</span>-CD.
	  Diese CD-ROM enthält alle nötigen Programme, um in einen
          Reperaturmodus zu starten, aus dem heraus Sie unter anderem
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">restore</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a>,
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> sowie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> starten
	  können.  ISO-Abbilder für das <span class="quote">&#8222;<span class="quote">livefs</span>&#8220;</span>-System
	  finden Sie unter <code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/ISO-IMAGES/9.3/FreeBSD-9.3-RELEASE-i386-livefs.iso" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/ISO-IMAGES/10.1/FreeBSD-10.1-RELEASE-i386-livefs.iso</a></code>.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Seit FreeBSD 9.0-RELEASE sind ISO-Abbilder
	    für das <span class="quote">&#8222;<span class="quote">livefs</span>&#8220;</span>-System nicht mehr verfügbar.
	    Neben den ISO-Abbildern für CD-ROM können auch Abbilder
	    für USB-Datenspeicher verwendet werden, um ein System
	    wiederherzustellen.  Das <span class="quote">&#8222;<span class="quote">memstick</span>&#8220;</span>-Abbild
	    für FreeBSD/i386 10.1-RELEASE finden Sie
	    unter <code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/i386/ISO-IMAGES/10.1/FreeBSD-10.1-RELEASE-i386-memstick.img" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/i386/ISO-IMAGES/10.1/FreeBSD-10.1-RELEASE-i386-memstick.img</a></code>.</p></div><p>Drittens, machen Sie regelmäßig Backups auf Band.
	  Jede Änderung seit Ihrem letzten Backup kann
	  unwiederbringlich verloren gehen.  Versehen Sie die
	  Backup-Bänder mit Schreibschutz.</p><p>Viertens, testen Sie das in Schritt 2 erstellte
          <span class="quote">&#8222;<span class="quote">livefs</span>&#8220;</span>-System sowie die für das Backup
          notwendigen Bänder.  Dokumentieren Sie diesen Test und
          bewahren Sie diese Notizen zusammen mit der
          <span class="quote">&#8222;<span class="quote">livefs</span>&#8220;</span>-CD und den Bändern auf.  Wenn der
          Ernstfall eintritt, werden Sie vielleicht so genervt
          sein, dass Sie ohne Ihre Notizen vielleicht das Backup auf Ihren
          Bändern zerstören.  (Wie das geht?  Man braucht nur
          unglücklicherweise den Befehl <code class="command">tar cvf
            /dev/sa0</code> einzugeben um ein Band zu
          überschreiben).</p><p>Als zusätzliche Sicherheitsvorkehrung, kann man jeweils
          die <span class="quote">&#8222;<span class="quote">livefs</span>&#8220;</span>-CD und Bänder doppelt erstellen.
          Eine der Kopien sollte an einem entfernten Standort aufbewahrt
          werden.  Ein entfernter Standort ist NICHT der Keller im gleichen
          Bürogebäude.  Eine Anzahl von Firmen im World Trade Center
          musste diese Lektion auf die harte Tour lernen.  Ein entfernter
          Standort sollte von Ihrem Computer und Ihren Festplatten
          physikalisch durch eine erhebliche Entfernung getrennt sein.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81754704"></a>19.12.8.2. Nach dem Unglück</h4></div></div></div><p>Die Schlüsselfrage ist, ob Ihre Hardware überlebt
          hat.  Denn da Sie ja regelmäßig Backups angefertigt
          haben, brauchen Sie sich um die Software keine Sorgen zu
          machen.</p><p>Falls die Hardware beschädigt wurde, ersetzen Sie zuerst
          die defekten Teile bevor Sie den Computer benutzen.</p><p>Falls die Hardware funktioniert, legen Sie die
          <span class="quote">&#8222;<span class="quote">livefs</span>&#8220;</span>-CD in das Laufwerk ein und starten den
          Rechner, wodurch das originale Installationsprogramm von FreeBSD
          gestartet wird.  Legen Sie zuerst Ihr Land fest.  Danach
          öffnen Sie das Menü
          <code class="literal">Fixit -- Repair mode with CDROM/DVD/floppy or start
          a shell.</code> und wählen den Eintrag
          <span class="guimenuitem">CDROM/DVD -- Use the live filesystem
          CDROM/DVD</span> aus.  <code class="command">restore</code>
          und die anderen Programme, die Sie benötigen, befinden
          sich dann im Verzeichnis <code class="filename">/mnt2/rescue</code>.</p><p>Stellen Sie die Dateisysteme nacheinander wieder her.</p><a id="idp81763024" class="indexterm"></a><a id="idp81763920" class="indexterm"></a><a id="idp81764688" class="indexterm"></a><a id="idp81765584" class="indexterm"></a><p>Versuchen Sie die Root-Partition Ihrer ersten Festplatte
          einzuhängen (z.B. mit <code class="command">mount /dev/sd0a
            /mnt</code>).  Wenn das Bsdlabel beschädigt wurde,
	  benutzen Sie <code class="command">bsdlabel</code> um die Platte
	  neu zu partitionieren und zu benennen und zwar so, dass die
	  Festplatte mit dem Label übereinstimmt, das Sie
	  ausgedruckt und aufbewahrt haben.</p><p>Verwenden Sie <code class="command">newfs</code> um neue Dateisysteme
	  auf den
          Partitionen anzulegen.  Hängen Sie nun die Root-Partition der
          Festplatte mit Schreibzugriff ein (mit <code class="command">mount -u -o rw
            /mnt</code>).  Benutzen Sie Ihr Backup-Programm um die Daten
          für das jeweilige Dateisystem aus den Backup-Bändern
          wieder her zu stellen (z.B. durch <code class="command">restore vrf
            /dev/sta</code>).  Hängen Sie das Dateisystem wieder aus
          (z.B. durch <code class="command">umount /mnt</code>).  Wiederholen Sie diesen
          Ablauf für jedes betroffene Dateisystem.</p><p>Sobald Ihr System wieder läuft, machen Sie gleich wieder
          ein vollständiges Backup auf neue Bänder.  Denn die
          Ursache für den Absturz oder den Datenverlust kann wieder
          zuschlagen.  Eine weitere Stunde, die Sie jetzt noch
          dranhängen, kann Ihnen später ein weiteres Missgeschick
          ersparen.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="backup-strategies.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="disks-virtual.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">19.11. Backup-Strategien </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 19.13. Netzwerk-, speicher- und dateibasierte Dateisysteme</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>