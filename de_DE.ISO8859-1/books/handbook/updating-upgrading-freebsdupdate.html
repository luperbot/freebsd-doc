<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>26.2. FreeBSD-Update</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="updating-upgrading.html" title="Kapitel 26. FreeBSD aktualisieren" /><link rel="prev" href="updating-upgrading.html" title="Kapitel 26. FreeBSD aktualisieren" /><link rel="next" href="updating-upgrading-portsnap.html" title="26.3. Portsnap: Ein Werkzeug zur Aktualisierung der Ports-Sammlung" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">26.2. FreeBSD-Update</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="updating-upgrading.html">Zurück</a> </td><th width="60%" align="center">Kapitel 26. FreeBSD aktualisieren</th><td width="20%" align="right"> <a accesskey="n" href="updating-upgrading-portsnap.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="updating-upgrading-freebsdupdate"></a>26.2. FreeBSD-Update</h2></div><div><span class="authorgroup">Geschrieben von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div><div><span class="authorgroup">Basierend auf bereitgestellten Mitschriften von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Colin</span> <span class="surname">Percival</span></span>. </span></div><div><span class="authorgroup">Übersetzt von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Benedict</span> <span class="surname">Reuschling</span></span>. </span></div></div></div><a id="idp85092816" class="indexterm"></a><a id="idp85093328" class="indexterm"></a><p>Das Einspielen von Sicherheitsaktualisierungen ist ein wichtiger
      Bestandteil bei der Wartung von Computersoftware, besonders wenn es um
      das Betriebssystem geht.  Für lange Zeit war dieser Prozess unter
      FreeBSD nicht einfach.  Fehlerbehebungen mussten auf den Quellcode
      angewendet werden, danach wurde der Code zu neuen Binärdateien
      übersetzt und schliesslich mussten diese Dateien neu installiert
      werden.</p><p>Das ist seit längerem nicht mehr der Fall, da FreeBSD jetzt ein
       Werkzeug namens <code class="command">freebsd-update</code> enthält.  Dieses
       Werkzeug bringt zwei getrennte Funktionen mit sich.   Die erste Funktion
       ermöglicht die Anwendung von Sicherheitsaktualisierungen im
       Binärformat auf das FreeBSD Basissystem, ohne dieses neu zu
       übersetzen und zu installieren.  Die zweite Funktion
       unterstützt Aktualisierungen zwischen Haupt- und
       Unterversionen.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Binäre Aktualisierungen sind für alle Architekturen und
        Releases verfügbar, die aktuell vom FreeBSD Security Team betreut
        werden.  Vor
        der Aktualisierung auf eine neue Release-Version sollten die aktuellen
        Ankündigungen zu dem Release gelesen werden, da diese wichtige
        Informationen zu der gewünschten Version enthalten.  Diese
        Ankündigungen finden Sie unter dem folgenden Link: <code class="uri"><a class="uri" href="http://www.FreeBSD.org/releases/" target="_top">http://www.FreeBSD.org/releases/</a></code>.</p></div><p>Wenn eine <code class="command">crontab</code> existiert, welche die
      Eigenschaften von <code class="command">freebsd-update</code> verwendet, muss diese
      deaktiviert werden, bevor die folgende Aktion gestartet wird.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-config-file"></a>26.2.1. Die Konfigurationsdatei</h3></div></div></div><p>Manche Anwender möchten sicherlich Einstellungen in der
        Standard-Konfigurationsdatei unter
        <code class="filename">/etc/freebsd-update.conf</code> vornehmen, um
        bessere Kontrolle über den
        gesamten Prozess zu besitzen.  Die Optionen sind sehr gut dokumentiert,
        jedoch benötigen die folgenden ein paar zusätzliche
        Erklärungen:</p><pre class="programlisting"># Components of the base system which should be kept updated.
Components src world kernel</pre><p>Dieser Parameter kontrolliert, welche Teile von FreeBSD auf dem
        aktuellen Stand gehalten werden sollen.  Die Voreinstellung ist es, den
        Quellcode zu aktualisieren, das gesamte Basissystem sowie den Kernel.
        Die Komponenten sind die gleichen wie während der Installation,
        also würde beispielsweise das hinzufügen von
        <code class="literal">world/games</code> an dieser Stelle es erlauben,
        Aktualisierungen für Spiele anzuwenden.
        Die Verwendung von <code class="literal">src/bin</code> erlaubt es, den
        Quellcode in <code class="filename">src/bin</code> aktuell zu
        halten.</p><p>Die beste Einstellung ist, diese Option so zu belassen, da eine
        Änderung es bedingt, dass man als Benutzer jede Komponente
        auflisten muss, die aktualisiert werden soll.  Dies könnte
        katastrophale Folgen nach sich ziehen, da der Quellcode und die
        Binärdateien dadurch nicht mehr synchron wären.</p><pre class="programlisting"># Paths which start with anything matching an entry in an IgnorePaths
# statement will be ignored.
IgnorePaths</pre><p>Fügen Sie Pfade wie <code class="filename">/bin</code> oder <code class="filename">/sbin</code> hinzu, um diese speziellen
        Verzeichnisse während des Aktualisierungsprozesses unberührt
        zu lassen.  Diese Option kann verwendet werden, um zu verhindern, dass
        <code class="command">freebsd-update</code> lokale Änderungen
        überschreibt.</p><pre class="programlisting"># Paths which start with anything matching an entry in an UpdateIfUnmodified
# statement will only be updated if the contents of the file have not been
# modified by the user (unless changes are merged; see below).
UpdateIfUnmodified /etc/ /var/ /root/ /.cshrc /.profile</pre><p>Aktualisieren Sie Konfigurationsdateien in den angegebenen
        Verzeichnissen nur, wenn diese nicht geändert wurden.  Jegliche
        Änderung, die der Benutzer daran vorgenommen hat, wird die
        automatische Aktualisierung dieser Dateien ungültig machen.
        Es gibt eine weitere Option <code class="literal">KeepModifiedMetadata</code>,
        die <code class="command">freebsd-update</code> instruiert, die Änderungen
        während der Zusammenführung zu speichern.</p><pre class="programlisting"># When upgrading to a new FreeBSD release, files which match MergeChanges
# will have any local changes merged into the version from the new release.
MergeChanges /etc/ /var/named/etc/</pre><p>Eine Liste von Verzeichnissen mit Konfigurationsdateien, in denen
        <code class="command">freebsd-update</code> Zusammenführungen versuchen
        soll.  Dieser Verschmelzungsprozess von Dateien ist eine Serie von
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>-Korrekturen, ähnlich wie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> mit
        weniger Optionen. Die Änderungen werden entweder akzeptiert,
        öffnen einen Editor oder <code class="command">freebsd-update</code> bricht
        ab.  Wenn Sie im Zweifel sind, sichern Sie das <code class="filename">/etc</code> Verzeichnis und akzeptieren einfach
        die Änderungen. Lesen Sie <a class="xref" href="makeworld.html#mergemaster" title="26.7.11.1. mergemaster">Abschnitt 26.7.11.1, &#8222;<code class="command">mergemaster</code>&#8220;</a>, um
        Informationen über das <code class="command">mergemaster</code>-Kommando
        zu erhalten.</p><pre class="programlisting"># Directory in which to store downloaded updates and temporary
# files used by FreeBSD Update.
# WorkDir /var/db/freebsd-update</pre><p>In diesem Verzeichnis werden alle Korrekturen und temporären
        Dateien abgelegt.  Für Fälle in denen der Anwender eine
        Versionsaktualisierung vornimmt, sollte diesem Verzeichnis mindestens
        ein Gigabyte Festplattenspeicher zur Verfügung stehen.</p><pre class="programlisting"># When upgrading between releases, should the list of Components be
# read strictly (StrictComponents yes) or merely as a list of components
# which *might* be installed of which FreeBSD Update should figure out
# which actually are installed and upgrade those (StrictComponents no)?
# StrictComponents no</pre><p>Wenn dies auf <code class="literal">yes</code> gesetzt ist, wird
        <code class="command">freebsd-update</code> annehmen, dass die
        <code class="literal">Components</code>-Liste vollständig ist und nicht
        versuchen, Änderungen ausserhalb dieser Liste zu tätigen.
        Tatsächlich wird <code class="command">freebsd-update</code> versuchen, jede
        Datei zu aktualisieren, die zu der <code class="literal">Components</code>-Liste
        gehört.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-security-patches"></a>26.2.2. Sicherheitsaktualisierungen</h3></div></div></div><p>Sicherheitsaktualisierungen sind auf einer entfernten Maschine
        abgelegt und können durch das folgende Kommando heruntergeladen
        und installiert werden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update fetch</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><p>Wenn irgendeine Änderung auf den Kernel angewendet wurde
        benötigt das System einen Neustart.  Wenn alles gut verlaufen ist,
        sollte das System aktualisiert sein und
        <code class="command">freebsd-update</code> kann als nächtlicher
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>-Job ablaufen.  Ein Eintrag in der Datei
        <code class="filename">/etc/crontab</code> ist für diese Aufgabe
        ausreichend:</p><pre class="programlisting">@daily                                  root    freebsd-update cron</pre><p>Dieser Eintrag besagt, dass einmal am Tag
        <code class="command">freebsd-update</code> ausgeführt wird.  Auf diese
        Weise kann <code class="command">freebsd-update</code> nur durch die Verwendung
        des <code class="option">cron</code>-Arguments prüfen, ob Aktualisierungen
        vorliegen.  Wenn Korrekturen existieren, werden diese automatisch auf
        die lokale Festplatte heruntergeladen, aber nicht eingespielt.  Der
        <code class="systemitem">root</code>-Benutzer bekommt eine Nachricht, damit dieser
        die Korrekturen manuell installiert.</p><p>Sollte irgendetwas schief gelaufen sein, kann
        <code class="command">freebsd-update</code> den letzten Satz von Änderungen
        mit dem folgenden Befehl zurückrollen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update rollback</code></strong></pre><p>Sobald dieser Vorgang abgeschlossen ist, sollte das System neu
        gestartet werden, wenn der Kernel oder ein beliebiges Kernelmodul
        geändert wurde.  Dies ermöglicht es FreeBSD, die neuen
        Binärdateien in den Hauptspeicher zu laden.</p><p>Das <code class="command">freebsd-update</code>-Werkzeug kann nur den
        <code class="filename">GENERIC</code>-Kernel automatisch aktualisieren.  Wenn
        ein selbstkonfigurierter Kernel verwendet wird, muss dieser neu
        erstellt und installiert werden, nachdem
        <code class="command">freebsd-update</code> den Rest der Aktualisierungen
        durchgeführt hat.  Allerdings wird
        <code class="command">freebsd-update</code> den
        <code class="filename">GENERIC</code>-Kernel in <code class="filename">/boot/GENERIC</code> erkennen und aktualisieren
        (falls dieser existiert), sogar dann, wenn dies nicht der
        aktuell verwendete Kernel des Systems ist.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Es ist eine gute Idee, immer eine Kopie des
          <code class="filename">GENERIC</code>-Kernels in <code class="filename">/boot/GENERIC</code> aufzubewahren.  Das wird
          bei der Diagnose von verschiedenen Problemen eine grosse Hilfe sein,
          sowie bei der Durchführung von Versionsaktualisierungen mit
          <code class="command">freebsd-update</code>, wie in <a class="xref" href="updating-upgrading-freebsdupdate.html#freebsdupdate-upgrade" title="26.2.3. Aktualisierungen an Haupt- und Unterversionen">Abschnitt 26.2.3, &#8222;Aktualisierungen an Haupt- und Unterversionen&#8220;</a> beschrieben ist.</p></div><p>Solange die Standardkonfiguration in
        <code class="filename">/etc/freebsd-update.conf</code> nicht geändert
        wurde, wird <code class="command">freebsd-update</code> die aktualisierten
        Quellcodedateien des Kernels zusammen mit dem Rest der Neuerungen
        installieren.  Die erneute Übersetzung und Installation ihres
        neuen, selbstkonfigurierten Kernels kann dann auf die übliche
        Art und Weise durchgeführt werden.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Die Aktualisierungen, die über
          <code class="command">freebsd-update</code> verteilt werden, betreffen nicht
          immer den Kernel.  Es ist nicht notwendig, den selbstkonfigurierten
          Kernel neu zu erstellen, wenn die Kernelquellen nicht durch die
          Ausführung von <code class="command">freebsd-update install</code>
          geändert wurden.  Allerdings wird
          <code class="command">freebsd-update</code> auf alle Fälle die Datei
          <code class="filename">/usr/src/sys/conf/newvers.sh</code> aktualisieren.
          Der aktuelle Patch-Level (angegeben durch die
          <code class="literal">-p</code>-Nummer, die von dem Kommando <code class="command">uname
          -r</code> ausgegeben wird) wird aus dieser Datei ausgelesen.
          Die Neuinstallation des selbstkonfigurierten Kernels, selbst wenn
          sich daran nichts geändert hat, erlaubt es <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uname&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">uname</span>(1)</span></a>, den
          aktuellen Patch-Level des Systems korrekt wiederzugeben.  Dies ist
          besonders hilfreich, wenn mehrere Systeme gewartet werden, da es
          eine schnelle Einschätzung der installierten Aktualisierungen in
          jedem einzelnen System ermöglicht.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-upgrade"></a>26.2.3. Aktualisierungen an Haupt- und Unterversionen</h3></div></div></div><p>Dieser Prozess entfernt alte Objekt-Dateien und Bibliotheken, was
        dazu führt, dass die meisten Anwendungen von Drittherstellern
        nicht mehr funktionieren.  Es wird empfohlen, dass alle installierten
        Ports entweder entfernt und neu installiert oder zu einem späteren
        Zeitpunkt mittels <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a> aktualisiert werden.
        Die meisten Anwender werden wahrscheinlich einen Testlauf mittels des
        folgenden Kommandos durchführen wollen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -af</code></strong></pre><p>Dies sorgt dafür, dass alles korrekt neu installiert wird.
        Beachten Sie, dass das Setzen der
        <code class="varname">BATCH</code>-Umgebungsvariable auf <code class="literal">yes</code>
        während dieses Prozesses auf jede Eingabe mit
        <code class="literal">ja</code> antwortet, was es nicht mehr notwendig macht,
        manuell eingreifen zu müssen.</p><p>Wenn ein selbstkonfigurierter Kernel verwendet wird, ist der
        Aktualisierungsprozess ein kleines bisschen aufwändiger.  Eine
        Kopie des <code class="filename">GENERIC</code>-Kernels wir benötigt und
        sollte in <code class="filename">/boot/GENERIC</code> abgelegt
        sein.  Wenn der <code class="filename">GENERIC</code>-Kernel nicht bereits im
        System vorhanden ist, kann dieser über eine der folgenden Methoden
        bezogen werden:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Wenn ein eigener Kernel genau einmal gebaut wurde, ist der
            Kernel im Verzeichnis <code class="filename">/boot/kernel.old</code> in Wirklichkeit der
            <code class="filename">GENERIC</code>-Kernel.  Benennen Sie einfach dieses
            Verzeichnis in <code class="filename">/boot/GENERIC</code> um.</p></li><li class="listitem"><p>Angenommen, direkter Zugriff auf die Maschine ist möglich,
            so kann eine Kopie des <code class="filename">GENERIC</code>-Kernels von den
            CD-ROM-Medien installiert werden.  Legen Sie die Installations-CD
            ein und benutzen Sie die folgenden Befehle:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /cdrom</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /cdrom/X.Y-RELEASE/kernels</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./install.sh GENERIC</code></strong></pre><p>Ersetzen Sie <code class="filename">X.Y-RELEASE</code>
           mit der richtigen Version der Veröffentlichung, die Sie
           verwenden.  Der <code class="filename">GENERIC</code>-Kernel wird
           standardmässig in <code class="filename">/boot/GENERIC</code> installiert.</p></li><li class="listitem"><p>Falls alle obigen Schritte fehlschlagen, kann der
            <code class="filename">GENERIC</code>-Kernel folgendermassen aus den Quellen
            neu gebaut und installiert werden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>env DESTDIR=/boot/GENERIC make kernel</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv /boot/GENERIC/boot/kernel/* /boot/GENERIC</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm -rf /boot/GENERIC/boot</code></strong></pre><p>Damit dieser Kernel als <code class="filename">GENERIC</code>-Kernel von
            <code class="command">freebsd-update</code> erkannt wird, darf die
            <code class="filename">GENERIC</code>-Konfigurationsdatei in keiner Weise
            geändert worden sein.  Es wird ebenfalls empfohlen, dass
            dieser ohne irgendwelche speziellen Optionen erstellt wird
            (bevorzugt mit einer leeren
            <code class="filename">/etc/make.conf</code>).</p></li></ul></div><p>Der Neustart in den <code class="filename">GENERIC</code>-Kernel ist zu
        diesem Zeitpunkt nicht notwendig.</p><p>Aktualisierungen an Haupt- und Unterversionen können
        durchgeführt werden, wenn man <code class="command">freebsd-update</code>
        eine Release-Version als Ziel übergibt.  Beispielsweise wird das
        folgende Kommando das System auf FreeBSD 8.1 aktualisieren:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update -r 8.1-RELEASE upgrade</code></strong></pre><p>Nachdem das Kommando empfangen wurde, überprüft
        <code class="command">freebsd-update</code> die Konfigurationsdatei und das
        aktuelle System, um die nötigen Informationen für die
        Systemaktualisierung zu sammeln.  Eine Bildschirmausgabe wird anzeigen,
        welche Komponenten erkannt und welche nicht erkannt wurden.
        Zum Beispiel:</p><pre class="screen">Looking up update.FreeBSD.org mirrors... 1 mirrors found.
Fetching metadata signature for 8.0-RELEASE from update1.FreeBSD.org... done.
Fetching metadata index... done.
Inspecting system... done.

The following components of FreeBSD seem to be installed:
kernel/smp src/base src/bin src/contrib src/crypto src/etc src/games
src/gnu src/include src/krb5 src/lib src/libexec src/release src/rescue
src/sbin src/secure src/share src/sys src/tools src/ubin src/usbin
world/base world/info world/lib32 world/manpages

The following components of FreeBSD do not seem to be installed:
kernel/generic world/catpages world/dict world/doc world/games
world/proflibs

Does this look reasonable (y/n)? y</pre><p>An diesem Punkt wird <code class="command">freebsd-update</code> versuchen,
        alle notwendigen Dateien für die Aktualisierung herunter zu laden.
        In manchen Fällen wird der Benutzer mit Fragen konfrontiert, um
        festzustellen, was installiert werden soll oder auf welche Art und
        Weise fortgesetzt werden soll.</p><p>Wenn ein selbstkonfigurierter Kernel benutzt wird, produziert der
        vorherige Schritt eine Warnung ähnlich zu der folgenden:</p><pre class="screen">WARNING: This system is running a "<em class="replaceable"><code>MYKERNEL</code></em>" kernel, which is not a
kernel configuration distributed as part of FreeBSD 8.0-RELEASE.
This kernel will not be updated: you MUST update the kernel manually
before running "/usr/sbin/freebsd-update install"</pre><p>Diese Warnung kann an dieser Stelle problemlos ignoriert
        werden.  Der aktualisierte <code class="filename">GENERIC</code>-Kernel wird als
        ein Zwischenschritt im Aktualisierungsprozess verwendet.</p><p>Nachdem alle Korrekturen auf das lokale System heruntergeladen
        wurden, werden diese nun eingespielt.  Dieser Prozess kann eine gewisse
        Zeit in Anspruch nehmen, abhängig von der Geschwindigkeit und
        Auslastung der Maschine.  Konfigurationsdateien werden ebenfalls
        zusammengefügt - dieser Teil der Prozedur benötigt einige
        Benutzereingaben, da eine Datei möglicherweise von Hand
        zusammengefasst werden muss oder ein Editor erscheint auf dem
        Bildschirm zum manuellen bearbeiten.  Die Ergebnisse von jeder
        erfolgreichen Zusammenfassung werden dem Benutzer angezeigt,
        während der Prozess weiterläuft.  Eine fehlgeschlagene oder
        ignorierte Zusammenfassung wird den Prozess sofort beenden.  Benutzer
        sollten eine Sicherung von <code class="filename">/etc</code>
        anlegen und wichtige Dateien später manuell vereinen,
        beispielsweise <code class="filename">master.passwd</code> oder
        <code class="filename">group</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Das System ist noch nicht verändert worden, alle Korrekturen
          und Vereinigungen sind in einem anderen Verzeichnis vorgenommen
          worden.  Wenn alle Korrekturen erfolgreich eingespielt, alle
          Konfigurationsdateien zusammengefügt wurden und es den Anschein
          hat, dass der Prozess problemlos verlaufen wird, müssen die
          Änderungen vom Anwender noch angewendet werden.</p></div><p>Sobald dieser Prozess abgeschlossen ist, können die
        Aktualisierungen über das folgende Kommando auf die Platte
        geschrieben werden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><p>Der Kernel und die Module werden zuerst aktualisiert.  Zu diesem
        Zeitpunkt muss die Maschine neu gestartet werden.  Wenn das System
        einen selbstkonfigurierten Kernel verwendet, benutzen Sie das
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nextboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nextboot</span>(8)</span></a>-Kommando, um den Kernel für den nächsten
        Neustart auf <code class="filename">/boot/GENERIC</code> zu
        setzen (welcher aktualisiert wurde):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>nextboot -k GENERIC</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Warnung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Bevor mit dem <code class="filename">GENERIC</code>-Kernel das System neu
          gestartet wird, vergewissern Sie sich, dass alle notwendigen Treiber
          für ihr System enthalten sind, um korrekt zu starten (und
          schliessen Sie ihn ans Netzwerk an, falls auf die Maschine, die
          aktualisiert wird, von der Ferne aus zugegriffen wird).  Achten Sie
          besonders darauf, dass wenn der vorherige selbstkonfigurierte Kernel
          Funktionalität beinhaltet, die von Kernelmodulen zur
          Verfügung gestellt wurde, dass diese temporär in den
          <code class="filename">GENERIC</code>-Kernel über die Datei
          <code class="filename">/boot/loader.conf</code> übernommen werden.
          Sie sollten ebenfalls nicht benötigte Dienste, eingehängte
          Platten, verbundene Netzlaufwerke, usw. deaktivieren, bis der
          Aktualisierungsprozess abgeschlossen ist.</p></div><p>Die Maschine sollte nun mit dem aktualisierten Kernel neu
        gestartet werden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown -r now</code></strong></pre><p>Sobald das System wieder hochgefahren wurde, muss
        <code class="command">freebsd-update</code> erneut gestartet werden.  Der Zustand
        des Prozesses wurde zuvor gesichert und deshalb wird
        <code class="command">freebsd-update</code> nicht von vorne beginnen, jedoch alle
        alten Shared-Libraries und Objektdateien löschen.  Um zu diesem
        Zustand zu gelangen, setzen Sie das folgende Kommando ab:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Abhängig davon, ob irgendwelche Bibliotheksversionen
          erhöht wurden, kann es sein, dass nur zwei Installationsphasen
          anstatt drei durchlaufen werden.</p></div><p>Nun muss alle Drittanbieter-Software neu erstellt und neu
        installiert werden.  Dies ist notwendig, da die installierte Software
        möglicherweise Abhängigkeiten zu Bibliotheken enthält,
        die während der Aktualisierung entfernt wurden.  Der <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a>-Befehl kann verwendet
        werden, um diesen Vorgang zu automatisieren.  Die folgenden Kommandos
        können verwendet werden, um diesen Prozess zu starten:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -f ruby</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm /var/db/pkg/pkgdb.db</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>portupgrade -f ruby18-bdb</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm /var/db/pkg/pkgdb.db /usr/ports/INDEX-*.db</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>portupgrade -af</code></strong></pre><p>Sobald dies abgeschlossen ist, beenden Sie den
        Aktualisierungsprozess mit einem letzten Aufruf von
        <code class="command">freebsd-update</code>.  Geben Sie den folgenden Befehl ein,
        um alle losen Enden des Aktualisierungsprozesses miteinander zu
        verknüpfen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><p>Wenn der <code class="filename">GENERIC</code>-Kernel temporär
        Verwendung fand, ist dies der richtige Zeitpunkt, einen neuen,
        selbstkonfigurierten Kernel zu bauen und über die übliche
        Methode zu installieren.</p><p>Booten Sie anschliessend die Maschine in die neue FreeBSD-Version.
        Der Prozess ist damit abgeschlossen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-system-comparison"></a>26.2.4. Vergleich des Systemzustands</h3></div></div></div><p>Das <code class="command">freebsd-update</code>-Werkzeug kann verwendet
        werden, um den Zustand der installierten FreeBSD-Version gegenüber
        einer bekannten und funktionierenden Kopie zu vergleichen.  Diese
        Option vergleicht die aktuelle Version von Systemwerkzeugen,
        Bibliotheken und Konfigurationsdateien.  Um diesen Vergleich zu
        starten, geben Sie den folgenden Befehl ein:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update IDS &gt;&gt; outfile.ids</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Warnung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Obwohl der Befehlsname <acronym class="acronym">IDS</acronym> lautet, sollte er
          in keiner Weise als Ersatz für ein Intrusion Detection System
          wie <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/snort/pkg-descr">security/snort</a> angesehen
          werden.  Da <code class="command">freebsd-update</code> seine Daten auf Platte
          ablegt, ist die Möglichkeit von Verfälschungen
          offensichtlich.  Obwohl diese Möglichkeit durch die Verwendung
          von <code class="varname">kern.securelevel</code> oder die Ablage von
          <code class="command">freebsd-update</code> auf einem Nur-Lese Dateisystem,
          wenn es gerade nicht gebraucht wird, eingedämmt werden kann,
          besteht eine bessere Lösung darin, das System gegen ein
          gesichertes Medium, wie eine <acronym class="acronym">DVD</acronym> oder einen
          externen, separat aufbewahrten
          <acronym class="acronym">USB</acronym>-Plattenspeicher, zu vergleichen.</p></div><p>Das System wird jetzt untersucht und eine Liste von Dateien
        ausgegeben, zusammen mit deren <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sha256&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sha256</span>(1)</span></a>-Hashwerten, sowohl der
        von der Release-Version bekannte Wert als auch der des aktuell
        installierten Systems.  Das ist der Grund dafür, warum die Ausgabe
        an die Datei <code class="filename">outfile.ids</code> geschickt wurde.  Es
        scrollt zu schnell vorbei, um diese mit den Augen zu vergleichen und
        bald wird auch der Konsolenpuffer damit überfüllt.</p><p>Diese Zeilen sind dazu noch extrem lang, aber das Ausgabeformat
        kann sehr einfach verarbeitet werden. Um beispielsweise eine Liste von
        allen Dateien zu erhalten, die sich vom aktuellen Release
        unterscheiden, geben Sie das folgende Kommando ein:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat outfile.ids | awk '{ print $1 }' | more</code></strong>
/etc/master.passwd
/etc/motd
/etc/passwd
/etc/pf.conf</pre><p>Diese Ausgabe wurde abgeschnitten, es existieren noch viel mehr
        Dateien dazu.  Manche dieser Dateien besitzen ganz
        selbstverständliche Veränderungen,
        <code class="filename">/etc/passwd</code> wurde beispielsweise geändert,
        um Benutzer zum System hinzuzufügen.  In manchen Fällen kann
        es anderen Dateien wie Kernelmodule geben, welche sich geändert
        haben, weil <code class="command">freebsd-update</code> diese aktualisiert hat.
        Um bestimmte Dateien oder Verzeichnisse auszuschliessen, hängen
        Sie diese an die <code class="literal">IDSIgnorePaths</code>-Option in
        <code class="filename">/etc/freebsd-update.conf</code> an.</p><p>Diese Vorgehensweise kann als Teil einer ausgeklügelten
        Aktualisierungsmethode benutzt werden, unabhängig von der zuvor
        angesprochenen Variante.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="updating-upgrading.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="updating-upgrading.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="updating-upgrading-portsnap.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">Kapitel 26. FreeBSD aktualisieren </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 26.3. Portsnap: Ein Werkzeug zur Aktualisierung der Ports-Sammlung</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>