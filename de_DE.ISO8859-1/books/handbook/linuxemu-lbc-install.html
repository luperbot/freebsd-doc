<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>11.2. Installation</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="linuxemu.html" title="Kapitel 11. Linux-Binärkompatibilität" /><link rel="prev" href="linuxemu.html" title="Kapitel 11. Linux-Binärkompatibilität" /><link rel="next" href="linuxemu-mathematica.html" title="11.3. Mathematica® installieren" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.2. Installation</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="linuxemu.html">Zurück</a> </td><th width="60%" align="center">Kapitel 11. Linux-Binärkompatibilität</th><td width="20%" align="right"> <a accesskey="n" href="linuxemu-mathematica.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-lbc-install"></a>11.2. Installation</h2></div></div></div><a id="idp75720784" class="indexterm"></a><p>Die Linux-Binärkompatibilität ist per Voreinstellung
      nicht aktiviert.  Der einfachste Weg, dies zu tun, ist das
      <code class="literal">Linux</code> KLD (<span class="quote">&#8222;<span class="quote">Kernel LoaDable object</span>&#8220;</span>)
      zu laden.  Dies erreichen Sie durch die Eingabe des folgenden
      Befehls:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload linux</code></strong></pre><p>Wollen Sie die Linux-Binärkompatibilität dauerhaft
      aktivieren, sollten Sie die folgende Zeile in
      <code class="filename">/etc/rc.conf</code> einfügen:</p><pre class="programlisting">linux_enable="YES"</pre><p>Der <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldstat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldstat</span>(8)</span></a>-Befehl kann benutzt werden, um
      festzustellen, ob KLD geladen wurde:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kldstat</code></strong>
Id Refs Address    Size     Name
 1    2 0xc0100000 16bdb8   kernel
 7    1 0xc24db000 d000     linux.ko</pre><a id="idp75726672" class="indexterm"></a><p>Wenn Sie das KLD nicht laden können oder wollen, besteht
      auch die Möglichkeit, die Linux-Binärkompatibiltät
      statisch in den Kernel einzubinden.  Dazu fügen Sie Ihrer
      Kernelkonfigurationsdatei den Eintrag
      <code class="literal">options COMPAT_LINUX</code>
      hinzu.  Anschließend installieren Sie Ihren neuen Kernel
      wie in <a class="xref" href="kernelconfig.html" title="Kapitel 9. Konfiguration des FreeBSD-Kernels">Kapitel 9, <em>Konfiguration des FreeBSD-Kernels</em></a> beschrieben.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75733200"></a>11.2.1. Linux-Laufzeitbibliotheken installieren</h3></div></div></div><a id="idp75733840" class="indexterm"></a><p>Dies kann auf zwei Arten geschehen, entweder über den
	<a class="link" href="linuxemu-lbc-install.html#linuxemu-libs-port" title="11.2.1.1. Installation unter Verwendung des linux_base-Ports">linux_base</a>-Port
	oder durch <a class="link" href="linuxemu-lbc-install.html#linuxemu-libs-manually" title="11.2.1.2. Manuelle Installation der Bibliotheken">manuelle
	Installation</a> der Bibliotheken.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-port"></a>11.2.1.1. Installation unter Verwendung des linux_base-Ports</h4></div></div></div><a id="idp75737296" class="indexterm"></a><p>Dies ist die einfachste Methode, um die Laufzeitbibliotheken
	  zu installieren.  Sie funktioniert genauso wie die
	  Installation eines beliebigen anderen Ports aus der
          <a class="link" href="file://localhost/usr/ports/" target="_top">Ports-Sammlung</a>.
	  Dazu machen Sie einfach folgendes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/emulators/linux_base-f10</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install distclean</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Bei FreeBSD-Systemen vor FreeBSD 8.0 müssen Sie den Port
            <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base-fc4/pkg-descr">emulators/linux_base-fc4</a>
            anstatt <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base-f10/pkg-descr">emulators/linux_base-f10</a>
            installieren.</p></div><p>Sie sollten nun über eine funktionierende
	  Linux-Binärkompatibilität verfügen.  Einige
	  Programme könnten sich zwar über falsche
	  Unterversionsnummern der Systembibliotheken beschweren, dies ist
	  im Allgemeinen aber kein Problem.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Unter Umständen gibt es mehrere Versionen des
	    Ports <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a>.
	    Die Ports entsprechen unterschiedlichen Versionen
	    verschiedener Linux-Distributionen Sie sollten den
	    Port installieren, der am besten die Anforderungen
	    der Linux-Anwendung erfüllt.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-manually"></a>11.2.1.2. Manuelle Installation der Bibliotheken</h4></div></div></div><p>Wenn Sie die <span class="quote">&#8222;<span class="quote">Ports</span>&#8220;</span>-Sammlung nicht installiert
	  haben, können Sie die Bibliotheken auch manuell
	  installieren.  Dazu brauchen Sie die jeweiligen
	  Linux-Systembibliotheken, die das zu installierende Programm
	  verwendet sowie den Laufzeit-Linker.  Zusätzlich müssen
	  Sie auf Ihrem FreeBSD-System einen
	  <span class="quote">&#8222;<span class="quote">virtuellen</span>&#8220;</span> Verzeichnisbaum für die
	  Linux-Bibliotheken einrichten.  Alle unter FreeBSD gestarteten
	  Linux-Programme suchen zuerst in diesem Verzeichnisbaum
	  nach Systembibliotheken.  Wenn also ein Linuxprogramm beispielsweise
	  <code class="filename">/lib/libc.so</code> lädt, versucht FreeBSD
	  zuerst, <code class="filename">/compat/linux/lib/libc.so</code> laden.
	  Ist diese Datei nicht vorhanden, wird
	  <code class="filename">/lib/libc.so</code> geladen.  Systembibliotheken
	  sollten daher besser in den <span class="quote">&#8222;<span class="quote">virtuellen</span>&#8220;</span> Verzeichnisbaum
	  <code class="filename">/compat/linux/lib</code> als in den vom
	  Linux-<code class="command">ld.so</code> vorgeschlagenen installiert
	  werden.</p><p>Im Allgemeinen müssen Sie nur zu Beginn nach den
	  Systembibliotheken suchen, die von Linuxprogrammen
	  benötigt werden.  Nach den ersten Installationen von
	  Linuxprogrammen auf Ihrem FreeBSD-System verfügen Sie
	  über eine Sammlung von Linux-Systembibliotheken,
	  die es Ihnen ermöglichen wird, neue Linuxprogramme
	  ohne Zusatzarbeit zu installieren.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75752784"></a>11.2.1.3. Installation zusätzlicher Systembibliotheken</h4></div></div></div><a id="idp75753424" class="indexterm"></a><p>Was passiert, wenn Sie den <code class="filename">linux_base</code>-Port
	  installieren, und Ihr Programm beschwert sich trotzdem
	  über fehlende Systembibliotheken?  Woher wissen Sie,
	  welche Systembibliotheken von Linux-Binärprogrammen
	  benötigt werden, und wo Sie diese finden? Grundsätzlich
	  gibt es dafür zwei Möglichkeiten (um dieser
	  Anleitung zu folgen, müssen Sie unter
	  FreeBSD als Benutzer <code class="systemitem">root</code> angemeldet
	  sein):</p><p>Wenn Sie Zugriff auf ein Linux-System haben, können
	  Sie dort nachsehen, welche Systembibliotheken eine Anwendung
	  benötigt, und diese auf Ihr FreeBSD-System kopieren.
	  Dazu folgendes Beispiel:</p><div class="informalexample"><p>Nehmen wir an, Sie haben FTP verwendet, um die
	    Linux-Binärversion von <span class="application">Doom</span>
	    zu bekommen und haben sie auf Ihrem Linux-System installiert.
	    Nun können Sie überprüfen, welche
	    Systembibliotheken das Programm benötigt, indem Sie
	    <code class="command">ldd linuxdoom</code> eingeben.  Das Resultat
	    sieht dann so aus:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ldd linuxdoom</code></strong>
libXt.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libXt.so.3.1.0
libX11.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libX11.so.3.1.0
libc.so.4 (DLL Jump 4.5pl26) =&gt; /lib/libc.so.4.6.29</pre><a id="idp75758032" class="indexterm"></a><p>Sie müssten nun alle Dateien aus der
	    letzten Spalte kopieren und sie unter
	    <code class="filename">/compat/linux</code> speichern, wobei
	    die Namen der ersten Spalte als symbolische Links auf
	    diese Dateien zeigen.  Damit haben Sie schließlich
	    folgende Dateien auf Ihrem FreeBSD-System:</p><pre class="screen">/compat/linux/usr/X11/lib/libXt.so.3.1.0
/compat/linux/usr/X11/lib/libXt.so.3 -&gt; libXt.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3 -&gt; libX11.so.3.1.0
/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Beachten Sie, dass wenn Sie bereits eine
		Linux-Systembibliothek einer zur ersten Spalte
		passenden Hauptversionsnummer (laut
		<code class="command">ldd</code>-Ausgabe) besitzen, Sie die Datei
		aus der zweiten Spalte nicht mehr kopieren müssen,
		da die	bereits vorhandene Version funktionieren sollte.
		Hat die Systembibliothek jedoch eine neuere
		Versionsnummer, sollten Sie sie dennoch kopieren.
		Sie können die alte Version löschen, solange
		Sie einen symbolischen Link auf die neue
		Version anlegen.  Wenn Sie also folgende Bibliotheken
		auf Ihrem System installiert haben:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.27
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.27</pre><p xmlns="http://www.w3.org/1999/xhtml">und Sie haben eine neue Binärdatei, die
		laut <code class="command">ldd</code>
		eine neuere Bibliothek benötigt:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">libc.so.4 (DLL Jump 4.5pl26) -&gt; libc.so.4.6.29</pre><p xmlns="http://www.w3.org/1999/xhtml">Wenn diese sich nur  um ein oder zwei Stellen
		in der Unterversionsnummer unterscheiden, müssen
		Sie <code class="filename">/lib/libc.so.4.6.29</code>
		nicht auf Ihr System kopieren, da das Programm auch
		mit der etwas älteren Version ohne Probleme
		funktionieren sollte.  Wenn Sie wollen,
		können Sie <code class="filename">libc.so</code> aber
		dennoch ersetzen (das heißt aktualisieren), was dann zu
		folgender Ausgabe führt:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Der Mechanismus der symbolischen Links wird
		<span class="emphasis"><em>nur</em></span> für Linux-Binärdateien
		benötigt.  Der FreeBSD-Laufzeitlinker sucht
		sich die passenden Hauptversionsnummern selbst,
		das heißt Sie müssen sich nicht darum
		kümmern.</p></div></blockquote></div></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75770704"></a>11.2.2. Linux ELF-Binärdateien installieren</h3></div></div></div><a id="idp75771344" class="indexterm"></a><p>ELF-Binärdateien benötigen manchmal eine zusätzliche
	<span class="quote">&#8222;<span class="quote">Kennzeichnung</span>&#8220;</span>.  Wenn Sie versuchen, eine nicht
	gekennzeichnete ELF-Binärdatei auszuführen,
	werden Sie eine Fehlermeldung ähnlich der folgenden
	erhalten:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>./my-linux-elf-binary</code></strong>
ELF binary type not known
Abort</pre><p>Damit der FreeBSD-Kernel eine Linux-ELF-Datei von einer
	FreeBSD-ELF-Datei unterscheiden kann, gibt es das Werkzeug
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>brandelf -t Linux my-linux-elf-binary</code></strong></pre><a id="idp75784912" class="indexterm"></a><p>Die GNU Werkzeuge schreiben nun automatisch die
	passende Kennzeichnungsinformation in die ELF-Binärdateien,
	so dass Sie diesen Schritt in Zukunft nur noch selten benötigen
	werden.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75785936"></a>11.2.3. Installieren einer beliebigen RPM-basierten Linuxanwendung</h3></div></div></div><p>FreeBSD besitzt seine eigene Paketdatenbank und diese wird dazu
        verwendet, um alle Ports (auch <span class="trademark">Linux</span>®-Ports) zu verfolgen.  Deshalb
        wird die <span class="trademark">Linux</span>® RPM-Datenbank nicht benutzt (fehlende
        Unterstützung).</p><p>Falls Sie jedoch eine beliebige RPM-basierte <span class="trademark">Linux</span>®-Anwendung
        installieren wollen, erreichen Sie das mittels:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /compat/linux</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rpm2cpio -q &lt; /path/to/linux.archive.rpm | cpio -id</code></strong></pre><p>Benutzen Sie dann brandelf auf die installierten
        ELF-Binärdateien (nicht die Bibliotheken!).  Sie werden keine
        saubere Deinstallation hinbekommen, aber evtl. helfen ein paar Tests
        weiter.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75791312"></a>11.2.4. Namensauflösung konfigurieren</h3></div></div></div><p>Wenn DNS nicht funktioniert, oder Sie folgende Fehlermeldung
	erhalten:</p><pre class="screen">resolv+: "bind" is an invalid keyword resolv+:
"hosts" is an invalid keyword</pre><p>müssen sie <code class="filename">/compat/linux/etc/host.conf</code>
        wie folgt anlegen:</p><pre class="programlisting">order hosts, bind
multi on</pre><p>Diese Reihenfolge legt fest, dass zuerst
	<code class="filename">/etc/hosts</code> und anschließend DNS
	durchsucht werden.  Wenn
	<code class="filename">/compat/linux/etc/host.conf</code> nicht vorhanden
	ist, finden Linux-Anwendungen FreeBSD's
	<code class="filename">/etc/host.conf</code> und
	beschweren sich über die inkompatible FreeBSD-Syntax.  Wenn Sie
	keinen Nameserver (in <code class="filename">/etc/resolv.conf</code>)
	konfiguriert haben, sollten Sie den Eintrag
	<code class="literal">bind</code> entfernen.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="linuxemu.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="linuxemu.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="linuxemu-mathematica.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">Kapitel 11. Linux-Binärkompatibilität </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 11.3. <span class="trademark">Mathematica</span>® installieren</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>