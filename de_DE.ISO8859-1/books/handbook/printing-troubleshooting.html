<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>10.7. Problembehandlung</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="printing.html" title="Kapitel 10. Drucken" /><link rel="prev" href="printing-lpd-alternatives.html" title="10.6. Alternativen zum LPD-Drucksystem" /><link rel="next" href="linuxemu.html" title="Kapitel 11. Linux-Binärkompatibilität" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">10.7. Problembehandlung</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="printing-lpd-alternatives.html">Zurück</a> </td><th width="60%" align="center">Kapitel 10. Drucken</th><td width="20%" align="right"> <a accesskey="n" href="linuxemu.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-troubleshooting"></a>10.7. Problembehandlung</h2></div></div></div><p>Wenn Sie eine einfache Testseite mit <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> gedruckt
      haben, könnte eines der folgenden Probleme aufgetreten
      sein:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Der Druck hat erst mit einer gewissen Verzögerung
	  geklappt oder das bedruckte Blatt verblieb im Drucker, so als
	  wäre der Druckvorgang noch nicht abgeschlossen.</span></dt><dd><p>Die Testseite wurde zwar gedruckt, danach tat sich
	    allerdings nichts mehr.  Vielleicht mussten Sie sogar eine
	    Taste Ihres Druckers, etwa PRINT REMAINING oder FORM FEED
	    drücken, damit der Druckvorgang fortgesetzt wurde.</p><p>Wenn das der Fall ist, hat der Drucker vermutlich vor
	    dem eigentlichen Drucken gewartet, ob noch weitere Daten
	    für Ihren Druckauftrag gesendet werden.  Um dieses
	    Problem zu beheben, können Sie den Textfilter
	    anweisen, ein <span class="foreignphrase"><em class="foreignphrase">Form Feed</em></span>
	    -Zeichen (oder ein anderes entsprechendes Zeichen) an den
	    Drucker zu senden.  Dies reicht für gewöhnlich
	    aus, um den Drucker zum Druck des noch im internen
	    Puffer verbliebenen Textes zu bewegen.  Dadurch kann auch
	    sichergestellt werden, dass jeder neue Druckauftrag auf
	    einer neuen Seite beginnt.</p><p>Der folgende Ersatz für das Shell-Skript
	    <code class="filename">/usr/local/libexec/if-simple</code> gibt
	    ein <span class="quote">&#8222;<span class="quote">Form Feed</span>&#8220;</span> aus, nachdem der Auftrag an
	    den Drucker geschickt wurde:</p><pre class="programlisting">#!/bin/sh
#
# if-simple - Einfacher Eingabefilter für lpd
# Installiert unter /usr/local/libexec/if-simple
#
# Kopiert stdin einfach nach stdout. Ignoriert alle Filter-Argumente.
# Schreibt ein Form-Feed-Zeichen (\f) nach dem Ende des Druckauftrages.

/bin/cat &amp;&amp; printf "\f" &amp;&amp; exit 0
exit 2</pre></dd><dt><span class="term">Der Drucker erzeugte einen <span class="quote">&#8222;<span class="quote">Treppeneffekt</span>&#8220;</span>
	  (<span class="foreignphrase"><em class="foreignphrase">staircase effect</em></span>).</span></dt><dd><p>Sie haben einen Ausdruck ähnlich dem folgenden
	    erhalten:</p><pre class="screen">!"#$%&amp;'()*+,-./01234
                "#$%&amp;'()*+,-./012345
                                 #$%&amp;'()*+,-./0123456</pre><p>Sie sind zu einem weiteren Opfer des
	    <span class="emphasis"><em>Treppeneffekts</em></span> geworden.  Verursacht
	    wird dieser Effekt durch unterschiedliche Ansichten
	    darüber, welche Zeichen den Beginn einer neuen Zeile
	    anzeigen sollen.  <span class="trademark">UNIX</span>®-ähnliche Betriebssysteme
	    verwenden dafür ein einzelnes Zeichen:
	    ASCII<a id="idp75576656" class="indexterm"></a>-Code
	    10, auch als <span class="foreignphrase"><em class="foreignphrase">Line Feed</em></span> (LF)
	    bekannt.
	    <span class="trademark">MS-DOS</span>®<a id="idp75577936" class="indexterm"></a>,
	    <span class="trademark">OS/2</span>®<a id="idp75578832" class="indexterm"></a> und
	    andere Betriebssysteme verwenden stattdessen ein
	    Zeichenpaar:  ASCII-Code 10 <span class="emphasis"><em>und</em></span>
	    ASCII-Code 13, <span class="foreignphrase"><em class="foreignphrase">Carriage
	    Return</em></span> (CR).  Viele Drucker verwenden in
	    der Voreinstellung die Konvention von <span class="trademark">MS-DOS</span>®, um
	    Zeilenumbrüche darzustellen.</p><p>Wenn Sie unter FreeBSD drucken, wird nur das Zeichen
	    <span class="foreignphrase"><em class="foreignphrase">Line Feed</em></span> verwendet.  Der
	    Drucker erkennt dieses Zeichen und erweitert den
	    Druckbereich um eine Zeile, verbleibt zum Druck des
	    nächsten Zeichens aber in derselben horizontalen
	    Position.  Das ist der Grund für die Verwendung des
	    <span class="foreignphrase"><em class="foreignphrase">Carriage Return</em></span>:  Es setzt
	    die Position für das folgende Zeichen auf den linken
	    Rand der Seite.</p><p>FreeBSD erwartet von einem Drucker das folgende
	    Verhalten:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>Drucker empfängt CR</td><td>Drucker druckt CR</td></tr><tr><td>Drucker empfängt LF</td><td>Drucker druckt CR + LF</td></tr></tbody></table></div><p>Es gibt mehrere Möglichkeiten, dieses Verhalten zu
	    erreichen:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Verändern Sie die Konfiguration Ihres Druckers,
		um die Interpretation dieser Zeichen zu verändern.
		Lesen Sie Ihr Druckerhandbuch, wenn Sie nicht wissen,
		was Sie dazu tun müssen.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Wenn Sie auf Ihrem Rechner neben FreeBSD noch
		  andere Betriebssysteme verwenden, müssen Sie
		  Ihren Drucker möglicherweise anschließend
		  <span class="emphasis"><em>erneut konfigurieren</em></span>, damit die
		  Zeichen CR und LF unter diesen Systemen korrekt
		  interpretiert werden.  Ist dies bei Ihnen der Fall,
		  werden Sie wohl eine der folgenden Lösungen
		  bevorzugen.</p></div></li><li class="listitem"><p>Lassen Sie LF durch den Treiber der seriellen
		Schnittstelle automatisch in CR+LF konvertieren.
		Selbstverständlich funktioniert dies nur mit
		Druckern, die an einer seriellen Schnittstelle
		angeschlossen sind.  Um diese Möglichkeit zu
		nutzen, müssen Sie die
		<code class="literal">ms#</code>-Fähigkeit verwenden und
		in <code class="filename">/etc/printcap</code> den
		<code class="literal">onlcr</code>-Modus für den Drucker
		aktivieren.</p></li><li class="listitem"><p>Senden Sie eine <span class="emphasis"><em>Escape-Sequenz</em></span>
		an den Drucker, damit das Zeichen LF zeitweilig anders
		behandelt wird.  Suchen Sie im Handbuch Ihres Druckers
		nach den von Ihrem Drucker unterstützten
		Escape-Sequenzen.  Wenn Sie eine entsprechenden
		Escape-Sequenz finden, müssen Sie den Textfilter so
		anpassen, dass zuerst die Escape-Sequenz und
		anschließend der Druckauftrag gesendet wird.</p><a id="idp75595984" class="indexterm"></a><p>Es folgt nun ein Bespieltextfilter für einen
		Drucker, der die Hewlett Packard PCL Escape-Sequenzen
		versteht.  Dieser Filter veranlasst den Drucker,
		LF-Zeichen als Folgen von LF+CR aufzufassen.
		Anschließend wird der Druckauftrag gesendet.  Als
		Abschluss wird ein <span class="foreignphrase"><em class="foreignphrase">Form
		Feed</em></span> gesendet, um die letzte Seite des
		Druckauftrags auszuwerfen.  Dieses Beispiel sollte mit
		nahezu allen Druckern von Hewlett Packard
		funktionieren.</p><pre class="programlisting">#!/bin/sh
#
# hpif - Einfacher Text-Eingabefilter für lpd für auf HP-PCL basierende Drucker
# Installiert unter /usr/local/libexec/hpif
#
# Kopiert stdin einfach nach stdout.  Ignoriert alle Filterargumente.
# Weist den Drucker an LF als CR+LF zu interpretieren.
# Wirft die Seite nach dem Drucken aus.

printf "\033&amp;k2G" &amp;&amp; cat &amp;&amp; printf "\033&amp;l0H" &amp;&amp; exit 0
exit 2</pre><p>Das nächste Beispiel aus
		<code class="filename">/etc/printcap</code> beschreibt den
		Rechner <code class="systemitem">orchid</code>, an dessen Parallelport
		ein Drucker angeschlossen ist.  Es handelt sich dabei um
		einen Hewlett Packard LaserJet 3Si, der den Namen
		<code class="literal">teak</code> verwendet.  Als Textfilter wird
		das Skript aus dem letzten Beispiel verwendet:</p><pre class="programlisting">#
#  /etc/printcap für den Rechner orchid
#
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=<code class="filename">/dev/lpt0</code>:sh:sd=<code class="filename">/var/spool/lpd/teak</code>:mx#0:\
        :if=<code class="filename">/usr/local/libexec/hpif</code>:</pre></li></ul></div></dd><dt><span class="term">Alle Zeilen wurden in die gleiche Zeile gedruckt.</span></dt><dd><p>Der Drucker hat niemals eine neue Zeile begonnen.  Alle
	    Zeilen des Textes wurden in eine einzige Zeile gedruckt.</p><p>Dieses Problem ist das <span class="quote">&#8222;<span class="quote">Gegenteil</span>&#8220;</span> des
	    oben beschriebenen Treppeneffekts und kommt wesentlich
	    seltener vor.  Die von FreeBSD zum Abschluss einer Zeile
	    benutzten LF-Zeichen werden als CR-Zeichen interpretiert.
	    Dadurch wird die Druckposition zwar auf den linken Rand
	    der Seite, aber nicht um eine Zeile nach unten gesetzt.</p><p>Konfigurieren Sie Ihren Drucker, um die folgende
	    Interpretation der Zeichen LF und CR zu erzwingen:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Drucker empfängt</th><th>Drucker druckt</th></tr></thead><tbody><tr><td>CR</td><td>CR</td></tr><tr><td>LF</td><td>CR + LF</td></tr></tbody></table></div></dd><dt><span class="term">Manche Zeichen wurden nicht gedruckt.</span></dt><dd><p>Der Drucker hat in jeder Zeile einige Zeichen nicht
	    gedruckt.  Vielleicht ist das Problem auch während des
	    Druckens schlimmer geworden, und der Drucker hat immer mehr
	    Zeichen nicht gedruckt.</p><p>Dieses Problem entsteht, weil der Drucker mit der
	    Geschwindigkeit, mit der die Daten über die serielle
	    Schnittstelle (an einer parallelen Schnittstelle sollte das
	    Problem nicht auftreten) eintreffen, nicht mithalten kann.
	    Es gibt zwei Möglichkeiten, dieses Problem zu
	    lösen:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Wenn der Drucker die Flusskontrolle mit XON/XOFF
		unterstützt, können Sie in der
		<code class="literal">ms#</code>-Fähigkeit den
		<code class="literal">ixon</code>-Modus aktivieren.</p></li><li class="listitem"><p>Unterstützt der Drucker die Anfrage zum
	        Senden/Löschen des Sende-Hardware-Handshakes (allgemein
	        bekannt als <code class="literal">RTS/CTS</code>, dann sollten Sie den
		<code class="literal">crtscts</code>-Modus in der
		<code class="literal">ms#</code>-Fähigkeit aktivieren.
		Stellen Sie aber sicher, dass das verwendete
		Druckerkabel auch für die Hardware-Flusskontrolle
		geeignet ist.</p></li></ul></div></dd><dt><span class="term">Es wurden nur wirre Zeichen gedruckt.</span></dt><dd><p>Anstelle des gewünschten Textes wurden nur
	    zufällige Zeichen gedruckt.</p><p>Dieses Problem wird ebenfalls durch falsche
	    Konfigurationsparameter im Zusammenhang mit einem seriellen
	    Drucker verursacht.  Kontrollieren Sie die bps-Rate in der
	    <code class="literal">br</code>-Fähigkeit und die
	    Paritätseinstellung
	    (<span class="foreignphrase"><em class="foreignphrase">Parity</em></span>) in der
	    <code class="literal">ms#</code>-Fähigkeit.  Überprüfen
	    Sie außerdem, ob der Drucker auch tatsächlich die
	    gleichen Einstellungen verwendet, die in
	    <code class="filename">/etc/printcap</code> definiert wurden.</p></dd><dt><span class="term">Der Drucker hat überhaupt nicht reagiert.</span></dt><dd><p>Wenn gar nichts passiert ist, dann liegt das vermutlich
	    an FreeBSD und nicht am Drucker.  Aktivieren Sie die
	    Protokollierung (<code class="literal">lf</code>-Fähigkeit)
	    für den entsprechenden Drucker in der Datei
	    <code class="filename">/etc/printcap</code>.  Es folgt nun ein
	    Beispieleintrag für den Drucker
	    <code class="literal">rattan</code>, bei dem die
	    <code class="literal">lf</code>-Fähigkeit aktiviert wurde.</p><pre class="programlisting">rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=<code class="filename">/var/spool/lpd/rattan</code>:\
        :lp=<code class="filename">/dev/lpt0</code>:\
        :if=<code class="filename">/usr/local/libexec/if-simple</code>:\
        :lf=<code class="filename">/var/log/rattan.log</code></pre><p>Versuchen Sie jetzt noch einmal zu drucken.
	    Überprüfen Sie die Protokolldatei (in unserem
	    Beispiel <code class="filename">/var/log/rattan.log</code>) auf
	    etwaige Fehlermeldungen.  Versuchen Sie aufgrund dieser
	    Meldungen, das Problem zu beheben.</p><p>Wenn Sie keine Protokolldatei festlegen, verwendet
	    <span class="application">LPD</span> in der Voreinstellung <code class="filename">/dev/console</code> für die Ausgabe
	    der Fehlermeldungen.</p></dd></dl></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="printing-lpd-alternatives.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="printing.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="linuxemu.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">10.6. Alternativen zum
      <span class="application">LPD</span>-Drucksystem </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> Kapitel 11. Linux-Binärkompatibilität</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>