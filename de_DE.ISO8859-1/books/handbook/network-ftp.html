<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>31.8. FTP &#8211; File Transfer Protocol</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="network-servers.html" title="Kapitel 31. Netzwerkserver" /><link rel="prev" href="network-apache.html" title="31.7. Der Apache HTTP-Server" /><link rel="next" href="network-samba.html" title="31.9. Mit Samba einen Datei- und Druckserver für Microsoft® Windows®-Clients einrichten" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">31.8. FTP &#8211; File Transfer Protocol</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-apache.html">Zurück</a> </td><th width="60%" align="center">Kapitel 31. Netzwerkserver</th><td width="20%" align="right"> <a accesskey="n" href="network-samba.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ftp"></a>31.8. FTP &#8211; File Transfer Protocol</h2></div><div><span class="authorgroup">Beigetragen von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp90745680" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90746192"></a>31.8.1. Überblick</h3></div></div></div><p>Das File Transfer Protocol (FTP) ermöglicht
	auf einfache Art und Weise den Dateiaustausch mit einem
	<acronym class="acronym">FTP</acronym>-Server.
	Der
	<acronym class="acronym">FTP</acronym>-Server
	<span class="application">ftpd</span> ist bei FreeBSD bereits im
	Basisystem enthalten.  Daher sind Konfiguration und Betrieb
	eines
	<acronym class="acronym">FTP</acronym>-Servers
	unter FreeBSD relativ einfach.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90749264"></a>31.8.2. Konfiguration</h3></div></div></div><p>Der wichtigste Punkt ist hier die Entscheidung darüber,
	welche Benutzer auf Ihren FTP-Server zugreifen dürfen.
	Ein FreeBSD-System verfügt über diverse
	Systembenutzerkonten, um einzelnen Daemonen den Zugriff auf
	das System zu ermöglichen.  Anonyme Benutzer sollten sich
	allerdings nicht über diese Benutzerkonten anmelden
	dürfen.  Die Datei <code class="filename">/etc/ftpusers</code>
	enthält alle Benutzer, die vom FTP-Zugriff ausgeschlossen
	sind.  In der Voreinstellung gilt dies auch die gerade
	erwähnten Systembenutzerkonten.  Sie können über
	diese Datei weitere Benutzer vom FTP-Zugriff
	ausschließen.</p><p>Sie können den Zugriff für einige Benutzer
	einschränken, ohne FTP komplett zu verbieten.  Dazu
	passen Sie <code class="filename">/etc/ftpchroot</code> entsprechend an.
	Diese Datei enthält Benutzer und Gruppen sowie die für
	sie geltenden FTP-Einschränkungen und wird in
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpchroot&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ftpchroot</span>(5)</span></a> ausführlich beschrieben.</p><a id="idp90756432" class="indexterm"></a><p>Wenn Sie einen anonymen FTP-Zugriff auf Ihren Server
	ermöglichen wollen, müssen Sie den Benutzer
	<code class="systemitem">ftp</code> auf Ihrem FreeBSD-System anlegen.
	Danach können sich Benutzer mit dem Benutzernamen
	<code class="systemitem">ftp</code> oder <code class="systemitem">anonymous</code>
	auf Ihrem FTP-Server anmelden.  Das Passwort ist dabei
	beliebig (allerdings wird dazu in der Regel eine E-Mail-Adresse
	verwendet).  Meldet sich ein anonymer Benutzer an, aktiviert
	der FTP-Server <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a>, um den Zugriff auf das
	Heimatverzeichnis des Benutzers <code class="systemitem">ftp</code>
	zu beschränken.</p><p>Es gibt zwei Textdateien, deren Inhalt Sie bei der Anmeldung
	an Ihrem FTP-Server anzeigen lassen können.  Der Inhalt von
	<code class="filename">/etc/ftpwelcome</code> wird angezeigt, bevor der
	Login-Prompt erscheint.  Nach einer erfolgreichen Anmeldung wird
	der Inhalt von <code class="filename">/etc/ftpmotd</code> angezeigt.
	Beachten Sie aber, dass es dabei um einen Pfad relativ zur
	Umgebung des anzumeldenden Benutzers handelt.  Bei einer
	anonymen Anmeldung würde also die Datei
	<code class="filename">~ftp/etc/ftpmotd</code> angezeigt.</p><p>Nachdem Sie den FTP-Server konfiguriert haben, müssen
        Sie Ihn in <code class="filename">/etc/inetd.conf</code> aktivieren.
        Dazu müssen Sie lediglich das Kommentarsymbol
        <span class="quote">&#8222;<span class="quote">#</span>&#8220;</span> am Beginn der bereits vorhandenen
        <span class="application">ftpd</span>-Zeile entfernen:</p><pre class="programlisting">ftp	stream	tcp	nowait	root	/usr/libexec/ftpd	ftpd -l</pre><p>Nachdem Sie diese Änderung durchgeführt haben,
	müssen Sie, wie in <a class="xref" href="network-inetd.html#network-inetd-reread" title="Beispiel 31.1. Die inetd-Konfiguration neu einlesen">Beispiel 31.1, &#8222;Die <span class="application">inetd</span>-Konfiguration neu
          einlesen&#8220;</a>
	beschrieben, die <span class="application">inetd</span>-Konfiguration
	neu einlesen.  Lesen Sie bitte Abschnitt <a class="xref" href="network-inetd.html#network-inetd-settings" title="31.2.2. Einstellungen">Abschnitt 31.2.2, &#8222;Einstellungen&#8220;</a> des Handbuchs für weitere
	Informationen zur Aktivierung von
	<span class="application">inetd</span> auf Ihren System.</p><p>Alternativ können Sie auch nur den
	<span class="application">ftpd</span>-Server starten.  In diesem Fall
	ist es ausreichend, die entsprechende Variable in der Datei
	<code class="filename">/etc/rc.conf</code> zu setzen:</p><pre class="programlisting">ftpd_enable="YES"</pre><p>Nachdem Sie diese Variable gesetzt haben, wird künftig
	beim Systemstart nur der FTP-Server gestartet.  Alternativ
	können Sie den Server auch manuell starten, indem Sie als
	Benutzer <code class="systemitem">root</code> den folgenden Befehl
	ausführen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service ftpd start</code></strong></pre><p>Danach können Sie sich auf Ihrem FTP-Server anmelden:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ftp localhost</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90775120"></a>31.8.3. Wartung</h3></div></div></div><a id="idp90775760" class="indexterm"></a><a id="idp90776400" class="indexterm"></a><p>Der <span class="application">ftpd</span>-Daemon verwendet
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a>, um Protokolldateien zu erstellen.  In der
        Voreinstellung werden alle FTP betreffenden Nachrichten
        in die Datei <code class="filename">/var/log/xferlog</code>
        geschrieben.  Dies lässt sich aber durch das Einfügen
        der folgenden Zeile in <code class="filename">/etc/syslog.conf</code>
        ändern:</p><pre class="programlisting">ftp.info      /var/log/xferlog</pre><a id="idp90780240" class="indexterm"></a><p>Beachten Sie, dass mit dem Betrieb eines anonymen
        FTP-Servers verschiedene Sicherheitsrisiken verbunden sind.
        Problematisch ist hier vor allem die Erlaubnis zum anonymen
        Upload von Dateien.  Dadurch könnte Ihr Server zur
        Verbreitung von illegaler oder nicht lizensierter Software
        oder noch Schlimmeren missbraucht werden.  Wollen Sie
        anonyme Uploads dennoch erlauben, sollten Sie die
        Zugriffsrechte so setzen, dass solche Dateien erst nach Ihrer
        Zustimmung von anderen Benutzern heruntergeladen werden
        können.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-apache.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="network-samba.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">31.7. Der Apache HTTP-Server </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 31.9. Mit Samba einen Datei- und Druckserver für
      <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®-Clients einrichten</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>