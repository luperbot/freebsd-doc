<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>33.3. Drahtlose Netzwerke</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="advanced-networking.html" title="Kapitel 33. Weiterführende Netzwerkthemen" /><link rel="prev" href="network-routing.html" title="33.2. Gateways und Routen" /><link rel="next" href="network-usb-tethering.html" title="33.4. USB Tethering" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">33.3. Drahtlose Netzwerke</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-routing.html">Zurück</a> </td><th width="60%" align="center">Kapitel 33. Weiterführende Netzwerkthemen</th><td width="20%" align="right"> <a accesskey="n" href="network-usb-tethering.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-wireless"></a>33.3. Drahtlose Netzwerke</h2></div><div><span class="authorgroup"><span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="othername">Loader</span></span>, <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span> und <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp92164816" class="indexterm"></a><a id="idp92165584" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92166736"></a>33.3.1. Grundlagen</h3></div></div></div><p>Die meisten drahtlosen Netzwerke basieren auf dem
	Standard <span class="trademark">IEEE</span>® 802.11.  Sie bestehen aus Stationen, die
	in der Regel im 2,4 GHz- oder im 5 GHz-Band
	miteinander kommunizieren.  Es ist aber auch
	möglich, dass regional andere Frequenzen,
	beispielsweise im 2,3 GHz- oder 4,9 GHz-Band,
	verwendet werden.</p><p>802.11-Netzwerke können auf zwei verschiedene
	Arten aufgebaut sein:  Im
	<span class="emphasis"><em>Infrastruktur-Modus</em></span> agiert eine
	Station als Master, mit dem sich alle anderen Stationen
	verbinden.  Die Summe aller Stationen wird als BSS
	(Basic Service Set), die Master-Station hingegen als
	Access Point (AP) bezeichnet.  In einem BSS läuft
	jedwede Kommunikation über den Access Point.  Die
	zweite Form drahtloser Netzwerke sind die sogenannten
	<span class="emphasis"><em>Ad-hoc-Netzwerke</em></span> (auch als IBSS
	bezeichnet), in denen es keinen Access Point gibt und
	in denen die Stationen direkt miteinander
	kommunizieren.</p><p>Die ersten 802.11-Netzwerke arbeiteten im
	2,4 GHz-Band und nutzten dazu Protokolle der
	<span class="trademark">IEEE</span>®-Standards 802.11 sowie 802.11b.  Diese Standards
	legen unter anderem Betriebsfrequenzen sowie Merkmale
	des MAC-Layers (wie Frames und Transmissionsraten) fest.
	Später kam der Standard 802.11a hinzu, der im
	5 GHz-Band, im Gegensatz zu den ersten beiden
	Standards aber mit unterschiedlichen Signalmechanismen
	und höheren Transmissionsraten arbeitet.  Der
	neueste Standard 802.11g implementiert die Signal- und
	Transmissionsmechanismen von 802.11a im 2,4 GHz-Band,
	ist dabei aber abwärtskompatibel zu
	802.11b-Netzwerken.</p><p>Unabhängig von den zugrundeliegenden
	Transportmechanismen verfügen 802.11-Netzwerke
	über diverse Sicherheitsmechanismen.  Der
	ursprüngliche 802.11-Standard definierte lediglich
	ein einfaches Sicherheitsprotokoll namens WEP.  Dieses
	Protokoll verwendet einen fixen (gemeinsam verwendeten)
	Schlüssel sowie die RC4-Kryptografie-Chiffre,
	um Daten verschlüsselt über das drahtlose
	Netzwerk zu senden.  Alle Stationen des Netzwerks
	müssen sich auf den gleichen fixen Schlüssel
	einigen, um miteinander kommunizieren zu können.  Dieses
	Schema ist sehr leicht zu knacken und wird deshalb heute
	kaum mehr eingesetzt.  Aktuelle Sicherheitsmechanismen
	bauen auf dem Standard <span class="trademark">IEEE</span>® 802.11i auf, der neue
	kryptografische Schlüssel (Chiffren), ein neues
	Protokoll für die Anmeldung von Stationen an einem
	Access Point, sowie Mechanismen zum Austausch von
	Schlüsseln als Vorbereitung der Kommunikation zwischen
	verschiedenen Geräten festlegt.  Kryptografische
	Schlüssel werden regelmäßig getauscht.
	Außerdem gibt es Mechanismen, um Einbruchsversuche
	zu entdecken (und Gegenmaßnahmen ergreifen zu können).
	Ein weiteres häufig verwendetes Sicherheitsprotokoll ist
	WPA.  Dabei handelt es sich um einen Vorläufer von 802.11i,
	der von einem Industriekonsortium als Zwischenlösung bis
	zur endgültigen Verabschiedung von 802.11i entwickelt
	wurde.  WPA definiert eine Untergruppe der Anforderungen des
	802.11i-Standards und ist für den Einsatz in älterer
	Hardware vorgesehen.  WPA benötigt nur den (auf dem
	ursprünglichen WEP-Code basierenden) TKIP-Chiffre.  802.11i
	erlaubt zwar auch die Verwendung von TKIP, fordert aber
	zusätzlich eine stärkere Chiffre (AES-CCM)
	für die Datenverschlüsselung.  (AES war für
	WPA nicht vorgesehen, weil man es als zu rechenintensiv
	für den Einsatz in älteren Geräten ansah.)</p><p>Neben den weiter oben erwähnten Standards ist auch
	der Standard 802.11e von großer Bedeutung.  Dieser
	definiert Protokolle zur Übertragung von
	Multimedia-Anwendungen wie das Streaming von Videodateien
	oder Voice-over-IP (VoIP) in einem 802.11-Netzwerk.  Analog
	zu 802.11i verfügt auch 802.11e über eine
	vorläufige Spezifikation namens WMM (ursprünglich
	WME), die von einem Industriekonsortium als Untergruppe
	von 802.11e spezifiziert wurde, um Multimedia-Anwendungen
	bereits vor der endgültigen Verabschiedung des
	802.11e-Standards implementieren zu können.  802.11e
	sowie WME/WMM  erlauben eine Prioritätenvergabe beim
	Datentransfer im einem drahtlosen Netzwerk.  Möglich
	wird dies durch den Einsatz von Quality of Service-Protokollen
	(QoS) und erweiterten Medienzugriffsprotokollen.  Werden
	diese Protokolle korrekt implementiert, erlauben sie daher
	hohe Datenübertragungsraten und einen priorisierten
	Datenfluss.</p><p>FreeBSD unterstützt die Standards
	802.11a, 802.11b, sowie 802.11g.  Ebenfalls unterstützt
	werden WPA sowie die Sicherheitsprotokolle gemäß
	802.11i (dies sowohl für 11a, 11b als auch 11g). QoS und
	Verkehrspriorisierung, die von den WME/WMM-Protokollen
	benötigt werden, werden ebenfalls (allerdings nicht
	für alle drahtlosen Geräte) unterstützt.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-wireless-basic"></a>33.3.2. Basiskonfiguration</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92185296"></a>33.3.2.1. Kernelkonfiguration</h4></div></div></div><p>Um ein drahtloses Netzwerk zu nutzen, benötigen
	  Sie eine drahtlose Netzwerkkarte und einen Kernel, der
	  drahtlose Netzwerke unterstützt.  Der FreeBSD-Kernel
	  unterstützt den Einsatz von Kernelmodulen.  Daher
	  müssen Sie nur die Unterstützung für die
	  von Ihnen verwendeten Geräte aktivieren.</p><p>Als Erstes benötigen Sie ein drahtloses Gerät.
	  Die meisten drahtlosen Geräte verwenden Bauteile von
	  Atheros und werden deshalb vom <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ath&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ath</span>(4)</span></a>-Treiber
	  unterstützt.  Um diesen Treiber zu verwenden,
	  nehmen Sie die folgende Zeile in die Datei
	  <code class="filename">/boot/loader.conf</code> auf:</p><pre class="programlisting">if_ath_load="YES"</pre><p>Der Atheros-Treiber besteht aus drei Teilen:
	  dem Treiber selbst (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ath&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ath</span>(4)</span></a>), dem
	  Hardware-Support-Layer für die
	  chip-spezifischen Funktionen (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ath_hal&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ath_hal</span>(4)</span></a>)
	  sowie einem Algorithmus zur Auswahl der korrekten
	  Frame-Übertragungsrate (ath_rate_sample).
	  Wenn Sie die Unterstützung für diesen
	  Treiber als Kernelmodul laden, kümmert sich
	  dieses automatisch um diese Aufgaben.  Verwenden
	  Sie ein Nicht-Atheros-Gerät, so müssen
	  Sie hingegen das für dieses Gerät geeignete
	  Modul laden, beispielsweise</p><pre class="programlisting">if_wi_load="YES"</pre><p>für Geräte, die auf Bauteilen von
	  Intersil Prism basieren und daher den Treiber
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">wi</span>(4)</span></a> voraussetzen.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">In den folgenden Abschnitten wird der
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ath&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ath</span>(4)</span></a>-Treiber verwendet.  Verwenden Sie ein
	    anderes Gerät, müssen Sie diesen Wert
	    daher an Ihre Konfiguration anpassen.  Eine Liste aller
	    verfügbaren Treiber und unterstützten
	    drahtlosen Geräte finden sich in den FreeBSD
	    Hardware Notes.  Diese sind für verschiedene
	    Releases und Architekturen auf der Seite <a class="link" href="http://www.FreeBSD.org/releases/index.html" target="_top">
	    Release Information</a> der FreeBSD Homepage.  Gibt es
	    keinen nativen FreeBSD-Treiber für Ihr drahtloses
	    Gerät, können Sie möglicherweise mit
	    <a class="link" href="config-network-setup.html#config-network-ndis" title="12.8.1.1. Windows®-NDIS-Treiber einsetzen">NDIS</a> einen
	    <span class="trademark">Windows</span>®-Treiber verwenden.</p></div><p>Zusätzlich
	  benötigen Sie noch Module zur Verschlüsselung
	  ihres drahtlosen Netzwerks.  Diese werden normalerweise
	  dynamisch vom <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wlan&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">wlan</span>(4)</span></a>-Modul geladen.  Im folgenden
	  Beispiel erfolgt allerdings eine manuelle Konfiguration.
	  Folgende Module sind verfügbar:  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wlan_wep&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">wlan_wep</span>(4)</span></a>,
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wlan_ccmp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">wlan_ccmp</span>(4)</span></a> sowie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wlan_tkip&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">wlan_tkip</span>(4)</span></a>.  Sowohl
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wlan_ccmp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">wlan_ccmp</span>(4)</span></a> als auch <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wlan_tkip&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">wlan_tkip</span>(4)</span></a> werden nur
	  benötigt, wenn Sie WPA und/oder die Sicherheitsprotokolle
	  von 802.11i verwenden wollen.  Wollen Sie Ihr Netzwerk
	  hingegen ohne Verschlüsselung betreiben,
	  benötigen Sie nicht einmal
	  die <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wlan_wep&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">wlan_wep</span>(4)</span></a>-Unterstützung.  Um alle drei
	  Module beim Systemstart zu laden, fügen Sie folgende
	  Zeilen in die Datei <code class="filename">/boot/loader.conf</code>
	  ein:</p><pre class="programlisting">wlan_wep_load="YES"
wlan_ccmp_load="YES"
wlan_tkip_load="YES"</pre><p>Um diese neuen Einträge in der Datei
	  <code class="filename">/boot/loader.conf</code> zu aktivieren, müssen
	  Sie Ihr FreeBSD-System neu starten.  Alternativ können Sie
	  die Kernelmodule aber auch manuell mit <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a> laden.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Wollen Sie keine Kernelmodule verwenden, können
	    Sie die benötigten Treiber auch in Ihren Kernel
	    kompilieren.  Dazu nehmen Sie folgende Zeilen in Ihre
	    Kernelkonfigurationsdatei auf:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">device wlan              # 802.11 support
device wlan_wep          # 802.11 WEP support
device wlan_ccmp         # 802.11 CCMP support
device wlan_tkip         # 802.11 TKIP support
device wlan_amrr         # AMRR transmit rate control algorithm
device ath               # Atheros pci/cardbus NIC's
device ath_hal           # pci/cardbus chip support
options AH_SUPPORT_AR5416 # enable AR5416 tx/rx descriptors
device ath_rate_sample   # SampleRate tx rate control for ath</pre><p xmlns="http://www.w3.org/1999/xhtml">Danach bauen Sie den neuen Kernel und starten Ihr
	    FreeBSD-System neu.</p></div><p>Während des Systemstarts sollten nun einige
	  Informationen ähnlich den folgenden über das von
	  Ihnen verwendete drahtlose Gerät ausgegeben
	  werden:</p><pre class="screen">ath0: &lt;Atheros 5212&gt; mem 0x88000000-0x8800ffff irq 11 at device 0.0 on cardbus1
ath0: [ITHREAD]
ath0: AR2413 mac 7.9 RF2413 phy 4.5</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92222160"></a>33.3.3. Infrastruktur-Modus</h3></div></div></div><p>Drahtlose Netzwerke werden in der Regel im
	Infrastruktur-Modus (auch BSS-Modus genannt) betrieben.
	Dazu werden mehrere drahtlose Access Points zu einem
	gemeinsamen drahtlosen Netzwerk verbunden.  Jedes dieser
	drahtlosen Netzwerke hat einen eigenen Namen, der als
	<span class="emphasis"><em>SSID</em></span> bezeichnet wird.  Alle Clients
	eines drahtlosen Netzwerks verbinden sich in diesem Modus
	mit einem Access Point.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92223696"></a>33.3.3.1. FreeBSD-Clients</h4></div></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92224336"></a>33.3.3.1.1. Einen Access Point finden</h5></div></div></div><p>Um nach drahtlosen Netzwerken zu suchen verwenden Sie
	    <code class="command">ifconfig</code>.  Dieser Scanvorgang kann einige
	    Zeit in Anspruch nehmen, da dazu jede verfügbare
	    Frequenz auf verfügbare Access Points hin
	    überprüft werden muss.  Um die Suche zu starten,
	    müssen Sie als Super-User angemeldet sein:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wlan0 create wlandev ath0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig wlan0 up scan</code></strong>
SSID/MESH ID    BSSID              CHAN RATE   S:N     INT CAPS
dlinkap         00:13:46:49:41:76   11   54M -90:96   100 EPS  WPA WME
freebsdap       00:11:95:c3:0d:ac    1   54M -83:96   100 EPS  WPA</pre><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ihre Netzwerkkarte muss in den Status
	      <code class="option">up</code> versetzt werden, bevor Sie den ersten
	      Scanvorgang starten können.  Für spätere
	      Scans ist dies aber nicht mehr erforderlich.</p></div><p>Als Ergebnis erhalten Sie eine Liste mit allen
	    gefundenen BSS/IBSS-Netzwerken.  Zusätzlich zur
	    <code class="literal">SSID</code> (dem Namen des Netzwerks) wird
	    auch die <code class="literal">BSSID</code> ausgegeben.  Dabei
	    handelt es sich um MAC-Adresse des Access Points.  Das
	    Feld <code class="literal">CAPS</code> gibt den Typ des Netzwerks
	    sowie die Fähigkeiten der Stationen innerhalb des
	    Netzwerks an:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">E</code></span></dt><dd><p>Extended Service Set (ESS).  Zeigt an, dass die
		  Station Teil eines Infrastruktur-Netzwerks ist (und
		  nicht eines IBSS/Ad-hoc-Netzwerks).</p></dd><dt><span class="term"><code class="literal">I</code></span></dt><dd><p>IBSS/Ad-hoc-Netzwerk.  Die Station ist Teil eines
		  Ad-hoc-Netzwerks (und nicht eines
		  ESS-Netzwerks).</p></dd><dt><span class="term"><code class="literal">P</code></span></dt><dd><p>Privacy.  Alle Datenframes, die innerhalb des
		  BSS ausgetauscht werden, sind verschlüsselt.
		  Dieses BSS verwendet dazu kryptografische Verfahren
		  wie WEP, TKIP oder AES-CCMP.</p></dd><dt><span class="term"><code class="literal">S</code></span></dt><dd><p>Short Preamble.  Das Netzwerk verwendet eine
		  kurze Präambel (definiert in 802.11b High
		  Rate/DSSS PHY). Eine kurze Präambel verwendet
		  ein 56 Bit langes Sync-Feld (im Gegensatz
		  zu einer langen Präambel, die ein
		  128 Bit langes Sync-Feld verwendet).</p></dd><dt><span class="term"><code class="literal">s</code></span></dt><dd><p>Short slot time.  Das 802.11g-Netzwerk verwendet
		  eine kurze Slotzeit, da es in diesem Netzwerk keine
		  veralteten (802.11b) Geräte gibt.</p></dd></dl></div><p>Um eine Liste der bekannten Netzwerke auszugeben,
	    verwenden Sie den folgenden Befehl:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wlan0 list scan</code></strong></pre><p>Diese Liste kann entweder automatisch durch das
	    drahtlose Gerät oder manuell durch eine
	    <code class="option">scan</code>-Aufforderung aktualisiert werden.
	    Veraltete Informationen werden dabei automatisch
	    entfernt.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92261840"></a>33.3.3.1.2. Basiseinstellungen</h5></div></div></div><p>Dieser Abschnitt beschreibt, wie Sie ein einfaches
	    drahtloses Netzwerk ohne Verschlüsselung unter FreeBSD
	    einrichten.  Nachdem Sie sich mit den Informationen dieses
	    Abschnitts vertraut gemacht haben, sollten Sie Ihr
	    drahtloses Netzwerk mit <a class="link" href="network-wireless.html#network-wireless-wpa" title="33.3.3.1.3. WPA">WPA</a>
	    verschlüsseln.</p><p>Das Einrichten eines drahtlosen Netzwerks erfolgt
	    in drei Schritten:  Der Auswahl eines Access Points, der
	    Anmeldung Ihrer Station sowie der Konfiguration Ihrer
	    IP-Adresse.</p><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92263760"></a>33.3.3.1.2.1. Einen Access Point auswählen</h6></div></div></div><p>Im Normalfall wird sich Ihre Station automatisch mit
	      einem der zur Verfügung stehenden Access Points
	      verbinden.  Sie müssen dazu lediglich Ihr
	      drahtloses Gerät aktivieren.  Alternativ können
	      Sie auch einen Eintrag ähnlich dem folgenden in
	      <code class="filename">/etc/rc.conf</code> aufnehmen:</p><pre class="programlisting">wlans_ath0="wlan0"
ifconfig_wlan0="DHCP"</pre><p>Wollen Sie sich hingegen mit einem bestimmten
	      Access Point verbinden, müssen Sie dessen
	      SSID angeben:</p><pre class="programlisting">wlans_ath0="wlan0"
ifconfig_wlan0="ssid <em class="replaceable"><code>Ihre_SSID</code></em> DHCP"</pre><p>Gibt es in Ihrem Netzwerk mehrere Access Points
	      mit der gleichen SSID (was der Einfachheit wegen
	      häufig der Fall ist), können Sie sich dennoch
	      mit einem bestimmten Access Point verbinden.  Dazu
	      müssen Sie lediglich die BSSID des Access Points
	      angeben (die Angabe der SSID ist in diesem Fall nicht
	      erforderlich):</p><pre class="programlisting">wlans_ath0="wlan0"
ifconfig_wlan0="ssid <em class="replaceable"><code>Ihre_SSID</code></em> bssid <em class="replaceable"><code>xx:xx:xx:xx:xx:xx</code></em> DHCP"</pre><p>Es gibt noch weitere Möglichkeiten, den Zugriff
	      auf bestimmte Access Point zu beschränken,
	      beispielsweise durch die Begrenzung der Frequenzen, auf
	      denen eine Station nach einem Access Point sucht.  Sinnvoll
	      ist ein solches Vorgehen beispielsweise, wenn Ihr
	      drahtloses Gerät in verschiedenen Frequenzbereichen
	      arbeiten kann, da in diesem Fall das Prüfen aller
	      Frequenzen sehr zeitintensiv ist.  Um nur innerhalb eines
	      bestimmten Frequenzbereichs nach einem Access Point zu
	      suchen, verwenden Sie die Option <code class="option">mode</code>:</p><pre class="programlisting">wlans_ath0="wlan0"
ifconfig_wlan0="mode <em class="replaceable"><code>11g</code></em> ssid <em class="replaceable"><code>Ihre_SSID</code></em> DHCP"</pre><p>Dadurch sucht Ihr drahtloses Gerät nur im
	      2,4 GHz-Band (802.11g), aber nicht innerhalb des
	      5 GHz-Bandes nach einem Access Point.  Mit der
	      Option <code class="option">channel</code> können Sie eine
	      bestimmte Frequenz vorgeben, auf der gesucht werden
	      soll.   Die Option <code class="option">chanlist</code> erlaubt
	      die Angabe mehrerer erlaubter Frequenzen.  Eine
	      umfassende Beschreibung dieser Optionen finden Sie in
	      der Manualpage <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>.</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92276432"></a>33.3.3.1.2.2. Authentifizierung</h6></div></div></div><p>Wenn Sie einen Access Point gefunden haben, muss
	      sich Ihrem Station am Access Point anmelden, bevor
	      Sie Daten übertragen kann.  Dazu gibt es
	      verschiedene Möglichkeiten.  Am häufigsten
	      wird nach wie vor die sogenannte <span class="emphasis"><em>offene
	      Authentifizierung</em></span> verwendet.  Dabei wird
	      es jeder Station erlaubt, sich mit einem Netzwerk
	      zu verbinden und Daten zu übertragen.  Aus
	      Sicherheitsgründen sollte diese Methode allerdings
	      nur zu Testzwecken bei der erstmaligen Einrichtung
	      eines drahtlosen Netzwerks verwendet werden.  Andere
	      Authentifizierungsmechanismen erfordern den Austausch
	      kryptografischer Informationen, bevor Sie die
	      Übertragung von Daten erlauben.  Dazu gehören
	      der Austausch fixer (vorher vereinbarter) Schlüssel
	      oder Kennwörter sowie der Einsatz komplexerer
	      Verfahren mit Backend-Diensten wie RADIUS.  Die meisten
	      Netzwerke nutzen allerdings nach wie vor die offene
	      Authentifizierung, da dies die Voreinstellung ist.  Am
	      zweithäufigsten kommt das weiter unten beschriebene
	      <a class="link" href="network-wireless.html#network-wireless-wpa-wpa-psk" title="33.3.3.1.3.1. WPA-PSK">WPA-PSK</a>
	      (das auch als <span class="foreignphrase"><em class="foreignphrase">WPA Personal</em></span>
	      bezeichnet wird) zum Einsatz.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Verwenden Sie eine
		<span class="trademark">Apple</span>® <span class="trademark">AirPort</span>® Extreme-Basisstation als Access Point,
		benötigen Sie wahrscheinlich sowohl die
		Shared-Key-Authentifizierung als auch einen
		WEP-Schlüssel.  Die entsprechende Konfiguration
		erfolgt entweder in der Datei
		<code class="filename">/etc/rc.conf</code> oder über das
		Programm <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wpa_supplicant&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wpa_supplicant</span>(8)</span></a>.  Verwenden Sie nur
		eine einzige <span class="trademark">AirPort</span>®-Basisstation, benötigen
		Sie einen Eintrag ähnlich dem folgenden:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">wlans_ath0="wlan0"
ifconfig_wlan0="authmode shared wepmode on weptxkey <em class="replaceable"><code>1</code></em> wepkey <em class="replaceable"><code>01234567</code></em> DHCP"</pre><p xmlns="http://www.w3.org/1999/xhtml">Normalerweise sollten Sie
		Shared-Key-Authentifizierung aber nicht verwenden,
		da diese die Sicherheit des WEP-Schlüssel noch
		weiter verringert.  Müssen Sie WEP einsetzen
		(beispielsweise weil Sie zu veralteten Geräten
		kompatibel bleiben müssen),  sollten Sie WEP
		nur zusammen mit der offenen Authentifizierung
		(<code class="literal">open</code> authentication) verwenden.
		WEP wird im <a class="xref" href="network-wireless.html#network-wireless-wep" title="33.3.3.1.4. WEP">Abschnitt 33.3.3.1.4, &#8222;WEP&#8220;</a> näher
		beschrieben.</p></div></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92321616"></a>33.3.3.1.2.3. Eine IP-Adresse über DHCP beziehen</h6></div></div></div><p>Nachdem Sie einen Access Point gefunden und sich
	      authentifiziert haben, benötigen Sie noch eine
	      IP-Adresse, die Sie in der Regel über DHCP
	      zugewiesen bekommen.  Dazu müssen Sie lediglich
	      die Option <code class="literal">DHCP</code> in Ihre
	      in der Datei <code class="filename">/etc/rc.conf</code>
	      vorhandene Konfiguration Ihres drahtlosen Geräts
	      aufnehmen:</p><pre class="programlisting">wlans_ath0="wlan0"
ifconfig_wlan0="DHCP"</pre><p>Nun können Sie Ihr drahtloses Gerät
	      starten:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service netif start</code></strong></pre><p>Nachdem Sie das Gerät aktiviert haben,
	      können Sie mit <code class="command">ifconfig</code> den
	      Status des Geräts <code class="filename">ath0</code>
	      abfragen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wlan0</code></strong>
wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        ether 00:11:95:d5:43:62
        inet 192.168.1.100 netmask 0xffffff00 broadcast 192.168.1.255
        media: IEEE 802.11 Wireless Ethernet OFDM/54Mbps mode 11g
        status: associated
        ssid dlinkap channel 11 (2462 Mhz 11g) bssid 00:13:46:49:41:76
        country US ecm authmode OPEN privacy OFF txpower 21.5 bmiss 7
        scanvalid 60 bgscan bgscanintvl 300 bgscanidle 250 roam:rssi 7
        roam:rate 5 protmode CTS wme burst</pre><p><code class="literal">status: associated</code> besagt, dass
	      sich Ihr Gerät mit dem drahtlosen Netzwerk verbunden
	      hat (konkret mit dem Netzwerk <code class="literal">dlinkap</code>).
	      <code class="literal">bssid 00:13:46:49:41:76</code> gibt die
	      MAC-Adresse Ihres Access Points aus und die Zeile mit
	      <code class="literal">authmode OPEN</code> informiert Sie darüber,
	      dass Ihre Kommunikation nicht verschlüsselt wird.</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92333520"></a>33.3.3.1.2.4. Statische IP-Adressen</h6></div></div></div><p>Alternativ zu dynamischen IP-Adressen
	      können Sie auch eine statische IP-Adresse verwenden.
	      Dazu ersetzen Sie in Ihrer Konfiguration
	      <code class="literal">DHCP</code> durch die zu verwendende
	      IP-Adresse.  Beachten Sie dabei, dass Sie die anderen
	      Konfigurationsparameter nicht versehentlich
	      verändern:</p><pre class="programlisting">wlans_ath0="wlan0"
ifconfig_wlan0="inet <em class="replaceable"><code>192.168.1.100</code></em> netmask <em class="replaceable"><code>255.255.255.0</code></em> ssid <em class="replaceable"><code>your_ssid_here</code></em>"</pre></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-wireless-wpa"></a>33.3.3.1.3. WPA</h5></div></div></div><p>Bei WPA (Wi-Fi Protected Access) handelt es sich um ein
	    Sicherheitsprotokoll, das in 802.11-Netzwerken verwendet
	    wird, um die Nachteile von <a class="link" href="network-wireless.html#network-wireless-wep" title="33.3.3.1.4. WEP">WEP</a> (fehlende
	    Authentifizierung und schwache Verschlüsselung)
	    zu vermeiden.  WPA stellt das aktuelle
	    802.1X-Authentifizierungsprotokoll dar und verwendet
	    eine von mehreren Chiffren, um die Datensicherheit
	    zu gewährleisten.  Die einzige Chiffre, die von
	    WPA verlangt wird, ist TKIP (<span class="foreignphrase"><em class="foreignphrase">Temporary
	    Key Integrity Protocol</em></span>), eine Chiffre,
	    die die von WEP verwendete RC4-Chiffre um Funktionen
	    zur Prüfung der Datenintegrität und zur
	    Erkennung und Bekämpfung von Einbruchsversuchen
	    erweitert.
	    TKIP ist durch Softwaremodifikationen auch unter
	    veralteter Hardware lauffähig.  Im Vergleich zu
	    WEP ist WPA zwar sehr viel sicherer, es ist aber dennoch
	    nicht völlig immun gegen Angriffe.  WPA definiert
	    mit AES-CCMP noch eine weitere Chiffre als Alternative
	    zu TKIP.  AES-CCMP (das häufig als WPA2 oder RSN
	    bezeichnet wird) sollte, wenn möglich, eingesetzt
	    werden.</p><p>WPA definiert Authentifizierungs- und
	    Verschlüsselungsprotokolle.  Die Authentifizierung
	    erfolgt in der Regel über eine der folgenden
	    Techniken:  802.1X gemeinsam mit einem
	    Backend-Authentifizierungsdienst wie RADIUS, oder durch
	    einen Minimal-Handshake zwischen der Station und dem
	    Access Point mit einem vorher vereinbarten gemeinsamen
	    Schlüssel.  Die erste Technik wird als
	    <span class="foreignphrase"><em class="foreignphrase">WPA Enterprise</em></span>, die zweite
	    hingegen als <span class="foreignphrase"><em class="foreignphrase">WPA Personal</em></span>
	    bezeichnet.  Da sich der Aufwand für das Aufsetzen
	    eines RADIUS-Backend-Servers für die meisten
	    drahtlosen Netzwerke nicht lohnt, wird WPA in der Regel
	    als WPA-PSK (WPA, Pre-Shared-Key) konfiguriert.</p><p>Die Kontrolle der drahtlosen Verbindung sowie die
	    vorangehende Authentifizierung (über Schlüssel
	    oder durch die Kommunikation mit einem Server) erfolgt
	    über das Programm <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wpa_supplicant&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wpa_supplicant</span>(8)</span></a>, das
	    über die Datei
	    <code class="filename">/etc/wpa_supplicant.conf</code>
	    eingerichtet wird.  Ausführliche Informationen
	    zur Konfiguration des Programms finden sich in der
	    Manualpage <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wpa_supplicant.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">wpa_supplicant.conf</span>(5)</span></a>.</p><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-wireless-wpa-wpa-psk"></a>33.3.3.1.3.1. WPA-PSK</h6></div></div></div><p>WPA-PSK oder WPA-Personal basiert auf einem
	      gemeinsamen (vorher vereinbarten) Schlüssel (PSK),
	      der aus einem Passwort generiert und danach als
	      Master-Key des drahtlosen Netzwerks verwendet wird.
	      Jeder Benutzer des drahtlosen Netzwerks verwendet daher
	      <span class="emphasis"><em>den gleichen</em></span> Schlüssel.  WPA-PSK
	      sollte nur in kleinen Netzwerken eingesetzt werden, in
	      denen die Konfiguration eines Authentifizierungsservers
	      nicht möglich oder erwünscht ist.</p><div xmlns="" class="warning"><h3 class="admontitle">Warnung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Achten Sie darauf, dass Sie immer starke
		Passwörter verwenden, die ausreichend lang sind und,
		wenn möglich, auch Sonderzeichen enthalten, damit
		diese nicht leicht erraten und/oder umgangen werden
		können.</p></div><p>Der erste Schritt zum Einsatz von WPA-PSK ist die
	      Konfiguration der SSID und des gemeinsamen Schlüssels
	      Ihres Netzwerks in der Datei
	      <code class="filename">/etc/wpa_supplicant.conf</code>:</p><pre class="programlisting">network={
  ssid="freebsdap"
  psk="freebsdmall"
}</pre><p>Danach geben Sie in <code class="filename">/etc/rc.conf</code>
	      an, dass WPA zur Verschlüsselung eingesetzt werden
	      soll und dass die IP-Adresse über DHCP bezogen
	      wird:</p><pre class="programlisting">wlans_ath0="wlan0"
ifconfig_wlan0="WPA DHCP"</pre><p>Nun können Sie Ihr Netzgerät aktivieren:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service netif start</code></strong>
Starting wpa_supplicant.
DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 5
DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 6
DHCPOFFER from 192.168.0.1
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPACK from 192.168.0.1
bound to 192.168.0.254 -- renewal in 300 seconds.
wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet OFDM/36Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 (2412 MHz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</pre><p>Alternativ können Sie die Konfiguration von
	      <a class="link" href="network-wireless.html#network-wireless-wpa-wpa-psk" title="33.3.3.1.3.1. WPA-PSK">WPA-PSK</a>
	      auch manuell durchführen, wobei Sie wiederum die
	      Konfigurationsdatei
	      <code class="filename">/etc/wpa_supplicant.conf</code>
	      verwenden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>wpa_supplicant -i wlan0 -c /etc/wpa_supplicant.conf</code></strong>
Trying to associate with 00:11:95:c3:0d:ac (SSID='freebsdap' freq=2412 MHz)
Associated with 00:11:95:c3:0d:ac
WPA: Key negotiation completed with 00:11:95:c3:0d:ac [PTK=CCMP GTK=CCMP]
CTRL-EVENT-CONNECTED - Connection to 00:11:95:c3:0d:ac completed (auth) [id=0 id_str=]</pre><p>Im zweiten Schritt starten Sie nun
	      <code class="command">dhclient</code>, um eine IP-Adresse vom
	      DHCP-Server zu beziehen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dhclient wlan0</code></strong>
DHCPREQUEST on wlan0 to 255.255.255.255 port 67
DHCPACK from 192.168.0.1
bound to 192.168.0.254 -- renewal in 300 seconds.
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig wlan0</code></strong>
wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet OFDM/36Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 (2412 MHz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</pre><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Enthält Ihre <code class="filename">/etc/rc.conf</code>
		bereits die Zeile <code class="literal">ifconfig_wlan0="DHCP"</code>,
		müssen Sie <code class="command">dhclient</code> nicht mehr
		manuell aufrufen, da <code class="command">dhclient</code> in
		diesem Fall automatisch gestartet wird, nachdem
		<code class="command">wpa_supplicant</code> die Schlüssel
		übergibt.</p></div><p>Sollte der Einsatz von DHCP nicht möglich sein,
	      können Sie auch eine statische IP-Adresse
	      angeben, nachdem <code class="command">wpa_supplicant</code> Ihre
	      Station authentifiziert hat:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> inet <em class="replaceable"><code>192.168.0.100</code></em> netmask <em class="replaceable"><code>255.255.255.0</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em></code></strong>
wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.100 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet OFDM/36Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 (2412 MHz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</pre><p>Verwenden Sie DHCP nicht, müssen Sie
	      zusätzlich noch das Standard-Gateway sowie
	      den/die Nameserver manuell festlegen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add default <em class="replaceable"><code>your_default_router</code></em></code></strong>
              <code class="prompt">#</code> <strong class="userinput"><code>echo "nameserver <em class="replaceable"><code>your_DNS_server</code></em>" &gt;&gt; /etc/resolv.conf</code></strong>
            </pre></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-wireless-wpa-eap-tls"></a>33.3.3.1.3.2. WPA und EAP-TLS</h6></div></div></div><p>Die zweite Möglichkeit, WPA einzusetzen, ist
	      die Verwendung eines
	      802.1X-Backend-Authentifizierungsservers.  Diese
	      Variante wird als WPA-Enterprise bezeichnet, um sie
	      vom weniger sicheren WPA-Personal abzugrenzen, das
	      auf dem Austausch gemeinsamer (und vorher vereinbarter
	      Schlüssel) basiert.  Die bei WPA-Enterprise
	      verwendete Authentifizierung basiert auf EAP
	      (<span class="foreignphrase"><em class="foreignphrase">Extensible Authentication
	      Protocol</em></span>).</p><p>EAP selbst bietet keine Verschlüsselung,
	      sondern operiert in einem verschlüsselten
	      Tunnel.  Es gibt verschiedene, auf EAP basierende
	      Authentifizierungsmethoden, darunter EAP-TLS,
	      EAP-TTLS sowie EAP-PEAP.</p><p>Bei EAP-TLS (<span class="foreignphrase"><em class="foreignphrase">EAP with Transport Layers
	      Security</em></span>) handelt es sich um sehr gut
	      unterstütztes Authentifizierungsprotokoll, da es
	      sich dabei um die erste EAP-Methode handelt, die von
	      der <a class="link" href="http://www.wi-fi.org/" target="_top">Wi-Fi
	      Alliance</a> zertifiziert wurde.  EAP-TLS
	      erfordert drei Zertifikate:  Das (auf allen Rechnern
	      installierte) CA-Zertifikat, das Server-Zertifikat
	      Ihres Authentifizierungsservers, sowie ein
	      Client-Zertifikat für jeden drahtlosen Client.
	      Sowohl der Authentifizierungsservers als auch die
	      drahtlosen Clients authentifizieren sich gegenseitig
	      durch ihre Zertifikate, wobei sie überprüfen,
	      ob diese Zertifikate auch von der
	      Zertifizierungs-Authorität (CA) des jeweiligen
	      Unternehmens signiert wurden.</p><p>Die Konfiguration erfolgt (analog zu WPA-PSK)
	      über die Datei
	      <code class="filename">/etc/wpa_supplicant.conf</code>:</p><pre class="programlisting">network={
  ssid="freebsdap" <a id="co-tls-ssid"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
  proto=RSN  <a id="co-tls-proto"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
  key_mgmt=WPA-EAP <a id="co-tls-kmgmt"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
  eap=TLS <a id="co-tls-eap"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
  identity="loader" <a id="co-tls-id"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span>
  ca_cert="/etc/certs/cacert.pem" <a id="co-tls-cacert"></a><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span>
  client_cert="/etc/certs/clientcert.pem" <a id="co-tls-clientcert"></a><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span>
  private_key="/etc/certs/clientkey.pem" <a id="co-tls-pkey"></a><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span>
  private_key_passwd="freebsdmallclient" <a id="co-tls-pwd"></a><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span>
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-tls-ssid"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Der Name des Netzwerks (die SSID).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-tls-proto"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das RSN/WPA2-Protokoll (<span class="trademark">IEEE</span>® 802.11i) wird
		  verwendet.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-tls-kmgmt"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Die <code class="literal">key_mgmt</code>-Zeile bezieht
		  sich auf das verwendete Key-Management-Protokoll.
		  In diesem Beispiel wird WPA gemeinsam mit der
		  EAP-Authentifizierung verwendet
		  (<code class="literal">WPA-EAP</code>).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-tls-eap"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Die für die Verbindung verwendete
		  EAP-Methode.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-tls-id"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das <code class="literal">identity</code>-Feld enthält
		  den von EAP verwendeten Identifizierungsstring.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-tls-cacert"><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das Feld <code class="literal">ca_cert</code> gibt den Pfad
		  zum CA-Zertifikat an.  Dieses Datei wird benötigt,
		  um das Server-Zertifikat zu verifizieren.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-tls-clientcert"><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Die <code class="literal">client_cert</code>-Zeile gibt den
		  Pfad zum Client-Zertifikat an.  Jeder Client hat ein
		  eigenes, innerhalb des Netzwerks eindeutiges,
		  Zertifikat.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-tls-pkey"><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das Feld <code class="literal">private_key</code> gibt den
		  Pfad zum privaten Schlüssel des
		  Client-Zertifikat an.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-tls-pwd"><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das Feld <code class="literal">private_key_passwd</code>
		  enthält die Passphrase für den privaten
		  Schlüssel.</p></td></tr></table></div><p>Danach fügen Sie die folgende Zeile in
	      <code class="filename">/etc/rc.conf</code> ein:</p><pre class="programlisting">wlans_ath0="wlan0"
ifconfig_wlan0="WPA DHCP"</pre><p>Nun können Sie Ihr drahtloses Gerät
	      aktivieren:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service netif start</code></strong>
Starting wpa_supplicant.
DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 7
DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 15
DHCPACK from 192.168.0.20
bound to 192.168.0.254 -- renewal in 300 seconds.
wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet DS/11Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 (2412 MHz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</pre><p>Alternativ können Sie Ihr drahtloses Gerät
	      wiederum manuell über
	      <code class="command">wpa_supplicant</code> und
	      <code class="command">ifconfig</code> aktivieren.</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-wireless-wpa-eap-ttls"></a>33.3.3.1.3.3. WPA und EAP-TTLS</h6></div></div></div><p>Bei EAP-TLS müssen sowohl der
	      Authentifizierungsserver als auch die Clients jeweils
	      ein eigenes Zertifikat aufweisen.  Setzen Sie hingegen
	      EAP-TTLS (<span class="foreignphrase"><em class="foreignphrase">EAP-Tunneled
	      Transport Layer Security</em></span>) ein, ist das
	      Client-Zertifikat optional.  EAP-TTLS geht dabei
	      ähnlich vor wie verschlüsselte Webseiten,
	      bei denen der Webserver einen sicheren SSL-Tunnel
	      erzeugen kann, ohne dass der Besucher dabei über
	      ein clientseitiges Zertifikat verfügen muss.
	      EAP-TTLS verwendet einen verschlüsselten
	      TLS-Tunnel zum sicheren Transport der
	      Authentifizierungsdaten.</p><p>Die Konfiguration von EAP-TTLS erfolgt in der
	      Datei <code class="filename">/etc/wpa_supplicant.conf</code>:</p><pre class="programlisting">network={
  ssid="freebsdap"
  proto=RSN
  key_mgmt=WPA-EAP
  eap=TTLS <a id="co-ttls-eap"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
  identity="test" <a id="co-ttls-id"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
  password="test" <a id="co-ttls-passwd"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
  ca_cert="/etc/certs/cacert.pem" <a id="co-ttls-cacert"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
  phase2="auth=MD5" <a id="co-ttls-pha2"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span>
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttls-eap"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Die für die Verbindung verwendete
		  EAP-Methode.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttls-id"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das <code class="literal">identity</code>-Feld enthält
		  den Identifizierungsstring für die
		  EAP-Authentifizierung innerhalb des
		  verschlüsselten TlS-Tunnels.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttls-passwd"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das <code class="literal">password</code>-Feld enthält
		  die Passphrase für die
		  EAP-Authentifizierung.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttls-cacert"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das Feld <code class="literal">ca_cert</code> gibt den
		  Pfad zum CA-Zertifikat an, das benötigt wird,
		  um das Server-Zertifikat zu verifizieren.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttls-pha2"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Die innerhalb des verschlüsselten TLS-Tunnels
		  verwendete Authentifizierungsmethode.  In unserem
		  Beispiel handelt es sich dabei um EAP und MD5.  Diese
		  Phase der <span class="quote">&#8222;<span class="quote">inneren Authentifizierung</span>&#8220;</span> wird
		  oft als <span class="quote">&#8222;<span class="quote">phase2</span>&#8220;</span> bezeichnet.</p></td></tr></table></div><p>Folgende Zeilen müssen zusätzlich in die Datei
	      <code class="filename">/etc/rc.conf</code> aufgenommen werden:</p><pre class="programlisting">wlans_ath0="wlan0"
ifconfig_wlan0="WPA DHCP"</pre><p>Nun können Sie Ihr drahtloses Gerät
	      aktivieren:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service netif start</code></strong>
Starting wpa_supplicant.
DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 7
DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 15
DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 21
DHCPACK from 192.168.0.20
bound to 192.168.0.254 -- renewal in 300 seconds.
wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet DS/11Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 (2412 MHz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</pre></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-wireless-wpa-eap-peap"></a>33.3.3.1.3.4. WPA und EAP-PEAP</h6></div></div></div><p>PEAP (<span class="foreignphrase"><em class="foreignphrase">Protected EAP</em></span>)
	      wurde als Alternative zu EAP-TTLS entwickelt.  Es gibt
	      zwei verschiedene PEAP-Methoden, wobei es sich bei
	      PEAPv0/EAP-MSCHAPv2 um die häufiger verwendete
	      Methode handelt.  In den folgenden Ausführungen
	      wird der Begriff PEAP synonym für diese
	      EAP-Methode verwendet.  PEAP ist nach EAP-TLS der
	      am häufigsten verwendete und am besten
	      unterstützte EAP-Standard.</p><p>PEAP arbeitet ähnlich wie EAP-TTLS:  Es
	      verwendet ein serverseitiges Zertifikat, um
	      einen verschlüsselten TLS-Tunnel zu erzeugen,
	      über den die sichere Authentifizierung zwischen
	      den Clients und dem Authentifizierungsserver erfolgt.
	      In Sachen Sicherheit unterscheiden sich EAP-TTLS und
	      PEAP allerdings:  PEAP überträgt den
	      Benutzernamen im Klartext und verschlüsselt nur
	      das Passwort, während EAP-TTLS sowohl den
	      Benutzernamen als auch das Passwort über den
	      TLS-Tunnel überträgt.</p><p>Um EAP-PEAP einzurichten, müssen Sie die
	      Konfigurationsdatei
	      <code class="filename">/etc/wpa_supplicant.conf</code>
	      anpassen:</p><pre class="programlisting">network={
  ssid="freebsdap"
  proto=RSN
  key_mgmt=WPA-EAP
  eap=PEAP <a id="co-peap-eap"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
  identity="test" <a id="co-peap-id"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
  password="test" <a id="co-peap-passwd"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
  ca_cert="/etc/certs/cacert.pem" <a id="co-peap-cacert"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
  phase1="peaplabel=0" <a id="co-peap-pha1"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span>
  phase2="auth=MSCHAPV2" <a id="co-peap-pha2"></a><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span>
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-peap-eap"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Die für die Verbindung verwendete
		  EAP-Methode.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-peap-id"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das <code class="literal">identity</code>-Feld enthält
		  den Identifizierungsstring für die innerhalb
		  des verschlüsselten TLS-Tunnels erfolgende
		  EAP-Authentifizierung.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-peap-passwd"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das Feld <code class="literal">password</code> enthält
		  die Passphrase für die EAP-Authentifizierung.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-peap-cacert"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das Feld <code class="literal">ca_cert</code> gibt den Pfad
		  zum CA-Zertifikat an, das zur Verifizierung des
		  Server-Zertifikats benötigt wird.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-peap-pha1"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Dieses Feld enthält die Parameter für
		  die erste Phase der Authentifizierung (also den
		  TLS-Tunnel).  Je nach dem, welchen
		  Authentifizierungsserver Sie verwenden, müssen
		  Sie hier einen unterschiedlichen Wert angeben.
		  In den meisten Fällen wird dieses Feld den
		  Wert <span class="quote">&#8222;<span class="quote">client EAP encryption</span>&#8220;</span> aufweisen,
		  der durch die Angabe von
		  <code class="literal">peaplabel=0</code> gesetzt wird.  Weitere
		  Informationen zur Konfiguration von PEAP finden Sie
		  in der Manualpage <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wpa_supplicant.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">wpa_supplicant.conf</span>(5)</span></a>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-peap-pha2"><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das innerhalb des verschlüsselten TLS-Tunnels
		  verwendete Authentifizierungsprotokoll.  In unserem
		  Beispiel handelt es sich dabei um
		  <code class="literal">auth=MSCHAPV2</code>.</p></td></tr></table></div><p>Danach fügen Sie die folgende Zeile in
	      <code class="filename">/etc/rc.conf</code> ein:</p><pre class="programlisting">ifconfig_ath0="WPA DHCP"</pre><p>Zuletzt müssen Sie die Netzwerkkarte noch
	      aktivieren:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service netif start</code></strong>
Starting wpa_supplicant.
DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 7
DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 15
DHCPREQUEST on wlan0 to 255.255.255.255 port 67 interval 21
DHCPACK from 192.168.0.20
bound to 192.168.0.254 -- renewal in 300 seconds.
wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.254 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet DS/11Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 (2412 MHz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode WPA2/802.11i privacy ON deftxkey UNDEF
      AES-CCM 3:128-bit txpower 21.5 bmiss 7 scanvalid 450 bgscan
      bgscanintvl 300 bgscanidle 250 roam:rssi 7 roam:rate 5 protmode CTS
      wme burst roaming MANUAL</pre></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-wireless-wep"></a>33.3.3.1.4. WEP</h5></div></div></div><p>WEP (Wired Equivalent Privacy) ist Teil des
	    ursprünglichen 802.11-Standards.  Es enthält
	    keinen Authentifzierungsmechanismus und verfügt
	    lediglich über eine schwache Zugriffskontrolle,
	    die sehr leicht umgangen werden kann.</p><p>WEP kann über <code class="command">ifconfig</code>
	    aktiviert werden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> create wlandev <em class="replaceable"><code>ath0</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> inet <em class="replaceable"><code>192.168.1.100</code></em> netmask <em class="replaceable"><code>255.255.255.0</code></em> \
            ssid <em class="replaceable"><code>my_net</code></em> wepmode on weptxkey <em class="replaceable"><code>3</code></em> wepkey <em class="replaceable"><code>3:0x3456789012</code></em></code></strong></pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> Mit <code class="literal">weptxkey</code> geben Sie an,
		welcher WEP-Schlüssel für für die
		Datenübertragung verwendet wird (in unserem
		Beispiel ist dies der dritte Schlüssel).  Der
		gleiche Schlüssel muss auch am Access Point
		eingestellt sein.  Kennen Sie den vom Access Point
		verwendeten Schlüssel nciht, sollten Sie zuerst
		den Wert <code class="literal">1</code> (d.h. den ersten
		Schlüssel) für diese Variable verwenden.</p></li><li class="listitem"><p>Mit <code class="literal">wepkey</code> legen Sie den zu
		verwendenden WEP-Schlüssel in der Form
		<em class="replaceable"><code>Nummer:Schlüssel</code></em> fest.
		Ist der Schlüssel "Nummer" nicht vorhanden, wird
		automatisch Schlüssel <code class="literal">1</code>
		verwendet.  Die Angabe von "Nummer" ist zwingend
		nötig, wenn Sie einen anderen als den ersten
		Schlüssel verwenden wollen.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">In Ihrer Konfiguration müssen Sie
		  <code class="literal">0x3456789012</code> durch den an
		  Ihrem Access Point konfigurierten Schlüssel
		  ersetzen.</p></div></li></ul></div><p>Weitere Informationen finden Sie in der Manualpage
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>.</p><p>Das Programm <code class="command">wpa_supplicant</code>
	    eignet sich ebenfalls dazu, WEP für Ihr drahtloses
	    Gerät zu aktivieren.  Obige Konfiguration lässt
	    sich dabei durch die Aufnahme der folgenden Zeilen in die
	    Datei <code class="filename">/etc/wpa_supplicant.conf</code>
	    realisieren:</p><pre class="programlisting">network={
  ssid="my_net"
  key_mgmt=NONE
  wep_key3=3456789012
  wep_tx_keyidx=3
}</pre><p>Danach müssen Sie das Programm noch aufrufen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>wpa_supplicant -i <em class="replaceable"><code>wlan0</code></em> -c /etc/wpa_supplicant.conf</code></strong>
Trying to associate with 00:13:46:49:41:76 (SSID='dlinkap' freq=2437 MHz)
Associated with 00:13:46:49:41:76</pre></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92571216"></a>33.3.4. Ad-hoc-Modus</h3></div></div></div><p>Der IBSS-Modus (auch als Ad-hoc-Modus bezeichnet), ist
	für Punkt-zu-Punkt-Verbindungen vorgesehen.  Um
	beispielsweise eine Ad-hoc-Verbindung zwischen den Rechnern
	<code class="systemitem">A</code> und <code class="systemitem">B</code> aufzubauen,
	benötigen Sie lediglich zwei IP-Adressen und eine
	SSID.</p><p>Auf dem Rechner <code class="systemitem">A</code> geben Sie Folgendes
	ein:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> create wlandev <em class="replaceable"><code>ath0</code></em> wlanmode adhoc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> inet <em class="replaceable"><code>192.168.0.1</code></em> netmask <em class="replaceable"><code>255.255.255.0</code></em> ssid <em class="replaceable"><code>freebsdap</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em></code></strong>
  wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
      ether 00:11:95:c3:0d:ac
      inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;adhoc&gt;
      status: running
      ssid freebsdap channel 2 (2417 Mhz 11g) bssid 02:11:95:c3:0d:ac
      country US ecm authmode OPEN privacy OFF txpower 21.5 scanvalid 60
      protmode CTS wme burst</pre><p>Der <code class="literal">adhoc</code>-Parameter gibt an, dass die
	Schnittstelle im IBSS-Modus läuft.</p><p>Rechner <code class="systemitem">B</code> sollte nun in der Lage sein,
	Rechner <code class="systemitem">A</code> zu finden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> create wlandev <em class="replaceable"><code>ath0</code></em> wlanmode adhoc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> up scan</code></strong>
  SSID/MESH ID    BSSID              CHAN RATE   S:N     INT CAPS
  freebsdap       02:11:95:c3:0d:ac    2   54M -64:-96  100 IS   WME</pre><p>Der Wert <code class="literal">I</code> (Spalte CAPS) gibt an,
	dass sich Rechner <code class="systemitem">A</code> im Ad-hoc-Modus befindet.
	Nun müssen Sie nur noch Rechner <code class="systemitem">B</code> eine
	unterschiedliche IP-Adresse zuweisen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> inet <em class="replaceable"><code>192.168.0.2</code></em> netmask <em class="replaceable"><code>255.255.255.0</code></em> ssid <em class="replaceable"><code>freebsdap</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em></code></strong>
  wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.2 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;adhoc&gt;
      status: running
      ssid freebsdap channel 2 (2417 Mhz 11g) bssid 02:11:95:c3:0d:ac
      country US ecm authmode OPEN privacy OFF txpower 21.5 scanvalid 60
      protmode CTS wme burst</pre><p>Damit sind die Rechner <code class="systemitem">A</code> und
	<code class="systemitem">B</code> bereit und können untereinander
	Daten austauschen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-wireless-ap"></a>33.3.5. FreeBSD Host Access Points</h3></div></div></div><p>FreeBSD kann als Access Point (AP) agieren. Dies verhindert,
        dass man sich einen Hardware AP kaufen oder ein ad-hoc
        Netzwerk laufen lassen muss.  Dies kann sinnvoll sein,
        falls Ihre FreeBSD-Computer als Gateway zu einem anderen
        Netzwerk (z.B. Internet) fungiert.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-wireless-ap-basic"></a>33.3.5.1. Grundeinstellungen</h4></div></div></div><p>Bevor Sie ihren FreeBSD-Computer als einen AP konfigurieren,
          muss der Kernel mit dem für ihre Wireless-Karte
          entsprechenden Treibern konfiguriert werden.  Sie
          müssen ebenfalls die Sicherheitsprotokolle, die Sie
          nutzen wollen, dem Kernel hinzufügen.  Für
          weitere Informationen siehe:
          <a class="xref" href="network-wireless.html#network-wireless-basic" title="33.3.2. Basiskonfiguration">Abschnitt 33.3.2, &#8222;Basiskonfiguration&#8220;</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Die Verwendung der NDIS und <span class="trademark">Windows</span>® Treiber erlauben
            zur Zeit keinen AP-Modus. Nur die nativen
            FreeBSD-Wireless-Treiber unterstützen den AP Modus.</p></div><p>Nachdem die Unterstützung für ihr drahtloses
          Netzwerk geladen ist, können Sie überprüfen, ob
          Ihr Wireless-Gerät den hostbasierenden Access-Point Modus
          (auch bekannt als hostap Modus) unterstützt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> create wlandev <em class="replaceable"><code>ath0</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> list caps</code></strong>
drivercaps=6f85edc1&lt;STA,FF,TURBOP,IBSS,HOSTAP,AHDEMO,TXPMGT,SHSLOT,SHPREAMBLE,MONITOR,MBSS,WPA1,WPA2,BURST,WME,WDS,BGSCAN,TXFRAG&gt;
cryptocaps=1f&lt;WEP,TKIP,AES,AES_CCM,TKIPMIC&gt;</pre><p>Diese Ausgabe zeigt die Möglichkeiten der Karte. Das
	  Wort <code class="literal">HOSTAP</code> bestätigt, dass diese
	  Wireless-Karte als Access Point agieren kann.  Die
	  verschiedenen unterstützten Algorithmen
	  (z.B. WEP, TKIP, AES usw.) werden ebenfalls angezeigt.
	  Diese Informationen sind wichtig, wenn Sie wissen wollen,
	  welche Sicherheitsprotokolle auf diesem Access Point
	  verwendbar sind.</p><p>Das Wireless-Gerät kann nur während der Erzeugung
	  des Pseudo-Geräts in den hostap-Modus gesetzt werden.
	  Zuvor erstellte Pseudo-Geräte müssen also vorher
	  zerstört werden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> destroy</code></strong></pre><p>Danach muss das Gerät erneut erstellt werden, bevor
	  die restlichen Netzwerkparameter konfiguriert werden
	  können:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> create wlandev <em class="replaceable"><code>ath0</code></em> wlanmode hostap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> inet <em class="replaceable"><code>192.168.0.1</code></em> netmask <em class="replaceable"><code>255.255.255.0</code></em> ssid <em class="replaceable"><code>freebsdap</code></em> mode 11g channel 1</code></strong></pre><p>Benutzen Sie danach erneut den Befehl
	  <code class="command">ifconfig</code>, um den Status der
	  <code class="filename">wlan0</code>-Schnittstelle abzufragen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em></code></strong>
  wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
      ether 00:11:95:c3:0d:ac
      inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;hostap&gt;
      status: running
      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode OPEN privacy OFF txpower 21.5 scanvalid 60
      protmode CTS wme burst dtimperiod 1 -dfs</pre><p>Die <code class="literal">hostap</code>-Parameter geben die
	  Schnittstelle an, die im hostbasierenden Access Point Modus
	  läuft.</p><p>Die Konfiguration der Schnittstelle kann durch
	  Hinzufügen der folgenden Zeilen in die Datei
	  <code class="filename">/etc/rc.conf</code> automatisch während
	  des Bootvorganges erfolgen:</p><pre class="programlisting">wlans_ath0="wlan0"
create_args_wlan0="wlanmode hostap"
ifconfig_wlan0="inet <em class="replaceable"><code>192.168.0.1</code></em> netmask <em class="replaceable"><code>255.255.255.0</code></em> ssid <em class="replaceable"><code>freebsdap</code></em> mode 11g channel <em class="replaceable"><code>1</code></em>"</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92618832"></a>33.3.5.2. Hostbasierender Access Point ohne Authentifizierung
	  oder Verschlüsselung</h4></div></div></div><p>Obwohl es nicht empfohlen wird, einen AP ohne jegliche
	  Authentifizierung oder Verschlüsselung laufen zu lassen,
	  ist es eine einfache Art zu testen, ob der AP funktioniert.
	  Diese Konfiguration ist auch wichtig für die Fehlersuche
	  bei Client-Problemen.</p><p>Nachdem Sie den AP, wie oben beschrieben, konfiguriert
	  haben, ist es möglich von einem anderen drahtlosen
	  Computer eine Suche nach dem AP zu starten:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> create wlandev <em class="replaceable"><code>ath0</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> up scan</code></strong>
SSID/MESH ID    BSSID              CHAN RATE   S:N     INT CAPS
freebsdap       00:11:95:c3:0d:ac    1   54M -66:-96  100 ES   WME</pre><p>Der Client-Rechner fand den Access Point und kann mit ihm
	  verbunden werden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> inet <em class="replaceable"><code>192.168.0.2</code></em> netmask <em class="replaceable"><code>255.255.255.0</code></em> ssid <em class="replaceable"><code>freebsdap</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em></code></strong>
  wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
      ether 00:11:95:d5:43:62
      inet 192.168.0.2 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet OFDM/54Mbps mode 11g
      status: associated
      ssid freebsdap channel 1 (2412 Mhz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode OPEN privacy OFF txpower 21.5 bmiss 7
      scanvalid 60 bgscan bgscanintvl 300 bgscanidle 250 roam:rssi 7
      roam:rate 5 protmode CTS wme burst</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92627152"></a>33.3.5.3. WPA-basierender Host-Access Point</h4></div></div></div><p>Dieser Abschnitt beschäftigt sich mit dem Konfigurieren
	  eines FreeBSD-Access-Points mit dem WPA-Sicherheitsprotokoll.
	  Weitere Einzelheiten zu WPA und der Konfiguration von Clients mit
	  WPA finden Sie im
	  <a class="xref" href="network-wireless.html#network-wireless-wpa" title="33.3.3.1.3. WPA">Abschnitt 33.3.3.1.3, &#8222;WPA&#8220;</a>.</p><p>Der <span class="application">hostapd</span>-Dienst wird genutzt,
	  um die Client-Authentifizierung und das Schlüsselmanagement
	  auf dem Access Point mit aktiviertem WPA zu nutzen.</p><p>In den folgenden Abschnitten werden allen Konfigurationen
	  auf dem FreeBSD-Computer ausgeführt, der als AP agiert.
	  Nachdem der AP korrekt arbeitet, sollte
	  <span class="application">hostapd</span> automatisch beim Booten
	  durch folgende Zeile in der <code class="filename">/etc/rc.conf</code>
	  aktiviert werden:</p><pre class="programlisting">hostapd_enable="YES"</pre><p>Bevor Sie versuchen <span class="application">hostapd</span>
	  zu konfigurieren, stellen Sie sicher, dass die
	  Grundeinstellungen, wie in
	  <a class="xref" href="network-wireless.html#network-wireless-ap-basic" title="33.3.5.1. Grundeinstellungen">Abschnitt 33.3.5.1, &#8222;Grundeinstellungen&#8220;</a> beschrieben,
	  ausgeführt wurden.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92636240"></a>33.3.5.3.1. WPA-PSK</h5></div></div></div><p>WPA-PSK ist für kleine Netzwerke gedacht, in denen die
	    Verwendung eines Authentifizierungs-Backend-Server nicht
	    möglich oder erwünscht ist.</p><p>Die Konfiguration wird in
	    <code class="filename">/etc/hostapd.conf</code>
	    durchgeführt:</p><pre class="programlisting">interface=wlan0 <a id="co-ap-wpapsk-iface"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
debug=1 <a id="co-ap-wpapsk-dbug"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
ctrl_interface=/var/run/hostapd <a id="co-ap-wpapsk-ciface"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
ctrl_interface_group=wheel <a id="co-ap-wpapsk-cifacegrp"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
ssid=freebsdap <a id="co-ap-wpapsk-ssid"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span>
wpa=1 <a id="co-ap-wpapsk-wpa"></a><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span>
wpa_passphrase=freebsdmall <a id="co-ap-wpapsk-pass"></a><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span>
wpa_key_mgmt=WPA-PSK <a id="co-ap-wpapsk-kmgmt"></a><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span>
wpa_pairwise=CCMP TKIP <a id="co-ap-wpapsk-pwise"></a><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-ap-wpapsk-iface"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Dieses Feld zeigt die Wireless-Schnittstelle an, die
	        für den Access Point verwendet wird an.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ap-wpapsk-dbug"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Dieses Feld legt den debuglevel von
	        <span class="application">hostapd</span> während der
	        Ausführung fest.  Ein Wert von <code class="literal">1</code>
	        ist der kleinste zulässige Wert.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ap-wpapsk-ciface"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das <code class="literal">ctrl_interface</code>-Feld gibt
	        den Pfadnamen des Verzeichnisses an, der von
	        <span class="application">hostapd</span> dazu genutzt wird,
	        um die domain socket Dateien zu speichern, die für
	        die Kommunikation mit externen Programmen,
	        wie z.B. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hostapd_cli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">hostapd_cli</span>(8)</span></a>, benutzt werden.
	        Hier wurden die Standardwerte benutzt.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ap-wpapsk-cifacegrp"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Die Zeile <code class="literal">ctrl_interface_group</code>
	        legt fest, welche Gruppe (hier ist es die
	        <code class="systemitem">wheel</code>-Gruppe) die Erlaubnis hat,
	        die Schnittstellendateien zu kontrollieren.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ap-wpapsk-ssid"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Dieses Feld setzt den Netzwerknamen.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ap-wpapsk-wpa"><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das <code class="literal">wpa</code>-Feld aktiviert WPA und
	        gibt an welches WPA-Authentifizierungprotokoll
	        benötigt wird.  Ein Wert von <code class="literal">1</code>
	        konfiguriert den AP mit WPA-PSK.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ap-wpapsk-pass"><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das <code class="literal">wpa_passphrase</code>-Feld
	        beinhaltet das ASCII-Passwort für die
	        WPA-Authentifikation.</p><div xmlns="" class="warning"><h3 class="admontitle">Warnung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Verwenden Sie immer sichere Passwörter,
	          die ausreichend lang sind und aus vielen
	          unterschiedlichen Zeichen bestehen, damit sie nicht
	          erraten werden oder umgangen werden können.</p></div></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ap-wpapsk-kmgmt"><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Die <code class="literal">wpa_key_mgmt</code> Zeile bestimmt
	        das Schlüsselmanagement-Protokoll, das benutzt wird.
	        In unserem Fall ist es WPA-PSK.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ap-wpapsk-pwise"><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das <code class="literal">wpa_pairwise</code> Feld zeigt die
	        zulässigen Verschlüsselungs-Algorithmen
	        des Access Points.  Hier werden beide, TKIP (WPA) und
	        CCMP (WPA2), akzeptiert.  CCMP-Verschlüsselung ist
	        eine Alternative zu TKIP und sollte wenn möglich
	        eingesetzt werden.  TKIP sollte nur da eingesetzt werden,
	        wo kein CCMP möglich ist.</p></td></tr></table></div><p>Als nächstes wird der
	    <span class="application">hostapd</span> gestartet:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service hostapd forcestart</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em></code></strong>
  wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 2290
      inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
      inet6 fe80::211:95ff:fec3:dac%ath0 prefixlen 64 scopeid 0x4
      ether 00:11:95:c3:0d:ac
      media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;hostap&gt;
      status: associated
      ssid freebsdap channel 1 bssid 00:11:95:c3:0d:ac
      authmode WPA2/802.11i privacy MIXED deftxkey 2 TKIP 2:128-bit txpowmax 36 protmode CTS dtimperiod 1 bintval 100</pre><p>Der Access Point läuft nun, die Clients können mit ihm
	    verbunden werden.  Weitere Informationen finden Sie im
	    <a class="xref" href="network-wireless.html#network-wireless-wpa" title="33.3.3.1.3. WPA">Abschnitt 33.3.3.1.3, &#8222;WPA&#8220;</a>.  Es ist möglich zu
	    sehen, welche Stationen mit dem AP verbunden sind.  Dazu
	    geben Sie den Befehl <code class="command">ifconfig wlan0 list
	      sta</code> ein.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92673104"></a>33.3.5.4. WEP hostbasierender Access Point</h4></div></div></div><p>Es ist nicht empfehlenswert, einen Access Point mit
	    WEP zu konfigurieren, da es keine
	    Authentifikationsmechanismen gibt und WEP leicht zu
	    knacken ist.  Einige ältere WLAN-Karten unterstützen nur
	    WEP als Sicherheitsprotokoll.  Für solche Karten ist es
	    notwendig den AP ohne Authentifikation, Verschlüsselung
	    oder mit dem WEP-Protokoll zu konfigurieren.</p><p>Das Wireless-Gerät kann nun in den hostap-Modus
	    versetzt werden und mit der korrekten SSID und IP-Adresse
	    konfiguriert werden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> create wlandev <em class="replaceable"><code>ath0</code></em> wlanmode hostap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> inet <em class="replaceable"><code>192.168.0.1</code></em> netmask <em class="replaceable"><code>255.255.255.0</code></em> \
  ssid <em class="replaceable"><code>freebsdap</code></em> wepmode on weptxkey <em class="replaceable"><code>3</code></em> wepkey <em class="replaceable"><code>3:0x3456789012</code></em> mode 11g</code></strong></pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Der <code class="literal">weptxkey</code> gibt an,
	        welcher WEP-Schlüssel bei der Übertragung
	        benutzt wird.  Hier nutzen wir den 3. Schlüssel
	        (die Nummerierung der Schlüssel beginnt bei
	        <code class="literal">1</code>).  Dieses Parameter muss angegeben
	        sein, damit die Daten wirklich verschlüsselt
	        werden.</p></li><li class="listitem"><p>Der <code class="literal">wepkey</code> gibt den
	        gewählten WEP-Schlüssel an.  Er sollte im
	        folgenden Format <em class="replaceable"><code>index:key</code></em>
	        vorliegen.  Wenn kein Index vorhanden ist, wird der
	        Schlüssel <code class="literal">1</code> benutzt.  Das bedeutet
	        wir brauchen einen Index, falls wir einen anderen
	        Schlüssel als den ersten nutzen wollen.</p></li></ul></div><p>Benutzen Sie den Befehl <code class="command">ifconfig</code>
	    noch einmal um den Status der
	    <code class="filename">wlan0</code>-Schnittstelle zu sehen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em></code></strong>
  wlan0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
      ether 00:11:95:c3:0d:ac
      inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
      media: IEEE 802.11 Wireless Ethernet autoselect mode 11g &lt;hostap&gt;
      status: running
      ssid freebsdap channel 4 (2427 Mhz 11g) bssid 00:11:95:c3:0d:ac
      country US ecm authmode OPEN privacy ON deftxkey 3 wepkey 3:40-bit
      txpower 21.5 scanvalid 60 protmode CTS wme burst dtimperiod 1 -dfs</pre><p>Es ist möglich, von einem anderen drahtlosen
	    Computer eine Suche nach dem AP zu starten:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>wlan0</code></em> create wlandev <em class="replaceable"><code>ath0</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig wlan0 up scan</code></strong>
SSID            BSSID              CHAN RATE  S:N   INT CAPS
freebsdap       00:11:95:c3:0d:ac    1   54M 22:1   100 EPS</pre><p>Der Client-Rechner fand den Access Point und kann
	    mit den korrekten Parametern (Schlüssel usw.)
	    mit ihm verbunden werden.  Weitere Informationen gibt es in
	    folgendem <a class="xref" href="network-wireless.html#network-wireless-wep" title="33.3.3.1.4. WEP">Abschnitt 33.3.3.1.4, &#8222;WEP&#8220;</a></p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92697808"></a>33.3.6. Benutzung von drahtgebundenen und drahtlosen
	Verbindungen</h3></div></div></div><p>Eine Verbindung per Kabel bietet eine bessere Leistung
        und eine höhere Zuverlässigkeit, während die
        Wireless-Verbindung eine höhere Flexibilität
        und Mobilität bietet.  Benutzer von Laptops wollen
        normalerweise beides nutzen und zwischen beiden hin und her
        schalten.</p><p>Unter FreeBSD ist es möglich zwei oder mehr
        Netzwerkschnittstellen in einem <span class="quote">&#8222;<span class="quote">failover</span>&#8220;</span>-Mode zu
        kombinieren, so dass automatisch die beste verfügbare Verbindung
        aus der Gruppe ausgewählt wird, sobald der Linkstatus
        wechselt.</p><p>Wir behandeln Link-Aggregation und Failover in dem Kapitel
        <a class="xref" href="network-aggregation.html" title="33.7. Link-Aggregation und Failover">Abschnitt 33.7, &#8222;Link-Aggregation und Failover&#8220;</a>.  Dort gibt es auch ein
        Beispiel (<a class="xref" href="network-aggregation.html#networking-lagg-wired-and-wireless" title="Beispiel 33.3. Failover Modus zwischen Ethernet- und Wireless-Schnittstellen">Beispiel 33.3, &#8222;Failover Modus zwischen Ethernet- und
          Wireless-Schnittstellen&#8220;</a>)
        für die Verwendung von sowohl kabelgebundenen wie
        auch drahtlosen Verbindungen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92700880"></a>33.3.7. Problembehandlung</h3></div></div></div><p>Die folgenden Auflistung zeigt, wie Sie einige
	häufig auftretende Probleme bei der Einrichtung
	Ihres drahtlosen Netzwerks beheben können.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Wird Ihr Access Point bei der Suche nicht gefunden,
	    sollten Sie überprüfen, ob Sie bei Konfiguration
	    Ihres drahtlosen Geräts die Anzahl der Kanäle
	    beschränkt haben.</p></li><li class="listitem"><p>Wenn Sie sich nicht mit Ihrem Access Point verbinden
	    können, sollten Sie überprüfen, ob die
	    Konfiguration Ihrer Station auch der des Access Points
	    entspricht.  Achten Sie dabei speziell auf die
	    Authentifzierungsmethode und die Sicherheitsprotokolle.
	    Halten Sie Ihre Konfiguration so einfach wie möglich.
	    Verwenden Sie ein Sicherheitsprotokoll wie WPA oder WEP,
	    sollten Sie testweise Ihren Access Point auf
	    <span class="emphasis"><em>offene Authentifizierung</em></span> und
	    <span class="emphasis"><em>keine Sicherheit</em></span> einstellen.
	    Danach versuchen Sie sich erneut mit Ihren Access Point
	    zu verbinden.</p></li><li class="listitem"><p>Nachdem Sie sich mit dem Access Point verbinden
	    können, prüfen Sie die Sicherheitseinstellungen,
	    beginnend mit einfachen Werkzeugen wie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a>.</p><p>Das Programm <code class="command">wpa_supplicant</code>
	    kann Ihnen bei der Fehlersuche helfen.  Dazu starten
	    Sie es manuell mit der Option <code class="option">-dd</code> und
	    durchsuchen anschließend die Protokollinformationen
	    nach eventuellen Fehlermeldungen.</p></li><li class="listitem"><p>Zusätzlich gibt es auch zahlreiche
	    Low-Level-Debugging-Werkzeuge.  Die Ausgabe von
	    Debugging-Informationen des 802.11 Protocol Support Layers
	    lassen sich mit dem Programm <code class="command">wlandebug</code>
	    (das sich unter
	    <code class="filename">/usr/src/tools/tools/net80211</code>
	    befindet) aktivieren.  Um beispielsweise während
	    der Suche nach Access Points und des Aufbaus von
	    802.11-Verbindungen
	    (<span class="foreignphrase"><em class="foreignphrase">Handshake</em></span>) auftretende
	    Systemmeldungen auf die Konsole auszugeben, verwenden
	    Sie den folgenden Befehl:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>wlandebug -i <em class="replaceable"><code>ath0</code></em> +scan+auth+debug+assoc</code></strong>
  net.wlan.0.debug: 0 =&gt; 0xc80000&lt;assoc,auth,scan&gt;</pre><p>Der 802.11-Layer liefert umfangreiche Statistiken,
	    die Sie mit dem Werkzeug <code class="command">wlanstats</code>
	    abrufen können.  Diese Statistiken sollten alle
	    Fehler identifizieren, die im 802.11-Layer auftreten.
	    Beachten Sie aber, dass einige Fehler bereits im
	    darunterliegenden Gerätetreiber auftreten und
	    daher in diesen Statistiken nicht enthalten sind.  Wie
	    Sie Probleme des Gerätetreibers identifizieren,
	    entnehmen Sie bitte der Dokumentation Ihres
	    Gerätetreibers.</p></li></ul></div><p>Können Sie Ihr Problem durch diese
	Maßnahmen nicht lösen, sollten Sie einen
	Problembericht (PR) erstellen und die Ausgabe der weiter
	oben genannten Werkzeuge in den Bericht aufnehmen.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-routing.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="advanced-networking.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="network-usb-tethering.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">33.2. Gateways und Routen </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 33.4. USB Tethering</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>