<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>9.4. PREFIX und DESTDIR</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD Porter-Handbuch" /><link rel="up" href="testing.html" title="Kapitel 9. Ihren Port testen" /><link rel="prev" href="testing-porttools.html" title="9.3. Port Tools" /><link rel="next" href="testing-tinderbox.html" title="9.5. Die Tinderbox" /><link rel="copyright" href="trademarks.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">9.4. <code class="varname">PREFIX</code> und
	<code class="varname">DESTDIR</code></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="testing-porttools.html">Zurück</a> </td><th width="60%" align="center">Kapitel 9. Ihren Port testen</th><td width="20%" align="right"> <a accesskey="n" href="testing-tinderbox.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-prefix"></a>9.4. <code class="varname">PREFIX</code> und
	<code class="varname">DESTDIR</code></h2></div></div></div><p><code class="varname">PREFIX</code> bestimmt, an welche Stelle der
	Port installiert werden soll. In der Regel ist
	dies<code class="filename">/usr/local</code> oder
	<code class="filename">/opt</code>, was jedoch anpassbar ist. Ihr Port
	muss sich an diese Variable halten.</p><p><code class="varname">DESTDIR</code>, wenn es vom Benutzer gesetzt
	wird, bestimmt die alternative Umgebung (in der Regel eine
	Jail oder ein installiertes System, welches an anderer Stelle
	als <code class="filename">/</code> eingehängt ist).
	Ein Port wird unter
	<code class="varname">DESTDIR</code>/<code class="varname">PREFIX</code>
	installiert und registriert sich in der Paket-Datenbank unter
	<code class="varname">DESTDIR</code>/var/db/pkg.
	Da <code class="varname">DESTDIR</code> mittels eines
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chroot</span>(8)</span></a>-Aufrufs vom Ports-System automatisch gesetzt
	wird, brauchen Sie keine Änderungen oder besondere Pflege
	für <code class="varname">DESTDIR</code>-konforme Ports.</p><p>Der Wert von <code class="varname">PREFIX</code> wird auf
	<code class="varname">LOCALBASE</code> gesetzt (Standard ist
	<code class="filename">/usr/local</code>).
	Falls <code class="varname">USE_LINUX_PREFIX</code> gesetzt ist, wird
	<code class="varname">PREFIX</code> <code class="varname">LINUXBASE</code>
	annehmen (Standard ist
	<code class="filename">/compat/linux</code>).</p><p>Die Vermeidung der hart kodierten Angaben von
	<code class="filename">/usr/local</code> oder
	<code class="filename">/usr/X11R6</code> im Quelltext wird den Port
	viel flexibler machen und erleichtert es die Anforderungen
	anderer Einsatzorte zu erfüllen. Für X-Ports, die
	<code class="command">imake</code> benutzen, geschieht dies automatisch;
	andernfalls kann dies erreicht werden, indem alle Angaben von
	<code class="filename">/usr/local</code> (oder
	<code class="filename">/usr/X11R6</code> für X-Ports, die nicht
	imake benutzen) in den verschiedenen
	<code class="filename">Makefile</code>s im Port ersetzt werden, um
	<code class="varname">${PREFIX}</code> zu lesen, da diese Variable
	automatisch an jede Stufe des Build- und Install-Prozesses
	übergeben wird.</p><p>Vergewissern Sie sich bitte, dass Ihre Anwendung nichts
	unter <code class="filename">/usr/local</code> an Stelle von
	<code class="varname">PREFIX</code> installiert. Um dies festzustellen,
	können Sie folgendes machen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make clean; make package PREFIX=/var/tmp/`make -V PORTNAME`</code></strong></pre><p>Wenn etwas außerhalb von <code class="varname">PREFIX</code>
	installiert wird, so gibt der Prozess der Paketerstellung eine
	Meldung aus, dass es die Dateien nicht finden kann.</p><p>Dies prüft nicht das Vorhandensein eines internen
	Verweises oder die richtige Verwendung von
	<code class="varname">LOCALBASE</code> für Verweise auf Dateien
	anderer Ports. Das Testen der Installation in
	<code class="filename">/var/tmp/`make -V PORTNAME`</code> würde
	dies erledigen.</p><p>Die Variable <code class="varname">PREFIX</code> kann in Ihrem
	<code class="filename">Makefile</code> oder der Umgebung des Benutzers
	neu gesetzt werden. Allerdings wird für einzelne Ports
	dringend davon abgeraten diese Variable in den
	<code class="filename">Makefile</code>s direkt zu setzen.</p><p>Verweisen Sie bitte außerdem auf Programme/Dateien
	von anderen Ports durch die oben erwähnten Variablen und
	nicht mit den eindeutigen Pfadnamen. Wenn Ihr Port zum
	Beispiel vom Makro <code class="literal">PAGER</code> erwartet, dass es
	den vollständigen Pfadnamen von <code class="command">less</code>
	enthält, benutzen Sie folgendes Compiler-Flag:

	</p><pre class="programlisting">-DPAGER=\"${LOCALBASE}/bin/less\"</pre><p>

	anstatt <code class="literal">-DPAGER=\"/usr/local/bin/less\"</code>.
	Somit ist die Wahrscheinlichkeit höher, dass es auch
	funktioniert, wenn der Administrator den ganzen
	<code class="filename">/usr/local</code>-Baum an eine andere Stelle
	verschoben hat.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="testing-porttools.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="testing.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="testing-tinderbox.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">9.3. Port Tools </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 9.5. Die Tinderbox</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>