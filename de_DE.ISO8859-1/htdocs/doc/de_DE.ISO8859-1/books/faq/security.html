<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Kapitel 13. Sicherheit</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Häufig gestellte Fragen zu FreeBSD 7.X, 8.X und 9.X" /><link rel="up" href="index.html" title="Häufig gestellte Fragen zu FreeBSD 7.X, 8.X und 9.X" /><link rel="prev" href="networking.html" title="Kapitel 12. Netzwerke" /><link rel="next" href="ppp.html" title="Kapitel 14. PPP" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Kapitel 13. Sicherheit</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="networking.html">Zurück</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ppp.html">Weiter</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security"></a>Kapitel 13. Sicherheit</h1></div></div></div><div class="qandaset"><a id="idp69754448"></a><dl><dt>13.1. <a href="security.html#idp69754704">Was ist ein Sandkasten (sandbox)?</a></dt><dt>13.2. <a href="security.html#idp69778640">Was sind die Sicherheitsstufen?</a></dt><dt>13.3. <a href="security.html#idp69848144">Wieso wartet BIND (named) auf hohen Ports
            auf Anfragen?</a></dt><dt>13.4. <a href="security.html#idp69858896">Wieso wartet der sendmail-Dienst
            neuerdings sowohl auf Port 587 als auch auf dem
            Standard-Port 25 auf Anfragen?</a></dt><dt>13.5. <a href="security.html#idp69861712">Woher kommt dieser Benutzer toor
            mit UID 0? Ist mein System gehackt worden?</a></dt><dt>13.6. <a href="security.html#idp69909200">Warum funktioniert suidperl nicht
            richtig?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp69754704"></a><a id="sandbox"></a><p><strong>13.1.</strong></p></td><td align="left" valign="top"><p>Was ist ein Sandkasten (sandbox)?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><span class="quote">&#8222;<span class="quote">Sandkasten</span>&#8220;</span> (sandbox) ist ein Ausdruck
            aus dem Bereich Sicherheit.  Er hat zwei
            Bedeutungen:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Ein Programm, das innerhalb virtueller Wände
                ausgeführt wird.  Wenn ein Angreifer über
                eine Sicherheitslücke in diesen Programm
                einbricht, verhindern diese Wände ein tieferes
                Vordringen in das System.</p><p>Man sagt: Der Prozess kann innerhalb der
                Wände <span class="quote">&#8222;<span class="quote">spielen</span>&#8220;</span>, das heißt nichts,
                was der Prozess in Bezug auf die Ausführung von
                Code tut, kann die Wände durchbrechen.  Es ist
                also keine detaillierte Revision des Codes
                erforderlich, um gewisse Aussagen über seine
                Sicherheit machen zu können.</p><p>Die Wände könnten z.B. eine
                Benutzerkennung sein.  Dies ist die Definition, die in
                den Hilfeseiten <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=security&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">security</span>(7)</span></a> und <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> benutzt
                wird.</p><p>Nehmen Sie zum Beispiel den Dienst
                <code class="literal">ntalk</code> (siehe auch <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>).
                Dieser Dienst ist früher mit der Benutzerkennung
                <code class="systemitem">root</code> gelaufen; nun läuft er mit der
                Benutzerkennung <code class="systemitem">tty</code>.  Der Benutzer
                <code class="systemitem">tty</code> ist ein Sandkasten, der dazu gedacht
                ist, es jemandem, der über <code class="literal">ntalk</code>
                erfolgreich in das System eingebrochen ist, schwer zu machen,
                über diese Benutzerkennung hinaus vorzudringen.</p></li><li class="listitem"><p>Ein Prozess, der sich innerhalb einer
                simulierten Maschine befindet.  Dies ist etwas
                fortgeschrittener; grundsätzlich bedeutet es,
                dass jemand, der in der Lage ist, in einen
                Prozess einzudringen, annehmen könnte, er
                könnte weiter in die Maschine eindringen,
                tatsächlich aber nur in eine Simulation der
                Maschine einbricht und keine echten Daten
                verändert.</p><p>Der gängigste Weg, dies zu erreichen, ist, in
                einem Unterverzeichnis eine simulierte Umgebung zu
                erstellen und den Prozess in diesem Verzeichnis
                mit chroot auszuführen (für diesen
                Prozess ist <code class="filename">/</code> dieses Verzeichnis und nicht das
                echte <code class="filename">/</code> des Systems).</p><p>Eine weitere gebräuchliche Anwendung ist, ein
                untergeordnetes Dateisystem nur mit Leserechten zu
                mounten, und dann darüber eine Dateisystemebene
                zu erstellen, die einem Prozess einen scheinbar
                schreibberechtigten Blick in das Dateisystem gibt.
                Der Prozess mag glauben, dass er in der Lage
                ist, diese Dateien zu verändern, aber nur der
                Prozess sieht diesen Effekt - andere Prozess
                im System natürlich nicht.</p><p>Es wird versucht, diese Art von Sandkasten so
                transparent zu gestalten, dass der Benutzer (oder
                Hacker) nicht merkt, dass er sich in ihm
                befindet.</p></li></ul></div><p>Ein <span class="trademark">UNIX</span>® System implementiert zwei Arten von
            Sandkästen - eine auf Prozessebene und die andere auf
            der Ebene der Benutzerkennung.</p><p>Jeder Prozess auf einem <span class="trademark">UNIX</span>® System ist komplett von
            allen anderen Prozessen abgeschirmt.  Ein Prozess
            kann den Adressraum eines anderen Prozesses nicht
            modifizieren.  Das ist anders als bei <span class="trademark">Windows</span>®, wo ein
            Prozess leicht den Adressraum eines anderen
            überschreiben kann, was zu einem Absturz
            führt.</p><p>Ein Prozess gehört einer bestimmten
            Benutzerkennung.  Falls die Benutzerkennung nicht die von
            <code class="systemitem">root</code> ist, dient sie dazu, den
            Prozess von Prozessen anderer Benutzer abzuschirmen.
            Die Benutzerkennung wird außerdem dazu genutzt,
            Daten auf der Festplatte abzuschirmen.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp69778640"></a><a id="securelevel"></a><p><strong>13.2.</strong></p></td><td align="left" valign="top"><p>Was sind die Sicherheitsstufen?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Die Sicherheitsstufen sind ein Sicherheitsmechanismus,
            der im Kernel angesiedelt ist.  Wenn die Sicherheitsstufe
            einen positiven Wert hat, verhindert der Kernel die
            Ausführung bestimmter Tätigkeiten;  nicht einmal
            der Super-User (also <code class="systemitem">root</code>) darf sie
            durchführen.  Zurzeit können über die
            Sicherheitsstufen unter anderem die folgenden
            Tätigkeiten geblockt werden:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Zurücksetzen bestimmter Dateiattribute, wie zum
                Beispiel <code class="literal">schg</code> (das "system immutable"
                Attribut).</p></li><li class="listitem"><p>Schreibender Zugriff auf die Speicherbereiche des
                Kernels mittels <code class="filename">/dev/mem</code> und
                <code class="filename">/dev/kmem</code>.</p></li><li class="listitem"><p>Laden von Kernel-Modulen.</p></li><li class="listitem"><p>Änderungen an den Firewall-Regeln.</p></li></ul></div><p>Um die eingestellte Sicherheitsstufe eines aktiven
            Systems abzufragen, reicht das folgende einfache
            Kommando:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl kern.securelevel</code></strong></pre><p>Die Ausgaben wird den Namen der
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>-Variablen (in diesem Fall
            <code class="varname">kern.securelevel</code>) und eine Zahl
            enthalten.  Die Zahl ist der aktuelle Wert der
            Sicherheitsstufe.  Wenn die Zahl positiv
            (größer als Null) ist, sind zumindest einige
            der Schutzmaßnahmen aktiviert.</p><p>Sie können die Sicherheitsstufe eines laufenden
            Systems nicht verringern, da dies den Mechanismus wertlos
            machen würden.  Wenn Sie eine Tätigkeit
            ausführen müssen, bei der die Sicherheitsstufe
            nicht-positiv sein muss (z.B. ein
            <code class="buildtarget">installworld</code> oder eine
            Änderung der Systemzeit), dann müssen Sie die
            entsprechende Einstellung in
            <code class="filename">/etc/rc.conf</code> ändern (suchen Sie
            nach den Variablen <code class="varname">kern_securelevel</code> und
            <code class="varname">kern_securelevel_enable</code>) und das System
            rebooten.</p><p>Weitere Informationen über die Sicherheitsstufen
            und genaue Informationen, was die Einstellungen bewirken,
            können Sie der Online-Hilfe <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>
            entnehmen.</p><div xmlns="" class="warning"><h3 class="admontitle">Warnung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Die Sicherheitsstufen sind kein magischer
              Zauberstab, der alle Ihre Problem löst;  es gibt
              viele bekannte Probleme.  Und in der Mehrzahl der
              Fälle vermitteln sie ein falsches Gefühl der
              Sicherheit.</p><p xmlns="http://www.w3.org/1999/xhtml">Eines der größten Probleme ist, dass
              alle für den Start des Systems benötigten
              Dateien geschützt sein müssen, damit die
              Sicherheitsstufe effektiv sein können.  Wenn es ein
              Angreifer schafft, seine eigenen Programme
              ausführen zu lassen, bevor die Sicherheitsstufe
              gesetzt wird (was leider erst gegen Ende des
              Startvorgangs erfolgen kann, da viele der notwendigen
              Tätigkeiten für den Systemstart nicht mit
              einer gesetzten Sicherheitsstufe möglich
              wären), werden die Schutzmechanismen ausgehebelt.
              Es ist zwar nicht technisch unmöglich, alle beim
              Systemstart genutzten Dateien zu schützen;
              allerdings würde in einem so geschützten
              System die Administration zu einem Alptraum, da man das
              System neu starten oder in den Single-User-Modus bringen
              müsste, um eine Konfigurationsdatei
              ändern zu können.</p><p xmlns="http://www.w3.org/1999/xhtml">Dieses und andere Probleme werden häufig auf
              den Mailinglisten diskutiert, speziell auf auf der
              Mailingliste <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-security" target="_top">FreeBSD security</a>.  Das <a class="link" href="../../../../search/index.html" target="_top"> verfügbare Archiv</a>
              enthält ausgiebige Diskussionen.  Einige Benutzer
              sind guter Hoffnung, dass das System der Sicherheitsstufen
              bald durch ein besser konfigurierbares System ersetzt
              wird, aber es gibt noch keine definitiven Aussagen.</p><p xmlns="http://www.w3.org/1999/xhtml">Fühlen Sie sich gewarnt.</p></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp69848144"></a><a id="extra-named-port"></a><p><strong>13.3.</strong></p></td><td align="left" valign="top"><p>Wieso wartet BIND (<code class="command">named</code>) auf hohen Ports
            auf Anfragen?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>FreeBSD benutzt eine Version von BIND, die einen Port mit einer
            hohen, zufälligen Nummer für den Versand von Anfragen
            nutzt.  Aktuelle Versionen wählen einen neuen, zufälligen
            UDP-Port für jeden Query.  Das kann für manche
            Netzwerkkonfigurationen Probleme verursachen, besonders wenn eine
            Firewall eingehende UDP-Pakete auf bestimmten Ports blockiert.
            Wenn Sie durch eine solche Firewall wollen, können Sie die
            <code class="literal">avoid-v4-udp-ports</code> und
            <code class="literal">avoid-v6-udp-ports</code> Optionen ausprobieren, um
            ein zufälliges Auswählen von Portnummern innerhalb eines
            blockierten Bereiches zu verhindern.</p><div xmlns="" class="warning"><h3 class="admontitle">Warnung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Wenn eine Portnummer (wie 53) über die Optionen
            <code class="literal">query-source</code> oder
            <code class="literal">query-source-v6</code> in
            <code class="filename">/etc/namedb/named.conf</code> spezifiziert ist,
            wird zufällige Portauswahl nicht verwendet.  Es wird
            dringend empfohlen, dass diese Optionen nicht für die
            Spezifikation von festen Portnummern verwendet wird.</p></div><p>Ach übrigens, herzlichen Glückwunsch.  Es
            ist eine sehr gute Angewohnheit, die Ausgaben von
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sockstat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sockstat</span>(1)</span></a> durchzusehen und auf merkwürdige
            Dinge zu achten.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp69858896"></a><a id="sendmail-port-587"></a><p><strong>13.4.</strong></p></td><td align="left" valign="top"><p>Wieso wartet der <span class="application">sendmail</span>-Dienst
            neuerdings sowohl auf Port 587 als auch auf dem
            Standard-Port 25 auf Anfragen?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Aktuelle <span class="application">sendmail</span>-Versionen
            unterstützen eine neue Technik zur Einlieferung von
            Mails, die Port 587 nutzt.  Diese Technik wird zwar noch
            nicht oft angewendet, erfreut sich aber ständig steigender
            Popularität.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp69861712"></a><a id="toor-account"></a><p><strong>13.5.</strong></p></td><td align="left" valign="top"><p>Woher kommt dieser Benutzer <code class="systemitem">toor</code>
            mit UID 0? Ist mein System gehackt worden?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Keine Panik.  <code class="systemitem">toor</code> ist ein
            <span class="quote">&#8222;<span class="quote">alternativer</span>&#8220;</span> Account für den
            Super-User (wenn man root rückwärts schreibt,
            erhält man toor).  Früher wurde er nur erzeugt,
            wenn die Shell <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bash&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">bash</span>(1)</span></a> installiert wurde, heute wird
            er auf jeden Fall erzeugt.  Dieser Account ist für
            die Verwendung mit einer alternativen Shell vorgesehen;
            damit ist es nicht mehr erforderlich, die Shell von
            <code class="systemitem">root</code> zu ändern.  Dies ist
            wichtig, wenn eine Shell verwendet wird, die nicht zum
            Lieferumfang von FreeBSD gehört, zum Beispiel aus
            einem Port oder einem Package.  Diese Shells werden in der
            Regel in <code class="filename">/usr/local/bin</code>
            installiert und dieses Verzeichnis liegt standardmäßig
            auf einem anderem Filesystem.  Wenn die Shell von
            <code class="systemitem">root</code> in <code class="filename">/usr/local/bin</code> liegt und <code class="filename">/usr</code> (oder das Filesystem, auf dem
            <code class="filename">/usr/local/bin</code> liegt) nicht
            gemountet werden kann, kann sich <code class="systemitem">root</code> nicht
            mehr einloggen, um das Problem zu beheben.  Es ist
            allerdings möglich, das System zu rebooten und das
            Problem im Single-User-Modus zu lösen, da man hier
            gefragt wird, welche Shell benutzt werden soll.</p><p>Einige Anwender benutzen <code class="systemitem">toor</code> mit
            einer alternativen Shell für die tägliche Arbeit
            und benutzen <code class="systemitem">root</code> (mit der
            Standard-Shell) für den Single-User-Modus und
            für Notfälle.  Standardmäßig kann man
            sich nicht als <code class="systemitem">toor</code> anmelden, da der
            Account kein gültiges Passwort hat; Sie
            müssen sich also als <code class="systemitem">root</code>
            anmelden und ein Passwort für
            <code class="systemitem">toor</code> setzen, wenn Sie diesen Account
            benutzen wollen.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp69909200"></a><a id="suidperl"></a><p><strong>13.6.</strong></p></td><td align="left" valign="top"><p>Warum funktioniert <code class="command">suidperl</code> nicht
            richtig?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Aus Sicherheitsgründen wird <code class="command">suidperl</code>
	    standardmäßig nicht installiert.  Wenn Sie wollen, dass
	    <code class="command">suidperl</code> auch beim Update via Sourcecode das
	    SUID-Bit erhält, müssen Sie in
	    <code class="filename">/etc/make.conf</code> die
            Zeile <code class="literal">ENABLE_SUIDPERL=true</code>
            einfügen, bevor Sie <code class="command">perl</code> bauen.</p></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="networking.html">Zurück</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ppp.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">Kapitel 12. Netzwerke </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> Kapitel 14. PPP</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>