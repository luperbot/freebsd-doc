<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>12.4. Unterschiedliche Betriebssysteme und Betriebssystemversionen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD Porter-Handbuch" /><link rel="up" href="porting-dads.html" title="Kapitel 12. Was man machen respektive vermeiden sollte" /><link rel="prev" href="porting-wrkdirprefix.html" title="12.3. WRKDIRPREFIX" /><link rel="next" href="freebsd-versions.html" title="12.5. __FreeBSD_version Werte" /><link rel="copyright" href="trademarks.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.4. Unterschiedliche Betriebssysteme und
	Betriebssystemversionen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="porting-wrkdirprefix.html">Zurück</a> </td><th width="60%" align="center">Kapitel 12. Was man machen respektive vermeiden sollte</th><td width="20%" align="right"> <a accesskey="n" href="freebsd-versions.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-versions"></a>12.4. Unterschiedliche Betriebssysteme und
	Betriebssystemversionen</h2></div></div></div><p>Sie können auf Quelltext treffen, welcher
	Modifizierungen oder bedingtes Kompilieren, abhängig
	davon, unter welcher Unix-Version er läuft,
	benötigt.  Falls Sie Änderungen an solch einem
	Quelltext vornehmen müssen, stellen Sie bitte sicher,
	dass Sie Ihre Änderungen so allgemein wie möglich
	halten, damit wir den Quelltext auf ältere
	FreeBSD-Systeme portieren und zur Quer-Portierung auf andere
	BSD-Systeme, wie etwa 4.4BSD von CSRG, BSD/386, 386BSD, NetBSD
	und OpenBSD verwenden können.</p><p>Der bevorzugte Weg, um 4.3BSD/Reno (1990) und neuere
	Versionen des BSD-Quelltextes zu unterscheiden, ist das
	<code class="literal">BSD</code>-Makro zu nutzen, welches in <a class="link" href="http://cvsweb.freebsd.org/src/sys/sys/param.h" target="_top">sys/param.h</a>
	definiert ist. Hoffentlich ist diese Datei schon
	enthalten &#8211; falls nicht, so fügen Sie
	folgenden Quelltext:</p><pre class="programlisting">#if (defined(__unix__) || defined(unix)) &amp;&amp; !defined(USG)
#include &lt;sys/param.h&gt;
#endif</pre><p>an der richtigen Stelle in der <code class="filename">.c</code>
	Datei hinzu. Wir glauben, dass jedes System, welches diese
	beiden Symbole definiert, die Datei
	<code class="filename">sys/param.h</code> besitzt. Wenn Sie auf
	Systeme stoßen, wo dies nicht so ist, würden wir
	gerne davon erfahren. Bitte senden Sie eine E-Mail an
	<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">FreeBSD ports</a>.</p><p>Eine andere Möglichkeit zur Unterscheidung ist der
	GNU Autoconf-Stil:</p><pre class="programlisting">#ifdef HAVE_SYS_PARAM_H
#include &lt;sys/param.h&gt;
#endif</pre><p>Vergessen Sie nicht
	<code class="literal">-DHAVE_SYS_PARAM_H</code> zu den
	<code class="varname">CFLAGS</code> im <code class="filename">Makefile</code>
	hinzuzufügen, falls Sie diese Methode benutzen
	sollten.</p><p>Sobald Sie <code class="filename">sys/param.h</code>
	hinzugefügt haben, können Sie mit Hilfe von</p><pre class="programlisting">#if (defined(BSD) &amp;&amp; (BSD &gt;= 199103))</pre><p>unterscheiden, ob der Quelltext auf einer 4.3 Net2
	Code-Basis oder neuer (z.B. FreeBSD 1.x, 4.3/Reno, NetBSD 0.9,
	386BSD, BSD/386 1.1 und niedriger) kompiliert werden
	wird.</p><p>Benutzen Sie:</p><pre class="programlisting">#if (defined(BSD) &amp;&amp; (BSD &gt;= 199306))</pre><p>um zu differenzieren, ob der Quelltext auf der Basis von
	4.4 Code oder neuer (z.B. FreeBSD 2.x, 4.4, NetBSD 1.0,
	BSD/386 2.0 oder höher) kompiliert werden wird.</p><p>Der Wert des <code class="literal">BSD</code>-Makros ist
	<code class="literal">199506</code> für die 4.4BSD-Lite2 Codebasis.
	Beachten Sie bitte, dass dies hier nur der Information wegen
	angegeben ist. Das Makro sollte nicht dazu benutzt werden, um
	zwischen Versionen von FreeBSD, welche auf 4.4-Lite basieren,
	und Versionen, welche Änderungen von 4.4-Lite2
	übernommen haben, zu unterscheiden. Das
	<code class="literal">__FreeBSD__</code> Makro sollte stattdessen
	verwandt werden.</p><p>Sparsam sollte eingesetzt werden:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">__FreeBSD__</code> ist in allen Versionen
	    von FreeBSD definiert. Benutzen Sie dieses Makro, falls
	    die Änderung(en), die Sie machen,
	    <span class="emphasis"><em>nur</em></span> FreeBSD betrifft.
	    Portierungsfallen, wie der Gebrauch von
	    <code class="literal">sys_errlist[]</code> gegenüber
	    <code class="function">strerror()</code> sind Berkeley-Eigenheiten,
	    keine FreeBSD Änderungen.</p></li><li class="listitem"><p>In FreeBSD 2.x, ist <code class="literal">__FreeBSD__</code>
	    auf <code class="literal">2</code> definiert. In älteren
	    Versionen, ist es <code class="literal">1</code>. Alle späteren
	    Versionen erhöhen es, damit es mit der
	    Haupt-Versionsnummer übereinstimmt.</p></li><li class="listitem"><p>Falls Sie zwischen einem FreeBSD 1.x und einem
	    FreeBSD 2.x (oder höher) System unterscheiden
	    müssen, ist es normalerweise richtig, die
	    <code class="literal">BSD</code>-Makros (wie oben beschrieben) zu
	    benutzen. Gibt es tatsächlich eine
	    FreeBSD-spezifische Änderung (wie z.B. spezielle
	    Optionen von Shared-Libraries für
	    <code class="command">ld</code>), ist es nicht zu beanstanden
	    <code class="literal">__FreeBSD__</code> und <code class="literal">#if
	    __FreeBSD__ &gt; 1</code> zu nutzen, um FreeBSD 2.x und
	    spätere Systeme zu erkennen. Falls Sie eine
	    höhere Genauigkeit benötigen, um FreeBSD Systeme
	    seit 2.0-RELEASE zu erkennen, können Sie folgendes
	    nutzen:</p><pre class="programlisting">#if __FreeBSD__ &gt;= 2
#include &lt;osreldate.h&gt;
#    if __FreeBSD_version &gt;= 199504
	 /* 2.0.5+ release specific code here */
#    endif
#endif</pre></li></ul></div><p>In den Tausenden von Ports, die bis jetzt erstellt
	wurden, gab es nur ein oder zwei Fälle, in denen
	<code class="literal">__FreeBSD__</code> hätte benutzt werden
	sollen.  Nur weil ein früherer Port es an der falschen
	Stelle benutzt hatte, bedeutet das nicht, dass Sie dies auch
	machen sollten.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="porting-wrkdirprefix.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="porting-dads.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="freebsd-versions.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">12.3. <code class="varname">WRKDIRPREFIX</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 12.5. __FreeBSD_version Werte</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>