<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>17.10. Das MAC Modul portacl</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="mac.html" title="Kapitel 17. Verbindliche Zugriffskontrolle" /><link rel="prev" href="mac-ifoff.html" title="17.9. Das MAC Modul ifoff" /><link rel="next" href="mac-partition.html" title="17.11. Das MAC Modul partition" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">17.10. Das MAC Modul portacl</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mac-ifoff.html">Zurück</a> </td><th width="60%" align="center">Kapitel 17. Verbindliche Zugriffskontrolle</th><td width="20%" align="right"> <a accesskey="n" href="mac-partition.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-portacl"></a>17.10. Das MAC Modul portacl</h2></div></div></div><a id="idp80026064" class="indexterm"></a><p>Modulname: <code class="filename">mac_portacl.ko</code></p><p>Parameter für die Kernelkonfiguration:
      <code class="literal">options MAC_PORTACL</code></p><p>Bootparameter: <code class="literal">mac_portacl_load="YES"</code></p><p>Mit Hilfe des Moduls <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_portacl</span>(4)</span></a> können die Anbindungen
      an die lokalen <acronym class="acronym">TCP</acronym> und <acronym class="acronym">UDP</acronym> Ports
      durch eine Vielzahl von <code class="command">sysctl</code> Variablen
      beschränkt werden.  Genauer gesagt ermöglicht
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_portacl</span>(4)</span></a> Nutzern ohne <code class="systemitem">root</code>-Rechten den
      Zugriff auf zu bestimmende privilegierte Ports, also denen innerhalb der
      ersten 1024.</p><p>Sobald das Modul geladen wurde, ist die Richtlinie für alle
      Sockets verfügbar.  Die folgenden Variablen können für die
      Konfiguration verwendet werden:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">security.mac.portacl.enabled</code> schaltet die
          Anwendung der Richtlinie ein oder aus.</p></li><li class="listitem"><p><code class="literal">security.mac.portacl.port_high</code> gibt den
	  höchsten Port an, der von der Richtlinie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_portacl</span>(4)</span></a>
	  betroffen sein soll.</p></li><li class="listitem"><p><code class="literal">security.mac.portacl.suser_exempt</code> nimmt, wenn
	  es einen Wert ungleich Null zugewiesen bekommt,
	  <code class="systemitem">root</code> von der Richtlinie aus.</p></li><li class="listitem"><p><code class="literal">security.mac.portacl.rules</code> enthält als
	  Wert die eigentliche <code class="literal">mac_portacl</code>
	  Richtlinie.</p></li></ul></div><p>Die eigentliche Konfiguration der <code class="literal">mac_portacl</code>
      Richtlinie wird der <code class="command">sysctl</code>-Variablen
      <code class="literal">security.mac.portacl.rules</code> als Zeichenkette der Form
      <code class="literal">rule[,rule,...]</code> übergeben. Jede einzelne Regel
      hat die Form <code class="literal">idtype:id:protocol:port</code>.  Der Parameter
      <em class="parameter"><code>idtype</code></em> ist entweder <code class="literal">uid</code> oder
      <code class="literal">gid</code> und wird verwendet, um den Parameter
      <em class="parameter"><code>id</code></em> als Nutzer-ID oder Gruppen-ID zu kennzeichnen.
      Der Parameter <em class="parameter"><code>protocol</code></em> gibt an, ob die Regel
      ür <acronym class="acronym">TCP</acronym> oder <acronym class="acronym">UDP</acronym> gelten soll
      (indem man den Wert auf <code class="literal">tcp</code> oder
      <code class="literal">udp</code> setzt).  Und der letzte Parameter,
      <em class="parameter"><code>port</code></em>, enthält die Nummer des Ports, auf den
      der angegebene Nutzer bzw. die angegebene Gruppe Zugriff erhalten
      soll.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Da der Regelsatz direkt vom Kernel ausgewertet wird, können
        nur Zahlenwerte übergeben werden.  Das heißt, Namen von
        Nutzern, Gruppen oder Dienstnamen aus der Datei
        <code class="filename">/etc/services</code> funktionieren nicht.</p></div><p>Auf <span class="trademark">UNIX</span>®-artigen Betriebssystemen sind die Ports kleiner 1024
      privilegierten Prozessen vorbehalten, müssen also mit als/von
      <code class="systemitem">root</code> gestartet werden und weiterhin laufen.  Damit
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_portacl</span>(4)</span></a> die Vergabe von Ports kleiner als 1024 an nicht
      privilegierte Prozesse übernehmen kann, muß die <span class="trademark">UNIX</span>®
      Standardeinstellung deaktiviert werden.  Dazu ändert man die
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> Variablen
      <code class="literal">net.inet.ip.portrange.reservedlow</code> und
      <code class="literal">net.inet.ip.portrange.reservedhigh</code> auf den Wert
      <span class="quote">&#8222;<span class="quote">0</span>&#8220;</span>.</p><p>Weiterführende Informationen entnehmen Sie bitte den unten aufgeführten Beispielen oder der Man-Page <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_portacl</span>(4)</span></a>!</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80056400"></a>17.10.1. Beispiele</h3></div></div></div><p>Die folgenden Beispiele sollten ein wenig Licht in die obige
          Diskussion bringen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl security.mac.portacl.port_high=1023</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl net.inet.ip.portrange.reservedlow=0 net.inet.ip.portrange.reservedhigh=0</code></strong></pre><p>Zunächst bestimmen wir, dass <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_portacl</span>(4)</span></a> für alle
	privilegierten Ports gelten soll und deaktivieren die normale
	<span class="trademark">UNIX</span>®-Beschränkung.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl security.mac.portacl.suser_exempt=1</code></strong></pre><p> Da <code class="systemitem">root</code> von dieser Richtlinie nicht
        beeinträchtigt werden soll, setzen wir hier
        <code class="literal">security.mac.portacl.suser_exempt</code> auf einen Wert
        ungleich Null.  Das Modul <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_portacl</span>(4)</span></a> ist nun so eingerichtet,
	wie es <span class="trademark">UNIX</span>®-artige Betriebssysteme normal ebenfalls tun.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl security.mac.portacl.rules=uid:80:tcp:80</code></strong></pre><p>Nun erlauben wir dem Nutzer mit der <acronym class="acronym">UID</acronym> 80,
        normalerweise dem Nutzer <code class="systemitem">www</code>, den Port 80 zu verwenden.  Dadurch kann der Nutzer <code class="systemitem">www</code> einen Webserver
        betreiben, ohne dafür mit <code class="systemitem">root</code>-Privilegien
        ausgestattet zu sein.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl security.mac.portacl.rules=uid:1001:tcp:110,uid:1001:tcp:995</code></strong></pre><p>Hier wird dem Nutzer mit der <acronym class="acronym">UID</acronym> 1001 erlaubt,
        die <acronym class="acronym">TCP</acronym> Ports 110 (<span class="quote">&#8222;<span class="quote">pop3</span>&#8220;</span>) und 995
	(<span class="quote">&#8222;<span class="quote">pop3s</span>&#8220;</span>) zu verwenden.  Dadurch kann dieser Nutzer einen
	Server starten, der Verbindungen an diesen beiden Ports annehmen
	kann.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mac-ifoff.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="mac.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="mac-partition.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">17.9. Das MAC Modul ifoff </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 17.11. Das MAC Modul partition</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>