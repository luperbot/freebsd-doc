<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>31.9. Mit Samba einen Datei- und Druckserver für Microsoft® Windows®-Clients einrichten</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="network-servers.html" title="Kapitel 31. Netzwerkserver" /><link rel="prev" href="network-ftp.html" title="31.8. FTP &#8211; File Transfer Protocol" /><link rel="next" href="network-ntp.html" title="31.10. Die Uhrzeit mit NTP synchronisieren" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">31.9. Mit Samba einen Datei- und Druckserver für
      <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®-Clients einrichten</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-ftp.html">Zurück</a> </td><th width="60%" align="center">Kapitel 31. Netzwerkserver</th><td width="20%" align="right"> <a accesskey="n" href="network-ntp.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-samba"></a>31.9. Mit Samba einen Datei- und Druckserver für
      <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®-Clients einrichten</h2></div><div><span class="authorgroup">Beigetragen von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp90736592" class="indexterm"></a><a id="idp90737104" class="indexterm"></a><a id="idp90737616" class="indexterm"></a><a id="idp90738768" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90739920"></a>31.9.1. Überblick</h3></div></div></div><p><span class="application">Samba</span> ist ein beliebtes
	Open Source-Softwarepaket, das es Ihnen ermöglicht,
	einen Datei- und Druckserver für
	<span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®-Clients einzurichten.  Clients können
	sich dadurch mit einem FreeBSD-System verbinden und dessen
	Speicherplatz oder dessen Drucker verwenden.  Dies genauso, als
	wenn es sich um lokale Drucker oder Festplatten handeln
	würde.</p><p><span class="application">Samba</span> sollte als Softwarepaket
	auf Ihren Installationsmedien vorhanden sein.  Wenn Sie
	<span class="application">Samba</span> noch nicht installiert haben,
	können Sie dies jederzeit über den Port oder das
	Paket <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/samba34/pkg-descr">net/samba34</a>
	nachholen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90748240"></a>31.9.2. Konfiguration</h3></div></div></div><p>Die Standardkonfigurationsdatei von
	<span class="application">Samba</span> heißt
	<code class="filename">/usr/local/share/examples/samba34/smb.conf.default</code>.
	Diese Datei muss nach <code class="filename">/usr/local/etc/smb.conf</code>
	kopiert und angepasst werden, bevor
	<span class="application">Samba</span> verwendet werden kann.</p><p>Die Datei <code class="filename">smb.conf</code> enthält
	Laufzeitinformationen für
	<span class="application">Samba</span>, beispielsweise
	Druckerdefinitionen oder
	<span class="foreignphrase"><em class="foreignphrase">filesystem shares</em></span>, also Bereiche
	des Dateisystems, die Sie mit <span class="trademark">Windows</span>®-Clients teilen wollen.
	Die Konfiguration der Datei <code class="filename">smb.conf</code>
	erfolgt webbasiert über das im
	<span class="application">Samba</span>-Paket enthaltene Programm
	<span class="application">swat</span>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90754000"></a>31.9.2.1. Das Samba Web Administration Tool (SWAT) verwenden</h4></div></div></div><p>Das
	  <span class="foreignphrase"><em class="foreignphrase">Samba Web Administration Tool</em></span>
	  (SWAT) wird als Daemon von <span class="application">inetd</span>
	  aktiviert.  Daher müssen Sie
	  <span class="application">inetd</span>, wie in <a class="xref" href="network-inetd.html" title="31.2. Der inetd &#8222;Super-Server&#8220;">Abschnitt 31.2, &#8222;Der <span class="application">inetd</span>
      <span class="quote">&#8222;<span class="quote">Super-Server</span>&#8220;</span>&#8220;</a> beschrieben, aktivieren und die
	  folgende Zeile in <code class="filename">/etc/inetd.conf</code>
	  entfernen, bevor Sie <span class="application">swat</span> zur
	  Konfiguration von <span class="application">Samba</span> verwenden
	  können:</p><pre class="programlisting">swat   stream  tcp     nowait/400      root    /usr/local/sbin/swat    swat</pre><p>Wie bereits in <a class="xref" href="network-inetd.html#network-inetd-reread" title="Beispiel 31.1. Die inetd-Konfiguration neu einlesen">Beispiel 31.1, &#8222;Die <span class="application">inetd</span>-Konfiguration neu
          einlesen&#8220;</a>
	  beschrieben, müssen Sie die
	  <span class="application">inetd</span>-Konfiguration neu einlesen,
	  nachdem Sie diese Änderung durchgeführt haben.</p><p>Nachdem <span class="application">swat</span> in der Datei
	  <code class="filename">inetd.conf</code> aktiviert wurde, rufen Sie
	  in Ihrem Internetbrowser die Adresse
	  <code class="uri"><a class="uri" href="http://localhost:901" target="_top">http://localhost:901</a></code> auf und melden sich
	  mit dem <code class="systemitem">root</code>-Benutzerkonto an.</p><p>Nachdem Sie sich erfolgreich angemeldet haben, wird die
	  Hauptkonfigurationseite von <span class="application">Samba</span>
	  geladen.  Sie können nun die Dokumentation lesen, oder
	  durch einen Klick auf die
	  <span class="guimenu">Globals</span>-Karteikarte mit der Konfiguration
	  beginnen.  Die Einstellungen, die Sie hier vornehmen
	  können, entsprechen denen des Abschnitts
	  <code class="literal">[global]</code> von
	  <code class="filename">/usr/local/etc/smb.conf</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90772176"></a>31.9.2.2. Globale Einstellungen</h4></div></div></div><p>Unabhängig davon, ob Sie
	  <span class="application">swat</span> verwenden, oder
	  <code class="filename">/usr/local/etc/smb.conf</code> direkt
	  editieren, sollten Sie zuerst folgende Einstellungen
	  anpassen:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">workgroup</code></span></dt><dd><p>Der NT-Domänenname oder der Arbeitsgruppenname der
	        Rechner, die auf den Server Zugriff haben sollen.</p></dd><dt><span class="term"><code class="literal">netbios name</code></span></dt><dd><a id="idp90776912" class="indexterm"></a><p>Legt den NetBIOS-Namen fest, unter dem der
	        <span class="application">Samba</span>-Server bekannt ist.
	        In der Regel handelt es sich dabei um den ersten
	        Teil des DNS-Namens des Servers.</p></dd><dt><span class="term"><code class="literal">server string</code></span></dt><dd><p>Legt die Beschreibung fest, die angezeigt werden
	        soll, wenn mit <code class="command">net view</code> oder
	        über andere Netzwerkprogramme Informationen
	        über den Server angefordert werden.</p></dd></dl></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90785104"></a>31.9.2.3. Samba absichern</h4></div></div></div><p>Zwei der wichtigsten Einstellungen in
	  <code class="filename">/usr/local/etc/smb.conf</code> betreffen
	  das zu verwendende Sicherheitsmodell sowie das
	  Backend-Passwortformat für die Benutzer der
	  Samba-Clients.  Folgende Optionen sind dafür
	  verantwortlich:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">security</code></span></dt><dd><p>Die häufigsten Optionen sind
	        <code class="literal">security = share</code> und
	        <code class="literal">security = user</code>.  Wenn Ihre Clients
	        Benutzernamen verwenden, die den Benutzernamen auf Ihrem
	        FreeBSD-Rechner entsprechen, dann sollten Sie die
	        Einstellung <span class="foreignphrase"><em class="foreignphrase">user level</em></span>
	        verwenden.  Dies ist auch die Standardeinstellung.
	        Allerdings ist es dazu erforderlich, dass sich die
	        Clients auf Ihrem Rechner anmelden, bevor sie auf
	        gemeinsame Ressourcen zugreifen können.</p><p>In der Einstellung
	        <span class="foreignphrase"><em class="foreignphrase">share level</em></span> müssen
	        sich Clients nicht unter Verwendung eines gültigen
	        Logins auf Ihrem Rechner anmelden, bevor sie auf
	        gemeinsame Ressourcen zugreifen können.  In
	        früheren <span class="application">Samba</span>-Versionen
	        war dies die Standardeinstellung.</p></dd><dt><span class="term"><code class="literal">passdb backend</code></span></dt><dd><a id="idp90791760" class="indexterm"></a><a id="idp90792272" class="indexterm"></a><a id="idp90792912" class="indexterm"></a><p><span class="application">Samba</span> erlaubt
	        verschiedene Backend-Authentifizierungsmodelle.  Sie
	        können Clients durch LDAP, NIS+, eine SQL-Datenbank
	        oder eine Passwortdatei authentifizieren.  In der
	        Voreinstellung wird <code class="literal">smbpasswd</code>
	        verwendet.  Diese Methode wird im folgenden Abschnitt
	        näher beschrieben.</p></dd></dl></div><p>Wenn Sie <code class="literal">smbpasswd</code> verwenden, müssen
	  Sie die Datei <code class="filename">/usr/local/etc/samba/smbpasswd</code>
	  erzeugen, damit <span class="application">Samba</span> in der Lage
	  ist, Clients zu authentifizieren.  Wenn Sie auf Ihrem
	  <span class="trademark">UNIX</span>®-Rechner vorhandenen Benutzern den Zugriff von einem
	  <span class="trademark">Windows</span>®-Client aus ermöglichen wollen, verwenden Sie den
	  folgenden Befehl:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>smbpasswd -a username</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Als Backend wird inzwischen <code class="literal">tdbsam</code>
	    empfohlen.  Mit dem folgenden Befehl legen Sie neue
	    Benutzerkonten an:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pdbedit -a -u username</code></strong></pre></div><p>Ausführliche Informationen zur Konfiguration
	  von <span class="application">Samba</span> finden Sie im <a class="link" href="http://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/" target="_top">
	  Official Samba HOWTO</a>.  Sie sollten aber bereits
	  nach dem Lesen dieses Abschnitts in der Lage sein,
	  <span class="application">Samba</span> zu starten.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90806480"></a>31.9.3. <span class="application">Samba</span> starten</h3></div></div></div><p>Der Port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/samba34/pkg-descr">net/samba34</a>
	legt ein neues Startskript an, mit dem
	<span class="application">Samba</span> gesteuert (also etwa
	gestartet oder beendet) werden kann.  Um dieses Skript
	zu aktivieren, fügen Sie folgende Zeile in
	<code class="filename">/etc/rc.conf</code> ein:</p><pre class="programlisting">samba_enable="YES"</pre><p>Alternativ können Sie auch die folgenden
	beiden Einträge verwenden:</p><pre class="programlisting">nmbd_enable="YES"</pre><pre class="programlisting">smbd_enable="YES"</pre><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Durch diese Einträge wird
	  <span class="application">Samba</span> beim Systemstart
	  automatisch aktiviert.</p></div><p>Danach können Sie <span class="application">Samba</span>
	jederzeit durch folgenden Befehl starten:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service samba start</code></strong>
Starting SAMBA: removing stale tdbs :
Starting nmbd.
Starting smbd.</pre><p>Weitere Informationen zu den rc-Startskripten finden
	Sie im <a class="xref" href="configtuning-rcd.html" title="12.7. Das rc-System für Systemdienste">Abschnitt 12.7, &#8222;Das rc-System für Systemdienste&#8220;</a> des Handbuchs.</p><p><span class="application">Samba</span> verwendet drei Daemonen.
	Beachten Sie, dass sowohl <span class="application">nmbd</span> als
	auch <span class="application">smbd</span> durch das Skript
	<code class="filename">samba</code> gestartet werden.  Wenn Sie die
	<span class="foreignphrase"><em class="foreignphrase">winbind name resolution services</em></span>
	in <code class="filename">smb.conf</code> aktiviert haben, wird
	zusätzlich der <span class="application">winbindd</span>-Daemon
	gestartet.</p><p>Sie können <span class="application">Samba</span> jederzeit
	durch den folgenden Befehl beenden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service samba stop</code></strong></pre><p><span class="application">Samba</span> ist ein komplexes
	Softwarepaket mit umfassenden Funktionen, die eine weitreichende
	Integration von <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®-Netzwerken ermöglichen.
	Für eine Beschreibung dieser Zusatzfunktionen sollten Sie
	sich auf <code class="uri"><a class="uri" href="http://www.samba.org" target="_top">http://www.samba.org</a></code> umsehen.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-ftp.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="network-ntp.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">31.8. FTP &#8211; File Transfer Protocol </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 31.10. Die Uhrzeit mit NTP synchronisieren</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>