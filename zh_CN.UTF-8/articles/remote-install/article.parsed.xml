<?xml version="1.0" encoding="utf-8"?>
<!--
     The FreeBSD Documentation Project
     The FreeBSD Chinese (Simplified) Documentation Project

     Original Revision: 1.6
-->
<article xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:lang="zh_cn">
  <info><title xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD 操作系统在无远程控制台下的远程安装</title>
    

    <author xmlns:xlink="http://www.w3.org/1999/xlink"><personname xmlns:xlink="http://www.w3.org/1999/xlink"><firstname xmlns:xlink="http://www.w3.org/1999/xlink">Daniel</firstname><surname xmlns:xlink="http://www.w3.org/1999/xlink">Gerzo</surname></personname><affiliation xmlns:xlink="http://www.w3.org/1999/xlink">
	<address xmlns:xlink="http://www.w3.org/1999/xlink"><email xmlns:xlink="http://www.w3.org/1999/xlink">danger@FreeBSD.org</email></address>
      </affiliation></author>

    <legalnotice xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="trademarks" role="trademarks">
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD 是 FreeBSD 基金会的注册商标</para>
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">许多制造商和经销商使用一些称为商标的图案或文字设计来彰显自己的产品。
  本文档中出现的， 为 FreeBSD Project 所知晓的商标，后面将以 <quote xmlns:xlink="http://www.w3.org/1999/xlink">™</quote> 或
  <quote xmlns:xlink="http://www.w3.org/1999/xlink">®</quote> 符号来标注。</para>
    </legalnotice>

    <copyright xmlns:xlink="http://www.w3.org/1999/xlink">
      <year xmlns:xlink="http://www.w3.org/1999/xlink">2008</year>
      <holder xmlns:xlink="http://www.w3.org/1999/xlink">The FreeBSD Documentation Project</holder>
    </copyright>

    <pubdate xmlns:xlink="http://www.w3.org/1999/xlink">$FreeBSD$</pubdate>

    <releaseinfo xmlns:xlink="http://www.w3.org/1999/xlink">$FreeBSD$</releaseinfo>

    <abstract xmlns:xlink="http://www.w3.org/1999/xlink">
      <para xmlns:xlink="http://www.w3.org/1999/xlink">本文归档了当远程控制台不可用的情况下 FreeBSD 操作系统的远程安装。
        文章背后的主要灵感归功于和 Martin Matuska 还有由 Pawel Jakub Dawidek
        提供的宝贵输入合作的结果。</para>
    </abstract>
  </info>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="background">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">背景</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">世界上有很多的服务器主机供应商，
      但是他们中只有很少的一部分正式支持 FreeBSD，
      他们通常为他们提供的服务器上安装 <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Linux</trademark>
      发行版提供支持。</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">在某些情况下，如果你请求这些公司他们会安装一个你首选的 <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Linux</trademark>
      发行版。有了这个选择，我们将试图安装 FreeBSD。
      在其他情况下，他们可能提供一个急救系统用于紧急情况。
      使用这个可能将有利于我们的目的更好的实现。</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">本文涵盖了引导一个包含 RAID-1 及 <application xmlns:xlink="http://www.w3.org/1999/xlink">ZFS</application>
      性能的 FreeBSD 系统的远程安装的基本安装配置所必须的步骤。</para>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="intro">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">简介</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">这一节会摘要本文的目的以及更好阐述这里所概括的东西。
      本文中的这些指令将有益于那些使用不支持 FreeBSD
      的托管设施提供的服务的人。</para>

    <procedure xmlns:xlink="http://www.w3.org/1999/xlink">
      <step xmlns:xlink="http://www.w3.org/1999/xlink">
        <para xmlns:xlink="http://www.w3.org/1999/xlink">如我们提到过的 <link xmlns:xlink="http://www.w3.org/1999/xlink" linkend="background">背景</link>
          的那一节，许多的有声望的服务器主机托管公司提供了各种的急救系统。
          可以从他们自己的 <acronym xmlns:xlink="http://www.w3.org/1999/xlink">局域网</acronym> 启动并可以通过
          <application xmlns:xlink="http://www.w3.org/1999/xlink">SSH</application> 访问。
          他们通常提供这种支持目的用于帮助他们的顾客修正损坏的操作系统。
          如文章将说明的，我们将能够通过这些急救系统的帮助来安装 FreeBSD。</para>
	<!-- XXXTR: Solaris has a restore command, something like
	     sysrestore, FreeBSD Should have one too. -->
      </step>

      <step xmlns:xlink="http://www.w3.org/1999/xlink">
        <para xmlns:xlink="http://www.w3.org/1999/xlink">文章的下一小节会描述如何配置，并在本地机器上构建最小限度的
          FreeBSD。该版本最终会从随机存储盘运行到远程机器上面去。
          这将允许我们使用 <application xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</application>
          实用程序从一个 <acronym xmlns:xlink="http://www.w3.org/1999/xlink">FTP</acronym>
          镜像安装一套完整的 FreeBSD 操作系统。</para>
      </step>

      <step xmlns:xlink="http://www.w3.org/1999/xlink">
        <para xmlns:xlink="http://www.w3.org/1999/xlink">文章的剩余内容除了描述 <application xmlns:xlink="http://www.w3.org/1999/xlink">ZFS</application>
          文件系统的配置还将描述系统本身的安装步骤。</para>
      </step>
    </procedure>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="requirements">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">需求</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">想要成功地做下去，你必须：</para>

      <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">拥有一个可通过 <application xmlns:xlink="http://www.w3.org/1999/xlink">SSH</application>
            网络访问的操作系统。</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">理解 FreeBSD 的安装过程</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">熟悉 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> 实用程序</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">拥有 FreeBSD 安张的 <acronym xmlns:xlink="http://www.w3.org/1999/xlink">ISO</acronym>
            镜像文件或者易于使用的 <acronym xmlns:xlink="http://www.w3.org/1999/xlink">CD</acronym></para>
	</listitem>
      </itemizedlist>
    </sect2>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="preparation">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">准备工作 - <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application></title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">在 FreeBSD 可能安装到目标系统上之前，
      需要先构建一个最小化的从磁盘启动的 FreeBSD 操作系统映像文件。
      此方法中新系统必须能够从网络访问，
      并且安装的其他过程能够在没有远程访问到系统控制台的情况下完成。</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink"><application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application> 设置工具能够被用来构建一个微小的
      FreeBSD 映像。如 <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application> 名字的含义
      (<quote xmlns:xlink="http://www.w3.org/1999/xlink">mfs</quote> 的意思是 <quote xmlns:xlink="http://www.w3.org/1999/xlink">memory file system</quote> 内存文件系统)，
      最后的映像全部从随机存储器运行。多亏了这个特性，
      磁盘的操作将不会有任何限制，因此它能够被用来安装一个完整的 FreeBSD 操作系统。
      <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application> 的主页在
      <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://people.freebsd.org/~mm/mfsbsd/">http://people.freebsd.org/~mm/mfsbsd/</uri>，
      包含了指向最新释出的设置工具。</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">请注意关于 <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application>
      内幕以及它所有的适用都超出了本文的内容，
      感兴趣的读者应该去查阅 <application xmlns:xlink="http://www.w3.org/1999/xlink">mfs</application>
      的原始文档得到更多详细内容。</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">下载并解压出最新的 <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application>
      版本，并改变自己的当前工作目录到存在 <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application>
      脚本文件的目录：</para>

    <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">fetch http://people.freebsd.org/~mm/mfsbsd/mfsbsd-latest.tar.gz</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">tar xvzf mfsbsd-1.0-beta1.tar.gz</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cd mfsbsd-1.0-beta1/</userinput></screen>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mfsbsd-config">
      <title xmlns:xlink="http://www.w3.org/1999/xlink"><application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application> 的配置</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">引导 <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application> 之前，
        必须设置一些重要的配置选项。
        最重要的是我们必须有正确地，自然地，网络配置。
        最适合的方法配置网络选项取决于我们是否事先知道我们会用到的网络接口，
        而且网络接口驱动程序应被系统为我们的硬件载入。
        我们将看到 <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application>
        如何能够在任一种情况下被配置。</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">另外一件重要的事情是设置 <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="username">root</systemitem> 的密码。
        这将通过编辑 <filename xmlns:xlink="http://www.w3.org/1999/xlink">conf/rootpw.conf</filename> 文件来完成。
        请记住该文件将把你的密码保存在简单的文本中，
        所以在此我们不推荐你使用真实的密码。然而，
        这只是一个临时使用一次的密码，你可以在随后安装好的系统中更改它。</para>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">编辑 <filename xmlns:xlink="http://www.w3.org/1999/xlink">conf/interfaces.conf</filename> 的方法</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">如果我们安装好的网卡是未知类型的，
          我们可以使用 <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application> 的自动探测功能。
          <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application> 启动脚本能够探测到正确的驱动来使用，
          基于网络接口的 MAC 地址，我们假设在
          <filename xmlns:xlink="http://www.w3.org/1999/xlink">conf/interfaces.conf</filename> 文件中设置如下选项：</para>

	<programlisting xmlns:xlink="http://www.w3.org/1999/xlink">initconf_interfaces="ext1"
initconf_mac_ext1="00:00:00:00:00:00"
initconf_ip_ext1="192.168.0.2"
initconf_netmask_ext1="255.255.255.0"</programlisting>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">别忘了添加 <literal xmlns:xlink="http://www.w3.org/1999/xlink">defaultrouter</literal>
          信息到 <filename xmlns:xlink="http://www.w3.org/1999/xlink">conf/rc.conf</filename> 文件中：</para>

	<programlisting xmlns:xlink="http://www.w3.org/1999/xlink">defaultrouter="192.168.0.1"</programlisting>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">编辑 <filename xmlns:xlink="http://www.w3.org/1999/xlink">conf/rc.conf</filename> 的方法</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">当网络接口的驱动是已知类型的，使用
          <filename xmlns:xlink="http://www.w3.org/1999/xlink">conf/rc.conf</filename> 文件添加联网选项会更加方便。
          该文件的语法跟 FreeBSD 中标准的 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">rc.conf</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">5</manvolnum></citerefentry> 文件的语法相同。</para>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">例如，当你知道被使用的将是一个 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">re</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">4</manvolnum></citerefentry> 网络接口设备，
          你可以在 <filename xmlns:xlink="http://www.w3.org/1999/xlink">conf/rc.conf</filename> 文件中设置如下选项：</para>

	<programlisting xmlns:xlink="http://www.w3.org/1999/xlink">defaultrouter="192.168.0.1"
ifconfig_re0="inet 192.168.0.2 netmask 255.255.255.0"</programlisting>
      </sect3>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mfsbsd-build">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">构建一个 <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application> 映像</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">构建一个 <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application>
        映像文件的过程是非常简单明了的。</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">第一步是挂载 FreeBSD 的安装 <acronym xmlns:xlink="http://www.w3.org/1999/xlink">CD</acronym>，
        或者挂载安装 <acronym xmlns:xlink="http://www.w3.org/1999/xlink">ISO</acronym> 文件到
        <filename xmlns:xlink="http://www.w3.org/1999/xlink">/cdrom</filename>。
        因为例子的缘故，在文章中我们将假定你下载的是 FreeBSD 7.0-RELEASE
        <acronym xmlns:xlink="http://www.w3.org/1999/xlink">ISO</acronym> 文件。使用 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">mdconfig</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>
        实用程序挂载 <acronym xmlns:xlink="http://www.w3.org/1999/xlink">ISO</acronym> 映像文件到
        <filename xmlns:xlink="http://www.w3.org/1999/xlink">/cdrom</filename> 目录非常简单：</para>

      <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">mdconfig -a -t vnode -u 10 -f 7.0-RELEASE-amd64-disc1.iso</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">mount_cd9660 /dev/md10 /cdrom</userinput></screen>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">紧接着，构建可启动的 <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application>
        映像：</para>

      <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">make BASE=/cdrom/7.0-RELEASE</userinput></screen>

      <note xmlns:xlink="http://www.w3.org/1999/xlink">
        <para xmlns:xlink="http://www.w3.org/1999/xlink">上面的 <command xmlns:xlink="http://www.w3.org/1999/xlink">make</command> 命令必须在
          <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application> 目录树的最高一层运行，也就是：
          <filename xmlns:xlink="http://www.w3.org/1999/xlink">~/mfsbsd-1.0-beta1/</filename>。</para>
      </note>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">启动 <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD </application></title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">现在 <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application> 映像已经准备好了，
        必须把它上传到远程的一个正在运行的急救系统上或者一个预安装了
        <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Linux</trademark> 发行版的系统上。最适合做这个工作的工具是
        <application xmlns:xlink="http://www.w3.org/1999/xlink">scp</application>：</para>

      <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">scp disk.img root@192.168.0.2:.</userinput></screen>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">想要正确的引导 <application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application> 映像，
        必须把它安放在机器的第一块（可启动）设备上。
        这可能会和使用的例子我们假定的一样，第一块可启动磁盘设备是
        <filename xmlns:xlink="http://www.w3.org/1999/xlink">sda</filename>：</para>

      <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">dd if=/root/disk.img of=/dev/sda bs=1m</userinput></screen>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">如果一切正常，该映像现在应该存在于第一块设备的
        <acronym xmlns:xlink="http://www.w3.org/1999/xlink">MBR</acronym>（主引导区）而机器也应该能够被启动了。
        使用工具 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">ping</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> 来查看机器是否被正确启动。
        一旦它回复在线状态，就应该能够使用 <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="username">root</systemitem>
        用户和配置好的密码通过 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">ssh</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">1</manvolnum></citerefentry> 来访问它了。</para>
    </sect2>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="installation">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD 操作系统的安装</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink"><application xmlns:xlink="http://www.w3.org/1999/xlink">mfsBSD</application> 成功被引导后它就应该能够通过
      <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">ssh</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">1</manvolnum></citerefentry> 登入了。这一节会描述如何创建 slices 并标记 slices 的 label，
      为 RAID-1 配置 <application xmlns:xlink="http://www.w3.org/1999/xlink">gmirror</application>，
      还有如何使用 <application xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</application>
      来安装一个最小的FreeBSD操作系统版本。</para>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">准备磁盘</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">首要的任务是为 FreeBSD 分配磁盘空间，也就是，
        创建 slices 和 partitions。很显然，
        当前运行的系统是全部被载入到系统内存中的因此操作磁盘将没有任何问题。
        要完成这个任务，可以是使用 <application xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</application>
        或者 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">fdisk</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> 中的二者任一并结合工具 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">bsdlabel</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>。</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">在开始时，将所有磁盘都标记成空的，
        在每个磁盘上重复如下命令：</para>

      <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">dd if=/dev/zero of=/dev/ad0 count=2</userinput></screen>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">下面，使用你喜欢的工具创建 slices 并标记磁盘 label。
        比较简单的方法是使用 <application xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</application>，
        强大也可能几乎没有漏洞方法是使用标准的基于文本的 <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">UNIX</trademark> 工具，
        类似于 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">fdisk</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> 和 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">bsdlabel</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>
        这些工具的使用也会在这一节中包括。前者已经被包括在 FreeBSD 手册的
        <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="../../../../doc/en_US.ISO8859-1/books/handbook/install-steps.html">安装FreeBSD</link>
        一章中了。如本节中刚提到的，这篇文章会展示如何设置一个带有 RAID-1
        和 <application xmlns:xlink="http://www.w3.org/1999/xlink">ZFS</application> 性能的系统。我们的设置由一个小工具
        <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">gmirror</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> 镜像为 <filename xmlns:xlink="http://www.w3.org/1999/xlink">/</filename> (root)，
        <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr</filename> 和
        <filename xmlns:xlink="http://www.w3.org/1999/xlink">/var</filename> 文件系统，
        并把剩余的磁盘空间被分配为 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">zpool</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> 镜像出的
        <application xmlns:xlink="http://www.w3.org/1999/xlink">ZFS</application> 文件系统。请注意，
        <application xmlns:xlink="http://www.w3.org/1999/xlink">ZFS</application> 文件系统将在 FreeBSD
        操作系统成功安装并启动后才会被配置。</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">下面的例子会描述如何去创建 slices 和 labels，
        在每个 partition 上初始化 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">gmirror</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>
        并如何在每个被镜像过的 partition 上创建
        <application xmlns:xlink="http://www.w3.org/1999/xlink">UFS2</application> 文件系统：</para>

      <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">fdisk -BI /dev/ad0</userinput> <co xml:id="fdisk"/>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">fdisk -BI /dev/ad1</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">bsdlabel -wB /dev/ad0s1</userinput> <co xml:id="bsdlabel-writing"/>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">bsdlabel -wB /dev/ad1s1</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">bsdlabel -e /dev/ad0s1</userinput> <co xml:id="bsdlabel-editing"/>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">bsdlabel /dev/ad0s1 &gt; /tmp/bsdlabel.txt &amp;&amp; bsdlabel -R /dev/ad1s1 /tmp/bsdlabel.txt</userinput> <co xml:id="bsdlabel-restore"/>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">gmirror label root /dev/ad[01]s1a</userinput> <co xml:id="gmirror1"/>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">gmirror label var /dev/ad[01]s1d</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">gmirror label usr /dev/ad[01]s1e</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">gmirror label -F swap /dev/ad[01]s1b</userinput> <co xml:id="gmirror2"/>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">newfs /dev/mirror/root</userinput> <co xml:id="newfs"/>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">newfs /dev/mirror/var</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">newfs /dev/mirror/usr</userinput></screen>

      <calloutlist xmlns:xlink="http://www.w3.org/1999/xlink">
	<callout arearefs="fdisk">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">在整个磁盘上创建一个 slice
            并初始化包含在磁盘第一个扇区启动代码。
            重复在系统上全部的磁盘上执行此命令。</para>
	</callout>

	<callout arearefs="bsdlabel-writing">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">为每块磁盘写入一个包括启动代码的内容的标准
            label。</para>
	</callout>

	<callout arearefs="bsdlabel-editing">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">现在，手动去编辑磁盘的 label。可以查阅 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">bsdlabel</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>
            的联机手册来找到如何建立 partitions 的方法。创建如下
            partions，<literal xmlns:xlink="http://www.w3.org/1999/xlink">a</literal> 为
            <filename xmlns:xlink="http://www.w3.org/1999/xlink">/</filename> (root) 文件系统，
            <literal xmlns:xlink="http://www.w3.org/1999/xlink">b</literal> 为 swap 交换空间，
            <literal xmlns:xlink="http://www.w3.org/1999/xlink">d</literal> 为
            <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr</filename>
            还有最后 <literal xmlns:xlink="http://www.w3.org/1999/xlink">f</literal> 被用于
            <application xmlns:xlink="http://www.w3.org/1999/xlink">ZFS</application>。</para>
	</callout>

	<callout arearefs="bsdlabel-restore">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">引入你刚才创建的 label 到第二块磁盘，
            所以两块磁盘会使用同样的 label。</para>
	</callout>

	<callout arearefs="gmirror1">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">在每个 partition 上初始化 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">gmirror</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>。</para>
	</callout>

	<callout arearefs="gmirror2">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">注意 <option xmlns:xlink="http://www.w3.org/1999/xlink">-F</option> 选项被用在 swap
            交换分区的 partition。 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">gmirror</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>
            这个指令认为设备处于可靠的状态除非电源系统故障。</para>
	</callout>

	<callout arearefs="newfs">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">在每个被镜像的分区上创建一个
            <application xmlns:xlink="http://www.w3.org/1999/xlink">UFS2</application> 的文件系统。</para>
        </callout>
      </calloutlist>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">系统安装</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">这是最重要的一部分。
        此节将描述如何在我们上一小节已经准备好的磁盘上安装一个最小的
        FreeBSD 版本。要达成这个目的，所有的文件安系统需要被挂载乃至于
        <application xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</application> 可以把 FreeBSD
        系统的内容写到磁盘上：</para>

      <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">mount /dev/mirror/root /mnt</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">mkdir /mnt/var /mnt/usr</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">mount /dev/mirror/var /mnt/var</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">mount /dev/mirror/usr /mnt/usr</userinput></screen>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">当你做完这些时，打开 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>。
        从主菜单选择自定义 <guimenuitem xmlns:xlink="http://www.w3.org/1999/xlink">Custom</guimenuitem> 安装。
        选中 <guimenuitem xmlns:xlink="http://www.w3.org/1999/xlink">Options</guimenuitem> 选项然后按回车确认。
        使用方向键获取帮助，移动鼠标指针到 <literal xmlns:xlink="http://www.w3.org/1999/xlink">Install Root</literal>
        选项，按 <keycap xmlns:xlink="http://www.w3.org/1999/xlink">空格</keycap> 更改为
        <filename xmlns:xlink="http://www.w3.org/1999/xlink">/mnt</filename>。
        按 <keycap xmlns:xlink="http://www.w3.org/1999/xlink">回车</keycap> 提交你的更改并使用
        <keycap xmlns:xlink="http://www.w3.org/1999/xlink">q</keycap> 退出 <guimenuitem xmlns:xlink="http://www.w3.org/1999/xlink">Options</guimenuitem>
        （选项）菜单。</para>

      <warning xmlns:xlink="http://www.w3.org/1999/xlink">
        <para xmlns:xlink="http://www.w3.org/1999/xlink">注意这一步骤非常重要，如果被跳过了，
          <application xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</application>
          将不能安装 FreeBSD。</para>
      </warning>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">到 <guimenuitem xmlns:xlink="http://www.w3.org/1999/xlink">Distributions</guimenuitem>（发行版）菜单选项，
            使用方向键移动鼠标指针到 <option xmlns:xlink="http://www.w3.org/1999/xlink">Minimal</option>（最小化）选项，
            并使用 <keycap xmlns:xlink="http://www.w3.org/1999/xlink">空格键</keycap> 选中该选项。
            本文使用了最小版本来保存网络联通信息，因为系统本身会通过
            <application xmlns:xlink="http://www.w3.org/1999/xlink">ftp</application> 来安装。使用
            <option xmlns:xlink="http://www.w3.org/1999/xlink">Exit</option>（退出）选项退出这个菜单。</para>

      <note xmlns:xlink="http://www.w3.org/1999/xlink">
        <para xmlns:xlink="http://www.w3.org/1999/xlink"><guimenuitem xmlns:xlink="http://www.w3.org/1999/xlink">Partition</guimenuitem> 和
          <guimenuitem xmlns:xlink="http://www.w3.org/1999/xlink">Label</guimenuitem> 菜单将被跳过，
          这些没有多少价值了。</para>
      </note>

      <para xmlns:xlink="http://www.w3.org/1999/xlink"><guimenuitem xmlns:xlink="http://www.w3.org/1999/xlink">Media</guimenuitem>（媒介）菜单，
        选择 <option xmlns:xlink="http://www.w3.org/1999/xlink">FTP</option> 选项。
        选择一个距离你最近的镜像站点并交给
        <application xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</application>
        假定网络已经配置完好。你将再回到
        <guimenuitem xmlns:xlink="http://www.w3.org/1999/xlink">Custom</guimenuitem>
        （自定义）菜单。</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">最后，选择最后的选项来执行系统的安装过程，
        <guimenuitem xmlns:xlink="http://www.w3.org/1999/xlink">Commit</guimenuitem>，
        当安装完成后退出 <application xmlns:xlink="http://www.w3.org/1999/xlink">sysinstall</application>
        即可。</para>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">后期安装步骤</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD 操作系统现在应该安装完毕了；通常情况下，
        安装过程还没有结束。还需要进行一些安装后期的步骤使得容许
        FreeBSD 在将来启动并能够登入系统。</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">你现在必须 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">chroot</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>
        到刚安装的全新的系统中来完成安装。
        使用如下命令： </para>

      <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">chroot /mnt</userinput></screen>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">要达到我们的目的，进行如下步骤：</para>

      <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">拷贝 <literal xmlns:xlink="http://www.w3.org/1999/xlink">GENERIC</literal>（通用）内核到
            <filename xmlns:xlink="http://www.w3.org/1999/xlink">/boot/kernel</filename>
            目录：</para>

	  <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cp -Rp /boot/GENERIC/* /boot/kernel</userinput></screen>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">创建 <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/rc.conf</filename>，
            <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/resolv.conf</filename> 还有
            <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/fstab</filename> 文件。
            不要忘记正确地设置网络信息并在
            <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/rc.conf</filename>
            文件中启用 <application xmlns:xlink="http://www.w3.org/1999/xlink">sshd</application>。
            <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/fstab</filename>
            文件内容类似于下面的内容：</para>

	  <programlisting xmlns:xlink="http://www.w3.org/1999/xlink"># Device                Mountpoint      FStype  Options         Dump    Pass#
/dev/mirror/swap        none            swap    sw              0       0
/dev/mirror/root        /               ufs     rw              1       1
/dev/mirror/usr         /usr            ufs     rw              2       2
/dev/mirror/var         /var            ufs     rw              2       2
/dev/cd0                /cdrom          cd9660  ro,noauto       0       0</programlisting>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">创建 <filename xmlns:xlink="http://www.w3.org/1999/xlink">/boot/loader.conf</filename>
            文件，并写入如下内容：</para>

	  <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">geom_mirror_load="YES"
zfs_load="YES"</programlisting>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">执行下面的命令，使得
            <application xmlns:xlink="http://www.w3.org/1999/xlink">ZFS</application> 在下次启动后可用：</para>

	  <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">echo 'zfs_enable="YES"' &gt;&gt; /etc/rc.conf </userinput></screen>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">可以用 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">adduser</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> 工具来添加额外的用户。
            不要忘记添加一个用户到 <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="groupname">wheel</systemitem>
            组，这样你可以在重新启动后获得 root 权限。</para>
	</listitem>

	<listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">反复检验你的设置是否正确。</para>
	</listitem>
      </itemizedlist>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">现在你的系统在下次启动后应该可用了。使用
        <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">reboot</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> 命令重新启动你的系统。</para>
    </sect2>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="zfs">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">ZFS</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">如果你的系统重新启动后还完好，现在应该能够登入了。
      欢迎来到崭新的 FreeBSD 安装，进行远程的不使用远程控制台的安装。</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">最后还剩下的步骤是配置 <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">zpool</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> 并创建一些
      <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">zfs</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> 文件系统。建立并管理
      <application xmlns:xlink="http://www.w3.org/1999/xlink">ZFS</application> 非常简单。
      首先，创建一个镜像的pool：</para>

    <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">zpool create tank mirror /dev/ad[01]s1f</userinput></screen>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">再接着,创建一些文件系统：</para>

    <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">zfs create tank/ports</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">zfs create tank/src</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">zfs set compression=gzip tank/ports</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">zfs set compression=on tank/src</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">zfs set mountpoint=/usr/ports tank/ports</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">zfs set mountpoint=/usr/src tank/src</userinput></screen>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">这就是全部步骤了。如果你对 FreeBSD 上的
      <application xmlns:xlink="http://www.w3.org/1999/xlink">ZFS</application> 感兴趣，请查阅 FreeBSD  WIKI 中的
      <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://wiki.freebsd.org/ZFS">ZFS</link> 一节。</para>
  </sect1>
</article>
