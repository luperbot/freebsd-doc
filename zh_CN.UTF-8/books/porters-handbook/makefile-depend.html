<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>5.7. 依赖关系</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter 手册" /><link rel="up" href="makefile.html" title="第 5 章 配置 Makefile" /><link rel="prev" href="makefile-comment.html" title="5.6. COMMENT (一句话说明)" /><link rel="next" href="makefile-masterdir.html" title="5.8. MASTERDIR (主 port 所在的目录)" /><link rel="copyright" href="trademarks.html" title="法律声明" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5.7. 依赖关系</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="makefile-comment.html">上一页</a> </td><th width="60%" align="center">第 5 章 配置 Makefile</th><td width="20%" align="right"> <a accesskey="n" href="makefile-masterdir.html">下一页</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-depend"></a>5.7. 依赖关系</h2></div></div></div><p>许多 ports 会依赖其它 port。 这是包括 FreeBSD
	  在内的多数 类-Unix 系统的很方便的功能。
	  这项功能， 可以避免在每个 port 或预编译包中都带上重复的依赖的代码，
	  而可以以依赖关系的方式去共享它们。
	  有七个变量用于帮助您确保所需的文件都存在于用户的机器上。
	  此外， 也提供了用于支持常见情形的依赖关系变量，
	  以及对依赖关系行为的更多控制。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67807824"></a>5.7.1. <code class="varname">LIB_DEPENDS</code> (依赖的函数库/共享库)</h3></div></div></div><p>这个变量用于指定 port 所依赖的共享库。 其内容是由一系列
	    <em class="replaceable"><code>lib</code></em>:<em class="replaceable"><code>dir</code></em>[<span class="optional">:target</span>]
	    元组构成的表， 其中 <em class="replaceable"><code>lib</code></em> 是共享库的名字，
	    而 <em class="replaceable"><code>dir</code></em> 则是在找不到时应该从哪里联编和安装，
	    最后， <em class="replaceable"><code>target</code></em> 用于指定在那个目录中调用的
	    target。 例如，
	    </p><pre class="programlisting">LIB_DEPENDS=   jpeg.9:${PORTSDIR}/graphics/jpeg</pre><p>
	    会检测主版本号为 9 的 jpeg 共享库， 如果它不存在，
	    则会进入到您的 ports 目录中的 <code class="filename">graphics/jpeg</code>
	    子目录， 并联编和安装它。 如果您指定的 <em class="replaceable"><code>target</code></em>
	    就是 <code class="varname">DEPENDS_TARGET</code> (默认是
	    <code class="literal">install</code>)， 则可以略去不写。</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml"><em class="replaceable"><code>lib</code></em> 部分是一个正则表达式， 用于在
	      <code class="command">ldconfig -r</code> 的输出中进行查找。 可以使用类似
	      <code class="literal">intl.[5-7]</code> 和 <code class="literal">intl</code> 这样的值。
	      前一种模式， 即
	      <code class="literal">intl.[5-7]</code>， 能够匹配
	      <code class="literal">intl.5</code>、 <code class="literal">intl.6</code> 和
	      <code class="literal">intl.7</code> 中的任意一个。 第二种模式， 即
	      <code class="literal">intl</code> 则可以匹配任意版本的
	      <code class="literal">intl</code> 库。</p></div><p>依赖关系会被检测两次， 一次是在
	    <code class="buildtarget">extract</code> target 中， 而另一次则是在
	    <code class="buildtarget">install</code> target。 另外，
	    依赖关系的名字会放到 package 中， 以便让
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> 能够自动地在用户系统上安装所需的未安装的其它
	    package。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67819984"></a>5.7.2. <code class="varname">RUN_DEPENDS</code> (依赖的运行环境)</h3></div></div></div><p>这个变量可以用来指定 port 在运行时所需要的可执行文件，
	    以及资源文件。 它是一系列
	    <em class="replaceable"><code>path</code></em>:<em class="replaceable"><code>dir</code></em>[<span class="optional">:target</span>]
	    元组的列表， 这里， <em class="replaceable"><code>path</code></em> 时所需的可执行，
	    或者资源文件的名字， <em class="replaceable"><code>dir</code></em> 是在无法找到这些文件或目录时，
	    去什么地方完成联编和安装以便获得这些文件； 而
	    <em class="replaceable"><code>target</code></em> 则用来指定在这个目录中所调用的
	    target 的名字。 假如 <em class="replaceable"><code>path</code></em> 以斜线
	    (<code class="literal">/</code>) 开始， 则会当作普通文件，
	    使用 <code class="command">test -e</code> 来测试； 反之，
	    则系统会假定这是一个可执行文件， 并且用 <code class="command">which -s</code>
	    来检测程序是否存在于搜索路径中。</p><p>例如，</p><pre class="programlisting">RUN_DEPENDS=   ${LOCALBASE}/etc/innd:${PORTSDIR}/news/inn \
	       xmlcatmgr:${PORTSDIR}/textproc/xmlcatmgr</pre><p>将检查文件， 或者目录
	    <code class="filename">/usr/local/etc/innd</code> 是否存在，
	    如果找不到， 则将从 port 目录的
	    <code class="filename">news/inn</code> 子目录加以安装。
	    系统也会检查是否能够在搜索路径中找到名为 <code class="command">xmlcatmgr</code>
	    的文件， 如果找不到的话， 则会进入 ports 目录中的
	    <code class="filename">textproc/xmlcatmgr</code> 子目录，
	    并进行联编和安装的操作。</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">这种情况下， <code class="command">innd</code> 实际上是一个可执行文件；
	      如果可执行文件不会出现在搜索路径中， 您就需要指定完整路径了。</p></div><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">ports 联编集群上官方的搜索 <code class="envar">PATH</code> 是</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin:/usr/X11R6/bin</pre></div><p>这个依赖关系会在
	    <code class="buildtarget">install</code> target 的过程中进行检查。
	    此外， 依赖关系的名字会被放到 package 中， 以便
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> 能够在用户的系统中尚未安装相关软件时自动地安装那些 package。
	    如果您希望指定一个的 <em class="replaceable"><code>target</code></em>
	    和默认的 <code class="varname">DEPENDS_TARGET</code> 相同，
	    则可以略去不写。</p><p>一种比较常见的情形是
	    <code class="varname">RUN_DEPENDS</code> 和
	    <code class="varname">BUILD_DEPENDS</code> 完全一样，
	    这种情况在移植的软件是采用脚本语言书写，
	    或联编环境与运行环境需求相同时尤其普遍。
	    这种情况可以用下面简单明了的方式直接将其中一个变量赋值给另一个变量：</p><pre class="programlisting">RUN_DEPENDS= ${BUILD_DEPENDS}</pre><p>不过， 这种赋值有可能会令运行环境被某些没有在
	    port 原本的 <code class="varname">BUILD_DEPENDS</code> 明确定义的依赖关系污染。
	    导致这种情况的原因是 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> 计算变量赋值时默认采用的是延后计算 (lazy evaluation)。
	    例如， 如果在 <code class="filename">Makefile</code> 中使用了
	    <code class="varname">USE_<em class="replaceable"><code>*</code></em></code> 变量，
	    这些变量就会由 <code class="filename">ports/Mk/bsd.*.mk</code> 处理，
	    并填写与之对应的联编依赖关系。 例如， <code class="literal">USE_GMAKE=yes</code>
	    会把 <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/gmake/pkg-descr">devel/gmake</a> 加入到
	    <code class="varname">BUILD_DEPENDS</code>。
	    如果希望避免这些附加的依赖关系污染 <code class="varname">RUN_DEPENDS</code>，
	    在使用赋值的时候就需要小心考虑这类扩展的情况，
	    例如， 可以在赋值展开之前复制变量的值：</p><pre class="programlisting">RUN_DEPENDS:=  ${BUILD_DEPENDS}</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67864400"></a>5.7.3. <code class="varname">BUILD_DEPENDS</code> (依赖的联编环境)</h3></div></div></div><p>此变量用于指定用来联编 port 的可执行文件或资源文件。
	    与 <code class="varname">RUN_DEPENDS</code> 类似， 它是一个
	    <em class="replaceable"><code>path</code></em>:<em class="replaceable"><code>dir</code></em>[<span class="optional">:target</span>]
	    元组的列表。 例如， </p><pre class="programlisting"> BUILD_DEPENDS=
	      unzip:${PORTSDIR}/archivers/unzip</pre><p> 将检测名为
	    <code class="command">unzip</code> 的可执行文件是否存在， 如果不存在，
	    则会进入到您的 ports 目录中的 <code class="filename">archivers/unzip</code>
	    并完成联编和安装工作。</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">这里的 <span class="quote">“<span class="quote">build</span>”</span> 表示从解压缩到编译的全部过程。
	      依赖关系是在 <code class="buildtarget">extract</code> target 的过程中检测的。
	      假如您要指定的  <em class="replaceable"><code>target</code></em> 和
	      <code class="varname">DEPENDS_TARGET</code> 相同， 则可以略去不写。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67870800"></a>5.7.4. <code class="varname">FETCH_DEPENDS</code> (依赖的下载环境)</h3></div></div></div><p>这一变量用于指定 port 在下载时所需的可执行文件或资源文件。
	    和前两个类似， 它是一组
	    <em class="replaceable"><code>path</code></em>:<em class="replaceable"><code>dir</code></em>[<span class="optional">:target</span>]
	    元组。 例如， </p><pre class="programlisting"> FETCH_DEPENDS=
	      ncftp2:${PORTSDIR}/net/ncftp2</pre><p>
	    将检测名为 <code class="command">ncftp2</code> 的可执行文件是否存在，
	    如果找不到， 则将进入到您 ports 目录中的
	    <code class="filename">net/ncftp2</code> 子目录并加以联编和安装。</p><p>这个依赖关系是在
	    <code class="buildtarget">fetch</code> target 过程中检查的。
	    如果与 <code class="varname">DEPENDS_TARGET</code> 相同，
	    则可以省略 <em class="replaceable"><code>target</code></em> 部分。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67884240"></a>5.7.5. <code class="varname">EXTRACT_DEPENDS</code> (依赖的解压缩环境)</h3></div></div></div><p>此变量用于指定 port 在解压缩时所需的可执行文件或其它资源文件。
	    和前一个变量类似， 它是一系列
	    <em class="replaceable"><code>path</code></em>:<em class="replaceable"><code>dir</code></em>[<span class="optional">:target</span>]
	    元组的列表。 例如， </p><pre class="programlisting">EXTRACT_DEPENDS=
	      unzip:${PORTSDIR}/archivers/unzip</pre><p> 将检查名为
	    <code class="command">unzip</code> 的可执行文件是否存在， 如果不存在，
	    则会进入到您的 ports 目录中的 <code class="filename">archivers/unzip</code>
	    子目录， 予以联编和安装。</p><p>这个依赖关系是在
	    <code class="buildtarget">extract</code> target 的过程中检查的。 如果与
	    <code class="varname">DEPENDS_TARGET</code> 相同，
	    则可以略去 <em class="replaceable"><code>target</code></em> 部分。</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">只有在其它方式都不可用 (默认是 <code class="command">gzip</code>)
	      而且无法通过 <a class="xref" href="makefile-depend.html#use-vars" title="5.7.7. USE_*">第 5.7.7 节 “<code class="varname">USE_<em class="replaceable"><code>*</code></em></code>”</a> 所介绍的 <code class="varname">USE_ZIP</code> 或
	      <code class="varname">USE_BZIP2</code> 都不能达到需要时，
	      才应使用这个变量。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67891920"></a>5.7.6. <code class="varname">PATCH_DEPENDS</code> (依赖的打补丁环境)</h3></div></div></div><p>这个变量用于指定 port 在进行 patch
	    操作时所需的可执行文件或其它资源文件。 和前一个变量类似， 它是一组
	    <em class="replaceable"><code>path</code></em>:<em class="replaceable"><code>dir</code></em>[<span class="optional">:target</span>]
	    元组的表。 例如， </p><pre class="programlisting"> PATCH_DEPENDS=
	      ${NONEXISTENT}:${PORTSDIR}/java/jfc:extract
		</pre><p> 表示进入到您的 ports 目录中的
	    <code class="filename">java/jfc</code> 子目录， 并将其解压缩。</p><p>这个依赖关系是在
	    <code class="buildtarget">patch</code> target 的过程中检查的。
	    <em class="replaceable"><code>target</code></em> 部分如果和
	    <code class="varname">DEPENDS_TARGET</code> 相同， 就可略去不写。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="use-vars"></a>5.7.7. <code class="varname">USE_<em class="replaceable"><code>*</code></em></code></h3></div></div></div><p>提供了一系列变量， 用以封装大量 port 都用到的依赖关系。
	  虽然使用这些变量是可选的， 但它们能显著减少 port 的
	  <code class="filename">Makefile</code> 复杂性。 这些变量的共同特征在于，
	  它们的名字都是 <code class="varname">USE_<em class="replaceable"><code>*</code></em></code>
	  这样的形式。 这些变量的使用， 应严格限制于 port 的
	  <code class="filename">Makefile</code> 以及
	  <code class="filename">ports/Mk/bsd.*.mk</code>，
	  而绝不应用于表达用户能够设置的选项 ── 这种情况下应采用
	  <code class="varname">WITH_<em class="replaceable"><code>*</code></em></code> 和
	  <code class="varname">WITHOUT_<em class="replaceable"><code>*</code></em></code>
	  这样的变量。</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">在 <span class="emphasis"><em>任何</em></span> 情况下，
	    都不应在 <code class="filename">/etc/make.conf</code> 中配置任何
	    <code class="varname">USE_<em class="replaceable"><code>*</code></em></code>。
	    例如， 设置 </p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">USE_GCC=3.4</pre><p xmlns="http://www.w3.org/1999/xhtml">
	    将导致每个 port 都依赖 gcc34， 甚至包括
	    gcc34 本身！</p></div><div class="table"><a id="idp67904080"></a><div class="table-title">表 5.2. 常用的 <code class="varname">USE_<em class="replaceable"><code>*</code></em></code>
	    变量</div><div class="table-contents"><table summary="常用的 USE_*&#10;&#9;    变量" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>变量</th><th>含义</th></tr></thead><tbody><tr><td><code class="varname">USE_BZIP2</code></td><td>此 port 的源码包是使用
		  <code class="command">bzip2</code> 压缩的。</td></tr><tr><td><code class="varname">USE_ZIP</code></td><td>此 port 的源码包是用
		  <code class="command">zip</code> 压缩的。</td></tr><tr><td><code class="varname">USE_BISON</code></td><td>此 port 在联编时使用 <code class="command">bison</code>。</td></tr><tr><td><code class="varname">USE_CDRTOOLS</code></td><td>此 port 需要使用 <span class="application">cdrecord</span>，
		  根据用户的喜好， 可能是 <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a> 或 <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools-cjk/pkg-descr">sysutils/cdrtools-cjk</a>。</td></tr><tr><td><code class="varname">USE_GCC</code></td><td>此 port 需要使用某一特定版本的
		  <code class="command">gcc</code> 才能完成编译。
		  可以使用类似 <code class="literal">3.4</code> 这样的值来精确指定版本。
		  如果希望使用不低于某一版本的编译器， 则可以用
		  <code class="literal">3.4+</code> 这样的形式。 如果与所希望的版本吻合，
		  则将使用基本系统中所提供的 <code class="command">gcc</code>， 反之，
		  系统会从 ports 中安装所希望版本的 <code class="command">gcc</code>，
		  并调整 <code class="varname">CC</code> 以及
		  <code class="varname">CXX</code> 变量的设置。</td></tr></tbody></table></div></div><br class="table-break" /><p>与 <span class="application">gmake</span>
	    和 <code class="filename">configure</code> 脚本有关的变量在
	    <a class="xref" href="building.html" title="6.3. 联编机制">第 6.3 节 “联编机制”</a> 中进行了介绍， 而
	    <span class="application">autoconf</span>、
	    <span class="application">automake</span> 以及
	    <span class="application">libtool</span> 的介绍则可以在
	    <a class="xref" href="using-autotools.html" title="6.4. 利用 GNU autotools">第 6.4 节 “利用 GNU autotools”</a> 找到。 <a class="xref" href="using-perl.html" title="6.6. 使用 perl">第 6.6 节 “使用 <code class="literal">perl</code>”</a>
	    介绍了与 <span class="application">Perl</span> 有关的的变量。
	    <a class="xref" href="using-x11.html" title="6.7. 使用 X11">第 6.7 节 “使用 X11”</a> 中列出了关于 X11 的变量。 关于 GNOME 的变量在 <a class="xref" href="using-gnome.html" title="6.8. 使用 GNOME">第 6.8 节 “使用 GNOME”</a>， 而关于 KDE 的则在 <a class="xref" href="using-kde.html" title="6.10. 使用 KDE">第 6.10 节 “使用 KDE”</a>。 <a class="xref" href="using-java.html" title="6.11. 使用 Java">第 6.11 节 “使用 Java”</a> 讲述了和 Java 有关的变量， 而 <a class="xref" href="using-php.html" title="6.12. Web 应用， Apache 和 PHP">第 6.12 节 “Web 应用， Apache 和 PHP”</a> 则包含了关于
	    <span class="application">Apache</span>、 <span class="application">PHP</span>
	    以及 PEAR 的介绍性信息。 关于 <span class="application">Python</span>，
	    在 <a class="xref" href="using-python.html" title="6.13. 使用 Python">第 6.13 节 “使用 Python”</a> 进行了讨论， 而关于
	    <span class="application">Ruby</span> 的介绍，
	    则可以在 <a class="xref" href="using-ruby.html" title="6.16. 使用 Ruby">第 6.16 节 “使用 Ruby”</a> 中找到。
	    <a class="xref" href="using-sdl.html" title="6.17. 使用 SDL">第 6.17 节 “使用 SDL”</a> 提供了用于
	    <span class="application">SDL</span> 应用程序的变量介绍， 最后，
	    <a class="xref" href="using-xfce.html" title="6.20. 使用 Xfce">第 6.20 节 “使用 Xfce”</a> 包含了关于
	    <span class="application">Xfce</span> 的信息。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67937872"></a>5.7.8. 在依赖关系中指定最低版本</h3></div></div></div><p>在依赖某个其他 port 时， 可以采用下面的句法， 通过除
	    <code class="varname">LIB_DEPENDS</code> 之外的
	    <code class="varname">*_DEPENDS</code> 变量来指定最低版本：</p><pre class="programlisting">p5-Spiffy&gt;=0.26:${PORTSDIR}/devel/p5-Spiffy</pre><p>第一个字段指明了所依赖 package 的名字，
	    用以与 package 数据库中的某项匹配， 然后是比较算符，
	    以及 package 的版本号。 前面的例子中，
	    如果系统中安装了 p5-Spiffy-0.26 则认为满足了依赖条件。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67940560"></a>5.7.9. 关于依赖关系的补充说明</h3></div></div></div><p>如前面所提到的那样， 在需要某一依赖的 port 时，
	    将调用 <code class="buildtarget">DEPENDS_TARGET</code> 所指定的 target。
	    这一变量的默认值是 <code class="literal">install</code>。 这不是一个用户变量，
	    它不应在 port 的
	    <code class="filename">Makefile</code> 中予以定义。 如果您的 port 需要使用特殊的
	    target 来处理依赖关系， 应使用 <code class="varname">*_DEPENDS</code> 的
	    <code class="literal">:target</code> 部分， 而不是重定义
	    <code class="varname">DEPENDS_TARGET</code> 来完成。</p><p>当您输入 <code class="command">make clean</code> 时， 其依赖的 port
	    也会自动进行清理。 如果您不希望如此， 应定义环境变量
	    <code class="varname">NOCLEANDEPENDS</code>。 如果 port
	    依赖一些重新联编需要花费很长时间的 port 时， 例如 KDE， GNOME
	    或 Mozilla 时， 这一方法会非常有用。</p><p>要无条件地依赖某个 port， 可以使用 <code class="varname">${NONEXISTENT}</code>
	    作为 <code class="varname">BUILD_DEPENDS</code> 或
	    <code class="varname">RUN_DEPENDS</code> 的第一部分。 只有在您需要使用其它
	    port 提供的源代码时才应这样做。 通常也可以通过这样指定来缩短编译所需的时间。
	    例如

	    </p><pre class="programlisting">BUILD_DEPENDS=   ${NONEXISTENT}:${PORTSDIR}/graphics/jpeg:extract</pre><p>

	    表示依赖 <code class="literal">jpeg</code> port 并将其解压缩。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67951824"></a>5.7.10. 循环的依赖关系是致命的</h3></div></div></div><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">不要在 ports tree 中引入任何循环依赖关系!</p></div><p>ports 联编技术不能够容忍循环依赖关系。 如果您引入了这样的关系，
	  就一定会有人安装的 FreeBSD 会因此而损坏， 而且这种现象会越来越多。
	  这些情形很难检测； 如果有疑虑， 在进行这样的修改之前， 务必执行：
	  <code class="command">cd /usr/ports; make index</code>。 这个过程在旧的机器上会很慢，
	  但能够让大量的用户 ── 也包括您自己 ──
	  拯救于由这种问题所造成的困惑之中。</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="makefile-comment.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="makefile.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="makefile-masterdir.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">5.6. <code class="varname">COMMENT</code> (一句话说明) </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 5.8. <code class="varname">MASTERDIR</code> (主 port 所在的目录)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文档和其它文档可从这里下载：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>如果对于FreeBSD有问题，请先阅读
    <a href="http://www.FreeBSD.org/docs.html">文档</a>，如不能解决再联系
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    关于本文档的问题请发信联系
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>