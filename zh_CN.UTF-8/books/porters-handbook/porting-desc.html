<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>3.2. 创建描述文件</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter 手册" /><link rel="up" href="quick-porting.html" title="第 3 章 简单的 port" /><link rel="prev" href="quick-porting.html" title="第 3 章 简单的 port" /><link rel="next" href="porting-checksum.html" title="3.3. 创建校验和文件" /><link rel="copyright" href="trademarks.html" title="法律声明" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.2. 创建描述文件</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="quick-porting.html">上一页</a> </td><th width="60%" align="center">第 3 章 简单的 port</th><td width="20%" align="right"> <a accesskey="n" href="porting-checksum.html">下一页</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-desc"></a>3.2. 创建描述文件</h2></div></div></div><p>有 2 个描述文件对于任何一个 port 来说是必须的，
	  不论它是不是打算成为 package。 它们是
	  <code class="filename">pkg-descr</code> 和
	  <code class="filename">pkg-plist</code>。 这两个文件使用 <code class="filename">pkg-</code>
	  前缀以区别于其它文件。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp63516240"></a>3.2.1. <code class="filename">pkg-descr</code> (关于 port 的冗长描述文件)</h3></div></div></div><p>这是 port 里一个较长的描述文件。
	    使用一段或几段文件文字来简明的描述这个 ports 是用来做什么的。</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">这 <span class="emphasis"><em> 不是</em></span> 手册或者对如何
	      深入使用/编译这个port的说明！ <span class="emphasis"><em>要是您从
		<code class="filename">README</code> 或者联机手册里面中复制文字的话，
		请务必小心</em></span>； 通常， 它们不是对这个 port
	      简明扼要的描述， 或者用了难以使用的格式 (比如，
	      联机手册里有迫使两端对齐的空格)。
	      如果要移植的软件有官方的WWW网页， 您应该在这里列出来。
	      使用 <code class="literal">WWW:</code> 作为前缀来表示
	      <span class="emphasis"><em>一个</em></span>网站，
	      这样其它的自动工具就能正常工作了。</p></div><p>下面是一个简单的
	    <code class="filename">pkg-descr</code> 例子：</p><pre class="programlisting">This is a port of oneko, in which a cat chases a poor mouse all over
the screen.
 :
(etc.)

WWW: http://www.oneko.org/</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp63547088"></a>3.2.2. <code class="filename">pkg-plist</code> (port 的装箱单)</h3></div></div></div><p>这份文件列出了 port 所要安装的所有文件。 由于 package
	    也是据此进行打包， 因此它也被称作 <span class="quote">“<span class="quote">装箱单(packing list)</span>”</span>.
	    这个文件中， 路径是相对于安装的路径的 (通常是
	    <code class="filename">/usr/local</code> 或
	    <code class="filename">/usr/X11R6</code>)。 如果您使用
	    <code class="varname">MAN<em class="replaceable"><code>n</code></em></code>
	    变量的话， 请不要在这里列出任何联机手册。 假如 port
	    在安装过程中会创建一些目录， 请务必增加对应的
	    <code class="literal">@dirrm</code> 行，
	    以便在 package 被卸载时予以自动删除。</p><p>下面是一个简单的例子：</p><pre class="programlisting">bin/oneko
lib/X11/app-defaults/Oneko
lib/X11/oneko/cat1.xpm
lib/X11/oneko/cat2.xpm
lib/X11/oneko/mouse.xpm
@dirrm lib/X11/oneko</pre><p>参考 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_create&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_create</span>(1)</span></a> 的联机手册以获得更多有关装箱单的细节</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">建议您将这个文件里的所有的文件名按字母排序。
	      这样， 在升级这个port的时候就能够更方便地核实所做的修改。</p></div><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">手工创建这样一份列表可能是一件非常枯燥的事情。
	      如果您的 port 需要安装大量的文件， <a class="link" href="plist-autoplist.html" title="7.5. 装箱单 (package list) 的自动化制作">自动创建装箱单</a>
	      会帮您省下不少时间。</p></div><p>只有一种情况可以不用 <code class="filename">pkg-plist</code>文件。
	    如果这个 port 只安装很少量的一些文件或目录的话，
	    这些文件和目录就可以分别列在 <code class="filename">Makefile</code> 的
	    <code class="varname">PLIST_FILES</code>和<code class="varname">PLIST_DIRS</code>
	    变量里。 举个例子来说， 我们可以在上面那个
	    <code class="filename">oneko</code> port 里面不用
	    <code class="filename">pkg-plist</code>， 而把下面的这几行加到
	    <code class="filename">Makefile</code> 里面：</p><pre class="programlisting">PLIST_FILES=    bin/oneko \
                lib/X11/app-defaults/Oneko \
                lib/X11/oneko/cat1.xpm \
                lib/X11/oneko/cat2.xpm \
                lib/X11/oneko/mouse.xpm
PLIST_DIRS=     lib/X11/oneko</pre><p>当然， 如果一个 port 不需要给它自己创建目录的话，
	    就不用设置 <code class="varname">PLIST_DIRS</code> 变量了。</p><p>不过， 如果用这种方式来列出 port 要安装的文件和目录的话，
	    也就无法利用在 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_create&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_create</span>(1)</span></a> 里介绍的命令来制作 package 了。
	    因此， 这种方法只适用于那些简单的 port， 使它们更为简化。 同时，
	    这种做法也有助于减少 ports collection 中的文件数量。
	    在采用 <code class="filename">pkg-plist</code> 之前，
	    请考虑一下使用这种方法。</p><p>稍后我们将看到 <code class="filename">pkg-plist</code>
	    以及 <code class="varname">PLIST_FILES</code> 如何处理
	    <a class="link" href="plist.html" title="第 7 章 高级 pkg-plist 用法">更复杂的任务</a>。</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="quick-porting.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="quick-porting.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="porting-checksum.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">第 3 章 简单的 port </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 3.3. 创建校验和文件</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文档和其它文档可从这里下载：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>如果对于FreeBSD有问题，请先阅读
    <a href="http://www.FreeBSD.org/docs.html">文档</a>，如不能解决再联系
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    关于本文档的问题请发信联系
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>