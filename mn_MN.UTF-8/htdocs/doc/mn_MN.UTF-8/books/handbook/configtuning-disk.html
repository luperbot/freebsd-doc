<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>12.13. Дискнүүдийг тааруулах нь</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="config-tuning.html" title="Бүлэг 12. Тохиргоо ба Тааруулалт" /><link rel="prev" href="configtuning-sysctl.html" title="12.12. sysctl(8) ашиглан тааруулах нь" /><link rel="next" href="configtuning-kernel-limits.html" title="12.14. Цөмийн хязгаарууд тохируулах нь" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.13. Дискнүүдийг тааруулах нь</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configtuning-sysctl.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 12. Тохиргоо ба Тааруулалт</th><td width="20%" align="right"> <a accesskey="n" href="configtuning-kernel-limits.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-disk"></a>12.13. Дискнүүдийг тааруулах нь</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77624784"></a>12.13.1. Sysctl хувьсагчууд</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77625424"></a>12.13.1.1. <code class="varname">vfs.vmiodirenable</code></h4></div></div></div><a id="idp77626192" class="indexterm"></a><p><code class="varname">vfs.vmiodirenable</code> sysctl хувьсагч нь
	0 (идэвхгүй) эсвэл 1 (идэвхтэй) гэж тохируулагдаж болно; анхдагчаар 1 байна.
	Энэ хувьсагч нь систем сангуудыг хэрхэн кэш (шуурхай санамж) хийхийг хянадаг.
	Ихэнх сангууд  зөвхөн ганц фрагментийг (ихэвчлэн 1 K) файлын системд
	болон түүнээс багыг буфер кэшд хэрэглэн жижиг хэмжээтэй байдаг.
	Энэ хувьсагчийг хааснаар (0 болгосноор) буфер кэш нь таныг асар их хэмжээний
	санах ойтой байсан ч гэсэн зөвхөн тодорхой тооны сангуудыг кэш хийдэг.
	Нээгдсэн (1 болгосон) үед энэ sysctl нь бүх санах ойг кэш хийхэд бэлэн болгож
	буфер кэшд VM Хуудасны Кэшийг хэрэглэн сангуудыг кэш хийх боломжийг олгодог.
	Гэхдээ сангуудыг кэш хийх хамгийн бага гол дахь санах ой нь 512  байт биш
	харин физик хуудасны хэмжээ (ихэвчлэн 4 K) байдаг. Хэрэв та их олон тооны
	файлуудтай ажилладаг үйлчилгээ ажиллуулж байгаа бол бид энэ тохируулгыг идэвхтэй
	байлгахыг зөвлөж байна. Тийм үйлчилгээнүүдэд вэб кэшүүд, том захидлын системүүд,
	болон мэдээний системүүд орж болно. Энэ тохируулгыг идэвхтэй байлгах нь хайр
	гамгүй зарцуулсан санах ойтой байхад ч гэсэн ерөнхийдөө ажиллагааг удаашруулдаггүй,
	гэхдээ та түүнийг мэдэхийн тулд туршиж үзэж болно.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77627856"></a>12.13.1.2. <code class="varname">vfs.write_behind</code></h4></div></div></div><a id="idp77628624" class="indexterm"></a><p><code class="varname">vfs.write_behind</code> sysctl хувьсагчийн
	анхдагч утга нь <code class="literal">1</code> (идэвхтэй) байна. Энэ нь том
	дараалсан файлуудыг бичих үед ихэвчлэн гардаг бүх кластеруудыг цуглуулсан
	үед зөөгчийн бичилтүүдийг хийхийг файлын системд хэлж өгдөг. Санаа нь бол
	I/O ажиллагааны хувьд ашиггүй байхад бохир буферууд бүхий буферийн кэшийг
	замхруулахаас зайлсхийхэд оршдог. Гэхдээ энэ нь процессуудыг зогсоож магадгүй
	бөгөөд зарим нөхцөл байдалд та магадгүй үүнийг идэвхгүй болгохыг хүсэж болох юм.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77630800"></a>12.13.1.3. <code class="varname">vfs.hirunningspace</code></h4></div></div></div><a id="idp77631568" class="indexterm"></a><p><code class="varname">vfs.hirunningspace</code> sysctl хувьсагч
	өгөгдсөн дурын хоромд системийн хувьд бүхэлд нь хэдий хэмжээний хүлээгдэж байгаа
	бичих I/O-г дискний хянагчуудад өгөх дараалалд оруулж болохыг тодорхойлдог.
	Анхдагч утга нь ихэвчлэн хангалттай гэхдээ олон дисктэй машинууд дээр та
	үүнийг дөрөв эсвэл таван <span class="emphasis"><em>мегабайт</em></span> хүртэл
	ихэсгэхийг хүсэж болох юм. Утгыг хэтэрхий өндөр тавих нь (буфер кэшийн бичих
	тогтоосон хэмжээг давах нь) туйлын муу кластерлах ажиллагаанд хүргэж болно.
	Энэ утгыг хэтэрхий өндөр бүү тавь! Өндөр бичих утгууд нь яг тэр үед хийгдэж байгаа
	уншилтуудад хоцрогдол нэмж магадгүй юм.
 	</p><p>Бусад төрөл бүрийн буфер-кэш болон VM хуудасны кэштэй холбоотой sysctl-ууд
	байдаг. Бид эдгээр утгуудыг өөрчлөхийг зөвлөдөггүй, VM систем нь өөрийгөө автоматаар
	тааруулж туйлын сайн ажилладаг.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77650512"></a>12.13.1.4. <code class="varname">vm.swap_idle_enabled</code></h4></div></div></div><a id="idp77651280" class="indexterm"></a><p><code class="varname">vm.swap_idle_enabled</code> sysctl хувьсагч нь
	маш олон хэрэглэгчид таны системд орж гарч байдаг, сул зогссон олон процессуудтай,
	том, олон-хэрэглэгчийн системүүд дээр ашигтай байдаг. Ийм системүүд нь
	чөлөөт санах ойн хадгалалтад ихээхэн хэмжээний байнгын дарамтыг үүсгэж байдаг.
	Энэ боломжийг идэвхтэй болгож ар араас нь swap хийн гаргахыг (зогссон секундээр)
	<code class="varname">vm.swap_idle_threshold1</code> болон
 	<code class="varname">vm.swap_idle_threshold2</code> хувьсагчуудын тусламжтай
	тохируулснаар зогссон процессуудтай холбоотой санах ойн хуудаснуудын дарааллыг ердийн
	хуудаслаж гаргах алгоритмаас илүү хурднаар багасгах боломжийг олгодог.
	Энэ нь хуудаслаж гаргах дэмонд тусламжийн гарыг өгөх болно. Энэ тохируулгыг
	танд хэрэгтэй л биш бол идэвхтэй болгож болохгүй, учир нь үүнийг та хийснээр үндсэндээ
	санах ойг илүү түргэн урьдчилан-хуудаслаж ингэснээр swap болон дискний багтаамжийг
	илүүтэйгээр идэхэд хүргэх юм. Жижиг систем дээр энэ тохируулга нь тодорхойлогдож
	болохуйц нөлөөлөлтэй байх ба харин боломжийн хуудаслалт аль хэдийн хийгээд байгаа
	том системүүдэд энэ тохируулга нь VM системд бүх процессуудыг санах ой уруу болон
	санах ойгоос хялбараар гаргах боломжийг бүрдүүлдэг.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77653712"></a>12.13.1.5. <code class="varname">hw.ata.wc</code></h4></div></div></div><a id="idp77654480" class="indexterm"></a><p>FreeBSD 4.3-д IDE бичих кэш хийлтийг хаасан байдаг. Энэ нь
	IDE дискэнд бичих багтаамжийг багасгасан боловч хатуу диск үйлдвэрлэгчдийн гаргасан
	өгөгдлийн бүрэн бүтэн байдлын ноцтой асуудлуудаас болоод шаардлагатай болсон.
	Тэр асуудал нь IDE хөтлөгчүүд  бичилт дуусах үед худлаа мэдээлдэг явдал юм.
	IDE бичих кэшийг идэвхтэй болгосноор IDE хатуу дискнүүд ямар нэг дараалалгүйгээр
	бичихээс гадна диск их ачаалалтай үед зарим блокуудыг бичихэд заримдаа
	тодорхойгүй саатдаг. Сүйрэл болон тэжээлийн уналт файлын системийн ноцтой
	эвдрэлд хүргэж болзошгүй байдаг. FreeBSD-ийн анхдагч нь аюулгүй байхаар өөрчлөгдсөн.
	Харамсалтай нь үүний үр дүнд ажиллагааны асар том алдагдалд хүргэсэн бөгөөд
	хувилбар гарсны дараа бид бичих кэш хийлтийг анхдагчаар идэвхтэй байхаар буцаан
	өөрчилсөн юм. Та өөрийн систем дээрээ <code class="varname">hw.ata.wc</code> sysctl
	хувьсагчийг ажиглан анхдагч утгыг шалгах хэрэгтэй. Хэрэв IDE бичих кэш хийлт
	хаалттай бол та цөмийн хувьсагчийн утгыг 1 болгон түүнийг идэвхжүүлж болно.
	Үүнийг ачаалах үед ачаалагчаас хийх шаардлагатай. Цөм ачаалсны дараа хийхийг
	оролдвол ямар ч нөлөө үзүүлэхгүй.</p><p>Дэлгэрэнгүй мэдээллийн талаар <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ata&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ata</span>(4)</span></a>-с үзнэ үү.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77657552"></a>12.13.1.6. <code class="literal">SCSI_DELAY</code>
	(<code class="varname">kern.cam.scsi_delay</code>)</h4></div></div></div><a id="idp77658832" class="indexterm"></a><a id="idp77659728" class="indexterm"></a><p><code class="literal">SCSI_DELAY</code> цөмийн тохиргоо нь системийн ачаалах
	хугацааг багасгахад хэрэглэгддэг. Анхдагч утга нь нэлээн өндөр бөгөөд
	<code class="literal">15</code> секундын саатлыг ачаалах процессийн үед өгөхийг хариуцдаг.
	<code class="literal">5</code> секунд хүртэл багасгахад ихэвчлэн ажилладаг (ялангуяа
	орчин үеийн хөтлөгчүүдийн хувьд). Ачаалах үеийн тохируулга болох
	<code class="varname">kern.cam.scsi_delay</code> хувьсагчийг ашиглах хэрэгтэй.
	Энэ тохируулга болон цөмийн тохиргооны тохируулга нь
	<span class="emphasis"><em>секундээр</em></span> <span class="emphasis"><em>биш</em></span>
	<span class="emphasis"><em>миллисекундээр</em></span> утгыг хүлээн авдаг.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="soft-updates"></a>12.13.2. Зөөлөн Шинэчлэлтүүд</h3></div></div></div><a id="idp77665104" class="indexterm"></a><a id="idp77665616" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a> програм файлын системийг нарийн тааруулахад
	ашиглагдаж болно. Энэ програм нь олон янзын тохируулгуудтай гэхдээ
	одоохондоо бид зөвхөн Зөөлөн Шинэчлэлтүүдийг идэвхжүүлэх ба хаах дээр
	анхаарах бөгөөд үүнийг дараах аргаар хийнэ:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tunefs -n enable /filesystem</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>tunefs -n disable /filesystem</code></strong></pre><p>Файлын систем нь холбогдсон байхдаа <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a>-ээр өөрчлөгдөх
	боломжгүй. Зөөлөн Шинэчлэлтүүдийг идэвхжүүлэхэд тохирох үе нь аль ч
	хуваалтууд холболт хийгдээгүй байгаа ганц хэрэглэгчийн горим юм.</p><p>Зөөлөн Шинэчлэлтүүд нь мета-өгөгдлийн ажиллагааг мэдэгдэхүйц сайжруулдаг бөгөөд
	санах ойн кэшийг ашиглан голчлон файлын үүсгэлт болон устгалтыг хурдасгадаг.
	Бид Зөөлөн Шинэчлэлтүүдийг өөрийн бүх файлын системүүдэд ашиглахыг зөвлөж байна.
	Зөөлөн Шинэчлэлтүүдийн хоёр дутагдалтай талыг та мэдэж байх ёстой: Нэгдүгээрт,
	Зөөлөн Шинэчлэлтүүд нь сүйрэл болсон тохиолдолд файлын системийн бүрэн бүтэн
	байдалд баталгаа өгдөг боловч физик дискийг шинэчлэхэд хэдэн секундын (минут ч байж болно!)
	хоцрогдолтой байж болно. Хэрэв таны систем сүйрэхэд бусад тохиолдлоос илүүтэйгээр
	та хийсэн ажлаа алдаж болзошгүй юм. Хоёрдугаарт, Зөөлөн Шинэчлэлтүүд нь
	файлын системийн блокуудыг чөлөөлөхийг саатуулдаг. Хэрэв та бараг дүүрсэн
	файлын системтэй (root файл систем гэх зэрэг) байгаа бол
	<code class="command">make installworld</code> зэрэг гол шинэчлэлтийг
	хийх нь файлын системийг зайгүй болгож шинэчлэлт амжилтгүй болох шалтгаанд хүргэж
	болох юм.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77670736"></a>12.13.2.1. Зөөлөн Шинэчлэлтүүдийн талаар дэлгэрэнгүй</h4></div></div></div><a id="idp77671376" class="indexterm"></a><p>Файлын системийн мета-өгөгдлийг диск уруу бичих уламжлалт хоёр хандлага
	байдаг. (Мета-өгөгдлийн шинэчлэлтүүд нь inode эсвэл сангууд зэрэг агуулгын бус
	өгөгдөлд хийх шинэчлэлтүүд юм)</p><p>Түүхээс авч үзэхэд анхдагч ажиллах горим нь мета-өгөгдлийн шинэчлэлтүүдийг
	синхроноор буюу зэрэг бичдэг байсан явдал юм. Хэрэв сан өөрчлөгдсөн бол
	систем өөрчлөлтийг диск уруу бичигдэхийг хүлээдэг. Файлын өгөгдлийн буферууд
	(файлын агуулгууд) буфер кэшээр дамжин диск уруу сүүлд нь асинхроноор хадгалагддаг.
	Энэ шийдлийн давуу тал нь аюулгүй ажилладаг. Хэрэв шинэчлэлтийн үед амжилтгүй
	болбол мета-өгөгдөл нь үргэлж бүрэн бүтэн байдаг. Файл эсвэл бүрэн үүсч эсвэл
	бүр ерөөсөө үүсдэггүй. Хэрэв файлын өгөгдлийн блокууд сүйрэл болох үед
	буферийн кэшээс диск уруу өөрсдийн гарах замаа олохгүй байгаа бол
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> нь үүнийг таньж файлын уртыг 0 болгон файлын системийг
	засварладаг. Нэмж хэлэхэд энэ шийдэл нь цэвэрхэн ба хялбар юм.
	Сул тал нь мета-өгөгдлийн өөрчлөлтүүд нь удаан байдаг.
	<code class="command">rm -r</code> тушаал жишээ нь сан дахь бүх файлуудад дараалан
	хандах бөгөөд гэхдээ сан болгоны өөрчлөлт (файлын устгалт) синхроноор зэрэг
	диск уруу бичигддэг. Үүнд сан уруу өөрт нь хийгдэх шинэчлэлтүүд, inode хүснэгт
	болон магадгүй файлын гаргасан шууд бус блокуудад хийх шинэчлэлтүүд ордог.
	Том иерархуудыг задлахад (<code class="command">tar -x</code>) үүний нэгэн адилаар
	авч үздэг.</p><p>Хоёр дахь нь асинхрон мета-өгөгдлийн шинэчлэлтүүд юм. Энэ нь
	Линукс/ext2fs-ийн хувьд анхдагч байх бөгөөд
	*BSD ufs-ийн хувьд
	<code class="command">mount -o async</code> байх юм.
	Бүх мета-өгөгдлийн шинэчлэлтүүд
	нь буфер кэшээр бас дамждаг, тэгэхээр тэдгээр нь файлын агуулгын өгөгдлийн
	шинэчлэлтүүдтэй харилцан холилдох болно. Энэ шийдлийн давуу тал нь
	мета-өгөгдөл бүрийн шинэчлэлт диск уруу бичигдэхийг хүлээдэггүй бөгөөд
	ингэснээр ихээхэн хэмжээний мета-өгөгдлийн шинэчлэлтүүдийг хийдэг бүх
	үйлдлүүд синхрон хийгдэхээс хамаагүй хурдан ажилладаг. Мөн энэ шийдэл нь
	цэвэрхэн бас энгийн бөгөөд ингэснээр хорхойнууд (алдаа) код уруу мөлхөн
	орох эрсдэл бага юм. Сул тал нь файлын системийн бүрэн бүтэн төлвийн
	ямар нэг баталгаа ерөөсөө байдаггүй. Хэрэв их хэмжээний мета-өгөгдөл
	шинэчлэх үйлдлийн явцад амжилтгүй болсон бол (тэжээлийн тасалдал, эсвэл хэн
	нэг нь дахин эхлүүлэх товч дарсан зэрэгт) файлын систем тааж болшгүй
	төлөвт үлдэх болно. Систем дахин ачаалаад дуусахад файлын системийн
	төлөвийг мэдэх боломжгүй байдаг; inode хүснэгт эсвэл холбоотой сангийн
	шинэчлэлтүүд бичигдээгүй байхад файлын өгөгдлийн блокууд диск уруу аль хэдийн
	бичигдчихсэн байж болох юм. Ер нь гаргасан замбараагүйтлийг (учир нь хэрэгцээтэй
	мэдээлэл диск дээр байхгүй) цэвэрлэж чаддаг <code class="command">fsck</code>
	тушаалын шийдлийг хийх боломжгүй. Хэрэв файлын систем засвар хийж чадахааргүй
	эвдэрсэн бол түүнд дээр <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>-ийг хэрэглэж нөөцөөс сэргээхээс өөр
	аргагүй юм.
	  </p><p>Энэ асуудлын шийдэл нь
	<span class="emphasis"><em>бохир бүсийн бүртгэл</em></span> буюу бас
	<span class="emphasis"><em>журналчлалт</em></span> гэгддэг шийдлийг гаргах явдал бөгөөд
	энэ ухагдахуун нь тогтвортой хэрэглэгддэггүй ба шилжүүлэлтийн бүртгэлийн бусад
	хэлбэрүүдэд бас заримдаа ашиглагддаг. Мета-өгөгдлийн шинэчлэлтүүд нь
	синхроноор бичигдсэн хэвээр байх бөгөөд гэхдээ зөвхөн дискний жижиг бүсэд
	бичигдэнэ. Дараа нь тэдгээрийг тэдний зөв байрлал  уруу зөөдөг. Бүртгэлийн
	талбар нь диск дээр бага, үргэлжилсэн бүс байдаг учраас  бүр хүнд үйлдлүүдийн үед
	ч гэсэн дискний толгойнууд шилжихэд хол зайтай биш байдаг болохоор эдгээр
	үйлдлүүд нь синхрон шинэчлэлтүүдээс илүү хурдан байдаг.
	Мөн энэ шийдлийн төвөгтэй байдал нь маш хязгаарлагдмал болохоор алдаанууд
	байх эрсдэл нь бага байдаг. Сул тал нь бүх мета-өгөгдөл нь хоёр удаа бичигддэг
	(бүртгэлийн бүсэд нэг удаа болон зөв байрлал уруу бас нэг удаа) болохоор
	энгийн ажлын хувьд ажиллагааны <span class="quote">«<span class="quote">өөдрөг бус үзэгдэл</span>»</span>
	гарч болзошгүй юм. Нөгөө талаас сүйрэл болоод систем дахин ачаалаад дуусахад
	хүлээгдэж байгаа бүх мета-өгөгдлийн үйлдлүүд бүртгэлийн талбараас хурдан
	буцаагдаж эсвэл гүйцэд хийгдэн дуусч болох бөгөөд энэ нь файлын системийг
	хурдан эхлүүлэхэд хүргэдэг.</p><p>Беркли FFS-ийн хөгжүүлэгч Кирк МкКюзик энэ асуудлыг Soft Updates
	буюу Зөөлөн Шинэчлэлтүүдээр шийдсэн: хүлээгдэж байгаа бүх мета-өгөгдлийн
	шинэчлэлтүүд нь санах ойд хадгалагдах бөгөөд диск уруу эрэмбэлэгдсэн дарааллаар
	бичигддэг (<span class="quote">«<span class="quote">дараалуулсан мета-өгөгдлийн шинэчлэлтүүд</span>»</span>).
	Энэ нь мета-өгөгдлийн хүнд үйлдлүүдийн үед хэрэв эрт хийгдсэн шинэчлэлтүүд диск
	уруу бичигдээгүй санах ойд байж байхад нь сүүлд хийгдэх шинэчлэлтүүд тэдгээрийг
	<span class="quote">«<span class="quote">барьж</span>»</span> авдаг. Тэгэхээр сангийн хувьд хэлбэл түүнд хийгдэх
	бүх үйлдлүүд нь санах ойд шинэчлэлт диск уруу бичигдэхээс өмнө хийгддэг
	(өгөгдлийн блокууд нь мета-өгөгдлөөсөө түрүүлээд диск дээр байж байхгүйгээр
	өөрсдийн байрлалынхаа дагуу эрэмбэлэгддэг ).
	Хэрэв систем сүйрвэл энэ нь <span class="quote">«<span class="quote">бүртгэл урагшлуулахад</span>»</span> хүргэдэг:
	диск уруу гарах замаа олохгүй байгаа бүх үйлдлүүд хэзээ ч хийгдээгүй юм шиг
	байдаг. Файлын системийн бүрэн бүтэн төлөв хадгалагдаж 30-аас 60 секундын
	өмнөх төлөвт ордог. Хэрэглэгдэж байгаа эх үүсвэрүүдийг тэдгээрийн өөрсдийнх
	харгалзах битмапуудад: блокууд болон inode-уудад  байдаг шигээр  тэмдэглэхийг
	үүнд ашигласан алгоритм нь баталгаатай хангадаг. Сүйрэл болсны дараа
	зөвхөн гарсан эх үүсвэр суллан гаргалтын алдаа нь яг үнэндээ <span class="quote">«<span class="quote">чөлөөтэй</span>»</span>
	мөртлөө <span class="quote">«<span class="quote">ашиглагдаж байгаа</span>»</span> гэж тэмдэглэгдсэн эх үүсвэрүүд
	байдаг. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> энэ байдлыг таних бөгөөд ашиглагдаагүй байгаа эх
	үүсвэрүүдийг чөлөөлдөг. Сүйрлийн дараа файлын системийн бохир төлвийг авч үзэлгүйгээр
	хүчээр <code class="command">mount -f</code> тушаалаар холбох нь аюулгүй юм.
	Ашиглагдаагүй байж болзошгүй эх үүсвэрүүдийг чөлөөлөхдөө <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a>-г
	сүүлд нь ажиллуулах хэрэгтэй. Энэ нь <span class="emphasis"><em>ард ажиллах fsck</em></span>-ийн
	цаана байгаа санаа юм: системийг эхлүүлэх үед зөвхөн файлын системийн
	<span class="emphasis"><em>хормын зураг</em></span> бичигддэг.
	<code class="command">fsck</code>-г сүүлд нь ажиллуулж болно. Дараа нь бүх файлын
	системүүд <span class="quote">«<span class="quote">бохир</span>»</span> холбогдож системийн эхлэлт олон хэрэглэгчийн
	горимд үргэлжилдэг. Дараа нь ард ажиллах <code class="command">fsck</code>-үүд
	ашиглагдаагүй байгаа эх үүсвэрүүдийг чөлөөлөхөөр шаардлагатай байгаа бүх файлын
	системийн хувьд ажиллахаар төлөвлөгддөг. (Зөөлөн Шинэчлэлтүүд ашигладаггүй
	файлын системүүдэд ердийн нүүрэн дээр ажиллах <code class="command">fsck</code>
	хэрэгтэй хэвээр байна)</p><p>Давуу тал нь мета-өгөгдлийн үйлдлүүд нь асинхрон шинэчлэлтүүдтэй
	бараг л адил хурдан  байдаг (өөрөөр хэлбэл мета-өгөгдлийг хоёр дахин бичдэг
	<span class="emphasis"><em>бүртгэл хийлтээс</em></span> хурдан байдаг). Сул талууд нь
	төвөгтэй код (хэрэглэгчийн өгөгдлийн алдагдлын хувьд их мэдрэмтгий талбар дахь
	байж болох алдаануудын тэр өндөр эрсдэлийг хэлж байна) болон санах ойн илүү
	хэрэглээ юм. Мөн хэн нэгний хэрэглэж байсан хувийн тохиргоонууд ч бас байдаг.
	Сүйрэл болсны дараа файлын системийн төлөв <span class="quote">«<span class="quote">хуучин</span>»</span>
	юм шиг харагддаг. Стандарт синхрон хандлага  нь
	<code class="command">fsck</code>-ийн дараа зарим нэг тэг-урттай файлуудыг
	үлдээхэд хүргэсэн нөхцөлд тэдгээр файлууд нь Зөөлөн Шинэчлэлтүүдтэй файлын
	системийн үед огт байдаггүй бөгөөд учир нь мета-өгөгдөл болон файлын агуулгууд
	хэзээ ч диск уруу бичигдээгүй байдаг. Дискний зай нь магадгүй
	<code class="command">rm</code> ажиллуулснаас хэсэг хугацааны дараа диск уруу
	шинэчлэлтүүд  бичигдэх хүртэл сулардаггүй. Энэ нь бүх файлуудыг хоёр дахин
	хадгалахад хангалттай хүрэлцэхүйц хэмжээний чөлөөтэй зай байхгүй файлын систем
	дээр их хэмжээний өгөгдлийг суулгаж байх үед асуудлууд гарахад хүргэж болох юм.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configtuning-sysctl.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="configtuning-kernel-limits.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">12.12. sysctl(8) ашиглан тааруулах нь </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 12.14. Цөмийн хязгаарууд тохируулах нь</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>