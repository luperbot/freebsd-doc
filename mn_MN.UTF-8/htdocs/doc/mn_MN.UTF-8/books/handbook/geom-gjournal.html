<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>20.8. GEOM-ийн тусламжтай UFS тэмдэглэл</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="GEOM.html" title="Бүлэг 20. GEOM: Модульчлагдсан Диск Хувиргах Тогтолцоо" /><link rel="prev" href="geom-glabel.html" title="20.7. Дискний төхөөрөмжүүдийг хаяглах нь" /><link rel="next" href="filesystems.html" title="Бүлэг 21. Файлын системийн дэмжлэг" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">20.8. GEOM-ийн тусламжтай UFS тэмдэглэл</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="geom-glabel.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 20. GEOM: Модульчлагдсан Диск Хувиргах Тогтолцоо</th><td width="20%" align="right"> <a accesskey="n" href="filesystems.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="geom-gjournal"></a>20.8. GEOM-ийн тусламжтай UFS тэмдэглэл</h2></div></div></div><a id="idp84000464" class="indexterm"></a><a id="idp84001360" class="indexterm"></a><p>FreeBSD 7.0 хувилбараас эхлээд UFS journals буюу 
        тэмдэглэлийн боломж бүрдсэн билээ.
	Энэхүү шийдэл нь <acronym class="acronym">GEOM</acronym> дэд системийн
	тусламжтайгаар хийгдсэн бөгөөд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gjournal&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gjournal</span>(8)</span></a> хэрэгслийн
	тусламжтай хялбар тохируулж болдог.</p><p>Journaling буюу тэмдэглэх чадвар нь мета өгөгдөл болон 
        файлын бичилтүүд дискэнд зөвөөр хийгдэхээс өмнө дискний 
	бүрэн гүйцэд бичих үйлдлийг бүтээдэг өөрчлөлтүүдийн
	бүртгэл зэрэг файлын системийн шилжүүлгүүдийн бүртгэлийг 
	хадгалдаг. Файлын системийн бүрэн бус байдлаас
	хамгаалахын тулд файлын системийн шилжүүлгүүдийг дахин гүйцэтгэхийн
	тулд энэхүү шилжүүлгүүдийн бүртгэлийг дараа нь дахин
	ажиллуулж болдог.</p><p>Энэхүү арга нь файлын системийн бүрэн бус байдал болон өгөгдлийн
	алдагдлын эсрэг хамгаалах өөр нэг арга зам юм. Мета өгөгдлийн
	шинэчлэлүүд болон файлын системийн дүрс болох Хормын хувилбаруудыг
	хянаж мөрдүүлж байдаг Зөөлөн Шинэчлэлүүдээс ялгаатай нь бүртгэлийн
	файл нь энэ үйлдэлд тусгайлан зориулсан дискийн талбарт хадгалагддаг
        бөгөөд зарим тохиолдолд өөр диск дээр тэр чигээрээ хадгалагдаж болдог.</p><p>Өөр бусад файлын системийн тэмдэглэлийн шийдлүүдээс ялгаатай нь
	<code class="command">gjournal</code> арга нь блок дээр тулгуурласан бөгөөд
	файлын системийн хэсэг болж хийгдээгүй. Энэ нь <acronym class="acronym">GEOM</acronym>
	өргөтгөл юм.</p><p><code class="command">gjournal</code>-д зориулсан дэмжлэгийг идэвхжүүлэхийн
	тулд FreeBSD цөм нь 7.0 болон түүнээс хойшхи системүүд дээр анхдагчаар байдаг доор дурдсан
	тохируулгатай байх ёстой:</p><pre class="programlisting">options	UFS_GJOURNAL</pre><p>Хэрэв тэмдэглэл үүсгэгдсэн эзлэхүүнүүдийг ачаалж эхлэхэд холбох
      шаардлагатай бол <code class="filename">/boot/loader.conf</code> файлд
      дараах мөрийг нэмж цөмийн <code class="filename">geom_journal.ko</code>
      модулийг бас дуудах хэрэгтэй болно:</p><pre class="programlisting">geom_journal_load="YES"</pre><p>Мөн дараах мөрийг цөмийн тохиргооны файлд нэмж үүнийг өөрчлөн
      тохируулсан цөмд бас бүтээж болох юм:</p><pre class="programlisting">options	GEOM_JOURNAL</pre><p>Чөлөөтэй файлын систем дээр тэмдэглэл үүсгэхийн тулд
	одоо доор дурдсан алхмуудыг ашиглан хийж
	болно. Энэ жишээн дээр <code class="filename">da4</code> нь шинэ <acronym class="acronym">SCSI</acronym> диск
	байна:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal load</code></strong>
      <code class="prompt">#</code> <strong class="userinput"><code>gjournal label /dev/da4</code></strong></pre><p>Энэ үед <code class="filename">/dev/da4</code> төхөөрөмжийн цэг
	болон <code class="filename">/dev/da4.journal</code> төхөөрөмжийн цэг
	үүссэн байх ёстой. Одоо энэ төхөөрөмж дээр файлын системийг
	үүсгэж болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs -O 2 -J /dev/da4.journal</code></strong></pre><p>Энэ тушаал <acronym class="acronym">UFS</acronym>2
	файлын системийг тэмдэглэл идэвхжсэн төхөөрөмж дээр үүсгэх
	болно.</p><p>Төхөөрөмжийг хүссэн цэгтээ доор дурдсан тушаалаар
	<code class="command">mount</code> хийнэ:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/da4.journal /mnt</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хэд хэдэн зүсмэлүүдийн тухайд тэмдэглэл нь зүсмэл бүр
	дээр үүсгэгдэх болно. Жишээ нь хэрэв <code class="filename">ad4s1</code> болон <code class="filename">ad4s2</code> нь
	хоёулаа зүсмэл бол <code class="command">gjournal</code> нь
	<code class="filename">ad4s1.journal</code> болон <code class="filename">ad4s2.journal</code> үүсгэх болно.</p></div><p>Хурдан ажиллагаатай байхын тулд тэмдэглэлийг өөр диск дээр 
        байлгаж болно. Энэ тохиолдолд тэмдэглэл хангагч эсвэл
	хадгалалтын төхөөрөмж нь тэмдэглэлийг идэвхжүүлэхийн тулд
	уг төхөөрөмжийнхөө дараа жагсаагдах ёстой. <code class="command">tunefs</code>
	тушаал ашиглан тухайн байгаа файлын систем дээр тэмдэглэлийг
	идэвхжүүлж болдог. Гэхдээ файлын системийг өөрчлөхөөсөө өмнө
	нөөц <span class="emphasis"><em>үргэлж</em></span> хийж байх хэрэгтэй. Ихэнх тохиолдолд
	<code class="command">gjournal</code> нь яг тэмдэглэлийг үүсгэж
	чадаагүй бол амжилтгүй болох бөгөөд гэхдээ энэ нь
	<code class="command">tunefs</code>-ийг буруугаар ашигласнаас болоод
	үүссэн өгөгдлийн алдагдлаас хамгаалж чадахгүй юм.</p><p>FreeBSD системийн эхлүүлэх дискийг тэмдэглэх бас боломжтой байдаг.
      Үүний талаарх дэлгэрэнгүй зааврыг <a class="link" href="../../../../doc/mn_MN.UTF-8/articles/gjournal-desktop" target="_top">Ширээний PC дээр UFS тэмдэглэлийг
	хийх нь</a> гэсэн нийтлэлээс үзнэ үү.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="geom-glabel.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="GEOM.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="filesystems.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">20.7. Дискний төхөөрөмжүүдийг хаяглах нь </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> Бүлэг 21. Файлын системийн дэмжлэг</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>