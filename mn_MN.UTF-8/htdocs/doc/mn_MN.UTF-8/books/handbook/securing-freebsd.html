<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>15.3. FreeBSD-н аюулгүй байдлыг хангах нь</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="security.html" title="Бүлэг 15. Аюулгүй байдал" /><link rel="prev" href="security-intro.html" title="15.2. Танилцуулга" /><link rel="next" href="crypt.html" title="15.4. DES, Blowfish, MD5, SHA256, SHA512 болон Crypt" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">15.3. FreeBSD-н аюулгүй байдлыг хангах нь</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="security-intro.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 15. Аюулгүй байдал</th><td width="20%" align="right"> <a accesskey="n" href="crypt.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="securing-freebsd"></a>15.3. FreeBSD-н аюулгүй байдлыг хангах нь</h2></div></div></div><a id="idp79017936" class="indexterm"></a><div xmlns="" class="note"><h3 class="admontitle">Тушаалыг Протоколтой харьцуулахад (Command vs. Protocol): </h3><p xmlns="http://www.w3.org/1999/xhtml">Энэ баримтын туршид бид <span class="application">тод</span> текстээр
	програмыг <code class="command">monospaced</code> фонтоор тусгай тушаалуудыг
	тэмдэглэх болно. Протоколууд ердийн фонт ашиглах болно. Тэмдэглэгээний энэ
	ялгаа нь ssh зэргийн хувьд ашигтай, учир нь энэ ssh нь протоколоос гадна
	бас тушаал юм.</p></div><p>Үүнээс хойшх хэсгүүд нь түрүүчийн бүлгийн <a class="link" href="security-intro.html" title="15.2. Танилцуулга">
	сүүлийн хэсэг</a>т дурдсан таны FreeBSD системийг аюулгүй болгох аргуудыг
	авч үзнэ.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="securing-root-and-staff"></a>15.3.1. <code class="systemitem">root</code> бүртгэл болон staff бүртгэлүүдийг
	аюулгүй болгох</h3></div></div></div><a id="idp79031632" class="indexterm"></a><p>Эхлээд хэрэв та <code class="systemitem">root</code> бүртгэлийг аюулгүй болгоогүй
	бол staff бүртгэлүүдийг аюулгүй болгоход санаа зовсны хэрэггүй. Ихэнх системүүд
	<code class="systemitem">root</code> бүртгэлд нууц үг өгсөн байдаг. Таны эхний хийх
	зүйл бол нууц үг <span class="emphasis"><em>үргэлж</em></span> эвдэгдэж болно гэдгийг
	бодох хэрэгтэй. Энэ нь та нууц үгээ устгах хэрэгтэй гэсэн үг биш юм. Нууц үг нь
	машин уруу консол хандалт хийхэд үргэлж хэрэгтэй байдаг. Энэ нь юу гэсэн үг вэ
	гэхээр та нууц үгийг консолоос гадна эсвэл болж өгвөл бүр <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> тушаалтай
	ашиглаж болохоор хийх ёсгүй гэсэн үг юм. Жишээ нь
	<code class="command">telnet</code> эсвэл <code class="command">rlogin</code>-р хийгдэх
	шууд <code class="systemitem">root</code> нэвтрэлтүүдийг хаах pty-уудын тохиргоог insecure
	буюу аюултай гэж <code class="filename">/etc/ttys</code> файлд заасан эсэхийг шалгаарай.
	Хэрэв бусад нэвтрэх үйлчилгээнүүд болох <span class="application">sshd</span>
	зэргийг ашиглаж байгаа бол шууд <code class="systemitem">root</code> нэвтрэлтүүдийг
	бас хаасан эсэхийг шалгаарай. Та үүнийг <code class="filename">/etc/ssh/sshd_config</code>
	файлыг засварлан <code class="literal">PermitRootLogin</code> тохируулгыг
	<code class="literal">no</code> болгон зааж өгөөрэй. Хандах арга бүр —
	FTP зэрэг үйлчилгээнүүдээр ихэвчлэн эвдлэн ордог болохыг бодолцох хэрэгтэй.
	Шууд <code class="systemitem">root</code> нэвтрэлтүүд зөвхөн системийн консолоор хийгдэхэд
	зөвшөөрөгдөх ёстой.</p><a id="idp79043664" class="indexterm"></a><p>Мэдээж систем админы хувьд та <code class="systemitem">root</code>
	уруу орж чадаж байх ёстой болохоор бид хэдэн цоорхой үлдээдэг.
	Гэхдээ эдгээр цоорхойнууд нь нэмэлт нууц үг шалгаж ажилладаг байхаар
	бид хийдэг. <code class="systemitem">root</code>-г хандах боломжтой
	байлгах нэг арга нь тохирох staff бүртгэлүүдийг <code class="systemitem">wheel</code>
	бүлэгт (<code class="filename">/etc/group</code> файлд) нэмэх явдал юм.
	<code class="systemitem">wheel</code> бүлэгт оруулсан staff-ийн гишүүдэд
	<code class="systemitem">root</code> уруу <code class="command">su</code> хийхийг
	зөвшөөрдөг. Та staff-ийн гишүүдийг тэдгээрийн нууц үгийн оруулгад
	<code class="systemitem">wheel</code> бүлэгт оруулан байрлуулж  анхнаас нь
	<code class="systemitem">wheel</code> хандалт өгч хэзээ ч болохгүй.
	Staff бүртгэлүүдийг <code class="systemitem">staff</code> бүлэгт
	оруулах ёстой бөгөөд тэгээд дараа нь <code class="filename">/etc/group</code>
	файлын <code class="systemitem">wheel</code> бүлэгт нэмэх ёстой.
	Зөвхөн <code class="systemitem">root</code> хандалт заавал шаардлагатай
	тийм staff-ийн гишүүдийг <code class="systemitem">wheel</code> бүлэгт
	оруулах ёстой. Kerberos зэрэг жинхэнээ шалгуулж нэвтрэх аргыг ашиглаж
	байх тохиолдолд заавал <code class="systemitem">wheel</code> бүлэгт оруулалгүйгээр
	<code class="systemitem">root</code> бүртгэл дэх Kerberos-ийн
	<code class="filename">.k5login</code> файлыг ашиглаж
	<code class="systemitem">root</code> уруу <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ksu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ksu</span>(1)</span></a> хийхийг зөвшөөрөх
	бас боломжтой байдаг. Энэ нь магадгүй давуу шийдэл байж болох юм.
	Учир нь хэрэв халдагч таны нууц үгийн файлыг олж аван staff бүртгэлийг
	эвдлэн орж чадах бол <code class="systemitem">wheel</code> арга нь
	халдагчид <code class="systemitem">root</code>-г эвдэх боломжийг олгосон хэвээр
	байдаг юм. <code class="systemitem">wheel</code> аргатай байх нь огт аргагүй
	байхаас илүү боловч энэ нь заавал ч үгүй хамгийн аюулгүй сонголт бас биш
	юм.</p><p>Бүртгэлийг бүрэн түгжихийн тулд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> тушаалыг ашиглах
	хэрэгтэй:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw lock staff</code></strong></pre><p>Энэ нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a>-ийг оролцуулаад хэрэглэгчийг ямар ч
	арга ашиглан нэвтрэн орохыг хориглоно.</p><p>Бүртгэлүүдэд хандахыг хориглох өөр нэг арга бол
	нууцлагдсан нууц үгийг ганц <span class="quote">«<span class="quote"><code class="literal">*</code></span>»</span>
	тэмдэгтээр солих явдал юм. Энэ тэмдэгт нь нууцлагдсан
	нууц үгтэй хэзээ ч таарахгүй бөгөөд хэрэглэгчийн
	хандалтыг хаах болно. Жишээ нь доор дурдсан staff бүртгэлийг:</p><pre class="programlisting">foobar:R9DT/Fa1/LV9U:1000:1000::0:0:Foo Bar:/home/foobar:/usr/local/bin/tcsh</pre><p>Ийм болгон өөрчлөх хэрэгтэй:</p><pre class="programlisting">foobar:*:1000:1000::0:0:Foo Bar:/home/foobar:/usr/local/bin/tcsh</pre><p>Энэ нь <code class="systemitem">foobar</code> хэрэглэгчийг ердийн
	аргууд ашиглан нэвтрэн орох боломжийг хаадаг. Энэ хандалт
	хязгаарлах арга нь <span class="application">Kerberos</span> ашиглаж
	байгаа сайтууд эсвэл хэрэглэгч <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> ашиглан түлхүүрүүд
	тохируулсан тохиолдлууд зэрэгт ажилладаггүй.</p><p>Эдгээр аюулгүй байдлын арга замууд нь бас таныг илүү хязгаарласан
	серверээс арай бага хязгаарласан машин уруу нэвтрэн орж байна гэж тооцдог.
	Жишээ нь хэрэв таны гол хайрцаг чинь бүх л төрлийн серверүүд ажиллуулж байвал
	таны ажлын компьютер чинь ямрыг ч ажиллуулах ёсгүй. Өөрийн компьютерийг
	боломжийн аюулгүй болгохын тулд та ерөөсөө сервергүй болтол аль болох цөөн
	сервер ажиллуулах хэрэгтэй бөгөөд та нууц үгээр хамгаалагдсан дэлгэц хоослогч
	ажиллуулах хэрэгтэй. Мэдээж ажлын компьютер уруу физик хандалт өгвөл
	халдагч ямар ч төрлийн аюулгүй байдлыг та хангасан байлаа гэсэн эвдэж
	чадна. Энэ нь таны бодох ёстой асуудлын нэг юм. Гэхдээ эвдлэн оролтуудын
	олонхи нь алсаас сүлжээгээр дамжин таны ажлын компьютер эсвэл серверүүдэд
	физик хандалт байхгүй хүмүүсээс ирдэг гэдгийг та бас л бодолцох хэрэгтэй юм.</p><p>Kereberos мэтийг ашиглах нь танд staff бүртгэлийн нууц үгийг нэг газар
	өөрчлөх эсвэл хаах боломжийг олгох бөгөөд staff-ийн гишүүдийн бүртгэл байж болох
	бүх машинууд дээр нэн даруй бас үйлчилдэг. Хэрэв staff-ийн гишүүний бүртгэл
	эвдэгдсэн бол түүний нууц үгийг бүх машинууд дээр нэн даруй өөрчлөх тэр боломжийг
	дутуу үнэлэх ёсгүй юм. Тусдаа байгаа нууц үгүүдийг N машинууд дээр өөрчлөх нь
	зовлонтой байдаг. Мөн та Kerberos-д нууц үг дахин өгөлтийг ноогдуулж болох
	бөгөөд Kerberos тасалбарыг хэсэг хугацааны дараа дуусдагаар хийж болохоос
	гадна Kerberos систем нь тодорхой хугацааны (жишээ нь сар бүр) дараа
	хэрэглэгчийг шинэ нууц үг сонгохыг шаарддагаар бас тохируулж болдог.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79072848"></a>15.3.2. root-ажилладаг серверүүд болон suid/sgid хоёртын файлуудыг аюулгүй болгох</h3></div></div></div><a id="idp79073488" class="indexterm"></a><a id="idp79078608" class="indexterm"></a><a id="idp79079504" class="indexterm"></a><a id="idp79080400" class="indexterm"></a><a id="idp79081168" class="indexterm"></a><a id="idp79082064" class="indexterm"></a><a id="idp79082960" class="indexterm"></a><a id="idp79083856" class="indexterm"></a><p>Хянамгай сисадмин илүү ч үгүй дутуу ч үгүй зөвхөн өөрийн хэрэгтэй серверүүдийг
	ажиллуулдаг. Гуравдагч талын серверүүд ихэвчлэн хамгийн алдаатай байх
	хандлагатай гэдгийг санаж байх хэрэгтэй. Жишээ нь
	<span class="application">imapd</span> эсвэл
	<span class="application">popper</span> серверийн хуучин хувилбарыг
	ажиллуулна гэдэг нь универсал <code class="systemitem">root</code> тасалбарыг
	бүх дэлхийд өгч байна гэсэн үг юм. Та няхуур шалгаагүй сервер битгий ажиллуул.
	Олон серверүүд заавал <code class="systemitem">root</code> эрхээр ажиллах
	шаардлагагүй байдаг. Жишээ нь <span class="application">ntalk</span>,
	<span class="application">comsat</span>, болон
	<span class="application">finger</span> дэмонуудыг тусгай хэрэглэгчийн
	<em class="firstterm">sandboxes буюу хамгаалагдсан хязгаарлагдмал орчинд</em>
	ажиллуулах боломжтой байдаг. Хамгаалагдсан хязгаарлагдмал орчин нь
	асар их төвгүүдийг давж хийгээгүй л бол төгс биш бөгөөд өмнө дурдсан сонгины
	хандлагаар аюулгүй байдалд хандах нь хэвээр байна: хэрэв хэн нэгэн нь
	хамгаалагдсан хязгаарлагдмал орчинд ажиллаж байгаа серверт эвдэн орж
	чадсан ч гэсэн тэд хамгаалагдсан хязгаарлагдмал орчныг бас эвдэн гарах хэрэг
	болно. Аль болох олон давхаргыг халдагч эвдлэх ёстой болох тусам тэдгээрийн
	амжилттай болох нь улам багасах болно. Урьд нь root цоорхойнууд нь
	системийн үндсэн серверүүдээс авахуулаад бараг л бүх
	<code class="systemitem">root</code> ажилладаг сервер дээр олдож байсан.
	Хэрэв таны ажиллуулдаг машин уруу хүмүүс зөвхөн <span class="application">sshd</span>
	ашиглан нэвтэрдэг бөгөөд <span class="application">telnetd</span>,
	<span class="application">rshd</span> эсвэл
	<span class="application">rlogind</span> хэзээ ч ашиглан нэвтэрдэггүй
	бол эдгээр үйлчилгээнүүдийг хаагаарай!</p><p>Одоо FreeBSD нь <span class="application">ntalkd</span>,
	<span class="application">comsat</span>, болон
	<span class="application">finger</span> үйлчилгээнүүдийг хамгаалагдсан
	хязгаарлагдмал орчинд анхдагчаар ажиллуулдаг. Хамгаалагдсан хязгаарлагдмал
	орчинд ажиллуулж болох өөр нэг програм нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> юм.
	<code class="filename">/etc/defaults/rc.conf</code> нь
	<span class="application">named</span>-г хамгаалагдсан хязгаарлагдмал
	орчинд ажиллуулахад шаардлагатай нэмэлт өгөгдлүүдийг тайлбар хэлбэрээр агуулсан
	байдаг. Таны шинэ систем эсвэл байгаа системээ шинэчилж байгаагаас хамааран
	тэдгээр хамгаалагдсан хязгаарлагдмал орчинд ашиглагдах тусгай хэрэглэгчийн
	бүртгэлүүд суулгагдаагүй байж болох юм. Хянамгай сисадмин судалгаа хийж
	серверүүдийг хамгаалагдсан хязгаарлагдмал орчинд аль болох
	ажиллуулдаг.</p><a id="idp79110224" class="indexterm"></a><p>Хамгаалагдсан хязгаарлагдмал орчинд ерөнхийдөө ажилладаггүй хэд хэдэн
	серверүүд байдаг: <span class="application">sendmail</span>,
	<span class="application">popper</span>,
	<span class="application">imapd</span>, <span class="application">ftpd</span>,
	болон бусад. Эдгээрийн зарим шиг бас өөр серверүүд байдаг боловч
	тэдгээрийг суулгах нь таны хүсэж байгаагаас илүү (амархан байх гэсэн асуудал
	энд сөхөгдөж байна) их ажиллагаа шаардаж магадгүй юм. Та эдгээр серверүүдийг
	магадгүй <code class="systemitem">root</code> эрхээр ажиллуулж тэдгээрт учирч болох
	эвдрэн оролтуудыг илрүүлэх өөр арга замуудад найдах хэрэгтэй болж болох юм.</p><p>Системийн өөр нэг том боломжтой <code class="systemitem">root</code> цоорхойнууд
	бол системд суусан suid-root болон sgid хоёртын файлууд юм.
	<span class="application">rlogin</span> зэрэг эдгээрийн ихэнх нь
	<code class="filename">/bin</code>, <code class="filename">/sbin</code>,
	<code class="filename">/usr/bin</code>, эсвэл <code class="filename">/usr/sbin</code>
	сангуудад байрладаг. Юу ч 100% аюулгүй байдаггүй боловч системийн анхдагч
	suid болон sgid хоёртын файлууд нь боломжийн хэрээр аюулгүй гэж тооцогддог.
	Гэсэн хэдий ч эдгээр хоёртын файлуудад <code class="systemitem">root</code> цоорхойнууд
	үе үе олддог. <span class="application">xterm</span>-г (энэ нь ихэвчлэн suid
	байдаг) эмзэг болгосон <code class="systemitem">root</code> цоорхойнууд 1998 онд
	<code class="literal">Xlib</code>-д олджээ. Харамсахаасаа өмнө аюулгүй байж
	байсан нь дээр учраас хянамгай сисадмин зөвхөн staff ажиллуулах ёстойгоор
	staff зөвхөн хандаж чадах тусгай бүлэгт зөвшөөрч suid хоёртын файлуудыг
	хязгаарладаг бөгөөд хэн ч ашигладаггүй suid хоёртын файлуудыг ажиллуулж болохгүй
	болгодог (<code class="command">chmod 000</code>). Дэлгэцгүй серверт ер нь
	<span class="application">xterm</span> хоёртын файл хэрэгцээгүй юм.
	Sgid хоёртын файлууд нь бас л аюултай юм. Хэрэв халдагч  sgid-kmem
	хоёртын файлыг эвдэж чадвал тэр <code class="filename">/dev/kmem</code>-г
	уншиж чадах бөгөөд ингэснээр нууц үгтэй дурын бүртгэлийг эвдэн орж
	шифрлэсэн нууц үгийн файлыг уншихад хүргэдэг. Бас <code class="literal">kmem</code>
	бүлгийг эвдсэн халдагч secure буюу аюулгүй аргаар дамжин нэвтрэн орсон хэрэглэгчдийн
	ашиглаж байгаа pty-уудаар илгээгдсэн гарын товчнуудын даралтуудыг
	хянаж чаддаг. <code class="systemitem">tty</code> бүлгийг эвдсэн халдагч
	бараг дурын хэрэглэгчийн tty-д бичиж чадна. Хэрэв хэрэглэгч гар дуурайх боломж бүхий
	терминал програм эсвэл эмулятор ажиллуулж байгаа бол хэрэглэгчийн терминалыг
	тушаал буцаан харуулахаар болгодог өгөгдлийн урсгалыг халдагч үүсгэж дараа нь
	тэр тушаалыг тэр хэрэглэгчийн эрхээр ажиллуулдаг.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="secure-users"></a>15.3.3. Хэрэглэгчийн бүртгэлүүдийг аюулгүй болгох</h3></div></div></div><p>Хэрэглэгчийн бүртгэлүүдийг аюулгүй болгох нь ихэвчлэн хамгийн хэцүү
	байдаг. Та өөрийн staff-д ширүүн хандалтын хязгаарлалтууд оногдуулж
	тэдгээрийн нууц үгүүдийг <span class="quote">«<span class="quote">од болгож</span>»</span> болох боловч
	та ердийн хэрэглэгчийн бүртгэлүүдийг яг ингэж хязгаарлаж чадахгүй байж болох
	юм. Хэрэв та хангалттай хяналттай байх юм бол таны аз болж хэрэглэгчийн
	бүртгэлүүдийг зөвөөр аюулгүй болгож чадна. Хэрэв үгүй бол та тэдгээр
	бүртгэлүүдийг хянахдаа ердөө л илүү сонор сэрэмжтэй байх хэрэгтэй.
	ssh болон Kerberos-г хэрэглэгчийн бүртгэлүүдэд ашиглах нь
	нэмэлт удирдлага болон техникийн дэмжлэг шаардлагатайгаас болоод
	илүү асуудалтай байдаг боловч энэ нь шифрлэсэн нууц үгийн файлыг бодох юм
	бол маш сайн шийдэл хэвээр байдаг.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79159120"></a>15.3.4. Нууц үгийн файлыг аюулгүй болгох</h3></div></div></div><p>Цорын ганц итгэлтэй арга бол аль болох олон нууц үгүүдийг од болгон
	тэдгээр бүртгэлүүдэд хандахын тулд ssh эсвэл Kerberos ашигла.
	Шифрлэгдсэн нууц үгийн файлыг (<code class="filename">/etc/spwd.db</code>)
	зөвхөн <code class="systemitem">root</code> уншиж чаддаг боловч халдагч
	root-бичих хандалт олж авч чадаагүй ч гэсэн тэр файлд унших эрх олж авах
	боломжтой байж болох юм.</p><p>Таны аюулгүй байдлын скриптүүд нууц үгийн файлд хийгдсэн өөрчлөлтүүдийг
	үргэлж шалгаж тайлагнах шаардлагатай (доорх <a class="link" href="securing-freebsd.html#security-integrity" title="15.3.6. Файлын бүрэн бүтэн байдлыг шалгах нь: Хоёртын файлууд, Тохиргооны файлууд, гэх мэт.">Файлын бүрэн бүтэн байдлыг шалгах</a>
	хэсгийг үзнэ үү).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79162064"></a>15.3.5. Цөмийн гол хэсэг, түүхий төхөөрөмжүүд болон файлын системүүдийг аюулгүй болгох</h3></div></div></div><p>Хэрэв халдагч <code class="systemitem">root</code>-г эвдсэн бол тэр юуг ч хийж чадах
	боловч зарим ашиг сонирхлууд байдаг. Жишээ нь орчин үеийн ихэнх цөмүүдэд
	пакет шиншлэх төхөөрөмжийн драйвер бүтээгдсэн байдаг. FreeBSD-д энэ нь
	<code class="filename">bpf</code> төхөөрөмж гэж нэрлэгддэг. Халдагч
	ердөө буулган авсан машин дээрээ пакет шиншлэгчийг ажиллуулахыг оролддог.
	Та халдагчид энэ боломжийг өгөх хэрэггүй бөгөөд ихэнх системүүдэд
	<code class="filename">bpf</code> төхөөрөмжийг эмхэтгэн оруулах
	шаардлагагүй юм.</p><a id="idp79164496" class="indexterm"></a><p>Гэхдээ <code class="filename">bpf</code> төхөөрөмжийг хаасан ч гэсэн
	та <code class="filename">/dev/mem</code> болон <code class="filename">/dev/kmem</code>
	файлуудад бас санаа тавих хэрэгтэй. Энэнээс болоод халдагч түүхий (raw)
	төхөөрөмжүүдэд бичиж чадсан хэвээр байна. Мөн цөмийн бас нэг боломж болох
	модуль ачаалагч гэж нэрлэгддэг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a> байдаг. Самбаатай
	халдагч KLD модуль ашиглаад өөрийн <code class="filename">bpf</code>
	төхөөрөмж эсвэл бусад шиншлэх төхөөрөмжийг ажиллаж байгаа цөмд суулгадаг.
	Эдгээр асуудлуудаас зайлсхийхийн тулд та цөмийг илүү өндөр аюулгүй байдлын
	түвшинд ядаж аюулгүйн түвшин 1-д ажиллуулах хэрэгтэй.</p><p>Цөмийн аюулгүй байдлын түвшинг янз бүрийн аргаар тохируулж болно.
	Ажиллаж байгаа цөмийн аюулгүй байдлын түвшинг нэмэгдүүлэх хялбар алга бол
	цөмийн <code class="varname">kern.securelevel</code> хувьсагчийг
	<code class="command">sysctl</code> ашиглан өөрчлөх явдал юм:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl kern.securelevel=1</code></strong></pre><p>Анхдагчаар FreeBSD цөм аюулгүй байдлын -1 түвшинтэй ачаалдаг. Аюулгүй
	байдлын түвшинг администратор эсвэл эхлүүлэх скриптүүд дэх тохиргооноос болоод
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>-ээр өөрчлөөгүй л бол -1 хэвээр байх болно.
	<code class="filename">/etc/rc.conf</code> файлд <code class="varname">kern_securelevel_enable</code>
	хувьсагчийг <code class="literal">YES</code> ба <code class="varname">kern_securelevel</code> хувьсагчийн
	утгыг аюулгүй байдлын хүссэн түвшин рүүгээ болгон тохируулж системийг эхлүүлэх
	үед аюулгүй байдлын түвшинг нэмэгдүүлж болно.</p><p>Эхлүүлэх скриптүүд дөнгөж дуусаад байх үед FreeBSD системийн аюулгүй
	байдлын анхдагч түвшин -1 байдаг. Үүнийг <span class="quote">«<span class="quote">insecure mode</span>»</span>
	буюу <span class="quote">«<span class="quote">аюулгүй байдлыг хангаагүй горим</span>»</span> гэдэг бөгөөд учир нь
	хувиршгүй байлын тугуудыг болиулах, бүх төхөөрөмжөөс уншиж эсвэл тэдгээр рүү
	бичих гэх зэргийг хориогүй байдаг.</p><p>Аюулгүй байдлын түвшинг 1 эсвэл илүү өндөр утгаар тохируулсны дараа
	зөвхөн нэмэх болон хувиршгүй файлууд идэвхжиж тэдгээрийг болиулах боломжгүй
	болон түүхийн төхөөрөмжүүдэд хандахыг хориглодог. Илүү өндөр түвшингүүд
	бүр илүү олон үйлдлүүдийг хязгаарладаг. Төрөл бүрийн аюулгүй байдлын түвшнүүдийн
	үйлчилгээний талаарх дэлгэрэнгүй тайлбарыг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=security&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">security</span>(7)</span></a> гарын авлагын
	хуудсыг уншина уу.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Аюулгүйн түвшинг 1 эсвэл илүү өндөр түвшнээр дээшлүүлэх нь X11
	  (<code class="filename">/dev/io</code> руу хандах хандалт хаалттай байна) эсвэл
	  FreeBSD-ийн бүтээлтийг эхээс суулгах (процессын <code class="buildtarget">installworld</code>
	  хэсэг зарим файлуудын зөвхөн нэмэгдэх болон хувиршгүй тугуудыг түр зуур
	  өөрчлөхийг шаарддаг) болон бусад цөөн тохиолдлуудын хувьд асуудлууд гаргаж
	  болох юм. Заримдаа, жишээ нь X11-ийн хувьд ачаалах явцад <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a>-ийг
	  нэлээн эрт аюулгүйн түвшин бага байгаа үед нь ажиллуулж энэ асуудлыг тойрон
	  гарах боломжтой байж болох юм. Үүнтэй адил тойрон гарах арга замууд нь бүх
	  аюулгүй байдлын түвшингүүд эсвэл тэдгээрийн мөрдөж шаарддаг боломжит бүх
	  хязгаарлалтуудын хувьд боломжтой биш байж болох юм. Урьдчилаад бага зэрэг
	  төлөвлөх нь зүйтэй байдаг. Аюулгүйн түвшин бүр системийн хэрэглээг нэлээн
	  багасгах боломжтой байдаг учир тэдгээртэй хамааралтай хязгаарлалтуудыг
	  ойлгох нь чухал юм. Энэ нь бас анхдагч тохиргоог сонгохыг илүү хялбар болгож
	  санамсаргүй явдлаас урьдчилан сэргийлэх болно.</p></div><p>Хэрэв цөмийн аюулгүйн түвшин 1 эсвэл түүнээс илүү утгаар дээшлүүлэгдсэн
	бол <code class="literal">schg</code> тугийг чухал эхлүүлэх хоёртын файлууд, сангууд
	болон скрипт файлууд (өөрөөр хэлбэл аюулгүйн түвшин тохируулагдах хүртэлх ажиллах
	бүх файлууд) дээр тохируулах нь ашигтай байж болох юм. Энэ нь хэтэрхий хийгдэж
	байж болох бөгөөд аюулгүйн өндөр түвшинд ажиллаж байхад системийг шинэчлэх үйл
	явцыг илүү хэцүү болгодог. Арай бага хязгаарлалттай өөр нэг боломж нь
	системийг илүү өндөр аюулгүйн түвшинд ажиллуулж гэхдээ <code class="literal">schg</code>
	тугийг системийн файл болон сан бүр дээр тохируулахгүй байх явдал юм.
	Өөр нэг боломж нь <code class="filename">/</code> болон <code class="filename">/usr</code>
	санг зөвхөн уншигдахаар холбох явдал юм. Юу зөвшөөрөгдсөн байх дээр хэтэрхий
	чанга байх нь халдлага илрүүлэлтийн бүх чухал зүйлсийг хязгаарлаж болох юм.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security-integrity"></a>15.3.6. Файлын бүрэн бүтэн байдлыг шалгах нь: Хоёртын файлууд, Тохиргооны файлууд,
	гэх мэт.</h3></div></div></div><p>Тэр мөч ирэхэд, та зөвхөн системийн гол тохиргоо болон хяналтын файлуудаа
	ая тухын хүчин зүйл урьтахаас хамаагүй өмнө хамгаалж чадна.
	Жишээ нь	<code class="command">chflags</code> тушаал ашиглан
	<code class="filename">/</code> болон <code class="filename">/usr</code>
	сангууд дахь ихэнх файлуудад <code class="literal">schg</code> битийг тохируулах нь
	магадгүй үр ашиггүй байж болох бөгөөд учир нь ингэснээр файлуудыг хамгаалахын
	хажуугаар бас илрүүлэх цонхыг хаадаг юм. Таны аюулгүй байдлын сонгины
	сүүлийн давхарга нь илрүүлэлт бөгөөд энэ нь хамгийн чухал юм. Хэрэв та боломжит
	халдагчдыг илрүүлж чадахгүй л бол аюулгүй байдлын бусад үлдсэн асуудлуудын талаар
	бодоод ч бараг хэрэггүй юм (эсвэл бүр дэмий юм, аюулгүй байдлыг танд буруу ойлгуулахад
	хүргэдэг).  Сонгины ажлын хагас нь халдагчийг үйлдэл дээр нь
	барихын тулд түүнийг зогсоохын оронд харин удаашруулах явдал юм.</p><p>Халдлагыг илрүүлэх хамгийн сайн арга бол өөрчлөгдсөн, алга болсон, эсвэл
	гэнэтийн файлуудыг хайх явдал юм. Өөрчлөгдсөн файлуудыг хайх хамгийн сайн арга
	бол тэдгээрийг өөр (ихэвчлэн төвлөрсөн) хязгаарлагдмал хандалттай системээс хайх
	явдал юм. Өөрийн аюулгүй байдлын скриптийг нэмэлт аюулгүй байдал хангасан
	хязгаарлагдмал хандалттай систем дээр бичих нь тэдгээрийг боломжит халдагчдад
	бараг харагдуулдаггүй бөгөөд энэ нь чухал юм. Давуу талыг хамгийн ихээр авахын
	тулд ерөнхийдөө хязгаарлагдмал хандалттай хайрцагт бусад машинуудад хандах
	тэр ач холбогдолтой хандалтыг өгөх хэрэгтэй. Үүнийг ихэвчлэн бусад машинуудын зөвхөн
	унших NFS экспортыг хязгаарлагдмал хандалттай хайрцагт өгөх эсвэл ssh түлхүүр
	хослолыг тохируулж хязгаарлагдмал хандалттай хайрцгийг бусад машинууд уруу ssh
	хийхийг зөвшөөрөх  замаар хийдэг. Өөрийн сүлжээний урсгалыг тооцохгүй юм бол NFS нь
	хамгийн харагддаггүй арга юм — энэ нь клиент хайрцаг бүр дэх файлын
	системүүдийг монитор хийхийг танд зөвшөөрч бараг л илэрдэггүй. Хэрэв таны
	хязгаарлагдмал хандалттай сервер нь клиент хайрцагнууд уруу hub буюу салаалагч эсвэл
	чиглүүлэлтийн хэд хэдэн давхаргаар дамжин холбогдсон бол NFS арга нь хэтэрхий
	аюултай (сүлжээний хувьд) байж болох бөгөөд ssh-ийг ашиглах нь түүний гаргадаг
	аудит мөрийн замуудтай байсан ч гэсэн магадгүй илүү сонголт байж болох юм.</p><p>Монитор хийгдэх клиент систем уруу хандахад хамгийн багаар бодоход унших эрхийг
	та хязгаарлагдмал хандалттай хайрцагт өгсний дараа яг мониторыг хийхдээ скрипт бичих
	хэрэгтэй. Өгөгдсөн NFS холболтод <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=find&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">find</span>(1)</span></a> болон <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md5&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">md5</span>(1)</span></a> зэрэг
	энгийн системийн хэрэгслүүд ашиглан та скриптүүд бичиж болно. Клиент хайрцгийн
	файлуудад өдөрт нэг удаа физикээр md5 хийж <code class="filename">/etc</code> болон
	<code class="filename">/usr/local/etc</code> сангууд дахь хяналтын файлуудыг
	бүр илүү давтамжтайгаар шалгаж байх нь зүйтэй юм. Хязгаарлагдмал хандалттай
	машины зөв гэж тооцсон md5 мэдээлэлтэй харьцуулахад тарахгүй файлууд олдвол
	сисадминд үүнийг очиж шалгахыг хашгиран мэдээлэх ёстой. Аюулгүй байдлын сайн
	скрипт нь тохирохгүй suid хоёртын файлууд болон <code class="filename">/</code> болон
	<code class="filename">/usr</code> зэрэг системийн хуваалтууд дээрх шинээр үүссэн
	эсвэл устгагдсан файлуудыг бас шалгадаг.</p><p>NFS биш ssh-ийг ашиглаж байх үед аюулгүй байдлыг скрипт бичих нь бүр илүү хэцүү
	байдаг. Та скриптүүдийг харагдуулж ажиллуулахын тулд тэдгээрийг клиент хайрцаг уруу үндсэндээ
	<code class="command">scp</code> хийх хэрэгтэй бөгөөд аюулгүй байдлаа бодох юм бол
	та тэдгээр скриптүүдийн ашигладаг хоёртын файлуудыг (find гэх зэрэг) бас
	<code class="command">scp</code> хийх хэрэгтэй юм.
	Клиент хайрцаг дээрх <span class="application">ssh</span> клиент аль хэдийн
	эвдэгдсэн байж болох юм. Аюултай холболтоор ажиллаж байгаа бол ssh-г ашиглах нь
	шаардлагатай байж болох боловч бас түүнтэй ажиллахад бүр илүү хэцүү байдаг юм.</p><p>Аюулгүй байдлын сайн скрипт нь
	<code class="filename">.rhosts</code>, <code class="filename">.shosts</code>,
	<code class="filename">.ssh/authorized_keys</code> гэх зэрэг
	<code class="literal">MD5</code> шалгалтын хүрээний гадуур байх хэрэглэгч болон
	staff-ийн гишүүдийн хандалтын тохиргооны файлууд дахь өөрчлөлтүүдийг бас
	шалгадаг.</p><p>Хэрэв та асар их хэрэглэгчийн дискний зайтай бол тэдгээр хуваалтууд
	дээр байгаа файл бүр дээр ажиллахад хэт удаж болох юм. Энэ тохиолдолд suid
	хоёртын файлуудыг хаах холболтын тугуудыг зааж өгөх нь зүйтэй юм.
	<code class="literal">nosuid</code> нь таны хайж байгаа тэр тохируулга юм.
	Энэ давхаргын зорилго нь эвдлэн оролтын оролдлогуудыг амжилттай эсвэл
	амжилтгүй болсноос үл хамааран илрүүлэх явдал учраас ямар ч гэсэн ядаж
	долоо хоногт нэг удаа та тэдгээр файлуудыг магадгүй шалгаж байх
	хэрэгтэй юм.</p><p>Процессийн бүртгэл хийх нь (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=accton&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">accton</span>(8)</span></a>-г үзнэ үү) эвдлэн оролтын
	дараах үнэлэх арга замууд болон тусалж болох харьцангуй бага ачаалал бүхий
	үйлдлийн системийн боломж юм. Энэ нь эвдлэн орсны дараа файлыг хөндөөгүй хэвээр
	гэж үзэн халдагч систем уруу хэрхэн эвдлэн орсныг мөрдөхөд ялангуяа ашигтай
	байдаг.</p><p>Эцэст нь аюулгүй байдлын скриптүүд нь бүртгэлийн файлуудыг процесс хийх ёстой
	бөгөөд бүртгэлүүд өөрсдөө аль болох аюулгүй байдлаар үүсгэгдэх ёстой бөгөөд
	алсын syslog нь их ашигтай байж болох юм. Халдагч өөрийн мөрийг арилгахыг
	оролдох бөгөөд эхний эвдлэн оролтын арга болон хугацааг мөрдөхөд сисадмины хувьд
	бүртгэлийн файлууд нь маш чухал байдаг юм. Бүртгэлийн файлуудын байнгын бичлэгийг
	хадгалах нэг арга нь системийн консолыг сериал порт уруу ажиллуулж консолуудыг
	хянаж аюулгүй машин дээр мэдээллийг цуглуулах явдал юм.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79205200"></a>15.3.7. Параной буюу хэт зовнил</h3></div></div></div><p>Бага зэргийн хэт зовнил буруудахгүй. Дүрэм болгож тав тухтай байдлыг
	алдагдуулдаггүй дурын тооны аюулгүй байдлын боломжуудыг сисадмин нэмж болох бөгөөд
	зарим анхаарлыг бодолцон тав тухтай байдалд <span class="emphasis"><em>нөлөөлөх</em></span>
	аюулгүй байдлын боломжуудыг бас нэмж болох юм. Бүр илүү чухал нь аюулгүй
	байдлын администратор үүнийг бага зэрэг хольж хэрэглэж болно — хэрэв та энэ
	баримтад дурдсан заавруудыг үгчлэн ашиглавал энэ баримтыг уншсан ирээдүйн халдагчид
	та өөрийн арга замуудыг заан өгч байна гэсэн үг юм.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79206736"></a>15.3.8. Үйлчилгээг Зогсоох Халдлагууд</h3></div></div></div><a id="idp79207376" class="indexterm"></a><p>Энэ хэсэг нь Үйлчилгээг Зогсоох халдлагуудыг хамарна. DoS халдлага нь
	ихэвчлэн пакетийн халдлага байдаг. Таны сүлжээг дүүргэж байгаа орчин үеийн
	хууран мэхэлсэн пакетийн халдлагуудын эсрэг нэг их юм хийж чадахгүй ч гэсэн
	халдлагууд таны серверүүдийг унагахгүйн тулд та ерөнхийдөө хохирлыг
	хязгаарлаж болно:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Серверийн fork хийлтийг хязгаарлах.</p></li><li class="listitem"><p>Springboard буюу бусад халдлагуудыг хязгаарлах (ICMP хариу халдлагууд, ping
	    цацалт, гэх мэт.).</p></li><li class="listitem"><p>Цөмийн чиглүүлэлтийн кэшийг хэт ачаалах.</p></li></ol></div><p>Нийтлэг DoS халдлагын дүр зураг бол fork хийгдэж байгаа серверт
	халдаж түүнээр асар их хүүхэд процесс  үүсгүүлж эцсийн эцэст хост системийн
	хувьд санах ой, файлын тодорхойлогчууд гэх мэтүүд дуусч зогсоход
	хүргэдэг. <span class="application">inetd</span> (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>-г
	үзнэ үү) нь энэ төрлийн халдлагыг хязгаарлах хэд хэдэн тохируулгатай.
	Машиныг зогсоохоос хамгаалах боломжтой боловч ерөнхийдөө  үйлчилгээг
	халдлагад өртүүлэхгүй байх боломжгүйг энд тэмдэглэх нь зүйтэй юм.
	<span class="application">inetd</span> гарын авлагын хуудсыг
	анхааралтай уншиж <code class="option">-c</code>, <code class="option">-C</code>,
	болон <code class="option">-R</code> тохируулгуудад ялангуяа анхаарлаа
	хандуулаарай. Хууран мэхэлсэн IP халдлагууд нь
	<span class="application">inetd</span> дахь
	<code class="option">-C</code> тохируулгыг хуурах учраас ихэвчлэн тохируулгуудын
	хослолыг ашиглах шаардлагатай. Зарим дан серверүүд өөрийн
	fork хийгдэхийг хязгаарлах параметрүүдтэй байдаг.</p><p><span class="application">Sendmail</span> нь
	<code class="option">-OMaxDaemonChildren</code> тохируулгатай байдаг бөгөөд
	энэ нь <span class="application">Sendmail</span>-ийг ачаалал хязгаарлах тохируулгатай ажиллуулж ачааллын
	хоцрогдол үүсгэснээс хавьгүй илүүтэйгээр ажилладаг. Та
	<span class="application">Sendmail</span>-г ажиллуулахдаа
	хүссэн ачааллыг даахаар гэхдээ компьютерийг унагахаар их хэмжээний тоогоор
	<span class="application">Sendmail</span>-үүдийг ажиллуулах биш түүнээс
	багаар <code class="literal">MaxDaemonChildren</code> параметрийг
	хангалттай өндрөөр тавьж өгөх хэрэгтэй. Мөн <span class="application">sendmail</span>-ийг дарааллын
	горимоор (<code class="option">-ODeliveryMode=queued</code>) ажиллуулах
	болон дэмонг (<code class="command">sendmail -bd</code>) дараалалтай
	(<code class="command">sendmail -q15m</code>) ажиллуулдгаас тусад нь ажиллуулах нь
	чухал юм. Хэрэв та шууд илгээх горимыг хүсэж байгаа бол та дарааллыг
	<code class="option">-q1m</code> зэргээр бүр бага интервалаар ажиллуулах боломжтой
	боловч <code class="literal">MaxDaemonChildren</code> тохируулгыг боломжийн
	утгаар хоорондоо холбоотой амжилтгүйтлүүдээс <span class="application">sendmail</span>-ийг  хамгаалахын
	<span class="emphasis"><em>тулд</em></span> зааж өгсөн эсэхээ шалгаарай.</p><p><span class="application">Syslogd</span>-д шууд халдаж болох учраас аль болох
	<code class="option">-s</code> тохируулгыг эсвэл <code class="option">-a</code> тохируулгыг ашиглахыг
	танд зөвлөдөг.</p><p>Шууд халдлага хийгдэж болох <span class="application">TCP Wrapper</span>-ийн
	буцах identd зэрэг буцан холбогддог үйлчилгээнүүдийн хувьд та маш хянамгай байх
	хэрэгтэй. Ийм учраас та <span class="application">TCP Wrapper</span>-ийн
	буцах identd боломжийг ерөнхийдөө ашиглах хэрэггүй юм.</p><p>Та өөрийн захын чиглүүлэгчүүд дээрээ дотоод үйлчилгээнүүд уруугаа
	гаднаас хандуулахгүй болгож галт ханаар хамгаалах нь зүйтэй юм.
	Үүний цаадах санаа нь гаднаас ирж болзошгүй сүлжээ дүүргэх халдлагаас өөрийн LAN-г
	хамгаалах явдал бөгөөд сүлжээн дээр тулгуурласан <code class="systemitem">root</code>
	эрхийг буулгахаас дотоод үйлчилгээнүүдийг хамгаалах зүйлс тийм их биш юм.
	exclusive буюу хамааруулаагүй галт ханыг үргэлж тохируулах хэрэгтэй, өөрөөр хэлбэл
	<span class="quote">«<span class="quote">A, B, C, D болон M-Z портуудаас <span class="emphasis"><em>бусад</em></span>
	бүгдийг галт ханаар хамгаалах хэрэгтэй</span>»</span>. Ингэснээр та
	<span class="application">named</span> (хэрэв та бүсийн хувьд анхдагч бол),
	<span class="application">ntalkd</span>,
	<span class="application">sendmail</span> болон бусад Интернэтээс хандах
	үйлчилгээнүүд зэрэг зарим нэг тусгай үйлчилгээнүүдийн портуудаас бусад бүх бага
	дугаарын портуудыг галт ханаар хамгаалж чадах юм. Хэрэв та галт ханыг өөр
	аргаар — inclusive буюу хамааруулсан эсвэл зөвшөөрсөн галт хана маягаар
	тохируулахыг оролдвол хэд хэдэн үйлчилгээнүүдийг <span class="quote">«<span class="quote">хаахаа</span>»</span>
	мартаж магадгүй юм, эсвэл та шинэ дотоод үйлчилгээ нэмээд галт ханаа шинэчлэхээ
	мартаж болох юм. Та галт хана дээр зөвшөөрсөнтэй адил үйлдлийг нэвтрүүлэхийн
	тулд бага дугаарын портуудыг нээлгүйгээр өндөр дугаарын портуудыг онгойлгож
	болох юм. Мөн FreeBSD нь динамик холболтод хэрэглэгддэг портуудыг
	<code class="command">sysctl</code>-ийн төрөл бүрийн
	<code class="varname">net.inet.ip.portrange</code> хувьсагчуудаар
	(<code class="command">sysctl -a | fgrep portrange</code>)
	хянах боломжийг танд олгодгийг бас тэмдэглэх нь зүйтэй юм. Энэ нь бас таны
	галт ханын тохиргооны төвөгтэй байдлыг амарчилдаг юм. Жишээ нь
	та ердийн 4000-аас 5000 хүртэлх портууд болон 49152-оос 65535 хүртэлх
	өндөр дугаарын портуудыг ашигладаг бол 4000-аас бага бүгдийг
	өөрийн галт хана дээр хаах хэрэгтэй (мэдээж Интернэтээс ханддаг хэдэн тусгай портуудаас
	бусад).</p><p>Өөр нийтлэг DoS халдлагуудын нэг нь springboard халдлага юм
	— сервер, дотоод сүлжээ эсвэл бусад машиныг хариу үйлдэл хийхийг нь
	ихэсгэж хэт ачаалахад хүргэдэг халдлага юм. Ийм маягийн хамгийн нийтлэг
	халдлага нь <span class="emphasis"><em>ICMP ping broadcast буюу цацалт</em></span>
	юм. Халдагч таны LAN-ий цацах хаяг уруу илгээсэн ping пакетийнхаа
	эхлэл IP хаягийг халдахыг хүсэж байгаа машиныхаа IP хаягаар сольж хуурдаг.
	Хэрэв таны захын чиглүүлэгчүүд цацах хаяг уруу илгээх ping пакетуудыг
	зогсоохоор тохируулагдаагүй бол таны LAN хангалттай хариу үүсгэн хууран мэхэлсэн
	эхлэл хаяг уруу илгээж, ялангуяа халдагч хэдэн арван цацах хаягууд уруу өөр өөр
	хэдэн арван сүлжээнүүдээр дамжин энэ башир аргаа ашигласан үед, хохирогчийг
	дүүргэдэг. 120 мегабайтаас илүү хэмжээний цацах халдлага одоогоор
	хэмжигдээд байна. Энэ төрлийн хоёр дахь нийтлэг халдлага нь ICMP-ийн алдаа
	тайлагнах системийн эсрэг халдлага юм. ICMP алдааны мэдэгдэл үүсгэдэг
	пакетуудыг бүтээж халдагч серверийн орж ирж байгаа сүлжээг дүүргэж ингэснээр
	серверийг өөрийн гарах сүлжээг ICMP хариунуудаар дүүргэхэд хүргэдэг.
	Энэ төрлийн халдлага нь ялангуяа хэрэв сервер үүсгэж байгаа ICMP хариунуудаа
	хангалттай хурднаар шавхан гаргаж чадахгүй байгаа бол серверийг санах ойгүй болгож
	сүйрүүлж бас болох юм. <span class="application">sysctl</span>-ийн
	<code class="literal">net.inet.icmp.icmplim</code> хувьсагчийг ашиглан
	эдгээр халдлагуудыг хязгаарлах хэрэгтэй. Springboard төрлийн халдлагуудын
	сүүлийн гол ангилал нь udp цуурай үйлчилгээ зэрэг зарим дотоод
	<span class="application">inetd</span> үйлчилгээнүүдтэй холбоотой юм.
	Халдагч UDP пакетийг хууран мэхэлж A болон B сервер нь хоёулаа таны LAN-д байгаа
	тийм A серверийн цуурай порт дээрх эхлэл хаягаар болон  төгсгөл хаягийг B серверийн
	цуурай порт дээрх хаягаар сольдог. Уг хоёр сервер дараа нь энэ ганц пакетийг
	хоорондоо шидэлцдэг.  Эдгээр серверүүд болон тэдгээрийн LAN-г энэ маягаар
	халдагч хэдхэн пакетуудыг хатган оруулан хэт ачаалж чаддаг.
	Үүнтэй адил асуудлууд дотоод <span class="application">chargen</span> портод
	бас байдаг. Чадварлаг сисадмин эдгээр бүх дотоод inetd тест үйлчилгээнүүдийг
	хаадаг.</p><p>Хууран мэхэлсэн пакетийн халдлагуудыг цөмийн чиглүүлэлтийн кэшийг хэт ачаалахад
	хэрэглэж болдог. <code class="varname">net.inet.ip.rtexpire</code>,
	<code class="varname">rtminexpire</code>, болон <code class="varname">rtmaxcache</code>
	<code class="command">sysctl</code> параметрүүдийг үзнэ үү. Дурын эхлэл
	IP хаягийг ашигласан хууран мэхэлсэн пакетийн халдлага нь чиглүүлэлтийн хүснэгтэд түр зуур
	кэш хийгдсэн чиглүүлэлтийг цөмөөр  үүсгүүлэхэд хүргэдэг бөгөөд энэ нь
	<code class="command">netstat -rna | fgrep W3</code> тушаалаар харагддаг.
	Эдгээр чиглүүлэлтүүд нь ихэвчлэн 1600 секунд орчим хугацааны дотор дуусдаг.
	Хэрэв цөм кэш хийгдсэн чиглүүлэлтийн хүснэгт хэтэрхий том болсныг илрүүлэх юм бол
	<code class="varname">rtexpire</code> динамикаар багасгадаг боловч
	<code class="varname">rtminexpire</code>-с бага болтол хэзээ ч багасгадаггүй.
	Хоёр асуудал байдаг:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Бага ачаалагдсан сервер гэнэт халдлагад өртөхөд цөм хангалттай хурдан
		хариу үйлдэл хийдэггүй.</p></li><li class="listitem"><p><code class="varname">rtminexpire</code> хувьсагч нь
		үргэлжилсэн халдлагыг цөм дааж чадахаар хангалттай бага байдаггүй.</p></li></ol></div><p>Хэрэв таны серверүүд Интернэтэд T3 эсвэл илүү хурдаар холбогдсон бол
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>-оор
	<code class="varname">rtexpire</code> болон <code class="varname">rtminexpire</code>
	хувьсагчуудыг хоёуланг гараар дарж бичихдээ хянамгай байх хэрэгтэй.
	Аль ч параметрийг (машиныг сүйрүүлэхийг та хүсээгүй л бол) хэзээ ч битгий
	0 болгоорой. Эдгээр параметрүүдийг хоёуланг нь 2 секунд болгох нь
	чиглүүлэлтийн хүснэгтийг халдлагаас хамгаалахад хангалттай байх ёстой.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79254096"></a>15.3.9. Kerberos болон SSH-тэй холбоотой хандалтын асуудлууд</h3></div></div></div><a id="idp79254736" class="indexterm"></a><p>Хэрэв та Kerberos болон ssh-г хоёуланг ашиглахаар бол цөөн хэдэн асуудлуудыг
	дурдах хэрэгтэй. Kerberos 5 нь жинхэнийг шалгах маш сайн нэвтрэлтийн протокол
	боловч түүнийг ашигласан <span class="application">telnet</span> болон
	<span class="application">rlogin</span>-д байдаг алдаанууд нь энэ хоёр програмыг
	хоёртын урсгалтай ажиллахад тохиромжгүй болгодог. Мөн <code class="option">-x</code>
	тохируулгыг ашиглахгүй л бол анхдагчаар Kerberos нь сессийг шифрлэдэггүй.
	<span class="application">ssh</span> нь бүгдийг шифрлэдэг.</p><p>Ssh нь анхдагчаар шифрлэсэн түлхүүрүүдээ дамжуулдгаас бусад бүх л талаараа зэгсэн
	сайн ажилладаг. Энэ нь юу гэсэн үг вэ гэхээр та хэрэв системийн бусад хэсэгт хандах боломж
	олгодог түлхүүрүүд бүхий аюулгүй ажлын компьютертай бөгөөд та аюултай машин уруу ssh
	хийвэл таны түлхүүрүүд ашиглагдах боломжтой гэсэн үг юм. Яг түлхүүрүүд нь өөрсдөө
	ил гардаггүй боловч ssh нь таны нэвтэрсэн хугацааны туршид зориулж дамжуулах порт
	суулгадаг бөгөөд хэрэв халдагч аюулгүй машин дээрх <code class="systemitem">root</code>-г
	эвдсэн бол тэрхүү портыг таны түлхүүрүүдийг ашиглахын тулд хэрэглэн  таны түлхүүрээр
	тайлагдах өөр бусад машинуудад хандах боломжийг олж авах боломжтой юм.</p><p>Бид staff нэвтрэлтүүдийн хувьд аль болох ssh-г Kerberos-той цуг ашиглахыг
	зөвлөдөг. <span class="application">Ssh</span> нь Kerberos-ийн дэмжлэгтэй
	эмхэтгэгдэж болдог. Энэ нь ил гарсан байж болзошгүй ssh түлхүүрүүдэд
	найдах таны найдварыг багасгахын хамт нууц үгүүдийг Kerberos-оор хамгаалдаг.
	Ssh түлхүүрүүд нь аюулгүй машинуудын автоматчилагдсан ажлуудад (Kerberos-оор
	хийхэд таарахгүй) зөвхөн хэрэглэгдэх ёстой. Мөн бид таныг ssh-ийн тохиргоондоо
	key-forwarding буюу түлхүүр дамжуулалтыг болиулах эсвэл ssh-ийн
	<code class="filename">authorized_keys</code> файлдаа зөвхөн тусгайлсан
	машинуудаас нэвтрэхэд түлхүүрийг ашиглаж болохоор болгож зөвшөөрдөг
	<code class="literal">from=IP/DOMAIN</code> тохируулгыг ашиглахыг зөвлөдөг.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="security-intro.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="security.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="crypt.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">15.2. Танилцуулга </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 15.4. DES, Blowfish, MD5, SHA256, SHA512 болон Crypt</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>