<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>29.5. Гэмтэл саатлыг арилгах нь</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="mail.html" title="Бүлэг 29. Цахим Шуудан" /><link rel="prev" href="mail-changingmta.html" title="29.4. Өөрийн Захидал Дамжуулах Агентийг Солих нь" /><link rel="next" href="mail-advanced.html" title="29.6. Дээд түвшний сэдвүүд" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">29.5. Гэмтэл саатлыг арилгах нь</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mail-changingmta.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 29. Цахим Шуудан</th><td width="20%" align="right"> <a accesskey="n" href="mail-advanced.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-trouble"></a>29.5. Гэмтэл саатлыг арилгах нь</h2></div></div></div><a id="idp89162064" class="indexterm"></a><div class="qandaset"><a id="idp89171536"></a><dl><dt>29.5.1. <a href="mail-trouble.html#idp89171792">Яагаад би өөрийн сүлжээнд байгаа хостуудын хувьд FQDN-г хэрэглэх ёстой вэ?</a></dt><dt>29.5.2. <a href="mail-trouble.html#idp89182416">sendmail захидал өөр дээр минь тойроод ирж байна гээд байна</a></dt><dt>29.5.3. <a href="mail-trouble.html#idp89187792">Утсаар залгаж холбогддог PPP хост дээр захидлын серверийг хэрхэн
ажиллуулах вэ?</a></dt><dt>29.5.4. <a href="mail-trouble.html#idp89207120">Бусад хостоос захидал явуулахад яагаад
Relaying Denied гэсэн алдаа байнга гараад байна вэ?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp89171792"></a><a id="idp89172048"></a><p><strong>29.5.1.</strong></p></td><td align="left" valign="top"><p>Яагаад би өөрийн сүлжээнд байгаа хостуудын хувьд FQDN-г хэрэглэх ёстой вэ?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Үнэндээ тухайн хост өөр домэйнд байгаа
болохыг та анзаарах байх; жишээ нь, хэрэв та өөрөө
<code class="systemitem">foo.bar.edu</code> домэйнд байгаа бөгөөд <code class="systemitem">bar.edu</code> домэйнд байгаа <code class="systemitem">mumble</code> хост руу
хандах хүсэлтэй бол түүнийг зүгээр <code class="systemitem">mumble</code> гэхийн оронд
<code class="systemitem">mumble.bar.edu</code> гэсэн fully-qualified domain name буюу бүрэн-баталгаажсан
домэйн нэрээр нь заах хэрэгтэй.</p><p>Урьд нь, BSD BIND<a id="idp89176016" class="indexterm"></a>
тайлагчийн хувьд дээрх шиг хэрэглэж болдог байсан.
Гэвч FreeBSD-тэй хамт ирдэг <span class="application">BIND</span>-н одоогийн хувилбар дээр
өөрийн оршин байгаа домэйноос бусад бүрэн баталгаажаагүй домэйн нэрийн хувьд
анхдагч товчилсон нэрүүдийг хэрэглэж болохгүй болсон. Тиймээс баталгаажаагүй
<code class="systemitem">mumble</code> гэсэн хостыг эсвэл <code class="systemitem">mumble.foo.bar.edu</code> гэж ойлгоно,
эсвэл эх домэйнд хайх болно.</p><p>Хайлт цааш <code class="systemitem">mumble.bar.edu</code>, ба
<code class="systemitem">mumble.edu</code> болж үргэлжлэх бөгөөд энэ нь санаснаас шал өөр
зүйл болон хувирна. Үүнийг яагаад буруу үйлдэл, бүр аюулгүй байдлын цоорхой
гэж тооцох болсныг RFC 1535-с олж үзээрэй.</p><p>Дээрх байдлаас гарахын тулд, өөрийн <code class="filename">/etc/resolv.conf</code> файл дотор:</p><pre class="programlisting">search foo.bar.edu bar.edu</pre><p>гэсэн мөрийг:</p><pre class="programlisting">domain foo.bar.edu</pre><p>мөрийн оронд бичих хэрэгтэй. Гэхдээ, хайлт хийх дэс дараалал нь
RFC 1535-д заасны дагуу <span class="quote">«<span class="quote">дотоод болон гадаад удирдлагын хязгаар</span>»</span>ыг
давах ёсгүйг анхаараарай.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp89182416"></a><a id="idp89182672"></a><p><strong>29.5.2.</strong></p></td><td align="left" valign="top"><p><span class="application">sendmail</span> <span class="errorname">захидал өөр дээр минь тойроод ирж байна</span> гээд байна</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Энэ асуултанд <span class="application">sendmail</span>-н FAQ дараах байдалтай хариулсан
байгаа:</p><pre class="programlisting">I'm getting these error messages:

553 MX list for domain.net points back to relay.domain.net
554 &lt;user@domain.net&gt;... Local configuration error

How can I solve this problem?

You have asked mail to the domain (e.g., domain.net) to be
forwarded to a specific host (in this case, relay.domain.net)
by using an MX record, but the relay machine does not recognize
itself as domain.net. Add domain.net to /etc/mail/local-host-names
[known as /etc/sendmail.cw prior to version 8.10]
(if you are using FEATURE(use_cw_file)) or add <span class="quote">«<span class="quote">Cw domain.net</span>»</span>
to /etc/mail/sendmail.cf.</pre><p><span class="application">sendmail</span>-н FAQ-г <code class="uri"><a class="uri" href="http://www.sendmail.org/faq/" target="_top">http://www.sendmail.org/faq/</a></code> хаягаар
орж үзэж болох ба хэрэв та захидлын серверийнхээ тохиргоогоор нилээд
<span class="quote">«<span class="quote">оролдох</span>»</span> бол эхлээд үүнийг уншихыг зөвлөж байна.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp89187792"></a><a id="idp89188048"></a><p><strong>29.5.3.</strong></p></td><td align="left" valign="top"><p>Утсаар залгаж холбогддог PPP хост дээр захидлын серверийг хэрхэн
ажиллуулах вэ?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Та LAN-д байгаа FreeBSD машиныг Интернэтэд холбох хүсэлтэй байна.
Энэ FreeBSD машин тухайн LAN-ий хувьд захидлын гарц байх болно. PPP холболт бол тусгайлан
бий болгосон зориулагдсан холболт биш юм.</p><p>Үүний тулд хоёр арга байна. Нэг арга нь UUCP<a id="idp89189712" class="indexterm"></a> ашиглах юм.</p><p>Нөгөө арга нь таны домэйны хувьд хоёрдогч
MX<a id="idp89190736" class="indexterm"></a> үйлчилгээг
үзүүлэх байнгын холболттой Интернэт сервертэй болох явдал юм.
Жишээлбэл, хэрэв танай байгууллагын
домэйн нэр <code class="systemitem">example.com</code> бөгөөд танай Интернэтийн үйлчилгээ
үзүүлэгч танай домэйны хувьд хоёрдогч MX үйлчилгээг үзүүлэхээр
<code class="systemitem">example.net</code> домэйныг дараах байдалтай тохируулжээ:</p><pre class="programlisting">example.com.          MX        10      example.com.
                      MX        20      example.net.</pre><p>Зөвхөн ганц хост эцсийн захидал хүлээн авагч байх ёстой
(<code class="systemitem">example.com</code> хостын
<code class="filename">/etc/mail/sendmail.cf</code> файлд <code class="literal">Cw example.com</code>-г нэмнэ).</p><p>Захиа явуулах гэж байгаа <code class="command">sendmail</code> захидлыг явуулахаар
оролдох үед эхлээд модем холбоосоор тантай (<code class="systemitem">example.com</code>)
холбогдохыг оролдоно. Та Интернэтэд холбогдоогүй байгаа учраас
ихэнх тохиолдолд тантай холбогдож чадахгүй. Энэ тохиолдолд,
<span class="application">sendmail</span> автоматаар хоёрдогч MX сервер рүү, өөрөөр хэлбэл
танай Интернэтийн үйлчилгээ үзүүлэгчид (<code class="systemitem">example.net</code>) илгээх болно.
Хоёрдогч MX сервер танай сервертэй холбогдохыг тогтмол оролдох
ба ийм замаар анхдагч MX хост руу (<code class="systemitem">example.com</code>) захидлыг хүргэх
болно.</p><p>Та дор үзүүлсэнтэй төстэй нэвтрэх скриптийг хэрэглэхийг хүсэж
болзошгүй:</p><pre class="programlisting">#!/bin/sh
# Put me in /usr/local/bin/pppmyisp
( sleep 60 ; /usr/sbin/sendmail -q ) &amp;
/usr/sbin/ppp -direct pppmyisp</pre><p>Хэрэв та хэрэглэгчийн хувьд тусдаа нэвтрэх скрипт
үүсгэх гэж байгаа бол дээрх скрипт дээр байгаагийн оронд
<code class="command">sendmail -qRexample.com</code>-г хэрэглэж болох юм. Энэ нь
таны захидлын дараалалд байгаа <code class="systemitem">example.com</code>-д очих
бүх захидлыг тэр дор нь боловсруулахыг шаардана.</p><p>Байдлыг хэрхэн цааш сайжруулахыг дор үзнэ үү:</p><p><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isp" target="_top">FreeBSD Интернетийн үйлчилгээ үзүүлэгчийн захидлын жагсаалт</a>-с хулгайлсан зурвас.</p><pre class="programlisting">&gt; we provide the secondary MX for a customer. The customer connects to
&gt; our services several times a day automatically to get the mails to
&gt; his primary MX (We do not call his site when a mail for his domains
&gt; arrived). Our sendmail sends the mailqueue every 30 minutes. At the
&gt; moment he has to stay 30 minutes online to be sure that all mail is
&gt; gone to the primary MX.
&gt;
&gt; Is there a command that would initiate sendmail to send all the mails
&gt; now? The user has not root-privileges on our machine of course.

In the <span class="quote">«<span class="quote">privacy flags</span>»</span> section of sendmail.cf, there is a
definition Opgoaway,restrictqrun

Remove restrictqrun to allow non-root users to start the queue processing.
You might also like to rearrange the MXs. We are the 1st MX for our
customers like this, and we have defined:

# If we are the best MX for a host, try directly instead of generating
# local config error.
OwTrue

That way a remote site will deliver straight to you, without trying
the customer connection.  You then send to your customer.  Only works for
<span class="quote">«<span class="quote">hosts</span>»</span>, so you need to get your customer to name their mail
machine <span class="quote">«<span class="quote">customer.com</span>»</span> as well as
<span class="quote">«<span class="quote">hostname.customer.com</span>»</span> in the DNS.  Just put an A record in
the DNS for <span class="quote">«<span class="quote">customer.com</span>»</span>.</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp89207120"></a><a id="idp89207504"></a><p><strong>29.5.4.</strong></p></td><td align="left" valign="top"><p>Бусад хостоос захидал явуулахад яагаад
<span class="errorname">Relaying Denied</span> гэсэн алдаа байнга гараад байна вэ?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>FreeBSD-н анхдагч суулгацад <span class="application">sendmail</span>-г
зөвхөн ажиллаж байгаа хостоосоо захидал илгээдэг байхаар
тохируулсан байдаг. Жишээ нь,  хэрэв нэг <acronym class="acronym">POP</acronym> сервер байгаа бол,
хэрэглэгчид сургууль, ажил, эсвэл бусад алсын байршлаас захидлаа шалгах
боломжтой байх болно. Гэвч гаднаас захидал илгээж чадахгүй хэвээр байх
болно. Ихэвчлэн, оролдого хийснээс хэдэн хормын дараа,
<span class="application">MAILER-DAEMON</span> <span class="errorname">5.7 Relaying Denied</span> гэсэн алдааны мэдээлэлтэй
захидлыг илгээх болно.</p><p>Энэ байдлаас гарах хэд хэдэн зам байна.
Хамгийн энгийн арга бол өөрийн ISP-н хаягийг <code class="filename">/etc/mail/relay-domains</code>-д
байгаа өртөөлөх (дамжуулах) домэйнуудын файлд бичих хэрэгтэй. Үүнийг хийх амархан
аргыг үзүүлэв:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "your.isp.example.com" &gt; /etc/mail/relay-domains</code></strong></pre><p>Энэ файлыг үүсгэсэн эсвэл зассаны дараа,
<span class="application">sendmail</span>-г дахин эхлүүлэх хэрэгтэй. Хэрэв та
сервер хариуцагч байгаад, захидлыг дотооддоо явуулах хүсэлгүй, эсвэл
өөр машин дээрээс эсвэл бүр өөр ISP-с хулганы товч дараад л хийчих хялбар
систем ашиглах хүсэлтэй байгаа бол энэ арга яг тохирно.
Энэ арга ганцхан эсвэл хоёрхон захидлын бүртгэл үүсгэсэн тохиолдолд мөн
тус болно. Хэрэв дээрх файлд олон тооны хаяг нэмэх шаардлагатай бол,
зүгээр өөрийн дуртай засварлагч програмаар нээгээд домэйнуудаа
мөр болгонд нэг байхаар нэмж бичих хэрэгтэй:</p><pre class="programlisting">your.isp.example.com
other.isp.example.net
users-isp.example.org
www.example.org</pre><p>Одоо, энэ жагсаалтад (хэрэглэгч таны систем дээр бүртгэлтэй
гэсэн нөхцөлтэйгөөр) байгаа ямар ч хостоос,
таны системээр дамжуулан явуулсан захидал амжилттай явах болно.
Энэ бол хэрэглэгчиддээ таны системээр дамжуулан SPAM явуулах
боломжийг олголгүйгээр, таны системээс алсаас захидал
илгээх боломжийг олгох үнэхээр сайн арга юм.</p></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mail-changingmta.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="mail.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="mail-advanced.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">29.4. Өөрийн Захидал Дамжуулах Агентийг Солих нь </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 29.6. Дээд түвшний сэдвүүд</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>