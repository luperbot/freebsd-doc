<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>19.16. Дискний хуваалтуудыг шифрлэх нь</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="disks.html" title="Бүлэг 19. Хадгалалт" /><link rel="prev" href="quotas.html" title="19.15. Файлын системийн ноогдлууд" /><link rel="next" href="swap-encrypting.html" title="19.17. Swap зайг шифрлэх" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">19.16. Дискний хуваалтуудыг шифрлэх нь</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="quotas.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 19. Хадгалалт</th><td width="20%" align="right"> <a accesskey="n" href="swap-encrypting.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-encrypting"></a>19.16. Дискний хуваалтуудыг шифрлэх нь</h2></div><div><span class="authorgroup">Хувь нэмэр болгон оруулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Лаки</span> <span class="surname">Грийн</span></span>. </span></div></div></div><a id="idp82987856" class="indexterm"></a><p>FreeBSD нь өгөгдөлд зөвшөөрөгдөөгүй хандах хандалтын эсрэг
	маш сайн шууд хамгаалалтуудыг санал болгодог. Файлын зөвшөөрлүүд болон
	Mandatory Access Control (MAC) буюу Албадмал Хандалт Хяналт
	(<a class="xref" href="mac.html" title="Бүлэг 17. Mandatory Access Control буюу Албадмал Хандалтын хяналт">Бүлэг 17, <em>Mandatory Access Control буюу Албадмал Хандалтын хяналт</em></a>-г үзнэ үү) нь компьютер ассан, үйлдлийн систем
	идэвхтэй байх үед зөвшөөрөлгүй гуравдагч нөхдүүдийг өгөгдөлд хандахаас
	хамгаалахад тусалдаг. Гэхдээ хэрэв халдагч компьютерт физик хандалт олж аван
	компьютерийн хатуу хөтчийг өөр систем уруу зөөн эмзэг өгөгдлийг хуулж шинжилгээ хийж чадах
	бол үйлдлийн системийн мөрдүүлдэг зөвшөөрлүүд нь хамааралгүй болох юм.</p><p>Халдагч хэрхэн хатуу диск эсвэл унтраасан компьютерийг эзэмшсэнээс үл хамаарч
	FreeBSD дээрх <span class="application">GEOM Based Disk Encryption (gbde)</span>
	буюу GEOM дээр тулгуурласан дискний шифрлэлт болон <code class="command">geli</code>
	криптограф дэд системүүд нь компьютерийн файлын системүүд дээрх өгөгдлийг
	бүр чухал эх үүсвэрүүд бүхий, зорилгодоо хүрэхээр ихээхэн чармайсан халдагчдаас
	хамгаалж чадах юм. Зөвхөн тухайн файл бүрийг шифрлэдэг ярвигтай шифрлэлтийн
	аргуудаас ялгаатай нь <code class="command">gbde</code> болон <code class="command">geli</code>
	нь бүх файлын системүүдийг харагдаж мэдэгдэхгүйгээр шифрлэдэг. Хатуу дискний
	хавтгайд цэвэр текст хэзээ ч бичигддэггүй.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82991568"></a>19.16.1. <span class="application">gbde</span>-ээр диск шифрлэх</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong><code class="systemitem">root</code> болно</strong></p><p><span class="application">gbde</span>-г тохируулахад супер хэрэглэгчийн
		эрхүүдийг шаарддаг.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su -</code></strong>
Password:</pre></li><li class="step"><p class="title"><strong>Цөмийн тохиргооны файлдаа <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gbde</span>(4)</span></a> дэмжлэгийг нэмнэ</strong></p><p>Дараах мөрийг цөмийн тохиргооны файлдаа нэмнэ:</p><p><code class="literal">options GEOM_BDE</code></p><p>Цөмөө <a class="xref" href="kernelconfig.html" title="Бүлэг 9. FreeBSD цөмийг тохируулах нь">Бүлэг 9, <em>FreeBSD цөмийг тохируулах нь</em></a>-д тайлбарласны дагуу дахин бүтээнэ.</p><p>Шинэ цөм уруугаа дахин ачаална.</p></li><li class="step"><p>Цөмийг дахин бүтээхээс өөр нэг арга нь <code class="command">kldload</code>
		ашиглаж <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gbde</span>(4)</span></a>-г ачаалах явдал юм:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload geom_bde</code></strong></pre></li></ol></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83010512"></a>19.16.1.1. Шифрлэгдсэн хатуу хөтчүүдийг бэлдэх нь</h4></div></div></div><p>Дараах жишээ нь таныг өөрийн систем уруу шинэ хатуу хөтөч нэмж
	ганц шифрлэгдсэн хуваалтыг агуулна гэж тооцдог. Энэ хуваалт нь
	<code class="filename">/private</code> гэж холбогдох болно.
	<span class="application">gbde</span> нь
	<code class="filename">/home</code> болон <code class="filename">/var/mail</code>-г
	бас шифрлэхэд ашиглагддаг боловч энэ нь энэ танилцуулгын хүрээнээс хальж
	илүү төвөгтэй заавруудыг шаарддаг.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Шинэ хатуу хөтчийг нэмнэ</strong></p><p>Шинэ хөтчийг систем уруу <a class="xref" href="disks-adding.html" title="19.3. Диск нэмэх">Хэсэг 19.3, «Диск нэмэх»</a>-д тайлбарласны дагуу нэмнэ. Энэ жишээн
		дээр шинэ хатуу хөтчийн хуваалт <code class="filename">/dev/ad4s1c</code>
		гэж нэмэгдсэн байгаа. <code class="filename">/dev/ad0s1*</code>
		төхөөрөмжүүд нь жишээ систем дээр байгаа стандарт FreeBSD хуваалтуудыг
		харуулж байна.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls /dev/ad*</code></strong>
/dev/ad0        /dev/ad0s1b     /dev/ad0s1e     /dev/ad4s1
/dev/ad0s1      /dev/ad0s1c     /dev/ad0s1f     /dev/ad4s1c
/dev/ad0s1a     /dev/ad0s1d     /dev/ad4</pre></li><li class="step"><p class="title"><strong><code class="command">gbde</code> цоож файлуудыг агуулах санг үүсгэнэ</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /etc/gbde</code></strong></pre><p><span class="application">gbde</span> цоож файл нь шифрлэгдсэн хуваалтуудад
		хандахад <span class="application">gbde</span>-д шаардагдах мэдээллийг
		агуулдаг. Цоож файлд хандах боломжгүй бол <span class="application">gbde</span>
		нь шифрлэгдсэн хуваалтын агуулсан өгөгдлийг хөндлөнгийн их хүч шаардсан оролцоогүйгээр
		буцааж тайлж чадахгүй юм. Үүнийг програм хангамж дэмждэггүй.
		Шифрлэгдсэн хуваалт бүр тусдаа цоож файл ашигладаг.</p></li><li class="step"><p class="title"><strong><code class="command">gbde</code> хуваалтыг эхлүүлнэ</strong></p><p><span class="application">gbde</span> хуваалт ашиглагдаж эхлэхээсээ өмнө
		эхэлж тохируулагдсан байх шаардлагатай. Энэ эхний тохируулга нь зөвхөн нэг
		удаа хийгдэх ёстой:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde init /dev/ad4s1c -i -L /etc/gbde/ad4s1c.lock</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> нь загварт төрөл бүрийн тохиргооны сонголтуудыг зааж
		өгөх боломжийг танд өгч таны засварлагчийг онгойлгох болно. UFS1
	    	эсвэл UFS2-той ашиглахын тулд sector_size-г 2048 гэж заана:</p><pre class="programlisting"># $FreeBSD: src/sbin/gbde/template.txt,v 1.1.36.1 2009/08/03 08:13:06 kensmith Exp $
#
# Sector size is the smallest unit of data which can be read or written.
# Making it too small decreases performance and decreases available space.
# Making it too large may prevent filesystems from working.  512 is the
# minimum and always safe.  For UFS, use the fragment size
#
sector_size     =       2048
[...]</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> нь өгөгдлийг аюулгүй болгоход хэрэглэгдэх ёстой нэвтрэх
		үгийг хоёр удаа бичихийг танаас хүснэ. Нэвтрэх үг нь хоёуланд нь адил
		байх ёстой. <span class="application">gbde</span>-ийн таны өгөгдлийг
		хамгаалах чадвар таны сонгосон нэвтрэх үгийн чанараас бүхэлдээ
		хамаарна.
	  <a href="#ftn.idp83029328" class="footnote" id="idp83029328"><sup class="footnote">[9]</sup></a></p><p><code class="command">gbde init</code> тушаал нь таны
		<span class="application">gbde</span> хуваалтад зориулж цоож файлыг
		үүсгэх бөгөөд энэ жишээн дээр <code class="filename">/etc/gbde/ad4s1c.lock</code>
		гэж хадгалагдсан байна.	<span class="application">gbde</span> цоож файлууд
		нь <code class="filename">/etc/rc.d/gbde</code> эхлүүлэх скриптээр
		зөв танигдахын тулд <span class="quote">«<span class="quote">.lock</span>»</span> гэж төгсөх ёстой.</p><div xmlns="" class="caution"><h3 class="admontitle">Анхааруулга: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">gbde</span> цоож файлууд нь шифрлэгдсэн
		хуваалтуудын агуулгатай цуг нөөцлөгдөх <span class="emphasis"><em>ёстой</em></span>.
		Зөвхөн цоож файлыг устгах нь шийдсэн халдагч
		<span class="application">gbde</span> хуваалтыг буцааж тайлахаас
		хамгаалж чаддаггүй бөгөөд цоож файлгүйгээр хууль ёсны эзэмшигч
		нь шифрлэгдсэн хуваалт дээрх өгөгдөлд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> болон түүнийг зохиогчийн
		ерөөсөө дэмждэггүй, их хүч шаардсан ажиллагаагүйгээр хандаж чадахгүй болох
		юм.</p></div></li><li class="step"><p class="title"><strong>Шифрлэгдсэн хуваалтыг цөмд залгана</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde attach /dev/ad4s1c -l /etc/gbde/ad4s1c.lock</code></strong></pre><p>Шифрлэгдсэн хуваалтыг эхэлж тохируулж байх үед таны сонгосон нэвтрэх
		үгийг оруулахыг танаас асуух болно. Шинэ шифрлэгдсэн төхөөрөмж
		<code class="filename">/dev</code> дотор
		<code class="filename">/dev/device_name.bde</code> гэж гарч
		ирнэ:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls /dev/ad*</code></strong>
/dev/ad0        /dev/ad0s1b     /dev/ad0s1e     /dev/ad4s1
/dev/ad0s1      /dev/ad0s1c     /dev/ad0s1f     /dev/ad4s1c
/dev/ad0s1a     /dev/ad0s1d     /dev/ad4        /dev/ad4s1c.bde</pre></li><li class="step"><p class="title"><strong>Шифрлэгдсэн төхөөрөмж дээр файлын систем үүсгэнэ</strong></p><p>Шифрлэгдсэн төхөөрөмж цөмд залгагдсаны дараа та энэ төхөөрөмж дээр
		файлын систем үүсгэж болно. Шифрлэгдсэн төхөөрөмж дээр файлын
		систем үүсгэхийн тулд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>-г ашиглана. Хуучин UFS1
		файлын системийг эхлүүлснээс шинэ UFS2 файлын системийг эхлүүлэх нь
		хамаагүй хурдан учраас <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>-г <code class="option">-O2</code>
		тохируулгатай хэрэглэхийг зөвлөдөг.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs -U -O2 /dev/ad4s1c.bde</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> тушаал нь төхөөрөмжийн нэрэндээ
		<code class="filename">*.bde</code> гэж
		өргөтгөлөөр танигдах залгагдсан <span class="application">gbde</span>
		хуваалт дээр хийгдэх ёстой.</p></div></li><li class="step"><p class="title"><strong>Шифрлэгдсэн хуваалтыг холбоно</strong></p><p>Шифрлэгдсэн файлын системд зориулж холбох цэгийг үүсгэнэ.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /private</code></strong></pre><p>Шифрлэгдсэн файлын системийг холбоно.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad4s1c.bde /private</code></strong></pre></li><li class="step"><p class="title"><strong>Шифрлэгдсэн файлын систем байгаа эсэхийг шалгана</strong></p><p>Шифрлэгдсэн файлын систем одоо <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=df&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">df</span>(1)</span></a>-д харагдаж
		ашиглахад бэлэн болох ёстой.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>df -H</code></strong>
Filesystem        Size   Used  Avail Capacity  Mounted on
/dev/ad0s1a      1037M    72M   883M     8%    /
/devfs            1.0K   1.0K     0B   100%    /dev
/dev/ad0s1f       8.1G    55K   7.5G     0%    /home
/dev/ad0s1e      1037M   1.1M   953M     0%    /tmp
/dev/ad0s1d       6.1G   1.9G   3.7G    35%    /usr
/dev/ad4s1c.bde   150G   4.1K   138G     0%    /private</pre></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83097808"></a>19.16.1.2. Байгаа шифрлэгдсэн файлын системүүдийг холбох нь</h4></div></div></div><p>Ачаалалт бүрийн дараа ямар ч шифрлэгдсэн файлын системүүдийг
	ашиглаж эхлэхээсээ өмнө цөмд дахин залгаж, алдааг нь шалгаж холбож болно.
	Шаардлагатай тушаалуудыг  <code class="systemitem">root</code> хэрэглэгч
	ажиллуулах ёстой гэж үздэг.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong><code class="command">gbde</code> хуваалтыг цөмд залгана</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde attach /dev/ad4s1c -l /etc/gbde/ad4s1c.lock</code></strong></pre><p>Шифрлэгдсэн <span class="application">gbde</span> хуваалтыг
		эхэлж тохируулж байх үед таны сонгосон нэвтрэх үгийг оруулахыг
		танаас асуух болно.</p></li><li class="step"><p class="title"><strong>Файлын систем дээр алдааг шалгана</strong></p><p>Шифрлэгдсэн файлын системүүд нь автоматаар холбогдохын тулд
		<code class="filename">/etc/fstab</code> файлд одоохондоо
		жагсаагдах боломжгүй учир файлын системүүд дээр алдаа байгаа эсэхийг
		шалгаж тэдгээрийг холбохоос өмнө <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a>-г гараар ажиллуулах ёстой.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fsck -p -t ffs /dev/ad4s1c.bde</code></strong></pre></li><li class="step"><p class="title"><strong>Шифрлэгдсэн файлын системийг холбоно</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad4s1c.bde /private</code></strong></pre><p>Шифрлэгдсэн файлын систем одоо ашиглахад бэлэн боллоо.</p></li></ol></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83107920"></a>19.16.1.2.1. Шифрлэгдсэн хуваалтуудыг автоматаар холбох нь</h5></div></div></div><p>Шифрлэгдсэн хуваалтыг автоматаар залган шалгаж холбох скриптийг үүсгэж
		болох боловч аюулгүй байдлын шалтгаанаас болоод скрипт нь
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> нууц үгийг агуулсан байх ёсгүй. Харин эдгээр
		скриптүүдийг гараар ажиллуулж нууц үгийг консол эсвэл <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a>-ээр
		оруулахыг зөвлөдөг.</p><p>Өөр нэг арга нь <code class="filename">rc.d</code> скрипт байдаг. Энэ
		скриптийн нэмэлт өгөгдлүүдийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>-оор дамжуулж болно,
		жишээ нь:</p><pre class="programlisting">gbde_autoattach_all="YES"
gbde_devices="ad4s1c"
gbde_lockdir="/etc/gbde"</pre><p>Энэ нь <span class="application">gbde</span> нэвтрэх үгийг ачаалах
	үед оруулахыг шаарддаг. Зөв нэвтрэх үгийг бичсэний дараа
	<span class="application">gbde</span> шифрлэгдсэн хуваалт автоматаар
	холбогдох болно. Энэ нь <span class="application">gbde</span>-г
	зөөврийн компьютер дээр хэрэглэж байгаа үед их ашигтай байдаг.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83114320"></a>19.16.1.3. <code class="command">gbde</code>-ийн ажиллуулдаг криптограф хамгаалалтууд</h4></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> нь 128-bit AES-ийг CBC горимд ашиглан сектор ачааг
	шифрлэдэг. Диск дээрх сектор бүр өөр өөр AES түлхүүрээр шифрлэгддэг.
	Секторын түлхүүрүүд хэрэглэгчийн оруулсан нэвтрэх үгээс хэрхэн гаргагддаг зэрэг
	<span class="application">gbde</span>-ийн криптограф дизайны талаар
	дэлгэрэнгүйг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gbde</span>(4)</span></a>-ээс үзнэ үү.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83154512"></a>19.16.1.4. Нийцтэй байдлын асуудлууд</h4></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> нь <span class="application">gbde</span>-шифрлэгдсэн
	төхөөрөмжүүдтэй нийцгүй байдаг. Бүх
	<code class="filename">*.bde</code> төхөөрөмжүүдийг
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> эхлүүлэхээс өмнө цөмөөс салгасан байх ёстой бөгөөд
	ингэхгүй бол энэ нь төхөөрөмжүүдийг шалгаж эхлэхдээ сүйрэх болно. Бидний жишээн
	дээр ашиглагдсан шифрлэгдсэн төхөөрөмжийг салгахдаа дараах тушаалыг
	ашиглана:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde detach /dev/ad4s1c</code></strong></pre><p>Мөн <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">vinum</span>(4)</span></a> нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">geom</span>(4)</span></a> дэд системийг
	ашигладаггүйг анхаараарай, та <span class="application">gbde</span>-г
	<span class="application">vinum</span> эзлэхүүнүүдтэй ашиглаж
	болохгүй.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83165904"></a>19.16.2. <code class="command">geli</code>-ээр диск шифрлэх нь</h3></div><div><span class="authorgroup">Хувь нэмэр болгон оруулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Даниэл</span> <span class="surname">Гэрзо</span></span>. </span></div></div></div><p>Шинэ криптограф GEOM ангилал <code class="command">geli</code> гэж бий. Үүнийг одоогоор
	Pawel Jakub Dawidek хөгжүүлж байгаа болно. <code class="command">geli</code> нь
	<code class="command">gbde</code>-ээс өөр бөгөөд энэ нь өөр боломжуудыг
	санал болгож криптограф үйлдэлдээ өөр схемийг ашигладаг.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a>-ийн хамгийн чухал боломжууд бол:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crypto&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">crypto</span>(9)</span></a> тогтолцоог ашигладаг —
		криптограф тоног төхөөрөмж бэлэн болоход <code class="command">geli</code>
		түүнийг автоматаар ашигладаг.</p></li><li class="listitem"><p>Олон криптограф алгоритмуудыг дэмждэг (одоогоор AES, Blowfish,
		болон 3DES).</p></li><li class="listitem"><p>root хуваалтыг шифрлэх боломжийг олгодог. Шифрлэгдсэн root
		хуваалтад хандахад хэрэглэгддэг нэвтрэх үгийг систем ачаалахад
		асуудаг.</p></li><li class="listitem"><p>Бие биеэндээ хамааралгүй хоёр түлхүүрүүдийг ашиглахыг
		зөвшөөрдөг (өөрөөр хэлбэл <span class="quote">«<span class="quote">key</span>»</span> болон
		<span class="quote">«<span class="quote">company key</span>»</span>).</p></li><li class="listitem"><p><code class="command">geli</code> нь хурдан байдаг. Энгийн сектороос сектор уруу
		шифрлэлтийг хийдэг.</p></li><li class="listitem"><p>Мастер түлхүүрүүдийг нөөцлөх ба сэргээхийг зөвшөөрдөг. Хэрэглэгч
		өөрийн түлхүүрүүдийг устгах хэрэгтэй болоход нөөцөөс түлхүүрүүдийг
		сэргээж өгөгдөлд дахин хандах боломжтой болох юм.</p></li><li class="listitem"><p>Дискийг санамсаргүй, нэг удаагийн түлхүүрээр залгахыг
		зөвшөөрдөг — энэ нь swap хуваалтууд болон түр зуурын
		файлын системүүдэд ашигтай байдаг.</p></li></ul></div><p><code class="command">geli</code>-ийн илүү боломжуудыг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a>-ийн
	гарын авлагын хуудаснаас олж болно.</p><p>Дараагийн алхмууд нь <code class="command">geli</code>-ийн дэмжлэгийг FreeBSD цөмд
	хэрхэн идэвхжүүлэхийг тайлбарлах бөгөөд шинэ <code class="command">geli</code>
	шифрлэлт үзүүлэгчийг хэрхэн үүсгэх болон ашиглах талаар өгүүлэх болно.</p><p>Цөмд өөрчлөлтүүд шаардлагатай учраас
	супер хэрэглэгчийн эрхүүд хэрэгтэй болно.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Цөмд <code class="command">geli</code> дэмжлэгийг
		нэмэх нь</strong></p><p>Дараах мөрийг цөмийн тохиргооны файлд нэмнэ:</p><pre class="programlisting">options GEOM_ELI
device crypto</pre><p>Цөмөө <a class="xref" href="kernelconfig.html" title="Бүлэг 9. FreeBSD цөмийг тохируулах нь">Бүлэг 9, <em>FreeBSD цөмийг тохируулах нь</em></a>-д тайлбарласны дагуу дахин бүтээнэ.</p><p>Мөн <code class="command">geli</code> модулийг ачаалах үед дуудаж болно.
		Дараах мөрийг <code class="filename">/boot/loader.conf</code> файлд
		нэмнэ:</p><pre class="programlisting">geom_eli_load="YES"</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a> нь одоо цөмд дэмжигдсэн байх ёстой.</p></li><li class="step"><p class="title"><strong>Мастер түлхүүр үүсгэх нь</strong></p><p>Дараах жишээ нь түлхүүр файлыг хэрхэн үүсгэх талаар тайлбарлах бөгөөд
		энэ нь <code class="filename">/private</code> доор
		холбогдсон шифрлэгдсэн үзүүлэгчийн Мастер түлхүүрийн хэсэг болон
		ашиглагдах болно. Түлхүүр файл нь Мастер түлхүүрийг шифрлэхэд
		хэрэглэгдэх зарим санамсаргүй өгөгдлийг өгөх болно. Мастер түлхүүр нь
		нэвтрэх үгээр бас хамгаалагдах болно. Үзүүлэгчийн секторын хэмжээ
		4kB том байх болно. Мөн энэ хэлэлцүүлэг нь <code class="command">geli</code>
		үзүүлэгчийг хэрхэн залгаж түүн дээр файлын систем үүсгэх, хэрхэн түүнийг
		холбож ажиллах болон төгсгөлд нь хэрхэн салгах талаар тайлбарлах
		болно.</p><p>Илүү сайн ажиллагааг хангахын тулд секторын том хэмжээг (4kB ч юм уу)
		ашиглахыг зөвлөдөг.</p><p>Мастер түлхүүр нь нэвтрэх үгээр хамгаалагдах бөгөөд түлхүүр файлд зориулагдсан
		өгөгдлийн эх нь <code class="filename">/dev/random</code> байх болно.
		Бидний үзүүлэгч гэж нэрлэдэг <code class="filename">/dev/da2.eli</code>-ийн
		секторын хэмжээ 4kB байх болно.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/random of=/root/da2.key bs=64 count=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>geli init -s 4096 -K /root/da2.key /dev/da2</code></strong>
Enter new passphrase:
Reenter new passphrase:</pre><p>Нэвтрэх үг болон түлхүүр файлыг хоёуланг нь заавал ашиглах шаардлагагүй;
		Мастер түлхүүрийг нууцлах аль ч аргыг тусад нь ашиглаж болно.</p><p>Хэрэв түлхүүр файл <span class="quote">«<span class="quote">-</span>»</span> гэж өгөгдсөн бол стандарт
		оролтыг ашиглана. Энэ жишээ нь нэгээс олон түлхүүр файлыг
		хэрхэн ашиглаж болох талаар харуулж байна.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat keyfile1 keyfile2 keyfile3 | geli init -K - /dev/da2</code></strong></pre></li><li class="step"><p class="title"><strong>Үзүүлэгчийг үүсгэсэн түлхүүрийн тусламжтай залгах нь</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>geli attach -k /root/da2.key /dev/da2</code></strong>
Enter passphrase:</pre><p>Шинэ цэвэр текст төхөөрөмж
		<code class="filename">/dev/da2.eli</code>
		гэж нэрлэгдэх болно.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls /dev/da2*</code></strong>
/dev/da2  /dev/da2.eli</pre></li><li class="step"><p class="title"><strong>Шинэ файлын системийг үүсгэх нь</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/random of=/dev/da2.eli bs=1m</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da2.eli</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/da2.eli /private</code></strong></pre><p>Шифрлэгдсэн файлын систем <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=df&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">df</span>(1)</span></a>-д харагдаж
		ашиглахад бэлэн болох ёстой:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>df -H</code></strong>
Filesystem     Size   Used  Avail Capacity  Mounted on
/dev/ad0s1a    248M    89M   139M    38%    /
/devfs         1.0K   1.0K     0B   100%    /dev
/dev/ad0s1f    7.7G   2.3G   4.9G    32%    /usr
/dev/ad0s1d    989M   1.5M   909M     0%    /tmp
/dev/ad0s1e    3.9G   1.3G   2.3G    35%    /var
/dev/da2.eli   150G   4.1K   138G     0%    /private</pre></li><li class="step"><p class="title"><strong>Үзүүлэгчийг холбосныг салгаж залгасныг болиулах</strong></p><p>Шифрлэгдсэн хуваалт дээрх ажил хийгдэж дуусаад
		<code class="filename">/private</code> хуваалт
		хэрэггүй болох үед <code class="command">geli</code> шифрлэгдсэн
		хуваалтыг холбосноо салган цөмд залгаснаа бас салгах нь зүйтэй
		юм.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umount /private</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>geli detach da2.eli</code></strong></pre></li></ol></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a>-ийг хэрэглэх тухай дэлгэрэнгүй мэдээллийг гарын авлагын хуудаснаас
	олж болно.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83242192"></a>19.16.2.1. <code class="filename">geli</code> <code class="filename">rc.d</code> скриптийг ашиглах нь</h4></div></div></div><p><code class="command">geli</code> нь <code class="command">geli</code>-ийн
	хэрэглээг хялбаршуулахад ашиглаж болох <code class="filename">rc.d</code>
	скрипттэй цуг ирдэг. <code class="command">geli</code>-г <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>-оор
	тохируулах жишээг дараахаас харж болно:</p><pre class="programlisting">geli_devices="da2"
geli_da2_flags="-p -k /root/da2.key"</pre><p>Энэ нь <code class="filename">/dev/da2</code>-г
	Мастер түлхүүр файл нь <code class="filename">/root/da2.key</code>-д байрлах
	<code class="command">geli</code> үзүүлэгч гэж тохируулах бөгөөд
	үзүүлэгчийг залгаж байхдаа <code class="command">geli</code> нь
	нэвтрэх үгийг ашиглахгүй (хэрэв <code class="option">-P</code> сонголт
	<code class="literal">geli init</code> хийгдэх үед өгөгдсөн тохиолдолд энэ нь
	ашиглагдах боломжтой). Систем нь <code class="command">geli</code>
	үзүүлэгчийг цөмөөс систем унтрахаас өмнө салгах болно.</p><p><code class="filename">rc.d</code>-г тохируулах талаар дэлгэрэнгүй мэдээлэл
		энэхүү гарын авлагын <a class="link" href="configtuning-rcd.html" title="12.7. FreeBSD дээр rc(8) ашиглах нь">rc.d</a>
		хэсэгт байгаа болно.</p></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp83029328" class="footnote"><p><a href="#idp83029328" class="para"><sup class="para">[9] </sup></a>Амархан тогтоож болох аюулгүй нэвтрэх үгийг хэрхэн сонгох талаар
		зөвлөгөөнүүдийг <a class="link" href="http://world.std.com/~reinhold/diceware.html" target="_top">Diceware
	    Passphrase</a> вэб хуудаснаас үзнэ үү.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="quotas.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="swap-encrypting.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">19.15. Файлын системийн ноогдлууд </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 19.17. Swap зайг шифрлэх</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>