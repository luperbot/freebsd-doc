<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>30.10. ntpd-р Цаг Тааруулах нь</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="network-servers.html" title="Бүлэг 30. Сүлжээний орчны Серверүүд" /><link rel="prev" href="network-samba.html" title="30.9. Microsoft® Windows® харилцагчдад зориулсан Файл болон Хэвлэх Үйлчилгээ (Samba)" /><link rel="next" href="network-syslogd.html" title="30.11. syslogd ашиглан алсын хост руу бүртгэх нь" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">30.10. <span class="application">ntpd</span>-р Цаг Тааруулах нь</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-samba.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 30. Сүлжээний орчны Серверүүд</th><td width="20%" align="right"> <a accesskey="n" href="network-syslogd.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ntp"></a>30.10. <span class="application">ntpd</span>-р Цаг Тааруулах нь</h2></div><div><span class="authorgroup">Хувь нэмрээ оруулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Том</span> <span class="surname">Хөүкинс</span></span>. </span></div><div><span class="authorgroup">Орчуулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Лодойсамбын</span> <span class="surname">Баянзул</span></span>. </span></div></div></div><a id="idp91401424" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91401936"></a>30.10.1. Ерөнхий Агуулга</h3></div></div></div><p>Цаг хугацаа өнгөрөхөд компьютерийн цаг зөрөх хандлагатай байдаг.
Network Time Protocol буюу Сүлжээний Цагийн Протоколыг(NTP) цагийг зөв байлгах, зөв ажиллуулахад
хэрэглэдэг.</p><p>Олон тооны Интернэт үйлчилгээнүүд компьютерийн цагаас хамаарч,
эсвэл хүртэж ажилладаг. Жишээлбэл, вэб сервер тодорхой цагаас хойш
өөрчлөлт орсон файлуудыг илгээх хүсэлт хүлээн авсан байж болох юм. Дотоод сүлжээний
орчинд, нэг файл серверээр үйлчлүүлж байгаа компьютеруудын хувьд
файлын цагийн тамга дүйж байхын тулд тэдгээрийн цагууд хоорондоо
тохирч байх ёстой. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> зэрэг үйлчилгээнүүд тодорхой цагт тушаалыг
гүйцэтгэхийн тулд системийн цагт бүрэн найдаж ажилладаг.</p><a id="idp91404112" class="indexterm"></a><p>FreeBSD <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> <acronym class="acronym">NTP</acronym> серверийн хамт ирдэг.
<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> <acronym class="acronym">NTP</acronym> нь таны машины цагийг тааруулахын тулд
бусад <acronym class="acronym">NTP</acronym> серверүүдээс асуух эсвэл бусдад цагийн
мэдээллийг түгээх үйлчилгээг үзүүлдэг.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91417168"></a>30.10.2. Зохимжтой NTP Серверийг Сонгох нь</h3></div></div></div><a id="idp91417808" class="indexterm"></a><p>Цагаа тааруулахын тулд, та нэг болон түүнээс дээш тооны
<acronym class="acronym">NTP</acronym> серверийг хэрэглэх хэрэгтэй болно.
Танай сүлжээний администратор эсвэл ISP үүнд зориулсан
NTP сервертэй байж болох юм—тийм эсэхийг тэдний заавраас шалгана уу.
<a class="link" href="http://support.ntp.org/bin/view/Servers/WebHome" target="_top">нийтэд зориулсан NTP серверүүдийн
онлайн жагсаалт</a>ыг ашиглан өөртөө ойрхон байгаа NTP серверийг
олно уу. Сонгож авсан серверийнхээ ашиглах журмыг судлаарай.
Мөн хэрэв шаардлагатай бол зөвшөөрөл аваарай.</p><p>Таны сонгосон сервер холбогдох боломжгүй,
эсвэл цаг нь бүрэн итгэж болохооргүй үе гарах тул,
хоорондоо хамааралгүй хэд хэдэн NTP серверүүдийг сонгох нь хамгийн зөв
сонголт болдог. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> бусад серверээс хүлээн авсан
хариултуудыг маш ухаалгаар хэрэглэдэг—итгэж болох серверүүдийг
илүү авч үздэг.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91421648"></a>30.10.3. Өөрийн Машиныг Тохируулах нь</h3></div></div></div><a id="idp91422288" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91423568"></a>30.10.3.1. Үндсэн Тохиргоо</h4></div></div></div><a id="idp91424208" class="indexterm"></a><p>Хэрэв та машин асахад цагаа тааруулах хүсэлтэй
байгаа бол, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a>-г ашиглаж болно. Энэ нь олон дахин тааруулах
шаардлагагүй, ойр ойрхон асааж унтраадаг ширээний компьютерийн
хувьд зохимжтой байж болох юм. Гэхдээ ихэнх машины хувьд
<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a>-г ажиллуулах нь зүйтэй.</p><p>Систем ачаалах үед <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a>-г ашиглах нь
<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> ажиллаж байгаа машинуудын хувьд зөв санаа юм.
Учир нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> програм нь цагийг алгуур өөрчилдөг байхад,
<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a> машины одоогийн цаг болон зөв цагын хооронд
хир их ялгаа байгааг үл хайхран цагийг тааруулдаг.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a>-г систем ачаалах үед идэвхжүүлэхийн тулд,
<code class="literal">ntpdate_enable="YES"</code> гэсэн мөрийг <code class="filename">/etc/rc.conf</code> файлд
нэмэх хэрэгтэй.  Мөн цаг авах гэж байгаа бүх серверүүд болон
<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a>-д өгөх тугуудыг <code class="varname">ntpdate_flags</code>-д зааж өгөх хэрэгтэй.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91433296"></a>30.10.3.2. Ерөнхий Тохиргоо</h4></div></div></div><a id="idp91433936" class="indexterm"></a><p>NTP-г <code class="filename">/etc/ntp.conf</code> файлын тусламжтай,
<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ntp.conf</span>(5)</span></a>-д заасан хэлбэрээр тохируулна. Доор хялбар жишээг
үзүүлэв:</p><pre class="programlisting">server ntplocal.example.com prefer
server timeserver.example.org
server ntp2a.example.net

driftfile /var/db/ntp.drift</pre><p><code class="literal">server</code> тохируулгаар
ямар серверүүдийг ашиглахыг заана. Нэг мөрөнд нэг серверийг бичнэ.
Хэрэв аль нэг серверийг <code class="literal">prefer</code> гэсэн аргументаар
онцолсон бол, <code class="systemitem">ntplocal.example.com</code> шиг, тэр серверийг
бусдаас илүүд үзнэ. Илүүд үзсэн серверээс ирсэн хариу
бусад серверүүдийн хариунаас мэдэгдэхүйцээр
зөрж байгаа үед хариуг тоохгүй өнгөрөөнө. Түүнээс бусад тохиолдолд
бусад серверийн хариуг үл харгалзан тэр серверийн хариуг
хэрэглэх болно. <code class="literal">prefer</code> аргументийг ер нь
өндөр нарийвчлалтай, тусгай цаг хянадаг тоног төхөөрөмж дээр тулгуурласан NTP
серверийн хувьд хэрэглэнэ.</p><p><code class="literal">driftfile</code> тохируулгаар
ямар файлд системийн цагийн алдах зөрүү утгыг хадгалж байгааг заана.
<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> програм энэ утгыг ашиглан цагийн алдсан зөрүүг автоматаар нөхнө.
Ингэснээр цагийн бүх гадаад эх үүсвэрүүдтэй холбоо тогтоох боломжгүй болсон
үед, хэсэг хугацааны туршид ч гэсэн цагийг харьцангуй зөв ажиллуулах боломжийг
олгоно.</p><p><code class="literal">driftfile</code> тохируулгаар ямар файлд таны зааж өгсөн
NTP серверүүдийн өмнөх хариунуудын тухай мэдээллийг
хадгалж байгааг заана. Энэ файлд NTP-н дотоод үйл ажиллагааны мэдээллийг
хадгалдаг. Энэ мэдээллийг өөр ямар ч процесс өөрчлөх ёсгүй.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91445584"></a>30.10.3.3. Өөрийн Сервер рүү Хандах Хандалтыг Хянах нь</h4></div></div></div><p>Анхдагч байдлаар, таны NTP сервер рүү Интернэтэд байгаа бүх хост
хандах боломжтой. <code class="filename">/etc/ntp.conf</code> файл дотор
<code class="literal">restrict</code> тохируулгаар ямар машинууд таны сервер рүү хандаж болохыг
хянаж болно.</p><p>Хэрэв та өөрийн NTP сервер рүү хэнийг ч хандуулахыг хүсэхгүй байгаа бол
<code class="filename">/etc/ntp.conf</code> файл дотор дараах мөрийг нэмэх хэрэгтэй:</p><pre class="programlisting">restrict default ignore</pre><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Энэ нь таны серверээс өөрийн чинь локал тохиргоонд жагсаагдсан
		аль ч сервер үрүү хандах боломжийг бас хаана.
		Хэрэв та өөрийн NTP серверийг гадаад NTP сервертэй
		синхрончлох хэрэгтэй бол ямар нэг серверийг зөвшөөрөх
		ёстой. Дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ntp.conf</span>(5)</span></a> гарын авлагаас
		үзнэ үү.</p></div><p>Хэрэв та зөвхөн өөрийн сүлжээнд байгаа машинуудыг
таны сервертэй цагаа тааруулахыг зөвшөөрөөд, гэхдээ
таны серверийн тохиргоог өөрчлөх болон тэгш эрхтэй серверүүд шиг
цагийн мэдээллийг хуваахыг зөвшөөрөхгүй бол дээр дурдсаны оронд:</p><pre class="programlisting">restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap</pre><p>гэсэн мөрийг бичнэ үү. Энд <code class="systemitem">192.168.1.0</code> нь таны сүлжээний
IP хаяг, <code class="systemitem">255.255.255.0</code> нь таны сүлжээний баг болно.</p><p><code class="filename">/etc/ntp.conf</code> дотор олон тооны <code class="literal">restrict</code>
тохируулгууд байж болно. Илүү дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ntp.conf</span>(5)</span></a>-н
<code class="literal">Хандалтыг Удирдах Дэмжлэг</code> дэд хэсгээс үзнэ үү.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91454800"></a>30.10.4. NTP Серверийг Ажиллуулах нь</h3></div></div></div><p>NTP серверийг систем ачаалах үед эхлүүлэхийн тулд,
<code class="literal">ntpd_enable="YES"</code> гэсэн мөрийг <code class="filename">/etc/rc.conf</code> файлд нэмж бичих
хэрэгтэй. Хэрэв <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a>-д нэмэлт тугуудыг өгөх хүсэлтэй бол,
<code class="filename">/etc/rc.conf</code> файлд байгаа <code class="varname">ntpd_flags</code> параметрийг засах хэрэгтэй.</p><p>Машиныг дахин ачаалалгүйгээр серверийг эхлүүлэхийн тулд,
<code class="command">ntpd</code> тушаалыг <code class="filename">/etc/rc.conf</code>-д заасан
<code class="varname">ntpd_flags</code> нэмэлт параметрүүдийн хамтаар өгөх хэрэгтэй. Жишээлбэл:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ntpd -p /var/run/ntpd.pid</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91465040"></a>30.10.5. ntpd-г Түр зуурын Интернэт Холболттой үед Хэрэглэх нь</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> програм зөв ажиллахын тулд байнгын Интернэт
холболт шаардлагагүй. Гэхдээ, хэрэгцээтэй үедээ гадагшаа залгадаг
тийм төрлийн түр зуурын холболттой бол, NTP трафикийг
гадагшаа залгах болон холболтыг бариад байхаас сэргийлэх нь чухал.
Хэрэв та PPP хэрэглэдэг бол, <code class="filename">/etc/ppp/ppp.conf</code> файл дотор байгаа
<code class="literal">filter</code> директивийг ашиглаж болно. Жишээ нь:</p><pre class="programlisting"> set filter dial 0 deny udp src eq 123
 # Prevent NTP traffic from initiating dial out
 set filter dial 1 permit 0 0
 set filter alive 0 deny udp src eq 123
 # Prevent incoming NTP traffic from keeping the connection open
 set filter alive 1 deny udp dst eq 123
 # Prevent outgoing NTP traffic from keeping the connection open
 set filter alive 2 permit 0/0 0/0</pre><p>Дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>-н <code class="literal">PACKET FILTERING</code>
хэсгээс болон <code class="filename">/usr/share/examples/ppp/</code>-д байгаа жишээнүүдээс авч болно.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Зарим Интернэт үйлчилгээ үзүүлэгчид бага дугаартай портуудыг хаасан байдаг  бөгөөд
 	ингэснээр хариу нь таны машинд хэзээ ч хүрэхгүй болж NTP ажиллахгүй болдог.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91470800"></a>30.10.6. Цааших Мэдээлэл</h3></div></div></div><p>NTP серверийн баримтжуулалтыг HTML хэлбэрээр
<code class="filename">/usr/share/doc/ntp/</code>-с олж үзэж болно.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-samba.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="network-syslogd.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">30.9. <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® харилцагчдад зориулсан Файл болон Хэвлэх Үйлчилгээ (Samba) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 30.11. <code class="command">syslogd</code> ашиглан алсын хост руу бүртгэх нь</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>