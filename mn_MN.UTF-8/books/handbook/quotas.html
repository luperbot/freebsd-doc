<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>19.15. Файлын системийн ноогдлууд</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="disks.html" title="Бүлэг 19. Хадгалалт" /><link rel="prev" href="snapshots.html" title="19.14. Файлын системийн хормын хувилбарууд" /><link rel="next" href="disks-encrypting.html" title="19.16. Дискний хуваалтуудыг шифрлэх нь" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">19.15. Файлын системийн ноогдлууд</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="snapshots.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 19. Хадгалалт</th><td width="20%" align="right"> <a accesskey="n" href="disks-encrypting.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="quotas"></a>19.15. Файлын системийн ноогдлууд</h2></div></div></div><a id="idp82960592" class="indexterm"></a><a id="idp82970064" class="indexterm"></a><p>Quota буюу ноогдол нь хэрэглэгч эсвэл бүлгийн гишүүдийн хувьд дискний зай ба/эсвэл
	файлуудын тоог файлын систем тус бүрийн хувьд хуваарилж хязгаарлах боломжийг
	бүрдүүлэх үйлдлийн системийн нэг нэмэлт боломж юм. Энэ нь дурын нэг хэрэглэгч
	эсвэл бүлэг хэрэглэгчдийн хуваарилж болох эх үүсвэрүүдийг хязгаарлах шаардлагатай
	цаг хуваалцах систем дээр ихэвчлэн хэрэглэгддэг. Энэ нь нэг хэрэглэгч эсвэл
	бүлэг хэрэглэгчид бүх байгаа дискний зайг хэрэглэхээс хамгаалдаг юм.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82970960"></a>19.15.1. Дискний ноогдлуудыг идэвхтэй болгохын тулд өөрийн системийг тохируулах нь</h3></div></div></div><p>Дискний ноогдлыг ашиглаж эхлэхээсээ өмнө ноогдлууд нь цөмд тохируулагдсан
	эсэхийг шалгах шаардлагатай. Дараах мөрийг өөрийн цөмийн тохиргооны файлд
	нэмж үүнийг хийнэ:</p><pre class="programlisting">options QUOTA</pre><p>Анхны <code class="filename">GENERIC</code> цөм нь үүнийг анхнаасаа идэвхжүүлээгүй
	байдаг болохоор та дискний ноогдлуудыг ашиглахын тулд тусгайлсан цөмийг тохируулж бүтээн
	суулгах хэрэгтэй болох юм. Цөмийн тохиргооны талаар дэлгэрэнгүй мэдээллийг
	<a class="xref" href="kernelconfig.html" title="Бүлэг 9. FreeBSD цөмийг тохируулах нь">Бүлэг 9, <em>FreeBSD цөмийг тохируулах нь</em></a>-с лавлана уу.</p><p>Дараа нь та дискний ноогдлуудыг <code class="filename">/etc/rc.conf</code> файлд
	идэвхжүүлэх хэрэгтэй. FreeBSD 7.X болон түүнээс өмнөх дээр дараах мөрийг нэмж үүнийг хийнэ:</p><pre class="programlisting">enable_quotas="YES"</pre><p>FreeBSD 8.0-RELEASE болон түүнээс хойшхи дээр дараах мөрийг
	нэмнэ:</p><pre class="programlisting">quota_enable="YES"</pre><a id="idp82975440" class="indexterm"></a><p>Өөрийн ноогдлын эхлүүлэлтэд сайн хяналт тавихад хэрэгтэй нэмэлт тохиргооны
	хувьсагчууд байдаг. Ердийн үед ачаалалтын үеэр файлын систем бүрийн ноогдлын
	бүрэн бүтэн байдал  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotacheck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotacheck</span>(8)</span></a> програмаар шалгагддаг.
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotacheck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotacheck</span>(8)</span></a> боломж нь ноогдлын мэдээллийн бааз дахь өгөгдөл
	файлын систем дээрх өгөгдлийг зөв тусгаж байгаа эсэхийг шалгаж байдаг.
	Энэ нь хугацаа их шаардсан процесс бөгөөд таны систем ачаалах хугацаанд мэдэгдэхүйц
	нөлөөлдөг. Хэрэв та энэ алхмыг алгасахыг хүсвэл энэ зорилгоор хувьсагчийг
	<code class="filename">/etc/rc.conf</code> файлд тохируулах хэрэгтэй:</p><pre class="programlisting">check_quotas="NO"</pre><p>Төгсгөлд нь та файлын систем бүрийн хувьд дискний ноогдлуудыг идэвхжүүлэхийн
	тулд <code class="filename">/etc/fstab</code> файлыг засварлах хэрэгтэй.
	Энд та хэрэглэгч эсвэл бүлгийн ноогдлууд эсвэп хоёуланг нь өөрийн бүх файлын системийн
	хувьд идэвхжүүлэх боломжтой юм.</p><p>Файлын систем дээр хэрэглэгч бүрийн хувьд ноогдлуудыг идэвхжүүлэхийн тулд
	өөрийн ноогдлууд идэвхжүүлэхийг хүсэж байгаа файлын системийн хувьд
	<code class="filename">/etc/fstab</code> файлын харгалзах оруулгын options буюу
	тохируулгыг заах талбарт <code class="option">userquota</code> тохируулгыг нэмж
	өгөх хэрэгтэй. Жишээ нь:</p><pre class="programlisting">/dev/da1s2g   /home    ufs rw,userquota 1 2</pre><p>Үүнтэй төстэйгээр бүлгийн ноогдлуудыг идэвхжүүлэхийн тулд
	<code class="option">userquota</code> тохируулгын оронд <code class="option">groupquota</code>
	тохируулгыг ашиглах хэрэгтэй. Хэрэглэгч болон бүлгийн ноогдлуудыг хоёуланг нь
	идэвхжүүлэхийн тулд оруулгыг ингэж өөрчилнө:</p><pre class="programlisting">/dev/da1s2g    /home    ufs rw,userquota,groupquota 1 2</pre><p>Анхдагчаар ноогдлын файлууд файлын системийн root санд
	хэрэглэгчийн ноогдлын хувьд <code class="filename">quota.user</code>, бүлгийн
	ноогдлын хувьд <code class="filename">quota.group</code> нэрээр хадгалагддаг.
	Дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a>-с үзнэ үү. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a>
	гарын авлагын хуудас ноогдлын файлуудын хувьд өөр байрлалыг зааж өгч болохыг
	хэлдэг боловч ноогдлын төрөл бүрийн хэрэгслүүд үүнтэй зөв ажиллаж чаддаггүй
	болохоор ингэхийг зөвлөдөггүй юм.</p><p>Энэ үед хүрээд та өөрийн системийг шинэ цөмтэй дахин ачаалах хэрэгтэй.
	<code class="filename">/etc/rc</code> нь таны <code class="filename">/etc/fstab</code>
	файлд идэвхжүүлсэн бүх ноогдлуудын хувьд эхний ноогдлын файлуудыг үүсгэдэг
	тохирох тушаалуудыг автоматаар ажиллуулах бөгөөд ингэснээр ямар ч тэг урттай ноогдлын
	файлуудыг гараар үүсгэх шаардлагагүй юм.</p><p>Ердийн үйлдлүүдийн үед <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotacheck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotacheck</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotaon&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotaon</span>(8)</span></a>, эсвэл
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotaoff&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotaoff</span>(8)</span></a> тушаалуудыг та заавал ажиллуулах ёсгүй юм. Гэхдээ
	тэдгээрийн хийдэг үйлдлүүдтэй танилцахын тулд тэдгээрийн гарын авлагын хуудаснуудыг
	уншихыг хүсэж болох юм.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82990032"></a>19.15.2. Ноогдлын хязгаарлалтуудыг тохируулах нь</h3></div></div></div><a id="idp82990672" class="indexterm"></a><p>Та ноогдлыг идэвхжүүлж өөрийн системийг тохируулсны дараа тэдгээр нь
	яг жинхэнэдээ идэвхтэй болсон эсэхийг шалгаарай. Үүнийг хийх хялбар арга нь
	дараах тушаалыг ажиллуулах явдал юм:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>quota -v</code></strong></pre><p>Та ноогдлууд идэвхжүүлэгдсэн файлын систем бүрийн хувьд дискний хэрэглээ
	болон тухайн үеийн ноогдлын хязгаарлалтуудын ерөнхий нэг мөр үр дүнг харах
	ёстой.</p><p>Та одоо <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a> тушаал ашиглан ноогдлын хязгаарлалтуудыг
	зааж өгч эхлэхэд бэлэн боллоо.</p><p>Хэрэглэгч эсвэл бүлгийн хуваарилж болох дискний зай болон тэд хичнээн файл
	үүсгэж болох хэмжээний хязгаарлалтуудыг хүчлэн зааж өгч болох хэд хэдэн сонголт танд
	байдаг. Та хуваарилалтыг дискний зай (блок ноогдлууд) эсвэл файлын тоо (inode ноогдлууд)
	эсвэл хоёулангийн хослолоор хязгаарлан өгч болно. Эдгээр хязгаарлалт бүр дараа нь
	хоёр зэрэглэлт хуваагддаг: энэ нь хатуу ба зөөлөн хязгаарлалтууд юм.</p><a id="idp82999248" class="indexterm"></a><p>Хатуу хязгаарлалтаас илүү гарч болохгүй. Хэрэглэгч өөрийн хатуу хязгаарлалтад
	хүрэхэд асуудалтай байгаа файлын систем дээр хэрэглэгч ямар ч хуваарилалт хийж
	чадахгүй болно. Жишээ нь хэрэв хэрэглэгч файлын систем дээр 500 кбайт хатуу
	хязгаарлалттай бөгөөд 490 кбайтыг одоогоор ашиглаж байгаа бол хэрэглэгч
	зөвхөн 10 кбайтыг нэмж хуваарилж чадна. 11 кбайт нэмж хуваарилахыг оролдох нь
	амжилтгүй болох болно.</p><a id="idp83000144" class="indexterm"></a><p>Нөгөө талаас зөөлөн хязгаарлалтууд нь тодорхой хугацааны туршид илүү гарч
	болно. Энэ хугацааг энэрэнгүй хугацаа гэдэг бөгөөд анхдагчаар нэг долоо хоног
	байдаг. Хэрэв хэрэглэгч өөрийн зөөлөн хязгаарлалтаас илүү гарсан хэвээр
	энэрэнгүй хугацааг өнгөрөх юм бол зөөлөн хязгаарлалт нь хатуу хязгаарлалт болж
	дахин хуваарилалтыг зөвшөөрдөггүй. Хэрэглэгч зөөлөн хязгаарлалтаас доош
	орвол энэрэнгүй хугацаа дахин тавигдах болно.</p><p>Дараах нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a> тушаалыг ажиллуулах үед таны харж болох
	гаралтын жишээ юм. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a> тушаалыг ажиллуулахад
	<code class="envar">EDITOR</code> орчны хувьсагчид заагдсан засварлагч уруу
	эсвэл <code class="envar">EDITOR</code> хувьсагч заагдаагүй бол
	<span class="application">vi</span> засварлагч уруу таныг оруулах бөгөөд энэ нь
	ноогдлын хязгаарлалтуудыг засварлах боломжийг танд олгоно.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>edquota -u test</code></strong></pre><pre class="programlisting">Quotas for user test:
/usr: kbytes in use: 65, limits (soft = 50, hard = 75)
        inodes in use: 7, limits (soft = 50, hard = 60)
/usr/var: kbytes in use: 0, limits (soft = 50, hard = 75)
        inodes in use: 0, limits (soft = 50, hard = 60)</pre><p>Та ноогдлууд идэвхжүүлэгдсэн файлын систем бүрийн хувьд хоёр мөрийг ердийн үед
	харах болно. Нэг мөр нь блокийн хязгаарлалтад, нөгөө мөр нь inode хязгаарлалтад
	зориулагддаг. Ноогдлын хязгаарлалтуудыг өөрчлөхийн тулд та ердөө л утгыг шинэчлэхийг хүсэж
	байгаа утгаараа солих хэрэгтэй. Жишээ нь энэ хэрэглэгчийн блок хязгаарлалтыг
	зөөлөн хязгаарлалт 50, хатуу хязгаарлалт 75 байсныг зөөлөн хязгаарлалт 500 болон
	хатуу хязгаарлалт 600 болгон өсгөхийн тулд дараах:</p><pre class="programlisting">/usr: kbytes in use: 65, limits (soft = 50, hard = 75)</pre><p>мөрийг доорх шиг болгож өөрчлөх хэрэгтэй:</p><pre class="programlisting">/usr: kbytes in use: 65, limits (soft = 500, hard = 600)</pre><p>Таныг засварлагчаас гарсны дараа шинэ ноогдлын хязгаарлалтууд
	байрандаа орох болно.</p><p>Заримдаа ноогдлын хязгаарлалтуудыг зарим UID-ийн хүрээний хувьд
	зааж өгөх шаардлага гардаг. Үүнийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a> тушаалд
	<code class="option">-p</code> тохируулгыг ашиглан хийдэг. Эхлээд хэрэглэгчид
	хүссэн ноогдлын хязгаарлалтаа зааж өгөөд дараа нь
	<code class="command">edquota -p protouser startuid-enduid</code>
	тушаалыг ажиллуулна. Жишээ нь хэрэв хэрэглэгч <code class="systemitem">test</code>
	хүссэн ноогдлын хязгаарлалттай байгаа бол энэ ноогдлын хязгаарлалтыг
	10,000-с 19,999 хүртэлх UID-уудад хувилж хамааруулахын тулд дараах тушаалыг
	ажиллуулна:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>edquota -p test 10000-19999</code></strong></pre><p>Дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a> гарын авлагын хуудаснаас үзнэ үү.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83016272"></a>19.15.3. Ноогдлын хязгаарлалтууд болон дискний хэрэглээг шалгах нь</h3></div></div></div><a id="idp83016912" class="indexterm"></a><p>Ноогдлын хязгаарлалтууд болон дискний хэрэглээг шалгахын тулд
	та <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a> эсвэл <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=repquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">repquota</span>(8)</span></a> тушаалын нэгийг
	ашиглаж болно. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a> тушаалыг хэрэглэгч эсвэл бүлгийн
	ноогдлууд болон дискний зайг шалгахад хэрэглэж болно. Хэрэглэгч нь
	зөвхөн өөрийн ноогдол болон өөрийн гишүүн бүлгийн ноогдлыг шалгаж
	чадна. Зөвхөн супер хэрэглэгч бүх хэрэглэгч болон бүлгийн ноогдлуудыг
	харж болно. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=repquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">repquota</span>(8)</span></a> тушаалыг ноогдлууд идэвхжүүлэгдсэн
	файлын системүүдийн хувьд бүх ноогдлууд болон дискний хэрэглээний
	ерөнхий дүнг авахад хэрэглэж болно.</p><p>Дараах нь хоёр файлын систем дээр ноогдлын хязгаарлалттай хэрэглэгчийн
	хувьд <code class="command">quota -v</code> тушаалын жишээ гаралт
	юм.</p><pre class="programlisting">Disk quotas for user test (uid 1002):
     Filesystem  usage    quota   limit   grace   files   quota   limit   grace
           /usr      65*     50      75   5days       7      50      60
       /usr/var       0      50      75               0      50      60</pre><a id="idp83027152" class="indexterm"></a><p>Дээрх жишээний <code class="filename">/usr</code> файлын систем дээр
	хэрэглэгч 50 кбайтын зөөлөн хязгаарлалтыг 15 кбайтаар илүүдүүлсэн
	байгаа бөгөөд 5 хоногийн энэрэнгүй хугацаа үлдсэн байна. Од
	<code class="literal">*</code> тэмдэгт нь хэрэглэгч өөрийн ноогдлын хязгаарлалтаас
	илүү гарсныг харуулж байна.</p><p>Ердийн үед хэрэглэгч ямар ч дискний зай ашиглаагүй байгаа тийм файлын системүүд,
	файлын системийн хувьд ноогдлын хязгаарлалт байсан ч гэсэн <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a> тушаалын
	гаралтад  харагддаггүй байна. <code class="option">-v</code> тохируулга нь тэдгээр
	файлын системүүдийг харуулах бөгөөд дээрх жишээн дээр
	<code class="filename">/usr/var</code> файлын системийг харуулж
	байна.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83031120"></a>19.15.4. NFS дээгүүрх ноогдлууд</h3></div></div></div><a id="idp83031760" class="indexterm"></a><p>Ноогдлууд нь NFS сервер дээр ноогдлын дэд системээр хянагддаг.
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.rquotad&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpc.rquotad</span>(8)</span></a> демон нь NFS клиентүүд дээр өөрсдийн ноогдлын
	статистикуудыг хэрэглэгчдэд үзэх боломжийг олгож ноогдлын мэдээллийг тэдгээр
	машинууд дээр <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a> тушаалд бэлэн болгож өгдөг.</p><p><code class="command">rpc.rquotad</code>-г
	<code class="filename">/etc/inetd.conf</code> файлд ингэж идэвхжүүлнэ:</p><pre class="programlisting">rquotad/1      dgram rpc/udp wait root /usr/libexec/rpc.rquotad rpc.rquotad</pre><p>Одоо <code class="command">inetd</code>-г дахин ачаал:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/inetd restart</code></strong></pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="snapshots.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="disks-encrypting.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">19.14. Файлын системийн хормын хувилбарууд </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 19.16. Дискний хуваалтуудыг шифрлэх нь</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>