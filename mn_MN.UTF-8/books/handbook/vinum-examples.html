<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>22.6. Зарим жишээнүүд</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="vinum-vinum.html" title="Бүлэг 22. Vinum Эзлэхүүн Менежер" /><link rel="prev" href="vinum-objects.html" title="22.5. Vinum обьектууд" /><link rel="next" href="vinum-object-naming.html" title="22.7. Обьектийн нэрлэлт" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">22.6. Зарим жишээнүүд</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="vinum-objects.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 22. Vinum Эзлэхүүн Менежер</th><td width="20%" align="right"> <a accesskey="n" href="vinum-object-naming.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-examples"></a>22.6. Зарим жишээнүүд</h2></div></div></div><p>Vinum нь хувь системүүдэд мэдэгддэг обьектуудыг тайлбарладаг
	<span class="emphasis"><em>тохиргооны мэдээллийн бааз</em></span>ын ажиллагааг
	хангаж байдаг. Эхлээд хэрэглэгч нэг буюу эсвэл хэд хэдэн тохиргооны
	файлуудаас тохиргооны мэдээллийн баазыг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gvinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gvinum</span>(8)</span></a> хэрэгсэл
	програмын тусламжтайгаар үүсгэдэг. Vinum нь өөрийн тохиргооны
	мэдээллийн баазын хуулбарыг диск зүсмэл (Vinum үүнийг
	<span class="emphasis"><em>төхөөрөмж</em></span> гэдэг) бүр дээр өөрийн
	хяналтын доор хадгалдаг. Дахин эхлүүлэлт нь зөвөөр Vinum обьект
	бүрийн төлвийг сэргээдэг байлгахын тулд төлөв өөрчлөгдөх болгонд
	энэхүү мэдээллийн бааз нь шинэчлэгддэг.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84619984"></a>22.6.1. Тохиргооны файл</h3></div></div></div><p>Тохиргооны файл нь Vinum обьектуудыг тайлбарладаг. Энгийн эзлэхүүний
	тодорхойлолт ийм байж болох юм:</p><pre class="programlisting">
    drive a device /dev/da3h
    volume myvol
      plex org concat
        sd length 512m drive a</pre><p>Энэ файл нь дөрвөн Vinum обьектийг тайлбарладаг:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>drive</em></span> мөр нь дискний хуваалтыг
		(<span class="emphasis"><em>хөтөч</em></span>) тайлбарлах бөгөөд үүний
		байрлал нь түүн доор орших тоног төхөөрөмжтэй харьцангуй
		байна. Үүнд <span class="emphasis"><em>a</em></span> гэж симбол нэр
		өгсөн байгаа. Ингэж симбол нэрсийг төхөөрөмжийн нэрсээс
		тусад нь салгах нь дискнүүдийг нэг байрлалаас нөгөө уруу
		эргэлзээгүйгээр шилжүүлэх боломжийг олгодог.</p></li><li class="listitem"><p><span class="emphasis"><em>volume</em></span> мөр нь эзлэхүүнийг тайлбарлана.
		Цорын ганц шаардлагатай шинж чанар нь нэр бөгөөд энэ тохиолдолд
		<span class="emphasis"><em>myvol</em></span> байна.</p></li><li class="listitem"><p><span class="emphasis"><em>plex</em></span> мөр нь plex-ийг тодорхойлдог.
		Цорын ганц шаардлагатай параметр нь зохион байгуулалт бөгөөд
		энэ тохиолдолд <span class="emphasis"><em>concat</em></span> болно.
		Ямар ч нэр хэрэггүй: систем автоматаар эзлэхүүний нэрэн
		дээр <span class="emphasis"><em>.p</em></span><span class="emphasis"><em>x</em></span>
		дагавар залгаж үүсгэдэг бөгөөд <span class="emphasis"><em>x</em></span> нь
		эзлэхүүн дэх plex-ийн дугаар юм. Тиймээс энэ plex нь
		<span class="emphasis"><em>myvol.p0</em></span> гэж нэрлэгдэнэ.</p></li><li class="listitem"><p><span class="emphasis"><em>sd</em></span> мөр нь дэд дискийг тайлбарлана.
		Хамгийн бага тодорхойлолтууд нь үүнийг хадгалах хөтчийн нэр болон
		дэд дискний урт юм. Plex-үүдтэй адил нэр хэрэггүй:
		систем автоматаар plex-ийн нэрэн
		дээр <span class="emphasis"><em>.s</em></span><span class="emphasis"><em>x</em></span>
		дагавар залгаж үүсгэдэг бөгөөд <span class="emphasis"><em>x</em></span> нь
		plex дэх дэд дискний дугаар юм. Тиймээс Vinum нь энэ дэд
		дискэнд <span class="emphasis"><em>myvol.p0.s0</em></span> гэж нэр
		өгдөг.</p></li></ul></div><p>Энэ файлыг процесс хийсний дараа <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gvinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gvinum</span>(8)</span></a> дараах үр дүнг
	гаргана:</p><pre class="programlisting" width="97">
      <code class="prompt">#</code> gvinum -&gt; <strong class="userinput"><code>create config1</code></strong>
      Configuration summary
      Drives:         1 (4 configured)
      Volumes:        1 (4 configured)
      Plexes:         1 (8 configured)
      Subdisks:       1 (16 configured)

	D a                     State: up       Device /dev/da3h        Avail: 2061/2573 MB (80%)

	V myvol                 State: up       Plexes:       1 Size:        512 MB

	P myvol.p0            C State: up       Subdisks:     1 Size:        512 MB

	S myvol.p0.s0           State: up       PO:        0  B Size:        512 MB</pre><p>Энэ гаралт нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gvinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gvinum</span>(8)</span></a>-ийн хэлбэршүүлэлтийн товч жагсаалтыг харуулж байна.
	Энэ нь графикаар <a class="xref" href="vinum-examples.html#vinum-simple-vol" title="Зураг 22.4. Энгийн Vinum эзлэхүүн">Зураг 22.4, «Энгийн Vinum эзлэхүүн»</a> зурагт дүрслэгдсэн байна.</p><p>
	</p><div class="figure"><a id="vinum-simple-vol"></a><div class="figure-title">Зураг 22.4. Энгийн Vinum эзлэхүүн</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-simple-vol.png" alt="Энгийн Vinum эзлэхүүн" /></div></div></div><p><br class="figure-break" />
      </p><p>Энэ зураг  болон дараагийн зураг нь дэд дискнүүд агуулсан plex-үүдийг
	агуулсан эзлэхүүнийг харуулж байна. Энэ хялбар жишээн дээр эзлэхүүн нь
	нэг plex-ийг агуулах бөгөөд plex нь нэг дэд дискийг агуулж байна.</p><p>Энэхүү эзлэхүүн нь хэвшмэл дискний хуваалттай харьцуулахад ямар нэг
	тухайлсан давуу чанаргүй юм. Энэ нь ганц plex-ийг агуулах учраас нөөц биш
	юм. Plex нь ганц дэд дискнээс тогтох учраас хэвшмэл дискний хуваалттай
	харьцуулахад хадгалалт хуваарилалтын хувьд ямар ч ялгаагүй юм.
	Дараах хэсгүүд нь төрөл бүрийн илүү сонирхолтой тохиргооны аргуудыг
	харуулах болно.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84646096"></a>22.6.2. Нэмэгдсэн уян хатан чанар: Толин тусгал үүсгэх</h3></div></div></div><p>Эзлэхүүний уян хатан чанарыг толин тусгал үүсгэж ихэсгэж болно.
	Толин тусгал хийсэн эзлэхүүнийг байрлуулахдаа хөтчийн сүйрэл plex бүрийг унагахгүй
	байлгахын тулд plex бүр дэх дэд дискнүүд нь өөр өөр хөтчүүд дээр байгаа эсэхийг
	шалгах нь чухал юм. Дараах тохиргоо нь эзлэхүүнийг толин тусгал хийж
	байна:</p><pre class="programlisting">
	drive b device /dev/da4h
	volume mirror
      plex org concat
        sd length 512m drive a
	  plex org concat
	    sd length 512m drive b</pre><p>Vinum нь өөрийн тохиргооны мэдээллийн бааз дахь бүх обьектуудыг
	хянаж байдаг болохоор <span class="emphasis"><em>a</em></span> хөтчийн тодорхойлолтыг
	энэ жишээн дээр дахин зааж өгөх шаардлагагүй юм. Энэ тодорхойлолтыг процесс
	хийсний дараа тохиргоо иймэрхүү харагдана:</p><pre class="programlisting" width="97">
	Drives:         2 (4 configured)
	Volumes:        2 (4 configured)
	Plexes:         3 (8 configured)
	Subdisks:       3 (16 configured)

	D a                     State: up       Device /dev/da3h        Avail: 1549/2573 MB (60%)
	D b                     State: up       Device /dev/da4h        Avail: 2061/2573 MB (80%)

    V myvol                 State: up       Plexes:       1 Size:        512 MB
    V mirror                State: up       Plexes:       2 Size:        512 MB

    P myvol.p0            C State: up       Subdisks:     1 Size:        512 MB
    P mirror.p0           C State: up       Subdisks:     1 Size:        512 MB
    P mirror.p1           C State: initializing     Subdisks:     1 Size:        512 MB

    S myvol.p0.s0           State: up       PO:        0  B Size:        512 MB
	S mirror.p0.s0          State: up       PO:        0  B Size:        512 MB
	S mirror.p1.s0          State: empty    PO:        0  B Size:        512 MB</pre><p><a class="xref" href="vinum-examples.html#vinum-mirrored-vol" title="Зураг 22.5. Толин тусгал хийгдсэн Vinum эзлэхүүн">Зураг 22.5, «Толин тусгал хийгдсэн Vinum эзлэхүүн»</a> зураг нь бүтцийг графикаар
	харуулж байна.</p><p>
	</p><div class="figure"><a id="vinum-mirrored-vol"></a><div class="figure-title">Зураг 22.5. Толин тусгал хийгдсэн Vinum эзлэхүүн</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-mirrored-vol.png" alt="Толин тусгал хийгдсэн Vinum эзлэхүүн" /></div></div></div><p><br class="figure-break" />
      </p><p>Энэ жишээн дээр plex бүр бүрэн 512 MB хаягийн талбарыг
	агуулж байна. Өмнөх жишээн дээрх шиг plex бүр зөвхөн ганц дэд дискийг
	агуулна.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84656080"></a>22.6.3. Ажиллагааг оновчтой болгох</h3></div></div></div><p>Өмнөх жишээн дээрх толин тусгал хийгдсэн эзлэхүүн нь толин тусгал
	хийгдээгүй эзлэхүүнээс илүү сүйрэлд тэсвэртэй боловч ажиллагааны хувьд дутмаг
	байдаг: эзлэхүүн уруу хийгдэх бичилт бүр нь нийт дискний зурвасын өргөнөөс илүүтэйгээр
	ашиглан хоёр хөтөч хоёулан уруу нь бичилт хийхийг шаарддаг. Ажиллагааны
	тооцоонууд нь өөр хандлагыг шаарддаг: толин тусгал үүсгэхийн оронд өгөгдөл нь
	аль болох олон диск хөтчүүдийн дагуу судалчлагддаг. Дараах тохиргоо нь
	дөрвөн дискний хөтчүүдийн дагуу судалчлагдсан plex бүхий эзлэхүүнийг
	харуулж байна:</p><pre class="programlisting">
	drive c device /dev/da5h
	drive d device /dev/da6h
	volume stripe
	plex org striped 512k
	  sd length 128m drive a
	  sd length 128m drive b
	  sd length 128m drive c
	  sd length 128m drive d</pre><p>Өмнөхийн адил Vinum-д мэдэгдэж байгаа хөтчүүдийг тодорхойлох хэрэггүй
	юм. Энэ тодорхойлолтыг процесс хийсний дараа тохиргоо иймэрхүү
	байна:</p><pre class="programlisting" width="92">
	Drives:         4 (4 configured)
	Volumes:        3 (4 configured)
	Plexes:         4 (8 configured)
	Subdisks:       7 (16 configured)

    D a                     State: up       Device /dev/da3h        Avail: 1421/2573 MB (55%)
    D b                     State: up       Device /dev/da4h        Avail: 1933/2573 MB (75%)
    D c                     State: up       Device /dev/da5h        Avail: 2445/2573 MB (95%)
    D d                     State: up       Device /dev/da6h        Avail: 2445/2573 MB (95%)

    V myvol                 State: up       Plexes:       1 Size:        512 MB
    V mirror                State: up       Plexes:       2 Size:        512 MB
    V striped               State: up       Plexes:       1 Size:        512 MB

    P myvol.p0            C State: up       Subdisks:     1 Size:        512 MB
    P mirror.p0           C State: up       Subdisks:     1 Size:        512 MB
    P mirror.p1           C State: initializing     Subdisks:     1 Size:        512 MB
    P striped.p1            State: up       Subdisks:     1 Size:        512 MB

    S myvol.p0.s0           State: up       PO:        0  B Size:        512 MB
    S mirror.p0.s0          State: up       PO:        0  B Size:        512 MB
    S mirror.p1.s0          State: empty    PO:        0  B Size:        512 MB
    S striped.p0.s0         State: up       PO:        0  B Size:        128 MB
    S striped.p0.s1         State: up       PO:      512 kB Size:        128 MB
    S striped.p0.s2         State: up       PO:     1024 kB Size:        128 MB
    S striped.p0.s3         State: up       PO:     1536 kB Size:        128 MB</pre><p>
	</p><div class="figure"><a id="vinum-striped-vol"></a><div class="figure-title">Зураг 22.6. Судалчлагдсан Vinum эзлэхүүн</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-striped-vol.png" alt="Судалчлагдсан Vinum эзлэхүүн" /></div></div></div><p><br class="figure-break" />
      </p><p>Энэ эзлэхүүн нь <a class="xref" href="vinum-examples.html#vinum-striped-vol" title="Зураг 22.6. Судалчлагдсан Vinum эзлэхүүн">Зураг 22.6, «Судалчлагдсан Vinum эзлэхүүн»</a> зурагт
	үзүүлэгдсэн байгаа.  Судлуудын харанхуй байдал plex-ийн хаягийн талбар дахь
	байрлалыг илэрхийлнэ: хамгийн цайвар судлууд нь эхлээд байх бөгөөд хамгийн
	харанхуйнууд нь сүүлд байна.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84677712"></a>22.6.4. Уян хатан чанар ба ажиллагаа</h3></div></div></div><p><a id="vinum-resilience"></a>Хангалттай тоног төхөөрөмжийн
	тусламжтайгаар стандарт <span class="trademark">UNIX</span>® хуваалтуудтай харьцуулах юм бол нэмэгдсэн
	уян хатан чанар болон нэмэгдсэн ажиллагаа аль алиныг нь үзүүлдэг  эзлэхүүнүүдийг
	бүтээх боломжтой юм. Нийтлэг тохиргооны файл иймэрхүү байж болох
	юм:</p><pre class="programlisting">
	volume raid10
      plex org striped 512k
        sd length 102480k drive a
        sd length 102480k drive b
        sd length 102480k drive c
        sd length 102480k drive d
        sd length 102480k drive e
      plex org striped 512k
        sd length 102480k drive c
        sd length 102480k drive d
        sd length 102480k drive e
        sd length 102480k drive a
        sd length 102480k drive b</pre><p>Хоёр дахь plex-ийн дэд дискнүүд нь эхний plex дэхээс хоёр хөтчөөр
	ялгаатай: дамжуулалт хоёр хөтчөөр дамжин хийгдсэн ч гэсэн бичилтүүд адил
	дэд дискнүүд уруугаа хийгдэхгүй байхыг энэ нь баталгаажуулж өгдөг.</p><p><a class="xref" href="vinum-examples.html#vinum-raid10-vol" title="Зураг 22.7. Толин тусгал хийгдсэн, судалчлагдсан Vinum эзлэхүүн">Зураг 22.7, «Толин тусгал хийгдсэн, судалчлагдсан Vinum эзлэхүүн»</a> нь энэ эзлэхүүний бүтцийг илэрхийлж
	байна.</p><p>
	</p><div class="figure"><a id="vinum-raid10-vol"></a><div class="figure-title">Зураг 22.7. Толин тусгал хийгдсэн, судалчлагдсан Vinum эзлэхүүн</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-raid10-vol.png" alt="Толин тусгал хийгдсэн, судалчлагдсан Vinum эзлэхүүн" /></div></div></div><p><br class="figure-break" />
      </p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="vinum-objects.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="vinum-vinum.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="vinum-object-naming.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">22.5. Vinum обьектууд </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 22.7. Обьектийн нэрлэлт</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>