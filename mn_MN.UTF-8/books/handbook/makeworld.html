<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>25.7. «Ертөнц»ийг дахин бүтээх нь</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="updating-upgrading.html" title="Бүлэг 25. FreeBSD-г шинэчилж сайжруулах нь" /><link rel="prev" href="synching.html" title="25.6. Өөрийн эхийг хамгийн сүүлийн хэлбэрт аваачих нь" /><link rel="next" href="make-delete-old.html" title="25.8. Хуучин файлууд, хавтаснууд болон сангуудыг устгах" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">25.7. <span class="quote">«<span class="quote">Ертөнц</span>»</span>ийг дахин бүтээх нь</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="synching.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 25. FreeBSD-г шинэчилж сайжруулах нь</th><td width="20%" align="right"> <a accesskey="n" href="make-delete-old.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makeworld"></a>25.7. <span class="quote">«<span class="quote">Ертөнц</span>»</span>ийг дахин бүтээх нь</h2></div></div></div><a id="idp86142416" class="indexterm"></a><p>Та өөрийн локал эх модоо FreeBSD-ийн тухайн хувилбарын (FreeBSD-STABLE,
	FreeBSD-CURRENT, гэх зэрэг) хамгийн сүүлийн үеийн хэлбэрт аваачсаныхаа
	дараа та эх модоо ашиглан системийг дахин бүтээж болно.</p><div xmlns="" class="warning"><h3 class="admontitle">Нөөц хий: </h3><p xmlns="http://www.w3.org/1999/xhtml">Та дээрхийг хийхээсээ <span class="emphasis"><em>өмнө</em></span> өөрийн системийг
	нөөцлөн авах нь ямар чухал болохыг энэ нь хангалттай хэлж өгч чаддаггүй.
	Ертөнцийг дахин бүтээх нь (хэрэв та эдгээр заавруудыг дагасан тохиолдолд)
	хялбар боловч таныг алдаа гаргахад эсвэл бусдын эх модонд хийсэн алдаанууд
	нь таны системийг ачаалагдахгүй болгох нөхцөлд зайлшгүй хүргэдэг.</p><p xmlns="http://www.w3.org/1999/xhtml">Нөөц хийж авсан эсэхээ шалгаарай. Засварлах уян диск эсвэл ачаалагдах
	CD-г гарын дор байлгаарай. Магадгүй та үүнийг хэзээ ч хэрэглэхгүй байж болох
	юм, гэхдээ харамсахаасаа өмнө аюулгүй байж байх нь илүү дээр юм!</p></div><div xmlns="" class="warning"><h3 class="admontitle">Тохирох захидлын жагсаалтад бүртгүүл: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp86146512" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD-STABLE болон FreeBSD-CURRENT салбарууд нь угаасаа
	<span class="emphasis"><em>хөгжүүлэлтэд байдаг</em></span>. FreeBSD-д хувь нэмэр
	оруулж байгаа хүмүүс нь хүн л учраас алдаанууд заримдаа гардаг.</p><p xmlns="http://www.w3.org/1999/xhtml">Заримдаа эдгээр алдаанууд нь нэг их хор хөнөөлгүй бөгөөд ердөө л таны
	системийг шинэ оношлогооны анхааруулга хэвлэхэд хүргэдэг. Эсвэл
	өөрчлөлт нь сүйрлийн байж болзошгүй байдаг бөгөөд таны системийг ачаалагдахгүй
	болгож эсвэл файлын системүүдийг чинь устгаж (эсвэл бүр муу юм болж) болох юм.</p><p xmlns="http://www.w3.org/1999/xhtml">Эдгээртэй адил асуудлууд гарвал асуудлын учир шалтгаан болон аль систем дээр
	энэ асуудал хамааралтайг тайлбарласан <span class="quote">«<span class="quote">heads up буюу бүхний сонорт</span>»</span>
	хандсан зарлал тохирох захидлын жагсаалтад  илгээгддэг. Тэгээд
	<span class="quote">«<span class="quote">all clear буюу бүгд цэвэр</span>»</span> зарлал асуудал шийдэгдсэний дараа
	тавигддаг.</p><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв та FreeBSD-STABLE эсвэл FreeBSD-CURRENT-ийг дагахыг оролдож <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-stable" target="_top">FreeBSD-STABLE захидлын жагсаалт</a>
	эсвэл <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">FreeBSD-CURRENT захидлын жагсаалт</a>-г харгалзуулан уншихгүй байгаа бол энэ нь та өөртөө гай төвөг асууж
	байна л гэсэн үг юм.</p></div><div xmlns="" class="warning"><h3 class="admontitle"><code xmlns="http://www.w3.org/1999/xhtml" class="command">make world</code> тушаалыг бүү ашигла: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ихэнх хуучин баримтууд үүнд зориулан <code class="command">make world</code>
	тушаалыг ашиглахыг зөвлөдөг. Энэ тушаалыг ажиллуулснаар зарим нэг чухал алхмуудыг
	алгасах бөгөөд та юу хийж байгаагаа  мэдэж байгаа тохиолдолд үүнийг зөвхөн ашиглах
	хэрэгтэй. Бараг ихэнх тохиолдолд <code class="command">make world</code> хийх нь
	буруу зүйл бөгөөд энд тайлбарласан процедурыг түүний оронд ашиглах ёстой юм.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="canonical-build"></a>25.7.1. Шалгагдсан аргаар өөрийн системийг шинэчлэх нь</h3></div></div></div><p>Өөрийн системийг шинэчлэхийн тулд өөрт чинь байгаа эхийн хувилбарт шаардлагатай байгаа
	бүтээхээс урьдах алхмууд та <code class="filename">/usr/src/UPDATING</code>
	файлд байгаа эсэхийг шалгах хэрэгтэй бөгөөд үүний дараа энд дурдсан процедурыг
	ашиглана.</p><p>Эдгээр шинэчлэлтийн алхмууд нь таныг хуучин хөрвүүлэгч, хуучин цөм, хуучин
	ертөнц болон хуучин тохиргооны файлууд бүхий FreeBSD-ийн хуучин хувилбар ашиглаж
	байгаа гэж тооцдог. <span class="quote">«<span class="quote">Ертөнц</span>»</span> гэдгийг бид энд системийн гол хоёртын
	файлууд, сангууд болон програмын файлууд гэж ойлгоно. Хөрвүүлэгч нь
	<span class="quote">«<span class="quote">ертөнц</span>»</span>ийн хэсэг бөгөөд цөөн асуудлуудтай байдаг.</p><p>Таныг шинэ системийн эхийг аль хэдийн авсан байгаа гэж бид бас
	энд тооцдог. Тухайн систем дээр байгаа эхүүд бас хуучин байвал шинэ хувилбар
	руу шилжүүлэх талаар бичсэн <a class="xref" href="synching.html" title="25.6. Өөрийн эхийг хамгийн сүүлийн хэлбэрт аваачих нь">Хэсэг 25.6, «Өөрийн эхийг хамгийн сүүлийн хэлбэрт аваачих нь»</a>-с дэлгэрэнгүйг
	үзнэ үү.</p><p>Системийг эхээс шинэчлэх нь эхлээд санагдсанаасаа илүү нарийн байдаг
	бөгөөд тойрон гарах боломжгүй, хамаарлууд бүхий шинэ асуудлууд гардгаас болоод
	FreeBSD-ийн хөгжүүлэгчид зөвлөдөг чиг хандлагаа жил ирэх тутам нэлээнээр
	өөрчлөх шаардлагатай болсон. Энэ хэсгийн үлдсэн хэсэг нь одоогоор зөвлөж
	байгаа шинэчлэх дарааллын талаар тайлбарлах болно.</p><p>Амжилттай болох шинэчлэх дараалал бүр дараах асуудлуудыг
	шийдэх ёстой:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Хуучин хөрвүүлэгч шинэ цөмийг бүтээж чадахгүй байж болох
	    юм. (Хуучин хөрвүүлэгчид заримдаа алдаатай байдаг.) Тиймээс шинэ
	    цөмийг шинэ хөрвүүлэгчээр бүтээх ёстой. Ялангуяа шинэ цөм бүтээхээсээ
	    өмнө шинэ хөрвүүлэгчийг бүтээх хэрэгтэй. Энэ нь шинэ хөрвүүлэгчийг
	    заавал шинэ цөмөөс өмнө <span class="emphasis"><em>суулгасан</em></span> байх ёстой
	    гэсэн үг биш юм.</p></li><li class="listitem"><p>Шинэ ертөнц шинэ цөмийн боломжууд дээр тулгуурлаж байж
	    болох юм. Тиймээс шинэ цөмийг шинэ ертөнцийг суулгахаасаа өмнө
	    суулгасан байх шаардлагатай.</p></li></ul></div><p>Эдгээр хоёр асуудал нь бидний дараагийн хэсгүүдэд тайлбарлах
	гол <code class="buildtarget">buildworld</code>,
	<code class="buildtarget">buildkernel</code>,
	<code class="buildtarget">installkernel</code>,
	<code class="buildtarget">installworld</code> дарааллын үндэс болдог.
	Энэ нь одоогоор зөвлөдөг шинэчлэлтийн просессийг та яагаад заавал
	сонгох ёстойг харуулсан бүх шалтгаануудын бүрэн дүүрэн жагсаалт
	биш юм. Зарим нэг тийм ч мэдээжийн биш зүйлсийг доор жагсаав:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Хуучин ертөнц шинэ цөм дээр зөв ажиллахгүй байж болох учир
	    та шинэ цөм суулгасныхаа дараа шинэ ертөнцийг даруйхан суулгах
	    ёстой.</p></li><li class="listitem"><p>Шинэ ертөнц суулгахаасаа өмнө зарим нэг тохиргооны өөрчлөлтүүдийг
	    хийх ёстой боловч зарим нь хуучин ертөнцийг эвдэж магадгүй юм. Тийм
	    болохоор хоёр өөр тохиргооны шинэчлэлтийн алхам ерөнхийдөө шаардлагатай
	    байдаг.</p></li><li class="listitem"><p>Ихэнх хэсгийн хувьд шинэчлэх процесс нь зөвхөн файлуудыг солих юм уу
	    эсвэл нэмдэг бөгөөд байгаа хуучин файлуудыг устгадаггүй. Цөөн тохиолдолд
	    энэ нь асуудал үүсгэж болох юм. Үүний дүнд шинэчлэх арга зам нь зарим нэг
	    алхам дээр гараар устгах тодорхой файлуудыг заримдаа зааж өгдөг. Үүнийг
	    ирээдүйд автоматчилах юм уу эсвэл үгүй ч байж болох юм.</p></li></ul></div><p>Эдгээр зүйлс нь дараах зөвлөсөн дараалалд хүргэдэг. Тухайн шинэчлэлтүүдэд
	зориулсан дэлгэрэнгүй дараалал нь нэмэлт алхмуудыг шаардаж болохыг санаарай.
	Гэхдээ эдгээр гол процессууд тодорхой хугацаагаар өөрчлөгдөхгүй байх
	ёстой юм:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="command">make buildworld</code></p><p>Энэ нь эхлээд шинэ хөрвүүлэгч болон хамааралтай цөөн хэрэгслүүдийг
	    бүтээж дараа нь шинэ ертөнцийн бусдыг хөрвүүлэхийн тулд шинэ хөрвүүлэгчийг
	    ашигладаг. Үр дүн нь <code class="filename">/usr/obj</code>-д
	    хадгалагддаг.</p></li><li class="listitem"><p><code class="command">make buildkernel</code></p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> болон <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>-ийг ашигладаг хуучин аргаасаа
	    ялгаатай нь энэ тушаал <code class="filename">/usr/obj</code>
	    санд байрлаж байгаа <span class="emphasis"><em>шинэ</em></span> хөрвүүлэгчийг ашигладаг.
	    Энэ нь хөрвүүлэгч болон цөмийн хооронд тохиромжгүй байдал үүсэхээс таныг
	    хамгаалдаг.</p></li><li class="listitem"><p><code class="command">make installkernel</code></p><p>Шинэ цөм болон цөмийн модулиудыг дискэд байрлуулж шинээр шинэчилсэн
	    цөмөөр ачаалах боломжийг бүрдүүлдэг.</p></li><li class="listitem"><p>Ганц хэрэглэгчийн горим руу ачаалан орно.</p><p>Ганц хэрэглэгчийн горим нь ажиллаж байгаа програм хангамжуудыг
	    шинэчлэхэд гарах асуудлуудыг багасгадаг. Энэ нь бас шинэ цөм дээр
	    хуучин ертөнцийг ажиллуулахад гарах асуудлыг багасгадаг.</p></li><li class="listitem"><p><code class="command">mergemaster -p</code></p><p>Энэ нь шинэ ертөнцөд зориулж зарим нэг тохиргооны файлуудын эхний
	    шинэчлэлтүүдийг хийдэг. Жишээ нь энэ нь шинэ хэрэглэгчийн бүлгийг
	    системд нэмэх, эсвэл шинэ хэрэглэгчийн нэрсийг нууц үгийн мэдээллийн санд
	    нэмж болох юм. Сүүлийн шинэчлэлтээс хойш шинэ бүлгүүд эсвэл системийн
	    тусгай хэрэглэгчийн бүртгэлүүдийг нэмэх үед энэ нь ихэвчлэн шаардлагатай
	    байдаг. Ингэснээр <code class="buildtarget">installworld</code> алхам нь
	    шинээр суулгагдсан системийн хэрэглэгч эсвэл системийн бүлгийн нэрсийг
	    ямар ч асуудалгүйгээр ашиглах боломжтой болох юм.</p></li><li class="listitem"><p><code class="command">make installworld</code></p><p><code class="filename">/usr/obj</code> сангаас
	    ертөнцийг хуулдаг. Та одоо диск дээрээ шинэ цөм болон шинэ ертөнцтэй
	    боллоо.</p></li><li class="listitem"><p><code class="command">mergemaster</code></p><p>Нэгэнт диск дээрээ шинэ ертөнцтэй болсон болохоор та одоо
	    үлдсэн тохиргооны файлуудаа шинэчилж болно.</p></li><li class="listitem"><p>Дахин ачаална.</p><p>Шинэ цөм болон шинэ ертөнцийг шинэ тохиргооны файлуудтай
	    дуудахын тулд машиныг бүрэн дахин ачаалах хэрэгтэй.</p></li></ol></div><p>Хэрэв та FreeBSD-ийн нэг салбар дотор нэг хувилбараас илүү сүүлийн
	хувилбар руу шинэчилж байгаа бол, өөрөөр хэлбэл 7.0-с 7.1 рүү шинэчилж
	байгаа бол хөрвүүлэгч, цөм, хэрэглэгчийн талбар болон тохиргооны файлуудын
	хооронд айхтар таарамжгүй байдлууд тантай бараг л тохиолдохгүй учир энэ
	арга нь заавал шаардлагатай биш байж болох юм. Хуучин арга болох
	<code class="command">make world</code> болон шинэ
	цөмийг бүтээж суулгах нь жижиг шинэчлэлтийн хувьд хангалттай сайн
	ажиллаж болох юм.</p><p>Гэхдээ гол хувилбаруудын хооронд шинэчлэлт хийж байх үед энэ арга
	замыг дагахгүй байгаа хүмүүст зарим асуудлууд учирч болох юм.</p><p>Олон шинэчлэлтүүд (өөрөөр хэлбэл 4.<em class="replaceable"><code>X</code></em>-с
	5.0 руу) тусгайлсан нэмэлт алхмуудыг (жишээ нь installworld хийхээс өмнө
	тусгай файлуудын нэрийг өөрчлөх эсвэл устгах гэх мэт) шаардаж болохыг энд
	тэмдэглэх нь зүйтэй юм. <code class="filename">/usr/src/UPDATING</code> файлыг
	анхааралтай уншина уу, ялангуяа одоогоор зөвлөсөн байгаа шинэчлэх дарааллыг
	тусгайлан тайлбарласан төгсгөл хэсгийг уншаарай.</p><p>Зарим нэг тохиромжгүй байдалтай холбоотой асуудлуудаас бүрэн
	гүйцэд хамгаалах боломжгүйг хөгжүүлэгчид мэдсэнээр энэ арга нь цаг хугацааны
	туршид сайжруулагдсаар ирсэн юм. Одоогийн арга замууд нь удаан хугацааны
	туршид тогвортой байна гэдэгт найдаж байна.</p><p>Дүгнэхэд FreeBSD-г эхээс шинэчлэхэд одоогоор зөвлөдөг арга
	бол:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make buildworld</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make buildkernel</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installkernel</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>shutdown -r now</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="buildtarget">buildworld</code> алхмаас өмнө
	  <code class="command">mergemaster -p</code> тушаалыг нэмж ажиллуулах
	    цөөн ховор тохиолдлууд байдаг. Эдгээрийн талаар <code class="filename">UPDATING</code>
	    файлд тайлбарласан байдаг. Хэрэв та FreeBSD-ийн нэг буюу олон голлох
	    хувилбаруудын дагуу шинэчлэл хийхгүй байгаа бол ерөнхийдөө энэ алхмыг
	    эмээлгүйгээр орхиж болох юм.</p></div><p><code class="buildtarget">installkernel</code> амжилттай дууссаны
	дараа та ганц хэрэглэгчийн горим уруу ачаалах хэрэгтэй (өөрөөр хэлбэл 
	<code class="command">boot -s</code> тушаалыг дуудагч мөрөөс ашиглана).
	Дараа нь доор дурдсан тушаалуудыг ажиллуулна:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -u /</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -a -t ufs</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>adjkerntz -i</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mergemaster -p</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installworld</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mergemaster</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>reboot</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Тайлбаруудыг цааш уншина уу: </h3><p xmlns="http://www.w3.org/1999/xhtml">Дээр тайлбарласан дараалал нь зөвхөн таныг эхлэхэд туслах богино
	     сэргээлт болох юм. Гэхдээ хэрэв та ялангуяа өөрчлөн тохируулсан
	     цөмийн тохиргоо ашиглахыг хүсэж байгаа бол дараах хэсгүүдийг уншиж
	     алхам бүрийг сайтар ойлгох хэрэгтэй.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="src-updating"></a>25.7.2. <code class="filename">/usr/src/UPDATING</code> файлыг унш</h3></div></div></div><p>Өөр юм хийж эхлэхээсээ өмнө та <code class="filename">/usr/src/UPDATING</code>-г
	(эсвэл эх кодын хуулбар хаана байгаа тэндээс үүнтэй төстэй файлыг ) уншаарай.
	Энэ файл нь танд учирч болзошгүй асуудлуудын талаар  чухал мэдээлэл агуулдаг бөгөөд
	эсвэл таны ажиллуулах зарим нэг тушаалуудын дарааллын талаар заасан байдаг.
	Хэрэв <code class="filename">UPDATING</code> файл таны энд уншсантай зөрчилдөж
	байвал <code class="filename">UPDATING</code> файлд заасныг дагах хэрэгтэй.</p><div xmlns="" class="important"><h3 class="admontitle">Чухал: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">UPDATING</code> файлыг унших нь өмнө нь тайлбарласнаар
	     зөв захидлын жагсаалтад бүртгүүлэхтэй харьцуулах юм бол хүлээн зөвшөөрч болохуйц
	     орлогч байж чадахгүй юм. Энэ хоёр шаардлага нь нэмэлт бөгөөд заавал шаардлагатай
	     биш юм.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="make-conf"></a>25.7.3. <code class="filename">/etc/make.conf</code> файлыг шалга</h3></div></div></div><a id="idp86262736" class="indexterm"></a><p><code class="filename">/usr/share/examples/etc/make.conf</code>
	болон <code class="filename">/etc/make.conf</code> файлыг шалгаарай.
	Эхнийх нь зарим нэг анхдагч тодорхойлолтуудыг агуулдаг – тэдгээрийн
	ихэнх нь тайлбар болон хаагдсан байдаг. Та системээ эхээс нь дахин бүтээх үедээ
	тэдгээрийг ашиглахын тулд <code class="filename">/etc/make.conf</code>
	файлд нэмэх хэрэгтэй. <code class="filename">/etc/make.conf</code> файлд
	нэмсэн болгон <code class="command">make</code> тушаалыг ажиллуулах бүрд
	бас ашиглагддаг учир өөрийн системдээ зориулан тэдгээрийг боломжийн утгаар
	тохируулж өгөх нь зүйтэй юм.</p><p>Ердийн хэрэглэгч <code class="filename">/usr/share/examples/etc/make.conf</code>
	файлд байдаг <code class="varname">NO_PROFILE</code> мөрийг
	<code class="filename">/etc/make.conf</code> уруу хуулж
	тайлбар болгосныг болиулж нээхийг магадгүй хүсэж
	болох юм.</p><p><code class="varname">NOPORTDOCS</code> гэх зэрэг бусад 
        тодорхойлолтуудыг шалгаж танд хамаатай
	эсэхээс хамаарч оруулах эсэхээ шийдээрэй.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-etc"></a>25.7.4. <code class="filename">/etc</code> дэх файлуудыг шинэчил</h3></div></div></div><p><code class="filename">/etc</code> сан нь таны системийн тохиргооны мэдээллийн
	ихэнх хэсгийг агуулдгаас гадна системийг эхлүүлэхэд ажилладаг скриптүүд энд байдаг.
	Эдгээр скриптүүдийн зарим нь FreeBSD-ийн хувилбараас хувилбарт өөрчлөгддөг.</p><p>Тохиргооны файлуудын зарим нь бас системийг ажиллуулахад өдөр тутам хэрэглэгддэг.
	Ялангуяа <code class="filename">/etc/group</code>-г дурдаж болно.</p><p><code class="command">make installworld</code> тушаалын суулгалт хийх хэсэг нь
	зарим нэг хэрэглэгчийн нэр эсвэл бүлгүүд байж байна гэж тооцдог тохиолдлууд байдаг.
	Шинэчлэл хийж байх үед эдгээр хэрэглэгчид эсвэл бүлгүүд ихэнхдээ байхгүй байдаг.
	Энэ нь шинэчлэл хийхэд асуудал учруулдаг. Зарим тохиолдолд <code class="command">make buildworld</code>
	нь эдгээр хэрэглэгчид эсвэл бүлгүүд байгаа эсэхийг шалгана.</p><p>Үүний нэг жишээ нь <code class="systemitem">smmsp</code> хэрэглэгч нэмэгдсэн
	тохиолдол юм. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mtree&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mtree</span>(8)</span></a> нь <code class="filename">/var/spool/clientmqueue</code>-г
	үүсгэхийг оролдох үед хэрэглэгчийн суулгалтын процесс энэ асуудлаас болж амжилтгүй
	болж байсан.</p><p>Үүний шийдэл нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a>-г ертөнцийг бүтээхээс урд <code class="option">-p</code>
	тохируулгатай ажиллуулах явдал юм. Энэ нь <code class="buildtarget">buildworld</code>
	эсвэл <code class="buildtarget">installworld</code> тушаалыг амжилттай болгоход
	зөвхөн шаардлагатай файлуудыг харьцуулдаг.</p><div xmlns="" class="tip"><h3 class="admontitle">Зөвлөгөө: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв та ялангуяа хэтэрхий санаа зовж байгаа бол тухайн бүлэгт харьяалагдаж байгаа
	нэрийг нь өөрчилж байгаа эсвэл устгаж байгаа ямар файлууд байгааг өөрийн системээс
	шалгаарай:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>find / -group GID -print</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">дээрх нь <em class="replaceable"><code>GID</code></em> (энэ бүлгийн нэр байж болно эсвэл
	бүлгийн тоон ID байж болно) бүлгийн эзэмшдэг файлуудыг харуулна.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makeworld-singleuser"></a>25.7.5. Ганц хэрэглэгчийн горимд шилж</h3></div></div></div><a id="idp86283600" class="indexterm"></a><p>Та системийг ганц хэрэглэгчийн горимд эмхэтгэхийг хүсэж болох юм.
	Энэ нь шинэчлэлтийг арай илүү хурдасгах илэрхий ашиг тустайгаас гадна
	системийг дахин суулгах нь системийн стандарт хоёртын файлууд,
	libraries буюу туслах сангууд, оруулгын файлууд гэх зэрэг системийн
	маш олон чухал файлуудыг хөнддөг. Ажиллаж байгаа систем дээр эдгээрийг
	өөрчлөх нь (ялангуяа хэрэв тухайн үед таны систем дээр идэвхтэй хэрэглэгчид
	байвал) гай төвгийг өөрөө эрж байна гэсэн үг юм.</p><a id="idp86284496" class="indexterm"></a><p>Өөр нэг арга бол системийг олон хэрэглэгчийн горимд эмхэтгэж дараа нь
	суулгахдаа ганц хэрэглэгчийн горимд шилжин хийх явдал юм. Хэрэв та энэ замаар
	хийхийг хүсэж байвал бүтээлт дуустал дараах алхмууд дээр хүлээж байгаарай.
	Та <code class="buildtarget">installkernel</code> эсвэл
	<code class="buildtarget">installworld</code> хийх хүртлээ ганц хэрэглэгчийн горимд
	оролгүйгээр хүлээж байж болно.</p><p>Супер хэрэглэгч болоод та доор дурдсаныг:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown now</code></strong></pre><p>ажиллаж байгаа системээс ганц хэрэглэгчийн горим уруу оруулахдаа
	ажиллуулж болно.</p><p>Өөр нэг арга нь системийг дахин ачаалаад ачаалалтын тушаал хүлээх мөрөн дээр
	<span class="quote">«<span class="quote">single user буюу ганц хэрэглэгч</span>»</span> тохируулгыг сонгоорой.
	Ингэхэд систем ганц хэрэглэгчийг ачаална. Бүрхүүлийн тушаал хүлээх мөрөнд та
	доор дурдсан тушаалуудыг ажиллуулах шаардлагатай:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fsck -p</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -u /</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -a -t ufs</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>swapon -a</code></strong></pre><p>Энэ нь файлын системүүдийг шалгаж <code class="filename">/</code>-г
	дахин унших/бичихээр дахин холбож бусад бүх UFS файлын системүүдийг
	<code class="filename">/etc/fstab</code>-д заасны дагуу холбон дараа нь
	swap-ийг идэмвхжүүлэх болно.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв таны CMOS цаг нь GMT биш локал хугацаагаар тохируулагдсан бол
		(хэрэв <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=date&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">date</span>(1)</span></a> тушаалын гаралт зөв цаг болон бүсийг харуулахгүй
		бол энэ нь үнэн) та дараах тушаалыг бас ажиллуулах хэрэгтэй болж
		болох юм:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>adjkerntz -i</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">Энэ нь таны локал цагийн бүсийн тохируулгуудыг зөвөөр тохируулж өгдөг —
		үүнийг хийхгүй бол та дараа нь зарим асуудлуудтай тулгарч магадгүй.
          </p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cleaning-usr-obj"></a>25.7.6. <code class="filename">/usr/obj</code>-г устга</h3></div></div></div><p>Системийн хэсгүүд дахин бүтээгдсэнийхээ дараа (анхдагчаар)
	<code class="filename">/usr/obj</code> дахь сангуудад байршдаг. Эдгээр сангууд нь
	<code class="filename">/usr/src</code> дотор байгааг халхалдаг.</p><p>Та <code class="command">make buildworld</code> процессийг хурдасгаж болох бөгөөд
	энэ санг бас устгаснаар хамаарлын зовлонгуудаас өөрийгөө магадгүй аврах болно.</p><p><code class="filename">/usr/obj</code> доторх зарим файлуудад immutable
	буюу хувиршгүй туг тавигдсан (дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a>-с үзнэ үү )
	байж болох бөгөөд түүнийг эхлээд арилгах хэрэгтэй.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/obj</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chflags -R noschg *</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm -rf *</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-upgrading-compilebase"></a>25.7.7. Үндсэн системийг дахин эмхэтгэ</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86312016"></a>25.7.7.1. Гаралтыг хадгалах нь</h4></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>-г ажиллуулахдаа гарах үр дүнг өөр файл уруу хадгалах нь
	зүйтэй юм. Хэрэв ямар нэг юм болохоо боливол та алдааны мэдэгдлийн хуулбартай
	байх болно. Энэ нь танд юу буруутсаныг шинжлэхэд чинь тус болохгүй байж болох боловч
	та өөрийн энэ асуудлаа FreeBSD-ийн аль нэг захидлын жагсаалт уруу илгээсэн тохиолдолд
	бусдад тус болж болох юм.</p><p>Үүнийг хамгийн амраар хийхийн тулд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=script&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">script</span>(1)</span></a> тушаалыг бүх гаралтыг хадгалах
	файлын нэрийг заасан параметрийн хамтаар ашиглана. Та үүнийг ертөнцийг дахин бүтээхээс
	өмнөхөн нэн даруй хийж дараа нь процесс дууссаны дараа <strong class="userinput"><code>exit</code></strong>
	гэж бичиж гарна.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>script /var/tmp/mw.out</code></strong>
Script started, output file is /var/tmp/mw.out
<code class="prompt">#</code> <strong class="userinput"><code>make TARGET</code></strong>
<span class="emphasis"><em>… compile, compile, compile …</em></span>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong>
Script done, …</pre><p>Хэрэв та үүнийг хийх бол гаралтыг <code class="filename">/tmp</code> дотор
	<span class="emphasis"><em>битгий </em></span> хадгалаарай. Энэ сан нь таныг дахин ачаалсны
	дараа цэвэрлэгдэж болох юм. Энэ файлыг хадгалах арай илүү боломжийн газар нь
	<code class="filename">/var/tmp</code> (өмнөх жишээн дээрх шиг) эсвэл
	<code class="systemitem">root</code> хэрэглэгчийн гэр сан байж болох юм.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="make-buildworld"></a>25.7.7.2. Үндсэн системийг эмхэтгэ</h4></div></div></div><p>Та <code class="filename">/usr/src</code> сан дотор байх
	шаардлагатай:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong></pre><p>(гэхдээ мэдээж таны код өөр газар байгаа тохиолдолд тэр сан уруугаа орох
	     хэрэгтэй).</p><a id="idp86323408" class="indexterm"></a><p>Ертөнцийг дахин бүтээхдээ та <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> тушаалыг ашиглана. Энэ
	тушаал нь FreeBSD-ийн агуулсан програмууд ямар дарааллаар дахин хэрхэн бүтээгдэх зэргийг
	тайлбарласан <code class="filename">Makefile</code> файлаас заавруудыг уншдаг.</p><p>Таны бичих тушаалын мөрийн ерөнхий хэлбэр нь дараах байдлаар байна:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -x -DVARIABLE target</code></strong></pre><p>Энэ жишээн дээр <code class="option">-<em class="replaceable"><code>x</code></em></code> нь
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> уруу таны дамжуулах тохируулга юм. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>-н гарын авлагын хуудаснаас
	та дамжуулж болох тохируулгуудын жишээг үзнэ үү.</p><p><code class="option">-D<em class="replaceable"><code>VARIABLE</code></em></code>
	  тохируулга нь <code class="filename">Makefile</code> уруу хувьсагч дамжуулж байна.
	<code class="filename">Makefile</code>-ийн ажиллагаа эдгээр хувьсагчуудаар
	хянагдана. Эдгээр нь <code class="filename">/etc/make.conf</code> дотор
	зааж өгсөн хувьсагчуудтай адил бөгөөд энэ нь тэдгээрийг тохируулах бас нэг өөр
	арга юм.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DNO_PROFILE target</code></strong></pre><p>тушаал нь профиль хийгдсэн сангууд бүтээгдэх ёсгүйг заах өөр нэг арга бөгөөд
	энэ нь <code class="filename">/etc/make.conf</code> дахь дараах</p><pre class="programlisting">NO_PROFILE=    true 	#    Avoid compiling profiled libraries</pre><p>мөрд харгалзах юм.</p><p><em class="replaceable"><code>target</code></em> нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>-д
	таны юу хийхийг хэлж өгдөг. <code class="filename">Makefile</code> болгон
	өөр өөр <span class="quote">«<span class="quote">targets буюу даалгаврын төрлүүдийг</span>»</span> тодорхойлдог
	бөгөөд таны сонгосон төрөл юу болохыг тодорхойлдог.</p><p>Зарим төрлүүд <code class="filename">Makefile</code>-д жагсаагдсан байх
	бөгөөд гэхдээ эдгээр нь таныг ажиллуулахад зориулагдаагүй. Харин тэдгээр нь
	системийг дахин бүтээхэд шаардлагатай алхмуудыг хэд хэдэн дэд алхмуудад хуваахын
	тулд бүтээх процессод хэрэглэгддэг.</p><p>Ихэнх тохиолдолд та <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> уруу ямар ч параметр дамжуулах
	хэрэггүй бөгөөд тэгэхээр таны тушаал дараахтай ижил байж болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make target</code></strong></pre><p>дээрх <em class="replaceable"><code>target</code></em> нь олон бүтээх тохируулгуудын
	нэг болно. Эхний төрөл нь үргэлж <code class="varname">buildworld</code>
	байх ёстой.</p><p>Нэртэйгээ адилаар <code class="buildtarget">buildworld</code> нь
	<code class="filename">/usr/obj</code> дотор бүрэн гүйцэд шинэ модыг бүтээх бөгөөд
	өөр нэг төрөл болох <code class="buildtarget">installworld</code> нь
	энэ модыг тухайн машин дээр суулгадаг.</p><p>Тусдаа тохируулгуудтай байх нь хоёр шалтгаанаар маш ач холбогдолтой юм.
	Нэгдүгээрт энэ нь бүтээлтийг таны ажиллаж байгаа системийн ямар ч хэсэгт нөлөөлөхгүйгээр
	аюулгүйгээр хийхийг танд зөвшөөрдөг. Бүтээлт нь <span class="quote">«<span class="quote">өөр дээрээ хийгдэнэ (self hosted)</span>»</span>.
	Ийм болохоор та <code class="buildtarget">buildworld</code> тушаалыг олон
	хэрэглэгчийн горимд ажиллаж байгаа машин дээр буруу нөлөөллөөс айлгүйгээр аюулгүйгээр
	хийж болно. Гэхдээ <code class="buildtarget">installworld</code> хэсгийн хувьд ганц
	хэрэглэгчийн горимд хийхийг танд зөвлөдөг.</p><p>Хоёрдугаарт энэ нь сүлжээн дэх олон машинуудыг шинэчлэхэд
	NFS холболтуудыг ашиглахыг танд зөвшөөрдөг. Хэрэв танд гурван машин байгаа бөгөөд
	<code class="systemitem">A</code>, <code class="systemitem">B</code> болон <code class="systemitem">C</code>
	машинуудыг шинэчлэхийг хүсвэл <code class="command">make
	  buildworld</code> болон <code class="command">make installworld</code>
	тушаалыг <code class="systemitem">A</code> дээр ажиллуулна.  Дараа нь <code class="systemitem">B</code> болон <code class="systemitem">C</code>
	 машинууд <code class="systemitem">A</code> дээрх <code class="filename">/usr/src</code>
	  болон <code class="filename">/usr/obj</code> сангуудыг NFS холболт хийн
	<code class="command">make installworld</code>-г ажиллуулж
	бүтээлтийн үр дүнг <code class="systemitem">B</code> болон <code class="systemitem">C</code> дээр
	суулгаж болох юм.</p><p><code class="buildtarget">world</code> төрөл байсаар байгаа хэдий ч
	танд түүнийг ашиглахгүй байхыг зөвлөж байна.</p><p>Дараах тушаалыг ажиллуул</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make buildworld</code></strong></pre><p>Хэд хэдэн зэрэгцээ процессуудыг үүсгэх <code class="option">-j</code> тохируулгыг
	<code class="command">make</code> тушаалд зааж өгөх боломжтой. Энэ нь олон CPU-тэй
	машинууд дээр хамгийн их ашигтай. Гэхдээ эмхэтгэх процессийн ихэнх нь CPU дээр биш
	IO дээр ажилладаг болохоор энэ нь бас нэг CPU-тэй машинууд дээр ашигтай юм.</p><p>Ердийн нэг CPU-тэй  машин дээр та доор дурдсаныг ажиллуулж болох юм:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -j4 buildworld</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> нь 4 хүртэлх процессийг нэгэн зэрэг ажиллуулах юм. Захидлын
	жагсаалтуудад илгээгдсэн туршлагаас харахад энэ нь ерөнхийдөө ажиллагааг хамгийн сайн
	хангаж хурдасгадаг байна.</p><p>Хэрэв та олон CPU машинтай бөгөөд SMP тохируулагдсан цөм ашиглаж байвал
	утгыг 6-аас 10 хүртэл болгож хэр хурдсаж байгааг хараарай.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86368336"></a>25.7.7.3. Хугацаа</h4></div></div></div><a id="idp86377296" class="indexterm"></a><p>Бүтээхэд шаардагдах хугацаанд олон хүчин зүйлс нөлөөлдөг, гэхдээ
	нэлээн сүүлийн үеийн машинуудын хувьд FreeBSD-STABLE модыг процессийн явцад ямар нэгэн
	заль мэх эсвэл дөт зам ашиглалгүйгээр бүтээхэд зөвхөн нэг юм уу эсвэл хоёр цаг л
	шаардагдах болох юм.  FreeBSD-CURRENT модны хувьд арай удах болов уу.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="new-kernel"></a>25.7.8. Шинэ цөмийг эмхэтгэж суулга</h3></div></div></div><a id="idp86380112" class="indexterm"></a><p>Та өөрийн шинэ системийн давуу талыг бүгдийг нь авахын тулд цөмөө дахин эмхэтгэх
	хэрэгтэй. Зарим нэг санах ойн бүтцүүд өөрчлөгдсөн байх талтай бөгөөд
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> болон <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> зэрэг програмууд нь цөм болон эх кодын хувилбарууд
	адил болтол ажилладаггүй болохоор эмхэтгэх нь үнэндээ чухал хэрэгцээтэй юм.</p><p>Үүнийг хамгийн хялбараар аюулгүйгээр хийхийн тулд <code class="filename">GENERIC</code>
	дээр тулгуурласан цөмийг бүтээж суулгах явдал юм. <code class="filename">GENERIC</code> нь
	таны системийн хувьд хэрэгцээтэй төхөөрөмжүүдийг агуулаагүй байж болох боловч
	таны системийг ядаж ганц хэрэглэгчийн горимд ачаалахад шаардлагатай бүгдийг агуулсан
	байх ёстой. Шинэ систем зөв ажиллуулахад энэ сайн тест болж өгдөг.
	<code class="filename">GENERIC</code>-с ачаалж таны систем ажиллаж байгааг шалгасны
	дараа та өөрийн ердийн цөмийн тохиргооны файл дээр тулгуурлан шинэ цөмөө бүтээж
	болох юм.</p><p>FreeBSD дээр шинэ цөм бүтээхээсээ өмнө <a class="link" href="makeworld.html#make-buildworld" title="25.7.7.2. Үндсэн системийг эмхэтгэ">ертөнцийг бүтээх</a> нь чухал юм.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв та өөрчлөн тохируулсан цөмийг бүтээхийг хүсэж тохиргооны файлаа аль
	хэдийн үүсгэсэн бол доор дурдсантай адилаар
	<code class="literal">KERNCONF=MYKERNEL</code>
	гэж ашиглаарай:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make buildkernel KERNCONF=MYKERNEL</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installkernel KERNCONF=MYKERNEL</code></strong></pre></div><p>Хэрэв та <code class="literal">kern.securelevel</code> хувьсагчийг
	1-ээс дээш болгон ихэсгэсэн <span class="emphasis"><em>бөгөөд</em></span>
	<code class="literal">noschg</code> эсвэл түүнтэй адил тугуудыг өөрийн цөмийн хоёртын
	файлд тавьсан бол <code class="buildtarget">installkernel</code> хийхийн тулд
	та ганц хэрэглэгчийн горимд шилжин орох шаардлагатай байж болох юм. Үгүй бол
	та энэ хоёр тушаалыг олон хэрэглэгчийн горимоос ямар ч асуудалгүйгээр
	ажиллуулах ёстой. <code class="literal">kern.securelevel</code>-ийн талаар
	дэлгэрэнгүйг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> болон төрөл бүрийн файлын тугуудын талаар дэлгэрэнгүйг
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a> гарын авлагын хуудаснуудаас үзнэ үү.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="new-kernel-singleuser"></a>25.7.9. Ганц хэрэглэгчийн горим уруу дахин ачаалан ор</h3></div></div></div><a id="idp86394064" class="indexterm"></a><p>Та шинэ цөмийн ажиллагааг шалгахын тулд ганц хэрэглэгчийн горимд дахин
	ачаалан орох хэрэгтэй. Үүнийг <a class="xref" href="makeworld.html#makeworld-singleuser" title="25.7.5. Ганц хэрэглэгчийн горимд шилж">Хэсэг 25.7.5, «Ганц хэрэглэгчийн горимд шилж»</a>
	дахь заавруудын дагуу хийнэ.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="make-installworld"></a>25.7.10. Шинэ системийн хоёртын файлуудыг суулга</h3></div></div></div><p>Та шинэ системийн хоёртын
	файлуудыг суулгахын тулд <code class="buildtarget">installworld</code>
	тушаалыг ашиглах шаардлагатай.</p><p>Доор дурдсаныг ажиллуулна</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installworld</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв та <code class="command">make buildworld</code> тушаалын мөрөнд
	хувьсагчуудыг зааж өгсөн бол тэдгээр хувьсагчуудыг
	<code class="command">make installworld</code> тушаалын мөрөнд бас адилаар
	зааж өгөх хэрэгтэй. Энэ бусад тохируулгуудын хувьд заавал шаардлагатай биш
	байж болох юм; жишээ нь <code class="option">-j</code> тохируулга
	<code class="buildtarget">installworld</code>-той цуг хэзээ ч хэрэглэгдэх
	ёсгүй.</p><p xmlns="http://www.w3.org/1999/xhtml">Жишээ нь хэрэв та доор дурдсаныг ажиллуулсан бол:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DNO_PROFILE buildworld</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">хоёртын файлуудыг дараах тушаалаар суулгана:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DNO_PROFILE installworld</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">ингэхгүй бол <code class="command">make buildworld</code> тушаалын ажиллах
	явцад бүтээгдээгүй профиль хийгдсэн сангуудыг (libraries) суулгахыг оролдох болно.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="post-installworld-updates"></a>25.7.11. <code class="command">make installworld</code> тушаалаар шинэчлэгдээгүй файлуудыг шинэчил</h3></div></div></div><p>Ертөнцийг дахин бүтээх нь зарим нэг сангуудыг (ялангуяа <code class="filename">/etc</code>,
	<code class="filename">/var</code> болон <code class="filename">/usr</code>) шинэ болон
	өөрчлөгдсөн тохиргооны файлуудаар шинэчилдэггүй.</p><p>Эдгээр файлуудыг хамгийн амархнаар шинэчлэх арга нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a>-г
	ашиглах явдал юм, гэхдээ та хэрэв хүсвэл үүнийг гараар ажиллуулах боломжтой юм.
	Аль ч аргыг сонголоо гэсэн  ямар нэгэн зүйл буруутсан тохиолдолд сэргээх боломжтойгоор
	<code class="filename">/etc</code>-г нөөцөлж авах нь зүйтэй юм.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mergemaster"></a>25.7.11.1. <code class="command">mergemaster</code></h4></div><div><span class="authorgroup">Хувь нэмэр болгон оруулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Том</span> <span class="surname">Рөүдс</span></span>. </span></div></div></div><a id="idp86420176" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> хэрэгсэл нь <code class="filename">/etc</code> дэх
	таны тохиргооны файлууд  болон <code class="filename">/usr/src/etc</code> эх модон дахь
	тохиргооны файлуудын ялгааг тодорхойлоход танд тусалдаг Bourne скрипт юм.
	Энэ нь системийн тохиргооны файлуудыг эх модон дахь тохиргооны файлуудаар шинэчлэх
	зориулалттай бидний зөвлөдөг шийдэл юм.</p><p>Эхлэхийн тулд өөрийн тушаал оруулах мөрөнд ердөө л <code class="command">mergemaster</code>-г
	бичиж түүний эхлэхийг нь хараарай. <code class="command">mergemaster</code> нь түр зуурын
	root орчныг <code class="filename">/</code>-с доошлуулан бүтээж төрөл бүрийн системийн тохиргооны
	файлуудаар дамждаг. Тэдгээр файлууд нь таны системд суулгагдсан файлуудтай харьцуулагддаг.
	Энэ үед хоорондоо ялгаатай файлууд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> хэлбэрээр үзүүлэгддэг бөгөөд
	<code class="option">+</code> тэмдэгтээр нэмэгдсэн эсвэл өөрчлөгдсөн мөрүүдийг
	<code class="option">-</code> тэмдэгтээр устгагдсан эсвэл шинэ мөрөөр солигдсон мөрүүдийг
	харуулдаг. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>-н синтакс болон файлын өөрчлөлтүүдийг хэрхэн үзүүлдэг талаар
	дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> гарын авлагын хуудаснаас үзнэ үү.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> нь зөрчилдөөнүүдийг үзүүлсэн файл болгоныг харуулдаг бөгөөд
	энэ үед танд шинэ файлыг устгах (түр зуурын файл гэгддэг), түр зуурын файлыг өөрчлөлгүйгээр
	суулгах, суусан байгаа файлтай түр зуурын файлыг нийлүүлэх эсвэл <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>-н
	гаралтыг дахин харах сонголтыг үзүүлэх болно.</p><p>Түр зуурын файлыг устгахыг сонгосноор бид одоо байгаа файлаа хэвээр өөрчлөлгүй үлдээж
	шинэ хувилбарыг устгахыг хүсэж байгаагаа <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a>-д хэлж байна гэсэн үг юм.
	Хэрэв та одоо байгаа файлаа өөрчлөх шалтгааныг олж харахгүй байгаагаас бусад тохиолдолд
	энэ сонголтыг хийхийг зөвлөдөггүй. Та ямар ч үед <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> тушаал хүлээх
	мөрөн дээр <span class="keycap"><strong>?</strong></span> гэж бичин тусламж авч болох юм. Хэрэв хэрэглэгч
	файлыг орхихоор сонгосон бол энэ нь бусад бүх файлуудтай ажилсны дараа дахин үзүүлэгдэн
	хэрэглэгчээс тушаал хүлээх болно.</p><p>Өөрчлөгдөөгүй түр зуурын файлыг суулгахыг сонгосноор одоо байгаа файлыг шинээр
	сольдог. Ихэнх өөрчлөгдөөгүй файлуудын хувьд энэ нь хамгийн шилдэг сонголт юм.</p><p>Файлыг нийлүүлэхийг сонгосноор текст засварлагч болон хоёр файлын агуулгыг танд
	харуулах болно. Та дэлгэцийн хоёр талд байрласан тэдгээр хоёр файлыг хоёуланг нь
	шалган аль аль талаас нь хэрэгтэй хэсгүүдийг сонгон эцсийн бүтээгдэхүүн гаргаж аван
	нийлүүлж болно. Файлууд нь дэлгэцийн хоёр талд байрлан харьцуулагдах явцад
	<span class="keycap"><strong>l</strong></span> түлхүүр таны зүүн талын агуулгыг сонгодог бол
	<span class="keycap"><strong>r</strong></span> түлхүүр нь таны баруун тал дахь агуулгыг сонгох юм.
	Гарах эцсийн үр дүн нь хоёр файлын хоёулангийн хэсгүүдийг агуулсан файл болох бөгөөд
	түүнийг дараа нь суулгах боломжтой болох юм. Энэ сонголтыг хэрэглэгчийн тохиргоонуудад
	хийгдсэн өөрчлөлтүүдтэй файлуудын хувьд хэрэглэх нь зуршил болжээ.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>-ээс гарах үр дүнг дахин харахыг сонгосноор өмнө нь
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> файлын өөрчлөлтүүдийг харуулан таны сонголтыг хүлээсний
	нэгэн адилыг дахин харуулдаг.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> системийн файлуудтай ажиллаж дууссаны дараа
	танаас бусад сонголтуудыг хийхийг хүлээдэг. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> тушаал
	нууц үгийн файлыг дахин бүтээхийг хүсэж байгаа эсэхийг танаас асууж үлдсэн
	түр зуурын файлуудыг устгах сонголтыг үзүүлэн дуусдаг.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86441168"></a>25.7.11.2. Гараар шинэчлэх</h4></div></div></div><p>Хэрэв та гараар шинэчлэхийг хүсвэл гэхдээ та <code class="filename">/usr/src/etc</code>
	сангаас <code class="filename">/etc</code> сан уруу файлуудыг зүгээр л дарж хуулж ажиллуулж
	чадахгүй. Зарим файлуудыг эхлээд <span class="quote">«<span class="quote">суулгах</span>»</span> хэрэгтэй. Учир нь
	<code class="filename">/usr/src/etc</code> сан таны <code class="filename">/etc</code>
	сангийн хуулбар шиг байхаар <span class="emphasis"><em>харагддагүй</em></span>. Мөн
	<code class="filename">/usr/src/etc</code> санд байдаггүй хэрнээ
	<code class="filename">/etc</code> сан дотор байх шаардлагатай зарим файлууд
	байдаг.</p><p>Хэрэв та <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> (зөвлөсний дагуу) ашиглаж байвал та
	<a class="link" href="makeworld.html#updating-upgrading-rebooting" title="25.7.12. Дахин ачаалах нь">дагаагийн хэсэг</a> уруу
	орж болно.</p><p>Үүнийг гараар хамгийн хялбар аргаар хийхийн тулд файлуудыг шинэ сан уруу
	суулгаж нэг бүрчлэн өөрчлөлтүүдийг хайн ажиллах хэрэгтэй.</p><div xmlns="" class="warning"><h3 class="admontitle">Өөрт байгаа <code xmlns="http://www.w3.org/1999/xhtml" class="filename">/etc</code>-г нөөцөл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Онолоор бол автоматаар энэ санд юу ч хүрдэггүй ч үүнд үргэлж итгэлтэй
	байх хэрэгтэй. Тэгэхээр өөрийн байгаа <code class="filename">/etc</code> санг
	хаа нэг аюулгүй газар хуулах хэрэгтэй. Доорхтой адилаар:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp -Rp /etc /etc.old</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml"><code class="option">-R</code> нь рекурсив хуулбар хийх бөгөөд
	<code class="option">-p</code> нь файлуудын хугацаа, эзэмшигч гэх мэтийг
	хадгалдаг.</p></div><p>Та шинэ <code class="filename">/etc</code> болон бусад файлуудыг суулгахын тулд
	хоосон сангууд бүтээх хэрэгтэй. <code class="filename">/var/tmp/root</code> нь
	боломжийн сонголт болох бөгөөд энэ сангийн доор хэд хэдэн дэд сангууд бас
	шаардлагатай болно.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/tmp/root</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/etc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make DESTDIR=/var/tmp/root distrib-dirs distribution</code></strong></pre><p>Энэ нь шаардлагатай сангийн бүтцийг бүтээж файлуудыг суулгадаг.
	<code class="filename">/var/tmp/root</code> дотор үүсгэгдсэн олон дэд сангууд
	хоосон бөгөөд тэдгээрийг устгах шаардлагатай байдаг. Үүнийг хамгийн хялбараар
	хийхийн тулд:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /var/tmp/root</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>find -d . -type d | xargs rmdir 2&gt;/dev/null</code></strong></pre><p>Энэ нь бүх хоосон сангуудыг устгана. (Хоосон биш сангуудын тухай анхааруулгуудыг
	гаргахгүйн тулд стандарт алдаа нь <code class="filename">/dev/null</code>
	уруу илгээгддэг.)</p><p>Одоо <code class="filename">/var/tmp/root</code> нь <code class="filename">/</code>-с
	доор байрлах тохирох байрлалуудад байршуулах ёстой бүх файлуудыг агуулсан байх болно.
	Та одоо эдгээр файл бүрийг шалгаж танд байгаа файлуудаас хэрхэн ялгаатай болохыг
	тогтоох хэрэгтэй.</p><p><code class="filename">/var/tmp/root</code> дотор суулгагдсан зарим файлуудын нэр
	урдаа <span class="quote">«<span class="quote">.</span>»</span> тэмдэгттэй байдгийг анхаарна уу. Энэ баримтыг бичиж байх үед
	ийм файлуудтай адил файлууд <code class="filename">/var/tmp/root/</code> болон
	<code class="filename">/var/tmp/root/root/</code> сан дахь бүрхүүлийн эхлүүлэх файлууд
	байсан, гэхдээ (таны хэзээ үүнийг уншиж байгаагаас хамаарч) өөр бусад файлууд байхыг
	үгүйсгэхгүй. Тэдгээрийг олж харахын тулд <code class="command">ls -a</code> тушаалыг
	заавал ашиглаарай.</p><p>Үүнийг хамгийн хялбар аргаар хийж хоёр файлыг харьцуулахын тулд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>
	тушаалыг ашиглах явдал юм:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>diff /etc/shells /var/tmp/root/etc/shells</code></strong></pre><p>Энэ нь таны <code class="filename">/etc/shells</code> файл болон
	шинэ <code class="filename">/var/tmp/root/etc/shells</code> файлын хоорондын
	ялгааг харуулна. Эдгээрийг ашиглаж өөрийн хийсэн өөрчлөлтүүдийг нийлүүлэх эсвэл
	өөрийн хуучин файл дээрээс хуулах эсэхээ шийдээрэй.</p><div xmlns="" class="tip"><h3 class="admontitle">Хувилбаруудын Хоорондох Ялгаануудыг Хялбараар Харьцуулахын Тулд Та
	Шинэ Root Сангаа Тухайн Үеийн Хугацаагаар Нэрлээрэй: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ертөнцийг байнга дахин бүтээнэ гэдэг нь <code class="filename">/etc</code>-г
	та бас байнга шинэчилнэ гэсэн үг бөгөөд энэ нь ердөө л жижиг хэвшмэл ажил юм.</p><p xmlns="http://www.w3.org/1999/xhtml">Та энэ процессийг <code class="filename">/etc</code> уруу нийлүүлсэн
	өөрийн хамгийн сүүлийн өөрчлөгдсөн файлуудыг хадгалснаар хурдасгаж болох юм.
	Дараах процедур үүнийг хэрхэн хийж болох нэг санааг өгч байна.</p><div xmlns="http://www.w3.org/1999/xhtml" class="procedure"><ol class="procedure" type="1"><li class="step"><p>Ертөнцийг жирийнээр бүтээ. <code class="filename">/etc</code> болон
		бусад сангуудыг шинэчлэхийг хүсэхдээ тухайн цаг дээр тулгуурласан нэр бүхий
		санг өг. Хэрэв та үүнийг 1998 оны 2 сарын 14-нд хийж байгаа бол дараах
		байдлаар хийнэ:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/tmp/root-19980214</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/etc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make DESTDIR=/var/tmp/root-19980214 \
    distrib-dirs distribution</code></strong></pre></li><li class="step"><p>Энэ сангийн өөрчлөлтүүдийг дээр дурдсаны дагуу нийлүүл.</p><p>Та дууссаныхаа дараа <code class="filename">/var/tmp/root-19980214</code>
		санг <span class="emphasis"><em>битгий</em></span> устгаарай.</p></li><li class="step"><p>Та эхийн хамгийн сүүлийн хувилбарыг татан авч дахин бүтээхдээ 1-р алхмыг дага.
		Энэ нь танд шинэ сан өгөх бөгөөд <code class="filename">/var/tmp/root-19980221</code>
		гэж нэрлэгдсэн байж болох юм (хэрэв та шинэчлэлтүүдийг хийхдээ долоо хоног
		хүлээсэн бол).</p></li><li class="step"><p>Та одоо <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> ашиглан хоёр сангийн хооронд рекурсив diff үүсгэж
		долоо хоногийн хооронд хийгдсэн өөрчлөлтүүдийг харж болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /var/tmp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>diff -r root-19980214 root-19980221</code></strong></pre><p>Ихэнхдээ энэ нь <code class="filename">/var/tmp/root-19980221/etc</code> болон
		<code class="filename">/etc</code> хоёрын хоорондох өөрчлөлтүүдийг бодох юм бол
		харьцангуй бага өөрчлөлтүүд байдаг. Өөрчлөлтүүд нь арай бага болохоор тэдгээр
		өөрчлөлтүүдийг өөрийн <code class="filename">/etc</code> сан уруу шилжүүлэх нь
		илүү хялбар байдаг.</p></li><li class="step"><p>Та одоо хоёр <code class="filename">/var/tmp/root-*</code> сангуудын аль хуучныг
		устгаж болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rm -rf /var/tmp/root-19980214</code></strong></pre></li><li class="step"><p><code class="filename">/etc</code> уруу өөрчлөлтүүдийг
		нийлүүлэх болгондоо энэ процессийг давтах хэрэгтэй.</p></li></ol></div><p xmlns="http://www.w3.org/1999/xhtml">Та <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=date&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">date</span>(1)</span></a>-г ашиглан сангийн нэрсийг автоматаар үүсгэж
		болно:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/tmp/root-`date "+%Y%m%d"`</code></strong></pre></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-upgrading-rebooting"></a>25.7.12. Дахин ачаалах нь</h3></div></div></div><p>Та ерөнхийдөө ингээд хийгээд дуусч байна. Та бүх зүйл байх ёстой байрандаа байгаа эсэхийг шалгасныхаа
	дараа системийг дахин ачаалж болно. Энгийн <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shutdown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">shutdown</span>(8)</span></a> үүнийг
	хийх болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown -r now</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86561744"></a>25.7.13. Дууслаа</h3></div></div></div><p>Одоо та өөрийн FreeBSD системийг амжилттайгаар шинэчлээд дууссан байх
		ёстой. Баяр хүргэе.</p><p>Хэрэв юмс шал буруугаар эргэвэл системийн тухайн хэсгийг дахин бүтээхэд амархан
	байдаг. Жишээ нь хэрэв та шинэчлэлтийн явцад эсвэл <code class="filename">/etc</code>-г
	нийлүүлэх явцад санамсаргүйгээр <code class="filename">/etc/magic</code> файлыг
	устгасан бол <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=file&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">file</span>(1)</span></a> тушаал ажиллахаа больно. Ийм тохиолдолд дараах
	засварыг ажиллуулж болох юм:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.bin/file</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make all install</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-questions"></a>25.7.14. Асуултууд</h3></div></div></div><div class="qandaset"><a id="idp86567248"></a><dl><dt>25.7.14.1. <a href="makeworld.html#idp86567504">Өөрчлөлт бүрт зориулан ертөнцийг дахин бүтээх хэрэгтэй юу?</a></dt><dt>25.7.14.2. <a href="makeworld.html#idp86578000">Миний эмхэтгэл маш олон дохио 11 (эсвэл бусад дохионы дугаар)
		алдаагаар амжилтгүй болсон. Юу болсон юм бол?</a></dt><dt>25.7.14.3. <a href="makeworld.html#idp86581328">Би дууссаныхаа дараа /usr/obj-г устгаж болох уу?</a></dt><dt>25.7.14.4. <a href="makeworld.html#idp86585936">Тасалдсан бүтээлтүүдийг үргэлжлүүлж болох уу?</a></dt><dt>25.7.14.5. <a href="makeworld.html#idp86605520">Би ертөнцийг бүтээхийг хэрхэн хурдасгах вэ?</a></dt><dt>25.7.14.6. <a href="makeworld.html#idp86628560">Хэрэв ямар нэг юм буруутвал би юу хийх вэ?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp86567504"></a><a id="idp86567760"></a><p><strong>25.7.14.1.</strong></p></td><td align="left" valign="top"><p>Өөрчлөлт бүрт зориулан ертөнцийг дахин бүтээх хэрэгтэй юу?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Үүнд хялбар хариулт байхгүй, учир нь өөрчлөлтийн цаад утга чанараас
		хамаарна. Жишээ нь хэрэв та <span class="application">CVSup</span>-г
		дөнгөж ажиллуулахад дараах файлууд шинэчлэгдэж байгааг үзүүлж байгаа бол:</p><pre class="screen"><code class="filename">src/games/cribbage/instr.c</code>
<code class="filename">src/games/sail/pl_main.c</code>
<code class="filename">src/release/sysinstall/config.c</code>
<code class="filename">src/release/sysinstall/media.c</code>
<code class="filename">src/share/mk/bsd.port.mk</code></pre><p>магадгүй бүхэл ертөнцийг дахин бүтээх хэрэггүй байж болох юм.
		Та тохирох дэд сангууд уруу орж <code class="command">make all install</code>
		гэж тушаалыг өгөөд л болох юм. Хэрэв зарим нэг гол чухал зүйл жишээ нь
		<code class="filename">src/lib/libc/stdlib</code> өөрчлөгдсөн бол
		та ертөнцийг эсвэл хамгийн багаар бодоход статикаар холбогдсон (statically linked)
		түүний тэдгээр хэсгүүдийг дахин бүтээх шаардлагатай болно.</p><p>Эцсийн эцэст энэ нь танаас л хамаарна. Та жишээ нь хоёр долоо хоног тутам
		ертөнцийг дахин бүтээж тэр хоёр долоо хоногийн хугацаанд өөрчлөлтүүдийг
		хуримтлуулж байгаадаа сэтгэл хангалуун байж болно. Эсвэл та зөвхөн өөрчлөгдсөн
		зүйлсүүдийг дахин бүтээхийг хүсэж магадгүй бөгөөд бүх хамаарлуудыг шийднэ
		гэдэгтээ итгэлтэй байх хэрэгтэй.</p><p>Тэгээд мэдээж энэ бүхэн таны ямар давтамжтайгаар шинэчлэхийг хүсдэг болон
		FreeBSD-STABLE эсвэл FreeBSD-CURRENT-ийн алийг дагаж байгаагаас хамаарах
		болно.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp86578000"></a><a id="idp86578256"></a><p><strong>25.7.14.2.</strong></p></td><td align="left" valign="top"><p>Миний эмхэтгэл маш олон дохио 11<a id="idp86578768" class="indexterm"></a> (эсвэл бусад дохионы дугаар)
		алдаагаар амжилтгүй болсон. Юу болсон юм бол?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Энэ нь ихэвчлэн тоног төхөөрөмжийн асуудлыг илэрхийлдэг.
		Ертөнцийг (дахин) бүтээх нь өөрийн тоног төхөөрөмжийг ачаалах тест
		хийх үр дүнтэй арга бөгөөд удаа дараа санах ойн асуудлууд байвал
		тэдгээрийг илрүүлдэг. Эмхэтгэгч нь сонин/хачин дохионуудыг хүлээн авч
		ид шидийн байдлаар амжилтгүй болсноор тэдгээр асуудлууд нь өөрсдийгөө
		зарлан тунхагладаг.</p><p>Хэрэв та бүтээлтийг дахин эхлүүлээд тэр нь процессийн өөр өөр хэсэгт
		амжилтгүй болж байвал энэ нь үүнийг тодоор зааж байна
		гэсэн үг юм.</p><p>Энэ тохиолдолд та өөрийн машин дахь бүрэлдэхүүн хэсгүүдээ өөрчлөн
		нэгээс нөгөөд сольж тавин аль нь ажиллахгүй байгааг олохоос өөр зүйл
		хийж чадахгүй л болов уу.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp86581328"></a><a id="idp86581584"></a><p><strong>25.7.14.3.</strong></p></td><td align="left" valign="top"><p>Би дууссаныхаа дараа <code class="filename">/usr/obj</code>-г устгаж болох уу?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Товчхондоо бол болно.</p><p><code class="filename">/usr/obj</code> нь эмхэтгэх үед бүтээгдсэн бүх
		обьект файлуудыг агуулдаг. Жирийн үед <code class="command">make buildworld</code>
		процессийн эхний алхмуудын нэг нь энэ санг устгаад цоо шинээр эхлэх явдал
		юм. Энэ тохиолдолд <code class="filename">/usr/obj</code>-г дууссаныхаа
		дараа байлгаад байх нь ухаалаг биш бөгөөд үүнийг устгаснаар ихээхэн хэмжээний дискний зайг
		суллах болно (одоогоор 2 GB орчим).</p><p>Гэхдээ хэрэв та юу хийж байгаагаа мэдэж байгаа бол <code class="command">make buildworld</code>
		хийхдээ энэ алхмыг алгасаж болно. Энэ нь дараа дараагийн бүтээлтийг илүү хурдасгадаг
		бөгөөд учир нь ихэнх эхүүд дахин эмхэтгэх шаардлагагүй байдаг. Үүний сул тал нь
		баригдашгүй хамаарлын асуудлууд илэрч таны бүтээлтийг хачин байдлаар амжилтгүй
		болгодог. Хэн нэгэн илүү дөтлөх гэснээсээ болоод амжилтгүй болсныг мэдэлгүй өөрийн
		бүтээлтийг амжилтгүй болсныг гомдоллосноор FreeBSD-ийн захидлын жагсаалтуудад
		хий дэмий шуугианыг удаа дараа  үүсгэдэг билээ.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp86585936"></a><a id="idp86586192"></a><p><strong>25.7.14.4.</strong></p></td><td align="left" valign="top"><p>Тасалдсан бүтээлтүүдийг үргэлжлүүлж болох уу?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Энэ нь асуудлыг олох хүртлээ та хэр хол явснаас хамаарна.</p><p><span class="emphasis"><em>Ерөнхийдөө</em></span> (энэ нь хэцүү бас хурдан дүрэм биш)
		<code class="command">make buildworld</code> процесс нь үндсэн
		багажуудын (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gcc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gcc</span>(1)</span></a>, болон <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> зэрэг) болон системийн
		сангуудын шинэ хуулбаруудыг бүтээдэг. Тэдгээр багажууд болон сангууд нь
		дараа нь суулгагддаг. Шинэ багажууд болон сангууд дараа нь
		өөрсдийгөө дахин бүтээхэд ашиглагддаг бөгөөд дахин суулгагддаг. Бүхэл бүтэн
		систем (одоо <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a> эсвэл <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=grep&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">grep</span>(1)</span></a> зэрэг ердийн хэрэглэгчийн програмууд)
		дараа нь шинэ системийн файлуудтайгаар дахин бүтээгддэг.</p><p>Хэрэв та сүүлийн шатанд байгаа бөгөөд та үүнийг мэдэж байгаа бол (та
		хадгалж байгаа гаралтаас харсан болохоор) та дараах тушаалыг ажиллуулж
		(бараг л аюулгүйгээр) болно:</p><pre class="screen"><span class="emphasis"><em>… fix the problem …</em></span>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make -DNO_CLEAN all</code></strong></pre><p>Энэ нь өмнөх <code class="command">make buildworld</code> тушаалын
		хийснийг буцаахгүй.</p><p>Хэрэв та доорх мэдэгдлийг :</p><pre class="screen">--------------------------------------------------------------
Building everything..
--------------------------------------------------------------</pre><p><code class="command">make buildworld</code> тушаалын гаралт дээр харсан
		бол магадгүй тэгж хийх нь аюулгүй байж болох юм.</p><p>Хэрэв та тийм мэдэгдэл харахгүй байгаа бол эсвэл та итгэлтэй биш байгаа бол
		харамсахаасаа өмнө аюулгүй байдлыг бодож бүтээлтийг бүр эхнээс нь дахин эхлүүлсэн нь
		дээр юм.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp86605520"></a><a id="idp86605776"></a><p><strong>25.7.14.5.</strong></p></td><td align="left" valign="top"><p>Би ертөнцийг бүтээхийг хэрхэн хурдасгах вэ?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Ганц хэрэглэгчийн горимд ажиллуул.</p></li><li class="listitem"><p><code class="filename">/usr/src</code> болон
		  <code class="filename">/usr/obj</code> сангуудыг тус тусдаа байх дискнүүд
		дээр тус тусдаа байх файлын системүүд дээр байрлуул. Хэрэв боломжтой бол
		эдгээр дискнүүдийг тус тусад нь дискний хянагчууд дээр байрлуул.</p></li><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> (нийлүүлсэн дискний драйвер) төхөөрөмж ашиглан
		эдгээр файлын системүүдийг олон дискнүүдийн дагуу байрлуулах нь бас
		арай илүү хурдасгах юм.</p></li><li class="listitem"><p>Профиль хийгдэхийг (<code class="filename">/etc/make.conf</code> файлд
		<span class="quote">«<span class="quote">NO_PROFILE=true</span>»</span> гэж зааж өг) болиул. Танд энэ бараг
		гарцаагүй хэрэггүй.</p></li><li class="listitem"><p><code class="option">-j<em class="replaceable"><code>n</code></em></code> тохируулгыг
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>-д дамжуулж олон процессийг зэрэгцээгээр ажиллуул. Энэ нь
		танд ганц эсвэл олон процессортой машин аль нь ч байсан ялгаагүйгээр ихэвчлэн тусалдаг.</p></li><li class="listitem"><p><code class="filename">/usr/src</code>-г агуулж байгаа файлын
		систем <code class="option">noatime</code> тохируулгаар холболт хийгдэж (эсвэл салгагдаж)
		болно. Энэ нь файлын систем файл уруу хандах хандалтын хугацааг бүртгэхийг
		болиулдаг. Танд магадгүй энэ мэдээлэл бараг л хэрэггүй биз ээ.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -u -o noatime /usr/src</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Сануулга: </h3><p xmlns="http://www.w3.org/1999/xhtml">Энэ жишээ <code class="filename">/usr/src</code> нь өөрийн файлын
			систем дээр байгаа гэж тооцож байгаа болно. Хэрэв энэ нь тийм биш бол
			(хэрэв энэ сан жишээ нь <code class="filename">/usr</code>-ийн хэсэг маягаар
			байгаа бол) та <code class="filename">/usr/src</code>-г биш харин тэр
			файлын системээ холболтын цэг болгон ашиглах хэрэгтэй.</p></div></li><li class="listitem"><p><code class="filename">/usr/obj</code>-г агуулж байгаа файлын систем
		<code class="option">async</code> тохируулгатай холболт хийгдэж (эсвэл салгагдаж)
		болно. Энэ нь диск уруу хийх бичилтийг асинхроноор буюу зэрэг биш хийлгэдэг.
		Өөрөөр хэлбэл бичилт нэн даруй хийгдээд өгөгдөл диск уруу цөөн секундын дараа
		бичигддэг. Энэ нь бичилтүүдийг бүлэглэхийг зөвшөөрч маш их үр дүнтэйгээр
		ажиллагааг хурдасгаж болох юм.</p><div xmlns="" class="warning"><h3 class="admontitle">Сануулга: </h3><p xmlns="http://www.w3.org/1999/xhtml">Энэ тохируулга нь таны файлын системийг илүү
			эмзэг болгохыг санаарай. Тэжээл тасалдаж машин дахин ачаалах үед
			файлын систем сэргээж болшгүй төлөвт орох магадлал энэ тохируулгатай
			байхад илүү байдаг.</p><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв <code class="filename">/usr/obj</code> нь энэ файлын систем
			дээрх цорын ганц зүйл бол энэ асуудал биш юм. Хэрэв танд уг файлын
			систем дээр өөр, үнэтэй өгөгдөл байгаа бол энэ тохируулгыг
			идэвхжүүлэхээсээ өмнө өөрийн нөөц чинь шинэ эсэхийг шалгаарай.</p></div><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -u -o async /usr/obj</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Сануулга: </h3><p xmlns="http://www.w3.org/1999/xhtml">Дээр дурдсан шиг хэрэв <code class="filename">/usr/obj</code> нь
			өөрийн файлын систем дээр биш байх юм бол жишээн дээрхийг
			тохирох холболт хийх цэгийн нэрээр солиорой.</p></div></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp86628560"></a><a id="idp86628816"></a><p><strong>25.7.14.6.</strong></p></td><td align="left" valign="top"><p>Хэрэв ямар нэг юм буруутвал би юу хийх вэ?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Таны орчинд өмнөх бүтээлтүүдийн үеийн илүү үлдэгдлүүд
		байхгүйд үнэхээр итгэлтэй байх хэрэгтэй. Энэ нь их амархан
		юм.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags -R noschg /usr/obj/usr</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm -rf /usr/obj/usr</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong></pre><p>Тиймээ, <code class="command">make cleandir</code> тушаалыг үнэндээ
		хоёр удаа ажиллуулах шаардлагатай.</p><p>Тэгээд <code class="command">make buildworld</code>
		тушаалыг эхлүүлж бүх процессийг дахин эхлүүл.</p><p>Хэрэв та асуудалтай хэвээр байгаа бол алдаа болон
		<code class="command">uname -a</code> тушаалын дүнг <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">FreeBSD ерөнхий асуултууд захидлын жагсаалт</a>
		уруу явуулаарай. Өөрийн тохиргооныхоо талаар бусад асуултанд
		хариулахад бэлэн байгаарай!</p></td></tr></tbody></table></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="synching.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="updating-upgrading.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="make-delete-old.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">25.6. Өөрийн эхийг хамгийн сүүлийн хэлбэрт аваачих нь </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 25.8. Хуучин файлууд, хавтаснууд болон сангуудыг устгах</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>