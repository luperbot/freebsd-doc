<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>32.2. Гарцууд болон Чиглүүлэлтүүд</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="advanced-networking.html" title="Бүлэг 32. Сүлжээний нэмэлт ойлголтууд" /><link rel="prev" href="advanced-networking.html" title="Бүлэг 32. Сүлжээний нэмэлт ойлголтууд" /><link rel="next" href="network-wireless.html" title="32.3. Утасгүй сүлжээ" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">32.2. Гарцууд болон Чиглүүлэлтүүд</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="advanced-networking.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 32. Сүлжээний нэмэлт ойлголтууд</th><td width="20%" align="right"> <a accesskey="n" href="network-wireless.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-routing"></a>32.2. Гарцууд болон Чиглүүлэлтүүд</h2></div><div><span class="authorgroup">Хувь нэмэр болгон оруулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Коранф</span> <span class="surname">Грайфон</span></span>. </span></div></div></div><a id="idp92968912" class="indexterm"></a><a id="idp92969424" class="indexterm"></a><a id="idp92969936" class="indexterm"></a><p>Сүлжээгээр нэг машин нөгөө машиныг олж чаддаг байхын тулд нэгээс нөгөө
	уруу хэрхэн хүрэхийг тайлбарласан арга замууд байх ёстой. Үүнийг
	<em class="firstterm">routing</em> буюу <em class="firstterm">чиглүүлэлт хийх</em>
	гэдэг. <span class="quote">«<span class="quote">Чиглүүлэлт</span>»</span> нь <span class="quote">«<span class="quote">destination буюу зорьсон газар</span>»</span> болон
	<span class="quote">«<span class="quote">гарц</span>»</span> хаягийн хослолоор тодорхойлогддог. Хэрэв та энэ
	<span class="quote">«<span class="quote">зорьсон газар</span>»</span> уруу очихоор оролдож байгаа бол
	энэ <span class="quote">«<span class="quote">гарц</span>»</span>аар холбогдоно гэж энэ хослол нь зааж байгаа юм.
	Гурван төрлийн зорьсон газар байдаг: эдгээр нь хостууд, дэд сүлжээнүүд болон
	<span class="quote">«<span class="quote">анхдагч</span>»</span> юм. <span class="quote">«<span class="quote">Анхдагч чиглүүлэлт</span>»</span> нь
	аль ч чиглүүлэлтэд хамаарахгүй бол ашиглагддаг. Бид анхдагч чиглүүлэлтийн
	талаар дараа нь арай дэлгэрэнгүй ярилцах болно. Бас гурван төрлийн гарц байдаг:
	эдгээр нь хостууд, интерфэйсүүд (бас <span class="quote">«<span class="quote">links</span>»</span> буюу холбоосууд гэгддэг)
	болон Ethernet тоног төхөөрөмжийн хаягууд (MAC хаягууд) юм.
    </p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92974672"></a>32.2.1. Жишээ</h3></div></div></div><p>Чиглүүлэлтийн өөр ойлголтуудыг үзүүлэхийн тулд бид <code class="command">netstat</code>-ийн
	дараах жишээг ашиглах болно:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>netstat -r</code></strong>
Routing tables

Destination      Gateway            Flags     Refs     Use     Netif Expire

default          outside-gw         UGSc       37      418      ppp0
localhost        localhost          UH          0      181       lo0
test0            0:e0:b5:36:cf:4f   UHLW        5    63288       ed0     77
10.20.30.255     link#1             UHLW        1     2421
example.com      link#1             UC          0        0
host1            0:e0:a8:37:8:1e    UHLW        3     4601       lo0
host2            0:e0:a8:37:8:1e    UHLW        0        5       lo0 =&gt;
host2.example.com link#1             UC          0        0
224              link#1             UC          0        0</pre><a id="idp92977360" class="indexterm"></a><p>Эхний хоёр мөр нь анхдагч чиглүүлэлт (бид үүнийг <a class="link" href="network-routing.html#network-routing-default" title="32.2.2. Анхдагч чиглүүлэлтүүд">дараагийн хэсэг</a>т
	авч үзэх болно) болон <code class="systemitem">localhost</code> чиглүүлэлтийг заана.</p><a id="idp92979152" class="indexterm"></a><p>Энэ чиглүүлэлтийн хүснэгтийн заасан <code class="literal">localhost</code>-д зориулж
	ашиглах  интерфэйс (<code class="literal">Netif</code> багана) нь
	<code class="filename">lo0</code> бөгөөд энэ нь бас loopback буюу буцах
	интерфэйс гэгддэг. Энэ нь уг очих газрын хувьд бүх урсгалыг LAN уруу илгээхийн оронд
	дотооддоо үлдээнэ гэж хэлж байгаа бөгөөд энэ нь хаанаас эхэлсэн тэндээ буцаж
	очих учраас тэр юм.</p><a id="idp92981328" class="indexterm"></a><p>Дараагийн байгаа зүйл бол <code class="systemitem">0:e0:</code>-с
	эхэлсэн хаягууд юм. Эдгээр нь Ethernet тоног төхөөрөмжийн хаягууд бөгөөд
	бас MAC хаягууд гэгддэг. FreeBSD нь локал Ethernet дээр байгаа
	ямар ч хостуудыг (жишээн дээрх <code class="systemitem">test0</code>) автоматаар
	таньж тэр хостод зориулж шууд түүн уруу <code class="filename">ed0</code>
	Ethernet интерфэйсээр гарахаар чиглүүлэлт нэмдэг. Энэ төрлийн
	чиглүүлэлттэй холбоотой хугацаа (<code class="literal">Expire</code> багана)
	байдаг бөгөөд энэ нь заасан хугацаанд тэр хостоос бид нар юу ч сонсохгүй үед
	ашиглагддаг. Ийм явдал болоход энэ хост уруу заагдсан чиглүүлэлт автоматаар
	устгагдах болно. Эдгээр хостууд нь RIP (Routing	Information Protocol
	буюу чиглүүлэлтийн мэдээллийн протокол) гэгддэг арга замаар танигддаг бөгөөд энэ нь
	хамгийн богино замыг тодорхойлсны үндсэн дээр локал хостууд уруу очих чиглүүлэлтийг
	олдог.</p><a id="idp92988752" class="indexterm"></a><p>FreeBSD нь бас локал дэд сүлжээнд зориулж дэд сүлжээний чиглүүлэлтүүдийг
	нэмдэг (<code class="systemitem">10.20.30.255</code> нь
	<code class="systemitem">10.20.30</code> дэд сүлжээний цацах хаяг бөгөөд
	<code class="systemitem">example.com</code> нь тэр дэд сүлжээтэй холбоотой
	домэйний нэр юм). <code class="literal">link#1</code> тэмдэглэгээ нь машин дахь
	эхний Ethernet картыг заана. Та тэдгээрт зориулж ямар ч нэмэлт интерфэйс
	заагдаагүйг харах болно.</p><p>Эдгээр бүлгүүд (локал сүлжээний хостууд болон локал дэд сүлжээнүүд) нь
	автоматаар <span class="application">routed</span> гэгддэг дэмоноор
	тохируулагдсан чиглүүлэлтүүдтэй байна. Хэрэв энэ нь ажиллахгүй байгаа бол
	зөвхөн статикаар тодорхойлогдсон (өөрөө хэлбэл илэрхий оруулж өгсөн)
	чиглүүлэлтүүд байх болно.</p><p><code class="literal">host1</code> мөр нь бидний хостыг зааж байгаа бөгөөд
	түүнийг Ethernet хаягаар нь мэддэг. Бид илгээж байгаа хост болохоор FreeBSD нь
	Ethernet интерфэйсээр илгээхийн оронд loopback буюу буцах интерфэйсийг
	(<code class="filename">lo0</code>) ашиглахаа мэддэг.</p><p>Хоёр <code class="literal">host2</code> мөрүүд нь биднийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>
	alias буюу өөр нэр ашиглах үед (Ethernet-ийн талаар дурдсан хэсгээс бид үүнийг яагаад хийдгийг
	үзээрэй) учирч болзошгүй зүйлийн жишээ юм. <code class="filename">lo0</code>
	интерфэйсийн дараа байгаа <code class="literal">=&gt;</code> тэмдэг нь бид зөвхөн
	loopback буюу буцах интерфэйсийг ашиглаад зогсохгүй (энэ хаяг нь бас локал хостыг хэлж
	байгаа болохоор) энэ нь ялангуяа alias буюу өөр нэр гэдгийг хэлж байгаа юм.
	Ийм чиглүүлэлтүүд нь alias-ийг дэмждэг хост дээр зөвхөн харагдана; локал сүлжээн
	дэх бусад бүх хостууд ийм чиглүүлэлтүүдийнхээ хувьд ердөө л <code class="literal">link#1</code>
	мөртэй байна.</p><p>Төгсгөлийн мөр (очих дэд сүлжээ <code class="systemitem">224</code>) нь
	multicast-тай ажиллаж байгаа бөгөөд үүнийг өөр хэсэгт авч үзэх болно.</p><p>Төгсгөлд нь чиглүүлэлт бүрийн төрөл бүрийн шинж чанаруудыг <code class="literal">Flags</code>
	баганаас харж болно. Эдгээр тугуудын зарим болон тэдгээрийн харгалзах утга санаануудыг
	доорх богино хүснэгтээр харуулав:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>U</td><td>Up: Чиглүүлэлт идэвхтэй байна.</td></tr><tr><td>H</td><td>Host: Чиглүүлэлтийн очих газар нь ганц хост байна.</td></tr><tr><td>G</td><td>Gateway: Энэ очих газарт зориулж бүгдийг энэ алсын систем уруу
		илгээх бөгөөд алсын систем нь тэндээсээ хаашаа илгээхээ олох болно.</td></tr><tr><td>S</td><td>Static: Энэ чиглүүлэлт нь системээр автоматаар үүсгэгдсэн биш
		гараар тохируулагдсан.</td></tr><tr><td>C</td><td>Clone: Бидний холбогдож байгаа машины хувьд энэ чиглүүлэлт
		дээр үндэслэн шинэ чиглүүлэлт үүсгэдэг. Энэ төрлийн чиглүүлэлт нь ихэвчлэн
		локал сүлжээнүүдэд ашиглагддаг.</td></tr><tr><td>W</td><td>WasCloned: Локал сүлжээний (Clone) чиглүүлэлт дээр
		үндэслэн автоматаар тохируулагдсан чиглүүлэлтийг заана.</td></tr><tr><td>L</td><td>Link: Чиглүүлэлт нь Ethernet тоног төхөөрөмжтэй
		холбоотой зүйлийг хамарна.</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-routing-default"></a>32.2.2. Анхдагч чиглүүлэлтүүд</h3></div></div></div><a id="idp93029840" class="indexterm"></a><p>Локал систем нь алсын хост уруу холболт хийх хэрэгтэй үед мэдэгдэж байгаа зам
	байгаа эсэхийг тодорхойлохын тулд энэ нь чиглүүлэлтийн хүснэгтээс шалгадаг. Хэрэв алсын
	хост нь бидний хэрхэн хүрэхийг нь мэдэх (клон хийгдсэн чиглүүлэлтүүд) дэд сүлжээнд
	байгаа бол систем тэр интерфэйсээр холбогдож болох эсэхийг шалгадаг.</p><p>Хэрэв бүх мэдэгдэж байгаа зам амжилтгүй болвол системд сүүлчийн ганц
	сонголт <span class="quote">«<span class="quote">анхдагч</span>»</span> чиглүүлэлт үлдэнэ. Энэ чиглүүлэлт нь гарц чиглүүлэлтийн
	тусгай төрөл (системд ихэвчлэн ганц байдаг) бөгөөд тугнуудын талбартаа үргэлж
	<code class="literal">c</code> гэж тэмдэглэгдсэн байдаг. Локал сүлжээн дэх хостын хувьд
	энэ гарц нь машины гадаад ертөнц уруу шууд холбогдох зүйлээр (PPP холболт, DSL,
	кабель модем, T1, эсвэл өөр сүлжээний интерфэйсээр) тохируулагддаг.</p><p>Хэрэв та өөрөө гаднах ертөнц уруу гарц маягаар ажиллаж байгаа машины хувьд анхдагч
	чиглүүлэлтийг тохируулж байгаа бол анхдагч чиглүүлэлт нь таны Интернэтийн Үйлчилгээ
	Үзүүлэгчийн (ISP) сайт дахь гарц машин болох юм.</p><p>Анхдагч чиглүүлэлтүүдийн жишээг харцгаая. Энэ нь нийтлэг тохиргоо юм:</p><div class="mediaobject"><img src="advanced-networking/net-routing.png" /></div><p><code class="systemitem">Local1</code> болон
	<code class="systemitem">Local2</code> хостууд нь таны сайтад байна.
	<code class="systemitem">Local1</code> нь ISP уруу dial-up PPP холболтоор
	холбогдсон. Энэ PPP сервер компьютер нь дотоод сүлжээгээр
	өөр нэг гарц компьютер уруу гадаад интерфэйсээр ISP-ийн Интернэт өгч байгаа  уруу
	холбогдсон байна.</p><p>Таны машин бүрийн хувьд анхдагч чиглүүлэлтүүд нь ийм болно:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Хост</th><th>Анхдагч Гарц</th><th>Интерфэйс</th></tr></thead><tbody><tr><td>Local2</td><td>Local1</td><td>Ethernet</td></tr><tr><td>Local1</td><td>T1-GW</td><td>PPP</td></tr></tbody></table></div><p>Түгээмэл асуулт нь <span class="quote">«<span class="quote">Бид яагаад <code class="systemitem">Local1</code>-ийн хувьд
	түүний холбогдсон ISP-ийн серверийн оронд <code class="systemitem">T1-GW</code>-г анхдагч гарц гэж
	тохируулсан бэ?</span>»</span> гэсэн асуулт юм.</p><p>PPP интерфэйс нь өөрийн талын холболтондоо ISP-ийн локал сүлжээн дэх хаягийг ашиглаж
	байгаа болохоор ISP-ийн локал сүлжээн дэх бусад дурын машинуудад зориулсан чиглүүлэлт
	автоматаар үүсгэгдэх болно гэдгийг санаарай. Ийм учраас та <code class="systemitem">T1-GW</code>
	машин уруу хэрхэн хүрэхээ аль хэдийн мэдэж байгаа болохоор ISP-ийн сервер уруу урсгал
	илгээх дундын алхам шаардлагагүй юм.</p><p>Өөрийн локал сүлжээний хувьд <code class="systemitem">X.X.X.1</code> хаягийг гарц хаяг болгож ашиглах нь
	түгээмэл байдаг. Тэгэхээр (адил жишээг ашиглаад) хэрэв таны локал C ангиллын
	хаягийн талбар <code class="systemitem">10.20.30</code> байсан бөгөөд
	таны ISP <code class="systemitem">10.9.9</code>-г ашиглаж байгаа бол
	анхдагч чиглүүлэлтүүд нь ийм байна:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Хост</th><th>Анхдагч Чиглүүлэлт</th></tr></thead><tbody><tr><td>Local2 (10.20.30.2)</td><td>Local1 (10.20.30.1)</td></tr><tr><td>Local1 (10.20.30.1, 10.9.9.30)</td><td>T1-GW (10.9.9.1)</td></tr></tbody></table></div><p>Та <code class="filename">/etc/rc.conf</code> файлын тусламжтай
	анхдагч чиглүүлэлтийг хялбараар тодорхойлж болно. Бидний жишээн дээр
	<code class="systemitem">Local2</code> машин дээр бид дараах мөрийг
	<code class="filename">/etc/rc.conf</code> файлд нэмсэн:</p><pre class="programlisting">defaultrouter="10.20.30.1"</pre><p>Үүнийг шууд тушаалын мөрөөс <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a> тушаалаар хийж бас
	болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add default 10.20.30.1</code></strong></pre><p>Сүлжээний чиглүүлэлтийн хүснэгтүүдийг гараар удирдах талаар дэлгэрэнгүй
	мэдээллийг  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a> гарын авлагын хуудаснаас лавлана уу.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93062608"></a>32.2.3. Хос гэртэй хостууд</h3></div></div></div><a id="idp93063248" class="indexterm"></a><p>Өөр бас нэг тохиргооны төрлийг бид хэлэлцэх ёстой бөгөөд энэ нь хоёр өөр сүлжээн
	дээр байгаа хостын тухай юм. Техникийн хувьд гарц болж байгаа дурын машин
	(дээрх жишээн дээр PPP холболтыг ашиглах нь) хос гэртэй хост гэж тооцогддог.
	Гэхдээ үнэндээ энэ ухагдахуун нь хоёр дотоод сүлжээнд байгаа машиныг хэлэхэд
	зөвхөн ашиглагддаг.</p><p>Нэг тохиолдолд машин нь хоёр Ethernet карттай бөгөөд карт бүр
	тусдаа дэд сүлжээний хаягтай байна. Өөрөөр, машин нь зөвхөн нэг Ethernet
	карттай бөгөөд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> alias хийлт буюу өөр нэрийг ашигладаг байж
	болно. Эхнийх нь физикийн хувьд тусдаа хоёр Ethernet сүлжээ ашиглагдаж
	байгаа үед хэрэглэгдэх бөгөөд сүүлийнх нь ганц физик сүлжээний сегмент байгаа боловч
	логикийн хувьд хоёр тусдаа дэд сүлжээнүүд байгаа үед хэрэглэгддэг.</p><p>Аль ч тохиолдолд энэ машин нь нөгөө дэд сүлжээ уруу хүрэх тодорхойлогдсон гарц
	(гаднаас ирэх чиглүүлэлт) гэдгийг дэд сүлжээ бүр мэддэг байхаар чиглүүлэлтийн хүснэгтүүд
	тохируулагддаг. Хоёр дэд сүлжээний хооронд чиглүүлэгч маягаар ажиллах
	машинтай энэ тохиргоо нь бид аль нэг тал уруу эсвэл хоёр талын хоёулангийн хувьд
	пакет шүүгч буюу галт хана дээр тулгуурласан аюулгүй байдлын шийдлийг хийх
	шаардлагатай үед ихэвчлэн хэрэглэгддэг.</p><p>Хоёр интерфэйсийн хооронд пакетуудыг дамжуулдаг байхаар энэ машиныг
	байлгахыг хэрэв та хүсвэл энэ боломжийг идэвхжүүлэхийг FreeBSD-д хэлэх
	хэрэгтэй. Үүнийг хэрхэн хийх талаар дэлгэрэнгүйг дараагийн хэсгээс үзнэ үү.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-dedicated-router"></a>32.2.4. Чиглүүлэгч бүтээх нь</h3></div></div></div><a id="idp93066960" class="indexterm"></a><p>Сүлжээний чиглүүлэгч нь ердөө л нэг интерфэйсээс нөгөө интерфэйс уруу пакетуудыг
	дамжуулдаг систем юм. Интернэтийн стандартууд болон сайн инженерчлэлийн туршлага нь
	үүнийг FreeBSD дээр анхдагчаар идэвхжүүлсэн байхаас FreeBSD төслийг сэргийлдэг.
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> дахь дараах хувьсагчийг <code class="literal">YES</code> болгон
	өөрчилснөөр та энэ боломжийг идэвхжүүлж болно:</p><pre class="programlisting">gateway_enable="YES"          # Set to YES if this host will be a gateway</pre><p>Энэ тохируулга нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>-ийн хувьсагч <code class="varname">net.inet.ip.forwarding</code>-г
	<code class="literal">1</code> болгоно. Хэрэв та чиглүүлэлтийг түр зуур зогсоох хэрэгтэй
	бол үүнийг түр зуур <code class="literal">0</code> болгож тохируулж болно.</p><a id="idp93145552" class="indexterm"></a><a id="idp93146064" class="indexterm"></a><a id="idp93146576" class="indexterm"></a><p>Урсгалыг хааш нь илгээхээ мэдэхийн тулд таны шинэ чиглүүлэгчид чиглүүлэлтүүд
	хэрэгтэй болно. Хэрэв таны сүлжээ хангалттай хялбар байх юм бол статик
	чиглүүлэлтүүд ашиглаж болно. FreeBSD нь стандарт BSD чиглүүлэлтийн дэмон
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=routed&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">routed</span>(8)</span></a> програмтай бас ирдэг. Энэ нь RIP (1 ба 2-р хувилбар) болон
	IRDP протоколуудыг дэмждэг. BGP v4, OSPF v2 болон бусад төвөгтэй
	чиглүүлэлтийн протоколуудын дэмжлэгийг <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/zebra/pkg-descr">net/zebra</a>
	багц хангадаг. <span class="application"><span class="trademark">GateD</span>®</span> зэрэг арилжааны
	бүтээгдэхүүнүүд бас илүү төвөгтэй сүлжээний чиглүүлэлтийн шийдлүүдэд
	зориулагдсан байдаг.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-static-routes"></a>32.2.5. Статик чиглүүлэлтүүдийг тохируулах нь</h3></div><div><span class="authorgroup">Хувь нэмэр болгон оруулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Аль</span> <span class="surname">Хоанг</span></span>. </span></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93152336"></a>32.2.5.1. Гар тохиргоо</h4></div></div></div><p>Бид дараах сүлжээтэй байна гэж төсөөлье:</p><div class="mediaobject"><img src="advanced-networking/static-routes.png" /></div><p>Энэ тохиолдолд <code class="systemitem">RouterA</code> нь Интернэт уруу
	гарах чиглүүлэгч маягаар ажиллаж байгаа бидний FreeBSD машин байна.
	Энэ нь анхдагч чиглүүлэлтээ <code class="systemitem">10.0.0.1</code>
	гэж тохируулсан бөгөөд ингэснээр гаднах ертөнц уруу холбогдох боломжийг
	олгоно. Бид <code class="systemitem">RouterB</code> нь зөв тохируулагдсан бөгөөд
	хаа явах хэрэгцээтэй газраа хэрхэн хүрэхээ мэддэг гэж үзэх болно. (Энэ нь
	зураг дээр хялбар юм. Ердөө л <code class="systemitem">RouterB</code> дээр <code class="systemitem">192.168.1.1</code>-г гарц болгон анхдагч чиглүүлэлт
	нэмнэ.)</p><p>Хэрэв бид <code class="systemitem">RouterA</code>-ийн чиглүүлэлтийн хүснэгтийг
	харвал доор дурдсантай төстэйг харах болно:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>netstat -nr</code></strong>
Routing tables

Internet:
Destination        Gateway            Flags    Refs      Use  Netif  Expire
default            10.0.0.1           UGS         0    49378    xl0
127.0.0.1          127.0.0.1          UH          0        6    lo0
10.0.0.0/24          link#1             UC          0        0    xl0
192.168.1.0/24       link#2             UC          0        0    xl1</pre><p>Энэ үеийн чиглүүлэлтийн хүснэгттэй байхад <code class="systemitem">RouterA</code> нь
	бидний Internal Net 2 буюу дотоод сүлжээ 2 уруу хүрч чадахгүй байх болно.
	Энэ нь <code class="systemitem">192.168.2.0/24</code>-ийн хувьд
	чиглүүлэлтгүй байна. Үүнийг арилгах нэг арга нь гараар чиглүүлэлт нэмэх явдал юм.
	Дараах тушаал нь <code class="systemitem">RouterA</code>-ийн чиглүүлэлтийн хүснэгтэд
	<code class="systemitem">192.168.1.2</code>-г дараагийн зөрлөг (hop)
	болгон ашиглан Internal Net 2 сүлжээг  нэмэх болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add -net 192.168.2.0/24 192.168.1.2</code></strong></pre><p>Одоо <code class="systemitem">RouterA</code> нь <code class="systemitem">192.168.2.0/24</code>
	сүлжээн дэх дурын хост уруу хүрч чадна.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93164368"></a>32.2.5.2. Байнгын тохиргоо</h4></div></div></div><p>Дээрх жишээ нь ажиллаж байгаа систем дээр статик чиглүүлэлтийг
	тохируулахад төгс төгөлдөр юм. Гэхдээ нэг асуудал нь таны FreeBSD машин
	дахин ачаалахад чиглүүлэлтийн мэдээлэл үлдэхгүй байх явдал юм.
	Статик чиглүүлэлтийг байнга байлгахын тулд түүнийг <code class="filename">/etc/rc.conf</code>
	файлд нэмнэ:</p><pre class="programlisting"># Add Internal Net 2 as a static route
static_routes="internalnet2"
route_internalnet2="-net 192.168.2.0/24 192.168.1.2"</pre><p><code class="literal">static_routes</code> тохиргооны хувьсагч нь
	зайгаар тусгаарлагдсан үгнүүдийн жагсаалт юм. Үг бүр чиглүүлэлтийн нэрийг
	заана. Бидний жишээн дээр <code class="literal">static_routes</code> мөрөнд
	бид зөвхөн нэг үгтэй байна. Энэ нь <em class="replaceable"><code>internalnet2</code></em>
	юм. Бид дараа нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a> тушаалд өгөх бүх тохиргооны нэмэлт өгөгдлүүдийг
	<code class="literal">route_internalnet2</code>
	гэгдсэн тохиргооны хувьсагчийн хамтаар нэмнэ. Бидний жишээний хувьд бид ийм
	тушаал ашиглаж болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add -net 192.168.2.0/24 192.168.1.2</code></strong></pre><p>тэгэхээр бидэнд <code class="literal">"-net 192.168.2.0/24 192.168.1.2"</code> хэрэгтэй.</p><p>Дээр дурдсанаар бид <code class="literal">static_routes</code> мөрөнд нэгээс
	илүү үгс оруулж болно. Энэ нь бидэнд олон статик чиглүүлэлтүүд үүсгэх боломжийг
	олгоно. Дараах мөрүүд нь <code class="systemitem">192.168.0.0/24</code> болон <code class="systemitem">192.168.1.0/24</code> сүлжээний хувьд статик чиглүүлэлтүүдийг
	  санаандаа төсөөлсөн чиглүүлэгч дээрээ нэмж байгаа жишээг үзүүлж байна:</p><pre class="programlisting">static_routes="net1 net2"
route_net1="-net 192.168.0.0/24 192.168.0.1"
route_net2="-net 192.168.1.0/24 192.168.1.1"</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-routing-propagation"></a>32.2.6. Чиглүүлэлтийн тархалт</h3></div></div></div><a id="idp93173968" class="indexterm"></a><p>Бид гаднах ертөнц уруу чиглэсэн өөрсдийн чиглүүлэлтүүдийг  хэрхэн тодорхойлох
	талаар ярилцсан боловч гаднах ертөнц хэрхэн биднийг олох талаар хэлэлцээгүй билээ.</p><p>Чиглүүлэлтийн хүснэгтүүдийг тухайн нэг хаягийн талбарын (бидний жишээн дээр
	C ангиллын дэд сүлжээ) бүх урсгал тэр сүлжээний тухайн нэг хост уруу илгээгдэж тэр нь
	пакетуудыг дотогшоо дамжуулдгаар тохируулж болно гэдгийг бид мэдэж байгаа билээ.</p><p>Та өөрийн сайтдаа заагдсан хаягийн талбарыг авах үед таны үйлчилгээ үзүүлэгч
	өөрсдийн чиглүүлэлтийн хүснэгтүүдийг таны дэд сүлжээнд зориулагдсан бүх урсгал
	таны PPP холбоосоор таны сайт уруу илгээгддэгээр тохируулах болно. Гэхдээ улс даяар
	байх бусад сайтууд таны ISP уруу илгээхээ яаж мэдэх вэ?</p><p>Бүх заагдсан хаягийн талбаруудыг хянаж Интернэтийн үндсэн сүлжээ уруу холбогдох
	холболтын цэгийг тодорхойлдог систем (тараагдсан DNS-ийн мэдээлэлтэй бараг адил)
	байдаг. <span class="quote">«<span class="quote">Backbone</span>»</span> буюу <span class="quote">«<span class="quote">гол нуруу (үндсэн сүлжээ)</span>»</span>
	нь улс даяар болон дэлхий даяар Интернэтийн урсгалыг зөөвөрлөж байдаг гол шугамнууд
	юм. Гол нуруу машин бүр мастер хүснэгтүүдийн хуулбартай байдаг бөгөөд эдгээр хүснэгтүүд нь
	тухайн нэг сүлжээнд зориулсан урсгалыг онцгой гол нуруу зөөвөрлөгч уруу чиглүүлж
	тэндээсээ доош бусад үйлчилгээ үзүүлэгчдээр дамжин таны сүлжээнд хүрдэг.</p><p>Үндсэн (гол нуруу) сайтууд уруу зарлаж тэдгээр нь таны сайтын хувьд холболтын цэг
	(буюу орох зам) гэж тодорхойлох нь таны үйлчилгээ үзүүлэгчийн үүрэг юм. Үүнийг чиглүүлэлтийн
	тархалт гэж нэрлэдэг.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-routing-troubleshooting"></a>32.2.7. Алдааг олж засварлах</h3></div></div></div><a id="idp93182288" class="indexterm"></a><p>Заримдаа чиглүүлэлтийн тархалт асуудалтай бөгөөд зарим нэгэн сайтууд өөр уруу
	чинь холбогдож чадахгүй байж болно. Чиглүүлэлт хаана ажиллахгүй болж байгааг
	олоход тус болох магадгүй хамгийн ашигтай тушаал нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a> тушаал
	юм. Хэрэв та алсын машин уруу холбогдож чадахгүй юм шиг байвал (өөрөөр хэлбэл
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> амжилтгүй болвол) энэ нь бас адил ашигтай байдаг.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a> тушаалыг таны холбогдохыг оролдож байгаа алсын
	хостын нэртэй ажиллуулдаг. Энэ нь гарц хостуудыг оролдлого хийж байгаа замын
	хамтаар харуулдаг бөгөөд эцсийн хост уруу хүрэх юм уу эсвэл холболтын асуудлаас болоод
	эцсийн хост уруугаа хүрэлгүйгээр ажиллаж дуусдаг.</p><p>Дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a>-ийн гарын авлагын хуудаснаас
	үзнэ үү.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-routing-multicast"></a>32.2.8. Multicast чиглүүлэлт хийх</h3></div></div></div><a id="idp93188176" class="indexterm"></a><a id="idp93193168" class="indexterm"></a><p>FreeBSD нь multicast програмууд болон multicast чиглүүлэлтийг
	угаасаа дэмждэг. Multicast програмууд нь FreeBSD-ийн ямар нэг тусгай
	тохиргоо шаарддаггүй; програмууд нь шууд л ажилладаг. Multicast
	чиглүүлэлт нь дэмжлэгийг цөмд эмхэтгэхийг шаарддаг:</p><pre class="programlisting">options MROUTING</pre><p>Мөн multicast чиглүүлэлтийн дэмон <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrouted</span>(8)</span></a> нь
	туннелиуд болон <acronym class="acronym">DVMRP</acronym>-г үүсгэхээр
	<code class="filename">/etc/mrouted.conf</code> файлын тусламжтай
	тохируулагдсан байх ёстой. Multicast тохиргооны талаар дэлгэрэнгүй
	мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrouted</span>(8)</span></a>-ийн гарын авлагын хуудаснаас олж
	болно.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrouted</span>(8)</span></a> multicast чиглүүлэлтийн
	  демон нь <acronym class="acronym">DVMRP</acronym>
	  multicast чиглүүлэлтийн протоколыг хэрэгжүүлдэг бөгөөд үүнийг
	  ихэнх multicast суулгацуудад <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pim&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pim</span>(4)</span></a>-р ихэвчлэн сольсон
	  байдаг. Холбогдох <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=map-mbone&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">map-mbone</span>(8)</span></a> болон <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrinfo&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrinfo</span>(8)</span></a>
	  хэрэгслүүд нь FreeBSD-ийн портын
	  цуглуулгад <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/mrouted/pkg-descr">net/mrouted</a> портод
	  байгаа болно.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="advanced-networking.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="advanced-networking.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="network-wireless.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">Бүлэг 32. Сүлжээний нэмэлт ойлголтууд </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 32.3. Утасгүй сүлжээ</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>