<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>15.8. OpenSSL</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="security.html" title="Бүлэг 15. Аюулгүй байдал" /><link rel="prev" href="kerberos5.html" title="15.7. Kerberos5" /><link rel="next" href="ipsec.html" title="15.9. IPsec дээгүүр VPN хийх" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">15.8. OpenSSL</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="kerberos5.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 15. Аюулгүй байдал</th><td width="20%" align="right"> <a accesskey="n" href="ipsec.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="openssl"></a>15.8. OpenSSL</h2></div><div><span class="authorgroup">Бичсэн <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Том</span> <span class="surname">Рөүдс</span></span>. </span></div></div></div><a id="idp79800144" class="indexterm"></a><p>Олон хэрэглэгчдийн хайдаг нэг боломж нь FreeBSD-д байдаг
	<span class="application">OpenSSL</span> багаж юм.
	<span class="application">OpenSSL</span> нь ердийн холбооны давхарга
	дээр шифрлэлт дамжуулах давхаргыг хангаж өгдөг; ингэснээр түүнийг сүлжээний
	програмууд болон үйлчилгээнүүдтэй холбож өгөх боломжийг олгодог.</p><p><span class="application">OpenSSL</span>-ийн зарим нэг хэрэглээнд
	захидлын клиентүүдийн шифрлэсэн нэвтрэлт, кредит картаар хийх төлбөрүүд гэх мэт
	вэб дээр тулгуурласан шилжүүлгүүд зэрэг олныг дурдаж болно.
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache22/pkg-descr">www/apache22</a> болон
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/claws-mail/pkg-descr">mail/claws-mail</a> зэрэг
	олон портууд нь <span class="application">OpenSSL</span>-тэй бүтээх
	эмхэтгэлийн дэмжлэгийг санал болгодог.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ихэнх тохиолдолд Портуудын Цуглуулга нь make хувьсагч
	<code class="varname">WITH_OPENSSL_BASE</code>-ийг <span class="quote">«<span class="quote">yes</span>»</span>
	гэж заагаагүй тохиолдолд
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/openssl/pkg-descr">security/openssl</a> портыг
	бүтээхийг оролддог.</p></div><p>FreeBSD-д орсон <span class="application">OpenSSL</span>-ийн хувилбар нь
	Secure Sockets Layer v2/v3 (SSLv2/SSLv3) буюу Аюулгүй Сокетуудын
	Давхаргын v2/v3 хувилбарууд, Transport Layer Security v1 (TLSv1) буюу
	Тээврийн Давхаргын Аюулгүй байдлын v1 хувилбарын сүлжээний аюулгүй байдлын
	протоколуудыг дэмждэг бөгөөд ерөнхий криптограф сан болон ашиглагдаж
	болох юм.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">OpenSSL</span> нь
	<acronym class="acronym">IDEA</acronym> алгоритмийг дэмждэг боловч Нэгдсэн Улсын
	патентуудаас болоод анхдагчаар хаалттай байдаг. Үүнийг ашиглахын тулд
	лицензийг шалгасан байх ёстой бөгөөд хэрэв хязгаарлалтуудыг хүлээн
	авах боломжтой бол <code class="varname">MAKE_IDEA</code> хувьсагчийг
	<code class="filename">make.conf</code> файлд заагж өгөх ёстой байдаг.</p></div><p><span class="application">OpenSSL</span>-ийн хамгийн түгээмэл хэрэглээний
	нэг бол програм хангамжуудад зориулан ашиглах сертификатуудыг бэлдэх явдал
	юм. Эдгээр сертификатууд нь компани болон хувь хүмүүсийн итгэмжлэлүүдийг
	хүчинтэй бөгөөд луйврын биш гэдгийг баталгаажуулдаг. Хэрэв асуудалтай сертификат
	хэд хэдэн <span class="quote">«<span class="quote">Certificate Authorities</span>»</span> эсвэл <acronym class="acronym">CA</acronym>-ууд буюу
	Сертификатын Эрх мэдэлтнүүдээр шалгагдаагүй бол ихэвчлэн анхааруулга үзүүлдэг.
	Сертификатын Эрх мэдэлтэн нь <a class="link" href="http://www.verisign.com" target="_top">VeriSign</a> зэрэг
	компани байдаг бөгөөд компаниуд эсвэл хувь хүмүүсийн итгэмжлэлүүдийг хүчин төгөлдөр болгохын
	тулд сертификатуудыг баталгаажуулж өгдөг. Энэ процесс нь өртөгтэй бөгөөд
	сертификатууд ашиглахад заавал ч үгүй шаардлага болдоггүй; гэхдээ энэ нь
	паранойд буюу хэт зовнисон хэрэглэгчдийн заримын санааг тайвшруулж болох юм.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79815504"></a>15.8.1. Сертификатуудыг үүсгэх нь</h3></div></div></div><a id="idp79816144" class="indexterm"></a><p>Сертификат үүсгэхийн тулд дараах тушаал байдаг:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>openssl req -new -nodes -out req.pem -keyout cert.pem</code></strong>
Generating a 1024 bit RSA private key
................++++++
.......................................++++++
writing new private key to 'cert.pem'
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:<strong class="userinput"><code>US</code></strong>
State or Province Name (full name) [Some-State]:<strong class="userinput"><code>PA</code></strong>
Locality Name (eg, city) []:<strong class="userinput"><code>Pittsburgh</code></strong>
Organization Name (eg, company) [Internet Widgits Pty Ltd]:<strong class="userinput"><code>My Company</code></strong>
Organizational Unit Name (eg, section) []:<strong class="userinput"><code>Systems Administrator</code></strong>
Common Name (eg, YOUR name) []:<strong class="userinput"><code>localhost.example.org</code></strong>
Email Address []:<strong class="userinput"><code>trhodes@FreeBSD.org</code></strong>

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:<strong class="userinput"><code>SOME PASSWORD</code></strong>
An optional company name []:<strong class="userinput"><code>Another Name</code></strong></pre><p><span class="quote">«<span class="quote">Common Name</span>»</span> хүлээх мөрийн дараах хариу домэйны
	нэрийг харуулж байгааг анзаараарай. Энэ мөр нь шалгалт хийх зорилгоор
	серверийн нэрийг оруулахыг шаарддаг; домэйн нэрээс бусдыг байрлуулах нь
	ашиггүй сертификат үүсэхэд хүргэдэг. Бусал тохируулгууд, жишээ нь
	дуусах хугацаа, өөр шифрлэх алгоритмууд гэх мэт тохируулгууд байдаг.
	Бүрэн гүйцэд жагсаалтыг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=openssl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">openssl</span>(1)</span></a> гарын авлагын хуудсыг үзэн
	авч болно.</p><p>Дээрх тушаалын ажилласан санд хоёр файл одоо байж байх ёстой.
	Сертификатын хүсэлт <code class="filename">req.pem</code> нь таны оруулсан итгэмжлэлүүдийг
	хүчин төгөлдөр болгож хүсэлтийг баталгаажуулан сертификатыг танд буцаах сертификатын
	эрх мэдэлтэн уруу илгээгдэж болно. Үүсгэгдсэн хоёр дахь файл нь
	<code class="filename">cert.pem</code> гэж нэрлэгдэн сертификатын хувийн түлхүүр
	болох бөгөөд ямар ч байсан гэсэн хамгаалагдсан байх ёстой; хэрэв энэ нь
	бусдын гарт орох юм бол таны (эсвэл таны серверийн) дүрд тоглон ашиглагдаж болох
	юм.</p><p><acronym class="acronym">CA</acronym>-с гарын үсэг шаарддаггүй тохиолдолд
	өөрөө зурсан сертификатыг үүсгэж болно. Эхлээд <acronym class="acronym">RSA</acronym>
	түрхүүр үүсгэх хэрэгтэй:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>openssl dsaparam -rand -genkey -out myRSA.key 1024</code></strong></pre><p>Дараа нь <acronym class="acronym">CA</acronym> түлхүүр үүсгэ:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>openssl gendsa -des3 -out myca.key myRSA.key</code></strong></pre><p>Сертификат үүсгэхийн тулд энэ түлхүүрийг ашигла :</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>openssl req -new -x509 -days 365 -key myca.key -out new.crt</code></strong></pre><p>Санд хоёр шинэ файл үүсэх ёстой: сертификатын эрх мэдэлтний гарын
	үсгийн файл <code class="filename">myca.key</code> болон сертификат өөрөө
	<code class="filename">new.crt</code> байна. Эдгээрийг
	зөвхөн <code class="systemitem">root</code> унших эрхтэй
	<code class="filename">/etc</code> санд байрлуулах
	шаардлагатай. Үүнд 0700 зөвшөөрөл байж болох бөгөөд түүнийг
	<code class="command">chmod</code> хэрэгсэл ашиглан тохируулж болно.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79836624"></a>15.8.2. Сертификатуудыг ашиглах нь, жишээ</h3></div></div></div><p>Тэгэхээр эдгээр файлууд нь юу хийж чадах вэ? Сайн хэрэглээ болох нэг
	жишээ нь <span class="application">Sendmail</span>
	<acronym class="acronym">MTA</acronym> уруу хийгдэх холболтуудыг шифрлэх байж болно.
	Энэ нь локал <acronym class="acronym">MTA</acronym> ашиглан захидал илгээх
	хэрэглэгчдийн цэвэр текст нэвтрэлтийн хэрэглээг болиулах юм.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Зарим <acronym class="acronym">MUA</acronym>-ууд нь хэрэв хэрэглэгчид дотроо
	сертификат суулгаагүй бол тэдэнд алдааг харуулдаг болохоор энэ нь
	ертөнц дээрх хамгийн шилдэг хэрэглээ биш юм.
	Сертификат суулгах тухай илүү мэдээллийг програм хангамжтай цуг ирсэн
	баримтаас  үзэх хэрэгтэй.</p></div><p>Дотоод <code class="filename">.mc</code> файл дотор дараах мөрүүдийг
	байрлуулах хэрэгтэй:</p><pre class="programlisting">dnl SSL Options
define(`confCACERT_PATH',`/etc/certs')dnl
define(`confCACERT',`/etc/certs/new.crt')dnl
define(`confSERVER_CERT',`/etc/certs/new.crt')dnl
define(`confSERVER_KEY',`/etc/certs/myca.key')dnl
define(`confTLS_SRV_OPTIONS', `V')dnl</pre><p>Дээрх <code class="filename">/etc/certs/</code> нь
	сертификат болон түлхүүр файлуудыг дотооддоо хадгалах сан юм.
	Сүүлийн хэдэн шаардлагууд нь дотоод <code class="filename">.cf</code> файлын
	дахин бүтээлт юм. Үүнийг <code class="filename">/etc/mail</code> сан
	дотроос <code class="command">make install</code> тушаал
	бичин хийж болно. Ингэсний дараа <code class="command">make
	restart</code> тушаалыг ажиллуулаарай, энэ нь
	<span class="application">Sendmail</span> дэмонг эхлүүлэх ёстой.</p><p>Хэрэв бүгд зүгээр болж өнгөрвөл <code class="filename">/var/log/maillog</code>
	файлд ямар ч алдаа бичигдэхгүй бөгөөд <span class="application">Sendmail</span>
	процессийн жагсаалтад харуулагдана.</p><p>Хялбар тест хийхийн тулд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">telnet</span>(1)</span></a> хэрэгсэл ашиглан
	захидлын серверт холбогдох хэрэгтэй:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>telnet example.com 25</code></strong>
Trying 192.0.34.166...
Connected to <code class="systemitem">example.com</code>.
Escape character is '^]'.
220 <code class="systemitem">example.com</code> ESMTP Sendmail 8.12.10/8.12.10; Tue, 31 Aug 2004 03:41:22 -0400 (EDT)
<strong class="userinput"><code>ehlo example.com</code></strong>
250-example.com Hello example.com [192.0.34.166], pleased to meet you
250-ENHANCEDSTATUSCODES
250-PIPELINING
250-8BITMIME
250-SIZE
250-DSN
250-ETRN
250-AUTH LOGIN PLAIN
250-STARTTLS
250-DELIVERBY
250 HELP
<strong class="userinput"><code>quit</code></strong>
221 2.0.0 <code class="systemitem">example.com</code> closing connection
Connection closed by foreign host.</pre><p>Хэрэв <span class="quote">«<span class="quote">STARTTLS</span>»</span> мөр гарч ирвэл бүгд зөв ажиллаж
	байна.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="kerberos5.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="security.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="ipsec.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">15.7. <span class="application">Kerberos5</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 15.9. IPsec дээгүүр VPN хийх</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>