<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>30.3. Сүлжээний Файлын Систем (NFS)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="network-servers.html" title="Бүлэг 30. Сүлжээний орчны Серверүүд" /><link rel="prev" href="network-inetd.html" title="30.2. inetd «Супер-Сервер»" /><link rel="next" href="network-nis.html" title="30.4. Сүлжээний Мэдээллийн Систем (NIS/YP)" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">30.3. Сүлжээний Файлын Систем (NFS)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-inetd.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 30. Сүлжээний орчны Серверүүд</th><td width="20%" align="right"> <a accesskey="n" href="network-nis.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-nfs"></a>30.3. Сүлжээний Файлын Систем (NFS)</h2></div><div><span class="authorgroup">Дахин зохион байгуулж, сайжруулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Том</span> <span class="surname">Рөүдс</span></span>. </span></div><div><span class="authorgroup">Бичсэн <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Билл</span> <span class="surname">Свингл</span></span>. </span></div><div><span class="authorgroup">Орчуулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Лодойсамбын</span> <span class="surname">Баянзул</span></span>. </span></div></div></div><a id="idp89952464" class="indexterm"></a><p>FreeBSD дээр дэмжигддэг олон файлын системүүдийн нэг бол
Network File System буюу Сүлжээний Файлын Систем юм, мөн <acronym class="acronym">NFS</acronym> гэж нэрлэнэ.  <acronym class="acronym">NFS</acronym> нь сүлжээний орчинд файл болон санг
бусадтай хуваалцах  боломжийг олгодог. <acronym class="acronym">NFS</acronym>-г
хэрэглэн, хэрэглэгчид болон програмууд алслагдсан систем рүү
дотоод файл руу хандаж байгаатай адилаар хандах боломжтой.</p><p><acronym class="acronym">NFS</acronym>-н тэмдэглүүштэй давуу талуудаас дурдвал:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Өргөн хэрэглэгддэг өгөгдлийг нэгтгэн нэг машин дээр
байрлуулж, түүнд алсаас хандах боломжтой болсноор
дотоод машинууд илүү бага диск хэрэглэх болно. </p></li><li class="listitem"><p>Хэрэглэгчийн хувьд сүлжээнд байгаа машин бүр дээр тус
тусдаа гэрийн сантай байх шаардлагагүй болно.
Гэрийн санг нэг удаа <acronym class="acronym">NFS</acronym> сервер дээр үүсгээд
түүнийгээ сүлжээгээр дамжин хэрэглэх боломжтой.</p></li><li class="listitem"><p>Уян диск, CDROM болон <span class="trademark">Zip</span>® төхөөрөмжүүдийг сүлжээний
бусад машинууд хэрэглэх боломжтой болно.
Ингэснээр сүлжээнд хэрэглэгдэх зөөвөрлөх боломжтой
хадгалах төхөөрөмжүүдийн тоог багасгана.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89959248"></a>30.3.1. <acronym class="acronym">NFS</acronym> хэрхэн ажилладаг вэ</h3></div></div></div><p><acronym class="acronym">NFS</acronym> нь үндсэн хоёр хэсгээс бүрдэнэ:
сервер болон нэг ба түүнээс дээш тооны харилцагч. Сервер машин дээр
хадгалагдаж байгаа өгөгдөл рүү харилцагч алсаас хандана.
Дээрх үйлдлийг зөв гүйцэтгэхийн тулд нилээд хэдэн процессийн
тохиргоог хийж, ажиллуулсан байх ёстой.</p><p>Сервер дээр дараах дэмонууд ажиллаж байх ёстой:</p><a id="idp89961168" class="indexterm"></a><a id="idp89962320" class="indexterm"></a><a id="idp89963472" class="indexterm"></a><a id="idp89964368" class="indexterm"></a><a id="idp89969488" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Дэмон</th><th>Тайлбар</th></tr></thead><tbody><tr><td><span class="application">nfsd</span></td><td><acronym class="acronym">NFS</acronym> харилцагчдаас ирэх
хүсэлтийг хүлээн авах <acronym class="acronym">NFS</acronym> дэмон.</td></tr><tr><td><span class="application">mountd</span></td><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nfsd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nfsd</span>(8)</span></a>-с дамжиж ирсэн хүсэлтийг гүйцэтгэгч
<acronym class="acronym">NFS</acronym> холбох дэмон.</td></tr><tr><td><span class="application">rpcbind</span></td><td>Энэ дэмоны тусламжтай <acronym class="acronym">NFS</acronym>
харилцагчид <acronym class="acronym">NFS</acronym> сервер аль портон дээр
ажиллаж байгааг олж мэднэ.</td></tr></tbody></table></div><p>Харилцагч <span class="application">nfsiod</span> гэсэн дэмонг мөн
ажиллуулж болно. <span class="application">nfsiod</span> дэмон
<acronym class="acronym">NFS</acronym> серверээс ирэх хүсэлтийг гүйцэтгэнэ.
Ингэх нь системийг хэвийн, алдаагүй ажиллуулахад зайлшгүй
шаардлагагүй боловч зарим үзүүлэлтүүдийг сайжруулдаг тул нэмэлт
байдлаар хэрэглэж болно. Дэлгэрэнгүй мэдээллийг
<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nfsiod&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nfsiod</span>(8)</span></a> хуудаснаас үзнэ үү.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-configuring-nfs"></a>30.3.2. <acronym class="acronym">NFS</acronym>-н тохиргоог хийх</h3></div></div></div><a id="idp89988304" class="indexterm"></a><p><acronym class="acronym">NFS</acronym>-н тохиргоог хийх нь харьцангуй
амархан. Ажиллах ёстой процессуудыг системтэй хамт автоматаар
асдаг болгохын тулд <code class="filename">/etc/rc.conf</code> файлыг бага зэрэг
өөрчлөхөд хангалттай.</p><p><acronym class="acronym">NFS</acronym> сервер дээрх <code class="filename">/etc/rc.conf</code> файл дотор
дараах тохируулгууд идэвхжсэн байгаа эсэхийг шалгана уу:</p><pre class="programlisting">rpcbind_enable="YES"
nfs_server_enable="YES"
mountd_flags="-r"</pre><p><span class="application">mountd</span> нь <acronym class="acronym">NFS</acronym> серверийг
идэвхжүүлсэн тохиолдолд өөрөө автоматаар ажиллана.</p><p>Харилцагч талд, <code class="filename">/etc/rc.conf</code> файл дотор
дараах тохируулга идэвхтэй байгаа эсэхийг шалгана уу:</p><pre class="programlisting">nfs_client_enable="YES"</pre><p><code class="filename">/etc/exports</code> файл дотор
<acronym class="acronym">NFS</acronym> ямар файл системүүдийг экспорт
хийхийг (заримдаа <span class="quote">«<span class="quote">хуваалцах</span>»</span> гэж мөн нэрлэнэ) зааж өгнө.
<code class="filename">/etc/exports</code> файлын мөр бүр нь нэг файл системд харгалзана.
Энэ файл системд хандах эрхтэй машинуудыг заахаас гадна,
ямар тохируулгаар хандахыг мөн зааж өгч болно. Энэ файл дотор бичигдэж
болох нилээд олон ийм тохируулгууд байгаа хэдий ч, бид тэдгээрээс
зөвхөн заримыг нь энд авч үзэх болно. Та бусад тохируулгуудын
талаар <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=exports&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">exports</span>(5)</span></a> заавар хуудаснаас уншиж мэднэ үү.</p><p>Доор <code class="filename">/etc/exports</code> файлаас хэдэн жишээ мөрийг үзүүлэв:</p><a id="idp90001744" class="indexterm"></a><p>Дараах жишээн дээрээс файл системийг
хэрхэн экспортлох санааг олж авах болно. Тохируулгууд нь
таны сүлжээний тохиргоо, нөхцөл байдлаас шалтгаалан
өөр байхыг анхаарна уу. Жишээ нь, <code class="filename">/cdrom</code> гэсэн санг
3 машин руу экспортлохын тулд дараах байдалтай бичнэ. Жишээн дээрх
3 машин сервертэй адил домэйн нэртэй, эсвэл таны <code class="filename">/etc/hosts</code>
файл дотор тодорхойлогдсон гэж үзсэн болно. <code class="option">-ro</code> туг нь
экспортлогдож буй файл системийг зөвхөн унших боломжтой
болохыг заана. Энэ тугийг тавьснаар алсаас хандаж буй машин
энэ файл систем дээр ямар нэг өөрчлөлт хийх боломжгүй болно.</p><pre class="programlisting">/cdrom -ro host1 host2 host3</pre><p>Дараах жишээн дээр <code class="filename">/home</code> санг
IP хаягаар нь зааж өгсөн 3 машин руу экспортолж байна.
Ингэж IP хаягаар нь зааж өгөх нь дотоод сүлжээндээ
<acronym class="acronym">DNS</acronym> сервер ажиллуулаагүй үед их хэрэгтэй байдаг.
Эсвэл <code class="filename">/etc/hosts</code> файл дотор дотоод хостуудын
нэрийг тохируулж болно; <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts</span>(5)</span></a> хэсгийг дахин үзнэ үү.
<code class="option">-alldirs</code> гэсэн туг нь дэд сангуудыг
холболтын цэг байхыг зөвшөөрч өгдөг. Өөрөөр хэлбэл,
дэд сангуудыг холболгүй орхиж, харилцагч зөвхөн өөрийн
хэрэгцээтэй байгаа сангаа холбохыг зөвшөөрнө гэсэн үг юм.</p><pre class="programlisting">/home  -alldirs  10.0.0.2 10.0.0.3 10.0.0.4</pre><p>Дараах жишээн дээр <code class="filename">/a</code> санг
хоёр өөр домэйноос 2 харилцагч хандаж болохоор
экспортолж байна. <code class="option">-maproot=root</code> гэсэн туг нь
алслагдсан систем дээрх <code class="systemitem">root</code> хэрэглэгч
экспортлогдсон файл систем дээр <code class="systemitem">root</code> эрхээр
бичихийг зөвшөөрнө. Хэрэв <code class="literal">-maproot=root</code> тугийг тусгайлан зааж өгөөгүй бол,
хэдий алслагдсан систем дээрх хэрэглэгч <code class="systemitem">root</code> эрхтэй ч
экспортлогдсон файл систем дээр бичих эрхгүй болно.</p><pre class="programlisting">/a  -maproot=root  host.example.com box.example.org</pre><p>Харилцагч экспортлогдсон файл систем рүү хандахын
тулд эрх нь байх ёстой. Тухайн харилцагч <code class="filename">/etc/exports</code>
файл дотор бүртгэлтэй эсэхийг шалгаарай.</p><p><code class="filename">/etc/exports</code> файл дотор мөр болгон нь
нэг файл системийг нэг хост руу экспортлох мэдээллийг
төлөөлнө. Алслагдсан хост аль нэг файл системийн хувьд
зөвхөн ганц удаа л тодорхойлогдсон байх ёстой ба үүнд харгалзах
ганцхан анхдагч бичлэг байж болно. Жишээ нь, <code class="filename">/usr</code> нь
нэг файл систем гэж бодъё. <code class="filename">/etc/exports</code> файл доторх
дараах бичлэгүүд нь буруу юм:</p><pre class="programlisting"># Invalid when /usr is one file system
/usr/src   client
/usr/ports client</pre><p>Учир нь <code class="filename">/usr</code> гэсэн файл системийг <code class="systemitem">client</code>
гэсэн хост руу экспортолсон хоёр бичлэг байна. Энэ тохиолдолд
дараах форматаар бичвэл зөв болно:</p><pre class="programlisting">/usr/src /usr/ports  client</pre><p>Нэг хост руу экспортлогдож байгаа файл системийн хувьд
шинжүүдийг бүгдийг нэг мөрөнд жагсаан бичих ёстой.
Харилцагчийг зааж өгөөгүй мөрүүдийг энгийн хост гэж үзнэ.
Энэ нь файл системийг экспортлох боломжийг хязгаарлана,
гэвч энэ нь ихэнх хүмүүст хүнд асуудал биш байдаг.</p><p>Дараагийн жишээн дээр <code class="filename">/usr</code> ба <code class="filename">/exports</code>
гэсэн дотоод файл системийг экспортолсон байна:</p><pre class="programlisting"># Export src and ports to client01 and client02, but only
# client01 has root privileges on it
/usr/src /usr/ports -maproot=root    client01
/usr/src /usr/ports               client02
# The client machines have root and can mount anywhere
# on /exports. Anyone in the world can mount /exports/obj read-only
/exports -alldirs -maproot=root      client01 client02
/exports/obj -ro</pre><p><code class="filename">/etc/exports</code> файл дотор гарсан
өөрчлөлтүүдийг хүчинтэй болгохын тулд,
өөрчлөлт орсон тухай бүрд <span class="application">mountd</span> дэмонг
албадан <code class="filename">/etc/exports</code>-г дахин уншуулах хэрэгтэй болдог.
Үүний тулд эсвэл HUP дохиог ажиллаж байгаа дэмонд өгөх хэрэгтэй:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat /var/run/mountd.pid`</code></strong></pre><p>эсвэл <code class="command">mountd</code> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> скриптийг зохих параметрийн
хамт ажиллуулах хэрэгтэй:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service mountd onereload</code></strong></pre><p>rc скриптийг хэрэглэх зааврыг <a class="xref" href="configtuning-rcd.html" title="12.7. FreeBSD дээр rc(8) ашиглах нь">Хэсэг 12.7, «FreeBSD дээр rc(8) ашиглах нь»</a> хэсгээс
үзнэ үү.</p><p>Бас нэг боломж нь, FreeBSD-г эхнээс нь ачаалж, бүх процессийг дахин
эхлүүлэх юм. Гэвч үүний тулд заавал системийг дахин ачаалах шаардлага байхгүй.
<code class="systemitem">root</code> эрхээр дараах тушаалуудыг өгснөөр зөвхөн хэрэгтэй процессуудаа
дахин эхлүүлэх боломжтой.</p><p><acronym class="acronym">NFS</acronym> сервер дээр:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpcbind</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>nfsd -u -t -n 4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mountd -r</code></strong></pre><p><acronym class="acronym">NFS</acronym> харилцагч дээр:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>nfsiod -n 4</code></strong></pre><p>Одоо алсын файл системийг холбоход бэлэн боллоо.
Доорх жишээнүүд дээр серверийн нэрийг <code class="systemitem">server</code>,
харилцагчийн нэрийг <code class="systemitem">client</code> гэж авсан болно.
Хэрэв та алсын файл системийг зөвхөн түр хугацаагаар холбох гэж байгаа
эсвэл тохиргоогоо шалгах гэж байгаа бол, харилцагч талд
<code class="systemitem">root</code> эрхээр дараах тушаалыг өгөхөд хангалттай:</p><a id="idp90042960" class="indexterm"></a><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount server:/home /mnt</code></strong></pre><p>Энэ тушаалыг өгснөөр та сервер талд байгаа <code class="filename">/home</code>
гэсэн санг харилцагч талд байгаа <code class="filename">/mnt</code> сантай
холбох болно. Хэрэв бүх зүйл зөв тохируулагдсан бол, та харилцагч талын
<code class="filename">/mnt</code> сан дотор орж сервер дээр байгаа файлуудыг
харж чадах ёстой.</p><p>Хэрэв систем шинээр ачаалах бүрд ямар нэг алсын
файл системийг холбох хүсэлтэй байгаа бол,
түүнийгээ <code class="filename">/etc/fstab</code> файл дотор нэмж бичих хэрэгтэй.
Жишээ нь:</p><pre class="programlisting">server:/home	/mnt	nfs	rw	0	0</pre><p>Боломжит бүх сонголтуудын талаар <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> заавар хуудаснаас үзнэ үү.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90049232"></a>30.3.3. Цоожлолт</h3></div></div></div><p>Зарим програмууд (ж.н. <span class="application">mutt</span>)
зөв ажиллахын тулд файл цоожлолтыг шаарддаг.
<acronym class="acronym">NFS</acronym>-н хувьд, <span class="application">rpc.lockd</span>-г
файл цоожлолтонд хэрэглэж болно. Түүнийг идэвхжүүлэхийн тулд,
сервер болон харилцагч талд хоёуланд нь <code class="filename">/etc/rc.conf</code>
файл дотор дараах мөрүүдийг нэмж өгөх хэрэгтэй
(<acronym class="acronym">NFS</acronym> сервер болон харилцагч талуудыг аль хэдийн тохируулчихсан
гэж үзэв):</p><pre class="programlisting">rpc_lockd_enable="YES"
rpc_statd_enable="YES"</pre><p>Програмыг дараах байдалтай эхлүүлнэ:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service lockd start</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>service statd start</code></strong></pre><p>Хэрэв <acronym class="acronym">NFS</acronym> харилцагч болон <acronym class="acronym">NFS</acronym>
сервер талуудын хооронд жинхэнэ файл цоожлолт хийгдэх
шаардлагагүй бол, <acronym class="acronym">NFS</acronym> харилцагч талд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_nfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_nfs</span>(8)</span></a>-д
<code class="option">-L</code> тохируулгыг өгөн дотоод цоожлолт хийлгэж болно.
Дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_nfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_nfs</span>(8)</span></a> заавар хуудаснаас үзнэ үү.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90070608"></a>30.3.4. Практик хэрэглээ</h3></div></div></div><p><acronym class="acronym">NFS</acronym> нь олон практик хэрэглээтэй. Хамгийн элбэг
тохиолддог хэрэглээг доор жагсаав:</p><a id="idp90071888" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Олон машиныг нэг CDROM эсвэл төхөөрөмжийг дундаа
хэрэглэдэг байхаар зохион байгуулах. Энэ нь нэг програмыг
олон машин дээр суулгах хамгийн хямд, хялбар арга юм.</p></li><li class="listitem"><p>Том сүлжээний хувьд, бүх хэрэглэгчдийн гэрийн санг хадгалдаг
төвлөрсөн <acronym class="acronym">NFS</acronym> серверийг тохируулах. Эдгээр гэрийн сангуудыг
дараа нь сүлжээний орчинд экспортолсноор хэрэглэгчид аль машин дээр
ажиллаж буйгаас үл хамааран өөрийн нэг л сан дотор ажиллах боломжтой
болно.</p></li><li class="listitem"><p>Олон машин дундаа нэг <code class="filename">/usr/ports/distfiles</code>
сантай байх. Ийм замаар, нэг портыг олон машин дээр суулгах
хэрэгтэй үед машин бүр дээр эх файлыг татаж авалгүйгээр хурдан суулгах
боломжтой болно.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-amd"></a>30.3.5. <span class="application">amd</span>-р автоматаар холбох нь</h3></div><div><span class="authorgroup">Хувь нэмрээ оруулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Вылий</span> <span class="surname">Стилвэл</span></span>. </span></div><div><span class="authorgroup">Дахин эмхтгэсэн <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Шерн</span> <span class="surname">Лий</span></span>. </span></div><div><span class="authorgroup">Орчуулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Лодойсамбын </span> <span class="surname">Баянзул</span></span>. </span></div></div></div><a id="idp90086736" class="indexterm"></a><a id="idp90087248" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a> (автоматаар холбогч дэмон)
	нь алсын файл системийн файл эсвэл санд хэрэглэгч
хандах тухай бүрт уг файл системийг автоматаар холбодог.
Хэсэг хугацааны туршид идэвхгүй байгаа файл системийг
<span class="application">amd</span> мөн автоматаар салгана. <span class="application">amd</span>-г
хэрэглэснээр <code class="filename">/etc/fstab</code> дотор бичигддэг байнгын
холболтоос гадна, холболт хийх боломжийг олгодог.</p><p><span class="application">amd</span> нь өөрийгөө, <code class="filename">/host</code> ба <code class="filename">/net</code>
сангууд дээр NFS сервер байдлаар холбож ажиллах бөгөөд эдгээр
сангууд доторх файлд хандах үед, <span class="application">amd</span>
харгалзах алсын холболтыг хайж олоод автоматаар холбох болно.
<code class="filename">/net</code> нь экспортлогдсон файл системийг
IP хаягаар нь холбоход, харин <code class="filename">/host</code> нь
хост нэрээр нь холбоход хэрэглэгдэнэ.</p><p><code class="filename">/host/foobar/usr</code> сан доторх
файлд хандана гэдэг нь <span class="application">amd</span>-г
<code class="systemitem">foobar</code> гэсэн хост дээр экспортлогдсон <code class="filename">/usr</code>
санг холбохын зааж өгнө.</p><div class="example"><a id="idp90094672"></a><div class="example-title">Жишээ 30.2. Экспортыг <span class="application">amd</span>-р холбох</div><div class="example-contents"><p>Алсын хост дээр байгаа боломжит холболтуудын
жагсаалтыг <code class="command">showmount</code> тушаалын тусламжтай харж болно.
Жишээлбэл, <code class="systemitem">foobar</code> нэртэй хостын экспортыг харахын тулд:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>showmount -e foobar</code></strong>
Exports list on foobar:
/usr                               10.10.10.0
/a                                 10.10.10.0
<code class="prompt">%</code> <strong class="userinput"><code>cd /host/foobar/usr</code></strong></pre></div></div><br class="example-break" /><p>Жишээн дээр үзүүлснээр <code class="command">showmount</code> нь <code class="filename">/usr</code>-г
экспортлогдсон болохыг харуулж байна. <code class="filename">/host/foobar/usr</code> сан
дотор ороход, <span class="application">amd</span> нь <code class="systemitem">foobar</code> гэсэн хост нэрийг
тайлахыг оролдох ба заасан санг холбоно.</p><p><span class="application">amd</span>-г эхлэл скриптүүдээр эхлүүлж болох ба
үүний тулд <code class="filename">/etc/rc.conf</code> файл дотор дараах мөрийг нэмэх хэрэгтэй:</p><pre class="programlisting">amd_enable="YES"</pre><p>Мөн, <span class="application">amd</span> програмд <code class="varname">amd_flags</code> тохируулгын
тусламжтай тугуудыг өгч болно. <code class="varname">amd_flags</code>-н анхдагч утга нь:</p><pre class="programlisting">amd_flags="-a /.amd_mnt -l syslog /host /etc/amd.map /net /etc/amd.map"</pre><p><code class="filename">/etc/amd.map</code> файл дотор экспортуудыг холбох анхдагч
тохируулгуудыг зааж өгсөн байна. <code class="filename">/etc/amd.conf</code> файл дотор
<span class="application">amd</span>-н илүү дээд түвшний чанаруудыг тодорхойлж өгнө.</p><p>Дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a> ба <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">amd.conf</span>(5)</span></a> заавар хуудаснаас
үзнэ үү.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-nfs-integration"></a>30.3.6. Бусад системтэй нэгтгэхэд тохиолдох асуудлууд</h3></div><div><span class="authorgroup">Хувь нэмрээ оруулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Жон</span> <span class="surname">Линд</span></span>. </span></div><div><span class="authorgroup">Орчуулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Лодойсамбын</span> <span class="surname">Баянзул</span></span>. </span></div></div></div><p>ISA PC системд зориулсан зарим Ethernet адаптерууд
учир дутагдалтай байдгаас сүлжээний орчинд ажиллахад, тэр дундаа
NFS-тэй ажиллахад нилээд асуудалтай байдаг.
Энэ асуудал зөвхөн FreeBSD-д тохиолддоггүй боловч FreeBSD систем үүнд нилээд
өртөмтгий байдаг.</p><p>Энэ асуудал нь (FreeBSD) PC системийг өндөр үзүүлэлттэй машинуудтай (жишээлбэл,
Silicon Graphics, Inc.,  ба Sun Microsystems, Inc компаниудын хийсэн)
сүлжээнд холбох үед бараг үргэлж тохиолддог. NFS холболт хийхэд асуудалгүй,
зарим үйлдлүүдийг хийхэд амжилттай байх боловч, гаднаас ирж явж байгаа
хүсэлтүүдийг боловсруулж чадаж байгаа хэдий ч сервер гэнэт харилцагчид
хариу өгөхгүй болдог. Энэ асуудал мөн харилцагчийн хувьд, харилцагч
FreeBSD систем эсвэл ажлын машин байхаас үл шалтгаалан тохиолдоно.
Ихэнх системийн хувьд, нэгэнт ийм асуудалд орсон бол харилцагч талыг
ном ёсных нь дагуу унтраах боломжгүй болдог. Ганц авдаг арга хэмжээ бол системийг
хүчээр унтрааж асаах юм. Учир нь, NFS-н энэ асуудал одоо хир нь шийдэгдээгүй
байна.</p><p>Хэдийгээр <span class="quote">«<span class="quote">зөв</span>»</span> шийдэл бол
FreeBSD системд тохирох илүү өндөр үзүүлэлттэй, илүү багтаамжтай
Ethernet адаптерийг олж авах боловч,
боломжит ажиллагааг хангахын тулд нэг арга байна.
Хэрэв FreeBSD систем нь <span class="emphasis"><em>сервер</em></span> бол, харилцагч талаас
холболт хийхдээ <code class="option">-w=1024</code> тохируулгыг оруулж өгөх явдал юм.
Хэрэв FreeBSD систем нь <span class="emphasis"><em>харилцагч</em></span> бол, NFS файл системтэй
холбогдохдоо <code class="option">-r=1024</code> тохируулгыг хэрэглэх юм.
Эдгээр тохируулгуудыг автомат холболтын хувьд
<code class="filename">fstab</code> бичлэгийн дөрөв дэх талбарыг ашиглан,
гар аргаар холболт хийх бол <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> тушаалын <code class="option">-o</code>
параметрыг ашиглан зааж өгч болно.</p><p>NFS сервер болон харилцагчид өөр өөр сүлжээнд
байхад гардаг өөр нэг асуудлыг энэ асуудалтай
хольж хутгах тохиолдол байдгийг энд дурдах нь зүйтэй болов уу.
Хэрэв тийм бол, чиглүүлэгчид шаардлагатай <acronym class="acronym">UDP</acronym>
мэдээллийг дамжуулж чадаж байгаа эсэхийг
<span class="emphasis"><em>нягталж</em></span> үзээрэй. Үгүй бол, өөр юу ч хийлээ гээд
та үр дүнд хүрч чадахгүй.</p><p>Дараах жишээн  дээр, <code class="systemitem">fastws</code> нь өндөр үзүүлэлттэй
ажлын машины хост (интерфэйс) нэр, <code class="systemitem">freebox</code> нь
бага үзүүлэлттэй Ethernet адаптертай FreeBSD системийн
нэр юм. Мөн, <code class="filename">/sharedfs</code> нь экспортлогдох гэж байгаа NFS
файл систем (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=exports&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">exports</span>(5)</span></a>-г үз), ба <code class="filename">/project</code> нь
харилцагч талын экспортлогдсон файл системийг холбох цэг байх болно.
Аль ч тохиолдолд, <code class="option">hard</code> эсвэл <code class="option">soft</code> ба <code class="option">bg</code>
зэрэг нэмэлт тохируулгууд таны хувьд хэрэгтэй байж болох юм.</p><p>FreeBSD системийг (<code class="systemitem">freebox</code>) <code class="systemitem">freebox</code> дээр
<code class="filename">/etc/fstab</code> дотор харилцагч байдлаар зааж өгөх жишээ:</p><pre class="programlisting">fastws:/sharedfs /project nfs rw,-r=1024 0 0</pre><p><code class="systemitem">freebox</code> дээр гараар холбохдоо:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t nfs -o -r=1024 fastws:/sharedfs /project</code></strong></pre><p>FreeBSD системийг (<code class="systemitem">freebox</code>) <code class="systemitem">fastws</code> дээр
  <code class="filename">/etc/fstab</code> дотор сервер байдлаар зааж өгөх жишээ:</p><pre class="programlisting">freebox:/sharedfs /project nfs rw,-w=1024 0 0</pre><p><code class="systemitem">fastws</code> дээр гараар холбохдоо:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t nfs -o -w=1024 freebox:/sharedfs /project</code></strong></pre><p>Бараг бүх 16-битийн Ethernet адаптерийн хувьд
унших ба бичих хэмжээн дээр дээрх байдлаар хязгаарлалт
хийлгүйгээр ажиллах боломжтой байдаг.</p><p>Сонирхсон улсуудад толилуулахад, дээрх алдаа гарахад
чухам юу тохиолддог, яагаад засагдах боломжгүй болох талаар
дор тайлбарлав. NFS нь голчлон 8 K (хэдийгээр илүү бага хэмжээтэй
хэсэг дээр ажиллаж чадах боловч) хэмжээтэй <span class="quote">«<span class="quote">блок</span>»</span>ууд дээр
ажилладаг. Хамгийн урт Ethernet пакет 1500 байт орчим байх ба,
NFS <span class="quote">«<span class="quote">блок</span>»</span> нь хэд хэдэн Ethernet пакетуудад хуваагдах
хэрэгтэй болдог. Дээд түвшний програмын хувьд
энэ нь нэг нэгж хэвээр байх ба хүлээж аваад, нийлүүлээд, бататгал
хийхэд ч мөн нэг нэгж хэвээр байдаг. Өндөр үзүүлэлттэй ажлын машинууд
NFS нэгжийг бүрдүүлж байгаа тэдгээр пакетуудыг стандартад
заасны дагуу аль болох ойрхон ойрхон, нэг нэгээр нь цувуулж
гаргана. Жижиг, бага багтаамжтай картууд дээр, дээд түвшний програмд
дамжуулахаас өмнө сүүлийн пакет нь өмнөх пакетаа дарснаар
тухайн нэгжийг буцааж нийлүүлж, бататгах боломжгүй болно.
Үүнээс болж, ажлын машины болзоот хугацаа дуусаж бүхэл бүтэн 8 K
нэгжийг дахин дамжуулах болно. Энэ үйл ажиллагаа дахин дахин хязгааргүй
давтагдах болно.</p><p>Нэгжийн хэмжээг Ethernet пакетийн хэмжээнээс бага
байлгаснаар, бид Ethernet пакет тус бүрийг бататгаж
мухардалд орохоос сэргийлж чадна.</p><p>Өндөр үзүүлэлттэй ажлын машинууд PC систем рүү өгөгдлийг
цацсаар байх үед давхцал үүссээр байх боловч, илүү сайн карт
ашигласнаар NFS <span class="quote">«<span class="quote">нэгж</span>»</span>ийн хувьд заавал тийм давхцал үүсэх
албагүй болно. Давхцал үүссэн тохиолдолд, түүнд өртсөн нэгжийг
дахин дамжуулах ба түүнийг хүлээн авч, нийлүүлж, бататгах боломж өндөртэй.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-inetd.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="network-nis.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">30.2. <span class="application">inetd</span> <span class="quote">«<span class="quote">Супер-Сервер</span>»</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 30.4. Сүлжээний Мэдээллийн Систем (NIS/YP)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>