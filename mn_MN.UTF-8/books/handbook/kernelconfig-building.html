<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>9.5. Өөрчлөн тохируулсан цөмийг бүтээх ба суулгах нь</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="kernelconfig.html" title="Бүлэг 9. FreeBSD цөмийг тохируулах нь" /><link rel="prev" href="kernelconfig-modules.html" title="9.4. Цөмийн драйверууд, дэд системүүд, болон модулиуд" /><link rel="next" href="kernelconfig-config.html" title="9.6. Тохиргооны файл" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">9.5. Өөрчлөн тохируулсан цөмийг бүтээх ба суулгах нь</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="kernelconfig-modules.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 9. FreeBSD цөмийг тохируулах нь</th><td width="20%" align="right"> <a accesskey="n" href="kernelconfig-config.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-building"></a>9.5. Өөрчлөн тохируулсан цөмийг бүтээх ба суулгах нь</h2></div></div></div><a id="idp73928528" class="indexterm"></a><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Цөмийг бүтээхэд FreeBSD-ийн гүйцэд эх мод байх шаардлагатай.</p></div><p>Эхлээд цөм бүтээх сангаар аялая. Дурдсан бүх сангуудаас гол нь
	<code class="filename">/usr/src/sys</code> сан байх бөгөөд
	<code class="filename">/sys</code> гэсэн замаар бас хандах боломжтой.
	Энд байгаа хэд хэдэн дэд сангууд цөмийн өөр өөр хэсгүүдийг илэрхийлэх бөгөөд
	бидний зорилгод хамгийн чухал нь таны өөрчлөн тохируулах цөмийн тохиргоог
	засварлах <code class="filename">arch/conf</code>
	сангууд болон таны цөм бүтээгдэх  шатны талбар <code class="filename">compile</code>
	сан юм. <em class="replaceable"><code>arch</code></em> нь
	<code class="filename">i386</code>,
      	<code class="filename">amd64</code>, <code class="filename">ia64</code>,
      	<code class="filename">powerpc</code>, <code class="filename">sparc64</code>, эсвэл
      	<code class="filename">pc98</code> (Японд их ашиглагддаг PC тоног төхөөрөмжийн
	өөр нэг хөгжүүлэлтийн салбар) зэргийг төлөөлдөг. Тухайн архитектурын сан доторх
	код зөвхөн тэр архитектуртай холбоотой; бусад кодын хэсэг нь FreeBSD порт хийгдэх
	боломж бүхий бүх тавцангуудын хувьд адил машинаас чөлөөт код байна. Сангийн бүтцийн
	логик зохион байгуулалт нь дэмжлэг хийгдсэн төхөөрөмж, файлын систем болон өөрийн дэд
	санд байгаа тохируулга бүртэй хамт байгааг харж болно.</p><p>Энэ бүлэгт байгаа жишээ таныг i386 архитектур ашиглаж байгаа гэж авч үзнэ.
	Хэрэв таны систем өөр архитектур бол замуудын
	нэрсдээ тохирох өөрчлөлтүүдийг хийгээрэй.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв <code class="filename">/usr/src/</code> сан таны систем дээр байхгүй (эсвэл хоосон бол)
	эх суугаагүй байна. Бүрэн гүйцэд эх модыг суулгах хялбар аргаар
	хийхийн тулд <a class="xref" href="synching.html" title="25.6. Өөрийн эхийг хамгийн сүүлийн хэлбэрт аваачих нь">Хэсэг 25.6, «Өөрийн эхийг хамгийн сүүлийн хэлбэрт аваачих нь»</a> хэсэгт тайлбарласны дагуу
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csup&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csup</span>(1)</span></a>-г ашиглах явдал юм. Та бас <code class="filename">/usr/src/sys/</code>
	  рүү заасан симболын холбоос үүсгэж өгөх ёстой:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s /usr/src/sys /sys</code></strong></pre></div><p>Дараа нь <code class="filename">arch/conf</code>
	сан уруу шилжээд <code class="filename">GENERIC</code> тохиргооны файлыг та өөрийн цөмдөө өгөх
	нэр уруу хуул.  Жишээ нь:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp GENERIC MYKERNEL</code></strong></pre><p>Уламжлалаар бол энэ нэр нь бүгд том үсгээр байдаг, хэрэв та олон өөр өөр төрлийн FreeBSD
	машинуудын ажиллагааг хянадаг бол машинуудынхаа нэрээр нэрлэх нь зохимжтой юм.
	Бид энэ жишээнийхээ зорилгоор <code class="filename">MYKERNEL</code> гэж нэрлэе.</p><div xmlns="" class="tip"><h3 class="admontitle">Зөвлөгөө: </h3><p xmlns="http://www.w3.org/1999/xhtml">Өөрийн цөмийн тохиргооны файлаа шууд <code class="filename">/usr/src</code>
	доор хадгалах нь буруу байж болох юм. Хэрэв та асуудлуудтай тулгарч байгаа бол
	<code class="filename">/usr/src</code> -ийг устгаад л дахиж эхлэх нь зоригтой
	алхам байж болох юм. Гэхдээ үүнийг хийгээд хэдэн секундын дараа л та өөрийн
	өөрчлөн тохируулсан цөмийн тохиргооны файлаа устгасан болохоо мэдэх болно.
	Мөн <code class="filename">GENERIC</code> файлыг шууд засварлах хэрэггүй бөгөөд
	дараагийн удаа <a class="link" href="updating-upgrading.html" title="Бүлэг 25. FreeBSD-г шинэчилж сайжруулах нь">өөрийн эх модыг шинэчлэх</a>
	үйлдлийг хийхэд дарагдан хуулагдаж таны цөмийн өөрчлөлт алдагдаж магадгүй.</p><p xmlns="http://www.w3.org/1999/xhtml">Та цөмийн тохиргооны файлаа өөр газар хадгалж дараа нь
	<code class="filename">i386</code> сан дахь
	файл уруу тэмдэгт холбоос үүсгэж болно.</p><p xmlns="http://www.w3.org/1999/xhtml">Жишээ нь:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /root/kernels</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp GENERIC /root/kernels/MYKERNEL</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /root/kernels/MYKERNEL</code></strong></pre></div><p>Одоо <code class="filename">MYKERNEL</code>-ийг өөрийн дуртай текст засварлагч дээр
	засаарай. Хэрэв та дөнгөж эхэлж байгаа бол байгаа цорын ганц засварлагч нь
	<span class="application">vi</span> байж болох бөгөөд түүнийг энд тайлбарлахад хэтэрхий
	төвөгтэй боловч <a class="link" href="bibliography.html" title="Хавсралт B. Ном зүй">номын жагсаалтад</a>
	байгаа өөр олон номнуудад бичсэн байгаа. Гэхдээ FreeBSD нь <span class="application">ee</span>
	гэдэг хялбар засварлагчийг санал болгодог бөгөөд хэрэв та эхлэн сурагч бол энэ нь
	таны сонгох засварлагч байх болно. Өөрийн тохиргоог тусгах эсвэл <code class="filename">GENERIC</code>
	файлаас өөрийн хийсэн өөрчлөлтүүдээс ялгахын тулд дээд хэсэгт байгаа мөрүүдийг
	чөлөөтэй өөрчлөөрэй.</p><a id="idp73960528" class="indexterm"></a><p>Хэрэв та <span class="trademark">SunOS</span>™ эсвэл өөр BSD үйлдлийн системийн доор цөм бүтээж байсан бол
	энэ файлын ихэнх хэсэг нь маш танил байх болно. Хэрэв та DOS зэрэг өөр үйлдлийн
	системээс ирж байгаа бол нөгөө талаасаа <code class="filename">GENERIC</code>
	тохиргооны файл төвөгтэй юм шиг санагдаж болох бөгөөд
	<a class="link" href="kernelconfig-config.html" title="9.6. Тохиргооны файл">Тохиргооны файл</a> хэсгийн
	тайлбаруудыг удаан нухацтай дагаарай.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв та FreeBSD төслийн хамгийн сүүлийн эхээр <a class="link" href="updating-upgrading.html" title="Бүлэг 25. FreeBSD-г шинэчилж сайжруулах нь">өөрийн эх модоо сүүлийн үеийн хэлбэрт авчирсан</a> бол
	шинэчлэх шатуудаа хэрэгжүүлж эхлэхээсээ өмнө <code class="filename">/usr/src/UPDATING</code>
	файлыг үргэлж шалгаж байх нь чухал юм. Энэ файл нь шинэчилсэн эх код доторх тусгай
	анхаарал шаардлагатай чухал асуудлууд эсвэл хэсгүүдийн талаар тайлбарладаг.
	<code class="filename">/usr/src/UPDATING</code> нь үргэлж таны FreeBSD
	хувилбартай таардаг бөгөөд энэ гарын авлагаас илүү шинэ мэдээлэлтэй, сүүлийн үеийнх
	байдаг.</p></div><p>Та цөмд зориулан эх кодоо хөрвүүлэх шаардлагатай.</p><div class="procedure"><a id="idp73965136"></a><div class="procedure-title">Гүйцэтгэл 9.1. Цөмийг бүтээх нь</div><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Цөмийг бүтээхэд FreeBSD-ийн гүйцэд эх мод байх шаардлагатай.</p></div><ol class="procedure" type="1"><li class="step"><p> <code class="filename">/usr/src</code> сан уруу орно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong></pre></li><li class="step"><p>Цөмийг хөрвүүлнэ:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make buildkernel KERNCONF=MYKERNEL</code></strong></pre></li><li class="step"><p>Шинэ цөмийг суулгана:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make installkernel KERNCONF=MYKERNEL</code></strong></pre></li></ol></div><div xmlns="" class="tip"><h3 class="admontitle">Зөвлөгөө: </h3><p xmlns="http://www.w3.org/1999/xhtml"> Анхдагчаар өөрчлөн тохируулсан цөмийг бүтээхэд <span class="emphasis"><em>бүх</em></span>
	цөмийн модулиуд бас бүтээгдэнэ. Хэрэв та цөмийг хурдан шинэчлэхийг
	эсвэл зөвхөн өөрчлөн тохируулсан модулиудыг бүтээхийг хүсэж байгаа бол цөмийг бүтээж
	эхлэхээсээ өмнө <code class="filename">/etc/make.conf</code> файлыг засварлах
	хэрэгтэй:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">MODULES_OVERRIDE = linux acpi sound/sound sound/driver/ds1 ntfs</pre><p xmlns="http://www.w3.org/1999/xhtml">Энэ хувьсагч нь бүгдийг биш бүтээх модулиудын жагсаалтыг тодорхойлдог.</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">WITHOUT_MODULES = linux acpi sound ntfs</pre><p xmlns="http://www.w3.org/1999/xhtml">Энэ хувьсагч нь бүтээх процессод оруулахгүй байх дээд түвшний модулиудын жагсаалтыг
	тодорхойлдог. Цөмийг бүтээх процессийн явцад танд хэрэг болохуйц бусад
	хувьсагчуудын тухайд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">make.conf</span>(5)</span></a> гарын авлагын хуудсанд хандаж
	үзнэ үү.</p></div><a id="idp73996624" class="indexterm"></a><p>Шинэ цөм <code class="filename">/boot/kernel</code> санд
	<code class="filename">/boot/kernel/kernel</code> нэрээр хуулагдах бөгөөд
	хуучин цөм нь <code class="filename">/boot/kernel.old/kernel</code> уруу хуулагдана.
	Одоо системийг унтраагаад шинэ цөмийг ашиглан дахин ачаал. Хэрэв ямар нэг юм болохгүй болбол
	энэ бүлгийн төгсгөлд байгаа <a class="link" href="kernelconfig-trouble.html" title="9.7. Хэрэв ямар нэг юм буруутвал">алдааг олж засварлах</a>
	заавар танд хэрэгтэй байж болох юм. Таны шинэ цөм <a class="link" href="kernelconfig-trouble.html#kernelconfig-noboot">ачаалахгүй</a> тохиолдолд хэрхэн сэргээх
	талаар тайлбарласан хэсгийг заавал уншаарай.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ачаалах <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> ба тохиргоо зэрэг ачаалах процесстой холбоотой бусад файлууд
	<code class="filename">/boot</code> -д хадгалагдана. Гуравдагч этгээдийн
	эсвэл өөрчлөн тохируулсан модулиуд <code class="filename">/boot/kernel</code>-д
	байрлах бөгөөд гэхдээ модулиудыг хөрвүүлсэн цөмийн адил сүүлийн үеийн хэлбэрт байлгах нь маш чухал гэдгийг
	хэрэглэгчид мэдэх шаардлагатай. Хөрвүүлсэн цөмтэй хамт ажиллуулахааргүй модулиуд нь
	тогтворгүй байдал эсвэл буруу ажиллагаанд хүргэж болзошгүй юм.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="kernelconfig-modules.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="kernelconfig.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="kernelconfig-config.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">9.4. Цөмийн драйверууд, дэд системүүд, болон модулиуд </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 9.6. Тохиргооны файл</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>