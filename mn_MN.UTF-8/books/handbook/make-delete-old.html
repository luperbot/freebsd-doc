<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>25.8. Хуучин файлууд, хавтаснууд болон сангуудыг устгах</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="updating-upgrading.html" title="Бүлэг 25. FreeBSD-г шинэчилж сайжруулах нь" /><link rel="prev" href="makeworld.html" title="25.7. «Ертөнц»ийг дахин бүтээх нь" /><link rel="next" href="small-lan.html" title="25.9. Олон машины хувьд дагах нь" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">25.8. Хуучин файлууд, хавтаснууд болон сангуудыг устгах</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="makeworld.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 25. FreeBSD-г шинэчилж сайжруулах нь</th><td width="20%" align="right"> <a accesskey="n" href="small-lan.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="make-delete-old"></a>25.8. Хуучин файлууд, хавтаснууд болон сангуудыг устгах</h2></div><div><span class="authorgroup">Тэмдэглэгээ хийсэн <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Антон</span> <span class="surname">Штеренлихт</span></span>. </span></div></div></div><a id="idp86591184" class="indexterm"></a><p>FreeBSD хөгжүүлэлтийн явцад файлууд болон тэдгээрийн агуулга
      үе үе хуучирдаг.Тэдгээрийн үүрэг болон боломжууд өөр хаа нэгтээ
      хийгдсэн юм уу эсвэл сангийн хувилбарын дугаар өөрчлөгдсөн юм уу эсвэл
      системээс бүрмөсөн хасагдсанаас болоод тийм
      байж болох юм. Эдгээрт хуучин файлууд, сангууд болон хавтаснууд
      ордог бөгөөд эдгээрийг системийг шинэчлэхдээ устгах ёстой. Энэ нь
      хэрэглэгчийн хувьд хадгалах (болон нөөц) төхөөрөмж дээр хэрэгцээгүй
      зай эзлээд байгаа хуучин файлуудаар систем дүүрэхгүй байх ашигтай  юм.
      Үүнээс гадна хуучин сан аюулгүй байдлын болон найдвартай ажиллагааны
      хувьд асуудалтай байсан бол та өөрийн системийг аюулгүй болгож хуучин
      сангаас болоод ажиллахаа болиод байсан асуудлаас сэргийлэхийн тулд
      шинэ сан руу шинэчлэх хэрэгтэй.
      Хуучин гэгдсэн файлууд, хавтаснууд, сангуудын жагсаалт
      <code class="filename">/usr/src/ObsoleteFiles.inc</code> файлд байдаг.
      Дараах заавар нь системийг шинэчлэх явцад хуучин файлуудыг устгахад
      туслах болно.</p><p>Таныг  <a class="xref" href="makeworld.html#canonical-build" title="25.7.1. Шалгагдсан аргаар өөрийн системийг шинэчлэх нь">Хэсэг 25.7.1, «Шалгагдсан аргаар өөрийн системийг шинэчлэх нь»</a>-д заасны дагуу явж байгаа гэж энд үзнэ.
	<code class="command">make
      installworld</code> болон дараагийн
	<code class="command">mergemaster</code> тушаал амжилттай хэрэгжсэний
	дараа дараах маягаар та хуучин файлууд болон сангуудыг шалгах
	ёстой:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make check-old</code></strong></pre><p>Хэрэв ямар нэг хуучин файл олдвол дараах тушаал
      ашиглан тэдгээрийг устгаж болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make delete-old</code></strong></pre><div xmlns="" class="tip"><h3 class="admontitle">Зөвлөгөө: </h3><p xmlns="http://www.w3.org/1999/xhtml">Түлхүүр үгсийн талаар дэлгэрэнгүйг сонирхож байгаа бол <code class="filename">/usr/src/Makefile</code>
        файлыг үзнэ үү.</p></div><p>Хуучин файл бүрийг устгахын өмнө асууж хариулах дэлгэц гарна.
      Та энэ дэлгэцийг өнгөрөөж систем эдгээр файлуудыг автоматаар устгахаар
      тохируулахын тулд <code class="varname">BATCH_DELETE_OLD_FILES</code> хувьсагчийг
      дараах байдлаар ашиглана:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DBATCH_DELETE_OLD_FILES delete-old</code></strong></pre><p>Мөн энэ зорилгод хүрэхийн тулд
      доорхитой адилаар эдгээр тушаалд <code class="command">yes</code> өгч хүрч болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>yes|make delete-old</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Анхааруулга: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хуучин файлуудыг устгах нь тэдгээр хуучин файлуудаас
	  хамааралтай програмуудыг ажиллахгүй болгоно.
	  Энэ нь ялангуяа хуучин сангуудын хувьд үнэн байдаг.
	  Ихэнх тохиолдолд та <code class="command">make
       delete-old-libs</code> тушаалыг биелүүлэхээсээ
	  өмнө хуучин сан ашиглаж байсан програмууд, портууд эсвэл сангуудыг
	  дахин бүтээх хэрэгтэй.</p></div><p>Хуваалцсан сангуудаас хамааралтай эсэхийг шалгадаг хэрэгслүүд
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/libchk/pkg-descr">sysutils/libchk</a> эсвэл
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/bsdadminscripts/pkg-descr">sysutils/bsdadminscripts</a> зэрэг портын
      цуглуулгад байдаг.</p><p>Хуучин хуваалцсан сангууд нь шинэ сангуудтай зөрчилдөж болох
      бөгөөд доорх шиг алдаа өгч болно:</p><pre class="screen">/usr/bin/ld: warning: libz.so.4, needed by /usr/local/lib/libtiff.so, may conflict with libz.so.5
/usr/bin/ld: warning: librpcsvc.so.4, needed by /usr/local/lib/libXext.so, may conflict with librpcsvc.so.5</pre><p>Эдгээр асуудлуудыг шийдэхийн тулд уг санг аль порт суулгасныг
      олно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_info -W  /usr/local/lib/libtiff.so</code></strong>
/usr/local/lib/libtiff.so was installed by package tiff-3.9.4
<code class="prompt">#</code> <strong class="userinput"><code>pkg_info -W /usr/local/lib/libXext.so</code></strong>
/usr/local/lib/libXext.so was installed by package libXext-1.1.1,1</pre><p>Дараа нь уг портыг deinstall хийгээд дахин бүтээж суулгах
      хэрэгтэй. Энэ явцыг автоматжуулахын тулд <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portmaster/pkg-descr">ports-mgmt/portmaster</a> болон <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a>
      хэрэгслийг ашиглаж болно. Бүх портуудыг дахин бүтээсэн гэдэгтээ
      итгэлтэй болсны дараа хуучин сангуудыг ашиглах хэрэггүй бөгөөд тэдгээрийг
      дараах тушаал ашиглан устгаж болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make delete-old-libs</code></strong></pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="makeworld.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="updating-upgrading.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="small-lan.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">25.7. <span class="quote">«<span class="quote">Ертөнц</span>»</span>ийг дахин бүтээх нь </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 25.9. Олон машины хувьд дагах нь</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>