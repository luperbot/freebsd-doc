<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>19.5. USB хадгалалтын төхөөрөмжүүд</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="disks.html" title="Бүлэг 19. Хадгалалт" /><link rel="prev" href="raid.html" title="19.4. RAID" /><link rel="next" href="creating-cds.html" title="19.6. Оптик зөөвөрлөгчийг (CD-үүд) үүсгэж ашиглах нь" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">19.5. USB хадгалалтын төхөөрөмжүүд</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="raid.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 19. Хадгалалт</th><td width="20%" align="right"> <a accesskey="n" href="creating-cds.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="usb-disks"></a>19.5. USB хадгалалтын төхөөрөмжүүд</h2></div><div><span class="authorgroup">Хувь нэмэр болгон оруулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Марк</span> <span class="surname">Фонвил</span></span>. </span></div></div></div><a id="idp82094928" class="indexterm"></a><p>Одоо үед маш олон гадаад хадгалалтын шийдлүүд байгаа бөгөөд
	Universal Serial Bus (USB): хатуу хөтчүүд, USB хуруун хөтчүүд,
	CD-R шарагчид зэргийг ашигладаг. FreeBSD нь эдгээр төхөөрөмжүүдийн
	дэмжлэгийг хангадаг.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82096464"></a>19.5.1. Тохиргоо</h3></div></div></div><p>USB бөөн хадгалалтын төхөөрөмжүүдийн драйвер <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a> нь
	USB хадгалалтын төхөөрөмжүүдийн дэмжлэгийг хангадаг. Хэрэв та
	<code class="filename">GENERIC</code> цөм ашиглавал өөрийн тохиргоондоо юу
	ч өөрчлөх шаардлагагүй. Хэрэв та өөрчлөн тохируулсан цөм ашиглах бол
	таны цөмийн тохиргооны файлд дараах мөрүүд байгаа эсэхийг
	шалгаарай:</p><pre class="programlisting">device scbus
device da
device pass
device uhci
device ohci
device ehci
device usb
device umass</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a> драйвер нь USB хадгалалтын төхөөрөмжүүдэд хандахын
	тулд SCSI дэд системийг хэрэглэдэг бөгөөд таны USB төхөөрөмж системд
	SCSI төхөөрөмж маягаар харагдах болно. Таны эх хавтан дээрх USB бичил
	схемээс хамаарч USB 1.X-ийн дэмжлэгийн хувьд танд зөвхөн <code class="literal">device
	uhci</code> эсвэл <code class="literal">device ohci</code> хоёрын аль нэг
	хэрэгтэй болно, гэхдээ хоёуланг нь цөмийн тохиргоондоо байлгах нь гэмгүй юм.
	USB 2.0 хянагчуудад зориулсан дэмжлэгийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ehci&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ehci</span>(4)</span></a> драйвер
	(<code class="literal">device ehci</code> мөр) хангадаг.
	Хэрэв та ямар нэг мөр нэмсэн бол шинэ цөмөө эмхэтгэж суулгахаа битгий
	мартаарай.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв таны USB төхөөрөмж чинь CD-R эсвэл DVD шарагч бол
	SCSI CD-ROM драйвер <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">cd</span>(4)</span></a>-г цөмд дараах мөрийн тусламжтай
	нэмэх ёстой:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">device cd</pre><p xmlns="http://www.w3.org/1999/xhtml">Шарагч нь SCSI хөтөч гэж харагддаг учир <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atapicam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atapicam</span>(4)</span></a>
	драйверийг цөмийн тохиргоонд ашиглах ёсгүй.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82109520"></a>19.5.2. Тохиргоог тест хийх нь</h3></div></div></div><p>Тохиргоог тест хийхэд бэлэн боллоо: өөрийн USB төхөөрөмжийг залгахад
	системийн мэдэгдлийн буферт (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>) хөтөч нь иймэрхүү
	харагдах ёстой:</p><pre class="screen">umass0: USB Solid state disk, rev 1.10/1.00, addr 2
GEOM: create disk da0 dp=0xc2d74850
da0 at umass-sim0 bus 0 target 0 lun 0
da0: &lt;Generic Traveling Disk 1.11&gt; Removable Direct Access SCSI-2 device
da0: 1.000MB/s transfers
da0: 126MB (258048 512 byte sectors: 64H 32S/T 126C)</pre><p>Мэдээж хэрэг үйлдвэрлэгч, төхөөрөмжийн цэг (<code class="filename">da0</code>)
	болон бусад зүйлс таны тохиргооноос хамаараад өөр байж болно.</p><p>USB төхөөрөмж нь SCSI төхөөрөмж гэж харагддаг болохоор
	<code class="command">camcontrol</code> тушаалыг ашиглаж системд холбогдсон
	USB хадгалалтын төхөөрөмжүүдийн жагсаалтыг харуулж болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol devlist</code></strong>
&lt;Generic Traveling Disk 1.11&gt;      at scbus0 target 0 lun 0 (da0,pass0)</pre><p>Хэрэв хөтөч нь файлын системтэй ирвэл та түүнийг холбож чадна.
	<a class="xref" href="disks-adding.html" title="19.3. Диск нэмэх">Хэсэг 19.3, «Диск нэмэх»</a> хэсэг нь хэрэв шаардлагатай бол
	USB хөтчийг хэлбэршүүлж түүн дээр хуваалт үүсгэхэд танд туслах
	болно.</p><div xmlns="" class="warning"><h3 class="admontitle">Сануулга: </h3><p xmlns="http://www.w3.org/1999/xhtml">Дурын төхөөрөмжийг итгэлгүй хэрэглэгчдэд холбох боломжийг
	  олгох нь өөрөөр хэлбэл <code class="literal">vfs.usermount</code>-ийг доор
	  тайлбарласнаар идэвхжүүлэх нь аюулгүй байдлын үүднээс авч үзвэл
	  аюултай юм. FreeBSD дээрх ихэнх файлын систем нь хортой төхөөрөмжийн
	  эсрэг хамгаалалтгүй байдаг.</p></div><p>Энэ төхөөрөмжийг энгийн хэрэглэгч холбож чаддагаар болгохын тулд
	тодорхой алхмуудыг хийх хэрэгтэй. Эхлээд USB хадгалалтын төхөөрөмж
	холбогдсон үед үүссэн төхөөрөмжүүдэд хэрэглэгч хандаж болохоор байх
	хэрэгтэй. Үүний шийдэл нь эдгээр төхөөрөмжүүдийн бүх хэрэглэгчдийг
	<code class="systemitem">operator</code> бүлгийн гишүүн болгох явдал
	юм. Үүнийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a>-ээр хийнэ. Хоёрдугаарт төхөөрөмжүүд нь
	үүсэх үед <code class="systemitem">operator</code> бүлэг тэдгээрийг
	уншиж бичиж чадаж байх ёстой. Тохирох мөрүүдийг
	<code class="filename">/etc/devfs.rules</code> файлд
	нэмснээр үүнийг хийж болно:</p><pre class="programlisting">[localrules=5]
add path 'da*' mode 0660 group operator</pre><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв системд SCSI дискнүүд байгаа бол үүнийг арай өөрөөр хийх
	ёстой. Өөрөөр хэлбэл хэрэв систем нь аль хэдийн <code class="filename">da0</code>-ээс
	  <code class="filename">da2</code> хүртэлх холбогдсон дискнүүдийг
	агуулж байвал хоёр дахь мөрийг дараах маягаар солих хэрэгтэй:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">add path 'da[3-9]*' mode 0660 group operator</pre><p xmlns="http://www.w3.org/1999/xhtml">Энэ нь байгаа дискнүүдийг <code class="systemitem">operator</code>
	бүлэгт хамааруулахгүй болгоно.</p></div><p>Та бас өөрийн <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs.rules&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs.rules</span>(5)</span></a> дүрмийн олонлогийг
		<code class="filename">/etc/rc.conf</code> файлд идэвхжүүлэх
		хэрэгтэй:</p><pre class="programlisting">devfs_system_ruleset="localrules"</pre><p>Дараа нь цөм нь ердийн хэрэглэгчдэд файлын системийг холбох боломжтойгоор
	тохируулагдах ёстой. Хамгийн хялбар арга бол <code class="filename">/etc/sysctl.conf</code>-д
	мөр нэмэх явдал юм:</p><pre class="programlisting">vfs.usermount=1</pre><p>Дараагийн дахин ачаалалтын дараа энэ нь идэвхжихийг санаарай.
	Өөрөөр энэ хувьсагчийг тохируулахын тулд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>-г ашиглаж
	болох юм.</p><p>Төгсгөлийн алхам нь файлын систем холбогдох санг үүсгэх явдал юм.
	Энэ санг файлын системийг холбох хэрэглэгч эзэмшсэн байх хэрэгтэй.
	Үүнийг хийх нэг арга нь <code class="systemitem">root</code>-ийн хувьд
	тэр хэрэглэгчийн эзэмшсэн дэд санг
	<code class="filename">/mnt/username</code>
	(<em class="replaceable"><code>username</code></em>-г тухайн хэрэглэгчийнхээ нэвтрэх
	нэрээр болон <em class="replaceable"><code>usergroup</code></em>-г хэрэглэгчийнхээ үндсэн
	бүлгийн нэрээр солиорой) гэж үүсгэх явдал юм:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /mnt/username</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown username:usergroup /mnt/username</code></strong></pre><p>USB хуруун хөтөч залгагдаж  <code class="filename">/dev/da0s1</code> төхөөрөмж
	гарч иржээ гэж бодъё. Эдгээр төхөөрөмжүүд нь ихэвчлэн FAT файлын системээр
	хэлбэршүүлэгдсэн ирдэг бөгөөд эдгээрийг иймэрхүү маягаар холбож
	болно:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mount -t msdosfs -m=644 -M=755 /dev/da0s1 /mnt/username</code></strong></pre><p>Хэрэв та төхөөрөмжийг залгаснаа салгавал (дискийг урьдаар салгах ёстой)
	та системийн мэдэгдлийн буфераас доор дурдсантай төстэй мэдэгдлийг
	харах ёстой:</p><pre class="screen">umass0: at uhub0 port 1 (addr 2) disconnected
(da0:umass-sim0:0:0:0): lost device
(da0:umass-sim0:0:0:0): removing device entry
GEOM: destroy disk da0 dp=0xc2d74850
umass0: detached</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82145488"></a>19.5.3. Нэмэлт унших материалууд</h3></div></div></div><p><a class="link" href="disks-adding.html" title="19.3. Диск нэмэх">Диск нэмэх</a> болон
	<a class="link" href="mount-unmount.html" title="4.6. Файл системийг холбох болон салгах">Файлын системүүдийг холбох болон салгах</a>
	хэсгүүдээс гадна төрөл бүрийн гарын авлагын хуудаснуудыг унших нь хэрэгтэй
	байж болох юм: FreeBSD  8.X-ийн хувьд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">camcontrol</span>(8)</span></a>, болон <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=usbconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">usbconfig</span>(8)</span></a>
	эсвэл FreeBSD-ийн өмнөх хувилбаруудын хувьд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=usbdevs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">usbdevs</span>(8)</span></a> байна.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="raid.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="creating-cds.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">19.4. RAID </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 19.6. Оптик зөөвөрлөгчийг (CD-үүд) үүсгэж ашиглах нь</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>