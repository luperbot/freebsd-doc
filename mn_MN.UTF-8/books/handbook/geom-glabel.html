<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>20.7. Дискний төхөөрөмжүүдийг хаяглах нь</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="GEOM.html" title="Бүлэг 20. GEOM: Модульчлагдсан Диск Хувиргах Тогтолцоо" /><link rel="prev" href="geom-ggate.html" title="20.6. GEOM Хаалга Сүлжээний Төхөөрөмжүүд" /><link rel="next" href="geom-gjournal.html" title="20.8. GEOM-ийн тусламжтай UFS тэмдэглэл" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">20.7. Дискний төхөөрөмжүүдийг хаяглах нь</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="geom-ggate.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 20. GEOM: Модульчлагдсан Диск Хувиргах Тогтолцоо</th><td width="20%" align="right"> <a accesskey="n" href="geom-gjournal.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="geom-glabel"></a>20.7. Дискний төхөөрөмжүүдийг хаяглах нь</h2></div></div></div><a id="idp83931600" class="indexterm"></a><a id="idp83932368" class="indexterm"></a><p>Системийг эхлүүлэх явцад FreeBSD цөм төхөөрөмжүүдийг олж төхөөрөмжийн
	цэгүүдийг үүсгэдэг. Төхөөрөмжүүдийг илрүүлэх энэ арга нь зарим нэг
	асуудлуудтай байдаг, жишээ нь шинэ дискний төхөөрөмж <acronym class="acronym">USB</acronym>-ээр
	нэмэгдсэн бол яах вэ? Флэш төхөөрөмжид <code class="filename">da0</code> гэсэн
	төхөөрөмжийн нэр өгөгдөж хуучин байсан <code class="filename">da0</code> нь
	<code class="filename">da1</code> болж өөрчлөгдөх болов уу. Энэ нь хэрэв
	файлын системүүд <code class="filename">/etc/fstab</code>-д орсон
	бол тэдгээрийг холбоход асуудал гаргах бөгөөд бүр системийг ачаалахгүй
	байдалд хүргэж болох юм.</p><p>Нэг шийдэл нь <acronym class="acronym">SCSI</acronym> карт руу нэмэгдсэн
	шинэ төхөөрөмжид төхөөрөмжийн ашиглагдаагүй дугаарууд өгч
	<acronym class="acronym">SCSI</acronym> төхөөрөмжүүдийг гинжин цуваа болгох явдал юм.
	Гэхдээ анхдагч <acronym class="acronym">SCSI</acronym> дискийг сольж болзошгүй
	<acronym class="acronym">USB</acronym> төхөөрөмжүүдийн хувьд яах вэ? Яагаад гэвэл <acronym class="acronym">USB</acronym>
	төхөөрөмжүүд нь ихэвчлэн <acronym class="acronym">SCSI</acronym> картнуудаас өмнө
	шалгагддаг. Үүний нэг шийдэл нь эдгээр төхөөрөмжүүдийг системийг ачаалсны
	дараа залгах явдал юм. Өөр нэг арга нь зөвхөн ганц <acronym class="acronym">ATA</acronym>
	хөтөч ашиглаж <acronym class="acronym">SCSI</acronym> төхөөрөмжүүдийг
	<code class="filename">/etc/fstab</code> файлд хэзээ ч жагсаахгүй байх тийм
	шийдэл байж болох юм.</p><p>Илүү сайн шийдэл нь <code class="command">glabel</code> хэрэгсэл ашиглан
	дискний төхөөрөмжүүдийг хаяглаж эдгээр
	хаяг/шошгонуудыг <code class="filename">/etc/fstab</code> файлд ашиглаж болох
	юм. <code class="command">glabel</code> нь өгөгдсөн үзүүлэгчийн сүүлийн секторт
	хаяг/шошгыг хадгалдаг болохоор хаяг/шошго нь дахин ачаалахад хэвээр байх
	болно. Энэ хаяг/шошгыг төхөөрөмж маягаар ашигласнаар ямар төхөөрөмжийн
	цэгээр дамжин хандаж байгаагаас үл хамааран файлын систем нь үргэлж холбогдох
	юм.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="command">glabel</code>
	хэрэгсэл нь түр зуурын болон байнгын хаяг/шошгыг үүсгэж чадна.
	Хаяг/шошгонуудын
	ялгаануудын тухай дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=glabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">glabel</span>(8)</span></a> гарын авлагын хуудаснаас
	үзнэ үү.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83946960"></a>20.7.1. Хаяг/шошгоны төрлүүд болон жишээнүүд</h3></div></div></div><p>Байнгын хаяг нь ердийн ба файлын системийн гэсэн хоёр төрлийн байдаг.
	Файлын системийн байнгын хаягийг
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a> эсвэл <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> тушаалаар үүсгэж болно. Эдгээр
	хаяг/шошгонуудын төрлүүд <code class="filename">/dev</code> сангийн 
	дэд санд үүсгэгддэг бөгөөд файлын системийн төрлийн дагуу нэртэй байна.
	Жишээ нь <acronym class="acronym">UFS</acronym>2 файлын системийн
	хаяг/шошгонууд <code class="filename">/dev/ufs</code> санд
	үүсгэгддэг. Ердийн хаягийг <code class="command">glabel label</code> тушаалаар
	үүсгэж болдог. Эдгээр нь файлын системтэй хамааралгүй бөгөөд <code class="filename">/dev/label</code> санд үүсгэгдэх болно.</p><p>Түр зуурын хаяг/шошго нь дараагийн удаа ачаалахад арилдаг. Эдгээр хаяг/шошгонууд
	нь <code class="filename">/dev/label</code> санд үүсгэгдэх
	бөгөөд туршилтад тохирсон байдаг. Түр зуурын хаягийг <code class="command">glabel create</code>
	тушаалаар үүсгэж болно.</p><p>Өгөгдлийг устгалгүйгээр <acronym class="acronym">UFS</acronym>2 файлын системийн хувьд байнгын
	хаяг/шошго үүсгэхийн тулд доор дурдсан тушаалуудыг ажиллуулна:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tunefs -L home /dev/da3</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Сануулга: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв файлын систем дүүрэн бол энэ нь өгөгдлийн эвдрэлд хүргэж
	болох юм.</p></div><p>Хаяг/шошго одоо <code class="filename">/dev/ufs</code> санд
	үүссэн байх ёстой бөгөөд түүнийг <code class="filename">/etc/fstab</code> файлд нэмж
	болох юм:</p><pre class="programlisting">/dev/ufs/home		/home            ufs     rw              2      2</pre><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="command">tunefs</code>-г ажиллуулахдаа файлын системийг
	холбох ёсгүй.</p></div><p>Одоо файлын системийг холбож болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /home</code></strong></pre><p>Эндээс эхлэн ачаалах явцад <code class="filename">/boot/loader.conf</code> файлын
	тусламжтайгаар <code class="filename">geom_label.ko</code> цөмийн модуль дуудагдсан байхад
	эсвэл  <code class="literal">GEOM_LABEL</code> цөмийн тохируулга байхад
	төхөөрөмжийн цэг системд ямар нэгэн буруу нөлөөлөлгүйгээр өөрчлөгдөж болох
	юм.</p><p>Файлын систем нь <code class="command">newfs</code> тушаалд
	өгөгдсөн <code class="option">-L</code> тугны тусламжтайгаар анхдагч хаяг/шошготой
	үүсгэгдэж бас болно. Дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>-с
	үзнэ үү.</p><p>Доор дурдсан тушаалыг хаяг/шошгыг устгахдаа ашиглаж болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>glabel destroy home</code></strong></pre><p>Ачаалах дискийн хуваалтуудыг хэрхэн хаяглахыг дараах жишээ
	харуулж байна.</p><div class="example"><a id="idp83973200"></a><div class="example-title">Жишээ 20.1. Ачаалах диск дээрх хуваалтуудыг хаяглах нь</div><div class="example-contents"><p>Ачаалах диск дээрх хуваалтуудыг байнгын байдлаар хаягласнаар
	  дискийг өөр хянагч руу эсвэл өөр систем рүү шилжүүлсэн ч
	  гэсэн систем хэвийнээр ачаалж чаддаг болох юм. Энэ жишээний хувьд
	  системээр <code class="filename">ad0</code> гэж танигдсан ганц
	  <acronym class="acronym">ATA</acronym> диск хэрэглэгдэж байгаа болно.
	  Бас <code class="filename">/</code>,
	  <code class="filename">/var</code>,
	  <code class="filename">/usr</code> ба
	  <code class="filename">/tmp</code>
	  болон swap хуваалттай FreeBSD-ийн стандарт хуваалтын хэлбэрийг
	  ашиглаж байгаа болно.</p><p>Системийн дахин ачаалж ганц хэрэглэгчийн горимд ачаалж орохын тулд
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> тушаал хүлээх мөрөнд <span class="keycap"><strong>4</strong></span> товчлуурыг дарна.
	  Дараа нь дараах тушаалуудыг ажиллуулна:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>glabel label rootfs /dev/ad0s1a</code></strong>
GEOM_LABEL: Label for provider /dev/ad0s1a is label/rootfs
<code class="prompt">#</code> <strong class="userinput"><code>glabel label var /dev/ad0s1d</code></strong>
GEOM_LABEL: Label for provider /dev/ad0s1d is label/var
<code class="prompt">#</code> <strong class="userinput"><code>glabel label usr /dev/ad0s1f</code></strong>
GEOM_LABEL: Label for provider /dev/ad0s1f is label/usr
<code class="prompt">#</code> <strong class="userinput"><code>glabel label tmp /dev/ad0s1e</code></strong>
GEOM_LABEL: Label for provider /dev/ad0s1e is label/tmp
<code class="prompt">#</code> <strong class="userinput"><code>glabel label swap /dev/ad0s1b</code></strong>
GEOM_LABEL: Label for provider /dev/ad0s1b is label/swap
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong></pre><p>Систем нь олон хэрэглэгчийн ачаалах горимоор үргэлжлэх болно.
	  Ачаалж дууссаны дараа <code class="filename">/etc/fstab</code> файлыг
	  засварлаж ердийн төхөөрөмжийн нэрсийг тохирох хаягуудаар солиорой.
	  Төгсгөлийн <code class="filename">/etc/fstab</code> файл доорхтой адил
	  харагдах болно:</p><pre class="programlisting"># Device                Mountpoint      FStype  Options         Dump    Pass#
/dev/label/swap         none            swap    sw              0       0
/dev/label/rootfs       /               ufs     rw              1       1
/dev/label/tmp          /tmp            ufs     rw              2       2
/dev/label/usr          /usr            ufs     rw              2       2
/dev/label/var          /var            ufs     rw              2       2</pre><p>Системийг одоо дахин ачаалж болно. Хэрэв бүгд зөв болсон бол энэ нь
	  хэвийн гарч ирэх бөгөөд <code class="command">mount</code> тушаал дараахийг харуулах
	  болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount</code></strong>
/dev/label/rootfs on / (ufs, local)
devfs on /dev (devfs, local)
/dev/label/tmp on /tmp (ufs, local, soft-updates)
/dev/label/usr on /usr (ufs, local, soft-updates)
/dev/label/var on /var (ufs, local, soft-updates)</pre></div></div><br class="example-break" /><p>FreeBSD 7.2-оос эхлэн <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=glabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">glabel</span>(8)</span></a> ангилал
	<acronym class="acronym">UFS</acronym> файлын системийн хувьд давхардахгүй
	файлын системийн id <code class="literal">ufsid</code> дээр тулгуурлан
	шинэ хаягийн төрлийг дэмждэг. Эдгээр хаягууд нь
	<code class="filename">/dev/ufsid</code> санд байрлах
	бөгөөд системийн эхлэх явцад автоматаар үүсдэг.
	Хуваалтуудыг <code class="filename">/etc/fstab</code> боломжийг
	ашиглан холбохын тулд <code class="literal">ufsid</code> хаягийг
	ашиглах боломжтой байдаг. Файлын системийн жагсаалт болон
	тэдгээр файл системийн харгалзах <code class="literal">ufsid</code>
	хаягуудыг авахын тулд <code class="command">glabel status</code> тушаал
	ашиглана:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>glabel status</code></strong>
                  Name  Status  Components
ufsid/486b6fc38d330916     N/A  ad4s1d
ufsid/486b6fc16926168e     N/A  ad4s1f</pre><p>Дээрхи жишээн дээр <code class="filename">ad4s1d</code> нь
	<code class="filename">/var</code> файлын системийг
	илэрхийлж байгаа бол <code class="filename">ad4s1f</code> нь
	<code class="filename">/usr</code> файлын системийг
	илэрхийлж байна. Үзүүлсэн <code class="literal">ufsid</code> утгуудыг
	ашиглан эдгээр хуваалтуудыг <code class="filename">/etc/fstab</code>
	дахь дараах оруулгуудын тусламжтайгаар холбож болох юм:</p><pre class="programlisting">/dev/ufsid/486b6fc38d330916        /var        ufs        rw        2      2
/dev/ufsid/486b6fc16926168e        /usr        ufs        rw        2      2</pre><p><code class="literal">ufsid</code> хаягтай ямар ч хуваалтыг энэ
	аргаар холбож болох юм. Ингэснээр тэдгээрийн хувьд байнгын
	хаягийг үүсгэх шаардлагагүйгээс гадна төхөөрөмжийн нэрнээс үл
	хамаарах холболтын ашигтай талыг авсан хэвээр байх болно.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="geom-ggate.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="GEOM.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="geom-gjournal.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">20.6. GEOM Хаалга Сүлжээний Төхөөрөмжүүд </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 20.8. GEOM-ийн тусламжтай UFS тэмдэглэл</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>