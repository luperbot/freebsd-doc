<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>15.5. Нэг удаагийн нууц үгүүд</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="security.html" title="Бүлэг 15. Аюулгүй байдал" /><link rel="prev" href="crypt.html" title="15.4. DES, Blowfish, MD5, SHA256, SHA512 болон Crypt" /><link rel="next" href="tcpwrappers.html" title="15.6. TCP Гүйцэтгэлийг хялбаршуулагчид" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">15.5. Нэг удаагийн нууц үгүүд</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="crypt.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 15. Аюулгүй байдал</th><td width="20%" align="right"> <a accesskey="n" href="tcpwrappers.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="one-time-passwords"></a>15.5. Нэг удаагийн нууц үгүүд</h2></div></div></div><a id="idp79230800" class="indexterm"></a><a id="idp79231312" class="indexterm"></a><p>Анхдагчаар FreeBSD OPIE (One-time Passwords
      In Everything буюу Бүхэнд зориулсан нэг удаагийн нууц үгүүд) дэмжлэгтэй
	байдаг бөгөөд энэ нь MD5 хэшийг анхдагчаар ашигладаг.</p><p>Бид гурван өөр төрлийн нууц үгийг доор хэлэлцэх болно. Эхнийх нь таны ердийн
	<span class="trademark">UNIX</span>® загварын эсвэл Kerberos нууц үг юм; бид үүнийг <span class="quote">«<span class="quote"><span class="trademark">UNIX</span>® нууц үг</span>»</span>
	гэж нэрлэх болно. Хоёр дахь төрөл нь OPIE <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=opiekey&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">opiekey</span>(1)</span></a> програмаар
	үүсгэгдэж  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=opiepasswd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">opiepasswd</span>(1)</span></a> програм болон нэвтрэлт хүлээх мөр хүлээн авах
	нэг удаагийн нууц үг юм; бид үүнийг <span class="quote">«<span class="quote">нэг удаагийн нууц үг</span>»</span> гэх болно.
	Сүүлийн төрөл нууц үг бол <code class="command">opiekey</code> програмд
	(заримдаа <code class="command">opiepasswd</code> програмууд) өгдөг
	нууцлаг нууц үг бөгөөд үүнийг ашиглан дээрх програмууд нэг удаагийн нууц үг
	үүсгэдэг; бид үүнийг <span class="quote">«<span class="quote">нууцлаг нууц үг</span>»</span> гэх буюу эсвэл
	зүгээр л шалгагдаагүй <span class="quote">«<span class="quote">нууц үг</span>»</span> гэх болно.</p><p>Нууцлаг нууц үг нь таны <span class="trademark">UNIX</span>® нууц үгтэй ямар ч холбоогүй юм; тэдгээр нь
	адил байж болох боловч ингэхийг зөвлөдөггүй. OPIE нууцлаг нууц үгүүд нь
	хуучин <span class="trademark">UNIX</span>® нууц үгүүд шиг 8 тэмдэгтэд хязгаарлагддаггүй
	<a href="#ftn.idp79243472" class="footnote" id="idp79243472"><sup class="footnote">[7]</sup></a> бөгөөд таны хүссэн хэмжээний
	урттай байж болдог. Зургаа эсвэл долоон үг бүхий өгүүлбэрээс тогтох нууц үгүүд
	нэлээн элбэг байдаг. Ихэнх хэсгийн хувьд OPIE систем <span class="trademark">UNIX</span>®-ийн нууц үгийн
	системээс бүр мөсөн ангид ажилладаг.</p><p>Нууц үгээс гадна OPIE-д чухал өгөгдлийн өөр хоёр хэсэг байдаг. Нэг нь
	<span class="quote">«<span class="quote">seed буюу үр</span>»</span> эсвэл <span class="quote">«<span class="quote">key буюу түлхүүр</span>»</span> гэгддэг
	бөгөөд 2 үсэг болон таван тооноос тогтдог. Нөгөөдөх нь <span class="quote">«<span class="quote">давталтын тоо</span>»</span>
	буюу 1-ээс 100 хүртэлх тоо юм. OPIE нэг удаагийн нууц үгийг үр болон нууцлаг
	нууц үгийг нийлүүлэн MD5 хэшийг давталтын тоогоор ашиглан үүсгэж үр дүнг нь
	зургаан богино Англи үг болгодог. Эдгээр зургаан Англи үг нь таны нэг удаагийн нууц
	үг юм. Нэвтрэлт шалгах систем (үндсэндээ PAM) ашигласан хамгийн сүүлийн нэг удаагийн
	нууц үгийг хадгалж байдаг бөгөөд хэрэглэгчийн өгсөн нууц үгийн хэш өмнөх нууц үгтэй таарч
	байвал хэрэглэгчийг нэвтрүүлдэг. Үл буцах хэш ашиглагддаг болохоор хэрэв
	амжилттайгаар ашиглагдсан нууц үгийг олж авсан бол дараа дараагийн нэг удаагийн
	нууц үгүүдийг үүсгэх боломжгүй байдаг; хэрэглэгч болон нэвтрэлтийн програмыг хамгийн
	сүүлийн хэлбэрт адилхан байлгаж байхын тулд давталтын тоо амжилттай нэвтрэлт хийгдэх бүрийн
	дараа багасаж байдаг. Давталтын тоо 1 хүрэх үед OPIE дахин хийгдэх
	хэрэгтэй болно.</p><p>Систем болгоны хувьд хэдэн програмууд байдаг бөгөөд тэдгээрийг бид энд
	хэлэлцэх болно. <code class="command">opiekey</code> програм давталтын
	тоо, үр болон нууцлаг нууц үгийг хүлээн авч нэг удаагийн нууц үг эсвэл
	нэг удаагийн нууц үгүүдийн үргэлжилсэн жагсаалтыг үүсгэдэг.
	<code class="command">opiepasswd</code> програмыг OPIE-г эхлүүлэх болон
	нууц үг, давталтын тоо эсвэл үр өөрчлөхөд ашигладаг; энэ нь
	нууцлаг нэвтрэх үгс аль эсвэл давталтын тоо, үр болон нэг удаагийн нууц үгийг
	авдаг. <code class="command">opieinfo</code> програм тохирох итгэмжлэлүүдийн
	файлуудыг (<code class="filename">/etc/opiekeys</code>) шалгаж
	ажиллуулсан хэрэглэгчийн одоогийн давталтын тоо болон үрийг дэлгэцэд
	гаргадаг.</p><p>Бид дөрвөн өөр төрлийн үйлдлийн талаар хэлэлцэх болно. Эхнийх нь аюулгүй
	холболтоор <code class="command">opiepasswd</code> ашиглаж нэг удаагийн нууц үгүүдийг
	эхний удаа тохируулах эсвэл өөрийн нууц үг эсвэл үрийг өөрчлөх үйлдэл юм.
	Хоёр дахь үйлдэл нь <code class="command">opiepasswd</code>-г аюултай холболтоор,
	<code class="command">opiekey</code> тушаалыг аюулгүй холболтоор ашиглаж
	адил үйлдлийг хийх явдал юм. Гурав дахь нь <code class="command">opiekey</code>-г
	аюултай холболтоор ашиглан нэвтрэн орох үйлдэл юм. Дөрөв дэх нь
	<code class="command">opiekey</code>-г ашиглан хэд хэдэн түлхүүрүүд үүсгэх үйлдэл
	бөгөөд гадагшаа аюулгүй холболтуудгүй газрууд уруу явахдаа тэдгээр түлхүүрүүдийг бичин авч
	эсвэл хэвлэн аваад өөртөө авч явж болох юм.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79283408"></a>15.5.1. Аюулгүй холболт эхлүүлэх</h3></div></div></div><p>OPIE-г эхний удаа эхлүүлэхдээ <code class="command">opiepasswd</code>
	тушаалыг ажиллуул:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiepasswd -c</code></strong>
[grimreaper] ~ $ opiepasswd -f -c
Adding unfurl:
Only use this method from the console; NEVER from remote. If you are using
telnet, xterm, or a dial-in, type ^C now or exit with no password.
Then run opiepasswd without the -c parameter.
Using MD5 to compute responses.
Enter new secret pass phrase:
Again new secret pass phrase:

ID unfurl OTP key is 499 to4268
MOS MALL GOAT ARM AVID COED
</pre><p><code class="prompt">Enter new secret pass phrase:</code> эсвэл
        <code class="prompt">Enter secret password:</code> мөрүүд дээр та
	нууц үг эсвэл өгүүлбэр оруулах ёстой. Энэ нь таны нэвтрэхдээ ашиглах
	нууц үг биш гэдгийг санах хэрэгтэй, үүнийг ашиглаж таны нэг удаагийн
	нэвтрэх түлхүүрийг үүсгэдэг. <span class="quote">«<span class="quote">ID</span>»</span> мөр таны
	тухайн үеийн параметрүүд болох таны нэвтрэх нэр, давталтын тоо болон
	үрийг өгдөг. Нэвтрэн орох үед систем эдгээр параметрүүдийг санаж
	танд тэдгээрийг санах шаардлагагүйгээр буцаан үзүүлдэг. Сүүлийн мөр нь
	тэдгээр параметрүүд болон таны нууцлаг нууц үгт харгалзах нэг удаагийн
	нууц үгийг өгдөг; хэрэв та нэн даруй дахин нэвтэрвэл энэ нэг удаагийн нууц үг
	нь таны ашиглах тэр нууц үг юм.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79287504"></a>15.5.2. Аюултай холболт эхлүүлэх</h3></div></div></div><p>Өөрийн нууцлаг нууц үгийг аюултай холболтоор эхэлж өгөхдөө эсвэл
	өөрчлөхдөө <code class="command">opiekey</code> ажиллуулж болох тийм газар уруу
	аюулгүй холболттой байж байх шаардлагатай; энэ нь таны итгэж байгаа машин
	дээр бүрхүүлийн тушаал хүлээх мөр хэлбэрээр байж болно. Та бас давталтын тоог
	(100 боломжийн утга байж болох юм) бодож өгөх хэрэгтэй бөгөөд та өөрөө үр
	бодож олох эсвэл дурын үүсгэснийг ашиглах хэрэгтэй. Аюултай холболтоор
	(таны эхлүүлж байгаа машин уруу) <code class="command">opiepasswd</code>
	тушаалыг ашигла:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiepasswd</code></strong>

Updating unfurl:
You need the response from an OTP generator.
Old secret pass phrase:
        otp-md5 498 to4268 ext
        Response: GAME GAG WELT OUT DOWN CHAT
New secret pass phrase:
        otp-md5 499 to4269
        Response: LINE PAP MILK NELL BUOY TROY

ID mark OTP key is 499 gr4269
LINE PAP MILK NELL BUOY TROY</pre><p>Анхдагч үрийг хүлээж авах бол <span class="keycap"><strong>Return</strong></span> дар.
	Дараа нь хандах нууц үгийг оруулахын өмнө аюулгүй холболт уруугаа
	орж адил параметрүүдийг өгөөрэй:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiekey 498 to4268</code></strong>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT</pre><p>Одоо аюултай холболт уруугаа шилжиж үүсгэсэн нэг удаагийн нууц үгээ
	тохирох програм уруу хуулаарай.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79292624"></a>15.5.3. Нэг удаагийн нууц үг ганцыг үүсгэх нь</h3></div></div></div><p>OPIE-г эхлүүлэн тохируулж нэвтэрсний дараа танд иймэрхүү тушаал
	хүлээх мөр харуулагдана:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>telnet example.com</code></strong>
Trying 10.0.0.1...
Connected to example.com
Escape character is '^]'.

FreeBSD/i386 (example.com) (ttypa)

login: <strong class="userinput"><code>&lt;username&gt;</code></strong>
otp-md5 498 gr4269 ext
Password: </pre><p>Энэ дашрамд тэмдэглэн хэлэхэд OPIE тушаал хүлээх мөрүүд ашигтай боломжтой
	байдаг: хэрэв та нууц үг хүлээх мөр дээр <span class="keycap"><strong>Return</strong></span>
	дарвал хүлээх мөр цуурайг идэвхжүүлж таны юу бичиж байгааг танд харуулдаг.
	Та хэвлэсэн зүйлээсээ харж магадгүй нууц үгийг гараараа бичиж оруулахыг
	оролдож байгаа бол энэ маш ашигтай байж болох юм.</p><a id="idp79300176" class="indexterm"></a><a id="idp79300688" class="indexterm"></a><a id="idp79301200" class="indexterm"></a><p>Энэ үед нэвтрэлт хүлээх мөрөнд хариулахын тулд та өөрийн нэг удаагийн нууц үгийг
	үүсгэх хэрэгтэй болно. Үүнийг <code class="command">opiekey</code> тушаал итгэн ажиллуулж
	чадах тийм систем дээрээ хийх хэрэгтэй. (DOS, <span class="trademark">Windows</span>® болон <span class="trademark">Mac OS</span>®-д
	зориулсан эдгээрийн хувилбарууд байдаг) Эдгээрт давталтын тоо болон үр тушаалын
	мөрийн тохируулга хэлбэрээр хэрэгтэй байдаг. Та нэвтрэн орж байгаа машиныхаа
	нэвтрэлт хүлээх мөрөөс эдгээрийг шууд хуулан тавьж болох юм.</p><p>Итгэсэн систем дээрээ:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiekey 498 to4268</code></strong>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT</pre><p>Одоо та өөрийн нэг удаагийн нууц үгтэй болсон болохоор нэвтрэлтээ
	үргэлжлүүлж болно.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79305424"></a>15.5.4. Нэг удаагийн нууц үг олныг үүсгэх нь</h3></div></div></div><p>Заримдаа та итгэсэн машин эсвэл аюулгүй холболт уруу хандах боломжгүй
	тийм газар очих хэрэгтэй болдог. Энэ тохиолдолд <code class="command">opiekey</code>
	тушаал ашиглаж хэд хэдэн нэг удаагийн нууц үгүүдийг урьдчилан үүсгэж хэвлэн
	биедээ авч явах боломжтой юм. Жишээ нь:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiekey -n 5 30 zz99999</code></strong>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase: <strong class="userinput"><code>&lt;secret password&gt;</code></strong>
26: JOAN BORE FOSS DES NAY QUIT
27: LATE BIAS SLAY FOLK MUCH TRIG
28: SALT TIN ANTI LOON NEAL USE
29: RIO ODIN GO BYE FURY TIC
30: GREW JIVE SAN GIRD BOIL PHI</pre><p><code class="option">-n 5</code> нь дараалсан таван түлхүүрийг үүсгэхийг,
	<code class="option">30</code> нь сүүлийн давталтын тоог хэд байх ёстойг зааж өгч
	байгаа юм. Эдгээр нь ашиглах бололцоотойг <span class="emphasis"><em>урвуу</em></span>
	дарааллаар дэлгэцэнд харуулдгийг тэмдэглэх нь зүйтэй. Хэрэв та хэт санаа
	зовниж байгаа бол та үр дүнг гараар бичиж авахыг хүсэж болох юм;
	эсвэл <code class="command">lpr</code> уруу хуулан авч тавьж болох юм. Мөр бүр
	давталтын тоо болон нэг удаагийн нууц үгийг харуулж байгааг анхаараарай;
	та нууц үгүүдийг хэрэглэх бүртээ тэдгээрийг арилгаж энэ хэвлэсэн арга тань ашигтай
	хэвээр болохыг мэдэж болох юм.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79310288"></a>15.5.5. <span class="trademark">UNIX</span>® нууц үгүүдийг ашиглахыг хязгаарлах нь</h3></div></div></div><p>OPIE нь <span class="trademark">UNIX</span>® нууц үгүүдийн ашиглалтыг нэвтрэлтийн сессийн IP хаяг дээр тулгуурлан
	хязгаарлаж чаддаг. Тохирох файл нь <code class="filename">/etc/opieaccess</code>
	бөгөөд энэ файл нь анхдагчаар байдаг. Энэ файлын талаар болон
	үүнийг ашигласнаар та аюулгүй байдлын ямар зүйлсүүдийг бодолцож анхаарах ёстой талаар
	дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=opieaccess&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">opieaccess</span>(5)</span></a>-с шалгана уу.</p><p>Энд жишээ <code class="filename">opieaccess</code> файл байна:</p><pre class="programlisting">permit 192.168.0.0 255.255.0.0</pre><p>Энэ мөр нь <span class="trademark">UNIX</span>® нууц үгүүдийг ямар ч үед ашиглахын тулд эхлэл IP хаягийг
	(хууран мэхлэхэд хүрч болох тийм эмзэг) заагдсан утга болон багтай тааруулах
	боломжийг хэрэглэгчдэд олгодог.</p><p><code class="filename">opieaccess</code> дахь аль ч дүрэм таарахгүй байгаа
	бол анхдагчаар OPIE биш нэвтрэлтүүдийг хааж үгүйсгэдэг.</p></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp79243472" class="footnote"><p><a href="#idp79243472" class="para"><sup class="para">[7] </sup></a>FreeBSD дээр стандарт нэвтрэх нууц үг уртаараа 128 тэмдэгт
	хүртэл байж болдог.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="crypt.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="security.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="tcpwrappers.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">15.4. DES, Blowfish, MD5, SHA256, SHA512 болон Crypt </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 15.6. TCP Гүйцэтгэлийг хялбаршуулагчид</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>