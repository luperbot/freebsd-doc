<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>11.7. Usare rc con FreeBSD</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuale di FreeBSD" /><link rel="up" href="config-tuning.html" title="Capitolo 11. Configurazione e Messa a Punto" /><link rel="prev" href="configtuning-cron.html" title="11.6. Configurare l'Utility cron" /><link rel="next" href="config-network-setup.html" title="11.8. Configurazione delle Interfacce di Rete" /><link rel="copyright" href="legalnotice.html" title="Nota Legale" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.7. Usare rc con FreeBSD</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configtuning-cron.html">Indietro</a> </td><th width="60%" align="center">Capitolo 11. Configurazione e Messa a Punto</th><td width="20%" align="right"> <a accesskey="n" href="config-network-setup.html">Avanti</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-rcd"></a>11.7. Usare rc con FreeBSD</h2></div><div><span class="authorgroup">Contributo di <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>Nel 2002 FreeBSD ha integrato il sistema di inizializzazione
      <code class="filename">rc.d</code> di NetBSD.
      Gli utenti dovrebbero aver notato i file elencati nella cartella
      <code class="filename">/etc/rc.d</code>.  Molti di questi file
      sono  servizi di base che possono essere controllati
      con opzioni <code class="option">start</code>, <code class="option">stop</code>,
      e <code class="option">restart</code>.
      Ad esempio, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a> può essere riavviato
      con il comando seguente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd restart</code></strong></pre><p>Questa procedura è simile a quella per altri
      servizi.  Naturalmente, i servizi in genere vengono avviati
      automaticamente in fase di avvio secondo quanto specificato in
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>.  Ad esempio, per abilitare il demone per il
      NAT (Network Address Translation) all'avvio basta aggiungere la linea
      seguente a <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">natd_enable="YES"</pre><p>Se esiste già una linea  <code class="option">natd_enable="NO"</code>,
      allora basta cambiare il valore da <code class="option">NO</code> a
      <code class="option">YES</code>.  Gli script rc caricheranno automaticamente
      ogni altro servizio durante il riavvio seguente, come
      descritto più avanti.</p><p>Poichè il sistema di <code class="filename">rc.d</code>
      è inteso prevalentemente per avviare/bloccare i servizi al
      momento dell'accensione/spegnimento, le opzioni standard
      <code class="option">start</code>, <code class="option">stop</code> e <code class="option">restart</code>
      avranno il comportamento appropriato solo seè stata impostata
      la variabile appropriata in <code class="filename">/etc/rc.conf</code>.
      Ad esempio il comando precedente <code class="command">sshd restart</code>
      funzionerà solo se in <code class="filename">/etc/rc.conf</code>
      è stata impostata l'opzione  <code class="varname">sshd_enable</code>
      a <code class="option">YES</code>.  Per avviare
      (<code class="option">start</code>), fermare (<code class="option">stop</code>) o
      riavviare (<code class="option">restart</code>) un servizio, ignorandole impostazioni
      in  <code class="filename">/etc/rc.conf</code>, i comandi devono avere il prefisso
      <span class="quote">«<span class="quote">one</span>»</span>.  Ad esempio per riavviare
      <code class="command">sshd</code> trascurando le impostazioni esistenti in
      <code class="filename">/etc/rc.conf</code>, impartite il comando seguente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd onerestart</code></strong></pre><p>È semplice controllare se un servizio è stato abilitato
      in <code class="filename">/etc/rc.conf</code> eseguendo lo script appropriato in
      <code class="filename">rc.d</code> con l'opzione
      <code class="option">rcvar</code>.  Dunque, un amministratore può
      controllare che
      <code class="command">sshd</code> sia effettivamente abilitato in
      <code class="filename">/etc/rc.conf</code> eseguendo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd rcvar</code></strong>
# sshd
$sshd_enable=YES</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">La seconda linea (<code class="literal"># sshd</code>) è l'output
         del comando
         <code class="command">sshd</code>; non una console di
         <code class="systemitem">root</code>.</p></div><p>Per determinare se un servizio è attivo,
      è disponibile l'opzione
      <code class="option">status</code>.  Ad esempio per
      verificare che <code class="command">sshd</code> sia effettivamente avviato:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd status</code></strong>
sshd is running as pid 433.</pre><p>In alcuni case è anche possibile effettuare il
      <code class="option">reload</code> di un servizio.
      Questo tenterà di inviare un segnale al servizio,
      per fargli ricaricare il suo file di configurazione.  Nella maggior
      parte dei casi si tratterà del segnale
      <code class="literal">SIGHUP</code>.
      Il supporto per questa caratteristica non è garantito per
      tutti i servizi.</p><p>La struttura di <code class="filename">rc.d</code> non viene
      usata solo per i servizi di rete, ma contribuisce anche per
      buona parte all'inizializzazione del sistema.
      Ad esempio, considerate il file
      <code class="filename">bgfsck</code>.  Quando lo script viene
      eseguito, esso stamperà il seguente messaggio:</p><pre class="screen">Starting background file system checks in 60 seconds.</pre><p>Dunque questo file viene usato per il controllo del
      file system in background,
      che avviene solo durante l'inizializzazione del sistema.</p><p>Molti servizi di sistema dipendono da altri servizi per
      poter funzionare in maniera appropriata.  Ad esempio, il NIS ed altri
      servizi basati sulle RPC potrebbero non funzionare in assenza
      di <code class="command">rpcbind</code> (portmapper).  Per risolvere il problema,
      nei commenti all'inizio di ogni script di avvio ci sono
      informazioni sulle dipendenze ed altri metadati.  Il programma
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rcorder</span>(8)</span></a> viene poi utilizzato per effettuare il
      parsing di questi commenti durante l'inizializzazione di sistema e per
      determinare l'ordine con il quale questi servizi devono essere avviati
      per avere le proprie dipendenze soddisfatte.
      In cima ad ogni file di avvio possono essere incluse le seguenti
      parole:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>PROVIDE: Specifica i servizi forniti dal file.</p></li><li class="listitem"><p>REQUIRE: Elenca i servizi richiesti per far
          funzionare correttamente questo servizio.  Questo file verrà
          eseguito <span class="emphasis"><em>dopo</em></span>
          i tali servizi.</p></li><li class="listitem"><p>BEFORE: Elenca i servizi che dipendono da questo.
          Questo file verrà lanciato  <span class="emphasis"><em>prima</em></span>
          dei servizi specificati.</p></li></ul></div><p>Usando questo metodo, un amministratore può controllare
      facilmente i servizi di sistema senza il fastidio dei
      <span class="quote">«<span class="quote">runlevel</span>»</span> come
      alcuni altri sistemi operativi <span class="trademark">UNIX</span>®.</p><p>Informazioni addizionali sul sistema
      <code class="filename">rc.d</code> possono essere trovate
      nelle pagine man di
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a>  e <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.subr&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.subr</span>(8)</span></a>.  Se sei interessato
      a scrivere un tuo script <code class="filename">rc.d</code> o
      a migliorarne uno esisente, ti può essere utile
      <a class="link" href="../../../../doc/it_IT.ISO8859-15/articles/rc-scripting" target="_top">questo
      articolo</a>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configtuning-cron.html">Indietro</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Risali</a></td><td width="40%" align="right"> <a accesskey="n" href="config-network-setup.html">Avanti</a></td></tr><tr><td width="40%" align="left" valign="top">11.6. Configurare l'Utility <code class="command">cron</code>  </td><td width="20%" align="center"><a accesskey="h" href="index.html">Partenza</a></td><td width="40%" align="right" valign="top"> 11.8. Configurazione delle Interfacce di Rete</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Questo, ed altri documenti, possono essere scaricati da
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Per domande su FreeBSD, leggi la
    <a href="http://www.FreeBSD.org/docs.html">documentazione</a> prima di contattare
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Per domande su questa documentazione, invia una e-mail a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>