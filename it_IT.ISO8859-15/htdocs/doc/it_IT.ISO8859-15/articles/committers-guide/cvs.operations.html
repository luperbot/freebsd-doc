<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>3. Operazioni sul CVS</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Guida del Committer" /><link rel="up" href="index.html" title="Guida del Committer" /><link rel="prev" href="committer.types.html" title="2. Tipi di Bit di Commit" /><link rel="next" href="conventions.html" title="4. Convenzioni e Tradizioni" /><link rel="copyright" href="trademarks.html" title="Nota Legale" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. Operazioni sul CVS</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="committer.types.html">Indietro</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="conventions.html">Avanti</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="cvs.operations"></a>3. Operazioni sul CVS</h2></div></div></div><p>Si assume che tu abbia già familiarità con le operazioni
      di base di CVS.</p><p>I CVS Repository Meisters <code class="email">&lt;<a xmlns="" class="email" href="mailto:cvsadm@FreeBSD.org">cvsadm@FreeBSD.org</a>&gt;</code> sono i <span class="quote">«<span class="quote">proprietari</span>»</span> del repository CVS e
      sono responsabili delle sue modifiche dirette allo scopo di ripulire o
      sistemare dei gravi abusi di CVS da parte di un committer.
      Nel caso dovessi causare qualche problema al repository,
      diciamo una errata operazione di <code class="command">cvs import</code> o
      <code class="command">cvs tag</code>, invia un messaggio al membro responsabile
      fra i CVS Repository Meisters <code class="email">&lt;<a xmlns="" class="email" href="mailto:cvsadm@FreeBSD.org">cvsadm@FreeBSD.org</a>&gt;</code>, come stabilito nella tabella qui sotto, (o chiama uno
      di loro) ed esponi il problema.  Per questioni molto importanti che
      interessano l'intero albero CVS-non solo un'area
      specifica-puoi contattare i CVS Repository Meisters <code class="email">&lt;<a xmlns="" class="email" href="mailto:cvsadm@FreeBSD.org">cvsadm@FreeBSD.org</a>&gt;</code>.  <span class="emphasis"><em>Non</em></span>
      contattare i CVS Repository Meisters <code class="email">&lt;<a xmlns="" class="email" href="mailto:cvsadm@FreeBSD.org">cvsadm@FreeBSD.org</a>&gt;</code> per copie di repository o altre cose che possono
      gestire i team più specifici.</p><p>Gli unici che hanno il
      permesso di manipolare direttamente i bit del repository sono i
      <span class="quote">«<span class="quote">repomeister</span>»</span>.  Per questo non ci sono shell di login
      disponibili sulle macchine del repository, tranne che per i
      repomeister.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">A seconda dell'area interessata del repository CVS, dovresti
        mandare la tua richiesta a uno dei seguenti indirizzi email:</p><div xmlns="http://www.w3.org/1999/xhtml" class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ncvs@ - a proposito di <code class="filename">/home/ncvs</code>, il repository dei
            src</p></li><li class="listitem"><p>pcvs@ - a proposito di <code class="filename">/home/pcvs</code>, il repository dei
            port</p></li><li class="listitem"><p>dcvs@ - a proposito di <code class="filename">/home/dcvs</code>, il repository dei
            doc</p></li><li class="listitem"><p>projcvs@ - a proposito di <code class="filename">/home/projcvs</code>, il repository dei
            progetti di terze parti</p></li></ul></div></div><p>L'albero CVS è attualmente diviso in quattro repository
      differenti, ovvero <code class="literal">doc</code>, <code class="literal">ports</code>,
      <code class="literal">projects</code> e <code class="literal">src</code>.  Questi vengono
      ricomposti sotto un unico <code class="literal">CVSROOT</code> quando vengono
      distribuiti tramite <span class="application">CVSup</span> per la convenienza
      dei nostri utenti.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Nota che il modulo <code class="literal">www</code> che contiene i sorgenti
        del <a class="link" href="http://www.FreeBSD.org" target="_top">sito web di FreeBSD</a>
        è contenuto all'interno del repository
        <code class="literal">doc</code>.</p></div><p>I repository CVS sono ospitati sulle macchine repository.
      Attualmente, ognuno dei repository elencati qui sopra risiede sulla stessa
      macchina fisica, <code class="systemitem">ncvs.FreeBSD.org</code>, ma
      per permettere la possibilità di averne ognuno su una macchina
      diversa in futuro, ci sono diversi nomi di host che i committer
      dovrebbero utilizzare.  Inoltre, ogni repository risiede in una
      directory differente.  La seguente tabella racchiude la situazione.</p><div class="table"><a id="cvs-repositories-and-hosts"></a><div class="table-title">Tabella 1. Repository CVS, Host e Directory di FreeBSD</div><div class="table-contents"><table summary="Repository CVS, Host e Directory di FreeBSD" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Repository</th><th>Host</th><th>Directory</th></tr></thead><tbody><tr><td>doc</td><td>dcvs.FreeBSD.org</td><td>/home/dcvs</td></tr><tr><td>ports</td><td>pcvs.FreeBSD.org</td><td>/home/pcvs</td></tr><tr><td>projects</td><td>projcvs.FreeBSD.org</td><td>/home/projcvs</td></tr><tr><td>src</td><td>ncvs.FreeBSD.org</td><td>/home/ncvs</td></tr></tbody></table></div></div><br class="table-break" /><p>Le operazioni sul CVS sono fatte da remoto impostando la variabile di
      ambiente <code class="envar">CVSROOT</code> a <code class="systemitem">ncvs.FreeBSD.org</code><code class="literal">:</code><code class="filename">/home/ncvs</code>
      e la variabile <code class="envar">CVS_RSH</code> a <code class="command">ssh</code>, e
      quindi effettuando le appropriate operazioni di check-out/check-in.
      Molti committer definiscono degli alias che si espandono nella corretta
      invocazione di <span class="application">cvs</span> per il repository
      appropriato.  Per esempio, un utente di <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcsh</span>(1)</span></a> può aggiungere
      le seguenti righe al suo <code class="filename">.cshrc</code> per questo
      scopo:</p><pre class="programlisting">alias dcvs env CVS_RSH=ssh cvs -d <em class="replaceable"><code>user</code></em>@dcvs.FreeBSD.org:/home/dcvs
alias pcvs env CVS_RSH=ssh cvs -d <em class="replaceable"><code>user</code></em>@pcvs.FreeBSD.org:/home/pcvs
alias projcvs env CVS_RSH=ssh cvs -d <em class="replaceable"><code>user</code></em>@projcvs.FreeBSD.org:/home/projcvs
alias scvs env CVS_RSH=ssh cvs -d <em class="replaceable"><code>user</code></em>@ncvs.FreeBSD.org:/home/ncvs</pre><p>In questo modo è possibile fare tutte le operazioni di
      CVS localmente ed usare <code class="command">Xcvs
        commit</code> per effettuare il commit sull'albero CVS ufficiale.
      Se desideri aggiungere qualcosa di totalmente nuovo (ad esempio dei
      sorgenti in contrib, ecc.), deve essere usato <code class="command">cvs
        import</code>.  Guarda come riferimento la pagina man di <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a>
      per l'utilizzo.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Per favore <span class="emphasis"><em>non</em></span> usare <code class="command">cvs
          checkout</code> o <code class="command">update</code> con la macchina con il
        repository ufficiale impostata come CVS Root per tenere aggiornato il
        tuo albero dei sorgenti.  CVS da remoto non è ottimizzato per la
        distribuzione via rete e richiede un grande sovraccarico di lavoro e di
        amministrazione sul lato server.  Utilizza il nostro metodo di
        distribuzione avanzato <code class="command">cvsup</code> per ottenere i bit del
        repository, ed esegui solamente l'operazione di
        <code class="command">commit</code> sull'host con il repository.
        Forniamo un'estesa rete di mirror cvsup per questo scopo, così
        come diamo accesso al <code class="systemitem">cvsup-master</code> se hai veramente
        bisogno di essere aggiornato alle ultime modifiche.
        Il <code class="systemitem">cvsup-master</code> ha la potenza necessaria a gestire
        questa cosa, il repository principale no.  Jun Kuriyama è a capo
        del <code class="systemitem">cvsup-master</code>.</p></div><p>Se devi usare le operazioni <code class="command">add</code> e
      <code class="command">delete</code> di CVS come se fosse un'operazione <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mv&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mv</span>(1)</span></a>,
      allora va effettuata una copia nel repository piuttosto che usare
      <code class="command">add</code> e <code class="command">delete</code> di CVS.  In una
      copia nel repository, un <a class="link" href="conventions.html" title="4. Convenzioni e Tradizioni">CVS Meister</a>
      copierà il/i file nei loro nuovi nomi e/o locazioni e ti
      avviserà ad operazione avvenuta.  Lo scopo di una copia del
      repository è di preservare la cronologia dei cambiamenti del file,
      o i log.  Noi del FreeBSD Project diamo molta importanza alla cronologia
      dei cambiamenti che CVS fornisce al progetto.</p><p>Informazioni di riferimento, tutorial, e FAQ su CVS possono
      essere trovate su: <code class="uri"><a class="uri" href="http://www.cvshome.org/docs/" target="_top">http://www.cvshome.org/docs/</a></code>.
      Anche le informazioni contenute nei <a class="link" href="http://cvsbook.red-bean.com/cvsbook.html" target="_top">capitoli di Karl Fogel
        da <span class="quote">«<span class="quote">Open Source Development with CVS</span>»</span></a> sono molto
      utili.</p><p>Dag-Erling C. Smørgrav ha fornito inoltre il seguente <span class="quote">«<span class="quote">mini manuale</span>»</span> su
      CVS.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Effettua il check out di un modulo con il comando
          <code class="command">co</code> o <code class="command">checkout</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs checkout shazam</code></strong></pre><p>Questo estrae una copia del modulo <code class="filename">shazam</code>. Se
          non c'è alcun modulo <code class="filename">shazam</code> nel file dei
          moduli, cercherà allora una directory di primo livello chiamata
          <code class="filename">shazam</code>.</p><div class="table"><a id="idp72329296"></a><div class="table-title">Tabella 2. Opzioni utili con <code class="command">cvs checkout</code></div><div class="table-contents"><table summary="Opzioni utili con cvs checkout" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="option">-P</code></td><td>Non crea le directory vuote</td></tr><tr><td><code class="option">-l</code></td><td>Estrae solo un livello, non le sottodirectory</td></tr><tr><td><code class="option">-r<em class="replaceable"><code>ver</code></em></code></td><td>Estrai la versione, il ramo, o il tag
                  <em class="replaceable"><code>ver</code></em></td></tr><tr><td><code class="option">-D<em class="replaceable"><code>data</code></em></code></td><td>Estrai i sorgenti com'erano in data
                  <em class="replaceable"><code>data</code></em></td></tr></tbody></table></div></div><br class="table-break" /><p>Esempi pratici su FreeBSD:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Estrai il modulo <code class="filename">miscfs</code>, che
              corrisponde a <code class="filename">src/sys/miscfs</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs co miscfs</code></strong></pre><p>Ora hai una directory chiamata <code class="filename">miscfs</code>
              con le sottodirectory <code class="filename">CVS</code>,
              <code class="filename">deadfs</code>, <code class="filename">devfs</code>, e
              così via.  Una di queste (<code class="filename">linprocfs</code>)
              è vuota.</p></li><li class="listitem"><p>Estrai gli stessi file, ma con il percorso completo:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs co src/sys/miscfs</code></strong></pre><p>Ora hai una directory chiamata <code class="filename">src</code>,
              con le sottodirectory <code class="filename">CVS</code> e
              <code class="filename">sys</code>.  La directory
              <code class="filename">src/sys</code> ha le
              sottodirectory <code class="filename">CVS</code> e
              <code class="filename">miscfs</code>, ecc.</p></li><li class="listitem"><p>Estrai gli stessi file, ma elimina le directory vuote:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs co -P miscfs</code></strong></pre><p>Ora hai una directory chiamata <code class="filename">miscfs</code>
              con le sottodirectory <code class="filename">CVS</code>,
              <code class="filename">deadfs</code>, <code class="filename">devfs</code>... ma nota
              che non c'è nessuna sottodirectory
              <code class="filename">linprocfs</code>, perché non contiene alcun
              file.</p></li><li class="listitem"><p>Estrai la directory <code class="filename">miscfs</code>, ma nessuna
              delle sue sottodirectory:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs co -l miscfs</code></strong></pre><p>Ora hai una a directory chiamata <code class="filename">miscfs</code>
              con solo una sottodirectory chiamata
              <code class="filename">CVS</code>.</p></li><li class="listitem"><p>Estrai il modulo <code class="filename">miscfs</code> com'è nel
              ramo 4.X:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs co -rRELENG_4 miscfs</code></strong></pre><p>Puoi modificare i sorgenti ed effettuare il commit su questo
              ramo.</p></li><li class="listitem"><p>Estrai il modulo <code class="filename">miscfs</code> com'era nella
              3.4-RELEASE.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs co -rRELENG_3_4_0_RELEASE miscfs</code></strong></pre><p>Non potrai effettuare il commit delle modifiche, visto che
              <code class="literal">RELENG_3_4_0_RELEASE</code> corrisponde ad un
              preciso istante di tempo, non a un ramo.</p></li><li class="listitem"><p>Estrai il modulo <code class="filename">miscfs</code> com'era il 15
              gennaio 2000.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs co -D'01/15/2000' miscfs</code></strong></pre><p>Non potrai effettuare modifiche.</p></li><li class="listitem"><p>Estrai il modulo <code class="filename">miscfs</code> com'era una
              settimana fa.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs co -D'last week' miscfs</code></strong></pre><p>Non potrai effettuare modifiche.</p></li></ul></div><p>Tieni presente che cvs salva i metadati in sottodirectory chiamate
          <code class="filename">CVS</code>.</p><p>Gli argomenti di <code class="option">-D</code> e <code class="option">-r</code>
          sono fissi, che vuol dire che cvs se li ricorderà in seguito,
          ad esempio quando farai un <code class="command">cvs update</code>.</p></li><li class="listitem"><p>Controlla lo stato dei file estratti con il comando
          <code class="command">status</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs status shazam</code></strong></pre><p>Questo visualizza lo stato del file <code class="filename">shazam</code> o
          di ogni file nella directory <code class="filename">shazam</code>.  Per ogni
          file, lo stato è uno fra:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>Up-to-date</td><td>Il file à aggiornato e non è stato
                  modificato.</td></tr><tr><td>Needs Patch</td><td>Il file non è stato modificato, ma c'è una
                  nuova versione nel repository.</td></tr><tr><td>Locally Modified</td><td>Il file è aggiornato, ma è stato
                  modificato.</td></tr><tr><td>Needs Merge</td><td>Il file è stato modificato, e c'è una nuova
                  versione nel repository.</td></tr><tr><td>File had conflicts on merge</td><td>Ci sono stati conflitti l'ultima volta che il file
                  è stato aggiornato, e non sono ancora stati
                  risolti.</td></tr></tbody></table></div><p>Vedrai anche la versione e la data locale, il numero dell'ultima
          versione appropriata (<span class="quote">«<span class="quote">ultima appropriata</span>»</span> perché
          se hai una data, un tag o un ramo fissati, può non essere
          l'ultima versione), e i tag, le date o le opzioni applicate.</p></li><li class="listitem"><p>Dopo avere estratto qualcosa, puoi aggiornarlo con il comando
          <code class="command">update</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs update shazam</code></strong></pre><p>Questo aggiorna il file <code class="filename">shazam</code> o il contenuto
          della directory <code class="filename">shazam</code> all'ultima versione sul
          ramo che hai estratto.  Se hai estratto un <span class="quote">«<span class="quote">preciso instante di
            tempo</span>»</span>, non fa nulla a meno che i tag non siano stati
          spostati nel repository o qualche altra strana cosa sia in
          corso.</p><p>Opzioni utili, in aggiunta a quelle elencate sopra, con
          <code class="command">checkout</code>:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="option">-d</code></td><td>Estrae ogni directory aggiuntiva mancante.</td></tr><tr><td><code class="option">-A</code></td><td>Scarica l'ultima versione del ramo principale.</td></tr><tr><td><code class="option">-j<em class="replaceable"><code>ver</code></em></code></td><td>Altre magie (guarda sotto).</td></tr></tbody></table></div><p>Se hai estratto un modulo con <code class="option">-r</code> o
          <code class="option">-D</code>, l'esecuzione di <code class="command">cvs update</code>
          con un argomento differente di <code class="option">-r</code> o
          <code class="option">-D</code> o con <code class="option">-A</code> selezionerà un
          nuovo ramo, una nuova versione o una nuova data.
          L'opzione <code class="option">-A</code> elimina tutti i tag, le date o le
          versioni fissate mentre <code class="option">-r</code> e <code class="option">-D</code> ne
          impostano di nuove.</p><p>Teoricamente, specificando <code class="literal">HEAD</code> come argomento
          di <code class="option">-r</code> avrai lo stesso risultato di
          <code class="option">-A</code>, ma è solo in teoria.</p><p>L'opzione <code class="option">-d</code> è utile se:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>qualcuno ha aggiunto delle sottodirectory al modulo che hai
              estratto dopo averlo estratto.</p></li><li class="listitem"><p>hai estratto con <code class="option">-l</code>, e dopo cambi idea e
              vuoi estrarre anche le sottodirectory.</p></li><li class="listitem"><p>hai cancellato delle sottodirectory e vuoi estrarle
              nuovamente.</p></li></ul></div><p><span class="emphasis"><em>Osserva l'output di <code class="command">cvs update</code> con
          cura</em></span>. La lettera all'inizio di ogni file indica cosa
          è stato fatto su di esso:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="literal">U</code></td><td>Il file è stato aggiornato senza problemi.</td></tr><tr><td><code class="literal">P</code></td><td>Il file è stato aggiornato senza problemi (vedrai
                  questo solo quando lavorerai su un repository remoto).</td></tr><tr><td><code class="literal">M</code></td><td>Il file è stato modificato, ed è stato
                  fuso senza conflitti.</td></tr><tr><td><code class="literal">C</code></td><td>Il file è stato modificato, ed è stato
                  fuso con dei conflitti.</td></tr></tbody></table></div><p>La fusione è ciò che avviene quando estrai una copia
          di qualche codice sorgente, lo modifichi, quindi qualcun altro
          effettua il commit di un'altra modifica, e tu esegui <code class="command">cvs
          update</code>. CVS nota che tu hai fatto dei cambiamenti locali, e
          cerca di fondere le tue modifiche con quelle fatte tra la versione che
          hai originariamente estratto e quella che stai aggiornando.  Se i
          cambiamenti sono a due parti separate del file, solitamente non ci
          saranno problemi (sebbene il risultato possa non essere
          sintatticamente o semanticamente corretto).</p><p>CVS stamperà una <code class="literal">M</code> davanti ad ogni file
          modificato localmente anche se non c'è una nuova versione nel
          repository, quindi <code class="command">cvs update</code> è adatto
          per avere un resoconto di quello che hai cambiato in locale.</p><p>Se appare una <code class="literal">C</code>, allora le tue modifiche sono
          in conflitto con i cambiamenti presenti nel repository (le modifiche
          sono sulle stesse righe, o righe vicine, o hai cambiato così
          tanto il file locale che <code class="command">cvs</code> non è in grado
          di applicare le modifiche al repository).  Dovrai allora andare a
          modificare il file a mano e risolvere i conflitti; questi saranno
          evidenziati da righe di simboli <code class="literal">&lt;</code>,
          <code class="literal">=</code> e <code class="literal">&gt;</code>.  Per ogni conflitto,
          ci sarà una linea di demarcazione formata da sette
          <code class="literal">&lt;</code> e il nome del file, seguita da una porzione di
          quello che il tuo file locale conteneva, seguita da una riga di
          separazione con sette <code class="literal">=</code>, seguita dalla porzione
          corrispondente presente nella versione del repository, seguita da una
          riga di separazione con sette <code class="literal">&gt;</code> e il numero di
          versione che stai aggiornando.</p><p>L'opzione <code class="option">-j</code> è un po' voodoo.  Aggiorna
          il file locale alla versione specificata come se avessi usato
          <code class="option">-r</code>, ma non cambia il numero di versione o il ramo
          registrato del file locale.  Non è realmente utile tranne
          quando usata due volte, nel qual caso fonderà le modifiche
          tra le due versioni specificate nella copia su cui stai
          lavorando.</p><p>Per esempio, supponiamo che ti abbia effettuato il commit di una
          modifica a <code class="filename">shazam/shazam.c</code> in FreeBSD-CURRENT e che
          più tardi tu voglia effettuare l'MFC.  Le modifiche che vuoi
          fondere sono nella versione 1.15:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Estrai la versione FreeBSD-STABLE del modulo
              <code class="filename">shazam</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs co -rRELENG_5 shazam</code></strong></pre></li><li class="listitem"><p>Applica le modifiche tra la ver 1.14 e la 1.15:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs update -j1.14 -j1.15 shazam/shazam.c</code></strong></pre></li></ul></div><p>Quasi certamente avrai un conflitto a causa delle righe
          <code class="literal">$Id$</code> (o nel caso di FreeBSD, <code class="literal">$FreeBSD$</code>),
          quindi dovrai modificare a mano il file per risolvere il conflitto
          (rimuovi le righe di separazione e la seconda linea
          <code class="literal">$Id$</code>, lasciando la linea <code class="literal">$Id$</code>
          originale intatta).</p></li><li class="listitem"><p>Guarda le differenze tra la versione locale e quella sul
          repository con il comando <code class="command">diff</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs diff shazam</code></strong></pre><p>mostra ogni modifica che hai fatto al file o al modulo
          <code class="filename">shazam</code>.</p><div class="table"><a id="idp72657616"></a><div class="table-title">Tabella 3. Opzioni utili con <code class="command">cvs diff</code></div><div class="table-contents"><table summary="Opzioni utili con cvs diff" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="option">-u</code></td><td>Utilizza il formato diff unificato.</td></tr><tr><td><code class="option">-c</code></td><td>Utilizza il formato diff contestuale.</td></tr><tr><td><code class="option">-N</code></td><td>Visualizza i file mancanti o aggiunti.</td></tr></tbody></table></div></div><br class="table-break" /><p>Vorrai sempre utilizzare <code class="option">-u</code>, visto che le diff
          unificate sono molto più semplici da leggere rispetto a quasi
          tutti gli altri formati (in alcune circostanze, le diff contestuali
          generate con l'opzione <code class="option">-c</code> possono essere meglio, ma
          sono molto più voluminose).  Una diff unificata consiste di una
          serie di parti.  Ogni parte inizia con una riga con due caratteri
          <code class="literal">@</code> e specifica dove si trovano le differenze nel
          file e su quante linee si estendono.  Questa è seguita da un
          certo numero di righe; alcune (precedute da uno spazio) fanno parte
          del contesto; altre (precedute da un <code class="literal">-</code>) sono quelle
          eliminate e altre ancora (precedute da un <code class="literal">+</code>) sono
          quelle aggiunte.</p><p>Puoi anche effettuare una diff con una versione differente
          rispetto a quella che hai estratto specificando la versione con
          <code class="option">-r</code> o <code class="option">-D</code> come per il
          <code class="command">checkout</code> o l'<code class="command">update</code>,
          o anche visualizzare le differenze tra due versioni arbitrarie
          (indipendentemente da quella che hai localmente) specificando
          <span class="emphasis"><em>due</em></span> versioni con <code class="option">-r</code> o
          <code class="option">-D</code>.</p></li><li class="listitem"><p>Guarda le righe di log con il comando
          <code class="command">log</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs log shazam</code></strong></pre><p>Se <code class="filename">shazam</code> è un file, questo
          stamperà un'<span class="emphasis"><em>intestazione</em></span> con le
          informazioni sul file, come la locazione nel repository dove il file
          è salvato, a quale versione è l'<code class="literal">HEAD</code>
          per questo file, in quali rami si trova il file, e qualsiasi tag
          valido per questo file.  Quindi, per ogni versione del file, viene
          stampato un messaggio di log.  Questo include la data e l'ora del
          commit, chi ha fatto il commit, quante righe sono state aggiunte e/o
          tolte, e alla fine il messaggio di log che il committer ha scritto
          quando ha inviato la modifica.</p><p>Se <code class="filename">shazam</code> è una directory, allora le
          informazioni di log descritte sopra vengono stampate a turno per ogni
          file presente nella directory.  A meno che tu abbia dato l'opzione
          <code class="option">-l</code> a <code class="command">log</code>, vengono stampati anche
          i log per tutte le sottodirectory di <code class="filename">shazam</code>, in
          maniera ricorsiva.</p><p>Usa il comando <code class="command">log</code> per vedere la storia di uno
          o più file, come è salvata nel repository CVS.  Puoi
          anche usarlo per vedere il messaggio di log di una versione specifica,
          se aggiungi <code class="option">-r<em class="replaceable"><code>ver</code></em></code> al
          comando <code class="command">log</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs log -r1.2 shazam</code></strong></pre><p>Questo stamperà solamente il messaggio di log per la
          versione <code class="literal">1.2</code> del file <code class="filename">shazam</code>
          se è un file, oppure i messaggi di log per le versioni 1.2 di
          ogni file sotto <code class="filename">shazam</code> se è una
          directory.</p></li><li class="listitem"><p>Guarda chi ha fatto cosa con il comando
          <code class="command">annotate</code>.  Questo comando visualizza ogni riga del
          file o dei file specificati, insieme all'utente che ha modificato
          più recentemente quella riga.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs annotate shazam</code></strong></pre></li><li class="listitem"><p>Aggiungi nuovi file con il comando <code class="command">add</code>.</p><p>Crea il file, usa <code class="command">cvs add</code> su di esso, quindi
          <code class="command">cvs commit</code>.</p><p>In modo analogo, puoi aggiungere nuove directory creandole e poi
          utilizzando <code class="command">cvs add</code> su di esse.  Nota che non
          c'è bisogno di usare il commit sulle directory.</p></li><li class="listitem"><p>Rimuovi i file obsoleti con il comando
          <code class="command">remove</code>.</p><p>Rimuovi il file, quindi usa <code class="command">cvs rm</code> su di esso,
          ed infine <code class="command">cvs commit</code>.</p></li><li class="listitem"><p>Effettua il commit con il comando <code class="command">commit</code> o
          <code class="command">checkin</code>.</p><div class="table"><a id="idp72763472"></a><div class="table-title">Tabella 4. Opzioni utili con <code class="command">cvs commit</code></div><div class="table-contents"><table summary="Opzioni utili con cvs commit" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="option">-f</code></td><td>Forza il commit di un file non modificato.</td></tr><tr><td><code class="option">-m<em class="replaceable"><code>msg</code></em></code></td><td>Specifica un messaggio di commit sulla riga di comando
                  anziché invocare un editor.</td></tr></tbody></table></div></div><br class="table-break" /><p>Usa l'opzione <code class="option">-f</code> se ti accorgi che hai lasciato
          fuori informazioni importanti dal messaggio di commit.</p><p>Buoni messaggi di commit sono importanti.  Dicono agli altri
          perché hai fatto le modifiche che hai fatto, non solo qui ed
          ora, ma per mesi o anni quando qualcuno si chiederà
          perché dei pezzi di codice all'apparenza illogici o
          inefficienti sono entrati nel file sorgente.  È inoltre un
          aiuto inestimabile per decidere su quali modifiche va effettuato
          l'MFC e su quali no.</p><p>I messaggi di commit devono essere chiari, concisi, e fornire
          un ragionevole sommario per dare un'indicazione di cosa è stato
          cambiato e perché.</p><p>I messaggi di commit devono fornire abbastanza informazioni
          affinché una terza parte possa decidere se la modifica è
          rilevante per lei e se debba leggere la modifica stessa.</p><p>Evita di effettuare il commit di più modifiche scollegate
          in una volta sola.  Questo rende difficile la fusione, e inoltre rende
          più complicato determinare quale modifica è colpevole
          se salta fuori un bug.</p><p>Evita di effettuare il commit di correzioni di stile o di
          spaziatura insieme a correzioni di funzionalità.  Questo rende
          difficile la fusione, e inoltre rende più complicato capire
          quali modifiche alle funzionalità sono state fatte.  Nel caso
          di file di documentazione, può rendere il lavoro dei gruppi
          di traduzione più complicato, visto che diventa difficile per
          loro determinare esattamente quali modifiche al contenuto vanno
          tradotte.</p><p>Evita di effettuare il commit di cambiamenti a più file
          con un unico messaggio generico o vago.  Invece, effettua il commit
          di un file alla volta (o di piccoli gruppi di file correlati) con un
          messaggio di commit appropriato.</p><p>Prima di effettuare il commit, devi
          <span class="emphasis"><em>sempre</em></span>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>verificare su che ramo stai effettuando il commit, tramite
              <code class="command">cvs status</code>.</p></li><li class="listitem"><p>revisionare i tuoi cambiamenti, con
              <code class="command">cvs diff</code></p></li></ul></div><p>Inoltre, devi SEMPRE specificare esplicitamente sulla riga di
          comando su quali file deve essere effettuato il commit, in modo da non
          toccare incidentalmente altri file non voluti - <code class="command">cvs
            commit</code> senza argomenti effettuerà il commit di ogni
          modifica nella directory corrente ed ogni sottodirectory.</p></li></ol></div><p>Suggerimenti e trucchi aggiuntivi:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Puoi inserire le opzioni più comunemente usate nel tuo
          <code class="filename">~/.cvsrc</code>, come in questo caso:</p><pre class="programlisting">cvs -z3
diff -Nu
update -Pd
checkout -P</pre><p>Questo esempio dice:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>usa sempre il livello di compressione 3 quando si parla con un
              server remoto.  Questo è un salvavita quando si lavora su
              una connessione lenta.</p></li><li class="listitem"><p>usa sempre le opzioni <code class="option">-N</code> (visualizza i file
              aggiunti o rimossi) e <code class="option">-u</code> (formato diff unificato)
              con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>.</p></li><li class="listitem"><p>usa sempre le opzioni <code class="option">-P</code> (elimina le
              directory vuote) e <code class="option">-d</code> (estrai le nuove directory)
              quando si effettua l'update.</p></li><li class="listitem"><p>usa sempre l'opzione <code class="option">-P</code> (elimina le
              directory vuote) quando si estrae.</p></li></ul></div></li><li class="listitem"><p>Usa lo script <code class="command">cdiff</code> di Eivind Eklund per
          visualizzare le diff unificate.  È un wrapper per <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=less&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">less</span>(1)</span></a>
          che aggiunge i codici colore ANSI per far risaltare le intestazioni
          delle sezioni, le righe rimosse e quelle aggiunte; il contesto rimane
          invariato.  Inoltre espande i tab correttamente (i tab spesso appaiono
          errati nelle diff a causa del carattere aggiuntivo all'inizio di ogni
          riga).</p><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/textproc/cdiff/pkg-descr">textproc/cdiff</a></p><p>Semplicemente usalo al posto di <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=more&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">more</span>(1)</span></a> o
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=less&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">less</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs diff -Nu shazam | cdiff</code></strong></pre><p>Alternativamente alcuni editor come <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vim&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vim</span>(1)</span></a>
          (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/vim5/pkg-descr">editors/vim5</a>) hanno il supporto
          al colore e quando vengono usati con l'evidenziazione della sintassi
          attiva evidenzieranno molti tipi di file, incluse le diff, le patch,
          e i log CVS/RCS.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "syn on" &gt;&gt; ~/.vimrc </code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cvs diff -Nu shazam | vim -</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cvs log shazam | vim -</code></strong> </pre></li><li class="listitem"><p>CVS è vecchio, arcano, complesso e buggato, e a volte
          esibisce comportamenti non deterministici che qualcuno sostiene siano
          la prova che CVS non sia niente di più di una manifestazione
          Newtoniana di una entità ultradimensionale sensibile.
          Non è umanamente possibile conoscere ogni dettaglio di CVS,
          quindi non essere dispiaciuto di chiedere aiuto all'Intelligenza
          Artificiale (CVS Repository Meisters <code class="email">&lt;<a xmlns="" class="email" href="mailto:cvsadm@FreeBSD.org">cvsadm@FreeBSD.org</a>&gt;</code>).</p></li><li class="listitem"><p>Non lasciare il comando <code class="command">cvs commit</code> nella
          modalità di inserimento del messaggio di commit per troppo
          tempo (più di 2-3 minuti).  Questo blocca la directory in
          cui stai lavorando ed impedirà ad altri sviluppatori di
          effettuare commit nella stessa directory.  Se devi digitare un
          messaggio di commit lungo, scrivilo prima di eseguire
          <code class="command">cvs commit</code> e inseriscilo successivamente oppure
          salvalo in un file prima di effettuare il commit ed usa l'opzione
          <code class="option">-F</code> di CVS per leggere il messaggio di commit da
          quel file, cioè:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>vi logmsg</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cvs ci -F logmsg shazam</code></strong></pre><p>Questo è il metodo più veloce per passare un
          messaggio di commit a CVS ma devi stare attento quando modifichi
          il file <code class="filename">logmsg</code> prima del commit, perché
          CVS non ti darà la possibilità di modificare il
          messaggio quando effettuerai realmente il commit.</p></li></ol></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="committer.types.html">Indietro</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="conventions.html">Avanti</a></td></tr><tr><td width="40%" align="left" valign="top">2. Tipi di Bit di Commit </td><td width="20%" align="center"><a accesskey="h" href="index.html">Partenza</a></td><td width="40%" align="right" valign="top"> 4. Convenzioni e Tradizioni</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Questo, ed altri documenti, possono essere scaricati da
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Per domande su FreeBSD, leggi la
    <a href="http://www.FreeBSD.org/docs.html">documentazione</a> prima di contattare
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Per domande su questa documentazione, invia una e-mail a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>