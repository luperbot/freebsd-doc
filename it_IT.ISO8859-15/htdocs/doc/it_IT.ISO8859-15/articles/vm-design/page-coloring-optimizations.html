<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>7. Colorazione delle Pagine</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elementi di progettazione del sistema di VM di FreeBSD" /><link rel="up" href="index.html" title="Elementi di progettazione del sistema di VM di FreeBSD" /><link rel="prev" href="page-table-optimizations.html" title="6. Ottimizzazioni della Tabella delle Pagine" /><link rel="next" href="conclusion.html" title="8. Conclusione" /><link rel="copyright" href="trademarks.html" title="Nota Legale" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7. Colorazione delle Pagine</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="page-table-optimizations.html">Indietro</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="conclusion.html">Avanti</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="page-coloring-optimizations"></a>7. Colorazione delle Pagine</h2></div></div></div><p>Concluderemo con le ottimizzazioni di colorazione delle pagine.
      La colorazione delle pagine è un'ottimizzazione prestazionale
      progettata per assicurare che gli accessi a pagine contigue nella memoria
      virtuale facciano il miglior uso della cache del processore.  Nei
      tempi antichi (cioè più di 10 anni fa) le cache dei
      processori tendevano a mapparela memoria virtuale invece della memoria
      fisica.  Questo conduceva ad un numero enorme di problemi inclusa la
      necessità di ripulire la cache ad ogni cambio di contesto, in
      alcuni casi, e problemi con l'aliasing dei dati nella cache.
      Le cache dei processori moderni mappano la memoria fisica proprio per
      risolvere questi problemi.
      Questo significa che due pagine vicine nello spazio di indirizzamento
      dei processi possono non corrispondere a due pagine vicine nella cache.
      In effetti, se non si è attenti pagine affiancate nella memoria
      virtuale possono finire con l'occupare la stessa pagina nella cache del
      processore-portando all'eliminazione prematura di dati
      immagazzinabili in cache e riducendo le prestazioni della cache.
      Ciò è vero anche con cache set-associative <a href="#ftn.idp72203600" class="footnote" id="idp72203600"><sup class="footnote">[5]</sup></a> a molte vie (anche se l'effetto viene in qualche maniera
      mitigato).</p><p>Il codice di allocazione della memoria di FreeBSD implementa
      le ottimizizzazioni di colorazione delle pagine, ciò significa che
      il codice di allocazione della memoria cercherà di trovare delle
      pagine libere che siano vicine dal punto di vista della cache.
      Ad esempio, se la pagina 16 della memoria fisica è assegnata
      alla pagina 0 della memoria virtuale di un processo e la cache può
      contenere 4 pagine, il codice di colorazione delle pagine non
      assegnerà la pagina 20 di memoria fisica alla pagina 1 di
      quella virtuale.
      Invece, gli assegnerà la pagina 21 della memoria fisica.
      Il codice di colorazione delle pagine cerca di evitare l'assegnazione
      della pagina 20 perché questa verrebbe mappata sopra lo stesso
      blocco di memoria cache della pagina 16 e ciò causerrebbe un uso
      non ottimale della cache.
      Questo codice aggiunge una complessità significativa
      al sottosistema di allocazione memoria della VM, come si può ben
      immaginare, ma il gioco vale ben più della candela.  La colorazione
      delle pagine rende la memoria virtuale deterministica quanto la memoria
      fisica per quel che riguarda le prestazioni della cache.</p><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp72203600" class="footnote"><p><a href="#idp72203600" class="para"><sup class="para">[5] </sup></a>set-associative sta per associative all'interno di un insieme, in
          quanto c'è un insieme di blocchi della cache nei quale puo
          essere mappato un elemento della memoria fisica.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="page-table-optimizations.html">Indietro</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="conclusion.html">Avanti</a></td></tr><tr><td width="40%" align="left" valign="top">6. Ottimizzazioni della Tabella delle Pagine  </td><td width="20%" align="center"><a accesskey="h" href="index.html">Partenza</a></td><td width="40%" align="right" valign="top"> 8. Conclusione</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Questo, ed altri documenti, possono essere scaricati da
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Per domande su FreeBSD, leggi la
    <a href="http://www.FreeBSD.org/docs.html">documentazione</a> prima di contattare
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Per domande su questa documentazione, invia una e-mail a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>