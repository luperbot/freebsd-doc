<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>26.4. Sostituzione del proprio Mail Transfer Agent</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuale di FreeBSD" /><link rel="up" href="mail.html" title="Capitolo 26. Posta Elettronica" /><link rel="prev" href="sendmail.html" title="26.3. Configurazione di sendmail" /><link rel="next" href="mail-trouble.html" title="26.5. Risoluzione dei Problemi" /><link rel="copyright" href="legalnotice.html" title="Nota Legale" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">26.4. Sostituzione del proprio Mail Transfer Agent</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="sendmail.html">Indietro</a> </td><th width="60%" align="center">Capitolo 26. Posta Elettronica</th><td width="20%" align="right"> <a accesskey="n" href="mail-trouble.html">Avanti</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-changingmta"></a>26.4. Sostituzione del proprio Mail Transfer Agent</h2></div><div><span class="authorgroup">Scritto da <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Andrew</span> <span class="surname">Boothman</span></span>. </span></div><div><span class="authorgroup">Informazioni prese da e-mail scritte da <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Gregory</span> <span class="surname">Neil Shapiro</span></span>. </span></div></div></div><a id="idp86888144" class="indexterm"></a><p>Come già menzionato, l'MTA (Mail Transfer Agent, agente di
      trasferimento della posta elettronica) installato di default su FreeBSD
      è <span class="application">sendmail</span>.  Di conseguenza
      <span class="application">sendmail</span> è responsabile della tua posta
      in partenza e di quella in arrivo.</p><p>Comunque, per vari motivi, alcuni amministratori necessitano di
      cambiare l'MTA dei loro sistemi.  Questi motivi spaziano dal voler
      semplicemente provare un altro MTA all'aver bisogno di una caratteristica
      o di un pacchetto specifico ritrovabile in un altro MTA.  Fortunatamente,
      per qualsiasi motivo, FreeBSD semplifica il processo di
      sostituzione.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86890832"></a>26.4.1. Installazione di un nuovo MTA</h3></div></div></div><p>Hai un'ampia scelta di MTA utilizzabili.  Un buon punto di partenza
        è la <a class="link" href="ports.html" title="Capitolo 4. Installazione delle Applicazioni: Port e Package">FreeBSD Ports Collection</a> dove
        puoi trovarne molti.  Naturalmente sei libero di usare qualunque
        MTA proveniente da qualche sito, a condizione che tu riesca ad eseguirlo
        sotto FreeBSD.</p><p>Inizia installando il tuo nuovo MTA.  Una volta installato devi
        valutare se realmente soddisfa le tue necessità, inoltre devi
        avere la possibilità di configurare il tuo nuovo programma prima
        che subentri a <span class="application">sendmail</span>.  Valutato questo,
        devi essere sicuro che durante l'installazione del nuovo programma non
        ci siano stati tentativi di sovrascrivere binari di sistema come
        <code class="filename">/usr/bin/sendmail</code>.  Altrimenti, il tuo nuovo
        programma di posta è stato essenzialmente messo in
        attività prima che tu l'abbia configurato.</p><p>Per cortesia fai riferimento alla documentazione dell'MTA che hai
        scelto per informazioni su come configurarlo.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-disable-sendmail"></a>26.4.2. Disabilitazione di <span class="application">sendmail</span></h3></div></div></div><p>La procedura usata per avviare <span class="application">sendmail</span>
        cambia significativamente tra la 4.5-RELEASE e la 4.6-RELEASE.
        Di conseguenza, la procedura usata per disabilitarlo è
        leggermente differente a seconda della versione di FreeBSD
        utilizzata.</p><div xmlns="" class="warning"><h3 class="admontitle">Avvertimento: </h3><p xmlns="http://www.w3.org/1999/xhtml">Se disabiliti il servizio di consegna della posta di
            <span class="application">sendmail</span> in questo modo, è
            importante che questo venga rimpiazzato con un altro sistema
            di consegna della posta.  Se non lo farai,
            le funzioni di sistema come <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a> saranno incapaci di
            inviare i loro risultati tramite e-mail come normalmente prevedono
            di fare.  Molte parti del tuo sistema potrebbero presupporre di
            avere un sistema funzionante compatibile con
            <span class="application">sendmail</span>.  Se le applicazioni continuano
            a usare i binari di <span class="application">sendmail</span> per tentare
            di spedire e-mail dopo che tu l'hai disabilitato, la posta potrebbe
            finire in una coda inattiva di <span class="application">sendmail</span>,
            senza che venga mai consegnata.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86899152"></a>26.4.2.1. FreeBSD 4.5-STABLE prima del 4/4/2002 e precedenti (inclusa
          4.5-RELEASE e precedenti)</h4></div></div></div><p>Metti:</p><pre class="programlisting">sendmail_enable="NO"</pre><p>in <code class="filename">/etc/rc.conf</code>.  In questo modo si
          disabiliterà il servizio di ricezione della posta
          di <span class="application">sendmail</span>, ma se
          <code class="filename">/etc/mail/mailer.conf</code> (vedi sotto) non viene
          modificato, <span class="application">sendmail</span> verrà ancora
          usato per spedire e-mail.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86902736"></a>26.4.2.2. FreeBSD 4.5-STABLE dopo il 4/4/2002 (inclusa 4.6-RELEASE e
          successive)</h4></div></div></div><p>Per disabilitare completamente <span class="application">sendmail</span>,
          incluso il servizio della posta in uscita, devi mettere</p><pre class="programlisting">sendmail_enable="NONE"</pre><p>in <code class="filename">/etc/rc.conf.</code></p><p>Se vuoi solamente disabilitare il servizio di ricezione della
          posta di <span class="application">sendmail</span>, devi mettere</p><pre class="programlisting">sendmail_enable="NO"</pre><p>in <code class="filename">/etc/rc.conf</code>.  Comunque, se
          la ricezione della posta è disabilitata, la consegna locale
          funzionerà ancora.  Maggiori informazioni sulle
          opzioni di avvio di <span class="application">sendmail</span> sono
          disponibili nella pagina man di <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.sendmail</span>(8)</span></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86908368"></a>26.4.2.3. FreeBSD 5.0-STABLE e Successive</h4></div></div></div><p>Per disabilitare completamente
         <span class="application">sendmail</span>, servizi di posta in
         ingresso e in uscita inclusi, devi usare</p><pre class="programlisting">sendmail_enable="NO"
sendmail_submit_enable="NO"
sendmail_outbound_enable="NO"
sendmail_msp_queue_enable="NO"</pre><p>in <code class="filename">/etc/rc.conf.</code></p><p>Se vuoi solamente disabilitare il servizio di ricezione della
          posta di <span class="application">sendmail</span>, devi mettere</p><pre class="programlisting">sendmail_enable="NO"</pre><p>in <code class="filename">/etc/rc.conf</code>.  Molte informazioni sulle
          opzioni di avvio di <span class="application">sendmail</span> sono
          disponibili nella pagina man di <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.sendmail</span>(8)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86918352"></a>26.4.3. Esecuzione del nuovo MTA all'avvio</h3></div></div></div><p>Hai due possibili metodi per eseguire il tuo nuovo MTA all'avvio,
        a seconda della versione di FreeBSD utilizzata.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86919504"></a>26.4.3.1. FreeBSD 4.5-STABLE prima del 11/4/2002 (inclusa 4.5-RELEASE e
          precedenti)</h4></div></div></div><p>Posiziona uno script in
          <code class="filename">/usr/local/etc/rc.d/</code> con estensione
          <code class="filename">.sh</code> ed eseguibile da <code class="systemitem">root</code>.
          Lo script deve accettare i parametri <code class="literal">start</code> e
          <code class="literal">stop</code>.  Nella fase di avvio di FreeBSD gli script
          di sistema eseguiranno il comando</p><pre class="programlisting">/usr/local/etc/rc.d/supermailer.sh start</pre><p>che puoi anche usare per avviare manualmente il
          server.  Nella fase di chiusura di FreeBSD, gli script di sistema
          useranno l'opzione <code class="literal">stop</code>, eseguendo il
          comando</p><pre class="programlisting">/usr/local/etc/rc.d/supermailer.sh stop</pre><p>che puoi anche usare per arrestare manualmente il
          server mentre il sistema è in funzione.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86932944"></a>26.4.3.2. FreeBSD 4.5-STABLE dopo il 11/4/2002 (inclusa 4.6-RELEASE e
          successive)</h4></div></div></div><p>Con le versioni recenti di FreeBSD, puoi usare il metodo
          precedente oppure puoi mettere</p><pre class="programlisting">mta_start_script="nomefile"</pre><p>in <code class="filename">/etc/rc.conf</code>, dove
          <em class="replaceable"><code>nomefile</code></em> è il nome dello script
          che vuoi eseguire all'avvio per avviare il tuo MTA.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86935760"></a>26.4.4. Sostituzione di <span class="application">sendmail</span> come programma
        di posta di default del sistema</h3></div></div></div><p><span class="application">sendmail</span> è così
        onnipresente come programma standard su sistemi <span class="trademark">UNIX</span>® che alcuni
        programmi lo suppongono già installato e configurato.  Per questa
        ragione, molti degli altri MTA forniscono la loro compatibile
        implementazione dell'interfaccia a riga di comando di
        <span class="application">sendmail</span>; questo agevola il loro utilizzo
        come sostituti <span class="quote">«<span class="quote">drop-in</span>»</span> di
        <span class="application">sendmail</span>.</p><p>Quindi, se usi un altro programma di posta, dovrai assicurarti
        che i programmi che tentano di eseguire i binari standard di
        <span class="application">sendmail</span> come
        <code class="filename">/usr/bin/sendmail</code> in realtà eseguano
        il programma di posta da te scelto.  Fortunatamente, FreeBSD fornisce
        un meccanismo chiamato <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mailwrapper&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mailwrapper</span>(8)</span></a> che fa questo lavoro per
        te.</p><p>Quando <span class="application">sendmail</span> è operativo,
        dovresti vedere in <code class="filename">/etc/mail/mailer.conf</code> qualcosa
        di simile a questo:</p><pre class="programlisting">sendmail    /usr/libexec/sendmail/sendmail
send-mail   /usr/libexec/sendmail/sendmail
mailq       /usr/libexec/sendmail/sendmail
newaliases  /usr/libexec/sendmail/sendmail
hoststat    /usr/libexec/sendmail/sendmail
purgestat   /usr/libexec/sendmail/sendmail</pre><p>Questo significa che quando uno di questi comandi
        (come <code class="filename">sendmail</code> stesso) viene eseguito, in
        realtà il sistema invoca una copia di mailwrapper di nome
        <code class="filename">sendmail</code>, la quale esamina
        <code class="filename">mailer.conf</code> ed esegue
        <code class="filename">/usr/libexec/sendmail/sendmail</code>.  Questo meccanismo
        facilita la sostituzione dei binari che sono realmente eseguiti quando
        vengono invocate queste funzioni di default di
        <code class="filename">sendmail</code>.</p><p>Quindi se vuoi che
        <code class="filename">/usr/local/supermailer/bin/sendmail-compat</code> sia
        eseguito al posto di <span class="application">sendmail</span>, devi
        modificare <code class="filename">/etc/mail/mailer.conf</code> in questo
        modo:</p><pre class="programlisting">sendmail    /usr/local/supermailer/bin/sendmail-compat
send-mail   /usr/local/supermailer/bin/sendmail-compat
mailq       /usr/local/supermailer/bin/mailq-compat
newaliases  /usr/local/supermailer/bin/newaliases-compat
hoststat    /usr/local/supermailer/bin/hoststat-compat
purgestat   /usr/local/supermailer/bin/purgestat-compat</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86963536"></a>26.4.5. Conclusione</h3></div></div></div><p>Una volta che hai configurato ogni cosa a tuo piacimento, devi
        terminare i processi di <span class="application">sendmail</span> di cui non
        hai più bisogno e avviare i processi appartenenti al tuo nuovo
        programma, oppure puoi semplicemente riavviare il sistema.  Riavviando
        il sistema avrai la possibilità di verificare se il sistema sia
        stato configurato correttamente per eseguire il tuo nuovo MTA in modo
        automatico all'avvio.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sendmail.html">Indietro</a> </td><td width="20%" align="center"><a accesskey="u" href="mail.html">Risali</a></td><td width="40%" align="right"> <a accesskey="n" href="mail-trouble.html">Avanti</a></td></tr><tr><td width="40%" align="left" valign="top">26.3. Configurazione di <span class="application">sendmail</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Partenza</a></td><td width="40%" align="right" valign="top"> 26.5. Risoluzione dei Problemi</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Questo, ed altri documenti, possono essere scaricati da
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Per domande su FreeBSD, leggi la
    <a href="http://www.FreeBSD.org/docs.html">documentazione</a> prima di contattare
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Per domande su questa documentazione, invia una e-mail a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>