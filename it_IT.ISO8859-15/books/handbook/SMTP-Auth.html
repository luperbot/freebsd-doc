<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>26.10. Autenticazione SMTP</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuale di FreeBSD" /><link rel="up" href="mail.html" title="Capitolo 26. Posta Elettronica" /><link rel="prev" href="SMTP-dialup.html" title="26.9. Uso della Posta con una Connessione Dialup" /><link rel="next" href="mail-agents.html" title="26.11. Mail User Agent" /><link rel="copyright" href="legalnotice.html" title="Nota Legale" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">26.10. Autenticazione SMTP</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="SMTP-dialup.html">Indietro</a> </td><th width="60%" align="center">Capitolo 26. Posta Elettronica</th><td width="20%" align="right"> <a accesskey="n" href="mail-agents.html">Avanti</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="SMTP-Auth"></a>26.10. Autenticazione SMTP</h2></div><div><span class="authorgroup">Scritto da <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">James</span> <span class="surname">Gorham</span></span>. </span></div></div></div><p>Avere un'Autenticazione <acronym class="acronym">SMTP</acronym> operativa sul tuo
      server di posta porta numerosi benefici.  L'Autenticazione
      <acronym class="acronym">SMTP</acronym> aggiunge un ulteriore strato di sicurezza a
      <span class="application">sendmail</span>, e ha il vantaggio di dare agli
      utenti mobili che cambiano host la possibilità di usare lo stesso
      server di posta senza avere la necessità di riconfigurare ogni
      volta i settaggi dei loro programmi client di posta.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Installa dai port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl2/pkg-descr">security/cyrus-sasl2</a>.  Puoi trovare questo
          port in <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl2/pkg-descr">security/cyrus-sasl2</a>.
          Il port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl2/pkg-descr">security/cyrus-sasl2</a>
          ha diverse opzioni di compilazione.  Per il metodo di
          autenticazione SMTP che useremo, assicurati che l'opzione
          <code class="option">LOGIN</code> non sia disabilitata.</p></li><li class="step"><p>Dopo aver installato <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl2/pkg-descr">security/cyrus-sasl2</a>, edita
          <code class="filename">/usr/local/lib/sasl2/Sendmail.conf</code>
          (o crealo se non esiste) e aggiungi la seguente riga:</p><pre class="programlisting">pwcheck_method: saslauthd</pre></li><li class="step"><p>Quindi, installa <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl2-saslauthd/pkg-descr">security/cyrus-sasl2-saslauthd</a>,
          edita <code class="filename">/etc/rc.conf</code> aggiungendo la
          riga seguente:</p><pre class="programlisting">saslauthd_enable="YES"</pre><p>ed infine avvia il demone saslauthd:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/saslauthd start</code></strong></pre><p>Questo demone serve come mediatore con
          <span class="application">sendmail</span> per autenticare gli utenti tramite
          il proprio database <code class="filename">passwd</code> di FreeBSD.  Questo
          procedimento evita di creare un nuovo set di nomi utenti e password
          per ogni utente che necessita di usare l'autenticazione
          <acronym class="acronym">SMTP</acronym>, mantenendo la password di login uguale alla
          password di posta.</p></li><li class="step"><p>Ora aggiungi le seguenti righe in
          <code class="filename">/etc/make.conf</code>:</p><pre class="programlisting">SENDMAIL_CFLAGS=-I/usr/local/include/sasl -DSASL
SENDMAIL_LDFLAGS=-L/usr/local/lib
SENDMAIL_LDADD=-lsasl2</pre><p>Queste righe daranno, in fase di compilazione di
          <span class="application">sendmail</span>, le giuste opzioni di
          configurazione per linkare a <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/cyrus-sasl2/pkg-descr">cyrus-sasl2</a>.  Assicurati che <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/cyrus-sasl2/pkg-descr">cyrus-sasl2</a> sia installato prima di
          ricompilare <span class="application">sendmail</span>.</p></li><li class="step"><p>Ricompila <span class="application">sendmail</span> eseguendo i
          seguenti comandi:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/lib/libsmutil</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir &amp;&amp; make obj &amp;&amp; make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/lib/libsm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir &amp;&amp; make obj &amp;&amp; make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.sbin/sendmail</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir &amp;&amp; make obj &amp;&amp; make &amp;&amp; make install</code></strong></pre><p>Se <code class="filename">/usr/src</code> non ha subito enormi cambiamenti
          e se le librerie condivise di cui si ha bisogno sono disponibili, la
          compilazione di <span class="application">sendmail</span> non dovrebbe
          avere problemi.</p></li><li class="step"><p>Dopo aver compilato e reinstallato
          <span class="application">sendmail</span>, edita il tuo file
          <code class="filename">/etc/mail/freebsd.mc</code> (o qualunque altro file che
          usi come file <code class="filename">.mc</code>.  Molti amministratori
          preferiscono usare, per unicità, l'output di <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hostname&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">hostname</span>(1)</span></a>
          come nome del file <code class="filename">.mc</code>).  Aggiungi le seguenti
          righe:</p><pre class="programlisting">dnl set SASL options
TRUST_AUTH_MECH(`GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN')dnl
define(`confAUTH_MECHANISMS', `GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN')dnl</pre><p>Queste opzioni configurano i vari metodi che
          <span class="application">sendmail</span> ha a disposizione per autenticare
          gli utenti.  Se vuoi usare un metodo diverso da
          <span class="application">pwcheck</span>, guarda la documentazione inclusa
          nel package.</p></li><li class="step"><p>Per finire, esegui <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> in <code class="filename">/etc/mail</code>.
          Questo eseguirà il tuo nuovo file <code class="filename">.mc</code> e
          creerà un file <code class="filename">.cf</code> di nome
          <code class="filename">freebsd.cf</code> (o con il nome che hai usato per il
          file <code class="filename">.mc</code>).  Quindi esegui il comando
          <code class="command">make install restart</code>, che copierà il file in
          <code class="filename">sendmail.cf</code>, e riavvierà correttamente
          <span class="application">sendmail</span>.  Per maggiori informazioni su
          questa procedura, dovresti prendere come riferimento
          <code class="filename">/etc/mail/Makefile</code>.</p></li></ol></div><p>Se tutto è andato per il verso giusto, dovresti essere in grado
      di inviare un messaggio di prova dopo aver inserito le informazioni di
      login nel programma client di posta.  Per ulteriori indagini, setta il
      <code class="option">LogLevel</code> di <span class="application">sendmail</span> a 13 e
      guarda il file <code class="filename">/var/log/maillog</code> per eventuali
      errori.</p><p>Per ulteriori informazioni, guarda la pagina riguardante <a class="link" href="http://www.sendmail.org/~ca/email/auth.html" target="_top">l'autenticazione
        <acronym class="acronym">SMTP</acronym></a> di
      <span class="application">sendmail</span>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="SMTP-dialup.html">Indietro</a> </td><td width="20%" align="center"><a accesskey="u" href="mail.html">Risali</a></td><td width="40%" align="right"> <a accesskey="n" href="mail-agents.html">Avanti</a></td></tr><tr><td width="40%" align="left" valign="top">26.9. Uso della Posta con una Connessione Dialup </td><td width="20%" align="center"><a accesskey="h" href="index.html">Partenza</a></td><td width="40%" align="right" valign="top"> 26.11. Mail User Agent</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Questo, ed altri documenti, possono essere scaricati da
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Per domande su FreeBSD, leggi la
    <a href="http://www.FreeBSD.org/docs.html">documentazione</a> prima di contattare
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Per domande su questa documentazione, invia una e-mail a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>