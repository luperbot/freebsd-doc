<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>3.8. I Demoni, i Segnali, e come Uccidere i Processi</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuale di FreeBSD" /><link rel="up" href="basics.html" title="Capitolo 3. Basi di Unix" /><link rel="prev" href="basics-processes.html" title="3.7. I Processi" /><link rel="next" href="shells.html" title="3.9. Le Shell" /><link rel="copyright" href="legalnotice.html" title="Nota Legale" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.8. I Demoni, i Segnali, e come Uccidere i Processi</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="basics-processes.html">Indietro</a> </td><th width="60%" align="center">Capitolo 3. Basi di Unix</th><td width="20%" align="right"> <a accesskey="n" href="shells.html">Avanti</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-daemons"></a>3.8. I Demoni, i Segnali, e come Uccidere i Processi</h2></div></div></div><p>Quando esegui un editor risulta semplice averne il controllo, dirgli
      di caricare file, e così via.  Tutto questo può essere fatto
      poichè l'editor fornisce delle agevolazioni in questo senso, e
      anche perchè l'editor è collegato a un
      <em class="firstterm">terminale</em>.  Alcuni programmi non sono stati
      progettati per essere eseguiti con un continuo input dell'utente, e
      perciò questi programmi si disconnettono dal terminale alla prima
      occasione.  Per esempio, un server web trascorre tutto il giorno
      rispondendo a richieste web, e normalmente non necessita di alcun input
      da parte tua.  I programmi che trasportano la posta elettronica da un sito
      a un altro sito sono un altro esempio di questa classe di
      applicazioni.</p><p>Chiamiamo questi programmi <em class="firstterm">demoni</em>.  I demoni
      erano dei personaggi della mitologia greca: nè buoni nè
      cattivi, erano piccoli spiriti custodi che, nel complesso,
      risultavano essere utili per l'umanità, molto similmente i server
      web e quelli di posta elettronica di oggi fanno cose utili.  Ecco il
      motivo per cui la mascotte di BSD è stata per molto tempo, e lo
      è ancora, l'allegro demone con le scarpe da tennis e con il
      forcone.</p><p>Esiste la convenzione di chiamare i programmi che normalmente sono
      eseguiti come demoni con una <span class="quote">«<span class="quote">d</span>»</span> finale.
      <span class="application">BIND</span> sta per Berkeley Internet Name Domain,
      ma il nome effettivo del programma che viene eseguito è
      <code class="command">named</code>; il nome del programma
      <span class="application">Apache</span>, un server web, è
      <code class="command">httpd</code>; il demone dello spool di stampa è
      <code class="command">lpd</code> e così via.  Questa è una
      convenzione, non è una regola ferrea; per esempio, il principale
      demone di posta elettronica per l'applicazione
      <span class="application">Sendmail</span> è chiamato
      <code class="command">sendmail</code>, e non <code class="command">maild</code>, come potresti
      aspettarti.</p><p>A volte puoi aver bisogno di comunicare con un processo demone.
      Un modo per farlo è di mandare a esso (o ad altri processi
      in esecuzione), un <em class="firstterm">segnale</em>.
      Esistono svariati segnali che puoi inviare-alcuni di
      questi hanno un significato specifico, altri sono interpretabili
      dall'applicazione, e la documentazione dell'applicazione ti dirà
      come l'applicazione stessa interpreta i segnali.  Puoi mandare un segnale
      solo ai processi che ti appartengono.  Se mandi un segnale a un processo
      che non ti appartiene con il comando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">kill</span>(2)</span></a>, il
      permesso ti sarà negato.  L'eccezione a questa regola riguarda
      l'utente <code class="systemitem">root</code>, che può mandare segnali a
      processi di chiunque.</p><p>Inoltre in alcune circostanze FreeBSD invia segnali alle
      applicazioni.  Se un'applicazione è stata scritta malamente, e
      tenta di accedere alla memoria che non gli compete, FreeBSD manda al
      processo il segnale di <em class="firstterm">Violazione della
        Segmentazione</em> (<code class="literal">SIGSEGV</code>).  Se
      un'applicazione ha utilizzato la system call <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=alarm&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">alarm</span>(3)</span></a> in modo tale
      da essere avvisata dopo un certo periodo di tempo trascorso allora
      FreeBSD invierà a questa applicazione il segnale di Allarme
      (<code class="literal">SIGALRM</code>), e così via.</p><p>Per fermare un processo possono essere utilizzati due segnali,
      <code class="literal">SIGTERM</code> e <code class="literal">SIGKILL</code>.
      <code class="literal">SIGTERM</code> è il modo cortese di terminare un
      processo; il processo può <span class="emphasis"><em>catturare</em></span> il
      segnale, capire che vuoi abbatterlo, chiudere i file di log che potrebbe
      avere aperto, e in genere terminare qualunque cosa che stava facendo prima
      dell'interruzione.  Nei casi in cui un processo sia coinvolto in qualche
      compito che non può essere interrotto allora questo processo
      può persino ignorare <code class="literal">SIGTERM</code>.</p><p>Il segnale <code class="literal">SIGKILL</code> non può essere ignorato
      da un processo.  Questo è il segnale che dice <span class="quote">«<span class="quote">Non mi
      interessa cosa stai facendo, fermati subito</span>»</span>.  Se mandi il segnale
      <code class="literal">SIGKILL</code> a un processo allora FreeBSD fermerà
      subito il processo<a href="#ftn.idp78052432" class="footnote" id="idp78052432"><sup class="footnote">[4]</sup></a>.
    </p><p>Altri segnali che potresti aver bisogno di usare sono
      <code class="literal">SIGHUP</code>, <code class="literal">SIGUSR1</code>, e
      <code class="literal">SIGUSR2</code>.  Questi sono segnali a scopo generico, e
      differenti applicazioni possono fare cose diverse quando catturano questi
      segnali.</p><p>Supponiamo che hai cambiato il file di configurazione del tuo server
      web-hai bisogno di dire al server web di rileggere la sua
      configurazione.  Potresti fermare e riavviare <code class="command">httpd</code>, ma
      questo porterebbe a un breve periodo di interruzione del tuo server
      web, che potrebbe non essere gradito.  Molti demoni sono stati scritti per
      rispondere al segnale <code class="literal">SIGHUP</code> tramite la rilettura
      dei loro file di configurazione.  In questo modo invece di terminare e
      riavviare <code class="command">httpd</code> potresti inviare il segnale
      <code class="literal">SIGHUP</code>.  Poichè non esiste un modo standard di
      trattare questi segnali, differenti demoni potrebbero avere un
      comportamento diverso, quindi assicurati di leggere la documentazione per
      il demone in questione.</p><p>I segnali sono inviati utilizzando il comando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a>, come
      mostra questo esempio.</p><div class="procedure"><a id="idp78058576"></a><div class="procedure-title">Procedura 3.1. Inviare un Segnale a un Processo</div><p>Questo esempio mostra come inviare un segnale a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>.  Il
        file di configurazione di <code class="command">inetd</code> è
        <code class="filename">/etc/inetd.conf</code>, e <code class="command">inetd</code> rilegge
        questo file di configurazione quando riceve il segnale
        <code class="literal">SIGHUP</code>.</p><ol class="procedure" type="1"><li class="step"><p>Cerca il process ID del processo a cui vuoi mandare il segnale.
          Puoi utilizzare <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> e <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=grep&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">grep</span>(1)</span></a> per farlo.  Il comando
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=grep&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">grep</span>(1)</span></a> viene utilizzato per perlustrare attraverso l'output,
          cercando la stringa da te specificata.  Questo comando viene eseguito
          in modalità utente, e <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> viene eseguito in
          modalità <code class="systemitem">root</code>, quindi le opzioni da dare
          a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> sono <code class="option">ax</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ps -ax | grep inetd</code></strong>
  198  ??  IWs    0:00.00 inetd -wW</pre><p>Come puoi vedere il PID di <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> è 198.  In alcuni
          casi potrebbe apparire nel risultato anche il comando
          <code class="literal">grep inetd</code>.  Questo dipende dal modo utilizzato
          da <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> nell'elencare la lista dei processi in
          esecuzione.</p></li><li class="step"><p>Usa il comando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> per inviare il segnale.  Poichè
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> viene eseguito in modalità
          <code class="systemitem">root</code> prima devi usare il comando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> per
          diventare <code class="systemitem">root</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su</code></strong>
<code class="prompt">Password:</code>
<code class="prompt">#</code> <strong class="userinput"><code>/bin/kill -s HUP 198</code></strong></pre><p>Come avviene per la maggior parte dei comandi <span class="trademark">UNIX</span>®, il comando
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> non stampa il risultato dell'operazione se questa ha
          avuto successo.  Se mandi un segnale a un processo del quale non sei
          il proprietario allora vedrai il messaggio <span class="errorname">kill:
            <em class="replaceable"><code>PID</code></em>: Operation not permitted</span>.
          Se sbagli il PID invierai il segnale al processo sbagliato, il che
          potrebbe essere dannoso, o, se hai fortuna, manderai il segnale
          a un PID che in quel momento non è in uso, e in questo caso
          vedrai il messaggio <span class="errorname">kill: <em class="replaceable"><code>PID</code></em>:
            No such process</span>.</p><div xmlns="" class="note"><h3 class="admontitle">Perchè Usare <code xmlns="http://www.w3.org/1999/xhtml" class="command">/bin/kill</code>?: </h3><p xmlns="http://www.w3.org/1999/xhtml">Molte shell forniscono il comando <code class="command">kill</code> come
            comando built-in; ossia, la shell invia il segnale in modo
            diretto, senza dover eseguire <code class="filename">/bin/kill</code>.  Tutto
            ciò può essere molto utile, ma le diverse shell hanno
            una sintassi diversa per specificare il nome del segnale da inviare.
            Invece di cercare di imparare tutte queste sintassi, può
            essere più semplice usare direttamente il comando
            <code class="command">/bin/kill ...</code>.</p></div></li></ol></div><p>L'invio di altri segnali è analogo, basta sostituire
      all'occorrenza <code class="literal">TERM</code> o <code class="literal">KILL</code> nella
      linea di comando.</p><div xmlns="" class="important"><h3 class="admontitle">Importante: </h3><p xmlns="http://www.w3.org/1999/xhtml">Terminare processi in modo random su un sistema può essere
        una cattiva idea.  In particolare, il processo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>, con process
        ID 1, è un caso molto speciale.  Eseguire <code class="command">/bin/kill -s
          KILL 1</code> è un modo veloce per arrestare il tuo sistema.
        Controlla <span class="emphasis"><em>sempre</em></span> due volte gli argomenti quando
        esegui <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> <span class="emphasis"><em>prima</em></span> di premere
        <span class="keycap"><strong>Invio</strong></span>.</p></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp78052432" class="footnote"><p><a href="#idp78052432" class="para"><sup class="para">[4] </sup></a>Non è del tutto vero-ci sono alcune cose che non
          possono essere interrotte.  Per esempio, se il processo sta tentando
          di leggere un file situato su un altro computer in rete, e questo
          computer non è disponibile per qualche ragione (è stato
          spento, o la rete ha qualche problema), allora il processo è
          detto <span class="quote">«<span class="quote">non interrompibile</span>»</span>.  Il processo finirà
          in time out, generalmente dopo due minuti.  Non appena avviene il
          time out il processo potrà essere terminato.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="basics-processes.html">Indietro</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">Risali</a></td><td width="40%" align="right"> <a accesskey="n" href="shells.html">Avanti</a></td></tr><tr><td width="40%" align="left" valign="top">3.7. I Processi </td><td width="20%" align="center"><a accesskey="h" href="index.html">Partenza</a></td><td width="40%" align="right" valign="top"> 3.9. Le Shell</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Questo, ed altri documenti, possono essere scaricati da
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Per domande su FreeBSD, leggi la
    <a href="http://www.FreeBSD.org/docs.html">documentazione</a> prima di contattare
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Per domande su questa documentazione, invia una e-mail a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>