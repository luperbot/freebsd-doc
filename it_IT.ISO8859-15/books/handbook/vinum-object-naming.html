<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>20.7. Nomenclatura degli Oggetti</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuale di FreeBSD" /><link rel="up" href="vinum-vinum.html" title="Capitolo 20. Il Gestore di Volumi Vinum" /><link rel="prev" href="vinum-examples.html" title="20.6. Alcuni Esempi" /><link rel="next" href="vinum-config.html" title="20.8. Configurare Vinum" /><link rel="copyright" href="legalnotice.html" title="Nota Legale" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">20.7. Nomenclatura degli Oggetti</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="vinum-examples.html">Indietro</a> </td><th width="60%" align="center">Capitolo 20. Il Gestore di Volumi Vinum</th><td width="20%" align="right"> <a accesskey="n" href="vinum-config.html">Avanti</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-object-naming"></a>20.7. Nomenclatura degli Oggetti</h2></div></div></div><p>Come descritto sopra, Vinum assegna nomi di default a plex e
      sottodischi, benché questi possano essere cambiati.  Cambiare il
      nome di default non è raccomandato: l'esperienza con il VERITAS
      volume manager, che permette la nomenclatura arbitraria degli oggetti, ha
      mostrato che questa flessibilità non porta vantaggi significativi e
      può causare confusione.</p><p>I nomi possono contenere ogni carattere non blank (i caratteri di
      spazio, tabulazione, cambio riga) ma è consigliato limitarsi a
      lettere, cifre e il carattere di underscore.  I nomi di volumi,
      plex e sottodischi possono essere
      lunghi fino a 64 caratteri, i nomi di drive invece hanno un massimo di 32
      caratteri.</p><a id="idp85206608" class="indexterm"></a><p>I nomi assegnati agli oggetti Vinum sono nella gerarchia
      <code class="filename">/dev/vinum</code>.
      La configurazione di Vinum mostrata sopra creerebbe i seguenti
      dispositivi:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>I dispositivi di controllo
          <code class="filename">/dev/vinum/control</code> e
          <code class="filename">/dev/vinum/controld</code>, utilizzati
          rispettivamente da <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a> e dal demone Vinum.</p></li><li class="listitem"><p>Voci di dispositivi a blocchi e a caratteri per ogni volume.
          Questi sono i principali dispositivi utilizzati da Vinum.  I
          dispositivi a blocchi hanno il nome dei relativi volumi, quelli a
          caratteri, seguendo la tradizione BSD, hanno una lettera
          <span class="emphasis"><em>r</em></span> all'inizio del nome.  Quindi la configurazione
          vista sopra genererebbe i dispositivi a blocchi
          <code class="filename">/dev/vinum/myvol</code>,
          <code class="filename">/dev/vinum/mirror</code>,
          <code class="filename">/dev/vinum/striped</code>,
          <code class="filename">/dev/vinum/raid5</code> e
          <code class="filename">/dev/vinum/raid10</code>, e i dispositivi a
          caratteri <code class="filename">/dev/vinum/rmyvol</code>,
          <code class="filename">/dev/vinum/rmirror</code>,
          <code class="filename">/dev/vinum/rstriped</code>,
          <code class="filename">/dev/vinum/rraid5</code> e
          <code class="filename">/dev/vinum/rraid10</code>.
          In questo c'è un ovvio problema: è possibile avere due
          volumi chiamati <span class="emphasis"><em>r</em></span> e <span class="emphasis"><em>rr</em></span> che
          avrebbero un conflitto nel creare il nodo
          <code class="filename">/dev/vinum/rr</code>: sarebbe il dispositivo a
          caratteri per il volume <span class="emphasis"><em>r</em></span> o il dispositivo a
          blocchi per il volume <span class="emphasis"><em>rr</em></span>?  Attualmente Vinum non
          si interessa di questo conflitto: il volume definito per primo prende
          il nome.</p></li><li class="listitem"><p>Una directory <code class="filename">/dev/vinum/drive</code> con voci
        per ogni disco.  Queste voci sono in effetti dei collegamenti simbolici
        ai rispettivi nodi di disco.</p></li><li class="listitem"><p>Una directory <code class="filename">/dev/vinum/volume</code> con voci per
          ogni volume.  Contiene sottodirectory per ogni plex, che a loro volta
          contengono sottodirectory per ogni sottodisco.</p></li><li class="listitem"><p>Le directory <code class="filename">/dev/vinum/plex</code>,
          <code class="filename">/dev/vinum/sd</code> e
          <code class="filename">/dev/vinum/rsd</code> contengono i dispositivi a
          blocchi per ogni plex, dispositivo a blocchi e dispositivo a caratteri
          per ogni sottodisco rispettivamente.</p></li></ul></div><p>Ad esempio, considera il seguente file di configurazione:</p><pre class="programlisting">    drive drive1 device /dev/sd1h
    drive drive2 device /dev/sd2h
    drive drive3 device /dev/sd3h
    drive drive4 device /dev/sd4h
    volume s64 setupstate
      plex org striped 64k
        sd length 100m drive drive1
        sd length 100m drive drive2
        sd length 100m drive drive3
        sd length 100m drive drive4</pre><p>Dopo aver elaborato questo file, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a> crea la seguente
      struttura in <code class="filename">/dev/vinum</code>:</p><pre class="programlisting">    brwx------  1 root  wheel   25, 0x40000001 Apr 13 16:46 Control
    brwx------  1 root  wheel   25, 0x40000002 Apr 13 16:46 control
    brwx------  1 root  wheel   25, 0x40000000 Apr 13 16:46 controld
    drwxr-xr-x  2 root  wheel       512 Apr 13 16:46 drive
    drwxr-xr-x  2 root  wheel       512 Apr 13 16:46 plex
    crwxr-xr--  1 root  wheel   91,   2 Apr 13 16:46 rs64
    drwxr-xr-x  2 root  wheel       512 Apr 13 16:46 rsd
    drwxr-xr-x  2 root  wheel       512 Apr 13 16:46 rvol
    brwxr-xr--  1 root  wheel   25,   2 Apr 13 16:46 s64
    drwxr-xr-x  2 root  wheel       512 Apr 13 16:46 sd
    drwxr-xr-x  3 root  wheel       512 Apr 13 16:46 vol

        /dev/vinum/drive:
    total 0
    lrwxr-xr-x  1 root  wheel  9 Apr 13 16:46 drive1 -&gt; /dev/sd1h
    lrwxr-xr-x  1 root  wheel  9 Apr 13 16:46 drive2 -&gt; /dev/sd2h
    lrwxr-xr-x  1 root  wheel  9 Apr 13 16:46 drive3 -&gt; /dev/sd3h
    lrwxr-xr-x  1 root  wheel  9 Apr 13 16:46 drive4 -&gt; /dev/sd4h

    /dev/vinum/plex:
    total 0
    brwxr-xr--  1 root  wheel   25, 0x10000002 Apr 13 16:46 s64.p0

    /dev/vinum/rsd:
    total 0
    crwxr-xr--  1 root  wheel   91, 0x20000002 Apr 13 16:46 s64.p0.s0
    crwxr-xr--  1 root  wheel   91, 0x20100002 Apr 13 16:46 s64.p0.s1
    crwxr-xr--  1 root  wheel   91, 0x20200002 Apr 13 16:46 s64.p0.s2
    crwxr-xr--  1 root  wheel   91, 0x20300002 Apr 13 16:46 s64.p0.s3

    /dev/vinum/rvol:
    total 0
    crwxr-xr--  1 root  wheel   91,   2 Apr 13 16:46 s64

    /dev/vinum/sd:
    total 0
    brwxr-xr--  1 root  wheel   25, 0x20000002 Apr 13 16:46 s64.p0.s0
    brwxr-xr--  1 root  wheel   25, 0x20100002 Apr 13 16:46 s64.p0.s1
    brwxr-xr--  1 root  wheel   25, 0x20200002 Apr 13 16:46 s64.p0.s2
    brwxr-xr--  1 root  wheel   25, 0x20300002 Apr 13 16:46 s64.p0.s3

    /dev/vinum/vol:
    total 1
    brwxr-xr--  1 root  wheel   25,   2 Apr 13 16:46 s64
    drwxr-xr-x  3 root  wheel       512 Apr 13 16:46 s64.plex

    /dev/vinum/vol/s64.plex:
    total 1
    brwxr-xr--  1 root  wheel   25, 0x10000002 Apr 13 16:46 s64.p0
    drwxr-xr-x  2 root  wheel       512 Apr 13 16:46 s64.p0.sd

    /dev/vinum/vol/s64.plex/s64.p0.sd:
    total 0
    brwxr-xr--  1 root  wheel   25, 0x20000002 Apr 13 16:46 s64.p0.s0
    brwxr-xr--  1 root  wheel   25, 0x20100002 Apr 13 16:46 s64.p0.s1
    brwxr-xr--  1 root  wheel   25, 0x20200002 Apr 13 16:46 s64.p0.s2
    brwxr-xr--  1 root  wheel   25, 0x20300002 Apr 13 16:46 s64.p0.s3</pre><p>Benché sia raccomandato non allocare nomi specifici a plex e
      sottodischi, i drive di Vinum devono avere un nome.  Questo permette di
      spostare un disco in una differente locazione e continuare a riconoscerlo
      automaticamente.  I nomi di drive possono essere lunghi fino a 32
      caratteri.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85270480"></a>20.7.1. Creare i File System</h3></div></div></div><p>I volumi appaiono al sistema identici ai dischi, con un'eccezione.
        Differentemente dai dischi <span class="trademark">UNIX</span>®, Vinum non partiziona i volumi,
        che quindi non contengono una tabella delle partizioni.  Questo ha reso
        necessario modificare alcuni programmi di utilità del disco, tra
        cui <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>, che precedentemente cercava di interpretare l'ultima
        lettera di un volume Vinum come un identificatore di partizione.
        Ad esempio un disco potrebbe avere un nome come
        <code class="filename">/dev/ad0a</code> o <code class="filename">/dev/da2h</code>.
        Questi nomi rappresentano la prima partizione
        (<code class="filename">a</code>) del primo (0) disco IDE
        (<code class="filename">ad</code>) e l'ottava partizione
        (<code class="filename">h</code>) del terzo (2) disco SCSI
        (<code class="filename">da</code>), rispettivamente.  Al contrario un volume
        Vinum potrebbe essere chiamato
        <code class="filename">/dev/vinum/concat</code>, un nome che non ha alcuna
        relazione con nomi di partizione.</p><p>Normalmente <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> interpreta il nome del disco e si lamenta
        se non riesce a comprenderlo.  Per esempio:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/vinum/concat</code></strong>
newfs: /dev/vinum/concat: can't figure out file system partition</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Queste informazioni sono valide solo per versioni di FreeBSD
        precedenti alla 5.0:</p></div><p>Per poter creare un file system su questo volume usa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>
        con l'opzione <code class="option">-v</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs -v /dev/vinum/concat</code></strong></pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="vinum-examples.html">Indietro</a> </td><td width="20%" align="center"><a accesskey="u" href="vinum-vinum.html">Risali</a></td><td width="40%" align="right"> <a accesskey="n" href="vinum-config.html">Avanti</a></td></tr><tr><td width="40%" align="left" valign="top">20.6. Alcuni Esempi </td><td width="20%" align="center"><a accesskey="h" href="index.html">Partenza</a></td><td width="40%" align="right" valign="top"> 20.8. Configurare Vinum</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Questo, ed altri documenti, possono essere scaricati da
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Per domande su FreeBSD, leggi la
    <a href="http://www.FreeBSD.org/docs.html">documentazione</a> prima di contattare
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Per domande su questa documentazione, invia una e-mail a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>