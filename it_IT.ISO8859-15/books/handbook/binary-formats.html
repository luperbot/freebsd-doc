<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>3.12. Formati dei Binari</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuale di FreeBSD" /><link rel="up" href="basics.html" title="Capitolo 3. Basi di Unix" /><link rel="prev" href="basics-devices.html" title="3.11. Dispositivi e Nodi di Dispositivo" /><link rel="next" href="basics-more-information.html" title="3.13. Per Maggiori Informazioni" /><link rel="copyright" href="legalnotice.html" title="Nota Legale" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.12. Formati dei Binari</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="basics-devices.html">Indietro</a> </td><th width="60%" align="center">Capitolo 3. Basi di Unix</th><td width="20%" align="right"> <a accesskey="n" href="basics-more-information.html">Avanti</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="binary-formats"></a>3.12. Formati dei Binari</h2></div></div></div><p>Per comprendere il motivo per cui FreeBSD usa il formato <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a>,
      devi prima conoscere un pò i tre attuali formati eseguibili
      <span class="quote">«<span class="quote">dominanti</span>»</span> per <span class="trademark">UNIX</span>®:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a></p><p>Il più vecchio e <span class="quote">«<span class="quote">classico</span>»</span> formato oggetto
          di <span class="trademark">UNIX</span>®.  Usa un'intestazione corta e compatta con un numero magico
          all'inizio che è spesso usato per caratterizzare il formato
          (vedere <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a> per maggiori dettagli).  Contiene tre segmenti
          caricabili: .text, .data, e .bss più una tabella di simboli e
          una di stringhe.</p></li><li class="listitem"><p><acronym class="acronym">COFF</acronym></p><p>Il formato oggetto di SVR3.  Poichè l'intestazione include
          una porzione di tabella, puoi avere molto di più delle sole
          sezioni .text, .data, e .bss.</p></li><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a></p><p>Il successore di <acronym class="acronym">COFF</acronym>, caratterizzato da
          sezioni multiple e da possibili valori a 32-bit o 64-bit.  Uno dei
          maggiori svantaggi: <acronym class="acronym">ELF</acronym> fu progettato con
          l'assunzione che ci doveva essere solo un ABI per ogni tipo di
          architettura dei sistemi.  Tale assunzione è in realtà
          piuttosto sbagliata, e non è vera nemmeno nel mondo commerciale
          di SYSV (che ha almeno tre ABI: SVR4, Solaris, SCO).</p><p>FreeBSD tenta di aggirare questo problema fornendo un
          utility per <span class="emphasis"><em>marchiare</em></span> un eseguibile
          <acronym class="acronym">ELF</acronym> con informazioni sull'ABI per il quale è
          stato costruito.  Guarda la pagina man <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a> per maggiori
          informazioni.</p></li></ul></div><p>FreeBSD proviene dalla scuola <span class="quote">«<span class="quote">classica</span>»</span> e ha usato il
      formato <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a>, una tecnologia sperimentata ed utilizzata
      attraverso molte generazioni delle release BSD, fino agli inizi del ramo
      3.X.  Sebbene fino ad allora era possibile costruire ed eseguire su
      un sistema FreeBSD binari (e kernel) del formato <acronym class="acronym">ELF</acronym>,
      inizialmente FreeBSD si oppose al <span class="quote">«<span class="quote">salto</span>»</span> di cambiamento al
      formato <acronym class="acronym">ELF</acronym> come formato di default.  Per quale motivo?
      Dunque, quando la scuola Linux fece il suo doloroso passaggio a
      <acronym class="acronym">ELF</acronym>, questo non era sufficiente per abbandonare
      il formato eseguibile <code class="filename">a.out</code> a causa del loro
      rigido meccanismo a salto-di-tabella basato sulla libreria condivisa, il
      quale rendeva la costruzione di librerie condivise un compito molto
      difficile tanto per i venditori che per gli sviluppatori.  Tuttavia,
      quando gli strumenti di <acronym class="acronym">ELF</acronym> furono in grado di offrire
      una soluzione al problema della libreria condivisa e quando furono visti
      come <span class="quote">«<span class="quote">la strada imminente</span>»</span>, il costo della migrazione
      fu accettato poichè necessario e avvenne così la
      transizione.  Il meccanismo di libreria condivisa di FreeBSD è
      basato sullo stile più restrittivo del meccanismo di libreria
      condivisa degli <span class="trademark">SunOS</span>&#8482; di Sun, e come tale, è molto facile da
      utilizzare.</p><p>Quindi, perchè ci sono così tanti formati
      differenti?</p><p>In passato l'hardware era semplice.  Questo hardware semplice
      sosteneva un sistema semplice e piccolo.  Il formato
      <code class="filename">a.out</code> era del tutto adatto per rappresentare i binari
      su questo semplice sistema (un PDP-11).  Nonostante le persone fecero il
      port di <span class="trademark">UNIX</span>® da questo semplice sistema, esse mantennero il formato
      <code class="filename">a.out</code> poichè era sufficiente per un primo port
      di <span class="trademark">UNIX</span>® verso architetture come Motorola 68k, VAXen, ecc.</p><p>All'epoca alcuni ingegneri hardware di spicco stabilirono che se tale
      formato poteva forzare il software a fare alcuni trucchi sporchi, allora
      esso sarebbe stato in grado di abbattere alcune barriere di progettazione
      e permettere al core della CPU di andare più veloce.  Benchè
      il formato <code class="filename">a.out</code> fu progettato per lavorare
      con questo nuovo tipo di hardware (conosciuto ai giorni d'oggi come
      <acronym class="acronym">RISC</acronym>), esso fu appena sufficiente per questo
      hardware, quindi furono sviluppati altri formati per ottenere delle
      prestazioni da questo hardware migliori di quelle che il limitato e
      semplice formato <code class="filename">a.out</code> era in grado di offrire.
      Furono inventati formati come il <acronym class="acronym">COFF</acronym>,
      l'<acronym class="acronym">ECOFF</acronym>, e alcuni altri e furono esaminate le loro
      limitazioni prima che fu prodotto l'<acronym class="acronym">ELF</acronym>.</p><p>Per di più, le dimensioni dei programmi stavano diventando
      enormi e i dischi (e la memoria fisica) erano ancora relativamente
      piccoli, e quindi il concetto di libreria condivisa prese piede.
      Inoltre il sistema di VM (Memoria Virtuale) divenne più
      sofisticato.  Benchè ognuno di questi miglioramenti fu fatto
      utilizzando il formato <code class="filename">a.out</code>, la sua utilità
      si distese sempre più con ogni nuova caratteristica.  In aggiunta,
      la gente voleva caricare alcune cose in modo dinamico al tempo di
      esecuzione, o anche scartare parte dei loro programmi dopo l'esecuzione
      del codice iniziale al fine di salvare memoria e spazio di swap.
      I linguaggi divennero più sofisticati e le persone desideravano che
      il codice venisse chiamato dopo il main in modo automatico.  Furono
      apportati molte migliorie al formato <code class="filename">a.out</code> per
      permettere tutte queste cose, e sostanzialmente tutto funzionò per
      un dato periodo.  Col passare del tempo, il formato
      <code class="filename">a.out</code> non fu più in grado di gestire
      tutti questi problemi senza apportare dei miglioramenti al codice con
      un conseguente aumento della complessità.  Benchè il formato
      <acronym class="acronym">ELF</acronym> risolveva molti di questi problemi, era doloroso
      migrare da un sistema che tutto sommato funzionava.  Quindi il formato
      <acronym class="acronym">ELF</acronym> attese fino a quando fu meno doloroso
      rimanere con il formato <code class="filename">a.out</code> piuttosto che migrare
      al formato <acronym class="acronym">ELF</acronym>.</p><p>Tuttavia, il tempo passò, e gli strumenti di costruzione che
      FreeBSD derivò dai loro strumenti di costruzione (in particolare
      l'assemblatore ed il loader) evolsero in due tronconi paralleli.
      L'albero di FreeBSD aggiunse le librerie condivise e sistemò alcuni
      bug.  Il popolo di GNU che in origine aveva scritto questi programmi
      li riscrisse e aggiunse un semplice supporto per la costruzione di
      compilatori cross, la possibilità di produrre formati diversi a
      piacimento, e così via.  Da quando molte persone vollero costruire
      compilatori cross per FreeBSD, questi furono delusi poichè i vecchi
      sorgenti che FreeBSD aveva per <span class="application">as</span> e
      <span class="application">ld</span> non erano pronti per questo lavoro.
      La nuova serie di strumenti di GNU (<span class="application">binutils</span>)
      supportavano la compilazione cross, <acronym class="acronym">ELF</acronym>, le librerie
      condivise, le estensioni C++, ecc.  Inoltre molti venditori stanno
      rilasciando binari <acronym class="acronym">ELF</acronym>, ed è una buona cosa
      per FreeBSD eseguirli.</p><p>Il formato <acronym class="acronym">ELF</acronym> è più espressivo di
      quello <code class="filename">a.out</code> e permette una maggiore
      estensibilità nel sistema base.  Gli strumenti di
      <acronym class="acronym">ELF</acronym> sono meglio mantenuti, e offrono un supporto alla
      compilazione cross, che sta a cuore a molte persone.
      <acronym class="acronym">ELF</acronym> può essere un pò meno veloce di
      <code class="filename">a.out</code>, ma tentare di misurarne le prestazioni non
      è molto semplice.  Ci sono anche numerosi dettagli che sono diversi
      tra i due formati nel modo in cui essi mappano le pagine, gestiscono il
      codice iniziale, ecc.  Questi dettagli non sono molto importanti, ma tra i
      due esistono delle differenze.  Nel tempo il supporto per il formato
      <code class="filename">a.out</code> verrà rimosso dal kernel
      <code class="filename">GENERIC</code>, e alla fine sarà rimosso
      completamente dal kernel non appena non ci sarà più la
      necessità di eseguire programmi con il formato
      <code class="filename">a.out</code>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="basics-devices.html">Indietro</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">Risali</a></td><td width="40%" align="right"> <a accesskey="n" href="basics-more-information.html">Avanti</a></td></tr><tr><td width="40%" align="left" valign="top">3.11. Dispositivi e Nodi di Dispositivo </td><td width="20%" align="center"><a accesskey="h" href="index.html">Partenza</a></td><td width="40%" align="right" valign="top"> 3.13. Per Maggiori Informazioni</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Questo, ed altri documenti, possono essere scaricati da
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Per domande su FreeBSD, leggi la
    <a href="http://www.FreeBSD.org/docs.html">documentazione</a> prima di contattare
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Per domande su questa documentazione, invia una e-mail a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>