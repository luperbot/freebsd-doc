<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>10.2. Installazione</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuale di FreeBSD" /><link rel="up" href="linuxemu.html" title="Capitolo 10. Compatibilità con i Binari di Linux" /><link rel="prev" href="linuxemu.html" title="Capitolo 10. Compatibilità con i Binari di Linux" /><link rel="next" href="linuxemu-mathematica.html" title="10.3. Installazione di Mathematica®" /><link rel="copyright" href="legalnotice.html" title="Nota Legale" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">10.2. Installazione</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="linuxemu.html">Indietro</a> </td><th width="60%" align="center">Capitolo 10. Compatibilità con i Binari di Linux</th><td width="20%" align="right"> <a accesskey="n" href="linuxemu-mathematica.html">Avanti</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-lbc-install"></a>10.2. Installazione</h2></div></div></div><a id="idp80970832" class="indexterm"></a><p>La compatibilità con i binari Linux non è normalmente
      attivata.  Il modo più facile per abilitare questa
      funzionalità è caricare l'oggetto KLD  (<span class="quote">«<span class="quote">Kernel
      LoaDable object</span>»</span>) <code class="literal">linux</code>.  Puoi caricare questo
      modulo digitando il comando seguente come
      <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload linux</code></strong></pre><p>Se vuoi che la compatiblità sia sempre attivata, dovresti
      aggiungere questa linea a <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">linux_enable="YES"</pre><p>Il comando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldstat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldstat</span>(8)</span></a> può essere usato per verificare
      se KLD sia stato caricato:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kldstat</code></strong>
Id Refs Address    Size     Name
 1    2 0xc0100000 16bdb8   kernel
 7    1 0xc24db000 d000     linux.ko</pre><a id="idp80977360" class="indexterm"></a><p>Se per qualche ragione non vuoi o non puoi caricare KLD, puoi
      collegare staticamente la compatibilità Linux nel kernel
      aggiungendo <code class="literal">options COMPAT_LINUX</code> al file di
      configurazione del kernel.  Fatto questo puoi installare il nuovo kernel
      come descritto in <a class="xref" href="kernelconfig.html" title="Capitolo 8. Configurazione del Kernel di FreeBSD">Capitolo 8, <em>Configurazione del Kernel di FreeBSD</em></a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80979792"></a>10.2.1. Installazione delle Librerie Runtime di Linux</h3></div></div></div><a id="idp80980432" class="indexterm"></a><p>Questo può essere fatto in due modi, o usando il port
        <a class="link" href="linuxemu-lbc-install.html#linuxemu-libs-port" title="10.2.1.1. Installazione Usando il Port linux_base">linux_base</a>, oppure
        installandole <a class="link" href="linuxemu-lbc-install.html#linuxemu-libs-manually" title="10.2.1.2. Installazione Manuale delle Librerie">manualmente</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-port"></a>10.2.1.1. Installazione Usando il Port linux_base</h4></div></div></div><a id="idp80992208" class="indexterm"></a><p>Questo è di gran lunga il metodo più facile da usare
          per installare le librerie runtime.  È proprio come installare
          qualunque altro port dalla <a class="link" href="file://localhost/usr/ports/" target="_top">Collezione dei Port</a>.
          Semplicemente fai come segue:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/emulators/linux_base-fc4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install distclean</code></strong></pre><p>In questo modo dovresti avere una compatibilità con i
          binari di Linux funzionante.  Alcuni programmi potrebbero lamentarsi
          per qualche versione minore delle librerie di sistema.  In generale,
          comunque, questo non dovrebbe essere un problema.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Potrebbero essere disponibili più versioni del port
            <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a>,
            corrispondenti a differenti versioni di distribuzioni Linux.
            Dovresti installare il port che più soddisfa le richieste
            della applicazione Linux che vuoi installare.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-manually"></a>10.2.1.2. Installazione Manuale delle Librerie</h4></div></div></div><p>Se non hai installata la collezione di <span class="quote">«<span class="quote">ports</span>»</span>, puoi
          comunque installare le librerie manualmente.  Hai bisogno delle
          librerie condivise di Linux da cui il programma dipende e del runtime
          linker.
          In più dovrai creare una directory <span class="quote">«<span class="quote">shadow root</span>»</span>,
          <code class="filename">/compat/linux</code>, per le librerie Linux sul tuo
          sistema FreeBSD.  Tutte le librerie condivise aperte da programmi
          Linux che girano sotto FreeBSD cercheranno prima in questo albero.
          Per cui, se un programma Linux carica, per esempio,
          <code class="filename">/lib/libc.so</code>, FreeBSD prima cercherà di
          aprire <code class="filename">/compat/linux/lib/libc.so</code>, e se questa non
          esiste, proverà con <code class="filename">/lib/libc.so</code>.
          Le librerie condivise dovrebbero essere installate nell'albero shadow
          <code class="filename">/compat/linux/lib</code> piuttosto che nei path
          che riporta <code class="command">ld.so</code> di Linux.</p><p>Generalmente avrai bisogno di cercare le librerie condivise
          da cui dipendono i binari di Linux solo per le prime poche
          installazioni di programmi Linux sul tuo sistema FreeBSD.  Dopo un po'
          avrai a disposizione sul tuo sistema un insieme sufficiente di
          librerie condivise per Linux da far girare nuovi binari Linux senza
          alcun sforzo ulteriore.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81026384"></a>10.2.1.3. Come Installare Ulteriori Librerie Condivise</h4></div></div></div><a id="idp81027024" class="indexterm"></a><p>Cosa succede se installi il port <code class="filename">linux_base</code> e
          la tua applicazione si lamenta ancora di librerie condivise che
          mancano?
          Come fare a sapere quali librerie condivise  necessita il binario di
          Linux e dove trovarle? Essenzialmente ci sono 2 possibilità
          (per seguire queste istruzioni dovrai essere <code class="systemitem">root</code>
          sul tuo sistema FreeBSD).</p><p>Se hai accesso ad un sistema Linux, guarda quali librerie
          condivise servono all'applicazione e copiale nel tuo sistema FreeBSD.
          Guarda all'esempio che segue:</p><div class="informalexample"><p>Poniamo che tramite FTP tu abbia recuperato il binario per Linux
            di <span class="application">Doom</span>, e l'abbia messo su un sistema
            Linux a cui hai accesso.  Puoi controllare quali librerie condivise
            servono eseguendo <code class="command">ldd linuxdoom</code>,
            così:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ldd linuxdoom</code></strong>
libXt.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libXt.so.3.1.0
libX11.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libX11.so.3.1.0
libc.so.4 (DLL Jump 4.5pl26) =&gt; /lib/libc.so.4.6.29</pre><a id="idp81035856" class="indexterm"></a><p>Potresti aver bisogno di recuperare tutti i file dall'ultima
            colonna, e di metterli sotto <code class="filename">/compat/linux</code>,
            con i nomi nella prima colonna come link simbolici che puntino ad
            essi.
            Questo significa che alla fine avrai questi file sul tuo sistema
            FreeBSD:</p><pre class="screen">/compat/linux/usr/X11/lib/libXt.so.3.1.0
/compat/linux/usr/X11/lib/libXt.so.3 -&gt; libXt.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3 -&gt; libX11.so.3.1.0
/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Nota che se hai già una libreria condivisa di Linux
                con un numero di revisione maggiore di quello della prima
                colonna dell'output di <code class="command">ldd</code>, non dovrai
                copiare nel tuo sistema il file elencato nell'ultima colonna,
                quello che hai dovrebbe funzionare.  Si raccomanda di copiare
                comunque la libreria condivisa se è una versione
                più recente.  Puoi rimuovere quella vecchia, dal momento
                che crei il link simbolico che punta a quella
                nuova.  Quindi, se hai queste librerie sul tuo sistema:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.27
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.27</pre><p xmlns="http://www.w3.org/1999/xhtml">e vedi che un nuovo binario richiede una versione più
                recente in base all'output di
                <code class="command">ldd</code>:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">libc.so.4 (DLL Jump 4.5pl26) -&gt; libc.so.4.6.29</pre><p xmlns="http://www.w3.org/1999/xhtml">Se si tratta solo di una o due versioni precedenti in base
                alla cifra finale allora non preoccuparti di copiare anche
                <code class="filename">/lib/libc.so.4.6.29</code>, perché il
                programma dovrebbe funzionare bene anche con una versione di
                poco più vecchia.  In ogni caso, se vuoi, puoi decidere
                di rimpiazzare comunque
                <code class="filename">libc.so</code>, e dovrebbe lasciarti con:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il meccanismo dei link simbolici è richiesto
                <span class="emphasis"><em>solo</em></span> per i binari di Linux.  Il runtime
                linker di FreeBSD si occupa da solo di cercare corrispondenti
                numeri di revisione maggiori e non devi preoccuparti di
                questo.</p></div></blockquote></div></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81048656"></a>10.2.2. Installazione di Binari ELF di Linux</h3></div></div></div><a id="idp81049296" class="indexterm"></a><p>I binari ELF possono richiedere un ulteriore passo di
        <span class="quote">«<span class="quote">marchiatura</span>»</span>.  Se provi a far girare un binario ELF non
        marchiato, incorrerai in un messaggio come il seguente:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>./my-linux-elf-binary</code></strong>
ELF binary type not known
Abort</pre><p>Per aiutare il kernel di FreeBSD a distinguere un binario ELF
        di FreeBSD da uno di Linux, usa l'utility <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>brandelf -t Linux my-linux-elf-binary</code></strong></pre><a id="idp81054416" class="indexterm"></a><p>Oggi, la GNU toolchain inserisce automaticamente l'appropriata
        informazione di marchiatura nei binari ELF, così questo passo
        dovrebbe divenire sempre meno necessario nel futuro.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81055440"></a>10.2.3. Configurazione del Hostname Resolver</h3></div></div></div><p>Se il DNS non funziona o da questo messaggio:</p><pre class="screen">resolv+: "bind" is an invalid keyword resolv+:
"hosts" is an invalid keyword</pre><p>Dovrai configurare un file
        <code class="filename">/compat/linux/etc/host.conf</code> contentente:</p><pre class="programlisting">order hosts, bind
multi on</pre><p>Qui, l'ordine specifica che <code class="filename">/etc/hosts</code>
        viene cercato per primo e il DNS per secondo.  Quando
        <code class="filename">/compat/linux/etc/host.conf</code> non è
        installato, le applicazioni Linux trovano il
        <code class="filename">/etc/host.conf</code> di FreeBSD e si lamentano della
        sintassi incompatibile di FreeBSD.  Dovresti rimuovere
        <code class="literal">bind</code> se non hai configurato un name server
        usando il file <code class="filename">/etc/resolv.conf</code>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="linuxemu.html">Indietro</a> </td><td width="20%" align="center"><a accesskey="u" href="linuxemu.html">Risali</a></td><td width="40%" align="right"> <a accesskey="n" href="linuxemu-mathematica.html">Avanti</a></td></tr><tr><td width="40%" align="left" valign="top">Capitolo 10. Compatibilità con i Binari di Linux </td><td width="20%" align="center"><a accesskey="h" href="index.html">Partenza</a></td><td width="40%" align="right" valign="top"> 10.3. Installazione di <span class="trademark">Mathematica</span>®</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Questo, ed altri documenti, possono essere scaricati da
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Per domande su FreeBSD, leggi la
    <a href="http://www.FreeBSD.org/docs.html">documentazione</a> prima di contattare
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Per domande su questa documentazione, invia una e-mail a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>