<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>11.5. Avvio dei Servizi</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuale di FreeBSD" /><link rel="up" href="config-tuning.html" title="Capitolo 11. Configurazione e Messa a Punto" /><link rel="prev" href="configtuning-appconfig.html" title="11.4. Configurazione delle Applicazioni" /><link rel="next" href="configtuning-cron.html" title="11.6. Configurare l'Utility cron" /><link rel="copyright" href="legalnotice.html" title="Nota Legale" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.5. Avvio dei Servizi</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configtuning-appconfig.html">Indietro</a> </td><th width="60%" align="center">Capitolo 11. Configurazione e Messa a Punto</th><td width="20%" align="right"> <a accesskey="n" href="configtuning-cron.html">Avanti</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-starting-services"></a>11.5. Avvio dei Servizi</h2></div><div><span class="authorgroup">Contributo di <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp82437456" class="indexterm"></a><p>Molti utenti scelgono di installare software di terze parti
      in FreeBSD attraverso la collezione dei port.  Nell magior parte dei
      casi potrebbe essere necessario configurare il software
      in un modo tale che sia avviato all'inizializzazione
      di sistema.  Servizi, come
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/postfix/pkg-descr">mail/postfix</a>
      o <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache13/pkg-descr">www/apache13</a> sono solo due fra
      i molti pacchetti software che possono essere avviati durante
      l'inizializzazione di sistema.  Questa sezione spiega le procedure
      disponibili per avviare software di terze parti.</p><p>In FreeBSD, molti servizi inclusi, come <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>, sono
      avviati attraverso gli script di startup.  Questi script possono
      differire a seconda della verione di FreeBSD o del produttore; comunque
      il più importante aspetto da considerare è che la
      configurazione di startup può essere gestita tramite semplici
      script di inizializzazione.</p><p>Prima dell'avvento di <code class="filename">rc.d</code>, gli
      applicativi lasciavano un semplice
      script di avvio nella directory <code class="filename">/usr/local/etc/rc.d</code> che sarebbe stato poi
      letto dagli script di inizializzazione di sistema.  Questi script
      sarebbero poi eseguiti durante la fase di avvio del
      sistema.</p><p>Mentre molti individui hanno speso ore cercando di integrare
      il vecchio stile di configurazione nel nuovo sistema, resta il fatto
      che qualche utility di terze parti necessita ancora di uno script
      semplicemente lasciato nella succitata directory.  Le sottili differenze
      negli script dipendono dal fatto se <code class="filename">rc.d</code> sia
      usato o meno.  Prima
      di FreeBSD 5.1 viene usato il vecchio metodo di configurazione
      ed in quasi tutti i casi uno script di nuovo tipo funzionerebbe
      perfettamente.</p><p>Mentre ogni script deve rispettare alcuni requisiti minimi,
      il più delle volte questi requisiti sono indipendenti
      dalla versioni di FreeBSD.  Ogni script deve avere una estensione
      <code class="filename">.sh</code> appesa alla fine ed ogni script deve essere
      eseguibile dal sistema.  L'ultima richiesta può essere soddisfatta
      usando il comando <code class="command">chmod</code> e impostando i permessi
      a <code class="literal">755</code>.  Ci dovrebbe essere, come minimo,
      un'opzione per fare lo <code class="literal">start</code> dell'applicativo
      ed un'opzione per farne lo <code class="literal">stop</code>.</p><p>Il più semplice script di avvio probabilmente sembrerebbe
      simile al seguente:</p><pre class="programlisting">#!/bin/sh
echo -n ' utility'

case "$1" in
start)
        /usr/local/bin/utility
        ;;
stop)
        kill -9 `cat /var/run/utility.pid`
        ;;
*)
        echo "Usage: `basename $0` {start|stop}" &gt;&amp;2
        exit 64
        ;;
esac

exit 0</pre><p>Questo script fornisce un'opzione <code class="literal">stop</code>
      e <code class="literal">start</code> per l'applicazione a cui ci riferiamo
      semplicemente come <code class="literal">utility</code>.</p><p>Potrebbe essere avviata manualmente con:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/utility.sh start</code></strong></pre><p>Mentre non tutto il software di terze parti richiede la linea
      in <code class="filename">rc.conf</code>, quasi ogni giorno un nuovo port
      viene modificato per accettare questa configurazione.  Controlla
      l'output finale dell'installazione per maggiori informazioni su un
      applicativo specifico.  Ci sarà del software di terze parti
      che fornisce script di avvio che permettono all'applicativo di
      essere usato con <code class="filename">rc.d</code>; tuttavia, questo
      sarà discusso nella successiva sezione.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82453456"></a>11.5.1. Configurazione Estesa degli Applicativi</h3></div></div></div><p>Ora che FreeBSD include <code class="filename">rc.d</code>, la
        configurazione dell'avvio degli applicativi è
        diventata più semplice, e più flessibile.
        Usando le parole chiave discusse nella sezione <a class="link" href="configtuning-rcd.html" title="11.7. Usare rc con FreeBSD">rc.d</a>, gli applicativi ora possono
        essere configurati dopo certi altri servizi come ad esempio il
        <acronym class="acronym">DNS</acronym>; possono permettere che siano passati flag extra
        nel codice attraverso <code class="filename">rc.conf</code> al posto
        di flag statici negli script di avvio, e molto altro.
        Uno script basilare potrebbe assomigliare al seguente:</p><pre class="programlisting">#!/bin/sh
#
# PROVIDE: utility
# REQUIRE: DAEMON
# KEYWORD: shutdown

. /etc/rc.subr

name=utility
rcvar=utility_enable

command="/usr/local/sbin/utility"

load_rc_config $name

#
# DO NOT CHANGE THESE DEFAULT VALUES HERE
# SET THEM IN THE /etc/rc.conf FILE
#
utility_enable=${utility_enable-"NO"}
pidfile=${utility_pidfile-"/var/run/utility.pid"}

run_rc_command "$1"</pre><p>Questo script assicurerà che
      <span class="application">utility</span> partirà dopo
      il servizio <code class="literal">daemon</code>.
      Fornisce inoltre un metodo per settare e tracciare il
      <acronym class="acronym">PID</acronym>, o il file dell'<acronym class="acronym">ID</acronym> di
      processo.</p><p>Questa applicazione potrebbe avere le seguenti linee piazzate
      in <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">utility_enable="YES"</pre><p>Questo metodo permette inoltre una semplice
      manipolazione degli argomenti di linea di comando, incluse
      le funzioni di default definite in <code class="filename">/etc/rc.subr</code>,
      compatibilità con l'utility <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rcorder</span>(8)</span></a> e fornisce una
      più semplice configurazione attraverso il file
      <code class="filename">rc.conf</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82461776"></a>11.5.2. Usare i Servizi per Avviare i Servizi</h3></div></div></div><p>Altri servizi, come i demoni <acronym class="acronym">POP</acronym>3,
        <acronym class="acronym">IMAP</acronym>, etc. potrebbero essere avviati
        usando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>.  Questo implica l'installazione del servizio
        dalla collezione dei port e l'aggiunta di una linea di
        configurazione al file <code class="filename">/etc/inetd.conf</code>
        o togliendo dei commenti in una delle linee di configurazione
        del file stesso.
        L'uso di <span class="application">inetd</span> e la
        sua configurazione è
        descritto in dettaglio nella sezione
        <a class="link" href="network-inetd.html" title="27.2. Il «Super-Server» inetd">inetd</a>.</p><p>In alcuni casi, potrebbe essere più plausibile usare
        il demone <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> per avviare i servizi di sistema.  Questo
        approccio ha alcuni vantaggi poichè <code class="command">cron</code>
        esegue questi processi come l'utente proprietario del file
        <code class="filename">crontab</code>.  Questo permette ad utenti regolari
        di avviare e mantenere alcuni applicativi.</p><p>Il comando <code class="command">cron</code> fornisce una caratteristica unica,
        <code class="literal">@reboot</code>, che potrebbe essere usato al posto della
        specifica del tempo.  Questo farà sì che il job sia
        eseguito quando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> è avviato, normalmente durante
        l'inizializzazione di sistema.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configtuning-appconfig.html">Indietro</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Risali</a></td><td width="40%" align="right"> <a accesskey="n" href="configtuning-cron.html">Avanti</a></td></tr><tr><td width="40%" align="left" valign="top">11.4. Configurazione delle Applicazioni </td><td width="20%" align="center"><a accesskey="h" href="index.html">Partenza</a></td><td width="40%" align="right" valign="top"> 11.6. Configurare l'Utility <code class="command">cron</code> </td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Questo, ed altri documenti, possono essere scaricati da
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Per domande su FreeBSD, leggi la
    <a href="http://www.FreeBSD.org/docs.html">documentazione</a> prima di contattare
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Per domande su questa documentazione, invia una e-mail a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>