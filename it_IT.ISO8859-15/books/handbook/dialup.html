<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>24.4. Servizio di Ricezione Chiamate</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuale di FreeBSD" /><link rel="up" href="serialcomms.html" title="Capitolo 24. Comunicazioni Seriali" /><link rel="prev" href="term.html" title="24.3. Terminali" /><link rel="next" href="dialout.html" title="24.5. Servizio di Effettuazione Chiamate" /><link rel="copyright" href="legalnotice.html" title="Nota Legale" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">24.4. Servizio di Ricezione Chiamate</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="term.html">Indietro</a> </td><th width="60%" align="center">Capitolo 24. Comunicazioni Seriali</th><td width="20%" align="right"> <a accesskey="n" href="dialout.html">Avanti</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dialup"></a>24.4. Servizio di Ricezione Chiamate</h2></div><div><span class="authorgroup">Contributo di <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Guy</span> <span class="surname">Helmer</span></span>. </span></div><div><span class="authorgroup">Aggiunte di <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Sean</span> <span class="surname">Kelly</span></span>. </span></div></div></div><a id="idp86169296" class="indexterm"></a><p>La configurazione del sistema FreeBSD per il servizio di ricezione
      chiamate è molto simile alla connessione di terminali tranne per il
      fatto che si ha a che fare con dei modem invece che con dei
      terminali.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86170192"></a>24.4.1. Modem Esterni contro Modem Interni</h3></div></div></div><p>I modem esterni sembrerebbero migliori per chiamare,
        poiché i modem esterni spesso possono essere configurati in
        maniera semipermanente tramite dei parametri immagazzinati in RAM non
        volatile e generalmente forniscono degli indicatori luminosi che
        mostrano lo stato degli importanti segnali RS-232.  Le lucine
        lampeggianti impressionano gli ospiti, ma sono anche molto
        utili per vedere se un modem sta funzionando in maniera
        appropriata.</p><p>I modem interni in genere mancano della RAM non-volatile, quindi
        la loro configurazione può essere limitata solo impostando i DIP
        switch.  Se il tuo modem interno ha delle luci indicatrici di
        segnale, probabilmente è difficile vederle quando il case del
        sistema è al suo posto.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86171600"></a>24.4.1.1. Modem e Cavi</h4></div></div></div><a id="idp86176464" class="indexterm"></a><p>Se stai usando un modem esterno, allora avrai bisogno
          del cavo appropriato.  Un cavo seriale standard RS-232C
          dovrebbe essere sufficiente, posto che tutti i normali segnali siano
          connessi:</p><div class="table"><a id="serialcomms-signal-names"></a><div class="table-title">Tabella 24.4. Nomi dei Segnali</div><div class="table-contents"><table summary="Nomi dei Segnali" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th align="left">Acronimi</th><th align="left">Nomi</th></tr></thead><tbody><tr><td><acronym class="acronym">RD</acronym></td><td>Ricezione Dati</td></tr><tr><td><acronym class="acronym">TD</acronym></td><td>Trasmissione Dati</td></tr><tr><td><acronym class="acronym">DTR</acronym></td><td>Terminale di Dati Disponibile</td></tr><tr><td><acronym class="acronym">DSR</acronym></td><td>Pronto alla Trasmissione</td></tr><tr><td><acronym class="acronym">DCD</acronym></td><td>Data Carrier Detect (scopre il Segnale di Linea
                  di Ricezione di RS-232)</td></tr><tr><td><acronym class="acronym">SG</acronym></td><td>Segnale di Massa</td></tr><tr><td><acronym class="acronym">RTS</acronym></td><td>Richiesta alla Trasmissione</td></tr><tr><td><acronym class="acronym">CTS</acronym></td><td>Disponibile all'Invio</td></tr></tbody></table></div></div><br class="table-break" /><p>FreeBSD necessita dei segnali <acronym class="acronym">RTS</acronym> e
          <acronym class="acronym">CTS</acronym> per il controllo di flusso a velocità
          superiori a 2400 bps, del segnale <acronym class="acronym">CD</acronym> per
          identificare quando c'è stata una risposta alla chiamata o
          quando una linea è stata scollegata, e del
          segnale <acronym class="acronym">DTR</acronym> per dare il reset al modem dopo che una
          sessione è terminata.  Alcuni cavi sono connessi senza alcuni
          dei segnali necessari, dunque se hai dei problemi, come una sessione
          di login che non scompare quando la linea è sconnessa, potresti
          avere un problema col cavo.</p><p>Come altri sistemi operativi <span class="trademark">UNIX</span>®, FreeBSD usa i segnali
          hardware per scoprire quando una chiamata è stata accettata
          o quando una linea è stata scollegata e per scollegare e
          resettare il modem dopo una chiamata.
          FreeBSD evita di mandare comandi al modem
          o di leggere i valori riportati dal modem.  Se hai familiarità
          con la connessione dei modem a BBS di PC, questo potrebbe sembrarti
          scomodo.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86194768"></a>24.4.2. Considerazioni sull'Interfaccia Seriale</h3></div></div></div><p>FreeBSD supporta interfacce di comunicazione EIA RS-232C
        (CCITT V.24) basate su NS8250, NS16450, NS16550, e NS16550A.
        I dispositivi 8250 e 16450 hanno buffer di un singolo carattere.
        Il dispositivo 16550 fornisce un buffer di 16 caratteri, che permette
        prestazioni del sistema migliori.  (Dei bug nel normale 16550
        impediscono l'uso del buffer di 16 caratteri, quindi usate 16550A se
        possibile).
        A causa del buffer a singolo carattere questi dispositivi richiedono
        un lavoro maggiore da parte del sistema operativo rispetto ai
        dispositivi a 16 caratteri di buffer, le schede d'interfaccia seriale
        basate su 16550A sono preferibili.  Se il sistema ha molte porte
        seriali attive o dovrà sopportare un grosso carico, le schede
        basate su 16550A sono migliori per comunicazioni a basso tasso
        d'errore.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86195920"></a>24.4.3. Breve Panoramica</h3></div></div></div><a id="idp86196560" class="indexterm"></a><p>Come con i terminali, <code class="command">init</code> lancia un processo
        <code class="command">getty</code> per ogni porta seriale configurata
        per connessioni in ingresso.  Ad esempio, se un modem è connesso
        a <code class="filename">/dev/ttyd0</code>, il comando
        <code class="command">ps ax</code> mostrerà questo:</p><pre class="screen"> 4850 ??  I      0:00.09 /usr/libexec/getty V19200 ttyd0</pre><p>Quando un utente chiama la linea del modem e questo si collega, il
        modem riporterà la linea <acronym class="acronym">CD</acronym> (Carrier Detect).
        Il kernel nota che la portante è stata rilevata e completa
        l'apertura della porta con <code class="command">getty</code>.
        <code class="command">getty</code> invia un prompt <code class="prompt">login:</code> alla
        velocità iniziale di linea specificata.
        <code class="command">getty</code> aspetta per verificare che vengano ricevuti
        caratteri legittimi, e, in una tipica configurazione, se trova dei
        caratteri strani (probabilmente perché la velocità del
        modem è differente da quella di
        <code class="command">getty</code>), <code class="command">getty</code> cerca
        di calibrare la velocità di linea fino a ricevere dei caratteri
        ragionevoli.</p><a id="idp86210896" class="indexterm"></a><p>Dopo che l'utente ha inserito il suo nome di login,
        <code class="command">getty</code> esegue
        <code class="filename">/usr/bin/login</code>, che completa il login
        richiedendo la password per l'utente ed avviandone la shell.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86213072"></a>24.4.4. File di Configurazione</h3></div></div></div><p>Ci sono tre file di configurazione di sistema nella directory
        <code class="filename">/etc</code> che avrai probabilmente bisogno di modificare
        per permettere chiamate in ingresso sul tuo sistema FreeBSD.  Il primo,
        <code class="filename">/etc/gettytab</code>, contiene le informazioni di
        configurazione per il demone <code class="filename">/usr/libexec/getty</code>.
        Il secondo, <code class="filename">/etc/ttys</code> contiene le informazioni che
        dicono a <code class="filename">/sbin/init</code> quali dispositivi
        <code class="filename">tty</code> devono avere processi <code class="command">getty</code>
        in esecuzione.
        Infine, si possono mettere comandi di inizializzazione nello script
        <code class="filename">/etc/rc.d/serial</code>.</p><p>Ci sono due scuole di pensiero riguardo i modem su <span class="trademark">UNIX</span>®.
        Un gruppo preferisce configurare i propri modem in maniera che
        qualunque sia la velocità con la quale un utente remoto si
        collega, l'interfaccia locale RS-232 computer-modem funzioni ad una
        velocità fissa.
        Il beneficio di questa configurazione è che l'utente
        remoto vede sempre un prompt di login immediato.
        Il lato negativo è che il sistema non sa quale sia la vera
        velocità di trasmissione
        dati di un utente, quindi programmi a tutto schermo come Emacs
        non modificheranno i loro metodi di rappresentazione dello schermo per
        ottimizzare la risposta su connessioni lente.</p><p>L'altra scuola di pensiero configura le proprie interfacce RS-232
        verso il modem per variare la propria velocità rispetto a quella
        di connessione dell'utente remoto.
        Ad esempio, le connessioni V.32bis (14.4 Kbps) faranno sì
        che il modem faccia funzionare la propria interfaccia RS-232 a
        19.2 Kbps, mentre le connessioni a 2400 bps faranno sì
        che funzioni a 2400 bps.
        Poiché <code class="command">getty</code> non comprende nessun valore
        restituito dal modem riguardo la velocità di connessione,
        <code class="command">getty</code> darà un messaggio
        <code class="prompt">login:</code> ad una velocità iniziale fissata e
        aspetterà i caratteri in risposta.  Se l'utente vede caratteri
        strani, si assume che sappia che dovrà premere
        <span class="keycode">Invio</span> finché non vedrà un prompt
        riconoscibile.  Se le frequenze di trasmissione non concordano,
        <code class="command">getty</code> vedrà tutto ciò che l'utente
        preme come <span class="quote">«<span class="quote">spazzatura</span>»</span>, cercherà di passare alla
        velocità seguente e invierà
        il prompt <code class="prompt">login:</code> di nuovo.  Questa procedura
        potrebbe continuare ad nauseam, ma normalmente ci vogliono solo una o
        due pressioni sui tasti prima che l'utente veda un buon prompt.
        Ovviamente, questa
        sequenza di login non è pulita come la precedente a
        <span class="quote">«<span class="quote">velocità fissata</span>»</span>, ma un utente su una
        connessione a bassa velocità dovrebbe ricevere una risposta
        interattiva migliore da programmi a tutto schermo.</p><p>Questa sezione cercherà di fornire informazioni di
        configurazione bilanciate, ma è indirizzata verso l'approccio di
        avere la frequenza di trasmissione del modem
        che segue la velocità della connessione.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86222032"></a>24.4.4.1. <code class="filename">/etc/gettytab</code></h4></div></div></div><a id="idp86222800" class="indexterm"></a><p><code class="filename">/etc/gettytab</code> è un file di
          configurazione sul modello di <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=termcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">termcap</span>(5)</span></a> per <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>.
          Si prega di vedere la pagina man di <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a> per le
          informazioni complete sul formato del file
          e la lista delle sue possibilità.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86230864"></a>24.4.4.1.1. Configurazione a Velocità Fissa</h5></div></div></div><p>Se stai fissando la frequenza di comunicazione del modem  ad
            una velocità particolare, probabilmente non avrai bisogno di
            effettuare nessun cambiamento a
            <code class="filename">/etc/gettytab</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86232400"></a>24.4.4.1.2. Configurazione a Velocità Concordata</h5></div></div></div><p>C'è bisogno di impostare una voce in
            <code class="filename">/etc/gettytab</code> per dare a
            <code class="command">getty</code> le informazioni sulla velocità che
            si vuole usare per il modem.  Se si possiede un modem a
            2400 bps, probabilmente è possibile usare
            la voce <code class="literal">D2400</code> già esistente.</p><pre class="programlisting">#
# Terminali chiamanti veloci, a rotazione 2400/1200/300
# (può impostarsi in tutti i modi)
#
D2400|d2400|Fast-Dial-2400:\
        :nx=D1200:tc=2400-baud:
3|D1200|Fast-Dial-1200:\
        :nx=D300:tc=1200-baud:
5|D300|Fast-Dial-300:\
        :nx=D2400:tc=300-baud:</pre><p>Se si possiede un modem con velocità maggiore,
            probabilmente sarà necessario
            aggiungere una voce in <code class="filename">/etc/gettytab</code>; qui
            c'è un esempio per modem a 14.4 Kbps modem con una
            velocità massima d'interfaccia di 19.2 Kbps:</p><pre class="programlisting">#
# Aggiunte per un modem V.32bis
#
um|V300|High Speed Modem at 300,8-bit:\
        :nx=V19200:tc=std.300:
un|V1200|High Speed Modem at 1200,8-bit:\
        :nx=V300:tc=std.1200:
uo|V2400|High Speed Modem at 2400,8-bit:\
        :nx=V1200:tc=std.2400:
up|V9600|High Speed Modem at 9600,8-bit:\
        :nx=V2400:tc=std.9600:
uq|V19200|High Speed Modem at 19200,8-bit:\
        :nx=V9600:tc=std.19200:</pre><p>Questo risulterà in una connessione a 8-bit, senza
            parità.</p><p>L'esempio precedente avvia la comunicazione a 19.2 Kbps
            (per una connessione V.32bis), poi cicla tra 9600 bps (per
            V.32), 2400 bps, 1200 bps, 300 bps, e poi ancora a
            19.2 Kbps.
            Il ciclo sulle frequenze di comunicazione è implementato con
            <code class="literal">nx=</code> (<span class="quote">«<span class="quote">next table</span>»</span>).
            Ogni linea usa una voce <code class="literal">tc=</code> (<span class="quote">«<span class="quote">table
            continuation</span>»</span>) per continuare a leggere le impostazioni
            <span class="quote">«<span class="quote">standard</span>»</span> per una frequenza particolare.</p><p>Se hai un modem a 28.8 Kbps e/o vuoi avvantaggiarti della
            compressione su un modem a 14.4 Kbps, hai bisogno di usare una
            frequenza di comunicazione più alta di 19.2 Kbps.  Qui
            c'è un esempio di voce per <code class="filename">gettytab</code> che
            imposta la velocità a 57.6 Kbps:</p><pre class="programlisting">#
# Aggiunte per modem  V.32bis o V.34 Modem
# Impostazione a 57.6 Kbps
#
vm|VH300|Very High Speed Modem at 300,8-bit:\
        :nx=VH57600:tc=std.300:
vn|VH1200|Very High Speed Modem at 1200,8-bit:\
        :nx=VH300:tc=std.1200:
vo|VH2400|Very High Speed Modem at 2400,8-bit:\
        :nx=VH1200:tc=std.2400:
vp|VH9600|Very High Speed Modem at 9600,8-bit:\
        :nx=VH2400:tc=std.9600:
vq|VH57600|Very High Speed Modem at 57600,8-bit:\
        :nx=VH9600:tc=std.57600:</pre><p>Se hai una CPU lenta o un carico di sistema pesante e non hai
            porte seriale 16550A, potresti ricevere errori
            <span class="errorname">sio</span> <span class="quote">«<span class="quote">silo</span>»</span> a
            57.6 Kbps.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dialup-ttys"></a>24.4.4.2. <code class="filename">/etc/ttys</code></h4></div></div></div><a id="idp86242384" class="indexterm"></a><p>La configurazione del file <code class="filename">/etc/ttys</code>
          è stata affrontata nella <a class="xref" href="term.html#ex-etc-ttys" title="Esempio 24.1. Aggiunta di Voci per Altri Terminali a /etc/ttys">Esempio 24.1, «Aggiunta di Voci per Altri Terminali a
            <code class="filename">/etc/ttys</code>»</a>.
          La configurazione dei modem è simile ma dobbiamo passare
          un argomento differente a <code class="command">getty</code> e specificare un
          tipo di terminale differente.  Il formato generale per la
          configurazione sia a velocità fissata che per quella
          concordata è:</p><pre class="programlisting">ttyd0   "/usr/libexec/getty <em class="replaceable"><code>xxx</code></em>"   dialup on</pre><p>Il primo elemento nella linea precedente è il file di
          dispositivo per questa voce - <code class="literal">ttyd0</code> significa
          che <code class="filename">/dev/ttyd0</code> è il file che verrà
          tenuto d'occhio da <code class="command">getty</code>.  Il secondo elemento,
          <code class="literal">"/usr/libexec/getty xxx"</code>
          (<em class="replaceable"><code>xxx</code></em> verrà rimpiazzato dalla
          capacità iniziale di <code class="filename">gettytab</code>) è
          il processo che  <code class="command">init</code> eseguirà sul
          dispositivo.  Il terzo elemento, <code class="literal">dialup</code>, è
          il tipo predefinito di terminale.  Il quarto parametro,
          <code class="literal">on</code>, indica a <code class="command">init</code> che quella
          linea è operativa.  Potrebbe esserci un quinto parametro,
          <code class="literal">secure</code>, ma dovrebbe essere usato solo per i
          terminali che siano fisicamente sicuri (come la console di
          sistema).</p><p>Il tipo di terminale predefinito (<code class="literal">dialup</code>
          nell'esempio precedente) potrebbe dipendere dalle preferenze locali.
          <code class="literal">dialup</code> è il terminale tradizionale
          predefinito sulle linee di ingresso in maniera che gli utenti possano
          personalizzare i loro script di login per notare quando il terminale
          è <code class="literal">dialup</code> e modificare
          automaticamente il loro tipo di terminale.  Ad ogni modo, l'autore
          ritiene più semplice specificare <code class="literal">vt102</code> come
          tipo di terminale predefinito, poiché l'utente può usare
          semplicemente un'emulazione VT102 sul suo sistema remoto.</p><p>Dopo aver effettuato i cambiamenti a
          <code class="filename">/etc/ttys</code>, puoi inviare un segnale
          <acronym class="acronym">HUP</acronym> a <code class="command">init</code> per fargli
          rileggere il file.  Puoi usare il comando
          </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP 1</code></strong></pre><p>
          per inviare il segnale.  Se questa è la prima volta che cambi
          le impostazioni del sistema, puoi aspettare finché il modem non
          sia configurato in maniera appropriata e connesso, prima di inviare il
          segnale a <code class="command">init</code>.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86263504"></a>24.4.4.2.1. Configurazione a Velocità Fissa</h5></div></div></div><p>Per una configurazione a velocità fissa, la voce
            in <code class="filename">ttys</code> ha bisogno di una voce che gestisca la
            velocità fissa anche per <code class="command">getty</code>.
            Per un modem la cui velocità sulla porta
            sia bloccata a 19.2 Kbps, la voce in <code class="filename">ttys</code>
            potrebbe essere così:</p><pre class="programlisting">ttyd0   "/usr/libexec/getty std.19200"   dialup on</pre><p>Se il tuo modem è bloccato su una frequenza di
            trasmissione differente, sostituisci il valore appropriato per
            <code class="literal">std.velocità</code>
            al posto di <code class="literal">std.19200</code>.  Assicurati di usare
            un tipo valido elencato in
            <code class="filename">/etc/gettytab</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86267728"></a>24.4.4.2.2. Configurazione a Velocità Concordata</h5></div></div></div><p>In una configurazione a velocità concordata, la voce in
            <code class="filename">ttys</code> deve fare riferimento alla voce
            iniziale <span class="quote">«<span class="quote">auto-baud</span>»</span> (sic) in
            <code class="filename">/etc/gettytab</code>.  Ad esempio, se hai aggiunto la
            riga suggerita precedentemente per un modem con velocità
            variabile che inizi a 19.2 Kbps (la riga in
            <code class="filename">gettytab</code> contenente
            il punto d'avvio <code class="literal">V19200</code>), la riga in
            <code class="filename">ttys</code> potrebbe essere questa:</p><pre class="programlisting">ttyd0   "/usr/libexec/getty V19200"   dialup on</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86271824"></a>24.4.4.3. <code class="filename">/etc/rc.d/serial</code></h4></div></div></div><a id="idp86272592" class="indexterm"></a><p>I modem ad alta velocità, come i V.32, i V.32bis, e i V.34,
          necessitano di un controllo di flusso hardware
          (<code class="literal">RTS/CTS</code>).
          Puoi aggiungere dei comandi <code class="command">stty</code> al file
          <code class="filename">/etc/rc.d/serial</code> per impostare i
          flag di controllo di flusso nel kernel FreeBSD per le porte del
          modem.</p><p>Ad esempio per impostare il flag <code class="literal">termios</code>
          <code class="varname">crtscts</code> sui dispositivi di inizializzazione
          di ingresso e uscita della porta seriale numero 1
          (<code class="filename">COM2</code>), si possono aggiungere le
          seguenti linee a <code class="filename">/etc/rc.d/serial</code>:</p><pre class="programlisting"># Configurazione iniziale della porta seriale
stty -f /dev/ttyd1.init crtscts
stty -f /dev/cuad1.init crtscts</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86277968"></a>24.4.5. Impostazioni del Modem</h3></div></div></div><p>Se hai uno di quei modem i cui parametri possono essere impostati in
        maniera permanente in RAM non volatile, avrai bisogno di usare un
        programma terminale (come Telix su <span class="trademark">MS-DOS</span>® o <code class="command">tip</code>
        sotto FreeBSD) per impostare i parametri.  Collegati al modem usando le
        stesse velocità iniziali e di comunicazione
        che userebbe <code class="command">getty</code> e configura la RAM non volatile
        secondo queste necessità:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">CD</acronym> attivo per la connessione</p></li><li class="listitem"><p><acronym class="acronym">DTR</acronym> attivo per l'operazione; l'assenza del
            DTR porta allo scollegamento della linea e al reset del modem</p></li><li class="listitem"><p><acronym class="acronym">CTS</acronym> controllo di flusso dei dati
            trasmessi</p></li><li class="listitem"><p>Disabilita il controllo di flusso
            <acronym class="acronym">XON/XOFF</acronym></p></li><li class="listitem"><p><acronym class="acronym">RTS</acronym> controllo di flusso dei dati
            ricevuti</p></li><li class="listitem"><p>Modalità silenziosa (nessun codice di risposta)</p></li><li class="listitem"><p>Nessun echo dei comandi</p></li></ul></div><p>Leggi la documentazione del tuo modem per capire quali
        comandi e/o impostazioni per i DIP switch sia necessario
        fornirgli.</p><p>Ad esempio, per impostare i parametri precedenti su un <span class="trademark">U.S. Robotics</span>®
        <span class="trademark">Sportster</span>® 14.400 esterno, si potrebbero dare questi comandi
        al modem:</p><pre class="programlisting">ATZ
AT&amp;C1&amp;D2&amp;H1&amp;I0&amp;R2&amp;W</pre><p>Potresti anche sfruttare questa opportunità per raffinare
        le impostazioni del modem, ad esempio per decidere se dovrà usare
        V.42bis e/o la compressione MNP5.</p><p>Il modem esterno <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14.400 ha anche dei DIP
        switch che devono essere impostati; per altri modem, forse potrai usare
        queste impostazioni come esempio:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Switch 1: SU - DTR Normale</p></li><li class="listitem"><p>Switch 2: N/D (Codici di Risposta Verbali/Codici di Risposta
            Numerici</p></li><li class="listitem"><p>Switch 3: SU - Sopprime i Codici di Risposta</p></li><li class="listitem"><p>Switch 4: GIÙ - Nessun echo, comandi offline </p></li><li class="listitem"><p>Switch 5: SU - Auto risposta</p></li><li class="listitem"><p>Switch 6: SU - Carrier Detect Normale</p></li><li class="listitem"><p>Switch 7: SU - Carica i valori predefiniti
            dall'NVRAM</p></li><li class="listitem"><p>Switch 8: N/D (Modalità intelligente/modalità
            stupida)</p></li></ul></div><p>I codici di risposta dovrebbero essere disabilitati/soppressi per i
        modem chiamanti per evitare i problemi che possono capitare
        se <code class="command">getty</code> dà incidentalmente un prompt
        <code class="prompt">login:</code> ad un modem che si trova in modalità
        di comando ed il modem restituisce l'eco del comando o un codice di
        risposta.  Questa sequenza può portare ad una lunga, stupida
        conversazione tra <code class="command">getty</code> ed il modem.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86308048"></a>24.4.5.1. Configurazione a Velocità Fissa</h4></div></div></div><p>Per una configurazione a velocità fissa, avrai bisogno di
          configurare il modem affinché mantenga una frequenza dati
          da modem a computer indipendente dalla frequenza di comunicazione.
          Su un modem esterno <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14.400
          questi comandi bloccheranno la velocità dati tra modem e
          computer alla velocità con la quale i comandi sono stati
          inviati:</p><pre class="programlisting">ATZ
AT&amp;B1&amp;W</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86310608"></a>24.4.5.2. Configurazione a Velocità Concordata</h4></div></div></div><p>Per una configurazione a velocità concordata, sarà
          necessario configurare il modem affinché modifichi la frequenza
          dei dati della porta seriale relativamente alla velocità di
          arrivo.  Su un modem esterno <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14.400, questi
          comandi causeranno il blocco della frequenza di trasmissione dati con
          correzione d'errore del modem sulla velocità con il quale
          è stato inviato il comando, ma permetteranno variazioni della
          velocità della porta seriale per le connessioni senza
          correzione d'errore:</p><pre class="programlisting">ATZ
AT&amp;B2&amp;W</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86317392"></a>24.4.5.3. Verifica della Configurazione del Modem</h4></div></div></div><p>La maggior parte dei modem ad alta velocità fornisce
          comandi per verificare i parametri funzionali usati dal modem in
          maniera più o meno comprensibile.
          Sui modem esterni <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14.400, il comando
          <code class="command">ATI5</code> mostra le impostazioni che sono immagazzinate
          nella RAM non volatile.  Per vedere i veri parametri operativi del
          modem (così come vengono influenzati dai DIP switch del modem),
          usa i comandi <code class="command">ATZ</code> e <code class="command">ATI4</code>.</p><p>Se hai modem di marche differenti, verifica il manuale del tuo
          modem per vedere come sia possibile un ulteriore controllo sui
          parametri di configurazione del modem.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86321232"></a>24.4.6. Risoluzione dei Problemi</h3></div></div></div><p>Questi sono un po' di passi che è possibile seguire per
        verificare il funzionamento del modem sul tuo sistema.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86322256"></a>24.4.6.1. Verifica del Sistema FreeBSD</h4></div></div></div><p>Collega il modem al sistema FreeBSD, avvia il sistema, e,
          se il tuo modem ha luci di indicazione dello stato, guarda se la luce
          <acronym class="acronym">DTR</acronym> del modem si accende quando appare il prompt
          <code class="prompt">login:</code> sulla console del sistema
          - se si accende, dovrebbe significare che FreeBSD ha avviato
          un processo <code class="command">getty</code> sulla porta di comunicazione
          appropriata e sta aspettando una chiamata dal modem.</p><p>Se l'indicatore <acronym class="acronym">DTR</acronym> non lampeggia, effettua il
          login sul sistema FreeBSD dalla console e dai il comando <code class="command">ps
            ax</code> per verificare se FreeBSD sta cercando di eseguire un
          processo <code class="command">getty</code> sulla porta corretta.  Dovresti
          vedere linee come queste tra i processi mostrati:</p><pre class="screen">  114 ??  I      0:00.10 /usr/libexec/getty V19200 ttyd0
  115 ??  I      0:00.10 /usr/libexec/getty V19200 ttyd1</pre><p>Se vedi qualcosa di diverso, come questo:</p><pre class="screen">  114 d0  I      0:00.10 /usr/libexec/getty V19200 ttyd0</pre><p>ed il modem non ha ancora accettato chiamate, ciò
          significa che <code class="command">getty</code> ha completato l'apertura della
          porta di comunicazione.
          Questo potrebbe indicare un problema nei cavi o un modem
          mal configurato, poiché <code class="command">getty</code> non dovrebbe
          completare l'apertura della porta fino al rilevamento del segnale
          <acronym class="acronym">CD</acronym> (carrier detect).</p><p>Se non vedi nessun processo <code class="command">getty</code> in attesa
          sulla porta <code class="filename">ttydN</code>
          scelta, ricontrolla le voci in <code class="filename">/etc/ttys</code> per
          vedere se ci sono errori lì.  Inoltre, controlla il file di log
          <code class="filename">/var/log/messages</code> per vedere se ci sono messaggi
          di <code class="command">init</code> o <code class="command">getty</code>
          riguardo i loro problemi.  Se ci sono messaggi, ri-ricontrolla i file
          di configurazione <code class="filename">/etc/ttys</code> e
          <code class="filename">/etc/gettytab</code>, ed anche i file speciali di
          dispositivo <code class="filename">/dev/ttydN</code>, cercando ogni errore,
          voce mancante, o file di dispositivo mancante.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86341328"></a>24.4.6.2. Tentativo di Connessione in Ingresso</h4></div></div></div><p>Cerca di collegarti dall'esterno al sistema; assicurati di usare 8
          bit, nessuna parità, e 1 bit di stop sul sistema remoto.  Se
          non ottieni un prompt, o vengono visualizzati caratteri strani, prova
          a premere <span class="keycode">Invio</span> circa una volta per secondo.
          Se dopo un po' ancora non vedi un prompt <code class="prompt">login:</code>,
          prova inviare un'<code class="command">INTERRUZIONE</code>.  Se stai usando un
          modem ad alta velocità per effettuare la chiamata, prova a
          richiamare dopo aver bloccato la velocità dell'interfaccia del
          modem (tramite <code class="command">AT&amp;B1</code> su un <span class="trademark">U.S. Robotics</span>®
          <span class="trademark">Sportster</span>®, ad esempio).</p><p>Se ancora non ottieni alcun prompt <code class="prompt">login:</code>,
          verifica <code class="filename">/etc/gettytab</code> ancora e ricontrolla
          che:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La capacità iniziale specificata in
              <code class="filename">/etc/ttys</code> per quella linea corrisponda a
              quella in <code class="filename">/etc/gettytab</code></p></li><li class="listitem"><p>Ogni campo <code class="literal">nx=</code> corrisponda ad un
              valore in <code class="filename">gettytab</code></p></li><li class="listitem"><p>Ogni campo  <code class="literal">tc=</code> corrisponda a un altro nome
              di capacità in <code class="filename">gettytab</code></p></li></ul></div><p>Se chiami ma il modem su FreeBSD non risponde,
          assicurati che il modem sia configurato per rispondere alla chiamata
          quando viene fornito un segnale <acronym class="acronym">DTR</acronym>.  Se il modem
          sembra essere configurato correttamente, verifica che la linea
          <acronym class="acronym">DTR</acronym> sia attiva controllando
          gli indicatori luminosi del modem (se ne ha).</p><p>Se hai già controllato tutto quanto più volte ed
          ancora non funziona, fai una pausa e riprova in seguito.  Se ancora
          non funziona puoi provare a inviare un messaggio di posta elettronica
          alla <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">mailing list per le domande generiche su FreeBSD</a> descrivendo il tuo modem ed il tuo problema, e i
          bravi ragazzi della lista cercheranno di darti una mano.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="term.html">Indietro</a> </td><td width="20%" align="center"><a accesskey="u" href="serialcomms.html">Risali</a></td><td width="40%" align="right"> <a accesskey="n" href="dialout.html">Avanti</a></td></tr><tr><td width="40%" align="left" valign="top">24.3. Terminali </td><td width="20%" align="center"><a accesskey="h" href="index.html">Partenza</a></td><td width="40%" align="right" valign="top"> 24.5. Servizio di Effettuazione Chiamate</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Questo, ed altri documenti, possono essere scaricati da
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Per domande su FreeBSD, leggi la
    <a href="http://www.FreeBSD.org/docs.html">documentazione</a> prima di contattare
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Per domande su questa documentazione, invia una e-mail a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>