<?xml version="1.0" encoding="iso-8859-7" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-7" /><title>4.12. Τύποι Εκτελέσιμων</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Εγχειρίδιο του FreeBSD" /><link rel="up" href="basics.html" title="Κεφάλαιο 4. Βασικές Έννοιες στο UNIX(R)" /><link rel="prev" href="basics-devices.html" title="4.11. Συσκευές και Αρχεία συσκευών" /><link rel="next" href="basics-more-information.html" title="4.13. Για Περισσότερες Πληροφορίες" /><link rel="copyright" href="legalnotice.html" title="Νομική Σημείωση" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.12. Τύποι Εκτελέσιμων</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="basics-devices.html">Προηγ</a> </td><th width="60%" align="center">Κεφάλαιο 4. Βασικές Έννοιες στο <span class="trademark">UNIX</span>(R)</th><td width="20%" align="right"> <a accesskey="n" href="basics-more-information.html">Επόμενο</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="binary-formats"></a>4.12. Τύποι Εκτελέσιμων</h2></div></div></div><p>Για να καταλάβετε γιατί το FreeBSD χρησιμοποιεί τον τύπο <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a>
      θα πρέπει πρώτα να γνωρίζετε μερικά πράγματα για τους τρεις
      <span class="quote">«<span class="quote">κυρίαρχους</span>»</span> τύπους εκτελέσιμων για το <span class="trademark">UNIX</span>(R)</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a></p><p>Ο παλαιότερος και πιο <span class="quote">«<span class="quote">κλασσικός</span>»</span> τύπος
	  αντικειμένων του <span class="trademark">UNIX</span>(R).  Χρησιμοποιεί μια μικρή και συμπαγή
	  κεφαλίδα με ένα μαγικό νούμερο στην αρχή που συχνά χρησιμοποιείται
	  για να χαρακτηρίζει τον τύπο (δείτε για περισσότερες πληροφορίες
	  την <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a>).  Περιέχει τρία φορτωμένα τμήματα: .text, .data
	  και .bss και επιπλέον ένα πίνακα συμβόλων και ένα πίνακα
	  αλφαριθμητικών χαρακτήρων.</p></li><li class="listitem"><p><acronym class="acronym">COFF</acronym></p><p>Ο τύπος αντικειμένου SVR3.  Η κεφαλίδα τώρα αποτελείται από ένα
	  πίνακα τομέων, ώστε να μπορούμε να έχουμε κάτι παραπάνω από απλά
	  .text, .data και .bss.</p></li><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a></p><p>Ο διάδοχος του <acronym class="acronym">COFF</acronym>, περιλαμβάνει πολλαπλά
	  τμήματα και δέχεται τιμές 32 ή 64 bit.  Το βασικό μειονέκτημα:
	  Ο <acronym class="acronym">ELF</acronym> σχεδιάστηκε με την προϋπόθεση πως θα
	  υπήρχε μόνο ένα ABI για κάθε αρχιτεκτονική συστήματος.  Αυτή η
	  υπόθεση είναι όμως εσφαλμένη τώρα, αφού ακόμη και στον εμπορικό
	  κόσμο του SYSV (όπου υπάρχουν τουλάχιστον τρία ABI: SRV4, Solaris,
	  SCO) δεν ισχύει.</p><p>Το FreeBSD προσπαθεί να ξεπεράσει αυτό το πρόβλημα παρέχοντας
	  ένα βοηθητικό πρόγραμμα με το οποίο μπορούμε να
	  <span class="emphasis"><em>ενσωματώσουμε (branding)</em></span> σε ένα εκτελέσιμο
	  <acronym class="acronym">ELF</acronym> τις πληροφορίες για το ABI που είναι συμβατό
	  με αυτό.  Δείτε την σελίδα manual του <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a> για
	  περισσότερες πληροφορίες.</p></li></ul></div><p>Το FreeBSD προέρχεται από τον <span class="quote">«<span class="quote">κλασσικό</span>»</span> χώρο και
      μέχρι την αρχή της σειράς 3.X, χρησιμοποιούσε τον τύπο <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a>,
      μια τεχνολογία δοκιμασμένη και αποδεδειγμένη σε πολλές γενιές εκδόσεων
      του BSD.  Αν και η μεταγλώττιση και εκτέλεση εγγενών εκτελέσιμων (και
      πυρήνων) τύπου <acronym class="acronym">ELF</acronym> ήταν δυνατή στα FreeBSD συστήματα
      ήδη από πολύ καιρό πριν, το FreeBSD αρχικά αντιστάθηκε στην
      <span class="quote">«<span class="quote">ώθηση</span>»</span> για καθιέρωση του <acronym class="acronym">ELF</acronym> ως
      προκαθορισμένου τύπου.  Γιατί; Όταν ο κόσμος του Λίνουξ έκανε την
      οδυνηρή μετάβαση προς το <acronym class="acronym">ELF</acronym>, δεν ήταν τόσο για να
      ξεφύγει από τον τύπο εκτελέσιμων <code class="filename">a.out</code> όσο για να
      αντιμετωπίσει το δύσκαμπτο δικό τους μηχανισμό κοινόχρηστων βιβλιοθηκών,
      ο οποίος βασίζονταν σε jump-tables και προκαλούσε μεγάλη δυσχέρεια στην
      κατασκευή τους, τόσο στους προγραμματιστές όσο και στους μεταπωλητές.
      Από τη στιγμή που τα διαθέσιμα εργαλεία του <acronym class="acronym">ELF</acronym>
      προσέφεραν λύση στο πρόβλημα των κοινών βιβλιοθηκών και έγινε γενικώς
      αποδεκτό πως ήταν <span class="quote">«<span class="quote">ο δρόμος προς τα εμπρός</span>»</span>, έγινε
      αποδεκτό το αναγκαίο κόστος της μεταφοράς και επιτεύχθηκε η μετακίνηση.
      Ο μηχανισμός κοινόχρηστων βιβλιοθηκών του FreeBSD βασίζεται σε μεγάλο
      βαθμό στον αντίστοιχο μηχανισμό του <span class="trademark">SunOS</span>TM της Sun και είναι πολύ
      εύκολος στη χρήση.</p><p>Τότε, γιατί υπάρχουν τόσοι διαφορετικοί τύποι;</p><p>Πίσω στο σκοτεινό παρελθόν, υπήρχε απλό hardware.  Αυτό
      το απλό hardware υποστήριζε ένα απλό, μικρό σύστημα.  Το
      <code class="filename">a.out</code> ήταν απόλυτα κατάλληλο για την αναπαράσταση
      εκτελέσιμων σε αυτό το απλό σύστημα (ένα PDP-11).  Όταν ο κόσμος άρχισε
      να μεταφέρει το <span class="trademark">UNIX</span>(R) από αυτό το απλό σύστημα, διατηρήθηκε ο τύπος
      <code class="filename">a.out</code> γιατί ήταν ικανοποιητικός για τα πρώτα
      ports του <span class="trademark">UNIX</span>(R) σε αρχιτεκτονικές όπως η Motorola 68k, VAXen,
      κτλ.</p><p>Μετέπειτα κάποιος λαμπρός μηχανικός hardware αποφάσισε
      πως αφού μπορούσε να εξαναγκάζει το λογισμικό να κάνει τόσα
      πρόχειρα κόλπα, θα μπορούσε επίσης να παραλείψει μερικές πύλες
      από το σχεδιασμό ώστε να επιτρέψει στον πυρήνα της CPU να τρέχει
      γρηγορότερα.  Αν και διασκευάσθηκε ώστε να δουλεύει με αυτό το νέο
      είδος hardware (γνωστό σήμερα ως <acronym class="acronym">RISC</acronym>), ο τύπος
      <code class="filename">a.out</code> ήταν τελικά ακατάλληλος για αυτό, και έτσι
      σχεδιάστηκαν πολλοί νέοι τύποι για να επιτευχθεί καλύτερη απόδοση από
      το hardware από ότι ήταν δυνατόν με τον απλό και περιοριστικό τύπο
      <code class="filename">a.out</code>.  Εφευρέθηκαν διάφοροι τύποι όπως οι
      <acronym class="acronym">COFF</acronym>, <acronym class="acronym">ECOFF</acronym>, και μερικοί άλλοι
      λιγότερο γνωστοί, και ερευνήθηκαν οι περιορισμοί τους ώσπου τα πράγματα
      σταθεροποιήθηκαν στο <acronym class="acronym">ELF</acronym>.</p><p>Επιπλέον, το μέγεθος των προγραμμάτων γινόταν όλο και μεγαλύτερο
      και οι δίσκοι (και η φυσική μνήμη) ήταν ακόμη σχετικά μικροί και κάπως
      έτσι γεννήθηκε η ιδέα της κοινής βιβλιοθήκης.  Το σύστημα VM έγινε
      επίσης περισσότερο περίπλοκο.  Κάθε μία από τις βελτιώσεις γινόταν
      με βάση τον τύπο <code class="filename">a.out</code>, που όμως γινόταν όλο και
      πιο δύσχρηστος με κάθε νέα προσθήκη.  Επιπρόσθετα, ο κόσμος ήθελε να
      φορτώνει τμήματα δυναμικά ενώ το σύστημα ήταν σε φάση εκτέλεσης, ή να
      εξαλείφει μέρη προγραμμάτων αφού είχε εκτελεστεί ο κώδικας αρχικοποίησης
      (init) ώστε να εξοικονομηθεί φυσική μνήμη και χώρος swap.  Οι γλώσσες
      προγραμματισμού γινόντουσαν ακόμα πιο περίπλοκες και ο κόσμος ήθελε
      αυτόματη φόρτωση και εκτέλεση κώδικα πριν την κλήση της main.  Έγιναν
      πρόχειρες διορθώσεις (hacks) στον τύπο <code class="filename">a.out</code> ώστε
      να συμβαδίζει με όλες αυτές τις αλλαγές, και πράγματι, για μια περίοδο
      έδειχνε να λειτουργεί.  Με τον καιρό όμως, φάνηκε ότι ο τύπος
      <code class="filename">a.out</code> δεν θα μπορούσε να αντεπεξέλθει σε όλα αυτά
      τα προβλήματα, αφού θα έπρεπε να αναπτύσσεται συνεχώς και με περίπλοκο
      τρόπο.  Αν και το <acronym class="acronym">ELF</acronym> έλυνε πολλά από αυτά τα
      προβλήματα, η μετάβαση σε αυτό ενός συστήματος που βασικά λειτουργούσε,
      θα οδηγούσε σε οδυνηρές καταστάσεις.  Έτσι ο τύπος
      <acronym class="acronym">ELF</acronym> έπρεπε να περιμένει μέχρι τη στιγμή όπου η
      παραμονή στο <code class="filename">a.out</code> θα δημιουργούσε περισσότερα
      προβλήματα από ότι η μετάβαση στο <acronym class="acronym">ELF</acronym>.</p><p>Ωστόσο, όσο ο καιρός περνούσε, και τα εργαλεία μεταγλώττισης από
      τα οποία προέρχονται τα αντίστοιχα εργαλεία του FreeBSD (ειδικότερα ο
      assembler και ο loader), αναπτύχθηκαν παράλληλα σε δύο δέντρα.  Το
      δέντρο του FreeBSD πρόσθεσε κοινές βιβλιοθήκες και διόρθωσε κάποια
      σφάλματα.  Η ομάδα του GNU που είχε αρχικά γράψει αυτά τα
      προγράμματα, τα έγραψε ξανά και πρόσθεσε ευκολότερη υποστήριξη για
      κατασκευή cross compilers, την ενσωμάτωση διαφορετικών τύπων κατά
      βούληση, κλπ.  Αν και πολλοί ζητούσαν να κατασκευαστούν cross compilers
      για FreeBSD, ήταν άτυχοι, αφού ο παλιός πηγαίος κώδικας του FreeBSD για τα
      <span class="application">as</span> και <span class="application">ld</span> τα
      έκανε ακατάλληλα.  Η νέα αλυσίδα εργαλείων του GNU
      (<span class="application">binutils</span>) υποστηρίζει cross compiling,
      <acronym class="acronym">ELF</acronym>, κοινές βιβλιοθήκες, προεκτάσεις C++, κτλ.
      Επιπλέον, πολλοί τρίτοι κατασκευαστές προσφέρουν εκτελέσιμα ELF, και
      είναι πολύ καλό να μπορούν να εκτελεστούν στο FreeBSD.</p><p>Ο <acronym class="acronym">ELF</acronym> είναι πιο εκφραστικός από τον
      <code class="filename">a.out</code> και περισσότερο επεκτάσιμος στο βασικό
      σύστημα.  Τα εργαλεία <acronym class="acronym">ELF</acronym> είναι ευκολότερα στην
      συντήρηση και προσφέρουν υποστήριξη για cross compilers,
      κάτι που είναι πολύ σημαντικό για μερικούς ανθρώπους.  Μπορεί ο
      <acronym class="acronym">ELF</acronym> να είναι λίγο πιο αργός από τον
      <code class="filename">a.out</code>, αλλά η διαφορά δεν είναι αισθητή.  Υπάρχουν
      επίσης πολλές άλλες διαφορές μεταξύ τους, σε λεπτομέρειες όπως τον τρόπο
      που αντιστοιχίζουν σελίδες, που χειρίζονται τον κώδικα init, κλπ.
      Καμιά από αυτές δεν είναι πολύ σημαντική, αλλά ωστόσο δεν παύουν να
      είναι διαφορές.  Με τον καιρό η υποστήριξη για το
      <code class="filename">a.out</code> θα απομακρυνθεί από τον πυρήνα GENERIC, και
      τελικά θα αφαιρεθεί εντελώς από τον πυρήνα όταν εκλείψει ολοκληρωτικά η
      ανάγκη εκτέλεσης παλαιών προγραμμάτων τύπου <code class="filename">a.out</code>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="basics-devices.html">Προηγ</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">Πάνω</a></td><td width="40%" align="right"> <a accesskey="n" href="basics-more-information.html">Επόμενο</a></td></tr><tr><td width="40%" align="left" valign="top">4.11. Συσκευές και Αρχεία συσκευών </td><td width="20%" align="center"><a accesskey="h" href="index.html">Αρχή</a></td><td width="40%" align="right" valign="top"> 4.13. Για Περισσότερες Πληροφορίες</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Αυτό το κείμενο, και άλλα κείμενα, μπορεί να βρεθεί στο
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Για ερωτήσεις σχετικά με το FreeBSD, διαβάστε την
    <a href="http://www.FreeBSD.org/docs.html">τεκμηρίωση</a> πριν να επικοινωνήσετε με την
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Για ερωτήσεις σχετικά με αυτή την τεκμηρίωση, στείλτε e-mail στην
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>