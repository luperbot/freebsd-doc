<?xml version="1.0" encoding="iso-8859-7" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-7" /><title>20.7. Δημιουργώντας Ετικέτες (Labels) στις Συσκευές Δίσκων</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Εγχειρίδιο του FreeBSD" /><link rel="up" href="GEOM.html" title="Κεφάλαιο 20. GEOM: Διαχείριση Συστοιχιών Δίσκων" /><link rel="prev" href="geom-ggate.html" title="20.6. Δικτυακές Συσκευές μέσω GEOM Gate" /><link rel="next" href="geom-gjournal.html" title="20.8. UFS Journaling Μέσω GEOM" /><link rel="copyright" href="legalnotice.html" title="Νομική Σημείωση" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">20.7. Δημιουργώντας Ετικέτες (Labels) στις Συσκευές Δίσκων</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="geom-ggate.html">Προηγ</a> </td><th width="60%" align="center">Κεφάλαιο 20. GEOM: Διαχείριση Συστοιχιών Δίσκων</th><td width="20%" align="right"> <a accesskey="n" href="geom-gjournal.html">Επόμενο</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="geom-glabel"></a>20.7. Δημιουργώντας Ετικέτες (Labels) στις Συσκευές Δίσκων</h2></div></div></div><a id="idp91615824" class="indexterm"></a><a id="idp91616592" class="indexterm"></a><p>Κατά τη διάρκεια της αρχικοποίησης, στην εκκίνηση του συστήματος,
      ο πυρήνας του FreeBSD θα δημιουργήσει τα απαραίτητα αρχεία για κάθε
      συσκευή που ανιχνεύει.  Αυτή η μέθοδος ανίχνευσης συσκευών, μπορεί να
      δημιουργήσει προβλήματα.  Για παράδειγμα, τι θα γίνει αν προσθέσουμε ένα
      νέο δίσκο <acronym class="acronym">USB</acronym>;  Είναι αρκετά πιθανό μια συσκευή
      μνήμης flash να πάρει το όνομα <code class="filename">da0</code> και η
      αρχική <code class="filename">da0</code> να μετακινηθεί στο
      <code class="filename">da1</code>.  Αυτό θα προκαλέσει προβλήματα στην
      προσάρτηση των συστημάτων αρχείων, αν υπάρχουν οι αντίστοιχες
      καταχωρίσεις τους στο <code class="filename">/etc/fstab</code>, και μπορεί ακόμα
      και να παρεμποδίσει την κανονική εκκίνηση του συστήματος.</p><p>Μια λύση είναι να ρυθμίσετε τις συσκευές <acronym class="acronym">SCSI</acronym> με
      τέτοιο τρόπο, ώστε η αρίθμηση τους να είναι συνεχόμενη.  Έτσι, κάθε
      φορά που προσθέτετε μια νέα συσκευή στον ελεγκτή <acronym class="acronym">SCSI</acronym>
      θα είστε σίγουρος ότι θα λάβει αριθμό που δεν έχει χρησιμοποιηθεί.
      Αλλά τι γίνεται με τις συσκευές <acronym class="acronym">USB</acronym> που μπορεί να
      αντικαταστήσουν τον κύριο <acronym class="acronym">SCSI</acronym> δίσκο;  Αυτό μπορεί
      πράγματι να συμβεί, καθώς οι συσκευές <acronym class="acronym">USB</acronym>
      ανιχνεύονται κατά βάση πριν από τον ελεγκτή <acronym class="acronym">SCSI</acronym>.
      Μια λύση είναι να βάζετε τις συσκευές αυτές μόνο μετά την εκκίνηση
      του συστήματος.  Μια άλλη μέθοδος είναι να χρησιμοποιείτε μόνο μια
      συσκευή τύπου <acronym class="acronym">ATA</acronym> και να μην καταχωρείτε ποτέ τους
      δίσκους <acronym class="acronym">SCSI</acronym> στο <code class="filename">/etc/fstab</code>.</p><p>Υπάρχει ωστόσο καλύτερη λύση.  Χρησιμοποιώντας το βοηθητικό
      πρόγραμμα <code class="command">glabel</code>, ένας διαχειριστής ή χρήστης, μπορεί
      να αποδώσει ετικέτες στις συσκευές δίσκων και να τις χρησιμοποιήσει στο
      <code class="filename">/etc/fstab</code>, αντί για τα συμβατικά ονόματα
      συσκευών.  Επειδή η <code class="command">glabel</code> αποθηκεύει την ετικέτα
      στον τελευταίο τομέα του κάθε παροχέα (συσκευής δίσκου), η ετικέτα
      διατηρείται και μετά από την επανεκκίνηση του συστήματος.
      Χρησιμοποιώντας αυτή την ετικέτα ως όνομα συσκευής, θα μπορείτε να
      προσαρτήσετε πάντα το σύστημα αρχείων, άσχετα με το πραγματικό όνομα
      συσκευής που έχει αποδοθεί στο δίσκο.</p><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Δεν χρειάζεται φυσικά να τονίσουμε ότι αυτή η ετικέτα θα πρέπει
	να είναι μόνιμη.  Το βοηθητικό πρόγραμμα <code class="command">glabel</code>
	μπορεί να δημιουργήσει τόσο μόνιμες όσο και προσωρινές ετικέτες.
	Μόνο οι μόνιμες ετικέτες διατηρούνται ανέπαφες μετά από μια
	επανεκκίνηση.  Δείτε τη σελίδα manual της <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=glabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">glabel</span>(8)</span></a> για
	περισσότερες πληροφορίες σχετικά με τα είδη των ετικετών.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91631184"></a>20.7.1. Είδη Ετικετών και Παραδείγματα</h3></div></div></div><p>Υπάρχουν δύο τύποι ετικετών, η γενική ετικέτα και η ετικέτα
	συστήματος αρχείων.  Οι ετικέτες μπορεί να είναι προσωρινές ή μόνιμες.
	Οι μόνιμες ετικέτες μπορούν να δημιουργηθούν με τις εντολές
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a> ή <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>.  Στην περίπτωση αυτή, θα δημιουργηθούν
	σε ένα υποκατάλογο του <code class="filename">/dev</code>.
	Για παράδειγμα, οι ετικέτες συσκευών με σύστημα αρχείων
	<acronym class="acronym">UFS</acronym>2, θα δημιουργηθούν στον κατάλογο <code class="filename">/dev/ufs</code>.  Μόνιμες ετικέτες μπορούν
	επίσης να δημιουργηθούν με χρήση της εντολής
	<code class="command">glabel label</code>.  Οι ετικέτες αυτές δεν εξαρτώνται από
	το σύστημα αρχείων, και δημιουργούνται στον κατάλογο
	<code class="filename">/dev/label</code>.</p><p>Οι ετικέτες προσωρινού τύπου, χάνονται σε κάθε επανεκκίνηση του
	συστήματος.  Οι ετικέτες αυτές δημιουργούνται στον κατάλογο
	<code class="filename">/dev/label</code> και είναι τέλειες
	για πειραματισμούς.  Μπορείτε να δημιουργήσετε προσωρινές ετικέτες
	με την εντολή <code class="command">glabel create</code>.  Για περισσότερες
	πληροφορίες, διαβάστε τη σελίδα manual της <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=glabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">glabel</span>(8)</span></a>.</p><p>Για να δημιουργήσετε μια μόνιμη ετικέτα για ένα σύστημα αρχείων
	<acronym class="acronym">UFS</acronym>2, χωρίς να καταστρέψετε τα δεδομένα που
	περιέχει, χρησιμοποιήστε την ακόλουθη εντολή:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tunefs -L home /dev/da3</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Προειδοποίηση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Αν το σύστημα αρχείων είναι γεμάτο, η παραπάνω εντολή μπορεί να
	  προκαλέσει καταστροφή δεδομένων.  Ωστόσο, αν το σύστημα αρχείων
	  είναι γεμάτο, στόχος σας θα πρέπει να είναι να διαγράψετε τα
	  αρχεία που δεν χρησιμοποιούνται, και όχι να προσθέτετε
	  ετικέτες.</p></div><p>Θα πρέπει τώρα να υπάρχει μια ετικέτα στον κατάλογο
	<code class="filename">/dev/ufs</code> η οποία μπορεί να
	προστεθεί στο <code class="filename">/etc/fstab</code>:</p><pre class="programlisting">/dev/ufs/home		/home            ufs     rw              2      2</pre><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Το σύστημα αρχείων δεν πρέπει να είναι προσαρτημένο καθώς
	  εκτελείτε την εντολή <code class="command">tunefs</code>.</p></div><p>Μπορείτε τώρα να προσαρτήσετε το σύστημα αρχείων με το συνήθη
	τρόπο:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /home</code></strong></pre><p>Από εδώ και πέρα, και όσο το άρθρωμα
	<code class="filename">geom_label.ko</code> φορτώνεται στον πυρήνα μέσω του
	<code class="filename">/boot/loader.conf</code> ή εφόσον έχετε βάλει την
	επιλογή <code class="literal">GEOM_LABEL</code> στον πυρήνα σας, ακόμα και αν
	το όνομα της συσκευής αλλάξει, δεν θα έχει καμιά δυσμενή επίδραση
	στο σύστημα σας.</p><p>Μπορείτε επίσης να δημιουργήσετε συστήματα αρχείων με
	προεπιλεγμένη ετικέτα, χρησιμοποιώντας την επιλογή
	<code class="option">-L</code> στην εντολή <code class="command">newfs</code>.  Δείτε την
	σελίδα manual του <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> για περισσότερες πληροφορίες.</p><p>Μπορείτε να χρησιμοποιήσετε την παρακάτω εντολή για να
	καταστρέψετε μια ετικέτα:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>glabel destroy home</code></strong></pre><p>Το επόμενο παράδειγμα δείχνει πως μπορούν να δοθούν ετικέτες στις
	κατατμήσεις του δίσκου εκκίνησης.</p><div class="example"><a id="idp91679440"></a><div class="example-title">Παράδειγμα 20.1. Δημιουργία Ετικετών στις Κατατμήσεις του Δίσκου
	  Εκκίνησης</div><div class="example-contents"><p>Δημιουργώντας μόνιμες ετικέτες στις κατατμήσεις του δίσκου
	  εκκίνησης, το σύστημα σας θα συνεχίσει να εκκινεί κανονικά ακόμα
	  και αν μεταφέρετε το δίσκο σε άλλο ελεγκτή ή ακόμα και σε
	  διαφορετικό σύστημα.  Στο παράδειγμα μας, θεωρούμε ότι
	  χρησιμοποιείται ένας δίσκος <acronym class="acronym">ATA</acronym>, ο οποίος
	  αναγνωρίζεται από το σύστημα ως <code class="filename">ad0</code>.
	  Θεωρούμε επίσης ότι χρησιμοποιείται η συνηθισμένη διάταξη
	  κατατμήσεων του FreeBSD, που περιλαμβάνει τις κατατμήσεις
	  <code class="filename">/</code>,
	  <code class="filename">/var</code>,
	  <code class="filename">/usr</code> και
	  <code class="filename">/tmp</code> όπως επίσης και μια
	  κατάτμηση swap.</p><p>Επανεκκινήστε το σύστημα, και όταν εμφανιστεί η προτροπή του
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>, πιέστε το <span class="keycap"><strong>4</strong></span> για να πραγματοποιηθεί
	  εκκίνηση σε κατάσταση ενός χρήστη.  Έπειτα, δώστε τις ακόλουθες
	  εντολές:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>glabel label rootfs /dev/ad0s1a</code></strong>
GEOM_LABEL: Label for provider /dev/ad0s1a is label/rootfs
<code class="prompt">#</code> <strong class="userinput"><code>glabel label var /dev/ad0s1d</code></strong>
GEOM_LABEL: Label for provider /dev/ad0s1d is label/var
<code class="prompt">#</code> <strong class="userinput"><code>glabel label usr /dev/ad0s1f</code></strong>
GEOM_LABEL: Label for provider /dev/ad0s1f is label/usr
<code class="prompt">#</code> <strong class="userinput"><code>glabel label tmp /dev/ad0s1e</code></strong>
GEOM_LABEL: Label for provider /dev/ad0s1e is label/tmp
<code class="prompt">#</code> <strong class="userinput"><code>glabel label swap /dev/ad0s1b</code></strong>
GEOM_LABEL: Label for provider /dev/ad0s1b is label/swap
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong></pre><p>Η εκκίνηση θα συνεχιστεί κανονικά και το σύστημα θα έλθει σε
	  κατάσταση πολλαπλών χρηστών (multi-user).
	  Μετά το τέλος της εκκίνησης, επεξεργαστείτε το αρχείο
	  <code class="filename">/etc/fstab</code> και αλλάξτε τα συμβατικά ονόματα
	  συσκευών με τις αντίστοιχες ετικέτες.  Το τελικό αρχείο
	  <code class="filename">/etc/fstab</code> θα μοιάζει με το παρακάτω:</p><pre class="programlisting"># Device                Mountpoint      FStype  Options         Dump    Pass#
/dev/label/swap         none            swap    sw              0       0
/dev/label/rootfs       /               ufs     rw              1       1
/dev/label/tmp          /tmp            ufs     rw              2       2
/dev/label/usr          /usr            ufs     rw              2       2
/dev/label/var          /var            ufs     rw              2       2</pre><p>Μπορείτε τώρα να επανεκκινήσετε το σύστημα.  Αν όλα πήγαν καλά,
	  η εκκίνηση θα είναι κανονική, και η εντολή <code class="command">mount</code>
	  θα δείξει:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount</code></strong>
/dev/label/rootfs on / (ufs, local)
devfs on /dev (devfs, local)
/dev/label/tmp on /tmp (ufs, local, soft-updates)
/dev/label/usr on /usr (ufs, local, soft-updates)
/dev/label/var on /var (ufs, local, soft-updates)</pre></div></div><br class="example-break" /><p>Ξεκινώντας από το FreeBSD 7.2, το <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=glabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">glabel</span>(8)</span></a> υποστηρίζει
	ένα νέο είδος ετικέτας για συστήματα αρχείων <acronym class="acronym">UFS</acronym>,
	που βασίζεται σε ένα μοναδιαίο αναγνωριστικό τους,
	το <code class="literal">ufsid</code>.  Οι ετικέτες αυτές βρίσκονται στον
	κατάλογο <code class="filename">/dev/ufsid</code>,
	δημιουργούνται αυτόματα κατά την εκκίνηση του συστήματος και είναι
	δυνατόν να χρησιμοποιηθούν για την προσάρτηση κατατμήσεων μέσω του
	<code class="filename">/etc/fstab</code>.  Μπορείτε να χρησιμοποιήσετε την
	εντολή <code class="command">glabel status</code> για να λάβετε μια λίστα
	των συστημάτων αρχείων με τις αντίστοιχες <code class="literal">ufsid</code>
	ετικέτες τους:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>glabel status</code></strong>
                  Name  Status  Components
ufsid/486b6fc38d330916     N/A  ad4s1d
ufsid/486b6fc16926168e     N/A  ad4s1f</pre><p>Στο παραπάνω παράδειγμα, το <code class="filename">ad4s1d</code>
	αντιπροσωπεύει το σύστημα αρχείων <code class="filename">/var</code>, ενώ το
	<code class="filename">ad4s1f</code> αντιπροσωπεύει το σύστημα αρχείων
	<code class="filename">/usr</code>.  Χρησιμοποιώντας τις
	τιμές <code class="literal">ufsid</code> που φαίνονται, η προσάρτηση αυτών
	των κατατμήσεων μπορεί να γίνει με τις παρακάτω καταχωρίσεις στο
	<code class="filename">/etc/fstab</code>:</p><pre class="programlisting">/dev/ufsid/486b6fc38d330916        /var        ufs        rw        2      2
/dev/ufsid/486b6fc16926168e        /usr        ufs        rw        2      2</pre><p>Οποιαδήποτε κατάτμηση διαθέτει αναγνωριστικό
	<code class="literal">ufsid</code> μπορεί να προσαρτηθεί με τον ίδιο τρόπο,
	χωρίς να υπάρχει πλέον ανάγκη να δημιουργηθεί μόνιμη ετικέτα
	χειροκίνητα.  Η προσάρτηση μέσω ετικέτας <code class="literal">ufsid</code>,
	παρέχει το πλεονέκτημα της ανεξαρτησίας από το όνομα συσκευής, το
	οποίο παρέχουν και οι μόνιμες ετικέτες.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="geom-ggate.html">Προηγ</a> </td><td width="20%" align="center"><a accesskey="u" href="GEOM.html">Πάνω</a></td><td width="40%" align="right"> <a accesskey="n" href="geom-gjournal.html">Επόμενο</a></td></tr><tr><td width="40%" align="left" valign="top">20.6. Δικτυακές Συσκευές μέσω GEOM Gate </td><td width="20%" align="center"><a accesskey="h" href="index.html">Αρχή</a></td><td width="40%" align="right" valign="top"> 20.8. UFS Journaling Μέσω GEOM</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Αυτό το κείμενο, και άλλα κείμενα, μπορεί να βρεθεί στο
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Για ερωτήσεις σχετικά με το FreeBSD, διαβάστε την
    <a href="http://www.FreeBSD.org/docs.html">τεκμηρίωση</a> πριν να επικοινωνήσετε με την
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Για ερωτήσεις σχετικά με αυτή την τεκμηρίωση, στείλτε e-mail στην
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>