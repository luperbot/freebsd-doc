<?xml version="1.0" encoding="iso-8859-7" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-7" /><title>20.8. UFS Journaling Μέσω GEOM</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Εγχειρίδιο του FreeBSD" /><link rel="up" href="GEOM.html" title="Κεφάλαιο 20. GEOM: Διαχείριση Συστοιχιών Δίσκων" /><link rel="prev" href="geom-glabel.html" title="20.7. Δημιουργώντας Ετικέτες (Labels) στις Συσκευές Δίσκων" /><link rel="next" href="filesystems.html" title="Κεφάλαιο 21. Υποστήριξη Συστημάτων Αρχείων" /><link rel="copyright" href="legalnotice.html" title="Νομική Σημείωση" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">20.8. UFS Journaling Μέσω GEOM</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="geom-glabel.html">Προηγ</a> </td><th width="60%" align="center">Κεφάλαιο 20. GEOM: Διαχείριση Συστοιχιών Δίσκων</th><td width="20%" align="right"> <a accesskey="n" href="filesystems.html">Επόμενο</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="geom-gjournal"></a>20.8. UFS Journaling Μέσω GEOM</h2></div></div></div><a id="idp91731536" class="indexterm"></a><a id="idp91732304" class="indexterm"></a><p>Στην έκδοση 7.0 του FreeBSD υλοποιείται για πρώτη φορά η νέα (και από
      πολλούς αναμενόμενη) δυνατότητα για χρήση ημερολογίου (journal) στο
      σύστημα αρχείων.  Η υλοποίηση παρέχεται μέσω του
      υποσυστήματος <acronym class="acronym">GEOM</acronym> και μπορεί να ρυθμιστεί εύκολα
      μέσω του βοηθητικού προγράμματος <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gjournal&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gjournal</span>(8)</span></a>.</p><p>Τι είναι το journaling;  Το journaling αποθηκεύει σε ένα αρχείο
      καταγραφής (log, ημερολόγιο, ή απλώς journal) τις συναλλαγές του
      συστήματος αρχείων.  Παράδειγμα συναλλαγής είναι οι αλλαγές που
      απαιτούνται για μια πλήρη διαδικασία εγγραφής στο δίσκο.  Έτσι, στο
      log αποθηκεύονται οι αλλαγές στα μετα-δεδομένα (meta-data) και στα ίδια
      τα αρχεία, πριν γίνει η τελική (κανονική) αποθήκευση τους στο δίσκο.
      Το αρχείο καταγραφής μπορεί αργότερα να ξαναχρησιμοποιηθεί ώστε η
      συναλλαγή να γίνει από την αρχή, εξασφαλίζοντας με αυτό τον τρόπο ότι
      το σύστημα αρχείων θα παραμείνει σε σταθερή κατάσταση.</p><p>Πρόκειται ουσιαστικά για μια ακόμα μέθοδο προφύλαξης από απώλεια
      δεδομένων και ασυνέπειες στο σύστημα αρχείων.  Σε αντίθεση με τα
      Soft Updates τα οποία εντοπίζουν και υποχρεώνουν την άμεση εγγραφή
      των μετα-δεδομένων, και των στιγμιοτύπων (Snapshots) τα οποία είναι
      εικόνες του συστήματος αρχείων σε μια δεδομένη στιγμή, το log
      αποθηκεύεται σε χώρο που έχει εκχωρηθεί ειδικά για αυτό το
      σκοπό, και σε μερικές περιπτώσεις μπορεί να αποθηκεύεται σε εντελώς
      διαφορετικό δίσκο.</p><p>Σε αντίθεση με υλοποιήσεις journaling σε άλλα συστήματα αρχείων,
      η μέθοδος <code class="command">gjournal</code> βασίζεται σε blocks, και δεν
      υλοποιείται ως μέρος του συστήματος αρχείων, αλλά μόνο ως επέκταση του
      <acronym class="acronym">GEOM</acronym>.</p><p>Για ενεργοποίηση της υποστήριξης <code class="command">gjournal</code>, θα
      πρέπει να υπάρχει η παρακάτω επιλογή στον πυρήνα του FreeBSD.  Η επιλογή
      αυτή υπάρχει από προεπιλογή στην έκδοση 7.0 και όλες τις νεότερες
      εκδόσεις του FreeBSD.</p><pre class="programlisting">options	UFS_GJOURNAL</pre><p>Αν χρειάζεται να προσαρτώνται τόμοι με journaling κατά την εκκίνηση,
      θα πρέπει επίσης να φορτώνεται αυτόματα και το άρθρωμα πυρήνα
      <code class="filename">geom_journal.ko</code>.  Για το σκοπό αυτό, προσθέστε την
      παρακάτω γραμμή στο αρχείο <code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">geom_journal_load="YES"</pre><p>Εναλλακτικά, η λειτουργία αυτή μπορεί να ενσωματωθεί σε ένα
      προσαρμοσμένο πυρήνα, με την προσθήκη της παρακάτω γραμμής στο
      αντίστοιχο αρχείο ρυθμίσεων:</p><pre class="programlisting">options	GEOM_JOURNAL</pre><p>Η δημιουργία journal σε ένα ελεύθερο σύστημα αρχείων, μπορεί τώρα
      να γίνει με τα ακόλουθα βήματα, θεωρώντας ότι η συσκευή
      <code class="filename">da4</code> είναι ένας νέος δίσκος
      <acronym class="acronym">SCSI</acronym>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal load</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>gjournal label /dev/da4</code></strong></pre><p>Στο σημείο αυτό θα υπάρχει μια συσκευή
      <code class="filename">/dev/da4</code> καθώς και μια συσκευή
      <code class="filename">/dev/da4.journal</code>.  Στη συσκευή αυτή μπορείτε
      τώρα να δημιουργήσετε σύστημα αρχείων:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs -O 2 -J /dev/da4.journal</code></strong></pre><p>Η παραπάνω εντολή θα δημιουργήσει ένα σύστημα αρχείων
      <acronym class="acronym">UFS</acronym>2 στη
      συσκευή <code class="filename">/dev/da4.journal</code>, η οποία έχει
      ήδη υποστήριξη για journaling.</p><p>Μπορείτε να χρησιμοποιήσετε την εντολή <code class="command">mount</code>
      για να προσαρτήσετε την συσκευή στο επιθυμητό σημείο προσάρτησης, όπως
      φαίνεται παρακάτω:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/da4.journal /mnt</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Στην περίπτωση αρκετών slice, θα δημιουργηθεί ένα journal για κάθε
	επιμέρους slice.  Για παράδειγμα, αν υπάρχουν τα slices
	<code class="filename">ad4s1</code> και <code class="filename">ad4s2</code>
	τότε το <code class="command">gjournal</code> θα δημιουργήσει τις συσκευές
	<code class="filename">ad4s1.journal</code> και
	<code class="filename">ad4s2.journal</code>.</p></div><p>Για καλύτερη απόδοση, ίσως είναι επιθυμητή η τήρηση του
      journal σε διαφορετικό δίσκο.  Για τις περιπτώσεις αυτές, ο παροχέας
      ημερολογίου (η συσκευή δίσκου που θα περιέχει το journal) πρέπει
      να δίνεται ως παράμετρος στην εντολή, αμέσως μετά τη συσκευή δίσκου
      στην οποία θα ενεργοποιηθεί το journaling.  Μπορείτε επίσης να
      ενεργοποιήσετε το journaling σε υπάρχοντα συστήματα αρχείων
      χρησιμοποιώντας την εντολή <code class="command">tunefs</code>.  Ωστόσο, θα πρέπει
      να κρατήσετε αντίγραφο ασφαλείας των αρχείων σας, πριν επιχειρήσετε
      να κάνετε αλλαγές σε ένα υπάρχον σύστημα αρχείων.  Στις περισσότερες
      περιπτώσεις, η <code class="command">tunefs</code> θα αποτύχει αν δεν μπορέσει
      να δημιουργήσει το journal, αλλά αυτό δεν σας προστατεύει από απώλεια
      δεδομένων που μπορεί να προέλθει από κακή χρήση της
      <code class="command">tunefs</code>.</p><p>Είναι επίσης δυνατόν να χρησιμοποιηθεί journaling στον δίσκο
      εκκίνησης ενός συστήματος FreeBSD.  Διαβάστε το άρθρο <a class="link" href="../../../../doc/el_GR.ISO8859-7/articles/gjournal-desktop" target="_top">Υλοποίηση του UFS Journaling σε
	ένα Desktop Υπολογιστή</a> για λεπτομερείς οδηγίες.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="geom-glabel.html">Προηγ</a> </td><td width="20%" align="center"><a accesskey="u" href="GEOM.html">Πάνω</a></td><td width="40%" align="right"> <a accesskey="n" href="filesystems.html">Επόμενο</a></td></tr><tr><td width="40%" align="left" valign="top">20.7. Δημιουργώντας Ετικέτες (Labels) στις Συσκευές Δίσκων </td><td width="20%" align="center"><a accesskey="h" href="index.html">Αρχή</a></td><td width="40%" align="right" valign="top"> Κεφάλαιο 21. Υποστήριξη Συστημάτων Αρχείων</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Αυτό το κείμενο, και άλλα κείμενα, μπορεί να βρεθεί στο
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Για ερωτήσεις σχετικά με το FreeBSD, διαβάστε την
    <a href="http://www.FreeBSD.org/docs.html">τεκμηρίωση</a> πριν να επικοινωνήσετε με την
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Για ερωτήσεις σχετικά με αυτή την τεκμηρίωση, στείλτε e-mail στην
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>