<?xml version="1.0" encoding="iso-8859-7" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-7" /><title>9.5. Δημιουργία και Εγκατάσταση Προσαρμοσμένου Πυρήνα</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Εγχειρίδιο του FreeBSD" /><link rel="up" href="kernelconfig.html" title="Κεφάλαιο 9. Ρυθμίζοντας τον Πυρήνα του FreeBSD" /><link rel="prev" href="kernelconfig-modules.html" title="9.4. Προγράμματα Οδήγησης, Υποσυστήματα και Αρθρώματα (modules)" /><link rel="next" href="kernelconfig-config.html" title="9.6. Το Αρχείο Ρυθμίσεων" /><link rel="copyright" href="legalnotice.html" title="Νομική Σημείωση" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">9.5. Δημιουργία και Εγκατάσταση Προσαρμοσμένου Πυρήνα</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="kernelconfig-modules.html">Προηγ</a> </td><th width="60%" align="center">Κεφάλαιο 9. Ρυθμίζοντας τον Πυρήνα του FreeBSD</th><td width="20%" align="right"> <a accesskey="n" href="kernelconfig-config.html">Επόμενο</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-building"></a>9.5. Δημιουργία και Εγκατάσταση Προσαρμοσμένου Πυρήνα</h2></div></div></div><a id="idp75506000" class="indexterm"></a><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Χρειάζεται να έχετε εγκαταστήσει όλο τον πηγαίο κώδικα του
	FreeBSD για να μεταγλωττίσετε τον πυρήνα.</p></div><p>Αρχικά, θα κάνουμε μια γρήγορη παρουσίαση του καταλόγου στον οποίο
      γίνεται η μεταγλώττιση του πυρήνα. Όλοι οι κατάλογοι που θα αναφέρουμε
      βρίσκονται κάτω από τον κατάλογο <code class="filename">/usr/src/sys</code> ο
      οποίος είναι επίσης προσβάσιμος μέσω της διαδρομής
      <code class="filename">/sys</code>. Υπάρχει εδώ ένας αριθμός υποκαταλόγων ο
      οποίος αντιπροσωπεύει διαφορετικά τμήματα του πυρήνα, αλλά οι πλέον
      σημαντικοί για το σκοπό μας είναι οι
      <code class="filename">arch/conf</code>, όπου θα
      επεξεργαστείτε τις ρυθμίσεις για τον προσαρμοσμένο πυρήνα σας, και ο
      <code class="filename">compile</code>, που είναι ο χώρος εργασίας στον οποίο θα
      γίνει η μεταγλώττιση του. Ο <em class="replaceable"><code>arch</code></em>
      αντιπροσωπεύει ένα από τα <code class="filename">i386</code>,
      <code class="filename">amd64</code>,
      <code class="filename">ia64</code>, <code class="filename">powerpc</code>,
      <code class="filename">sparc64</code>, ή <code class="filename">pc98</code>
      (ένας εναλλακτικός τύπος PC, διαδεδομένος στην Ιαπωνία). Οτιδήποτε
      βρίσκεται μέσα στον συγκεκριμένο κατάλογο μιας αρχιτεκτονικής,
      σχετίζεται μόνο με την αρχιτεκτονική αυτή. Το υπόλοιπο του κώδικα,
      είναι ανεξάρτητο από την αρχιτεκτονική και κοινό σε κάθε πλατφόρμα όπου
      θα μπορούσε να μεταγλωττιστεί το FreeBSD. Παρατηρήστε τη λογική οργάνωση
      της δομής των καταλόγων, όπου κάθε υποστηριζόμενη συσκευή, σύστημα
      αρχείων και επιλογή βρίσκεται στο δικό της κατάλογο.</p><p>Στα παραδείγματα αυτού του κεφαλαίου υποθέτουμε ότι χρησιμοποιείτε
      την αρχιτεκτονική i386.  Αν χρησιμοποιείτε διαφορετική αρχιτεκτονική,
      θα χρειαστεί να αλλάξετε τα ονόματα των καταλόγων και διαδρομών ώστε
      να συμβαδίζουν με αυτή.</p><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Αν δεν υπάρχει ο κατάλογος
	<code class="filename">/usr/src/</code> στο σύστημα σας
	(ή αν είναι άδειος), τότε δεν έχετε
	εγκαταστήσει τον πηγαίο κώδικα. Ο ευκολότερος τρόπος για
        να εγκαταστήσετε τον πλήρη πηγαίο κώδικα, είναι να μέσω του
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csup&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csup</span>(1)</span></a> όπως περιγράφεται στο <a class="xref" href="synching.html" title="24.6. Συγχρονίζοντας τον Πηγαίο σας Κώδικα">Τμήμα 24.6, «Συγχρονίζοντας τον Πηγαίο σας Κώδικα»</a>.
	Θα πρέπει επίσης να δημιουργήσετε ένα συμβολικό δεσμό προς
	τον κατάλογο <code class="filename">/usr/src/sys/</code>:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s /usr/src/sys /sys</code></strong></pre></div><p>Έπειτα, μετακινηθείτε στον κατάλογο
      <code class="filename">arch/conf</code>
      και αντιγράψτε το αρχείο ρυθμίσεων <code class="filename">GENERIC</code> στο
      όνομα το οποίο θέλετε να δώσετε στο νέο σας πυρήνα. Για παράδειγμα:
    </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp GENERIC MYKERNEL</code></strong></pre><p>Κατά παράδοση, το όνομα αυτό γράφεται εξ' ολοκλήρου με κεφαλαία
      γράμματα και αν έχετε πολλά μηχανήματα FreeBSD με διαφορετικό υλικό,
      είναι καλή ιδέα να του δώσετε το όνομα του μηχανήματος. Για το
      παράδειγμα μας, θα το αποκαλούμε
      <code class="filename">MYKERNEL</code>.</p><div xmlns="" class="tip"><h3 class="admontitle">Υπόδειξη: </h3><p xmlns="http://www.w3.org/1999/xhtml">Δεν είναι γενικά καλή ιδέα να αποθηκεύσετε το αρχείο ρυθμίσεων σας
        απευθείας στον κατάλογο <code class="filename">/usr/src</code>. Αν
        αντιμετωπίσετε προβλήματα, ίσως μπείτε στον πειρασμό να διαγράψετε
        απλώς τον κατάλογο <code class="filename">/usr/src</code> και να ξεκινήσετε
        από την αρχή.  Συνήθως λίγα δευτερόλεπτα μετά από αυτό θα
        συνειδητοποιήσετε ότι έχετε επίσης διαγράψει το αρχείο ρυθμίσεων
        του πυρήνα σας. Επίσης, μην επεξεργάζεστε απευθείας το αρχείο
	<code class="filename">GENERIC</code>, καθώς μπορεί οι αλλαγές σας να χαθούν
        την επόμενη φορά που θα
	<a class="link" href="updating-upgrading.html" title="Κεφάλαιο 24. Ενημέρωση και Αναβάθμιση του FreeBSD">ανανεώσετε τον πηγαίο σας κώδικα</a>.
     </p><p xmlns="http://www.w3.org/1999/xhtml">Καλό θα είναι να αποθηκεύσετε το αρχείο ρυθμίσεων σε άλλο κατάλογο
        και να δημιουργήσετε ένα συμβολικό δεσμό προς το αρχείο, στον κατάλογο
	<code class="filename">i386</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Για παράδειγμα:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /root/kernels</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp GENERIC /root/kernels/MYKERNEL</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /root/kernels/MYKERNEL</code></strong></pre></div><p>Τώρα, τροποποιήστε το αρχείο
      <code class="filename">MYKERNEL</code> με τον
      επεξεργαστή κειμένου που προτιμάτε. Αν ξεκινάτε μόλις τώρα, πιθανόν ο
      μόνος διαθέσιμος επεξεργαστής κειμένου να είναι το
      <span class="application">vi</span>, ο οποίος είναι αρκετά πολύπλοκος για να
      τον εξηγήσουμε εδώ, αλλά καλύπτεται αρκετά καλά από πλήθος βιβλίων στην
      <a class="link" href="bibliography.html" title="Παράρτημα B. Βιβλιογραφία">βιβλιογραφία</a>.  Ωστόσο, το FreeBSD
      διαθέτει επίσης ένα ευκολότερο επεξεργαστή κειμένου, τον
      <span class="application">ee</span> ο οποίος είναι η κατάλληλη επιλογή αν
      είστε αρχάριος. Αλλάξτε κατά βούληση τα σχόλια στην αρχή του αρχείου
      ρυθμίσεων ώστε να αντανακλούν τις αλλαγές που έχετε κάνει και οι οποίες
      το διαχωρίζουν από το <code class="filename">GENERIC</code>.</p><a id="idp82456016" class="indexterm"></a><p>Αν έχετε δημιουργήσει πυρήνα στο <span class="trademark">SunOS</span>TM ή σε κάποιο άλλο
      λειτουργικό σύστημα τύπου BSD, το μεγαλύτερο μέρος αυτού του αρχείου
      θα σας φανεί γνωστό. Από την άλλη, αν έρχεστε από κάποιο άλλο
      λειτουργικό, όπως το DOS το αρχείο ρυθμίσεων
      <code class="filename">GENERIC</code> ίσως να σας είναι δύσκολο στην κατανόηση,
      για το λόγο αυτό ακολουθήστε αργά και προσεκτικά τις περιγραφές του
      τμήματος
      <a class="link" href="kernelconfig-config.html" title="9.6. Το Αρχείο Ρυθμίσεων">Αρχείο Ρυθμίσεων</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Αν <a class="link" href="updating-upgrading.html" title="Κεφάλαιο 24. Ενημέρωση και Αναβάθμιση του FreeBSD">συγχρονίσετε τον πηγαίο κώδικα</a>
	με τις τελευταίες αλλαγές του FreeBSD project, να διαβάσετε το αρχείο
        <code class="filename">/usr/src/UPDATING</code> πριν προχωρήσετε σε οποιοδήποτε
        βήμα αναβάθμισης. Το αρχείο αυτό περιγράφει πιθανά σημαντικά
        προβλήματα ή περιοχές που χρειάζονται ιδιαίτερη προσοχή όσο αφορά τον
        ανανεωμένο πηγαίο κώδικα. Το αρχείο
        <code class="filename">/usr/src/UPDATING</code> ταιριάζει πάντα με την έκδοση
        του πηγαίου κώδικα του FreeBSD που έχετε, και είναι για αυτό το λόγο
        πιο ενημερωμένο σε σχέση με ότι διαβάσετε στο παρόν βιβλίο.</p></div><p>Θα πρέπει τώρα να μεταγλωττίσετε τον πηγαίο κώδικα του πυρήνα.
      </p><div class="procedure"><a id="idp82460752"></a><div class="procedure-title">Διαδικασία 9.1. Μεταγλώττιση του Πυρήνα</div><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Χρειάζεται να έχετε εγκαταστήσει όλο τον πηγαίο κώδικα του
	  FreeBSD για να μεταγλωττίσετε τον πυρήνα.</p></div><ol class="procedure" type="1"><li class="step"><p>Μετακινηθείτε στον κατάλογο <code class="filename">/usr/src</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong></pre></li><li class="step"><p>Μεταγλωττίστε τον πυρήνα:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make buildkernel KERNCONF=MYKERNEL</code></strong></pre></li><li class="step"><p>Εγκαταστήστε το νέο πυρήνα:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make installkernel KERNCONF=MYKERNEL</code></strong></pre></li></ol></div><div xmlns="" class="tip"><h3 class="admontitle">Υπόδειξη: </h3><p xmlns="http://www.w3.org/1999/xhtml">Από προεπιλογή, όταν δημιουργείτε ένα προσαρμοσμένο πυρήνα,
        δημιουργούνται επίσης και <span class="emphasis"><em>όλα</em></span> τα modules
        (αρθρώματα) πυρήνα. Αν θέλετε να κάνετε πιο γρήγορη ανανέωση του
        πυρήνα ή να δημιουργήσετε μόνο συγκεκριμένα modules, θα πρέπει να
        τροποποιήσετε το αρχείο <code class="filename">/etc/make.conf</code> πριν
        ξεκινήσετε τη δημιουργία του πυρήνα:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">MODULES_OVERRIDE = linux acpi sound/sound sound/driver/ds1 ntfs</pre><p xmlns="http://www.w3.org/1999/xhtml">Στη μεταβλητή αυτή δίνετε μια λίστα των modules που θέλετε να
        δημιουργηθούν, αντί να δημιουργηθούν όλα.</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">WITHOUT_MODULES = linux acpi sound ntfs</pre><p xmlns="http://www.w3.org/1999/xhtml">Στη μεταβλητή αυτή δίνετε μια λίστα βασικών (top level) modules
	που θέλετε να παραλείψετε κατά τη διαδικασία δημιουργίας.  Για άλλες
	μεταβλητές που ίσως είναι χρήσιμες στη διαδικασία δημιουργίας πυρήνα,
	δείτε τη σελίδα manual του <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">make.conf</span>(5)</span></a>.</p></div><a id="idp82471760" class="indexterm"></a><p>Ο νέος πυρήνας θα αντιγραφεί στον κατάλογο
      <code class="filename">/boot/kernel</code> με το όνομα
      <code class="filename">/boot/kernel/kernel</code> ενώ ο παλιός πυρήνας θα
      μετακινηθεί στο <code class="filename">/boot/kernel.old/kernel</code>. Τερματίστε
      τώρα το σύστημα σας και επανεκκινήστε για να χρησιμοποιήσετε το νέο
      πυρήνα. Αν κάτι πάει στραβά, υπάρχουν κάποιες πληροφορίες για
      <a class="link" href="kernelconfig-trouble.html" title="9.7. Αν Κάτι Πάει Λάθος">Αντιμετώπιση Προβλημάτων</a> που
      ίσως σας φανούν χρήσιμες, στο τέλος αυτού του κεφαλαίου. Βεβαιωθείτε ότι
      διαβάσατε το τμήμα που εξηγεί πως να επαναφέρετε το σύστημα σας σε
      περίπτωση που ο νέος πυρήνας
      <a class="link" href="kernelconfig-trouble.html#kernelconfig-noboot">δεν εκκινεί</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Άλλα αρχεία που σχετίζονται με τη διαδικασία εκκίνησης, όπως ο
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> και οι ρυθμίσεις του, βρίσκονται στον κατάλογο
	<code class="filename">/boot</code>. Εξειδικευμένα modules ή modules τρίτων
        κατασκευαστών μπορούν να τοποθετηθούν στον κατάλογο
	<code class="filename">/boot/kernel</code>, αν και οι χρήστες
        θα πρέπει να γνωρίζουν ότι είναι σημαντικό τα modules να είναι σε
        συγχρονισμό με τον πυρήνα. Modules τα οποία δεν προορίζονται για
        εκτέλεση με τον τρέχοντα  πυρήνα, μπορούν να προκαλέσουν αστάθεια
        ή εσφαλμένη λειτουργία του συστήματος σας.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="kernelconfig-modules.html">Προηγ</a> </td><td width="20%" align="center"><a accesskey="u" href="kernelconfig.html">Πάνω</a></td><td width="40%" align="right"> <a accesskey="n" href="kernelconfig-config.html">Επόμενο</a></td></tr><tr><td width="40%" align="left" valign="top">9.4. Προγράμματα Οδήγησης, Υποσυστήματα και Αρθρώματα (modules) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Αρχή</a></td><td width="40%" align="right" valign="top"> 9.6. Το Αρχείο Ρυθμίσεων</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Αυτό το κείμενο, και άλλα κείμενα, μπορεί να βρεθεί στο
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Για ερωτήσεις σχετικά με το FreeBSD, διαβάστε την
    <a href="http://www.FreeBSD.org/docs.html">τεκμηρίωση</a> πριν να επικοινωνήσετε με την
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Για ερωτήσεις σχετικά με αυτή την τεκμηρίωση, στείλτε e-mail στην
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>