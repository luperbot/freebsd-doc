<?xml version="1.0" encoding="iso-8859-7" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-7" /><title>31.10. IPv6</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Εγχειρίδιο του FreeBSD" /><link rel="up" href="advanced-networking.html" title="Κεφάλαιο 31. Προχωρημένα Θέματα Δικτύωσης" /><link rel="prev" href="network-plip.html" title="31.9. Parallel Line IP (PLIP)" /><link rel="next" href="network-atm.html" title="31.11. Asynchronous Transfer Mode (ATM)" /><link rel="copyright" href="legalnotice.html" title="Νομική Σημείωση" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">31.10. IPv6</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-plip.html">Προηγ</a> </td><th width="60%" align="center">Κεφάλαιο 31. Προχωρημένα Θέματα Δικτύωσης</th><td width="20%" align="right"> <a accesskey="n" href="network-atm.html">Επόμενο</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ipv6"></a>31.10. IPv6</h2></div><div><span class="authorgroup">Originally Written by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Aaron</span> <span class="surname">Kaplan</span></span>. </span></div><div><span class="authorgroup">Restructured and Added by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div><div><span class="authorgroup">Extended by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Brad</span> <span class="surname">Davis</span></span>. </span></div></div></div><p>IPv6 (also known as IPng <span class="quote">«<span class="quote">IP next generation</span>»</span>) is
      the new version of the well known IP protocol (also known as
      <acronym class="acronym">IPv4</acronym>).  Like the other current *BSD systems,
      FreeBSD includes the KAME IPv6 reference implementation.
      So your FreeBSD system comes with all you will need to experiment with IPv6.
      This section focuses on getting IPv6 configured and running.</p><p>In the early 1990s, people became aware of the rapidly
      diminishing address space of IPv4.  Given the expansion rate of the
      Internet there were two major concerns:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Running out of addresses.  Today this is not so much of a concern
	  anymore since RFC1918 private address space
	  (<code class="systemitem">10.0.0.0/8</code>,
	  <code class="systemitem">172.16.0.0/12</code>, and
	  <code class="systemitem">192.168.0.0/16</code>)
	  and Network Address Translation (<acronym class="acronym">NAT</acronym>) are
	  being employed.</p></li><li class="listitem"><p>Router table entries were getting too large.  This is
	  still a concern today.</p></li></ul></div><p>IPv6 deals with these and many other issues:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>128 bit address space.  In other words theoretically there are
	  340,282,366,920,938,463,463,374,607,431,768,211,456 addresses
	  available.  This means there are approximately
	  6.67 * 10^27 IPv6 addresses per square meter on our planet.</p></li><li class="listitem"><p>Routers will only store network aggregation addresses in their routing
	  tables thus reducing the average space of a routing table to 8192
	  entries.</p></li></ul></div><p>There are also lots of other useful features of IPv6 such as:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Address autoconfiguration (<a class="link" href="http://www.ietf.org/rfc/rfc2462.txt" target="_top">RFC2462</a>)</p></li><li class="listitem"><p>Anycast addresses (<span class="quote">«<span class="quote">one-out-of many</span>»</span>)</p></li><li class="listitem"><p>Mandatory multicast addresses</p></li><li class="listitem"><p>IPsec (IP security)</p></li><li class="listitem"><p>Simplified header structure</p></li><li class="listitem"><p>Mobile <acronym class="acronym">IP</acronym></p></li><li class="listitem"><p>IPv6-to-IPv4 transition mechanisms</p></li></ul></div><p>For more information see:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>IPv6 overview at <a class="link" href="http://playground.sun.com/pub/ipng/html/ipng-main.html" target="_top">playground.sun.com</a></p></li><li class="listitem"><p><a class="link" href="http://www.kame.net" target="_top">KAME.net</a></p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp100998480"></a>31.10.1. Background on IPv6 Addresses</h3></div></div></div><p>There are different types of IPv6 addresses: Unicast, Anycast and
	Multicast.</p><p>Unicast addresses are the well known addresses.  A packet sent
	to a unicast address arrives exactly at the interface belonging to
	the address.</p><p>Anycast addresses are syntactically indistinguishable from unicast
	addresses but they address a group of interfaces.  The packet destined for
	an anycast address will arrive at the nearest (in router metric)
	interface.  Anycast addresses may only be used by routers.</p><p>Multicast addresses identify a group of interfaces.  A packet destined
	for a multicast address will arrive at all interfaces belonging to the
	multicast group.</p><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">The IPv4 broadcast address (usually <code class="systemitem">xxx.xxx.xxx.255</code>) is expressed
	  by multicast addresses in IPv6.</p></div><div class="table"><a id="idp101001808"></a><div class="table-title">Πίνακας 31.2. Reserved IPv6 addresses</div><div class="table-contents"><table summary="Reserved IPv6 addresses" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>IPv6 address</th><th>Prefixlength (Bits)</th><th>Description</th><th>Notes</th></tr></thead><tbody><tr><td><code class="systemitem">::</code></td><td>128 bits</td><td>unspecified</td><td>cf. <code class="systemitem">0.0.0.0</code> in
		IPv4</td></tr><tr><td><code class="systemitem">::1</code></td><td>128 bits</td><td>loopback address</td><td>cf. <code class="systemitem">127.0.0.1</code> in
		IPv4</td></tr><tr><td><code class="systemitem">::00:xx:xx:xx:xx</code></td><td>96 bits</td><td>embedded IPv4</td><td>The lower 32 bits are the IPv4 address.  Also
		called <span class="quote">«<span class="quote">IPv4 compatible IPv6
		address</span>»</span></td></tr><tr><td><code class="systemitem">::ff:xx:xx:xx:xx</code></td><td>96 bits</td><td>IPv4 mapped IPv6 address</td><td>The lower 32 bits are the IPv4 address.
		For hosts which do not support IPv6.</td></tr><tr><td><code class="systemitem">fe80::</code> - <code class="systemitem">feb::</code></td><td>10 bits</td><td>link-local</td><td>cf. loopback address in IPv4</td></tr><tr><td><code class="systemitem">fec0::</code> - <code class="systemitem">fef::</code></td><td>10 bits</td><td>site-local</td><td> </td></tr><tr><td><code class="systemitem">ff::</code></td><td>8 bits</td><td>multicast</td><td> </td></tr><tr><td><code class="systemitem">001</code> (base
		2)</td><td>3 bits</td><td>global unicast</td><td>All global unicast addresses are assigned from
		this pool.  The first 3 bits are
		<span class="quote">«<span class="quote">001</span>»</span>.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101033552"></a>31.10.2. Reading IPv6 Addresses</h3></div></div></div><p>The canonical form is represented as: <code class="systemitem">x:x:x:x:x:x:x:x</code>, each
	<span class="quote">«<span class="quote">x</span>»</span> being a 16 Bit hex value.  For example
	<code class="systemitem">FEBC:A574:382B:23C1:AA49:4592:4EFE:9982</code></p><p>Often an address will have long substrings of all zeros
	therefore one such substring per address can be abbreviated by <span class="quote">«<span class="quote">::</span>»</span>.
	Also up to three leading <span class="quote">«<span class="quote">0</span>»</span>s per hexquad can be omitted.
	For example <code class="systemitem">fe80::1</code>
	corresponds to the canonical form
	<code class="systemitem">fe80:0000:0000:0000:0000:0000:0000:0001</code>.</p><p>A third form is to write the last 32 Bit part in the
	well known (decimal) IPv4 style with dots <span class="quote">«<span class="quote">.</span>»</span>
	as separators.  For example
	<code class="systemitem">2002::10.0.0.1</code>
	corresponds to the (hexadecimal) canonical representation
	<code class="systemitem">2002:0000:0000:0000:0000:0000:0a00:0001</code>
	which in turn is equivalent to
	writing <code class="systemitem">2002::a00:1</code>.</p><p>By now the reader should be able to understand the following:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig</code></strong></pre><pre class="programlisting">rl0: flags=8943&lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500
         inet 10.0.0.10 netmask 0xffffff00 broadcast 10.0.0.255
         inet6 fe80::200:21ff:fe03:8e1%rl0 prefixlen 64 scopeid 0x1
         ether 00:00:21:03:08:e1
         media: Ethernet autoselect (100baseTX )
         status: active</pre><p><code class="systemitem">fe80::200:21ff:fe03:8e1%rl0</code>
	is an auto configured link-local address.  It is generated from the MAC
	address as part of the auto configuration.</p><p>For further information on the structure of IPv6 addresses
	see <a class="link" href="http://www.ietf.org/rfc/rfc3513.txt" target="_top">RFC3513</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101047248"></a>31.10.3. Getting Connected</h3></div></div></div><p>Currently there are four ways to connect to other IPv6 hosts and networks:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Getting an IPv6 network from your upstream provider.  Talk to your
	    Internet provider for instructions.</p></li><li class="listitem"><p>Tunnel via 6-to-4 (<a class="link" href="http://www.ietf.org/rfc/rfc3068.txt" target="_top">RFC3068</a>)</p></li><li class="listitem"><p>Use the <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/freenet6/pkg-descr">net/freenet6</a> port if you are on a dial-up connection.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101051984"></a>31.10.4. DNS in the IPv6 World</h3></div></div></div><p>There used to be two types of DNS records for IPv6.  The IETF
	has declared A6 records obsolete.  AAAA records are the standard
	now.</p><p>Using AAAA records is straightforward.  Assign your hostname to the new
	IPv6 address you just received by adding:</p><pre class="programlisting">MYHOSTNAME           AAAA    MYIPv6ADDR</pre><p>To your primary zone DNS file.  In case you do not serve your own
	<acronym class="acronym">DNS</acronym> zones ask your <acronym class="acronym">DNS</acronym> provider.
	Current versions of <span class="application">bind</span> (version 8.3 and 9)
	and <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/dns/djbdns/pkg-descr">dns/djbdns</a> (with the IPv6 patch)
	support AAAA records.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101056080"></a>31.10.5. Applying the needed changes to <code class="filename">/etc/rc.conf</code></h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101056976"></a>31.10.5.1. IPv6 Client Settings</h4></div></div></div><p>These settings will help you configure a machine that will be on
	  your LAN and act as a client, not a router.  To have <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtsol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtsol</span>(8)</span></a>
	  autoconfigure your interface on boot all you need to add is:</p><pre class="programlisting">ipv6_enable="YES"</pre><p>To statically assign an IP address such as <code class="systemitem">
	  2001:471:1f11:251:290:27ff:fee0:2093</code>, to your
	  <code class="filename">fxp0</code> interface, add:</p><pre class="programlisting">ipv6_ifconfig_fxp0="2001:471:1f11:251:290:27ff:fee0:2093"</pre><p>To assign a default router of
	  <code class="systemitem">2001:471:1f11:251::1</code>
	  add the following to <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">ipv6_defaultrouter="2001:471:1f11:251::1"</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101062608"></a>31.10.5.2. IPv6 Router/Gateway Settings</h4></div></div></div><p>This will help you take the directions that your tunnel provider has
	  given you and convert it into settings that will persist through reboots.
	  To restore your tunnel on startup use something like the following in
	  <code class="filename">/etc/rc.conf</code>:</p><p>List the Generic Tunneling interfaces that will be configured, for
	  example <code class="filename">gif0</code>:</p><pre class="programlisting">gif_interfaces="gif0"</pre><p>To configure the interface with a local endpoint of
	  <em class="replaceable"><code>MY_IPv4_ADDR</code></em> to a remote endpoint of
	  <em class="replaceable"><code>REMOTE_IPv4_ADDR</code></em>:</p><pre class="programlisting">gifconfig_gif0="<em class="replaceable"><code>MY_IPv4_ADDR REMOTE_IPv4_ADDR</code></em>"</pre><p>To apply the IPv6 address you have been assigned for use as your
	  IPv6 tunnel endpoint, add:</p><pre class="programlisting">ipv6_ifconfig_gif0="<em class="replaceable"><code>MY_ASSIGNED_IPv6_TUNNEL_ENDPOINT_ADDR</code></em>"</pre><p>Then all you have to do is set the default route for IPv6.  This is
	  the other side of the IPv6 tunnel:</p><pre class="programlisting">ipv6_defaultrouter="<em class="replaceable"><code>MY_IPv6_REMOTE_TUNNEL_ENDPOINT_ADDR</code></em>"</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101073744"></a>31.10.5.3. IPv6 Tunnel Settings</h4></div></div></div><p>If the server is to route IPv6 between the rest of your network
	  and the world, the following <code class="filename">/etc/rc.conf</code>
	  setting will also be needed:</p><pre class="programlisting">ipv6_gateway_enable="YES"</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101075792"></a>31.10.6. Router Advertisement and Host Auto Configuration</h3></div></div></div><p>This section will help you setup <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtadvd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtadvd</span>(8)</span></a> to advertise the
	IPv6 default route.</p><p>To enable <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtadvd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtadvd</span>(8)</span></a> you will need the following in your
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">rtadvd_enable="YES"</pre><p>It is important that you specify the interface on which to do
	IPv6 router solicitation.  For example to tell <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtadvd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtadvd</span>(8)</span></a> to use
	<code class="filename">fxp0</code>:</p><pre class="programlisting">rtadvd_interfaces="fxp0"</pre><p>Now we must create the configuration file,
	<code class="filename">/etc/rtadvd.conf</code>.  Here is an example:</p><pre class="programlisting">fxp0:\
	:addrs#1:addr="2001:471:1f11:246::":prefixlen#64:tc=ether:</pre><p>Replace <code class="filename">fxp0</code> with the interface you
	are going to be using.</p><p>Next, replace <code class="systemitem">2001:471:1f11:246::</code>
	with the prefix of your allocation.</p><p>If you are dedicated a <code class="systemitem">/64</code> subnet
	you will not need to change anything else.  Otherwise, you will need to
	change the <code class="literal">prefixlen#</code> to the correct value.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-plip.html">Προηγ</a> </td><td width="20%" align="center"><a accesskey="u" href="advanced-networking.html">Πάνω</a></td><td width="40%" align="right"> <a accesskey="n" href="network-atm.html">Επόμενο</a></td></tr><tr><td width="40%" align="left" valign="top">31.9. Parallel Line IP (PLIP) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Αρχή</a></td><td width="40%" align="right" valign="top"> 31.11. Asynchronous Transfer Mode (ATM)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Αυτό το κείμενο, και άλλα κείμενα, μπορεί να βρεθεί στο
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Για ερωτήσεις σχετικά με το FreeBSD, διαβάστε την
    <a href="http://www.FreeBSD.org/docs.html">τεκμηρίωση</a> πριν να επικοινωνήσετε με την
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Για ερωτήσεις σχετικά με αυτή την τεκμηρίωση, στείλτε e-mail στην
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>