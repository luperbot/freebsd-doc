<?xml version="1.0" encoding="iso-8859-7"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-7" /><title>Υλοποίηση του UFS Journaling σε ένα Desktop Υπολογιστή</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="description" content="Ένα σύστημα αρχείων που διαθέτει δυνατότητα journaling, χρησιμοποιεί ένα αρχείο καταγραφής (journal ή ημερολόγιο) στο οποίο γίνονται αρχικά οι εγγραφές πριν καταχωρηθούν στο κανονικό σύστημα αρχείων. Με τον τρόπο αυτό μπορεί να εξασφαλιστεί η ακεραιότητα του συστήματος αρχείων στην περίπτωση κατάρρευσης ή απότομης διακοπής της τροφοδοσίας του. Η χρήση του journaling διασφαλίζει την συνολική ακεραιότητα του συστήματος αρχείων, αλλά δεν μπορεί να διασφαλίσει ότι δεν θα έχουμε απώλεια δεδομένων σε μεμονωμένα αρχεία τα οποία ήταν ενδεχομένως σε χρήση την ώρα της κατάρρευσης. Ένα πλεονέκτημα του journaling είναι η ελαχιστοποίηση του χρόνου που απαιτείται για τον έλεγχο του συστήματος αρχείων σε περίπτωση κακού τερματισμού. Το σύστημα αρχείων UFS που χρησιμοποιείται από το FreeBSD δεν διαθέτει δικό του ενσωματωμένο journaling. Ωστόσο, το πλαίσιο λειτουργιών GEOM στο FreeBSD 7.X παρέχει ένα νέο journal class το οποίο δίνει αυτή τη δυνατότητα, και μάλιστα ανεξάρτητα από το σύστημα αρχείων που χρησιμοποιείται. Στο άρθρο αυτό εξετάζουμε πως μπορούμε να χρησιμοποιήσουμε το journaling σε ένα τυπικό desktop μηχάνημα για εργασία γραφείου." /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div xml:lang="el" class="article" lang="el"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69628112"></a>Υλοποίηση του UFS Journaling σε ένα Desktop Υπολογιστή</h1></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="author"><h3 class="author"><span class="firstname">Μανώλης</span> <span class="surname">Κιαγιάς</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a xmlns="" class="email" href="mailto:manolis@FreeBSD.org">manolis@FreeBSD.org</a>&gt;</code></p></div></div></div></div><div>Αναθεώρηση: <a href="https://svnweb.freebsd.org/changeset/doc/"><span class="svnref"></span></a></div><div><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">Πνευματικά Δικαιώματα © 2008 Μανώλης Κιαγιάς</p></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="trademarks"></a><p>Το FreeBSD είναι ένα κατοχυρωμένο εμπορικό
  σύμβολο του FreeBSD Foundation.</p><p>Πολλές από τις λέξεις ή φράσεις οι οποίες
  χρησιμοποιούνται από τους κατασκευαστές ή τους πωλητές τους για να
  διακρίνουν τα προϊόντα τους θεωρούνται εμπορικά σύμβολα.  Όπου αυτές
  εμφανίζονται σε αυτό το κείμενο και για όσες από αυτές γνωρίζει η Ομάδα
  Ανάπτυξης του FreeBSD ότι είναι πιθανόν να είναι εμπορικά σύμβολα, θα δείτε
  ένα από τα σύμβολα: <span class="quote">«<span class="quote">TM</span>»</span> ή <span class="quote">«<span class="quote">(R)</span>»</span>.</p></div></div><div>Τελευταία τροποποίηση στις  από .</div><div><div xmlns="http://www.w3.org/1999/xhtml" class="abstract"><div class="abstract-title">Περίληψη</div><p>Ένα σύστημα αρχείων που διαθέτει δυνατότητα journaling,
	χρησιμοποιεί ένα αρχείο καταγραφής (journal ή ημερολόγιο) στο οποίο
	γίνονται αρχικά οι εγγραφές πριν καταχωρηθούν στο κανονικό σύστημα
	αρχείων.  Με τον τρόπο αυτό μπορεί να εξασφαλιστεί η ακεραιότητα του
	συστήματος αρχείων στην περίπτωση κατάρρευσης ή απότομης διακοπής της
	τροφοδοσίας του.  Η χρήση του journaling διασφαλίζει την συνολική
	ακεραιότητα του συστήματος αρχείων, αλλά δεν μπορεί να διασφαλίσει
	ότι δεν θα έχουμε απώλεια δεδομένων σε μεμονωμένα αρχεία τα οποία
	ήταν ενδεχομένως σε χρήση την ώρα της κατάρρευσης.  Ένα πλεονέκτημα
	του journaling είναι η ελαχιστοποίηση του χρόνου που απαιτείται για
	τον έλεγχο του συστήματος αρχείων σε περίπτωση κακού τερματισμού.  Το
	σύστημα αρχείων UFS που χρησιμοποιείται από το FreeBSD δεν διαθέτει δικό
	του ενσωματωμένο journaling.  Ωστόσο, το πλαίσιο λειτουργιών GEOM στο
	FreeBSD 7.<em class="replaceable"><code>X</code></em> παρέχει ένα νέο journal
	class το οποίο δίνει αυτή τη δυνατότητα, και μάλιστα ανεξάρτητα από
	το σύστημα αρχείων που χρησιμοποιείται.  Στο άρθρο αυτό εξετάζουμε
	πως μπορούμε να χρησιμοποιήσουμε το journaling σε ένα τυπικό desktop
	μηχάνημα για εργασία γραφείου.</p></div></div></div><hr /></div><div class="toc"><div class="toc-title">Πίνακας Περιεχομένων</div><dl class="toc"><dt><span class="sect1"><a href="#introduction">1. Εισαγωγή</a></span></dt><dt><span class="sect1"><a href="#understanding-journaling">2. Κατανόηση του Journaling στο FreeBSD</a></span></dt><dt><span class="sect1"><a href="#reserve-space">3. Βήματα Κατά την Εγκατάσταση του FreeBSD</a></span></dt><dt><span class="sect1"><a href="#configure-journal">4. Ρύθμιση του Journaling</a></span></dt><dt><span class="sect1"><a href="#troubleshooting-gjournal">5. Αντιμετώπιση Προβλημάτων</a></span></dt><dt><span class="sect1"><a href="#further-reading">6. Επιπλέον Πληροφορίες</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="introduction"></a>1. Εισαγωγή</h2></div></div></div><p>Αν και οι περισσότεροι εξυπηρετητές που χρησιμοποιούνται σε
      περιβάλλοντα παραγωγής είναι καλά προστατευμένοι από μη-αναμενόμενους
      τερματισμούς, δεν συμβαίνει το ίδιο και με το συνηθισμένο desktop
      μηχάνημα το οποίο βρίσκεται στα χέρια του τελικού χρήστη.  Αυτό συνήθως
      δεν προστατεύεται από διακοπές ρεύματος, ενώ δεν είναι και οι λίγες οι
      περιπτώσεις που ο κακός τερματισμός οφείλεται σε λανθασμένο χειρισμό
      του χρήστη (κατά λάθος πίεση του reset κ.α.).  Στις περισσότερες από
      αυτές τις περιπτώσεις, τα Soft Updates που χρησιμοποιεί το σύστημα
      αρχείων UFS μπορούν να το προστατεύσουν αρκετά καλά, αν και μετά τον
      προβληματικό τερματισμό απαιτείται συνήθως έλεγχος του συστήματος
      αρχείων, ο οποίος ακόμα και όταν γίνεται στο παρασκήνιο, διαρκεί
      αρκετό χρόνο.  Σε σπάνιες περιπτώσεις, το σύστημα αρχείων μπορεί να
      υποστεί ζημιά η οποία να χρειάζεται χειροκίνητη επέμβαση για να
      διορθωθεί, ενώ είναι πιθανή και η απώλεια δεδομένων.</p><p>Η νέα δυνατότητα για journaling που παρέχεται από το GEOM μπορεί
      να βοηθήσει ιδιαίτερα στις παραπάνω περιπτώσεις, ελαχιστοποιώντας το
      χρόνο που απαιτείται για τον έλεγχο του συστήματος αρχείων και
      εξασφαλίζοντας ότι το σύστημα θα επανέλθει πολύ σύντομα σε σταθερή
      κατάσταση.</p><p>Το άρθρο αυτό περιγράφει μια διαδικασία για την υλοποίηση του UFS
      journaling σε ένα τυπικό desktop PC (στο οποίο χρησιμοποιείται ένας
      σκληρός δίσκος τόσο για το σύστημα όσο και για τα δεδομένα).  Θα πρέπει
      να ακολουθήσετε αυτές τις οδηγίες κατά τη διάρκεια μιας νέας
      εγκατάστασης του FreeBSD.  Τα βήματα είναι αρκετά απλά και δεν απαιτούν
      ιδιαίτερα πολύπλοκες εντολές.</p><p>Αφού διαβάσετε αυτό το άρθρο, θα ξέρετε:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Πως να δεσμεύσετε κάποιο χώρο στο δίσκο για το journaling κατά
	  τη διάρκεια μιας νέας εγκατάστασης του FreeBSD.</p></li><li class="listitem"><p>Πως να φορτώσετε και να ενεργοποιήσετε το άρθρωμα (module)
	  <code class="literal">geom_journal</code> (ή πως να ενσωματώσετε τη
	  λειτουργία του στον προσαρμοσμένο πυρήνα σας).</p></li><li class="listitem"><p>Πως να μετατρέψετε τα υπάρχοντα συστήματα αρχείων σας ώστε
	  να χρησιμοποιούν journaling, και τι παραμέτρους θα πρέπει να δώσετε
	  στο <code class="filename">/etc/fstab</code> ώστε να τα προσαρτήσετε.</p></li><li class="listitem"><p>Πως να ενεργοποιήσετε το journaling σε νέες (άδειες)
	  κατατμήσεις.</p></li><li class="listitem"><p>Πως να αντιμετωπίσετε προβλήματα που σχετίζονται με το
	  journaling.</p></li></ul></div><p>Πριν διαβάσετε αυτό το άρθρο, θα πρέπει:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Να κατανοείτε βασικές έννοιες του <span class="trademark">UNIX</span>(R) και του FreeBSD.</p></li><li class="listitem"><p>Να είστε εξοικειωμένος με τη διαδικασία εγκατάστασης του FreeBSD
	  και το βοηθητικό πρόγραμμα
	  <span class="application">sysinstall</span>.</p></li></ul></div><div xmlns="" class="warning"><h3 class="admontitle">Προειδοποίηση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Η διαδικασία που περιγράφεται εδώ, προορίζεται για χρήση σε νέες
	εγκαταστάσεις, όπου δεν υπάρχουν ακόμα αποθηκευμένα δεδομένα χρήστη.
	Αν και είναι δυνατόν να τροποποιήσετε και να επεκτείνετε τη
	διαδικασία αυτή σε μηχανήματα που βρίσκονται ήδη σε κανονική χρήση,
	θα πρέπει οπωσδήποτε να
	<span class="emphasis"><em>πάρετε αντίγραφα ασφαλείας</em></span> όλων των σημαντικών
	δεδομένων πριν επιχειρήσετε οποιαδήποτε αλλαγή.  Όταν κάνετε αλλαγές
	στα συστήματα αρχείων και στις κατατμήσεις των δίσκων σε τέτοιο
	επίπεδο, είναι πιθανόν να κάνετε λάθη τα οποία θα αποβούν μοιραία για
	τα δεδομένα σας.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="understanding-journaling"></a>2. Κατανόηση του Journaling στο FreeBSD</h2></div></div></div><p>Το journaling που παρέχεται από το GEOM στο
      FreeBSD 7.<em class="replaceable"><code>X</code></em> δεν
      είναι προσανατολισμένο σε κάποιο συγκεκριμένο σύστημα αρχείων (όπως για
      παράδειγμα συμβαίνει με το σύστημα αρχείων ext3 στο <span class="trademark">Linux</span>(R)) αλλά
      λειτουργεί σε επίπεδο block.  Αν και αυτό σημαίνει ότι μπορεί να
      χρησιμοποιηθεί σε διαφορετικά συστήματα αρχείων, για το
      FreeBSD 7.0-RELEASE, είναι δυνατή η χρήση του μόνο στο UFS2.</p><p>Οι λειτουργίες journaling παρέχονται φορτώνοντας το άρθρωμα
      <code class="filename">geom_journal.ko</code> στον πυρήνα (ή ενσωματώνοντας τη
      λειτουργία του σε ένα προσαρμοσμένο πυρήνα) και χρησιμοποιώντας την
      εντολή <code class="command">gjournal</code> για τη ρύθμιση των συστημάτων
      αρχείων.  Η χρήση του journaling είναι γενικά θεμιτή σε μεγάλα
      συστήματα αρχείων, όπως είναι το <code class="filename">/usr</code>.  Θα
      χρειαστεί ωστόσο να έχετε δεσμεύσει από πριν κάποιο ελεύθερο χώρο στο
      δίσκο.</p><p>Όταν γίνεται χρήση του journaling σε ένα σύστημα αρχείων, απαιτείται
      κάποιος ελεύθερος χώρος για να αποθηκεύονται τα δεδομένα του ημερολογίου
      καταγραφής (journal).  Ο χώρος του δίσκου που αποθηκεύονται τα
      πραγματικά δεδομένα αναφέρεται ως <span class="emphasis"><em>παροχέας δεδομένων (data
      provider)</em></span>, ενώ ο χώρος στον οποίο αποθηκεύεται το ημερολόγιο
      ονομάζεται <span class="emphasis"><em>παροχέας ημερολογίου (journal provider).</em></span>
      Σε περίπτωση που το journaling γίνεται σε σύστημα αρχείων το οποίο έχει
      ήδη δεδομένα, οι δύο παροχείς πρέπει να βρίσκονται σε διαφορετικές
      κατατμήσεις.  Σε περίπτωση χρήσης journaling σε νέα κατάτμηση, έχετε την
      επιλογή να χρησιμοποιήσετε τον ίδιο παροχέα και για τα δεδομένα και για
      το ημερολόγιο.  Σε κάθε περίπτωση, με τη χρήση της εντολής
      <code class="command">gjournal</code>, οι δύο παροχείς συνδυάζονται για να
      δημιουργήσουν το τελικό σύστημα αρχείων που υποστηρίζει journaling.
      Για παράδειγμα:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Θέλετε να χρησιμοποιήσετε journaling στο σύστημα αρχείων
	  <code class="filename">/usr</code>, το οποίο βρίσκεται στο
	  <code class="filename">/dev/ad0s1f</code> (το σύστημα
	  αρχείων περιέχει ήδη δεδομένα).</p></li><li class="listitem"><p>Έχετε κρατήσει κάποιο κενό χώρο στο δίσκο, σε μια κατάτμηση
	  στο <code class="filename">/dev/ad0s1g</code>.</p></li><li class="listitem"><p>Με την χρήση της εντολής <code class="command">gjournal</code>, θα
	  δημιουργηθεί μια νέα συσκευή, η
	  <code class="filename">/dev/ad0s1f.journal</code>, όπου
	  το <code class="filename">/dev/ad0s1f</code> θα είναι ο
	  παροχέας δεδομένων και το
	  <code class="filename">/dev/ad0s1g</code> θα είναι ο
	  παροχέας ημερολογίου.  Η νέα αυτή συσκευή θα χρησιμοποιείται πλέον
	  για όλες τις εργασίες που θα εκτελούνται στο σύστημα αρχείων.</p></li></ul></div><p>Ο χώρος στο δίσκο που απαιτείται για το ημερολόγιο εξαρτάται από
      τη χρήση του συστήματος αρχείων, και όχι από το μέγεθος του παροχέα
      δεδομένων.  Για παράδειγμα, σε ένα τυπικό μηχάνημα γραφείου, θα είναι
      αρκετό να χρησιμοποιήσετε 1 GB για τον παροχέα ημερολογίου του
      συστήματος αρχείων <code class="filename">/usr</code>, ενώ σε ένα μηχάνημα το
      οποίο χρησιμοποιείται σε εργασίες όπου οι εγγραφές στο δίσκο είναι πολύ
      συχνές και μεγάλες σε μέγεθος (π.χ. επεξεργασία video) θα χρειαστείτε
      περισσότερο χώρο.  Σε περίπτωση που ο χώρος που έχει δεσμευθεί για το
      ημερολόγιο εξαντληθεί πριν γίνει δυνατή η εγγραφή δεδομένων στο
      κανονικό σύστημα αρχείων, το σύστημα θα καταρρεύσει με kernel
      panic.</p><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Τα μεγέθη που προτείνονται εδώ για τον παροχέα ημερολογίου,
	είναι απίθανο να προκαλέσουν πρόβλημα σε τυπική χρήση γραφείου
	(περιήγηση στο διαδίκτυο, επεξεργασία κειμένου, αναπαραγωγή
	πολυμέσων).  Αν ωστόσο το είδος της εργασίας σας περιλαμβάνει έντονη
	χρήση του σκληρού δίσκου, μπορείτε να χρησιμοποιήσετε τον ακόλουθο
	κανόνα για τη μεγαλύτερη δυνατή αξιοπιστία: όλη η μνήμη RAM του
	συστήματος σας πρέπει να χωράει στο 30% του χώρου του ημερολογίου.
	Για παράδειγμα, αν το σύστημα σας έχει 1 GB RAM, θα πρέπει να
	δημιουργήσετε ημερολόγιο μεγέθους περίπου 3.3 GB.
	(Πολλαπλασιάστε το μέγεθος της RAM με το 3.3 για να βρείτε το μέγεθος
	του ημερολογίου.)</p></div><p>Για περισσότερες πληροφορίες σχετικά με το journaling, παρακαλούμε
      διαβάστε τη σελίδα manual του <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gjournal&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gjournal</span>(8)</span></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="reserve-space"></a>3. Βήματα Κατά την Εγκατάσταση του FreeBSD</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70133072"></a>3.1. Δέσμευση Χώρου στο Δίσκο για το Journaling</h3></div></div></div><p>Ένα τυπικό desktop μηχάνημα, έχει συνήθως ένα σκληρό δίσκο στον
	οποίο αποθηκεύονται τόσο το λειτουργικό όσο και τα δεδομένα του
	χρήστη.  Συνήθως, οι προεπιλεγμένες κατατμήσεις που δημιουργούνται
	από το <span class="application">sysinstall</span> είναι περίπου σωστές:
	Ένα desktop μηχάνημα δεν χρειάζεται μεγάλη κατάτμηση
	<code class="filename">/var</code>, ενώ το μεγαλύτερο μέρος του ελεύθερου
	χώρου αποδίδεται στο <code class="filename">/usr</code>, αφού στους
	υποκαταλόγους του αποθηκεύονται τα δεδομένα του χρήστη και γίνονται
	και οι εγκαταστάσεις του λογισμικού.</p><p>Χρησιμοποιώντας τις προεπιλεγμένες κατατμήσεις (αυτές που
	δημιουργεί ο επεξεργαστής <span class="application">Disklabel</span> όταν
	πιέσετε το <span class="keycap"><strong>A</strong></span>), δεν μένει καθόλου ελεύθερος χώρος.
	Ωστόσο κάθε κατάτμηση στην οποία θέλετε να χρησιμοποιήσετε
	journaling, χρειάζεται ακόμα μία για την αποθήκευση του ημερολογίου.
	Καθώς η κατάτμηση <code class="filename">/usr</code> είναι η μεγαλύτερη, το
	πλέον λογικό είναι να την μικρύνουμε ελαφρά ώστε να εξασφαλίσουμε το
	χώρο που απαιτείται για το journaling.</p><p>Στο παράδειγμα μας, χρησιμοποιείται ένας δίσκος μεγέθους
	80 GB.  Στην ακόλουθη εικόνα φαίνονται οι προεπιλεγμένες
	κατατμήσεις όπως δημιουργούνται από τον επεξεργαστή
	<span class="application">Disklabel</span> κατά την εγκατάσταση:</p><div class="mediaobject"><img src="disklabel1.png" /></div><p>Αν τα παραπάνω μεγέθη είναι περίπου τα επιθυμητά για την
	εγκατάσταση σας, είναι αρκετά εύκολο να ρυθμιστούν ώστε να γίνει
	δυνατή η χρήση του journaling.  Απλώς χρησιμοποιήστε τα
	πλήκτρα με τα βελάκια για να
	μετακινήσετε την μπάρα επιλογής στην κατάτμηση
	<code class="filename">/usr</code> και πιέστε το <span class="keycap"><strong>D</strong></span> για να
	την διαγράψετε.</p><p>Τώρα, μετακινήστε την μπάρα επιλογής στο όνομα του σκληρού δίσκου
	στο άνω μέρος της οθόνης, και πιέστε <span class="keycap"><strong>C</strong></span> για να
	δημιουργήσετε μια νέα κατάτμηση για το <code class="filename">/usr</code>.
	Η νέα αυτή κατάτμηση θα πρέπει να είναι μικρότερη κατά 1 GB
	(αν έχετε σκοπό να χρησιμοποιήσετε journaling μόνο στο
	<code class="filename">/usr</code>), ή κατά 2 GB (αν έχετε σκοπό να
	χρησιμοποιήσετε journaling τόσο στο <code class="filename">/usr</code> όσο και
	στο <code class="filename">/var</code>).  Στο διάλογο που θα εμφανιστεί,
	επιλέξτε να δημιουργήσετε σύστημα αρχείων (file system) και γράψτε
	<code class="filename">/usr</code> ως το σημείο προσάρτησης
	(mount point).</p><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Είναι αναγκαία η χρήση journaling στην κατάτμηση
	  <code class="filename">/var</code> partition; Φυσιολογικά, το journaling έχει
	  νόημα μόνο σε αρκετά μεγάλες κατατμήσεις.  Δεν πρόκειται ωστόσο να
	  δημιουργηθεί κάποιο πρόβλημα αν χρησιμοποιήσετε journaling στο
	  <code class="filename">/var</code>.  Αν η χρήση του συγκεκριμένου συστήματος
	  αρχείων είναι μικρή (το οποίο είναι και το πιθανότερο σε ένα
	  dekstop μηχάνημα) ίσως είναι καλή ιδέα να χρησιμοποιήσετε λιγότερο
	  χώρο στο δίσκο για το ημερολόγιο του.</p><p xmlns="http://www.w3.org/1999/xhtml">Στο παράδειγμα μας, θα ενεργοποιήσουμε το journaling τόσο στο
	  <code class="filename">/usr</code> όσο και στο <code class="filename">/var</code>.
	  Μπορείτε φυσικά να προσαρμόσετε αυτή τη διαδικασία σύμφωνα με τις
	  ανάγκες σας.</p></div><p>Για να απλοποιήσουμε, όσο είναι δυνατόν, τη διαδικασία, θα
	χρησιμοποιήσουμε το <span class="application">sysinstall</span> για να
	δημιουργήσουμε τις κατατμήσεις που απαιτούνται για το journaling.
	Ωστόσο, κατά τη διάρκεια της εγκατάστασης, το
	<span class="application">sysinstall</span> επιμένει να ρωτάει για σημεία
	προσάρτησης σε κάθε κατάτμηση που δημιουργείται.  Στο σημείο αυτό,
	δεν υπάρχουν σημεία προσάρτησης για τις κατατμήσεις μας, και στην
	πραγματικότητα <span class="emphasis"><em>δεν τα χρειαζόμαστε καν</em></span>.  Οι
	κατατμήσεις που χρησιμοποιούνται για τα ημερολόγια, δεν προσαρτώνται
	κάπου.</p><p>Για να αποφύγουμε αυτά τα προβλήματα με το
	<span class="application">sysinstall</span>, θα δημιουργήσουμε αυτές τις
	κατατμήσεις ως χώρο swap.  Στο swap δεν γίνεται ποτέ προσάρτηση,
	ενώ και το <span class="application">sysinstall</span> δεν έχει κανένα
	πρόβλημα να δημιουργήσει όσες τέτοιες κατατμήσεις χρειαζόμαστε.  Μετά
	την πρώτη εκκίνηση, θα πρέπει ωστόσο να επεξεργαστούμε το αρχείο
	<code class="filename">/etc/fstab</code> και να αφαιρέσουμε τις έξτρα
	καταχωρήσεις swap που δημιουργήθηκαν κατά την εγκατάσταση.</p><p>Για να δημιουργήσετε τους χώρους swap, χρησιμοποιήστε πάλι τα
	πλήκτρα με τα βελάκια για να
	μετακινήσετε την μπάρα επιλογής στο άνω μέρος της οθόνης του
	επεξεργαστή <span class="application">Disklabel</span>, έτσι ώστε να είναι
	επιλεγμένο το όνομα του σκληρού δίσκου.  Κατόπιν, πιέστε
	<span class="keycap"><strong>N</strong></span>, δώστε το επιθυμητό μέγεθος
	(<em class="replaceable"><code>1024M</code></em>), και επιλέξτε
	<span class="quote">«<span class="quote">swap space</span>»</span> από το μενού που εμφανίζεται.  Επαναλάβετε
	για κάθε ημερολόγιο που επιθυμείτε να δημιουργήσετε.  Στο παράδειγμα
	μας, δημιουργούμε δύο κατατμήσεις στις οποίες θα αποθηκεύονται τα
	ημερολόγια των <code class="filename">/usr</code> και
	<code class="filename">/var</code>.  Το τελικό αποτέλεσμα φαίνεται στην
	παρακάτω εικόνα:</p><div class="mediaobject"><img src="disklabel2.png" /></div><p>Μόλις ολοκληρώσετε τη δημιουργία των κατατμήσεων, σας συνιστούμε
	να σημειώσετε τα ονόματα τους και τα σημεία προσάρτησης για να τα
	έχετε πρόχειρα κατά τη φάση των ρυθμίσεων.  Με τον τρόπο αυτό θα
	αποφύγετε τυχόν λάθη που μπορεί να καταστρέψουν την εγκατάσταση σας.
	Ο παρακάτω πίνακας δείχνει τις σημειώσεις μας για το παράδειγμα
	μας:</p><div class="table"><a id="idp70204368"></a><div class="table-title">Πίνακας 1. Κατατμήσεις και Ημερολόγια</div><div class="table-contents"><table summary="Κατατμήσεις και Ημερολόγια" width="100%" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Κατάτμηση</th><th>Σημείο Προσάρτησης</th><th>Ημερολόγιο</th></tr></thead><tbody><tr><td>ad0s1d</td><td>/var</td><td>ad0s1h</td></tr><tr><td>ad0s1f</td><td>/usr</td><td>ad0s1g</td></tr></tbody></table></div></div><br class="table-break" /><p>Συνεχίστε την εγκατάσταση όπως συνήθως.  Σας συνιστούμε ωστόσο να
	μην εγκαταστήσετε εφαρμογές (πακέτα) μέχρι να ολοκληρώσετε τη
	διαδικασία του journaling.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="first-boot"></a>3.2. Πρώτη Εκκίνηση</h3></div></div></div><p>Το σύστημα σας θα ξεκινήσει φυσιολογικά, αλλά θα χρειαστεί να
	επεξεργαστείτε το <code class="filename">/etc/fstab</code> και να διαγράψετε
	τις καταχωρήσεις για τις κατατμήσεις swap που θα χρησιμοποιηθούν στα
	ημερολόγια.  Φυσιολογικά, η κατάτμηση που χρησιμοποιείται ως κανονικό
	swap τελειώνει με το γράμμα <span class="quote">«<span class="quote">b</span>»</span> (π.χ.  ad0s1b στο
	παράδειγμα μας).  Διαγράψτε όλες τις άλλες καταχωρήσεις για το swap
	και επανεκκινήστε το σύστημα σας, ώστε να σταματήσει το FreeBSD να τις
	χρησιμοποιεί.</p><p>Μόλις το σύστημα εκκινήσει ξανά, θα είμαστε έτοιμοι να ρυθμίσουμε
	το journaling.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configure-journal"></a>4. Ρύθμιση του Journaling</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="running-gjournal"></a>4.1. Εκτέλεση της Εντολής <code class="command">gjournal</code></h3></div></div></div><p>Έχοντας προετοιμάσει όλες τις απαραίτητες κατατμήσεις, είναι
	σχετικά απλό να ρυθμίσουμε το journaling.  Θα πρέπει να μεταβούμε σε
	κατάσταση ενός χρήστη, για το λόγο αυτό εισέλθετε στο σύστημα ως
	<code class="systemitem">root</code> και γράψτε:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown now</code></strong></pre><p>Πιέστε <span class="keycap"><strong>Enter</strong></span> για να βγείτε στο προεπιλεγμένο
	κέλυφος.  Θα πρέπει να αποπροσαρτήσουμε τις κατατμήσεις στις οποίες
	θα γίνει το journaling, στο παράδειγμα μας τις
	<code class="filename">/usr</code> και <code class="filename">/var</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umount /usr /var</code></strong></pre><p>Φορτώστε το άρθρωμα του πυρήνα που απαιτείται για το
	journaling:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal load</code></strong></pre><p>Χρησιμοποιήστε τώρα τις σημειώσεις σας για να καθορίσετε
	ποια κατάτμηση χρησιμοποιείται για κάθε ημερολόγιο.  Στο
	παράδειγμα μας, το <code class="filename">/usr</code> βρίσκεται στο
	<code class="filename">ad0s1f</code> και το ημερολόγιο του
	θα είναι στο <code class="filename">ad0s1g</code>, ενώ το
	<code class="filename">/var</code> είναι στο
	<code class="filename">ad0s1d</code> και το ημερολόγιο του
	θα είναι στο <code class="filename">ad0s1h</code>.  Θα
	χρειαστείτε τις παρακάτω εντολές:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal label ad0s1f ad0s1g</code></strong>

GEOM_JOURNAL: Journal 2948326772: ad0s1f contains data.
GEOM_JOURNAL: Journal 2948326772: ad0s1g contains journal.

<code class="prompt">#</code> <strong class="userinput"><code>gjournal label ad0s1d ad0s1h</code></strong>

GEOM_JOURNAL: Journal 3193218002: ad0s1d contains data.
GEOM_JOURNAL: Journal 3193218002: ad0s1h contains journal.</pre><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Αν ο τελευταίος τομέας κάποιας από τις κατατμήσεις είναι σε
	  χρήση, η εντολή <code class="command">gjournal</code> θα σας επιστρέψει ένα
	  μήνυμα λάθους.  Θα πρέπει να εκτελέσετε την εντολή χρησιμοποιώντας
	  την παράμετρο <code class="option">-f</code> με την οποία θα υποχρεώσετε την
	  επανεγγραφή του τομέα, π.χ.:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal label -f ad0s1d ad0s1h</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">Μια που πρόκειται για νέα εγκατάσταση, είναι μάλλον απίθανο
	  να προκαλέσετε κάποιο πρόβλημα.</p></div><p>Στο σημείο αυτό δημιουργούνται δύο νέες συσκευές, οι
	<code class="filename">ad0s1d.journal</code> και
	<code class="filename">ad0s1f.journal</code>.  Αυτές
	αντιπροσωπεύουν τις κατατμήσεις
	<code class="filename">/var</code> και <code class="filename">/usr</code>
	που θα πρέπει να προσαρτήσουμε.  Πριν τις προσαρτήσουμε ωστόσο,
	θα πρέπει να θέσουμε την επιλογή journal και να αναιρέσουμε την
	επιλογή Soft Updates:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tunefs -J enable -n disable ad0s1d.journal</code></strong>

tunefs: gjournal set
tunefs: soft updates cleared

<code class="prompt">#</code> <strong class="userinput"><code>tunefs -J enable -n disable ad0s1f.journal</code></strong>

tunefs: gjournal set
tunefs: soft updates cleared</pre><p>Προσαρτήστε τώρα χειροκίνητα τις νέες συσκευές στα αντίστοιχα
	σημεία προσάρτησης (σημειώστε ότι μπορούμε πλέον να χρησιμοποιήσουμε
	την επιλογή <code class="option">async</code> κατά την προσάρτηση):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -o async /dev/ad0s1d.journal /var</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -o async /dev/ad0s1f.journal /usr</code></strong></pre><p>Επεξεργαστείτε το αρχείο <code class="filename">/etc/fstab</code> και
	ανανεώστε τις καταχωρήσεις για τις κατατμήσεις
	<code class="filename">/usr</code> και <code class="filename">/var</code>:</p><pre class="programlisting">/dev/ad0s1f.journal     /usr            ufs     rw,async      2       2
/dev/ad0s1d.journal     /var            ufs     rw,async      2       2</pre><div xmlns="" class="warning"><h3 class="admontitle">Προειδοποίηση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Βεβαιωθείτε ότι οι παραπάνω καταχωρήσεις είναι σωστές,
	  διαφορετικά θα έχετε πρόβλημα να εκκινήσετε κανονικά στην επόμενη
	  επανεκκίνηση του συστήματος σας.</p></div><p>Τέλος, επεξεργαστείτε το αρχείο
	<code class="filename">/boot/loader.conf</code> και προσθέστε την ακόλουθη
	γραμμή ώστε να φορτώνεται το άρθρωμα <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gjournal&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gjournal</span>(8)</span></a> σε κάθε
	εκκίνηση:</p><pre class="programlisting">geom_journal_load="YES"</pre><p>Συγχαρητήρια! Το σύστημα σας είναι τώρα έτοιμο για journaling.
	Μπορείτε να γράψετε <strong class="userinput"><code>exit</code></strong> για να επιστρέψετε
	στην κανονική λειτουργία (πολλαπλών χρηστών) ή να επανεκκινήσετε το
	σύστημα σας (συνίσταται) για να ελέγξετε τις ρυθμίσεις σας.  Κατά την
	εκκίνηση, θα δείτε μηνύματα όπως το παρακάτω:</p><pre class="screen">ad0: 76293MB XEC XE800JD-00HBC0 08.02D08 at ata0-master SATA150
GEOM_JOURNAL: Journal 2948326772: ad0s1g contains journal.
GEOM_JOURNAL: Journal 3193218002: ad0s1h contains journal.
GEOM_JOURNAL: Journal 3193218002: ad0s1d contains data.
GEOM_JOURNAL: Journal ad0s1d clean.
GEOM_JOURNAL: Journal 2948326772: ad0s1f contains data.
GEOM_JOURNAL: Journal ad0s1f clean.</pre><p>Μετά από ένα προβληματικό τερματισμό θα δείτε μηνύματα όπως το
	παρακάτω:</p><pre class="screen">GEOM_JOURNAL: Journal ad0s1d consistent.</pre><p>Αυτό συνήθως σημαίνει ότι το <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gjournal&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gjournal</span>(8)</span></a> χρησιμοποίησε τις
	πληροφορίες του ημερολογίου για να επιστρέψει το σύστημα αρχείων
	σε σταθερή κατάσταση.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="gjournal-new"></a>4.2. Χρήση του Journaling σε Νέες Κατατμήσεις</h3></div></div></div><p>Αν και η παραπάνω διαδικασία είναι απαραίτητη για να
	χρησιμοποιήσετε journaling σε κατατμήσεις που έχουν ήδη δεδομένα, η
	αντίστοιχη διαδικασία για νέες κατατμήσεις είναι πιο απλή.  Στην
	περίπτωση αυτή, μπορεί να χρησιμοποιηθεί ο ίδιος παροχέας τόσο για
	τα δεδομένα όσο και για το ημερολόγιο.  Για παράδειγμα, υποθέστε ότι
	έχετε προσθέσει ένα νέο δίσκο και έχετε δημιουργήσει την κατάτμηση
	<code class="filename">/dev/ad1s1d</code>.  Η δημιουργία του
	ημερολογίου είναι αρκετά απλή και φαίνεται παρακάτω:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal label ad1s1d</code></strong></pre><p>Το προεπιλεγμένο μέγεθος του ημερολογίου είναι 1 GB.
	Μπορείτε ωστόσο να το ρυθμίσετε χρησιμοποιώντας την επιλογή
	<code class="option">-s</code>.  Μπορείτε να δώσετε τιμές σε bytes, ή να βάλετε
	μετά την τιμή ένα από τα γράμματα <code class="literal">K</code>,
	<code class="literal">M</code> ή <code class="literal">G</code> για να δηλώσετε
	Kilobytes, Megabytes ή Gigabytes αντίστοιχα.  Σημειώστε ότι η εντολή
	<code class="command">gjournal</code>, δεν θα σας επιτρέψει να δημιουργήσετε
	ημερολόγιο που να είναι ακατάλληλο λόγω μικρού μεγέθους.</p><p>Για παράδειγμα, για να δημιουργήσετε ένα ημερολόγιο μεγέθους
	2 GB, μπορείτε να χρησιμοποιήσετε την ακόλουθη εντολή:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal label -s 2G ad1s1d</code></strong></pre><p>Μπορείτε έπειτα να δημιουργήσετε ένα σύστημα αρχείων στη νέα σας
	κατάτμηση, και ταυτόχρονα να ενεργοποιήσετε το journaling,
	χρησιμοποιώντας την επιλογή <code class="option">-J</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs -J /dev/ad1s1d.journal</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="configure-kernel"></a>4.3. Ενσωμάτωση του Journaling σε Προσαρμοσμένο Πυρήνα</h3></div></div></div><p>Αν δεν θέλετε να φορτώσετε το <code class="literal">geom_journal</code> ως
	άρθρωμα, μπορείτε να ενσωματώσετε τις λειτουργίες του στον
	προσαρμοσμένο πυρήνα σας.  Επεξεργαστείτε το αρχείο ρυθμίσεων του
	πυρήνα, και βεβαιωθείτε ότι περιλαμβάνει τις ακόλουθες δύο
	γραμμές:</p><pre class="programlisting">options UFS_GJOURNAL # Σημείωση: η επιλογή αυτή υπάρχει στο GENERIC

options GEOM_JOURNAL # Θα πρέπει να προσθέσετε αυτή τη γραμμή</pre><p>Μεταγλωττίστε και επανεγκαταστήστε τον πυρήνα σας χρησιμοποιώντας
	τις σχετικές
	<a class="link" href="../../../../doc/el_GR.ISO8859-7/books/handbook/kernelconfig.html" target="_top">οδηγίες στο Εγχειρίδιο του FreeBSD.</a></p><p>Μην ξεχάσετε να αφαιρέσετε την αντίστοιχη καταχώρηση
	<span class="quote">«<span class="quote">load</span>»</span> από το αρχείο
	<code class="filename">/boot/loader.conf</code> αν την είχατε χρησιμοποιήσει
	προηγουμένως.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="troubleshooting-gjournal"></a>5. Αντιμετώπιση Προβλημάτων</h2></div></div></div><p>Το ακόλουθο τμήμα καλύπτει συχνές ερωτήσεις σχετικά με προβλήματα
      που μπορείτε να συναντήσετε στην υλοποίηση του jounaling.</p><div class="qandaset"><a id="idp70384976"></a><dl><dt>5.1. <a href="#idp70385872">Κατά τη διάρκεια έντονης χρήσης του δίσκου, το σύστημα μου
	    σταματάει με kernel panic.  Υπάρχει περίπτωση αυτό να σχετίζεται
	    με το journaling;</a></dt><dt>5.2. <a href="#idp70395856">Έκανα κάποιο λάθος στις ρυθμίσεις, και δεν μπορώ πλέον να
	    ξεκινήσω κανονικά το σύστημα μου.  Υπάρχει τρόπος να το
	    διορθώσω;</a></dt><dt>5.3. <a href="#idp70416336">Μπορώ να καταργήσω το journaling και να επιστρέψω στο
	    κανονικό σύστημα αρχείων με τα Soft Updates;</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp70385872"></a><a id="kernel-panic"></a><p><strong>5.1.</strong></p></td><td align="left" valign="top"><p>Κατά τη διάρκεια έντονης χρήσης του δίσκου, το σύστημα μου
	    σταματάει με kernel panic.  Υπάρχει περίπτωση αυτό να σχετίζεται
	    με το journaling;</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Είναι πιθανό το ημερολόγιο να γεμίζει πριν προλάβουν τα
	    προηγούμενα δεδομένα του να μεταφερθούν στο σύστημα αρχείων.  Θα
	    πρέπει να θυμάστε ότι το μέγεθος του ημερολογίου δεν εξαρτάται
	    από το μέγεθος του παροχέα δεδομένων, αλλά από το φόρτο εργασίας
	    του.  Αν η δραστηριότητα του δίσκου σας είναι υψηλή, θα
	    χρειαστείτε μεγαλύτερο μέγεθος για την κατάτμηση του
	    ημερολογίου.  Δείτε τη σχετική σημείωση στην ενότητα <a class="link" href="#understanding-journaling" title="2. Κατανόηση του Journaling στο FreeBSD">Κατανόηση του Journaling</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70395856"></a><a id="unable-boot"></a><p><strong>5.2.</strong></p></td><td align="left" valign="top"><p>Έκανα κάποιο λάθος στις ρυθμίσεις, και δεν μπορώ πλέον να
	    ξεκινήσω κανονικά το σύστημα μου.  Υπάρχει τρόπος να το
	    διορθώσω;</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Πιθανόν ξεχάσατε να προσθέσετε (ή έχετε κάνει λάθος) την
	    καταχώρηση στο <code class="filename">/boot/loader.conf</code>, ή ίσως
	    υπάρχει λάθος στο αρχείο <code class="filename">/etc/fstab</code>.  Τα
	    λάθη αυτά συνήθως διορθώνονται εύκολα.
	    Πιέστε <span class="keycap"><strong>Enter</strong></span> για να ξεκινήσετε το προεπιλεγμένο
	    κέλυφος λειτουργίας ενός χρήστη.  Μετά εντοπίστε την πηγή του
	    προβλήματος:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat /boot/loader.conf</code></strong></pre><p>Αν λείπει ή υπάρχει λάθος στην καταχώρηση
	    <code class="literal">geom_journal_load</code>, οι αντίστοιχες συσκευές
	    δεν δημιουργούνται καν.  Μπορείτε να φορτώσετε το άρθρωμα
	    χειροκίνητα, να προσαρτήσετε όλες τις κατατμήσεις, και να
	    συνεχίσετε με την κανονική εκκίνηση:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal load</code></strong>

GEOM_JOURNAL: Journal 2948326772: ad0s1g contains journal.
GEOM_JOURNAL: Journal 3193218002: ad0s1h contains journal.
GEOM_JOURNAL: Journal 3193218002: ad0s1d contains data.
GEOM_JOURNAL: Journal ad0s1d clean.
GEOM_JOURNAL: Journal 2948326772: ad0s1f contains data.
GEOM_JOURNAL: Journal ad0s1f clean.

<code class="prompt">#</code> <strong class="userinput"><code>mount -a</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong>
<span class="emphasis"><em>(η εκκίνηση συνεχίζεται)</em></span></pre><p>Αν ωστόσο η καταχώρηση αυτή είναι σωστή, ρίξτε μια ματιά
	    στο αρχείο <code class="filename">/etc/fstab</code>.  Το πιο πιθανό είναι
	    να βρείτε ότι κάποια καταχώρηση λείπει, ή είναι λάθος.
	    Στην περίπτωση αυτή, προσαρτήστε χειροκίνητα όλες τις κατατμήσεις
	    και συνεχίστε την εκκίνηση κανονικά.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp70416336"></a><a id="remove-journaling"></a><p><strong>5.3.</strong></p></td><td align="left" valign="top"><p>Μπορώ να καταργήσω το journaling και να επιστρέψω στο
	    κανονικό σύστημα αρχείων με τα Soft Updates;</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Βέβαια.  Χρησιμοποιήστε την ακόλουθη διαδικασία η οποία
	    αναιρεί τις αλλαγές.  Μπορείτε έπειτα να χρησιμοποιήσετε τις
	    κατατμήσεις των ημερολογίων για άλλο σκοπό, εφόσον το
	    επιθυμείτε.</p><p>Εισέλθετε ως <code class="systemitem">root</code> και μεταβείτε σε
	    κατάσταση ενός χρήστη:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown now</code></strong></pre><p>Αποπροσαρτήστε τις κατατμήσεις που χρησιμοποιούν
	    journaling:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umount /usr /var</code></strong></pre><p>Συγχρονίστε τα ημερολόγια:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal sync</code></strong></pre><p>Σταματήστε τους παροχείς ημερολογίου:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal stop ad0s1d.journal</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>gjournal stop ad0s1f.journal</code></strong></pre><p>Διαγράψτε τα metadata του journaling από όλες τις συσκευές
	    που χρησιμοποιήσατε:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal clear ad0s1d</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>gjournal clear ad0s1f</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>gjournal clear ad0s1g</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>gjournal clear ad0s1h</code></strong></pre><p>Αναιρέστε την επιλογή του journaling, και θέστε ξανά την
	    επιλογή για Soft Updates:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tunefs -J disable -n enable ad0s1d</code></strong>

tunefs: gjournal cleared
tunefs: soft updates set

<code class="prompt">#</code> <strong class="userinput"><code>tunefs-J disable -n enable ad0s1f</code></strong>

tunefs: gjournal cleared
tunefs: soft updates set</pre><p>Προσαρτήστε χειροκίνητα τις κανονικές κατατμήσεις:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -o rw /dev/ad0s1d  /var</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -o rw /dev/ad0s1f  /usr</code></strong></pre><p>Επεξεργαστείτε το <code class="filename">/etc/fstab</code> και
	    επαναφέρατε τις προηγούμενες ρυθμίσεις:</p><pre class="programlisting">/dev/ad0s1f     /usr            ufs     rw      2       2
/dev/ad0s1d     /var            ufs     rw      2       2</pre><p>Τέλος, επεξεργαστείτε το αρχείο
	    <code class="filename">/boot/loader.conf</code>, αφαιρέστε την καταχώρηση
	    που φορτώνει το άρθρωμα <code class="literal">geom_journal</code> και
	    επανεκκινήστε το σύστημα σας.</p></td></tr></tbody></table></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="further-reading"></a>6. Επιπλέον Πληροφορίες</h2></div></div></div><p>Το journaling είναι μια σχετικά νέα δυνατότητα του FreeBSD, και έτσι
      δεν είναι ακόμα καλά τεκμηριωμένη.  Ίσως όμως να βρείτε χρήσιμες
      πληροφορίες στις παρακάτω αναφορές:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Υπάρχει ένα <a class="link" href="../../../../doc/el_GR.ISO8859-7/books/handbook/geom-gjournal.html" target="_top">νέο τμήμα για το journaling</a>
	  στο Εγχειρίδιο του FreeBSD.</p></li><li class="listitem"><p><a class="link" href="http://lists.freebsd.org/pipermail/freebsd-current/2006-June/064043.html" target="_top">Αυτή η δημοσίευση</a> στη λίστα
	  <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">freebsd-current</a> από τον δημιουργό του <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gjournal&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gjournal</span>(8)</span></a>, Pawel Jakub Dawidek.</p></li><li class="listitem"><p><a class="link" href="http://lists.freebsd.org/pipermail/freebsd-questions/2008-April/173501.html" target="_top">Αυτή η δημοσίευση</a> στη λίστα
	  <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">freebsd-questions</a> από τον Ivan Voras.</p></li><li class="listitem"><p>Οι σελίδες manual του <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gjournal&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gjournal</span>(8)</span></a> και <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geom</span>(8)</span></a>.</p></li></ul></div></div></div></body></html>