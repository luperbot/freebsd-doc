<?xml version="1.0" encoding="iso-8859-7"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-7" /><title>Εισαγωγή στο NanoBSD</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="description" content="Το έγγραφο αυτό παρέχει πληροφορίες για τα εργαλεία του NanoBSD, τα οποία μπορούν να χρησιμοποιηθούν προκειμένου να δημιουργηθούν είδωλα του συστήματος FreeBSD για embedded εφαρμογές, κατάλληλες για χρήση από κάρτα Compact Flash (ή άλλο μέσο αποθήκευσης)." /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div xml:lang="el" class="article" lang="el"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69015376"></a>Εισαγωγή στο NanoBSD</h1></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Daniel</span> <span class="surname">Gerzo</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Κυριάκος</span> <span class="surname">Κεντρωτής</span></h3></div></div></div><div>Αναθεώρηση: <a href="https://svnweb.freebsd.org/changeset/doc/"><span class="svnref"></span></a></div><div><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">Πνευματικά Δικαιώματα © 2006, 2009 Η Ομάδα Τεκμηρίωσης του FreeBSD</p></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="trademarks"></a><p>Το FreeBSD είναι ένα κατοχυρωμένο εμπορικό
  σύμβολο του FreeBSD Foundation.</p><p>Πολλές από τις λέξεις ή φράσεις οι οποίες
  χρησιμοποιούνται από τους κατασκευαστές ή τους πωλητές τους για να
  διακρίνουν τα προϊόντα τους θεωρούνται εμπορικά σύμβολα.  Όπου αυτές
  εμφανίζονται σε αυτό το κείμενο και για όσες από αυτές γνωρίζει η Ομάδα
  Ανάπτυξης του FreeBSD ότι είναι πιθανόν να είναι εμπορικά σύμβολα, θα δείτε
  ένα από τα σύμβολα: <span class="quote">«<span class="quote">TM</span>»</span> ή <span class="quote">«<span class="quote">(R)</span>»</span>.</p></div></div><div>Τελευταία τροποποίηση στις  από .</div><div><div xmlns="http://www.w3.org/1999/xhtml" class="abstract"><div class="abstract-title">Περίληψη</div><p>Το έγγραφο αυτό παρέχει πληροφορίες για τα εργαλεία
	του <span class="application">NanoBSD</span>, τα οποία μπορούν να
	χρησιμοποιηθούν προκειμένου να δημιουργηθούν είδωλα του συστήματος
	FreeBSD για embedded εφαρμογές, κατάλληλες για χρήση από κάρτα Compact
	Flash (ή άλλο μέσο αποθήκευσης).</p></div></div></div><hr /></div><div class="toc"><div class="toc-title">Πίνακας Περιεχομένων</div><dl class="toc"><dt><span class="sect1"><a href="#intro">1. Εισαγωγή στο NanoBSD</a></span></dt><dt><span class="sect1"><a href="#howto">2. Ρύθμιση του NanoBSD</a></span></dt><dt><span class="index"><a href="#idp70412368">Ευρετήριο</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="intro"></a>1. Εισαγωγή στο NanoBSD</h2></div></div></div><a id="idp70022224" class="indexterm"></a><p>Το <span class="application">NanoBSD</span> είναι ένα εργαλείο το οποίο
      αναπτύσσεται ενεργά από τον Poul-Henning Kamp.  Δημιουργεί ένα εικονικό είδωλο του
      συστήματος FreeBSD για embedded εφαρμογές, ιδανικό για κάρτες Compact Flash
      (ή άλλο μέσο αποθήκευσης).</p><p>Μπορεί να χρησιμοποιηθεί για να φτιαχτούν εξειδικευμένες εικόνες,
      σχεδιασμένες για εύκολη εγκατάσταση και συντήρηση συστημάτων
      τύπου <span class="quote">«<span class="quote">computer appliance</span>»</span>.  Τα συστήματα τέτοιου είδους
      έχουν το υλικό και λογισμικό τους ενοποιημένα μέσα στο προϊόν.  Αυτό
      σημαίνει πως συχνά είναι προεγκατεστημένα όλα τα απαραίτητα προγράμματα.
      Η συσκευή συνδέεται σε ένα υπάρχον δίκτυο και μπορεί να λειτουργήσει
      (σχεδόν) αμέσως.</p><p>Τα βασικά χαρακτηριστικά του <span class="application">NanoBSD</span>
      είναι:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Τα ports και τα πακέτα λειτουργούν όπως στο FreeBSD -
	  οποιοδήποτε πρόγραμμα μπορεί να εγκατασταθεί και να χρησιμοποιηθεί
	  στο FreeBSD μπορεί να ενσωματωθεί και σε ένα
	  είδωλο <span class="application">NanoBSD</span> και να λειτουργήσει με τον
	  ίδιο τρόπο.</p></li><li class="listitem"><p>Δε υστερεί σε λειτουργικότητα - Αν είναι εφικτό να
	  γίνει κάτι με το FreeBSD, τότε είναι εφικτό να γίνει το ίδιο πράμα και
	  με το <span class="application">NanoBSD</span>, εκτός αν το συγκεκριμένο
	  χαρακτηριστικό έχει σκόπιμα αφαιρεθεί από το είδωλο
	  του <span class="application">NanoBSD</span>.</p></li><li class="listitem"><p>Το <span class="application">NanoBSD</span> τρέχει με το σύστημα σε
	  κατάσταση προστασίας από εγγραφή.  Μπορείτε ακόμα και να το
	  αποσυνδέσετε από το ρεύμα την ώρα που λειτουργεί.  Δεν είναι
	  αναγκαίο να εκτελεστεί το <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> μετά από μια άγαρμπη διακοπή
	  λειτουργίας του συστήματος.</p></li><li class="listitem"><p>Είναι εύκολο να δημιουργηθεί και να προσαρμοστεί ένα
	  είδωλο <span class="application">NanoBSD</span>.  Με τη χρήση ενός μόνο
	  σεναρίου φλοιού και ενός αρχείου διαμόρφωσης είναι εφικτή η δόμηση
	  προσαρμοσμένων ειδώλων που ικανοποιούν οποιαδήποτε ανάγκη.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="howto"></a>2. Ρύθμιση του NanoBSD</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="design"></a>2.1. Η Σχεδίαση του NanoBSD</h3></div></div></div><p>Αφού γραφτεί ένα είδωλο του <span class="application">NanoBSD</span> σε
	κάποιο αποθηκευτικό μέσο, μπορεί να χρησιμοποιηθεί για να ξεκινήσει
	ένα σύστημα FreeBSD.  Η προκαθορισμένη διαμόρφωση του μέσου εκκίνησης
	αποτελείται από τρία μέρη:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Δύο διαμερίσματα εκκίνησης: <code class="literal">code#1</code>
	    και <code class="literal">code#2</code>.</p></li><li class="listitem"><p>Το διαμέρισμα ρυθμίσεων, Αυτό μπορεί να προσαρτηθεί στον
	    κατάλογο <code class="filename">/cfg</code> την ώρα
	    λειτουργίας του <span class="application">NanoBSD</span>.</p></li></ul></div><p>Αυτά τα τρία διαμερίσματα κανονικά είναι προσαρτημένα μόνο για
	ανάγνωση.</p><p>Οι κατάλογοι <code class="filename">/etc</code>
	και <code class="filename">/var</code> είναι εικονικοί δίσκοι
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> (malloc).</p><p>Το διαμέρισμα ρυθμίσεων μπορεί να προσαρτηθεί στον
	κατάλογο <code class="filename">/cfg</code>.  Περιέχει αρχεία
	τα οποία αντιγράφονται στον
	κατάλογο <code class="filename">/etc</code>.  Κατά την
	εκκίνηση του συστήματος το διαμέρισμα ρυθμίσεων προσαρτάται προσωρινά
	μόνο για ανάγνωση και αντιγράφονται τα αρχεία του στον
	κατάλογο <code class="filename">/etc</code>.  Οπότε για να
	είναι κάποια αλλαγή ρυθμίσεων πιο <span class="quote">«<span class="quote">μόνιμη</span>»</span> και να ισχύει
	ακόμα και μετά από επανεκκίνηση του συστήματος, πρέπει να αντιγράφεται
	από τον κατάλογο <code class="filename">/etc</code> στο
	διαμέρισμα ρυθμίσεων, αφού αυτό προσαρτηθεί για γράψιμο στον
	κατάλογο <code class="filename">/cfg</code>.</p><div class="example"><a id="idp70096208"></a><div class="example-title">Παράδειγμα 1. Κάνοντας μόνιμες αλλαγές στο <code class="filename">/etc/resolv.conf</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vi /etc/resolv.conf</code></strong>
[...]
<code class="prompt">#</code> <strong class="userinput"><code>mount /cfg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp /etc/resolv.conf /cfg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>umount /cfg</code></strong></pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Το διαμέρισμα το οποίο περιέχει τον
	  κατάλογο <code class="filename">/cfg</code> πρέπει να
	  προσαρτάται μόνο κατά την εκκίνηση και όταν έχουν προτεραιότητα τα
	  αρχεία ρυθμίσεων
	  του <code class="filename">/cfg</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Δεν είναι καλή ιδέα να μένει μόνιμα προσαρτημένο το
	  διαμέρισμα <code class="filename">/cfg</code>.  Αν ένα
	  διαμέρισμα είναι προσαρτημένο για γράψιμο και το αποθηκευτικό μέσο
	  του <span class="application">NanoBSD</span> επιτρέπει περιορισμένο αριθμό
	  κύκλων εγγραφής (όπως π.χ. μερικές κάρτες CF), μπορεί να επηρεαστεί
	  αρνητικά το αποθηκευτιμό μέσο επειδή ο πυρήνας γράφει κάθε λίγο
	  στους δίσκους του συστήματος (syncer).</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70114768"></a>2.2. Δημιουργία Ενός Προσαρμοσμένου Συστήματος NanoBSD</h3></div></div></div><p>Το είδωλο του <span class="application">NanoBSD</span> δημιουργείται από
	ένα απλό σενάριο κονσόλας, το <code class="filename">nanobsd.sh</code>, το
	οποίο μπορεί να βρεθεί στον
	κατάλογο <code class="filename">/usr/src/tools/nanobsd</code>.
	Αυτό το σενάριο δημιουργεί ένα είδωλο δίσκου, το οποίο μπορεί να
	αντιγραφεί απευθείας σε κάποιο αποθηκευτικό μεσο χρησιμοποιώντας το
	πρόγραμμα <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a>.</p><p>Οι απαραίτητες εντολές προκειμένου να δημιουργηθεί ένα είδωλο
	του <span class="application">NanoBSD</span> είναι οι εξής:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/tools/tools/nanobsd</code></strong> <a id="nbsd-cd"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
<code class="prompt">#</code> <strong class="userinput"><code>sh nanobsd.sh</code></strong> <a id="nbsd-sh"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/obj/nanobsd.full</code></strong> <a id="nbsd-cd2"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
<code class="prompt">#</code> <strong class="userinput"><code>dd if=_.disk.full of=/dev/da0 bs=64k</code></strong> <a id="nbsd-dd"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#nbsd-cd"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Αλλαγή από τον τρέχοντα κατάλογο στον βασικό κατάλογο του
	    σεναρίου δημιουργίας
	    του <span class="application">NanoBSD</span>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#nbsd-sh"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Εκκίνηση της δημιουργίας του ειδώλου.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#nbsd-cd2"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Αλλαγή από τον τρέχοντα κατάλογο στον κατάλογο που περιέχει το
	    είδωλο του <span class="application">NanoBSD</span>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#nbsd-dd"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Αντιγραφή του <span class="application">NanoBSD</span> σε ένα μέσο
	    αποθήκευσης.</p></td></tr></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70174544"></a>2.3. Προσαρμόζοντας το είδωλο του NanoBSD</h3></div></div></div><p>Αυτό είναι πιθανότατα το πιο σημαντικό και πιο ενδιαφέρον
	χαρακτηριστικό του <span class="application">NanoBSD</span>.  Αυτό είναι και
	το μέρος της διαδικασίας ανάπτυξης του
	ειδώλου <span class="application">NanoBSD</span> για το οποίο θα ξοδέψετε
	ένα μεγάλο ποσοστό του χρόνου προετοιμασίας του ειδώλου.</p><p>Η ακόλουθη εντολή θα κάνει το <code class="filename">nanobsd.sh</code> να
	διαβάσει τις ρυθμίσεις του από το
	αρχείο <code class="filename">myconf.nano</code> που βρίσκεται στο τρέχοντα
	κατάλογο:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sh nanobsd.sh -c myconf.nano</code></strong></pre><p>Η προσαρμογή και παραμετροποίηση
	του <span class="application">NanoBSD</span> γίνεται συνήθως με δύο
	τρόπους:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Επιλογές διαμόρφωσης</p></li><li class="listitem"><p>Προσαρμοσμένες συναρτήσεις</p></li></ul></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70191440"></a>2.3.1. Επιλογές διαμόρφωσης</h4></div></div></div><p>Οι ρυθμίσεις του <span class="application">NanoBSD</span> μπορούν να
	  χρησιμοποιηθούν για να οριστούν προσαρμοσμένες επιλογές
	  μεταγλώττισης και εγκατάστασης του FreeBSD.  Αυτές οι επιλογές
	  επηρεάζουν τα στάδια <code class="buildtarget">buildworld</code>
	  και <code class="buildtarget">installworld</code>
	  του <span class="application">NanoBSD</span>, καθώς και άλλες επιλογές της
	  δημιουργίας του τελικού ειδώλου.  Με τις κατάλληλες ρυθμίσεις
	  το <span class="application">NanoBSD</span> μπορεί να μικρύνει αρκετά σε
	  μέγεθος· μπορεί να χωρέσει ένα πολύ μικρό υποσύνολο του βασικού FreeBSD
	  σε χώρο μικρότερο από 64MB.  Μπορείτε επίσης να χρησιμοποιήσετε τις
	  επιλογές του <span class="application">NanoBSD</span> για να δημιουργήσετε
	  ένα είδωλο που έχει μόνο τον πυρήνα και δυο-τρία αρχεία στο βασικό
	  σύστημα.</p><p>Το αρχείο ρυθμίσεων του <span class="application">NanoBSD</span>
	  περιέχει εντολές οι οποίες ορίζουν νέες τιμές για κάποια
	  προκαθορισμένη μεταβλητή ή επεκτείνουν τις υπάρχουσες ρυθμίσεις.  Οι
	  πιο σημαντικές μεταβλητές είναι οι εξής:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">NANO_NAME</code> - Το όνομα του
	      ειδώλου <span class="application">NanoBSD</span> που θα δημιουργηθεί
	      (χρησιμοποιείται για να φτιάξει τα ονόματα των κατάλογων
	      εργασίας).</p></li><li class="listitem"><p><code class="literal">NANO_SRC</code> - Η διαδρομή του δέντρου
	      πηγαίου κώδικα το οποίο θα χρησιμοποιηθεί για να μετγλωττιστεί
	      το είδωλο.</p></li><li class="listitem"><p><code class="literal">NANO_KERNEL</code> - Το όνομα του αρχείου
	      ρυθμίσεων πυρήνα το οποίο θα χρησιμοποιηθεί για να χτιστεί ο
	      πυρήνας του ειδώλου.</p></li><li class="listitem"><p><code class="literal">CONF_BUILD</code> - Επιλογές που περνούν
	      στο στάδιο <code class="buildtarget">buildworld</code> της μεταγλώττισης του
	      FreeBSD.</p></li><li class="listitem"><p><code class="literal">CONF_INSTALL</code> - Επιλογές που περνούν
	      στο στάδιο <code class="buildtarget">installworld</code> της προετοιμασίας του
	      ειδώλου.</p></li><li class="listitem"><p><code class="literal">CONF_WORLD</code> - Επιλογές που περνούν
	      και στα δύο στάδια της προετοιμασίας του ειδώλου, και
	      στο <code class="buildtarget">buildworld</code> και
	      στο <code class="buildtarget">installworld</code>.</p></li><li class="listitem"><p><code class="literal">FlashDevice</code> - Ορίζει τον τύπο
	      του μέσου αποθήκευσης που θα χρησιμοποιηθεί.  Για περισσότερες
	      λεπτομέρειες δείτε το
	      αρχείο <code class="filename">FlashDevise.sub</code>.</p></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70254032"></a>2.3.2. Προσαρμοσμένες Συναρτήσεις</h4></div></div></div><p>Στο αρχείο ρύθμισης του <span class="application">NanoBSD</span>
	  μπορεί να ρυθμιστεί σχεδόν κάθε λεπτομέρεια της προετοιμασίας του
	  ειδώλου και του τελικού ειδώλου το οποίο θα δημιουργηθεί.
	  Χρησιμοποιώντας μικρές συναρτήσεις φλοιού, μπορούμε να ρυθμίσουμε τα
	  πάντα.  Για παράδειγμα, μπορούμε να τρέξουμε δικές μας εντολές οι
	  οποίες παραμετροποιούν το τελικό είδωλο ως εξής:</p><pre class="programlisting">cust_foo () (
	echo "bar=topless" &gt; \
		${NANO_WORLDDIR}/etc/foo
)
customize_cmd cust_foo</pre><p>Ένα πιο χρήσιμο παράδειγμα συνάρτησης φλοιού, η οποία ρυθμίζει
	  κάποια παράμετρο του τελικού ειδώλου, είναι αυτό που ακολουθεί.  Η
	  συνάρτηση <code class="literal">cust_etc_size</code> αλλάζει την προεπιλεγμένη
	  τιμή μεγέθους του
	  καταλόγου <code class="filename">/etc</code> από 5MB σε
	  30MB:</p><pre class="programlisting">cust_etc_size () (
	cd ${NANO_WORLDDIR}/conf
	echo 30000 &gt; default/etc/md_size
)
customize_cmd cust_etc_size</pre><p>Το σενάριο φλοιού που δημιουργεί
	  το <span class="application">NanoBSD</span> έχει μερικές έτοιμες
	  συναρτήσεις φλοιού οι οποίες εκτελούν τέτοιες επιπλέον
	  ρυθμίσεις:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">cust_comconsole</code> - Απενεργοποιεί το
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a> στις κονσόλες VGA (οι
	      συσκευές <code class="filename">/dev/ttyv*</code>) και ενεργοποιεί την
	      χρήση της σειριακής θύρας COM1 ως κονσόλα συστήματος.</p></li><li class="listitem"><p><code class="literal">cust_allow_ssh_root</code> - Επιτρέπει την
	      είσοδο του χρήστη <code class="systemitem">root</code> μέσω του
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a>.</p></li><li class="listitem"><p><code class="literal">cust_install_files</code> - Εγκαθιστά
	      αρχεία από τον
	      κατάλογο <code class="filename">nanobsd/Files</code>.
	      Σε αυτό τον κατάλογο βρίσκονται μερικά χρήσιμα σενάρια φλοιού
	      για τη διαχείριση
	      ενός συστήματος <span class="application">NanoBSD</span>.</p></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70289232"></a>2.3.3. Προσθέτοντας Πακέτα</h4></div></div></div><p>Σε ένα είδωλο <span class="application">NanoBSD</span> μπορούν να
	  προστεθούν και έτοιμα πακέτα, που έχουν φτιαχτεί από πριν
	  χρησιμοποιώντας τη Συλλογή των Ports.  Μια συνάρτηση φλοιού μπορεί
	  να εγκαταστήσει έξτρα πακέτα την ώρα που προετοιμάζεται το είδωλο.
	  Για παράδειγμα, η παρακάτω συνάρτηση θα εγκαταστήσει στο είδωλο όλα
	  τα πακέτα που βρίσκονται στον
	  κατάλογο <code class="filename">/usr/src/tools/tools/nanobsd/packages</code>:</p><pre class="programlisting">install_packages () (
mkdir -p ${NANO_WORLDDIR}/packages
cp /usr/src/tools/tools/nanobsd/packages/* ${NANO_WORLDDIR}/packages
chroot ${NANO_WORLDDIR} sh -c 'cd packages; pkg_add -v *;cd ..;'
rm -rf ${NANO_WORLDDIR}/packages
)

customize_cmd install_packages</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70303184"></a>2.3.4. Παράδειγμα Αρχείου Ρυθμίσεων του NanoBSD</h4></div></div></div><p>Ένα πλήρες παράδειγμα αρχείου ρυθμίσεων για
	  το <span class="application">NanoBSD</span>, με διάφορες ρυθμίσεις για τη
	  μεταγλώττιση του FreeBSD και την προετοιμασία του τελικού ειδώλου,
	  μπορεί να μοιάζει κάπως έτσι:</p><pre class="programlisting">NANO_NAME=custom
NANO_SRC=/usr/src
NANO_KERNEL=MYKERNEL
NANO_IMAGES=2

CONF_BUILD='
NO_KLDLOAD=YES
NO_NETGRAPH=YES
NO_PAM=YES
'

CONF_INSTALL='
NO_ACPI=YES
NO_BLUETOOTH=YES
NO_CVS=YES
NO_FORTRAN=YES
NO_HTML=YES
NO_LPR=YES
NO_MAN=YES
NO_SENDMAIL=YES
NO_SHAREDOCS=YES
NO_EXAMPLES=YES
NO_INSTALLLIB=YES
NO_CALENDAR=YES
NO_MISC=YES
NO_SHARE=YES
'

CONF_WORLD='
NO_BIND=YES
NO_MODULES=YES
NO_KERBEROS=YES
NO_GAMES=YES
NO_RESCUE=YES
NO_LOCALES=YES
NO_SYSCONS=YES
NO_INFO=YES
'

FlashDevice SanDisk 1G

cust_nobeastie() (
	touch ${NANO_WORLDDIR}/boot/loader.conf
	echo "beastie_disable=\"YES\"" &gt;&gt; ${NANO_WORLDDIR}/boot/loader.conf
)

customize_cmd cust_comconsole
customize_cmd cust_install_files
customize_cmd cust_allow_ssh_root
customize_cmd cust_nobeastie</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70309200"></a>2.4. Ενημερώνοντας το NanoBSD</h3></div></div></div><p>Η διαδικασία ενημέρωσης του <span class="application">NanoBSD</span>
	είναι σχετικά απλή:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Δημιουργία ενός νέου
	    ειδώλου <span class="application">NanoBSD</span>, με το συνηθισμένο
	    τρόπο.</p></li><li class="step"><p>Ανέβασμα του νέου ειδώλου σε μια αχρησιμοποίητη κατάτμηση μιας
	    συσκευής που τρέχει <span class="application">NanoBSD</span>.</p><p>Η πιο σημαντική διαφορά αυτού του σημείου από την αρχική
	    εγκατάσταση του <span class="application">NanoBSD</span> είναι ότι τώρα
	    αντί του αρχείου <code class="filename">_.disk.full</code> (το οποίο
	    περιέχει το είδωλο ενός ολόκληρου δίσκου), εγκαταστάθηκε το αρχείο
	    <code class="filename">_.disk.image</code> (το οποίο περιέχει το είδωλο
	    μιας μόνο κατάτμησης του δίσκου).</p></li><li class="step"><p>Κλείσιμο και επανεκκίνηση του συστήματος από την νέα
	    εγκατεστημένη κατάτμηση.</p></li><li class="step"><p>Αν όλα πάνε καλά, η αναβάθμιση τελείωσε.</p></li><li class="step"><p>Αν οτιδήποτε πάει στραβά, επανεκκινήστε τη συσκευή από την
	    προηγούμενη κατάτμηση (η οποία περιέχει το παλιό είδωλο, που
	    λειτουργεί σωστά).  Έτσι μπορείτε να επαναφέρετε άμεσα το σύστημα
	    σε λειτουργική κατάσταση.  Διορθώστε οποιαδήποτε προβλήματα έχει
	    το νέο είδωλο, και επαναλάβετε την διαδικασία.</p></li></ol></div><p>Για να εγκατασταθεί το νέο είδωλο σε ένα
	σύστημα <span class="application">NanoBSD</span>, το οποίο ήδη βρίσκεται σε
	λειτουργία, μπορεί να χρησιμοποιηθεί είτε το
	σενάριο <code class="filename">updatep1</code> είτε
	το <code class="filename">updatep2</code>.  Αυτά τα δύο σενάρια φλοιού
	βρίσκονται στον
	κατάλογο <code class="filename">/root</code>.</p><p>Ανάλογα με τις υπηρεσίες του συστήματος στο οποίο δημιουργείται
	ένα είδωλο <span class="application">NanoBSD</span>, μπορεί να μεταφερθεί
	ένα νέο είδωλο στο τελικό σύστημα με διάφορους τρόπους:</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70348752"></a>2.4.1. Χρησιμοποιώντας το <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ftp</span>(1)</span></a></h4></div></div></div><p>Αν σας ενδιαφέρει η καλή ταχύτητα μεταφοράς, χρησιμοποιήστε
	  το <acronym class="acronym">FTP</acronym> για τη μεταφορά του ειδώλου:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ftp myhost
get _.disk.image "| sh updatep1"</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70356560"></a>2.4.2. Χρησιμοποιώντας το <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a></h4></div></div></div><p>Αν σας ενδιαφέρει η μεταφορά του ειδώλου να γίνει με ασφαλή
	  τρόπο και δεν έχετε αφαιρέσει από το αρχικό είδωλο το <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a>,
	  προτιμήστε τη μεταφορά μέσω <acronym class="acronym">SSH</acronym>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ssh myhost cat _.disk.image.gz | zcat | sh updatep1</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70374864"></a>2.4.3. Χρησιμοποιώντας το <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">nc</span>(1)</span></a></h4></div></div></div><p>Αν το σύστημα στο οποίο έχει δημιουργηθεί το νέο είδωλο
	  του <span class="application">NanoBSD</span> δεν τρέχει ούτε <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ftpd</span>(8)</span></a>
	  ούτε <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a>, μπορείτε να χρησιμοποιήσετε άλλα εργαλεία για τη
	  μεταφορά, όπως το <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">nc</span>(1)</span></a>:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Πρώτα ανοίξτε ένα εξυπηρετητή <acronym class="acronym">TCP</acronym> στο
	      σύστημα το οποίο θα παρέχει το νέο είδωλο, και ορίστε το νέο
	      είδωλο ως είσοδο για τη μεταφορά που θα γίνει αργότερα:</p><pre class="screen">myhost<code class="prompt">#</code> <strong class="userinput"><code>nc -l 2222 &lt; _.disk.image</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Πριν από αυτό βεβαιωθείτε ότι η θύρα που χρησιμοποιείτε
		για τον εξυπηρετητή μπορεί να δεχθεί εισερχόμενες συνδέσεις
		από το σύστημα <span class="application">NanoBSD</span> προς το
		σύστημα του εξυπηρετητή, και δεν εμποδίζεται, για παράδειγμα,
		από κάποιο τείχος προστασίας (<span class="quote">«<span class="quote">firewall</span>»</span>).</p></div></li><li class="step"><p>Συνδεθείτε από το <span class="application">NanoBSD</span> στον
	      εξυπηρετητή, ο οποίος είναι ήδη έτοιμος να παρέχει το νέο
	      είδωλο, και τροφοδοτείστε το σενάριο
	      φλοιού <code class="filename">updatep1</code> με την έξοδο του εργαλείου
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">nc</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>nc myhost 2222 | sh updatep1</code></strong></pre></li></ol></div></div></div></div><div class="index"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70412368"></a>Ευρετήριο</h2></div></div></div><div class="index"><div class="indexdiv"><h3>N</h3><dl><dt>NanoBSD, <a class="indexterm" href="#intro">Εισαγωγή στο NanoBSD</a></dt></dl></div></div></div></div></body></html>