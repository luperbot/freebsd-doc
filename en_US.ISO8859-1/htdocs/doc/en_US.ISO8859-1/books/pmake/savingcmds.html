<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>3.3. Saving Commands</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="PMake &#8212; A Tutorial" /><link rel="up" href="shortcuts.html" title="Chapter 3. Short-cuts and Other Nice Things" /><link rel="prev" href="including.html" title="3.2. Including Other Makefiles" /><link rel="next" href="targetattr.html" title="3.4. Target Attributes" /><link rel="copyright" href="legalnotice.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.3. Saving Commands</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="including.html">Prev</a> </td><th width="60%" align="center">Chapter 3. Short-cuts and Other Nice Things</th><td width="20%" align="right"> <a accesskey="n" href="targetattr.html">Next</a></td></tr></table><hr /></div><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="savingcmds"></a>3.3. Saving Commands</h2></div></div></div><p>There may come a time when you will want to save certain
      commands to be executed when everything else is done.  For
      instance:  you are making several different libraries at one
      time and you want to create the members in parallel.  Problem is,
      <span class="application">ranlib</span> is another one of those
      programs that can not be run more than once in the same directory
      at the same time (each one creates a file called
      <code class="filename">__.SYMDEF</code> into which it stuffs information
      for the linker to use.  Two of them running at once will
      overwrite each other's file and the result will be garbage for
      both parties).  You might want a way to save the ranlib
      commands til the end so they can be run one after the other,
      thus keeping them from trashing each other's file.
      <span class="application">PMake</span> allows you to do this by
      inserting an ellipsis (<span class="quote">&#8220;<span class="quote">...</span>&#8221;</span>) as a command between
      commands to be run at once and those to be run later.</p><p>So for the <span class="application">ranlib</span> case above,
      you might do this:</p><pre class="programlisting">lib1.a          : $(LIB1OBJS)
	rm -f $(.TARGET)
	ar cr $(.TARGET) $(.ALLSRC)
	...
	ranlib $(.TARGET)

lib2.a          : $(LIB2OBJS)
	rm -f $(.TARGET)
	ar cr $(.TARGET) $(.ALLSRC)
	...
	ranlib $(.TARGET)</pre><p>This would save both</p><pre class="programlisting">ranlib $(.TARGET)</pre><p>commands until the end, when they would run one after the
      other (using the correct value for the
      <code class="varname">.TARGET</code> variable, of course).</p><p>Commands saved in this manner are only executed if
      <span class="application">PMake</span> manages to re-create
      everything without an error.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="including.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="shortcuts.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="targetattr.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3.2. Including Other Makefiles </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 3.4. Target Attributes</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>