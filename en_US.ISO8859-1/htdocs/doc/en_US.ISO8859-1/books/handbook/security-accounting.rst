=========================
14.12.?Process Accounting
=========================

.. raw:: html

   <div class="navheader">

14.12.?Process Accounting
`Prev <security-advisories.html>`__?
Chapter?14.?Security
?\ `Next <security-resourcelimits.html>`__

--------------

.. raw:: html

   </div>

.. raw:: html

   <div class="sect1">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

14.12.?Process Accounting
-------------------------

.. raw:: html

   </div>

.. raw:: html

   <div>

Contributed by Tom Rhodes.

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

Process accounting is a security method in which an administrator may
keep track of system resources used and their allocation among users,
provide for system monitoring, and minimally track a user's commands.

Process accounting has both positive and negative points. One of the
positives is that an intrusion may be narrowed down to the point of
entry. A negative is the amount of logs generated by process accounting,
and the disk space they may require. This section walks an administrator
through the basics of process accounting.

.. raw:: html

   <div class="note" xmlns="">

Note:
~~~~~

If more fine-grained accounting is needed, refer to `Chapter?17,
*Security Event Auditing* <audit.html>`__.

.. raw:: html

   </div>

.. raw:: html

   <div class="sect2">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

14.12.1.?Enabling and Utilizing Process Accounting
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

Before using process accounting, it must be enabled using the following
commands:

.. code:: screen

    # touch /var/account/acct
    # chmod 600 /var/account/acct
    # accton /var/account/acct
    # echo 'accounting_enable="YES"' >> /etc/rc.conf

Once enabled, accounting will begin to track information such as CPU
statistics and executed commands. All accounting logs are in a non-human
readable format which can be viewed using ``sa``. If issued without any
options, ``sa`` prints information relating to the number of per-user
calls, the total elapsed time in minutes, total CPU and user time in
minutes, and the average number of I/O operations. Refer to
`sa(8) <http://www.FreeBSD.org/cgi/man.cgi?query=sa&sektion=8>`__ for
the list of available options which control the output.

To display the commands issued by users, use ``lastcomm``. For example,
this command prints out all usage of ``ls`` by ``trhodes`` on the
``ttyp1`` terminal:

.. code:: screen

    # lastcomm ls trhodes ttyp1

Many other useful options exist and are explained in
`lastcomm(1) <http://www.FreeBSD.org/cgi/man.cgi?query=lastcomm&sektion=1>`__,
`acct(5) <http://www.FreeBSD.org/cgi/man.cgi?query=acct&sektion=5>`__,
and `sa(8) <http://www.FreeBSD.org/cgi/man.cgi?query=sa&sektion=8>`__.

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   <div class="navfooter">

--------------

+----------------------------------------+--------------------------+----------------------------------------------+
| `Prev <security-advisories.html>`__?   | `Up <security.html>`__   | ?\ `Next <security-resourcelimits.html>`__   |
+----------------------------------------+--------------------------+----------------------------------------------+
| 14.11.?FreeBSD Security Advisories?    | `Home <index.html>`__    | ?14.13.?Resource Limits                      |
+----------------------------------------+--------------------------+----------------------------------------------+

.. raw:: html

   </div>

All FreeBSD documents are available for download at
http://ftp.FreeBSD.org/pub/FreeBSD/doc/

| Questions that are not answered by the
  `documentation <http://www.FreeBSD.org/docs.html>`__ may be sent to
  <freebsd-questions@FreeBSD.org\ >.
|  Send questions about this document to <freebsd-doc@FreeBSD.org\ >.
