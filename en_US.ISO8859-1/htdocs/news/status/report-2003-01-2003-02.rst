===============================
FreeBSD Quarterly Status Report
===============================

.. raw:: html

   <div id="containerwrap">

.. raw:: html

   <div id="container">

`Skip site navigation <#content>`__ (1) `Skip section
navigation <#contentwrap>`__ (2)

.. raw:: html

   <div id="headercontainer">

.. raw:: html

   <div id="header">

Header And Logo
---------------

.. raw:: html

   <div id="headerlogoleft">

|FreeBSD|

.. raw:: html

   </div>

.. raw:: html

   <div id="headerlogoright">

.. raw:: html

   <div class="frontdonateroundbox">

.. raw:: html

   <div class="frontdonatetop">

.. raw:: html

   <div>

**.**

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   <div class="frontdonatecontent">

`Donate to FreeBSD <https://www.FreeBSDFoundation.org/donate/>`__

.. raw:: html

   </div>

.. raw:: html

   <div class="frontdonatebot">

.. raw:: html

   <div>

**.**

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

Peripheral Links
----------------

.. raw:: html

   <div id="searchnav">

.. raw:: html

   </div>

.. raw:: html

   <div id="search">

Search
------

?

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

Site Navigation
---------------

.. raw:: html

   <div id="menu">

-  `Home <../../>`__

-  `About <../../about.html>`__

   -  `Introduction <../../projects/newbies.html>`__
   -  `Features <../../features.html>`__
   -  `Advocacy <../../advocacy/>`__
   -  `Marketing <../../marketing/>`__
   -  `Privacy Policy <../../privacy.html>`__

-  `Get FreeBSD <../../where.html>`__

   -  `Release Information <../../releases/>`__
   -  `Release Engineering <../../releng/>`__

-  `Documentation <../../docs.html>`__

   -  `FAQ <../../doc/en_US.ISO8859-1/books/faq/>`__
   -  `Handbook <../../doc/en_US.ISO8859-1/books/handbook/>`__
   -  `Porter's
      Handbook <../../doc/en_US.ISO8859-1/books/porters-handbook>`__
   -  `Developer's
      Handbook <../../doc/en_US.ISO8859-1/books/developers-handbook>`__
   -  `Manual Pages <//www.FreeBSD.org/cgi/man.cgi>`__
   -  `Documentation Project
      Primer <../../doc/en_US.ISO8859-1/books/fdp-primer>`__
   -  `All Books and Articles <../../docs/books.html>`__

-  `Community <../../community.html>`__

   -  `Mailing Lists <../../community/mailinglists.html>`__
   -  `Forums <https://forums.FreeBSD.org>`__
   -  `User Groups <../../usergroups.html>`__
   -  `Events <../../events/events.html>`__
   -  `Q&A
      (external) <http://serverfault.com/questions/tagged/freebsd>`__

-  `Developers <../../projects/index.html>`__

   -  `Project Ideas <https://wiki.FreeBSD.org/IdeasPage>`__
   -  `SVN Repository <https://svnweb.FreeBSD.org>`__
   -  `Perforce Repository <http://p4web.FreeBSD.org>`__

-  `Support <../../support.html>`__

   -  `Vendors <../../commercial/commercial.html>`__
   -  `Security Information <../../security/>`__
   -  `Bug Reports <https://bugs.FreeBSD.org/search/>`__
   -  `Submitting Bug Reports <https://www.FreeBSD.org/support.html>`__

-  `Foundation <https://www.freebsdfoundation.org/>`__

   -  `Monetary Donations <https://www.freebsdfoundation.org/donate/>`__
   -  `Hardware Donations <../../donations/>`__

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   <div id="content">

.. raw:: html

   <div id="sidewrap">

.. raw:: html

   <div id="sidenav">

Section Navigation
------------------

-  `About <../../about.html>`__
-  `Features <../../features.html>`__
-  `Applications <../../applications.html>`__
-  `Advocacy <../../advocacy/>`__
-  `Marketing <../../marketing/>`__
-  `Administration <../../administration.html>`__
-  `News <../../news/newsflash.html>`__
-  `Events <../../events/events.html>`__
-  `Press <../../news/press.html>`__
-  `Multimedia <../../multimedia/multimedia.html>`__
-  `Artwork <../../art.html>`__
-  `Logo <../../logo.html>`__
-  `Donations <../../donations/>`__
-  `Legal Notices <../../copyright/>`__
-  `Privacy Policy <../../privacy.html>`__

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   <div id="contentwrap">

Introduction:
=============

Another busy two months have passed in the FreeBSD project. With 5.0
released, attention is focusing on making it faster via more
fine-grained locking, adding more high-end features like large memory
(PAE) support for i386, and further progress on many other projects.
FreeBSD 5.1 is expected to ship in late May or early June, with 5.2
following at the end of summer. A roadmap for the push to 5-STABLE is
available at
http://docs.freebsd.org/doc/5.2-RELEASE/usr/share/doc/en_US.ISO8859-1/articles/5-roadmap/index.html.
Although the 5.x series isn't expected to fully stabilize until the 5.2
release, 5.1 promises to be an exciting release and a significant
improvement over 5.0 in terms of speed and stability.

Not to be forgotten, FreeBSD 4.8, the latest in the 4-STABLE series, is
nearing release. Lots of last minute work is going into to it to deliver
features like XFree86 4.3.0, Intel HyperThreading(tm) support, and of
course many more bug fixes. Don't forget to support the FreeBSD vendors
and developers by buying a copy of the CD set when it comes out!.

Thanks,

Scott Long, Robert Watson

--------------

-  `Bluetooth stack for FreeBSD (Netgraph
   implementation) <#%0A----Bluetooth-stack-for-FreeBSD-(Netgraph-implementation)%0A-->`__
-  `BSDCon 2003 <#BSDCon-2003>`__
-  `Buffer Cache lockdown <#Buffer-Cache-lockdown>`__
-  `Disk I/O improvements <#Disk-I/O-improvements>`__
-  `FreeBSD 4.8 Release
   Engineering <#FreeBSD-4.8-Release-Engineering>`__
-  `FreeBSD C99 & POSIX Conformance
   Project <#FreeBSD-C99-&-POSIX-Conformance-Project>`__
-  `FreeBSD GNOME Project <#FreeBSD-GNOME-Project>`__
-  `FreeBSD Security Officer Team <#FreeBSD-Security-Officer-Team>`__
-  `FreeBSD/MIPS Status Report <#FreeBSD/MIPS-Status-Report>`__
-  `jpman project <#jpman-project>`__
-  `KGI/FreeBSD Status Report <#KGI/FreeBSD-Status-Report>`__
-  `New Doceng Body Formed <#New-Doceng-Body-Formed>`__
-  `PowerPC Port <#PowerPC-Port>`__
-  `Read-ahead performance <#Read-ahead-performance>`__
-  `SMP locking for network stack <#SMP-locking-for-network-stack>`__
-  `Status Report for Newbus
   lockdown <#Status-Report-for-Newbus-lockdown>`__
-  `Support for PAE and >4G ram on
   x86 <#Support-for-PAE-and->4G-ram-on-x86>`__
-  `TCP congestion control <#TCP-congestion-control>`__
-  `ULE Scheduler <#ULE-Scheduler>`__

--------------

 Bluetooth stack for FreeBSD (Netgraph implementation)
------------------------------------------------------

| URL: http://www.geocities.com/m_evmenkin/
|  URL: http://bluez.sf.net
|  URL: http://sourceforge.net/projects/openobex/

Contact: Maksim Yevmenkin <m_evmenkin@yahoo.com\ >

I'm very pleased to announce that another release is available for
download at
http://www.geocities.com/m_evmenkin/ngbt-fbsd-20030305.tar.gz

This release features new in-kernel RFCOMM implementation that provides
SOCK\_STREAM sockets interface. This makes old user-space RFCOMM daemon
obsolete. People should not use old user-space RFCOMM daemon any longer.
The release features new RFCOMM PPP daemon that supports DUN and LAN
profiles. Note: PPP patch (support for chat scripts in -direct mode) is
required for DUN support. Look for it in the mailing list archive or
contact me directly. People with Bluetooth enabled cell phones can now
use them to access Internet.

The Bluetooth sockets layer has been cleaned up. People should not see
any WITNESS complaints with new code. Locking issues have been revisited
and code in much better shape now, although it probably is not 100% SMP
ready just yet. The code should work on SMP system anyway because
sockets layer is still under Giant.

The simple OBEX server and client (based on OpenOBEX library) is
complete. OBEX File Push and OBEX File Transfer profiles work and have
been tested with Sony Ericsson T68i cell phone and Bluetooth 3COM stack
on Windows2K. It is now possible to send pictures, address book and
calendar entries from the cell phone via Bluetooth. Minor bug in
OpenOBEX library has been fixed and OPEX Put-Empty command now works.

Due to changes in API userland tools must be in sync with the kernel.
People should install new include files, recompile and reinstall all
userland tools as part of upgrade. I'm sorry about that.

--------------

BSDCon 2003
-----------

URL: http://www.usenix.org/events/bsdcon03/cfp/

Contact: Gregory Shapiro <gshapiro@FreeBSD.org\ >

The BSDCon 2003 Program Committee invites you to contribute original and
innovative papers on topics related to BSD-derived systems and the Open
Source world. Topics of interest include but are not limited to:

-  Embedded BSD application development and deployment
-  Real world experiences using BSD systems
-  Using BSD in a mixed OS environment
-  Comparison with non-BSD operating systems; technical, practical,
   licensing (GPL vs. BSD)
-  Tracking open source development on non-BSD systems
-  BSD on the desktop
-  I/O subsystem and device driver development
-  SMP and kernel threads
-  Kernel enhancements
-  Internet and networking services
-  Security
-  Performance analysis and tuning
-  System administration
-  Future of BSD

Submissions in the form of extended abstracts are due by April 1, 2003.
Be sure to review the extended abstract expectations before submitting.
Selection will be based on the quality of the written submission and
whether the work is of interest to the community.

We look forward to receiving your submissions!

--------------

Buffer Cache lockdown
---------------------

Contact: Jeff Roberson <jeff@FreeBSD.org\ >

Most of the file system buffer cache has been reviewed and protected.
The vnode interlock was extended to cover some buffer flag fields so
that a separate interlock was not required. The global buffer queue data
structures were locked and counters were converted to atomic ops. The
BUF\_\*LOCK functions grew an interlock argument so that buffers could
be safely removed from the vnode clean and dirty lists. The lockmgr lock
is now required for all access to buf fields. This was not strictly
followed before because splbio provided the needed protection.

There are a few areas of code that need to be protected and cleaned up
before giant can be pushed down. Most notably the background write code
is currently unsafe without giant. Also, many of the VM bits that the
buffer cache relies on are not safe. This work has been done with the
expectation that the VM and VFS subsystems will be giant free soon.

--------------

Disk I/O improvements
---------------------

Contact: Poul-Henning Kamp <phk@FreeBSD.org\ >

We have the first disk device driver (aac) out from under Giant now, and
in certain scenarios it gives improvements up to 20%. The device driver
API was pruned to reflect that NO\_GEOM compatibility is unnecessary,
this resulted in approx 1000 lines less source code, the majority of
which were removed from the device drivers. The new API for cdevsw is a
lot simpler and hopefully less likely to confuse people. The ability to
automatically allocate a device major number has been introduced and is
already used by a handful of drivers. Checks introduced with this
facility has shown that the uniqueness of manually allocated major
numbers had already broken down.

Work continues on the statistics collection API and on a unified API for
manual configuration of GEOM nodes.

--------------

FreeBSD 4.8 Release Engineering
-------------------------------

URL: http://www.FreeBSD.org/releases/4.8R/schedule.html

Contact: Murray Stokely <re@FreeBSD.org\ >

The FreeBSD 4.8 Release Process is well underway. The RELENG\_4 branch
has been under code freeze since February 15, and the first release
candidates were made available in early March. A testing guide has been
put together and is available from
http://www.FreeBSD.org/releases/4.8R/qa.html.

Developers should coordinate with re@FreeBSD.org about any changes they
would like to include in this release, and users are encouraged to try
out the release candidates and help find as many bugs as possible now,
before the final release is made.

FreeBSD 4.8 represents the newest production release from the stable
'4.X' branch. It does not include all of the features that were made
available in the "new technology" 5.0 release in January.

--------------

FreeBSD C99 & POSIX Conformance Project
---------------------------------------

| URL: http://www.FreeBSD.org/projects/c99/
|  URL: http://people.FreeBSD.org/~schweikh/posix-utilities.html

| Contact: Mike Barcroft <mike@FreeBSD.org\ >
|  Contact: FreeBSD-Standards Mailing List <standards@FreeBSD.org\ >

January and February were quiet months that saw with them the addition
of some C99 math functions and macros, which include: fpclassify(),
isfinite(), isgreater(), isgreaterequal(), isinf(), isless(),
islessequal(), islessgreater(), isnan(), isnormal(), and signbit().
Additional C99 math library support is in the works.

--------------

FreeBSD GNOME Project
---------------------

URL: http://www.FreeBSD.org/gnome/

| Contact: Joe Marcus <marcus@FreeBSD.org\ >
|  Contact: Maxim Sobolev <sobomax@FreeBSD.org\ >
|  Contact: Adam Weinberger <adamw@FreeBSD.org\ >

FreeBSD 4.8-RELEASE will continue in the tradition of 5.0-RELEASE, and
include GNOME 2 as the default GNOME desktop. This means that 4.8 will
ship with GNOME 2.2.

Following on the heels of the recent GNOME 2.2 release, GNOME 2.3
snapshots are gearing up. The development schedule is available from
http://www.gnome.org/start/2.3/. Ports will be made available the same
way they were for the 2.1 development releases. Stay tuned to
freebsd-gnome@ for more details.

We are currently in another ports freeze in preparation for 4.8-RELEASE.
Following the freeze, a new bsd.gnome.mk will be committed that
effectively removes the USE\_GNOMENG macro. This new version will add
support for GNOME 2 as well as setup backward compatibility for ports
that have not yet been converted to the new GNOME infrastructure. People
interested in testing this new Mk file, can check out the \`\`ports''
module following the instructions at
http://www.marcuscom.com:8080/cgi-bin/cvsweb.cgi.

--------------

FreeBSD Security Officer Team
-----------------------------

URL: http://www.FreeBSD.org/security/

Contact: Jacques Vidrine <nectar@FreeBSD.org\ >

In the period from September 2002 through February 2003, the FreeBSD
Security Team email aliases saw 1297 messages, a much smaller volume
than over the summer (remember the Apache and OpenSSL worms? 4.6.1 oops
I mean 4.6.2-RELEASE?).

Also during this period: 95 items were added to the SO issue-tracking
database; 39 of these involved the FreeBSD base system while the rest
involved ports. 9 new Security Advisories were published, 2 of which
covered issues unique to FreeBSD.

In January, the SO published a new PGP key (ID 0xCA6CDFB2, found on the
FTP site and in the Handbook). This aligned the set of those who possess
the corresponding private key with the membership of the
security-officer alias published on the FreeBSD Security web site. It
also worked around an issue with the deprecated PGP key being found
corrupted on some public key servers.

In February, Mike Tancsa of Sentex donated two machines to the Security
Officer. These have been a great help already in testing the security
branches, preparing patches, and generating updated binaries. Thank you
very much, Mike!

--------------

FreeBSD/MIPS Status Report
--------------------------

| URL: http://www.FreeBSD.org/projects/mips/
|  URL: http://www.FreeBSD.org/platforms/mips.html

Contact: Juli Mallett <jmallett@FreeBSD.org\ >

Large portions of headers have been filled in, all have been stubbed
out. Minimal functions and data elements have been stubbed out or filled
in. Machinery added to support some requisite tunables for building real
kernels. GCC fixed to generate correct local label prefixes making it
possible to link real kernels. Work begun on providing enough to create
and boot real kernels, on real hardware. Decision to only support
MIPS-III and above made.

--------------

jpman project
-------------

| URL: http://www.jp.FreeBSD.org/man-jp/
|  URL:
  ftp://daemon.jp.FreeBSD.org/pub/FreeBSD-jp/man-jp/packages-5.0.0/ja-man-doc-5.0.tbz

Contact: Kazuo Horikawa <horikawa@FreeBSD.org\ >

We have released Japanese translation of 5.0-RELEASE online manual pages
on February 2nd. Most of entries which did not exist on RELENG\_4 were
not yet translated. I hope we can finish such entries soon.

--------------

KGI/FreeBSD Status Report
-------------------------

| URL: http://www.FreeBSD.org/~nsouch/ggiport.html
|  URL: http://kgi-wip.sf.org

Contact: Nicholas Souchu <nsouch@FreeBSD.org\ >

The later months have been very busy on KGI. Most of the framework has
been debugged for typical usage (fb, no accel). I got KII (the input
interface) connected to syscons through atkbd. Opening /dev/graphic
works and framebuffer resource access is permitted. Finally, the KGIM
(KGI module) framework has a better building tree for board / monitor
drivers and board drivers are now loading with resource allocation.

Most important on the TODO list: 5.0-RELEASE move (I currently work with
a May-2002 5.0-current). Most of debug is now done. Let's validate!

Note that KGI project homepage has changed since the last report.

--------------

New Doceng Body Formed
----------------------

URL: http://www.FreeBSD.org/internal/doceng.html

Contact: Murray Stokely <doceng@FreeBSD.org\ >

The doceng@ team is a new body to handle some of the meta-project issues
associated with the FreeBSD Documentation Project. The main
responsibilities of this team are to grant approval of new doc
committers, to manage the doc release process, to ensure the
documentation toolchains are functional, to maintain the doc project
primer, and to maintain the sanctity of the doc/ and www/ trees. The
current members of this team are Nik Clayton, Ruslan Ermilov, Jun
Kuriyama, Bruce A. Mah, and Murray Stokely.

--------------

PowerPC Port
------------

Contact: Peter Grehan <grehan@FreeBSD.org\ >

Work on PowerPC is progressing steadily. The system can now boot
multi-user from the net and disk. ATA-DMA is being integrated with the
ATAng code, and support for older G3 machines is being added.

--------------

Read-ahead performance
----------------------

Contact: Jeff Roberson <jeff@FreeBSD.org\ >

Some improvements have been made to the clustered read ahead code. They
allow for many more outstanding IO requests when an application does
sequential access. This has a larger impact on RAID systems than on
single disk systems. The maximum number of file system blocks that we
will read ahead is tunable via the 'vfs.read\_max' sysctl. This
optimization has shown a 20% improvement in simple tests.

--------------

SMP locking for network stack
-----------------------------

Contact: Jeffrey Hsu <hsu@FreeBSD.org\ >

The list of subsystems locked up include IP, UDP, TCP, ifaddr reference
counting, syncache, the ifnet list, routing radix trees, and ARP. These
have already been committed into the tree. In addition, SMP locking for
raw IP, divert socket processing, and Unix domain sockets have also
recently been completed and tested. Work is currently being done in some
of the subsystems required to make parallel networking processing
SMP-safe.

--------------

Status Report for Newbus lockdown
---------------------------------

Contact: Warner Losh <imp@FreeBSD.org\ >

Locking of the non-obj parts of newbus is nearing completion. A single
lock is used for the device tree. Minimal changes to subr\_bus have so
far been necessary to make this work, however some lock order issues
remain. After this work, it will no longer be necessary to hold Giant to
call device\_\* routines safely. kobj work is being done by others and
will likely require more extensive design work to make SMP friendly.

--------------

Support for PAE and >4G ram on x86
----------------------------------

Contact: Jake Burkholder <jake@FreeBSD.org\ >

Support for PAE is mostly complete, and has been checked into the
jake\_pae branch. The approach that is being taken to add support for
PAE is to allow the pmap module to view the page table directory as 4
pages instead of 1, and to avoid using the 3rd level structure, the page
directory pointer table, as much as possible. Due to its small size, 32
bytes, the PDPT cannot be uniformly recursively mapped, and as such does
not provide a regular multi level structure like the page tables used by
the alpha or x86-64 architectures. What remains to be done for PAE
support is to develop an API for manipulating page table entries which
will allow idempotent 64 bit loads and stores to be used where
necessary.

Experimental support for >4G ram using PAE has been developed and
checked into the jake\_pae\_test branch in Perforce. This involved
adding a physical address type separate from virtual addresses, for use
by the vm system and bus code which needs to use physical addresses
directly. Initial testing has shown good results with device drivers
that can dma to 64 bit physical addresses.

Funding for this project is being provided by DARPA and Network
Associate Laboratories, and hardware support by `FreeBSD
Systems <http://www.freebsdsystems.com>`__.

--------------

TCP congestion control
----------------------

Contact: Jeffrey Hsu <hsu@FreeBSD.org\ >

The objective of this effort is to improve the performance, stability,
and correctness of the BSD networking stack by adding support for new
standards and standards track proposals while maintaining compliance
with existing specifications. The upcoming 4.8 and 5.1 releases will be
the first ones using the new NewReno logic. Recently, we implemented the
Limited Transmit algorithm (RFC 3042) which benefits connections with
small congestion windows, as happens, for example, on many short web
connections. We also recently added support for larger sized starting
congestion windows as described in RFC 3390. This helps short TCP
connections as well as those with large round-trip delays, such as those
over satellite links.

--------------

ULE Scheduler
-------------

Contact: Jeff Roberson <jeff@FreeBSD.org\ >

The ULE scheduler has been committed to the 5.0-CURRENT branch. Early
adopters and experimenters are welcome to try it and submit bug reports.
It has shown noticeable performance improvements over the old scheduler
under some workloads. There are currently problems with nice fairness
but otherwise the interactive performance is very good. More work to
improve the load balancing algorithm is required as well. This should be
ready for use by the general FreeBSD user base in the next month or so.

--------------

`News Home <../news.html>`__ \| `Status Home <status.html>`__

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   <div id="footer">

`Site Map <../../search/index-site.html>`__ \| `Legal
Notices <../../copyright/>`__ \| ? 1995–2015 The FreeBSD Project. All
rights reserved.

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

.. |FreeBSD| image:: ../../layout/images/logo-red.png
   :target: ../..
