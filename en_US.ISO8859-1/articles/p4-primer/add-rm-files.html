<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>11. Adding and Removing Files</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Perforce in FreeBSD Development" /><link rel="up" href="index.html" title="Perforce in FreeBSD Development" /><link rel="prev" href="diffs.html" title="10. Diffs" /><link rel="next" href="working-with-diffs.html" title="12. Working with Diffs" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11. Adding and Removing Files</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="diffs.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="working-with-diffs.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="add-rm-files"></a>11. Adding and Removing Files</h2></div></div></div><p>Integrating a branch will bring existing files into your
      tree, but you may still want to add new files or remove existing
      ones.  Adding files is easily done be creating the file and then
      running <code class="command">p4 add</code> like so:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>p4 add <em class="replaceable"><code>filename</code></em></code></strong></pre><p>If you want to add a whole tree of files, run a command
      like:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>find . -type f | xargs p4 add</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">Perforce</span> can track UNIX
	symlinks too, so you can probably use
	<span class="quote">&#8220;<span class="quote"><code class="command">\! -type d</code></span>&#8221;</span> as the
	matching expression in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=find&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">find</span>(1)</span></a> above.  We do not commit
	symlinks into the source tree of FreeBSD though, so this should
	not be necessary.</p></div><p>Doing a <code class="command">p4 submit</code> will then copy the file
      to the depot on the server.  It is very important to only add
      files, not directories.  Explicitly adding a directory will
      cause <span class="application">Perforce</span> to treat it like a
      file, which is not what you want.</p><p>Removing a file is just as easy with the
      <code class="command">p4</code> delete command like so:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>p4 delete <em class="replaceable"><code>filename</code></em></code></strong></pre><p>This will mark the file for deletion from the depot the next
      time that a submit is run.  It will also remove the local copy
      of the file, so beware.</p><p>Of course, deleting a file does not actually remove it from
      the repository.</p><p>Deleted files can be resurrected by syncing them to a prior
      version.  The only way to permanently remove a file is to use
      <code class="command">p4 obliterate</code>.  This command is irreversible
      and expensive, so it is only available to those with admin
      access.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="diffs.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="working-with-diffs.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">10. Diffs </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 12. Working with Diffs</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>