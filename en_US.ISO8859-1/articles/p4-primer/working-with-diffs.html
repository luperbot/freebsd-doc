<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>12. Working with Diffs</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Perforce in FreeBSD Development" /><link rel="up" href="index.html" title="Perforce in FreeBSD Development" /><link rel="prev" href="add-rm-files.html" title="11. Adding and Removing Files" /><link rel="next" href="renaming-files.html" title="13. Renaming Files" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12. Working with Diffs</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="add-rm-files.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="renaming-files.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="working-with-diffs"></a>12. Working with Diffs</h2></div></div></div><p>Sometimes you might need to apply a diff from another source
      to a tree under <span class="application">Perforce</span> control.  If
      it is a large diff that affects lots of files, it might be
      inconvenient to manually run <code class="command">p4 edit</code> on each
      file.  There is a trick for making this easier.  First, make
      sure that no files are open on your client and that your tree is
      synced and up to date.  Then apply the diff using the normal
      tools, and coerce the permissions on the files if needed.  Then
      run the following commands:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>p4 diff -se ... | xargs p4 edit</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>p4 diff -sd ... | xargs p4 delete</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>find . -type f | xargs p4 add</code></strong></pre><p>The first command tells <span class="application">Perforce</span>
      to look for files that have changed, even if they are not open.
      The second command tells <span class="application">Perforce</span> to
      look for files that no longer exist on the local machine but do
      exist on the server.  The third command then attempts to add all
      of the files that it can find locally.  This is a very
      brute-force method, but it works because
      <span class="application">Perforce</span> will only add the files that
      it does not already know about.  The result of running these
      commands will be a set of files that are opened for edit,
      removal, or add, as appropriate.</p><p>Verify the active changelist with:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>p4 changelist</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>p4 diff -du</code></strong></pre><p>and just do a <code class="command">p4 submit</code> after
      that.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="add-rm-files.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="renaming-files.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">11. Adding and Removing Files </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 13. Renaming Files</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>