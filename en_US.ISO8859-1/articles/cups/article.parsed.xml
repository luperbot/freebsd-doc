<?xml version="1.0" encoding="iso-8859-1"?>
<article xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:lang="en">
  <info><title xmlns:xlink="http://www.w3.org/1999/xlink">CUPS on FreeBSD</title>
    
    <authorgroup xmlns:xlink="http://www.w3.org/1999/xlink">
      <author xmlns:xlink="http://www.w3.org/1999/xlink"><personname xmlns:xlink="http://www.w3.org/1999/xlink"><firstname xmlns:xlink="http://www.w3.org/1999/xlink">Chess</firstname><surname xmlns:xlink="http://www.w3.org/1999/xlink">Griffin</surname></personname><affiliation xmlns:xlink="http://www.w3.org/1999/xlink">
	  <address xmlns:xlink="http://www.w3.org/1999/xlink"><email xmlns:xlink="http://www.w3.org/1999/xlink">chess@chessgriffin.com</email></address>
	</affiliation></author>
    </authorgroup>

    <legalnotice xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="trademarks" role="trademarks">
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD is a registered trademark of
  the FreeBSD Foundation.</para>
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">Many of the designations used by
  manufacturers and sellers to distinguish their products are claimed
  as trademarks.  Where those designations appear in this document,
  and the FreeBSD Project was aware of the trademark claim, the
  designations have been followed by the <quote xmlns:xlink="http://www.w3.org/1999/xlink">&#8482;</quote> or the
  <quote xmlns:xlink="http://www.w3.org/1999/xlink">®</quote> symbol.</para>
    </legalnotice>

    <pubdate xmlns:xlink="http://www.w3.org/1999/xlink">$FreeBSD$</pubdate>

    <releaseinfo xmlns:xlink="http://www.w3.org/1999/xlink">$FreeBSD$</releaseinfo>

    <abstract xmlns:xlink="http://www.w3.org/1999/xlink">
      <para xmlns:xlink="http://www.w3.org/1999/xlink">An article about configuring CUPS on FreeBSD.</para>
    </abstract>
  </info>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">An Introduction to the Common Unix Printing System (CUPS)</title>

    <indexterm xmlns:xlink="http://www.w3.org/1999/xlink"><primary xmlns:xlink="http://www.w3.org/1999/xlink">printing</primary></indexterm>
    <indexterm xmlns:xlink="http://www.w3.org/1999/xlink"><primary xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</primary></indexterm>

    <para xmlns:xlink="http://www.w3.org/1999/xlink"><application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application>, the Common UNIX Printing
      System, provides a portable printing layer for <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">UNIX</trademark>-based
      operating systems.  It has been developed by Easy Software
      Products to promote a standard printing solution for all <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">UNIX</trademark>
      vendors and users.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink"><application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> uses the Internet Printing
      Protocol (<acronym xmlns:xlink="http://www.w3.org/1999/xlink">IPP</acronym>) as the basis for managing
      print jobs and queues.  The Line Printer Daemon
      (<acronym xmlns:xlink="http://www.w3.org/1999/xlink">LPD</acronym>), Server Message Block
      (<acronym xmlns:xlink="http://www.w3.org/1999/xlink">SMB</acronym>), and AppSocket (aka JetDirect)
      protocols are also supported with reduced functionality.
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> adds network printer browsing and
      PostScript Printer Description (<acronym xmlns:xlink="http://www.w3.org/1999/xlink">PPD</acronym>) based
      printing options to support real-world printing under <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">UNIX</trademark>.  As
      a result, <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> is ideally-suited for
      sharing and accessing printers in mixed environments of FreeBSD,
      <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Linux</trademark>, <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Mac OS</trademark> X, or <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark>.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">The main site for <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> is <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.cups.org/">http://www.cups.org/</uri>.</para>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups-install">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Installing the CUPS Print Server</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">To install <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> using a precompiled
      binary, issue the following command from a root terminal:</para>

    <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">pkg install cups</userinput></screen>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Other optional, but recommended, packages are
      <package xmlns:xlink="http://www.w3.org/1999/xlink">print/gutenprint-cups</package> and
      <package xmlns:xlink="http://www.w3.org/1999/xlink">print/hplip</package>, both of which add
      drivers and utilities for a variety of printers.  Once installed,
      the <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> configuration files can be
      found in the directory
      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/cups</filename>.</para>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups-configuring-server">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Configuring the CUPS Print Server</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">After installation, a few files must be edited in order to
      configure the <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> server.  First,
      create or modify, as the case may be, the file
      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/devfs.rules</filename> and add the following
      information to set the proper permissions on all potential printer
      devices and to associate printers with the
      <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="groupname">cups</systemitem> user group:</para>

    <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">[system=10]
add path 'unlpt*' mode 0660 group cups
add path 'ulpt*' mode 0660 group cups
add path 'lpt*' mode 0660 group cups
add path 'usb/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X</replaceable>.<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">Y</replaceable>.<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">Z</replaceable>' mode 0660 group cups</programlisting>

    <note xmlns:xlink="http://www.w3.org/1999/xlink">
      <para xmlns:xlink="http://www.w3.org/1999/xlink">Note that <replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X</replaceable>,
	<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">Y</replaceable>, and <replaceable xmlns:xlink="http://www.w3.org/1999/xlink">Z</replaceable>
	should be replaced with the target USB device listed in the
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">/dev/usb</filename> directory that
	corresponds to the printer.  To find the correct device, examine
	the output of <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">dmesg</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>, where
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">ugen<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">X</replaceable>.<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">Y</replaceable></filename>
	lists the printer device, which is a symbolic link to a USB
	device in <filename xmlns:xlink="http://www.w3.org/1999/xlink">/dev/usb</filename>.</para>
    </note>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Next, add two lines to <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/rc.conf</filename> as
      follows:</para>

    <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">cupsd_enable="YES"
devfs_system_ruleset="system"</programlisting>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">These two entries will start the
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> print server on boot and invoke
      the local devfs rule created above, respectively.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">In order to enable <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> printing
      under certain <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Microsoft</trademark> <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark> clients, the line below should
      be uncommented in
      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/cups/mime.types</filename> and
      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/cups/mime.convs</filename>:</para>

    <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">application/octet-stream</programlisting>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Once these changes have been made, the <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">devfs</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> and
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> systems must both be restarted,
      either by rebooting the computer or issuing the following two
      commands in a root terminal:</para>

    <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">/etc/rc.d/devfs restart</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/rc.d/cupsd restart</userinput></screen>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups-configuring-printers">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Configuring Printers on the CUPS Print Server</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">After the <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> system has been
      installed and configured, the administrator can begin configuring
      the local printers attached to the <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application>
      print server.  This part of the process is very similar, if not
      identical, to configuring <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> printers
      on other <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">UNIX</trademark>-based operating systems, such as a <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Linux</trademark>
      distribution.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">The primary means for managing and administering the
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> server is through the web-based
      interface, which can be found by launching a web browser and
      entering <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://localhost:631">http://localhost:631</uri> in the
      browser's URL bar.  If the <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> server
      is on another machine on the network, substitute the server's
      local <acronym xmlns:xlink="http://www.w3.org/1999/xlink">IP</acronym> address for
      <systemitem xmlns:xlink="http://www.w3.org/1999/xlink">localhost</systemitem>.  The <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application>
      web interface is fairly self-explanatory, as there are sections
      for managing printers and print jobs, authorizing users, and more.
      Additionally, on the right-hand side of the Administration screen
      are several check-boxes allowing easy access to commonly-changed
      settings, such as whether to share published printers connected to
      the system, whether to allow remote administration of the
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> server, and whether to allow users
      additional access and privileges to the printers and print
      jobs.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Adding a printer is generally as easy as clicking <quote xmlns:xlink="http://www.w3.org/1999/xlink">Add
      Printer</quote> at the Administration screen of the
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> web interface, or clicking one of
      the <quote xmlns:xlink="http://www.w3.org/1999/xlink">New Printers Found</quote> buttons also at the
      Administration screen.  When presented with the
      <quote xmlns:xlink="http://www.w3.org/1999/xlink">Device</quote> drop-down box, simply select the desired
      locally-attached printer, and then continue through the process.
      If one has added the <package xmlns:xlink="http://www.w3.org/1999/xlink">print/gutenprint-cups</package> or <package xmlns:xlink="http://www.w3.org/1999/xlink">print/hplip</package> ports or packages as
      referenced above, then additional print drivers will be available
      in the subsequent screens that might provide more stability or
      features.</para>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups-clients">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Configuring CUPS Clients</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Once the <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> server has been
      configured and printers have been added and published to the
      network, the next step is to configure the clients, or the
      machines that are going to access the
      <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> server.  If one has a single
      desktop machine that is acting as both server and client, then
      much of this information may not be needed.</para>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups-clients-unix">
      <title xmlns:xlink="http://www.w3.org/1999/xlink"><trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">UNIX</trademark> Clients</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink"><application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> will also need to be
	installed on your <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">UNIX</trademark> clients.  Once
	<application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> is installed on the clients,
	then <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> printers that are shared
	across the network are often automatically discovered by the
	printer managers for various desktop environments such as
	<application xmlns:xlink="http://www.w3.org/1999/xlink">GNOME</application> or
	<application xmlns:xlink="http://www.w3.org/1999/xlink">KDE</application>.  Alternatively, one can access
	the local <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> interface on the
	client machine at <uri xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://localhost:631">http://localhost:631</uri> and
	click on <quote xmlns:xlink="http://www.w3.org/1999/xlink">Add Printer</quote> in the Administration
	section.  When presented with the <quote xmlns:xlink="http://www.w3.org/1999/xlink">Device</quote>
	drop-down box, simply select the networked
	<application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> printer, if it was automatically
	discovered, or select <literal xmlns:xlink="http://www.w3.org/1999/xlink">ipp</literal> or
	<literal xmlns:xlink="http://www.w3.org/1999/xlink">http</literal> and enter the <acronym xmlns:xlink="http://www.w3.org/1999/xlink">IPP</acronym> or
	<acronym xmlns:xlink="http://www.w3.org/1999/xlink">HTTP</acronym> <acronym xmlns:xlink="http://www.w3.org/1999/xlink">URI</acronym> of the networked
	<application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> printer, usually in one of the
	two following syntaxes:</para>

	<programlisting xmlns:xlink="http://www.w3.org/1999/xlink">ipp://<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">server-name-or-ip</replaceable>/printers/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">printername</replaceable></programlisting>

	<programlisting xmlns:xlink="http://www.w3.org/1999/xlink">http://<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">server-name-or-ip</replaceable>:631/printers/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">printername</replaceable></programlisting>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">If the <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> clients have
	difficulty finding other <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application>
	printers shared across the network, sometimes it is helpful to
	add or create a file
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/cups/client.conf</filename> with a
	single entry as follows:</para>

      <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">ServerName <replaceable xmlns:xlink="http://www.w3.org/1999/xlink">server-ip</replaceable></programlisting>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">In this case, <replaceable xmlns:xlink="http://www.w3.org/1999/xlink">server-ip</replaceable> would be
	replaced by the local <acronym xmlns:xlink="http://www.w3.org/1999/xlink">IP</acronym> address of the
	<application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> server on the network.</para>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups-clients-windows">
      <title xmlns:xlink="http://www.w3.org/1999/xlink"><trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark> Clients</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Versions of <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark> prior to XP did not have the
	capability to natively network with <acronym xmlns:xlink="http://www.w3.org/1999/xlink">IPP</acronym>-based
	printers.  However, <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark> XP and later versions do have this
	capability.  Therefore, to add a <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application>
	printer in these versions of <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark> is quite easy.
	Generally, the <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark> administrator will run the <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark>
	<literal xmlns:xlink="http://www.w3.org/1999/xlink">Add Printer</literal> wizard, select <literal xmlns:xlink="http://www.w3.org/1999/xlink">Network
	  Printer</literal> and then enter the <acronym xmlns:xlink="http://www.w3.org/1999/xlink">URI</acronym> in
	the following syntax:</para>

      <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">http://<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">server-name-or-ip</replaceable>:631/printers/<replaceable xmlns:xlink="http://www.w3.org/1999/xlink">printername</replaceable></programlisting>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">If one has an older version of <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Windows</trademark> without native
	<acronym xmlns:xlink="http://www.w3.org/1999/xlink">IPP</acronym> printing support, then the general means
	of connecting to a <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> printer is to
	use <package xmlns:xlink="http://www.w3.org/1999/xlink">net/samba3</package> and
	<application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> together, which is a topic
	outside the scope of this chapter.</para>
    </sect2>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="printing-cups-troubleshooting">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">CUPS Troubleshooting</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Difficulties with <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> often lies
      in permissions.  First, double check the <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">devfs</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry> permissions
      as outlined above.  Next, check the actual permissions of the
      devices created in the file system.  It is also helpful to make
      sure your user is a member of the <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="groupname">cups</systemitem>
      group.  If the permissions check boxes in the Administration
      section of the <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> web interface do
      not seem to be working, another fix might be to manually backup
      the main <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> configuration file
      located at <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/cups/cupsd.conf</filename> and
      edit the various configuration options and try different
      combinations of configuration options.  One sample
      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/cups/cupsd.conf</filename> to test is
      listed below.  Please note that this sample
      <filename xmlns:xlink="http://www.w3.org/1999/xlink">cupsd.conf</filename> file sacrifices security for
      easier configuration; once the administrator successfully
      connects to the <application xmlns:xlink="http://www.w3.org/1999/xlink">CUPS</application> server and
      configures the clients, it is advisable to revisit this
      configuration file and begin locking down access.</para>

    <programlisting xmlns:xlink="http://www.w3.org/1999/xlink"># Log general information in error_log - change "info" to "debug" for
# troubleshooting...
LogLevel info

# Administrator user group...
SystemGroup wheel

# Listen for connections on Port 631.
Port 631
#Listen localhost:631
Listen /var/run/cups.sock

# Show shared printers on the local network.
Browsing On
BrowseOrder allow,deny
#BrowseAllow @LOCAL
BrowseAllow 192.168.1.* # change to local LAN settings
BrowseAddress 192.168.1.* # change to local LAN settings

# Default authentication type, when authentication is required...
DefaultAuthType Basic
DefaultEncryption Never # comment this line to allow encryption

# Allow access to the server from any machine on the LAN
&lt;Location /&gt;
  Order allow,deny
  #Allow localhost
  Allow 192.168.1.* # change to local LAN settings
&lt;/Location&gt;

# Allow access to the admin pages from any machine on the LAN
&lt;Location /admin&gt;
  #Encryption Required
  Order allow,deny
  #Allow localhost
  Allow 192.168.1.* # change to local LAN settings
&lt;/Location&gt;

# Allow access to configuration files from any machine on the LAN
&lt;Location /admin/conf&gt;
  AuthType Basic
  Require user @SYSTEM
  Order allow,deny
  #Allow localhost
  Allow 192.168.1.* # change to local LAN settings
&lt;/Location&gt;

# Set the default printer/job policies...
&lt;Policy default&gt;
  # Job-related operations must be done by the owner or an administrator...
  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs \
Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription \
Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job \
CUPS-Move-Job&gt;
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # All administration operations require an administrator to authenticate...
  &lt;Limit Pause-Printer Resume-Printer Set-Printer-Attributes Enable-Printer \
Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs \
Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer \
Promote-Job Schedule-Job-After CUPS-Add-Printer CUPS-Delete-Printer CUPS-Add-Class \
CUPS-Delete-Class CUPS-Accept-Jobs CUPS-Reject-Jobs CUPS-Set-Default&gt;
    AuthType Basic
    Require user @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # Only the owner or an administrator can cancel or authenticate a job...
  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit All&gt;
    Order deny,allow
  &lt;/Limit&gt;
&lt;/Policy&gt;</programlisting>
  </sect1>
  <index xmlns:xlink="http://www.w3.org/1999/xlink"/>
</article>
