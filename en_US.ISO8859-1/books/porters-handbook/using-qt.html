<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>6.11. Using Qt</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="special.html" title="Chapter 6. Special Considerations" /><link rel="prev" href="using-gnome.html" title="6.10. Using GNOME" /><link rel="next" href="using-kde.html" title="6.12. Using KDE" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.11. Using Qt</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-gnome.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Special Considerations</th><td width="20%" align="right"> <a accesskey="n" href="using-kde.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-qt"></a>6.11. Using Qt</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="qt-common"></a>6.11.1. Ports That Require Qt</h3></div></div></div><p>The Ports Collection provides support for Qt 4 and Qt 5
	frameworks with
	<code class="varname">USE_QT<em class="replaceable"><code>x</code></em></code>,
	where <em class="replaceable"><code>x</code></em> is
	<code class="literal">4</code> or <code class="literal">5</code>.
	Set <code class="varname">USE_QT<em class="replaceable"><code>x</code></em></code>
	to the list of required Qt components (libraries,
	tools, plugins).  The Qt 4 and Qt 5 frameworks are quite
	similar.  The main difference is the set of supported
	components.</p><p>The Qt framework exports a number of variables which can
	be used by ports, some of them listed below:</p><div class="table"><a id="using-qt-variables"></a><div class="table-title">Table 6.7. Variables Provided to Ports That Use Qt</div><div class="table-contents"><table summary="Variables Provided to Ports That Use Qt" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">QT_PREFIX</code></td><td>Set to the path where Qt was installed
		(<code class="literal">${LOCALBASE}</code>).</td></tr><tr><td><code class="varname">QMAKE</code></td><td>Full path to <code class="command">qmake</code>
		binary.</td></tr><tr><td><code class="varname">LRELEASE</code></td><td>Full path to <code class="command">lrelease</code>
		utility.</td></tr><tr><td><code class="varname">MOC</code></td><td>Full path to <code class="command">moc</code>.</td></tr><tr><td><code class="varname">RCC</code></td><td>Full path to <code class="command">rcc</code>.</td></tr><tr><td><code class="varname">UIC</code></td><td>Full path to <code class="command">uic</code>.</td></tr><tr><td><code class="varname">QT_INCDIR</code></td><td>Qt include directory.</td></tr><tr><td><code class="varname">QT_LIBDIR</code></td><td>Qt libraries path.</td></tr><tr><td><code class="varname">QT_PLUGINDIR</code></td><td>Qt plugins path.</td></tr></tbody></table></div></div><br class="table-break" /><p>When using the Qt framework, these
	settings are deployed:</p><pre class="programlisting">CONFIGURE_ARGS+=	--with-qt-includes=${QT_INCDIR} \
			--with-qt-libraries=${QT_LIBDIR} \
			--with-extra-libs=${LOCALBASE}/lib \
			--with-extra-includes=${LOCALBASE}/include

CONFIGURE_ENV+=	QTDIR="${QT_PREFIX}" QMAKE="${QMAKE}" \
		MOC="${MOC}" RCC="${RCC}" UIC="${UIC}" \
		QMAKESPEC="${QMAKESPEC}"

PLIST_SUB+=	QT_INCDIR=${QT_INCDIR_REL} \
		QT_LIBDIR=${QT_LIBDIR_REL} \
		QT_PLUGINDIR=${QT_PLUGINDIR_REL}</pre><p>Some configure scripts do not support the arguments above.
	To suppress modification of<code class="varname">CONFIGURE_ENV</code>
	and <code class="varname">CONFIGURE_ARGS</code>, set
	<code class="varname">QT_NONSTANDARD</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="qt-components"></a>6.11.2. Component Selection</h3></div></div></div><p>Individual Qt tool and library dependencies must be
	specified in
	<code class="varname">USE_QT<em class="replaceable"><code>x</code></em></code>.
	Every component can be suffixed with
	<code class="literal">_build</code> or <code class="literal">_run</code>, the
	suffix indicating whether the dependency on the component is
	at buildtime or runtime.  If unsuffixed, the component will be
	depended on at both build- and runtime.  Usually, library
	components are specified unsuffixed, tool components
	are mostly specified with the <code class="literal">_build</code> suffix
	and plugin components are specified with the
	<code class="literal">_run</code> suffix.  The most commonly used
	components are listed below (all available components are
	listed in <code class="varname">_USE_QT_ALL</code>,
	<code class="varname">_USE_QT4_ONLY</code>, and
	<code class="varname">_USE_QT5_ONLY</code> in
	<code class="filename">/usr/ports/Mk/bsd.qt.mk</code>):</p><div class="table"><a id="using-qt-library-list"></a><div class="table-title">Table 6.8. Available Qt Library Components</div><div class="table-contents"><table summary="Available Qt Library Components" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">core</code></td><td>core library (Qt 5 only)</td></tr><tr><td><code class="literal">corelib</code></td><td>core library (Qt 4 only)</td></tr><tr><td><code class="literal">dbus</code></td><td>Qt DBus library</td></tr><tr><td><code class="literal">gui</code></td><td>graphical user interface library</td></tr><tr><td><code class="literal">network</code></td><td>network library</td></tr><tr><td><code class="literal">opengl</code></td><td>Qt OpenGL library</td></tr><tr><td><code class="literal">script</code></td><td>script library</td></tr><tr><td><code class="literal">sql</code></td><td>SQL library</td></tr><tr><td><code class="literal">testlib</code></td><td>unit testing library</td></tr><tr><td><code class="literal">webkit</code></td><td>Qt WebKit library</td></tr><tr><td><code class="literal">xml</code></td><td>Qt XML library</td></tr></tbody></table></div></div><br class="table-break" /><p>To determine the libraries an application
	depends on, run <code class="command">ldd</code> on the main
	executable after a successful compilation.</p><div class="table"><a id="using-qt-tools-list"></a><div class="table-title">Table 6.9. Available Qt Tool Components</div><div class="table-contents"><table summary="Available Qt Tool Components" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">qmake</code></td><td>Makefile generator/build utility</td></tr><tr><td><code class="literal">buildtools</code></td><td>build tools (<code class="command">moc</code>,
		<code class="command">rcc</code>), needed for almost
		every Qt application (Qt 5 only)</td></tr><tr><td><code class="literal">linguisttools</code></td><td>localization tools: <code class="command">lrelease</code>,
		<code class="command">lupdate</code> (Qt 5 only)</td></tr><tr><td><code class="literal">linguist</code></td><td>localization tools: <code class="command">lrelease</code>,
		<code class="command">lupdate</code> (Qt 4 only)</td></tr><tr><td><code class="literal">moc</code></td><td>meta object compiler, needed for almost
		every Qt application at buildtime (Qt 4 only)</td></tr><tr><td><code class="literal">rcc</code></td><td>resource compiler, needed if the application
		comes with <code class="filename">*.rc</code> or
		<code class="filename">*.qrc</code> files (Qt 4 only)</td></tr><tr><td><code class="literal">uic</code></td><td>user interface compiler, needed if the
		application comes with <code class="filename">*.ui</code>
		files, in practice, every Qt
		application with a GUI (Qt 4 only)</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="using-qt-plugins-list"></a><div class="table-title">Table 6.10. Available Qt Plugin Components</div><div class="table-contents"><table summary="Available Qt Plugin Components" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">iconengines</code></td><td>SVG icon engine plugin, needed if the application
		ships SVG icons (Qt 4 only)</td></tr><tr><td><code class="literal">imageformats</code></td><td>plugins for TGA, TIFF, and MNG
		image formats</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="qt4-components-example"></a><div class="example-title">Example 6.5. Selecting Qt 4 Components</div><div class="example-contents"><p>In this example, the ported application uses the Qt 4
	  graphical user interface library, the Qt 4 core library,
	  all of the Qt 4 code generation tools and Qt 4's Makefile
	  generator.  Since the <code class="literal">gui</code> library
	  implies a dependency on the core library,
	  <code class="literal">corelib</code> does not need to be specified.
	  The Qt 4 code generation tools <code class="literal">moc</code>,
	  <code class="literal">uic</code> and <code class="literal">rcc</code>, as well
	  as the Makefile generator <code class="literal">qmake</code> are
	  only needed at buildtime, thus they are specified with the
	  <code class="literal">_build</code> suffix:</p><pre class="programlisting">USE_QT4=	gui moc_build qmake_build rcc_build uic_build</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-qmake"></a>6.11.3. Using <code class="command">qmake</code></h3></div></div></div><p>If the application provides a
	<span class="application">qmake</span> project file
	(<code class="filename">*.pro</code>), define
	<code class="literal">USES= qmake</code> along with
	<code class="literal">USE_QT<em class="replaceable"><code>x</code></em></code>.  Note
	that <code class="literal">USES= qmake</code> already implies a build
	dependency on qmake, therefore the qmake component can be
	omitted from
	<code class="literal">USE_QT<em class="replaceable"><code>x</code></em></code>.
	Similar to <a class="link" href="building.html#using-cmake" title="6.5.4. Using cmake"><span class="application">CMake</span></a>,
	<span class="application">qmake</span> supports out-of-source
	builds, which can be enabled by specifying the
	<code class="literal">outsource</code> argument (see <a class="link" href="using-qt.html#using-qmake-example" title="Example 6.6. USES= qmake Example"><code class="literal">USES= qmake</code>
	  example</a>).</p><div class="table"><a id="using-qmake-variables"></a><div class="table-title">Table 6.11. Variables for Ports That Use
	  <code class="command">qmake</code></div><div class="table-contents"><table summary="Variables for Ports That Use&#10;&#9;  qmake" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Means</th></tr></thead><tbody><tr><td><code class="varname">QMAKE_ARGS</code></td><td>Port specific <span class="application">qmake</span>
		flags to be passed to the <code class="command">qmake</code>
		binary.</td></tr><tr><td><code class="varname">QMAKE_ENV</code></td><td>Environment variables to be set for the
		<code class="command">qmake</code> binary.   The default is
		<code class="literal">${CONFIGURE_ENV}</code>.</td></tr><tr><td><code class="varname">QMAKE_SOURCE_PATH</code></td><td>Path to qmake project files
		(<code class="filename">.pro</code>).  The default is
		<code class="literal">${WRKSRC}</code> if an
		out-of-source build is requested, empty
		otherwise.</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="using-qmake-example"></a><div class="example-title">Example 6.6. <code class="literal">USES= qmake</code> Example</div><div class="example-contents"><p>This snippet demonstrates the use of
	  <span class="application">qmake</span> for a Qt 4 port:</p><pre class="programlisting">USES=		qmake:outsource
USE_QT4=	moc_build</pre><p>For a Qt 5 port:</p><pre class="programlisting">USES=		qmake:outsource
USE_QT5=	buildtools_build</pre></div></div><br class="example-break" /><p>Qt applications are often written to be cross-platform
	and often X11/Unix is not the platform they are developed
	on, which in turn leads to certain loose ends,
	like:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Missing additional include
	      paths.</em></span>  Many applications come with
	    system tray icon support, but neglect to look for
	    includes and/or libraries in the X11 directories.  To add
	    directories to <code class="command">qmake</code>'s
	    include and library search paths via the command
	    line, use:</p><pre class="programlisting">QMAKE_ARGS+=	INCLUDEPATH+=${LOCALBASE}/include \
		LIBS+=-L${LOCALBASE}/lib</pre></li><li class="listitem"><p><span class="emphasis"><em>Bogus installation paths.</em></span>
	    Sometimes data such as icons or .desktop files are by
	    default installed into directories which are not scanned
	    by XDG-compatible applications.
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/texmaker/pkg-descr">editors/texmaker</a> is
	    an example for this - look at
	    <code class="filename">patch-texmaker.pro</code> in the
	    <code class="filename">files</code> directory of that port for a
	    template on how to remedy this directly in the
	    <code class="command">qmake</code> project file.</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-gnome.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="using-kde.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">6.10. Using GNOME </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 6.12. Using KDE</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>