<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>6.6. Using GNU Autotools</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="special.html" title="Chapter 6. Special Considerations" /><link rel="prev" href="building.html" title="6.5. Building Mechanisms" /><link rel="next" href="using-gettext.html" title="6.7. Using GNU gettext" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.6. Using GNU Autotools</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="building.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Special Considerations</th><td width="20%" align="right"> <a accesskey="n" href="using-gettext.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-autotools"></a>6.6. Using GNU Autotools</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-autotools-introduction"></a>6.6.1. Introduction</h3></div></div></div><p>The various GNU autotools provide an abstraction
	mechanism for building a piece of software over a wide
	variety of operating systems and machine architectures.
	Within the Ports Collection, an individual port can make use
	of these tools via a simple construct:</p><pre class="programlisting">USE_AUTOTOOLS=	<em class="replaceable"><code>tool</code></em>[:env] ...</pre><p>At the time of writing, <em class="replaceable"><code>tool</code></em>
	can be one of <code class="literal">autoconf</code>,
	<code class="literal">autoheader</code>, <code class="literal">automake</code>,
	<code class="literal">aclocal</code>, <code class="literal">libtoolize</code>.
	It can also be one the older
	legacy of <code class="literal">autoconf213</code>,
	<code class="literal">autoheader213</code>,
	<code class="literal">automake14</code>,
	<code class="literal">aclocal14</code>.</p><p><em class="replaceable"><code>env</code></em> is used to specify that the
	environmental variables are needed.  It also adds a build
	dependency on the tool.  The relevant tool is
	<span class="emphasis"><em>not</em></span> ran as part of the
	<code class="buildtarget">run-autotools</code> target.</p><p>Multiple tools can be specified at once, either by
	including them all on a single line, or using the
	<code class="literal">+=</code> Makefile construct.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-libtool"></a>6.6.2. <code class="command">libtool</code> and <code class="command">libtoolize</code></h3></div></div></div><p>Ports shipping with their own copy of libtool (search for
	a file named ltmain.sh) need to have
	<code class="literal">USES=libtool</code>.  If a port has
	<code class="literal">USE_AUTOTOOLS=libtoolize</code> it probably also
	needs <code class="literal">USES=libtool</code>.  See the <a class="link" href="uses.html#uses-libtool">USES=libtool</a> section in <a class="xref" href="uses.html" title="Chapter 15. Values of USES">Chapter 15, <em>Values of
    <code class="varname">USES</code></em></a> for more details.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-libltdl"></a>6.6.3. <code class="filename">libltdl.so</code></h3></div></div></div><p>Some ports make use of the <code class="filename">libltdl.so</code>
	library package, which is part of the
	<code class="command">libtool</code> suite.  Use of this library does
	not automatically necessitate the use of
	<code class="command">libtool</code> itself.  If the port needs
	<code class="filename">libltdl.so</code>, add a dependency on
	it:</p><pre class="programlisting">LIB_DEPENDS=	libltdl.so:${PORTSDIR}/devel/libltdl</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-autoconf"></a>6.6.4. <code class="command">autoconf</code> and
	<code class="command">autoheader</code></h3></div></div></div><p>Some ports do not contain a configure script, but do
	contain an autoconf template in
	<code class="filename">configure.ac</code>.  Use these
	assignments to let <code class="command">autoconf</code>
	create the configure script, and also have
	<code class="command">autoheader</code> create template headers for
	use by the configure script.</p><pre class="programlisting">USE_AUTOTOOLS=	autoconf[:env]</pre><p>and</p><pre class="programlisting">USE_AUTOTOOLS=	autoheader</pre><p>which also implies the use of
	<code class="literal">autoconf</code>.</p><p>The additional optional variables
	<code class="varname">AUTOCONF_ARGS</code> and
	<code class="varname">AUTOHEADER_ARGS</code> can be overridden by the
	port <code class="filename">Makefile</code> if specifically
	requested.  Most ports are unlikely to need this.  See
	<code class="filename">bsd.autotools.mk</code> for further
	details.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-automake"></a>6.6.5. <code class="command">automake</code> and
	<code class="command">aclocal</code></h3></div></div></div><p>Some packages only contain
	<code class="filename">Makefile.am</code>.  These have to be
	converted into <code class="filename">Makefile.in</code> using
	<code class="command">automake</code>, and the further processed by
	<code class="command">configure</code> to generate an actual
	<code class="filename">Makefile</code>.</p><p>Similarly, packages occasionally do not ship with
	an included <code class="filename">aclocal.m4</code>, again
	required to build the software.  This can be achieved with
	<code class="command">aclocal</code>, which scans
	<code class="filename">configure.ac</code> or
	<code class="filename">configure.in</code>.</p><p><code class="command">aclocal</code> has a similar relationship to
	<code class="command">automake</code> as <code class="command">autoheader</code>
	does to <code class="command">autoconf</code>, described in the
	previous section.  <code class="command">aclocal</code> implies the
	use of <code class="command">automake</code>, thus we have:</p><pre class="programlisting">USE_AUTOTOOLS=	automake[:<em class="replaceable"><code>env</code></em>]</pre><p>and</p><pre class="programlisting">USE_AUTOTOOLS=	aclocal</pre><p>As with <code class="command">autoconf</code> and
	<code class="command">autoheader</code>, both
	<code class="command">automake</code> and <code class="command">aclocal</code>
	have optional argument variables,
	<code class="varname">AUTOMAKE_ARGS</code> and
	<code class="varname">ACLOCAL_ARGS</code> respectively, which may be
	overridden by the port <code class="filename">Makefile</code> if
	required.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="building.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="using-gettext.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">6.5. Building Mechanisms </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 6.7. Using GNU <code class="literal">gettext</code></td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>