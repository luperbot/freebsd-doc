<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Chapter 5. Answers to Exercises</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="PMake &#8212; A Tutorial" /><link rel="up" href="index.html" title="PMake &#8212; A Tutorial" /><link rel="prev" href="theway.html" title="4.9. The Way Things Work" /><link rel="next" href="glossary.html" title="Glossary of Jargon" /><link rel="copyright" href="legalnotice.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 5. Answers to Exercises</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="theway.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="glossary.html">Next</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="answers"></a>Chapter 5. Answers to Exercises</h1></div></div></div><h2 class="title"><a id="idp67929040"></a>Exercise 3.1</h2><p>This is something of a trick question, for which I apologize.
    The trick comes from the <span class="trademark">UNIX</span>® definition of a suffix, which
    <span class="application">PMake</span> does not necessarily share.
    You will have noticed that all the suffixes used in this tutorial
    (and in <span class="trademark">UNIX</span>® in general) begin with a period
    (<code class="filename">.ms</code>, <code class="filename">.c</code>, etc.).
    Now, <span class="application">PMake</span>'s idea of a suffix is more
    like English's: it is the characters at the end of a word.  With
    this in mind, one possible solution to this problem goes as
    follows:</p><pre class="programlisting">.SUFFIXES       : ec.exe .exe ec.obj .obj .asm
ec.objec.exe .obj.exe :
	link -o $(.TARGET) $(.IMPSRC)
.asmec.obj      :
	asm -o $(.TARGET) -DDO_ERROR_CHECKING $(.IMPSRC)
.asm.obj        :
	asm -o $(.TARGET) $(.IMPSRC)</pre><h2 class="title"><a id="idp67949264"></a>Excercise 3.2</h2><p>The trick to this one lies in the <code class="literal">:=</code>
    variable-assignment operator and the <code class="literal">:S</code>
    variable-expansion modifier.  Basically what you want is to take
    the pointer variable, so to speak, and transform it into an
    invocation of the variable at which it points.  You might try
    something like:</p><pre class="programlisting">$(PTR:S/^/\$(/:S/$/))</pre><p>which places <code class="literal">$(</code> at the front of the
    variable name and <code class="literal">)</code> at the end, thus
    transforming <code class="literal">VAR,</code> for example, into
    <code class="literal">$(VAR)</code>, which is just what we want.
    Unfortunately (as you know if you have tried it), since, as it
    says in the hint, <span class="application">PMake</span> does no further
    substitution on the result of a modified expansion, that is all
    you get.  The solution is to make use of <code class="literal">:=</code> to
    place that string into yet another variable, then invoke the other
    variable directly:</p><pre class="programlisting">*PTR            := $(PTR:S/^/\$(/:S/$/)/)</pre><p>You can then use <code class="literal">$(*PTR)</code> to your heart's
    content.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="theway.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="glossary.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">4.9. The Way Things Work </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Glossary of Jargon</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>