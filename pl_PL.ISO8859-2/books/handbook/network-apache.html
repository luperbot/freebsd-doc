<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>25.7. Apache HTTP Server</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Podrêcznik FreeBSD" /><link rel="up" href="network-servers.html" title="Rozdzia³ 25. Network Servers" /><link rel="prev" href="network-dns.html" title="25.6. Domain Name System (DNS)" /><link rel="next" href="network-ftp.html" title="25.8. File Transfer Protocol (FTP)" /><link rel="copyright" href="legalnotice.html" title="Informacja Prawna" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">25.7. Apache HTTP Server</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-dns.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 25. Network Servers</th><td width="20%" align="right"> <a accesskey="n" href="network-ftp.html">Nastêpny</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-apache"></a>25.7. Apache HTTP Server</h2></div><div><span class="authorgroup">Contributed by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp94484432" class="indexterm"></a><a id="idp94485328" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94485840"></a>25.7.1. Overview</h3></div></div></div><p>FreeBSD is used to run some of the busiest web sites in the
        world.  The majority of web servers on the Internet are using
        the <span class="application">Apache HTTP Server</span>.
        <span class="application">Apache</span> software packages should be
        included on your FreeBSD installation media.  If you did not
        install <span class="application">Apache</span> when you first
        installed FreeBSD, then you can install it from the <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache13/pkg-descr">www/apache13</a> or <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache20/pkg-descr">www/apache20</a> port.</p><p>Once <span class="application">Apache</span> has been installed
        successfully, it must be configured.</p><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">This section covers version 1.3.X of the
        <span class="application">Apache HTTP Server</span> as that is the
        most widely used version for FreeBSD.  <span class="application">Apache</span> 2.X introduces many
        new technologies but they are not discussed here.  For more
        information about <span class="application">Apache</span> 2.X, please see <code class="uri"><a class="uri" href="http://httpd.apache.org/" target="_top">http://httpd.apache.org/</a></code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94492240"></a>25.7.2. Configuration</h3></div></div></div><a id="idp94492880" class="indexterm"></a><p>The main <span class="application">Apache HTTP Server</span> configuration file is
	installed as
	<code class="filename">/usr/local/etc/apache/httpd.conf</code> on FreeBSD.
	This file is a typical <span class="trademark">UNIX</span>(R) text configuration file with
	comment lines beginning with the <code class="literal">#</code>
	character.  A comprehensive description of all possible
	configuration options is outside the scope of this book, so
	only the most frequently modified directives will be described
	here.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">ServerRoot "/usr/local"</code></span></dt><dd><p>This specifies the default directory hierarchy for
	    the <span class="application">Apache</span> installation.  Binaries are stored in the
	    <code class="filename">bin</code> and
	    <code class="filename">sbin</code> subdirectories
	    of the server root, and configuration files are stored in
	    <code class="filename">etc/apache</code>.</p></dd><dt><span class="term"><code class="literal">ServerAdmin you@your.address</code></span></dt><dd><p>The address to which problems with the server should
	      be emailed.  This address appears on some
	      server-generated pages, such as error documents.</p></dd><dt><span class="term"><code class="literal">ServerName www.example.com</code></span></dt><dd><p><code class="literal">ServerName</code> allows you to set a host name which is
	      sent back to clients for your server if it is different
	      to the one that the host is configured with (i.e., use <code class="systemitem">www</code>
	      instead of the host's real name).</p></dd><dt><span class="term"><code class="literal">DocumentRoot "/usr/local/www/data"</code></span></dt><dd><p><code class="literal">DocumentRoot</code>: The directory out of which you will
	      serve your documents. By default, all requests are taken
	      from this directory, but symbolic links and aliases may
	      be used to point to other locations.</p></dd></dl></div><p>It is always a good idea to make backup copies of your
	<span class="application">Apache</span> configuration file before making changes.  Once you are
	satisfied with your initial configuration you are ready to
	start running <span class="application">Apache</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94519888"></a>25.7.3. Running <span class="application">Apache</span></h3></div></div></div><a id="idp94520784" class="indexterm"></a><p><span class="application">Apache</span> does not run from the
        <span class="application">inetd</span> super server as many other
        network servers do.  It is configured to run standalone for
        better performance for incoming HTTP requests from client web
        browsers.  A shell script wrapper is included to make
        starting, stopping, and restarting the server as simple as
        possible.  To start up <span class="application">Apache</span> for
        the first time, just run:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/sbin/apachectl start</code></strong></pre><p>You can stop the server at any time by typing:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/sbin/apachectl stop</code></strong></pre><p>After making changes to the configuration file for any
      reason, you will need to restart the server:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/sbin/apachectl restart</code></strong></pre><p>To restart <span class="application">Apache</span> without
	aborting current connections, run:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/sbin/apachectl graceful</code></strong></pre><p>Additional information available at
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=apachectl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">apachectl</span>(8)</span></a> manual page.</p><p>To launch <span class="application">Apache</span> at system
        startup, add the following line to
        <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">apache_enable="YES"</pre><p>If you would like to supply additional command line
	options for the <span class="application">Apache</span>
	<code class="command">httpd</code> program started at system boot, you
	may specify them with an additional line in
	<code class="filename">rc.conf</code>:</p><pre class="programlisting">apache_flags=""</pre><p>Now that the web server is running, you can view your web
        site by pointing a web browser to
        <code class="literal">http://localhost/</code>.  The default web page
        that is displayed is
        <code class="filename">/usr/local/www/data/index.html</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94534480"></a>25.7.4. Virtual Hosting</h3></div></div></div><p><span class="application">Apache</span> supports two different
	types of Virtual Hosting. The first method is Name-based
	Virtual Hosting. Name-based virtual hosting uses the clients
	HTTP/1.1 headers to figure out the hostname. This allows many
	different domains to share the same IP address.</p><p>To setup <span class="application">Apache</span> to use
        Name-based Virtual Hosting add an entry like the following to
        your <code class="filename">httpd.conf</code>:</p><pre class="programlisting">NameVirtualHost *</pre><p>If your webserver was named <code class="systemitem">www.domain.tld</code> and
        you wanted to setup a virtual domain for
        <code class="systemitem">www.someotherdomain.tld</code> then you would add
        the following entries to
        <code class="filename">httpd.conf</code>:</p><pre class="screen">&lt;VirtualHost *&gt;
ServerName www.domain.tld
DocumentRoot /www/domain.tld
&lt;/VirtualHost&gt;

&lt;VirtualHost *&gt;
ServerName www.someotherdomain.tld
DocumentRoot /www/someotherdomain.tld
&lt;/VirtualHost&gt;</pre><p>Replace the addresses with the addresses you want to use
        and the path to the documents with what you are using.</p><p>For more information about setting up virtual hosts,
        please consult the official <span class="application">Apache</span>
        documentation at: <code class="uri"><a class="uri" href="http://httpd.apache.org/docs/vhosts/" target="_top">http://httpd.apache.org/docs/vhosts/</a></code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94541520"></a>25.7.5. Apache Modules</h3></div></div></div><a id="idp94542160" class="indexterm"></a><p>There are many different <span class="application">Apache</span> modules available to add
        functionality to the basic server.  The FreeBSD Ports
        Collection provides an easy way to install
        <span class="application">Apache</span> together with some of the
        more popular add-on modules.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94544208"></a>25.7.5.1. mod_ssl</h4></div></div></div><a id="idp94544848" class="indexterm"></a><a id="idp94545744" class="indexterm"></a><a id="idp94546256" class="indexterm"></a><p>The <span class="application">mod_ssl</span> module uses the OpenSSL library to provide
          strong cryptography via the Secure Sockets Layer (SSL v2/v3)
          and Transport Layer Security (TLS v1) protocols.  This
          module provides everything necessary to request a signed
          certificate from a trusted certificate signing authority so
          that you can run a secure web server on FreeBSD.</p><p>If you have not yet installed
	  <span class="application">Apache</span>, then a version of <span class="application">Apache</span>
	  1.3.X that includes <span class="application">mod_ssl</span> may be installed with the <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache13-modssl/pkg-descr">www/apache13-modssl</a> port.  SSL
	  support is also available for <span class="application">Apache</span> 2.X in the
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache20/pkg-descr">www/apache20</a> port,
	  where it is enabled by default.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94563536"></a>25.7.5.2. Dynamic Websites with Perl &amp; PHP</h4></div></div></div><p>In the past few years, more businesses have turned to the
          Internet in order to enhance their revenue and increase
          exposure.  This has also increased the need for interactive
          web content.  While some companies, such as <span class="trademark">Microsoft</span>(R), have
          introduced solutions into their proprietary products, the
          open source community answered the call.  Two options for
          dynamic web content include
          <span class="application">mod_perl</span> &amp;
          <span class="application">mod_php</span>.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94565840"></a>25.7.5.2.1. mod_perl</h5></div></div></div><a id="idp94566480" class="indexterm"></a><p>The <span class="application">Apache</span>/Perl integration project brings together the
	  full power of the Perl programming language and the <span class="application">Apache
	  HTTP Server</span>.  With the <span class="application">mod_perl</span> module it is possible to
	  write <span class="application">Apache</span> modules entirely in Perl.  In addition, the
	  persistent interpreter embedded in the server avoids the
	  overhead of starting an external interpreter and the penalty
	  of Perl start-up time.</p><p><span class="application">mod_perl</span> is available a few
            different ways.  To use <span class="application">mod_perl</span>
            remember that <span class="application">mod_perl</span> 1.0 only
            works with <span class="application">Apache</span> 1.3 and
            <span class="application">mod_perl</span> 2.0 only works with
            <span class="application">Apache</span> 2.
            <span class="application">mod_perl</span> 1.0 is available in
            <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mod_perl/pkg-descr">www/mod_perl</a> and a
            statically compiled version is available in
            <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache13-modperl/pkg-descr">www/apache13-modperl</a>.
            <span class="application">mod_perl</span> 2.0 is avaliable in
            <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mod_perl2/pkg-descr">www/mod_perl2</a>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94574288"></a>25.7.5.2.2. mod_php</h5></div><div><span class="authorgroup">Written by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp94576720" class="indexterm"></a><p><acronym class="acronym">PHP</acronym>, also known as <span class="quote">"<span class="quote">PHP:
          Hypertext Preprocessor</span>"</span> is a general-purpose scripting
          language that is especially suited for Web development.
          Capable of being embedded into <acronym class="acronym">HTML</acronym> its
          syntax draws upon C, <span class="trademark">Java</span>TM, and Perl with the intention of
          allowing web developers to write dynamically generated
          webpages quickly.</p><p>To gain support for <acronym class="acronym">PHP</acronym>5 for the
	  <span class="application">Apache</span> web server, begin by
	  installing the
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mod_php5/pkg-descr">www/mod_php5</a>
	  port.</p><p>This will install and configure the modules required
          to support dynamic <acronym class="acronym">PHP</acronym> applications.  Check
          to ensure the following sections have been added to
	  <code class="filename">/usr/local/etc/apache/httpd.conf</code>:</p><pre class="programlisting">LoadModule php5_module        libexec/apache/libphp5.so</pre><pre class="programlisting">AddModule mod_php5.c
    &lt;IfModule mod_php5.c&gt;
        DirectoryIndex index.php index.html
    &lt;/IfModule&gt;
    &lt;IfModule mod_php5.c&gt;
        AddType application/x-httpd-php .php
        AddType application/x-httpd-php-source .phps
    &lt;/IfModule&gt;</pre><p>Once completed, a simple call to the
            <code class="command">apachectl</code> command for a graceful
            restart is needed to load the <acronym class="acronym">PHP</acronym>
            module:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>apachectl graceful</code></strong></pre><p>The <acronym class="acronym">PHP</acronym> support in FreeBSD is extremely
            modular so the base install is very limited.  It is very easy
            to add support using the
            <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/php5-extensions/pkg-descr">lang/php5-extensions</a> port.
            This port provides a menu driven interface to
            <acronym class="acronym">PHP</acronym> extension installation.
            Alternatively, individual extensions can be installed using
            the appropriate port.</p><p>For instance, to add support for the
	  <span class="application">MySQL</span> database server to
	  <acronym class="acronym">PHP</acronym>5, simply install the
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/databases/php5-mysql/pkg-descr">databases/php5-mysql</a>
	  port.</p><p>After installing an extension, the
            <span class="application">Apache</span> server must be reloaded to
              pick up the new configuration changes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>apachectl graceful</code></strong></pre></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-dns.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="network-ftp.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">25.6. Domain Name System (<acronym class="acronym">DNS</acronym>) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> 25.8. File Transfer Protocol (FTP)</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>