<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>22.2. Introduction</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Podrêcznik FreeBSD" /><link rel="up" href="serialcomms.html" title="Rozdzia³ 22. Serial Communications" /><link rel="prev" href="serialcomms.html" title="Rozdzia³ 22. Serial Communications" /><link rel="next" href="term.html" title="22.3. Terminals" /><link rel="copyright" href="legalnotice.html" title="Informacja Prawna" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">22.2. Introduction</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="serialcomms.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 22. Serial Communications</th><td width="20%" align="right"> <a accesskey="n" href="term.html">Nastêpny</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="serial"></a>22.2. Introduction</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serial-terminology"></a>22.2.1. Terminology</h3></div></div></div><div class="variablelist"><a id="idp90926160" class="indexterm"></a><dl class="variablelist"><dt><span class="term">bps</span></dt><dd><p>Bits per Second - the rate at which data is
	      transmitted</p></dd><dt><span class="term">DTE</span></dt><dd><a id="idp90929232" class="indexterm"></a><p>Data Terminal Equipment - for example, your
	      computer</p></dd><dt><span class="term">DCE</span></dt><dd><a id="idp90931280" class="indexterm"></a><p>Data Communications Equipment -  your modem</p></dd><dt><span class="term">RS-232</span></dt><dd><a id="idp90933328" class="indexterm"></a><p>EIA standard for hardware serial communications</p></dd></dl></div><p>When talking about communications data rates, this section
	does not use the term <span class="quote">"<span class="quote">baud</span>"</span>.  Baud refers to the
	number of electrical state transitions that may be made in a
	period of time, while <span class="quote">"<span class="quote">bps</span>"</span> (bits per second) is
	the <span class="emphasis"><em>correct</em></span> term to use (at least it does not
	seem to bother the curmudgeons quite as much).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serial-cables-ports"></a>22.2.2. Cables and Ports</h3></div></div></div><p>To connect a modem or terminal to your FreeBSD system, you
	will need a serial port on your computer and the proper cable to connect
	to your serial device.  If you are already familiar with your
	hardware and the cable it requires, you can safely skip this
	section.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-cables"></a>22.2.2.1. Cables</h4></div></div></div><p>There are several different kinds of serial cables.  The
	  two most common types for our purposes are null-modem cables
	  and standard (<span class="quote">"<span class="quote">straight</span>"</span>) RS-232 cables.  The documentation
	  for your hardware should describe the type of cable
	  required.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-cables-null"></a>22.2.2.1.1. Null-modem Cables</h5></div></div></div><a id="idp90939856" class="indexterm"></a><p>A null-modem cable passes some signals, such as <span class="quote">"<span class="quote">Signal
	    Ground</span>"</span>, straight through, but switches other signals.  For
	    example, the <span class="quote">"<span class="quote">Transmitted Data</span>"</span> pin on one end goes to the
	    <span class="quote">"<span class="quote">Received Data</span>"</span> pin on the other end.</p><p>You can also construct your own null-modem cable for use with
	    terminals (e.g., for quality purposes).  This table shows the RS-232C
	    <a class="link" href="dialup.html#serialcomms-signal-names" title="Tabela 22.4. Signal Names">signals</a> and the pin
	    numbers on a DB-25 connector.  Note that the standard also calls for a
	    straight-through pin 1 to pin 1 <span class="emphasis"><em>Protective Ground</em></span>
	    line, but it is often omitted.  Some terminals work OK using only
	    pins 2, 3 and 7, while others require different configurations than
	    the examples shown below.</p><div class="table"><a id="idp90943568"></a><div class="table-title">Tabela 22.1. DB-25 to DB-25 Null-Modem Cable</div><div class="table-contents"><table summary="DB-25 to DB-25 Null-Modem Cable" width="100%" border="0"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="left">Signal</th><th align="left">Pin #</th><th> </th><th align="left">Pin #</th><th align="left">Signal</th></tr></thead><tbody><tr><td>SG</td><td>7</td><td>connects to</td><td>7</td><td>SG</td></tr><tr><td>TD</td><td>2</td><td>connects to</td><td>3</td><td>RD</td></tr><tr><td>RD</td><td>3</td><td>connects to</td><td>2</td><td>TD</td></tr><tr><td>RTS</td><td>4</td><td>connects to</td><td>5</td><td>CTS</td></tr><tr><td>CTS</td><td>5</td><td>connects to</td><td>4</td><td>RTS</td></tr><tr><td>DTR</td><td>20</td><td>connects to</td><td>6</td><td>DSR</td></tr><tr><td>DTR</td><td>20</td><td>connects to</td><td>8</td><td>DCD</td></tr><tr><td>DSR</td><td>6</td><td>connects to</td><td>20</td><td>DTR</td></tr><tr><td>DCD</td><td>8</td><td>connects to</td><td>20</td><td>DTR</td></tr></tbody></table></div></div><br class="table-break" /><p>Here are two other schemes more common nowadays.</p><div class="table"><a id="idp90986576"></a><div class="table-title">Tabela 22.2. DB-9 to DB-9 Null-Modem Cable</div><div class="table-contents"><table summary="DB-9 to DB-9 Null-Modem Cable" width="100%" border="0"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="left">Signal</th><th align="left">Pin #</th><th> </th><th align="left">Pin #</th><th align="left">Signal</th></tr></thead><tbody><tr><td>RD</td><td>2</td><td>connects to</td><td>3</td><td>TD</td></tr><tr><td>TD</td><td>3</td><td>connects to</td><td>2</td><td>RD</td></tr><tr><td>DTR</td><td>4</td><td>connects to</td><td>6</td><td>DSR</td></tr><tr><td>DTR</td><td>4</td><td>connects to</td><td>1</td><td>DCD</td></tr><tr><td>SG</td><td>5</td><td>connects to</td><td>5</td><td>SG</td></tr><tr><td>DSR</td><td>6</td><td>connects to</td><td>4</td><td>DTR</td></tr><tr><td>DCD</td><td>1</td><td>connects to</td><td>4</td><td>DTR</td></tr><tr><td>RTS</td><td>7</td><td>connects to</td><td>8</td><td>CTS</td></tr><tr><td>CTS</td><td>8</td><td>connects to</td><td>7</td><td>RTS</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="idp91016784"></a><div class="table-title">Tabela 22.3. DB-9 to DB-25 Null-Modem Cable</div><div class="table-contents"><table summary="DB-9 to DB-25 Null-Modem Cable" width="100%" border="0"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="left">Signal</th><th align="left">Pin #</th><th> </th><th align="left">Pin #</th><th align="left">Signal</th></tr></thead><tbody><tr><td>RD</td><td>2</td><td>connects to</td><td>2</td><td>TD</td></tr><tr><td>TD</td><td>3</td><td>connects to</td><td>3</td><td>RD</td></tr><tr><td>DTR</td><td>4</td><td>connects to</td><td>6</td><td>DSR</td></tr><tr><td>DTR</td><td>4</td><td>connects to</td><td>8</td><td>DCD</td></tr><tr><td>SG</td><td>5</td><td>connects to</td><td>7</td><td>SG</td></tr><tr><td>DSR</td><td>6</td><td>connects to</td><td>20</td><td>DTR</td></tr><tr><td>DCD</td><td>1</td><td>connects to</td><td>20</td><td>DTR</td></tr><tr><td>RTS</td><td>7</td><td>connects to</td><td>5</td><td>CTS</td></tr><tr><td>CTS</td><td>8</td><td>connects to</td><td>4</td><td>RTS</td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">When one pin at one end connects to a pair of pins
	      at the other end, it is usually implemented with one short
	      wire between the pair of pins in their connector and a
	      long wire to the other single pin.</p></div><p>The above designs seems to be the most popular.  In another
	    variation (explained in the book <span class="emphasis"><em>RS-232 Made
	      Easy</em></span>) SG connects to SG, TD connects to RD, RTS and
	    CTS connect to DCD, DTR connects to DSR, and vice-versa.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-cables-std"></a>22.2.2.1.2. Standard RS-232C Cables</h5></div></div></div><a id="idp91053520" class="indexterm"></a><p>A standard serial cable passes all of the RS-232C signals
	    straight through.  That is, the <span class="quote">"<span class="quote">Transmitted Data</span>"</span> pin on one
	    end of the cable goes to the <span class="quote">"<span class="quote">Transmitted Data</span>"</span> pin on the
	    other end. This is the type of cable to use to connect a modem to your
	    FreeBSD system, and is also appropriate for some
	    terminals.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-ports"></a>22.2.2.2. Ports</h4></div></div></div><p>Serial ports are the devices through which data is transferred
	  between the FreeBSD host computer and the terminal. This section
	  describes the kinds of ports that exist and how they are addressed
	  in FreeBSD.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-portkinds"></a>22.2.2.2.1. Kinds of Ports</h5></div></div></div><p>Several kinds of serial ports exist.  Before you purchase or
	    construct a cable, you need to make sure it will fit the ports on
	    your terminal and on the FreeBSD system.</p><p>Most terminals will have DB-25 ports.  Personal computers,
	    including PCs running FreeBSD, will have DB-25 or DB-9 ports. If you
	    have a multiport serial card for your PC, you may have RJ-12 or
	    RJ-45 ports.</p><p>See the documentation that accompanied the hardware for
	    specifications on the kind of port in use.  A visual inspection of
	    the port often works too.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-portnames"></a>22.2.2.2.2. Port Names</h5></div></div></div><p>In FreeBSD, you access each serial port through an entry in
	    the <code class="filename">/dev</code> directory.  There are two different
	    kinds of entries:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Call-in ports are named
		<code class="filename">/dev/ttydN</code>
		where <em class="replaceable"><code>N</code></em> is the port number,
		starting from zero.  Generally, you use the call-in port for
		terminals.  Call-in ports require that the serial line assert
		the data carrier detect (DCD) signal to work correctly.</p></li><li class="listitem"><p>Call-out ports are named
		<code class="filename">/dev/cuadN</code>.
		You usually do not use the call-out port for terminals, just
		for modems.  You may use the call-out port if the serial cable
		or the terminal does not support the carrier detect
		signal.</p><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">Call-out ports are named
		<code class="filename">/dev/cuaaN</code> in
		FreeBSD 5.X and older.</p></div></li></ul></div><p>If you have connected a terminal to the first serial port
	    (<code class="filename">COM1</code> in <span class="trademark">MS-DOS</span>(R)), then you will
	    use <code class="filename">/dev/ttyd0</code> to refer to the terminal.  If
	    the terminal is on the second serial port (also known as
	    <code class="filename">COM2</code>), use
	    <code class="filename">/dev/ttyd1</code>, and so forth.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91071312"></a>22.2.3. Kernel Configuration</h3></div></div></div><p>FreeBSD supports four serial ports by default.  In the
	<span class="trademark">MS-DOS</span>(R) world, these are known as
	<code class="filename">COM1</code>,
	<code class="filename">COM2</code>,
	<code class="filename">COM3</code>, and
	<code class="filename">COM4</code>.  FreeBSD currently supports
	<span class="quote">"<span class="quote">dumb</span>"</span> multiport serial interface cards, such as
	the BocaBoard 1008 and 2016, as well as more
	intelligent multi-port cards such as those made by Digiboard
	and Stallion Technologies.  However, the default kernel only looks
	for the standard COM ports.</p><p>To see if your kernel recognizes any of your serial ports, watch
	for messages while the kernel is booting, or use the
	<code class="command">/sbin/dmesg</code> command to replay the kernel's boot
	messages.  In particular, look for messages that start with the
	characters <code class="literal">sio</code>.</p><div xmlns="" class="tip"><h3 class="admontitle">Podpowied¼: </h3><p xmlns="http://www.w3.org/1999/xhtml">To view just the messages that have the word
	<code class="literal">sio</code>, use the command:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/dmesg | grep 'sio'</code></strong></pre></div><p>For example, on a system with four serial ports, these are the
	serial-port specific kernel boot messages:</p><pre class="screen">sio0 at 0x3f8-0x3ff irq 4 on isa
sio0: type 16550A
sio1 at 0x2f8-0x2ff irq 3 on isa
sio1: type 16550A
sio2 at 0x3e8-0x3ef irq 5 on isa
sio2: type 16550A
sio3 at 0x2e8-0x2ef irq 9 on isa
sio3: type 16550A</pre><p>If your kernel does not recognize all of your serial
	ports, you will probably need to configure your kernel
	in the <code class="filename">/boot/device.hints</code> file.  You can
	also comment-out or completely remove lines for devices you do not
	have.</p><p>Please refer to the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> manual page for
	more information on serial ports and multiport boards configuration.
	Be careful if you are using a configuration
	file that was previously used for a different version of
	FreeBSD because the device flags and the syntax have changed between
	versions.</p><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="literal">port IO_COM1</code> is a substitution for
	  <code class="literal">port 0x3f8</code>, <code class="literal">IO_COM2</code> is
	  <code class="literal">0x2f8</code>, <code class="literal">IO_COM3</code> is
	  <code class="literal">0x3e8</code>, and <code class="literal">IO_COM4</code> is
	  <code class="literal">0x2e8</code>, which are fairly common port addresses for
	  their respective serial ports; interrupts 4, 3, 5, and 9 are fairly
	  common interrupt request lines.  Also note that regular serial ports
	  <span class="emphasis"><em>cannot</em></span> share interrupts on ISA-bus PCs
	  (multiport boards have on-board electronics that allow all the
	  16550A's on the board to share one or two interrupt request
	  lines).</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91093584"></a>22.2.4. Device Special Files</h3></div></div></div><p>Most devices in the kernel are accessed through <span class="quote">"<span class="quote">device
	special files</span>"</span>, which are located in the
	<code class="filename">/dev</code> directory.  The <code class="filename">sio</code>
	devices are accessed through the
	<code class="filename">/dev/ttydN</code> (dial-in)
	and <code class="filename">/dev/cuadN</code>
	(call-out) devices.  FreeBSD also provides initialization devices
	(<code class="filename">/dev/ttydN.init</code> and
	<code class="filename">/dev/cuadN.init</code> on
	FreeBSD 6.X,
	<code class="filename">/dev/ttyidN</code> and
	<code class="filename">/dev/cuaiaN</code> on
	FreeBSD 5.X) and
	locking devices
	(<code class="filename">/dev/ttydN.lock</code> and
	<code class="filename">/dev/cuadN.lock</code> on
	FreeBSD 6.X,
	<code class="filename">/dev/ttyldN</code> and
	<code class="filename">/dev/cualaN</code> on
	FreeBSD 5.X).  The
	initialization devices are used to initialize communications port
	parameters each time a port is opened, such as
	<code class="literal">crtscts</code> for modems which use
	<code class="literal">RTS/CTS</code> signaling for flow control.  The locking
	devices are used to lock flags on ports to prevent users or programs
	changing certain parameters; see the manual pages <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=termios&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">termios</span>(4)</span></a>,
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a>, and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a> for
	information on the terminal settings, locking and initializing
	devices, and setting terminal options, respectively.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serial-hw-config"></a>22.2.5. Serial Port Configuration</h3></div></div></div><a id="idp91103824" class="indexterm"></a><a id="idp91104464" class="indexterm"></a><p>The <code class="filename">ttydN</code> (or
      <code class="filename">cuadN</code>) device is the
      regular device you will want to open for your applications.  When a
      process opens the device, it will have a default set of terminal I/O
      settings.  You can see these settings with the command</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>stty -a -f /dev/ttyd1</code></strong></pre><p>When you change the settings to this device, the settings are in
      effect until the device is closed.  When it is reopened, it goes back to
      the default set.  To make changes to the default set, you can open and
      adjust the settings of the <span class="quote">"<span class="quote">initial state</span>"</span> device. For
      example, to turn on <code class="option">CLOCAL</code> mode, 8 bit communication,
      and <code class="option">XON/XOFF</code> flow control by default for
      <code class="filename">ttyd5</code>, type:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>stty -f /dev/ttyd5.init clocal cs8 ixon ixoff</code></strong></pre><a id="idp91134672" class="indexterm"></a><p>System-wide initialization of the serial devices is
      controlled in <code class="filename">/etc/rc.d/serial</code>.  This file
      affects the default settings of serial devices.</p><p>To prevent certain settings from being changed by an
      application, make adjustments to the <span class="quote">"<span class="quote">lock state</span>"</span>
      device.  For example, to lock the speed of
      <code class="filename">ttyd5</code> to 57600 bps, type:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>stty -f /dev/ttyd5.lock 57600</code></strong></pre><p>Now, an application that opens
      <code class="filename">ttyd5</code> and tries to change the speed of
      the port will be stuck with 57600 bps.</p><p>Naturally, you should make the initial state and lock state devices
      writable only by the <code class="systemitem">root</code> account.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="serialcomms.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="serialcomms.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="term.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">Rozdzia³ 22. Serial Communications </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> 22.3. Terminals</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>