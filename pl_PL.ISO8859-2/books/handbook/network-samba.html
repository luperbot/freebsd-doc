<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>25.9. File and Print Services for Microsoft(R) Windows(R) clients (Samba)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Podrêcznik FreeBSD" /><link rel="up" href="network-servers.html" title="Rozdzia³ 25. Network Servers" /><link rel="prev" href="network-ftp.html" title="25.8. File Transfer Protocol (FTP)" /><link rel="next" href="network-ntp.html" title="25.10. Clock Synchronization with NTP" /><link rel="copyright" href="legalnotice.html" title="Informacja Prawna" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">25.9. File and Print Services for <span class="trademark">Microsoft</span>(R) <span class="trademark">Windows</span>(R) clients (Samba)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-ftp.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 25. Network Servers</th><td width="20%" align="right"> <a accesskey="n" href="network-ntp.html">Nastêpny</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-samba"></a>25.9. File and Print Services for <span class="trademark">Microsoft</span>(R) <span class="trademark">Windows</span>(R) clients (Samba)</h2></div><div><span class="authorgroup">Contributed by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp94633424" class="indexterm"></a><a id="idp94633936" class="indexterm"></a><a id="idp94634448" class="indexterm"></a><a id="idp94635600" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94636752"></a>25.9.1. Overview</h3></div></div></div><p><span class="application">Samba</span> is a popular open source
        software package that provides file and print services for
        <span class="trademark">Microsoft</span>(R) <span class="trademark">Windows</span>(R) clients.  Such clients can connect to and
        use FreeBSD filespace as if it was a local disk drive, or
        FreeBSD printers as if they were local printers.</p><p><span class="application">Samba</span> software packages should
        be included on your FreeBSD installation media.  If you did
        not install <span class="application">Samba</span> when you first
        installed FreeBSD, then you can install it from the <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/samba3/pkg-descr">net/samba3</a> port or package.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94641104"></a>25.9.2. Configuration</h3></div></div></div><p>A default <span class="application">Samba</span> configuration
        file is installed as
        <code class="filename">/usr/local/etc/smb.conf.default</code>.  This
        file must be copied to
        <code class="filename">/usr/local/etc/smb.conf</code> and customized
        before <span class="application">Samba</span> can be used.</p><p>The <code class="filename">smb.conf</code> file contains runtime
        configuration information for
        <span class="application">Samba</span>, such as definitions of the
        printers and <span class="quote">"<span class="quote">file system shares</span>"</span> that you would
        like to share with <span class="trademark">Windows</span>(R) clients.  The
        <span class="application">Samba</span> package includes a web based
        tool called <span class="application">swat</span> which provides a
        simple way of configuring the <code class="filename">smb.conf</code>
        file.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94655184"></a>25.9.2.1. Using the Samba Web Administration Tool (SWAT)</h4></div></div></div><p>The Samba Web Administration Tool (SWAT) runs as a
	  daemon from <span class="application">inetd</span>.  Therefore, the
	  following line in <code class="filename">/etc/inetd.conf</code>
	  should be uncommented before <span class="application">swat</span> can be
	  used to configure <span class="application">Samba</span>:</p><pre class="programlisting">swat   stream  tcp     nowait/400      root    /usr/local/sbin/swat</pre><p>As explained in <a class="xref" href="network-inetd.html#network-inetd-reread" title="Przyk³ad 25.1. Reloading the inetd configuration file">Przyk³ad 25.1, "Reloading the <span class="application">inetd</span>
	  configuration file"</a>,
          the <span class="application">inetd</span> must be reloaded after this configuration
          file is changed.</p><p>Once <span class="application">swat</span> has been enabled in
	  <code class="filename">inetd.conf</code>, you can use a browser to
	  connect to <code class="uri"><a class="uri" href="http://localhost:901" target="_top">http://localhost:901</a></code>.  You will
	  first have to log on with the system <code class="systemitem">root</code> account.</p><p>Once you have successfully logged on to the main
	  <span class="application">Samba</span> configuration page, you can
	  browse the system documentation, or begin by clicking on the
	  <span class="guimenu">Globals</span> tab.  The <span class="guimenu">Globals</span> section corresponds to the
	  variables that are set in the <code class="literal">[global]</code>
	  section of
	  <code class="filename">/usr/local/etc/smb.conf</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94668368"></a>25.9.2.2. Global Settings</h4></div></div></div><p>Whether you are using <span class="application">swat</span> or
	  editing <code class="filename">/usr/local/etc/smb.conf</code>
	  directly, the first directives you are likely to encounter
	  when configuring <span class="application">Samba</span>
	  are:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">workgroup</code></span></dt><dd><p>NT Domain-Name or Workgroup-Name for the computers
	        that will be accessing this server.</p></dd><dt><span class="term"><code class="literal">netbios name</code></span></dt><dd><p>This sets the NetBIOS<a id="idp94673744" class="indexterm"></a> name by which a <span class="application">Samba</span> server
		is known. By default it is the same as the first
		component of the host's DNS name.</p></dd><dt><span class="term"><code class="literal">server string</code></span></dt><dd><p>This sets the string that will be displayed with
		the <code class="command">net view</code> command and some other
		networking tools that seek to display descriptive text
		about the server.</p></dd></dl></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94677456"></a>25.9.2.3. Security Settings</h4></div></div></div><p>Two of the most important settings in
	  <code class="filename">/usr/local/etc/smb.conf</code> are the
	  security model chosen, and the backend password format for
	  client users.  The following directives control these
	  options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">security</code></span></dt><dd><p>The two most common options here are
	        <code class="literal">security = share</code> and <code class="literal">security
	        = user</code>.  If your clients use usernames that
	        are the same as their usernames on your FreeBSD machine
	        then you will want to use user level security.  This
	        is the default security policy and it requires clients
	        to first log on before they can access shared
	        resources.</p><p>In share level security, client do not need to log
	        onto the server with a valid username and password
	        before attempting to connect to a shared resource.
	        This was the default security model for older versions
	        of <span class="application">Samba</span>.</p></dd><dt><span class="term"><code class="literal">passdb backend</code></span></dt><dd><p><span class="application">Samba</span> has several
	        different backend authentication models.  You can
	        authenticate clients with LDAP<a id="idp94683984" class="indexterm"></a>, NIS+<a id="idp94684496" class="indexterm"></a>, a SQL database<a id="idp94685008" class="indexterm"></a>,
	        or a modified password file.  The default
	        authentication method is <code class="literal">smbpasswd</code>,
	        and that is all that will be covered here.</p></dd></dl></div><p>Assuming that the default <code class="literal">smbpasswd</code>
	  backend is used, the
	  <code class="filename">/usr/local/private/smbpasswd</code> file must
	  be created to allow <span class="application">Samba</span> to
	  authenticate clients.  If you would like to give all of
	  your <span class="trademark">UNIX</span>(R) user accounts access from <span class="trademark">Windows</span>(R) clients, use the
	  following command:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>grep -v "^#" /etc/passwd | make_smbpasswd &gt; /usr/local/private/smbpasswd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 600 /usr/local/private/smbpasswd</code></strong></pre><p>Please see the <span class="application">Samba</span>
	  documentation for additional information about configuration
	  options.  With the basics outlined here, you should have
	  everything you need to start running
	  <span class="application">Samba</span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94696272"></a>25.9.3. Starting <span class="application">Samba</span></h3></div></div></div><p>To enable <span class="application">Samba</span> when your
        system boots, add the following line to
        <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">samba_enable="YES"</pre><p>You can then start <span class="application">Samba</span> at any
        time by typing:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/samba.sh start</code></strong>
Starting SAMBA: removing stale tdbs :
Starting nmbd.
Starting smbd.</pre><p><span class="application">Samba</span> actually consists of
        three separate daemons.  You should see that both the
        <span class="application">nmbd</span> and <span class="application">smbd</span> daemons
        are started by the <code class="filename">samba.sh</code> script.  If
        you enabled winbind name resolution services in
        <code class="filename">smb.conf</code>, then you will also see that
        the <span class="application">winbindd</span> daemon is started.</p><p>You can stop <span class="application">Samba</span> at any time
        by typing :</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/samba.sh stop</code></strong></pre><p><span class="application">Samba</span> is a complex software
        suite with functionality that allows broad integration with
        <span class="trademark">Microsoft</span>(R) <span class="trademark">Windows</span>(R) networks.  For more information about
        functionality beyond the basic installation described here,
        please see <code class="uri"><a class="uri" href="http://www.samba.org" target="_top">http://www.samba.org</a></code>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-ftp.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="network-ntp.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">25.8. File Transfer Protocol (FTP) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> 25.10. Clock Synchronization with NTP</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>