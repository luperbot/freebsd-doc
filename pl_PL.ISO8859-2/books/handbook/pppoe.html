<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>23.5. Using PPP over Ethernet (PPPoE)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Podrêcznik FreeBSD" /><link rel="up" href="ppp-and-slip.html" title="Rozdzia³ 23. PPP and SLIP" /><link rel="prev" href="ppp-troubleshoot.html" title="23.4. Troubleshooting PPP Connections" /><link rel="next" href="pppoa.html" title="23.6. Using PPP over ATM (PPPoA)" /><link rel="copyright" href="legalnotice.html" title="Informacja Prawna" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">23.5. Using PPP over Ethernet (PPPoE)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ppp-troubleshoot.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 23. PPP and SLIP</th><td width="20%" align="right"> <a accesskey="n" href="pppoa.html">Nastêpny</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pppoe"></a>23.5. Using PPP over Ethernet (PPPoE)</h2></div><div><span class="authorgroup">Contributed (from http://node.to/freebsd/how-tos/how-to-freebsd-pppoe.html) by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div></div></div><a id="idp92374864" class="indexterm"></a><a id="idp92375632" class="indexterm"></a><p>This section describes how to set up PPP over Ethernet
      (<acronym class="acronym">PPPoE</acronym>).</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92377552"></a>23.5.1. Configuring the Kernel</h3></div></div></div><p>No kernel configuration is necessary for PPPoE any longer.  If
	the necessary netgraph support is not built into the kernel, it will
        be dynamically loaded by <span class="application">ppp</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92379088"></a>23.5.2. Setting Up <code class="filename">ppp.conf</code></h3></div></div></div><p>Here is an example of a working
        <code class="filename">ppp.conf</code>:</p><pre class="programlisting">default:
  set log Phase tun command # you can add more detailed logging if you wish
  set ifaddr 10.0.0.1/0 10.0.0.2/0

name_of_service_provider:
  set device PPPoE:<em class="replaceable"><code>xl1</code></em> # replace xl1 with your Ethernet device
  set authname YOURLOGINNAME
  set authkey YOURPASSWORD
  set dial
  set login
  add default HISADDR</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92385872"></a>23.5.3. Running <span class="application">ppp</span></h3></div></div></div><p>As <code class="systemitem">root</code>, you can run:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp -ddial name_of_service_provider</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92388688"></a>23.5.4. Starting <span class="application">ppp</span> at Boot</h3></div></div></div><p>Add the following to your <code class="filename">/etc/rc.conf</code>
        file:</p><pre class="programlisting">ppp_enable="YES"
ppp_mode="ddial"
ppp_nat="YES"	# if you want to enable nat for your local network, otherwise NO
ppp_profile="name_of_service_provider"</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92390992"></a>23.5.5. Using a PPPoE Service Tag</h3></div></div></div><p>Sometimes it will be necessary to use a service tag to establish
	your connection.  Service tags are used to distinguish between
	different PPPoE servers attached to a given network.</p><p>You should have been given any required service tag information
	in the documentation provided by your ISP.  If you cannot locate
	it there, ask your ISP's tech support personnel.</p><p>As a last resort, you could try the method suggested by the
	<a class="link" href="http://www.roaringpenguin.com/pppoe/" target="_top">Roaring Penguin
	PPPoE</a> program which can be found in the <a class="link" href="ports.html" title="Rozdzia³ 4. Instalacja programów: pakiety i porty">Ports Collection</a>.  Bear in mind however,
	this may de-program your modem and render it useless, so
	think twice before doing it.  Simply install the program shipped
	with the modem by your provider.  Then, access the
	<span class="guimenu">System</span> menu from the program.  The name of your
	profile should be listed there.  It is usually
	<span class="emphasis"><em>ISP</em></span>.</p><p>The profile name (service tag) will be used in the PPPoE
	configuration entry in <code class="filename">ppp.conf</code> as the provider
	part of the <code class="command">set device</code> command (see the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	manual page for full details).  It should look like this:</p><pre class="programlisting">set device PPPoE:<em class="replaceable"><code>xl1</code></em>:<em class="replaceable"><code>ISP</code></em></pre><p>Do not forget to change <em class="replaceable"><code>xl1</code></em>
	to the proper device for your Ethernet card.</p><p>Do not forget to change <em class="replaceable"><code>ISP</code></em>
	to the profile you have just found above.</p><p>For additional information, see:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://renaud.waldura.com/doc/freebsd/pppoe/" target="_top">Cheaper
	    Broadband with FreeBSD on DSL</a> by Renaud
	    Waldura.</p></li><li class="listitem"><p><a class="link" href="http://www.ruhr.de/home/nathan/FreeBSD/tdsl-freebsd.html" target="_top">
	      Nutzung von T-DSL und T-Online mit FreeBSD</a>
	    by Udo Erdelhoff (in German).</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ppp-3com"></a>23.5.6. PPPoE with a <span class="trademark">3Com</span>(R) <span class="trademark">HomeConnect</span>(R) ADSL Modem Dual Link</h3></div></div></div><p>This modem does not follow <a class="link" href="http://www.faqs.org/rfcs/rfc2516.html" target="_top">RFC 2516</a>
	(<span class="emphasis"><em>A Method for transmitting PPP over Ethernet
	(PPPoE)</em></span>, written by L. Mamakos, K. Lidl, J. Evarts,
	D. Carrel, D. Simone, and R. Wheeler).  Instead, different packet
	type codes have been used for the Ethernet frames.  Please complain
	to <a class="link" href="http://www.3com.com/" target="_top">3Com</a> if you think it
	should comply with the PPPoE specification.</p><p>In order to make FreeBSD capable of communicating with this
	device, a sysctl must be set.  This can be done automatically at
	boot time by updating <code class="filename">/etc/sysctl.conf</code>:</p><pre class="programlisting">net.graph.nonstandard_pppoe=1</pre><p>or can be done immediately with the command:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl net.graph.nonstandard_pppoe=1</code></strong></pre><p>Unfortunately, because this is a system-wide setting, it is
	not possible to talk to a normal PPPoE client or server and a
	<span class="trademark">3Com</span>(R) <span class="trademark">HomeConnect</span>(R) ADSL Modem at the same time.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ppp-troubleshoot.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="ppp-and-slip.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="pppoa.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">23.4. Troubleshooting <acronym class="acronym">PPP</acronym> Connections </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> 23.6. Using <span class="application">PPP</span> over ATM (PPPoA)</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>