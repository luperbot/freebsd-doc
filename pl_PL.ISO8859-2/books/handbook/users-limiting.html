<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>13.7. Ograniczanie u¿ytkowników</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Podrêcznik FreeBSD" /><link rel="up" href="users.html" title="Rozdzia³ 13. U¿ytkownicy i podstawy zarz±dzania kontami" /><link rel="prev" href="users-modifying.html" title="13.6. Modyfikacja ustawieñ kont" /><link rel="next" href="users-groups.html" title="13.8. Grupy" /><link rel="copyright" href="legalnotice.html" title="Informacja Prawna" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">13.7. Ograniczanie u¿ytkowników</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="users-modifying.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 13. U¿ytkownicy i podstawy zarz±dzania kontami</th><td width="20%" align="right"> <a accesskey="n" href="users-groups.html">Nastêpny</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-limiting"></a>13.7. Ograniczanie u¿ytkowników</h2></div></div></div><a id="idp85463760" class="indexterm"></a><a id="idp85464272" class="indexterm"></a><p>Je¶li w naszym systemie mamy wielu u¿ytkowników konieczne
      mo¿e siê okazaæ ograniczenie ich mo¿liwo¶ci.  FreeBSD posiada kilka
      sposobów na ograniczenie ilo¶æ zasobów systemowych, które dana
      osoba mo¿e wykorzystaæ.  Ograniczenia te s± podzielone na dwie
      grupy: udzia³y dyskowe i limity innych zasobów.</p><a id="idp85465808" class="indexterm"></a><a id="idp85466320" class="indexterm"></a><a id="idp85467472" class="indexterm"></a><p>Udzia³y dyskowe (ang. quota) ograniczaj± dostêpn±
      u¿ytkownikowi przestrzeñ na dysku.  Umo¿liwiaj± równie¿
      szybkie sprawdzenie stopnia jej wykorzystania bez konieczno¶ci
      ka¿dorazowego przeliczania.  Udzia³y dyskowe szczegó³owo
      omawia <a class="xref" href="quotas.html" title="17.15. File System Quotas">Sekcja 17.15, "File System Quotas"</a>.</p><p>Pozosta³e limity daj± mo¿liwo¶æ ograniczenia
      wykorzystania czasu procesora, pamiêci i innych zasobów,
      z których mo¿e korzystaæ u¿ytkownik.  Definiuje siê je
      przy wykorzystaniu klas logowania i to w³a¶nie one
      zosta³y tutaj opisane.</p><a id="idp85469136" class="indexterm"></a><p>Klasy logowania okre¶lane s± w pliku
      <code class="filename">/etc/login.conf</code>.  Szczegó³owa semantyka wykracza
      dalece poza ramy tej sekcji.  Jej pe³en opis znale¼æ mo¿na
      w podrêczniku systemowym <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.  W tym momencie
      wystarczy powiedzieæ, ¿e ka¿dy u¿ytkownik posiada przypisan±
      klasê logowania (domy¶lnie jest to klasa <code class="literal">default</code>)
      przy czym ka¿da klasa logowania dysponuje zestawem uprawnieñ.
      Uprawnieniami logowania s± pary
      <code class="literal">nazwa=warto¶æ</code>,
      gdzie <em class="replaceable"><code>nazwa</code></em> jest identyfikatorem
      a <em class="replaceable"><code>warto¶æ</code></em> dowolnym ci±giem przetwarzanym
      w sposób zale¿ny od nazwy.  Konfiguracja klas logowania i uprawnieñ
      jest stosunkowo prostym zadaniem i równie¿ zosta³a opisana na stronach
      podrêcznika systemowego <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">Normalnie system nie odczytuje konfiguracji bezpo¶rednio z pliku
	<code class="filename">/etc/login.conf</code>, lecz odczytuje plik bazy danych
	<code class="filename">/etc/login.conf.db</code>, który umo¿liwia szybsze
	przeszukiwanie.  By wygenerowaæ plik <code class="filename">/etc/login.conf.db</code>
	z <code class="filename">/etc/login.conf</code> nale¿y uruchomiæ nastêpuj±ce
	polecenie:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cap_mkdb /etc/login.conf</code></strong></pre></div><p>Limity zasobów ró¿ni± siê od typowych uprawnieñ logowania.
      Po pierwsze, dla ka¿dego limitu istnieje tzw. miêkki (aktualny)
      i twardy limit.  Limit miêkki mo¿e byæ zmieniany przez u¿ytkownika
      b±d¼ aplikacjê, lecz nie mo¿e byæ wiêkszy od twardego.  Twardy natomiast
      mo¿e byæ zmniejszony przez u¿ytkownika, lecz nie podwy¿szony.
      Po drugie, wiêkszo¶æ limitów zasobów dotyczy procesów danego
      u¿ytkownika, nie u¿ytkownika jako ca³o¶ci.  Przy czym zauwa¿yæ nale¿y,
      ¿e ró¿nice te wynikaj± ze wzglêdu na odmienne metody zarz±dzania
      limitami, nie za¶ na implementacjê struktury uprawnieñ logowania
      (np. nie s± one <span class="emphasis"><em>na prawdê</em></span> specjalnym przypadkiem
      uprawnieñ logowania).</p><p>Zatem, bez dalszych wstêpów, zestawione poni¿ej zosta³y
      najczê¶ciej wykorzystywane limity zasobów (opis pozosta³ych,
      razem z innymi uprawnieniami logowania, odnale¼æ mo¿na
      w podrêczniku <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>).</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">coredumpsize</code></span></dt><dd><a id="idp85488720" class="indexterm"></a><a id="idp85489232" class="indexterm"></a><p>Ograniczenie rozmiaru pliku rdzenia generowanego
          przez program.  Jest ono - z oczywistych powodów - podrzêdne
          w stosunku do innych limitów wykorzystania przestrzeni dysku
	  (np. <code class="literal">filesize</code> b±d¼ udzia³ów dyskowych).
	  Niemniej, limit ten jest powszechnie stosowany jako mniej
          surowa metoda kontroli wykorzystania przestrzeni na dysku:
          skoro u¿ytkownicy sami nie generuj± plików rdzenia i czêsto ich
          nie usuwaj±, ustawienie tego limitu mo¿e uchroniæ ich od utraty
          wolnej przestrzeni na dysku gdy du¿y program (np.
	  <span class="application">emacs</span>) ulegnie awarii.</p></dd><dt><span class="term"><code class="literal">cputime</code></span></dt><dd><a id="idp85492816" class="indexterm"></a><a id="idp85493328" class="indexterm"></a><p>Jest to maksymalny czas procesora jaki mo¿e poch³aniaæ
            proces u¿ytkownika.  Procesy przekraczaj±ce zostan± zniszczone przez j±dro.

	    </p><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">Jest to ograniczenie ilo¶ci wykorzystywanego <span class="emphasis"><em>czasu</em></span>
	        procesora, nie procent wykorzystania jaki wy¶wietlany jest w niektórych
	        polach <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> i <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a>.  Ograniczenie tego drugiego, na chwilê
	        pisania tego tekstu, nie jest mo¿liwe i by³oby raczej bezu¿yteczne:
	        przyk³adowo kompilator - pracuj±cy jako prawdopodobnie uzasadnione zadanie -
	        mo¿e bardzo ³atwo przez pewien czas zaj±æ prawie 100% procesora.</p></div><p>
	  </p></dd><dt><span class="term"><code class="literal">filesize</code></span></dt><dd><a id="idp85498960" class="indexterm"></a><a id="idp85499472" class="indexterm"></a><p>Jest to maksymalny rozmiar pliku, który mo¿e posiadaæ u¿ytkownik.
	    W przeciwieñstwie do <a class="link" href="quotas.html" title="17.15. File System Quotas">udzia³ów dyskowych</a>, limit
	    ten rzutuje na wielko¶æ poszczególnych plików, których w³a¶cicielem jest
            u¿ytkownik, nie za¶ na wszystkie jako ca³o¶æ.</p></dd><dt><span class="term"><code class="literal">maxproc</code></span></dt><dd><a id="idp85502800" class="indexterm"></a><a id="idp85503312" class="indexterm"></a><p>Jest to maksymalna liczba procesów, które u¿ytkownik mo¿e
            uruchomiæ.  Dotyczy to zarówno procesy pierwszoplanowe jak i
            pracuj±ce w tle.  Z oczywistych wzglêdów, warto¶æ ta nie mo¿e
            byæ wiêksza ni¿ ograniczenia systemowe parametru <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>
            <code class="varname">kern.maxproc</code>.  Warto równie¿ zwróciæ uwagê,
            i¿ zbyt niska warto¶æ mo¿e utrudniæ codzienn± pracê: do¶æ czêsto
            okazuje siê byæ przydatn± mo¿liwo¶æ zalogowania siê w wielu
            sesjach b±d¼ wykonywania poleceñ potokowo.  Niektóre zadania,
            jak np. kompilacja du¿ego programu, równie¿ tworz± wiele procesów
            (np. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cc</span>(1)</span></a> i inne preprocesory po¶rednie).</p></dd><dt><span class="term"><code class="literal">memorylocked</code></span></dt><dd><a id="idp85517136" class="indexterm"></a><a id="idp85517648" class="indexterm"></a><p>Jest to maksymalna wielko¶æ pamiêci jakiej proces
            u¿ytkownika mo¿e zablokowaæ w pamiêci g³ównej
            (np. patrz <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mlock&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">mlock</span>(2)</span></a>).  Niektóre bardzo istotne
            dla poprawnego funkcjonowania systemu programy, jak np.
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a>, blokuj± siê w g³ównej pamiêci w taki sposób,
            ¿e w przypadku problemów nie przyk³adaj± siê do zniszczenia
            systemu.</p></dd><dt><span class="term"><code class="literal">memoryuse</code></span></dt><dd><a id="idp85542608" class="indexterm"></a><a id="idp85543120" class="indexterm"></a><p>Jest to maksymalna wielko¶æ pamiêci, któr± proces
            mo¿e w danym czasie wykorzystaæ.  Dotyczy to zarówno pamiêci
            g³ównej jak i przestrzeni wymiany.  Limit ten nie
            wy³apuje wszystkich potencjalnych sytuacji wymagaj±cych
            ograniczania wykorzystania pamiêci, lecz stanowi
            dobry pocz±tek.</p></dd><dt><span class="term"><code class="literal">openfiles</code></span></dt><dd><a id="idp85545936" class="indexterm"></a><a id="idp85546448" class="indexterm"></a><p>Jest to maksymalna liczba plików, które proces mo¿e otworzyæ.
            We FreeBSD pliki wykorzystywane s± równie¿ do reprezentacji gniazd
            i kana³ów IPC.  Tym samym nale¿y zachowaæ ostro¿no¶æ przy doborze
            w³a¶ciwej warto¶ci, by nie ustawiæ jej na zbyt nisk±.  Ogólne
            ograniczenie tej warto¶ci dla ca³ego systemu definiowane jest
            przez zmienn± <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> <code class="varname">kern.maxfiles</code>.</p></dd><dt><span class="term"><code class="literal">sbsize</code></span></dt><dd><a id="idp85554640" class="indexterm"></a><a id="idp85555152" class="indexterm"></a><p>Jest to ograniczenie pamiêci sieciowej, w tym
            równie¿ mbufs, któr± mo¿e wykorzystaæ u¿ytkownik.  Limit ten
            zosta³ wprowadzony jako odpowied¼ na stary atak DoS polegaj±cy
            na stworzeniu wielu gniazd sieciowych, lecz mo¿e równie¿
            byæ wykorzystywany jako metoda ograniczenia komunikacji
            sieciowej.</p></dd><dt><span class="term"><code class="literal">stacksize</code></span></dt><dd><a id="idp85557968" class="indexterm"></a><a id="idp85558480" class="indexterm"></a><p>Jest to maksymalny rozmiar, do którego mo¿e urosn±æ stos procesu.
            w pamiêci. Sam z siebie nie jest on wystarczaj±cy by ograniczyæ ilo¶æ
            pamiêci wykorzystywanej przez program.  Powinien byæ stosowany
            w parze z innymi limitami.</p></dd></dl></div><p>Jest jeszcze kilka innych kwestii wartych pamiêtania przy konfiguracji
      limitów zasobów.  Poni¿ej zamieszczonych jest kilka ogólnych porad, sugestii
      i rozmaitych komentarzy.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Procesy uruchomione w trakcie uruchamiania systemu przez
          <code class="filename">/etc/rc</code> s± przypisane do klasy logowania
          <code class="literal">daemon</code>.</p></li><li class="listitem"><p>Chocia¿ plik <code class="filename">/etc/login.conf</code> dostarczany wraz
          z systemem jest dobrym ¼ród³em rozs±dnych warto¶ci dla wiêkszo¶ci ograniczeñ,
          jedynie my - administratorzy - mo¿emy wiedzieæ, co jest odpowiednie dla
          naszego systemu.  Ustawienie zbyt wysokich limitów mo¿e otworzyæ nasz
          system na nadu¿ycia, podczas gdy ustawienie za niskich mo¿e utrudniæ
          codzienn± pracê.</p></li><li class="listitem"><p>U¿ytkownikom Systemu okien X (X11) powinno prawdopodobnie
          przyznaæ siê wiêcej zasobów ni¿ innym u¿ytkownikom.  X11 samo
          z siebie wykorzystuje du¿o zasobów systemowych, lecz równie¿
          zachêca u¿ytkowników do jednoczesnego uruchamiania wiêkszej
          ilo¶ci programów.</p></li><li class="listitem"><p>Pamiêtajmy, ¿e wiele limitów ma zastosowanie do indywidualnych
          procesów, nie u¿ytkownika jako ca³o¶ci.  Przyk³adowo, ustawienie
          <code class="varname">openfiles</code> na 50 oznacza, ¿e ka¿dy proces
          u¿ytkownika mo¿e otworzyæ do 50 plików. Tym samym ca³kowita liczba plików,
          które mo¿e otworzyæ u¿ytkownik wynosi warto¶æ <code class="literal">openfiles</code>
          pomno¿ona o warto¶æ <code class="literal">maxproc</code>.  To samo dotyczy
          konsumpcji pamiêci.</p></li></ul></div><p>Wiêcej informacji o limitach zasobów, klasach logowania i ogólnych
      uprawnieniach znale¼æ mo¿na w odpowiednich podrêcznikach systemowych:
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cap_mkdb&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cap_mkdb</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getrlimit&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">getrlimit</span>(2)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="users-modifying.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="users.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="users-groups.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">13.6. Modyfikacja ustawieñ kont </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> 13.8. Grupy</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>