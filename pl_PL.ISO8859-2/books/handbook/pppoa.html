<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>23.6. Using PPP over ATM (PPPoA)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Podrêcznik FreeBSD" /><link rel="up" href="ppp-and-slip.html" title="Rozdzia³ 23. PPP and SLIP" /><link rel="prev" href="pppoe.html" title="23.5. Using PPP over Ethernet (PPPoE)" /><link rel="next" href="slip.html" title="23.7. Using SLIP" /><link rel="copyright" href="legalnotice.html" title="Informacja Prawna" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">23.6. Using <span class="application">PPP</span> over ATM (PPPoA)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="pppoe.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 23. PPP and SLIP</th><td width="20%" align="right"> <a accesskey="n" href="slip.html">Nastêpny</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pppoa"></a>23.6. Using <span class="application">PPP</span> over ATM (PPPoA)</h2></div></div></div><a id="idp92309200" class="indexterm"></a><a id="idp92309968" class="indexterm"></a><p>The following describes how to set up PPP over ATM (PPPoA).
      PPPoA is a popular choice among European DSL providers.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92311632"></a>23.6.1. Using PPPoA with the Alcatel <span class="trademark">SpeedTouch</span>TM USB</h3></div></div></div><p>PPPoA support for this device is supplied as a port in
	FreeBSD because the firmware is distributed under <a class="link" href="http://www.speedtouchdsl.com/disclaimer_lx.htm" target="_top">Alcatel's
	license agreement</a> and can not be redistributed freely
	with the base system of FreeBSD.</p><p>To install the software, simply use the <a class="link" href="ports.html" title="Rozdzia³ 4. Instalacja programów: pakiety i porty">Ports Collection</a>. Install the
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pppoa/pkg-descr">net/pppoa</a> port and follow the
	instructions provided with it.</p><p>Like many USB devices, the Alcatel <span class="trademark">SpeedTouch</span>TM USB needs to
        download firmware from the host computer to operate properly.
        It is possible to automate this process in FreeBSD so that this
        transfer takes place whenever the device is plugged into a USB
        port.  The following information can be added to the
        <code class="filename">/etc/usbd.conf</code> file to enable this
        automatic firmware transfer.  This file must be edited as the
        <code class="systemitem">root</code> user.</p><pre class="programlisting">device "Alcatel SpeedTouch USB"
    devname "ugen[0-9]+"
    vendor 0x06b9
    product 0x4061
    attach "/usr/local/sbin/modem_run -f /usr/local/libdata/mgmt.o"</pre><p>To enable the USB daemon, <span class="application">usbd</span>,
       put the following the line into
       <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">usbd_enable="YES"</pre><p>It is also possible to set up
       <span class="application">ppp</span> to dial up at startup.  To do
       this add the following lines to
       <code class="filename">/etc/rc.conf</code>.  Again, for this procedure
       you will need to be logged in as the <code class="systemitem">root</code>
       user.</p><pre class="programlisting">ppp_enable="YES"
ppp_mode="ddial"
ppp_profile="adsl"</pre><p>For this to work correctly you will need to have used the
       sample <code class="filename">ppp.conf</code> which is supplied with the
       <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pppoa/pkg-descr">net/pppoa</a> port.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92325968"></a>23.6.2. Using mpd</h3></div></div></div><p>You can use <span class="application">mpd</span> to connect to a
        variety of services, in particular PPTP services. You can find
        <span class="application">mpd</span> in the Ports Collection,
        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/mpd/pkg-descr">net/mpd</a>.  Many ADSL modems
        require that a PPTP tunnel is created between the modem and
        computer, one such modem is the Alcatel <span class="trademark">SpeedTouch</span>TM
        Home.</p><p>First you must install the port, and then you can
        configure <span class="application">mpd</span> to suit your
        requirements and provider settings. The port places a set of
        sample configuration files which are well documented in
        <code class="filename">PREFIX/etc/mpd/</code>.
        Note here that <em class="replaceable"><code>PREFIX</code></em> means the directory
        into which your ports are installed, this defaults to
        <code class="filename">/usr/local/</code>. A complete guide to
        configure <span class="application">mpd</span> is available in
        HTML format once the port has been installed. It is placed in
        <code class="filename">PREFIX/share/doc/mpd/</code>.
        Here is a sample configuration for connecting to an ADSL
        service with <span class="application">mpd</span>. The configuration
        is spread over two files, first the
        <code class="filename">mpd.conf</code>:</p><pre class="programlisting">default:
    load adsl

adsl:
    new -i ng0 adsl adsl
    set bundle authname <em class="replaceable"><code>username</code></em> <a id="co-mpd-ex-user"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
    set bundle password <em class="replaceable"><code>password</code></em> <a id="co-mpd-ex-pass"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
    set bundle disable multilink

    set link no pap acfcomp protocomp
    set link disable chap
    set link accept chap
    set link keep-alive 30 10

    set ipcp no vjcomp
    set ipcp ranges 0.0.0.0/0 0.0.0.0/0

    set iface route default
    set iface disable on-demand
    set iface enable proxy-arp
    set iface idle 0

    open</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-user"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>The username used to authenticate with your ISP.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-pass"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>The password used to authenticate with your ISP.</p></td></tr></table></div><p>The <code class="filename">mpd.links</code> file contains information about
      the link, or links, you wish to establish. An example
      <code class="filename">mpd.links</code> to accompany the above example is given
      beneath:</p><pre class="programlisting">adsl:
    set link type pptp
    set pptp mode active
    set pptp enable originate outcall
    set pptp self <em class="replaceable"><code>10.0.0.1</code></em> <a id="co-mpd-ex-self"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
    set pptp peer <em class="replaceable"><code>10.0.0.138</code></em> <a id="co-mpd-ex-peer"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-self"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>The IP address of your FreeBSD computer which you will be
	  using <span class="application">mpd</span> from.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-peer"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>The IP address of your ADSL modem.  For the Alcatel
	  <span class="trademark">SpeedTouch</span>TM Home this address defaults to <code class="systemitem">10.0.0.138</code>.</p></td></tr></table></div><p>It is possible to initialize the connection easily by issuing the
      following command as <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mpd -b adsl</code></strong></pre><p>You can see the status of the connection with the following
      command:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig ng0</code></strong>
ng0: flags=88d1&lt;UP,POINTOPOINT,RUNNING,NOARP,SIMPLEX,MULTICAST&gt; mtu 1500
     inet 216.136.204.117 --&gt; 204.152.186.171 netmask 0xffffffff</pre><p>Using <span class="application">mpd</span> is the recommended way to
      connect to an ADSL service with FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92355152"></a>23.6.3. Using pptpclient</h3></div></div></div><p>It is also possible to use FreeBSD to connect to other PPPoA
	services using
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pptpclient/pkg-descr">net/pptpclient</a>.</p><p>To use <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pptpclient/pkg-descr">net/pptpclient</a> to
	connect to a DSL service, install the port or package and edit your
	<code class="filename">/etc/ppp/ppp.conf</code>. You will need to be
	<code class="systemitem">root</code> to perform both of these operations. An
	example section of <code class="filename">ppp.conf</code> is given
	below. For further information on <code class="filename">ppp.conf</code>
	options consult the <span class="application">ppp</span> manual page,
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>.</p><pre class="programlisting">adsl:
 set log phase chat lcp ipcp ccp tun command
 set timeout 0
 enable dns
 set authname <em class="replaceable"><code>username</code></em> <a id="co-pptp-ex-user"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
 set authkey <em class="replaceable"><code>password</code></em> <a id="co-pptp-ex-pass"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
 set ifaddr 0 0
 add default HISADDR</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-pptp-ex-user"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>The username of your account with the DSL provider.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-pptp-ex-pass"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>The password for your account.</p></td></tr></table></div><div xmlns="" class="warning"><h3 class="admontitle">Ostrze¿enie: </h3><p xmlns="http://www.w3.org/1999/xhtml">Because you must put your account's password in the
	 <code class="filename">ppp.conf</code> file in plain text form you should
	 make sure than nobody can read the contents of this file. The
	 following series of commands will make sure the file is only
	 readable by the <code class="systemitem">root</code> account. Refer to the
	 manual pages for <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a> and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chown</span>(8)</span></a> for further
	 information.</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chown root:wheel /etc/ppp/ppp.conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 600 /etc/ppp/ppp.conf</code></strong></pre></div><p>This will open a tunnel for a PPP session to your DSL router.
	Ethernet DSL modems have a preconfigured LAN IP address which you
	connect to. In the case of the Alcatel <span class="trademark">SpeedTouch</span>TM Home this address is
	<code class="systemitem">10.0.0.138</code>. Your router documentation
	should tell you which address your device uses. To open the tunnel and
	start a PPP session execute the following
	command:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pptp address adsl</code></strong></pre><div xmlns="" class="tip"><h3 class="admontitle">Podpowied¼: </h3><p xmlns="http://www.w3.org/1999/xhtml">You may wish to add an ampersand (<span class="quote">"<span class="quote">&amp;</span>"</span>) to the
	  end of the previous command because <span class="application">pptp</span>
	  will not return your prompt to you otherwise.</p></div><p>A <code class="filename">tun</code> virtual tunnel device will be
	created for interaction between the <span class="application">pptp</span>
	and <span class="application">ppp</span> processes. Once you have been
	returned to your prompt, or the <span class="application">pptp</span>
	process has confirmed a connection you can examine the tunnel like
	so:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig tun0</code></strong>
tun0: flags=8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500
        inet 216.136.204.21 --&gt; 204.152.186.171 netmask 0xffffff00
        Opened by PID 918</pre><p>If you are unable to connect, check the configuration of
	your router, which is usually accessible via
	<span class="application">telnet</span> or with a web browser. If you still
	cannot connect you should examine the output of the
	<code class="command">pptp</code> command and the contents of the
	<span class="application">ppp</span> log file,
	<code class="filename">/var/log/ppp.log</code> for clues.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pppoe.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="ppp-and-slip.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="slip.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">23.5. Using PPP over Ethernet (PPPoE) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> 23.7. Using SLIP</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>