<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>3.5. Organizacja dysku</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Podrêcznik FreeBSD" /><link rel="up" href="basics.html" title="Rozdzia³ 3. Podstawy Uniksa" /><link rel="prev" href="dirstructure.html" title="3.4. Struktura katalogów" /><link rel="next" href="mount-unmount.html" title="3.6. Montowanie i odmontowywanie systemów plików" /><link rel="copyright" href="legalnotice.html" title="Informacja Prawna" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.5. Organizacja dysku</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dirstructure.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 3. Podstawy Uniksa</th><td width="20%" align="right"> <a accesskey="n" href="mount-unmount.html">Nastêpny</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disk-organization"></a>3.5. Organizacja dysku</h2></div></div></div><p>Najmniejsz± jednostk± organizacji dysku u¿ywan± przez FreeBSD
        do odnajdywania plików jest nazwa pliku. W nazwach plików rozró¿niane
        s± du¿e i ma³e litery, tak wiêc <code class="filename">readme.txt</code>
        i <code class="filename">README.TXT</code> to dwa ró¿ne pliki. FreeBSD
        nie wykorzystuje rozszerzeñ nazw plików (<code class="filename">.txt</code>)
        do okre¶lenia, czy plik jest programem, dokumentem, czy innym
        zbiorem danych.</p><p>Pliki przechowywane s± w katalogach. Katalog mo¿e byæ pusty,
        lub mo¿e zawieraæ setki plików. Mo¿e równie¿ zawieraæ inne katalogi,
        dziêki czemu mamy mo¿liwo¶æ zbudowania hierarchicznej struktury
        katalogów. Pozwala to na ³atw± organizacjê danych.</p><p>Dostêp do plików i katalogów uzyskuje siê podaj±c nazwê pliku
        lub katalogu, poprzedzon± uko¶nikiem <code class="literal">/</code> i innymi
        wymaganymi nazwami katalogów. Je¶li mamy katalog <code class="filename">foo</code>,
        a w nim katalog <code class="filename">bar</code>, w którym znajduje siê plik
        <code class="filename">readme.txt</code>, wówczas pe³n± nazw±, b±d¼ ¶cie¿k±
        dostêpu do pliku jest <code class="filename">foo/bar/readme.txt</code>.</p><p>Katalogi i pliki przechowywane s± w systemie plików. Ka¿dy
        system plików ma jeden katalog najwy¿szego poziomu, zwany <em class="firstterm">katalogiem
        g³ównym</em> systemu plików. W katalogu g³ównym mog± byæ umieszczone
        nastêpne katalogi.</p><p>To, o czym mówimy, jest zapewne podobne do innych systemów operacyjnych,
        z którymi byæ mo¿e zetknêli¶my siê wcze¶niej. S± jednak ró¿nice; na przyk³ad
        w systemie <span class="trademark">MS-DOS</span>(R) nazwy plików i katalogów oddzielane s± znakiem
        <code class="literal">\</code>, w <span class="trademark">Mac OS</span>(R) natomiast znakiem <code class="literal">:</code>.</p><p>We FreeBSD nie s± u¿ywane litery dysków, lub inne nazwy dysków w
        ¶cie¿ce. Nie spotkamy siê w FreeBSD z czym¶ takim jak
        <code class="filename">c:/foo/bar/readme.txt</code>.</p><p>Jest natomiast jeden system plików pe³ni±cy rolê <em class="firstterm">g³ównego
        systemu plików</em>. Zawiera on katalog g³ówny dostêpny jako
        <code class="literal">/</code>. Ka¿dy inny system plików jest <em class="firstterm">montowany</em>
        w g³ównym systemie plików. Niezale¿nie od tego, ile dysków mamy w komputerze,
        we FreeBSD ka¿dy katalog wydaje siê byæ czê¶ci± tego samego dysku.</p><p>Za³ó¿my, ¿e mamy trzy systemy plików, nazwane <code class="literal">A</code>,
	<code class="literal">B</code> i <code class="literal">C</code>. Ka¿dy z nich ma katalog
        g³ówny, zawieraj±cy dwa katalogi o nazwach <code class="literal">A1</code>,
        <code class="literal">A2</code> (oraz odpowiednio
	<code class="literal">B1</code>, <code class="literal">B2</code> i
	<code class="literal">C1</code>, <code class="literal">C2</code>).</p><p>Niech <code class="literal">A</code> bêdzie g³ównym systemem plików.
        Gdyby¶my sprawdzili jego zawarto¶æ poleceniem <code class="command">ls</code>,
        zobaczyliby¶my dwa podkatalogi <code class="literal">A1</code> i
	<code class="literal">A2</code>. Drzewo katalogów wygl±da nastêpuj±co:</p><div class="mediaobject"><img src="install/example-dir1.png" /></div><p>System plików musi byæ montowany w katalogu innego systemu
        plików. Przyjmijmy teraz, ¿e montujemy system plików <code class="literal">B</code>
        w katalogu <code class="literal">A1</code>. G³ówny katalog <code class="literal">B</code>
        zast±pi <code class="literal">A1</code>, a podkatalogi <code class="literal">B</code>
        pojawi± siê w odpowiednim miejscu:</p><div class="mediaobject"><img src="install/example-dir2.png" /></div><p>Do plików znajduj±cych siê w katalogach <code class="literal">B1</code>
        i <code class="literal">B2</code> mo¿na siê dostaæ pos³uguj±c siê ¶cie¿k±
        <code class="filename">/A1/B1</code> lub <code class="filename">/A1/B2</code>.
        Pliki poprzednio obecne w katalogu <code class="filename">/A1</code>
        s± tymczasowo ukryte. Pojawi± siê ponownie po
        <em class="firstterm">odmontowaniu</em>
        <code class="filename">B</code> z <code class="filename">A</code>.</p><p>Gdyby zamontowaæ <code class="literal">B</code> w <code class="literal">A2</code>,
        drzewo katalogów wygl±da³oby tak:</p><div class="mediaobject"><img src="install/example-dir3.png" /></div><p>¶cie¿ki natomiast mia³yby postaæ <code class="filename">/A2/B1</code>
        i <code class="filename">/A2/B2</code>.</p><p>Systemy plików mog± byæ montowane jeden na drugim. Rozwijaj±c
        poprzedni przyk³ad, mo¿emy zamontowaæ system plików <code class="literal">C</code>
        w katalogu <code class="literal">B1</code> systemu plików <code class="literal">B</code>,
        otrzymuj±c nastêpuj±c± postaæ drzewa katalogów:</p><div class="mediaobject"><img src="install/example-dir4.png" /></div><p>Mo¿na równie dobrze zamontowaæ <code class="literal">C</code>
        bezpo¶rednio w systemie plików <code class="literal">A</code>,
        w katalogu <code class="literal">A1</code>:</p><div class="mediaobject"><img src="install/example-dir5.png" /></div><p>Znaj±cym system <span class="trademark">MS-DOS</span>(R) mo¿e to przypominaæ polecenie
        <code class="command">join</code>, choæ nie jest to to samo.</p><p>Zwykle nie trzeba zajmowaæ siê opisanymi powy¿ej rzeczami.
        Najczê¶ciej tworzymy systemy plików podczas instalacji FreeBSD,
        wybieramy miejsce ich zamontowania i nie wprowadzamy pó¼niej
        ¿adnych zmian, chyba, ¿e zainstalujemy nowy dysk.</p><p>Mo¿na utworzyæ jeden obszerny g³ówny system plików
        i nie tworzyæ ¿adnych innych. Takie podej¶cie ma kilka wad
        i jedn± zaletê.</p><div class="itemizedlist"><div class="itemizedlist-title">Korzy¶ci z kilku systemów plików</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Odrêbne systemy plików mog± mieæ ró¿ne <em class="firstterm">opcje
            montowania</em> (mount options). Na przyk³ad, przy
            odpowiednim przygotowaniu, g³ówny system plików mo¿e byæ
            zamontowany tylko do odczytu, przez co niemo¿liwe bêdzie
            przypadkowe usuniêcie lub zmiana wa¿nego pliku. Oddzielenie
            systemów plików dostêpnych do zapisu dla u¿ytkowników, jak
            np. <code class="filename">/home</code>, od innych pozwala równie¿
            na montowanie ich z opcj± <em class="firstterm">nosuid</em>;
            co z kolei pozwala zwiêkszyæ bezpieczeñstwo systemu
            uniemo¿liwiaj±c wykorzystanie bitów
            <em class="firstterm">suid</em>/<em class="firstterm">guid</em>.</p></li><li class="listitem"><p>FreeBSD automatycznie optymalizuje uk³ad plików w systemie
            plików, w zale¿no¶ci od tego, jak ów system jest wykorzystywany.
            System plików zawieraj±cy wiele czêsto zapisywanych ma³ych plików
            bêdzie optymalizowany inaczej ni¿ taki, w którym przechowywane
            jest mniej plików o du¿ych rozmiarach. W przypadku jednego du¿ego
            systemu plików taka optymalizacja nie zadzia³a.</p></li><li class="listitem"><p>Systemy plików FreeBSD s± odporne na awarie zasilania.
            W niesprzyjaj±cych okoliczno¶ciach mo¿e siê jednak zdarzyæ,
            ¿e przerwa w dostawie pr±du w krytycznym momencie spowoduje
            uszkodzenie struktury systemu plików. Przechowywanie danych
            w kilku systemach plików zwiêksza szansê, ¿e system uruchomi
            siê ponownie, dziêki czemu ³atwiej bêdzie odzyskaæ dane
            z kopii zapasowej.</p></li></ul></div><div class="itemizedlist"><div class="itemizedlist-title">Korzy¶æ z pojedynczego systemu plików</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Systemy plików maj± sta³y rozmiar. Podczas instalacji
            FreeBSD tworzymy system plików o zadanym rozmiarze; pó¼niej
            mo¿e siê okazaæ, ¿e trzeba powiêkszyæ partycjê. Nie³atwo
            jest to zrobiæ inaczej, ni¿ przez przygotowanie zapasowej
            kopii danych, utworzenie na nowo systemu plików o wiêkszych
            rozmiarach, oraz skopiowanie danych z powrotem.</p><div xmlns="" class="important"><h3 class="admontitle">Wa¿ne: </h3><p xmlns="http://www.w3.org/1999/xhtml">We FreeBSD dostêpne jest polecenie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">growfs</span>(8)</span></a>,
              które pozwala na zwiêkszenie rozmiaru systemu plików
              w locie, pomijaj±c wspomniane ograniczenie.</p></div></li></ul></div><p>Systemy plików przechowywane s± na partycjach. Pojêcie
        partycji ma tu inne znaczenie ni¿ popularnie stosowane (np.
        partycja systemu <span class="trademark">MS-DOS</span>(R)), ze wzglêdu na uniksowy rodowód
        FreeBSD. Ka¿da z partycji oznaczana jest liter±, od <code class="literal">a</code>
        do <code class="literal">h</code>. Pojedyncza partycja mo¿e zawieraæ
        jeden system plików, dlatego te¿ do systemów plików czêsto
        odwo³uje siê albo poprzez miejsce ich zamontowania w g³ównym
        systemie plików, albo przez literowe oznaczenie partycji, na
        której dany system plików siê znajduje.</p><p>Przestrzeñ dyskowa jest równie¿ u¿ywana we FreeBSD
        jako <em class="firstterm">przestrzeñ wymiany</em>, pe³ni±c w
        ten sposób rolê <em class="firstterm">pamiêci wirtualnej</em>.
        Komputer mo¿e dziêki temu dysponowaæ wiêksz± ilo¶ci± pamiêci,
        ni¿ ma w rzeczywisto¶ci. Kiedy pamiêci zaczyna brakowaæ,
        FreeBSD odsy³a niektóre nieu¿ywane dane do przestrzeni
        wymiany, a gdy znów oka¿± siê potrzebne, przenosi je z powrotem
        (odsy³aj±c jednocze¶nie inne dane).</p><p>Z niektórymi partycjami zwi±zane s± pewne konwencje
        dotycz±ce ich zastosowania.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Patrycja</th><th>Konwencja</th></tr></thead><tbody valign="top"><tr><td valign="top"><code class="literal">a</code></td><td valign="top">Zwykle zawiera g³ówny system plików</td></tr><tr><td valign="top"><code class="literal">b</code></td><td valign="top">Zwykle zawiera przestrzeñ wymiany</td></tr><tr><td valign="top"><code class="literal">c</code></td><td valign="top">Zwykle jest tego samego rozmiaru, co obejmuj±cy
                j± segment. Dziêki temu programy dzia³aj±ce na ca³ym
                segmencie (na przyk³ad wykrywaj±ce uszkodzone obszary
                dysku) mog± dzia³aæ na partycji <code class="literal">c</code>.
                Zwykle nie tworzy siê na tej partycji systemu plików.</td></tr><tr><td valign="top"><code class="literal">d</code></td><td valign="top">Swego czasu partycja <code class="literal">d</code> mia³a specjalne znaczenie,
                obecnie ju¿ go nie ma. Do dzi¶ jednak niektóre programy
                mog± dziwnie siê zachowywaæ, je¶li ka¿e im siê pracowaæ
                na partycji <code class="literal">d</code>, dlatego te¿
                <span class="application">sysinstall</span>
                zwykle w ogóle jej nie tworzy.</td></tr></tbody></table></div><p>Ka¿da partycja zawieraj±ca system plików przechowywana jest na czym¶,
        co we FreeBSD nosi nazwê <em class="firstterm">segmentu</em>. Jest to okre¶lenie
        tego, co wcze¶niej zwane by³o partycj±, i ponownie jest to konsekwencj±
        uniksowych korzeni FreeBSD. Segmenty s± oznaczane liczbami od 1 do 4.</p><a id="idp78070992" class="indexterm"></a><a id="idp78071504" class="indexterm"></a><a id="idp78072016" class="indexterm"></a><p>Numery segmentów, wraz z przedrostkiem <code class="literal">s</code>,
        poprzedzone s± nazw± urz±dzenia. Tak wiêc
        <span class="quote">"<span class="quote">da0<span class="emphasis"><em>s1</em></span></span>"</span>
        jest pierwszym segmentem na pierwszym dysku SCSI. Na dysku mog±
        byæ najwy¿ej cztery fizyczne segmenty, mo¿na jednak tworzyæ segmenty
        logiczne wewn±trz segmentów fizycznych specjalnego typu. Powsta³e
        w ten sposób segmenty rozszerzone maj± numery od 5 wzwy¿, zatem
        <span class="quote">"<span class="quote">ad0<span class="emphasis"><em>s5</em></span></span>"</span> odpowiada pierwszemu
        rozszerzonemu segmentowi na dysku IDE. Urz±dzenia te s± wykorzystywane
        przez systemy plików, które zajmuj± ca³y segment.</p><p>Segmenty, dyski <span class="quote">"<span class="quote">niebezpiecznie dedykowane</span>"</span>
        i inne dyski zawieraj± <em class="firstterm">partycje</em>,
        oznaczane literami od <code class="literal">a</code> do <code class="literal">h</code>.
        Litera dopisywana jest do nazwy urz±dzenia, wiêc
        <span class="quote">"<span class="quote">da0<span class="emphasis"><em>a</em></span></span>"</span> odpowiadaæ bêdzie
        partycji a na pierwszym dysku da, <span class="quote">"<span class="quote">niebezpiecznie
        dedykowanym</span>"</span>. Z kolei <span class="quote">"<span class="quote">ad1s3<span class="emphasis"><em>e</em></span></span>"</span>
        oznacza pi±t± partycjê w trzecim segmencie drugiego dysku IDE.</p><p>W³asne oznaczenie ma tak¿e ka¿dy dysk. Nazwa dysku sk³ada siê
        z symbolu okre¶laj±cego typ dysku, oraz numeru, okre¶laj±cego
        który to dysk. Dyski, inaczej ni¿ segmenty, numerowane s± od zera.
        <a class="xref" href="disk-organization.html#basics-dev-codes" title="Tabela 3.1. Oznaczenia dysków">Tabela 3.1, "Oznaczenia dysków"</a> zawiera najczê¶ciej spotykane zwykle
        oznaczenia.</p><p>Gdy odwo³ujemy siê do partycji, FreeBSD wymaga, by¶my podali
        równie¿ nazwê obejmuj±cego j± segmentu i dysku. Z kolei gdy odwo³ujemy
        siê do segmentu, podajemy równie¿ nazwê dysku. Kolejno podajemy wiêc
        nazwê dysku, <code class="literal">s</code>, numer segmentu, a na koniec
        literê partycji; patrz <a class="xref" href="disk-organization.html#basics-disk-slice-part" title="Przyk³ad 3.1. Przyk³adowe nazwy dysków, segmentów i partycji">Przyk³ad 3.1, "Przyk³adowe nazwy dysków, segmentów i partycji"</a>.</p><p><a class="xref" href="disk-organization.html#basics-concept-disk-model" title="Przyk³ad 3.2. Schematyczny model dysku">Przyk³ad 3.2, "Schematyczny model dysku"</a> pokazuje schematyczny
        model dysku, z pomoc± którego ³atwiej bêdzie zrozumieæ pewne rzeczy.</p><p>Gdy instalujemy FreeBSD, w pierwszej kolejno¶ci musimy przygotowaæ
        segmenty na dysku, nastêpnie w segmencie przeznaczonym dla FreeBSD
        utworzyæ partycje, nastêpnie wewn±trz partycji stworzyæ system plików
        (lub przestrzeñ wymiany) i okre¶liæ miejsce jego montowania.</p><div class="table"><a id="basics-dev-codes"></a><div class="table-title">Tabela 3.1. Oznaczenia dysków</div><div class="table-contents"><table summary="Oznaczenia dysków" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Oznaczenie</th><th>Znaczenie</th></tr></thead><tbody><tr><td><code class="filename">ad</code></td><td>Dysk ATAPI (IDE)</td></tr><tr><td><code class="filename">da</code></td><td>Dysk SCSI o dostêpie bezpo¶rednim</td></tr><tr><td><code class="filename">acd</code></td><td>CDROM ATAPI (IDE)</td></tr><tr><td><code class="filename">cd</code></td><td>CDROM SCSI</td></tr><tr><td><code class="filename">fd</code></td><td>Stacja dyskietek</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="basics-disk-slice-part"></a><div class="example-title">Przyk³ad 3.1. Przyk³adowe nazwy dysków, segmentów i partycji</div><div class="example-contents"><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Nazwa</th><th>Znaczenie</th></tr></thead><tbody><tr><td><code class="literal">ad0s1a</code></td><td>Pierwsza partycja (<code class="literal">a</code>)
                  w pierwszym segmencie (<code class="literal">s1</code>)
                  na pierwszym dysku IDE (<code class="literal">ad0</code>).</td></tr><tr><td><code class="literal">da1s2e</code></td><td>Pi±ta partycja <code class="literal">e</code> w drugim
                  segmencie (<code class="literal">s2</code>) na drugim dysku
                  SCSI (<code class="literal">da1</code>).</td></tr></tbody></table></div></div></div><br class="example-break" /><div class="example"><a id="basics-concept-disk-model"></a><div class="example-title">Przyk³ad 3.2. Schematyczny model dysku</div><div class="example-contents"><p>Rysunek przedstawia pierwszy dysk IDE z punktu widzenia
          FreeBSD. Zak³adamy, ¿e dysk ma rozmiar 4 GB i jest podzielony
          na dwa segmenty (partycje w <span class="trademark">MS-DOS</span>(R)) o rozmiarze po 2 GB.
          Pierwszy segment zawiera DOS-owy dysk <code class="filename">C:</code>,
          natomiast w drugim segmencie znajduje siê przyk³adowa instalacja
          FreeBSD, z trzema partycjami oraz partycj± wymiany.</p><p>Ka¿da z trzech partycji przechowuje system plików. Na
          partycji <code class="literal">a</code> umieszczony jest g³ówny system plików,
          na <code class="literal">e</code> znajduje siê katalog <code class="filename">/var</code>,
          a na <code class="literal">f</code> katalog <code class="filename">/usr</code>.</p><div class="mediaobject"><img src="install/disk-layout.png" /></div></div></div><br class="example-break" /></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dirstructure.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="mount-unmount.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">3.4. Struktura katalogów </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> 3.6. Montowanie i odmontowywanie systemów plików</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>