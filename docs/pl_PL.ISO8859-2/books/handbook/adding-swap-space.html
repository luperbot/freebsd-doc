<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>11.14. Adding Swap Space</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Podrêcznik FreeBSD" /><link rel="up" href="config-tuning.html" title="Rozdzia³ 11. Configuration and Tuning" /><link rel="prev" href="configtuning-kernel-limits.html" title="11.13. Tuning Kernel Limits" /><link rel="next" href="acpi-overview.html" title="11.15. Power and Resource Management" /><link rel="copyright" href="legalnotice.html" title="Informacja Prawna" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.14. Adding Swap Space</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configtuning-kernel-limits.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 11. Configuration and Tuning</th><td width="20%" align="right"> <a accesskey="n" href="acpi-overview.html">Nastêpny</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="adding-swap-space"></a>11.14. Adding Swap Space</h2></div></div></div><p>No matter how well you plan, sometimes a system does not run
      as you expect.  If you find you need more swap space, it is
      simple enough to add.  You have three ways to increase swap
      space: adding a new hard drive, enabling swap over NFS, and
      creating a swap file on an existing partition.</p><p>For information on how to encrypt swap space, what options
      for this task exist and why it should be done, please refer to
      <a class="xref" href="swap-encrypting.html" title="17.17. Encrypting Swap Space">Sekcja 17.17, "Encrypting Swap Space"</a> of the Handbook.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="new-drive-swap"></a>11.14.1. Swap on a New Hard Drive</h3></div></div></div><p>The best way to add swap, of course, is to use this as an
	excuse to add another hard drive.  You can always use another
	hard drive, after all.  If you can do this, go reread the
	discussion of swap space
	in <a class="xref" href="configtuning-initial.html" title="11.2. Initial Configuration">Sekcja 11.2, "Initial Configuration"</a>
	of the Handbook for some suggestions on how to best
	arrange your swap.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="nfs-swap"></a>11.14.2. Swapping over NFS</h3></div></div></div><p>Swapping over NFS is only recommended if you do not have a
	local hard disk to swap to; NFS swapping will be limited
	by the available network bandwidth and puts an additional
	burden on the NFS server.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="create-swapfile"></a>11.14.3. Swapfiles</h3></div></div></div><p>You can create a file of a specified size to use as a swap
	file.  In our example here we will use a 64MB file called
	<code class="filename">/usr/swap0</code>.  You can use any name you
	want, of course.</p><div class="example"><a id="idp84754896"></a><div class="example-title">Przyk³ad 11.1. Creating a Swapfile on FreeBSD</div><div class="example-contents"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Be certain that your kernel configuration includes
	    the memory disk driver (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>).  It is default in
	    <code class="filename">GENERIC</code> kernel.</p><pre class="programlisting">device   md   # Memory "disks"</pre></li><li class="listitem"><p>Create a swapfile (<code class="filename">/usr/swap0</code>):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/usr/swap0 bs=1024k count=64</code></strong></pre></li><li class="listitem"><p>Set proper permissions on (<code class="filename">/usr/swap0</code>):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 0600 /usr/swap0</code></strong></pre></li><li class="listitem"><p>Enable the swap file in <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">swapfile="/usr/swap0"   # Set to name of swapfile if aux swapfile desired.</pre></li><li class="listitem"><p>Reboot the machine or to enable the swap file immediately,
            type:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f /usr/swap0 -u 0 &amp;&amp; swapon /dev/md0</code></strong></pre></li></ol></div></div></div><br class="example-break" /></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configtuning-kernel-limits.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="acpi-overview.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">11.13. Tuning Kernel Limits </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> 11.15. Power and Resource Management</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>