<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>11.15. Power and Resource Management</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Podrêcznik FreeBSD" /><link rel="up" href="config-tuning.html" title="Rozdzia³ 11. Configuration and Tuning" /><link rel="prev" href="adding-swap-space.html" title="11.14. Adding Swap Space" /><link rel="next" href="ACPI-debug.html" title="11.16. Using and Debugging FreeBSD ACPI" /><link rel="copyright" href="legalnotice.html" title="Informacja Prawna" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.15. Power and Resource Management</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="adding-swap-space.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 11. Configuration and Tuning</th><td width="20%" align="right"> <a accesskey="n" href="ACPI-debug.html">Nastêpny</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="acpi-overview"></a>11.15. Power and Resource Management</h2></div><div><span class="authorgroup">Written by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Hiten</span> <span class="surname">Pandya</span></span> i <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>It is very important to utilize hardware resources in an
      efficient manner.  Before <acronym class="acronym">ACPI</acronym> was introduced,
      it was very difficult and inflexible for operating systems to manage
      the power usage and thermal properties of a system.  The hardware was
      controlled by some sort of <acronym class="acronym">BIOS</acronym> embedded
      interface, such as <span class="emphasis"><em>Plug and Play BIOS (PNPBIOS)</em></span>, or
      <span class="emphasis"><em>Advanced Power Management (APM)</em></span> and so on.
      Power and Resource Management is one of the key components of a modern
      operating system.  For example, you may want an operating system to
      monitor system limits (and possibly alert you) in case your system
      temperature increased unexpectedly.</p><p>In this section of the FreeBSD Handbook, we will provide
      comprehensive information about <acronym class="acronym">ACPI</acronym>.  References
      will be provided for further reading at the end.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="acpi-intro"></a>11.15.1. What Is ACPI?</h3></div></div></div><a id="idp84777168" class="indexterm"></a><a id="idp84777936" class="indexterm"></a><p>Advanced Configuration and Power Interface
	(<acronym class="acronym">ACPI</acronym>) is a standard written by
	an alliance of vendors to provide a standard interface for
	hardware resources and power management (hence the name).
	It is a key element in <span class="emphasis"><em>Operating System-directed
	configuration and Power Management</em></span>, i.e.: it provides
	more control and flexibility to the operating system
	(<acronym class="acronym">OS</acronym>).
	Modern systems <span class="quote">"<span class="quote">stretched</span>"</span> the limits of the
	current Plug and Play interfaces prior to the introduction of
	<acronym class="acronym">ACPI</acronym>.  <acronym class="acronym">ACPI</acronym> is the direct
	successor to <acronym class="acronym">APM</acronym>
	(Advanced Power Management).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="acpi-old-spec"></a>11.15.2. Shortcomings of Advanced Power Management (APM)</h3></div></div></div><p>The <span class="emphasis"><em>Advanced Power Management (APM)</em></span>
      facility controls the power usage of a system based on its
      activity.  The APM BIOS is supplied by the (system) vendor and
      it is specific to the hardware platform.  An APM driver in the
      OS mediates access to the <span class="emphasis"><em>APM Software Interface</em></span>,
      which allows management of power levels.</p><p>There are four major problems in APM.  Firstly, power
      management is done by the (vendor-specific) BIOS, and the OS
      does not have any knowledge of it.  One example of this, is when
      the user sets idle-time values for a hard drive in the APM BIOS,
      that when exceeded, it (BIOS) would spin down the hard drive,
      without the consent of the OS.  Secondly, the APM logic is
      embedded in the BIOS, and it operates outside the scope of the
      OS.  This means users can only fix problems in their APM BIOS by
      flashing a new one into the ROM; which is a very dangerous
      procedure with the potential to leave the system in an
      unrecoverable state if it fails. Thirdly, APM is a vendor-specific
      technology, which means that there is a lot of parity
      (duplication of efforts) and bugs found in one vendor's BIOS,
      may not be solved in others.  Last but not the least, the APM
      BIOS did not have enough room to implement a sophisticated power
      policy, or one that can adapt very well to the purpose of the
      machine.</p><p><span class="emphasis"><em>Plug and Play BIOS (PNPBIOS)</em></span> was
      unreliable in many situations.  PNPBIOS is 16-bit technology,
      so the OS has to use 16-bit emulation in order to
      <span class="quote">"<span class="quote">interface</span>"</span> with PNPBIOS methods.</p><p>The FreeBSD <acronym class="acronym">APM</acronym> driver is documented in
      the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=apm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">apm</span>(4)</span></a> manual page.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="acpi-config"></a>11.15.3. Configuring <acronym class="acronym">ACPI</acronym></h3></div></div></div><p>The <code class="filename">acpi.ko</code> driver is loaded by default
	at start up by the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> and should <span class="emphasis"><em>not</em></span>
	be compiled into the kernel.  The reasoning behind this is that modules
	are easier to work with, say if switching to another <code class="filename">acpi.ko</code>
	without doing a kernel rebuild.  This has the advantage of making testing easier.
	Another reason is that starting <acronym class="acronym">ACPI</acronym> after a system has been
	brought up is not too useful, and in some cases can be fatal.  In doubt, just
	disable <acronym class="acronym">ACPI</acronym> all together. This driver should not and can not
	be unloaded because the system bus uses it for various hardware interactions.
	<acronym class="acronym">ACPI</acronym> can be disabled with the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpiconf&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">acpiconf</span>(8)</span></a> utility.
	In fact most of the interaction with <acronym class="acronym">ACPI</acronym> can be done via
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpiconf&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">acpiconf</span>(8)</span></a>.  Basically this means, if anything about <acronym class="acronym">ACPI</acronym>
	is in the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a> output, then most likely it is already running.</p><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml"><acronym class="acronym">ACPI</acronym> and <acronym class="acronym">APM</acronym> cannot coexist and
	should be used separately.  The last one to load will terminate if the driver
	notices the other running.</p></div><p>In the simplest form, <acronym class="acronym">ACPI</acronym> can be used to put the
	system into a sleep mode with <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpiconf&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">acpiconf</span>(8)</span></a>, the <code class="option">-s</code>
	flag, and a <code class="literal">1-5</code> option.  Most users will only need
	<code class="literal">1</code>.  Option <code class="literal">5</code> will do a soft-off
	which is the same action as:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>halt -p</code></strong></pre><p>The other options are available.  Check out the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpiconf&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">acpiconf</span>(8)</span></a>
	manual page for more information.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="adding-swap-space.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="ACPI-debug.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">11.14. Adding Swap Space </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> 11.16. Using and Debugging FreeBSD <acronym class="acronym">ACPI</acronym></td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>