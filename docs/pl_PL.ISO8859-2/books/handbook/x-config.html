<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>5.4. Konfiguracja X11</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Podrêcznik FreeBSD" /><link rel="up" href="x11.html" title="Rozdzia³ 5. System okien X" /><link rel="prev" href="x-install.html" title="5.3. Instalacja X11" /><link rel="next" href="x-fonts.html" title="5.5. Korzystanie z czcionek w X11" /><link rel="copyright" href="legalnotice.html" title="Informacja Prawna" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5.4. Konfiguracja X11</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="x-install.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 5. System okien X</th><td width="20%" align="right"> <a accesskey="n" href="x-fonts.html">Nastêpny</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-config"></a>5.4. Konfiguracja X11</h2></div><div><span class="authorgroup">Napisa³ <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Christopher</span> <span class="surname">Shumway</span></span>. </span></div></div></div><a id="idp79226064" class="indexterm"></a><a id="idp79226576" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79227088"></a>5.4.1. Nim zaczniemy</h3></div></div></div><p>Przed rozpoczêciem konfiguracji X11 potrzebne nam bêd± nastêpuj±ce
        informacje o docelowym systemie:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Parametry monitora</p></li><li class="listitem"><p>Rodzaj chipsetu karty graficznej</p></li><li class="listitem"><p>Rozmiar pamiêci karty graficznej</p></li></ul></div><a id="idp79230032" class="indexterm"></a><a id="idp79230544" class="indexterm"></a><p>Parametry monitora s± wykorzystywane przez X11 do okre¶lenia rozdzielczo¶ci
        i czêstotliwo¶ci od¶wie¿ania ekranu, na jakich ma pracowaæ.  Parametry te
        mo¿na z regu³y odczytaæ z dokumentacji dostarczonej wraz z monitorem
        b±d¼ ze strony producenta.  Potrzebne s± dwa przedzia³y liczbowe: czêstotliwo¶æ
        odchylania poziomego oraz czêstotliwo¶æ synchronizacji pionowej.</p><p>Od rodzaju chipsetu karty graficznej zale¿y który modu³ X11
        wykorzysta do komunikacji z kart± graficzn±.  W wiêkszo¶ci przypadków
        mo¿liwe jest automatyczne wykrycie rodzaju chipsetu.  Tym nie mniej
        warto jest go znaæ, na wypadek gdyby autodetekcja nie powiod³a siê.</p><p>Rozmiar pamiêci karty graficznej wp³ywa bezpo¶rednio na rozdzielczo¶æ
        i g³êbiê kolorów, przy których system bêdzie pracowa³.  Informacja ta jest
        istotna, by u¿ytkownik zna³ ograniczenia systemu w tym zakresie.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79232336"></a>5.4.2. Konfiguracja X11</h3></div></div></div><p>Konfiguracja X11 jest procesem sk³adaj±cym siê z kilku kroków.
        Pierwszym z nich jest przygotowanie wstêpnego pliku konfiguracyjnego.
        Wystarczy jako u¿ytkownik <code class="systemitem">root</code> wpisaæ:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>Xorg -configure</code></strong></pre><p>Wygeneruje to szkielet konfiguracji X11 w katalogu
        <code class="filename">/root</code>, w pliku o nazwie
	<code class="filename">xorg.conf.new</code> (niezale¿nie czy skorzystali¶my z <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>
	czy zalogowali¶my siê bezpo¶rednio na konto, plik zostanie utworzony w katalogu
        zdefiniowanym w zmiennej <code class="envar">$HOME</code> dla u¿ytkownika
        <code class="systemitem">root</code>).  X11 spróbuje wykryæ parametry
        sprzêtu graficznego zainstalowanego w komputerze
        i zapisaæ plik konfiguracyjny, by przy starcie serwera X
        by³y ³adowane w³a¶ciwe sterowniki dla wykrytego sprzêtu.</p><p>Kolejnym krokiem jest przetestowanie konfiguracji
        i sprawdzenie czy <span class="application">Xorg</span> jest w stanie
        wspó³pracowaæ ze sprzêtem graficznym w systemie.  W tym celu
        nale¿y wpisaæ:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>Xorg -config xorg.conf.new</code></strong></pre><p>Je¶li na ekranie pojawi siê siatka z³o¿ona z czarnych i szarych elementów,
        a tak¿e kursor myszy w kszta³cie litery X, oznaczaæ to bêdzie, ¿e X11 zosta³
        skonfigurowany poprawnie.  By wy³±czyæ ekran testowy wystarczy wcisn±æ kombinacjê
        klawiszy
        <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Backspace</strong></span>.</p><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">Je¶li oka¿e siê, ¿e kursor nie reaguje na ruchy myszy bêdziemy musieli wpierw
          j± skonfigurowaæ. <a class="xref" href="install-post.html#mouse" title="2.9.10. Ustawienia myszki">Sekcja 2.9.10, "Ustawienia myszki"</a> rozdzia³u <span class="quote">"<span class="quote">Instalacja FreeBSD</span>"</span>
          zawiera szczegó³owe informacje na ten temat.</p></div><a id="idp79247056" class="indexterm"></a><p>Nastêpnym krokiem jest dostrojenie konfiguracji pliku <code class="filename">xorg.conf.new</code>
        do naszych upodobañ.  Otwórzmy plik w edytorze tekstu, np.
        w <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=emacs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">emacs</span>(1)</span></a> b±d¼ <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ee&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ee</span>(1)</span></a>.  Wpierw powinni¶my dodaæ czêstotliwo¶ci
        z jakimi mo¿e pracowaæ nasz monitor.  Z regu³y okre¶lane s± jako czêstotliwo¶ci
        synchronizacji pionowej i poziomej.  Warto¶ci te s± dodawane
        do pliku <code class="filename">xorg.conf.new</code> w sekcji
        <code class="literal">"Monitor"</code>:</p><pre class="programlisting">Section "Monitor"
        Identifier   "Monitor0"
        VendorName   "Monitor Vendor"
        ModelName    "Monitor Model"
        HorizSync    30-107
        VertRefresh  48-120
EndSection</pre><p>S³ów kluczowych <code class="literal">HorizSync</code> i
        <code class="literal">VertRefresh</code> mo¿e brakowaæ w pliku konfiguracyjnym.
        Je¶li tak jest, mo¿na je ¶mia³o dodaæ wpisuj±c w³a¶ciw± warto¶æ czêstotliwo¶ci
        odchylania poziomego zaraz po <code class="literal">HorizSync</code> oraz
        warto¶æ czêstotliwo¶ci synchronizacji pionowej po <code class="literal">VertRefresh</code>.
        W powy¿szym przyk³adzie warto¶ci te zosta³y wpisane.</p><p>X umo¿liwia równie¿ korzystanie z funkcji DPMS (Energy Star), je¶li dysponujemy
        monitorem zgodnym z tym standardem.  Program <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xset&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xset</span>(1)</span></a> kontroluje limity czasowe
        i mo¿e wymusiæ tryb oczekiwania, zawieszenia czy tryby wy³±czania.  Je¶li chcemy
        w³±czyæ funkcje DPMS dla naszego monitora, musimy dodaæ poni¿szy wiersz
        w sekcji monitora:</p><pre class="programlisting">
        Option       "DPMS"</pre><a id="idp79254864" class="indexterm"></a><p>Maj±c wci±¿ otwarty w edytorze plik <code class="filename">xorg.conf.new</code>
        wybierzmy domy¶ln±
        rozdzielczo¶æ i g³êbiê kolorów.  Parametry te definiowane s± w sekcji
        <code class="literal">"Screen"</code>:</p><pre class="programlisting">Section "Screen"
        Identifier "Screen0"
        Device     "Card0"
        Monitor    "Monitor0"
        DefaultDepth 24
        SubSection "Display"
                Viewport  0 0
                Depth     24
                Modes     "1024x768"
        EndSubSection
EndSection</pre><p>S³owo kluczowe <code class="literal">DefaultDepth</code> odnosi siê do domy¶lnej g³êbi
        kolorów.  Opcja ta mo¿e byæ zmieniona za pomoc± parametru
        <code class="option">-depth</code> polecenia <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=Xorg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">Xorg</span>(1)</span></a>.
        S³owo kluczowe <code class="literal">Modes</code> odnosi siê do rozdzielczo¶ci, w której
        ma pracowaæ serwer X dla danej g³êbi kolorów.  Nale¿y zwróciæ uwagê, i¿ dostêpne
        s± jedynie standardowe tryby VESA, zgodne ze sprzêtem graficznym instalowanym w danym
        systemie.  W powy¿szym przyk³adzie, domy¶lna g³êbia kolorów to dwadzie¶cia cztery
        bity na piksel.  Przy tej g³êbi dostêpna jest rozdzielczo¶æ
        1024 na 768 pikseli.</p><p>Mo¿emy w koñcu zapisaæ plik konfiguracyjny i sprawdziæ go wykorzystuj±c
        podany powy¿ej tryb testowy.</p><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">Jednym z pomocnych narzêdzi w radzeniu sobie z problemami
          s± pliki dzienników X11, zawieraj±ce informacje odno¶nie ka¿dego
	  urz±dzenia, do którego jest pod³±czony serwer X11.
	  Nazwy plików dzienników <span class="application">Xorg</span> wykorzystuj±
          format <code class="filename">/var/log/Xorg.0.log</code>.  Dok³adna nazwa pliku
	  dziennika mo¿e byæ ró¿na w zakresie od <code class="filename">Xorg.0.log</code> do
	  <code class="filename">Xorg.8.log</code>.</p></div><p>Je¶li test wypad³ dobrze, nale¿y zainstalowaæ plik konfiguracyjny
        w miejscu gdzie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=Xorg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">Xorg</span>(1)</span></a> bêdzie
        w stanie go znale¼æ.  Z regu³y jest to <code class="filename">/etc/X11/xorg.conf</code>
	lub <code class="filename">/usr/X11R6/etc/X11/xorg.conf</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp xorg.conf.new /etc/X11/xorg.conf</code></strong></pre><p>Proces konfiguracji X11 dobieg³ koñca.  <span class="application">Xorg</span>
        mo¿na uruchomiæ za pomoc± pomoc± polecenia <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=startx&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">startx</span>(1)</span></a>.
        Serwer X11 mo¿e byæ równie¿ uruchamiany
	wykorzystuj±c <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dostêpny jest równie¿ graficzny konfigurator -
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xorgcfg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xorgcfg</span>(1)</span></a> -
        dostarczany razem z dystrybucj± X11.  Pozwala on nam interaktywnie zdefiniowaæ
	nasz± konfiguracjê wybieraj±c odpowiednie sterowniki i ustawienia.
	Program ten mo¿na uruchomiæ z konsoli wpisuj±c polecenie
        <code class="command">xorgcfg -textmode</code>.  Wiêcej szczegó³ów zawiera
	strona podrêcznika systemowego <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xorgcfg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xorgcfg</span>(1)</span></a>.</p><p xmlns="http://www.w3.org/1999/xhtml">Istnieje równie¿, jako alternatywa, program <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xorgconfig&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xorgconfig</span>(1)</span></a>,
	bêd±cy aplikacj± konsolow±, mniej przyjazn± dla pocz±tkuj±cych u¿ytkowników,
	jednak¿e przydatn± w sytuacjach gdy inne narzêdzia nie dzia³aj±
	poprawnie.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79280720"></a>5.4.3. Konfiguracja zaawansowana</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79281360"></a>5.4.3.1. Konfiguracja z chipsetem graficznym <span class="trademark">Intel</span>(R) i810</h4></div></div></div><a id="idp79282512" class="indexterm"></a><p>Konfiguracja ze zintegrowanym chipsetem <span class="trademark">Intel</span>(R) i810 wymaga wykorzystania
          interfejsu programowego AGP <code class="filename">agpgart</code> do obs³ugi karty
          w X11.  Wiêcej informacji mo¿na znale¼æ w podrêczniku systemowym sterownika
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=agp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">agp</span>(4)</span></a>.</p><p>Pozwoli to nam skonfigurowaæ nasz± kartê graficzn± jak ka¿d± inn±.
          W tym momencie nale¿y zwróciæ uwagê na fakt, i¿ w systemach bez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=agp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">agp</span>(4)</span></a>
	  wkompilowanego w j±dro, próba za³adowania modu³u za pomoc±
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a> nie powiedzie siê.  Sterownik ten musi byæ obecny
	  w j±drze w trakcie uruchamiania systemu poprzez wkompilowanie go
          b±d¼ za³adowanie za pomoc± <code class="filename">/boot/loader.conf</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79291728"></a>5.4.3.2. Dodanie p³askiego monitora szerokok±tnego</h4></div></div></div><a id="idp79292368" class="indexterm"></a><p>Sekcja ta zak³ada, ¿e posiadamy odrobinê wiedzy o zaawansowanej
          konfiguracji X11.  Je¶li próby wykorzystania opisanych wy¿ej standardowych
          narzêdzi konfiguracyjnych nie powiod³y siê, w plikach dzienników znajdziemy
          dostateczn± ilo¶æ informacji pomocnych w uruchomieniu X z monitorem
          szerokok±tnym.  Bêdziemy musieli wykorzystaæ dowolny edytor teksu.</p><p>Obecne formaty szerokok±tne (WSXGA, WSXGA+, WUXGA, WXGA, WXGA+, itd.)
          obs³uguj± formaty 16:10 oraz 10:9 b±d¼ o innych proporcjach obrazu, które
          mog± stworzyæ problemy w trakcie konfiguracji X.  Niektórymi z powszechnie
          wykorzystywanych rozdzielczo¶ci ekranu dla proporcji 16:10 s±:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>2560x1600</p></li><li class="listitem"><p>1920x1200</p></li><li class="listitem"><p>1680x1050</p></li><li class="listitem"><p>1440x900</p></li><li class="listitem"><p>1280x800</p></li></ul></div><p>W pewnym momencie bêdzie to tak proste jak dodanie której¶ z tych
          rozdzielczo¶ci jako mo¿liwych trybów <code class="literal">Mode</code> w
          <code class="literal">Section "Screen"</code>, jak np.:</p><pre class="programlisting">Section "Screen"
Identifier "Screen0"
Device     "Card0"
Monitor    "Monitor0"
DefaultDepth 24
SubSection "Display"
        Viewport  0 0
        Depth     24
        Modes     "1680x1050"
EndSubSection
EndSection</pre><p>Tym nie mniej <span class="application">Xorg</span> jest na tyle sprytny,
          ¿e potrafiæ pozyskaæ informacje o rozdzielczo¶ci ekranu monitora szerokok±tnego
          za pomoc± I2C/DDC w taki sposób, ¿e wie jakie rozdzielczo¶ci potrafi obs³u¿yæ
          monitor w kwestii czêstotliwo¶ci i rozdzielczo¶æ.</p><p>Je¶li odpowiednie wpisy <code class="literal">ModeLine</code> nie istniej± w sterownikach,
          bêdziemy musieli podpowiedzieæ co nieco serwerowi <span class="application">Xorg</span>.
          Z pliku <code class="filename">/var/log/Xorg.0.log</code> mo¿emy wydobyæ dostateczn±
          ilo¶æ informacji, by móc rêcznie stworzyæ poprawnie obs³ugiwany
          <code class="literal">ModeLine</code>.  Wystarczy odnale¼æ zapis podobny do:</p><pre class="programlisting">(II) MGA(0): Supported additional Video Mode:
(II) MGA(0): clock: 146.2 MHz   Image Size:  433 x 271 mm
(II) MGA(0): h_active: 1680  h_sync: 1784  h_sync_end 1960 h_blank_end 2240 h_border: 0
(II) MGA(0): v_active: 1050  v_sync: 1053  v_sync_end 1059 v_blanking: 1089 v_border: 0
(II) MGA(0): Ranges: V min: 48  V max: 85 Hz, H min: 30  H max: 94 kHz, PixClock max 170 MHz</pre><p>Jest to tzw. informacja EDID.  Stworzenie na jej podstawie
          <code class="literal">ModeLine</code> jest zaledwie kwesti±
          wpisania we w³a¶ciwej kolejno¶ci kilku liczb:</p><pre class="programlisting">ModeLine &lt;name&gt; &lt;clock&gt; &lt;4 horiz. timings&gt; &lt;4 vert. timings&gt;</pre><p>Tak wiêc wpis <code class="literal">ModeLine</code> w <code class="literal">Section "Monitor"</code>
          dla tego przyk³adu wygl±da³by nastêpuj±co:</p><pre class="programlisting">Section "Monitor"
Identifier      "Monitor1"
VendorName      "Bigname"
ModelName       "BestModel"
ModeLine        "1680x1050" 146.2 1680 1784 1960 2240 1050 1053 1059 1089
Option          "DPMS"
EndSection</pre><p>Po tych kilku prostych zmianach X powinien zacz±æ dzia³aæ poprawnie
          z naszym szerokok±tnym monitorem.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="x-install.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="x11.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="x-fonts.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">5.3. Instalacja X11 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> 5.5. Korzystanie z czcionek w X11</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>