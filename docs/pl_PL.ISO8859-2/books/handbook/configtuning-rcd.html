<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>11.7. Using rc under FreeBSD</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Podrêcznik FreeBSD" /><link rel="up" href="config-tuning.html" title="Rozdzia³ 11. Configuration and Tuning" /><link rel="prev" href="configtuning-cron.html" title="11.6. Configuring the cron Utility" /><link rel="next" href="config-network-setup.html" title="11.8. Setting Up Network Interface Cards" /><link rel="copyright" href="legalnotice.html" title="Informacja Prawna" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.7. Using rc under FreeBSD</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configtuning-cron.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 11. Configuration and Tuning</th><td width="20%" align="right"> <a accesskey="n" href="config-network-setup.html">Nastêpny</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-rcd"></a>11.7. Using rc under FreeBSD</h2></div><div><span class="authorgroup">Contributed by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>In 2002 FreeBSD integrated the NetBSD
      <code class="filename">rc.d</code> system for system initialization.
      Users should notice the files listed in the
      <code class="filename">/etc/rc.d</code> directory.  Many of these files
      are for basic services which can be controlled with the
      <code class="option">start</code>, <code class="option">stop</code>,
      and <code class="option">restart</code> options.
      For instance, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a> can be restarted with the following
      command:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd restart</code></strong></pre><p>This procedure is similar for other services.  Of course,
      services are usually started automatically at boot time as specified in
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>.  For example, enabling the Network Address
      Translation daemon at startup is as simple as adding the
      following line to <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">natd_enable="YES"</pre><p>If a <code class="option">natd_enable="NO"</code> line is already
       present, then simply change the <code class="option">NO</code> to
       <code class="option">YES</code>.  The rc scripts will automatically load
       any other dependent services during the next reboot, as
       described below.</p><p>Since the <code class="filename">rc.d</code> system is primarily
      intended to start/stop services at system startup/shutdown time,
      the standard <code class="option">start</code>,
      <code class="option">stop</code> and <code class="option">restart</code> options will only
      perform their action if the appropriate
      <code class="filename">/etc/rc.conf</code> variables are set.  For
      instance the above <code class="command">sshd restart</code> command will
      only work if <code class="varname">sshd_enable</code> is set to
      <code class="option">YES</code> in <code class="filename">/etc/rc.conf</code>.  To
      <code class="option">start</code>, <code class="option">stop</code> or
      <code class="option">restart</code> a service regardless of the settings in
      <code class="filename">/etc/rc.conf</code>, the commands should be
      prefixed with <span class="quote">"<span class="quote">force</span>"</span>.  For instance to restart
      <code class="command">sshd</code> regardless of the current
      <code class="filename">/etc/rc.conf</code> setting, execute the following
      command:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd forcerestart</code></strong></pre><p>It is easy to check if a service is enabled in
      <code class="filename">/etc/rc.conf</code> by running the appropriate
      <code class="filename">rc.d</code> script with the option
      <code class="option">rcvar</code>.  Thus, an administrator can check that
      <code class="command">sshd</code> is in fact enabled in
      <code class="filename">/etc/rc.conf</code> by running:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd rcvar</code></strong>
# sshd
$sshd_enable=YES</pre><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">The second line (<code class="literal"># sshd</code>) is the output
        from the <code class="command">sshd</code> command, not a <code class="systemitem">root</code>
        console.</p></div><p>To determine if a service is running, a
      <code class="option">status</code> option is available.  For instance to
      verify that <code class="command">sshd</code> is actually started:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd status</code></strong>
sshd is running as pid 433.</pre><p>In some cases it is also possible to <code class="option">reload</code> a service.
      This will attempt to send a signal to an individual service, forcing the
      service to reload its configuration files.  In most cases this
      means sending the service a <code class="literal">SIGHUP</code>
      signal.  Support for this feature is not included for every service.</p><p>The <code class="filename">rc.d</code> system is not only used for network services, it also
      contributes to most of the system initialization.  For
      instance, consider the <code class="filename">bgfsck</code> file.  When
      this script is executed, it will print out the following
      message:</p><pre class="screen">Starting background file system checks in 60 seconds.</pre><p>Therefore this file is used for background file system
      checks, which are done only during system initialization.</p><p>Many system services depend on other services to function
      properly.  For example, NIS and other RPC-based services may
      fail to start until after the <code class="command">rpcbind</code>
      (portmapper) service has started.  To resolve this issue,
      information about dependencies and other meta-data is included
      in the comments at the top of each startup script.  The
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rcorder</span>(8)</span></a> program is then used to parse these comments
      during system initialization to determine the order in which
      system services should be invoked to satisfy the dependencies.
      The following words may be included at the top of each startup
      file:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">PROVIDE</code>: Specifies the services this file provides.</p></li><li class="listitem"><p><code class="literal">REQUIRE</code>: Lists services which are required for this
	  service.  This file will run <span class="emphasis"><em>after</em></span>
	  the specified services.</p></li><li class="listitem"><p><code class="literal">BEFORE</code>: Lists services which depend on this service.
	  This file will run <span class="emphasis"><em>before</em></span>
	  the specified services.</p></li></ul></div><p>By using this method, an administrator can easily control system
      services without the hassle of <span class="quote">"<span class="quote">runlevels</span>"</span> like
      some other <span class="trademark">UNIX</span>(R) operating systems.</p><p>Additional information about the
      <code class="filename">rc.d</code> system can be found in the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a>
      and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.subr&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.subr</span>(8)</span></a> manual pages.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configtuning-cron.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="config-network-setup.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">11.6. Configuring the <code class="command">cron</code> Utility </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> 11.8. Setting Up Network Interface Cards</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>