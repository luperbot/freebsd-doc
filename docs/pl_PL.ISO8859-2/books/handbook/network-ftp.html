<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>25.8. File Transfer Protocol (FTP)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Podrêcznik FreeBSD" /><link rel="up" href="network-servers.html" title="Rozdzia³ 25. Network Servers" /><link rel="prev" href="network-apache.html" title="25.7. Apache HTTP Server" /><link rel="next" href="network-samba.html" title="25.9. File and Print Services for Microsoft(R) Windows(R) clients (Samba)" /><link rel="copyright" href="legalnotice.html" title="Informacja Prawna" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">25.8. File Transfer Protocol (FTP)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-apache.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 25. Network Servers</th><td width="20%" align="right"> <a accesskey="n" href="network-samba.html">Nastêpny</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ftp"></a>25.8. File Transfer Protocol (FTP)</h2></div><div><span class="authorgroup">Contributed by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp94622928" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94623440"></a>25.8.1. Overview</h3></div></div></div><p>The File Transfer Protocol (FTP) provides users with a
	simple way to transfer files to and from an <acronym class="acronym">FTP</acronym> server.  FreeBSD
	includes <acronym class="acronym">FTP</acronym>
	server software, <span class="application">ftpd</span>, in the base
	system.  This makes setting up and administering an <acronym class="acronym">FTP</acronym> server on FreeBSD
	very straightforward.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94630736"></a>25.8.2. Configuration</h3></div></div></div><p>The most important configuration step is deciding which
	accounts will be allowed access to the FTP server.  A normal
	FreeBSD system has a number of system accounts used for
	various daemons, but unknown users should not be allowed to
	log in with these accounts.  The
	<code class="filename">/etc/ftpusers</code> file is a list of users
	disallowed any FTP access.  By default, it includes the
	aforementioned system accounts, but it is possible to add
	specific users here that should not be allowed access to
	FTP.</p><p>You may want to restrict the access of some users without
	preventing them completely from using FTP.  This can be
	accomplished with the <code class="filename">/etc/ftpchroot</code>
	file.  This file lists users and groups subject to FTP access
	restrictions.  The <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpchroot&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ftpchroot</span>(5)</span></a> manual page has all of
	the details so it will not be described in detail here.</p><a id="idp94633680" class="indexterm"></a><p>If you would like to enable anonymous FTP access to your
	server, then you must create a user named
	<code class="systemitem">ftp</code> on your FreeBSD system.  Users will then
	be able to log on to your FTP server with a username of
	<code class="systemitem">ftp</code> or <code class="systemitem">anonymous</code> and
	with any password (by convention an email address for the user
	should be used as the password).  The FTP server will call
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> when an anonymous user logs in, to restrict
	access to only the home directory of the
	<code class="systemitem">ftp</code> user.</p><p>There are two text files that specify welcome messages to
	be displayed to FTP clients.  The contents of the file
	<code class="filename">/etc/ftpwelcome</code> will be displayed to
	users before they reach the login prompt.  After a successful
	login, the contents of the file
	<code class="filename">/etc/ftpmotd</code> will be displayed.  Note
	that the path to this file is relative to the login environment, so the
	file <code class="filename">~ftp/etc/ftpmotd</code> would be displayed
	for anonymous users.</p><p>Once the FTP server has been configured properly, it must
        be enabled in <code class="filename">/etc/inetd.conf</code>.  All that
        is required here is to remove the comment symbol
        <span class="quote">"<span class="quote">#</span>"</span> from in front of the existing
        <span class="application">ftpd</span> line :</p><pre class="programlisting">ftp	stream	tcp	nowait	root	/usr/libexec/ftpd	ftpd -l</pre><p>As explained in <a class="xref" href="network-inetd.html#network-inetd-reread" title="Przyk³ad 25.1. Reloading the inetd configuration file">Przyk³ad 25.1, "Reloading the <span class="application">inetd</span>
	  configuration file"</a>,
        the <span class="application">inetd</span> configuration must be reloaded
        after this configuration file is changed.</p><p>You can now log on to your FTP server by typing:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ftp localhost</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94644432"></a>25.8.3. Maintaining</h3></div></div></div><a id="idp94645072" class="indexterm"></a><a id="idp94645584" class="indexterm"></a><p>The <span class="application">ftpd</span> daemon uses
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a> to log messages.  By default, the system log
        daemon will put messages related to FTP in the
        <code class="filename">/var/log/xferlog</code> file.  The location of
        the FTP log can be modified by changing the following line in
        <code class="filename">/etc/syslog.conf</code>:</p><pre class="programlisting">ftp.info      /var/log/xferlog</pre><a id="idp94649296" class="indexterm"></a><p>Be aware of the potential problems involved with running
        an anonymous FTP server.  In particular, you should think
        twice about allowing anonymous users to upload files.  You may
        find that your FTP site becomes a forum for the trade of
        unlicensed commercial software or worse.  If you do need to
        allow anonymous FTP uploads, then you should set up the
        permissions so that these files can not be read by other
        anonymous users until they have been reviewed.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-apache.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="network-samba.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">25.7. Apache HTTP Server </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> 25.9. File and Print Services for <span class="trademark">Microsoft</span>(R) <span class="trademark">Windows</span>(R) clients (Samba)</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>