<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>4.5. Korzystanie z kolekcji portów</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Podrêcznik FreeBSD" /><link rel="up" href="ports.html" title="Rozdzia³ 4. Instalacja programów: pakiety i porty" /><link rel="prev" href="packages-using.html" title="4.4. Korzystanie z systemu pakietów" /><link rel="next" href="ports-nextsteps.html" title="4.6. Czynno¶ci po-instalacyjne" /><link rel="copyright" href="legalnotice.html" title="Informacja Prawna" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.5. Korzystanie z kolekcji portów</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="packages-using.html">Poprzedni</a> </td><th width="60%" align="center">Rozdzia³ 4. Instalacja programów: pakiety i porty</th><td width="20%" align="right"> <a accesskey="n" href="ports-nextsteps.html">Nastêpny</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-using"></a>4.5. Korzystanie z kolekcji portów</h2></div><div><span class="authorgroup">T³umaczy³ <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Aleksander</span> <span class="surname">Fafu³a</span></span>. </span></div><div><span class="authorgroup">Przek³ad uzupe³ni³ <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Cezary</span> <span class="surname">Morga</span></span>. </span></div></div></div><p>Poni¿szy podrozdzia³ dostarcza podstawowych informacji
      z zakresu u¿ywania kolekcji portów, w stopniu umo¿liwiaj±cym
      instalowanie lub odinstalowywanie programów z w³asnego systemu.
      Szczegó³owy opis parametrów polecenia <code class="command">make</code>
      i zmiennych ¶rodowiskowych dostêpny jest w podrêczniku
      systemowym <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ports&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">ports</span>(7)</span></a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-tree"></a>4.5.1. Pozyskanie kolekcji portów</h3></div></div></div><p>Zanim zainstalujemy jakikolwiek port, musimy pobraæ
        kolekcjê portów, która w zasadzie jest zestawem plików
        <code class="filename">Makefiles</code>, ³at i opisowych. Kolekcja
        znajduje siê w katalogu <code class="filename">/usr/ports</code>.</p><p>W trakcie instalacji FreeBSD, <span class="application">sysinstall</span>
        zapyta³ czy chcemy zainstalowaæ kolekcjê portów. Je¶li wybrali¶my
        nie, poni¿sze instrukcje pomog± nam w³asnorêcznie zainstalowaæ
        kolekcjê portów:</p><div class="procedure"><a id="idp78651984"></a><div class="procedure-title">Procedura 4.1. Metoda CVSup</div><p>Jest to prosta i szybka metoda pobrania kolekcji portów
          wykorzystuj±ca system <span class="application">CVSup</span>.
          Wiêcej informacji o <span class="application">CVSup</span> dostêpnych
          jest w podrozdziale <a class="link" href="cvsup.html" title="A.5. Using CVSup">Korzystanie z
          CVSup</a>.</p><p>Bardzo wa¿nym jest, aby upewniæ siê, ¿e katalog
          <code class="filename">/usr/ports</code> jest pusty
          nim po raz pierwszy uruchomimy <span class="application">CVSup</span>!
          Je¶li posiadamy ju¿ kolekcjê portów pozyskan± z innego ¼ród³a
          <span class="application">CVSup</span> nie usunie nieu¿ywanych
          plików ³at.</p><ol class="procedure" type="1"><li class="step"><p>Zainstaluj pakiet <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup-without-gui/pkg-descr">net/cvsup-without-gui</a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r cvsup-without-gui</code></strong></pre><p>Wiêcej informacji w podrozdziale <a class="link" href="cvsup.html#cvsup-install" title="A.5.2. Installation">Instalacja CVSup</a> (<a class="xref" href="cvsup.html#cvsup-install" title="A.5.2. Installation">Sekcja A.5.2, "Installation"</a>).</p></li><li class="step"><p>Uruchom <code class="command">cvsup</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cvsup -L 2 -h cvsup.FreeBSD.org /usr/share/examples/cvsup/ports-supfile</code></strong></pre><p>Warto zast±piæ <em class="replaceable"><code>cvsup.FreeBSD.org</code></em>
		  adresem serwera CVSup zlokalizowanego bli¿ej nas. Kompletna lista
		  serwerów lustrzanych dostêpna jest w podrozdziale
		  <a class="link" href="cvsup.html#cvsup-mirrors" title="A.5.7. CVSup Sites">Serwery lustrzane CVSup</a>
		  (<a class="xref" href="cvsup.html#cvsup-mirrors" title="A.5.7. CVSup Sites">Sekcja A.5.7, "CVSup Sites"</a>).</p><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">Mo¿na wykorzystaæ w³asny plik  <code class="filename">ports-supfile</code>,
			  by np. unikn±æ konieczno¶ci podawania adresu serwera
			  <span class="application">CVSup</span> z linii poleceñ.</p><div xmlns="http://www.w3.org/1999/xhtml" class="procedure"><ol class="procedure" type="1"><li class="step"><p>W takim wypadku, jako u¿ytkownik <code class="systemitem">root</code>,
                  skopiuj plik
                  <code class="filename">/usr/share/examples/cvsup/ports-supfile</code>
                  do innego katalogu, np. <code class="filename">/root</code> b±d¼ w³asnego
                  katalogu domowego.</p></li><li class="step"><p>Zmodyfikuj plik <code class="filename">ports-supfile</code>.</p></li><li class="step"><p>Zmieñ wpis
                  <em class="replaceable"><code>CHANGE_THIS.FreeBSD.org</code></em>na adres
                  wybranego serwera lustrzanego <span class="application">CVSup</span>.
                  Kompletna lista serwerów lustrzanych dostêpna jest w podrozdziale
                  <a class="link" href="cvsup.html#cvsup-mirrors" title="A.5.7. CVSup Sites">Serwery lustrzane
                    CVSup</a> (<a class="xref" href="cvsup.html#cvsup-mirrors" title="A.5.7. CVSup Sites">Sekcja A.5.7, "CVSup Sites"</a>).</p></li><li class="step"><p>Teraz uruchom <code class="command">cvsup</code> u¿ywaj±c
                  polecenia::</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cvsup -L 2 /root/ports-supfile</code></strong></pre></li></ol></div></div></li><li class="step"><p>Pó¼niejsze wpisanie polecenia <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvsup&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvsup</span>(1)</span></a> spowoduje
            sprawdzenie zmian dokonanych w kolekcji portów i aktualizacjê
            lokalnej wersji. Nie spowoduje to natomiast automatycznie ponownego
            skompilowania wykorzystywanych przez nas portów.</p></li></ol></div><div class="procedure"><a id="idp78703312"></a><div class="procedure-title">Procedura 4.2. Metoda Portsnap</div><p><span class="application">Portsnap</span> jest alternatywnym
          systemem dystrybucji kolekcji portów. Po raz pierwszy zosta³
            do³±czony do FreeBSD 6.0. W starszych wersjach mo¿e zostaæ
            zainstalowany z pakietu <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/portsnap/pkg-descr">sysutils/portsnap</a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r portsnap</code></strong></pre><p>Szczegó³owe informacje o mo¿liwo¶ciach programu dostêpne
          s± w podrozdziale <a class="link" href="portsnap.html" title="A.6. Using Portsnap">Korzystanie z
            Portsnap</a>.</p><ol class="procedure" type="1"><li class="step"><p>Ten punkt mo¿emy pomin±æ je¶li posiadamy FreeBSD 6.1-RELEASE
            b±d¼ najnowsz± wersjê programu <span class="application">Portsnap</span>.
            Przy pierwszym uruchomieniu programu <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a>  zostanie
            automatycznie utworzony katalog <code class="filename">/usr/ports</code>. W starszych wersjach programu
            wymagane jest w³asnorêczne utworzenie katalogu:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /usr/ports</code></strong></pre></li><li class="step"><p>Pobierz skompresowan± migawkê kolekcji portów do katalogu
            <code class="filename">/var/db/portsnap</code>. Mo¿na nastêpnie
            zakoñczyæ po³±czenie z Internetem, je¶li jest taka potrzeba.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap fetch</code></strong></pre></li><li class="step"><p>Je¶li uruchamiany <span class="application">Portsnap</span> po raz
            pierwszy nale¿y rozpakowaæ migawkê do katalogu
            <code class="filename">/usr/ports</code>:
	  </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap extract</code></strong></pre><p>Je¶li posiadamy ju¿ kolekcjê portów w <code class="filename">/usr/ports</code> i jedynie j± aktualizujemy,
            wpisujemy polecenie:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap update</code></strong></pre></li></ol></div><div class="procedure"><a id="idp78724816"></a><div class="procedure-title">Procedura 4.3. Metoda sysinstall</div><p>Metoda ta instaluje kolekcjê portów z lokalnego no¶nika pos³uguj±c
          siê programem <span class="application">sysinstall</span>. Zainstalowana
          zostanie kopia kolekcji z dnia, w którym przygotowana zosta³a dana wersja
          FreeBSD. Je¶li dysponujemy po³±czeniem z Internetem powinni¶my zawsze
          stosowaæ jedn± z metod opisanych powy¿ej.</p><ol class="procedure" type="1"><li class="step"><p>Uruchom  <code class="command">sysinstall</code> jako u¿ytkownik
            <code class="systemitem">root</code> (<code class="command">/stand/sysinstall</code>
            w wersjach FreeBSD starszych ni¿ 5.2):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysinstall</code></strong></pre></li><li class="step"><p>Przejd¼ w dó³, wybierz <span class="guimenuitem">Configure</span>,
            i naci¶nij <span class="keycap"><strong>Enter</strong></span>.</p></li><li class="step"><p>Przejd¼ w dó³, wybierz
            <span class="guimenuitem">Distributions</span> i naci¶nij
	    <span class="keycap"><strong>Enter</strong></span>.</p></li><li class="step"><p>Przejd¼ w dó³ do opcji <span class="guimenuitem">ports</span> i naci¶nij
	    <span class="keycap"><strong>Spacjê</strong></span>.</p></li><li class="step"><p>Przejd¼ do góry do opcji <span class="guimenuitem">Exit</span> i naci¶nij
	    <span class="keycap"><strong>Enter</strong></span>.</p></li><li class="step"><p>Ustaw wybrany przez siebie typ medium instalacji, jak np. p³ytê CDROM,
            serwer FTP, itd.</p></li><li class="step"><p>Przejd¼ do góry do opcji <span class="guimenuitem">Exit</span> i naci¶nij
	    <span class="keycap"><strong>Enter</strong></span>.</p></li><li class="step"><p>Naci¶ni <span class="keycap"><strong>X</strong></span> by wyj¶æ z programu
	    <span class="application">sysinstall</span>.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-skeleton"></a>4.5.2. Instalacja Portów</h3></div></div></div><a id="idp78744528" class="indexterm"></a><p>Pierwsza rzecz o jakiej nale¿y wspomnieæ omawiaj±c
        kolekcjê portów, jest <span class="quote">"<span class="quote">szkielet</span>"</span>. Mówi±c w
        skrócie, szkielet portu jest minimalnym zestawem plików,
        które informuj± FreeBSD, jak poprawnie skompilowaæ i
        zainstalowaæ program. Ka¿dy szkielet portu zawiera:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Plik <code class="filename">Makefile</code>.  Plik ten zawiera
            ró¿ne dane okre¶laj±ce jak skompilowaæ aplikacjê oraz gdzie
            j± zainstalowaæ w systemie.</p></li><li class="listitem"><p>Plik <code class="filename">distinfo</code> Plik ten zawiera informacje
            dotycz±ce plików, które musz± zostaæ pobrane, by skompilowaæ
            port. Ponadto zawiera sumy kontrolne, na podstawie których
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md5&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">md5</span>(1)</span></a> potrafi sprawdziæ, czy pliki nie uleg³y uszkodzeniu
            w trakcie pobierania z sieci.</p></li><li class="listitem"><p>Katalog <code class="filename">files</code>, który zawiera ³aty
            pozwalaj±ce skompilowaæ i zainstalowaæ program w naszym
            systemie FreeBSD. £aty s± ma³ymi plikami, w których okre¶lone
            s± zmiany dotycz±ce konkretnych plików. S± to pliki tekstowe i po
            prostu mówi± <span class="quote">"<span class="quote">Usuñ liniê 10</span>"</span> lub <span class="quote">"<span class="quote">Zmieñ liniê
              26 na to: ...</span>"</span>. £atki s± tak¿e znane jako <span class="quote">"<span class="quote">diffs</span>"</span>
            (ang. skrót od ró¿nice) poniewa¿ s± generowane przez program
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>.</p><p>Ten katalog mo¿e zawieraæ tak¿e inne pliki u¿ywane do
            kompilacji portu.</p></li><li class="listitem"><p>Plik opisu <code class="filename">pkg-descr</code>. Jest to bardziej
            szczegó³owy, nierzadko wieloliniowy opis programu.</p></li><li class="listitem"><p>Plik listy <code class="filename">pkg-plist</code>.  Jest to lista wszystkich
            plików, które zostan± zainstalowane przez port. Jest to tak¿e lista plików,
            które nale¿y usun±æ w przypadku odinstalowywania.</p></li></ul></div><p>Niekiedy porty zawieraj± równie¿ inne pliki, jak na przyk³ad
        <code class="filename">pkg-message</code> (message-wiadomo¶æ).
        System portów u¿ywa tych plików w specjalnych sytuacjach. Je¶li potrzebujesz
        wiêcej informacji na temat tych plików i portów w ogóle, zajrzyj do podrêcznika
        <a class="link" href="../../../../doc/pl_PL.ISO8859-2/books/porters-handbook/index.html" target="_top">FreeBSD
          Porter's Handbook</a>.</p><p>Jak ju¿ raz powiedziano, porty zawieraj± instrukcje odno¶nie
        kompilacji programów z kodu ¼ród³owego. Jednak¿e nie zawieraj±
        one samego kodu. Kod pobraæ mo¿na z p³yty CD b±d¼ z Internetu.
        Rozprowadzany mo¿e byæ w dowolnej postaci jak± wybierze sobie
        jego producent, przy czym najczê¶ciej jest to spakowany plik tar
        skompresowany dodatkowo gzipem. Kod ¼ród³owy programu nazywany
        jest <span class="quote">"<span class="quote">distfile</span>"</span>. Poni¿ej przedstawione zosta³y dwie
        metody instalacji portów we FreeBSD.</p><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml"> By móc zainstalowaæ port musimy byæ zalogowania jako
          u¿ytkownik <code class="systemitem">root</code>.</p></div><div xmlns="" class="warning"><h3 class="admontitle">Ostrze¿enie: </h3><p xmlns="http://www.w3.org/1999/xhtml"> Przed instalacj± jakiegokolwiek portu nale¿y upewniæ siê,
          ¿e dysponujemy aktualn± kolekcj± portów oraz sprawdziæ potencjalne
          luki bezpieczeñstwa zwi±zane z danym portem na stronie <code class="uri"><a class="uri" href="http://vuxml.freebsd.org/" target="_top">http://vuxml.freebsd.org/</a></code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Istnieje mo¿liwo¶æ zautomatyzowania procesu weryfikacji
          potencjalnych luk bezpieczeñstwa przed instalacj± portu. Do tego
          celu mo¿na wykorzystaæ program <span class="application">portaudit</span>,
          dostêpny równie¿ w kolekcji portów (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/portaudit/pkg-descr">security/portaudit</a>). Wydanie polecenia
          <code class="command">portaudit -F</code> przed instalacj± nowego portu
          spowoduje pobranie aktualnej bazy luk bezpieczeñstwa. Mo¿liwe jest
          równie¿ wykonywanie regularnych aktualizacji bazy i rewizji
          zainstalowanego oprogramowania w trakcie codziennego przegl±du
          bezpieczeñstwa systemu. Wiêcej informacji dostêpnych jest na stronach
          podrêcznika systemowego <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portaudit&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">portaudit</span>(1)</span></a> i <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a>.</p></div><p>Sposób funkcjonowania kolekcji portów wi±¿e siê z za³o¿eniem,
        ¿e posiadamy po³±czenie z Internetem. Je¶li nie, bêdziemy musieli
        rêcznie pobieraæ kod ¼ród³owy <span class="quote">"<span class="quote">distfile</span>"</span> i umieszczaæ
        w katalogu <code class="filename">/usr/ports/distfiles</code> dla ka¿dego
        instalowanego portu.</p><p>By rozpocz±æ instalacjê nale¿y przej¶æ do katalogu
          wybranego portu:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/sysutils/lsof</code></strong></pre><p>Wewn±trz katalogu <code class="filename">lsof</code> znajduje siê
          szkielet portu. Nastêpnym krokiem jest kompilacja programu, co
          sprowadza siê do wpisania polecenia <code class="command">make</code>.
          Efekt dzia³ania polecenia powinien byæ zbli¿ony do:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
&gt;&gt; lsof_4.57D.freebsd.tar.gz doesn't seem to exist in /usr/ports/distfiles/.
&gt;&gt; Attempting to fetch from ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/.
===&gt;  Extracting for lsof-4.57
...
[extraction output snipped]
...
&gt;&gt; Checksum OK for lsof_4.57D.freebsd.tar.gz.
===&gt;  Patching for lsof-4.57
===&gt;  Applying FreeBSD patches for lsof-4.57
===&gt;  Configuring for lsof-4.57
...
[configure output snipped]
...
===&gt;  Building for lsof-4.57
...
[compilation output snipped]
...
<code class="prompt">#</code></pre><p>Po skoñczeniu kompilacji powracamy do linii poleceñ.
          Kolejnym krokiem jest instalacja portu poprzez wpisanie polecenia
          <code class="command">make</code> wraz ze s³owem
          <code class="command">install</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong>
===&gt;  Installing for lsof-4.57
...
[installation output snipped]
...
===&gt;   Generating temporary packing list
===&gt;   Compressing manual pages for lsof-4.57
===&gt;   Registering installation for lsof-4.57
===&gt;  SECURITY NOTE:
      This port has installed the following binaries which execute with
      increased privileges.
<code class="prompt">#</code></pre><p>Gdy ponownie powrócimy do linii poleceñ, powinni¶my
          byæ ju¿ w stanie uruchomiæ w³a¶nie zainstalowan± aplikacjê.
          Ostrze¿enie jakie pojawi siê na ekranie zwi±zane jest z faktem,
          ¿e lsof jest programem pracuj±cym ze zwiêkszonymi przywilejami.
          W trakcie kompilacji i instalacji portów powinni¶my zwracaæ uwagê
          na wszystkie pojawiaj±ce siê ostrze¿enia.</p><p>Dobrym pomys³em, jest równie¿ usuniêcie podkatalogu
          zawieraj±cego wszystkie tymczasowe pliki wykorzystywane
          w trakcie kompilacji. Nie tylko dlatego, ¿e niepotrzebnie zajmuje
          miejsce na dysku, ale równie¿ dlatego, ¿e mo¿e byæ przyczyn±
          problemów podczas aktualizacji programu do nowszej wersji.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make clean</code></strong>
===&gt;  Cleaning for lsof-4.57
<code class="prompt">#</code></pre><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">Mo¿na sobie oszczêdziæ dwóch naddatkowych kroków wpisuj±c
            od razu <code class="command">make install clean</code> zamiast trzech
            osobnych poleceñ <code class="command">make</code>,
	    <code class="command">make install</code> oraz
            <code class="command">make clean</code>.</p></div><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">Niektóre pow³oki utrzymuj± bufor listy poleceñ
            z katalogów znajduj±cych siê w zmiennej ¶rodowiskowej
            <code class="envar">PATH</code>. Ma to za zadanie przy¶pieszyæ
            wyszukiwanie plików binarnych tych¿e poleceñ.
            Je¶li korzystamy z jednej z takich w³a¶nie pow³ok
            mo¿e okazaæ siê niezbêdnym wydaæ polecenie
            <code class="command">rehash</code> po instalacji portu,
            nim bêdziemy mogli wykorzystaæ nowo zainstalowany
            program. Polecenie to dostêpne jest przy wykorzystaniu
            pow³oki typu <code class="command">tcsh</code>. Natomiast
            dla pow³oki typu <code class="command">sh</code> odpowiednikiem
            jest <code class="command">hash -r</code>. Wiêcej informacji
            dostêpnych jest w dokumentacji pow³oki.</p></div><p>Niektóre wydawnictwa na p³ytach DVD-ROM, jak np. FreeBSD
          Toolkit z <a class="link" href="http://www.freebsdmall.com/" target="_top">FreeBSD
	  Mall</a>, zawieraj± ¼ród³a distfile. Mog± byæ one
          wykorzystane z kolekcj± portów. Wystarczy zamontowaæ p³ytê
          DVD w <code class="filename">/cdrom</code>. Je¶li natomiast u¿ywamy
          innego punktu montowania dla p³yt musimy zmodyfikowaæ zmienn±
          <code class="varname">CD_MOUNTPTS</code> by wskazywa³a na w³a¶ciwe
          miejsce. Niezbêdne ¼ród³a distfile zostan± automatycznie
          wykorzystane je¶li znajduj± siê na p³ycie.</p><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">Mimo wszystko nale¿y mieæ w pamiêci, ¿e licencje
            nielicznych portów nie zezwalaj± na za³±czenie ich na
            p³ycie CD-ROM. Mo¿e to byæ np. z powodu konieczno¶ci
            wcze¶niejszej rejestracji przed pobraniem ¼róde³ b±d¼
            ich redystrybucja nie jest dozwolona. Je¶li chcemy
            zainstalowaæ port, który nie znajduje siê na p³ycie
            CD musimy mieæ po³±czenie z Internetem.</p></div><p>System portów do pobierania plików wykorzystuje
          program <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">fetch</span>(1)</span></a>, który z kolei potrafi korzystaæ
          z wielu zmiennych ¶rodowiskowych, m.in.
          <code class="envar">FTP_PASSIVE_MODE</code>, <code class="envar">FTP_PROXY</code>
	  czy <code class="envar">FTP_PASSWORD</code>. Je¶li znajdujemy siê
          za zapor± ogniow±, b±d¼ musimy korzystaæ z serwera
          po¶rednicz±cego FTP/HTTP proxy, mo¿e siê okazaæ,
          ¿e bêdziemy musieli ustawiæ niektóre z tych zmiennych.
          Kompletna lista wykorzystywanych zmiennych dostêpna
          jest w podrêczniku systemowym <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">fetch</span>(3)</span></a>.</p><p>Dla u¿ytkowników nie mog±cych byæ ca³y czas po³±czonych
          z Internetem dostêpne jest polecenie
          <code class="command">make fetch</code>.
          Wystarczy wpisaæ to polecenie znajduj±c siê w g³ównym
          katalogu drzewa portów (<code class="filename">/usr/ports</code>)
          a wymagane pliki zostan± automatycznie pobrane. Polecenie
          to bêdzie równie¿ funkcjonowaæ w podkatalogach, np.
          <code class="filename">/usr/ports/net</code>. Jednak¿e, w takiej
          sytuacji <span class="emphasis"><em>nie</em></span> zostan± automatycznie
          pobrane ¼ród³a bibliotek, od których zale¿y dany port.
          Zamieniaj±c parametr <code class="buildtarget">fetch</code> na
          <code class="buildtarget">fetch-recursive</code> spowodujemy
          pobranie równie¿ ¼róde³ wszystkich portów, od których
          zale¿y instalowany program.</p><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">Mo¿liwe jest kompilowanie ka¿dego portu z osobna
          w danej kategorii, b±d¼ wszystkich na raz poprzez polecenie
          <code class="command">make</code> wykonane, analogicznie do
          <code class="command">make fetch</code>,
          w g³ównym katalogu kategorii. Jednak¿e jest to niebezpieczna
          metoda, gdy¿ niektóre porty nie mog± jednocze¶nie funkcjonowaæ
          w systemie, b±d¼ mog± zainstalowaæ ró¿ne pliki o tej samej
          nazwie.</p></div><p>W naprawdê ¿adkich przypadkach, u¿ytkownicy mog± pozyskaæ
          pliki distfile z innego ¼ród³a ni¿ <code class="varname">MASTER_SITES</code>
          (miejsce sk±d je pobiera system portów). Opcjê
          <code class="varname">MASTER_SITES</code> mo¿na zast±piæ za
          pomoc± nastêpuj±cego polecenia:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/directory</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make MASTER_SITE_OVERRIDE= \
ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/ fetch</code></strong></pre><p>W tym przyk³adzie zast±pili¶my opcjê
          <code class="varname">MASTER_SITES</code> adresem <code class="systemitem">ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">Niektóre porty umo¿liwiaj± (a nawet wymagaj±)
          podanie pewnych opcji kompilacji, które mog± w³±czyæ
          b±d¼ wy³±czyæ nie potrzebne czê¶ci aplikacji, pewne
          opcje bezpieczeñstwa i inne parametry. Z przychodz±cych
          na my¶l tego typu programów to
          <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mozilla/pkg-descr">www/mozilla</a>, <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/gpgme/pkg-descr">security/gpgme</a> oraz <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/sylpheed-claws/pkg-descr">mail/sylpheed-claws</a>. Za ka¿dym
          razem gdy dostêpne bêd± tego typu opcje wy¶wietlony
          zostanie komunikat.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78842960"></a>4.5.2.1. Ignorowanie domy¶lnych katalogów portów</h4></div></div></div><p>Czasami okazuje siê byæ przydatne (a nawet wymagane)
          by skorzystaæ z innych katalogów tymczasowych i docelowych.
          Domy¶lne katalogi mo¿na zast±piæ wykorzystuj±c zmienne
          <code class="varname">WRKDIRPREFIX</code> i <code class="varname">PREFIX</code>.
          Na przyk³ad:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make WRKDIRPREFIX=/usr/home/example/ports install</code></strong></pre><p>spowoduje skompilowanie portu w katalogu
          <code class="filename">/usr/home/example/ports</code> i instalacjê
          w podkatalogach <code class="filename">/usr/local</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make PREFIX=/usr/home/example/local install</code></strong></pre><p>spowoduje natomiast kompilacjê w katalogu
          <code class="filename">/usr/ports</code> oraz instalacjê
          w podkatalogach
	  <code class="filename">/usr/home/example/local</code>.</p><p>I oczywi¶cie,</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make WRKDIRPREFIX=../ports PREFIX=../local install</code></strong></pre><p>spowoduje po³±cznie obydwu powy¿szych
          ustawieñ (jest to za d³ugie by ca³kowicie zmie¶ci³o
          siê na stronie, ale powinno daæ ogólne wyobra¿enie).</p><p>Alternatywnie, obydwie zmienne mog± byæ
          równie¿ okre¶lone jako zmienne ¶rodowiskowe.
          Informacje o definiowaniu zmiennych ¶rodowiskowych
          dostêpne s± w podrêczniku systemowym naszej
          pow³oki.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78859344"></a>4.5.2.2. Jak poradziæ sobie z <code class="command">imake</code></h4></div></div></div><p>Niektóre porty wykorzystuj±ce <code class="command">imake</code>
          (czê¶æ Systemu okien X) nie wspó³pracuj± ze zmienn±
          <code class="varname">PREFIX</code> i mimo wszystko bêd±
          instalowa³y programy w <code class="filename">/usr/X11R6</code>.
          Podobnie niektóre z portów napisanych w jêzyku Perl
          ignoruj± zmienn± <code class="varname">PREFIX</code>
          i instaluj± programy w g³ównym drzewie Perla.
          Zmuszenie tych portów do wspó³pracy ze zmienn±
          <code class="varname">PREFIX</code> jest niezmiernie trudne,
          albo wrêcz niemo¿liwe.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-removing"></a>4.5.3. Usuwanie zainstalowanych portów</h3></div></div></div><a id="idp78863824" class="indexterm"></a><p>Teraz, gdy wiesz ju¿ jak instalowaæ porty,
        zastanawiasz siê prawdopodobnie jak je usuwaæ,
        na przyk³ad w wypadku, gdy zainstalowali¶my port,
        ale okaza³o siê jednak, ¿e to nie by³ ten którego
        szukali¶my. W ramach przyk³adu usuniemy port,
        który instalowali¶my poprzednio (dla tych którzy
        nie uwa¿aj±, by³ to <code class="command">lsof</code>).
        Podobnie jak w przypadku pakietów (szerzej opisane
        w podrozdziale traktuj±cym o <a class="link" href="packages-using.html" title="4.4. Korzystanie z systemu pakietów">pakietach</a>),
        równie¿ porty usuwane s± za pomoc± polecenia
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_delete&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_delete</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_delete lsof-4.57</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-upgrading"></a>4.5.4. Aktualizacja portów</h3></div></div></div><a id="idp78881232" class="indexterm"></a><p>Na wstêpie musimy wy¶wietliæ zdezaktualizowane porty w kolekcji.
        Wykorzystamy do tego polecenie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_version&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_version</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_version -v</code></strong></pre><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-file-updating"></a>4.5.4.1. <code class="filename">/usr/ports/UPDATING</code></h4></div></div></div><p>Po zaktualizowaniu kolekcji, a przed prób± aktualizacji
          jakichkolwiek portów, nale¿y zapoznaæ siê z zawarto¶ci± pliku
          <code class="filename">/usr/ports/UPDATING</code>. Plik ten opisuje
          ró¿ne zagadnienia i dodatkowe kroki, na które mo¿na natkn±æ
          siê i bêdzie trzeba wykonaæ podczas aktualizacji, np.
          zmiany formatu plików czy zmiany w lokalizacji plików
          konfiguracyjnych.</p><p>Je¶li opis w pliku <code class="filename">UPDATING</code> mówi co¶ innego
          ni¿ ten tekst, nale¿y zastosowaæ siê do opisu.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portupgrade"></a>4.5.4.2. Aktualizacja portów z wykorzystaniem programu Portupgrade</h4></div></div></div><a id="idp78892112" class="indexterm"></a><p>Program <span class="application">portupgrade</span> zosta³
          zaprojektowany by u³atwiæ aktualizacjê zainstalowanych w
          systemie portów. Dostêpny jest z portu <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/portupgrade/pkg-descr">sysutils/portupgrade</a>.
          Jego instalacja przebiega dok³adnie tak samo, jak ka¿dego
          innego portu, wykorzystuj±c polecenie
          <code class="command">make install
          clean</code> command:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/sysutils/portupgrade</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Przeskanujmy nastêpnie listê zainstalowanych portów
        za pomoc± polecenia <code class="command">pkgdb -F</code> i usuñmy
        wszystkie niezgodno¶ci jakie nam zwróci skanowanie.
        Regularne skanowanie przed ka¿d± aktualizacj± jest
        zdecydowanie dobrym pomys³em.</p><p>Wydanie polecenia <code class="command">portupgrade -a</code>
        spowoduje, ¿e program <span class="application">portupgrade</span>
        rozpocznie aktualizacjê wszystkich przedawnionych portów
        zainstalowanych w naszym systemie. Parametr <code class="option">-i</code>
        pozwoli przej¶æ w tryb interaktywny, gdzie bêdziemy musieli
        potwierdziæ aktualizacjê ka¿dego portu.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -ai</code></strong></pre><p>By zaktualizowaæ jedynie wybran± aplikacjê zamiast wszystkich
        portów nale¿y wykorzystaæ polecenie <code class="command">portupgrade
	nazwa_programu</code>.
        Opcja <code class="option">-R</code> oznacza, ¿e portupgrade powinien
        najpierw zaktualizowaæ wszystkie porty, od których
        zale¿y dany program.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -R firefox</code></strong></pre><p>By do instalacji wykorzystaæ pakiety zamiast portów
        nale¿y dodaæ parametr <code class="option">-P</code>. Wówczas
        <span class="application">portupgrade</span> przeszuka katalogi
        zawarte w zmiennej <code class="envar">PKG_PATH</code>. Je¶li pakiet
        nie zostanie odnaleziony lokalnie zostanie pobrany z Internetu.
        Je¶li nie bêdzie mo¿liwe ¿adne z powy¿szych, wówczas
        <span class="application">portupgrade</span> wykorzysta do
        aktualizacji porty. By temu zapobiec nale¿y zastosowaæ
        parametr <code class="option">-PP</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -PR gnome2</code></strong></pre><p>Aby pobraæ jedynie pliki ¼ród³owe distfiles
        (b±d¼ pakiety, gdy wykorzystamy opcjê <code class="option">-P</code>)
        bez kompilacji czy instalacji czegokolwiek nale¿y u¿yæ
        parametru <code class="option">-F</code>. Wiêcej informacji
        dostêpnych jest w <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portupgrade&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">portupgrade</span>(1)</span></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portmanager"></a>4.5.4.3. Aktualizacja portów z wykorzystaniem programu Portmanager</h4></div></div></div><a id="idp78911952" class="indexterm"></a><p>Kolejnym narzêdziem u³atwiaj±cym aktualizacjê zainstalowanych
          portów jest <span class="application">Portmanager</span>, dostêpny z portu
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/portmanager/pkg-descr">sysutils/portmanager</a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/sysutils/portmanager</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Wszystkie zainstalowane porty mog± zostaæ zaktualizowane
          za pomoc± polecenia:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmanager -u</code></strong></pre><p>Wykorzystuj±c parametr <code class="option">-ui</code> przechodzimy w tryb
          interaktywny, gdzie bêdziemy pytani o potwierdzenie ka¿dej operacji
          wykonywanej przez <span class="application">Portmanager</span>.
          Program ten mo¿e byæ z równym powodzeniem wykorzystywany do instalacji
          nowych portów w systemie. W przeciwieñstwie do polecenia
          <code class="command">make install clean</code> program
          <span class="application">Portmanager</span> zaktualizuje wszystkie
          zale¿no¶ci nim skompiluje i zainstaluje wybrany port.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmanager x11/gnome2</code></strong></pre><p>Gdy wyst±pi± problemy z zale¿no¶ciami wybranego portu
          mo¿na wykorzystaæ <span class="application">Portmanager</span>a,
          by ponownie skompilowa³ je we w³a¶ciwej kolejno¶ci. Na
          koniec zostanie równie¿ ponownie skompilowany port
          stwarzaj±cy problemy.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmanager graphics/gimp -f</code></strong></pre><p>Wiêcej informacji dostêpnych jest na stronach podrêcznika
          systemowego <span class="application">Portmanager</span>a.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-disk-space"></a>4.5.5. Porty i przestrzeñ na dysku</h3></div></div></div><a id="idp78927312" class="indexterm"></a><p>Korzystanie z kolekcji portów z czasem odbije siê na
        wolnym miejscu na dysku. Dlatego te¿ zawsze po skompilowaniu
        i zainstalowaniu programu z portu powinni¶my pamiêtaæ
        o usuniêciu tymczasowych katalogów roboczych (ang.
        <code class="filename">work</code> directories)
        wykorzystuj±c do tego polecenie <code class="command">make
	clean</code>. Ca³± kolekcjê natomiast
        mo¿na oczy¶ciæ wpisuj±ce polecenie:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsclean -C</code></strong></pre><p>Z czasem uzbiera nam siê wiele katalogów
        <code class="filename">distfiles</code>, które
        bêd± jedynie zajmowaæ przestrzeñ na dysku. Mo¿emy je rêcznie
        usuwaæ b±d¼ pos³u¿yæ siê nastêpuj±cym poleceniem, by usun±æ
        wszystkie katalogi distfiles nie powi±zane aktualnie z
        ¿adnym portem:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsclean -D</code></strong></pre><p>Bad¼, by usun±æ wszystkie katalogi disftiles, do których nie odnosi siê
        ¿aden z aktualnie zainstalowanych portów w naszym systemie:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsclean -DD</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Uwaga: </h3><p xmlns="http://www.w3.org/1999/xhtml">Program <code class="command">portsclean</code> jest czê¶ci± pakietu
          <span class="application">portupgrade</span>.</p></div><p>Pamiêtajmy równie¿ o usuwaniu instalowanych portów gdy
        ju¿ ich nie potrzebujemy. Przydatne narzêdzie pozwalaj±ce
        zautomatyzowaæ te czynno¶ci znajduje siê w
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/pkg_cutleaves/pkg-descr">sysutils/pkg_cutleaves</a>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="packages-using.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="ports.html">Pocz±tek rozdzia³u</a></td><td width="40%" align="right"> <a accesskey="n" href="ports-nextsteps.html">Nastêpny</a></td></tr><tr><td width="40%" align="left" valign="top">4.4. Korzystanie z systemu pakietów </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis tre¶ci</a></td><td width="40%" align="right" valign="top"> 4.6. Czynno¶ci po-instalacyjne</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>