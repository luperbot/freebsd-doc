<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>4.5. Uso de la colección de ports</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manual de FreeBSD" /><link rel="up" href="ports.html" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports" /><link rel="prev" href="packages-using.html" title="4.4. Uso del sistema de packages" /><link rel="next" href="ports-nextsteps.html" title="4.6. Después de instalar un port" /><link rel="copyright" href="legalnotice.html" title="Aviso Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.5. Uso de la colección de ports</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="packages-using.html">Anterior</a> </td><th width="60%" align="center">Capítulo 4. Instalación de aplicaciones: «packages» y ports</th><td width="20%" align="right"> <a accesskey="n" href="ports-nextsteps.html">Siguiente</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-using"></a>4.5. Uso de la colección de ports</h2></div></div></div><p>La siguiente sección incluye las instrucciones
      básicas para instalar o eliminar programas mediante la
      Colección de Ports de su sistema.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-tree"></a>4.5.1. Cómo obtener la Colección de Ports</h3></div></div></div><p>Para poder instalar ports primero debe hacerse, obviamente, con
        la Colección de Ports&#8212;; en esencia está compuesta
        por <code class="filename">Makefiles</code>, parches y ficheros con la
        descripción de los ports y está en
        <code class="filename">/usr/ports</code>.</p><p>Cuando instaló su sistema FreeBSD el programa
	    <span class="application">sysinstall</span> le preguntó si
	    querí instalar la Colección de Ports.
	    Si contestó que no siga estas instrucciones:</p><div class="procedure"><a id="idp70193488"></a><div class="procedure-title">Procedimiento 4.1. Mediante CVSup</div><p>Este es un método rápido de conseguir y
	  mantener una copia de la Colección de Ports al dia mediante
	  el protocolo <span class="application">CVSup</span>.  Si quiere saber
	  más sobre <span class="application">CVSup</span> consulte <a class="link" href="cvsup.html" title="30.2. Uso de CVSup">Uso de CVSup</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">La implementación del protocolo
	    <span class="application">CVSup</span> que se incluye en FreeBSD se llama
	    <span class="application">csup</span>.  Apareció en FreeBSD 6.2.
	    Los usuarios de releases anteriores de FreeBSD puden instalar <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/csup/pkg-descr">net/csup</a> como port o package.</p></div><p>Asegúrese de que <code class="filename">/usr/ports</code>
	  está vacío antes de ejecutar <span class="application">csup</span>
	  por primera vez.  Si ya tiene la Colección de Ports porque la
	  ha instalado por otros medios  <span class="application">csup</span>
	  no purgará los parches de ports eliminados.</p><ol class="procedure" type="1"><li class="step"><p>Ejecute <code class="command">csup</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>csup -L 2 -h cvsup.FreeBSD.org /usr/share/examples/cvsup/ports-supfile</code></strong></pre><p>Cambie
	    <em class="replaceable"><code>cvsup.FreeBSD.org</code></em> por algún
	    otro servidor <span class="application">CVSup</span> que tenga cerca.
	    Consulte <a class="link" href="cvsup.html#cvsup-mirrors" title="30.2.2. Servidores">Réplicas CVSup</a> (<a class="xref" href="cvsup.html#cvsup-mirrors" title="30.2.2. Servidores">Sección 30.2.2, &#8220;Servidores&#8221;</a>), donde encontrará una lista
	    completa de las réplicas CVSup.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Puede usar una versión de
	      <code class="filename">ports-supfile</code> confeccionada a su gusto,
	      por ejemplo para evitar tener que indicarle el nombre del
	      servidor <span class="application">CVSup</span> a mano.</p><div xmlns="http://www.w3.org/1999/xhtml" class="procedure"><ol class="procedure" type="1"><li class="step"><p>Haga lo siguiente: como <code class="systemitem">root</code> copie
		  <code class="filename">/usr/share/examples/cvsup/ports-supfile</code>
		  en otro sitio, por ejemplo
		  <code class="filename">/root</code> o su directorio /home.</p></li><li class="step"><p>Edite <code class="filename">ports-supfile</code>.</p></li><li class="step"><p>Reemplace
		  <em class="replaceable"><code>CHANGE_THIS.FreeBSD.org</code></em>
		  por un servidor <span class="application">CVSup</span> que
		  esté cerca de donde esté usted.  Consulte
		  <a class="link" href="cvsup.html#cvsup-mirrors" title="30.2.2. Servidores">Réplicas
		  CVSup</a> (<a class="xref" href="cvsup.html#cvsup-mirrors" title="30.2.2. Servidores">Sección 30.2.2, &#8220;Servidores&#8221;</a>) si necesita
		  ver una lista completa de las mismas.</p></li><li class="step"><p>Ejecute <code class="command">csup</code>del siguiente
		  modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>csup -L 2 /root/ports-supfile</code></strong></pre></li></ol></div></div></li><li class="step"><p>Al ejecutar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csup&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csup</span>(1)</span></a> descargará y
	    aplicará todos los cambios recientes que haya sufrido
	    la Colección de Ports, pero tenga en cuenta que no
	    actualizará ninguno de los ports que ya tenga instalados
	    en su sistema.</p></li></ol></div><div class="procedure"><a id="idp70243792"></a><div class="procedure-title">Procedimiento 4.2. Mediante portsnap</div><p><span class="application">Portsnap</span> es un método
	   alternativo de distribuir la Colección de Ports.  Se
	   incluyó por primera vez en FreeBSD 6.0.  Puede
	   instalar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a> en versiones anteriores de FreeBSD
	   como port (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portsnap/pkg-descr">ports-mgmt/portsnap</a>) o como
	    package:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r portsnap</code></strong></pre><ol class="procedure" type="1"><li class="step"><p>Puede saltarse esta paso a partir de FreeBSD 6.1-RELEASE
	    y en versiones recientes de
	    <span class="application">Portsnap</span> (port o package).
	    <code class="filename">/usr/ports</code> se creará
	    automáticamente la primera vez que ejecute
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a>.  En versiones anteriores de
	    <span class="application">portsnap</span> había que crear
	    un <code class="filename">/usr/ports</code> vacío si
	    no existía previamente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /usr/ports</code></strong></pre></li><li class="step"><p>Descargue una instantánea comprimida de la
	    Colección de Ports en
	    <code class="filename">/var/db/portsnap</code>.  Hecho esto
	    puede desconectar de Internet si quiere.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap fetch</code></strong></pre></li><li class="step"><p>Si está ejecutando <span class="application">Portsnap</span> por
	    vez primera debe extraer la instantánea en <code class="filename">/usr/ports</code>:
	  </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap extract</code></strong></pre><p>Si ya tiene un <code class="filename">/usr/ports</code> y solamente está
	    actualizando su árbol de ports ejecute lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap update</code></strong></pre></li></ol></div><div class="procedure"><a id="idp70261584"></a><div class="procedure-title">Procedimiento 4.3. Mediante Sysinstall</div><p>Este método implica el uso de
	  <span class="application">sysinstall</span> para
	  instalar la Colección de Ports.</p><ol class="procedure" type="1"><li class="step"><p>Como usuario <code class="systemitem">root</code> ejecute
	    <code class="command">sysinstall</code>
	    (<code class="command">/stand/sysinstall</code> en cualquier versión
	    previa a FreeBSD 5.2); del siguiente modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysinstall</code></strong></pre></li><li class="step"><p>Posiciónese en la opción
	    <span class="guimenuitem">Configure</span>
	    y pulse <span class="keycap"><strong>Intro</strong></span>.</p></li><li class="step"><p>Seleccione la opción
	  <span class="guimenuitem">Distributions</span>
	  y pulse <span class="keycap"><strong>Intro</strong></span>.</p></li><li class="step"><p>Seleccione la opción <span class="guimenuitem">ports</span>
	    y pulse la <span class="keycap"><strong>barra espaciadora</strong></span>.</p></li><li class="step"><p>Seleccione el medio de instalación deseado (CDROM,
	    FTP, etc.)</p></li><li class="step"><p>Diríjase a la opción
	    <span class="guimenuitem">Exit</span> y
	    pulse <span class="keycap"><strong>Intro</strong></span>.</p></li><li class="step"><p>Pulse <span class="keycap"><strong>X</strong></span> para salir de
            <span class="application">sysinstall</span>.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-skeleton"></a>4.5.2. Instalación de ports</h3></div></div></div><a id="idp70279760" class="indexterm"></a><p>Al hablar de la Colección de Ports lo primero que
        hay que explicar es a qué nos referimos cuando hablamos de
        un «esqueleto» (skeleton).  El esqueleto de un
	port es un conjunto mínimo de ficheros que
	indican a FreeBSD cómo compilar e instalar un programa.
        Cada esqueleto incluye:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un <code class="filename">Makefile</code>.  Este
	    <code class="filename">Makefile</code> contiene diversas sentencias
	    que le indican al sistema cómo compilarlo y dónde
	    instalarlo en su sistema.</p></li><li class="listitem"><p>Un fichero <code class="filename">distinfo</code>.  Este fichero
	    contiene información sobre los ficheros que se debe
	    descargar para poder compilar el programa, así como el
	    identificador «checksum», que se usa para comprobar
	    mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md5&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">md5</span>(1)</span></a> que la descarga ha sido correcta y que el
	    la integridad del fichero está garantizada.</p></li><li class="listitem"><p>Un directorio <code class="filename">files</code>.  Este directorio
	    contiene  los parches necesarios para compilar e instalar
	    el programa en su sistema FreeBSD.  Básicamente los parches
	    son pequeños ficheros que especifican cambios en ficheros
	    concretos.  Su formato es en texto plano y suelen decir cosas
	    como «borra la línea 10» o
	    «Cambia la línea 26 por esto».
	    Estos parches también se conocen como
	    «diffs» ya que se generan con
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>.</p><p>Es posible que este directorio tambié contenga
	    algún otro fichero necesario para compilar e instalar
	    el port.</p></li><li class="listitem"><p>Un fichero <code class="filename">pkg-descr</code>.  Es una
	    descripción más detallada del programa.
	    En algunas ocasiones ocupa varias líneas.</p></li><li class="listitem"><p>Un fichero <code class="filename">pkg-plist</code>.  Es una lista de
	    todos los ficheros que instalará el port.
	    También le indica al sistema de ports qué ficheros
	    eliminar durante la desinstalación del programa.</p></li></ul></div><p>Algunos ports tienen otros ficheros, como
        <code class="filename">pkg-message</code>.  El sistema de ports los usa para
        gestionar situaciones especiales.  Si desea conocer los detalles,
        incluso sobre los ports en general, consulte el libro <a class="link" href="http://www.FreeBSD.org/doc/en_EN.ISO8859-1/books/porters-handbook/index.html" target="_top">FreeBSD Porter's Handbook</a>.</p><p>El port incluye las instrucciones necesarias para obtener
        software a partir del código fuente, pero no incluye el
        código.  Puede obtener el código desde un CDROM
        o desde Internet.  El código se distribuye del modo
        que el autor estime oportuno.  Normalmente es un fichero tar
        comprimido con gzip, pero puede comprimirse con otra herramienta o
        incluso no estar comprimido.  El código del programa,
        venga como venga, se llama «distfile».  A
	continuación veremos los dos métodos de
	instalación de un port.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Debe ser el usuario <code class="systemitem">root</code> para
          instalar ports.</p></div><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml"> Antes de instalar cualquier port asegúrese de tener
	  la Colección de Ports actualizada y de comprobar en <code class="uri"><a class="uri" href="http://vuxml.freebsd.org/" target="_top">http://vuxml.freebsd.org/</a></code> la existencia de posibles
	  problemas de seguridad que pudiera tener el port.</p><p xmlns="http://www.w3.org/1999/xhtml">Puede realizar la comprobación de seguridad
	  con <span class="application">portaudit</span> antes de instalar
	  cualquier  aplicación.  Esta herramienta está
	  en la Colección de Ports (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/portaudit/pkg-descr">security/portaudit</a>).  Le rogamos
	  que al menos considere ejecutar
	  <code class="command">portaudit -F</code> antes de instalar un port nuevo
	  para que descargue la nueva base de datos de vulnerabilidades.
	  Durante la comprobación diaria de seguridad
	  actualizará la base de datos y hará una
	  auditoría del sistema.  Para más información
	  lea las páginas de manúal de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portaudit&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">portaudit</span>(1)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a>.</p></div><p>La Colección de  Ports asume que tiene usted conexión
        con Internet.  Si no es así tendrá que disponer de una
	copia del distfile en <code class="filename">/usr/ports/distfiles</code>.</p><p>El primer paso es ubicarse en el directorio del port que desea
	  instalar:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/sysutils/lsof</code></strong></pre><p>Una vez en el directorio <code class="filename">lsof</code> puede
	  ver el esqueleto del port.  El siguiente paso es compilar el
	  port.  Solamente tiene que teclear
	  <code class="command">make</code> en el prompt.  Una vez hecho
	  verá algo como esto:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
&gt;&gt; lsof_4.57D.freebsd.tar.gz doesn't seem to exist in /usr/ports/distfiles/.
&gt;&gt; Attempting to fetch from ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/.
===&gt;  Extracting for lsof-4.57
...
[La salida de la descompresión se ha eliminado]
...
&gt;&gt; Checksum OK for lsof_4.57D.freebsd.tar.gz.
===&gt;  Patching for lsof-4.57
===&gt;  Applying FreeBSD patches for lsof-4.57
===&gt;  Configuring for lsof-4.57
...
[La salida de la configuración se ha eliminado]
...
===&gt;  Building for lsof-4.57
...
[La salida de la compilación se ha eliminado]
...
<code class="prompt">#</code></pre><p>Una vez que acabe la compilación
	  se le devolverá el control del prompt.  El siguiente
	  paso es instalar el port.  Para ello bastará con que
	  añada una palabra a la orden
	  <code class="command">make</code>: esa palabra es
	  <code class="buildtarget">install</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong>
===&gt;  Installing for lsof-4.57
...
[La salida de la instalación se ha eliminado]
...
===&gt;   Generating temporary packing list
===&gt;   Compressing manual pages for lsof-4.57
===&gt;   Registering installation for lsof-4.57
===&gt;  SECURITY NOTE:
      This port has installed the following binaries which execute with
      increased privileges.
<code class="prompt">#</code></pre><p>Una vez que vuelva usted al prompt podrá ejecutar la
	  aplicación que acaba de instalar.  Dado que
	  <code class="command">lsof</code> es un programa que se ejecuta con
	  privilegios altos se le ha mostrado una advertencia de
	  seguridad.  Durante la compilación e instalación
	  es posible que hayan aparecido otros.</p><p>Le recomendamos que borre el directorio que contiene todos
	  los ficheros temporales necesarios durante la compilación.
	  No solo consume valioso espacio en disco sino que puede dar
	  problemas cuando vaya a actualizar el port a una versión
          más reciente.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make clean</code></strong>
===&gt;  Cleaning for lsof-4.57
<code class="prompt">#</code></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Puede ahorrarse teclear dos pasos si para instalar un port
	    teclea <code class="command">make
	    install clean</code> en lugar de
	    <code class="command">make</code>,
	    <code class="command">make install</code> y
	    <code class="command">make clean</code>
	    como tres pasos separados.</p></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Algunas shells mantienen una caché de
	    órdenes disponibles en los directorios que aparecen
	    en la variable de entorno
	    <code class="envar">PATH</code> con el fin de acelerar las operaciones
	    de búsqueda de ejecutables de esas órdenes.
	    Si usa una de esas shells tendrá que utilizar la
	    orden <code class="command">rehash</code> tras instalar un port o
	    no podrá ejecutar aplicaciones recién
	    instaladas.  Esta orden funciona en shells como
	    <code class="command">tcsh</code>.  Utilice <code class="command">hash -r</code>
	    en shells <code class="command">sh</code>.  Para más
	    información consulte la documentación de
	    su shell.</p></div><p>Algunos DVD-ROM de terceros, como el FreeBSD Toolkit
	  de <a class="link" href="http://www.freebsdmall.com/" target="_top">FreeBSD
	  Mall</a> contienen distfiles. Puede usarlos con la Colección
	  de Ports.  Monte el DVD-ROM en <code class="filename">/cdrom</code>.  Si
	  utiliza un punto de montaje diferente asigne a
	  <code class="varname">CD_MOUNTPTS</code> el valor adecuado.  Los
	  distfiles se irán copiando automáticamente
	  a medida que vayan siendo necesarios.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Por favor, tenga en cuenta que la licencia de unos
	    cuantos ports muy concretos no permite su distribución
	    en CD-ROM.  Puede deberse a que es necesario rellenar un
	    formulario de registro antes de descargarlo, porque la
	    redistribución no esté permitida o por otra
	    razón.  Si quiere instalar un port que no está
	    en el CD-ROM tendrá que tener salida a Internet.</p></div><p>El sistema de ports utiliza <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">fetch</span>(1)</span></a> para descargar
	  ficheros; en este proceso intervienen varias variables de
	  entorno, como <code class="envar">FTP_PASSIVE_MODE</code>, <code class="envar">FTP_PROXY</code>,
	  y <code class="envar">FTP_PASSWORD</code>.  Si está detrás de
	  un cortafuegos tendrá que asignar valores a una o
	  más de estas variables, así como si necesita
	  utilizar un proxy FTP/HTTP.  Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">fetch</span>(3)</span></a>, donde
	  econtrará una lista detallada.</p><p>La opción <code class="command">make
	  fetch</code> se creó para
	  los usuarios que no disponen de conexión contínua.
	  Ejecute esta orden en el directorio raíz
	  (<code class="filename">/usr/ports</code>) y se descargarán todos
	  los ficheros necesarios.  Esta orden también funciona en
	  directorios situados más abajo, por ejemplo
	  <code class="filename">/usr/ports/net</code>.  Tenga en cuenta que si un
	  port depende de librerías u otros ports éstos
	  distfiles <span class="emphasis"><em>no</em></span> se descargarán, a
	  menos que reemplace <code class="buildtarget">fetch</code> por
	  <code class="buildtarget">fetch-recursive</code>, que se encargará
	  de descargar todas las dependencias de cada port.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si quiere compilar todos los ports de una
	  categoría y de una sola vez ejecutando la orden
	  <code class="command">make</code> en el directorio raíz, de muy
	  similar manera que lo que se acaba de ver con
	  <code class="command">makefetch</code>.  Tenga en
	  cuenta que esto es bastante peligroso porque algunos ports no
	  pueden coexistir.  También se dan casos de ports que
	  instalan instalan dos ficheros diferentes con el mismo
	  nombre.</p></div><p>En algunos casos (raros) el usuario tendrá que
	  descargar los tarball de un sitio que no es el que se guarda
	  en la variable de entorno <code class="varname">MASTER_SITES</code>
	  (el sitio desde el que se descargan todos los demás
	  normalmente).  Puede sobreescribir la opción
	  <code class="varname">MASTER_SITES</code> con la siguiente
	  orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/directory</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make MASTER_SITE_OVERRIDE= \
ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/ fetch</code></strong></pre><p>En este ejemplo vamos a darle a la opción
	  <code class="varname">MASTER_SITES</code> el valor <code class="systemitem">ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Algunos ports permiten (o incluso exigen) que se le
	  faciliten opciones de compilación para activar o desactivar
	  partes de la aplicación que no se necesiten, determinadas
	  opciones de seguridad, etc.  Casos típicos de esto son
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mozilla/pkg-descr">www/mozilla</a>, <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/gpgme/pkg-descr">security/gpgme</a>, and <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/sylpheed-claws/pkg-descr">mail/sylpheed-claws</a>.  Cuando debe
	  usted tomar este tipo de decisiones se le muestra un mensaje
	  con las opciones disponibles.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70348112"></a>4.5.2.1. Sobreescribir directorios por omisión de ports</h4></div></div></div><p>Algunas veces es útil (u obligatorio) utilizar un
	  directorio de trabajo o un «target» distinto al
	  que tenemos por omisión.  Las variables de entorno
	  <code class="varname">WRKDIRPREFIX</code> y <code class="varname">PREFIX</code>
	  pueden sobreescribirse según nuestra conveniencia.  Veamos
	  un ejemplo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make WRKDIRPREFIX=/usr/home/ejemplo/ports install</code></strong></pre><p>compilará el port en
	    <code class="filename">/usr/home/ejemplo/ports</code> y lo instalará
	    en <code class="filename">/usr/local</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make PREFIX=/usr/home/ejemplo/local install</code></strong></pre><p>lo compilará en <code class="filename">/usr/ports</code> y lo
	  instalará en
	  <code class="filename">/usr/home/ejemplo/local</code>.</p><p>Y por supuesto,</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make WRKDIRPREFIX=../ports PREFIX=../local install</code></strong></pre><p>combinará ambas; (ocupa demasiado para mostrarlo en una
	  página, pero la idea general queda clara).</p><p>Puede asignar valores a estas variables del mismo modo
	  que a cualquier otra de su entorno.  Consulte la
	  documentación de su shell para más
	  información.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70364496"></a>4.5.2.2. Uso de <code class="command">imake</code></h4></div></div></div><p>Algunos ports que usan <code class="command">imake</code>
	  (un componente del Sistema X Window) no funcionan correctamente
	  con <code class="varname">PREFIX</code> e  insistirán en instalarse
	  en <code class="filename">/usr/X11R6</code>.  Del mismo modo
	  algunos ports de Perl ignoran <code class="varname">PREFIX</code> y se
	  instalan en el árbol de Perl.  Hacer que estos ports
	  respeten <code class="varname">PREFIX</code> es difícil y a veces
	  imposible.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70367824"></a>4.5.2.3. Reconfigurar ports</h4></div></div></div><p>Al compilar ciertos ports se le presentará un
	  menú basado en ncurses en el cual podrá elegir
	  entre más o menos opciones de compilación.  No es
	  raro que los usuarios quieran volver a usar ese menú para
	  añadir, quitar o cambiar opciones una vez que el port ya
	  está compilado.  Hay bastantes formas de hacerlo.  Una
	  manera es entrar al directorio que contiene el port y teclear
	  <code class="command">make
	  config</code>, que hará que se
	  le presente de nuevo el menú con las opciones que estuvieran
	  seleccionadas previamente.  Otra opción es usar la orden
	  <code class="command">make showconfig</code>, que
	  le mostrará todas las opciones de configuración del
	  port.  Hay otra opción más, <code class="command">make
	  rmconfig</code>, que borrará
	  todas las opciones que estuvieran seleccionadas y le permitirá
	  por tanto empezar desde cero.  Todas estas opciones y muchas
	  más las encontrará descritas con gran detalle en
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ports&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">ports</span>(7)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-removing"></a>4.5.3. Cómo desinstalar ports</h3></div></div></div><a id="idp70371920" class="indexterm"></a><p>Ahora que sabe instalar ports probablemente quiera saber
        cómo eliminarlos; puede que haya instalado alguno y
        posteriormente se haya dado cuenta de que ha instalado el port
	incorrecto.  Vamos a desinstalar el port del ejemplo anterior
        (que, para todos aquellos que no estaban atentos,  era
	<code class="command">lsof</code>).  Igual que al instalar ports, lo primero
	que debemos hacer es ubicarnos en el directorio del port que
	deseamos eliminar del sistema, en nuestro caso
	<code class="filename">/usr/ports/sysutils/lsof</code>.   Los ports se
	desinstalan exactamente igual que los packages; esto se
	explica en la <a class="link" href="packages-using.html" title="4.4. Uso del sistema de packages">sección de packages</a>) utilizando
	la orden <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_delete&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_delete</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_delete lsof-4.57</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-upgrading"></a>4.5.4. Actualización de ports</h3></div></div></div><a id="idp70377296" class="indexterm"></a><p>Antes de nada necesita ver una lista de ports instalados de
        los cuales exista una nueva versión en la Colección
	de Ports.  Utilice <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_version&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_version</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_version -v</code></strong></pre><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-file-updating"></a>4.5.4.1. <code class="filename">/usr/ports/UPDATING</code></h4></div></div></div><p>Una vez actualizada la Colección de Ports (y
	  <span class="emphasis"><em>antes</em></span> de intentar actualizar ningún
	  port) debe consultar
	  <code class="filename">/usr/ports/UPDATING</code>.  Este fichero describe
	  todas las novedades, problemas que pueden encontrarse y pasos que
	  deben seguir los usuarios al actualizar un port; hay cambios de
	  formato, cambios de ubicación de ficheros de
	  configuración o incompatibilidades con versiones
	  anteriores.</p><p>Si <code class="filename">UPDATING</code> se contradice de cualquier modo
	  con lo que lea aquí tenga muy encuenta que lo que aparezca en
	  <code class="filename">UPDATING</code> tiene prioridad absoluta.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portupgrade"></a>4.5.4.2. Actualización de ports con portupgrade</h4></div></div></div><a id="idp70384848" class="indexterm"></a><p>La aplicación <span class="application">portupgrade</span>
        se diseñó para actualizar fácilmente los ports
	instalados en un sistema.  Puede instalarla desde el port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a>.  La
	instalación es como al de cualquier otro port, use la orden
	<code class="command">make install
	clean</code> command:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/ports-mgmt/portupgrade</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Compruebe la lista de ports instalados con <code class="command">pkgdb
	-F</code> y arregle todas las inconsistencias que aparezcan.  Le
	recomendamos que haga esta comprobación de forma regular y
	siempre antes de una actualización.</p><p>Si ejecuta <code class="command">portupgrade -a</code>
	<span class="application">portupgrade</span> intentará actualizar
	todos y cada uno de los ports instalados en su sistema.  Utilice el
	parámetro <code class="option">-i</code> si quiere que le pida
	confirmación antes de actualizar cada uno de los ports.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -ai</code></strong></pre><p>Si solamente quiere actualizar una sola aplicación (y no
        absolutamente todos los ports) utilice la orden <code class="command">portupgrade
	nombre-de-aplicación</code>.
	Añada el modificador <code class="option">-R</code> si quiere que
	<span class="application">portupgrade</span> actualice antes todos los
	ports de los que depende la aplicación en cuestión.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -R firefox</code></strong></pre><p>Si quiere usar packages en lugar de ports use el modificador
	<code class="option">-P</code> flag.  Con esta opción
	<span class="application">portupgrade</span> busca en los directorios
	locales que aparezcan en <code class="envar">PKG_PATH</code> o descarga los
	packages desde un sitio remoto si es que no los encuentra en
	local.  Si es imposible encontrar los packages ni en local ni en
	remoto <span class="application">portupgrade</span> utilizará
	ports.  Si no quiere usar ports pase lo que pase utilice el
	modificador <code class="option">-PP</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -PP gnome2</code></strong></pre><p>Si quiere solamente descargar los distfiles (o los packages,
	usando <code class="option">-P</code>) sin compilar ni instalar nada,
	use <code class="option">-F</code>.  Para más información
	consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portupgrade&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">portupgrade</span>(1)</span></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portmanager"></a>4.5.4.3. Actualización de ports con portmanager</h4></div></div></div><a id="idp70409040" class="indexterm"></a><p><span class="application">Portmanager</span> es otra aplicación
	  pensada para la actualización sencilla de ports instalados
	  en el sistema.  Puede encontrarla en
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portmanager/pkg-descr">ports-mgmt/portmanager</a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/ports-mgmt/portmanager</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Puede actualizar todos los ports que tenga instalados con
	  una sola orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmanager -u</code></strong></pre><p>Si usa el modificador <code class="option">-ui</code> se le pedirá
	  confirmación a cada paso que <span class="application">Portmanager</span>
	  vaya a dar.  <span class="application">Portmanager</span> también
	  puede usarse para instalar nuevos ports.  A diferencia del habitual
	  <code class="command">make install clean</code>
	  actualizará todos los ports que dependan antes de compilar e
	  instalar ese port que queramos instalar.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmanager x11/gnome2</code></strong></pre><p>Si aparecen problemas con las dependencias del port que quiere
	  instalar puede usar <span class="application">Portmanager</span> para
	  recompilar todos ello en el orden correcto.  Una vez que acabe el
	  port que estaba dando problemas será también
	  recompilado.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmanager graphics/gimp -f</code></strong></pre><p>Para más información consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portmanager&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">portmanager</span>(1)</span></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portmaster"></a>4.5.4.4. Actualización de ports con portmaster</h4></div></div></div><a id="idp70420688" class="indexterm"></a><p><span class="application">Portmaster</span> es otra aplicación
	  para actualizar ports.  <span class="application">Portmaster</span> se
	  diseñó para que utilizara las herramientas del sistema
	  «base» (es decir, no depende de otros ports) y utiliza
	  la información que se almacena en el directorio
	  <code class="filename">/var/db/pkg/</code> para determinar
	  qué port es el que hay que actualizar.  Puede encontrarlo en
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portmaster/pkg-descr">ports-mgmt/portmaster</a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/ports-mgmt/portmaster</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p><span class="application">Portmaster</span> agrupa los ports en cuatro
	  categorías:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>«Root ports» (no tienen dependencias, ningún port depende de ellos)</p></li><li class="listitem"><p>«Trunk ports» (no tienen dependencias, otros ports dependen de ellos)</p></li><li class="listitem"><p>«Branch ports» (tienen dependencias, otros ports dependen de ellos)</p></li><li class="listitem"><p>«Leaf ports» (tienen dependencias, ningún port depende de ellos)</p></li></ul></div><p>Puede ver una lista de los ports instalados y
	  buscar actualizaciones para ellos usando el modificador
	  <code class="option">-L</code> :</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster -L</code></strong>
===&gt;&gt;&gt; Root ports (No dependencies, not depended on)
===&gt;&gt;&gt; ispell-3.2.06_18
===&gt;&gt;&gt; screen-4.0.3
        ===&gt;&gt;&gt; New version available: screen-4.0.3_1
===&gt;&gt;&gt; tcpflow-0.21_1
===&gt;&gt;&gt; 7 root ports
...
===&gt;&gt;&gt; Branch ports (Have dependencies, are depended on)
===&gt;&gt;&gt; apache-2.2.3
        ===&gt;&gt;&gt; New version available: apache-2.2.8
...
===&gt;&gt;&gt; Leaf ports (Have dependencies, not depended on)
===&gt;&gt;&gt; automake-1.9.6_2
===&gt;&gt;&gt; bash-3.1.17
        ===&gt;&gt;&gt; New version available: bash-3.2.33
...
===&gt;&gt;&gt; 32 leaf ports

===&gt;&gt;&gt; 137 total installed ports
        ===&gt;&gt;&gt; 83 have new versions available
</pre><p>Con la siguiente orden puede actualizar todos los ports
	  del sistema:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster -a</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Por omisión <span class="application">Portmaster</span>
	  guardará una copia de seguridad (un package) de cada port
	  antes de borrarlo.  Si la instalación de la nueva versión
	  funciona <span class="application">Portmaster</span> borrará el package.
	  Si utiliza <code class="option">-b</code> le dirá a
	  <span class="application">Portmaster</span> que no borre automáticamente
	  el package.  Si usa el modificador <code class="option">-i</code> arrancará
	  <span class="application">Portmaster</span> en modo interactivo, lo que significa
	  que le pedirá confirmación antes de actualizar cada
	  port.</p></div><p>Si se encuentra con errores durante el proceso de
	  actualización puede utilizar el modificador
	  <code class="option">-f</code> para actualizar o recompilar todos
	  los ports:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster -af</code></strong></pre><p>También puede usar
	  <span class="application">Portmaster</span> para
	  instalar nuevos ports en el sistema, actualizando todas sus
	  dependencias antes de compilar e instalar el nuevo port:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster shells/bash</code></strong></pre><p>Por favor, consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portmaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portmaster</span>(8)</span></a> para más
	  información.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-disk-space"></a>4.5.5. Los ports y el espacio en disco</h3></div></div></div><a id="idp70448976" class="indexterm"></a><p>Usar la Colección de Ports consume mucho espacio de
        disco según pasa el tiempo.  Por culpa de la tendencia del
        árbol de ports a crecer sin parar le recomendamos
	que después de compilar e instalar sofware desde los ports
        recuerde limpiar los directorios temporales <code class="filename">work</code> mediante la orden
        <code class="command">make clean</code>.  Puede
	limpiar de un plumazo los directorios temporales de toda la
	Colección de Ports con la siguiente orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsclean -C</code></strong></pre><p>Rápidamente acumulará gran cantidad de viejas
        distribuciones de código en
	<code class="filename">distfiles</code>.  Puede borrarlos
	a mano, pero también puede usar la siguiente orden para
	borrar todos los distfiles que no tengan relación con
	ningún port:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsclean -D</code></strong></pre><p>También puede borrar todos los distfiles sin relación
      con ningún port instalado en el sistema:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsclean -DD</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="command">portsclean</code> forma parte de la
	  «suite» <span class="application">portupgrade</span>.</p></div><p>No olvide borrar los ports instalados una vez que deja de
         necesitarlos.  Hay una herramienta muy útil para ayudar
	 a automatizar esta tarea:
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/pkg_cutleaves/pkg-descr">ports-mgmt/pkg_cutleaves</a>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="packages-using.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="ports.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="ports-nextsteps.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">4.4. Uso del sistema de packages </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 4.6. Después de instalar un port</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Puede descargar éste y muchos otros documentos desde
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Si tiene dudas sobre FreeBSD consulte la
    <a href="http://www.FreeBSD.org/docs.html">documentación</a> antes de escribir a la lista
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Envíe sus preguntas sobre la documentación a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>