<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>29.16. IPv6</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manual de FreeBSD" /><link rel="up" href="advanced-networking.html" title="Capítulo 29. Networking avanzado" /><link rel="prev" href="network-plip.html" title="29.15. Línea IP paralela (PLIP)" /><link rel="next" href="network-atm.html" title="29.17. ATM en FreeBSD 5.X" /><link rel="copyright" href="legalnotice.html" title="Aviso Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">29.16. IPv6</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-plip.html">Anterior</a> </td><th width="60%" align="center">Capítulo 29. Networking avanzado</th><td width="20%" align="right"> <a accesskey="n" href="network-atm.html">Siguiente</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ipv6"></a>29.16. IPv6</h2></div><div><span class="authorgroup">Texto original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Aaron</span> <span class="surname">Kaplan</span></span>. </span></div><div><span class="authorgroup">Reestructurado y ampliado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>IPv6 (también conocido como IPng o <span class="quote">&#8220;<span class="quote">IP de nueva
      generación</span>&#8221;</span>) es la nueva versión del conocido
      protocolo de red IP, tambíen llamado IPv4.  Como sucede con el
      resto de los sistemas *BSD FreeBSD proporciona una implementación
      de referencia que desarrolla el proyecto japonés
      <acronym class="acronym">KAME</acronym>.  FreeBSD dispone de todo lo necesario para
      experimentar con el nuevo protocolo de red.  Esta sección se
      centra en conseguir configurar y ejecutar correctamente el protocolo
      IPv6.</p><p>Al comienzo de los años 90 la gente comenzó a
      preocuparse por el rápido consumo del espacio de direcciones
      de IPv4.  Dada la expansión actual de Internet existen dos
      preocupaciones principales:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Agotamiento de las direcciones disponibles.  Actualmente
          no se trata del principal problema debido al uso generalizado del
          del espacio de direccionamiento privado
          (<code class="systemitem">10.0.0.0/8</code>,
          <code class="systemitem">192.168.0.0/24</code>, etc.) junto con
	  <acronym class="acronym">NAT</acronym>.</p></li><li class="listitem"><p>El número de entradas de las tablas de rutas comenzaba a
          ser imposible de manejar.  Esto todavia es un problema
          prioritario.</p></li></ul></div><p>IPv6 trata de resolver estos problemas y algunos más de la
      siguiente forma:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>IPv6 posee un espacio de direccionamiento de 128 bits.  En otras
          palabras, en teoría existen
	  340,282,366,920,938,463,463,374,607,431,768,211,456
          direcciones disponibles.  Esto significa que existen
	  aproximadamente 6.67 * 10^27 direcciones IPv6 por metro cuadrado
	  disponibles para todo el planeta Tierra.</p></li><li class="listitem"><p>Los <span class="quote">&#8220;<span class="quote">routers</span>&#8221;</span> sólo almacenan direcciones de
	  red agregadas así que se reduce el número de entradas
          para cada tabla de rutas a un promedio de 8192.</p></li></ul></div><p>Existen además muchas otras caracterísiticas
      interesantes que IPv6 proporciona, como:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Autoconfiguración de direcciones (<a class="link" href="http://www.ietf.org/rfc/rfc2462.txt" target="_top">RFC2462</a>)</p></li><li class="listitem"><p>Direcciones anycast (<span class="quote">&#8220;<span class="quote">una-de-varias</span>&#8221;</span>)</p></li><li class="listitem"><p>Soporte de direcciones multicast predefinido</p></li><li class="listitem"><p>IPsec (Seguridad en IP)</p></li><li class="listitem"><p>Estructura de la cabecera simplificada</p></li><li class="listitem"><p>IP móvil</p></li><li class="listitem"><p>Mecanismos de traducción de IPv6 a IPv4 (y viceversa)</p></li></ul></div><p>Si quiere saber más sobre IPv6 le recomendamos que
      consulte:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Resumen de IPv6 en <a class="link" href="http://playground.sun.com/pub/ipng/html/ipng-main.html" target="_top">playground.sun.com</a></p></li><li class="listitem"><p><a class="link" href="http://www.kame.net" target="_top">KAME.net</a></p></li><li class="listitem"><p><a class="link" href="http://www.6bone.net" target="_top">6bone.net</a></p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84468304"></a>29.16.1. Conceptos básicos sobre las direcciones IPv6</h3></div></div></div><p>Existen varios tipos distintos de direcciones IPv6: Unicast,
        Anycast y Multicast.</p><p>Las direcciones unicast son direcciones bien conocidas.  Un
        paquete que se envía a una dirección unicast
        deberín llega a la interfaz identificada por dicha
        dirección.</p><p>Las direcciones anycast son sintácticamente indistinguibles
        de las direcciones unicast pero sirven para identificar a un
        <span class="emphasis"><em>conjunto</em></span> de interfaces.  Un paquete destinado a
        una dirección anycast llega a la interfaz
        <span class="quote">&#8220;<span class="quote">más cercana</span>&#8221;</span> (en términos de
        métrica de <span class="quote">&#8220;<span class="quote">routers</span>&#8221;</span>).  Las direcciones anycast
        sólo se pueden utilizar en <span class="quote">&#8220;<span class="quote">routers</span>&#8221;</span>.</p><p>Las direcciones multicast identifican un grupo de interfaces.
        Un paquete destinado a una dirección multicast llega a todos los
        los interfaces que se encuentran agrupados bajo dicha
        dirección.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Las direcciones IPv4 de tipo broadcast
          (normalmente <code class="systemitem">xxx.xxx.xxx.255</code>) se expresan en
          IPv6 mediante direcciones multicast.</p></div><div class="table"><a id="idp84473040"></a><div class="table-title">Tabla 29.2. Direcciones IPv6 reservadas</div><div class="table-contents"><table summary="Direcciones IPv6 reservadas" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Dirección IPv6</th><th>Longitud del Prefijo (Bits)</th><th>Descripción</th><th>Notas</th></tr></thead><tbody><tr><td><code class="systemitem">::</code></td><td>128 bits</td><td>sin especificar</td><td>como <code class="systemitem">0.0.0.0</code> en Pv4</td></tr><tr><td><code class="systemitem">::1</code></td><td>128 bits</td><td>dirección de bucle local (loopback)</td><td>como las <code class="systemitem">127.0.0.1</code> en
		IPv4</td></tr><tr><td><code class="systemitem">::00:xx:xx:xx:xx</code></td><td>96 bits</td><td>direcciónes IPv6 compatibles con IPv4</td><td>Los 32 bits más bajos contienen una
	        dirección IPv4.  También se denominan direcciones
                <span class="quote">&#8220;<span class="quote">empotradas.</span>&#8221;</span></td></tr><tr><td><code class="systemitem">::ff:xx:xx:xx:xx</code></td><td>96 bits</td><td>direcciones IPv6 mapeadas a IPv4</td><td>Los 32 bits más bajos contienen una
	        dirección IPv4.  Se usan para representar direcciones
                IPv4 mediante direcciones IPv6.</td></tr><tr><td><code class="systemitem">fe80::</code> -
		<code class="systemitem">feb::</code></td><td>10 bits</td><td>direcciones link-local</td><td>equivalentes a la dirección de loopback de
	        IPv4</td></tr><tr><td><code class="systemitem">fec0::</code> -
		<code class="systemitem">fef::</code></td><td>10 bits</td><td>direcciones site-local</td><td>Equivalentes al direccionamiento privado de IPv4</td></tr><tr><td><code class="systemitem">ff::</code></td><td>8 bits</td><td>multicast</td><td> </td></tr><tr><td><code class="systemitem">001</code> (base
		2)</td><td>3 bits</td><td>direcciones unicast globales</td><td>Todas las direcciones IPv6 globales se asignan a partir de
                este espacio. Los primeros tres bits siempre son
                <span class="quote">&#8220;<span class="quote">001</span>&#8221;</span>.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84500688"></a>29.16.2. Lectura de las direcciones IPv6</h3></div></div></div><p>La forma canónica que se utiliza para representar
        direcciones IPv6 es: <code class="systemitem">x:x:x:x:x:x:x:x</code>, donde cada
	<span class="quote">&#8220;<span class="quote">x</span>&#8221;</span> se considera un valor hexadecimal de 16 Bit.
        Por ejemplo
	<code class="systemitem">FEBC:A574:382B:23C1:AA49:4592:4EFE:9982</code></p><p>A menudo una dirección posee alguna subcadena de varios
        ceros consecutivos de forma que se puede abreviar dicha cadena
        (sólo una vez, para evitar ambigúedades) mediante
        <span class="quote">&#8220;<span class="quote">::</span>&#8221;</span>.  También se pueden omitir los ceros a la
        ceros a la izquierda dentro de un valor
        <span class="quote">&#8220;<span class="quote">x</span>&#8221;</span>. Por ejemplo
	<code class="systemitem">fe80::1</code> se corresponde con la forma
	canónica
	<code class="systemitem">fe80:0000:0000:0000:0000:0000:0000:0001</code>.</p><p>Una tercera forma de escribir direciones IPv6 es utilizando la
        ya tradicional notación decimal de IPv4 pero
        sólamente para los 32 bits más bajos de la
        dirección IPv6.  Por ejemplo
	<code class="systemitem">2002::10.0.0.1</code> se correspondería
	con la  representation hexadecimal canónica
	<code class="systemitem">2002:0000:0000:0000:0000:0000:0a00:0001</code>
	la cual es equivalente también a escribir <code class="systemitem">2002::a00:1</code>.</p><p>A estas alturas el lector debería ser capaz de comprender
            lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig</code></strong></pre><pre class="programlisting">rl0: flags=8943&lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500
         inet 10.0.0.10 netmask 0xffffff00 broadcast 10.0.0.255
         inet6 fe80::200:21ff:fe03:8e1%rl0 prefixlen 64 scopeid 0x1
         ether 00:00:21:03:08:e1
         media: Ethernet autoselect (100baseTX )
         status: active</pre><p><code class="systemitem">fe80::200:21ff:fe03:8e1%rl0</code>
	es una dirección link-local autoconfigurada.  Se construye a
        partir de la dirección MAC de la tarjeta de red.</p><p>Si quiere saber más sobre la estructura de las
            direcciones IPv6 puede consultar <a class="link" href="http://www.ietf.org/rfc/rfc3513.txt" target="_top">RFC3513</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84509648"></a>29.16.3. Establecimiento de conectividad</h3></div></div></div><p>Actualmente existen cuatro formas distintas de conectarse
        con otras máquinas y redes IPv6:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Unirse a la red experimental denominada 6bone</p></li><li class="listitem"><p>Obtener una red IPv6 a través de nuestro proveedor de
            acceso a Internet.  Consulte a su proveedor de servicios para
            para más información.</p></li><li class="listitem"><p>Encapsulación de IPv6 sobre IPv4 (<a class="link" href="http://www.ietf.org/rfc/rfc3068.txt" target="_top">RFC3068</a>)</p></li><li class="listitem"><p>Utilización del <span class="quote">&#8220;<span class="quote">port</span>&#8221;</span> <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/freenet6/pkg-descr">net/freenet6</a> si se dispone de una
            de una conexión de marcación por modem.</p></li></ul></div><p>Vamos a explicar cómo conectarse al 6bone ya que parece ser
        la forma más utilizada en la actualidad.</p><p>En primer lugar se recomienda consultar el sitio web de
        <a class="link" href="http://www.6bone.net/" target="_top">6bone</a> para saber
        cuál es la conexión del 6bone (físicamente)
	más próxima.  Se debe escribir a la persona responsable
        de ese nodo y con un poco de suerte dicha persona responderá con
        con un conjunto de instrucciones y pasos a seguir para establecer la
        la conexión con ellos y a través de ellos con el resto
        de los nodos IPv6 que forman parte del 6bone.  Normalmente esta
        conexión se establece usando túneles GRE (gif).</p><p>Veamos un ejemplo típico de configuración de un
        de un túnel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gif&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gif</span>(4)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0 create</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0</code></strong>
gif0: flags=8010&lt;POINTOPOINT,MULTICAST&gt; mtu 1280
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0 tunnel MI_DIRECCIÓn_IPV4  SU_DIRECCIÓn_IPV4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0 inet6 alias DIRECCIÓn_DE-SALIDA_IPv6_DEL_TÚNEL_ASIGNADO</code></strong></pre><p>Sustituya las palabras en mayúsculas por la
        información recibida del nodo 6bone al que nos queremos
        conectar.</p><p>La orden anterior establece el túnel.  Compruebe que el
        túnel funciona correctamente mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a>.
        Haga un <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping6&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping6</span>(8)</span></a> a <code class="systemitem">ff02::1%gif0</code>.  Deberíamos recibir
        recibir <span class="quote">&#8220;<span class="quote">dos</span>&#8221;</span> respuestas.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Para que el lector no se quede pensando en el significado
          significado de la dirección <code class="systemitem">ff02:1%gif0</code> le podemos decir que se trata de
          de una dirección IPv6 multicast de tipo link-local.
          <code class="literal">%gif0</code> no forma parte del protocolo IPv6 como tal
          sino que se trata de un detalle de implementación relacionado
          con las direcciones link-local y se añade para especificar la
          interfaz de salida que se debe utilizar para enviar los paquetes de
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping6&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping6</span>(8)</span></a>.  Como estamos haciendo ping a una dirección
          multicast a la que se unen todos los interfaces pertenecientes al
          mismo enlace debería responder al ping tanto nuestro propio
          interfaz como el interfaz remoto.</p></div><p>A continuación se configura la ruta por defecto hacia
        nuestro enlace 6bone; observe que es muy semejante a lo que hay que
        hacer en IPv4:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add -inet6 default -interface gif0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ping6 -n MI_UPLINK</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>traceroute6 www.jp.FreeBSD.org</code></strong>
(3ffe:505:2008:1:2a0:24ff:fe57:e561) from 3ffe:8060:100::40:2, 30 hops max, 12 byte packets
     1  atnet-meta6  14.147 ms  15.499 ms  24.319 ms
     2  6bone-gw2-ATNET-NT.ipv6.tilab.com  103.408 ms  95.072 ms *
     3  3ffe:1831:0:ffff::4  138.645 ms  134.437 ms  144.257 ms
     4  3ffe:1810:0:6:290:27ff:fe79:7677  282.975 ms  278.666 ms  292.811 ms
     5  3ffe:1800:0:ff00::4  400.131 ms  396.324 ms  394.769 ms
     6  3ffe:1800:0:3:290:27ff:fe14:cdee  394.712 ms  397.19 ms  394.102 ms</pre><p>Esta captura de pantalla variará dependiendo de la
        localización de la máquina.  Tras seguir estos pasos
	deberíamos poder alcanzar el sitio IPv6 de <a class="link" href="http://www.kame.net" target="_top">www.kame.net</a> y ver la tortuga
         bailarina, que es una imagen animada que sólo se muestra cuando
         se accede al servidor web utilizando el protocolo IPv6 (para
         ellos se encesita utilizar un navegador web que soporte IPv6,
         IPv6, por ejemplo <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mozilla/pkg-descr">www/mozilla</a> o
         <span class="application">Konqueror</span>, que forma parte de
	 <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/kdebase3/pkg-descr">x11/kdebase3</a>, o también
	 con <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/epiphany/pkg-descr">www/epiphany</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84544720"></a>29.16.4. DNS en el mundo IPv6</h3></div></div></div><p>Existen dos tipos de registros de DNS para IPv6.  No
        obstante el IETF ha declarado los registros A6 y CNAME como registros
        para uso experimental.  Los registros de tipo AAAA son los
        únicos estandar a día de hoy.</p><p>La utilización de registros de tipo AAAA es muy
        sencilla.  Se asocia el nombre de la máquina con la
            dirección IPv6 de la siguiente forma:</p><pre class="programlisting">NOMBREDEMIMÁQUINA AAAA   MIDIRECCIÓNIPv6</pre><p>De igual forma que en IPv4 se utilizan los registros de tipo
        A.  En caso de no poder administrar su propia zona de
        <acronym class="acronym">DNS</acronym> se puede pedir esta configuración  a su
        proveedor de servicios.  Las versiones actuales de
        <span class="application">bind</span> (versiones 8.3 y 9) y el
        <span class="quote">&#8220;<span class="quote">port</span>&#8221;</span> <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/dns/djbdns/pkg-descr">dns/djbdns</a>
        (con el parche de IPv6 correspondiente) soportan los registros de tipo
        AAAA.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-plip.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="advanced-networking.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="network-atm.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">29.15. Línea IP paralela (PLIP) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 29.17. ATM en FreeBSD 5.X</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Puede descargar éste y muchos otros documentos desde
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Si tiene dudas sobre FreeBSD consulte la
    <a href="http://www.FreeBSD.org/docs.html">documentación</a> antes de escribir a la lista
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Envíe sus preguntas sobre la documentación a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>