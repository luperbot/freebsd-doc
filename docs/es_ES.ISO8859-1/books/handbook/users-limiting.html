<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>13.7. Limitar a los usuarios</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manual de FreeBSD" /><link rel="up" href="users.html" title="Capítulo 13. Usuarios y administración básica de cuentas" /><link rel="prev" href="users-modifying.html" title="13.6. Modificación de cuentas" /><link rel="next" href="users-personalizing.html" title="13.8. Personalizar a los usuarios" /><link rel="copyright" href="legalnotice.html" title="Aviso Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">13.7. Limitar a los usuarios</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="users-modifying.html">Anterior</a> </td><th width="60%" align="center">Capítulo 13. Usuarios y administración básica de cuentas</th><td width="20%" align="right"> <a accesskey="n" href="users-personalizing.html">Siguiente</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-limiting"></a>13.7. Limitar a los usuarios</h2></div></div></div><a id="idp74792656" class="indexterm"></a><a id="idp74793168" class="indexterm"></a><p>En un sistema multiusuario es probable que no confíes en que
      el sistema no vaya a ser dañado por ningún usuario.</p><a id="idp74794832" class="indexterm"></a><a id="idp74795344" class="indexterm"></a><a id="idp74796496" class="indexterm"></a><p>Las cuotas de disco permiten al administrador decirle al
      sistema de ficheros qué cantidad de espacio de disco puede
      utilizar un usuario; además, ofrecen una manera rápida de
      comprobar el uso de disco de un usuario sin tener que calcularlo
      cada vez.  Las cuotas se estudian en el capítulo de quotas.</p><p>El resto de límites de recursos incluyen cantidad de CPU,
      memoria, y otros recursos que el usuario puede utilizar.</p><a id="idp74797776" class="indexterm"></a><p>Las clases de login se definen en
      <code class="filename">/etc/login.conf</code>.  La semántica precisa está
      fuera del alcance de esta sección, pero se describe con detalle en
      la página de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.  Es suficiente decir que
      cada usuario es asignado a una clase de login
      (<code class="literal">default</code> por defecto), y que cada clase de
      login tiene un conjunto de capacidades asociado.  Una capacidad
      de login es un par
      <code class="literal">nombre=valor</code>,
      donde <em class="replaceable"><code>nombre</code></em> es un identificador
      conocido y <em class="replaceable"><code>valor</code></em> una cadena de texto
      arbitraria que se procesa en función del nombre.  Establecer
      clases y capacidades de login es bastante sencillo y también se
      describe en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.</p><p>Los límites de recursos son diferentes de las capacidades de
      login en dos sentidos.  En primer lugar, para cada límite existe
      un límite blando (actual) y uno duro.  Un límite blando puede ser
      ajustado por el usuario o una aplicación, pero no puede ser más
      alto que el límite duro.  Éste último puede ser disminuido por el
      usuario pero nunca aumentado.  En segundo lugar, la mayoría de los
      límites de recursos aplican a un usuario concreto por proceso, no
      globalmente.  Nótese, no obstante, que estas diferencias vienen
      impuestas por cómo se tratan los límites específicamente, no por
      la implementación del marco de capacidades de login (es decir, en
      realidad no constituyen un caso especial de capacidades de
      login).</p><p>Sin más, a continuación veremos los límites de recursos más
      comúnmente usados (el resto, junto con el resto de capacidades de
      login, puede encontrarse en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>).</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">coredumpsize</code></span></dt><dd><a id="idp74809552" class="indexterm"></a><a id="idp74810064" class="indexterm"></a><p>El tamaño de un fichero core generado por un programa
            está, por razones obvias, subordinado a otros límites sobre
            uso de disco (p. ej., <code class="literal">filesize</code>, o cuotas
            de disco).  Aun y así, se usa frecuentemente como un método
            menos severo de controlar consumo de espacio de disco, dado
            que los usuarios no generan ficheros core por ellos mismos,
            y a menudo no los borran, activar este límite puede evitar
            que agoten el espacio de disco de que disponen si algún
            programa grande (p. ej., <span class="application">emacs</span>)
            deja de funcionar abruptamente.</p></dd><dt><span class="term"><code class="literal">cputime</code></span></dt><dd><a id="idp74813648" class="indexterm"></a><a id="idp74818384" class="indexterm"></a><p>Ésta es la máxima cantidad de tiempo de CPU que los
            procesos de un usuario pueden consumir.

            </p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Éste es un límite sobre el
                <span class="emphasis"><em>tiempo</em></span> de CPU consumido, no el
                porcentaje de uso de CPU que se muestra en algunos
                campos de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a>.  Un límite de ese
                tipo no es posible a día de hoy, y sería bastante
                inútil: un compilador &#8212;probablemente una tarea
                legítima&#8212; puede usar prácticamente el 100% de la
                CPU durante algún tiempo con facilidad.</p></div><p>
          </p></dd><dt><span class="term"><code class="literal">filesize</code></span></dt><dd><a id="idp74824144" class="indexterm"></a><a id="idp74824656" class="indexterm"></a><p>Éste es el tamaño máximo que puede llegar a tener un
            fichero del usuario.  A diferencia de las cuotas de disco, este
            límite se especifica para ficheros individuales, no para
            el conjunto de todos los archivos que posee.</p></dd><dt><span class="term"><code class="literal">maxproc</code></span></dt><dd><a id="idp74827600" class="indexterm"></a><a id="idp74828112" class="indexterm"></a><p>Éste es el máximo número de procesos que un usuario
            puede ejecutar a la vez, incluidos tanto los procesos en
            primer plano como los procesos en segundo plano.  Por
            razones obvias, este límite no puede ser mayor que el límite
            de sistema especificado por <code class="varname">kern.maxproc</code>
            <code class="command">sysctl</code>.  Obsérvese también que si
            asignamos un valor demasiado bajo a este límite podemos
            mermar la productividad de un usuario: frecuentemente es
            útil entrar múltiples veces en el sistema o ejecutar
            pipelines.  Algunas tareas, como compilar largos programas,
            lanzan múltiples procesos (p. ej., <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cc</span>(1)</span></a>,
            y demás preprocesadores intermedios).</p></dd><dt><span class="term"><code class="literal">memorylocked</code></span></dt><dd><a id="idp74833232" class="indexterm"></a><a id="idp74833744" class="indexterm"></a><p>Ésta es la máxima cantidad de memoria que un proceso
            puede haber solicitado tener bloqueada en memoria principal
            (p. ej., ver <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mlock&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">mlock</span>(2)</span></a>).  Algunos programas críticos
            para el sistema, como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a>, se quedan bloqueados en
            la memoria principal de manera que en caso de ser llevados a
            swap no contribuyan a la basura del sistema si hay algún
            problema.</p></dd><dt><span class="term"><code class="literal">memoryuse</code></span></dt><dd><a id="idp74838224" class="indexterm"></a><a id="idp74838736" class="indexterm"></a><p>Ésta es la mayor cantidad de memoria que un proceso
            puede consumir en todo momento.  Incluye tanto memoria
            normal como uso de swap.  No se trata de un límite para
            restringir el consumo de memoria en general, pero es un buen
            comienzo.</p></dd><dt><span class="term"><code class="literal">openfiles</code></span></dt><dd><a id="idp74841552" class="indexterm"></a><a id="idp74842064" class="indexterm"></a><p>Ésta es la máxima cantidad de archivos que un proceso
            puede tener abiertos.  En FreeBSD, los archivos se usan
            tambien para representar sockets y canales IPC; así, cuida
            de no poner este límite demasiado bajo.  A nivel de sistema,
            el límite para esto lo define
            <code class="varname">kern.maxfiles</code>
            <code class="command">sysctl</code>.</p></dd><dt><span class="term"><code class="literal">sbsize</code></span></dt><dd><a id="idp74853968" class="indexterm"></a><a id="idp74854480" class="indexterm"></a><p>Éste es el límite de cantidad de memoria de red, y por
            lo tanto mbufs, que un usuario puede consumir.  Se originó
            como respuesta a un viejo ataque DoS que creaba muchos
            sockets, pero puede ser usado en general para limitar las
            comunicaciones por red.</p></dd><dt><span class="term"><code class="literal">stacksize</code></span></dt><dd><a id="idp74857296" class="indexterm"></a><a id="idp74857808" class="indexterm"></a><p>Éste es el tamaño máximo que puede alcanzar la pila de
              un proceso.  Por sí solo no es suficiente para limitar la
              cantidad de memoria que puede usar un programa; en
              consecuencia, debería ser usado junto con otros
              límites.</p></dd></dl></div><p>Hay unas pocas cosas más a recordar cuando establecemos
      límites de recursos.  A continuación vienen algunas
      recomendaciones, sugerencias, y comentarios varios.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Los procesos que se ponen en marcha cuando arranca el
          sistema por <code class="filename">/etc/rc</code> están asignados a la
          clase de login <code class="literal">daemon</code>.</p></li><li class="listitem"><p>Aunque el <code class="filename">/etc/login.conf</code> que viene
          con el sistema tiene valores razonables para la mayoría de los
          límites, sólo tú, el administrador, puedes saber lo que es
          apropiado para tu sistema.</p></li><li class="listitem"><p>A los usuarios del X Window System (X11) probablemente se
          les debería conceder más recursos que al resto.  X11 de por sí
          consume muchos recursos, pero además contribuye a que los
          usuarios ejecuten más programas simultáneamente.</p></li><li class="listitem"><p>Recuerda que hay muchos límites que aplican a procesos
          individuales, no al usuario en general.  Por ejemplo, poner
          <code class="varname">openfiles</code> a 50 significa que cada uno de
          los procesos que ejecute un usuario puede abrir a lo máximo 50
          ficheros.  Así, la cantidad de ficheros que un usuario puede
          abrir es el valor de <code class="literal">openfiles</code> multiplicado
          por el valor de <code class="literal">maxproc</code>.  Esto también
          aplica al uso de memoria.</p></li></ul></div><p>Para más información acerca de límites de recursos y clases y
      capacidades de login en general, consulta las páginas de manual
      relevantes: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cap_mkdb&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cap_mkdb</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getrlimit&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">getrlimit</span>(2)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="users-modifying.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="users.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="users-personalizing.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">13.6. Modificación de cuentas </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 13.8. Personalizar a los usuarios</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Puede descargar éste y muchos otros documentos desde
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Si tiene dudas sobre FreeBSD consulte la
    <a href="http://www.FreeBSD.org/docs.html">documentación</a> antes de escribir a la lista
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Envíe sus preguntas sobre la documentación a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>