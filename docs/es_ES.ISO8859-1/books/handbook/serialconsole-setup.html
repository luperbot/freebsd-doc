<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>24.6. Configurando la consola serie</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manual de FreeBSD" /><link rel="up" href="serialcomms.html" title="Capítulo 24. Comunicaciones serie" /><link rel="prev" href="dialout.html" title="24.5. Servicio dial-out" /><link rel="next" href="ppp-and-slip.html" title="Capítulo 25. PPP y SLIP" /><link rel="copyright" href="legalnotice.html" title="Aviso Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">24.6. Configurando la consola serie</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dialout.html">Anterior</a> </td><th width="60%" align="center">Capítulo 24. Comunicaciones serie</th><td width="20%" align="right"> <a accesskey="n" href="ppp-and-slip.html">Siguiente</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="serialconsole-setup"></a>24.6. Configurando la consola serie</h2></div><div><span class="authorgroup">Contribuido por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Kazutaka</span> <span class="surname">YOKOTA</span></span>. </span></div><div><span class="authorgroup">Basado en un documento de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Paul</span></span>. </span></div></div></div><a id="idp79838416" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-intro"></a>24.6.1. Introducción</h3></div></div></div><p>FreeBSD tiene la habilidad de arrancar en un sistema
        con solo una terminal tonta como consola. Tal configuración
        podría ser útil para dos clases de gente:
        administradores de sistema que quieran instalar FreeBSD en máquinas
        que no tienen teclado o monitor conectado, y desarrolladores
        que quieran corregir errores en el kernel o controladores
        de dispositivos.</p><p>Como se describe en <a class="xref" href="boot.html" title="Capítulo 12. El proceso de arranque en FreeBSD">Capítulo 12, <em>El proceso de arranque en FreeBSD</em></a>, FreeBSD emplea un
        sistema de arranque de tres estados. Los primeros dos estados se
        encuentran en el código del bloque de arranque el cual es
        almacenado al principio del slice en el disco de arranque. El
        bloque de arranque entonces cargará y ejecutará el
        cargador de arranque (<code class="filename">/boot/loader</code>) como
        la tercera etapa de código.</p><p>Para poder configurar la consola serie debe configurar el
        código del bloque de arranque, el código del cargador
        de arranque y el kernel.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-howto-fast"></a>24.6.2. Configuracióm de consola serie, versión breve</h3></div></div></div><p>Esta sección asume que está usando la
        configuración por omisión y solo quiere una
        rápida revisión de la configuración de
        la consola serie.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Conecte el cable serie a COM1 y la terminal controladora.</p></li><li class="step"><p>Para ver todos los mensajes de arranque en la consola
            serie escriba el siguiente comando mientras está
            firmado como superusuario:</p><pre class="screen"><code class="prompt">#</code> echo 'console="comconsole"' &gt;&gt; /boot/loader.conf</pre></li><li class="step"><p>Edite <code class="filename">/etc/ttys</code> y cambie
            <code class="literal">dialup</code> a <code class="literal">vt100</code> para la entrada
            <code class="literal">ttyd0</code>. De otra manera una
            contraseña no será requerida para conectar por medio
            de la consola serie, resultando en un agujero de seguridad
            potencial.</p></li><li class="step"><p>Reinicie el sistema para ver si los cambios tuvieron efecto.</p></li></ol></div><p>Si una configuración diferente es requerida, una
        explicación mas detallada existe en
        <a class="xref" href="serialconsole-setup.html#serialconsole-howto" title="24.6.3. Configuración de la consola serie">Sección 24.6.3, &#8220;Configuración de la consola serie&#8221;</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-howto"></a>24.6.3. Configuración de la consola serie</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Prepare un cable serie.</p><a id="idp79855440" class="indexterm"></a><p>Necesitará ya sea un cable null-modem o un cable
            serie estándar y un adaptador null-modem. Vea
            <a class="xref" href="serial.html#serial-cables-ports" title="24.2.2. Cables y puertos">Sección 24.2.2, &#8220;Cables y puertos&#8221;</a> para una discusión
            sobre cables serie.</p></li><li class="step"><p>Desconecte su teclado.</p><p>La mayoría de sistemas PC buscan el teclado durante
            la autoprueba de encendido (POST) y generarán un error
            si el teclado no es detectado. Algunas máquinas se quejan
            fuerte sobre la falta de un teclado y no continuarán
            arrancando hasta que este contectado.</p><p>Si su computadora se queja con este error, pero arranca de
            todos modos, entonces no tiene que hacer nada especial. (Algunas
            máquinas con BIOS Phoenix instalado solo mostrarán
            <span class="errorname">Keyboard failed</span> y continuarán
            arrancando normalmente.)</p><p>Si su computadora se niega a arrancar sin un teclado
            conectado, entonces tendrá que configurar el BIOS para
            que ignore este error (si es posible). Consulte el manual de su
            tarjeta madre para los detalles de como hacer esto.</p><div xmlns="" class="tip"><h3 class="admontitle">Sugerencia: </h3><p xmlns="http://www.w3.org/1999/xhtml">Poniendo el teclado como <span class="quote">&#8220;<span class="quote">No instalado</span>&#8221;</span> en el
              BIOS <span class="emphasis"><em>no</em></span> significa que no podá usar
              su teclado. Todo lo que hace es decirle al BIOS que no busque
              un teclado al momento de encender, asi no se quejará si
              el teclado no se encuentra conectado. Puede dejar el teclado
              conectado incluso si esta bandera está puesta a
              <span class="quote">&#8220;<span class="quote">No instalado</span>&#8221;</span> y el teclado todaía funcionará.</p></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si su sistema tiene un ratón <span class="trademark">PS/2</span>® es muy probable que
              también tenga que desconectar su ratón junto con
              el teclado. Esto se debe a que los ratones <span class="trademark">PS/2</span>® comparten
              algún hardware con el teclado y dejandolo conectado puede
              ocasionar que el sistema piense que el teclado sigue conectado.
              Se dice que un sistema Gateway 2000 Pentium 90 MHz con un
              AMI BIOS se comporta de esta manera. En general, esto no
              representa un problema puesto que el ratón no es muy
              útil sin el teclado de todas maneras.</p></div></li><li class="step"><p>Conecte una terminal tonta a <code class="filename">COM1</code>
	    (<code class="filename">sio0</code>).</p><p>Si no tiene una terminal tonta, puede utilizar una PC/XT
            vieja con un programa de modem, o el puerto serie en otro
            equipo <span class="trademark">UNIX</span>®. Si no tiene un <code class="filename">COM1</code>
            (<code class="filename">sio0</code>), consiga uno. En este momento,
            no existe manera de seleccionar un puerto diferente a <code class="filename">COM1</code>
            para los bloques de arranque sin recompilar los bloques de
            arranque. Si ya está utilizando <code class="filename">COM1</code> para
            otro dispositivo, necesitará remover temporalmente ese
            dispositivo e instalar un nuevo bloque de arranque y kernel una
            vez que tenga a FreeBSD arriba y funcionando. (Se asume que
            <code class="filename">COM1</code> estará disponible en un
            fichero/computadora/servidor de terminales de todas maneras;
            si realmente necesita <code class="filename">COM1</code> para algo
            más (y no puede cambiar ese algo a
            <code class="filename">COM2</code> (<code class="filename">sio1</code>)),
            entonces probablemente no debería de molestarse con todo
            esto en primer lugar.)</p></li><li class="step"><p>Asegúrese de que el fichero de configuración de
            su kernel tenga las banderas apropiadas activadas para
            <code class="filename">COM1</code> (<code class="filename">sio0</code>).</p><p>Las banderas relevantes son:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">0x10</code></span></dt><dd><p>Habilita el soporte de consola para esta unidad.
                  Las otras banderas de consola son ignoradas a menos que
                  ésta está activada. Actualmente, al menos
                  una unidad puede tener soporte de consola; la primera (en
                  orden de configuración) con esta bandera activada
                  es preferida. Esta opción por si sola no hará
                  del puerto serie una consola. Active la siguiente bandera
                  o utilice la opción <code class="option">-h</code> descrita
                  abajo, junto con esta bandera.</p></dd><dt><span class="term"><code class="literal">0x20</code></span></dt><dd><p>Obliga a esta unidad a ser la consola (a menos que
                  exista otra consola de mayor prioridad), sin importar
                  la opción <code class="option">-h</code> discutida abajo. Esta
                  bandera reemplaza la opción <code class="literal">COMCONSOLE</code>
                  en las versiones 2.<em class="replaceable"><code>X</code></em> de FreeBSD.
                  La bandera <code class="literal">0x20</code> debe ser utilizada junto
                  con la bandera <code class="option">0x10</code>.</p></dd><dt><span class="term"><code class="literal">0x40</code></span></dt><dd><p>Reserva esta unidad (en conjunto con
                  <code class="literal">0x10</code>) y hace esta unidad
                  no disponible para acceso normal. No debería
                  activar esta bandera en la unidad de puerto serie
                  la cual desee utilizar como la consola serie.
                  El único uso de esta bandera es designar
                  la unidad para corección de errore remota
                  del kernel. Revise <span class="quote">&#8220;<span class="quote">El manual del
		  desarrollador</span>&#8221;</span> para mayor información sobre
		  corrección de errores remotamente.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En FreeBSD 4.0 o posterior la semántica de
                    la bandera <code class="literal">0x40</code> es ligeramente
		    diferente y existe otra bandera para especificar un puerto
		    serie para corrección de errores remotamente.
		    </p></div></dd></dl></div><p>Ejemplo:</p><pre class="programlisting">device sio0 at isa? port IO_COM1 flags 0x10 irq 4</pre><p>Vea la página de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> para más
	    detalles.</p><p>Si las banderas no fueron activadas, necesita correr
            UserConfig (en una consola diferente) o recompilar el
            kernel.</p></li><li class="step"><p>Cree <code class="filename">boot.config</code> en el directorio
	    raíz de la partición <code class="literal">a</code> del
	    disco de arranque.</p><p>Este fichero instruirá al código del bloque de
            arranque como le gustaría arrancar el sistema. Para activar
            la consola serie, necesita una o más de las
	    siguientes opciones&#8212; si quiere opciones múltiples
	    inclúyalas todas en la misma línea:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-h</code></span></dt><dd><p>Cambia entre consola interna y serie. Puede usar
		  esto para cambiar los dispositivos de consola. Por
		  ejemplo, si arranca desde la consola interna
		  (video), puede utilizar <code class="option">-h</code> para dirigir el
		  cargador de arranque y el kernel a que usen el puerto serie
		  como su dispositivo de consola. Alternativamente, si
		  arranca desde el puerto serie, puede utilizar
		  <code class="option">-h</code> para decirle al cargador de arranque y
		  al kernel que usen el video como consola.</p></dd><dt><span class="term"><code class="option">-D</code></span></dt><dd><p>Cambia entre configuración de consola
		  simple y dual.  En la configuración simple la
		  consola será ya sea la consola interna
		  (video) o el puerto serie, dependiendo del estado de la
		  opción <code class="option">-h</code> de arriba.  En la
		  configuración de consola dual, el video y el
                  puerto serie se convertirán en la consola al
		  mismo tiempo, sin importar del estado de la opción
		  <code class="option">-h</code>.  De todas maneras, note que la
		  configuración de consola dual toma efecto
		  solamente mientras el bloque de arranca está
                  corriendo. Una vez que el cargador de arranque toma el
		  control, la consola especificada por la
		  opción <code class="option">-h</code> se convierte en la
		  única consola.</p></dd><dt><span class="term"><code class="option">-P</code></span></dt><dd><p>Hace que el bloque de arranque busque el teclado.
                  Si no se encuentra un teclado, la opción
		  <code class="option">-D</code> y <code class="option">-h</code> son activadas
		  automátivamente.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Debido a problemas de espacio en la versión
		    actual del bloque de arranque, la opción
		    <code class="option">-P</code> es capaz de detectar unicamente
		    teclados extendidos. Teclados con menos de 101 teclas
		    (y carentes de teclas F11 y F12) no pueden ser
		    detectados. Algunos teclados en laptops puede que no
		    sean correctamente encontrados debido a esta
                    limitación. Si este es el caso con su sistema, debe
                    abandonar el uso de la opción <code class="option">-P</code>.
                    Desafortunádamente no hay una solución para
                    este problema.</p></div></dd></dl></div><p>Utilice ya sea la opción <code class="option">-P</code> para
            seleccionar la consola automáticamente, o la opción
            <code class="option">-h</code> para activar la consola serie.</p><p>Puede incluir otras opciones descritas en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot</span>(8)</span></a>
            también.</p><p>Las opciones, excepto por <code class="option">-P</code>, serán
            pasadas al cargador de arranque (<code class="filename">/boot/loader</code>).
            El cargador de arranque determinará si el video interno
            o el puerto serie debería convertirse en la consola
            examinando el estado de la opción <code class="option">-h</code>
            solamente. Esto significa que si especifica la opción
            <code class="option">-D</code> pero no la opción <code class="option">-h</code>
            en <code class="filename">/boot.config</code>, puede utilizar el puerto
            serie como consola solamente durante el bloque de arranque;
            el cargador de arranque usará el video interno como
            consola.</p></li><li class="step"><p>Arranque la máquina.</p><p>Cuando inicia su equipo FreeBSD, los bloques de arranque
            mostrarán los contenidos de <code class="filename">/boot.config</code> a
            la consola. Por ejemplo:</p><pre class="screen">/boot.config: -P
Keyboard: no</pre><p>La segunda línea aparece solamente si pone <code class="option">-P</code>
            en <code class="filename">/boot.config</code> e indica la presencia/ausencia
            del teclado. Estos mensajes van a la consola serie o a la interna,
            o a ambas, dependiendo de la opción en
            <code class="filename">/boot.config</code>.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Opciones</th><th>Mensaje va a</th></tr></thead><tbody><tr><td>ninguna</td><td>consola interna</td></tr><tr><td><code class="option">-h</code></td><td>consola serie</td></tr><tr><td><code class="option">-D</code></td><td>consola serie e interna</td></tr><tr><td><code class="option">-Dh</code></td><td>consola serie e interna</td></tr><tr><td><code class="option">-P</code>, teclado presente</td><td>consola interna</td></tr><tr><td><code class="option">-P</code>, teclado ausente</td><td>consola serie</td></tr></tbody></table></div><p>Despues de los mensajes de arriba, existirá una pausa
            pequeña antes que los bloques de arranque continuen cargando el
            cargador de arranque y antes de que cualquier mensaje posterior
            sea impreso en la consola. Bajo ciertas circunstancias, no necesita
            interrumpir los bloques de arranque, pero tal vez quiera hacerlo
            para asegurarse que las cosas están configuradas
            corréctamente.</p><p>Presione cualquier tecla, diferente a  <span class="keycode">Enter</span>,
            en la consola para interrumpir el proceso de arranque. Los bloques
            de arranque entonces esperarán una entrada para determinar
            como continuar. Debe ver algo como esto:</p><pre class="screen">&gt;&gt; FreeBSD/i386 BOOT
Default: 0:ad(0,a)/boot/loader
boot:</pre><p>Verifique que el mensaje de arriba aparece en la consola
            serie o en la interna o en ambas, de acuerdo a las opciones
            que puso en <code class="filename">/boot.config</code>. Si el mensaje
            aparece en la consola correcta, presione <span class="keycode">Enter</span>
            para continuar el proceso de arranque.</p><p>Si quiere usar la consola serie pero no ve el prompt en la
            terminal serie, algo está mal con su configuración.
            Mientras tanto, entre <code class="option">-h</code> y presione Enter/Return
            (si es posible) para decirle al bloque de arranque (y entonces al
            cargador de arranque y al kernel) que elija el puerto serie como
            consola. Una vez que el sistema arranque, regrese y revise que fué
            lo que estuvo mal.</p></li></ol></div><p>Despues que el cargador de arranque ha cargado y usted se encuentra
        en la tercera etapa del proceso de arranque todavía puede cambiar
        entre la consola interna y la consola serie activando las variables de
        entorno apropiadas en el cargador de arranque.
        Vea <a class="xref" href="serialconsole-setup.html#serialconsole-loader" title="24.6.6. Cambiando la consola desde el cargador de arranque">Sección 24.6.6, &#8220;Cambiando la consola desde el cargador de arranque&#8221;</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-summary"></a>24.6.4. Resumen</h3></div></div></div><p>aquí está el resumen de varias configuraciones
        discutidas en esta sección y la consola seleccionada
        eventualmente.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79940304"></a>24.6.4.1. Caso 1: Activó las banderas a 0x10 para
	  <code class="filename">sio0</code></h4></div></div></div><pre class="programlisting">device sio0 at isa? port IO_COM1 flags 0x10 irq 4</pre><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Opciones en /boot.config</th><th>Consola durante bloques de arranque</th><th>Consola durante cargador de arranque</th><th>Consola en kernel</th></tr></thead><tbody><tr><td>ninguna</td><td>interna</td><td>interna</td><td>interna</td></tr><tr><td><code class="option">-h</code></td><td>serie</td><td>serie</td><td>serie</td></tr><tr><td><code class="option">-D</code></td><td>serie e interna</td><td>interna</td><td>interna</td></tr><tr><td><code class="option">-Dh</code></td><td>serie e interna</td><td>serie</td><td>serie</td></tr><tr><td><code class="option">-P</code>, teclado presente</td><td>interna</td><td>interna</td><td>interna</td></tr><tr><td><code class="option">-P</code>, teclado ausente</td><td>serie e interna</td><td>serie</td><td>serie</td></tr></tbody></table></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79962320"></a>24.6.4.2. Caso 2: Activó las banderas a 0x30 para sio0</h4></div></div></div><pre class="programlisting">device sio0 at isa? port IO_COM1 flags 0x30 irq 4</pre><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Opciones en /boot.config</th><th>Consola durante bloques de arranque</th><th>Consola durante cargador de arranque</th><th>Consola en kernel</th></tr></thead><tbody><tr><td>ninguna</td><td>interna</td><td>interna</td><td>serie</td></tr><tr><td><code class="option">-h</code></td><td>serie</td><td>serie</td><td>serie</td></tr><tr><td><code class="option">-D</code></td><td>serie e interna</td><td>interna</td><td>serie</td></tr><tr><td><code class="option">-Dh</code></td><td>serie e interna</td><td>serie</td><td>serie</td></tr><tr><td><code class="option">-P</code>, teclado presente</td><td>interna</td><td>interna</td><td>serie</td></tr><tr><td><code class="option">-P</code>, teclado ausente</td><td>serie e interna</td><td>serie</td><td>serie</td></tr></tbody></table></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-tips"></a>24.6.5. Consejos para la consola serie</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79984976"></a>24.6.5.1. Configurando un velocidad de puerto serie más rápida</h4></div></div></div><p>Por omisión, la configuración del puerto
          serie es: 9600 baud, 8 bits, sin paridad, y 1 bit de parada.
          Si desea cambiar la velocidad, necesita recompilar al menos los
          bloques de arranque. Agregue la siguiente línea a
          <code class="filename">/etc/make.conf</code> y compile nuevos
          bloques de arranque:</p><pre class="programlisting">BOOT_COMCONSOLE_SPEED=19200</pre><p>Vea <a class="xref" href="serialconsole-setup.html#serialconsole-com2" title="24.6.5.2. Usando puertos serie para consola diferentes a sio0">Sección 24.6.5.2, &#8220;Usando puertos serie para consola diferentes a <code class="filename">sio0</code>&#8221;</a> para instrucciones
          detalladas sonre construir e instalar nuevos bloques de
          arranque.</p><p>Si la consola serie está configurada de alguna otra
          manera que arrancando con <code class="option">-h</code>, o si la consola
          serie usada por el kernel es diferente de la usada por los
          bloques de arranque, entonces también debe agregar la
          siguiente opción al fichero de configuración del kernel
          y compilar un nuevo kernel:</p><pre class="programlisting">options CONSPEED=19200</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-com2"></a>24.6.5.2. Usando puertos serie para consola diferentes a <code class="filename">sio0</code></h4></div></div></div><p>Utilizar un puerto serie diferente a <code class="filename">sio0</code>
          como consola requiere cierta recompilación. Si quiere usar
          otro puerto serie por la razón que sea, recompile los
          bloques de arranque, el cargador de arranque y el kernel como
          sigue.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Consiga las fuentes del kernel. (Vea <a class="xref" href="cutting-edge.html" title="Capítulo 23. Lo último de lo último">Capítulo 23, <em>Lo último de lo último</em></a>)</p></li><li class="step"><p>Edite <code class="filename">/etc/make.conf</code> y ponga
              <code class="literal">BOOT_COMCONSOLE_PORT</code> a la dirección
              del puerto que quiera usar (0x3F8, 0x2F8, 0x3E8 o 0x2E8).
              Solamente de <code class="filename">sio0</code> hasta
              <code class="filename">sio3</code> (<code class="filename">COM1</code>
              hasta <code class="filename">COM4</code>) pueden usarse; tarjetas
              multipuertos serie no funcionarán.
              No se necesita especificar interrupción.</p></li><li class="step"><p>Cree un fichero personalizado de configuración de kernel
              y agrege las banderas apropiadas para el puerto serie que
              desee utilizar. Por ejemplo, si desea hacer de <code class="filename">sio1</code>
              (<code class="filename">COM2</code>) la consola:</p><pre class="programlisting">device sio1 at isa? port IO_COM2 flags 0x10 irq 3</pre><p>o</p><pre class="programlisting">device sio1 at isa? port IO_COM2 flags 0x30 irq 3</pre><p>Las banderas de consola para otros puertos serie no deben
              activarse.</p></li><li class="step"><p>Recompile e instale los bloques de arranque y el cargador de arranque:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /sys/boot</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make clean</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong></pre></li><li class="step"><p>Reconstruya e instale el kernel.</p></li><li class="step"><p>Escriba los bloques de arranque al disco de
              arranque con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a> y arranque desde
              el nuevo kernel.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-ddb"></a>24.6.5.3. Accesando DDB Debugger desde la línea serie</h4></div></div></div><p>Si desea entrar al modo kernel debugger desde una consola
          serie (útil para diagnósticos remotos, !pero
          también peligroso si genera un BREAK ilegítimo
          en el puerto serie!) entonces debe compilar con las siguientes
          opciones:</p><pre class="programlisting">options BREAK_TO_DEBUGGER
options DDB</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80023120"></a>24.6.5.4. Obteniendo un prompt de login en la consola serie</h4></div></div></div><p>Aunque esto no es requerido, tal vez quiera obtener
           un prompt de <span class="emphasis"><em>login</em></span> a través de
           una línea serie, ahora que puede ver los mensajes
           de arranque y puede entrar a una sesión en modo
           kernel debug a través de la consola serie. Aquí
           está como hacerlo.</p><p>Abra el fichero <code class="filename">/etc/ttys</code> con un editor
          y localice las líneas:</p><pre class="programlisting">ttyd0 "/usr/libexec/getty std.9600" unknown off secure
ttyd1 "/usr/libexec/getty std.9600" unknown off secure
ttyd2 "/usr/libexec/getty std.9600" unknown off secure
ttyd3 "/usr/libexec/getty std.9600" unknown off secure</pre><p><code class="literal">ttyd0</code> hasta <code class="literal">ttyd3</code>
          corresponde a <code class="filename">COM1</code> hasta
          <code class="filename">COM4</code>. Cambie <code class="literal">off</code> a
          <code class="literal">on</code> para el puerto deseado. Si ha cambiado la
          velocidad del puerto serie, necesita cambiar
          <code class="literal">std.9600</code> para que concuerde con los
          parámetros actuales, ej.
          <code class="literal">std.19200</code>.</p><p>Tal vez tambien desee cambiar el tipo de terminal
          de <code class="literal">unknown</code> al tipo actual de su
          terminal serie.</p><p>Despues de editar el fichero, debe hacer un <code class="command">kill -HUP 1</code>
          para que este cambio surta efecto.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-loader"></a>24.6.6. Cambiando la consola desde el cargador de arranque</h3></div></div></div><p>Secciones anteriores describieron como instalar la consola
        serie manipulando el bloque de arranque. Esta sección muestra
        que puede especificar la consola especificando algunos
	comandos y variables de entorno en el cargador de arranque. Como el
	cargador de arranque es invocado en la tercera etapa del proceso de
	arranque, despues del bloque de arranque, las propiedades en el
	cargador de arranque sobreescribirán las del bloque de
	arranque.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80032080"></a>24.6.6.1. Instalando la consola serie</h4></div></div></div><p>Puede facilmente especificarle al cargador de arranque y al kernel
          que utilicen la consola serie escribiendo solamente una línea
          en <code class="filename">/boot/loader.rc</code>:</p><pre class="programlisting">set console="comconsole"</pre><p>Esto tendrá efecto sin importar las opciones del
          bloque de arranque discutidas en la sección previa.</p><p>Es mejor que ponga la línea de arriba como la primera
          línea en <code class="filename">/boot/loader.rc</code> para ver
          los mensajes de arranque en la consola serie tan pronto
          como sea posible.</p><p>De igual manera, puede especificar la consola interna como:</p><pre class="programlisting">set console="vidconsole"</pre><p>Si no activa la variable de entorno <code class="envar">console</code>,
          el cargador de arranque, y por consecuencia el kernel,
          utilizarán cualquier consola que esté indicada
          por la opción <code class="option">-h</code> en el bloque de
          arranque.</p><p>En versiones 3.2 o posteriores, puede especificar la consola
          en <code class="filename">/boot/loader.conf.local</code> o
          <code class="filename">/boot/loader.conf</code>, en lugar de
          <code class="filename">/boot/loader.rc</code>. En este método su
          <code class="filename">/boot/loader.rc</code> debe verse como:</p><pre class="programlisting">include /boot/loader.4th
start</pre><p>Entonces, puede crear <code class="filename">/boot/loader.conf.local</code> y
          ponerle la siguiente línea.</p><pre class="programlisting">console=comconsole</pre><p>o</p><pre class="programlisting">console=vidconsole</pre><p>Vea <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a> para mayor información.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Hasta el momento, el cargador de arranque no tiene una opción
            equivalente a la opción <code class="option">-P</code> del bloque
            de arranque, y no existe una manera de seleccionar automáticamente
            la consola interna y la consola serie basandose en la presencia
            del teclado.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80043728"></a>24.6.6.2. Utilizando un puerto serie para la consola diferente a <code class="filename">sio0</code></h4></div></div></div><p>Necesita recompilar el cargador de arranque para usar un puerto
          serie diferente a <code class="filename">sio0</code> para la consola
          serie. Siga el procedimiento descrito en <a class="xref" href="serialconsole-setup.html#serialconsole-com2" title="24.6.5.2. Usando puertos serie para consola diferentes a sio0">Sección 24.6.5.2, &#8220;Usando puertos serie para consola diferentes a <code class="filename">sio0</code>&#8221;</a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-caveats"></a>24.6.7. Advertencias</h3></div></div></div><p>La idea aquí es permitir a las personas configurar servidores
        dedicados que no requieran hardware de gráficos o teclados
        conectados. Desafortunádamente, mientras la mayoría de
        los sistemas le permitirán arrancar sin un teclado, existen
        bastantes que no le permitirán arrancar sin un adaptador de
        gráficos. Máquinas con BIOS AMI pueden configurarse para
        arrancar sin adaptadores de gráficos instalados cambiando
        simplemente la opción <span class="quote">&#8220;<span class="quote">graphics adapter</span>&#8221;</span> en la
        configuración del CMOS a <span class="quote">&#8220;<span class="quote">Not installed.</span>&#8221;</span></p><p>De cualquier manera, muchas máquinas no soportan esta opción
        y se negarán a arrancar si no tiene algún hardware de
        gráficos instalado en el sistema. Con estas máquinas,
        debe dejar algún tipo de tarjeta gráfica instalada,
        (incluso si solamente es una tarjeta mono barata) aunque no tendrá
        que conectarle un monitor. También puede tratar instalando un
        BIOS AMI.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dialout.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="serialcomms.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="ppp-and-slip.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">24.5. Servicio dial-out </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Capítulo 25. PPP y SLIP</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Puede descargar éste y muchos otros documentos desde
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Si tiene dudas sobre FreeBSD consulte la
    <a href="http://www.FreeBSD.org/docs.html">documentación</a> antes de escribir a la lista
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Envíe sus preguntas sobre la documentación a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>