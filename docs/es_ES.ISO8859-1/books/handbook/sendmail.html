<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>27.3. Configuración de sendmail</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manual de FreeBSD" /><link rel="up" href="mail.html" title="Capítulo 27. Correo Electrónico" /><link rel="prev" href="mail-using.html" title="27.2. Utilización del correo electrónico" /><link rel="next" href="mail-changingmta.html" title="27.4. Sustitución del Agente de Transferencia de Correo" /><link rel="copyright" href="legalnotice.html" title="Aviso Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">27.3. Configuración de <span class="application">sendmail</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mail-using.html">Anterior</a> </td><th width="60%" align="center">Capítulo 27. Correo Electrónico</th><td width="20%" align="right"> <a accesskey="n" href="mail-changingmta.html">Siguiente</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sendmail"></a>27.3. Configuración de <span class="application">sendmail</span></h2></div><div><span class="authorgroup">Contribuido por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Christopher</span> <span class="surname">Shumway</span></span>. </span></div></div></div><a id="idp81121104" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> es el agente de transporte de correo (MTA) por
      defecto de FreeBSD.
      La responsabilidad de <span class="application">sendmail</span> consiste en
      aceptar correo de agentes de correo de usuario (<acronym class="acronym">MUA</acronym>)
      y en entregar dichos correos al agente de transporte de correo
      apropiado, según se especifique en su archivo de
      configuración.  <span class="application">Sendmail</span>
      también acepta conexiones de red provinientes de otros agentes
      de transporte y puede depositar el correo recibido en carpetas locales o
      o entregarlo a otros programas.</p><p><span class="application">sendmail</span> utiliza los siguientes ficheros
      de configuración:</p><a id="idp81124944" class="indexterm"></a><a id="idp81130064" class="indexterm"></a><a id="idp81130960" class="indexterm"></a><a id="idp81131856" class="indexterm"></a><a id="idp81132752" class="indexterm"></a><a id="idp81133648" class="indexterm"></a><a id="idp81134544" class="indexterm"></a><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Filename</th><th>Function</th></tr></thead><tbody><tr><td>
	      <code class="filename">/etc/mail/access</code>
	    </td><td>Base de datos de accesos de <span class="application">sendmail</span></td></tr><tr><td>
	      <code class="filename">/etc/mail/aliases</code>
	    </td><td>Carpeta de alias</td></tr><tr><td>
	      <code class="filename">/etc/mail/local-host-names</code>
	    </td><td>Listados de máquinas para las que
              <span class="application">sendmail</span>acepta correo</td></tr><tr><td>
	      <code class="filename">/etc/mail/mailer.conf</code>
	    </td><td>Configuración del programa de correo</td></tr><tr><td>
	      <code class="filename">/etc/mail/mailertable</code>
	    </td><td>Tabla de entregas de correo</td></tr><tr><td>
	      <code class="filename">/etc/mail/sendmail.cf</code>
	    </td><td>Archivo de configuración principal de
              <span class="application">sendmail</span></td></tr><tr><td>
	      <code class="filename">/etc/mail/virtusertable</code>
	    </td><td>Usuarios virtuales y tablas de dominio</td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81154256"></a>27.3.1. <code class="filename">/etc/mail/access</code></h3></div></div></div><p>La base de datos de accesos define qué máquinas o
      direcciones IP  pueden acceder al servidor de correo y quée clase
      de acceso tienen permitido. Las máquinas se listan junto con
      las opciones <code class="option">OK</code>, <code class="option">REJECT</code>,
      <code class="option">RELAY</code> o simplemente junto con un mensaje de error
      que se entrega a la rutina de gestión de excepciones de
      <span class="application">sendmail</span>.
      Las máquinas que se listan junto con la opción
      <code class="option">OK</code>, que es el valor por defecto, tienen permiso
      para enviar correo a la máquina servidora siempre y cuando la
      dirección de correo de destino sea la máquina servidora
      de correo.  Las máquinas listadas junto con la opción
      <code class="option">REJECT</code> tienen el acceso prohibido a
      conexiones de correo electrónico con el servidor.  Por
      último las máquinas que poseen la etiqueta
      <code class="option">RELAY</code> para sus nombres tienen permitido enviar correo
      para cualquier destino a través de la máquina
      servidora de correo.</p><div class="example"><a id="idp81158224"></a><div class="example-title">Ejemplo 27.1. Configuración de la base de datos de acceso de <span class="application">sendmail</span>
        </div><div class="example-contents"><pre class="programlisting">cyberspammer.com                550 We don't accept mail from spammers
FUENTE.DE.CORREO.INDISCRIMINADO@ 550 We don't accept mail from spammers
otra.fuente.de.spam             REJECT
okay.cyberspammer.com           OK
128.32                          RELAY</pre></div></div><br class="example-break" /><p>En el ejemplo se pueden observar cinco entradas.  Los generadores de
     correo que coinciden con la parte izquierda de la tabla se ven afectados
     por la parte acción especificada en la parte derecha.
     Los primeros dos ejemplos emiten un código de error para la
     rutina de excepciones de <span class="application">sendmail</span>.
     El mensaje de error se transmite a la máquina remota cuando
     se recibe un correo que coincide con la parte izquierda de la tabla.
     La siguiente entrada rechaza correo de una determinada máquina
     de internet, <code class="systemitem">otra.fuente.de.spam</code>.
     La siguiente entrada acepta conexiones de correo de la máquina
     <code class="systemitem">okay.cyberspammer.com</code>, lo cual es
     más exacto que la línea de arriba de
     <code class="systemitem">cyberspammer.com</code>.  Las coincidencias
     más completas tienen precedencia sobre las menos
     específicas.  La última entrada permite actuar como
     <span class="quote">&#8220;<span class="quote">relay</span>&#8221;</span> o pasarela de correo electrónico para aquellas
     máquinas que posean una dirección IP que comience por
     <code class="systemitem">128.32</code>.  Éstas máquinas podrían
     enviar correo destinado a otros servidores de correo utilizando el
     nuestro.</p><p>Cuando se actualiza este fichero se debe ejecutar
     <code class="command">make</code> dentro de <code class="filename">/etc/mail/</code>
     para que se actualice la base de datos.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81168336"></a>27.3.2. <code class="filename">/etc/mail/aliases</code></h3></div></div></div><p>La base de datos de alias contiene una lista de directorios virtuales
      que son traducidas a otros usuarios, ficheros, programas o incluso otros
      alias.
      A continuación se muestran unos pocos ejemplos de la
      sintáxis que se puede utilizar
      dentro del fichero <code class="filename">/etc/mail/aliases</code>:</p><div class="example"><a id="idp81169872"></a><div class="example-title">Ejemplo 27.2. Mail Aliases</div><div class="example-contents"><pre class="programlisting">root: usuariolocal
ftp-bugs: joe,eric,paul
bit.bucket:  /dev/null
procmail: "|/usr/local/bin/procmail"</pre></div></div><br class="example-break" /><p>El formato del fichero es sencillo; el nombre de la carpeta de
        correo que aparece a la izquierda
        de los dos puntos se traduce al/los destinos de la derecha.
        El primer ejemplo simplemente traduce la carpeta
        <code class="systemitem">root</code>
        a la carpeta <code class="systemitem">usuariolocal</code>, la cual se examina de
        nuevo utilizando la misma base de datos de alias, y si no existe
        ninguna otra coincidencia el mensaje se entrega
        al usuario local <code class="systemitem">usuariolocal</code>.
        En el ejemplo siguiente se muestra una lista de correo.
        Todo correo que se envía a la carpeta <code class="systemitem">ftp-bugs</code> se traduce en un envío para
	tres carpetas locales diferentes: <code class="systemitem">joe</code>,
	<code class="systemitem">eric</code> y <code class="systemitem">paul</code>.
        Es importante señalar que
        también se pueden especificar carpetas remotas mediante la forma
        <code class="literal">usuario@ejemplo.com</code>.  El siguiente ejemplo muestra
        la escritura del correo a un fichero, en este caso en <code class="filename">
        /dev/null</code>.  El último ejemplo muestra el
        envió de correo a un programa; en este caso el mensaje de
        correo se escribe en la entrada estándar del programa
        <code class="filename">/usr/local/bin/procmail</code> utilizando una
        tubería (o <span class="quote">&#8220;<span class="quote"> pipe</span>&#8221;</span>)  de <span class="trademark">UNIX</span>®.</p><p>Cuando se actualiza este fichero se debe ejecutar
     <code class="command">make</code> dentro de <code class="filename">/etc/mail/</code>
     para actualizar la base de datos.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81182544"></a>27.3.3. <code class="filename">/etc/mail/local-host-names</code></h3></div></div></div><p>Este archivo es una lista de nombres de máquinas que
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> acepta como nombres locales.
      Se suele utilizar para escribir aquellos dominios o máquinas
      de los cuales <span class="application">sendmail</span> va a recibir correo.
      Por ejemplo, si nuestro servidor de correo
      va a aceptar correo proveniente del dominio <code class="systemitem">ejemplo.com</code> y también de la
      máquina <code class="systemitem">mail.ejemplo.com</code> nuestro
      <code class="filename">local-host-names</code>
      debería ser algo así:</p><pre class="programlisting">ejemplo.com
mail.ejemplo.com</pre><p>Cuando se actualiza este fichero <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> necesita ser
      reiniciado para que tenga en cuenta los cambios.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81188304"></a>27.3.4. <code class="filename">/etc/mail/sendmail.cf</code></h3></div></div></div><p>Archivo de configuración principal de <span class="application">
      sendmail</span>, controla el comportamiento global de
      <span class="application">sendmail</span>, incluyendo cualquier tarea
      desde la reescritura de direcciones de correo electrónico
      hasta la devolución de mensajes de error a los servidores
      de correo remotos.  Es evidente que con un abanico tan diverso el
      fichero de configuración
      acaba por ser bastante complejo y sus detalles quedan fuera de los
      objetivos de esta sección. Afortunadamente este
      fichero raras veces necesita ser modificado, al menos en lo que
      respecta a servidores de correo estándar.
     </p><p>El fichero de configuración principal de <span class="application">
      sendmail</span> se puede construir a partir de
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a>, es decir,  macros que se utilizan para definir
      características y comportamientos específicos
      de <span class="application">sendmail</span>.  Se ruega al lector consultar
      <code class="filename">/usr/src/contrib/sendmail/cf/README</code> para obtener
      más detalles acerca de las distintas macros que
      se pueden utilizar.</p><p>Cuando se realizan cambios a este fichero
      <span class="application">sendmail</span> debe ser reiniciado para que los
      cambios surtan efecto.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81193552"></a>27.3.5. <code class="filename">/etc/mail/virtusertable</code></h3></div></div></div><p>El fichero <code class="filename">virtusertable</code> asocia direcciones de
      correo pertenecientes a dominios y carpetas virtuales con carpetas
      reales. Estas carpetas pueden ser locales, remotas, alias
      definidos en <code class="filename">/etc/mail/aliases</code> o incluso ficheros.</p><div class="example"><a id="idp81195472"></a><div class="example-title">Ejemplo 27.3. Ejemplo de asociación de correo de dominio virtual</div><div class="example-contents"><pre class="programlisting">root@ejemplo.com                root
postmaster@ejemplo.com          postmaster@noc.ejemplo.net
@ejemplo.com                    joe</pre></div></div><br class="example-break" /><p>En el ejemplo superior se observa una asociación para el
      dominio <code class="systemitem">ejemplo.com</code>.
      Este fichero se procesa de arriba a abajo buscando la primera
      coincidencia. La primera entrada asocia <code class="literal">
      root@ejemplo.com</code> con la carpeta de correo local denominada
      <code class="systemitem">root</code>.  La siguiente entrada asocia
      <code class="literal">postmaster@ejemplo.com</code> con la carpeta
      <code class="systemitem">postmaster</code> situada en la máquina
      <code class="systemitem">noc.ejemplo.net</code>.  Por último, si
      no se ha encontrado ninguna coincidencia para
      <code class="systemitem">ejemplo.com</code> se le asigna la
      última asociación, la cual asocia cualquier mensaje
      de correo proveniente de <code class="systemitem">
      ejemplo.com</code> con la carpeta de
      correo local denominada <code class="systemitem">joe</code>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mail-using.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="mail.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="mail-changingmta.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">27.2. Utilización del correo electrónico </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 27.4. Sustitución del Agente de Transferencia de Correo</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Puede descargar éste y muchos otros documentos desde
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Si tiene dudas sobre FreeBSD consulte la
    <a href="http://www.FreeBSD.org/docs.html">documentación</a> antes de escribir a la lista
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Envíe sus preguntas sobre la documentación a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>