<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>3.12. Formatos binarios</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manual de FreeBSD" /><link rel="up" href="basics.html" title="Capítulo 3. Conceptos básicos de Unix" /><link rel="prev" href="basics-devices.html" title="3.11. Dispositivos y nodos de dispositivos" /><link rel="next" href="basics-more-information.html" title="3.13. Más información" /><link rel="copyright" href="legalnotice.html" title="Aviso Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.12. Formatos binarios</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="basics-devices.html">Anterior</a> </td><th width="60%" align="center">Capítulo 3. Conceptos básicos de Unix</th><td width="20%" align="right"> <a accesskey="n" href="basics-more-information.html">Siguiente</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="binary-formats"></a>3.12. Formatos binarios</h2></div></div></div><p>Para poder entender por qué FreeBSD utiliza el formato
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a> primero debe saber ciertas cosas sobre los tres
      formatos de ejecutables «dominantes» en <span class="trademark">UNIX</span>®:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a></p><p>El formato objeto de <span class="trademark">UNIX</span>® más antiguo y
          «clásico». Utiliza una cabecera
          corta y compacta con un número mágico al
          inicio que se usa frecuentemente para identificar el
          formato (vea <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a> para más información).
          Contiene tres segmentos cargados: .text, .data, y .bss
          además de una tabla de símbolos y una tabla
          de cadena («strings»).</p></li><li class="listitem"><p><acronym class="acronym">COFF</acronym></p><p>El formato objeto de SVR3.  La cabecera consiste
          en una tabla de sección, para que pueda tener más
          contenido además de las secciones .text, .data,
          y .bss.</p></li><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a></p><p>Es el sucesor de <acronym class="acronym">COFF</acronym>; dispone de
          secciones múltiples y valores posibles de 32-bits
          o 64-bits.  Una gran desventaja: <acronym class="acronym">ELF</acronym>
          fué también diseñado asumiendo que
          solamente existiría una ABI por cada arquitectura
          de sistema.  Esa suposición es en realidad bastante
          incorrecta y ni siquiera en el mundo comercial SYSV (el
          cual tiene al menos tres ABIs:  SVR4, Solaris y SCO) se
          puede dar por buena.</p><p>FreeBSD trata de solucionar este problema de alguna
          manera ofreciendo una herramienta para <span class="emphasis"><em>marcar</em></span>
          un ejecutable <acronym class="acronym">ELF</acronym> conocido con
          información acerca de la ABI con la que funciona.
          Si quiere más información consulte
          la página de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a>.
          </p></li></ul></div><p>FreeBSD viene del campo «clásico» y ha
      utilizado el formato <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a>, una tecnología usada
      y probada en muchas de muchas generaciones de versiones de
      BSD hasta el inicio de la rama 3.X.  Aunque era posible
      compilar y ejecutar binarios nativos <acronym class="acronym">ELF</acronym>
      (y kernels) en un sistema FreeBSD desde algún tiempo
      antes de esto, FreeBSD al principio se mantuvo
      «contra corriente» y no cambió a
      <acronym class="acronym">ELF</acronym> como formato por defecto.
      ?Por qué?  Bueno, cuando el mundo Linux
      efectuó su dolorosa transición a
      <acronym class="acronym">ELF</acronym> no fué tanto por huir del formato
      <code class="filename">a.out</code> como por su inflexible mecanismo de
      bibliotecas compartidas basado en tablas de saltos, que
      hacía igual de difícil la construcción de
      bibliotecas compartidas tanto para los desarrolladores como para
      los proveedores.
      Ya que las herramientas <acronym class="acronym">ELF</acronym>
      disponibles ofrecían una solución al problema de
      las bibliotecas compartidas y eran vistas por mucha gente como
      «la manera de avanzar», el costo
      de migración fué aceptado como necesario y se
      realizó la transición.  El mecanismo de
      bibliotecas compartidas de FreeBSD está diseñado de
      manera más cercana al estilo del sistema de
      bibliotecas compartidas de <span class="trademark">SunOS</span>&#8482; de Sun y, como tal, es
      muy sencillo de utilizar.</p><p>Entonces, ?por qué existen tantos formatos
      diferentes?</p><p>En un tiempo muy, muy lejano, existía hardware simple.
      Este hardware tan simple soportaba un sistema pequeño, simple.
      <code class="filename">a.out</code> era idóneo para el trabajo
      de representar binarios en este sistema tan simple (un PDP-11). A
      medida que la gente portaba <span class="trademark">UNIX</span>® desde este sistema simple,
      retuvieron el formato <code class="filename">a.out</code> debido a que
      era suficiente para los primeros portes de <span class="trademark">UNIX</span>® a arquitecturas
      como 68k de Motorola, VAXen, etc.</p><p>Entonces algún brillante ingeniero de hardware decidió
      que si podía forzar al software a hacer algunos trucos
      sucios podría sortear ciertos obstáculos del
      diseño y permitir al núcleo de su CPU correr más
      rápidamente.  Aunque estaba hecho para trabajar con este nuevo
      tipo de hardware (conocido entonces como <acronym class="acronym">RISC</acronym>),
      <code class="filename">a.out</code> no estaba bien adaptado para este
      hardware, así que varios formatos fueron desarrollados
      para obtener un rendimiento mayor de este hardware que el
      podía extraerse del limitado y simple formato
      <code class="filename">a.out</code>.
      Así fué cómo <acronym class="acronym">COFF</acronym>,
      <acronym class="acronym">ECOFF</acronym> y algunos otros formatos más
      extraños fueron inventados y sus limitaciones exploradas hasta
      que se fué llegando a la elección de
      <acronym class="acronym">ELF</acronym>.</p><p>Además, el tamaño de los programas estaba
      volviendose gigante y los discos (y la memoria física)
      eran relativamente pequeños,  así que el concepto
      de una biblioteca compartida nació.  El sistema
      VM también se volvió más sofisticado.
      A pesar de que todos estos avances se hicieron utilizando
      el formato <code class="filename">a.out</code>, su utilidad se iba reduciendo
      paulatinamente con cada nueva opción.  Además,
      la gente quería cargar cosas dinámicamente en el momento
      de ejecución, o descartar partes de su programa después de
      que el código de inicio se ejecutara para ahorrar memoria
      principal y espacio de swap.  Al volverse más sofisticados los
      lenguajes, la gente empezó a ver la necesidad de introducir
      código antes del inicio del programa de forma automática.
      Se hicieron muchos hacks al formato <code class="filename">a.out</code> para
      permitir que todas estas cosas sucedieran y lo cierto es que por un
      tiempo funcionaron.  Pero <code class="filename">a.out</code> no estaba
      para solucionar todos estos problemas sin incrementar la carga
      y complejidad del código.  Aunque <acronym class="acronym">ELF</acronym>
      resolvía muchos de estos problemas, en ese momento hubiera sido
      terrible dejar de lado un sistema que funcionaba,
      así que
      <acronym class="acronym">ELF</acronym> tuvo que esperar hasta que fué más
      doloroso permanecer con <code class="filename">a.out</code> que migrar a
      <acronym class="acronym">ELF</acronym>.</p><p>De todas maneras, con el paso del tiempo las herramientas
      de compilación de las que FreeBSD derivó
      las suyas (en especial el ensamblador y el cargador) evolucionaron
      en dos árboles paralelos.  El árbol FreeBSD
      FreeBSD añadió bibliotecas compartidas y corrigió
      algunos errores.  La gente de GNU (que fueron quienes escribieron
      estos programas) los reescribió y añadieron una forma
      más simple de disponer de compiladores cruzados
      («cross compilers»), el uso de diferentes formatos, etc.
      Aunque mucha gente quería compiladores cruzados con FreeBSD
      como «blanco» no hubo suerte, porque los fuentes que
      que FreeBSD tenía para <span class="application">as</span> y
      <span class="application">ld</span> no estaban listos para cumplir esa
      tarea.  La nueva cadena de herramientas
      GNU (<span class="application">binutils</span>) soporta compilación
      cruzada, <acronym class="acronym">ELF</acronym>, bibliotecas compartidas,
      extensiones C++, etc.  Además, muchos proveedores están
      liberando binarios <acronym class="acronym">ELF</acronym> y es algo muy bueno
      que FreeBSD los pueda ejecutar.</p><p><acronym class="acronym">ELF</acronym> es más expresivo que
      <code class="filename">a.out</code>
      y permite un sistema base más extensible.
      Las herramientas <acronym class="acronym">ELF</acronym> están mejor
      mantenidas y ofrecen soporte de compilación cruzada,
      muy importante para mucha gente.
      <acronym class="acronym">ELF</acronym> puede ser un poco más lento que
      <code class="filename">a.out</code>, pero tratar de medirlo puede ser
      difícil. También existen numerosos detalles
      que son diferentes entre los dos en cómo gestionan páginas,
      cómo gestionan código de inicio, etc. Ninguna
      es muy importante, pero las diferencias existen. Con el tiempo,
      el soporte para <code class="filename">a.out</code> será eliminado
      del kernel <code class="filename">GENERIC</code> y es muy posible que
      se elimine del kernel la posibilidad de ejecutar tales binarios
      una vez que la necesidad de usar programas
      <code class="filename">a.out</code> haya pasado.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="basics-devices.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="basics-more-information.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">3.11. Dispositivos y nodos de dispositivos </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 3.13. Más información</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Puede descargar éste y muchos otros documentos desde
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Si tiene dudas sobre FreeBSD consulte la
    <a href="http://www.FreeBSD.org/docs.html">documentación</a> antes de escribir a la lista
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Envíe sus preguntas sobre la documentación a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>