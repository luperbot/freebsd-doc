<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>18.3. Añadir discos</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manual de FreeBSD" /><link rel="up" href="disks.html" title="Capítulo 18. Almacenamiento" /><link rel="prev" href="disks-naming.html" title="18.2. Nombres de dispositivo" /><link rel="next" href="raid.html" title="18.4. RAID" /><link rel="copyright" href="legalnotice.html" title="Aviso Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">18.3. Añadir discos</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="disks-naming.html">Anterior</a> </td><th width="60%" align="center">Capítulo 18. Almacenamiento</th><td width="20%" align="right"> <a accesskey="n" href="raid.html">Siguiente</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-adding"></a>18.3. Añadir discos</h2></div><div><span class="authorgroup">Texto original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">David</span> <span class="surname">O'Brien</span></span>. </span></div></div></div><a id="idp77178192" class="indexterm"></a><p>Digamos que queremos añadir un nuevo disco SCSI a una
      máquina que solo tiene un disco.  Comience por apagar el
      sistema e instale el disco siguiendo las instrucciones del fabricante
      de la computadora, del disco y de la controladora.  Debido a la gran
      variedad de procedimientos posibles los detalles están más
      allá del alcance de este texto.</p><p>Entre como usuario <code class="systemitem">root</code>.  Una vez instalado el
      disco inspeccione <code class="filename">/var/run/dmesg.boot</code>
      para asegurarse de que el sistema encontró el nuevo disco.
      Continuando con nuestro ejemplo, el disco recién añadido
      será
      <code class="filename">da1</code> y queremos montarlo en
      <code class="filename">/1</code> (si está añadiendo un disco IDE,
      el nombre de dispositivo será
      <code class="filename">wd1</code> en sistemas anteriores a 4.0, y
      <code class="filename">ad1</code> en sistemas 4.X y 5.X).</p><a id="idp77190864" class="indexterm"></a><a id="idp77191376" class="indexterm"></a><a id="idp77191888" class="indexterm"></a><p>FreeBSD funciona en computadoras IBM-PC y compatibles, por lo tanto
      tendrá en cuenta las particiones de la BIOS del PC, que son
      diferentes del tipo de partición que se ha venido usando en
      BSD.  Un disco para PC puede contener hasta cuatro entradas de
      particiones BIOS.  Si el disco va a utilizarse íntegramente
      con FreeBSD puede usar el modo
      <span class="emphasis"><em>dedicado</em></span>.  Si no, FreeBSD tendrá que
      instalarse dentro de una las particiones BIOS.  En FreeBSD se llama
      slices (<span class="quote">&#8220;<span class="quote">porciones</span>&#8221;</span> o <span class="quote">&#8220;<span class="quote">rebanadas</span>&#8221;</span>) a las
      particiones de PC BIOS para no confundirlas con las particiones BSD.
      También puede utilizar slices en un disco dedicado a
      FreeBSD pero que se está usando en un sistema que también
      tiene otro sistema operativo instalado.
      Esta es una buena manera de evitar confundir la versión de
      <code class="command">fdisk</code> de otros sistemas operativos.</p><p>Desde el punto de vista de las slices el disco se
      añadirá como <code class="filename">/dev/da1s1e</code>.
      Se interpreta del siguiente modo: disco SCSI, unidad
      número 1 (segundo disco SCSI), slice 1 (partición 1
      de PC BIOS), y partición BSD <code class="filename">e</code>.
      Si es un disco dedicado, el disco se añadirá como
      <code class="filename">/dev/da1e</code>.</p><p>Debido al uso de enteros de 32-bits para almacenar el número
      de sectores, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> (llamado <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a> en
      FreeBSD 4.X) está limitado a 2^32-1 sectores por disco
      ó 2TB (en la mayoría de los casos).  El formato de
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> permite un sector de arranque de un máximo de
      más de 2^32-1 y no más de 2^32-1 de longitud, limitando
      las particiones a 2TB y los discos a 4TB (también en
      la mayoría de los casos).  El formato <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sunlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sunlabel</span>(8)</span></a> tiene
      una limitación de 2^32-1 sectores por partición y 8
      particiones en un espacio máximo de 16TB.  Si va a usar discos
      mayores puede usar particiones <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gpt&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gpt</span>(8)</span></a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77200592"></a>18.3.1. Uso de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a></h3></div></div></div><a id="idp77201872" class="indexterm"></a><a id="idp77203152" class="indexterm"></a><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Navegar en <span class="application">Sysinstall</span></strong></p><p>Puede utilizar <code class="command">sysinstall</code>
            (<code class="command">/stand/sysinstall</code> en versiones de FreeBSD
            anteriores a 5.2) para particionar y etiquetar un
            disco nuevo usando sus intuitivos menús.
            Entre como el usuario <code class="systemitem">root</code> o utilice
            <code class="command">su</code>.  Ejecute
            <code class="command">sysinstall</code> y entre al menú
            <code class="literal">Configure</code>.  Dentro de
            <code class="literal">FreeBSD Configuration Menu</code>, descienda
            y seleccione la opción <code class="literal">Fdisk</code>.</p></li><li class="step"><p class="title"><strong>Editor de particiones <span class="application">fdisk</span></strong></p><p>Una vez dentro de <span class="application">fdisk</span>,
            teclée <strong class="userinput"><code>A</code></strong> si quiere usar el
            disco entero con FreeBSD  Cuando se le pregunte
            <span class="quote">&#8220;<span class="quote">remain cooperative with any future
            possible operating systems</span>&#8221;</span>
            <a href="#ftn.idp77211216" class="footnote" id="idp77211216"><sup class="footnote">[10]</sup></a>, responda <code class="literal">YES</code>.
            Escriba los cambios al disco pulsando <strong class="userinput"><code>W</code></strong>.
            Salga del editor FDISK pulsando <strong class="userinput"><code>q</code></strong>.
            A continuación se le preguntará sobre el
            <span class="quote">&#8220;<span class="quote">Master Boot Record</span>&#8221;</span>.  Debido a que está
            añadiendo un nuevo disco a un sistema que ya está
            instalado, tendrá que seleccionar
            <code class="literal">None</code>.</p></li><li class="step"><p class="title"><strong>Editor de etiquetas de disco</strong></p><a id="idp77243344" class="indexterm"></a><p>A continuación, debe salir de
            <span class="application">sysinstall</span> e iniciarlo de nuevo.
            Siga las instrucciones arriba expuestas, pero esta vez elija la
            opción <code class="literal">Label</code>.  De este modo
            accederá al
            <code class="literal">editor de etiquetas de disco</code>.
            En él  creará las particiones BSD
            tradicionales.  Un disco puede tener hasta ocho particiones,
            etiquetadas desde la <code class="literal">a</code> a la
            <code class="literal">h</code>.
            Algunas de las etiquetas de las particiones tienen
            usos especiales.  La partición <code class="literal">a</code>
            se utiliza para la partición raíz
            (<code class="filename">/</code>), por lo tanto sólo su disco
            de sistema (esto es, el disco desde el cual arranca)
            tendrá una partición <code class="literal">a</code>.
            La partición <code class="literal">b</code> se usa como
            partición swap; puede tener más de una
            partición swap y puede alojarlas en más de un
            disco.  La partición <code class="literal">c</code>
            hace referencia al disco entero en modo dedicado, o a
            la slice de FreeBSD completa en modo slice.  Las demás
            particiones son para el resto de los usos típicos.</p><p>El editor de etiquetas de
            <span class="application">sysinstall</span>
            creará la partición <code class="literal">e</code> como
            partición <span class="quote">&#8220;<span class="quote">ni raíz, ni swap</span>&#8221;</span>.
            En el editor de etiquetas crée un solo sistema de
            ficheros tecleando <strong class="userinput"><code>C</code></strong>.  Cuando se
            le pregunte si debe etiquetarse como FS (sistema de ficheros) o
            swap, elija <code class="literal">FS</code> y teclée un punto de
            montaje (por ejemplo <code class="filename">/mnt</code>).  Al
            añadir un disco en modo
            <span class="quote">&#8220;<span class="quote">post-instalación</span>&#8221;</span>
            <span class="application">sysinstall</span> no creará
            automáticamente las entradas correspondientes en
            <code class="filename">/etc/fstab</code>, por lo que el punto de
            montaje que usted especifique no tiene importancia.</p><p>Ahora puede escribir la nueva etiqueta al disco y
            crear un sistema de ficheros en él tecleando
            <strong class="userinput"><code>W</code></strong>.  Ignore cualquier error que
            pudiera generar <span class="application">sysinstall</span> acerca
            de dificultades para montar la nueva partición.  Salga del
            editor de etiquetas y de <span class="application">sysinstall</span>.
            </p></li><li class="step"><p class="title"><strong>Terminar</strong></p><p>El último paso es editar
            <code class="filename">/etc/fstab</code>
            y añadir una entrada para su nuevo disco.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77256016"></a>18.3.2. Uso de utilidades de línea de comandos</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77256656"></a>18.3.2.1. Uso de slices</h4></div></div></div><p>Esta configuración le permitirá a su
          disco convivir sin sobresaltos con otro sistema operativo
          que pueda estar instalado en su sistema y no
          confundirá a las utilidades <code class="command">fdisk</code> de
          esos otros sistemas operativos.  Se recomienda utilizar este
          método para instalar discos nuevos.
          <span class="emphasis"><em>Utilice el modo dedicado sólamente si tiene
          un buen motivo para hacerlo</em></span>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 bs=1k count=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>fdisk -BI da1</code></strong> #Initialice el nuevo disco.
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -B -w -r da1s1 auto</code></strong> #Etiquételo.
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -e da1s1</code></strong> # Edite la etiqueta de disco que acaba de crear y añada particiones.
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da1s1e</code></strong> # Repita este paso por cada partición que crée.
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/da1s1e /1</code></strong> # Monte la partición o particiones.
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong> # Añada la/s entrada/s apropiadas en <code class="filename">/etc/fstab</code>.</pre><p>Si tiene un disco IDE, sustituya <code class="filename">ad</code>
          por <code class="filename">da</code>.  En sistemas anteriores a 4.X
          utilice <code class="filename">wd</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77271120"></a>18.3.2.2. Dedicado</h4></div></div></div><a id="idp77271888" class="indexterm"></a><p>Si no va a compartir el nuevo disco con otro sistema
          operativo puede utilizar el modo <code class="literal">dedicado</code>.
          Recuerde que este modo puede confundir a los sistemas operativos
          de Microsoft, aunque no podrán dañar por ello el
          disco o su contenido.  Tenga en cuenta que FreeBSD (de IBM)
          se <span class="quote">&#8220;<span class="quote">apropiará</span>&#8221;</span> de cualquier partición
          que encuentre y no entienda.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 bs=1k count=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -Brw da1 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -e da1</code></strong>				# crear partición `e'
<code class="prompt">#</code> <strong class="userinput"><code>newfs -d0 /dev/da1e</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong>				# agregar una entrada para /dev/da1e
<code class="prompt">#</code> <strong class="userinput"><code>mount /1</code></strong></pre><p>Una forma alternativa de hacerlo sería:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 count=2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel /dev/da1 | disklabel -BrR da1 /dev/stdin</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da1e</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong>					# añadir una entrada para /dev/da1e
<code class="prompt">#</code> <strong class="userinput"><code>mount /1</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">A partir de FreeBSD 5.1-RELEASE, la utilidad
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> reemplazó al antiguo programa
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>.  En <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> se han eliminado muchos
          parámetros y opciones obsoletas;
          en los ejemplos de arriba la opción <code class="option">-r</code>
          debe eliminarse si se usa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>.  Para más
          información diríjase al manual
          de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>.</p></div></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp77211216" class="footnote"><p><a href="#idp77211216" class="para"><sup class="para">[10] </sup></a>
            Mantener el disco accesible a sistemas operativos que pudieran
            necesitar acceder al mismo en algún momento.
            </p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="disks-naming.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="raid.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">18.2. Nombres de dispositivo </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 18.4. RAID</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Puede descargar éste y muchos otros documentos desde
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Si tiene dudas sobre FreeBSD consulte la
    <a href="http://www.FreeBSD.org/docs.html">documentación</a> antes de escribir a la lista
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Envíe sus preguntas sobre la documentación a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>