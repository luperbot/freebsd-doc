<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>13.6. Modificación de cuentas</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manual de FreeBSD" /><link rel="up" href="users.html" title="Capítulo 13. Usuarios y administración básica de cuentas" /><link rel="prev" href="users-user.html" title="13.5. Cuentas de usuario" /><link rel="next" href="users-limiting.html" title="13.7. Limitar a los usuarios" /><link rel="copyright" href="legalnotice.html" title="Aviso Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">13.6. Modificación de cuentas</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="users-user.html">Anterior</a> </td><th width="60%" align="center">Capítulo 13. Usuarios y administración básica de cuentas</th><td width="20%" align="right"> <a accesskey="n" href="users-limiting.html">Siguiente</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-modifying"></a>13.6. Modificación de cuentas</h2></div></div></div><a id="idp74709200" class="indexterm"></a><p>Existe una variedad de comandos disponible en el entorno Unix
      para modificar cuentas de usuario.  Los comandos más comunes se
      hallan resumidos a continuación, seguidos de ejemplos más
      detallados de su uso.</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Comando</th><th>Resumen</th></tr></thead><tbody><tr><td><code class="command">adduser</code></td><td>La aplicación de línea de comandos recomendada para
          añadir nuevos usuarios.</td></tr><tr><td><code class="command">rmuser</code></td><td>La aplicación de línea de comandos recomendada para
          eliminar usuarios.</td></tr><tr><td><code class="command">chpass</code></td><td>Una herramienta flexible para modificar la base de datos
          de usuarios.</td></tr><tr><td><code class="command">passwd</code></td><td>Una herramienta de línea de comandos simple para cambiar
          contraseñas de usuario.</td></tr><tr><td><code class="command">pw</code></td><td>Una herramienta potente y flexible para modificar
          cualquier aspecto de las cuentas de usuario.</td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-adduser"></a>13.6.1. adduser</h3></div></div></div><a id="idp74724944" class="indexterm"></a><a id="idp74726096" class="indexterm"></a><a id="idp74726992" class="indexterm"></a><a id="idp74728016" class="indexterm"></a><p><code class="command">adduser</code> es un programa simple para añadir
        usuarios.  Crea entradas en los archivos de sistema
        <code class="filename">passwd</code> y <code class="filename">group</code>.
        También crea un directorio home para el nuevo usuario, copia
        allí ficheros de configuración por defecto
        (<span class="quote">&#8220;<span class="quote">dotfiles</span>&#8221;</span>) de
        <code class="filename">/usr/share/skel</code>, y opcionalmente puede
        enviar al usuario un mensaje de bienvenida.</p><p>Para crear el fichero inicial de configuración usa
        <code class="command">adduser -s -config_create</code>.
        <a href="#ftn.idp74731472" class="footnote" id="idp74731472"><sup class="footnote">[7]</sup></a>
        A continuación configuramos valores por defecto para
        <span class="application">adduser</span> y creamos nuestra primera
        cuenta de usuario, dado que utilizar <code class="systemitem">root</code>
        para uso normal del sistema es pernicioso y peligroso.</p><div class="example"><a id="idp74734544"></a><div class="example-title">Ejemplo 13.1. Configuración de adduser</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>adduser -v</code></strong>
Use option ``-silent'' if you don't want to see all warnings and questions.
Check /etc/shells
Check /etc/master.passwd
Check /etc/group
Enter your default shell: csh date no sh tcsh zsh [sh]: <strong class="userinput"><code>zsh</code></strong>
Your default shell is: zsh -&gt; /usr/local/bin/zsh
Enter your default HOME partition: [/home]:
Copy dotfiles from: /usr/share/skel no [/usr/share/skel]:
Send message from file: /etc/adduser.message no
[/etc/adduser.message]: <strong class="userinput"><code>no</code></strong>
Do not send message
Use passwords (y/n) [y]: <strong class="userinput"><code>y</code></strong>

Write your changes to /etc/adduser.conf? (y/n) [n]: <strong class="userinput"><code>y</code></strong>

Ok, let's go.
Don't worry about mistakes. I will give you the chance later to correct any input.
Enter username [a-z0-9_-]: <strong class="userinput"><code>jru</code></strong>
Enter full name []: <strong class="userinput"><code>J. Random User</code></strong>
Enter shell csh date no sh tcsh zsh [zsh]:
Enter home directory (full path) [/home/jru]:
Uid [1001]:
Enter login class: default []:
Login group jru [jru]:
Login group is ``jru''. Invite jru into other groups: guest no
[no]: <strong class="userinput"><code>wheel</code></strong>
Enter password []:
Enter password again []:

Name:     jru
Password: ****
Fullname: J. Random User
Uid:      1001
Gid:      1001 (jru)
Class:
Groups:   jru wheel
HOME:     /home/jru
Shell:    /usr/local/bin/zsh
OK? (y/n) [y]: <strong class="userinput"><code>y</code></strong>
Added user ``jru''
Copy files from /usr/share/skel to /home/jru
Add another user? (y/n) [y]: <strong class="userinput"><code>n</code></strong>
Goodbye!
<code class="prompt">#</code></pre></div></div><br class="example-break" /><p>En resumen, cambiamos la shell por defecto a
        <span class="application">zsh</span> (una shell alternativa incluida
        en la colección de ports), y deshabilitamos el envío de un
        mensaje de bienvenida a nuevos usuarios.  Luego grabamos la
        configuración, creamos una cuenta para <code class="systemitem">jru</code>,
        y nos aseguramos de que <code class="systemitem">jru</code> esté en el
        grupo <code class="systemitem">wheel</code> (de modo que puede asumir el
        papel de <code class="systemitem">root</code> vía el comando
        <code class="command">su</code>).</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">La contraseña que escribes no se muestra, tampoco se
          muestran asteriscos.  Asegúrate de no entrar dos veces una
          contraseña equivocada.</p></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Usa <code class="command">adduser</code> sin argumentos en adelante,
          no necesitarás cambiar las opciones por defecto.  Si el
          programa te pide modificarlas sal y prueba con la opción
          <code class="option">-s</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-rmuser"></a>13.6.2. <span class="application">rmuser</span></h3></div></div></div><a id="idp74759248" class="indexterm"></a><a id="idp74759888" class="indexterm"></a><p>Puedes usar <code class="command">rmuser</code> para eliminar
        completamente del sistema a un usuario.
        <code class="command">rmuser</code> efectúa los siguientes pasos:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Elimina la entrada del usuario en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">crontab</span>(1)</span></a> (si
            tiene alguna).</p></li><li class="step"><p>Elimina las tareas <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=at&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">at</span>(1)</span></a> pertenecientes al
            usuario.</p></li><li class="step"><p>Mata todos los procesos pertenecientes al
            usuario.</p></li><li class="step"><p>Elimina al usuario del fichero local de contraseñas del
            sistema.</p></li><li class="step"><p>Borra el directorio home del usuario (si le
            pertenece).</p></li><li class="step"><p>Elimina los archivos de correo entrante del usuario de
            <code class="filename">/var/mail</code>.</p></li><li class="step"><p>Borra todos los ficheros del usuario de áreas en las que
            se guardan archivos temporales como
            <code class="filename">/tmp</code>.</p></li><li class="step"><p>Finalmente, elimina el nombre de usuario de todos
            aquellos grupos a los que pertenece en
            <code class="filename">/etc/group</code>.

            </p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si un grupo queda vacío y el nombre del grupo
                coincide con el del usuario, el grupo es eliminado; esto
                complementa la creación de grupos por usuario de
                <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a>.</p></div><p>
          </p></li></ol></div><p><code class="command">rmuser</code> no puede ser usado para eliminar
        cuentas de superusuario, dado que algo así es casi siempre señal
        de masiva destrucción.</p><p>Por defecto existe un modo interactivo que intenta asegurar
        que uno sabe lo que hace.</p><div class="example"><a id="idp74778448"></a><div class="example-title">Ejemplo 13.2. Eliminación interactiva de cuenta con rmuser</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rmuser jru</code></strong>
Matching password entry:
jru:*:1001:1001::0:0:J. Random User:/home/jru:/usr/local/bin/tcsh
Is this the entry you wish to remove? <strong class="userinput"><code>y</code></strong>
Remove user's home directory (/home/jru)? <strong class="userinput"><code>y</code></strong>
Updating password file, updating databases, done.
Updating group file: trusted (removing group jru -- personal group is empty) done.
Removing user's incoming mail file /var/mail/jru: done.
Removing files belonging to jru from /tmp: done.
Removing files belonging to jru from /var/tmp: done.
Removing files belonging to jru from /var/tmp/vi.recover: done.
<code class="prompt">#</code></pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-chpass"></a>13.6.3. <span class="application">chpass</span></h3></div></div></div><a id="idp74782288" class="indexterm"></a><p><code class="command">chpass</code> cambia información de los usuarios
        en base de datos como contraseñas, shells y datos
        personales.</p><p>Los administradores del sistema, como el superusuario, son
        los únicos que pueden modificar la información y contraseñas de
        otros usuarios con <code class="command">chpass</code>.</p><p>Cuando no le pasamos más opciones, salvo un nombre de
        usuario opcional, <code class="command">chpass</code> muestra un editor
        con información de usuario.  Cuando se sale del editor la base
        de datos de usuarios se actualiza con la nueva
        información.</p><div class="example"><a id="idp74785104"></a><div class="example-title">Ejemplo 13.3. chpass interactivo ejecutado por el superusuario</div><div class="example-contents"><pre class="screen">#Changing user database information for jru.
Login: jru
Password: *
Uid [#]: 1000
Gid [# or name]: 1000
Change [month day year]:

Expire [month day year]:
Class:
Home directory: /home/jru
Shell: /usr/local/bin/tcsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:</pre></div></div><br class="example-break" /><p>Un usuario normal puede modificar un pequeño subconjunto de
        esta información, y sólo para sí mismo.</p><div class="example"><a id="idp74794960"></a><div class="example-title">Ejemplo 13.4. chpass interactivo ejecutado por un usuario normal</div><div class="example-contents"><pre class="screen">#Changing user database information for jru.
Shell: /usr/local/bin/tcsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="command">chfn</code> y <code class="command">chsh</code> son
          enlaces a <code class="command">chpass</code>, como también lo son
          <code class="command">ypchpass</code>, <code class="command">ypchfn</code>, e
          <code class="command">ypchsh</code>.  El soporte para NIS es automático,
          por lo que no es necesario especificar el
          <code class="literal">yp</code> antes del comando.  Si esto te resulta
          algo confuso no te preocupes, NIS será tratado en el <a class="xref" href="advanced-networking.html" title="Capítulo 29. Networking avanzado">Capítulo 29, <em>Networking avanzado</em></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-passwd"></a>13.6.4. passwd</h3></div></div></div><a id="idp74800720" class="indexterm"></a><a id="idp74801360" class="indexterm"></a><p><code class="command">passwd</code> es el comando que se usa
        normalmente para cambiar tu propia contraseña como usuario o,
        como superusuario, la de otros usuarios.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Los usuarios han de introducir su contraseña original
          antes de cambiarla para prevenir que gente no autorizada pueda
          hacerlo cuando no se encuentren en la consola.</p></div><div class="example"><a id="idp74808144"></a><div class="example-title">Ejemplo 13.5. Cambio de tu contraseña</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>passwd</code></strong>
Changing local password for jru.
Old password:
New password:
Retype new password:
passwd: updating the database...
passwd: done</pre></div></div><br class="example-break" /><div class="example"><a id="idp74809936"></a><div class="example-title">Ejemplo 13.6. Cambio de la contraseña de otro usuario como superusuario</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>passwd jru</code></strong>
Changing local password for jru.
New password:
Retype new password:
passwd: updating the database...
passwd: done</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Como ocurre con <code class="command">chpass</code>,
          <code class="command">yppasswd</code> es un enlace a
          <code class="command">passwd</code>, de manera que NIS funciona con
          ambos comandos.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-pw"></a>13.6.5. <span class="application">pw</span></h3></div></div></div><a id="idp74819152" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> es una utilidad de línea de comandos para crear,
        eliminar, modificar, y mostrar usuarios y grupos.  Hace de
        interfaz a los archivos del sistema de usuarios y grupos.
        <code class="command">pw</code> tiene un conjunto de opciones de línea de
        comandos bastante potente que lo hacen adecuado para su uso en
        scripts de shell, aunque los nuevos usuarios puede que lo
        encuentren algo más complicado que el resto de comandos que
        presentamos aquí.</p></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp74731472" class="footnote"><p><a href="#idp74731472" class="para"><sup class="para">[7] </sup></a>La <code class="option">-s</code> hace que <code class="command">adduser</code>
            sea silencioso por defecto.  Más tarde usamos <code class="option">-v</code>
            cuando queremos cambiar valores por defecto.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="users-user.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="users.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="users-limiting.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">13.5. Cuentas de usuario </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 13.7. Limitar a los usuarios</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Puede descargar éste y muchos otros documentos desde
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Si tiene dudas sobre FreeBSD consulte la
    <a href="http://www.FreeBSD.org/docs.html">documentación</a> antes de escribir a la lista
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Envíe sus preguntas sobre la documentación a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>