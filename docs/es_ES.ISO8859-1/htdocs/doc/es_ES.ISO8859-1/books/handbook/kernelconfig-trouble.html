<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>8.7. Qué hacer si algo va mal</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manual de FreeBSD" /><link rel="up" href="kernelconfig.html" title="Capítulo 8. Configuración del kernel de FreeBSD" /><link rel="prev" href="kernelconfig-config.html" title="8.6. El fichero de configuración" /><link rel="next" href="printing.html" title="Capítulo 9. Imprimir" /><link rel="copyright" href="legalnotice.html" title="Aviso Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">8.7. Qué hacer si algo va mal</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="kernelconfig-config.html">Anterior</a> </td><th width="60%" align="center">Capítulo 8. Configuración del kernel de FreeBSD</th><td width="20%" align="right"> <a accesskey="n" href="printing.html">Siguiente</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-trouble"></a>8.7. Qué hacer si algo va mal</h2></div></div></div><p>Hay cuatro categorías de problemas que
      podemos encontrarnos en el proceso de compilación
      de un kernel personalizado:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Fallo de <code class="command">config</code>:</span></dt><dd><p>Si <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> falla cuando le pasa la
	    descripción de su kernel seguramente ha
	    cometido algún pequeño error.  Por
	    suerte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> les mostrará el
	    número de la línea que le está
	    dando problemas, así que no tendrá
	    mayor problema para localizarla. Veamos un
	    ejemplo:</p><pre class="screen">config: line 17: syntax error</pre><p>Si ve algo así asegúrese de que
	     ha tecleado la palabra clave que hay en esa
	     lína.  Compare la de su fichero de
	     configuración del kernel con la de
	    <code class="filename">GENERIC</code>.</p></dd><dt><span class="term">Fallo de <code class="command">make</code>:</span></dt><dd><p>If the <code class="command">make</code> command fails, it usually
	    signals an error in your kernel description which is not severe
	    enough for <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> to catch.  Again, look
	    over your configuration, and if you still cannot resolve the
	    problem, send mail to the <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">lista de correo para preguntas generales sobre FreeBSD</a> with your kernel
	    configuration, and it should be diagnosed quickly.</p></dd><dt><span class="term">El kernel no arranca:<a id="kernelconfig-noboot"></a></span></dt><dd><p>Si su nuevo kernel no arranca o no reconoce sus
	    dispositivos de hardware no desespere.  FreeBSD
	    dispone de excelentes mecanismos de
	    recuperación ante kernels defectuosos.  Elija
	    el kernel con el que quiere arrancar en el gestor
	    de arranque de FreeBSD.  Puede acceder al gestor de
	    arranque en el momento en el que aparece el
	    menú de arranque.  Elija la opción
	    número seis, <span class="quote">&#8220;<span class="quote">Escape to a loader
	    prompt</span>&#8221;</span> option, Escriba en el prompt
	    <code class="command">unload kernel</code>
            y después escriba
	    <code class="command">boot /boot/kernel.old/kernel</code>,
            o el nombre de cualquier otro kernel que tenga en el sistema
	    y del que sepa que puede fiarse.  Si va a reconfigurar un
	    kernel es una buenísima idea guardar un kernel
	    que sepa que funciona.</p><p>Tras arrancar con un kernel de fiar verifique el
	    fichero de configuración e intente de nuevo
	    una compilación.  El fichero
	    <code class="filename">/var/log/messages</code> es una fuente de
	    información muy valiosa puesto que registra, entre
	    otras cosas, todos los mensajes que deja el kernel cada
	    vez que hay un arranque satisfactorio.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>
	    le mostrará los mensajes que el kernel ha
	    generado durante el último arranque.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si tiene problemas compilando un kernel recuerde que
	      es de vital importancia que guarde una copia de un kernel
	      <code class="filename">GENERIC</code> u otro del que pueda fiarse
	      y que (esto es muy importante) tenga un nombre distinto de
	      <code class="filename">kernel.old</code> para evitar que el sistema
	      lo borre una vez que termine una nueva
	      compilación.  No puede confiar en su kernel
	      <code class="filename">kernel.old</code> porque al instalar un nuevo
	      kernel (que aún no sabe si será el que
	      funcione tal y como espera de él) el kernel
	      <code class="filename">kernel.old</code> se sobreescribe con el
	      kernel que instale.  Otra cosa importante es que copie
	      ese kernel de fiar a
	      <code class="filename">/boot/kernel</code>, o
	      ciertas herramientas como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> no
	      funcionarán.  Basta con que haga lo
	      siguiente:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mv /boot/kernel /boot/kernel.malo</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv /boot/kernel.bueno /boot/kernel</code></strong></pre></div></dd><dt><span class="term">El kernel funciona, pero <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> no:</span></dt><dd><p>Si el kernel que tiene instalado es de una
	    versión de FreeBSD y las utilidades del sistema
	    son de otra, por ejemplo un kernel -CURRENT en una
	    -RELEASE, hay muchas herramientas de monitorización
	    del sistema como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vmstat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vmstat</span>(8)</span></a> no
	    funcionarán.
	    Ejecute un <a class="link" href="makeworld.html" title="23.4. Uso de make world">make buildworld y un
	    make install world</a> con la misma versión de
	    código fuente con la que ha compilado su
	    kernel.  Esta es una de las razones por las que no
	    es una idea demasiado buena utilizar versiones
	    diferentes de kernel y de sistema operativo.</p></dd></dl></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="kernelconfig-config.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="kernelconfig.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="printing.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">8.6. El fichero de configuración </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Capítulo 9. Imprimir</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Puede descargar éste y muchos otros documentos desde
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Si tiene dudas sobre FreeBSD consulte la
    <a href="http://www.FreeBSD.org/docs.html">documentación</a> antes de escribir a la lista
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Envíe sus preguntas sobre la documentación a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>