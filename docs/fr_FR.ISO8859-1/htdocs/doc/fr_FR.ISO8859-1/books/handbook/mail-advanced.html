<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>28.6. Sujets avancés</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuel FreeBSD" /><link rel="up" href="mail.html" title="Chapitre 28. Courrier électronique" /><link rel="prev" href="mail-trouble.html" title="28.5. Dépannage" /><link rel="next" href="SMTP-UUCP.html" title="28.7. SMTP avec UUCP" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">28.6. Sujets avancés</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mail-trouble.html">Précédent</a> </td><th width="60%" align="center">Chapitre 28. Courrier électronique</th><td width="20%" align="right"> <a accesskey="n" href="SMTP-UUCP.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-advanced"></a>28.6. Sujets avancés</h2></div></div></div><p>LA fonction suivante couvre des sujets plus avancés
      comme la configuration du courrier électronique pour
      l'intégralité de votre domaine.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-config"></a>28.6.1. Basic Configuration</h3></div></div></div><a id="idp84222416" class="indexterm"></a><p>Sans aucune configuration, vous devrez être en
	mesure d'envoyer du courrier électronique à des machines
	extérieures à partir du moment où vous avez
	configuré <code class="filename">/etc/resolv.conf</code> ou que
	vous avez votre propre serveur de noms.  Si vous désirez
	que le courrier pour votre machine soit délivré au
	serveur de courrier (e.g., <span class="application">sendmail</span>) sur
	votre propre machine FreeBSD, il y a deux méthodes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Faites tourner votre propre serveur de noms et
	    possédez votre propre domaine.  Par exemple <code class="systemitem">FreeBSD.org</code></p></li><li class="listitem"><p>Faire délivrer le courrier directement sur votre
	    machine.  Cela est possible en délivrant directement le
	    courrier à la machine sur lequel pointe le DNS pour le
	    courrier qui vous est destiné.  Par exemple <code class="systemitem">exemple.FreeBSD.org</code>.</p></li></ul></div><a id="idp84231888" class="indexterm"></a><p>Indépendamment de la méthode que vous choisissez, afin
	d'avoir le courrier délivré directement
	à votre machine, elle doit avoir une adresse IP statique
	permanente (et non pas une adresse dynamique, comme avec la
	plupart des connexions PPP par modem).  Si vous êtes
	derrière un coupe-feu, il doit autoriser le trafic SMTP en
	votre direction.  Si vous voulez recevoir directement le
	courrier sur votre machine, vous devez être sûrs
	de l'une de ces deux choses:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Assurez-vous que l'enregistrement MX<a id="idp84233552" class="indexterm"></a> (le nombre le
	    plus bas) de votre DNS pointe sur l'adresse IP de votre
	    machine.</p></li><li class="listitem"><p>Assurez-vous qu'il n'y a pas d'entrée MX pour votre
	    machine dans votre DNS.</p></li></ul></div><p>Une des deux conditions précédentes vous
	permettra de recevoir directement le courrier pour votre
	machine.</p><p>Essayez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>hostname</code></strong>
exemple.FreeBSD.org
<code class="prompt">#</code> <strong class="userinput"><code>host exemple.FreeBSD.org</code></strong>
exemple.FreeBSD.org has address 204.216.27.XX</pre><p>Si c'est la réponse que vous obtenez, le courrier
	adressé à
	<code class="email">&lt;<a xmlns="" class="email" href="mailto:votreindentifiant@exemple.FreeBSD.org">votreindentifiant@exemple.FreeBSD.org</a>&gt;</code>
	arrivera sans problème (en supposant que
	<span class="application">sendmail</span> fonctionne correctement
	sur <code class="systemitem">exemple.FreeBSD.org</code>).</p><p>Si au lieu de cela vous obtenez quelque chose de similaire
	à ceci:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>host exemple.FreeBSD.org</code></strong>
exemple.FreeBSD.org has address 204.216.27.XX
exemple.FreeBSD.org mail is handled (pri=10) by hub.FreeBSD.org</pre><p>Tout le courrier adressé à votre machine
	(<code class="systemitem">exemple.FreeBSD.org</code>)
	arrivera sur <code class="systemitem">hub</code> adressé au même
	utilisateur au lieu d'être directement
	envoyé à votre machine.</p><p>L'information précédente est
	gérée par votre serveur DNS.  L'enregistrement du
	DNS qui contient l'information de routage de courrier est
	l'entrée MX (<span class="emphasis"><em>M</em></span>ail
	e<span class="emphasis"><em>X</em></span>change).  S'il n'y pas d'enregistrement MX,
	le courrier sera directement envoyé à la machine
	en utilisant son adresse IP.</p><p>Voici ce que fut à un moment donné
	l'entrée MX pour <code class="systemitem">freefall.FreeBSD.org</code>:</p><pre class="programlisting">freefall		MX	30	mail.crl.net
freefall		MX	40	agora.rdrop.com
freefall		MX	10	freefall.FreeBSD.org
freefall		MX	20	who.cdrom.com</pre><p>Comme vous pouvez le voir, <code class="systemitem">freefall</code>
	avait plusieurs entrées MX.  L'entrée MX dont le
	numéro est le plus bas est la machine qui reçoit
	directement le courrier si elle est disponible; si elle n'est
	pas accessible pour diverses raisons, les autres (parfois
	appelées &#8220;MX de secours&#8221;) acceptent
	temporairement les messages, et les transmettent à une
	machine de numéro plus faible quand elle devient
	disponible, et par la suite à la machine de numéro le
	plus bas.</p><p>Les sites MX alternatifs devraient avoir une connexion
	Internet séparée de la votre afin d'être
	les plus utiles.  Votre fournisseur d'accès ou tout autre
	site amical ne devrait pas avoir de problème pour vous
	fournir ce service.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-domain"></a>28.6.2. Courrier pour votre domaine</h3></div></div></div><p>Pour configurer un serveur de courrier vous devez faire
	en sorte que tout le courrier à destination des diverses
	stations de travail lui soit envoyé.  Concrètement,
	vous voulez &#8220;revendiquer&#8221; tout courrier pour
	n'importe quelle machine de votre domaine (dans ce cas
	<code class="systemitem">*.FreeBSD.org</code>) et le détourner
	vers votre serveur de courrier de sorte que vos utilisateurs
	puissent recevoir leur courrier sur le serveur de courrier
	principal.</p><a id="idp84248016" class="indexterm"></a><p>Pour rendre les choses plus aisées, un compte
	utilisateur avec le même <span class="emphasis"><em>nom
	d'utilisateur</em></span> devrait exister sur les deux
	machines.  Utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> pour ce
	faire.</p><p>Le serveur de courrier que vous utiliserez sera
	défini comme &#8220;mail exchanger&#8221; pour chaque
	station de travail du réseau.  Cela est fait dans votre
	configuration de DNS de cette manière:</p><pre class="programlisting">exemple.FreeBSD.org	A	204.216.27.XX		; Station de travail
			MX	10 hub.FreeBSD.org	; Serveur de courrier</pre><p>Cela redirigera le courrier pour votre station de travail
	au serveur de courrier quelque soit la machine sur laquelle
	pointe l'enregistrement A.  Le courrier est envoyé sur la
	machine MX.</p><p>Vous ne pouvez le faire vous-même que si vous
	gérez un serveur de noms.  Si ce n'est pas le cas, ou que vous
	ne pouvez avoir votre propre serveur DNS, parlez-en à
	votre fournisseur d'accès ou à celui qui fournit
	votre DNS.</p><p>Si vous faites de l'hébergement virtuel du courrier
	électronique, l'information suivante sera utile.  Pour cet
	exemple, nous supposerons que vous avez un client qui possède
	son propre domaine, dans notre cas <code class="systemitem">client1.org</code>, et vous voulez
	que tout le courrier pour <code class="systemitem">client1.org</code> arrive sur votre
	serveur de courrier, <code class="systemitem">mail.mamachine.com</code>.
	L'entrée dans votre DNS devrait ressembler à ceci:</p><pre class="programlisting">client1.org		MX	10	mail.mamachine.com</pre><p>Vous n'avez <span class="emphasis"><em>pas</em></span> besoin d'un
	enregistrement A pour <code class="systemitem">client1.org</code> si vous ne voulez
	gérer que le courrier pour ce domaine.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Soyez conscient que &#8220;pinger&#8221;
	  <code class="systemitem">client1.org</code> ne
	  fonctionnera pas à moins qu'un enregistrement A existe pour
	  cette machine.</p></div><p>La dernière chose que vous devez faire est d'indiquer à
	<span class="application">sendmail</span> sur le serveur de courrier
	quels sont les domaines et/ou machines pour lesquels il
	devrait accepter du courrier.  Il y a peu de façons
	différentes de le faire.  L'une des deux méthodes
	suivantes devrait fonctionner:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Ajoutez les machines à votre fichier
	    <code class="filename">/etc/mail/local-host-names</code> si vous
	    utilisez la fonction <code class="literal">FEATURE(use_cw_file)</code>.
	    Si vous utilisez une version de
	    <span class="application">sendmail</span> antérieure à
	    la version 8.10, le fichier sera
	    <code class="filename">/etc/sendmail.cw</code>.</p></li><li class="listitem"><p>Ajoutez une ligne <code class="literal">Cwyour.host.com</code>
	    à votre fichier
	    <code class="filename">/etc/sendmail.cf</code> ou
	    <code class="filename">/etc/mail/sendmail.cf</code> si vous utilisez
	    <span class="application">sendmail</span> 8.10 ou supérieur.</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mail-trouble.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="mail.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="SMTP-UUCP.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">28.5. Dépannage </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 28.7. SMTP avec UUCP</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>