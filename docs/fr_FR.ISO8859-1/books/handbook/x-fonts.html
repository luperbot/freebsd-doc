<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>6.5. Utilisation des polices de caractères sous X11</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuel FreeBSD" /><link rel="up" href="x11.html" title="Chapitre 6. Le système X Window" /><link rel="prev" href="x-config.html" title="6.4. Configuration d'X11" /><link rel="next" href="x-xdm.html" title="6.6. Le gestionnaire de procédures de connexions graphiques - &#8220;X Display Manager&#8221;" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.5. Utilisation des polices de caractères sous X11</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="x-config.html">Précédent</a> </td><th width="60%" align="center">Chapitre 6. Le système X Window</th><td width="20%" align="right"> <a accesskey="n" href="x-xdm.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-fonts"></a>6.5. Utilisation des polices de caractères sous X11</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="type1"></a>6.5.1. Polices de caractères Type1</h3></div></div></div><p>Les polices de caractères livrées par
      défaut avec X11 sont loin
      d'être idéales pour des applications de type publication.
      Les grandes polices utilisées pour les présentations
      présentent un aspect en escalier et peu professionnel, et
      les petites polices sous <span class="application"><span class="trademark">Netscape</span>®</span> sont
      presque complètement
      illisibles.  Cependant, il existe de nombreuses polices
      Type1 (<span class="trademark">PostScript</span>®) gratuites, de hautes qualités qui peuvent
      être aisément utilisées avec
      X11.  Par exemple, la collection de polices de caractères
      URW  (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/urwfonts/pkg-descr">x11-fonts/urwfonts</a>)
      comprend une version haute qualité des polices de
      caractères standards type1 (<span class="trademark">Times Roman</span>®, <span class="trademark">Helvetica</span>®, <span class="trademark">Palatino</span>®
      et autres).  La collection Freefonts (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/freefonts/pkg-descr">x11-fonts/freefonts</a>) comprend beaucoup
      plus de polices de caractères, mais la plupart d'entre elles sont
      destinées à être utilisées avec des logiciels
      graphiques comme <span class="application">The Gimp</span>, et ne sont pas
      suffisamment complètes pour servir de polices
      de caractères d'affichage.  De plus
      X11 peut être configuré
      pour utiliser les polices de caractères <span class="trademark">TrueType</span>® avec un minimum
      d'effort.  Pour plus de détails à ce sujet,
      consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=X&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">X</span>(7)</span></a> ou la <a class="link" href="x-fonts.html#truetype" title="6.5.2. Polices de caractères TrueType®">section sur les polices
      de caractères <span class="trademark">TrueType</span>®</a>.</p><p>Pour installer les collections de polices de caractères
      Type1 précédentes à partir du catalogue
      des logiciels portés, lancez les commandes suivantes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11-fonts/urwfonts</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Et de même pour la collection Freefont ou d'autres.  Pour
      que le serveur X détecte ces polices, ajoutez une
      ligne appropriée au fichier de configuration du serveur X
      (<code class="filename">/etc/X11/xorg.conf</code>),
      du type:</p><pre class="programlisting">FontPath "/usr/local/lib/X11/fonts/URW/"</pre><p>Autre possibilité, en ligne de commande dans une session X
	lancez:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xset fp+ /usr/local/lib/X11/fonts/URW</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>Cela fonctionnera mais les effets seront perdus quand la
	session X sera fermée, à moins de l'ajouter dans le
	fichier de
	démarrage (<code class="filename">~/.xinitrc</code> pour une session
	<code class="command">startx</code> classique, ou dans
	<code class="filename">~/.xsession</code> quand on s'attache au système
	par l'intermédiaire d'un gestionnaire de session graphique comme
	<span class="application">XDM</span>).  Une troisième méthode
	est d'utiliser le nouveau fichier <code class="filename">/usr/local/etc/fonts/local.conf</code>:
	voir la section sur l'<a class="link" href="x-fonts.html#antialias" title="6.5.3. Polices de caractères anticrénelage">anticrénelage</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="truetype"></a>6.5.2. Polices de caractères <span class="trademark">TrueType</span>®</h3></div></div></div><a id="idp71391696" class="indexterm"></a><a id="idp71392208" class="indexterm"></a><p><span class="application">Xorg</span> dispose d'un support
      intégré pour le rendu des polices <span class="trademark">TrueType</span>®.
      Il y a deux différents modules qui peuvent activer cette
      fonctionnalité.  Le module freetype est
      utilisé dans cet exemple parce qu'il est plus compatible avec les
      autres moteurs de rendu des polices de caractères.  Pour activer
      le module freetype ajoutez juste la ligne suivante dans la section
      <code class="literal">"Module"</code> du fichier
      <code class="filename">/etc/X11/xorg.conf</code>.</p><pre class="programlisting">Load  "freetype"</pre><p>Maintenant créez un répertoire pour les polices
      <span class="trademark">TrueType</span>® (par exemple
      <code class="filename">/usr/local/lib/X11/fonts/TrueType</code>) et copiez
      toutes les polices <span class="trademark">TrueType</span>® dans ce répertoire.  Gardez à
      l'esprit
      que les polices <span class="trademark">TrueType</span>® ne peuvent être directement prises d'un
      Macintosh; elles doivent être dans un format <span class="trademark">UNIX</span>®/<span class="trademark">MS-DOS</span>®/Windows pour
      être utilisées sous X11.
      Une fois les fichiers copiés dans ce répertoire, utilisez
      <span class="application">ttmkfdir</span> pour créer un fichier
      <code class="filename">fonts.dir</code>, de façon à ce que le moteur
      d'affichage des polices d'X sache que de nouveaux fichiers ont
      été
      installés.  <span class="application">ttmkfdir</span> est disponible
      dans le catalogue des logiciels portés de FreeBSD sous <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/ttmkfdir/pkg-descr">x11-fonts/ttmkfdir</a>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/local/lib/X11/fonts/TrueType</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ttmkfdir -o fonts.dir</code></strong></pre><p>Maintenant ajoutez le répertoire des polices <span class="trademark">TrueType</span>® au
      chemin des polices de caractères.  Cela est identique à
      ce qui est décrit ci-dessus pour les polices <a class="link" href="x-fonts.html#type1" title="6.5.1. Polices de caractères Type1">Type1</a>, c'est à dire, utiliser</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xset fp+ /usr/local/lib/X11/fonts/TrueType</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>ou ajouter une ligne <code class="literal">FontPath</code> au fichier
	<code class="filename">xorg.conf</code>.</p><p>Voilà.  Désormais <span class="application"><span class="trademark">Netscape</span>®</span>,
	<span class="application">Gimp</span>,
	<span class="application"><span class="trademark">StarOffice</span>&#8482;</span>, et toutes les autres
	applications X devraient maintenant reconnaître les polices de
	caractères <span class="trademark">TrueType</span>®.  Les polices très petites (comme
	le texte de page web visualisé sur un écran haute
	résolution) et les très
	grandes polices (dans <span class="application"><span class="trademark">StarOffice</span>&#8482;</span>)
	auront un rendu bien meilleur maintenant.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="antialias"></a>6.5.3. Polices de caractères anticrénelage</h3></div><div><span class="authorgroup">Mis à jour par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Joe Marcus</span> <span class="surname">Clarke</span></span>. </span></div></div></div><a id="idp71441104" class="indexterm"></a><a id="idp71441616" class="indexterm"></a><p>L'anticrénelage est disponible sous
	X11 depuis <span class="application"><span class="trademark">XFree86</span>&#8482;</span> 4.0.2.
	Cependant, la configuration des polices de caractères
	était relativement lourde avant l'arrivée
	d'<span class="application"><span class="trademark">XFree86</span>&#8482;</span> 4.3.0.  Depuis
	<span class="application"><span class="trademark">XFree86</span>&#8482;</span> 4.3.0, toutes les polices
	sous X11 se trouvant dans les répertoires <code class="filename">/usr/local/lib/X11/fonts/</code> et
	<code class="filename">~/.fonts/</code> sont
	automatiquement disponibles pour l'anticrénelage avec
	les applications compatibles Xft.  Toutes les applications ne
	sont pas compatibles Xft, mais de nombreuses ont
	été dotées du support Xft.  Par exemple,
	les applications utilisant Qt 2.3 et versions suivantes (la
	boîte à outils pour l'environnement de travail
	<span class="application">KDE</span>), GTK+ 2.0 et suivantes (la
	boîte à outils de l'environnement de travail
	<span class="application">GNOME</span>), et
	<span class="application">Mozilla</span> 1.2 et versions
	suivantes.</p><p>Afin de contrôler quelles polices de
	caractères sont anticrénelées, ou pour
	configurer les propriétés de
	l'anticrénelage, créez (ou éditez, s'il
	existe déjà) le fichier
	<code class="filename">/usr/local/etc/fonts/local.conf</code>.
	Plusieurs caractéristiques avancées du
	système de fontes Xft peuvent être
	ajustées par l'intermédiaire de ce fichier;
	cette section ne décrit que des possibilités
	simples.  Pour plus de détails, consultez la page de
	manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fonts-conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fonts-conf</span>(5)</span></a>.</p><a id="idp71456336" class="indexterm"></a><p>Ce fichier doit être dans le format XML.  Faites
	attention à la casse des caractères, et
	assurez-vous que toutes les balises sont correctement
	fermées.  Le fichier débute avec l'entête
	XML classique suivie par une définition DOCTYPE, puis
	de la balise <code class="literal">&lt;fontconfig&gt;</code>:</p><pre class="programlisting">
	&lt;?xml version="1.0"?&gt;
	&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
	&lt;fontconfig&gt;
      </pre><p>Comme précisé précédemment,
	l'ensemble des polices de caractères du
	répertoire <code class="filename">/usr/local/lib/X11/fonts/</code> comme du
	répertoire <code class="filename">~/.fonts/</code> sont disponibles pour
	les applications compatibles Xft.  Si vous désirez
	ajouter un autre répertoire en dehors des ces deux
	là, ajoutez une ligne similaire à la suivante au
	fichier
	<code class="filename">/usr/local/etc/fonts/local.conf</code>:</p><pre class="programlisting">&lt;dir&gt;/chemin/vers/mes/fontes&lt;/dir&gt;</pre><p>Après l'ajout de nouvelles fontes, et tout
	particulièrement de nouveaux répertoires de polices, vous
	devrez exécuter la commande suivante pour reconstituer le
	cache des polices de caractères:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fc-cache -f</code></strong></pre><p>L'anticrénelage rend les bords
	légèrement flous, ce qui rend le texte très
	petit plus lisible et enlève l'effet
	&#8220;d'escalier&#8221; des grands textes, mais peut provoquer
	une fatigue visuelle si c'est appliqué au texte normal.
	Pour exclure les tailles de polices inférieures à 14 points de
	l'anticrénelage, ajoutez ces lignes:</p><pre class="programlisting">	 &lt;match target="font"&gt;
	  &lt;test name="size" compare="less"&gt;
		&lt;double&gt;14&lt;/double&gt;
	  &lt;/test&gt;
	  &lt;edit name="antialias" mode="assign"&gt;
		&lt;bool&gt;false&lt;/bool&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;
	&lt;match target="font"&gt;
	  &lt;test name="pixelsize" compare="less" qual="any"&gt;
		&lt;double&gt;14&lt;/double&gt;
	  &lt;/test&gt;
	  &lt;edit mode="assign" name="antialias"&gt;
		&lt;bool&gt;false&lt;/bool&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;</pre><a id="idp71461968" class="indexterm"></a><p>L'espacement pour certaines polices de caractères
	à chasse fixe peut également être
	inapproprié avec l'anticrénelage.  Cela semble
	être un problème avec <span class="application">KDE</span>, en
	particulier.  Une solution possible pour cela est de forcer
	l'espacement pour de telles polices de caractères à 100.
	Ajoutez les lignes suivantes:</p><pre class="programlisting">	 &lt;match target="pattern" name="family"&gt;
	  &lt;test qual="any" name="family"&gt;
	    &lt;string&gt;fixed&lt;/string&gt;
	  &lt;/test&gt;
	  &lt;edit name="family" mode="assign"&gt;
	    &lt;string&gt;mono&lt;/string&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;
	&lt;match target="pattern" name="family"&gt;
	  &lt;test qual="any" name="family"&gt;
	    &lt;string&gt;console&lt;/string&gt;
	  &lt;/test&gt;
	  &lt;edit name="family" mode="assign"&gt;
	    &lt;string&gt;mono&lt;/string&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;</pre><p>(ceci ajoute un alias <code class="literal">"mono"</code> pour les autres
	noms communs des polices de caractères fixes), puis
	ajoutez:</p><pre class="programlisting">	 &lt;match target="pattern" name="family"&gt;
	  &lt;test qual="any" name="family"&gt;
	    &lt;string&gt;mono&lt;/string&gt;
	  &lt;/test&gt;
	  &lt;edit name="spacing" mode="assign"&gt;
	    &lt;int&gt;100&lt;/int&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;</pre><p>Certaines polices de caractères, comme Helvetica,
	peuvent présenter des problèmes lors de
	l'anticrénelage.  Généralement cela se
	manifeste par l'impression que la fonte semble coupée
	en deux verticalement.  Au pire cela peut provoquer des crashs
	avec certaines application comme
	<span class="application">Mozilla</span>.  Pour éviter cela,
	pensez à ajouter ce qui suit au fichier
	<code class="filename">local.conf</code>:</p><pre class="programlisting">	 &lt;match target="pattern" name="family"&gt;
	  &lt;test qual="any" name="family"&gt;
	    &lt;string&gt;Helvetica&lt;/string&gt;
	  &lt;/test&gt;
	  &lt;edit name="family" mode="assign"&gt;
	    &lt;string&gt;sans-serif&lt;/string&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;</pre><p>Une fois l'édition de
	<code class="filename">local.conf</code> achevée, assurez-vous
	que le fichier se termine par la balise
	<code class="literal">&lt;/fontconfig&gt;</code>.  Si ce n'est pas le
	cas, tous vos changements seront ignorés.</p><p>L'ensemble de polices de caractères fourni par
	défaut avec X11 n'est
	pas très adapté pour l'anticrénelage.  Un
	bien meilleur ensemble de fontes peut être trouvé
	dans le catalogue des logiciels portés: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/bitstream-vera/pkg-descr">x11-fonts/bitstream-vera</a>.  Ce
	logiciel installera un fichier
	<code class="filename">/usr/local/etc/fonts/local.conf</code> si ce
	dernier n'existe pas déjà.  Si le fichier
	existe, le logiciel porté créera un fichier
	nommé
	<code class="filename">/usr/local/etc/fonts/local.conf-vera</code>.  Il
	fusionnera le contenu de ce fichier dans
	<code class="filename">/usr/local/etc/fonts/local.conf</code>, et les
	polices de caractères Bitstream remplaceront
	automatiquement les polices avec empattement (serif), sans
	empattement (sans-serif) et à chasse fixe
	d'X11.</p><p>Et enfin, les utilisateurs peuvent ajouter leurs propres
	paramètres par l'intermédiaire de leur fichier
	<code class="filename">.fonts.conf</code>.  Pour cela, chaque
	utilisateur devrait créer un fichier
	<code class="filename">~/.fonts.conf</code>.  Ce fichier doit
	également être écrit en XML.</p><a id="idp71540816" class="indexterm"></a><a id="idp71541456" class="indexterm"></a><p>Un dernier point: avec un écran LCD, un
	échantillonnage &#8220;sub-pixel&#8221; peut être
	désiré.  Fondamentalement, ceci traite les composantes
	rouge,
	verte et bleu séparément (horizontalement
	séparées) pour améliorer la résolution
	horizontale; les résultats peuvent être dramatiques.
	Pour activer cela, ajoutez quelque part dans le fichier
	<code class="filename">local.conf</code> les lignes:</p><pre class="programlisting">
	 &lt;match target="font"&gt;
	  &lt;test qual="all" name="rgba"&gt;
	    &lt;const&gt;unknown&lt;/const&gt;
	  &lt;/test&gt;
	  &lt;edit name="rgba" mode="assign"&gt;
	    &lt;const&gt;rgb&lt;/const&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;
      </pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">En fonction de type d'écran, le terme
	  &#8220;rgb&#8221; pourra devoir être changé pour
	  &#8220;bgr&#8221;, &#8220;vrgb&#8221; ou
	  &#8220;vbgr&#8221;: expérimentez
	  pour définir lequel fonctionne le mieux.</p></div><a id="idp71544272" class="indexterm"></a><p>L'anticrénelage devrait être activé au
	prochain lancement du serveur X.  Cependant, notez que les
	applications doivent savoir comment l'utiliser.  A l'heure
	actuelle, le &#8220;toolkit&#8221; Qt le supporte, donc
	l'intégralité de l'environnement
	<span class="application">KDE</span> peut utiliser des polices
	anticrénelées.
	GTK+ et <span class="application">GNOME</span> peuvent également
	faire usage de l'anticrénelage via le système
	<span class="quote">« <span class="quote">Font</span> »</span> (voir la <a class="xref" href="x11-wm.html#x11-wm-gnome-antialias" title="6.7.1.3. Polices de caractères anticrénelage avec GNOME">Section 6.7.1.3, « Polices de caractères anticrénelage avec
	  GNOME »</a> pour plus de détails).
	Par défaut, <span class="application">Mozilla</span> 1.2 et
	versions suivantes utiliseront automatiquement
	l'anticrénelage.  Pour désactiver cette
	caractéristique, recompilez
	<span class="application">Mozilla</span> avec le paramètre
	<code class="varname">-DWITHOUT_XFT</code>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="x-config.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="x11.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="x-xdm.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">6.4. Configuration d'X11 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 6.6. Le gestionnaire de procédures de connexions graphiques
      - &#8220;X Display Manager&#8221;</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>