<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>12.15. Gestion de l'énergie et des ressources</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuel FreeBSD" /><link rel="up" href="config-tuning.html" title="Chapitre 12. Configuration et optimisation" /><link rel="prev" href="adding-swap-space.html" title="12.14. Ajouter de l'espace de pagination" /><link rel="next" href="ACPI-debug.html" title="12.16. Utiliser et déboguer l'ACPI sous FreeBSD" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.15. Gestion de l'énergie et des ressources</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="adding-swap-space.html">Précédent</a> </td><th width="60%" align="center">Chapitre 12. Configuration et optimisation</th><td width="20%" align="right"> <a accesskey="n" href="ACPI-debug.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="acpi-overview"></a>12.15. Gestion de l'énergie et des ressources</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Hiten</span> <span class="surname">Pandya</span></span> et <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>Il est important d'utiliser les ressources
      matérielles d'une manière efficace.  Avant
      l'apparition de l'<acronym class="acronym">ACPI</acronym>, il était
      difficile pour les systèmes d'exploitation de
      gérer l'utilisation de l'alimentation et la température
      d'un système.  Le matériel était
      géré par le <acronym class="acronym">BIOS</acronym> et donc
      l'utilisateur avait moins de contrôle et de
      visibilité sur le paramétrage de la gestion de
      l'énergie.  Une configuration limitée était
      accessible via
      l'<span class="emphasis"><em>Advanced Power Management (APM)</em></span>.
      La gestion de l'énergie et des ressources est un
      des éléments clés d'un système
      d'exploitation moderne.  Par exemple, vous pourrez vouloir qu'un
      système d'exploitation surveille certaines limites (et
      éventuellement vous alerte), au cas où la
      température de votre système augmente de façon
      inattendue.</p><p>Dans cette section,  nous fournirons une information
      complète au sujet de l'<acronym class="acronym">ACPI</acronym>.  Il sera
      fait référence à des documents
      supplémentaires en fin de section pour plus de
      détails.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="acpi-intro"></a>12.15.1. Qu'est-ce que l'ACPI?</h3></div></div></div><a id="idp77264976" class="indexterm"></a><a id="idp77265744" class="indexterm"></a><p>L'<span class="quote">« <span class="quote">interface de configuration et d'alimentation
	avancée</span> »</span> (<acronym class="acronym">ACPI</acronym>, Advanced
	Configuration and Power Interface) est une norme créée
	par un ensemble de constructeurs pour fournir une interface
	standard à la gestion des ressources et de l'énergie.
	C'est un élément clé dans le contrôle
	et la configuration par le système d'exploitation de
	de la gestion d'énergie, i.e., il permet plus de contrôle
	et flexibilité au système d'exploitation.  Les
	systèmes modernes ont &#8220;repoussé&#8221; les limites
	des interfaces &#8220;Plug and Play&#8221; antérieures
	à
	l'apparition de l'<acronym class="acronym">ACPI</acronym>.
	L'<acronym class="acronym">ACPI</acronym> est le descendant direct de
	l'<acronym class="acronym">APM</acronym> (Advanced Power Management - gestion
	avancée de l'énergie).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="acpi-old-spec"></a>12.15.2. Les imperfections de la gestion avancée de
	l'énergie (APM)</h3></div></div></div><p>Le système de <span class="emphasis"><em>gestion avancée de
	l'énergie (APM)</em></span> gère l'utilisation de
	l'énergie par un système en fonction de son
	activité.  Le BIOS APM est fourni par le fabricant (du
	système) et est spécifique à la plateforme
	matérielle.  Un pilote APM au niveau du système
	d'exploitation gère l'accès à
	l'<span class="emphasis"><em>interface logicielle APM</em></span> qui autorise la
	gestion des niveaux de consommation.  L'APM devrait être
	toujours utilisé pour les systèmes
	fabriqués en ou avant 2000.</p><p>L'APM présente quatre problèmes majeurs.  Tout
	d'abord la gestion de l'énergie est effectuée par le
	BIOS (spécifique au constructeur), et le système
	d'exploitation n'en a aucune connaissance.  Un exemple de ce
	problème, est lorsque l'utilisateur fixe des valeurs pour
	le temps d'inactivité d'un disque dur dans le BIOS APM, qui
	une fois dépassé, provoque l'arrêt du disque
	(par le BIOS) sans le consentement du système
	d'exploitation.  Deuxièmement, la logique de l'APM est
	interne au BIOS, et agit indépendamment du système
	d'exploitation.  Cela signifie que les utilisateurs ne peuvent
	corriger les problèmes de leur BIOS APM qu'en flashant un
	nouveau BIOS; c'est une opération dangereuse, qui si elle
	échoue peut laisser le système dans un état
	irrécupérable.  Troisièmement, l'APM est une
	technologie spécifique au constructeur, ce qui veut dire
	qu'il y a beaucoup de redondances (duplication des efforts) et de
	bogues qui peuvent être trouvées dans le BIOS d'un
	constructeur, et qui peuvent ne pas être corrigées
	dans d'autres BIOS.  Et pour terminer, le dernier problème
	est le fait que le BIOS APM n'a pas suffisamment d'espace pour
	implémenter une politique sophistiquée de gestion de
	l'énergie, ou une politique qui peut s'adapter parfaitement
	aux besoins de la machine.</p><p>Le <span class="emphasis"><em>BIOS Plug and Play (PNPBIOS)</em></span>
	n'était pas fiable dans de nombreuses situations.  Le
	PNPBIOS est une technologie 16 bits, le système
	d'exploitation doit utiliser une émulation 16 bits afin de
	faire l'<span class="quote">« <span class="quote">interface</span> »</span> avec les méthodes
	PNPBIOS.</p><p>Le pilote <acronym class="acronym">APM</acronym> FreeBSD est documenté
	dans la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=apm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">apm</span>(4)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="acpi-config"></a>12.15.3. Configurer l'<acronym class="acronym">ACPI</acronym></h3></div></div></div><p>Le pilote <code class="filename">acpi.ko</code> est par défaut
	chargé par le <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> au démarrage et ne devrait
	<span class="emphasis"><em>pas</em></span> être compilé dans
	le noyau.  La raison derrière cela est que les modules
	sont plus facile à manipuler, par exemple pour passer à
	une autre version du module <code class="filename">acpi.ko</code> sans
	avoir à recompiler le noyau.  Cela présente l'avantage
	de rendre les tests aisés.  Une autre raison est que lancer
	l'<acronym class="acronym">ACPI</acronym> après qu'un système ait
	terminé son lancement donne souvent lieu à des
	dysfonctionnements.  Si des problèmes surviennent, vous pouvez
	désactiver l'<acronym class="acronym">ACPI</acronym>.  Ce pilote ne devrait
	et ne peut être déchargé car le bus
	système l'utilise pour différentes
	intéraction avec le matériel.
	L'<acronym class="acronym">ACPI</acronym> peut être déactivé
	en ajoutant <code class="literal">hint.acpi.0.disabled="1"</code> dans
	le fichier <code class="filename">/boot/loader.conf</code> ou
	directement à l'invite du chargeur (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>).</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">L'<acronym class="acronym">ACPI</acronym> et l'<acronym class="acronym">APM</acronym>
	  ne peuvent coexister et devraient être utilisé
	  séparément.  Le dernier chargé
	  s'arrêtera s'il détecte l'autre en
	  fonctionnement.</p></div><p>L'<acronym class="acronym">ACPI</acronym> peut
	être utilisé pour mettre en veille un système avec
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpiconf&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">acpiconf</span>(8)</span></a>, les options <code class="option">-s</code> et
	<code class="literal">1-5</code>.  La plupart des utilisateurs n'auront
	besoin que de <code class="literal">1</code> ou <code class="literal">3</code>
	(système suspendu en RAM).  L'option
	<code class="literal">5</code> provoquera un arrêt de l'alimentation
	par logiciel, effet identique à un:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>halt -p</code></strong></pre><p>D'autres options sont disponibles via <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>.
	Consultez les pages de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">acpi</span>(4)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpiconf&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">acpiconf</span>(8)</span></a>
	pour plus d'informations.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="adding-swap-space.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="ACPI-debug.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">12.14. Ajouter de l'espace de pagination </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 12.16. Utiliser et déboguer l'<acronym class="acronym">ACPI</acronym>
      sous FreeBSD</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>