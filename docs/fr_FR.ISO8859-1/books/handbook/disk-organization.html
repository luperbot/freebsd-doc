<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>4.5. Organisation des disques</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuel FreeBSD" /><link rel="up" href="basics.html" title="Chapitre 4. Quelques bases d'UNIX" /><link rel="prev" href="dirstructure.html" title="4.4. Organisation de l'arborescence des répertoires" /><link rel="next" href="mount-unmount.html" title="4.6. Monter et démonter des systèmes de fichiers" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.5. Organisation des disques</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dirstructure.html">Précédent</a> </td><th width="60%" align="center">Chapitre 4. Quelques bases d'UNIX</th><td width="20%" align="right"> <a accesskey="n" href="mount-unmount.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disk-organization"></a>4.5. Organisation des disques</h2></div></div></div><p>Le plus petit élément qu'utilise FreeBSD pour
      retrouver des fichiers est le nom de fichier.  Les noms de
      fichiers sont sensibles à la casse des caractères,
      ce qui signifie que <code class="filename">readme.txt</code> et
      <code class="filename">README.TXT</code> sont deux fichiers
      séparés.  FreeBSD n'utilise pas l'extension
      (<code class="filename">.txt</code>) d'un fichier pour déterminer
      si ce fichier est un programme, un document ou une autre forme
      de donnée.</p><p>Les fichiers sont stockés dans des
      répertoires.  Un répertoire peut ne contenir aucun
      fichier, ou en contenir plusieurs centaines.  Un
      répertoire peut également contenir d'autre
      répertoires, vous permettant de construire une
      hiérarchie de répertoires à
      l'intérieur d'un autre.  Cela rend plus simple
      l'organisation de vos données.</p><p>Les fichiers et les répertoires sont
      référencés en donnant le nom du fichier ou
      du répertoire, suivi par un slash, <code class="literal">/</code>,
      suivi par tout nom de répertoire nécessaire.  Si
      vous avez un répertoire <code class="filename">foo</code>, qui
      contient le répertoire <code class="filename">bar</code>, qui
      contient le fichier <code class="filename">readme.txt</code>, alors le
      nom complet, ou <em class="firstterm">chemin</em>
      (&#8220;path&#8221;) vers le fichier est
      <code class="filename">foo/bar/readme.txt</code>.</p><p>Les répertoires et les fichiers sont stockés
      sur un système de fichiers.  Chaque système de
      fichiers contient à son niveau le plus haut un
      répertoire appelé <em class="firstterm">répertoire
      racine</em> pour ce système de fichiers.  Ce
      répertoire racine peut alors contenir les autres
      répertoires.</p><p>Jusqu'ici cela est probablement semblable à n'importe
      quel autre système d'exploitation que vous avez pu avoir
      utilisé.  Il y a quelques différences: par
      exemple, <span class="trademark">MS-DOS</span>® utilise <code class="literal">\</code> pour séparer
      les noms de fichier et de répertoire, alors que MacOS
      utilise <code class="literal">:</code>.</p><p>FreeBSD n'utilise pas de lettre pour les lecteurs, ou
      d'autres noms de disque dans le chemin.  Vous n'écrirez
      pas <code class="filename">c:/foo/bar/readme.txt</code> sous
      FreeBSD.</p><p>Au lieu de cela, un système de fichiers est
      désigné comme <em class="firstterm">système de
      fichiers racine</em>.  La racine du système de
      fichiers racine est représentée par un
      <code class="literal">/</code>. Tous les autres systèmes de
      fichiers sont alors <em class="firstterm">montés</em> sous le
      système de fichiers racine.  Peu importe le nombre de
      disques que vous avez sur votre système FreeBSD, chaque
      répertoire apparaît comme faisant partie du
      même disque.</p><p>Supposez que vous avez trois systèmes de fichiers,
      appelés <code class="literal">A</code>, <code class="literal">B</code>, et
      <code class="literal">C</code>.  Chaque système de fichiers
      possède un répertoire racine, qui contient deux
      autres répertoires, nommés <code class="literal">A1</code>,
      <code class="literal">A2</code> (et respectivement <code class="literal">B1</code>,
      <code class="literal">B2</code> et <code class="literal">C1</code>,
      <code class="literal">C2</code>).</p><p>Appelons <code class="literal">A</code> le système de fichiers
      racine.  Si vous utilisiez la commande <code class="command">ls</code>
      pour visualiser le contenu de ce répertoire, vous verriez
      deux sous-répertoires, <code class="literal">A1</code> et
      <code class="literal">A2</code>.  L'arborescence des répertoires
      ressemblera à ceci:</p><div class="mediaobject"><img src="install/example-dir1.png" /></div><p>Un système de fichiers doit être monté
      dans un répertoire d'un autre système de fichiers.
      Supposez maintenant que vous montez le système de
      fichiers <code class="literal">B</code> sur le répertoire
      <code class="literal">A1</code>.  Le répertoire racine de
      <code class="literal">B</code> remplace <code class="literal">A1</code>, et les
      répertoires de <code class="literal">B</code> par conséquent
      apparaissent:</p><div class="mediaobject"><img src="install/example-dir2.png" /></div><p>Tout fichier de <code class="literal">B1</code> ou
      <code class="literal">B2</code> peut être atteint avec le chemin
      <code class="filename">/A1/B1</code> ou <code class="filename">/A1/B2</code> si
      nécessaire.  Tous les fichiers qui étaient dans
      <code class="filename">A1</code> ont été temporairement
      cachés.  Ils réapparaîtront si
      <code class="literal">B</code> est
      <em class="firstterm">démonté</em> de A.</p><p>Si <code class="literal">B</code> a été monté sur
      <code class="literal">A2</code> alors le diagramme sera semblable à
      celui-ci:</p><div class="mediaobject"><img src="install/example-dir3.png" /></div><p>et les chemins seront <code class="filename">/A2/B1</code> et
      respectivement <code class="filename">/A2/B2</code>.</p><p>Les systèmes de fichiers peuvent être
      montés au sommet d'un autre.  En continuant l'exemple
      précédent, le système de fichiers
      <code class="literal">C</code> pourrait être monté au sommet
      du répertoire <code class="literal">B1</code> dans le
      système de fichiers <code class="literal">B</code>, menant à
      cet arrangement:</p><div class="mediaobject"><img src="install/example-dir4.png" /></div><p>Où <code class="literal">C</code> pourrait être
      monté directement sur le système de fichiers
      <code class="literal">A</code>, sous le répertoire
      <code class="literal">A1</code>:</p><div class="mediaobject"><img src="install/example-dir5.png" /></div><p>Si vous êtes familier de <span class="trademark">MS-DOS</span>®, ceci est semblable, bien
      que pas identique, à la commande
      <code class="command">join</code>.</p><p>Ce n'est normalement pas quelque chose qui doit vous
      préoccuper.  Généralement vous créez
      des systèmes de fichiers à l'installation de
      FreeBSD et décidez où les monter, et ensuite ne
      les modifiez jamais à moins que vous ajoutiez un nouveau
      disque.</p><p>Il est tout à fait possible de n'avoir qu'un seul
      grand système de fichiers racine, et de ne pas en
      créer d'autres.  Il y a quelques inconvénients
      à cette approche, et un avantage.</p><div class="itemizedlist"><div class="itemizedlist-title">Avantages des systèmes de fichiers
	multiples</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les différents systèmes de fichiers
	  peuvent avoir différentes <em class="firstterm">options de
	  montage</em>.  Par exemple, avec une planification
	  soigneuse, le système de fichiers racine peut
	  être monté en lecture seule, rendant impossible
	  tout effacement par inadvertance ou édition de fichier
	  critique.  La séparation des systèmes de
	  fichiers inscriptibles par l'utilisateur permet leur montage
	  en mode <em class="firstterm">nosuid</em>; cette option
	  empêche les bits
	  <em class="firstterm">suid</em>/<em class="firstterm">guid</em> des
	  exécutables stockés sur ce système de
	  fichiers de prendre effet, améliorant peut-être
	  la sécurité.</p></li><li class="listitem"><p>FreeBSD optimise automatiquement la disposition des
	  fichiers sur un système de fichiers, selon la
	  façon dont est utilisé le système de
	  fichiers.  Aussi un système de fichiers contenant
	  beaucoup de petits fichiers qui sont écrits
	  fréquemment aura une optimisation différente
	  à celle d'un système contenant moins, ou de plus
	  gros fichiers.  En ayant un seul grand système de
	  fichiers cette optimisation est perdue.</p></li><li class="listitem"><p>Les systèmes de fichiers de FreeBSD sont
	  très robustes même en cas de coupure secteur.
	  Cependant une coupure secteur à un moment critique
	  pourrait toujours endommager la structure d'un système
	  de fichiers.  En répartissant vos données sur
	  des systèmes de fichiers multiples il est plus probable
	  que le système redémarre, vous facilitant la
	  restauration des données à partir de sauvegardes
	  si nécessaire.</p></li></ul></div><div class="itemizedlist"><div class="itemizedlist-title">Avantage d'un système de fichiers unique</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les systèmes de fichiers ont une taille fixe.  Si
	  vous créez un système de fichiers à
	  l'installation de FreeBSD et que vous lui donnez une taille
	  spécifique, vous pouvez plus tard vous apercevoir que
	  vous avez besoin d'une partition plus grande.  Cela n'est pas
	  facilement faisable sans sauvegardes, recréation du
	  système de fichiers, et enfin restauration des
	  données.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD dispose d'une commande,
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">growfs</span>(8)</span></a>, qui permettra d'augmenter la taille d'un
	    système de fichiers au vol, supprimant cette
	    limitation.</p></div></li></ul></div><p>Les systèmes de fichiers sont contenus dans des
      partitions.  Cela n'a pas la même signification que
      l'utilisation commune du terme partition (par exemple une
      partition
      <span class="trademark">MS-DOS</span>®), en raison de l'héritage Unix de FreeBSD.
      Chaque partition est identifiée par une lettre de
      <code class="literal">a</code> à <code class="literal">h</code>.  Chaque
      partition ne contient qu'un seul système de fichiers,
      cela signifie que les systèmes de fichiers sont souvent
      décrits soit par leur point de montage typique dans la
      hiérarchie du système de fichiers, soit par la
      lettre de la partition qui les contient.</p><p>FreeBSD utilise aussi de l'espace disque pour
      <em class="firstterm">l'espace de pagination</em>
      (&#8220;swap&#8221;).  L'espace de pagination fournit à
      FreeBSD la <em class="firstterm">mémoire virtuelle</em>.
      Cela permet à votre ordinateur de se comporter comme s'il
      disposait de beaucoup plus de mémoire qu'il n'en a
      réellement.  Quand FreeBSD vient à manquer de
      mémoire il déplace certaines données qui ne
      sont pas actuellement utilisées vers l'espace de
      pagination, et les rapatrie (en déplaçant quelque
      chose d'autre) quand il en a besoin.</p><p>Quelques partitions sont liées à certaines
      conventions.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Partition</th><th>Convention</th></tr></thead><tbody valign="top"><tr><td valign="top"><code class="literal">a</code></td><td valign="top">Contient normalement le système de
	      fichiers racine</td></tr><tr><td valign="top"><code class="literal">b</code></td><td valign="top">Contient normalement l'espace de pagination</td></tr><tr><td valign="top"><code class="literal">c</code></td><td valign="top">Normalement de la même taille que la tranche
	      (&#8220;slice&#8221;) contenant les partitions.  Cela
	      permet aux utilitaires devant agir sur
	      l'intégralité de la tranche (par exemple
	      un analyseur de blocs défectueux) de travailler
	      sur la partition <code class="literal">c</code>.  Vous ne devriez
	      normalement pas créer de système de
	      fichiers sur cette partition.</td></tr><tr><td valign="top"><code class="literal">d</code></td><td valign="top">La partition <code class="literal">d</code> a eu dans le
	      passé une signification particulière, ce
	      n'est plus le cas aujourd'hui, et <code class="literal">d</code>
	      pourra être utilisée comme une partition
	      classique.</td></tr></tbody></table></div><p>Chaque partition contenant un système de fichiers est
      stockée dans ce que FreeBSD appelle une
      <em class="firstterm">tranche</em> (&#8220;slice&#8221;). Tranche -
      &#8220;slice&#8221; est le terme FreeBSD pour ce qui
      est communément appelé partition,
      et encore une fois, cela en raison des fondations Unix de
      FreeBSD.  Les tranches sont numérotées, en partant
      de 1, jusqu'à 4.</p><a id="idp70113488" class="indexterm"></a><a id="idp70114000" class="indexterm"></a><a id="idp70114512" class="indexterm"></a><a id="idp70115024" class="indexterm"></a><p>Les numéros de tranche suivent le nom du
      périphérique, avec le préfixe
      <code class="literal">s</code>, et commencent à 1.  Donc
      &#8220;da0<span class="emphasis"><em>s1</em></span>&#8221; est la première
      tranche sur le premier disque SCSI.  Il ne peut y avoir que
      quatre tranches physiques sur un disque, mais vous pouvez avoir
      des tranches logiques dans des tranches physiques d'un type
      précis.  Ces tranches étendues sont
      numérotées à partir de 5, donc
      &#8220;ad0<span class="emphasis"><em>s5</em></span>&#8221; est la première
      tranche étendue sur le premier disque IDE.  Elles sont
      utilisées par des systèmes de fichiers qui
      s'attendent à occuper une tranche entière.</p><p>Les tranches, les disques &#8220;en mode
      dédié&#8221;, et les autres disques contiennent
      des <em class="firstterm">partitions</em>, qui sont
      représentées par des lettres allant de
      <code class="literal">a</code> à <code class="literal">h</code>.  Cette
      lettre est ajoutée au nom de périphérique,
      aussi &#8220;da0<span class="emphasis"><em>a</em></span>&#8221; est la partition a
      sur le premier disque da, qui est en &#8220;en mode
      dédié&#8221;.
      &#8220;ad1s3<span class="emphasis"><em>e</em></span>&#8221; est la
      cinquième partition de la troisième tranche du
      second disque IDE.</p><p>En conclusion chaque disque présent sur le
      système est identifié.  Le nom d'un disque
      commence par un code qui indique le type de disque, suivi d'un
      nombre, indiquant de quel disque il s'agit.  Contrairement aux
      tranches, la numérotation des disques commence à
      0.  Les codes communs que vous risquez de rencontrer sont
      énumérés dans le <a class="xref" href="disk-organization.html#basics-dev-codes" title="Tableau 4.1. Codes des périphériques disques">Tableau 4.1, « Codes des périphériques disques »</a>.</p><p>Quand vous faites référence à une
      partition, FreeBSD exige que vous nommiez également la
      tranche et le disque contenant la partition, et quand vous
      faites référence à une tranche vous devrez
      également faire référence au nom du disque.
      On fait donc référence à une partition en écrivant le nom du disque,
      <code class="literal">s</code>, le numéro de la tranche, et enfin
      la lettre de la partition.  Des exemples sont donnés dans
      l'<a class="xref" href="disk-organization.html#basics-disk-slice-part" title="Exemple 4.1. Exemples d'appellation de disques, tranches et partitions">Exemple 4.1, « Exemples d'appellation de disques, tranches et
      partitions »</a>.</p><p>L'<a class="xref" href="disk-organization.html#basics-concept-disk-model" title="Exemple 4.2. Modèle conceptuel d'un disque">Exemple 4.2, « Modèle conceptuel d'un disque »</a> montre un
      exemple de l'organisation d'un disque qui devrait aider à
      clarifier les choses.</p><p>Afin d'installer FreeBSD vous devez tout d'abord configurer
      les tranches sur votre disque, ensuite créer les
      partitions dans la tranche que vous utiliserez pour FreeBSD, et
      alors créer un système de fichiers (ou espace de
      pagination) dans chaque partition, et décider de
      l'endroit où seront montés les systèmes de
      fichiers.</p><div class="table"><a id="basics-dev-codes"></a><div class="table-title">Tableau 4.1. Codes des périphériques disques</div><div class="table-contents"><table summary="Codes des périphériques disques" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Code</th><th>Signification</th></tr></thead><tbody><tr><td><code class="filename">ad</code></td><td>Disque ATAPI (IDE)</td></tr><tr><td><code class="filename">da</code></td><td>Disque SCSI</td></tr><tr><td><code class="filename">acd</code></td><td>CDROM ATAPI (IDE)</td></tr><tr><td><code class="filename">cd</code></td><td>CDROM SCSI</td></tr><tr><td><code class="filename">fd</code></td><td>Lecteur de disquette</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="basics-disk-slice-part"></a><div class="example-title">Exemple 4.1. Exemples d'appellation de disques, tranches et
      partitions</div><div class="example-contents"><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Nom</th><th>Signification</th></tr></thead><tbody><tr><td><code class="literal">ad0s1a</code></td><td>Première partition (<code class="literal">a</code>)
		sur la première tranche (<code class="literal">s1</code>)
		du premier disque IDE
		(<code class="literal">ad0</code>).</td></tr><tr><td><code class="literal">da1s2e</code></td><td>Cinquième partition (<code class="literal">e</code>)
		sur la seconde tranche (<code class="literal">s2</code>) du
		deuxième disque SCSI
		(<code class="literal">da1</code>).</td></tr></tbody></table></div></div></div><br class="example-break" /><div class="example"><a id="basics-concept-disk-model"></a><div class="example-title">Exemple 4.2. Modèle conceptuel d'un disque</div><div class="example-contents"><p>Ce diagramme montre comment FreeBSD voit le premier disque
	IDE attaché au système.  Supposons que le disque
	a une capacité de 4 Go, et contient deux tranches
	de 2 Go (partitions <span class="trademark">MS-DOS</span>®).  La première tranche
	contient un disque <span class="trademark">MS-DOS</span>®, <code class="filename">C:</code>, et la
	seconde tranche contient une installation de FreeBSD.  Dans
	cet exemple l'installation de FreeBSD a trois partitions de données, et
	une partition de pagination.</p><p>Les trois partitions accueilleront chacune un
	système de fichiers.  La partition <code class="literal">a</code>
	sera utilisée en tant que système de fichiers
	racine, la partition <code class="literal">e</code> pour le contenu du
	répertoire <code class="filename">/var</code>, et
	<code class="literal">f</code> pour l'arborescence du répertoire
	<code class="filename">/usr</code>.</p><div class="mediaobject"><img src="install/disk-layout.png" /></div></div></div><br class="example-break" /></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dirstructure.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="mount-unmount.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">4.4. Organisation de l'arborescence des répertoires </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 4.6. Monter et démonter des systèmes de fichiers</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>