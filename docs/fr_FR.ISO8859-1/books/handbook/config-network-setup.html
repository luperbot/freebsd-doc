<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>12.8. Configuration des cartes réseaux</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuel FreeBSD" /><link rel="up" href="config-tuning.html" title="Chapitre 12. Configuration et optimisation" /><link rel="prev" href="configtuning-rcd.html" title="12.7. Utilisation du système rc sous FreeBSD" /><link rel="next" href="configtuning-virtual-hosts.html" title="12.9. Hôtes virtuels" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.8. Configuration des cartes réseaux</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configtuning-rcd.html">Précédent</a> </td><th width="60%" align="center">Chapitre 12. Configuration et optimisation</th><td width="20%" align="right"> <a accesskey="n" href="configtuning-virtual-hosts.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="config-network-setup"></a>12.8. Configuration des cartes réseaux</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp76632784" class="indexterm"></a><p>De nos jours il est impossible de penser à un ordinateur
      sans penser connexion à un réseau.  Installer et configurer
      une carte réseau est une tâche classique pour tout
      administrateur FreeBSD.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76634320"></a>12.8.1. Déterminer le bon pilote de
	périphérique</h3></div></div></div><a id="idp76634960" class="indexterm"></a><p>Avant de commencer, vous devez connaître le modèle
	de la carte dont vous disposez, le circuit qu'elle
	utilise, et si c'est une carte PCI ou ISA.  FreeBSD supporte
	une large variété de cartes PCI et ISA.  Consultez la liste de
	compatibilité matérielle pour votre version de FreeBSD afin de
	voir si votre carte est supportée.</p><p>Une fois que vous êtes sûrs que votre carte
	est supportée, vous devez déterminer le bon pilote de
	périphérique pour la carte.  Les fichiers
	<code class="filename">/usr/src/sys/conf/NOTES</code> et
	<code class="filename">/usr/src/sys/arch/conf/NOTES</code>
	vous donneront
	la liste des pilotes de périphériques pour cartes
	réseaux avec des informations sur les cartes/circuits
	supportés.  Si vous avez des doutes au sujet du bon pilote,
	lisez la page de manuel du pilote.  La page de manuel vous
	donnera plus d'information sur le matériel supporté et
	même les éventuels problèmes qui pourront
	apparaître.</p><p>Si vous possédez une carte courante, la plupart du temps
	vous n'aurez pas à chercher trop loin pour trouver un pilote.
	Les pilotes pour les cartes réseaux courantes sont
	présents dans le noyau <code class="filename">GENERIC</code>, aussi
	votre carte devrait apparaître au démarrage, comme
	suit:</p><pre class="screen">dc0: &lt;82c169 PNIC 10/100BaseTX&gt; port 0xa000-0xa0ff mem 0xd3800000-0xd38
000ff irq 15 at device 11.0 on pci0
dc0: Ethernet address: 00:a0:cc:da:da:da
miibus0: &lt;MII bus&gt; on dc0
ukphy0: &lt;Generic IEEE 802.3u media interface&gt; on miibus0
ukphy0:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
dc1: &lt;82c169 PNIC 10/100BaseTX&gt; port 0x9800-0x98ff mem 0xd3000000-0xd30
000ff irq 11 at device 12.0 on pci0
dc1: Ethernet address: 00:a0:cc:da:da:db
miibus1: &lt;MII bus&gt; on dc1
ukphy1: &lt;Generic IEEE 802.3u media interface&gt; on miibus1
ukphy1:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto</pre><p>Dans cet exemple, nous voyons que deux cartes utilisant le
	pilote de périphérique <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">dc</span>(4)</span></a> sont présentes
	sur le système.</p><p>Si le pilote de votre carte n'est pas présent dans
	le noyau <code class="filename">GENERIC</code>, vous devrez charger le
	module approprié pour pouvoir utiliser votre carte.  Cela
	peut être effectué de deux manières
	différentes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La méthode la plus simple est de charger le
	    module pour votre carte réseau avec
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>, ou automatiquement au démarrage du
	    système en ajoutant la ligne appropriée au
	    fichier <code class="filename">/boot/loader.conf</code>.  Tous les
	    pilotes de cartes réseau ne sont pas disponibles
	    sous forme de modules; les cartes ISA sont un bon exemple
	    de périphériques pour lesquels les modules
	    n'existent pas.</p></li><li class="listitem"><p>Alternativement, vous pouvez compiler en statique
	    le support pour votre carte dans votre noyau.  Consultez
	    <code class="filename">/usr/src/sys/conf/NOTES</code>,
	    <code class="filename">/usr/src/sys/arch/conf/NOTES</code>
	    et la page de manuel du pilote de
	    périphérique pour savoir ce qu'il faut
	    ajouter au fichier de configuration de votre noyau.  Pour
	    plus d'information sur la recompilation de votre noyau,
	    veuillez lire le <a class="xref" href="kernelconfig.html" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>.  Si votre
	    carte a été détectée au
	    démarrage par votre noyau
	    (<code class="filename">GENERIC</code>) vous n'avez pas à
	    compiler un nouveau noyau.</p></li></ul></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="config-network-ndis"></a>12.8.1.1. Utilisation des pilotes NDIS de <span class="trademark">Windows</span>®</h4></div></div></div><a id="idp76655184" class="indexterm"></a><a id="idp76655696" class="indexterm"></a><a id="idp76656208" class="indexterm"></a><a id="idp76657104" class="indexterm"></a><a id="idp76657616" class="indexterm"></a><a id="idp76658512" class="indexterm"></a><p>Malheureusement il y a toujours de nombreux fabricants
	  qui ne fournissent pas à la communauté des
	  logiciels libres les informations concernant les pilotes
	  pour leurs cartes considérant de telles
	  informations comme des secrets industriels.  Par
	  conséquent, il ne reste aux développeurs de
	  FreeBSD et d'autres systèmes d'exploitation libres que
	  deux choix: développer les pilotes en passant par
	  un long et pénible processus de <span class="quote">« <span class="quote">reverse
	  engineering</span> »</span> ou utiliser les pilotes binaires
	  existants disponibles pour la plateforme
	  <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®.  La plupart des développeurs,
	  y compris ceux impliqués dans FreeBSD, ont choisi
	  cette dernière approche.</p><p>Grâce aux contributions de Bill Paul (wpaul),
	  depuis FreeBSD 5.3-RELEASE, il existe un support
	  <span class="quote">« <span class="quote">natif</span> »</span> pour la spécification
	  d'interface des pilotes de périphérique
	  réseau (Network Driver Interface
	  Specification&#8212;NDIS).  Le NDISulator FreeBSD (connu
	  également sous le nom de Project Evil) prend un
	  pilote binaire réseau <span class="trademark">Windows</span>® et lui fait penser
	  qu'il est en train de tourner sous <span class="trademark">Windows</span>®.  Etant
	  donné que le pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ndis</span>(4)</span></a> utilise un binaire
	  <span class="trademark">Windows</span>®, il n'est utilisable que sur les systèmes
	  <span class="trademark">i386</span>&#8482; et amd64.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ndis</span>(4)</span></a> est conçu pour supporter
	    principalement les périphériques PCI,
	    CardBus et PCMCIA, les périphériques USB ne
	    sont pas encore supportés.</p></div><p>Pour utiliser le NDISulator, vous avez besoin de trois
	  choses:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>les sources du noyau;</p></li><li class="listitem"><p>le pilote binaire <span class="trademark">Windows</span>® XP (extension
	      <code class="filename">.SYS</code>);</p></li><li class="listitem"><p>le fichier de configuration du pilote <span class="trademark">Windows</span>® XP
	      (extension <code class="filename">.INF</code>).</p></li></ol></div><p>Recherchez les fichiers spécifiques à
	  votre carte.  Généralement, ils peuvent
	  être trouvés sur les CDs livrés avec la
	  carte ou sur le site du fabricant.  Dans les exemples qui
	  suivent nous utiliseront les fichiers
	  <code class="filename">W32DRIVER.SYS</code> et
	  <code class="filename">W32DRIVER.INF</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vous ne pouvez pas utiliser un pilote <span class="trademark">Windows</span>®/i386
	    avec FreeBSD/amd64, vous devez récupérer un
	    pilote <span class="trademark">Windows</span>®/amd64 pour que cela fonctionne
	    correctement.</p></div><p>L'étape suivante est de compiler le pilote
	  binaire dans un module chargeable du noyau.  Pour effectuer
	  cela, en tant que <code class="systemitem">root</code>, utilisez
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndisgen&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ndisgen</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ndisgen /path/to/W32DRIVER.INF /path/to/W32DRIVER.SYS</code></strong></pre><p>L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndisgen&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ndisgen</span>(8)</span></a> est interactif et vous
	  sollicitera pour d'éventuelles informations
	  complémentaires si nécessaire; il produira un
	  module noyau dans le répertoire courant qui pourra
	  être chargé de cette manière:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload ./W32DRIVER.ko</code></strong></pre><p>Avec le module généré, vous devez également charger les
	  modules <code class="filename">ndis.ko</code> et
	  <code class="filename">if_ndis.ko</code>.  Cela devrait être fait
	  automatiquement quand vous chargez un module qui dépend de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ndis</span>(4)</span></a>.  Si vous désirez les charger manuellement,
	  utilisez les commandes suivantes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload ndis</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>kldload if_ndis</code></strong></pre><p>La première commande charge le pilote d'interface
	  NDIS, la seconde charge l'interface réseau.</p><p>Contrôlez maintenant la sortie de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>
	  à la recherche d'une quelconque erreur au chargement.
	  Si tout s'est bien passé, vous devriez obtenir une
	  sortie ressemblant à ce qui suit:</p><pre class="screen">ndis0: &lt;Wireless-G PCI Adapter&gt; mem 0xf4100000-0xf4101fff irq 3 at device 8.0 on pci1
ndis0: NDIS API version: 5.0
ndis0: Ethernet address: 0a:b1:2c:d3:4e:f5
ndis0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
ndis0: 11g rates: 6Mbps 9Mbps 12Mbps 18Mbps 36Mbps 48Mbps 54Mbps</pre><p>A partir de là vous pouvez traiter le
	  périphérique <code class="filename">ndis0</code>
	  comme n'importe quelle interface réseau (par exemple
	  <code class="filename">dc0</code>).</p><p>Vous pouvez configurer le système pour charger
	  les modules NDIS au démarrage du système de la
	  même manière que pour n'importe quel autre
	  module.  Tout d'abord, copiez le module
	  généré,
	  <code class="filename">W32DRIVER.ko</code>, dans le répertoire
	  <code class="filename">/boot/modules</code>.
	  Ajoutez ensuite la ligne suivante au fichier
	  <code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">W32DRIVER_load="YES"</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76696272"></a>12.8.2. Configuration de la carte réseau</h3></div></div></div><a id="idp76696912" class="indexterm"></a><p>Une fois que le bon pilote de périphérique
	pour la carte réseau est chargé, la carte doit
	être configurée.  Comme beaucoup d'autres choses, la carte
	aura pu être configurée à
	l'installation par <span class="application">sysinstall</span>.</p><p>Pour afficher la configuration des interfaces réseaux
	de votre système, entrer la commande suivante:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig</code></strong>
dc0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 192.168.1.3 netmask 0xffffff00 broadcast 192.168.1.255
        ether 00:a0:cc:da:da:da
        media: Ethernet autoselect (100baseTX &lt;full-duplex&gt;)
        status: active
dc1: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 10.0.0.1 netmask 0xffffff00 broadcast 10.0.0.255
        ether 00:a0:cc:da:da:db
        media: Ethernet 10baseT/UTP
        status: no carrier
lp0: flags=8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; mtu 16384
        inet 127.0.0.1 netmask 0xff000000
tun0: flags=8010&lt;POINTOPOINT,MULTICAST&gt; mtu 1500</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">D'anciennes versions de FreeBSD pourront nécessiter
	  l'option <code class="option">-a</code> après <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>,
	  pour plus de détails au sujet de la syntaxe d'<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>,
	  veuillez vous référer à la page de manuel.
	  Notez également que les entrées concernant l'IPv6
	  (<code class="literal">inet6</code> etc...) ont été omises
	  dans cet exemple.</p></div><p>Dans cet exemple, les périphériques suivants
	ont été affichés:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">dc0</code>: La première
	    interface Ethernet</p></li><li class="listitem"><p><code class="filename">dc1</code>: La seconde
	    interface Ethernet</p></li><li class="listitem"><p><code class="filename">lp0</code>: L'interface du port
	    parallèle</p></li><li class="listitem"><p><code class="filename">lo0</code>: L'interface
	    &#8220;en boucle&#8221; (&#8220;loopback&#8221;)</p></li><li class="listitem"><p><code class="filename">tun0</code>: L'interface
	    &#8220;tunnel&#8221; utilisée par
	    <span class="application">ppp</span></p></li></ul></div><p>FreeBSD utilise le nom du pilote de périphérique
	suivi par un chiffre représentant l'ordre dans lequel
	la carte est détectée au démarrage du noyau pour nommer la
	carte.  Par exemple <code class="filename">sis2</code> serait la
	troisième carte sur le système utilisant le pilote de
	périphérique <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sis</span>(4)</span></a>.</p><p>Dans cet exemple, le périphérique
	<code class="filename">dc0</code> est actif et en fonctionnement.
	Les indicateurs importants sont:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="literal">UP</code> signifie que la carte est
	    configurée et prête.</p></li><li class="listitem"><p>La carte possède une adresse Internet
	    (<code class="literal">inet</code>) (dans ce cas-ci
	    <code class="systemitem">192.168.1.3</code>).</p></li><li class="listitem"><p>Elle a un masque de sous-réseau valide
	    (<code class="literal">netmask</code>;
	    <code class="systemitem">0xffffff00</code> est équivalent
	    à <code class="systemitem">255.255.255.0</code>).</p></li><li class="listitem"><p>Elle a une adresse de diffusion valide (dans ce cas-ci
	    <code class="systemitem">192.168.1.255</code>).</p></li><li class="listitem"><p>L'adresse MAC de la carte (<code class="literal">ether</code>)
	    est <code class="systemitem">00:a0:cc:da:da:da</code></p></li><li class="listitem"><p>La sélection du média est sur le mode
	    d'autosélection (<code class="literal">media: Ethernet autoselect
	    (100baseTX &lt;full-duplex&gt;)</code>).  Nous voyons
	    que <code class="filename">dc1</code> a été configurée
	    pour utiliser un matériel de type
	    <code class="literal">10baseT/UTP</code>.  Pour plus d'information
	    sur le type de matériel disponible pour un pilote de
	    périphérique, référez-vous à
	    sa page de manuel.</p></li><li class="listitem"><p>La liaison (<code class="literal">status</code>)
	    est <code class="literal">active</code>, i.e. la porteuse est
	    détectée.  Pour <code class="filename">dc1</code>, nous lisons
	    <code class="literal">status: no carrier</code>.  Cela est normal
	    lorsqu'aucun câble n'est branché à
	    la carte.</p></li></ol></div><p>Si le résultat de la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> est
	similaire à:</p><pre class="screen">dc0: flags=8843&lt;BROADCAST,SIMPLEX,MULTICAST&gt; mtu 1500
	        ether 00:a0:cc:da:da:da</pre><p>cela indiquerait que la carte n'a pas été
	configurée.</p><p>Pour configurer votre carte, vous avez besoin des
	privilèges de l'utilisateur <code class="systemitem">root</code>.
	La configuration de la carte réseau peut être
	faite à partir de la ligne de commande avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>
	mais vous aurez à répéter cette
	opération à chaque redémarrage du système.
	Le fichier <code class="filename">/etc/rc.conf</code> est l'endroit où
	ajouter la configuration de la carte réseau.</p><p>Ouvrez le fichier <code class="filename">/etc/rc.conf</code>
	dans votre éditeur favori.  Vous devez ajouter une ligne
	pour chaque carte réseau présente sur le système, par exemple
	dans notre cas, nous avons ajouté ces lignes:</p><pre class="programlisting">ifconfig_dc0="inet 192.168.1.3 netmask 255.255.255.0"
ifconfig_dc1="inet 10.0.0.1 netmask 255.255.255.0 media 10baseT/UTP"</pre><p>Vous devez remplacer <code class="filename">dc0</code>,
	<code class="filename">dc1</code>, et ainsi de suite, avec
	le périphérique correspondant pour vos cartes, et les adresses
	avec celles désirées.  Vous devriez lire les pages de manuel
	du pilote de périphérique et d'<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> pour
	plus de détails sur les options autorisées et
	également la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> pour plus
	d'information sur la syntaxe de
	<code class="filename">/etc/rc.conf</code>.</p><p>Si vous avez configuré le réseau à
	l'installation, des lignes concernant la/les carte(s)
	réseau pourront être déjà présentes.
	Contrôler à deux fois le fichier
	<code class="filename">/etc/rc.conf</code> avant d'y ajouter des
	lignes.</p><p>Vous devrez également éditer le fichier
	<code class="filename">/etc/hosts</code> pour ajouter les noms et les
	adresses IP des diverses machines du réseau local, si elles
	ne sont pas déjà présentes.  Pour plus
	d'information référez-vous à la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts</span>(5)</span></a>
	et au fichier
	<code class="filename">/usr/share/examples/etc/hosts</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76744528"></a>12.8.3. Test et dépannage</h3></div></div></div><p>Une fois les modifications nécessaires du fichier
	<code class="filename">/etc/rc.conf</code> effectuées, vous
	devrez redémarrer votre système.  Cela
	permettra la prise en compte de la ou les modifications
	au niveau des interfaces, et permettra de vérifier
	que le système redémarre sans erreur de
	configuration.</p><p>Une fois que le système a été
	redémarré, vous devrez tester les interfaces
	réseau.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76746320"></a>12.8.3.1. Tester la carte Ethernet</h4></div></div></div><a id="idp76746960" class="indexterm"></a><p>Pour vérifier qu'une carte Ethernet est
	  configurée correctement, vous devez essayer deux choses.
	  Premièrement, &#8220;pinguer&#8221; l'interface, puis une
	  autre machine sur le réseau local.</p><p>Tout d'abord testons l'interface:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ping -c5 192.168.1.3</code></strong>
PING 192.168.1.3 (192.168.1.3): 56 data bytes
64 bytes from 192.168.1.3: icmp_seq=0 ttl=64 time=0.082 ms
64 bytes from 192.168.1.3: icmp_seq=1 ttl=64 time=0.074 ms
64 bytes from 192.168.1.3: icmp_seq=2 ttl=64 time=0.076 ms
64 bytes from 192.168.1.3: icmp_seq=3 ttl=64 time=0.108 ms
64 bytes from 192.168.1.3: icmp_seq=4 ttl=64 time=0.076 ms

--- 192.168.1.3 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.074/0.083/0.108/0.013 ms</pre><p>Nous devons maintenant &#8220;pinguer&#8221; une
	  autre machine sur le réseau:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ping -c5 192.168.1.2</code></strong>
PING 192.168.1.2 (192.168.1.2): 56 data bytes
64 bytes from 192.168.1.2: icmp_seq=0 ttl=64 time=0.726 ms
64 bytes from 192.168.1.2: icmp_seq=1 ttl=64 time=0.766 ms
64 bytes from 192.168.1.2: icmp_seq=2 ttl=64 time=0.700 ms
64 bytes from 192.168.1.2: icmp_seq=3 ttl=64 time=0.747 ms
64 bytes from 192.168.1.2: icmp_seq=4 ttl=64 time=0.704 ms

--- 192.168.1.2 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.700/0.729/0.766/0.025 ms</pre><p>Vous pourrez utiliser le noms de la machine à
	  la place de <code class="systemitem">192.168.1.2</code>
	  si vous avez configuré le fichier
	  <code class="filename">/etc/hosts</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76757072"></a>12.8.3.2. Dépannage</h4></div></div></div><a id="idp76757712" class="indexterm"></a><p>Le dépannage de matériels ou de logiciels
	est toujours une tâche relativement pénible, mais
	qui peut être rendue plus aisée en
	vérifiant en premier lieu certaines choses
	élémentaires.  Votre câble réseau
	est-il branché?  Avez-vous correctement
	configuré les services réseau?  Le coupe-feu
	est-il bien configuré?  Est-ce que la carte
	réseau est supportée par FreeBSD?  Consultez
	toujours les notes concernant le matériel avant
	d'envoyer un rapport de bogue.  Mettez à jour votre
	version de FreeBSD vers la dernière version STABLE.
	Consultez les archives des listes de diffusion, et faites
	même des recherches sur l'Internet.</p><p>Si la carte fonctionne mais les performances sont
	mauvaises, une lecture de la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tuning&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">tuning</span>(7)</span></a>
	peut valoir la peine.  Vous pouvez également
	vérifier la configuration du réseau puisque des
	paramètres réseau incorrects peuvent donner lieu
	à des connexions lentes.</p><p>Certains utilisateurs peuvent voir apparaître un ou
	deux messages <span class="errorname">device timeout</span>, ce qui
	est normal pour certaines cartes.  Si ces messages se
	multiplient, assurez-vous que la carte n'est pas en conflit
	avec un autre périphérique.  Contrôlez
	à deux fois les câbles de connexion.
	Peut-être que vous avez juste besoin d'une autre
	carte.</p><p>Parfois, des utilisateurs sont confrontés à
	des messages d'erreur <span class="errorname">watchdog timeout</span>.
	La première chose à faire dans ce cas est de
	vérifier votre câble réseau.  De
	nombreuses cartes demandent un slot PCI supportant le
	<span class="quote">« <span class="quote">Bus Mastering</span> »</span>.  Sur certaines cartes
	mère anciennes, seul un slot PCI le permet (la plupart
	du temps le slot 0).  Consultez la documentation de la carte
	réseau et de la carte mère pour
	déterminer si cela peut être à l'origine
	du problème.</p><p>Les messages <span class="errorname">No route to host</span>
	surviennent si le système est incapable de router un
	paquet vers la machine de destination.  Cela peut arriver s'il
	n'y a pas de route par défaut de définie, ou si
	le câble réseau est débranché.
	Vérifiez la sortie de la commande <code class="command">netstat
	-nr</code> et assurez-vous qu'il y a une route valide en
	direction de la machine que vous essayez d'atteindre.  Si ce
	n'est pas le cas, lisez la <a class="xref" href="advanced-networking.html" title="Chapitre 31. Administration réseau avancée">Chapitre 31, <em>Administration réseau avancée</em></a>.</p><p>Les messages d'erreur <span class="errorname">ping: sendto: Permission
	denied</span> sont souvent dus à un coupe-feu mal
	configuré.  Si <code class="command">ipfw</code> est
	activé dans le noyau mais qu'aucune règle n'a
	été définie, alors la politique par
	défaut est de refuser tout trafic, même les
	requêtes <span class="quote">« <span class="quote">ping</span> »</span>!  Lisez <a class="xref" href="firewalls.html" title="Chapitre 30. Firewalls ** Traduction en Cours **">Chapitre 30, <em>Firewalls ** Traduction en Cours **</em></a> pour plus d'informations.</p><p>Parfois les performances de la carte ne sont pas bonnes,
	ou en dessous de la moyenne.  Dans ce cas il est
	recommandé de passer la sélection du
	média du mode <code class="literal">autoselect</code> au mode
	adéquat.  Alors que cela fonctionne
	généralement pour la plupart du matériel,
	il se peut que cela ne résolve pas le problème
	pour tout de monde.  Encore une fois, contrôlez les
	paramétrages réseau et consultez la page de
	manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tuning&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">tuning</span>(7)</span></a>.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configtuning-rcd.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="configtuning-virtual-hosts.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">12.7. Utilisation du système rc sous FreeBSD </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 12.9. Hôtes virtuels</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>