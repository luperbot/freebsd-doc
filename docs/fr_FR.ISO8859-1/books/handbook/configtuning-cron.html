<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>12.6. Configuration de l'utilitaire cron</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuel FreeBSD" /><link rel="up" href="config-tuning.html" title="Chapitre 12. Configuration et optimisation" /><link rel="prev" href="configtuning-starting-services.html" title="12.5. Démarrer des services" /><link rel="next" href="configtuning-rcd.html" title="12.7. Utilisation du système rc sous FreeBSD" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.6. Configuration de l'utilitaire
      <code class="command">cron</code></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configtuning-starting-services.html">Précédent</a> </td><th width="60%" align="center">Chapitre 12. Configuration et optimisation</th><td width="20%" align="right"> <a accesskey="n" href="configtuning-rcd.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-cron"></a>12.6. Configuration de l'utilitaire
      <code class="command">cron</code></h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp76514768" class="indexterm"></a><p>Un des utilitaires les plus importants de FreeBSD est
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>.  L'utilitaire <code class="command">cron</code> tourne en
      arrière plan et contrôle constamment le fichier
      <code class="filename">/etc/crontab</code>.  L'utilitaire
      <code class="command">cron</code> consulte également le
      répertoire <code class="filename">/var/cron/tabs</code>, à la
      recherche de nouveaux fichiers <code class="filename">crontab</code>.
      Ces fichiers <code class="filename">crontab</code> conservent les
      informations sur les tâches que <code class="command">cron</code>
      est censé exécuter à des moments
      donnés.</p><p>L'utilitaire <code class="command">cron</code> utilise deux types
      différents de fichiers de configuration, le fichier
      <code class="filename">crontab</code> système et les
      <code class="filename">crontab</code>s des utilisateurs.  La seule
      différence entre ces deux formats est le sixième
      champ.  Dans le fichier <code class="filename">crontab</code>
      système, le sixième champ est le nom de
      l'utilisateur sous lequel doit être exécutée
      la commande.  Cela donne la possibilité au fichier
      <code class="filename">crontab</code> système d'exécuter les
      commandes sous n'importe quel utilisateur.  Dans le fichier
      <code class="filename">crontab</code> d'un utilisateur, le sixième
      champ est la commande a exécuter et toutes les commandes
      sont exécutées sous l'utilisateur qui a
      créé le fichier <code class="filename">crontab</code>; c'est
      un aspect sécurité important.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les fichiers <code class="filename">crontab</code> utilisateur
	permettent aux utilisateurs de planifier l'exécution de
	tâches sans avoir besoin des privilèges du
	super-utilisateur <code class="systemitem">root</code>.  Les commandes
	contenues dans le fichier <code class="filename">crontab</code> d'un
	utilisateur s'exécutent avec les privilèges de
	l'utilisateur auquel appartient ce fichier.</p><p xmlns="http://www.w3.org/1999/xhtml">Le super-utilisateur <code class="systemitem">root</code> peut
	posséder un fichier <code class="filename">crontab</code>
	utilisateur comme tout autre utilisateur.  Ce fichier est
	différent de <code class="filename">/etc/crontab</code> (le
	<code class="filename">crontab</code> système).  En raison de
	l'existence du fichier <code class="filename">crontab</code>
	système, il n'y a généralement pas besoin
	d'un fichier <code class="filename">crontab</code> utilisateur pour
	<code class="systemitem">root</code>.</p></div><p>Examinons le fichier
      <code class="filename">/etc/crontab</code> (fichier
      <code class="filename">crontab</code> système):</p><pre class="programlisting"># /etc/crontab - root's crontab for FreeBSD
#
# $FreeBSD: src/etc/crontab,v 1.32 2002/11/22 16:13:39 tom Exp $
# <a id="co-comments"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
#
SHELL=/bin/sh
PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin <a id="co-env"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
HOME=/var/log
#
#
#minute	heure	date	mois	jour	utilisateur	commande <a id="co-field-descr"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
#
#
*/5	*	*	*	*	root	/usr/libexec/atrun <a id="co-main"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-comments"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Comme pour la plupart des fichiers de configuration de
	  FreeBSD, le caractère <code class="literal">#</code> indique un
	  commentaire.  Un commentaire peut être ajouté
	  dans le fichier comme rappel de ce que fait une action bien
	  précise et pourquoi elle est effectuée.  Les
	  commentaires ne peuvent être situés sur la
	  même ligne qu'une commande ou sinon ils seront
	  interprétés comme faisant partie de la commande;
	  ils doivent se trouver sur une nouvelle ligne.  Les lignes
	  vides sont ignorées.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-env"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Tout d'abord, les variables d'environnement doivent
	  être définies.  Le caractère égal
	  (<code class="literal">=</code>) est utilisé pour définir
	  tout paramètre concernant l'environnement, comme dans
	  notre exemple où il a été utilisé
	  pour les variables <code class="envar">SHELL</code>, <code class="envar">PATH</code>,
	  et <code class="envar">HOME</code>.  Si la ligne concernant
	  l'interpréteur de commande est omise,
	  <code class="command">cron</code> utilisera celui par défaut, qui
	  est <code class="command">sh</code>.  Si la variable <code class="envar">PATH</code>
	  est omise, il n'y aura pas de valeur par défaut
	  utilisée et l'emplacement des fichiers devra être
	  absolu.  Si <code class="envar">HOME</code> est omise,
	  <code class="command">cron</code> utilisera le répertoire
	  personnel de l'utilisateur qui l'invoque.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-field-descr"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Cette ligne définie un total de sept champs.
	  Sont listés ici les valeurs <code class="literal">minute</code>,
	  <code class="literal">heure</code>, <code class="literal">date</code>,
	  <code class="literal">mois</code>, <code class="literal">jour</code>,
	  <code class="literal">utilisateur</code>, et
	  <code class="literal">commande</code>.  Ces champs sont relativement
	  explicites.  <code class="literal">minute</code> représente
	  l'heure en minute à laquelle la commande sera
	  exécutée.  L'option <code class="literal">heure</code> est
	  semblable à l'option <code class="literal">minute</code>, mais en
	  heures.  Le champ <code class="literal">date</code> précise le
	  jour dans le mois.  <code class="literal">mois</code> est similaire
	  à <code class="literal">heure</code> et <code class="literal">minute</code>
	  mais désigne le mois.  L'option <code class="literal">jour</code>
	  représente le jour de la semaine.  Tous ces champs
	  doivent être des valeurs numériques, et respecter
	  un format horaire de vingt quatre heures.  Le champ
	  <code class="literal">utilisateur</code> est spécial, et n'existe
	  que dans le fichier <code class="filename">/etc/crontab</code>.  Ce
	  champ précise sous quel utilisateur sera
	  exécutée la commande.  Quand un utilisateur
	  installe son fichier <code class="filename">crontab</code>, il n'aura
	  pas cette option.  Pour finir, l'option
	  <code class="literal">commande</code> est listée.  C'est le
	  dernier champ, qui naturellement devrait désigner la
	  commande à exécuter.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-main"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Cette dernière ligne définie les valeurs
	  discutées ci-dessus.  Nous avons ici
	  <code class="literal">*/5</code> suivi de plusieurs caractères
	  <code class="literal">*</code>.  Ces caractères
	  <code class="literal">*</code> signifient &#8220;premier-dernier&#8221;,
	  et peuvent être interprétés comme voulant
	  dire à <span class="emphasis"><em>chaque</em></span> instance.  Aussi,
	  d'après cette ligne, il apparaît que la commande
	  <code class="command">atrun</code> sera invoquée par
	  l'utilisateur <code class="systemitem">root</code> toutes les cinq
	  minutes indépendamment du jour ou du mois.  Pour plus
	  d'informations sur la commande <code class="command">atrun</code>,
	  consultez la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atrun&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">atrun</span>(8)</span></a>.</p><p>N'importe quel nombre d'indicateur peut être
	  passé à ces commandes; cependant, les
	  commandes qui s'étendent sur de multiples lignes
	  doivent être &#8220;cassées&#8221; avec le
	  caractère, contre-oblique <code class="literal">\</code>, de
	  continuation de lignes.</p></td></tr></table></div><p>Ceci est la configuration de base pour chaque fichier
      <code class="filename">crontab</code>, bien qu'il y ait une
      différence dans celui présenté ici.  Le
      sixième champ, où est précisé le nom
      d'utilisateur, n'existe que dans le fichier système
      <code class="filename">/etc/crontab</code>.  Ce champ devrait être
      omis pour les fichiers <code class="filename">crontab</code>
      d'utilisateur.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="configtuning-installcrontab"></a>12.6.1. Installer un fichier crontab</h3></div></div></div><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vous ne devez pas utiliser la procédure
	  décrite ci-dessous pour éditer/installer le
	  fichier <code class="filename">crontab</code> système.  Utilisez
	  directement votre éditeur: l'utilitaire
	  <code class="command">cron</code> remarquera le changement au niveau de ce
	  fichier et utilisera immédiatement la nouvelle version.
	  Consultez <a class="link" href="../../../../doc/en_US.ISO8859-1/books/faq/admin.html#ROOT-NOT-FOUND-CRON-ERRORS" target="_top">cette
	  entrée de la FAQ</a> pour plus d'information.</p></div><p>Pour installer un fichier <code class="filename">crontab</code>
	utilisateur fraîchement rédigé, tout d'abord
	utilisez votre éditeur favori pour créer un
	fichier dans le bon format, ensuite utilisez
	l'utilitaire <code class="command">crontab</code>.  L'usage le plus
	typique est:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>crontab fichier-crontab</code></strong></pre><p>Dans cet exemple, <code class="filename">fichier-crontab</code> est
	le nom d'un fichier <code class="filename">crontab</code> qui a
	été précédemment
	créé.</p><p>Il existe également une option pour afficher les
	fichiers <code class="filename">crontab</code> installés, passez
	simplement le paramètre <code class="option">-l</code> à
	<code class="command">crontab</code> et lisez ce qui est
	affiché.</p><p>Pour les utilisateurs désirant créer leur
	fichier crontab à partir de zéro, sans utiliser
	de modèle, l'option <code class="command">crontab -e</code> est
	disponible.  Cela invoquera l'éditeur par défaut
	avec un fichier vide.  Quand le fichier est sauvegardé,
	il sera automatiquement installé par la commande
	<code class="command">crontab</code>.</p><p>Si vous désirez plus tard effacer votre
	<code class="filename">crontab</code> utilisateur complètement,
	utilisez la commande <code class="command">crontab</code> avec l'option
	<code class="option">-r</code>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configtuning-starting-services.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="configtuning-rcd.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">12.5. Démarrer des services </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 12.7. Utilisation du système rc sous FreeBSD</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>