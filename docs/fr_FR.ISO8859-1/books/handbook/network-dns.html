<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>29.6. Serveurs de noms (DNS)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuel FreeBSD" /><link rel="up" href="network-servers.html" title="Chapitre 29. Serveurs réseau" /><link rel="prev" href="network-dhcp.html" title="29.5. Configuration réseau automatique (DHCP)" /><link rel="next" href="network-apache.html" title="29.7. Serveur HTTP Apache" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">29.6. Serveurs de noms (<acronym class="acronym">DNS</acronym>)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-dhcp.html">Précédent</a> </td><th width="60%" align="center">Chapitre 29. Serveurs réseau</th><td width="20%" align="right"> <a accesskey="n" href="network-apache.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-dns"></a>29.6. Serveurs de noms (<acronym class="acronym">DNS</acronym>)</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>, <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span> et <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Daniel</span> <span class="surname">Gerzo</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85521104"></a>29.6.1. Généralités</h3></div></div></div><a id="idp85521744" class="indexterm"></a><p>FreeBSD utilise, par défaut, BIND (Berkeley Internet
	Name Domain), qui est l'implémentation la plus courante
	du protocole DNS.  Le DNS est le protocole qui effectue la
	correspondance entre noms et adresses IP, et inversement.  Par
	exemple une requête pour <code class="systemitem">www.FreeBSD.org</code> aura pour réponse
	l'adresse IP du serveur Web du projet FreeBSD, et une
	requête pour <code class="systemitem">ftp.FreeBSD.org</code> renverra l'adresse IP de
	la machine FTP correspondante.  De même, l'opposé
	est possible.  Une requête pour une adresse IP retourne
	son nom de machine.  Il n'est pas nécessaire de faire
	tourner un serveur DNS pour effectuer des requêtes DNS
	sur un système.</p><p>FreeBSD est actuellement fourni par défaut avec le
	serveur <acronym class="acronym">DNS</acronym> <acronym class="acronym">BIND</acronym>9.
	Notre installation est dotée de fonctionnalités
	étendues au niveau de la sécurité, d'une
	nouvelle organisation du système de fichiers et d'une
	configuration en environnement <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chroot</span>(8)</span></a>
	automatisée.</p><a id="idp85525712" class="indexterm"></a><p>Le DNS est coordonné sur l'Internet à
	travers un système complexe de serveurs de noms racines
	faisant autorité, de domaines de premier niveau
	(<span class="quote">« <span class="quote">Top Level Domain</span> »</span>, <acronym class="acronym">TLD</acronym>), et
	d'autres serveurs de noms de plus
	petites tailles qui hébergent, directement ou font office
	de &#8220;cache&#8221;, l'information pour des domaines
	individuels.</p><p>Actuellement, BIND est maintenu par l'Internet Software
	Consortium <code class="uri"><a class="uri" href="http://www.isc.org/" target="_top">http://www.isc.org/</a></code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85528400"></a>29.6.2. Terminologie</h3></div></div></div><p>Pour comprendre ce document, certains termes relatifs
	au DNS doivent être maîtrisés.</p><a id="idp85529552" class="indexterm"></a><a id="idp85530064" class="indexterm"></a><a id="idp85530576" class="indexterm"></a><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Terme</th><th>Definition</th></tr></thead><tbody><tr><td>&#8220;Forward&#8220; DNS</td><td>Correspondance noms de machine vers adresses
		IP.</td></tr><tr><td>Origine</td><td>Fait référence au domaine couvert
		par un fichier de zone particulier.</td></tr><tr><td><span class="application">named</span>, BIND, serveur
		de noms</td><td>Noms courants pour le serveur de noms BIND de
		FreeBSD</td></tr><tr><td>Resolveur</td><td>Un processus système par
		l'intermédiaire duquel une machine contacte un
		serveur de noms pour obtenir des informations sur une
		zone.</td></tr><tr><td>DNS inverse</td><td>C'est l'inverse du DNS &#8220;classique&#8221;
		(&#8220;Forward&#8220; DNS).  C'est la correspondance
		adresses IP vers noms de machine.</td></tr><tr><td>Zone racine</td><td>Début de la hiérarchie de la zone
		Internet.  Toutes les zones sont rattachées
		à la zone racine, de la même
		manière qu'un système de fichier est
		rattaché au répertoire racine.</td></tr><tr><td>Zone</td><td>Un domaine individuel, un sous-domaine, ou une
		partie des noms administrés par un même
		serveur faisant autorité.</td></tr></tbody></table></div><a id="idp85551440" class="indexterm"></a><p>Exemples de zones:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="systemitem">.</code> est la zone racine</p></li><li class="listitem"><p><code class="systemitem">org.</code> est un domaine de premier niveau
	    (<acronym class="acronym">TLD</acronym>) sous la
	    zone racine</p></li><li class="listitem"><p><code class="systemitem">example.org.</code> est une
	    zone sous le <acronym class="acronym">TLD</acronym>
	    <code class="systemitem">org.</code></p></li><li class="listitem"><p>
	    <code class="systemitem">1.168.192.in-addr.arpa</code> est une zone faisant
	    référence à toutes les adresses IP
	    qui appartiennent l'espace d'adresse <code class="systemitem">192.168.1.*</code>.</p></li></ul></div><p>Comme on peut le remarquer, la partie la plus
	significative d'un nom de machine est à sa gauche.  Par
	exemple, <code class="systemitem">example.org.</code> est
	plus spécifique que <code class="systemitem">org.</code>, comme
	<code class="systemitem">org.</code> est à son tour plus
	spécifique que la zone racine.  La constitution de
	chaque partie d'un nom de machine est proche de celle d'un
	système de fichiers: le répertoire <code class="filename">/dev</code> se trouve sous la racine, et
	ainsi de suite.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85561552"></a>29.6.3. Les raisons de faire tourner un serveur de noms</h3></div></div></div><p>Les serveurs de noms se présentent
	généralement sous deux formes: un serveur de
	noms faisant autorité, et un serveur de noms
	cache.</p><p>Un serveur de noms faisant autorité est
	nécessaire quand:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>on désire fournir des informations DNS au reste
	    du monde, être le serveur faisant autorité lors
	    des réponses aux requêtes.</p></li><li class="listitem"><p>un domaine, comme par exemple
	    <code class="systemitem">example.org</code>, est
	    enregistré et des adresses IP doivent être
	    assignées à des noms de machine appartenant
	    à ce domaine.</p></li><li class="listitem"><p>un bloc d'adresses IP nécessite des
	    entrées DNS inverses (IP vers nom de machine).</p></li><li class="listitem"><p>un second serveur de noms ou de secours, appelé esclave,
	    qui répondra aux requêtes.</p></li></ul></div><p>Un serveur de noms cache est nécessaire
	quand:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>un serveur de noms local peut faire office de cache
	    et répondre plus rapidement que l'interrogation
	    d'un serveur de noms extérieur.</p></li></ul></div><p>Quand on émet des requêtes pour <code class="systemitem">www.FreeBSD.org</code>, le résolveur
	interroge généralement le serveur de noms du
	fournisseur d'accès, et récupère la
	réponse.  Avec un serveur DNS cache local, la
	requête doit être effectuée qu'une seule
	fois vers le monde extérieur par le serveur DNS cache.
	Chaque interrogation suivante n'aura pas à être
	transmise en dehors du réseau local, puisque
	l'information est désormais disponible localement dans
	le cache.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85569744"></a>29.6.4. Comment cela fonctionne-t-il?</h3></div></div></div><p>Sous FreeBSD le &#8220;daemon&#8221; BIND est appelé
	<span class="application">named</span> pour des raisons
	évidentes.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Fichier</th><th>Description</th></tr></thead><tbody><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a></td><td>le &#8220;daemon&#8221; BIND</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rndc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rndc</span>(8)</span></a></td><td>le programme de contrôle du
		serveur de noms</td></tr><tr><td><code class="filename">/etc/namedb</code></td><td>répertoire où se trouvent les
		informations sur les zones de BIND</td></tr><tr><td><code class="filename">/etc/namedb/named.conf</code></td><td>le fichier de configuration du
		&#8220;daemon&#8221;</td></tr></tbody></table></div><p>En fonction de la manière dont est
	configurée sur le serveur une zone donnée, les
	fichiers relatifs à cette zone pourront être
	trouvés dans les sous-répertoires <code class="filename">master</code>, <code class="filename">slave</code>, ou <code class="filename">dynamic</code> du répertoire
	<code class="filename">/etc/namedb</code>.  Ces
	fichiers contiennent les informations <acronym class="acronym">DNS</acronym>
	qui seront données par le serveur de noms en
	réponse aux requêtes.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85636048"></a>29.6.5. Lancer BIND</h3></div></div></div><a id="idp85636688" class="indexterm"></a><p>Puisque BIND est installé par défaut, sa
	configuration est relativement simple.</p><p>La configuration par défaut de
	<span class="application">named</span> est un serveur de noms
	résolveur basique, tournant dans un environnement
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chroot</span>(8)</span></a>.  Pour lancer le serveur avec cette
	configuration, utilisez la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/named forcestart</code></strong></pre><p>Pour s'assurer que le &#8220;daemon&#8221;
	<span class="application">named</span> est lancé à chaque
	démarrage, ajoutez la ligne suivante dans
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">named_enable="YES"</pre><p>Il existe, bien évidemment, de nombreuses options de
	configuration pour <code class="filename">/etc/namedb/named.conf</code>
	qui dépassent le cadre de ce document.  Si vous êtes intéressé
	par les options de démarrage de
	<span class="application">named</span> sous FreeBSD, jetez un oeil aux
	paramètres
	<code class="literal">named_*</code> dans
	<code class="filename">/etc/defaults/rc.conf</code> et consultez la
	page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>.  La section <a class="xref" href="configtuning-rcd.html" title="12.7. Utilisation du système rc sous FreeBSD">Section 12.7, « Utilisation du système rc sous FreeBSD »</a> constitue également une bonne
	lecture.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85645520"></a>29.6.6. Fichiers de configuration</h3></div></div></div><a id="idp85646160" class="indexterm"></a><p>Les fichiers de configuration pour
	<span class="application">named</span> se trouvent dans le
	répertoire <code class="filename">/etc/namedb</code> et devront être
	adaptés avant toute utilisation, à moins que
	l'on ait besoin que d'un simple résolveur.  C'est dans
	ce répertoire où la majeure partie de la
	configuration se fera.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85648592"></a>29.6.6.1. Utilisation de
	  <code class="command">make-localhost</code></h4></div></div></div><p>Pour configurer une zone maître, il faut se rendre
	  dans le répertoire <code class="filename">/etc/namedb/</code> et exécuter
	  la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sh make-localhost</code></strong></pre><p>Si tout s'est bien passé, un nouveau fichier
	  devrait apparaître dans le sous-répertoire
	  <code class="filename">master</code>.  Les noms de
	  fichiers devraient être
	  <code class="filename">localhost.rev</code> pour le nom de domaine
	  local et <code class="filename">localhost-v6.rev</code> pour les
	  configurations <acronym class="acronym">IPv6</acronym>.  Tout comme le
	  fichier de configuration par défaut, les informations
	  nécessaires seront présentes dans le fichier
	  <code class="filename">named.conf</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85653584"></a>29.6.6.2. <code class="filename">/etc/namedb/named.conf</code></h4></div></div></div><pre class="programlisting">// $FreeBSD$
//
// Reportez-vous aux pages de manuel named.conf(5) et named(8), et à
// la documentation se trouvant dans /usr/share/doc/bind9 pour plus de
// détails.
//
// Si vous devez configurer un serveur primaire, assurez-vous d'avoir
// compris les détails épineux du fonctionnement du DNS.  Même avec de
// simples erreurs, vous pouvez rompre la connexion entre les parties
// affectées, ou causer un important et inutile trafic Internet.

options {
        directory "/etc/namedb";
	pid-file	"/var/run/named/pid";
	dump-file	"/var/dump/named_dump.db";
	statistics-file	"/var/stats/named.stats";

// Si named est utilisé uniquement en tant que résolveur local, ceci
// est un bon réglage par défaut.  Pour un named qui doit être
// accessible à l'ensemble du réseau, commentez cette option, précisez
// l'adresse IP correcte, ou supprimez cette option.
	listen-on	{ 127.0.0.1; };

// Si l'IPv6 est activé sur le système, décommentez cette option pour
// une utilisation en résolveur local.  Pour donner l'accès au réseau,
// précisez une adresse IPv6, ou le mot-clé "any".
//	listen-on-v6	{ ::1; };

// En plus de la clause "forwarders", vous pouvez forcer votre serveur
// de noms à ne jamais être à l'origine de
// requêtes, mais plutôt faire suivre les demandes en
// activant la ligne suivante:
//
//      forward only;

// Si vous avez accès à un serveur de noms au niveau de
// votre fournisseur d'accès, ajoutez ici son adresse IP, et
// activez la ligne ci-dessous.  Cela vous permettra de
// bénéficier de son cache, réduisant ainsi le
// trafic Internet.
/*
        forwarders {
                127.0.0.1;
        };
*/</pre><p>Comme les commentaires le précisent, pour
	  bénéficier d'un cache en amont de votre
	  connexion, le paramètre <code class="literal">forwarders</code>
	  peut être activé.  Dans des circonstances
	  normales, un serveur de noms interrogera de façon
	  récursive certains serveurs de noms jusqu'à
	  obtenir la réponse à sa requête.  Avec
	  ce paramètre activé, votre serveur interrogera
	  le serveur de noms en amont (ou le serveur de noms fourni)
	  en premier, en bénéficiant alors de son cache.
	  Si le serveur en question gère beaucoup de trafic, et
	  est un serveur rapide, activer cette option peut en valoir
	  la peine.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="systemitem">127.0.0.1</code>
	  ne fonctionnera <span class="emphasis"><em>pas</em></span> ici.  Remplacez
	  cette adresse IP par un serveur de noms en amont de votre
	  connexion.</p></div><pre class="programlisting">        /*
         * S'il y a un coupe-feu entre vous et les serveurs de noms
         * avec lesquels vous voulez communiquer, vous aurez
         * peut-être besoin de décommenter la directive
         * query-source ci-dessous.  Les versions
         * précédentes de BIND lançaient des
         * requêtes à partir du port 53, mais depuis la
         * version 8, BIND utilise
         * par défaut un port pseudo-aléatoire quelconque non
         * réservé.
         */
        // query-source address * port 53;
};

// Si vous activez un serveur de noms local, n'oubliez pas d'entrer
// 127.0.0.1 dans votre fichier /etc/resolv.conf de sorte que ce
// serveur soit interrogé le premier.  Assurez-vous
// également de l'activer dans /etc/rc.conf.

zone "." {
        type hint;
        file "named.root";
};

zone "0.0.127.IN-ADDR.ARPA" {
        type master;
	file "master/localhost.rev";
};

// RFC 3152
zone "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.IP6.ARPA" {
	type master;
	file "master/localhost-v6.rev";
};

// NB: N'utilisez pas les adresses IP ci-dessous, elles sont factices,
// et ne servent que pour des besoins de
// démonstration/documentation!
//
// Exemple d'entrées de configuration de zone esclave.
// Il peut être pratique de devenir serveur esclave pour la
// zone à laquelle appartient votre domaine.  Demandez à
// votre administrateur réseau l'adresse IP du serveur primaire
// responsable de la zone.
//
// N'oubliez jamais d'inclure la résolution de la zone inverse
// (IN-ADDR.ARPA)!
// (Ce sont les premiers octets de l'adresse IP, en ordre inverse,
// auxquels ont a ajouté ".IN-ADDR.ARPA".)
//
// Avant de commencer à configurer une zone primaire, il faut
// être sûr que vous avez parfaitement compris comment le
// DNS et BIND fonctionnent.  Il apparaît parfois des pièges
// peu évidents à saisir.  En comparaison, configurer une
// zone esclave est plus simple.
//
// NB: N'activez pas aveuglément les exemples ci-dessous. :-)
// Utilisez des noms et des adresses réelles.

/* Un exemple de zone maître
zone "example.net" {
	type master;
	file "master/example.net";
};
*/

/* Un exemple de zone dynamique
key "exampleorgkey" {
	algorithm hmac-md5;
	secret "sf87HJqjkqh8ac87a02lla==";
};
zone "example.org" {
	type master;
	allow-update {
		key "exampleorgkey";
	};
	file "dynamic/example.org";
};
*/

/* Exemple de zones esclaves directes et inverses
zone "example.com" {
	type slave;
	file "slave/example.com";
	masters {
		192.168.1.1;
	};
};
zone "1.168.192.in-addr.arpa" {
	type slave;
	file "slave/1.168.192.in-addr.arpa";
	masters {
		192.168.1.1;
	};
};
*/</pre><p>Dans <code class="filename">named.conf</code>, ce sont des
	  exemples d'entrées d'un serveur esclave.</p><p>Pour chaque nouvelle zone gérée, une
	  nouvelle entrée de zone doit être
	  ajoutée au fichier
	  <code class="filename">named.conf</code>.</p><p>Par exemple, l'entrée de zone la plus simple
	  possible pour <code class="systemitem">example.org</code>
	  serait:</p><pre class="programlisting">zone "example.org" {
	type master;
	file "master/example.org";
};</pre><p>Ce sera un serveur maître pour la zone, comme
	  indiqué par l'option <code class="option">type</code>,
	  concervant ses informations de zone dans le fichier
	  <code class="filename">/etc/namedb/master/example.org</code> comme
	  précisé par l'option
	  <code class="option">file</code>.</p><pre class="programlisting">zone "example.org" {
	type slave;
	file "slave/example.org";
};</pre><p>Dans le cas d'un esclave, les informations concernant la
	  zone seront transférées à partir du
	  serveur maître pour la zone en question, et
	  sauvegardées dans le fichier indiqué.  Si ou
	  lorsque le serveur maître tombe ou est inaccessible,
	  le serveur esclave disposera des informations de la zone
	  transférée et sera capable de les
	  diffuser.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85667024"></a>29.6.6.3. Fichiers de zone</h4></div></div></div><a id="idp85667664" class="indexterm"></a><p>Un exemple de fichier de zone maître pour <code class="systemitem">example.org</code> (défini dans
	  <code class="filename">/etc/namedb/master/example.org</code>) suit:</p><pre class="programlisting">$TTL 3600        ; 1 hour
example.org.    IN      SOA      ns1.example.org. admin.example.org. (
                                2006051501      ; Serial
                                10800           ; Refresh
                                3600            ; Retry
                                604800          ; Expire
                                86400           ; Minimum TTL
                        )

; Serveurs DNS
                IN      NS      ns1.example.org.
                IN      NS      ns2.example.org.

; Enregistrements MX
                IN      MX 10   mx.example.org.
                IN      MX 20   mail.example.org.

                IN      A       192.168.1.1

; Noms de machine
localhost       IN      A       127.0.0.1
ns1             IN      A       192.168.1.2
ns2             IN      A       192.168.1.3
mx              IN      A       192.168.1.4
mail            IN      A       192.168.1.5

; Alias
www             IN      CNAME   @</pre><p>Notez que chaque nom de machine se terminant par un
	  &#8220;.&#8221; est un nom de machine complet, alors que
	  tout ce qui se termine pas par un &#8220;.&#8221; est
	  référencé par rapport à une
	  origine.  Par exemple, <code class="literal">www</code> sera traduit
	  en
	  <code class="literal">www.origine</code>.
	  Dans notre fichier de zone fictif, notre origine est
	  <code class="systemitem">example.org.</code>, donc <code class="literal">www</code>
	  sera traduit en <code class="systemitem">www.example.org.</code> </p><p>Le format d'un fichier de zone est le suivant:</p><pre class="programlisting">nom-enregistrement      IN type-enregistrement   valeur</pre><a id="idp85681872" class="indexterm"></a><p>Les enregistrements DNS les plus couramment
	  utilisés:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">SOA</span></dt><dd><p>début des données de
		zone</p></dd><dt><span class="term">NS</span></dt><dd><p>serveur de noms faisant
		autorité</p></dd><dt><span class="term">A</span></dt><dd><p>adresse d'une machine</p></dd><dt><span class="term">CNAME</span></dt><dd><p>alias d'un nom de machine</p></dd><dt><span class="term">MX</span></dt><dd><p>serveur de messagerie recevant le courrier
		pour le domaine</p></dd><dt><span class="term">PTR</span></dt><dd><p>un pointeur sur un nom de domaine
		(utilisé dans le DNS inverse)</p></dd></dl></div><pre class="programlisting">
example.org. IN SOA ns1.example.org. admin.example.org. (
                        2006051501      ; Serial
                        10800           ; Refresh after 3 hours
                        3600            ; Retry after 1 hour
                        604800          ; Expire after 1 week
                        86400 )         ; Minimum TTL of 1 day</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="systemitem">example.org.</code></span></dt><dd><p>le nom de domaine, également l'origine pour
		ce fichier de zone.</p></dd><dt><span class="term"><code class="systemitem">ns1.example.org.</code></span></dt><dd><p>le serveur de noms primaire/faisant autorité
		pour cette zone.</p></dd><dt><span class="term"><code class="literal">admin.example.org.</code></span></dt><dd><p>la personne responsable pour cette zone avec
		le caractère &#8220;@&#8221; remplacé.
		(<code class="email">&lt;<a xmlns="" class="email" href="mailto:admin@example.org">admin@example.org</a>&gt;</code> devient
		<code class="literal">admin.example.org</code>)</p></dd><dt><span class="term"><code class="literal">2006051501</code></span></dt><dd><p>le numéro de série de ce fichier.
		Celui-ci doit être incrémenté
		à chaque modification du fichier de zone.  De nos
		jours, de nombreux administrateurs
		préfèrent un format du type
		<code class="literal">aaaammjjrr</code> pour le numéro de
		série.  <code class="literal">2006051501</code>
		signifierait dernière modification le 15/05/2006,
		le <code class="literal">01</code> indiquant que c'est la seconde
		fois que ce fichier a été
		révisé ce jour.  Le numéro de
		série est important puisqu'il indique aux
		serveurs de noms esclaves pour la zone une modification
		de celle-ci.</p></dd></dl></div><pre class="programlisting">
       IN NS           ns1.example.org.</pre><p>C'est une entrée de type NS.  Tous les serveurs
	  de noms qui doivent faire autorité pour la zone
	  devront inclure une de ces entrées.</p><pre class="programlisting">
localhost       IN      A       127.0.0.1
ns1             IN      A       192.168.1.2
ns2             IN      A       192.168.1.3
mx              IN      A       192.168.1.4
mail            IN      A       192.168.1.5</pre><p>Un enregistrement de type A indique des noms de machine.
	  Comme présenté ci-dessus <code class="systemitem">ns1.example.org</code> sera résolu en
	  <code class="systemitem">192.168.1.2</code>.</p><pre class="programlisting">
                IN      A       192.168.1.1</pre><p>Cette ligne assigne l'adresse IP <code class="systemitem">192.168.1.1</code> à l'origine, dans
	  cet exemple <code class="systemitem">example.org</code>.</p><pre class="programlisting">
www             IN CNAME        @</pre><p>L'enregistrement de type CNAME est
	  généralement utilisé pour créer
	  des alias à une machine.  Dans l'exemple,
	  <code class="systemitem">www</code> est un alias de la machine
	  connue sous le nom <code class="systemitem">localhost.example.org</code> (<code class="systemitem">127.0.0.1</code>).  Les enregistrements CNAME
	  peuvent être utilisés pour fournir des alias
	  à des noms de machines, ou permettre la rotation
	  (&#8220;round robin&#8221;) d'un nom de machine entre
	  plusieurs machines.</p><a id="idp85720912" class="indexterm"></a><pre class="programlisting">
               IN MX   10      mail.example.org.</pre><p>L'enregistrement MX indique quels serveurs de messagerie
	  sont responsables de la gestion du courrier entrant pour la
	  zone.  <code class="systemitem">mail.example.org</code> est le
	  nom de machine du serveur de messagerie, et 10 étant
	  la priorité du serveur de messagerie.</p><p>On peut avoir plusieurs serveurs de messagerie, avec des
	  priorités de 10, 20, etc.  Un serveur de messagerie
	  tentant de transmettre du courrier au domaine <code class="systemitem">example.org</code> essaiera en premier
	  le MX avec la plus haute priorité (l'enregistrement
	  avec le numéro de priorité le plus bas), puis
	  celui venant
	  en second, etc, jusqu'à ce que le courrier puisse
	  être correctement délivré.</p><p>Pour les fichiers de zone in-addr.arpa (DNS inverse), le
	  même format est utilisé, à l'exception
	  du fait que des entrées PTR seront utilisées
	  en place de A ou CNAME.</p><pre class="programlisting">$TTL 3600

1.168.192.in-addr.arpa. IN SOA ns1.example.org. admin.example.org. (
                        2006051501      ; Serial
                        10800           ; Refresh
                        3600            ; Retry
                        604800          ; Expire
                        3600 )          ; Minimum

        IN      NS      ns1.example.org.
        IN      NS      ns2.example.org.

1       IN      PTR     example.org.
2       IN      PTR     ns1.example.org.
3       IN      PTR     ns2.example.org.
4       IN      PTR     mx.example.org.
5       IN      PTR     mail.example.org.</pre><p>Ce fichier donne la correspondance entre adresses IP et
	  noms de machines de notre domaine fictif.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85741776"></a>29.6.7. Serveur de noms cache</h3></div></div></div><a id="idp85742416" class="indexterm"></a><p>Un serveur de noms cache est un serveur de noms qui ne
	fait autorité pour aucune zone.  Il émet
	simplement des requêtes, et se souvient du résultat
	pour une utilisation ultérieure.  Pour mettre en place un
	tel serveur, configurez le serveur de noms comme à
	l'accoutumé, en prenant bien soin de n'inclure aucune
	zone.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85744080"></a>29.6.8. Sécurité</h3></div></div></div><p>Bien que BIND soit l'implémentation la plus
	courante du DNS, le problème de la
	sécurité subsiste toujours.  De possibles
	problèmes de sécurité exploitables sont
	parfois découvert.</p><p>Bien que FreeBSD enferme automatiquement
	<span class="application">named</span> dans un environnement
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chroot</span>(8)</span></a>, il existe plusieurs autres mécanismes
	de sécurité qui pourraient aider à se
	prémunir contre de possibles attaques
	<acronym class="acronym">DNS</acronym>.</p><p>C'est une bonne idée de lire les avis de
	sécurité du <a class="link" href="http://www.cert.org/" target="_top">CERT</a> et de s'inscrire
	à la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-security-notifications" target="_top">liste de diffusion des avis de sécurité pour FreeBSD</a> pour se maintenir au
	courant des problèmes de sécurité actuels
	de l'Internet et de FreeBSD.</p><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si un problème surgit, conserver les sources
	  à jour et disposer d'une version compilée de
	  <span class="application">named</span> récente ne seront pas
	  de trop.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85754064"></a>29.6.9. Lectures supplémentaires</h3></div></div></div><p>Les pages de manuel de
	BIND/<span class="application">named</span>: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rndc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rndc</span>(8)</span></a>
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">named.conf</span>(5)</span></a>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.isc.org/products/BIND/" target="_top">Page
	    officielle ISC concernant BIND</a></p></li><li class="listitem"><p><a class="link" href="http://www.isc.org/sw/guild/bf/" target="_top">Forum officiel
	    ISC concernant BIND</a></p></li><li class="listitem"><p><a class="link" href="http://www.nominum.com/getOpenSourceResource.php?id=6" target="_top">FAQ
	    BIND</a></p></li><li class="listitem"><p><a class="link" href="http://www.oreilly.com/catalog/dns5/" target="_top">DNS
	    et BIND 5ème Edition de chez O'Reilly</a></p></li><li class="listitem"><p><a class="link" href="ftp://ftp.isi.edu/in-notes/rfc1034.txt" target="_top">RFC1034
	    - Domain Names - Concepts and Facilities</a></p></li><li class="listitem"><p><a class="link" href="ftp://ftp.isi.edu/in-notes/rfc1035.txt" target="_top">RFC1035
	    - Domain Names - Implementation and
	    Specification</a></p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-dhcp.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="network-apache.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">29.5. Configuration réseau automatique (DHCP) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 29.7. Serveur HTTP Apache</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>