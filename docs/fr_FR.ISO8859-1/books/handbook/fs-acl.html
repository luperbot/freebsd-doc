<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>15.12. Listes de contrôle d'accès au système de fichiers</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuel FreeBSD" /><link rel="up" href="security.html" title="Chapitre 15. Sécurité" /><link rel="prev" href="openssh.html" title="15.11. OpenSSH" /><link rel="next" href="security-portaudit.html" title="15.13. Surveillance des problèmes de sécurité relatifs aux programmes tierce-partie" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">15.12. Listes de contrôle d'accès au système de
      fichiers</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="openssh.html">Précédent</a> </td><th width="60%" align="center">Chapitre 15. Sécurité</th><td width="20%" align="right"> <a accesskey="n" href="security-portaudit.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="fs-acl"></a>15.12. Listes de contrôle d'accès au système de
      fichiers</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp78970192" class="indexterm"></a><p>Avec les améliorations des systèmes de fichiers
      comme les &#8220;snapshots&#8221;, FreeBSD 5.0 et versions
      suivantes offrent une nouveauté en matière de
      sécurité: les listes de contrôle d'accès
      au système de fichiers (<acronym class="acronym">ACL</acronym>s -
      &#8220;Access Control Lists&#8221;).</p><p>Les listes de contrôle d'accès étendent
      le système de permission standard d'UNIX d'une manière
      hautement compatible (POSIX.1e).  Cette caractéristique
      permet à un administrateur d'utiliser avantageusement
      un modèle de sécurité plus
      sophistiqué.</p><p>Pour activer le support <acronym class="acronym">ACL</acronym> pour les
      systèmes de fichiers <acronym class="acronym">UFS</acronym>, ce qui
      suit:</p><pre class="programlisting">options UFS_ACL</pre><p>doit être compilé dans le noyau.  Si cette option
      n'a pas été ajoutée, un avertissement sera
      affiché lors d'une tentative de montage d'un système
      de fichiers supportant les <acronym class="acronym">ACL</acronym>s.
      Cette option est présente dans le noyau
      <code class="filename">GENERIC</code>.  Les <acronym class="acronym">ACL</acronym>s
      reposent sur des attributs étendus rajoutés
      au système de fichiers.  Les attributs étendus sont
      nativement supportés par la prochaine
      génération du système de fichiers UNIX,
      <acronym class="acronym">UFS2</acronym>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Un supplément de travail d'administration est requis
	pour configurer les attributs étendus sous
	<acronym class="acronym">UFS1</acronym> par rapport à
	<acronym class="acronym">UFS2</acronym>.  Les performances des attributs
	étendus sous <acronym class="acronym">UFS2</acronym> sont sensiblement
	meilleures également.  Il en résulte donc, que
	l'<acronym class="acronym">UFS2</acronym> est généralement
	recommandé par rapport à
	l'<acronym class="acronym">UFS1</acronym> pour une utilisation des listes
	de contrôle d'accès.</p></div><p>Les <acronym class="acronym">ACL</acronym>s sont activés grâce
      l'option utilisée lors du montage, <code class="option">acls</code>,
      qui peut être ajouté dans le fichier
      <code class="filename">/etc/fstab</code>.  Cette option de montage peut
      être également automatiquement fixée
      d'une manière définitive en utilisant  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a>
      pour modifier l'indicateur <acronym class="acronym">ACL</acronym> du
      &#8220;superblock&#8221; dans l'entête du système de
      fichiers.  Il est en général préférable
      d'utiliser cet indicateur pour plusieurs raisons:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>L'option de montage pour les <acronym class="acronym">ACL</acronym>s ne
	  peut être modifiée par un simple remontage
	  (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> <code class="option">-u</code>), mais uniquement par un
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a> complet et suivi d'un <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.  Cela
	  signifie que les <acronym class="acronym">ACL</acronym>s ne peuvent
	  être activées sur le système de fichiers
	  racine après le démarrage. Cela signifie
	  également que vous ne pouvez pas modifier la
	  disposition d'un système de fichier une fois que
	  c'est activé.</p></li><li class="listitem"><p>Positionner l'indicateur du &#8220;superblock&#8221;
	  fera que le système de fichiers sera toujours monté
	  avec les <acronym class="acronym">ACL</acronym>s activées même
	  s'il n'y a pas d'entrée dans le fichier
	  <code class="filename">fstab</code>, ou s'il y a une réorganisation
	  des périphériques.  Cela prévient
	  le montage accidentel du système de fichiers sans les
	  <acronym class="acronym">ACL</acronym>s activées, ce qui peut provoquer
	  une activation impropre des <acronym class="acronym">ACL</acronym>s et
	  par conséquent des problèmes de
	  sécurité.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Nous pourrions modifier le comportement des
	<acronym class="acronym">ACL</acronym>s pour permettre l'activation de
	l'indicateur sans le besoin d'un nouveau <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
	complet, mais nous considérons qu'il est préférable
	d'éviter un montage accidentel sans les
	<acronym class="acronym">ACL</acronym>s activées, parce que vous pouvez
	vous &#8220;tirer facilement dans les pieds&#8221;
	si vous activez les <acronym class="acronym">ACL</acronym>s, puis
	les désactivez, et ensuite les réactivez à
	nouveau sans réinitialiser les attributs étendus.
	En général, une fois que vous avez activé
	les <acronym class="acronym">ACL</acronym>s sur un système de fichiers,
	elles ne devraient pas être désactivées
	étant donné que les protections de fichiers
	résultantes peuvent ne pas être compatible avec
	celles prévues par les utilisateurs du système,
	et réactiver les <acronym class="acronym">ACL</acronym>s peut
	réaffecter les précédentes
	<acronym class="acronym">ACL</acronym>s aux fichiers qui ont depuis eût
	leur permissions modifiées, avec pour résultat
	un comportement imprévisible.</p></div><p>Les systèmes de fichiers avec les
      <acronym class="acronym">ACL</acronym>s activées présenteront un signe
      <code class="literal">+</code> au niveau de leurs permissions
      quand elles seront affichées.  Par exemple:</p><pre class="programlisting">drwx------  2 robert  robert  512 Dec 27 11:54 private
drwxrwx---+ 2 robert  robert  512 Dec 23 10:57 directory1
drwxrwx---+ 2 robert  robert  512 Dec 22 10:20 directory2
drwxrwx---+ 2 robert  robert  512 Dec 27 11:57 directory3
drwxr-xr-x  2 robert  robert  512 Nov 10 11:54 public_html</pre><p>Ici nous voyons que les répertoires
      <code class="filename">directory1</code>,
      <code class="filename">directory2</code>, et
      <code class="filename">directory3</code> utilisent les
      <acronym class="acronym">ACL</acronym>s.  Ce n'est pas le cas du
      répertoire <code class="filename">public_html</code>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79033296"></a>15.12.1. Utilisation des <acronym class="acronym">ACL</acronym>s</h3></div></div></div><p>Les <acronym class="acronym">ACL</acronym>s
	peuvent être affichées par l'utilitaire
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getfacl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">getfacl</span>(1)</span></a>.  Par exemple pour voir les
	<acronym class="acronym">ACL</acronym>s sur le fichier
	<code class="filename">test</code>, on utilisera la commande:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>getfacl test</code></strong>
	#file:test
	#owner:1001
	#group:1001
	user::rw-
	group::r--
	other::r--</pre><p>Pour modifier le paramétrage des
	<acronym class="acronym">ACL</acronym>s sur ce fichier, invoquez la commande
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setfacl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">setfacl</span>(1)</span></a>.  Intéressons-nous à la
	ligne:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setfacl -k test</code></strong></pre><p>L'indicateur <code class="option">-k</code> supprimera toutes les
	<acronym class="acronym">ACL</acronym>s actuellement définies pour un
	fichier ou un système de fichiers.  Une méthode
	plus adaptée est d'utiliser l'option
	<code class="option">-b</code> étant donné qu'elle conserve
	les champs de base nécessaires au bon
	fonctionnement des <acronym class="acronym">ACL</acronym>s.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setfacl -m u:trhodes:rwx,group:web:r--,o::--- test</code></strong></pre><p>Dans la commande ci-dessus, l'option <code class="option">-m</code> a
	été utilisée pour modifier les
	entrées <acronym class="acronym">ACL</acronym> par défaut.
	Comme il n'y avait pas d'entrées
	pré-définies, puisqu'elles ont été
	supprimées par la commande précédente,
	cela restaurera les options par défaut et prendra en
	compte les options précisées.  Prenez soin de
	noter que si vous ajoutez un utilisateur ou un groupe qui
	n'existe pas sur le système, une erreur
	<span class="errorname">Invalid argument</span> sera affichée
	sur la sortie standard.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="openssh.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="security.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="security-portaudit.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">15.11. OpenSSH </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 15.13. Surveillance des problèmes de sécurité
      relatifs aux programmes tierce-partie</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>