<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>10.7.  Je n'arrive pas à faire marcher ppp. Où me suis-je trompé ?</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Questions Fréquemment Posées sur FreeBSD 2.X, 3.X et 4.X" /><link rel="up" href="network.html" title="Chapitre 10. Réseaux. **Mise à jour en cours**" /><link rel="prev" href="ch10s06.html" title="10.6.  Est-ce que FreeBSD supporte NAT ou le Masquerading ?" /><link rel="next" href="ch10s08.html" title="10.8. Ma connexion se termine au bout de 3 minutes" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">10.7.  Je n'arrive pas à faire marcher ppp. Où me suis-je trompé ?  </th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch10s06.html">Précédent</a> </td><th width="60%" align="center">Chapitre 10. Réseaux. **Mise à jour en cours**</th><td width="20%" align="right"> <a accesskey="n" href="ch10s08.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp68069072"></a>10.7.  Je n'arrive pas à faire marcher ppp. Où me suis-je trompé ?  </h2></div></div></div><p>
Vous devriez tout d'abord lire la page de manuel
<a class="link" href="http://www.freebsd.org/cgi/man.cgi?ppp" target="_top">ppp</a> et
<a class="link" href="../handbook/ppp-and-slip.html#USERPPP" target="_top">la section du handbook sur ppp</a>.
Activer le logging avec la commande

      </p><pre class="programlisting">
set log Phase Chat Connect Carrier lcp ipcp ccp command
      </pre><p>

      </p><p>
Cette commande peut-être tapée à l'invite de commande de <span class="emphasis"><em>ppp</em></span>
ou peut-être entrée dans le fichier de configuration
<span class="emphasis"><em>/etc/ppp/ppp.conf</em></span>.
(le début de la section par défaut <span class="emphasis"><em>default</em></span>
est l'endroit idéal pour le mettre).

Assurez vous que le fichier <a class="link" href="http://www.freebsd.org/cgi/man.cgi?syslog.conf" target="_top">/etc/syslog.conf</a> contienne les lignes

      </p><pre class="programlisting">
!ppp
*.*              /var/log/ppp.log
      </pre><p>

      </p><p>
et que le fichier <span class="emphasis"><em>/var/log/ppp.log</em></span> existe.
Vous pouvez aussi tirer pas mal de renseignements sur ce qui se passe en
lisant les fichiers log.
Ne vous inquiétez pas même si cela vous semble dénué de sens, si vous obtenez
de l'aide de quelqu'un, pour lui, cela aura un sens.
      </p><p>
Si votre version de ppp ne comprend pas la commande "set log"
vous devriez charger la
<a class="link" href="http://www.freebsd.org/~brian" target="_top">dernière version</a>.
Il pourrra se construire sur FreeBSD version 2.1.5  et plus.

      </p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68080592"></a>10.7.1. Ppp se bloque quand je le lance</h3></div></div></div><p>
Cela est usuellement dû au fait que votre nom d'hôte ne peut être résolu. La meilleure solution pour résoudre ce problème est de s'assurer que votre
<span class="emphasis"><em>/etc/hosts</em></span> est consulté en
premier par votre résolveur en éditant
<span class="emphasis"><em>/etc/host.conf</em></span> et en mettant la ligne
<span class="emphasis"><em>hosts</em></span> en premier.
Puis, ajoutez simplement une entrée pour votre machine locale
dans <span class="emphasis"><em>/etc/hosts</em></span>.
Si vous n'avez pas de réseau local, changez simplement votre
ligne <span class="emphasis"><em>localhost</em></span> :</p><pre class="programlisting">
127.0.0.1	foo.bar.com	foo	localhost
 </pre><p>
Sinon, ajoutez simplement une autre entrée pour votre hôte. Consultez les pages de manuels appropriées pour plus de détails.
Vous devrez être alors capable de réussir  à faire un
<span class="emphasis"><em>ping -c1 `hostname`</em></span> quand vous aurez fini.

	</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68085712"></a>10.7.2. Ppp ne veut pas communiquer en  mode -auto</h3></div></div></div><p>
Tout d'abord, vérifiez que vous avez bien un routage par défaut
en lançant <a class="link" href="http://www.freebsd.org/cgi/man.cgi?netstat" target="_top"> netstat -rn</a>, vous devriez voir deux entrées comme suivent :

        </p><pre class="programlisting">
Destination        Gateway            Flags     Refs     Use     Netif Expire
default            10.0.0.2           UGSc        0        0      tun0
10.0.0.2           10.0.0.1           UH          0        0      tun0
        </pre><p>

        </p><p>
ici, on supposera que vous avez utilisé les adresses données en exemple
dans le handbook, les pages man ou depuis le fichier
ppp.conf.sample.
Si vous n'avez pas de routage par défaut, c'est peut-être parce que vous
utilisez une vieille version de <a class="link" href="http://www.freebsd.org/cgi/man.cgi?ppp" target="_top">ppp</a> qui ne comprend pas le mot
<span class="emphasis"><em>HISADDR</em></span> dans le fichier ppp.conf.
Si votre version de
<span class="emphasis"><em>ppp</em></span> est antérieure à FreeBSD 2.2.5,
changer la ligne

        </p><pre class="programlisting">
add 0 0 HISADDR
        </pre><p>

        </p><p>
par celle-ci :

        </p><pre class="programlisting">
add 0 0 10.0.0.2
        </pre><p>

        </p><p>
Une autre raison au fait que la ligne du routage par défaut soit
manquante est que vous avez pu régler un routage par défaut erroné dans
le fichier <a class="link" href="http://www.freebsd.org/cgi/man.cgi?rc.conf" target="_top">/etc/rc.conf</a> (ce fichier est appelé
<span class="emphasis"><em>/etc/sysconfig</em></span> avant la release 2.2.2), et que vous avez
oublié la ligne suivante :
        </p><pre class="programlisting">
delete ALL
        </pre><p>

        </p><p>
from <span class="emphasis"><em>ppp.conf</em></span>.  Si cela est le cas,  revenez à la section du
handbook sur
<a class="link" href="../handbook/ppp-and-slip.html" target="_top">la configuration finale du système</a> section of the handbook.

      </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68098640"></a>10.7.3.  Que veut dire  "No route to host" ?  </h3></div></div></div><p>
Cette erreur est usuellement dûe à une omission de la section
        </p><pre class="programlisting">
MYADDR:
delete ALL
add 0 0 HISADDR
        </pre><p>

        </p><p>
dans votre fichier <span class="emphasis"><em>/etc/ppp/ppp.linkup</em></span>.
Cela est seulement nécessaire si vous avez une adresse IP dynamique ou que
vous ne savez pas l'adresse de votre routeur. Si vous utilisez le mode
interactif, vous pouvez taper les lignes suivantes après être entré
en <span class="emphasis"><em>mode paquet</em></span> (le mode paquet est indiqué par le
<span class="emphasis"><em>PPP</em></span> en majuscule à l'invite):

        </p><pre class="programlisting">
delete ALL
add 0 0 HISADDR
        </pre><p>

        </p><p>
Se référer à la section du handbook sur
<a class="link" href="../handbook/ppp-and-slip.html" target="_top"> PPP et les adresses IP dynamiques </a>pour plus de détails.

     	 </p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch10s06.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="network.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="ch10s08.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">10.6.  Est-ce que FreeBSD supporte NAT ou le Masquerading  ? </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 10.8. Ma connexion se termine au bout de 3 minutes</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>