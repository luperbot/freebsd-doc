<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>3. Preparativi finali</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Filtering Bridges" /><link rel="up" href="index.html" title="Filtering Bridges" /><link rel="prev" href="filtering-bridges-how.html" title="2. Metodi d'installazione" /><link rel="next" href="filtering-bridges-enabling.html" title="4. Attivazione del Bridge" /><link rel="copyright" href="trademarks.html" title="Nota Legale" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. Preparativi finali</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="filtering-bridges-how.html">Indietro</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="filtering-bridges-enabling.html">Avanti</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="filtering-bridges-finalprep"></a>3. Preparativi finali</h2></div></div></div><p>Prima di riavviare per caricare il nuovo kernel o i moduli richiesti
      (a seconda del metodo che avete scelto in precedenza), bisogna effettuare
      alcune modifiche al file <code class="filename">/etc/rc.conf</code>.  La regola di
      default del firewall è di rifiutare tutti i pacchetti IP.  Per
      iniziare attiviamo il firewall in modalità <code class="option">open</code>,
      in modo da verificare il suo funzionamento senza alcun problema di
      filtraggio pacchetti (nel caso stiate eseguendo questa procedura da
      remoto, tale accorgimento vi consentirà di non rimanere
      erroneamente tagliati fuori dalla rete).
      Inserite queste linee nel file <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">firewall_enable="YES"
firewall_type="open"
firewall_quiet="YES"
firewall_logging="YES"</pre><p>La prima riga serve ad attivare il firewall (e a caricare il modulo
      <code class="filename">ipfw.ko</code> nel caso non fosse già compilato nel
      kernel), la seconda a impostarlo in modalità
      <code class="option">open</code> (come descritto nel file
      <code class="filename">/etc/rc.firewall</code>), la terza a non
      visualizzare il caricamento delle regole e la quarta ad abilitare il
      supporto per il logging.</p><p>Per quanto riguarda la configurazione delle interfacce di rete, il
      metodo più utilizzato è quello di assegnare un IP a solo una
      delle schede di rete, ma il bridge funziona egualmente anche se entrambe o
      nessuna delle interfacce ha IP settati.  In quest'ultimo caso (IP-less) la
      macchina bridge sarà ancora più nascosta in quanto
      inaccessibile dalla rete: per configurarla occorrerà quindi entrare
      da console o tramite una terza interfaccia di rete separata dal bridge.  A
      volte all'avvio della macchina qualche programma richiede di accedere alla
      rete, per esempio per una risoluzione di dominio: in questo caso è
      necessario assegnare un IP all'interfaccia esterna (quella collegata a
      Internet, dove risiede il server <acronym class="acronym">DNS</acronym>), visto che il
      bridge verrà attivato alla fine della procedura di avvio.  Questo
      vuol dire che l'interfaccia <code class="filename">fxp0</code> (nel nostro
      caso) deve essere menzionata nella sezione ifconfig del file
      <code class="filename">/etc/rc.conf</code>, mentre la <code class="filename">xl0</code>
      no.  Assegnare IP a entrambe le schede di rete non ha molto senso, a meno
      che durante la procedura di avvio non si debba accedere a servizi presenti
      su entrambi i segmenti Ethernet.</p><p>C'è un'altra cosa importante da sapere.  Quando si utilizza IP
      sopra Ethernet ci sono due protocolli Ethernet in uso: uno è IP,
      l'altro è <acronym class="acronym">ARP</acronym>.  <acronym class="acronym">ARP</acronym> permette
      la conversione dell'indirizzo IP di una macchina nel suo indirizzo
      Ethernet (livello <acronym class="acronym">MAC</acronym>).  Affinché due macchine
      separate dal bridge riescano a comunicare tra loro è necessario che
      il bridge lasci passare i pacchetti <acronym class="acronym">ARP</acronym>.  Tale
      protocollo non fa parte del livello IP, visto che è presente solo
      con IP sopra Ethernet.  Il firewall di FreeBSD agisce esclusivamente sul
      livello IP e quindi tutti i pacchetti non IP (compreso
      <acronym class="acronym">ARP</acronym>) verranno inoltrati senza essere filtrati, anche se
      il firewall è configurato per non lasciar passare nulla.</p><p>Ora è arrivato il momento di riavviare la macchina e usarla
      come in precedenza: appariranno dei nuovi messaggi riguardo al bridge e al
      firewall, ma il bridge non sarà attivato e il firewall, essendo in
      modalità <code class="option">open</code>, non impedirà nessuna
      operazione.</p><p>Se ci dovessero essere dei problemi, è il caso di scoprire ora
      da cosa derivino e risolverli prima di continuare.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="filtering-bridges-how.html">Indietro</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="filtering-bridges-enabling.html">Avanti</a></td></tr><tr><td width="40%" align="left" valign="top">2. Metodi d'installazione </td><td width="20%" align="center"><a accesskey="h" href="index.html">Partenza</a></td><td width="40%" align="right" valign="top"> 4. Attivazione del Bridge</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Questo, ed altri documenti, possono essere scaricati da
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Per domande su FreeBSD, leggi la
    <a href="http://www.FreeBSD.org/docs.html">documentazione</a> prima di contattare
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Per domande su questa documentazione, invia una e-mail a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>