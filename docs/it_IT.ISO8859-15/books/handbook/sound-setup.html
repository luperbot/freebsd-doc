<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>7.2. Configurazione della Scheda Audio</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuale di FreeBSD" /><link rel="up" href="multimedia.html" title="Capitolo 7. Multimedia" /><link rel="prev" href="multimedia.html" title="Capitolo 7. Multimedia" /><link rel="next" href="sound-mp3.html" title="7.3. Audio MP3" /><link rel="copyright" href="legalnotice.html" title="Nota Legale" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7.2. Configurazione della Scheda Audio</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="multimedia.html">Indietro</a> </td><th width="60%" align="center">Capitolo 7. Multimedia</th><td width="20%" align="right"> <a accesskey="n" href="sound-mp3.html">Avanti</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sound-setup"></a>7.2. Configurazione della Scheda Audio</h2></div><div><span class="authorgroup">Contributo di <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Moses</span> <span class="surname">Moore</span></span>. </span></div><div><span class="authorgroup">Arricchito per FreeBSD 5.X da <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Forvieille</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sound-device"></a>7.2.1. Configurare il Sistema</h3></div></div></div><a id="idp79611600" class="indexterm"></a><a id="idp79612112" class="indexterm"></a><a id="idp79612624" class="indexterm"></a><p>Prima di iniziare, dovresti conoscere il modello della scheda che
        possiedi, il chip che utilizza, e se è una scheda PCI o ISA.
        FreeBSD supporta diverse schede PCI e ISA.  Verifica la lista dei
        dispositivi audio supportati nell' <a class="link" href="http://www.FreeBSD.org/releases/10.1R/hardware.html" target="_top">Hardware Notes</a> per vedere se
        la tua scheda è supportata.  Inoltre tale documento ti
        indicherà quale driver supporta la tua scheda.</p><a id="idp79614032" class="indexterm"></a><p>Per usare il tuo dispositivo audio, dovrai caricare i driver
        corretti.  Il caricamento del driver del dispositivo può essere
        fatto in due modi.  Il metodo più semplice consiste semplicemente
        nel caricare un modulo nel kernel per la tua scheda audio con
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a> che può essere fatto sia da linea di
        comando:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload snd_emu10k1</code></strong></pre><p>sia aggiungendo la riga appropriata al file
        <code class="filename">/boot/defaults/loader.conf</code> come questa:</p><pre class="programlisting">snd_emu10k1_load="YES"</pre><p>Questi esempi sono per la scheda audio Creative <span class="trademark">SoundBlaster</span>®
        Live!.  Altri moduli sonori disponibili sono elencati in
        <code class="filename">/boot/loader.conf</code>.  Se hai dei dubbi su quale
        driver usare, potresti provare a caricare il modulo
        <code class="filename">snd_driver</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload snd_driver</code></strong></pre><p>Questo è un metadriver che carica i driver dei dispositivi
        audio più comuni in un solo colpo.  Ciò permette di
        trovare velocemente il driver corretto.  È anche possibile
        caricare tutti i driver audio attraverso il file
        <code class="filename">/boot/loader.conf</code>.</p><p>Se desideri scoprire il driver selezionato per la tua scheda audio
        dopo aver caricato il metadriver <code class="filename">snd_driver</code>,
        puoi verificare il file <code class="filename">/dev/sndstat</code> con il
        comando <code class="command">cat /dev/sndstat</code>.</p><p>Un altro metodo è quello di compilare staticamente il
        supporto per la tua scheda audio nel kernel.  La sezione seguente
        fornisce le informazioni di cui hai bisogno per aggiungere il supporto
        al tuo hardware in questo metodo.  Per informazioni aggiuntive su
        come ricompilare il kernel, guarda il <a class="xref" href="kernelconfig.html" title="Capitolo 8. Configurazione del Kernel di FreeBSD">Capitolo 8, <em>Configurazione del Kernel di FreeBSD</em></a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79632464"></a>7.2.1.1. Configurare un Kernel Custom con il Supporto Audio</h4></div></div></div><p>La prima cosa da fare è aggiungere al kernel il driver
          di framework audio <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sound&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sound</span>(4)</span></a>; per fare ciò devi aggiungere
          la seguente riga al tuo file di configurazione del kernel:</p><pre class="programlisting">device sound</pre><p>Poi, devi aggiungere il supporto per la tua scheda audio.
          Di conseguenza, devi conoscere quale driver
          supporta la scheda.  Controlla la lista dei dispositivi
          audio supportati nell'<a class="link" href="http://www.FreeBSD.org/releases/10.1R/hardware.html" target="_top">Hardware Notes</a>, per
          determinare il driver corretto per la tua scheda sonora.  Per
          esempio, la scheda <span class="trademark">SoundBlaster</span>® Live! della  Creative è
          supportata dal driver <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_emu10k1&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">snd_emu10k1</span>(4)</span></a>.  Per aggiungere il
          supporto per questa scheda, usiamo la seguente riga:</p><pre class="programlisting">device snd_emu10k1</pre><p>Per conoscere la corretta sintassi da usare assicurati di
          leggere la pagina man del driver.  La sintassi corretta per la
          configurazione del kernel di ogni driver audio supportato può
          essere trovata nel file
          <code class="filename">/usr/src/sys/conf/NOTES</code>.</p><p>Schede ISA non-PnP possono obbligarti a fornire al kernel
          informazioni su alcuni settaggi della scheda audio (IRQ, porta di I/O,
          etc), tipico di tutte le scheda ISA non-PnP.  Questo può
          essere realizzato attraverso il file
          <code class="filename">/boot/device.hints</code>.  All'avvio del sistema,
          il <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> leggerà questo file e passerà
          i settaggi al kernel.  Per esempio, una vecchia scheda audio
          <span class="trademark">SoundBlaster</span>® 16 ISA non-PnP della Creative userà il driver
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_sbc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">snd_sbc</span>(4)</span></a> in congiunzione con  <code class="literal">snd_sb16</code>.
          Per questa scheda le seguenti linee devono essere aggiunte al file
          di configurazione del kernel:</p><pre class="programlisting">device snd_sbc
device snd_sb16</pre><p>e queste nel <code class="filename">/boot/device.hints</code>:</p><pre class="programlisting">hint.sbc.0.at="isa"
hint.sbc.0.port="0x220"
hint.sbc.0.irq="5"
hint.sbc.0.drq="1"
hint.sbc.0.flags="0x15"</pre><p>In questo caso, la scheda usa la porta di I/O
          <code class="literal">0x220</code> e l'IRQ <code class="literal">5</code>.</p><p>La sintassi usata nel file <code class="filename">/boot/device.hints</code>
          è spiegata nella pagina man di <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sound&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sound</span>(4)</span></a> e nella pagina man
          del driver in questione.</p><p>Il settaggi qui sopra sono quelli di default.  In alcuni casi,
          potresti avere la necesità di modificare l'IRQ o altri
          parametri per far funzionare la tua scheda audio.  Guarda la pagina
          man di <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_sbc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">snd_sbc</span>(4)</span></a> per maggiori dettagli su questo driver.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sound-testing"></a>7.2.2. Collaudo della Scheda Audio</h3></div></div></div><p>Dopo aver riavviato con il nuovo kernel, o dopo aver caricato il
        modulo richiesto, la scheda audio dovrebbe apparire nel tuo buffer
        dei messaggi (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>) in modo simile a quanto segue:</p><pre class="screen">pcm0: &lt;Intel ICH3 (82801CA)&gt; port 0xdc80-0xdcbf,0xd800-0xd8ff irq 5 at device 31.5 on pci0
pcm0: [GIANT-LOCKED]
pcm0: &lt;Cirrus Logic CS4205 AC97 Codec&gt;</pre><p>Lo stato della scheda audio può essere verificato leggendo
        il file <code class="filename">/dev/sndstat</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat /dev/sndstat</code></strong>
FreeBSD Audio Driver (newpcm)
Installed devices:
pcm0: &lt;Intel ICH3 (82801CA)&gt; at io 0xd800, 0xdc80 irq 5 bufsz 16384
kld snd_ich (1p/2r/0v channels duplex default)</pre><p>L'output del tuo sistema potrebbe essere diverso.  Se nessun
        dispositivo <code class="filename">pcm</code> viene visualizzato, rivedi
        ciò che è stato fatto di recente.  Ricontrolla ancora
        una volta il tuo file di configurazione del kernel e assicurati di
        aver scelto il driver corretto.  Alcuni problemi comuni sono elencati
        nella <a class="xref" href="sound-setup.html#troubleshooting" title="7.2.2.1. Problemi Comuni">Sezione 7.2.2.1, «Problemi Comuni»</a>.</p><p>Se tutto va bene, ora dovresti avere una scheda audio funzionante.
        Se i pin di audio-out del tuo drive CD-ROM o DVD-ROM sono collegati
        correttamente alla scheda audio, puoi inserire un CD nel drive e
        riprodurlo con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdcontrol</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cdcontrol -f /dev/acd0 play 1</code></strong></pre><p>Varie applicazioni, come <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/workman/pkg-descr">audio/workman</a> possono offrire una migliore
        interfaccia.  Potresti voler installare una applicazione come
        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/mpg123/pkg-descr">audio/mpg123</a> per ascoltare i file
        audio MP3.</p><p>Un altro modo veloce per controllare se la scheda trasmette
        dati al nodo <code class="filename">/dev/dsp</code> è questo:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cat filename &gt; /dev/dsp</code></strong></pre><p>dove <em class="replaceable"><code>filename</code></em> può essere
        qualsiasi file.  Questo comando dovrebbe produrre del rumore, confermando
        che la scheda sonora sta lavorando.</p><p>I livelli del mixer della scheda possono essere modificati
        attraverso il comando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mixer&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mixer</span>(8)</span></a>.  Maggiori dettagli possono essere
        trovati nella pagina man <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mixer&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mixer</span>(8)</span></a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="troubleshooting"></a>7.2.2.1. Problemi Comuni</h4></div></div></div><a id="idp79669328" class="indexterm"></a><a id="idp79669840" class="indexterm"></a><a id="idp79670352" class="indexterm"></a><a id="idp79670864" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Errore</th><th>Soluzione</th></tr></thead><tbody><tr><td><span class="errorname">sb_dspwr(XX) timed out</span></td><td><p>Non è stata impostata correttamente la porta
                    di I/O.</p></td></tr><tr><td><span class="errorname">bad irq XX</span></td><td><p>È stato configurato erroneamente l'IRQ.
                    Assicurati che l'IRQ impostato e quello della scheda siano
                    gli stessi.</p></td></tr><tr><td><span class="errorname">xxx: gus pcm not attached, out of
                    memory</span></td><td><p>Non c'è abbastanza memoria disponibile per
                    usare il dispositivo.</p></td></tr><tr><td><span class="errorname">xxx: can't open /dev/dsp!</span></td><td><p>Controlla con <code class="command">fstat | grep dsp</code>
                    se un'altra applicazione sta usando il dispositivo.
                    <span class="application">Esound</span> e il supporto audio di
                    <span class="application">KDE</span> sono famosi per creare
                    problemi.</p></td></tr></tbody></table></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sound-multiple-sources"></a>7.2.3. Utilizzo di Sorgenti Audio Multiple</h3></div><div><span class="authorgroup">Contributo di <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Munish</span> <span class="surname">Chopra</span></span>. </span></div></div></div><p>È spesso desiderabile avere più sorgenti di audio che
        siano in grado di suonare contemporaneamente, per esempio quando
        <span class="application">esound</span> o <span class="application">artsd</span> non
        supportano la condivisione del dispositivo audio con una certa
        applicazione.</p><p>FreeBSD ti permette di fare questo attraverso i <span class="emphasis"><em>Virtual
          Sound Channels</em></span>, che possono essere abilitati con
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>.  I canali virtuali permettono di multiplexare i canali
        di riproduzione della tua scheda audio mixando l'audio nel
        kernel.</p><p>Per impostare il numero dei canali virtuali, ci sono due variabili
        sysctl che, se sei l'utente <code class="systemitem">root</code>, possono essere
        impostate così:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl hw.snd.pcm0.vchans=4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl hw.snd.maxautovchans=4</code></strong></pre><p>L'esempio qui sopra alloca quattro canali virtuali, che è un
        numero adatto all'uso di ogni giorno.
        <code class="varname">hw.snd.pcm0.vchans</code> è il numero dei canali
        virtuali che ha <code class="filename">pcm0</code>, ed è configurabile
        una volta che il dispositivo è collegato.
        <code class="literal">hw.snd.maxautovchans</code> è il numero dei canali
        virtuali che vengono dati a un nuovo dispositivo audio quando viene
        collegato tramite <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>.  Visto che il modulo
        <code class="filename">pcm</code> può essere caricato
        indipendentemente dai driver dell'hardware,
        <code class="varname">hw.snd.maxautovchans</code> può contenere tanti
        canali virtuali quanti ne verranno allocati successivamente ad ogni
        dispositivo collegato.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Non puoi cambiare il numero di canali virtuali per un
          dispositivo mentre questo è in uso.  Chiudi tutti
          i programmi che stanno usando quel dispositivo, come player
          di musica o demoni del suono.</p></div><p>Se non stai usando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a>, dovrai indirizzare la tua
        applicazione su
        <code class="filename">/dev/dsp0</code>.<em class="replaceable"><code>x</code></em>, dove
        <em class="replaceable"><code>x</code></em> va da 0 a 3 se
        <code class="varname">hw.snd.pcm.0.vchans</code> è impostato a 4 come nel
        precedente esempio.  Su un sistema che usa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a>, questo
        verrà fatto automaticamente in modo trasparente per
        un programma che richiede <code class="filename">/dev/dsp0</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79726544"></a>7.2.4. Settare i Valori di Default per i Canali del Mixer</h3></div><div><span class="authorgroup">Contributo di <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Josef</span> <span class="surname">El-Rayes</span></span>. </span></div></div></div><p>I valori di default per i diversi canali del mixer sono rigidamente
        codificati nel codice sorgente del driver <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pcm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pcm</span>(4)</span></a>.  Ci sono svariate
        applicazioni e demoni che ti permettono di settare i valori del mixer
        memorizzandoli per le successive invocazioni, ma questa non
        è una soluzione pulita.  È possibile settare valori di
        default del mixer a livello del driver -  questo
        è realizzabile definendo i valori desiderati nel file
        <code class="filename">/boot/device.hints</code>, per esempio:</p><pre class="programlisting">hint.pcm.0.vol="50"</pre><p>Questo imposterà il canale volume a un valore di default
        di 50 non appena il modulo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pcm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pcm</span>(4)</span></a> sarà caricato.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="multimedia.html">Indietro</a> </td><td width="20%" align="center"><a accesskey="u" href="multimedia.html">Risali</a></td><td width="40%" align="right"> <a accesskey="n" href="sound-mp3.html">Avanti</a></td></tr><tr><td width="40%" align="left" valign="top">Capitolo 7. Multimedia </td><td width="20%" align="center"><a accesskey="h" href="index.html">Partenza</a></td><td width="40%" align="right" valign="top"> 7.3. Audio MP3</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Questo, ed altri documenti, possono essere scaricati da
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Per domande su FreeBSD, leggi la
    <a href="http://www.FreeBSD.org/docs.html">documentazione</a> prima di contattare
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Per domande su questa documentazione, invia una e-mail a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>