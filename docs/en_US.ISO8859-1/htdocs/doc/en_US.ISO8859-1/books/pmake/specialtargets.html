<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>3.5. Special Targets</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="PMake &#8212; A Tutorial" /><link rel="up" href="shortcuts.html" title="Chapter 3. Short-cuts and Other Nice Things" /><link rel="prev" href="targetattr.html" title="3.4. Target Attributes" /><link rel="next" href="modyvarex.html" title="3.6. Modifying Variable Expansion" /><link rel="copyright" href="legalnotice.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.5. Special Targets</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="targetattr.html">Prev</a> </td><th width="60%" align="center">Chapter 3. Short-cuts and Other Nice Things</th><td width="20%" align="right"> <a accesskey="n" href="modyvarex.html">Next</a></td></tr></table><hr /></div><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="specialtargets"></a>3.5. Special Targets</h2></div></div></div><p>As there were in <span class="application">Make</span>, so there
      are certain targets that have special meaning to
      <span class="application">PMake</span>.  When you use one on a
      dependency line,
      it is the only target that may appear on the left-hand-side of the
      operator.  As for the attributes  and variables, all the special
      targets begin with a period and consist of upper-case letters
      only.  I will not describe them all in detail because some of them
      are rather complex and I will describe them in more detail than you
      will want in <a class="xref" href="gods.html" title="Chapter 4. PMake for Gods">Chapter 4, <em>PMake for Gods</em></a>.  The targets are as follows:</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr valign="top"><td valign="top"><code class="buildtarget">.BEGIN</code></td><td valign="top">Any commands attached to this target are
	      executed before anything else is done.  You can use
	      it for any initialization that needs
	      doing.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.DEFAULT</code></td><td valign="top">This is sort of a <code class="literal">.USE</code>
	      rule for any target (that was used only as a source)
	      that <span class="application">PMake</span> can not figure
	      out any other way to create.  It is only <span class="quote">&#8220;<span class="quote">sort
	      of</span>&#8221;</span> a <code class="literal">.USE</code> rule because
	      only the shell script attached to  the
	      <code class="buildtarget">.DEFAULT</code> target is used.
	      The <code class="varname">.IMPSRC</code> variable of a target
	      that inherits <code class="buildtarget">.DEFAULT</code>'s
	      commands is set to the target's own
	      name.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.END</code></td><td valign="top">This serves a function similar to
	      <code class="buildtarget">.BEGIN</code>, in that commands
	      attached to it are executed once everything
	      has been re-created (so long as no errors
	      occurred).  It also serves the extra function of
	      being a place on which <span class="application">PMake</span>
	      can hang commands you put off to the end.  Thus the script
	      for this target will be executed before any of the
	      commands you save with the
	      <span class="quote">&#8220;<span class="quote">...</span>&#8221;</span>.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.EXPORT</code></td><td valign="top">The sources for this target are passed
	      to the exportation system compiled into
	      <span class="application">PMake</span>.  Some systems will use
	      these sources to configure themselves.  You should ask
	      your system administrator about this.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.IGNORE</code></td><td valign="top">This target marks each of its sources
	      with the <code class="literal">.IGNORE</code> attribute.
	      If you do not give it any sources, then it is
	      like giving the <code class="option">-i</code> flag when
	      you invoke <span class="application">PMake</span> &#8211;
	      errors are ignored for all commands.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.INCLUDES</code></td><td valign="top"><p>The sources for this target are taken to be
		suffixes that indicate a file that can be included in
		a program source file.  The suffix must  have
		already been declared with <code class="literal">.SUFFIXES</code>
		(see below).
		Any suffix so marked will have the directories on
		its search path (see <code class="buildtarget">.PATH</code>,
		below) placed in the <code class="varname">.INCLUDES</code>
		variable, each preceded by a <code class="option">-I</code> flag.
		This variable can then be used as an argument for
		the compiler in the normal fashion.  The
		<code class="filename">.h</code> suffix is already marked in
		this way in the system makefile.  E.g. if you have

		  </p><pre class="programlisting">.SUFFIXES       : .bitmap
.PATH.bitmap    : /usr/local/X/lib/bitmaps
.INCLUDES       : .bitmap</pre><p>

		<span class="application">PMake</span> will place
		<code class="literal">-I/usr/local/X/lib/bitmaps</code>
		in the <code class="varname">.INCLUDES</code> variable and you can
		then say

		</p><pre class="programlisting">cc $(.INCLUDES) -c xprogram.c</pre><p>

		(Note: the <code class="varname">.INCLUDES</code> variable is
		not actually filled in until the entire makefile has
		been read.)</p></td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.INTERRUPT</code></td><td valign="top">When <span class="application">PMake</span> is
	      interrupted, it will execute the commands in the
	      script for this target, if it exists.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.LIBS</code></td><td valign="top">This does for libraries what
	      <code class="buildtarget">.INCLUDES</code> does for include
	      files, except the flag used is
	      <code class="option">-L</code>, as required by those linkers
	      that allow you to tell them where to find libraries.
	      The variable used is <code class="varname">.LIBS</code>.
	      Be forewarned that <span class="application">PMake</span>
	      may not have been compiled to do this if the linker
	      on your system does not accept the <code class="option">-L</code>
	      flag, though the <code class="varname">.LIBS</code> variable
	      will always be defined once the makefile has been
	      read.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.MAIN</code></td><td valign="top">If you did not give a target (or targets) to
	      create when you invoked
	      <span class="application">PMake</span>, it will take the
	      sources of this target as the targets to
	      create.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.MAKEFLAGS</code></td><td valign="top">This target provides a way for you to
	      always specify flags for <span class="application">PMake</span>
	      when the makefile is used.  The flags are just as they
	      would be typed to the shell (except you can not use shell
	      variables unless they are in the environment), though
	      the <code class="option">-f</code> and <code class="option">-r</code>
	      flags have no effect.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.NULL</code></td><td valign="top">This allows you to specify what
	      suffix <span class="application">PMake</span> should pretend
	      a file has if, in fact, it has no known suffix.  Only
	      one suffix may be so designated.  The last source on the
	      dependency line is the suffix that is used (you
	      should, however, only give one suffix...).</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.PATH</code></td><td valign="top">If you give sources for this target,
	      <span class="application">PMake</span> will take them as
	      directories in which to search for files it cannot
	      find in the current directory.  If you give no
	      sources, it will clear out any directories added to
	      the search path before.  Since the effects of this
	      all get very complex, we will leave it till <a class="xref" href="gods.html" title="Chapter 4. PMake for Gods">Chapter 4, <em>PMake for Gods</em></a> to give you a complete
	      explanation.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.PATH<em class="replaceable"><code>suffix</code></em></code></td><td valign="top">This does a similar thing to
	      <code class="buildtarget">.PATH</code>, but it does it only
	      for files with the given suffix.  The suffix must
	      have been defined already.  Look at Search Paths
	      (<a class="xref" href="gods.html#searchpaths" title="4.1. Search Paths">Section 4.1, &#8220;Search Paths&#8221;</a>) for more
	      information.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.PRECIOUS</code></td><td valign="top">Similar to <code class="buildtarget">.IGNORE</code>,
	      this gives the <code class="literal">.PRECIOUS</code> attribute to
	      each source on the dependency line, unless there are
	      no sources, in which case the <code class="literal">.PRECIOUS</code>
	      attribute is given to every target in the file.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.RECURSIVE</code></td><td valign="top">This target applies the <code class="literal">.MAKE</code>
	      attribute to all its sources.  It does nothing if you
	      do not give it any sources.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.SHELL</code></td><td valign="top"><span class="application">PMake</span> is not
	      constrained to only using the Bourne shell to
	      execute the commands you put in the makefile.  You
	      can tell it some other shell to use with this
	      target.  Check out <span class="quote">&#8220;<span class="quote"><a class="xref" href="ashell.html" title="4.4. A Shell is a Shell is a Shell">A Shell is a Shell is a Shell</a></span>&#8221;</span> (<a class="xref" href="ashell.html" title="4.4. A Shell is a Shell is a Shell">Section 4.4, &#8220;A Shell is a Shell is a Shell&#8221;</a>) for more
	      information.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.SILENT</code></td><td valign="top">When you use
	      <code class="buildtarget">.SILENT</code> as a target, it
	      applies the <code class="literal">.SILENT</code> attribute to
	      each of its sources.  If there are no sources on the
	      dependency line, then it is as if you gave
	      <span class="application">PMake</span> the
	      <code class="option">-s</code> flag and no commands will be
	      echoed.</td></tr><tr valign="top"><td valign="top"><code class="buildtarget">.SUFFIXES</code></td><td valign="top">This is used to give new file suffixes
	      for <span class="application">PMake</span> to handle.
	      Each source is a suffix
	      <span class="application">PMake</span> should
	      recognize.  If you give a
	      <code class="buildtarget">.SUFFIXES</code> dependency line
	      with no sources, <span class="application">PMake</span>
	      will forget about all the suffixes it knew
	      (this also nukes the null suffix).  For those
	      targets that need to have suffixes defined, this
	      is how you do it.</td></tr></tbody></table></div><p>In addition to these targets, a line of the form:</p><pre class="programlisting">attribute : sources</pre><p>applies the attribute to all the targets listed as sources.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="targetattr.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="shortcuts.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="modyvarex.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3.4. Target Attributes </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 3.6. Modifying Variable Expansion</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>