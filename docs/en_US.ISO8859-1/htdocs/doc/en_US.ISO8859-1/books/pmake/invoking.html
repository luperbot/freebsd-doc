<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>2.7. Invoking PMake</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="PMake &#8212; A Tutorial" /><link rel="up" href="basics.html" title="Chapter 2. The Basics of PMake" /><link rel="prev" href="writeanddebug.html" title="2.6. Writing and Debugging a Makefile" /><link rel="next" href="summary.html" title="2.8. Summary" /><link rel="copyright" href="legalnotice.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.7. Invoking PMake</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="writeanddebug.html">Prev</a> </td><th width="60%" align="center">Chapter 2. The Basics of PMake</th><td width="20%" align="right"> <a accesskey="n" href="summary.html">Next</a></td></tr></table><hr /></div><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="invoking"></a>2.7. Invoking PMake</h2></div></div></div><p><span class="application">PMake</span> comes with a wide variety
      of flags to choose from.  They may appear in any order,
      interspersed with command-line variable assignments and targets
      to create.  The flags are as follows:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-d <em class="replaceable"><code>what</code></em></code></span></dt><dd><p>This causes <span class="application">PMake</span> to spew
	    out debugging information that may prove useful to you.
	    If you cannot figure out why
	    <span class="application">PMake</span> is doing what it is
	    doing, you might try using this flag.
	    The <em class="replaceable"><code>what</code></em> parameter is a string
	    of single characters that tell
	    <span class="application">PMake</span> what aspects you are
	    interested in.  Most of what I describe will make little
	    sense to you, unless you have dealt with
	    <span class="application">Make</span> before.  Just remember
	    where this table is and come back to it as you read on.
	    The characters and the information they produce are as
	    follows:</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr valign="top"><td valign="top"><code class="literal">a</code></td><td valign="top">Archive searching and caching.</td></tr><tr valign="top"><td valign="top"><code class="literal">c</code></td><td valign="top">Conditional evaluation.</td></tr><tr valign="top"><td valign="top"><code class="literal">d</code></td><td valign="top">The searching and caching of
		    directories.</td></tr><tr valign="top"><td valign="top"><code class="literal">j</code></td><td valign="top">Various snippets of information related to
		    the running of the multiple shells.  Not
		    particularly interesting.</td></tr><tr valign="top"><td valign="top"><code class="literal">m</code></td><td valign="top">The making of each target: what target is
		    being examined; when it was last modified; whether
		    it is out-of-date; etc.</td></tr><tr valign="top"><td valign="top"><code class="literal">p</code></td><td valign="top">Makefile parsing.</td></tr><tr valign="top"><td valign="top"><code class="literal">r</code></td><td valign="top">Remote execution.</td></tr><tr valign="top"><td valign="top"><code class="literal">s</code></td><td valign="top">The application of suffix-transformation
		    rules.  (See <a class="xref" href="shortcuts.html" title="Chapter 3. Short-cuts and Other Nice Things">Chapter 3, <em>Short-cuts and Other Nice Things</em></a>.)</td></tr><tr valign="top"><td valign="top"><code class="literal">t</code></td><td valign="top">The maintenance of the list of targets.</td></tr><tr valign="top"><td valign="top"><code class="literal">v</code></td><td valign="top">Variable assignment.</td></tr></tbody></table></div><p>Of these all, the <code class="literal">m</code> and
	    <code class="literal">s</code> letters will be most useful to you.
	    If the <code class="option">-d</code> is the final argument or the
	    argument from which it would get these key letters (see
	    below for a note about which argument would be used)
	    begins with a &#8211;, all of these debugging flags will
	    be set, resulting in massive amounts of output.</p></dd><dt><span class="term"><code class="option">-f</code> makefile</span></dt><dd><p>Specify a makefile to read different from the standard
	  makefiles (<code class="filename">Makefile</code> or
	  <code class="filename">makefile</code>).
	  If makefile is <code class="literal">-</code>,
	  <span class="application">PMake</span> uses the standard input.
	  This is useful for making quick and dirty makefiles.</p></dd><dt><span class="term"><code class="option">-h</code></span></dt><dd><p>Prints out a summary of the various flags
	    <span class="application">PMake</span> accepts.
	    It can also be used to find out what level of concurrency was
	    compiled into the version of <span class="application">PMake</span> you
	    are using (look at <code class="literal">-J</code> and
	    <code class="literal">-L</code>) and various other information on how
	    <span class="application">PMake</span> was configured.</p></dd><dt><span class="term"><code class="option">-i</code></span></dt><dd><p>If you give this flag, <span class="application">PMake</span> will
	    ignore non-zero status returned by any of its shells.  It is like
	    placing a <code class="literal">-</code> before all the commands in the
	    makefile.</p></dd><dt><span class="term"><code class="option">-k</code></span></dt><dd><p>This is similar to <code class="option">-i</code> in that it allows
	    <span class="application">PMake</span> to continue when it sees an
	    error, but unlike <code class="option">-i</code>, where
	    <span class="application">PMake</span> continues blithely as if nothing
	    went wrong, <code class="option">-k</code> causes it to recognize the error
	    and only continue work on those things that do not depend on the
	    target, either directly or indirectly (through depending on
	    something that depends on it), whose creation returned the error.
	    The <code class="option">k</code> is for <span class="quote">&#8220;<span class="quote">keep going</span>&#8221;</span>.</p></dd><dt><span class="term"><code class="option">-l</code></span></dt><dd><p><span class="application">PMake</span> has the ability to lock a
	    directory against other people executing it in the same directory
	    (by means of a file called <code class="filename">LOCK.make</code> that it
	    creates and checks for in the directory).  This is a Good Thing
	    because two people doing the same thing in the same place can be
	    disastrous for the final product (too many cooks and all that).
	    Whether this locking is the default is up to your system
	    administrator.  If locking is on, <code class="option">-l</code> will turn it
	    off, and vice versa.
	    Note that this locking will not prevent you from invoking
	    <span class="application">PMake</span> twice in the same place&#8211;if
	    you own the lock file, <span class="application">PMake</span> will warn
	    you about it but continue to execute.</p></dd><dt><span class="term"><code class="option">-m <em class="replaceable"><code>directory</code></em></code></span></dt><dd><p>Tells <span class="application">PMake</span> another place to search
	    for included makefiles via the
	    &lt;<em class="replaceable"><code>filename</code></em>&gt; style.
	    Several <code class="filename">-m</code> options can be given to form a
	    search path.  If this construct is used the default system
	    makefile search path is completely overridden.</p></dd><dt><span class="term"><code class="option">-n</code></span></dt><dd><p>This flag tells <span class="application">PMake</span> not to
	    execute the commands needed to update the out-of-date targets in
	    the makefile.  Rather, <span class="application">PMake</span> will
	    simply print the commands it would have executed and exit.
	    This is particularly useful for checking the correctness of a
	    makefile.  If <span class="application">PMake</span> does not do what
	    you expect it to, it is a good chance the makefile is wrong.</p></dd><dt><span class="term"><code class="option">-p number</code></span></dt><dd><p>This causes <span class="application">PMake</span> to print its
	    input in a reasonable form, though not necessarily one that would
	    make immediate sense to anyone but me.  The number is a bitwise OR
	    of 1 and 2, where 1 means it should print the input before doing
	    any processing and 2 says it should print it after everything has
	    been re-created.
	    Thus <code class="option">-p 3</code> would print it twice-a-once before
	    processing and once after (you might find the difference between
	    the two interesting).  This is mostly useful to me, but you may
	    find it informative in some bizarre circumstances.</p></dd><dt><span class="term"><code class="option">-q</code></span></dt><dd><p>If you give <span class="application">PMake</span> this flag, it
	    will not try to re-create anything.  It will just see if anything
	    is out-of-date and exit non-zero if so.</p></dd><dt><span class="term"><code class="option">-r</code></span></dt><dd><p>When <span class="application">PMake</span> starts up, it reads a
	    default makefile that tells it what sort of system it is on and
	    gives it some idea of what to do if you do not tell it anything.
	    I will tell you about it in <a class="xref" href="shortcuts.html" title="Chapter 3. Short-cuts and Other Nice Things">Chapter 3, <em>Short-cuts and Other Nice Things</em></a>.
	    If you give this flag, <span class="application">PMake</span> will not
	    read the default makefile.</p></dd><dt><span class="term"><code class="option">-s</code></span></dt><dd><p>This causes <span class="application">PMake</span> to not print
	    commands before they are executed.  It is the equivalent of
	    putting an <span class="quote">&#8220;<span class="quote">@</span>&#8221;</span> before every command in the
	    makefile.</p></dd><dt><span class="term"><code class="option">-t</code></span></dt><dd><p>Rather than try to re-create a target,
	    <span class="application">PMake</span> will simply <span class="quote">&#8220;<span class="quote">touch</span>&#8221;</span>
	    it so as to make it appear up-to-date.
	    If the target did not exist before, it will when
	    <span class="application">PMake</span> finishes, but if the target did
	    exist, it will appear to have been updated.</p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>Targets can still be created in parallel, however.
	    This is the mode <span class="application">PMake</span> will enter
	    if it is invoked either as <code class="command">smake</code> or
	    <code class="command">vmake</code>.</p></dd><dt><span class="term"><code class="option">-x</code></span></dt><dd><p>This tells <span class="application">PMake</span> it is OK to export
	    jobs to other machines, if they are available.  It is used when
	    running in Make mode, as exporting in this mode tends to make
	    things run slower than if the commands were just executed
	    locally.</p></dd><dt><span class="term"><code class="option">-B</code></span></dt><dd><p>Forces <span class="application">PMake</span> to be as
	    backwards-compatible with <span class="application">Make</span> as
	    possible while still being itself.  This includes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Executing one shell per shell command</p></li><li class="listitem"><p>Expanding anything that looks even vaguely like a
		variable, with the empty string replacing any variable
		<span class="application">PMake</span> does not know.</p></li><li class="listitem"><p>Refusing to allow you to escape a <code class="literal">#</code>
		with a backslash.</p></li><li class="listitem"><p>Permitting undefined variables on dependency lines and
		conditionals (see below).  Normally this causes
		<span class="application">PMake</span> to abort.</p></li></ul></div></dd><dt><span class="term"><code class="option">-C</code></span></dt><dd><p>This nullifies any and all compatibility mode flags you may
	    have given or implied up to the time the <code class="option">-C</code> is
	    encountered.  It is useful mostly in a makefile that you wrote for
	    <span class="application">PMake</span> to avoid bad things happening
	    when someone runs <span class="application">PMake</span> as
	    <span class="application">make</span> or has things set in the
	    environment that tell it to be compatible.
	    <code class="option">-C</code> is not placed in the <code class="envar">PMAKE</code>
	    environment variable or the <code class="varname">.MAKEFLAGS</code> or
	    <code class="envar">MFLAGS</code> global variables.</p></dd><dt><span class="term"><code class="option">-D <em class="replaceable"><code>variable</code></em></code></span></dt><dd><p>Allows you to define a variable to have <span class="quote">&#8220;<span class="quote">1</span>&#8221;</span> as
	    its value.  The variable is a global variable, not a command-line
	    variable.  This is useful mostly for people who are used to the C
	    compiler arguments and those using conditionals, which I will get
	    into in <a class="xref" href="condition.html" title="4.3. On the Condition...">Section 4.3, &#8220;On the Condition...&#8221;</a>.</p></dd><dt><span class="term"><code class="option">-I <em class="replaceable"><code>directory</code></em></code></span></dt><dd><p>Tells <span class="application">PMake</span> another place to search
	    for included makefiles.  Yet another thing to be explained in
	    <a class="xref" href="shortcuts.html" title="Chapter 3. Short-cuts and Other Nice Things">Chapter 3, <em>Short-cuts and Other Nice Things</em></a> (<a class="xref" href="including.html" title="3.2. Including Other Makefiles">Section 3.2, &#8220;Including Other Makefiles&#8221;</a>, to be
	    precise).</p></dd><dt><span class="term"><code class="option">-J <em class="replaceable"><code>number</code></em></code></span></dt><dd><p>Gives the absolute maximum number of targets to create at once
	    on both local and remote machines.</p></dd><dt><span class="term"><code class="option">-L <em class="replaceable"><code>number</code></em></code></span></dt><dd><p>This specifies the maximum number of targets to create on the
	    local machine at once.
	    This may be <code class="literal">0</code>, though you should be wary of
	    doing this, as <span class="application">PMake</span> may hang until a
	    remote machine becomes available, if one is not available when it
	    is started.</p></dd><dt><span class="term"><code class="option">-M</code></span></dt><dd><p>This is the flag that provides absolute, complete, full
	    compatibility with <span class="application">Make</span>.  It still
	    allows you to use all but a few of the features of
	    <span class="application">PMake</span>, but it is non-parallel.
	    This is the mode <span class="application">PMake</span> enters if you
	    call it <code class="command">make</code>.</p></dd><dt><span class="term"><code class="option">-P</code></span></dt><dd><p>When creating targets in parallel, several shells are
	    executing at once, each wanting to write its own two cents'-worth
	    to the screen.
	    This output must be captured by <span class="application">PMake</span>
	    in some way  in order to prevent the screen from being filled with
	    garbage even more indecipherable than you usually see.
	    <span class="application">PMake</span> has two ways of doing this, one
	    of which provides for much cleaner output and a clear separation
	    between the output of different jobs, the other of which provides
	    a more immediate response so one can tell what is really
	    happening.  The former is done by notifying you when the creation
	    of a target starts, capturing the output and transferring it to
	    the screen all at once when the job finishes.  The latter is done
	    by catching the output of the shell (and its children) and
	    buffering it until an entire line is received, then printing that
	    line preceded by an indication of which job produced the output.
	    Since I prefer this second method, it is the one used by default.
	    The first method will be used if you give the <code class="option">-P</code>
	    flag to <span class="application">PMake</span>.</p></dd><dt><span class="term"><code class="option">-V</code></span></dt><dd><p>As mentioned before, the <code class="option">-V</code> flag tells
	    <span class="application">PMake</span> to use
	    <span class="application">Make</span>'s style of expanding variables,
	    substituting the empty string for any variable it does not
	    know.</p></dd><dt><span class="term"><code class="option">-W</code></span></dt><dd><p>There are several times when <span class="application">PMake</span>
	    will print a message at you that is only a warning, i.e. it
	    can continue to work in spite of your having done something silly
	    (such as forgotten a leading tab for a shell command).  Sometimes
	    you are well aware of silly things you have done and would like
	    <span class="application">PMake</span> to stop bothering you.  This flag
	    tells it to shut up about anything non-fatal.</p></dd><dt><span class="term"><code class="option">-X</code></span></dt><dd><p>This flag causes <span class="application">PMake</span> to not
	    attempt to export any jobs to another machine.</p></dd></dl></div><p>Several flags may follow a single <code class="literal">-</code>.  Those flags
      that require arguments take them from successive parameters.
      For example:</p><pre class="screen">pmake -fDnI server.mk DEBUG /chip2/X/server/include</pre><p>will cause <span class="application">PMake</span> to read
      <code class="filename">server.mk</code> as the input makefile,
      define the variable <code class="varname">DEBUG</code> as a global variable and
      look  for included makefiles in the directory
      <code class="filename">/chip2/X/server/include</code>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="writeanddebug.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="summary.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2.6. Writing and Debugging a Makefile </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 2.8. Summary</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>