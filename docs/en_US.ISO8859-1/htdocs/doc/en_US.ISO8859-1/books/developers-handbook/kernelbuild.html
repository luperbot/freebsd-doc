<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Chapter 9. Building and Installing a FreeBSD Kernel</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Developers' Handbook" /><link rel="up" href="kernel.html" title="Part III. Kernel" /><link rel="prev" href="kernel.html" title="Part III. Kernel" /><link rel="next" href="kernelbuild-new.html" title="9.2. Building a Kernel the &#8220;New&#8221; Way" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 9. Building and Installing a FreeBSD Kernel</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="kernel.html">Prev</a> </td><th width="60%" align="center">Part III. Kernel</th><td width="20%" align="right"> <a accesskey="n" href="kernelbuild-new.html">Next</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="kernelbuild"></a>Chapter 9. Building and Installing a FreeBSD Kernel</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="sect1"><a href="kernelbuild.html#kernelbuild-traditional">9.1. Building a Kernel the <span class="quote">&#8220;<span class="quote">Traditional</span>&#8221;</span> Way</a></span></dt><dt><span class="sect1"><a href="kernelbuild-new.html">9.2. Building a Kernel the <span class="quote">&#8220;<span class="quote">New</span>&#8221;</span> Way</a></span></dt></dl></div><p>Being a kernel developer requires understanding of the kernel
    build process.  To debug the FreeBSD kernel it is required to be able
    to build one.  There are two known ways to do so:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The <span class="quote">&#8220;<span class="quote">Traditional</span>&#8221;</span> Way</p></li><li class="listitem"><p>The <span class="quote">&#8220;<span class="quote">New</span>&#8221;</span> Way</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">It is supposed that the reader of this chapter is familiar
      with the information described in the <a class="link" href="../handbook/kernelconfig-building.html" target="_top">Building and
	Installing a Custom Kernel</a> chapter of the FreeBSD
      Handbook.  If this is not the case, please read through the above
      mentioned chapter to understand how the build process
      works.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelbuild-traditional"></a>9.1. Building a Kernel the <span class="quote">&#8220;<span class="quote">Traditional</span>&#8221;</span> Way</h2></div></div></div><p>Up to version 4.X of FreeBSD this was the recommended way to
      build a new kernel.  It can still be used on newer versions
      (instead of the <span class="quote">&#8220;<span class="quote">buildkernel</span>&#8221;</span> target of the toplevel
      <code class="filename">/usr/src/</code> makefiles).
      Building the kernel this way may be useful when working on the
      kernel code and it may actually be faster than the
      <span class="quote">&#8220;<span class="quote">New</span>&#8221;</span> procedure when only a single option or two were
      tweaked in the kernel configuration file.  On the other hand, it
      might lead to unexpected kernel build breakage when used by
      beginners on newer versions of FreeBSD.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Run <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> to generate the kernel source
	  code:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/sbin/config <em class="replaceable"><code>MYKERNEL</code></em></code></strong></pre></li><li class="step"><p>Change into the build directory.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> will
	  print the name of this directory after being run as
	  above.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd ../compile/<em class="replaceable"><code>MYKERNEL</code></em></code></strong></pre></li><li class="step"><p>Compile the kernel:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make depend</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong></pre></li><li class="step"><p>Install the new kernel:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong></pre></li></ol></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="kernel.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="kernel.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="kernelbuild-new.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Part III. Kernel </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 9.2. Building a Kernel the <span class="quote">&#8220;<span class="quote">New</span>&#8221;</span> Way</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>