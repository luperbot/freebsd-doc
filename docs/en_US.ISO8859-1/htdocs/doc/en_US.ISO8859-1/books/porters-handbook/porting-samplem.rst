=============================
Chapter?13.?A Sample Makefile
=============================

.. raw:: html

   <div class="navheader">

Chapter?13.?A Sample ``Makefile``
`Prev <dads-misc.html>`__?
?
?\ `Next <keeping-up.html>`__

--------------

.. raw:: html

   </div>

.. raw:: html

   <div class="chapter">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

Here is a sample ``Makefile`` that can be used to create a new port.
Make sure to remove all the extra comments (ones between brackets).

The format shown is the recommended one for ordering variables, empty
lines between sections, and so on. This format is designed so that the
most important information is easy to locate. We recommend using
`portlint <porting-portlint.html>`__ to check the ``Makefile``.

.. code:: programlisting

    [the header...just to make it easier for us to identify the ports.]
    # Created by: Satoshi Asami <asami@FreeBSD.org>
    [The optional Created by: line names the person who originally
    created the port.  Note that the “:” is followed by a space
    and not a tab character.
    If this line is present, future maintainers must
    not change or remove it except at the original author's request.]

    # $FreeBSD$
    [ ^^^^^^^^^ This will be automatically replaced with RCS ID string by SVN
    when it is committed to our repository.  If upgrading a port, do not alter
    this line back to "$FreeBSD$".  SVN deals with it automatically.]

    [section to describe the port itself and the master site - PORTNAME
     and PORTVERSION are always first, followed by CATEGORIES,
     and then MASTER_SITES, which can be followed by MASTER_SITE_SUBDIR.
     PKGNAMEPREFIX and PKGNAMESUFFIX, if needed, will be after that.
     Then comes DISTNAME, EXTRACT_SUFX and/or DISTFILES, and then
     EXTRACT_ONLY, as necessary.]
    PORTNAME=   xdvi
    PORTVERSION=    18.2
    CATEGORIES= print
    [do not forget the trailing slash ("/")!
     if not using MASTER_SITE_* macros]
    MASTER_SITES=   ${MASTER_SITE_XCONTRIB}
    MASTER_SITE_SUBDIR= applications
    PKGNAMEPREFIX=  ja-
    DISTNAME=   xdvi-pl18
    [set this if the source is not in the standard ".tar.gz" form]
    EXTRACT_SUFX=   .tar.Z

    [section for distributed patches -- can be empty]
    PATCH_SITES=    ftp://ftp.sra.co.jp/pub/X11/japanese/
    PATCHFILES= xdvi-18.patch1.gz xdvi-18.patch2.gz

    [maintainer; *mandatory*!  This is the person who is volunteering to
     handle port updates, build breakages, and to whom a users can direct
     questions and bug reports.  To keep the quality of the Ports Collection
     as high as possible, we no longer accept new ports that are assigned to
     "ports@FreeBSD.org".]
    MAINTAINER= asami@FreeBSD.org
    COMMENT=    DVI Previewer for the X Window System

    [dependencies -- can be empty]
    RUN_DEPENDS=    gs:${PORTSDIR}/print/ghostscript

    [this section is for other standard bsd.port.mk variables that do not
     belong to any of the above]
    [If it asks questions during configure, build, install...]
    IS_INTERACTIVE= yes
    [If it extracts to a directory other than ${DISTNAME}...]
    WRKSRC=     ${WRKDIR}/xdvi-new
    [If the distributed patches were not made relative to ${WRKSRC},
     this may need to be tweaked]
    PATCH_DIST_STRIP=   -p1
    [If it requires a "configure" script generated by GNU autoconf to be run]
    GNU_CONFIGURE=  yes
    [If it requires GNU make, not /usr/bin/make, to build...]
    USES= gmake
    [If it is an X application and requires "xmkmf -a" to be run...]
    USES= imake
    [et cetera.]

    [non-standard variables to be used in the rules below]
    MY_FAVORITE_RESPONSE=   "yeah, right"

    [then the special rules, in the order they are called]
    pre-fetch:
        i go fetch something, yeah

    post-patch:
        i need to do something after patch, great

    pre-install:
        and then some more stuff before installing, wow

    [and then the epilogue]

    .include <bsd.port.mk>

.. raw:: html

   </div>

.. raw:: html

   <div class="navfooter">

--------------

+------------------------------+-------------------------+---------------------------------+
| `Prev <dads-misc.html>`__?   | ?                       | ?\ `Next <keeping-up.html>`__   |
+------------------------------+-------------------------+---------------------------------+
| 12.19.?Miscellanea?          | `Home <index.html>`__   | ?Chapter?14.?Keeping Up         |
+------------------------------+-------------------------+---------------------------------+

.. raw:: html

   </div>

All FreeBSD documents are available for download at
http://ftp.FreeBSD.org/pub/FreeBSD/doc/

| Questions that are not answered by the
  `documentation <http://www.FreeBSD.org/docs.html>`__ may be sent to
  <freebsd-questions@FreeBSD.org\ >.
|  Send questions about this document to <freebsd-doc@FreeBSD.org\ >.
