<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Chapter 15. Serial Communications</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Frequently Asked Questions for FreeBSD 8.X, 9.X and 10.X" /><link rel="up" href="index.html" title="Frequently Asked Questions for FreeBSD 8.X, 9.X and 10.X" /><link rel="prev" href="ppp.html" title="Chapter 14. PPP" /><link rel="next" href="misc.html" title="Chapter 16. Miscellaneous Questions" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 15. Serial Communications</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ppp.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="misc.html">Next</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serial"></a>Chapter 15. Serial Communications</h1></div></div></div><p>This section answers common questions about serial
      communications with FreeBSD.  PPP is covered in the <a class="link" href="networking.html" title="Chapter 12. Networking">Networking</a> section.</p><div class="qandaset"><a id="idp68966096"></a><dl><dt>15.1. <a href="serial.html#idp68966352">Which multi-port serial cards are supported by
	    FreeBSD?</a></dt><dt>15.2. <a href="serial.html#idp68971600">How do I get the boot: prompt to show on the serial
	    console?</a></dt><dt>15.3. <a href="serial.html#idp68974288">How do I tell if FreeBSD found my serial ports or modem
	    cards?</a></dt><dt>15.4. <a href="serial.html#idp68979920">How do I access the serial ports on FreeBSD?</a></dt><dt>15.5. <a href="serial.html#idp68986320">How do I enable support for a multi-port serial
	    card?</a></dt><dt>15.6. <a href="serial.html#idp69001552">Can I set the default serial parameters for a
	    port?</a></dt><dt>15.7. <a href="serial.html#idp69004112">How can I enable dialup logins on my modem?</a></dt><dt>15.8. <a href="serial.html#idp69043664">How can I connect a dumb terminal to my FreeBSD
	    box?</a></dt><dt>15.9. <a href="serial.html#idp69046224">Why can I not run tip or
	    cu?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp68966352"></a><a id="multiport-serial-support"></a><p><strong>15.1.</strong></p></td><td align="left" valign="top"><p>Which multi-port serial cards are supported by
	    FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>There is a list of these in the <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/serial.html" target="_top">Serial
	      Communications</a> chapter of the Handbook.</p><p>Most multi-port PCI cards that are based on 16550 or
	    clones are supported with no extra effort.</p><p>Some unnamed clone cards have also been known to work,
	    especially those that claim to be AST compatible.</p><p>Check <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uart&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">uart</span>(4)</span></a> and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> to get more
	    information on configuring such cards.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68971600"></a><a id="serial-console-prompt"></a><p><strong>15.2.</strong></p></td><td align="left" valign="top"><p>How do I get the boot: prompt to show on the serial
	    console?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>See <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/serialconsole-setup.html" target="_top">this
	      section of the Handbook</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68974288"></a><a id="found-serial"></a><p><strong>15.3.</strong></p></td><td align="left" valign="top"><p>How do I tell if FreeBSD found my serial ports or modem
	    cards?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>As the FreeBSD kernel boots, it will probe for the serial
	    ports for which the kernel is configured.
	    Either watch the boot messages closely
	    or run this command after the system is up and
	    running:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>dmesg | grep -E "^sio[0-9]"</code></strong>
sio0: &lt;16550A-compatible COM port&gt; port 0x3f8-0x3ff irq 4 flags 0x10 on acpi0
sio0: type 16550A
sio1: &lt;16550A-compatible COM port&gt; port 0x2f8-0x2ff irq 3 on acpi0
sio1: type 16550A</pre><p>This example shows two serial ports.  The first is on
	    IRQ4, port address
	    <code class="literal">0x3f8</code>, and has a 16550A-type UART chip.
	    The second uses the same kind of chip but is on
	    IRQ3 and is at port address
	    <code class="literal">0x2f8</code>.  Internal modem cards are
	    treated just like serial ports, except that they
	    always have a modem attached to the
	    port.</p><p>The <code class="filename">GENERIC</code> kernel includes
	    support for two serial ports using the same IRQ and port
	    address settings in the above example.  If these settings
	    are not right for the system, or if there are more modem
	    cards or serial ports than the kernel is
	    configured for, reconfigure using the instructions in
	    <a class="link" href="kernelconfig.html#make-kernel" title="7.1.">building a kernel</a>
	    for more details.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68979920"></a><a id="access-serial-ports"></a><p><strong>15.4.</strong></p></td><td align="left" valign="top"><p>How do I access the serial ports on FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The third serial port, <code class="filename">sio2</code>,
	    or <code class="filename">COM3</code>,
	    is on <code class="filename">/dev/cuad2</code> for dial-out
	    devices, and on <code class="filename">/dev/ttyd2</code> for
	    dial-in devices.  What is the difference between these two
	    classes of devices?</p><p>When
	    opening <code class="filename">/dev/ttydX</code> in blocking mode,
	    a process will wait for the corresponding
	    <code class="filename">cuadX</code>
	    device to become inactive, and then wait for the carrier
	    detect line to go active.  When the
	    <code class="filename">cuadX</code> device is opened, it makes sure the
	    serial port is not already in use by the
	    <code class="filename">ttydX</code>
	    device.  If the port is available, it
	    steals it from the
	    <code class="filename">ttydX</code> device.  Also, the
	    <code class="filename">cuadX</code> device does not care about
	    carrier detect.  With this scheme and an auto-answer
	    modem, remote users can log in and local users can still
	    dial out with the same modem and the system will take care
	    of all the conflicts.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68986320"></a><a id="enable-multiport-serial"></a><p><strong>15.5.</strong></p></td><td align="left" valign="top"><p>How do I enable support for a multi-port serial
	    card?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The section on kernel configuration provides
	    information about configuring the kernel.  For a
	    multi-port serial card, place an <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> line for each
	    serial port on the card in the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=device.hints&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">device.hints</span>(5)</span></a> file.
	    But place the IRQ specifiers on only one of the entries.
	    All of the ports on the card should share one IRQ.  For
	    consistency, use the last serial port to specify the IRQ.
	    Also, specify the following option in the kernel
	    configuration file:</p><pre class="programlisting">options COM_MULTIPORT</pre><p>The following <code class="filename">/boot/device.hints</code>
	    example is for an AST 4-port serial card on
	    IRQ 12:</p><pre class="programlisting">hint.sio.4.at="isa"
hint.sio.4.port="0x2a0"
hint.sio.4.flags="0x701"
hint.sio.5.at="isa"
hint.sio.5.port="0x2a8"
hint.sio.5.flags="0x701"
hint.sio.6.at="isa"
hint.sio.6.port="0x2b0"
hint.sio.6.flags="0x701"
hint.sio.7.at="isa"
hint.sio.7.port="0x2b8"
hint.sio.7.flags="0x701"
hint.sio.7.irq="12"</pre><p>The flags indicate that the master port has minor
	    number <code class="literal">7</code> (<code class="literal">0x700</code>),
	    and all the ports share an IRQ
	    (<code class="literal">0x001</code>).</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp69001552"></a><a id="default-serial-params"></a><p><strong>15.6.</strong></p></td><td align="left" valign="top"><p>Can I set the default serial parameters for a
	    port?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>See the <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/serial.html#serial-hw-config" target="_top">Serial
	      Communications</a> section in the FreeBSD
	    Handbook.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp69004112"></a><a id="enable-dialup"></a><p><strong>15.7.</strong></p></td><td align="left" valign="top"><p>How can I enable dialup logins on my modem?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Refer to the section about <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/dialup.html" target="_top">Dial-in
	      Services</a> in the FreeBSD Handbook.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp69043664"></a><a id="dumb-terminal"></a><p><strong>15.8.</strong></p></td><td align="left" valign="top"><p>How can I connect a dumb terminal to my FreeBSD
	    box?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>This information is in the <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/term.html" target="_top">Terminals</a>
	    section of the FreeBSD Handbook.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp69046224"></a><a id="cannot-tip"></a><p><strong>15.9.</strong></p></td><td align="left" valign="top"><p>Why can I not run <code class="command">tip</code> or
	    <code class="command">cu</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The built-in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> and
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a> utilities can only access the
	    <code class="filename">/var/spool/lock</code> directory via user
	    <code class="systemitem">uucp</code> and group
	    <code class="systemitem">dialer</code>.
	    Use the <code class="systemitem">dialer</code> group to control who has
	    access to the modem or remote systems by adding user accounts
	    to <code class="systemitem">dialer</code>.</p><p>Alternatively, everyone can be configured to run
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a> by typing:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 4511 /usr/bin/cu</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 4511 /usr/bin/tip</code></strong></pre></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ppp.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="misc.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 14. PPP </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 16. Miscellaneous Questions</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>