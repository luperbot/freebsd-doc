<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>FreeBSD Porter's Handbook</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div xml:lang="en" class="book" lang="en"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp60694352"></a>FreeBSD Porter's Handbook</h1></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="authorgroup"><div class="author"><h3 class="author"><span class="orgname">The FreeBSD Documentation Project</span></h3></div></div></div><div>Revision: <a href="https://svnweb.freebsd.org/changeset/doc/"><span class="svnref"></span></a></div><div><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">Copyright © 2000-2014 The FreeBSD Documentation
	Project</p></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="legalnotice"></a><p class="legalnotice-title"><strong>Copyright</strong></p><p>Redistribution and use in source (XML DocBook) and 'compiled'
    forms (XML, HTML, PDF, PostScript, RTF and so forth) with or without
    modification, are permitted provided that the following conditions are
    met:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Redistributions of source code (XML DocBook) must retain the
        above copyright notice, this list of conditions and the following
        disclaimer as the first lines of this file unmodified.</p></li><li class="listitem"><p>Redistributions in compiled form (transformed to other DTDs,
        converted to PDF, PostScript, RTF and other formats) must
        reproduce the above copyright notice, this list of conditions and
        the following disclaimer in the documentation and/or other
        materials provided with the distribution.</p></li></ol></div><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">THIS DOCUMENTATION IS PROVIDED BY THE FREEBSD DOCUMENTATION
      PROJECT "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING,
      BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
      FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
      THE FREEBSD DOCUMENTATION PROJECT BE LIABLE FOR ANY DIRECT, INDIRECT,
      INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS
      OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
      ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
      TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
      USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
      DAMAGE.</p></div></div></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="trademarks"></a><p>FreeBSD is a registered trademark of
  the FreeBSD Foundation.</p><p>UNIX is a registered trademark of The
  Open Group in the United States and other countries.</p><p>Sun, Sun Microsystems, Java, Java
  Virtual Machine, JDK, JRE, JSP, JVM, Netra, OpenJDK,
  Solaris, StarOffice, SunOS
  and VirtualBox are trademarks or registered trademarks of
  Sun Microsystems, Inc. in the United States and other countries.</p><p>Many of the designations used by
  manufacturers and sellers to distinguish their products are claimed
  as trademarks.  Where those designations appear in this document,
  and the FreeBSD Project was aware of the trademark claim, the
  designations have been followed by the <span class="quote">&#8220;<span class="quote">&#8482;</span>&#8221;</span> or the
  <span class="quote">&#8220;<span class="quote">®</span>&#8221;</span> symbol.</p></div></div><div>Last modified on  by .</div></div><div class="docformatnavi">
      [
      <a href="index.html">Split HTML</a>
      /
      
	  Single HTML
	
      ]
    </div><hr /></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="chapter"><a href="#why-port">1. Introduction</a></span></dt><dt><span class="chapter"><a href="#own-port">2. Making a New Port</a></span></dt><dt><span class="chapter"><a href="#quick-porting">3. Quick Porting</a></span></dt><dd><dl><dt><span class="sect1"><a href="#porting-makefile">3.1. Writing the <code class="filename">Makefile</code></a></span></dt><dt><span class="sect1"><a href="#porting-desc">3.2. Writing the Description Files</a></span></dt><dt><span class="sect1"><a href="#porting-checksum">3.3. Creating the Checksum File</a></span></dt><dt><span class="sect1"><a href="#porting-testing">3.4. Testing the Port</a></span></dt><dt><span class="sect1"><a href="#porting-portlint">3.5. Checking the Port with
      <code class="command">portlint</code></a></span></dt><dt><span class="sect1"><a href="#porting-submitting">3.6. Submitting the New Port</a></span></dt></dl></dd><dt><span class="chapter"><a href="#slow-porting">4. Slow Porting</a></span></dt><dd><dl><dt><span class="sect1"><a href="#slow-work">4.1. How Things Work</a></span></dt><dt><span class="sect1"><a href="#slow-sources">4.2. Getting the Original Sources</a></span></dt><dt><span class="sect1"><a href="#slow-modifying">4.3. Modifying the Port</a></span></dt><dt><span class="sect1"><a href="#slow-patch">4.4. Patching</a></span></dt><dt><span class="sect1"><a href="#slow-configure">4.5. Configuring</a></span></dt><dt><span class="sect1"><a href="#slow-user-input">4.6. Handling User Input</a></span></dt></dl></dd><dt><span class="chapter"><a href="#makefiles">5. Configuring the Makefile</a></span></dt><dd><dl><dt><span class="sect1"><a href="#makefile-source">5.1. The Original Source</a></span></dt><dt><span class="sect1"><a href="#makefile-naming">5.2. Naming</a></span></dt><dt><span class="sect1"><a href="#makefile-categories">5.3. Categorization</a></span></dt><dt><span class="sect1"><a href="#makefile-distfiles">5.4. The Distribution Files</a></span></dt><dt><span class="sect1"><a href="#makefile-maintainer">5.5. <code class="varname">MAINTAINER</code></a></span></dt><dt><span class="sect1"><a href="#makefile-comment">5.6. <code class="varname">COMMENT</code></a></span></dt><dt><span class="sect1"><a href="#makefile-portscout">5.7. <code class="varname">PORTSCOUT</code></a></span></dt><dt><span class="sect1"><a href="#makefile-depend">5.8. Dependencies</a></span></dt><dt><span class="sect1"><a href="#makefile-masterdir">5.9. <code class="varname">MASTERDIR</code></a></span></dt><dt><span class="sect1"><a href="#makefile-manpages">5.10. Man Pages</a></span></dt><dt><span class="sect1"><a href="#makefile-info">5.11. Info Files</a></span></dt><dt><span class="sect1"><a href="#makefile-options">5.12. Makefile Options</a></span></dt><dt><span class="sect1"><a href="#makefile-wrkdir">5.13. Specifying the Working Directory</a></span></dt><dt><span class="sect1"><a href="#conflicts">5.14. Conflict Handling</a></span></dt><dt><span class="sect1"><a href="#install">5.15. Installing Files</a></span></dt></dl></dd><dt><span class="chapter"><a href="#special">6. Special Considerations</a></span></dt><dd><dl><dt><span class="sect1"><a href="#staging">6.1. Staging</a></span></dt><dt><span class="sect1"><a href="#bundled-libs">6.2. Bundled Libraries</a></span></dt><dt><span class="sect1"><a href="#porting-shlibs">6.3. Shared Libraries</a></span></dt><dt><span class="sect1"><a href="#porting-restrictions">6.4. Ports with Distribution Restrictions or Legal
      Concerns</a></span></dt><dt><span class="sect1"><a href="#building">6.5. Building Mechanisms</a></span></dt><dt><span class="sect1"><a href="#using-autotools">6.6. Using GNU Autotools</a></span></dt><dt><span class="sect1"><a href="#using-gettext">6.7. Using GNU <code class="literal">gettext</code></a></span></dt><dt><span class="sect1"><a href="#using-perl">6.8. Using <span class="application">Perl</span></a></span></dt><dt><span class="sect1"><a href="#using-x11">6.9. Using X11</a></span></dt><dt><span class="sect1"><a href="#using-gnome">6.10. Using GNOME</a></span></dt><dt><span class="sect1"><a href="#using-qt">6.11. Using Qt</a></span></dt><dt><span class="sect1"><a href="#using-kde">6.12. Using KDE</a></span></dt><dt><span class="sect1"><a href="#using-java">6.13. Using Java</a></span></dt><dt><span class="sect1"><a href="#using-php">6.14. Web Applications, Apache and PHP</a></span></dt><dt><span class="sect1"><a href="#using-python">6.15. Using Python</a></span></dt><dt><span class="sect1"><a href="#using-tcl">6.16. Using <span class="application">Tcl/Tk</span></a></span></dt><dt><span class="sect1"><a href="#using-emacs">6.17. Using Emacs</a></span></dt><dt><span class="sect1"><a href="#using-ruby">6.18. Using Ruby</a></span></dt><dt><span class="sect1"><a href="#using-sdl">6.19. Using SDL</a></span></dt><dt><span class="sect1"><a href="#using-wx">6.20. Using <span class="application">wxWidgets</span></a></span></dt><dt><span class="sect1"><a href="#using-lua">6.21. Using <span class="application">Lua</span></a></span></dt><dt><span class="sect1"><a href="#using-iconv">6.22. Using <code class="command">iconv</code></a></span></dt><dt><span class="sect1"><a href="#using-xfce">6.23. Using Xfce</a></span></dt><dt><span class="sect1"><a href="#using-mozilla">6.24. Using Mozilla</a></span></dt><dt><span class="sect1"><a href="#using-databases">6.25. Using Databases</a></span></dt><dt><span class="sect1"><a href="#rc-scripts">6.26. Starting and Stopping Services (<code class="literal">rc</code>
      Scripts)</a></span></dt><dt><span class="sect1"><a href="#users-and-groups">6.27. Adding Users and Groups</a></span></dt><dt><span class="sect1"><a href="#requiring-kernel-sources">6.28. Ports That Rely on Kernel Sources</a></span></dt></dl></dd><dt><span class="chapter"><a href="#plist">7. Advanced <code class="filename">pkg-plist</code> Practices</a></span></dt><dd><dl><dt><span class="sect1"><a href="#plist-sub">7.1. Changing <code class="filename">pkg-plist</code> Based on Make
      Variables</a></span></dt><dt><span class="sect1"><a href="#plist-cleaning">7.2. Empty Directories</a></span></dt><dt><span class="sect1"><a href="#plist-config">7.3. Configuration Files</a></span></dt><dt><span class="sect1"><a href="#plist-dynamic">7.4. Dynamic Versus Static Package List</a></span></dt><dt><span class="sect1"><a href="#plist-autoplist">7.5. Automated Package List Creation</a></span></dt><dt><span class="sect1"><a href="#plist-keywords">7.6. Expanding Package List with Keywords</a></span></dt></dl></dd><dt><span class="chapter"><a href="#pkg-files">8. <code class="filename">pkg-*</code></a></span></dt><dd><dl><dt><span class="sect1"><a href="#porting-message">8.1. <code class="filename">pkg-message</code></a></span></dt><dt><span class="sect1"><a href="#pkg-install">8.2. <code class="filename">pkg-install</code></a></span></dt><dt><span class="sect1"><a href="#pkg-deinstall">8.3. <code class="filename">pkg-deinstall</code></a></span></dt><dt><span class="sect1"><a href="#pkg-names">8.4. Changing the Names of
      <code class="filename">pkg-<em class="replaceable"><code>*</code></em></code></a></span></dt><dt><span class="sect1"><a href="#using-sub-files">8.5. Making Use of <code class="varname">SUB_FILES</code> and
      <code class="varname">SUB_LIST</code></a></span></dt></dl></dd><dt><span class="chapter"><a href="#testing">9. Testing the Port</a></span></dt><dd><dl><dt><span class="sect1"><a href="#make-describe">9.1. Running <code class="command">make describe</code></a></span></dt><dt><span class="sect1"><a href="#testing-portlint">9.2. Portlint</a></span></dt><dt><span class="sect1"><a href="#testing-porttools">9.3. Port Tools</a></span></dt><dt><span class="sect1"><a href="#porting-prefix">9.4. <code class="varname">PREFIX</code> and
      <code class="varname">DESTDIR</code></a></span></dt><dt><span class="sect1"><a href="#testing-poudriere">9.5. <span class="application">Poudriere</span></a></span></dt><dt><span class="sect1"><a href="#testing-tinderbox">9.6. Tinderbox</a></span></dt></dl></dd><dt><span class="chapter"><a href="#port-upgrading">10. Upgrading a Port</a></span></dt><dd><dl><dt><span class="sect1"><a href="#svn-diff">10.1. Using <span class="application">Subversion</span> to Make
      Patches</a></span></dt><dt><span class="sect1"><a href="#moved-and-updating-files">10.2. <code class="filename">UPDATING</code> and
      <code class="filename">MOVED</code></a></span></dt></dl></dd><dt><span class="chapter"><a href="#security">11. Security</a></span></dt><dd><dl><dt><span class="sect1"><a href="#security-intro">11.1. Why Security is So Important</a></span></dt><dt><span class="sect1"><a href="#security-fix">11.2. Fixing Security Vulnerabilities</a></span></dt><dt><span class="sect1"><a href="#security-notify">11.3. Keeping the Community Informed</a></span></dt></dl></dd><dt><span class="chapter"><a href="#porting-dads">12. Dos and Don'ts</a></span></dt><dd><dl><dt><span class="sect1"><a href="#dads-intro">12.1. Introduction</a></span></dt><dt><span class="sect1"><a href="#porting-wrkdir">12.2. <code class="varname">WRKDIR</code></a></span></dt><dt><span class="sect1"><a href="#porting-wrkdirprefix">12.3. <code class="varname">WRKDIRPREFIX</code></a></span></dt><dt><span class="sect1"><a href="#porting-versions">12.4. Differentiating Operating Systems and OS Versions</a></span></dt><dt><span class="sect1"><a href="#dads-after-port-mk">12.5. Writing Something After
      <code class="filename">bsd.port.mk</code></a></span></dt><dt><span class="sect1"><a href="#dads-sh-exec">12.6. Use the <code class="function">exec</code> Statement in Wrapper
      Scripts</a></span></dt><dt><span class="sect1"><a href="#dads-rational">12.7. Do Things Rationally</a></span></dt><dt><span class="sect1"><a href="#dads-cc">12.8. Respect Both <code class="varname">CC</code> and
      <code class="varname">CXX</code></a></span></dt><dt><span class="sect1"><a href="#dads-cflags">12.9. Respect <code class="varname">CFLAGS</code></a></span></dt><dt><span class="sect1"><a href="#dads-feedback">12.10. Feedback</a></span></dt><dt><span class="sect1"><a href="#dads-readme">12.11. <code class="filename">README.html</code></a></span></dt><dt><span class="sect1"><a href="#dads-arch-neutral">12.12. Marking a Port as Architecture Neutral</a></span></dt><dt><span class="sect1"><a href="#dads-noinstall">12.13. Marking a Port Not Installable with
      <code class="varname">BROKEN</code>, <code class="varname">FORBIDDEN</code>, or
      <code class="varname">IGNORE</code></a></span></dt><dt><span class="sect1"><a href="#dads-deprecated">12.14. Marking a Port for Removal with
      <code class="varname">DEPRECATED</code> or
      <code class="varname">EXPIRATION_DATE</code></a></span></dt><dt><span class="sect1"><a href="#dads-dot-error">12.15. Avoid Use of the <code class="literal">.error</code>
      Construct</a></span></dt><dt><span class="sect1"><a href="#dads-sysctl">12.16. Usage of <code class="filename">sysctl</code></a></span></dt><dt><span class="sect1"><a href="#dads-rerolling-distfiles">12.17. Rerolling Distfiles</a></span></dt><dt><span class="sect1"><a href="#dads-avoiding-linuxisms">12.18. Avoiding Linuxisms</a></span></dt><dt><span class="sect1"><a href="#dads-misc">12.19. Miscellanea</a></span></dt></dl></dd><dt><span class="chapter"><a href="#porting-samplem">13. A Sample <code class="filename">Makefile</code></a></span></dt><dt><span class="chapter"><a href="#keeping-up">14. Keeping Up</a></span></dt><dd><dl><dt><span class="sect1"><a href="#freshports">14.1. FreshPorts</a></span></dt><dt><span class="sect1"><a href="#svnweb">14.2. The Web Interface to the Source Repository</a></span></dt><dt><span class="sect1"><a href="#ports-mailing-list">14.3. The FreeBSD Ports Mailing List</a></span></dt><dt><span class="sect1"><a href="#build-cluster">14.4. The FreeBSD Port Building Cluster</a></span></dt><dt><span class="sect1"><a href="#distfile-survey">14.5. Portscout: the FreeBSD Ports Distfile Scanner</a></span></dt><dt><span class="sect1"><a href="#portsmon">14.6. The FreeBSD Ports Monitoring System</a></span></dt></dl></dd><dt><span class="chapter"><a href="#uses">15. Values of
    <code class="varname">USES</code></a></span></dt><dt><span class="chapter"><a href="#versions">16. <code class="literal">__FreeBSD_version</code>
    Values</a></span></dt></dl></div><div class="list-of-tables"><div class="toc-title">List of Tables</div><dl><dt>5.1. <a href="#idp62962128">Package Naming Examples</a></dt><dt>5.2. <a href="#idp65877456">Examples of <code class="varname">DISTVERSION</code> and the
	  Derived <code class="varname">PORTVERSION</code></a></dt><dt>5.3. <a href="#makefile-master_sites-shortcut">Shortcuts for
	      <code class="varname">MASTER_SITE_<em class="replaceable"><code>*</code></em></code>
	      Macros</a></dt><dt>5.4. <a href="#makefile-master_sites-popular">Magic <code class="varname">MASTER_SITES</code>
	    Macros</a></dt><dt>5.5. <a href="#makefile-master_sites-github-description"><code class="varname">USE_GITHUB</code> Description</a></dt><dt>5.6. <a href="#makefile-use-vars-table"><code class="varname">USE_<em class="replaceable"><code>*</code></em></code></a></dt><dt>6.1. <a href="#using-configure-variables">Variables for Ports That Use
	  <code class="command">configure</code></a></dt><dt>6.2. <a href="#using-cmake-variables">Variables for Ports That Use
	  <code class="command">cmake</code></a></dt><dt>6.3. <a href="#using-cmake-user-variables">Variables the Users Can Define for
	  <code class="command">cmake</code> Builds</a></dt><dt>6.4. <a href="#using-scons-variables">Variables for Ports That Use
	  <code class="command">scons</code></a></dt><dt>6.5. <a href="#using-perl-variables">Read-Only Variables for Ports That Use
	<span class="application">Perl</span></a></dt><dt>6.6. <a href="#using-xorg-variables">Variables for Ports That Use X</a></dt><dt>6.7. <a href="#using-qt-variables">Variables Provided to Ports That Use Qt</a></dt><dt>6.8. <a href="#using-qt-library-list">Available Qt Library Components</a></dt><dt>6.9. <a href="#using-qt-tools-list">Available Qt Tool Components</a></dt><dt>6.10. <a href="#using-qt-plugins-list">Available Qt Plugin Components</a></dt><dt>6.11. <a href="#using-qmake-variables">Variables for Ports That Use
	  <code class="command">qmake</code></a></dt><dt>6.12. <a href="#using-kde-components">Available KDE 4 Components</a></dt><dt>6.13. <a href="#using-java-variables">Variables Which May be Set by Ports That Use
	  Java</a></dt><dt>6.14. <a href="#using-java-variables2">Variables Provided to Ports That Use Java</a></dt><dt>6.15. <a href="#using-java-constants">Constants Defined for Ports That Use Java</a></dt><dt>6.16. <a href="#using-apache-variables">Variables for Ports That Use Apache</a></dt><dt>6.17. <a href="#using-apache-modules">Useful Variables for Porting Apache Modules</a></dt><dt>6.18. <a href="#using-php-variables">Variables for Ports That Use PHP</a></dt><dt>6.19. <a href="#using-python-variables">Most Useful Variables for Ports That Use Python</a></dt><dt>6.20. <a href="#using-tcl-variables">The Most Useful Read-Only Variables for Ports That Use
	<span class="application">Tcl/Tk</span></a></dt><dt>6.21. <a href="#using-ruby-variables">Useful Variables for Ports That Use Ruby</a></dt><dt>6.22. <a href="#using-ruby-variables-ro">Selected Read-Only Variables for Ports That Use
	Ruby</a></dt><dt>6.23. <a href="#wx-ver-sel-table">Variables to Select
	  <span class="application">wxWidgets</span> Versions</a></dt><dt>6.24. <a href="#wx-widgets-versions-table">Available <span class="application">wxWidgets</span>
	  Versions</a></dt><dt>6.25. <a href="#wx-widgets-versions-specification"><span class="application">wxWidgets</span> Version
	  Specifications</a></dt><dt>6.26. <a href="#wx-widgets-preferred-version">Variables to Select Preferred
	  <span class="application">wxWidgets</span> Versions</a></dt><dt>6.27. <a href="#wx-widgets-components-table">Available <span class="application">wxWidgets</span>
	  Components</a></dt><dt>6.28. <a href="#wx-widgets-dependency-table">Available <span class="application">wxWidgets</span>
	  Dependency Types</a></dt><dt>6.29. <a href="#wx-def-dep-types">Default <span class="application">wxWidgets</span>
	  Dependency Types</a></dt><dt>6.30. <a href="#wx-unicode-var-table">Variables to Select Unicode in
	  <span class="application">wxWidgets</span>
	  Versions</a></dt><dt>6.31. <a href="#wx-widgets-variables">Variables Defined for Ports That Use
	  <span class="application">wxWidgets</span></a></dt><dt>6.32. <a href="#wx-conf-args-values">Legal Values for
	  <code class="varname">WX_CONF_ARGS</code></a></dt><dt>6.33. <a href="#using-lua-variables-ports">Variables Defined for Ports That Use
	  <span class="application">Lua</span></a></dt><dt>6.34. <a href="#using-mozilla-variables">Variables for Ports That Use Mozilla</a></dt><dt>6.35. <a href="#using-databases-variables">Variables for Ports Using Databases</a></dt><dt>10.1. <a href="#table-svn-up"><span class="application">Subversion</span> Update File
	Prefixes</a></dt><dt>15.1. <a href="#uses-values-table">Values of <code class="varname">USES</code></a></dt><dt>16.1. <a href="#freebsd-versions-table"><code class="literal">__FreeBSD_version</code> Values</a></dt></dl></div><div class="list-of-examples"><div class="toc-title">List of Examples</div><dl><dt>5.1. <a href="#makefile-master_sites-github-ex1">Simple Use of <code class="varname">USE_GITHUB</code></a></dt><dt>5.2. <a href="#makefile-master_sites-github-ex2">More Complete Use of
	  <code class="varname">USE_GITHUB</code></a></dt><dt>5.3. <a href="#makefile-master_sites-github-ex3">Use of <code class="varname">USE_GITHUB</code> with
	  <code class="varname">DISTVERSIONPREFIX</code></a></dt><dt>5.4. <a href="#makefile-master_sites-github-multi">Use of <code class="varname">USE_GITHUB</code> with Multiple
	    Distribution Files</a></dt><dt>5.5. <a href="#ports-master-sites-n-example-simple-use-one-file-per-site">Simplified Use of <code class="literal">MASTER_SITES:n</code>
	    with One File Per Site</a></dt><dt>5.6. <a href="#ports-master-sites-n-example-simple-use-more-than-one-file-per-site">Simplified Use of <code class="literal">MASTER_SITES:n</code>
	    with More Than One File Per Site</a></dt><dt>5.7. <a href="#ports-master-sites-n-example-detailed-use-master-site-subdir">Detailed Use of
		    <code class="literal">MASTER_SITES:n</code> in
		    <code class="varname">MASTER_SITE_SUBDIR</code></a></dt><dt>5.8. <a href="#ports-master-sites-n-example-detailed-use-complete-example-master-sites">Detailed Use of
		    <code class="literal">MASTER_SITES:n</code> with Comma
		    Operator, Multiple Files, Multiple Sites and
		    Multiple Subdirectories</a></dt><dt>5.9. <a href="#ports-master-sites-n-example-detailed-use-master-site-sourceforge">Detailed Use of <code class="literal">MASTER_SITES:n</code>
		with SourceForge (<code class="literal">SF</code>)</a></dt><dt>5.10. <a href="#ports-master-sites-n-example-detailed-use-patch-sites">Simplified Use of
		<code class="literal">MASTER_SITES:n</code> with
		<code class="varname">PATCH_SITES</code></a></dt><dt>5.11. <a href="#ports-master-sites-n-example-always-keep-distfiles">Use of
	  <code class="varname">ALWAYS_KEEP_DISTFILES</code></a></dt><dt>5.12. <a href="#makefile-automatic-dependencies-bad">Wrong Declaration of an Optional Dependency</a></dt><dt>5.13. <a href="#makefile-automatic-dependencies-good">Correct Declaration of an Optional Dependency</a></dt><dt>5.14. <a href="#ports-options-simple-use">Simple Use of <code class="varname">OPTIONS</code></a></dt><dt>5.15. <a href="#ports-options-check-unset">Check for Unset Port
	    <code class="varname">OPTIONS</code></a></dt><dt>5.16. <a href="#ports-options-practical-use">Practical Use of <code class="varname">OPTIONS</code></a></dt><dt>5.17. <a href="#makefile-options-auto-activation-bad">Wrong Handling of an Option</a></dt><dt>5.18. <a href="#makefile-options-auto-activation-good">Correct Handling of an Option</a></dt><dt>6.1. <a href="#using-cmake-example"><code class="literal">USES= cmake</code> Example</a></dt><dt>6.2. <a href="#use-perl-dependency-example">Perl Dependency Example</a></dt><dt>6.3. <a href="#use-xorg-example"><code class="varname">USE_XORG</code> Example</a></dt><dt>6.4. <a href="#using-x11-vars">Using X11-Related Variables</a></dt><dt>6.5. <a href="#qt4-components-example">Selecting Qt 4 Components</a></dt><dt>6.6. <a href="#using-qmake-example"><code class="literal">USES= qmake</code> Example</a></dt><dt>6.7. <a href="#kde4-components-example"><code class="varname">USE_KDE4</code> Example</a></dt><dt>6.8. <a href="#pear-makefile">Example Makefile for PEAR Class</a></dt><dt>6.9. <a href="#horde-Makefile">Example Makefile for <span class="application">Horde</span>
	    Module</a></dt><dt>6.10. <a href="#python-Makefile">Makefile for a Simple <span class="application">Python</span>
	    Module</a></dt><dt>6.11. <a href="#wx-components-example">Selecting <span class="application">wxWidgets</span>
	  Components</a></dt><dt>6.12. <a href="#wx-ver-det-example">Detecting Installed
	  <span class="application">wxWidgets</span> Versions and
	  Components</a></dt><dt>6.13. <a href="#wx-premk-example">Using <span class="application">wxWidgets</span> Variables
	  in Commands</a></dt><dt>6.14. <a href="#iconv-simple-use">Simple <code class="command">iconv</code> Usage</a></dt><dt>6.15. <a href="#iconv-configure-use"><code class="command">iconv</code> Usage with
	<code class="command">configure</code></a></dt><dt>6.16. <a href="#iconv-reinplace">Fixing Hardcoded <code class="literal">-liconv</code></a></dt><dt>6.17. <a href="#iconv-conditional">Checking for Native <code class="command">iconv</code>
	Availability</a></dt><dt>6.18. <a href="#use-xfce"><code class="varname">USES=xfce</code> Example</a></dt><dt>6.19. <a href="#use-xfce-gtk3">Using Xfce's Own GTK3 Widgets</a></dt><dt>7.1. <a href="#plist-keywords-fc-example">Example of a <code class="literal">@dirrmtryecho</code>
	  Keyword</a></dt><dt>7.2. <a href="#plist-keywords-sample-example">Real Life Example, How <code class="literal">@sample</code>
	  is Implemented</a></dt><dt>9.1. <a href="#testing-poudriere-sets-perl">Using <code class="filename">make.conf</code> to Change Default
	  <span class="application">Perl</span></a></dt><dt>12.1. <a href="#dot-error-breaks-index">How to Avoid Using <code class="literal">.error</code></a></dt><dt>15.1. <a href="#idp69976400">Typical Use</a></dt></dl></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="why-port"></a>Chapter 1. Introduction</h1></div></div></div><p>The FreeBSD Ports Collection is the way almost everyone installs
    applications ("ports") on FreeBSD.  Like everything else about FreeBSD,
    it is primarily a volunteer effort.  It is important to keep this
    in mind when reading this document.</p><p>In FreeBSD, anyone may submit a new port, or volunteer to
    maintain an existing unmaintained port. No special commit
    privilege is needed.</p></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="own-port"></a>Chapter 2. Making a New Port</h1></div></div></div><p>Interested in making a new port, or upgrading existing ports?
    Great!</p><p>What follows are some guidelines for creating a new port for
    FreeBSD.  To upgrade an existing port, read
    this, then read <a class="xref" href="#port-upgrading" title="Chapter 10. Upgrading a Port">Chapter 10, <em>Upgrading a Port</em></a>.</p><p>When this document is not sufficiently detailed,
    refer to <code class="filename">/usr/ports/Mk/bsd.port.mk</code>, which is
    included by all port <code class="filename">Makefile</code>s.  Even those
    not hacking <code class="filename">Makefile</code>s daily can gain much
    knowledge from it.  Additionally, specific questions can be sent to the
    <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">FreeBSD ports mailing list</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Only a fraction of the variables
      (<code class="varname"><em class="replaceable"><code>VAR</code></em></code>) that can be
      overridden are mentioned in this document.  Most (if not all)
      are documented at the start of
      <code class="filename">/usr/ports/Mk/bsd.port.mk</code>; the others
      probably ought to be.  Note that this file uses a non-standard
      tab setting: <span class="application">Emacs</span> and
      <span class="application">Vim</span> will recognize the setting on
      loading the file.  Both <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a> and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ex&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ex</span>(1)</span></a> can be set to
      use the correct value by typing
      <code class="command">:set tabstop=4</code> once the file has been
      loaded.</p></div><p>
    Looking for something easy to start with? Take a look at the
    <a class="link" href="http://wiki.freebsd.org/WantedPorts" target="_top">list of
      requested ports</a> and see if you can work on one (or
    more).</p></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="quick-porting"></a>Chapter 3. Quick Porting</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="sect1"><a href="#porting-makefile">3.1. Writing the <code class="filename">Makefile</code></a></span></dt><dt><span class="sect1"><a href="#porting-desc">3.2. Writing the Description Files</a></span></dt><dt><span class="sect1"><a href="#porting-checksum">3.3. Creating the Checksum File</a></span></dt><dt><span class="sect1"><a href="#porting-testing">3.4. Testing the Port</a></span></dt><dt><span class="sect1"><a href="#porting-portlint">3.5. Checking the Port with
      <code class="command">portlint</code></a></span></dt><dt><span class="sect1"><a href="#porting-submitting">3.6. Submitting the New Port</a></span></dt></dl></div><p>This section describes how to quickly create a new port.  For
    applications where this quick method is not adequate, the full
    <span class="quote">&#8220;<span class="quote">Slow Porting</span>&#8221;</span> process is described in
    <a class="xref" href="#slow-porting" title="Chapter 4. Slow Porting">Chapter 4, <em>Slow Porting</em></a>.</p><p>First, get the original tarball and put it into
    <code class="varname">DISTDIR</code>, which defaults to
    <code class="filename">/usr/ports/distfiles</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">These steps assume that the software compiled
      out-of-the-box.  In other words, absolutely no changes were
      required for the application to work on a FreeBSD system.  If
      anything had to be changed, refer to <a class="xref" href="#slow-porting" title="Chapter 4. Slow Porting">Chapter 4, <em>Slow Porting</em></a>.</p></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">It is recommended to set the <code class="varname">DEVELOPER</code>
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> variable in <code class="filename">/etc/make.conf</code>
      before getting into porting.</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo DEVELOPER=yes &gt;&gt; /etc/make.conf</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">This setting enables the <span class="quote">&#8220;<span class="quote">developer mode</span>&#8221;</span>
      that displays deprecation warnings and activates some further
      quality checks on calling <code class="command">make</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-makefile"></a>3.1. Writing the <code class="filename">Makefile</code></h2></div></div></div><p>The minimal <code class="filename">Makefile</code> would look
      something like this:</p><pre class="programlisting"># $FreeBSD$

PORTNAME=	oneko
PORTVERSION=	1.1b
CATEGORIES=	games
MASTER_SITES=	ftp://ftp.cs.columbia.edu/archives/X11R5/contrib/

MAINTAINER=	youremail@example.com
COMMENT=	Cat chasing a mouse all over the screen

.include &lt;bsd.port.mk&gt;</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">In some cases, the <code class="filename">Makefile</code> of an
	existing port may contain additional lines in the header,
	such as the name of the port and the date it was created.
	This additional information has been declared obsolete, and
	is being phased out.</p></div><p>Try to figure it out.  Do not worry about the
      contents of the <code class="literal">$FreeBSD$</code>
      line, it will be filled in automatically by
      <span class="application">Subversion</span> when the port is
      imported to our main ports tree.  A more detailed
      example is shown in the
      <a class="link" href="#porting-samplem" title="Chapter 13. A Sample Makefile">sample Makefile</a>
      section.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-desc"></a>3.2. Writing the Description Files</h2></div></div></div><p>There are two description files that are required for
      any port, whether they actually package or not.  They are
      <code class="filename">pkg-descr</code> and
      <code class="filename">pkg-plist</code>.  Their
      <code class="filename">pkg-</code> prefix distinguishes them from other
      files.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-pkg-descr"></a>3.2.1. <code class="filename">pkg-descr</code></h3></div></div></div><p>This is a longer description of the port.  One to a few
	paragraphs concisely explaining what the port does is
	sufficient.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">This is <span class="emphasis"><em>not</em></span> a manual or an
	  in-depth description on how to use or compile the port!
	  <span class="emphasis"><em>Please be careful when copying from the
	  <code class="filename">README</code> or manpage</em></span>.  Too
	  often they are not a concise description of the port or
	  are in an awkward format.  For example, manpages have
	  justified spacing, which looks particularly bad with
	  monospaced fonts.</p></div><p>A well-written <code class="filename">pkg-descr</code> describes
	the port completely enough that users would not have to
	consult the documentation or visit the website to understand
	what the software does, how it can be useful, or what
	particularly nice features it has.  Mentioning certain
	requirements like a graphical toolkit, heavy dependencies,
	runtime environment, or implementation languages help users
	decide whether this port will work for them.</p><p>Include a URL to the official WWW homepage.  Prepend
	<span class="emphasis"><em>one</em></span> of the websites (pick the most
	common one) with <code class="literal">WWW:</code> (followed by single
	space) so that automated tools will work correctly.  If the
	URI is the root of the website or directory, it must be
	terminated with a slash.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">If the listed webpage for a port is not available, try
	  to search the Internet first to see if the official site
	  moved, was renamed, or is hosted elsewhere.</p></div><p>This example shows how
	<code class="filename">pkg-descr</code> looks:</p><pre class="programlisting">This is a port of oneko, in which a cat chases a poor mouse all over
the screen.
 :
(etc.)

WWW: http://www.oneko.org/</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-pkg-plist"></a>3.2.2. <code class="filename">pkg-plist</code></h3></div></div></div><p>This file lists all the files installed by the port.  It
	is also called the <span class="quote">&#8220;<span class="quote">packing list</span>&#8221;</span> because the
	package is generated by packing the files listed here.  The
	pathnames are relative to the installation prefix (usually
	<code class="filename">/usr/local</code>).</p><p>Here is a small example:</p><pre class="programlisting">bin/oneko
man/man1/oneko.1.gz
lib/X11/app-defaults/Oneko
lib/X11/oneko/cat1.xpm
lib/X11/oneko/cat2.xpm
lib/X11/oneko/mouse.xpm</pre><p>Refer to the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg-create&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg-create</span>(8)</span></a> manual page for details
	on the packing list.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">It is recommended to keep all the filenames in
	  this file sorted alphabetically.  It will make verifying
	  changes when upgrading the port much easier.</p></div><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">Creating a packing list manually can be a very tedious
	  task.  If the port installs a large numbers of files,
	  <a class="link" href="#plist-autoplist" title="7.5. Automated Package List Creation">creating the packing list
	    automatically</a> might save time.</p></div><p>There is only one case when
	<code class="filename">pkg-plist</code> can be omitted from a port.
	If the port installs just a handful of files, list them in
	<code class="varname">PLIST_FILES</code>, within the
	port's <code class="filename">Makefile</code>.  For instance, we
	could get along without <code class="filename">pkg-plist</code> in
	the above <code class="filename">oneko</code> port by adding these
	lines to the <code class="filename">Makefile</code>:</p><pre class="programlisting">PLIST_FILES=	bin/oneko \
		man/man1/oneko.1.gz \
		lib/X11/app-defaults/Oneko \
		lib/X11/oneko/cat1.xpm \
		lib/X11/oneko/cat2.xpm \
		lib/X11/oneko/mouse.xpm</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Usage of <code class="varname">PLIST_FILES</code> should not be
	  abused.  When looking for the origin of a file, people
	  usually try to <span class="application">grep</span> through the
	  <code class="filename">pkg-plist</code> files in the ports tree.
	  Listing files in <code class="varname">PLIST_FILES</code> in the
	  <code class="filename">Makefile</code> makes that search more
	  difficult.</p></div><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">If a port needs to create an empty directory, or creates
	  directories outside of <code class="filename">${PREFIX}</code> during
	  installation, refer to <a class="xref" href="#plist-dir-cleaning" title="7.2.1. Cleaning Up Empty Directories">Section 7.2.1, &#8220;Cleaning Up Empty Directories&#8221;</a>
	  for more information.</p></div><p>The price for this way of listing a port's files and
	directories is that the keywords described in
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg-create&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg-create</span>(8)</span></a> and <a class="xref" href="#plist-keywords" title="7.6. Expanding Package List with Keywords">Section 7.6, &#8220;Expanding Package List with Keywords&#8221;</a> cannot
	be used.  Therefore, it is suitable
	only for simple ports and makes them even simpler.  At the
	same time, it has the advantage of reducing the number of
	files in the ports collection.  Please consider using this
	technique before resorting to
	<code class="filename">pkg-plist</code>.</p><p>Later we will see how <code class="filename">pkg-plist</code>
	and <code class="varname">PLIST_FILES</code> can be used to fulfill
	<a class="link" href="#plist" title="Chapter 7. Advanced pkg-plist Practices">more sophisticated
	  tasks</a>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-checksum"></a>3.3. Creating the Checksum File</h2></div></div></div><p>Just type <code class="command">make makesum</code>.  The ports make
      rules will automatically generate the file
      <code class="filename">distinfo</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-testing"></a>3.4. Testing the Port</h2></div></div></div><p>Make sure that the port rules do exactly what
      is desired, including packaging up the port.  These
      are the important points to verify:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">pkg-plist</code> does not contain
	  anything not installed by the port.</p></li><li class="listitem"><p><code class="filename">pkg-plist</code> contains everything
	  that is installed by the port.</p></li><li class="listitem"><p>The port can be installed using the
	  <code class="buildtarget">install</code> target.  This verifies
	  that the install script works correctly.</p></li><li class="listitem"><p>The port can be deinstalled properly using the
	  <code class="buildtarget">deinstall</code> target.  This
	  verifies that the deinstall script works correctly.</p></li><li class="listitem"><p>Make sure that <code class="command">make package</code> can be
	  run as a normal user (that is, not as
	  <code class="systemitem">root</code>).  If that
	  fails, <code class="literal">NEED_ROOT=yes</code> must be added to
	  the port <code class="filename">Makefile</code>.</p></li></ul></div><div class="procedure"><a id="idp62057808"></a><div class="procedure-title">Procedure 3.1. Recommended Test Ordering</div><ol class="procedure" type="1"><li class="step"><p><code class="command">make stage</code></p></li><li class="step"><p><code class="command">make check-orphans</code></p></li><li class="step"><p><code class="command">make package</code></p></li><li class="step"><p><code class="command">make install</code></p></li><li class="step"><p><code class="command">make deinstall</code></p></li><li class="step"><p><code class="command">pkg add
	    <em class="replaceable"><code>package-filename</code></em></code></p></li><li class="step"><p><code class="command">make package</code> (as user)</p></li></ol></div><p>Make certain no warnings are shown in any of
      the stages.</p><p>Thorough automated testing can be done with
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/tinderbox/pkg-descr">ports-mgmt/tinderbox</a> or
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/poudriere/pkg-descr">ports-mgmt/poudriere</a> from the
      Ports Collection.  These applications maintain
      <code class="literal">jails</code> where all of the steps shown above
      can be tested without affecting the state of the host
      system.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-portlint"></a>3.5. Checking the Port with
      <code class="command">portlint</code></h2></div></div></div><p>Please use <code class="command">portlint</code> to see if the port
      conforms to our guidelines.  The
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portlint/pkg-descr">ports-mgmt/portlint</a>
      program is part of the ports collection.  In particular,
      check that the
      <a class="link" href="#porting-samplem" title="Chapter 13. A Sample Makefile">Makefile</a> is in the
      right shape and the
      <a class="link" href="#porting-pkgname" title="5.2.4. Package Naming Conventions">package</a> is named
      appropriately.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-submitting"></a>3.6. Submitting the New Port</h2></div></div></div><p>Before submitting the new port, read the
      <a class="link" href="#porting-dads" title="Chapter 12. Dos and Don'ts">DOs and DON'Ts</a>
      section.</p><p>Once happy with the port, the only thing remaining is to
      put it in the main FreeBSD ports tree and make everybody else
      happy about it too.  We do not need the
      <code class="filename">work</code> directory or the
      <code class="filename">pkgname.tgz</code> package, so delete them
      now.</p><p>Next, build the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">shar</span>(1)</span></a> file.  Assuming the port is
      called <code class="literal">oneko</code>, <code class="command">cd</code> to the
      directory above where the <code class="literal">oneko</code> directory
      is located, and then type:
      <code class="command">shar `find oneko` &gt; oneko.shar</code></p><p>To submit <code class="filename">oneko.shar</code>, use the <a class="link" href="https://bugs.freebsd.org/submit/" target="_top">bug submit
	form</a> (category <code class="literal">Ports Tree</code>).
      Add a short
      description of the program to the Description field of the PR
      (perhaps a short version of <code class="varname">COMMENT</code>), and
      do not forget to add <code class="filename">oneko.shar</code> as an
      attachment.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Giving a good description in the summary of the problem
	report makes the work of port committers a lot easier.  We
	prefer something like <span class="quote">&#8220;<span class="quote">New port:
	  <em class="replaceable"><code>category</code></em>/<em class="replaceable"><code>portname</code></em> <em class="replaceable"><code>short description of
	    the port</code></em></span>&#8221;</span> for new ports.  Using this
	scheme makes it easier and faster to begin the work of
	committing the new port.</p></div><p>One more time, <span class="emphasis"><em>do not include the original
	source distfile, the <code class="filename">work</code> directory, or
	the package built with
	<code class="command">make package</code></em></span>; and, do use
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">shar</span>(1)</span></a> for new ports, not <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>.</p><p>After submitting the port, please be patient.  The time
      needed to include a new port in FreeBSD can vary from a few days
      to a few months.  The list of pending port
      <acronym class="acronym">PR</acronym>s can be viewed at <a class="link" href="http://www.FreeBSD.org/cgi/query-pr-summary.cgi?category=ports" target="_top">http://www.FreeBSD.org/cgi/query-pr-summary.cgi?category=ports</a>.</p><p>After looking at the new port, we will reply if necessary,
      and commit it to the tree.  The submitter's name will also be added to the
      list of <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/contributors/contrib-additional.html" target="_top">Additional
	FreeBSD Contributors</a> and other files.</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slow-porting"></a>Chapter 4. Slow Porting</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="sect1"><a href="#slow-work">4.1. How Things Work</a></span></dt><dt><span class="sect1"><a href="#slow-sources">4.2. Getting the Original Sources</a></span></dt><dt><span class="sect1"><a href="#slow-modifying">4.3. Modifying the Port</a></span></dt><dt><span class="sect1"><a href="#slow-patch">4.4. Patching</a></span></dt><dt><span class="sect1"><a href="#slow-configure">4.5. Configuring</a></span></dt><dt><span class="sect1"><a href="#slow-user-input">4.6. Handling User Input</a></span></dt></dl></div><p>Okay, so it was not that simple, and the port required some
    modifications to get it to work.  In this section, we will
    explain, step by step, how to modify it to get it to work with the
    ports paradigm.</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="slow-work"></a>4.1. How Things Work</h2></div></div></div><p>First, this is the sequence of events which occurs when the
      user first types <code class="command">make</code> in the port's
      directory.  Having
      <code class="filename">bsd.port.mk</code> in another window while
      reading this really helps to understand it.</p><p>But do not worry not many people understand exactly how
      <code class="filename">bsd.port.mk</code> is working...
      <span class="emphasis"><em>:-)</em></span></p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>The <code class="buildtarget">fetch</code> target is run.  The
	  <code class="buildtarget">fetch</code> target is responsible for
	  making sure that the tarball exists locally in
	  <code class="varname">DISTDIR</code>.  If
	  <code class="buildtarget">fetch</code> cannot find the required
	  files in <code class="varname">DISTDIR</code> it will look up the URL
	  <code class="varname">MASTER_SITES</code>, which is set in the
	  Makefile, as well as our FTP mirrors where we put distfiles
	  as backup.  It will then attempt to fetch the named
	  distribution file with <code class="varname">FETCH</code>, assuming
	  that the requesting site has direct access to the Internet.
	  If that succeeds, it will save the file in
	  <code class="varname">DISTDIR</code> for future use and
	  proceed.</p></li><li class="step"><p>The <code class="buildtarget">extract</code> target is run.
	  It looks for the port's distribution file (typically a
	  <code class="command">gzip</code>ped tarball) in
	  <code class="varname">DISTDIR</code> and unpacks it into a temporary
	  subdirectory specified by <code class="varname">WRKDIR</code>
	  (defaults to <code class="filename">work</code>).</p></li><li class="step"><p>The <code class="buildtarget">patch</code> target is run.
	  First, any patches defined in <code class="varname">PATCHFILES</code>
	  are applied.  Second, if any patch files named
	  <code class="filename">patch-<em class="replaceable"><code>*</code></em></code> are
	  found in <code class="varname">PATCHDIR</code> (defaults to the
	  <code class="filename">files</code> subdirectory), they are applied
	  at this time in alphabetical order.</p></li><li class="step"><p>The <code class="buildtarget">configure</code> target is run.
	  This can do any one of many different things.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>If it exists, <code class="filename">scripts/configure</code>
	      is run.</p></li><li class="listitem"><p>If <code class="varname">HAS_CONFIGURE</code> or
	      <code class="varname">GNU_CONFIGURE</code> is set,
	      <code class="filename">WRKSRC/configure</code> is run.</p></li></ol></div></li><li class="step"><p>The <code class="buildtarget">build</code> target is run.
	  This is responsible for descending into the port's private
	  working directory (<code class="varname">WRKSRC</code>) and building
	  it.</p></li><li class="step"><p>The <code class="buildtarget">stage</code> target is run.
	  This puts the final set of built files into a temporary
	  directory (<code class="varname">STAGEDIR</code>, see
	  <a class="xref" href="#staging" title="6.1. Staging">Section 6.1, &#8220;Staging&#8221;</a>).  The hierarchy of this directory
	  mirrors that of the system on which the package will be
	  installed.</p></li><li class="step"><p>The <code class="buildtarget">package</code> target is run.
	  This creates a package using the files from the temporary
	  directory created during the
	  <code class="buildtarget">stage</code> target and the port's
	  <code class="filename">pkg-plist</code>.</p></li><li class="step"><p>The <code class="buildtarget">install</code> target is run.
	  This installs the package created during the
	  <code class="buildtarget">package</code> target into the host
	  system.</p></li></ol></div><p>The above are the default actions.  In addition,
      define targets
      <code class="buildtarget">pre-<em class="replaceable"><code>something</code></em></code>
      or
      <code class="buildtarget">post-<em class="replaceable"><code>something</code></em></code>,
      or put scripts with those names, in the
      <code class="filename">scripts</code> subdirectory, and they will be
      run before or after the default actions are done.</p><p>For example, if there is a
      <code class="buildtarget">post-extract</code> target defined in the
      <code class="filename">Makefile</code>, and a file
      <code class="filename">pre-build</code> in the
      <code class="filename">scripts</code> subdirectory, the
      <code class="buildtarget">post-extract</code> target will be called
      after the regular extraction actions, and
      <code class="filename">pre-build</code> will be executed before
      the default build rules are done.  It is recommended to
      use <code class="filename">Makefile</code> targets if the actions are
      simple enough, because it will be easier for someone to figure
      out what kind of non-default action the port requires.</p><p>The default actions are done by the
      <code class="buildtarget">do-<em class="replaceable"><code>something</code></em></code>
      targets from <code class="filename">bsd.port.mk</code>.
      For example, the commands to extract a port are in the target
      <code class="buildtarget">do-extract</code>.  If
      the default target does not do the job right, redefine the
      <code class="buildtarget">do-<em class="replaceable"><code>something</code></em></code>
      target in the <code class="filename">Makefile</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">The <span class="quote">&#8220;<span class="quote">main</span>&#8221;</span> targets (for example,
	<code class="buildtarget">extract</code>,
	<code class="buildtarget">configure</code>, etc.) do nothing more
	than make sure all the stages up to that one are completed and
	call the real targets or scripts, and they are not intended to
	be changed.  To fix the extraction, fix
	<code class="buildtarget">do-extract</code>, but never ever change
	the way <code class="buildtarget">extract</code> operates!
	Additionally, the target
	<code class="buildtarget">post-deinstall</code> is invalid and is
	not run by the ports infrastructure.</p></div><p>Now that what goes on when the user types <code class="command">make
	install</code> is better understood, let us go through the
      recommended steps to create the perfect port.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="slow-sources"></a>4.2. Getting the Original Sources</h2></div></div></div><p>Get the original sources (normally) as a compressed tarball
      (<code class="filename">foo.tar.gz</code> or
      <code class="filename"><em class="replaceable"><code>foo</code></em>.tar.bz2</code>) and
      copy it into <code class="varname">DISTDIR</code>.  Always use
      <span class="emphasis"><em>mainstream</em></span> sources when and where
      possible.</p><p>Set the variable
      <code class="varname">MASTER_SITES</code> to reflect where the original
      tarball resides.  Shorthand definitions exist
      for most mainstream sites in <code class="filename">bsd.sites.mk</code>.
      Please use these sites&#8212;and the associated
      definitions&#8212;if at all possible, to help avoid the problem
      of having the same information repeated over again many times in
      the source base.  As these sites tend to change over time, this
      becomes a maintenance nightmare for everyone involved.  See
      <a class="xref" href="#makefile-master_sites" title="5.4.2. MASTER_SITES">Section 5.4.2, &#8220;<code class="varname">MASTER_SITES</code>&#8221;</a> for details.</p><p>If there is no FTP/HTTP site that is well-connected to
      the net, or can only find sites that have irritatingly
      non-standard formats, put a copy on a reliable
      FTP or HTTP server (for example, a home
      page).</p><p>If a convenient and reliable place to put
      the distfile cannot be found, we can <span class="quote">&#8220;<span class="quote">house</span>&#8221;</span> it ourselves on
      <code class="systemitem">ftp.FreeBSD.org</code>; however, this is the
      least-preferred solution.  The distfile must be placed into
      <code class="filename">~/public_distfiles/</code> of someone's
      <code class="systemitem">freefall</code> account.  Ask the person who
      commits the port to do this.  This person will also set
      <code class="varname">MASTER_SITES</code> to
      <code class="literal">LOCAL/<em class="replaceable"><code>username</code></em></code>
      where <code class="literal"><em class="replaceable"><code>username</code></em></code> is
      their FreeBSD cluster login.</p><p>If the port's distfile changes all the time without any
      kind of version update by the author, consider putting the
      distfile on a home page and listing it as the first
      <code class="varname">MASTER_SITES</code>.  Try to talk the
      port author out of doing this; it really does help to establish
      some kind of source code control.  Hosting a specific version will
      prevent users from getting
      <span class="errorname">checksum mismatch</span> errors, and also reduce
      the workload of maintainers of our FTP site.  Also, if there is
      only one master site for the port, it is recommended to
      house a backup on a home page and list it as the second
      <code class="varname">MASTER_SITES</code>.</p><p>If the port requires some additional `patches' that are
      available on the Internet, fetch them too and put them in
      <code class="varname">DISTDIR</code>.  Do not worry if they come from a
      site other than where the main source tarball comes, we have a
      way to handle these situations (see the description of <a class="link" href="#porting-patchfiles" title="5.4.7. PATCHFILES">PATCHFILES</a> below).</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="slow-modifying"></a>4.3. Modifying the Port</h2></div></div></div><p>Unpack a copy of the tarball in a private directory and make
      whatever changes are necessary to get the port to compile
      properly under the current version of FreeBSD.  Keep
      <span class="emphasis"><em>careful track</em></span> of steps, as they will be
      needed to automate the process shortly.  Everything, including
      the deletion, addition, or modification of files has to be
      doable using an automated script or patch file when the port is
      finished.</p><p>If the port requires significant user
      interaction/customization to compile or install, take
      a look at one of Larry Wall's classic
      <span class="application">Configure</span> scripts and perhaps do
      something similar.  The goal of the new ports
      collection is to make each port as <span class="quote">&#8220;<span class="quote">plug-and-play</span>&#8221;</span>
      as possible for the end-user while using a minimum of disk
      space.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Unless explicitly stated, patch files, scripts, and other
	files created and contributed to the FreeBSD ports
	collection are assumed to be covered by the standard BSD
	copyright conditions.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="slow-patch"></a>4.4. Patching</h2></div></div></div><p>In the preparation of the port, files that have been added
      or changed can be recorded with <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> for later feeding
      to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=patch&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">patch</span>(1)</span></a>.  Doing this with a typical file involves
      saving a copy of the original file before making any changes
      using a <code class="filename">.orig</code> suffix.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cp <em class="replaceable"><code>file</code></em> <em class="replaceable"><code>file</code></em>.orig</code></strong></pre><p>After all changes have been made, <code class="command">cd</code> back
      to the port directory.  Use <code class="command">make makepatch</code> to
      generate updated patch files in the <code class="filename">files</code>
      directory.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slow-patch-rules"></a>4.4.1. General Rules for Patching</h3></div></div></div><p>Patch files are stored in <code class="varname">PATCHDIR</code>,
	usually <code class="filename">files/</code>, from where they will be
	automatically applied.  All patches must be relative to
	<code class="varname">WRKSRC</code>.  Typically
	<code class="varname">WRKSRC</code> is a subdirectory of
	<code class="varname">WRKDIR</code>, the directory where the distfile is
	extracted.  Use <code class="command">make -V WRKSRC</code> to see the
	actual path.  The patch names are to follow these
	rules:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Avoid having more than one patch modify the same file.
	    For example, having both
	    <code class="filename">patch-foobar.c</code> and
	    <code class="filename">patch-foobar.c2</code> making changes to
	    <code class="filename">${WRKSRC}/foobar.c</code> makes them fragile
	    and difficult to debug.</p></li><li class="listitem"><p>When creating names for patch files, replace each
	    underscore (<code class="literal">_</code>) with two underscores
	    (<code class="literal">__</code>) and each slash
	    (<code class="literal">/</code>) with one underscore
	    (<code class="literal">_</code>).  For example, to patch a file
	    named <code class="filename">src/freeglut_joystick.c</code>, name
	    the corresponding patch
	    <code class="filename">patch-src_freeglut__joystick.c</code>.  Do
	    not name patches like <code class="filename">patch-aa</code> or
	    <code class="filename">patch-ab</code>.  Always use the path and
	    file name in patch names.  Using <code class="command">make
	      makepatch</code> automatically generates the correct
	    names.</p></li><li class="listitem"><p>A patch may modify multiple files if the changes are
	    related and the patch is named appropriately.  For
	    example,
	    <code class="filename">patch-add-missing-stdlib.h</code>.</p></li><li class="listitem"><p>Only use characters <code class="literal">[-+._a-zA-Z0-9]</code>
	    for naming patches.  In particular, <span class="emphasis"><em>do not use
	      <code class="literal">::</code> as a path separator,</em></span>
	    use <code class="literal">_</code> instead.</p></li></ul></div><p>Minimize the amount of non-functional whitespace changes
	in patches.  It is common in the Open Source world for
	projects to share large amounts of a code base, but obey
	different style and indenting rules.  When taking a working
	piece of functionality from one project to fix similar areas
	in another, please be careful: the resulting patch may be full
	of non-functional changes.  It not only increases the size of
	the ports repository but makes it hard to find out what
	exactly caused the problem and what was changed at all.</p><p>If a file must be deleted, do it in the
	<code class="buildtarget">post-extract</code> target rather than as
	part of the patch.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slow-patch-manual"></a>4.4.2. Manual Patch Generation</h3></div></div></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Manual patch creation is usually not necessary.
	  Automatic patch generation as described earlier in this
	  section is the preferred method.  However, manual patching
	  may be required occasionally.</p></div><p>Patches are saved into files named
	<code class="filename">patch-*</code> where
	<em class="replaceable"><code>*</code></em> indicates the pathname of the
	file that is patched, such as
	<code class="filename">patch-Imakefile</code> or
	<code class="filename">patch-src-config.h</code>.</p><p>After the file has been modified, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> is used to
	record the differences between the original and the modified
	version.  <code class="option">-u</code> causes <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> to produce
	<span class="quote">&#8220;<span class="quote">unified</span>&#8221;</span> diffs, the preferred form.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>diff -u <em class="replaceable"><code>file</code></em>.orig <em class="replaceable"><code>file</code></em> &gt; patch-<em class="replaceable"><code>pathname-file</code></em></code></strong></pre><p>When generating patches for new, added files,
	<code class="option">-N</code> is used to tell <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> to treat the
	non-existent original file as if it existed but was
	empty:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>diff -u -N <em class="replaceable"><code>newfile</code></em>.orig <em class="replaceable"><code>newfile</code></em> &gt; patch-<em class="replaceable"><code>pathname-newfile</code></em></code></strong></pre><p>Do not add <code class="literal">$FreeBSD$</code> RCS
	strings in patches.  When patches are added to the
	<span class="application">Subversion</span> repository with
	<code class="command">svn add</code>, the
	<code class="literal">fbsd:nokeywords</code> property is set to
	<code class="literal">yes</code> automatically so keywords in the patch
	are not modified when committed.  The property can be added
	manually with <code class="command">svn propset fbsd:nokeywords yes
	  <em class="replaceable"><code>files...</code></em></code>.</p><p>Using the recurse (<code class="option">-r</code>) option to
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> to generate patches is fine, but please look at
	the resulting patches to make sure there is no unnecessary
	junk in there.  In particular, diffs between two backup files,
	<code class="filename">Makefile</code>s when the port uses
	<code class="command">Imake</code> or GNU <code class="command">configure</code>,
	etc., are unnecessary and have to be deleted.  If it was
	necessary to edit <code class="filename">configure.in</code> and run
	<code class="command">autoconf</code> to regenerate
	<code class="command">configure</code>, do not take the diffs of
	<code class="command">configure</code> (it often grows to a few thousand
	lines!).  Instead, define
	<code class="literal">USE_AUTOTOOLS=autoconf:261</code> and take the
	diffs of <code class="filename">configure.in</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slow-patch-automatic-replacements"></a>4.4.3. Simple Automatic Replacements</h3></div></div></div><p>Simple replacements can be performed directly from the
	port <code class="filename">Makefile</code> using the in-place mode of
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sed&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sed</span>(1)</span></a>.  This is useful when changes use the value of a
	variable:</p><pre class="programlisting">post-patch:
	@${REINPLACE_CMD} -e 's|for Linux|for FreeBSD|g' ${WRKSRC}/README</pre><p>Quite often, software being ported uses the CR/LF
	convention in source files.  This may cause problems with
	further patching, compiler warnings, or script execution (like
	<code class="literal">/bin/sh^M not found</code>.)  To quickly convert
	all files from CR/LF to just LF, add this entry to the port
	<code class="filename">Makefile</code>:</p><pre class="programlisting">USES=	dos2unix</pre><p>A list of specific files to convert can be given:</p><pre class="programlisting">USES=	dos2unix
DOS2UNIX_FILES=	util.c util.h</pre><p>Use <code class="varname">DOS2UNIX_REGEX</code> to convert a group
	of files across subdirectories.  Its argument is a
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=find&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">find</span>(1)</span></a>-compatible regular expression.  More on the
	format is in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=re_format&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">re_format</span>(7)</span></a>.  This option is useful for
	converting all files of a given extension.  For example,
	convert all source code files, leaving binary files
	intact:</p><pre class="programlisting">USES=	dos2unix
DOS2UNIX_REGEX=	.*\.([ch]|cpp)</pre><p>A similar option is <code class="varname">DOS2UNIX_GLOB</code>,
	which runs <code class="command">find</code> for each element listed
	in it.</p><pre class="programlisting">USES=	dos2unix
DOS2UNIX_GLOB=	*.c *.cpp *.h</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="slow-configure"></a>4.5. Configuring</h2></div></div></div><p>Include any additional customization commands in the
      <code class="filename">configure</code> script and save it in the
      <code class="filename">scripts</code> subdirectory.  As mentioned above,
      it is also possible do this with <code class="filename">Makefile</code> targets
      and/or scripts with the name <code class="filename">pre-configure</code>
      or <code class="filename">post-configure</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="slow-user-input"></a>4.6. Handling User Input</h2></div></div></div><p>If the port requires user input to build, configure, or
      install, set <code class="varname">IS_INTERACTIVE</code> in the
      <code class="filename">Makefile</code>.  This will allow
      <span class="quote">&#8220;<span class="quote">overnight builds</span>&#8221;</span> to skip it.  If the user
      sets the variable <code class="envar">BATCH</code> in his environment (and
      if the user sets the variable <code class="envar">INTERACTIVE</code>, then
      <span class="emphasis"><em>only</em></span> those ports requiring interaction are
      built).  This will save a lot of wasted time on the set of
      machines that continually build ports (see below).</p><p>It is also recommended that if there are reasonable default
      answers to the questions,
      <code class="varname">PACKAGE_BUILDING</code> be used to turn off the
      interactive script when it is set.  This will allow us to build
      the packages for CDROMs and FTP.</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefiles"></a>Chapter 5. Configuring the Makefile</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="sect1"><a href="#makefile-source">5.1. The Original Source</a></span></dt><dt><span class="sect1"><a href="#makefile-naming">5.2. Naming</a></span></dt><dt><span class="sect1"><a href="#makefile-categories">5.3. Categorization</a></span></dt><dt><span class="sect1"><a href="#makefile-distfiles">5.4. The Distribution Files</a></span></dt><dt><span class="sect1"><a href="#makefile-maintainer">5.5. <code class="varname">MAINTAINER</code></a></span></dt><dt><span class="sect1"><a href="#makefile-comment">5.6. <code class="varname">COMMENT</code></a></span></dt><dt><span class="sect1"><a href="#makefile-portscout">5.7. <code class="varname">PORTSCOUT</code></a></span></dt><dt><span class="sect1"><a href="#makefile-depend">5.8. Dependencies</a></span></dt><dt><span class="sect1"><a href="#makefile-masterdir">5.9. <code class="varname">MASTERDIR</code></a></span></dt><dt><span class="sect1"><a href="#makefile-manpages">5.10. Man Pages</a></span></dt><dt><span class="sect1"><a href="#makefile-info">5.11. Info Files</a></span></dt><dt><span class="sect1"><a href="#makefile-options">5.12. Makefile Options</a></span></dt><dt><span class="sect1"><a href="#makefile-wrkdir">5.13. Specifying the Working Directory</a></span></dt><dt><span class="sect1"><a href="#conflicts">5.14. Conflict Handling</a></span></dt><dt><span class="sect1"><a href="#install">5.15. Installing Files</a></span></dt></dl></div><p>Configuring the <code class="filename">Makefile</code> is pretty
    simple, and again we suggest looking at existing examples
    before starting.  Also, there is a
    <a class="link" href="#porting-samplem" title="Chapter 13. A Sample Makefile">sample Makefile</a> in this
    handbook, so take a look and please follow the ordering of
    variables and sections in that template to make the port easier
    for others to read.</p><p>Consider these problems in sequence during the
    design of the new <code class="filename">Makefile</code>:</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-source"></a>5.1. The Original Source</h2></div></div></div><p>Does it live in <code class="varname">DISTDIR</code> as a standard
      <code class="command">gzip</code>ped tarball named something like
      <code class="filename">foozolix-1.2.tar.gz</code>? If so, go on
      to the next step.  If not, the distribution file format might
      require overriding one or more of
      <code class="varname">DISTVERSION</code>, <code class="varname">DISTNAME</code>,
      <code class="varname">EXTRACT_CMD</code>,
      <code class="varname">EXTRACT_BEFORE_ARGS</code>,
      <code class="varname">EXTRACT_AFTER_ARGS</code>,
      <code class="varname">EXTRACT_SUFX</code>, or
      <code class="varname">DISTFILES</code>.</p><p>In the worst case, create a custom
      <code class="buildtarget">do-extract</code> target to override the
      default.  This is rarely, if ever, necessary.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-naming"></a>5.2. Naming</h2></div></div></div><p>The first part of the port's <code class="filename">Makefile</code>
      names the port, describes its version number, and lists it in
      the correct category.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-portname"></a>5.2.1. <code class="varname">PORTNAME</code> and
	<code class="varname">PORTVERSION</code></h3></div></div></div><p>Set <code class="varname">PORTNAME</code> to the base
	name of the port, and <code class="varname">PORTVERSION</code> to the
	version number of the port.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">The package name must be unique among all of the ports
	  tree.  Make sure that there is not already a port with the
	  same <code class="varname">PORTNAME</code> and if there is add one of
	  <a class="link" href="#porting-pkgnameprefix-suffix" title="5.2.3. PKGNAMEPREFIX and PKGNAMESUFFIX"><code class="varname">PKGNAMEPREFIX</code>
	    or <code class="varname">PKGNAMESUFFIX</code></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-naming-revepoch"></a>5.2.2. <code class="varname">PORTREVISION</code> and
	<code class="varname">PORTEPOCH</code></h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-portrevision"></a>5.2.2.1. <code class="varname">PORTREVISION</code></h4></div></div></div><p><code class="varname">PORTREVISION</code> is a
	  monotonically increasing value which is reset to 0 with
	  every increase of <code class="varname">PORTVERSION</code>, typically
	  every time there is a new official vendor release.  If
	  <code class="varname">PORTREVISION</code> is non-zero, the value is
	  appended to the package name.  Changes to
	  <code class="varname">PORTREVISION</code> are used by automated tools
	  like <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg-version&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg-version</span>(8)</span></a> to determine that a new package is
	  available.</p><p><code class="varname">PORTREVISION</code> must be increased each
	  time a change is made to the port that changes the generated
	  package in any way.  That includes changes that only affect
	  a package built with non-default
	  <a class="link" href="#makefile-options" title="5.12. Makefile Options">options</a>.</p><p>Examples of when <code class="varname">PORTREVISION</code>
	  must be bumped:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Addition of patches to correct security
	      vulnerabilities, bugs, or to add new functionality to
	      the port.</p></li><li class="listitem"><p>Changes to the port <code class="filename">Makefile</code> to
	      enable or disable compile-time options in the
	      package.</p></li><li class="listitem"><p>Changes in the packing list or the install-time
	      behavior of the package.  For example, a change to a
	      script which generates initial data for the package,
	      like <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> host keys.</p></li><li class="listitem"><p>Version bump of a port's shared library dependency
	      (in this case, someone trying to install the old package
	      after installing a newer version of the dependency will
	      fail since it will look for the old libfoo.x instead of
	      libfoo.(x+1)).</p></li><li class="listitem"><p>Silent changes to the port distfile which have
	      significant functional differences.  For example,
	      changes to the distfile requiring a correction to
	      <code class="filename">distinfo</code> with no corresponding
	      change to <code class="varname">PORTVERSION</code>, where a
	      <code class="command">diff -ru</code> of the old and new versions
	      shows non-trivial changes to the code.</p></li></ul></div><p>Examples of changes which do not require a
	  <code class="varname">PORTREVISION</code> bump:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Style changes to the port skeleton with no
	      functional change to what appears in the resulting
	      package.</p></li><li class="listitem"><p>Changes to <code class="varname">MASTER_SITES</code> or other
	      functional changes to the port which do not affect the
	      resulting package.</p></li><li class="listitem"><p>Trivial patches to the distfile such as correction
	      of typos, which are not important enough that users of
	      the package have to go to the trouble of
	      upgrading.</p></li><li class="listitem"><p>Build fixes which cause a package to become
	      compilable where it was previously failing.  As long as
	      the changes do not introduce any functional change on
	      any other platforms on which the port did previously
	      build.  Since <code class="varname">PORTREVISION</code> reflects
	      the content of the package, if the package was not
	      previously buildable then there is no need to increase
	      <code class="varname">PORTREVISION</code> to mark a change.</p></li></ul></div><p>A rule of thumb is to decide whether a change
	  committed to a port is something which
	  <span class="emphasis"><em>some</em></span> people would benefit from having.
	  Either because of an enhancement, fix,
	  or by virtue that the new package will actually work at
	  all.  Then weigh that against that fact that it will cause
	  everyone who regularly updates their ports tree to be
	  compelled to update.  If yes,
	  <code class="varname">PORTREVISION</code> must be bumped.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">People using binary packages will
	    <span class="emphasis"><em>never</em></span> see the update if
	    <code class="varname">PORTREVISION</code> is not bumped.  Without
	    increasing <code class="varname">PORTREVISION</code>, the
	    package builders have no way to detect the change and
	    thus, will not rebuild the package.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-portepoch"></a>5.2.2.2. <code class="varname">PORTEPOCH</code></h4></div></div></div><p>From time to time a software vendor or FreeBSD porter will
	  do something silly and release a version of their software
	  which is actually numerically less than the previous
	  version.  An example of this is a port which goes from
	  foo-20000801 to foo-1.0 (the former will be incorrectly
	  treated as a newer version since 20000801 is a numerically
	  greater value than 1).</p><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">The results of version number comparisons are not
	    always obvious.  <code class="command">pkg version</code> (see
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg-version&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg-version</span>(8)</span></a>) can be used to test the comparison of
	    two version number strings.  For example:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">%</code> <strong class="userinput"><code>pkg version -t 0.031 0.29</code></strong>
	    &gt;</pre><p xmlns="http://www.w3.org/1999/xhtml">The <code class="literal">&gt;</code> output indicates that
	    version 0.031 is considered greater than version 0.29,
	    which may not have been obvious to the porter.</p></div><p>In situations such as this,
	  <code class="varname">PORTEPOCH</code> must be increased.
	  If <code class="varname">PORTEPOCH</code> is nonzero it is appended to
	  the package name as described in section 0 above.
	  <code class="varname">PORTEPOCH</code> must never be decreased or
	  reset to zero, because that would cause comparison to a
	  package from an earlier epoch to fail.  For example, the
	  package would not be detected as out of date.  The new
	  version number, <code class="literal">1.0,1</code> in the above
	  example, is still numerically less than the previous
	  version, 20000801, but the <code class="literal">,1</code> suffix is
	  treated specially by automated tools and found to be greater
	  than the implied suffix <code class="literal">,0</code> on the earlier
	  package.</p><p>Dropping or resetting <code class="varname">PORTEPOCH</code>
	  incorrectly leads to no end of grief.  If the discussion
	  above was not clear enough, please consult the
	  <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">FreeBSD ports mailing list</a>.</p><p>It is expected that <code class="varname">PORTEPOCH</code> will
	  not be used for the majority of ports, and that sensible use
	  of <code class="varname">PORTVERSION</code> can often preempt it
	  becoming necessary if a future release of the software
	  changes the version structure.  However, care is
	  needed by FreeBSD porters when a vendor release is made without
	  an official version number &#8212; such as a code
	  <span class="quote">&#8220;<span class="quote">snapshot</span>&#8221;</span> release.  The temptation is to label
	  the release with the release date, which will cause problems
	  as in the example above when a new <span class="quote">&#8220;<span class="quote">official</span>&#8221;</span>
	  release is made.</p><p>For example, if a snapshot release is made on the date
	  <code class="literal">20000917</code>, and the previous version of the
	  software was version <code class="literal">1.2</code>, do not use
	  <code class="literal">20000917</code> for
	  <code class="varname">PORTVERSION</code>.  The correct way is a
	  <code class="varname">PORTVERSION</code> of
	  <code class="literal">1.2.20000917</code>, or similar, so that the
	  succeeding release, say <code class="literal">1.3</code>, is still a
	  numerically greater value.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-portrevision-example"></a>5.2.2.3. Example of <code class="varname">PORTREVISION</code> and
	  <code class="varname">PORTEPOCH</code> Usage</h4></div></div></div><p>The <code class="literal">gtkmumble</code> port, version
	  <code class="literal">0.10</code>, is committed to the ports
	  collection:</p><pre class="programlisting">PORTNAME=	gtkmumble
PORTVERSION=	0.10</pre><p><code class="varname">PKGNAME</code> becomes
	  <code class="literal">gtkmumble-0.10</code>.</p><p>A security hole is discovered which requires a local
	  FreeBSD patch.  <code class="varname">PORTREVISION</code> is bumped
	  accordingly.</p><pre class="programlisting">PORTNAME=	gtkmumble
PORTVERSION=	0.10
PORTREVISION=	1</pre><p><code class="varname">PKGNAME</code> becomes
	  <code class="literal">gtkmumble-0.10_1</code></p><p>A new version is released by the vendor, numbered
	  <code class="literal">0.2</code> (it turns out the author actually
	  intended <code class="literal">0.10</code> to actually mean
	  <code class="literal">0.1.0</code>, not <span class="quote">&#8220;<span class="quote">what comes after
	    0.9</span>&#8221;</span> - oops, too late now).  Since the new minor
	  version <code class="literal">2</code> is numerically less than the
	  previous version <code class="literal">10</code>,
	  <code class="varname">PORTEPOCH</code> must be bumped to manually
	  force the new package to be detected as
	  <span class="quote">&#8220;<span class="quote">newer</span>&#8221;</span>.  Since it is a new vendor release of
	  the code, <code class="varname">PORTREVISION</code> is reset to 0 (or
	  removed from the <code class="filename">Makefile</code>).</p><pre class="programlisting">PORTNAME=	gtkmumble
PORTVERSION=	0.2
PORTEPOCH=	1</pre><p><code class="varname">PKGNAME</code> becomes
	  <code class="literal">gtkmumble-0.2,1</code></p><p>The next release is 0.3.  Since
	  <code class="varname">PORTEPOCH</code> never decreases, the version
	  variables are now:</p><pre class="programlisting">PORTNAME=	gtkmumble
PORTVERSION=	0.3
PORTEPOCH=	1</pre><p><code class="varname">PKGNAME</code> becomes
	  <code class="literal">gtkmumble-0.3,1</code></p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">If <code class="varname">PORTEPOCH</code> were reset to
	    <code class="literal">0</code> with this upgrade, someone who had
	    installed the <code class="literal">gtkmumble-0.10_1</code> package
	    would not detect the <code class="literal">gtkmumble-0.3</code>
	    package as newer, since <code class="literal">3</code> is still
	    numerically less than <code class="literal">10</code>.  Remember,
	    this is the whole point of <code class="varname">PORTEPOCH</code> in
	    the first place.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-pkgnameprefix-suffix"></a>5.2.3. <code class="varname">PKGNAMEPREFIX</code> and
	<code class="varname">PKGNAMESUFFIX</code></h3></div></div></div><p>Two optional variables, <code class="varname">PKGNAMEPREFIX</code>
	and <code class="varname">PKGNAMESUFFIX</code>, are combined with
	<code class="varname">PORTNAME</code> and <code class="varname">PORTVERSION</code>
	to form <code class="varname">PKGNAME</code> as
	<code class="literal">${PKGNAMEPREFIX}${PORTNAME}${PKGNAMESUFFIX}-${PORTVERSION}</code>.
	Make sure this conforms to our
	<a class="link" href="#porting-pkgname" title="5.2.4. Package Naming Conventions">guidelines for a good
	  package name</a>.  In particular, the use of a
	hyphen (<code class="literal">-</code>) in
	<code class="varname">PORTVERSION</code> is <span class="emphasis"><em>not</em></span>
	allowed.
	Also, if the package name has the
	<em class="replaceable"><code>language-</code></em> or the
	<em class="replaceable"><code>-compiled.specifics</code></em> part (see
	below), use <code class="varname">PKGNAMEPREFIX</code> and
	<code class="varname">PKGNAMESUFFIX</code>, respectively.  Do not make
	them part of <code class="varname">PORTNAME</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-pkgname"></a>5.2.4. Package Naming Conventions</h3></div></div></div><p>These are the conventions to follow when
	naming packages.  This is to make the package directory
	easy to scan, as there are already thousands of packages and
	users are going to turn away if they hurt their eyes!</p><p>Package names take the form of
	<code class="filename"><em class="replaceable"><code>language_region-name-compiled.specifics-version.numbers</code></em></code>.</p><p>The package name is defined as
	<code class="literal">${PKGNAMEPREFIX}${PORTNAME}${PKGNAMESUFFIX}-${PORTVERSION}</code>.
	Make sure to set the variables to conform to that
	format.</p><div class="variablelist"><a id="porting-pkgname-format"></a><dl class="variablelist"><dt><a id="porting-pkgname-language"></a><span class="term"><code class="filename"><em class="replaceable"><code>language_region-</code></em></code></span></dt><dd><p>FreeBSD strives to support the native language of its
	      users.  The <em class="replaceable"><code>language-</code></em> part is
	      a two letter abbreviation of the natural language
	      defined by ISO-639 when the port is specific to a
	      certain language.  Examples are <code class="literal">ja</code>
	      for Japanese, <code class="literal">ru</code> for Russian,
	      <code class="literal">vi</code> for Vietnamese,
	      <code class="literal">zh</code> for Chinese, <code class="literal">ko</code>
	      for Korean and <code class="literal">de</code> for German.</p><p>If the port is specific to a certain region within
	      the language area, add the two letter country code as
	      well.  Examples are <code class="literal">en_US</code> for US
	      English and <code class="literal">fr_CH</code> for Swiss
	      French.</p><p>The <em class="replaceable"><code>language-</code></em> part is
	      set in <code class="varname">PKGNAMEPREFIX</code>.</p></dd><dt><a id="porting-pkgname-name"></a><span class="term"><code class="filename"><em class="replaceable"><code>name</code></em></code></span></dt><dd><p>Make sure that the port's name and version are
	      clearly separated and placed into
	      <code class="varname">PORTNAME</code> and
	      <code class="varname">PORTVERSION</code>.  The only
	      reason for <code class="varname">PORTNAME</code> to contain a
	      version part is if the upstream distribution is really
	      named that way, as in the
	      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/textproc/libxml2/pkg-descr">textproc/libxml2</a> or
	      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/japanese/kinput2-freewnn/pkg-descr">japanese/kinput2-freewnn</a>
	      ports.  Otherwise, <code class="varname">PORTNAME</code> cannot
	      contain any version-specific information.  It is quite
	      normal for several ports to have the same
	      <code class="varname">PORTNAME</code>, as the
	      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache*/pkg-descr">www/apache*</a> ports do; in
	      that case, different versions (and different index
	      entries) are distinguished by
	      <code class="varname">PKGNAMEPREFIX</code>
	      and <code class="varname">PKGNAMESUFFIX</code> values.</p><p>There is a tradition of naming
	      <code class="literal">Perl 5</code> modules by prepending
	      <code class="literal">p5-</code> and converting the double-colon
	      separator to a hyphen.  For example, the
	      <code class="literal">Data::Dumper</code> module becomes
	      <code class="literal">p5-Data-Dumper</code>.</p></dd><dt><a id="porting-pkgname-compiled-specifics"></a><span class="term"><code class="filename"><em class="replaceable"><code>-compiled.specifics</code></em></code></span></dt><dd><p>If the port can be built with different <a class="link" href="#makefile-masterdir" title="5.9. MASTERDIR">hardcoded defaults</a>
	      (usually part of the directory name in a family of
	      ports), the
	      <em class="replaceable"><code>-compiled.specifics</code></em> part
	      states the compiled-in defaults.  The hyphen is
	      optional.  Examples are paper size and font
	      units.</p><p>The <em class="replaceable"><code>-compiled.specifics</code></em>
	      part is set in <code class="varname">PKGNAMESUFFIX</code>.</p></dd><dt><a id="porting-pkgname-version-numbers"></a><span class="term"><code class="filename"><em class="replaceable"><code>-version.numbers</code></em></code></span></dt><dd><p>The version string follows a dash
	      (<code class="literal">-</code>) and is a period-separated list of
	      integers and single lowercase alphabetics.  In
	      particular, it is not permissible to have another dash
	      inside the version string.  The only exception is the
	      string <code class="literal">pl</code> (meaning
	      <span class="quote">&#8220;<span class="quote">patchlevel</span>&#8221;</span>), which can be used
	      <span class="emphasis"><em>only</em></span> when there are no major and
	      minor version numbers in the software.  If the software
	      version has strings like <span class="quote">&#8220;<span class="quote">alpha</span>&#8221;</span>,
	      <span class="quote">&#8220;<span class="quote">beta</span>&#8221;</span>, <span class="quote">&#8220;<span class="quote">rc</span>&#8221;</span>, or
	      <span class="quote">&#8220;<span class="quote">pre</span>&#8221;</span>, take the first letter and put it
	      immediately after a period.  If the version string
	      continues after those names, the numbers follow
	      the single alphabet without an extra period between
	      them (for example, <code class="literal">1.0b2</code>).</p><p>The idea is to make it easier to sort ports by
	      looking at the version string.  In particular, make sure
	      version number components are always delimited by a
	      period, and if the date is part of the string, use the
	      <code class="literal">0.0.<em class="replaceable"><code>yyyy</code></em>.<em class="replaceable"><code>mm</code></em>.<em class="replaceable"><code>dd</code></em></code>
	      format, not
	      <code class="literal"><em class="replaceable"><code>dd</code></em>.<em class="replaceable"><code>mm</code></em>.<em class="replaceable"><code>yyyy</code></em></code>
	      or the non-Y2K compliant
	      <code class="literal"><em class="replaceable"><code>yy</code></em>.<em class="replaceable"><code>mm</code></em>.<em class="replaceable"><code>dd</code></em></code>
	      format.  It is important to prefix the version with
	      <code class="literal">0.0.</code> in case a release with an actual
	      version number is made, which would be
	      numerically less than
	      <code class="literal"><em class="replaceable"><code>yyyy</code></em></code>.</p></dd></dl></div><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Package name must be unique among all of the ports
	  tree, check that there is not already a port with the same
	  <code class="varname">PORTNAME</code> and if there is add one of <a class="link" href="#porting-pkgnameprefix-suffix" title="5.2.3. PKGNAMEPREFIX and PKGNAMESUFFIX"><code class="varname">PKGNAMEPREFIX</code>
	    or <code class="varname">PKGNAMESUFFIX</code></a>.</p></div><p>Here are some (real) examples on how to convert the name
	as called by the software authors to a suitable package
	name:</p><div class="table"><a id="idp62962128"></a><div class="table-title">Table 5.1. Package Naming Examples</div><div class="table-contents"><table summary="Package Naming Examples" width="100%" border="0"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th>Distribution Name</th><th><code class="varname">PKGNAMEPREFIX</code></th><th><code class="varname">PORTNAME</code></th><th><code class="varname">PKGNAMESUFFIX</code></th><th><code class="varname">PORTVERSION</code></th><th>Reason</th></tr></thead><tbody><tr><td>mule-2.2.2</td><td>(empty)</td><td>mule</td><td>(empty)</td><td>2.2.2</td><td>No changes required</td></tr><tr><td>mule-1.0.1</td><td>(empty)</td><td>mule</td><td>1</td><td>1.0.1</td><td><code class="literal">mule</code> already exists</td></tr><tr><td>EmiClock-1.0.2</td><td>(empty)</td><td>emiclock</td><td>(empty)</td><td>1.0.2</td><td>No uppercase names for single programs</td></tr><tr><td>rdist-1.3alpha</td><td>(empty)</td><td>rdist</td><td>(empty)</td><td>1.3.a</td><td>No strings like <code class="literal">alpha</code>
		allowed</td></tr><tr><td>es-0.9-beta1</td><td>(empty)</td><td>es</td><td>(empty)</td><td>0.9.b1</td><td>No strings like <code class="literal">beta</code>
		allowed</td></tr><tr><td>mailman-2.0rc3</td><td>(empty)</td><td>mailman</td><td>(empty)</td><td>2.0.r3</td><td>No strings like <code class="literal">rc</code>
		allowed</td></tr><tr><td>v3.3beta021.src</td><td>(empty)</td><td>tiff</td><td>(empty)</td><td>3.3</td><td>What the heck was that anyway?</td></tr><tr><td>tvtwm</td><td>(empty)</td><td>tvtwm</td><td>(empty)</td><td>pl11</td><td>Version string always required</td></tr><tr><td>piewm</td><td>(empty)</td><td>piewm</td><td>(empty)</td><td>1.0</td><td>Version string always required</td></tr><tr><td>xvgr-2.10pl1</td><td>(empty)</td><td>xvgr</td><td>(empty)</td><td>2.10.1</td><td><code class="literal">pl</code> allowed only when no
		major/minor version numbers</td></tr><tr><td>gawk-2.15.6</td><td>ja-</td><td>gawk</td><td>(empty)</td><td>2.15.6</td><td>Japanese language version</td></tr><tr><td>psutils-1.13</td><td>(empty)</td><td>psutils</td><td>-letter</td><td>1.13</td><td>Paper size hardcoded at package build
		time</td></tr><tr><td>pkfonts</td><td>(empty)</td><td>pkfonts</td><td>300</td><td>1.0</td><td>Package for 300dpi fonts</td></tr></tbody></table></div></div><br class="table-break" /><p>If there is absolutely no trace of version information in
	the original source and it is unlikely that the original
	author will ever release another version, just set the version
	string to <code class="literal">1.0</code> (like the
	<code class="literal">piewm</code> example above).  Otherwise, ask the
	original author or use the date string the source file was
	released on
	(<code class="literal">0.0.<em class="replaceable"><code>yyyy</code></em>.<em class="replaceable"><code>mm</code></em>.<em class="replaceable"><code>dd</code></em></code>)
	as the version.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-categories"></a>5.3. Categorization</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-categories-definition"></a>5.3.1. <code class="varname">CATEGORIES</code></h3></div></div></div><p>When a package is created, it is put under
	<code class="filename">/usr/ports/packages/All</code> and links are
	made from one or more subdirectories of
	<code class="filename">/usr/ports/packages</code>.  The names of these
	subdirectories are specified by the variable
	<code class="varname">CATEGORIES</code>.  It is intended to make life
	easier for the user when he is wading through the pile of
	packages on the FTP site or the CDROM.  Please take a look at
	the <a class="link" href="#porting-categories" title="5.3.2. Current List of Categories">current list of
	  categories</a> and pick the ones that are suitable for
	the port.</p><p>This list also determines where in the ports tree the port
	is imported.  If there is more than one category here,
	the port files must be put in the subdirectory
	with the name of the first category.  See
	<a class="link" href="#choosing-categories" title="5.3.3. Choosing the Right Category">below</a> for more
	discussion about how to pick the right categories.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-categories"></a>5.3.2. Current List of Categories</h3></div></div></div><p>Here is the current list of port categories.  Those marked
	with an asterisk (<code class="literal">*</code>) are
	<span class="emphasis"><em>virtual</em></span> categories&#8212;those that do
	not have a corresponding subdirectory in the ports tree.  They
	are only used as secondary categories, and only for search
	purposes.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">For non-virtual categories, there is a one-line
	  description in <code class="varname">COMMENT</code> in that
	  subdirectory's <code class="filename">Makefile</code>.</p></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Category</th><th>Description</th><th>Notes</th></tr></thead><tbody><tr><td><code class="filename">accessibility</code></td><td>Ports to help disabled users.</td><td> </td></tr><tr><td><code class="filename">afterstep*</code></td><td>Ports to support the <a class="link" href="http://www.afterstep.org" target="_top">AfterStep</a>
		window manager.</td><td> </td></tr><tr><td><code class="filename">arabic</code></td><td>Arabic language support.</td><td> </td></tr><tr><td><code class="filename">archivers</code></td><td>Archiving tools.</td><td> </td></tr><tr><td><code class="filename">astro</code></td><td>Astronomical ports.</td><td> </td></tr><tr><td><code class="filename">audio</code></td><td>Sound support.</td><td> </td></tr><tr><td><code class="filename">benchmarks</code></td><td>Benchmarking utilities.</td><td> </td></tr><tr><td><code class="filename">biology</code></td><td>Biology-related software.</td><td> </td></tr><tr><td><code class="filename">cad</code></td><td>Computer aided design tools.</td><td> </td></tr><tr><td><code class="filename">chinese</code></td><td>Chinese language support.</td><td> </td></tr><tr><td><code class="filename">comms</code></td><td>Communication software.</td><td>Mostly software to talk to the serial
		port.</td></tr><tr><td><code class="filename">converters</code></td><td>Character code converters.</td><td> </td></tr><tr><td><code class="filename">databases</code></td><td>Databases.</td><td> </td></tr><tr><td><code class="filename">deskutils</code></td><td>Things that used to be on the desktop before
		computers were invented.</td><td> </td></tr><tr><td><code class="filename">devel</code></td><td>Development utilities.</td><td>Do not put libraries here just because they are
		libraries.  They should <span class="emphasis"><em>not</em></span> be
		in this category unless they truly do not belong
		anywhere else.</td></tr><tr><td><code class="filename">dns</code></td><td>DNS-related software.</td><td> </td></tr><tr><td><code class="filename">docs*</code></td><td>Meta-ports for FreeBSD documentation.</td><td> </td></tr><tr><td><code class="filename">editors</code></td><td>General editors.</td><td>Specialized editors go in the section for those
		tools.  For example, a mathematical-formula editor
		will go in <code class="filename">math</code>, and have
		<code class="filename">editors</code> as a second
		category.</td></tr><tr><td><code class="filename">elisp*</code></td><td>Emacs-lisp ports.</td><td> </td></tr><tr><td><code class="filename">emulators</code></td><td>Emulators for other operating systems.</td><td>Terminal emulators do <span class="emphasis"><em>not</em></span>
		belong here.  X-based ones go to
		<code class="filename">x11</code> and text-based ones to
		either <code class="filename">comms</code> or
		<code class="filename">misc</code>, depending on the exact
		functionality.</td></tr><tr><td><code class="filename">finance</code></td><td>Monetary, financial and related
		applications.</td><td> </td></tr><tr><td><code class="filename">french</code></td><td>French language support.</td><td> </td></tr><tr><td><code class="filename">ftp</code></td><td><acronym class="acronym">FTP</acronym> client and server
		utilities.</td><td>If the port speaks both <acronym class="acronym">FTP</acronym>
		and <acronym class="acronym">HTTP</acronym>, put it
		in <code class="filename">ftp</code> with a secondary
		category of <code class="filename">www</code>.</td></tr><tr><td><code class="filename">games</code></td><td>Games.</td><td> </td></tr><tr><td><code class="filename">geography*</code></td><td>Geography-related software.</td><td> </td></tr><tr><td><code class="filename">german</code></td><td>German language support.</td><td> </td></tr><tr><td><code class="filename">gnome*</code></td><td>Ports from the
		<a class="link" href="http://www.gnome.org" target="_top">GNOME</a>
		Project.</td><td> </td></tr><tr><td><code class="filename">gnustep*</code></td><td>Software related to the GNUstep desktop
		environment.</td><td> </td></tr><tr><td><code class="filename">graphics</code></td><td>Graphics utilities.</td><td> </td></tr><tr><td><code class="filename">hamradio*</code></td><td>Software for amateur radio.</td><td> </td></tr><tr><td><code class="filename">haskell*</code></td><td>Software related to the Haskell
		language.</td><td> </td></tr><tr><td><code class="filename">hebrew</code></td><td>Hebrew language support.</td><td> </td></tr><tr><td><code class="filename">hungarian</code></td><td>Hungarian language support.</td><td> </td></tr><tr><td><code class="filename">ipv6*</code></td><td>IPv6 related software.</td><td> </td></tr><tr><td><code class="filename">irc</code></td><td>Internet Relay Chat utilities.</td><td> </td></tr><tr><td><code class="filename">japanese</code></td><td>Japanese language support.</td><td> </td></tr><tr><td><code class="filename">java</code></td><td>Software related to the Java&#8482;
		language.</td><td>The <code class="filename">java</code> category must not
		be the only one for a port.  Save for ports directly
		related to the Java language, porters are also
		encouraged not to use <code class="filename">java</code> as the
		main category of a port.</td></tr><tr><td><code class="filename">kde*</code></td><td>Ports from the
		<a class="link" href="http://www.kde.org" target="_top">KDE</a>
		Project.</td><td> </td></tr><tr><td><code class="filename">kld*</code></td><td>Kernel loadable modules.</td><td> </td></tr><tr><td><code class="filename">korean</code></td><td>Korean language support.</td><td> </td></tr><tr><td><code class="filename">lang</code></td><td>Programming languages.</td><td> </td></tr><tr><td><code class="filename">linux*</code></td><td>Linux applications and support
		utilities.</td><td> </td></tr><tr><td><code class="filename">lisp*</code></td><td>Software related to the Lisp language.</td><td> </td></tr><tr><td><code class="filename">mail</code></td><td>Mail software.</td><td> </td></tr><tr><td><code class="filename">math</code></td><td>Numerical computation software and other
		utilities for mathematics.</td><td> </td></tr><tr><td><code class="filename">mbone*</code></td><td>MBone applications.</td><td> </td></tr><tr><td><code class="filename">misc</code></td><td>Miscellaneous utilities</td><td>Things that do not belong anywhere
		else.  If at all possible, try to find a better
		category for the port than <code class="literal">misc</code>,
		as ports tend to be overlooked in here.</td></tr><tr><td><code class="filename">multimedia</code></td><td>Multimedia software.</td><td> </td></tr><tr><td><code class="filename">net</code></td><td>Miscellaneous networking software.</td><td> </td></tr><tr><td><code class="filename">net-im</code></td><td>Instant messaging software.</td><td> </td></tr><tr><td><code class="filename">net-mgmt</code></td><td>Networking management software.</td><td> </td></tr><tr><td><code class="filename">net-p2p</code></td><td>Peer to peer network applications.</td><td> </td></tr><tr><td><code class="filename">news</code></td><td>USENET news software.</td><td> </td></tr><tr><td><code class="filename">palm</code></td><td>Software support for the <a class="link" href="http://www.palm.com/" target="_top">Palm&#8482;</a>
		series.</td><td> </td></tr><tr><td><code class="filename">parallel*</code></td><td>Applications dealing with parallelism in
		computing.</td><td> </td></tr><tr><td><code class="filename">pear*</code></td><td>Ports related to the Pear PHP
		framework.</td><td> </td></tr><tr><td><code class="filename">perl5*</code></td><td>Ports that require
		<span class="application">Perl</span> version 5 to
		run.</td><td> </td></tr><tr><td><code class="filename">plan9*</code></td><td>Various programs from <a class="link" href="http://www.cs.bell-labs.com/plan9dist/" target="_top">Plan9</a>.</td><td> </td></tr><tr><td><code class="filename">polish</code></td><td>Polish language support.</td><td> </td></tr><tr><td><code class="filename">ports-mgmt</code></td><td>Ports for managing, installing and developing
		FreeBSD ports and packages.</td><td class="auto-generated"> </td></tr><tr><td><code class="filename">portuguese</code></td><td>Portuguese language support.</td><td> </td></tr><tr><td><code class="filename">print</code></td><td>Printing software.</td><td>Desktop publishing tools
		(previewers, etc.) belong here too.</td></tr><tr><td><code class="filename">python*</code></td><td>Software related to the <a class="link" href="http://www.python.org/" target="_top">Python</a>
		language.</td><td> </td></tr><tr><td><code class="filename">ruby*</code></td><td>Software related to the <a class="link" href="http://www.ruby-lang.org/" target="_top">Ruby</a>
		language.</td><td> </td></tr><tr><td><code class="filename">rubygems*</code></td><td>Ports of <a class="link" href="http://www.rubygems.org/" target="_top">RubyGems</a>
		packages.</td><td> </td></tr><tr><td><code class="filename">russian</code></td><td>Russian language support.</td><td> </td></tr><tr><td><code class="filename">scheme*</code></td><td>Software related to the Scheme
		language.</td><td> </td></tr><tr><td><code class="filename">science</code></td><td>Scientific ports that do not fit into other
		categories such as <code class="filename">astro</code>,
		<code class="filename">biology</code> and
		<code class="filename">math</code>.</td><td> </td></tr><tr><td><code class="filename">security</code></td><td>Security utilities.</td><td> </td></tr><tr><td><code class="filename">shells</code></td><td>Command line shells.</td><td> </td></tr><tr><td><code class="filename">spanish*</code></td><td>Spanish language support.</td><td> </td></tr><tr><td><code class="filename">sysutils</code></td><td>System utilities.</td><td> </td></tr><tr><td><code class="filename">tcl*</code></td><td>Ports that use Tcl to run.</td><td> </td></tr><tr><td><code class="filename">textproc</code></td><td>Text processing utilities.</td><td>It does not include desktop publishing tools,
		which go to <code class="filename">print</code>.</td></tr><tr><td><code class="filename">tk*</code></td><td>Ports that use Tk to run.</td><td> </td></tr><tr><td><code class="filename">ukrainian</code></td><td>Ukrainian language support.</td><td> </td></tr><tr><td><code class="filename">vietnamese</code></td><td>Vietnamese language support.</td><td> </td></tr><tr><td><code class="filename">windowmaker*</code></td><td>Ports to support the WindowMaker window
		manager.</td><td> </td></tr><tr><td><code class="filename">www</code></td><td>Software related to the World Wide Web.</td><td>HTML language
		support belongs here too.</td></tr><tr><td><code class="filename">x11</code></td><td>The X Window System and friends.</td><td>This category is only for software that directly
		supports the window system.  Do not put regular X
		applications here.  Most of them go into other
		<code class="filename">x11-*</code> categories (see
		below).</td></tr><tr><td><code class="filename">x11-clocks</code></td><td>X11 clocks.</td><td> </td></tr><tr><td><code class="filename">x11-drivers</code></td><td>X11 drivers.</td><td> </td></tr><tr><td><code class="filename">x11-fm</code></td><td>X11 file managers.</td><td> </td></tr><tr><td><code class="filename">x11-fonts</code></td><td>X11 fonts and font utilities.</td><td> </td></tr><tr><td><code class="filename">x11-servers</code></td><td>X11 servers.</td><td> </td></tr><tr><td><code class="filename">x11-themes</code></td><td>X11 themes.</td><td> </td></tr><tr><td><code class="filename">x11-toolkits</code></td><td>X11 toolkits.</td><td> </td></tr><tr><td><code class="filename">x11-wm</code></td><td>X11 window managers.</td><td> </td></tr><tr><td><code class="filename">xfce*</code></td><td>Ports related to the
		<a class="link" href="http://www.xfce.org/" target="_top">Xfce</a>
		desktop environment.</td><td> </td></tr><tr><td><code class="filename">zope*</code></td><td><a class="link" href="http://www.zope.org/" target="_top">Zope</a>
		support.</td><td> </td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="choosing-categories"></a>5.3.3. Choosing the Right Category</h3></div></div></div><p>As many of the categories overlap, choosing which of the
	categories will be the primary category of the port can be
	tedious.  There are several rules that govern this issue.
	Here is the list of priorities, in decreasing order of
	precedence:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The first category must be a physical category (see
	    <a class="link" href="#porting-categories" title="5.3.2. Current List of Categories">above</a>).  This is
	    necessary to make the packaging work.  Virtual categories
	    and physical categories may be intermixed after
	    that.</p></li><li class="listitem"><p>Language specific categories always come first.  For
	    example, if the port installs Japanese X11 fonts, then
	    the <code class="varname">CATEGORIES</code> line would read
	    <code class="filename">japanese x11-fonts</code>.</p></li><li class="listitem"><p>Specific categories are listed before less-specific
	    ones.  For instance, an HTML editor is listed as
	    <code class="filename">www editors</code>, not the other way
	    around.  Also, do not list
	    <code class="filename">net</code> when the port belongs to any of
	    <code class="filename">irc</code>, <code class="filename">mail</code>,
	    <code class="filename">news</code>, <code class="filename">security</code>,
	    or <code class="filename">www</code>, as <code class="filename">net</code>
	    is included implicitly.</p></li><li class="listitem"><p><code class="filename">x11</code> is used as a secondary
	    category only when the primary category is a natural
	    language.  In particular, do not put
	    <code class="filename">x11</code> in the category line for X
	    applications.</p></li><li class="listitem"><p><span class="application">Emacs</span> modes are
	    placed in the same ports category as the application
	    supported by the mode, not in
	    <code class="filename">editors</code>.  For example, an
	    <span class="application">Emacs</span> mode to edit source files
	    of some programming language goes into
	    <code class="filename">lang</code>.</p></li><li class="listitem"><p>Ports installing loadable kernel modules also
	    have the virtual category <code class="filename">kld</code> in
	    their <code class="varname">CATEGORIES</code> line.  This is one of
	    the things handled automatically by adding
	    <code class="literal">USES=kmod</code>.</p></li><li class="listitem"><p><code class="filename">misc</code> does not appear with any
	    other non-virtual category.  If there is
	    <code class="literal">misc</code> with something else in
	    <code class="varname">CATEGORIES</code>, that means
	    <code class="literal">misc</code> can safely be deleted and the port
	    placed only in the other subdirectory.</p></li><li class="listitem"><p>If the port truly does not belong anywhere else,
	    put it in <code class="filename">misc</code>.</p></li></ul></div><p>If the category is not clearly defined, please put a
	comment to that effect in the <a class="link" href="https://bugs.freebsd.org/submit/" target="_top">port
	  submission</a> in the bug database so
	we can discuss it before we import it.  As a committer,
	send a note to the <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">FreeBSD ports mailing list</a> so we can discuss it
	first.  Too often, new ports are imported to the wrong
	category only to be moved right away.  This causes unnecessary
	and undesirable bloat in the master source repository.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="proposing-categories"></a>5.3.4. Proposing a New Category</h3></div></div></div><p>As the Ports Collection has grown over time, various new
	categories have been introduced.  New categories can either be
	<span class="emphasis"><em>virtual</em></span> categories&#8212;those that do
	not have a corresponding subdirectory in the ports tree&#8212;
	or <span class="emphasis"><em>physical</em></span> categories&#8212;those that
	do.  This section discusses the issues involved in creating a
	new physical category.  Read it thouroughly before proposing a
	new one.</p><p>Our existing practice has been to avoid creating a new
	physical category unless either a large number of ports would
	logically belong to it, or the ports that would belong to it
	are a logically distinct group that is of limited general
	interest (for instance, categories related to spoken human
	languages), or preferably both.</p><p>The rationale for this is that such a change creates a
	<a class="link" href="../../../../doc/en_US.ISO8859-1/articles/committers-guide/#ports" target="_top">fair
	  amount of work</a> for both the committers and also for
	all users who track changes to the Ports Collection.  In
	addition, proposed category changes just naturally seem to
	attract controversy.  (Perhaps this is because there is no
	clear consensus on when a category is <span class="quote">&#8220;<span class="quote">too big</span>&#8221;</span>,
	nor whether categories should lend themselves to browsing (and
	thus what number of categories would be an ideal number), and
	so forth.)</p><p>Here is the procedure:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Propose the new category on <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">FreeBSD ports mailing list</a>.  Include
	    a detailed rationale for the new category,
	    including why the existing categories are not
	    sufficient, and the list of existing ports proposed to
	    move.  (If there are new ports pending in
	    <span class="application">Bugzilla</span> that would fit this
	    category, list them too.)  If you are the maintainer
	    and/or submitter, respectively, mention that as it may
	    help the case.</p></li><li class="step"><p>Participate in the discussion.</p></li><li class="step"><p>If it seems that there is support for the idea, file
	    a PR which includes both the rationale and the list of
	    existing ports that need to be moved.  Ideally, this PR
	    would also include these patches:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">Makefile</code>s for the new ports
		once they are repocopied</p></li><li class="listitem"><p><code class="filename">Makefile</code> for the new
		category</p></li><li class="listitem"><p><code class="filename">Makefile</code> for the old ports'
		categories</p></li><li class="listitem"><p><code class="filename">Makefile</code>s for ports that
		depend on the old ports</p></li><li class="listitem"><p>(for extra credit, include the other files
		that have to change, as per the procedure in the
		Committer's Guide.)</p></li></ul></div></li><li class="step"><p>Since it affects the ports infrastructure and involves
	    moving and patching many ports but also possibly running
	    regression tests on the build cluster, assign the PR to
	    the Ports Management Team <code class="email">&lt;<a xmlns="" class="email" href="mailto:portmgr@FreeBSD.org">portmgr@FreeBSD.org</a>&gt;</code>.</p></li><li class="step"><p>If that PR is approved, a committer will need to
	    follow the rest of the procedure that is <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/committers-guide/article.html#PORTS" target="_top">outlined
	      in the Committer's Guide</a>.</p></li></ol></div><p>Proposing a new virtual category is similar to the
	above but much less involved, since no ports will actually
	have to move.  In this case, the only patches to include in
	the PR would be those to add the new category to
	<code class="varname">CATEGORIES</code> of the affected ports.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="proposing-reorg"></a>5.3.5. Proposing Reorganizing All the Categories</h3></div></div></div><p>Occasionally someone proposes reorganizing the
	categories with either a 2-level structure, or some other kind
	of keyword structure.  To date, nothing has come of any of
	these proposals because, while they are very easy to make, the
	effort involved to retrofit the entire existing ports
	collection with any kind of reorganization is daunting to say
	the very least.  Please read the history of these proposals in
	the mailing list archives before posting this idea.
	Furthermore, be prepared to be challenged to offer
	a working prototype.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-distfiles"></a>5.4. The Distribution Files</h2></div></div></div><p>The second part of the <code class="filename">Makefile</code>
      describes the files that must be downloaded to build
      the port, and where they can be downloaded.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-distversion"></a>5.4.1. <code class="varname">DISTVERSION/DISTNAME</code></h3></div></div></div><p><code class="varname">DISTNAME</code> is the name of the port as
	called by the authors of the software.
	<code class="varname">DISTNAME</code> defaults to
	<code class="literal">${PORTNAME}-${DISTVERSIONPREFIX}${DISTVERSION}${DISTVERSIONSUFFIX}</code>,
	and <code class="varname">DISTVERSION</code> defaults to
	<code class="literal">${PORTVERSION}</code> so override it
	only if necessary.  <code class="varname">DISTNAME</code> is only used
	in two places.  First, the distribution file list
	(<code class="varname">DISTFILES</code>) defaults to
	<code class="literal">${DISTNAME}</code><code class="literal">${EXTRACT_SUFX}</code>.
	Second, the distribution file is expected to extract into a
	subdirectory named <code class="varname">WRKSRC</code>, which defaults
	to <code class="filename">work/${DISTNAME}</code>.</p><p>Some vendor's distribution names which do not fit into the
	<code class="literal">${PORTNAME}-${PORTVERSION}</code>-scheme can be
	handled automatically by setting
	<code class="varname">DISTVERSION</code>.
	<code class="varname">PORTVERSION</code> will be derived from it
	automatically.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Only one of <code class="varname">PORTVERSION</code> and
	  <code class="varname">DISTVERSION</code> can be set at a time.  If
	  <code class="varname">DISTVERSION</code> does not derive a correct
	  <code class="varname">PORTVERSION</code>, do not use
	  <code class="varname">DISTVERSION</code>, set
	  <code class="varname">PORTVERSION</code> to the right value and set
	  <code class="varname">DISTNAME</code> with <code class="varname">PORTNAME</code>
	  with either some computation of
	  <code class="varname">PORTVERSION</code> or the verbatim upstream
	  version.</p></div><div class="table"><a id="idp65877456"></a><div class="table-title">Table 5.2. Examples of <code class="varname">DISTVERSION</code> and the
	  Derived <code class="varname">PORTVERSION</code></div><div class="table-contents"><table summary="Examples of DISTVERSION and the&#10;&#9;  Derived PORTVERSION" border="0"><colgroup><col /><col /></colgroup><thead><tr><th><code class="varname">DISTVERSION</code></th><th><code class="varname">PORTVERSION</code></th></tr></thead><tbody><tr><td>0.7.1d</td><td>0.7.1.d</td></tr><tr><td>10Alpha3</td><td>10.a3</td></tr><tr><td>3Beta7-pre2</td><td>3.b7.p2</td></tr><tr><td>8:f_17</td><td>8f.17</td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="varname">PKGNAMEPREFIX</code> and
	  <code class="varname">PKGNAMESUFFIX</code> do not affect
	  <code class="varname">DISTNAME</code>.  Also note that if
	  <code class="varname">WRKSRC</code> is equal to
	  <code class="filename">${WRKDIR}/${DISTNAME}</code> while
	  the original source archive is named something other than
	  <code class="literal">${PORTNAME}-${PORTVERSION}${EXTRACT_SUFX}</code>,
	  leave <code class="varname">DISTNAME</code>
	  alone&#8212; defining only
	  <code class="varname">DISTFILES</code> is easier than both
	  <code class="varname">DISTNAME</code> and <code class="varname">WRKSRC</code>
	  (and possibly <code class="varname">EXTRACT_SUFX</code>).</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-master_sites"></a>5.4.2. <code class="varname">MASTER_SITES</code></h3></div></div></div><p>Record the directory part of the FTP/HTTP-URL pointing at
	the original tarball in <code class="varname">MASTER_SITES</code>.  Do
	not forget the trailing slash (<code class="filename">/</code>)!</p><p>The <code class="command">make</code> macros will try to use this
	specification for grabbing the distribution file with
	<code class="varname">FETCH</code> if they cannot find it already on the
	system.</p><p>It is recommended that multiple sites are included on this
	list, preferably from different continents.  This will
	safeguard against wide-area network problems.  We are even
	planning to add support for automatically determining the
	closest master site and fetching from there; having multiple
	sites will go a long way towards helping this effort.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="varname">MASTER_SITES</code> must not be blank.  It
	  must point to the actual site hosting the distribution
	  files.  It cannot point to web archives, or the FreeBSD
	  distribution files cache sites.  The only exception to this
	  rule is ports that do not have any distribution files.  For
	  example, meta-ports do not have any distribution files, so
	  <code class="varname">MASTER_SITES</code> does not need to be
	  set.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-master_sites-shorthand"></a>5.4.2.1. Using
	  <code class="varname">MASTER_SITE_<em class="replaceable"><code>*</code></em></code>
	  Variables</h4></div></div></div><p>Shortcut abbreviations are available for popular
	  archives like SourceForge (<code class="literal">SOURCEFORGE</code>),
	  GNU (<code class="literal">GNU</code>), or Perl CPAN
	  (<code class="literal">PERL_CPAN</code>).
	  <code class="varname">MASTER_SITES</code> can use them
	  directly:</p><pre class="programlisting">MASTER_SITES=	GNU/make</pre><p>The older expanded format still works, but all ports
	  have been converted to the compact format.  The expanded
	  format looks like this:</p><pre class="programlisting">MASTER_SITES=		${MASTER_SITE_GNU}
MASTER_SITE_SUBDIR=	make</pre><p>These values and variables are defined in <a class="link" href="https://svnweb.freebsd.org/ports/head/Mk/bsd.sites.mk?view=markup" target="_top"><code class="filename">Mk/bsd.sites.mk</code></a>.
	  New entries are added often, so make sure to check the
	  latest version of this file before submitting a port.</p><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">For any
	    <code class="varname">MASTER_SITE_<em class="replaceable"><code>FOO</code></em></code>
	    variable, the shorthand
	    <code class="literal"><em class="replaceable"><code>FOO</code></em></code> can be
	    used.  For example, use:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">MASTER_SITES=	<em class="replaceable"><code>FOO</code></em></pre><p xmlns="http://www.w3.org/1999/xhtml">If <code class="varname">MASTER_SITE_SUBDIR</code> is needed,
	    use this:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">MASTER_SITES=	<em class="replaceable"><code>FOO</code></em>/<em class="replaceable"><code>bar</code></em></pre></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Some
	    <code class="varname">MASTER_SITE_<em class="replaceable"><code>*</code></em></code>
	    names are quite long, and for ease of use, shortcuts have
	    been defined:</p><div xmlns="http://www.w3.org/1999/xhtml" class="table"><a id="makefile-master_sites-shortcut"></a><div class="table-title">Table 5.3. Shortcuts for
	      <code class="varname">MASTER_SITE_<em class="replaceable"><code>*</code></em></code>
	      Macros</div><div class="table-contents"><table summary="Shortcuts for&#10;&#9;      MASTER_SITE_*&#10;&#9;      Macros" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Macro</th><th>Shortcut</th></tr></thead><tbody><tr><td><code class="varname">PERL_CPAN</code></td><td><code class="varname">CPAN</code></td></tr><tr><td><code class="varname">GITHUB</code></td><td><code class="varname">GH</code></td></tr><tr><td><code class="varname">GITHUB_CLOUD</code></td><td><code class="varname">GHC</code></td></tr><tr><td><code class="varname">LIBREOFFICE_DEV</code></td><td><code class="varname">LODEV</code></td></tr><tr><td><code class="varname">NETLIB</code></td><td><code class="varname">NL</code></td></tr><tr><td><code class="varname">RUBYGEMS</code></td><td><code class="varname">RG</code></td></tr><tr><td><code class="varname">SOURCEFORGE</code></td><td><code class="varname">SF</code></td></tr><tr><td><code class="varname">SOURCEFORGE_JP</code></td><td><code class="varname">SFJP</code></td></tr></tbody></table></div></div><br xmlns="http://www.w3.org/1999/xhtml" class="table-break" /></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-master_sites-magic"></a>5.4.2.2. Magic MASTER_SITES Macros</h4></div></div></div><p>Several <span class="quote">&#8220;<span class="quote">magic</span>&#8221;</span> macros exist for
	  popular sites with a predictable directory structure.  For
	  these, just use the abbreviation and the system will choose
	  a subdirectory automatically.  For a port
	  named <code class="literal">Stardict</code>, of version
	  <code class="literal">1.2.3</code>, and hosted on SourceForge, adding
	  this line:</p><pre class="programlisting">MASTER_SITES=	SF</pre><p>infers a subdirectory named
	  <code class="literal">/project/stardict/stardict/1.2.3</code>.  If the
	  inferred directory is incorrect, it can be
	  overridden:</p><pre class="programlisting">MASTER_SITES=	SF/stardict/WyabdcRealPeopleTTS/${PORTVERSION}</pre><p>This can also be written as</p><pre class="programlisting">MASTER_SITES=	SF
MASTER_SITE_SUBDIR=	stardict/WyabdcRealPeopleTTS/${PORTVERSION}</pre><div class="table"><a id="makefile-master_sites-popular"></a><div class="table-title">Table 5.4. Magic <code class="varname">MASTER_SITES</code>
	    Macros</div><div class="table-contents"><table summary="Magic MASTER_SITES&#10;&#9;    Macros" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Macro</th><th>Assumed subdirectory</th></tr></thead><tbody><tr><td><code class="varname">APACHE_COMMONS_BINARIES</code></td><td><code class="literal">${PORTNAME:S,commons-,,}</code></td></tr><tr><td><code class="varname">APACHE_COMMONS_SOURCE</code></td><td><code class="literal">${PORTNAME:S,commons-,,}</code></td></tr><tr><td><code class="varname">APACHE_JAKARTA</code></td><td><code class="literal">${PORTNAME:S,-,/,}/source</code></td></tr><tr><td><code class="varname">BERLIOS</code></td><td><code class="literal">${PORTNAME:tl}.berlios</code></td></tr><tr><td><code class="varname">CHEESESHOP</code></td><td><code class="literal">source/${DISTNAME:C/(.).*/\1/}/${DISTNAME:C/(.*)-[0-9].*/\1/}</code></td></tr><tr><td><code class="varname">CPAN</code></td><td><code class="literal">${PORTNAME:C/-.*//}</code></td></tr><tr><td><code class="varname">DEBIAN</code></td><td><code class="literal">pool/main/${PORTNAME:C/^((lib)?.).*$/\1/}/${PORTNAME}</code></td></tr><tr><td><code class="varname">FARSIGHT</code></td><td><code class="literal">${PORTNAME}</code></td></tr><tr><td><code class="varname">FESTIVAL</code></td><td><code class="literal">${PORTREVISION}</code></td></tr><tr><td><code class="varname">GCC</code></td><td><code class="literal">releases/${DISTNAME}</code></td></tr><tr><td><code class="varname">GENTOO</code></td><td><code class="literal">distfiles</code></td></tr><tr><td><code class="varname">GIMP</code></td><td><code class="literal">${PORTNAME}/${PORTVERSION:R}/</code></td></tr><tr><td><code class="varname">GH</code></td><td><code class="literal">${GH_ACCOUNT}/${GH_PROJECT}/tar.gz/${GH_TAGNAME}?dummy=/</code></td></tr><tr><td><code class="varname">GHC</code></td><td><code class="literal">${GH_ACCOUNT}/${GH_PROJECT}/</code></td></tr><tr><td><code class="varname">GNOME</code></td><td><code class="literal">sources/${PORTNAME}/${PORTVERSION:C/^([0-9]+\.[0-9]+).*/\1/}</code></td></tr><tr><td><code class="varname">GNU</code></td><td><code class="literal">${PORTNAME}</code></td></tr><tr><td><code class="varname">GNUPG</code></td><td><code class="literal">${PORTNAME}</code></td></tr><tr><td><code class="varname">GNU_ALPHA</code></td><td><code class="literal">${PORTNAME}</code></td></tr><tr><td><code class="varname">HORDE</code></td><td><code class="literal">${PORTNAME}</code></td></tr><tr><td><code class="varname">LODEV</code></td><td><code class="literal">${PORTNAME}</code></td></tr><tr><td><code class="varname">MATE</code></td><td><code class="literal">${PORTVERSION:C/^([0-9]+\.[0-9]+).*/\1/}</code></td></tr><tr><td><code class="varname">MOZDEV</code></td><td><code class="literal">${PORTNAME:tl}</code></td></tr><tr><td><code class="varname">NL</code></td><td><code class="literal">${PORTNAME}</code></td></tr><tr><td><code class="varname">QT</code></td><td><code class="literal">archive/qt/${PORTVERSION:R}</code></td></tr><tr><td><code class="varname">SAMBA</code></td><td><code class="literal">${PORTNAME}</code></td></tr><tr><td><code class="varname">SAVANNAH</code></td><td><code class="literal">${PORTNAME:tl}</code></td></tr><tr><td><code class="varname">SF</code></td><td><code class="literal">${PORTNAME:tl}/${PORTNAME:tl}/${PORTVERSION}</code></td></tr></tbody></table></div></div><br class="table-break" /></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-master_sites-github"></a>5.4.3. <code class="varname">USE_GITHUB</code></h3></div></div></div><p>If the distribution file comes from a specific commit or
	tag on <a class="link" href="https://github.com" target="_top">GitHub</a>
	for which there is no officially released file, there is an
	easy way to set the right <code class="varname">DISTNAME</code> and
	<code class="varname">MASTER_SITES</code> automatically.  These
	variables are available:</p><div class="table"><a id="makefile-master_sites-github-description"></a><div class="table-title">Table 5.5. <code class="varname">USE_GITHUB</code> Description</div><div class="table-contents"><table summary="USE_GITHUB Description" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Variable</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code class="varname">GH_ACCOUNT</code></td><td>Account name of the GitHub user hosting the
		project</td><td><code class="literal">${PORTNAME}</code></td></tr><tr><td><code class="varname">GH_PROJECT</code></td><td>Name of the project on GitHub</td><td><code class="literal">${PORTNAME}</code></td></tr><tr><td><code class="varname">GH_TAGNAME</code></td><td>Name of the tag to download (2.0.1, hash, ...)
		Using the name of a branch here is incorrect.  It is
		also possible to use the hash of a commit id to do a
		snapshot.</td><td><code class="literal">${DISTVERSIONPREFIX}${DISTVERSION}${DISTVERSIONSUFFIX}</code></td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="makefile-master_sites-github-ex1"></a><div class="example-title">Example 5.1. Simple Use of <code class="varname">USE_GITHUB</code></div><div class="example-contents"><p>While trying to make a port for version
	  <code class="literal">1.2.7</code> of <span class="application">pkg</span>
	  from the FreeBSD user on github, at <a class="link" href="https://github.com/freebsd/pkg" target="_top">https://github.com/freebsd/pkg</a>, The
	  <code class="filename">Makefile</code> would end up looking like
	  this (slightly stripped for the example):</p><pre class="programlisting">PORTNAME=	pkg
PORTVERSION=	1.2.7

USE_GITHUB=	yes
GH_ACCOUNT=	freebsd</pre><p>It will automatically have
	  <code class="varname">MASTER_SITES</code> set to <code class="literal">GH
	    GHC</code> and <code class="varname">WRKSRC</code> to
	  <code class="literal">${WRKDIR}/pkg-1.2.7</code>.</p></div></div><br class="example-break" /><div class="example"><a id="makefile-master_sites-github-ex2"></a><div class="example-title">Example 5.2. More Complete Use of
	  <code class="varname">USE_GITHUB</code></div><div class="example-contents"><p>While trying to make a port for the bleeding edge
	  version of <span class="application">pkg</span> from the FreeBSD
	  user on github, at <a class="link" href="https://github.com/freebsd/pkg" target="_top">https://github.com/freebsd/pkg</a>, the
	  <code class="filename">Makefile</code> ends up looking like
	  this (slightly stripped for the example):</p><pre class="programlisting">PORTNAME=	pkg-devel
PORTVERSION=	1.3.0.a.20140411

USE_GITHUB=	yes
GH_ACCOUNT=	freebsd
GH_PROJECT=	pkg
GH_TAGNAME=	6dbb17b</pre><p>It will automatically have
	  <code class="varname">MASTER_SITES</code> set to <code class="literal">GH
	    GHC</code> and <code class="varname">WRKSRC</code> to
	  <code class="literal">${WRKDIR}/pkg-6dbb17b</code>.</p></div></div><br class="example-break" /><div class="example"><a id="makefile-master_sites-github-ex3"></a><div class="example-title">Example 5.3. Use of <code class="varname">USE_GITHUB</code> with
	  <code class="varname">DISTVERSIONPREFIX</code></div><div class="example-contents"><p>From time to time, <code class="varname">GH_TAGNAME</code> is a
	  slight variation from <code class="varname">DISTVERSION</code>.
	  For example, if the version is <code class="literal">1.0.2</code>,
	  the tag is <code class="literal">v1.0.2</code>.  In those cases, it
	  is possible to use <code class="varname">DISTVERSIONPREFIX</code> or
	  <code class="varname">DISTVERSIONSUFFIX</code>:</p><pre class="programlisting">PORTNAME=	foo
PORTVERSION=	1.0.2
DISTVERSIONPREFIX=	v

USE_GITHUB=	yes</pre><p>It will automatically set
	  <code class="varname">GH_TAGNAME</code> to
	  <code class="literal">v1.0.2</code>, while <code class="varname">WRKSRC</code>
	  will be kept to
	  <code class="varname">${WRKDIR}/foo-1.0.2</code>.</p></div></div><br class="example-break" /><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66037712"></a>5.4.3.1. Fetching Multiple Files From GitHub</h4></div></div></div><p>The <code class="varname">USE_GITHUB</code> framework also
	  supports fetching multiple distribution files from
	  different places in GitHub.  It works in a way very
	  similar to <a class="xref" href="#porting-master-sites-n" title="5.4.8. Multiple Distribution or Patches Files from Multiple Locations">Section 5.4.8, &#8220;Multiple Distribution or Patches Files from Multiple
	Locations&#8221;</a>.</p><p>Multiple values are added to
	  <code class="varname">GH_ACCOUNT</code>,
	  <code class="varname">GH_PROJECT</code>, and
	  <code class="varname">GH_TAGNAME</code>.  Each different value is
	  assigned a tag.  The main value can either have no tag, or
	  the <code class="literal">:DEFAULT</code> tag.  A value can be
	  omitted if it is the same as the default as listed in
	  <a class="xref" href="#makefile-master_sites-github-description" title="Table 5.5. USE_GITHUB Description">Table 5.5, &#8220;<code class="varname">USE_GITHUB</code> Description&#8221;</a>.</p><p>For each tag, a
	  <code class="varname">${WRKSRC_<em class="replaceable"><code>tag</code></em>}</code>
	  helper variable is created, containing the directory into
	  which the file has been extracted.  The
	  <code class="varname">${WRKSRC_<em class="replaceable"><code>tag</code></em>}</code>
	  variables can be used to move directories around during
	  <code class="buildtarget">post-extract</code>, or add to
	  <code class="varname">CONFIGURE_ARGS</code>, or whatever is needed
	  so that the software builds correctly.</p><div class="example"><a id="makefile-master_sites-github-multi"></a><div class="example-title">Example 5.4. Use of <code class="varname">USE_GITHUB</code> with Multiple
	    Distribution Files</div><div class="example-contents"><p>From time to time, there is a need to fetch more
	    than one distribution file.  For example, when the
	    upstream git repository uses submodules.  This can be
	    done easily using tags in the
	    <code class="varname">GH_<em class="replaceable"><code>*</code></em></code>
	    variables:</p><pre class="programlisting">PORTNAME=	foo
PORTVERSION=	1.0.2

USE_GITHUB=	yes
GH_ACCOUNT=	bar:icons,contrib
GH_PROJECT=	foo-icons:icons foo-contrib:contrib
GH_TAGNAME=	1.0:icons fa579bc:contrib

CONFIGURE_ARGS=	--with-contrib=${WRKSRC_contrib}

post-extract:
      @${MV} ${WRKSRC_icons} ${WRKSRC}/icons</pre><p>This will fetch three distribution files from
	    github.  The default one comes from
	    <code class="filename">foo/foo</code> and is version
	    <code class="literal">1.0.2</code>.  The second one, tagged
	    <code class="literal">icons</code>, comes from
	    <code class="filename">bar/foo-icons</code> and is in version
	    <code class="literal">1.0</code>.  The third one comes from
	    <code class="filename">bar/foo-contrib</code> and uses the
	    <span class="application">Git</span> commit
	    <code class="literal">fa579bc</code>.  The distribution files are
	    named <code class="filename">foo-foo-1.0.2_GH0.tar.gz</code>,
	    <code class="filename">bar-foo-icons-1.0_GH0.tar.gz</code>, and
	    <code class="filename">bar-foo-contrib-fa579bc_GH0.tar.gz</code>.</p><p>All the distribution files are extracted in
	    <code class="varname">${WRKDIR}</code> in their respective
	    subdirectories.  The default file is still extracted in
	    <code class="varname">${WRKSRC}</code>, in this case,
	    <code class="filename">${WRKDIR}/foo-1.0.2</code>.  Each
	    additional distribution file is extracted in
	    <code class="varname">${WRKSRC_<em class="replaceable"><code>tag</code></em>}</code>.
	    Here, for the <code class="literal">icons</code> tag, it is called
	    <code class="varname">${WRKSRC_icons}</code> and it contains
	    <code class="filename">${WRKDIR}/foo-icons-1.0</code>.  The file
	    with the <code class="literal">contrib</code> tag is called
	    <code class="varname">${WRKSRC_contrib}</code> and contains
	    <code class="literal">${WRKDIR}/foo-contrib-fa579bc</code>.</p></div></div><br class="example-break" /></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-extract_sufx"></a>5.4.4. <code class="varname">EXTRACT_SUFX</code></h3></div></div></div><p>If there is one distribution file, and it uses an odd
	suffix to indicate the compression mechanism, set
	<code class="varname">EXTRACT_SUFX</code>.</p><p>For example, if the distribution file was named
	<code class="filename">foo.tar.gzip</code> instead of the more normal
	<code class="filename">foo.tar.gz</code>, write:</p><pre class="programlisting">DISTNAME=	foo
EXTRACT_SUFX=	.tar.gzip</pre><p>The
	<code class="literal">USES=tar[:<em class="replaceable"><code>xxx</code></em>]</code>,
	<code class="literal">USES=lha</code> or <code class="literal">USES=zip</code>
	automatically set <code class="varname">EXTRACT_SUFX</code> to the most
	common archives extensions as necessary, see <a class="xref" href="#uses-values">Chapter 15, <em>Values of
    <code class="varname">USES</code></em></a> for more details.  If neither of
	these are set then <code class="varname">EXTRACT_SUFX</code> defaults to
	<code class="literal">.tar.gz</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">As <code class="varname">EXTRACT_SUFX</code> is only used in
	  <code class="varname">DISTFILES</code>, only set one of them..</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-distfiles-definition"></a>5.4.5. <code class="varname">DISTFILES</code></h3></div></div></div><p>Sometimes the names of the files to be downloaded have no
	resemblance to the name of the port.  For example, it might be
	called <code class="filename">source.tar.gz</code> or similar.  In
	other cases the application's source code might be in several
	different archives, all of which must be downloaded.</p><p>If this is the case, set <code class="varname">DISTFILES</code> to
	be a space separated list of all the files that must be
	downloaded.</p><pre class="programlisting">DISTFILES=	source1.tar.gz source2.tar.gz</pre><p>If not explicitly set, <code class="varname">DISTFILES</code>
	defaults to
	<code class="literal">${DISTNAME}${EXTRACT_SUFX}</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-extract_only"></a>5.4.6. <code class="varname">EXTRACT_ONLY</code></h3></div></div></div><p>If only some of the <code class="varname">DISTFILES</code> must be
	extracted&#8212;for example, one of them is the source code,
	while another is an uncompressed document&#8212;list the
	filenames that must be extracted in
	<code class="varname">EXTRACT_ONLY</code>.</p><pre class="programlisting">DISTFILES=	source.tar.gz manual.html
EXTRACT_ONLY=	source.tar.gz</pre><p>When none of the <code class="varname">DISTFILES</code> need to be
	uncompressed, set <code class="varname">EXTRACT_ONLY</code> to the empty
	string.</p><pre class="programlisting">EXTRACT_ONLY=</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-patchfiles"></a>5.4.7. <code class="varname">PATCHFILES</code></h3></div></div></div><p>If the port requires some additional patches that are
	available by <acronym class="acronym">FTP</acronym> or
	<acronym class="acronym">HTTP</acronym>, set <code class="varname">PATCHFILES</code> to
	the names of the files and <code class="varname">PATCH_SITES</code> to
	the URL of the directory that contains them (the format is the
	same as <code class="varname">MASTER_SITES</code>).</p><p>If the patch is not relative to the top of the source tree
	(that is, <code class="varname">WRKSRC</code>) because it contains some
	extra pathnames, set <code class="varname">PATCH_DIST_STRIP</code>
	accordingly.  For instance, if all the pathnames in the patch
	have an extra <code class="literal">foozolix-1.0/</code> in front of the
	filenames, then set
	<code class="literal">PATCH_DIST_STRIP=-p1</code>.</p><p>Do not worry if the patches are compressed; they will be
	decompressed automatically if the filenames end with
	<code class="filename">.Z</code>, <code class="filename">.gz</code>,
	<code class="filename">.bz2</code> or <code class="filename">.xz</code>.</p><p>If the patch is distributed with some other files, such as
	documentation, in a <code class="command">gzip</code>ped tarball, using
	<code class="varname">PATCHFILES</code> is not possible.  If that is the
	case, add the name and the location of the patch tarball to
	<code class="varname">DISTFILES</code> and
	<code class="varname">MASTER_SITES</code>.  Then, use
	<code class="varname">EXTRA_PATCHES</code> to point to those
	files and <code class="filename">bsd.port.mk</code> will automatically
	apply them.  In particular, do
	<span class="emphasis"><em>not</em></span> copy patch files into
	<code class="filename">${PATCHDIR}</code>.  That directory may
	not be writable.</p><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">If there are multiple patches and they need mixed values
	  for the strip parameter, it can be added alongside the patch
	  name in <code class="varname">PATCHFILES</code>, e.g:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">PATCHFILES=	patch1 patch2:-p1</pre><p xmlns="http://www.w3.org/1999/xhtml">This does not conflict with <a class="link" href="#porting-master-sites-n" title="5.4.8. Multiple Distribution or Patches Files from Multiple Locations">the master site grouping
	    feature</a>, adding a group also works:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">PATCHFILES=	patch2:-p1:source2</pre></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">The tarball will have been extracted alongside the
	  regular source by then, so there is no need to explicitly
	  extract it if it is a regular <code class="command">gzip</code>ped or
	  <code class="command">compress</code>ed tarball.  Take extra care not
	  to overwrite something that already exists in that
	  directory if extracting it manually.  Also, do not forget to
	  add a command to remove the copied patch in the
	  <code class="buildtarget">pre-clean</code> target.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-master-sites-n"></a>5.4.8. Multiple Distribution or Patches Files from Multiple
	Locations</h3></div></div></div><p>(Consider this to be a somewhat
	<span class="quote">&#8220;<span class="quote">advanced topic</span>&#8221;</span>; those new to this document
	may wish to skip this section at first).</p><p>This section has information on the fetching mechanism
	known as both <code class="literal">MASTER_SITES:n</code> and
	<code class="literal">MASTER_SITES_NN</code>.  We will refer to this
	mechanism as <code class="literal">MASTER_SITES:n</code>.</p><p>A little background first.  OpenBSD has a neat feature
	inside <code class="varname">DISTFILES</code> and
	<code class="varname">PATCHFILES</code> which allows files and
	patches to be postfixed with <code class="literal">:n</code>
	identifiers.  Here, <code class="literal">n</code> can be both
	<code class="literal">[0-9]</code> and denote a group designation.  For
	example:</p><pre class="programlisting">DISTFILES=	alpha:0 beta:1</pre><p>In OpenBSD, distribution file <code class="filename">alpha</code>
	will be associated with variable
	<code class="varname">MASTER_SITES0</code> instead of our common
	<code class="varname">MASTER_SITES</code> and
	<code class="filename">beta</code> with
	<code class="varname">MASTER_SITES1</code>.</p><p>This is a very interesting feature which can decrease
	that endless search for the correct download site.</p><p>Just picture 2 files in <code class="varname">DISTFILES</code> and
	20 sites in <code class="varname">MASTER_SITES</code>, the sites slow as
	hell where <code class="filename">beta</code> is carried by all sites
	in <code class="varname">MASTER_SITES</code>, and
	<code class="filename">alpha</code> can only be found in the 20th site.
	It would be such a waste to check all of them if the
	maintainer knew this beforehand, would it not?  Not a good
	start for that lovely weekend!</p><p>Now that you have the idea, just imagine more
	<code class="varname">DISTFILES</code> and more
	<code class="varname">MASTER_SITES</code>.  Surely our
	<span class="quote">&#8220;<span class="quote">distfiles survey meister</span>&#8221;</span> would appreciate the
	relief to network strain that this would bring.</p><p>In the next sections, information will follow on the
	FreeBSD implementation of this idea.  We improved a bit on
	OpenBSD's concept.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-master-sites-n-simplified"></a>5.4.8.1. Simplified Information</h4></div></div></div><p>This section explains how to quickly prepare fine
	  grained fetching of multiple distribution files and patches
	  from different sites and subdirectories.  We describe here a
	  case of simplified <code class="literal">MASTER_SITES:n</code> usage.
	  This will be sufficient for most scenarios.  More detailed
	  information are available in <a class="xref" href="#ports-master-sites-n-detailed" title="5.4.8.2. Detailed Information">Section 5.4.8.2, &#8220;Detailed Information&#8221;</a>.</p><p>Some applications consist of multiple distribution files
	  that must be downloaded from a number of different sites.
	  For example, <span class="application">Ghostscript</span> consists
	  of the core of the program, and then a large number of
	  driver files that are used depending on the user's printer.
	  Some of these driver files are supplied with the core, but
	  many others must be downloaded from a variety of different
	  sites.</p><p>To support this, each entry in
	  <code class="varname">DISTFILES</code> may be followed by a colon and
	  a <span class="quote">&#8220;<span class="quote">tag name</span>&#8221;</span>.  Each site listed in
	  <code class="varname">MASTER_SITES</code> is then followed by a colon,
	  and the tag that indicates which distribution files are
	  downloaded from this site.</p><p>For example, consider an application with the source
	  split in two parts, <code class="filename">source1.tar.gz</code> and
	  <code class="filename">source2.tar.gz</code>, which must be
	  downloaded from two different sites.  The port's
	  <code class="filename">Makefile</code> would include lines like <a class="xref" href="#ports-master-sites-n-example-simple-use-one-file-per-site" title="Example 5.5. Simplified Use of MASTER_SITES:n with One File Per Site">Example 5.5, &#8220;Simplified Use of <code class="literal">MASTER_SITES:n</code>
	    with One File Per Site&#8221;</a>.</p><div class="example"><a id="ports-master-sites-n-example-simple-use-one-file-per-site"></a><div class="example-title">Example 5.5. Simplified Use of <code class="literal">MASTER_SITES:n</code>
	    with One File Per Site</div><div class="example-contents"><pre class="programlisting">MASTER_SITES=	ftp://ftp1.example.com/:source1 \
		http://www.example.com/:source2
DISTFILES=	source1.tar.gz:source1 \
		source2.tar.gz:source2</pre></div></div><br class="example-break" /><p>Multiple distribution files can have the same tag.
	  Continuing the previous example, suppose that there was a
	  third distfile, <code class="filename">source3.tar.gz</code>, that
	  is downloaded from
	  <code class="systemitem">ftp.example2.com</code>.  The
	  <code class="filename">Makefile</code> would then be written like
	  <a class="xref" href="#ports-master-sites-n-example-simple-use-more-than-one-file-per-site" title="Example 5.6. Simplified Use of MASTER_SITES:n with More Than One File Per Site">Example 5.6, &#8220;Simplified Use of <code class="literal">MASTER_SITES:n</code>
	    with More Than One File Per Site&#8221;</a>.</p><div class="example"><a id="ports-master-sites-n-example-simple-use-more-than-one-file-per-site"></a><div class="example-title">Example 5.6. Simplified Use of <code class="literal">MASTER_SITES:n</code>
	    with More Than One File Per Site</div><div class="example-contents"><pre class="programlisting">MASTER_SITES=	ftp://ftp.example.com/:source1 \
		http://www.example.com/:source2
DISTFILES=	source1.tar.gz:source1 \
		source2.tar.gz:source2 \
		source3.tar.gz:source2</pre></div></div><br class="example-break" /></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-master-sites-n-detailed"></a>5.4.8.2. Detailed Information</h4></div></div></div><p>Okay, so the previous example did not reflect the new
	  port's needs?  In this section we will explain in detail how
	  the fine grained fetching mechanism
	  <code class="literal">MASTER_SITES:n</code> works and how it can
	  be used.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Elements can be postfixed with
	      <code class="literal">:<em class="replaceable"><code>n</code></em></code> where
	      <em class="replaceable"><code>n</code></em> is
	      <code class="literal">[^:,]+</code>, that is,
	      <em class="replaceable"><code>n</code></em> could conceptually be any
	      alphanumeric string but we will limit it to
	      <code class="literal">[a-zA-Z_][0-9a-zA-Z_]+</code> for
	      now.</p><p>Moreover, string matching is case sensitive; that
	      is, <code class="literal">n</code> is different from
	      <code class="literal">N</code>.</p><p>However, these words cannot be used for
	      postfixing purposes since they yield special meaning:
	      <code class="literal">default</code>, <code class="literal">all</code> and
	      <code class="literal">ALL</code> (they are used internally in
	      item <a class="xref" href="#porting-master-sites-n-what-changes-in-port-targets">ii</a>).
	      Furthermore, <code class="literal">DEFAULT</code> is a special
	      purpose word (check item <a class="xref" href="#porting-master-sites-n-DEFAULT-group">3</a>).</p></li><li class="listitem"><p>Elements postfixed with <code class="literal">:n</code>
	      belong to the group <code class="literal">n</code>,
	      <code class="literal">:m</code> belong to group
	      <code class="literal">m</code> and so forth.</p></li><li class="listitem"><p><a id="porting-master-sites-n-DEFAULT-group"></a>Elements without a postfix are groupless, they
	      all belong to the special group
	      <code class="literal">DEFAULT</code>.  Any elements postfixed
	      with <code class="literal">DEFAULT</code>, is just being
	      redundant unless an element belongs
	      to both <code class="literal">DEFAULT</code> and other groups at
	      the same time (check item <a class="xref" href="#porting-master-sites-n-comma-operator">5</a>).</p><p>These examples are equivalent but the first
	      one is preferred:</p><pre class="programlisting">MASTER_SITES=	alpha</pre><pre class="programlisting">MASTER_SITES=	alpha:DEFAULT</pre></li><li class="listitem"><p>Groups are not exclusive, an element may belong to
	      several different groups at the same time and a group
	      can either have either several different elements or
	      none at all.</p></li><li class="listitem"><p><a id="porting-master-sites-n-comma-operator"></a>When an element belongs to several groups
	      at the same time, use the comma operator
	      (<code class="literal">,</code>).</p><p>Instead of repeating it several times, each time
	      with a different postfix, we can list several groups at
	      once in a single postfix.  For instance,
	      <code class="literal">:m,n,o</code> marks an element that belongs
	      to group <code class="literal">m</code>, <code class="literal">n</code> and
	      <code class="literal">o</code>.</p><p>All these examples are equivalent but the
	      last one is preferred:</p><pre class="programlisting">MASTER_SITES=	alpha alpha:SOME_SITE</pre><pre class="programlisting">MASTER_SITES=	alpha:DEFAULT alpha:SOME_SITE</pre><pre class="programlisting">MASTER_SITES=	alpha:SOME_SITE,DEFAULT</pre><pre class="programlisting">MASTER_SITES=	alpha:DEFAULT,SOME_SITE</pre></li><li class="listitem"><p>All sites within a given group are sorted according
	      to <code class="varname">MASTER_SORT_AWK</code>.  All groups
	      within <code class="varname">MASTER_SITES</code> and
	      <code class="varname">PATCH_SITES</code> are sorted as
	      well.</p></li><li class="listitem"><p><a id="porting-master-sites-n-group-semantics"></a>Group semantics can be used in any of the
	      variables <code class="varname">MASTER_SITES</code>,
	      <code class="varname">PATCH_SITES</code>,
	      <code class="varname">MASTER_SITE_SUBDIR</code>,
	      <code class="varname">PATCH_SITE_SUBDIR</code>,
	      <code class="varname">DISTFILES</code>, and
	      <code class="varname">PATCHFILES</code> according to this
	      syntax:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>All <code class="varname">MASTER_SITES</code>,
		  <code class="varname">PATCH_SITES</code>,
		  <code class="varname">MASTER_SITE_SUBDIR</code> and
		  <code class="varname">PATCH_SITE_SUBDIR</code> elements must
		  be terminated with the forward slash
		  <code class="literal">/</code> character.  If any elements
		  belong to any groups, the group postfix
		  <code class="literal">:<em class="replaceable"><code>n</code></em></code>
		  must come right after the terminator
		  <code class="literal">/</code>.  The
		  <code class="literal">MASTER_SITES:n</code> mechanism relies
		  on the existence of the terminator
		  <code class="literal">/</code> to avoid confusing elements
		  where a <code class="literal">:n</code> is a valid part of the
		  element with occurrences where <code class="literal">:n</code>
		  denotes group <code class="literal">n</code>.  For
		  compatibility purposes, since the
		  <code class="literal">/</code> terminator was not required
		  before in both <code class="varname">MASTER_SITE_SUBDIR</code>
		  and <code class="varname">PATCH_SITE_SUBDIR</code> elements,
		  if the postfix immediate preceding character is not
		  a <code class="literal">/</code> then <code class="literal">:n</code>
		  will be considered a valid part of the element
		  instead of a group postfix even if an element is
		  postfixed with <code class="literal">:n</code>.  See both
		  <a class="xref" href="#ports-master-sites-n-example-detailed-use-master-site-subdir" title="Example 5.7. Detailed Use of MASTER_SITES:n in MASTER_SITE_SUBDIR">Example 5.7, &#8220;Detailed Use of
		    <code class="literal">MASTER_SITES:n</code> in
		    <code class="varname">MASTER_SITE_SUBDIR</code>&#8221;</a>
		  and <a class="xref" href="#ports-master-sites-n-example-detailed-use-complete-example-master-sites" title="Example 5.8. Detailed Use of MASTER_SITES:n with Comma Operator, Multiple Files, Multiple Sites and Multiple Subdirectories">Example 5.8, &#8220;Detailed Use of
		    <code class="literal">MASTER_SITES:n</code> with Comma
		    Operator, Multiple Files, Multiple Sites and
		    Multiple Subdirectories&#8221;</a>.</p><div class="example"><a id="ports-master-sites-n-example-detailed-use-master-site-subdir"></a><div class="example-title">Example 5.7. Detailed Use of
		    <code class="literal">MASTER_SITES:n</code> in
		    <code class="varname">MASTER_SITE_SUBDIR</code></div><div class="example-contents"><pre class="programlisting">MASTER_SITE_SUBDIR=	old:n new/:NEW</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Directories within group
			<code class="literal">DEFAULT</code> -&gt;
			old:n</p></li><li class="listitem"><p>Directories within group
			<code class="literal">NEW</code> -&gt; new</p></li></ul></div></div></div><br class="example-break" /><div class="example"><a id="ports-master-sites-n-example-detailed-use-complete-example-master-sites"></a><div class="example-title">Example 5.8. Detailed Use of
		    <code class="literal">MASTER_SITES:n</code> with Comma
		    Operator, Multiple Files, Multiple Sites and
		    Multiple Subdirectories</div><div class="example-contents"><pre class="programlisting">MASTER_SITES=	http://site1/%SUBDIR%/ http://site2/:DEFAULT \
		http://site3/:group3 http://site4/:group4 \
		http://site5/:group5 http://site6/:group6 \
		http://site7/:DEFAULT,group6 \
		http://site8/%SUBDIR%/:group6,group7 \
		http://site9/:group8
DISTFILES=	file1 file2:DEFAULT file3:group3 \
		file4:group4,group5,group6 file5:grouping \
		file6:group7
MASTER_SITE_SUBDIR=	directory-trial:1 directory-n/:groupn \
		directory-one/:group6,DEFAULT \
		directory</pre><p>The previous example results in this
		    fine grained fetching.  Sites are listed in the
		    exact order they will be used.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">file1</code> will be
			fetched from</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><code class="varname">MASTER_SITE_OVERRIDE</code></p></li><li class="listitem"><p>http://site1/directory-trial:1/</p></li><li class="listitem"><p>http://site1/directory-one/</p></li><li class="listitem"><p>http://site1/directory/</p></li><li class="listitem"><p>http://site2/</p></li><li class="listitem"><p>http://site7/</p></li><li class="listitem"><p><code class="varname">MASTER_SITE_BACKUP</code></p></li></ul></div></li><li class="listitem"><p><code class="filename">file2</code> will be fetched
			exactly as <code class="filename">file1</code> since
			they both belong to the same group</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><code class="varname">MASTER_SITE_OVERRIDE</code></p></li><li class="listitem"><p>http://site1/directory-trial:1/</p></li><li class="listitem"><p>http://site1/directory-one/</p></li><li class="listitem"><p>http://site1/directory/</p></li><li class="listitem"><p>http://site2/</p></li><li class="listitem"><p>http://site7/</p></li><li class="listitem"><p><code class="varname">MASTER_SITE_BACKUP</code></p></li></ul></div></li><li class="listitem"><p><code class="filename">file3</code> will be fetched
			from</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><code class="varname">MASTER_SITE_OVERRIDE</code></p></li><li class="listitem"><p>http://site3/</p></li><li class="listitem"><p><code class="varname">MASTER_SITE_BACKUP</code></p></li></ul></div></li><li class="listitem"><p><code class="filename">file4</code> will be
			fetched from</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><code class="varname">MASTER_SITE_OVERRIDE</code></p></li><li class="listitem"><p>http://site4/</p></li><li class="listitem"><p>http://site5/</p></li><li class="listitem"><p>http://site6/</p></li><li class="listitem"><p>http://site7/</p></li><li class="listitem"><p>http://site8/directory-one/</p></li><li class="listitem"><p><code class="varname">MASTER_SITE_BACKUP</code></p></li></ul></div></li><li class="listitem"><p><code class="filename">file5</code> will be fetched
			from</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><code class="varname">MASTER_SITE_OVERRIDE</code></p></li><li class="listitem"><p><code class="varname">MASTER_SITE_BACKUP</code></p></li></ul></div></li><li class="listitem"><p><code class="filename">file6</code> will be fetched
			from</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><code class="varname">MASTER_SITE_OVERRIDE</code></p></li><li class="listitem"><p>http://site8/</p></li><li class="listitem"><p><code class="varname">MASTER_SITE_BACKUP</code></p></li></ul></div></li></ul></div></div></div><br class="example-break" /></li></ol></div></li><li class="listitem"><p>How do I group one of the special macros from
	      <code class="filename">bsd.sites.mk</code>, for example,
	      SourceForge (<code class="literal">SF</code>)?</p><p>This has been simplified as much as possible.  See
		<a class="xref" href="#ports-master-sites-n-example-detailed-use-master-site-sourceforge" title="Example 5.9. Detailed Use of MASTER_SITES:n with SourceForge (SF)">Example 5.9, &#8220;Detailed Use of <code class="literal">MASTER_SITES:n</code>
		with SourceForge (<code class="literal">SF</code>)&#8221;</a>.</p><div class="example"><a id="ports-master-sites-n-example-detailed-use-master-site-sourceforge"></a><div class="example-title">Example 5.9. Detailed Use of <code class="literal">MASTER_SITES:n</code>
		with SourceForge (<code class="literal">SF</code>)</div><div class="example-contents"><pre class="programlisting">MASTER_SITES=	http://site1/ SF/something/1.0:sourceforge,TEST
DISTFILES=	something.tar.gz:sourceforge</pre><p><code class="filename">something.tar.gz</code> will be
	      fetched from all sites within SourceForge.</p></div></div><br class="example-break" /></li><li class="listitem"><p>How do I use this with
	      <code class="varname">PATCH<em class="replaceable"><code>*</code></em></code>?</p><p>All examples were done with
	      <code class="varname">MASTER<em class="replaceable"><code>*</code></em></code>
	      but they work exactly the same for
	      <code class="varname">PATCH<em class="replaceable"><code>*</code></em></code>
	      ones as can be seen in <a class="xref" href="#ports-master-sites-n-example-detailed-use-patch-sites" title="Example 5.10. Simplified Use of MASTER_SITES:n with PATCH_SITES">Example 5.10, &#8220;Simplified Use of
		<code class="literal">MASTER_SITES:n</code> with
		<code class="varname">PATCH_SITES</code>&#8221;</a>.</p><div class="example"><a id="ports-master-sites-n-example-detailed-use-patch-sites"></a><div class="example-title">Example 5.10. Simplified Use of
		<code class="literal">MASTER_SITES:n</code> with
		<code class="varname">PATCH_SITES</code></div><div class="example-contents"><pre class="programlisting">PATCH_SITES=	http://site1/ http://site2/:test
PATCHFILES=	patch1:test</pre></div></div><br class="example-break" /></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="port-master-sites-n-what-changed"></a>5.4.8.3. What Does Change for Ports?  What Does Not?</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p>All current ports remain the same.  The
	      <code class="literal">MASTER_SITES:n</code> feature code is only
	      activated if there are elements postfixed with
	      <code class="literal">:<em class="replaceable"><code>n</code></em></code> like
	      elements according to the aforementioned syntax rules,
	      especially as shown in item <a class="xref" href="#porting-master-sites-n-group-semantics">7</a>.</p></li><li class="listitem"><p><a id="porting-master-sites-n-what-changes-in-port-targets"></a>The port targets remain the same:
	      <code class="buildtarget">checksum</code>,
	      <code class="buildtarget">makesum</code>,
	      <code class="buildtarget">patch</code>,
	      <code class="buildtarget">configure</code>,
	      <code class="buildtarget">build</code>, etc.  With the obvious
	      exceptions of <code class="buildtarget">do-fetch</code>,
	      <code class="buildtarget">fetch-list</code>,
	      <code class="buildtarget">master-sites</code> and
	      <code class="buildtarget">patch-sites</code>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="buildtarget">do-fetch</code>: deploys
		  the new grouping postfixed
		  <code class="varname">DISTFILES</code> and
		  <code class="varname">PATCHFILES</code> with their matching
		  group elements within both
		  <code class="varname">MASTER_SITES</code> and
		  <code class="varname">PATCH_SITES</code> which use matching
		  group elements within both
		  <code class="varname">MASTER_SITE_SUBDIR</code> and
		  <code class="varname">PATCH_SITE_SUBDIR</code>.  Check <a class="xref" href="#ports-master-sites-n-example-detailed-use-complete-example-master-sites" title="Example 5.8. Detailed Use of MASTER_SITES:n with Comma Operator, Multiple Files, Multiple Sites and Multiple Subdirectories">Example 5.8, &#8220;Detailed Use of
		    <code class="literal">MASTER_SITES:n</code> with Comma
		    Operator, Multiple Files, Multiple Sites and
		    Multiple Subdirectories&#8221;</a>.</p></li><li class="listitem"><p><code class="buildtarget">fetch-list</code>: works
		  like old <code class="buildtarget">fetch-list</code> with
		  the exception that it groups just like
		  <code class="buildtarget">do-fetch</code>.</p></li><li class="listitem"><p><code class="buildtarget">master-sites</code> and
		  <code class="buildtarget">patch-sites</code>:
		  (incompatible with older versions) only return the
		  elements of group <code class="literal">DEFAULT</code>; in
		  fact, they execute targets
		  <code class="buildtarget">master-sites-default</code> and
		  <code class="buildtarget">patch-sites-default</code>
		  respectively.</p><p>Furthermore, using target either
		  <code class="buildtarget">master-sites-all</code> or
		  <code class="buildtarget">patch-sites-all</code> is
		  preferred to directly checking either
		  <code class="buildtarget">MASTER_SITES</code> or
		  <code class="buildtarget">PATCH_SITES</code>.  Also,
		  directly checking is not guaranteed to work in any
		  future versions.  Check item <a class="xref" href="#porting-master-sites-n-new-port-targets-master-sites-all">B</a>
		  for more information on these new port
		  targets.</p></li></ul></div></li><li class="listitem"><p>New port targets</p><div class="orderedlist"><ol class="orderedlist" type="A"><li class="listitem"><p>There are
		  <code class="buildtarget">master-sites-<em class="replaceable"><code>n</code></em></code>
		  and
		  <code class="buildtarget">patch-sites-<em class="replaceable"><code>n</code></em></code>
		  targets which will list the elements of the
		  respective group <em class="replaceable"><code>n</code></em>
		  within <code class="varname">MASTER_SITES</code> and
		  <code class="varname">PATCH_SITES</code> respectively.  For
		  instance, both
		  <code class="buildtarget">master-sites-DEFAULT</code>
		  and <code class="buildtarget">patch-sites-DEFAULT</code>
		  will return the elements of group
		  <code class="literal">DEFAULT</code>,
		  <code class="buildtarget">master-sites-test</code> and
		  <code class="buildtarget">patch-sites-test</code> of
		  group <code class="literal">test</code>, and thereon.</p></li><li class="listitem"><p><a id="porting-master-sites-n-new-port-targets-master-sites-all"></a>There are new targets
		  <code class="buildtarget">master-sites-all</code> and
		  <code class="buildtarget">patch-sites-all</code> which do
		  the work of the old
		  <code class="buildtarget">master-sites</code> and
		  <code class="buildtarget">patch-sites</code> ones.  They
		  return the elements of all groups as if they all
		  belonged to the same group with the caveat that it
		  lists as many <code class="varname">MASTER_SITE_BACKUP</code>
		  and <code class="varname">MASTER_SITE_OVERRIDE</code> as there
		  are groups defined within either
		  <code class="varname">DISTFILES</code> or
		  <code class="varname">PATCHFILES</code>; respectively for
		  <code class="buildtarget">master-sites-all</code> and
		  <code class="buildtarget">patch-sites-all</code>.</p></li></ol></div></li></ol></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-dist_subdir"></a>5.4.9. <code class="varname">DIST_SUBDIR</code></h3></div></div></div><p>Do not let the port clutter
	<code class="filename">/usr/ports/distfiles</code>.  If the port
	requires a lot of files to be fetched, or contains a file that
	has a name that might conflict with other ports (for example,
	<code class="filename">Makefile</code>), set
	<code class="varname">DIST_SUBDIR</code> to the name of the port
	(<code class="literal">${PORTNAME}</code> or
	<code class="literal">${PKGNAMEPREFIX}${PORTNAME}</code> are
	fine).  This will change <code class="varname">DISTDIR</code> from the
	default <code class="filename">/usr/ports/distfiles</code> to
	<code class="filename">/usr/ports/distfiles/${DIST_SUBDIR}</code>, and
	in effect puts everything that is required for the port into
	that subdirectory.</p><p>It will also look at the subdirectory with the same name
	on the backup master site at
	<code class="filename">ftp.FreeBSD.org</code>.  (Setting
	<code class="varname">DISTDIR</code> explicitly in
	<code class="filename">Makefile</code> will not accomplish this, so
	please use <code class="varname">DIST_SUBDIR</code>.)</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">This does not affect
	  <code class="varname">MASTER_SITES</code> defined in the
	  <code class="filename">Makefile</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-always_keep_distfiles"></a>5.4.10. <code class="varname">ALWAYS_KEEP_DISTFILES</code></h3></div></div></div><p>If the port uses binary distfiles and has a license that
	requires that the source code is provided with packages
	distributed in binary form, like <acronym class="acronym">GPL</acronym>,
	<code class="varname">ALWAYS_KEEP_DISTFILES</code> will instruct the
	FreeBSD build cluster to keep a copy of the files specified in
	<code class="varname">DISTFILES</code>.  Users of these ports will
	generally not need these files, so it is a good idea to only
	add the source distfiles to <code class="varname">DISTFILES</code> when
	<code class="varname">PACKAGE_BUILDING</code> is defined.</p><div class="example"><a id="ports-master-sites-n-example-always-keep-distfiles"></a><div class="example-title">Example 5.11. Use of
	  <code class="varname">ALWAYS_KEEP_DISTFILES</code></div><div class="example-contents"><pre class="programlisting">.if defined(PACKAGE_BUILDING)
DISTFILES+=		<em class="replaceable"><code>foo.tar.gz</code></em>
ALWAYS_KEEP_DISTFILES=	yes
.endif</pre></div></div><br class="example-break" /><p>When adding extra files to <code class="varname">DISTFILES</code>,
	make sure to also add them to <code class="filename">distinfo</code>.
	Also, the additional files will normally be extracted into
	<code class="varname">WRKDIR</code> as well, which for some ports may
	lead to undesirable side effects and require special
	handling.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-maintainer"></a>5.5. <code class="varname">MAINTAINER</code></h2></div></div></div><p>Set your mail-address here.  Please.
      
      <span class="emphasis"><em>:-)</em></span></p><p>Only a single address without the comment part is
      allowed as a <code class="varname">MAINTAINER</code> value.  The format
      used is <code class="literal">user@hostname.domain</code>.  Please
      do not include any descriptive text such as a real name in
      this entry.  That merely confuses the Ports infrastructure
      and most tools using it.</p><p>The maintainer is responsible for keeping the port up to
      date and making sure that it works correctly.  For a detailed
      description of the responsibilities of a port maintainer, refer
      to <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/contributing-ports/maintain-port.html" target="_top">The
	challenge for port maintainers</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">A maintainer volunteers to keep a port in good working
	order.  Maintainers have the primary responsibility for their
	ports, but not exclusive ownership.  Ports exist for the
	benefit of the community and, in reality, belong to the
	community.  What this means is that people other than the
	maintainer can make changes to a port.  Large changes to the
	Ports Collection might require changes to many ports.  The
	FreeBSD Ports Management Team or members of other teams might
	modify ports to fix dependency issues or other problems, like
	a version bump for a shared library update.</p><p xmlns="http://www.w3.org/1999/xhtml">Some types of fixes have <span class="quote">&#8220;<span class="quote">blanket approval</span>&#8221;</span>
	from the Ports Management Team <code class="email">&lt;<a xmlns="" class="email" href="mailto:portmgr@FreeBSD.org">portmgr@FreeBSD.org</a>&gt;</code>, allowing any committer to fix those
	categories of problems on any port.  These fixes do not need
	approval from the maintainer.  Blanket approval does not apply
	to ports that are maintained by teams like <code class="email">&lt;autotools@FreeBSD.org&gt;</code>, <code class="email">&lt;x11@FreeBSD.org&gt;</code>, <code class="email">&lt;gnome@FreeBSD.org&gt;</code>, or <code class="email">&lt;kde@FreeBSD.org&gt;</code>.  These teams use
	external repositories and can have work that would conflict
	with changes that would normally fall under blanket
	approval.</p><p xmlns="http://www.w3.org/1999/xhtml">Blanket approval for most ports applies to these types of
	fixes:</p><div xmlns="http://www.w3.org/1999/xhtml" class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Most infrastructure changes to a port (that is,
	    modernizing, but not changing the functionality).  For
	    example, converting to staging,
	    <code class="varname">USE_GMAKE</code> to
	    <code class="literal">USES=gmake</code>, the new
	    <code class="varname">LIB_DEPENDS</code> format...</p></li><li class="listitem"><p>Trivial and <span class="emphasis"><em>tested</em></span> build and
	    runtime fixes.</p></li></ul></div></div><p>Other changes to the port will be sent to the maintainer
      for review and approval before being committed.  If the
      maintainer does not respond to an update request after two weeks
      (excluding major public holidays), then that is considered a
      maintainer timeout, and the update may be made without explicit
      maintainer approval.  If the maintainer does not respond within
      three months, or if there have been three consecutive timeouts,
      then that maintainer is considered absent without
      leave, and can be replaced as the maintainer of the particular
      port in question.  Exceptions to this are anything maintained by
      the Ports Management Team <code class="email">&lt;<a xmlns="" class="email" href="mailto:portmgr@FreeBSD.org">portmgr@FreeBSD.org</a>&gt;</code>, or the Security Officer Team <code class="email">&lt;<a xmlns="" class="email" href="mailto:security-officer@FreeBSD.org">security-officer@FreeBSD.org</a>&gt;</code>.  No unauthorized
      commits may ever be made to ports maintained by those
      groups.</p><p>We reserve the right to modify the maintainer's submission
      to better match existing policies and style of the Ports
      Collection without explicit blessing from the submitter or the
      maintainer.  Also,
      large infrastructural changes can result in a port being
      modified without the maintainer's consent.  These kinds of
      changes will never affect the port's functionality.</p><p>The Ports Management Team <code class="email">&lt;<a xmlns="" class="email" href="mailto:portmgr@FreeBSD.org">portmgr@FreeBSD.org</a>&gt;</code> reserves the right to revoke or override
      anyone's maintainership for any reason, and the
      Security Officer Team <code class="email">&lt;<a xmlns="" class="email" href="mailto:security-officer@FreeBSD.org">security-officer@FreeBSD.org</a>&gt;</code> reserves the right to revoke or override
      maintainership for security reasons.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-comment"></a>5.6. <code class="varname">COMMENT</code></h2></div></div></div><p>This is a one-line description of the port.  Please respect
      these rules:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Try to keep the COMMENT value at no longer than 70
	  characters, as this line will be used by
	  <code class="command">pkg info</code> (see <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg-info&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg-info</span>(8)</span></a>) to
	  display a one-line summary of the port;</p></li><li class="listitem"><p>Do <span class="emphasis"><em>not</em></span> include the package name (or
	  version number of the software);</p></li><li class="listitem"><p>The comment must begin with a capital and end without
	  a period;</p></li><li class="listitem"><p>Do not start with an indefinite article (that is, A or
	  An);</p></li><li class="listitem"><p>Names are capitalized (for example, Apache, JavaScript,
	  Perl);</p></li><li class="listitem"><p>For lists of words, use the Oxford comma (for example,
	  green, red<span class="emphasis"><em>,</em></span> and blue);</p></li><li class="listitem"><p>Spell check the text.</p></li></ol></div><p>Here is an example:</p><pre class="programlisting">COMMENT=	Cat chasing a mouse all over the screen</pre><p>The COMMENT variable immediately follows the
      MAINTAINER variable in the <code class="filename">Makefile</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-portscout"></a>5.7. <code class="varname">PORTSCOUT</code></h2></div></div></div><p><span class="application">Portscout</span> is an automated
      distfile check utility for the FreeBSD Ports Collection,
      described in detail in <a class="xref" href="#distfile-survey" title="14.5. Portscout: the FreeBSD Ports Distfile Scanner">Section 14.5, &#8220;Portscout: the FreeBSD Ports Distfile Scanner&#8221;</a>.</p><p><code class="varname">PORTSCOUT</code> defines special
      conditions within which the <span class="application">Portscout</span>
      distfile scanner is restricted.</p><p>Situations where <code class="varname">PORTSCOUT</code>
      is set include:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>When distfiles have to be ignored, whether for specific
	  versions, or specific minor revisions.  For example, to
	  exclude version <em class="replaceable"><code>8.2</code></em> from distfile
	  version checks because it is known to be broken, add:</p><pre class="programlisting">PORTSCOUT=	ignore:8.2</pre></li><li class="listitem"><p>When specific versions or specific major and minor
	  revisions of a distfile must be checked.  For example, if
	  only version <em class="replaceable"><code>0.6.4</code></em> must be
	  monitored because newer versions have compatibility issues
	  with FreeBSD, add:</p><pre class="programlisting">PORTSCOUT=	limit:^0\.6\.4</pre></li><li class="listitem"><p>When URLs listing the available versions differ from the
	  download URLs.  For example, to limit distfile version
	  checks to the download page for the
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/databases/pgtune/pkg-descr">databases/pgtune</a> port,
	  add:</p><pre class="programlisting">PORTSCOUT=	site:http://pgfoundry.org/frs/?group_id=1000416</pre></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-depend"></a>5.8. Dependencies</h2></div></div></div><p>Many ports depend on other ports.  This is a very convenient
      feature of most Unix-like operating systems, including FreeBSD.
      Multiple ports can share a common dependency, rather than
      bundling that dependency with every port or package that needs
      it.  There are seven variables that can be used to ensure that
      all the required bits will be on the user's machine.  There are
      also some pre-supported dependency variables for common cases,
      plus a few more to control the behavior of dependencies.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-lib_depends"></a>5.8.1. <code class="varname">LIB_DEPENDS</code></h3></div></div></div><p>This variable specifies the shared libraries this port
	depends on.  It is a list of
	<em class="replaceable"><code>lib</code></em>:<em class="replaceable"><code>dir</code></em>
	tuples where <em class="replaceable"><code>lib</code></em> is the name of
	the shared library, <em class="replaceable"><code>dir</code></em> is the
	directory in which to find it in case it is not available.
	For example,</p><pre class="programlisting">LIB_DEPENDS=   libjpeg.so:${PORTSDIR}/graphics/jpeg</pre><p>will check for a shared jpeg library with any version, and
	descend into the <code class="filename">graphics/jpeg</code>
	subdirectory of the ports tree to build and install it if it
	is not found.</p><p>The dependency is checked twice, once from within the
	<code class="buildtarget">build</code> target and then from within
	the <code class="buildtarget">install</code> target.  Also, the name
	of the dependency is put into the package so that
	<code class="command">pkg install</code> (see <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg-install&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg-install</span>(8)</span></a>) will
	automatically install it if it is not on the user's
	system.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-run_depends"></a>5.8.2. <code class="varname">RUN_DEPENDS</code></h3></div></div></div><p>This variable specifies executables or files this port
	depends on during run-time.  It is a list of
	<em class="replaceable"><code>path</code></em>:<em class="replaceable"><code>dir</code></em>[<span class="optional">:<em class="replaceable"><code>target</code></em></span>]
	tuples where <em class="replaceable"><code>path</code></em> is the name of
	the executable or file, <em class="replaceable"><code>dir</code></em> is the
	directory in which to find it in case it is not available, and
	<em class="replaceable"><code>target</code></em> is the target to call in
	that directory.  If <em class="replaceable"><code>path</code></em> starts
	with a slash (<code class="literal">/</code>), it is treated as a file
	and its existence is tested with <code class="command">test -e</code>;
	otherwise, it is assumed to be an executable, and
	<code class="command">which -s</code> is used to determine if the
	program exists in the search path.</p><p>For example,</p><pre class="programlisting">RUN_DEPENDS=	${LOCALBASE}/news/bin/innd:${PORTSDIR}/news/inn \
		xmlcatmgr:${PORTSDIR}/textproc/xmlcatmgr</pre><p>will check if the file or directory
	<code class="filename">/usr/local/news/bin/innd</code> exists, and
	build and install it from the <code class="filename">news/inn</code>
	subdirectory of the ports tree if it is not found.  It will
	also see if an executable called <code class="command">xmlcatmgr</code>
	is in the search path, and descend into
	<code class="filename">textproc/xmlcatmgr</code>
	to build and install it if it is not found.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">In this case, <code class="command">innd</code> is actually an
	  executable; if an executable is in a place that is not
	  expected to be in the search path, use the full
	  pathname.</p></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">The official search <code class="envar">PATH</code> used on the
	  ports build cluster is</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin</pre></div><p>The dependency is checked from within the
	<code class="buildtarget">install</code> target.  Also, the name of
	the dependency is put into the package so that
	<code class="command">pkg install</code> (see <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg-install&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg-install</span>(8)</span></a>) will
	automatically install it if it is not on the user's system.
	The <em class="replaceable"><code>target</code></em> part can be omitted if
	it is the same as <code class="varname">DEPENDS_TARGET</code>.</p><p>A quite common situation is when
	<code class="varname">RUN_DEPENDS</code> is literally the same as
	<code class="varname">BUILD_DEPENDS</code>, especially if ported
	software is written in a scripted language or if it requires
	the same build and run-time environment.  In this case, it is
	both tempting and intuitive to directly assign one to the
	other:</p><pre class="programlisting">RUN_DEPENDS=	${BUILD_DEPENDS}</pre><p>However, such assignment can pollute run-time
	dependencies with entries not defined in the port's original
	<code class="varname">BUILD_DEPENDS</code>.  This happens because of
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>'s lazy evaluation of variable assignment.
	Consider a <code class="filename">Makefile</code> with
	<code class="varname">USE_<em class="replaceable"><code>*</code></em></code>,
	which are processed by <code class="filename">ports/Mk/bsd.*.mk</code>
	to augment initial build dependencies.  For example,
	<code class="literal">USES= gmake</code> adds
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/gmake/pkg-descr">devel/gmake</a> to
	<code class="varname">BUILD_DEPENDS</code>.  To prevent such additional
	dependencies from polluting <code class="varname">RUN_DEPENDS</code>,
	create another variable with the current content of
	<code class="varname">BUILD_DEPENDS</code> and assign it to both
	<code class="varname">BUILD_DEPENDS</code> and
	<code class="varname">RUN_DEPENDS</code>:</p><pre class="programlisting">MY_DEPENDS=	some:${PORTSDIR}/devel/some \
		other:${PORTSDIR}/lang/other
BUILD_DEPENDS=	${MY_DEPENDS}
RUN_DEPENDS=	${MY_DEPENDS}</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-build_depends"></a>5.8.3. <code class="varname">BUILD_DEPENDS</code></h3></div></div></div><p>This variable specifies executables or files this port
	requires to build.  Like <code class="varname">RUN_DEPENDS</code>, it
	is a list of
	<em class="replaceable"><code>path</code></em>:<em class="replaceable"><code>dir</code></em>[<span class="optional">:<em class="replaceable"><code>target</code></em></span>]
	tuples.  For example,</p><pre class="programlisting">BUILD_DEPENDS=	unzip:${PORTSDIR}/archivers/unzip</pre><p>will check for an executable called
	<code class="command">unzip</code>, and descend into the
	<code class="filename">archivers/unzip</code> subdirectory of the
	ports tree to build and install it if it is not found.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="quote">&#8220;<span class="quote">build</span>&#8221;</span> here means everything from
	  extraction to compilation.  The dependency is checked from
	  within the <code class="buildtarget">extract</code> target.  The
	  <em class="replaceable"><code>target</code></em> part can be omitted if it
	  is the same as <code class="varname">DEPENDS_TARGET</code></p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-fetch_depends"></a>5.8.4. <code class="varname">FETCH_DEPENDS</code></h3></div></div></div><p>This variable specifies executables or files this port
	requires to fetch.  Like the previous two, it is a list of
	<em class="replaceable"><code>path</code></em>:<em class="replaceable"><code>dir</code></em>[<span class="optional">:<em class="replaceable"><code>target</code></em></span>]
	tuples.  For example,</p><pre class="programlisting">FETCH_DEPENDS=	ncftp2:${PORTSDIR}/net/ncftp2</pre><p>will check for an executable called
	<code class="command">ncftp2</code>, and descend into the
	<code class="filename">net/ncftp2</code> subdirectory of the ports
	tree to build and install it if it is not found.</p><p>The dependency is checked from within the
	<code class="buildtarget">fetch</code> target.  The
	<em class="replaceable"><code>target</code></em> part can be omitted if it is
	the same as <code class="varname">DEPENDS_TARGET</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-extract_depends"></a>5.8.5. <code class="varname">EXTRACT_DEPENDS</code></h3></div></div></div><p>This variable specifies executables or files this port
	requires for extraction.  Like the previous, it is a list of
	<em class="replaceable"><code>path</code></em>:<em class="replaceable"><code>dir</code></em>[<span class="optional">:<em class="replaceable"><code>target</code></em></span>]
	tuples.  For example,</p><pre class="programlisting">EXTRACT_DEPENDS=	unzip:${PORTSDIR}/archivers/unzip</pre><p>will check for an executable called
	<code class="command">unzip</code>, and descend into the
	<code class="filename">archivers/unzip</code> subdirectory of the
	ports tree to build and install it if it is not found.</p><p>The dependency is checked from within the
	<code class="buildtarget">extract</code> target.  The
	<em class="replaceable"><code>target</code></em> part can be omitted if it
	is the same as <code class="varname">DEPENDS_TARGET</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Use this variable only if the extraction does not
	  already work (the default assumes <code class="command">tar</code>)
	  and cannot be made to work using
	  <code class="literal">USES=tar</code>, <code class="literal">USES=lha</code> or
	  <code class="literal">USES=zip</code> described in <a class="xref" href="#uses-values">Chapter 15, <em>Values of
    <code class="varname">USES</code></em></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-patch_depends"></a>5.8.6. <code class="varname">PATCH_DEPENDS</code></h3></div></div></div><p>This variable specifies executables or files this port
	requires to patch.  Like the previous, it is a list of
	<em class="replaceable"><code>path</code></em>:<em class="replaceable"><code>dir</code></em>[<span class="optional">:<em class="replaceable"><code>target</code></em></span>]
	tuples.  For example,</p><pre class="programlisting">PATCH_DEPENDS=	${NONEXISTENT}:${PORTSDIR}/java/jfc:extract</pre><p>will descend into the <code class="filename">java/jfc</code>
	subdirectory of the ports tree to extract it.</p><p>The dependency is checked from within the
	<code class="buildtarget">patch</code> target.  The
	<em class="replaceable"><code>target</code></em> part can be omitted if it
	is the same as <code class="varname">DEPENDS_TARGET</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-uses"></a>5.8.7. <code class="varname">USES</code></h3></div></div></div><p>Parameters can be added to define different features and
	dependencies used by the port.  They are specified by adding
	this line to the <code class="filename">Makefile</code>:</p><pre class="programlisting">USES= feature[:arguments]</pre><p>For the complete list of values, please see
	<a class="xref" href="#uses-values">Chapter 15, <em>Values of
    <code class="varname">USES</code></em></a>.</p><div xmlns="" class="warning"><h3 class="admontitle">Warning: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="varname">USES</code> cannot be assigned after
	  inclusion of <code class="filename">bsd.port.pre.mk</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-use-vars"></a>5.8.8. <code class="varname">USE_<em class="replaceable"><code>*</code></em></code></h3></div></div></div><p>Several variables exist to define common dependencies
	shared by many ports.  Their use is optional, but helps to
	reduce the verbosity of the port
	<code class="filename">Makefile</code>s.  Each of them is styled as
	<code class="varname">USE_<em class="replaceable"><code>*</code></em></code>.  These
	variables may be used only in the port
	<code class="filename">Makefile</code>s and
	<code class="filename">ports/Mk/bsd.*.mk</code>.  They are not meant
	for user-settable options &#8212; use
	<code class="varname">PORT_OPTIONS</code> for that purpose.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">It is <span class="emphasis"><em>always</em></span> incorrect to set any
	  <code class="varname">USE_<em class="replaceable"><code>*</code></em></code> in
	  <code class="filename">/etc/make.conf</code>.  For instance,
	  setting</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">USE_GCC=X.Y</pre><p xmlns="http://www.w3.org/1999/xhtml">(where X.Y is version number) would add a dependency
	  on gccXY for every port, including
	  <code class="literal">lang/gccXY</code> itself!</p></div><div class="table"><a id="makefile-use-vars-table"></a><div class="table-title">Table 5.6. <code class="varname">USE_<em class="replaceable"><code>*</code></em></code></div><div class="table-contents"><table summary="USE_*" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Means</th></tr></thead><tbody><tr><td><code class="varname">USE_GCC</code></td><td>The port requires GCC (<code class="command">gcc</code> or
		<code class="command">g++</code>) to build.  Some ports need any
		GCC version, some require modern, recent versions.  It
		is typically set to <code class="literal">any</code> (in this
		case, GCC from base would be used on versions of FreeBSD
		that still have it, or <code class="literal">lang/gcc</code>
		port would be installed when default C/C++ compiler is
		Clang); or <code class="literal">yes</code> (means always use
		stable, modern GCC from <code class="literal">lang/gcc</code>
		port).  The exact version can also be specified, with
		a value such as <code class="literal">4.7</code>.  The minimal
		required version can be specified as
		<code class="literal">4.6+</code>.  The GCC from the base system
		is used when it satisfies the requested version,
		otherwise an appropriate compiler is built from the
		port, and <code class="varname">CC</code> and
		<code class="varname">CXX</code> are adjusted
		accordingly.</td></tr></tbody></table></div></div><br class="table-break" /><p>Variables related to <span class="application">gmake</span> and
	<code class="filename">configure</code> are described in
	<a class="xref" href="#building" title="6.5. Building Mechanisms">Section 6.5, &#8220;Building Mechanisms&#8221;</a>, while
	<span class="application">autoconf</span>,
	<span class="application">automake</span> and
	<span class="application">libtool</span> are described in
	<a class="xref" href="#using-autotools" title="6.6. Using GNU Autotools">Section 6.6, &#8220;Using GNU Autotools&#8221;</a>.
	<span class="application">Perl</span> related variables are
	described in <a class="xref" href="#using-perl" title="6.8. Using Perl">Section 6.8, &#8220;Using <span class="application">Perl</span>&#8221;</a>.  X11 variables are
	listed in <a class="xref" href="#using-x11" title="6.9. Using X11">Section 6.9, &#8220;Using X11&#8221;</a>.
	<a class="xref" href="#using-gnome" title="6.10. Using GNOME">Section 6.10, &#8220;Using GNOME&#8221;</a> deals with GNOME and
	<a class="xref" href="#using-kde" title="6.12. Using KDE">Section 6.12, &#8220;Using KDE&#8221;</a> with KDE related variables.
	<a class="xref" href="#using-java" title="6.13. Using Java">Section 6.13, &#8220;Using Java&#8221;</a> documents Java variables, while
	<a class="xref" href="#using-php" title="6.14. Web Applications, Apache and PHP">Section 6.14, &#8220;Web Applications, Apache and PHP&#8221;</a> contains information on
	<span class="application">Apache</span>,
	<span class="application">PHP</span> and PEAR modules.
	<span class="application">Python</span> is discussed in
	<a class="xref" href="#using-python" title="6.15. Using Python">Section 6.15, &#8220;Using Python&#8221;</a>, while
	<span class="application">Ruby</span> in
	<a class="xref" href="#using-ruby" title="6.18. Using Ruby">Section 6.18, &#8220;Using Ruby&#8221;</a>.  <a class="xref" href="#using-sdl" title="6.19. Using SDL">Section 6.19, &#8220;Using SDL&#8221;</a>
	provides variables used for <span class="application">SDL</span>
	applications and finally, <a class="xref" href="#using-xfce" title="6.23. Using Xfce">Section 6.23, &#8220;Using Xfce&#8221;</a>
	contains information on
	<span class="application">Xfce</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-version-dependency"></a>5.8.9. Minimal Version of a Dependency</h3></div></div></div><p>A minimal version of a dependency can be specified in any
	<code class="varname"><em class="replaceable"><code>*</code></em>_DEPENDS</code>
	except <code class="varname">LIB_DEPENDS</code> using this
	syntax:</p><pre class="programlisting">p5-Spiffy&gt;=0.26:${PORTSDIR}/devel/p5-Spiffy</pre><p>The first field contains a dependent package name, which
	must match the entry in the package database, a comparison
	sign, and a package version.  The dependency is satisfied if
	p5-Spiffy-0.26 or newer is installed on the machine.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-note-on-dependencies"></a>5.8.10. Notes on Dependencies</h3></div></div></div><p>As mentioned above, the default target to call when a
	dependency is required is
	<code class="buildtarget">DEPENDS_TARGET</code>.  It defaults to
	<code class="literal">install</code>.  This is a user variable; it is
	never defined in a port's <code class="filename">Makefile</code>.  If
	the port needs a special way to handle a dependency, use the
	<code class="literal">:target</code> part of
	<code class="varname"><em class="replaceable"><code>*</code></em>_DEPENDS</code>
	instead of redefining
	<code class="varname">DEPENDS_TARGET</code>.</p><p>When running <code class="command">make clean</code>, the port
	dependencies are automatically cleaned too.  If this is not
	desirable, define
	<code class="varname">NOCLEANDEPENDS</code> in the environment.  This
	may be particularly desirable if the port has something that
	takes a long time to rebuild in its dependency list, such as
	KDE, GNOME or Mozilla.</p><p>To depend on another port unconditionally, use the
	variable <code class="literal">${NONEXISTENT}</code> as the first field
	of <code class="varname">BUILD_DEPENDS</code> or
	<code class="varname">RUN_DEPENDS</code>.  Use this only when
	the source of the other port is needed.  Compilation time can
	be saved by specifying the target too.  For
	instance</p><pre class="programlisting">BUILD_DEPENDS=	${NONEXISTENT}:${PORTSDIR}/graphics/jpeg:extract</pre><p>will always descend to the <code class="literal">jpeg</code> port
	and extract it.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-circular-dependencies"></a>5.8.11. Circular Dependencies Are Fatal</h3></div></div></div><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Do not introduce any circular dependencies into the
	  ports tree!</p></div><p>The ports building technology does not tolerate circular
	dependencies.  If one is introduced, someone, somewhere in the
	world, will have their FreeBSD installation broken
	almost immediately, with many others quickly to follow.  These
	can really be hard to detect.  If in doubt, before making
	that change, make sure to run:
	<code class="command">cd /usr/ports; make index</code>.  That process
	can be quite slow on older machines, but it may be able to
	save a large number of people, including yourself,
	a lot of grief in the process.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-automatic-dependencies"></a>5.8.12. Problems Caused by Automatic Dependencies</h3></div></div></div><p>Dependencies must be declared either explicitly or by
	using the
	<a class="link" href="#makefile-options" title="5.12. Makefile Options">OPTIONS framework</a>.
	Using other methods like automatic detection complicates
	indexing, which causes problems for port and package
	management.</p><div class="example"><a id="makefile-automatic-dependencies-bad"></a><div class="example-title">Example 5.12. Wrong Declaration of an Optional Dependency</div><div class="example-contents"><pre class="programlisting">.include &lt;bsd.port.pre.mk&gt;

.if exists(${LOCALBASE}/bin/foo)
LIB_DEPENDS=	libbar.so:${PORTSDIR}/foo/bar
.endif</pre></div></div><br class="example-break" /><p>The problem with trying to automatically add dependencies
	is that files and settings outside an individual port can
	change at any time.  For example: an index is built, then a
	batch of ports are installed.  But one of the ports installs
	the tested file.  The index is now incorrect, because an
	installed port unexpectedly has a new dependency.  The index
	may still be wrong even after rebuilding if other ports also
	determine their need for dependencies based on the existence
	of other files.</p><div class="example"><a id="makefile-automatic-dependencies-good"></a><div class="example-title">Example 5.13. Correct Declaration of an Optional Dependency</div><div class="example-contents"><pre class="programlisting">OPTIONS_DEFINE=	BAR
BAR_DESC=	Calling cellphones via bar

BAR_LIB_DEPENDS=	libbar.so:${PORTSDIR}/foo/bar</pre></div></div><br class="example-break" /><p>Testing option variables is the correct method.  It will
	not cause inconsistencies in the index of a batch of ports,
	provided the options were defined prior to the index build.
	Simple scripts can then be used to automate the building,
	installation, and updating of these ports and their
	packages.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="use-want"></a>5.8.13. <code class="varname">USE_<em class="replaceable"><code>*</code></em></code> and
	<code class="varname">WANT_<em class="replaceable"><code>*</code></em></code></h3></div></div></div><p><code class="varname">USE_<em class="replaceable"><code>*</code></em></code> are
	set by the port maintainer to define software on which this
	port depends.  A port that needs Firefox would set</p><pre class="programlisting">USE_FIREFOX=	yes</pre><p>Some <code class="varname">USE_<em class="replaceable"><code>*</code></em></code>
	can accept version numbers or other parameters.  For example,
	a port that requires Apache 2.2 would set</p><pre class="programlisting">USE_APACHE=	22</pre><p>For more control over dependencies in some cases,
	<code class="varname">WANT_<em class="replaceable"><code>*</code></em></code> are
	available to more precisely specify what is needed.  For
	example, consider the <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/squirrelmail/pkg-descr">mail/squirrelmail</a> port.  This
	port needs some PHP modules, which are listed in
	<code class="varname">USE_PHP</code>:</p><pre class="programlisting">USE_PHP=	session mhash gettext mbstring pcre openssl xml</pre><p>Those modules may be available in CLI or web versions, so
	the web version is selected with
	<code class="varname">WANT_<em class="replaceable"><code>*</code></em></code>:</p><pre class="programlisting">WANT_PHP_WEB=	yes</pre><p>Available
	<code class="varname">USE_<em class="replaceable"><code>*</code></em></code> and
	<code class="varname">WANT_<em class="replaceable"><code>*</code></em></code> are
	defined in the files in
	<code class="filename">/usr/ports/Mk</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-masterdir"></a>5.9. <code class="varname">MASTERDIR</code></h2></div></div></div><p>If the port needs to build slightly different versions of
      packages by having a variable (for instance, resolution, or
      paper size) take different values, create one subdirectory per
      package to make it easier for users to see what to do, but try
      to share as many files as possible between ports.  Typically, by
      using variables cleverly, only a very short
      <code class="filename">Makefile</code> is needed in all but one of the
      directories.  In the sole <code class="filename">Makefile</code>, use
      <code class="varname">MASTERDIR</code> to specify the directory where the
      rest of the files are.  Also, use a variable as part of <a class="link" href="#porting-pkgname" title="5.2.4. Package Naming Conventions"><code class="varname">PKGNAMESUFFIX</code></a>
      so the packages will have different names.</p><p>This will be best demonstrated by an example.  This is part
      of <code class="filename">japanese/xdvi300/Makefile</code>;</p><pre class="programlisting">PORTNAME=	xdvi
PORTVERSION=	17
PKGNAMEPREFIX=	ja-
PKGNAMESUFFIX=	${RESOLUTION}

# default
RESOLUTION?=	300
.if ${RESOLUTION} != 118 &amp;&amp; ${RESOLUTION} != 240 &amp;&amp; \
    ${RESOLUTION} != 300 &amp;&amp; ${RESOLUTION} != 400
pre-everything::
	@${ECHO_MSG} "Error: invalid value for RESOLUTION: \"${RESOLUTION}\""
	@${ECHO_MSG} "Possible values are: 118, 240, 300 (default) and 400."
	@${FALSE}
.endif</pre><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/japanese/xdvi300/pkg-descr">japanese/xdvi300</a> also has all
      the regular patches, package files, etc.  Running
      <code class="command">make</code> there, it will take the default value
      for the resolution (300) and build the port normally.</p><p>As for other resolutions, this is the
      <span class="emphasis"><em>entire</em></span>
      <code class="filename">xdvi118/Makefile</code>:</p><pre class="programlisting">RESOLUTION=	118
MASTERDIR=	${.CURDIR}/../xdvi300

.include "${MASTERDIR}/Makefile"</pre><p>(<code class="filename">xdvi240/Makefile</code> and
      <code class="filename">xdvi400/Makefile</code> are similar).
      <code class="varname">MASTERDIR</code> definition tells
      <code class="filename">bsd.port.mk</code> that the regular set of
      subdirectories like <code class="varname">FILESDIR</code> and
      <code class="varname">SCRIPTDIR</code> are to be found under
      <code class="filename">xdvi300</code>.  The
      <code class="literal">RESOLUTION=118</code> line will override the
      <code class="literal">RESOLUTION=300</code> line in
      <code class="filename">xdvi300/Makefile</code> and the port will be built
      with resolution set to 118.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-manpages"></a>5.10. Man Pages</h2></div></div></div><p>If the port anchors its man tree somewhere other than
      <code class="varname">PREFIX</code>, use
      <code class="varname">MANDIRS</code> to specify those directories.  Note
      that the files corresponding to manual pages must be placed in
      <code class="filename">pkg-plist</code> along with the rest of the files.
      The purpose of <code class="varname">MANDIRS</code> is to enable automatic
      compression of manual pages, therefore the file names are
      suffixed with <code class="filename">.gz</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-info"></a>5.11. Info Files</h2></div></div></div><p>If the package needs to install <acronym class="acronym">GNU</acronym> info
      files, list them in <code class="varname">INFO</code> (without the
      trailing <code class="literal">.info</code>), one entry per document.
      These files are assumed to be installed to
      <code class="filename">PREFIX/INFO_PATH</code>.  Change
      <code class="varname">INFO_PATH</code> if the package uses a different
      location.  However, this is not recommended.  These entries
      contain just the path relative to
      <code class="filename">PREFIX/INFO_PATH</code>.  For example,
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/gcc34/pkg-descr">lang/gcc34</a> installs info files to
      <code class="filename">PREFIX/INFO_PATH/gcc34</code>, and
      <code class="varname">INFO</code> will be something like this:</p><pre class="programlisting">INFO=	gcc34/cpp gcc34/cppinternals gcc34/g77 ...</pre><p>Appropriate installation/de-installation code will be
      automatically added to the temporary
      <code class="filename">pkg-plist</code> before package
      registration.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-options"></a>5.12. Makefile Options</h2></div></div></div><p>Many applications can be built with optional or differing
      configurations.  Examples include choice of natural (human)
      language, GUI versus command-line, or type of database to
      support.  Users may need a different configuration than the
      default, so the ports system provides hooks the port author can
      use to control which variant will be built.  Supporting these
      options properly will make users happy, and effectively provide
      two or more ports for the price of one.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-options-options"></a>5.12.1. <code class="varname">OPTIONS</code></h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-options-background"></a>5.12.1.1. Background</h4></div></div></div><p><code class="varname">OPTIONS_<em class="replaceable"><code>*</code></em></code>
	  give the user installing the port a dialog showing the
	  available options, and then saves those options to
	  <code class="filename">${PORT_DBDIR}/${OPTIONS_NAME}/options</code>.
	  The next time the port is built, the options are
	  reused.  <code class="varname">PORT_DBDIR</code> defaults to
	  <code class="filename">/var/db/ports</code>.
	  <code class="varname">OPTIONS_NAME</code> is to the port origin with
	  an underscore as the space separator, for example, for
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/dns/bind99/pkg-descr">dns/bind99</a> it will be
	  <code class="literal">dns_bind99</code>.</p><p>When the user runs <code class="command">make config</code> (or
	  runs <code class="command">make build</code> for the first time), the
	  framework checks for
	  <code class="filename">${PORT_DBDIR}/${OPTIONS_NAME}/options</code>.
	  If that file does not exist, the values of
	  <code class="varname">OPTIONS_<em class="replaceable"><code>*</code></em></code>
	  are used, and a dialog box is
	  displayed where the options can be enabled or disabled.
	  Then <code class="filename">options</code> is saved and the
	  configured variables are used when building the port.</p><p>If a new version of the port adds new
	  <code class="varname">OPTIONS</code>, the dialog will be presented to
	  the user with the saved values of old
	  <code class="varname">OPTIONS</code> prefilled.</p><p><code class="command">make showconfig</code> shows the saved
	  configuration.  Use <code class="command">make rmconfig</code>
	  to remove the saved configuration.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-options-syntax"></a>5.12.1.2. Syntax</h4></div></div></div><p><code class="varname">OPTIONS_DEFINE</code> contains a list of
	  <code class="varname">OPTIONS</code> to be used.  These are
	  independent of each other and are not grouped:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1 OPT2</pre><p>Once defined, <code class="varname">OPTIONS</code> are
	  described (optional, but strongly recommended):</p><pre class="programlisting">OPT1_DESC=	Describe OPT1
OPT2_DESC=	Describe OPT2
OPT3_DESC=	Describe OPT3
OPT4_DESC=	Describe OPT4
OPT5_DESC=	Describe OPT5
OPT6_DESC=	Describe OPT6</pre><p><code class="filename">ports/Mk/bsd.options.desc.mk</code>
	  has descriptions for many common <code class="varname">OPTIONS</code>.
	  While often useful, override them if the
	  description is insufficient for the port.</p><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">When describing options, view it from the
	    perspective of the user: <span class="quote">&#8220;<span class="quote">What functionality does it
	      change?</span>&#8221;</span>
	    and <span class="quote">&#8220;<span class="quote">Why would I want to enable this?</span>&#8221;</span>
	    Do not just repeat the name.  For example, describing the
	    <code class="literal">NLS</code> option as
	    <span class="quote">&#8220;<span class="quote">include NLS support</span>&#8221;</span> does not help the user,
	    who can already see the option name but may not know what
	    it means.  Describing it as <span class="quote">&#8220;<span class="quote">Native Language Support
	      via gettext utilities</span>&#8221;</span> is much more
	    helpful.</p></div><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Option names are always in all uppercase.  They
	    cannot use mixed case or lowercase.</p></div><p><code class="varname">OPTIONS</code> can be grouped as radio
	  choices, where only one choice from each group is
	  allowed:</p><pre class="programlisting">OPTIONS_SINGLE=		SG1
OPTIONS_SINGLE_SG1=	OPT3 OPT4</pre><div xmlns="" class="warning"><h3 class="admontitle">Warning: </h3><p xmlns="http://www.w3.org/1999/xhtml">There <span class="emphasis"><em>must</em></span> be one of each
	    <code class="literal">OPTIONS_SINGLE</code> group selected at all
	    times for the options to be valid.  One option of each
	    group <span class="emphasis"><em>must</em></span> be added to
	    <code class="varname">OPTIONS_DEFAULT</code>.</p></div><p><code class="varname">OPTIONS</code> can be grouped as radio
	  choices, where none or only one choice from each group
	  is allowed:</p><pre class="programlisting">OPTIONS_RADIO=		RG1
OPTIONS_RADIO_RG1=	OPT7 OPT8</pre><p><code class="varname">OPTIONS</code> can also be grouped as
	  <span class="quote">&#8220;<span class="quote">multiple-choice</span>&#8221;</span> lists, where
	  <span class="emphasis"><em>at least one</em></span> option must be
	  enabled:</p><pre class="programlisting">OPTIONS_MULTI=		MG1
OPTIONS_MULTI_MG1=	OPT5 OPT6</pre><p><code class="varname">OPTIONS</code> can also be grouped as
	  <span class="quote">&#8220;<span class="quote">multiple-choice</span>&#8221;</span> lists, where none or any
	  option can be enabled:</p><pre class="programlisting">OPTIONS_GROUP=		GG1
OPTIONS_GROUP_GG1=	OPT9 OPT10</pre><p><code class="varname">OPTIONS</code> are unset by default,
	  unless they are listed in
	  <code class="varname">OPTIONS_DEFAULT</code>:</p><pre class="programlisting">OPTIONS_DEFAULT=	OPT1 OPT3 OPT6</pre><p><code class="varname">OPTIONS</code> definitions must appear
	  before the inclusion of
	  <code class="filename">bsd.port.options.mk</code>.
	  <code class="varname">PORT_OPTIONS</code> values can only be tested
	  after the inclusion of
	  <code class="filename">bsd.port.options.mk</code>.  Inclusion of
	  <code class="filename">bsd.port.pre.mk</code> can be used instead,
	  too, and is still widely used in ports written before the
	  introduction of <code class="filename">bsd.port.options.mk</code>.
	  But be aware that some variables will not work as expected
	  after the inclusion of <code class="filename">bsd.port.pre.mk</code>,
	  typically some
	  <code class="varname">USE_<em class="replaceable"><code>*</code></em></code>
	  flags.</p><div class="example"><a id="ports-options-simple-use"></a><div class="example-title">Example 5.14. Simple Use of <code class="varname">OPTIONS</code></div><div class="example-contents"><pre class="programlisting">OPTIONS_DEFINE=	FOO BAR
FOO_DESC=	Option foo support
BAR_DESC=	Feature bar support

OPTIONS_DEFAULT=FOO

# Will add --with-foo / --without-foo
FOO_CONFIGURE_WITH=	foo
BAR_RUN_DEPENDS=	bar:${PORTSDIR}/bar/bar

.include &lt;bsd.port.mk&gt;</pre></div></div><br class="example-break" /><div class="example"><a id="ports-options-check-unset"></a><div class="example-title">Example 5.15. Check for Unset Port
	    <code class="varname">OPTIONS</code></div><div class="example-contents"><pre class="programlisting">.if ! ${PORT_OPTIONS:MEXAMPLES}
CONFIGURE_ARGS+=--without-examples
.endif</pre><p>The form shown above is discouraged.  The preferred
	    method is using a configure knob to really enable and
	    disable the feature to match the option:</p><pre class="programlisting"># Will add --with-examples / --without-examples
EXAMPLES_CONFIGURE_WITH=	examples</pre></div></div><br class="example-break" /><div class="example"><a id="ports-options-practical-use"></a><div class="example-title">Example 5.16. Practical Use of <code class="varname">OPTIONS</code></div><div class="example-contents"><pre class="programlisting">OPTIONS_DEFINE=		EXAMPLES

OPTIONS_SINGLE=		BACKEND
OPTIONS_SINGLE_BACKEND=	MYSQL PGSQL BDB

OPTIONS_MULTI=		AUTH
OPTIONS_MULTI_AUTH=	LDAP PAM SSL

EXAMPLES_DESC=		Install extra examples
MYSQL_DESC=		Use MySQL as backend
PGSQL_DESC=		Use PostgreSQL as backend
BDB_DESC=		Use Berkeley DB as backend
LDAP_DESC=		Build with LDAP authentication support
PAM_DESC=		Build with PAM support
SSL_DESC=		Build with OpenSSL support

OPTIONS_DEFAULT=	PGSQL LDAP SSL

# Will add USE_PGSQL=yes
PGSQL_USE=	pgsql=yes
# Will add --enable-postgres / --disable-postgres
PGSQL_CONFIGURE_ENABLE=	postgres

ICU_LIB_DEPENDS=	libicuuc.so:${PORTSDIR}/devel/icu

# Will add --with-examples / --without-examples
EXAMPLES_CONFIGURE_WITH=	examples

# Check other OPTIONS

.include &lt;bsd.port.mk&gt;</pre></div></div><br class="example-break" /></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-options-default"></a>5.12.1.3. Default Options</h4></div></div></div><p>These options are always on by default.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">DOCS</code> &#8212; build and install
	      documentation.</p></li><li class="listitem"><p><code class="literal">NLS</code> &#8212; Native Language
	      Support.</p></li><li class="listitem"><p><code class="literal">EXAMPLES</code> &#8212; build and
	      install examples.</p></li><li class="listitem"><p><code class="literal">IPV6</code> &#8212; IPv6 protocol
	      support.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">There is no need to add these to
	    <code class="varname">OPTIONS_DEFAULT</code>.  To have them active,
	    and show up in the options selection dialog, however, they
	    must be added to <code class="varname">OPTIONS_DEFINE</code>.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-options-auto-activation"></a>5.12.2. Feature Auto-Activation</h3></div></div></div><p>When using a GNU configure script, keep an eye on which
	optional features are activated by auto-detection.  Explicitly
	disable optional features that are not needed by
	adding <code class="literal">--without-xxx</code> or
	<code class="literal">--disable-xxx</code> in
	<code class="varname">CONFIGURE_ARGS</code>.</p><div class="example"><a id="makefile-options-auto-activation-bad"></a><div class="example-title">Example 5.17. Wrong Handling of an Option</div><div class="example-contents"><pre class="programlisting">.if ${PORT_OPTIONS:MFOO}
LIB_DEPENDS+=		libfoo.so:${PORTSDIR}/devel/foo
CONFIGURE_ARGS+=	--enable-foo
.endif</pre></div></div><br class="example-break" /><p>In the example above, imagine a library libfoo is
	installed on the system.  The user does not want this
	application to use libfoo, so he toggled the option off in the
	<code class="literal">make config</code> dialog.  But the application's
	configure script detects the library present in the system and
	includes its support in the resulting executable.  Now when
	the user decides to remove libfoo from the system, the ports
	system does not protest (no dependency on libfoo was recorded)
	but the application breaks.</p><div class="example"><a id="makefile-options-auto-activation-good"></a><div class="example-title">Example 5.18. Correct Handling of an Option</div><div class="example-contents"><pre class="programlisting">FOO_LIB_DEPENDS=		libfoo.so:${PORTSDIR}/devel/foo
# Will add --enable-foo / --disable-foo
FOO_CONFIGURE_ENABLE=	foo</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Under some circumstances, the shorthand conditional
	  syntax can cause problems with complex constructs.  The
	  errors are usually
	  <code class="literal">Malformed conditional</code>, an alternative
	  syntax can be used.</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">.if !empty(VARIABLE:MVALUE)</pre><p xmlns="http://www.w3.org/1999/xhtml">as an alternative to</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">.if ${VARIABLE:MVALUE}</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="options-helpers"></a>5.12.3. Options Helpers</h3></div></div></div><p>There are some macros to help simplify conditional values
	which differ based on the options set.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="options_sub"></a>5.12.3.1. <code class="varname">OPTIONS_SUB</code></h4></div></div></div><p>If <code class="varname">OPTIONS_SUB</code> is set to
	  <code class="literal">yes</code> then each of the options added to
	  <code class="varname">OPTIONS_DEFINE</code> will be added to
	  <code class="varname">PLIST_SUB</code> and
	  <code class="varname">SUB_LIST</code>, for example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPTIONS_SUB=	yes</pre><p> is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
PLIST_SUB+=	OPT1="" NO_OPT1="@comment "
SUB_LIST+=	OPT1="" NO_OPT1="@comment "
.else
PLIST_SUB+=	OPT1="@comment " NO_OPT1=""
SUB_LIST+=	OPT1="@comment " NO_OPT1=""
.endif</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">The value of <code class="varname">OPTIONS_SUB</code> is
	    ignored.  Setting it to any value will add
	    <code class="varname">PLIST_SUB</code> and
	    <code class="varname">SUB_LIST</code> entries for
	    <span class="emphasis"><em>all</em></span> options.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="options-use"></a>5.12.3.2. <code class="varname"><em class="replaceable"><code>OPT</code></em>_USE</code></h4></div></div></div><p>When option <em class="replaceable"><code>OPT</code></em> is selected,
	  for each
	  <code class="literal"><em class="replaceable"><code>key</code></em>=<em class="replaceable"><code>value</code></em></code>
	  pair in
	  <code class="varname"><em class="replaceable"><code>OPT</code></em>_USE</code>,
	  <em class="replaceable"><code>value</code></em> is appended to the
	  corresponding
	  <code class="varname">USE_<em class="replaceable"><code>KEY</code></em></code>.  If
	  <em class="replaceable"><code>value</code></em> has spaces in it, replace
	  them with commas and they will be changed back to spaces
	  during processing.  For example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_USE=	mysql=yes xorg=x11,xextproto,xext,xrandr</pre><p>is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
USE_MYSQL=	yes
USE_XORG=	x11 xextproto xext xrandr
.endif</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="options-use-off"></a>5.12.3.3. <code class="varname"><em class="replaceable"><code>OPT</code></em>_USE_OFF</code></h4></div></div></div><p>When option <em class="replaceable"><code>OPT</code></em> <span class="emphasis"><em>is
	    not</em></span> selected, for each
	  <code class="literal"><em class="replaceable"><code>key</code></em>=<em class="replaceable"><code>value</code></em></code>
	  pair in
	  <code class="varname"><em class="replaceable"><code>OPT</code></em>_USE_OFF</code>,
	  <em class="replaceable"><code>value</code></em> is appended to the
	  corresponding
	  <code class="varname">USE_<em class="replaceable"><code>KEY</code></em></code>.  If
	  <em class="replaceable"><code>value</code></em> has spaces in it, replace
	  them with commas and they will be changed back to spaces
	  during processing.  For example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_USE_OFF=	mysql=yes xorg=x11,xextproto,xext,xrandr</pre><p>is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ! ${PORT_OPTIONS:MOPT1}
USE_MYSQL=	yes
USE_XORG=	x11 xextproto xext xrandr
.endif</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="options-configure_enable"></a>5.12.3.4. <code class="varname"><em class="replaceable"><code>OPT</code></em>_CONFIGURE_ENABLE</code></h4></div></div></div><p>When option <em class="replaceable"><code>OPT</code></em> is selected,
	  for each <em class="replaceable"><code>entry</code></em> in
	  <code class="varname"><em class="replaceable"><code>OPT</code></em>_CONFIGURE_ENABLE</code>
	  then
	  <code class="literal">--enable-<em class="replaceable"><code>entry</code></em></code>
	  is appended to <code class="varname">CONFIGURE_ARGS</code>.  When
	  option <em class="replaceable"><code>OPT</code></em> is not selected,
	  <code class="literal">--disable-<em class="replaceable"><code>entry</code></em></code>
	  is appended to <code class="varname">CONFIGURE_ARGS</code>.  An
	  optional argument can be specified with an
	  <code class="literal">=</code> symbol.  This argument is only appended
	  to the
	  <code class="literal">--enable-<em class="replaceable"><code>entry</code></em></code>
	  configure option.  For example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1 OPT2
OPT1_CONFIGURE_ENABLE=	test1 test2
OPT2_CONFIGURE_ENABLE=	test2=exhaustive</pre><p>is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
CONFIGURE_ARGS+=	--enable-test1 --enable-test2
.else
CONFIGURE_ARGS+=	--disable-test1 --disable-test2
.endif

.if ${PORT_OPTIONS:MOPT2}
CONFIGURE_ARGS+=	--enable-test2=exhaustive
.else
CONFIGURE_ARGS+=	--disable-test2
.endif</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="options-configure_with"></a>5.12.3.5. <code class="varname"><em class="replaceable"><code>OPT</code></em>_CONFIGURE_WITH</code></h4></div></div></div><p>When option <em class="replaceable"><code>OPT</code></em> is selected,
	  for each <em class="replaceable"><code>entry</code></em> in
	  <code class="varname"><em class="replaceable"><code>OPT</code></em>_CONFIGURE_WITH</code>
	  then
	  <code class="literal">--with-<em class="replaceable"><code>entry</code></em></code>
	  is appended to <code class="varname">CONFIGURE_ARGS</code>.  When
	  option <em class="replaceable"><code>OPT</code></em> is not selected,
	  <code class="literal">--without-<em class="replaceable"><code>entry</code></em></code>
	  is appended to <code class="varname">CONFIGURE_ARGS</code>.  An
	  optional argument can be specified with an
	  <code class="literal">=</code> symbol.  This argument is only appended
	  to the
	  <code class="literal">--with-<em class="replaceable"><code>entry</code></em></code>
	  configure option.  For example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1 OPT2
OPT1_CONFIGURE_WITH=	test1
OPT2_CONFIGURE_WITH=	test2=exhaustive</pre><p>is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1 OPT2

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
CONFIGURE_ARGS+=	--with-test1
.else
CONFIGURE_ARGS+=	--without-test1
.endif

.if ${PORT_OPTIONS:MOPT2}
CONFIGURE_ARGS+=	--with-test2=exhaustive
.else
CONFIGURE_ARGS+=	--without-test2
.endif</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="options-configure_on"></a>5.12.3.6. <code class="varname"><em class="replaceable"><code>OPT</code></em>_CONFIGURE_ON</code></h4></div></div></div><p>When option <em class="replaceable"><code>OPT</code></em> is selected,
	  the value of
	  <code class="varname"><em class="replaceable"><code>OPT</code></em>_CONFIGURE_ON</code>,
	  if defined, is appended to
	  <code class="varname">CONFIGURE_ARGS</code>.  For example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_CONFIGURE_ON=	--add-test</pre><p>is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
CONFIGURE_ARGS+=	--add-test
.endif</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="options-configure_off"></a>5.12.3.7. <code class="varname"><em class="replaceable"><code>OPT</code></em>_CONFIGURE_OFF</code></h4></div></div></div><p>When option <em class="replaceable"><code>OPT</code></em> <span class="emphasis"><em>is
	    not</em></span> selected, the value of
	  <code class="varname"><em class="replaceable"><code>OPT</code></em>_CONFIGURE_ON</code>,
	  if defined, is appended to
	  <code class="varname">CONFIGURE_ARGS</code>.  For example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_CONFIGURE_OFF=	--no-test</pre><p>is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ! ${PORT_OPTIONS:MOPT1}
CONFIGURE_ARGS+=	--no-test
.endif</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="options-cmake_on"></a>5.12.3.8. <code class="varname"><em class="replaceable"><code>OPT</code></em>_CMAKE_ON</code></h4></div></div></div><p>When option <em class="replaceable"><code>OPT</code></em> is selected,
	  the value of
	  <code class="varname"><em class="replaceable"><code>OPT</code></em>_CMAKE_ON</code>,
	  if defined, is appended to <code class="varname">CMAKE_ARGS</code>.
	  For example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_CMAKE_ON=	-DTEST:BOOL=true</pre><p>is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
CMAKE_ARGS+=	-DTEST:BOOL=true
.endif</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="options-cmake_off"></a>5.12.3.9. <code class="varname"><em class="replaceable"><code>OPT</code></em>_CMAKE_OFF</code></h4></div></div></div><p>When option <em class="replaceable"><code>OPT</code></em> <span class="emphasis"><em>is
	    not</em></span> selected, the value of
	  <code class="varname"><em class="replaceable"><code>OPT</code></em>_CMAKE_OFF</code>,
	  if defined, is appended to <code class="varname">CMAKE_ARGS</code>.
	  For example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_CMAKE_OFF=	-DTEST:BOOL=false</pre><p>is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ! ${PORT_OPTIONS:MOPT1}
CMAKE_ARGS+=	-DTEST:BOOL=false
.endif</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="options-qmake_on"></a>5.12.3.10. <code class="varname"><em class="replaceable"><code>OPT</code></em>_QMAKE_ON</code></h4></div></div></div><p>When option <em class="replaceable"><code>OPT</code></em> is selected,
	  the value of
	  <code class="varname"><em class="replaceable"><code>OPT</code></em>_QMAKE_ON</code>,
	  if defined, is appended to
	  <code class="varname">QMAKE_ARGS</code>.  For example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_QMAKE_ON=	-DTEST:BOOL=true</pre><p>is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
QMAKE_ARGS+=	-DTEST:BOOL=true
.endif</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="options-qmake_off"></a>5.12.3.11. <code class="varname"><em class="replaceable"><code>OPT</code></em>_QMAKE_OFF</code></h4></div></div></div><p>When option <em class="replaceable"><code>OPT</code></em> <span class="emphasis"><em>is
	    not</em></span> selected, the value of
	  <code class="varname"><em class="replaceable"><code>OPT</code></em>_QMAKE_OFF</code>,
	  if defined, is appended to
	  <code class="varname">QMAKE_ARGS</code>.  For example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_QMAKE_OFF=	-DTEST:BOOL=false</pre><p>is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ! ${PORT_OPTIONS:MOPT1}
QMAKE_ARGS+=	-DTEST:BOOL=false
.endif</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="options-dependencies"></a>5.12.3.12. Dependencies</h4></div></div></div><p>For any of these dependency types:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">PKG_DEPENDS</code></p></li><li class="listitem"><p><code class="varname">EXTRACT_DEPENDS</code></p></li><li class="listitem"><p><code class="varname">PATCH_DEPENDS</code></p></li><li class="listitem"><p><code class="varname">FETCH_DEPENDS</code></p></li><li class="listitem"><p><code class="varname">BUILD_DEPENDS</code></p></li><li class="listitem"><p><code class="varname">LIB_DEPENDS</code></p></li><li class="listitem"><p><code class="varname">RUN_DEPENDS</code></p></li></ul></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66752720"></a>5.12.3.12.1. <code class="varname"><em class="replaceable"><code>OPT</code></em>_<em class="replaceable"><code>ABOVEVARIABLE</code></em></code></h5></div></div></div><p>When option <em class="replaceable"><code>OPT</code></em> is
	    selected, the value of
	    <code class="varname"><em class="replaceable"><code>OPT</code></em>_<em class="replaceable"><code>ABOVEVARIABLE</code></em></code>,
	    if defined, is appended to
	    <code class="literal"><em class="replaceable"><code>ABOVEVARIABLE</code></em></code>.
	    For example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_LIB_DEPENDS=	liba.so:${PORTSDIR}/devel/a</pre><p>is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
LIB_DEPENDS+=	liba.so:${PORTSDIR}/devel/a
.endif</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66761680"></a>5.12.3.12.2. <code class="varname"><em class="replaceable"><code>OPT</code></em>_<em class="replaceable"><code>ABOVEVARIABLE</code></em>_OFF</code></h5></div></div></div><p>When option <em class="replaceable"><code>OPT</code></em>
	    <span class="emphasis"><em>is not</em></span> selected, the value of
	    <code class="varname"><em class="replaceable"><code>OPT</code></em>_<em class="replaceable"><code>ABOVEVARIABLE</code></em>_OFF</code>,
	    if defined, is appended to
	    <code class="literal"><em class="replaceable"><code>ABOVEVARIABLE</code></em></code>.
	    For example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_LIB_DEPENDS_OFF= liba.so:${PORTSDIR}/devel/a</pre><p>is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE= OPT1

.include &lt;bsd.port.options.mk&gt;

. if ! ${PORT_OPTIONS:MOPT1}
LIB_DEPENDS+=	liba.so:${PORTSDIR}/devel/a
.endif</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="options-variables"></a>5.12.3.13. Generic Variables Replacement</h4></div></div></div><p>For any of these variables:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">ALL_TARGET</code></p></li><li class="listitem"><p><code class="varname">CATEGORIES</code></p></li><li class="listitem"><p><code class="varname">CFLAGS</code></p></li><li class="listitem"><p><code class="varname">CPPFLAGS</code></p></li><li class="listitem"><p><code class="varname">CXXFLAGS</code></p></li><li class="listitem"><p><code class="varname">CONFIGURE_ENV</code></p></li><li class="listitem"><p><code class="varname">CONFLICTS</code></p></li><li class="listitem"><p><code class="varname">CONFLICTS_BUILD</code></p></li><li class="listitem"><p><code class="varname">CONFLICTS_INSTALL</code></p></li><li class="listitem"><p><code class="varname">DISTFILES</code></p></li><li class="listitem"><p><code class="varname">EXTRA_PATCHES</code></p></li><li class="listitem"><p><code class="varname">INFO</code></p></li><li class="listitem"><p><code class="varname">INSTALL_TARGET</code></p></li><li class="listitem"><p><code class="varname">LDFLAGS</code></p></li><li class="listitem"><p><code class="varname">MAKE_ARGS</code></p></li><li class="listitem"><p><code class="varname">MAKE_ENV</code></p></li><li class="listitem"><p><code class="varname">PATCH_SITES</code></p></li><li class="listitem"><p><code class="varname">PATCHFILES</code></p></li><li class="listitem"><p><code class="varname">PLIST_FILES</code></p></li><li class="listitem"><p><code class="varname">PLIST_DIRS</code></p></li><li class="listitem"><p><code class="varname">PLIST_DIRSTRY</code></p></li><li class="listitem"><p><code class="varname">PLIST_SUB</code></p></li><li class="listitem"><p><code class="varname">USES</code></p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Some variables are not in this list, in particular
	    <code class="varname">PKGNAMEPREFIX</code> and
	    <code class="varname">PKGNAMESUFFIX</code>.  This is intentional.  A
	    port <span class="emphasis"><em>must not</em></span> change its name when
	    its option set changes.</p></div><div xmlns="" class="warning"><h3 class="admontitle">Warning: </h3><p xmlns="http://www.w3.org/1999/xhtml">Some of these variables, at least
	    <code class="varname">ALL_TARGET</code> and
	    <code class="varname">INSTALL_TARGET</code>, have their default
	    values set <span class="emphasis"><em>after</em></span> the options are
	    processed.</p><p xmlns="http://www.w3.org/1999/xhtml">With these lines in the
	    <code class="filename">Makefile</code>:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">ALL_TARGET=	all

DOCS_ALL_TARGET=	doc</pre><p xmlns="http://www.w3.org/1999/xhtml">If the <code class="literal">DOCS</code> option is enabled,
	    <code class="varname">ALL_TARGET</code> will have a final value of
	    <code class="literal">all doc</code>; if the option is disabled, it
	    would have a value of <code class="literal">all</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">With only the options helper line in the
	    <code class="filename">Makefile</code>:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">DOCS_ALL_TARGET=	doc</pre><p xmlns="http://www.w3.org/1999/xhtml">If the <code class="literal">DOCS</code> option is enabled,
	    <code class="varname">ALL_TARGET</code> will have a final value of
	    <code class="literal">doc</code>; if the option is disabled, it
	    would have a value of <code class="literal">all</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66808016"></a>5.12.3.13.1. <code class="varname"><em class="replaceable"><code>OPT</code></em>_<em class="replaceable"><code>ABOVEVARIABLE</code></em></code></h5></div></div></div><p>When option <em class="replaceable"><code>OPT</code></em> is
	    selected, the value of
	    <code class="varname"><em class="replaceable"><code>OPT</code></em>_<em class="replaceable"><code>ABOVEVARIABLE</code></em></code>,
	    if defined, is appended to
	    <code class="literal"><em class="replaceable"><code>ABOVEVARIABLE</code></em></code>.
	    For example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_USES=	gmake
OPT1_CFLAGS=	-DTEST</pre><p>is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
USES+=		gmake
CFLAGS+=	-DTEST
.endif</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66816976"></a>5.12.3.13.2. <code class="varname"><em class="replaceable"><code>OPT</code></em>_<em class="replaceable"><code>ABOVEVARIABLE</code></em>_OFF</code></h5></div></div></div><p>When option OPT is not selected, the value of
	    <code class="varname"><em class="replaceable"><code>OPT</code></em>_<em class="replaceable"><code>ABOVEVARIABLE</code></em>_OFF</code>,
	    if defined, is appended to
	    <code class="literal"><em class="replaceable"><code>ABOVEVARIABLE</code></em></code>.
	    For example:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_USES_OFF=	gmake</pre><p>is equivalent to:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ! ${PORT_OPTIONS:MOPT1}
USES+=	gmake
.endif</pre></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-wrkdir"></a>5.13. Specifying the Working Directory</h2></div></div></div><p>Each port is extracted into a working directory, which must
      be writable.  The ports system defaults to having
      <code class="varname">DISTFILES</code> unpack in to a directory called
      <code class="literal">${DISTNAME}</code>.  In other words, if the
      <code class="filename">Makefile</code> has:</p><pre class="programlisting">PORTNAME=	foo
PORTVERSION=	1.0</pre><p>then the port's distribution files contain a top-level
      directory, <code class="filename">foo-1.0</code>, and the rest of the
      files are located under that directory.</p><p>A number of variables can be overridden if that is
      not the case.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-wrksrc"></a>5.13.1. <code class="varname">WRKSRC</code></h3></div></div></div><p>The variable lists the name of the directory that is
	created when the application's distfiles are extracted.  If
	our previous example extracted into a directory called
	<code class="filename">foo</code> (and not
	<code class="filename">foo-1.0</code>) write:</p><pre class="programlisting">WRKSRC=	${WRKDIR}/foo</pre><p>or possibly</p><pre class="programlisting">WRKSRC=	${WRKDIR}/${PORTNAME}</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-wrksrc_subdir"></a>5.13.2. <code class="varname">WRKSRC_SUBDIR</code></h3></div></div></div><p>If the source files needed for the port are in a
	subdirectory of the extracted distribution file, set
	<code class="varname">WRKSRC_SUBDIR</code> to that directory.</p><pre class="programlisting">WRKSRC_SUBDIR=	src</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makefile-no_wrksubdir"></a>5.13.3. <code class="varname">NO_WRKSUBDIR</code></h3></div></div></div><p>If the port does not extract in to a subdirectory at all,
	then set <code class="varname">NO_WRKSUBDIR</code> to
	indicate that.</p><pre class="programlisting">NO_WRKSUBDIR=	yes</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Because <code class="varname">WRKDIR</code> is the only directory
	  that is supposed to be writable during the build, and is
	  used to store many files recording the status of the build,
	  it is always better to force extraction into a subdirectory
	  anyway.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="conflicts"></a>5.14. Conflict Handling</h2></div></div></div><p>There are three different variables to register a conflict
      between packages and ports: <code class="varname">CONFLICTS</code>,
      <code class="varname">CONFLICTS_INSTALL</code> and
      <code class="varname">CONFLICTS_BUILD</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">The conflict variables automatically set the variable
	<code class="varname">IGNORE</code>, which is more fully documented in
	<a class="xref" href="#dads-noinstall" title="12.13. Marking a Port Not Installable with BROKEN, FORBIDDEN, or IGNORE">Section 12.13, &#8220;Marking a Port Not Installable with
      <code class="varname">BROKEN</code>, <code class="varname">FORBIDDEN</code>, or
      <code class="varname">IGNORE</code>&#8221;</a>.</p></div><p>When removing one of several conflicting ports, it is
      advisable to retain <code class="varname">CONFLICTS</code> in
      those other ports for a few months to cater for users who only
      update once in a while.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="conflicts-conflicts_install"></a>5.14.1. <code class="varname">CONFLICTS_INSTALL</code></h3></div></div></div><p>If the package cannot coexist with other packages
	(because of file conflicts, runtime incompatibilities, etc.),
	list the other package names in
	<code class="varname">CONFLICTS_INSTALL</code>.  Use
	shell globs like <code class="literal">*</code> and <code class="literal">?</code>
	here.  Enumerate package names in there, not port names or
	origins.  Please make sure
	that <code class="varname">CONFLICTS_INSTALL</code> does not match this
	port's package itself.  Otherwise enforcing its installation
	with <code class="varname">FORCE_PKG_REGISTER</code> will no longer
	work.  <code class="varname">CONFLICTS_INSTALL</code> check is done
	after the build stage and prior to the install stage.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="conflicts-conflicts_build"></a>5.14.2. <code class="varname">CONFLICTS_BUILD</code></h3></div></div></div><p>If the port cannot be built when other specific ports are
	already installed, list the other port names in
	<code class="varname">CONFLICTS_BUILD</code>.  Use
	shell globs like <code class="literal">*</code> and <code class="literal">?</code>
	here.  Use package names, not port names or origins.
	<code class="varname">CONFLICTS_BUILD</code> check is done prior to the
	build stage.  Build conflicts are not recorded in the
	resulting package.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="conflicts-conflicts"></a>5.14.3. <code class="varname">CONFLICTS</code></h3></div></div></div><p>If the port cannot be built if a certain port is already
	installed and the resulting package cannot coexist with the
	other package, list the other package name in
	<code class="varname">CONFLICTS</code>.  use shell
	globs like <code class="literal">*</code> and <code class="literal">?</code> here.
	Enumerate package names in there, not port names or
	origins.  Please make sure that
	<code class="varname">CONFLICTS</code> does not match this
	port's package itself.  Otherwise enforcing its installation
	with <code class="varname">FORCE_PKG_REGISTER</code> will no longer
	work.  <code class="varname">CONFLICTS</code> check is done prior to the
	build stage and prior to the install stage.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install"></a>5.15. Installing Files</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-macros"></a>5.15.1. <code class="varname">INSTALL_<em class="replaceable"><code>*</code></em></code>
	Macros</h3></div></div></div><p>Use the macros provided in
	<code class="filename">bsd.port.mk</code> to ensure correct modes of
	files in the port's <code class="buildtarget">*-install</code>
	targets.  Set ownership directly in
	<code class="filename">pkg-plist</code> with the corresponding entries,
	such as
	<code class="literal">@(<em class="replaceable"><code>owner</code></em>,<em class="replaceable"><code>group</code></em>,)</code>,
	<code class="literal">@owner <em class="replaceable"><code>owner</code></em></code>,
	and <code class="literal">@group
	  <em class="replaceable"><code>group</code></em></code>.
	These operators work until overridden, or until the end
	of <code class="filename">pkg-plist</code>, so do not forget to reset
	them after they are no longer needed.  The default ownership
	is <code class="literal">root:wheel</code>.  See <a class="xref" href="#plist-keywords-base" title="7.6.10. Base Keywords">Section 7.6.10, &#8220;Base Keywords&#8221;</a> for more information.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">INSTALL_PROGRAM</code> is a command to
	    install binary executables.</p></li><li class="listitem"><p><code class="varname">INSTALL_SCRIPT</code> is a command to
	    install executable scripts.</p></li><li class="listitem"><p><code class="varname">INSTALL_LIB</code> is a command to install
	    shared libraries (but not static libraries).</p></li><li class="listitem"><p><code class="varname">INSTALL_KLD</code> is a command to
	    install kernel loadable modules.  Some architectures
	    do not like having the modules stripped, so
	    use this command instead of
	    <code class="varname">INSTALL_PROGRAM</code>.</p></li><li class="listitem"><p><code class="varname">INSTALL_DATA</code> is a command to
	    install sharable data, including static libraries.</p></li><li class="listitem"><p><code class="varname">INSTALL_MAN</code> is a command to
	    install manpages and other documentation (it does not
	    compress anything).</p></li></ul></div><p>These variables are set to the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=install&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">install</span>(1)</span></a> command
	with the appropriate flags for each situation.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Do not use <code class="varname">INSTALL_LIB</code> to install
	  static libraries, because stripping them renders them
	  useless.  Use <code class="varname">INSTALL_DATA</code>
	  instead.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-strip"></a>5.15.2. Stripping Binaries and Shared Libraries</h3></div></div></div><p>Installed binaries should be stripped.  Do not strip
	binaries manually unless absolutely required.  The
	<code class="varname">INSTALL_PROGRAM</code> macro installs and
	strips a binary at the same time.  The
	<code class="varname">INSTALL_LIB</code> macro does the same thing to
	shared libraries.</p><p>When a file must be stripped, but neither
	<code class="varname">INSTALL_PROGRAM</code> nor
	<code class="varname">INSTALL_LIB</code> macros are desirable,
	<code class="literal">${STRIP_CMD}</code> strips the program or
	shared library.  This is typically done within the
	<code class="buildtarget">post-install</code> target.  For
	example:</p><pre class="programlisting">post-install:
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/bin/xdl</pre><p>When multiple files need to be stripped:</p><pre class="programlisting">post-install:
.for l in geometry media body track world
	${STRIP_CMD} ${STAGEDIR}${PREFIX}/lib/lib${PORTNAME}-${l}.so.0
.endfor</pre><p>Use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=file&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">file</span>(1)</span></a> on a file to determine if it has been
	stripped.  Binaries are reported by <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=file&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">file</span>(1)</span></a> as
	<code class="literal">stripped</code>, or
	<code class="literal">not stripped</code>.  Additionally, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=strip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">strip</span>(1)</span></a>
	will detect programs that have already been stripped and exit
	cleanly.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-copytree"></a>5.15.3. Installing a Whole Tree of Files</h3></div></div></div><p>Sometimes, a large number of files must be installed while
	preserving their hierarchical organization.  For example,
	copying over a whole directory tree from
	<code class="varname">WRKSRC</code> to a target directory under
	<code class="varname">PREFIX</code>.  Note that
	<code class="varname">PREFIX</code>, <code class="varname">EXAMPLESDIR</code>,
	<code class="varname">DATADIR</code>, and other path variables must
	always be prepended with <code class="varname">STAGEDIR</code> to
	respect staging (see <a class="xref" href="#staging" title="6.1. Staging">Section 6.1, &#8220;Staging&#8221;</a>).</p><p>Two macros exist for this situation.  The advantage of
	using these macros instead of <code class="command">cp</code> is that
	they guarantee proper file ownership and permissions on target
	files.  The first macro, <code class="varname">COPYTREE_BIN</code>, will
	set all the installed files to be executable, thus being
	suitable for installing into <code class="filename">PREFIX/bin</code>.
	The second macro, <code class="varname">COPYTREE_SHARE</code>, does not
	set executable permissions on files, and is therefore suitable
	for installing files under <code class="filename">PREFIX/share</code>
	target.</p><pre class="programlisting">post-install:
	${MKDIR} ${STAGEDIR}${EXAMPLESDIR}
	(cd ${WRKSRC}/examples &amp;&amp; ${COPYTREE_SHARE} . ${STAGEDIR}${EXAMPLESDIR})</pre><p>This example will install the contents of the
	<code class="filename">examples</code> directory in the vendor distfile
	to the proper examples location of the port.</p><pre class="programlisting">post-install:
	${MKDIR} ${STAGEDIR}${DATADIR}/summer
	(cd ${WRKSRC}/temperatures &amp;&amp; ${COPYTREE_SHARE} "June July August" ${STAGEDIR}${DATADIR}/summer)</pre><p>And this example will install the data of summer months to
	the <code class="filename">summer</code> subdirectory of a
	<code class="filename">DATADIR</code>.</p><p>Additional <code class="command">find</code> arguments can be
	passed via the third argument to
	<code class="varname">COPYTREE_<em class="replaceable"><code>*</code></em></code>
	macros.  For example, to install
	all files from the first example except Makefiles, one can use
	these commands.</p><pre class="programlisting">post-install:
	${MKDIR} ${STAGEDIR}${EXAMPLESDIR}
	(cd ${WRKSRC}/examples &amp;&amp; \
	${COPYTREE_SHARE} . ${STAGEDIR}${EXAMPLESDIR} "! -name Makefile")</pre><p>These macros do not add the installed files to
	<code class="filename">pkg-plist</code>.  They must be added manually.
	For optional documentation (<code class="varname">PORTDOCS</code>, see
	<a class="xref" href="#install-documentation" title="5.15.4. Install Additional Documentation">Section 5.15.4, &#8220;Install Additional Documentation&#8221;</a>) and examples
	(<code class="varname">PORTEXAMPLES</code>), the
	<code class="literal">%%PORTDOCS%%</code> or
	<code class="literal">%%PORTEXAMPLES%%</code> prefixes must be prepended
	in <code class="filename">pkg-plist</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-documentation"></a>5.15.4. Install Additional Documentation</h3></div></div></div><p>If the software has some documentation other than the
	standard man and info pages that is useful for the
	user, install it under <code class="varname">DOCSDIR</code>
	This can be done, like the previous item, in the
	<code class="buildtarget">post-install</code> target.</p><p>Create a new directory for the port.  The directory name
	is <code class="varname">DOCSDIR</code>.  This usually equals
	<code class="varname">PORTNAME</code>.  However, if the user
	might want different versions of the port to be installed at
	the same time, the whole
	<code class="varname">PKGNAME</code> can be used.</p><p>Since only the files listed in
	<code class="filename">pkg-plist</code> are installed, it is safe to
	always install documentation to <code class="varname">STAGEDIR</code>
	(see <a class="xref" href="#staging" title="6.1. Staging">Section 6.1, &#8220;Staging&#8221;</a>).  Hence <code class="literal">.if</code>
	blocks are only needed when the installed files are large
	enough to cause significant I/O overhead.</p><pre class="programlisting">post-install:
	${MKDIR} ${STAGEDIR}${DOCSDIR}
	${INSTALL_MAN} ${WRKSRC}/docs/xvdocs.ps ${STAGEDIR}${DOCSDIR}</pre><p>Here are some handy variables and how they are expanded by
	default when used in the <code class="filename">Makefile</code>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">DATADIR</code> gets expanded to
	    <code class="filename">PREFIX/share/PORTNAME</code>.</p></li><li class="listitem"><p><code class="varname">DATADIR_REL</code> gets expanded to
	    <code class="filename">share/PORTNAME</code>.</p></li><li class="listitem"><p><code class="varname">DOCSDIR</code> gets expanded to
	    <code class="filename">PREFIX/share/doc/PORTNAME</code>.</p></li><li class="listitem"><p><code class="varname">DOCSDIR_REL</code> gets expanded to
	    <code class="filename">share/doc/PORTNAME</code>.</p></li><li class="listitem"><p><code class="varname">EXAMPLESDIR</code> gets expanded to
	    <code class="filename">PREFIX/share/examples/PORTNAME</code>.</p></li><li class="listitem"><p><code class="varname">EXAMPLESDIR_REL</code> gets expanded to
	    <code class="filename">share/examples/PORTNAME</code>.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">The <code class="literal">DOCS</code> option only controls
	  additional documentation installed in
	  <code class="varname">DOCSDIR</code>.  It does not apply to standard
	  man pages and info pages.  Things installed in
	  <code class="varname">DATADIR</code> and
	  <code class="varname">EXAMPLESDIR</code> are controlled by
	  <code class="literal">DATA</code> and <code class="literal">EXAMPLES</code>
	  options, respectively.</p></div><p>These variables are exported to
	<code class="varname">PLIST_SUB</code>.  Their values will appear there
	as pathnames relative to <code class="filename">PREFIX</code> if
	possible.  That is, <code class="filename">share/doc/PORTNAME</code>
	will be substituted for <code class="literal">%%DOCSDIR%%</code> in the
	packing list by default, and so on.  (See more on
	<code class="filename">pkg-plist</code> substitution
	<a class="link" href="#plist-sub" title="7.1. Changing pkg-plist Based on Make Variables">here</a>.)</p><p>All conditionally installed documentation files and
	directories are included in
	<code class="filename">pkg-plist</code> with the
	<code class="literal">%%PORTDOCS%%</code> prefix, for example:</p><pre class="programlisting">%%PORTDOCS%%%%DOCSDIR%%/AUTHORS
%%PORTDOCS%%%%DOCSDIR%%/CONTACT</pre><p>As an alternative to enumerating the documentation files
	in <code class="filename">pkg-plist</code>, a port can set the variable
	<code class="varname">PORTDOCS</code> to a list of file names and shell
	glob patterns to add to the final packing list.  The names
	will be relative to <code class="varname">DOCSDIR</code>.  Therefore, a
	port that utilizes <code class="varname">PORTDOCS</code>, and uses a
	non-default location for its documentation, must set
	<code class="varname">DOCSDIR</code> accordingly.  If a directory is
	listed in <code class="varname">PORTDOCS</code> or matched by a glob
	pattern from this variable, the entire subtree of contained
	files and directories will be registered in the final packing
	list.  If the <code class="literal">DOCS</code> option has been unset
	then files and directories listed in
	<code class="varname">PORTDOCS</code> would not be installed or added to
	port packing list.  Installing the documentation at
	<code class="varname">PORTDOCS</code> as shown above remains up to the
	port itself.  A typical example of utilizing
	<code class="varname">PORTDOCS</code> looks as follows:</p><pre class="programlisting">PORTDOCS=	README.* ChangeLog docs/*</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">The equivalents of <code class="varname">PORTDOCS</code> for files
	  installed under <code class="varname">DATADIR</code> and
	  <code class="varname">EXAMPLESDIR</code> are
	  <code class="varname">PORTDATA</code> and
	  <code class="varname">PORTEXAMPLES</code>, respectively.</p><p xmlns="http://www.w3.org/1999/xhtml">The contents of <code class="filename">pkg-message</code> are
	  displayed upon installation.  See
	  <a class="link" href="#porting-message" title="8.1. pkg-message">the section on using
	  <code class="filename">pkg-message</code></a> for details.
	  <code class="filename">pkg-message</code> does not need to be added
	  to <code class="filename">pkg-plist</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-subdirs"></a>5.15.5. Subdirectories Under <code class="varname">PREFIX</code></h3></div></div></div><p>Try to let the port put things in the right subdirectories
	of <code class="varname">PREFIX</code>.  Some ports lump everything and
	put it in the subdirectory with the port's name, which is
	incorrect.  Also, many ports put everything except binaries,
	header files and manual pages in a subdirectory of
	<code class="filename">lib</code>, which does not work well with the
	BSD paradigm.  Many of the files must be moved to one of these
	directories: <code class="filename">etc</code> (setup/configuration
	files), <code class="filename">libexec</code> (executables started
	internally), <code class="filename">sbin</code> (executables for
	superusers/managers), <code class="filename">info</code> (documentation
	for info browser) or <code class="filename">share</code> (architecture
	independent files).  See <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hier&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">hier</span>(7)</span></a> for details; the rules
	governing <code class="filename">/usr</code> pretty much apply to
	<code class="filename">/usr/local</code> too.  The exception are ports
	dealing with USENET <span class="quote">&#8220;<span class="quote">news</span>&#8221;</span>.  They may use
	<code class="filename">PREFIX/news</code> as a destination for their
	files.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="special"></a>Chapter 6. Special Considerations</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="sect1"><a href="#staging">6.1. Staging</a></span></dt><dt><span class="sect1"><a href="#bundled-libs">6.2. Bundled Libraries</a></span></dt><dt><span class="sect1"><a href="#porting-shlibs">6.3. Shared Libraries</a></span></dt><dt><span class="sect1"><a href="#porting-restrictions">6.4. Ports with Distribution Restrictions or Legal
      Concerns</a></span></dt><dt><span class="sect1"><a href="#building">6.5. Building Mechanisms</a></span></dt><dt><span class="sect1"><a href="#using-autotools">6.6. Using GNU Autotools</a></span></dt><dt><span class="sect1"><a href="#using-gettext">6.7. Using GNU <code class="literal">gettext</code></a></span></dt><dt><span class="sect1"><a href="#using-perl">6.8. Using <span class="application">Perl</span></a></span></dt><dt><span class="sect1"><a href="#using-x11">6.9. Using X11</a></span></dt><dt><span class="sect1"><a href="#using-gnome">6.10. Using GNOME</a></span></dt><dt><span class="sect1"><a href="#using-qt">6.11. Using Qt</a></span></dt><dt><span class="sect1"><a href="#using-kde">6.12. Using KDE</a></span></dt><dt><span class="sect1"><a href="#using-java">6.13. Using Java</a></span></dt><dt><span class="sect1"><a href="#using-php">6.14. Web Applications, Apache and PHP</a></span></dt><dt><span class="sect1"><a href="#using-python">6.15. Using Python</a></span></dt><dt><span class="sect1"><a href="#using-tcl">6.16. Using <span class="application">Tcl/Tk</span></a></span></dt><dt><span class="sect1"><a href="#using-emacs">6.17. Using Emacs</a></span></dt><dt><span class="sect1"><a href="#using-ruby">6.18. Using Ruby</a></span></dt><dt><span class="sect1"><a href="#using-sdl">6.19. Using SDL</a></span></dt><dt><span class="sect1"><a href="#using-wx">6.20. Using <span class="application">wxWidgets</span></a></span></dt><dt><span class="sect1"><a href="#using-lua">6.21. Using <span class="application">Lua</span></a></span></dt><dt><span class="sect1"><a href="#using-iconv">6.22. Using <code class="command">iconv</code></a></span></dt><dt><span class="sect1"><a href="#using-xfce">6.23. Using Xfce</a></span></dt><dt><span class="sect1"><a href="#using-mozilla">6.24. Using Mozilla</a></span></dt><dt><span class="sect1"><a href="#using-databases">6.25. Using Databases</a></span></dt><dt><span class="sect1"><a href="#rc-scripts">6.26. Starting and Stopping Services (<code class="literal">rc</code>
      Scripts)</a></span></dt><dt><span class="sect1"><a href="#users-and-groups">6.27. Adding Users and Groups</a></span></dt><dt><span class="sect1"><a href="#requiring-kernel-sources">6.28. Ports That Rely on Kernel Sources</a></span></dt></dl></div><p>This section explains the most common things to consider when
    creating a port.</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="staging"></a>6.1. Staging</h2></div></div></div><p><code class="filename">bsd.port.mk</code> expects ports to work
      with a <span class="quote">&#8220;<span class="quote">stage directory</span>&#8221;</span>.  This means that a port
      must not install files directly to the regular destination
      directories (that is, under <code class="varname">PREFIX</code>, for
      example) but instead into a separate directory from which the
      package is then built.  In many cases, this does not require
      root privileges, making it possible to build packages as an
      unprivileged user.  With staging, the port is built and
      installed into the stage directory,
      <code class="varname">STAGEDIR</code>.  A package is created from the
      stage directory and then installed on the system.  Automake
      tools refer to this concept as <code class="varname">DESTDIR</code>, but
      in FreeBSD, <code class="varname">DESTDIR</code> has a different meaning
      (see <a class="xref" href="#porting-prefix" title="9.4. PREFIX and DESTDIR">Section 9.4, &#8220;<code class="varname">PREFIX</code> and
      <code class="varname">DESTDIR</code>&#8221;</a>).</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">No port <span class="emphasis"><em>really</em></span> needs to be root.  It
	can mostly be avoided by using <a class="link" href="#uses-uidfix"><code class="literal">USES=uidfix</code></a>.
	If the port still runs commands like <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chown</span>(8)</span></a>,
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chgrp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chgrp</span>(1)</span></a>, or forces owner or group with <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=install&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">install</span>(1)</span></a>
	then use <a class="link" href="#uses-fakeroot"><code class="literal">USES=fakeroot</code></a>
	to fake those calls.  Sligh patching of the port's
	<code class="filename">Makefiles</code> will be needed.</p></div><p>Meta ports, or ports that do not install files themselves
      but only depend on other ports, must avoid needlessly
      extracting the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mtree&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mtree</span>(8)</span></a> to the stage directory.  This is
      the basic directory layout of the package, and these empty
      directories will be seen as orphans.  To prevent
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mtree&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mtree</span>(8)</span></a> extraction, add this line:</p><pre class="programlisting">NO_MTREE=	yes</pre><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">Metaports should use <a class="link" href="#uses-metaport"><code class="literal">USES=metaport</code></a>.
	It sets up defaults for ports that do not fetch, build, or
	install anything.</p></div><p>Staging is enabled by prepending
      <code class="varname">STAGEDIR</code> to paths used in the
      <code class="buildtarget">pre-install</code>,
      <code class="buildtarget">do-install</code>, and
      <code class="buildtarget">post-install</code> targets (see the
      examples through the book).  Typically, this includes
      <code class="varname">PREFIX</code>, <code class="varname">ETCDIR</code>,
      <code class="varname">DATADIR</code>, <code class="varname">EXAMPLESDIR</code>,
      <code class="varname">MANPREFIX</code>, <code class="varname">DOCSDIR</code>, and
      so on.  Directories should be created as part of the
      <code class="buildtarget">post-install</code> target.  Avoid using
      absolute paths whenever possible.</p><p>When creating a symlink, <code class="varname">STAGEDIR</code>
      is prepended to the target path only.  For
      example:</p><pre class="programlisting">${LN} -sf <em class="replaceable"><code>libfoo.so.42</code></em> ${STAGEDIR}${PREFIX}/lib/<em class="replaceable"><code>libfoo.so</code></em></pre><p>The source path
      <code class="filename">${PREFIX}/lib/<em class="replaceable"><code>libfoo.so.42</code></em></code> looks fine but
      could, in fact, be incorrect.  Absolute paths can point to a
      wrong location, like when a remote file system has been
      mounted with <acronym class="acronym">NFS</acronym> under a non-root mount
      point.  Relative paths are less fragile, and often much
      shorter.</p><p>Ports that install kernel modules must prepend
      <code class="varname">STAGEDIR</code> to
      their destination, by default
      <code class="filename">/boot/modules</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bundled-libs"></a>6.2. Bundled Libraries</h2></div></div></div><p>This section explains why bundled dependencies are
      considered bad and what to do about them.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bundled-libs-why-bad"></a>6.2.1. Why Bundled Libraries Are Bad</h3></div></div></div><p>Some software requires the porter to locate third-party
	libraries and add the required dependencies to the port.
	Other software bundles all necessary libraries into the
	distribution file.  The second approach seems easier at
	first, but there are some serious drawbacks:</p><p>This list is loosely based on the <a class="link" href="https://fedoraproject.org/wiki/Packaging:No_Bundled_Libraries" target="_top">Fedora</a>
	and <a class="link" href="http://wiki.gentoo.org/wiki/Why_not_bundle_dependencies" target="_top">Gentoo</a>
	wikis, both licensed under the <a class="link" href="http://creativecommons.org/licenses/by-sa/3.0/" target="_top">CC-BY-SA
	  3.0</a> license.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Security</span></dt><dd><p>If vulnerabilities are found in the upstream library
	      and fixed there, they might not be fixed in the library
	      bundled with the port.  One reason could be that the
	      author is not aware of the problem.  This means that the
	      porter must fix them, or upgrade to a non-vulnerable
	      version, and send a patch to the author.  This all takes
	      time, which results in software being vulnerable longer
	      than necessary.  This in turn makes it harder to
	      coordinate a fix without unnecessarily leaking
	      information about the vulnerability.</p></dd><dt><span class="term">Bugs</span></dt><dd><p>This problem is similar to the problem with security
	      in the last paragraph, but generally less severe.</p></dd><dt><span class="term">Forking</span></dt><dd><p>It is easier for the author to fork the upstream
	      library once it is bundled.  While convenient on first
	      sight, it means that the code diverges from upstream
	      making it harder to address security or other problems
	      with the software.  A reason for this is that patching
	      becomes harder.</p><p>Another problem of forking is that because code
	      diverges from upstream, bugs get solved over and over
	      again instead of just once at a central location.  This
	      defeats the idea of open source software in the first
	      place.</p></dd><dt><span class="term">Symbol collision</span></dt><dd><p>When a library is installed on the system, it might
	      collide with the bundled version.  This can cause
	      immediate errors at compile or link time.  It can also
	      cause errors when running the program which might be
	      harder to track down.  The latter problem could be
	      caused because the versions of the two libraries are
	      incompatible.</p></dd><dt><span class="term">Licensing</span></dt><dd><p>When bundling projects from different sources,
	      license issues can arise more easily, especially when
	      licenses are incompatible.</p></dd><dt><span class="term">Waste of resources</span></dt><dd><p>Bundled libraries waste resources on several levels.
	      It takes longer to build the actual application,
	      especially if these libraries are already present on the
	      system.  At run-time, they can take up unnecessary
	      memory when the system-wide library is already loaded by
	      one program and the bundled library is loaded by another
	      program.</p></dd><dt><span class="term">Waste of effort</span></dt><dd><p>When a library needs patches for FreeBSD, these patches
	      have to be duplicated again in the bundled library.
	      This wastes developer time because the patches might not
	      apply cleanly.  It can also be hard to notice that these
	      patches are required in the first place.</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bundled-libs-practices"></a>6.2.2. What to do About Bundled Libraries</h3></div></div></div><p>Whenever possible, use the unbundled version of the
	library by adding a <code class="varname">LIB_DEPENDS</code> to the
	port.  If such a port does not exist yet, consider creating
	it.</p><p>Only use bundled libraries if the upstream has a
	good track record on security and using unbundled versions
	leads to overly complex patches.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">In some very special cases, for example emulators, like
	  <span class="application">Wine</span>, a port has to bundle
	  libraries, because they are in a different architecture, or
	  they have been modified to fit the software's use.  In that
	  case, those libraries should not be exposed to other ports
	  for linking.  Add <code class="literal">BUNDLE_LIBS=yes</code> to the
	  port's <code class="filename">Makefile</code>.  This will tell
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg</span>(8)</span></a> to not compute provided libraries.  Always ask
	  the Ports Management Team <code class="email">&lt;<a xmlns="" class="email" href="mailto:portmgr@FreeBSD.org">portmgr@FreeBSD.org</a>&gt;</code> before adding this to a port.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-shlibs"></a>6.3. Shared Libraries</h2></div></div></div><p>If the port installs one or more shared libraries, define
      a <code class="varname">USE_LDCONFIG</code> make variable, which will
      instruct a <code class="filename">bsd.port.mk</code> to run
      <code class="literal">${LDCONFIG} -m</code> on the directory
      where the new library is installed (usually
      <code class="filename">PREFIX/lib</code>) during
      <code class="buildtarget">post-install</code> target to register it
      into the shared library cache.  This variable, when defined,
      will also facilitate addition of an appropriate
      <code class="literal">@exec /sbin/ldconfig -m</code> and
      <code class="literal">@unexec /sbin/ldconfig -R</code> pair into
      <code class="filename">pkg-plist</code>, so that a user who
      installed the package can start using the shared library
      immediately and de-installation will not cause the system to
      still believe the library is there.</p><pre class="programlisting">USE_LDCONFIG=	yes</pre><p>The default directory can be overridden by
      setting <code class="varname">USE_LDCONFIG</code> to a list of
      directories into which shared libraries are to be installed.
      For example, if the port installs shared libraries into
      <code class="filename">PREFIX/lib/foo</code> and
      <code class="filename">PREFIX/lib/bar</code>
      use this in
      <code class="filename">Makefile</code>:</p><pre class="programlisting">USE_LDCONFIG=	${PREFIX}/lib/foo ${PREFIX}/lib/bar</pre><p>Please double-check, often this is not necessary at all or
      can be avoided through <code class="literal">-rpath</code> or setting
      <code class="envar">LD_RUN_PATH</code> during linking (see
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/moscow_ml/pkg-descr">lang/moscow_ml</a> for an
      example), or through a shell-wrapper which sets
      <code class="varname">LD_LIBRARY_PATH</code> before invoking the binary,
      like <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/seamonkey/pkg-descr">www/seamonkey</a>
      does.</p><p>When installing 32-bit libraries on 64-bit system, use
      <code class="varname">USE_LDCONFIG32</code> instead.</p><p>If the software uses <a class="link" href="#using-autotools" title="6.6. Using GNU Autotools">autotools</a>, and specifically
      <code class="command">libtool</code>, add <a class="link" href="#uses-libtool"><code class="literal">USES=libtool</code></a>.</p><p>When the major library version number increments in the
      update to the new port version, all other ports that link to
      the affected library must have their
      <code class="varname">PORTREVISION</code> incremented, to force
      recompilation with the new library version.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-restrictions"></a>6.4. Ports with Distribution Restrictions or Legal
      Concerns</h2></div></div></div><p>Licenses vary, and some of them place restrictions on how
      the application can be packaged, whether it can be sold for
      profit, and so on.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">It is the responsibility of a porter to read the
	licensing terms of the software and make sure that the
	FreeBSD project will not be held accountable for violating
	them by redistributing the source or compiled binaries
	either via FTP/HTTP or CD-ROM.  If in doubt, please contact
	the <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">FreeBSD ports mailing list</a>.</p></div><p>In situations like this, the variables described in the
      next sections can be set.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-restrictions-no_package"></a>6.4.1. <code class="varname">NO_PACKAGE</code></h3></div></div></div><p>This variable indicates that we may not generate a
	binary package of the application.  For instance, the
	license may disallow binary redistribution, or it may
	prohibit distribution of packages created from patched
	sources.</p><p>However, the port's <code class="varname">DISTFILES</code> may be
	freely mirrored on FTP/HTTP.  They may also be distributed
	on a CD-ROM (or similar media) unless
	<code class="varname">NO_CDROM</code> is set as well.</p><p>If the
	binary package is not generally useful, and the application
	must always be compiled from the source code, use
	<code class="varname">NO_PACKAGE</code>.  For
	example, if the application has configuration information
	that is site specific hard coded into it at compile time,
	set <code class="varname">NO_PACKAGE</code>.</p><p>Set <code class="varname">NO_PACKAGE</code> to a string
	describing the reason why the package cannot be
	generated.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-restrictions-no_cdrom"></a>6.4.2. <code class="varname">NO_CDROM</code></h3></div></div></div><p>This variable alone indicates that, although we are
	allowed to generate binary packages, we may put neither
	those packages nor the port's <code class="varname">DISTFILES</code>
	onto a CD-ROM (or similar media) for resale.  However, the
	binary packages and the port's <code class="varname">DISTFILES</code>
	will still be available via FTP/HTTP.</p><p> If this variable is set along with
	<code class="varname">NO_PACKAGE</code>, then only the port's
	<code class="varname">DISTFILES</code> will be available, and only via
	FTP/HTTP.</p><p>Set <code class="varname">NO_CDROM</code> to a string
	describing the reason why the port cannot be redistributed
	on CD-ROM.  For instance, use this if the port's
	license is for <span class="quote">&#8220;<span class="quote">non-commercial</span>&#8221;</span> use
	only.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-restrictions-nofetchfiles"></a>6.4.3. <code class="varname">NOFETCHFILES</code></h3></div></div></div><p>Files defined in <code class="varname">NOFETCHFILES</code>
	are not fetchable from any of
	<code class="varname">MASTER_SITES</code>.  An example of such a file
	is when the file is supplied on CD-ROM by the vendor.</p><p>Tools which check for the availability of these files
	on <code class="varname">MASTER_SITES</code> have to ignore these
	files and not report about them.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-restrictions-restricted"></a>6.4.4. <code class="varname">RESTRICTED</code></h3></div></div></div><p>Set this variable alone if the application's license
	permits neither mirroring the application's
	<code class="varname">DISTFILES</code> nor distributing the binary
	package in any way.</p><p>Do not set <code class="varname">NO_CDROM</code> or
	<code class="varname">NO_PACKAGE</code> along with
	<code class="varname">RESTRICTED</code>, since the latter variable
	implies the former ones.</p><p>Set <code class="varname">RESTRICTED</code> to a string
	describing the reason why the port cannot be redistributed.
	Typically, this indicates that the port contains proprietary
	software and that the user will need to manually download
	the <code class="varname">DISTFILES</code>, possibly after registering
	for the software or agreeing to accept the terms of an
	<acronym class="acronym">EULA</acronym>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-restrictions-restricted_files"></a>6.4.5. <code class="varname">RESTRICTED_FILES</code></h3></div></div></div><p>When <code class="varname">RESTRICTED</code> or
	<code class="varname">NO_CDROM</code> is set, this variable defaults
	to <code class="literal">${DISTFILES} ${PATCHFILES}</code>, otherwise
	it is empty.  If only some of the distribution files are
	restricted, then set this variable to list them.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-restrictions-legal_text"></a>6.4.6. <code class="varname">LEGAL_TEXT</code></h3></div></div></div><p>If the port has legal concerns not addressed by the
	above variables, set <code class="varname">LEGAL_TEXT</code>
	to a string explaining the concern.  For
	example, if special permission was obtained for FreeBSD to
	redistribute the binary, this variable must indicate
	so.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-restrictions-legal"></a>6.4.7. <code class="filename">/usr/ports/LEGAL</code> and
	<code class="varname">LEGAL</code></h3></div></div></div><p>A port which sets any of the above variables must also
	be added to <code class="filename">/usr/ports/LEGAL</code>.  The
	first column is a glob which matches the restricted
	distfiles.  The second column is the port's origin.  The
	third column is the output of
	<code class="command">make -VLEGAL</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-restrictions-examples"></a>6.4.8. Examples</h3></div></div></div><p>The preferred way to state "the distfiles for this port
	must be fetched manually" is as follows:</p><pre class="programlisting">.if !exists(${DISTDIR}/${DISTNAME}${EXTRACT_SUFX})
IGNORE=	may not be redistributed because of licensing reasons. Please visit <em class="replaceable"><code>some-website</code></em> to accept their license and download ${DISTFILES} into ${DISTDIR}
.endif</pre><p>This both informs the user, and sets the proper metadata
	on the user's machine for use by automated programs.</p><p>Note that this stanza must be preceded by an inclusion
	of <code class="filename">bsd.port.pre.mk</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="building"></a>6.5. Building Mechanisms</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="parallel-builds"></a>6.5.1. Building Ports in Parallel</h3></div></div></div><p>The FreeBSD ports framework supports parallel building
	using multiple <code class="command">make</code> sub-processes, which
	allows <acronym class="acronym">SMP</acronym> systems to utilize all of
	their available <acronym class="acronym">CPU</acronym> power, allowing port
	builds to be faster and more effective.</p><p>This is achieved by passing <code class="varname">-jX</code> flag
	to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> running on vendor code.  This is the default
	build behavior of ports.  Unfortunately, not all ports
	handle parallel building well and it may be required to
	explicitly disable this feature by adding the
	<code class="literal">MAKE_JOBS_UNSAFE=yes</code> variable.  It is
	used when a port is known to be broken with
	<code class="varname">-jX</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-make"></a>6.5.2. <code class="command">make</code>, <code class="command">gmake</code>,
	<code class="command">fmake</code>, and <code class="command">imake</code></h3></div></div></div><p>Several differing <code class="literal">make</code>
	implementations exist.  Ported software often requires a
	particular implementation, like <acronym class="acronym">GNU</acronym>
	<code class="command">make</code>, known in FreeBSD as
	<code class="command">gmake</code>, or <code class="command">fmake</code>, the
	legacy FreeBSD <code class="command">make</code>.</p><p>If the port uses <span class="application">GNU make</span>,
	add <code class="literal">gmake</code> to <code class="literal">USES</code>.  If
	the legacy FreeBSD <code class="command">make</code> is needed, add
	<code class="literal">fmake</code> there.</p><p><code class="varname">MAKE_CMD</code> can be used to reference the
	specific command configured by the <code class="literal">USES</code>
	setting in the port's <code class="filename">Makefile</code>.  In
	rare cases when more than one <code class="literal">make</code>
	implementation is listed in <code class="literal">USES</code>, the
	variables <code class="varname">GMAKE</code> (for the
	<acronym class="acronym">GNU</acronym> version) or <code class="varname">FMAKE</code>
	(for the legacy FreeBSD version) are available.
	Only use <code class="varname">MAKE_CMD</code> within the
	application <code class="filename">Makefile</code>s in
	<code class="varname">WRKSRC</code> to call the
	<code class="command">make</code> implementation expected by the
	ported software.</p><p>If the port is an X application that uses
	<span class="application">imake</span> to create
	<code class="filename">Makefile</code>s from
	<code class="filename">Imakefile</code>s, set <code class="literal">USES=
	  imake</code>..  See the <a class="link" href="#uses-imake"><code class="literal">USES=imake</code></a>
	section of <a class="xref" href="#uses" title="Chapter 15. Values of USES">Chapter 15, <em>Values of
    <code class="varname">USES</code></em></a> for more details.</p><p>If the port's source <code class="filename">Makefile</code> has
	something other than <code class="buildtarget">all</code> as the
	main build target, set <code class="varname">ALL_TARGET</code>
	accordingly.  The same goes for
	<code class="buildtarget">install</code> and
	<code class="varname">INSTALL_TARGET</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-configure"></a>6.5.3. <code class="command">configure</code> Script</h3></div></div></div><p>If the port uses the <code class="command">configure</code>
	script to generate <code class="filename">Makefile</code> from
	<code class="filename">Makefile.in</code>, set
	<code class="literal">GNU_CONFIGURE=yes</code>.  To give
	extra arguments to the <code class="command">configure</code> script
	(the default argument is <code class="literal">--prefix=${PREFIX}
	  --infodir=${PREFIX}/${INFO_PATH}
	  --mandir=${MANPREFIX}/man
	  --build=${CONFIGURE_TARGET}</code>), set those
	extra arguments in <code class="varname">CONFIGURE_ARGS</code>.  Extra
	environment variables can be passed using
	<code class="varname">CONFIGURE_ENV</code>.</p><div class="table"><a id="using-configure-variables"></a><div class="table-title">Table 6.1. Variables for Ports That Use
	  <code class="command">configure</code></div><div class="table-contents"><table summary="Variables for Ports That Use&#10;&#9;  configure" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Means</th></tr></thead><tbody><tr><td><code class="varname">GNU_CONFIGURE</code></td><td>The port uses <code class="command">configure</code>
		script to prepare build.</td></tr><tr><td><code class="varname">HAS_CONFIGURE</code></td><td>Same as <code class="varname">GNU_CONFIGURE</code>,
		except default configure target is not added to
		<code class="varname">CONFIGURE_ARGS</code>.</td></tr><tr><td><code class="varname">CONFIGURE_ARGS</code></td><td>Additional arguments passed to
		<code class="command">configure</code> script.</td></tr><tr><td><code class="varname">CONFIGURE_ENV</code></td><td>Additional environment variables to be set
		for <code class="command">configure</code> script run.</td></tr><tr><td><code class="varname">CONFIGURE_TARGET</code></td><td>Override default configure target.  Default
		value is
		<code class="literal">${MACHINE_ARCH}-portbld-freebsd${OSREL}</code>.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-cmake"></a>6.5.4. Using <code class="command">cmake</code></h3></div></div></div><p>For ports that use <span class="application">CMake</span>,
	define <code class="literal">USES= cmake</code>, or
	<code class="literal">USES= cmake:outsource</code> to build in a
	separate directory (see below).</p><div class="table"><a id="using-cmake-variables"></a><div class="table-title">Table 6.2. Variables for Ports That Use
	  <code class="command">cmake</code></div><div class="table-contents"><table summary="Variables for Ports That Use&#10;&#9;  cmake" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Means</th></tr></thead><tbody><tr><td><code class="varname">CMAKE_ARGS</code></td><td>Port specific <span class="application">CMake</span>
		flags to be passed to the <code class="command">cmake</code>
		binary.</td></tr><tr><td><code class="varname">CMAKE_BUILD_TYPE</code></td><td>Type of build (<span class="application">CMake</span>
		predefined build profiles).  Default is
		<code class="literal">Release</code>, or
		<code class="literal">Debug</code> if
		<code class="varname">WITH_DEBUG</code> is set.</td></tr><tr><td><code class="varname">CMAKE_ENV</code></td><td>Environment variables to be set for the
		<code class="command">cmake</code> binary.  Default is
		<code class="literal">${CONFIGURE_ENV}</code>.</td></tr><tr><td><code class="varname">CMAKE_SOURCE_PATH</code></td><td>Path to the source directory.  Default is
		<code class="literal">${WRKSRC}</code>.</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="using-cmake-user-variables"></a><div class="table-title">Table 6.3. Variables the Users Can Define for
	  <code class="command">cmake</code> Builds</div><div class="table-contents"><table summary="Variables the Users Can Define for&#10;&#9;  cmake Builds" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Means</th></tr></thead><tbody><tr><td><code class="varname">CMAKE_VERBOSE</code></td><td>Enable verbose build output.  Default not set,
		unless <code class="varname">BATCH</code> or
		<code class="varname">PACKAGE_BUILDING</code> are set.</td></tr><tr><td><code class="varname">CMAKE_NOCOLOR</code></td><td>Disables colour build output.  Default not set,
		unless <code class="varname">BATCH</code> or
		<code class="varname">PACKAGE_BUILDING</code> are set.</td></tr></tbody></table></div></div><br class="table-break" /><p><span class="application">CMake</span> supports these
	build profiles: <code class="literal">Debug</code>,
	<code class="literal">Release</code>,
	<code class="literal">RelWithDebInfo</code> and
	<code class="literal">MinSizeRel</code>.  <code class="literal">Debug</code> and
	<code class="literal">Release</code> profiles respect system
	<code class="literal">*FLAGS</code>, <code class="literal">RelWithDebInfo</code>
	and <code class="literal">MinSizeRel</code> will set
	<code class="varname">CFLAGS</code> to <code class="literal">-O2 -g</code> and
	<code class="literal">-Os -DNDEBUG</code> correspondingly.  The
	lower-cased value of <code class="varname">CMAKE_BUILD_TYPE</code> is
	exported to <code class="varname">PLIST_SUB</code> and must be
	used if the port installs <code class="filename"><em class="replaceable"><code>*</code></em>.cmake</code>
	depending on the build type (see
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/deskutils/strigi/pkg-descr">deskutils/strigi</a> for an
	example).  Please note that some projects may define their
	own build profiles and/or force particular build type by
	setting <code class="literal">CMAKE_BUILD_TYPE</code> in
	<code class="filename">CMakeLists.txt</code>.  To
	make a port for such a project respect
	<code class="varname">CFLAGS</code> and <code class="varname">WITH_DEBUG</code>,
	the <code class="literal">CMAKE_BUILD_TYPE</code> definitions must be
	removed from those files.</p><p>Most <span class="application">CMake</span>-based projects
	support an out-of-source method of building.  The
	out-of-source build for a port can be requested by using the
	<code class="literal">:outsource</code> suffix.  When enabled,
	<code class="varname">CONFIGURE_WRKSRC</code>,
	<code class="varname">BUILD_WRKSRC</code> and
	<code class="varname">INSTALL_WRKSRC</code> will be set to
	<code class="literal">${WRKDIR}/.build</code> and this
	directory will be used to keep all files generated during
	configuration and build stages, leaving the source directory
	intact.</p><div class="example"><a id="using-cmake-example"></a><div class="example-title">Example 6.1. <code class="literal">USES= cmake</code> Example</div><div class="example-contents"><p>This snippet demonstrates the use of
	  <span class="application">CMake</span> for a port.
	  <code class="varname">CMAKE_SOURCE_PATH</code> is not usually
	  required, but can be set when the sources are not located
	  in the top directory, or if only a subset of the project
	  is intended to be built by the port.</p><pre class="programlisting">USES=			cmake:outsource
CMAKE_SOURCE_PATH=	${WRKSRC}/subproject</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-scons"></a>6.5.5. Using <code class="command">scons</code></h3></div></div></div><p>If the port uses <span class="application">SCons</span>,
	define <code class="literal">USE_SCONS=yes</code>.</p><div class="table"><a id="using-scons-variables"></a><div class="table-title">Table 6.4. Variables for Ports That Use
	  <code class="command">scons</code></div><div class="table-contents"><table summary="Variables for Ports That Use&#10;&#9;  scons" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Means</th></tr></thead><tbody><tr><td><code class="varname">SCONS_ARGS</code></td><td>Port specific SCons flags passed to the SCons
		environment.</td></tr><tr><td><code class="varname">SCONS_BUILDENV</code></td><td>Variables to be set in system
		environment.</td></tr><tr><td><code class="varname">SCONS_ENV</code></td><td>Variables to be set in SCons
		environment.</td></tr><tr><td><code class="varname">SCONS_TARGET</code></td><td>Last argument passed to SCons, similar to
		<code class="varname">MAKE_TARGET</code>.</td></tr></tbody></table></div></div><br class="table-break" /><p>To make third party <code class="filename">SConstruct</code>
	respect everything that is passed to SCons in
	<code class="varname">SCONS_ENV</code> (that is, most importantly,
	<code class="varname">CC/CXX/CFLAGS/CXXFLAGS</code>), patch
	<code class="filename">SConstruct</code> so build
	<code class="literal">Environment</code> is constructed like
	this:</p><pre class="programlisting">env = Environment(**ARGUMENTS)</pre><p>It may be then modified with
	<code class="literal">env.Append</code> and
	<code class="literal">env.Replace</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-autotools"></a>6.6. Using GNU Autotools</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-autotools-introduction"></a>6.6.1. Introduction</h3></div></div></div><p>The various GNU autotools provide an abstraction
	mechanism for building a piece of software over a wide
	variety of operating systems and machine architectures.
	Within the Ports Collection, an individual port can make use
	of these tools via a simple construct:</p><pre class="programlisting">USE_AUTOTOOLS=	<em class="replaceable"><code>tool</code></em>[:env] ...</pre><p>At the time of writing, <em class="replaceable"><code>tool</code></em>
	can be one of <code class="literal">autoconf</code>,
	<code class="literal">autoheader</code>, <code class="literal">automake</code>,
	<code class="literal">aclocal</code>, <code class="literal">libtoolize</code>.
	It can also be one the older
	legacy of <code class="literal">autoconf213</code>,
	<code class="literal">autoheader213</code>,
	<code class="literal">automake14</code>,
	<code class="literal">aclocal14</code>.</p><p><em class="replaceable"><code>env</code></em> is used to specify that the
	environmental variables are needed.  It also adds a build
	dependency on the tool.  The relevant tool is
	<span class="emphasis"><em>not</em></span> ran as part of the
	<code class="buildtarget">run-autotools</code> target.</p><p>Multiple tools can be specified at once, either by
	including them all on a single line, or using the
	<code class="literal">+=</code> Makefile construct.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-libtool"></a>6.6.2. <code class="command">libtool</code> and <code class="command">libtoolize</code></h3></div></div></div><p>Ports shipping with their own copy of libtool (search for
	a file named ltmain.sh) need to have
	<code class="literal">USES=libtool</code>.  If a port has
	<code class="literal">USE_AUTOTOOLS=libtoolize</code> it probably also
	needs <code class="literal">USES=libtool</code>.  See the <a class="link" href="#uses-libtool">USES=libtool</a> section in <a class="xref" href="#uses" title="Chapter 15. Values of USES">Chapter 15, <em>Values of
    <code class="varname">USES</code></em></a> for more details.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-libltdl"></a>6.6.3. <code class="filename">libltdl.so</code></h3></div></div></div><p>Some ports make use of the <code class="filename">libltdl.so</code>
	library package, which is part of the
	<code class="command">libtool</code> suite.  Use of this library does
	not automatically necessitate the use of
	<code class="command">libtool</code> itself.  If the port needs
	<code class="filename">libltdl.so</code>, add a dependency on
	it:</p><pre class="programlisting">LIB_DEPENDS=	libltdl.so:${PORTSDIR}/devel/libltdl</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-autoconf"></a>6.6.4. <code class="command">autoconf</code> and
	<code class="command">autoheader</code></h3></div></div></div><p>Some ports do not contain a configure script, but do
	contain an autoconf template in
	<code class="filename">configure.ac</code>.  Use these
	assignments to let <code class="command">autoconf</code>
	create the configure script, and also have
	<code class="command">autoheader</code> create template headers for
	use by the configure script.</p><pre class="programlisting">USE_AUTOTOOLS=	autoconf[:env]</pre><p>and</p><pre class="programlisting">USE_AUTOTOOLS=	autoheader</pre><p>which also implies the use of
	<code class="literal">autoconf</code>.</p><p>The additional optional variables
	<code class="varname">AUTOCONF_ARGS</code> and
	<code class="varname">AUTOHEADER_ARGS</code> can be overridden by the
	port <code class="filename">Makefile</code> if specifically
	requested.  Most ports are unlikely to need this.  See
	<code class="filename">bsd.autotools.mk</code> for further
	details.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-automake"></a>6.6.5. <code class="command">automake</code> and
	<code class="command">aclocal</code></h3></div></div></div><p>Some packages only contain
	<code class="filename">Makefile.am</code>.  These have to be
	converted into <code class="filename">Makefile.in</code> using
	<code class="command">automake</code>, and the further processed by
	<code class="command">configure</code> to generate an actual
	<code class="filename">Makefile</code>.</p><p>Similarly, packages occasionally do not ship with
	an included <code class="filename">aclocal.m4</code>, again
	required to build the software.  This can be achieved with
	<code class="command">aclocal</code>, which scans
	<code class="filename">configure.ac</code> or
	<code class="filename">configure.in</code>.</p><p><code class="command">aclocal</code> has a similar relationship to
	<code class="command">automake</code> as <code class="command">autoheader</code>
	does to <code class="command">autoconf</code>, described in the
	previous section.  <code class="command">aclocal</code> implies the
	use of <code class="command">automake</code>, thus we have:</p><pre class="programlisting">USE_AUTOTOOLS=	automake[:<em class="replaceable"><code>env</code></em>]</pre><p>and</p><pre class="programlisting">USE_AUTOTOOLS=	aclocal</pre><p>As with <code class="command">autoconf</code> and
	<code class="command">autoheader</code>, both
	<code class="command">automake</code> and <code class="command">aclocal</code>
	have optional argument variables,
	<code class="varname">AUTOMAKE_ARGS</code> and
	<code class="varname">ACLOCAL_ARGS</code> respectively, which may be
	overridden by the port <code class="filename">Makefile</code> if
	required.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-gettext"></a>6.7. Using GNU <code class="literal">gettext</code></h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-gettext-basic"></a>6.7.1. Basic Usage</h3></div></div></div><p>If the port requires <code class="literal">gettext</code>, set
	<code class="literal">USES= gettext</code>, and the port will inherit
	a dependency on <code class="filename">libintl.so</code> from
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/gettext/pkg-descr">devel/gettext</a>.  Other
	values for <code class="literal">gettext</code> usage are listed in
	<a class="link" href="#uses-gettext"><code class="literal">USES=gettext</code></a>.</p><p>A rather common case is a port using
	<code class="literal">gettext</code> and <code class="command">configure</code>.
	Generally, GNU <code class="command">configure</code> should be able
	to locate <code class="literal">gettext</code> automatically.</p><pre class="programlisting">USES=	gettext
GNU_CONFIGURE=	yes</pre><p>If it ever fails to, hints at the location of
	<code class="literal">gettext</code> can be passed in
	<code class="envar">CPPFLAGS</code> and <code class="envar">LDFLAGS</code> as
	follows:</p><pre class="programlisting">USES=	gettext
CPPFLAGS+=	-I${LOCALBASE}/include
LDFLAGS+=	-L${LOCALBASE}/lib

GNU_CONFIGURE=	yes</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-gettext-optional"></a>6.7.2. Optional Usage</h3></div></div></div><p>Some software products allow for disabling <acronym class="acronym">NLS</acronym>.  For example,
	through passing <code class="option">--disable-nls</code> to
	<code class="command">configure</code>.  In that case, the port
	must use <code class="literal">gettext</code> conditionally,
	depending on the status of the <code class="literal">NLS</code>
	option.  For ports of low to medium complexity, use
	this idiom:</p><pre class="programlisting">GNU_CONFIGURE=		yes

OPTIONS_DEFINE=		NLS
OPTIONS_SUB=		yes

NLS_USES=		gettext
NLS_CONFIGURE_ENABLE=	nls

.include &lt;bsd.port.mk&gt;</pre><p>Or using the older way of using options:</p><pre class="programlisting">GNU_CONFIGURE=		yes

OPTIONS_DEFINE=		NLS

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MNLS}
USES+=			gettext
PLIST_SUB+=		NLS=""
.else
CONFIGURE_ARGS+=	--disable-nls
PLIST_SUB+=		NLS="@comment "
.endif

.include &lt;bsd.port.mk&gt;</pre><p>The next item on the to-do list is to arrange so that
	the message catalog files are included in the packing list
	conditionally.  The <code class="filename">Makefile</code> part of
	this task is already provided by the idiom.  It is explained
	in the section on <a class="link" href="#plist-sub" title="7.1. Changing pkg-plist Based on Make Variables">advanced
	  <code class="filename">pkg-plist</code> practices</a>.  In a
	nutshell, each occurrence of <code class="literal">%%NLS%%</code> in
	<code class="filename">pkg-plist</code> will be replaced by
	<span class="quote">&#8220;<span class="quote"><code class="literal">@comment </code></span>&#8221;</span> if NLS is
	disabled, or by a null string if NLS is enabled.
	Consequently, the lines prefixed by
	<code class="literal">%%NLS%%</code> will become mere comments in the
	final packing list if NLS is off; otherwise the prefix will
	be just left out.  Then insert
	<code class="literal">%%NLS%%</code> before each path to a message
	catalog file in <code class="filename">pkg-plist</code>.  For
	example:</p><pre class="programlisting">%%NLS%%share/locale/fr/LC_MESSAGES/foobar.mo
%%NLS%%share/locale/no/LC_MESSAGES/foobar.mo</pre><p>In high complexity cases, more advanced techniques
	may be needed, such as
	<a class="link" href="#plist-dynamic" title="7.4. Dynamic Versus Static Package List">dynamic packing list
	  generation</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-gettext-catalog-directories"></a>6.7.3. Handling Message Catalog Directories</h3></div></div></div><p>There is a point to note about installing message
	catalog files.  The target directories for them, which
	reside under
	<code class="filename">LOCALBASE/share/locale</code>,
	must not be created and removed by a port.  The most
	popular languages have their respective directories listed
	in
	<code class="filename">PORTSDIR/Templates/BSD.local.dist</code>.
	The directories for many other languages are governed by the
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/gettext/pkg-descr">devel/gettext</a> port.
	Consult its <code class="filename">pkg-plist</code> and see whether
	the port is going to install a message catalog file for a
	unique language.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-perl"></a>6.8. Using <span class="application">Perl</span></h2></div></div></div><p>If <code class="varname">MASTER_SITES</code> is set to
      <code class="literal">CPAN</code>, the correct subdirectory is usually
      selected automatically.  If the default subdirectory is wrong,
      <code class="literal">CPAN/Module</code> can be used to change it.
      <code class="varname">MASTER_SITES</code> can also be set to the old
      <code class="varname">MASTER_SITE_PERL_CPAN</code>, then the preferred
      value of <code class="varname">MASTER_SITE_SUBDIR</code> is the
      top-level hierarchy name.  For example, the recommended value
      for <code class="literal">p5-Module-Name</code> is
      <code class="literal">Module</code>.  The top-level hierarchy can be
      examined at <a class="link" href="http://cpan.org/modules/by-module/" target="_top">cpan.org</a>.
      This keeps the port working when the author of the module
      changes.</p><p>The exception to this rule is when the relevant directory
      does not exist or the distfile does not exist in that
      directory.  In such case, using author's id as
      <code class="varname">MASTER_SITE_SUBDIR</code> is allowed.
      The <code class="literal">CPAN:AUTHOR</code> macro can be used, which will
      be translated to the hashed author directory.  For example,
      <code class="literal">CPAN:AUTHOR</code> will be converted to
      <code class="literal">authors/id/A/AU/AUTHOR</code>.</p><p>When a port needs <span class="application">Perl</span> support,
      it must set <code class="literal">USES=perl5</code> with the optional
      <code class="varname">USE_PERL5</code> described in <a class="link" href="#uses-perl5">the perl5 USES description</a>.</p><div class="table"><a id="using-perl-variables"></a><div class="table-title">Table 6.5. Read-Only Variables for Ports That Use
	<span class="application">Perl</span></div><div class="table-contents"><table summary="Read-Only Variables for Ports That Use&#10;&#9;Perl" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Read only variables</th><th>Means</th></tr></thead><tbody><tr><td><code class="varname">PERL</code></td><td>The full path of the Perl 5 interpreter,
	      either in the system or installed from a port, but
	      without the version number.  Use this when the software
	      needs the path to the <span class="application">Perl</span>
	      interpreter.  To replace
	      <span class="quote">&#8220;<span class="quote"><code class="literal">#!</code></span>&#8221;</span>lines in scripts,
	      use <a class="link" href="#uses-shebangfix">USES=shebangfix</a>.</td></tr><tr><td><code class="varname">PERL_VERSION</code></td><td>The full version of Perl
	      installed (for example, <code class="literal">5.8.9</code>).</td></tr><tr><td><code class="varname">PERL_LEVEL</code></td><td>The installed Perl version as
	      an integer of the form <code class="literal">MNNNPP</code>
	      (for example, <code class="literal">500809</code>).</td></tr><tr><td><code class="varname">PERL_ARCH</code></td><td>Where Perl stores architecture
	      dependent libraries.  Defaults to
	      <code class="literal">${ARCH}-freebsd</code>.</td></tr><tr><td><code class="varname">PERL_PORT</code></td><td>Name of the Perl port that is
	      installed (for example, <code class="literal">perl5</code>).</td></tr><tr><td><code class="varname">SITE_PERL</code></td><td>Directory name where site specific
	      Perl packages go.  This value is
	      added to <code class="varname">PLIST_SUB</code>.</td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ports of Perl modules which do not have an official
	website must link to <code class="systemitem">cpan.org</code> in
	the WWW line of <code class="filename">pkg-descr</code>.  The
	preferred URL form is
	<code class="literal">http://search.cpan.org/dist/Module-Name/</code>
	(including the trailing slash).</p></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Do not use <code class="literal">${SITE_PERL}</code> in dependency
	declarations.  Doing so assumes that
	<code class="filename">perl5.mk</code> has been included, which is
	not always true.  Ports depending on this port will have
	incorrect dependencies if this port's files move later in an
	upgrade.  The right way to declare Perl module dependencies
	is shown in the example below.</p></div><div class="example"><a id="use-perl-dependency-example"></a><div class="example-title">Example 6.2. Perl Dependency Example</div><div class="example-contents"><pre class="programlisting">p5-IO-Tee&gt;=0.64:${PORTSDIR}/devel/p5-IO-Tee</pre></div></div><br class="example-break" /><p>For Perl ports that install manual pages, the macro
      <code class="varname">PERL5_MAN3</code> can be used
      inside <code class="filename">pkg-plist</code>.  For example,</p><pre class="programlisting">lib/perl5/5.14/man/man3/AnyEvent::I3.3.gz</pre><p>can be replaced with</p><pre class="programlisting">%%PERL5_MAN3%%/AnyEvent::I3.3.gz</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">There are no <code class="varname">PERL5_MANx</code> macros for the
	other sections (<em class="replaceable"><code>x</code></em> in
	<code class="literal">1</code>, <code class="literal">2</code> and
	<code class="literal">4</code> to <code class="literal">9</code>) because those
	get installed in the regular directories.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-x11"></a>6.9. Using X11</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-variables"></a>6.9.1. X.Org Components</h3></div></div></div><p>The X11 implementation available in The Ports Collection
	is X.Org.  If the application depends on X components, set
	<code class="varname">USE_XORG</code> to the list of required
	components.  Available components, at the time of writing,
	are:</p><p><code class="literal">bigreqsproto compositeproto damageproto dmx
	  dmxproto dri2proto dri3proto evieproto fixesproto
	  fontcacheproto fontenc fontsproto fontutil glproto ice
	  inputproto kbproto libfs oldx pciaccess pixman presentproto
	  printproto randrproto recordproto renderproto resourceproto
	  scrnsaverproto sm trapproto videoproto x11 xau xaw xaw6 xaw7
	  xbitmaps xcb xcmiscproto xcomposite xcursor xdamage xdmcp
	  xevie xext xextproto xf86bigfontproto xf86dgaproto
	  xf86driproto xf86miscproto xf86rushproto xf86vidmodeproto
	  xfixes xfont xfontcache xft xi xinerama xineramaproto
	  xkbfile xkbui xmu xmuu xorg-macros xorg-server xp xpm
	  xprintapputil xprintutil xproto xproxymngproto xrandr
	  xrender xres xscrnsaver xshmfence xt xtrans xtrap xtst xv
	  xvmc xxf86dga xxf86misc xxf86vm</code>.</p><p>Always up-to-date list can be found in
	<code class="filename">/usr/ports/Mk/bsd.xorg.mk</code>.</p><p>The Mesa Project is an effort to provide free OpenGL
	implementation.  To specify a dependency on various
	components of this project, use <code class="varname">USE_GL</code>.
	Valid options are:
	<code class="literal">egl, gl, glesv2, glew, glu, glut, glw</code> and
	<code class="literal">linux</code>.  For backwards compatibility, the
	value of <code class="literal">yes</code> maps to
	<code class="literal">glu</code>.</p><div class="example"><a id="use-xorg-example"></a><div class="example-title">Example 6.3. <code class="varname">USE_XORG</code> Example</div><div class="example-contents"><pre class="programlisting">USE_XORG=	xrender xft xkbfile xt xaw
USE_GL=		glu</pre></div></div><br class="example-break" /><div class="table"><a id="using-xorg-variables"></a><div class="table-title">Table 6.6. Variables for Ports That Use X</div><div class="table-contents"><table summary="Variables for Ports That Use X" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">USES= imake</code></td><td>The port uses <code class="command">imake</code>.</td></tr><tr><td><code class="varname">XMKMF</code></td><td>Set to the path of <code class="command">xmkmf</code> if
		not in the <code class="envar">PATH</code>.  Defaults to
		<code class="literal">xmkmf -a</code>.</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="using-x11-vars"></a><div class="example-title">Example 6.4. Using X11-Related Variables</div><div class="example-contents"><pre class="programlisting"># Use some X11 libraries
USE_XORG=	x11 xpm</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-motif"></a>6.9.2. Ports That Require Motif</h3></div></div></div><p>If the port requires a Motif library, define
	<code class="varname">USES= motif</code> in the
	<code class="filename">Makefile</code>.  Default Motif implementation
	is
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/open-motif/pkg-descr">x11-toolkits/open-motif</a>.
	Users can choose
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/lesstif/pkg-descr">x11-toolkits/lesstif</a>
	instead by setting <code class="varname">WANT_LESSTIF</code>
	in their <code class="filename">make.conf</code>.</p><p><code class="varname">MOTIFLIB</code> will be set by
	<code class="filename">motif.mk</code> to reference the
	appropriate Motif library.  Please patch the source of the
	port to use <code class="literal">${MOTIFLIB}</code> wherever
	the Motif library is referenced in the original
	<code class="filename">Makefile</code> or
	<code class="filename">Imakefile</code>.</p><p>There are two common cases:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>If the port refers to the Motif library as
	    <code class="literal">-lXm</code> in its
	    <code class="filename">Makefile</code> or
	    <code class="filename">Imakefile</code>, substitute
	    <code class="literal">${MOTIFLIB}</code> for it.</p></li><li class="listitem"><p>If the port uses <code class="literal">XmClientLibs</code> in
	    its <code class="filename">Imakefile</code>, change it to
	    <code class="literal">${MOTIFLIB} ${XTOOLLIB}
	      ${XLIB}</code>.</p></li></ul></div><p>Note that <code class="varname">MOTIFLIB</code> (usually) expands
	to <code class="literal">-L/usr/local/lib -lXm -lXp</code> or
	<code class="literal">/usr/local/lib/libXm.a</code>, so there is no
	need to add <code class="literal">-L</code> or <code class="literal">-l</code>
	in front.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-fonts"></a>6.9.3. X11 Fonts</h3></div></div></div><p>If the port installs fonts for the X Window System, put
	them in
	<code class="filename">LOCALBASE/lib/X11/fonts/local</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-fake-display"></a>6.9.4. Getting a Fake <code class="envar">DISPLAY</code> with Xvfb</h3></div></div></div><p>Some applications require a working X11 display for
	compilation to succeed.  This pose a problem for machines
	that operate headless.  When this variable is used,
	the build infrastructure will start the virtual framebuffer
	X server.  The working <code class="envar">DISPLAY</code> is then passed
	to the build.  See <a class="link" href="#uses-display"><code class="literal">USES=display</code></a>
	for the possible arguments.</p><pre class="programlisting">USES=	display</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="desktop-entries"></a>6.9.5. Desktop Entries</h3></div></div></div><p>Desktop entries (<a class="link" href="http://standards.freedesktop.org/desktop-entry-spec/latest/" target="_top">a
	  Freedesktop standard</a>) provide a way to
	automatically adjust desktop features when a new program is
	installed, without requiring user intervention.  For
	example, newly-installed programs automatically appear in
	the application menus of compatible desktop environments.
	Desktop entries originated in the
	<span class="application">GNOME</span> desktop environment, but
	are now a standard and also work with
	<span class="application">KDE</span> and
	<span class="application">Xfce</span>.  This bit of automation
	provides a real benefit to the user, and desktop entries are
	encouraged for applications which can be used in a desktop
	environment.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="desktop-entries-predefined"></a>6.9.5.1. Using Predefined <code class="filename">.desktop</code>
	  Files</h4></div></div></div><p>Ports that include predefined
	  <code class="filename"><em class="replaceable"><code>*</code></em>.desktop</code> must
	  include those files in <code class="filename">pkg-plist</code>
	  and install them in the
	  <code class="filename">$LOCALBASE/share/applications</code>
	  directory.  The <a class="link" href="#install-macros" title="5.15.1. INSTALL_* Macros"><code class="varname">INSTALL_DATA</code>
	    macro</a> is useful for installing these
	  files.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-desktop-database"></a>6.9.5.2. Updating Desktop Database</h4></div></div></div><p>If a port has a MimeType entry in its
	  <code class="filename"><em class="replaceable"><code>portname</code></em>.desktop</code>,
	  the desktop database must be updated after install and
	  deinstall.  To do this, define <code class="varname">USES</code>=
	  desktop-file-utils.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="desktop-entries-macro"></a>6.9.5.3. Creating Desktop Entries with
	  <code class="varname">DESKTOP_ENTRIES</code></h4></div></div></div><p>Desktop entries can be easily created for applications
	  by using <code class="varname">DESKTOP_ENTRIES</code>.  A
	  file named
	  <code class="filename"><em class="replaceable"><code>name</code></em>.desktop</code>
	  will be created, installed, and added to
	  <code class="filename">pkg-plist</code> automatically.  Syntax
	  is:</p><pre class="programlisting">DESKTOP_ENTRIES=	"NAME" "COMMENT" "ICON" "COMMAND" "CATEGORY" StartupNotify</pre><p>The list of possible categories is available on the
	  <a class="link" href="http://standards.freedesktop.org/menu-spec/latest/apa.html" target="_top">Freedesktop
	    website</a>.  <code class="varname">StartupNotify</code>
	  indicates whether the application is compatible with
	  <span class="emphasis"><em>startup notifications</em></span>.  These are
	  typically a graphic indicator like a clock that appear at
	  the mouse pointer, menu, or panel to give the user an
	  indication when a program is starting.  A program that is
	  compatible with startup notifications clears the indicator
	  after it has started.  Programs that are not compatible
	  with startup notifications would never clear the indicator
	  (potentially confusing and infuriating the user), and
	  must have <code class="varname">StartupNotify</code> set to
	  <code class="literal">false</code> so the indicator is not shown at
	  all.</p><p>Example:</p><pre class="programlisting">DESKTOP_ENTRIES=	"ToME" "Roguelike game based on JRR Tolkien's work" \
			"${DATADIR}/xtra/graf/tome-128.png" \
			"tome -v -g" "Application;Game;RolePlaying;" \
			false</pre></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-gnome"></a>6.10. Using GNOME</h2></div></div></div><p>The FreeBSD/GNOME project uses its own set of variables to
      define which GNOME components a particular port uses.  A <a class="link" href="http://www.FreeBSD.org/gnome/docs/porting.html" target="_top">comprehensive
	list of these variables</a> exists within the
      FreeBSD/GNOME project's homepage.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-qt"></a>6.11. Using Qt</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="qt-common"></a>6.11.1. Ports That Require Qt</h3></div></div></div><p>The Ports Collection provides support for Qt 4 and Qt 5
	frameworks with
	<code class="varname">USE_QT<em class="replaceable"><code>x</code></em></code>,
	where <em class="replaceable"><code>x</code></em> is
	<code class="literal">4</code> or <code class="literal">5</code>.
	Set <code class="varname">USE_QT<em class="replaceable"><code>x</code></em></code>
	to the list of required Qt components (libraries,
	tools, plugins).  The Qt 4 and Qt 5 frameworks are quite
	similar.  The main difference is the set of supported
	components.</p><p>The Qt framework exports a number of variables which can
	be used by ports, some of them listed below:</p><div class="table"><a id="using-qt-variables"></a><div class="table-title">Table 6.7. Variables Provided to Ports That Use Qt</div><div class="table-contents"><table summary="Variables Provided to Ports That Use Qt" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">QT_PREFIX</code></td><td>Set to the path where Qt was installed
		(<code class="literal">${LOCALBASE}</code>).</td></tr><tr><td><code class="varname">QMAKE</code></td><td>Full path to <code class="command">qmake</code>
		binary.</td></tr><tr><td><code class="varname">LRELEASE</code></td><td>Full path to <code class="command">lrelease</code>
		utility.</td></tr><tr><td><code class="varname">MOC</code></td><td>Full path to <code class="command">moc</code>.</td></tr><tr><td><code class="varname">RCC</code></td><td>Full path to <code class="command">rcc</code>.</td></tr><tr><td><code class="varname">UIC</code></td><td>Full path to <code class="command">uic</code>.</td></tr><tr><td><code class="varname">QT_INCDIR</code></td><td>Qt include directory.</td></tr><tr><td><code class="varname">QT_LIBDIR</code></td><td>Qt libraries path.</td></tr><tr><td><code class="varname">QT_PLUGINDIR</code></td><td>Qt plugins path.</td></tr></tbody></table></div></div><br class="table-break" /><p>When using the Qt framework, these
	settings are deployed:</p><pre class="programlisting">CONFIGURE_ARGS+=	--with-qt-includes=${QT_INCDIR} \
			--with-qt-libraries=${QT_LIBDIR} \
			--with-extra-libs=${LOCALBASE}/lib \
			--with-extra-includes=${LOCALBASE}/include

CONFIGURE_ENV+=	QTDIR="${QT_PREFIX}" QMAKE="${QMAKE}" \
		MOC="${MOC}" RCC="${RCC}" UIC="${UIC}" \
		QMAKESPEC="${QMAKESPEC}"

PLIST_SUB+=	QT_INCDIR=${QT_INCDIR_REL} \
		QT_LIBDIR=${QT_LIBDIR_REL} \
		QT_PLUGINDIR=${QT_PLUGINDIR_REL}</pre><p>Some configure scripts do not support the arguments above.
	To suppress modification of<code class="varname">CONFIGURE_ENV</code>
	and <code class="varname">CONFIGURE_ARGS</code>, set
	<code class="varname">QT_NONSTANDARD</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="qt-components"></a>6.11.2. Component Selection</h3></div></div></div><p>Individual Qt tool and library dependencies must be
	specified in
	<code class="varname">USE_QT<em class="replaceable"><code>x</code></em></code>.
	Every component can be suffixed with
	<code class="literal">_build</code> or <code class="literal">_run</code>, the
	suffix indicating whether the dependency on the component is
	at buildtime or runtime.  If unsuffixed, the component will be
	depended on at both build- and runtime.  Usually, library
	components are specified unsuffixed, tool components
	are mostly specified with the <code class="literal">_build</code> suffix
	and plugin components are specified with the
	<code class="literal">_run</code> suffix.  The most commonly used
	components are listed below (all available components are
	listed in <code class="varname">_USE_QT_ALL</code>,
	<code class="varname">_USE_QT4_ONLY</code>, and
	<code class="varname">_USE_QT5_ONLY</code> in
	<code class="filename">/usr/ports/Mk/bsd.qt.mk</code>):</p><div class="table"><a id="using-qt-library-list"></a><div class="table-title">Table 6.8. Available Qt Library Components</div><div class="table-contents"><table summary="Available Qt Library Components" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">core</code></td><td>core library (Qt 5 only)</td></tr><tr><td><code class="literal">corelib</code></td><td>core library (Qt 4 only)</td></tr><tr><td><code class="literal">dbus</code></td><td>Qt DBus library</td></tr><tr><td><code class="literal">gui</code></td><td>graphical user interface library</td></tr><tr><td><code class="literal">network</code></td><td>network library</td></tr><tr><td><code class="literal">opengl</code></td><td>Qt OpenGL library</td></tr><tr><td><code class="literal">script</code></td><td>script library</td></tr><tr><td><code class="literal">sql</code></td><td>SQL library</td></tr><tr><td><code class="literal">testlib</code></td><td>unit testing library</td></tr><tr><td><code class="literal">webkit</code></td><td>Qt WebKit library</td></tr><tr><td><code class="literal">xml</code></td><td>Qt XML library</td></tr></tbody></table></div></div><br class="table-break" /><p>To determine the libraries an application
	depends on, run <code class="command">ldd</code> on the main
	executable after a successful compilation.</p><div class="table"><a id="using-qt-tools-list"></a><div class="table-title">Table 6.9. Available Qt Tool Components</div><div class="table-contents"><table summary="Available Qt Tool Components" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">qmake</code></td><td>Makefile generator/build utility</td></tr><tr><td><code class="literal">buildtools</code></td><td>build tools (<code class="command">moc</code>,
		<code class="command">rcc</code>), needed for almost
		every Qt application (Qt 5 only)</td></tr><tr><td><code class="literal">linguisttools</code></td><td>localization tools: <code class="command">lrelease</code>,
		<code class="command">lupdate</code> (Qt 5 only)</td></tr><tr><td><code class="literal">linguist</code></td><td>localization tools: <code class="command">lrelease</code>,
		<code class="command">lupdate</code> (Qt 4 only)</td></tr><tr><td><code class="literal">moc</code></td><td>meta object compiler, needed for almost
		every Qt application at buildtime (Qt 4 only)</td></tr><tr><td><code class="literal">rcc</code></td><td>resource compiler, needed if the application
		comes with <code class="filename">*.rc</code> or
		<code class="filename">*.qrc</code> files (Qt 4 only)</td></tr><tr><td><code class="literal">uic</code></td><td>user interface compiler, needed if the
		application comes with <code class="filename">*.ui</code>
		files, in practice, every Qt
		application with a GUI (Qt 4 only)</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="using-qt-plugins-list"></a><div class="table-title">Table 6.10. Available Qt Plugin Components</div><div class="table-contents"><table summary="Available Qt Plugin Components" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">iconengines</code></td><td>SVG icon engine plugin, needed if the application
		ships SVG icons (Qt 4 only)</td></tr><tr><td><code class="literal">imageformats</code></td><td>plugins for TGA, TIFF, and MNG
		image formats</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="qt4-components-example"></a><div class="example-title">Example 6.5. Selecting Qt 4 Components</div><div class="example-contents"><p>In this example, the ported application uses the Qt 4
	  graphical user interface library, the Qt 4 core library,
	  all of the Qt 4 code generation tools and Qt 4's Makefile
	  generator.  Since the <code class="literal">gui</code> library
	  implies a dependency on the core library,
	  <code class="literal">corelib</code> does not need to be specified.
	  The Qt 4 code generation tools <code class="literal">moc</code>,
	  <code class="literal">uic</code> and <code class="literal">rcc</code>, as well
	  as the Makefile generator <code class="literal">qmake</code> are
	  only needed at buildtime, thus they are specified with the
	  <code class="literal">_build</code> suffix:</p><pre class="programlisting">USE_QT4=	gui moc_build qmake_build rcc_build uic_build</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-qmake"></a>6.11.3. Using <code class="command">qmake</code></h3></div></div></div><p>If the application provides a
	<span class="application">qmake</span> project file
	(<code class="filename">*.pro</code>), define
	<code class="literal">USES= qmake</code> along with
	<code class="literal">USE_QT<em class="replaceable"><code>x</code></em></code>.  Note
	that <code class="literal">USES= qmake</code> already implies a build
	dependency on qmake, therefore the qmake component can be
	omitted from
	<code class="literal">USE_QT<em class="replaceable"><code>x</code></em></code>.
	Similar to <a class="link" href="#using-cmake" title="6.5.4. Using cmake"><span class="application">CMake</span></a>,
	<span class="application">qmake</span> supports out-of-source
	builds, which can be enabled by specifying the
	<code class="literal">outsource</code> argument (see <a class="link" href="#using-qmake-example" title="Example 6.6. USES= qmake Example"><code class="literal">USES= qmake</code>
	  example</a>).</p><div class="table"><a id="using-qmake-variables"></a><div class="table-title">Table 6.11. Variables for Ports That Use
	  <code class="command">qmake</code></div><div class="table-contents"><table summary="Variables for Ports That Use&#10;&#9;  qmake" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Means</th></tr></thead><tbody><tr><td><code class="varname">QMAKE_ARGS</code></td><td>Port specific <span class="application">qmake</span>
		flags to be passed to the <code class="command">qmake</code>
		binary.</td></tr><tr><td><code class="varname">QMAKE_ENV</code></td><td>Environment variables to be set for the
		<code class="command">qmake</code> binary.   The default is
		<code class="literal">${CONFIGURE_ENV}</code>.</td></tr><tr><td><code class="varname">QMAKE_SOURCE_PATH</code></td><td>Path to qmake project files
		(<code class="filename">.pro</code>).  The default is
		<code class="literal">${WRKSRC}</code> if an
		out-of-source build is requested, empty
		otherwise.</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="using-qmake-example"></a><div class="example-title">Example 6.6. <code class="literal">USES= qmake</code> Example</div><div class="example-contents"><p>This snippet demonstrates the use of
	  <span class="application">qmake</span> for a Qt 4 port:</p><pre class="programlisting">USES=		qmake:outsource
USE_QT4=	moc_build</pre><p>For a Qt 5 port:</p><pre class="programlisting">USES=		qmake:outsource
USE_QT5=	buildtools_build</pre></div></div><br class="example-break" /><p>Qt applications are often written to be cross-platform
	and often X11/Unix is not the platform they are developed
	on, which in turn leads to certain loose ends,
	like:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Missing additional include
	      paths.</em></span>  Many applications come with
	    system tray icon support, but neglect to look for
	    includes and/or libraries in the X11 directories.  To add
	    directories to <code class="command">qmake</code>'s
	    include and library search paths via the command
	    line, use:</p><pre class="programlisting">QMAKE_ARGS+=	INCLUDEPATH+=${LOCALBASE}/include \
		LIBS+=-L${LOCALBASE}/lib</pre></li><li class="listitem"><p><span class="emphasis"><em>Bogus installation paths.</em></span>
	    Sometimes data such as icons or .desktop files are by
	    default installed into directories which are not scanned
	    by XDG-compatible applications.
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/texmaker/pkg-descr">editors/texmaker</a> is
	    an example for this - look at
	    <code class="filename">patch-texmaker.pro</code> in the
	    <code class="filename">files</code> directory of that port for a
	    template on how to remedy this directly in the
	    <code class="command">qmake</code> project file.</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-kde"></a>6.12. Using KDE</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="kde4-variables"></a>6.12.1. KDE 4 Variable Definitions</h3></div></div></div><p>If the application depends on KDE 4, set
	<code class="varname">USE_KDE4</code> to the list of required
	components.  <code class="literal">_build</code> and
	<code class="literal">_run</code> suffixes can be used to force
	components dependency type (for example,
	<code class="literal">baseapps_run</code>).  If no suffix is set, a
	default dependency type will be used.  To force
	both types, add the component twice with both suffixes
	(for example, <code class="literal">automoc4_build automoc4_run</code>).  The
	most commonly used components are listed below (up-to-date
	components are documented at the top of
	<code class="filename">/usr/ports/Mk/bsd.kde4.mk</code>):</p><div class="table"><a id="using-kde-components"></a><div class="table-title">Table 6.12. Available KDE 4 Components</div><div class="table-contents"><table summary="Available KDE 4 Components" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">kdehier</code></td><td>Hierarchy of common KDE directories</td></tr><tr><td><code class="literal">kdelibs</code></td><td>KDE core libraries</td></tr><tr><td><code class="literal">kdeprefix</code></td><td>If set, port will be installed into
		<code class="literal">${KDE4_PREFIX}</code></td></tr><tr><td><code class="literal">automoc4</code></td><td>Build tool to automatically generate moc
		files</td></tr><tr><td><code class="literal">akonadi</code></td><td>Storage server for KDE PIM data</td></tr><tr><td><code class="literal">soprano</code></td><td>Library for Resource Description Framework
		(RDF)</td></tr><tr><td><code class="literal">strigi</code></td><td>Strigi desktop search library</td></tr><tr><td><code class="literal">libkcddb</code></td><td>KDE CDDB (compact disc database) library</td></tr><tr><td><code class="literal">libkcompactdisc</code></td><td>KDE library for interfacing with audio
		CDs</td></tr><tr><td><code class="literal">libkdeedu</code></td><td>Libraries used by educational
		applications</td></tr><tr><td><code class="literal">libkdcraw</code></td><td>KDE LibRaw library</td></tr><tr><td><code class="literal">libkexiv2</code></td><td>KDE Exiv2 library</td></tr><tr><td><code class="literal">libkipi</code></td><td>KDE Image Plugin Interface</td></tr><tr><td><code class="literal">libkonq</code></td><td>Konqueror core library</td></tr><tr><td><code class="literal">libksane</code></td><td>KDE SANE ("Scanner Access Now Easy")
		library</td></tr><tr><td><code class="literal">pimlibs</code></td><td>Personal information management libraries</td></tr><tr><td><code class="literal">kate</code></td><td>Advanced text editor framework</td></tr><tr><td><code class="literal">marble</code></td><td>Virtual globe and world atlas</td></tr><tr><td><code class="literal">okular</code></td><td>Universal document viewer</td></tr><tr><td><code class="literal">korundum</code></td><td>KDE Ruby bindings</td></tr><tr><td><code class="literal">perlkde</code></td><td>KDE Perl bindings</td></tr><tr><td><code class="literal">pykde4</code></td><td>KDE Python bindings</td></tr><tr><td><code class="literal">pykdeuic4</code></td><td>PyKDE user interface compiler</td></tr><tr><td><code class="literal">smokekde</code></td><td>KDE SMOKE libraries</td></tr></tbody></table></div></div><br class="table-break" /><p>KDE 4 ports are installed into
	<code class="varname">KDE4_PREFIX</code>.  This is
	achieved by specifying the <code class="literal">kdeprefix</code>
	component, which overrides the default
	<code class="varname">PREFIX</code>.  The ports, however, respect any
	<code class="varname">PREFIX</code> set via the <code class="envar">MAKEFLAGS</code>
	environment variable and/or <code class="command">make</code>
	arguments.  Currently <code class="varname">KDE4_PREFIX</code>
	is identical to the default <code class="varname">PREFIX</code>,
	<code class="literal">${LOCALBASE}</code>.</p><div class="example"><a id="kde4-components-example"></a><div class="example-title">Example 6.7. <code class="varname">USE_KDE4</code> Example</div><div class="example-contents"><p>This is a simple example for a KDE 4 port.
	  <code class="literal">USES= cmake:outsource</code> instructs the
	  port to utilize <span class="application">CMake</span>, a
	  configuration tool widely used by KDE 4 projects (see
	  <a class="xref" href="#using-cmake" title="6.5.4. Using cmake">Section 6.5.4, &#8220;Using <code class="command">cmake</code>&#8221;</a> for detailed usage).
	  <code class="varname">USE_KDE4</code> brings dependency on KDE
	  libraries and makes port using
	  <code class="command">automoc4</code> at build stage.
	  Required KDE components and other dependencies can be
	  determined through configure log.
	  <code class="varname">USE_KDE4</code> does not imply
	  <code class="varname">USE_QT4</code>.  If a port requires some
	  Qt 4 components, specify them in
	  <code class="varname">USE_QT4</code>.</p><pre class="programlisting">USES=		cmake:outsource
USE_KDE4=	kdelibs kdeprefix automoc4
USE_QT4=	moc_build qmake_build rcc_build uic_build</pre></div></div><br class="example-break" /></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-java"></a>6.13. Using Java</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="java-variables"></a>6.13.1. Variable Definitions</h3></div></div></div><p>If the port needs a Java&#8482; Development Kit
	(<acronym class="acronym">JDK</acronym>&#8482;) to either build, run or even extract the
	distfile, then define
	<code class="varname">USE_JAVA</code>.</p><p>There are several <acronym class="acronym">JDK</acronym>s in the ports collection, from
	various vendors, and in several versions.  If the port must
	use one of these versions, define which one.  The
	most current version, and FreeBSD default is
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/java/openjdk6/pkg-descr">java/openjdk6</a>.</p><div class="table"><a id="using-java-variables"></a><div class="table-title">Table 6.13. Variables Which May be Set by Ports That Use
	  Java</div><div class="table-contents"><table summary="Variables Which May be Set by Ports That Use&#10;&#9;  Java" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Means</th></tr></thead><tbody><tr><td><code class="varname">USE_JAVA</code></td><td>Define for the remaining variables
		to have any effect.</td></tr><tr><td><code class="varname">JAVA_VERSION</code></td><td>List of space-separated suitable Java versions
		for the port.  An optional <code class="literal">"+"</code>
		allows specifying a range of versions (allowed
		values:
		<code class="literal">1.5[+] 1.6[+] 1.7[+]</code>).</td></tr><tr><td><code class="varname">JAVA_OS</code></td><td>List of space-separated suitable <acronym class="acronym">JDK</acronym> port
		operating systems for the port (allowed values:
		<code class="literal">native linux</code>).</td></tr><tr><td><code class="varname">JAVA_VENDOR</code></td><td>List of space-separated suitable <acronym class="acronym">JDK</acronym> port
		vendors for the port (allowed values:
		<code class="literal">freebsd bsdjava sun
		  openjdk</code>).</td></tr><tr><td><code class="varname">JAVA_BUILD</code></td><td>When set, add the selected <acronym class="acronym">JDK</acronym> port to the build
		dependencies.</td></tr><tr><td><code class="varname">JAVA_RUN</code></td><td>When set, add the selected <acronym class="acronym">JDK</acronym> port to the run
		dependencies.</td></tr><tr><td><code class="varname">JAVA_EXTRACT</code></td><td>When set, add the selected <acronym class="acronym">JDK</acronym> port to the
		extract dependencies.</td></tr></tbody></table></div></div><br class="table-break" /><p>Below is the list of all settings a port will receive
	after setting <code class="varname">USE_JAVA</code>:</p><div class="table"><a id="using-java-variables2"></a><div class="table-title">Table 6.14. Variables Provided to Ports That Use Java</div><div class="table-contents"><table summary="Variables Provided to Ports That Use Java" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Value</th></tr></thead><tbody><tr><td><code class="varname">JAVA_PORT</code></td><td>The name of the <acronym class="acronym">JDK</acronym> port (for example,
		<code class="literal">java/openjdk6</code>).</td></tr><tr><td><code class="varname">JAVA_PORT_VERSION</code></td><td>The full version of the <acronym class="acronym">JDK</acronym> port (for example,
		<code class="literal">1.6.0</code>).  Only the first two
		digits of this version number are needed, use
		<code class="varname">${JAVA_PORT_VERSION:C/^([0-9])\.([0-9])(.*)$/\1.\2/}</code>.</td></tr><tr><td><code class="varname">JAVA_PORT_OS</code></td><td>The operating system used by the <acronym class="acronym">JDK</acronym> port
		(for example, <code class="literal">'native'</code>).</td></tr><tr><td><code class="varname">JAVA_PORT_VENDOR</code></td><td>The vendor of the <acronym class="acronym">JDK</acronym> port (for example,
		<code class="literal">'openjdk'</code>).</td></tr><tr><td><code class="varname">JAVA_PORT_OS_DESCRIPTION</code></td><td>Description of the operating system used by the
		<acronym class="acronym">JDK</acronym> port (for example,
		<code class="literal">'Native'</code>).</td></tr><tr><td><code class="varname">JAVA_PORT_VENDOR_DESCRIPTION</code></td><td>Description of the vendor of the <acronym class="acronym">JDK</acronym> port
		(for example, <code class="literal">'OpenJDK BSD Porting
		  Team'</code>).</td></tr><tr><td><code class="varname">JAVA_HOME</code></td><td>Path to the installation directory of the <acronym class="acronym">JDK</acronym>
		(for example,
		<code class="filename">'/usr/local/openjdk6'</code>).</td></tr><tr><td><code class="varname">JAVAC</code></td><td>Path to the Java compiler to use (for example,
		<code class="filename">'/usr/local/openjdk6/bin/javac'</code>).</td></tr><tr><td><code class="varname">JAR</code></td><td>Path to the <code class="command">jar</code> tool to use
		(for example,
		<code class="filename">'/usr/local/openjdk6/bin/jar'</code>
		or
		<code class="filename">'/usr/local/bin/fastjar'</code>).</td></tr><tr><td><code class="varname">APPLETVIEWER</code></td><td>Path to the <code class="command">appletviewer</code>
		utility (for example,
		<code class="filename">'/usr/local/openjdk6/bin/appletviewer'</code>).</td></tr><tr><td><code class="varname">JAVA</code></td><td>Path to the <code class="command">java</code> executable.
		Use this for executing Java programs (for example,
		<code class="filename">'/usr/local/openjdk6/bin/java'</code>).</td></tr><tr><td><code class="varname">JAVADOC</code></td><td>Path to the <code class="command">javadoc</code> utility
		program.</td></tr><tr><td><code class="varname">JAVAH</code></td><td>Path to the <code class="command">javah</code>
		program.</td></tr><tr><td><code class="varname">JAVAP</code></td><td>Path to the <code class="command">javap</code>
		program.</td></tr><tr><td><code class="varname">JAVA_KEYTOOL</code></td><td>Path to the <code class="command">keytool</code> utility
		program.</td></tr><tr><td><code class="varname">JAVA_N2A</code></td><td>Path to the <code class="command">native2ascii</code>
		tool.</td></tr><tr><td><code class="varname">JAVA_POLICYTOOL</code></td><td>Path to the <code class="command">policytool</code>
		program.</td></tr><tr><td><code class="varname">JAVA_SERIALVER</code></td><td>Path to the <code class="command">serialver</code>
		utility program.</td></tr><tr><td><code class="varname">RMIC</code></td><td>Path to the RMI stub/skeleton generator,
		<code class="command">rmic</code>.</td></tr><tr><td><code class="varname">RMIREGISTRY</code></td><td>Path to the RMI registry program,
		<code class="command">rmiregistry</code>.</td></tr><tr><td><code class="varname">RMID</code></td><td>Path to the RMI daemon program
		<code class="command">rmid</code>.</td></tr><tr><td><code class="varname">JAVA_CLASSES</code></td><td>Path to the archive that contains the <acronym class="acronym">JDK</acronym> class
		files,
		<code class="filename">${JAVA_HOME}/jre/lib/rt.jar</code>.</td></tr></tbody></table></div></div><br class="table-break" /><p>Use the <code class="buildtarget">java-debug</code> make
	target to get information for debugging the port.  It will
	display the value of many of the previously listed variables.</p><p>Additionally, these constants are defined so all
	Java ports may be installed in a consistent way:</p><div class="table"><a id="using-java-constants"></a><div class="table-title">Table 6.15. Constants Defined for Ports That Use Java</div><div class="table-contents"><table summary="Constants Defined for Ports That Use Java" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Constant</th><th>Value</th></tr></thead><tbody><tr><td><code class="varname">JAVASHAREDIR</code></td><td>The base directory for everything related to
		Java.  Default:
		<code class="filename">${PREFIX}/share/java</code>.</td></tr><tr><td><code class="varname">JAVAJARDIR</code></td><td>The directory where JAR files is
		installed.  Default:
		<code class="filename">${JAVASHAREDIR}/classes</code>.</td></tr><tr><td><code class="varname">JAVALIBDIR</code></td><td>The directory where JAR files installed by
		other ports are located.  Default:
		<code class="filename">${LOCALBASE}/share/java/classes</code>.</td></tr></tbody></table></div></div><br class="table-break" /><p>The related entries are defined in both
	<code class="varname">PLIST_SUB</code> (documented in
	<a class="xref" href="#plist-sub" title="7.1. Changing pkg-plist Based on Make Variables">Section 7.1, &#8220;Changing <code class="filename">pkg-plist</code> Based on Make
      Variables&#8221;</a>) and
	<code class="varname">SUB_LIST</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="java-building-with-ant"></a>6.13.2. Building with Ant</h3></div></div></div><p>When the port is to be built using Apache Ant, it has to
	define <code class="varname">USE_ANT</code>.  Ant is thus considered
	to be the sub-make command.  When no
	<code class="buildtarget">do-build</code> target is defined by the port, a
	default one will be set that runs Ant according to
	<code class="varname">MAKE_ENV</code>, <code class="varname">MAKE_ARGS</code>
	and <code class="varname">ALL_TARGET</code>.  This is similar to the
	<code class="literal">USES= gmake</code> mechanism, which is
	documented in <a class="xref" href="#building" title="6.5. Building Mechanisms">Section 6.5, &#8220;Building Mechanisms&#8221;</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="java-best-practices"></a>6.13.3. Best Practices</h3></div></div></div><p>When porting a Java library, the port has to install
	the JAR file(s) in <code class="filename">${JAVAJARDIR}</code>, and
	everything else under
	<code class="filename">${JAVASHAREDIR}/${PORTNAME}</code> (except for
	the documentation, see below).  To reduce the
	packing file size, reference the JAR file(s)
	directly in the <code class="filename">Makefile</code>.  Use this
	statement (where <code class="filename"><em class="replaceable"><code>myport</code></em>.jar</code>
	is the name of the JAR file installed as part of the
	port):</p><pre class="programlisting">PLIST_FILES+=	%%JAVAJARDIR%%/<em class="replaceable"><code>myport</code></em>.jar</pre><p>When porting a Java application, the port usually
	installs everything under a single directory (including its
	JAR dependencies).  The use of
	<code class="filename">${JAVASHAREDIR}/${PORTNAME}</code> is strongly
	encouraged in this regard.  It is up the porter to decide
	whether the port installs the additional JAR
	dependencies under this directory or uses the
	already installed ones (from
	<code class="filename">${JAVAJARDIR}</code>).</p><p>When porting a <span class="trademark">Java</span>&#8482; application that requires an
	application server such as
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/tomcat7/pkg-descr">www/tomcat7</a> to run the
	service, it is quite common for a vendor to distribute a
	<code class="filename">.war</code>.  A <code class="filename">.war</code>
	is a Web application ARchive and is extracted when
	called by the application.  Avoid adding a
	<code class="filename">.war</code>
	to <code class="filename">pkg-plist</code>.
	It is not considered best practice.  An application server
	will expand <span class="application">war</span> archive, but not
	clean it up properly if the port is removed.  A more
	desirable way of working with this file is to extract the
	archive, then install the files, and lastly add these files
	to <code class="filename">pkg-plist</code>.</p><pre class="programlisting">TOMCATDIR=	${LOCALBASE}/apache-tomcat-7.0
WEBAPPDIR=	myapplication

post-extract:
	@${MKDIR} ${WRKDIR}/${PORTDIRNAME}
	@${TAR} xf ${WRKDIR}/myapplication.war -C ${WRKDIR}/${PORTDIRNAME}

do-install:
	cd ${WRKDIR} &amp;&amp; \
	${INSTALL} -d -o ${WWWOWN} -g ${WWWGRP} ${TOMCATDIR}/webapps/${PORTDIRNAME}
	@cd ${WRKDIR}/${PORTDIRNAME} &amp;&amp; ${COPYTREE_SHARE} \* ${WEBAPPDIR}/${PORTDIRNAME}</pre><p>Regardless of the type of port (library or
	application), the additional documentation is
	installed in the
	<a class="link" href="#install-documentation" title="5.15.4. Install Additional Documentation">same location</a>
	as for any other port.  The JavaDoc tool is known to produce
	a different set of files depending on the version of the <acronym class="acronym">JDK</acronym>
	that is used.  For ports that do not enforce the use of a
	particular <acronym class="acronym">JDK</acronym>, it is therefore a complex task to specify
	the packing list (<code class="filename">pkg-plist</code>).  This is
	one reason why porters are strongly encouraged to use
	<code class="varname">PORTDOCS</code>.  Moreover, even if the
	set of files that will be generated by
	<code class="command">javadoc</code> can be predicted, the size of the resulting
	<code class="filename">pkg-plist</code> advocates for the use of
	<code class="varname">PORTDOCS</code>.</p><p>The default value for <code class="varname">DATADIR</code> is
	<code class="filename">${PREFIX}/share/${PORTNAME}</code>.  It is a
	good idea to override <code class="varname">DATADIR</code> to
	<code class="filename">${JAVASHAREDIR}/${PORTNAME}</code> for Java
	ports.  Indeed, <code class="varname">DATADIR</code> is automatically
	added to <code class="varname">PLIST_SUB</code> (documented in
	<a class="xref" href="#plist-sub" title="7.1. Changing pkg-plist Based on Make Variables">Section 7.1, &#8220;Changing <code class="filename">pkg-plist</code> Based on Make
      Variables&#8221;</a>) so use
	<code class="literal">%%DATADIR%%</code> directly in
	<code class="filename">pkg-plist</code>.</p><p>As for the choice of building Java ports from source or
	directly installing them from a binary distribution, there
	is no defined policy at the time of writing.  However,
	people from the
	<a class="link" href="http://www.freebsd.org/java/" target="_top">FreeBSD Java
	  Project</a> encourage porters to have their ports
	built from source whenever it is a trivial task.</p><p>All the features that have been presented in this
	section are implemented in <code class="filename">bsd.java.mk</code>.
	If the port needs more sophisticated
	Java support, please first have a look at the <a class="link" href="http://svnweb.FreeBSD.org/ports/head/Mk/bsd.java.mk?view=log" target="_top">bsd.java.mk
	  <span class="application">Subversion</span> log</a> as it
	usually takes some time to document the latest features.
	Then, if the needed support that is lacking would be
	beneficial to many other Java ports, feel free to discuss it
	on the <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-java" target="_top">FreeBSD Java Language mailing list</a>.</p><p>Although there is a <code class="literal">java</code> category for
	PRs, it refers to the <acronym class="acronym">JDK</acronym> porting effort from the FreeBSD Java
	project.  Therefore, submit the Java port in the
	<code class="literal">ports</code> category as for any other port,
	unless the issue is related to
	either a <acronym class="acronym">JDK</acronym> implementation or
	<code class="filename">bsd.java.mk</code>.</p><p>Similarly, there is a defined policy regarding the
	<code class="varname">CATEGORIES</code> of a Java port, which is
	detailed in <a class="xref" href="#makefile-categories" title="5.3. Categorization">Section 5.3, &#8220;Categorization&#8221;</a>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-php"></a>6.14. Web Applications, Apache and PHP</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-apache"></a>6.14.1. Apache</h3></div></div></div><div class="table"><a id="using-apache-variables"></a><div class="table-title">Table 6.16. Variables for Ports That Use Apache</div><div class="table-contents"><table summary="Variables for Ports That Use Apache" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">USE_APACHE</code></td><td>The port requires Apache.  Possible values:
		<code class="literal">yes</code> (gets any version),
		<code class="literal">22</code>, <code class="literal">24</code>,
		<code class="literal">22-24</code>, <code class="literal">22+</code>,
		etc.  The default APACHE version is
		<code class="literal">22</code>.  More details are available
		in <code class="filename">ports/Mk/bsd.apache.mk</code> and
		at <a class="link" href="http://wiki.freebsd.org/Apache/" target="_top">wiki.freebsd.org/Apache/</a>.</td></tr><tr><td><code class="varname">APXS</code></td><td>Full path to the <code class="command">apxs</code>
		binary.  Can be overridden in the port.</td></tr><tr><td><code class="varname">HTTPD</code></td><td>Full path to the <code class="command">httpd</code>
		binary.  Can be overridden in the port.</td></tr><tr><td><code class="varname">APACHE_VERSION</code></td><td>The version of present Apache installation
		(read-only variable).  This variable is only
		available after inclusion of
		<code class="filename">bsd.port.pre.mk</code>.  Possible
		values: <code class="literal">22</code>,
		<code class="literal">24</code>.</td></tr><tr><td><code class="varname">APACHEMODDIR</code></td><td>Directory for Apache modules.  This variable is
		automatically expanded in
		<code class="filename">pkg-plist</code>.</td></tr><tr><td><code class="varname">APACHEINCLUDEDIR</code></td><td>Directory for Apache headers.  This variable is
		automatically expanded in
		<code class="filename">pkg-plist</code>.</td></tr><tr><td><code class="varname">APACHEETCDIR</code></td><td>Directory for Apache configuration files.  This
		variable is automatically expanded in
		<code class="filename">pkg-plist</code>.</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="using-apache-modules"></a><div class="table-title">Table 6.17. Useful Variables for Porting Apache Modules</div><div class="table-contents"><table summary="Useful Variables for Porting Apache Modules" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">MODULENAME</code></td><td>Name of the module.  Default value is
		<code class="varname">PORTNAME</code>.  Example:
		<code class="literal">mod_hello</code></td></tr><tr><td><code class="varname">SHORTMODNAME</code></td><td>Short name of the module.  Automatically
		derived from <code class="varname">MODULENAME</code>, but can
		be overridden.  Example:
		<code class="literal">hello</code></td></tr><tr><td><code class="varname">AP_FAST_BUILD</code></td><td>Use <code class="command">apxs</code> to compile and
		install the module.</td></tr><tr><td><code class="varname">AP_GENPLIST</code></td><td>Also automatically creates a
		<code class="filename">pkg-plist</code>.</td></tr><tr><td><code class="varname">AP_INC</code></td><td>Adds a directory to a header search path during
		compilation.</td></tr><tr><td><code class="varname">AP_LIB</code></td><td>Adds a directory to a library search path
		during compilation.</td></tr><tr><td><code class="varname">AP_EXTRAS</code></td><td>Additional flags to pass to
		<code class="command">apxs</code>.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="web-apps"></a>6.14.2. Web Applications</h3></div></div></div><p>Web applications must be installed into
	<code class="filename">PREFIX/www/<em class="replaceable"><code>appname</code></em></code>.
	This path is available both in
	<code class="filename">Makefile</code> and in
	<code class="filename">pkg-plist</code> as <code class="varname">WWWDIR</code>,
	and the path relative to <code class="varname">PREFIX</code> is
	available in <code class="filename">Makefile</code> as
	<code class="varname">WWWDIR_REL</code>.</p><p>The user and group of web server process are available
	as <code class="varname">WWWOWN</code> and <code class="varname">WWWGRP</code>,
	in case the ownership of some files needs to be changed.  The
	default values of both are <code class="literal">www</code>.  Use
	<code class="literal">WWWOWN?= myuser</code> and <code class="literal">WWWGRP?=
	  mygroup</code> if the port needs different values.  This
	allows the user to override them easily.</p><p>Do not depend on Apache unless the web app explicitly
	needs Apache.  Respect that users may wish to run a web
	app on different web server than Apache.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="php-variables"></a>6.14.3. PHP</h3></div></div></div><div class="table"><a id="using-php-variables"></a><div class="table-title">Table 6.18. Variables for Ports That Use PHP</div><div class="table-contents"><table summary="Variables for Ports That Use PHP" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">USE_PHP</code></td><td>The port requires PHP.  The value
		<code class="literal">yes</code> adds a dependency on PHP.
		The list of required PHP extensions can be specified
		instead.  Example:
		<code class="literal">pcre xml gettext</code></td></tr><tr><td><code class="varname">DEFAULT_PHP_VER</code></td><td>Selects which major version of PHP will be
		installed as a dependency when no PHP is installed
		yet.  Default is <code class="literal">5</code>.  Possible
		values: <code class="literal">4</code>,
		<code class="literal">5</code></td></tr><tr><td><code class="varname">IGNORE_WITH_PHP</code></td><td>The port does not work with PHP of the given
		version.  Possible values: <code class="literal">4</code>,
		<code class="literal">5</code></td></tr><tr><td><code class="varname">USE_PHPIZE</code></td><td>The port will be built as a PHP
		extension.</td></tr><tr><td><code class="varname">USE_PHPEXT</code></td><td>The port will be treated as a PHP extension,
		including installation and registration in the
		extension registry.</td></tr><tr><td><code class="varname">USE_PHP_BUILD</code></td><td>Set PHP as a build dependency.</td></tr><tr><td><code class="varname">WANT_PHP_CLI</code></td><td>Want the CLI (command line) version of
		PHP.</td></tr><tr><td><code class="varname">WANT_PHP_CGI</code></td><td>Want the CGI version of PHP.</td></tr><tr><td><code class="varname">WANT_PHP_MOD</code></td><td>Want the Apache module version of PHP.</td></tr><tr><td><code class="varname">WANT_PHP_SCR</code></td><td>Want the CLI or the CGI version of PHP.</td></tr><tr><td><code class="varname">WANT_PHP_WEB</code></td><td>Want the Apache module or the CGI version of
		PHP.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="php-pear"></a>6.14.4. PEAR Modules</h3></div></div></div><p>Porting PEAR modules is a very simple process.</p><p>Add <code class="literal">USES=pear</code> to the port's
	<code class="filename">Makefile</code>.  The framework will install the
	relevant files in the right places and automatically generate
	the plist at install time.</p><div class="example"><a id="pear-makefile"></a><div class="example-title">Example 6.8. Example Makefile for PEAR Class</div><div class="example-contents"><pre class="programlisting">PORTNAME=       Date
PORTVERSION=	1.4.3
CATEGORIES=	devel www pear

MAINTAINER=	example@domain.com
COMMENT=	PEAR Date and Time Zone Classes

USES=	pear

.include &lt;bsd.port.mk&gt;</pre></div></div><br class="example-break" /><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="php-horde"></a>6.14.4.1. <span class="application">Horde</span> Modules</h4></div></div></div><p>In the same way, porting
	  <span class="application">Horde</span> modules is a simple
	  process.</p><p>Add <code class="literal">USES=horde</code> to the port's
	  <code class="filename">Makefile</code>.  The framework will install
	  the relevant files in the right places and automatically
	  generate the plist at install time.</p><p>The <code class="varname">USE_HORDE_BUILD</code> and
	  <code class="varname">USE_HORDE_RUN</code> variables can be used to
	  add buildtime and runtime dependencies on other
	  <span class="application">Horde</span> modules.  See
	  <code class="filename">Mk/Uses/horde.mk</code> for a complete list of
	  available modules.</p><div class="example"><a id="horde-Makefile"></a><div class="example-title">Example 6.9. Example Makefile for <span class="application">Horde</span>
	    Module</div><div class="example-contents"><pre class="programlisting">PORTNAME=	Horde_Core
PORTVERSION=	2.14.0
CATEGORIES=	devel www pear

MAINTAINER=	horde@FreeBSD.org
COMMENT=	Horde Core Framework libraries

OPTIONS_DEFINE=	KOLAB SOCKETS
KOLAB_DESC=	Enable Kolab server support
SOCKETS_DESC=	Depend on sockets PHP extension

USES=	horde
USE_PHP=	session

USE_HORDE_BUILD=	Horde_Role
USE_HORDE_RUN=	Horde_Role Horde_History Horde_Pack \
		Horde_Text_Filter Horde_View

KOLAB_USE=	HORDE_RUN=Horde_Kolab_Server,Horde_Kolab_Session
SOCKETS_USE=	PHP=sockets

.include &lt;bsd.port.mk&gt;</pre></div></div><br class="example-break" /></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-python"></a>6.15. Using Python</h2></div></div></div><p>The Ports Collection supports parallel installation of
      multiple Python versions.  Ports must use a
      correct <code class="command">python</code> interpreter, according to
      the user-settable <code class="varname">PYTHON_VERSION</code>.
      Most prominently, this means replacing the path to
      <code class="command">python</code> executable in scripts with the value
      of <code class="varname">PYTHON_CMD</code>.</p><p>Ports that install files under
      <code class="varname">PYTHON_SITELIBDIR</code> must use the
      <code class="literal">pyXY-</code> package name prefix, so their package
      name embeds the version of Python they are installed
      into.</p><pre class="programlisting">PKGNAMEPREFIX=	${PYTHON_PKGNAMEPREFIX}</pre><div class="table"><a id="using-python-variables"></a><div class="table-title">Table 6.19. Most Useful Variables for Ports That Use Python</div><div class="table-contents"><table summary="Most Useful Variables for Ports That Use Python" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">USES=python</code></td><td>The port needs Python. The minimal required version
	      can be specified with values such as
	      <code class="literal">2.7+</code>. Version ranges can also be
	      specified by separating two version numbers with a
	      dash: <code class="literal">USES=python:3.2-3.3</code></td></tr><tr><td><code class="varname">USE_PYTHON=distutils</code></td><td>Use Python distutils for configuring, compiling,
	      and installing. This is required when the port comes
	      with <code class="filename">setup.py</code>. This overrides
	      the <code class="buildtarget">do-build</code> and
	      <code class="buildtarget">do-install</code> targets and may
	      also override <code class="buildtarget">do-configure</code>
	      if <code class="varname">GNU_CONFIGURE</code> is not
	      defined.</td></tr><tr><td><code class="varname">USE_PYTHON=autoplist</code></td><td>Create the packaging list automatically. This also requires
	    <code class="literal">USE_PYTHON=distutils</code> to be set.
        </td></tr><tr><td><code class="varname">USE_PYTHON=concurrent</code></td><td>The port will use an unique prefix, typically
        <code class="literal">PYTHON_PKGNAMEPREFIX</code> for certain directories, such
        as <code class="literal">EXAMPLESDIR</code> and <code class="literal">DOCSDIR</code> and
        also will append a suffix, the python version from
        <code class="literal">PYTHON_VER</code>, to binaries and scripts to be
        installed. This allows ports to be installed for different Python
        versions at the same time, which otherwise would install conflicting
        files.</td></tr><tr><td><code class="varname">PYTHON_PKGNAMEPREFIX</code></td><td>Used as a <code class="varname">PKGNAMEPREFIX</code> to
	      distinguish packages for different Python versions.
	      Example: <code class="literal">py27-</code></td></tr><tr><td><code class="varname">PYTHON_SITELIBDIR</code></td><td>Location of the site-packages tree, that contains
	      installation path of Python (usually
	      <code class="varname">LOCALBASE</code>).
	      <code class="varname">PYTHON_SITELIBDIR</code> can be
	      very useful when installing Python modules.</td></tr><tr><td><code class="varname">PYTHONPREFIX_SITELIBDIR</code></td><td>The PREFIX-clean variant of PYTHON_SITELIBDIR.
	      Always use <code class="literal">%%PYTHON_SITELIBDIR%%</code> in
	      <code class="filename">pkg-plist</code> when possible.  The
	      default value of
	      <code class="literal">%%PYTHON_SITELIBDIR%%</code> is
	      <code class="literal">lib/python%%PYTHON_VERSION%%/site-packages</code></td></tr><tr><td><code class="varname">PYTHON_CMD</code></td><td>Python interpreter command line, including
	      version number.</td></tr><tr><td><code class="varname">PYNUMERIC</code></td><td>Dependency line for numeric extension.</td></tr><tr><td><code class="varname">PYNUMPY</code></td><td>Dependency line for the new numeric extension,
	      numpy.  (PYNUMERIC is deprecated by upstream
	      vendor).</td></tr><tr><td><code class="varname">PYXML</code></td><td>Dependency line for XML extension (not needed for
	      Python 2.0 and higher as it is also in base
	      distribution).</td></tr></tbody></table></div></div><br class="table-break" /><p>A complete list of available variables can be found in
      <code class="filename">/usr/ports/Mk/Uses/python.mk</code>.</p><div class="example"><a id="python-Makefile"></a><div class="example-title">Example 6.10. Makefile for a Simple <span class="application">Python</span>
	    Module</div><div class="example-contents"><pre class="programlisting">PORTNAME=	sample
PORTVERSION=	1.2.3
CATEGORIES=	devel

MAINTAINER=	john@doe.tld
COMMENT=	Python sample module

USES=		python
USE_PYTHON=	autoplist distutils

.include &lt;bsd.port.mk&gt;</pre></div></div><br class="example-break" /><p>Some Python applications claim to have
      <code class="varname">DESTDIR</code> support (which would be required
      for staging) but it is broken (Mailman up to 2.1.16, for
      instance).  This can be worked around by recompiling the
      scripts.  This can be done, for example, in the
      <code class="buildtarget">post-build</code> target.  Assuming the
      Python scripts are supposed to reside in
      <code class="varname">PYTHONPREFIX_SITELIBDIR</code> after installation,
      this solution can be applied:</p><pre class="programlisting">(cd ${STAGEDIR}${PREFIX} \
  &amp;&amp; ${PYTHON_CMD} ${PYTHON_LIBDIR}/compileall.py \
   -d ${PREFIX} -f ${PYTHONPREFIX_SITELIBDIR:S;${PREFIX}/;;})</pre><p>This recompiles the sources with a path relative to the
      stage directory, and prepends the value of
      <code class="varname">PREFIX</code> to the file name recorded in the
      byte-compiled output file by <code class="literal">-d</code>.
      <code class="literal">-f</code> is required to force recompilation, and
      the <code class="literal">:S;${PREFIX}/;;</code> strips prefixes from
      the value of <code class="varname">PYTHONPREFIX_SITELIBDIR</code>
      to make it relative to
      <code class="varname">PREFIX</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-tcl"></a>6.16. Using <span class="application">Tcl/Tk</span></h2></div></div></div><p>The Ports Collection supports parallel installation of
      multiple <span class="application">Tcl/Tk</span> versions.  Ports
      should try to support at least the default
      <span class="application">Tcl/Tk</span> version and higher with
      <code class="literal">USES=tcl</code>.  It is possible to specify the
      desired version of <code class="command">tcl</code> by appending
      <code class="literal">:<em class="replaceable"><code>xx</code></em></code>, for example,
      <code class="literal">USES=tcl:85</code>.</p><div class="table"><a id="using-tcl-variables"></a><div class="table-title">Table 6.20. The Most Useful Read-Only Variables for Ports That Use
	<span class="application">Tcl/Tk</span></div><div class="table-contents"><table summary="The Most Useful Read-Only Variables for Ports That Use&#10;&#9;Tcl/Tk" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">TCL_VER</code></td><td> chosen major.minor version of
	      <span class="application">Tcl</span></td></tr><tr><td><code class="varname">TCLSH</code></td><td> full path of the <span class="application">Tcl</span>
	      interpreter</td></tr><tr><td><code class="varname">TCL_LIBDIR</code></td><td> path of the <span class="application">Tcl</span>
	      libraries</td></tr><tr><td><code class="varname">TCL_INCLUDEDIR</code></td><td> path of the <span class="application">Tcl</span> C
	      header files</td></tr><tr><td><code class="varname">TK_VER</code></td><td> chosen major.minor version of
	      <span class="application">Tk</span></td></tr><tr><td><code class="varname">WISH</code></td><td> full path of the <span class="application">Tk</span>
	      interpreter</td></tr><tr><td><code class="varname">TK_LIBDIR</code></td><td> path of the <span class="application">Tk</span>
	      libraries</td></tr><tr><td><code class="varname">TK_INCLUDEDIR</code></td><td> path of the <span class="application">Tk</span> C header
	      files</td></tr></tbody></table></div></div><br class="table-break" /><p>See the <a class="link" href="#uses-tcl"><code class="literal">USES=tcl</code></a> and
      <a class="link" href="#uses-tk"><code class="literal">USES=tk</code></a> of
      <a class="xref" href="#uses-values">Chapter 15, <em>Values of
    <code class="varname">USES</code></em></a> for a full description of those
      variables.  A complete list of those variables is available in
      <code class="filename">/usr/ports/Mk/Uses/tcl.mk</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-emacs"></a>6.17. Using Emacs</h2></div></div></div><p>This section is yet to be written.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-ruby"></a>6.18. Using Ruby</h2></div></div></div><div class="table"><a id="using-ruby-variables"></a><div class="table-title">Table 6.21. Useful Variables for Ports That Use Ruby</div><div class="table-contents"><table summary="Useful Variables for Ports That Use Ruby" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code class="varname">USE_RUBY</code></td><td>The port requires Ruby.</td></tr><tr><td><code class="varname">USE_RUBY_EXTCONF</code></td><td>The port uses <code class="filename">extconf.rb</code> to
	      configure.</td></tr><tr><td><code class="varname">USE_RUBY_SETUP</code></td><td>The port uses <code class="filename">setup.rb</code> to
	      configure.</td></tr><tr><td><code class="varname">RUBY_SETUP</code></td><td>Set to the alternative name of
	      <code class="filename">setup.rb</code>.  Common value is
	      <code class="filename">install.rb</code>.</td></tr></tbody></table></div></div><br class="table-break" /><p>This table shows the selected variables available
      to port authors via the ports infrastructure.  These variables
      are used to install files into their proper locations.
      Use them in <code class="filename">pkg-plist</code> as much as
      possible.  Do not redefine these variables in the port.</p><div class="table"><a id="using-ruby-variables-ro"></a><div class="table-title">Table 6.22. Selected Read-Only Variables for Ports That Use
	Ruby</div><div class="table-contents"><table summary="Selected Read-Only Variables for Ports That Use&#10;&#9;Ruby" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Variable</th><th>Description</th><th>Example value</th></tr></thead><tbody><tr><td><code class="varname">RUBY_PKGNAMEPREFIX</code></td><td>Used as a <code class="varname">PKGNAMEPREFIX</code> to
	      distinguish packages for different Ruby
	      versions.</td><td><code class="literal">ruby19-</code></td></tr><tr><td><code class="varname">RUBY_VERSION</code></td><td>Full version of Ruby in the form of
	      <code class="literal">x.y.z[.p]</code>.</td><td><code class="literal">1.9.3.484</code></td></tr><tr><td><code class="varname">RUBY_SITELIBDIR</code></td><td>Architecture independent libraries installation
	      path.</td><td><code class="literal">/usr/local/lib/ruby/site_ruby/1.9</code></td></tr><tr><td><code class="varname">RUBY_SITEARCHLIBDIR</code></td><td>Architecture dependent libraries installation
	      path.</td><td><code class="literal">/usr/local/lib/ruby/site_ruby/1.9/amd64-freebsd10</code></td></tr><tr><td><code class="varname">RUBY_MODDOCDIR</code></td><td>Module documentation installation path.</td><td><code class="literal">/usr/local/share/doc/ruby19/patsy</code></td></tr><tr><td><code class="varname">RUBY_MODEXAMPLESDIR</code></td><td>Module examples installation path.</td><td><code class="literal">/usr/local/share/examples/ruby19/patsy</code></td></tr></tbody></table></div></div><br class="table-break" /><p>A complete list of available variables can be found in
      <code class="filename">/usr/ports/Mk/bsd.ruby.mk</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-sdl"></a>6.19. Using SDL</h2></div></div></div><p><code class="varname">USE_SDL</code> is used to
      autoconfigure the dependencies for ports which use an SDL
      based library like <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/sdl12/pkg-descr">devel/sdl12</a>
      and <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sdl_image/pkg-descr">graphics/sdl_image</a>.</p><p>These SDL libraries for version 1.2 are recognized:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>sdl: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/sdl12/pkg-descr">devel/sdl12</a></p></li><li class="listitem"><p>console: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/sdl_console/pkg-descr">devel/sdl_console</a></p></li><li class="listitem"><p>gfx: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sdl_gfx/pkg-descr">graphics/sdl_gfx</a></p></li><li class="listitem"><p>image: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sdl_image/pkg-descr">graphics/sdl_image</a></p></li><li class="listitem"><p>mixer: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/sdl_mixer/pkg-descr">audio/sdl_mixer</a></p></li><li class="listitem"><p>mm: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/sdlmm/pkg-descr">devel/sdlmm</a></p></li><li class="listitem"><p>net: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/sdl_net/pkg-descr">net/sdl_net</a></p></li><li class="listitem"><p>pango: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/sdl_pango/pkg-descr">x11-toolkits/sdl_pango</a></p></li><li class="listitem"><p>sound: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/sdl_sound/pkg-descr">audio/sdl_sound</a></p></li><li class="listitem"><p>ttf: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sdl_ttf/pkg-descr">graphics/sdl_ttf</a></p></li></ul></div><p>These SDL libraries for version 2.0 are recognized:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>sdl: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/sdl20/pkg-descr">devel/sdl20</a></p></li><li class="listitem"><p>gfx: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sdl2_gfx/pkg-descr">graphics/sdl2_gfx</a></p></li><li class="listitem"><p>image: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sdl2_image/pkg-descr">graphics/sdl2_image</a></p></li><li class="listitem"><p>mixer: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/sdl2_mixer/pkg-descr">audio/sdl2_mixer</a></p></li><li class="listitem"><p>net: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/sdl2_net/pkg-descr">net/sdl2_net</a></p></li><li class="listitem"><p>ttf: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sdl2_ttf/pkg-descr">graphics/sdl2_ttf</a></p></li></ul></div><p>Therefore, if a port has a dependency on
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/sdl_net/pkg-descr">net/sdl_net</a> and
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/sdl_mixer/pkg-descr">audio/sdl_mixer</a>,
      the syntax will be:</p><pre class="programlisting">USE_SDL=	net mixer</pre><p>The dependency
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/sdl12/pkg-descr">devel/sdl12</a>, which is
      required by <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/sdl_net/pkg-descr">net/sdl_net</a>
      and <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/sdl_mixer/pkg-descr">audio/sdl_mixer</a>, is
      automatically added as well.</p><p>Using <code class="varname">USE_SDL</code> with entries for
      SDL 1.2, it will automatically:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Add a dependency on
	  <span class="application">sdl12-config</span> to
	  <code class="varname">BUILD_DEPENDS</code></p></li><li class="listitem"><p>Add the variable <code class="varname">SDL_CONFIG</code> to
	  <code class="varname">CONFIGURE_ENV</code></p></li><li class="listitem"><p>Add the dependencies of the selected libraries to
	  <code class="varname">LIB_DEPENDS</code></p></li></ul></div><p>Using <code class="varname">USE_SDL</code> with entries for
      SDL 2.0, it will automatically:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Add a dependency on
	  <span class="application">sdl2-config</span> to
	  <code class="varname">BUILD_DEPENDS</code></p></li><li class="listitem"><p>Add the variable <code class="varname">SDL2_CONFIG</code> to
	  <code class="varname">CONFIGURE_ENV</code></p></li><li class="listitem"><p>Add the dependencies of the selected libraries to
	  <code class="varname">LIB_DEPENDS</code></p></li></ul></div><p>To check whether an SDL library is available, use
      <code class="varname">WANT_SDL</code>:</p><pre class="programlisting">WANT_SDL=	yes

.include &lt;bsd.port.pre.mk&gt;

.if ${HAVE_SDL:Mmixer}!=""
USE_SDL+=	mixer
.endif

.include &lt;bsd.port.post.mk&gt;</pre></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-wx"></a>6.20. Using <span class="application">wxWidgets</span></h2></div></div></div><p>This section describes the status of the
      <span class="application">wxWidgets</span> libraries in the ports
      tree and its integration with the ports system.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-introduction"></a>6.20.1. Introduction</h3></div></div></div><p>There are many versions of the
	<span class="application">wxWidgets</span> libraries which
	conflict between them (install files under the same name).
	In the ports tree this problem has been solved by installing
	each version under a different name using version number
	suffixes.</p><p>The obvious disadvantage of this is that each
	application has to be modified to find the expected version.
	Fortunately, most of the applications call the
	<code class="command">wx-config</code> script to determine the
	necessary compiler and linker flags.  The script is named
	differently for every available version.  Majority of
	applications respect an environment variable, or accept a
	configure argument, to specify which
	<code class="command">wx-config</code> script to call.  Otherwise they
	have to be patched.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-version"></a>6.20.2. Version Selection</h3></div></div></div><p>To make the port use a specific version of
	<span class="application">wxWidgets</span> there are two variables
	available for defining (if only one is defined the other
	will be set to a default value):</p><div class="table"><a id="wx-ver-sel-table"></a><div class="table-title">Table 6.23. Variables to Select
	  <span class="application">wxWidgets</span> Versions</div><div class="table-contents"><table summary="Variables to Select&#10;&#9;  wxWidgets Versions" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Variable</th><th>Description</th><th>Default value</th></tr></thead><tbody><tr><td><code class="varname">USE_WX</code></td><td>List of versions the port can use</td><td>All available versions</td></tr><tr><td><code class="varname">USE_WX_NOT</code></td><td>List of versions the port cannot use</td><td>None</td></tr></tbody></table></div></div><br class="table-break" /><p>The available
	<span class="application">wxWidgets</span> versions and the
	corresponding ports in the tree are:</p><div class="table"><a id="wx-widgets-versions-table"></a><div class="table-title">Table 6.24. Available <span class="application">wxWidgets</span>
	  Versions</div><div class="table-contents"><table summary="Available wxWidgets&#10;&#9;  Versions" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Version</th><th>Port</th></tr></thead><tbody><tr><td><code class="literal">2.4</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/wxgtk24/pkg-descr">x11-toolkits/wxgtk24</a></td></tr><tr><td><code class="literal">2.6</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/wxgtk26/pkg-descr">x11-toolkits/wxgtk26</a></td></tr><tr><td><code class="literal">2.8</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/wxgtk28/pkg-descr">x11-toolkits/wxgtk28</a></td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">The versions starting from <code class="literal">2.5</code> also
	  come in Unicode version and are installed by a slave port
	  named like the normal one plus a
	  <code class="literal">-unicode</code> suffix, but this can be
	  handled with variables (see
	  <a class="xref" href="#wx-unicode" title="6.20.4. Unicode">Section 6.20.4, &#8220;Unicode&#8221;</a>).</p></div><p>The variables in <a class="xref" href="#wx-ver-sel-table" title="Table 6.23. Variables to Select wxWidgets Versions">Table 6.23, &#8220;Variables to Select
	  <span class="application">wxWidgets</span> Versions&#8221;</a> can
	be set to one or more of these combinations
	separated by spaces:</p><div class="table"><a id="wx-widgets-versions-specification"></a><div class="table-title">Table 6.25. <span class="application">wxWidgets</span> Version
	  Specifications</div><div class="table-contents"><table summary="wxWidgets Version&#10;&#9;  Specifications" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>Single version</td><td><code class="literal">2.4</code></td></tr><tr><td>Ascending range</td><td><code class="literal">2.4+</code></td></tr><tr><td>Descending range</td><td><code class="literal">2.6-</code></td></tr><tr><td>Full range (must be ascending)</td><td><code class="literal">2.4-2.6</code></td></tr></tbody></table></div></div><br class="table-break" /><p>There are also some variables to select the preferred
	versions from the available ones.  They can be set to a list
	of versions, the first ones will have higher
	priority.</p><div class="table"><a id="wx-widgets-preferred-version"></a><div class="table-title">Table 6.26. Variables to Select Preferred
	  <span class="application">wxWidgets</span> Versions</div><div class="table-contents"><table summary="Variables to Select Preferred&#10;&#9;  wxWidgets Versions" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Designed for</th></tr></thead><tbody><tr><td><code class="varname">WANT_WX_VER</code></td><td>the port</td></tr><tr><td><code class="varname">WITH_WX_VER</code></td><td>the user</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-components"></a>6.20.3. Component Selection</h3></div></div></div><p>There are other applications that, while not being
	<span class="application">wxWidgets</span> libraries, are related
	to them.  These applications can be specified in
	<code class="varname">WX_COMPS</code>.  These
	components are available:</p><div class="table"><a id="wx-widgets-components-table"></a><div class="table-title">Table 6.27. Available <span class="application">wxWidgets</span>
	  Components</div><div class="table-contents"><table summary="Available wxWidgets&#10;&#9;  Components" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th><th>Version restriction</th></tr></thead><tbody><tr><td><code class="literal">wx</code></td><td>main library</td><td>none</td></tr><tr><td><code class="literal">contrib</code></td><td>contributed libraries</td><td><code class="literal">none</code></td></tr><tr><td><code class="literal">python</code></td><td><span class="application">wxPython</span>
		(<span class="application">Python</span> bindings)</td><td><code class="literal">2.4-2.6</code></td></tr><tr><td><code class="literal">mozilla</code></td><td><span class="application">wxMozilla</span></td><td><code class="literal">2.4</code></td></tr><tr><td><code class="literal">svg</code></td><td><span class="application">wxSVG</span></td><td><code class="literal">2.6</code></td></tr></tbody></table></div></div><br class="table-break" /><p>The dependency type can be selected for each component
	by adding a suffix separated by a semicolon.  If not present
	then a default type will be used (see
	<a class="xref" href="#wx-def-dep-types" title="Table 6.29. Default wxWidgets Dependency Types">Table 6.29, &#8220;Default <span class="application">wxWidgets</span>
	  Dependency Types&#8221;</a>).  These types
	are available:</p><div class="table"><a id="wx-widgets-dependency-table"></a><div class="table-title">Table 6.28. Available <span class="application">wxWidgets</span>
	  Dependency Types</div><div class="table-contents"><table summary="Available wxWidgets&#10;&#9;  Dependency Types" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">build</code></td><td>Component is required for building, equivalent
		to <code class="varname">BUILD_DEPENDS</code></td></tr><tr><td><code class="literal">run</code></td><td>Component is required for running, equivalent
		to <code class="varname">RUN_DEPENDS</code></td></tr><tr><td><code class="literal">lib</code></td><td>Component is required for building and running,
		equivalent to <code class="varname">LIB_DEPENDS</code></td></tr></tbody></table></div></div><br class="table-break" /><p>The default values for the components are detailed in
	this table:</p><div class="table"><a id="wx-def-dep-types"></a><div class="table-title">Table 6.29. Default <span class="application">wxWidgets</span>
	  Dependency Types</div><div class="table-contents"><table summary="Default wxWidgets&#10;&#9;  Dependency Types" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Component</th><th>Dependency type</th></tr></thead><tbody><tr><td><code class="literal">wx</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">contrib</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">python</code></td><td><code class="literal">run</code></td></tr><tr><td><code class="literal">mozilla</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">svg</code></td><td><code class="literal">lib</code></td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="wx-components-example"></a><div class="example-title">Example 6.11. Selecting <span class="application">wxWidgets</span>
	  Components</div><div class="example-contents"><p>This fragment corresponds to a port which
	  uses <span class="application">wxWidgets</span> version
	  <code class="literal">2.4</code> and its contributed
	  libraries.</p><pre class="programlisting">USE_WX=		2.4
WX_COMPS=	wx contrib</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-unicode"></a>6.20.4. Unicode</h3></div></div></div><p>The <span class="application">wxWidgets</span> library
	supports Unicode since version <code class="literal">2.5</code>.  In
	the ports tree both versions are available and can be
	selected with these variables:</p><div class="table"><a id="wx-unicode-var-table"></a><div class="table-title">Table 6.30. Variables to Select Unicode in
	  <span class="application">wxWidgets</span>
	  Versions</div><div class="table-contents"><table summary="Variables to Select Unicode in&#10;&#9;  wxWidgets&#10;&#9;  Versions" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Variable</th><th>Description</th><th>Designed for</th></tr></thead><tbody><tr><td><code class="varname">WX_UNICODE</code></td><td>The port works <span class="emphasis"><em>only</em></span> with
		the Unicode version</td><td>the port</td></tr><tr><td><code class="varname">WANT_UNICODE</code></td><td>The port works with both versions but prefers
		the Unicode one</td><td>the port</td></tr><tr><td><code class="varname">WITH_UNICODE</code></td><td>The port will use the Unicode version</td><td>the user</td></tr><tr><td><code class="varname">WITHOUT_UNICODE</code></td><td>The port will use the normal version if
		supported (when <code class="varname">WX_UNICODE</code> is not
		defined)</td><td>the user</td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="warning"><h3 class="admontitle">Warning: </h3><p xmlns="http://www.w3.org/1999/xhtml">Do not use <code class="varname">WX_UNICODE</code> for ports
	  that can use both Unicode and normal versions.  If
	  the port needs to use Unicode by default, define
	  <code class="varname">WANT_UNICODE</code> instead.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-version-detection"></a>6.20.5. Detecting Installed Versions</h3></div></div></div><p>To detect an installed version, define
	<code class="varname">WANT_WX</code>.  If it is not set to a
	specific version then the components will have a version
	suffix.  <code class="varname">HAVE_WX</code> will be
	filled after detection.</p><div class="example"><a id="wx-ver-det-example"></a><div class="example-title">Example 6.12. Detecting Installed
	  <span class="application">wxWidgets</span> Versions and
	  Components</div><div class="example-contents"><p>This fragment can be used in a port that uses
	  <span class="application">wxWidgets</span> if it is installed,
	  or an option is selected.</p><pre class="programlisting">WANT_WX=	yes

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITH_WX) || !empty(PORT_OPTIONS:MWX) || !empty(HAVE_WX:Mwx-2.4)
USE_WX=			2.4
CONFIGURE_ARGS+=	--enable-wx
.endif</pre><p>This fragment can be used in a port that
	  enables <span class="application">wxPython</span> support if it
	  is installed or if an option is selected, in addition to
	  <span class="application">wxWidgets</span>, both version
	  <code class="literal">2.6</code>.</p><pre class="programlisting">USE_WX=		2.6
WX_COMPS=	wx
WANT_WX=	2.6

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITH_WXPYTHON) || !empty(PORT_OPTIONS:MWXPYTHON) || !empty(HAVE_WX:Mpython)
WX_COMPS+=		python
CONFIGURE_ARGS+=	--enable-wxpython
.endif</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-defined-variables"></a>6.20.6. Defined Variables</h3></div></div></div><p>These variables are available in the port (after
	defining one from
	<a class="xref" href="#wx-ver-sel-table" title="Table 6.23. Variables to Select wxWidgets Versions">Table 6.23, &#8220;Variables to Select
	  <span class="application">wxWidgets</span> Versions&#8221;</a>).</p><div class="table"><a id="wx-widgets-variables"></a><div class="table-title">Table 6.31. Variables Defined for Ports That Use
	  <span class="application">wxWidgets</span></div><div class="table-contents"><table summary="Variables Defined for Ports That Use&#10;&#9;  wxWidgets" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="varname">WX_CONFIG</code></td><td>The path to the
		<span class="application">wxWidgets</span>
		<code class="command">wx-config</code> script (with different
		name)</td></tr><tr><td><code class="varname">WXRC_CMD</code></td><td>The path to the
		<span class="application">wxWidgets</span>
		<code class="command">wxrc</code> program (with different
		name)</td></tr><tr><td><code class="varname">WX_VERSION</code></td><td>The <span class="application">wxWidgets</span>
		version that is going to be used (for example,
		<code class="literal">2.6</code>)</td></tr><tr><td><code class="varname">WX_UNICODE</code></td><td>If not defined but Unicode is going to be used
		then it will be defined</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-premk"></a>6.20.7. Processing in
	<code class="filename">bsd.port.pre.mk</code></h3></div></div></div><p>Define <code class="varname">WX_PREMK</code> to be able to use the
	variables right after including
	<code class="filename">bsd.port.pre.mk</code>.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">When defining <code class="varname">WX_PREMK</code>, then the
	  version, dependencies, components and defined variables
	  will not change if modifying the
	  <span class="application">wxWidgets</span> port variables
	  <span class="emphasis"><em>after</em></span> including
	  <code class="filename">bsd.port.pre.mk</code>.</p></div><div class="example"><a id="wx-premk-example"></a><div class="example-title">Example 6.13. Using <span class="application">wxWidgets</span> Variables
	  in Commands</div><div class="example-contents"><p>This fragment illustrates the use of
	  <code class="varname">WX_PREMK</code> by running the
	  <code class="command">wx-config</code> script to obtain the full
	  version string, assign it to a variable and pass it to the
	  program.</p><pre class="programlisting">USE_WX=		2.4
WX_PREMK=	yes

.include &lt;bsd.port.pre.mk&gt;

.if exists(${WX_CONFIG})
VER_STR!=	${WX_CONFIG} --release

PLIST_SUB+=	VERSION="${VER_STR}"
.endif</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">The <span class="application">wxWidgets</span> variables can
	  be safely used in commands when they are inside targets
	  without the need of <code class="varname">WX_PREMK</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-additional-config-args"></a>6.20.8. Additional <code class="command">configure</code>
	Arguments</h3></div></div></div><p>Some GNU <code class="command">configure</code> scripts cannot
	find <span class="application">wxWidgets</span> with just the
	<code class="literal">WX_CONFIG</code> environment variable set,
	requiring additional arguments.
	<code class="varname">WX_CONF_ARGS</code> can be used for
	provide them.</p><div class="table"><a id="wx-conf-args-values"></a><div class="table-title">Table 6.32. Legal Values for
	  <code class="varname">WX_CONF_ARGS</code></div><div class="table-contents"><table summary="Legal Values for&#10;&#9;  WX_CONF_ARGS" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Possible value</th><th>Resulting argument</th></tr></thead><tbody><tr><td><code class="literal">absolute</code></td><td><code class="literal">--with-wx-config=${WX_CONFIG}</code></td></tr><tr><td><code class="literal">relative</code></td><td><code class="literal">--with-wx=${LOCALBASE}
		  --with-wx-config=${WX_CONFIG:T}</code></td></tr></tbody></table></div></div><br class="table-break" /></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-lua"></a>6.21. Using <span class="application">Lua</span></h2></div></div></div><p>This section describes the status of the
      <span class="application">Lua</span> libraries in the ports tree and
      its integration with the ports system.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="lua-introduction"></a>6.21.1. Introduction</h3></div></div></div><p>There are many versions of the
	<span class="application">Lua</span> libraries and corresponding
	interpreters, which conflict between them (install files
	under the same name).  In the ports tree this problem has
	been solved by installing each version under a different
	name using version number suffixes.</p><p>The obvious disadvantage of this is that each
	application has to be modified to find the expected version.
	But it can be solved by adding some additional flags to the
	compiler and linker.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="lua-version"></a>6.21.2. Version Selection</h3></div></div></div><p>A port using <span class="application">Lua</span> only needs to
	have this line:</p><pre class="programlisting">USES=	lua</pre><p>If a specific version of Lua is needed, instructions on
	how to select it are given in the <a class="link" href="#uses-lua"><code class="literal">USES=lua</code></a> part
	of <a class="xref" href="#uses-values">Chapter 15, <em>Values of
    <code class="varname">USES</code></em></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="lua-defined-variables"></a>6.21.3. Defined Variables</h3></div></div></div><p>These variables are available in the port.</p><div class="table"><a id="using-lua-variables-ports"></a><div class="table-title">Table 6.33. Variables Defined for Ports That Use
	  <span class="application">Lua</span></div><div class="table-contents"><table summary="Variables Defined for Ports That Use&#10;&#9;  Lua" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="varname">LUA_VER</code></td><td>The <span class="application">Lua</span> version that
		is going to be used (for example,
		<code class="literal">5.1</code>)</td></tr><tr><td><code class="varname">LUA_VER_STR</code></td><td>The <span class="application">Lua</span> version
		without the dots (for example,
		<code class="literal">51</code>)</td></tr><tr><td><code class="varname">LUA_PREFIX</code></td><td>The prefix where <span class="application">Lua</span>
		(and components) is installed</td></tr><tr><td><code class="varname">LUA_SUBDIR</code></td><td>The directory under
		<code class="filename">${PREFIX}/bin</code>,
		<code class="filename">${PREFIX}/share</code> and
		<code class="filename">${PREFIX}/lib</code> where
		<span class="application">Lua</span> is installed</td></tr><tr><td><code class="varname">LUA_INCDIR</code></td><td>The directory where
		<span class="application">Lua</span> and
		<span class="application">tolua</span> header files are
		installed</td></tr><tr><td><code class="varname">LUA_LIBDIR</code></td><td>The directory where
		<span class="application">Lua</span> and
		<span class="application">tolua</span> libraries are
		installed</td></tr><tr><td><code class="varname">LUA_MODLIBDIR</code></td><td>The directory where
		<span class="application">Lua</span> module libraries
		(<code class="filename">.so</code>) are installed</td></tr><tr><td><code class="varname">LUA_MODSHAREDIR</code></td><td>The directory where
		<span class="application">Lua</span> modules
		(<code class="filename">.lua</code>) are installed</td></tr><tr><td><code class="varname">LUA_PKGNAMEPREFIX</code></td><td>The package name prefix used by
		<span class="application">Lua</span> modules</td></tr><tr><td><code class="varname">LUA_CMD</code></td><td>The path to the <span class="application">Lua</span>
		interpreter</td></tr><tr><td><code class="varname">LUAC_CMD</code></td><td>The path to the <span class="application">Lua</span>
		compiler</td></tr></tbody></table></div></div><br class="table-break" /></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-iconv"></a>6.22. Using <code class="command">iconv</code></h2></div></div></div><p>After 2013-10-08 (<a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254273"><span class="svnref">254273</span></a>),
      FreeBSD  10-CURRENT and newer versions have a native
      <code class="command">iconv</code> in the operating system.  On earlier
      versions, <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/converters/libiconv/pkg-descr">converters/libiconv</a>
      was used as a dependency.</p><p>For software that needs <code class="command">iconv</code>, define
      <code class="literal">USES=iconv</code>.  FreeBSD versions before
      10-CURRENT on 2013-08-13 (<a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254273"><span class="svnref">254273</span></a>) do
      not have a native <code class="command">iconv</code>.  On these earlier
      versions, a dependency on
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/converters/libiconv/pkg-descr">converters/libiconv</a> will be
      added automatically.</p><p>When a port defines <code class="literal">USES=iconv</code>, these
      variables will be available:</p><div class="informaltable"><table border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Variable name</th><th>Purpose</th><th>Value before FreeBSD 10-CURRENT
	      <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254273"><span class="svnref">254273</span></a> (2013-08-13)</th><th>Value after FreeBSD 10-CURRENT
	      <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254273"><span class="svnref">254273</span></a> (2013-08-13)</th></tr></thead><tbody><tr><td><code class="varname">ICONV_CMD</code></td><td>Directory where the <code class="command">iconv</code>
	      binary resides</td><td><code class="literal">${LOCALBASE}/bin/iconv</code></td><td><code class="filename">/usr/bin/iconv</code></td></tr><tr><td><code class="varname">ICONV_LIB</code></td><td><code class="command">ld</code> argument to link to
	      <code class="filename">libiconv</code> (if needed)</td><td><code class="literal">-liconv</code></td><td>(empty)</td></tr><tr><td><code class="varname">ICONV_PREFIX</code></td><td>Directory where the <code class="command">iconv</code>
	      implementation resides (useful for configure
	      scripts)</td><td><code class="literal">${LOCALBASE}</code></td><td><code class="filename">/usr</code></td></tr><tr><td><code class="varname">ICONV_CONFIGURE_ARG</code></td><td>Preconstructed configure argument for
	      configure scripts</td><td><code class="literal">--with-libiconv-prefix=${LOCALBASE}</code></td><td>(empty)</td></tr><tr><td><code class="varname">ICONV_CONFIGURE_BASE</code></td><td>Preconstructed configure argument for
	      configure scripts</td><td><code class="literal">--with-libiconv=${LOCALBASE}</code></td><td>(empty)</td></tr></tbody></table></div><p>These two examples automatically populate the variables
      with the correct value for systems using
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/converters/libiconv/pkg-descr">converters/libiconv</a> or the
      native <code class="command">iconv</code> respectively:</p><div class="example"><a id="iconv-simple-use"></a><div class="example-title">Example 6.14. Simple <code class="command">iconv</code> Usage</div><div class="example-contents"><pre class="programlisting">USES=		iconv
LDFLAGS+=	-L${LOCALBASE}/lib ${ICONV_LIB}</pre></div></div><br class="example-break" /><div class="example"><a id="iconv-configure-use"></a><div class="example-title">Example 6.15. <code class="command">iconv</code> Usage with
	<code class="command">configure</code></div><div class="example-contents"><pre class="programlisting">USES=		iconv
CONFIGURE_ARGS+=${ICONV_CONFIGURE_ARG}</pre></div></div><br class="example-break" /><p>As shown above, <code class="varname">ICONV_LIB</code> is empty when
      a native <code class="command">iconv</code> is present.  This can be
      used to detect the native <code class="command">iconv</code> and respond
      appropriately.</p><p>Sometimes a program has an <code class="command">ld</code> argument
      or search path hardcoded in a <code class="filename">Makefile</code> or
      configure script.  This approach can be used to solve that
      problem:</p><div class="example"><a id="iconv-reinplace"></a><div class="example-title">Example 6.16. Fixing Hardcoded <code class="literal">-liconv</code></div><div class="example-contents"><pre class="programlisting">USES=		iconv

post-patch:
	@${REINPLACE_CMD} -e 's/-liconv/${ICONV_LIB}/' ${WRKSRC}/Makefile</pre></div></div><br class="example-break" /><p>In some cases it is necessary to set alternate values or
      perform operations depending on whether there is a native
      <code class="command">iconv</code>.
      <code class="filename">bsd.port.pre.mk</code> must be included before
      testing the value of <code class="varname">ICONV_LIB</code>:</p><div class="example"><a id="iconv-conditional"></a><div class="example-title">Example 6.17. Checking for Native <code class="command">iconv</code>
	Availability</div><div class="example-contents"><pre class="programlisting">USES=		iconv

.include &lt;bsd.port.pre.mk&gt;

post-patch:
.if empty(ICONV_LIB)
	# native iconv detected
	@${REINPLACE_CMD} -e 's|iconv||' ${WRKSRC}/Config.sh
.endif

.include &lt;bsd.port.post.mk&gt;</pre></div></div><br class="example-break" /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-xfce"></a>6.23. Using Xfce</h2></div></div></div><p>Ports that need <span class="application">Xfce</span> libraries or
      applications set <code class="literal">USES=xfce</code>.</p><p>Specific <span class="application">Xfce</span> library and
      application dependencies are set with values assigned to
      <code class="varname">USE_XFCE</code>.  They are defined in
      <code class="filename">/usr/ports/Mk/Uses/xfce.mk</code>.  The possible
      values are:</p><div class="variablelist"><div class="variablelist-title">Values of <code class="varname">USE_XFCE</code></div><dl class="variablelist"><dt><span class="term">garcon</span></dt><dd><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/garcon/pkg-descr">sysutils/garcon</a></p></dd><dt><span class="term">libexo</span></dt><dd><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/libexo/pkg-descr">x11/libexo</a></p></dd><dt><span class="term">libgui</span></dt><dd><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/libxfce4gui/pkg-descr">x11-toolkits/libxfce4gui</a></p></dd><dt><span class="term">libmenu</span></dt><dd><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/libxfce4menu/pkg-descr">x11/libxfce4menu</a></p></dd><dt><span class="term">libutil</span></dt><dd><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/libxfce4util/pkg-descr">x11/libxfce4util</a></p></dd><dt><span class="term">panel</span></dt><dd><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-wm/xfce4-panel/pkg-descr">x11-wm/xfce4-panel</a></p></dd><dt><span class="term">thunar</span></dt><dd><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fm/thunar/pkg-descr">x11-fm/thunar</a></p></dd><dt><span class="term">xfconf</span></dt><dd><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/xfce4-conf/pkg-descr">x11/xfce4-conf</a></p></dd></dl></div><div class="example"><a id="use-xfce"></a><div class="example-title">Example 6.18. <code class="varname">USES=xfce</code> Example</div><div class="example-contents"><pre class="programlisting">USES=		xfce
USE_XFCE=	libmenu</pre></div></div><br class="example-break" /><div class="example"><a id="use-xfce-gtk3"></a><div class="example-title">Example 6.19. Using Xfce's Own GTK3 Widgets</div><div class="example-contents"><p>In this example, the ported application uses the
	<span class="application">GTK3</span>-specific widgets <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/libxfce4menu/pkg-descr">x11/libxfce4menu</a> and <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/xfce4-conf/pkg-descr">x11/xfce4-conf</a>.</p><pre class="programlisting">USES=		xfce:gtk3
USE_XFCE=	libmenu xfconf</pre></div></div><br class="example-break" /><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">Xfce</span> components included this
	way will automatically include any dependencies they need.  It
	is no longer necessary to specify the entire list.  If the
	port only needs <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-wm/xfce4-panel/pkg-descr">x11-wm/xfce4-panel</a>, use:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">USES=		xfce
USE_XFCE=	panel</pre><p xmlns="http://www.w3.org/1999/xhtml">There is no need to list the components <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-wm/xfce4-panel/pkg-descr">x11-wm/xfce4-panel</a> needs itself like
	this:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">USES=		xfce
USE_XFCE=	libexo libmenu libutil panel</pre><p xmlns="http://www.w3.org/1999/xhtml">However, <span class="application">Xfce</span> components and
	non-<span class="application">Xfce</span> dependencies of the port
	must be included explicitly.  Do not count on an
	<span class="application">Xfce</span> component to provide a
	sub-dependency other than itself for the main port.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-mozilla"></a>6.24. Using Mozilla</h2></div></div></div><div class="table"><a id="using-mozilla-variables"></a><div class="table-title">Table 6.34. Variables for Ports That Use Mozilla</div><div class="table-contents"><table summary="Variables for Ports That Use Mozilla" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">USE_GECKO</code></td><td>Gecko backend the port can handle.  Possible
	      values: <code class="literal">libxul</code>
	      (<code class="filename">libxul.so</code>),
	      <code class="literal">seamonkey</code>
	      (<code class="filename">libgtkembedmoz.so</code>, deprecated,
	      must not be used any more).</td></tr><tr><td><code class="varname">USE_FIREFOX</code></td><td>The port requires Firefox as a runtime
	      dependency.  Possible values: <code class="literal">yes</code>
	      (get default version), <code class="literal">40</code>,
	      <code class="literal">36</code>, <code class="literal">35</code>.  Default
	      dependency is on version
	      <code class="literal">40</code>.</td></tr><tr><td><code class="varname">USE_FIREFOX_BUILD</code></td><td>The port requires Firefox as a buildtime
	      dependency.  Possible values: see USE_FIREFOX.  This
	      automatically sets USE_FIREFOX and assigns the same
	      value.</td></tr><tr><td><code class="varname">USE_SEAMONKEY</code></td><td>The port requires SeaMonkey as a runtime
	      dependency.  Possible values: <code class="literal">yes</code>
	      (get default version), <code class="literal">20</code>,
	      <code class="literal">11</code> (deprecated, must not be used
	      any more).  Default dependency is on version
	      <code class="literal">20</code>.</td></tr><tr><td><code class="varname">USE_SEAMONKEY_BUILD</code></td><td>The port requires SeaMonkey as a buildtime
	      dependency.  Possible values: see USE_SEAMONKEY.  This
	      automatically sets USE_SEAMONKEY and assigns the same
	      value.</td></tr><tr><td><code class="varname">USE_THUNDERBIRD</code></td><td>The port requires Thunderbird as a runtime
	      dependency.  Possible values: <code class="literal">yes</code>
	      (get default version), <code class="literal">31</code>,
	      <code class="literal">30</code> (deprecated, must not be used
	      any more).  Default dependency is on version
	      <code class="literal">31</code>.</td></tr><tr><td><code class="varname">USE_THUNDERBIRD_BUILD</code></td><td>The port requires Thunderbird as a buildtime
	      dependency.  Possible values: see USE_THUNDERBIRD.
	      This automatically sets USE_THUNDERBIRD and assigns
	      the same value.</td></tr></tbody></table></div></div><br class="table-break" /><p>A complete list of available variables can be found in
      <code class="filename">/usr/ports/Mk/bsd.gecko.mk</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-databases"></a>6.25. Using Databases</h2></div></div></div><div class="table"><a id="using-databases-variables"></a><div class="table-title">Table 6.35. Variables for Ports Using Databases</div><div class="table-contents"><table summary="Variables for Ports Using Databases" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Means</th></tr></thead><tbody><tr><td><code class="varname">USE_BDB</code></td><td>If variable is set to <code class="literal">yes</code>,
	      add dependency on
	      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/databases/db5/pkg-descr">databases/db5</a>
	      port.  The variable may also be set to values: 48, 5
	      or 6.  It is possible to declare a range of acceptable
	      values, <code class="varname">USE_BDB</code>=48+ will find the
	      highest installed version, and fall back to 4.8 if
	      nothing else is installed.
	      <code class="varname">WANT_BDB_VER</code> will always build this
	      port with a specific version of the Berkely DB.
	      <code class="varname">INVALID_BDB_VER</code> can be used to
	      specify a version that cannot be used.</td></tr><tr><td><code class="varname">USE_MYSQL</code></td><td>If the variable is set to <code class="literal">yes</code>,
	      add a dependency on the <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/databases/mysql56-client/pkg-descr">databases/mysql56-client</a> port.
	      An associated variable,
	      <code class="varname">WANT_MYSQL_VER</code>, may be set to
	      values such as 51, 55, or 60.  Additionally to
	      specify use of Percona, use 56p, or for MariaDB, use
	      53m, 55m or 100m.</td></tr><tr><td><code class="varname">USE_PGSQL</code></td><td>If set to <code class="literal">yes</code>, add dependency
	      on <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/databases/postgresql93-client/pkg-descr">databases/postgresql93-client</a>
	      port.  An associated variable,
	      <code class="varname">WANT_PGSQL_VER</code>, may be set to
	      values such as 84, 90, 91, 92, 93 or 94.  It is
	      possible to declare a minimum or maximum value;
	      <code class="varname">WANT_PGSQL_VER</code>= <code class="literal">
	      90+</code> will cause the port to depend on a
	      minimum version of 9.0.</td></tr><tr><td><code class="varname">USE_SQLITE</code></td><td>If set to <code class="literal">yes</code>, add
	      dependency on
	      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/databases/sqlite3/pkg-descr">databases/sqlite3</a>
	      port.  The variable may also be set to 3 or 2, to add
	      a dependency on 3.x or 2.x, respectively.</td></tr></tbody></table></div></div><br class="table-break" /><p>More details are available in <a class="link" href="http://svnweb.FreeBSD.org/ports/head/Mk/bsd.database.mk?view=markup" target="_top">bsd.database.mk</a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="rc-scripts"></a>6.26. Starting and Stopping Services (<code class="literal">rc</code>
      Scripts)</h2></div></div></div><p><code class="filename">rc.d</code> scripts are used to start
      services on system startup, and to give administrators a
      standard way of stopping, starting and restarting the service.
      Ports integrate into the system <code class="filename">rc.d</code>
      framework.  Details on its usage can be found in <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/configtuning-rcd.html" target="_top">the
	rc.d Handbook chapter</a>.  Detailed explanation of
      the available commands is provided in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> and
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.subr&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.subr</span>(8)</span></a>.  Finally, there is
      <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/rc-scripting" target="_top">an
	article</a> on practical aspects of
      <code class="filename">rc.d</code> scripting.</p><p>With a mythical port called
      <em class="replaceable"><code>doorman</code></em>, which needs to start a
      <em class="replaceable"><code>doormand</code></em> daemon.  Add the following
      to the <code class="filename">Makefile</code>:</p><pre class="programlisting">USE_RC_SUBR=	<em class="replaceable"><code>doormand</code></em></pre><p>Multiple scripts may be listed and will be installed.
      Scripts must be placed in the <code class="filename">files</code>
      subdirectory and a <code class="literal">.in</code> suffix must be added
      to their filename.  Standard <code class="varname">SUB_LIST</code>
      expansions will be ran against this file.  Use of the
      <code class="literal">%%PREFIX%%</code> and
      <code class="literal">%%LOCALBASE%%</code> expansions is strongly
      encouraged as well.  More on <code class="varname">SUB_LIST</code> in
      <a class="link" href="#using-sub-files" title="8.5. Making Use of SUB_FILES and SUB_LIST">the relevant
	section</a>.</p><p>As of FreeBSD 6.1-RELEASE, local
      <code class="filename">rc.d</code> scripts (including those installed
      by ports) are included in the overall <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rcorder</span>(8)</span></a> of the
      base system.</p><p>An example simple <code class="filename">rc.d</code> script to start
      the doormand daemon:</p><pre class="programlisting">#!/bin/sh

# $FreeBSD$
#
# PROVIDE: <em class="replaceable"><code>doormand</code></em>
# REQUIRE: LOGIN
# KEYWORD: shutdown
#
# Add these lines to /etc/rc.conf.local or /etc/rc.conf
# to enable this service:
#
# <em class="replaceable"><code>doormand</code></em>_enable (bool):	Set to NO by default.
#				Set it to YES to enable <em class="replaceable"><code>doormand</code></em>.
# <em class="replaceable"><code>doormand</code></em>_config (path):	Set to %%PREFIX%%/etc/<em class="replaceable"><code>doormand/doormand.cf</code></em>
#				by default.

. /etc/rc.subr

name=<em class="replaceable"><code>doormand</code></em>
rcvar=<em class="replaceable"><code>doormand</code></em>_enable

load_rc_config $name

: ${<em class="replaceable"><code>doormand</code></em>_enable:="NO"}
: ${<em class="replaceable"><code>doormand</code></em>_config="%%PREFIX%%/etc/<em class="replaceable"><code>doormand/doormand.cf</code></em>"}

command=%%PREFIX%%/sbin/${name}
pidfile=/var/run/${name}.pid

command_args="<em class="replaceable"><code>-p $pidfile -f $doormand_config</code></em>"

run_rc_command "$1"</pre><p>Unless there is a very good reason to start the service
      earlier, or it runs as a particular user (other than root), all
      ports scripts must use:</p><pre class="programlisting">REQUIRE: LOGIN</pre><p>If the startup script launches a daemon that must be
      shutdown, the following will trigger a stop of the service on
      system shutdown:</p><pre class="programlisting">KEYWORD: shutdown</pre><p>If the script is not starting a persistent service this is
      not necessary.</p><p>For optional configuration elements the "="
      style of default variable assignment is preferable to the
      ":=" style here, since the former sets a default
      value only if the variable is unset, and the latter sets one
      if the variable is unset <span class="emphasis"><em>or</em></span> null.  A user
      might very well include something like:</p><pre class="programlisting"><em class="replaceable"><code>doormand</code></em>_flags=""</pre><p>in their <code class="filename">rc.conf.local</code>, and a
      variable substitution using ":=" would
      inappropriately override the user's intention.  The
      <code class="literal">_enable</code> variable is not optional,
      and must use the ":" for the default.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rc-scripts-checklist"></a>6.26.1. Pre-Commit Checklist</h3></div></div></div><p>Before contributing a port with an
	<code class="filename">rc.d</code> script, and more importantly,
	before committing one, please consult this
	checklist to be sure that it is ready.</p><p>The <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/rclint/pkg-descr">devel/rclint</a>
	port can check for most of these, but it is not a
	substitute for proper review.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>If this is a new file, does it have a
	    <code class="filename">.sh</code> extension?  If so, that
	    must be changed to just <code class="filename"><em class="replaceable"><code>file</code></em>.in</code>
	    since <code class="filename">rc.d</code> files may not end
	    with that extension.</p></li><li class="step"><p>Does the file have a
	    <code class="literal">$FreeBSD$</code> tag?</p></li><li class="step"><p>Do the name of the file (minus
	    <code class="filename">.in</code>), the
	    <code class="literal">PROVIDE</code> line, and
	    <code class="literal">$</code><em class="replaceable"><code>name</code></em>
	    all match?  The file name matching
	    <code class="literal">PROVIDE</code> makes debugging easier,
	    especially for <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rcorder</span>(8)</span></a> issues.  Matching the
	    file name and
	    <code class="literal">$</code><em class="replaceable"><code>name</code></em>
	    makes it easier to figure out which variables are
	    relevant in <code class="filename">rc.conf[.local]</code>.  It is
	    also a policy
	    for all new scripts, including those in the base
	    system.</p></li><li class="step"><p>Is the <code class="literal">REQUIRE</code> line set to
	    <code class="literal">LOGIN</code>?  This is mandatory for scripts
	    that run as a non-root user.  If it runs as root, is
	    there a good reason for it to run prior to
	    <code class="literal">LOGIN</code>?  If not, it must run after
	    so that local scrips can be loosely grouped to a point in
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rcorder</span>(8)</span></a> after most everything in the base is
	    already running.</p></li><li class="step"><p>Does the script start a persistent service?  If so,
	    it must have <code class="literal">KEYWORD:
	      shutdown</code>.</p></li><li class="step"><p>Make sure there is no
	    <code class="literal">KEYWORD: FreeBSD</code> present.  This has
	    not been necessary or desirable for years.  It is also
	    an indication that the new script was copy/pasted from
	    an old script, so extra caution must be given to the
	    review.</p></li><li class="step"><p>If the script uses an interpreted language like
	    <code class="command">perl</code>, <code class="command">python</code>, or
	    <code class="command">ruby</code>, make certain that
	    <code class="varname">command_interpreter</code> is set
	    appropriately, for example, for <span class="application">Perl</span>,
	    by adding <code class="literal">PERL=${PERL}</code> to
	    <code class="varname">SUB_LIST</code> and using
	    <code class="literal">%%PERL%%</code>.  Otherwise,</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service <em class="replaceable"><code>name</code></em> stop</code></strong></pre><p>will probably not work properly.  See
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=service&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">service</span>(8)</span></a> for more information.</p></li><li class="step"><p>Have all occurrences of
	    <code class="filename">/usr/local</code> been replaced with
	    <code class="literal">%%PREFIX%%</code>?</p></li><li class="step"><p>Do the default variable assignments come after
	    <code class="function">load_rc_config</code>?</p></li><li class="step"><p>Are there default assignments to empty strings?
	    They should be removed, but double-check that the option
	    is documented in the comments at the top of the
	    file.</p></li><li class="step"><p>Are things that are set in variables actually used
	    in the script?</p></li><li class="step"><p>Are options listed in the default
	    <em class="replaceable"><code>name</code></em><code class="varname">_flags</code>
	    things that are actually mandatory?  If so, they must
	    be in <code class="varname">command_args</code>.  The
	    <code class="option">-d</code> option is a red flag (pardon the
	    pun) here, since it is usually the option to
	    &#8220;daemonize&#8221; the process, and therefore is
	    actually mandatory.</p></li><li class="step"><p><code class="varname"><em class="replaceable"><code>name</code></em>_flags</code>
	    must never be included in
	    <code class="varname">command_args</code> (and vice versa,
	    although that error is less common).</p></li><li class="step"><p>Does the script execute any code unconditionally?
	    This is frowned on.  Usually these things must be
	    dealt with through a
	    <code class="function">start_precmd</code>.</p></li><li class="step"><p>All boolean tests must use the
	    <code class="function">checkyesno</code> function.  No
	    hand-rolled tests for <code class="literal">[Yy][Ee][Ss]</code>,
	    etc.</p></li><li class="step"><p>If there is a loop (for example, waiting for
	    something to start) does it have a counter to terminate
	    the loop?  We do not want the boot to be stuck forever
	    if there is an error.</p></li><li class="step"><p>Does the script create files or directories that
	    need specific permissions, for example, a
	    <code class="filename">pid</code> that needs to be owned by
	    the user that runs the process?  Rather than the
	    traditional <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=touch&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">touch</span>(1)</span></a>/<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chown</span>(8)</span></a>/<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a>
	    routine, consider using <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=install&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">install</span>(1)</span></a> with the proper
	    command line arguments to do the whole procedure with
	    one step.</p></li></ol></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-and-groups"></a>6.27. Adding Users and Groups</h2></div></div></div><p>Some ports require a particular user account to be present, usually
      for daemons that run as that user.  For these ports, choose a
      <span class="emphasis"><em>unique</em></span> UID from 50 to 999 and register it in
      <code class="filename">ports/UIDs</code> (for users) and
      <code class="filename">ports/GIDs</code> (for groups).  The unique identification
      should be the same for users and groups.</p><p>Please include a patch against these two files when
      requiring a new user or group to be created for the
      port.</p><p>Then use <code class="varname">USERS</code> and
      <code class="varname">GROUPS</code> in
      <code class="filename">Makefile</code>, and the user will be
      automatically created when installing the port.</p><pre class="programlisting">USERS=	pulse
GROUPS=	pulse pulse-access pulse-rt</pre><p>The current list of reserved UIDs and GIDs can be found
      in <code class="filename">ports/UIDs</code> and
      <code class="filename">ports/GIDs</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="requiring-kernel-sources"></a>6.28. Ports That Rely on Kernel Sources</h2></div></div></div><p>Some ports (such as kernel loadable modules) need the
      kernel source files so that the port can compile.  Here is the
      correct way to determine if the user has them
      installed:</p><pre class="programlisting">USES=	kmod</pre><p>Apart from this check, the <code class="literal">kmod</code> feature
      takes care of most items that these ports need to take into
      account.</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist"></a>Chapter 7. Advanced <code class="filename">pkg-plist</code> Practices</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="sect1"><a href="#plist-sub">7.1. Changing <code class="filename">pkg-plist</code> Based on Make
      Variables</a></span></dt><dt><span class="sect1"><a href="#plist-cleaning">7.2. Empty Directories</a></span></dt><dt><span class="sect1"><a href="#plist-config">7.3. Configuration Files</a></span></dt><dt><span class="sect1"><a href="#plist-dynamic">7.4. Dynamic Versus Static Package List</a></span></dt><dt><span class="sect1"><a href="#plist-autoplist">7.5. Automated Package List Creation</a></span></dt><dt><span class="sect1"><a href="#plist-keywords">7.6. Expanding Package List with Keywords</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="plist-sub"></a>7.1. Changing <code class="filename">pkg-plist</code> Based on Make
      Variables</h2></div></div></div><p>Some ports, particularly the <code class="literal">p5-</code> ports,
      need to change their <code class="filename">pkg-plist</code> depending on
      what options they are configured with (or version of
      <code class="literal">perl</code>, in the case of <code class="literal">p5-</code>
      ports).  To make this easy, any instances in
      <code class="filename">pkg-plist</code> of <code class="literal">%%OSREL%%</code>,
      <code class="literal">%%PERL_VER%%</code>, and
      <code class="literal">%%PERL_VERSION%%</code> will be substituted
      appropriately.  The value of <code class="literal">%%OSREL%%</code> is the
      numeric revision of the operating system (for example,
      <code class="literal">4.9</code>).  <code class="literal">%%PERL_VERSION%%</code>
      and <code class="literal">%%PERL_VER%%</code> is the full version number
      of <code class="command">perl</code> (for example, <code class="literal">5.8.9</code>).
      Several other
      <code class="literal">%%<em class="replaceable"><code>VARS</code></em>%%</code> related
      to port's documentation files are described in <a class="link" href="#install-documentation" title="5.15.4. Install Additional Documentation">the relevant
	section</a>.</p><p>To make other substitutions, set
      <code class="varname">PLIST_SUB</code> with a list of
      <code class="literal"><em class="replaceable"><code>VAR</code></em>=<em class="replaceable"><code>VALUE</code></em></code>
      pairs and instances of
      <code class="literal">%%<em class="replaceable"><code>VAR</code></em>%%</code> will be
      substituted with <em class="replaceable"><code>VALUE</code></em> in
      <code class="filename">pkg-plist</code>.</p><p>For instance, if a port installs many files
      in a version-specific subdirectory, use a placeholder for the
      version so that <code class="filename">pkg-plist</code> does not have to
      be regenerated every time the port is updated.  For
      example:</p><pre class="programlisting">OCTAVE_VERSION=	${PORTREVISION}
PLIST_SUB=	OCTAVE_VERSION=${OCTAVE_VERSION}</pre><p>in the <code class="filename">Makefile</code> and use
      <code class="literal">%%OCTAVE_VERSION%%</code> wherever the version shows
      up in <code class="filename">pkg-plist</code>.  When
      the port is upgraded, it will not be necessary to edit dozens (or in some
      cases, hundreds) of lines in
      <code class="filename">pkg-plist</code>.</p><p>If files are installed conditionally on the options
      set in the port, the usual way of handling it is prefixing
      <code class="filename">pkg-plist</code> lines with a
      <code class="literal">%%OPT%%</code> for lines needed when the option is
      enabled, or <code class="literal">%%NO_OPT%%</code> when the option is
      disabled, and adding <code class="literal">OPTIONS_SUB=yes</code> to the
      <code class="filename">Makefile</code>.  See <a class="xref" href="#options_sub" title="5.12.3.1. OPTIONS_SUB">Section 5.12.3.1, &#8220;<code class="varname">OPTIONS_SUB</code>&#8221;</a> for more information.</p><p>For instance, if there are files that are only installed
      when the <code class="literal">X11</code> option is enabled, and
      <code class="filename">Makefile</code> has:</p><pre class="programlisting">OPTIONS_DEFINE=	X11
OPTIONS_SUB=	yes</pre><p>In <code class="filename">pkg-plist</code>, put
      <code class="literal">%%X11%%</code> in front of the lines only being
      installed when the option is enabled, like this :</p><pre class="programlisting">%%X11%%bin/foo-gui</pre><p>This substitution will be done between the
      <code class="buildtarget">pre-install</code> and
      <code class="buildtarget">do-install</code> targets, by reading from
      <code class="filename">PLIST</code> and writing to
      <code class="filename">TMPPLIST</code> (default:
      <code class="filename">WRKDIR/.PLIST.mktmp</code>).  So if the port
      builds <code class="filename">PLIST</code> on the fly, do so in or before
      <code class="buildtarget">pre-install</code>.  Also, if the port
      needs to edit the resulting file, do so in
      <code class="buildtarget">post-install</code> to a file named
      <code class="filename">TMPPLIST</code>.</p><p>Another way of modifying a port's packing list is based on
      setting the variables <code class="varname">PLIST_FILES</code> and
      <code class="varname">PLIST_DIRS</code>.  The value of each variable is
      regarded as a list of pathnames to write to
      <code class="filename">TMPPLIST</code> along with
      <code class="filename">PLIST</code> contents.  Names listed in
      <code class="varname">PLIST_FILES</code> and
      <code class="varname">PLIST_DIRS</code> are subject to
      <code class="literal">%%<em class="replaceable"><code>VAR</code></em>%%</code>
      substitution as described above.  Except for that, names from
      <code class="varname">PLIST_FILES</code> will appear in the final packing
      list unchanged, while <code class="literal">@dir</code>
      will be prepended to names from
      <code class="varname">PLIST_DIRS</code>.  To take effect,
      <code class="varname">PLIST_FILES</code> and
      <code class="varname">PLIST_DIRS</code> must be set before
      <code class="filename">TMPPLIST</code> is written, that is, in
      <code class="buildtarget">pre-install</code> or earlier.</p><p>From time to time, using <code class="varname">OPTIONS_SUB</code>
      is not enough.  In those cases, adding a specific
      <code class="literal"><em class="replaceable"><code>TAG</code></em></code> to <code class="varname">PLIST_SUB</code>
      inside the <code class="filename">Makefile</code> with a special
      value of <code class="literal">@comment</code>, makes package tools to
      ignore the line.  For instance, if some files are only installed
      when the <code class="literal">X11</code> option is on and the
      architecture is <code class="literal">i386</code>:</p><pre class="programlisting">.include &lt;bsd.port.pre.mk&gt;

.if ${PORT_OPTIONS:MX11} &amp;&amp; ${ARCH} == "i386"
PLIST_SUB+=	X11I386=""
.else
PLIST_SUB+=	X11I386="@comment "
.endif</pre></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="plist-cleaning"></a>7.2. Empty Directories</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-dir-cleaning"></a>7.2.1. Cleaning Up Empty Directories</h3></div></div></div><p>When being de-installed, a port has to remove empty
	directories it created.  Most of these directories are removed
	automatically by <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg</span>(8)</span></a>, but for directories created
	outside of <code class="filename">${PREFIX}</code>, or empty
	directories, some more work needs to be done.  This is usually
	accomplished by adding <code class="literal">@dir</code> lines for those
	directories.  Subdirectories must be deleted before deleting
	parent directories.</p><pre class="programlisting">[...]
@dir /var/games/oneko/saved-games
@dir /var/games/oneko</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-dir-empty"></a>7.2.2. Creating Empty Directories</h3></div></div></div><p>Empty directories created during port installation need
	special attention.  They must be present when the package
	is created.   If they are not created by the port code, create
	them in the <code class="filename">Makefile</code>:</p><pre class="programlisting">post-stage:
	@${MKDIR} ${STAGEDIR}${PREFIX}/some/directory</pre><p>Add the directory to <code class="filename">pkg-plist</code>
	like any other.  For example:</p><pre class="programlisting">@dir some/directory</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="plist-config"></a>7.3. Configuration Files</h2></div></div></div><p>If the port installs configuration files to
      <code class="filename">PREFIX/etc</code> (or elsewhere) do
      <span class="emphasis"><em>not</em></span> list them in
      <code class="filename">pkg-plist</code>.  That will cause
      <code class="command">pkg delete</code> to remove files that have been carefully
      edited by the user, and a re-installation will wipe them
      out.</p><p>Instead, install sample files with a
      <code class="filename"><em class="replaceable"><code>filename</code></em>.sample</code>
      extension. The <code class="literal">@sample</code> macro automates this,
      see <a class="xref" href="#plist-keywords-sample" title="7.6.7. @sample file">Section 7.6.7, &#8220;<code class="literal">@sample</code>
	<em class="replaceable"><code>file</code></em>&#8221;</a> for what it does
      exactly.  For each sample file, add a line to
      <code class="filename">pkg-plist</code>:</p><pre class="programlisting">@sample etc/orbit.conf.sample</pre><p>If there is a very good reason not to install a working
      configuration file by default, only list the sample filename in
      <code class="filename">pkg-plist</code>, without the <code class="literal">@sample
	</code> part, and add a <a class="link" href="#porting-message" title="8.1. pkg-message">message</a> pointing out that the
      user must copy and edit the file before the software will
      work.</p><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">When a port installs its configuration in a subdirectory
	of <code class="filename">${PREFIX}/etc</code>, use
	<code class="varname">ETCDIR</code>, which defaults to
	<code class="literal">${PREFIX}/etc/${PORTNAME}</code>, it can be
	overridden in the ports <code class="filename">Makefile</code> if there
	is a convention for the port to use some other directory.  The
	<code class="literal">%%ETCDIR%%</code> macro will be used in its
	stead in <code class="filename">pkg-plist</code>.</p></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">The sample configuration files should always have the
	<code class="filename">.sample</code> suffix.  If for some historical
	reason using the standard suffix is not possible, use
	this construct:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">@unexec if cmp -s %D/etc/orbit.conf-dist %D/etc/orbit.conf; then rm -f %D/etc/orbit.conf; fi
etc/orbit.conf-dist
@exec if [ ! -f %D/etc/orbit.conf ] ; then cp -p %D/%F %B/orbit.conf; fi</pre><p xmlns="http://www.w3.org/1999/xhtml">The order of these lines is important.  On deinstallation,
	the sample file is compared to the actual configuration file.
	If these files are identical, no changes have been made by the
	user and the actual file can be safely deleted.  Because the
	sample file must still exist for the comparison, the
	<code class="literal">@unexec</code> line comes before the sample
	configuration file name.  On installation, if an actual
	configuration file is not already present, the sample file is
	copied to the actual file.  The sample file must be present
	before it can be copied, so the <code class="literal">@exec</code> line
	comes after the sample configuration file name.</p><p xmlns="http://www.w3.org/1999/xhtml">To debug any issues, temporarily remove the
	<code class="literal">-s</code> flag to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cmp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cmp</span>(1)</span></a> for more
	output.</p><p xmlns="http://www.w3.org/1999/xhtml">See <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg-create&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg-create</span>(8)</span></a> for more information on
	<code class="literal">%D</code> and related substitution markers.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="plist-dynamic"></a>7.4. Dynamic Versus Static Package List</h2></div></div></div><p>A <span class="emphasis"><em>static package list</em></span> is a package
      list which is available in the Ports Collection either as
      <code class="filename">pkg-plist</code> (with or without variable
      substitution), or embedded into the
      <code class="filename">Makefile</code> via
      <code class="varname">PLIST_FILES</code> and
      <code class="varname">PLIST_DIRS</code>.  Even if the contents are
      auto-generated by a tool or a target in the Makefile
      <span class="emphasis"><em>before</em></span> the inclusion into the Ports
      Collection by a committer (for example, using <code class="command">make
	makeplist&gt;</code>), this is still considered a static list,
      since it is possible to examine it without having to download or
      compile the distfile.</p><p>A <span class="emphasis"><em>dynamic package list</em></span> is a package
      list which is generated at the time the port is compiled based
      upon the files and directories which are installed.  It is not
      possible to examine it before the source code of the ported
      application is downloaded and compiled, or after running a
      <code class="literal">make clean</code>.</p><p>While the use of dynamic package lists is not forbidden,
      maintainers should use static package lists wherever possible,
      as it enables users to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=grep&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">grep</span>(1)</span></a> through available ports to
      discover, for example, which port installs a certain file.
      Dynamic lists should be primarily used for complex ports where
      the package list changes drastically based upon optional
      features of the port (and thus maintaining a static package list
      is infeasible), or ports which change the package list based
      upon the version of dependent software used.  For example, ports which
      generate docs with <span class="application">Javadoc</span>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="plist-autoplist"></a>7.5. Automated Package List Creation</h2></div></div></div><p>First, make sure the port is almost complete, with only
      <code class="filename">pkg-plist</code> missing.  Running <code class="command">make
	makeplist</code> will show an example for
      <code class="filename">pkg-plist</code>.  The output of
      <code class="buildtarget">makeplist</code> must be double checked for
      correctness as it tries to automatically guess a few things, and
      can get it wrong.</p><p>User configuration files should be installed as
      <code class="filename"><em class="replaceable"><code>filename</code></em>.sample</code>,
      as it is described in <a class="xref" href="#plist-config" title="7.3. Configuration Files">Section 7.3, &#8220;Configuration Files&#8221;</a>.
      <code class="filename">info/dir</code> must not be listed and
      appropriate <code class="filename">install-info</code> lines must be
      added as noted in the <a class="link" href="#makefile-info" title="5.11. Info Files">info
	files</a> section.  Any libraries installed by the port
      must be listed as specified in the <a class="link" href="#porting-shlibs" title="6.3. Shared Libraries">shared libraries</a>
      section.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="plist-keywords"></a>7.6. Expanding Package List with Keywords</h2></div></div></div><p>All keywords can also take optional arguments in
      parentheses.  The arguments are owner, group, and mode.  This
      argument is used on the file or directory referenced.
      To change the owner, group, and mode of a configuration file,
      use:</p><pre class="programlisting">@sample(games,games,640) etc/config.sample</pre><p>The arguments are optional.  If only the group and mode
      need to be changed, use:</p><pre class="programlisting">@sample(,games,660) etc/config.sample</pre><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-desktop-file-utils"></a>7.6.1. <code class="literal">@desktop-file-utils</code></h3></div></div></div><p>Will run <code class="command">update-desktop-database -q</code>
	after installation and deinstallation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-fcfontsdir"></a>7.6.2. <code class="literal">@fcfontsdir</code>
	<em class="replaceable"><code>directory</code></em></h3></div></div></div><p>Add a <code class="literal">@dir</code> entry for the
	directory passed as an argument, and run <code class="command">fc-cache
	  -s</code>, <code class="command">mkfontscale</code> and
	<code class="command">mkfontdir</code> on that directory after
	installation and deinstallation.  Additionally, on
	deinstallation, it removes the
	<code class="filename">fonts.scale</code> and
	<code class="filename">fonts.dir</code> cache files if they are
	empty.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-glib-schemas"></a>7.6.3. <code class="literal">@glib-schemas</code></h3></div></div></div><p>Runs <code class="command">glib-compile-schemas</code> on
	installation and deinstallation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-info"></a>7.6.4. <code class="literal">@info</code>
	<em class="replaceable"><code>file</code></em></h3></div></div></div><p>Add the file passed as argument to the plist, and updates
	the info document index on installation and deinstallation.
	Additionally, it removes the index if empty on
	deinstallation.  This should never be used manually, but
	always through <code class="varname">INFO</code>.  See <a class="xref" href="#makefile-info" title="5.11. Info Files">Section 5.11, &#8220;Info Files&#8221;</a> for more information.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-kld"></a>7.6.5. <code class="literal">@kld</code>
	<em class="replaceable"><code>directory</code></em></h3></div></div></div><p>Runs <code class="command">kldxref</code> on the directory
	on installation and deinstallation.  Additionally, on
	deinstallation, it will remove the directory if empty.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-rmtry"></a>7.6.6. <code class="literal">@rmtry</code>
	<em class="replaceable"><code>file</code></em></h3></div></div></div><p>Will remove the file on deinstallation, and not give an
	error if the file is not there.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-sample"></a>7.6.7. <code class="literal">@sample</code>
	<em class="replaceable"><code>file</code></em></h3></div></div></div><p>Add the file passed as argument to the plist.</p><p>On installation, check for a <span class="quote">&#8220;<span class="quote">real</span>&#8221;</span> file with
	just the base name (the name without the
	<code class="filename">.sample</code> extension).  If the real file is
	not found, copy the sample file to the base file name.  On
	deinstallation, remove the configuration file if it has not
	been modified.  See <a class="xref" href="#plist-config" title="7.3. Configuration Files">Section 7.3, &#8220;Configuration Files&#8221;</a> for more
	information.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-shared-mime-info"></a>7.6.8. <code class="literal">@shared-mime-info</code>
	<em class="replaceable"><code>directory</code></em></h3></div></div></div><p>Runs <code class="command">update-mime-database</code> on the
	directory on installation and deinstallation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-shell"></a>7.6.9. <code class="literal">@shell</code>
	<em class="replaceable"><code>file</code></em></h3></div></div></div><p>Add the file passed as argument to the plist.</p><p>On installation, add the full path to
	<em class="replaceable"><code>file</code></em> to
	<code class="filename">/etc/shells</code>, while making sure it is not
	added twice.  On deinstallation, remove it from
	<code class="filename">/etc/shells</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-base"></a>7.6.10. Base Keywords</h3></div></div></div><p>There are a few keywords that are hardcoded, and
	documented in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg-create&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg-create</span>(8)</span></a>.  For the sake of
	completeness, they are also documented here.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-base-empty"></a>7.6.10.1. <code class="literal">@</code>
	  [<em class="replaceable"><code>file</code></em>]</h4></div></div></div><p>The empty keyword is a placeholder to use when the
	  file's owner, group, or mode need to be changed.  For
	  example, to set the group of the file to
	  <code class="literal">games</code> and add the setgid bit, add:</p><pre class="programlisting">@(,games,2755) sbin/daemon</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-base-cwd"></a>7.6.10.2. <code class="literal">@cwd</code>
	  [<em class="replaceable"><code>directory</code></em>] (Deprecated)</h4></div></div></div><p>Set the internal directory pointer to point to
	  directory.  All subsequent filenames are assumed relative to
	  this directory.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-base-exec"></a>7.6.10.3. <code class="literal">@exec</code>
	  <em class="replaceable"><code>command</code></em></h4></div></div></div><p>Execute <em class="replaceable"><code>command</code></em> as part of
	  the unpacking process.  If command contains any of these
	  sequences somewhere in it, they are expanded
	  inline.  For these examples, assume that
	  <code class="literal">@cwd</code> is set to
	  <code class="filename">/usr/local</code> and the last
	  extracted file was <code class="filename">bin/emacs</code>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">%F</code></span></dt><dd><p>Expand to the last filename extracted (as
		specified).  In the example case
		<code class="filename">bin/emacs</code>.</p></dd><dt><span class="term"><code class="literal">%D</code></span></dt><dd><p>Expand to the current directory prefix, as set
		with <code class="literal">@cwd</code>.  In the example case
		<code class="filename">/usr/local</code>.</p></dd><dt><span class="term"><code class="literal">%B</code></span></dt><dd><p>Expand to the basename of the fully qualified
		filename, that is, the current directory prefix plus
		the last filespec, minus the trailing filename.  In
		the example case, that would be
		<code class="filename">/usr/local/bin</code>.</p></dd><dt><span class="term"><code class="literal">%f</code></span></dt><dd><p>Expand to the filename part of the fully qualified
		name, or the converse of <code class="literal">%B</code>.  In
		the example case,
		<code class="filename">emacs</code>.</p></dd></dl></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-base-unexec"></a>7.6.10.4. <code class="literal">@unexec</code>
	  <em class="replaceable"><code>command</code></em></h4></div></div></div><p>Execute <em class="replaceable"><code>command</code></em> as part of
	  the deinstallation process.  Expansion of special
	  <code class="literal">%</code> sequences is the same as for
	  <code class="literal">@exec</code>.  This command is not executed
	  during the package add, as <code class="literal">@exec</code> is, but
	  rather when the package is deleted.  This is useful for
	  deleting links and other ancillary files that were created
	  as a result of adding the package, but not directly known to
	  the package's table of contents (and hence not automatically
	  removable).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-base-mode"></a>7.6.10.5. <code class="literal">@mode</code>
	  <em class="replaceable"><code>mode</code></em></h4></div></div></div><p>Set default permission for all subsequently extracted
	  files to <em class="replaceable"><code>mode</code></em>.  Format is the
	  same as that used by <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a>.  Use without an arg to
	  set back to default permissions (mode of the file while
	  being packed).</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">This must be a numeric mode, like
	    <code class="literal">644</code>, <code class="literal">4755</code>, or
	    <code class="literal">600</code>.  It cannnot be a relative mode
	    like <code class="literal">u+s</code>.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-base-owner"></a>7.6.10.6. <code class="literal">@owner</code>
	  <em class="replaceable"><code>user</code></em></h4></div></div></div><p>Set default ownership for all subsequent files to
	  <em class="replaceable"><code>user</code></em>.  Use without an argument to
	  set back to default ownership (<code class="systemitem">root</code>).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-base-group"></a>7.6.10.7. <code class="literal">@group</code>
	  <em class="replaceable"><code>group</code></em></h4></div></div></div><p>Set default group ownership for all subsequent files to
	  <em class="replaceable"><code>group</code></em>.  Use without an arg to set
	  back to default group ownership (<code class="systemitem">wheel</code>).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-base-comment"></a>7.6.10.8. <code class="literal">@comment</code>
	  <em class="replaceable"><code>string</code></em></h4></div></div></div><p>This line is ignored when packing.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-base-dir"></a>7.6.10.9. <code class="literal">@dir</code>
	  <em class="replaceable"><code>directory</code></em></h4></div></div></div><p>Declare directory name.  By default, directories created
	  under <code class="varname">PREFIX</code> by a package installation
	  are automatically removed.  Use this when an empty directory
	  under <code class="varname">PREFIX</code> needs to be created, or when
	  the directory needs to have non default owner, group, or
	  mode.  Directories outside of <code class="varname">PREFIX</code> need
	  to be registered.  For example,
	  <code class="filename">/var/db/${PORTNAME}</code> needs to have a
	  <code class="literal">@dir</code> entry whereas
	  <code class="filename">${PREFIX}/share/${PORTNAME}</code> does not if
	  it contains files or uses the default owner, group, and
	  mode.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-base-dirrm"></a>7.6.10.10. <code class="literal">@dirrm</code>
	  <em class="replaceable"><code>directory</code></em> (Deprecated)</h4></div></div></div><p>Declare directory name to be deleted at deinstall time.
	  By default, directories created under
	  <code class="varname">PREFIX</code> by a package installation are
	  deleted when the package is deinstalled.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-base-dirrmtry"></a>7.6.10.11. <code class="literal">@dirrmtry</code>
	  <em class="replaceable"><code>directory</code></em> (Deprecated)</h4></div></div></div><p>Declare directory name to be removed, as for
	  <code class="literal">@dirrm</code>, but does not issue a warning if
	  the directory cannot be removed.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-keywords-creating-new"></a>7.6.11. Creating New Keywords</h3></div></div></div><p>Package list files can be extended by keywords that are
	defined in the <code class="filename">${PORTSDIR}/Keywords</code>
	directory.  The settings for each keyword are stored in a
	<acronym class="acronym">UCL</acronym> file named
	<code class="filename"><em class="replaceable"><code>keyword</code></em>.ucl</code>.
	The file must contain at least one of the next
	sections:</p><div class="variablelist"><dl class="variablelist"><dt><a id="plist-keywords-attributes"></a><span class="term"><code class="literal">attributes</code></span></dt><dd><p>Changes the owner, group, or mode used by the
	      keyword.  Contains an associative array where the
	      possible keys are <code class="literal">owner</code>,
	      <code class="literal">group</code>, and <code class="literal">mode</code>.
	      The values are, respectively, a user name, a group name,
	      and a file mode.  For example:</p><pre class="programlisting">attributes: { owner: "games", group: "games", mode: 0555 }</pre></dd><dt><a id="plist-keywords-action"></a><span class="term"><code class="literal">action</code></span></dt><dd><p>Defines what happens to the keyword's parameter.
	      Contains an array where the possible values are:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">setprefix</code></span></dt><dd><p>Set the prefix for the next plist
		    entries.</p></dd><dt><span class="term"><code class="literal">dir</code></span></dt><dd><p>Register a directory to be created on
		    install and removed on deinstall.</p></dd><dt><span class="term"><code class="literal">dirrm</code></span></dt><dd><p>Register a directory to be deleted on
		    deinstall.  Deprecated.</p></dd><dt><span class="term"><code class="literal">dirrmtry</code></span></dt><dd><p>Register a directory to try and deleted on
		    deinstall.  Deprecated.</p></dd><dt><span class="term"><code class="literal">file</code></span></dt><dd><p>Register a file.</p></dd><dt><span class="term"><code class="literal">setmode</code></span></dt><dd><p>Set the mode for the next plist
		    entries.</p></dd><dt><span class="term"><code class="literal">setowner</code></span></dt><dd><p>Set the owner for the next plist
		    entries.</p></dd><dt><span class="term"><code class="literal">setgroup</code></span></dt><dd><p>Set the group for the next plist
		    entries.</p></dd><dt><span class="term"><code class="literal">comment</code></span></dt><dd><p>Does not do anything, equivalent to not
		    entering an <code class="literal">action</code>
		    section.</p></dd><dt><span class="term"><code class="literal">ignore_next</code></span></dt><dd><p>Ignore the next entry in the plist.</p></dd></dl></div></dd><dt><a id="plist-keywords-pre-post"></a><span class="term"><code class="literal">pre-install</code>, </span><span class="term"><code class="literal">post-install</code>, </span><span class="term"><code class="literal">pre-deinstall</code>, </span><span class="term"><code class="literal">post-deinstall</code>, </span><span class="term"><code class="literal">pre-upgrade</code>, </span><span class="term"><code class="literal">post-upgrade</code></span></dt><dd><p>These keywords contains a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sh</span>(1)</span></a> script to be
	      executed before or after installation, deinstallation,
	      or upgrade of the package.  In addition to the usual
	      <code class="literal">@exec</code>
	      <code class="literal">%<em class="replaceable"><code>foo</code></em></code>
	      placeholders described in <a class="xref" href="#plist-keywords-base-exec" title="7.6.10.3. @exec command">Section 7.6.10.3, &#8220;<code class="literal">@exec</code>
	  <em class="replaceable"><code>command</code></em>&#8221;</a>, there is a new
	      one, <code class="literal">%@</code>, which represents the
	      argument of the keyword.</p></dd></dl></div><div class="example"><a id="plist-keywords-fc-example"></a><div class="example-title">Example 7.1. Example of a <code class="literal">@dirrmtryecho</code>
	  Keyword</div><div class="example-contents"><p>This keyword does two things, it adds a
	  <code class="literal">@dirrmtry
	    <em class="replaceable"><code>directory</code></em></code> line to the
	  packing list, and echoes the fact that the directory is
	  removed when deinstalling the package.</p><pre class="programlisting">actions: [dirrmtry]
post-deinstall: &lt;&lt;EOD
  echo "Directory %D/%@ removed."
EOD</pre></div></div><br class="example-break" /><div class="example"><a id="plist-keywords-sample-example"></a><div class="example-title">Example 7.2. Real Life Example, How <code class="literal">@sample</code>
	  is Implemented</div><div class="example-contents"><p>This keyword does three things, it adds the
	  <em class="replaceable"><code>filename</code></em> passed as an argument to
	  <code class="literal">@sample</code> to the packing list, it adds to
	  the <code class="literal">post-install</code> script instructions to
	  copy the sample to the actual configuration file if it does
	  not already exist, and it adds to the
	  <code class="literal">post-deinstall</code> instructions to remove the
	  configuration file if it has not been modified.</p><pre class="programlisting">actions: [file]
post-install: &lt;&lt;EOD
  case "%@" in
  /*) sample_file="%@" ;;
  *) sample_file="%D/%@" ;;
  esac
  target_file="${sample_file%.sample}"
  if ! [ -f "${target_file}" ]; then
    /bin/cp -p "${sample_file}" "${target_file}"
  fi
EOD
pre-deinstall: &lt;&lt;EOD
  case "%@" in
  /*) sample_file="%@" ;;
  *) sample_file="%D/%@" ;;
  esac
  target_file="${sample_file%.sample}"
  if cmp -s "${target_file}" "${sample_file}"; then
    rm -f "${target_file}"
  else
    echo "You may need to manually remove ${target_file} if it's no longer needed."
  fi
EOD</pre></div></div><br class="example-break" /></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pkg-files"></a>Chapter 8. <code class="filename">pkg-*</code></h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="sect1"><a href="#porting-message">8.1. <code class="filename">pkg-message</code></a></span></dt><dt><span class="sect1"><a href="#pkg-install">8.2. <code class="filename">pkg-install</code></a></span></dt><dt><span class="sect1"><a href="#pkg-deinstall">8.3. <code class="filename">pkg-deinstall</code></a></span></dt><dt><span class="sect1"><a href="#pkg-names">8.4. Changing the Names of
      <code class="filename">pkg-<em class="replaceable"><code>*</code></em></code></a></span></dt><dt><span class="sect1"><a href="#using-sub-files">8.5. Making Use of <code class="varname">SUB_FILES</code> and
      <code class="varname">SUB_LIST</code></a></span></dt></dl></div><p>There are some tricks we have not mentioned yet about the
    <code class="filename">pkg-<em class="replaceable"><code>*</code></em></code> files that
    come in handy sometimes.</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-message"></a>8.1. <code class="filename">pkg-message</code></h2></div></div></div><p>To display a message when the package is installed,
      place the message in <code class="filename">pkg-message</code>.  This
      capability is often useful to display additional installation
      steps to be taken after a <code class="command">pkg install</code> or to
      display licensing information.</p><p>When some lines about the build-time knobs or warnings
      have to be displayed, use <code class="varname">ECHO_MSG</code>.
      <code class="filename">pkg-message</code> is only for
      post-installation steps.  Likewise, the distinction between
      <code class="varname">ECHO_MSG</code> is for printing
      informational text to the screen and <code class="varname">ECHO_CMD</code>
      is for
      command pipelining:</p><pre class="programlisting">update-etc-shells:
	@${ECHO_MSG} "updating /etc/shells"
	@${CP} /etc/shells /etc/shells.bak
	@( ${GREP} -v ${PREFIX}/bin/bash /etc/shells.bak; \
		${ECHO_CMD} ${PREFIX}/bin/bash) &gt;/etc/shells
	@${RM} /etc/shells.bak</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Do not add an entry for <code class="filename">pkg-message</code>
	in <code class="filename">pkg-plist</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pkg-install"></a>8.2. <code class="filename">pkg-install</code></h2></div></div></div><p>If the port needs to execute commands when the binary
      package is installed with <code class="command">pkg add</code> or
      <code class="command">pkg install</code>, use
      <code class="filename">pkg-install</code>.  This script will
      automatically be added to the package.  It will be run twice by
      <code class="command">pkg</code>, the first time as <code class="literal">${SH}
	pkg-install ${PKGNAME} PRE-INSTALL</code> before the
      package is installed, and the second time as
      <code class="literal">${SH} pkg-install ${PKGNAME}
	POST-INSTALL</code> after it has been installed.
      <code class="literal">$2</code> can be tested to determine which
      mode the script is being run in.  The <code class="envar">PKG_PREFIX</code>
      environmental variable will be set to the package installation
      directory.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pkg-deinstall"></a>8.3. <code class="filename">pkg-deinstall</code></h2></div></div></div><p>This script executes when a package is removed.</p><p>This script will be run twice by <code class="command">pkg
	delete</code> The first time as <code class="literal">${SH}
	pkg-deinstall ${PKGNAME} DEINSTALL</code> before the
      port is de-installed and the second time as
      <code class="literal">${SH} pkg-deinstall ${PKGNAME}
	POST-DEINSTALL</code> after the port has been de-installed.
      <code class="literal">$2</code> can be tested to determine which
      mode the script is being run in.  The <code class="envar">PKG_PREFIX</code>
      environmental variable will be set to the package installation
      directory</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pkg-names"></a>8.4. Changing the Names of
      <code class="filename">pkg-<em class="replaceable"><code>*</code></em></code></h2></div></div></div><p>All the names of
      <code class="filename">pkg-<em class="replaceable"><code>*</code></em></code> are
      defined using variables that can be changed in the
      <code class="filename">Makefile</code> if needed.  This is especially
      useful when sharing the same
      <code class="filename">pkg-<em class="replaceable"><code>*</code></em></code> files
      among several ports or when it is necessary to write to one of these files.
      See <a class="link" href="#porting-wrkdir" title="12.2. WRKDIR">writing to places other than
	<code class="varname">WRKDIR</code></a> for why it is a bad idea to
      write directly into
      the directory containing the
      <code class="filename">pkg-<em class="replaceable"><code>*</code></em></code>
      files.</p><p>Here is a list of variable names and their default values.
      (<code class="varname">PKGDIR</code> defaults to
      <code class="varname">${MASTERDIR}</code>.)</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Default value</th></tr></thead><tbody><tr><td><code class="varname">DESCR</code></td><td><code class="literal">${PKGDIR}/pkg-descr</code></td></tr><tr><td><code class="varname">PLIST</code></td><td><code class="literal">${PKGDIR}/pkg-plist</code></td></tr><tr><td><code class="varname">PKGINSTALL</code></td><td><code class="literal">${PKGDIR}/pkg-install</code></td></tr><tr><td><code class="varname">PKGDEINSTALL</code></td><td><code class="literal">${PKGDIR}/pkg-deinstall</code></td></tr><tr><td><code class="varname">PKGMESSAGE</code></td><td><code class="literal">${PKGDIR}/pkg-message</code></td></tr></tbody></table></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-sub-files"></a>8.5. Making Use of <code class="varname">SUB_FILES</code> and
      <code class="varname">SUB_LIST</code></h2></div></div></div><p><code class="varname">SUB_FILES</code> and
      <code class="varname">SUB_LIST</code> are useful for dynamic
      values in port files, such as the installation
      <code class="varname">PREFIX</code> in
      <code class="filename">pkg-message</code>.</p><p><code class="varname">SUB_FILES</code> specifies a list
      of files to be automatically modified.  Each
      <code class="filename"><em class="replaceable"><code>file</code></em></code> in the
      <code class="varname">SUB_FILES</code> list must have a corresponding
      <code class="filename"><em class="replaceable"><code>file</code></em>.in</code> present
      in <code class="varname">FILESDIR</code>.  A modified version will be
      created as
      <code class="filename">${WRKDIR}/<em class="replaceable"><code>file</code></em></code>.
      Files defined as a value of <code class="varname">USE_RC_SUBR</code> (or
      the deprecated <code class="varname">USE_RCORDER</code>) are automatically
      added to <code class="varname">SUB_FILES</code>.  For the files
      <code class="filename">pkg-message</code>,
      <code class="filename">pkg-install</code>, and
      <code class="filename">pkg-deinstall</code>, the corresponding Makefile
      variable is automatically set to point to the processed
      version.</p><p><code class="varname">SUB_LIST</code> is a list of
      <code class="literal">VAR=VALUE</code> pairs.  For each pair,
      <code class="literal">%%VAR%%</code> will be replaced with
      <code class="literal">VALUE</code> in each file listed in
      <code class="varname">SUB_FILES</code>.  Several common pairs are
      automatically defined: <code class="varname">PREFIX</code>,
      <code class="varname">LOCALBASE</code>, <code class="varname">DATADIR</code>,
      <code class="varname">DOCSDIR</code>, <code class="varname">EXAMPLESDIR</code>,
      <code class="varname">WWWDIR</code>, and <code class="varname">ETCDIR</code>.  Any
      line beginning with <code class="literal">@comment </code> will be deleted
      from resulting files after a variable substitution.</p><p>This example replaces
      <code class="literal">%%ARCH%%</code> with the system architecture in a
      <code class="filename">pkg-message</code>:</p><pre class="programlisting">SUB_FILES=	pkg-message
SUB_LIST=	ARCH=${ARCH}</pre><p>Note that for this example,
      <code class="filename">pkg-message.in</code> must exist in
      <code class="varname">FILESDIR</code>.</p><p>Example of a good
      <code class="filename">pkg-message.in</code>:</p><pre class="programlisting">Now it is time to configure this package.
Copy %%PREFIX%%/share/examples/putsy/%%ARCH%%.conf into your home directory
as .putsy.conf and edit it.</pre></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="testing"></a>Chapter 9. Testing the Port</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="sect1"><a href="#make-describe">9.1. Running <code class="command">make describe</code></a></span></dt><dt><span class="sect1"><a href="#testing-portlint">9.2. Portlint</a></span></dt><dt><span class="sect1"><a href="#testing-porttools">9.3. Port Tools</a></span></dt><dt><span class="sect1"><a href="#porting-prefix">9.4. <code class="varname">PREFIX</code> and
      <code class="varname">DESTDIR</code></a></span></dt><dt><span class="sect1"><a href="#testing-poudriere">9.5. <span class="application">Poudriere</span></a></span></dt><dt><span class="sect1"><a href="#testing-tinderbox">9.6. Tinderbox</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="make-describe"></a>9.1. Running <code class="command">make describe</code></h2></div></div></div><p>Several of the FreeBSD port maintenance tools, such as
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portupgrade&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">portupgrade</span>(1)</span></a>, rely on a database called
      <code class="filename">/usr/ports/INDEX</code> which keeps track of such
      items as port dependencies.  <code class="filename">INDEX</code> is
      created by the top-level <code class="filename">ports/Makefile</code> via
      <code class="command">make index</code>, which descends into each port
      subdirectory and executes <code class="command">make describe</code>
      there.  Thus, if <code class="command">make describe</code> fails in any
      port, no one can generate <code class="filename">INDEX</code>, and many
      people will quickly become unhappy.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">It is important to be able to generate this file no matter
	what options are present in <code class="filename">make.conf</code>, so
	please avoid doing things such as using
	<code class="literal">.error</code> statements when (for instance) a
	dependency is not satisfied.  (See
	<a class="xref" href="#dads-dot-error" title="12.15. Avoid Use of the .error Construct">Section 12.15, &#8220;Avoid Use of the <code class="literal">.error</code>
      Construct&#8221;</a>.)</p></div><p>If <code class="command">make describe</code> produces a string rather
      than an error message, everything is probably safe.  See
      <code class="filename">bsd.port.mk</code> for the meaning of the string
      produced.</p><p>Also note that running a recent version of
      <code class="command">portlint</code> (as specified in the next section)
      will cause <code class="command">make describe</code> to be run
      automatically.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="testing-portlint"></a>9.2. Portlint</h2></div></div></div><p>Do check the port with <a class="link" href="#porting-portlint" title="3.5. Checking the Port with portlint"><code class="command">portlint</code></a>
      before submitting or committing it.  <code class="command">portlint</code>
      warns about many common errors, both functional and
      stylistic.  For a new (or repocopied) port,
      <code class="command">portlint -A</code> is the most thorough; for an
      existing port, <code class="command">portlint -C</code> is
      sufficient.</p><p>Since <code class="command">portlint</code> uses heuristics to try to
      figure out errors, it can produce false positive warnings.  In
      addition, occasionally something that is flagged as a problem
      really cannot be done in any other way due to limitations in the
      ports framework.  When in doubt, the best thing to do is ask on
      <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">FreeBSD ports mailing list</a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="testing-porttools"></a>9.3. Port Tools</h2></div></div></div><p>The <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/porttools/pkg-descr">ports-mgmt/porttools</a>
      program is part of the Ports Collection.</p><p><code class="command">port</code> is the front-end script, which can
      help simplify the testing job.  Whenever a new port or an update
      to an existing one needs testing, use
      <code class="command">port test</code> to test the port, including the
      <a class="link" href="#testing-portlint" title="9.2. Portlint"><code class="command">portlint</code></a>
      checking.  This command also detects and lists any files that
      are not listed in <code class="filename">pkg-plist</code>.  For
      example:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>port test /usr/ports/net/csup</code></strong></pre></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-prefix"></a>9.4. <code class="varname">PREFIX</code> and
      <code class="varname">DESTDIR</code></h2></div></div></div><p><code class="varname">PREFIX</code> determines where the port will be
      installed.  It defaults to <code class="filename">/usr/local</code>, but
      can be set by the user to a custom path like
      <code class="filename">/opt</code>.  The port must respect the value of
      this variable.</p><p><code class="varname">DESTDIR</code>, if set by the user, determines
      the complete alternative environment, usually a jail or an
      installed system mounted somewhere other than
      <code class="filename">/</code>.  A port will actually install into
      <code class="filename">DESTDIR/PREFIX</code>, and register with the
      package database in <code class="filename">DESTDIR/var/db/pkg</code>.  As
      <code class="varname">DESTDIR</code> is handled automatically by the ports
      infrastructure with <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chroot</span>(8)</span></a>.  There is no need for
      modifications or any extra care to write
      <code class="varname">DESTDIR</code>-compliant ports.</p><p>The value of <code class="varname">PREFIX</code> will be set to
      <code class="varname">LOCALBASE</code> (defaulting to
      <code class="filename">/usr/local</code>).  If
      <code class="varname">USE_LINUX_PREFIX</code> is set,
      <code class="varname">PREFIX</code> will be <code class="varname">LINUXBASE</code>
      (defaulting to <code class="filename">/compat/linux</code>).</p><p>Avoiding hard-coded <code class="filename">/usr/local</code> paths in
      the source makes the port much more flexible and able to cater
      to the needs of other sites.  Often, this can be accomplished by
      replacing occurrences of <code class="filename">/usr/local</code>
      in the port's various <code class="filename">Makefile</code>s with
      <code class="literal">${PREFIX}</code>.  This variable is
      automatically passed down to every stage of the build and
      install processes.</p><p>Make sure the application is not installing things in
      <code class="filename">/usr/local</code> instead of
      <code class="varname">PREFIX</code>.  A quick test for such hard-coded
      paths is:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>make clean; make package PREFIX=/var/tmp/`make -V PORTNAME`</code></strong></pre><p>If anything is installed outside of
      <code class="varname">PREFIX</code>, the package creation process will
      complain that it cannot find the files.</p><p>In addition, it is worth checking the same with the stage
      directory support (see <a class="xref" href="#staging" title="6.1. Staging">Section 6.1, &#8220;Staging&#8221;</a>):</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>make stage &amp;&amp; make check-plist &amp;&amp; make stage-qa &amp;&amp; make package</code></strong></pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="buildtarget">check-plist</code> checks for files
	  missing from the plist, and files in the plist that are not
	  installed by the port.</p></li><li class="listitem"><p><code class="buildtarget">stage-qa</code> checks for common
	  problems like bad shebang, symlinks pointing outside the
	  stage directory, setuid files, and non-stripped
	  libraries...</p></li></ul></div><p>These tests will not find hard-coded paths inside the port's
      files, nor will it verify that <code class="varname">LOCALBASE</code> is
      being used to correctly refer to files from other ports.  The
      temporarily-installed port in
      <code class="filename">/var/tmp/`make -V PORTNAME`</code> must be
      tested for proper operation to make sure there are no problems
      with paths.</p><p><code class="varname">PREFIX</code> must not be set explicitly in a
      port's <code class="filename">Makefile</code>.  Users installing the port
      may have set <code class="varname">PREFIX</code> to a custom location, and
      the port must respect that setting.</p><p>Refer to programs and files from other ports with the
      variables mentioned above, not explicit pathnames.  For
      instance, if the port requires a macro <code class="literal">PAGER</code>
      to have the full pathname of <code class="command">less</code>, do not use
      a literal path of <code class="filename">/usr/local/bin/less</code>.
      Instead, use <code class="literal">${LOCALBASE}</code>:</p><pre class="programlisting">-DPAGER=\"${LOCALBASE}/bin/less\"</pre><p>The path with <code class="varname">LOCALBASE</code> is more likely to
      still work if the system administrator has moved the whole
      <code class="filename">/usr/local</code> tree somewhere else.</p><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">All these tests are done automatically when running
	<code class="command">poudriere testport</code> or <code class="command">poudriere
	  bulk -t</code>.  It is highly recommended that every
	ports contributor install it, and tests all his ports with it.
	See <a class="xref" href="#testing-poudriere" title="9.5. Poudriere">Section 9.5, &#8220;<span class="application">Poudriere</span>&#8221;</a> for more
	information.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="testing-poudriere"></a>9.5. <span class="application">Poudriere</span></h2></div></div></div><p>For a ports contributor,
      <span class="application">Poudriere</span> is one of the most
      important and helpful testing and build tools.  Its main
      features include:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Bulk building of the entire ports tree, specific subsets
	  of the ports tree, or a single port including its
	  dependencies</p></li><li class="listitem"><p>Automatic packaging of build results</p></li><li class="listitem"><p>Generation of build log files per port</p></li><li class="listitem"><p>Providing a signed <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg</span>(8)</span></a> repository</p></li><li class="listitem"><p>Testing of port builds before submitting a patch to the
	  FreeBSD bug tracker or committing to the ports tree</p></li><li class="listitem"><p>Testing for successful ports builds using different
	  options</p></li></ul></div><p>Because <span class="application">Poudriere</span> performs its
      building in a clean <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a> environment and uses
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=zfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">zfs</span>(8)</span></a> features, it has several advantages over traditional
      testing on the host system:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>No pollution of the host environment: No leftover files,
	  no accidental removals, no changes of existing configuration
	  files.</p></li><li class="listitem"><p>Verify <code class="filename">pkg-plist</code> for missing or
	  superfluous entries</p></li><li class="listitem"><p>Ports committers sometimes ask for a
	  <span class="application">Poudriere</span> log alongside a patch
	  submission to assess whether the patch is ready for
	  integration into the ports tree</p></li></ul></div><p>It is also quite straightforward to set up and use, has no
      dependencies, and will run on any supported FreeBSD release.  This
      section shows how to install, configure, and run
      <span class="application">Poudriere</span> as part of the normal
      workflow of a ports contributor.</p><p>The examples in this section show a default file layout, as
      standard in FreeBSD.  Substitute any local changes accordingly.
      The ports tree, represented by <code class="varname">${PORTSDIR}</code>,
      is located in <code class="filename">/usr/ports</code>.  Both
      <code class="varname">${LOCALBASE}</code> and <code class="varname">${PREFIX}</code>
      are <code class="filename">/usr/local</code> by default.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="testing-poudriere-installing"></a>9.5.1. Installing <span class="application">Poudriere</span></h3></div></div></div><p><span class="application">Poudriere</span> is available in the
	ports tree in <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/poudriere/pkg-descr">ports-mgmt/poudriere</a>.  It can be
	installed using <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg</span>(8)</span></a> or from ports:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install poudriere</code></strong></pre><p>or</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -C /usr/ports/ports-mgmt/poudriere install clean</code></strong></pre><p>There is also a work-in-progress version of
	<span class="application">Poudriere</span> which will eventually
	become the next release.  It is available in <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/poudriere-devel/pkg-descr">ports-mgmt/poudriere-devel</a>.  This
	development version is used for the official FreeBSD package
	builds, so it is well tested.  It often has newer interesting
	features.  A ports committer will want to use the development
	version because it is what is used in production, and has all
	the new features that will make sure everything is exactly
	right.  A contributor will not necessarily need those as the
	most important fixes are backported to released version.  The
	main reason for the use of the development version to build
	the official package is because it is faster, in a way that
	will shorten a full build from 18 hours to 17 hours when using
	a high end 32 <acronym class="acronym">CPU</acronym> server with 128GB of
	<acronym class="acronym">RAM</acronym>.  Those optimizations will not matter a
	lot when building ports on a desktop machine.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="testing-poudriere-setup"></a>9.5.2. Setting Up <span class="application">Poudriere</span></h3></div></div></div><p>The port installs a default configuration file,
	<code class="filename">/usr/local/etc/poudriere.conf</code>.  Each
	parameter is documented in the configuration file and in
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=poudriere&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">poudriere</span>(8)</span></a>.  Here is a minimal example config
	file:</p><pre class="programlisting">ZPOOL=tank
ZROOTFS=/poudriere
BASEFS=/poudriere
DISTFILES_CACHE=/usr/ports/distfiles
RESOLV_CONF=/etc/resolv.conf
FREEBSD_HOST=ftp://ftp.freebsd.org
SVN_HOST=svn0.eu.FreeBSD.org</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">ZPOOL</code></span></dt><dd><p>The name of the <acronym class="acronym">ZFS</acronym> storage pool
	      which <span class="application">Poudriere</span> shall use.
	      Must be listed in the output of <code class="command">zpool
		status</code>.</p></dd><dt><span class="term"><code class="varname">ZROOTFS</code></span></dt><dd><p>The root of
	      <span class="application">Poudriere</span>-managed file
	      systems.  This entry will cause
	      <span class="application">Poudriere</span> to create
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=zfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">zfs</span>(8)</span></a> file systems under
	      <code class="literal">tank/poudriere</code>.</p></dd><dt><span class="term"><code class="varname">BASEFS</code></span></dt><dd><p>The root mount point for
	      <span class="application">Poudriere</span> file systems.  This
	      entry will cause <span class="application">Poudriere</span> to
	      mount <code class="literal">tank/poudriere</code> to
	      <code class="literal">/poudriere</code>.</p></dd><dt><span class="term"><code class="varname">DISTFILES_CACHE</code></span></dt><dd><p>Defines where distfiles are stored.  In this
	      example, <span class="application">Poudriere</span> and the
	      host share the distfiles storage directory.  This avoids
	      downloading tarballs which are already present on the
	      system.</p></dd><dt><span class="term"><code class="varname">RESOLV_CONF</code></span></dt><dd><p>Use the host <code class="filename">/etc/resolv.conf</code>
	      inside jails for <acronym class="acronym">DNS</acronym>.  This is needed
	      so jails can resolve the <acronym class="acronym">URL</acronym>s of
	      distfiles when downloading.  It is not needed when using
	      a proxy.  Refer to the default configuration file for
	      proxy configuration.</p></dd><dt><span class="term"><code class="varname">FREEBSD_HOST</code></span></dt><dd><p>The <acronym class="acronym">FTP</acronym>/<acronym class="acronym">HTTP</acronym>
	      server to use when the jails are installed from FreeBSD
	      releases and updated with <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=freebsd-update&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">freebsd-update</span>(8)</span></a>.
	      Choose a server location which is close, for example if
	      the machine is located in Australia, use
	      <code class="literal">ftp.au.freebsd.org</code>.</p></dd><dt><span class="term"><code class="varname">SVN_HOST</code></span></dt><dd><p>The server from where jails are installed and
	      updated when using
	      <span class="application">Subversion</span>.  Also used for
	      ports tree when not using <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a>.  Again,
	      choose a nearby location.  A list of official
	      <span class="application">Subversion</span> mirrors can be
	      found in the <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/svn.html#svn-mirrors" target="_top">FreeBSD
		Handbook <span class="application">Subversion</span>
		section</a>.</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="testing-poudriere-create-jails"></a>9.5.3. Creating <span class="application">Poudriere</span>
	Jails</h3></div></div></div><p>Create the base jails which
	<span class="application">Poudriere</span> will use for
	building:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere jail -c -j 93Ramd64 -v 9.3-RELEASE -a amd64</code></strong></pre><p>Fetch a <code class="literal">9.3-RELEASE</code> for
	<code class="literal">amd64</code> from the <acronym class="acronym">FTP</acronym>
	server given by <code class="varname">FREEBSD_HOST</code> in
	<code class="filename">poudriere.conf</code>, create the zfs file
	system <code class="literal">tank/poudriere/jails/93Ramd64</code>, mount
	it on <code class="filename">/poudriere/jails/93Ramd64</code> and
	extract the <code class="literal">9.3-RELEASE</code> tarballs into this
	file system.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere jail -c -j 10i386 -v stable/10 -a i386 -m svn+https</code></strong></pre><p>Create <code class="literal">tank/poudriere/jails/10i386</code>,
	mount it on <code class="filename">/poudriere/jails/10i386</code>, then
	check out the tip of the <span class="application">Subversion</span>
	branch of <code class="literal">FreeBSD-10-STABLE</code> from
	<code class="literal">SVN_HOST</code> in
	<code class="filename">poudriere.conf</code> into
	<code class="filename">/poudriere/jails/10i386/usr/src</code>, then
	complete a <code class="buildtarget">buildworld</code> and install
	it into <code class="filename">/poudriere/jails/10i386</code>.</p><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">If a specific <span class="application">Subversion</span>
	  revision is needed, append it to the version string.  For
	  example:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere jail -c -j 10i386 -v stable/10@123456 -a i386 -m svn+https</code></strong></pre></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">While it is possible to build a newer version of FreeBSD on
	  an older version, most of the time it will not run.  For
	  example, if a <code class="literal">stable/10</code> jail is needed,
	  the host will have to run <code class="literal">stable/10</code> too.
	  Running <code class="literal">10.0-RELEASE</code> is not
	  enough.</p></div><div xmlns="" class="caution"><h3 class="admontitle">Caution: </h3><p xmlns="http://www.w3.org/1999/xhtml">The default <code class="literal">svn</code> protocol works but is
	  not very secure.  Using <code class="literal">svn+https</code> along
	  with verifying the remote server's <acronym class="acronym">SSL</acronym>
	  fingerprint is advised.  It will ensure that the files used
	  for building the jail are from a trusted source.</p></div><p>A list of jails currently known to
	<span class="application">Poudriere</span> can be shown with
	<code class="command">poudriere jail -l</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere jail -l</code></strong>
JAILNAME             VERSION              ARCH    METHOD
93Ramd64             9.3-RELEASE          amd64   ftp
10i386               10.0-STABLE          i386    svn+https</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="testing-poudriere-maintaining-jails"></a>9.5.4. Keeping <span class="application">Poudriere</span> Jails
	Updated</h3></div></div></div><p>Managing updates is very straightforward.  The
	command:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere jail -u -j <em class="replaceable"><code>JAILNAME</code></em></code></strong></pre><p>updates the specified jail to the latest version
	available.  For FreeBSD releases, update to the latest patchlevel
	with <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=freebsd-update&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">freebsd-update</span>(8)</span></a>.  For FreeBSD versions built from
	source, update to the latest
	<span class="application">Subversion</span> revision in the
	branch.</p><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">For jails employing a
	  <code class="literal">svn+<em class="replaceable"><code>*</code></em></code> method,
	  it is helpful to add <code class="command">-J
	    <em class="replaceable"><code>NumberOfParallelBuildJobs</code></em></code>
	  to speed up the build by increasing the number of parallel
	  compile jobs used.  For example, if the building machine has
	  6 <acronym class="acronym">CPU</acronym>s, use:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere jail -u -J 6 -j <em class="replaceable"><code>JAILNAME</code></em></code></strong></pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="testing-poudriere-ports-tree"></a>9.5.5. Setting Up Ports Trees for Use with
	<span class="application">Poudriere</span></h3></div></div></div><p>There are multiple ways to use ports trees in
	<span class="application">Poudriere</span>.  The most
	straightforward way is to have
	<span class="application">Poudriere</span> create a default ports
	tree for itself:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere ports -c</code></strong></pre><p>This command creates
	<code class="literal">tank/poudriere/ports/default</code>, mount it on
	<code class="filename">/poudriere/ports/default</code>, and populate it
	using <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a>.  Afterward it is included in the list
	of known ports trees:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere ports -l</code></strong>
PORTSTREE      METHOD     PATH
default        portsnap   /poudriere/ports/default</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Note that the <span class="quote">&#8220;<span class="quote">default</span>&#8221;</span> ports tree is
	  special.  Each of the build commands explained later will
	  implicitly use this ports tree unless specifically specified
	  otherwise.  To use another tree, add <code class="command">-p
	    <em class="replaceable"><code>treename</code></em></code> to the
	  commands.</p></div><p>While useful for regular bulk builds, having this default
	ports tree with the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a> method may not be the
	best way to deal with local modifications for a ports
	contributor.  As with the creation of jails, it is possible to
	use a different method for creating the ports tree.  To add an
	additional ports tree for testing local modifications and
	ports development, checking out the tree via
	<span class="application">Subversion</span> is possible:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere ports -c -m svn+https -p subversive</code></strong></pre><p>Creates <code class="literal">tank/poudriere/ports/subversive</code>
	and mounts it on
	<code class="filename">/poudriere/ports/subversive</code>.  It is then
	populated using <span class="application">Subversion</span>.
	Finally, it is added to the list of known ports trees:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere ports -l</code></strong>
PORTSTREE            METHOD     PATH
default              portsnap   /poudriere/ports/default
subversive           svn+https  /poudriere/ports/subversive</pre><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">The <code class="literal">svn</code> method allows extra
	  qualifiers to tell <span class="application">Subversion</span>
	  exactly how to fetch data.  This is explained in
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=poudriere&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">poudriere</span>(8)</span></a>.  For instance, <code class="command">poudriere ports
	    -c -m svn+ssh -p subversive</code> uses
	  <span class="application">SSH</span> for the checkout.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="testing-poudriere-ports-tree-manual"></a>9.5.6. Using Manually Managed Ports Trees with Poudriere</h3></div></div></div><p>Depending on the workflow, it can be extremely helpful to
	use ports trees which are maintained manually.  For instance,
	if there is a local copy of the ports tree in
	<code class="filename">/work/ports</code>, point
	<span class="application">Poudriere</span> to the location:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere ports -c -F -f none -M /work/ports -p development</code></strong></pre><p>This will be listed in the table of known trees:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere ports -l</code></strong>
PORTSTREE    METHOD   PATH
development  -        /work/ports</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">The dash in the <code class="literal">METHOD</code> column means
	  that <span class="application">Poudriere</span> will not update or
	  change this ports tree, ever.  It is completely up to the
	  user to maintain this tree, including all local
	  modifications that may be used for testing new ports and
	  submitting patches.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="testing-poudriere-ports-tree-updating"></a>9.5.7. Keeping Poudriere Ports Trees Updated</h3></div></div></div><p>As straightforward as with jails described earlier:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere ports -u -p <em class="replaceable"><code>PORTSTREE</code></em></code></strong></pre><p>Will update the given
	<em class="replaceable"><code>PORTSTREE</code></em>, one tree given by the
	output of <code class="command">poudriere -l</code>, to the latest
	revision available on the official servers.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ports trees without a method, see <a class="xref" href="#testing-poudriere-ports-tree-manual" title="9.5.6. Using Manually Managed Ports Trees with Poudriere">Section 9.5.6, &#8220;Using Manually Managed Ports Trees with Poudriere&#8221;</a>, cannot be
	  updated like this.  They must be updated manually by the
	  porter.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="testing-poudriere-testing-ports"></a>9.5.8. Testing Ports</h3></div></div></div><p>After jails and ports trees have been set up, the result
	of a contributor's modifications to the ports tree can be
	tested.</p><p>For example, local modifications to the <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/firefox/pkg-descr">www/firefox</a> port located in
	<code class="filename">/work/ports/www/firefox</code> can be tested in
	the previously created 9.3-RELEASE jail:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere testport -j 93Ramd64 -p development -o www/firefox</code></strong></pre><p>This will build all dependencies of
	<span class="application">Firefox</span>.  If a dependency has been
	built previously and is still up-to-date, the pre-built
	package is installed.  If a dependency has no up-to-date
	package, one will be built with default options in a jail.
	Then <span class="application">Firefox</span> itself is
	built.</p><p>The complete build of every port is logged to
	<code class="filename">/poudriere/data/logs/bulk/93Ri386-development/<em class="replaceable"><code>build-time</code></em>/logs</code>.</p><p>The directory name <code class="literal">93Ri386-development</code>
	is derived from the arguments to <code class="literal">-j</code> and
	<code class="literal">-p</code>, respectively.  For convenience, a
	symbolic link
	<code class="filename">/poudriere/data/logs/bulk/93Ri386-development/latest</code>
	is also maintained.  The link points to the latest
	<em class="replaceable"><code>build-time</code></em> directory.  Also in this
	directory is an <code class="filename">index.html</code> for observing
	the build process with a web browser.</p><p>By default, <span class="application">Poudriere</span> cleans up
	the jails and leaves log files in the directories mentioned
	above.  To ease investigation, jails can be kept running after
	the build by adding <code class="option">-i</code> to
	<code class="command">testport</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere testport -j 93Ramd64 -p development -i -o www/firefox</code></strong></pre><p>After the build completes, and regardless of whether it
	was successful, a shell is provided within the jail.  The
	shell is used to investigate further.
	<span class="application">Poudriere</span> can be told to leave the
	jail running after the build finishes with
	<code class="option">-I</code>.  <span class="application">Poudriere</span>
	will show the command to run when the jail is no longer
	needed.  It is then possible to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jexec&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jexec</span>(8)</span></a> into it:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere testport -j 93Ramd64 -p development -I -o www/firefox</code></strong>
[...]
====&gt;&gt; Installing local Pkg repository to /usr/local/etc/pkg/repos
====&gt;&gt; Leaving jail 93Ramd64-development-n running, mounted at /poudriere/data/.m/93Ramd64-development/ref for interactive run testing
====&gt;&gt; To enter jail: jexec 93Ramd64-development-n env -i TERM=$TERM /usr/bin/login -fp root
====&gt;&gt; To stop jail: poudriere jail -k -j 93Ramd64 -p development
<code class="prompt">#</code> <strong class="userinput"><code>jexec 93Ramd64-development-n env -i TERM=$TERM /usr/bin/login -fp root</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code><em class="replaceable"><code>[do some stuff in the jail]</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>poudriere jail -k -j 93Ramd64 -p development</code></strong>
====&gt;&gt; Umounting file systems</pre><p>An integral part of the FreeBSD ports build infrastructure is
	the ability to tweak ports to personal preferences with
	options.  These can be tested with
	<span class="application">Poudriere</span> as well.  Adding the
	<code class="option">-c</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere testport -c -o www/firefox</code></strong></pre><p>Presents the port configuration dialog before the port is
	built.  The ports given after <code class="option">-o</code> in the
	format
	<code class="literal"><em class="replaceable"><code>category</code></em>/<em class="replaceable"><code>portname</code></em></code>
	will use the specified options, all dependencies will use the
	default options.  Testing dependent ports with non-default
	options can be accomplished using sets, see <a class="xref" href="#testing-poudriere-sets" title="9.5.9. Using Sets">Section 9.5.9, &#8220;Using Sets&#8221;</a>.</p><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">When testing ports where <code class="filename">pkg-plist</code>
	  is altered during build depending on the selected options,
	  it is recommended to perform a test run with all options
	  selected <span class="emphasis"><em>and</em></span> one with all options
	  deselected.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="testing-poudriere-sets"></a>9.5.9. Using Sets</h3></div></div></div><p>For all actions involving builds, a so-called
	<span class="emphasis"><em>set</em></span> can be specified using <code class="literal">-z
	  <em class="replaceable"><code>setname</code></em></code>.  A set refers
	to a fully independent build.  This allows, for instance,
	usage of <code class="command">testport</code> with non-standard options
	for the dependent ports.</p><p>To use sets, <span class="application">Poudriere</span> expects
	an existing directory structure similar to
	<code class="varname">PORT_DBDIR</code>, defaults to
	<code class="filename">/var/db/ports</code> in its configuration
	directory.  This directory is then nullfs-mounted into the
	jails where the ports and their dependencies are built.
	Usually a suitable starting point can be obtained by
	recursively copying the existing <code class="varname">PORT_DBDIR</code>
	to
	<code class="filename">/usr/local/etc/poudriere.d/<em class="replaceable"><code>jailname</code></em>-<em class="replaceable"><code>portname</code></em>-<em class="replaceable"><code>setname</code></em>-options</code>.
	This is described in detail in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=poudriere&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">poudriere</span>(8)</span></a>.  For
	instance, testing <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/firefox/pkg-descr">www/firefox</a>
	in a specific set named <code class="literal">devset</code>, add the
	<code class="literal">-z devset</code> parameter to the testport
	command:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere testport -j 93Ramd64 -p development -z devset -o www/firefox</code></strong></pre><p>This will look for the existence of these directories in
	this order:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/usr/local/etc/poudriere.d/93Ramd64-development-devset-options</code></p></li><li class="listitem"><p><code class="filename">/usr/local/etc/poudriere.d/93Ramd64-devset-options</code></p></li><li class="listitem"><p><code class="filename">/usr/local/etc/poudriere.d/93Ramd64-development-options</code></p></li><li class="listitem"><p><code class="filename">/usr/local/etc/poudriere.d/devset-options</code></p></li><li class="listitem"><p><code class="filename">/usr/local/etc/poudriere.d/development-options</code></p></li><li class="listitem"><p><code class="filename">/usr/local/etc/poudriere.d/93Ramd64-options</code></p></li><li class="listitem"><p><code class="filename">/usr/local/etc/poudriere.d/options</code></p></li></ul></div><p>From this list, <span class="application">Poudriere</span>
	nullfs-mounts the <span class="emphasis"><em>first existing</em></span>
	directory tree into the <code class="filename">/var/db/ports</code>
	directory of the build jails.  Hence, all custom options are
	used for all the ports during this run of
	<code class="command">testport</code>.</p><p>After the directory structure for a set is provided, the
	options for a particular port can be altered.  For
	example:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere options -c www/firefox -z devset</code></strong></pre><p>The configuration dialog for <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/firefox/pkg-descr">www/firefox</a> is shown, and options can
	be edited.  The selected options are saved to the
	<code class="literal">devset</code> set.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">Poudriere</span> is very flexible in
	  the option configuration.  They can be set for particular
	  jails, ports trees, and for multiple ports by one command.
	  Refer to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=poudriere&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">poudriere</span>(8)</span></a> for details.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="testing-poudriere-make-conf"></a>9.5.10. Providing a Custom <code class="filename">make.conf</code>
	File</h3></div></div></div><p>Similar to using sets,
	<span class="application">Poudriere</span> will also use a custom
	<code class="filename">make.conf</code> if it is provided.  No special
	command line argument is necessary.  Instead,
	<span class="application">Poudriere</span> looks for existing files
	matching a name scheme derived from the command line.  For
	instance:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere testport -j 93Ramd64 -p development -z devset -o www/firefox</code></strong></pre><p>causes <span class="application">Poudriere</span> to check for
	the existence of these files in this order:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/usr/local/etc/poudriere.d/make.conf</code></p></li><li class="listitem"><p><code class="filename">/usr/local/etc/poudriere.d/devset-make.conf</code></p></li><li class="listitem"><p><code class="filename">/usr/local/etc/poudriere.d/development-make.conf</code></p></li><li class="listitem"><p><code class="filename">/usr/local/etc/poudriere.d/93Ramd64-make.conf</code></p></li><li class="listitem"><p><code class="filename">/usr/local/etc/poudriere.d/93Ramd64-development-make.conf</code></p></li><li class="listitem"><p><code class="filename">/usr/local/etc/poudriere.d/93Ramd64-devset-make.conf</code></p></li><li class="listitem"><p><code class="filename">/usr/local/etc/poudriere.d/93Ramd64-development-devset-make.conf</code></p></li></ul></div><p>Unlike with sets, all of the found files will be appended,
	<span class="emphasis"><em>in that order</em></span>, into one
	<code class="filename">make.conf</code> inside the build jails.  It is
	hence possible to have general make variables, intended to
	affect all builds in
	<code class="filename">/usr/local/etc/poudriere.d/make.conf</code>.
	Special variables, intended to affect only certain jails or
	sets can be set in specialised <code class="filename">make.conf</code>
	files, such as
	<code class="filename">/usr/local/etc/poudriere.d/93Ramd64-development-devset-make.conf</code>.</p><div class="example"><a id="testing-poudriere-sets-perl"></a><div class="example-title">Example 9.1. Using <code class="filename">make.conf</code> to Change Default
	  <span class="application">Perl</span></div><div class="example-contents"><p>To build a set with a non default
	  <span class="application">Perl</span> version, for example,
	  <code class="literal">5.20</code>, using a set named
	  <code class="literal">perl5-20</code>, create a
	  <code class="filename">perl5-20-make.conf</code> with this
	  line:</p><pre class="programlisting">DEFAULT_VERSIONS+= perl=5.20</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Note the use of <code class="literal">+=</code> so that if the
	    variable is already set in the default
	    <code class="filename">make.conf</code> its content will not be
	    overwritten.</p></div></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="testing-poudriere-pruning-distfiles"></a>9.5.11. Pruning no Longer Needed Distfiles</h3></div></div></div><p><span class="application">Poudriere</span> comes with a built-in
	mechanism to remove outdated distfiles that are no longer used
	by any port of a given tree.  The command</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere distclean -p <em class="replaceable"><code>portstree</code></em></code></strong></pre><p>will scan the distfiles folder,
	<code class="varname">DISTFILES_CACHE</code> in
	<code class="filename">poudriere.conf</code>, versus the ports tree
	given by the <code class="literal">-p
	  <em class="replaceable"><code>portstree</code></em></code> argument and
	prompt for removal of those distfiles.  To skip the prompt and
	remove all unused files unconditionally, the
	<code class="literal">-y</code> argument can be added:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere distclean -p <em class="replaceable"><code>portstree</code></em> -y</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="testing-tinderbox"></a>9.6. Tinderbox</h2></div></div></div><p>As an avid ports contributor, take
      a look at <span class="application">Tinderbox</span>.  It is a
      powerful system for building and testing ports.  Install
      <span class="application">Tinderbox</span> using
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/tinderbox/pkg-descr">ports-mgmt/tinderbox</a> port.  Be
      sure to read supplied documentation since the configuration is
      not trivial.</p><p>Visit the
      <a class="link" href="http://tinderbox.marcuscom.com/" target="_top">Tinderbox
	website</a> for more details.</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="port-upgrading"></a>Chapter 10. Upgrading a Port</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="sect1"><a href="#svn-diff">10.1. Using <span class="application">Subversion</span> to Make
      Patches</a></span></dt><dt><span class="sect1"><a href="#moved-and-updating-files">10.2. <code class="filename">UPDATING</code> and
      <code class="filename">MOVED</code></a></span></dt></dl></div><p>When a port is not the most recent version available from the
    authors, update the local working copy of
    <code class="filename">/usr/ports</code>. The port might have already been
    updated to the new version.</p><p>When working with more than a few ports, it will probably be
    easier to use <span class="application">Subversion</span> to keep
    the whole ports collection up-to-date, as described in the <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/ports-using.html" target="_top">Handbook</a>.
    This will have the added benefit of tracking all the port's
    dependencies.</p><p>The next step is to see if there is an update already pending.
    To do this, there are two options.  There is a searchable interface
    to the <a class="link" href="https://bugs.freebsd.org/search/" target="_top">FreeBSD
      Problem Report (PR) or bug database</a>.
    Select <code class="literal">Ports Tree</code> in
    the <code class="literal">Product</code> dropdown, and enter the name of the port in the
    <code class="literal">Summary</code> field.</p><p>However, sometimes people forget to put the name of the port
    into the Summary field in an unambiguous fashion.  In that
    case, try searching in the <code class="literal">Comment</code> field in
    the <code class="literal">Detailled Bug Information</code> section, or try
    the
    <a class="link" href="#portsmon" title="14.6. The FreeBSD Ports Monitoring System">FreeBSD Ports Monitoring System</a>
    (also known as <code class="literal">portsmon</code>).  This system
    attempts to classify port PRs by portname.  To search for PRs
    about a particular port, use the <a class="link" href="http://portsmon.FreeBSD.org/portoverview.py" target="_top">Overview
      of One Port</a>.</p><p>If there is no pending PR, the next step is to send an email
    to the port's maintainer, as shown by
    <code class="command">make maintainer</code>.  That person may already be
    working on an upgrade, or have a reason to not upgrade the port
    right now (because of, for example, stability problems of the
    new version), and there is no need to duplicate their work.  Note
    that unmaintained ports are listed with a maintainer of
    <code class="literal">ports@FreeBSD.org</code>, which is just the general
    ports mailing list, so sending mail there probably will not help
    in this case.</p><p>If the maintainer asks you to do the upgrade or there is
    no maintainer, then help out FreeBSD by
    preparing the update!  Please do this by using the
    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> command in the base system.</p><p>To create a suitable <code class="command">diff</code> for a single
    patch, copy the file that needs patching to
    <code class="filename"><em class="replaceable"><code>something</code></em>.orig</code>, save the changes to
    <code class="filename"><em class="replaceable"><code>something</code></em></code> and then create the
    patch:</p><div class="informalexample"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>diff -u <em class="replaceable"><code>something</code></em>.orig <em class="replaceable"><code>something</code></em> &gt; something.diff</code></strong></pre></div><p>Otherwise, either use the
    <code class="command">svn diff</code> method (<a class="xref" href="#svn-diff" title="10.1. Using Subversion to Make Patches">Section 10.1, &#8220;Using <span class="application">Subversion</span> to Make
      Patches&#8221;</a>)
    or copy the contents of the port to an entire different
    directory and use the result of the recursive <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>
    output of the new and old ports directories (for example, if the
    modified port directory is called <code class="filename">superedit</code>
    and the original is in our tree as
    <code class="filename">superedit.bak</code>, then save the result of
    <code class="command">diff -ruN superedit.bak superedit</code>).  Either
    unified or context diff is fine, but port committers generally
    prefer unified diffs.  Note the use of the <code class="literal">-N</code>
    option&#8212;this is the accepted way to force diff to properly
    deal with the case of new files being added or old files being
    deleted.  Before sending us the diff, please examine the output
    to make sure all the changes make sense.  (In particular, make
    sure to first clean out the work directories with
    <code class="command">make clean</code>).</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">If some files have been added, copied, moved, or removed,
      add this information to the problem report so that the committer
      picking up the patch will know what <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=svn&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">svn</span>(1)</span></a> commands to
      run.</p></div><p>To simplify common operations with patch files, use
    <code class="command">make makepatch</code> as described in <a class="xref" href="#slow-patch" title="4.4. Patching">Section 4.4, &#8220;Patching&#8221;</a>.
    Other tools exists, like
    <code class="filename">/usr/ports/Tools/scripts/patchtool.py</code>.
    Before using it, please read
    <code class="filename">/usr/ports/Tools/scripts/README.patchtool</code>.</p><p>If the port is unmaintained, and you are actively using
    it, please consider volunteering to become its
    maintainer.  FreeBSD has over 4000 ports without maintainers, and
    this is an area where more volunteers are always needed.  (For a
    detailed description of the responsibilities of maintainers,
    refer to the section in the <a class="link" href="../../../../doc/en_US.ISO8859-1/books/developers-handbook/policies.html#POLICIES-MAINTAINER" target="_top">Developer's
      Handbook</a>.)</p><p>To submit the diff, use the <a class="link" href="https://bugs.freebsd.org/submit/" target="_top">bug submit
      form</a> (category <code class="literal">Ports Tree</code>).  If the
    submitter is also
    maintaining the port, be sure to put <code class="literal">[maintainer
      update]</code> at the beginning of the
    <code class="literal">Summary</code> line.
    Please mention any added or
    deleted files in the message, as they have to be explicitly
    specified to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=svn&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">svn</span>(1)</span></a> when doing a commit.  Do not compress or
    encode the diff.</p><p>Before submitting the bug, review the <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/problem-reports/pr-writing.html" target="_top">
    Writing the problem report</a> section in the Problem
    Reports article.  It contains far more information about how to
    write useful problem reports.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">If the upgrade is motivated by security concerns or a
      serious fault in the currently committed port, please notify
      the Ports Management Team <code class="email">&lt;<a xmlns="" class="email" href="mailto:portmgr@FreeBSD.org">portmgr@FreeBSD.org</a>&gt;</code> to request immediate rebuilding and
      redistribution of the port's package.  Unsuspecting users
      of <code class="command">pkg</code> will otherwise continue to install
      the old version via <code class="command">pkg install</code> for several
      weeks.</p></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Once again, please use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> and not <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">shar</span>(1)</span></a>
      to send updates to existing ports!  This helps ports
      committers understand exactly what is being changed.</p></div><p>Now that all of that is done, read about
    how to keep up-to-date in <a class="xref" href="#keeping-up" title="Chapter 14. Keeping Up">Chapter 14, <em>Keeping Up</em></a>.</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="svn-diff"></a>10.1. Using <span class="application">Subversion</span> to Make
      Patches</h2></div></div></div><p>When possible, please submit a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=svn&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">svn</span>(1)</span></a> diff.  They
      are easier to handle than diffs between
      <span class="quote">&#8220;<span class="quote">new and old</span>&#8221;</span> directories.  It is easier
      to see what has changed, and to update the diff if
      something was modified in the Ports Collection since the
      work on it began, or if the
      committer asks for something to be fixed.  Also, a patch
      generated with <code class="command">svn diff</code> can be easily applied
      with <code class="command">svn patch</code> and will save some time to the
      committer.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd ~/my_wrkdir</code></strong> <a id="my-wrkdir"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
<code class="prompt">%</code> <strong class="userinput"><code>svn co <em class="replaceable"><code>https://svn0.us-west.FreeBSD.org</code></em>/ports/head/dns/pdnsd</code></strong> <a id="svn-FreeBSD-org"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
<code class="prompt">%</code> <strong class="userinput"><code>cd ~/my_wrkdir/pdnsd</code></strong></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#my-wrkdir"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This can be anywhere, of course.  Building
	  ports is not limited to within
	  <code class="filename">/usr/ports/</code>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#svn-FreeBSD-org"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p><a class="link" href="https://svn0.us-west.FreeBSD.org/" target="_top">svn0.us-west.FreeBSD.org</a>
	  is a public <span class="application">Subversion</span> server.
	  Select the closest mirror and verify the mirror server
	  certificate from the list of <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/svn.html#svn-mirrors" target="_top">Subversion
	    mirror sites</a>.</p></td></tr></table></div><p>While in the port directory, make any changes that are
      needed.  If adding, copying, moving, or removing a
      file, use <code class="command">svn</code> to track these changes:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>svn add <em class="replaceable"><code>new_file</code></em></code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>svn copy <em class="replaceable"><code>some_file</code></em> <em class="replaceable"><code>file_copy</code></em></code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>svn move <em class="replaceable"><code>old_name</code></em> <em class="replaceable"><code>new_name</code></em></code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>svn remove <em class="replaceable"><code>deleted_file</code></em></code></strong></pre><p>Make sure to check the port using the checklist in
      <a class="xref" href="#porting-testing" title="3.4. Testing the Port">Section 3.4, &#8220;Testing the Port&#8221;</a> and
      <a class="xref" href="#porting-portlint" title="3.5. Checking the Port with portlint">Section 3.5, &#8220;Checking the Port with
      <code class="command">portlint</code>&#8221;</a>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>svn status</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>svn update</code></strong> <a id="svn-update"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#svn-update"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This will attempt to merge the differences between the
	  patch and current repository version.  Watch the output
	  carefully.  The letter in front of each file name
	  indicates what was done with it.  See
	  <a class="xref" href="#table-svn-up" title="Table 10.1. Subversion Update File Prefixes">Table 10.1, &#8220;<span class="application">Subversion</span> Update File
	Prefixes&#8221;</a> for a complete list.</p></td></tr></table></div><div class="table"><a id="table-svn-up"></a><div class="table-title">Table 10.1. <span class="application">Subversion</span> Update File
	Prefixes</div><div class="table-contents"><table summary="Subversion Update File&#10;&#9;Prefixes" width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>U</td><td>The file was updated without problems.</td></tr><tr><td>G</td><td>The file was updated without problems (only when
	      working against a remote
	      repository).</td></tr><tr><td>M</td><td>The file had been modified, and was merged
	      without conflicts.</td></tr><tr><td>C</td><td>The file had been modified, and was merged with
	      conflicts.</td></tr></tbody></table></div></div><br class="table-break" /><p>If <code class="literal">C</code> is displayed as a result of
      <code class="command">svn update</code>, it means something changed in
      the <span class="application">Subversion</span> repository and
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=svn&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">svn</span>(1)</span></a> was not able to merge the local changes with those
      from the repository.  It is always a good idea to inspect the
      changes anyway, since <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=svn&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">svn</span>(1)</span></a> does not know anything about
      the structure of a port, so it might (and probably will) merge
      things that do not make sense.</p><p>The last step is to make a unified <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>
      of the changes:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>svn diff &gt; ../`make -VPKGNAME`.diff</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">If files have been added, copied, moved, or removed,
	include the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=svn&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">svn</span>(1)</span></a> <code class="command">add</code>,
	<code class="command">copy</code>, <code class="command">move</code>, and
	<code class="command">remove</code> commands that were used.
	<code class="command">svn move</code> or <code class="command">svn copy</code>
	must be run before the patch can be applied.  <code class="command">svn
	  add</code> or <code class="command">svn remove</code> must be run
	after the patch is applied.</p></div><p>Send the patch following the guidelines in
      <a class="xref" href="#port-upgrading" title="Chapter 10. Upgrading a Port">Chapter 10, <em>Upgrading a Port</em></a>.</p><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">The patch can be automatically generated and the PR
	pre-filled with the contact information by using
	<code class="command">port submit</code>.  See <a class="xref" href="#testing-porttools" title="9.3. Port Tools">Section 9.3, &#8220;Port Tools&#8221;</a> for more details.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="moved-and-updating-files"></a>10.2. <code class="filename">UPDATING</code> and
      <code class="filename">MOVED</code></h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="moved-and-updating-updating"></a>10.2.1. <code class="filename">/usr/ports/UPDATING</code></h3></div></div></div><p>If upgrading the port requires special steps like
      changing configuration files or running a specific program,
      it must be documented in this file.  The format of
      an entry in this file is as follows:</p><pre class="programlisting">YYYYMMDD:
  AFFECTS: users of portcategory/portname
  AUTHOR: Your name &lt;Your email address&gt;

  Special instructions</pre><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">When including exact
	<span class="application">portmaster</span>,
	<span class="application">portupgrade</span>, and/or
	<span class="application">pkg</span> instructions, please make sure
	to get the shell escaping right.  For example, do
	<span class="emphasis"><em>not</em></span> use:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg delete -g -f docbook-xml* docbook-sk* docbook[2345]??-* docbook-4*</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">As shown, the command will only work with
	<span class="application">bourne shells</span>.  Instead, use the
	form shown below, which will work with both
	<span class="application">bourne shell</span> and
	<span class="application">c-shell</span>:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg delete -g -f docbook-xml\* docbook-sk\* docbook\[2345\]\?\?-\* docbook-4\*</code></strong></pre></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">It is recommended that the AFFECTS line contains a glob
	matching all the ports affected by the entry so that automated
	tools can parse it as easily as possible.  If an update
	concerns all the existing <span class="application">BIND 9</span>
	versions the <code class="literal">AFFECTS</code> content must be
	<code class="literal">users of dns/bind9*</code>, it must
	<span class="emphasis"><em>not</em></span> be <code class="literal">users of BIND
	  9</code></p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="moved-and-updating-moved"></a>10.2.2. <code class="filename">/usr/ports/MOVED</code></h3></div></div></div><p>This file is used to
      list moved or removed ports.  Each line in the file is made
      up of the name of the port, where the port was moved, when,
      and why.  If the port was removed, the section detailing where
      it was moved can be left blank.  Each section must be
      separated by the <code class="literal">|</code> (pipe) character, like
      so:</p><pre class="programlisting">old name|new name (blank for deleted)|date of move|reason</pre><p>The date must be entered in the form
      <code class="literal">YYYY-MM-DD</code>.  New entries are added to
      the top of the file to keep it in reverse chronological order,
      with the last entry first.</p><p>If a port was removed but has since been restored,
      delete the line in this file that states that it was
      removed.</p><p>If a port was renamed and then renamed back to its original
      name, add a new one with the intermediate name to the
      old name, and remove the old entry as to not create a
      loop.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Any changes must be validated with
	<code class="command">Tools/scripts/MOVEDlint.awk</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">If using a ports directory other than <code class="filename">/usr/ports</code>, use:</p><div xmlns="http://www.w3.org/1999/xhtml" class="informalexample"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd <em class="replaceable"><code>/home/user/ports</code></em></code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>env PORTSDIR=$PWD Tools/scripts/MOVEDlint.awk</code></strong></pre></div></div></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security"></a>Chapter 11. Security</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="sect1"><a href="#security-intro">11.1. Why Security is So Important</a></span></dt><dt><span class="sect1"><a href="#security-fix">11.2. Fixing Security Vulnerabilities</a></span></dt><dt><span class="sect1"><a href="#security-notify">11.3. Keeping the Community Informed</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-intro"></a>11.1. Why Security is So Important</h2></div></div></div><p>Bugs are occasionally introduced to the software.  Arguably,
      the most dangerous of them are those opening security
      vulnerabilities.  From the technical viewpoint, such
      vulnerabilities are to be closed by exterminating the bugs that
      caused them.  However, the policies for handling mere bugs and
      security vulnerabilities are very different.</p><p>A typical small bug affects only those users who have
      enabled some combination of options triggering the bug.  The
      developer will eventually release a patch followed by a new
      version of the software, free of the bug, but the majority of
      users will not take the trouble of upgrading immediately because
      the bug has never vexed them.  A critical bug that may cause
      data loss represents a graver issue.  Nevertheless, prudent
      users know that a lot of possible accidents, besides software
      bugs, are likely to lead to data loss, and so they make backups
      of important data; in addition, a critical bug will be
      discovered really soon.</p><p>A security vulnerability is all different.  First, it may
      remain unnoticed for years because often it does not cause
      software malfunction.  Second, a malicious party can use it to
      gain unauthorized access to a vulnerable system, to destroy or
      alter sensitive data; and in the worst case the user will not
      even notice the harm caused.  Third, exposing a vulnerable
      system often assists attackers to break into other systems that
      could not be compromised otherwise.  Therefore closing a
      vulnerability alone is not enough: notify the audience
      of it in the most clear and comprehensive manner, which
      will allow them to evaluate the danger and take appropriate
      action.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-fix"></a>11.2. Fixing Security Vulnerabilities</h2></div></div></div><p>While on the subject of ports and packages, a security
      vulnerability may initially appear in the original distribution
      or in the port files.  In the former case, the original software
      developer is likely to release a patch or a new version
      instantly.  Update the port promptly
      with respect to the author's fix.  If the fix is delayed for
      some reason, either
      <a class="link" href="#dads-noinstall" title="12.13. Marking a Port Not Installable with BROKEN, FORBIDDEN, or IGNORE">mark the port as
      <code class="varname">FORBIDDEN</code></a> or introduce a patch file
      to the port.  In the case of a vulnerable port, just
      fix the port as soon as possible.  In either case, follow
      <a class="link" href="#port-upgrading" title="Chapter 10. Upgrading a Port">the standard procedure for
      submitting changes</a> unless having
      rights to commit it directly to the ports tree.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Being a ports committer is not enough to commit to an
	arbitrary port.  Remember that ports usually have maintainers,
	must be respected.</p></div><p>Please make sure that the port's revision is bumped as soon
      as the vulnerability has been closed.  That is how the users who
      upgrade installed packages on a regular basis will see they need
      to run an update.  Besides, a new package will be built and
      distributed over FTP and WWW mirrors, replacing the vulnerable
      one.  Bump <code class="varname">PORTREVISION</code> unless
      <code class="varname">PORTVERSION</code> has changed in the course of
      correcting the vulnerability.  That is, bump
      <code class="varname">PORTREVISION</code> if adding a patch file
      to the port, but do not bump it if updating the port to
      the latest software version and thus already touched
      <code class="varname">PORTVERSION</code>.  Please refer to the
      <a class="link" href="#makefile-naming-revepoch" title="5.2.2. PORTREVISION and PORTEPOCH">corresponding
	section</a> for more information.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-notify"></a>11.3. Keeping the Community Informed</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security-notify-vuxml-db"></a>11.3.1. The VuXML Database</h3></div></div></div><p>A very important and urgent step to take as early after a
	security vulnerability is discovered as possible is to notify
	the community of port users about the jeopardy.  Such
	notification serves two purposes.  First, if the danger is
	really severe it will be wise to apply an instant workaround.
	For example, stop the affected network service or even deinstall the
	port completely until the vulnerability is closed.  Second, a
	lot of users tend to upgrade installed packages only
	occasionally.  They will know from the notification that they
	<span class="emphasis"><em>must</em></span> update the package without delay as
	soon as a corrected version is available.</p><p>Given the huge number of ports in the tree, a security
	advisory cannot be issued on each incident without creating a
	flood and losing the attention of the audience when it comes
	to really serious matters.  Therefore security vulnerabilities
	found in ports are recorded in
	<a class="link" href="http://vuxml.freebsd.org/" target="_top">the FreeBSD
	  VuXML database</a>.  The Security Officer Team members
	also monitor it for issues requiring their
	intervention.</p><p>Committers can update the <acronym class="acronym">VuXML</acronym>
	database themselves, assisting the Security Officer Team
	and delivering crucial information to the community more
	quickly.  Those who are not committers or have discovered
	an exceptionally severe vulnerability should not hesitate
	to contact the Security Officer Team directly, as described
	on the <a class="link" href="http://www.freebsd.org/security/#how" target="_top">
	  FreeBSD Security Information</a> page.</p><p>The VuXML database is an <acronym class="acronym">XML</acronym> document.
	Its source file <code class="filename">vuln.xml</code> is kept right
	inside the port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/vuxml/pkg-descr">security/vuxml</a>.
	Therefore the file's full pathname will be
	<code class="filename">PORTSDIR/security/vuxml/vuln.xml</code>.  Each
	time a security vulnerability is discovered in a port, please
	add an entry for it to that file.  Until familiar with
	VuXML, the best thing to do is to find an existing entry
	fitting the case at hand, then copy it and use it as a
	template.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security-notify-vuxml-intro"></a>11.3.2. A Short Introduction to VuXML</h3></div></div></div><p>The full-blown <acronym class="acronym">XML</acronym> format is complex,
	and far beyond the scope of this book.  However, to gain basic
	insight on the structure of a VuXML entry only the notion of
	tags is needed.  XML tag names are enclosed in angle brackets.
	Each opening &lt;tag&gt; must have a matching closing
	&lt;/tag&gt;.  Tags may be nested.  If nesting, the inner tags
	must be closed before the outer ones.  There is a hierarchy of
	tags, that is, more complex rules of nesting them.  This is
	similar to HTML.  The major difference is that XML is
	e<span class="emphasis"><em>X</em></span>tensible, that is, based on defining
	custom tags.  Due to its intrinsic structure XML puts
	otherwise amorphous data into shape.  VuXML is particularly
	tailored to mark up descriptions of security
	vulnerabilities.</p><p>Now consider a realistic VuXML entry:</p><pre class="programlisting">&lt;vuln vid="f4bc80f4-da62-11d8-90ea-0004ac98a7b9"&gt; <a id="co-vx-vid"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
  &lt;topic&gt;Several vulnerabilities found in Foo&lt;/topic&gt; <a id="co-vx-top"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
  &lt;affects&gt;
    &lt;package&gt;
      &lt;name&gt;foo&lt;/name&gt; <a id="co-vx-nam"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
      &lt;name&gt;foo-devel&lt;/name&gt;
      &lt;name&gt;ja-foo&lt;/name&gt;
      &lt;range&gt;&lt;ge&gt;1.6&lt;/ge&gt;&lt;lt&gt;1.9&lt;/lt&gt;&lt;/range&gt; <a id="co-vx-rng"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
      &lt;range&gt;&lt;ge&gt;2.*&lt;/ge&gt;&lt;lt&gt;2.4_1&lt;/lt&gt;&lt;/range&gt;
      &lt;range&gt;&lt;eq&gt;3.0b1&lt;/eq&gt;&lt;/range&gt;
    &lt;/package&gt;
    &lt;package&gt;
      &lt;name&gt;openfoo&lt;/name&gt; <a id="co-vx-nm2"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span>
      &lt;range&gt;&lt;lt&gt;1.10_7&lt;/lt&gt;&lt;/range&gt; <a id="co-vx-epo"></a><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span>
      &lt;range&gt;&lt;ge&gt;1.2,1&lt;/ge&gt;&lt;lt&gt;1.3_1,1&lt;/lt&gt;&lt;/range&gt;
    &lt;/package&gt;
  &lt;/affects&gt;
  &lt;description&gt;
    &lt;body xmlns="http://www.w3.org/1999/xhtml"&gt;
      &lt;p&gt;J. Random Hacker reports:&lt;/p&gt; <a id="co-vx-bdy"></a><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span>
      &lt;blockquote
        cite="http://j.r.hacker.com/advisories/1"&gt;
        &lt;p&gt;Several issues in the Foo software may be exploited
          via carefully crafted QUUX requests.  These requests will
          permit the injection of Bar code, mumble theft, and the
          readability of the Foo administrator account.&lt;/p&gt;
      &lt;/blockquote&gt;
    &lt;/body&gt;
  &lt;/description&gt;
  &lt;references&gt; <a id="co-vx-ref"></a><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span>
    &lt;freebsdsa&gt;SA-10:75.foo&lt;/freebsdsa&gt; <a id="co-vx-fsa"></a><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span>
    &lt;freebsdpr&gt;ports/987654&lt;/freebsdpr&gt; <a id="co-vx-fpr"></a><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span>
    &lt;cvename&gt;CAN-2010-0201&lt;/cvename&gt; <a id="co-vx-cve"></a><span><img src="./imagelib/callouts/11.png" alt="11" border="0" /></span>
    &lt;cvename&gt;CAN-2010-0466&lt;/cvename&gt;
    &lt;bid&gt;96298&lt;/bid&gt; <a id="co-vx-bid"></a><span><img src="./imagelib/callouts/12.png" alt="12" border="0" /></span>
    &lt;certsa&gt;CA-2010-99&lt;/certsa&gt; <a id="co-vx-cts"></a><span><img src="./imagelib/callouts/13.png" alt="13" border="0" /></span>
    &lt;certvu&gt;740169&lt;/certvu&gt; <a id="co-vx-ctv"></a><span><img src="./imagelib/callouts/14.png" alt="14" border="0" /></span>
    &lt;uscertsa&gt;SA10-99A&lt;/uscertsa&gt; <a id="co-vx-ucs"></a><span><img src="./imagelib/callouts/15.png" alt="15" border="0" /></span>
    &lt;uscertta&gt;SA10-99A&lt;/uscertta&gt; <a id="co-vx-uct"></a><span><img src="./imagelib/callouts/16.png" alt="16" border="0" /></span>
    &lt;mlist msgid="201075606@hacker.com"&gt;http://marc.theaimsgroup.com/?l=bugtraq&amp;amp;m=203886607825605&lt;/mlist&gt; <a id="co-vx-mls"></a><span><img src="./imagelib/callouts/17.png" alt="17" border="0" /></span>
    &lt;url&gt;http://j.r.hacker.com/advisories/1&lt;/url&gt; <a id="co-vx-url"></a><span><img src="./imagelib/callouts/18.png" alt="18" border="0" /></span>
  &lt;/references&gt;
  &lt;dates&gt;
    &lt;discovery&gt;2010-05-25&lt;/discovery&gt; <a id="co-vx-dsc"></a><span><img src="./imagelib/callouts/19.png" alt="19" border="0" /></span>
    &lt;entry&gt;2010-07-13&lt;/entry&gt; <a id="co-vx-ent"></a><span><img src="./imagelib/callouts/20.png" alt="20" border="0" /></span>
    &lt;modified&gt;2010-09-17&lt;/modified&gt; <a id="co-vx-mod"></a><span><img src="./imagelib/callouts/21.png" alt="21" border="0" /></span>
  &lt;/dates&gt;
&lt;/vuln&gt;</pre><p>The tag names are supposed to be self-explanatory so we
	shall take a closer look only at fields which needs to be filled
	in:</p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-vid"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is the top-level tag of a VuXML entry.  It has a
	    mandatory attribute, <code class="literal">vid</code>, specifying a
	    universally unique identifier (UUID) for this entry (in
	    quotes).  Generate a UUID for each new VuXML
	    entry (and do not forget to substitute it for the template
	    UUID unless writing the entry from scratch).
	    use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uuidgen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">uuidgen</span>(1)</span></a> to generate a VuXML UUID.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-top"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is a one-line description of the issue
	    found.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-nam"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>The names of packages affected are listed there.
	    Multiple names can be given since several packages may be
	    based on a single master port or software product.  This
	    may include stable and development branches, localized
	    versions, and slave ports featuring different choices of
	    important build-time configuration options.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">It is the submitter's responsibility to find all such related
	      packages when writing a VuXML entry.  Keep in mind that
	      <code class="literal">make search name=foo</code> is helpful.
	      The primary points to look for are:</p><div xmlns="http://www.w3.org/1999/xhtml" class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>the <code class="filename">foo-devel</code> variant for a
		  <code class="filename">foo</code> port;</p></li><li class="listitem"><p>other variants with a suffix like
		  <code class="literal">-a4</code> (for print-related packages),
		  <code class="literal">-without-gui</code> (for packages with X
		  support disabled), or similar;</p></li><li class="listitem"><p><code class="literal">jp-</code>, <code class="literal">ru-</code>,
		  <code class="literal">zh-</code>, and other possible localized
		  variants in the corresponding national categories of
		  the ports collection.</p></li></ul></div></div></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-rng"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Affected versions of the package(s) are specified
	    there as one or more ranges using a combination of
	    <code class="literal">&lt;lt&gt;</code>,
	    <code class="literal">&lt;le&gt;</code>,
	    <code class="literal">&lt;eq&gt;</code>,
	    <code class="literal">&lt;ge&gt;</code>, and
	    <code class="literal">&lt;gt&gt;</code> elements.  Check that the version
	    ranges given do not overlap.</p><p>In a range specification, <code class="literal">*</code>
	    (asterisk) denotes the smallest version number.  In
	    particular, <code class="literal">2.*</code> is less than
	    <code class="literal">2.a</code>.  Therefore an asterisk may be used
	    for a range to match all possible
	    <code class="literal">alpha</code>, <code class="literal">beta</code>, and
	    <code class="literal">RC</code> versions.  For instance,
	    <code class="literal">&lt;ge&gt;2.*&lt;/ge&gt;&lt;lt&gt;3.*&lt;/lt&gt;</code>
	    will selectively match every <code class="literal">2.x</code>
	    version while
	    <code class="literal">&lt;ge&gt;2.0&lt;/ge&gt;&lt;lt&gt;3.0&lt;/lt&gt;</code>
	    will not since the latter misses <code class="literal">2.r3</code>
	    and matches <code class="literal">3.b</code>.</p><p>The above example specifies that affected are versions
	    from <code class="literal">1.6</code> to <code class="literal">1.9</code>
	    inclusive, versions <code class="literal">2.x</code> before
	    <code class="literal">2.4_1</code>, and version
	    <code class="literal">3.0b1</code>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-nm2"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Several related package groups (essentially, ports)
	    can be listed in the <code class="literal">&lt;affected&gt;</code>
	    section.  This can be used if several software products
	    (say FooBar, FreeBar and OpenBar) grow from the same code
	    base and still share its bugs and vulnerabilities.  Note
	    the difference from listing multiple names within a single
	    &lt;package&gt; section.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-epo"><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span></a> </p></td><td valign="top" align="left"><p>The version ranges have to allow for
	    <code class="varname">PORTEPOCH</code> and
	    <code class="varname">PORTREVISION</code> if applicable.  Please
	    remember that according to the collation rules, a version
	    with a non-zero <code class="varname">PORTEPOCH</code> is greater
	    than any version without <code class="varname">PORTEPOCH</code>,
	    for example, <code class="literal">3.0,1</code> is greater than
	    <code class="literal">3.1</code> or even than
	    <code class="literal">8.9</code>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-bdy"><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is a summary of the issue.  XHTML is used in this
	    field.  At least enclosing <code class="literal">&lt;p&gt;</code>
	    and <code class="literal">&lt;/p&gt;</code> has to appear.  More
	    complex mark-up may be used, but only for the sake of
	    accuracy and clarity: No eye candy please.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-ref"><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This section contains references to relevant
	    documents.  As many references as apply are
	    encouraged.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-fsa"><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is a <a class="link" href="http://www.freebsd.org/security/#adv" target="_top">FreeBSD
	      security advisory</a>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-fpr"><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is a <a class="link" href="http://www.freebsd.org/support.html" target="_top">FreeBSD
	      problem report</a>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-cve"><span><img src="./imagelib/callouts/11.png" alt="11" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is a
	    <a class="link" href="http://www.cve.mitre.org/" target="_top">MITRE
	      CVE</a> identifier.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-bid"><span><img src="./imagelib/callouts/12.png" alt="12" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is a <a class="link" href="http://www.securityfocus.com/bid" target="_top">SecurityFocus
	      Bug ID</a>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-cts"><span><img src="./imagelib/callouts/13.png" alt="13" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is a
	    <a class="link" href="http://www.cert.org/" target="_top">US-CERT</a>
	    security advisory.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-ctv"><span><img src="./imagelib/callouts/14.png" alt="14" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is a
	    <a class="link" href="http://www.cert.org/" target="_top">US-CERT</a>
	    vulnerability note.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-ucs"><span><img src="./imagelib/callouts/15.png" alt="15" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is a
	    <a class="link" href="http://www.cert.org/" target="_top">US-CERT</a>
	    Cyber Security Alert.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-uct"><span><img src="./imagelib/callouts/16.png" alt="16" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is a
	    <a class="link" href="http://www.cert.org/" target="_top">US-CERT</a>
	    Technical Cyber Security Alert.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-mls"><span><img src="./imagelib/callouts/17.png" alt="17" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is a URL to an archived posting in a mailing
	    list.  The attribute <code class="literal">msgid</code> is optional
	    and may specify the message ID of the posting.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-url"><span><img src="./imagelib/callouts/18.png" alt="18" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is a generic URL.  Only it if none
	    of the other reference categories apply.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-dsc"><span><img src="./imagelib/callouts/19.png" alt="19" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is the date when the issue was disclosed
	    (<em class="replaceable"><code>YYYY-MM-DD</code></em>).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-ent"><span><img src="./imagelib/callouts/20.png" alt="20" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is the date when the entry was added
	    (<em class="replaceable"><code>YYYY-MM-DD</code></em>).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-vx-mod"><span><img src="./imagelib/callouts/21.png" alt="21" border="0" /></span></a> </p></td><td valign="top" align="left"><p>This is the date when any information in the entry was
	    last modified (<em class="replaceable"><code>YYYY-MM-DD</code></em>).
	    New entries must not include this field.  Add it when
	    editing an existing entry.</p></td></tr></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security-notify-vuxml-testing"></a>11.3.3. Testing Changes to the VuXML Database</h3></div></div></div><p>This example describes a new entry for a
	vulnerability in the package <code class="literal">dropbear</code> that
	has been fixed in version <code class="literal">dropbear-2013.59</code>.</p><p>As a prerequisite,
	install a fresh version of
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/vuxml/pkg-descr">security/vuxml</a> port.</p><p>First, check whether there already is an entry for this
	vulnerability.  If there were such an entry, it would match
	the previous version of the package,
	<code class="literal">2013.58</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>pkg audit dropbear-2013.58</code></strong></pre><p>If there is none found, add a
	new entry for this vulnerability.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd ${PORTSDIR}/security/vuxml</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>make newentry</code></strong></pre><p>Verify its syntax and formatting:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>make validate</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">At least one of these packages needs to be
	  installed: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/textproc/libxml2/pkg-descr">textproc/libxml2</a>,
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/textproc/jade/pkg-descr">textproc/jade</a>.</p></div><p>Verify that the <code class="literal">&lt;affected&gt;</code>
	section of the entry will match the correct packages:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>pkg audit -f ${PORTSDIR}/security/vuxml/vuln.xml dropbear-2013.58</code></strong></pre><p>Make sure that the entry produces no spurious matches in
	the output.</p><p>Now check whether the right package versions are matched
	by the entry:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>pkg audit -f ${PORTSDIR}/security/vuxml/vuln.xml dropbear-2013.58 dropbear-2013.59</code></strong>
dropbear-2012.58 is vulnerable:
dropbear -- exposure of sensitive information, DoS
CVE: CVE-2013-4434
CVE: CVE-2013-4421
WWW: http://portaudit.FreeBSD.org/8c9b48d1-3715-11e3-a624-00262d8b701d.html

1 problem(s) in the installed packages found.</pre><p>The former version matches while the latter one
	does not.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-dads"></a>Chapter 12. Dos and Don'ts</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="sect1"><a href="#dads-intro">12.1. Introduction</a></span></dt><dt><span class="sect1"><a href="#porting-wrkdir">12.2. <code class="varname">WRKDIR</code></a></span></dt><dt><span class="sect1"><a href="#porting-wrkdirprefix">12.3. <code class="varname">WRKDIRPREFIX</code></a></span></dt><dt><span class="sect1"><a href="#porting-versions">12.4. Differentiating Operating Systems and OS Versions</a></span></dt><dt><span class="sect1"><a href="#dads-after-port-mk">12.5. Writing Something After
      <code class="filename">bsd.port.mk</code></a></span></dt><dt><span class="sect1"><a href="#dads-sh-exec">12.6. Use the <code class="function">exec</code> Statement in Wrapper
      Scripts</a></span></dt><dt><span class="sect1"><a href="#dads-rational">12.7. Do Things Rationally</a></span></dt><dt><span class="sect1"><a href="#dads-cc">12.8. Respect Both <code class="varname">CC</code> and
      <code class="varname">CXX</code></a></span></dt><dt><span class="sect1"><a href="#dads-cflags">12.9. Respect <code class="varname">CFLAGS</code></a></span></dt><dt><span class="sect1"><a href="#dads-feedback">12.10. Feedback</a></span></dt><dt><span class="sect1"><a href="#dads-readme">12.11. <code class="filename">README.html</code></a></span></dt><dt><span class="sect1"><a href="#dads-arch-neutral">12.12. Marking a Port as Architecture Neutral</a></span></dt><dt><span class="sect1"><a href="#dads-noinstall">12.13. Marking a Port Not Installable with
      <code class="varname">BROKEN</code>, <code class="varname">FORBIDDEN</code>, or
      <code class="varname">IGNORE</code></a></span></dt><dt><span class="sect1"><a href="#dads-deprecated">12.14. Marking a Port for Removal with
      <code class="varname">DEPRECATED</code> or
      <code class="varname">EXPIRATION_DATE</code></a></span></dt><dt><span class="sect1"><a href="#dads-dot-error">12.15. Avoid Use of the <code class="literal">.error</code>
      Construct</a></span></dt><dt><span class="sect1"><a href="#dads-sysctl">12.16. Usage of <code class="filename">sysctl</code></a></span></dt><dt><span class="sect1"><a href="#dads-rerolling-distfiles">12.17. Rerolling Distfiles</a></span></dt><dt><span class="sect1"><a href="#dads-avoiding-linuxisms">12.18. Avoiding Linuxisms</a></span></dt><dt><span class="sect1"><a href="#dads-misc">12.19. Miscellanea</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-intro"></a>12.1. Introduction</h2></div></div></div><p>Here is a list of common dos and don'ts that are encountered
      during the porting process.  Check the port against this list,
      but also check ports in the <a class="link" href="https://bugs.FreeBSD.org/search/" target="_top">PR
	database</a> that others have submitted.  Submit any
      comments on ports as described in <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/contributing/contrib-how.html#CONTRIB-GENERAL" target="_top">Bug
	Reports and General Commentary</a>.  Checking ports in the
      PR database will both make it faster for us to commit them, and
      prove that you know what you are doing.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-wrkdir"></a>12.2. <code class="varname">WRKDIR</code></h2></div></div></div><p>Do not write anything to files outside
      <code class="varname">WRKDIR</code>.  <code class="varname">WRKDIR</code> is the
      only place that is guaranteed to be writable during the port
      build (see <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/ports-using.html#PORTS-CD" target="_top">
	installing ports from a CDROM</a> for an example of
      building ports from a read-only tree).  The
      <code class="filename">pkg-<em class="replaceable"><code>*</code></em></code> files can
      be modified by <a class="link" href="#pkg-names" title="8.4. Changing the Names of pkg-*">redefining a
	variable</a> rather than overwriting the file.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-wrkdirprefix"></a>12.3. <code class="varname">WRKDIRPREFIX</code></h2></div></div></div><p>Make sure the port honors <code class="varname">WRKDIRPREFIX</code>.
      Most ports do not have to worry about this.  In particular, when
      referring to a <code class="varname">WRKDIR</code> of another
      port, note that the correct location is
      <code class="filename">WRKDIRPREFIXPORTSDIR/<em class="replaceable"><code>subdir</code></em>/<em class="replaceable"><code>name</code></em>/work</code>
      not
      <code class="filename">PORTSDIR/<em class="replaceable"><code>subdir</code></em>/<em class="replaceable"><code>name</code></em>/work</code>
      or
      <code class="filename">.CURDIR/../../<em class="replaceable"><code>subdir</code></em>/<em class="replaceable"><code>name</code></em>/work</code>
      or some such.</p><p>Also, if defining <code class="varname">WRKDIR</code>,
      make sure to prepend
      <code class="literal">${WRKDIRPREFIX}${.CURDIR}</code> in
      the front.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-versions"></a>12.4. Differentiating Operating Systems and OS Versions</h2></div></div></div><p>Some code needs modifications or
      conditional compilation based upon what version of FreeBSD Unix it
      is running under.  The preferred way to tell FreeBSD versions apart
      are the <code class="literal">__FreeBSD_version</code> and
      <code class="literal">__FreeBSD__</code> macros defined in <a class="link" href="http://svnweb.freebsd.org/base/head/sys/sys/param.h?view=markup" target="_top">sys/param.h</a>.
      If this file is not included add the code,</p><pre class="programlisting">#include &lt;sys/param.h&gt;</pre><p>to the proper place in the <code class="filename">.c</code>
	file.</p><p><code class="literal">__FreeBSD__</code> is defined in all versions
	of FreeBSD as their major version number.  For example, in FreeBSD
	9.x, <code class="literal">__FreeBSD__</code> is defined to be
	<code class="literal">9</code>.</p><pre class="programlisting">#if __FreeBSD__ &gt;= 9
#  if __FreeBSD_version &gt;= 901000
	 /* 9.1+ release specific code here */
#  endif
#endif</pre><p>A complete list of <code class="literal">__FreeBSD_version</code>
	values is available in <a class="xref" href="#versions" title="Chapter 16. __FreeBSD_version Values">Chapter 16, <em><code class="literal">__FreeBSD_version</code>
    Values</em></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-after-port-mk"></a>12.5. Writing Something After
      <code class="filename">bsd.port.mk</code></h2></div></div></div><p>Do not write anything after the
      <code class="literal">.include &lt;bsd.port.mk&gt;</code> line.  It
      usually can be avoided by including
      <code class="filename">bsd.port.pre.mk</code> somewhere in the middle of
      the <code class="filename">Makefile</code> and
      <code class="filename">bsd.port.post.mk</code> at the end.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Include either the
	<code class="filename">bsd.port.pre.mk</code>/<code class="filename">bsd.port.post.mk</code>
	pair or <code class="filename">bsd.port.mk</code> only; do not mix
	these two usages.</p></div><p><code class="filename">bsd.port.pre.mk</code> only defines a few
      variables, which can be used in tests in the
      <code class="filename">Makefile</code>,
      <code class="filename">bsd.port.post.mk</code> defines the rest.</p><p>Here are some important variables defined in
      <code class="filename">bsd.port.pre.mk</code> (this is not the complete
      list, please read <code class="filename">bsd.port.mk</code> for the
      complete list).</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code class="varname">ARCH</code></td><td>The architecture as returned by <code class="command">uname
		-m</code> (for example, <code class="literal">i386</code>)</td></tr><tr><td><code class="varname">OPSYS</code></td><td>The operating system type, as returned by
	      <code class="command">uname -s</code> (for example,
	      <code class="literal">FreeBSD</code>)</td></tr><tr><td><code class="varname">OSREL</code></td><td>The release version of the operating system
	      (for example, <code class="literal">2.1.5</code> or
	      <code class="literal">2.2.7</code>)</td></tr><tr><td><code class="varname">OSVERSION</code></td><td>The numeric version of the operating system; the
	      same as <a class="link" href="#versions" title="Chapter 16. __FreeBSD_version Values"><code class="literal">__FreeBSD_version</code></a>.</td></tr><tr><td><code class="varname">LOCALBASE</code></td><td>The base of the <span class="quote">&#8220;<span class="quote">local</span>&#8221;</span> tree (for example,
	      <code class="literal">/usr/local</code>)</td></tr><tr><td><code class="varname">PREFIX</code></td><td>Where the port installs itself (see
	      <a class="link" href="#porting-prefix" title="9.4. PREFIX and DESTDIR">more on
		<code class="varname">PREFIX</code></a>).</td></tr></tbody></table></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">When <code class="varname">MASTERDIR</code> is needed, always define
	it before including
	<code class="filename">bsd.port.pre.mk</code>.</p></div><p>Here are some examples of things that can be added after
      <code class="filename">bsd.port.pre.mk</code>:</p><pre class="programlisting"># no need to compile lang/perl5 if perl5 is already in system
.if ${OSVERSION} &gt; 300003
BROKEN=	perl is in system
.endif</pre><p>Always use tab instead of spaces after
      <code class="literal">BROKEN=</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-sh-exec"></a>12.6. Use the <code class="function">exec</code> Statement in Wrapper
      Scripts</h2></div></div></div><p>If the port installs a shell script whose purpose is to
      launch another program, and if launching that program is the
      last action performed by the script, make sure to launch the
      program using the <code class="function">exec</code> statement, for
      instance:</p><pre class="programlisting">#!/bin/sh
exec %%LOCALBASE%%/bin/java -jar %%DATADIR%%/foo.jar "$@"</pre><p>The <code class="function">exec</code> statement replaces the shell
      process with the specified program.  If
      <code class="function">exec</code> is omitted, the shell process remains
      in memory while the program is executing, and needlessly
      consumes system resources.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-rational"></a>12.7. Do Things Rationally</h2></div></div></div><p>The <code class="filename">Makefile</code> should do things in a
      simple and reasonable manner.  Making it a couple of lines shorter or
      more readable is always better.  Examples include using a make
      <code class="literal">.if</code> construct instead of a shell
      <code class="literal">if</code> construct, not redefining
      <code class="buildtarget">do-extract</code> if redefining
      <code class="varname">EXTRACT*</code> is enough, and using
      <code class="varname">GNU_CONFIGURE</code> instead of
      <code class="literal">CONFIGURE_ARGS
	+= --prefix=${PREFIX}</code>.</p><p>If a lot of new code is needed to do something, there may
      already be an implementation of it in
      <code class="filename">bsd.port.mk</code>.  While
      hard to read, there are a great many seemingly-hard problems for
      which <code class="filename">bsd.port.mk</code> already provides a
      shorthand solution.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-cc"></a>12.8. Respect Both <code class="varname">CC</code> and
      <code class="varname">CXX</code></h2></div></div></div><p>The port must respect both <code class="varname">CC</code> and
      <code class="varname">CXX</code>.  What we mean by this is that
      the port must not set the values of these variables absolutely,
      overriding existing values; instead, it may append whatever
      values it needs to the existing values.  This is so that build
      options that affect all ports can be set globally.</p><p>If the port does not respect these variables,
      please add
      <code class="literal">NO_PACKAGE=ignores either cc or cxx</code> to the
      <code class="filename">Makefile</code>.</p><p>Here is an example of a <code class="filename">Makefile</code> respecting
      both <code class="varname">CC</code> and <code class="varname">CXX</code>.
      Note the <code class="literal">?=</code>:</p><pre class="programlisting">CC?= gcc</pre><pre class="programlisting">CXX?= g++</pre><p>Here is an example which respects neither
      <code class="varname">CC</code> nor <code class="varname">CXX</code>:</p><pre class="programlisting">CC= gcc</pre><pre class="programlisting">CXX= g++</pre><p>Both <code class="varname">CC</code> and <code class="varname">CXX</code>
      can be defined on FreeBSD systems in
      <code class="filename">/etc/make.conf</code>.  The first example defines
      a value if it was not previously set in
      <code class="filename">/etc/make.conf</code>, preserving any system-wide
      definitions.  The second example clobbers anything previously
      defined.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-cflags"></a>12.9. Respect <code class="varname">CFLAGS</code></h2></div></div></div><p>The port must respect <code class="varname">CFLAGS</code>.
      What we mean by this is that the port must not set
      the value of this variable absolutely, overriding the existing
      value.  Instead, it may append whatever values it needs to the
      existing value.  This is so that build options that affect all
      ports can be set globally.</p><p>If it does not, please add
      <code class="literal">NO_PACKAGE=ignores cflags</code> to the
      <code class="filename">Makefile</code>.</p><p>Here is an example of a <code class="filename">Makefile</code> respecting
      <code class="varname">CFLAGS</code>.  Note the
      <code class="literal">+=</code>:</p><pre class="programlisting">CFLAGS+= -Wall -Werror</pre><p>Here is an example which does not respect
      <code class="varname">CFLAGS</code>:</p><pre class="programlisting">CFLAGS= -Wall -Werror</pre><p><code class="varname">CFLAGS</code> is defined on
      FreeBSD systems in <code class="filename">/etc/make.conf</code>.  The first
      example appends additional flags to
      <code class="varname">CFLAGS</code>, preserving any system-wide
      definitions.  The second example clobbers anything previously
      defined.</p><p>Remove optimization flags from the third party
      <code class="filename">Makefile</code>s.  The system
      <code class="varname">CFLAGS</code> contains system-wide optimization
      flags.  An example from an unmodified
      <code class="filename">Makefile</code>:</p><pre class="programlisting">CFLAGS= -O3 -funroll-loops -DHAVE_SOUND</pre><p>Using system optimization flags, the
      <code class="filename">Makefile</code> would look similar to this
      example:</p><pre class="programlisting">CFLAGS+= -DHAVE_SOUND</pre></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-feedback"></a>12.10. Feedback</h2></div></div></div><p>Do send applicable changes and patches to the upstream
      maintainer for inclusion in the next release of the code.
      This makes updating to the next release that much easier.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-readme"></a>12.11. <code class="filename">README.html</code></h2></div></div></div><p><code class="filename">README.html</code> is not part of the port,
      but generated by <code class="command">make readme</code>.  Do not
      include this file in patches or commits.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">If <code class="command">make readme</code> fails, make sure that
	the default value of <code class="varname">ECHO_MSG</code> has not
	been modified by the port.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-arch-neutral"></a>12.12. Marking a Port as Architecture Neutral</h2></div></div></div><p>Ports that do not have any architecture-dependent files
      or requirements are identified by setting
      <code class="literal">NO_ARCH=yes</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-noinstall"></a>12.13. Marking a Port Not Installable with
      <code class="varname">BROKEN</code>, <code class="varname">FORBIDDEN</code>, or
      <code class="varname">IGNORE</code></h2></div></div></div><p>In certain cases, users must be prevented from installing
      a port.  There are several variables that can be used in a
      port's <code class="filename">Makefile</code> to tell the user that the
      port cannot be installed.  The value of
      these make variables will be the
      reason that is shown to users for why the port refuses to
      install itself.  Please use the correct make
      variable.  Each variable conveys radically different
      meanings, both to users and to automated systems that depend on
      <code class="filename">Makefile</code>s, such as
      <a class="link" href="#build-cluster" title="14.4. The FreeBSD Port Building Cluster">the ports build cluster</a>,
      <a class="link" href="#freshports" title="14.1. FreshPorts">FreshPorts</a>, and
      <a class="link" href="#portsmon" title="14.6. The FreeBSD Ports Monitoring System">portsmon</a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dads-noinstall-variables"></a>12.13.1. Variables</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">BROKEN</code> is reserved for ports that
	    currently do not compile, install, deinstall, or run
	    correctly.  Use it for ports where the problem
	    is believed to be temporary.</p><p>If instructed, the build cluster will still attempt
	    to try to build them to see if the underlying problem has
	    been resolved.  (However, in general, the cluster is run
	    without this.)</p><p>For instance, use <code class="varname">BROKEN</code> when a
	    port:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>does not compile</p></li><li class="listitem"><p>fails its configuration or installation
		process</p></li><li class="listitem"><p>installs files outside of
		<code class="filename">${PREFIX}</code></p></li><li class="listitem"><p>does not remove all its files cleanly upon
		deinstall (however, it may be acceptable, and
		desirable, for the port to leave user-modified files
		behind)</p></li><li class="listitem"><p>has runtime issues on systems where it is
		supposed to run fine.</p></li></ul></div></li><li class="listitem"><p><code class="varname">FORBIDDEN</code> is used for ports that
	    contain a security vulnerability or induce grave concern
	    regarding the security of a FreeBSD system with a given port
	    installed (for example, a reputably insecure program or a program
	    that provides easily exploitable services).  Mark ports
	    as <code class="varname">FORBIDDEN</code> as soon as a
	    particular piece of software has a vulnerability and there
	    is no released upgrade.  Ideally upgrade ports
	    as soon as possible when a security vulnerability is
	    discovered so as to reduce the number of vulnerable FreeBSD
	    hosts (we like being known for being secure), however
	    sometimes there is a noticeable time gap between
	    disclosure of a vulnerability and an updated release of
	    the vulnerable software.  Do not mark a port
	    <code class="varname">FORBIDDEN</code> for any reason other than
	    security.</p></li><li class="listitem"><p><code class="varname">IGNORE</code> is reserved for ports that
	    must not be built for some other reason.  Use it
	    for ports where the problem is believed to be
	    structural.  The build cluster will not, under any
	    circumstances, build ports marked as
	    <code class="varname">IGNORE</code>.  For instance, use
	    <code class="varname">IGNORE</code> when a port:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>does not work on the installed version of
		FreeBSD</p></li><li class="listitem"><p>has a distfile which may not be automatically
		fetched due to licensing restrictions</p></li><li class="listitem"><p>does not work with some other currently
		installed port (for instance, the port depends on
		<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache20/pkg-descr">www/apache20</a> but
		<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache22/pkg-descr">www/apache22</a> is
		installed)</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">If a port would conflict with a currently
	      installed port (for example, if they install a file in
	      the same place that performs a different function),
	      <a class="link" href="#conflicts" title="5.14. Conflict Handling">use
		<code class="varname">CONFLICTS</code> instead</a>.
	      <code class="varname">CONFLICTS</code> will set
	      <code class="varname">IGNORE</code> by itself.</p></div></li><li class="listitem"><p>To mark a port as <code class="varname">IGNORE</code>d
	    only on certain architectures, there are two other
	    convenience variables that will automatically set
	    <code class="varname">IGNORE</code>:
	    <code class="varname">ONLY_FOR_ARCHS</code> and
	    <code class="varname">NOT_FOR_ARCHS</code>.  Examples:</p><pre class="programlisting">ONLY_FOR_ARCHS=	i386 amd64</pre><pre class="programlisting">NOT_FOR_ARCHS=	ia64 sparc64</pre><p>A custom <code class="varname">IGNORE</code> message can be
	    set using <code class="varname">ONLY_FOR_ARCHS_REASON</code> and
	    <code class="varname">NOT_FOR_ARCHS_REASON</code>.  Per
	    architecture entries are possible with
	    <code class="varname">ONLY_FOR_ARCHS_REASON_<em class="replaceable"><code>ARCH</code></em></code>
	    and
	    <code class="varname">NOT_FOR_ARCHS_REASON_<em class="replaceable"><code>ARCH</code></em></code>.</p></li><li class="listitem"><p>If a port fetches i386 binaries and installs them,
	    set <code class="varname">IA32_BINARY_PORT</code>.  If this variable
	    is set, <code class="filename">/usr/lib32</code> must be present
	    for IA32 versions of libraries and the kernel must support
	    IA32 compatibility.  If one of these two
	    dependencies is not satisfied, <code class="varname">IGNORE</code>
	    will be set automatically.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dads-noinstall-notes"></a>12.13.2. Implementation Notes</h3></div></div></div><p>Do not quote the values of <code class="varname">BROKEN</code>,
	<code class="varname">IGNORE</code>, and related variables.  Due to the
	way the information is shown to the user, the wording of
	messages for each variable differ:</p><pre class="programlisting">BROKEN=	fails to link with base -lcrypto</pre><pre class="programlisting">IGNORE=	unsupported on recent versions</pre><p>resulting in this output from
	<code class="command">make describe</code>:</p><pre class="programlisting">===&gt;  foobar-0.1 is marked as broken: fails to link with base -lcrypto.</pre><pre class="programlisting">===&gt;  foobar-0.1 is unsupported on recent versions.</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-deprecated"></a>12.14. Marking a Port for Removal with
      <code class="varname">DEPRECATED</code> or
      <code class="varname">EXPIRATION_DATE</code></h2></div></div></div><p>Do remember that <code class="varname">BROKEN</code> and
      <code class="varname">FORBIDDEN</code> are to be used as a temporary
      resort if a port is not working.  Permanently broken ports
      will be removed from the tree entirely.</p><p>When it makes sense to do so, users can be warned about
      a pending port removal with <code class="varname">DEPRECATED</code> and
      <code class="varname">EXPIRATION_DATE</code>.  The former is a
      string stating why the port is scheduled for removal; the latter
      is a string in ISO 8601 format (YYYY-MM-DD).  Both will be shown
      to the user.</p><p>It is possible to set <code class="varname">DEPRECATED</code>
      without an <code class="varname">EXPIRATION_DATE</code> (for instance,
      recommending a newer version of the port), but the converse
      does not make any sense.</p><p>There is no set policy on how much notice to give.
      Current practice seems to be one month for security-related
      issues and two months for build issues.  This also gives any
      interested committers a little time to fix the problems.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-dot-error"></a>12.15. Avoid Use of the <code class="literal">.error</code>
      Construct</h2></div></div></div><p>The correct way for a <code class="filename">Makefile</code> to
      signal that the port cannot be installed due to some external
      factor (for instance, the user has specified an illegal
      combination of build options) is to set a non-blank value to
      <code class="varname">IGNORE</code>.  This value will be formatted and
      shown to the user by <code class="command">make install</code>.</p><p>It is a common mistake to use <code class="literal">.error</code>
      for this purpose.  The problem with this is that many automated
      tools that work with the ports tree will fail in this situation.
      The most common occurrence of this is seen when trying to build
      <code class="filename">/usr/ports/INDEX</code> (see
      <a class="xref" href="#make-describe" title="9.1. Running make describe">Section 9.1, &#8220;Running <code class="command">make describe</code>&#8221;</a>).  However, even more trivial
      commands such as <code class="command">make maintainer</code> also fail in
      this scenario.  This is not acceptable.</p><div class="example"><a id="dot-error-breaks-index"></a><div class="example-title">Example 12.1. How to Avoid Using <code class="literal">.error</code></div><div class="example-contents"><p>The first of the
	next two <code class="filename">Makefile</code> snippets will cause
	<code class="command">make index</code> to fail, while the second one
	will not:</p><pre class="programlisting">.error "option is not supported"</pre><pre class="programlisting">IGNORE=option is not supported</pre></div></div><br class="example-break" /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-sysctl"></a>12.16. Usage of <code class="filename">sysctl</code></h2></div></div></div><p>The usage of <code class="filename">sysctl</code> is discouraged
      except in targets.  This is because the evaluation of any
      <code class="literal">makevar</code>s, such as used during
      <code class="command">make index</code>, then has to run the command,
      further slowing down that process.</p><p>Only use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> through
      <code class="varname">SYSCTL</code>, as it contains the fully
      qualified path and can be overridden, if one has such a
      special need.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-rerolling-distfiles"></a>12.17. Rerolling Distfiles</h2></div></div></div><p>Sometimes the authors of software change the content of
      released distfiles without changing the file's name.
      Verify that the changes are official and have been performed
      by the author.  It has happened in the past that the distfile
      was silently altered on the download servers with the intent to
      cause harm or compromise end user security.</p><p>Put the old distfile aside, download the new one, unpack
      them and compare the content with <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>.  If there is
      nothing suspicious, update
      <code class="filename">distinfo</code>.  Be sure to summarize the
      differences in the PR or commit log, so that other people know
      that nothing bad has
      happened.</p><p>Contact the authors of the software
      and confirm the changes with them.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-avoiding-linuxisms"></a>12.18. Avoiding Linuxisms</h2></div></div></div><p>Do not use <code class="filename">/proc</code> if there are any
      other ways of getting the information.  For example,
      <code class="function">setprogname(argv[0])</code> in
      <code class="function">main()</code> and then <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getprogname&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">getprogname</span>(3)</span></a>
      to know the executable name&gt;.</p><p>Do not rely on behavior that is undocumented by
      <acronym class="acronym">POSIX</acronym>.</p><p>Do not record timestamps in the critical path of the
      application if it also works without.  Getting timestamps may be
      slow, depending on the accuracy of timestamps in the
      <acronym class="acronym">OS</acronym>.  If timestamps are really needed,
      determine how precise they have to be and use an
      <acronym class="acronym">API</acronym> which is documented to just deliver the
      needed precision.</p><p>A number of simple syscalls (for example
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettimeofday&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">gettimeofday</span>(2)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getpid&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">getpid</span>(2)</span></a>) are much faster on <span class="trademark">Linux</span>®
      than on any other operating system due to caching and the
      vsyscall performance optimizations.  Do not rely on them being
      cheap in performance-critical applications.  In general, try
      hard to avoid syscalls if possible.</p><p>Do not rely on <span class="trademark">Linux</span>®-specific socket behaviour.  In
      particular, default socket buffer sizes are different (call
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setsockopt&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">setsockopt</span>(2)</span></a> with <code class="literal">SO_SNDBUF</code> and
      <code class="literal">SO_RCVBUF</code>, and while <span class="trademark">Linux</span>®'s <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">send</span>(2)</span></a>
      blocks when the socket buffer is full, FreeBSD's will fail and
      set <code class="literal">ENOBUFS</code> in errno.</p><p>If relying on non-standard behaviour is required,
      encapsulate it properly into a generic <acronym class="acronym">API</acronym>,
      do a check for the behaviour in the configure stage, and stop
      if it is missing.</p><p>Check the
      <a class="link" href="http://www.freebsd.org/cgi/man.cgi" target="_top">man
	pages</a> to see if the function used is a
      <acronym class="acronym">POSIX</acronym> interface (in the
      <span class="quote">&#8220;<span class="quote">STANDARDS</span>&#8221;</span> section of the man page).</p><p>Do not assume that <code class="filename">/bin/sh</code> is
      <span class="application">bash</span>.  Ensure that a command line
      passed to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=system&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">system</span>(3)</span></a> will work with a
      <acronym class="acronym">POSIX</acronym> compliant shell.</p><p>A list of common <span class="application">bash</span>isms is
      available <a class="link" href="https://wiki.ubuntu.com/DashAsBinSh" target="_top">here</a>.</p><p>Check that headers are included in the
      <acronym class="acronym">POSIX</acronym> or man page recommended way.  For example,
      <code class="filename">sys/types.h</code> is often forgotten, which is
      not as much of a problem for <span class="trademark">Linux</span>® as it is for FreeBSD.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-misc"></a>12.19. Miscellanea</h2></div></div></div><p>Always double-check <code class="filename">pkg-descr</code> and
      <code class="filename">pkg-plist</code>.
      If reviewing a port and a better wording can be achieved,
      do so.</p><p>Do not copy more copies of the GNU General Public License
      into our system, please.</p><p>Please be careful to note any legal issues! Do not let us
      illegally distribute software!</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-samplem"></a>Chapter 13. A Sample <code class="filename">Makefile</code></h1></div></div></div><p>Here is a sample <code class="filename">Makefile</code> that can be
    used to create a new port.  Make sure to remove all the extra
    comments (ones between brackets).</p><p>The format shown is the recommended one for ordering
    variables, empty lines between sections, and so on.  This format is
    designed so that the most important information is easy to locate.
    We recommend using
    <a class="link" href="#porting-portlint" title="3.5. Checking the Port with portlint">portlint</a> to check the
    <code class="filename">Makefile</code>.</p><pre class="programlisting">[the header...just to make it easier for us to identify the ports.]
# Created by: Satoshi Asami &lt;asami@FreeBSD.org&gt;
[The optional <span class="emphasis"><em>Created by:</em></span> line names the person who originally
created the port.  Note that the <span class="quote">&#8220;<span class="quote">:</span>&#8221;</span> is followed by a space
and not a tab character.
If this line is present, future maintainers must
not change or remove it except at the original author's request.]

# $FreeBSD$
[ ^^^^^^^^^ This will be automatically replaced with RCS ID string by SVN
when it is committed to our repository.  If upgrading a port, do not alter
this line back to "$FreeBSD$".  SVN deals with it automatically.]

[section to describe the port itself and the master site - PORTNAME
 and PORTVERSION are always first, followed by CATEGORIES,
 and then MASTER_SITES, which can be followed by MASTER_SITE_SUBDIR.
 PKGNAMEPREFIX and PKGNAMESUFFIX, if needed, will be after that.
 Then comes DISTNAME, EXTRACT_SUFX and/or DISTFILES, and then
 EXTRACT_ONLY, as necessary.]
PORTNAME=	xdvi
PORTVERSION=	18.2
CATEGORIES=	print
[do not forget the trailing slash ("/")!
 if not using MASTER_SITE_* macros]
MASTER_SITES=	${MASTER_SITE_XCONTRIB}
MASTER_SITE_SUBDIR=	applications
PKGNAMEPREFIX=	ja-
DISTNAME=	xdvi-pl18
[set this if the source is not in the standard ".tar.gz" form]
EXTRACT_SUFX=	.tar.Z

[section for distributed patches -- can be empty]
PATCH_SITES=	ftp://ftp.sra.co.jp/pub/X11/japanese/
PATCHFILES=	xdvi-18.patch1.gz xdvi-18.patch2.gz

[maintainer; *mandatory*!  This is the person who is volunteering to
 handle port updates, build breakages, and to whom a users can direct
 questions and bug reports.  To keep the quality of the Ports Collection
 as high as possible, we no longer accept new ports that are assigned to
 "ports@FreeBSD.org".]
MAINTAINER=	asami@FreeBSD.org
COMMENT=	DVI Previewer for the X Window System

[dependencies -- can be empty]
RUN_DEPENDS=	gs:${PORTSDIR}/print/ghostscript

[this section is for other standard bsd.port.mk variables that do not
 belong to any of the above]
[If it asks questions during configure, build, install...]
IS_INTERACTIVE=	yes
[If it extracts to a directory other than ${DISTNAME}...]
WRKSRC=		${WRKDIR}/xdvi-new
[If the distributed patches were not made relative to ${WRKSRC},
 this may need to be tweaked]
PATCH_DIST_STRIP=	-p1
[If it requires a "configure" script generated by GNU autoconf to be run]
GNU_CONFIGURE=	yes
[If it requires GNU make, not /usr/bin/make, to build...]
USES= gmake
[If it is an X application and requires "xmkmf -a" to be run...]
USES= imake
[et cetera.]

[non-standard variables to be used in the rules below]
MY_FAVORITE_RESPONSE=	"yeah, right"

[then the special rules, in the order they are called]
pre-fetch:
	i go fetch something, yeah

post-patch:
	i need to do something after patch, great

pre-install:
	and then some more stuff before installing, wow

[and then the epilogue]

.include &lt;bsd.port.mk&gt;</pre></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="keeping-up"></a>Chapter 14. Keeping Up</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="sect1"><a href="#freshports">14.1. FreshPorts</a></span></dt><dt><span class="sect1"><a href="#svnweb">14.2. The Web Interface to the Source Repository</a></span></dt><dt><span class="sect1"><a href="#ports-mailing-list">14.3. The FreeBSD Ports Mailing List</a></span></dt><dt><span class="sect1"><a href="#build-cluster">14.4. The FreeBSD Port Building Cluster</a></span></dt><dt><span class="sect1"><a href="#distfile-survey">14.5. Portscout: the FreeBSD Ports Distfile Scanner</a></span></dt><dt><span class="sect1"><a href="#portsmon">14.6. The FreeBSD Ports Monitoring System</a></span></dt></dl></div><p>The FreeBSD Ports Collection is constantly changing.  Here is
    some information on how to keep up.</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="freshports"></a>14.1. FreshPorts</h2></div></div></div><p>One of the easiest ways to learn about updates that have
      already been committed is by subscribing to <a class="link" href="http://www.FreshPorts.org/" target="_top">FreshPorts</a>.
      Multiple ports can be monitored.  Maintainers are
      strongly encouraged to subscribe, because they will receive
      notification of not only their own changes, but also any changes
      that any other FreeBSD committer has made.  (These are often
      necessary to keep up with changes in the underlying ports
      framework&#8212;although it would be most polite to receive an
      advance heads-up from those committing such changes, sometimes
      this is overlooked or impractical.  Also, in some
      cases, the changes are very minor in nature.  We expect everyone
      to use their best judgement in these cases.)</p><p>To use FreshPorts, an account is required.  Those with
      registered email addresses at <code class="literal">@FreeBSD.org</code>
      will see the opt-in link on the right-hand side of the web
      pages.  Those who already have a FreshPorts account but are not
      using a <code class="literal">@FreeBSD.org</code> email address can change
      the email to <code class="literal">@FreeBSD.org</code>, subscribe, then
      change it back again.</p><p>FreshPorts also has a sanity test feature which
      automatically tests each commit to the FreeBSD ports tree.  If
      subscribed to this service, a committer will receive notifications
      of any errors which FreshPorts detects during sanity testing of their
      commits.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="svnweb"></a>14.2. The Web Interface to the Source Repository</h2></div></div></div><p>It is possible to browse the files in the source
      repository by using a web interface.  Changes that affect the
      entire port system are now documented in the <a class="link" href="http://svnweb.FreeBSD.org/ports/head/CHANGES" target="_top">CHANGES</a>
      file.  Changes that affect individual ports are now documented
      in the <a class="link" href="http://svnweb.FreeBSD.org/ports/head/UPDATING" target="_top">UPDATING</a>
      file.  However, the definitive answer to any question is
      undoubtedly to read the source code of <a class="link" href="http://svnweb.FreeBSD.org/ports/head/Mk/bsd.port.mk" target="_top">bsd.port.mk</a>,
      and associated files.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-mailing-list"></a>14.3. The FreeBSD Ports Mailing List</h2></div></div></div><p>As a ports maintainer, consider subscribing to
      <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">FreeBSD ports mailing list</a>.  Important changes to the way ports work will be
      announced there, and then committed to
      <code class="filename">CHANGES</code>.</p><p>If the volume of messages on this mailing list is too high,
      consider following <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports-announce" target="_top">FreeBSD ports announce mailing list</a> which contains only
      announcements.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="build-cluster"></a>14.4. The FreeBSD Port Building Cluster</h2></div></div></div><p>One of the least-publicized strengths of FreeBSD is that
      an entire cluster of machines is dedicated to continually
      building the Ports Collection, for each of the major OS releases
      and for each Tier-1 architecture.</p><p>Individual ports are built unless they are specifically
      marked with <code class="varname">IGNORE</code>.  Ports that are marked
      with <code class="varname">BROKEN</code> will still be attempted, to see
      if the underlying problem has been resolved.  (This is done by
      passing <code class="varname">TRYBROKEN</code> to the port's
      <code class="filename">Makefile</code>.)</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="distfile-survey"></a>14.5. Portscout: the FreeBSD Ports Distfile Scanner</h2></div></div></div><p>The build cluster is dedicated to building the latest
      release of each port with distfiles that have already been
      fetched.  However, as the Internet continually changes,
      distfiles can quickly go missing.  <a class="link" href="http://portscout.FreeBSD.org" target="_top">Portscout</a>,
      the FreeBSD Ports distfile scanner, attempts to query every
      download site for every port to find out if each distfile is
      still available.  <span class="application">Portscout</span> can
      generate <acronym class="acronym">HTML</acronym> reports and send emails about
      newly available ports to those who request them.  Unless not
      otherwise subscribed, maintainers are asked to check
      periodically for changes, either by hand or using the
      <acronym class="acronym">RSS</acronym> feed.</p><p><span class="application">Portscout</span>'s first page gives
      the email address of the port maintainer, the number of ports
      the maintainer is responsible for, the number of those ports
      with new distfiles, and the percentage of those ports that are
      out-of-date.  The search function allows for searching by email
      address for a specific maintainer, and for selecting whether
      only out-of-date ports are shown.</p><p>Upon clicking on a maintainer's email address, a list of
      all of their ports is displayed, along with port category,
      current version number, whether or not there is a new version,
      when the port was last updated, and finally when it was last
      checked.  A search function on this page allows the user to
      search for a specific port.</p><p>Clicking on a port name in the list displays the <a class="link" href="http://freshports.org" target="_top">FreshPorts</a> port
      information.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="portsmon"></a>14.6. The FreeBSD Ports Monitoring System</h2></div></div></div><p>Another handy resource is the <a class="link" href="http://portsmon.FreeBSD.org" target="_top">FreeBSD Ports
	Monitoring System</a> (also known as
      <code class="literal">portsmon</code>).  This system comprises a database
      that processes information from several sources and allows it to
      be browsed via a web interface.  Currently, the ports Problem
      Reports (PRs), the error logs from the build cluster, and
      individual files from the ports collection are used.  In the
      future, this will be expanded to include the distfile survey, as
      well as other sources.</p><p>To get started, use the <a class="link" href="http://portsmon.FreeBSD.org/portoverview.py" target="_top">Overview
	of One Port</a> search page to find all the information
      about a port.</p><p>This is the only resource available that
      maps PR entries to portnames.  PR submitters do not
      always include the portname in their Synopsis, although we would
      prefer that they did.  So, <code class="literal">portsmon</code> is a
      good place to find out whether an existing
      port has any PRs filed against it, any build errors, or
      if a new port the porter is considering
      creating has already been submitted.</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="uses"></a>Chapter 15. Values of
    <code class="varname">USES</code></h1></div></div></div><div class="table"><a id="uses-values-table"></a><div class="table-title">Table 15.1. Values of <code class="varname">USES</code></div><div class="table-contents"><table summary="Values of USES" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Feature</th><th>Arguments</th><th>Description</th></tr></thead><tbody valign="top"><tr><td valign="top"><a id="uses-ada"></a><code class="literal">ada</code></td><td valign="top">(none), <code class="literal">47</code>, <code class="literal">49</code>,
	    <code class="literal">5</code></td><td valign="top">Depends on an <span class="application">Ada</span>-capable
	    compiler, and sets <code class="varname">CC</code> accordingly.
	    Defaults to a <span class="application">gcc</span> 4.9 based
	    compiler, use <code class="literal">:47</code> to use the older
	    <span class="application">gcc</span> 4.7 based one and
	    <code class="literal">:5</code> to use the newer
	    <span class="application">gcc</span> 5 based one.</td></tr><tr><td valign="top"><a id="uses-autoreconf"></a><code class="literal">autoreconf</code></td><td valign="top">(none), <code class="literal">build</code></td><td valign="top">Runs <code class="command">autoreconf</code>.  It encapsulates
	    the <code class="command">aclocal</code>,
	    <code class="command">autoconf</code>,
	    <code class="command">autoheader</code>,
	    <code class="command">automake</code>, <code class="command">autopoint</code>,
	    and <code class="command">libtoolize</code> commands.  Each command
	    applies to
	    <code class="filename">${CONFIGURE_WRKSRC}/configure.ac</code> or
	    its old name,
	    <code class="filename">${CONFIGURE_WRKSRC}/configure.in</code>.  If
	    <code class="filename">configure.ac</code> defines subdirectories
	    with their own <code class="filename">configure.ac</code> using
	    <code class="literal">AC_CONFIG_SUBDIRS</code>,
	    <code class="command">autoreconf</code> will recursively update
	    those as well.  The <code class="literal">:build</code> argument
	    only adds build time dependencies on those tools but does
	    not run <code class="command">autoreconf</code>.</td></tr><tr><td valign="top"><a id="uses-blaslapack"></a><code class="literal">blaslapack</code></td><td valign="top">(none), <code class="literal">atlas</code>,
	    <code class="literal">netlib</code> (default),
	    <code class="literal">gotoblas</code>,
	    <code class="literal">openblas</code></td><td valign="top">Adds dependencies on Blas / Lapack libraries.</td></tr><tr><td valign="top"><a id="uses-bison"></a><code class="literal">bison</code></td><td valign="top">(none), <code class="literal">build</code>,
	    <code class="literal">run</code>, <code class="literal">both</code></td><td valign="top">Uses <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/bison/pkg-descr">devel/bison</a>
	    By default, with no arguments or with the
	    <code class="literal">build</code> argument, it implies
	    <code class="command">bison</code> is a build-time dependency,
	    <code class="literal">run</code> implies a run-time dependency, and
	    <code class="literal">both</code> implies both run-time and
	    build-time dependencies.</td></tr><tr><td valign="top"><a id="uses-charsetfix"></a><code class="literal">charsetfix</code></td><td valign="top">(none)</td><td valign="top">Prevents the port from installing
	    <code class="filename">charset.alias</code>.  This must be
	    installed only by
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/converters/libiconv/pkg-descr">converters/libiconv</a>.
	    <code class="varname">CHARSETFIX_MAKEFILEIN</code> can be set to a
	    path relative to <code class="varname">WRKSRC</code> if
	    <code class="filename">charset.alias</code> is not installed by
	    <code class="filename">${WRKSRC}/Makefile.in</code>.</td></tr><tr><td valign="top"><a id="uses-cmake"></a><code class="literal">cmake</code></td><td valign="top">(none), <code class="literal">outsource</code>,
	    <code class="literal">run</code></td><td valign="top">Uses <span class="application">CMake</span> for configuring
	    and building.  With the <code class="literal">outsource</code>
	    argument, an out-of-source build will be performed.  With
	    the <code class="literal">run</code> argument, a run-time dependency
	    is registered.  For more information see
	    <a class="xref" href="#using-cmake" title="6.5.4. Using cmake">Section 6.5.4, &#8220;Using <code class="command">cmake</code>&#8221;</a>.</td></tr><tr><td valign="top"><a id="uses-compiler"></a><code class="literal">compiler</code></td><td valign="top">(none), <code class="literal">c++0x</code>,
	    <code class="literal">c++11-lang</code>,
	    <code class="literal">gcc-c++11-lib</code>,
	    <code class="literal">c++11-lib</code>, <code class="literal">c11</code>,
	    <code class="literal">openmp</code>, <code class="literal">nestedfct</code>,
	    <code class="literal">features</code></td><td valign="top">Determines which compiler to use based on any given
	    wishes.  Use <code class="literal">c++11-lang</code> if the port
	    needs a C++11-capable compiler,
	    <code class="literal">gcc-c++11-lib</code> if the port needs the
	    <code class="command">g++</code> compiler with a C++11 library, and
	    <code class="literal">c++11-lib</code> if the port also needs a
	    C++11-ready standard library.  If the port needs a
	    compiler understanding C++0X, C11, OpenMP, or nested
	    functions, the corresponding parameters can be used.  Use
	    <code class="literal">features</code> to request a list of features
	    supported by the default compiler.  After including
	    <code class="filename">bsd.port.pre.mk</code> the port can inspect
	    the results using these variables:

	    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">COMPILER_TYPE</code>: the default
		  compiler on the system, either gcc or clang</p></li><li class="listitem"><p><code class="varname">ALT_COMPILER_TYPE</code>: the
		  alternative compiler on the system, either gcc or
		  clang.  Only set if two compilers are present in the
		  base system.</p></li><li class="listitem"><p><code class="varname">COMPILER_VERSION</code>: the first
		  two digits of the version of the default
		  compiler.</p></li><li class="listitem"><p><code class="varname">ALT_COMPILER_VERSION</code>: the
		  first two digits of the version of the alternative
		  compiler, if present.</p></li><li class="listitem"><p><code class="varname">CHOSEN_COMPILER_TYPE</code>: the
		  chosen compiler, either gcc or clang</p></li><li class="listitem"><p><code class="varname">COMPILER_FEATURES</code>: the
		  features supported by the default compiler.  It
		  currently lists the C++ library.</p></li></ul></div></td></tr><tr><td valign="top"><a id="uses-cpe"></a><code class="literal">cpe</code></td><td valign="top">(none)</td><td valign="top">
	    Include Common Platform Enumeration
	    (<acronym class="acronym">CPE</acronym>) information in package manifest
	    as a <acronym class="acronym">CPE</acronym> 2.3 formatted string.  See the
	    <a class="link" href="http://scap.nist.gov/specifications/cpe/" target="_top"><acronym class="acronym">CPE</acronym>
	      specification</a> for details.  To add
	    <acronym class="acronym">CPE</acronym> information to a port, follow these
	    steps:

	    <div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Search for the official CPE entry for the
		  software product either by using the NVD's <a class="link" href="http://web.nvd.nist.gov/view/cpe/search" target="_top"><acronym class="acronym">CPE</acronym>
		    search engine</a> or in the <a class="link" href="http://static.nvd.nist.gov/feeds/xml/cpe/dictionary/official-cpe-dictionary_v2.3.xml" target="_top">official
		    <acronym class="acronym">CPE</acronym> dictionary</a> (warning,
		  very large <acronym class="acronym">XML</acronym> file).
		  <span class="emphasis"><em>Do not ever make up <acronym class="acronym">CPE</acronym>
		    data.</em></span></p></li><li class="step"><p>Add <code class="literal">cpe</code> to
		  <code class="varname">USES</code> and compare the result of
		  <code class="command">make -V CPE_STR</code> to the
		  <acronym class="acronym">CPE</acronym> dictionary entry.  Continue
		  one step at a time until <code class="command">make -V
		    CPE_STR</code> is correct.</p></li><li class="step"><p>If the product name (second field, defaults to
		  <code class="varname">PORTNAME</code>) is incorrect, define
		  <code class="varname">CPE_PRODUCT</code>.</p></li><li class="step"><p>If the vendor name (first field, defaults to
		  <code class="varname">CPE_PRODUCT</code>) is incorrect, define
		  <code class="varname">CPE_VENDOR</code>.</p></li><li class="step"><p>If the version field (third field, defaults to
		  <code class="varname">PORTVERSION</code>) is incorrect, define
		  <code class="varname">CPE_VERSION</code>.</p></li><li class="step"><p>If the update field (fourth field, defaults to
		  empty) is incorrect, define
		  <code class="varname">CPE_UPDATE</code>.</p></li><li class="step"><p>If it is still not correct, check
		  <code class="filename">Mk/Uses/cpe.mk</code> for additional
		  details, or contact the Ports Security Team <code class="email">&lt;<a xmlns="" class="email" href="mailto:ports-secteam@FreeBSD.org">ports-secteam@FreeBSD.org</a>&gt;</code>.</p></li><li class="step"><p>Derive as much as possible of the
		  <acronym class="acronym">CPE</acronym> name from existing variables
		  such as <code class="varname">PORTNAME</code> and
		  <code class="varname">PORTVERSION</code>.  Use variable
		  modifiers to extract the relevant portions from
		  these variables rather than hardcoding the
		  name.</p></li><li class="step"><p><span class="emphasis"><em>Always</em></span> run <code class="command">make -V
		    CPE_STR</code> and check the output before
		  committing anything that changes
		  <code class="varname">PORTNAME</code> or
		  <code class="varname">PORTVERSION</code> or any other variable
		  which is used to derive
		  <code class="varname">CPE_STR</code>.</p></li></ol></div>
	  </td></tr><tr><td valign="top"><a id="uses-cran"></a><code class="literal">cran</code></td><td valign="top">(none), <code class="literal">auto-plist</code></td><td valign="top">Uses the Comprehensive R Archive Network.  Specify
	    <code class="varname">auto-plist</code> to automatically generate
	    <code class="filename">pkg-plist</code>.</td></tr><tr><td valign="top"><a id="uses-desktop-file-utils"></a><code class="literal">desktop-file-utils</code></td><td valign="top">(none)</td><td valign="top">Uses
	    <span class="application">update-desktop-database</span> from
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/desktop-file-utils/pkg-descr">devel/desktop-file-utils</a>.
	    An extra post-install step will be run without interfering
	    with any post-install steps already in the port
	    <code class="filename">Makefile</code>.  A line with <a class="link" href="#plist-keywords-desktop-file-utils" title="7.6.1. @desktop-file-utils"><code class="literal">@desktop-file-utils</code></a>
	    will be added to the plist.</td></tr><tr><td valign="top"><a id="uses-desthack"></a><code class="literal">desthack</code></td><td valign="top">(none)</td><td valign="top">Changes the behavior of GNU configure to properly
	    support <code class="varname">DESTDIR</code> in case the original
	    software does not.</td></tr><tr><td valign="top"><a id="uses-display"></a><code class="literal">display</code></td><td valign="top">(none), ARGS</td><td valign="top">Set up a virtual display environment.  If the
	    environment variable <code class="varname">DISPLAY</code> is not
	    set, then <span class="application">Xvfb</span> is added as a
	    build dependency, and <code class="varname">CONFIGURE_ENV</code> is
	    extended with the port number of the currently running
	    instance of <span class="application">Xvfb</span>.  The
	    <code class="literal">ARGS</code> parameter defaults to
	    <code class="literal">install</code> and controls the phase around
	    which to start and stop the virtual display.</td></tr><tr><td valign="top"><a id="uses-dos2unix"></a><code class="literal">dos2unix</code></td><td valign="top">(none)</td><td valign="top">The port has files with line endings in
	    <acronym class="acronym">DOS</acronym> format which need to be converted.
	    Three variables can be set to control which files will be
	    converted.  The default is to convert
	    <span class="emphasis"><em>all</em></span> files, including binaries.  See
	    <a class="xref" href="#slow-patch-automatic-replacements" title="4.4.3. Simple Automatic Replacements">Section 4.4.3, &#8220;Simple Automatic Replacements&#8221;</a> for
	    examples.

	    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">DOS2UNIX_REGEX</code>: match file
		  names based on a regular expression.</p></li><li class="listitem"><p><code class="varname">DOS2UNIX_FILES</code>: match literal
		  file names.</p></li><li class="listitem"><p><code class="varname">DOS2UNIX_GLOB</code>: match file
		  names based on a glob pattern.</p></li></ul></div></td></tr><tr><td valign="top"><a id="uses-drupal"></a><code class="literal">drupal</code></td><td valign="top"><code class="literal">6</code>, <code class="literal">7</code>,
	    <code class="literal">module</code>,
	    <code class="literal">theme</code></td><td valign="top">Automate installation of a port that is a
	    <span class="application">Drupal</span>
	    theme or module.  Use with the version of Drupal that the
	    port is expecting.  For example,
	    <code class="literal">USES=drupal:6,module</code> says that this
	    port creates a Drupal 6 module.  A Drupal 7 theme can be
	    specified with
	    <code class="literal">USES=drupal:7,theme</code>.</td></tr><tr><td valign="top"><a id="uses-execinfo"></a><code class="literal">execinfo</code></td><td valign="top">(none)</td><td valign="top">Add a library dependency on <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/libexecinfo/pkg-descr">devel/libexecinfo</a> if
	    <code class="filename">libexecinfo.so</code> is not present in the
	    base system.</td></tr><tr><td valign="top"><a id="uses-fakeroot"></a><code class="literal">fakeroot</code></td><td valign="top">(none)</td><td valign="top">Changes some default behaviour of build systems to
	    allow installing as a user.  See <a class="link" href="http://fakeroot.alioth.debian.org/" target="_top">http://fakeroot.alioth.debian.org/</a> for
	    more information on <code class="command">fakeroot</code>.</td></tr><tr><td valign="top"><a id="uses-fam"></a><code class="literal">fam</code></td><td valign="top">(none), fam, gamin</td><td valign="top">Uses a File Alteration Monitor as a library
	    dependency, either
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/fam/pkg-descr">devel/fam</a> or
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/gamin/pkg-descr">devel/gamin</a>.  End users can
	    set WITH_FAM_SYSTEM to specify their preference.</td></tr><tr><td valign="top"><a id="uses-fmake"></a><code class="literal">fmake</code></td><td valign="top">(none)</td><td valign="top">Uses <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/fmake/pkg-descr">devel/fmake</a> as a
	    build-time dependency.</td></tr><tr><td valign="top"><a id="uses-fonts"></a><code class="literal">fonts</code></td><td valign="top">(none)</td><td valign="top">Adds a runtime dependency on tools needed to register
	    fonts, and add an <code class="literal"><a class="link" href="#plist-keywords-fcfontsdir" title="7.6.2. @fcfontsdir directory">@fcfontsdir</a>
	      ${FONTSDIR}</code> entry to the plist.
	    <code class="varname">FONTSDIR</code> defaults to
	    <code class="filename">${PREFIX}/lib/X11/fonts/${FONTNAME}</code>
	    and <code class="varname">FONTNAME</code> to
	    <code class="literal">${PORTNAME}</code>.</td></tr><tr><td valign="top"><a id="uses-fortran"></a><code class="literal">fortran</code></td><td valign="top"><code class="literal">gcc</code> (default),
	    <code class="literal">ifort</code></td><td valign="top">Uses the Fortran compiler from either GNU or
	    Intel.</td></tr><tr><td valign="top"><a id="uses-fuse"></a><code class="literal">fuse</code></td><td valign="top">(none)</td><td valign="top">The port will depend on the FUSE library and handle
	    the dependency on the kernel module depending on the
	    version of FreeBSD.</td></tr><tr><td valign="top"><a id="uses-gecko"></a><code class="literal">gecko</code></td><td valign="top"><code class="literal">libxul</code> (default),
	    <code class="literal">firefox</code>, <code class="literal">seamonkey</code>,
	    <code class="literal">thunderbird</code>, <code class="literal">build</code>,
	    <code class="literal"><em class="replaceable"><code>XY</code></em></code>,
	    <code class="literal"><em class="replaceable"><code>XY</code></em>+</code></td><td valign="top">Add a dependency on different
	    <span class="application">gecko</span> based applications.  If
	    <code class="literal">libxul</code> is used, it is the only argument
	    allowed.  When the argument is not
	    <code class="literal">libxul</code>, the <code class="literal">firefox</code>,
	    <code class="literal">seamonkey</code>, or
	    <code class="literal">thunderbird</code> arguments can be used,
	    along with optional <code class="literal">build</code> and
	    <code class="literal"><em class="replaceable"><code>XY</code></em></code>/<code class="literal"><em class="replaceable"><code>XY</code></em>+</code>
	    version
	    arguments.</td></tr><tr><td valign="top"><a id="uses-gettext"></a><code class="literal">gettext</code></td><td valign="top">(none)</td><td valign="top">Deprecated.  Will include both <a class="link" href="#uses-gettext-runtime"><code class="literal">gettext-runtime</code></a>
	    and <a class="link" href="#uses-gettext-tools"><code class="literal">gettext-tools</code></a>.</td></tr><tr><td valign="top"><a id="uses-gettext-runtime"></a><code class="literal">gettext-runtime</code></td><td valign="top">(none), <code class="literal">lib</code> (default),
	    <code class="literal">build</code>, <code class="literal">run</code></td><td valign="top">Uses <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/gettext-runtime/pkg-descr">devel/gettext-runtime</a>.  By
	    default, with no arguments or with the
	    <code class="literal">lib</code> argument, implies a library
	    dependency on <code class="filename">libintl.so</code>.
	    <code class="literal">build</code> and <code class="literal">run</code>
	    implies, respectively a build-time and a run-time
	    dependency on <code class="filename">gettext</code>.</td></tr><tr><td valign="top"><a id="uses-gettext-tools"></a><code class="literal">gettext-tools</code></td><td valign="top">(none), <code class="literal">build</code> (default),
	    <code class="literal">run</code></td><td valign="top">Uses <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/gettext-tools/pkg-descr">devel/gettext-tools</a>.  By default,
	    with no argument, or with the <code class="literal">build</code>
	    argument, a build time dependency on
	    <code class="filename">msgfmt</code> is registered.  With the
	    <code class="literal">run</code> argument, a run-time dependency is
	    registered.</td></tr><tr><td valign="top"><a id="uses-gmake"></a><code class="literal">gmake</code></td><td valign="top">(none), <code class="literal">lite</code></td><td valign="top">Uses <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/gmake/pkg-descr">devel/gmake</a>, or
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/gmake-lite/pkg-descr">devel/gmake-lite</a> if the
	    <code class="literal">lite</code> argument is used, as a
	    build-time dependency and sets up the environment to use
	    <code class="command">gmake</code> as the default
	    <code class="command">make</code> for the build.</td></tr><tr><td valign="top"><a id="uses-gperf"></a><code class="literal">gperf</code></td><td valign="top">(none)</td><td valign="top">Add a buildtime dependency on <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/gperf/pkg-descr">devel/gperf</a> if
	    <code class="command">gperf</code> is not present in the base
	    system.</td></tr><tr><td valign="top"><a id="uses-gssapi"></a><code class="literal">gssapi</code></td><td valign="top">(none), <code class="literal">base</code> (default),
	    <code class="literal">heimdal</code>, <code class="literal">mit</code>,
	    <code class="literal">flags</code>,
	    <code class="literal">bootstrap</code></td><td valign="top">
	    <p>Handle dependencies needed by consumers of the
	      <acronym class="acronym">GSS-API</acronym>.  Only libraries that provide
	      the <span class="application">Kerberos</span> mechanism are
	      available.  By default, or set to
	      <code class="literal">base</code>, the <acronym class="acronym">GSS-API</acronym>
	      library from the base system is used.  Can also be set
	      to <code class="literal">heimdal</code> to use
	      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/heimdal/pkg-descr">security/heimdal</a>, or
	      <code class="literal">mit</code> to use
	      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/krb5/pkg-descr">security/krb5</a>.</p>

	    <p>When the local <span class="application">Kerberos</span>
	      installation is not in <code class="varname">LOCALBASE</code>, set
	      <code class="varname">HEIMDAL_HOME</code> (for
	      <code class="literal">heimdal</code>) or
	      <code class="varname">KRB5_HOME</code> (for
	      <code class="literal">krb5</code>) to the location of the
	      <span class="application">Kerberos</span> installation.</p>

	    <p>These variables are exported for the ports to
	      use:</p>

	    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">GSSAPIBASEDIR</code></p></li><li class="listitem"><p><code class="varname">GSSAPICPPFLAGS</code></p></li><li class="listitem"><p><code class="varname">GSSAPIINCDIR</code></p></li><li class="listitem"><p><code class="varname">GSSAPILDFLAGS</code></p></li><li class="listitem"><p><code class="varname">GSSAPILIBDIR</code></p></li><li class="listitem"><p><code class="varname">GSSAPILIBS</code></p></li><li class="listitem"><p><code class="varname">GSSAPI_CONFIGURE_ARGS</code></p></li></ul></div>

	    <p>The <code class="literal">flags</code> option can be given
	      alongside <code class="literal">base</code>,
	      <code class="literal">heimdal</code>, or <code class="literal">mit</code> to
	      automatically add <code class="varname">GSSAPICPPFLAGS</code>,
	      <code class="varname">GSSAPILDFLAGS</code>, and
	      <code class="varname">GSSAPILIBS</code> to
	      <code class="varname">CFLAGS</code>, <code class="varname">LDFLAGS</code>,
	      and <code class="varname">LDADD</code>, respectively.  For
	      example, use <code class="literal">base,flags</code>.</p>

	    <p>The <code class="literal">bootstrap</code> option is a special
	      prefix only for use by
	      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/krb5/pkg-descr">security/krb5</a> and
	      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/heimdal/pkg-descr">security/heimdal</a>.  For
	      example, use <code class="literal">bootstrap,mit</code>.</p>

	    <div class="example"><a id="idp69976400"></a><div class="example-title">Example 15.1. Typical Use</div><div class="example-contents"><pre class="programlisting">OPTIONS_SINGLE=	GSSAPI
OPTIONS_SINGLE_GSSAPI=	GSSAPI_BASE GSSAPI_HEIMDAL GSSAPI_MIT GSSAPI_NONE

GSSAPI_BASE_USES=	gssapi
GSSAPI_BASE_CONFIGURE_ON=	--with-gssapi=${GSSAPIBASEDIR} ${GSSAPI_CONFIGURE_ARGS}
GSSAPI_HEIMDAL_USES=	gssapi:heimdal
GSSAPI_HEIMDAL_CONFIGURE_ON=	--with-gssapi=${GSSAPIBASEDIR} ${GSSAPI_CONFIGURE_ARGS}
GSSAPI_MIT_USES=	gssapi:mit
GSSAPI_MIT_CONFIGURE_ON=	--with-gssapi=${GSSAPIBASEDIR} ${GSSAPI_CONFIGURE_ARGS}
GSSAPI_NONE_CONFIGURE_ON=	--without-gssapi</pre></div></div><br class="example-break" /></td></tr><tr><td valign="top"><a id="uses-horde"></a><code class="literal">horde</code></td><td valign="top">(none)</td><td valign="top">Add buildtime and runtime dependencies on <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/pear-channel-horde/pkg-descr">devel/pear-channel-horde</a>.  Other
	    <span class="application">Horde</span> dependencies can be added
	    with <code class="varname">USE_HORDE_BUILD</code> and
	    <code class="varname">USE_HORDE_RUN</code>.  See <a class="xref" href="#php-horde" title="6.14.4.1. Horde Modules">Section 6.14.4.1, &#8220;<span class="application">Horde</span> Modules&#8221;</a> for more information.</td></tr><tr><td valign="top"><a id="uses-iconv"></a><code class="literal">iconv</code></td><td valign="top">(none), <code class="literal">lib</code>,
	    <code class="literal">build</code>,
	    <code class="literal">patch</code>, <code class="literal">translit</code>,
	    <code class="literal">wchar_t</code></td><td valign="top">Uses <code class="command">iconv</code> functions, either from
	    the port
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/converters/libiconv/pkg-descr">converters/libiconv</a> as a
	    build-time and run-time dependency, or from the base
	    system on 10-CURRENT after a native
	    <code class="command">iconv</code> was committed in
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254273"><span class="svnref">254273</span></a>.  By default, with no
	    arguments or with the <code class="literal">lib</code> argument,
	    implies <code class="command">iconv</code> with build-time and
	    run-time dependencies.  <code class="literal">build</code> implies a
	    build-time dependency, and <code class="literal">patch</code>
	    implies a patch-time dependency.  If the port uses the
	    <code class="literal">WCHAR_T</code> or
	    <code class="literal">//TRANSLIT</code> iconv extensions, add the
	    relevant arguments so that the correct iconv is used.  For
	    more information see
	    <a class="xref" href="#using-iconv" title="6.22. Using iconv">Section 6.22, &#8220;Using <code class="command">iconv</code>&#8221;</a>.</td></tr><tr><td valign="top"><a id="uses-imake"></a><code class="literal">imake</code></td><td valign="top">(none), <code class="literal">env</code>,
	    <code class="literal">notall</code>,
	    <code class="literal">noman</code></td><td valign="top">Add <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/imake/pkg-descr">devel/imake</a> as a
	    build-time dependency and run <code class="command">xmkmf -a</code>
	    during the <code class="buildtarget">configure</code> stage.  If
	    the <code class="literal">env</code> argument is given, the
	    <code class="buildtarget">configure</code> target is not set.
	    If the <code class="option">-a</code> flag is a problem for the port,
	    add the <code class="literal">notall</code> argument.  If
	    <code class="command">xmkmf</code> does not generate a
	    <code class="buildtarget">install.man</code> target, add the
	    <code class="literal">noman</code> argument.</td></tr><tr><td valign="top"><a id="uses-kmod"></a><code class="literal">kmod</code></td><td valign="top">(none)</td><td valign="top">Fills in the boilerplate for kernel module ports,
	    currently:

	    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Add <code class="literal">kld</code> to
		  <code class="varname">CATEGORIES</code>.</p></li><li class="listitem"><p>Set <code class="varname">SSP_UNSAFE</code>.</p></li><li class="listitem"><p>Set <code class="varname">IGNORE</code> if the kernel
		  sources are not found in
		  <code class="varname">SRC_BASE</code>.</p></li><li class="listitem"><p>Define <code class="varname">KMODDIR</code> to
		  <code class="filename">/boot/modules</code>
		  by default, add it to <code class="varname">PLIST_SUB</code>
		  and <code class="varname">MAKE_ENV</code>, and create it upon
		  installation.  If <code class="varname">KMODDIR</code> is set
		  to <code class="filename">/boot/kernel</code>, it will be
		  rewritten to <code class="filename">/boot/modules</code>.  This
		  prevents breaking packages when upgrading the kernel
		  due to <code class="filename">/boot/kernel</code> being
		  renamed to <code class="filename">/boot/kernel.old</code> in
		  the process.</p></li><li class="listitem"><p>Handle cross-referencing kernel modules upon
		  installation and deinstallation, using <a class="link" href="#plist-keywords-kld" title="7.6.5. @kld directory"><code class="literal">@kld</code></a>.</p></li></ul></div></td></tr><tr><td valign="top"><a id="uses-lha"></a><code class="literal">lha</code></td><td valign="top">(none)</td><td valign="top">Set <code class="varname">EXTRACT_SUFX</code> to
	    <code class="literal">.lzh</code></td></tr><tr><td valign="top"><a id="uses-libtool"></a><code class="literal">libtool</code></td><td valign="top">(none), <code class="literal">keepla</code>,
	    <code class="literal">build</code></td><td valign="top">Patches <code class="command">libtool</code> scripts.  This
	    must be added to all ports that use
	    <code class="command">libtool</code>.  The <code class="literal">keepla</code>
	    argument can be used to keep <code class="filename">.la</code>
	    files.  Some ports do not ship with their own copy of
	    libtool and need a build time dependency on <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/libtool/pkg-descr">devel/libtool</a>, use the
	    <code class="literal">:build</code> argument to add such
	    dependency.</td></tr><tr><td valign="top"><a id="uses-lua"></a><code class="literal">lua</code></td><td valign="top">(none),
	    <code class="literal"><em class="replaceable"><code>XY</code></em>+</code>,
	    <code class="literal"><em class="replaceable"><code>XY</code></em></code>,
	    <code class="literal">build</code>,
	    <code class="literal">run</code></td><td valign="top">Adds a dependency on <span class="application">Lua</span>.
	    By default this is a library dependency, unless
	    overridden by the <code class="literal">build</code> or
	    <code class="literal">run</code> option.  The default version is
	    5.2, unless set by the
	    <code class="literal"><em class="replaceable"><code>XY</code></em></code> parameter
	    (for example, <code class="literal">51</code> or
	    <code class="literal">52+</code>).</td></tr><tr><td valign="top"><a id="uses-makeinfo"></a><code class="literal">makeinfo</code></td><td valign="top"><code class="literal">build</code> (default),
	    <code class="literal">run</code>, <code class="literal">both</code></td><td valign="top">Add the corresponding dependencies on
	    <code class="command">makeinfo</code>.</td></tr><tr><td valign="top"><a id="uses-makeself"></a><code class="literal">makeself</code></td><td valign="top">(none)</td><td valign="top">Indicates that the distribution files are makeself
	    archives and sets the appropriate dependencies.</td></tr><tr><td valign="top"><a id="uses-metaport"></a><code class="literal">metaport</code></td><td valign="top">(none)</td><td valign="top">Sets the following variables to make it easier to
	    create a metaport: <code class="varname">MASTER_SITES</code>,
	    <code class="varname">DISTFILES</code>,
	    <code class="varname">EXTRACT_ONLY</code>,
	    <code class="varname">NO_BUILD</code>, <code class="varname">NO_INSTALL</code>,
	    <code class="varname">NO_MTREE</code>, <code class="varname">NO_ARCH</code>.
	  </td></tr><tr><td valign="top"><a id="uses-mono"></a><code class="literal">mono</code></td><td valign="top">(none)</td><td valign="top">Adds a dependency on the
	    <span class="application">Mono</span> (currently only C#)
	    framework by setting the appropriate dependencies.</td></tr><tr><td valign="top"><a id="uses-motif"></a><code class="literal">motif</code></td><td valign="top">(none)</td><td valign="top">Uses
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/open-motif/pkg-descr">x11-toolkits/open-motif</a> as
	    a library dependency.  End users can set
	    <code class="varname">WANT_LESSTIF</code> for the dependency to be
	    on <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/lesstif/pkg-descr">x11-toolkits/lesstif</a>
	    instead of <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/open-motif/pkg-descr">x11-toolkits/open-motif</a>.</td></tr><tr><td valign="top"><a id="uses-ncurses"></a><code class="literal">ncurses</code></td><td valign="top">(none), <code class="literal">base</code>,
	    <code class="literal">port</code></td><td valign="top">Uses <span class="application">ncurses</span>, and causes
	    some useful variables to be set.</td></tr><tr><td valign="top"><a id="uses-ninja"></a><code class="literal">ninja</code></td><td valign="top">(none)</td><td valign="top">Uses <span class="application">ninja</span> to build the
	    port.  End users can set <code class="varname">NINJA_VERBOSE</code>
	    for verbose output.</td></tr><tr><td valign="top"><a id="uses-objc"></a><code class="literal">objc</code></td><td valign="top">(none)</td><td valign="top">Add objective C dependencies (compiler, runtime
	    library) if the base system does not support it.</td></tr><tr><td valign="top"><a id="uses-openal"></a><code class="literal">openal</code></td><td valign="top"><code class="literal">al</code>, <code class="literal">soft</code>
	    (default), <code class="literal">si</code>,
	    <code class="literal">alut</code></td><td valign="top">Uses <span class="application">OpenAL</span>.  The backend
	    can be specified, with the software implementation as the
	    default.  The user can specify a preferred backend with
	    <code class="varname">WANT_OPENAL</code>.  Valid values for
	    this knob are <code class="literal">soft</code> (default) and
	    <code class="literal">si</code>.</td></tr><tr><td valign="top"><a id="uses-pathfix"></a><code class="literal">pathfix</code></td><td valign="top">(none)</td><td valign="top">Look for <code class="filename">Makefile.in</code> and
	    <code class="filename">configure</code> in the port's
	    associated sources and fix common paths to make sure they
	    respect the FreeBSD hierarchy.  If the port uses
	    <code class="command">automake</code>, set
	    <code class="varname">PATHFIX_MAKEFILEIN</code> to
	    <code class="filename">Makefile.am</code> if needed.</td></tr><tr><td valign="top"><a id="uses-pear"></a><code class="literal">pear</code></td><td valign="top">(none)</td><td valign="top">Adds a dependency on <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/pear/pkg-descr">devel/pear</a>.  It will setup default
	    behavior for software using the
	    <span class="application">PHP</span> Extension and Application
	    Repository.  See <a class="xref" href="#php-pear" title="6.14.4. PEAR Modules">Section 6.14.4, &#8220;PEAR Modules&#8221;</a> for more
	    information.</td></tr><tr><td valign="top"><a id="uses-perl5"></a><code class="literal">perl5</code></td><td valign="top">(none)</td><td valign="top">Depends on <span class="application">Perl</span>.  These
	    variables can be set:

	    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">PERL_VERSION</code>: Full version of
		  <span class="application">Perl</span> to use, or the
		  default if not set</p></li><li class="listitem"><p><code class="varname">PERL_ARCH</code>: Directory name of
		  architecture dependent libraries, defaults to
		  <code class="filename">mach</code></p></li><li class="listitem"><p><code class="varname">PERL_PORT</code>: Name of the
		  <span class="application">Perl</span> port to be
		  installed, the default is derived from
		  <code class="varname">PERL_VERSION</code></p></li><li class="listitem"><p><code class="varname">SITE_PERL</code>: Directory name for
		  site specific <span class="application">Perl</span>
		  packages</p></li><li class="listitem"><p><code class="varname">USE_PERL5</code>: Phases in which to
		  use <span class="application">Perl</span>, can be
		  <code class="literal">extract</code>,
		  <code class="literal">patch</code>, <code class="literal">build</code>,
		  <code class="literal">install</code>, or
		  <code class="literal">run</code>.  It can also be
		  <code class="literal">configure</code>,
		  <code class="literal">modbuild</code>, or
		  <code class="literal">modbuildtiny</code> when
		  <code class="filename">Makefile.PL</code>,
		  <code class="filename">Build.PL</code>, or the
		  Module::Build::Tiny flavor of
		  <code class="filename">Build.PL</code> is required.  It
		  defaults to <code class="literal">build run</code>.</p></li></ul></div></td></tr><tr><td valign="top"><a id="uses-pgsql"></a><code class="literal">pgsql</code></td><td valign="top">(none),
	    <code class="literal"><em class="replaceable"><code>X.Y</code></em></code>,
	    <code class="literal"><em class="replaceable"><code>X.Y</code></em>+</code>,
	    <code class="literal"><em class="replaceable"><code>X.Y</code></em>-</code></td><td valign="top">
	    <p>Provide support for PostgreSQL.  Maintainer can
	      set version required.  Minimum and maximum versions can
	      be specified; for example, 9.0-, 8.4+.</p>

	    <p>Add PostgreSQL component dependency, using
	      <code class="literal">WANT_PGSQL=component[:target]</code>.  for example,
	      <code class="literal">WANT_PGSQL=server:configure pltcl
		plperl</code>  For the full list use
	      <code class="command">make -V _USE_PGSQL_DEP</code>.</p>
	  </td></tr><tr><td valign="top"><a id="uses-pkgconfig"></a><code class="literal">pkgconfig</code></td><td valign="top">(none), <code class="literal">build</code> (default),
	    <code class="literal">run</code>, <code class="literal">both</code></td><td valign="top">Uses <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/pkgconf/pkg-descr">devel/pkgconf</a>.
	    With no arguments or with the <code class="literal">build</code>
	    argument, it implies <code class="command">pkg-config</code> as a
	    build-time dependency.  <code class="literal">run</code> implies a
	    run-time dependency and <code class="literal">both</code> implies
	    both run-time and build-time dependencies.</td></tr><tr><td valign="top"><a id="uses-pure"></a><code class="literal">pure</code></td><td valign="top">(none), <code class="literal">ffi</code></td><td valign="top">Uses <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/pure/pkg-descr">lang/pure</a>.
	    Largely used for building related
	    <span class="application">pure</span> ports.  With the
	    <code class="literal">ffi</code> argument, it implies
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/pure-ffi/pkg-descr">devel/pure-ffi</a> as a
	    run-time dependency.</td></tr><tr><td valign="top"><a id="uses-python"></a><code class="literal">python</code></td><td valign="top">(none),
        <code class="literal"><em class="replaceable"><code>X.Y</code></em></code>,
	    <code class="literal"><em class="replaceable"><code>X.Y+</code></em></code>,
        <code class="literal"><em class="replaceable"><code>-X.Y</code></em></code>,
        <code class="literal"><em class="replaceable"><code>X.Y-Z.A</code></em></code>,
        <code class="literal">build</code>,
	    <code class="literal">run</code>
      </td><td valign="top">Uses <span class="application">Python</span>. A supported
	    version or version range can be specified. If Python is
	    only needed at build or run time, it can be set as a build
	    or run dependency with <code class="literal">build</code> or
	    <code class="literal">run</code>. See <a class="xref" href="#using-python" title="6.15. Using Python">Section 6.15, &#8220;Using Python&#8221;</a>
            for more information.</td></tr><tr><td valign="top"><a id="uses-qmail"></a><code class="literal">qmail</code></td><td valign="top">(none), <code class="literal">build</code>,
	    <code class="literal">run</code>,
	    <code class="literal">both</code>, <code class="literal">vars</code></td><td valign="top">Uses <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/qmail/pkg-descr">mail/qmail</a>.  With
	    the <code class="literal">build</code> argument, it implies
	    <code class="command">qmail</code> as a build-time dependency.
	    <code class="literal">run</code> implies a run-time dependency.
	    Using no argument or the <code class="literal">both</code> argument
	    implies both run-time and build-time dependencies.
	    <code class="literal">vars</code> will only set QMAIL variables for
	    the port to use.</td></tr><tr><td valign="top"><a id="uses-qmake"></a><code class="literal">qmake</code></td><td valign="top">(none), <code class="literal">norecursive</code>,
	    <code class="literal">outsource</code></td><td valign="top">Uses <span class="application">QMake</span> for
	    configuring.  For more information see
	    <a class="xref" href="#using-qmake" title="6.11.3. Using qmake">Section 6.11.3, &#8220;Using <code class="command">qmake</code>&#8221;</a>.</td></tr><tr><td valign="top"><a id="uses-readline"></a><code class="literal">readline</code></td><td valign="top">(none), <code class="literal">port</code></td><td valign="top">Uses <span class="application">readline</span> as a library
	    dependency, and sets <code class="varname">CPPFLAGS</code> and
	    <code class="varname">LDFLAGS</code> as necessary.  If the
	    <code class="literal">port</code> argument is used or if readline
	    is not present in the base system, add a dependency on
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/readline/pkg-descr">devel/readline</a></td></tr><tr><td valign="top"><a id="uses-scons"></a><code class="literal">scons</code></td><td valign="top">(none)</td><td valign="top">Provide support for the use of
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/scons/pkg-descr">devel/scons</a></td></tr><tr><td valign="top"><a id="uses-shared-mime-info"></a><code class="literal">shared-mime-info</code></td><td valign="top">(none)</td><td valign="top">Uses <span class="application">update-mime-database</span>
	    from <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/misc/shared-mime-info/pkg-descr">misc/shared-mime-info</a>.
	    This uses will automatically add a post-install step in
	    such a way that the port itself still can specify there
	    own post-install step if needed.  It also add an <a class="link" href="#plist-keywords-shared-mime-info" title="7.6.8. @shared-mime-info directory"><code class="literal">@shared-mime-info</code></a>
	    entry to the plist.</td></tr><tr><td valign="top"><a id="uses-shebangfix"></a><code class="literal">shebangfix</code></td><td valign="top">(none)</td><td valign="top">A lot of software uses incorrect locations for script
	    interpreters, most notably
	    <code class="filename">/usr/bin/perl</code> and
	    <code class="filename">/bin/bash</code>.  This fixes shebang lines
	    in scripts listed in <code class="varname">SHEBANG_FILES</code>.
	    Currently <span class="application">Bash</span>,
	    <span class="application">Java</span>,
	    <span class="application">Ksh</span>,
	    <span class="application">Perl</span>,
	    <span class="application">PHP</span>,
	    <span class="application">Python</span>,
	    <span class="application">Ruby</span>,
	    <span class="application">Tcl</span>, and
	    <span class="application">Tk</span> are supported by default.
	    To support another interpreter, set
	    <code class="varname">SHEBANG_LANG</code>,
	    <code class="varname">lua_OLD_CMD</code> and
	    <code class="varname">lua_CMD</code>.  For example
	    <code class="literal">SHEBANG_LANG=lua</code>, then
	    <code class="varname">lua_OLD_CMD=/usr/bin/lua</code> and
	    <code class="varname">lua_CMD=${LOCALBASE}/bin/lua</code>.</td></tr><tr><td valign="top"><a id="uses-tar"></a><code class="literal">tar</code></td><td valign="top">(none), <code class="literal">Z</code>, <code class="literal">bz2</code>,
	    <code class="literal">bzip2</code>, <code class="literal">lzma</code>,
	    <code class="literal">tbz</code>, <code class="literal">tgz</code>,
	    <code class="literal">txz</code>, <code class="literal">xz</code></td><td valign="top">Set <code class="varname">EXTRACT_SUFX</code> to
	    <code class="literal">.tar</code>, <code class="literal">.tar.Z</code>,
	    <code class="literal">.tar.bz2</code>, <code class="literal">.tar.bz2</code>,
	    <code class="literal">.tar.lzma</code>, <code class="literal">.tbz</code>,
	    <code class="literal">.tgz</code>, <code class="literal">.txz</code> or
	    <code class="literal">.tar.xz</code> respectively.</td></tr><tr><td valign="top"><a id="uses-tcl"></a><code class="literal">tcl</code></td><td valign="top"><code class="literal">PORT</code></td><td valign="top">Add a dependency on <span class="application">Tcl</span>.
	    The <code class="literal">PORT</code> parameter can be either
	    <code class="literal">tcl</code> or <code class="literal">tk</code>.  Either a
	    version or wrapper dependency can be appended using
	    <code class="literal">PORT:version</code> or
	    <code class="literal">PORT:wrapper</code>.  The version can be
	    empty, one or more exact version numbers (currently
	    <code class="literal">84</code>, <code class="literal">85</code>, or
	    <code class="literal">86</code>), or a minimal version number
	    (currently <code class="literal">84+</code>, <code class="literal">85+</code>
	    or <code class="literal">86+</code>).  A build- or run-time only
	    dependency can be specified using
	    <code class="literal">PORT,build</code> or
	    <code class="literal">PORT,run</code>.  After including
	    <code class="filename">bsd.port.pre.mk</code> the port can inspect
	    the results using these variables:

	    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">TCL_VER</code>: chosen major.minor
		  version of <span class="application">Tcl</span></p></li><li class="listitem"><p><code class="varname">TCLSH</code>: full path of the
		  <span class="application">Tcl</span> interpreter</p></li><li class="listitem"><p><code class="varname">TCL_LIBDIR</code>: path of the
		  <span class="application">Tcl</span> libraries</p></li><li class="listitem"><p><code class="varname">TCL_INCLUDEDIR</code>: path of the
		  <span class="application">Tcl</span> C header files</p></li><li class="listitem"><p><code class="varname">TK_VER</code>: chosen major.minor
		  version of <span class="application">Tk</span></p></li><li class="listitem"><p><code class="varname">WISH</code>: full path of the
		  <span class="application">Tk</span> interpreter</p></li><li class="listitem"><p><code class="varname">TK_LIBDIR</code>: path of the
		  <span class="application">Tk</span> libraries</p></li><li class="listitem"><p><code class="varname">TK_INCLUDEDIR</code>: path of the
		  <span class="application">Tk</span> C header files</p></li></ul></div></td></tr><tr><td valign="top"><a id="uses-tk"></a><code class="literal">tk</code></td><td valign="top">Same as arguments for <code class="literal">tcl</code></td><td valign="top">Small wrapper when using both
	    <span class="application">Tcl</span> and
	    <span class="application">Tk</span>.  The same variables are
	    returned as when using
	    <span class="application">Tcl</span>.</td></tr><tr><td valign="top"><a id="uses-twisted"></a><code class="literal">twisted</code></td><td valign="top">(none), <code class="literal">ARGS</code></td><td valign="top">Add a dependency on
	    <span class="application">twistedCore</span>.  The list of
	    required components can be specified as a value of this
	    variable.  <code class="literal">ARGS</code> can be one of:

	    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">build</code>: add
		  <span class="application">twistedCore</span> or any
		  specified component as build dependency.</p></li><li class="listitem"><p><code class="literal">run</code>: add
		  <span class="application">twistedCore</span> or any
		  specified component as run dependency.</p></li></ul></div>

	    Besides <code class="literal">build</code> and
	    <code class="literal">run</code>, one or more other supported
	    <span class="application">twisted</span> components can be
	    specified.  Supported values are listed in
	    <code class="filename">Uses/twisted.mk</code>.</td></tr><tr><td valign="top"><a id="uses-uidfix"></a><code class="literal">uidfix</code></td><td valign="top">(none)</td><td valign="top">Changes some default behavior (mostly variables) of
	    the build system to allow installing this port as a normal
	    user.  Try this in the port before adding
	    <code class="literal">NEED_ROOT=yes</code></td></tr><tr><td valign="top"><a id="uses-uniquefiles"></a><code class="literal">uniquefiles</code></td><td valign="top">(none), <code class="literal">dirs</code></td><td valign="top">Make files or directories 'unique', by adding a
	    prefix or suffix.  If the <code class="literal">dirs</code> argument
	    is used, the port needs a prefix (a only a prefix) based
	    on <code class="varname">UNIQUE_PREFIX</code> for standard
	    directories <code class="varname">DOCSDIR</code>,
	    <code class="varname">EXAMPLESDIR</code>,
	    <code class="varname">DATADIR</code>, <code class="varname">WWWDIR</code>,
	    <code class="varname">ETCDIR</code>.  These variables are
	    available for ports:

	    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">UNIQUE_PREFIX</code>: The prefix to
		  be used for directories and files.  Default:
		  <code class="varname">${PKGNAMEPREFIX}</code>.</p></li><li class="listitem"><p><code class="varname">UNIQUE_PREFIX_FILES</code>: A list
		  of files that need to be prefixed.  Default:
		  empty.</p></li><li class="listitem"><p><code class="varname">UNIQUE_SUFFIX</code>: The suffix to
		  be used for files.  Default:
		  <code class="varname">${PKGNAMESUFFIX}</code>.</p></li><li class="listitem"><p><code class="varname">UNIQUE_SUFFIX_FILES</code>: A list
		  of files that need to be suffixed.  Default:
		  empty.</p></li></ul></div></td></tr><tr><td valign="top"><a id="uses-webplugin"></a><code class="literal">webplugin</code></td><td valign="top">(none), <code class="literal">ARGS</code></td><td valign="top">Automatically create and remove symbolic links for
	    each application that supports the webplugin framework.
	    <code class="literal">ARGS</code> can be one of:

	    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">gecko</code>: support plug-ins based
		  on Gecko</p></li><li class="listitem"><p><code class="literal">native</code>: support plug-ins for
		  Gecko, Opera, and WebKit-GTK</p></li><li class="listitem"><p><code class="literal">linux</code>: support Linux
		  plug-ins</p></li><li class="listitem"><p><code class="literal">all</code> (default, implicit):
		  support all plug-in types</p></li><li class="listitem"><p>(individual entries): support only the browsers
		  listed</p></li></ul></div>

	    These variables can be adjusted:

	    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">WEBPLUGIN_FILES</code>: No default,
		  must be set manually.  The plug-in files to
		  install.</p></li><li class="listitem"><p><code class="varname">WEBPLUGIN_DIR</code>: The directory
		  to install the plug-in files to, default
		  <code class="filename"><em class="replaceable"><code>PREFIX</code></em>/lib/browser_plugins/<em class="replaceable"><code>WEBPLUGIN_NAME</code></em></code>.
		  Set this if the port installs plug-in files outside
		  of the default directory to prevent broken symbolic
		  links.</p></li><li class="listitem"><p><code class="varname">WEBPLUGIN_NAME</code>: The final
		  directory to install the plug-in files into, default
		  <code class="varname">PKGBASE</code>.</p></li></ul></div></td></tr><tr><td valign="top"><a id="uses-xfce"></a><code class="literal">xfce</code></td><td valign="top">(none), <code class="literal">gtk3</code></td><td valign="top">
	    <p>Provide support for <span class="application">Xfce</span>
	      related ports.  See <a class="xref" href="#using-xfce" title="6.23. Using Xfce">Section 6.23, &#8220;Using Xfce&#8221;</a> for
	      details.</p>

	    <p>The <code class="literal">gtk3</code> argument specifies that
	      the port requires <span class="application">GTK3</span>
	      features provided by <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/libxfce4menu/pkg-descr">x11/libxfce4menu</a>.</p>
	  </td></tr><tr><td valign="top"><a id="uses-zip"></a><code class="literal">zip</code></td><td valign="top">(none), <code class="literal">infozip</code></td><td valign="top">Indicates that the distribution files use the ZIP
	    compression algorithm.  For files using the InfoZip
	    algorithm the <code class="literal">infozip</code> argument must be
	    passed to set the appropriate dependencies.</td></tr><tr><td valign="top"><a id="uses-zope"></a><code class="literal">zope</code></td><td valign="top">(none)</td><td valign="top">Uses <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/zope/pkg-descr">www/zope</a>.  Mostly
	    used for building <span class="application">zope</span> related
	    ports.  <code class="varname">ZOPE_VERSION</code> can be used by a
	    port to indicate that a specific version of
	    <span class="application">zope</span> shall be used.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="versions"></a>Chapter 16. <code class="literal">__FreeBSD_version</code>
    Values</h1></div></div></div><p>Here is a convenient list of
    <code class="literal">__FreeBSD_version</code> values as defined in
    <a class="link" href="http://svnweb.FreeBSD.org/base/head/sys/sys/param.h?view=markup" target="_top">sys/param.h</a>:</p><div class="table"><a id="freebsd-versions-table"></a><div class="table-title">Table 16.1. <code class="literal">__FreeBSD_version</code> Values</div><div class="table-contents"><table summary="__FreeBSD_version Values" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Value</th><th>Date</th><th>Release</th></tr></thead><tbody><tr><td>119411</td><td> </td><td>2.0-RELEASE</td></tr><tr><td>199501, 199503</td><td>March 19, 1995</td><td>2.1-CURRENT</td></tr><tr><td>199504</td><td>April 9, 1995</td><td>2.0.5-RELEASE</td></tr><tr><td>199508</td><td>August 26, 1995</td><td>2.2-CURRENT before 2.1</td></tr><tr><td>199511</td><td>November 10, 1995</td><td>2.1.0-RELEASE</td></tr><tr><td>199512</td><td>November 10, 1995</td><td>2.2-CURRENT before 2.1.5</td></tr><tr><td>199607</td><td>July 10, 1996</td><td>2.1.5-RELEASE</td></tr><tr><td>199608</td><td>July 12, 1996</td><td>2.2-CURRENT before 2.1.6</td></tr><tr><td>199612</td><td>November 15, 1996</td><td>2.1.6-RELEASE</td></tr><tr><td>199612</td><td> </td><td>2.1.7-RELEASE</td></tr><tr><td>220000</td><td>February 19, 1997</td><td>2.2-RELEASE</td></tr><tr><td>(not changed)</td><td> </td><td>2.2.1-RELEASE</td></tr><tr><td>(not changed)</td><td> </td><td>2.2-STABLE after 2.2.1-RELEASE</td></tr><tr><td>221001</td><td>April 15, 1997</td><td>2.2-STABLE after texinfo-3.9</td></tr><tr><td>221002</td><td>April 30, 1997</td><td>2.2-STABLE after top</td></tr><tr><td>222000</td><td>May 16, 1997</td><td>2.2.2-RELEASE</td></tr><tr><td>222001</td><td>May 19, 1997</td><td>2.2-STABLE after 2.2.2-RELEASE</td></tr><tr><td>225000</td><td>October 2, 1997</td><td>2.2.5-RELEASE</td></tr><tr><td>225001</td><td>November 20, 1997</td><td>2.2-STABLE after 2.2.5-RELEASE</td></tr><tr><td>225002</td><td>December 27, 1997</td><td>2.2-STABLE after ldconfig -R merge</td></tr><tr><td>226000</td><td>March 24, 1998</td><td>2.2.6-RELEASE</td></tr><tr><td>227000</td><td>July 21, 1998</td><td>2.2.7-RELEASE</td></tr><tr><td>227001</td><td>July 21, 1998</td><td>2.2-STABLE after 2.2.7-RELEASE</td></tr><tr><td>227002</td><td>September 19, 1998</td><td>2.2-STABLE after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=semctl&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">semctl</span>(2)</span></a> change</td></tr><tr><td>228000</td><td>November 29, 1998</td><td>2.2.8-RELEASE</td></tr><tr><td>228001</td><td>November 29, 1998</td><td>2.2-STABLE after 2.2.8-RELEASE</td></tr><tr><td>300000</td><td>February 19, 1996</td><td>3.0-CURRENT before <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">mount</span>(2)</span></a> change</td></tr><tr><td>300001</td><td>September 24, 1997</td><td>3.0-CURRENT after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">mount</span>(2)</span></a> change</td></tr><tr><td>300002</td><td>June 2, 1998</td><td>3.0-CURRENT after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=semctl&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">semctl</span>(2)</span></a> change</td></tr><tr><td>300003</td><td>June 7, 1998</td><td>3.0-CURRENT after ioctl arg changes</td></tr><tr><td>300004</td><td>September 3, 1998</td><td>3.0-CURRENT after ELF conversion</td></tr><tr><td>300005</td><td>October 16, 1998</td><td>3.0-RELEASE</td></tr><tr><td>300006</td><td>October 16, 1998</td><td>3.0-CURRENT after 3.0-RELEASE</td></tr><tr><td>300007</td><td>January 22, 1999</td><td>3.0-STABLE after 3/4 branch</td></tr><tr><td>310000</td><td>February 9, 1999</td><td>3.1-RELEASE</td></tr><tr><td>310001</td><td>March 27, 1999</td><td>3.1-STABLE after 3.1-RELEASE</td></tr><tr><td>310002</td><td>April 14, 1999</td><td>3.1-STABLE after C++ constructor/destructor order
	    change</td></tr><tr><td>320000</td><td> </td><td>3.2-RELEASE</td></tr><tr><td>320001</td><td>May 8, 1999</td><td>3.2-STABLE</td></tr><tr><td>320002</td><td>August 29, 1999</td><td>3.2-STABLE after binary-incompatible IPFW and
	    socket changes</td></tr><tr><td>330000</td><td>September 2, 1999</td><td>3.3-RELEASE</td></tr><tr><td>330001</td><td>September 16, 1999</td><td>3.3-STABLE</td></tr><tr><td>330002</td><td>November 24, 1999</td><td>3.3-STABLE after adding <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkstemp&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">mkstemp</span>(3)</span></a>
	    to libc</td></tr><tr><td>340000</td><td>December 5, 1999</td><td>3.4-RELEASE</td></tr><tr><td>340001</td><td>December 17, 1999</td><td>3.4-STABLE</td></tr><tr><td>350000</td><td>June 20, 2000</td><td>3.5-RELEASE</td></tr><tr><td>350001</td><td>July 12, 2000</td><td>3.5-STABLE</td></tr><tr><td>400000</td><td>January 22, 1999</td><td>4.0-CURRENT after 3.4 branch</td></tr><tr><td>400001</td><td>February 20, 1999</td><td>4.0-CURRENT after change in dynamic linker
	    handling</td></tr><tr><td>400002</td><td>March 13, 1999</td><td>4.0-CURRENT after C++ constructor/destructor
	    order change</td></tr><tr><td>400003</td><td>March 27, 1999</td><td>4.0-CURRENT after functioning
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dladdr&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">dladdr</span>(3)</span></a></td></tr><tr><td>400004</td><td>April 5, 1999</td><td>4.0-CURRENT after __deregister_frame_info dynamic
	    linker bug fix (also 4.0-CURRENT after EGCS 1.1.2
	    integration)</td></tr><tr><td>400005</td><td>April 27, 1999</td><td>4.0-CURRENT after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=suser&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">suser</span>(9)</span></a> API change
	    (also 4.0-CURRENT after newbus)</td></tr><tr><td>400006</td><td>May 31, 1999</td><td>4.0-CURRENT after cdevsw registration
	    change</td></tr><tr><td>400007</td><td>June 17, 1999</td><td>4.0-CURRENT after the addition of so_cred for
	    socket level credentials</td></tr><tr><td>400008</td><td>June 20, 1999</td><td>4.0-CURRENT after the addition of a poll syscall
	    wrapper to libc_r</td></tr><tr><td>400009</td><td>July 20, 1999</td><td>4.0-CURRENT after the change of the kernel's
	    <code class="literal">dev_t</code> type to <code class="literal">struct
	      specinfo</code> pointer</td></tr><tr><td>400010</td><td>September 25, 1999</td><td>4.0-CURRENT after fixing a hole
	    in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">jail</span>(2)</span></a></td></tr><tr><td>400011</td><td>September 29, 1999</td><td>4.0-CURRENT after the <code class="literal">sigset_t</code>
	    datatype change</td></tr><tr><td>400012</td><td>November 15, 1999</td><td>4.0-CURRENT after the cutover to the GCC 2.95.2
	    compiler</td></tr><tr><td>400013</td><td>December 4, 1999</td><td>4.0-CURRENT after adding pluggable linux-mode
	    ioctl handlers</td></tr><tr><td>400014</td><td>January 18, 2000</td><td>4.0-CURRENT after importing OpenSSL</td></tr><tr><td>400015</td><td>January 27, 2000</td><td>4.0-CURRENT after the C++ ABI change in GCC
	    2.95.2 from -fvtable-thunks to -fno-vtable-thunks by
	    default</td></tr><tr><td>400016</td><td>February 27, 2000</td><td>4.0-CURRENT after importing OpenSSH</td></tr><tr><td>400017</td><td>March 13, 2000</td><td>4.0-RELEASE</td></tr><tr><td>400018</td><td>March 17, 2000</td><td>4.0-STABLE after 4.0-RELEASE</td></tr><tr><td>400019</td><td>May 5, 2000</td><td>4.0-STABLE after the introduction of delayed
	    checksums.</td></tr><tr><td>400020</td><td>June 4, 2000</td><td>4.0-STABLE after merging libxpg4 code into
	    libc.</td></tr><tr><td>400021</td><td>July 8, 2000</td><td>4.0-STABLE after upgrading Binutils to 2.10.0,
	    ELF branding changes, and tcsh in the base
	    system.</td></tr><tr><td>410000</td><td>July 14, 2000</td><td>4.1-RELEASE</td></tr><tr><td>410001</td><td>July 29, 2000</td><td>4.1-STABLE after 4.1-RELEASE</td></tr><tr><td>410002</td><td>September 16, 2000</td><td>4.1-STABLE after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setproctitle&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">setproctitle</span>(3)</span></a> moved from
	    libutil to libc.</td></tr><tr><td>411000</td><td>September 25, 2000</td><td>4.1.1-RELEASE</td></tr><tr><td>411001</td><td> </td><td>4.1.1-STABLE after 4.1.1-RELEASE</td></tr><tr><td>420000</td><td>October 31, 2000</td><td>4.2-RELEASE</td></tr><tr><td>420001</td><td>January 10, 2001</td><td>4.2-STABLE after combining libgcc.a and
	    libgcc_r.a, and associated GCC linkage
	    changes.</td></tr><tr><td>430000</td><td>March 6, 2001</td><td>4.3-RELEASE</td></tr><tr><td>430001</td><td>May 18, 2001</td><td>4.3-STABLE after wint_t introduction.</td></tr><tr><td>430002</td><td>July 22, 2001</td><td>4.3-STABLE after PCI powerstate API
	    merge.</td></tr><tr><td>440000</td><td>August 1, 2001</td><td>4.4-RELEASE</td></tr><tr><td>440001</td><td>October 23, 2001</td><td>4.4-STABLE after d_thread_t introduction.</td></tr><tr><td>440002</td><td>November 4, 2001</td><td>4.4-STABLE after mount structure changes (affects
	    filesystem klds).</td></tr><tr><td>440003</td><td>December 18, 2001</td><td>4.4-STABLE after the userland components of smbfs
	    were imported.</td></tr><tr><td>450000</td><td>December 20, 2001</td><td>4.5-RELEASE</td></tr><tr><td>450001</td><td>February 24, 2002</td><td>4.5-STABLE after the usb structure element
	    rename.</td></tr><tr><td>450004</td><td>April 16, 2002</td><td>4.5-STABLE after the
	    <code class="literal">sendmail_enable</code> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>
	    variable was made to take the value
	    <code class="literal">NONE</code>.</td></tr><tr><td>450005</td><td>April 27, 2002</td><td>4.5-STABLE after moving to XFree86 4 by default
	    for package builds.</td></tr><tr><td>450006</td><td>May 1, 2002</td><td>4.5-STABLE after accept filtering was fixed so
	    that is no longer susceptible to an easy DoS.</td></tr><tr><td>460000</td><td>June 21, 2002</td><td>4.6-RELEASE</td></tr><tr><td>460001</td><td>June 21, 2002</td><td>4.6-STABLE <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendfile&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">sendfile</span>(2)</span></a> fixed to comply with
	    documentation, not to count any headers sent against
	    the amount of data to be sent from the file.</td></tr><tr><td>460002</td><td>July 19, 2002</td><td>4.6.2-RELEASE</td></tr><tr><td>460100</td><td>June 26, 2002</td><td>4.6-STABLE</td></tr><tr><td>460101</td><td>June 26, 2002</td><td>4.6-STABLE after MFC of `sed -i'.</td></tr><tr><td>460102</td><td>September 1, 2002</td><td>4.6-STABLE after MFC of many new pkg_install
	    features from the HEAD.</td></tr><tr><td>470000</td><td>October 8, 2002</td><td>4.7-RELEASE</td></tr><tr><td>470100</td><td>October 9, 2002</td><td>4.7-STABLE</td></tr><tr><td>470101</td><td>November 10, 2002</td><td>Start generated __std{in,out,err}p references
	    rather than __sF.  This changes std{in,out,err} from a
	    compile time expression to a runtime one.</td></tr><tr><td>470102</td><td>January 23, 2003</td><td>4.7-STABLE after MFC of mbuf changes to replace
	    m_aux mbufs by m_tag's</td></tr><tr><td>470103</td><td>February 14, 2003</td><td>4.7-STABLE gets OpenSSL 0.9.7</td></tr><tr><td>480000</td><td>March 30, 2003</td><td>4.8-RELEASE</td></tr><tr><td>480100</td><td>April 5, 2003</td><td>4.8-STABLE</td></tr><tr><td>480101</td><td>May 22, 2003</td><td>4.8-STABLE after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=realpath&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">realpath</span>(3)</span></a> has been made
	    thread-safe</td></tr><tr><td>480102</td><td>August 10, 2003</td><td>4.8-STABLE 3ware API changes to twe.</td></tr><tr><td>490000</td><td>October 27, 2003</td><td>4.9-RELEASE</td></tr><tr><td>490100</td><td>October 27, 2003</td><td>4.9-STABLE</td></tr><tr><td>490101</td><td>January 8, 2004</td><td>4.9-STABLE after e_sid was added to struct
	    kinfo_eproc.</td></tr><tr><td>490102</td><td>February 4, 2004</td><td>4.9-STABLE after MFC of libmap functionality
	    for rtld.</td></tr><tr><td>491000</td><td>May 25, 2004</td><td>4.10-RELEASE</td></tr><tr><td>491100</td><td>June 1, 2004</td><td>4.10-STABLE</td></tr><tr><td>491101</td><td>August 11, 2004</td><td>4.10-STABLE after MFC of revision 20040629 of
	    the package tools</td></tr><tr><td>491102</td><td>November 16, 2004</td><td>4.10-STABLE after VM fix dealing with unwiring
	    of fictitious pages</td></tr><tr><td>492000</td><td>December 17, 2004</td><td>4.11-RELEASE</td></tr><tr><td>492100</td><td>December 17, 2004</td><td>4.11-STABLE</td></tr><tr><td>492101</td><td>April 18, 2006</td><td>4.11-STABLE after adding libdata/ldconfig
	    directories to mtree files.</td></tr><tr><td>500000</td><td>March 13, 2000</td><td>5.0-CURRENT</td></tr><tr><td>500001</td><td>April 18, 2000</td><td>5.0-CURRENT after adding addition ELF header
	    fields, and changing our ELF binary branding
	    method.</td></tr><tr><td>500002</td><td>May 2, 2000</td><td>5.0-CURRENT after kld metadata changes.</td></tr><tr><td>500003</td><td>May 18, 2000</td><td>5.0-CURRENT after buf/bio changes.</td></tr><tr><td>500004</td><td>May 26, 2000</td><td>5.0-CURRENT after binutils upgrade.</td></tr><tr><td>500005</td><td>June 3, 2000</td><td>5.0-CURRENT after merging libxpg4 code into
	    libc and after TASKQ interface introduction.</td></tr><tr><td>500006</td><td>June 10, 2000</td><td>5.0-CURRENT after the addition of AGP
	    interfaces.</td></tr><tr><td>500007</td><td>June 29, 2000</td><td>5.0-CURRENT after Perl upgrade to 5.6.0</td></tr><tr><td>500008</td><td>July 7, 2000</td><td>5.0-CURRENT after the update of KAME code to
	    2000/07 sources.</td></tr><tr><td>500009</td><td>July 14, 2000</td><td>5.0-CURRENT after ether_ifattach() and
	    ether_ifdetach() changes.</td></tr><tr><td>500010</td><td>July 16, 2000</td><td>5.0-CURRENT after changing mtree defaults
	    back to original variant, adding -L to follow
	    symlinks.</td></tr><tr><td>500011</td><td>July 18, 2000</td><td>5.0-CURRENT after kqueue API changed.</td></tr><tr><td>500012</td><td>September 2, 2000</td><td>5.0-CURRENT after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setproctitle&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">setproctitle</span>(3)</span></a> moved from
	    libutil to libc.</td></tr><tr><td>500013</td><td>September 10, 2000</td><td>5.0-CURRENT after the first SMPng commit.</td></tr><tr><td>500014</td><td>January 4, 2001</td><td>5.0-CURRENT after &lt;sys/select.h&gt; moved to
	    &lt;sys/selinfo.h&gt;.</td></tr><tr><td>500015</td><td>January 10, 2001</td><td>5.0-CURRENT after combining libgcc.a and
	    libgcc_r.a, and associated GCC linkage
	    changes.</td></tr><tr><td>500016</td><td>January 24, 2001</td><td>5.0-CURRENT after change allowing libc and libc_r
	    to be linked together, deprecating -pthread
	    option.</td></tr><tr><td>500017</td><td>February 18, 2001</td><td>5.0-CURRENT after switch from struct ucred to
	    struct xucred to stabilize kernel-exported API for
	    mountd et al.</td></tr><tr><td>500018</td><td>February 24, 2001</td><td>5.0-CURRENT after addition of CPUTYPE make
	    variable for controlling CPU-specific
	    optimizations.</td></tr><tr><td>500019</td><td>June 9, 2001</td><td>5.0-CURRENT after moving machine/ioctl_fd.h to
	    sys/fdcio.h</td></tr><tr><td>500020</td><td>June 15, 2001</td><td>5.0-CURRENT after locale names renaming.</td></tr><tr><td>500021</td><td>June 22, 2001</td><td>5.0-CURRENT after Bzip2 import.
	    Also signifies removal of S/Key.</td></tr><tr><td>500022</td><td>July 12, 2001</td><td>5.0-CURRENT after SSE support.</td></tr><tr><td>500023</td><td>September 14, 2001</td><td>5.0-CURRENT after KSE Milestone 2.</td></tr><tr><td>500024</td><td>October 1, 2001</td><td>5.0-CURRENT after d_thread_t,
	    and moving UUCP to ports.</td></tr><tr><td>500025</td><td>October 4, 2001</td><td>5.0-CURRENT after ABI change for descriptor
	    and creds passing on 64 bit platforms.</td></tr><tr><td>500026</td><td>October 9, 2001</td><td>5.0-CURRENT after moving to XFree86 4 by default
	    for package builds, and after the new libc strnstr()
	    function was added.</td></tr><tr><td>500027</td><td>October 10, 2001</td><td>5.0-CURRENT after the new libc strcasestr()
	    function was added.</td></tr><tr><td>500028</td><td>December 14, 2001</td><td>5.0-CURRENT after the userland components of
	    smbfs were imported.</td></tr><tr><td>(not changed)</td><td> </td><td>5.0-CURRENT after the new C99 specific-width
	    integer types were added.</td></tr><tr><td>500029</td><td>January 29, 2002</td><td>5.0-CURRENT after a change was made in the return
	    value of <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendfile&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">sendfile</span>(2)</span></a>.</td></tr><tr><td>500030</td><td>February 15, 2002</td><td>5.0-CURRENT after the introduction of the
	    type <code class="literal">fflags_t</code>, which is the
	    appropriate size for file flags.</td></tr><tr><td>500031</td><td>February 24, 2002</td><td>5.0-CURRENT after the usb structure element
	    rename.</td></tr><tr><td>500032</td><td>March 16, 2002</td><td>5.0-CURRENT after the introduction of
	    Perl 5.6.1.</td></tr><tr><td>500033</td><td>April 3, 2002</td><td>5.0-CURRENT after the
	    <code class="literal">sendmail_enable</code> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>
	    variable was made to take the value
	    <code class="literal">NONE</code>.</td></tr><tr><td>500034</td><td>April 30, 2002</td><td>5.0-CURRENT after mtx_init() grew a third
	    argument.</td></tr><tr><td>500035</td><td>May 13, 2002</td><td>5.0-CURRENT with Gcc 3.1.</td></tr><tr><td>500036</td><td>May 17, 2002</td><td>5.0-CURRENT without Perl in /usr/src</td></tr><tr><td>500037</td><td>May 29, 2002</td><td>5.0-CURRENT after the addition of
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dlfunc&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">dlfunc</span>(3)</span></a></td></tr><tr><td>500038</td><td>July 24, 2002</td><td>5.0-CURRENT after the types of some struct
	    sockbuf members were changed and the structure was
	    reordered.</td></tr><tr><td>500039</td><td>September 1, 2002</td><td>5.0-CURRENT after GCC 3.2.1 import.
	    Also after headers stopped using
	    _BSD_FOO_T_ and started using _FOO_T_DECLARED.
	    This value can also be used as a conservative
	    estimate of the start of <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bzip2&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">bzip2</span>(1)</span></a> package
	    support.</td></tr><tr><td>500040</td><td>September 20, 2002</td><td>5.0-CURRENT after various changes to disk
	    functions were made in the name of removing dependency
	    on disklabel structure internals.</td></tr><tr><td>500041</td><td>October 1, 2002</td><td>5.0-CURRENT after the addition of
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getopt_long&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">getopt_long</span>(3)</span></a> to libc.</td></tr><tr><td>500042</td><td>October 15, 2002</td><td>5.0-CURRENT after Binutils 2.13 upgrade, which
	    included new FreeBSD emulation, vec, and output
	    format.</td></tr><tr><td>500043</td><td>November 1, 2002</td><td>5.0-CURRENT after adding weak pthread_XXX stubs
	    to libc, obsoleting libXThrStub.so.
	    5.0-RELEASE.</td></tr><tr><td>500100</td><td>January 17, 2003</td><td>5.0-CURRENT after branching for
	    RELENG_5_0</td></tr><tr><td>500101</td><td>February 19, 2003</td><td>&lt;sys/dkstat.h&gt; is empty.  Do not include
	    it.</td></tr><tr><td>500102</td><td>February 25, 2003</td><td>5.0-CURRENT after the d_mmap_t interface
	    change.</td></tr><tr><td>500103</td><td>February 26, 2003</td><td>5.0-CURRENT after taskqueue_swi changed to run
	    without Giant, and taskqueue_swi_giant added to run
	    with Giant.</td></tr><tr><td>500104</td><td>February 27, 2003</td><td>cdevsw_add() and cdevsw_remove() no
	    longer exists.
	    Appearance of MAJOR_AUTO allocation facility.</td></tr><tr><td>500105</td><td>March 4, 2003</td><td>5.0-CURRENT after new cdevsw initialization
	    method.</td></tr><tr><td>500106</td><td>March 8, 2003</td><td>devstat_add_entry() has been replaced by
	    devstat_new_entry()</td></tr><tr><td>500107</td><td>March 15, 2003</td><td>Devstat interface change; see sys/sys/param.h
	    1.149</td></tr><tr><td>500108</td><td>March 15, 2003</td><td>Token-Ring interface changes.</td></tr><tr><td>500109</td><td>March 25, 2003</td><td>Addition of vm_paddr_t.</td></tr><tr><td>500110</td><td>March 28, 2003</td><td>5.0-CURRENT after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=realpath&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">realpath</span>(3)</span></a> has been made
	    thread-safe</td></tr><tr><td>500111</td><td>April 9, 2003</td><td>5.0-CURRENT after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=usbhid&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">usbhid</span>(3)</span></a> has been synced
	    with NetBSD</td></tr><tr><td>500112</td><td>April 17, 2003</td><td>5.0-CURRENT after new NSS implementation
	    and addition of POSIX.1 getpw*_r, getgr*_r
	    functions</td></tr><tr><td>500113</td><td>May 2, 2003</td><td>5.0-CURRENT after removal of the old rc
	    system.</td></tr><tr><td>501000</td><td>June 4, 2003</td><td>5.1-RELEASE.</td></tr><tr><td>501100</td><td>June 2, 2003</td><td>5.1-CURRENT after branching for
	    RELENG_5_1.</td></tr><tr><td>501101</td><td>June 29, 2003</td><td>5.1-CURRENT after correcting the semantics of
	    sigtimedwait(2) and sigwaitinfo(2).</td></tr><tr><td>501102</td><td>July 3, 2003</td><td>5.1-CURRENT after adding the lockfunc and
	    lockfuncarg fields to
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bus_dma_tag_create&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">bus_dma_tag_create</span>(9)</span></a>.</td></tr><tr><td>501103</td><td>July 31, 2003</td><td>5.1-CURRENT after GCC 3.3.1-pre 20030711 snapshot
	    integration.</td></tr><tr><td>501104</td><td>August 5, 2003</td><td>5.1-CURRENT 3ware API changes to twe.</td></tr><tr><td>501105</td><td>August 17, 2003</td><td>5.1-CURRENT dynamically-linked /bin and /sbin
	    support and movement of libraries to /lib.</td></tr><tr><td>501106</td><td>September 8, 2003</td><td>5.1-CURRENT after adding kernel support for
	    Coda 6.x.</td></tr><tr><td>501107</td><td>September 17, 2003</td><td>5.1-CURRENT after 16550 UART constants moved from
	    <code class="filename">&lt;dev/sio/sioreg.h&gt;</code> to
	    <code class="filename">&lt;dev/ic/ns16550.h&gt;</code>.
	    Also when libmap functionality was unconditionally
	    supported by rtld.</td></tr><tr><td>501108</td><td>September 23, 2003</td><td>5.1-CURRENT after PFIL_HOOKS API update</td></tr><tr><td>501109</td><td>September 27, 2003</td><td>5.1-CURRENT after adding kiconv(3)</td></tr><tr><td>501110</td><td>September 28, 2003</td><td>5.1-CURRENT after changing default operations
	    for open and close in cdevsw</td></tr><tr><td>501111</td><td>October 16, 2003</td><td>5.1-CURRENT after changed layout of
	    cdevsw</td></tr><tr><td>501112</td><td>October 16, 2003</td><td> 5.1-CURRENT after adding kobj multiple
	    inheritance</td></tr><tr><td>501113</td><td>October 31, 2003</td><td> 5.1-CURRENT after the if_xname change in
	    struct ifnet</td></tr><tr><td>501114</td><td>November 16, 2003</td><td> 5.1-CURRENT after changing /bin and /sbin to
	    be dynamically linked</td></tr><tr><td>502000</td><td>December 7, 2003</td><td>5.2-RELEASE</td></tr><tr><td>502010</td><td>February 23, 2004</td><td>5.2.1-RELEASE</td></tr><tr><td>502100</td><td>December 7, 2003</td><td>5.2-CURRENT after branching for
	    RELENG_5_2</td></tr><tr><td>502101</td><td>December 19, 2003</td><td>5.2-CURRENT after __cxa_atexit/__cxa_finalize
	    functions were added to libc.</td></tr><tr><td>502102</td><td>January 30, 2004</td><td>5.2-CURRENT after change of default thread
	    library from libc_r to libpthread.</td></tr><tr><td>502103</td><td>February 21, 2004</td><td>5.2-CURRENT after device driver API
	    megapatch.</td></tr><tr><td>502104</td><td>February 25, 2004</td><td>5.2-CURRENT after getopt_long_only()
	    addition.</td></tr><tr><td>502105</td><td>March 5, 2004</td><td>5.2-CURRENT after NULL is made into ((void *)0)
	    for C, creating more warnings.</td></tr><tr><td>502106</td><td>March 8, 2004</td><td>5.2-CURRENT after pf is linked to the build and
	    install.</td></tr><tr><td>502107</td><td>March 10, 2004</td><td>5.2-CURRENT after time_t is changed to a
	    64-bit value on sparc64.</td></tr><tr><td>502108</td><td>March 12, 2004</td><td>5.2-CURRENT after Intel C/C++ compiler support in
	    some headers and execve(2) changes to be more strictly
	    conforming to POSIX.</td></tr><tr><td>502109</td><td>March 22, 2004</td><td>5.2-CURRENT after the introduction of the
	    bus_alloc_resource_any API</td></tr><tr><td>502110</td><td>March 27, 2004</td><td>5.2-CURRENT after the addition of UTF-8
	    locales</td></tr><tr><td>502111</td><td>April 11, 2004</td><td>5.2-CURRENT after the removal of the getvfsent(3)
	    API</td></tr><tr><td>502112</td><td>April 13, 2004</td><td>5.2-CURRENT after the addition of the .warning
	    directive for make.</td></tr><tr><td>502113</td><td>June 4, 2004</td><td>5.2-CURRENT after ttyioctl() was made mandatory
	    for serial drivers.</td></tr><tr><td>502114</td><td>June 13, 2004</td><td>5.2-CURRENT after import of the ALTQ
	    framework.</td></tr><tr><td>502115</td><td>June 14, 2004</td><td>5.2-CURRENT after changing sema_timedwait(9) to
	    return 0 on success and a non-zero error code on
	    failure.</td></tr><tr><td>502116</td><td>June 16, 2004</td><td>5.2-CURRENT after changing kernel dev_t to be
	    pointer to struct cdev *.</td></tr><tr><td>502117</td><td>June 17, 2004</td><td>5.2-CURRENT after changing kernel udev_t to
	    dev_t.</td></tr><tr><td>502118</td><td>June 17, 2004</td><td>5.2-CURRENT after adding support for
	    CLOCK_VIRTUAL and CLOCK_PROF to clock_gettime(2) and
	    clock_getres(2).</td></tr><tr><td>502119</td><td>June 22, 2004</td><td>5.2-CURRENT after changing network interface
	    cloning overhaul.</td></tr><tr><td>502120</td><td>July 2, 2004</td><td>5.2-CURRENT after the update of the package tools
	    to revision 20040629.</td></tr><tr><td>502121</td><td>July 9, 2004</td><td>5.2-CURRENT after marking Bluetooth code as
	    non-i386 specific.</td></tr><tr><td>502122</td><td>July 11, 2004</td><td>5.2-CURRENT after the introduction of the KDB
	    debugger framework, the conversion of DDB into a
	    backend and the introduction of the GDB
	    backend.</td></tr><tr><td>502123</td><td>July 12, 2004</td><td>5.2-CURRENT after change to make VFS_ROOT take a
	    struct thread argument as does vflush.  Struct
	    kinfo_proc now has a user data pointer.  The switch of
	    the default X implementation to
	    <code class="literal">xorg</code> was also made at this
	    time.</td></tr><tr><td>502124</td><td>July 24, 2004</td><td>5.2-CURRENT after the change to separate the way
	    ports rc.d and legacy scripts are started.</td></tr><tr><td>502125</td><td>July 28, 2004</td><td>5.2-CURRENT after the backout of the previous
	    change.</td></tr><tr><td>502126</td><td>July 31, 2004</td><td>5.2-CURRENT after the removal of
	    kmem_alloc_pageable() and the import of gcc
	    3.4.2.</td></tr><tr><td>502127</td><td>August 2, 2004</td><td>5.2-CURRENT after changing the UMA kernel
	    API to allow ctors/inits to fail.</td></tr><tr><td>502128</td><td>August 8, 2004</td><td>5.2-CURRENT after the change of the
	    vfs_mount signature as well as global replacement of
	    PRISON_ROOT with SUSER_ALLOWJAIL for the suser(9)
	    API.</td></tr><tr><td>503000</td><td>August 23, 2004</td><td>5.3-BETA/RC before the pfil API change</td></tr><tr><td>503001</td><td>September 22, 2004</td><td>5.3-RELEASE</td></tr><tr><td>503100</td><td>October 16, 2004</td><td>5.3-STABLE after branching for RELENG_5_3</td></tr><tr><td>503101</td><td>December 3, 2004</td><td>5.3-STABLE after addition of glibc style
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=strftime&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">strftime</span>(3)</span></a> padding options.</td></tr><tr><td>503102</td><td>February 13, 2005</td><td>5.3-STABLE after OpenBSD's nc(1) import
	    MFC.</td></tr><tr><td>503103</td><td>February 27, 2005</td><td>5.4-PRERELEASE after the MFC of the fixes in
	    <code class="filename">&lt;src/include/stdbool.h&gt;</code> and
	    <code class="filename">&lt;src/sys/i386/include/_types.h&gt;</code>
	    for using the GCC-compatibility of the Intel C/C++
	    compiler.</td></tr><tr><td>503104</td><td>February 28, 2005</td><td>5.4-PRERELEASE after the MFC of the change of
	    ifi_epoch from wall clock time to uptime.</td></tr><tr><td>503105</td><td>March 2, 2005</td><td>5.4-PRERELEASE after the MFC of the fix of
	    EOVERFLOW check in vswprintf(3).</td></tr><tr><td>504000</td><td>April 3, 2005</td><td>5.4-RELEASE.</td></tr><tr><td>504100</td><td>April 3, 2005</td><td>5.4-STABLE after branching for RELENG_5_4</td></tr><tr><td>504101</td><td>May 11, 2005</td><td>5.4-STABLE after increasing the default
	    thread stacksizes</td></tr><tr><td>504102</td><td>June 24, 2005</td><td>5.4-STABLE after the addition of sha256</td></tr><tr><td>504103</td><td>October 3, 2005</td><td>5.4-STABLE after the MFC of if_bridge</td></tr><tr><td>504104</td><td>November 13, 2005</td><td>5.4-STABLE after the MFC of bsdiff and
	    portsnap</td></tr><tr><td>504105</td><td>January 17, 2006</td><td>5.4-STABLE after MFC of ldconfig_local_dirs
	    change.</td></tr><tr><td>505000</td><td>May 12, 2006</td><td>5.5-RELEASE.</td></tr><tr><td>505100</td><td>May 12, 2006</td><td>5.5-STABLE after branching for RELENG_5_5</td></tr><tr><td>600000</td><td>August 18, 2004</td><td>6.0-CURRENT</td></tr><tr><td>600001</td><td>August 27, 2004</td><td>6.0-CURRENT after permanently enabling PFIL_HOOKS
	    in the kernel.</td></tr><tr><td>600002</td><td>August 30, 2004</td><td>6.0-CURRENT after initial addition of
	    ifi_epoch to struct if_data.  Backed out after a
	    few days.  Do not use this value.</td></tr><tr><td>600003</td><td>September 8, 2004</td><td>6.0-CURRENT after the re-addition of the
	    ifi_epoch member of struct if_data.</td></tr><tr><td>600004</td><td>September 29, 2004</td><td>6.0-CURRENT after addition of the struct inpcb
	    argument to the pfil API.</td></tr><tr><td>600005</td><td>October 5, 2004</td><td>6.0-CURRENT after addition of the "-d
	    DESTDIR" argument to newsyslog.</td></tr><tr><td>600006</td><td>November 4, 2004</td><td>6.0-CURRENT after addition of glibc style
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=strftime&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">strftime</span>(3)</span></a> padding options.</td></tr><tr><td>600007</td><td>December 12, 2004</td><td>6.0-CURRENT after addition of 802.11 framework
	    updates.</td></tr><tr><td>600008</td><td>January 25, 2005</td><td>6.0-CURRENT after changes to VOP_*VOBJECT()
	    functions and introduction of MNTK_MPSAFE flag for
	    Giantfree filesystems.</td></tr><tr><td>600009</td><td>February 4, 2005</td><td>6.0-CURRENT after addition of the cpufreq
	    framework and drivers.</td></tr><tr><td>600010</td><td>February 6, 2005</td><td>6.0-CURRENT after importing OpenBSD's
	    nc(1).</td></tr><tr><td>600011</td><td>February 12, 2005</td><td>6.0-CURRENT after removing semblance of SVID2
	    <code class="literal">matherr()</code> support.</td></tr><tr><td>600012</td><td>February 15, 2005</td><td>6.0-CURRENT after increase of default thread
	    stacks' size.</td></tr><tr><td>600013</td><td>February 19, 2005</td><td>6.0-CURRENT after fixes in
	    <code class="filename">&lt;src/include/stdbool.h&gt;</code> and
	    <code class="filename">&lt;src/sys/i386/include/_types.h&gt;</code>
	    for using the GCC-compatibility of the Intel C/C++
	    compiler.</td></tr><tr><td>600014</td><td>February 21, 2005</td><td>6.0-CURRENT after EOVERFLOW checks in
	    vswprintf(3) fixed.</td></tr><tr><td>600015</td><td>February 25, 2005</td><td>6.0-CURRENT after changing the struct if_data
	    member, ifi_epoch, from wall clock time to
	    uptime.</td></tr><tr><td>600016</td><td>February 26, 2005</td><td>6.0-CURRENT after LC_CTYPE disk format
	    changed.</td></tr><tr><td>600017</td><td>February 27, 2005</td><td>6.0-CURRENT after NLS catalogs disk format
	    changed.</td></tr><tr><td>600018</td><td>February 27, 2005</td><td>6.0-CURRENT after LC_COLLATE disk format
	    changed.</td></tr><tr><td>600019</td><td>February 28, 2005</td><td>Installation of acpica includes into
	    /usr/include.</td></tr><tr><td>600020</td><td>March 9, 2005</td><td>Addition of MSG_NOSIGNAL flag to send(2)
	    API.</td></tr><tr><td>600021</td><td>March 17, 2005</td><td>Addition of fields to cdevsw</td></tr><tr><td>600022</td><td>March 21, 2005</td><td>Removed gtar from base system.</td></tr><tr><td>600023</td><td>April 13, 2005</td><td>LOCAL_CREDS, LOCAL_CONNWAIT socket options added
	    to unix(4).</td></tr><tr><td>600024</td><td>April 19, 2005</td><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hwpmc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">hwpmc</span>(4)</span></a> and related tools added to
	    6.0-CURRENT.</td></tr><tr><td>600025</td><td>April 26, 2005</td><td>struct icmphdr added to 6.0-CURRENT.</td></tr><tr><td>600026</td><td>May 3, 2005</td><td>pf updated to 3.7.</td></tr><tr><td>600027</td><td>May 6, 2005</td><td>Kernel libalias and ng_nat introduced.</td></tr><tr><td>600028</td><td>May 13, 2005</td><td>POSIX ttyname_r(3) made available through
	    unistd.h and libc.</td></tr><tr><td>600029</td><td>May 29, 2005</td><td>6.0-CURRENT after libpcap updated to v0.9.1 alpha
	    096.</td></tr><tr><td>600030</td><td>June 5, 2005</td><td>6.0-CURRENT after importing NetBSD's
	    if_bridge(4).</td></tr><tr><td>600031</td><td>June 10, 2005</td><td>6.0-CURRENT after struct ifnet was broken out
	    of the driver softcs.</td></tr><tr><td>600032</td><td>July 11, 2005</td><td>6.0-CURRENT after the import of libpcap
	    v0.9.1.</td></tr><tr><td>600033</td><td>July 25, 2005</td><td>6.0-STABLE after bump of all shared library
	    versions that had not been changed since
	    RELENG_5.</td></tr><tr><td>600034</td><td>August 13, 2005</td><td>6.0-STABLE after credential argument is added to
	    dev_clone event handler.  6.0-RELEASE.</td></tr><tr><td>600100</td><td>November 1, 2005</td><td>6.0-STABLE after 6.0-RELEASE</td></tr><tr><td>600101</td><td>December 21, 2005</td><td>6.0-STABLE after incorporating scripts from the
	    local_startup directories into the base
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rcorder</span>(8)</span></a>.</td></tr><tr><td>600102</td><td>December 30, 2005</td><td>6.0-STABLE after updating the ELF types and
	    constants.</td></tr><tr><td>600103</td><td>January 15, 2006</td><td>6.0-STABLE after MFC of pidfile(3) API.</td></tr><tr><td>600104</td><td>January 17, 2006</td><td>6.0-STABLE after MFC of ldconfig_local_dirs
	    change.</td></tr><tr><td>600105</td><td>February 26, 2006</td><td>6.0-STABLE after NLS catalog support of
	    csh(1).</td></tr><tr><td>601000</td><td>May 6, 2006</td><td>6.1-RELEASE</td></tr><tr><td>601100</td><td>May 6, 2006</td><td>6.1-STABLE after 6.1-RELEASE.</td></tr><tr><td>601101</td><td>June 22, 2006</td><td>6.1-STABLE after the import of csup.</td></tr><tr><td>601102</td><td>July 11, 2006</td><td>6.1-STABLE after the iwi(4) update.</td></tr><tr><td>601103</td><td>July 17, 2006</td><td>6.1-STABLE after the resolver update to
	    BIND9, and exposure of reentrant version of
	    netdb functions.</td></tr><tr><td>601104</td><td>August 8, 2006</td><td>6.1-STABLE after DSO (dynamic shared
	    objects) support has been enabled in
	    OpenSSL.</td></tr><tr><td>601105</td><td>September 2, 2006</td><td>6.1-STABLE after 802.11 fixups changed the
	    api for the IEEE80211_IOC_STA_INFO ioctl.</td></tr><tr><td>602000</td><td>November 15, 2006</td><td>6.2-RELEASE</td></tr><tr><td>602100</td><td>September 15, 2006</td><td>6.2-STABLE after 6.2-RELEASE.</td></tr><tr><td>602101</td><td>December 12, 2006</td><td>6.2-STABLE after the addition of Wi-Spy
	    quirk.</td></tr><tr><td>602102</td><td>December 28, 2006</td><td>6.2-STABLE after pci_find_extcap()
	    addition.</td></tr><tr><td>602103</td><td>January 16, 2007</td><td>6.2-STABLE after MFC of dlsym change to look for
	    a requested symbol both in specified dso and its
	    implicit dependencies.</td></tr><tr><td>602104</td><td>January 28, 2007</td><td>6.2-STABLE after MFC of ng_deflate(4) and
	    ng_pred1(4) netgraph nodes and new compression and
	    encryption modes for ng_ppp(4) node.</td></tr><tr><td>602105</td><td>February 20, 2007</td><td>6.2-STABLE after MFC of BSD licensed version of
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gzip</span>(1)</span></a> ported from NetBSD.</td></tr><tr><td>602106</td><td>March 31, 2007</td><td>6.2-STABLE after MFC of PCI MSI and MSI-X
	    support.</td></tr><tr><td>602107</td><td>April 6, 2007</td><td>6.2-STABLE after MFC of ncurses 5.6 and wide
	    character support.</td></tr><tr><td>602108</td><td>April 11, 2007</td><td>6.2-STABLE after MFC of CAM 'SG' peripheral
	    device, which implements a subset of Linux SCSI SG
	    passthrough device API.</td></tr><tr><td>602109</td><td>April 17, 2007</td><td>6.2-STABLE after MFC of readline 5.2 patchset
	    002.</td></tr><tr><td>602110</td><td>May 2, 2007</td><td>6.2-STABLE after MFC of pmap_invalidate_cache(),
	    pmap_change_attr(), pmap_mapbios(),
	    pmap_mapdev_attr(), and pmap_unmapbios() for amd64 and
	    i386.</td></tr><tr><td>602111</td><td>June 11, 2007</td><td>6.2-STABLE after MFC of BOP_BDFLUSH and caused
	    breakage of the filesystem modules KBI.</td></tr><tr><td>602112</td><td>September 21, 2007</td><td>6.2-STABLE after libutil(3) MFC's.</td></tr><tr><td>602113</td><td>October 25, 2007</td><td>6.2-STABLE after MFC of wide and single byte
	    ctype separation.  Newly compiled binary that
	    references to ctype.h may require a new symbol,
	    __mb_sb_limit, which is not available on older
	    systems.</td></tr><tr><td>602114</td><td>October 30, 2007</td><td>6.2-STABLE after ctype ABI forward compatibility
	    restored.</td></tr><tr><td>602115</td><td>November 21, 2007</td><td>6.2-STABLE after back out of wide and single byte
	    ctype separation.</td></tr><tr><td>603000</td><td>November 25, 2007</td><td>6.3-RELEASE</td></tr><tr><td>603100</td><td>November 25, 2007</td><td>6.3-STABLE after 6.3-RELEASE.</td></tr><tr><td>603101</td><td>December 7, 2007</td><td>6.3-STABLE after fixing
	    multibyte type support in bit macro.</td></tr><tr><td>603102</td><td>April 24, 2008</td><td>6.3-STABLE after adding l_sysid to struct
	    flock.</td></tr><tr><td>603103</td><td>May 27, 2008</td><td>6.3-STABLE after MFC of the
	    <code class="function">memrchr</code> function.</td></tr><tr><td>603104</td><td>June 15, 2008</td><td>6.3-STABLE after MFC of support for
	    <code class="literal">:u</code> variable modifier in
	    make(1).</td></tr><tr><td>604000</td><td>October 4, 2008</td><td>6.4-RELEASE</td></tr><tr><td>604100</td><td>October 4, 2008</td><td>6.4-STABLE after 6.4-RELEASE.</td></tr><tr><td>700000</td><td>July 11, 2005</td><td>7.0-CURRENT.</td></tr><tr><td>700001</td><td>July 23, 2005</td><td>7.0-CURRENT after bump of all shared library
	    versions that had not been changed since
	    RELENG_5.</td></tr><tr><td>700002</td><td>August 13, 2005</td><td>7.0-CURRENT after credential argument is added to
	    dev_clone event handler.</td></tr><tr><td>700003</td><td>August 25, 2005</td><td>7.0-CURRENT after memmem(3) is added to
	    libc.</td></tr><tr><td>700004</td><td>October 30, 2005</td><td>7.0-CURRENT after solisten(9) kernel arguments
	    are modified to accept a backlog parameter.</td></tr><tr><td>700005</td><td>November 11, 2005</td><td>7.0-CURRENT after IFP2ENADDR() was changed to
	    return a pointer to IF_LLADDR().</td></tr><tr><td>700006</td><td>November 11, 2005</td><td>7.0-CURRENT after addition of
	    <code class="literal">if_addr</code> member to <code class="literal">struct
	      ifnet</code> and IFP2ENADDR() removal.</td></tr><tr><td>700007</td><td>December 2, 2005</td><td>7.0-CURRENT after incorporating scripts from the
	    local_startup directories into the base
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rcorder</span>(8)</span></a>.</td></tr><tr><td>700008</td><td>December 5, 2005</td><td>7.0-CURRENT after removal of MNT_NODEV mount
	    option.</td></tr><tr><td>700009</td><td>December 19, 2005</td><td>7.0-CURRENT after ELF-64 type changes and symbol
	    versioning.</td></tr><tr><td>700010</td><td>December 20, 2005</td><td>7.0-CURRENT after addition of hostb and vgapci
	    drivers, addition of pci_find_extcap(), and changing
	    the AGP drivers to no longer map the aperture.</td></tr><tr><td>700011</td><td>December 31, 2005</td><td>7.0-CURRENT after tv_sec was made time_t on
	    all platforms but Alpha.</td></tr><tr><td>700012</td><td>January 8, 2006</td><td>7.0-CURRENT after ldconfig_local_dirs
	    change.</td></tr><tr><td>700013</td><td>January 12, 2006</td><td>7.0-CURRENT after changes to
	    <code class="filename">/etc/rc.d/abi</code> to support
	    <code class="filename">/compat/linux/etc/ld.so.cache</code>
	    being a symlink in a readonly filesystem.</td></tr><tr><td>700014</td><td>January 26, 2006</td><td>7.0-CURRENT after pts import.</td></tr><tr><td>700015</td><td>March 26, 2006</td><td>7.0-CURRENT after the introduction of version 2
	    of <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hwpmc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">hwpmc</span>(4)</span></a>'s ABI.</td></tr><tr><td>700016</td><td>April 22, 2006</td><td>7.0-CURRENT after addition of <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fcloseall&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">fcloseall</span>(3)</span></a>
	    to libc.</td></tr><tr><td>700017</td><td>May 13, 2006</td><td>7.0-CURRENT after removal of ip6fw.</td></tr><tr><td>700018</td><td>July 15, 2006</td><td>7.0-CURRENT after import of snd_emu10kx.</td></tr><tr><td>700019</td><td>July 29, 2006</td><td>7.0-CURRENT after import of OpenSSL
	    0.9.8b.</td></tr><tr><td>700020</td><td>September 3, 2006</td><td>7.0-CURRENT after addition of bus_dma_get_tag
	    function</td></tr><tr><td>700021</td><td>September 4, 2006</td><td>7.0-CURRENT after libpcap 0.9.4 and tcpdump 3.9.4
	    import.</td></tr><tr><td>700022</td><td>September 9, 2006</td><td>7.0-CURRENT after dlsym change to look for a
	    requested symbol both in specified dso and its
	    implicit dependencies.</td></tr><tr><td>700023</td><td>September 23, 2006</td><td>7.0-CURRENT after adding new sound IOCTLs for the
	    OSSv4 mixer API.</td></tr><tr><td>700024</td><td>September 28, 2006</td><td>7.0-CURRENT after import of OpenSSL
	    0.9.8d.</td></tr><tr><td>700025</td><td>November 11, 2006</td><td>7.0-CURRENT after the addition of libelf.</td></tr><tr><td>700026</td><td>November 26, 2006</td><td>7.0-CURRENT after major changes on sound
	    sysctls.</td></tr><tr><td>700027</td><td>November 30, 2006</td><td>7.0-CURRENT after the addition of Wi-Spy
	    quirk.</td></tr><tr><td>700028</td><td>December 15, 2006</td><td>7.0-CURRENT after the addition of sctp calls to
	    libc</td></tr><tr><td>700029</td><td>January 26, 2007</td><td>7.0-CURRENT after the GNU <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gzip</span>(1)</span></a>
	    implementation was replaced with a BSD licensed
	    version ported from NetBSD.</td></tr><tr><td>700030</td><td>February 7, 2007</td><td>7.0-CURRENT after the removal of IPIP tunnel
	    encapsulation (VIFF_TUNNEL) from the IPv4 multicast
	    forwarding code.</td></tr><tr><td>700031</td><td>February 23, 2007</td><td>7.0-CURRENT after the modification of
	    bus_setup_intr() (newbus).</td></tr><tr><td>700032</td><td>March 2, 2007</td><td>7.0-CURRENT after the inclusion of ipw(4) and
	    iwi(4) firmware.</td></tr><tr><td>700033</td><td>March 9, 2007</td><td>7.0-CURRENT after the inclusion of ncurses wide
	    character support.</td></tr><tr><td>700034</td><td>March 19, 2007</td><td>7.0-CURRENT after changes to how insmntque(),
	    getnewvnode(), and vfs_hash_insert() work.</td></tr><tr><td>700035</td><td>March 26, 2007</td><td>7.0-CURRENT after addition of a notify mechanism
	    for CPU frequency changes.</td></tr><tr><td>700036</td><td>April 6, 2007</td><td>7.0-CURRENT after import of the ZFS
	    filesystem.</td></tr><tr><td>700037</td><td>April 8, 2007</td><td>7.0-CURRENT after addition of CAM 'SG' peripheral
	    device, which implements a subset of Linux SCSI SG
	    passthrough device API.</td></tr><tr><td>700038</td><td>April 30, 2007</td><td>7.0-CURRENT after changing <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getenv&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">getenv</span>(3)</span></a>,
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=putenv&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">putenv</span>(3)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setenv&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">setenv</span>(3)</span></a> and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=unsetenv&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">unsetenv</span>(3)</span></a> to
	    be POSIX conformant.</td></tr><tr><td>700039</td><td>May 1, 2007</td><td>7.0-CURRENT after the changes in 700038 were
	    backed out.</td></tr><tr><td>700040</td><td>May 10, 2007</td><td>7.0-CURRENT after the addition of <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=flopen&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">flopen</span>(3)</span></a>
	    to libutil.</td></tr><tr><td>700041</td><td>May 13, 2007</td><td>7.0-CURRENT after enabling symbol versioning, and
	    changing the default thread library to libthr.</td></tr><tr><td>700042</td><td>May 19, 2007</td><td>7.0-CURRENT after the import of gcc
	    4.2.0.</td></tr><tr><td>700043</td><td>May 21, 2007</td><td>7.0-CURRENT after bump of all shared library
	    versions that had not been changed since
	    RELENG_6.</td></tr><tr><td>700044</td><td>June 7, 2007</td><td>7.0-CURRENT after changing the argument for
	    vn_open()/VOP_OPEN() from file descriptor index to the
	    struct file *.</td></tr><tr><td>700045</td><td>June 10, 2007</td><td>7.0-CURRENT after changing <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pam_nologin&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pam_nologin</span>(8)</span></a> to
	    provide an account management function instead of an
	    authentication function to the PAM framework.</td></tr><tr><td>700046</td><td>June 11, 2007</td><td>7.0-CURRENT after updated 802.11 wireless
	    support.</td></tr><tr><td>700047</td><td>June 11, 2007</td><td>7.0-CURRENT after adding TCP LRO interface
	    capabilities.</td></tr><tr><td>700048</td><td>June 12, 2007</td><td>7.0-CURRENT after
	    RFC 3678 API support added to the IPv4 stack.
	    Legacy RFC 1724 behavior of the IP_MULTICAST_IF
	    ioctl has now been removed; 0.0.0.0/8 may no longer
	    be used to specify an interface index.
	    Use struct ipmreqn instead.</td></tr><tr><td>700049</td><td>July 3, 2007</td><td>7.0-CURRENT after importing pf from OpenBSD
	    4.1</td></tr><tr><td>(not changed)</td><td> </td><td>7.0-CURRENT after adding IPv6 support for
	    FAST_IPSEC, deleting KAME IPSEC, and renaming
	    FAST_IPSEC to IPSEC.</td></tr><tr><td>700050</td><td>July 4, 2007</td><td>7.0-CURRENT after converting setenv/putenv/etc.
	    calls from traditional BSD to POSIX.</td></tr><tr><td>700051</td><td>July 4, 2007</td><td>7.0-CURRENT after adding new mmap/lseek/etc
	    syscalls.</td></tr><tr><td>700052</td><td>July 6, 2007</td><td>7.0-CURRENT after moving I4B headers to
	    include/i4b.</td></tr><tr><td>700053</td><td>September 30, 2007</td><td>7.0-CURRENT after the addition of support for
	    PCI domains</td></tr><tr><td>700054</td><td>October 25, 2007</td><td>7.0-CURRENT after MFC of wide and single byte
	    ctype separation.</td></tr><tr><td>700055</td><td>October 28, 2007</td><td>7.0-RELEASE, and 7.0-CURRENT after ABI backwards
	    compatibility to the FreeBSD 4/5/6 versions of the
	    PCIOCGETCONF, PCIOCREAD and PCIOCWRITE IOCTLs was
	    MFCed, which required the ABI of the PCIOCGETCONF
	    IOCTL to be broken again</td></tr><tr><td>700100</td><td>December 22, 2007</td><td>7.0-STABLE after 7.0-RELEASE</td></tr><tr><td>700101</td><td>February 8, 2008</td><td>7.0-STABLE after the MFC of m_collapse().</td></tr><tr><td>700102</td><td>March 30, 2008</td><td>7.0-STABLE after the MFC of
	    kdb_enter_why().</td></tr><tr><td>700103</td><td>April 10, 2008</td><td>7.0-STABLE after adding l_sysid to struct
	    flock.</td></tr><tr><td>700104</td><td>April 11, 2008</td><td>7.0-STABLE after the MFC of procstat(1).</td></tr><tr><td>700105</td><td>April 11, 2008</td><td>7.0-STABLE after the MFC of umtx
	    features.</td></tr><tr><td>700106</td><td>April 15, 2008</td><td>7.0-STABLE after the MFC of <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=write&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">write</span>(2)</span></a> support
	    to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=psm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">psm</span>(4)</span></a>.</td></tr><tr><td>700107</td><td>April 20, 2008</td><td>7.0-STABLE after the MFC of F_DUP2FD command
	    to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fcntl&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">fcntl</span>(2)</span></a>.</td></tr><tr><td>700108</td><td>May 5, 2008</td><td>7.0-STABLE after some <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lockmgr&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">lockmgr</span>(9)</span></a> changes,
	    which makes it necessary to include
	    <code class="filename">sys/lock.h</code> to use
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lockmgr&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">lockmgr</span>(9)</span></a>.</td></tr><tr><td>700109</td><td>May 27, 2008</td><td>7.0-STABLE after MFC of the
	    <code class="function">memrchr</code> function.</td></tr><tr><td>700110</td><td>August 5, 2008</td><td>7.0-STABLE after MFC of kernel NFS lockd
	    client.</td></tr><tr><td>700111</td><td>August 20, 2008</td><td>7.0-STABLE after addition of physically
	    contiguous jumbo frame support.</td></tr><tr><td>700112</td><td>August 27, 2008</td><td>7.0-STABLE after MFC of kernel DTrace
	    support.</td></tr><tr><td>701000</td><td>November 25, 2008</td><td>7.1-RELEASE</td></tr><tr><td>701100</td><td>November 25, 2008</td><td>7.1-STABLE after 7.1-RELEASE.</td></tr><tr><td>701101</td><td>January 10, 2009</td><td>7.1-STABLE after <code class="function">strndup</code>
	    merge.</td></tr><tr><td>701102</td><td>January 17, 2009</td><td>7.1-STABLE after cpuctl(4) support
	    added.</td></tr><tr><td>701103</td><td>February 7, 2009</td><td>7.1-STABLE after the merge of
	    multi-/no-IPv4/v6 jails.</td></tr><tr><td>701104</td><td>February 14, 2009</td><td>7.1-STABLE after the store of the suspension
	    owner in the struct mount, and introduction of
	    vfs_susp_clean method into the struct vfsops.</td></tr><tr><td>701105</td><td>March 12, 2009</td><td>7.1-STABLE after the incompatible change
	    to the kern.ipc.shmsegs sysctl to allow allocating
	    larger SysV shared memory segments on 64bit
	    architectures.</td></tr><tr><td>701106</td><td>March 14, 2009</td><td>7.1-STABLE after the merge of a fix for
	    POSIX semaphore wait operations.</td></tr><tr><td>702000</td><td>April 15, 2009</td><td>7.2-RELEASE</td></tr><tr><td>702100</td><td>April 15, 2009</td><td>7.2-STABLE after 7.2-RELEASE.</td></tr><tr><td>702101</td><td>May 15, 2009</td><td>7.2-STABLE after ichsmb(4) was changed to
	    use left-adjusted slave addressing to match other
	    SMBus controller drivers.</td></tr><tr><td>702102</td><td>May 28, 2009</td><td>7.2-STABLE after MFC of the
	    <code class="function">fdopendir</code> function.</td></tr><tr><td>702103</td><td>June 06, 2009</td><td>7.2-STABLE after MFC of PmcTools.</td></tr><tr><td>702104</td><td>July 14, 2009</td><td>7.2-STABLE after MFC of the
	    <code class="function">closefrom</code> system call.</td></tr><tr><td>702105</td><td>July 31, 2009</td><td>7.2-STABLE after MFC of the SYSVIPC ABI
	    change.</td></tr><tr><td>702106</td><td>September 14, 2009</td><td>7.2-STABLE after MFC of the x86 PAT
	    enhancements and addition of d_mmap_single() and
	    the scatter/gather list VM object type.</td></tr><tr><td>703000</td><td>February 9, 2010</td><td>7.3-RELEASE</td></tr><tr><td>703100</td><td>February 9, 2010</td><td>7.3-STABLE after 7.3-RELEASE.</td></tr><tr><td>704000</td><td>December 22, 2010</td><td>7.4-RELEASE</td></tr><tr><td>704100</td><td>December 22, 2010</td><td>7.4-STABLE after 7.4-RELEASE.</td></tr><tr><td>800000</td><td>October 11, 2007</td><td>8.0-CURRENT.  Separating wide and single byte
	    ctype.</td></tr><tr><td>800001</td><td>October 16, 2007</td><td>8.0-CURRENT after libpcap 0.9.8 and tcpdump 3.9.8
	    import.</td></tr><tr><td>800002</td><td>October 21, 2007</td><td>8.0-CURRENT after renaming kthread_create()
	    and friends to kproc_create() etc.</td></tr><tr><td>800003</td><td>October 24, 2007</td><td>8.0-CURRENT after ABI backwards compatibility
	    to the FreeBSD 4/5/6 versions of the PCIOCGETCONF,
	    PCIOCREAD and PCIOCWRITE IOCTLs was added, which
	    required the ABI of the PCIOCGETCONF IOCTL to be
	    broken again</td></tr><tr><td>800004</td><td>November 12, 2007</td><td>8.0-CURRENT after agp(4) driver moved from
	    src/sys/pci to src/sys/dev/agp</td></tr><tr><td>800005</td><td>December 4, 2007</td><td>8.0-CURRENT after changes to the jumbo frame
	    allocator (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/174247"><span class="svnref">174247</span></a>).</td></tr><tr><td>800006</td><td>December 7, 2007</td><td>8.0-CURRENT after the addition of callgraph
	    capture functionality to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hwpmc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">hwpmc</span>(4)</span></a>.</td></tr><tr><td>800007</td><td>December 25, 2007</td><td>8.0-CURRENT after kdb_enter() gains a "why"
	    argument.</td></tr><tr><td>800008</td><td>December 28, 2007</td><td>8.0-CURRENT after LK_EXCLUPGRADE option
	    removal.</td></tr><tr><td>800009</td><td>January 9, 2008</td><td>8.0-CURRENT after introduction of
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lockmgr_disown&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">lockmgr_disown</span>(9)</span></a></td></tr><tr><td>800010</td><td>January 10, 2008</td><td>8.0-CURRENT after the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vn_lock&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">vn_lock</span>(9)</span></a> prototype
	    change.</td></tr><tr><td>800011</td><td>January 13, 2008</td><td>8.0-CURRENT after the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=VOP_LOCK&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">VOP_LOCK</span>(9)</span></a> and
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=VOP_UNLOCK&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">VOP_UNLOCK</span>(9)</span></a> prototype changes.</td></tr><tr><td>800012</td><td>January 19, 2008</td><td>8.0-CURRENT after introduction of
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lockmgr_recursed&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">lockmgr_recursed</span>(9)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=BUF_RECURSED&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">BUF_RECURSED</span>(9)</span></a> and
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=BUF_ISLOCKED&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">BUF_ISLOCKED</span>(9)</span></a> and the removal of
	    <code class="function">BUF_REFCNT()</code>.</td></tr><tr><td>800013</td><td>January 23, 2008</td><td>8.0-CURRENT after introduction of the
	    <span class="quote">&#8220;<span class="quote">ASCII</span>&#8221;</span> encoding.</td></tr><tr><td>800014</td><td>January 24, 2008</td><td>8.0-CURRENT after changing the prototype of
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lockmgr&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">lockmgr</span>(9)</span></a> and removal of
	    <code class="function">lockcount()</code> and
	    <code class="function">LOCKMGR_ASSERT()</code>.</td></tr><tr><td>800015</td><td>January 26, 2008</td><td>8.0-CURRENT after extending the types
	    of the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fts&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">fts</span>(3)</span></a> structures.</td></tr><tr><td>800016</td><td>February 1, 2008</td><td>8.0-CURRENT after adding an argument to
	    MEXTADD(9)</td></tr><tr><td>800017</td><td>February 6, 2008</td><td>8.0-CURRENT after the introduction of
	    LK_NODUP and LK_NOWITNESS options in the
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lockmgr&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">lockmgr</span>(9)</span></a> space.</td></tr><tr><td>800018</td><td>February 8, 2008</td><td>8.0-CURRENT after the addition of
	    m_collapse.</td></tr><tr><td>800019</td><td>February 9, 2008</td><td>8.0-CURRENT after the addition of current
	    working directory, root directory, and jail
	    directory support to the kern.proc.filedesc
	    sysctl.</td></tr><tr><td>800020</td><td>February 13, 2008</td><td>8.0-CURRENT after introduction of
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lockmgr_assert&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">lockmgr_assert</span>(9)</span></a> and
	    <code class="function">BUF_ASSERT</code> functions.</td></tr><tr><td>800021</td><td>February 15, 2008</td><td>8.0-CURRENT after introduction of
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lockmgr_args&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">lockmgr_args</span>(9)</span></a> and LK_INTERNAL flag
	    removal.</td></tr><tr><td>800022</td><td>(backed out)</td><td>8.0-CURRENT after changing the default system ar
	    to BSD <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ar</span>(1)</span></a>.</td></tr><tr><td>800023</td><td>February 25, 2008</td><td>8.0-CURRENT after changing the prototypes of
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lockstatus&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">lockstatus</span>(9)</span></a> and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=VOP_ISLOCKED&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">VOP_ISLOCKED</span>(9)</span></a>, more
	    specifically retiring the
	    <code class="literal">struct thread</code> argument.</td></tr><tr><td>800024</td><td>March 1, 2008</td><td>8.0-CURRENT after axing out the
	    <code class="function">lockwaiters</code> and
	    <code class="function">BUF_LOCKWAITERS</code> functions,
	    changing the return value of
	    <code class="function">brelvp</code> from void to int and
	    introducing new flags for <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lockinit&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">lockinit</span>(9)</span></a>.</td></tr><tr><td>800025</td><td>March 8, 2008</td><td>8.0-CURRENT after adding F_DUP2FD command
	    to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fcntl&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">fcntl</span>(2)</span></a>.</td></tr><tr><td>800026</td><td>March 12, 2008</td><td>8.0-CURRENT after changing the priority parameter
	    to cv_broadcastpri such that 0 means no
	    priority.</td></tr><tr><td>800027</td><td>March 24, 2008</td><td>8.0-CURRENT after changing the bpf monitoring ABI
	    when zerocopy bpf buffers were added.</td></tr><tr><td>800028</td><td>March 26, 2008</td><td>8.0-CURRENT after adding l_sysid to struct
	    flock.</td></tr><tr><td>800029</td><td>March 28, 2008</td><td>8.0-CURRENT after reintegration of the
	    <code class="function">BUF_LOCKWAITERS</code> function and the
	    addition of <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lockmgr_waiters&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">lockmgr_waiters</span>(9)</span></a>.</td></tr><tr><td>800030</td><td>April 1, 2008</td><td>8.0-CURRENT after the introduction of the
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rw_try_rlock&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">rw_try_rlock</span>(9)</span></a> and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rw_try_wlock&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">rw_try_wlock</span>(9)</span></a>
	    functions.</td></tr><tr><td>800031</td><td>April 6, 2008</td><td>8.0-CURRENT after the introduction of the
	    <code class="function">lockmgr_rw</code> and
	    <code class="function">lockmgr_args_rw</code>
	    functions.</td></tr><tr><td>800032</td><td>April 8, 2008</td><td>8.0-CURRENT after the implementation of the
	    openat and related syscalls, introduction of the
	    O_EXEC flag for the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=open&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">open</span>(2)</span></a>, and providing the
	    corresponding linux compatibility syscalls.</td></tr><tr><td>800033</td><td>April 8, 2008</td><td>8.0-CURRENT after added <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=write&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">write</span>(2)</span></a> support for
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=psm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">psm</span>(4)</span></a> in native operation level.  Now arbitrary
	    commands can be written to
	    <code class="filename">/dev/psm%d</code> and status can be
	    read back from it.</td></tr><tr><td>800034</td><td>April 10, 2008</td><td>8.0-CURRENT after introduction of the
	    <code class="function">memrchr</code> function.</td></tr><tr><td>800035</td><td>April 16, 2008</td><td>8.0-CURRENT after introduction of the
	    <code class="function">fdopendir</code> function.</td></tr><tr><td>800036</td><td>April 20, 2008</td><td>8.0-CURRENT after switchover of 802.11 wireless
	    to multi-bss support (aka vaps).</td></tr><tr><td>800037</td><td>May 9, 2008</td><td>8.0-CURRENT after addition of multi routing
	    table support (aka setfib(1), setfib(2)).</td></tr><tr><td>800038</td><td>May 26, 2008</td><td>8.0-CURRENT after removal of netatm and
	    ISDN4BSD.  Also, the addition of the
	    Compact C Type (CTF) tools.</td></tr><tr><td>800039</td><td>June 14, 2008</td><td>8.0-CURRENT after removal of sgtty.</td></tr><tr><td>800040</td><td>June 26, 2008</td><td>8.0-CURRENT with kernel NFS lockd client.</td></tr><tr><td>800041</td><td>July 22, 2008</td><td>8.0-CURRENT after addition of arc4random_buf(3)
	    and arc4random_uniform(3).</td></tr><tr><td>800042</td><td>August 8, 2008</td><td>8.0-CURRENT after addition of cpuctl(4).</td></tr><tr><td>800043</td><td>August 13, 2008</td><td>8.0-CURRENT after changing bpf(4) to use a
	    single device node, instead of device cloning.</td></tr><tr><td>800044</td><td>August 17, 2008</td><td>8.0-CURRENT after the commit of the first step of
	    the vimage project renaming global variables to be
	    virtualized with a V_ prefix with macros to map them
	    back to their global names.</td></tr><tr><td>800045</td><td>August 20, 2008</td><td>8.0-CURRENT after the integration of the
	    MPSAFE TTY layer, including changes to various
	    drivers and utilities that interact with it.</td></tr><tr><td>800046</td><td>September 8, 2008</td><td>8.0-CURRENT after the separation of the GDT
	    per CPU on amd64 architecture.</td></tr><tr><td>800047</td><td>September 10, 2008</td><td>8.0-CURRENT after removal of VSVTX, VSGID
	    and VSUID.</td></tr><tr><td>800048</td><td>September 16, 2008</td><td>8.0-CURRENT after converting the kernel NFS mount
	    code to accept individual mount options in the
	    nmount() iovec, not just one big
	    struct nfs_args.</td></tr><tr><td>800049</td><td>September 17, 2008</td><td>8.0-CURRENT after the removal of <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=suser&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">suser</span>(9)</span></a>
	    and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=suser_cred&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">suser_cred</span>(9)</span></a>.</td></tr><tr><td>800050</td><td>October 20, 2008</td><td>8.0-CURRENT after buffer cache API
	    change.</td></tr><tr><td>800051</td><td>October 23, 2008</td><td>8.0-CURRENT after the removal of the
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=MALLOC&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">MALLOC</span>(9)</span></a> and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=FREE&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">FREE</span>(9)</span></a> macros.</td></tr><tr><td>800052</td><td>October 28, 2008</td><td>8.0-CURRENT after the introduction of accmode_t
	    and renaming of VOP_ACCESS 'a_mode' argument
	    to 'a_accmode'.</td></tr><tr><td>800053</td><td>November 2, 2008</td><td>8.0-CURRENT after the prototype change of
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vfs_busy&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">vfs_busy</span>(9)</span></a> and the introduction of its
	    MBF_NOWAIT and MBF_MNTLSTLOCK flags.</td></tr><tr><td>800054</td><td>November 22, 2008</td><td>8.0-CURRENT after the addition of buf_ring,
	    memory barriers and ifnet functions to facilitate
	    multiple hardware transmit queues for cards that
	    support them, and a lockless ring-buffer
	    implementation to enable drivers to more efficiently
	    manage queuing of packets.</td></tr><tr><td>800055</td><td>November 27, 2008</td><td>8.0-CURRENT after the addition of Intel&#8482;
	    Core, Core2, and Atom support to
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hwpmc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">hwpmc</span>(4)</span></a>.</td></tr><tr><td>800056</td><td>November 29, 2008</td><td>8.0-CURRENT after the introduction of
	    multi-/no-IPv4/v6 jails.</td></tr><tr><td>800057</td><td>December 1, 2008</td><td>8.0-CURRENT after the switch to the
	    ath hal source code.</td></tr><tr><td>800058</td><td>December 12, 2008</td><td>8.0-CURRENT after the introduction of
	    the VOP_VPTOCNP operation.</td></tr><tr><td>800059</td><td>December 15, 2008</td><td>8.0-CURRENT incorporates the
	    new arp-v2 rewrite.</td></tr><tr><td>800060</td><td>December 19, 2008</td><td>8.0-CURRENT after the addition of makefs.</td></tr><tr><td>800061</td><td>January 15, 2009</td><td>8.0-CURRENT after TCP Appropriate Byte
	    Counting.</td></tr><tr><td>800062</td><td>January 28, 2009</td><td>8.0-CURRENT after removal of minor(),
	    minor2unit(), unit2minor(), etc.</td></tr><tr><td>800063</td><td>February 18, 2009</td><td>8.0-CURRENT after GENERIC config change to use
	    the USB2 stack, but also the addition of
	    fdevname(3).</td></tr><tr><td>800064</td><td>February 23, 2009</td><td>8.0-CURRENT after the USB2 stack is moved to and
	    replaces dev/usb.</td></tr><tr><td>800065</td><td>February 26, 2009</td><td>8.0-CURRENT after the renaming of all functions
	    in libmp(3).</td></tr><tr><td>800066</td><td>February 27, 2009</td><td>8.0-CURRENT after changing USB devfs handling and
	    layout.</td></tr><tr><td>800067</td><td>February 28, 2009</td><td>8.0-CURRENT after adding getdelim(), getline(),
	    stpncpy(), strnlen(), wcsnlen(), wcscasecmp(), and
	    wcsncasecmp().</td></tr><tr><td>800068</td><td>March 2, 2009</td><td>8.0-CURRENT after renaming the ushub devclass to
	    uhub.</td></tr><tr><td>800069</td><td>March 9, 2009</td><td>8.0-CURRENT after libusb20.so.1 was renamed to
	    libusb.so.1.</td></tr><tr><td>800070</td><td>March 9, 2009</td><td>8.0-CURRENT after merging IGMPv3 and
	    Source-Specific Multicast (SSM) to the IPv4
	    stack.</td></tr><tr><td>800071</td><td>March 14, 2009</td><td>8.0-CURRENT after gcc was patched to use C99
	    inline semantics in c99 and gnu99 mode.</td></tr><tr><td>800072</td><td>March 15, 2009</td><td>8.0-CURRENT after the IFF_NEEDSGIANT flag has
	    been removed; non-MPSAFE network device drivers are no
	    longer supported.</td></tr><tr><td>800073</td><td>March 18, 2009</td><td>8.0-CURRENT after the dynamic string token
	    substitution has been implemented for rpath and needed
	    paths.</td></tr><tr><td>800074</td><td>March 24, 2009</td><td>8.0-CURRENT after tcpdump 4.0.0 and
	    libpcap 1.0.0 import.</td></tr><tr><td>800075</td><td>April 6, 2009</td><td>8.0-CURRENT after layout of structs vnet_net,
	    vnet_inet and vnet_ipfw has been changed.</td></tr><tr><td>800076</td><td>April 9, 2009</td><td>8.0-CURRENT after adding delay profiles in
	    dummynet.</td></tr><tr><td>800077</td><td>April 14, 2009</td><td>8.0-CURRENT after removing VOP_LEASE() and
	    vop_vector.vop_lease.</td></tr><tr><td>800078</td><td>April 15, 2009</td><td>8.0-CURRENT after struct rt_weight fields have
	    been added to struct rt_metrics and struct
	    rt_metrics_lite, changing the layout of struct
	    rt_metrics_lite.  A bump to RTM_VERSION was made, but
	    backed out.</td></tr><tr><td>800079</td><td>April 15, 2009</td><td>8.0-CURRENT after struct llentry pointers are
	    added to struct route and struct route_in6.</td></tr><tr><td>800080</td><td>April 15, 2009</td><td>8.0-CURRENT after layout of struct inpcb has been
	    changed.</td></tr><tr><td>800081</td><td>April 19, 2009</td><td>8.0-CURRENT after the layout of struct
	    malloc_type has been changed.</td></tr><tr><td>800082</td><td>April 21, 2009</td><td>8.0-CURRENT after the layout of struct ifnet has
	    changed, and with if_ref() and if_rele() ifnet
	    refcounting.</td></tr><tr><td>800083</td><td>April 22, 2009</td><td>8.0-CURRENT after the implementation of a
	    low-level Bluetooth HCI API.</td></tr><tr><td>800084</td><td>April 29, 2009</td><td>8.0-CURRENT after IPv6 SSM and MLDv2
	    changes.</td></tr><tr><td>800085</td><td>April 30, 2009</td><td>8.0-CURRENT after enabling support for
	    VIMAGE kernel builds with one active image.</td></tr><tr><td>800086</td><td>May 8, 2009</td><td>8.0-CURRENT after adding support for input lines
	    of arbitrarily length in patch(1).</td></tr><tr><td>800087</td><td>May 11, 2009</td><td>8.0-CURRENT after some VFS KPI changes.  The
	    thread argument has been removed from the FSD parts of
	    the VFS.  <code class="function">VFS_*</code> functions do not
	    need the context any more because it always refers to
	    <code class="varname">curthread</code>.  In some special cases,
	    the old behavior is retained.</td></tr><tr><td>800088</td><td>May 20, 2009</td><td>8.0-CURRENT after net80211 monitor mode
	    changes.</td></tr><tr><td>800089</td><td>May 23, 2009</td><td>8.0-CURRENT after adding UDP control block
	    support.</td></tr><tr><td>800090</td><td>May 23, 2009</td><td>8.0-CURRENT after virtualizing interface
	    cloning.</td></tr><tr><td>800091</td><td>May 27, 2009</td><td>8.0-CURRENT after adding hierarchical jails
	    and removing global securelevel.</td></tr><tr><td>800092</td><td>May 29, 2009</td><td>8.0-CURRENT after changing
	    <code class="function">sx_init_flags()</code> KPI.  The
	    <code class="constant">SX_ADAPTIVESPIN</code> is retired and a
	    new <code class="constant">SX_NOADAPTIVE</code> flag is
	    introduced to handle the reversed
	    logic.</td></tr><tr><td>800093</td><td>May 29, 2009</td><td>8.0-CURRENT after adding mnt_xflag to
	    struct mount.</td></tr><tr><td>800094</td><td>May 30, 2009</td><td>8.0-CURRENT after adding
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=VOP_ACCESSX&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">VOP_ACCESSX</span>(9)</span></a>.</td></tr><tr><td>800095</td><td>May 30, 2009</td><td>8.0-CURRENT after changing the polling KPI.
	    The polling handlers now return the number of packets
	    processed.  A new
	    <code class="constant">IFCAP_POLLING_NOCOUNT</code> is also
	    introduced to specify that the return value is
	    not significant and the counting should be
	    skipped.</td></tr><tr><td>800096</td><td>June 1, 2009</td><td>8.0-CURRENT after updating to the new netisr
	    implementation and after changing the way we
	    store and access FIBs.</td></tr><tr><td>800097</td><td>June 8, 2009</td><td>8.0-CURRENT after the introduction of vnet
	    destructor hooks and infrastructure.</td></tr><tr><td>800097</td><td>June 11, 2009</td><td>8.0-CURRENT after the introduction of netgraph
	    outbound to inbound path call detection and queuing,
	    which also changed the layout of struct
	    thread.</td></tr><tr><td>800098</td><td>June 14, 2009</td><td>8.0-CURRENT after OpenSSL 0.9.8k import.</td></tr><tr><td>800099</td><td>June 22, 2009</td><td>8.0-CURRENT after NGROUPS update and moving
	    route virtualization into its own VImage
	    module.</td></tr><tr><td>800100</td><td>June 24, 2009</td><td>8.0-CURRENT after SYSVIPC ABI change.</td></tr><tr><td>800101</td><td>June 29, 2009</td><td>8.0-CURRENT after the removal of the
	    /dev/net/* per-interface character
	    devices.</td></tr><tr><td>800102</td><td>July 12, 2009</td><td>8.0-CURRENT after padding was added to
	    struct sackhint, struct tcpcb, and struct
	    tcpstat.</td></tr><tr><td>800103</td><td>July 13, 2009</td><td>8.0-CURRENT after replacing struct tcpopt
	    with struct toeopt in the TOE driver interface
	    to the TCP syncache.</td></tr><tr><td>800104</td><td>July 14, 2009</td><td>8.0-CURRENT after the addition of the
	    linker-set based per-vnet allocator.</td></tr><tr><td>800105</td><td>July 19, 2009</td><td>8.0-CURRENT after version bump for all
	    shared libraries that do not have symbol versioning
	    turned on.</td></tr><tr><td>800106</td><td>July 24, 2009</td><td>8.0-CURRENT after introduction of OBJT_SG
	    VM object type.</td></tr><tr><td>800107</td><td>August 2, 2009</td><td>8.0-CURRENT after making the newbus subsystem
	    Giant free by adding the newbus sxlock and
	    8.0-RELEASE.</td></tr><tr><td>800108</td><td>November 21, 2009</td><td>8.0-STABLE after implementing EVFILT_USER kevent
	    filter.</td></tr><tr><td>800500</td><td>January 7, 2010</td><td>8.0-STABLE after
	    <code class="literal">__FreeBSD_version</code> bump to make
	    <code class="command">pkg_add -r</code> use
	    packages-8-stable.</td></tr><tr><td>800501</td><td>January 24, 2010</td><td>8.0-STABLE after change of the
	    <code class="function">scandir(3)</code> and
	    <code class="function">alphasort(3)</code> prototypes to
	    conform to SUSv4.</td></tr><tr><td>800502</td><td>January 31, 2010</td><td>8.0-STABLE after addition of
	    <code class="function">sigpause(3)</code>.</td></tr><tr><td>800503</td><td>February 25, 2010</td><td>8.0-STABLE after addition of SIOCGIFDESCR
	    and SIOCSIFDESCR ioctls to network interfaces.  These
	    ioctl can be used to manipulate interface description,
	    as inspired by OpenBSD.</td></tr><tr><td>800504</td><td>March 1, 2010</td><td>8.0-STABLE after MFC of importing x86emu, a
	    software emulator for real mode x86 CPU from
	    OpenBSD.</td></tr><tr><td>800505</td><td>May 18, 2010</td><td>8.0-STABLE after MFC of adding liblzma, xz,
	    xzdec, and lzmainfo.</td></tr><tr><td>801000</td><td>June 14, 2010</td><td>8.1-RELEASE</td></tr><tr><td>801500</td><td>June 14, 2010</td><td>8.1-STABLE after 8.1-RELEASE.</td></tr><tr><td>801501</td><td>November 3, 2010</td><td>8.1-STABLE after KBI change in struct sysentvec,
	    and implementation of PL_FLAG_SCE/SCX/EXEC/SI and
	    pl_siginfo for ptrace(PT_LWPINFO) .</td></tr><tr><td>802000</td><td>December 22, 2010</td><td>8.2-RELEASE</td></tr><tr><td>802500</td><td>December 22, 2010</td><td>8.2-STABLE after 8.2-RELEASE.</td></tr><tr><td>802501</td><td>February 28, 2011</td><td>8.2-STABLE after merging DTrace changes,
	    including support for userland tracing.</td></tr><tr><td>802502</td><td>March 6, 2011</td><td>8.2-STABLE after merging log2 and log2f
	    into libm.</td></tr><tr><td>802503</td><td>May 1, 2011</td><td>8.2-STABLE after upgrade of the gcc to the last
	    GPLv2 version from the FSF gcc-4_2-branch.</td></tr><tr><td>802504</td><td>May 28, 2011</td><td>8.2-STABLE after introduction of the KPI and
	    supporting infrastructure for modular congestion
	    control.</td></tr><tr><td>802505</td><td>May 28, 2011</td><td>8.2-STABLE after introduction of Hhook and Khelp
	    KPIs.</td></tr><tr><td>802506</td><td>May 28, 2011</td><td>8.2-STABLE after addition of OSD to struct
	    tcpcb.</td></tr><tr><td>802507</td><td>June 6, 2011</td><td>8.2-STABLE after ZFS v28 import.</td></tr><tr><td>802508</td><td>June 8, 2011</td><td>8.2-STABLE after removal of the schedtail event
	    handler and addition of the sv_schedtail method to
	    struct sysvec.</td></tr><tr><td>802509</td><td>July 14, 2011</td><td>8.2-STABLE after merging the SSSE3 support
	    into binutils.</td></tr><tr><td>802510</td><td>July 19, 2011</td><td>8.2-STABLE after addition of
	    RFTSIGZMB flag for
	    <code class="function">rfork(2)</code>.</td></tr><tr><td>802511</td><td>September 9, 2011</td><td>8.2-STABLE after addition of automatic detection
	    of USB mass storage devices which do not support the
	    no synchronize cache SCSI command.</td></tr><tr><td>802512</td><td>September 10, 2011</td><td>8.2-STABLE after merging of
	    re-factoring of auto-quirk.</td></tr><tr><td>802513</td><td>October 25, 2011</td><td>8.2-STABLE after merging of the MAP_PREFAULT_READ
	    flag to <code class="function">mmap(2)</code>.</td></tr><tr><td>802514</td><td>November 16, 2011</td><td>8.2-STABLE after merging of
	    addition of posix_fallocate(2) syscall.</td></tr><tr><td>802515</td><td>January 6, 2012</td><td>8.2-STABLE after merging of addition of the
	    posix_fadvise(2) system call.</td></tr><tr><td>802516</td><td>January 16, 2012</td><td>8.2-STABLE after merging gperf 3.0.3</td></tr><tr><td>802517</td><td>February 15, 2012</td><td>8.2-STABLE after introduction of the new
	    extensible sysctl(3) interface NET_RT_IFLISTL
	    to query address lists (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/231769"><span class="svnref">231769</span></a>).</td></tr><tr><td>803000</td><td>March 3, 2012</td><td>8.3-RELEASE.</td></tr><tr><td>803500</td><td>March 3, 2012</td><td>8.3-STABLE after branching releng/8.3
	    (RELENG_8_3).</td></tr><tr><td>804000</td><td>March 28, 2013</td><td>8.4-RELEASE.</td></tr><tr><td>804500</td><td>March 28, 2013</td><td>8.4-STABLE after 8.4-RELEASE.</td></tr><tr><td>804504</td><td>September 9, 2014</td><td>8.4-STABLE after FreeBSD-SA-14:18
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/271305"><span class="svnref">271305</span></a>).</td></tr><tr><td>804505</td><td>September 16, 2014</td><td>8.4-STABLE after FreeBSD-SA-14:19
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/271668"><span class="svnref">271668</span></a>).</td></tr><tr><td>804506</td><td>October 21, 2014</td><td>8.4-STABLE after FreeBSD-SA-14:21
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/273413"><span class="svnref">273413</span></a>).</td></tr><tr><td>804507</td><td>November 4, 2014</td><td>8.4-STABLE after FreeBSD-SA-14:23, FreeBSD-SA-14:24,
	    and FreeBSD-SA-14:25 (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/274162"><span class="svnref">274162</span></a>).</td></tr><tr><td>804508</td><td>February 25, 2015</td><td>8-STABLE after FreeBSD-EN-15:01.vt,
	    FreeBSD-EN-15:02.openssl, FreeBSD-EN-15:03.freebsd-update,
	    FreeBSD-SA-15:04.igmp, and FreeBSD-SA-15:05.bind (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/279287"><span class="svnref">279287</span></a>).</td></tr><tr><td>900000</td><td>August 22, 2009</td><td>9.0-CURRENT.</td></tr><tr><td>900001</td><td>September 8, 2009</td><td>9.0-CURRENT after importing x86emu, a software
	    emulator for real mode x86 CPU from OpenBSD.</td></tr><tr><td>900002</td><td>September 23, 2009</td><td>9.0-CURRENT after implementing the EVFILT_USER
	    kevent filter functionality.</td></tr><tr><td>900003</td><td>December 2, 2009</td><td>9.0-CURRENT after addition of
	    <code class="function">sigpause(3)</code> and PIE
	    support in csu.</td></tr><tr><td>900004</td><td>December 6, 2009</td><td>9.0-CURRENT after addition of libulog and its
	    libutempter compatibility interface.</td></tr><tr><td>900005</td><td>December 12, 2009</td><td>9.0-CURRENT after addition of
	    <code class="function">sleepq_sleepcnt()</code>, which can be
	    used to query the number of waiters on a specific
	    waiting queue.</td></tr><tr><td>900006</td><td>January 4, 2010</td><td>9.0-CURRENT after change of the
	    <code class="function">scandir(3)</code> and
	    <code class="function">alphasort(3)</code> prototypes to
	    conform to SUSv4.</td></tr><tr><td>900007</td><td>January 13, 2010</td><td>9.0-CURRENT after the removal of utmp(5) and
	    the addition of utmpx (see
	    <code class="function">getutxent(3)</code>) for improved
	    logging of user logins and system events.</td></tr><tr><td>900008</td><td>January 20, 2010</td><td>9.0-CURRENT after the import of BSDL bc/dc and
	    the deprecation of GNU bc/dc.</td></tr><tr><td>900009</td><td>January 26, 2010</td><td>9.0-CURRENT after the addition of SIOCGIFDESCR
	    and SIOCSIFDESCR ioctls to network interfaces.  These
	    ioctl can be used to manipulate interface description,
	    as inspired by OpenBSD.</td></tr><tr><td>900010</td><td>March 22, 2010</td><td>9.0-CURRENT after the import of zlib
	    1.2.4.</td></tr><tr><td>900011</td><td>April 24, 2010</td><td>9.0-CURRENT after adding soft-updates
	    journalling.</td></tr><tr><td>900012</td><td>May 10, 2010</td><td>9.0-CURRENT after adding liblzma, xz, xzdec,
	    and lzmainfo.</td></tr><tr><td>900013</td><td>May 24, 2010</td><td>9.0-CURRENT after bringing in USB fixes for
	    linux(4).</td></tr><tr><td>900014</td><td>June 10, 2010</td><td>9.0-CURRENT after adding Clang.</td></tr><tr><td>900015</td><td>July 22, 2010</td><td>9.0-CURRENT after the import of BSD grep.</td></tr><tr><td>900016</td><td>July 28, 2010</td><td>9.0-CURRENT after adding mti_zone to
	    struct malloc_type_internal.</td></tr><tr><td>900017</td><td>August 23, 2010</td><td>9.0-CURRENT after changing back default grep to
	    GNU grep and adding WITH_BSD_GREP knob.</td></tr><tr><td>900018</td><td>August 24, 2010</td><td>9.0-CURRENT after the
	    <code class="function">pthread_kill(3)</code> -generated signal
	    is identified as SI_LWP in si_code.  Previously,
	    si_code was SI_USER.</td></tr><tr><td>900019</td><td>August 28, 2010</td><td>9.0-CURRENT after addition of the
	    MAP_PREFAULT_READ flag to
	    <code class="function">mmap(2)</code>.</td></tr><tr><td>900020</td><td>September 9, 2010</td><td>9.0-CURRENT after adding drain functionality
	    to sbufs, which also changed the layout of
	    struct sbuf.</td></tr><tr><td>900021</td><td>September 13, 2010</td><td>9.0-CURRENT after DTrace has grown support
	    for userland tracing.</td></tr><tr><td>900022</td><td>October 2, 2010</td><td>9.0-CURRENT after addition of the BSDL man
	    utilities and retirement of GNU/GPL man
	    utilities.</td></tr><tr><td>900023</td><td>October 11, 2010</td><td>9.0-CURRENT after updating xz to git 20101010
	    snapshot.</td></tr><tr><td>900024</td><td>November 11, 2010</td><td>9.0-CURRENT after libgcc.a was replaced
	    by libcompiler_rt.a.</td></tr><tr><td>900025</td><td>November 12, 2010</td><td>9.0-CURRENT after the introduction of the
	    modularised congestion control.</td></tr><tr><td>900026</td><td>November 30, 2010</td><td>9.0-CURRENT after the introduction of Serial
	    Management Protocol (SMP) passthrough and the
	    XPT_SMP_IO and XPT_GDEV_ADVINFO CAM CCBs.</td></tr><tr><td>900027</td><td>December 5, 2010</td><td>9.0-CURRENT after the addition of log2 to
	    libm.</td></tr><tr><td>900028</td><td>December 21, 2010</td><td>9.0-CURRENT after the addition of the Hhook
	    (Helper Hook), Khelp (Kernel Helpers) and Object
	    Specific Data (OSD) KPIs.</td></tr><tr><td>900029</td><td>December 28, 2010</td><td>9.0-CURRENT after the modification of the TCP
	    stack to allow Khelp modules to interact with it via
	    helper hook points and store per-connection data in
	    the TCP control block.</td></tr><tr><td>900030</td><td>January 12, 2011</td><td>9.0-CURRENT after the update of libdialog to
	    version 20100428.</td></tr><tr><td>900031</td><td>February 7, 2011</td><td>9.0-CURRENT after the addition of
	    <code class="function">pthread_getthreadid_np(3)</code>.</td></tr><tr><td>900032</td><td>February 8, 2011</td><td>9.0-CURRENT after the removal of the uio_yield
	    prototype and symbol.</td></tr><tr><td>900033</td><td>February 18, 2011</td><td>9.0-CURRENT after the update of binutils to
	    version 2.17.50.</td></tr><tr><td>900034</td><td>March 8, 2011</td><td>9.0-CURRENT after the struct sysvec
	    (sv_schedtail) changes.</td></tr><tr><td>900035</td><td>March 29, 2011</td><td>9.0-CURRENT after the update of base gcc and
	    libstdc++ to the last GPLv2 licensed revision.</td></tr><tr><td>900036</td><td>April 18, 2011</td><td>9.0-CURRENT after the removal of libobjc and
	    Objective-C support from the base system.</td></tr><tr><td>900037</td><td>May 13, 2011</td><td>9.0-CURRENT after importing the libprocstat(3)
	    library and fuser(1) utility to the base
	    system.</td></tr><tr><td>900038</td><td>May 22, 2011</td><td>9.0-CURRENT after adding a lock flag argument to
	    VFS_FHTOVP(9).</td></tr><tr><td>900039</td><td>June 28, 2011</td><td>9.0-CURRENT after importing pf from OpenBSD
	    4.5.</td></tr><tr><td>900040</td><td>July 19, 2011</td><td>Increase default MAXCPU for FreeBSD to 64 on
	    amd64 and ia64 and to 128 for XLP (mips).</td></tr><tr><td>900041</td><td>August 13, 2011</td><td>9.0-CURRENT after the implementation of Capsicum
	    capabilities; fget(9) gains a rights argument.</td></tr><tr><td>900042</td><td>August 28, 2011</td><td>Bump shared libraries' version numbers for
	    libraries whose ABI has changed in preparation for
	    9.0.</td></tr><tr><td>900043</td><td>September 2, 2011</td><td>Add automatic detection of USB mass storage
	    devices which do not support the no synchronize cache
	    SCSI command.</td></tr><tr><td>900044</td><td>September 10, 2011</td><td>Re-factor auto-quirk.  9.0-RELEASE.</td></tr><tr><td>900045</td><td>January 2, 2012</td><td>9-CURRENT after MFC of true/false from
	    1000002.</td></tr><tr><td>900500</td><td>January 2, 2012</td><td>9.0-STABLE.</td></tr><tr><td>900501</td><td>January 6, 2012</td><td>9.0-STABLE after merging of addition of the
	    posix_fadvise(2) system call.</td></tr><tr><td>900502</td><td>January 16, 2012</td><td>9.0-STABLE after merging gperf 3.0.3</td></tr><tr><td>900503</td><td>February 15, 2012</td><td>9.0-STABLE after introduction of the new
	    extensible sysctl(3) interface NET_RT_IFLISTL
	    to query address lists (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/231768"><span class="svnref">231768</span></a>).</td></tr><tr><td>900504</td><td>March 3, 2012</td><td>9.0-STABLE after changes related to mounting
	    of filesystem inside a jail (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/232728"><span class="svnref">232728</span></a>).</td></tr><tr><td>900505</td><td>March 13, 2012</td><td>9.0-STABLE after introduction of new tcp(4)
	    socket options: TCP_KEEPINIT, TCP_KEEPIDLE,
	    TCP_KEEPINTVL, and TCP_KEEPCNT (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/232945"><span class="svnref">232945</span></a>).</td></tr><tr><td>900506</td><td>May 22, 2012</td><td>9.0-STABLE after introduction of the
	    <code class="function">quick_exit</code> function and
	    related changes required for C++11 (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/235786"><span class="svnref">235786</span></a>).</td></tr><tr><td>901000</td><td>August 5, 2012</td><td>9.1-RELEASE.</td></tr><tr><td>901500</td><td>August 6, 2012</td><td>9.1-STABLE after branching releng/9.1
	    (RELENG_9_1).</td></tr><tr><td>901501</td><td>November 11, 2012</td><td>9.1-STABLE after LIST_PREV() added to queue.h
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/242893"><span class="svnref">242893</span></a>) and KBI change in USB
	    serial devices (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/240659"><span class="svnref">240659</span></a>).</td></tr><tr><td>901502</td><td>November 28, 2012</td><td>9.1-STABLE after USB serial jitter buffer
	    requires rebuild of USB serial device modules.</td></tr><tr><td>901503</td><td>February 21, 2013</td><td>9.1-STABLE after USB moved to the driver
	    structure requiring a rebuild of all USB modules.
	    Also indicates the presence of nmtree.</td></tr><tr><td>901504</td><td>March 15, 2013</td><td>9.1-STABLE after install gained -l, -M, -N and
	    related flags and cat gained the -l option.</td></tr><tr><td>901505</td><td>June 13, 2013</td><td>9.1-STABLE after fixes in ctfmerge bootstrapping
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/249243"><span class="svnref">249243</span></a>).</td></tr><tr><td>902001</td><td>August 3, 2013</td><td><code class="literal">releng/9.2</code> branched from
	    <code class="literal">stable/9</code>
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/253912"><span class="svnref">253912</span></a>).</td></tr><tr><td>902501</td><td>August 2, 2013</td><td>9.2-STABLE after creation of
	    <code class="literal">releng/9.2</code> branch
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/253913"><span class="svnref">253913</span></a>).</td></tr><tr><td>902502</td><td>August 26, 2013</td><td>9.2-STABLE after inclusion of the
	    <code class="literal">PIM_RESCAN</code> CAM path inquiry flag
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254938"><span class="svnref">254938</span></a>).</td></tr><tr><td>902503</td><td>August 27, 2013</td><td>9.2-STABLE after inclusion of the
	    <code class="literal">SI_UNMAPPED</code> cdev flag
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254979"><span class="svnref">254979</span></a>).</td></tr><tr><td>902504</td><td>October 22, 2013</td><td>9.2-STABLE after inclusion of support for
	    <span class="quote">&#8220;<span class="quote">first boot</span>&#8221;</span> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> scripts
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/256917"><span class="svnref">256917</span></a>).</td></tr><tr><td>902505</td><td>December 12, 2013</td><td>9.2-STABLE after Heimdal encoding fix
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/259448"><span class="svnref">259448</span></a>).</td></tr><tr><td>902506</td><td>December 31, 2013</td><td>9-STABLE after MAP_STACK fixes
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/260082"><span class="svnref">260082</span></a>).</td></tr><tr><td>902507</td><td>March 5, 2014</td><td>9-STABLE after upgrade of libc++ to 3.4 release
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/262801"><span class="svnref">262801</span></a>).</td></tr><tr><td>902508</td><td>March 14, 2014</td><td>9-STABLE after merge of the Radeon KMS driver
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/263170"><span class="svnref">263170</span></a>).</td></tr><tr><td>902509</td><td>March 21, 2014</td><td>9-STABLE after upgrade of llvm/clang to 3.4 release
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/263509"><span class="svnref">263509</span></a>).</td></tr><tr><td>902510</td><td>March 27, 2014</td><td>9-STABLE after merge of the vt(4) driver
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/263818"><span class="svnref">263818</span></a>).</td></tr><tr><td>902511</td><td>March 27, 2014</td><td>9-STABLE after FreeBSD-SA-14:06.openssl
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/264289"><span class="svnref">264289</span></a>).</td></tr><tr><td>902512</td><td>April 30, 2014</td><td>9-STABLE after FreeBSD-SA-14:08.tcp
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/265123"><span class="svnref">265123</span></a>).</td></tr><tr><td>903000</td><td>June 20, 2014</td><td>9-RC1 <code class="literal">releng/9.3</code> branch
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/267656"><span class="svnref">267656</span></a>).</td></tr><tr><td>903500</td><td>June 20, 2014</td><td>9.3-STABLE <code class="literal">releng/9.3</code> branch
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/267657"><span class="svnref">267657</span></a>).</td></tr><tr><td>903501</td><td>July 8, 2014</td><td>9-STABLE after FreeBSD-SA-14:17.kmem
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/268433"><span class="svnref">268433</span></a>).</td></tr><tr><td>903502</td><td>August 19, 2014</td><td>9-STABLE after <code class="literal">SOCK_DGRAM</code>
	    bug fix (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/269789"><span class="svnref">269789</span></a>).</td></tr><tr><td>903503</td><td>September 9, 2014</td><td>9-STABLE after FreeBSD-SA-14:18
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/269687"><span class="svnref">269687</span></a>).</td></tr><tr><td>903504</td><td>September 16, 2014</td><td>9-STABLE after FreeBSD-SA-14:19
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/271668"><span class="svnref">271668</span></a>).</td></tr><tr><td>903505</td><td>October 21, 2014</td><td>9-STABLE after FreeBSD-SA-14:20, FreeBSD-SA-14:21,
	    and FreeBSD-SA-14:22 (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/273412"><span class="svnref">273412</span></a>).</td></tr><tr><td>903506</td><td>November 4, 2014</td><td>9-STABLE after FreeBSD-SA-14:23, FreeBSD-SA-14:24,
	    and FreeBSD-SA-14:25 (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/274162"><span class="svnref">274162</span></a>).</td></tr><tr><td>903507</td><td>December 13, 2014</td><td>9-STABLE after merging an important fix to the LLVM
	    vectorizer, which could lead to buffer overruns in some
	    cases (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/275742"><span class="svnref">275742</span></a>).</td></tr><tr><td>903508</td><td>February 25, 2015</td><td>9-STABLE after FreeBSD-EN-15:01.vt,
	    FreeBSD-EN-15:02.openssl, FreeBSD-EN-15:03.freebsd-update,
	    FreeBSD-SA-15:04.igmp, and FreeBSD-SA-15:05.bind (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/279287"><span class="svnref">279287</span></a>).</td></tr><tr><td>1000000</td><td>September 26, 2011</td><td>10.0-CURRENT.</td></tr><tr><td>1000001</td><td>November 4, 2011</td><td>10-CURRENT after addition of the posix_fadvise(2)
	    system call.</td></tr><tr><td>1000002</td><td>December 12, 2011</td><td>10-CURRENT after defining boolean true/false in
	    sys/types.h, sizeof(bool) may have changed (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/228444"><span class="svnref">228444</span></a>).  10-CURRENT after
	    xlocale.h was introduced (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/227753"><span class="svnref">227753</span></a>).</td></tr><tr><td>1000003</td><td>December 16, 2011</td><td>10-CURRENT after major changes to carp(4),
	    changing size of struct in_aliasreq,
	    struct in6_aliasreq (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/228571"><span class="svnref">228571</span></a>) and straitening arguments
	    check of SIOCAIFADDR (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/228574"><span class="svnref">228574</span></a>).</td></tr><tr><td>1000004</td><td>January 1, 2012</td><td>10-CURRENT after the removal of skpc(9) and the
	    addition of memcchr(9) (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/229200"><span class="svnref">229200</span></a>).</td></tr><tr><td>1000005</td><td>January 16, 2012</td><td>10-CURRENT after the removal of support for
	    SIOCSIFADDR, SIOCSIFNETMASK, SIOCSIFBRDADDR,
	    SIOCSIFDSTADDR ioctls (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/230207"><span class="svnref">230207</span></a>).</td></tr><tr><td>1000006</td><td>January 26, 2012</td><td>10-CURRENT after introduction of read capacity
	    data asynchronous notification in the cam(4) layer
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/230590"><span class="svnref">230590</span></a>).</td></tr><tr><td>1000007</td><td>February 5, 2012</td><td>10-CURRENT after introduction of new tcp(4)
	    socket options: TCP_KEEPINIT, TCP_KEEPIDLE,
	    TCP_KEEPINTVL, and TCP_KEEPCNT (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/231025"><span class="svnref">231025</span></a>).</td></tr><tr><td>1000008</td><td>February 11, 2012</td><td>10-CURRENT after introduction of the new
	    extensible sysctl(3) interface NET_RT_IFLISTL
	    to query address lists (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/231505"><span class="svnref">231505</span></a>).</td></tr><tr><td>1000009</td><td>February 25, 2012</td><td>10-CURRENT after import of libarchive 3.0.3
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/232153"><span class="svnref">232153</span></a>).</td></tr><tr><td>1000010</td><td>March 31, 2012</td><td>10-CURRENT after xlocale cleanup (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/233757"><span class="svnref">233757</span></a>).</td></tr><tr><td>1000011</td><td>April 16, 2012</td><td>10-CURRENT import of LLVM/Clang 3.1 trunk r154661
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/234353"><span class="svnref">234353</span></a>).</td></tr><tr><td>1000012</td><td>May 2, 2012</td><td>10-CURRENT jemalloc import
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/234924"><span class="svnref">234924</span></a>).</td></tr><tr><td>1000013</td><td>May 22, 2012</td><td>10-CURRENT after byacc import
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/235788"><span class="svnref">235788</span></a>).</td></tr><tr><td>1000014</td><td>June 27, 2012</td><td>10-CURRENT after BSD sort becoming the default
	    sort (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/237629"><span class="svnref">237629</span></a>).</td></tr><tr><td>1000015</td><td>July 12, 2012</td><td>10-CURRENT after import of OpenSSL 1.0.1c
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/238405"><span class="svnref">238405</span></a>).</td></tr><tr><td>(not changed)</td><td>July 13, 2012</td><td>10-CURRENT after the fix for LLVM/Clang 3.1
	    regression (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/238429"><span class="svnref">238429</span></a>).</td></tr><tr><td>1000016</td><td>August 8, 2012</td><td>10-CURRENT after KBI change in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ucom&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ucom</span>(4)</span></a>
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/239179"><span class="svnref">239179</span></a>).</td></tr><tr><td>1000017</td><td>August 8, 2012</td><td>10-CURRENT after adding streams feature to the
	    USB stack (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/239214"><span class="svnref">239214</span></a>).</td></tr><tr><td>1000018</td><td>September 8, 2012</td><td>10-CURRENT after major rewrite of <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pf&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pf</span>(4)</span></a>
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/240233"><span class="svnref">240233</span></a>).</td></tr><tr><td>1000019</td><td>October 6, 2012</td><td>10-CURRENT after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pfil&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">pfil</span>(9)</span></a> KBI/KPI changed
	    to supply packets in net byte order to AF_INET
	    filter hooks (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/241245"><span class="svnref">241245</span></a>).</td></tr><tr><td>1000020</td><td>October 16, 2012</td><td>10-CURRENT after the network interface cloning
	    KPI changed and struct if_clone becoming opaque (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/241610"><span class="svnref">241610</span></a>).</td></tr><tr><td>1000021</td><td>October 22, 2012</td><td>10-CURRENT after removal of support for
	    non-MPSAFE filesystems and addition of support for
	    FUSEFS (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/241519"><span class="svnref">241519</span></a>,
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/241897"><span class="svnref">241897</span></a>).</td></tr><tr><td>1000022</td><td>October 22, 2012</td><td>10-CURRENT after the entire IPv4 stack switched
	    to network byte order for IP packet header storage
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/241913"><span class="svnref">241913</span></a>).</td></tr><tr><td>1000023</td><td>November 5, 2012</td><td>10-CURRENT after jitter buffer in the common USB
	    serial driver code, to temporarily store characters
	    if the TTY buffer is full.  Add flow stop and start
	    signals when this happens (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/242619"><span class="svnref">242619</span></a>).</td></tr><tr><td>1000024</td><td>November 5, 2012</td><td>10-CURRENT after clang was made the default
	    compiler on i386 and amd64
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/242624"><span class="svnref">242624</span></a>).</td></tr><tr><td>1000025</td><td>November 17, 2012</td><td>10-CURRENT after the sin6_scope_id member
	    variable in struct sockaddr_in6 was changed to being
	    filled by the kernel before passing the structure to
	    the userland via sysctl or routing socket.  This means
	    the KAME-specific embedded scope id in
	    sin6_addr.s6_addr[2] is always cleared in userland
	    application (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/243443"><span class="svnref">243443</span></a>).</td></tr><tr><td>1000026</td><td>January 11, 2013</td><td>10-CURRENT after install gained the -N flag (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/245313"><span class="svnref">245313</span></a>).  May also be used to
	    indicate the presence of nmtree.</td></tr><tr><td>1000027</td><td>January 29, 2013</td><td>10-CURRENT after cat gained the -l flag (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/246083"><span class="svnref">246083</span></a>).</td></tr><tr><td>1000028</td><td>February 13, 2013</td><td>10-CURRENT after USB moved to the driver
	    structure requiring a rebuild of all USB modules (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/246759"><span class="svnref">246759</span></a>).</td></tr><tr><td>1000029</td><td>March 4, 2013</td><td>10-CURRENT after the introduction of tickless
	    callout facility which also changed the layout of struct
	    callout (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/247777"><span class="svnref">247777</span></a>).</td></tr><tr><td>1000030</td><td>March 12, 2013</td><td>10-CURRENT after KPI breakage introduced in the
	    VM subsystem to support read/write locking (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/248084"><span class="svnref">248084</span></a>).</td></tr><tr><td>1000031</td><td>April 26, 2013</td><td>10-CURRENT after the dst parameter of the
	    ifnet <code class="function">if_output</code> method was
	    changed to take const qualifier (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/249925"><span class="svnref">249925</span></a>).</td></tr><tr><td>1000032</td><td>May 1, 2013</td><td>10-CURRENT after the introduction of the
	    <code class="function">accept4</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/250154"><span class="svnref">250154</span></a>) and
	    <code class="function">pipe2</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/250159"><span class="svnref">250159</span></a>) system calls.</td></tr><tr><td>1000033</td><td>May 21, 2013</td><td>10-CURRENT after flex 2.5.37 import (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/250881"><span class="svnref">250881</span></a>).</td></tr><tr><td>1000034</td><td>June 3, 2013</td><td>10-CURRENT after the addition of these
	    functions to libm: <code class="function">cacos</code>,
	    <code class="function">cacosf</code>,
	    <code class="function">cacosh</code>,
	    <code class="function">cacoshf</code>,
	    <code class="function">casin</code>,
	    <code class="function">casinf</code>,
	    <code class="function">casinh</code>,
	    <code class="function">casinhf</code>,
	    <code class="function">catan</code>,
	    <code class="function">catanf</code>,
	    <code class="function">catanh</code>,
	    <code class="function">catanhf</code>,
	    <code class="function">logl</code>,
	    <code class="function">log2l</code>,
	    <code class="function">log10l</code>,
	    <code class="function">log1pl</code>,
	    <code class="function">expm1l</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/251294"><span class="svnref">251294</span></a>).</td></tr><tr><td>1000035</td><td>June 8, 2013</td><td>10-CURRENT after the introduction of the
	    <code class="function">aio_mlock</code> system call (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/251526"><span class="svnref">251526</span></a>).</td></tr><tr><td>1000036</td><td>July 9, 2013</td><td>10-CURRENT after the addition of a new function
	    to the kernel GSSAPI module's
	    function call interface (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/253049"><span class="svnref">253049</span></a>).</td></tr><tr><td>1000037</td><td>July 9, 2013</td><td>10-CURRENT after the migration of statistics
	    structures to PCPU counters.
	    Changed structures include: <code class="literal">ahstat</code>,
	    <code class="literal">arpstat</code>,
	    <code class="literal">espstat</code>,
	    <code class="literal">icmp6_ifstat</code>,
	    <code class="literal">icmp6stat</code>,
	    <code class="literal">in6_ifstat</code>,
	    <code class="literal">ip6stat</code>,
	    <code class="literal">ipcompstat</code>,
	    <code class="literal">ipipstat</code>,
	    <code class="literal">ipsecstat</code>,
	    <code class="literal">mrt6stat</code>,
	    <code class="literal">mrtstat</code>,
	    <code class="literal">pfkeystat</code>,
	    <code class="literal">pim6stat</code>,
	    <code class="literal">pimstat</code>,
	    <code class="literal">rip6stat</code>,
	    <code class="literal">udpstat</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/253081"><span class="svnref">253081</span></a>).</td></tr><tr><td>1000038</td><td>July 16, 2013</td><td>10-CURRENT after making <code class="literal">ARM
	      EABI</code> the default ABI on arm,
	    armeb, armv6, and armv6eb architectures
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/253396"><span class="svnref">253396</span></a>).</td></tr><tr><td>1000039</td><td>July 22, 2013</td><td>10-CURRENT after <code class="literal">CAM</code>
	    and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mps&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mps</span>(4)</span></a> driver scanning changes
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/253549"><span class="svnref">253549</span></a>).</td></tr><tr><td>1000040</td><td>July 24, 2013</td><td>10-CURRENT after addition of libusb
	    pkgconf files (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/253638"><span class="svnref">253638</span></a>).</td></tr><tr><td>1000041</td><td>August 5, 2013</td><td>10-CURRENT after change from
	    <code class="function">time_second</code> to
	    <code class="function">time_uptime</code>
	    in <code class="literal">PF_INET6</code>
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/253970"><span class="svnref">253970</span></a>).</td></tr><tr><td>1000042</td><td>August 9, 2013</td><td>10-CURRENT after VM subsystem change to unify
	    soft and hard busy mechanisms
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254138"><span class="svnref">254138</span></a>).</td></tr><tr><td>1000043</td><td>August 13, 2013</td><td>10-CURRENT after <code class="varname">WITH_ICONV</code> is
	    enabled by default.  A new <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=src.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">src.conf</span>(5)</span></a> option,
	    <code class="varname">WITH_LIBICONV_COMPAT</code> (disabled by
	    default) adds <code class="function">libiconv_open</code> to
	    provide compatibility with the
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/libiconv/pkg-descr">libiconv</a> port (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254273"><span class="svnref">254273</span></a>).</td></tr><tr><td>1000044</td><td>August 15, 2013</td><td>10-CURRENT after <code class="literal">libc.so</code>
	    conversion to an <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ld&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ld</span>(1)</span></a>
	    script (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/251668"><span class="svnref">251668</span></a>,
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254358"><span class="svnref">254358</span></a>).</td></tr><tr><td>1000045</td><td>August 15, 2013</td><td>10-CURRENT after devfs programming interface
	    change by replacing the cdevsw flag
	    <code class="literal">D_UNMAPPED_IO</code> with the struct cdev
	    flag <code class="literal">SI_UNMAPPED</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254389"><span class="svnref">254389</span></a>).</td></tr><tr><td>1000046</td><td>August 19, 2013</td><td>10-CURRENT after addition of
	    <code class="literal">M_PROTO[9-12]</code> and removal of
	    <code class="literal">M_FRAG|M_FIRSTFRAG|M_LASTFRAG</code>
	    mbuf flags (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254524"><span class="svnref">254524</span></a>,
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254526"><span class="svnref">254526</span></a>).</td></tr><tr><td>1000047</td><td>August 21, 2013</td><td>10-CURRENT after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stat&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">stat</span>(2)</span></a> update to allow
	    storing some Windows/DOS and CIFS file attributes
	    as <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stat&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">stat</span>(2)</span></a> flags (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254627"><span class="svnref">254627</span></a>).</td></tr><tr><td>1000048</td><td>August 22, 2013</td><td>10-CURRENT after modification of structure
	    <code class="literal">xsctp_inpcb</code>
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254672"><span class="svnref">254672</span></a>).</td></tr><tr><td>1000049</td><td>August 24, 2013</td><td>10-CURRENT after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=physio&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">physio</span>(9)</span></a> support for
	    devices that do not function properly with split
	    I/O, such as <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sa&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sa</span>(4)</span></a> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254760"><span class="svnref">254760</span></a>).</td></tr><tr><td>1000050</td><td>August 24, 2013</td><td>10-CURRENT after modifications of structure
	    <code class="literal">mbuf</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254780"><span class="svnref">254780</span></a>,
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254799"><span class="svnref">254799</span></a>,
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254804"><span class="svnref">254804</span></a>,
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254807"><span class="svnref">254807</span></a>
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254842"><span class="svnref">254842</span></a>).</td></tr><tr><td>1000051</td><td>August 25, 2013</td><td>10-CURRENT after Radeon KMS driver import
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254885"><span class="svnref">254885</span></a>,
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/254887"><span class="svnref">254887</span></a>).</td></tr><tr><td>1000052</td><td>September 3, 2013</td><td>10-CURRENT after import of NetBSD
	    <code class="literal">libexecinfo</code> is connected to the
	    build (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/255180"><span class="svnref">255180</span></a>).</td></tr><tr><td>1000053</td><td>September 6, 2013</td><td>10-CURRENT after API and ABI changes to the
	    Capsicum framework (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/255305"><span class="svnref">255305</span></a>).</td></tr><tr><td>1000054</td><td>September 6, 2013</td><td>10-CURRENT after <code class="literal">gcc</code> and
	    <code class="literal">libstdc++</code> are no longer built by
	    default (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/255321"><span class="svnref">255321</span></a>).</td></tr><tr><td>1000055</td><td>September 6, 2013</td><td>10-CURRENT after addition of
	    <code class="literal">MMAP_32BIT</code> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mmap&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">mmap</span>(2)</span></a> flag
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/255426"><span class="svnref">255426</span></a>).</td></tr><tr><td>1000100</td><td>December 7, 2013</td><td><code class="literal">releng/10.0</code> branched from
	    <code class="literal">stable/10</code>
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/259065"><span class="svnref">259065</span></a>).</td></tr><tr><td>1000500</td><td>October 10, 2013</td><td>10-STABLE after branch from <code class="literal">head/</code>
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/256283"><span class="svnref">256283</span></a>).</td></tr><tr><td>1000501</td><td>October 22, 2013</td><td>10-STABLE after addition of first-boot <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a>
	    support (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/256916"><span class="svnref">256916</span></a>).</td></tr><tr><td>1000502</td><td>November 20, 2013</td><td>10-STABLE after removal of iconv symbols from
	    <code class="literal">libc.so.7</code>
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/258398"><span class="svnref">258398</span></a>).</td></tr><tr><td>1000510</td><td>December 7, 2013</td><td><code class="literal">releng/10.0</code> __FreeBSD_version
	    update to prevent the value from going backwards
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/259067"><span class="svnref">259067</span></a>).</td></tr><tr><td>1000700</td><td>December 7, 2013</td><td>10-STABLE after <code class="literal">releng/10.0</code> branch
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/259069"><span class="svnref">259069</span></a>).</td></tr><tr><td>1000701</td><td>December 15, 2013</td><td>10.0-STABLE after Heimdal encoding fix
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/259447"><span class="svnref">259447</span></a>).</td></tr><tr><td>1000702</td><td>December 31, 2013</td><td>10-STABLE after MAP_STACK fixes
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/260135"><span class="svnref">260135</span></a>).</td></tr><tr><td>1000703</td><td>March 5, 2014</td><td>10-STABLE after upgrade of libc++ to 3.4 release
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/262801"><span class="svnref">262801</span></a>).</td></tr><tr><td>1000704</td><td>March 7, 2014</td><td>10-STABLE after MFC of the vt(4) driver
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/262861"><span class="svnref">262861</span></a>).</td></tr><tr><td>1000705</td><td>March 21, 2014</td><td>10-STABLE after upgrade of llvm/clang to 3.4 release
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/263508"><span class="svnref">263508</span></a>).</td></tr><tr><td>1000706</td><td>April 6, 2014</td><td>10-STABLE after GCC support for
	    <code class="literal">__block</code> definition (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/264214"><span class="svnref">264214</span></a>).</td></tr><tr><td>1000707</td><td>April 8, 2014</td><td>10-STABLE after FreeBSD-SA-14:06.openssl (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/264289"><span class="svnref">264289</span></a>).</td></tr><tr><td>1000708</td><td>April 30, 2014</td><td>10-STABLE after FreeBSD-SA-14:07.devfs,
	    FreeBSD-SA-14:08.tcp, and FreeBSD-SA-14:09.openssl (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/265122"><span class="svnref">265122</span></a>).</td></tr><tr><td>1000709</td><td>May 13, 2014</td><td>10-STABLE after support for UDP-Lite protocol (RFC
	    3828) (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/265946"><span class="svnref">265946</span></a>).</td></tr><tr><td>1000710</td><td>June 13, 2014</td><td>10-STABLE after changes to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=strcasecmp&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">strcasecmp</span>(3)</span></a>, moving
	    <code class="literal">strcasecmp_l()</code> and
	    <code class="literal">strncasecmp_l()</code> from
	    <code class="filename">&lt;string.h&gt;</code> to
	    <code class="filename">&lt;strings.h&gt;</code> for POSIX 2008
	    compliance (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/267465"><span class="svnref">267465</span></a>).</td></tr><tr><td>1000711</td><td>July 8, 2014</td><td>10-STABLE after FreeBSD-SA-14:17.kmem
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/268432"><span class="svnref">268432</span></a>).</td></tr><tr><td>1000712</td><td>August 1, 2014</td><td>10-STABLE after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nfsd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nfsd</span>(8)</span></a> 4.1 merge
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/269398"><span class="svnref">269398</span></a>).</td></tr><tr><td>1000713</td><td>August 3, 2014</td><td>10-STABLE after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=regex&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">regex</span>(3)</span></a> library update
	    to add <span class="quote">&#8220;<span class="quote">&gt;</span>&#8221;</span> and <span class="quote">&#8220;<span class="quote">&lt;</span>&#8221;</span>
	    delimiters (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/269484"><span class="svnref">269484</span></a>).</td></tr><tr><td>1000714</td><td>August 3, 2014</td><td>10-STABLE after <code class="literal">SOCK_DGRAM</code>
	    bug fix (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/269490"><span class="svnref">269490</span></a>).</td></tr><tr><td>1000715</td><td>September 9, 2014</td><td>10-STABLE after FreeBSD-SA-14:18
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/269686"><span class="svnref">269686</span></a>).</td></tr><tr><td>1000716</td><td>September 16, 2014</td><td>10-STABLE after FreeBSD-SA-14:19
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/271667"><span class="svnref">271667</span></a>).</td></tr><tr><td>1000717</td><td>September 18, 2014</td><td>10-STABLE after i915 HW context support
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/271816"><span class="svnref">271816</span></a>).</td></tr><tr><td>1001000</td><td>October 2, 2014</td><td>10.1-RC1 after releng/10.1 branch
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/272463"><span class="svnref">272463</span></a>).</td></tr><tr><td>1001500</td><td>October 2, 2014</td><td>10-STABLE after releng/10.1 branch
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/272464"><span class="svnref">272464</span></a>).</td></tr><tr><td>1001501</td><td>October 21, 2014</td><td>10-STABLE after FreeBSD-SA-14:20, FreeBSD-SA-14:22,
	    and FreeBSD-SA-14:23 (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/273411"><span class="svnref">273411</span></a>).</td></tr><tr><td>1001502</td><td>November 4, 2014</td><td>10-STABLE after FreeBSD-SA-14:23, FreeBSD-SA-14:24,
	    and FreeBSD-SA-14:25 (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/274162"><span class="svnref">274162</span></a>).</td></tr><tr><td>1001503</td><td>November 25, 2014</td><td>10-STABLE after merging new libraries/utilities (dpv
	    and figpar) for data throughput visualization (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/275040"><span class="svnref">275040</span></a>).</td></tr><tr><td>1001504</td><td>December 13, 2014</td><td>10-STABLE after merging an important fix to the LLVM
	    vectorizer, which could lead to buffer overruns in some
	    cases (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/275742"><span class="svnref">275742</span></a>).</td></tr><tr><td>1001505</td><td>January 3, 2015</td><td>10-STABLE after merging some arm constants in r276312
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/276633"><span class="svnref">276633</span></a>).</td></tr><tr><td>1001506</td><td>January 12, 2015</td><td>10-STABLE after merging max table size update for yacc
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/277087"><span class="svnref">277087</span></a>).</td></tr><tr><td>1001507</td><td>January 27, 2015</td><td>10-STABLE after changes to the UDP tunneling callback
	    to provide a context pointer and the source sockaddr (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/277790"><span class="svnref">277790</span></a>).</td></tr><tr><td>1001508</td><td>February 18, 2015</td><td>10-STABLE after addition of the
	    <code class="literal">CDAI_TYPE_EXT_INQ</code> request type (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/278974"><span class="svnref">278974</span></a>).</td></tr><tr><td>1001509</td><td>February 25, 2015</td><td>10-STABLE after FreeBSD-EN-15:01.vt,
	    FreeBSD-EN-15:02.openssl, FreeBSD-EN-15:03.freebsd-update,
	    FreeBSD-SA-15:04.igmp, and FreeBSD-SA-15:05.bind (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/279287"><span class="svnref">279287</span></a>).</td></tr><tr><td>1001511</td><td>19 March, 2015</td><td>10-STABLE after <code class="filename">sys/capability.h</code> is
	    renamed to <code class="filename">sys/capsicum.h</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/280224/"><span class="svnref">280224/</span></a>).</td></tr><tr><td>1001512</td><td>24 March, 2015</td><td>10-STABLE after addition of new mtio(4), sa(4) ioctls
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/281954"><span class="svnref">281954</span></a>).</td></tr><tr><td>1001513</td><td>24 April, 2015</td><td>10-STABLE after starting the process of removing the
	    use of the deprecated "M_FLOWID" flag from the network code
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/281955"><span class="svnref">281955</span></a>).</td></tr><tr><td>1100000</td><td>October 10, 2013</td><td>11.0-CURRENT
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/256284"><span class="svnref">256284</span></a>).</td></tr><tr><td>1100001</td><td>October 19, 2013</td><td>11.0-CURRENT after addition of support for "first
	    boot" <code class="filename">rc.d</code> scripts, so ports can make
	    use of this (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/256776"><span class="svnref">256776</span></a>).</td></tr><tr><td>1100002</td><td>November 5, 2013</td><td>11.0-CURRENT after dropping support for historic
	    ioctls (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/257696"><span class="svnref">257696</span></a>).</td></tr><tr><td>1100003</td><td>November 17, 2013</td><td>11.0-CURRENT after iconv changes
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/258284"><span class="svnref">258284</span></a>).</td></tr><tr><td>1100004</td><td>December 15, 2013</td><td>11.0-CURRENT after the behavior change of
	    <code class="function">gss_pseudo_random</code> introduced in
	    r259286 (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/259424"><span class="svnref">259424</span></a>).</td></tr><tr><td>1100005</td><td>December 28, 2013</td><td>11.0-CURRENT after r259951 - Do not coalesce entries
	    in <code class="function">vm_map_stack()</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/260010"><span class="svnref">260010</span></a>).</td></tr><tr><td>1100006</td><td>January 28, 2014</td><td>11.0-CURRENT after upgrades of libelf and libdwarf
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/261246"><span class="svnref">261246</span></a>).</td></tr><tr><td>1100007</td><td>January 30, 2014</td><td>11.0-CURRENT after upgrade of libc++ to 3.4 release
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/261283"><span class="svnref">261283</span></a>).</td></tr><tr><td>1100008</td><td>February 14, 2014</td><td>11.0-CURRENT after libc++ 3.4 ABI compatibility fix
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/261801"><span class="svnref">261801</span></a>).</td></tr><tr><td>1100009</td><td>February 16, 2014</td><td>11.0-CURRENT after upgrade of llvm/clang to 3.4
	    release (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/261991"><span class="svnref">261991</span></a>).</td></tr><tr><td>1100010</td><td>February 28, 2014</td><td>11.0-CURRENT after upgrade of ncurses to 5.9 release
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/262629"><span class="svnref">262629</span></a>).</td></tr><tr><td>1100011</td><td>March 13, 2014</td><td>11.0-CURRENT after ABI change in struct if_data
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/263102"><span class="svnref">263102</span></a>).</td></tr><tr><td>1100012</td><td>March 14, 2014</td><td>11.0-CURRENT after removal of Novell IPX protocol
	    support (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/263140"><span class="svnref">263140</span></a>).</td></tr><tr><td>1100013</td><td>March 14, 2014</td><td>11.0-CURRENT after removal of AppleTalk protocol
	    support (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/263152"><span class="svnref">263152</span></a>).</td></tr><tr><td>1100014</td><td>March 16, 2014</td><td>11.0-CURRENT after renaming
	    <code class="filename">&lt;sys/capability.h&gt;</code> to
	    <code class="filename">&lt;sys/capsicum.h&gt;</code> to avoid a
	    clash with similarly named headers in other operating
	    systems.  A compatibility header is left in place to limit
	    build breakage, but will be deprecated in due course
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/263235"><span class="svnref">263235</span></a>).</td></tr><tr><td>1100015</td><td>March 22, 2014</td><td>11.0-CURRENT after <code class="literal">cnt</code> rename to
	    <code class="literal">vm_cnt</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/263620"><span class="svnref">263620</span></a>).</td></tr><tr><td>1100016</td><td>March 23, 2014</td><td>11.0-CURRENT after addition of
	    <code class="literal">armv6hf</code> <code class="varname">TARGET_ARCH</code>
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/263660"><span class="svnref">263660</span></a>).</td></tr><tr><td>1100017</td><td>April 4, 2014</td><td>11.0-CURRENT after GCC support for
	    <code class="literal">__block</code> definition (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/264121"><span class="svnref">264121</span></a>).</td></tr><tr><td>1100018</td><td>April 6, 2014</td><td>11.0-CURRENT after support for UDP-Lite protocol (RFC
	    3828) (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/264212"><span class="svnref">264212</span></a>).</td></tr><tr><td>1100019</td><td>April 8, 2014</td><td>11.0-CURRENT after FreeBSD-SA-14:06.openssl (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/264265"><span class="svnref">264265</span></a>).</td></tr><tr><td>1100020</td><td>May 1, 2014</td><td>11.0-CURRENT after removing lindev in favor of having
	    /dev/full by default (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/265212"><span class="svnref">265212</span></a>).</td></tr><tr><td>1100021</td><td>May 6, 2014</td><td>11.0-CURRENT after <code class="filename">src.opts.mk</code>
	    changes, decoupling <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">make.conf</span>(5)</span></a> from
	    <code class="command">buildworld</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/265419"><span class="svnref">265419</span></a>).</td></tr><tr><td>1100022</td><td>May 30, 2014</td><td>11.0-CURRENT after changes to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=strcasecmp&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">strcasecmp</span>(3)</span></a>,
	    moving <code class="literal">strcasecmp_l()</code> and
	    <code class="literal">strncasecmp_l()</code> from
	    <code class="filename">&lt;string.h&gt;</code> to
	    <code class="filename">&lt;strings.h&gt;</code> for POSIX 2008
	    compliance (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/266865"><span class="svnref">266865</span></a>).</td></tr><tr><td>1100023</td><td>June 13, 2014</td><td>11.0-CURRENT after the CUSE library and kernel module
	    have been attached to the build by default (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/267440"><span class="svnref">267440</span></a>).</td></tr><tr><td>1100024</td><td>June 27, 2014</td><td>11.0-CURRENT after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(3)</span></a>
	    <acronym class="acronym">API</acronym> change (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/267992"><span class="svnref">267992</span></a>).</td></tr><tr><td>1100025</td><td>June 30, 2014</td><td>11.0-CURRENT after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=regex&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">regex</span>(3)</span></a> library update
	    to add <span class="quote">&#8220;<span class="quote">&gt;</span>&#8221;</span> and <span class="quote">&#8220;<span class="quote">&lt;</span>&#8221;</span>
	    delimiters (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/268066"><span class="svnref">268066</span></a>).</td></tr><tr><td>1100026</td><td>July 1, 2014</td><td>11.0-CURRENT after the internal interface between the
	    NFS modules, including the krpc, was changed by (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/268115"><span class="svnref">268115</span></a>).</td></tr><tr><td>1100027</td><td>July 8, 2014</td><td>11.0-CURRENT after FreeBSD-SA-14:17.kmem
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/268431"><span class="svnref">268431</span></a>).</td></tr><tr><td>1100028</td><td>July 21, 2014</td><td>11.0-CURRENT after <code class="literal">hdestroy()</code>
	    compliance fix changed <acronym class="acronym">ABI</acronym> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/268945"><span class="svnref">268945</span></a>).</td></tr><tr><td>1100029</td><td>August 3, 2014</td><td>11.0-CURRENT after <code class="literal">SOCK_DGRAM</code>
	    bug fix (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/269489"><span class="svnref">269489</span></a>).</td></tr><tr><td>1100030</td><td>September 1, 2014</td><td>11.0-CURRENT after <code class="literal">SOCK_RAW</code>
	    sockets were changed to not modify packets at all (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/270929"><span class="svnref">270929</span></a>).</td></tr><tr><td>1100031</td><td>September 9, 2014</td><td>11.0-CURRENT after FreeBSD-SA-14:18.openssl
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/269686"><span class="svnref">269686</span></a>).</td></tr><tr><td>1100032</td><td>September 11, 2014</td><td>11.0-CURRENT after API changes to
	    <code class="literal">ifa_ifwithbroadaddr</code>,
	    <code class="literal">ifa_ifwithdstaddr</code>,
	    <code class="literal">ifa_ifwithnet</code>, and
	    <code class="literal">ifa_ifwithroute</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/271438"><span class="svnref">271438</span></a>).</td></tr><tr><td>1100033</td><td>September 9, 2014</td><td>11.0-CURRENT after changing
	    <code class="literal">access</code>, <code class="literal">eaccess</code>, and
	    <code class="literal">faccessat</code> to validate the mode argument
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/271657"><span class="svnref">271657</span></a>).</td></tr><tr><td>1100034</td><td>September 16, 2014</td><td>11.0-CURRENT after FreeBSD-SA-14:19.tcp
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/271666"><span class="svnref">271666</span></a>).</td></tr><tr><td>1100035</td><td>September 17, 2014</td><td>11.0-CURRENT after i915 HW context support
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/271705"><span class="svnref">271705</span></a>).</td></tr><tr><td>1100036</td><td>September 17, 2014</td><td>Version bump to have ABI note distinguish binaries
	    ready for strict <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mmap&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">mmap</span>(2)</span></a> flags checking
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/271724"><span class="svnref">271724</span></a>).</td></tr><tr><td>1100037</td><td>October 6, 2014</td><td>11.0-CURRENT after addition of
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=explicit_bzero&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">explicit_bzero</span>(3)</span></a> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/272673"><span class="svnref">272673</span></a>).</td></tr><tr><td>1100038</td><td>October 11, 2014</td><td>11.0-CURRENT after cleanup of TCP wrapper headers
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/272951"><span class="svnref">272951</span></a>).</td></tr><tr><td>1100039</td><td>October 18, 2014</td><td>11.0-CURRENT after removal of
	    <code class="literal">MAP_RENAME</code> and
	    <code class="literal">MAP_NORESERVE</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/273250"><span class="svnref">273250</span></a>).</td></tr><tr><td>1100040</td><td>October 21, 2014</td><td>11.0-CURRENT after FreeBSD-SA-14:23 (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/273146"><span class="svnref">273146</span></a>).</td></tr><tr><td>1100041</td><td>October 30, 2014</td><td>11.0-CURRENT after API changes to
	    <code class="literal">syscall_register</code>,
	    <code class="literal">syscall32_register</code>,
	    <code class="literal">syscall_register_helper</code> and
	    <code class="literal">syscall32_register_helper</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/273707"><span class="svnref">273707</span></a>).</td></tr><tr><td>1100042</td><td>November 3, 2014</td><td>11.0-CURRENT after a change to <code class="literal">struct
	      tcpcb</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/274046"><span class="svnref">274046</span></a>).</td></tr><tr><td>1100043</td><td>November 4, 2014</td><td>11.0-CURRENT after enabling <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">vt</span>(4)</span></a> by default
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/274085"><span class="svnref">274085</span></a>).</td></tr><tr><td>1100044</td><td>November 4, 2014</td><td>11.0-CURRENT after adding new libraries/utilities (dpv
	    and figpar) for data throughput visualization (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/274116"><span class="svnref">274116</span></a>).</td></tr><tr><td>1100045</td><td>November 4, 2014</td><td>11.0-CURRENT after FreeBSD-SA-14:23,
	    FreeBSD-SA-14:24, and FreeBSD-SA-14:25 (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/274162"><span class="svnref">274162</span></a>).</td></tr><tr><td>1100046</td><td>November 13, 2014</td><td>11.0-CURRENT after <code class="literal">kern_poll</code>
	    signature change (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/274462"><span class="svnref">274462</span></a>).</td></tr><tr><td>1100047</td><td>November 13, 2014</td><td>11.0-CURRENT after removal of no-at version
	    of VFS syscalls helpers, like <code class="literal">kern_open</code>
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/274476"><span class="svnref">274476</span></a>).</td></tr><tr><td>1100048</td><td>December 1, 2014</td><td>11.0-CURRENT after starting the process of removing the
	    use of the deprecated "M_FLOWID" flag from the network code
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/275358"><span class="svnref">275358</span></a>).</td></tr><tr><td>1100049</td><td>December 9, 2014</td><td>11.0-CURRENT after importing an important fix to the
	    LLVM vectorizer, which could lead to buffer overruns in some
	    cases (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/275633"><span class="svnref">275633</span></a>).</td></tr><tr><td>1100050</td><td>December 12, 2014</td><td>11.0-CURRENT after adding AES-ICM and AES-GCM to OpenCrypto
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/275732"><span class="svnref">275732</span></a>).</td></tr><tr><td>1100051</td><td>December 23, 2014</td><td>11.0-CURRENT after removing old NFS client and server code
	    from the kernel (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/276096"><span class="svnref">276096</span></a>).</td></tr><tr><td>1100052</td><td>December 31, 2014</td><td>11.0-CURRENT after upgrade of clang, llvm and lldb to 3.5.0
	    release (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/276479"><span class="svnref">276479</span></a>).</td></tr><tr><td>1100053</td><td>January 7, 2015</td><td>11.0-CURRENT after MCLGET() gained a return value
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/276750"><span class="svnref">276750</span></a>).</td></tr><tr><td>1100054</td><td>January 15, 2015</td><td>11.0-CURRENT after rewrite of callout subsystem
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/277213"><span class="svnref">277213</span></a>).</td></tr><tr><td>1100055</td><td>January 22, 2015</td><td>11.0-CURRENT after reverting callout changes in
	    r277213 (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/277528"><span class="svnref">277528</span></a>).</td></tr><tr><td>1100056</td><td>January 23, 2015</td><td>11.0-CURRENT after addition of
	    <code class="literal">futimens</code> and
	    <code class="literal">utimensat</code> system calls
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/277610"><span class="svnref">277610</span></a>).</td></tr><tr><td>1100057</td><td>January 29, 2015</td><td>11.0-CURRENT after removal of d_thread_t
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/277897"><span class="svnref">277897</span></a>).</td></tr><tr><td>1100058</td><td>February 5, 2015</td><td>11.0-CURRENT after addition of support for probing
	    the SCSI VPD Extended Inquiry page (0x86) 
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/278228"><span class="svnref">278228</span></a>).</td></tr><tr><td>1100059</td><td>February 9, 2015</td><td>11.0-CURRENT after import of xz 5.2.0,
	    which added multi-threaded compression and lzma
	    gained libthr dependency
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/278433"><span class="svnref">278433</span></a>).</td></tr><tr><td>1100060</td><td>February 16, 2015</td><td>11.0-CURRENT after forwarding
	    <code class="literal">FBIO_BLANK</code>
	    to framebuffer clients
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/278846"><span class="svnref">278846</span></a>).</td></tr><tr><td>1100061</td><td>February 18, 2015</td><td>11.0-CURRENT after <code class="literal">CDAI_FLAG_NONE</code>
	    addition (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/278964"><span class="svnref">278964</span></a>).</td></tr><tr><td>1100062</td><td>February 23, 2015</td><td>11.0-CURRENT after <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mtio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mtio</span>(4)</span></a> and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sa&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sa</span>(4)</span></a>
	    <acronym class="acronym">API</acronym> and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ioctl&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">ioctl</span>(2)</span></a> additions
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/279221"><span class="svnref">279221</span></a>).</td></tr><tr><td>1100063</td><td>March 7, 2015</td><td>11.0-CURRENT after adding mutex support to the pps_ioctl() API
	    in the kernel (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/279728"><span class="svnref">279728</span></a>).</td></tr><tr><td>1100064</td><td>March 7, 2015</td><td>11.0-CURRENT after adding PPS support to USB serial drivers
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/279729"><span class="svnref">279729</span></a>).</td></tr><tr><td>1100065</td><td>March 15, 2015</td><td>11.0-CURRENT after upgrading clang, llvm and lldb to 3.6.0
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/280031"><span class="svnref">280031</span></a>).</td></tr><tr><td>1100066</td><td>March 20, 2015</td><td>11.0-CURRENT after removal of SSLv2 support from OpenSSL
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/280306"><span class="svnref">280306</span></a>).</td></tr><tr><td>1100067</td><td>March 25, 2015</td><td>11.0-CURRENT after removal of SSLv2 support from <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">fetch</span>(1)</span></a>
	    and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">fetch</span>(3)</span></a> (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/280630"><span class="svnref">280630</span></a>).</td></tr><tr><td>1100068</td><td>April 6, 2015</td><td>11.0-CURRENT after change to net.inet6.ip6.mif6table sysctl
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/281172"><span class="svnref">281172</span></a>).</td></tr><tr><td>1100069</td><td>April 15, 2015</td><td>11.0-CURRENT after removal of const qualifier from
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=iconv&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">iconv</span>(3)</span></a> (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/281550"><span class="svnref">281550</span></a>).</td></tr><tr><td>1100071</td><td>April 29, 2015</td><td>11.0-CURRENT after API/ABI change to
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=smb&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">smb</span>(4)</span></a> (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/281985"><span class="svnref">281985</span></a>).</td></tr><tr><td>1100072</td><td>May 1, 2015</td><td>11.0-CURRENT after adding <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=reallocarray&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">reallocarray</span>(3)</span></a> in libc
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/282314"><span class="svnref">282314</span></a>).</td></tr><tr><td>1100073</td><td>May 8, 2015</td><td>11.0-CURRENT after extending the maximum number of allowed PCM
	     channels in a PCM stream to 127 and decreasing the maximum number
	     of sub-channels to 1 (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/282650"><span class="svnref">282650</span></a>).</td></tr><tr><td>1100074</td><td>May 25, 2015</td><td>11.0-CURRENT after adding preliminary support for x86-64 Linux
	     binaries (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/283424"><span class="svnref">283424</span></a>), and upgrading clang
	     and llvm to 3.6.1 (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/283526"><span class="svnref">283526</span></a>).</td></tr><tr><td>1100075</td><td>May 27, 2015</td><td>11.0-CURRENT after dounmount() requiring a reference on
	  the passed struct mount (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/283602"><span class="svnref">283602</span></a>
	  ).</td></tr><tr><td>1100076</td><td>June 4, 2015</td><td>11.0-CURRENT after disabled generation of legacy formatted
	    password databases entries by default.
	    (rev <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/283983"><span class="svnref">283983</span></a>).</td></tr><tr><td>1100077</td><td>June 10, 2015</td><td>11.0-CURRENT after API changes to
	    <code class="literal">lim_cur</code>,
	    <code class="literal">lim_max</code>, and
	    <code class="literal">lim_rlimit</code> (rev
	    <a xmlns="" href="https://svnweb.freebsd.org/changeset/base/284215"><span class="svnref">284215</span></a>).</td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Note that 2.2-STABLE sometimes identifies itself as
      <span class="quote">&#8220;<span class="quote">2.2.5-STABLE</span>&#8221;</span> after the 2.2.5-RELEASE.  The
      pattern used to be year followed by the month, but we decided to
      change it to a more straightforward major/minor system starting
      from 2.2.  This is because the parallel development on several
      branches made it infeasible to classify the releases merely by
      their real release dates.  Do
      not worry about old -CURRENTs; they are listed here just
      for reference.</p></div></div></div></body></html>