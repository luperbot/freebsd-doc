<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>31.11. IPv6</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="advanced-networking.html" title="Hoofdstuk 31. Geavanceerde netwerken" /><link rel="prev" href="network-natd.html" title="31.10. Network Address Translation" /><link rel="next" href="network-atm.html" title="31.12. Asynchronous Transfer Mode (ATM)" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">31.11. IPv6</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-natd.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 31. Geavanceerde netwerken</th><td width="20%" align="right"> <a accesskey="n" href="network-atm.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ipv6"></a>31.11. IPv6</h2></div><div><span class="authorgroup">Origineel geschreven door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Aaron</span> <span class="surname">Kaplan</span></span>. </span></div><div><span class="authorgroup">Geherstructureerd en toegevoegd door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div><div><span class="authorgroup">Uitgebreid door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Brad</span> <span class="surname">Davis</span></span>. </span></div></div></div><p>IPv6 (ook bekend als IPng <span class="quote">&#8220;<span class="quote">IP next generation</span>&#8221;</span>)
      is de nieuwe versie van het welbekende IP-protocol (ook bekend als
      <acronym class="acronym">IPv4</acronym>).  Net zoals de andere huidige
      *BSD-systemen, bevat FreeBSD de referentie-implementatie van KAME
      IPv6.  Het FreeBSD-systeem wordt dus geleverd met alles wat nodig is
      om met IPv6 te experimenteren.  Deze sectie richt zich op het
      ingesteld en draaiend krijgen van IPv6.</p><p>In de vroege jaren 1990 werden mensen zich bewust van de snel
      krimpende adresruimte van IPv4.  De uitbreidingssnelheid van het
      Internet baarde twee grote zorgen:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Geen adresruimte meer.  Tegenwoordig is dit niet zo'n
	  probleem meer aangezien RFC1918 voor privé-adresruimte
	  (<code class="systemitem">10.0.0.0/8</code>,
	  <code class="systemitem">172.16.0.0/12</code>, en
	  <code class="systemitem">192.168.0.0/16</code>) en Network
	  Address Translation (NAT) worden gebruikt.</p></li><li class="listitem"><p>De regels in de routeertabellen werden te groot.  Dit is
	  tegenwoordig nog steeds een probleem.</p></li></ul></div><p>IPv6 behandelt deze en vele andere zaken:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>128-bits adresruimte.  Met andere woorden, er zijn
	  theoretisch
	  340.282.366.920.938.463.463.374.607.431.768.211.456 adressen
	  beschikbaar.  Dit betekent dat er ongeveer 6,67 * 10^27
	  IPv6-adressen per vierkante meter op onze planeet beschikbaar
	  zijn.</p></li><li class="listitem"><p>Routers zullen alleen netwerkaggregatie-adressen in hun
	  routeertabellen opslaan en dus de gemiddelde ruimte van een
	  routeertabel verkleinen tot 8192 regels.</p></li></ul></div><p>IPv6 heeft ook vele andere nuttige eigenschappen zoals:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Automatische adresconfiguratie (<a class="link" href="http://www.ietf.org/rfc/rfc2462.txt" target="_top">RFC2462</a>)</p></li><li class="listitem"><p>Anycast-adressen
	  (<span class="quote">&#8220;<span class="quote">ééen-van-velen</span>&#8221;</span>)</p></li><li class="listitem"><p>Verplichte multicast-adressen</p></li><li class="listitem"><p>IPsec (IP security)</p></li><li class="listitem"><p>Versimpelde structuur van de headers</p></li><li class="listitem"><p>Mobiele <acronym class="acronym">IP</acronym></p></li><li class="listitem"><p>Overgangsmechanismen voor IPv6 naar IPv4</p></li></ul></div><p>Bekijk voor meer informatie:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>IPv6-overzicht op <a class="link" href="http://playground.sun.com/pub/ipng/html/ipng-main.html" target="_top">playground.sun.com</a></p></li><li class="listitem"><p><a class="link" href="http://www.kame.net" target="_top">KAME.net</a></p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90588752"></a>31.11.1. Achtergrond over IPv6 adressen</h3></div></div></div><p>Er zijn verschillende soorten IPv6-adressen: unicast,
	anycast, en multicast.</p><p>Unicast-adressen zijn de bekende adressen.  Een pakket dat
	naar een unicast-adres wordt verzonden arriveert precies op de
	interface dat bij dat adres hoort.</p><p>Anycast-adressen zijn syntactisch niet van unicast-adressen
	te onderscheiden maar ze adresseren een groep interfaces.  Een
	pakket dat bestemd is voor een anycast-adres zal bij de
	dichtstbijzijnde interface arriveren (in router-metrieken).
	Anycast-adressen mogen alleen door routers worden
	gebruikt.</p><p>Multicast-adressen identificeren een groep interfaces.  Een
	pakket dat bestemd is voor en multicast-adres zal bij alle
	interfaces die bij de multicast-groep horen arriveren.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Het broadcast-adres van IPv4 (gewoonlijk <code class="systemitem">xxx.xxx.xxx.255</code>) wordt in IPv6 met
	  multicast-adressen uitgedrukt.</p></div><div class="table"><a id="idp90596432"></a><div class="table-title">Tabel 31.2. Gereserveerde IPv6-adressen</div><div class="table-contents"><table summary="Gereserveerde IPv6-adressen" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>IPv6-adres</th><th>Prefixlengte (bits)</th><th>Beschrijving</th><th>Opmerkingen</th></tr></thead><tbody><tr><td><code class="systemitem">::</code></td><td>128 bits</td><td>niet gespecificeerd</td><td>cf. <code class="systemitem">0.0.0.0</code> in IPv4</td></tr><tr><td><code class="systemitem">::1</code></td><td>128 bits</td><td>teruglusadres</td><td>cf. <code class="systemitem">127.0.0.1</code> in
		IPv4</td></tr><tr><td><code class="systemitem">::00:xx:xx:xx:xx</code></td><td>96 bits</td><td>ingebouwd IPv4</td><td>De laagste 32 bits zijn het IPv4-adres.  Ook
		<span class="quote">&#8220;<span class="quote">IPv4 compatibel IPv6-adres</span>&#8221;</span> genoemd.</td></tr><tr><td><code class="systemitem">::ff:xx:xx:xx:xx</code></td><td>96 bits</td><td>IPv4-afgebeeld IPv6-adres</td><td>De laagste 32 bits zijn het IPv4-adres.  Voor hosts
		die geen IPv6 ondersteunen.</td></tr><tr><td><code class="systemitem">fe80::</code> -
		<code class="systemitem">feb::</code></td><td>10 bits</td><td>link-lokaal</td><td>cf. teruglusadres in IPv4</td></tr><tr><td><code class="systemitem">fec0::</code> -
		<code class="systemitem">fef::</code></td><td>10 bits</td><td>site-lokaal</td><td> </td></tr><tr><td><code class="systemitem">ff::</code></td><td>8 bits</td><td>multicast</td><td> </td></tr><tr><td><code class="systemitem">001</code> (base 2)</td><td>3 bits</td><td>globale unicast</td><td>Alle globale unicast-adressen worden vanuit deze
		pool toegewezen.  De eerste 3 bits zijn
		<span class="quote">&#8220;<span class="quote">001</span>&#8221;</span>.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90624080"></a>31.11.2. IPv6-adressen lezen</h3></div></div></div><p>De canonieke vorm wordt weergegeven als: <code class="systemitem">x:x:x:x:x:x:x:x</code>, waarbij elke
	<span class="quote">&#8220;<span class="quote">x</span>&#8221;</span> een 16-bits hexadecimale waarde is.
	Bijvoorbeeld <code class="systemitem">FEBC:A574:382B:23C1:AA49:4592:4EFE:9982</code></p><p>Vaak bevat een adres lange deelstrings van allen nullen,
	daarom kan per adres één zo'n deelstring worden
	afgekort als <span class="quote">&#8220;<span class="quote">::</span>&#8221;</span>.  Ook kunnen maximaal drie
	voorlopende <span class="quote">&#8220;<span class="quote">0</span>&#8221;</span>'s per hexadecimaal viertal worden
	weggelaten.  Bijvoorbeeld, <code class="systemitem">fe80::1</code> komt overeen met de canonieke
	vorm <code class="systemitem">fe80:0000:0000:0000:0000:0000:0000:0001</code>.</p><p>Een derde vorm is het schrijven van de laatste 32 bits in de
	bekende (decimale) IPv4-stijl met punten <span class="quote">&#8220;<span class="quote">.</span>&#8221;</span> als
	scheidingstekens.  Bijvoorbeeld, <code class="systemitem">2002::10.0.0.1</code> komt overeen met de
	(hexadecimale) canonieke representatie <code class="systemitem">2002:0000:0000:0000:0000:0000:0a00:0001</code>
	wat weer hetzelfde is als <code class="systemitem">2002::a00:1</code>.</p><p>Op dit punt dient de lezer het volgende te begrijpen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig</code></strong></pre><pre class="programlisting">rl0: flags=8943&lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 10.0.0.10 netmask 0xffffff00 broadcast 10.0.0.255
        inet6 fe80::200:21ff:fe03:8e1%rl0 prefixlen 64 scopeid 0x1
        ether 00:00:21:03:08:e1
	media: Ethernet autoselect (100baseTX )
        status: active</pre><p><code class="systemitem">fe80::200:21ff:fe03:8e1%rl0</code>
	is een automatisch ingesteld link-lokaal adres.  Het is als deel
	van de automatische instelling vanuit het MAC-adres
	aangemaakt.</p><p>Kijk voor verdere informatie over de structuur van
	IPv6-adressen op <a class="link" href="http://www.ietf.org/rfc/rfc3513.txt" target="_top">RFC3513</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90637648"></a>31.11.3. Verbinding krijgen</h3></div></div></div><p>Er zijn momenteel vier manieren om met andere IPv6-hosts en
	-netwerken te verbinden:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Neem contact op met de Internetprovider om te zien of ze
	    al IPv6 aanbieden.</p></li><li class="listitem"><p><a class="link" href="http://www.sixxs.net" target="_top">SixXS</a> biedt
	    wereldwijd tunnels met eindpunten aan.</p></li><li class="listitem"><p>Tunnelen via 6-naar-4 (<a class="link" href="http:///www.ietf.org/rfc/rfc3608.txt" target="_top">RFC3068</a>)</p></li><li class="listitem"><p>Gebruik de poort <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/freenet6/pkg-descr">net/freenet6</a> indien er een
	    inbelverbinding wordt gebruikt.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90643536"></a>31.11.4. DNS in de IPv6-wereld</h3></div></div></div><p>Er waren twee soorten DNS-records voor IPv6.  De IETF heeft
	A6-records overbodig verklaard.  AAAA-records zijn nu de
	standaard.</p><p>AAAA-records gebruiken gaat rechttoe-rechtaan.  Wijs de
	hostnaam toe aan het nieuwe IPv6-adres dat net ontvangen is door
	het volgende aan de DNS-bestand voor primaire zones toe te
	voegen:</p><pre class="programlisting">MIJNHOSTNAAM          AAAA    MIJNIPv6ADRES</pre><p>Vraag het aan de <acronym class="acronym">DNS</acronym>-provider indien de
	<acronym class="acronym">DNS</acronym>-zones niet zelf worden geserveerd.  De
	huidige versies van <span class="application">bind</span> (versie 8.3
	en 9) en <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/dns/djbdns/pkg-descr">dns/djbdns</a> (met de
	IPv6-patch) ondersteunen AAAA-records.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90647504"></a>31.11.5. De benodigde wijzigingen doorvoeren in
	<code class="filename">/etc/rc.conf</code></h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90648400"></a>31.11.5.1. IPv6-cliëntinstellingen</h4></div></div></div><p>Deze instellingen helpen bij het configureren van een
	  machine in het LAN die als cliënt in plaats van router
	  dienst zal doen.  Om <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtsol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtsol</span>(8)</span></a> automatisch de interface
	  tijdens het opstarten te laten configureren op
	  FreeBSD 9.<em class="replaceable"><code>X</code></em> en nieuwer dient het volgende
	  aan <code class="filename">rc.conf</code> toegevoegd te worden:</p><pre class="programlisting">ipv6_prefer="YES"</pre><p>Voeg voor FreeBSD 8.<em class="replaceable"><code>X</code></em> en ouder het
	  volgende toe:</p><pre class="programlisting">ipv6_enable="YES"</pre><p>Voeg het volgende toe om statisch een IP-adres zoals
	  <code class="systemitem">2001:471:1f11:251:290:27ff:fee0:2093</code>
	  aan de interface <code class="filename">fxp0</code> toe te
	  voegen voor FreeBSD 9.<em class="replaceable"><code>X</code></em>:</p><pre class="programlisting">ifconfig_fxp0_ipv6="2001:471:1f11:251:290:27ff:fee0:2093 prefixlen <em class="replaceable"><code>64</code></em>"</pre><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Zorg ervoor dat <em class="replaceable"><code>prefixlen 64</code></em> wordt
	    vervangen door de juiste waarde voor het subnet van de
	    computer.</p></div><p>Voeg voor FreeBSD 8.<em class="replaceable"><code>X</code></em> het volgende
	  toe:</p><pre class="programlisting">ipv6_ifconfig_fxp0="2001:471:1f11:251:290:27ff:fee0:2093"</pre><p>Voeg het volgende aan <code class="filename">/etc/rc.conf</code>
	  toe om een standaardrouter <code class="systemitem">2001:471:1f11:251::1</code> toe te
	  wijzen:</p><pre class="programlisting">ipv6_defaultrouter="2001:471:1f11:251::1"</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90662992"></a>31.11.5.2. IPv6 router/gateway instellingen</h4></div></div></div><p>Deze paragraaf helpt bij het opvolgen van de aanwijzingen
	  die de tunnelprovider heeft gegeven en ze om te zetten in
	  instellingen die blijven na een herstart.  Om de tunnel
	  tijdens het opstarten te herstellen kan het volgende in
	  <code class="filename">/etc/rc.conf</code> gebruikt worden:</p><p>Noem de generieke tunnelinterfaces die zullen worden
	  ingesteld, bijvoorbeeld <code class="filename">gif0</code>:</p><pre class="programlisting">gif_interfaces="gif0"</pre><p>Om de interface met een lokaal eindpunt
	  <em class="replaceable"><code>MIJN_IPv4_ADRES</code></em> in te stellen naar
	  een ver eindpunt
	  <em class="replaceable"><code>VER_IPv4_ADRES</code></em>:</p><pre class="programlisting">gifconfig_gif0="<em class="replaceable"><code>MIJN_IPv4_ADRES VER_IPv4_ADRES</code></em>"</pre><p>Voeg het volgende toe om het IPv6-adres dat is toegewezen
	  als het eindpunt van de IPv6-tunnel te gebruiken voor
	  FreeBSD 9.<em class="replaceable"><code>X</code></em> en nieuwer:</p><pre class="programlisting">ifconfig_gif0_ipv6="inet6 <em class="replaceable"><code>MIJN_TOEGEWEZEN_IPv6_TUNNEL_EINDPUNT_ADRES</code></em>"</pre><p>Voeg voor FreeBSD 8.<em class="replaceable"><code>X</code></em> en eerder het
	  volgende toe:</p><pre class="programlisting">ipv6_ifconfig_gif0="<em class="replaceable"><code>MIJN_TOEGEWEZEN_IPv6_TUNNEL_EINDPUNT_ADRES</code></em>"</pre><p>Nu hoeft alleen de standaardroute voor IPv6 ingesteld te
	  worden.  Dit is de andere kant van de IPv6-tunnel:</p><pre class="programlisting">ipv6_defaultrouter="<em class="replaceable"><code>MIJN_IPv6_VER_TUNNEL_EINDPUNT_ADRES</code></em>"</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90676048"></a>31.11.5.3. IPv6-tunnelinstellingen</h4></div></div></div><p>Indien de server gebruikt wordt om IPv6 tussen de rest van
	  het netwerk en de wereld te routen, is ook de volgende
	  instelling in <code class="filename">/etc/rc.conf</code> nodig:</p><pre class="programlisting">ipv6_gateway_enable="YES"</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90678224"></a>31.11.6. Routeradvertentie en automatische hostconfiguratie</h3></div></div></div><p>Deze sectie helpt bij het instellen van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtadvd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtadvd</span>(8)</span></a> om de
	standaard IPv6-route te adverteren.</p><p>Het volgende is nodig in <code class="filename">/etc/rc.conf</code>
	om <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtadvd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtadvd</span>(8)</span></a> aan te zetten:</p><pre class="programlisting">rtadvd_enable="YES"</pre><p>Het is belangrijk om de interface te specificeren waarop het
	IPv6-routerverzoek plaatsvindt.  Om bijvoorbeeld <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtadvd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtadvd</span>(8)</span></a>
	te vertellen om <code class="filename">fxp0</code> te
	gebruiken:</p><pre class="programlisting">rtadvd_interfaces="fxp0"</pre><p>Nu dient het instellingenbestand
	<code class="filename">/etc/rtadvd.conf</code> aangemaakt te worden.
	Hier is een voorbeeld:</p><pre class="programlisting">fxp0:\
	:addrs#1:addr="2001:471:1f11:246::":prefixlen#64:tc=ether:</pre><p>Vervang <code class="filename">fxp0</code> door de interface die
	gebruikt gaat worden.</p><p>Vervang vervolgens <code class="systemitem">2001:471:1f11:246::</code> met de prefix van uw
	toewijzing.</p><p>Indien een <code class="systemitem">/64</code> subnet is
	toegewezen, hoeft er verder niets veranderd te worden.  In
	andere gevallen dient de juiste waarde voor
	<code class="literal">prefixlen#</code> gebruikt te worden.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-natd.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="advanced-networking.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="network-atm.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">31.10. Network Address Translation </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 31.12. Asynchronous Transfer Mode (ATM)</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>