<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>26.4. Inbeldienst</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="serialcomms.html" title="Hoofdstuk 26. Seriële communicatie" /><link rel="prev" href="term.html" title="26.3. Terminals" /><link rel="next" href="dialout.html" title="26.5. Uitbeldienst" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">26.4. Inbeldienst</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="term.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 26. Seriële communicatie</th><td width="20%" align="right"> <a accesskey="n" href="dialout.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dialup"></a>26.4. Inbeldienst</h2></div><div><span class="authorgroup">Bijgedragen door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Guy</span> <span class="surname">Helmer</span></span>. </span></div><div><span class="authorgroup">Toevoegingen door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Sean</span> <span class="surname">Kelly</span></span>. </span></div></div></div><div xmlns="" class="warning"><h3 class="admontitle">Waarschuwing: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vanaf FreeBSD 8.0 zijn de seriële poorten
	hernoemd van
	<code class="filename">/dev/cuadN</code> naar
	<code class="filename">/dev/cuauN</code> en
	van
	<code class="filename">/dev/ttydN</code> naar
	<code class="filename">/dev/ttyuN</code>.
	FreeBSD 7.X gebruikers moeten de documentatie aanpassen naar
	deze wijzigingen.</p></div><p>Het instellen van het FreeBSD-systeem voor inbeldiensten is
      vrijwel gelijk aan het verbinden van terminals, behalve dat er
      met modems in plaats van terminals wordt gewerkt.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83929424"></a>26.4.1. Externe en interne modems</h3></div></div></div><p>Externe modems lijken gemakkelijker voor het inbellen,
	omdat externe modems vaak semi-permanent ingesteld kunnen
	worden via parameters die in een niet-vluchtig RAM worden
	opgeslagen en ze hebben gewoonlijk LED's die de toestand van
	belangrijke RS-232-signalen weergeven.  Knipperende LED's maken
	indruk op bezoekers, maar LED's zijn ook zeer nuttig om te zien
	of een modem goed functioneert.</p><p>Interne modems hebben vaak geen niet-vluchtig RAM en het
	kan dus voorkomen dat de instelmogelijkheden beperkt zijn tot
	het instellen van DIP-schakelaars.  Als een intern modem al
	indicatie-LED's voor signalen heeft, zijn ze moeilijk te zien
	in de behuizing van een systeem.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83930832"></a>26.4.1.1. Modems en kabels</h4></div></div></div><a id="idp83931472" class="indexterm"></a><p>Bij gebruik van een extern modem is uiteraard een juiste
	  kabel nodig.  Een standaard RS-232C seriële kabel
	  moet voldoen zolang alle normale signalen zijn
	  aangesloten.</p><div class="table"><a id="serialcomms-signal-names"></a><div class="table-title">Tabel 26.4. Signaalnamen</div><div class="table-contents"><table summary="Signaalnamen" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th align="left">Acroniemen</th><th align="left">Namen</th></tr></thead><tbody><tr><td><acronym class="acronym">RD</acronym></td><td>Received Data (ontvangen gegevens)</td></tr><tr><td><acronym class="acronym">TD</acronym></td><td>Transmitted Data (verzonden gegevens)</td></tr><tr><td><acronym class="acronym">DTR</acronym></td><td>Data Terminal Ready (gegevensterminal
		  gereed)</td></tr><tr><td><acronym class="acronym">DSR</acronym></td><td>Data Set Ready (gegevensverzameling
		  gereed)</td></tr><tr><td><acronym class="acronym">DCD</acronym></td><td>Data Carrier Detect (RS-232's detector voor
		  signaal lijn-ontvangen)</td></tr><tr><td><acronym class="acronym">SG</acronym></td><td>Signal Ground (signaalaarde)</td></tr><tr><td><acronym class="acronym">RTS</acronym></td><td>Request to Send (verzoek om te zenden)</td></tr><tr><td><acronym class="acronym">CTS</acronym></td><td>Clear to Send (gereed om te zenden)</td></tr></tbody></table></div></div><br class="table-break" /><p>FreeBSD heeft de signalen <acronym class="acronym">RTS</acronym> en
	  <acronym class="acronym">CTS</acronym> nodig voor doorstroombeheer bij
	  snelheden van meer dan 2400 bps, het signaal
	  <acronym class="acronym">CD</acronym> om te bepalen wanneer een oproep
	  beantwoord of geannuleerd is, en het signaal
	  <acronym class="acronym">DTR</acronym> om een modem opnieuw in te stellen
	  nadat een sessie voltooid is.  Op sommige kabels ontbreken
	  sommige benodigde signalen.  Dus als zich problemen voordoen,
	  zoals een aanmeldsessie die niet weggaat nadat de verbinding
	  verbroken is, kan dit aan de kabel liggen.</p><p>Net als andere <span class="trademark">UNIX</span>®-achtige besturingssystemen gebruikt
	  FreeBSD hardwaresignalen om te bepalen of een oproep beantwoord
	  of weggedrukt is en om met het modem op te hangen en dit
	  opnieuw in te stellen na een oproep.  FreeBSD vermijdt het
	  versturen van commando's naar een modem en het bekijken van
	  de toestand van een modem.  Dit kan vreemd lijken als bekend
	  is hoe modems met PC-gebaseerde prikbordsystemen (BBS)
	  verbinden.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83957968"></a>26.4.2. Overwegingen voor de seriële interface</h3></div></div></div><p>FreeBSD ondersteunt EIA RS-232C (CCITT V.24)
	communicatie-interfaces gebaseerd op NS8250, NS1645, NS16550 en
	NS16550A.  De 8250- en 16450-apparaten hebben buffers van een
	enkel karakter.  Het 16550-apparaat biedt een buffer van 16
	karakters, wat betere systeemprestaties toestaat.  Door fouten
	in platte 16550's is het niet mogelijk de buffer van 16
	karakters te gebruiken, dus gebruik indien mogelijk 16550A's.
	Omdat apparaten met een buffer van een enkel karakter meer werk
	door het besturingssysteem vereisen dan apparaten met een
	buffer van 16 karakters, ligt de voorkeur bij seriële
	interfacekaarten gebaseerd op de 16550A.  Indien een systeem
	veel actieve seriële poorten heeft of zwaar belast wordt,
	zijn kaarten gebaseerd op de 16550A beter voor communicatie met
	een lage foutenratio.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83959120"></a>26.4.3. Snel overzicht</h3></div></div></div><a id="idp83959760" class="indexterm"></a><p>Net als met terminals zet <code class="command">init</code> een
	<code class="command">getty</code>-proces op voor elke seriële poort
	die voor inbelverbindingen is ingesteld.  Indien bijvoorbeeld
	een modem aan <code class="filename">/dev/ttyu0</code> is gekoppeld, kan
	het commando <code class="command">ps ax</code> het volgende
	weergeven:</p><pre class="screen"> 4850 ??  I     0:00.09 /usr/libexec/getty V19200 ttyu0</pre><p>Wanneer een gebruiker naar de modemlijn belt en de modems
	verbinding maken, wordt de <acronym class="acronym">CD</acronym>-lijn (Carrier
	Detect) door het modem gerapporteerd.  De kernel merkt op dat
	een draaggolf is gesignaleerd en laat <code class="command">getty</code>
	het openen van de poort voltooien.  <code class="command">getty</code>
	stuurt een prompt <code class="prompt">login:</code> met de initieel
	gespecificeerde lijnsnelheid.  <code class="command">getty</code> bekijkt
	of er geldige karakters zijn ontvangen en probeert, in een
	typische opstelling, indien het rommel aantreft (waarschijnlijk
	omdat de snelheid waarmee het modem verbindt afwijkt van de
	snelheid van <code class="command">getty</code>) de lijnsnelheden aan te
	passen totdat het redelijke karakters ontvangt.</p><a id="idp83969616" class="indexterm"></a><p>Nadat een gebruikersnaam is opgegeven voert
	<code class="command">getty</code> <code class="filename">/usr/bin/login</code>
	uit, die het aanmelden voltooit door te vragen naar het
	wachtwoord van een gebruiker en daarna de shell van een
	gebruiker op te starten.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83971536"></a>26.4.4. Instellingenbestanden</h3></div></div></div><p>Er zijn drie systeeminstellingenbestanden in de map
	<code class="filename">/etc</code> die waarschijnlijk gewijzigd moeten
	worden om inbellen op een FreeBSD-systeem toe te staan.  Het
	eerste bestand, <code class="filename">/etc/gettytab</code>, bevat
	informatie om de daemon <code class="filename">/usr/libexec/getty</code>
	in te stellen.  Het tweede bestand,
	<code class="filename">/etc/ttys</code> bevat informatie voor
	<code class="filename">/sbin/init</code> dat vertelt op welke
	<code class="filename">tty</code> apparaten een proces
	<code class="command">getty</code> moet draaien.  Als laatste kunnen in
	het script <code class="filename">/etc/rc.d/serial</code> commando's
	geplaatst worden om poorten te initialiseren.</p><p>Er bestaan twee stromingen met betrekking tot inbelmodems
	op <span class="trademark">UNIX</span>®.  De ene houdt ervan om modems en systemen in te
	stellen zodat de lokale computer-naar-modem RS-232-interface
	met een vaste snelheid werkt, ongeacht de snelheid waarmee een
	gebruiker-op-afstand inbelt.  Het voordeel van deze instelling
	is dat een gebruiker-op-afstand altijd meteen een aanmeldprompt
	van een systeem ziet.  Het nadeel is dat een systeem niet weet
	wat de werkelijke gegevenssnelheid van een gebruiker is en dus
	passen programma's die met een volledig scherm werken, zoals
	<span class="application">Emacs</span>, hun methode om het scherm te
	tekenen niet aan om hun reactie beter te maken voor langzame
	verbindingen.</p><p>De andere stroming stelt de RS-232-interface van een modem
	zo in dat de snelheid ervan varieert met de verbindingssnelheid
	van een gebruiker-op-afstand.  Zo zorgen V.32bis-verbindingen
	(14,4 kbps) met een modem ervoor dat een modem de
	RS-232-interface op 19,2 kbps laat draaien, terwijl
	verbindingen op 2400 bps ervoor zorgen dat de
	RS-232-interface van een modem op 2400 bps draait.  Omdat
	<code class="command">getty</code> meldingen over de verbindingssnelheid
	van een gegeven modem niet begrijpt, geeft
	<code class="command">getty</code> een bericht <code class="prompt">login:</code> op
	een initiële snelheid en kijkt het naar de karakters die
	als antwoord terugkomen.  Als een gebruiker rommel ziet, wordt
	ervan uitgegaan dat deze weet dat de <span class="keycap"><strong>Enter</strong></span>
	toets ingedrukt moet worden totdat een herkenbaar prompt
	zichtbaar is.  Indien de gegevenssnelheden niet overeenkomen,
	ziet <code class="command">getty</code> alles wat een gebruiker intypt
	als <span class="quote">&#8220;<span class="quote">rommel</span>&#8221;</span>, probeert het op de volgende snelheid
	over te gaan en het geeft opnieuw het prompt
	<code class="prompt">login:</code>.  Deze procedure kan ad nauseam
	doorgaan, maar normaal gesproken zijn er slechts een stuk of
	twee toetsaanslagen nodig voordat een gebruiker een juist
	prompt ziet.  Het is duidelijk dat deze aanmeldprocedure er
	niet zo mooi uitziet als de methode
	<span class="quote">&#8220;<span class="quote">vaste-snelheid</span>&#8221;</span>, maar een gebruiker met een
	langzame verbinding zou betere interactiviteit moeten beleven
	met programma's die met een volledig scherm werken.</p><p>Deze sectie poogt om neutrale informatie over instellingen
	te geven, maar is geneigd om de gegevenssnelheid van het modem
	af te laten hangen van de verbindingssnelheid.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83985232"></a>26.4.4.1. <code class="filename">/etc/gettytab</code></h4></div></div></div><a id="idp83986000" class="indexterm"></a><p><code class="filename">/etc/gettytab</code> is een bestand met
	  informatie over instellingen voor <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a> in de stijl
	  van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=termcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">termcap</span>(5)</span></a>.  In de hulppagina van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a>
	  staat de volledige informatie over het formaat van het
	  bestand en de lijst met mogelijkheden.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83989584"></a>26.4.4.1.1. Vaste snelheid instellen</h5></div></div></div><p>Indien de snelheid van een modem om gegevens te
	    communiceren op een bepaalde waarde wordt vastgezet, is het
	    waarschijnlijk niet nodig om wijzigingen aan te brengen in
	    <code class="filename">/etc/gettytab</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83991120"></a>26.4.4.1.2. Overeenkomstige snelheid instellen</h5></div></div></div><p>In <code class="filename">/etc/gettytab</code> dient een regel
	    ingesteld te worden om <code class="command">getty</code> informatie
	    te geven over de snelheden die voor het modem gewenst zijn.
	    Indien een 2400 bps modem aanwezig is, kan
	    waarschijnlijk de bestaande regel <code class="literal">D2400</code>
	    gebruikt worden.</p><pre class="programlisting">#
# Voor snelle inbelterminals, 2400/1200/300 roterend (er kan met beide kanten begonnen worden)
#
D2400|d2400|Fast-Dial-2400:\
	:nx=D1200:tc=2400-baud:
3|D1200|Fast-Dial-1200:\
	:nx=D300:tc=1200-baud:
5|D300|Fast-Dial-300:\
	:nx=D2400:tc=300-baud:</pre><p>Indien er een modem voor hogere snelheden aanwezig is,
	    dient er waarschijnlijk een regel aan
	    <code class="filename">/etc/gettytab</code> toegevoegd te worden.
	    Hieronder staat een regel die gebruikt kan worden voor een
	    14,4 kbps modem met een maximale interface-snelheid
	    van 19,2 kbps:</p><pre class="programlisting">#
# Toevoegingen voor een V.32bis modem
#
um|V300|High Speed Modem at 300,8-bit:\
	:nx=V19200:tc=std.300:
un|V1200|High Speed Modem at 1200,8-bit:\
	:nx=V300:tc=std.1200:
uo|V2400|High Speed Modem at 2400,8-bit:\
	:nx=V1200:tc=std.2400:
up|V9600|High Speed Modem at 9600,8-bit:\
	:nx=V2400:tc=std.9600:
uq|V19200|High Speed Modem at 19200,8-bit:\
	:nx=V9600:tc=std.19200:</pre><p>Dit resulteert in 8-bits verbindingen zonder
	    pariteit.</p><p>Het bovenstaande voorbeeld begint met een
	    communicatiesnelheid van 19,2 kbps (voor een
	    V.32bis-verbinding), daarna doorloopt het 9600 bps
	    (voor V.32), 2400 bps, 1200 bps, 300 bps en
	    daarna weer 19,2 kbps.  Het doorlopen van de
	    communicatiesnelheid is met de mogelijkheid
	    <code class="literal">nx=</code> (<span class="quote">&#8220;<span class="quote">volgende tabel</span>&#8221;</span>)
	    geïmplementeerd.  Elk van deze regels gebruikt een
	    regel <code class="literal">tc=</code> (<span class="quote">&#8220;<span class="quote">tabel
	      continuëren</span>&#8221;</span>) om de rest van de
	      <span class="quote">&#8220;<span class="quote">standaard</span>&#8221;</span>-instellingen voor een bepaalde
	    gegevenssnelheid op te pikken.</p><p>Indien er een 28,8 kbps modem aanwezig is en/of
	    het gewenst is om voordeel uit de compressie met een
	    14,4 kbps te halen, is het nodig om hogere
	    communicatiesnelheden dan 19,2 kbps te gebruiken.
	    Hieronder staat een voorbeeld van een regel voor
	    <code class="filename">gettytab</code> die begint met
	    57,6 kbps.</p><pre class="programlisting">#
# Toevoegingen voor een V.32bis of V.34 modem
# beginnend bij 57,6 kbps
#
vm|VH300|Very High Speed Modem at 300,8-bit:\
	:nx=VH57600:tc=std.300:
vn|VH1200|Very High Speed Modem at 1200,8-bit:\
	:nx=VH300:tc=std.1200:
vo|VH2400|Very High Speed Modem at 2400,8-bit:\
	:nx=VH1200:tc=std.2400:
vp|VH9600|Very High Speed Modem at 9600,8-bit:\
	:nx=VH2400:tc=std.9600:
vq|VH57600|Very High Speed Modem at 57600,8-bit:\
	:nx=VH9600:tc=std.57600:</pre><p>Indien een CPU langzaam of een systeem zwaar belast is
	    en er geen seriële poorten gebaseerd op 16550A
	    aanwezig zijn, kunnen er <span class="errorname">sio</span>
	    <span class="quote">&#8220;<span class="quote">silo</span>&#8221;</span>-fouten optreden bij
	    57,6 kbps.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dialup-ttys"></a>26.4.4.2. <code class="filename">/etc/ttys</code></h4></div></div></div><a id="idp84005200" class="indexterm"></a><p>Het instellen van het bestand
	  <code class="filename">/etc/ttys</code> staat beschreven in <a class="xref" href="term.html#ex-etc-ttys" title="Voorbeeld 26.1. Terminalregels aan /etc/ttys toevoegen">Voorbeeld 26.1, &#8220;Terminalregels aan <code class="filename">/etc/ttys</code>
	    toevoegen&#8221;</a>.  Het instellen van modems is
	  vergelijkbaar maar er moet een ander argument aan
	  <code class="command">getty</code> doorgegeven worden en er moet een
	  ander type terminal doorgegeven te worden.  Het algemene
	  formaat voor zowel vaste snelheid als overeenkomstige
	  snelheid is:</p><pre class="programlisting">ttyu0   "/usr/libexec/getty <em class="replaceable"><code>xxx</code></em>"   dialup on</pre><p>Het eerste item op bovenstaande regel is het speciale
	  apparaatbestand.  <code class="filename">ttyu0</code> betekent dat
	  <code class="filename">/dev/ttyu0</code> het bestand is dat door
	  <code class="command">getty</code> in de gaten wordt gehouden.  Het
	  tweede item,
	  <code class="literal">"/usr/libexec/gettyxxx"</code>
	  (<em class="replaceable"><code>xxx</code></em> wordt vervangen door de
	  initiële mogelijkheden van
	  <code class="filename">gettytab</code>) is het proces dat door
	  <code class="command">init</code> op het apparaat gedraaid wordt.  Het
	  derde item, <code class="literal">dialup</code>, is het standaard
	  terminaltype.  De vierde parameter, <code class="literal">on</code>,
	  geeft aan <code class="command">init</code> aan dat de lijn
	  operationeel is.  Er kan een vijfde parameter zijn,
	  <code class="literal">secure</code>, maar gebruik deze alleen voor
	  terminals die fysiek veilig zijn (zoals de
	  systeemconsole).</p><p>Het standaard terminaltype (<code class="literal">dialup</code> in
	  bovenstaand voorbeeld) mag afhangen van lokale voorkeuren.
	  Het traditionele standaard terminaltype voor inbellijnen is
	  <code class="literal">dialup</code>, zodat gebruikers hun
	  aanmeldscripts kunnen aanpassen om op te merken wanneer het
	  terminal <code class="literal">dialup</code> is en automatisch hun
	  terminaltype kunnen aanpassen.  Wellicht is het makkelijker
	  om <code class="literal">vt102</code> als het standaard terminaltype te
	  specificeren, aangezien gebruikers gewoon VT102-emulatie op
	  hun systemen-op-afstand gebruiken.</p><p>Nadat <code class="filename">/etc/ttys</code> gewijzigd is, kan
	  aan het proces <code class="command">init</code> een signaal
	  <acronym class="acronym">HUP</acronym> gestuurd worden om het bestand opnieuw
	  te laten lezen.  Gebruik volgende opdracht om het signaal te
	  versturen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP 1</code></strong></pre><p>Indien een systeem voor de eerste keer wordt
	  geïnstalleerd, is het verstandig te wachten totdat een
	  modem juist ingesteld en verbonden is voordat het signaal
	  aan <code class="command">init</code> verstuurd wordt.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84022480"></a>26.4.4.2.1. Vaste snelheid instellen</h5></div></div></div><p>Voor het instellen van een vaste snelheid dient de
	    regel in <code class="filename">ttys</code> een vaste snelheid door
	    te geven aan <code class="command">getty</code>.  Voor een modem met
	    een vaste poortsnelheid van 19,2 kbps kan de regel in
	    <code class="filename">ttys</code> er als volgt uitzien:</p><pre class="programlisting">ttyu0   "/usr/libexec/getty std.19200"   dialup on</pre><p>Indien een modem op een andere gegevenssnelheid is
	    ingesteld, dient de juiste waarde voor
	    <code class="literal">std.snelheid</code>
	    in plaats van <code class="literal">std.19200</code> ingesteld te
	    worden.  Gebruik een geldig type dat in
	    <code class="filename">/etc/gettytab</code> vermeld staat.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84030928"></a>26.4.4.2.2. Overeenkomstige snelheid instellen</h5></div></div></div><p>Voor het instellen van een overeenkomstige snelheid
	    dient de regel in <code class="filename">ttys</code> te verwijzen
	    naar regel met de juiste begin-<span class="quote">&#8220;<span class="quote">auto-baud</span>&#8221;</span>
	    (sic).  Indien bijvoorbeeld de boven voorgestelde regel
	    voor een modem met een overeenkomstige snelheid die begint
	    met 19,2 kbps wordt toegevoegd (de regel in
	    <code class="filename">gettytab</code> die het beginpunt
	    <code class="literal">V19200</code>), kan de regel in
	    <code class="filename">ttys</code> er als volgt uitzien:</p><pre class="programlisting">ttyu0   "/usr/libexec/getty V19200"   dialup on</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84034512"></a>26.4.4.3. <code class="filename">/etc/rc.d/serial</code></h4></div></div></div><a id="idp84035280" class="indexterm"></a><p>Hogesnelheidsmodems, zoals V.32, V.32bis, en V.34 modems,
	  moeten gebruik maken van hardwarematig
	  (<code class="literal">RTS/CTS</code>) gegevensstroombeheer.  Er kunnen
	  <code class="command">stty</code>-opdrachten aan
	  <code class="filename">/etc/rc.d/serial</code> toegevoegd worden om de
	  vlag voor hardwarematig gegevensstroombeheer in de kernel van
	  FreeBSD voor modempoorten in te stellen.</p><p>Om bijvoorbeeld de <code class="literal">termios</code>-vlag
	  <code class="varname">crtscts</code> op de apparaten die de in- en
	  uitbelapparaten initialiseren op de eerste seriële poort
	  (<code class="filename">COM2</code>) in te stellen, kunnen de
	  volgende regels aan <code class="filename">/etc/rc.d/serial</code>
	  worden toegevoegd:</p><pre class="programlisting"># Seriële poort initieel instellen
stty -f /dev/ttyu1.init crtscts
stty -f /dev/cuau1.init crtscts</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84044880"></a>26.4.5. Modeminstellingen</h3></div></div></div><p>Bij gebruik van een modem waarvan de parameters permanent
	in niet-vluchtig RAM ingesteld kunnen worden, is er een
	terminalprogramma (zoals <span class="application">Telix</span> onder
	<span class="trademark">MS-DOS</span>® of <code class="command">tip</code> onder FreeBSD) nodig om
	parameters in te stellen.  Maak een verbinding met een modem met
	dezelfde communicatiesnelheid als de initiële snelheid die
	door <code class="command">getty</code> gebruikt wordt en stel het
	niet-vluchtige RAM van een modem in zodat aan deze voorwaarden
	voldaan wordt:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">CD</acronym> geldt tijdens
	    verbindingen;</p></li><li class="listitem"><p><acronym class="acronym">DTR</acronym> geldt tijdens gebruik; het
	    loslaten van DTR hangt de verbinding op en stelt het modem
	    opnieuw in;</p></li><li class="listitem"><p>gegevensstroombeheer door <acronym class="acronym">CTS</acronym>
	    verzonden;</p></li><li class="listitem"><p>gegevensstroombeheer met <acronym class="acronym">XON/XOFF</acronym>
	    uitgezet;</p></li><li class="listitem"><p>gegevensstroombeheer door <acronym class="acronym">RTS</acronym>
	    ontvangen;</p></li><li class="listitem"><p>Stille modus (geen resultaatcodes);</p></li><li class="listitem"><p>Geen opdrachtecho.</p></li></ul></div><p>Kijk in de documentatie van een modem voor de benodigde
	opdrachten en/of instellingen van DIP-schakelaars.</p><p>Om de bovenstaande parameters bijvoorbeeld op een
	<span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14.400 extern modem in te stellen,
	kunnen de volgende opdrachten aan het modem gegeven
	worden:</p><pre class="programlisting">ATZ
AT&amp;C1;&amp;D2&amp;H1&amp;I0&amp;R2&amp;W</pre><p>In deze fase kunnen ook andere modeminstellingen aangepast
	worden, zoals of het V.42bis en/of MNP5 compressie wordt
	gebruiken.</p><p>Een <span class="trademark">U.S. Robotics</span>®<span class="trademark">Sportster</span>® 14.400 externe modem heeft ook
	enkele DIP-schakelaars die ingesteld moeten worden.  Voor
	andere modems kunnen deze instellingen wellicht als voorbeeld
	dienen:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Schakelaar 1: UP: DTR Normal</p></li><li class="listitem"><p>Schakelaar 2: N/A (Verbal Result Codes/Numeric Result
	    Codes)</p></li><li class="listitem"><p>Schakelaar 3: UP: Suppress Result Codes</p></li><li class="listitem"><p>Schakelaar 4: DOWN: Geen echo, offline
	    opdrachten</p></li><li class="listitem"><p>Schakelaar 5: UP: Auto Answer</p></li><li class="listitem"><p>Schakelaar 6: UP: Carrier Detect Normal</p></li><li class="listitem"><p>Schakelaar 7: UP: Load NVRAM Defaults</p></li><li class="listitem"><p>Schakelaar 8: N/A (Smart Mode/Dumb Mode)</p></li></ul></div><p>Schakel resultaatcodes voor alle inbelmodems uit of
	onderdruk ze om problemen te voorkomen die kunnen optreden als
	<code class="command">getty</code> abusievelijk een prompt
	<code class="prompt">login:</code> geeft aan een modem dat in
	opdrachtmodus staat en het modem de opdracht echoot of een
	resultaatcode teruggeeft.  Deze sequentie kan tot een
	uitgebreide, onnozele discussie tussen <code class="command">getty</code>
	en het modem leiden.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84075600"></a>26.4.5.1. Vaste snelheid instellen</h4></div></div></div><p>Stel voor een vaste snelheid een modem zodanig in dat die
	  een constante gegevenssnelheid naar de computer,
	  onafhankelijk van de communicatiesnelheid, behoudt.  Op een
	  <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14.400 extern modem zetten de
	  volgende opdrachten de gegevenssnelheid naar de computer vast
	  op de snelheid die gebruikt werd om de opdrachten te
	  geven:</p><pre class="programlisting">ATZ
AT&amp;B1&amp;W</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84078160"></a>26.4.5.2. Overeenkomstige snelheid instellen</h4></div></div></div><p>Stel voor een variabele snelheid een modem zodanig in dat
	  het de gegevenssnelheid van zijn seriële poort aanpast
	  aan de snelheid van een binnenkomende oproep.  Op een
	  <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14.400 extern modem zetten de
	  volgende opdrachten de gegevenssnelheid van het modem, die op
	  fouten gecorrigeerd wordt, vast op de snelheid die gebruikt
	  werd om de opdrachten te geven, maar staan ze toe dat de
	  snelheid van de seriële poort varieert voor verbindingen
	  die niet op fouten gecorrigeerd worden:</p><pre class="programlisting">ATZ
AT&amp;B2&amp;W</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84080720"></a>26.4.5.3. De modeminstellingen controleren</h4></div></div></div><p>De meeste modems die op hoge snelheid werken, bieden
	  opdrachten om de huidige werkparameters van een modem in een
	  min of meer voor mensen leesbare vorm te bekijken.  Op het
	  <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14.400 extern modem beeldt de
	  opdracht <code class="command">ATI5</code> de instellingen af die in
	  het niet-vluchtige RAM zijn opgeslagen.  Gebruik om de
	  werkelijke werkparameters van een modem te zien (zoals
	  beïnvloed door de stand van de DIP-schakelaars van een
	  modem) de opdrachten <code class="command">ATZ</code> gevolgd door
	  <code class="command">ATI4</code>.</p><p>Kijk in de handleiding van een modem als er met een
	  ander merk modem gewerkt wordt voor het controleren van de
	  parameters voor het instellen van dat modem.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84101072"></a>26.4.6. Problemen oplossen</h3></div></div></div><p>Hier volgen wat stappen die gevolgd kunnen worden om een
	inbelmodem op een systeem te controleren.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84102096"></a>26.4.6.1. Een FreeBSD-systeem controleren</h4></div></div></div><p>Verbind een modem met een FreeBSD-systeem, start het systeem
	  op en kijk, indien het modem lampjes bevat die de toestand
	  aangeven, of de <acronym class="acronym">DTR</acronym>-indicator oplicht
	  als het prompt <code class="prompt">login:</code> op de systeemconsole
	  verschijnt.  Als het oplicht zou dit betekenen dat FreeBSD
	  een <code class="command">getty</code>-proces heeft gestart op de
	  juiste communicatiepoort en wacht op het modem om een gesprek
	  aan te nemen.</p><p>Geef als de <acronym class="acronym">DTR</acronym>-indicator niet
	  oplicht, na aanmelden op de console, de opdracht <code class="command">ps
	    ax</code> om te zien of FreeBSD probeert een
	  <code class="command">getty</code>-proces op de juiste poort te
	  draaien.  Er dienen tussen de weergegeven processen regels
	  zoals de onderstaande te verschijnen:</p><pre class="screen">  114 ??  I      0:00.10 /usr/libexec/getty V19200 ttyu0
  115 ??  I      0:00.10 /usr/libexec/getty V19200 ttyu1</pre><p>Er kan ook iets als het volgende verschijnen:</p><pre class="screen">  114 d0  I      0:00.10 /usr/libexec/getty V19200 ttyu0</pre><p>Als het modem nog geen gesprek heeft aangenomen, betekent
	  dit dat <code class="command">getty</code> het openen van de
	  communicatiepoort voltooid heeft.  Dit kan duiden op een
	  probleem met de bekabeling of op een verkeerd ingesteld modem
	  omdat <code class="command">getty</code> niet in staat zou moeten zijn
	  om de communicatiepoort te openen totdat
	  <acronym class="acronym">CD</acronym> (kiestoon) door het modem is
	  bevestigd.</p><p>Indien er geen enkel <code class="command">getty</code>-proces
	  verschijnt dat wacht op het openen van de gewenste poort
	  <code class="filename">ttyuN</code>,
	  controleer dan de regels in <code class="filename">/etc/ttys</code> op
	  vergissingen.  Controleer ook het logboekbestand
	  <code class="filename">/var/log/messages</code> om te zien of er
	  logboekberichten van <code class="command">init</code> of
	  <code class="command">getty</code> met betrekking tot problemen zijn.
	  Indien er problemen zijn, controleer dan nogmaals de
	  instellingenbestanden <code class="filename">/etc/ttys</code> en
	  <code class="filename">/etc/gettytab</code>, alsook de betreffende
	  speciale apparaatbestanden <code class="filename">/dev/ttyuN</code>,
	  op vergissingen, ontbrekende regels of ontbrekende speciale
	  apparaatbestanden.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84112848"></a>26.4.6.2. Proberen om in te bellen</h4></div></div></div><p>Probeer in te bellen op een systeem.  Controleer of op het
	  systeem-op-afstand 8 bits, geen pariteit en 1 stopbit gebruikt
	  wordt.  Probeer, indien er niet meteen een prompt verschijnt
	  of als er rommel verschijnt, ongeveer eens per seconde op
	  <span class="keycap"><strong>Enter</strong></span> te drukken.  Probeer, indien er na een
	  tijd nog geen prompt <code class="prompt">login:</code> verschijnt, een
	  <code class="command">BREAK</code> te versturen.  Probeer, indien er een
	  modem wordt gebruikt dat op hoge snelheid werkt om te bellen,
	  opnieuw in te bellen nadat de interfacesnelheid van het
	  bellende modem is vastgezet (bijvoorbeeld via
	  <code class="command">AT&amp;B1</code> op een <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>®
	  modem).</p><p>Controleer, indien er nog steeds geen prompt
	  <code class="prompt">login:</code> verschijnt, nogmaals
	  <code class="filename">/etc/gettytab</code> en controleer of:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>De initiële specificatie die in
	      <code class="filename">/etc/ttys</code> voor de lijn staat
	      overeenkomt met een naam van een specificatie in
	      <code class="filename">/etc/gettytab</code>;</p></li><li class="listitem"><p>Elke regel <code class="literal">nx=</code> overeenkomt met een
	      naam van een andere specificatie in
	      <code class="filename">gettytab</code>;</p></li><li class="listitem"><p>Elke regel <code class="literal">tc=</code> overeenkomt met een
	      naam van een andere specificatie in
	      <code class="filename">gettytab</code>.</p></li></ul></div><p>Controleer, indien er gebeld wordt maar het modem op het
	  FreeBSD-systeem niet reageert, of het modem ingesteld is om de
	  telefoon te beantwoorden als <acronym class="acronym">DTR</acronym> bevestigd
	  is.  Controleer, indien het modem juist ingesteld lijkt te
	  zijn, of de <acronym class="acronym">DTR</acronym>-lijn bevestigd is door de
	  indicatielampjes van het modem te controleren (indien die
	  aanwezig zijn).</p><p>Neem een pauze en probeer het later nog eens indien alles
	  meerdere malen is geprobeerd en het nog steeds niet werkt.
	  Indien het nog steeds niet werkt, stuur dan een e-mail naar
	  de <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">FreeBSD algemene vragen mailinglijst</a> met een beschrijving van het modem en het
	  probleem en de mensen op de lijst zullen proberen te
	  helpen.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="term.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="serialcomms.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="dialout.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">26.3. Terminals </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 26.5. Uitbeldienst</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>