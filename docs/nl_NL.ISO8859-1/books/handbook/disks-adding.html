<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>19.3. Schijven toevoegen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="disks.html" title="Hoofdstuk 19. Opslag" /><link rel="prev" href="disks-naming.html" title="19.2. Apparaatnamen" /><link rel="next" href="raid.html" title="19.4. RAID" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">19.3. Schijven toevoegen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="disks-naming.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 19. Opslag</th><td width="20%" align="right"> <a accesskey="n" href="raid.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-adding"></a>19.3. Schijven toevoegen</h2></div><div><span class="authorgroup">Origineel bijgedragen door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">David</span> <span class="surname">O'Brien</span></span>. </span></div></div></div><a id="idp79294416" class="indexterm"></a><p>De volgende sectie beschrijft hoe een nieuwe <acronym class="acronym">SCSI</acronym>
      schijf aan een machine toe te voegen die slechts een enkele drive heeft.
      Ten eerste dient de computer uitgeschakeld te worden en dient de
      schijf volgens de instructies van de computer, controller en
      schijffabrikant geïnstalleerd te worden.  Wegens de grote
      variéteiten om dit soort procedures uit te voeren, vallen
      de details buiten het bereik van dit document.</p><p>Er dient als gebruiker <code class="systemitem">root</code> ingelogd te
      worden.  Nadat de schijf is toegevoegd, dient
      <code class="filename">/var/run/dmesg.boot</code> bekeken te worden om er
      zeker van te zijn dat de nieuwe schijf is gevonden.  Volgens het
      voorbeeld heet de nieuw toegevoegde schijf
      <code class="filename">da1</code> en die wordt aangekoppeld op
      <code class="filename">/1</code> (als er een IDE-schijf wordt toegevoegd,
      is de apparaatnaam <code class="filename">ad1</code>).</p><a id="idp79298768" class="indexterm"></a><a id="idp79299408" class="indexterm"></a><a id="idp79299920" class="indexterm"></a><p>FreeBSD draait op IBM-PC-compatibele computers.  Daarom moet het
      rekening houden met de PC-BIOS-partities.  Deze wijken af van de
      traditionele BSD-partities.  Een PC-schijf bevat tot vier
      ingangen voor BIOS-partities.  Indien de schijf geheel aan FreeBSD
      wordt gewijd, kan de <span class="emphasis"><em>toegewijde</em></span>-modus
      gebruikt worden.  In het andere geval moet FreeBSD binnen
      één van de vier PC-BIOS-partities draaien.  De
      PC-BIOS-partities worden door FreeBSD <span class="emphasis"><em>slices</em></span>
      genoemd om ze niet met de traditionele BSD-partities te
      verwarren.  Slices kunnen ook op een schijf worden gebruikt die
      toegewijd is aan FreeBSD, maar in een computer zit die ook andere
      besturingssystemen heeft geïnstalleerd.  Dit is een goede
      manier om verwarring met het programma <code class="command">fdisk</code>
      van andere, niet-FreeBSD besturingssystemen te voorkomen.</p><p>Als er met slices gewerkt wordt, wordt de schijf toegevoegd
      als <code class="filename">/dev/da1s1e</code>.  Dit moet worden gelezen
      als: SCSI-schijf, eenheid 1 (tweede SCSI-schijf), slice 1
      (PC-BIOS-partitie 1) en BSD-partitie <code class="filename">e</code>.  Als
      de schijf toegewijd is, wordt deze simpelweg als
      <code class="filename">/dev/da1e</code> toegevoegd.</p><p>Omdat 32-bit-integers worden gebruikt om het aantal sectoren
      op te slaan, is <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
      beperkt tot 2^32-1 sectoren per schijf, wat
      meestal neerkomt op 2 TB.  Het programma <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> staat
      geen hogere startsector toe dan 2^32-1 en geen grotere lengte dan
      2^32-1, meestal worden hiermee partities tot 2 TB begrensd
      en schijven tot 4 TB.  Het formaat van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sunlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sunlabel</span>(8)</span></a> is
      beperkt tot 2^32-1 sectoren per partitie en 8 partities per
      schijf, in totaal dus 16 TB.  Voor grotere schijven kan
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gpart&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gpart</span>(8)</span></a> worden gebruikt om <acronym class="acronym">GPT</acronym>-partities aan te
      maken.  <acronym class="acronym">GPT</acronym> heeft het bijkomende voordeel dat het niet
      tot 4 slices beperkt is.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79312080"></a>19.3.1. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> gebruiken</h3></div></div></div><a id="idp79313360" class="indexterm"></a><a id="idp79314640" class="indexterm"></a><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Navigeren door
	    <span class="application">sysinstall</span></strong></p><p><code class="command">sysinstall</code>
	    kan gebruikt worden om een nieuwe schijf te
	    partitioneren en te labelen met eenvoudig te gebruiken
	    menu's.  Hiervoor dient òfwel als gebruiker
	    <code class="systemitem">root</code> ingelogd te zijn, òfwel
	    gebruik te worden gemaakt van <code class="command">su</code>.  Draai
	    <code class="command">sysinstall</code> en ga naar het menu
	    <code class="literal">Configure</code>.  Scroll binnen het
	    <code class="literal">FreeBSD Configuration Menu</code> naar
	    beneden en kies de optie <code class="literal">Fdisk</code>.</p></li><li class="step"><p class="title"><strong><span class="application">fdisk</span>
	    partitie-bewerker</strong></p><p>Eenmaal binnen <span class="application">fdisk</span> kan op
	    <span class="keycap"><strong>A</strong></span> gedrukt worden om de gehele
	    schijf voor FreeBSD te gebruiken.  Wanneer gevraagd wordt of
	    het systeem compatibel dient te blijven met mogelijk
	    toekomstige besturingssystemen, dient met
	    <code class="literal">YES</code> geantwoord te worden.  Met
	    <span class="keycap"><strong>W</strong></span> kunnen de veranderingen naar de
	    schijf worden geschreven.  Nu dient de FDISK-bewerker
	    verlaten te worden door op <span class="keycap"><strong>Q</strong></span> te drukken.
	    Vervolgens wordt er een vraag
	    gesteld over het <span class="quote">&#8220;<span class="quote">Master Boot Record</span>&#8221;</span>.  Omdat
	    er een schijf aan een reeds draaiend systeem wordt
	    toegevoegd, dient hier <code class="literal">None</code> gekozen te
	    worden.</p></li><li class="step"><p class="title"><strong>Schijflabelbewerker</strong></p><a id="idp79328720" class="indexterm"></a><p>Vervolgens dient <span class="application">sysinstall</span>
	    verlaten en opnieuw gestart te worden.  Volg bovenstaande
	    aanwijzingen, maar kies deze keer voor de optie
	    <code class="literal">Label</code>.  Dit geeft toegang tot de
	    <code class="literal">Disk Label Editor</code>.   Hier worden de
	    traditionele BSD-partities aangemaakt.  Een schijf kan tot
	    acht partities bevatten, gelabeld <code class="literal">a-h</code>.
	    Enkele partitielabels hebben een speciale functie.  De
	    partitie <code class="literal">a</code> wordt gebruikt voor de
	    rootpartitie (<code class="filename">/</code>).  Alleen de
	    systeemschijf (bijvoorbeeld de schijf van waaruit opgestart
	    wordt) moet een partitie <code class="literal">a</code> hebben.  De
	    partitie <code class="literal">b</code> wordt voor swappartities
	    gebruikt, en het is mogelijk om vele schijven met
	    swappartities te hebben.  De partitie <code class="literal">c</code>
	    adresseert de gehele schijf in toegewijde modus, of de
	    gehele FreeBSD-slice in slice-modus.  De andere partities zijn
	    voor algemeen gebruik.</p><p><span class="application">sysinstall</span>'s Labelbewerker
	    heeft een voorkeur voor de partitie <code class="literal">e</code>
	    voor niet-root-niet-swap-partities.  Binnen de
	    Labelbewerker dient een enkel bestandssysteem te worden
	    aangemaakt door op <span class="keycap"><strong>C</strong></span> te drukken.  Kies
	    <code class="literal">FS</code> wanneer gevraagd wordt of dit een FS
	    (file system) of swap wordt, en geef een koppelpunt in
	    (bijvoorbeeld <code class="filename">/mnt</code>).  Wanneer een
	    schijf in post-installatie-modus wordt toegevoegd, maakt
	    <span class="application">sysinstall</span> geen ingangen aan in
	    <code class="filename">/etc/fstab</code>, dus dan is het opgegeven
	    koppelpunt niet van belang.</p><p>Nu kan het nieuwe label naar de schijf worden
	    geschreven en er een bestandssysteem op aangemaakt worden.
	    Dit kan gedaan worden door op <span class="keycap"><strong>W</strong></span> te
	    drukken.  Fouten van <span class="application">sysinstall</span>
	    dat de nieuwe partitie niet aankoppeld kon worden kunnen
	    genegeerd worden.  De Labelbewerker en
	    <span class="application">sysinstall</span> kunnen nu volledig
	    verlaten worden.</p></li><li class="step"><p class="title"><strong>Afronden</strong></p><p>De laatste stap bestaat uit het bewerken van
	    <code class="filename">/etc/fstab</code> om hier een regel voor de
	    nieuwe schijf aan toe te voegen.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79344464"></a>19.3.2. Het gebruik van opdrachtregelgereedschappen</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79345104"></a>19.3.2.1. Het gebruik van slices</h4></div></div></div><p>Deze installatie zorgt ervoor dat de schijf correct
	  samenwerkt met andere besturingssystemen die eventueel op de
	  computer zijn geïnstalleerd en dat de
	  <code class="command">fdisk</code>-gereedschappen van andere
	  besturingssystemen niet verward raken.  Het wordt aangeraden
	  om deze methode te gebruiken voor de installatie van nieuwe
	  schijven.  Gebruik de <code class="literal">toegewijde</code> modus
	  alleen als hier een goede reden voor bestaat!</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of/dev/da1 bs=1k count=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>fdisk -BI da1</code></strong> # Initialiseer de nieuwe schijf.
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -B -w da1s1 auto</code></strong> # Label de schijf.
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -e da1s1</code></strong> # Bewerk de zojuist aangemaakte schijflabel en voeg partities toe.
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da1s1e</code></strong> # Herhaal dit voor alle aangemaakte partities.
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/da1s1e /1</code></strong> # Mount de partitie(s).
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong> # Voeg de juiste regel(s) aan <code class="filename">/etc/fstab</code> toe.</pre><p>Vervang voor een IDE-schijf <code class="filename">da</code> door
	  <code class="filename">ad</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79359184"></a>19.3.2.2. Toegewijd</h4></div></div></div><a id="idp79359824" class="indexterm"></a><p>Indien de nieuwe schijf niet met een ander
	  besturingssysteem gedeeld wordt, kan de
	  <code class="literal">toegewijde</code> modus gebruikt worden.  Denk
	  eraan dat deze modus besturingssystemen van Microsoft kan
	  verwarren.  Ze richten echter geen schade aan.  IBM's <span class="trademark">OS/2</span>®
	  <span class="quote">&#8220;<span class="quote">fatsoeneert</span>&#8221;</span> echter partities die het niet
	  begrijpt.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 bs=1k count=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -Bw da1 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -e da1</code></strong> # Maak de `e'-partitie aan.
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da1e</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong> # Voeg een regel voor /dev/da1e toe.
<code class="prompt">#</code> <strong class="userinput"><code>mount /1</code></strong></pre><p>Een alternatieve methode is:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 count=2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel /dev/da1 | bsdlabel -BR da1 /dev/stdin</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da1e</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong> # Voeg een regel voor /dev/da1e toe.
<code class="prompt">#</code> <strong class="userinput"><code>mount /1</code></strong></pre></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="disks-naming.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="raid.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">19.2. Apparaatnamen </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 19.4. RAID</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>