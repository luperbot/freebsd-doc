<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>24.7. De &#8220;wereld&#8221; opnieuw bouwen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="updating-upgrading.html" title="Hoofdstuk 24. FreeBSD updaten en upgraden" /><link rel="prev" href="synching.html" title="24.6. Broncode synchroniseren" /><link rel="next" href="make-delete-old.html" title="24.8. Het verwijderen van overbodige bestanden, directories en bibliotheken" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">24.7. De <span class="quote">&#8220;<span class="quote">wereld</span>&#8221;</span> opnieuw bouwen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="synching.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 24. FreeBSD updaten en upgraden</th><td width="20%" align="right"> <a accesskey="n" href="make-delete-old.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makeworld"></a>24.7. De <span class="quote">&#8220;<span class="quote">wereld</span>&#8221;</span> opnieuw bouwen</h2></div></div></div><a id="idp82909776" class="indexterm"></a><p>Zodra de lokale broncode gesynchroniseerd is met een
      bepaalde versie van FreeBSD (FreeBSD-STABLE, FreeBSD-CURRENT, enzovoort)
      kan de broncode gebruikt worden om een systeem te
      herbouwen.</p><div xmlns="" class="warning"><h3 class="admontitle">Maak een back-up: </h3><p xmlns="http://www.w3.org/1999/xhtml">Het kan niet vaak genoeg verteld worden hoe belangrijk het
	is om een back-up te maken van een systeem
	<span class="emphasis"><em>vóór</em></span> deze taak uit te
	voeren.  Ook al is het opnieuw bouwen van de wereld vrij simpel
	(als deze instructies gevolgd worden), er worden ongetwijfeld
	ooit fouten gemaakt, misschien zelfs in de broncode, die het
	onmogelijk maken om een systeem op te starten.</p><p xmlns="http://www.w3.org/1999/xhtml">Wees ervan verzekerd dat er een back-up gemaakt is en dat er
	een reparatiediskette of cd-rom bij de hand is.  Deze wordt
	waarschijnlijk nooit gebruikt maar <span class="quote">&#8220;<span class="quote">better safe than
	  sorry</span>&#8221;</span>.</p></div><div xmlns="" class="warning"><h3 class="admontitle">Abonneer op de juiste mailinglijsten: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp82913872" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">De FreeBSD-STABLE en FreeBSD-CURRENT takken zijn van nature
	<span class="emphasis"><em>in ontwikkeling</em></span>.  Mensen die bijdragen
	aan FreeBSD zijn menselijk en foutjes ontstaan regelmatig.</p><p xmlns="http://www.w3.org/1999/xhtml">Soms zijn deze foutjes onschadelijk, ze geven dan hooguit
	een nieuwe diagnostische waarschuwing weer.  Maar de wijziging
	kan ook catastrofaal zijn en ervoor zorgen dat een systeem niet
	meer opstart of bestandssystemen vernietigt (of erger).</p><p xmlns="http://www.w3.org/1999/xhtml">Als problemen zoals deze voorkomen wordt er een
	<span class="quote">&#8220;<span class="quote">heads up</span>&#8221;</span> naar de juiste mailinglijst gestuurd,
	waarin uitgelegd wordt wat het probleem is en welke systemen
	het raakt.  Er wordt een <span class="quote">&#8220;<span class="quote">all clear</span>&#8221;</span> bericht
	gestuurd als het probleem is opgelost.</p><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD-STABLE of FreeBSD-CURRENT volgen zonder de <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-stable" target="_top">FreeBSD-STABLE mailinglijst</a> of
	<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">FreeBSD-CURRENT mailinglijst</a> te volgen is vragen om problemen.</p></div><div xmlns="" class="warning"><h3 class="admontitle">Gebruik geen <code xmlns="http://www.w3.org/1999/xhtml" class="command">make world</code>: </h3><p xmlns="http://www.w3.org/1999/xhtml">Veel oudere documentatie raadt aan om <code class="command">make
	  world</code> te gebruiken.  In dat geval worden er
	belangrijke stappen overgeslagen en gebruik het commando alleen
	als er voldoende kennis over aanwezig is.  In bijna alle
	omstandigheden is <code class="command">make world</code> verkeerd en
	de procedure die hier beschreven is hoort in plaats daarvan
	gebruikt te worden.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="canonical-build"></a>24.7.1. De universele wijze om een systeem bij te werken</h3></div></div></div><p>Om uw systeem bij te werken, dient u
	<code class="filename">/usr/src/UPDATING</code> te controleren op
	eventuele pre-buildworld stappen die nodig zijn voor uw versie
	van de broncode en daarna de procedure te gebruiken die hier
	beschreven staat.</p><p>Deze bijwerkstappen nemen aan dat u nu een oude versie van
	FreeBSD gebruikt, die uit een oude compiler, een oude kernel, een
	oude wereld en oude instellingenbestanden bestaat.  Onder
	<span class="quote">&#8220;<span class="quote">wereld</span>&#8221;</span> worden de binairen, bibliotheken, en
	programmeerbestanden van het kernsysteem verstaan.  De compiler
	is deel van <span class="quote">&#8220;<span class="quote">wereld</span>&#8221;</span>, maar heeft enkele speciale
	aandachtspunten.</p><p>We nemen ook aan dat u reeds de broncode van een nieuwer
	systeem heeft verkregen.  Bekijk, als de bronnen op een bepaald
	systeem ook oud zijn, <a class="xref" href="synching.html" title="24.6. Broncode synchroniseren">Paragraaf 24.6, &#8220;Broncode synchroniseren&#8221;</a> voor uitgebreide
	hulp over het synchroniseren ervan naar een nieuwere
	versie.</p><p>Het bijwerken van het systeem vanaf de broncode is wat
	subtieler dan het op het eerste gezicht lijkt, en de
	ontwikkelaars van FreeBSD vonden het in de loop der jaren nodig om
	de aangeraden methode redelijk drastisch te veranderen met het
	aan het licht komen van nieuwe soorten onontwijkbare
	afhankelijkheden.  De rest van deze sectie beschrijft de
	rationale achter de huidige aanbevolen bijwerkmethode.</p><p>Elke succesvolle bijwerkmethode krijgt te maken met de
	volgende punten:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Het kan voorkomen dat de oude compiler de nieuwe kernel
	    niet kan compileren.  (Oude compilers bevatten soms bugs.)
	    De nieuwe kernel dient dus met de nieuwe compiler gebouwd te
	    worden.  In het bijzonder moet de nieuwe compiler gebouwd
	    worden voordat de nieuwe kernel gebouwd wordt.  Dit betekent
	    niet per se dat de nieuwe compiler
	    <span class="emphasis"><em>geïnstalleerd</em></span> moet worden voordat
	    de nieuwe kernel gebouwd wordt.</p></li><li class="listitem"><p>De nieuwe wereld kan afhankelijk zijn van mogelijkheden
	    van de nieuwe kernel.  Dus moet de nieuwe kernel worden
	    geïnstalleerd voordat de nieuwe wereld wordt
	    geïnstalleerd.</p></li></ul></div><p>De eerste twee gevallen zijn de basis voor de methode
	<code class="buildtarget">buildworld</code>,
	<code class="buildtarget">buildkernel</code>,
	<code class="buildtarget">installkernel</code>,
	<code class="buildtarget">installworld</code> die we in de volgende
	paragrafen beschrijven.  Dit is geen uitputtende lijst van alle
	redenen waarom het huidige aanbevolen bijwerkproces de voorkeur
	verdient.  Wat minder voor de hand liggende redenen worden
	hieronder genoemd:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Het kan zijn dat de oude wereld niet correct draait op
	    de nieuwe kernel, dus moet de nieuwe wereld onmiddellijk na
	    het installeren van de nieuwe kernel geïnstalleerd
	    worden.</p></li><li class="listitem"><p>Sommige instellingen moeten veranderd worden voordat de
	    nieuwe wereld wordt geïnstalleerd, maar anderen kunnen
	    de oude wereld kapot maken.  Vandaar dat over het algemeen
	    twee verschillende bijwerkstappen voor de instellingen nodig
	    zijn.</p></li><li class="listitem"><p>Voor het grootste gedeelte houdt het bijwerkproces zich
	    alleen bezig met het vervangen of toevoegen van bestanden;
	    bestaande oude bestanden worden niet verwijderd.  Dit kan in
	    sommige gevallen problemen geven.  Als een gevolg zal de
	    bijwerkprocedure soms aangeven dat bepaalde bestanden
	    tijdens bepaalde stappen handmatig verwijderd dienen te
	    worden.  Dit kan in de toekomst eventueel geautomatiseerd
	    worden.</p></li></ul></div><p>Deze zorgen hebben tot het volgende aanbevolen bijwerkproces
	geleid.  Merk op dat het gedetailleerde proces voor bepaalde
	updates aanvullende stappen nodig kan hebben, maar dit
	kernproces zou de komende tijd ongewijzigd moeten
	blijven:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="command">make
	      buildworld</code></p><p>Dit compileert eerst de nieuwe compiler en enkele
	    aanverwante gereedschappen, daarna wordt de nieuwe compiler
	    gebruikt om de rest van de nieuwe wereld te compileren.  Het
	    resultaat komt in <code class="filename">/usr/obj</code> te staan.</p></li><li class="listitem"><p><code class="command">make
	      buildkernel</code></p><p>In tegenstelling tot de oude aanpak, die <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a>
	    en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> gebruikt, gebruikt dit de
	    <span class="emphasis"><em>nieuwe</em></span> compiler die in <code class="filename">/usr/obj</code> verblijft.  Dit
	    beschermt u tegen mismatches tussen de compiler en de
	    kernel.</p></li><li class="listitem"><p><code class="command">make
	      installkernel</code></p><p>Plaatst de nieuwe kernel en kernelmodules op de schijf,
	    waardoor het mogelijk wordt om met de nieuw bijgewerkte
	    kernel op te starten.</p></li><li class="listitem"><p>Start opnieuw op in enkele-gebruikersmodus.</p><p>De enkele-gebruikersmodus minimaliseert problemen met
	    het bijwerken van software die al draait.  Het minimaliseert
	    ook problemen die opduiken door een oude wereld op een
	    nieuwe kernel te draaien.</p></li><li class="listitem"><p><code class="command">mergemaster -p</code></p><p>Dit voert wat initiële updates aan
	    instellingenbestanden uit ter voorbereiding op de nieuwe
	    wereld.  Het kan bijvoorbeeld nieuwe gebruikersgroepen aan
	    het systeem, of nieuwe gebruikersnamen aan de
	    wachtwoorddatabase toevoegen.  Dit is vaak nodig wanneer er
	    nieuwe groepen of speciale accounts voor systeemgebruikers
	    zijn toegevoegd sinds de laatste keer bijwerken, zodat de
	    stap <code class="buildtarget">installworld</code> zonder problemen
	    de nieuw geïnstalleerde namen van systeemgebruikers of
	    systeemgroepen kan gebruiken.</p></li><li class="listitem"><p><code class="command">make
	      installworld</code></p><p>Kopieert de wereld van <code class="filename">/usr/obj</code>.  U heeft nu een
	    nieuwe kernel en een nieuwe wereld op schijf staan.</p></li><li class="listitem"><p><code class="command">mergemaster</code></p><p>Nu kunt u de overgebleven instellingenbestanden
	    bijwerken, aangezien u een nieuwe wereld op schijf heeft
	    staan.</p></li><li class="listitem"><p>Start opnieuw op.</p><p>Een volledige nieuwe start van de machine is nodig om de
	    nieuwe kernel en de nieuwe wereld met nieuwe
	    instellingenbestanden te laden.</p></li></ol></div><p>Merk op dat als u van de ene uitgave van dezelfde tak van
	FreeBSD bijwerkt naar een recentere uitgave van dezelfde tak, i.e.
	van 7.0 naar 7.1, dat deze procedure dan niet absoluut nodig is,
	aangezien het onwaarschijnlijk is dat u serieuze problemen
	krijgt met de compiler, kernel, gebruikersland en
	instellingenbestanden.  De oudere aanpak met <code class="command">make
	  world</code> gevolgd door het
	bouwen en installeren van een nieuwe kernel kan voor kleine
	updates goed genoeg zijn.</p><p>Maar mensen die deze procedure niet volgen tijdens het
	bijwerken tussen grote uitgaven kunnen wat problemen
	verwachten.</p><p>Het is ook goed om op te merken dat veel upgrades (i.e.
	4.<em class="replaceable"><code>X</code></em> naar 5.0) wat specifieke
	aanvullende stappen nodig hebben (bijvoorbeeld het hernoemen of
	verwijderen van specifieke bestanden voorafgaand aan
	installworld).  Lees het bestand
	<code class="filename">/usr/src/UPDATING</code> zorgvuldig, met name het
	einde, waar het huidig aangeraden bijwerkproces expliciet wordt
	beschreven.</p><p>Deze procedure is in de loop der tijd veranderd aangezien de
	ontwikkelaars zagen dat het onmogelijk was om bepaalde
	mismatch-problemen volledig te voorkomen.  Hopelijk blijft de
	huidige procedure voor een lange tijd stabiel.</p><p>Samengevat is de huidige aanbevolen manier om FreeBSD vanaf
	broncode bij te werken:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make buildworld</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make buildkernel</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installkernel</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>shutdown -r now</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Er zijn een aantal zeldzame gevallen waarin
	  <code class="command">mergemaster -p</code> nog een keer moet draaien
	  voor de stap met <code class="buildtarget">buildworld</code>.  Deze
	  staan beschreven in <code class="filename">UPDATING</code>.  In het
	  algemeen kan deze stap echter zonder risico worden
	  overgeslagen als er niet tussen een of meer hoofdversies
	  wordt bijgewerkt.</p></div><p>Nadat <code class="buildtarget">installkernel</code> succesvol is
	afgerond, dient er in single-user modus opgestart te worden
	(met <code class="command">boot -s</code> vanaf de loaderprompt).  Draai
	dan:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -u /</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -a -t ufs</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>adjkerntz -i</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mergemaster -p</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installworld</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mergemaster</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>reboot</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Lees verdere uitleg: </h3><p xmlns="http://www.w3.org/1999/xhtml">De hierboven beschreven volgorde is alleen een korte
	  samenvatting.  Ook de volgende secties lezen geeft een beter
	  beeld van elke stap, met name als er een op maat gemaakte
	  kernelinstelling wordt gebruikt.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="src-updating"></a>24.7.2. <code class="filename">/usr/src/UPDATING</code> lezen</h3></div></div></div><p>Lees voor verder te gaan
	<code class="filename">/usr/src/UPDATING</code> (of het gelijknamige
	bestand waar de kopie van de broncode ook staat).  Dit bestand
	kan belangrijke informatie bevatten over mogelijke problemen of
	specificeert de volgorde waarin bepaalde commando's gestart
	moeten worden.  Als <code class="filename">UPDATING</code> tegenstrijdig
	is met wat hier wordt beschreven, heeft
	<code class="filename">UPDATING</code> voorrang.</p><div xmlns="" class="important"><h3 class="admontitle">Belangrijk: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">UPDATING</code> lezen is geen acceptabele
	  vervanging voor het abonneren op de correcte mailinglijst
	  zoals eerder beschreven.  De twee vullen elkaar aan en zijn
	  niet exclusief.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="make-conf"></a>24.7.3. <code class="filename">/etc/make.conf</code> controleren</h3></div></div></div><a id="idp82998224" class="indexterm"></a><p>Controleer
	<code class="filename">/usr/share/examples/etc/make.conf</code>
	en <code class="filename">/etc/make.conf</code>.  Het
	eerste bestand bevat standaard definities, waarvan de meeste
	uitgecommentarieerd zijn.  Om hiervan gebruik te maken als het
	systeem opnieuw opgebouwd wordt vanuit de broncode, moeten ze
	toegevoegd worden aan <code class="filename">/etc/make.conf</code>.
	Bedenk dat alles wat toegevoegd wordt aan
	<code class="filename">/etc/make.conf</code> ook gebruikt wordt bij elk
	<code class="command">make</code> commando.  Het is dus verstandig om
	daar redelijke waardes in te vullen voor een systeem.</p><p>Een typische gebruiker wil waarschijnlijk de regel
	<code class="varname">NO_PROFILE</code> uit
	<code class="filename">/usr/share/examples/etc/make.conf</code>
	kopiëren naar <code class="filename">/etc/make.conf</code> en het
	commentaar verwijderen.</p><p>Bekijk de andere definities, zoals <code class="varname">NOPORTDOCS</code> en
	bepaal of deze relevant zijn.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-etc"></a>24.7.4. <code class="filename">/etc</code> bijwerken</h3></div></div></div><p>De map <code class="filename">/etc</code> bevat een groot deel van
	de systeeminstellingen en scripts die gestart worden tijdens de
	systeemstart.  Sommige van deze scripts verschillen van versie
	tot versie in FreeBSD.</p><p>Sommige van de instellingenbestanden worden dagelijks
	gebruikt voor het draaien van een systeem.  In het bijzonder
	<code class="filename">/etc/group</code>.</p><p>Er zijn gevallen geweest waarbij het installatiegedeelte
	van <code class="command">make installworld</code> een aantal
	gebruikersnamen of groepen verwachtte.  Als er een upgrade
	wordt uitgevoerd is het waarschijnlijk dat deze gebruikers of
	groepen niet bestaan.  Dit levert problemen op bij upgraden.
	In sommige gevallen controleert <code class="command">make
	  buildworld</code> of deze gebruikers of groepen
	bestaan.</p><p>Een voorbeeld hiervan is het toevoegen van de gebruiker
	<code class="systemitem">smmsp</code>.  Gebruikers hadden een falend
	installatieproces toen <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mtree&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mtree</span>(8)</span></a> probeerde om
	<code class="filename">/var/spool/clientmqueue</code> te
	creëren.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> kan in voorbereidende modus gedraaid
	worden als de optie <code class="option">-p</code> wordt meegegeven.  Dan
	worden alleen de bestanden vergeleken die essentieel zijn voor
	het succes van <code class="buildtarget">buildworld</code> of
	<code class="buildtarget">installworld</code>:</p><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">In <span class="quote">&#8220;<span class="quote">paranoide beheerdersmodus</span>&#8221;</span> kan er
	  gecontroleerd worden welke bestanden op een systeem eigendom
	  zijn van de groep die wordt hernoemd of verwijderd:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>find / -group GID -print</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">Dit commando toont alle bestanden die eigendom zijn van
	  de groep <em class="replaceable"><code>GID</code></em> (een groepsnaam of
	  een numeriek groeps-ID).</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makeworld-singleuser"></a>24.7.5. Systeem naar single-user modus brengen</h3></div></div></div><a id="idp83019856" class="indexterm"></a><p>Het kan zijn dat een systeem in single-user modus
	gecompileerd moet worden.  Buiten het duidelijke voordeel dat
	de operatie iets sneller verloopt, is het voordeel dat bij een
	herinstallatie van een systeem een aantal belangrijke
	systeembestanden waaronder binaire systeembestanden,
	bibliotheken, include bestanden, enzovoort, worden aangepast,
	iets wat op een actief systeem vragen om problemen is (zeker
	als er actieve gebruikers op een systeem aanwezig zijn).</p><a id="idp83020752" class="indexterm"></a><p>Een andere methode is het systeem compileren in multi-user
	modus en daarna naar single-user modus gaan voor de
	installatie.  Bij deze methode moeten de volgende stappen
	gevolgd worden.  Het overschakelen naar single-user modus kan
	uitgesteld worden tot en met
	<code class="buildtarget">installkernel</code> of
	<code class="buildtarget">installworld</code>.</p><p>Een supergebruiker kan als volgt een draaiend systeem naar
	single-user modus overgeschakelen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown now</code></strong></pre><p>Als alternatief kan tijdens het opstarten de optie
	<code class="option">single user</code> worden gekozen.  Het systeem start dan
	in single-user modus.  Op de shell prompt moet dan worden
	ingegeven:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fsck -p</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -u /</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -a -t ufs</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>swapon -a</code></strong></pre><p>Hierdoor worden de bestandssystemen gecontroleerd,
	<code class="filename">/</code> met lees en schrijf rechten opnieuw
	gemount, worden alle andere UFS bestandssystemen die in
	<code class="filename">/etc/fstab</code> staan gemount en wordt swap
	ingeschakeld.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Als de CMOS-klok ingesteld is naar de lokale tijd en
	  niet naar GMT (dit is waar als het resultaat van
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=date&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">date</span>(1)</span></a> niet de correcte tijd en zone weergeeft), dan
	  is het misschien handig om het volgende commando te
	  starten:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>adjkerntz -i</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">Dit zorgt ervoor dat de lokale tijdzoneinstellingen
	  correct ingesteld worden.  Zonder deze instelling kunnen er
	  later problemen ontstaan.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cleaning-usr-obj"></a>24.7.6. <code class="filename">/usr/obj</code> verwijderen</h3></div></div></div><p>Als delen van een systeem opnieuw gebouwd worden, worden ze
	standaard geplaatst in mappen onder
	<code class="filename">/usr/obj</code>.  Deze mappen schaduwen de mappen
	onder <code class="filename">/usr/src</code>.</p><p>Het proces <code class="command">make buildworld</code> kan versneld
	worden en problemen met afhankelijkheden kunnen voorkomen
	worden als deze map wordt verwijderd.</p><p>Sommige bestanden onder <code class="filename">/usr/obj</code>
	hebben mogelijk de optie <span class="quote">&#8220;<span class="quote">niet aanpassen</span>&#8221;</span>
	ingesteld (zie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a>) die eerst verwijderd moet
	worden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/obj</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chflags -R noschg *</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm -rf *</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-upgrading-recompilebase"></a>24.7.7. Broncode van het basissysteem hercompileren</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83048656"></a>24.7.7.1. Uitvoer bewaren</h4></div></div></div><p>Het is een goed idee om de uitvoer van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> te
	  bewaren in een ander bestand.  Als er iets misgaat is er een
	  kopie van de foutmelding aanwezig.  Hoewel dit misschien niet
	  helpt in de diagnose van wat er fout is gegaan, kan het
	  anderen helpen als het probleem wordt aangegeven in
	  een FreeBSD mailinglijst.</p><p>De makkelijkste manier om dit te doen is door het
	  commando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=script&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">script</span>(1)</span></a> te gebruiken, met een parameter
	  die de naam specificeert waar de uitvoer naartoe moet.  Dit
	  moet direct gedaan worden vóór het herbouwen
	  van de wereld, zodat het proces klaar is moet
	  <strong class="userinput"><code>exit</code></strong> worden ingegeven:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>script /var/tmp/mw.out</code></strong>
Script started, output file is /var/tmp/mw.out
<code class="prompt">#</code> <strong class="userinput"><code>make TARGET</code></strong>
<span class="emphasis"><em>&#8230; compile, compile, compile &#8230;</em></span>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong>
Script done, &#8230;</pre><p>Bewaar de uitvoer in deze stap <span class="emphasis"><em>niet</em></span>
	  in <code class="filename">/tmp</code>.  Deze map wordt mogelijk
	  opgeschoond tijdens de volgende herstart.  Een betere plaats
	  om dit bestand te bewaren is de map
	  <code class="filename">/var/tmp</code> (zoals in het vorige voorbeeld)
	  of in de thuismap van <code class="systemitem">root</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="make-buildworld"></a>24.7.7.2. Basissysteem compileren</h4></div></div></div><p>Ga naar de map <code class="filename">/usr/src</code>, tenzij de
	  broncode ergens anders staat, in welk geval naar die map
	  gegaan moet worden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong></pre><a id="idp83080144" class="indexterm"></a><p>Om de wereld opnieuw te bouwen moet het commando
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> gebruikt worden.  Dit commando leest zijn
	  instructies uit het bestand <code class="filename">Makefile</code>,
	  dat beschrijft hoe de programma's die samen FreeBSD vormen
	  moeten worden gebouwd, in welke volgorde ze gebouwd moeten
	  worden, enzovoort.</p><p>Het algemene formaat van de commandoregel die gebruikt
	  moet worden is als volgt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -x -DVARIABELE doel</code></strong></pre><p>In dit voorbeeld is de optie
	  <code class="option">-<em class="replaceable"><code>x</code></em></code> een optie die
	  wordt meegegeven aan <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>.  In de hulppagina voor
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> staat een voorbeeld van de opties die meegegeven
	  kunnen worden.</p><p><code class="option">-D<em class="replaceable"><code>VARIABELE</code></em></code>
	  geeft een variabele door aan <code class="filename">Makefile</code>.
	  Het gedrag van <code class="filename">Makefile</code> wordt
	  beïnvloed door deze variabele.  Dit zijn dezelfde
	  variabelen die ingesteld worden in
	  <code class="filename">/etc/make.conf</code>.  Deze optie biedt een
	  alternatief om deze opties in te stellen.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DNO_PROFILE doel</code></strong></pre><p>Het bovenstaande commando is een andere manier om aan te
	  geven dat geprofileerde bibliotheken niet gebouwd moeten
	  worden en correspondeert met de onderstaande regel in
	  <code class="filename">/etc/make.conf</code>:</p><pre class="programlisting">NO_PROFILE=    true	#    Avoid compiling profiled libraries</pre><p><em class="replaceable"><code>doel</code></em> geeft <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> aan
	  wat er gedaan moet worden.  Elke
	  <code class="filename">Makefile</code> definieert een aantal van
	  verschillende doelen en het gekozen doel bepaalt wat er
	  gebeurt.</p><p>Sommige doelen staan vermeld in het bestand
	  <code class="filename">Makefile</code>, maar zijn niet geschikt om
	  direct te starten.  Integendeel, deze worden gebruikt door
	  het bouwproces om de benodigde stappen onder te
	  verdelen.</p><p>In veel gevallen hoeven er geen parameters te worden
	  meegegeven aan <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> en dus ziet de commando regel er
	  als volgt uit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make doel</code></strong></pre><p>Waar <em class="replaceable"><code>doel</code></em> een van de vele
	  bouw opties is.  De eerste target moet echter altijd
	  <code class="varname">buildworld</code> zijn.</p><p>Zoals de namen impliceren bouwt
	  <code class="buildtarget">buildworld</code> een compleet nieuwe boom
	  onder <code class="filename">/usr/obj</code> en
	  <code class="buildtarget">installworld</code>, een andere target,
	  installeert deze boom op de huidige machine.</p><p>Het hebben van verschillende opties is handig om twee
	  redenen.  Als eerste biedt het
	  de mogelijkheid om de bouw veilig te doen met de wetenschap
	  dat geen enkel draaiend onderdeel van een systeem geraakt
	  wordt.  De bouw is <span class="quote">&#8220;<span class="quote">zelf ondersteunend</span>&#8221;</span>.
	  Hierdoor kan veilig in multi-user modus
	  <code class="buildtarget">buildworld</code> gedraaid worden.  Het
	  wordt echter nog steeds aangeraden om
	  <code class="buildtarget">installworld</code> in single-user modus te
	  starten.</p><p>Ten tweede geeft het de mogelijkheid om NFS-mounts te
	  gebruiken om meerdere machines in het netwerk bij te werken.
	  Als er drie machines zijn, <code class="systemitem">A</code>,
	  <code class="systemitem">B</code> en <code class="systemitem">C</code>, die bijgewerkt
	  moeten worden, dan kunnen <code class="command">make buildworld</code>
	  en <code class="command">make installworld</code> gedraaid worden op
	  <code class="systemitem">A</code> waarna <code class="systemitem">B</code> en
	  <code class="systemitem">C</code> een NFS-mount kunnen opzetten naar
	  <code class="filename">/usr/src</code> en
	  <code class="filename">/usr/obj</code> op machine <code class="systemitem">A</code>
	  waarna <code class="command">make installworld</code> gedraaid kan
	  worden op <code class="systemitem">B</code> en <code class="systemitem">C</code> om de
	  resultaten de installeren.</p><p>Alhoewel het doel <code class="buildtarget">world</code> nog wel
	  bestaat wordt het gebruik ervan sterk
	  <span class="emphasis"><em>afgeraden</em></span>.</p><p>Voer het volgende commando uit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make buildworld</code></strong></pre><p>Het is mogelijk om de optie <code class="option">-j</code> mee te
	  geven aan <code class="command">make</code>, wat resulteert in meerdere
	  processen die tegelijkertijd draaien.  Dit heeft het meeste
	  effect op machines met meerdere processoren.  Echter, omdat
	  het compilatieproces meer IO-gericht is dan processorgericht,
	  kan het ook nuttig zijn op systemen met één
	  processor.</p><p>Start als volgt op een systeem met één
	  processor:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -j4 buildworld</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> draait dan maximaal 4 processen
	  tegelijkertijd.  In het algemeen blijkt uit de mailinglijsten
	  dat dit de beste resultaten geeft.</p><p>Als er meerdere processoren in een systeem zitten en
	  gebruik gemaakt wordt van een SMP kernel, probeer dan waardes
	  tussen de 6 en 10 en bekijk hoe het systeem reageert.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83119952"></a>24.7.7.3. Doorlooptijd</h4></div></div></div><a id="idp83120592" class="indexterm"></a><p>Veel factoren bepalen de doorlooptijd van het bouwen van
	  een boom, maar redelijk recente machines doen er maar 1 tot
	  2 uur over om de FreeBSD-STABLE boom te bouwen.
	  zonder extra trucjes.  Een FreeBSD-CURRENT boom kan wat langer
	  duren.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="new-kernel"></a>24.7.8. Nieuwe kernel compileren en installeren</h3></div></div></div><a id="idp83123408" class="indexterm"></a><p>Om volledig gebruik te maken van het nieuwe systeem moet de
	kernel opnieuw gecompileerd worden.  Dit is bijna altijd nodig
	omdat sommige geheugenstructuren mogelijkerwijs veranderd zijn
	en programma's als <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> niet werken totdat
	de kernel en de broncode dezelfde versie hebben.</p><p>De simpelste en makkelijkste manier om dit te doen is
	om een kernel te maken die gebaseerd is op
	<code class="filename">GENERIC</code>.  Ondanks dat
	<code class="filename">GENERIC</code> mogelijk niet alle benodigde
	apparaten heeft voor een systeem, hoort het alles te bevatten
	dat nodig is om een systeem te starten in single-user modus.
	Dit is een goede test op de correcte werking van een nieuw
	systeem.  Na het opstarten van <code class="filename">GENERIC</code> en
	een systeemcontrole kan erna een nieuwe kernel gebouwd worden
	gebaseerd op een aangepast kernelinstellingenbestand.</p><p>Op FreeBSD is het belangrijk om de
	<a class="link" href="makeworld.html#make-buildworld" title="24.7.7.2. Basissysteem compileren">wereld opnieuw te bouwen</a>
	voordat een nieuwe kernel gebouwd wordt.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Als een aangepaste kernel gemaakt moet worden en er reeds
	  een instellingenbestand aanwezig is, gebruik dan
	  <code class="literal">KERNCONF=MYKERNEL</code>
	  als volgt:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make buildkernel KERNCONF=MYKERNEL</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installkernel KERNCONF=MYKERNEL</code></strong></pre></div><p>Let op dat als <code class="literal">kern.securelevel</code> een
	waarde hoger dan 1 heeft <span class="emphasis"><em>of</em></span>
	<code class="literal">noschg</code> of gelijksoortige opties geplaatst
	zijn op het binaire kernelbestand, is het misschien nodig om
	terug te gaan naar single-user modus om
	<code class="buildtarget">installkernel</code> uit te voeren.  In
	andere gevallen moet het mogelijk zijn om deze commando's
	zonder problemen uit te voeren in multi-user modus.  Zie
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> voor meer informatie over
	<code class="literal">kern.securelevel</code> en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a> voor
	informatie over diverse bestandsopties.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="new-kernel-singleuser"></a>24.7.9. Opnieuw opstarten in single-user modus</h3></div></div></div><a id="idp83141840" class="indexterm"></a><p>Start met de instructies in <a class="xref" href="makeworld.html#makeworld-singleuser" title="24.7.5. Systeem naar single-user modus brengen">Paragraaf 24.7.5, &#8220;Systeem naar single-user modus brengen&#8221;</a> in single-user modus op om te
	testen of de nieuwe kernel werkt.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="post-installworld-updates"></a>24.7.10. Nieuwe binaire systeembestanden installeren</h3></div></div></div><p>Na het draaien van <code class="command">make buildworld</code> kan
	nu <code class="buildtarget">installworld</code> gebruikt worden om de
	nieuwe binaire systeembestanden te installeren.</p><p>Voer de volgende commando's uit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installworld</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Als er variabelen gespecificeerd zijn op de commandoregel
	  van <code class="command">make buildworld</code> moeten dezelfde
	  variabelen gebruikt worden op de commandoregel van
	  <code class="command">make installworld</code>.  Dit is niet per se
	  waar voor opties zoals <code class="option">-j</code>, die nooit
	  gebruikt mogen worden met
	  <code class="buildtarget">installworld</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Als bijvoorbeeld het volgende commando is
	  uitgevoerd:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DNO_PROFILE buildworld</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">Dan moet het resultaat geïnstalleerd worden
	  met:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DNO_PROFILE installworld</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">Anders wordt geprobeerd geprofileerde bibliotheken te
	  installeren die niet gebouwd zijn tijdens de fase
	  <code class="command">make buildworld</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="make-installworld"></a>24.7.11. Bestanden bijwerken die niet bijgewerkt zijn door
	<code class="command">make installworld</code></h3></div></div></div><p>Het herbouwen van de wereld werkt bepaalde mappen niet
	bij (in het bijzonder <code class="filename">/etc</code>,
	<code class="filename">/var</code> en <code class="filename">/usr</code>) met
	nieuwe of gewijzigde instellingenbestanden.</p><p>De simpelste manier om deze bestanden bij te werken is door
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> te gebruiken, maar het is ook mogelijk
	dit handmatig te doen.  Welke manier er ook gekozen wordt, zorg
	er altijd voor dat een back-up van <code class="filename">/etc</code>
	beschikbaar is voor het geval er iets misgaat.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mergemaster"></a>24.7.11.1. <code class="command">mergemaster</code></h4></div><div><span class="authorgroup">Bijgedragen door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp83176400" class="indexterm"></a><p>Het hulpprogramma <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> is een Bourne script
	  dat helpt bij het bepalen van de verschillen tussen de
	  instellingenbestanden in <code class="filename">/etc</code> en de
	  instellingenbestanden in de broncodeboom
	  <code class="filename">/usr/src/etc</code>.  Deze methode wordt
	  aangeraden om instellingenbestanden van een systeem bijgewerkt
	  te houden met de bestanden die in de broncodeboom staan.</p><p>Het programma wordt gestart met
	  <code class="command">mergemaster</code> op de commandoregel en geeft dan
	  resultaten weer.  <code class="command">mergemaster</code> bouwt dan een
	  tijdelijke root omgeving vanaf <code class="filename">/</code> en vult
	  deze met diverse instellingenbestanden voor een systeem.  Deze
	  bestanden worden vergeleken met de bestanden die
	  geïnstalleerd zijn op een systeem.  Op dit punt worden de
	  bestanden getoond die verschillen in het <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>-formaat,
	  met een <code class="option">+</code> voor toegevoegde of gewijzigde
	  regels en een <code class="option">-</code> voor regels die verwijderd of
	  vervangen zijn.  In de hulppagina voor <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> staat meer
	  informatie over de syntaxis van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> en hoe
	  bestandsverschillen getoond worden.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> toont dan elk bestand dat verschilt en
	  op dit moment is er de mogelijkheid om of het nieuwe bestand te
	  verwijderen (ofwel het tijdelijke bestand), het tijdelijke
	  bestand te installeren zonder enige wijzigingen, het verwerken
	  van het oude bestand in het nieuwe bestand of de resultaten van
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> nogmaals te tonen.</p><p>Als gekozen wordt om het tijdelijke bestand te verwijderen,
	  geeft dit <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> aan dat het huidige bestand niet
	  gewijzigd dient te worden en de nieuwe versie verwijderd kan
	  worden.  Deze optie wordt niet aangeraden, behalve als er geen
	  reden is om het huidige bestand aan te passen.  Op ieder moment
	  kunnen hulpteksten getoond worden door <span class="keycap"><strong>?</strong></span> in te
	  geven op de prompt van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a>.  Als een bestand
	  wordt overgeslagen, dan wordt het weer getoond als alle overige
	  bestanden verwerkt zijn.</p><p>Bij de keuze om het ongewijzigde tijdelijke bestand te
	  installeren wordt het huidige bestand vervangen door het
	  nieuwe.  Voor de meeste ongewijzigde bestanden is dit de beste
	  optie.</p><p>Als ervoor gekozen wordt om de wijzigingen te verwerken
	  wordt er een tekstverwerker gestart die de inhoud van beide
	  bestanden toont.  De verschillen kunnen verwerkt worden terwijl
	  beide bestanden naast elkaar op het scherm staan.  Hier kunnen
	  delen gekozen worden die gezamenlijk een nieuw bestand
	  opleveren.  Als de bestanden zij aan zij vergeleken worden,
	  wordt met de toets <span class="keycap"><strong>l</strong></span> de inhoud links
	  geselecteerd en met de toets <span class="keycap"><strong>r</strong></span> de inhoud
	  rechts geselecteerd.  Het eindresultaat bestaat uit delen van
	  beide bestanden die erna geinstalleerd kunnen worden.  Deze
	  optie wordt voornamelijk gebruikt voor bestanden die gewijzigd
	  zijn door de beheerder.</p><p>Als ervoor gekozen wordt om de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> resultaten nog
	  een keer te tonen, worden dezelfde verschillen getoond
	  zoals <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> deed voordat een optie gevraagd
	  werd.</p><p>Zodra <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> klaar is met de systeembestanden
	  worden er andere opties getoond.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> kan
	  vragen of het wachtwoordbestand opnieuw gebouwd moet worden.
	  Als laatste wordt een optie getoond om
	  alle overgebleven tijdelijke bestanden te verwijderen.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83197648"></a>24.7.11.2. Handmatig bijwerken</h4></div></div></div><p>Bij handmatig bijwerken kunnen de bestanden van
	  <code class="filename">/usr/src/etc</code> niet zomaar naar
	  <code class="filename">/etc</code> gekopieerd worden om een werkend
	  systeem te krijgen.  Sommige van deze bestanden moeten eerst
	  <span class="quote">&#8220;<span class="quote">geïnstalleerd</span>&#8221;</span> worden.  Dit omdat de map
	  <code class="filename">/usr/src/etc</code> <span class="emphasis"><em>geen</em></span>
	  kopie is van <code class="filename">/etc</code>.  Daarnaast staan er
	  in <code class="filename">/etc</code> bestanden die niet in
	  <code class="filename">/usr/src/etc</code> staan.</p><p>Als <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> gebruikt wordt (zoals
	  aangeraden), kan doorgegaan worden met het <a class="link" href="makeworld.html#updating-upgrading-rebooting" title="24.7.12. Herstarten">volgende
	    onderdeel</a>.</p><p>De simpelste manier om met de hand bij te werken, is de
	  bestanden in een nieuwe map installeren en daarna naar
	  verschillen tussen de bestanden te zoeken.</p><div xmlns="" class="warning"><h3 class="admontitle">Back-up maken van <code xmlns="http://www.w3.org/1999/xhtml" class="filename">/etc</code>: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ondanks dat, in theorie, niets in deze map automatisch
	    wordt aangepast, is het altijd beter om daar zeker van te
	    zijn.  Dus kopieer de bestaande <code class="filename">/etc</code>
	    naar een veilige locatie.  Zoals bijvoorbeeld met het
	    volgende commando:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp -Rp /etc /etc.old</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml"><code class="option">-R</code> maakt een recursieve kopie,
	    <code class="option">-p</code> bewaart tijden, eigenaarschap,
	    enzovoorts op bestanden.</p></div><p>Er moet een dummyset van mappen gemaakt worden om de
	  nieuwe <code class="filename">/etc</code> en andere bestanden in te
	  installeren.  <code class="filename">/var/tmp/root</code> is een
	  redelijke keuze en er zijn hier een aantal benodigde
	  submappen aanwezig:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/tmp/root</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/etc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make DESTDIR=/var/tmp/root distrib-dirs distribution</code></strong></pre><p>Dit maakt de benodigde mappenstructuur en installeert de
	  bestanden.  Een groot deel van de submappen die gemaakt zijn
	  in <code class="filename">/var/tmp/root</code> zijn leeg en moeten
	  verwijderd worden.  De simpelste manier om dit te doen
	  is:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /var/tmp/root</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>find -d . -type d | xargs rmdir 2&gt;/dev/null</code></strong></pre><p>Dit verwijderd alle lege mappen.  De standaardfout wordt
	  omgeleid naar <code class="filename">/dev/null</code> om
	  waarschuwingen te voorkomen over mappen die niet leeg
	  zijn.</p><p><code class="filename">/var/tmp/root</code> bevat nu alle
	  bestanden die geplaatst zouden moeten worden op de juiste
	  locaties in <code class="filename">/</code>.  Er moet nu in de
	  bestanden gekeken worden om te bepalen of deze verschillen
	  met de huidige betanden.</p><p>Let op dat sommige van de bestanden die
	  geïnstalleerd zijn in <code class="filename">/var/tmp/root</code>
	  beginnen met een <span class="quote">&#8220;<span class="quote">.</span>&#8221;</span>.  Op het moment van
	  schrijven hebben alleen shell opstartscripts in
	  <code class="filename">/var/tmp/root</code> en
	  <code class="filename">/var/tmp/root/root</code> dit, maar er kunnen
	  ook andere zijn.  Zorg ervoor dat <code class="command">ls -a</code>
	  gebruikt wordt om deze bestanden te zien.</p><p>De simpelste manier om twee bestanden te vergelijken is
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> gebruiken:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>diff /etc/shells /var/tmp/root/etc/shells</code></strong></pre><p>Dit toont de verschillen tussen de huidige
	  <code class="filename">/etc/shells</code> en de nieuwe
	  <code class="filename">/var/tmp/root/etc/shells</code>.  Gebruik dit
	  om te bepalen of de wijzigingen gemigreerd moeten worden of
	  dat het oude bestand gekopieërd moet worden.</p><div xmlns="" class="tip"><h3 class="admontitle">Voeg aan de naam van de nieuwe rootmap
	    (<code xmlns="http://www.w3.org/1999/xhtml" class="filename">/var/tmp/root</code>) een tijdsindicatie toe
	    zodat makkelijk verschillen tussen versies bepaald kunnen
	    worden: </h3><p xmlns="http://www.w3.org/1999/xhtml">Als de wereld regelmatig wordt herbouwd moeten
	    bestanden in <code class="filename">/etc</code> ook regelmatig
	    bijgewerkt moeten worden, wat een vervelend werkje kan
	    zijn.</p><p xmlns="http://www.w3.org/1999/xhtml">Dit proces kan versneld worden door een kopie te
	    bewaren van de bestanden die gemigreerd zijn naar
	    <code class="filename">/etc</code>.  De volgende procedure geeft een
	    idee over hoe dit gedaan kan worden.</p><div xmlns="http://www.w3.org/1999/xhtml" class="procedure"><ol class="procedure" type="1"><li class="step"><p>Maak de wereld zoals normaal.  Als
		<code class="filename">/etc</code> en de andere mappen
		bijgewerkt moeten worden, geef dan de doelmap een naam
		gebaseerd op de huidige datum.  Op 14 februari 1998
		wordt dat als volgt gedaan:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/tmp/root-19980214</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/etc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make DESTDIR=/var/tmp/root-19980214 \
    distrib-dirs distribution</code></strong></pre></li><li class="step"><p>Migreer de wijzigingen van deze map zoals hierboven
		beschreven.</p><p>Verwijder de map
		<code class="filename">/var/tmp/root-19980214</code>
		<span class="emphasis"><em>niet</em></span> na afronden.</p></li><li class="step"><p>Als de laatste versie van de broncode gedownload en
		opnieuw gemaakt is, volg stap 1.  Dit geeft een nieuwe
		map die wellicht
		<code class="filename">/var/tmp/root-19980221</code> heet (als
		er een week zit tussen het bijwerken).</p></li><li class="step"><p>De verschillen die gemaakt zijn in de
		tussenliggende week kunnen nu getoond worden door met
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> een recursieve diff te maken tussen de
		twee mappen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /var/tmp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>diff -r root-19980214 root-19980221</code></strong></pre><p>Vaak is dit een kleinere set aan verschillen dan
		tussen <code class="filename">/var/tmp/root-19980221/etc</code>
		en <code class="filename">/etc</code>.  Omdat de set
		verschillen kleiner is, is het makkelijker om deze te
		migreren naar de map <code class="filename">/etc</code>.</p></li><li class="step"><p>De oudste van de twee
		<code class="filename">/var/tmp/root-*</code>-mappen kan nu
		verwijderd worden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rm -rf /var/tmp/root-19980214</code></strong></pre></li><li class="step"><p>Herhaal dit proces elke keer als er wijzigingen
		gemigreerd moeten worden naar
		<code class="filename">/etc</code>.</p></li></ol></div><p xmlns="http://www.w3.org/1999/xhtml">Met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=date&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">date</span>(1)</span></a> kan het maken van de mappen
	    geautomatiseerd worden:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/tmp/root-`date "+%Y%m%d"`</code></strong></pre></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-upgrading-rebooting"></a>24.7.12. Herstarten</h3></div></div></div><p>Dit was het.  Na een controle of alles op de juiste plaats
	staat kan het systeem herstart worden.  Dan kan met een simpele
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shutdown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">shutdown</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown -r now</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83269328"></a>24.7.13. Klaar</h3></div></div></div><p>Het FreeBSD systeem is nu succesvol bijgewerkt.
	Gefeliciteerd!</p><p>Als er dingen misgingen is het makkelijk om een deel van
	het systeem opnieuw te bouwen.  Als bijvoorbeeld per ongeluk
	<code class="filename">/etc/magic</code> verwijderd is als onderdeel
	van de upgrade of door het samenvoegen van
	<code class="filename">/etc</code>, dan werkt <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=file&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">file</span>(1)</span></a> niet meer.
	Dat kan als volgt opgelost worden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.bin/file</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make all install</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-questions"></a>24.7.14. Vragen</h3></div></div></div><div class="qandaset"><a id="idp83275088"></a><dl><dt>24.7.14.1. <a href="makeworld.html#idp83275344">Moet de wereld opnieuw gemaakt worden voor elke
	      wijziging?</a></dt><dt>24.7.14.2. <a href="makeworld.html#idp83281872">Het compileren gaat fout met veel meldingen van
	      signal 11
	      (of andere signalnummers).  Wat is er aan de hand?</a></dt><dt>24.7.14.3. <a href="makeworld.html#idp83285200">Kan /usr/obj verwijderd worden
	      na afloop?</a></dt><dt>24.7.14.4. <a href="makeworld.html#idp83298000">Kunnen onderbroken builds gecontinueerd
	      worden?</a></dt><dt>24.7.14.5. <a href="makeworld.html#idp83309136">Kan kan de wereld bouwen versneld worden?</a></dt><dt>24.7.14.6. <a href="makeworld.html#idp83344848">Wat te doen als er iets mis gaat?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp83275344"></a><a id="idp83275600"></a><p><strong>24.7.14.1.</strong></p></td><td align="left" valign="top"><p>Moet de wereld opnieuw gemaakt worden voor elke
	      wijziging?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Op deze vraag bestaat geen eenvoudig antwoord, omdat
	      dit afhangt van de aard van de wijziging.  Als
	      bijvoorbeeld net <span class="application">CVSup</span> is
	      gedraaid en de onderstaande bestanden zijn bijgewerkt,
	      dan is het waarschijnlijk niet de moeite waard om de
	      volledige wereld te herbouwen:</p><pre class="screen"><code class="filename">src/games/cribbage/instr.c</code>
<code class="filename">src/games/sail/pl_main.c</code>
<code class="filename">src/release/sysinstall/config.c</code>
<code class="filename">src/release/sysinstall/media.c</code>
<code class="filename">src/share/mk/bsd.port.mk</code></pre><p>Dan is het handiger om naar de juiste submappen te
	      gaan, daar <code class="command">make all install</code> uit te
	      voeren en dat is het zo'n beetje.  Maar als er iets
	      wezenlijks is veranderd, bijvoorbeeld
	      <code class="filename">src/lib/libc/stdlib</code>, dan dient ofwel
	      de wereld herbouwd te worden of tenminste die delen die
	      statisch gelinkt zijn (en ook al het andere dat statisch
	      gelinkt is en onderdeel is van een systeem).</p><p>Uiteindelijk beslist een beheerder zelf.  Misschien
	      vindt die het prettig iedere twee weken de wereld te
	      herbouwen terwijl de wijzigingen in die twee weken
	      binnenkomen.  Een andere beheerder herbouwt alleen die
	      onderdelen die veranderd zijn en vertrouwt erop dat hij
	      alle afhankelijkheden in de gaten heeft.</p><p>Natuurlijk hangt het ook af van de keuze hoe vaak het
	      wenselijk is bij te werken en of FreeBSD-STABLE of
	      FreeBSD-CURRENT wordt bijgehouden.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp83281872"></a><a id="idp83282128"></a><p><strong>24.7.14.2.</strong></p></td><td align="left" valign="top"><p>Het compileren gaat fout met veel meldingen van
	      signal 11<a id="idp83282640" class="indexterm"></a>
	      (of andere signalnummers).  Wat is er aan de hand?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Dit wijst meestal op hardwareproblemen.  Het
	      (her)bouwen van de wereld is een prima manier om een
	      stresstest op hardware uit te voeren en hierdoor komen
	      vaak geheugenproblemen bovendrijven.  Die resulteren vaak
	      in een compiler die op mysterieuze wijze overlijdt na het
	      ontvangen van vreemde signalen.</p><p>Dit probleem is nog duidelijker als na het herstarten
	      van de make het proces opnieuw stopt op een ander
	      punt.</p><p>Hier biedt niets anders uitkomst dan componenten in
	      een systeem wisselen om uit te zoeken welk component er
	      faalt.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp83285200"></a><a id="idp83285456"></a><p><strong>24.7.14.3.</strong></p></td><td align="left" valign="top"><p>Kan <code class="filename">/usr/obj</code> verwijderd worden
	      na afloop?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Het korte antwoord is ja.</p><p><code class="filename">/usr/obj</code> bevat alle
	      objectbestanden die tijdens het compileren zijn gemaakt.
	      Normaliter is een van de eerste stappen in het
	      <code class="command">make buildworld</code> proces deze map
	      verwijderen en een verse start maken.  In dit geval heeft
	      het behouden van <code class="filename">/usr/obj</code> na het
	      afronden weinig zin en geeft het ook nogal wat extra
	      vrije schijfruimte (ongeveer 2 GB).</p><p>Als er veel kennis aanwezig is bij een beheerder, dan
	      kan <code class="command">make buildworld</code> aangegeven worden
	      deze stap over te slaan.  Hierdoor draaien volgende
	      builds veel sneller, omdat veel broncode niet opnieuw
	      gecompileerd hoeft te worden.  De andere kant van de
	      medaille is dat er subtiele afhankelijkheidsproblemen
	      kunnen ontstaan, waardoor een build op bijzondere wijze
	      kan falen.  Hierdoor onstaat regelmatig ruis op FreeBSD
	      mailinglijsten als er iemand klaagt dat zijn build faalt,
	      terwijl hij zich niet realiseert dat dit komt doordat hij
	      zijn updateproces niet volgens het boekje heeft
	      uitgevoerd.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp83298000"></a><a id="idp83298256"></a><p><strong>24.7.14.4.</strong></p></td><td align="left" valign="top"><p>Kunnen onderbroken builds gecontinueerd
	      worden?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Dit hangt af van hoever een systeem was voordat een
	      probleem gevonden werd.</p><p><span class="emphasis"><em>Normaal gesproken</em></span> (en dit is
	      geen vaste regel) maakt het proces <code class="command">make
		buildworld</code> nieuwe kopieën van essentiele
	      hulpprogramma's (zoals <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gcc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gcc</span>(1)</span></a> en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>) en de
	      systeembibliotheken.  Deze hulpprogramma's en
	      bibliotheken worden daarna geïnstalleerd.  De nieuwe
	      hulpprogramma's en bibliotheken worden daarna gebruikt om
	      zichzelf opnieuw op te bouwen en wederom te installeren.
	      Het complete systeem (nu met gewone programma's zoals
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a> en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=grep&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">grep</span>(1)</span></a>) wordt daarna opnieuw gebouwd
	      met de nieuwe systeembestanden.</p><p>Als een systeem in de laatste fase zit (wat uit de
	      uitvoer blijkt) kan dit redelijk veilig gedaan
	      worden:</p><pre class="screen"><span class="emphasis"><em>&#8230; fix the problem &#8230;</em></span>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make -DNO_CLEAN all</code></strong></pre><p>Dit maakt het werk van de vorige <code class="command">make
		buildworld</code> niet ongedaan.</p><p>Als het onderstaande bericht in de uitvoer van
	      <code class="command">make buildworld</code> staat, dan is het
	      redelijk veilig om het te doen:</p><pre class="screen">--------------------------------------------------------------
Building everything..
--------------------------------------------------------------</pre><p>Als dat bericht er niet is, of er is onzekerheid
	      over, dan is het altijd beter om de build opnieuw te
	      starten vanaf het begin.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp83309136"></a><a id="idp83309392"></a><p><strong>24.7.14.5.</strong></p></td><td align="left" valign="top"><p>Kan kan de wereld bouwen versneld worden?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Draai in single-user modus;</p></li><li class="listitem"><p>Zet de mappen <code class="filename">/usr/src</code> en
		  <code class="filename">/usr/obj</code> op aparte
		  bestandssystemen die op aparte schijven staan.  Hang
		  deze schijven als mogelijk aan aparte
		  schijfcontrollers;</p></li><li class="listitem"><p>Nog beter, verspreid de bestandssystemen over
		  meerdere schijven via het apparaat <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
		  (concatenated disk driver);</p></li><li class="listitem"><p>Zet profiling uit (voeg
		  <span class="quote">&#8220;<span class="quote">NO_PROFILE=true</span>&#8221;</span> toe aan
		  <code class="filename">/etc/make.conf</code>).  Het is zeer
		  waarschijnlijk niet nodig;</p></li><li class="listitem"><p>Geef de optie
		  <code class="option">-j<em class="replaceable"><code>n</code></em></code> mee
		  aan <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> om meerdere processen parallel te
		  laten lopen.  Dit helpt in de meeste gevallen,
		  onafhankelijk of er gewerkt wordt op een systeem met
		  één of meerdere processoren;</p></li><li class="listitem"><p>Het bestandssysteem dat
		  <code class="filename">/usr/src</code> bevat, kan (opnieuw)
		  gemount worden met de optie <code class="option">noatime</code>.
		  Dit voorkomt dat het bestandssysteem de
		  toegangsmomenten registreert.  Deze informatie is
		  waarschijnlijk toch niet nodig.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -u -o noatime /usr/src</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Waarschuwing: </h3><p xmlns="http://www.w3.org/1999/xhtml">In dit voorbeeld wordt aangenomen dat
		    <code class="filename">/usr/src</code> op zijn eigen
		    bestandssysteem staat.  Als dit niet het geval is
		    (bijvoorbeeld als het onderdeel is van
		    <code class="filename">/usr</code>), dan moet het mountpunt
		    voor dat bestandssysteem gebruikt moeten worden
		    en niet <code class="filename">/usr/src</code>;</p></div></li><li class="listitem"><p>Het bestandssysteem dat
		  <code class="filename">/usr/obj</code> gevat kan (opnieuw)
		  worden gemount met de optie <code class="option">async</code>.
		  Dit zorgt ervoor dat schrijfacties naar een schijf
		  asynchroon plaatsvinden.  In andere woorden: de
		  schrijfactie wordt direct uitgevoerd en de gegevens
		  worden later naar de schijf geschreven.  Dit stelt
		  het systeem in staat om data geclusterd weg te
		  schrijven, wat een grote prestatieverbetering kan
		  opleveren.</p><div xmlns="" class="warning"><h3 class="admontitle">Waarschuwing: </h3><p xmlns="http://www.w3.org/1999/xhtml">Houd er rekening mee dat deze optie het
		    bestandssysteem kwetsbaarder maakt.  Met deze optie
		    is er een vergrote kans dat, indien er een
		    stroomstoring optreed, het bestandssysteem in een
		    niet meer te herstellen staat komt als de machine
		    herstart.</p><p xmlns="http://www.w3.org/1999/xhtml">Als op dit bestandssysteem alleen
		    <code class="filename">/usr/obj</code> staat, is dit geen
		    probleem.  Als er andere belangrijke gegevens op
		    hetzelfde bestandssysteem staan, zorg er dan voor
		    dat er verse back-ups zijn voordat deze optie
		    aangezet wordt.</p></div><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -u -o async /usr/obj</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Waarschuwing: </h3><p xmlns="http://www.w3.org/1999/xhtml">Zorg ervoor, zoals al eerder is aangegeven, dat
		    als <code class="filename">/usr/obj</code> niet op een eigen
		    bestandssysteem staat, het juiste mountpunt wordt
		    gebruikt.</p></div></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp83344848"></a><a id="idp83345104"></a><p><strong>24.7.14.6.</strong></p></td><td align="left" valign="top"><p>Wat te doen als er iets mis gaat?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Zorg ervoor dat het systeem geen rommel meer bevat
	      van eerdere builds.  Het volgende helpt daarbij:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags -R noschg /usr/obj/usr</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm -rf /usr/obj/usr</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong></pre><p>Inderdaad, <code class="command">make cleandir</code> moet twee
	      keer gedraaid worden.</p><p>Herstart daarna het complete proces vanaf
	      <code class="command">make buildworld</code>.</p><p>Als er nog steeds problemen zijn, stuur dan de
	      foutmelding en de uitvoer van <code class="command">uname -a</code>
	      naar de <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">FreeBSD algemene vragen mailinglijst</a>.  Wees bereid aanvullende vragen
	      over het systeem te beantwoorden!</p></td></tr></tbody></table></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="synching.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="updating-upgrading.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="make-delete-old.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">24.6. Broncode synchroniseren </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 24.8. Het verwijderen van overbodige bestanden, directories en
      bibliotheken</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>