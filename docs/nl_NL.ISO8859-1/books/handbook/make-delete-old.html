<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>24.8. Het verwijderen van overbodige bestanden, directories en bibliotheken</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="updating-upgrading.html" title="Hoofdstuk 24. FreeBSD updaten en upgraden" /><link rel="prev" href="makeworld.html" title="24.7. De &#8220;wereld&#8221; opnieuw bouwen" /><link rel="next" href="small-lan.html" title="24.9. Meerdere machines bijwerken" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">24.8. Het verwijderen van overbodige bestanden, directories en
      bibliotheken</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="makeworld.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 24. FreeBSD updaten en upgraden</th><td width="20%" align="right"> <a accesskey="n" href="small-lan.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="make-delete-old"></a>24.8. Het verwijderen van overbodige bestanden, directories en
      bibliotheken</h2></div><div><span class="authorgroup">Gebaseerd op notities van <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Antn</span> <span class="surname">Shterenlikht</span></span>. </span></div></div></div><a id="idp83398736" class="indexterm"></a><p>Als onderdeel van de FreeBSD ontwikkel levenscyclus kan het van
      tijd tot tijd gebeuren dat bestanden en de inhoud ervan overbodig
      worden.  Dit kan komen doordat de functionaliteit ergens anders
      geïmplementeerd is, het versienummer van de bibliotheek
      veranderd is of hij is totaal van het systeem verdwenen.  Dit is
      inclusief oude bestanden, bibliotheken en directories welke
      verwijderd moeten worden bij het updaten van het systeem.  Het
      voordeel voor de gebruiker is dat het systeem niet vervuild wordt
      met oude bestanden die onnodig ruimte innemen op het opslag (en
      back-up) systeem.  Ook is het zo dat als de oude bibliotheek een
      beveiligings of stabiliteits probleem had, er moet worden geupdate
      naar de nieuwere bibliotheek om het systeem veilig te houden en te
      voorkomen dat er crashes komen door de oude implementatie van de
      bibliotheek.  De bestanden, directories en bibliotheken welke als
      overbodig worden gezien zijn beschreven in
      <code class="filename">/usr/src/ObsoleteFiles.inc</code>.  De volgende
      instructies zullen helpen om deze verouderde bestanden te verwijderen
      tijdens het systeem upgrade proces.</p><p>Er wordt aangenomen dat de stappen gevolgd worden zoals uitgelegd
      in <a class="xref" href="makeworld.html#canonical-build" title="24.7.1. De universele wijze om een systeem bij te werken">Paragraaf 24.7.1, &#8220;De universele wijze om een systeem bij te werken&#8221;</a>.  Na het <code class="command">make
      installworld</code> commando en het daarop
      volgende <code class="command">mergemaster</code> commando succesvol uitgevoerd zijn
      kan er op de volgende manier gecontroleerd worden voor verouderde
      bestanden en bibliotheken:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make check-old</code></strong></pre><p>Als er verouderde bestanden gevonden worden kunnen deze verwijderd
      worden door het volgende commando:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make delete-old</code></strong></pre><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">Zie het <code class="filename">/usr/src/Makefile</code>
	bestand voor meer interessante targets.</p></div><p>Er wordt een prompt getoond voordat elk verouderd bestand wordt
      verwijderd.  Deze prompt kan worden overgeslagen en het systeem deze
      bestanden automatisch laten verwijderen door gebruik te maken van de
      <code class="varname">BATCH_DELETE_OLD_FILES</code> make variabele als volgt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DBATCH_DELETE_OLD_FILES delete-old</code></strong></pre><p>Dit kan ook worden gedaan door deze commando's door
      <code class="command">yes</code> te pipen als volgt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>yes|make delete-old</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Waarschuwing: </h3><p xmlns="http://www.w3.org/1999/xhtml">Het verwijderen van verouderde bestanden zal applicaties
	stuk maken die nog gebruik maken van de overbodige bestanden.
	Dit is zeker waar voor oude bibliotheken.  In de meeste gevallen
	moeten de programma's, ports of bibliotheken opnieuw gecompileerd
	worden voordat
	<code class="command">make delete-old-libs</code>
	wordt uitgevoerd.</p></div><p>Gereedschappen om gedeelde bibliotheek afhankelijkheden te controleren
      zijn beschikbaar in de Ports Collectie in <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/libchk/pkg-descr">sysutils/libchk</a> of <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/bsdadminscripts/pkg-descr">sysutils/bsdadminscripts</a>.</p><p>Overbodige gedeelde bibliotheken kunnen conflicteren met
      nieuwere bibliotheken welke berichten zoals deze kunnen
      veroorzaken:</p><pre class="screen">/usr/bin/ld: warning: libz.so.4, needed by /usr/local/lib/libtiff.so, may conflict with libz.so.5
/usr/bin/ld: warning: librpcsvc.so.4, needed by /usr/local/lib/libXext.so, may conflict with librpcsvc.so.5</pre><p>Om deze problemen op te lossen moet bepaald worden welke port
      deze bibliotheek heeft geïnstalleerd:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_info -W /usr/local/lib/libtiff.so</code></strong>
/usr/local/lib/libtiff.so was installed by package tiff-3.9.4
<code class="prompt">#</code> <strong class="userinput"><code>pkg_info -W /usr/local/lib/libXext.so</code></strong>
/usr/local/lib/libXext.so was installed by package libXext-1.1.1,1</pre><p>Deïnstalleer, herbouw en herinstalleer de port.  De <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portmaster/pkg-descr">ports-mgmt/portmaster</a> en <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a> gereedschappen kunnen
      gebruikt worden om deze processen te automatiseren.  Nadat zeker is dat
      alle ports opnieuw gebouwd zijn, en de oude bibliotheken niet meer
      gebruikt worden, kunnen deze verwijderd worden met het volgende
      commando:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make delete-old-libs</code></strong></pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="makeworld.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="updating-upgrading.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="small-lan.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">24.7. De <span class="quote">&#8220;<span class="quote">wereld</span>&#8221;</span> opnieuw bouwen </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 24.9. Meerdere machines bijwerken</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>