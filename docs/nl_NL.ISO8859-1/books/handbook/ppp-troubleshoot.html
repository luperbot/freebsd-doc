<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>27.4. Het problemen oplossen van PPP-verbindingen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="ppp-and-slip.html" title="Hoofdstuk 27. PPP en SLIP" /><link rel="prev" href="ppp.html" title="27.3. Kernel-PPP gebruiken" /><link rel="next" href="pppoe.html" title="27.5. PPP gebruiken over Ethernet (PPPoE)" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">27.4. Het problemen oplossen van
      <acronym class="acronym">PPP</acronym>-verbindingen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ppp.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 27. PPP en SLIP</th><td width="20%" align="right"> <a accesskey="n" href="pppoe.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ppp-troubleshoot"></a>27.4. Het problemen oplossen van
      <acronym class="acronym">PPP</acronym>-verbindingen</h2></div><div><span class="authorgroup">Bijgedragen door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp84949584" class="indexterm"></a><p>Deze sectie behandelt een paar problemen die kunnen
      optreden wanneer PPP wordt gebruikt over een modemverbinding.
      Bijvoorbeeld, misschien moet u exact weten wat de prompt is
      die het systeem waarop u inbelt presenteert.  Sommige
      providers presenteren de <code class="literal">ssword</code>
      prompt terwijl anderen <code class="literal">password</code> tonen
      als het <code class="command">ppp</code> script niet goed geschreven is
      en de inlogin poging faalt.  De meest standaard manier om
      <code class="command">ppp</code> verbindingen te onderzoeken op problemen
      is door handmatig een connectie op te zetten.  De volgende
      informatie helpt u om stap voor stap een handmatige connectie op
      te zetten.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84960976"></a>27.4.1. Controleer de apparaatknooppunten</h3></div></div></div><p>Als er een eigen kernel gebruikt wordt, vergeet dan niet om
	de volgende regel in uw kernelinstellingenbestand op te
	nemen:</p><pre class="programlisting">device	uart</pre><p>Het apparaat <code class="filename">uart</code> is al in de kernel
	<code class="literal">GENERIC</code> opgenomen, dus zijn er in dit geval
	geen extra stappen nodig.  Controleer de resultaten van het
	commando <code class="command">dmesg</code> voor het modemapparaat door
	middel van:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dmesg | grep uart</code></strong></pre><p>U zou enige informatie moeten ontvangen over de
	<code class="filename">uart</code> apparaten.  Deze bevinden zich op
	de COM-poorten die we nodig hebben.  Als uw modem zich gedraagt
	als een standaard seriële poort zou u deze moeten vinden
	als zijnde <code class="filename">uart1</code> of
	<code class="filename">COM2</code>.  Als dat klopt hoeft u de kernel
	niet opnieuw te bouwen.  Wanneer u de sio-apparaten controleert
	en het modem is op <code class="filename">uart1</code> te vinden of als
	<code class="filename">COM2</code> als u zich onder <span class="trademark">MS-DOS</span>® bevindt,
	dan is uw modemapparaat
	<code class="filename">/dev/cuau1</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84976720"></a>27.4.2. Handmatig verbinding maken</h3></div></div></div><p>Verbinding maken met het internet door handmatig controle
	te hebben over <code class="command">ppp</code> is snel, makkelijk en een
	geweldige manier om problemen te vinden bij een verbinding
	of zelfs voor alleen het verkrijgen van inforamtie over hoe uw
	provider de <code class="command">ppp</code> cliënt verbindingen
	behandelt.  Laten we starten met <span class="application">PPP</span>
	vanaf de commando regel.  Let op dat in al onze voorbeelden we
	gebruik maken van <span class="emphasis"><em>example</em></span> als hostnaam
	van de machine die <span class="application">PPP</span> draait.  U
	start <code class="command">ppp</code> door enkel het commando
	<code class="command">ppp</code> te typen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp</code></strong></pre><p>We hebben nu <code class="command">ppp</code> gestart.</p><pre class="screen">ppp ON example&gt; <strong class="userinput"><code>set device /dev/cuau1</code></strong></pre><p>We stellen ons modem in, in dit geval is dat
	<code class="filename">cuau1</code>.</p><pre class="screen">ppp ON example&gt; <strong class="userinput"><code>set speed 115200</code></strong></pre><p>We stellen de verbindings snelheid in, in dit geval
	gebruiken we 115,200 <acronym class="acronym">kbps</acronym>.</p><pre class="screen">ppp ON example&gt; <strong class="userinput"><code>enable dns</code></strong></pre><p>Vertel <code class="command">ppp</code> om onze naam vertaler te
	configuren, en de juiste naamserver regels toe te voegen aan
	<code class="filename">/etc/resolv.conf</code>.  Als <code class="command">ppp</code>
	onze hostnaam niet kan bepalen, kunnen we deze later
	instellen.</p><pre class="screen">ppp ON example&gt; <strong class="userinput"><code>term</code></strong></pre><p>Wissel naar <span class="quote">&#8220;<span class="quote">terminal</span>&#8221;</span> mode zodat we handmatig
	het modem kunnen bedienen.</p><pre class="programlisting">deflink: Entering terminal mode on <code class="filename">/dev/cuau1</code>
type '~h' for help</pre><pre class="screen"><strong class="userinput"><code>at</code></strong>
OK
<strong class="userinput"><code>atdt123456789</code></strong></pre><p>Gebruik <code class="command">at</code> om het modem te initialiseren,
	en daarna <code class="command">atdt</code> en het nummer voor uw provider
	om het inbel proces te beginnen.</p><pre class="screen">CONNECT</pre><p>Bevestiging van de verbinding, als we tegen problemen
	aanlopen met de verbinding, welke niet gerelateerd zijn aan de
	hardware, is dit de plek om te beginnen om de problemen op te
	lossen.</p><pre class="screen">provider login:<strong class="userinput"><code>myusername</code></strong></pre><p>Hier wordt u gevraagd om een gebruikersnaam.  Geef de
	gebruikersnaam op welke aangeleverd is door de provider.</p><pre class="screen">provider pass:<strong class="userinput"><code>mypassword</code></strong></pre><p>Deze keer worden we gevraagd voor een wachtwoord.
	Vul uw wachtwoord in welke u is aangeleverd door de provider.
	Net zoals het aanloggen op FreeBSD zal het wachtwoord niet
	getoond worden.</p><pre class="screen">Shell or PPP:<strong class="userinput"><code>ppp</code></strong></pre><p>Afhankelijk van uw provider wordt deze prompt wellicht
	nooit getoond.  Hier wordt ons gevraagd of we een shell willen
	starten op de host van de provider, of dat we
	<code class="command">ppp</code> willen starten.  In dit geval is er
	gekozen voor <code class="command">ppp</code> omdat we een internet
	verbinding willen.</p><pre class="screen">Ppp ON example&gt;</pre><p>Let op dat in dit voorbeeld de eerste <code class="option">p</code>
	een hoofdletter geworden is.  Dit geeft aan dat we succesvol
	verbonden zijn met de provider.</p><pre class="screen">PPp ON example&gt;</pre><p>We hebben ons succesvol geauthenticeerd bij onze
	provider en we wachten op een IP-adres dat ons wordt
	toegewezen.</p><pre class="screen">PPP ON example&gt;</pre><p>We hebben een <acronym class="acronym">IP</acronym> adres verkregen en
	hebben succesvol een verbinding opgebouwd.</p><pre class="screen">PPP ON example&gt;<strong class="userinput"><code>add default HISADDR</code></strong></pre><p>Hier wordt een standaard route toegevoegd.  Deze moet worden
	toegevoegd voordat we kunnen communiceren met de buitenwereld
	aangezien de enige verbinding op dit moment met de andere machine
	is.  Als dit niet lukt omdat er al een route bestaat, kan er een
	<span class="quote">&#8220;<span class="quote">bang</span>&#8221;</span> karakter (<code class="literal">!</code>) geplaatst
	worden voor de <code class="option">add</code> optie.  Als alternatief kan
	dit ook gedaan worden voordat de verbinding opgezet wordt,
	waarna een nieuwe route onderhandeld wordt.</p><p>Als alles goed gegaan is, zou er nu een actieve
	verbinding moeten zijn met het internet, welke in de
	achtergrond gezet kan worden door <span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>z</strong></span>
	te gebruiken.  Als u ziet dat het commando <code class="command">PPP</code>
	terugkeert naar <code class="command">ppp</code> is de verbinding afgebroken.
	Dit is goed om te weten, aangezien dit de status van de verbinding
	toont.  Hoofdletter P's betekenen dat er een verbinding is met
	de provider, en kleine letters betekend dat de verbinding
	verloren is gegaan om welke reden dan ook.
	<code class="command">ppp</code> kent alleen deze twee statussen.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85012432"></a>27.4.2.1. Debuggen</h4></div></div></div><p>Als u een directe lijn heeft en geen verbinding kan
	  maken, zet dan hardware flow <acronym class="acronym">CTS/RTS</acronym> uit
	  met de <code class="option">set ctsrts off</code> optie.  Dit is meestal
	  het geval voor een <span class="application">PPP</span> terminal
	  server waar <span class="application">PPP</span> hangt wanneer deze
	  probeert te schrijven naar uw communicatie link, dus moet deze
	  wachten op een <acronym class="acronym">CTS</acronym> of een Clear To Send
	  signaal welke misschien nooit komt.  Als u deze optie gebruikt,
	  moet u ook de <code class="option">set accmap</code> optie gebruiken
	  welke benodigd kan zijn om hardware afhankelijkheden te
	  omzeilen door bepaalde karakters over en weer te sturen,
	  meestal XON/XOFF.  Zie de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> handleiding voor meer
	  informatie over deze optie en hoe deze gebruikt kan worden.</p><p>Als u een ouder modem heeft, kan het voorkomen dat u ook
	  de <code class="option">set parity even</code> optie moet gebruiken.
	  De parity is standaard ingesteld op none maar wordt gebruikt
	  voor fout controle (met als gevolg een grote verhoging van
	  de hoeveelheid data) bij oudere modems en sommige
	  providers.  Dit is bijvoorbeeld een benodigde optie bij de
	  Compuserve provider.</p><p>Het kan voorkomen dat <span class="application">PPP</span> niet
	  terugkeert naar de commando mode, wat meestal betekent dat er
	  een onderhandelings fout is waarbij de provider wacht op uw
	  kant om de onderhandeling te kunnen beginnen.  Op dit
	  moment kunt u gebruik maken van het <code class="command">~p</code>
	  commando om ppp te forceren om de configuratie informatie
	  te versturen.</p><p>Als u nooit een inlogin prompt krijgt is het zeer
	  waarschijnlijk dat u <acronym class="acronym">PAP</acronym> of
	  <acronym class="acronym">CHAP</acronym> authenticatie moet gebruiken in plaats
	  van de <span class="trademark">UNIX</span>® stijl in het voorbeeld hierboven.  Om gebruik te
	  maken van <acronym class="acronym">PAP</acronym> of <acronym class="acronym">CHAP</acronym>
	  voegt u het volgende opties toe aan
	  <span class="application">PPP</span> voordat u de terminal mode
	  ingaat:</p><pre class="screen">ppp ON example&gt; <strong class="userinput"><code>set authname mijngebruikersnaam</code></strong></pre><p>Waarbij <em class="replaceable"><code>mijngebruikersnaam</code></em> moet
	  worden vervangen met de gebruikersnaam die wordt toegewezen
	  door de provider.</p><pre class="screen">ppp ON example&gt; <strong class="userinput"><code>set authkey mijnwachtwoord</code></strong></pre><p>Waarbij <em class="replaceable"><code>mijnwachtwoord</code></em> moet
	  worden vervangen door het wachtwoord wat u is toegewezen door
	  de provider.</p><p>Als u een goed werkende verbinding kunt maken maar het
	  onmogelijk lijkt om een domeinnaam te vinden, probeert u
	  dan <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> te gebruiken met een <acronym class="acronym">IP</acronym>
	  adres en kijk of er enige informatie terugkomt.  Als u 100
	  procent (100%) packet loss ziet is het zeer waarschijnlijk
	  dat u geen default route heeft gekregen.  Controleer nogmaals
	  of de optie <code class="option">add default HISADDR</code>
	  ingesteld is tijdens de connectie.  Als u verbinding kunt
	  maken met een extern <acronym class="acronym">IP</acronym> adres is het
	  mogelijk dat een naamserver niet is toegevoegd aan het
	  <code class="filename">/etc/resolv.conf</code> bestand.  Dit bestand
	  moet er uitzien als volgend:</p><pre class="programlisting">domain <em class="replaceable"><code>example.com</code></em>
nameserver <em class="replaceable"><code>x.x.x.x</code></em>
nameserver <em class="replaceable"><code>y.y.y.y</code></em></pre><p>Waar <em class="replaceable"><code>x.x.x.x</code></em> en
	  <em class="replaceable"><code>y.y.y.y</code></em> moet worden vervangen door
	  het <acronym class="acronym">IP</acronym> adres van uw providers
	  naamservers.  Deze informatie kan mogelijk wel of niet
	  geleverd zijn toen u zich inschreef, maar een snel telefoontje
	  naar uw provider zou hierin uitkomst kunnen bieden.</p><p>U kunt ook <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a> gebruiken om een log functie
	  voor <span class="application">PPP</span> aan te maken.  Voeg het
	  volgende toe aan <code class="filename">/etc/syslog.conf</code>:</p><pre class="programlisting">!ppp
*.*     /var/log/ppp.log</pre><p>Deze functionaliteit bestaat in de meeste gevallen al.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ppp.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="ppp-and-slip.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="pppoe.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">27.3. Kernel-PPP gebruiken </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 27.5. PPP gebruiken over Ethernet (PPPoE)</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>