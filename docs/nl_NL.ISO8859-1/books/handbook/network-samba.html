<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>29.9. Bestands- en printdiensten voor Microsoft® Windows® cliënten (Samba)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="network-servers.html" title="Hoofdstuk 29. Netwerkdiensten" /><link rel="prev" href="network-ftp.html" title="29.8. File Transfer Protocol (FTP)" /><link rel="next" href="network-ntp.html" title="29.10. Tijd synchroniseren met NTP" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">29.9. Bestands- en printdiensten voor <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®
      cliënten (Samba)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-ftp.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 29. Netwerkdiensten</th><td width="20%" align="right"> <a accesskey="n" href="network-ntp.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-samba"></a>29.9. Bestands- en printdiensten voor <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®
      cliënten (Samba)</h2></div><div><span class="authorgroup">Geschreven door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp87619664" class="indexterm"></a><a id="idp87620176" class="indexterm"></a><a id="idp87620688" class="indexterm"></a><a id="idp87621840" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87627216"></a>29.9.1. Overzicht</h3></div></div></div><p><span class="application">Samba</span> is een populair open
	source softwarepakket dat bestands- en printdiensten voor
	<span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® cliënten biedt.  Die cliënten
	kunnen dan ruimte op een FreeBSD bestandssysteem gebruiken alsof
	het een lokale schijf is en FreeBSD printers gebruiken alsof het
	lokale printers zijn.</p><p><span class="application">Samba</span> softwarepakketten horen
	op de FreeBSD installatiemedia te staan.  Als
	<span class="application">Samba</span> bij de basisinstallatie niet
	mee is geïnstalleerd, dan kan dat alsnog via de <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/samba34/pkg-descr">net/samba34</a> port of met het
	pakket.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87631312"></a>29.9.2. Instellen</h3></div></div></div><p>Een standaardbestand met instellingen voor
	<span class="application">Samba</span> wordt geïnstalleerd als
	<code class="filename">/usr/local/share/examples/samba34/smb.conf.default</code>.
	Dit bestand dient gekopieerd te worden naar
	<code class="filename">/usr/local/etc/smb.conf</code> en voordat
	<span class="application">Samba</span> gebruikt kan worden, moeten er
	aanpassingen aan worden gemaakt.</p><p><code class="filename">smb.conf</code> bevat de instellingen voor
	<span class="application">Samba</span>, zoals die voor de printers en
	de <span class="quote">&#8220;<span class="quote">gedeelde bestandssystemen</span>&#8221;</span> die gedeeld worden
	met <span class="trademark">Windows</span>® cliënten.  Het pakket
	<span class="application">Samba</span> bevat een webgebaseerde
	beheermodule die <span class="application">swat</span> heet, waarmee
	<code class="filename">smb.conf</code> op een eenvoudige manier ingesteld
	kan worden.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87641168"></a>29.9.2.1. De Samba webbeheermodule gebruiken (SWAT)</h4></div></div></div><p>De Samba Webbeheermodule (SWAT) draait als een daemon
	  vanuit <span class="application">inetd</span>.  Daarom dient
	  <span class="application">inetd</span> aangezet te worden zoals
	  beschreven in <a class="xref" href="network-inetd.html" title="29.2. De inetd &#8220;Super-Server&#8221;">Paragraaf 29.2, &#8220;De <span class="application">inetd</span>
      <span class="quote">&#8220;<span class="quote">Super-Server</span>&#8221;</span>&#8221;</a> en dient voor
	  de volgende regel uit <code class="filename">/etc/inetd.conf</code>
	  het commentaarkarakter verwijderd te worden voordat
	  <span class="application">swat</span> gebruikt kan worden om
	  <span class="application">Samba</span> in te stellen:</p><pre class="programlisting">swat   stream  tcp     nowait/400      root    /usr/local/sbin/swat    swat</pre><p>Zoals is uitgelegd in <a class="xref" href="network-inetd.html#network-inetd-reread" title="Voorbeeld 29.1. Het instellingenbestand van inetd herladen">Voorbeeld 29.1, &#8220;Het instellingenbestand van <span class="application">inetd</span>
	  herladen&#8221;</a>, moet de configuratie van
	  <span class="application">inetd</span> worden herladen nadat dit
	  instellingenbestand is gewijzigd.</p><p>Als <span class="application">swat</span> is ingeschakeld in
	  <code class="filename">inetd.conf</code>, kan de module gebruikt worden
	  door met een browser een verbinding te maken met <code class="uri"><a class="uri" href="http://localhost:901" target="_top">http://localhost:901</a></code>.  Er dient aangemeld te
	  worden met het <code class="systemitem">root</code> account van het
	  systeem.</p><p>Na succesvol aanmelden op de hoofdpagina voor de
	  <span class="application">Samba</span> instellingen, is het mogelijk
	  de systeemdocumentatie te bekijken of te starten door op het
	  tabblad <span class="guimenu">Globals</span> te klikken.  Het onderdeel
	  <span class="guimenu">Globals</span> correspondeert met de sectie
	  <code class="literal">[global]</code> in
	  <code class="filename">/usr/local/etc/smb.conf</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87655120"></a>29.9.2.2. Systeembrede instellingen</h4></div></div></div><p>Of <span class="application">Samba</span> nu wordt ingesteld
	  door <code class="filename">/usr/local/etc/smb.conf</code> direct te
	  bewerken of met <span class="application">swat</span>, de eerste
	  instellingen die gemaakt moeten worden zijn de volgende:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">workgroup</code></span></dt><dd><p>NT Domeinnaam of Werkgroepnaam voor de computers die
		verbinding gaan maken met de server.</p></dd><dt><span class="term"><code class="literal">netbiosnaam</code></span></dt><dd><a id="idp87660368" class="indexterm"></a><p>Hiermee wordt de NetBIOS naam waaronder de
		<span class="application">Samba</span> server bekend zal zijn
		ingesteld.  Standaard is de naam het eerste gedeelte van
		de DNS-naam van een host.</p></dd><dt><span class="term"><code class="literal">server string</code></span></dt><dd><p>Hiermee wordt de string ingesteld die te zien is als
		het commando <code class="command">net view</code> en een aantal
		andere commando's die gebruik maken van de
		beschrijvende tekst voor de server gebruikt worden.</p></dd></dl></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87664336"></a>29.9.2.3. Beveiligingsinstellingen</h4></div></div></div><p>Twee van de belangrijkste instellingen in
	  <code class="filename">/usr/local/etc/smb.conf</code> zijn het gekozen
	  beveiligingsmodel en het wachtwoord voor
	  cliëntgebruikers.  Deze worden met de volgende
	  instellingen gemaakt:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">security</code></span></dt><dd><p>De twee meest gebruikte mogelijkheden hier zijn
		<code class="literal">security = share</code> en
		<code class="literal">security = user</code>.  Als de
		cliënten gebruikersnamen hebben die overeenkomen
		met hun gebruikersnaam op de FreeBSD machine, dan is het
		verstandig om te kiezen voor beveiliging op
		gebruikersniveau.  Dit is het standaard
		beveiligingsbeleid en kent als voorwaarde dat gebruikers
		zich eerst moeten aanmelden voordat ze toegang krijgen
		tot gedeelde bronnen.</p><p>Bij beveiliging op shareniveau hoeft een cliënt
		niet met een geldige gebruikersnaam en wachtwoord aan te
		melden op de server voor het mogelijk is om een
		verbinding te proberen te krijgen met een gedeelde bron.
		Dit was het standaardbeveiligingsmodel voor oudere
		versies van <span class="application">Samba</span>.</p></dd><dt><span class="term"><code class="literal">passdb backend</code></span></dt><dd><p><span class="application">Samba</span> kent aan de
		achterkant verschillende authenticatiemodellen.
		Cliënten kunnen authenticeren met LDAP<a id="idp87674960" class="indexterm"></a>, NIS+<a id="idp87675472" class="indexterm"></a>, een
		SQL-database<a id="idp87675984" class="indexterm"></a> of een aangepast wachtwoordbestand.  De
		standaard authenticatiemethode is
		<code class="literal">smbpasswd</code>.  Meer wordt hier niet
		behandeld.</p></dd></dl></div><p>Als aangenomen wordt dat de standaard achterkant
	  <code class="literal">smbpasswd</code> wordt gebruikt, dan moet
	  <code class="filename">/usr/local/etc/samba/smbpasswd</code> gemaakt
	  worden om <span class="application">Samba</span> in staat te stellen
	  cliënten te authenticeren.  Als het gewenst is om uw
	  <span class="trademark">UNIX</span>® gebruikersaccounts toegang te geven vanaf <span class="trademark">Windows</span>®
	  cliënten, gebruik dan het volgende commando:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>smbpasswd -a gebruikersnaam</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">De aanbevolen backend is nu <code class="literal">tdbsam</code>,
	    en het volgende command moet gebruikt worden om
	    gebruikersaccounts toe te voegen:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pdbedit -a -u gebruikersnaam</code></strong></pre></div><p>In de <a class="link" href="http://www.samba.org/samba/docs/man/Samba-HOWTO-Collection" target="_top">Official
	  Samba HOWTO</a> staat meer informatie over instelopties.
	  Met de hier gegeven basisuitleg moet het mogelijk zijn
	  <span class="application">Samba</span> draaiende te krijgen.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87700944"></a>29.9.3. <span class="application">Samba</span> starten</h3></div></div></div><p>De port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/samba34/pkg-descr">net/samba34</a> voegt
	een nieuw opstartscript toe, dat gebruikt kan worden om
	<span class="application">Samba</span> te beheren.  Om dit script te
	activeren, zodat het bijvoorbeeld gebruikt kan worden om
	<span class="application">Samba</span> te starten, stoppen, of te
	herstarten, dient de volgende regel aan
	<code class="filename">/etc/rc.conf</code> toegevoegd te worden:</p><pre class="programlisting">samba_enable="YES"</pre><p>Of, voor fijnkorrelig beheer:</p><pre class="programlisting">nmbd_enable="YES"</pre><pre class="programlisting">smbd_enable="YES"</pre><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dit stelt <span class="application">Samba</span> ook in om
	  automatisch tijdens het opstarten te starten.</p></div><p>Vervolgens is het mogelijk om
	<span class="application">Samba</span> op elk moment te starten door
	dit te typen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service samba start</code></strong>
Starting SAMBA: removing stale tdbs :
Starting nmbd.
Starting smbd.</pre><p>Refereer aan <a class="xref" href="configtuning-rcd.html" title="12.7. Gebruik van rc met FreeBSD">Paragraaf 12.7, &#8220;Gebruik van rc met FreeBSD&#8221;</a> voor meer
	informatie over het gebruikt van rc-scripts.</p><p><span class="application">Samba</span> bestaat feitelijk uit drie
	afzonderlijke daemons.  Het script
	<code class="filename">samba</code> start de daemons
	<span class="application">nmbd</span> en
	<span class="application">smbd</span>.  Als de winbind
	naamresolutiediensten in <code class="filename">smb.conf</code> zijn
	ingeschakeld, dan start ook de daemon
	<span class="application">winbindd</span>.</p><p><span class="application">Samba</span> kan op ieder moment gestopt
	worden met:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service samba stop</code></strong></pre><p><span class="application">Samba</span> is een complexe
	softwaresuite met functionaliteit waarmee verregaande integratie
	met <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® netwerken mogelijk wordt.  Informatie
	die verder gaat dan de basisinstallatie staat op
	<code class="uri"><a class="uri" href="http://www.samba.org" target="_top">http://www.samba.org</a></code>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-ftp.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="network-ntp.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">29.8. File Transfer Protocol (FTP) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 29.10. Tijd synchroniseren met NTP</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>