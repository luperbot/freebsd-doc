<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>9.7. Problemen oplossen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="kernelconfig.html" title="Hoofdstuk 9. De FreeBSD-kernel instellen" /><link rel="prev" href="kernelconfig-config.html" title="9.6. Het instellingenbestand" /><link rel="next" href="printing.html" title="Hoofdstuk 10. Afdrukken" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">9.7. Problemen oplossen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="kernelconfig-config.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 9. De FreeBSD-kernel instellen</th><td width="20%" align="right"> <a accesskey="n" href="printing.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-trouble"></a>9.7. Problemen oplossen</h2></div></div></div><p>Er zijn vier probleemcategoriën die op kunnen treden
      tijdens het bouwen van een aangepaste kernel:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="command">config</code> faalt</span></dt><dd><p>Als het commando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> faalt bij het verwerken
	    van de kernelbeschrijving, is er waarschijnlijk ergens een
	    eenvoudige fout gemaakt.  Gelukkig geeft <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> het
	    nummer van de regel weer waarmee het problemen had, dus kan
	    snel de regel gevonden worden waarin de fout zit.
	    In het onderstaande voorbeeld dient gecontroleerd te worden
	    of het sleutelwoord juist is ingevoerd door het met de
	    kernel <code class="filename">GENERIC</code> of een andere
	    referentie te vergelijken:</p><pre class="screen">config: line 17: syntax error</pre></dd><dt><span class="term"><code class="command">make</code> faalt</span></dt><dd><p>Als <code class="command">make</code> faalt, duidt dit meestal op
	    een fout in de kernelbeschrijving die niet erg genoeg is om
	    door <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> opgemerkt te worden.  De instellingen
	    dienen nogmaals nagekeken te worden.  Als het probleem nog
	    steeds niet is op te lossen, stuur dan een mail naar de
	    <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">FreeBSD algemene vragen mailinglijst</a> met de kernelinstellingen.  Dat leidt meestal
	    snel tot een diagnose.</p></dd><dt><span class="term">De kernel start niet op<a id="kernelconfig-noboot"></a></span></dt><dd><p>Als de nieuwe kernel niet opstart of de apparaten
	    niet herkent is kalmte geboden.  FreeBSD heeft een uitstekend
	    mechanisme om van niet-compatibele kernels te herstellen.
	    De gewenste kernel om mee op te starten kan vanuit de FreeBSD
	    boot loader gekozen worden.  Als het systeemopstartmenu
	    verschijnt, kan deze gekozen worden.
	    Selecteer de optie <span class="quote">&#8220;<span class="quote">Escape to a loader prompt</span>&#8221;</span>,
	    nummer zes.  Typ op de prompt
	    <code class="command">boot kernel.old</code>
	    of de naam van een andere kernel die correct
	    opstart.  Als de kernelinstellingen gewijzigd worden, is
	    het altijd aan te raden om een kernel bij de hand te houden
	    waarvan bekend is dat die juist werkt.</p><p>Nadat er met een goede kernel is opgestart, kan het
	    instellingenbestand gecontroleerd worden en geprobeerd
	    worden om de kernel nogmaals te bouwen.  Een behulpzame
	    bron is het bestand <code class="filename">/var/log/messages</code>,
	    dat onder andere alle kernelberichten van alle keren dat er
	    succesvol is opgestart vastlegt.  Ook geeft <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>
	    alle kernelberichten weer van de huidige
	    opstartprocedure.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Als er problemen zijn met het bouwen van een kernel,
	      dient een <code class="filename">GENERIC</code>, of een andere
	      kernel waarvan bekend is dat die werkt, bewaard te worden
	      onder een andere naam die niet verwijderd wordt als de
	      volgende kernel gebouwd wordt.  Er kan niet op
	      <code class="filename">kernel.old</code> vertrouwd worden omdat
	      bij de installatie van een nieuwe kernel
	      <code class="filename">kernel.old</code> overschreven wordt met de
	      laatst geïnstalleerde kernel, die niet hoeft te
	      werken.  Ook dient de werkende kernel zo snel mogelijk
	      naar de juiste plaats <code class="filename">/boot/kernel</code> verplaatst te
	      worden, omdat anders commando's als <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> eventueel
	      onjuist werken.  Hiervoor dient simpelweg de map met de
	      goede kernel hernoemd te worden:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mv /boot/kernel /boot/kernel.slecht</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv /boot/kernel.goed /boot/kernel</code></strong></pre></div></dd><dt><span class="term">De kernel werkt, maar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> werkt niet meer</span></dt><dd><p>Als er een andere versie van de kernel is
	    geïnstalleerd dan degene waarmee de
	    systeemgereedschappen gebouwd zijn, bijvoorbeeld een kernel
	    voor -CURRENT op een -RELEASE-systeem, werken vele
	    systeemstatuscommando's als <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vmstat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vmstat</span>(8)</span></a>
	    niet langer.  De wereld moet opnieuw gecompileerd en
	    geïnstalleerd worden en met dezelfde broncodestructuur
	    als de kernel zijn gebouwd.  Dit is een van de redenen
	    waarom het normaliter geen goed idee is om een afwijkende
	    versie van de kernel ten opzichte van de rest van de wereld
	    te gebruiken.</p></dd></dl></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="kernelconfig-config.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="kernelconfig.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="printing.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">9.6. Het instellingenbestand </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> Hoofdstuk 10. Afdrukken</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>