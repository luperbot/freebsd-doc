<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>29.4. Netwerkinformatiesysteem (NIS/YP)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="network-servers.html" title="Hoofdstuk 29. Netwerkdiensten" /><link rel="prev" href="network-nfs.html" title="29.3. Netwerkbestandssysteem (NFS)" /><link rel="next" href="network-dhcp.html" title="29.5. Automatisch netwerk instellen (DHCP)" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">29.4. Netwerkinformatiesysteem (NIS/YP)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-nfs.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 29. Netwerkdiensten</th><td width="20%" align="right"> <a accesskey="n" href="network-dhcp.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-nis"></a>29.4. Netwerkinformatiesysteem (NIS/YP)</h2></div><div><span class="authorgroup">Geschreven door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Swingle</span></span>. </span></div><div><span class="authorgroup">Verbeterd door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Eric</span> <span class="surname">Ogren</span></span> en <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Udo</span> <span class="surname">Erdelhoff</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86567376"></a>29.4.1. Wat is het?</h3></div></div></div><a id="idp86568016" class="indexterm"></a><a id="idp86568528" class="indexterm"></a><a id="idp86569040" class="indexterm"></a><a id="idp86569680" class="indexterm"></a><a id="idp86570192" class="indexterm"></a><a id="idp86570704" class="indexterm"></a><a id="idp86571216" class="indexterm"></a><p><acronym class="acronym">NIS</acronym>,
	dat staat voor Netwerkinformatiediensten (Network Information
	Services), is ontwikkeld door Sun Microsystems om het beheer van
	<span class="trademark">UNIX</span>® (origineel <span class="trademark">SunOS</span>&#8482;) systemen te centraliseren.
	Tegenwoordig is het eigenlijk een industriestandaard geworden.
	Alle grote <span class="trademark">UNIX</span>® achtige systemen (<span class="trademark">Solaris</span>&#8482;, HP-UX, <span class="trademark">AIX</span>®,
	<span class="trademark">Linux</span>®, NetBSD, OpenBSD, FreeBSD, enzovoort) ondersteunen <acronym class="acronym">NIS</acronym>.</p><a id="idp86575824" class="indexterm"></a><p><acronym class="acronym">NIS</acronym>
	stond vroeger bekend als Yellow Pages, maar vanwege problemen
	met het handelsmerk heeft Sun de naam veranderd.  De oude term,
	en yp, wordt nog steeds vaak gebruikt.</p><a id="idp86577360" class="indexterm"></a><p>Het is een op RPC-gebaseerd cliënt/serversysteem
	waarmee een groep machines binnen een NIS-domein een
	gezamenlijke verzameling met instellingenbestanden kan delen.
	Hierdoor kan een beheerder NIS-systemen opzetten met een
	minimaal aantal instellingen en vanaf een centrale lokatie
	instellingen toevoegen, verwijderen en wijzigen.</p><a id="idp86579024" class="indexterm"></a><p>Het is te vergelijken met het <span class="trademark">Windows NT</span>® domeinsysteem en
	hoewel de interne implementatie van de twee helemaal niet
	overeenkomt, is de basisfunctionaliteit vergelijkbaar.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86580560"></a>29.4.2. Termen en processen om te onthouden</h3></div></div></div><p>Er zijn een aantal termen en belangrijke
	gebruikersprocessen die een rol spelen bij het implementeren
	van NIS op FreeBSD, zowel bij het maken van een NIS-server als bij
	het maken van een systeem dan NIS-cliënt is:</p><a id="idp86581584" class="indexterm"></a><a id="idp86582224" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Term</th><th>Beschrijving</th></tr></thead><tbody><tr><td>NIS-domeinnaam</td><td>Een NIS-masterserver en al zijn cliënten
		(inclusief zijn slave master) hebben een NIS-domeinnaam.
		Vergelijkbaar met een <span class="trademark">Windows NT</span>® domeinnaam, maar de
		NIS-domeinnaam heeft niets te maken met
		<acronym class="acronym">DNS</acronym>.</td></tr><tr><td><span class="application">rpcbind</span></td><td>Moet draaien om <acronym class="acronym">RPC</acronym> (Remote
		Procedure Call in te schakelen, een netwerkprotocol dat
		door NIS gebruikt wordt).  Als
		<span class="application">rpcbind</span> niet draait, dan kan
		er geen NIS-server draaien en kan een machine ook geen
		NIS-cliënt zijn.</td></tr><tr><td><span class="application">ypbind</span></td><td><span class="quote">&#8220;<span class="quote">Verbindt</span>&#8221;</span> een NIS-cliënt aan
		zijn NIS-server.  Dat gebeurt door met de NIS-domeinnaam
		van het systeem en door het gebruik van
		<acronym class="acronym">RPC</acronym> te verbinden met de server.
		<span class="application">ypbind</span> is de kern van
		cliënt-server communicatie in een NIS-omgeving.
		Als <span class="application">ypbind</span> op een machine
		stopt, dan kan die niet meer bij de NIS-server komen.</td></tr><tr><td><span class="application">ypserv</span></td><td>Hoort alleen te draaien op NIS-servers.  Dit is
		het NIS-serverproces zelf.  Als <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> stopt,
		dan kan de server niet langer reageren op NIS-verzoeken
		(hopelijk is er dan een slaveserver om het over te
		nemen).  Er zijn een aantal implementaties van NIS, maar
		niet die op FreeBSD, die geen verbinding met een andere
		server proberen te maken als de server waarmee ze
		verbonden waren niet meer reageert.  In dat geval is
		vaak het enige dat werkt het serverproces herstarten (of
		zelfs de hele server) of het
		<span class="application">ypbind</span>-proces op de
		cliënt.</td></tr><tr><td><span class="application">rpc.yppasswdd</span></td><td>Nog een proces dat alleen op NIS-masterservers
		hoort te draaien.  Dit is een daemon waarbij
		NIS-cliënten hun NIS-wachtwoorden kunnen wijzigen.
		Als deze daemon niet draait, moeten gebruikers zich
		aanmelden op de NIS-masterserver en daar hun wachtwoord
		wijzigen.</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86610128"></a>29.4.3. Hoe werkt het?</h3></div></div></div><p>Er zijn drie typen hosts in een NIS-omgeving: master
	servers, slaveservers en cliënten.  Servers zijn het
	centrale depot voor instellingen voor een host.  Masterservers
	bevatten de geautoriseerd kopie van die informatie, terwijl
	slaveservers die informatie spiegelen voor redundantie.
	Cliënten verlaten zich op de servers om hun die informatie
	ter beschikking te stellen.</p><p>Op deze manier kan informatie uit veel bestanden gedeeld
	worden.  De bestanden <code class="filename">master.passwd</code>,
	<code class="filename">group</code> en <code class="filename">hosts</code>
	worden meestal via NIS gedeeld.  Als een proces op een
	cliënt informatie nodig heeft die normaliter in een van die
	lokale bestanden staat, dan vraagt die het in plaats daarvan aan
	de NIS-servers waarmee hij verbonden is.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86612688"></a>29.4.3.1. Soorten machines</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Een <span class="emphasis"><em>NIS-masterserver</em></span><a id="idp86614352" class="indexterm"></a>.  Deze
	      server onderhoudt, analoog aan een <span class="trademark">Windows NT</span>® primaire
	      domeincontroller, de bestanden die door alle
	      NIS-cliënten gebruikt worden.  De bestanden
	      <code class="filename">passwd</code>, <code class="filename">group</code> en
	      andere bestanden die door de NIS-cliënten gebruikt
	      worden staan op de masterserver.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Het is mogelijk om één machine master
		server te laten zijn voor meerdere NIS-domeinen.  Dat
		wordt in deze inleiding echter niet beschreven, omdat
		die uitgaat van een relatief kleine omgeving.</p></div></li><li class="listitem"><p><span class="emphasis"><em>NIS-slaveservers</em></span><a id="idp86618192" class="indexterm"></a>.  Deze zijn
	      te vergelijken met <span class="trademark">Windows NT</span>® backup domain controllers.
	      NIS-slaveservers beheren een kopie van de bestanden met
	      gegevens op de NIS-master.  NIS-slaveservers bieden
	      redundantie, die nodig is in belangrijke omgevingen.  Ze
	      helpen ook om de belasting te verdelen met de master
	      server: NIS-cliënten maken altijd een verbinding met
	      de NIS-server die het eerst reageert en dat geldt ook voor
	      antwoorden van slaveservers.</p></li><li class="listitem"><p><span class="emphasis"><em>NIS-cliënten</em></span><a id="idp86620368" class="indexterm"></a>.
	      NIS-cliënten authenticeren, net als de meeste
	      <span class="trademark">Windows NT</span>® werkstations, tegen de NIS-server (of de
	      <span class="trademark">Windows NT</span>® domain controller in het geval van <span class="trademark">Windows NT</span>®
	      werkstations) bij het aanmelden.</p></li></ul></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86623568"></a>29.4.4. NIS/YP gebruiken</h3></div></div></div><p>Dit onderdeel behandelt het opzetten van een
	NIS-voorbeeldomgeving.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86624592"></a>29.4.4.1. Plannen</h4></div></div></div><p>Er wordt uitgegaan van een beheerder van een klein
	  universiteitslab.  Dat lab, dat bestaat uit FreeBSD machines,
	  kent op dit moment geen centraal beheer.  Iedere machine heeft
	  zijn eigen <code class="filename">/etc/passwd</code> en
	  <code class="filename">/etc/master.passwd</code>.  Die bestanden worden
	  alleen met elkaar in lijn gehouden door handmatige
	  handelingen.  Als er op dit moment een gebruiker aan het lab
	  wordt toegevoegd, moet <code class="command">adduser</code> op alle 15
	  machines gedraaid worden.  Dat moet natuurlijk veranderen en
	  daarom is besloten het lab in te richten met NIS, waarbij twee
	  machines als server worden gebruikt.</p><p>Het lab ziet er ongeveer als volgt uit:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Machinenaam</th><th>IP-adres</th><th>Rol Machine</th></tr></thead><tbody><tr><td><code class="systemitem">ellington</code></td><td><code class="systemitem">10.0.0.2</code></td><td>NIS-master</td></tr><tr><td><code class="systemitem">coltrane</code></td><td><code class="systemitem">10.0.0.3</code></td><td>NIS-slave</td></tr><tr><td><code class="systemitem">basie</code></td><td><code class="systemitem">10.0.0.4</code></td><td>Wetenschappelijk werkstation</td></tr><tr><td><code class="systemitem">bird</code></td><td><code class="systemitem">10.0.0.5</code></td><td>Cliënt machine</td></tr><tr><td><code class="systemitem">cli[1-11]</code></td><td><code class="systemitem">10.0.0.[6-17]</code></td><td>Andere cliënt machines</td></tr></tbody></table></div><p>Bij het voor de eerste keer instellen van een NIS-schema
	  is het verstandig eerst na te denken over hoe dat opgezet moet
	  worden.  Hoe groot een netwerk ook is, er moeten een aantal
	  beslissingen gemaakt worden.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86649040"></a>29.4.4.1.1. Een NIS-domeinnaam kiezen</h5></div></div></div><a id="idp86649680" class="indexterm"></a><p>Dit is wellicht niet de bekende
	    <span class="quote">&#8220;<span class="quote">domeinnaam</span>&#8221;</span>.  Daarom wordt het ook de
	    <span class="quote">&#8220;<span class="quote">NIS-domeinnaam</span>&#8221;</span> genoemd.  Bij de broadcast
	    van een cliënt om informatie wordt ook de naam van het
	    NIS-domein waar hij onderdeel van uitmaakt meegezonden.  Zo
	    kunnen meerdere servers op een netwerk bepalen of er
	    antwoord gegeven dient te worden op een verzoek.  De
	    NIS-domeinnaam kan voorgesteld worden als de naam van een
	    groep hosts die op een of andere manier aan elkaar
	    gerelateerd zijn.</p><p>Sommige organisaties kiezen hun Internet-domeinnaam als
	    NIS-domeinnaam.  Dat wordt niet aangeraden omdat het voor
	    verwarring kan zorgen bij het debuggen van netwerkproblemen.
	    De NIS-domeinnaam moet uniek zijn binnen een netwerk en het
	    is handig als die de groep machines beschrijft waarvoor hij
	    geldt.  Zo kan bijvoorbeeld de financiële afdeling van
	    Acme Inc. als NIS-domeinnaam <span class="quote">&#8220;<span class="quote">acme-fin</span>&#8221;</span> hebben.
	    In dit voorbeeld wordt de naam
	    <code class="literal">test-domain</code> gekozen.</p><a id="idp86653136" class="indexterm"></a><p>Sommige besturingssystemen gebruiken echter (met name
	    <span class="trademark">SunOS</span>&#8482;) hun NIS-domeinnaam als hun Internet-domeinnaam.
	    Als er machines zijn op een netwerk die deze restrictie
	    kennen, dan <span class="emphasis"><em>moet</em></span> de Internet-domeinnaam
	    als de naam voor het NIS-domeinnaam gekozen worden.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86654928"></a>29.4.4.1.2. Systeemeisen</h5></div></div></div><p>Bij het kiezen van een machine die als NIS-server wordt
	    gebruikt zijn er een aantal aandachtspunten.  Een van de
	    onhandige dingen aan NIS is de afhankelijkheid van de
	    cliënten van de server.  Als een cliënt de server
	    voor zijn NIS-domein niet kan bereiken, dan wordt die
	    machine vaak onbruikbaar.  Door het gebrek aan gebruiker- en
	    groepsinformatie bevriezen de meeste systemen.  Daarom moet
	    er een machine gekozen worden die niet vaak herstart hoeft
	    te worden of wordt gebruikt voor ontwikkeling.  De
	    NIS-server is in het meest ideale geval een alleenstaande
	    server die als enige doel heeft NIS-server te zijn.  Als een
	    netwerk niet zwaar wordt gebruikt, kan de NIS-server op een
	    machine die ook andere diensten aanbiedt gezet worden, maar
	    het blijft belangrijk om ervan bewust te zijn dat als de
	    NIS-server niet beschikbaar is, dat nadelige invloed heeft
	    op <span class="emphasis"><em>alle</em></span> NIS-cliënten.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86673104"></a>29.4.4.2. NIS-servers</h4></div></div></div><p>De hoofdversies van alle NIS-informatie staan opgeslagen
	  op één machine die de NIS-masterserver heet.  De
	  databases waarin de informatie wordt opgeslagen heten
	  NIS-afbeeldingen.  In FreeBSD worden die afbeeldingen opgeslagen
	  in <code class="filename">/var/yp/[domeinnaam]</code> waar
	  <code class="filename">[domeinnaam]</code> de naam is van het
	  NIS-domein dat wordt bediend.  Een enkele NIS-server kan
	  tegelijkertijd meerdere NIS-domeinen ondersteunen en het is
	  dus mogelijk dat er meerdere van zulke mappen zijn, een voor
	  ieder ondersteund domein.  Ieder domein heeft zijn eigen
	  onafhankelijke verzameling afbeeldingen.</p><p>In NIS-master- en -slaveservers worden alle NIS-verzoeken
	  door de daemon <code class="command">ypserv</code> afgehandeld.
	  <code class="command">ypserv</code> is verantwoordelijk voor het
	  ontvangen van inkomende verzoeken van NIS-cliënten, het
	  vertalen van de gevraagde domeinnaam en mapnaam naar een pad
	  naar het corresponderende databasebestand en het terugsturen
	  van de database naar de cliënten.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86676048"></a>29.4.4.2.1. Een NIS-masterserver opzetten</h5></div></div></div><a id="idp86676688" class="indexterm"></a><p>Het opzetten van een master NIS-server kan erg
	    eenvoudig zijn, afhankelijk van de behoeften.  FreeBSD heeft
	    ondersteuning voor NIS als basisfunctie.  Alleen de volgende
	    regels hoeven aan <code class="filename">/etc/rc.conf</code>
	    toegevoegd te worden en FreeBSD doet de rest:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><pre class="programlisting">nisdomainname="test-domain"</pre><p>

		Deze regel stelt de NIS-domeinnaam in op
		<code class="literal">test-domain</code> bij het instellen van het
		netwerk (bij het opstarten).</p></li><li class="step"><pre class="programlisting">nis_server_enable="YES"</pre><p>

		Dit geeft FreeBSD aan de NIS-serverprocessen te starten
		als het netwerk de volgende keer wordt opgestart.</p></li><li class="step"><pre class="programlisting">nis_yppasswdd_enable="YES"</pre><p>

		Dit schakelt de daemon <code class="command">rpc.yppasswdd</code>
		in die, zoals al eerder aangegeven, cliënten
		toestaat om hun NIS-wachtwoord vanaf een
		cliënt-machine te wijzigen.</p></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Afhankelijk van de inrichting van NIS, kunnen er nog
	      meer instellingen nodig zijn.  In het onderdeel <a class="link" href="network-nis.html#network-nis-server-is-client" title="29.4.10. NIS-servers die ook NIS-cliënten zijn">NIS-servers die
		ook NIS-cliënten zijn</a> staan meer details.</p></div><p>Draai na het instellen van bovenstaande regels het commando
	    <code class="command">/etc/netstart</code> als supergebruiker.  Het zal alles
	    voor u instellen, gebruikmakende van de waarden die u in
	    <code class="filename">/etc/rc.conf</code> heeft ingesteld.  Start als
	    laatste stap, voor het initialiseren van de NIS-afbeeldingen, de
	    daemon <span class="application">ypserv</span> handmatig:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service ypserv start</code></strong></pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86723664"></a>29.4.4.2.2. NIS-afbeeldingen initialiseren</h5></div></div></div><a id="idp86724304" class="indexterm"></a><p>Die <span class="emphasis"><em>NIS-afbeeldingen</em></span> zijn
	    databasebestanden die in de map <code class="filename">/var/yp</code>
	    staan.  Ze worden gemaakt uit de bestanden met instellingen
	    uit de map <code class="filename">/etc</code> van de NIS-master, met
	    één uitzondering:
	    <code class="filename">/etc/master.passwd</code>.  Daar is een goede
	    reden voor, want het is niet wenselijk om de wachtwoorden
	    voor <code class="systemitem">root</code> en andere administratieve
	    accounts naar alle servers in het NIS-domein te sturen.
	    Daar moet voor het initialiseren van de NIS-afbeeldingen het
	    volgende uitgevoerd worden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp /etc/master.passwd /var/yp/master.passwd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi master.passwd</code></strong></pre><p>Dan horen alle systeemaccounts verwijderd te worden
	    (<code class="systemitem">bin</code>, <code class="systemitem">tty</code>,
	    <code class="systemitem">kmem</code>, <code class="systemitem">games</code>,
	    enzovoort) en alle overige accounts waarvoor het niet
	    wenselijk is dat ze op de NIS-cliënten terecht komen
	    (bijvoorbeeld <code class="systemitem">root</code> en alle andere UID 0
	    (supergebruiker) accounts).</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">/var/yp/master.passwd</code> hoort niet
	      te lezen te zijn voor een groep of voor de wereld (dus
	      modus 600)!  Voor het aanpassen van de rechten kan
	      <code class="command">chmod</code> gebruikt worden.</p></div><a id="idp86734928" class="indexterm"></a><p>Als dat is gedaan, kunnen de NIS-afbeeldingen
	    geïnitialiseerd worden.  Bij FreeBSD zit een script
	    <code class="command">ypinit</code> waarmee dit kan (in de hulppagina
	    staat meer informatie).  Dit script is beschikbaar op de
	    meeste <span class="trademark">UNIX</span>® besturingssystemen, maar niet op allemaal.
	    Op Digital UNIX/Compaq Tru64 UNIX heet het
	    <code class="command">ypsetup</code>.  Omdat er afbeeldingen voor een
	    NIS-master worden gemaakt, wordt de optie
	    <code class="option">&#8211;m</code> meegegeven aan
	    <code class="command">ypinit</code>.  Aangenomen dat de voorgaande
	    stappen zijn uitgevoerd, kunnen de NIS-afbeeldingen gemaakt
	    worden op de volgende manier:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>ypinit -m test-domain</code></strong>
Server Type: MASTER Domain: test-domain
Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.
Do you want this procedure to quit on non-fatal errors? [y/n: n] <strong class="userinput"><code>n</code></strong>
Ok, please remember to go back and redo manually whatever fails.
If you don't, something might not work.
At this point, we have to construct a list of this domains YP servers.
rod.darktech.org is already known as master server.
Please continue to add any slave servers, one per line. When you are
done with the list, type a &lt;control D&gt;.
master server   :  ellington
next host to add:  <strong class="userinput"><code>coltrane</code></strong>
next host to add:  <strong class="userinput"><code>^D</code></strong>
The current list of NIS servers looks like this:
ellington
coltrane
Is this correct?  [y/n: y] <strong class="userinput"><code>y</code></strong>

[..uitvoer van het maken van de afbeeldingen..]

NIS Map update completed.
ellington has been setup as an YP master server without any errors.</pre><p><code class="command">ypinit</code> hoort
	    <code class="filename">/var/yp/Makefile</code> gemaakt te hebben uit
	    <code class="filename">/var/yp/Makefile.dist</code>.  Als dit bestand is
	    gemaakt, neemt dat bestand aan dat er in een omgeving met
	    een enkele NIS-server wordt gewerkt met alleen
	    FreeBSD-machines.  Omdat <code class="literal">test-domain</code> ook een
	    slaveserver bevat, dient
	    <code class="filename">/var/yp/Makefile</code> gewijzigd te
	    worden:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>vi /var/yp/Makefile</code></strong></pre><p>Als de onderstaande regel niet al uitgecommentarieerd
	    is, dient dat alsnog te gebeuren:</p><pre class="programlisting">NOPUSH = "True"</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86748880"></a>29.4.4.2.3. Een NIS-slaveserver opzetten</h5></div></div></div><a id="idp86749520" class="indexterm"></a><p>Het opzetten van een NIS-slaveserver is nog makkelijker
	    dan het opzetten van de master.  Dit kan door aan te melden
	    op de slaveserver en net als voor de masterserver
	    <code class="filename">/etc/rc.conf</code> te wijzigen.  Het enige
	    verschil is dat nu de optie <code class="option">&#8211;s</code>
	    gebruikt wordt voor het draaien van
	    <code class="command">ypinit</code>.  Met de optie
	    <code class="option">&#8211;s</code> moet ook de naam van de NIS-master
	    meegegeven worden.  Het commando ziet er dus als volgt uit:</p><pre class="screen">coltrane<code class="prompt">#</code> <strong class="userinput"><code>ypinit -s ellington test-domain</code></strong>

Server Type: SLAVE Domain: test-domain Master: ellington

Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.

Do you want this procedure to quit on non-fatal errors? [y/n: n]  <strong class="userinput"><code>n</code></strong>

Ok, please remember to go back and redo manually whatever fails.
If you don't, something might not work.
There will be no further questions. The remainder of the procedure
should take a few minutes, to copy the databases from ellington.
Transferring netgroup...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byuser...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byhost...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring group.bygid...
ypxfr: Exiting: Map successfully transferred
Transferring group.byname...
ypxfr: Exiting: Map successfully transferred
Transferring services.byname...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.byname...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.byname...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring netid.byname...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring ypservers...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byname...
ypxfr: Exiting: Map successfully transferred

coltrane has been setup as an YP slave server without any errors.
Don't forget to update map ypservers on ellington.</pre><p>Nu hoort er een map
	    <code class="filename">/var/yp/test-domain</code> te zijn waarin
	    kopieë van de NIS-masterserver afbeeldingen staan.  Die
	    moeten bijgewerkt blijven.  De volgende regel in
	    <code class="filename">/etc/crontab</code> op de slaveservers regelt
	    dat:</p><pre class="programlisting">20      *       *       *       *       root   /usr/libexec/ypxfr passwd.byname
21      *       *       *       *       root   /usr/libexec/ypxfr passwd.byuid</pre><p>Met de bovenstaande twee regels wordt de slave gedwongen zijn
	    afbeeldingen met de afbeeldingen op de masterserver te
	    synchroniseren.  Dit is niet verplicht omdat de masterserver
	    automatisch probeert veranderingen aan de NIS-afbeeldingen door te
	    geven aan zijn slaves.  Echter, vanwege het belang van correcte
	    wachtwoordinformatie op andere cliënten die van de slaveserver
	    afhankelijk zijn, is het aanbevolen om specifiek de
	    wachtwoordafbeeldingen vaak tot bijwerken te dwingen.  Dit is des
	    te belangrijker op drukke netwerken, omdat daar het bijwerken van
	    afbeeldingen niet altijd compleet afgehandeld hoeft te
	    worden.</p><p>Nu kan ook op de slaveserver het commando
	    <code class="command">/etc/netstart</code> uitgevoerd worden, dat op
	    zijn beurt de NIS-server start.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86761296"></a>29.4.4.3. NIS-cliënten</h4></div></div></div><p>Een NIS-cliënt maakt wat heet een verbinding
	  (binding) met een NIS-server met de daemon
	  <code class="command">ypbind</code>.  <code class="command">ypbind</code>
	  controleert het standaarddomein van het systeem (zoals
	  ingesteld met <code class="command">domainname</code>) en begint met het
	  broadcasten van RPC-verzoeken op het lokale netwerk.  Die
	  verzoeken bevatten de naam van het domein waarvoor
	  <code class="command">ypbind</code> een binding probeert te maken.  Als
	  een server die is ingesteld om het gevraagde domein te
	  bedienen een broadcast ontvangt, dan antwoordt die aan
	  <code class="command">ypbind</code> dat dan het IP-adres van de server
	  opslaat.  Als er meerdere servers beschikbaar zijn, een master
	  en bijvoorbeeld meerdere slaves, dan gebruikt
	  <code class="command">ypbind</code> het adres van de eerste server die
	  antwoord geeft.  Vanaf dat moment stuurt de cliënt alle
	  NIS-verzoeken naar die server.  <code class="command">ypbind</code>
	  <span class="quote">&#8220;<span class="quote">pingt</span>&#8221;</span> de server zo nu en dan om te controleren
	  of die nog draait.  Als er na een bepaalde tijd geen antwoord
	  komt op een ping, dan markeert <code class="command">ypbind</code> het
	  domein als niet verbonden en begint het broadcasten opnieuw,
	  in de hoop dat er een andere server wordt gelocaliseerd.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86765776"></a>29.4.4.3.1. Een NIS-cliënt opzetten</h5></div></div></div><a id="idp86770640" class="indexterm"></a><p>Het opzetten van een FreeBSD machine als NIS-cliënt is
	    redelijk doorzichtig:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Wijzig <code class="filename">/etc/rc.conf</code> en voeg de
		volgende regels toe om de NIS-domeinnaam in te stellen
		en <code class="command">ypbind</code> mee te laten starten bij
		het starten van het netwerk:</p><pre class="programlisting">nisdomainname="test-domain"
nis_client_enable="YES"</pre></li><li class="step"><p>Om alle mogelijke regels voor accounts uit de
		NIS-server te halen, dienen alle gebruikersaccounts uit
		<code class="filename">/etc/master.passwd</code> verwijderd te
		worden en dient met <code class="command">vipw</code> de volgende
		regel aan het einde van het bestand geplaatst te
		worden:</p><pre class="programlisting">+:::::::::</pre><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Door deze regel wordt alle geldige accounts
		  in de wachtwoordafbeelding van de NIS-server toegang
		  gegeven.  Er zijn veel manieren om de NIS-cliënt
		  in te stellen door deze regel te veranderen.  In het
		  onderdeel <a class="link" href="network-nis.html#network-netgroups" title="29.4.7. Netgroups gebruiken">netgroepen</a>
		  hieronder staat meer informatie.  Zeer gedetailleerde
		  informatie staat in het boek <code class="literal">NFS en NIS
		    beheren</code> van O'Reilly.</p></div><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Er moet tenminste één lokale account
		  behouden blijven (dus niet geïmporteerd via NIS)
		  in <code class="filename">/etc/master.passwd</code> en die
		  hoort ook lid te zijn van de groep
		  <code class="systemitem">wheel</code>.  Als er iets mis is met
		  NIS, dan kan die account gebruikt worden om via het
		  netwerk aan te melden, <code class="systemitem">root</code> te
		  worden en het systeem te repareren.</p></div></li><li class="step"><p>Om alle groepen van de NIS-server te importeren, kan
		de volgende regel aan <code class="filename">/etc/group</code>
		toegevoegd worden:</p><pre class="programlisting">+:*::</pre></li></ol></div><p>Voer, om de NIS-cliënt onmiddelijk te starten, de volgende
	    commando's als supergebruiker uit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/netstart</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>service ypbind start</code></strong></pre><p>Na het afronden van deze stappen zou met <code class="command">ypcat
	      passwd</code> de passwd map van de NIS-server te zien
	    moeten zijn.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86785104"></a>29.4.5. NIS-beveiliging</h3></div></div></div><p>In het algemeen kan iedere netwerkgebruiker een RPC-verzoek
	doen uitgaan naar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> en de inhoud van de
	NIS-afbeeldingen ontvangen, mits die gebruiker de domeinnaam
	kent.  Omdat soort ongeautoriseerde transacties te voorkomen,
	ondersteunt <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> de optie <span class="quote">&#8220;<span class="quote">securenets</span>&#8221;</span>,
	die gebruikt kan worden om de toegang te beperken tot een
	opgegeven aantal hosts.  Bij het opstarten probeert
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> de securenets informatie te laden uit het bestand
	<code class="filename">/var/yp/securenets</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dit pad kan verschillen, afhankelijk van het pad dat
	  opgegeven is met de optie <code class="option">&#8211;p</code>.  Dit
	  bestand bevat regels die bestaan uit een netwerkspecificatie
	  en een netwerkmasker, gescheiden door witruimte.  Regels die
	  beginnen met <code class="literal">#</code> worden als commentaar
	  gezien.  Een voorbeeld van een securenetsbestand zou er zo uit
	  kunnen zien:</p></div><pre class="programlisting"># allow connections from local host -- mandatory
127.0.0.1     255.255.255.255
# allow connections from any host
# on the 192.168.128.0 network
192.168.128.0 255.255.255.0
# allow connections from any host
# between 10.0.0.0 to 10.0.15.255
# this includes the machines in the testlab
10.0.0.0      255.255.240.0</pre><p>Als <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> een verzoek ontvangt van een adres dat
	overeenkomt met een van de bovenstaande regels, dan wordt dat
	verzoek normaal verwerkt.  Als er geen enkele regel op het
	verzoek van toepassing is, dan wordt het verzoek genegeerd en
	wordt er een waarschuwing gelogd.  Als het bestand
	<code class="filename">/var/yp/securenets</code> niet bestaat, dan
	accepteert <code class="command">ypserv</code> verbindingen van iedere
	host.</p><p>Het programma <code class="command">ypserv</code> ondersteunt ook het
	pakket <span class="application">TCP Wrapper</span> van Wietse Venema.
	Daardoor kan een beheerder de instellingenbestanden van
	<span class="application">TCP Wrapper</span> gebruiken voor
	toegangsbeperking in plaats van
	<code class="filename">/var/yp/securenets</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Hoewel beide methoden van toegangscontrole enige vorm van
	  beveiliging bieden, zijn ze net als de geprivilegieerde
	  poorttest kwetsbaar voor <span class="quote">&#8220;<span class="quote">IP spoofing</span>&#8221;</span> aanvallen.
	  Al het NIS-gerelateerde verkeer hoort door een firewall
	  tegengehouden te worden.</p><p xmlns="http://www.w3.org/1999/xhtml">Servers die gebruik maken van
	  <code class="filename">/var/yp/securenets</code> kunnen wellicht
	  legitieme verzoeken van NIS-cliënten weigeren als die
	  gebruik maken van erg oude TCP/IP-implementaties.  Sommige van
	  die implementaties zetten alle host bits op nul als ze een
	  broadcast doen en/of kijken niet naar het subnetmasker als ze
	  het broadcastadres berekenen.  Hoewel sommige van die
	  problemen opgelost kunnen worden door de instellingen op de
	  cliënt aan te passen, zorgen andere problemen voor het
	  noodgedwongen niet langer kunnen gebruiker van NIS voor die
	  cliënt of het niet langer gebruiken van
	  <code class="filename">/var/yp/securenets</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Het gebruik van <code class="filename">/var/yp/securenets</code>
	  op een server met zo'n oude implementatie van TCP/IP is echt
	  een slecht idee en zal leiden tot verlies van
	  NIS-functionaliteit voor grote delen van een netwerk.</p><a xmlns="http://www.w3.org/1999/xhtml" id="idp86806480" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">Het gebruik van het pakket <span class="application">TCP
	    Wrapper</span> leidt tot langere wachttijden op de
	  NIS-server.  De extra vertraging kan net lang genoeg zijn om
	  een timeout te veroorzaken in cliëntprogramma's, in het
	  bijzonder als het netwerk druk is of de NIS-server traag is.
	  Als een of meer cliënten last hebben van dat symptoom,
	  dan is het verstandig om de cliëntsysteem in kwestie
	  NIS-slaveserver te maken en naar zichzelf te laten wijzen.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86808016"></a>29.4.6. Aanmelden voor bepaalde gebruikers blokkeren</h3></div></div></div><p>In het lab staat de machine <code class="systemitem">basie</code>, die
	alleen faculteitswerkstation hoort te zijn.  Het is niet
	gewenst die machine uit het NIS-domein te halen, maar het
	<code class="filename">passwd</code> bestand op de master NIS-server
	bevat nu eenmaal accounts voor zowel de faculteit als de
	studenten.  Hoe kan dat opgelost worden?</p><p>Er is een manier om het aanmelden van specifieke gebruikers
	op een machine te weigeren, zelfs als ze in de NIS-database
	staan.  Daarvoor hoeft er alleen maar
	<code class="literal">&#8211;gebruikersnaam</code>
	met het juiste aantal dubbele punten (zoals bij andere regels) aan het
	einde van <code class="filename">/etc/master.passwd</code> op de
	cliëntmachine toegevoegd te worden, waar
	<em class="replaceable"><code>gebruikersnaam</code></em> de gebruikersnaam van de
	gebruiker die niet mag aanmelden is.  De regel met de geblokkeerde
	gebruiker moet voor de regel met <code class="literal">+</code> staan om
	NIS-gebruikers toe te staan.  Dit gebeurt bij voorkeur
	met <code class="command">vipw</code>, omdat <code class="command">vipw</code>
	de wijzigingen aan <code class="filename">/etc/master.passwd</code>
	controleert en ook de wachtwoord database opnieuw bouwt na het
	wijzigen.  Om bijvoorbeeld de gebruiker
	<code class="systemitem">bill</code> te kunnen laten aanmelden op
	<code class="systemitem">basie</code>:</p><pre class="screen">basie<code class="prompt">#</code> <strong class="userinput"><code>vipw</code></strong>
<strong class="userinput"><code>[voeg -bill::::::::: aan het einde toe, exit]</code></strong>
vipw: rebuilding the database...
vipw: done

basie<code class="prompt">#</code> <strong class="userinput"><code>cat /etc/master.passwd</code></strong>

root:[password]:0:0::0:0:The super-user:/root:/bin/csh
toor:[password]:0:0::0:0:The other super-user:/root:/bin/sh
daemon:*:1:1::0:0:Owner of many system processes:/root:/sbin/nologin
operator:*:2:5::0:0:System &amp;:/:/sbin/nologin
bin:*:3:7::0:0:Binaries Commands and Source,,,:/:/sbin/nologin
tty:*:4:65533::0:0:Tty Sandbox:/:/sbin/nologin
kmem:*:5:65533::0:0:KMem Sandbox:/:/sbin/nologin
games:*:7:13::0:0:Games pseudo-user:/usr/games:/sbin/nologin
news:*:8:8::0:0:News Subsystem:/:/sbin/nologin
man:*:9:9::0:0:Mister Man Pages:/usr/share/man:/sbin/nologin
bind:*:53:53::0:0:Bind Sandbox:/:/sbin/nologin
uucp:*:66:66::0:0:UUCP pseudo-user:/var/spool/uucppublic:/usr/libexec/uucp/uucico
xten:*:67:67::0:0:X-10 daemon:/usr/local/xten:/sbin/nologin
pop:*:68:6::0:0:Post Office Owner:/nonexistent:/sbin/nologin
nobody:*:65534:65534::0:0:Unprivileged user:/nonexistent:/sbin/nologin
-bill:::::::::
+:::::::::

basie<code class="prompt">#</code></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-netgroups"></a>29.4.7. Netgroups gebruiken</h3></div><div><span class="authorgroup">Geschreven door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Udo</span> <span class="surname">Erdelhoff</span></span>. </span></div></div></div><a id="idp86823504" class="indexterm"></a><p>De methode uit het vorige onderdeel werkt prima als er maar
	voor een beperkt aantal gebruikers en/of machines speciale
	regels nodig zijn.  Op grotere netwerken
	<span class="emphasis"><em>gebeurt</em></span> het gewoon dat er wordt vergeten
	om een aantal gebruikers de aanmeldrechten op gevoelige machines
	te ontnemen of dat zelfs iedere individuele machine aangepast
	moet worden, waardoor het voordeel van NIS teniet wordt gedaan:
	<span class="emphasis"><em>centraal</em></span> beheren.</p><p>De ontwikkelaars van NIS hebben dit probleem opgelost met
	<span class="emphasis"><em>netgroepen</em></span>.  Het doel en de semantiek
	kunnen vergeleken worden met de normale groepen die gebruikt
	worden op <span class="trademark">UNIX</span>® bestandssystemen.  De belangrijkste verschillen
	zijn de afwezigheid van een numeriek ID en de mogelijkheid om
	een netgroep aan te maken die zowel gebruikers als andere
	netgroepen bevat.</p><p>Netgroepen zijn ontwikkeld om gebruikt te worden voor grote,
	complexe netwerken met honderden gebruikers en machines.  Aan
	de ene kant is dat iets Goeds.  Aan de andere kant is het wel
	complex en bijna onmogelijk om netgroepen met een paar
	eenvoudige voorbeelden uit te leggen.  Dat probleem wordt in de
	rest van dit onderdeel duidelijk gemaakt.</p><p>Stel dat de succesvolle implementatie van  NIS in het lab de
	interesse heeft gewekt van een centrale beheerclub.  De volgende
	taak is het uitbreiden van het NIS-domein met een aantal andere
	machines op de campus.  De onderstaande twee tabellen bevatten
	de namen van de nieuwe gebruikers en de nieuwe machines met een
	korte beschijving.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Gebruikersnamen</th><th>Beschrijving</th></tr></thead><tbody><tr><td><code class="systemitem">alpha</code>,
		<code class="systemitem">beta</code></td><td>Gewone medewerkers van de IT-afdeling</td></tr><tr><td><code class="systemitem">charlie</code>,
		<code class="systemitem">delta</code></td><td>Junior medewerkers van de IT-afdeling</td></tr><tr><td><code class="systemitem">echo</code>,
		<code class="systemitem">foxtrott</code>,
		<code class="systemitem">golf</code>, ...</td><td>Gewone medewerkers</td></tr><tr><td><code class="systemitem">able</code>,
		<code class="systemitem">baker</code>, ...</td><td>Stagiairs</td></tr></tbody></table></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Machinenamen</th><th>Beschrijving</th></tr></thead><tbody><tr><td><code class="systemitem">war</code>, <code class="systemitem">death</code>,
		<code class="systemitem">famine</code>,
		<code class="systemitem">pollution</code></td><td>De belangrijkste servers.  Alleen senior
		medewerkers van de IT-afdeling mogen hierop
		aanmelden.</td></tr><tr><td><code class="systemitem">pride</code>, <code class="systemitem">greed</code>,
		<code class="systemitem">envy</code>, <code class="systemitem">wrath</code>,
		<code class="systemitem">lust</code>, <code class="systemitem">sloth</code></td><td>Minder belangrijke servers.  Alle leden van
		de IT-afdeling mogen aanmelden op deze machines.</td></tr><tr><td><code class="systemitem">one</code>, <code class="systemitem">two</code>,
		<code class="systemitem">three</code>, <code class="systemitem">four</code>,
		...</td><td>Gewone werkstations.  Alleen
		<span class="emphasis"><em>echte</em></span> medewerkers mogen zich op
		deze machines aanmelden.</td></tr><tr><td><code class="systemitem">trashcan</code></td><td>Een erg oude machine zonder kritische data.  Zelfs
		de stagiair mag deze doos gebruiken.</td></tr></tbody></table></div><p>Als deze restricties ingevoerd worden door iedere gebruiker
	afzonderlijk te blokkeren, dan wordt er een
	<code class="literal">-user</code> regel per
	systeem toegevoegd aan de <code class="filename">passwd</code> voor
	iedere gebruiker die niet mag aanmelden op dat systeem.  Als er
	maar één regel wordt vergeten, kan dat een
	probleem opleveren.  Wellicht lukt het nog dit juist in te
	stellen bij de bouw van een machine, maar het wordt
	<span class="emphasis"><em>echt</em></span> vergeten de regels toe te voegen voor
	nieuwe gebruikers in de productiefase.  Murphy was tenslotte een
	optimist.</p><p>Het gebruik van netgroepen biedt in deze situatie een aantal
	voordelen.  Niet iedere gebruiker hoeft separaat afgehandeld te
	worden.  Een gebruik kan aan een of meer groepen worden
	toegevoegd en aanmelden kan voor alle leden van zo'n groep
	worden toegestaan of geweigerd.  Als er een nieuwe machine wordt
	toegevoegd, dan hoeven alleen de aanmeldrestricties voor de
	netgroepen te worden ingesteld.  Als er een nieuwe gebruiker
	wordt toegevoegd, dan hoeft die alleen maar aan de juiste
	netgroepen te worden toegevoegd.  Die veranderingen zijn niet
	van elkaar afhankelijk: geen <span class="quote">&#8220;<span class="quote">voor iedere combinatie van
	gebruiker en machine moet het volgende ...</span>&#8221;</span>.  Als de
	NIS-opzet zorgvuldig is gepland, dan hoeft er maar
	één instellingenbestand gewijzigd te worden om
	toegang tot machines te geven of te ontnemen.</p><p>De eerst stap is het initialiseren van de NIS-afbeelding
	netgroup.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypinit&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypinit</span>(8)</span></a> van FreeBSD maakt deze map niet
	standaard, maar als die is gemaakt, ondersteunt de
	NIS-implementatie hem wel.  Een lege map wordt als volgt
	gemaakt:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>vi /var/yp/netgroup</code></strong></pre><p>Nu kan hij gevuld worden.  In het gebruikte voorbeeld zijn
	tenminste vier netgroepen:  IT-medewerkers, IT-junioren, gewone
	medewerkers en stagiars.</p><pre class="programlisting">IT_MW   (,alpha,test-domain)    (,beta,test-domain)
IT_APP  (,charlie,test-domain)  (,delta,test-domain)
USERS   (,echo,test-domain)     (,foxtrott,test-domain) \
        (,golf,test-domain)
STAGS   (,able,test-domain)     (,baker,test-domain)</pre><p><code class="literal">IT_MW</code>, <code class="literal">IT_APP</code>
	enzovoort, zijn de namen van de netgroepen.  Iedere groep tussen
	haakjes bevat een of meer gebruikersnamen voor die groep.  De
	drie velden binnen een groep zijn:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>De naam van de host of namen van de hosts waar de volgende
	    onderdelen geldig zijn.  Als er geen hostnaam wordt opgegeven
	    dan is de regel geldig voor alle hosts.  Als er wel een hostnaam
	    wordt opgegeven, dan wordt een donker, spookachtig en verwarrend
	    domein betreden.</p></li><li class="listitem"><p>De naam van de account die bij deze netgroep hoort.</p></li><li class="listitem"><p>Het NIS-domein voor de account.  Er kunnen accounts uit
	    andere NIS-domeinen geïmporteerd worden in een netgroep
	    als een beheerder zo ongelukkig is meerdere NIS-domeinen te
	    hebben.</p></li></ol></div><p>Al deze velden kunnen jokerkarakters bevatten.  Details
	daarover staan in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netgroup&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">netgroup</span>(5)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp86879696" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">De naam van een netgroep mag niet langer zijn dan acht
	  karakters, zeker niet als er andere besturingssystemen binnen
	  een NIS-domein worden gebruikt.  De namen zijn
	  hoofdlettergevoelig: alleen hoofdletters gebruiken voor de
	  namen van netgroepen is een makkelijke manier om onderscheid
	  te kunnen maken tussen gebruikers-, machine- en
	  netgroepnamen.</p><p xmlns="http://www.w3.org/1999/xhtml">Sommige NIS-cliënten (andere dan die op FreeBSD draaien)
	  kunnen niet omgaan met netgroepen met veel leden.  Sommige
	  oudere versies van <span class="trademark">SunOS</span>&#8482; gaan bijvoorbeeld lastig doen als
	  een netgroep meer dan 15 <span class="emphasis"><em>leden</em></span> heeft.
	  Dit kan omzeild worden door meerdere subnetgroepen te maken
	  met 15 gebruikers of minder en een echte netgroep die de
	  subnetgroepen bevat:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">BIGGRP1  (,joe1,domain)  (,joe2,domain)  (,joe3,domain) [...]
BIGGRP2  (,joe16,domain)  (,joe17,domain) [...]
BIGGRP3  (,joe31,domain)  (,joe32,domain)
BIGGROUP  BIGGRP1 BIGGRP2 BIGGRP3</pre><p xmlns="http://www.w3.org/1999/xhtml">Dit proces kan herhaald worden als er meer dan 225
	  gebruikers in een netgroep moeten.</p></div><p>Het activeren en distribueren van de nieuwe NIS-map is
	eenvoudig:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
ellington<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong></pre><p>Hiermee worden drie nieuwe NIS-afbeeldingen gemaakt:
	<code class="filename">netgroup</code>,
	<code class="filename">netgroup.byhost</code> en
	<code class="filename">netgroup.byuser</code>.  Met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypcat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypcat</span>(1)</span></a> kan
	bekeken worden op de nieuwe NIS-afbeeldingen beschikbaar zijn:</p><pre class="screen">ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup</code></strong>
ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup.byhost</code></strong>
ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup.byuser</code></strong></pre><p>De uitvoer van het eerste commando hoort te lijken op de
	inhoud van <code class="filename">/var/yp/netgroup</code>.  Het tweede
	commando geeft geen uitvoer als er geen host-specifieke
	netgroepen zijn ingesteld.  Het derde commando kan gebruikt
	worden om een lijst van netgroepen voor een gebruiker op te
	vragen.</p><p>Het instellen van de cliënt is redelijk eenvoudig.  Om
	de server <code class="systemitem">war</code> in te stellen hoeft alleen met
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a> de volgende regel in de regel daarna vervangen te
	worden:</p><pre class="programlisting">+:::::::::</pre><p>Vervang de bovenstaande regel in de onderstaande.</p><pre class="programlisting">+@IT_MW:::::::::</pre><p>Nu worden alleen de gebruikers die in de netgroep
	<code class="literal">IT_MW</code> geïmporteerd in de
	wachtwoorddatabase van de host <code class="systemitem">war</code>, zodat
	alleen die gebruikers zich kunnen aanmelden.</p><p>Helaas zijn deze beperkingen ook van toepassing op de
	functie <code class="literal">~</code> van de shell en alle routines
	waarmee tussen gebruikersnamen en numerieke gebruikers ID's
	wordt gewisseld.  Met andere woorden: <code class="command">cd
	~user</code> werkt niet,
	<code class="command">ls &#8211;l</code> toont het numerieke ID in plaats
	van de gebruikersnaam en <code class="command">find . &#8211;user joe
	&#8211;print</code> faalt met de foutmelding <span class="errorname">No
	such user</span>.  Om dit te repareren moeten alle
	gebruikers geïmporteerd worden, <span class="emphasis"><em>zonder ze het
	  recht te geven aan te melden op een server</em></span>.</p><p>Dit kan gedaan worden door nog een regel aan
	<code class="filename">/etc/master.passwd</code> toe te voegen:</p><pre class="programlisting">+:::::::::/sbin/nologin</pre><p>Dit betekent <span class="quote">&#8220;<span class="quote">importeer alle gebruikers, maar vervang
	  de shell door <code class="filename">/sbin/nologin</code></span>&#8221;</span>.  Ieder
	veld in een <code class="literal">passwd</code> regel kan door een
	standaardwaarde vervangen worden in
	<code class="filename">/etc/master.passwd</code>.</p><div xmlns="" class="warning"><h3 class="admontitle">Waarschuwing: </h3><p xmlns="http://www.w3.org/1999/xhtml">De regel <code class="literal">+:::::::::/sbin/nologin</code> moet
	  na <code class="literal">+@IT_MW:::::::::</code> komen.  Anders krijgen
	  alle gebruikers die uit NIS-komen
	  <code class="filename">/sbin/nologin</code> als aanmeldshell.</p></div><p>Na deze wijziging hoeft er nog maar één
	NIS-afbeelding gewijzigd te worden als er een nieuwe medewerker
	komt bij de IT-afdeling.  Dezelfde aanpak kan gebruikt worden
	voor de minder belangrijke servers door de oude regel
	<code class="literal">+:::::::::</code> in de lokale versie van
	<code class="filename">/etc/master.passwd</code> door iets als het
	volgende te vervangen:</p><pre class="programlisting">+@IT_MW:::::::::
+@IT_APP:::::::::
+:::::::::/sbin/nologin</pre><p>Voor normale werkstations zijn het de volgende regels:</p><pre class="programlisting">+@IT_MW:::::::::
+@USERS:::::::::
+:::::::::/sbin/nologin</pre><p>En dat zou allemaal leuk en aardig zijn als er niet na een
	paar weken een beleidsverandering komt: de IT-afdeling gaat
	stagiairs aannemen.  De IT-stagiairs mogen de normale
	werkstations en de minder belangrijke servers gebruiken en de
	juniorbeheerders mogen gaan aanmelden op de hoofdservers.  Dat
	kan door een nieuwe groep <code class="literal">IT_STAG</code> te maken en
	de nieuwe IT-stagiairs toe te voegen aan die netgroep en dan de
	instellingen op iedere machine te gaan veranderen.  Maar zoals
	het spreekwoord zegt: <span class="quote">&#8220;<span class="quote">Fouten in een centrale planning
	  leiden tot complete chaos.</span>&#8221;</span></p><p>Deze situaties kunnen voorkomen worden door gebruik te maken
	van de mogelijkheid in NIS om netgroepen in netgroepen op te
	nemen.  Het is mogelijk om rolgebaseerde netgroepen te maken.
	Er kan bijvoorbeeld een netgroep <code class="literal">BIGSRV</code>
	gemaakt worden om het aanmelden op de belangrijke servers te
	beperken en er kan een andere netgroep
	<code class="literal">SMALLSRV</code> voor de minder belangrijke servers
	zijn en een derde netgroep met de naam
	<code class="literal">USERBOX</code> voor de normale werkstations.  Al die
	netgroepen kunnen de netgroepen bevatten die op die machines
	mogen aanmelden.  De nieuwe regels in de NIS-afbeelding netgroup
	zien er dan zo uit:</p><pre class="programlisting">BIGSRV    IT_MW  IT_APP
SMALLSRV  IT_MW  IT_APP  ITSTAG
USERBOX   IT_MW  ITSTAG USERS</pre><p>Deze methode voor het instellen van aanmeldbeperkingen werkt
	redelijk goed als er groepen van machines gemaakt kunnen worden
	met identieke beperkingen.  Helaas blijkt dat eerder
	uitzondering dan regel.  Meestal moet het mogelijk zijn om per
	machine in te stellen wie zich wel en wie zich niet mogen
	aanmelden.</p><p>Daarom is het ook mogelijk om via machinespecifieke
	netgroepen de hierboven aangegeven beleidswijziging op te
	vangen.  In dat scenario bevat
	<code class="filename">/etc/master.passwd</code> op iedere machine twee
	regels die met <span class="quote">&#8220;<span class="quote">+</span>&#8221;</span> beginnen.  De eerste voegt de
	netgroep toe met de accounts die op de machine mogen aanmelden
	en de tweede voegt alle andere accounts toe met
	<code class="filename">/sbin/nologin</code> als shell.  Het is verstandig
	om als naam van de netgroep de machinenaam in
	<span class="quote">&#8220;<span class="quote">HOOFDLETTERS</span>&#8221;</span> te gebruiken.  De regels zien er
	ongeveer als volgt uit:</p><pre class="programlisting">+@<em class="replaceable"><code>MACHINENAAM</code></em>:::::::::
+:::::::::/sbin/nologin</pre><p>Als dit voor alle machines is gedaan, dan hoeven de lokale
	versies van <code class="filename">/etc/master.passwd</code> nooit meer
	veranderd te worden.  Alle toekomstige wijzigingen kunnen dan
	gemaakt worden door de NIS-afbeelding te wijzigen.  Hieronder
	staat een voorbeeld van een mogelijke netgroep map voor het
	beschreven scenario met een aantal toevoegingen:</p><pre class="programlisting"># Definieer eerst de gebruikersgroepen
IT_MW     (,alpha,test-domain)    (,beta,test-domain)
IT_APP    (,charlie,test-domain)  (,delta,test-domain)
DEPT1     (,echo,test-domain)     (,foxtrott,test-domain)
DEPT2     (,golf,test-domain)     (,hotel,test-domain)
DEPT3     (,india,test-domain)    (,juliet,test-domain)
ITSTAG    (,kilo,test-domain)     (,lima,test-domain)
D_STAGS   (,able,test-domain)     (,baker,test-domain)
#
# En nu een aantal groepen op basis van rollen
USERS     DEPT1   DEPT2     DEPT3
BIGSRV    IT_MW   IT_APP
SMALLSRV  IT_MW   IT_APP    ITSTAG
USERBOX   IT_MW   ITSTAG    USERS
#
# Een een groep voor speciale taken.
# Geef echo en golf toegang tot de anti-virus machine.
SECURITY  IT_MW   (,echo,test-domain)  (,golf,test-domain)
#
# Machinegebaseerde netgroepen
# Hoofdservers
WAR       BIGSRV
FAMINE    BIGSRV
# Gebruiker india heeft toegang tot deze server nodig.
POLLUTION  BIGSRV  (,india,test-domain)
#
# Deze is erg belangrijk en heeft strengere toegangseisen nodig.
DEATH     IT_MW
#
# De anti-virus machine als hierboven genoemd.
ONE       SECURITY
#
# Een machine die maar door 1 gebruiker gebruikt mag worden.
TWO       (,hotel,test-domain)
# [...hierna volgen de andere groepen]</pre><p>Als er een soort database wordt gebruikt om de
	gebruikersaccounts te beheren, dan is het in ieder geval nodig
	dat ook het eerste deel van de afbeelding met de
	databaserapportagehulpmiddelen gemaakt kan worden.  Dan krijgen
	nieuwe gebruikers automatisch toegang tot de machines.</p><p>Nog een laatste waarschuwing: het is niet altijd aan te
	raden gebruik te maken van machinegebaseerde netgroepen.  Als er
	tientallen of zelfs honderden gelijke machines voor bijvoorbeeld
	studentenruimtes worden uitgerold, dan is het verstandiger
	rolgebaseerde netgroepen te gebruiken in plaats van
	machinegebaseerde netgroepen om de grootte van de NIS-afbeelding
	binnen de perken te houden.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86921168"></a>29.4.8. Belangrijk om te onthouden</h3></div></div></div><p>In een NIS-omgeving werken een aantal dingen wel
	anders.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Als er een gebruiker toegevoegd moet worden, dan moet
	    die <span class="emphasis"><em>alleen</em></span> toegevoegd worden aan de
	    master NIS-server en <span class="emphasis"><em>mag niet vergeten worden dat
	    de NIS-afbeeldingen herbouwd moeten worden</em></span>.  Als
	    dit wordt vergeten, dan kan de nieuwe gebruiker nergens
	    anders aanmelden dan op de NIS-master.  Als bijvoorbeeld een
	    nieuwe gebruiker <code class="systemitem">jsmith</code> toegevoegd moet
	    worden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw useradd jsmith</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make test-domain</code></strong></pre><p>Er kan ook <code class="command">adduser jsmith</code> in plaats
	    van <code class="command">pw useradd jsmith</code> gebruikt
	    worden.</p></li><li class="listitem"><p><span class="emphasis"><em>De beheeraccounts moeten buiten de
	      NIS-afbeeldingen gehouden worden</em></span>.  Het is niet
	    handig als de beheeraccounts en wachtwoorden naar machines
	    waarop gebruikers zich aanmelden die geen toegang tot die
	    informatie horen te hebben zouden gaan.</p></li><li class="listitem"><p><span class="emphasis"><em>De NIS-master en slave moeten veilig blijven
	      en zo min mogelijk niet beschikbaar zijn</em></span>.  Als de
	    machine wordt gehackt of als hij wordt uitgeschakeld, dan
	    kunnen er in theorie nogal wat mensen niet meer aanmelden.</p><p>Dit is de belangrijkste zwakte van elk gecentraliseerd
	    beheersysteem.  Als de NIS-servers niet goed beschermd
	    worden, dan worden veel gebruikers boos!</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86943312"></a>29.4.9. NIS v1-compatibiliteit</h3></div></div></div><p><span class="application">ypserv</span> voor FreeBSD biedt wat
	ondersteuning voor NIS v1 cliënten.  De NIS-implementatie
	van FreeBSD gebruikt alleen het NIS v2 protocol, maar andere
	implementaties bevatten ondersteuning voor het v1 protocol voor
	achterwaartse compatibiliteit met oudere systemen.  De
	<span class="application">ypbind</span>-daemons die bij deze systemen
	zitten proberen een binding op te zetten met een NIS v1 server,
	hoewel dat niet per se ooit nodig is (en ze gaan misschien nog
	wel door met broadcasten nadat ze een antwoord van een v2
	server hebben ontvangen).  Het is belangrijk om te melden dat
	hoewel ondersteuning voor gewone cliëntoproepen aanwezig
	is, deze versie van <span class="application">ypserv</span> geen
	overdrachtsverzoeken voor v1-afbeeldingen af kan handelen.
	Daarom kan <span class="application">ypserv</span> niet gebruikt
	worden als master of slave in combinatie met oudere NIS-servers
	die alleen het v1 protocol ondersteunen.  Gelukkig worden er in
	deze tijd niet meer zoveel van deze servers gebruikt.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-nis-server-is-client"></a>29.4.10. NIS-servers die ook NIS-cliënten zijn</h3></div></div></div><p>Het is belangrijk voorzichtig om te gaan met het draaien van
	<span class="application">ypserv</span> in een multi-server domein
	waar de server machines ook NIS-cliënten zijn.  Het is in
	het algemeen verstandiger om de servers te dwingen met zichzelf
	te binden dan ze toe te staan een bindverzoek te broadcasten en
	het risico te lopen dat ze een binding met elkaar maken.  Er
	kunnen vreemde fouten optreden als een van de servers plat gaat
	als er andere servers van die server afhankelijk zijn.  Na
	verloop van tijd treedt op de cliënten wel een timeout op
	en verbinden ze met een andere server, maar de daarmee gepaard
	gaande vertraging kan aanzienlijk zijn en de foutmodus is nog
	steeds van toepassing, omdat de servers dan toch weer opnieuw
	een verbinding met elkaar kunnen vinden.</p><p>Het is mogelijk een host aan een specifieke server te binden
	door aan <code class="command">ypbind</code> de vlag
	<code class="option">&#8211;S</code> mee te geven.  Om dit niet iedere keer
	handmatig na een herstart te hoeven uitvoeren, kan de volgende
	regel worden opgenomen in <code class="filename">/etc/rc.conf</code> van
	de NIS-server:</p><pre class="programlisting">nis_client_enable="YES"	# start ook het cliënt gedeelte
nis_client_flags="-S <em class="replaceable"><code>NIS domain</code></em>,<em class="replaceable"><code>server</code></em>"</pre><p>In <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypbind&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypbind</span>(8)</span></a> staat meer informatie.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86959696"></a>29.4.11. Wachtwoordformaten</h3></div></div></div><a id="idp86960336" class="indexterm"></a><p>Een van de meest voorkomende problemen bij het implementeren
	van NIS is de compatibiliteit van het wachtwoordformaat.  Als
	een NIS-server wachtwoorden gebruikt die met DES gecodeerd zijn,
	dan kunnen alleen cliënten die ook DES gebruiken
	ondersteund worden.  Als er bijvoorbeeld <span class="trademark">Solaris</span>&#8482;
	NIS-cliënten in een netwerk zijn, dan moet er vrijwel zeker
	gebruik gemaakt worden van met DES gecodeerde wachtwoorden.</p><p>Van welk formaat cliënten en servers gebruik maken is
	te zien in <code class="filename">/etc/login.conf</code>.  Als een host
	gebruik maakt van met DES gecodeerde wachtwoorden, dan staat er
	in de klasse <code class="literal">default</code> een regel als de
	volgende:</p><pre class="programlisting">default:\
	:passwd_format=des:\
	:copyright=/etc/COPYRIGHT:\
	[Overige regels weggelaten]</pre><p>Andere mogelijke waarden voor
	<code class="literal">passwd_format</code> zijn
	<code class="literal">blf</code> en <code class="literal">md5</code>
	(respectievelijk voor Blowfish en MD5 gecodeerde
	wachtwoorden).</p><p>Als er wijzigingen gemaakt zijn aan
	<code class="filename">/etc/login.conf</code> dan moet de
	login capability database herbouwd worden door het volgende
	commando als <code class="systemitem">root</code> uit te voeren:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cap_mkdb /etc/login.conf</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Het formaat van de wachtwoorden die al in
	  <code class="filename">/etc/master.passwd</code> staan worden niet
	  bijgewerkt totdat een gebruiker zijn wachtwoord voor de eerste
	  keer wijzigt <span class="emphasis"><em>nadat</em></span> de login capability
	  database is herbouwd.</p></div><p>Om te zorgen dat de wachtwoorden in het gekozen formaat zijn
	gecodeerd, moet daarna gecontroleerd worden of de waarde
	<code class="literal">crypt_default</code> in
	<code class="filename">/etc/auth.conf</code> de voorkeur geeft aan het
	gekozen formaat.  Om dat te realiseren dient het gekozen formaat
	vooraan gezet te worden in de lijst.  Als er bijvoorbeeld
	gebruik gemaakt wordt van DES gecodeerde wachtwoorden, dan hoort
	de regel er als volgt uit te zien:</p><pre class="programlisting">crypt_default	=	des blf md5</pre><p>Als de bovenstaande stappen op alle FreeBSD gebaseerde
	NIS-servers en cliënten zijn uitgevoerd, dan is het zeker
	dat ze het allemaal eens zijn over welk wachtwoordformaat er op
	het netwerk wordt gebruikt.  Als er problemen zijn bij de
	authenticatie op een NIS-cliënt, dan is dit een prima
	startpunt voor het uitzoeken waar de problemen vandaan komen.
	Nogmaals: als er een NIS-server in een heterogene omgeving wordt
	geplaatst, dan is het waarschijnlijk dat er gebruik gemaakt moet
	worden van DES op alle systemen, omdat dat de laagst
	overeenkomende standaard is.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-nfs.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="network-dhcp.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">29.3. Netwerkbestandssysteem (NFS) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 29.5. Automatisch netwerk instellen (DHCP)</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>