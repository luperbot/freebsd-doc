<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>11.2. Installatie</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="linuxemu.html" title="Hoofdstuk 11. Linux® binaire compatibiliteit" /><link rel="prev" href="linuxemu.html" title="Hoofdstuk 11. Linux® binaire compatibiliteit" /><link rel="next" href="linuxemu-mathematica.html" title="11.3. Mathematica® installeren" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.2. Installatie</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="linuxemu.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 11. <span class="trademark">Linux</span>® binaire compatibiliteit</th><td width="20%" align="right"> <a accesskey="n" href="linuxemu-mathematica.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-lbc-install"></a>11.2. Installatie</h2></div></div></div><a id="idp74398544" class="indexterm"></a><p><span class="trademark">Linux</span>® binaire compatibiliteit staat standaard niet aan.  De
      gemakkelijkste manier om deze functionaliteit aan te zetten is
      door het <code class="literal">linux</code> KLD object (<span class="quote">&#8220;<span class="quote">Kernel
      LoaDable object</span>&#8221;</span>) te laden.  Deze module kan geladen
      worden door het volgende commando als <code class="systemitem">root</code>
      uit te voeren:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload linux</code></strong></pre><p>Als <span class="trademark">Linux</span>® compatibiliteit altijd aan moet staan, dan moet
      de volgende regel aan <code class="filename">/etc/rc.conf</code>
      toegevoegd worden:</p><pre class="programlisting">linux_enable="YES"</pre><p>Met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldstat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldstat</span>(8)</span></a> kan gecontroleerd worden of de KLD
      geladen is:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kldstat</code></strong>
Id Refs Address    Size     Name
 1    2 0xc0100000 16bd8    kernel
 7    1 0xc24db000 d000     linux.ko</pre><a id="idp74405968" class="indexterm"></a><p>Als het om enige reden ongewenst of onmogelijk is de KLD te
      laden, dan kan de <span class="trademark">Linux</span>® binaire compatibiliteit statisch in de
      kernel gecompileerd worden door
      <code class="literal">options COMPAT_LINUX</code> aan het
      kernelinstellingenbestand toe te voegen.  Daarna kan de nieuwe
      kernel zoals beschreven in <a class="xref" href="kernelconfig.html" title="Hoofdstuk 9. De FreeBSD-kernel instellen">Hoofdstuk 9, <em>De FreeBSD-kernel instellen</em></a>
      geïnstalleerd worden.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74408784"></a>11.2.1. <span class="trademark">Linux</span>® runtime bibliotheken installeren</h3></div></div></div><a id="idp74409808" class="indexterm"></a><p>Dit kan op twee manieren gedaan worden: door de <a class="link" href="linuxemu-lbc-install.html#linuxemu-libs-port" title="11.2.1.1. Installeren uit de linux_base port">linux_base</a> port te
	gebruiken of door ze <a class="link" href="linuxemu-lbc-install.html#linuxemu-libs-manually" title="11.2.1.2. Bibliotheken handmatig installeren">handmatig</a> te
	installeren.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-port"></a>11.2.1.1. Installeren uit de linux_base port</h4></div></div></div><a id="idp74413904" class="indexterm"></a><p>Dit is verreweg de gemakkelijkste weg om te bewandelen om de
	  runtime bibliotheken te installeren.  Het is net als het installeren
	  van andere ports uit de <a class="link" href="ports.html" title="Hoofdstuk 5. Applicaties installeren: pakketten en ports">Portscollectie</a>.
	  Dit kan met het volgende commando:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/emulators/linux_base-f10</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install distclean</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Op FreeBSD-systemen vóór FreeBSD 8.0 dient u de
	    port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base-fc4/pkg-descr">emulators/linux_base-fc4</a> in
	    plaats van <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base-f10/pkg-descr">emulators/linux_base-f10</a> te
	    gebruiken.</p></div><p>Nu is er werkende <span class="trademark">Linux</span>® binaire compatibiliteit.
	  Sommige programma's kunnen klagen over onjuiste kleine
	  versies van de systeembibliotheken.  Over het algemeen
	  schijnt dit echter geen probleem te zijn.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Er kunnen verschillende versies van de <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a> port
	    beschikbaar zijn, overeenkomend met verschillende versies
	    van verscheidene <span class="trademark">Linux</span>® distributies.  Het is verstandig
	    de port te installeren die het meest voldoet aan de eisen
	    van de <span class="trademark">Linux</span>® applicaties die geïnstalleerd gaan
	    worden.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-manually"></a>11.2.1.2. Bibliotheken handmatig installeren</h4></div></div></div><p>Als de Portscollectie niet is geïnstalleerd, kunnen
	  de bibliotheken met de hand geïnstalleerd worden.  Om
	  alles te laten werken moeten de <span class="trademark">Linux</span>® gedeelde bibliotheken
	  waarvan het programma afhankelijk is en de runtime linker
	  geïnstalleerd worden.  Ook moet een <span class="quote">&#8220;<span class="quote">shadow
	    root</span>&#8221;</span> map aangemaakt worden,
	  <code class="filename">/compat/linux</code>, voor <span class="trademark">Linux</span>® bibliotheken
	  op een FreeBSD systeem.  Elke gedeelde bibliotheek die wordt
	  geopend door <span class="trademark">Linux</span>® programma's die op FreeBSD draaien, kijken
	  eerst in deze boomstructuur.  Dus als een <span class="trademark">Linux</span>® programma
	  bijvoorbeeld <code class="filename">/lib/libc.so</code> laadt,
	  probeert FreeBSD eerst
	  <code class="filename">/compat/linux/lib/libc.so</code> te openen, en
	  als die niet bestaat, probeert het
	  <code class="filename">/lib/libc.so</code> proberen.  Gedeelde
	  bibliotheken moeten in de schaduwmapstructuur
	  geïnstalleerd worden in plaats van in de paden die het
	  <span class="trademark">Linux</span>® <code class="command">ld.so</code> rapporteert.</p><p>In het algemeen geldt dat alleen de eerste paar keer
	  dat een <span class="trademark">Linux</span>® binary wordt geïnstalleerd op een FreeBSD
	  systeem naar de gedeelde bibliotheken gezocht wordt waar
	  <span class="trademark">Linux</span>®-binairen van afhankelijk zijn.  Na een tijd is de
	  verzameling van <span class="trademark">Linux</span>® gedeelde bibliotheken op een systeem
	  voldoende groot om nieuw geïmporteerde <span class="trademark">Linux</span>®-binairen
	  te kunnen draaien zonder enig extra werk.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74438864"></a>11.2.1.3. Extra gedeelde bibliotheken installeren</h4></div></div></div><a id="idp74439504" class="indexterm"></a><p>Wat als de <code class="filename">linux_base</code> port is
	  geïnstalleerd en een applicatie nog steeds klaagt over
	  ontbrekende gedeelde bibliotheken?  Op zich zijn er twee
	  mogelijkheden (voor het opvolgen van deze instructies zijn
	  <code class="systemitem">root</code> rechten op een FreeBSD systeem
	  vereist).</p><p>Als er toegang is tot een <span class="trademark">Linux</span>® systeem kan gekeken
	  worden welke gedeelde bibliotheken de applicatie nodig heeft
	  en kunnen ze gekopieerd worden naar het FreeBSD systeem.  Dit
	  wordt toegelicht in het volgende voorbeeld:</p><div class="informalexample"><p>Stel dat FTP gebruikt is om de <span class="trademark">Linux</span>® binary van
	    <span class="application">Doom</span> op te halen en die op een
	    <span class="trademark">Linux</span>® systeem staat waar toegang tot is.  Dan kan met
	    <code class="command">ldd linuxdoom</code> gecontroleerd worden welke
	    gedeelde bibliotheken er nodig zijn:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ldd linuxdoom</code></strong>
libXt.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libXt.so.3.1.0
libX11.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libX11.so.3.1.0
libc.so.4 (DLL Jump 4.5pl26) =&gt; /lib/libc.so.4.6.29</pre><a id="idp74449872" class="indexterm"></a><p>Alle bestanden uit de laatste kolom zijn nodig en
	    moeten onder <code class="filename">/compat/linux</code> komen te
	    staat en de namen uit de eerste kolom moeten er als
	    symbolische links naar verwijzen.  Dit betekent dat
	    uiteindelijk deze bestanden op een FreeBSD systeem
	    staan:</p><pre class="screen">/compat/linux/usr/X11/lib/libXt.so.3.1.0
/compat/linux/usr/X11/lib/libXt.so.3 -&gt; libXt.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3 -&gt; libX11.so.3.1.0
/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Als er al een <span class="trademark">Linux</span>® gedeelde bibliotheek met een
		groot revisienummer overeenstemmend met de eerste kolom
		van de <code class="command">ldd</code> uitvoer is, dan hoeft het
		bestand uit de laatste kolom niet naar een systeem
		gekopieerd te worden.  Het bestand dat er al staat moet
		werken.  Het is aan te raden om de gedeelde bibliotheek
		sowieso te kopiëren als het een nieuwere versie
		is.  De oude kan verwijderd worden, zolang de
		symbolische link maar naar de nieuwe wijst.  Dus als
		deze bibliotheken op een systeem staan:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.27
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.27</pre><p xmlns="http://www.w3.org/1999/xhtml">en een nieuwe binary zegt een latere versie nodig
		te hebben volgens de uitvoer van
		<code class="command">ldd</code>:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">libc.so.4 (DLL Jump 4.5pl26) -&gt; libc.so.4.6.29</pre><p xmlns="http://www.w3.org/1999/xhtml">Als slechts één of twee versies
		verouderd zijn in het laatste cijfer, dan hoeft
		<code class="filename">/lib/libc.so.4.6.29</code> niet
		gekopieerd te worden, omdat het programma goed moet
		werken met de ietwat oudere versie.  Als er echter
		behoefte aan is, kan besloten worden om
		<code class="filename">libc.so</code> sowieso te verplaatsen,
		en dat resulteert in:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.29
/compat/linux/libc.so.4 -&gt; lbic.so.4.6.29</pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Het symbolische linkmechanisme is
		<span class="emphasis"><em>alleen</em></span> nodig voor
		<span class="trademark">Linux</span>®-binairen.  De FreeBSD runtime linker zorgt zelf
		voor het kijken naar passende grote revisienummers en
		daar hoeft geen zorg over te bestaan.</p></div></blockquote></div></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74459216"></a>11.2.2. <span class="trademark">Linux</span>® ELF-binairen installeren</h3></div></div></div><a id="idp74460240" class="indexterm"></a><p>ELF-binairen hebben soms een extra stap van
	<span class="quote">&#8220;<span class="quote">branding</span>&#8221;</span> nodig.  Als er ongemerkte ELF-binairen
	worden gedraaid, ontstaat er een foutmelding zoals de
	volgende:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>./mijn-linux-elf-binary</code></strong>
ELF binary type not known
Abort</pre><p>Om de FreeBSD kernel te helpen FreeBSD ELF-binairen en <span class="trademark">Linux</span>®
	binairen uit elkaar te houden, kan <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a> gebruikt
	worden.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>brandelf -t Linux mijn-linux-elf-binary</code></strong></pre><a id="idp74470224" class="indexterm"></a><p>De GNU gereedschapskist plaatst nu automatisch de juiste
	merkinformatie in ELF-binairen , dus deze stap zou steeds
	overbodiger moeten worden in de toekomst.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74471248"></a>11.2.3. Een willekeurige toepassing gebaseerd op Linux RPM
	installeren</h3></div></div></div><p>FreeBSD heeft zijn eigen pakketdatabase die wordt gebruikt om alle
	ports te volgen (ook <span class="trademark">Linux</span>® ports).  De <span class="trademark">Linux</span>® RPM-database wordt dus
	niet gebruikt (noch ondersteund).</p><p>Als u echter een willekeurige toepassing die op <span class="trademark">Linux</span>® RPM is
	gebaseerd moet installeren kan dit bereikt worden met:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /compat/linux</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rpm2cpio -q &lt; /pad/naar/linux.archief.rpm | cpio -id</code></strong></pre><p>Draai daarna brandelf op de geïnstalleerde ELF-binairen (niet
	de bibliotheken!).  Een schone deïnstallatie is niet mogelijk, maar
	het kan helpen met testen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74476368"></a>11.2.4. De hostnaamresolver instellen</h3></div></div></div><pre class="screen">resolv+: "bind" is an invalid keyword resolv+:
"hosts" is an invalid keyword</pre><p>Als DNS niet werkt of de bovenstaande melding ontstaat, dan
	moet <code class="filename">/compat/linux/etc/host.conf</code> ingesteld
	worden met daarin:</p><pre class="programlisting">order hosts, bind
multi on</pre><p>De volgorde geeft aan dat <code class="filename">/etc/hosts</code>
	als eerste doorzocht wordt en DNS als tweede.  Als
	<code class="filename">/compat/linux/etc/host.conf</code> niet
	geïnstalleerd is, vinden <span class="trademark">Linux</span>® applicaties
	<code class="filename">/etc/host.conf</code> van FreeBSD en klagen ze over
	de incompatibele FreeBSD syntaxis.  <code class="literal">bind</code> moet
	verwijderd worden als er geen naamserver is ingesteld die
	gebruik maakt van <code class="filename">/etc/resolv.conf</code>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="linuxemu.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="linuxemu.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="linuxemu-mathematica.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">Hoofdstuk 11. <span class="trademark">Linux</span>® binaire compatibiliteit </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 11.3. <span class="trademark">Mathematica</span>® installeren</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>