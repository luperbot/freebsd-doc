<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>6.18. 使用 wxWidgets</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter 手册" /><link rel="up" href="special.html" title="第 6 章 特殊情况" /><link rel="prev" href="using-sdl.html" title="6.17. 使用 SDL" /><link rel="next" href="using-lua.html" title="6.19. 使用 Lua" /><link rel="copyright" href="trademarks.html" title="法律声明" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.18. 使用 <span class="application">wxWidgets</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-sdl.html">上一页</a> </td><th width="60%" align="center">第 6 章 特殊情况</th><td width="20%" align="right"> <a accesskey="n" href="using-lua.html">下一页</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-wx"></a>6.18. 使用 <span class="application">wxWidgets</span></h2></div></div></div><p>这一节介绍了在 ports tree 中的
	<span class="application">wxWidgets</span> 库的现状，
	以及它与 ports 系统的集成。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-introduction"></a>6.18.1. 介绍</h3></div></div></div><p>许多不同版本的
	  <span class="application">wxWidgets</span> 库之间是存在相互冲突的 (它们会安装同名的文件)
	  在 ports 系统中， 这一问题是通过将不同的版本以包含版本号后缀的名字安装来解决的。</p><p>这样做的一个最明显的缺点是， 应用程序必须进行修改， 才能找到所希望的版本。
	  幸运的是， 多数应用程序会调用 <code class="command">wx-config</code> 脚本来确定需要的编译器和连接器选项。
	  这个脚本会随可用的版本不同而有不同的名字。 主要的应用程序都会尊重环境变量的配置，
	  或提供一个 configure 参数， 用以指定调用哪个 <code class="command">wx-config</code>。
	  如果不是这样的话， 就需要对应用程序打补丁了。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-version"></a>6.18.2. 版本的选择</h3></div></div></div><p>为了让您的 port 使用指定版本的
	  <span class="application">wxWidgets</span>， 可以定义两个变量 (如果只定义了一个，
	  则另一个会取默认值)：</p><div class="table"><a id="wx-ver-sel-table"></a><div class="table-title">表 6.24. 用于选择 <span class="application">wxWidgets</span>
	    版本的变量</div><div class="table-contents"><table summary="用于选择 wxWidgets&#10;&#9;    版本的变量" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>变量</th><th>说明</th><th>默认值</th></tr></thead><tbody><tr><td><code class="varname">USE_WX</code></td><td>列出这个 port 能使用的版本</td><td>全部版本</td></tr><tr><td><code class="varname">USE_WX_NOT</code></td><td>列出这个 port 不能使用的版本</td><td>无</td></tr></tbody></table></div></div><br class="table-break" /><p>下面是可用的
	  <span class="application">wxWidgets</span> 版本， 以及对应的
	  ports：</p><div class="table"><a id="idp69096016"></a><div class="table-title">表 6.25. 可用的 <span class="application">wxWidgets</span>
	    versions</div><div class="table-contents"><table summary="可用的 wxWidgets&#10;&#9;    versions" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>版本</th><th>Port</th></tr></thead><tbody><tr><td><code class="literal">2.4</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/wxgtk24/pkg-descr">x11-toolkits/wxgtk24</a></td></tr><tr><td><code class="literal">2.6</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/wxgtk26/pkg-descr">x11-toolkits/wxgtk26</a></td></tr><tr><td><code class="literal">2.8</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/wxgtk28/pkg-descr">x11-toolkits/wxgtk28</a></td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">从 <code class="literal">2.5</code> 版开始， 也提供了对应的
	    Unicode 版本， 这种版本可以通过 slave port 安装，
	    与普通版本相比， 它会多一个 <code class="literal">-unicode</code> 后缀，
	    不过这可以通过使用变量来处理 (请参见 <a class="xref" href="using-wx.html#wx-unicode" title="6.18.4. Unicode">第 6.18.4 节 “Unicode”</a>)。</p></div><p>在 <a class="xref" href="using-wx.html#wx-ver-sel-table" title="表 6.24. 用于选择 wxWidgets 版本的变量">表 6.24 “用于选择 <span class="application">wxWidgets</span>
	    版本的变量”</a> 中的变量，
	  可以设为下列值或由空格分隔的组合：</p><div class="table"><a id="idp69106768"></a><div class="table-title">表 6.26. <span class="application">wxWidgets</span> 版本</div><div class="table-contents"><table summary="wxWidgets 版本" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>说明</th><th>例子</th></tr></thead><tbody><tr><td>单个版本</td><td><code class="literal">2.4</code></td></tr><tr><td>某版本以上版本</td><td><code class="literal">2.4+</code></td></tr><tr><td>某版本以下版本</td><td><code class="literal">2.6-</code></td></tr><tr><td>某段版本 (版本号较小的必须在前)</td><td><code class="literal">2.4-2.6</code></td></tr></tbody></table></div></div><br class="table-break" /><p>除此之外， 还有一些用以从可用的本那本中选择所希望的版本的变量。
	  这种变量也可以设为一组版本， 而靠前的版本的优先级更高。</p><div class="table"><a id="idp69115984"></a><div class="table-title">表 6.27. 用于选择希望的版本的
	    <span class="application">wxWidgets</span> versions</div><div class="table-contents"><table summary="用于选择希望的版本的&#10;&#9;    wxWidgets versions" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>变量名</th><th>用于</th></tr></thead><tbody><tr><td><code class="varname">WANT_WX_VER</code></td><td>port</td></tr><tr><td><code class="varname">WITH_WX_VER</code></td><td>用户</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-components"></a>6.18.3. 选择组件</h3></div></div></div><p>也有一些其他应用， 尽管它们本身并不是
	  <span class="application">wxWidgets</span> 库， 但却与之相关。
	  这些应用程序可以在
	  <code class="varname">WX_COMPS</code> 变量中使用， 以下是可用的组件：</p><div class="table"><a id="idp69128528"></a><div class="table-title">表 6.28. 可用的 <span class="application">wxWidgets</span>
	    组件</div><div class="table-contents"><table summary="可用的 wxWidgets&#10;&#9;    组件" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>名称</th><th>说明</th><th>版本限制</th></tr></thead><tbody><tr><td><code class="literal">wx</code></td><td>主库</td><td>无</td></tr><tr><td><code class="literal">contrib</code></td><td>第三方库</td><td><code class="literal">无</code></td></tr><tr><td><code class="literal">python</code></td><td><span class="application">wxPython</span>
		  (<span class="application">Python</span> 绑定)</td><td><code class="literal">2.4-2.6</code></td></tr><tr><td><code class="literal">mozilla</code></td><td><span class="application">wxMozilla</span></td><td><code class="literal">2.4</code></td></tr><tr><td><code class="literal">svg</code></td><td><span class="application">wxSVG</span></td><td><code class="literal">2.6</code></td></tr></tbody></table></div></div><br class="table-break" /><p>您可以为每个依赖的组件， 通过冒号分隔的后缀指定其类型。
	  如果没有指定， 则会使用默认的依赖类型 (参见 <a class="xref" href="using-wx.html#wx-def-dep-types" title="表 6.30. 默认的 wxWidgets 依赖关系类型">表 6.30 “默认的 <span class="application">wxWidgets</span> 依赖关系类型”</a>)。
	  下面是可用的类型：</p><div class="table"><a id="idp69147472"></a><div class="table-title">表 6.29. 可用的 <span class="application">wxWidgets</span> 依赖类型</div><div class="table-contents"><table summary="可用的 wxWidgets 依赖类型" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td><code class="literal">build</code></td><td>联编时需要该组件， 相当于
		  <code class="varname">BUILD_DEPENDS</code></td></tr><tr><td><code class="literal">run</code></td><td>运行时需要该组件， 相当于
		  <code class="varname">RUN_DEPENDS</code></td></tr><tr><td><code class="literal">lib</code></td><td>联编和运行时均需要该组件，
		  相当于 <code class="varname">LIB_DEPENDS</code></td></tr></tbody></table></div></div><br class="table-break" /><p>组件的默认依赖关系类型， 如下表所示：</p><div class="table"><a id="wx-def-dep-types"></a><div class="table-title">表 6.30. 默认的 <span class="application">wxWidgets</span> 依赖关系类型</div><div class="table-contents"><table summary="默认的 wxWidgets 依赖关系类型" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>组件</th><th>依赖关系类型</th></tr></thead><tbody><tr><td><code class="literal">wx</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">contrib</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">python</code></td><td><code class="literal">run</code></td></tr><tr><td><code class="literal">mozilla</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">svg</code></td><td><code class="literal">lib</code></td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="wx-components-example"></a><div class="example-title">例 6.6. 选择 <span class="application">wxWidgets</span>
	    组件</div><div class="example-contents"><p>下面的片段展示了使用
	    <span class="application">wxWidgets</span> 版本
	    <code class="literal">2.4</code> 及第三方库的方法。</p><pre class="programlisting">USE_WX=       2.4
WX_COMPS=     wx contrib</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-unicode"></a>6.18.4. Unicode</h3></div></div></div><p><span class="application">wxWidgets</span> 库从其 <code class="literal">2.5</code>
	  版开始支持 Unicode 了。 在 ports 系统中， 这两种版本均有提供，
	  并可以通过下列变量来选择：</p><div class="table"><a id="wx-unicode-var-table"></a><div class="table-title">表 6.31. 用以在 Unicode 版本的
	    <span class="application">wxWidgets</span>
	    的变量</div><div class="table-contents"><table summary="用以在 Unicode 版本的&#10;&#9;    wxWidgets&#10;&#9;    的变量" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>变量</th><th>说明</th><th>作用</th></tr></thead><tbody><tr><td><code class="varname">WX_UNICODE</code></td><td>该 port <span class="emphasis"><em>只能</em></span> 配合
		  Unicode 版本使用</td><td>port</td></tr><tr><td><code class="varname">WANT_UNICODE</code></td><td>port 能够与两种版本配合使用， 但希望使用
		  Unicode 版本</td><td>port</td></tr><tr><td><code class="varname">WITH_UNICODE</code></td><td>令 port 使用 Unicode 版本</td><td>用户</td></tr><tr><td><code class="varname">WITHOUT_UNICODE</code></td><td>令 port 使用普通版本，
		  如果支持的话 (即未定义 <code class="varname">WX_UNICODE</code>)</td><td>用户</td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">如果 port 同时支持 Unicode 和普通版本，
	    请不要使用 <code class="varname">WX_UNICODE</code>。 如果希望默认启用
	    Unicode， 应定义 <code class="varname">WANT_UNICODE</code>。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-version-detection"></a>6.18.5. 检测已安装的版本</h3></div></div></div><p>要检测系统中安装的版本， 就需要定义
	  <code class="varname">WANT_WX</code>。 如果没有将其设置为特定的版本，
	  则组件将包含版本后缀。
	  <code class="varname">HAVE_WX</code> 变量在检测完成后会自动填入内容。</p><div class="example"><a id="wx-ver-det-example"></a><div class="example-title">例 6.7. 检测已安装的 <span class="application">wxWidgets</span>
	    版本和组件</div><div class="example-contents"><p>下面的片段可以在安装
	    <span class="application">wxWidgets</span> 的系统中令 port 使用它，
	    反之则作为一项选项提供。</p><pre class="programlisting">WANT_WX=        yes

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITH_WX) || ${HAVE_WX:Mwx-2.4} != ""
USE_WX=         2.4
CONFIGURE_ARGS+=--enable-wx
.endif</pre><p>下面的片段在系统中有安装过时启用
	    <span class="application">wxPython</span> 支持，
	    或在没有安装时作为选项提供； 对
	    <span class="application">wxWidgets</span> 也是如此办理， 版本皆为
	    <code class="literal">2.6</code>。</p><pre class="programlisting">USE_WX=         2.6
WX_COMPS=       wx
WANT_WX=        2.6

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITH_WXPYTHON) || ${HAVE_WX:Mpython} != ""
WX_COMPS+=      python
CONFIGURE_ARGS+=--enable-wxpython
.endif</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-defined-variables"></a>6.18.6. 定义的变量</h3></div></div></div><p>以下是一些可以在 port 中使用的变量
	  (这之前需要定义 <a class="xref" href="using-wx.html#wx-ver-sel-table" title="表 6.24. 用于选择 wxWidgets 版本的变量">表 6.24 “用于选择 <span class="application">wxWidgets</span>
	    版本的变量”</a> 中的至少一个变量)。</p><div class="table"><a id="idp69206096"></a><div class="table-title">表 6.32. 为使用
	    <span class="application">wxWidgets</span> 的 port 定义的变量</div><div class="table-contents"><table summary="为使用&#10;&#9;    wxWidgets 的 port 定义的变量" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>变量名</th><th>说明</th></tr></thead><tbody><tr><td><code class="varname">WX_CONFIG</code></td><td>到 <span class="application">wxWidgets</span>
		  <code class="command">wx-config</code> 脚本的路径 (名字会随版本不同而不同)</td></tr><tr><td><code class="varname">WXRC_CMD</code></td><td>到 <span class="application">wxWidgets</span>
		  <code class="command">wxrc</code> 程序的路径 (名字会随版本不同而不同)</td></tr><tr><td><code class="varname">WX_VERSION</code></td><td>将要用到的 <span class="application">wxWidgets</span> 版本
		  (例如， <code class="literal">2.6</code>)</td></tr><tr><td><code class="varname">WX_UNICODE</code></td><td>如果没有定义， 而将会使用 Unicode 时， 系统将自动定义此变量。</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-premk"></a>6.18.7. 在 <code class="filename">bsd.port.pre.mk</code> 中进行处理</h3></div></div></div><p>如果您需要在引用了 <code class="filename">bsd.port.pre.mk</code> 之后立即对一些变量进行处理，
	  则需要定义 <code class="varname">WX_PREMK</code>。</p><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">如果定义了 <code class="varname">WX_PREMK</code>， 则在此
	    <span class="emphasis"><em>之后</em></span> 定义的依赖关系、 组件和变量将不会生效，
	    您在引用 <code class="filename">bsd.port.pre.mk</code>
	    之前的 <span class="application">wxWidgets</span> port 变量将直接起作用。</p></div><div class="example"><a id="wx-premk-example"></a><div class="example-title">例 6.8. 在命令中使用 <span class="application">wxWidgets</span> 变量</div><div class="example-contents"><p>下面的片段以执行
	    <code class="command">wx-config</code> 脚本来得到完整的版本号，
	    将其赋值到变量中， 并传递给一个程序举例说明了
	    <code class="varname">WX_PREMK</code> 的用法。</p><pre class="programlisting">USE_WX=         2.4
WX_PREMK=       yes

.include &lt;bsd.port.pre.mk&gt;

.if exists(${WX_CONFIG})
VER_STR!=       ${WX_CONFIG} --release

PLIST_SUB+=     VERSION="${VER_STR}"
.endif</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">在 target 中的 <span class="application">wxWidgets</span> 变量可以直接使用，
	    而无需 <code class="varname">WX_PREMK</code> 的参与。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-additional-config-args"></a>6.18.8. 额外的 <code class="command">configure</code> 参数</h3></div></div></div><p>某些 GNU <code class="command">configure</code> 脚本在只设置了
	  <code class="literal">WX_CONFIG</code> 环境变量时， 无法自动找到
	  <span class="application">wxWidgets</span>， 而需要使用额外的参数来加以指定。
	  您可以使用 <code class="varname">WX_CONF_ARGS</code> 变量来给出这些参数。</p><div class="table"><a id="idp69238224"></a><div class="table-title">表 6.33. 可用于 <code class="varname">WX_CONF_ARGS</code> 的值</div><div class="table-contents"><table summary="可用于 WX_CONF_ARGS 的值" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>可用值</th><th>结果</th></tr></thead><tbody><tr><td><code class="literal">absolute</code></td><td><code class="literal">--with-wx-config=${WX_CONFIG}</code></td></tr><tr><td><code class="literal">relative</code></td><td><code class="literal">--with-wx=${LOCALBASE}
		    --with-wx-config=${WX_CONFIG:T}</code></td></tr></tbody></table></div></div><br class="table-break" /></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-sdl.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="using-lua.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">6.17. 使用 SDL </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 6.19. 使用 <span class="application">Lua</span></td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文档和其它文档可从这里下载：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>如果对于FreeBSD有问题，请先阅读
    <a href="http://www.FreeBSD.org/docs.html">文档</a>，如不能解决再联系
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    关于本文档的问题请发信联系
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>