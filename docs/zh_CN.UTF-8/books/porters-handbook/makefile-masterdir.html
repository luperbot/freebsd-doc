<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>5.8. MASTERDIR (主 port 所在的目录)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter 手册" /><link rel="up" href="makefile.html" title="第 5 章 配置 Makefile" /><link rel="prev" href="makefile-depend.html" title="5.7. 依赖关系" /><link rel="next" href="makefile-manpages.html" title="5.9. 联机手册" /><link rel="copyright" href="trademarks.html" title="法律声明" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5.8. <code class="varname">MASTERDIR</code> (主 port 所在的目录)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="makefile-depend.html">上一页</a> </td><th width="60%" align="center">第 5 章 配置 Makefile</th><td width="20%" align="right"> <a accesskey="n" href="makefile-manpages.html">下一页</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-masterdir"></a>5.8. <code class="varname">MASTERDIR</code> (主 port 所在的目录)</h2></div></div></div><p>如果 port 需要依某些变量的设置 (举例来说， 分辨率或纸型)
	来联编略有不同的预编译包， 则可以为每一个这样的包建立不同的目录，
	这样可以让用户更容易地看到他们想要安装的版本， 但又能在这些 port
	之间共用尽可能多的文件。 一般情况下， 如果运用得当， 除主目录之外都只需要很短的
	<code class="filename">Makefile</code>。 这些 <code class="filename">Makefile</code> 中，
	可以用 <code class="varname">MASTERDIR</code> 来指定其它文件所在的目录。
	另外， 还应使用一个变量作为
	<a class="link" href="makefile-naming.html#porting-pkgname" title="5.2.5. 包命名规则"><code class="varname">PKGNAMESUFFIX</code></a>
	的一部分， 以便为不同的包给出不同的命名。</p><p>用例子来阐述这些会更为明晰。 以下是
	<code class="filename">japanese/xdvi300/Makefile</code> 的部分代码：</p><pre class="programlisting">PORTNAME=       xdvi
PORTVERSION=    17
PKGNAMEPREFIX=  ja-
PKGNAMESUFFIX=  ${RESOLUTION}
 :
# default
RESOLUTION?=   300
.if ${RESOLUTION} != 118 &amp;&amp; ${RESOLUTION} != 240 &amp;&amp; \
       ${RESOLUTION} != 300 &amp;&amp; ${RESOLUTION} != 400
       @${ECHO_MSG} "Error: invalid value for RESOLUTION: \"${RESOLUTION}\""
       @${ECHO_MSG} "Possible values are: 118, 240, 300 (default) and 400."
       @${FALSE}
.endif</pre><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/japanese/xdvi300/pkg-descr">japanese/xdvi300</a> 也提供了全部常规的补丁，
	以及打包用到的文件等等内容。 如果您在那里输入 <code class="command">make</code>，
	它将使用默认的分辨率值 (300) 并正常地联编 port。</p><p>对于其它分辨率而言， 以下是 <span class="emphasis"><em>完整的</em></span>
	<code class="filename">xdvi118/Makefile</code>：</p><pre class="programlisting">RESOLUTION=     118
MASTERDIR=      ${.CURDIR}/../xdvi300

.include "${MASTERDIR}/Makefile"</pre><p>(<code class="filename">xdvi240/Makefile</code> 和
	<code class="filename">xdvi400/Makefile</code> 是相似的)。
	<code class="varname">MASTERDIR</code> 定义会告诉
	<code class="filename">bsd.port.mk</code> 常规的目录，
	例如 <code class="varname">FILESDIR</code> 以及
	<code class="varname">SCRIPTDIR</code> 应在
	<code class="filename">xdvi300</code> 中查找。 <code class="literal">RESOLUTION=118</code>
	这行将覆盖在 <code class="filename">xdvi300/Makefile</code> 中所作的
	<code class="literal">RESOLUTION=300</code> 设置， 从而 port
	将以分辨率为 118 的设置来联编。</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="makefile-depend.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="makefile.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="makefile-manpages.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">5.7. 依赖关系 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 5.9. 联机手册</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文档和其它文档可从这里下载：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>如果对于FreeBSD有问题，请先阅读
    <a href="http://www.FreeBSD.org/docs.html">文档</a>，如不能解决再联系
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    关于本文档的问题请发信联系
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>