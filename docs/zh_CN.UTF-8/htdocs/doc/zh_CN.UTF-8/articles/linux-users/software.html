<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>3. Packages和Ports：在 FreeBSD 中添加软件</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Linux® 用户的 FreeBSD 快速入门向导" /><link rel="up" href="index.html" title="Linux® 用户的 FreeBSD 快速入门向导" /><link rel="prev" href="shells.html" title="2. Shell程序：没有Bash吗？" /><link rel="next" href="startup.html" title="4. 系统启动：运行级别在哪里？" /><link rel="copyright" href="trademarks.html" title="法律通告" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. Packages和Ports：在 FreeBSD 中添加软件</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="shells.html">上一页</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="startup.html">下一页</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="software"></a>3. Packages和Ports：在 FreeBSD 中添加软件</h2></div></div></div><p>除了经典的 <span class="trademark">UNIX</span>® 安装软件的方法
      （下载源码包，解压，编辑源码，编译）外，FreeBSD
      还提供了另外两种方法来安装应用程序：packages 和 ports。
      你可以在 <a class="link" href="http://www.freebsd.org/ports/master-index.html" target="_top">这里</a>
      到一份完整可用的 ports 和 packages 的软件清单。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="packages"></a>3.1. Packages</h3></div></div></div><p>Packages 是预编译好的应用程序，在 FreeBSD
        中等价于基于 Debian/Ubuntu 的系统中的
        <code class="filename">.deb</code> 软件包以及基于
        Red Hat/Fedora 的系统中的
        <code class="filename">.rpm</code> 软件包。
        Packages使用 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> 来进行安装。
        例如，下面的命令将用来安装
        <span class="application">Apache 2.2</span>：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add /tmp/apache-2.2.6_2.tbz</code></strong></pre><p>使用 <code class="option">-r</code> 操作将告诉 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>
        来自动获取并安装一个软件包，以及解决所有的依赖关系：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r apache22</code></strong>
Fetching ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6.2-release/Latest/apache22.tbz... Done.
Fetching ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6.2-release/All/expat-2.0.0_1.tbz... Done.
Fetching ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6.2-release/All/perl-5.8.8_1.tbz... Done.
[snip]

To run apache www server from startup, add apache22_enable="YES"
in your /etc/rc.conf. Extra options can be found in startup script.</pre><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">如果你正运行着 release 版本的 FreeBSD （6.2，6.3，7.0等，
          通常从 CD-ROM 被安装的）<code class="command">pkg_add -r</code>
          会为其下载专门为这些特定版本构建好的软件包。
          这些软件包 <span class="emphasis"><em>可能</em></span> 不是当前最新的程序。
          你可以使用 <code class="envar">PACKAGESITE</code> 变量来覆盖默认的动作。
          例如，把 <code class="envar">PACHAGESITE</code> 设置成
          <code class="uri"><a class="uri" href="ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6-stable/Latest/" target="_top">ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6-stable/Latest/</a></code>
          来下载 6.X 系列最新的包。</p></div><p>想了解更多的 packages 信息请查阅 FreeBSD
        手册的 4.4 小节：<a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/packages-using.html" target="_top">使用 Packages 系统</a>。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports"></a>3.2. Ports</h3></div></div></div><p>FreeBSD 的第二种安装应用程序的方法就是使用 Ports 套件了。
        Ports 套件是 FreeBSD 上的一个利用 <code class="filename">Makefile</code>
        和一些补丁文件来特定从源码定制安装各种软件程序的框架。
        当安装一个 port 时系统会获取程序源码，
        应用任何所需要的补丁，编译源码，
        并安装应用程序（并针对依赖关系以同样的方式安装解决）。</p><p>Ports 套件，常被称作 ports 树，可以在
        <code class="filename">/usr/ports</code> 下找到。
        假设Ports套件已经在安装 FreeBSD 时安装过了。
        如果 Ports 套件还没有被安装可以通过 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>
        来进行安装，或者使用 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csup&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csup</span>(1)</span></a> 或 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a>
        来从 FreeBSD 的服务器上面拉下来。在手册的 <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/ports-using.html" target="_top">4.5.1 小节</a>
        可以找到安装 Ports 套件的详细介绍。</p><p>安装一个 port 就像进入 port
        的目录并开始构建过程一样简单（通常情况下），
        下面是从 Ports 套件安装
        <span class="application">Apache 2.2</span> 的例子：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/apache22</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>使用 ports 安装软件的最大好处就是能够自定义安装选项。
        例如，从 ports 安装 <span class="application">Apache 2.2</span>
        时你可以通过设置 <code class="varname">WITH_LDAP</code> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>
        变量来启用 <span class="application">mod_ldap</span>：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/apache22</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make WITH_LDAP="YES" install clean</code></strong></pre><p>请查看 FreeBSD 手册的 4.5 小节，<a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/ports-using.html" target="_top">
	 使用 Ports Collection</a>，
        以获取更多关于Ports Collection 的信息。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="which"></a>3.3. Ports还是packages，我应该使用哪个？</h3></div></div></div><p>Packages 就是预编译好的 ports，
        所以从源码（ports）安装与从二进制 packages
        安装这两者间确实有很大关联。每种方法各有自己的优点：</p><div class="itemizedlist"><div class="itemizedlist-title">Packages（二进制）</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">更快速的安装
            （比较大的应用程序编译起来会花很长时间）。</li><li class="listitem">你不需要知道如何编译软件。</li><li class="listitem">不需要在操作系统上安装编译器。</li></ul></div><div class="itemizedlist"><div class="itemizedlist-title">Ports（源码）</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">能够定制安装选项。
            （Packages通常都是使用标准选项构建的。使用 ports
            你能够定义各种各样的选项，
            比如类似构建附加的模块或是更改安装路径之类的。）</li><li class="listitem">如果你喜欢的话还可以使用自己的补丁。</li></ul></div><p>如果你没有一些特别的需求， packages
        可能刚好最适合你的情况。如果你需要进一步定制，
        ports 是最适合的方法了。（请记得，
        如果你需要定制而自己又更倾向于使用 packages，
        你可以使用 <code class="command">make</code>
	<code class="buildtarget">package</code> 从 ports
        构建一个定制的 package，然后复制到其他的服务器。）</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="shells.html">上一页</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="startup.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">2. Shell程序：没有Bash吗？ </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 4. 系统启动：运行级别在哪里？</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文档和其它文档可从这里下载：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>如果对于FreeBSD有问题，请先阅读
    <a href="http://www.FreeBSD.org/docs.html">文档</a>，如不能解决再联系
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    关于本文档的问题请发信联系
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>