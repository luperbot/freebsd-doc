<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Linux® 用户的 FreeBSD 快速入门向导</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="description" content="本文档旨在快速使那些高级 Linux 用户熟悉FreeBSD的一些基础知识。" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div xml:lang="zh_cn" class="article" lang="zh_cn"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp61040464"></a><span class="trademark">Linux</span>® 用户的 FreeBSD 快速入门向导</h1></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">John</span> <span class="surname">Ferrell</span></h3></div></div></div><div>修订: <a href="https://svnweb.freebsd.org/changeset/doc/"><span class="svnref"></span></a></div><div><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">版权 © 2008 The FreeBSD Documentation Project</p></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="trademarks"></a><p>FreeBSD 是 FreeBSD 基金会的注册商标</p><p>Linux 是 Linus Torvalds 的注册商标。</p><p>Intel, Celeron, EtherExpress, i386,
  i486, Itanium, Pentium, 和 Xeon 是 Intel Corporation
  及其分支机构在美国和其他国家的商标或注册商标。</p><p>Red Hat, RPM, 是 Red Hat, Inc.
  在美国和其他国家的注册商标。</p><p>UNIX是 Open Group
  在美国和其它国家的注册商标。</p><p>许多制造商和经销商使用一些称为商标的图案或文字设计来彰显自己的产品。
  本文档中出现的， 为 FreeBSD Project 所知晓的商标，后面将以 <span class="quote">“<span class="quote">™</span>”</span> 或
  <span class="quote">“<span class="quote">®</span>”</span> 符号来标注。</p></div></div><div>   由 .</div><div><div xmlns="http://www.w3.org/1999/xhtml" class="abstract"><div class="abstract-title">摘要</div><p>本文档旨在快速使那些高级 <span class="trademark">Linux</span>®
        用户熟悉FreeBSD的一些基础知识。</p></div></div></div><hr /></div><div class="toc"><div class="toc-title">目录</div><dl class="toc"><dt><span class="sect1"><a href="#intro">1. 简介</a></span></dt><dt><span class="sect1"><a href="#shells">2. Shell程序：没有Bash吗？</a></span></dt><dt><span class="sect1"><a href="#software">3. Packages和Ports：在 FreeBSD 中添加软件</a></span></dt><dt><span class="sect1"><a href="#startup">4. 系统启动：运行级别在哪里？</a></span></dt><dt><span class="sect1"><a href="#network">5. 网络配置</a></span></dt><dt><span class="sect1"><a href="#firewall">6. 防火墙</a></span></dt><dt><span class="sect1"><a href="#updates">7. 升级 FreeBSD</a></span></dt><dt><span class="sect1"><a href="#procfs">8. procfs：已是过去式但仍未被遗忘</a></span></dt><dt><span class="sect1"><a href="#commands">9. 常用命令</a></span></dt><dt><span class="sect1"><a href="#conclusion">10. 总结</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="intro"></a>1. 简介</h2></div></div></div><p>本文档将突出介绍 FreeBSD 与 <span class="trademark">Linux</span>® 的差别，
      以使得那些 <span class="trademark">Linux</span>® 高级用户能自己快速熟悉 FreeBSD
      的基础内容。这只是份技术上的快速入门，
      并非是试图描绘这两种操作系统之间的"哲学"上的差异。</p><p>此文档假定认为你已经安装好了 FreeBSD。
      如果你还没有安装 FreeBSD 或者对 FreeBSD
      的安装过程方面需要帮助，请参考 FreeBSD 手册的
      <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/install.html" target="_top">
        安装 FreeBSD</a>一章。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="shells"></a>2. Shell程序：没有Bash吗？</h2></div></div></div><p>那些从 <span class="trademark">Linux</span>® 转过来的用户经常会惊讶于
      <span class="application">Bash</span> 不是 FreeBSD 的默认 Shell。
      事实上，<span class="application">Bash</span> 甚至没有包括在
      FreeBSD 的默认安装中。代替的是，FreeBSD 使用 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcsh</span>(1)</span></a>
      作为自己的默认 Shell，尽管如此，<span class="application">Bash</span>
      和其他你喜爱的 Shell 程序在 FreeBSD 的
      <a class="link" href="article.html#SOFTWARE" target="_top">Packages 和 Ports 套件</a>
      里都可以找到。</p><p>如果你安装了其他的 Shell 你可以使用 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chsh</span>(1)</span></a>
      来设置一个用户的默认 Shell。 通常情况下，
      强烈建议不要去更改 <code class="systemitem">root</code>
      用户的默认 Shell。原因是这些 Shell
      没有包括在基本系统中，正常情况下它们会被安装到
      <code class="filename">/usr/local/bin</code> 和
      <code class="filename">/usr/bin</code> 目录下。万一某天
      <code class="filename">/usr/local/bin</code> 和
      <code class="filename">/usr/bin</code> 的文件系统不能被挂载，
      这样情况下 <code class="systemitem">root</code>
      将不能进入自己默认的 Shell，从而
      <code class="systemitem">root</code> 将不能够登录进去。
      鉴于这个原因，第二个系统管理员帐户
      <code class="systemitem">toor</code> 创建时使用的是非默认的
      Shell。在安全 FAQ 可以查阅到关于 <a class="link" href="../../../../doc/en_US.ISO8859-1/books/faq/security.html#TOOR-ACCOUNT" target="_top">toor 帐户</a>
      的信息。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="software"></a>3. Packages和Ports：在 FreeBSD 中添加软件</h2></div></div></div><p>除了经典的 <span class="trademark">UNIX</span>® 安装软件的方法
      （下载源码包，解压，编辑源码，编译）外，FreeBSD
      还提供了另外两种方法来安装应用程序：packages 和 ports。
      你可以在 <a class="link" href="http://www.freebsd.org/ports/master-index.html" target="_top">这里</a>
      到一份完整可用的 ports 和 packages 的软件清单。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="packages"></a>3.1. Packages</h3></div></div></div><p>Packages 是预编译好的应用程序，在 FreeBSD
        中等价于基于 Debian/Ubuntu 的系统中的
        <code class="filename">.deb</code> 软件包以及基于
        Red Hat/Fedora 的系统中的
        <code class="filename">.rpm</code> 软件包。
        Packages使用 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> 来进行安装。
        例如，下面的命令将用来安装
        <span class="application">Apache 2.2</span>：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add /tmp/apache-2.2.6_2.tbz</code></strong></pre><p>使用 <code class="option">-r</code> 操作将告诉 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>
        来自动获取并安装一个软件包，以及解决所有的依赖关系：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r apache22</code></strong>
Fetching ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6.2-release/Latest/apache22.tbz... Done.
Fetching ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6.2-release/All/expat-2.0.0_1.tbz... Done.
Fetching ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6.2-release/All/perl-5.8.8_1.tbz... Done.
[snip]

To run apache www server from startup, add apache22_enable="YES"
in your /etc/rc.conf. Extra options can be found in startup script.</pre><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">如果你正运行着 release 版本的 FreeBSD （6.2，6.3，7.0等，
          通常从 CD-ROM 被安装的）<code class="command">pkg_add -r</code>
          会为其下载专门为这些特定版本构建好的软件包。
          这些软件包 <span class="emphasis"><em>可能</em></span> 不是当前最新的程序。
          你可以使用 <code class="envar">PACKAGESITE</code> 变量来覆盖默认的动作。
          例如，把 <code class="envar">PACHAGESITE</code> 设置成
          <code class="uri"><a class="uri" href="ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6-stable/Latest/" target="_top">ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-6-stable/Latest/</a></code>
          来下载 6.X 系列最新的包。</p></div><p>想了解更多的 packages 信息请查阅 FreeBSD
        手册的 4.4 小节：<a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/packages-using.html" target="_top">使用 Packages 系统</a>。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports"></a>3.2. Ports</h3></div></div></div><p>FreeBSD 的第二种安装应用程序的方法就是使用 Ports 套件了。
        Ports 套件是 FreeBSD 上的一个利用 <code class="filename">Makefile</code>
        和一些补丁文件来特定从源码定制安装各种软件程序的框架。
        当安装一个 port 时系统会获取程序源码，
        应用任何所需要的补丁，编译源码，
        并安装应用程序（并针对依赖关系以同样的方式安装解决）。</p><p>Ports 套件，常被称作 ports 树，可以在
        <code class="filename">/usr/ports</code> 下找到。
        假设Ports套件已经在安装 FreeBSD 时安装过了。
        如果 Ports 套件还没有被安装可以通过 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>
        来进行安装，或者使用 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csup&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csup</span>(1)</span></a> 或 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a>
        来从 FreeBSD 的服务器上面拉下来。在手册的 <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/ports-using.html" target="_top">4.5.1 小节</a>
        可以找到安装 Ports 套件的详细介绍。</p><p>安装一个 port 就像进入 port
        的目录并开始构建过程一样简单（通常情况下），
        下面是从 Ports 套件安装
        <span class="application">Apache 2.2</span> 的例子：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/apache22</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>使用 ports 安装软件的最大好处就是能够自定义安装选项。
        例如，从 ports 安装 <span class="application">Apache 2.2</span>
        时你可以通过设置 <code class="varname">WITH_LDAP</code> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>
        变量来启用 <span class="application">mod_ldap</span>：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/apache22</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make WITH_LDAP="YES" install clean</code></strong></pre><p>请查看 FreeBSD 手册的 4.5 小节，<a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/ports-using.html" target="_top">
	 使用 Ports Collection</a>，
        以获取更多关于Ports Collection 的信息。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="which"></a>3.3. Ports还是packages，我应该使用哪个？</h3></div></div></div><p>Packages 就是预编译好的 ports，
        所以从源码（ports）安装与从二进制 packages
        安装这两者间确实有很大关联。每种方法各有自己的优点：</p><div class="itemizedlist"><div class="itemizedlist-title">Packages（二进制）</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">更快速的安装
            （比较大的应用程序编译起来会花很长时间）。</li><li class="listitem">你不需要知道如何编译软件。</li><li class="listitem">不需要在操作系统上安装编译器。</li></ul></div><div class="itemizedlist"><div class="itemizedlist-title">Ports（源码）</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">能够定制安装选项。
            （Packages通常都是使用标准选项构建的。使用 ports
            你能够定义各种各样的选项，
            比如类似构建附加的模块或是更改安装路径之类的。）</li><li class="listitem">如果你喜欢的话还可以使用自己的补丁。</li></ul></div><p>如果你没有一些特别的需求， packages
        可能刚好最适合你的情况。如果你需要进一步定制，
        ports 是最适合的方法了。（请记得，
        如果你需要定制而自己又更倾向于使用 packages，
        你可以使用 <code class="command">make</code>
	<code class="buildtarget">package</code> 从 ports
        构建一个定制的 package，然后复制到其他的服务器。）</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="startup"></a>4. 系统启动：运行级别在哪里？</h2></div></div></div><p><span class="trademark">Linux</span>® 使用 Sysv init 初始化系统，而 FreeBSD
      使用的是传统的 BSD 风格的 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>。在 BSD 风格的
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> 中没有运行级别和 <code class="filename">/etc/inittab</code>，
      代替控制启动的是 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> 实用程序。
      <code class="filename">/etc/rc</code> 脚本读取
      <code class="filename">/etc/defaults/rc.conf</code> 和
      <code class="filename">/etc/rc.conf</code> 文件来决定哪个服务将被启动。
      特殊服务在此后由处于 <code class="filename">/etc/rc.d/</code> 和
      <code class="filename">/usr/local/etc/rc.d/</code>
      下的相应服务初始化脚本文件所启动。
      这些脚本类似于位于 <span class="trademark">Linux</span>® 系统中的
      <code class="filename">/etc/init.d/</code> 目录下的脚本。</p><div class="sidebar"><div xmlns="" class="titlepage"></div><p><span class="emphasis"><em>为何会有两个服务初始化脚本的目录呢？</em></span>
        <code class="filename">/etc/rc.d/</code> 下的脚本是属于
        <span class="quote">“<span class="quote">基本</span>”</span> 系统一部分的应用程序所使用的。
        （<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>，<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a>，<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a>，以及其他。）
        <code class="filename">/usr/local/etc/rc.d/</code>
        下的脚本是用户安装的应用程序如 <span class="application">Apache</span>，
        <span class="application">Squid</span> 等使用的。</p><p><span class="emphasis"><em><span class="quote">“<span class="quote">基本</span>”</span>
          系统和用户安装的应用程序之间的区别是什么？</em></span> FreeBSD
        是一套开发出来的完整的操作系统，也就是说，内核，系统类库，
        还有实用应用程序（如 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a>，<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cat</span>(1)</span></a>，<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cp</span>(1)</span></a> 等）
        全部被做为一个整体一起开发并释出。这就是被认为归属于
        <span class="quote">“<span class="quote">基本</span>”</span>系统的程序。用户安装的程序并不是
        <span class="quote">“<span class="quote">基本</span>”</span>系统的一部分，如
        <span class="application">Apache</span>，<span class="application">X11</span>，
        <span class="application">Moazilla Firefox</span>，等等。这
        些用户安装的应用程序通常是使用 FreeBSD 的 Packages 和 Ports
        套件安装上去的。为了将这些程序和 <span class="quote">“<span class="quote">基本</span>”</span>
        系统区分开来，用户安装的应用程序通常被安装到
        <code class="filename">/usr/local/</code>下。
        因此用户安装的二进制执行文件存在于
        <code class="filename">/usr/local/bin</code>下，配置文件在
        <code class="filename">/usr/local/etc</code>下，以此类推。</p></div><p>您可以通过在
      <code class="filename">/etc/rc.conf</code>（<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>）
      文件中增加与之对应的
      <code class="literal">ServiceName_enable="YES"</code>
      配置来启用服务。 看一下系统默认的
      <code class="filename">/etc/defaults/rc.conf</code> 文件， 这些默认配置可以使用
      <code class="filename">/etc/rc.conf</code> 文件来改变。 因此，
      当安装附加应用程序时最好回顾下文档来决定到底该如何启用任何相关的服务。</p><p>下面的一小段内容用来在 <code class="filename">/etc/rc.conf</code>
      中启用 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a> 和 <span class="application">Apache 2.2</span>。
      还指定了 <span class="application">Apache</span> 应该通过
      SSL 方式启动。</p><pre class="programlisting"># enable SSHD
sshd_enable="YES"
# enable Apache with SSL
apache22_enable="YES"
apache22_flags="-DSSL"</pre><p>一旦服务已经在 <code class="filename">/etc/rc.conf</code>
      中启用，服务将能够从命令行启动（不需要重新启动系统）：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd start</code></strong></pre><p>如果服务还没有被启用，可以使用
      <code class="option">forcestart</code> 来从命令行启动：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd forcestart</code></strong></pre></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network"></a>5. 网络配置</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="interfaces"></a>5.1. 网络接口</h3></div></div></div><p>代替 <span class="trademark">Linux</span>® 中所使用的标识网络接口所常用的
        <span class="emphasis"><em>ethX</em></span> 格式的是，FreeBSD
        使用驱动名字后跟一个数字来标识。下面
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> 的输出显示了两个 <span class="trademark">Intel</span>® Pro 1000
        的网络接口（<code class="filename">em0</code> 和 <code class="filename">em1</code>）：</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig</code></strong>
em0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        options=b&lt;RXCSUM,TXCSUM,VLAN_MTU&gt;
        inet 10.10.10.100 netmask 0xffffff00 broadcast 10.10.10.255
        ether 00:50:56:a7:70:b2
        media: Ethernet autoselect (1000baseTX &lt;full-duplex&gt;)
        status: active
em1: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        options=b&lt;RXCSUM,TXCSUM,VLAN_MTU&gt;
        inet 192.168.10.222 netmask 0xffffff00 broadcast 192.168.10.255
        ether 00:50:56:a7:03:2b
        media: Ethernet autoselect (1000baseTX &lt;full-duplex&gt;)
        status: active</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ipaddress"></a>5.2. IP配置</h3></div></div></div><p>一个 IP 地址可以使用 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>
        来指定到一个网络接口。通常，要保持重启后依然能够使用的
        IP 配置信息需要包含在 <code class="filename">/etc/rc.conf</code>
        中。下列例子指定了主机名，IP 地址，以及默认网关：</p><pre class="programlisting">hostname="server1.example.com"
ifconfig_em0="inet 10.10.10.100  netmask 255.255.255.0"
defaultrouter="10.10.10.1"</pre><p>使用下面内容来为网络接口配置DHCP：</p><pre class="programlisting">hostname="server1.example.com"
ifconfig_em0="DHCP"</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="firewall"></a>6. 防火墙</h2></div></div></div><p>像 <span class="trademark">Linux</span>® 中的 <span class="application">IPTABLES</span>
      一样， FreeBSD 也提供了一个内核级的防火墙；
      实际上 FreeBSD 提供了三个防火墙：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/firewalls-ipfw.html" target="_top">IPFIREWALL</a></li><li class="listitem"><a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/firewalls-ipf.html" target="_top">IPFILTER</a></li><li class="listitem"><a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/firewalls-pf.html" target="_top">PF</a></li></ul></div><p><span class="application">IPFIREWALL</span> 或是
      <span class="application">IPFW</span>（管理
      <span class="application">IPFW</span> 规则的 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ipfw</span>(8)</span></a> 命令）
      是 FreeBSD 开发者开发并维持的。
      <span class="application">IPFW</span> 能够与 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dummynet&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">dummynet</span>(4)</span></a>
      配合使用来提供流量图形功能以及模拟不同网络连接类型的功能。</p><p>允许 <span class="application">SSH</span>
      进入的 <span class="application">IPFW</span> 规则样例如下：</p><pre class="programlisting">ipfw add allow tcp from any to me 22 in via $ext_if</pre><p><span class="application">IPFILTER</span> 是
      Darren Reed 所开发的防火墙程序。不是专门针对
      FreeBSD 的，它已经被移植到 NetBSD，OpenBSD，SunOS，HP/UX，
      还有Solaris等一些操作系统之上。</p><p>允许 <span class="application">SSH</span>
      进入的 <span class="application">IPFILTER</span>
      命令样例如下：</p><pre class="programlisting">pass in on $ext_if proto tcp from any to any port = 22</pre><p>最后一种防火墙程序，<span class="application">PF</span>，
      是 OpenBSD 项目所开发的。<span class="application">PF</span>
      是被作为 <span class="application">IPFILTER</span>
      的一个替代品而被创建出的。就这点而言，
      <span class="application">PF</span> 的语法与
      <span class="application">IPFILTER</span> 的非常相似。
      <span class="application">PF</span> 可以与 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=altq&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">altq</span>(4)</span></a>
      配合来提供 QoS 的特性。</p><p>允许 <span class="application">SSH</span>
       进入的 <span class="application">PF</span>
       命令样例如下：</p><pre class="programlisting">pass in on $ext_if inet proto tcp from any to ($ext_if) port 22</pre></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="updates"></a>7. 升级 FreeBSD</h2></div></div></div><p>共有三种方法来升级 FreeBSD 系统：
      源码，二进制更新，还有安装光盘。</p><p>从源码升级是最复杂的升级方法，但是提供了最棒的总体灵活性。
      这个过程包含了使用 FreeBSD <span class="application">CVS</span>
      （并行版本系统）来同步一个本地的 FreeBSD 源代码。
      一旦本地源码已经更新到当前最新你便可以构建新版本的内核以及应用程序。
      关于源码更新的更多信息可见于 FreeBSD 手册
      <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/cutting-edge.html" target="_top">
        关于如何更新操作系统的章节</a>。</p><p>二进制更新类似于使用 <code class="command">yum</code> 或
      <code class="command">apt-get</code> 更新 <span class="trademark">Linux</span>® 系统。
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=freebsd-update&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">freebsd-update</span>(8)</span></a> 命令会获取新的更新并安装它们。
      这些更新可以通过 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> 使用程序来调度。</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">如果你使用 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> 来预定更新，
        请确信在你的 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">crontab</span>(1)</span></a> 中使用了
        <code class="command">freebsd-update cron</code>
        来控制大数目的机器同时获取更新。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">0 3 * * * root /usr/sbin/freebsd-update cron</pre></div><p>最后一种更新的方法，从安装光盘来升级，是个直接的过程。
      从安装光盘启动并选择该选项来更新。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="procfs"></a>8. procfs：已是过去式但仍未被遗忘</h2></div></div></div><p><span class="trademark">Linux</span>® 中，你可能会通过看一看
      <code class="filename">/proc/sys/net/ipv4/ip_forward</code>
      来确定 IP 转发是否被启用。在 FreeBSD 中你应该使用 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>
      来查看这和其他方面的系统设置，在当前的 FreeBSD 版本中
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=procfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">procfs</span>(5)</span></a> 已经不赞成使用了。（虽然
      <code class="command">sysctl</code>在 FreeBSD 也同样可用。）</p><p>在 IP 转发样例中，你应该使用下列内容来确定 FreeBSD
      系统中是否已经开启了 IP 转发：</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sysctl net.inet.ip.forwarding</code></strong>
net.inet.ip.forwarding: 0</pre><p><code class="option">-a</code> 标志用来列出所有的系统设置：</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sysctl -a</code></strong>
kern.ostype: FreeBSD
kern.osrelease: 6.2-RELEASE-p9
kern.osrevision: 199506
kern.version: FreeBSD 6.2-RELEASE-p9 #0: Thu Nov 29 04:07:33 UTC 2007
    root@i386-builder.daemonology.net:/usr/obj/usr/src/sys/GENERIC

kern.maxvnodes: 17517
kern.maxproc: 1988
kern.maxfiles: 3976
kern.argmax: 262144
kern.securelevel: -1
kern.hostname: server1
kern.hostid: 0
kern.clockrate: { hz = 1000, tick = 1000, profhz = 666, stathz = 133 }
kern.posix1version: 200112
...</pre><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">某些 <code class="command">sysctl</code> 的参数是只读的。</p></div><p>需要 procfs 的情况是，运行一些较老的软件，使用
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=truss&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">truss</span>(1)</span></a> 来跟踪系统信号，以及
      <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/linuxemu.html" target="_top"><span class="trademark">Linux</span>® 二进制兼容</a>.
      （尽管，<span class="trademark">Linux</span>® 二进制兼容性使用其本身的 procfs，<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=linprocfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">linprocfs</span>(5)</span></a>。）
      如果你需要挂载 procfs 你可以在
      <code class="filename">/etc/fstab</code> 中加入如下内容：</p><pre class="screen">proc                /proc           procfs  rw,noauto       0       0</pre><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="option">noauto</code> 会防止
        <code class="filename">/proc</code> 在启动时被自动挂载。</p></div><p>然后使用如下命令挂载 procfs：</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /proc</code></strong></pre></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="commands"></a>9. 常用命令</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="packageCommands"></a>9.1. 软件包管理</h3></div></div></div><p>
	</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th><span class="trademark">Linux</span>® 命令 (Red Hat/Debian)</th><th>FreeBSD 等价命令</th><th>目的</th></tr></thead><tbody><tr><td><code class="command">yum install package</code> / <code class="command">apt-get install package</code></td><td><code class="command">pkg_add -r package</code></td><td>从远程仓库安装 <em class="replaceable"><code>package</code></em></td></tr><tr><td><code class="command">rpm -ivh package</code> / <code class="command">dpkg -i package</code></td><td><code class="command">pkg_add -v package</code></td><td>安装 package</td></tr><tr><td><code class="command">rpm -qa</code> / <code class="command">dpkg -l</code></td><td><code class="command">pkg_info</code></td><td>列出已安装的软件包</td></tr></tbody></table></div><p>
      </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="systemCommands"></a>9.2. 系统管理</h3></div></div></div><p>
	</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th><span class="trademark">Linux</span>® 命令</th><th>FreeBSD 等价命令</th><th>目的</th></tr></thead><tbody><tr><td><code class="command">lspci</code></td><td><code class="command">pciconf</code></td><td>列出 PCI 设备</td></tr><tr><td><code class="command">lsmod</code></td><td><code class="command">kldstat</code></td><td>列出已载入的内核模块</td></tr><tr><td><code class="command">modprobe</code></td><td><code class="command">kldload</code> / <code class="command">kldunload</code></td><td>载入/卸载内核模块</td></tr><tr><td><code class="command">strace</code></td><td><code class="command">truss</code></td><td>跟踪系统调用</td></tr></tbody></table></div><p>
      </p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="conclusion"></a>10. 总结</h2></div></div></div><p>非常希望这篇文档能够给予你足够的帮助来开始你的
      FreeBSD 之路。务必要再去看一下 <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/index.html" target="_top">FreeBSD 手册</a>
      所提到的但并没有被包含在本文档中的那些更深入广泛的主题。</p></div></div></body></html>