<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>6.12. Web 应用， Apache 和 PHP</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter 手册" /><link rel="up" href="special.html" title="第 6 章 特殊情况" /><link rel="prev" href="using-java.html" title="6.11. 使用 Java" /><link rel="next" href="using-python.html" title="6.13. 使用 Python" /><link rel="copyright" href="trademarks.html" title="法律声明" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.12. Web 应用， Apache 和 PHP</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-java.html">上一页</a> </td><th width="60%" align="center">第 6 章 特殊情况</th><td width="20%" align="right"> <a accesskey="n" href="using-python.html">下一页</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-php"></a>6.12. Web 应用， Apache 和 PHP</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-apache"></a>6.12.1. Apache</h3></div></div></div><div class="table"><a id="idp68910288"></a><div class="table-title">表 6.17. 用到 Apache 的 port 可以使用的变量</div><div class="table-contents"><table summary="用到 Apache 的 port 可以使用的变量" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">USE_APACHE</code></td><td>此 port 需要 Apache。 可用的值：
		  <code class="literal">yes</code> (任意可用版本)、
		  <code class="literal">1.3</code>、 <code class="literal">2.0</code>、
		  <code class="literal">2.2</code>、 <code class="literal">2.0+</code>、
		  等等。 默认依赖的版本是
		  <code class="literal">1.3</code>。</td></tr><tr><td><code class="varname">WITH_APACHE2</code></td><td>此 port 需要 Apache 2.0。 如果没有这个变量，
		  则 port 将依赖 Apache 1.3。 这一变量目前已经过时，
		  因而不应继续使用。</td></tr><tr><td><code class="varname">APXS</code></td><td>到 <code class="command">apxs</code> 可执行文件的完整路径。
		  您可以在 port 中替代该值。</td></tr><tr><td><code class="varname">HTTPD</code></td><td>到 <code class="command">httpd</code> 可执行文件的完整路径。
		  您可以在 port 中替代该值。</td></tr><tr><td><code class="varname">APACHE_VERSION</code></td><td>目前系统中安装的 Apache 版本 (只读变量)。
		  这一变量只有在引用了 <code class="filename">bsd.port.pre.mk</code>
		  之后才能使用， 其可能的值为：
		  <code class="literal">13</code>、 <code class="literal">20</code>、
		  <code class="literal">22</code>。</td></tr><tr><td><code class="varname">APACHEMODDIR</code></td><td>Apache 模块所在的文件夹。 在 pkg-plist 中，
		  这一变量会自动展开。</td></tr><tr><td><code class="varname">APACHEINCLUDEDIR</code></td><td>Apache 头文件所在的文件夹。 在 pkg-plist 中，
		  这一变量会自动展开。</td></tr><tr><td><code class="varname">APACHEETCDIR</code></td><td>Apache 配置文件所在的文件夹。 在 pkg-plist 中，
		  这一变量会自动展开。</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="idp68935376"></a><div class="table-title">表 6.18. 在移植 Apache 模块时比较有用的变量</div><div class="table-contents"><table summary="在移植 Apache 模块时比较有用的变量" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">MODULENAME</code></td><td>模块的名称。 默认值为
		  <code class="varname">PORTNAME</code>。 例如：
		  <code class="literal">mod_hello</code></td></tr><tr><td><code class="varname">SHORTMODNAME</code></td><td>模块的简略名字。 默认情况下会自动根据
		  <code class="varname">MODULENAME</code> 计算， 但您也可以自行设置值来替代它。
		  例如： <code class="literal">hello</code></td></tr><tr><td><code class="varname">AP_FAST_BUILD</code></td><td>使用 <code class="command">apxs</code> 来编译和安装模块。</td></tr><tr><td><code class="varname">AP_GENPLIST</code></td><td>同时自动创建
		  <code class="filename">pkg-plist</code>。</td></tr><tr><td><code class="varname">AP_INC</code></td><td>在编译过程中， 将指定的目录加入到搜索头文件的目录中。</td></tr><tr><td><code class="varname">AP_LIB</code></td><td>在编译过程中， 将指定的目录加入到搜索函数库的目录中。</td></tr><tr><td><code class="varname">AP_EXTRAS</code></td><td>传递给
		  <code class="command">apxs</code> 的额外参数。</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="web-apps"></a>6.12.2. Web 应用</h3></div></div></div><p>Web 应用程序应安装到
	  <code class="filename">PREFIX/www/应用程序的名字</code>。
	  为方便起见， 这个路径在
	  <code class="filename">Makefile</code> 和 <code class="filename">pkg-plist</code>
	  均以 <code class="varname">WWWDIR</code> 变量的形式提供。 在
	  <code class="filename">Makefile</code> 中可以使用
	  <code class="varname">WWWDIR_REL</code> 来表示包含了
	  <code class="varname">PREFIX</code> 的该变量值。</p><p>web 服务器进程所用的用户和用户组， 分别以
	  <code class="varname">WWWOWN</code> 和 <code class="varname">WWWGRP</code> 变量的形式提供，
	  如果您需要修改某些文件的属主的话。 这两个变量的默认值均为 <code class="literal">www</code>。
	  如果您的 port 希望使用其他值， 请使用 <code class="literal">WWWOWN?= myuser</code> 这种写法，
	  以便让用户能够更容易地修改它。</p><p>除非您的 port 必需使用 Apache， 否则不要将其写入依赖关系。
	  请尊重运行您的应用程序的用户选择 Apache 以外的其他 web 服务器的需求。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="php-variables"></a>6.12.3. PHP</h3></div></div></div><div class="table"><a id="idp68968400"></a><div class="table-title">表 6.19. 用到 PHP 的 port 中可以使用的变量</div><div class="table-contents"><table summary="用到 PHP 的 port 中可以使用的变量" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">USE_PHP</code></td><td>此 port 需要 PHP。 取值为 <code class="literal">yes</code>
		  将把 PHP 加入依赖关系。 此外， 还可以在此指定将所需要的 PHP
		  扩展模块。 例如： <code class="literal">pcre xml
		  gettext</code></td></tr><tr><td><code class="varname">DEFAULT_PHP_VER</code></td><td>选择在没有安装 PHP 时自动安装的 PHP 主版本。 默认是
		  <code class="literal">4</code>。 可选 <code class="literal">4</code>、
		  <code class="literal">5</code> 之一。</td></tr><tr><td><code class="varname">IGNORE_WITH_PHP</code></td><td>此 port 无法与给定版本的 PHP 一同工作。
		  可选值为 <code class="literal">4</code>、
		  <code class="literal">5</code> 之一。</td></tr><tr><td><code class="varname">USE_PHPIZE</code></td><td>此 port 将作为 PHP 扩展模块进行联编。</td></tr><tr><td><code class="varname">USE_PHPEXT</code></td><td>此 port 将作为 PHP 扩展，
		  且需要作为扩展模块注册。</td></tr><tr><td><code class="varname">USE_PHP_BUILD</code></td><td>联编依赖于 PHP。</td></tr><tr><td><code class="varname">WANT_PHP_CLI</code></td><td>希望使用 CLI (命令行) 版本的 PHP。</td></tr><tr><td><code class="varname">WANT_PHP_CGI</code></td><td>希望使用 CGI 版本的 PHP。</td></tr><tr><td><code class="varname">WANT_PHP_MOD</code></td><td>希望使用 Apache 模块版本的 PHP。</td></tr><tr><td><code class="varname">WANT_PHP_SCR</code></td><td>希望使用 CLI 或 CGI 版本的 PHP。</td></tr><tr><td><code class="varname">WANT_PHP_WEB</code></td><td>希望使用 Apache 模块或 CGI 版本的 PHP。</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69003728"></a>6.12.4. PEAR 模块</h3></div></div></div><p>移植 PEAR 模块的过程非常简单。</p><p>使用 <code class="varname">FILES</code>、
	  <code class="varname">TESTS</code>、 <code class="varname">DATA</code>、
	  <code class="varname">SQLS</code>、 <code class="varname">SCRIPTFILES</code>、
	  <code class="varname">DOCS</code> 以及 <code class="varname">EXAMPLES</code>
	  这些变量来指明您希望安装的文件。
	  所有这里列出的文件都会自动安装到合适的位置， 并加入
	  <code class="filename">pkg-plist</code>。</p><p>在 <code class="filename">Makefile</code> 文件的最后一行引入
	  <code class="filename">${PORTSDIR}/devel/pear/bsd.pear.mk</code>。</p><div class="example"><a id="pear-makefile"></a><div class="example-title">例 6.5. 用于 PEAR 类的 Makefile 例子</div><div class="example-contents"><pre class="programlisting">PORTNAME=       Date
PORTVERSION=    1.4.3
CATEGORIES=     devel www pear

MAINTAINER=     example@domain.com
COMMENT=        PEAR Date and Time Zone Classes

BUILD_DEPENDS=  ${PEARDIR}/PEAR.php:${PORTSDIR}/devel/pear-PEAR
RUN_DEPENDS=    ${BUILD_DEPENDS}

FILES=          Date.php Date/Calc.php Date/Human.php Date/Span.php     \
                Date/TimeZone.php
TESTS=          test_calc.php test_date_methods_span.php testunit.php   \
                testunit_date.php testunit_date_span.php wknotest.txt   \
                bug674.php bug727_1.php bug727_2.php bug727_3.php       \
                bug727_4.php bug967.php weeksinmonth_4_monday.txt       \
                weeksinmonth_4_sunday.txt weeksinmonth_rdm_monday.txt   \
                weeksinmonth_rdm_sunday.txt
DOCS=           TODO
_DOCSDIR=       .

.include &lt;bsd.port.pre.mk&gt;
.include "${PORTSDIR}/devel/pear/bsd.pear.mk"
.include &lt;bsd.port.post.mk&gt;</pre></div></div><br class="example-break" /></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-java.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="using-python.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">6.11. 使用 Java </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 6.13. 使用 Python</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文档和其它文档可从这里下载：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>如果对于FreeBSD有问题，请先阅读
    <a href="http://www.FreeBSD.org/docs.html">文档</a>，如不能解决再联系
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    关于本文档的问题请发信联系
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>