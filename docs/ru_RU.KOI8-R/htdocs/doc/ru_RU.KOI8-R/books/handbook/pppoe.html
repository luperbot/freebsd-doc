<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>23.5. Использование PPP через Ethernet (PPPoE)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="ppp-and-slip.html" title="Глава 23. PPP и SLIP" /><link rel="prev" href="ppp-troubleshoot.html" title="23.4. Решение проблем с соединениями PPP" /><link rel="next" href="pppoa.html" title="23.6. Использование PPP через ATM (PPPoA)" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">23.5. Использование PPP через Ethernet (PPPoE)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ppp-troubleshoot.html">Пред.</a> </td><th width="60%" align="center">Глава 23. PPP и SLIP</th><td width="20%" align="right"> <a accesskey="n" href="pppoa.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pppoe"></a>23.5. Использование PPP через Ethernet (PPPoE)</h2></div><div><span class="authorgroup">Предоставил (с http://node.to/freebsd/how-tos/how-to-freebsd-pppoe.html) <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div></div></div><a id="idp95978704" class="indexterm"></a><a id="idp95979472" class="indexterm"></a><p>Этот раздел описывает настройку PPP через Ethernet (PPP over
      Ethernet, <acronym class="acronym">PPPoE</acronym>).</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95981392"></a>23.5.1. Настройка ядра</h3></div></div></div><p>Для PPPoE более не требуется настройка ядра.  Если необходимая
	поддержка netgraph не встроена в ядро, она будет динамически загружена
	<span class="application">ppp</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95983056"></a>23.5.2. Настройка <code class="filename">ppp.conf</code></h3></div></div></div><p>Вот пример работающего
	<code class="filename">ppp.conf</code>:</p><pre class="programlisting">default:
  set log Phase tun command # you can add more detailed logging if you wish
  set ifaddr 10.0.0.1/0 10.0.0.2/0

name_of_service_provider:
  set device PPPoE:<em class="replaceable"><code>xl1</code></em> # replace xl1 with your Ethernet device
  set authname YOURLOGINNAME
  set authkey YOURPASSWORD
  set dial
  set login
  add default HISADDR</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95985616"></a>23.5.3. Запуск <span class="application">ppp</span></h3></div></div></div><p>Под пользователем <code class="systemitem">root</code> вы можете
	запустить:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp -ddial name_of_service_provider</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95988432"></a>23.5.4. Запуск <span class="application">ppp</span> при загрузке</h3></div></div></div><p>Добавьте к <code class="filename">/etc/rc.conf</code> следующее:</p><pre class="programlisting">ppp_enable="YES"
ppp_mode="ddial"
ppp_nat="YES"	# if you want to enable nat for your local network, otherwise NO
ppp_profile="name_of_service_provider"</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95994960"></a>23.5.5. Использование тега сервиса PPPoE</h3></div></div></div><p>Иногда для установки соединения необходимо использовать тег
	сервиса.  Теги сервисов используются для различения
	PPPoE серверов, подключенных к одной сети.</p><p>В документации, предоставляемой провайдером, должна находиться
	необходимая информация о теге сервиса.  Если вы не можете
	ее обнаружить, обратитесь в службу поддержки.</p><p>В крайнем случае, вы можете попробовать метод, предложенный в
	программе <a class="link" href="http://www.roaringpenguin.com/pppoe/" target="_top">Roaring
	Penguin PPPoE</a>, которая находится в <a class="link" href="ports.html" title="Глава 5. Установка приложений: порты и пакеты">коллекции портов</a>.  Учтите, что этот
	метод может сделать ваш модем неработоспособным, так что дважды
	подумайте перед тем, как воспользоваться им.  Просто установите
	программу, поставляемую с модемом вашим провайдером.  Затем,
	войдите в меню <span class="guimenu">System</span> программы.  Имя вашего
	профиля должно находиться здесь.  Обычно это
	<span class="emphasis"><em>ISP</em></span>.</p><p>Имя профиля (тег сервиса) будет использоваться в записи
	настройки PPPoE в файле <code class="filename">ppp.conf</code>
	(часть команды <code class="command">set device</code>, относящаяся к
	провайдеру).  Обратитесь к странице справочника <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	за более подробной информацией.  Эта команда должна выглядеть
	примерно так:</p><pre class="programlisting">set device PPPoE:<em class="replaceable"><code>xl1</code></em>:<em class="replaceable"><code>ISP</code></em></pre><p>Не забудьте изменить <em class="replaceable"><code>xl1</code></em> на имя
	устройства вашей Ethernet карты.</p><p>Не забудьте изменить <em class="replaceable"><code>ISP</code></em> на
	профиль, определенный вами ранее.</p><p>Дополнительная информация:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://renaud.waldura.com/doc/freebsd/pppoe/" target="_top">Cheaper
	    Broadband with FreeBSD on DSL</a>, опубликовал Renaud
	    Waldura.</p></li><li class="listitem"><p><a class="link" href="http://www.ruhr.de/home/nathan/FreeBSD/tdsl-freebsd.html" target="_top">
	      Nutzung von T-DSL und T-Online mit FreeBSD</a>
	    by Udo Erdelhoff (на немецком).</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ppp-3com"></a>23.5.6. PPPoE c <span class="trademark">3Com</span>(R) <span class="trademark">HomeConnect</span>(R) ADSL Modem Dual Link</h3></div></div></div><p>Этот модем не поддерживает <a class="link" href="http://www.faqs.org/rfcs/rfc2516.html" target="_top">RFC 2516</a>
	(<span class="emphasis"><em>Метод соединения PPP через Ethernet
	(PPPoE)</em></span>, написанный L. Mamakos, K. Lidl, J. Evarts,
	D. Carrel, D. Simone, и R. Wheeler).  Вместо этого, для
	фреймов Ethernet используются различные коды типов пакетов.
	Сообщите <a class="link" href="http://www.3com.com/" target="_top">3Com</a> если
	считаете, что они должны соблюдать спецификации PPPoE.</p><p>Для включения поддержки этого нестандартного устройства, в FreeBSD
	необходимо установить переменную sysctl.  Это может быть сделано
	автоматически, поместите в
	<code class="filename">/etc/sysctl.conf</code> следующую переменную:</p><pre class="programlisting">net.graph.nonstandard_pppoe=1</pre><p>или, для непосредственного включения, выполните команду
	<code class="command">sysctl net.graph.nonstandard_pppoe=1</code>.</p><p>К сожалению, поскольку эта настройка влияет на всю систему,
	невозможно одновременно взаимодействовать с нормальным PPPoE
	клиентом или сервером и <span class="trademark">3Com</span>(R) <span class="trademark">HomeConnect</span>(R) ADSL Modem.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ppp-troubleshoot.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="ppp-and-slip.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="pppoa.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">23.4. Решение проблем с соединениями <acronym class="acronym">PPP</acronym> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 23.6. Использование <span class="application">PPP</span> через ATM
      (PPPoA)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>