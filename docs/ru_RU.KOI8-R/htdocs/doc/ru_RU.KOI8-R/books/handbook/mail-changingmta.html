<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>24.4. Установка другой почтовой программы</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="mail.html" title="Глава 24. Электронная почта" /><link rel="prev" href="sendmail.html" title="24.3. Настройка sendmail" /><link rel="next" href="mail-trouble.html" title="24.5. Поиск и устранение неисправностей" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">24.4. Установка другой почтовой программы</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="sendmail.html">Пред.</a> </td><th width="60%" align="center">Глава 24. Электронная почта</th><td width="20%" align="right"> <a accesskey="n" href="mail-trouble.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-changingmta"></a>24.4. Установка другой почтовой программы</h2></div><div><span class="authorgroup">Написал <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Andrew</span> <span class="surname">Boothman</span></span>. </span></div><div><span class="authorgroup">Информация получена из писем, написанных <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Gregory</span> <span class="surname">Neil Shapiro</span></span>. </span></div></div></div><a id="idp96620624" class="indexterm"></a><p>Как уже упоминалось, FreeBSD поставляется с MTA (Mail Transfer Agent)
      <span class="application">sendmail</span>.  Следовательно, по умолчанию
      именно эта программа отвечает за вашу исходящую и входящую
      почту.</p><p>Однако, по различным причинам некоторые системные администраторы
      заменяют системный MTA.  Эти причины варьируются от простого желания
      попробовать другой MTA до потребности в определенных возможностях
      пакета, основанного на другой почтовой программе.  К счастью, вне
      зависимости от причины, в FreeBSD такая замена выполняется
      просто.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96622928"></a>24.4.1. Установка нового MTA</h3></div></div></div><p>Вам предоставлен широкий выбор MTA.  Начните с поиска в
	<a class="link" href="ports.html" title="Глава 5. Установка приложений: порты и пакеты">Коллекции Портов FreeBSD</a>,
	где их немало.  Конечно, вы можете использовать любой MTA
	по желанию, взятый откуда угодно, если только сможете
	запустить его под FreeBSD.</p><p>Начните с установки нового MTA.  После установки у вас будет
	возможность решить, действительно ли он подходит вашем нуждам,
	а также настроить новое программное обеспечение перед тем, как
	заменить им <span class="application">sendmail</span>.  При установке
	новой программы убедитесь, что она не пытается перезаписать
	системные файлы, такие как <code class="filename">/usr/bin/sendmail</code>.
	Иначе ваша новая почтовая программа фактически начнет работать
	до того, как вы ее настроите.</p><p>Обратитесь к документации на выбранный MTA
	за информацией по его настройке.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-disable-sendmail"></a>24.4.2. Отключение <span class="application">sendmail</span></h3></div></div></div><div xmlns="" class="warning"><h3 class="admontitle">Предупреждение: </h3><p xmlns="http://www.w3.org/1999/xhtml">Если вы отключите сервис исходящей почты
	  <span class="application">sendmail</span>, необходимо
	  заменить его альтернативной системой
	  доставки почты.  Если вы не сделаете этого, системные программы,
	  такие как <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a>, не смогут отправлять сообщения
	  по электронной почте как обычно.  Многие программы в вашей
	  системе могут требовать наличия функционирующей
	  <span class="application">sendmail</span>-совместимой системы.
	  Если приложения будут продолжать использовать программу
	  <span class="application">sendmail</span> для отправки почты
	  после того, как вы её отключили, почта может попасть в
	  неактивную очередь <span class="application">sendmail</span> и никогда
	  не будет доставлена.</p></div><p>Для полного отключения
	<span class="application">sendmail</span>, включая сервис исходящей
	почты, используйте</p><pre class="programlisting">sendmail_enable="NO"
sendmail_submit_enable="NO"
sendmail_outbound_enable="NO"
sendmail_msp_queue_enable="NO"</pre><p>в <code class="filename">/etc/rc.conf</code>.</p><p>Если вы хотите отключить только сервис входящей почты
	<span class="application">sendmail</span>, установите</p><pre class="programlisting">sendmail_enable="NO"</pre><p>в <code class="filename">/etc/rc.conf</code>.  Дополнительная информация
	о параметрах запуска <span class="application">sendmail</span>
	доступна на странице справочника <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.sendmail</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96643920"></a>24.4.3. Запуск нового MTA при загрузке</h3></div></div></div><p>Новый МТА можно запускать автоматически при загрузке системы
	добавив соответствующую строку в <code class="filename">/etc/rc.conf</code>.
	Ниже приведен пример для postfix:</p><pre class="screen"><code class="prompt">#</code> echo '<em class="replaceable"><code>postfix</code></em>_enable=<span class="quote"><<<span class="quote">YES</span>>></span>' &gt;&gt; /etc/rc.conf</pre><p>С этого момента МТА будет запускаться автоматически во время
	загрузки системы.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96647376"></a>24.4.4. Замещение <span class="application">sendmail</span> как
	почтовой программы по умолчанию</h3></div></div></div><p>Программа <span class="application">sendmail</span> настолько
	распространена в качестве стандартной программы для систем <span class="trademark">UNIX</span>(R),
	что многие программы считают, что она уже установлена и настроена.
	По этой причине многие альтернативные MTA предоставляют собственные
	совместимые реализации интерфейса командной строки
	<span class="application">sendmail</span>; это облегчает их использование
	в качестве <span class="quote"><<<span class="quote">прозрачной</span>>></span> замены
	<span class="application">sendmail</span>.</p><p>Поэтому если вы используете альтернативную почтовую программу,
	потребуется убедиться, что когда программное обеспечение
	пытается выполнить стандартные исполняемые файлы
	<span class="application">sendmail</span>, такие как
	<code class="filename">/usr/bin/sendmail</code>, на самом деле выполняются
	программы вновь установленной почтовой системы.  К счастью,
	FreeBSD предоставляет систему, называемую <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mailwrapper&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mailwrapper</span>(8)</span></a>,
	которая выполняет эту работу за вас.</p><p>Когда установлен <span class="application">sendmail</span>,
	файл <code class="filename">/etc/mail/mailer.conf</code> выглядит
	примерно так:</p><pre class="programlisting">sendmail	/usr/libexec/sendmail/sendmail
send-mail	/usr/libexec/sendmail/sendmail
mailq		/usr/libexec/sendmail/sendmail
newaliases	/usr/libexec/sendmail/sendmail
hoststat	/usr/libexec/sendmail/sendmail
purgestat	/usr/libexec/sendmail/sendmail</pre><p>Это означает, что когда выполняется какая-то из этих стандартных
	программ (например сам <code class="filename">sendmail</code>), система на
	самом деле вызывает копию mailwrapper, называемую
	<code class="filename">sendmail</code>, которая обращается к
	<code class="filename">mailer.conf</code> и выполняет вместо этого
	<code class="filename">/usr/libexec/sendmail/sendmail</code>.
	Такая схема делает простой замену программ, которые на самом деле
	выполняются, когда вызываются стандартные функции
	<code class="filename">sendmail</code>.</p><p>Поэтому если вы хотите выполнять
	<code class="filename">/usr/local/supermailer/bin/sendmail-compat</code>
	вместо <span class="application">sendmail</span>, отредактируйте
	<code class="filename">/etc/mail/mailer.conf</code> так:</p><pre class="programlisting">sendmail	/usr/local/supermailer/bin/sendmail-compat
send-mail	/usr/local/supermailer/bin/sendmail-compat
mailq		/usr/local/supermailer/bin/mailq-compat
newaliases	/usr/local/supermailer/bin/newaliases-compat
hoststat	/usr/local/supermailer/bin/hoststat-compat
purgestat	/usr/local/supermailer/bin/purgestat-compat</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96662992"></a>24.4.5. Запуск новой почтовой программы</h3></div></div></div><p>Как только вы все настроили, потребуется или уничтожить
	процесс <span class="application">sendmail</span>, который уже не
	нужен и запустить новую почтовую программу, или просто перегрузить
	систему.  Перезагрузка также даст вам возможность проверить,
	правильно ли настроена система для автоматического запуска
	MTA при загрузке.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sendmail.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="mail.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="mail-trouble.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">24.3. Настройка <span class="application">sendmail</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 24.5. Поиск и устранение неисправностей</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>