<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>27.9. IP по параллельному порту (PLIP)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="advanced-networking.html" title="Глава 27. Сложные вопросы работы в сети" /><link rel="prev" href="network-natd.html" title="27.8. Даемон преобразования сетевых адресов (natd)" /><link rel="next" href="network-ipv6.html" title="27.10. IPv6" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">27.9. IP по параллельному порту (PLIP)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-natd.html">Пред.</a> </td><th width="60%" align="center">Глава 27. Сложные вопросы работы в сети</th><td width="20%" align="right"> <a accesskey="n" href="network-ipv6.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-plip"></a>27.9. IP по параллельному порту (PLIP)</h2></div></div></div><a id="idp100824016" class="indexterm"></a><a id="idp100824784" class="indexterm"></a><p>PLIP позволяет нам работать с TCP/IP по параллельному порту.  Это
      полезно для машин без сетевых адаптеров или для установки на лэптопы.
      В этом разделе мы обсудим:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>создание кабеля для параллельного порта (laplink).</p></li><li class="listitem"><p>Соединение двух компьютеров посредством PLIP.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-create-parallel-cable"></a>27.9.1. Создание параллельного кабеля</h3></div></div></div><p>Вы можете приобрести кабель для параллельного порта в большинстве
	магазинов, торгующих комплектующими.  Если вы его не найдете, или же
	просто хотите знать, как он делается, то следующая таблица поможет вам
	сделать такой кабель из обычного принтерного кабеля для параллельного
	порта.</p><div class="table"><a id="idp100829520"></a><div class="table-title">Таблица 27.1. Распайка кабеля для параллельного порта для сетевой
	  работы</div><div class="table-contents"><table summary="Распайка кабеля для параллельного порта для сетевой&#10;&#9;  работы" border="0"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>A-name</th><th>A-End</th><th>B-End</th><th>Описание</th><th>Post/Bit</th></tr></thead><tbody><tr><td><div class="literallayout"><p>DATA0<br />
-ERROR</p></div></td><td><div class="literallayout"><p>2<br />
15</p></div></td><td><div class="literallayout"><p>15<br />
2</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x01<br />
1/0x08</p></div></td></tr><tr><td><div class="literallayout"><p>DATA1<br />
+SLCT</p></div></td><td><div class="literallayout"><p>3<br />
13</p></div></td><td><div class="literallayout"><p>13<br />
3</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x02<br />
1/0x10</p></div></td></tr><tr><td><div class="literallayout"><p>DATA2<br />
+PE</p></div></td><td><div class="literallayout"><p>4<br />
12</p></div></td><td><div class="literallayout"><p>12<br />
4</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x04<br />
1/0x20</p></div></td></tr><tr><td><div class="literallayout"><p>DATA3<br />
-ACK</p></div></td><td><div class="literallayout"><p>5<br />
10</p></div></td><td><div class="literallayout"><p>10<br />
5</p></div></td><td>Strobe</td><td><div class="literallayout"><p>0/0x08<br />
1/0x40</p></div></td></tr><tr><td><div class="literallayout"><p>DATA4<br />
BUSY</p></div></td><td><div class="literallayout"><p>6<br />
11</p></div></td><td><div class="literallayout"><p>11<br />
6</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x10<br />
1/0x80</p></div></td></tr><tr><td>GND</td><td>18-25</td><td>18-25</td><td>GND</td><td>-</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-plip-setup"></a>27.9.2. Настройка PLIP</h3></div></div></div><p>Прежде всего вы должны найти laplink-кабель.  Затем
	удостоверьтесь, что на обоих компьютерах в ядро включена поддержка
	драйвера <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lpt</span>(4)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>grep lp /var/run/dmesg.boot</code></strong>
lpt0: &lt;Printer&gt; on ppbus0
lpt0: Interrupt-driven port</pre><p>Управление параллельным портом должно выполняться по прерываниям.
	Файл <code class="filename">/boot/device.hints</code>
	должен содержать следующие строки:</p><pre class="programlisting">hint.ppc.0.at="isa"
hint.ppc.0.irq="7"</pre><p>Затем проверьте, что файл конфигурации ядра имеет строку
	<code class="literal">device plip</code>, или загружен ли модуль ядра
	<code class="filename">plip.ko</code>.  В обоих случаях интерфейс работы с
	сетью по параллельному порту должен присутствовать на момент
	использования команды <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig plip0</code></strong>
plip0: flags=8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500</pre><p>Подключите кабель laplink к параллельным интерфейсам на обоих
	компьютерах.</p><p>Настройте параметры сетевого интерфейса с обеих сторон, работая как
	пользователь <code class="systemitem">root</code>.  К примеру, если вы хотите
	соединить хост <code class="systemitem">host1</code>, на котором работает
	FreeBSD 4.X, с хостом <code class="systemitem">host2</code> под управлением
	FreeBSD 5.X:</p><pre class="programlisting">                 host1 &lt;-----&gt; host2
IP Address    10.0.0.1      10.0.0.2</pre><p>Настройте интерфейс на машине <code class="systemitem">host1</code>,
	выполнив:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig plip0 10.0.0.1 10.0.0.2</code></strong></pre><p>Настройте интерфейс на машине <code class="systemitem">host2</code>,
	выполнив:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig lp0 10.0.0.2 10.0.0.1</code></strong></pre><p>Теперь вы должны получить работающее соединение.  Пожалуйста,
	прочтите страницы руководства по <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lp</span>(4)</span></a> и <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lpt</span>(4)</span></a> для выяснения
	деталей.</p><p>Вы должны также добавить оба хоста в
	<code class="filename">/etc/hosts</code>:</p><pre class="programlisting">127.0.0.1               localhost.my.domain localhost
10.0.0.1                host1.my.domain host1
10.0.0.2                host2.my.domain</pre><p>Чтобы проверить работу соединения, перейдите к каждому хосту и
	выполните тестирование соединения с другой машиной посредством команды
	ping.  К примеру, на машине <code class="systemitem">host1</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig lp0</code></strong>
lp0: flags=8851&lt;UP,POINTOPOINT,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
	inet 10.0.0.1 --&gt; 10.0.0.2 netmask 0xff000000
<code class="prompt">#</code> <strong class="userinput"><code>netstat -r</code></strong>
Routing tables

Internet:
Destination        Gateway          Flags     Refs     Use      Netif Expire
host2              host1              UH          0       0       lp0
<code class="prompt">#</code> <strong class="userinput"><code>ping -c 4 host2</code></strong>
PING host2 (10.0.0.2): 56 data bytes
64 bytes from 10.0.0.2: icmp_seq=0 ttl=255 time=2.774 ms
64 bytes from 10.0.0.2: icmp_seq=1 ttl=255 time=2.530 ms
64 bytes from 10.0.0.2: icmp_seq=2 ttl=255 time=2.556 ms
64 bytes from 10.0.0.2: icmp_seq=3 ttl=255 time=2.714 ms

--- host2 ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max/stddev = 2.530/2.643/2.774/0.103 ms</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-natd.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="advanced-networking.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="network-ipv6.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">27.8. Даемон преобразования сетевых адресов (natd) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 27.10. IPv6</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>