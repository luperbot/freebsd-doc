<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>8.5. Использование SUB_FILES и SUB_LIST</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD по созданию портов" /><link rel="up" href="pkg-files.html" title="Глава 8. Файлы pkg-*" /><link rel="prev" href="pkg-names.html" title="8.4. Изменение имён файлов pkg-*" /><link rel="next" href="testing.html" title="Глава 9. Тестирование вашего порта" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">8.5. Использование <code class="varname">SUB_FILES</code> и
      <code class="varname">SUB_LIST</code></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="pkg-names.html">Пред.</a> </td><th width="60%" align="center">Глава 8. Файлы <code class="filename">pkg-*</code></th><td width="20%" align="right"> <a accesskey="n" href="testing.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-sub-files"></a>8.5. Использование <code class="varname">SUB_FILES</code> и
      <code class="varname">SUB_LIST</code></h2></div></div></div><p>Переменные <code class="varname">SUB_FILES</code> и
      <code class="varname">SUB_LIST</code> подходят для задания в файлах порта
      динамических значений, таких как <code class="varname">PREFIX</code>
      установки в <code class="filename">pkg-message</code>.</p><p>В переменной <code class="varname">SUB_FILES</code> указывается
      перечень файлов для автоматического изменения.  Каждый
      <em class="replaceable"><code>file</code></em> из перечня
      <code class="varname">SUB_FILES</code> обязан иметь соответствующий
      <code class="filename">file.in</code>, присутствующий в
      <code class="varname">FILESDIR</code>.  Измененная версия будет создана в
      <code class="varname">WRKDIR</code>.  Файлы, определенные в качестве
      значения <code class="varname">USE_RC_SUBR</code> (или устаревшего
      <code class="varname">USE_RCORDER</code>), автоматически добавляются в
      <code class="varname">SUB_FILES</code>.  Для файлов
      <code class="filename">pkg-message</code>,
      <code class="filename">pkg-install</code> и
      <code class="filename">pkg-deinstall</code> устанавливается
      соответствующая переменная Makefile, указывающая на
      обработанную версию.</p><p>Переменная <code class="varname">SUB_LIST</code> содержит перечень
      пар <code class="literal">VAR=VALUE</code>.  В каждом файле из
      <code class="varname">SUB_FILES</code> для каждой пары будет произведена
      замена <code class="literal">%%VAR%%</code> на <code class="literal">VALUE</code>.
      Некоторые общие пары определяются автоматически:
      <code class="varname">PREFIX</code>, <code class="varname">LOCALBASE</code>,
      <code class="varname">DATADIR</code>, <code class="varname">DOCSDIR</code>,
      <code class="varname">EXAMPLESDIR</code>, <code class="varname">WWWDIR</code> и
      <code class="varname">ETCDIR</code>.  Любая строка, начинающаяся с
      <code class="literal">@comment</code>, будет удалена из конечного файла
      после подстановки переменной.</p><p>В следующем примере в <code class="filename">pkg-message</code>
      будет сделана замена <code class="literal">%%ARCH%%</code> на системную
      архитектуру:</p><pre class="programlisting">SUB_FILES=	pkg-message
SUB_LIST=	ARCH=${ARCH}</pre><p>Обратите внимание, что в этом примере в
      <code class="varname">FILESDIR</code> обязательно существование файла
      <code class="filename">pkg-message.in</code>.</p><p>Пример хорошего <code class="filename">pkg-message.in</code>:</p><pre class="programlisting">Now it is time to configure this package.
Copy %%PREFIX%%/share/examples/putsy/%%ARCH%%.conf into your home directory
as .putsy.conf and edit it.</pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pkg-names.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="pkg-files.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="testing.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">8.4. Изменение имён файлов
      <code class="filename">pkg-*</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Глава 9. Тестирование вашего порта</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>