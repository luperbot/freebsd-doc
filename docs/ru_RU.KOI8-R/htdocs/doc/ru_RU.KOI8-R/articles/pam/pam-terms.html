<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>2. Термины и соглашения</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Подключаемые Модули Аутентификации (PAM)" /><link rel="up" href="index.html" title="Подключаемые Модули Аутентификации (PAM)" /><link rel="prev" href="index.html" title="Подключаемые Модули Аутентификации (PAM)" /><link rel="next" href="pam-essentials.html" title="3. Основы PAM" /><link rel="copyright" href="pam-legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2. Термины и соглашения</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="index.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="pam-essentials.html">След.</a></td></tr></table><hr /></div><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pam-terms"></a>2. Термины и соглашения</h2></div></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pam-definitions"></a>2.1. Определения</h3></div></div></div><p>Терминология, используемая в PAM, достаточно запутана.  Ни
        оригинальная работа Samar и Lai, ни спецификация XSSO не делают никаких
        попыток формально определить термины для различных объектов и
        участвующих в PAM сторон, а термины, которые они используют (но не
        определяют) иногда неверны и неоднозначны.  Первой попыткой создать
        недвусмысленную и согласованную терминологию была работа, которую
        написал Andrew G. Morgan (автор Linux-PAM) в 1999 году.  Хотя выбор
        терминологии, которую сделал Морган, был гигантским скачком вперед,
        это, по мнению автора данной статьи, не означает ее правильность.
        Далее делается попытка, в значительной степени на основе работы
        Моргана, дать точные и недвусмысленные определения терминов для всех
        участников и объектов PAM.</p><div class="glosslist"><dl><dt><span class="glossterm">учётная запись (account)</span></dt><dd class="glossdef"><p>Набор полномочий, которые аппликант запрашивает от
              арбитратора.</p></dd><dt><span class="glossterm">аппликант (applicant)</span></dt><dd class="glossdef"><p>Пользователь или объект, запрашивающие аутентификацию.</p></dd><dt><span class="glossterm">арбитратор (arbitrator)</span></dt><dd class="glossdef"><p>Пользователь или объект, имеющий привилегии, достаточные
              для проверки полномочий аппликанта и права подтвердить или
              отклонить запрос.</p></dd><dt><span class="glossterm">цепочка (chain)</span></dt><dd class="glossdef"><p>Последовательность модулей, которые будут вызваны в ответ на
              запрос PAM.  В цепочку включена информация о последовательности
              вызовов модулей, аргументах, которые нужно им передать, и о том,
              как интерпретировать результаты.</p></dd><dt><span class="glossterm">клиент (client)</span></dt><dd class="glossdef"><p>Приложение, отвечающее за инициирование запроса на
              аутентификацию от имени аппликанта и получающее от него
              необходимую для аутентификации информацию.</p></dd><dt><span class="glossterm">подсистема (facility)</span></dt><dd class="glossdef"><p>Одна из четырех основных групп функциональности, которые дает
              PAM: аутентификация, управление учетными записями, управление
              сеансом и обновление ключом аутентификации.</p></dd><dt><span class="glossterm">модуль (module)</span></dt><dd class="glossdef"><p>Набор из одной или большего количества связанных функций,
              реализующих определенную подсистему аутентификации, собранный в
              один (обычно динамически загружаемый) двоичный файл,
              идентифицируемый по имени.</p></dd><dt><span class="glossterm">политика (policy)</span></dt><dd class="glossdef"><p>Полный набор конфигурационных деклараций, описывающих, как
              обрабатывать запросы PAM к определенной услуге.  Политика обычно
              состоит из четырех цепочек, по одной для каждой подсистемы, хотя
              некоторые службы используют не все четыре подсистемы.</p></dd><dt><span class="glossterm">сервер (server)</span></dt><dd class="glossdef"><p>Приложение, выступающее от имени арбитратора для общения с
              клиентом, запрашивания аутентификационной информации, проверки
              полномочий аппликанта и подтверждающее или отклоняющее
              запрос.</p></dd><dt><span class="glossterm">сервис (service)</span></dt><dd class="glossdef"><p>Класс серверов, предоставляющих похожую или связанную
              функциональность, и требующую подобную аутентификацию.  Политики
              PAM задаются на основе сервисов, так что ко всем серверам,
              объявляющим одно и тоже имя сервиса, будет применяться одна и та
              же политика.</p></dd><dt><span class="glossterm">сеанс (session)</span></dt><dd class="glossdef"><p>Контекст, в котором сервис оказывается аппликанту сервером.
              Одна из четырех подсистем PAM, управление сеансом, касается
              исключительно настройке и очистке этого контекста.</p></dd><dt><span class="glossterm">ключ (token)</span></dt><dd class="glossdef"><p>Блок информации, связанный с учётной записью, например,
              пароль или ключевая фраза, которую аппликант должен предоставить
              для своей идентификации.</p></dd><dt><span class="glossterm">транзакция (transaction)</span></dt><dd class="glossdef"><p>Последовательность запросов от одного и того же аппликанта к
              одному и тому же экземпляру того же самого сервера, начиная с
              аутентификации и установления сеанса и заканчивая закрытием
              сеанса.</p></dd></dl></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pam-usage-examples"></a>2.2. Примеры использования</h3></div></div></div><p>Этот раздел предназначен для иллюстрации значений некоторых
        терминов, определенных выше, при помощи простых примеров.</p><div class="section"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71958096"></a>2.2.1. Объединенные клиент и сервер</h4></div></div></div><p>В этом простом примере показывается пользователь
          <code class="literal">alice</code>, выполняющий команду <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> для
          того, чтобы стать пользователем <code class="literal">root</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>whoami</code></strong>
alice
<code class="prompt">%</code> <strong class="userinput"><code>ls -l `which su`</code></strong>
-r-sr-xr-x  1 root  wheel  10744 Dec  6 19:06 /usr/bin/su
<code class="prompt">%</code> <strong class="userinput"><code>su -</code></strong>
Password: <strong class="userinput"><code>xi3kiune</code></strong>
<code class="prompt">#</code> whoami
root</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Аппликантом является <code class="literal">alice</code>.</p></li><li class="listitem"><p>Учетной записью является <code class="literal">root</code>.</p></li><li class="listitem"><p>Процесс <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> является как клиентом, так и
              сервером.</p></li><li class="listitem"><p>Аутентификационным ключом является
              <code class="literal">xi3kiune</code>.</p></li><li class="listitem"><p>Арбитратором выступает <code class="literal">root</code>, и именно
              поэтому у команды <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> выставлен бит выполнения с
              правами <code class="literal">root</code>.</p></li></ul></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72006480"></a>2.2.2. Клиент и сервер разделены</h4></div></div></div><p>В примере ниже рассматривается пользователь
          <code class="literal">eve</code>, пытающийся установить <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a>-соединение
          с <code class="literal">login.example.com</code>, и успешно входя как
	  пользователь <code class="literal">bob</code>.  Боб должен был выбрать пароль
          получше!</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>whoami</code></strong>
eve
<code class="prompt">%</code> <strong class="userinput"><code>ssh bob@login.example.com</code></strong>
bob@login.example.com's password: <strong class="userinput"><code>god</code></strong>
Last login: Thu Oct 11 09:52:57 2001 from 192.168.0.1
Copyright (c) 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
        The Regents of the University of California.  All rights reserved.
FreeBSD 4.4-STABLE (LOGIN) #4: Tue Nov 27 18:10:34 PST 2001

Welcome to FreeBSD!
<code class="prompt">%</code></pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Аппликантом является <code class="literal">eve</code>.</p></li><li class="listitem"><p>Клиентом является процесс <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> пользователя
              Eve.</p></li><li class="listitem"><p>Сервером является процесс <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a> на машине
	      <code class="literal">login.example.com</code></p></li><li class="listitem"><p>Учетной записью является <code class="literal">bob</code>.</p></li><li class="listitem"><p>Ключом аутентификации является
	      <code class="literal">god</code>.</p></li><li class="listitem"><p>Хотя этого не видно в примере, но арбитратором является
	      <code class="literal">root</code>.</p></li></ul></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72053840"></a>2.2.3. Пример политики</h4></div></div></div><p>Следующее является политикой, используемой во FreeBSD по
          умолчанию для <code class="literal">sshd</code>:</p><pre class="programlisting">sshd   auth            required        pam_nologin.so  no_warn
sshd   auth            required        pam_unix.so     no_warn try_first_pass
sshd   account         required        pam_login_access.so
sshd   account         required        pam_unix.so
sshd   session         required        pam_lastlog.so  no_fail
sshd   password        required        pam_permit.so</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Эта политика применяется к службе <code class="literal">sshd</code>
              (что не обязательно ограничено сервером <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a>).</p></li><li class="listitem"><p><code class="literal">auth</code>, <code class="literal">account</code>,
	      <code class="literal">session</code> и
	      <code class="literal">password</code> являются подсистемами.</p></li><li class="listitem"><p><code class="filename">pam_nologin.so</code>,
	      <code class="filename">pam_unix.so</code>,
              <code class="filename">pam_login_access.so</code>,
              <code class="filename">pam_lastlog.so</code> и
	      <code class="filename">pam_permit.so</code> являются модулями.  Из этого
              примера видно, что <code class="filename">pam_unix.so</code>
	      реализует по крайней мере две подсистемы (аутентификацию и
              управление учётными записями).</p></li></ul></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="index.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="pam-essentials.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Подключаемые Модули Аутентификации (PAM) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 3. Основы PAM</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>