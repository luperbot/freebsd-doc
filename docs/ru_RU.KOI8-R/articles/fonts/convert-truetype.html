<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>8. Преобразование файлов шрифтов TrueType в формат groff/PostScript для использования с groff</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Шрифты и FreeBSD" /><link rel="up" href="index.html" title="Шрифты и FreeBSD" /><link rel="prev" href="type1-fonts-groff.html" title="7. Использование шрифтов в формате type 1 с программой Groff" /><link rel="next" href="truetype-for-other-programs.html" title="9. Можно ли использовать шрифты в формате TrueType с другими программами?" /><link rel="copyright" href="trademarks.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">8. Преобразование файлов шрифтов TrueType в формат groff/PostScript для
      использования с groff</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="type1-fonts-groff.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="truetype-for-other-programs.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="convert-truetype"></a>8. Преобразование файлов шрифтов TrueType в формат groff/PostScript для
      использования с groff</h2></div></div></div><p>Потенциально это требует некоторых усилий, просто потому что зависит
      некоторых утилит, которые в качестве части системы не устанавливаются.
      Это:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="command">ttf2pf</code></span></dt><dd><p>Утилита для преобразования TrueType в PostScript.  Она
            позволяет преобразовать шрифт TrueType в метрику шрифта в текстовом
            формате (файл <code class="filename">.afm</code>).</p><p>Доступна по адресу <code class="uri"><a class="uri" href="http://sunsite.icm.edu.pl/pub/GUST/contrib/BachoTeX98/ttf2pf/" target="_top">http://sunsite.icm.edu.pl/pub/GUST/contrib/BachoTeX98/ttf2pf/</a></code>.
            Замечание: Эти файлы являются PostScript-программами и должны быть
            скачаны на диск щелчком на ссылке при нажатой клавише
	    <span class="keycap"><strong>Shift</strong></span>.  В противном случае для их просмотра ваш
            браузер может попытаться запустить программу
            <span class="application">ghostview</span>.</p><p>Интерес представляют следующие файлы:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">GS_TTF.PS</code></p></li><li class="listitem"><p><code class="filename">PF2AFM.PS</code></p></li><li class="listitem"><p><code class="filename">ttf2pf.ps</code></p></li></ul></div><p>Смесь верхнего/нижнего регистров присутствует из-за того, что
            эти файлы предназначены и для DOS.  <code class="filename">ttf2pf.ps</code>
            использует остальные с именами в верхнем регистре, так что при
            переименовании это нужно учитывать.  (На самом деле
	    <code class="filename">GS_TTF.PS</code> и <code class="filename">PFS2AFM.PS</code>
            предположительно являются частью дистрибутива <span class="application">Ghostscript</span>, но их
            легко использовать как отдельные утилиты.  В поставку FreeBSD они
            не включены.)  Вы можете также установить их в каталог
	    <code class="filename">/usr/local/share/groff_font/devps</code>(?).</p></dd><dt><span class="term"><code class="command">afmtodit</code></span></dt><dd><p>Создает файлы шрифтов для использования с программой <span class="application">groff</span> из
            текстовых файлов с метриками шрифта.  Она обычно располагается в
            каталоге <code class="filename">/usr/src/contrib/groff/afmtodit</code> и
            для ее использования требуется проделать некоторую работу.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Если вы избегаете работать в дереве
              <code class="filename">/usr/src</code>, просто скопируйте содержимое
              вышеупомянутого каталога во временный рабочий каталог.</p></div><p>Во рабочем каталоге вам нужно построить утилиту.  Просто
            введите такую команду:</p><pre class="screen">
<code class="prompt">#</code> <strong class="userinput"><code>make -f Makefile.sub afmtodit</code></strong>
	  </pre><p>Вам может также потребоваться скопировать
	    <code class="filename">/usr/contrib/groff/devps/generate/textmap</code> в
	    <code class="filename">/usr/share/groff_font/devps/generate</code>, если его
              не существует.</p></dd></dl></div><p>Как только эти утилиты готовы, вы можете начать:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Создайте файл <code class="filename">.afm</code> по такой команде:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>gs -dNODISPLAY -q -- ttf2pf.ps <em class="replaceable"><code>TTF_name</code></em> <em class="replaceable"><code>PS_font_name</code></em> <em class="replaceable"><code>AFM_name</code></em></code></strong>
	</pre><p>Здесь <em class="replaceable"><code>TTF_name</code></em> обозначает ваш файл со
          шрифтом TrueType, <em class="replaceable"><code>PS_font_name</code></em> является
          именем для файла <code class="filename">.pfa</code>,
          <em class="replaceable"><code>AFM_name</code></em> задает имя для файла
          <code class="filename">.afm</code>.  Если вы не укажете имена выходных файлов,
          для форматов <code class="filename">.pfa</code> или <code class="filename">.afm</code>,
          то по умолчанию будут использоваться имена, получаемые из имени файла
          со шрифтом TrueType.</p><p>При этом также будет создан файл <code class="filename">.pfa</code>,
          текстовый файл с метриками PostScript-шрифта
          ((<code class="filename">.pfb</code> для двоичного представления).  Это не
          не обязательно, но может быть (я думаю) полезным для сервера
          шрифтов.</p><p>Например, для преобразования шрифта 30f9 Barcode с именами файлов
          по умолчанию, воспользуйтесь следующей командой:</p><pre class="screen">
<code class="prompt">%</code> <strong class="userinput"><code>gs -dNODISPLAY -- ttf2pf.ps 3of9.ttf</code></strong>
Aladdin Ghostscript 5.10 (1997-11-23)
Copyright (C) 1997 Aladdin Enterprises, Menlo Park, CA.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Converting 3of9.ttf to 3of9.pfa and 3of9.afm.
	</pre><p>Если вы хотите, чтобы преобразованные шрифты сохранялись в файлы
	  <code class="filename">A.pfa</code> and <code class="filename">B.afm</code>, то
          выдайте такую команду:</p><pre class="screen">
<code class="prompt">%</code> <strong class="userinput"><code>gs -dNODISPLAY -- ttf2pf.ps 3of9.ttf A B</code></strong>
Aladdin Ghostscript 5.10 (1997-11-23)
Copyright (C) 1997 Aladdin Enterprises, Menlo Park, CA.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Converting 3of9.ttf to A.pfa and B.afm.
	</pre></li><li class="listitem"><p>Создайте PostScript-файл для <span class="application">groff</span>:</p><p>Смените текущий каталог на
          <code class="filename">/usr/share/groff_font/devps</code> для облегчения
          запуска упоминаемых далее программ.  Для этого вам может понадобиться
          иметь привилегии администратора системы.  (Или, если вы избегаете
          здесь работать, обязательно посмотрите файлы
          <code class="filename">DESC</code>, <code class="filename">text.enc</code> и
	  <code class="filename">generate/textmap</code> в этом каталоге.)</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>afmtodit -d DESC -e text.enc file.afm \
	    generate/textmap <em class="replaceable"><code>PS_font_name</code></em></code></strong>
	</pre><p>Здесь <code class="filename">file.afm</code> является файлом
          <em class="replaceable"><code>AFM_name</code></em>, созданным программой
	  <code class="command">ttf2pf.ps</code> выше, а
          <em class="replaceable"><code>PS_font_name</code></em> является именем шрифта,
          используемым в той команде, так же, как и имя, которое будет
          использовать утилита <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=groff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">groff</span>(1)</span></a> для ссылки на этот шрифт.
          Например, полагая, что вы использовали первую команду
	  <code class="command">tiff2pf.ps</code> выше, то шрифт 3of9 Barcode может быть
          создан при помощи такой команды:</p><pre class="screen">
<code class="prompt">%</code> <strong class="userinput"><code>afmtodit -d DESC -e text.enc 3of9.afm \
                 generate/textmap 3of9</code></strong>
	</pre><p>Проверьте, что полученный файл
          <em class="replaceable"><code>PS_font_name</code></em> (к примеру,
          <code class="filename">3of9</code> из примера выше) расположен в каталоге
	  <code class="filename">/usr/share/groff_font/devps</code>, скопировав или
          перенеся его сюда.</p><p>Заметьте, что если <code class="filename">ttf2pf.ps</code> назначает
          имя шрифта, используя один из найденных в файле шрифта TrueType, а
          вы хотите использовать другое имя, то вы должны отредактировать файл
	  <code class="filename">.afm</code> до запуска команды
          <code class="command">afmtodit</code>.  Это имя к тому же должно
          совпадать с тем, что используется в файле Fontmap, если вы
          собираетесь перенаправлять вывод <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=groff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">groff</span>(1)</span></a> утилите
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gs</span>(1)</span></a>.</p></li></ol></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="type1-fonts-groff.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="truetype-for-other-programs.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">7. Использование шрифтов в формате type 1 с программой Groff </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 9. Можно ли использовать шрифты в формате TrueType с другими
      программами?</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>