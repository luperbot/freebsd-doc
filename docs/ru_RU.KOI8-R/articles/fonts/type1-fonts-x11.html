<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>5. Использование шрифтов type 1 с системой X11</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Шрифты и FreeBSD" /><link rel="up" href="index.html" title="Шрифты и FreeBSD" /><link rel="prev" href="virtual-console.html" title="4. Настройка виртуальной консоли на режим работы 80x60" /><link rel="next" href="type1-fonts-ghostscript.html" title="6. Использование шрифтов type 1 с пакетом Ghostscript" /><link rel="copyright" href="trademarks.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5. Использование шрифтов type 1 с системой <span class="application">X11</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="virtual-console.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="type1-fonts-ghostscript.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="type1-fonts-x11"></a>5. Использование шрифтов type 1 с системой <span class="application">X11</span></h2></div></div></div><p><span class="application">X11</span> может использовать файлы шрифтов в формате
      <code class="filename">.pfa</code> или <code class="filename">.pfb</code>.  Шрифты для <span class="application">X11</span>
      располагаются в различных подкаталогах в
      <code class="filename">/usr/X11R6/lib/X11/fonts</code>.  На каждый файл со шрифтом
      имеется ссылка по его <span class="application">X11</span>-имени в файле <code class="filename">fonts.dir</code> в
      каждом таком каталоге.</p><p>Существует каталог по имени <code class="filename">Type1</code>.  Самым
      простым способом добавить новый шрифт заключается в помещении его в этот
      каталог.  Но лучше хранить все новые шрифты в отдельном каталоге и
      использовать символические ссылки для добавляемых шрифтов.  Это позволяет
      легко управлять отдельными добавляемыми шрифтами, не путая их с
      изначально поставляемыми.  Например:</p><div class="informalexample"><pre class="screen">
<em class="lineannotation"><span class="lineannotation">Создаем каталог для файлов шрифтов</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>mkdir -p /usr/local/share/fonts/type1</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cd /usr/local/share/fonts/type1</code></strong>

<em class="lineannotation"><span class="lineannotation">Помещаем сюда файлы .pfa, .pfb и .afm</span></em>
<em class="lineannotation"><span class="lineannotation">Кому-то может потребоваться хранить здесь также</span></em>
<em class="lineannotation"><span class="lineannotation">сопроводительные файлы и документацию к шрифтам</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>cp /cdrom/fonts/atm/showboat/showboat.pfb .</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cp /cdrom/fonts/atm/showboat/showboat.afm .</code></strong>

<em class="lineannotation"><span class="lineannotation">Обновление индексного файла со ссылками на файлы шрифтов</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>echo showboat - InfoMagic CICA, Dec 1994, /fonts/atm/showboat &gt;&gt;INDEX</code></strong></pre></div><p>Теперь, чтобы использовать новый шрифт с <span class="application">X11</span>, нужно дать доступ к
      файлу шрифтов и обновить файлы и именами шрифтов.  Имена шрифтов в <span class="application">X11</span>
      выглядят следующим образом:</p><div class="informalexample"><pre class="screen">
-bitstream-charter-medium-r-normal-xxx-0-0-0-0-p-0-iso8859-1
     |        |      |    |   |     |  | | | | | |    \    \
     |        |      |    |   |     \  \ \ \ \ \ \     +----+- набор символов
     |        |      |    |   \      \  \ \ \ \ \ +- средняя ширина
     |        |      |    |    \      \  \ \ \ \ +- spacing
     |        |      |    \	\      \  \ \ \ +- разрешение по вертикали
     |        |      |     \	 \	\  \ \ +- разрешение по горизонтали
     |        |      |      \	  \	 \  \ +- пунктов
     |        |      |       \     \	  \  +- пиксел
     |        |      |        \     \	   \
  foundry  family  weight   slant  width  additional style</pre></div><p>Для каждого нового файла шрифтов необходимо создать новое имя.  Если
      у вас есть какая-либо информация из сопроводительной документации к
      шрифту, то она может служить основой для создания имени.  Если информации
      нет, то можно получить некоторую информацию от использования программы
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=strings&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">strings</span>(1)</span></a> над файлом шрифта.  Например:</p><div class="informalexample"><pre class="screen">
<code class="prompt">%</code> <strong class="userinput"><code>strings showboat.pfb | more</code></strong>
%!FontType1-1.0: Showboat 001.001
%%CreationDate: 1/15/91 5:16:03 PM
%%VMusage: 1024 45747
% Generated by Fontographer 3.1
% Showboat
 1991 by David Rakowski.  Alle Rechte Vorbehalten.
FontDirectory/Showboat known{/Showboat findfont dup/UniqueID known{dup
/UniqueID get 4962377 eq exch/FontType get 1 eq and}{pop false}ifelse
{save true}{false}ifelse}{false}ifelse
12 dict begin
/FontInfo 9 dict dup begin
 /version (001.001) readonly def
 /FullName (Showboat) readonly def
 /FamilyName (Showboat) readonly def
 /Weight (Medium) readonly def
 /ItalicAngle 0 def
 /isFixedPitch false def
 /UnderlinePosition -106 def
 /UnderlineThickness 16 def
 /Notice (Showboat
 1991 by David Rakowski.  Alle Rechte Vorbehalten.) readonly def
end readonly def
/FontName /Showboat def
--stdin--</pre></div><p>Пользуясь этой информацией, можно составить возможное имя:</p><div class="informalexample"><pre class="screen">-type1-Showboat-medium-r-normal-decorative-0-0-0-0-p-0-iso8859-1</pre></div><p>Компонентами нашего имени являются:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Foundry</span></dt><dd><p>Давайте называть все новые шрифты
            <code class="literal">type1</code>.</p></dd><dt><span class="term">Family</span></dt><dd><p>Имя шрифта.</p></dd><dt><span class="term">Weight</span></dt><dd><p>Normal, bold, medium, semibold, и так далее.  Из результата
            работы команды <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=strings&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">strings</span>(1)</span></a> похоже, что этот шрифт имеет ширину
	    <span class="emphasis"><em>medium</em></span>.</p></dd><dt><span class="term">Slant</span></dt><dd><p><span class="emphasis"><em>r</em></span>oman, <span class="emphasis"><em>i</em></span>talic, <span class="emphasis"><em>o</em></span>blique, и так далее.  Так как
	    <span class="emphasis"><em>ItalicAngle</em></span> равен нулю, то будет
            использоваться <span class="emphasis"><em>roman</em></span>.</p></dd><dt><span class="term">Width</span></dt><dd><p>Normal, wide, condensed, extended, и так далее.  Пока это не
            будет проверено, предполагаем <span class="emphasis"><em>normal</em></span>.</p></dd><dt><span class="term">Дополнительный стиль</span></dt><dd><p>Обычно опускается, но он будет указывать, что в шрифте есть
            декоративные заглавные буквы.</p></dd><dt><span class="term">Spacing</span></dt><dd><p>proportional или monospaced.  Используется
	    <span class="emphasis"><em>proportional</em></span>, потому что
	    <span class="emphasis"><em>isFixedPitch</em></span> равен false.</p></dd></dl></div><p>Все эти имена произвольны, но нужно стараться следовать существующим
      соглашениям.  В программе для <span class="application">X11</span> на шрифт ссылаются по имени с
      применением шаблонов, так что в выбираемом имени это должно учитываться.
      Можно начать с простого использования

      </p><div class="informalexample"><pre class="screen">...-normal-r-normal-...-p-...
	</pre></div><p>

      в качестве имени, а затем использовать <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xfontsel&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xfontsel</span>(1)</span></a> для его проверки
      и изменения имени на основе того, как выглядит шрифт.</p><p>Итак, завершая наш пример:</p><div class="informalexample"><pre class="screen">
<em class="lineannotation"><span class="lineannotation">Делаем шрифт доступным для X11</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>cd /usr/X11R6/lib/X11/fonts/Type1</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>ln -s /usr/local/share/fonts/type1/showboat.pfb .</code></strong>

<em class="lineannotation"><span class="lineannotation">Редактируем файлы fonts.dir and fonts.scale, добавляя строку,
описывающую шрифт и увеличивая количество шрифтов в первой строке.</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>ex fonts.dir
:1p
25
:1c
26
.
:$a
showboat.pfb -type1-showboat-medium-r-normal-decorative-0-0-0-0-p-0-iso8859-1
.
:wq</code></strong>

<em class="lineannotation"><span class="lineannotation">fonts.scale идентичен
fonts.dir...</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>cp fonts.dir fonts.scale</code></strong>

<em class="lineannotation"><span class="lineannotation">Указываем X11, что произошли изменения</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>xset fp rehash</code></strong>

<em class="lineannotation"><span class="lineannotation">Проверяем новый шрифт</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>xfontsel -pattern -type1-*</code></strong></pre></div><p>Справочная информация: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xfontsel&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xfontsel</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xset&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xset</span>(1)</span></a>, <em class="citetitle">The
      X	Windows System in a Nutshell</em>, <a class="link" href="http://www.ora.com/" target="_top">O'Reilly &amp; Associates</a>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="virtual-console.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="type1-fonts-ghostscript.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">4. Настройка виртуальной консоли на режим работы 80x60 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 6. Использование шрифтов type 1 с пакетом Ghostscript</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>