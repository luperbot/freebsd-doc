<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>2.11. Решение проблем</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="install.html" title="Глава 2. Установка FreeBSD версий 8.X и более ранних" /><link rel="prev" href="install-post.html" title="2.10. После установки" /><link rel="next" href="install-advanced.html" title="2.12. Расширенное руководство по установке" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.11. Решение проблем</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="install-post.html">Пред.</a> </td><th width="60%" align="center">Глава 2. Установка FreeBSD версий 8.<em class="replaceable"><code>X</code></em> и более
    ранних</th><td width="20%" align="right"> <a accesskey="n" href="install-advanced.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-trouble"></a>2.11. Решение проблем</h2></div></div></div><a id="idp77011280" class="indexterm"></a><p>Следующий раздел описывает основные проблемы при установке, о
      которых обычно сообщают пользователи. Здесь также несколько вопросов
      и ответов от тех, кто хочет настроить двойную загрузку FreeBSD и
      <span class="trademark">MS-DOS</span>(R) или <span class="trademark">Windows</span>(R).</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77013840"></a>2.11.1. Что делать, если что-то идет не так</h3></div></div></div><p>По причине различных ограничений архитектуры PC, невозможно
	протестировать устройства достоверно на 100%, тем не менее,
	есть несколько вещей, которые вы можете сделать, если тестирование
	завершится неудачно.</p><p>Сверьтесь с <a class="link" href="http://www.FreeBSD.org/releases/index.html" target="_top">Информацией
	об оборудовании</a> для вашей версии FreeBSD, чтобы убедиться,
	что ваше оборудование поддерживается.</p><p>Если оборудование поддерживается, но все же происходят
	зависания или вы встретились с другими проблемами, потребуется
	собрать <a class="link" href="kernelconfig.html" title="Глава 9. Настройка ядра FreeBSD">собственное ядро</a>.
	Это позволит вам добавить поддержку аппаратных устройств,
	отсутствующих в ядре <code class="filename">GENERIC</code>.  Ядро на
	загрузочном диске настроено в
	предположении, что у большинства аппаратных устройств IRQ, адреса
	ввода-вывода и каналы DMA установлены производителем к значениям
	по умолчанию.  Если оборудование было перенастроено, вам
	скорее всего потребуется отредактировать конфигурацию ядра и
	перекомпилировать его, чтобы сообщить
	FreeBSD, где что искать.</p><p>Возможно также, что тестирование устройства, которого нет,
	приведет позже к ошибке тестирования существующего устройства.
	В этом случае тестирование конфликтующего драйвера (драйверов)
	должно быть запрещено.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Некоторые проблемы установки можно обойти или уменьшить,
	  обновив встроенное программное обеспечение различных
	  компонент оборудования, особенно материнской платы.
	  Встроенное программное обеспечение также называют
	  <acronym class="acronym">BIOS</acronym> и у большинства производителей
	  компьютеров или материнских плат есть Web-сайты, где можно найти
	  обновления и информацию об обновлениях.</p><p xmlns="http://www.w3.org/1999/xhtml">Большинство производителей настоятельно советуют не обновлять
	  <acronym class="acronym">BIOS</acronym> пока не возникнет серьезной необходимости,
	  например появление критически важных обновлений.
	  Процесс обновления <span class="emphasis"><em>может</em></span> пойти неверно,
	  что приведет к неустранимому повреждению микросхемы
	  <acronym class="acronym">BIOS</acronym>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77061456"></a>2.11.2. Использование файловых систем <span class="trademark">MS-DOS</span>(R) и <span class="trademark">Windows</span>(R)</h3></div></div></div><p>В настоящее время, FreeBSD не поддерживает файловые системы, сжатые
	с помощью программы <span class="application">Double SpaceTM</span>.
	Поэтому файловая система должна быть разжата, чтобы
	FreeBSD смогла получить доступ к данным.  Это может быть сделано с
	помощью приложения <span class="application">Compression Agent</span>,
	находящегося в меню <span class="guimenuitem">Пуск</span>&gt;
	<span class="guimenuitem">Программы</span> &gt; <span class="guimenuitem">Системные</span>.</p><p>FreeBSD поддерживает файловые системы <span class="trademark">MS-DOS</span>(R) (иногда называемые
	файловыми системами FAT).  Команда  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a> включает
	такие файловые системы в существующую иерархию, тем самым обеспечивая
	доступ к их содержимому.  Как правило, утилита <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a>
	непосредственно не вызывается; вместо этого она выполняется системой
	при наличии соответствующей записи в <code class="filename">/etc/fstab</code>
	или же вызывается утилитой <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>, запущенной с соответствующими
	параметрами.</p><p>Ниже приведен пример записи в <code class="filename">/etc/fstab</code>
	для файловой системы <span class="trademark">MS-DOS</span>(R):</p><pre class="programlisting">/dev/ad0sN  /dos  msdosfs rw  0  0</pre><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Каталог <code class="filename">/dos</code> должен быть создан заранее.
	  Формат файла <code class="filename">/etc/fstab</code> подробно описан в
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a>.</p></div><p>Также приведем пример монтирования файловой системы <span class="trademark">MS-DOS</span>(R)
	посредством <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t msdosfs /dev/ad0s1 /mnt</code></strong></pre><p>В этом примере файловая система <span class="trademark">MS-DOS</span>(R) расположена на первом
	разделе первого жесткого диска.  Ваша конфигурация может быть другой,
	проверьте вывод команд <code class="command">dmesg</code> и
	<code class="command">mount</code>.  Они должны предоставить достаточно
	информации для определения названий разделов.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Способ нумерации дисковых слайсов (то есть,
	  <span class="quote"><<<span class="quote">разделов</span>>></span> в терминах <span class="trademark">MS-DOS</span>(R)) может отличаться от
	  способа, принятого в других операционных системах.  В частности,
	  расширенным разделам <span class="trademark">MS-DOS</span>(R) присваиваются номера, следующие за
	  первичными разделами <span class="trademark">MS-DOS</span>(R).  Утилита <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> поможет
	  определить, какие слайсы принадлежат FreeBSD, а какие - другим
	  операционным системам.</p></div><p>Разделы NTFS также можно смонтировать похожим способом, используя
	команду <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_ntfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_ntfs</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77114832"></a>2.11.3. Решение проблем: вопросы и ответы</h3></div></div></div><div class="qandaset"><a id="idp77115472"></a><dl><dt>2.11.3.1. <a href="install-trouble.html#idp77115728">Моя система зависает на этапе определения оборудования во
	      время загрузки, или система ведет себя странно во время
	      установки, или же не определяется привод гибкого диска.</a></dt><dt>2.11.3.2. <a href="install-trouble.html#idp77120336">Выполняется первая загрузка после установки FreeBSD, ядро
	      загружается и определяет аппаратное обеспечение, но загрузка
	      останавливается с сообщением типа:</a></dt><dt>2.11.3.3. <a href="install-trouble.html#idp77135824">Я перехожу к загрузке с жесткого диска впервые после
	      установки FreeBSD, но приглашение Boot Manager всякий раз выводит
	      только F? в меню загрузчика, и на этом
	      загрузка прерывается.</a></dt><dt>2.11.3.4. <a href="install-trouble.html#idp77154128">Система определяет мою сетевую карту ed(4), но я
	      постоянно получаю сообщения device timeout.</a></dt><dt>2.11.3.5. <a href="install-trouble.html#idp77160912">Когда sysinstall запущен
	      в терминале X11, то желтый шрифт на светло сером фоне практически
	      не различим.  Есть ли способ обеспечить лучший контраст для этого приложения?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp77115728"></a><a id="idp77116112"></a><p><strong>2.11.3.1.</strong></p></td><td align="left" valign="top"><p>Моя система зависает на этапе определения оборудования во
	      время загрузки, или система ведет себя странно во время
	      установки, или же не определяется привод гибкого диска.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>На архитектурах i386, amd64 и ia64 при конфигурировании
	      оборудования, обнаруженного во время загрузки, FreeBSD повсеместно
	      использует систему ACPI.  К сожалению, до сих пор находятся
	      неполадки как в драйвере ACPI, так и в материнских платах,
	      так и в их BIOS.  Использование ACPI можно отключить установив
	      переменную <code class="literal">hint.acpi.0.disabled</code> на третьем
	      этапе загрузки:</p><pre class="screen"><strong class="userinput"><code>set hint.acpi.0.disabled="1"</code></strong></pre><p>Эта настройка сбрасывается каждый раз при перезагрузке
	      системы, поэтому необходимо добавить строку
	      <code class="literal">hint.acpi.0.disabled="1"</code> в файл
	      <code class="filename">/boot/loader.conf</code>.  Информация о
	      загрузчике приведена в <a class="xref" href="boot.html#boot-synopsis" title="13.1. Описание">Раздел 13.1, <<Описание>></a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77120336"></a><a id="idp77120592"></a><p><strong>2.11.3.2.</strong></p></td><td align="left" valign="top"><p>Выполняется первая загрузка после установки FreeBSD, ядро
	      загружается и определяет аппаратное обеспечение, но загрузка
	      останавливается с сообщением типа:</p><pre class="screen">changing root device to ad1s1a panic: cannot mount root</pre><p>Что это значит?  Что можно сделать?</p><p>И что это за строка вида 
	      <code class="literal">bios_drive:interface(unit,partition)kernel_name</code>,
	      отображаемая в приглашении загрузчика?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Это древняя проблема, проявляющаяся в случаях, когда
	      загрузочный диск не является первым диском в системе.  BIOS
	      использует свою схему нумерации дисков по сравнению с FreeBSD, и
	      сложно правильно решить, как соответствуют эти нумерации.</p><p>В случае, если загрузочный диск не является первым
	      диском в системе, то FreeBSD потребуется некоторая помощь.
	      Есть два возможных случая, и в обоих вам придется сообщить
	      FreeBSD где находится корневая файловая система.  Это делается
	      указанием вручную следующих данных: номера диска (согласно
	      нумерации BIOS), типа диска и номера диска (согласно определениям
	      FreeBSD).</p><p>Первый случай: у вас имеется два IDE диска, каждый из них
	      сконфигурирован как мастер на соответствующей шине IDE, и вы
	      намереваетесь загрузить FreeBSD с второго диска.  BIOS определяет
	      эти диски как <code class="literal">disk 0</code> и
	      <code class="literal">disk 1</code>, в то время как FreeBSD определяет
	      их как <code class="filename">ad0</code> и
	      <code class="filename">ad2</code>.</p><p>FreeBSD находится на <code class="literal">disk 1</code> (BIOS-нумерация),
	      его тип - <code class="literal">ad</code> и номер - 2 (по
	      данным FreeBSD), следовательно, необходимо указать:</p><pre class="screen"><strong class="userinput"><code>1:ad(2,a)kernel</code></strong></pre><p>Заметьте, если второй диск настроен как подчиненный
	      (slave) на первой шине IDE, то указание вышеприведённого
	      необязательно (а по существу, еще и неверно).</p><p>Второй случай подразумевает загрузку с диска SCSI при
	      существующих в системе дисках IDE.  В этом случае, согласно
	      определениям FreeBSD номер диска меньше, чем номер по представлениям
	      BIOS.  Если у вас есть два диска IDE и диск SCSI, то, согласно
	      BIOS, номер SCSI диска - 2, а согласно FreeBSD, тип -
	      <code class="literal">da</code> и номер - 0, следовательно, вам
	      необходимо указать следующее:</p><pre class="screen"><strong class="userinput"><code>2:da(0,a)kernel</code></strong></pre><p>чтобы сообщить FreeBSD, что вы намереваетесь загрузить
	      систему с диска 2 по нумерации BIOS, который является первым
	      диском в системе.  Если бы у вас был один диск IDE, вам бы
	      пришлось использовать <code class="literal">1:</code> (по нумерации
	      BIOS).</p><p>Определив верные параметры, внесите их в том виде, как
	      вы их набирали, в файл <code class="filename">/boot.config</code>.
	      Если не указывается иначе, то FreeBSD будет использовать содержимое
	      этого файла как значение по умолчанию в приглашении
	      <code class="literal">boot:</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77135824"></a><a id="idp77136080"></a><p><strong>2.11.3.3.</strong></p></td><td align="left" valign="top"><p>Я перехожу к загрузке с жесткого диска впервые после
	      установки FreeBSD, но приглашение Boot Manager всякий раз выводит
	      только <code class="literal">F?</code> в меню загрузчика, и на этом
	      загрузка прерывается.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>При установке FreeBSD в редакторе разделов была указана неверная
	      геометрия жесткого диска.  Вернитесь в редактор разделов и
	      укажите действительную геометрию вашего жесткого диска.  Вам
	      придется переустановить заново FreeBSD.</p><p>Если вы затрудняетесь определить верную геометрию для
	      вашей машины, то сделайте следующее: установите небольшой раздел
	      <span class="trademark">MS-DOS</span>(R) вначале диска, а FreeBSD разместите после него.
	      Установочная программа обнаружит раздел <span class="trademark">MS-DOS</span>(R) и попробует
	      определить значение геометрии по этому разделу, что, как правило,
	      завершается успехом.</p><p>Следующий способ не рекомендуется, он оставлен здесь
	      для справки:</p><div class="blockquote"><blockquote class="blockquote"><p>Если вы устанавливаете выделенный сервер FreeBSD или рабочую
		станцию, в которых вопросы совместного существования <span class="trademark">MS-DOS</span>(R),
		Linux или иной операционной системы в будущем не возникнут,
		то у вас есть возможность использовать весь диск (опция
		<span class="guimenuitem">A</span> в редакторе разделов), после
		выбора которой FreeBSD займет весь диск от самого первого до
		самого последнего сектора.  При этом, все вопросы геометрии
		диска станут неактуальными.</p></blockquote></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77154128"></a><a id="idp77154384"></a><p><strong>2.11.3.4.</strong></p></td><td align="left" valign="top"><p>Система определяет мою сетевую карту <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ed</span>(4)</span></a>, но я
	      постоянно получаю сообщения device timeout.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Возможно ваша сетевая карта находится не на том IRQ, которое
	      указано в файле <code class="filename">/boot/device.hints</code>.  Драйвер
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ed</span>(4)</span></a> по умолчанию не использует <span class="quote"><<<span class="quote">программную</span>>></span>
	      конфигурацию (значения, вводимые утилитой EZSETUP в <span class="trademark">MS-DOS</span>(R)), но
	      ситуация изменится, если вы укажете <code class="literal">-1</code> в
	      значении хинт-переменной для этого интерфейса.</p><p>Либо осуществите ручное конфигурирование устройства
	      переключением джамперов на карте (также может потребоваться
	      изменение конфигурации ядра), либо же смените значение IRQ
	      на <code class="literal">-1</code>, установив переменную
	      <code class="literal">hint.ed.0.irq="-1"</code>.  Это укажет ядру
	      использовать программное конфигурирование.</p><p>Также вероятно, что ваша карта находится на IRQ номер 9,
	      которое используется совместно с IRQ номер 2, и которое часто
	      является причиной проблем (особенно, если ваш VGA адаптер занимает
	      IRQ номер 2!).  Постарайтесь избежать использования IRQ номер
	      2 или 9 вообще.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77160912"></a><a id="idp77161168"></a><p><strong>2.11.3.5.</strong></p></td><td align="left" valign="top"><p>Когда <span class="application">sysinstall</span> запущен
	      в терминале X11, то желтый шрифт на светло сером фоне практически
	      не различим.  Есть ли способ обеспечить лучший контраст<a id="idp77162064" class="indexterm"></a> для этого приложения?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Если вы уже установили X11, а цвета, выбираемые по умолчанию
	      утилитой <span class="application">sysinstall</span>, делают текст
	      неразборчивым в <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xterm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xterm</span>(1)</span></a> или <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rxvt&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rxvt</span>(1)</span></a>, то добавьте
	      следующую строку <code class="literal">XTerm*color7: #c0c0c0</code>
	      в ваш <code class="filename">~/.Xdefaults</code> и вы получите более
	      тёмный фоновый серый цвет.</p></td></tr></tbody></table></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="install-post.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="install.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="install-advanced.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">2.10. После установки </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 2.12. Расширенное руководство по установке</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>