<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>25.9. Протокол передачи файлов (FTP)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="network-servers.html" title="Глава 25. Сетевые серверы" /><link rel="prev" href="network-samba.html" title="25.8. Файл сервер и печать для Microsoft(R) Windows(R) клиентов (Samba)" /><link rel="next" href="network-ntp.html" title="25.10. Синхронизация часов через NTP" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">25.9. Протокол передачи файлов (FTP)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-samba.html">Пред.</a> </td><th width="60%" align="center">Глава 25. Сетевые серверы</th><td width="20%" align="right"> <a accesskey="n" href="network-ntp.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ftp"></a>25.9. Протокол передачи файлов (FTP)</h2></div><div><span class="authorgroup">Предоставил <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp98639696" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98640208"></a>25.9.1. Обзор</h3></div></div></div><p>Протокол передачи файлов (File Transfer Protocol, FTP) дает
	пользователям простой путь передачи файлов на и с <acronym class="acronym">FTP</acronym> сервера. В FreeBSD
	серверная программа <acronym class="acronym">FTP</acronym>,
	<span class="application">ftpd</span>, включена в базовую систему.
	Это упрощает настройку и администрирование <acronym class="acronym">FTP</acronym> сервера в
	FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98643280"></a>25.9.2. Настройка</h3></div></div></div><p>Наиболее важный шаг заключается в определении того,
	каким учетным записям будет позволено получать доступ
	к FTP серверу.  В обычной системе FreeBSD есть множество
	системных учетных записей, используемых различными даемонами,
	но пользователям должно быть запрещен вход с использованием
	этих учетных записей.  В файле <code class="filename">/etc/ftpusers</code>
	находится список пользователей, которым запрещен доступ по
	FTP.  По умолчанию он включает упомянутые системные учетные
	записи, но в него можно добавить и определенных пользователей,
	которым будет запрещен доступ по FTP.</p><p>Вам может понадобиться ограничить доступ определенных
	пользователей без полного запрета использования FTP.
	Это можно сделать через файл <code class="filename">/etc/ftpchroot</code>.
	В нем находится список пользователей и групп, к которым
	применяется ограничение доступа.  На странице справочника
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpchroot&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ftpchroot</span>(5)</span></a> дана подробная информация, и она не будет
	дублироваться здесь.</p><a id="idp98646352" class="indexterm"></a><p>Если вы захотите разрешить анонимный FTP доступ на
	сервер, в системе FreeBSD необходимо создать пользователя
	<code class="systemitem">ftp</code>.  Этот пользователь сможет
	входить на FTP сервер с именем пользователя
	<code class="systemitem">ftp</code> или <code class="systemitem">anonymous</code>,
	с любым паролем (существует соглашение об использовании
	почтового адреса пользователя в качестве пароля).
	FTP сервер выполнит <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> при входе пользователя
	anonymous для ограничения доступа только домашним каталогом
	пользователя <code class="systemitem">ftp</code>.</p><p>Существуют два текстовых файла, определяющих сообщение,
	отправляемое FTP клиентам.  Содержимое файла
	<code class="filename">/etc/ftpwelcome</code> будет выведено пользователям
	перед приглашением на вход.  После успешного входа
	будет выведено содержимое файла <code class="filename">/etc/ftpmotd</code>.
	Обратите внимание, что путь к этому файлу задается относительно
	домашнего каталога пользователя, так что анонимным пользователям
	будет отправляться <code class="filename">~ftp/etc/ftpmotd</code>.</p><p>Как только FTP сервер был правильно настроен, он должен
	быть включен в <code class="filename">/etc/inetd.conf</code>.  Все, что
	необходимо, это удалить символ комментария
	<span class="quote"><<<span class="quote">#</span>>></span> из начала существующей строки
	<span class="application">ftpd</span>:</p><pre class="programlisting">ftp	stream	tcp	nowait	root	/usr/libexec/ftpd	ftpd -l</pre><p>Как описано в <a class="xref" href="network-inetd.html#network-inetd-reread" title="Пример 25.1. Перезагрузка конфигурационного файла inetd">Пример 25.1, <<Перезагрузка конфигурационного файла
	  <span class="application">inetd</span>>></a>,
	<span class="application">inetd</span> должен перечитать конфигурацию
	после того, как этот файл настройки был изменен.  Пожалуйста
	обратитесь к <a class="xref" href="network-inetd.html#network-inetd-settings" title="25.2.2. Настройки">Раздел 25.2.2, <<Настройки>></a> за деталями
	по запуску <span class="application">inetd</span> на вашей системе.</p><p>В качестве альтернативы, демон <span class="application">ftpd</span>
	может быть запущен как самостоятельный сервер.  В этом случае
	достаточно установить соответствующую переменную в файле
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">ftpd_enable="YES"</pre><p>Демон будет запущен автоматически при следующей загрузке системы.
	Также демон можно запустить вручную, для чего выполните следующую
	команду как пользователь <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/ftpd start</code></strong></pre><p>Теперь вы можете войти на FTP сервер, введя:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ftp localhost</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98665424"></a>25.9.3. Поддержка</h3></div></div></div><a id="idp98666064" class="indexterm"></a><a id="idp98666576" class="indexterm"></a><p>Для протоколирования даемон <span class="application">ftpd</span>
	использует сообщения <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a>.  По умолчанию, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a>
	поместит сообщения, относящиеся к FTP, в файл
	<code class="filename">/var/log/xferlog</code>.  Местоположение
	лог файла FTP может быть изменено путем изменения следующей
	строки в файле <code class="filename">/etc/syslog.conf</code>:</p><pre class="programlisting">ftp.info      /var/log/xferlog</pre><a id="idp98670928" class="indexterm"></a><p>Учитывайте потенциальные проблемы, возникающие с
	анонимным FTP сервером.  В частности, вы должны дважды
	подумать, прежде чем позволить анонимным пользователям
	загружать файлы на сервер.  Вы можете обнаружить, что
	FTP сайт стал форумом, на котором происходит обмен
	нелицензионным коммерческим программным обеспечением
	или чем-то еще хуже.  Если вам необходимо разрешить
	анонимную выгрузку файлов на FTP, права должны быть настроены
	таким образом, чтобы эти файлы не могли прочитать другие
	анонимные пользователи до их рассмотрения администратором.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-samba.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="network-ntp.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">25.8. Файл сервер и печать для <span class="trademark">Microsoft</span>(R) <span class="trademark">Windows</span>(R) клиентов
      (Samba) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 25.10. Синхронизация часов через NTP</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>