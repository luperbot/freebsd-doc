<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>3.7. Выделение дискового пространства</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="bsdinstall.html" title="Глава 3. Установка FreeBSD версий 9.X и более поздних" /><link rel="prev" href="bsdinstall-netinstall.html" title="3.6. Установка по сети" /><link rel="next" href="bsdinstall-final-warning.html" title="3.8. Завершение установки" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.7. Выделение дискового пространства</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="bsdinstall-netinstall.html">Пред.</a> </td><th width="60%" align="center">Глава 3. Установка FreeBSD версий 9.<em class="replaceable"><code>X</code></em> и более
    поздних</th><td width="20%" align="right"> <a accesskey="n" href="bsdinstall-final-warning.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-partitioning"></a>3.7. Выделение дискового пространства</h2></div></div></div><p>Есть три способа осуществить разбиение дискового пространства для
      FreeBSD.  <span class="emphasis"><em>Шаблонное</em></span> (<span class="emphasis"><em>guided</em></span>)
      разбиение автоматически настраивает разделы диска,
      <span class="emphasis"><em>ручное</em></span> (<span class="emphasis"><em>manual</em></span>) разбиение
      позволяет опытным пользователям создавать разделы согласно своим
      требованиям.  И наконец, есть возможность вызвать командный
      интерпретатор, в котором можно будет непосредственно запускать утилиты
      наподобие <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gpart&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gpart</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> и <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>.</p><div class="figure"><a id="bsdinstall-part-guided-manual"></a><div class="figure-title">Рисунок 3.10. Выбор способа разбиения: шаблонное (guided) или ручное
	  (manual)</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-guided-manual.png" alt="Выбор способа разбиения: шаблонное (guided) или ручное (manual)" /></div></div></div><br class="figure-break" /><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-part-guided"></a>3.7.1. Шаблонное (guided) разбиение</h3></div></div></div><p>Если в системе есть несколько дисков, то выберите один, на который
	будет устанавливаться FreeBSD.</p><div class="figure"><a id="bsdinstall-part-guided-disk"></a><div class="figure-title">Рисунок 3.11. Выбор из множества дисков</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-guided-disk.png" alt="Выбор из множества дисков" /></div></div></div><br class="figure-break" /><p>Для FreeBSD может быть выделен весь диск или только его часть.
	Если выбирается <span class="guibutton">[ Entire Disk ]</span>,
	то создается стандартное разбиение, занимающее весь диск.  Выбрав
	<span class="guibutton">[ Partition ]</span>, вы получите создание
	разделов в неиспользуемой области диска.</p><div class="figure"><a id="bsdinstall-part-entire-part"></a><div class="figure-title">Рисунок 3.12. Выбор всего диска или раздела</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-entire-part.png" alt="Выбор всего диска или раздела" /></div></div></div><br class="figure-break" /><p>По завершении разбиения дискового пространства внимательно
	просмотрите результат.  Если была допущена ошибка, то вам
	предоставляется возможность либо вернуть конфигурацию к исходному
	состоянию нажав <span class="guibutton">[ Revert ]</span>,
	либо выполнить автоматическое переразбиение выбрав
	<span class="guibutton">[ Auto ]</span>.  Также разделы могут быть
	созданы, изменены или удалены вручную.  Если результат разбиения
	корректен, выберите <span class="guibutton">[ Finish ]</span> для
	продолжения установки.</p><div class="figure"><a id="bsdinstall-part-review"></a><div class="figure-title">Рисунок 3.13. Просмотр созданных разделов</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-review.png" alt="Просмотр созданных разделов" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-part-manual"></a>3.7.2. Ручное (manual) разбиение</h3></div></div></div><p>Ручное разбиение начинается с редактора разделов.</p><div class="figure"><a id="bsdinstall-part-manual-create"></a><div class="figure-title">Рисунок 3.14. Ручное создание разделов</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-manual-create.png" alt="Ручное создание разделов" /></div></div></div><br class="figure-break" /><p>Перемещение подсвечивания на имя устройства (в этом примере
	- <code class="filename">ada0</code>) и выбор
	<span class="guibutton">[ Create ]</span> приведет вас к меню
	с перечнем <span class="emphasis"><em>схем разбиения</em></span>.</p><div class="figure"><a id="bsdinstall-part-manual-partscheme"></a><div class="figure-title">Рисунок 3.15. Выбор схемы разбиения</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-manual-partscheme.png" alt="Выбор схемы разбиения" /></div></div></div><br class="figure-break" /><p>Как правило, схема <acronym class="acronym">GPT</acronym> является наиболее
	подходящей для PC-совместимых компьютеров.  Для более старых
	операционных систем, которые несовместимы с <acronym class="acronym">GPT</acronym>,
	может потребоваться разбиение <acronym class="acronym">MBR</acronym>.  Остальные схемы
	разбиения в общем используются для нераспространенных или старых
	компьютерных систем.</p><div class="table"><a id="idp77877584"></a><div class="table-title">Таблица 3.1. Схемы разбиения</div><div class="table-contents"><table summary="Схемы разбиения" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th align="left">Аббревиатура</th><th align="left">Описание</th></tr></thead><tbody><tr><td align="left">APM</td><td align="left"><a class="link" href="http://support.apple.com/kb/TA21692" target="_top">Apple
	      Partition Map</a>, используемая на <span class="trademark">PowerPC</span>(R)
	      <span class="trademark">Macintosh</span>(R).</td></tr><tr><td align="left">BSD</td><td align="left">Метки BSD без MBR, иногда называемые <span class="quote"><<<span class="quote">dangerously
	      dedicated mode</span>>></span>.  За подробностями обратитесь к
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>.</td></tr><tr><td align="left">GPT</td><td align="left"><a class="link" href="http://en.wikipedia.org/wiki/GUID_Partition_Table" target="_top">Таблица
	      разделов GUID.</a></td></tr><tr><td align="left">MBR</td><td align="left"><a class="link" href="http://en.wikipedia.org/wiki/Master_boot_record" target="_top">Master
	      Boot Record.</a></td></tr><tr><td align="left">PC98</td><td align="left"><a class="link" href="http://en.wikipedia.org/wiki/Pc9801" target="_top">Разновидность MBR,
	      используемая компьютерами NEC PC-98.</a></td></tr><tr><td align="left">VTOC8</td><td align="left">Volume Table Of Contents, используемая компьютерами
	      Sun SPARC64 и UltraSPARC.</td></tr></tbody></table></div></div><br class="table-break" /><p>После того, как схема разбиения определена, повторный выбор
	<span class="guibutton">[ Create ]</span> приводит к созданию
	новых разделов диска.</p><div class="figure"><a id="bsdinstall-part-manual-addpart"></a><div class="figure-title">Рисунок 3.16. Создание нового раздела</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-manual-addpart.png" alt="Создание нового раздела" /></div></div></div><br class="figure-break" /><p>Стандартная установка FreeBSD со схемой <acronym class="acronym">GPT</acronym>
	создаст как минимум три раздела:</p><div class="itemizedlist"><div class="itemizedlist-title">Стандартные <acronym class="acronym">GPT</acronym> разделы FreeBSD</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">freebsd-boot</code> - загрузочный код FreeBSD.</p></li><li class="listitem"><p><code class="literal">freebsd-ufs</code> - файловая система UFS
	    FreeBSD.</p></li><li class="listitem"><p><code class="literal">freebsd-swap</code> - FreeBSD область подкачки.</p></li></ul></div><p>Также необходимо упомянуть, что для разделов, которые будут
	содержать файловую систему ZFS FreeBSD следует задействовать тип раздела
	<code class="literal">freebsd-zfs</code>.  Обратитесь к <a class="xref" href="filesystems-zfs.html" title="19.2. Файловая система ZFS">Раздел 19.2, <<Файловая система ZFS>></a>.  Сведения об имеющихся в наличии типах
	разделов <acronym class="acronym">GPT</acronym> содержатся в <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gpart&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gpart</span>(8)</span></a>.</p><p>Разумеется, возможно создание большего количества разделов с
	файловыми системами, и некоторые пользователи предпочитают выделять
	отдельные разделы для таких файловых систем, как <code class="filename">/</code>,
	<code class="filename">/var</code>, <code class="filename">/tmp</code>,
	и <code class="filename">/usr</code>.  Иллюстрация подобного разбиения приведена
	в <a class="xref" href="bsdinstall-partitioning.html#bsdinstall-part-manual-splitfs" title="Пример 3.3. Создание традиционного разбиения под файловые системы.">Пример 3.3, <<Создание традиционного разбиения под файловые системы.>></a>.</p><p>При указании размеров допускается использование общепринятых
	аббревиатур, таких как <span class="emphasis"><em>K</em></span> для килобайт,
	<span class="emphasis"><em>M</em></span> для мегабайт, или <span class="emphasis"><em>G</em></span>
	для гигабайт.</p><div xmlns="" class="tip"><h3 class="admontitle">Подсказка: </h3><p xmlns="http://www.w3.org/1999/xhtml">Должное выравнивание секторов обеспечивает наилучшую
	  производительность, а создание разделов с размерами, кратными
	  4 Кбайт, помогает обеспечить правильное выравнивание как на
	  дисках с размером сектора 512 байт, так и на устройствах с
	  размером сектора 4 Кбайт.  В общем, задание размеров, кратных
	  1 Мбайт или 1 Гбайт - это наиболее простой способ
	  выполнить выравнивание начал разделов на позицию, кратную
	  4 Кбайт.  Исключение: на данный момент размер раздела
	  <span class="emphasis"><em>freebsd-boot</em></span> не должен превышать 512 Кбайт
	  из-за ограничений загрузочного кода.</p></div><p>В случае, если раздел будет содержать файловую систему, ей
	потребуется точка монтирования.  Если планируется создать единственный
	раздел UFS, то точка монтирования должна быть
	<code class="filename">/</code>.</p><p>Также будет запрошена <span class="emphasis"><em>метка</em></span>.  Метка -
	это имя, присвоенное разделу.  Имя устройства или его номер может
	измениться если устройство будет подключено к другому контроллеру или
	порту, а метка раздела останется неизменной.  Ссылки на метки
	вместо имён устройств и номеров разделов в файлах типа
	<code class="filename">/etc/fstab</code> делают систему более толерантной
	к замене оборудования.  Метки GPT появляются после подключения диска
	в каталоге <code class="filename">/dev/gpt/</code>.  У других схем разбиения
	есть свои особенности поддержки меток, и их метки располагаются в
	других подкаталогах каталога <code class="filename">/dev/</code>.</p><div xmlns="" class="tip"><h3 class="admontitle">Подсказка: </h3><p xmlns="http://www.w3.org/1999/xhtml">Во избежание конфликтов имен меток используйте уникальные имена
	  для каждой файловой системы.  Несколько букв, взятых от имени
	  компьютера, его назначения или размещения может быть добавлено к
	  метке.  Например, корневому разделу UFS для компьютера в лаборатории
	  можно присвоить метку <code class="literal">labroot</code> или
	  <code class="literal">rootfs-lab</code>.</p></div><div class="example"><a id="bsdinstall-part-manual-splitfs"></a><div class="example-title">Пример 3.3. Создание традиционного разбиения под файловые системы.</div><div class="example-contents"><p>Для традиционного разбиения, в котором каталоги
	  <code class="filename">/</code>, <code class="filename">/var</code>,
	  <code class="filename">/tmp</code> и <code class="filename">/usr</code> представляют
	  собой отдельные файловые системы на их собственных разделах, создайте
	  схему разбиения GPT, потом создайте разделы, как это указано ниже.
	  Показанные размеры разделов являются типичными для жесткого диска
	  размером 20Гб.  Если диск большего размера, то будет уместным отвести
	  больше места для раздела подкачки или для раздела с файловой системой
	  <code class="filename">/var</code>.  Задействованные в этом примере метки
	  имеют префикс <code class="literal">ex</code>, от слова
	  <span class="quote"><<<span class="quote">example</span>>></span>, вам же
	  рекомендуется использовать другие уникальные имена меток.</p><p>По умолчанию, загрузчик <code class="filename">gptboot</code> FreeBSD
	  ожидает, что первый найденный раздел UFS будет корневым разделом
	  (<code class="filename">/</code>).</p><div class="informaltable"><table border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Тип раздела</th><th>Размер</th><th>Точка монтирования</th><th>Метка</th></tr></thead><tbody><tr><td><code class="literal">freebsd-boot</code></td><td><code class="literal">512K</code></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td><code class="literal">2G</code></td><td><code class="filename">/</code></td><td><code class="literal">exrootfs</code></td></tr><tr><td><code class="literal">freebsd-swap</code></td><td><code class="literal">4G</code></td><td> </td><td><code class="literal">exswap</code></td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td><code class="literal">2G</code></td><td><code class="filename">/var</code></td><td><code class="literal">exvarfs</code></td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td><code class="literal">1G</code></td><td><code class="filename">/tmp</code></td><td><code class="literal">extmpfs</code></td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td>соглашайтесь со значением по умолчанию (оставшаяся
		  часть объема диска)</td><td><code class="filename">/usr</code></td><td><code class="literal">exusrfs</code></td></tr></tbody></table></div></div></div><br class="example-break" /><p>Для продолжения установки по завершении создания необходимых
	разделов выберите <span class="guibutton">[ Finish ]</span>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="bsdinstall-netinstall.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="bsdinstall.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="bsdinstall-final-warning.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">3.6. Установка по сети </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 3.8. Завершение установки</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>