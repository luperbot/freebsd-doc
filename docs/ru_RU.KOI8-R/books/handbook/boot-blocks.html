<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>13.3. Менеджер загрузки и этапы загрузки</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="boot.html" title="Глава 13. Процесс загрузки FreeBSD" /><link rel="prev" href="boot-introduction.html" title="13.2. Проблема загрузки" /><link rel="next" href="boot-kernel.html" title="13.4. Взаимодействие с ядром во время загрузки" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">13.3. Менеджер загрузки и этапы загрузки</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="boot-introduction.html">Пред.</a> </td><th width="60%" align="center">Глава 13. Процесс загрузки FreeBSD</th><td width="20%" align="right"> <a accesskey="n" href="boot-kernel.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-blocks"></a>13.3. Менеджер загрузки и этапы загрузки</h2></div></div></div><a id="idp87579728" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-boot0"></a>13.3.1. Менеджер загрузки</h3></div></div></div><a id="idp87581008" class="indexterm"></a><p>Код MBR или менеджера загрузки время от времени называют
	<span class="emphasis"><em>нулевой стадией</em></span> процесса загрузки.  В этом
	разделе мы обсудим два из упомянутых ранее менеджеров загрузки:
	<span class="application">boot0</span> и
	<span class="application">LILO</span>.</p><p>MBR для FreeBSD находится в <code class="filename">/boot/boot0</code>.  Это
	<span class="emphasis"><em>копия</em></span> MBR, так как настоящая MBR должна
	располагаться в специальном месте диска, вне области FreeBSD.</p><p><code class="filename">boot0</code> очень прост, так как программа
	в <abbr class="abbrev">MBR</abbr> может иметь размер, не превышающий 512
	байт.  Если вы установили MBR FreeBSD и несколько операционных
	систем на ваш жесткий диск, то во время загрузки вы увидите нечто
	похожее на следующее:</p><p><span class="formalpara-title">Менеджер загрузки <span class="application">boot0</span>: </span>MBR, устанавливаемый программой установки FreeBSD или утилитой
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot0cfg</span>(8)</span></a>, основан на <code class="filename">/boot/boot0</code>.
	  (<code class="filename">boot0</code> очень прост, так как программа
	  в <abbr class="abbrev">MBR</abbr> может иметь размер, не превышающий 446
	  байт, так как часть первого сектора диска занята таблицей слайсов
	  и сигнатурой <code class="literal">0x55AA</code>).
	  Если вы установили <span class="application">boot0</span> и несколько операционных
	  систем на ваш жесткий диск, то во время загрузки вы увидите нечто
	  похожее на следующее:</p><div class="example"><a id="boot-boot0-example"></a><div class="example-title">Пример 13.1. Образец экрана <code class="filename">boot0</code></div><div class="example-contents"><pre class="screen">F1 DOS
F2 FreeBSD
F3 Linux
F4 ??
F5 Drive 1

Default: F2</pre></div></div><br class="example-break" /><p>Известно, что другие операционные системы, в частности,
	<span class="trademark">Windows</span>(R) 95, записывают поверх существующей MBR свою собственную.
	Если так случилось в вашем случае, или же вы хотите заменить
	существующую MBR на MBR от FreeBSD, то воспользуйтесь следующей
	командой:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fdisk -B -b /boot/boot0 <em class="replaceable"><code>device</code></em></code></strong></pre><p>Здесь <em class="replaceable"><code>device</code></em> является устройством, с
	которого вы загружаетесь, таким, как <code class="filename">ad0</code> в
	случае первого диска IDE, <code class="filename">ad2</code> в случае первого
	диска IDE на втором контроллере IDE, <code class="filename">da0</code> для
	первого диска SCSI и так далее.  Если вы используете MBR
	нестандартного вида, воспользуйтесь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot0cfg</span>(8)</span></a>.</p><p><span class="formalpara-title">Менеджер загрузки LILO: </span>Для того, чтобы этот менеджер загрузки мог загружать FreeBSD,
	  загрузите Linux и добавьте к существующему файлу конфигурации
	  <code class="filename">/etc/lilo.conf</code> такие строки:</p><pre class="programlisting">other=/dev/hdXY
table=/dev/hdb
loader=/boot/chain.b
label=FreeBSD</pre><p>Укажите диск с основным разделом FreeBSD в терминах Linux,
	заменив <em class="replaceable"><code>X</code></em> буквой диска, используемой	в
	Linux, а <em class="replaceable"><code>Y</code></em> - номером основного
	раздела.  Если вы используете диски <acronym class="acronym">SCSI</acronym>,
	замените <em class="replaceable"><code>/dev/hd</code></em> на
	<em class="replaceable"><code>/dev/sd</code></em>.  Строка
	<code class="option">loader=/boot/chain.b</code> может быть опущена, если
	обе операционные системы находятся на одном диске.  Теперь
	запустите <code class="command">/sbin/lilo -v</code> для того, чтобы ваши
	изменения были восприняты системой, что должно быть подтверждено
	сообщениями на экране.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-boot1"></a>13.3.2. Этап первый, <code class="filename">/boot/boot1</code>, и этап второй,
	<code class="filename">/boot/boot2</code></h3></div></div></div><p>Концептуально первый и второй этапы загрузки являются частями одной
	и той же программы, в одной области диска.  Из-за ограничений на
	объем дискового пространства они были разделены на две, но вы всегда
	должны устанавливать их вместе.  Они копируются инсталлятором или
	утилитой <span class="application">bsdlabel</span> (см. ниже) из общего
	файла <code class="filename">/boot/boot</code>.</p><p>Они располагаются вне файловых систем, на первом треке загрузочного слайса,
	то есть там, где <a class="link" href="boot-blocks.html#boot-boot0" title="13.3.1. Менеджер загрузки">boot0</a> или
	любой другой менеджер загрузки ожидает найти
	программу, которую следует запустить для продолжение процесса загрузки.
	Количество используемых секторов легко может быть вычислено из
	размера файла <code class="filename">/boot/boot</code>.</p><p><code class="filename">boot1</code> очень прост, так как он не может иметь
	размер, превышающий 512 байт, и знает лишь о <em class="firstterm">метке
	диска</em> FreeBSD, хранящей информацию о слайсе, для того,
	чтобы найти и запустить <code class="filename">boot2</code>.</p><p><code class="filename">boot2</code> устроен несколько более сложно, и умеет
	работать с файловой системой FreeBSD в объёме, достаточном для
	нахождения в ней файлов, и может предоставлять простой интерфейс для
	выбора и передачи управления ядру или загрузчику.</p><p>Так как <a class="link" href="boot-blocks.html#boot-loader" title="13.3.3. Третий этап, /boot/loader">загрузчик</a> устроен
	гораздо более сложно, и дает удобный и простой способ настройки
	процесса загрузки, <code class="filename">boot2</code> обычно запускает его,
	однако раньше его задачей был запуск непосредственно самого
	ядра.</p><div class="example"><a id="boot-boot2-example"></a><div class="example-title">Пример 13.2. Образец экрана <code class="filename">boot2</code></div><div class="example-contents"><pre class="screen">
&gt;&gt; FreeBSD/i386 BOOT
Default: 0:ad(0,a)/boot/loader
boot:
	</pre></div></div><br class="example-break" /><p>Если вам когда-либо понадобится заменить установленные
	<code class="filename">boot1</code> и <code class="filename">boot2</code>, то используйте
	утилиту <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -B <em class="replaceable"><code>diskslice</code></em></code></strong></pre><p>Здесь <em class="replaceable"><code>diskslice</code></em> являются диском и
	слайсом, с которых вы загружаетесь, например,
	<code class="filename">ad0s1</code> в случае первого слайса на первом диске
	IDE.</p><div xmlns="" class="warning"><h3 class="admontitle">Режим Dangerously Dedicated: </h3><p xmlns="http://www.w3.org/1999/xhtml">Если вы используете только имя диска, к примеру,
	  <code class="filename">ad0</code>, в команде <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> вы
	  создадите диск в режиме эксклюзивного использования, без слайсов.
	  Это, скорее всего, вовсе не то, что вы хотите сделать, так что дважды
	  проверьте параметры команды <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>, прежде, чем нажать
	  <span class="keycap"><strong>Return</strong></span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader"></a>13.3.3. Третий этап, <code class="filename">/boot/loader</code></h3></div></div></div><a id="idp87631312" class="indexterm"></a><p>Передача управления загрузчику является последним, третьим этапом в
	процессе начальной загрузки, а сам загрузчик находится в файловой
	системе, обычно как <code class="filename">/boot/loader</code>.</p><p>Загрузчик являет собой удобный в использовании инструмент для
	настройки при помощи простого набора команд, управляемого более мощным
	интерпретатором с более сложным набором команд.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader-flow"></a>13.3.3.1. Процесс работы загрузчика</h4></div></div></div><p>Во время инициализации загрузчик пытается произвести поиск
	  консоли, дисков и определить, с какого диска он был запущен.
	  Соответствующим образом он задаёт значения переменных и запускает
	  интерпретатор, которому могут передаваться пользовательские команды
	  как из скрипта, так и в интерактивном режиме.</p><a id="idp87634128" class="indexterm"></a><a id="idp87634640" class="indexterm"></a><p>Затем загрузчик читает файл
	  <code class="filename">/boot/loader.rc</code>, который по умолчанию использует
	  файл <code class="filename">/boot/defaults/loader.conf</code>, устанавливающий
	  подходящие значения по умолчанию для переменных и читает файл
	  <code class="filename">/boot/loader.conf</code> для изменения в этих
	  переменных.  Затем с этими переменными работает
	  <code class="filename">loader.rc</code>, загружающий выбранные модули и
	  ядро.</p><p>И наконец, по умолчанию загрузчик выдерживает 10-секундную паузу,
	  ожидая нажатия клавиши, и загружает ядро, если этого не произошло.
	  Если ожидание было прервано, пользователю выдается
	  приглашение, которое воспринимает простой набор команд, с помощью
	  которых пользователь может изменить значения переменных, выгрузить
	  все модули, загрузить модули и окончательно продолжить процесс
	  загрузки или перезагрузить машину.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader-commands"></a>13.3.3.2. Встроенные команды загрузчика</h4></div></div></div><p>Далее следуют наиболее часто используемые команды загрузчика.
	  Полное описание всех имеющихся команд можно найти на странице
	  справки о команде <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">autoboot <em class="replaceable"><code>секунды</code></em></span></dt><dd><p>Продолжает загрузку ядра, если не будет прерван в течение
		указанного в секундах промежутка времени.  Он выводит счетчик,
		и по умолчанию выдерживается интервал в 10 секунд.</p></dd><dt><span class="term">boot
	      [<span class="optional"><em class="replaceable"><code>-параметры</code></em></span>]
	      [<span class="optional"><em class="replaceable"><code>имя ядра</code></em></span>]</span></dt><dd><p>Продолжить процесс загрузки указанного ядра, если оно было
		указано, и с указанными параметрами, если они были
		указаны.  Загрузка и использование указанного ядра
		возможны лишь после выгрузки текущего ядра, а выгрузка текущего
		ядра производится командой <span class="emphasis"><em>unload</em></span>.</p></dd><dt><span class="term">boot-conf</span></dt><dd><p>Повторно провести тот же самый процесс автоматической
		настройки модулей на основе переменных, что был произведен при
		загрузке.  Это имеет смысл, если до этого вы выполнили команду
		<code class="command">unload</code>, изменили некоторые переменные,
		например, наиболее часто меняемую <code class="envar">kernel</code>.</p></dd><dt><span class="term">help
	      [<span class="optional"><em class="replaceable"><code>тема</code></em></span>]</span></dt><dd><p>Вывод сообщений подсказки из файла
		<code class="filename">/boot/loader.help</code>.  Если в качестве темы
		указано слово <code class="literal">index</code>, то выводится список
		имеющихся тем.</p></dd><dt><span class="term">include <em class="replaceable"><code>имя файла</code></em>
	      ...</span></dt><dd><p>Выполнить файл с указанным именем.  Файл считывается и
		его содержимое интерпретируется строчка за строчкой.  Ошибка
		приводит к немедленному прекращению выполнения команды
		include.</p></dd><dt><span class="term">load [<span class="optional">-t
	      <em class="replaceable"><code>тип</code></em></span>]
	      <em class="replaceable"><code>имя файла</code></em></span></dt><dd><p>Загружает ядро, модуль ядра или файл указанного типа с
		указанным именем.  Все аргументы после имени файла передаются в
		файл.</p></dd><dt><span class="term">ls [<span class="optional">-l</span>]
	      [<span class="optional"><em class="replaceable"><code>маршрут</code></em></span>]</span></dt><dd><p>Выводит список файлов по указанному маршруту или в корневом
		каталоге, если маршрут не был указан.  Если указан параметр
		<code class="option">-l</code>, будут выводиться и размеры файлов.</p></dd><dt><span class="term">lsdev [<span class="optional">-v</span>]</span></dt><dd><p>Выводится список всех устройств, с которых могут быть
		загружены модули.  Если указан параметр <code class="option">-v</code>,
		выводится дополнительная информация.</p></dd><dt><span class="term">lsmod [<span class="optional">-v</span>]</span></dt><dd><p>Выводит список загруженных модулей.  Если указан параметр
		<code class="option">-v</code>, то выводится дополнительная
		информация.</p></dd><dt><span class="term">more <em class="replaceable"><code>имя файла</code></em></span></dt><dd><p>Вывод указанного файла с паузой при выводе каждой строки
		<code class="varname">LINES</code>.</p></dd><dt><span class="term">reboot</span></dt><dd><p>Выполнить немедленную перезагрузку машины.</p></dd><dt><span class="term">set <em class="replaceable"><code>переменная</code></em>, </span><span class="term">set
	      <em class="replaceable"><code>переменная</code></em>=<em class="replaceable"><code>значение</code></em></span></dt><dd><p>Задает значения переменных окружения загрузчика.</p></dd><dt><span class="term">unload</span></dt><dd><p>Удаление из памяти всех загруженных модулей.</p></dd></dl></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader-examples"></a>13.3.3.3. Примеры использования загрузчика</h4></div></div></div><p>Вот несколько примеров практического использования
	  загрузчика:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Чтобы просто загрузить ваше ядро обычным образом, но в
	      однопользовательском режиме:<a id="idp87688144" class="indexterm"></a></p><pre class="screen"><strong class="userinput"><code>boot -s</code></strong></pre></li><li class="listitem"><p>Для выгрузки обычных ядра и модулей, а потом просто загрузить
	      ваше старое (или другое) ядро:</p><pre class="screen"><strong class="userinput"><code>unload</code></strong>
<strong class="userinput"><code>load <em class="replaceable"><code>kernel.old</code></em></code></strong></pre><p>Вы можете использовать <code class="filename">kernel.GENERIC</code>
	      для обозначения стандартного ядра, поставляемого на установочном
	      диске, или <code class="filename">kernel.old</code><a id="idp87691984" class="indexterm"></a> для обращения к ранее
	      установленному ядру (после того, как, например, вы обновили или
	      отконфигурировали новое ядро).</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Для загрузки ваших обычных модулей с другим ядром
		используйте такие команды:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><strong class="userinput"><code>unload</code></strong>
<strong class="userinput"><code>set kernel="<em class="replaceable"><code>kernel.old</code></em>"</code></strong>
<strong class="userinput"><code>boot-conf</code></strong></pre></div></li><li class="listitem"><p>Для загрузки скрипта конфигурации ядра (автоматизированный
	      скрипт, который выполняет то, что вы обычно делаете в
	      конфигураторе ядра во время загрузки):</p><pre class="screen"><strong class="userinput"><code>load -t userconfig_script <em class="replaceable"><code>/boot/kernel.conf</code></em></code></strong></pre></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-splash"></a>13.3.3.4. Загрузочные экранные заставки</h4></div><div><span class="authorgroup">Предоставил <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Joseph J.</span> <span class="surname">Barbish</span></span>. </span></div></div></div><p>Заставка создает более привлекательный вид процесса
	  загрузки по сравнению с традиционными сообщениями загрузки.
	  Изображение заставки будет отображаться до тех пор, пока
	  не придет очередь приглашения ввода логина на консоли или в
	  менеджере дисплеев.</p><p>Есть два базовых окружения во FreeBSD.  Первое - это
	  окружение командной строки текстовой виртуальной консоли.
	  По завершении загрузки системы вам предоставляется консольное
	  приглашение ввода логина.  Второе окружение - это
	  графическое окружение рабочего стола X11.  После установки <a class="link" href="x-install.html" title="6.3. Установка X11">X11</a> и одной из графических оболочек,
	  таких как <span class="application">GNOME</span>,
	  <span class="application">KDE</span> или <span class="application">XFce</span>,
	  становится возможным запуск рабочего стола Х11 командой
	  <code class="command">startx</code>.</p><p>Некоторые пользователи предпочитают графический интерфейс
	  входа традиционному текстовому приглашению ввода логина.
	  Менеджеры экранов, наподобие
	  <span class="application">XDM</span> для Xorg,
	  <span class="application">gdm</span> для <span class="application">GNOME</span>,
	  <span class="application">kdm</span> для <span class="application">KDE</span>
	  (а также другие, доступные из коллекции портов), изначально
	  предоставляют графический интерфейс входа.  После успешного входа
	  в систему они запускают соответствующий оконный менеджер.</p><p>В текстовом окружении экранная заставка скрывает все подробности
	  процесса загрузки и сообщения стартовых скриптов до момента выдачи
	  приглашения ввода логина.  Если используется экранная заставка
	  перед входом в графическое окружение, то пользователи получают
	  визуально более чистый старт системы, чем-то напоминающий опыт
	  работы с <span class="trademark">Microsoft</span>(R) <span class="trademark">Windows</span>(R) или с иной не unix-подобной
	  системой.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-splash-function"></a>13.3.3.4.1. Экранная заставка в действии</h5></div></div></div><p>В качестве заставки можно использовать лишь содержащие
	    256 цветов изображения формата <acronym class="acronym">BMP</acronym>
	    (<code class="filename">.bmp</code>) или изображения формата
	    <acronym class="acronym">PCX</acronym> (<code class="filename">.pcx</code>) от ZSoft.
	    К тому же, для вывода на стандартный VGA адаптер, файл
	    изображения заставки должен иметь разрешение не более
	    320 на 200 пикселей.</p><p>Чтобы можно было использовать изображения большего размера,
	    вплоть до максимального 1024 на 768, активируйте поддержку
	    <acronym class="acronym">VESA</acronym>.  Активация может быть осуществлена либо
	    подключением модуля <acronym class="acronym">VESA</acronym> во время загрузки
	    системы, либо сборкой специализированного ядра с добавленной
	    опцией <code class="literal">VESA</code> (смотрите <a class="xref" href="kernelconfig.html" title="Глава 9. Настройка ядра FreeBSD">Глава 9, <em>Настройка ядра FreeBSD</em></a>).  Поддержка режима <acronym class="acronym">VESA</acronym>
	    дает пользователям возможность отображать заставку, перекрывающую
	    всю видимую область экрана.</p><p>Отображаемая во время загрузки заставка может
	    быть убрана нажатием любой клавиши на клавиатуре.</p><p>С настройками по умолчанию заставка также становится
	    хранителем экрана в консольном окружении.  После некоторого
	    бездействия экран сменится заставкой, яркость которой
	    будет периодически изменяться от её максимального значения
	    к минимальному и обратно.  Подобное поведение заставки может
	    быть переопределено добавлением строки <code class="literal">saver=</code>
	    в <code class="filename">/etc/rc.conf</code>.  В качестве значения опции
	    <code class="literal">saver=</code> можно выбрать одно из встроенных
	    имен хранителей экранов, а с полным перечнем можно ознакомиться
	    на странице справочника <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=splash&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">splash</span>(4)</span></a>.  Хранитель экрана,
	    используемый по умолчанию, называется <span class="quote"><<<span class="quote">warp</span>>></span>.
	    Заметьте, что установка опции <code class="literal">saver=</code> в
	    <code class="filename">/etc/rc.conf</code> воздействует исключительно
	    на текстовые виртуальные консоли.  Она не влияет на менеджеры
	    экранов X11.</p><p>Несколько сообщений загрузчика, включая меню загрузки
	    и счетчик, отображаются во время загрузки, даже если экран-заставка
	    активирован.</p><p>Файлы-примеры с изображениями для заставок могут быть
	    скачаны из галереи по адресу <a class="link" href="http://artwork.freebsdgr.org/node/3/" target="_top">http://artwork.freebsdgr.org</a>.
	    Установив порт <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/bsd-splash-changer/pkg-descr">sysutils/bsd-splash-changer</a>, между
	    загрузками вы получите автоматическую смену случайно выбираемых
	    изображений заставок.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-splash-enable"></a>13.3.3.4.2. Активация экранной заставки</h5></div></div></div><p>Файл изображения для заставки (<code class="filename">.bmp</code>
	    или <code class="filename">.pcx</code>) следует разместить в корневой
	    файловой системе, например в каталоге <code class="filename">/boot</code>.</p><p>Для работы заставки с разрешением, доступным при загрузке
	    (256 цветов и не более 320х200 точек), отредактируйте
	    <code class="filename">/boot/loader.conf</code>, добавив в него
	    следующие строки:</p><pre class="programlisting">splash_bmp_load="YES"
bitmap_load="YES"
bitmap_name="<em class="replaceable"><code>/boot/splash.bmp</code></em>"</pre><p>Для получения больших разрешений видео режима (вплоть до
	    максимального 1024x768), внесите в
	    <code class="filename">/boot/loader.conf</code> следующие записи:</p><pre class="programlisting">vesa_load="YES"
splash_bmp_load="YES"
bitmap_load="YES"
bitmap_name="<em class="replaceable"><code>/boot/splash.bmp</code></em>"</pre><p>Вышеприведённый пример подразумевает, что файл
	    <code class="filename"><em class="replaceable"><code>/boot/splash.bmp</code></em></code>
	    содержит изображение заставки.  Если же требуется выводить файл
	    формата <acronym class="acronym">PCX</acronym>, то используйте следующие строки
	    (в зависимости от необходимого разрешения может также
	    потребоваться строка <code class="literal">vesa_load="YES"</code>):</p><pre class="programlisting">splash_pcx_load="YES"
bitmap_load="YES"
bitmap_name="<em class="replaceable"><code>/boot/splash.pcx</code></em>"</pre><p>Возможное имя файла не ограничено одним лишь словом
	    <span class="quote"><<<span class="quote">splash</span>>></span>.  Оно может выбираться произвольно, например:
	    <code class="filename"><em class="replaceable"><code>splash_640x400.bmp</code></em></code>
	    или <code class="filename"><em class="replaceable"><code>blue_wave.pcx</code></em></code>.
	    Важен лишь тип файла: он должен быть либо <acronym class="acronym">BMP</acronym>,
	    либо <acronym class="acronym">PCX</acronym>.</p><p>Далее приведены еще две полезные опции
	    <code class="filename">loader.conf</code>:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">beastie_disable="YES"</code></span></dt><dd><p>Эта опция отключит меню загрузчика, но приглашение с
		  обратным отсчетом останется.  Даже при не отображаемом меню
		  во время отсчета возможен выбор номера варианта
		  загрузки.</p></dd><dt><span class="term"><code class="literal">loader_logo="beastie"</code></span></dt><dd><p>Эта установка заменит слова <span class="quote"><<<span class="quote">FreeBSD</span>>></span>,
		  которые отображаются справа от меню загрузчика, цветным
		  логотипом демона, который занимал это место в предыдущих
		  релизах FreeBSD.</p></dd></dl></div><p>За более детальной информацией обратитесь к следующим
	    страницам справочника: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=splash&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">splash</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a> и
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vga&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">vga</span>(4)</span></a>.</p></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="boot-introduction.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="boot.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="boot-kernel.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">13.2. Проблема загрузки </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 13.4. Взаимодействие с ядром во время загрузки</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>