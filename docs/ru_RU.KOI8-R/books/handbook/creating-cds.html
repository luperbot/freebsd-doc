<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>17.6. Запись и использование оптических носителей (CD)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="disks.html" title="Глава 17. Устройства хранения" /><link rel="prev" href="usb-disks.html" title="17.5. USB устройства хранения" /><link rel="next" href="creating-dvds.html" title="17.7. Создание и использование оптических носителей (DVD)" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">17.6. Запись и использование оптических носителей (CD)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="usb-disks.html">Пред.</a> </td><th width="60%" align="center">Глава 17. Устройства хранения</th><td width="20%" align="right"> <a accesskey="n" href="creating-dvds.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="creating-cds"></a>17.6. Запись и использование оптических носителей (CD)</h2></div><div><span class="authorgroup">Текст предоставил <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Mike</span> <span class="surname">Meyer</span></span>. </span></div></div></div><a id="idp91171920" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91173072"></a>17.6.1. Введение</h3></div></div></div><p>Компакт-диски (CD) имеют несколько особенностей, отличающих их от
	обычных дисков.  Во-первых, на них невозможно производить запись.  Они
	спроектированы с расчетом на то, что их можно читать последовательно без
	задержек на перемещение головки между дорожками.  К тому же их гораздо
	проще переносить от системы к системе, чем носители близкого
	объема.</p><p>У CD имеются дорожки, но они представляют собой последовательность
	данных, читаемую последовательно, и не являются физической
	характеристикой диска.  Для записи CD во FreeBSD вы готовите файлы
	данных, которые будут формировать дорожки на компакт-диске, а затем
	записываете дорожки на CD.</p><a id="idp91182800" class="indexterm"></a><a id="idp91183312" class="indexterm"></a><p>Файловая система ISO 9660 была разработана с учетом этих отличий,  К
	сожалению, она унаследовала ограничения файловых систем, которые были
	тогда.  К счастью, она дает механизм расширений, которые позволяют
	правильно записанным дискам обходить эти ограничения и при этом
	продолжать работать с системами, которые не поддерживают эти
	расширения.</p><a id="idp91184848" class="indexterm"></a><p>Для создания файла данных, содержащего файловую систему ISO 9660,
	используется программа <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>, которая включена в порт
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a>.  Она имеет опции,
	поддерживающие различные расширения, и описана ниже.</p><a id="idp91187408" class="indexterm"></a><p>Какой инструмент использовать для записи CD, зависит от того,
	является ли
	ваше устройство для записи CD устройством ATAPI или каким-либо другим.
	С устройствами для записи стандарта ATAPI используется программа
	<code class="command">burncd</code>, которая
	является частью комплекта поставки системы.  С устройствами SCSI и USB
	нужно использовать <code class="command">cdrecord</code> из порта
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a>.
	Утилиту <code class="command">cdrecord</code> и
	другие инструменты для SCSI-приводов также можно использовать при
	работе с ATAPI-оборудованием через <a class="link" href="creating-cds.html#atapicam" title="17.6.9. Использование драйвера ATAPI/CAM">модуль
	ATAPI/CAM</a>.</p><p>Если для записи CD вам нужна программа с графическим
	интерфейсом пользователя, взгляните на
	<span class="application">X-CD-Roast</span> или
	<span class="application">K3b</span>.  Они доступны в виде пакетов
	или из портов <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/xcdroast/pkg-descr">sysutils/xcdroast</a> и <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/k3b/pkg-descr">sysutils/k3b</a>.
	Программам <span class="application">X-CD-Roast</span> и
	<span class="application">K3b</span> для работы с оборудованием
	ATAPI требуется <a class="link" href="creating-cds.html#atapicam" title="17.6.9. Использование драйвера ATAPI/CAM">модуль ATAPI/CAM</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mkisofs"></a>17.6.2. mkisofs</h3></div></div></div><p>Программа <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>, поставляемая с портом <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a> создаёт
	файловую систему ISO 9660, которая является образом дерева каталогов в
	пространстве имён файловой системы <span class="trademark">UNIX</span>(R).  В самом простом случае она
	используется так:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkisofs -o <em class="replaceable"><code>imagefile.iso</code></em> <em class="replaceable"><code>/path/to/tree</code></em></code></strong></pre><a id="idp91203152" class="indexterm"></a><p>Эта команда создаст файл <em class="replaceable"><code>imagefile.iso</code></em>,
	содержащий файловую систему ISO 9660, которая является копией дерева
	каталогов <em class="replaceable"><code>/path/to/tree</code></em>.  Во время работы
	она будет преобразовывать имена файлов в имена, которые удовлетворяют
	ограничениям файловой системы ISO 9660, и исключит файлы, которые носят
	имена, неподходящие для файловой системы ISO.</p><a id="idp91205456" class="indexterm"></a><a id="idp91206608" class="indexterm"></a><p>Для того, чтобы обойти эти ограничения, имеется несколько опций.  В
	частности, <code class="option">-R</code> включает использование расширений
	Rock Ridge, распространенных в <span class="trademark">UNIX</span>(R)-системах, с <code class="option">-J</code>
	будут применены расширения Joliet, используемые в системах от
	Microsoft, а <code class="option">-hfs</code> может использоваться для создания
	файловых систем HFS, используемых в <span class="trademark">Mac OS</span>(R).</p><p>Для CD, которые будут использоваться только с системами FreeBSD,
	может использоваться опция <code class="option">-U</code>, отменяющая все
	ограничения на имена файлов.  При использовании с опцией
	<code class="option">-R</code>
	генерируется образ файловой системы, идентичный начальному дереву
	FreeBSD, хотя при этом стандарт ISO 9660 может нарушаться в нескольких
	местах.</p><a id="idp91215696" class="indexterm"></a><p>Последней часто используемой опцией является <code class="option">-b</code>.
	Она используется для указания загрузочного образа для использования при
	создании загрузочного CD в стандарте <span class="quote"><<<span class="quote">El Torito</span>>></span>.  Этой
	опции указывается аргумент, который является маршрутом к загрузочному
	образу из корня дерева, записываемого на CD.
	По умолчанию, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> создает образ ISO в так называемом режиме
	<span class="quote"><<<span class="quote">эмуляции флоппи-диска</span>>></span>, и потому ожидает загрузочный
	образ размера строго 1200, 1440 или 2880 KB.  Некоторые
	загрузчики, в том числе и тот, что используется на дистрибутивных
	дисках FreeBSD, не используют режим эмуляции; в этом случае должна
	использоваться опция <code class="option">-no-emul-boot</code>.  Так что, если
	<code class="filename">/tmp/myboot</code> содержит загрузочную систему FreeBSD с
	загрузочным образом в <code class="filename">/tmp/myboot/boot/cdboot</code>, вы
	можете создать образ файловой системы ISO 9660 в
	<code class="filename">/tmp/bootable.iso</code> следующим образом:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkisofs -R -no-emul-boot -b boot/cdboot -o /tmp/bootable.iso /tmp/myboot</code></strong></pre><p>Сделав это, и имея в ядре отконфигурированное устройство
	<code class="filename">md</code>, вы
	можете смонтировать файловую систему, выполнив:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f /tmp/bootable.iso -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -t cd9660 /dev/md0 /mnt</code></strong></pre><p>В этот момент вы можете проверить, что <code class="filename">/mnt</code> и
	<code class="filename">/tmp/myboot</code> идентичны.</p><p>Имеется много других опций, которые можно использовать с
	программой <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> для
	тонкой настройки её поведения.  В частности: модификации в размещении
	ISO 9660 и создание дисков в форматах Joliet и HFS.  Обратитесь к
	справочным страницам по <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> для получения более подробной
	информации.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="burncd"></a>17.6.3. burncd</h3></div></div></div><a id="idp91253200" class="indexterm"></a><p>Если ваше устройство для записи CD соответствует стандарту ATAPI,
	то для записи ISO-образа на компакт-диск вы можете воспользоваться
	командой <code class="command">burncd</code>.  <code class="command">burncd</code> входит
	в базовый комплект операционной системы и установлена как
	<code class="filename">/usr/sbin/burncd</code>.  Использовать её очень просто,
	так как параметров у ней немного:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>burncd -f <em class="replaceable"><code>cddevice</code></em> data <em class="replaceable"><code>imagefile.iso</code></em> fixate</code></strong></pre><p>По этой команде файл <em class="replaceable"><code>imagefile.iso</code></em> будет
	скопирован на <em class="replaceable"><code>cddevice</code></em>.  По умолчанию
	используется устройство <code class="filename">/dev/acd0</code>.  Для получения
	информации о параметрах, задающих скорость записи, выброс диска после
	записи и запись звуковых данных, обратитесь к <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=burncd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">burncd</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cdrecord"></a>17.6.4. cdrecord</h3></div></div></div><p>Если ваше устройство для записи CD не соответствует стандарту
	ATAPI, то для записи компакт-дисков вам нужно пользоваться программой
	<code class="command">cdrecord</code>.  <code class="command">cdrecord</code> не входит в
	комплект поставки системы; вы должны установить её из порта
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a> или из
	соответствующего пакета.  Изменения в системе могут приводить к тому,
	что откомпилированные версии этой программы работать не будут, или
	приводить к порче дисков.  Поэтому вы должны при обновлении системы
	либо обновить порт, либо, если вы <a class="link" href="current-stable.html#stable" title="21.4.2. Работа с веткой stable во FreeBSD">следуете
	-STABLE</a>, обновить порт при появлении его новой версии.</p><p>Хотя <code class="command">cdrecord</code> имеет много опций, в основном
	использовать её ещё проще, чем <code class="command">burncd</code>. Запись образа
	ISO 9660 делается такой командой:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdrecord dev=<em class="replaceable"><code>device</code></em> <em class="replaceable"><code>imagefile.iso</code></em></code></strong></pre><p>Тонким моментом при использовании <code class="command">cdrecord</code>
	является определение правильного устройства <code class="option">dev</code>.  Чтобы
	задать параметр правильно, воспользуйтесь флагом
	<code class="option">-scanbus</code> команды <code class="command">cdrecord</code>, в
	результате чего может получиться примерно такой результат:</p><a id="idp91267664" class="indexterm"></a><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdrecord -scanbus</code></strong>
Cdrecord-Clone 2.01 (i386-unknown-freebsd7.0) Copyright (C) 1995-2004 J"org Schilling
Using libscg version 'schily-0.1'
scsibus0:
	0,0,0     0) 'SEAGATE ' 'ST39236LW       ' '0004' Disk
	0,1,0     1) 'SEAGATE ' 'ST39173W        ' '5958' Disk
	0,2,0     2) *
	0,3,0     3) 'iomega  ' 'jaz 1GB         ' 'J.86' Removable Disk
	0,4,0     4) 'NEC     ' 'CD-ROM DRIVE:466' '1.26' Removable CD-ROM
	0,5,0     5) *
	0,6,0     6) *
	0,7,0     7) *
scsibus1:
	1,0,0   100) *
	1,1,0   101) *
	1,2,0   102) *
	1,3,0   103) *
	1,4,0   104) *
	1,5,0   105) 'YAMAHA  ' 'CRW4260         ' '1.0q' Removable CD-ROM
	1,6,0   106) 'ARTEC   ' 'AM12S           ' '1.06' Scanner
	1,7,0   107) *</pre><p>Здесь приведены соответствующие значения параметров
	<code class="option">dev</code> для имеющихся устройств.  Найдите здесь ваше
	устройство для записи CD, а в качестве параметров для
	<code class="option">dev</code> задавайте три числа через запятые.  В нашем случае
	CRW-устройству соответствуют числа 1,5,0, так что правильным параметром
	будет <code class="option">dev=1,5,0</code>.  Имеется более
	простой способ задать эти значения; обратитесь к справочной информации
	о <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdrecord&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdrecord</span>(1)</span></a> для выяснения подробностей.  Там же находится
	информация о записи звуковых дорожек, управлении скоростью и другим
	вещам.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="duplicating-audiocds"></a>17.6.5. Копирование аудио CD</h3></div></div></div><p>Вы можете копировать музыкальные CD, извлекая данные аудио с CD
	в набор файлов, а затем записывая эти файлы на чистый CD.  Процесс
	несколько различен в случаях использования устройств ATAPI и
	SCSI.</p><div class="procedure"><a id="idp91277776"></a><div class="procedure-title">Процедура 17.1. Устройства SCSI</div><ol class="procedure" type="1"><li class="step"><p>Используйте <code class="command">cdda2wav</code> для извлечения
	    данных аудио.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cdda2wav -vall -D2,0 -B -Owav</code></strong></pre></li><li class="step"><p>Воспользуйтесь <code class="command">cdrecord</code> для записи файлов
	    <code class="filename">.wav</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cdrecord -v dev=<em class="replaceable"><code>2,0</code></em> -dao -useinfo  *.wav</code></strong></pre><p>Значение, соответствующее <em class="replaceable"><code>2,0</code></em>,
	    должно быть установлено правильно, как это описано в <a class="xref" href="creating-cds.html#cdrecord" title="17.6.4. cdrecord">Раздел 17.6.4, <<cdrecord>></a>.</p></li></ol></div><div class="procedure"><a id="idp91288912"></a><div class="procedure-title">Процедура 17.2. Устройства ATAPI</div><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">На приводах ATAPI также можно использовать утилиту
	    <code class="command">cdda2wav</code>.  Для её функционирования потребуется
	    <a class="link" href="creating-cds.html#atapicam" title="17.6.9. Использование драйвера ATAPI/CAM">драйвер ATAPI/CAM</a>.  Следует
	    отметить, что данная утилита предназначена для корректного
	    извлечения и обработки аудио данных, в отличие от утилиты,
	    приведенной в нижеследующем примере.</p></div><ol class="procedure" type="1"><li class="step"><p>Драйвер устройств ATAPI CD делает каждую дорожку доступной как
	    <code class="filename">/dev/acd<em class="replaceable"><code>d</code></em>t<em class="replaceable"><code>nn</code></em></code>,
	    где <em class="replaceable"><code>d</code></em> является номером привода, а
	    <em class="replaceable"><code>nn</code></em> соответствует номеру дорожки, который
	    записывается двумя десятичными цифрами с нулём в начале, если это
	    нужно.  Таким образом, первая дорожка на первом диске будет носить
	    имя <code class="filename">/dev/acd0t01</code>, вторая будет именоваться
	    <code class="filename">/dev/acd0t02</code>, третья будет носить имя
	    <code class="filename">/dev/acd0t03</code> и так далее.</p><p>Удостоверьтесь, что соответствующий файл имеется в каталоге
	    <code class="filename">/dev</code>.  При его отсутствии следует
	    принудительно перечитать оглавление диска:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/acd0 of=/dev/null count=1</code></strong></pre></li><li class="step"><p>Извлеките каждую дорожку при помощи команды <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a>.  При
	    извлечении файлов вы должны также использовать специфическое
	    значение для размера блока.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/acd0t01 of=track1.cdr bs=2352</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/acd0t02 of=track2.cdr bs=2352</code></strong>
...
</pre></li><li class="step"><p>Запишите извлечённые файлы на диск при помощи утилиты
	    <code class="command">burncd</code>.  Вы должны указать, что это файлы с
	    аудио, и что <code class="command">burncd</code> должна зафиксировать диск
	    по окончании работы.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>burncd -f <em class="replaceable"><code>/dev/acd0</code></em> audio track1.cdr track2.cdr <em class="replaceable"><code>...</code></em> fixate</code></strong></pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="imaging-cd"></a>17.6.6. Копирование компакт-дисков с данными</h3></div></div></div><p>Вы можете скопировать CD с данными в файл образа, который
	функционально эквивалентен файлу образа, созданному командой
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>, и вы можете
	использовать его для копирования любого CD с данными.  В приводимом
	здесь примере предполагается, что ваш привод CDROM называется
    	<code class="filename">acd0</code>.  Подставьте название вашего привода
	CDROM.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/acd0 of=file.iso bs=2048</code></strong></pre><p>Теперь, когда вы имеете образ, вы можете записать его на CD так,
	как это описано выше.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mounting-cd"></a>17.6.7. Использование компакт-диски с данными</h3></div></div></div><p>Теперь, после того, как вы создали стандартный CDROM с данными, вы,
	наверное, захотите смонтировать его и считать с него данные.  По
	умолчанию <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> предполагает, что файловая система имеет тип
	<code class="literal">ufs</code>.  Если вы попытаетесь выполнить что-то
	вроде:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/cd0 /mnt</code></strong></pre><p>вы получите сообщение <span class="errorname">Incorrect super block</span>,
	и диск не смонтируется.  CDROM не является файловой системой
	<code class="literal">UFS</code>, поэтому попытки смонтировать его таким образом
	будут терпеть неудачу.  Вам просто нужно указать команде <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>,
	что файловая система имеет тип <code class="literal">ISO9660</code>, и всё должно
	заработать.  Сделайте это, задав параметр <code class="option">-t cd9660</code>
	при вызове <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.  К примеру, если вы хотите смонтировать
	устройство CDROM, <code class="filename">/dev/cd0</code>, в каталог
	<code class="filename">/mnt</code>, вы должны выполнить:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t cd9660 /dev/cd0 /mnt</code></strong></pre><p>Заметьте, что имя вашего устройства
   	(<code class="filename">/dev/cd0</code> в этом примере) может быть другим,
	в зависимости от интерфейса, используемого в CDROM.  Кроме того,
	параметр <code class="option">-t cd9660</code> всего лишь задаёт выполнение
	утилиты <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_cd9660&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_cd9660</span>(8)</span></a>.  Пример выше может быть упрощён
	до:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount_cd9660 /dev/cd0c /mnt</code></strong></pre><p>Таким способом, вообще говоря, вы можете использовать компакт-диски
	любого производителя.  Диски с некоторыми расширениями ISO 9660 могут,
	однако, работать со странностями.  К примеру диски Joliet хранят все
	имена файлов в виде последовательностей двухбайтовых символов Unicode.
	Ядро FreeBSD не может работать с Unicode, но CD9660 драйвер способен
	преобразовывать Unicode символы на лету.  Если некоторые символы не
	английского алфавита выглядят, как знаки вопроса, то вам нужно указать
	используемую вами кодировку с помощью опции <code class="option">-C</code>.  За
	дополнительной информацией, обращайтесь к странице справочника
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_cd9660&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_cd9660</span>(8)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Чтобы смочь произвести преобразование символов  посредством
	  опции <code class="option">-C</code>, ядру понадобится загрузить модуль
	  <code class="filename">cd9660_iconv.ko</code>.  Это может быть сделано
	  либо добавлением ниже представленной строчки в
	  <code class="filename">loader.conf</code>:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">cd9660_iconv_load="YES"</pre><p xmlns="http://www.w3.org/1999/xhtml">с последующей перезагрузкой машины, либо загрузкой модуля вручную
	  с помощью <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>.</p></div><p>Время от времени вы можете получать сообщения <span class="errorname">Device not
	configured</span> при попытке смонтировать CDROM.  Это обычно
	означает, что привод CDROM полагает, что в нём нет диска, или что
	привод не виден на шине.  Приводу CDROM может понадобиться несколько
	секунд, чтобы понять, что он был закрыт, так что будьте
	терпеливы.</p><p>Иногда SCSI CDROM может потеряться из-за того, что у него не было
	достаточно времени, чтобы ответить на сброс шины.  Если у вас имеется
	SCSI CDROM, то, пожалуйста, добавьте следующий параметр в конфигурацию
	вашего ядра и <a class="link" href="kernelconfig-building.html" title="9.5. Сборка и установка собственного ядра">перестройте
	его</a>.</p><pre class="programlisting">options SCSI_DELAY=15000</pre><p>Это укажет вашей шине SCSI выдерживать 15-секундную паузу во время
	загрузки, чтобы дать вашему приводу CDROM шанс ответить на сброс
	шины.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rawdata-cd"></a>17.6.8. Запись необработанных данных на компакт-диски</h3></div></div></div><p>Вы можете предпочесть запись файла непосредственно на CD без
	создания файловой системы ISO 9660.  Некоторые поступают так при
	создании резервных копий.  Это выполняется гораздо быстрее. чем запись
	стандартного компакт-диска:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>burncd -f /dev/acd1 -s 12 data archive.tar.gz fixate</code></strong></pre><p>Для извлечения данных, записанных так на компакт-диск, вы должны
	считывать данные из файла непосредственного доступа к
	устройству:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar xzvf /dev/acd1</code></strong></pre><p>Вы не можете монтировать этот диск как обычный CDROM.  Такой
	компакт-диск не может быть прочитан ни в какой другой операционной
	системе, кроме FreeBSD.  Если вы хотите монтировать CD или
	обменяться данными с другой операционной системой, то вы должны
	использовать <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> так,
	как это было описано выше.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="atapicam"></a>17.6.9. Использование драйвера ATAPI/CAM</h3></div><div><span class="authorgroup">Предоставил <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp91383760" class="indexterm"></a><p>Этот драйвер позволяет работать с ATAPI-устройствами (приводы
	CD-ROM, CD-RW, DVD и так далее) через подсистему SCSI, таким образом
	расширяя использование таких приложений, как <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrdao/pkg-descr">sysutils/cdrdao</a> или <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdrecord&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdrecord</span>(1)</span></a>.</p><p>Для использования этого драйвера вам необходимо добавить в файл
	<code class="filename">/boot/loader.conf</code> следующую строку:</p><pre class="programlisting">atapicam_load="YES"</pre><p>с последующей перезагрузкой машины.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Если для вас предпочтительнее статически скомпилировать
	  поддержку <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atapicam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atapicam</span>(4)</span></a> в ядро, то добавьте эту строчку
	  в файл конфигурации ядра:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">device atapicam</pre><p xmlns="http://www.w3.org/1999/xhtml">Кроме того, в файле конфигурации ядра должны быть следующие
	строки:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">device ata
device scbus
device cd
device pass</pre><p xmlns="http://www.w3.org/1999/xhtml">которые уже должны там присутствовать.  Затем пересоберите, установите
	новое ядро и перезагрузите компьютер.</p></div><p>В процессе загрузки ваш пишущий привод должен
	появиться примерно следующим образом:</p><pre class="screen">acd0: CD-RW &lt;MATSHITA CD-RW/DVD-ROM UJDA740&gt; at ata1-master PIO4
cd0 at ata1 bus 0 target 0 lun 0
cd0: &lt;MATSHITA CDRW/DVD UJDA740 1.00&gt; Removable CD-ROM SCSI-0 device
cd0: 16.000MB/s transfers
cd0: Attempt to query device size failed: NOT READY, Medium not present - tray closed</pre><p>Теперь с ним можно работать через устройство
	<code class="filename">/dev/cd0</code>, например, чтобы смонтировать
	CD-ROM в каталог <code class="filename">/mnt</code>, просто наберите следующую
	команду:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t cd9660 <em class="replaceable"><code>/dev/cd0</code></em> /mnt</code></strong></pre><p>Для получения SCSI-адреса пишущего привода, вы можете, работая как
	пользователь <code class="systemitem">root</code>, запустить такую
	команду:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol devlist</code></strong>
&lt;MATSHITA CDRW/DVD UJDA740 1.00&gt;   at scbus1 target 0 lun 0 (pass0,cd0)</pre><p>Таким образом, <code class="literal">1,0,0</code> будет SCSI-адресом для
	использования с <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdrecord&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdrecord</span>(1)</span></a> и другими приложениями для работы со
	SCSI.</p><p>Для получения дополнительной информации об ATAPI/CAM и системе
	SCSI, обратитесь к страницам справочной системы по <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atapicam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atapicam</span>(4)</span></a> и
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">cam</span>(4)</span></a>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="usb-disks.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="creating-dvds.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">17.5. USB устройства хранения </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 17.7. Создание и использование оптических носителей (DVD)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>