<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>8.4. Воспроизведение видео</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD" /><link rel="up" href="multimedia.html" title="Глава 8. Мультимедиа" /><link rel="prev" href="sound-mp3.html" title="8.3. Звук MP3" /><link rel="next" href="tvcard.html" title="8.5. Настройка ТВ тюнеров" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">8.4. Воспроизведение видео</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="sound-mp3.html">Пред.</a> </td><th width="60%" align="center">Глава 8. Мультимедиа</th><td width="20%" align="right"> <a accesskey="n" href="tvcard.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="video-playback"></a>8.4. Воспроизведение видео</h2></div><div><span class="authorgroup">Предоставил <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Ross</span> <span class="surname">Lippert</span></span>. </span></div></div></div><p>Воспроизведение видео является очень новой и быстро развивающейся
       областью применения. Будьте терпеливы. Не всё будет работать так
       беспроблемно, как это было со звуком.</p><p>Прежде, чем вы начнёте, определите модель видеокарты и
       чипсет, который она использует. Хотя <span class="application">Xorg</span>
       и <span class="application"><span class="trademark">XFree86</span>TM</span>
       поддерживают множество различных видеокарт, только их малая часть
       показывает хорошую скорость воспроизведения видео. Для того, чтобы
       получить список расширений, поддерживаемых X-сервером, который
       используется вашей видеокартой, используйте команду <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdpyinfo&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdpyinfo</span>(1)</span></a> во
       время работы X11.</p><p>Неплохо также иметь небольшой файл MPEG, который бы использовался
       как тестовый файл для проверки различных проигрывателей и настроек. Так
       как некоторые проигрыватели DVD будут искать носитель DVD как
       <code class="filename">/dev/dvd</code> по умолчанию или быть жёстко настроены
       на него, возможно будет полезно сделать символические ссылки на
       правильные устройства:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -sf /dev/acd0 /dev/dvd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -sf /dev/acd0 /dev/rdvd</code></strong></pre><p>Обратите внимание, природа <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> такова, что такие созданные
      вручную ссылки не сохраняются при перезагрузке системы.  Для
      автоматического создания символических ссылок при каждой загрузке
      системы добавьте в <code class="filename">/etc/devfs.conf</code>
      следующие строки:</p><pre class="programlisting">link acd0 dvd
link acd0 rdvd</pre><p>Кроме того, декодирование DVD требует доступа к специальным
	функциям DVD-ROM, поэтому должен быть доступ на запись для устройств
	DVD.</p><p>Для того, чтобы улучшить работу разделяемой памяти X11,
	рекомендуется увеличить значения некоторых переменных
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>:</p><pre class="programlisting">kern.ipc.shmmax=67108864
kern.ipc.shmall=32768</pre><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-interface"></a>8.4.1. Определение возможностей видео</h3></div></div></div><a id="idp82059472" class="indexterm"></a><a id="idp82060112" class="indexterm"></a><a id="idp82060624" class="indexterm"></a><p>Существует несколько возможных путей отображения видео под X11. Что
	именно будет действительно работать, во многом зависит от аппаратного
	обеспечения. Каждый из описанных методов будет работать с различным
	качеством
	на разном аппаратном обеспечении. Во-вторых, воспроизведение видео в
	X11, это тема, которой уделяется достаточно много внимания последнее
	время, и с каждой новой версией <span class="application">Xorg</span>
	или <span class="application"><span class="trademark">XFree86</span>TM</span> могут
	наблюдаться значительные улучшения.</p><p>Список наиболее часто используемых видеоинтерфейсов:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>X11: обычный вывод X11 с использованием разделяемой памяти.</p></li><li class="listitem"><p>XVideo: расширение интерфейса X11, которое поддерживает видео в
	  любом объекте X11.</p></li><li class="listitem"><p>SDL: the Simple Directmedia Layer.</p></li><li class="listitem"><p>DGA: the Direct Graphics Access - прямой доступ для
	  графики.</p></li><li class="listitem"><p>SVGAlib: низкоуровневый доступ к графике на консоли.</p></li></ol></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-interface-xvideo"></a>8.4.1.1. XVideo</h4></div></div></div><p><span class="application">Xorg</span> и
	  <span class="application"><span class="trademark">XFree86</span>TM 4.X</span> включают в себя
	  расширение, называющееся <span class="emphasis"><em>XVideo</em></span> (также известное
	  как Xvideo, Xv и xv), которое позволяет отображать видео прямо на
	  объектах при помощи специального ускорения. Это расширение
	  предоставляет очень хорошее качество воспроизведения даже на low-end
	  машинах.</p><p>Для того чтобы проверить, работает ли это расширение, используйте
	  команду <code class="command">xvinfo</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xvinfo</code></strong></pre><p>XVideo поддерживается вашей видеокартой, если результат выглядит приблизительно так:</p><pre class="screen">X-Video Extension version 2.2
screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
      "XV_COLORKEY" (range 0 to 16777215)
              client settable attribute
              client gettable attribute (current value is 2110)
      "XV_BRIGHTNESS" (range -128 to 127)
              client settable attribute
              client gettable attribute (current value is 0)
      "XV_CONTRAST" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_SATURATION" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_HUE" (range -180 to 180)
              client settable attribute
              client gettable attribute (current value is 0)
    maximum XvImage size: 1024 x 1024
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x30323449 (I420)
        guid: 49343230-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x36315652 (RV16)
        guid: 52563135-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x3e0, 0x7c00
      id: 0x35315652 (RV15)
        guid: 52563136-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x7e0, 0xf800
      id: 0x31313259 (Y211)
        guid: 59323131-0000-0010-8000-00aa00389b71
        bits per pixel: 6
        number of planes: 3
        type: YUV (packed)
      id: 0x0
        guid: 00000000-0000-0000-0000-000000000000
        bits per pixel: 0
        number of planes: 0
        type: RGB (packed)
        depth: 1
        red, green, blue masks: 0x0, 0x0, 0x0</pre><p>Следует заметить, что перечисленные форматы (YUV2, YUV12 и т.п.) не
	присутствуют в каждой реализации XVideo и их отсутствие может быть
	помехой для некоторых проигрывателей.</p><p>Если результат выглядит так:</p><pre class="screen">X-Video Extension version 2.2
screen #0
no adaptors present</pre><p>то, возможно, XVideo не поддерживается для вашей видеокарты.</p><p>Если XVideo не поддерживается вашей видеокартой, то это всего лишь
	означает, что будет сложнее получить приемлемые для воспроизведения
	видео вычислительные мощности. В зависимости от вашей видеокарты и
	процессора, возможно, вы сможете получить удовлетворительный результат.
	Возможно, вы должны будете прочитать о путях улучшения
	производительности в <a class="xref" href="video-playback.html#video-further-reading" title="8.4.3. Дальнейшее чтение">Раздел 8.4.3, <<Дальнейшее чтение>></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-interface-SDL"></a>8.4.1.2. Simple Directmedia Layer</h4></div></div></div><p>SDL был задуман как уровень абстракции для разработки
      кросплатформенных приложений под <span class="trademark">Microsoft</span>(R) <span class="trademark">Windows</span>(R), BeOS и <span class="trademark">UNIX</span>(R), позволяя
      им эффективно использовать звук и графику. SDL предоставляет
      низкоуровневые абстракции для аппаратного обеспечения, и
      может быть более эффективным чем интерфейс X11.</p><p>SDL есть в Коллекции портов FreeBSD: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/sdl12/pkg-descr">devel/sdl12</a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-interface-DGA"></a>8.4.1.3. Прямой доступ для графики (DGA)</h4></div></div></div><p>DGA это расширение X11, которое позволяет программам напрямую
      изменять кадровый буфер (framebuffer) без участия X-сервера. Поскольку
      DGA основывается на низкоуровневом доступе к памяти, программы, которые
      используют его должны исполняться от пользователя
      <code class="systemitem">root</code>.</p><p>Расширение DGA может быть протестировано при помощи <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dga&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dga</span>(1)</span></a>.
      Когда <code class="command">dga</code> запущена, она изменяет цвета на экране при
      каждом нажатии клавиш. Для того, чтобы выйти из неё, используйте
      <span class="keycap"><strong>q</strong></span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-ports"></a>8.4.2. Порты и пакеты для работы с видео</h3></div></div></div><a id="idp82103504" class="indexterm"></a><a id="idp82104016" class="indexterm"></a><p>Этот раздел обсуждает программное обеспечение для работы с видео
      из Коллекции Портов FreeBSD. Воспроизведение видео является
      очень активной сферой разработок программного обеспечения и возможности
      различных приложений могут несколько отличаться от описанных
      здесь.</p><p>Во-первых, важно помнить, что многие приложения для работы с
      видео, которые работают на FreeBSD, были разработаны как приложения
      Linux.  Многие из этих приложений все еще бета-качества.  Вот
      некоторые проблемы, которые могут встретиться в работе видео
      пакетов на FreeBSD:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Приложение не может воспроизвести файл, который создало другое
	  приложение.</p></li><li class="listitem"><p>Приложение не может воспроизвести файл, который создало
	  само.</p></li><li class="listitem"><p>Одно и то же приложение на разных машинах, скомпилированное на
	  каждой машине специально для неё, воспроизводит один и тот же файл
	  различно.</p></li><li class="listitem"><p>Кажущийся тривиальным фильтр, например фильтр изменения размеров
	  изображения, приводит к очень плохим <span class="quote"><<<span class="quote">артефактам</span>>></span> из-за
	  неправильной функции изменения размера.</p></li><li class="listitem"><p>Приложение часто не работает (оставляет core-файл).</p></li><li class="listitem"><p>Документация не устанавливается вместе с портом и может быть
	  найдена лишь на сайте или в каталоге порта
	  <code class="filename">work</code>.</p></li></ol></div><p>Многие из этих приложений могут также проявлять
      <span class="quote"><<<span class="quote">линуксизмы</span>>></span>.  Так, это могут быть
      некоторые проблемы, связанные со способом реализации некоторых
      стандартных библиотек в дистрибутивах Linux, или некоторыми
      дополнительными возможностями ядра Linux, которые авторы приложений
      посчитали существующими везде.  Эти проблемы не всегда могут быть
      обнаружены людьми,
      поддерживающими порт (порты), вследствие чего могут возникнуть проблемы,
      сходные с нижеперечисленными:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Использование <code class="filename">/proc/cpuinfo</code> для того, чтобы
	  определить характеристики процессора.</p></li><li class="listitem"><p>Неправильное использование нитей (threads), которое может
	  привести к зависанию программы при завершении вместо нормального
	  выхода.</p></li><li class="listitem"><p>Программного обеспечения, которое обычно используется совместно
	  с данным приложением, ещё нет в Коллекции Портов FreeBSD.</p></li></ol></div><p>Таким образом, разработчики этих приложений должны сотрудничать с
	людьми, поддерживающими порты, для того, чтобы минимизировать количество
	обходных путей, необходимых для портирования.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-mplayer"></a>8.4.2.1. MPlayer</h4></div></div></div><p><span class="application">MPlayer</span> это недавно разработанный и
	быстро развивающийся проигрыватель видео. Задачами команды
	разработчиков <span class="application">MPlayer</span> являются скорость и
	гибкость при работе на Linux и других Unix-системах.  Проект был начат,
	когда его основатель стал сыт по горло плохой производительностью и
	качеством проигрывателей того времени.  Некоторые могут сказать, что
	графический интерфейс был принесён в жертву рационализированному
	дизайну.  Однако, как
	только вы привыкнете к опциям командной строки MPlayer и его управлению
	с клавиатуры, всё будет хорошо.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-mplayer-building"></a>8.4.2.1.1. Компиляция MPlayer</h5></div></div></div><a id="idp82150992" class="indexterm"></a><p><span class="application">MPlayer</span> находится в <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/mplayer/pkg-descr">multimedia/mplayer</a>. MPlayer производит
	  различные тесты аппаратного обеспечения во время процесса компиляции,
	  в результате чего полученные исполняемые модули не могут быть
	  перенесены с одной системы на другую. Поэтому важно собирать его из
	  портов, а не использовать бинарный пакет. Также, при сборке вы можете
	  указать различные установки при помощи параметров командной строки
	  <code class="command">make</code>, как описывается в
	  <code class="filename">Makefile</code> в начале сборки:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/multimedia/mplayer</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
N - O - T - E

Take a careful look into the Makefile in order
to learn how to tune mplayer towards you personal preferences!
For example,
make WITH_GTK1
builds MPlayer with GTK1-GUI support.
If you want to use the GUI, you can either install
/usr/ports/multimedia/mplayer-skins
or download official skin collections from
http://www.mplayerhq.hu/homepage/dload.html
</pre><p>Параметры порта по умолчанию должны подходить большинству
	  пользователей.  Однако, если вам необходим кодек XviD,
	  необходимо указать в командной строке параметр
	  <code class="varname">WITH_XVID</code>.  Устройство
	  DVD по умолчанию также может быть указано в командной
	  строке параметром <code class="varname">WITH_DVD_DEVICE</code>,
	  по умолчанию используется <code class="filename">/dev/acd0</code>.</p><p>На время написания данного документа порт
	  <span class="application">MPlayer'а</span> собирает и устанавливает свою
	  документацию в формате HTML и два исполняемых файла,
	  <code class="command">mplayer</code> и <code class="command">mencoder</code>,
	  который является утилитой для перекодировки видео.</p><p>Документация к <span class="application">MPlayer</span> очень
	  информативна. Если читатель найдет информацию этой главы о аппаратном
	  обеспечении для поддержки видео и интерфейсах недостаточной, то
	  документация <span class="application">MPlayer</span> будет очень
	  хорошим дополнением.  Обязательно уделите время
	  чтению документации <span class="application">MPlayer</span>, если вам
	  нужна информация о поддержке видео под <span class="trademark">UNIX</span>(R).</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-mplayer-using"></a>8.4.2.1.2. Использование MPlayer</h5></div></div></div><a id="idp82165712" class="indexterm"></a><p>Каждый пользователь <span class="application">MPlayer</span> должен
	  создать подкаталог <code class="filename">.mplayer</code> в своем домашнем
	  каталоге. Для того, чтобы его создать, выполните следующие
	  действия:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /usr/ports/multimedia/mplayer</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>make install-user</code></strong></pre><p>Параметры для <code class="command">mplayer</code> перечислены в страничке
      руководства mplayer.  За более подробной информацией вы можете обратиться
      к документации в формате HTML. В этом разделе мы опишем несколько самых
      распространённых случаев использования mplayer.</p><p>Для того, чтобы воспроизвести файл, например
      <code class="filename"><em class="replaceable"><code>testfile.avi</code></em></code> через один из многих видеоинтерфейсов,
      используйте параметр <code class="option">-vo</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mplayer -vo xv testfile.avi</code></strong></pre><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mplayer -vo sdl testfile.avi</code></strong></pre><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mplayer -vo x11 testfile.avi</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -vo dga testfile.avi</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -vo 'sdl:dga' testfile.avi</code></strong></pre><p>Стоит испробовать все варианты интерфейсов, так как их
      производительность зависит от множества факторов и будет заметно меняться
      в зависимости от аппаратного обеспечения.</p><p>Для того, чтобы воспроизвести DVD, замените
      <code class="filename">testfile.avi</code> на <code class="option">dvd://<em class="replaceable"><code>N</code></em> -dvd-device
      <em class="replaceable"><code>DEVICE</code></em></code>, где <em class="replaceable"><code>N</code></em> является номером
      дорожки, с которой следует начать воспроизведение и
      <code class="filename"><em class="replaceable"><code>DEVICE</code></em></code> файл устройства
      привода DVD. Например, для того, чтобы воспроизвести дорожку 3 с
      <code class="filename">/dev/dvd</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -vo xv dvd://3 -dvd-device /dev/dvd</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Устройство DVD по умолчанию может быть определено во время
	сборки порта <span class="application">MPlayer</span> параметром
	<code class="varname">WITH_DVD_DEVICE</code>.  По умолчанию,
	это устройство <code class="filename">/dev/acd0</code>.  Дополнительную
	информацию можно найти в <code class="filename">Makefile</code> порта.</p></div><p>Для того, чтобы остановить, приостановить или продолжить
      воспроизведение, воспользуйтесь привязкой клавиш, информация о которой
      может быть получена посредством запуска <code class="command">mplayer -h</code>, либо
      на страничке документации.</p><p>Дополнительные, достаточно важные параметры воспроизведения:
      <code class="option">-fs -zoom</code>, которые включают полноэкранный режим и
      <code class="option">-framedrop</code>, который улучшает производительность на
      медленных системах.</p><p>Для того, чтобы командная строка запуска mplayer не становилась
      слишком большой, пользователь может создать файл
      <code class="filename">.mplayer/config</code> и установить параметры по умолчанию
      там:</p><pre class="programlisting">vo=xv
fs=yes
zoom=yes</pre><p>Также <code class="command">mplayer</code> может быть использован для
      копирования дорожек DVD в <code class="filename">.vob</code> файлы. Для того,
      чтобы скопировать вторую дорожку DVD необходимо выполнить следующую
      команду:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -dumpstream -dumpfile out.vob dvd://2 -dvd-device /dev/dvd</code></strong></pre><p>Полученный файл, <code class="filename">out.vob</code>, будет представлять
      собой MPEG, с которым можно производить различные действия при помощи
      программ, которые будут описаны далее в этом разделе.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-mencoder"></a>8.4.2.1.3. mencoder</h5></div></div></div><a id="idp82198224" class="indexterm"></a><p>Перед использованием
      <code class="command">mencoder</code>, было бы
      неплохо ближе ознакомится с его параметрами, используя документацию в
      формате HTML. Также существует страничка справочника mplayer, но она не
      очень полезна без HTML документации. Существует бесчисленное множество
      способов улучшения качества, снижения битрейта и изменения формата; и
      некоторые из этих приёмов могут влиять на производительность. Ниже
      приведено несколько примеров использования <code class="command">mencoder</code>.
      Во-первых, простое копирование:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mencoder input.avi -oac copy -ovc copy -o output.avi</code></strong></pre><p>Неправильная комбинация параметров командной строки может привести к
      появлению файлов, которые невозможно будет
      воспроизвести даже <code class="command">mplayer</code>. Поэтому, если вы хотите
      скопировать изображение в файл, лучше использовать только параметр
      <code class="command">mplayer</code> <code class="option">-dumpfile</code>.</p><p>Для того, чтобы преобразовать <code class="filename">input.avi</code> в MPEG4
      со звуком в формате MPEG Audio Layer 3 (MP3) (требуется <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/lame/pkg-descr">audio/lame</a>):</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mencoder input.avi -oac mp3lame -lameopts br=192 \
     -ovc lavc -lavcopts vcodec=mpeg4:vhq -o output.avi</code></strong></pre><p>Эта команда создаст файл, воспроизводимый <code class="command">mplayer</code>
      и <code class="command">xine</code>.</p><p><code class="filename">input.avi</code> может быть заменён на
      <code class="option">dvd://1 -dvd-device /dev/dvd</code> и
      <code class="command">mplayer</code>, запущенный от
      пользователя <code class="systemitem">root</code>, будет преобразовывать дорожку DVD
      напрямую. Так как первый раз, скорее всего, вы будете недовольны
      полученными результатами, всё же рекомендуется копировать
      дорожку в файл и работать затем с файлом.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-xine"></a>8.4.2.2. Проигрыватель хine</h4></div></div></div><p><span class="application">xine</span> - это большой проект, в задачи
      которого входит не только создание решения для видео все-в-одном, но и
      создание базовой библиотеки с возможностью расширения путем
      использования плагинов.  Поставляется он как в виде порта,
      так и в виде пакета, <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/xine/pkg-descr">multimedia/xine</a>.</p><p><span class="application">xine</span> все еще несовершенен, но все-таки это
      хорошее начало. На практике <span class="application">xine</span> требует либо
      быстрого процессора с быстрой видеокартой или поддержки расширения
      XVideo. Графический интерфейс можно использовать, но он все еще немного
      неуклюж.</p><p>На время написания этого документа в поставке
      <span class="application">xine</span> не существовало модуля ввода, который бы
      мог воспроизводить DVD, закодированные по алгоритму CSS. Существуют
      сборки, в которых есть такой модуль, но ни одна из них не входит в
      Коллекцию Портов FreeBSD.</p><p>По сравнению с <span class="application">MPlayer</span>,
      <span class="application">xine</span> является более дружелюбным к
      пользователю, но, в то же время, скрывает более тонкие настройки и
      управление от пользователя.  Также <span class="application">xine</span> лучше
      работает на XVideo интерфейсах.</p><p>По умолчанию, <span class="application">xine</span> запускается с
      графическим интерфейсом.  Для открытия файлов используются меню.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xine</code></strong></pre><p>В качестве альтернативы можно использовать его для запуска файла
      непосредственно, без GUI, следующей командой:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xine -g -p mymovie.avi</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-ports-transcode"></a>8.4.2.3. Утилиты transcode</h4></div></div></div><p>Приложение <span class="application">transcode</span> не является
      проигрывателем. Это набор инструментов для преобразования
      видео и звуковых файлов. При помощи
      <span class="application">transcode</span> можно объединять видеофайлы,
      исправлять поврежденные файлы, использовать инструменты командной строки
      для работы с потоками ввода/вывода
      <code class="filename">stdin/stdout</code>.</p><p>Большое количество опций может быть указано во время
      сборки порта <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/transcode/pkg-descr">multimedia/transcode</a>.
      Для сборки <span class="application">transcode</span> мы рекомендуем
      использовать следующую командную строку:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make WITH_OPTIMIZED_CFLAGS=yes WITH_LIBA52=yes WITH_LAME=yes WITH_OGG=yes \
WITH_MJPEG=yes -DWITH_XVID=yes</code></strong></pre><p>Предложенных установок должно быть достаточно для
      большинства пользователей.</p><p>Для иллюстрации возможностей <code class="command">transcode</code>
      приводится пример, показывающий как сконвертировать файл
      DivX формата в PAL MPEG-1 файл (PAL VCD):</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>transcode -i input.avi -V --export_prof vcd-pal -o output_vcd</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>mplex -f 1 -o output_vcd.mpg output_vcd.m1v output_vcd.mpa</code></strong></pre><p>Итоговый MPEG файл
      <code class="filename">output_vcd.mpg</code> может быть проигран с помощью
      <span class="application">MPlayer</span>.  Вы можете даже записать файл
      на CD-R носитель для создания Video CD.  В этом случае, вам нужно
      будет установить и использовать программы <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/vcdimager/pkg-descr">multimedia/vcdimager</a> и <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrdao/pkg-descr">sysutils/cdrdao</a>.</p><p>Существует страничка справочника для <code class="command">transcode</code>, но
      вы также должны проконсультироваться с <a class="link" href="http://www.transcoding.org/cgi-bin/transcode" target="_top">transcode
      wiki</a> для получения  более детальной информации и
      примеров.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-further-reading"></a>8.4.3. Дальнейшее чтение</h3></div></div></div><p>Различные пакеты видео программ для FreeBSD интенсивно
      разрабатываются.  Очень возможно, что в ближайшем будущем
      многие обсуждаемые здесь проблемы разрешатся.  Это займет время, и те, кто
      желает получить максимум от аудио/видео возможностей FreeBSD, должны
      будут собирать необходимые знания из нескольких списков часто задаваемых
      вопросов и обучающих статей, а также использовать различные
      приложения.  Этот раздел существует для того, чтобы читатель мог получить
      указания на несколько источников дополнительной информации.</p><p><a class="link" href="http://www.mplayerhq.hu/DOCS/" target="_top">Документация
      <span class="application">MPlayer</span></a> очень содержательна в
      техническом плане. Возможно, эти документы должны использоваться любым
      человеком, желающим получить высокий уровень знаний о видео на <span class="trademark">UNIX</span>(R)
      системах. Список рассылки <span class="application">MPlayer</span> враждебен
      для любого, кто не потрудился прочитать документацию, так что, если у вас
      есть желание сообщать о найденных ошибках, прочитайте вначале
      документацию.</p><p><a class="link" href="http://dvd.sourceforge.net/xine-howto/en_GB/html/howto.html" target="_top"><span class="application">xine</span>
      HOWTO</a> содержит главу об улучшении производительности, которая
      применима к любому проигрывателю.</p><p>Наконец, существует несколько многообещающих приложений, которые
      читатель может испробовать:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://avifile.sourceforge.net/" target="_top">Avifile</a>,
	   для которого также существует порт <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/avifile/pkg-descr">multimedia/avifile</a>.</p></li><li class="listitem"><p><a class="link" href="http://www.dtek.chalmers.se/groups/dvd/" target="_top">Ogle</a>, для
	   которого также существует порт <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/ogle/pkg-descr">multimedia/ogle</a>.</p></li><li class="listitem"><p><a class="link" href="http://xtheater.sourceforge.net/" target="_top">Xtheater</a></p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/dvdauthor/pkg-descr">multimedia/dvdauthor</a>, пакет с открытыми
	   текстами для распространения DVD контента.</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sound-mp3.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="multimedia.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="tvcard.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">8.3. Звук MP3 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 8.5. Настройка ТВ тюнеров</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>