<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>12.13. Пометка неустанавливаемого порта как BROKEN, FORBIDDEN или IGNORE</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD по созданию портов" /><link rel="up" href="porting-dads.html" title="Глава 12. Что делать нужно, и что делать нельзя" /><link rel="prev" href="dads-readme.html" title="12.12. README.html" /><link rel="next" href="dads-deprecated.html" title="12.14. Пометка порта на удаление с DEPRECATED или EXPIRATION_DATE" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.13. Пометка неустанавливаемого порта как
      <code class="varname">BROKEN</code>, <code class="varname">FORBIDDEN</code> или
      <code class="varname">IGNORE</code></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dads-readme.html">Пред.</a> </td><th width="60%" align="center">Глава 12. Что делать нужно, и что делать нельзя</th><td width="20%" align="right"> <a accesskey="n" href="dads-deprecated.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-noinstall"></a>12.13. Пометка неустанавливаемого порта как
      <code class="varname">BROKEN</code>, <code class="varname">FORBIDDEN</code> или
      <code class="varname">IGNORE</code></h2></div></div></div><p>В некоторых случаях пользователи не должны допускаться к
      установке порта.  Для того, чтобы сообщить пользователю, что
      порт не следует устанавливать, имеется несколько
      <code class="command">make</code>-переменных, которые могут быть
      использованы в файле <code class="filename">Makefile</code> порта.
      Значения следующих <code class="command">make</code>-переменных будут
      причиной, возвращаемой пользователям, по которой порт
      отказывает в установке.  Пожалуйста, используйте корректные
      <code class="command">make</code>-переменные, так как каждая переменная
      make передает абсолютно различный смысл как для пользователей,
      так и для автоматизированных систем, которые полагаются на
      файлы <code class="filename">Makefile</code>, таких как <a class="link" href="build-cluster.html" title="14.4. Кластер построения портов FreeBSD">кластер построения портов</a>,
      <a class="link" href="keeping-up.html#freshports" title="14.1. FreshPorts">FreshPorts</a> и <a class="link" href="portsmon.html" title="14.6. Система мониторинга портов FreeBSD">portsmon</a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dads-noinstall-variables"></a>12.13.1. Переменные</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">BROKEN</code> предназначена для портов,
	    которые в настоящее время не компилируются, не
	    устанавливаются или не удаляются правильно.  Следует
	    использовать, когда проблема считается временной.</p><p>В особых случаях кластер построения будет продолжать
	    попытки собрать их, чтобы показать, решена ли основная
	    проблема.  (Однако, как правило, кластер запускается без
	    этой возможности.)</p><p>В частности, используйте <code class="varname">BROKEN</code>,
	    когда порт:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>не компилируется</p></li><li class="listitem"><p>не выполняет процесс своей конфигурации или
		установки</p></li><li class="listitem"><p>устанавливает файлы вовне
		<code class="filename">${LOCALBASE}</code></p></li><li class="listitem"><p>не удаляет полностью все свои файлы при
		деинсталляции (тем не менее, это может быть
		допустимо, и подходит для портов, оставляющих после
		себя файлы, измененные пользователем)</p></li></ul></div></li><li class="listitem"><p><code class="varname">FORBIDDEN</code> используется для портов,
	    которые содержат уязвимости в информационной безопасности
	    или являются потенциально вредными в плане обеспечения
	    информационной безопасности системы FreeBSD при установке
	    данного порта (например: заведомо небезопасная программа
	    или программа, которая предоставляет легко взламываемые
	    сервисы).  Порты должны помечаться как
	    <code class="varname">FORBIDDEN</code>, как только в конкретном
	    программном обеспечении обнаружилась уязвимость, но
	    обновление выпущено не было.  В идеальном случае порты
	    должны обновляться максимально быстро после обнаружения
	    уязвимости, чтобы уменьшить число уязвимых хостов FreeBSD
	    (нам нравится иметь репутацию безопасной системы), однако
	    иногда случается значительный временной разрыв между
	    обнаружением уязвимости и выходом обновлённого релиза
	    уязвимого программного обеспечения.  Не помечайте порт
	    как <code class="varname">FORBIDDEN</code>, если причина не вызвана
	    соображениями информационной безопасности.</p></li><li class="listitem"><p><code class="varname">IGNORE</code> предназначена для портов,
	    которые не должны строиться по какой-либо другой причине.
	    Следует использовать для портов, в случае когда проблема
	    считается структурной.  Кластер построения ни при каких
	    условиях не будет строить порты, помеченные как
	    <code class="varname">IGNORE</code>.  В частности, используйте
	    <code class="varname">IGNORE</code>, когда порт:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>компилируется, но работает неправильно</p></li><li class="listitem"><p>не работает на установленной версии FreeBSD</p></li><li class="listitem"><p>имеет дистрибутивный файл, который не может быть
		автоматически извлечен из-за лицензионных
		ограничений</p></li><li class="listitem"><p>не работает с каким-либо другим портом,
		установленным в настоящее время (например, порт
		зависит от <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache20/pkg-descr">www/apache20</a>, но установлен
		<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache22/pkg-descr">www/apache22</a>)</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Если порт будет конфликтовать с уже установленным
	      портом (например, если они устанавливают файл в то же
	      место, но с иным функциональным назначением), то <a class="link" href="conflicts.html" title="5.14. Разрешение конфликтов">используйте вместо этого
		<code class="varname">CONFLICTS</code></a>.
	      <code class="varname">CONFLICTS</code> сам установит значение
	      <code class="varname">IGNORE</code>.</p></div></li><li class="listitem"><p>Если порт нужно пометить как
	    <code class="varname">IGNORE</code> только на некоторых
	    архитектурах, для этого есть две другие удобные
	    переменные, которые автоматически установят для вас
	    значения: <code class="varname">ONLY_FOR_ARCHS</code> и
	    <code class="varname">NOT_FOR_ARCHS</code>.  Примеры:</p><pre class="programlisting">ONLY_FOR_ARCHS=	i386 amd64</pre><pre class="programlisting">NOT_FOR_ARCHS=	ia64 sparc64</pre><p>Собственное сообщение <code class="varname">IGNORE</code> можно
	    задать с использованием
	    <code class="varname">ONLY_FOR_ARCHS_REASON</code> и
	    <code class="varname">NOT_FOR_ARCHS_REASON</code>.  Отдельно для
	    каждой архитектуры это возможно с использованием
	    <code class="varname">ONLY_FOR_ARCHS_REASON_<em class="replaceable"><code>ARCH</code></em></code>
	    и
	    <code class="varname">NOT_FOR_ARCHS_REASON_<em class="replaceable"><code>ARCH</code></em></code>.</p></li><li class="listitem"><p>Если порт загружает и устанавливает исполняемые файлы
	    i386, то следует установить
	    <code class="varname">IA32_BINARY_PORT</code>.  Если эта переменная
	    установлена, будет выполнена проверка доступности
	    каталога <code class="filename">/usr/lib32</code> для библиотек
	    версии IA32 и поддержки IA32 в ядре.  При невыполнении
	    любого из этих условий будет автоматически установлена
	    переменная <code class="varname">IGNORE</code>.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dads-noinstall-notes"></a>12.13.2. Замечания по реализации</h3></div></div></div><p>Строки не следует брать в кавычки.  Также построение
	строки должно несколько различаться из-за способа отображения
	информации пользователю.  Примеры:</p><pre class="programlisting">BROKEN=	fails to link with base -lcrypto</pre><pre class="programlisting">IGNORE=	unsupported on recent versions</pre><p>получаемые в результате следующего вывода
	<code class="command">make describe</code>:</p><pre class="programlisting">===&gt;  foobar-0.1 is marked as broken: fails to link with base -lcrypto.</pre><pre class="programlisting">===&gt;  foobar-0.1 is unsupported on recent versions.</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dads-readme.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="porting-dads.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="dads-deprecated.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">12.12. <code class="filename">README.html</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 12.14. Пометка порта на удаление с <code class="varname">DEPRECATED</code>
      или <code class="varname">EXPIRATION_DATE</code></td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>