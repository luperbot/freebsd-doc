<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>6.5. Использование GNU Autotools</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD по созданию портов" /><link rel="up" href="special.html" title="Глава 6. Особые соглашения" /><link rel="prev" href="building.html" title="6.4. Механизмы построения" /><link rel="next" href="using-gettext.html" title="6.6. Использование GNU gettext" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.5. Использование GNU Autotools</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="building.html">Пред.</a> </td><th width="60%" align="center">Глава 6. Особые соглашения</th><td width="20%" align="right"> <a accesskey="n" href="using-gettext.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-autotools"></a>6.5. Использование GNU Autotools</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-autotools-introduction"></a>6.5.1. Введение</h3></div></div></div><p>Различные инструменты GNU autotools предоставляют
	механизм абстракции для построения частей программного
	обеспечения на широком наборе операционных систем и
	аппаратных архитектур.  Внутри Коллекции Портов отдельный
	порт может использовать эти инструменты при помощи простых
	конструкций:</p><pre class="programlisting">USE_AUTOTOOLS=	<em class="replaceable"><code>tool</code></em>:<em class="replaceable"><code>version</code></em>[:<em class="replaceable"><code>operation</code></em>] ...</pre><p>К моменту написания <em class="replaceable"><code>tool</code></em>
	может быть одним из <code class="literal">libtool</code>,
	<code class="literal">libltdl</code>, <code class="literal">autoconf</code>,
	<code class="literal">autoheader</code>, <code class="literal">automake</code>
	или <code class="literal">aclocal</code>.</p><p><em class="replaceable"><code>version</code></em> указывает конкретную
	версию используемого инструмента (смотрите
	<code class="literal">devel/{automake,autoconf,libtool}[0-9]+</code>
	для получения действительных версий).</p><p><em class="replaceable"><code>operation</code></em> является
	необязательным расширением и указывает на способ
	использования инструмента.</p><p>Одновременно может быть указано несколько инструментов,
	добавляя их все на одной строке или используя конструкцию
	Makefile <code class="literal">+=</code>.</p><p>В заключение, существует специальный инструмент по
	называнию <code class="literal">autotools</code>, который является
	удобной функцией при установке всех доступных версий
	autotools для возможности проведения кросс-разработки.  Это
	также может быть достигнуто путем установки порта
	<code class="literal">devel/autotools</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-libtool"></a>6.5.2. <code class="command">libtool</code></h3></div></div></div><p>Динамические библиотеки, использующие инфраструктуру
	построения GNU, обычно используют
	<span class="application">libtool</span> для настройки компиляции и
	установки динамических библиотек в соответствии с
	особенностями данной операционной системы.  В типичной
	практике используется копирование встроенного в приложение
	<code class="command">libtool</code>.  Если вам нужно использовать
	внешнюю команду <code class="command">libtool</code>, то вы можете
	использовать версию, поставляемую Коллекцией Портов:</p><pre class="programlisting">USE_AUTOTOOLS=	libtool:<em class="replaceable"><code>version</code></em>[:env]</pre><p>При отсутствии дополнительных операций,
	<code class="literal">libtool:version</code> сообщает инфраструктуре
	построения о применении патча к сценарию configure с
	установленной в системе копией <code class="command">libtool</code>.
	Означает использование <code class="varname">GNU_CONFIGURE</code>.
	Более того, некоторые переменные make и оболочки shell будут
	назначены для дальнейшего использования этим портом.
	Подробности смотрите в
	<code class="filename">bsd.autotools.mk</code>.</p><p>При использовании операции <code class="literal">:env</code> будет
	настроено только окружение.</p><p>Наконец, <code class="varname">LIBTOOLFLAGS</code> и
	<code class="varname">LIBTOOLFILES</code> можно установить по желанию,
	чтобы переопределить наиболее вероятные аргументы для
	<code class="command">libtool</code> и файлы, предназначенные для
	изменения.  Большинству портов это скорее всего не
	понадобится.  Для дальнейших подробностей смотрите
	<code class="filename">bsd.autotools.mk</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-libltdl"></a>6.5.3. <code class="command">libltdl</code></h3></div></div></div><p>Некоторые порты задействуют пакет с библиотекой
	<code class="command">libltdl</code>, которая является частью комплекта
	<code class="command">libtool</code>.  Использование этой библиотеки не
	вызывает автоматическое использование самой
	<code class="command">libtool</code>, и, таким образом, обеспечивается
	отдельная конструкция.</p><pre class="programlisting">USE_AUTOTOOLS=	libltdl:<em class="replaceable"><code>version</code></em></pre><p>Всё, что в настоящее время она делает, это добавление
	<code class="varname">LIB_DEPENDS</code> для подходящего порта
	<code class="command">libltdl</code>, потому она предоставляется как
	удобная функция для помощи в устранении всяких зависимостей
	от портов autotools вне инфраструктуры
	<code class="varname">USE_AUTOTOOLS</code>.  Для этого инструмента не
	существует необязательных операций.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-autoconf"></a>6.5.4. <code class="command">autoconf</code> и
	<code class="command">autoheader</code></h3></div></div></div><p>Вместо сценария configure некоторые порты содержат шаблон
	autoconf в файле <code class="filename">configure.ac</code>.  Вы
	можете использовать следующие присвоения, чтобы позволить
	<code class="command">autoconf</code> создать сценарий configure, а
	<code class="command">autoheader</code> создать заголовки шаблона для
	использования в сценарии configure.</p><pre class="programlisting">USE_AUTOTOOLS=	autoconf:<em class="replaceable"><code>version</code></em>[:env]</pre><p>и</p><pre class="programlisting">USE_AUTOTOOLS=	autoheader:<em class="replaceable"><code>version</code></em></pre><p>которые также подразумевают использование
	<code class="literal">autoconf:version</code>.</p><p>Аналогично команде <code class="command">libtool</code> включение
	необязательной операции <code class="literal">:env</code> всего лишь
	настраивает окружение для дальнейшего использования.  Без
	этого выполняется наложение патчей и переконфигурирование
	порта.</p><p>Дополнительные необязательные переменные
	<code class="varname">AUTOCONF_ARGS</code> и
	<code class="varname">AUTOHEADER_ARGS</code> можно переопределить в
	<code class="filename">Makefile</code> порта, если указано явным
	образом.  Как и с эквивалентами <code class="command">libtool</code>,
	большинству портов это вряд ли понадобится.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-automake"></a>6.5.5. <code class="command">automake</code> и
	<code class="command">aclocal</code></h3></div></div></div><p>Некоторые пакеты содержат только файлы
	<code class="filename">Makefile.am</code>.  Они должны быть
	преобразованы в файлы <code class="filename">Makefile.in</code> с
	использованием <span class="application">automake</span> и
	дальнейшей обработкой <code class="command">configure</code> для
	получения настоящего <code class="filename">Makefile</code>.</p><p>Аналогично, иногда пакеты не поставляются с вложенными
	файлами <code class="filename">aclocal.m4</code>, снова требуемых для
	построения программного обеспечения.  Их можно получить
	командой <code class="command">aclocal</code>, которая просматривает
	<code class="filename">configure.ac</code> или
	<code class="filename">configure.in</code>.</p><p><code class="command">aclocal</code> имеет похожую связь с
	<code class="command">automake</code>, как у
	<code class="command">autoheader</code> с <code class="command">autoconf</code>,
	что описано в предыдущей главе.  <code class="command">aclocal</code>
	подразумевает использование <code class="command">automake</code>,
	таким образом, мы имеем:</p><pre class="programlisting">USE_AUTOTOOLS=	automake:<em class="replaceable"><code>version</code></em>[:<em class="replaceable"><code>env</code></em>]</pre><p>и</p><pre class="programlisting">USE_AUTOTOOLS=	aclocal:<em class="replaceable"><code>version</code></em></pre><p>которые также подразумевают использование
	<code class="literal">automake:version</code>.</p><p>Также как и для <code class="command">libtool</code> и
	<code class="command">autoconf</code>, подключение необязательной
	операции <code class="literal">:env</code> всего лишь устанавливает
	окружение для дальнейшего пользования.  Без этого выполняется
	реконфигурирование этого порта.</p><p>Как и в случае с <code class="command">autoconf</code> и
	<code class="command">autoheader</code>, обе команды
	<code class="command">automake</code> и <code class="command">aclocal</code>
	соответственно имеют необязательные переменные
	<code class="varname">AUTOMAKE_ARGS</code> и
	<code class="varname">ACLOCAL_ARGS</code>, которые при необходимости
	можно переопределить в <code class="filename">Makefile</code>
	порта.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="building.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="using-gettext.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">6.4. Механизмы построения </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 6.6. Использование GNU <code class="literal">gettext</code></td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>