<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>6.19. Использование wxWidgets</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD по созданию портов" /><link rel="up" href="special.html" title="Глава 6. Особые соглашения" /><link rel="prev" href="using-sdl.html" title="6.18. Использование SDL" /><link rel="next" href="using-lua.html" title="6.20. Использование Lua" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.19. Использование <span class="application">wxWidgets</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-sdl.html">Пред.</a> </td><th width="60%" align="center">Глава 6. Особые соглашения</th><td width="20%" align="right"> <a accesskey="n" href="using-lua.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-wx"></a>6.19. Использование <span class="application">wxWidgets</span></h2></div></div></div><p>Эта глава описывает статус библиотек
      <span class="application">wxWidgets</span> в дереве портов и их
      интеграцию с системой портов.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-introduction"></a>6.19.1. Введение</h3></div></div></div><p>Существует множество версий библиотек
	<span class="application">wxWidgets</span>, конфликтующих между
	собой (устанавливают файлы под тем же именем).  В дереве
	портов эта проблема решена путем установки каждой версии под
	собственным названием с использованием номера версии в
	качестве суффикса.</p><p>Очевидным недостатком этого является необходимость
	изменения каждого приложения для нахождения искомой версии.
	К счастью, большинство приложений для определения нужного
	компилятора и флагов компоновки вызывают сценарий
	<code class="command">wx-config</code>.  Для каждой доступной версии
	этот сценарий имеет своё имя.  Большинство приложений
	учитывают переменную окружения или принимают аргумент
	configure для указания, какой сценарий
	<code class="command">wx-config</code> следует вызывать.  На все
	остальные приходится накладывать патч.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-version"></a>6.19.2. Выбор версии</h3></div></div></div><p>Для того, чтобы заставить ваш порт использовать
	конкретную версию <span class="application">wxWidgets</span>,
	существует две доступные для определения переменные (если
	определена только одна, то вторая примет значение по
	умолчанию):</p><div class="table"><a id="wx-ver-sel-table"></a><div class="table-title">Таблица 6.25. Переменные для выбора версии
	  <span class="application">wxWidgets</span></div><div class="table-contents"><table summary="Переменные для выбора версии&#10;&#9;  wxWidgets" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Переменная</th><th>Описание</th><th>Значение по умолчанию</th></tr></thead><tbody><tr><td><code class="varname">USE_WX</code></td><td>Перечень версий, которые порт может
		использовать</td><td>Все доступные версии</td></tr><tr><td><code class="varname">USE_WX_NOT</code></td><td>Перечень версий, которые порт не может
		использовать</td><td>Нет</td></tr></tbody></table></div></div><br class="table-break" /><p>Перечень доступных версий
	<span class="application">wxWidgets</span> и соответствующих им
	портов в дереве:</p><div class="table"><a id="idp78042448"></a><div class="table-title">Таблица 6.26. Доступные версии
	  <span class="application">wxWidgets</span></div><div class="table-contents"><table summary="Доступные версии&#10;&#9;  wxWidgets" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Версия</th><th>Порт</th></tr></thead><tbody><tr><td><code class="literal">2.4</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/wxgtk24/pkg-descr">x11-toolkits/wxgtk24</a></td></tr><tr><td><code class="literal">2.6</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/wxgtk26/pkg-descr">x11-toolkits/wxgtk26</a></td></tr><tr><td><code class="literal">2.8</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/wxgtk28/pkg-descr">x11-toolkits/wxgtk28</a></td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Версии начиная с <code class="literal">2.5</code> также
	  поставляются с Unicode и устанавливается подчиненным портом
	  с названием как как у обычного, но с суффиксом
	  <code class="literal">-unicode</code>, но этим можно управлять при
	  помощи переменных (смотрите
	  <a class="xref" href="using-wx.html#wx-unicode" title="6.19.4. Unicode">Раздел 6.19.4, <<Unicode>></a>).</p></div><p>Переменные в <a class="xref" href="using-wx.html#wx-ver-sel-table" title="Таблица 6.25. Переменные для выбора версии wxWidgets">Таблица 6.25, <<Переменные для выбора версии
	  <span class="application">wxWidgets</span>>></a> можно
	установить в одну или более следующих комбинаций, разделенных
	пробелами:</p><div class="table"><a id="idp78053456"></a><div class="table-title">Таблица 6.27. Определение версии для
	  <span class="application">wxWidgets</span></div><div class="table-contents"><table summary="Определение версии для&#10;&#9;  wxWidgets" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Описание</th><th>Пример</th></tr></thead><tbody><tr><td>Единичная версия</td><td><code class="literal">2.4</code></td></tr><tr><td>Восходящий диапазон</td><td><code class="literal">2.4+</code></td></tr><tr><td>Нисходящий диапазон</td><td><code class="literal">2.6-</code></td></tr><tr><td>Полный диапазон (обязан быть восходящим)</td><td><code class="literal">2.4-2.6</code></td></tr></tbody></table></div></div><br class="table-break" /><p>Кроме того, существует несколько переменных для выбора
	предпочитаемых версий из перечня доступных.  Они могут быть
	установлены в несколько версий, первая из которых будет иметь
	наибольший приоритет.</p><div class="table"><a id="idp78066768"></a><div class="table-title">Таблица 6.28. Переменные для выбора предпочитаемых версий
	  <span class="application">wxWidgets</span></div><div class="table-contents"><table summary="Переменные для выбора предпочитаемых версий&#10;&#9;  wxWidgets" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Название</th><th>Предназначение</th></tr></thead><tbody><tr><td><code class="varname">WANT_WX_VER</code></td><td>порт</td></tr><tr><td><code class="varname">WITH_WX_VER</code></td><td>пользователь</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-components"></a>6.19.3. Выбор компонентов</h3></div></div></div><p>Существуют другие приложения, которые, хотя и не являются
	библиотеками <span class="application">wxWidgets</span>, но в тоже
	время относятся к ним.  Эти приложения можно указать в
	переменной <code class="varname">WX_COMPS</code>.  Доступны следующие
	компоненты:</p><div class="table"><a id="idp78075216"></a><div class="table-title">Таблица 6.29. Доступные компоненты
	  <span class="application">wxWidgets</span></div><div class="table-contents"><table summary="Доступные компоненты&#10;&#9;  wxWidgets" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Название</th><th>Описание</th><th>Ограничение версии</th></tr></thead><tbody><tr><td><code class="literal">wx</code></td><td>основная библиотека</td><td>нет</td></tr><tr><td><code class="literal">contrib</code></td><td>сторонние библиотеки</td><td><code class="literal">нет</code></td></tr><tr><td><code class="literal">python</code></td><td><span class="application">wxPython</span>
		(привязки к
		<span class="application">Python</span>)</td><td><code class="literal">2.4-2.6</code></td></tr><tr><td><code class="literal">mozilla</code></td><td><span class="application">wxMozilla</span></td><td><code class="literal">2.4</code></td></tr><tr><td><code class="literal">svg</code></td><td><span class="application">wxSVG</span></td><td><code class="literal">2.6</code></td></tr></tbody></table></div></div><br class="table-break" /><p>Тип добавляемой зависимости при выборе каждого компонента
	может быть указан вручную путем добавления суффикса,
	отделенного точкой с запятой.  Если таковой отсутствует, но
	будет использовано значение по умолчанию (смотрите <a class="xref" href="using-wx.html#wx-def-dep-types" title="Таблица 6.31. Типы зависимости wxWidgets, используемые по умолчанию">Таблица 6.31, <<Типы зависимости <span class="application">wxWidgets</span>,
	  используемые по умолчанию>></a>).  Доступные типы
	зависимости:</p><div class="table"><a id="idp78098256"></a><div class="table-title">Таблица 6.30. Доступные типы зависимости
	  <span class="application">wxWidgets</span></div><div class="table-contents"><table summary="Доступные типы зависимости&#10;&#9;  wxWidgets" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Название</th><th>Описание</th></tr></thead><tbody><tr><td><code class="literal">build</code></td><td>Компонент требуется для построения, эквивалентен
		<code class="varname">BUILD_DEPENDS</code></td></tr><tr><td><code class="literal">run</code></td><td>Компонент требуется для запуска, эквивалентен
		<code class="varname">RUN_DEPENDS</code></td></tr><tr><td><code class="literal">lib</code></td><td>Компонент требуется для построения и запуска,
		эквивалентен <code class="varname">LIB_DEPENDS</code></td></tr></tbody></table></div></div><br class="table-break" /><p>Значения по умолчанию для компонентов подробно
	рассматриваются в следующей таблице:</p><div class="table"><a id="wx-def-dep-types"></a><div class="table-title">Таблица 6.31. Типы зависимости <span class="application">wxWidgets</span>,
	  используемые по умолчанию</div><div class="table-contents"><table summary="Типы зависимости wxWidgets,&#10;&#9;  используемые по умолчанию" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Компонент</th><th>Тип зависимости</th></tr></thead><tbody><tr><td><code class="literal">wx</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">contrib</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">python</code></td><td><code class="literal">run</code></td></tr><tr><td><code class="literal">mozilla</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">svg</code></td><td><code class="literal">lib</code></td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="wx-components-example"></a><div class="example-title">Пример 6.8. Выбор компонентов
	  <span class="application">wxWidgets</span></div><div class="example-contents"><p>Следующий фрагмент относится к порту, в котором
	  используется <span class="application">wxWidgets</span> версии
	  <code class="literal">2.4</code> с его сторонними
	  библиотеками.</p><pre class="programlisting">USE_WX=		2.4
WX_COMPS=	wx contrib</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-unicode"></a>6.19.4. Unicode</h3></div></div></div><p>Библиотека <span class="application">wxWidgets</span>
	поддерживает Unicode начиная с версии <code class="literal">2.5</code>.
	В дереве портов доступны обе версии и могут быть выбраны с
	использованием следующих переменных:</p><div class="table"><a id="wx-unicode-var-table"></a><div class="table-title">Таблица 6.32. Переменные для выбора версии
	  <span class="application">wxWidgets</span> с Unicode</div><div class="table-contents"><table summary="Переменные для выбора версии&#10;&#9;  wxWidgets с Unicode" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Переменная</th><th>Описание</th><th>Предназначение</th></tr></thead><tbody><tr><td><code class="varname">WX_UNICODE</code></td><td>Порт работает <span class="emphasis"><em>только</em></span> с
		версией Unicode</td><td>порт</td></tr><tr><td><code class="varname">WANT_UNICODE</code></td><td>Порт работает с обеими версиями, но предпочитает
		версию с Unicode</td><td>порт</td></tr><tr><td><code class="varname">WITH_UNICODE</code></td><td>Порт будет использовать версию Unicode</td><td>пользователь</td></tr><tr><td><code class="varname">WITHOUT_UNICODE</code></td><td>Порт будет использовать обычную версию, если это
		поддерживается (когда <code class="varname">WX_UNICODE</code>
		не определена)</td><td>пользователь</td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="warning"><h3 class="admontitle">Предупреждение: </h3><p xmlns="http://www.w3.org/1999/xhtml">Не используйте <code class="varname">WX_UNICODE</code> для
	  портов, которые могут использовать обе версии.  Если вы
	  хотите, чтобы порт по умолчанию использовал Unicode,
	  определите вместо этого
	  <code class="varname">WANT_UNICODE</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-version-detection"></a>6.19.5. Обнаружение установленных версий</h3></div></div></div><p>Для обнаружения установленной версии вам необходимо
	задать переменную <code class="varname">WANT_WX</code>.  Если вы не
	присвоите ей определенную версию, то компоненты получат
	суффикс версии.  Переменная <code class="varname">HAVE_WX</code> будет
	заполнена после обнаружения.</p><div class="example"><a id="wx-ver-det-example"></a><div class="example-title">Пример 6.9. Обнаружение установленных версий и компонентов
	  <span class="application">wxWidgets</span></div><div class="example-contents"><p>Следующий фрагмент может быть использован в порту,
	  который использует <span class="application">wxWidgets</span>, в
	  случае если он установлен или выбран соответствующий
	  параметр.</p><pre class="programlisting">WANT_WX=	yes

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITH_WX) || !empty(PORT_OPTIONS:MWX) || !empty(HAVE_WX:Mwx-2.4)
USE_WX=			2.4
CONFIGURE_ARGS+=	--enable-wx
.endif</pre><p>Следующий фрагмент может быть использован в порту,
	  который задействует поддержку
	  <span class="application">wxPython</span>, в случае если он
	  установлен или выбран соответствующий параметр, в
	  дополнение к <span class="application">wxWidgets</span>, обе
	  версии <code class="literal">2.6</code>.</p><pre class="programlisting">USE_WX=		2.6
WX_COMPS=	wx
WANT_WX=	2.6

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITH_WXPYTHON) || !empty(PORT_OPTIONS:MWXPYTHON) || !empty(HAVE_WX:Mpython)
WX_COMPS+=		python
CONFIGURE_ARGS+=	--enable-wxpython
.endif</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-defined-variables"></a>6.19.6. Переменные для определения</h3></div></div></div><p>Следующие переменные доступны в порту (после определения
	одной из переменных из
	<a class="xref" href="using-wx.html#wx-ver-sel-table" title="Таблица 6.25. Переменные для выбора версии wxWidgets">Таблица 6.25, <<Переменные для выбора версии
	  <span class="application">wxWidgets</span>>></a>).</p><div class="table"><a id="idp78157136"></a><div class="table-title">Таблица 6.33. Переменные, определенные для портов, использующих
	  <span class="application">wxWidgets</span></div><div class="table-contents"><table summary="Переменные, определенные для портов, использующих&#10;&#9;  wxWidgets" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Название</th><th>Описание</th></tr></thead><tbody><tr><td><code class="varname">WX_CONFIG</code></td><td>Путь к сценарию
		<span class="application">wxWidgets</span>
		<code class="command">wx-config</code> (с другим
		именем)</td></tr><tr><td><code class="varname">WXRC_CMD</code></td><td>Путь к программе
		<span class="application">wxWidgets</span>
		<code class="command">wxrc</code> (с другим именем)</td></tr><tr><td><code class="varname">WX_VERSION</code></td><td>Версия <span class="application">wxWidgets</span>,
		которая будет использоваться (например,
		<code class="literal">2.6</code>)</td></tr><tr><td><code class="varname">WX_UNICODE</code></td><td>Если не определена, но Unicode будет
		использоваться, то она будет определена</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-premk"></a>6.19.7. Обработка в <code class="filename">bsd.port.pre.mk</code></h3></div></div></div><p>Если вам нужно использовать переменные для запуска команд
	сразу после подключения <code class="filename">bsd.port.pre.mk</code>,
	то вам нужно определить <code class="varname">WX_PREMK</code>.</p><div xmlns="" class="important"><h3 class="admontitle">Важно: </h3><p xmlns="http://www.w3.org/1999/xhtml">Если вы определите <code class="varname">WX_PREMK</code>, то
	  версия, зависимости, компоненты и заданные переменные не
	  изменяться, в случае вы изменили переменные порта
	  <span class="application">wxWidgets</span>
	  <span class="emphasis"><em>после</em></span> подключения
	  <code class="filename">bsd.port.pre.mk</code>.</p></div><div class="example"><a id="wx-premk-example"></a><div class="example-title">Пример 6.10. Использование переменных
	  <span class="application">wxWidgets</span> в командах</div><div class="example-contents"><p>Следующий фрагмент иллюстрирует использование
	  переменной <code class="varname">WX_PREMK</code> посредством запуска
	  сценария <code class="command">wx-config</code> для получения строки
	  с полной версией с присвоением ее переменной и передачей в
	  программу.</p><pre class="programlisting">USE_WX=		2.4
WX_PREMK=	yes

.include &lt;bsd.port.pre.mk&gt;

.if exists(${WX_CONFIG})
VER_STR!=	${WX_CONFIG} --release

PLIST_SUB+=	VERSION="${VER_STR}"
.endif</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Переменные <span class="application">wxWidgets</span> можно
	  безопасно использовать в командах внутри целей без
	  необходимости в использовании
	  <code class="varname">WX_PREMK</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-additional-config-args"></a>6.19.8. Дополнительные параметры
	<code class="command">configure</code></h3></div></div></div><p>Некоторые сценарии GNU <code class="command">configure</code> не
	могут найти <span class="application">wxWidgets</span> только с
	установленной переменной окружения
	<code class="literal">WX_CONFIG</code>, требуя дополнительные
	параметры.  Для их передачи можно использовать переменную
	<code class="varname">WX_CONF_ARGS</code>.</p><div class="table"><a id="idp78184784"></a><div class="table-title">Таблица 6.34. Допустимые значения
	  <code class="varname">WX_CONF_ARGS</code></div><div class="table-contents"><table summary="Допустимые значения&#10;&#9;  WX_CONF_ARGS" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Возможное значение</th><th>Получаемый параметр</th></tr></thead><tbody><tr><td><code class="literal">absolute</code></td><td><code class="literal">--with-wx-config=${WX_CONFIG}</code></td></tr><tr><td><code class="literal">relative</code></td><td><code class="literal">--with-wx=${LOCALBASE}
		  --with-wx-config=${WX_CONFIG:T}</code></td></tr></tbody></table></div></div><br class="table-break" /></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-sdl.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="using-lua.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">6.18. Использование SDL </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 6.20. Использование <span class="application">Lua</span></td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>