<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>3.2. Создание информационных файлов</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD по созданию портов" /><link rel="up" href="quick-porting.html" title="Глава 3. Быстрое портирование" /><link rel="prev" href="quick-porting.html" title="Глава 3. Быстрое портирование" /><link rel="next" href="porting-checksum.html" title="3.3. Создание файла с контрольной суммой" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.2. Создание информационных файлов</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="quick-porting.html">Пред.</a> </td><th width="60%" align="center">Глава 3. Быстрое портирование</th><td width="20%" align="right"> <a accesskey="n" href="porting-checksum.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="porting-desc"></a>3.2. Создание информационных файлов</h2></div></div></div><p>Имеется два информационных файла, которые требуются для
      любого порта, вне зависимости от того, является ли он пакетом
      или нет.  Это <code class="filename">pkg-descr</code> и
      <code class="filename">pkg-plist</code>.  Префикс
      <code class="filename">pkg-</code> отличает их от других файлов.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71941840"></a>3.2.1. <code class="filename">pkg-descr</code></h3></div></div></div><p>Это более подробное краткое описание порта.  От одного до
	нескольких абзацев, кратко описывающих, что представляет
	собой порт, будет достаточно.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Это <span class="emphasis"><em>не</em></span> руководство и не
	  подробнейшее описание того, как использовать или
	  компилировать порт!  <span class="emphasis"><em>Пожалуйста, будьте
	  внимательны при копировании текста из
	  <code class="filename">README</code> или страниц справочника
	  </em></span>; слишком часто они не являются кратким
	  описанием порта или имеют неудобный формат (например,
	  страницы справочника выровнены пробелами, что особенно
	  плохо смотрится с моноширинными шрифтами).</p></div><p>Хорошо составленный <code class="filename">pkg-descr</code>
	описывает порт достаточно полно, чтобы пользователю не
	приходилось сверяться с документацией или посещать вебсайт
	для понимания того, что делает данное программное
	обеспечение, чем оно может быть полезно или какие хорошие
	функции у него имеются.  Упоминание про определённые
	требования, такие как используемый графический
	инструментарий, тяжёлые зависимости, окружение для запуска
	или используемый язык программирования помогут пользователям
	определиться, будет ли этот порт для них работать.</p><p>Включите сюда URL официальной домашней страницы Интернет.
	Перед <span class="emphasis"><em>одним</em></span> из сайтов (выберите
	основной) добавьте <code class="literal">WWW:</code> (с последующим
	единичным пробелом) для того, чтобы вспомогательные утилиты
	работали правильно.  Если URI является корнем сайта или
	каталогом, то значение должно быть дополнено косой
	чертой.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Если указанная для порта веб-страница не доступна,
	  попытайтесь сперва поискать, был ли официальный сайт
	  перемещён, переименован или размещён в другом месте.</p></div><p>Следующий пример показывает, как должен выглядеть ваш
	<code class="filename">pkg-descr</code>:</p><pre class="programlisting">This is a port of oneko, in which a cat chases a poor mouse all over
the screen.
 :
(etc.)

WWW: http://www.oneko.org/</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71971664"></a>3.2.2. <code class="filename">pkg-plist</code></h3></div></div></div><p>Здесь перечисляются все файлы, устанавливаемые портом.
	Его также называют <span class="quote"><<<span class="quote">списком для упаковки</span>>></span>,
	потому что пакет генерируется упаковкой файлов, которые здесь
	указаны.  Имена путей указываются относительно установочного
	префикса (обычно <code class="filename">/usr/local</code>).  Если порт
	во время установки создает каталоги, убедитесь, что добавлены
	строки <code class="literal">@dirrm</code> для удаления каталогов при
	удалении пакета.</p><p>Вот маленький пример:</p><pre class="programlisting">bin/oneko
man/man1/oneko.1.gz
lib/X11/app-defaults/Oneko
lib/X11/oneko/cat1.xpm
lib/X11/oneko/cat2.xpm
lib/X11/oneko/mouse.xpm
@dirrm lib/X11/oneko</pre><p>Обратитесь к странице справочной системы по команде
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg-create&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg-create</span>(8)</span></a> с подробным описанием формата списка
	упаковки.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Рекомендуется, чтобы имена файлов в этом списке были
	  отсортированы в алфавитном порядке.  Это позволит
	  значительно облегчить сверку изменений при обновлении
	  порта.</p></div><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Создание списка упаковки вручную может оказаться весьма
	  трудоёмкой задачей.  Если порт устанавливает большое
	  количество файлов, раздел об <a class="link" href="plist-autoplist.html" title="7.5. Автоматическое создание списка упаковки">автоматическом построении
	  списка упаковки</a> может помочь сэкономить
	  время.</p></div><p>Существует только одно исключение, когда у порта может
	отсутствовать <code class="filename">pkg-plist</code>.  Если порт
	устанавливает лишь несколько файлов, а возможно, и каталогов,
	то они могут быть перечислены в переменных
	<code class="varname">PLIST_FILES</code> и
	<code class="varname">PLIST_DIRS</code>, соответственно, внутри файла
	<code class="filename">Makefile</code> порта.  К примеру, мы можем
	обойтись без файла <code class="filename">pkg-plist</code> у
	приведённого выше порта <code class="filename">oneko</code>, добавив
	следующие строки в <code class="filename">Makefile</code>:</p><pre class="programlisting">PLIST_FILES=	bin/oneko \
		man/man1/oneko.1.gz \
		lib/X11/app-defaults/Oneko \
		lib/X11/oneko/cat1.xpm \
		lib/X11/oneko/cat2.xpm \
		lib/X11/oneko/mouse.xpm
PLIST_DIRS=	lib/X11/oneko</pre><p>Конечно, переменная <code class="varname">PLIST_DIRS</code> не
	должна задаваться, если порт не устанавливает никаких
	каталогов.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Несколько портов могут совместно использовать общий
	  каталог.  В этом случае <code class="varname">PLIST_DIRS</code>
	  следует заменить на <code class="varname">PLIST_DIRSTRY</code>, так
	  чтобы каталог удалялся только если он пуст, а иначе
	  игнорировался.  Использование <code class="varname">PLIST_DIRS</code>
	  и <code class="varname">PLIST_DIRSTRY</code> аналогично
	  <code class="literal">@dirrm</code> и <code class="literal">@dirrmtry</code> в
	  <code class="filename">pkg-plist</code>, описание которых входит в
	  <a class="xref" href="plist-cleaning.html#plist-dir-cleaning" title="7.2.1. Очистка пустых каталогов">Раздел 7.2.1, <<Очистка пустых каталогов>></a>.</p></div><p>Обратной стороной такого способа перечисления файлов и
	каталогов порта является невозможность использования
	последовательностей команд, описанных в <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg-create&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg-create</span>(8)</span></a>.
	Поэтому он подходит для простых портов, что делает их ещё
	более простыми.  Одновременно с этим положительным моментом
	является уменьшение количества файлов в коллекции портов.
	Пожалуйста, подумайте над использованием этой техники, прежде
	чем создавать <code class="filename">pkg-plist</code>.</p><p>Далее мы увидим, как можно использовать файлы
	<code class="filename">pkg-plist</code> и
	<code class="varname">PLIST_FILES</code> выполнения <a class="link" href="plist.html" title="Глава 7. Продвинутые практики pkg-plist">более сложных задач</a>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="quick-porting.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="quick-porting.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="porting-checksum.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Глава 3. Быстрое портирование </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 3.3. Создание файла с контрольной суммой</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>