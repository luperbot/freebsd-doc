<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>5.12. Опции для Makefile</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Руководство FreeBSD по созданию портов" /><link rel="up" href="makefiles.html" title="Глава 5. Настройка файла Makefile" /><link rel="prev" href="makefile-info.html" title="5.11. Файлы в формате info" /><link rel="next" href="makefile-wrkdir.html" title="5.13. Задание рабочего каталога" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5.12. Опции для Makefile</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="makefile-info.html">Пред.</a> </td><th width="60%" align="center">Глава 5. Настройка файла Makefile</th><td width="20%" align="right"> <a accesskey="n" href="makefile-wrkdir.html">След.</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-options"></a>5.12. Опции для Makefile</h2></div></div></div><p>Многие приложения могут быть построены в различных
      конфигурациях и с дополнительной функциональностью.  Например,
      выбор естественного (человеческого) языка, GUI против командной
      строки или типа используемой базы данных.  Пользователи могут
      нуждаться в различных конфигурациях, отличных от используемой
      по умолчанию, поэтому в системе портов предусмотрен механизм,
      позволяющий автору порта управлять сборкой того или иного
      варианта конфигурации.  Правильная поддержка этих
      необязательных параметров облегчает пользователям жизнь и даёт
      два или более порта по цене одного.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76587216"></a>5.12.1. Knobs</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76587984"></a>5.12.1.1. <code class="varname">WITH_<em class="replaceable"><code>*</code></em></code>
	  и
	  <code class="varname">WITHOUT_<em class="replaceable"><code>*</code></em></code></h4></div></div></div><p>Эти переменные предназначены для установки системным
	  администратором.  Многие из них стандартизованы в файле
	  <a class="link" href="http://svnweb.FreeBSD.org/ports/head/KNOBS?view=markup" target="_top"><code class="filename">ports/KNOBS</code></a>.</p><p>При создании порта не давайте имя для knob, специфичное
	  для данного приложения.  На примере порта Avahi,
	  используйте <code class="varname">WITHOUT_MDNS</code> вместо
	  <code class="varname">WITHOUT_AVAHI_MDNS</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Не стоит рассчитывать, что
	    <code class="varname">WITH_<em class="replaceable"><code>*</code></em></code>
	    обязательно имеет соответствующую переменную
	    <code class="varname">WITHOUT_<em class="replaceable"><code>*</code></em></code>,
	    и наоборот.  В общем случае, предполагается значение по
	    умолчанию.</p></div><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Если обратное не указано, то проверяется только факт
	    установки самих переменных, но не их конкретное значение
	    типа <code class="literal">YES</code> или
	    <code class="literal">NO</code>.</p></div><div class="table"><a id="idp76595408"></a><div class="table-title">Таблица 5.3. Основные переменные
	    <code class="varname">WITH_<em class="replaceable"><code>*</code></em></code> и
	    <code class="varname">WITHOUT_<em class="replaceable"><code>*</code></em></code></div><div class="table-contents"><table summary="Основные переменные&#10;&#9;    WITH_* и&#10;&#9;    WITHOUT_*" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Переменная</th><th>Значение</th></tr></thead><tbody><tr><td><code class="varname">WITH_OPENSSL_BASE</code></td><td>Использовать версию OpenSSL из базовой
		  системы.</td></tr><tr><td><code class="varname">WITH_OPENSSL_PORT</code></td><td>Устанавливает версию OpenSSL из <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/openssl/pkg-descr">security/openssl</a>, даже если в
		  базовой системе последняя версия.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76603216"></a>5.12.1.2. Наименование KNOBS</h4></div></div></div><p>Портеры должны использовать так называемые knobs для
	  помощи конечным пользователям и для поддержания количества
	  наименований knobs в небольшом количестве.  Список
	  популярных названий knobs можно найти в файле <a class="link" href="http://svnweb.FreeBSD.org/ports/head/KNOBS?view=markup" target="_top"><code class="filename">KNOBS</code></a></p><p>Названия knobs должны отражать, что это такое и что
	  выполняет.  Если у порта имеется библиотечный префикс в
	  <code class="varname">PORTNAME</code>, то он должен присутствовать в
	  названии knobs.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76610000"></a>5.12.2. <code class="varname">OPTIONS</code></h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76610768"></a>5.12.2.1. Описание</h4></div></div></div><p>При установке порта переменные
	  <code class="varname">OPTIONS_*</code> предоставляют пользователю
	  окно диалога с отображением доступных параметров, с записью
	  выбранных параметров в файл
	  <code class="filename">/var/db/ports/${UNIQUENAME}/options</code>.
	  Эти опции повторно используются при следующем построении
	  порта.</p><p>Когда пользователь запускает
	  <code class="command">make config</code> (или запускает впервые
	  <code class="command">make build</code>), инфраструктура выполняет
	  проверку существования файла
	  <code class="filename">/var/db/ports/${UNIQUENAME}/options</code>.
	  Если этот файл не существует, то используются значения
	  <code class="varname">OPTIONS_*</code> и отображается диалоговое
	  окно, в котором эти параметры можно включить или выключить.
	  Затем сохраняется файл опций <code class="filename">options</code>,
	  и выбранные переменные используются при построении
	  порта.</p><p>Если новая версия порта добавляет новые значения
	  <code class="varname">OPTIONS</code>, то пользователю будет
	  представлено окно диалога с сохраненными заполненными
	  значениями старых <code class="varname">OPTIONS.</code></p><p><code class="command">make showconfig</code> отображает
	  сохраненную конфигурацию.  Для удаления сохраненной
	  конфигурации используйте
	  <code class="command">make rmconfig</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76617168"></a>5.12.2.2. Синтаксис</h4></div></div></div><p><code class="varname">OPTIONS_DEFINE</code> содержит список
	  используемых <code class="varname">OPTIONS</code>.  Они независимы
	  друг от друга и не сгруппированы:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1 OPT2</pre><p>Далее после определения следует описание
	  <code class="varname">OPTIONS</code> (не является обязательным, но
	  настоятельно рекомендуется):</p><pre class="programlisting">OPT1_DESC=	Describe OPT1
OPT2_DESC=	Describe OPT2
OPT3_DESC=	Describe OPT3
OPT4_DESC=	Describe OPT4
OPT5_DESC=	Describe OPT5
OPT6_DESC=	Describe OPT6</pre><div xmlns="" class="tip"><h3 class="admontitle">Подсказка: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">ports/Mk/bsd.options.desc.mk</code>
	    содержит описание множества наиболее используемых
	    <code class="varname">OPTIONS</code>; переопределять их, как
	    правило, не нужно.</p></div><div xmlns="" class="tip"><h3 class="admontitle">Подсказка: </h3><p xmlns="http://www.w3.org/1999/xhtml">При описании параметров старайтесь представить себя
	    на месте пользователя: <span class="quote"><<<span class="quote">Что это делает?</span>>></span> и
	    <span class="quote"><<<span class="quote">Для чего бы я захотел включить это?</span>>></span>  Не
	    делайте простое повторение названия.  Например, описание
	    параметра <code class="literal">NLS</code> как <span class="quote"><<<span class="quote">include NLS
	      support</span>>></span> (<span class="quote"><<<span class="quote">включить поддержку NLS</span>>></span>)
	    не поможет пользователю, который уже видит название
	    параметра, но может не знать, что это означает.  Описав
	    его как <span class="quote"><<<span class="quote">Native Language Support via gettext
	    utilities</span>>></span> (<span class="quote"><<<span class="quote">Поддержка национального языка
	    через утилиты gettext</span>>></span>), вы поможете пользователю
	    гораздо больше.</p></div><p><code class="varname">OPTIONS</code> можно группировать в виде
	  переключателей, для которых разрешен выбор единственного
	  варианта в каждой группе:</p><pre class="programlisting">OPTIONS_SINGLE=		SG1
OPTIONS_SINGLE_SG1=	OPT3 OPT4</pre><p><code class="varname">OPTIONS</code> можно группировать в виде
	  переключателей, для которых разрешен выбор единственного
	  варианта (или ни одного) в каждой группе:</p><pre class="programlisting">OPTIONS_RADIO=		RG1
OPTIONS_RADIO_RG1=	OPT7 OPT8</pre><p><code class="varname">OPTIONS</code> также можно группировать в
	  виде списков со множественным выбором, для которых обязан
	  быть включен <span class="emphasis"><em>по крайней мере один</em></span> из
	  параметров:</p><pre class="programlisting">OPTIONS_MULTI=		MG1
OPTIONS_MULTI_MG1=	OPT5 OPT6</pre><p><code class="varname">OPTIONS</code> также можно группировать в
	  виде списков со множественным выбором, для которых могут
	  быть включены любые параметры, включая отсутствие
	  выбора:</p><pre class="programlisting">OPTIONS_GROUP=		GG1
OPTIONS_GROUP_GG1=	OPT9 OPT10</pre><p>По умолчанию <code class="varname">OPTIONS</code> находится в
	  выключенном положении, если при этом оно также отсутствует
	  в списке <code class="varname">OPTIONS_DEFAULT</code>:</p><pre class="programlisting">OPTIONS_DEFAULT=	OPT1 OPT3 OPT6</pre><p>Определения <code class="varname">OPTIONS</code> обязаны быть
	  до подключения <code class="filename">bsd.port.options.mk</code>.
	  Переменные <code class="varname">PORT_OPTIONS</code> могут быть
	  проверены только после подключения
	  <code class="filename">bsd.port.options.mk</code>.  Вместо этого
	  также можно использовать подключение
	  <code class="filename">bsd.port.pre.mk</code>, что все еще широко
	  используется в портах, написанных до появления
	  <code class="filename">bsd.port.options.mk</code>.  Но имейте в
	  виду, что некоторые переменные, обычно, это некоторые флаги
	  <code class="varname">USE_*</code>, после подключения
	  <code class="filename">bsd.port.pre.mk</code> будут работать не так,
	  как этого от них ожидают.</p><div class="example"><a id="ports-options-simple-use"></a><div class="example-title">Пример 5.10. Простое использование
	    <code class="varname">OPTIONS</code></div><div class="example-contents"><pre class="programlisting">OPTIONS_DEFINE=	FOO BAR
FOO_DESC=	Enable option foo
BAR_DESC=	Support feature bar

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MFOO}
CONFIGURE_ARGS+=--with-foo
.else
CONFIGURE_ARGS+=--without-foo
.endif

.if ${PORT_OPTIONS:MBAR}
RUN_DEPENDS+=	bar:${PORTSDIR}/bar/bar
.endif

.include &lt;bsd.port.mk&gt;</pre></div></div><br class="example-break" /><div class="example"><a id="ports-options-check-unset"></a><div class="example-title">Пример 5.11. Проверка незаданных значений
	    <code class="varname">OPTIONS</code></div><div class="example-contents"><pre class="programlisting">.if ! ${PORT_OPTIONS:MEXAMPLES}
CONFIGURE_ARGS+=--without-examples
.endif</pre></div></div><br class="example-break" /><div class="example"><a id="ports-options-practical-use"></a><div class="example-title">Пример 5.12. Пример реального использования
	    <code class="varname">OPTIONS</code></div><div class="example-contents"><pre class="programlisting">OPTIONS_DEFINE=		EXAMPLES

OPTIONS_SINGLE=		BACKEND
OPTIONS_SINGLE_BACKEND=	MYSQL PGSQL BDB

OPTIONS_MULTI=		AUTH
OPTIONS_MULTI_AUTH=	LDAP PAM SSL

EXAMPLES_DESC=		Install extra examples
MYSQL_DESC=		Use MySQL as backend
PGSQL_DESC=		Use PostgreSQL as backend
BDB_DESC=		Use Berkeley DB as backend
LDAP_DESC=		Build with LDAP authentication support
PAM_DESC=		Build with PAM support
SSL_DESC=		Build with OpenSSL support

OPTIONS_DEFAULT=	PGSQL LDAP SSL

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MPGSQL}
USE_PGSQL=		yes
CONFIGURE_ARGS+=	--with-postgres
.else
CONFIGURE_ARGS+=	--without-postgres
.endif

.if ${PORT_OPTIONS:MICU}
LIB_DEPENDS+=	libicuuc.so:${PORTSDIR}/devel/icu
.endif

.if ! ${PORT_OPTIONS:MEXAMPLES}
CONFIGURE_ARGS+=	--without-examples
.endif

# Проверка других параметров OPTIONS

.include &lt;bsd.port.mk&gt;</pre></div></div><br class="example-break" /></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76648144"></a>5.12.2.3. Параметры по умолчанию</h4></div></div></div><p>Следующие параметры по умолчанию всегда
	  включены.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">DOCS</code> - построение и
	      установка документации.</p></li><li class="listitem"><p><code class="literal">NLS</code> -
	      интернационализация.</p></li><li class="listitem"><p><code class="literal">EXAMPLES</code> - построение и
	      установка примеров использования.</p></li><li class="listitem"><p><code class="literal">IPV6</code> - поддержка протокола
	      IPv6.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Нет необходимости добавлять эти параметры в
	    <code class="varname">OPTIONS_DEFAULT</code>.  Тем не менее, чтобы
	    отобразить их в окне диалога выбора параметров, они
	    должны быть добавлены в
	    <code class="varname">OPTIONS_DEFINE</code>.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76659664"></a>5.12.3. Функция автоматической активации</h3></div></div></div><p>При использовании сценария GNU configure, следите за тем,
	какие необязательные функции задействуются посредством
	автоматической активации.  Отключайте явным образом те
	необязательные функции, которые вы не хотели бы использовать,
	через передачу соответствующих
	<code class="literal">--without-xxx</code> или
	<code class="literal">--disable-xxx</code> в переменной
	<code class="varname">CONFIGURE_ARGS</code>.</p><div class="example"><a id="idp76666064"></a><div class="example-title">Пример 5.13. Неправильное управление опцией</div><div class="example-contents"><pre class="programlisting">.if ${PORT_OPTIONS:MFOO}
LIB_DEPENDS+=		libfoo.so:${PORTSDIR}/devel/foo
CONFIGURE_ARGS+=	--enable-foo
.endif</pre></div></div><br class="example-break" /><p>В приведенном выше примере представьте себе библиотеку
	libfoo, установленную в системе.  Пользователь не желает,
	чтобы приложение использовало libfoo, и поэтому он выключает
	соответствующую опцию в диалоге <code class="literal">make
	  config</code>.  Но сценарий configure приложения
	определяет наличие библиотеки в системе и включает ее
	поддержку в итоговый исполняемый файл.  Теперь, когда
	пользователь решит удалить libfoo из системы, система портов
	позволит это сделать (т.к. зависимость от libfoo не была
	записана), но приложение перестанет работать.</p><div class="example"><a id="idp76667984"></a><div class="example-title">Пример 5.14. Правильное управление опцией</div><div class="example-contents"><pre class="programlisting">.if ${PORT_OPTIONS:MFOO}
LIB_DEPENDS+=		libfoo.so:${PORTSDIR}/devel/foo
CONFIGURE_ARGS+=	--enable-foo
.else
CONFIGURE_ARGS+=	--disable-foo
.endif</pre></div></div><br class="example-break" /><p>Во втором примере библиотека libfoo отключена явным
	образом.  Сценарий configure не включает соответствующие
	функции в приложении, несмотря на присутствие библиотеки в
	системе.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">При определенных условиях сокращенный синтаксис записи
	  условий может вызывать проблемы со сложными конструкциями.
	  Если вы получаете ошибки, такие как <code class="literal">Malformed
	    conditional</code>, то может быть использован
	  альтернативный синтаксис.</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">.if !empty(VARIABLE:MVALUE)
# as an alternative to
.if ${VARIABLE:MVALUE}</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76671184"></a>5.12.4. Вспомогательные макросы</h3></div></div></div><p>Существует несколько макросов, упрощающих запись условных
	значений, которые отличаются в зависимости от набора
	параметров.</p><p>Если переменная <code class="varname">OPTIONS_SUB</code> имеет
	значение <code class="literal">yes</code>, то каждый из указанных в
	<code class="varname">OPTIONS_DEFINE</code> параметров будет добавлен в
	<code class="varname">PLIST_SUB</code>.  Следующая запись:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPTIONS_SUB=	yes</pre><p>соответствует:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
PLIST_SUB+=	OPT1=""
.else
PLIST_SUB+=	OPT1="@comment "
.endif</pre><p><code class="varname">X_CONFIGURE_ENABLE</code> дописывает в
	<code class="varname">CONFIGURE_ARGS</code> строку
	<code class="literal">--enable-${X_CONFIGURE_ENABLE}</code> или
	<code class="literal">--disable-${X_CONFIGURE_ENABLE}</code> в
	соответствии с состоянием <code class="varname">X</code>.  Следующая
	запись:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_CONFIGURE_ENABLE=	test</pre><p>соответствует:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
CONFIGURE_ARGS+=	--enable-test
.else
CONFIGURE_ARGS+=	--disable-test
.endif</pre><p><code class="varname">X_CONFIGURE_WITH</code> дописывает в
	<code class="varname">CONFIGURE_ARGS</code> строку
	<code class="literal">--with-${X_CONFIGURE_WITH}</code> или
	<code class="literal">--without-${X_CONFIGURE_WITH}</code> в
	соответствии с состоянием <code class="varname">X</code>.  Следующая
	запись:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_CONFIGURE_WITH=	test</pre><p>соответствует:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
CONFIGURE_ARGS+=	--with-test
.else
CONFIGURE_ARGS+=	--without-test
.endif</pre><p>Значение переменной <code class="varname">X_CONFIGURE_ON</code>
	будет дописано в <code class="varname">CONFIGURE_ARGS</code> в
	соответствии с состоянием <code class="varname">X</code>.  Следующая
	запись:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_CONFIGURE_ON=	--add-test</pre><p>соответствует:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
CONFIGURE_ARGS+=	--add-test
.endif</pre><p>Значение переменной <code class="varname">X_CONFIGURE_OFF</code>
	будет дописано в <code class="varname">CONFIGURE_ARGS</code> в
	соответствии с состоянием <code class="varname">X</code>.  Следующая
	запись:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_CONFIGURE_OFF=	--no-test</pre><p>соответствует:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
.include &lt;bsd.port.options.mk&gt;
.if ! ${PORT_OPTIONS:MOPT1}
CONFIGURE_ARGS+=	--no-test
.endif</pre><p>Значение переменной <code class="varname">X_CMAKE_ON</code> будет
	дописано в <code class="varname">CMAKE_ARGS</code> в соответствии с
	состоянием <code class="varname">X</code>.  Следующая запись:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_CMAKE_ON=	-DTEST:BOOL=true</pre><p>соответствует:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
CMAKE_ARGS+=	-DTEST:BOOL=true
.endif</pre><p>Значение переменной <code class="varname">X_CMAKE_OFF</code> будет
	дописано в <code class="varname">CMAKE_ARGS</code> в соответствии с
	состоянием <code class="varname">X</code>.  Следующая запись:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_CMAKE_OFF=	-DTEST:BOOL=false</pre><p>соответствует:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ! ${PORT_OPTIONS:MOPT1}
CMAKE_ARGS+=	-DTEST:BOOL=false
.endif</pre><p>Для любой из следующих переменных:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">ALL_TARGET</code></p></li><li class="listitem"><p><code class="varname">CATEGORIES</code></p></li><li class="listitem"><p><code class="varname">CFLAGS</code></p></li><li class="listitem"><p><code class="varname">CPPFLAGS</code></p></li><li class="listitem"><p><code class="varname">CXXFLAGS</code></p></li><li class="listitem"><p><code class="varname">CONFIGURE_ENV</code></p></li><li class="listitem"><p><code class="varname">DISTFILES</code></p></li><li class="listitem"><p><code class="varname">EXTRA_PATCHES</code></p></li><li class="listitem"><p><code class="varname">INSTALL_TARGET</code></p></li><li class="listitem"><p><code class="varname">LDFLAGS</code></p></li><li class="listitem"><p><code class="varname">MAKE_ARGS</code></p></li><li class="listitem"><p><code class="varname">MAKE_ENV</code></p></li><li class="listitem"><p><code class="varname">PATCH_SITES</code></p></li><li class="listitem"><p><code class="varname">PATCHFILES</code></p></li><li class="listitem"><p><code class="varname">PLIST_FILES</code></p></li><li class="listitem"><p><code class="varname">PLIST_DIRS</code></p></li><li class="listitem"><p><code class="varname">PLIST_DIRSTRY</code></p></li><li class="listitem"><p><code class="varname">USES</code></p></li></ul></div><p>Значение переменной <code class="varname">X_ABOVEVARIABLE</code>
	будет дописано в <code class="varname">ABOVEVARIABLE</code> в
	соответствии с состоянием <code class="varname">X</code>.  Следующая
	запись:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_USES=	gmake
OPT1_CFLAGS=	-DTEST</pre><p>соответствует:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
USES+=		gmake
CFLAGS+=	-DTEST
.endif</pre><p>Если установлена <code class="varname">X_ABOVEVARIABLE_OFF</code>,
	то флаг <code class="literal">ABOVEVARIABLE</code> будет автоматически
	выставлен при выключенном параметре <code class="literal">X</code>.
	Например:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_USES_OFF=gmake</pre><p>соответствует:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ! ${PORT_OPTIONS:MOPT1}
USES+=	gmake
.endif</pre><p>Для любого из следующих типов зависимости:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">PKG_DEPENDS</code></p></li><li class="listitem"><p><code class="varname">EXTRACT_DEPENDS</code></p></li><li class="listitem"><p><code class="varname">PATCH_DEPENDS</code></p></li><li class="listitem"><p><code class="varname">FETCH_DEPENDS</code></p></li><li class="listitem"><p><code class="varname">BUILD_DEPENDS</code></p></li><li class="listitem"><p><code class="varname">LIB_DEPENDS</code></p></li><li class="listitem"><p><code class="varname">RUN_DEPENDS</code></p></li></ul></div><p>Значение переменной <code class="varname">X_ABOVEVARIABLE</code>
	будет дописано в <code class="varname">ABOVEVARIABLE</code> в
	соответствии с состоянием <code class="varname">X</code>.  Следующая
	запись:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_LIB_DEPENDS=	liba.so:${PORTSDIR}/devel/a</pre><p>соответствует:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1

.include &lt;bsd.port.options.mk&gt;

.if ${PORT_OPTIONS:MOPT1}
LIB_DEPENDS+=	liba.so:${PORTSDIR}/devel/a
.endif</pre><p>Если установлена <code class="varname">X_ABOVEVARIABLE_OFF</code>,
	то зависимость типа <code class="literal">ABOVEVARIABLE</code> будет
	добавлена при выключенном параметре <code class="literal">X</code>.
	Например:</p><pre class="programlisting">OPTIONS_DEFINE=	OPT1
OPT1_LIB_DEPENDS_OFF= liba.so:${PORTSDIR}/devel/a</pre><p>соответствует:</p><pre class="programlisting">OPTIONS_DEFINE= OPT1

.include &lt;bsd.port.options.mk&gt;

. if ! ${PORT_OPTIONS:MOPT1}
LIB_DEPENDS+=	liba.so:${PORTSDIR}/devel/a
.endif</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="makefile-info.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="makefiles.html">Наверх</a></td><td width="40%" align="right"> <a accesskey="n" href="makefile-wrkdir.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">5.11. Файлы в формате info </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> 5.13. Задание рабочего каталога</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>