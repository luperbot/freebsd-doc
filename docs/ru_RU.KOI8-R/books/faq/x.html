<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>Глава 11. X Window System и виртуальные консоли</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Часто задаваемые вопросы по FreeBSD 8.X, 9.X и 10.X" /><link rel="up" href="index.html" title="Часто задаваемые вопросы по FreeBSD 8.X, 9.X и 10.X" /><link rel="prev" href="admin.html" title="Глава 10. Системное администрирование" /><link rel="next" href="networking.html" title="Глава 12. Работа в сети" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Глава 11. X Window System и виртуальные консоли</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="admin.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="networking.html">След.</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x"></a>Глава 11. X Window System и виртуальные консоли</h1></div></div></div><div class="qandaset"><a id="idp76597328"></a><dl><dt>11.1. <a href="x.html#idp76597584">Что такое X Window System?</a></dt><dt>11.2. <a href="x.html#idp76603216">Я хочу запустить Xorg, как это сделать?</a></dt><dt>11.3. <a href="x.html#idp76613328">Я попытался запустить X, но получил
	    сообщение No devices detected. после
	    ввода команды
	    startx.  Что мне теперь делать?</a></dt><dt>11.4. <a href="x.html#idp76622544">Почему моя мышь не работает с X?</a></dt><dt>11.5. <a href="x.html#idp76643792">У моей мыши есть колёсико.  Могу ли я его использовать
	    при работе в X?</a></dt><dt>11.6. <a href="x.html#idp76653648">Как заставить работать тачпад Synaptics в X?</a></dt><dt>11.7. <a href="x.html#idp76664144">Как использовать удалённые X-дисплеи?</a></dt><dt>11.8. <a href="x.html#idp76668240">Что такое виртуальные консоли и как изменить их
	    количество?</a></dt><dt>11.9. <a href="x.html#idp76685264">Как осуществляется доступ к виртуальным консолям из X?</a></dt><dt>11.10. <a href="x.html#idp76698960">Как запустить XDM во время
	    загрузки?</a></dt><dt>11.11. <a href="x.html#idp76725968">При запуске xconsole выдаётся сообщение
	    Couldn't open console.</a></dt><dt>11.12. <a href="x.html#idp76784208">Моя мышь PS/2 в X работает неправильно.</a></dt><dt>11.13. <a href="x.html#idp76788304">Как поменять местами кнопки мыши?</a></dt><dt>11.14. <a href="x.html#idp76791632">Как установить экранную заставку и где такие заставки можно
	    найти?</a></dt><dt>11.15. <a href="x.html#idp76794320">Можно ли в X использовать клавишу
	    Windows?</a></dt><dt>11.16. <a href="x.html#idp76819152">Как заставить работать аппаратное ускорение 3D-графики для
	    OpenGL(R)?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp76597584"></a><a id="whatis-X"></a><p><strong>11.1.</strong></p></td><td align="left" valign="top"><p>Что такое X Window System?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>X Window System (обычно <code class="literal">X11</code>)
	    является наиболее общедоступной оконной системой, которая
	    может работать на <span class="trademark">UNIX</span>(R) и <span class="trademark">UNIX</span>(R)-подобных системах, в том
	    числе и во FreeBSD.  Разработкой стандартов на используемый
	    <a class="link" href="http://en.wikipedia.org/wiki/X_Window_System_core_protocol" target="_top">X-протокол</a>
	    занимается организация <a class="link" href="http://www.x.org/wiki/" target="_top">The X.Org Foundation</a>,
	    с текущей эталонной реализацией version 11 release
	    7.7, поэтому название часто сокращается до
	    <code class="literal">X11</code>.</p><p>Для разных архитектур и операционных систем существует
	    множество реализаций этой системы.  Реализацию кода для
	    серверной части называют <code class="literal">X-сервером</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76603216"></a><a id="running-X"></a><p><strong>11.2.</strong></p></td><td align="left" valign="top"><p>Я хочу запустить Xorg, как это сделать?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Для установки Xorg выполните одно из действий:</p><p>Используйте мета-порт <code class="filename">x11/xorg</code>, который выполняет
	    построение и установку всех компонентов Xorg.</p><p>Используйте <code class="filename">x11/xorg-minimal</code>, который
	    выполняет построение и установку только необходимых
	    компонентов Xorg.</p><p>Установите Xorg из пакетов FreeBSD.</p><pre class="screen"><strong class="userinput"><code><code class="prompt">#</code> pkg install xorg</code></strong></pre><p>После установки Xorg следуйте указаниям в разделе <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/x-config.html" target="_top">Конфигурация
	    X11</a> Руководства FreeBSD.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76613328"></a><a id="running-X-securelevels"></a><p><strong>11.3.</strong></p></td><td align="left" valign="top"><p>Я <span class="emphasis"><em>попытался</em></span> запустить X, но получил
	    сообщение <span class="errorname">No devices detected.</span> после
	    ввода команды
	    <code class="command">startx</code>.  Что мне теперь делать?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Вероятно, в системе установлен повышенный уровень
	    безопасности (<code class="literal">securelevel</code>).  При
	    повышенном уровне защиты систему X запустить невозможно,
	    потому что X требуются права на операции записи в
	    устройство <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=io&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">io</span>(4)</span></a>.  Дополнительная информация
	    находится на странице Справочника <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>.</p><p>Существует два решения проблемы: установить значение
	    <code class="literal">securelevel</code> обратно в ноль или
	    запускать <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a> (или любой другой оконный менеджер)
	    во время загрузки, до того как повышается значение
	    <code class="literal">securelevel</code>.</p><p>Обратитесь к <a class="xref" href="x.html#xdm-boot" title="11.10.">Вопрос: 11.10</a> для получения более
	    полной информации о запуске <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a> во время загрузки.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76622544"></a><a id="x-and-moused"></a><p><strong>11.4.</strong></p></td><td align="left" valign="top"><p>Почему моя мышь не работает с X?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>При использовании стандартного драйвера консоли
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syscons&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">syscons</span>(4)</span></a> во FreeBSD можно включить поддержку указателя
	    мыши во всех виртуальных экранах.  Во избежание конфликтов
	    с X, драйвер <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syscons&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">syscons</span>(4)</span></a> поддерживает виртуальное
	    устройство <code class="filename">/dev/sysmouse</code>.  Все события
	    от реального устройства мыши пишутся в устройство
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysmouse&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sysmouse</span>(4)</span></a> через <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">moused</span>(8)</span></a>.  Чтобы использовать
	    мышь на одной и более виртуальных консолях, и при этом
	    продолжать использовать X, посмотрите <a class="xref" href="compatibility-kbd-mice.html#moused" title="4.4.1.">Вопрос: 4.4.1</a> и настройте
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">moused</span>(8)</span></a>.</p><p>Затем отредактируйте
	    <code class="filename">/etc/X11/xorg.conf</code>,
	    чтобы в нём были следующие строки:</p><pre class="programlisting">Section "InputDevice"
   Option	  "Protocol" "SysMouse"
   Option	  "Device" "/dev/sysmouse"
.....</pre><p>Начиная с версии Xorg 7.4 раздел
	    <code class="literal">InputDevice</code> в файле
	    <code class="filename">xorg.conf</code> игнорируется, и вместо него
	    используется механизм автоматически определяемых устройств.
	    Чтобы восстановить прежнее поведение, добавьте в раздел
	    <code class="literal">ServerLayout</code> или
	    <code class="literal">ServerFlags</code> такую строку:</p><pre class="programlisting">Option "AutoAddDevices" "false"</pre><p>Некоторые предпочитают использовать в X устройство
	    <code class="filename">/dev/mouse</code>.  Чтобы оно работало, файл
	    устройства <code class="filename">/dev/mouse</code> должен являться
	    ссылкой на <code class="filename">/dev/sysmouse</code> (посмотрите
	    справку по <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysmouse&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sysmouse</span>(4)</span></a>).  Это можно сделать, добавив
	    следующую строку в <code class="filename">/etc/devfs.conf</code>
	    (посмотрите справку по <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs.conf</span>(5)</span></a>):</p><pre class="programlisting">link    sysmouse    mouse</pre><p>Ссылка может быть создана путем перезапуска <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a>
	    с использованием следующей команды (из под пользователя
	    <code class="systemitem">root</code>):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service devfs restart</code></strong></pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76643792"></a><a id="x-and-wheel"></a><p><strong>11.5.</strong></p></td><td align="left" valign="top"><p>У моей мыши есть колёсико.  Могу ли я его использовать
	    при работе в X?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Да, если X настроена для использования 5-кнопочной
	    мыши.  Для этого добавьте строчки <code class="literal">Buttons
	      5</code> и <code class="literal">ZAxisMapping 4 5</code> в
	    раздел <span class="quote"><<<span class="quote">InputDevice</span>>></span> файла
	    <code class="filename">/etc/X11/xorg.conf</code> как показано
	    в этом примере:</p><pre class="programlisting">Section "InputDevice"
   Identifier      "Mouse1"
   Driver	  "mouse"
   Option	  "Protocol" "auto"
   Option	  "Device" "/dev/sysmouse"
   Option	  "Buttons" "5"
   Option	  "ZAxisMapping" "4 5"
EndSection</pre><p>Для использования мыши в
	    <span class="application">Emacs</span> также добавьте в
	    <code class="filename">~/.emacs</code> следующие строки:</p><pre class="programlisting">;; wheel mouse
(global-set-key [mouse-4] 'scroll-down)
(global-set-key [mouse-5] 'scroll-up)</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76653648"></a><a id="x-and-synaptic"></a><p><strong>11.6.</strong></p></td><td align="left" valign="top"><p>Как заставить работать тачпад Synaptics в X?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Для его работы понадобится настроить некоторые вещи.</p><p>Чтобы использовать драйвер synaptics из Xorg, для
	    начала удалите строку moused_enable из
	    <code class="filename">rc.conf</code>.</p><p>Для включения synaptics добавьте следующую строку в
	    <code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">hw.psm.synaptics_support="1"</pre><p>Добавьте следующее в
	    <code class="filename">/etc/X11/xorg.conf</code>:</p><pre class="programlisting">Section "InputDevice"
Identifier  "Touchpad0"
Driver      "synaptics"
Option      "Protocol" "psm"
Option      "Device" "/dev/psm0"
EndSection</pre><p>И не забыть добавить следующее в раздел
	    <span class="quote"><<<span class="quote">ServerLayout</span>>></span>:</p><pre class="programlisting">InputDevice    "Touchpad0" "SendCoreEvents"</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76664144"></a><a id="no-remote-x11"></a><p><strong>11.7.</strong></p></td><td align="left" valign="top"><p>Как использовать удалённые X-дисплеи?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Из соображений обеспечения информационной безопасности
	    открывать удалённые окна на машине по умолчанию запрещено.</p><p>Для включения этой возможности запустите
	    <span class="application">X</span> с аргументом
	    <code class="option">-listen_tcp</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>startx -listen_tcp</code></strong></pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76668240"></a><a id="virtual-console"></a><p><strong>11.8.</strong></p></td><td align="left" valign="top"><p>Что такое виртуальные консоли и как изменить их
	    количество?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Виртуальные консоли предоставляют несколько
	    одновременных сеансов работы с той же самой машиной без
	    установки какой бы то ни было сети или запуска X.</p><p>При запуске системы после вывода сообщений этапа
	    загрузки на консоль выдаётся приглашение для входа в
	    систему.  Введите своё имя и пароль, чтобы начать работу
	    на первой виртуальной консоли.</p><p>Чтобы запустить ещё один сеанс, скажем, чтобы
	    заглянуть в документацию по программе или для чтения
	    электронной почты во время ожидания завершения передачи
	    данных по FTP, нажмите <span class="keycap"><strong>F2</strong></span>, удерживая
	    <span class="keycap"><strong>Alt</strong></span>.  Это отобразит приглашение на
	    второй виртуальной консоли.  Чтобы вернуться к
	    первоначальному сеансу, нажмите <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>.</p><p>По умолчанию во FreeBSD задействованы восемь виртуальных
	    консолей, а комбинации клавиш <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>,
	    <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F2</strong></span>, <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F3</strong></span> и далее служат для
	    переключения между ними.</p><p>Чтобы увеличить количество виртуальных консолей,
	    отредактируйте <code class="filename">/etc/ttys</code> (смотрите
	    страницу Справочника <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a>), добавив туда записи
	    для терминалов с именами от <code class="filename">ttyv8</code> до
	    <code class="filename">ttyvc</code> после комментария про
	    <span class="quote"><<<span class="quote">Virtual terminals</span>>></span>:</p><pre class="programlisting"># Edit the existing entry for ttyv8 in /etc/ttys and change
# "off" to "on".
ttyv8   "/usr/libexec/getty Pc"	 xterm  on secure
ttyv9   "/usr/libexec/getty Pc"	 xterm  on secure
ttyva   "/usr/libexec/getty Pc"	 xterm  on secure
ttyvb   "/usr/libexec/getty Pc"	 xterm  on secure</pre><p>Чем больше виртуальных терминалов, тем больше ресурсов
	    используется.  Это может привести к проблемам на системах
	    с 8 Мбайт ОЗУ или меньше.  Подумайте о смене статуса
	    консолей с <code class="literal">secure</code> на
	    <code class="literal">insecure</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Примечание: </h3><p xmlns="http://www.w3.org/1999/xhtml">Во FreeBSD до версии 9.0 использовался тип терминала
	      <span class="quote"><<<span class="quote">cons25</span>>></span> вместо <span class="quote"><<<span class="quote">xterm</span>>></span>.
	      При добавлении в <code class="filename">/etc/ttys</code> новых
	      записей используйте существующий формат.</p></div><div xmlns="" class="important"><h3 class="admontitle">Важно: </h3><p xmlns="http://www.w3.org/1999/xhtml">Чтобы запустить сервер X, нужно зарезервировать под
	      него хотя бы один виртуальный терминал со значением
	      <code class="literal">off</code>.  Это означает, что под
	      виртуальные консоли можно отвести только одиннадцать
	      функциональных клавиш, и ещё одна остаётся за
	      X-сервером.</p></div><p>Например, чтобы запустить X и 11 виртуальных консолей,
	    нужно настроить двенадцатый виртуальный терминал:</p><pre class="programlisting">ttyvb   "/usr/libexec/getty Pc"	 xterm  off secure</pre><p>Самым простым способом активировать виртуальные
	    консоли является перезагрузка.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76685264"></a><a id="vty-from-x"></a><p><strong>11.9.</strong></p></td><td align="left" valign="top"><p>Как осуществляется доступ к виртуальным консолям из X?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Используйте комбинацию клавиш
	    <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F<em class="replaceable"><code>n</code></em></strong></span>
	    для переключения обратно в виртуальную консоль.  Нажмите
	    <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>,
	    чтобы вернуться на первую виртуальную консоль.</p><p>После того, как вы оказались в текстовой консоли,
	    используйте комбинации
	    <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F<em class="replaceable"><code>n</code></em></strong></span> для переключения между ними.</p><p>Чтобы вернуться в сеанс работы X, переключитесь
	    в виртуальную консоль, на которой запущена X Window.
	    Если X был запущен из командной строки с использованием
	    команды <code class="command">startx</code>, то сеанс работы X будет
	    привязан к следующей неиспользуемой виртуальной консоли, а
	    не к той текстовой консоли, с которой он был запущен.
	    В случае восьми активных виртуальных терминалов X будет
	    работать на девятом, поэтому используйте комбинацию
	    <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F9</strong></span>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76698960"></a><a id="xdm-boot"></a><p><strong>11.10.</strong></p></td><td align="left" valign="top"><p>Как запустить <span class="application">XDM</span> во время
	    загрузки?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Есть две философские школы, проповедующие различные методы
	    запуска <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a>.  Последователи одного течения запускают
	    <code class="command">xdm</code> из <code class="filename">/etc/ttys</code>
	    (посмотрите <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a>), используя приводимый пример, тогда
	    как другие вставляют запуск <code class="command">xdm</code> в скрипт
	    <code class="filename">rc.local</code> (посмотрите справку по <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a>)
	    или <code class="filename">X</code>, помещая последний в каталог
	    <code class="filename">/usr/local/etc/rc.d</code>.
	    Оба метода
	    равноправны, и один из них может работать в ситуациях, с
	    которыми не справляется другой и наоборот.  В обоих случаях
	    результат один и тот же: X выводит графическое приглашение
	    для входа в систему.</p><p>Плюсом метода с использованием <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a> является
	    документирование того, на каком vty будет запущен X и то,
	    что ответственность за перезапуск X-сервера при завершении
	    сеанса работы лежит на процессе <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>.  Метод с
	    использованием <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> позволяет просто прекратить работу
	    xdm командой <code class="command">kill</code> <code class="command">xdm</code>,
	    если при запуске X возникли какие-нибудь проблемы.</p><p>Из <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> <code class="command">xdm</code> должен быть запущен
	    без аргументов.  <code class="command">xdm</code>
	    должен быть запущен <span class="emphasis"><em>после</em></span> запуска
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>, иначе они будут конфликтовать, блокируя консоль.
	    Лучше всего выдержать паузу секунд на 10 и потом запустить
	    <code class="command">xdm</code>.</p><p>Если <code class="command">xdm</code> запускается из
	    <code class="filename">/etc/ttys</code>, остаётся вероятность
	    конфликта между <code class="command">xdm</code> и <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>.
	    Одним из способов избежать этого является добавление
	    номера <code class="literal">vt</code> в файл
	    <code class="filename">/usr/local/lib/X11/xdm/Xservers</code>:</p><pre class="programlisting">:0 local /usr/local/bin/X vt4</pre><p>В вышеприведённом случае X-серверу указывается работать на
	    <code class="filename">/dev/ttyv3</code>.  Заметьте, что номера
	    отличаются на единицу.  Дело в том, что X-сервер считает vty
	    от единицы, когда как отсчёт vty в ядре FreeBSD ведётся с нуля.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76725968"></a><a id="xconsole-failure"></a><p><strong>11.11.</strong></p></td><td align="left" valign="top"><p>При запуске <code class="command">xconsole</code> выдаётся сообщение
	    <span class="errorname">Couldn't open console</span>.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Если <span class="application">X</span> запускается с
	    помощью <span class="application">startx</span>, права на
	    устройство <code class="filename">/dev/console</code>
	    <span class="emphasis"><em>не</em></span> изменяются, поэтому такие
	    программы как <span class="application">xterm -C</span> и
	    <span class="application">xconsole</span> не будут работать.</p><p>Это зависит от прав доступа, установленных для консоли по умолчанию.
	    В многопользовательской системе вовсе не нужно, чтобы любой
	    пользователь мог выводить информацию на системную консоль.  Для
	    пользователей, вошедших в систему через VTY, для решения этой проблемы
	    существует файл <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fbtab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fbtab</span>(5)</span></a>.</p><p>В общем, раскомментируйте строчку в файле
	    <code class="filename">/etc/fbtab</code> (посмотрите справку по
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fbtab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fbtab</span>(5)</span></a>):</p><pre class="programlisting">/dev/ttyv0 0600 /dev/console</pre><p>Этого будет достаточно для того, чтобы всякий, кто вошёл
	    в систему с терминала <code class="filename">/dev/ttyv0</code>, имел доступ к
	    консоли.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76784208"></a><a id="ps2-x"></a><p><strong>11.12.</strong></p></td><td align="left" valign="top"><p>Моя мышь PS/2 в X работает неправильно.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Мышь и драйвер могли рассинхронизироваться.  В редких
	    случаях драйвер может ошибочно сообщать о проблемах
	    синхронизации:</p><pre class="programlisting">psmintr: out of sync (xxxx != yyyy)</pre><p>Если это случилось, отмените проверку согласования,
	    установив значение флага для драйвера мыши PS/2 в
	    <code class="literal">0x100</code>.  Проще всего это сделать
	    добавлением <code class="literal">hint.psm.0.flags="0x100"</code> в
	    <code class="filename">/boot/loader.conf</code> с перезагрузкой.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76788304"></a><a id="mouse-button-reverse"></a><p><strong>11.13.</strong></p></td><td align="left" valign="top"><p>Как поменять местами кнопки мыши?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Наберите
	    <code class="command">xmodmap -e "pointer = 3 2 1"</code>.
	    Добавьте эту команду в
	    <code class="filename">~/.xinitrc</code> или
	    <code class="filename">~/.xsession</code> для автоматического
	    запуска.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76791632"></a><a id="install-splash"></a><p><strong>11.14.</strong></p></td><td align="left" valign="top"><p>Как установить экранную заставку и где такие заставки можно
	    найти?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Подробный ответ находится в разделе <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/boot-blocks.html#boot-splash" target="_top">Загрузочные
	    экранные заставки</a> Руководства FreeBSD.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76794320"></a><a id="windows-keys"></a><p><strong>11.15.</strong></p></td><td align="left" valign="top"><p>Можно ли в X использовать клавишу
	    <span class="keycap"><strong>Windows</strong></span>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Да.  Используйте <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xmodmap&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xmodmap</span>(1)</span></a> для привязки функций
	    к этим клавишам.</p><p>Если все клавиатуры Windows стандартны, то
	    эти три клавиши имеют следующие клавиатурные коды:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="keycode">115</span> - клавиша
		<span class="keycap"><strong>Windows</strong></span> между клавишами <span class="keycap"><strong>Ctrl</strong></span>
		и <span class="keycap"><strong>Alt</strong></span> с левой стороны</p></li><li class="listitem"><p><span class="keycode">116</span> - клавиша
		<span class="keycap"><strong>Windows</strong></span> справа от
		<span class="keycap"><strong>AltGr</strong></span></p></li><li class="listitem"><p><span class="keycode">117</span> - клавиша
		<span class="keycap"><strong>Menu</strong></span>, слева от клавиши
		<span class="keycap"><strong>Ctrl</strong></span>, находящейся справа</p></li></ul></div><p>Чтобы заставить левую клавишу <span class="keycap"><strong>Windows</strong></span>
	    набирать запятую, попробуйте выполнить такую команду:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>xmodmap -e "keycode 115 = comma"</code></strong></pre><p>Для того, чтобы переопределения клавиш
	    <span class="keycap"><strong>Windows</strong></span> выполнялось автоматически каждый
	    раз при запуске X, поместите команды
	    <code class="command">xmodmap</code> в
	    <code class="filename">~/.xinitrc</code> либо, что
	    предпочтительней, создайте файл
	    <code class="filename">~/.xmodmaprc</code> и включите в него
	    параметры <code class="command">xmodmap</code> по одному на строку,
	    затем добавьте в <code class="filename">~/.xinitrc</code> такую
	    строку:</p><pre class="programlisting">xmodmap $HOME/.xmodmaprc</pre><p>Например, чтобы переопределить эти 3 клавиши так,
	    чтобы они выполняли функции клавиш <span class="keycap"><strong>F13</strong></span>,
	    <span class="keycap"><strong>F14</strong></span> и <span class="keycap"><strong>F15</strong></span>.  Это позволит
	    легко привязать их к полезным функциям в приложениях или
	    менеджере окон.</p><p>Чтобы сделать это, поместите такие строки в файл
	    <code class="filename">~/.xmodmaprc</code>:</p><pre class="programlisting">keycode 115 = F13
keycode 116 = F14
keycode 117 = F15</pre><p>При использовании оконного менеджера
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-wm/fvwm2/pkg-descr">x11-wm/fvwm2</a> клавиши можно
	    переопределить так, чтобы <span class="keycap"><strong>F13</strong></span> сворачивал
	    в иконку (и восстанавливал предыдущий размер) то окно, на
	    которое указывает курсор, <span class="keycap"><strong>F14</strong></span> перемещал
	    окно с курсором на передний план или, если оно уже
	    впереди, возвращал обратно, а <span class="keycap"><strong>F15</strong></span> вызывал
	    главное меню Workplace, даже если курсор находится не на
	    рабочем столе, что бывает полезно, когда не видно ни
	    одного кусочка рабочего стола.</p><p>Следующие записи в <code class="filename">~/.fvwmrc</code>
	    позволяют достичь описанных выше функций:</p><pre class="programlisting">Key F13	FTIWS	A	Iconify
Key F14	FTIWS	A	RaiseLower
Key F15	A	A	Menu Workplace Nop</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76819152"></a><a id="x-3d-acceleration"></a><p><strong>11.16.</strong></p></td><td align="left" valign="top"><p>Как заставить работать аппаратное ускорение 3D-графики для
	    <span class="trademark">OpenGL</span>(R)?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Наличие 3D-ускорения зависит от версии сервера Xorg
	    и типа графического адаптера.  Для адаптера nVidia
	    используйте двоичный драйвер для FreeBSD, установив один из
	    нижеследующих портов:</p><p>Последние версии адаптеров nVidia поддерживаются
	    портом <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/nvidia-driver/pkg-descr">x11/nvidia-driver</a>.</p><p>Более старые драйверы доступны как
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/nvidia-driver-###/pkg-descr">x11/nvidia-driver-<em xmlns="http://www.w3.org/1999/xhtml" class="replaceable"><code>###</code></em></a>.</p><p>nVidia предоставляет подробную информацию о том, какие
	    адаптеры поддерживаются тем или иным драйвером,
	    на своём сайте: <code class="uri"><a class="uri" href="http://www.nvidia.com/object/IO_32667.html" target="_top">http://www.nvidia.com/object/IO_32667.html</a></code>.</p><p>Для адаптеров Matrox G200/G400 следует
	    попробовать порт <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-servers/mga_hal/pkg-descr">x11-servers/mga_hal</a>.</p><p>Для ATI Rage 128 и Radeon посмотрите страницы
	    Справочника <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ati&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ati</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=r128&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">r128</span>(4)</span></a> и <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=radeon&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">radeon</span>(4)</span></a>.</p></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="admin.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="networking.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Глава 10. Системное администрирование </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Глава 12. Работа в сети</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>