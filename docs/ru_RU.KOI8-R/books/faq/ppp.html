<?xml version="1.0" encoding="koi8-r" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=koi8-r" /><title>Глава 14. PPP</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Часто задаваемые вопросы по FreeBSD 8.X, 9.X и 10.X" /><link rel="up" href="index.html" title="Часто задаваемые вопросы по FreeBSD 8.X, 9.X и 10.X" /><link rel="prev" href="security.html" title="Глава 13. Безопасность" /><link rel="next" href="serial.html" title="Глава 15. Коммуникационные адаптеры" /><link rel="copyright" href="legalnotice.html" title="Юридическое уведомление" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Глава 14. PPP</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="security.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="serial.html">След.</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ppp"></a>Глава 14. PPP</h1></div></div></div><div class="qandaset"><a id="idp77128400"></a><dl><dt>14.1. <a href="ppp.html#idp77128656">Не могу заставить работать ppp.  Что я делаю не так?</a></dt><dt>14.2. <a href="ppp.html#idp77136080">Ppp просто зависает, когда я его запускаю</a></dt><dt>14.3. <a href="ppp.html#idp77150032">Ppp не звонит в режиме -auto</a></dt><dt>14.4. <a href="ppp.html#idp77156688">Что означает сообщение
	    No route to host?</a></dt><dt>14.5. <a href="ppp.html#idp77166160">Соединение разрывается через 3 минуты</a></dt><dt>14.6. <a href="ppp.html#idp77177424">Соединение разрывается при большой нагрузке</a></dt><dt>14.7. <a href="ppp.html#idp77202768">Соединение разрывается в случайные промежутки времени</a></dt><dt>14.8. <a href="ppp.html#idp77205200">Соединение часто рвётся в случайные промежутки
	    времени</a></dt><dt>14.9. <a href="ppp.html#idp77249360">Удалённая система не отвечает</a></dt><dt>14.10. <a href="ppp.html#idp77261008">Ppp зависает</a></dt><dt>14.11. <a href="ppp.html#idp77302608">В протоколе есть сообщения о том, что <<magic being the
	    same>>.</a></dt><dt>14.12. <a href="ppp.html#idp77324112">Согласование LCP продолжается, пока не закроется
	    соединение</a></dt><dt>14.13. <a href="ppp.html#idp77342672">Когда я выполняю команду shell для тестирования соединения,
	    ppp блокируется</a></dt><dt>14.14. <a href="ppp.html#idp77353168">Почему программа ppp, обслуживающая нуль-модем, никогда не
	    закрывается?</a></dt><dt>14.15. <a href="ppp.html#idp77356624">В режиме -auto ppp неожиданно начинает
	    звонить</a></dt><dt>14.16. <a href="ppp.html#idp77376080">Что означают ошибки CCP</a></dt><dt>14.17. <a href="ppp.html#idp77380048">Почему ppp не протоколирует скорость соединения?</a></dt><dt>14.18. <a href="ppp.html#idp77390928">Ppp игнорирует символ \
	    в chat-скрипте</a></dt><dt>14.19. <a href="ppp.html#idp77399632">Процесс, вызвавший прозвонку в режиме -auto,
	    никогда не получает затребованного соединения</a></dt><dt>14.20. <a href="ppp.html#idp77426896">Что такое ошибки FCS?</a></dt><dt>14.21. <a href="ppp.html#idp77435216">Ничего не помогает - я уже отчаялся!</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp77128656"></a><a id="userppp"></a><p><strong>14.1.</strong></p></td><td align="left" valign="top"><p>Не могу заставить работать ppp.  Что я делаю не так?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Первым делом прочтите страницу Справочника <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    и <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/ppp-and-slip.html#userppp" target="_top">раздел
	      PPP</a> Руководства.  Для помощи с устранением
	    неполадок включите протоколирование следующей командой:</p><pre class="programlisting">set log Phase Chat Connect Carrier lcp ipcp ccp command</pre><p>Эту команду можно набрать в командной строке
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> или ввести в начале раздела
	    <code class="literal">default</code> в
	    <code class="filename">/etc/ppp/ppp.conf</code>.  Проверьте, что
	    файл <code class="filename">/etc/syslog.conf</code> содержит
	    указанные ниже строки и существует файл
	    <code class="filename">/var/log/ppp.log</code>:</p><pre class="programlisting">!ppp
*.*    /var/log/ppp.log</pre><p>Полную информацию о происходящем можно найти в файле
	    протокола.  Не беспокойтесь, если не всё будет понятно,
	    ведь это может быть понятно кому-то ещё.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77136080"></a><a id="ppp-hangs"></a><p><strong>14.2.</strong></p></td><td align="left" valign="top"><p>Ppp просто зависает, когда я его запускаю</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Обычно это происходит, когда имя хоста не может быть
	    преобразовано в адрес.  Наилучший способ исправить это -
	    удостовериться, что файл <code class="filename">/etc/hosts</code>
	    читается первым.  Для этого нужно проверить, что в файле
	    <code class="filename">/etc/host.conf</code> на первом месте стоит
	    строчка <code class="literal">hosts</code>.  Затем добавьте в файл
	    <code class="filename">/etc/hosts</code> запись о локальной машине.
	    Если локальная сеть отсутствует, измените строку для
	    <code class="systemitem">localhost</code>:</p><pre class="programlisting">127.0.0.1	foo.example.com foo localhost</pre><p>В противном случае добавьте для хоста ещё одну запись.
	    Обратитесь к соответствующим страницам Справочника за
	    подробным описанием.</p><p>В конце убедитесь, что эта команда выполняется
	    успешно: <code class="command">ping -c1 `hostname`</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77150032"></a><a id="ppp-nodial-auto"></a><p><strong>14.3.</strong></p></td><td align="left" valign="top"><p>Ppp не звонит в режиме -auto</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Сначала проверьте наличие маршрута по умолчанию.
	    Команда <code class="command">netstat -rn</code> должна показать
	    две строки:</p><pre class="programlisting">Destination	Gateway	    Flags    Refs     Use     Netif Expire
default 	10.0.0.2    UGSc	0	0      tun0
10.0.0.2	10.0.0.1    UH		0	0      tun0</pre><p>Если нет маршрута по умолчанию, убедитесь, что строка
	    <code class="literal">HISADDR</code> была добавлена в
	    <code class="filename">/etc/ppp/ppp.conf</code>.</p><p>Другая причина отсутствия строки с маршрутом по
	    умолчанию может крыться в том, что маршрут по умолчанию
	    был добавлен в <code class="filename">/etc/rc.conf</code>, и эта
	    строка отсутствует в
	    <code class="filename">/etc/ppp/ppp.conf</code>:</p><pre class="programlisting">delete ALL</pre><p>В таком случае обратитесь к соответствующему <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/userppp.html#userppp-final" target="_top">разделу</a>
	    Руководства.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77156688"></a><a id="no-route-to-host"></a><p><strong>14.4.</strong></p></td><td align="left" valign="top"><p>Что означает сообщение
	    <span class="errorname">No route to host</span>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Обычно эта ошибка появляется из-за отсутствия в файле
	    <code class="filename">/etc/ppp/ppp.linkup</code> следующего
	    раздела:</p><pre class="programlisting">MYADDR:
  delete ALL
  add 0 0 HISADDR</pre><p>Он необходим только для динамического IP адреса или
	    когда адрес маршрутизатора не известен.  При использовании
	    интерактивного режима можно набрать следующие команды
	    после входа в пакетный режим.  Пакетный режим обозначается
	    заглавными буквами <acronym class="acronym">PPP</acronym>
	    в приглашении:</p><pre class="programlisting">delete ALL
add 0 0 HISADDR</pre><p>Обратитесь к разделу <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/userppp.html#userppp-dynamicip" target="_top">PPP
	    и динамические IP адреса</a> Руководства за подробной
	    информацией.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77166160"></a><a id="connection-threeminutedrop"></a><p><strong>14.5.</strong></p></td><td align="left" valign="top"><p>Соединение разрывается через 3 минуты</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Таймаут для PPP по умолчанию равен 3 минутам.  Это может быть
	    изменено такой строкой:</p><pre class="programlisting">set timeout <em class="replaceable"><code>NNN</code></em></pre><p>где <em class="replaceable"><code>NNN</code></em> - время неактивности в
	    секундах, после которого соединение закрывается.  Если
	    <em class="replaceable"><code>NNN</code></em> равно нулю, соединение никогда
	    не разрывается по таймауту.  Эту команду можно поместить в файл
	    <code class="filename">ppp.conf</code> или набрать ее в интерактивном
	    режиме.  Изменение этого параметра также возможно при активном
	    соединении, если подключиться к сокету
	    <span class="application">ppp</span> сервера с помощью программ
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">telnet</span>(1)</span></a> или <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pppctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pppctl</span>(8)</span></a>.  Обратитесь к страницам
	    Справочника, посвящённым <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77177424"></a><a id="ppp-drop-heavy-load"></a><p><strong>14.6.</strong></p></td><td align="left" valign="top"><p>Соединение разрывается при большой нагрузке</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Если включен Link Quality Reporting
	    (<acronym class="acronym">LQR</acronym>), то возможно слишком много
	    пакетов <acronym class="acronym">LQR</acronym> теряется в канале.
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> делает вывод, что канал плох, и разрывает
	    соединение.  <acronym class="acronym">LQR</acronym> по умолчанию выключен.
	    Включить <acronym class="acronym">LQR</acronym> можно так:</p><pre class="programlisting">enable lqr</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77202768"></a><a id="ppp-drop-random"></a><p><strong>14.7.</strong></p></td><td align="left" valign="top"><p>Соединение разрывается в случайные промежутки времени</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Иногда на шумной линии или даже на линии с включенным
	    режимом ожидания звонка модем может вешать трубку,
	    ошибочно полагая, что потеряна несущая.</p><p>В большинстве модемов есть параметр, определяющий
	    чувствительность к временной потере несущей.
	    Обратитесь к документации модема.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77205200"></a><a id="ppp-hangs-random"></a><p><strong>14.8.</strong></p></td><td align="left" valign="top"><p>Соединение часто рвётся в случайные промежутки
	    времени</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Многие сообщают об обрывах соединений без видимой
	    причины.  Первым делом нужно выяснить, с какой стороны
	    рвётся соединение.</p><p>При использовании внешнего модема проверьте утилитой
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a>,
	    мигает ли индикатор <acronym class="acronym">TD</acronym> при передаче
	    данных.  Если он мигает, а индикатор <acronym class="acronym">RD</acronym>
	    нет, проблема с той стороны.  Если <acronym class="acronym">TD</acronym>
	    не загорается, проблема является локальной.  Для
	    внутреннего модема используйте команду <code class="literal">set
	      server</code> в <code class="filename">ppp.conf</code>.  При
	    обрыве связи подключитесь к <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> с помощью
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pppctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pppctl</span>(8)</span></a>.  Если сетевое подключение неожиданно
	    восстанавливается при проявлении активности на
	    диагностическом сокете или нет соединения, но команда
	    <code class="literal">set socket</code> в начальный момент была
	    выполнена успешно, то проблема имеет локальный характер.
	    Если получается подключиться, но связи всё равно нет,
	    включите вывод локальной отладочной информации командой
	    <code class="literal">set log local async</code> и используйте
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> в другом окне или терминале, чтобы проверить
	    связь.  В отладочном выводе будут показаны данные,
	    передаваемые и получаемые из канала связи.  Если данные
	    посылаются, но не принимаются обратно, то проблема с той
	    стороны.</p><p>Теперь, после выяснения местонахождения проблемы,
	    имеется два варианта действий:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Если проблема на удалённой машине, то прочтите <a class="xref" href="ppp.html#ppp-remote-not-responding" title="14.9.">Вопрос: 14.9</a>.</p></li><li class="listitem"><p>Если проблема с вашей стороны, прочтите <a class="xref" href="ppp.html#ppp-hung" title="14.10.">Вопрос: 14.10</a>.</p></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77249360"></a><a id="ppp-remote-not-responding"></a><p><strong>14.9.</strong></p></td><td align="left" valign="top"><p>Удалённая система не отвечает</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Здесь мало что можно сделать.  Большинство провайдеров
	    отказываются помогать пользователям, которые не используют
	    ОС от <span class="trademark">Microsoft</span>(R).  Добавьте <code class="literal">enable lqr</code>
	    в <code class="filename">/etc/ppp/ppp.conf</code>, чтобы позволить
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> отследить ошибки в удалённой системе и закрыть
	    соединение.  Такое обнаружение достаточно медленно и
	    поэтому не так уж полезно.</p><p>Первым делом попробуйте отключить любое сжатие,
	    указав в конфигурационном файле следующее:</p><pre class="programlisting">disable pred1 deflate deflate24 protocomp acfcomp shortseq vj
deny pred1 deflate deflate24 protocomp acfcomp shortseq vj</pre><p>Теперь попробуйте установить соединение ещё раз и
	    удостоверьтесь, что ситуация не изменилась.  Если качество
	    соединения улучшилось или проблема оказалась полностью
	    решённой, выясните, настройка чего приводила к проблемам
	    методом проб и ошибок.  Это полезная информация для
	    провайдера, хотя при этом может обнаружиться, что вы
	    работаете не с продуктом <span class="trademark">Microsoft</span>(R).</p><p>Перед тем, как звонить провайдеру, включите вывод
	    отладочной информации и подождите, пока соединение снова
	    не прервётся.  Для этого может потребоваться некоторое
	    дисковое пространство.  Интерес могут представлять
	    последние прочитанные из порта данные.  Обычно это данные
	    в формате ASCII и они могут даже содержать описание
	    проблемы (<span class="errorname">Memory fault</span>,
	    <span class="errorname">Core dumped</span>).</p><p>Если провайдер согласен помочь, нужно будет включить
	    режим отладки с их стороны, и затем, когда связь прервётся
	    в следующий раз, они смогут сказать, почему с их стороны
	    возникли проблемы.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77261008"></a><a id="ppp-hung"></a><p><strong>14.10.</strong></p></td><td align="left" valign="top"><p>Ppp зависает</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>В этом случае перекомпилируйте <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> с
	    отладочной информацией, и затем используйте <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gdb&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gdb</span>(1)</span></a>
	    для получения стека вызовов для зависшего процесса
	    <span class="application">ppp</span>.  Чтобы откомпилировать
	    программу <span class="application">ppp</span> с отладочной
	    информацией, наберите такие команды:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.sbin/ppp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>env DEBUG_FLAGS='-g' make clean</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>env DEBUG_FLAGS='-g' make install</code></strong></pre><p>Затем перезапустите <span class="application">ppp</span>
	    и дождитесь следующего зависания.  Когда отладочная сборка
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> зависнет, запустите
	    <span class="application">gdb</span> для зависшего
	    процесса:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gdb ppp `pgrep ppp`</code></strong></pre><p>В приглашении <span class="application">gdb</span>
	    используйте команду <code class="command">bt</code> или
	    <code class="command">where</code> для получения стека вызовов.
	    Сохраните вывод сессии <span class="application">gdb</span>
	    и <span class="quote"><<<span class="quote">отключитесь</span>>></span> от работающего процесса,
	    выполнив команду <code class="command">quit</code> в
	    <span class="application">gdb</span>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77302608"></a><a id="ppp-same-magic"></a><p><strong>14.11.</strong></p></td><td align="left" valign="top"><p>В протоколе есть сообщения о том, что <span class="quote"><<<span class="quote">magic being the
	    same</span>>></span>.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Иногда, сразу после установления соединения, в журнале
	    могут возникать сообщения <span class="errorname">Magic is the
	    same</span>.  Иногда эти сообщения проходят
	    безболезненно, а иногда одна из сторон прекращает работу.
	    Большинство реализаций PPP не может справиться с такой
	    ситуацией, и даже когда связь выглядит установившейся, вы
	    будeт только бесконечно повторяющиеся конфигурационные
	    запросы и подтверждения в файле протокола до тех пор, пока
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> окончательно не закроет соединение.</p><p>Обычно это происходит на серверах с медленными дисками, на
	    которых порт обслуживает программа <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>, а <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    выполняется из сценария регистрации или другой программы после
	    регистрации пользователя.  Были сообщения, что такое случается
	    постоянно при использовании slirp.  Причина заключается в том,
	    что во время, проходящее между завершением работы <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>
	    и запуском <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> со стороны клиента начинает
	    посылать пакеты Line Control Protocol (LCP).  Так как режим эха
	    остаётся всё ещё включенным, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> клиента получает
	    <span class="quote"><<<span class="quote">отражения</span>>></span> своих запросов.</p><p>Частью процесса согласования параметров LCP является
	    определение <span class="quote"><<<span class="quote">магического</span>>></span> числа для каждой стороны
	    соединения для обнаружения <span class="quote"><<<span class="quote">отражений</span>>></span>.  Согласно
	    спецификации, когда одна сторона пытается использовать
	    совпадающее "магическое" число, должен быть послан ответ NAK и
	    должно быть выбрано новое "магическое" число.  В тот момент,
	    когда на порту сервера включен режим эха, клиент <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    посылает пакеты LCP, получает то же самое "магическое" число в
	    отражённом пакете и отвечает на него NAK.  Он также видит
	    отражённый NAK (который также означает, что <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> должен
	    изменить своё "магическое" число).  В потенциале это может
	    вызвать появление огромного количества процессов смен
	    "магических" чисел, и все они накапливаются в буфере терминала.
	    Как только запустится сервер <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>, он будет перегружен
	    запросами на смену "магических", немедленно решит, что этого
	    много для согласования LCP и прервёт соединение.  В то же самое
	    время, клиент, который больше не видит отражений, останавливается
	    для того, чтобы увидеть, что сервер закрыл соединение.</p><p>Этого можно избежать, позволив начинать согласование
	    противоположной стороне следующей строкой в файле
	    <code class="filename">ppp.conf</code>:</p><pre class="programlisting">set openmode passive</pre><p>Это заставит <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> ожидать начала согласования
	    LCP.  Некоторые серверы, однако, могут никогда не начать
	    согласование.  В этом случае попробуйте сделать
	    следующее:</p><pre class="programlisting">set openmode active 3</pre><p>Это заставит <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> пассивно ждать 3 секунды, и только затем
	    посылать запросы LCP.  Если противоположная сторона начнёт посылать в этот
	    момент запросы, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> немедленно ответит, не ожидая истечения
	    трёхсекундного интервала.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77324112"></a><a id="ppp-lcp-constant"></a><p><strong>14.12.</strong></p></td><td align="left" valign="top"><p>Согласование LCP продолжается, пока не закроется
	    соединение</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>В настоящий момент одной из неприятных особенностей
	    реализации <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> является то, что она не связывает
	    сообщения LCP, CCP &amp; IPCP с запросами.  Как результат, если
	    реализация PPP с одной стороны более чем на 6 секунд медленнее,
	    чем с другой, противоположная сторона будет посылать
	    два дополнительных запроса на согласование параметров LCP.
	    Это фатально.</p><p>Предположим, что у нас работают две реализации, на машинах
	    <code class="systemitem">A</code> и <code class="systemitem">B</code>.  <code class="systemitem">A</code>
	    начинает посылать запросы LCP сразу же после соединения, а
	    <code class="systemitem">B</code> требуется 7 секунд для запуска.  Когда
	    <code class="systemitem">B</code> запускается, <code class="systemitem">A</code> послало 3
	    LCP-запроса.  Полагаем, что режим эха выключен, в противном
	    случае мы столкнулись бы с проблемами "магического" числа,
	    описанными в предыдущем разделе.  <code class="systemitem">B</code> посылает
	    REQ, затем ACK на первый REQ от <code class="systemitem">A</code>.  Это
	    приводит к тому, что <code class="systemitem">A</code> входит в состояние
	    <acronym class="acronym">OPENED</acronym> и посылает (первый) ACK обратно
	    <code class="systemitem">B</code>.  В то же самое время <code class="systemitem">B</code>
	    посылает обратно ещё два ACK в ответ на два дополнительных REQ,
	    посланные <code class="systemitem">A</code> до старта <code class="systemitem">B</code>.
	    <code class="systemitem">B</code> затем получает первый ACK от <code class="systemitem">A</code>
	    и возвращается в состояние <acronym class="acronym">REQ-SENT</acronym>, послав
	    ещё один (четвёртый) REQ согласно RFC.  Затем он получает
	    третий ACK и входит в состояние <acronym class="acronym">OPENED</acronym>.
	    В это же время <code class="systemitem">B</code> принимает
	    четвёртый REQ от <code class="systemitem">A</code>, что возвращает
	    его в состояние <acronym class="acronym">ACK-SENT</acronym> и посылает ещё один
	    (второй) REQ и (четвёртый) ACK согласно RFC.  <code class="systemitem">A</code>
	    получает REQ, переходит в состояние <acronym class="acronym">REQ-SENT</acronym>
	    и посылает ещё один REQ.  Он немедленно принимает последующий
	    ACK и входит в состояние <acronym class="acronym">OPENED</acronym>.</p><p>Это будет продолжаться до тех пор, пока одна из сторон не
	    обнаружит, что это ни к чему не приводит и не закроет
	    соединение.</p><p>Лучшим способом избежать этой ситуации является конфигурация
	    одной из сторон как <code class="literal">passive</code>, чтобы она ждала
	    другую для начала согласования.  Это можно сделать следующей
	    командой:</p><pre class="programlisting">set openmode passive</pre><p>С этой командой нужно быть осторожным.  Эту команду
	    можно также использовать для ограничения периода ожидания,
	    в течении которого <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> ждёт начала согласования с
	    противоположной стороны:</p><pre class="programlisting">set stopped <em class="replaceable"><code>N</code></em></pre><p>Как вариант, может быть использована следующая команда
	    (где <em class="replaceable"><code>N</code></em> - период ожидания в секундах
	    перед тем, как начать согласование):</p><pre class="programlisting">set openmode active <em class="replaceable"><code>N</code></em></pre><p>За дополнительной информацией обращайтесь к странице
	    Справочника.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77342672"></a><a id="ppp-shell-test-lockup"></a><p><strong>14.13.</strong></p></td><td align="left" valign="top"><p>Когда я выполняю команду shell для тестирования соединения,
	    ppp блокируется</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>При использовании <code class="command">shell</code> или
	    <code class="command">!</code> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> запускает оболочку или
	    переданные параметры.  Программа
	    <span class="application">ppp</span> будет ждать окончания
	    выполнения команды, прежде чем продолжить.  При любой
	    попытке воспользоваться связью PPP во время выполнения
	    команды связь будет выглядеть заблокированной.  Это
	    происходит из-за того, что <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> ждёт завершения
	    команды.</p><p>Для выполнения подобных команд используйте вместо этого
	    <code class="command">!bg</code>.  В этом случае нужная команда будет
	    выполняться в фоновом режиме, а <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> сможет продолжить обслуживание
	    канала связи.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77353168"></a><a id="ppp-nullmodem"></a><p><strong>14.14.</strong></p></td><td align="left" valign="top"><p>Почему программа ppp, обслуживающая нуль-модем, никогда не
	    закрывается?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> не может определить, что соединение
	    было закрыто.  Это происходит из-за метода использования сигнальных
	    линий нуль-модемного кабеля.  При использовании такого типа
	    соединения всегда включайте LQR:</p><pre class="programlisting">enable lqr</pre><p>По умолчанию LQR включается, если это было затребовано с
	    противоположной стороны на этапе согласования параметров
	    соединения.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77356624"></a><a id="ppp-auto-noreasondial"></a><p><strong>14.15.</strong></p></td><td align="left" valign="top"><p>В режиме <code class="option">-auto</code> ppp неожиданно начинает
	    звонить</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Если <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> начинает неожиданно звонить,
	    определите причину и настройте фильтры дозвона для
	    предотвращения подобных звонков.</p><p>Для выяснения причины такого поведения, используйте
	    строку:</p><pre class="programlisting">set log +tcp/ip</pre><p>Это включит протоколирование всего трафика через
	    соединение.  В следующий раз, когда неожиданно будет
	    установлено соединение, в файл протокола будет следом
	    занесена причина с отметкой времени.</p><p>Теперь отключите дозвон при данных условиях.  Как
	    правило, такие проблемы возникают из-за обращений к DNS.
	    Для предотвращения обращений к DNS и установления
	    соединения (что <span class="emphasis"><em>не</em></span> запретит
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> пропускать пакеты через уже установленное
	    соединение), используйте такую комбинацию:</p><pre class="programlisting">set dfilter 1 deny udp src eq 53
set dfilter 2 deny udp dst eq 53
set dfilter 3 permit 0/0 0/0</pre><p>Это не всегда удобно, так как закрывает возможность
	    дозвона по запросу.  Большинству программ нужно обратиться
	    к DNS до того, как начать работать.</p><p>В случае DNS попытайтесь установить, что именно
	    пытается определить имя хоста.  В большинстве случаев
	    виновным оказывается <span class="application">Sendmail</span>.
	    Проверьте, чтобы в конфигурационном файле программы
	    <span class="application">Sendmail</span> не было указано
	    обращаться к DNS.  Обратитесь к разделу об <a class="link" href="../../../../doc/ru_RU.KOI8-R/books/handbook/smtp-dialup.html" target="_top">использовании
	      электронной почты при коммутируемом соединении</a> в
	    Руководстве FreeBSD за подробным описанием.  Вам может
	    понадобиться добавить в файл
	    <code class="filename">.mc</code> строку:</p><pre class="programlisting">define(`confDELIVERY_MODE', `d')dnl</pre><p>Это заставит <span class="application">Sendmail</span>
	    добавлять все сообщения в очередь до тех пор, пока не
	    будет запущена её обработка, как правило, каждые 30 минут,
	    или пока не будет выполнена команда
	    <code class="command">sendmail -q</code>, возможно, из файла
	    <code class="filename">/etc/ppp/ppp.linkup</code>).</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77376080"></a><a id="ccp-errors"></a><p><strong>14.16.</strong></p></td><td align="left" valign="top"><p>Что означают ошибки CCP</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>В файле протокола появляются такие сообщения об
	    ошибках:</p><pre class="programlisting">CCP: CcpSendConfigReq
CCP: Received Terminate Ack (1) state = Req-Sent (6)</pre><p>Это происходит, если <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> пытается установить
	    сжатие Predictor1, а противоположная сторона не хочет
	    устанавливать никакого сжатия.  Эти сообщения безобидны,
	    но их можно заглушить отключением сжатия:</p><pre class="programlisting">disable pred1</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77380048"></a><a id="ppp-connectionspeed"></a><p><strong>14.17.</strong></p></td><td align="left" valign="top"><p>Почему ppp не протоколирует скорость соединения?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Для записи полного протокола взаимодействия с модемом
	    включите следующее:</p><pre class="programlisting">set log +connect</pre><p>Это заставит <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> протоколировать всё, вплоть
	    до последней прочтённой через <span class="quote"><<<span class="quote">expect</span>>></span>
	    строки.</p><p>Чтобы увидеть скорость соединения при использовании
	    PAP или CHAP, укажите <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> ожидать полную строку
	    CONNECT:</p><pre class="programlisting">set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 4 \
  \"\" ATZ OK-ATZ-OK ATDT\\T TIMEOUT 60 CONNECT \\c \\n"</pre><p>Здесь мы получаем строку CONNECT, ничего не посылаем,
	    а затем ожидаем символа перевода строки, заставляя
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> читать целиком содержимое ответа CONNECT.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77390928"></a><a id="ppp-ignores-backslash"></a><p><strong>14.18.</strong></p></td><td align="left" valign="top"><p>Ppp игнорирует символ <code class="literal">\</code>
	    в chat-скрипте</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Программа <span class="application">ppp</span> разбирает
	    каждую строку в конфигурационных файлах и поэтому может
	    правильно интерпретировать строки вида
	    <code class="literal">set phone "123 456 789"</code> и обнаруживать,
	    что на самом деле номер является единственным аргументом.
	    Для того, чтобы указать символ <code class="literal">"</code>,
	    заэкранируйте его символом обратного слэша
	    (<code class="literal">\</code>).</p><p>Когда интерпретатор chat разбирает каждый параметр, он
	    ещё раз просматривает аргумент на предмет каких-либо
	    специальных последовательностей типа <code class="literal">\P</code>
	    или <code class="literal">\T</code>.  Вследствие этой двойной
	    интерпретации не забывайте об использовании нужного
	    количества экранирующих символов.</p><p>Чтобы передать сам символ <code class="literal">\</code>,
	    укажите что-то типа:</p><pre class="programlisting">set dial "\"\" ATZ OK-ATZ-OK AT\\\\X OK"</pre><p>Это приведёт к такой последовательности:</p><pre class="programlisting">ATZ
OK
AT\X
OK</pre><p>Или:</p><pre class="programlisting">set phone 1234567
set dial "\"\" ATZ OK ATDT\\T"</pre><p>Это даст такую последовательность:</p><pre class="programlisting">ATZ
OK
ATDT1234567</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77399632"></a><a id="ppp-autodialprocess-noconnect"></a><p><strong>14.19.</strong></p></td><td align="left" valign="top"><p>Процесс, вызвавший прозвонку в режиме <code class="option">-auto</code>,
	    никогда не получает затребованного соединения</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Эта проблема проявлялась, когда <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> в
	    режиме <code class="option">-auto</code> был настроен на динамическое
	    согласование локального IP-адреса
	    с противоположной стороной.  Это было давно исправлено -
	    поищите на странице справочника слово <code class="literal">iface</code>.</p><p>Причиной было то, что когда эта программа использует
	    системный вызов <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=connect&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">connect</span>(2)</span></a>, для сокета назначается IP-адрес
	    интерфейса <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tun&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">tun</span>(4)</span></a>.  Ядро создаёт первый исходящий пакет и
	    записывает его в устройство <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tun&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">tun</span>(4)</span></a>.  Затем <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    читает пакет и устанавливает соединение.  Если в результате
	    согласования <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> динамического IP-адреса
	    адрес интерфейса изменится, сокет будет работать некорректно.
	    Любые IP-пакеты, передаваемые через сокет, будут отброшены.
	    Если даже этого не произойдёт, ответные данные не будут
	    достигать отправителя,
	    так как этот адрес больше ему не принадлежит.</p><p>Теоретически есть несколько способов решить эту проблему.
	    Лучше всего, если противоположная сторона назначит интерфейсу
	    тот же самый IP-адрес.  Текущая версия
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> именно так и поступает, но большинство других
	    реализаций этого не делают.</p><p>Самым простым решением будет просто никогда не менять
	    IP-адрес интерфейса <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tun&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">tun</span>(4)</span></a>, а вместо этого изменять на
	    лету все исходящие пакеты так, чтобы IP-адрес источника менялся
	    с IP-адреса интерфейса на соответствующий с противоположной
	    стороны.  Это, в сущности, то же самое, что делает опция
	    <code class="literal">iface-alias</code> в самой последней версии
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> (с помощью библиотеки <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=libalias&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">libalias</span>(3)</span></a> и ключа
	    <code class="option">-nat</code> для <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>) - она отслеживает
	    все назначенные ранее интерфейсу адреса и замещает их на
	    последний из назначенных.</p><p>Другой возможный (и, наверное, самый надёжный) способ - это
	    создать системный вызов, меняющий IP-адреса всем уже связанным
	    сокетам.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> использовал бы этот вызов для модификации
	    сокетов всех работающих программ после согласования нового
	    IP-адреса.  Этот же самый системный вызов могли бы использовать
	    клиенты <acronym class="acronym">DHCP</acronym>, когда они осуществляют повторную
	    привязку к сокету, вызывая для этого функцию
	    <code class="function">bind()</code>.</p><p>Ещё одной возможностью является разрешение интерфейсу
	    становиться активным без IP-адреса.  Исходящим пакетам будет
	    даваться IP адрес <code class="systemitem">255.255.255.255</code>
	    до первого вызова <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ioctl&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">ioctl</span>(2)</span></a> <code class="literal">SIOCAIFADDR</code>,
	    приводящего к полной привязке сокета.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> нужно будет
	    изменять исходящий IP-адрес и контрольную сумму пакета, только
	    если он установлен в <code class="systemitem">255.255.255.255</code>.
	    Это, однако, является некоторым хаком, так как ядро будет
	    посылать некорректные пакеты на не полностью
	    сконфигурированный интерфейс, в предположении, что существует
	    механизм исправления этих пакетов.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77426896"></a><a id="fcs-errors"></a><p><strong>14.20.</strong></p></td><td align="left" valign="top"><p>Что такое ошибки FCS?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>FCS является сокращением от Frame Check Sequence
	    (контроль последовательности кадров).  Каждый кадр PPP имеет
	    контрольную сумму для проверки того, что принятые данные совпадают
	    с переданными.  Если FCS принятого пакета некорректна, пакет
	    отбрасывается и счётчик FCS для HDLC увеличивается.  Значения
	    ошибок уровня HDLC можно вывести командой
	    <code class="literal">show hdlc</code>.</p><p>Если линия плохого качества или драйвер
	    коммуникационного адаптера отбрасывает пакеты, будут
	    появляться случайные ошибки FCS.  Это обычно не является
	    причиной для волнений, хотя это существенно замедляет
	    протоколы компрессии.</p><p>Если связь замирает сразу при установлении соединения
	    и наблюдается большое количество ошибок FCS, убедитесь,
	    чтобы модем не использовал программное управление потоком
	    (XON/XOFF).  Если же для соединения должно использоваться
	    программное управление потоком, то воспользуйтесь командой
	    <code class="literal">set accmap 0x000a0000</code> для указания
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> экранировать
	    символы <code class="literal">^Q</code> и <code class="literal">^S</code>.</p><p>Другой причиной слишком большого количества ошибок FCS
	    может быть прекращение противоположной стороной сеанса
	    <acronym class="acronym">PPP</acronym>.  В этом случае включите
	    протоколирование <code class="literal">async</code> для проверки
	    того, не являются ли поступаемые из линии данные на самом
	    деле приглашением login или shell.  Если с противоположной
	    стороны находится приглашение shell, завершить <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    без обрыва связи можно командой
	    <code class="command">close lcp</code> и последующей командой
	    <code class="command">term</code>, чтобы переподключиться к
	    приглашению shell на удалённой машине.</p><p>Если ничего в файле протокола не говорит о причине
	    разрыва связи, спросите у администратора удалённой машины
	    или вашего провайдера, почему сеанс был закрыт.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77435216"></a><a id="desperation"></a><p><strong>14.21.</strong></p></td><td align="left" valign="top"><p>Ничего не помогает - я уже отчаялся!</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Если всё уже перепробовано, и ничего не получается,
	    пошлите подробности об ошибке, конфигурационные файлы,
	    способ запуска <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>, соответствующие части файла
	    протокола, и вывод команды <code class="command">netstat -rn</code>
	    до и после соединения в <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">Список рассылки, посвящённый вопросам и ответам пользователей FreeBSD</a>.</p></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="security.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="serial.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Глава 13. Безопасность </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Глава 15. Коммуникационные адаптеры</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Этот, и другие документы, могут быть скачаны с
    <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>По вопросам, связанным с FreeBSD, прочитайте
    <a href="http://www.FreeBSD.org/ru/docs.html">документацию</a> прежде чем писать в
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    По вопросам, связанным с этой документацией, пишите в рассылку
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.<br></br></small></p></body></html>