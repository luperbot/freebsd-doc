<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>5. A naplózás használata során felmerülõ hibák kezelése</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Naplózó UFS használata asztali számítógépeken" /><link rel="up" href="index.html" title="Naplózó UFS használata asztali számítógépeken" /><link rel="prev" href="configure-journal.html" title="4. A naplózás beállítása" /><link rel="next" href="further-reading.html" title="6. Ajánlott olvasmányok" /><link rel="copyright" href="trademarks.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5. A naplózás használata során
      felmerülõ hibák kezelése</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configure-journal.html">Vissza</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="further-reading.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="troubleshooting-gjournal"></a>5. A naplózás használata során
      felmerülõ hibák kezelése</h2></div></div></div><p>Ebben a szakaszban a naplózás
      alkalmazásakor jelentkezõ gondokra vonatkozó
      gyakran ismételt kérdéseket foglaljuk
      össze.</p><div class="qandaset"><a id="idp72394576"></a><dl><dt>5.1. <a href="troubleshooting-gjournal.html#idp72395472">A rendszer folyamatosan összeomlik komolyabb
	    lemezterhelés mellett.  Van ennek valamilyen köze
	    a naplózáshoz?</a></dt><dt>5.2. <a href="troubleshooting-gjournal.html#idp72405840">Valamit nem sikerült rendesen
	    beállítani a konfiguráció
	    során, ezért most nem indul a rendszer.  Meg
	    lehet valahogy javítani?</a></dt><dt>5.3. <a href="troubleshooting-gjournal.html#idp72434256">Visszavonható a naplózás, vissza
	    lehet valahogy térni a Soft Updates
	    használatához?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp72395472"></a><a id="kernel-panic"></a><p><strong>5.1.</strong></p></td><td align="left" valign="top"><p>A rendszer folyamatosan összeomlik komolyabb
	    lemezterhelés mellett.  Van ennek valamilyen köze
	    a naplózáshoz?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A napló ilyenkor valószínûleg
	    gyorsabban betelik, mint ahogy kiíródhatna a
	    lemezre.  Nem szabad elfeledkeznünk róla, hogy
	    a napló méretének sosem az
	    adatterület méretével kell
	    arányosnak lennie, hanem a lemez
	    terheltségével.  Ha tehát a lemezeink
	    nagyobb terhelés alatt vannak, akkor egy nagyobb
	    területet kell hozzárendelnünk a
	    naplóhoz.  Ezzel kapcsolatban lásd a <a class="link" href="understanding-journaling.html" title="2. Naplózás FreeBSD alatt">Naplózás
	    FreeBSD alatt</a> címû szakaszt.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp72405840"></a><a id="unable-boot"></a><p><strong>5.2.</strong></p></td><td align="left" valign="top"><p>Valamit nem sikerült rendesen
	    beállítani a konfiguráció
	    során, ezért most nem indul a rendszer.  Meg
	    lehet valahogy javítani?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ilyenkor vagy elfelejtettük (vagy netalán
	    elírtuk) a <code class="filename">/boot/loader.conf</code>
	    állományban szükséges
	    bejegyzést, vagy az <code class="filename">/etc/fstab</code>
	    állományunk hibákat tartalmaz.  Az
	    ilyen jellegû problémákat viszonylag
	    könnyû helyrehozni.  Az <span class="keycap"><strong>Enter</strong></span>
	    billentyû lenyomásával hozzuk elõ az
	    egyfelhasználós módhoz tartozó
	    parancsértelmezõt.  Ha ez sikerült, akkor
	    kutassuk fel a probléma okát:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat /boot/loader.conf</code></strong></pre><p>Ha innen hiányzik vagy nem helyesen szerepel a
	    <code class="literal">geom_journal_load</code> bejegyzés, akkor a
	    naplózás használatához
	    szükséges eszközök nem fognak
	    létrejönni.  Töltsük be a modult
	    manuálisan, csatlakoztassuk az összes
	    partíciót és folytassuk a
	    többfelhasználós mód
	    indítását:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal load</code></strong>

GEOM_JOURNAL: Journal 2948326772: ad0s1g contains journal.
GEOM_JOURNAL: Journal 3193218002: ad0s1h contains journal.
GEOM_JOURNAL: Journal 3193218002: ad0s1d contains data.
GEOM_JOURNAL: Journal ad0s1d clean.
GEOM_JOURNAL: Journal 2948326772: ad0s1f contains data.
GEOM_JOURNAL: Journal ad0s1f clean.

<code class="prompt">#</code> <strong class="userinput"><code>mount -a</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong>
<span class="emphasis"><em>(a rendszerindítás folytatódik)</em></span></pre><p>Ha viszont ezzel a bejegyzéssel kapcsolatban
	    semmilyen hibát nem találtunk, akkor
	    nézzük meg az <code class="filename">/etc/fstab</code>
	    állományt.  Akkor
	    valószínûleg itt fogunk találni
	    egy hibásan beírt vagy éppen
	    hiányzó bejegyzést.  Amennyiben
	    errõl lenne szó, csatlakoztassuk kézzel a
	    fennmaradó partíciókat és
	    folytassuk a többfelhasználós mód
	    indítását.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp72434256"></a><a id="remove-journaling"></a><p><strong>5.3.</strong></p></td><td align="left" valign="top"><p>Visszavonható a naplózás, vissza
	    lehet valahogy térni a Soft Updates
	    használatához?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Hogyne.  A most következõ módszer
	    segítségével megfordítható
	    az egész folyamat.  Miután
	    végeztünk, a naplózás
	    részére korábban kialakított
	    partíciók tetszés szerint
	    felhasználhatóak.</p><p>Jelentkezzük be <code class="systemitem">root</code>
	    felhasználóként és
	    váltsunk egyfelhasználós
	    módba:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown now</code></strong></pre><p>Válasszuk le a naplózást
	    alkalmazó partíciókat:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umount /usr /var</code></strong></pre><p>Írassuk ki lemezre a naplók
	    tartalmát:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal sync</code></strong></pre><p>Állítsuk le a
	    naplózóterületek
	    használatát:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal stop ad0s1d.journal</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>gjournal stop ad0s1f.journal</code></strong></pre><p>Töröljük le az eszközökön
	    tárolt összes naplózási
	    metainformációt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gjournal clear ad0s1d</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>gjournal clear ad0s1f</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>gjournal clear ad0s1g</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>gjournal clear ad0s1h</code></strong></pre><p>Tiltsuk le az állományrendszer
	    naplózását és
	    állítsuk vissza a Soft Updates
	    használatát:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tunefs -J disable -n enable ad0s1d</code></strong>

tunefs: gjournal cleared
tunefs: soft updates set

<code class="prompt">#</code> <strong class="userinput"><code>tunefs -J disable -n enable ad0s1f</code></strong>

tunefs: gjournal cleared
tunefs: soft updates set</pre><p>Manuálisan csatlakoztassuk újra a
	    régi eszközöket:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -o rw /dev/ad0s1d /var</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -o rw /dev/ad0s1f /usr</code></strong></pre><p>Az <code class="filename">/etc/fstab</code>
	    állományban állítsunk vissza
	    mindent az eredeti állapotába:</p><pre class="programlisting">/dev/ad0s1f     /usr            ufs     rw      2       2
/dev/ad0s1d     /var            ufs     rw      2       2</pre><p>Végül a
	    <code class="filename">/boot/loader.conf</code>
	    állományból távolítsuk el
	    a <code class="literal">geom_journal</code> modul
	    betöltésére vonatkozó
	    bejegyzést és indítsuk újra a
	    rendszert.</p></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configure-journal.html">Vissza</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="further-reading.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">4. A naplózás
      beállítása </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 6. Ajánlott olvasmányok</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>