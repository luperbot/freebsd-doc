<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>3.12. Bináris formátumok</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="basics.html" title="3. fejezet - A UNIX alapjai" /><link rel="prev" href="basics-devices.html" title="3.11. Eszközök és eszközleírók" /><link rel="next" href="basics-more-information.html" title="3.13. Bõvebben olvashatunk..." /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.12. Bináris formátumok</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="basics-devices.html">Vissza</a> </td><th width="60%" align="center">3. fejezet - A UNIX alapjai</th><td width="20%" align="right"> <a accesskey="n" href="basics-more-information.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="binary-formats"></a>3.12. Bináris formátumok</h2></div></div></div><p>Annak megértéséhez, hogy a FreeBSD
      miért az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a> formátumot használja,
      elõször is tisztában kell lennünk a <span class="trademark">UNIX</span>(R)
      típusú rendszerekben használt
      végrehajtható állományok három
      <span class="quote">"<span class="quote">uralkodó</span>"</span> formátumával:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a></p><p>A legõsibb és egyben a
	  <span class="quote">"<span class="quote">klasszikus</span>"</span> <span class="trademark">UNIX</span>(R)-os
	  tárgykódformátum.  Egy tömör
	  és rövidke fejlécet használ, aminek
	  az elején a formátum
	  leírására szolgáló
	  <span class="quote">"<span class="quote">bûvös szám</span>"</span>
	  található (errõl bõvebben lásd
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a>).  Három betöltött szegmenst
	  tartalmaz: .text, .data és .bss, valamint egy
	  szimbólumokat és karakterláncokat
	  tároló táblát.</p></li><li class="listitem"><p><acronym class="acronym">COFF</acronym></p><p>Az SVR3 tárgykódformátuma.  A
	  fejléc itt már tartalmaz egy table nevû
	  szegmenst is, tehát a .text, .data és .bss
	  szegmensekhez hasonlóan ebbõl is többet tud
	  tárolni.</p></li><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a></p><p>A <acronym class="acronym">COFF</acronym> után következõ
	  formátum, amelyben több szegmens is
	  megtalálható, valamint létezik 32 bites
	  és 64 bites változatban is.  Egyetlen
	  hátránya van: az <acronym class="acronym">ELF</acronym>
	  tervezése során
	  rendszerarchitektúránként csupán
	  egyetlen ABI-t (bináris alkalmazói
	  felületet) feltételeztek.  Ez azonban
	  meglehetõsen helytelen, mivel még a kereskedelmi
	  SYSV világában (ahol már legalább
	  három ABI található: SVR4, Solaris
	  és SCO) sem állja meg a helyét.</p><p>A FreeBSD ezt a problémát a
	  <span class="emphasis"><em>megbélyegzés</em></span> (branding)
	  segítségével próbálja
	  megoldani, aminek révén el tudunk látni
	  egy ismert <acronym class="acronym">ELF</acronym> állományt a
	  futtatásához megfelelõ ABI-ra
	  vonatkozó információkkal.  Errõl
	  részletesebben a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a> oldalán
	  tájékozódhatunk.</p></li></ul></div><p>A FreeBSD a <span class="quote">"<span class="quote">klasszikusok</span>"</span>
      táborából indult, ezért kezdetben az
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a> formátumot használta, mivel ez a
      technológia a BSD kiadások számos
      generációjában megmérettetett
      és bevált, egészen a 3.X ág
      elindulásáig.  Habár már jóval
      elõtte lehetett fordítani és futtatni
      natív <acronym class="acronym">ELF</acronym> binárisokat (és
      rendszermagokat) a FreeBSD rendszereken, a FreeBSD kezdetben
      ódzkodott váltani az alapértelmezés
      szerinti <acronym class="acronym">ELF</acronym> formátumra.  De vajon
      miért?  Nos, amikor a Linux-tábor megtette a maga
      fájdalmas váltását az
      <acronym class="acronym">ELF</acronym>-re, az nem annyira azért volt, hogy
      megszabaduljanak az <code class="filename">a.out</code>
      végrehajtható formátumtól, hanem mert
      a rugalmatlan, ugrótáblákon alapuló
      oszottkönyvtár-kezelési mechanizmusaik nagyon
      megnehezítették a gyártók és
      fejlesztõk számára az osztott
      függvénykönyvtárak
      létrehozását.  Mivel az
      <acronym class="acronym">ELF</acronym> formátumhoz rendelkezésre
      álló eszközök megoldást
      kínáltak az osztott könyvtárak
      gondjaira, és mivel általánosan
      elfogadták <span class="quote">"<span class="quote">a jövõbe vezetõ
      útként</span>"</span>, a FreeBSD is felvállalta az
      átállással kapcsolatos
      költségeket és végrehajtotta azt.  A
      FreeBSD az osztott könyvtárakat leginkább a Sun
      <span class="trademark">SunOS</span>TM rendszeréhez hasonlóan kezeli, ami egy
      nagyon könnyen használható
      megoldás.</p><p>De miért van ilyen sok különbözõ
      formátum?</p><p>A ködös és sötét múltban
      egyszerûbb hardverek voltak.  Ezek az egyszerû hardverek
      egyszerû, kicsi rendszereket támogattak.  Az
      <code class="filename">a.out</code> tökéletesen megfelelõ
      volt egy ilyen egyszerû rendszer (egy PDP-11)
      binárisainak tárolására.  Ahogy az
      emberek nekiláttak átültetni errõl az
      egyszerû rendszerrõl a <span class="trademark">UNIX</span>(R)-ot más
      rendszerekre, az <code class="filename">a.out</code> formátumot
      továbbra is megtartották, mivel a <span class="trademark">UNIX</span>(R) kezdeti,
      Motorola 68k-ra, VAXenre készített
      átírataihoz is elegendõ volt.</p><p>Ezután néhány éles
      elméjû hardvermérnök kitalálta,
      ha rá tudnák kényszeríteni a
      programokat egy-két ügyetlen trükkre, akkor a
      terveken meg tudnának spórolni néhány
      logikai kaput és ezzel a processzor is gyorsabban tudna
      futni.  Miközben az <code class="filename">a.out</code>
      formátumot ilyen hardverre (amit manapság
      <acronym class="acronym">RISC</acronym>-nek hívnak) is szerették
      volna áthozni, kiderült, hogy ebben az esetben szinte
      használhatatlan.  Ezért az
      <code class="filename">a.out</code> formátum által
      felkínáltnál nagyobb
      teljesítmény elérése
      érdekében nekiláttak számos más
      formátumot is kidolgozni.  Ekkor jöttek létre a
      <acronym class="acronym">COFF</acronym>, <acronym class="acronym">ECOFF</acronym> és
      más hasonló formátumok, amelyek
      elõbb-utóbb korlátokba ütköztek,
      még mielõtt a történelem
      megállapodott volna az <acronym class="acronym">ELF</acronym>
      formátumnál.</p><p>Ráadásul a programok méretei egyre
      inkább kezdtek nõni, miközben a lemezek (valamint
      a fizikai memória) továbbra is viszonylag kicsik
      maradtak, ezért megszületett az osztott
      könyvtár ötlete, és a virtuális
      memóriát kezelõ alrendszer is sokat finomodott.
      Mivel ezek a különbözõ fejlesztések az
      <code class="filename">a.out</code> formátumra épültek,
      annak használatósága a beletömött
      módosítások számával
      együtt romlott.  Emellett az emberek még szerettek
      volna betölteni különféle dolgokat
      futási idõben dinamikusan, vagy éppen a
      memória és a lapozóállomány
      megspórolásához kipucolni a programjaik egyes
      részeit az inicializáló
      kódrészletek lefutása után.  A
      programozási nyelvek is fejlõdtek, és az
      emberek a fõprogram futása elõtt is akartak
      kódot futtatni.  Az <code class="filename">a.out</code>
      formátum rengeteg apró foltozáson esett
      keresztül, amelyek egy ideig még tudták is
      tartani magukat.  Azonban egy idõ után már az
      <code class="filename">a.out</code> formátum egyre növekvõ
      teljesítménycsökkenés nélkül
      már nem volt képes állni a sarat.
      Habár az <acronym class="acronym">ELF</acronym> megszüntette a
      fennálló problémák jelentõs
      részét, egyúttal megnehezítette egy
      alapvetõen mûködõ rendszer
      leváltását.  Ezért az
      <acronym class="acronym">ELF</acronym> formátumnak meg kellett
      várnia azt a pillanatot, amikorra az
      <code class="filename">a.out</code> használata már
      kényelmetlenné vált.</p><p>Azonban ahogy múlt az idõ, az
      eszközökbõl, amelyekbõl a FreeBSD a
      fordításához szükséges
      eszközöket származtatta (különösen
      az assembler és a betöltõ),létrejött
      két párhuzamos fejlesztési fa.  A FreeBSD-fa
      kiegészült az osztott könyvtárak
      támogatásával és hibákat
      javított, miközben a GNU-fa alkotói, akik
      eredetileg készítették ezeket a programokat,
      újraírták az eszközeiket és a
      keresztfordításhoz egyszerûbb
      támogatást készítettek,
      cserélhetõvé tették a
      különbözõ formátumokat és
      így tovább.  Sokan akartak FreeBSD-re
      keresztfordítani, azonban nem volt
      szerencséjük, mert a FreeBSD régebbi
      forrásait az <span class="application">as</span> és
      <span class="application">ld</span> már nem emésztette
      meg.  Az új GNU eszköztár (a
      <span class="application">binutils</span>) viszont ismeri már a
      keresztfordítást, az <acronym class="acronym">ELF</acronym>
      formátumot, az osztott könyvtárakat, a C++
      kiterjesztéseit stb.  Idõközben egyre több
      gyártó <acronym class="acronym">ELF</acronym>
      formátumú binárisokat adott ki, és
      jó érzés volt ezeket FreeBSD-n is
      futtatni.</p><p>Az <acronym class="acronym">ELF</acronym> sokkal kifejezõbb az
      <code class="filename">a.out</code> formátumnál, és
      jóval több bõvítési
      lehetõséget enged az alaprendszerben.  Az
      <acronym class="acronym">ELF</acronym> formátumhoz tartozó
      eszközöket jobban karbantartják és
      támogatja a keresztfordítást, ami viszont
      sokaknak fontos.  Az <acronym class="acronym">ELF</acronym> talán
      némileg lassabb, mint az <code class="filename">a.out</code>,
      azonban ez nehezen mérhetõ le.  Számos
      részletben eltérnek ugyan, például
      hogyan képeznek le lapokat, hogyan kezelik az
      inicializáló kódot stb., de ezek egyike sem
      igazán fontos.  Idõvel az <code class="filename">a.out</code>
      támogatása ki fog kerülni a
      <code class="filename">GENERIC</code> rendszermagból, és
      végül majd teljesen eltávolításra
      kerül, ahogy a régi <code class="filename">a.out</code>
      formátumú programok szépen lassan
      kifutnak.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="basics-devices.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="basics-more-information.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">3.11. Eszközök és
      eszközleírók </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 3.13. Bõvebben olvashatunk...</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>