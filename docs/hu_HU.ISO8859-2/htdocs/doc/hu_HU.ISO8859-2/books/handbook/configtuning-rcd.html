<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>11.7. Az rc használata FreeBSD alatt</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="config-tuning.html" title="11. fejezet - Beállítás és finomhangolás" /><link rel="prev" href="configtuning-cron.html" title="11.6. A cron segédprogram beállítása" /><link rel="next" href="config-network-setup.html" title="11.8. A hálózati kártyák beállítása" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.7. Az rc használata FreeBSD alatt</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configtuning-cron.html">Vissza</a> </td><th width="60%" align="center">11. fejezet - Beállítás és
    finomhangolás</th><td width="20%" align="right"> <a accesskey="n" href="config-network-setup.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-rcd"></a>11.7. Az rc használata FreeBSD alatt</h2></div><div><span class="authorgroup">Írta: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span>, <span class="firstname">Tom</span></span>. </span></div></div></div><p>A rendszer indítására a FreeBSD 2002-ben
      átvette a NetBSD <code class="filename">rc.d</code>
      rendszerét.  Ezt a felhasználók könnyen
      felismerhetik az <code class="filename">/etc/rc.d</code>
      könyvtárban található
      állományokról.  A legtöbbjük olyan
      alapvetõ szolgáltatás, amelyet a
      <code class="option">start</code>, <code class="option">stop</code> és
      <code class="option">restart</code> paraméterekkel lehet
      vezérelni.  Például az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a> az
      alábbi paranccsal indítható
      újra:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd restart</code></strong></pre><p>Ez az eljárás hasonló a többi
      szolgáltatás esetén is.  Természetesen
      ezek a szolgáltatások általában
      maguktól indulnak el a rendszer indítása
      során az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> állományban
      megadottak szerint.  Például ha a rendszerünk
      indulásakor szeretnénk aktiválni a
      hálózati címfordítással
      foglalatoskodó démont, akkor csak adjuk hozzá
      az <code class="filename">/etc/rc.conf</code> állományhoz a
      következõ sort:</p><pre class="programlisting">natd_enable="YES"</pre><p>Amennyiben a <code class="option">natd_enable="NO"</code> sor már
      szerepel benne, akkor egyszerûen írjuk át a
      <code class="option">NO</code> értéket <code class="option">YES</code>-re.
      Ezután az rc szkriptek a rendszer következõ
      indításakor a lentieknek megfelelõen
      automatikusan elindítják a hozzá
      tartozó szolgáltatásokat is.</p><p>Mivel az <code class="filename">rc.d</code> rendszert elsõsorban
      arra használják, hogy szolgáltatásokat
      indítsanak el vagy állítsanak le az
      operációs rendszerrel együtt, a
      szabványos <code class="option">start</code>, <code class="option">stop</code>
      és <code class="option">restart</code> paraméterek csak abban
      az esetben látják el a feladatukat, ha a nekik
      megfelelõ változókat beállítottuk
      az <code class="filename">/etc/rc.conf</code> állományban.
      Tehát például az <code class="command">sshd
      restart</code> csak abban az esetben fog bármit is
      csinálni, ha az <code class="filename">/etc/rc.conf</code>
      állományban az <code class="varname">sshd_enable</code>
      változót a <code class="option">YES</code>
      értékre állítottuk.  Ha az
      <code class="filename">/etc/rc.conf</code>
      beállításaitól függetlenül
      kívánunk egy szolgáltatásnak
      <code class="option">start</code>, <code class="option">stop</code> vagy
      <code class="option">restart</code> parancsot adni, akkor elé kell
      tennünk egy <span class="quote">"<span class="quote">one</span>"</span> szót.
      Például ha az <code class="command">sshd</code>
      szolgáltatás
      újraindításához az
      <code class="filename">/etc/rc.conf</code> tartalmát figyelmen
      kívül akarjuk hagyni, akkor ezt a parancsot kell
      kiadnunk:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd onerestart</code></strong></pre><p>Könnyen ellenõrizni tudjuk, hogy az adott
      szolgáltatás az <code class="filename">/etc/rc.conf</code>
      részérõl engedélyezett-e, ha a neki
      megfelelõ <code class="filename">rc.d</code> szkriptnek megadjuk az
      <code class="option">rcvar</code> paramétert.  Ennek
      segítségével például a
      rendszergazda így képes ellenõrizni, hogy az
      <code class="command">sshd</code> szolgáltatást
      engedélyezi-e az <code class="filename">/etc/rc.conf</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd rcvar</code></strong>
# sshd
$sshd_enable=YES</pre><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">A második sor (<code class="literal"># sshd</code>) az
	<code class="command">sshd</code> parancs kimenete, nem pedig a
	<code class="systemitem">root</code> parancssora.</p></div><p>A <code class="option">status</code> paraméterrel
      kideríthetjük, hogy egy szolgáltatás
      aktív-e.  Ezzel például így tudjuk
      ellenõrizni az <code class="command">sshd</code>
      szolgáltatás
      mûködését:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd status</code></strong>
sshd is running as pid 433.</pre><p>Az üzenet:</p><pre class="screen">Az sshd a 433-as azonosítóval fut.</pre><p>Bizonyos esetekben a <code class="option">reload</code> paraméter
      használatával lehetõségünk van a
      szolgáltatások
      újraindítására is.  Ilyenkor a
      rendszer megpróbál egy olyan jelzést
      küldeni a szolgáltatásnak, amivel a
      konfigurációs állományainak
      újraolvasását kéri.  A
      legtöbbször lényegében ez a
      <code class="literal">SIGHUP</code> jelzés
      kiküldését rejti magában.  Ez a
      lehetõség azonban nem mindegyik
      szolgáltatás esetén érhetõ
      el.</p><p>Az <code class="filename">rc.d</code> rendszer nem csupán
      hálózati szolgáltatások esetén
      használatos, hanem nagyrészben
      hozzájárul a rendszer
      indításához is.  Erre vegyük
      példának a <code class="filename">bgfsck</code>
      állományt.  Amikor ez a szkript lefut, a
      következõ üzenetet jeleníti meg:</p><pre class="screen">Starting background file system checks in 60 seconds.</pre><p>Az üzenet fordítása:</p><pre class="screen">A háttérben 60 másodperc múlva megkezdõdik az állományrendszerek ellenõrzése.</pre><p>Ennek megfelelõen tehát ezt az
      állományt az állományrendszerek
      háttérben folyó
      ellenõrzésére használják, ami
      pedig a rendszer indítása során fut
      le.</p><p>Számos rendszerszolgáltatás
      igényel a mûködéséhez
      további szolgáltatásokat.
      Például a NIS és más egyéb
      távoli eljáráshíváson
      alapú szolgáltatások egészen addig nem
      képesek elindulni, amíg az
      <code class="command">rpcbind</code> (portmapper)
      szolgáltatást el nem indítjuk.  Az ilyen
      jellegû gondok feloldására az
      indítószkriptek elején levõ
      megjegyzésekben található egy kevés
      metainformáció a szkript
      mûködéséhez szükséges elemekre
      (függõségeire) vonatkozóan.  A rendszer
      indítása közben az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rcorder</span>(8)</span></a> nevû
      program képes a megjegyzések közt ezeket az
      információkat feldolgozni és ebbõl
      megállapítani, hogy a függõségi
      viszonyok betartásával milyen sorrendben kell
      elindítani a rendszer által felkínált
      szolgáltatásokat.</p><p>Ehhez a következõ kulcsszavakat kell megadni az
      egyes indító szkriptek elején (az
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.subr&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.subr</span>(8)</span></a> így tudja
      <span class="quote">"<span class="quote">engedélyezni</span>"</span> az indító
      szkriptet):</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">PROVIDE</code>:
	  segítségével megmondjuk, hogy ez az
	  állomány milyen szolgáltatásokat
	  nyújt.</p></li></ul></div><p>A következõ kulcsszavak az egyes
      indítóállományok elején
      szerepelhetnek.  Nem kell feltétlenül
      használnunk ezeket, de velük az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rcorder</span>(8)</span></a>
      munkáját segíthetjük:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">REQUIRE</code>: felsoroljuk azokat a
	  szolgáltatásokat, amelyek a
	  futásához kellenek.  Az állomány
	  tehát az itt megadott szolgáltatások
	  <span class="emphasis"><em>után</em></span> fog lefutni.</p></li><li class="listitem"><p><code class="literal">BEFORE</code>: felsoroljuk azokat a
	  szolgáltatásokat, amelyek
	  <span class="emphasis"><em>elõtt</em></span> futtatni kell ezt az
	  állományt.</p></li></ul></div><p>Az indító szkriptekben a kulcsszavak ügyes
      megválasztásával a rendszergazda nagyon
      finoman képes az indításkor
      végrehajtódó szkriptek sorrendjét
      szabályozni és a többi <span class="trademark">UNIX</span>(R) alapú
      operációs rendszerbõl ismert
      <span class="quote">"<span class="quote">futtatási szintek</span>"</span> használata
      nélkül vezérelni a rendszerben megjelenõ
      szolgáltatásokat.</p><p>Az <code class="filename">rc.d</code> rendszerrõl bõvebben az
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> és <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.subr&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.subr</span>(8)</span></a> man oldalakon olvashatunk.
      Ha szeretnénk saját <code class="filename">rc.d</code>
      szkripteket írni vagy javítani a már
      meglévõkön, akkor ez <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/rc-scripting" target="_top">a cikk</a> (angolul)
      segítségünkre lehet.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configtuning-cron.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="config-network-setup.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">11.6. A <code class="command">cron</code> segédprogram
      beállítása </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 11.8. A hálózati kártyák
      beállítása</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>