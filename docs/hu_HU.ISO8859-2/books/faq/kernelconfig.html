<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>8. fejezet - A rendszermag beállítása</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Gyakran Ismételt Kérdések a FreeBSD 6.X, 7.X és 8.X változatairól" /><link rel="up" href="index.html" title="Gyakran Ismételt Kérdések a FreeBSD 6.X, 7.X és 8.X változatairól" /><link rel="prev" href="applications.html" title="7. fejezet - Felhasználói alkalmazások" /><link rel="next" href="disks.html" title="9. fejezet - Lemezek, állományrendszerek és rendszertöltõk" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">8. fejezet - A rendszermag beállítása</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="applications.html">Vissza</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="disks.html">Elõre</a></td></tr></table><hr /></div><div xml:lang="hu" class="chapter" lang="hu"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="kernelconfig"></a>8. fejezet - A rendszermag beállítása</h1></div></div></div><div class="qandaset"><a id="idp76476112"></a><dl><dt>8.1. <a href="kernelconfig.html#idp76476368">Nehéz testreszabni a rendszermagot?</a></dt><dt>8.2. <a href="kernelconfig.html#idp76480848">A rendszermag nem fordul le, mert a
	    _hw_float nem található.
	    Hogyan lehet megoldani ezt a problémát?</a></dt><dt>8.3. <a href="kernelconfig.html#idp76486480">Miért ilyen nagy a rendszermag mérete
	    (közel 10 MB)?</a></dt><dt>8.4. <a href="kernelconfig.html#idp76501584">Miért ütköznek a
	    megszakítások, amikor többportos soros
	    vonali kártyákat akarunk
	    használni?</a></dt><dt>8.5. <a href="kernelconfig.html#idp76504400">Miért nem lehet lefordítani a
	    rendszermagot, még a GENERIC
	    beállításaival sem?</a></dt><dt>8.6. <a href="kernelconfig.html#idp76522576">Honnan tudhatjuk meg milyen ütemezõvel
	    dolgozik a rendszerünk?</a></dt><dt>8.7. <a href="kernelconfig.html#idp76535632">Mi az a kern.sched.quantum?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp76476368"></a><a id="make-kernel"></a><p><strong>8.1.</strong></p></td><td align="left" valign="top"><p>Nehéz testreszabni a rendszermagot?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Egyáltalán nem!  Ezzel kapcsolatban
	    olvassuk el <a class="link" href="../../../../doc/hu_HU.ISO8859-2/books/handbook/kernelconfig.html" target="_top">a FreeBSD
	    kézikönyv rendszermag
	    beállításairól
	    szóló részét</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Az új <code class="filename">kernel</code>
		állomány a hozzá tartozó
		modulokkal együtt a <code class="filename">/boot/kernel</code>
		könyvtárba települ, míg a
		rendszermag korábbi változata és a
		moduljai a <code class="filename">/boot/kernel.old</code>
		könyvtárba kerül át, így
		ha netalán valamit elrontottunk volna, akkor a
		rendszermag korábbi változatának
		betöltésével
		lehetõségünk lesz kijavítani a
		hibát.</p></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76480848"></a><a id="missing-hw-float"></a><p><strong>8.2.</strong></p></td><td align="left" valign="top"><p>A rendszermag nem fordul le, mert a
	    <code class="literal">_hw_float</code> nem található.
	    Hogyan lehet megoldani ezt a problémát?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ez valószínûleg azért
	    következett be, mert eltávolítottuk az
	    <code class="filename">npx0</code> (lásd <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=npx&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">npx</span>(4)</span></a>)
	    támogatást a rendszermag
	    beállításai közül, mert a
	    rendszerünkben nincs matematikai társprocesszor.
	    Az <code class="filename">npx0</code> eszköz
	    jelenléte azonban
	    <span class="emphasis"><em>kötelezõ</em></span>.  Valahol a
	    gépünkben lennie kell olyan eszköznek,
	    amely a lebegõpontos számok hardveres
	    kezelését végzi, annak ellenére,
	    hogy nem egy különálló eszköz,
	    ahogy régen a 386-osoknál volt.  A
	    rendszermagban szerepelnie <span class="emphasis"><em>kell</em></span> az
	    <code class="filename">npx0</code> eszköznek.  Ha
	    netalán még sikerülne is
	    <code class="filename">npx0</code> támogatás
	    nélkül fordítanunk egy rendszermagot,
	    akkor sem tud elindulni.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76486480"></a><a id="why-kernel-big"></a><p><strong>8.3.</strong></p></td><td align="left" valign="top"><p>Miért ilyen nagy a rendszermag mérete
	    (közel 10 MB)?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Nagyon valószínû, hogy a
	    rendszermagunk <span class="emphasis"><em>debug módban</em></span>
	    készült el.  A debug módú
	    rendszermagokban rengeteg olyan szimbólum
	    található, amely hasznos lehet a hibák
	    keresése és a rendszer vizsgálata
	    során, ezért emiatt jelentõs
	    mértékben növekszik a mérete.
	    Emiatt nem kell aggódnunk, mert egy
	    hibakeresésre felkészített rendszermag
	    egyáltalán nem vagy csak egy kicsivel lassabb,
	    mint a hagyományos változat, illetve a
	    rendszer összeomlásakor mindig mindig
	    szükségünk lehet ezekre a debug
	    információkra.</p><p>Ha viszont kevés a lemezterület vagy
	    egyszerûen csak nem akarunk debug módú
	    rendszermagot akarunk futtatni, akkor a
	    következõkre kell figyelnünk:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Vegyük ki a rendszermag
		konfigurációs
		állományából a
		következõ sort:</p><pre class="programlisting">makeoptions DEBUG=-g</pre></li><li class="listitem"><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> használata során ne
		használjuk a <code class="option">-g</code>
		beállítást.</p></li></ul></div><p>A fentiek közül akármelyiket is
	    választjuk, a rendszermagunk debug módban
	    jön létre.  Ha azonban sikerült betartani a
	    fentebb javasolt lépéseket, akkor egy
	    normál rendszermagot kapunk, amely mérete
	    ilyenkor jelentõs mértékben visszaesik: a
	    legtöbbjük olyan 1,5 és 2 MB
	    körül van.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76501584"></a><a id="multiport-serial-interrupts"></a><p><strong>8.4.</strong></p></td><td align="left" valign="top"><p>Miért ütköznek a
	    megszakítások, amikor többportos soros
	    vonali kártyákat akarunk
	    használni?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ha a rendszermagot a többportos soros vonali
	    kártyák támogatásával
	    fordítjuk le, akkor a rendszertõl azt az
	    üzenetet kapjuk, hogy csak az elsõ
	    megszakítást fogja használni, a
	    többit pedig ütközés miatt (interrupt
	    conflict) kihagyja.  Hogyan lehet ezen
	    javítani?</p><p>A gondot alapvetõen az okozza, hogy a FreeBSD a
	    rendszermagban fixen letárolja ezeket, nehogy
	    valamilyen hardveres vagy szoftveres
	    ütközés miatt elkallódjanak.  Ezen
	    úgy tudunk segíteni, ha egyetlen IRQ vonal
	    kivételével az összes többi
	    beállítását szabadon hagyjuk.
	    Íme erre egy példa:</p><pre class="programlisting">#
# Többportos nagysebességû soros vonali eszközök - 16550 UART
#
device sio2 at isa? port 0x2a0 tty irq 5 flags 0x501 vector siointr
device sio3 at isa? port 0x2a8 tty flags 0x501 vector siointr
device sio4 at isa? port 0x2b0 tty flags 0x501 vector siointr
device sio5 at isa? port 0x2b8 tty flags 0x501 vector siointr</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76504400"></a><a id="generic-kernel-build-failure"></a><p><strong>8.5.</strong></p></td><td align="left" valign="top"><p>Miért nem lehet lefordítani a
	    rendszermagot, még a <code class="filename">GENERIC</code>
	    beállításaival sem?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ennek több oka is lehet.  Ezek közül
	    néhány, de nem feltétlenül ebben a
	    sorrendben:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Nem a
		<code class="command">make buildkernel</code>
		és
		<code class="command">make installkernel</code>
		parancsokat használtuk és
		valószínûleg a forrásaink sem
		egyeznek meg a jelenleg futó rendszerével
		(például egy 8.1-RELEASE
		rendszert akarunk fordítani egy
		7.3-RELEASE rendszeren).  Ha
		frissíteni akarunk, akkor olvassuk el a
		<code class="filename">/usr/src/UPDATING</code>
		állományt, különös
		tekintettel a végén
		található <span class="quote">"<span class="quote">COMMON ITEMS</span>"</span>
		címû szakaszra.</p></li><li class="listitem"><p>A
		<code class="command">make buildkernel</code>
		és
		<code class="command">make installkernel</code>
		parancsokat használtuk, de elõtte nem futott
		le rendesen a
		<code class="command">make buildworld</code>
		parancs.  A
		<code class="command">make buildkernel</code>
		parancs ugyanis erõsen támaszkodik a
		<code class="command">make buildworld</code>
		által végzett munkára.</p></li><li class="listitem"><p>Gyakran a <a class="link" href="introduction.html#stable" title="1.9.">FreeBSD-STABLE</a>
		változat használata esetén is
		elõfordulhat, hogy olyan pillanatban
		töltöttük le a forrásokat, amikor
		módosítás alatt voltak vagy
		valamiért nem mûködtek rendesen.
		Kizárólag a kiadások esetén
		tudjuk szavatolni a hibátlan
		fordítást, noha a <a class="link" href="introduction.html#stable" title="1.9.">FreeBSD-STABLE</a>
		verzióból készült
		változatok is többnyire megfelelõek.
		Próbáljuk meg újra letölteni a
		forrásokat, ha eddig még nem
		próbálkoztunk volna vele, és
		nézzük meg, hogy ez segít-e megoldani
		a problémát.  Keressük másik
		szervert, ha gondjaink vannak a
		frissítéssel.</p></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76522576"></a><a id="scheduler-in-use"></a><p><strong>8.6.</strong></p></td><td align="left" valign="top"><p>Honnan tudhatjuk meg milyen ütemezõvel
	    dolgozik a rendszerünk?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Nézzük meg, hogy a rendszerünkben
	    elérhetõ-e a <code class="varname">kern.sched.quantum</code>
	    változó.  Ha van ilyenünk, akkor valami
	    ilyesmit kell tapasztalnunk:</p><pre class="screen"><code class="prompt">%</code> sysctl <em class="replaceable"><code>kern.sched.quantum</code></em>
kern.sched.quantum: 99960</pre><p>Ha létezik a
	    <code class="varname">kern.sched.quantum</code> nevû sysctl
	    változó, akkor a 4BSD ütemezõ fut
	    (lásd <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sched_4bsd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sched_4bsd</span>(4)</span></a>).  Ha nem, akkor egy ilyen
	    hibát kapunk a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> parancstól (ezt
	    nyugodtan figyelmen kívül hagyhatjuk):</p><pre class="screen"><code class="prompt">%</code> sysctl <em class="replaceable"><code>kern.sched.quantum</code></em>
sysctl: unknown oid 'kern.sched.quantum'</pre><p>Az aktuálisan használt ütemezõ
	    neve közvetlenül elérhetõ a
	    <code class="varname">kern.sched.name</code> sysctl
	    változó lekérdezésén
	    keresztül:</p><pre class="screen"><code class="prompt">%</code> sysctl <em class="replaceable"><code>kern.sched.name</code></em>
kern.sched.name: 4BSD</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76535632"></a><a id="scheduler-kern-quantum"></a><p><strong>8.7.</strong></p></td><td align="left" valign="top"><p>Mi az a <code class="varname">kern.sched.quantum</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A <code class="varname">kern.sched.quantum</code>
	    értéke határozza meg, hogy egy
	    futó program legfeljebb mennyi órajelet futhat
	    egyszerre, megszakítás nélkül.
	    Ezt az értéket a 4BSD ütemezõ
	    használja, ezért a
	    jelenlétébõl vagy
	    hiányából következtetni tudunk a
	    pillanatnyilag használatban levõ
	    ütemezõre.</p></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="applications.html">Vissza</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="disks.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">7. fejezet - Felhasználói alkalmazások </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 9. fejezet - Lemezek, állományrendszerek és
      rendszertöltõk</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>