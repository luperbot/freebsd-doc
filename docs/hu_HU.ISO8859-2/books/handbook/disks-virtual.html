<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>18.13. Hálózat, memória és állomány alapú állományrendszerek</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="disks.html" title="18. fejezet - Háttértárak" /><link rel="prev" href="backup-basics.html" title="18.12. Alapvetõ tudnivalók a biztonsági mentésrõl" /><link rel="next" href="snapshots.html" title="18.14. Az állományrendszerek pillanatképei" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">18.13. Hálózat, memória és
      állomány alapú
      állományrendszerek</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="backup-basics.html">Vissza</a> </td><th width="60%" align="center">18. fejezet - Háttértárak</th><td width="20%" align="right"> <a accesskey="n" href="snapshots.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-virtual"></a>18.13. Hálózat, memória és
      állomány alapú
      állományrendszerek</h2></div><div><span class="authorgroup">Átdolgozta és feljavította:
	    <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Fonvieille</span>, <span class="firstname">Marc</span></span>. </span></div></div></div><a id="idp90619728" class="indexterm"></a><a id="idp90620240" class="indexterm"></a><p>A számítógépünkben
      létezõ fizikai lemezek, például floppyk,
      CD-k, merevlemezek és egyebek mellett a lemezek egy
      másik formáját is képes
      megérteni a FreeBSD - a <em class="firstterm">virtuális
      lemezeket</em>.</p><a id="idp90622160" class="indexterm"></a><a id="idp90622672" class="indexterm"></a><a id="idp90623184" class="indexterm"></a><p>A virtuális lemeznek tekinthetõek többek
      közt az olyan hálózati
      állományrendszerek, mint például a
      <a class="link" href="network-nfs.html" title="29.3. A hálózati állományrendszer (NFS)"> Hálózati
      állományrendszer</a> (Network File System, NFS)
      és a Coda, valamint a memóriában és
      állományokban létrehozott
      állományrendszerek.</p><p>Attól függõen, hogy a FreeBSD melyik
      változatát használjuk, az
      állomány és memória alapú
      állományrendszerek
      létrehozásához, illetve
      használatához különbözõ
      segédprogramokra lesz szükségünk.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> a felhasználó
	számára láthatatlan módon hozza
	létre az eszközök leíróit.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-mdconfig"></a>18.13.1. Állomány alapú
	állományrendszerek</h3></div></div></div><a id="idp90632272" class="indexterm"></a><p>FreeBSD alatt az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> segédprogram
	segítségével tudunk memórialemezeket
	(<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>) beállítani és
	engedélyezni.  Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>
	használatához be kell töltenünk az
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> modult vagy hozzá kell tennünk a
	rendszermagunk beállításait
	tartalmazó állományhoz:</p><pre class="programlisting">device md</pre><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> parancs háromféle
	memória alapú virtuális lemezt ismer: a
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a>, állományok vagy
	lapozóterület használatával
	létrehozott memórialemezeket.  Így lehet
	például csatlakoztatni a floppyk vagy CD-k
	állományokban tárolt image-eit.</p><p>Egy meglevõ állományrendszer
	image-ének csatlakoztatása:</p><div class="example"><a id="idp90644048"></a><div class="example-title">18.3. példa - Egy meglevõ állományrendszer
	  image-ének csatlakoztatása az
	  <code class="command">mdconfig</code> paranccsal</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f image -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0 /mnt</code></strong></pre></div></div><br class="example-break" /><p>Új állományrendszer
	  létrehozása az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>
	  használatával:</p><div class="example"><a id="idp90648016"></a><div class="example-title">18.4. példa - Új állomány alapú lemez
	  létrehozása az <code class="command">mdconfig</code>
	  paranccsal</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=új-image bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f új-image -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -w md0 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs md0a</code></strong>
/dev/md0a: 5.0MB (10224 sectors) block size 16384, fragment size 2048
        using 4 cylinder groups of 1.25MB, 80 blks, 192 inodes.
super-block backups (for fsck -b #) at:
 160, 2720, 5280, 7840
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0a /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md0a       4710    4  4330     0%    /mnt</pre></div></div><br class="example-break" /><p>Ha az <code class="option">-u</code> beállítással
	nem adjuk meg az egység számát, akkor az
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> automatikus
	kiosztásán keresztül fog egy
	használatban még nem levõ eszközt
	kiválasztani.  Az így kiosztott egység neve
	az <code class="filename">md4</code> névhez hasonlóan
	jelenik meg a szabványos kimeneten.  Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>
	használatának részleteirõl olvassuk el
	a hozzá tartozó man oldalt.</p><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> egy nagyon sokoldalú
	segédeszköz, habár használatakor
	viszonylag sok parancsot kell kiadni egy állomány
	alapú állományrendszer
	létrehozásához.  A FreeBSD azonban
	alapból tartalmaz még egy <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a> nevû
	segédprogramot is, ami az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> lemezeket az
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> segítségével
	állítja be, létrehoz rajtuk egy UFS
	típusú állományrendszert a
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> segítségével és
	csatlakoztatja a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> paranccsal.  Így
	például, ha az iménti
	állományrendszert akarjuk létrehozni
	és csatlakoztatni, akkor egyszerûen csak
	gépeljünk be ennyit:</p><div class="example"><a id="idp90667088"></a><div class="example-title">18.5. példa - Állomány alapú lemezek
	  beállítása és
	  csatlakoztatása az <code class="command">mdmfs</code>
	  paranccsal</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=új-image bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mdmfs -F új-image -s 5m md0 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md0        4718    4  4338     0%    /mnt</pre></div></div><br class="example-break" /><p>Ha az <code class="option">md</code> paramétert az egység
	száma nélkül adjuk meg, akkor <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>
	az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> automatikus kiosztására
	támaszkodva fog egy addig még nem használt
	eszközt kiválasztani.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>
	használatának pontos részleteivel
	kapcsolatban lásd a hozzá tartozó man
	oldalt.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-md-freebsd5"></a>18.13.2. Memória alapú
	állományrendszerek</h3></div></div></div><a id="idp90679120" class="indexterm"></a><p>A memória alapú
	állományrendszerek esetében
	általában a
	<span class="quote">"<span class="quote">lapozóállomány alapú</span>"</span>
	megközelítést alkalmazzák.  A
	lapozóállomány alapúság nem
	arra utal, hogy a memórialemezt alapból
	kilapozzák lemezre, hanem inkább arra, hogy a
	memórialemez olyan területen jön létre,
	amelyet szükség esetén lemezre lehet lapozni.
	Memória alapú lemezeket a (rendszermag
	szintû) <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a> használatával is
	létre lehet hozni, de a malloc alapú
	memórialemezeknél, különösen a
	nagyon nagyok esetében, a rendszer könnyen
	össze tud omlani, ha kifut a rendelkezésére
	álló memóriából.</p><div class="example"><a id="idp90690128"></a><div class="example-title">18.6. példa - Új memória alapú lemez
	  létrehozása az <code class="command">mdconfig</code>
	  paranccsal</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t swap -s 5m -u 1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs -U md1</code></strong>
/dev/md1: 5.0MB (10240 sectors) block size 16384, fragment size 2048
        using 4 cylinder groups of 1.27MB, 81 blks, 192 inodes.
        with soft updates
super-block backups (for fsck -b #) at:
 160, 2752, 5344, 7936
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md1 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md1        4718    4  4338     0%    /mnt</pre></div></div><br class="example-break" /><div class="example"><a id="idp90694608"></a><div class="example-title">18.7. példa - Új memória alapú lemez
	  létrehozása az <code class="command">mdmfs</code>
	  paranccsal</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdmfs -s 5m md2 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md2        4846    2  4458     0%    /mnt</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90697680"></a>18.13.3. Memórialemezek leválasztása a
	rendszerrõl</h3></div></div></div><a id="idp90702544" class="indexterm"></a><p>Amikor már nem akarunk tovább használni
	egy memória vagy állomány alapú
	állományrendszert, érdemes visszaadnunk az
	általuk felhasznált erõforrásokat a
	rendszernek.  Elsõként válasszuk le
	magát az állományrendszert, majd az
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> segítségével kapcsoljuk le
	a lemezt a rendszerrõl és szabadítsuk fel az
	általa felhasznált
	erõforrásokat.</p><p>Például az <code class="filename">/dev/md4</code>
	eszközt így lehet lekapcsolni és
	felszabadítani:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -d -u 4</code></strong></pre><p>A beállított <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> eszközökkel
	kapcsolatos többi információt az
	<code class="command">mdconfig -l</code> paranccsal tudjuk
	lekérdezni.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="backup-basics.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="snapshots.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">18.12. Alapvetõ tudnivalók a biztonsági
      mentésrõl </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 18.14. Az állományrendszerek
      pillanatképei</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>