<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>11.8. A hálózati kártyák beállítása</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="config-tuning.html" title="11. fejezet - Beállítás és finomhangolás" /><link rel="prev" href="configtuning-rcd.html" title="11.7. Az rc használata FreeBSD alatt" /><link rel="next" href="configtuning-virtual-hosts.html" title="11.9. Virtuális címek" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.8. A hálózati kártyák
      beállítása</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configtuning-rcd.html">Vissza</a> </td><th width="60%" align="center">11. fejezet - Beállítás és
    finomhangolás</th><td width="20%" align="right"> <a accesskey="n" href="configtuning-virtual-hosts.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="config-network-setup"></a>11.8. A hálózati kártyák
      beállítása</h2></div><div><span class="authorgroup">Írta: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Fonvieille</span>, <span class="firstname">Marc</span></span>. </span></div></div></div><a id="idp84832080" class="indexterm"></a><p>Manapság már el sem tudunk képzelni
      számítógépet hálózati
      csatlakozás nélkül.  A hálózati
      csatolókártyák hozzáadása
      és beállítása egy FreeBSD rendszergazda
      mindennapos feladata.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84833744"></a>11.8.1. A megfelelõ meghajtóprogram
	felderítése</h3></div></div></div><a id="idp84834384" class="indexterm"></a><p>Mielõtt bárminek is nekikezdenénk,
	érdemes tisztában lennünk azzal, hogy a
	rendelkezésünkre álló kártya
	milyen típusú, milyen chipet használ
	és hogy PCI vagy ISA buszon csatlakozik-e.  A FreeBSD a PCI
	és ISA csatolós kártyák
	széles spektrumát ismeri.  Az egyes
	kiadásokhoz mellékelt <span class="quote">"<span class="quote">Hardware
	Compatibility List</span>"</span> (Hardverkompatibilitási lista)
	dokumentumokban tudjuk ellenõrizni, hogy a
	kártyákat ismeri a rendszer.</p><p>Miután meggyõzõdtünk róla, hogy
	a kártyánkat ismeri a rendszer, meg kell
	keresnünk a hozzá tartozó meghajtót.
	A <code class="filename">/usr/src/sys/conf/NOTES</code> és a
	<code class="filename">/usr/src/sys/arch/conf/NOTES</code>
	állományok tartalmazzák a
	hálózati kártyák meghajtóinak
	rövid leírását, benne a
	támogatott chipsetek és kártyák
	típusaival.  Ha ez alapján nem tudjuk teljes
	biztosággal eldönteni, hogy melyik a
	számunkra megfelelõ meghajtó,
	nézzük meg a saját man oldalát.  Ezen
	a man oldalon megtaláljuk az általa ismert
	összes eszközt és a velük kapcsolatban
	elõforduló jellemzõ
	problémákat.</p><p>Ha egy elterjedt típust sikerült
	beszereznünk, akkor nem kell különösebben
	sokáig keresnünk a neki megfelelõ
	meghajtót.  Az ismertebb hálózati
	kártyák meghajtói ugyanis alapból
	benne vannak a <code class="filename">GENERIC</code> rendszermagban,
	ezért a rendszer indítása során
	ehhez hasonlóan meg is jelennek a
	kártyák:</p><pre class="screen">dc0: &lt;82c169 PNIC 10/100BaseTX&gt; port 0xa000-0xa0ff mem 0xd3800000-0xd38
000ff irq 15 at device 11.0 on pci0
miibus0: &lt;MII bus&gt; on dc0
bmtphy0: &lt;BCM5201 10/100baseTX PHY&gt; PHY 1 on miibus0
bmtphy0:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
dc0: Ethernet address: 00:a0:cc:da:da:da
dc0: [ITHREAD]
dc1: &lt;82c169 PNIC 10/100BaseTX&gt; port 0x9800-0x98ff mem 0xd3000000-0xd30
000ff irq 11 at device 12.0 on pci0
miibus1: &lt;MII bus&gt; on dc1
bmtphy1: &lt;BCM5201 10/100baseTX PHY&gt; PHY 1 on miibus1
bmtphy1:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
dc1: Ethernet address: 00:a0:cc:da:da:db
dc1: [ITHREAD]</pre><p>Ebben a példában láthatunk is
	két olyan kártyát, amelyek a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">dc</span>(4)</span></a>
	meghajtót használják.</p><p>Ha a hálózati kártyánk
	meghajtója nem szerepel a <code class="filename">GENERIC</code>
	konfigurációban, akkor a
	mûködéséhez be kell tölteni a
	megfelelõ meghajtót.  Ezt alapvetõen
	kétféleképpen érhetjük
	el:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Ennek legegyszerûbb módja, ha a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a> használatával
	    alkalmanként vagy a
	    <code class="filename">/boot/loader.conf</code>
	    állományban a megfelelõ sor
	    hozzáadásával a rendszer
	    indításával együtt
	    betöltjük a hálózati kártya
	    meghajtójához tartozó modult.  Nem
	    mindegyik hálózati kártya
	    meghajtója érhetõ el modul
	    formájában.  Erre konkrét
	    például szolgálnak az ISA
	    kártyákhoz tartozó modulok.</p></li><li class="listitem"><p>Másik lehetõségünk, ha
	    statikusan beépítjük a
	    kártyánk támogatását a
	    rendszermagba.  A
	    <code class="filename">/usr/src/sys/conf/NOTES</code> és az
	    <code class="filename">/usr/src/sys/arch/conf/NOTES</code>
	    állományok, valamint a meghajtóhoz
	    tartozó man oldal elolvasásából
	    megtudhatjuk a rendszermag beállításait
	    tartalmazó állományban megadandó
	    paramétereket.  A rendszermag
	    újrafordítását lásd <a class="xref" href="kernelconfig.html" title="8. fejezet - A FreeBSD rendszermag testreszabása">8. fejezet - <em>A FreeBSD rendszermag testreszabása</em></a>.  Ha a rendszermag
	    (<code class="filename">GENERIC</code>) az indulás
	    során észlelte a kártyánkat, nem
	    kell újat készítenünk.</p></li></ul></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="config-network-ndis"></a>11.8.1.1. A <span class="trademark">Windows</span>(R) NDIS meghajtóinak
	  használata</h4></div></div></div><a id="idp84887504" class="indexterm"></a><a id="idp84888016" class="indexterm"></a><a id="idp84888528" class="indexterm"></a><a id="idp84889424" class="indexterm"></a><a id="idp84889936" class="indexterm"></a><a id="idp84895184" class="indexterm"></a><p>Sajnos még mindig sok olyan gyártó
	  akad, akik a nyílt forrású
	  közösség számára nem
	  adják ki a meghajtóik
	  mûködésének alapjait, mivel az ilyen
	  adatokat szakmai titoknak tekintik.  Ebbõl
	  következik, hogy a FreeBSD és más
	  operációs rendszerek fejlesztõi
	  számára két választás
	  marad: vagy a gyári meghajtók
	  visszafejtésének hosszú és
	  fájdalmas útján haladva fejlesztik ki a
	  saját meghajtójukat, vagy pedig a
	  <span class="trademark">Microsoft</span>(R) <span class="trademark">Windows</span>(R) platformra kiadott meghajtók
	  binárisait hasznosítják.  A legtöbb
	  fejlesztõ, köztük a FreeBSD fejlesztõi is, ez
	  utóbbi megközelítést
	  választották.</p><p>Bill Paul (wpaul) jóvoltából a
	  FreeBSD 5.3-RELEASE változatában megjelent a
	  <span class="quote">"<span class="quote">Network Driver Interface Specification</span>"</span> (NDIS,
	  avagy hálózati meghajtók
	  szabványos felülete) <span class="quote">"<span class="quote">natív</span>"</span>
	  támogatása.  A FreeBSD NDISulator
	  (másnéven Project Evil, a Gonosz terve)
	  nevû komponense fog egy <span class="trademark">Windows</span>(R)-os meghajtót
	  és elhiteti vele, hogy a <span class="trademark">Windows</span>(R)
	  operációs rendszerrel kommunikál.  Mivel
	  az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ndis</span>(4)</span></a> meghajtó <span class="trademark">Windows</span>(R) binárisokat
	  használ fel, ezért csak i386 és
	  amd64 rendszerek esetén érhetõ
	  el.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ndis</span>(4)</span></a> meghajtó leginkább a PCI,
	    CardBus és PCMCIA csatolójú
	    eszközök támogatására lett
	    kitalálva, az USB eszközöket még nem
	    ismeri.</p></div><p>Az NDISulator használatához három
	  tényezõre van szükségünk:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>A rendszermag forrása</p></li><li class="listitem"><p>a <span class="trademark">Windows</span>(R) XP meghajtó binárisa
	    (<code class="filename">.SYS</code> a kiterjesztése)</p></li><li class="listitem"><p>a <span class="trademark">Windows</span>(R) XP meghajtó
	    konfigurációs állománya
	    (<code class="filename">.INF</code> a kiterjesztése)</p></li></ol></div><p>Keressük meg az említett
	  állományokat az adott kártyához.
	  Ezeket általában a mellékelt CD-n vagy a
	  gyártó honlapján találjuk meg.  A
	  most következõ példákban a
	  <code class="filename">W32DRIVER.SYS</code> és a
	  <code class="filename">W32DRIVER.INF</code> neveket fogjuk
	  használni.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">A <span class="trademark">Windows</span>(R) i386 architektúrájú
	    verziójához készült
	    meghajtóprogramokat nem tudjuk a FreeBSD/amd64
	    verziójával használni.  A
	    mûködéshez amd64-re készült
	    <span class="trademark">Windows</span>(R)-os meghajtókra van
	    szükség.</p></div><p>A következõ lépés a
	  meghajtó binárisainak betölthetõ
	  modulba fordítása.  Ennek
	  eléréséhez használjuk az
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndisgen&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ndisgen</span>(8)</span></a> parancsot a <code class="systemitem">root</code>
	  felhasználóval:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ndisgen /windowsos/meghajtó/W32DRIVER.INF /windowsos/meghajtó/W32DRIVER.SYS</code></strong></pre><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndisgen&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ndisgen</span>(8)</span></a> egy interaktív
	  segédprogram, amely mûködése
	  közben még rákérdez
	  néhány szükséges
	  információra.  Az aktuális
	  könyvtárban létrehoz egy rendszermagmodult,
	  amelyet az alábbi módon tudunk
	  betölteni:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload ./W32DRIVER_SYS.ko</code></strong></pre><p>Az elõállított modul mellé be
	  kell töltenünk még az
	  <code class="filename">ndis.ko</code> és az
	  <code class="filename">if_ndis.ko</code> modulokat is.  Ez
	  általában minden olyan modul esetén
	  megtörténik magától, amely függ
	  az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ndis</span>(4)</span></a> használatától.
	  Kézileg a következõ parancsokkal tudjuk
	  ezeket betölteni:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload ndis</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>kldload if_ndis</code></strong></pre><p>Itt az elsõ parancs betölti az NDIS miniport
	  meghajtó burkolására szánt
	  kódot, valamint a második a tényleges
	  hálózati csatolófelületet.</p><p>Most pedig a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a> kimenetében
	  ellenõrizzük, hogy történt-e valamilyen
	  hiba a betöltés során.  Ha minden
	  jól ment, akkor az alábbiakhoz hasonló
	  kimenetet produkált:</p><pre class="screen">ndis0: &lt;Wireless-G PCI Adapter&gt; mem 0xf4100000-0xf4101fff irq 3 at device 8.0 on pci1
ndis0: NDIS API version: 5.0
ndis0: Ethernet address: 0a:b1:2c:d3:4e:f5
ndis0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
ndis0: 11g rates: 6Mbps 9Mbps 12Mbps 18Mbps 36Mbps 48Mbps 54Mbps</pre><p>Innentõl kezdve az <code class="filename">ndis0</code>
	  nevû eszközt úgy tudjuk használni,
	  mint bármelyik más hálózati
	  felületet (például
	  <code class="filename">dc0</code>).</p><p>A többi modulhoz hasonló módon be
	  tudjuk állítani, hogy a rendszer
	  indulásával együtt betöltõdjenek
	  az NDIS modulok.  Ehhez elõször másoljuk az
	  imént létrehozott modult, az
	  <code class="filename">W32DRIVER_SYS.ko</code> állományt a
	  <code class="filename">/boot/modules</code>
	  könyvtárba.  Ezután adjuk hozzá a
	  következõ sort a
	  <code class="filename">/boot/loader.conf</code> állomány
	  tartalmához:</p><pre class="programlisting">W32DRIVER_SYS_load="YES"</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84936016"></a>11.8.2. A hálózati kártya
	beállítása</h3></div></div></div><a id="idp84936656" class="indexterm"></a><p>Ahogy betöltõdött a megfelelõ
	meghajtó a hálózati
	kártyánkhoz, be is kell állítanunk a
	kártyát.  A hálózati
	kártyák sok más dologgal együtt
	beállíthatóak a telepítés
	során a <span class="application">sysinstall</span>
	segítségével.</p><p>A rendszerünkben beállított
	hálózati csatolófelületek
	megjelenítéséhez gépeljük be a
	következõ parancsot:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig</code></strong>
dc0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=80008&lt;VLAN_MTU,LINKSTATE&gt;
        ether 00:a0:cc:da:da:da
        inet 192.168.1.3 netmask 0xffffff00 broadcast 192.168.1.255
        media: Ethernet autoselect (100baseTX &lt;full-duplex&gt;)
        status: active
dc1: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=80008&lt;VLAN_MTU,LINKSTATE&gt;
        ether 00:a0:cc:da:da:db
        inet 10.0.0.1 netmask 0xffffff00 broadcast 10.0.0.255
        media: Ethernet 10baseT/UTP
        status: no carrier
plip0: flags=8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; metric 0 mtu 16384
        options=3&lt;RXCSUM,TXCSUM&gt;
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x4
        inet6 ::1 prefixlen 128
        inet 127.0.0.1 netmask 0xff000000
        nd6 options=8010&lt;POINTOPOINT,MULTICAST&gt; mtu 1500</pre><p>Az elõbbi parancs kimenetében a
	következõ eszközök jelentek meg:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">dc0</code>: az elsõ Ethernet
	    felület</p></li><li class="listitem"><p><code class="filename">dc1</code>: a második Ethernet
	    felület</p></li><li class="listitem"><p><code class="filename">plilp0</code>: a párhuzamos
	    port felülete (amennyiben található
	    párhuzamos port a
	    számítógépben)</p></li><li class="listitem"><p><code class="filename">lo0</code>: a loopback
	    eszköz</p></li></ul></div><p>A FreeBSD a kártyához tartozó
	meghajtó nevével és egy sorszámmal
	azonosítja a rendszermag indulása során
	talált eszközöket.  Például az
	<code class="filename">sis2</code> a rendszerben
	található harmadik olyan eszköz, amely a
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sis</span>(4)</span></a> meghajtót használja.</p><p>A példában a <code class="filename">dc0</code>
	eszköz aktív és
	mûködõképes.  Ennek legfontosabb
	jelei:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Az <code class="literal">UP</code> szó mutatja, hogy a
	    kártyát sikerült beállítani
	    és készen áll a
	    használatra.</p></li><li class="listitem"><p>A kártya internet (<code class="literal">inet</code>)
	    címe (jelen esetünkben ez <code class="systemitem">192.168.1.3</code>).</p></li><li class="listitem"><p>Érvényes hálózati maszkkal
	    rendelkezik (<code class="literal">netmask</code>, ahol a <code class="systemitem">0xffffff00</code> a <code class="systemitem">255.255.255.0</code> címnek felel
	    meg).</p></li><li class="listitem"><p>Érvényes broadcast
	    (üzenetszóró) címmel rendelkezik
	    (ami itt most <code class="systemitem">192.168.1.255</code>).</p></li><li class="listitem"><p>A kártya MAC-címe
	    (<code class="literal">ether</code>) <code class="systemitem">00:a0:cc:da:da:da</code>.</p></li><li class="listitem"><p>A hozzá tartozó fizikai eszköz
	    kiválasztása automatikus (<code class="literal">media:
	    Ethernet autoselect (100baseTX
	    &lt;full-duplex&gt;)</code>).  Láthatjuk, hogy a
	    <code class="filename">dc1</code> eszközt egy
	    <code class="literal">10baseT/UTP</code> típusú fizikai
	    eszközhöz állítottuk be.  Az egyes
	    meghajtókhoz tartozó fizikai
	    módokról a nekik megfelelõ man oldalakon
	    olvashatunk.</p></li><li class="listitem"><p>A kapcsolat állapota (<code class="literal">status</code>)
	    <code class="literal">active</code> értékû,
	    tehát van vonal.  A <code class="filename">dc1</code>
	    esetén láthatjuk, hogy a <code class="literal">status: no
	    carrier</code> (nincs vonal).  Ez teljesen
	    normálisnak tekinthetõ minden olyan esetben,
	    amikor a kártyába még nem dugtunk
	    Ethernet-kábelt.</p></li></ol></div><p>Amennyiben az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> kimenete valami
	ilyesmi:</p><pre class="screen">dc0: flags=8843&lt;BROADCAST,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
	        options=80008&lt;VLAN_MTU,LINKSTATE&gt;
	        ether 00:a0:cc:da:da:da
	        media: Ethernet autoselect (100baseTX &lt;full-duplex&gt;)
	        status: active</pre><p>akkor az arra utal, hogy a kártyát nem
	állítottuk be.</p><p>A kártya beállításához a
	<code class="systemitem">root</code> felhasználó
	jogosultságaira van szükségünk.  A
	hálózati kártyák
	beállítása az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>
	segítségével elvégezhetõ
	parancssorból is, de a gép
	újraindításakor az így megadott
	értékek elvesznek.  Ezért az
	<code class="filename">/etc/rc.conf</code> állományba kell
	felvennünk a hálózati kártyák
	érvényes beállításait.</p><p>A kedvenc szövegszerkesztõnkben nyissuk meg az
	<code class="filename">/etc/rc.conf</code> állományt.
	Minden egyes hálózati csatolóhoz fel kell
	vennünk benne egy sort, ennek megfelelõen most a
	példához tartozó módon az
	alábbiakat:</p><pre class="programlisting">ifconfig_dc0="inet 192.168.1.3 netmask 255.255.255.0"
ifconfig_dc1="inet 10.0.0.1 netmask 255.255.255.0 media 10baseT/UTP"</pre><p>A <code class="filename">dc0</code> és
	<code class="filename">dc1</code> neveket kell a rendszerünkben
	ténylegesen megtalálható eszközök
	neveire kicserélni, valamint megadni a nekik
	megfelelõ címeket.  A kártya
	meghajtójának és az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> man
	oldalának elolvasásával
	kideríthetjük az itt megadható további
	beállításokat, valamint az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>
	man oldalán részletesebben megismerhetjük az
	<code class="filename">/etc/rc.conf</code> formai
	követelményeit.</p><p>Ha a telepítés során
	beállítottuk volna a hálózati
	kapcsolatokat, akkor tapasztalhatjuk, hogy egyes
	hálózati kártyák sorai itt
	már szerepelnek.  Ellenõrizzük az
	<code class="filename">/etc/rc.conf</code> tartalmát, mielõtt
	bõvítenénk!</p><p>Mindezek mellett az <code class="filename">/etc/hosts</code>
	állományba is be kell írnunk a helyi
	hálózatunkon található
	különféle gépek neveit és
	IP-címeit, ha még nem szerepelnének ott.
	Errõl további részleteket a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts</span>(5)</span></a> man
	oldalról és az
	<code class="filename">/usr/share/examples/etc/hosts</code>
	állományból tudhatunk meg.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ha a géppel szeretnénk majd csatlakozni az
	  internetre, akkor ne felejtsük el manuálisan
	  beállítani az alapértelmezett
	  átjárót és a
	  névfeloldáshoz szükséges
	  kiszolgálót:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 'defaultrouter="alapertelmezett_atjaro"' &gt;&gt; /etc/rc.conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>echo 'nameserver DNS_kiszolgalo' &gt;&gt; /etc/resolv.conf</code></strong></pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85006928"></a>11.8.3. Tesztelés és
	hibaelhárítás</h3></div></div></div><p>Miután az <code class="filename">/etc/rc.conf</code>
	állományban elvégeztük a
	szükséges változtatásokat,
	érdemes újraindítanunk a
	rendszerünket.  Ennek révén
	érvényesítjük a
	csatolófelületekkel kapcsolatos
	változtatásainkat és
	ellenõrizzük, hogy így a rendszer
	mindenféle hibaüzenet nélkül
	képes elindulni.  A másik lehetõség,
	ha csak magát a hálózati alrendszer
	konfigurációját indítjuk el
	újra:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/netif restart</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ha az <code class="filename">/etc/rc.conf</code>
	  állományban már beállítottuk
	  az alapértelmezett átjárót, akkor
	  elegendõ csupán ez a parancs:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/routing restart</code></strong></pre></div><p>Ahogy újrakonfiguráltuk a
	hálózati alrendszert, ki is tudjuk
	próbálni a hálózati
	felületeket.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85011664"></a>11.8.3.1. Az Ethernet kártyák
	  tesztelése</h4></div></div></div><a id="idp85012304" class="indexterm"></a><p>Az Ethernet kártyák helyes
	  beállításának
	  vizsgálatához két dolgot kell
	  kipróbálnunk.  Elõször is
	  pingeljük magát a felületet, majd
	  ezután pingeljünk meg a helyi
	  hálózaton egy másik
	  számítógépet.</p><p>Elsõként tehát próbáljuk
	  meg a helyi felületet:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ping -c5 192.168.1.3</code></strong>
PING 192.168.1.3 (192.168.1.3): 56 data bytes
64 bytes from 192.168.1.3: icmp_seq=0 ttl=64 time=0.082 ms
64 bytes from 192.168.1.3: icmp_seq=1 ttl=64 time=0.074 ms
64 bytes from 192.168.1.3: icmp_seq=2 ttl=64 time=0.076 ms
64 bytes from 192.168.1.3: icmp_seq=3 ttl=64 time=0.108 ms
64 bytes from 192.168.1.3: icmp_seq=4 ttl=64 time=0.076 ms

--- 192.168.1.3 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.074/0.083/0.108/0.013 ms</pre><p>Most pedig pingeljünk meg egy másik
	  számítógépet a helyi
	  hálózaton:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ping -c5 192.168.1.2</code></strong>
PING 192.168.1.2 (192.168.1.2): 56 data bytes
64 bytes from 192.168.1.2: icmp_seq=0 ttl=64 time=0.726 ms
64 bytes from 192.168.1.2: icmp_seq=1 ttl=64 time=0.766 ms
64 bytes from 192.168.1.2: icmp_seq=2 ttl=64 time=0.700 ms
64 bytes from 192.168.1.2: icmp_seq=3 ttl=64 time=0.747 ms
64 bytes from 192.168.1.2: icmp_seq=4 ttl=64 time=0.704 ms

--- 192.168.1.2 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.700/0.729/0.766/0.025 ms</pre><p>Ha beállítottuk az
	  <code class="filename">/etc/hosts</code> állományt, akkor
	  a <code class="systemitem">192.168.1.2</code> helyett a
	  gép nevét is megadhatjuk.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85018320"></a>11.8.3.2. A hibák elhárítása</h4></div></div></div><a id="idp85018960" class="indexterm"></a><p>A hardverek és szoftverek
	  beállításaiban mindig is valódi
	  kín megtalálni a hibákat, és
	  ezeket a kínokat többnyire úgy tudjuk
	  enyhíteni, ha elõször az egyszerû
	  hibaforrásokat szûrjük ki.  Csatlakoztattuk a
	  hálózati kábelt?  Tisztességesen
	  beállítottuk a hálózati
	  szolgáltatásokat?  Jól
	  állítottuk be a tûzfalat?  A FreeBSD
	  képes kezelni a kártyát?  A
	  hibajelentések elküldése elõtt mindig
	  bújjuk át a támogatott
	  hardvereszközök listáját.  A FreeBSD
	  verziókat frissítsük a legújabb
	  STABLE változatra.  Olvassuk át a
	  levelezési listák archívumait vagy
	  legalább keressünk rá a
	  témára az interneten.</p><p>Ha a kártya mûködik, de a
	  teljesítménye nem kielégítõ,
	  érdemes ennek utánanézni a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tuning&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">tuning</span>(7)</span></a>
	  man oldalon.  Ilyenkor érdemes ellenõrizni a
	  hálózati beállításainkat
	  is, mivel a helytelen beállítások gyakran
	  okoznak teljesítményvesztést.</p><p>Bizonyos esetekben láthatunk egy vagy két
	  <span class="errorname">device timeout</span> típusú
	  hibát is, ami a kártyák egyes
	  fajtáinál elfogadható.  Ha azonban
	  folyamatosan megjelennek vagy zavaróvá
	  válnak, érdemes utánanéznünk,
	  hogy az eszköz nem ütközik-e valamelyik
	  másikkal.  Mindenképpen
	  gyõzõdjünk meg a kábelek
	  épségérõl és
	  csatlakoztatásáról.  Még az is
	  elképzelhetõ, hogy egyszerûen csak egy
	  másik hálózati kártyára van
	  szükségünk.</p><p>Néha felbukkanak <span class="errorname">watchdog
	  timeout</span> jellegû hibák is.  Ilyenkor
	  elsõként mindig a hálózati
	  kábelt ellenõrizzük.  Egyes
	  kártyáknak olyan PCI foglalatra van
	  szükségük, ami támogatja a Bus
	  Mastering opciót.  Néhány régebbi
	  alaplapon csak ilyen PCI bõvítõhely
	  található (ami általában a 0.
	  foglalat).  Olvassunk utána a hálózati
	  kártya és az alaplap
	  dokumentációjában, hátha ezek
	  okozzák a problémát.</p><p>A <span class="errorname">No route to host</span> üzenet
	  akkor jelenik meg, ha a rendszer képtelen
	  megállapítani, milyen úton juttassa el a
	  csomagokat a megadott célhoz.  Ez többnyire
	  olyankor történik meg, amikor nem adtunk meg
	  alapértelmezett kézbesítési
	  irányt (default route) vagy nem dugtuk be a
	  hálózati kábelt.  A <code class="command">netstat
	  -rn</code> kimenetébõl meg tudjuk
	  állapítani, hogy létezik-e
	  érvényes út az elérni
	  kívánt cél felé.  Ha nincs, akkor
	  haladjunk tovább a <a class="xref" href="advanced-networking.html" title="31. fejezet - Egyéb haladó hálózati témák">31. fejezet - <em>Egyéb haladó hálózati
    témák</em></a>re.</p><p>A <span class="errorname">ping: sendto: Permission denied</span>
	  jellegû üzeneteket többségében
	  egy helytelenül beállított tûzfal
	  okozza.  Ha az <code class="command">ipfw</code>
	  mûködését engedélyeztük a
	  rendszermagban, de nem adtunk meg hozzá
	  szabályokat, akkor az alapértelmezett
	  házirend szerint minden forgalmat blokkolni fog,
	  tehát még a pingeket is!  Ezzel kapcsolatban a
	  <a class="xref" href="firewalls.html" title="30. fejezet - Tûzfalak">30. fejezet - <em>Tûzfalak</em></a> elolvasását
	  ajánljuk.</p><p>Elõfordulhat, hogy a kártya
	  teljesítménye igen gyenge vagy az átlagos
	  alatt van.  Ilyenkor a fizikai eszköz
	  <code class="literal">autoselect</code> (automatikus)
	  típusú kiválasztása helyett
	  érdemes megadnunk a konkrét eszköznek
	  megfelelõ típust.  Habár ez a legtöbb
	  hardver esetén beválik, nem mindenki
	  számára jelent megoldást.
	  Ismételten csak annyit tudunk ehhez hozzátenni,
	  hogy ellenõrizzük a hálózati
	  beállításainkat és olvassuk el a
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tuning&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">tuning</span>(7)</span></a> man oldalt.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configtuning-rcd.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="configtuning-virtual-hosts.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">11.7. Az rc használata FreeBSD alatt </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 11.9. Virtuális címek</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>