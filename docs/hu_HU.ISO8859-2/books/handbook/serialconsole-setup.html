<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>26.6. A soros vonali konzol beállítása</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="serialcomms.html" title="26. fejezet - Soros vonali kommunikáció" /><link rel="prev" href="dialout.html" title="26.5. A betárcsázós szolgáltatások használata" /><link rel="next" href="ppp-and-slip.html" title="27. fejezet - A PPP és a SLIP" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">26.6. A soros vonali konzol beállítása</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dialout.html">Vissza</a> </td><th width="60%" align="center">26. fejezet - Soros vonali kommunikáció</th><td width="20%" align="right"> <a accesskey="n" href="ppp-and-slip.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="serialconsole-setup"></a>26.6. A soros vonali konzol beállítása</h2></div><div><span class="authorgroup">Készítette: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">YOKOTA</span>, <span class="firstname">Kazutaka</span></span>. </span></div><div><span class="authorgroup">Az alapján szolgáló
	    írást készítette: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Paul</span>, <span class="firstname">Bill</span></span>. </span></div></div></div><a id="idp94854480" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-intro"></a>26.6.1. Bevezetés</h3></div></div></div><p>A FreeBSD képes úgy is elindulni, ha
	konzolként mindössze egy buta terminált
	kapcsolunk rá soros porton keresztül.  Az ilyen
	típusú konfigurációs alapvetõen
	két típus számára bizonyul
	hasznosnak: azon rendszergazdák számára,
	akik billentyûzettel és monitorral nem
	rendelkezõ gépekre akarnak FreeBSD-t telepíteni,
	és olyan fejlesztõk számára, akik a
	rendszermag vagy különbözõ
	eszközmeghajtók mûködését
	akarják nyomon követni.</p><p>Ahogy arról már a <a class="xref" href="boot.html" title="12. fejezet - A FreeBSD rendszerindítási folyamata">12. fejezet - <em>A FreeBSD rendszerindítási folyamata</em></a>ben is
	szó esett, a FreeBSD három indítási
	fokozattal rendelkezik.  Az elsõ két fokozat a
	rendszerindító blokk kódjában foglal
	helyet, amely pedig a lemezen található FreeBSD slice
	elején.  A rendszer indulásakor ez a blokk
	betöltõdik és lefuttatja a harmadik fokozatot
	képviselõ rendszertöltõt (a
	<code class="filename">/boot/loader</code>
	állományt).</p><p>Ha soros vonali konzol
	beállításához tehát be kell
	állítanunk a rendszerindító blokkot,
	a rendszertöltõt és a rendszermagot.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-howto-fast"></a>26.6.2. A soros konzol beállítása,
	rövidített változat</h3></div></div></div><p>Ebben a szakaszban azt feltételezzük, hogy az
	alap beállításokkal dolgozunk és
	csupán egy gyors áttekintésre van
	szükségünk a soros vonali
	konzolról.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Csatlakoztassunk egy soros kábelt a
	    <code class="filename">COM1</code> portra és a
	    terminálra.</p></li><li class="step"><p>Rendszeradminisztrátorként a
	    következõ parancs kell kiadnunk ahhoz, hogy a
	    soros konzolon láthassuk az összes
	    rendszerindításhoz tartozó
	    üzenetet:</p><pre class="screen"><code class="prompt">#</code> echo 'console="comconsole"' &gt;&gt; /boot/loader.conf</pre></li><li class="step"><p>Nyissuk meg az <code class="filename">/etc/ttys</code>
	    állományt, és a
	    <code class="filename">ttyd0</code> eszközhöz
	    tartozó sorban írjuk át az
	    <code class="literal">off</code> paramétert az
	    <code class="literal">on</code> értékre és a
	    <code class="literal">dialup</code> paramétert a
	    <code class="literal">vt100</code> értékre.  Ha nem
	    ezeket állítjuk be, akkor a soros konzol
	    keresztül jelszó megadása
	    nélkül is be tudunk jelentkezni, ami viszont egy
	    biztonsági rés veszélyével
	    fenyeget.</p></li><li class="step"><p>A változtatások
	    érvényesítéséhez
	    indítsuk újra a rendszerünket.</p></li></ol></div><p>Ha ettõl eltérõ
	beállításokra lenne
	szükségünk, akkor a folyamat egyes
	lépéseibe a <a class="xref" href="serialconsole-setup.html#serialconsole-howto" title="26.6.3. A soros vonali konzol beállítása">26.6.3. szakasz - A soros vonali konzol
	beállítása</a>ban kaphatunk mélyebb
	betekintést.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-howto"></a>26.6.3. A soros vonali konzol
	beállítása</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Készítsük elõ a soros
	    kábelt.</p><a id="idp94884944" class="indexterm"></a><p>Vagy a null-modem kábelre vagy pedig egy
	    szabványos soros kábelre és egy
	    null-modem átalakítóra lesz
	    szükségünk.  A soros kábelekkel
	    kapcsolatosan a <a class="xref" href="serial.html#serial-cables-ports" title="26.2.2. Kábelek és portok">26.2.2. szakasz - Kábelek és portok</a>t
	    érdemes elolvasni.</p></li><li class="step"><p>Húzzuk ki a billentyûzetet.</p><p>A legtöbb személyi
	    számítógép az
	    indítása (vagyis a Power-On Self-Test, POST)
	    során hibát jelez, ha nem
	    érzékel billentyûzetet.  Egyes
	    gépek hangosan panaszolják a billentyûzet
	    hiányát, és nem is hajlandóak
	    egészen addig elindulni, amíg nem
	    csatlakoztatunk egyet.</p><p>Ha a számítógépünk
	    hibát küld, de ennek ellenére
	    mégis elindul, akkor semmit nem kell
	    csinálnunk.  (Némelyik Phonix BIOS-os
	    gépen ilyenkor megjelenik a <span class="errorname">Keyboard
	    failed</span> hibaüzenet, de ettõl még
	    rendesen elindul a gép.)</p><p>Amennyiben a
	    számítógépünk nem
	    hajlandó billentyûzet nélkül
	    elindulni, állítsuk be a BIOS-ban a
	    <span class="quote">"<span class="quote">hiba</span>"</span> figyelmen kívül
	    hagyását (már ha ez lehetséges).
	    Az alaplap leírásában
	    találhatjuk meg ennek pontos részleit.</p><div xmlns="" class="tip"><h3 class="admontitle">Tipp: </h3><p xmlns="http://www.w3.org/1999/xhtml">A BIOS paraméterei között a
	      billentyûzetet állítsuk <span class="quote">"<span class="quote">Not
	      installed</span>"</span> állapotúra.  Ilyenkor
	      még továbbra is használható a
	      billentyûzet, ezzel mindössze csak a BIOS
	      számára tiltjuk le az
	      indításkori ellenõrzést,
	      ezért nem fog panaszkodni a hiánya miatt.
	      Tehát a billentyûzetet még a <span class="quote">"<span class="quote">Not
	      installed</span>"</span> beállítása
	      esetén is nyugodtan csatlakoztatjuk, mert
	      mûködni fog.</p></div><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ha a rendszerünkön <span class="trademark">PS/2</span>(R)-es egér is
	      található, akkor jó eséllyel a
	      billentyûzettel együtt az egeret is ki tudjuk
	      húzni.  Mivel a <span class="trademark">PS/2</span>(R)-es egér osztozik a
	      billentyûzettel bizonyos hardvereken, ezért ha
	      nem húzzuk ki az egeret is, akkor az alaplap
	      még továbbra is képes azt gondolni,
	      hogy a billentyûzet ott van.  Például
	      az AMI BIOS-os Gateway 2000-as 90 MHz-es Pentium
	      rendszer pontosan így mûködik.
	      Általában véve azonban ez nem szokott
	      gondot okozni, mivel az egér billentyûzet
	      nélkül úgy sem ér
	      túlságosan sokat.</p></div></li><li class="step"><p>Csatlakoztassunk egy buta terminált a
	    <code class="filename">COM1</code>
	    (<code class="filename">sio0</code>) portra.</p><p>Ha nem rendelkezünk buta terminállal, akkor
	    erre célra ugyanúgy alkalmas egy régi
	    XT-s PC valamilyen modemprogrammal vagy egy soros porton
	    csatlakozó másik <span class="trademark">UNIX</span>(R)-os gép.  Ha
	    nincs <code class="filename">COM1</code>
	    (<code class="filename">sio0</code>) portunk, akkor
	    szerezzünk egyet.  Jelen pillanatban a
	    rendszerindító blokk
	    újrafordítása nélkül a
	    <code class="filename">COM1</code> porton kívül nem
	    tudunk másikat választani.  Ha a
	    <code class="filename">COM1</code> portra már raktunk
	    valamilyen másik eszközt, akkor azt ideiglenesen
	    húzzuk le, majd a FreeBSD telepítése
	    és elindítása után tegyünk
	    fel egy másik rendszerindító blokkot.
	    (Egyébként feltételezzük, hogy a
	    <code class="filename">COM1</code> elérhetõ egy
	    állomány/számító/terminálszerveren
	    - ha valóban valamilyen másik
	    célra szükségünk lenne a
	    <code class="filename">COM1</code> portra (és
	    semmiképpen sem tudjuk átrakni a
	    <code class="filename">COM2</code>
	    (<code class="filename">sio1</code>) portra), akkor
	    valószínûleg nem is ezzel kellene
	    elsõként foglalkoznunk.)</p></li><li class="step"><p>Gondoskodjunk róla, hogy a rendszermag
	    beállításait tartalmazó
	    állományban a <code class="filename">COM1</code>
	    (<code class="filename">sio0</code>) eszközhöz megadtuk
	    a megfelelõ paramétereket.</p><p>Ezek az alábbiak:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">0x10</code></span></dt><dd><p>A konzolos mûködési mód
		  engedélyezése az adott egységhez.
		  Ha megadjuk ezt a paramétert, akkor a
		  többit a rendszer figyelmen kívül
		  hagyja.  Pillanatnyilag legfeljebb egy egység
		  birtokolhatja ezt a beállítást.
		  Ha több ilyet adtunk volna meg, akkor (a
		  felírás sorrendje szerint) az elsõ
		  kap ilyen szerepet.  Ez a
		  beállítás önmagában
		  még nem teszi a soros portot konzollá.
		  Ehhez még szükségünk van a
		  következõ beállításra,
		  vagy a <code class="option">-h</code> megadására
		  is.</p></dd><dt><span class="term"><code class="literal">0x20</code></span></dt><dd><p>Az egység konzollá
		  nyilvánítása (hacsak nincs egy
		  tõle nagyobb prioritású konzol),
		  függetlenül a lentebb ismertetendõ
		  <code class="option">-h</code> opciótól.  A
		  <code class="literal">0x20</code> értéket a
		  <code class="option">0x10</code> értékkel
		  együtt kell megadni.</p></dd><dt><span class="term"><code class="literal">0x40</code></span></dt><dd><p>(A <code class="literal">0x10</code> értékkel
		  együtt) az egységet kivonja a
		  normális elérés alól.  Ezt
		  a beállítást ne
		  használjuk, ha soros vonali konzolt akarunk
		  üzemeltetni az adott porton.  Ezzel az
		  egységet csak a rendszermag távoli
		  nyomkövetéséhez tudjuk
		  használni.  A távoli
		  nyomkövetésrõl a <a class="link" href="../../../../doc/en_US.ISO8859-1/books/developers-handbook/index.html" target="_top">
		  fejlesztõk
		  kézikönyvében</a> olvastunk
		  bõvebben.</p></dd></dl></div><p>Példa:</p><pre class="programlisting">device sio0 at isa? port IO_COM1 flags 0x10 irq 4</pre><p>A további részletekrõl a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a>
	    man oldal tud felvilágosítást
	    nyújtani.</p><p>Ha nem állítottuk be a megfelelõ
	    paramétereket, akkor (egy másik konzolon)
	    futtassuk a UserConfig programot vagy fordítsuk
	    újra a rendszermagot.</p></li><li class="step"><p>Hozzunk létre egy
	    <code class="filename">boot.config</code> állományt a
	    rendszer indításához használt
	    meghajtó <code class="literal">a</code>
	    partíciójának
	    gyökerében.</p><p>Ez az állomány mondja meg a
	    rendszerindító blokkban
	    található kódnak, hogy miként
	    akarjuk indítani a rendszerünket.  A soros
	    vonali konzol életrekeltéséhez a most
	    következõ opciók közül kell
	    megadnunk egyet vagy többet - amennyiben
	    többet akarunk megadni, akkor mindegyiket egyetlen
	    sorban szerepeltessük:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-h</code></span></dt><dd><p>A belsõ és a soros vonali konzolok
		  közti átkapcsolás.  Ezzel tudunk a
		  konzolos eszközök között
		  váltani.  Például, ha egy
		  belsõ (video) konzolról indítjuk a
		  rendszert, akkor a rendszertöltõnek
		  és a rendszermagnak átadott
		  <code class="option">-h</code> paraméterrel arra tudjuk
		  ezeket utasítani, hogy konzolként a
		  soros portot használják.  Vagy ha soros
		  porton keresztül indítjuk a rendszert,
		  akkor <code class="option">-h</code> megadásával
		  megkérhetjük a rendszertöltõt
		  és a rendszermagot, hogy ezután
		  már a videokártyát
		  használja konzolként.</p></dd><dt><span class="term"><code class="option">-D</code></span></dt><dd><p>Az egy- és kétkonzolos
		  beállítások közti
		  váltás.  Az egykonzolos
		  konfigurációban a konzol lehet
		  belsõ (video) vagy soros vonali, attól
		  függõen, hogy miként
		  használtuk a fenti <code class="option">-h</code>
		  opciót.  A kétkonzolos
		  konfigurációban azonban a
		  videokártyán és a soros vonalon
		  keresztül is egyszerre megjelenik a konzol,
		  függetlenül a <code class="option">-h</code>
		  hatásától.  Ilyenkor viszont
		  vegyük figyelembe, hogy ez a kétkonzolos
		  konfiguráció csak a
		  rendszerindító blokk futása alatt
		  él.  Amint a rendszerindító
		  megkapja a vezérlést, a
		  <code class="option">-h</code> által megadott konzol
		  válik az egyedülivé.</p></dd><dt><span class="term"><code class="option">-P</code></span></dt><dd><p>A rendszerindító blokk
		  megpróbálja megkeresni a
		  billentyûzetet.  Ha nem találja, akkor
		  magától beállítja a
		  <code class="option">-D</code> és <code class="option">-h</code>
		  opciókat.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Tárbeli korlátozások miatt
		    a rendszerindító blokk jelenlegi
		    változata a <code class="option">-P</code>
		    paraméterrel csak a kiterjesztett
		    billentyûzeteket képes kezelni.  A 101
		    gombnál kevesebbel (tehát F11
		    és F12 gombokkal nem) rendelkezõ
		    billentyûzeteket ezért nem
		    feltétlenül fogja észlelni.
		    Ugyanezen korlátozás miatt egyes
		    laptopokon sem minden esetben sikerül
		    érzékelni a billentyûzetet.  Ha
		    ez a rendszerünkön
		    problémához vezetne, akkor
		    egyszerûbb lesz elhagyni a <code class="option">-P</code>
		    használatát.  Sajnos, jelenleg
		    semmilyen megoldás nincs erre.</p></div></dd></dl></div><p>Vagy a <code class="option">-P</code> opcióval
	    állítassuk be automatikusan a konzolt, vagy
	    pedig a <code class="option">-h</code> opcióval
	    engedélyezzük a soros vonali konzolt.</p><p>Természetesen itt a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot</span>(8)</span></a> man oldalon
	    szereplõ összes többi paramétert is
	    megadhatjuk.</p><p>A <code class="option">-P</code> kivételével az
	    összes opció a rendszertöltõnek
	    (<code class="filename">/boot/loader</code>) kerül
	    átadásra.  A rendszertöltõ
	    egyedül a <code class="option">-h</code>
	    állapotából dönti el, hogy mely
	    belsõ videoeszközön vagy soros porton legyen
	    a konzol.  Ez azt jelenti, hogy a
	    <code class="filename">/boot.config</code> állományban
	    ha megadjuk a <code class="option">-D</code> opciót, de mellette
	    nem szerepel a <code class="option">-h</code>, akkor a soros vonali
	    konzolt csak a rendszerindító blokk
	    futása alatt tudjuk elérni - a
	    rendszertöltõ ugyanis alapból a
	    videokártyát használja
	    konzolként.</p></li><li class="step"><p>Kapcsoljuk be a
	    számítógépünket.</p><p>Amikor elindítjuk a FreeBSD-s gépünket,
	    a rendszerindító blokk kiírja a
	    <code class="filename">/boot.config</code> tartalmát a
	    konzolra.  Például így:</p><pre class="screen">/boot.config: -P
Keyboard: no</pre><p>A második sor csak olyankor jelenik meg, ha a
	    <code class="filename">/boot.config</code> állományban
	    a <code class="option">-P</code> beállítás is
	    szerepel, és a billentyûzet
	    jelenlétét (yes) vagy hiányát
	    (no) jelzi.  A <code class="filename">/boot.config</code>
	    tartalmától függõen ezek az
	    üzenetek vagy a soros vonali vagy a belsõ konzolon
	    jelennek meg, esetleg mind a kettõn.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th align="left">Beállítás</th><th align="left">Ahol megjelenik</th></tr></thead><tbody><tr><td>nincs</td><td>belsõ konzol</td></tr><tr><td><code class="option">-h</code></td><td>soros vonali konzol</td></tr><tr><td><code class="option">-D</code></td><td>soros vonali és belsõ
		    konzol</td></tr><tr><td><code class="option">-Dh</code></td><td>soros vonali és belsõ
		    konzol</td></tr><tr><td><code class="option">-P</code>, van
		    billentyûzet</td><td>belsõ konzol</td></tr><tr><td><code class="option">-P</code>, nincs
		    billentyûzet</td><td>soros vonali konzol</td></tr></tbody></table></div><p>Az iménti üzenetek felbukkanása
	    után a további konzolos üzenetek
	    küldésében egy rövid szünet
	    következik, amíg a rendszerindító
	    blokk a rendszertöltõ
	    betöltésével folytatja a rendszer
	    indítását.  Normális
	    körülmények között ezt a
	    folyamatot nem kell megszakítanunk, de esetleg
	    olyankor mégis érdemes lehet, ha le akarjuk
	    ellenõrizni a
	    beállításainkat.</p><p>A rendszerindítási folyamat
	    félbeszakításához az
	    <span class="keycap"><strong>Enter</strong></span> billentyûn kívül
	    nyomjuk le valamelyik másikat.  Ekkor a
	    rendszerindító blokk megáll és
	    várja a további parancsokat.  Ekkor valami
	    ilyesmit láthatunk:</p><pre class="screen">&gt;&gt; FreeBSD/i386 BOOT
Default: 0:ad(0,a)/boot/loader
boot:</pre><p>Nézzük meg, hogy
	    <code class="filename">/boot.config</code>
	    beállításainak megfelelõen a fenti
	    üzenet a soros vonali konzolon vagy a belsõ
	    konzolon, illetve mind a kettõn megjelenik-e.  Ha az
	    üzenet a megfelelõ konzolon megjelenik, akkor az
	    <span class="keycap"><strong>Enter</strong></span> lenyomásával
	    folytathatjuk a rendszer
	    indítását.</p><p>Ha nekünk a soros vonali konzolra lenne
	    szükségünk, de semmi nem jelenik meg a
	    soros terminálon, akkor valamit
	    valószínûleg nem jól
	    állítottunk be.  A
	    rendszerindító blokktól kapott
	    parancssorban a <code class="option">-h</code>
	    begépelésével és az
	    <span class="keycap"><strong>Enter</strong></span> vagy <span class="keycap"><strong>Return</strong></span>
	    lenyomásával (ha lehetséges)
	    jelezzük neki (és így a
	    rendszertöltõnek és a rendszermagnak is) a
	    soros vonali konzol kiválasztását.
	    Miután befejezõdött a rendszer
	    indítása, menjünk vissza és
	    ellenõrizzük a megfelelõ
	    paramétereket.</p></li></ol></div><p>Ahogy sikerült elindítani a
	rendszertöltõt és a
	rendszerindítás harmadik fokozatába
	léptünk, a rendszertöltõ megfelelõ
	környezeti változóin keresztül
	még mindig van lehetõségünk
	váltani a soros vonali és a belsõ konzol
	között, lásd <a class="xref" href="serialconsole-setup.html#serialconsole-loader" title="26.6.6. A konzol megváltoztatása a rendszertöltõbõl">26.6.6. szakasz - A konzol megváltoztatása a
	rendszertöltõbõl</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-summary"></a>26.6.4. Összefoglalás</h3></div></div></div><p>Itt most röviden összefoglaljuk az eddig
	tárgyalt különbözõ
	beállításokat és ténylegesen
	kiválasztott konzolt.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94998096"></a>26.6.4.1. 1.  eset: a <code class="filename">sio0</code>
	  eszköznél a 0x10 beállítást
	  adjuk meg</h4></div></div></div><pre class="programlisting">device sio0 at isa? port IO_COM1 flags 0x10 irq 4</pre><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th align="left">A /boot.config
		  beállításai</th><th align="left">Konzol a
		  rendszerindító blokk alatt</th><th align="left">Konzol a rendszertöltõ
		  alatt</th><th align="left">Konzol a rendszermagban</th></tr></thead><tbody><tr><td>nincsenek</td><td>belsõ</td><td>belsõ</td><td>belsõ</td></tr><tr><td><code class="option">-h</code></td><td>soros vonali</td><td>soros vonali</td><td>soros vonali</td></tr><tr><td><code class="option">-D</code></td><td>soros vonali és belsõ</td><td>belsõ</td><td>belsõ</td></tr><tr><td><code class="option">-Dh</code></td><td>soros vonali és belsõ</td><td>soros vonali</td><td>soros vonali</td></tr><tr><td><code class="option">-P</code>, van
		  billentyûzet</td><td>belsõ</td><td>belsõ</td><td>belsõ</td></tr><tr><td><code class="option">-P</code>, nincs
		  billentyûzet</td><td>soros vonali és belsõ</td><td>soros vonali</td><td>soros vonali</td></tr></tbody></table></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95020880"></a>26.6.4.2. 2.  eset: a <code class="filename">sio0</code>
	  eszköznél 0x30
	  beállítása</h4></div></div></div><pre class="programlisting">device sio0 at isa? port IO_COM1 flags 0x30 irq 4</pre><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th align="left">A /boot.config
		  beállításai</th><th align="left">Konzol a
		  rendszerindító blokk alatt</th><th align="left">Konzol a rendszertöltõ
		  alatt</th><th align="left">Konzol a rendszermagban</th></tr></thead><tbody><tr><td>nincsenek</td><td>belsõ</td><td>belsõ</td><td>soros vonali</td></tr><tr><td><code class="option">-h</code></td><td>soros vonali</td><td>soros vonali</td><td>soros vonali</td></tr><tr><td><code class="option">-D</code></td><td>soros vonali és belsõ</td><td>belsõ</td><td>soros vonali</td></tr><tr><td><code class="option">-Dh</code></td><td>soros vonali és belsõ</td><td>soros vonali</td><td>soros vonali</td></tr><tr><td><code class="option">-P</code>, van
		  billentyûzet</td><td>belsõ</td><td>belsõ</td><td>soros vonali</td></tr><tr><td><code class="option">-P</code>, nincs
		  billentyûzet</td><td>soros vonali és belsõ</td><td>soros vonali</td><td>soros vonali</td></tr></tbody></table></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-tips"></a>26.6.5. Tanácsok a soros vonali konzol
	használatához</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95044432"></a>26.6.5.1. Nagyobb soros vonali sebesség
	  beállítása</h4></div></div></div><p>A soros port alapértelmezései a
	  következõk: 9600 baud, 8 bites
	  átvitel, paritás nincs és 1 stopbit.  Ha
	  a konzol alapsebességét meg akarjuk
	  változtatni, akkor ahhoz a következõket kell
	  tennünk:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Fordítsuk újra a
	      rendszerindító blokkokat úgy, hogy a
	      <code class="varname">BOOT_COMCONSOLE_SPEED</code>
	      változóban a konzolnak egy másik
	      sebességet adunk meg.  Az új
	      rendszerindító blokkok
	      fordításáról és
	      telepítésérõl a <a class="xref" href="serialconsole-setup.html#serialconsole-com2" title="26.6.5.2. Soros vonali konzol a sio0 porton kívül máshol">26.6.5.2. szakasz - Soros vonali konzol a <code class="filename">sio0</code>
	  porton kívül máshol</a>ban kapunk részletes
	      leírást.</p><p>Ha a soros vonali konzolt nem a <code class="option">-h</code>
	      opcióval állítottuk be, vagy ha a
	      rendszermag a rendszerindító
	      blokkoktól eltérõ módon
	      éri el a soros vonali konzolt, akkor a rendszermag
	      beállításai közé
	      még az alábbit is fel kell vennünk,
	      majd újra kell fordítanunk:</p><pre class="programlisting">options CONSPEED=19200</pre></li><li class="listitem"><p>A rendszermagnak adjuk át a <code class="option">-S</code>
	      rendszerindítási paramétert.  A
	      <code class="option">-S</code> parancssori opció a
	      <code class="filename">/boot.config</code>
	      állományban is megadható.  A
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot</span>(8)</span></a> man oldalon tudhatjuk meg, hogy a
	      <code class="filename">/boot.config</code>
	      beállításai közé hogyan
	      tudjuk felvenni és ott milyen további
	      lehetõségeink vannak még.</p></li><li class="listitem"><p>A <code class="filename">/boot/loader.conf</code>
	      állományban engedélyezzük a
	      <code class="varname">comconsole_speed</code>
	      beállítást.</p><p>Ez a beállítás a szintén a
	      <code class="filename">/boot/loader.conf</code>
	      állományban megadható
	      <code class="varname">console</code>, <code class="varname">boot_serial</code>
	      és <code class="varname">boot_multicons</code>
	      változóktól függ.  A soros
	      vonali konzol sebességét tehát
	      például így tudjuk
	      megváltoztatni a
	      <code class="varname">comconsole_speed</code>
	      megadásával:</p><pre class="programlisting">boot_multicons="YES"
boot_serial="YES"
comconsole_speed="115200"
console="comconsole,vidconsole"</pre></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-com2"></a>26.6.5.2. Soros vonali konzol a <code class="filename">sio0</code>
	  porton kívül máshol</h4></div></div></div><p>Ha valamilyen okból kifolyólag nem a
	  <code class="filename">sio0</code> porton keresztül akarjuk
	  használni a konzolt, akkor ahhoz a
	  rendszerindító blokkok, a
	  rendszertöltõ és a rendszermag
	  forrásait újra kell fordítanunk az
	  alábbiak szerint:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Szerezzük be a rendszermag
	      forrását.  (Lásd <a class="xref" href="updating-upgrading.html" title="24. fejezet - A FreeBSD frissítése és frissen tartása">24. fejezet - <em>A FreeBSD frissítése és frissen
    tartása</em></a>)</p></li><li class="step"><p>Írjuk át a
	      <code class="filename">/etc/make.conf</code>
	      állományban a
	      <code class="literal">BOOT_COMCONSOLE_PORT</code>
	      címét az általunk használt
	      porthoz tartozóéra (0x3F8, 0x2F8, 0x3E8 vagy
	      0x2E8).  Itt csak a <code class="filename">sio0</code>
	      és <code class="filename">sio3</code>
	      (<code class="filename">COM1</code> és
	      <code class="filename">COM4</code>) közti portok
	      használhatóak - a töbportos soros
	      kártyák címei nem adhatóak
	      meg.  A megszakításokat nem kell
	      beállítanunk.</p></li><li class="step"><p>Készítsünk egy saját
	      rendszermag beállításait
	      tartalmazó állományt, és
	      vegyük fel bele a használni
	      kívánt soros port megfelelõ
	      paramétereit.  Például, ha a
	      <code class="filename">sio1</code>
	      (<code class="filename">COM2</code>) eszközt akarjuk
	      konzolként használni:</p><pre class="programlisting">device sio1 at isa? port IO_COM2 flags 0x10 irq 3</pre><p>vagy</p><pre class="programlisting">device sio1 at isa? port IO_COM2 flags 0x30 irq 3</pre><p>A konzolra vonatkozó
	      beállításokat a többi soros
	      portnál ne adjuk meg.</p></li><li class="step"><p>Fordítsuk újra és
	      telepítsük a rendszerindító
	      blokkot és a rendszertöltõt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /sys/boot</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make clean</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong></pre></li><li class="step"><p>Fordítsuk és telepítsük
	      újra a rendszermagot.</p></li><li class="step"><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> segítségével
	      másoljuk az új rendszerindító
	      blokkot a rendszer indítását
	      végzõ lemezre és töltsük be
	      az új rendszermagot.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-ddb"></a>26.6.5.3. A DDB elérése a soros
	  vonalról</h4></div></div></div><p>Ha a soros vonali konzolról akarjuk
	  használni a rendszermagba épített
	  nyomkövetõt (ami hasznos lehet távoli
	  vizsgálódáskor, de egyben
	  veszélyes is, ha a soros porton tévesen
	  kiküldünk egy BREAK jelzést!), akkor a
	  rendszermagot a következõ
	  beállításokkal kell
	  fordítanunk:</p><pre class="programlisting">options BREAK_TO_DEBUGGER
options DDB</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95082448"></a>26.6.5.4. A bejelentkezõ képernyõ
	  elérése a soros vonali konzolról</h4></div></div></div><p>Habár erre nincs feltétlenül
	  szükségünk, a rendszer üzeneteinek
	  és a rendszermag nyomkövetõjének
	  elérése után akár <span class="emphasis"><em>be is
	  tudunk jelentkezni</em></span> a soros vonalon keresztül.
	  Íme!</p><p>Nyissuk meg az <code class="filename">/etc/ttys</code>
	  állományt a kedvenc
	  szövegszerkesztõnkkel és keressük meg a
	  következõ sorokat:</p><pre class="programlisting">ttyd0 "/usr/libexec/getty std.9600" unknown off secure
ttyd1 "/usr/libexec/getty std.9600" unknown off secure
ttyd2 "/usr/libexec/getty std.9600" unknown off secure
ttyd3 "/usr/libexec/getty std.9600" unknown off secure</pre><p>A <code class="filename">ttyd0</code> és
	  <code class="filename">ttyd3</code> közti sorok pontosan a
	  <code class="filename">COM1</code> és
	  <code class="filename">COM4</code> közti portoknak felelnek
	  meg.  A használni kívánt port
	  sorában szereplõ <code class="literal">off</code>
	  paramétert írjuk át az
	  <code class="literal">on</code> értékre.  Ha a soros port
	  sebességét is megváltoztattuk, minden
	  bizonnyal a <code class="literal">std.9600</code> helyett is az adott
	  sebességhez illeszkedõ paramétert kell
	  megadnunk, például az
	  <code class="literal">std.19200</code> értékkel.</p><p>Érdemes továbbá még az
	  <code class="literal">unknown</code> helyett megadni az adott
	  terminál típusát.</p><p>Az állomány
	  módosítását követõen a
	  változatások
	  érvényesítéséhez ki kell
	  adnunk a <code class="command">kill -HUP 1</code> parancsot is.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-loader"></a>26.6.6. A konzol megváltoztatása a
	rendszertöltõbõl</h3></div></div></div><p>A korábbi szakaszokban arról
	beszéltünk, hogy miként
	állítsuk be a soros vonali konzolt a
	rendszerindító blokk
	megpiszkálásával.  Ebben a szakaszban
	viszont azt mutatjuk meg, hogy különbözõ
	parancsokon és környezeti változókon
	keresztül miként tudjuk megadni a konzolt a
	rendszertöltõben.  Mivel a rendszertöltõre a
	rendszerindítás harmadik fokozatában
	kerül sor, az ott megadott értékekkel
	felül tudjuk bírálni a
	rendszerindító blokk
	beállításait.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95099728"></a>26.6.6.1. A soros vonali konzol
	  beállítása</h4></div></div></div><p>A rendszertöltõ és a rendszermag az
	  <code class="filename">/boot/loader.conf</code>
	  állományon keresztül elég
	  könnyen rávehetõ a soros vonali konzol
	  használatára:</p><pre class="programlisting">set console="comconsole"</pre><p>Ez a rendszerindító blokk elõzõ
	  szakaszban tárgyalt
	  beállításaitól
	  függetlenül érvényesül.</p><p>A fenti sort a <code class="filename">/boot/loader.conf</code>
	  állomány elejére érdemes
	  tennünk, így a soros vonali konzolon már a
	  lehetõ leghamarabb megjelennek a rendszer
	  üzenetei.</p><p>Ehhez hasonló módon a belsõ konzolt is
	  megadhatjuk:</p><pre class="programlisting">set console="vidconsole"</pre><p>Ha a rendszertöltõben nem adjuk meg a
	  <code class="envar">console</code> környezeti változó
	  értékét, akkor a rendszertöltõ,
	  és így a rendszermag is, a
	  rendszerindító blokkban a <code class="option">-h</code>
	  opció által meghatározott konzolt fogja
	  használni.</p><p>A konzol a <code class="filename">/boot/loader.conf.local</code>
	  vagy a <code class="filename">/boot/loader.conf</code>
	  állományokban adható meg.</p><p>A részletekkel kapcsolatban lásd a
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a> man oldalt.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Jelen pillanatban a rendszertöltõnek nincs a
	    <code class="option">-P</code> paraméterrel ekvivalens
	    értékû beállítása,
	    ezért a billentyûzet jelenléte
	    alapján nem képes magától
	    választani a belsõ és a soros vonali
	    konzol között.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95108560"></a>26.6.6.2. Soros vonali konzol a <code class="filename">sio0</code>
	  porton kívül máshol</h4></div></div></div><p>A rendszertöltõt ne a
	  <code class="filename">sio0</code> eszközzel fordítsuk
	  újra a soros vonali konzolhoz.  Ehhez
	  kövessük a <a class="xref" href="serialconsole-setup.html#serialconsole-com2" title="26.6.5.2. Soros vonali konzol a sio0 porton kívül máshol">26.6.5.2. szakasz - Soros vonali konzol a <code class="filename">sio0</code>
	  porton kívül máshol</a>ban
	  leírt eljárás
	  lépéseit.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-caveats"></a>26.6.7. Figyelmeztetések</h3></div></div></div><p>A szakaszban szereplõ ötletek alapján sokan
	így most már könnyen be tudnak
	állítani egy billentyûzet és grafikus
	hardver nélküli dedikált szervert.  Sajnos
	azonban a legtöbb rendszer nem engedi a billentyûzet
	nélküli indítást, és akad
	néhány olyan is, amely pedig a grafikus
	kártya hiányában nem is indul el.  Az AMI
	BIOS-os gépeknél a grafikus kártya
	nélküli indításhoz elegendõ
	csupán a beállítások
	között a grafikus kártyát
	(<span class="quote">"<span class="quote">graphics adapter</span>"</span>) <span class="quote">"<span class="quote">Not installed</span>"</span>
	(nem telepített) állapotúra
	állítani.  Ha ilyen opció nem
	található a BIOS-ban, akkor helyette keressük
	a <span class="quote">"<span class="quote">Halt on Error</span>"</span> (leállás hiba
	esetén) változatot.  Ha ezt a <span class="quote">"<span class="quote">All but
	Keyboard</span>"</span> (a billentyûzet kivételével
	minden) vagy akár a <span class="quote">"<span class="quote">No Error</span>"</span> (soha)
	értékre állítjuk, az elõbbi
	eredményt kapjuk.</p><p>Ennek ellenére elõfordulhat azonban, hogy egyes
	gépeken egyáltalán nem találunk
	ilyen lehetõséget és videokártya
	nélkül nem indulnak el.  Ezekben az esetekben
	tegyünk a gépbe valamilyen kártyát
	(ehhez elég egy egyszerû típus is), de
	monitort már ne kössünk rá.  Esetleg
	megpróbálkozhatunk még AMI BIOS
	telepítésével is.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dialout.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="serialcomms.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="ppp-and-slip.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">26.5. A betárcsázós
      szolgáltatások használata </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 27. fejezet - A PPP és a SLIP</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>