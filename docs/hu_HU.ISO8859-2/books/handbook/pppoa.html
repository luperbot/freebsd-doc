<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>27.6. PPP ATM felett (PPPoA)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="ppp-and-slip.html" title="27. fejezet - A PPP és a SLIP" /><link rel="prev" href="pppoe.html" title="27.5. A PPP használata Ethernet felett (PPPoE)" /><link rel="next" href="slip.html" title="27.7. A SLIP használata" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">27.6. <span class="application">PPP</span> ATM felett (PPPoA)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="pppoe.html">Vissza</a> </td><th width="60%" align="center">27. fejezet - A PPP és a SLIP</th><td width="20%" align="right"> <a accesskey="n" href="slip.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pppoa"></a>27.6. <span class="application">PPP</span> ATM felett (PPPoA)</h2></div></div></div><a id="idp95588176" class="indexterm"></a><a id="idp95589328" class="indexterm"></a><p>Most a PPP ATM feletti (PPP over ATM, PPPoA)
      beállítását fogjuk bemutatni.  A PPPoA
      az európai DSL szolgáltatók
      körében igen nagy népszerûségnek
      örvend.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95590864"></a>27.6.1. PPPoA használata az Alcatel <span class="trademark">SpeedTouch</span>TM
	USB-vel</h3></div></div></div><p>Az ilyen eszközökhöz tartozó PPPoA
	támogatás a FreeBSD-ben portként áll
	rendelkezésre, mivel az ehhez szükséges
	firmware csak az <a class="link" href="http://www.speedtouchdsl.com/disclaimer_lx.htm" target="_top">Alcatel
	licencelési feltételei szerint</a>
	terjeszthetõ, ezért nem lehet része az alap
	FreeBSD rendszernek.</p><p>A szoftver telepítéséhez ezért a
	<a class="link" href="ports.html" title="4. fejezet - Alkalmazások telepítése: csomagok és portok">Portgyûjteményt</a> kell
	használnunk.  Telepítsük a <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pppoa/pkg-descr">net/pppoa</a> portot és
	kövessük a mellékelt
	utasításokat.</p><p>Sok más USB-s eszközhöz hasonlóan az
	Alcatel <span class="trademark">SpeedTouch</span>TM USB-nek a gépünkrõl kell
	letöltenie a mûködéséhez
	szükséges firmware-t.  Ez a folyamat FreeBSD alatt
	automatizálható, tehát ez a
	másolás minden esetben megtörténik,
	amikor az eszközt az USB portra csatlakoztatjuk.  Ehhez az
	<code class="filename">/etc/usbd.conf</code> állományba a
	következõ adatokat kell beletennünk.  Az
	állományt <code class="systemitem">root</code>
	felhasználóként tudjuk csak
	szerkeszteni.</p><pre class="programlisting">device "Alcatel SpeedTouch USB"
    devname "ugen[0-9]+"
    vendor 0x06b9
    product 0x4061
    attach "/usr/local/sbin/modem_run -f /usr/local/libdata/mgmt.o"</pre><p>Az <span class="application">usbd</span>, vagyis az USB
	démon engedélyezéséhez az
	<code class="filename">/etc/rc.conf</code> állományba
	tegyük bele az alábbit:</p><pre class="programlisting">usbd_enable="YES"</pre><p>Emellett még a <span class="application">ppp</span>
	kapcsolatot is be tudjuk állítani az
	indítás során.  Ehhez mindössze a
	következõ sort kell megadnunk az
	<code class="filename">/etc/rc.conf</code> állományban.
	Ismét megemlítjük, hogy ezt a mûveletet
	csak a <code class="systemitem">root</code> felhasználóval
	tudjuk végrehajtani.</p><pre class="programlisting">ppp_enable="YES"
ppp_mode="ddial"
ppp_profile="adsl"</pre><p>Ezután úgy tudjuk szóra bírni a
	kapcsolatot, ha a <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pppoa/pkg-descr">net/pppoa</a>
	porthoz mellékelt <code class="filename">ppp.conf</code>
	állományt használjuk fel
	kiindulásként.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95605328"></a>27.6.2. Az mpd használata</h3></div></div></div><p>Az <span class="application">mpd</span>
	segítségével többféle
	szolgáltatáshoz, köztük a PPTP-hez
	hozzá tudunk férni.  Az
	<span class="application">mpd</span> a Portgyûjteményben
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/mpd/pkg-descr">net/mpd</a> néven
	található meg.  Sok ADSL modemnek
	szüksége van egy PPTP tunnelre közte és
	gép között.  Ilyen modem például
	az Alcatel <span class="trademark">SpeedTouch</span>TM Home is.</p><p>Elõször magát a portot kell
	telepítenünk, majd ezután már be
	tudjuk állítani az
	<span class="application">mpd</span>-t a saját és a
	szolgáltatónk igényei szerint.  A port a
	rengeteg leírással megtûzdelt minta
	konfigurációs állományait a
	<code class="filename">PREFIX/etc/mpd/</code>
	könyvtárba teszi.  Itt a
	<em class="replaceable"><code>PREFIX</code></em> azt a könyvtárat
	jelöli, ahova a portok kerülnek.  Ez alapból a
	<code class="filename">/usr/local/</code>.  Az
	<span class="application">mpd</span>
	beállításáról
	szóló teljes dokumentáció a
	telepítés után elérhetõ HTML
	formátumban a
	<code class="filename">PREFIX/share/doc/mpd/</code>
	könyvtárban.  Íme egy példa az
	<span class="application">mpd</span>
	beállítására ADSL kapcsolatok
	esetében.  Az ezzel kapcsolatos
	beállításaink két
	állományra bomlanak, melyek közül az
	elsõ az <code class="filename">mpd.conf</code>:</p><pre class="programlisting">default:
    load adsl

adsl:
    new -i ng0 adsl adsl
    set bundle authname <em class="replaceable"><code>felhasználónév</code></em> <a id="co-mpd-ex-user"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
    set bundle password <em class="replaceable"><code>jelszó</code></em> <a id="co-mpd-ex-pass"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
    set bundle disable multilink

    set link no pap acfcomp protocomp
    set link disable chap
    set link accept chap
    set link keep-alive 30 10

    set ipcp no vjcomp
    set ipcp ranges 0.0.0.0/0 0.0.0.0/0

    set iface route default
    set iface disable on-demand
    set iface enable proxy-arp
    set iface idle 0

    open</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-user"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>A felhasználói azonosító,
	  amellyel a szolgáltató felé
	  hitelesítjük magunkat.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-pass"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Az azonosítóhoz tartozó
	  jelszó, amelyet szintén a
	  szolgáltatól kaptunk.</p></td></tr></table></div><p>Az <code class="filename">mpd.links</code> állomány
      tartalmazza a felépítendõ kapcsolatra vagy
      kapcsolatokra vonatkozó információkat.
      Például az elõbbiekhez tartozó
      <code class="filename">mpd.links</code> tartalma ez:</p><pre class="programlisting">adsl:
    set link type pptp
    set pptp mode active
    set pptp enable originate outcall
    set pptp self <em class="replaceable"><code>10.0.0.1</code></em> <a id="co-mpd-ex-self"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
    set pptp peer <em class="replaceable"><code>10.0.0.138</code></em> <a id="co-mpd-ex-peer"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-self"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>A FreeBSD-s számítógépünk
	  címe, ahonnan az <span class="application">mpd</span>
	  indul.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-peer"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Az ADSL modemünk IP-címe.  Az Alcatel
	  <span class="trademark">SpeedTouch</span>TM Home esetén ez a cím
	  alapértelmezés szerint a <code class="systemitem">10.0.0.138</code>.</p></td></tr></table></div><p>A kapcsolat ezek után pillanatok alatt
      felépíthetõ, ha a <code class="systemitem">root</code>
      felhasználóval kiadjuk a következõ
      parancsot:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mpd -b adsl</code></strong></pre><p>A kapcsolat állapotát a következõ
      paranccsal tudjuk ezután ellenõrizni:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig ng0</code></strong>
ng0: flags=88d1&lt;UP,POINTOPOINT,RUNNING,NOARP,SIMPLEX,MULTICAST&gt; mtu 1500
     inet 216.136.204.117 --&gt; 204.152.186.171 netmask 0xffffffff</pre><p>FreeBSD alatt az <span class="application">mpd</span> használata
      ajánlott az ADSL szolgáltatások
      eléréséhez.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95630416"></a>27.6.3. A pptpclient használata</h3></div></div></div><p>FreeBSD alatt a <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pptpclient/pkg-descr">net/pptpclient</a>
	segítségével is tudunk PPPoA
	típusú szolgáltatásokhoz
	kapcsolódni.</p><p>A <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pptpclient/pkg-descr">net/pptpclient</a>
	felhasználásával úgy tudunk DSL
	szolgáltatásokat elérni, ha
	feltelepítjük a hozzá tartozó portot
	vagy csomagot, majd módosítjuk az
	<code class="filename">/etc/ppp/ppp.conf</code> állományt.
	Mind a két mûveletet csak <code class="systemitem">root</code>
	felhasználóként tudjuk
	lebonyolítani.  Ehhez egy <code class="filename">ppp.conf</code>
	állományt lentebb adtunk meg.  A
	<code class="filename">ppp.conf</code> állományban
	található további
	beállítási lehetõségekrõl
	a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> man oldalon olvashatunk.</p><pre class="programlisting">adsl:
 set log phase chat lcp ipcp ccp tun command
 set timeout 0
 enable dns
 set authname <em class="replaceable"><code>felhasználónév</code></em> <a id="co-pptp-ex-user"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
 set authkey <em class="replaceable"><code>jelszó</code></em> <a id="co-pptp-ex-pass"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
 set ifaddr 0 0
 add default HISADDR</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-pptp-ex-user"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>A DSL szolgáltatónktól kapott
	    felhasználói név.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-pptp-ex-pass"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Az elõfizetéshez tartozó
	    jelszó.</p></td></tr></table></div><div xmlns="" class="warning"><h3 class="admontitle">Figyelem: </h3><p xmlns="http://www.w3.org/1999/xhtml">Mivel az elõfizetéshez tartozó
	  jelszót a <code class="filename">ppp.conf</code>
	  állományba titkosítatlan formában
	  kell szerepeltetnünk, ezért gondoskodjunk
	  róla, hogy senki sem képes olvasni a
	  tartalmát.  A most következõ parancsokkal
	  beállítjuk, hogy ez az állomány
	  csak a <code class="systemitem">root</code> felhasználó
	  számára legyen olvasható.  A
	  részletekért lásd a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a>
	  és <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chown</span>(8)</span></a> man oldalakat.</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chown root:wheel /etc/ppp/ppp.conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 600 /etc/ppp/ppp.conf</code></strong></pre></div><p>Ezzel a paranccsal a DSL útválasztónk
	felé nyitunk egy tunnelt a PPP kapcsolathoz.  Az
	Ethernetes DSL modemek általában egy elõre
	beállított helyi hálózati
	IP-címmel rendelkeznek, amelyhez tudunk csatlakozni.  Az
	Alcatel <span class="trademark">SpeedTouch</span>TM Home esetében ez a cím a
	<code class="systemitem">10.0.0.138</code>.  Az
	útválasztóhoz adott
	dokumentációban keressük meg, hogy az
	eszközünkhöz konkrétan milyen cím
	tartozik.  A tunnel megnyitásához és a PPP
	kapcsolat megindításához a
	következõ parancsot kell kiadnunk:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pptp cím adsl</code></strong></pre><div xmlns="" class="tip"><h3 class="admontitle">Tipp: </h3><p xmlns="http://www.w3.org/1999/xhtml">Az iménti parancs végére még
	  érdemes odatenni az <span class="quote">"<span class="quote">et</span>"</span> jelet
	  (<span class="quote">"<span class="quote">&amp;</span>"</span>) is, mivel így a
	  <span class="application">pptp</span>
	  mûködését a háttérben
	  folytatja.</p></div><p>A parancs hatására a virtuális tunnelt
	megtestesítõ <code class="filename">tun</code>
	eszköz jön létre a
	<span class="application">pptp</span> és
	<span class="application">ppp</span> programok között.
	Miután visszakaptuk a parancssort, vagy a
	<span class="application">pptp</span> program
	megerõsítette a kapcsolódás
	sikerességét, a keletkezett járatot
	így tudjuk ellenõrizni:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig tun0</code></strong>
tun0: flags=8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500
        inet 216.136.204.21 --&gt; 204.152.186.171 netmask 0xffffff00
        Opened by PID 918</pre><p>Ha nem tudnánk valamiért csatlakozni, akkor
	elõször nézzük meg az
	útválasztónk
	beállításait, ami általában a
	<span class="application">telnet</span> vagy egy
	böngészõ segítségével
	elérhetõ.  Ha még mindig nem vagyunk
	képesek csatlakozni, akkor a <code class="command">pptp</code>
	parancs kimenetében és
	<span class="application">ppp</span>
	<code class="filename">/var/log/ppp.log</code> néven
	elérhetõ naplójában kereshetünk
	árulkodó nyomokat.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pppoe.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="ppp-and-slip.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="slip.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">27.5. A PPP használata Ethernet felett (PPPoE) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 27.7. A SLIP használata</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>