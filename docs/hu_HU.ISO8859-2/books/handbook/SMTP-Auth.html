<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>28.10. Az SMTP hitelesítése</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="mail.html" title="28. fejezet - Elektronikus levelezés" /><link rel="prev" href="SMTP-dialup.html" title="28.9. Levelezés betárcsázós kapcsolattal" /><link rel="next" href="mail-agents.html" title="28.11. Levelezõ kliensek" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">28.10. Az SMTP hitelesítése</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="SMTP-dialup.html">Vissza</a> </td><th width="60%" align="center">28. fejezet - Elektronikus levelezés</th><td width="20%" align="right"> <a accesskey="n" href="mail-agents.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="SMTP-Auth"></a>28.10. Az SMTP hitelesítése</h2></div><div><span class="authorgroup">Írta: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Gorham</span>, <span class="firstname">James</span></span>. </span></div></div></div><p>Levelezõ szerverünkön az
      <acronym class="acronym">SMTP</acronym> protokoll
      hitelesítésének (<acronym class="acronym">SMTP</acronym>
      Authentication) engedélyezése több
      szempontból is elõnyökkel bír.  Az
      <acronym class="acronym">SMTP</acronym> hitelesítésének
      bekapcsolása egy újabb réteget képez a
      <span class="application">sendmail</span> védelmében,
      és az olyan állandóan mozgásban
      levõ felhasználók számára is
      megoldást nyújt, akik anélkül
      képesek használni ugyanazt a levelezõ szervert,
      hogy minden alkalommal újrakonfigurálnák a
      levelezõ kliensüket.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Telepítsük fel a <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl2/pkg-descr">security/cyrus-sasl2</a> portot.  A
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl2/pkg-descr">security/cyrus-sasl2</a> port
	  több fordítási idejû
	  beállítást támogat.  Itt most az
	  <acronym class="acronym">SMTP</acronym> hitelesítését
	  fogjuk használni, ezért gondoskodjunk a
	  <code class="option">LOGIN</code> opció
	  engedélyezésérõl.</p></li><li class="step"><p>A <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl2/pkg-descr">security/cyrus-sasl2</a>
	  telepítés után nyissuk meg
	  szerkesztésre a
	  <code class="filename">/usr/local/lib/sasl2/Sendmail.conf</code>
	  állományt (vagy ha még nem
	  létezne, hozzuk létre), és benne
	  vegyük fel a következõ sort:</p><pre class="programlisting">pwcheck_method: saslauthd</pre></li><li class="step"><p>Ezt követõen telepítsük a <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl2-saslauthd/pkg-descr">security/cyrus-sasl2-saslauthd</a>
	  portot, és tegyük bele az
	  <code class="filename">/etc/rc.conf</code> állományba ezt
	  a sort:</p><pre class="programlisting">saslauthd_enable="YES"</pre><p>Végezetül indítsuk el a saslauthd
	  démont:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/saslauthd start</code></strong></pre><p>Ez a démon fog közvetíteni a
	  <span class="application">sendmail</span> és a FreeBSD
	  <code class="filename">passwd</code> adatbázisa közti
	  hitelesítésben.  Ezzel elkerülhetjük
	  az új felhasználói nevek és
	  jelszavak felvételét az <acronym class="acronym">SMTP</acronym>
	  hitelesítés használatához,
	  így a hozzáférések és a
	  levelezés jelszava ugyanaz marad.</p></li><li class="step"><p>Most pedig írjuk hozzá az alábbi
	  sorokat az <code class="filename">/etc/make.conf</code>
	  állományhoz:</p><pre class="programlisting">SENDMAIL_CFLAGS=-I/usr/local/include/sasl -DSASL
SENDMAIL_LDFLAGS=-L/usr/local/lib
SENDMAIL_LDADD=-lsasl2</pre><p>Ezek a sorok állítják be a
	  <span class="application">sendmail</span> számára,
	  hogy fordítás közben a <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/cyrus-sasl2/pkg-descr">cyrus-sasl2</a> függvényeit
	  használja.  A <span class="application">sendmail</span>
	  újrafordítása elõtt
	  mindenképpen legyen fenn a <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/cyrus-sasl2/pkg-descr">cyrus-sasl2</a> port.</p></li><li class="step"><p>A <span class="application">sendmail</span>
	  újrafordítását a
	  következõ parancsok
	  végrehajtásával intézhetjük
	  el:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/lib/libsmutil</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir &amp;&amp; make obj &amp;&amp; make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/lib/libsm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir &amp;&amp; make obj &amp;&amp; make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.sbin/sendmail</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir &amp;&amp; make obj &amp;&amp; make &amp;&amp; make install</code></strong></pre><p>A <span class="application">sendmail</span>
	  fordítása esetén semmilyen
	  problémának nem szabadna elõfordulnia,
	  kivéve ha a <code class="filename">/usr/src</code>
	  könyvtárat és a szükséges
	  osztott könyvtárakat nem változtatjuk
	  idõközben túlságosan gyakran.</p></li><li class="step"><p>A <span class="application">sendmail</span>
	  lefordítása és
	  újratelepítése után
	  szerkesszük át az
	  <code class="filename">/etc/mail/freebsd.mc</code>
	  állományt (vagy azt az <code class="filename">.mc</code>
	  állományt, amelyet éppen
	  használunk).  Sok rendszergazda a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hostname&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">hostname</span>(1)</span></a>
	  parancs válaszát használja fel az
	  <code class="filename">.mc</code> típusú
	  állományok egyedi elnevezéséhez).
	  Írjuk bele a következõ sorokat:</p><pre class="programlisting">dnl set SASL options
TRUST_AUTH_MECH(`GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN')dnl
define(`confAUTH_MECHANISMS', `GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN')dnl</pre><p>Ezek állítják be a
	  <span class="application">sendmail</span> számára a
	  felhasználók hitelesítésére
	  alkalmas különbözõ módszereket.  Ha
	  a <span class="application">pwcheck</span> módszer helyett
	  valami mást akarunk használni, akkor
	  járjunk utána a
	  dokumentációban.</p></li><li class="step"><p>Zárásul futassuk le a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> parancsot
	  az <code class="filename">/etc/mail</code> könyvtárban.
	  Így lefut az új <code class="filename">.mc</code>
	  állományunk és létrejön egy
	  <code class="filename">freebsd.cf</code> (vagy amilyen nevet az
	  <code class="filename">.mc</code> állománynak megadtunk)
	  <code class="filename">.cf</code> állomány.
	  Ezután a <code class="command">make install restart</code>
	  parancs kiadásával másoltassuk át
	  ezt a <code class="filename">sendmail.cf</code> helyére
	  és szabályosan indítassuk újra a
	  <span class="application">sendmail</span>
	  szolgáltatást.  A folyamatról
	  részletesebb tájékoztatást az
	  <code class="filename">/etc/mail/Makefile</code> állomány
	  tud nyújtani.</p></li></ol></div><p>Ha eddig minden a legnagyobb rendben történt,
      akkor most már képesek vagyunk bejelentkezési
      információt is átadni a levelezõ
      kliensnek és elküldeni egy tesztüzenetet.  A
      hibák kiszûréséhez
      állítsuk a <span class="application">sendmail</span>
      <code class="option">LogLevel</code> opcióját az 13
      értékre és figyeljük a
      <code class="filename">/var/log/maillog</code>
      állományt.</p><p>További felvilágosításért
      olvassuk el a <span class="application">sendmail</span><a class="link" href="http://www.sendmail.org/~ca/email/auth.html" target="_top">
      <acronym class="acronym">SMTP</acronym> hitelesítéssel</a>
      foglalkozó oldalát (angolul).</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="SMTP-dialup.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="mail.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="mail-agents.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">28.9. Levelezés betárcsázós
      kapcsolattal </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 28.11. Levelezõ kliensek</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>