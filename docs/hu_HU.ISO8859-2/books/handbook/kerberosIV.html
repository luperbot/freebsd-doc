<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>14.7. KerberosIV</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="security.html" title="14. fejezet - Biztonság" /><link rel="prev" href="tcpwrappers.html" title="14.6. A TCP kapcsolatok burkolása" /><link rel="next" href="kerberos5.html" title="14.8. Kerberos5" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">14.7. <span class="application">KerberosIV</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tcpwrappers.html">Vissza</a> </td><th width="60%" align="center">14. fejezet - Biztonság</th><td width="20%" align="right"> <a accesskey="n" href="kerberos5.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kerberosIV"></a>14.7. <span class="application">KerberosIV</span></h2></div><div><span class="authorgroup">Írta: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Murray</span>, <span class="firstname">Mark</span></span>. </span></div><div><span class="authorgroup">Eredetileg írta: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Dapoz</span>, <span class="firstname">Mark</span></span>. </span></div></div></div><p>A Kerberos egy olyan járulékos
      rendszer/protokoll, amellyel a felhasználók egy
      biztonságos szerver szolgáltatásain
      keresztül tudják hitelesíteni magukat.  Ilyen
      szolgáltatás többek közt a távoli
      bejelentkezés, távoli másolás, a
      rendszeren belüli biztonságos másolás
      és minden olyan egyéb veszélyes feladat, amit
      számottevõen megbízhatóbbá
      és irányíthatóbbá
      tettek.</p><p>A következõ utasítások a FreeBSD-hez
      mellékelt Kerberos
      beállításához adnak
      útmutatást.  A teljes leíráshoz
      azonban érdemes fellapoznunk a menet közben
      hivatkozott man oldalakat is.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87056080"></a>14.7.1. A <span class="application">KerberosIV</span>
	telepítése</h3></div></div></div><a id="idp87057104" class="indexterm"></a><a id="idp87057616" class="indexterm"></a><p>A Kerberos a FreeBSD egyik választható
	komponense.  Legkönnyebben úgy tudjuk
	feltelepíteni, ha a FreeBSD telepítése
	során a <span class="application">sysinstall</span> programban
	kiválasztjuk a <code class="literal">krb4</code> vagy
	<code class="literal">krb5</code> terjesztések valamelyikét.
	Ezzel felrakhatjuk a Kerberos <span class="quote">"<span class="quote">eBones</span>"</span> (KerberosIV)
	vagy <span class="quote">"<span class="quote">Heimdal</span>"</span> (Kerberos5) elnevezésû
	változatait.  A FreeBSD azért tartalmazza ezeket az
	implementációkat, mert nem az Amerikai
	Egyesült Államokban vagy Kanadában
	fejlesztették, így az Egyesült Államok
	titkosításokkal kapcsolatos kiviteli
	korlátozások korában minden olyan rendszer
	adminisztrátora el tudta érni, aki nem ezekben az
	országokban lakott.</p><p>A Kerberos MIT által fejlesztett
	implementációját egyébként a
	Portgyûjteménybõl a <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/krb5/pkg-descr">security/krb5</a> porton keresztül
	érhetjük el.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87094992"></a>14.7.2. A kezdeti adatbázis
	létrehozása</h3></div></div></div><p>Ezt a lépést csak a Kerberos szerveren kell
	elvégezni.  Elõször is
	gyõzõdjünk meg róla, hogy semmilyen
	korábbi Kerberos adatbázis nem
	található a gépen.  Váltsunk az
	<code class="filename">/etc/kerberosIV</code>
	könyvtárra és ellenõrizzük a
	következõ állományok
	meglétét:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /etc/kerberosIV</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ls</code></strong>
README		krb.conf        krb.realms</pre><p>Ha rajtuk kívül további
	állományok is feltûnnének (mint
	például a <code class="filename">principal.*</code> vagy
	<code class="filename">master_key</code>), akkor a
	<code class="command">kdb_destroy</code> paranccsal pusztítsuk el a
	régi Kerberos adatbázist, vagy ha nem fut
	már a Kerberos, akkor egyszerûen csak
	törüljük le ezeket.</p><p>Ezután lássunk neki a
	<code class="filename">krb.conf</code> és
	<code class="filename">krb.realms</code> állományok
	átírásán keresztül a Kerberos
	egyes övezeteinek (realm)
	létrehozásához.  Itt most az
	<code class="literal">EXAMPLE.COM</code> lesz a létrehozandó
	övezet, a hozzá tartozó szerver pedig a
	<code class="systemitem">grunt.example.com</code>.  Így
	szerkesszük át vagy készítsünk el
	a neki megfelelõ <code class="filename">krb.conf</code>
	állományt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat krb.conf</code></strong>
EXAMPLE.COM
EXAMPLE.COM grunt.example.com admin server
CS.BERKELEY.EDU okeeffe.berkeley.edu
ATHENA.MIT.EDU kerberos.mit.edu
ATHENA.MIT.EDU kerberos-1.mit.edu
ATHENA.MIT.EDU kerberos-2.mit.edu
ATHENA.MIT.EDU kerberos-3.mit.edu
LCS.MIT.EDU kerberos.lcs.mit.edu
TELECOM.MIT.EDU bitsy.mit.edu
ARC.NASA.GOV trident.arc.nasa.gov</pre><p>A többi övezetnek valójában nem
	feltétlenül kell itt lennie.  Ezek csupán
	azért szerepelnek itt, hogy bemutassák
	miként lehet egyetlen géphez hozzárendelni
	egyszerre több övezetet is.  Az
	egyszerûség kedvéért nyugodtan
	elhagyhatóak.</p><p>Az elsõ sor nevezi meg a rendszer által
	mûködtetett övezeteket.  Az utána
	következõ sorokban övezeteket és
	hálózati neveket láthatunk.  Itt az
	elsõ elem egy övezetet nevez meg, a második
	elem pedig az övezet <span class="quote">"<span class="quote">kulcselosztó
	központját</span>"</span> (key distribution center).  A
	hálózati nevet követõ <code class="literal">admin
	server</code> kulcsszavak arra utalnak, hogy az adott
	gép adminisztratív szerepet ellátó
	adatbázist is tartalmaz.  Ezeket a fogalmakat
	részleteiben a Kerberos man oldalain ismerhetjük
	meg.</p><p>Ezután hozzá kell adnunk a <code class="systemitem">grunt.example.com</code> nevû gépet az
	<code class="literal">EXAMPLE.COM</code> övezethez, valamint az
	<code class="systemitem">.example.com</code>
	tartományban levõ összes géphez
	létre kell hoznunk egy bejegyzést az
	<code class="literal">EXAMPLE.COM</code> övezetben.  A
	<code class="filename">krb.realms</code> állományt ehhez a
	következõképpen kellene
	módosítanunk:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat krb.realms</code></strong>
grunt.example.com EXAMPLE.COM
.example.com EXAMPLE.COM
.berkeley.edu CS.BERKELEY.EDU
.MIT.EDU ATHENA.MIT.EDU
.mit.edu ATHENA.MIT.EDU</pre><p>Ismét hozzátesszük, hogy a többi
	övezetnek nem kötelezõ itt szerepelnie.  Ezek
	csupán azt demonstrálják, hogy
	miként kell egy gépet egyszerre több
	övezethez is beállítani.  Az
	átláthatóság kedvéért
	minden további nélkül
	eltávolíthatjuk ezeket.</p><p>Itt az elsõ sor az <span class="emphasis"><em>adott</em></span> rendszert
	elhelyezi egy nevesített övezetbe.  A többi sor
	azt mutatja meg, hogyan kell alapértelmezett módon
	a meghatározott altartományokba tartozó
	gépeket egy nevesített övezethez
	hozzárendelni.</p><p>Most már készen állunk az
	adatbázis létrehozására.  Ehhez
	egyedül a Kerberos szerverét (avagy
	Kulcselosztó központját) kell
	elindítanunk.  Adjuk ki a <code class="command">kdb_init</code>
	parancsot:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_init</code></strong>
<code class="prompt">Realm name [default  ATHENA.MIT.EDU ]:</code> <strong class="userinput"><code>EXAMPLE.COM</code></strong>
You will be prompted for the database Master Password.
It is important that you NOT FORGET this password.

<code class="prompt">Enter Kerberos master key:</code> </pre><p>Az üzenet fordítása:</p><pre class="screen">Most az adatbázis mesterkulcsát kell megadni.  Fontos, hogy
NE FELEJTSÜK EL ezt a jelszót.</pre><p>Most el kell mentenünk a kulcsot, így a helyi
	gépen futó szerverek fel tudják szedni.
	Ehhez a <code class="command">kstash</code> parancsra van
	szükségünk:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kstash</code></strong>

<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered. BEWARE!</pre><p>Az üzenet fordítása:</p><pre class="screen">A Kerberos mesterkulcsának jelenlegi változata: 1.

VIGYÁZAT, megadták a mesterkulcsot!</pre><p>Ez elmenti a titkosított mesterkulcsot az
	<code class="filename">/etc/kerberosIV/master_key</code>
	állományba.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87125584"></a>14.7.3. Az egész beüzemelése</h3></div></div></div><a id="idp87126224" class="indexterm"></a><p><span class="emphasis"><em>Mindegyik</em></span> Kerberosszal õrzött
	rendszerrel kapcsolatban két ún.  szereplõt
	(principal) kell még hozzátennünk az
	adatbázishoz.  A nevük <code class="literal">kpasswd</code>
	és <code class="literal">rcmd</code>.  Minden rendszerhez
	létre kell hoznunk ezeket a szereplõket,
	példányonként (instance) az egyes
	rendszerek neveivel.</p><p>A <span class="application">kpasswd</span> és
	<span class="application">rcmd</span> démonok teszik
	lehetõvé a többi rendszer
	számára, hogy megváltoztathassák a
	Kerberos jelszavukat, valamint hogy futtathassák az
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rcp</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a> és <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rsh</span>(1)</span></a>
	parancsokat.</p><p>Vegyük fel ezeket a bejegyzéseket is:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_edit</code></strong>
Opening database...

<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<code class="prompt">Principal name:</code> <strong class="userinput"><code>passwd</code></strong>
<code class="prompt">Instance:</code> <strong class="userinput"><code>grunt</code></strong>

&lt;Not found&gt;, <code class="prompt">Create [y] ?</code> <strong class="userinput"><code>y</code></strong>

Principal: passwd, Instance: grunt, kdc_key_ver: 1
<code class="prompt">New Password:</code>                    &lt;---- írjuk be, hogy <span class="quote">"<span class="quote">RANDOM</span>"</span>
Verifying password

<code class="prompt">New Password:</code> &lt;---- írjuk be, hogy <span class="quote">"<span class="quote">RANDOM</span>"</span>

<code class="prompt">Random password [y] ?</code> <strong class="userinput"><code>y</code></strong>

Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ?</code>
<code class="prompt">Attributes [ 0 ] ?</code>
Edit O.K.
<code class="prompt">Principal name:</code> <strong class="userinput"><code>rcmd</code></strong>
<code class="prompt">Instance:</code> <strong class="userinput"><code>grunt</code></strong>

&lt;Not found&gt;, <code class="prompt">Create [y] ?</code>

Principal: rcmd, Instance: grunt, kdc_key_ver: 1
<code class="prompt">New Password:</code>		&lt;---- írjuk be, hogy <span class="quote">"<span class="quote">RANDOM</span>"</span>
Verifying password

<code class="prompt">New Password:</code>           &lt;---- írjuk be, hogy <span class="quote">"<span class="quote">RANDOM</span>"</span>

<code class="prompt">Random password [y] ?</code>

Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ?</code>
<code class="prompt">Attributes [ 0 ] ?</code>
Edit O.K.
<code class="prompt">Principal name:</code>         &lt;---- ha nem adunk meg semmit, akkor kilép</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87149904"></a>14.7.4. A szerver állomány
	létrehozása</h3></div></div></div><p>Most pedig kivonatolni kell azokat a
	példányokat, amelyek szolgáltatást
	definiálnak a gépen.  Erre az
	<code class="command">ext_srvtab</code> parancsot használjuk.
	Ennek eredményeképpen keletkezik egy
	állományt, amelyet <span class="emphasis"><em>biztonságos
	eszközökkel</em></span> át kell másolni
	vagy át kell mozgatni az egyes Kerberos kliensek
	<code class="filename">/etc</code> könyvtárába.  Ennek
	az állománynak egyaránt jelent kell lennie
	a szerveren és a kliensen is, nélküle a
	Kerberos mûködésképtelen.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ext_srvtab grunt</code></strong>
<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered. BEWARE!
Generating 'grunt-new-srvtab'....</pre><p>Ez a parancs most létrehozott egy ideiglenes
	állományt, amit át kell nevezni az
	<code class="filename">srvtab</code> névre, hogy
	megtalálhassák a szerverek.  Az eredeti rendszeren
	a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mv&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mv</span>(1)</span></a> paranccsal tudjuk a helyére rakni:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mv grunt-new-srvtab srvtab</code></strong></pre><p>Ha egy kliensnek szánjuk az állományt
	és a hálozatunkat nem tekinthetjük
	biztonságosnak, akkor a
	<code class="filename">kliens-new-srvtab</code>
	állományt másoljuk egy mozgatható
	adathordozóra és megbízható
	módon jutassuk el.  Ne felejtsük el az
	állományt <code class="filename">srvtab</code> néven
	átrakni a kliens <code class="filename">/etc</code> könyvtárába
	és az engedélyeit 600-ra
	állítani:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mv grumble-new-srvtab srvtab</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 600 srvtab</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87163600"></a>14.7.5. Az adatbázis feltöltése</h3></div></div></div><p>Ezt követõen rögzítenünk kell
	néhány felhasználót is
	adatbázisban.  Elõször is hozzunk létre
	egy bejegyzést a <code class="systemitem">janos</code> nevû
	felhasználónak.  Ezt a <code class="command">kdb_edit</code>
	parancs kiadásával tesszük meg:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_edit</code></strong>
Opening database...

<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<code class="prompt">Principal name:</code> <strong class="userinput"><code>janos</code></strong>
<code class="prompt">Instance:</code>

&lt;Not found&gt;, <code class="prompt">Create [y] ?</code> <strong class="userinput"><code>y</code></strong>

Principal: janos, Instance: , kdc_key_ver: 1
<code class="prompt">New Password:</code>                &lt;---- adjunk meg egy biztonságos jelszót
Verifying password

<code class="prompt">New Password:</code>                &lt;---- itt ismét adjuk meg a jelszót
Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ?</code>
<code class="prompt">Attributes [ 0 ] ?</code>
Edit O.K.
<code class="prompt">Principal name:</code>		   &lt;---- ha nem írunk be semmit, akkor kilép</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87179728"></a>14.7.6. Próbáljuk ki</h3></div></div></div><p>Elsõként a Kerberos démonait kell
	beindítanunk.  Ezzel kapcsolatban megjegyeznénk,
	hogy ha ehhez megfelelõen átírtuk az
	<code class="filename">/etc/rc.conf</code> állományunkat,
	akkor ez az újraindítással együtt
	magától lezajlik.  Ezt csak a Kerberos szerveren
	kell megcsinálni.  A Kerberos kliensei maguktól
	összeszedik a mûködésükhöz
	szükséges adatokat az <code class="filename">/etc/kerberosIV</code>
	könyvtárból.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kerberos &amp;</code></strong>
Kerberos server starting
Sleep forever on error
Log file is /var/log/kerberos.log
Current Kerberos master key version is 1.

Master key entered. BEWARE!

Current Kerberos master key version is 1
Local realm: EXAMPLE.COM
<code class="prompt">#</code> <strong class="userinput"><code>kadmind -n &amp;</code></strong>
KADM Server KADM0.0A initializing
Please do not use 'kill -9' to kill this job, use a
regular kill instead

Current Kerberos master key version is 1.

Master key entered.  BEWARE!</pre><p>A fenti figyelmeztetés
	fordítása:</p><pre class="screen">A program leállítására ne a 'kill -9' parancsot, hanem a
normális kill parancsot használjuk</pre><p>Ezután a <code class="command">kinit</code> parancs
	használatával próbáljunk meg az
	elõbb létrehozott <code class="systemitem">janos</code>
	azonosítónak kérni egy jegyet:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kinit janos</code></strong>
MIT Project Athena (grunt.example.com)
Kerberos Initialization for "janos"
<code class="prompt">Password:</code> </pre><p>A <code class="command">klist</code> paranccsal most
	próbáljuk meg kilistázni a tokeneket
	és így ellenõrizni, hogy valóban
	rendelkezünk velük:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>klist</code></strong>
Ticket file:    /tmp/tkt245
Principal:      janos@EXAMPLE.COM

  Issued           Expires          Principal
Apr 30 11:23:22  Apr 30 19:23:22  krbtgt.EXAMPLE.COM@EXAMPLE.COM</pre><p>Ezután a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">passwd</span>(1)</span></a> használatával
	próbáljuk meg megváltoztatni a
	jelszavunkat.  Ezzel tudjuk ellenõrizni, hogy a
	<span class="application">kpasswd</span> démon
	hozzáfér a Kerberos
	adatbázisához:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>passwd</code></strong>
realm EXAMPLE.COM
<code class="prompt">Old password for janos:</code>
<code class="prompt">New Password for janos:</code>
Verifying password
<code class="prompt">New Password for janos:</code>
Password changed.</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87196752"></a>14.7.7. Adminisztrátori jogosultságok
	felvétele</h3></div></div></div><p>A Kerberos lehetõvé teszi, hogy
	<span class="emphasis"><em>mindegyik</em></span> olyan
	felhasználónak, akinek rendszergazdai jogokra
	lenne szüksége, a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>
	eléréséhez
	<span class="emphasis"><em>külön</em></span> meg tudjunk adni egy
	jelszót.  Most már tudunk mondani egy olyan
	azonosítót is, amely jogosult a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>
	használatával <code class="systemitem">root</code> jogokat
	szerezni.  Ezt úgy tudjuk megoldani, ha az adott
	szereplõhöz társítunk egy
	<code class="systemitem">root</code> példányt.  A
	<code class="command">kdb_edit</code> használatával
	készíteni tudunk egy <code class="literal">janos.root</code>
	bejegyzést a Kerberos adatbázisában:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_edit</code></strong>
Opening database...

<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<code class="prompt">Principal name:</code> <strong class="userinput"><code>janos</code></strong>
<code class="prompt">Instance:</code> <strong class="userinput"><code>root</code></strong>

&lt;Not found&gt;, Create [y] ? y

Principal: janos, Instance: root, kdc_key_ver: 1
<code class="prompt">New Password:</code>                    &lt;---- ide csak egy BIZTONSÁGOS jelszót adjuk meg!
Verifying password

<code class="prompt">New Password:</code>    	 	 &lt;---- adjuk meg ismét a jelszót

Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ?</code> <strong class="userinput"><code>12</code></strong> &lt;--- ne állítsuk nagyon hosszúra!
<code class="prompt">Attributes [ 0 ] ?</code>
Edit O.K.
<code class="prompt">Principal name:</code>		         &lt;---- ha nem adunk meg semmit, akkor kilép</pre><p>Ezt követõen úgy tudunk megbizonyosodni a
	mûködésérõl, hogy
	megpróbálunk neki tokeneket szerezni:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kinit janos.root</code></strong>
MIT Project Athena (grunt.example.com)
Kerberos Initialization for "janos.root"
<code class="prompt">Password:</code></pre><p>Most rakjuk bele a felhasználót a
	<code class="systemitem">root</code> <code class="filename">.klogin</code>
	állományába:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat /root/.klogin</code></strong>
janos.root@EXAMPLE.COM</pre><p>Ezután próbáljunk meg kiadni a
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> parancsát:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su</code></strong>
<code class="prompt">Password:</code></pre><p>Nézzük meg milyen tokenjeink is vannak:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>klist</code></strong>
Ticket file:	/tmp/tkt_root_245
Principal:      janos.root@EXAMPLE.COM

  Issued           Expires          Principal
May  2 20:43:12  May  3 04:43:12  krbtgt.EXAMPLE.COM@EXAMPLE.COM</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87223888"></a>14.7.8. Más parancsok használata</h3></div></div></div><p>Az iménti példában létrehoztunk
	egy <code class="literal">janos</code> nevû szereplõt, amihez a
	<code class="literal">root</code> egy példányát
	rendeltük.  Ez egy olyan felhasználón
	alapján történt, akinek a neve megegyezik a
	hozzá tartozó szereplõvel, ami a Kerberosban
	alapértelmezés.  Amennyiben a
	szükséges megjegyzések
	megtalálhatóak a <code class="systemitem">root</code>
	könyvtárában levõ
	<code class="filename">.klogin</code> állományban, akkor a
	<code class="literal">felhasználó.root</code>
	formátumú
	<code class="literal">szereplõ.példány</code>
	azonosító megengedi a
	<code class="literal">felhasználó</code>
	számára, hogy végrehajtsa a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>
	parancsot.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat /root/.klogin</code></strong>
janos.root@EXAMPLE.COM</pre><p>Ehhez hasonlóan, ha a felhasználó
	saját könyvtárában
	megtalálható egy ilyen
	állomány:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cat ~/.klogin</code></strong>
janos@EXAMPLE.COM
jozsef@EXAMPLE.COM</pre><p>Ezzel a konfigurációval bárki, aki
	<code class="systemitem">janos</code> felhasználóként
	vagy <code class="systemitem">jozsef</code>
	felhasználóként (a <code class="command">kinit</code>
	parancson keresztül) hitelesítette magát
	<code class="literal">EXAMPLE.COM</code> övezetbõl, ezen a
	rendszeren (<code class="systemitem">grunt</code>) bejelentkezhet a
	<code class="systemitem">janos</code> nevû
	felhasználóként vagy
	hozzáférhet az állományaihoz az
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rsh</span>(1)</span></a> vagy <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rcp</span>(1)</span></a>
	használatával.</p><p>Például <code class="systemitem">janos</code> most egy
	másik Kerberost használó rendszerre
	jelentkezik be:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kinit</code></strong>
MIT Project Athena (grunt.example.com)
<code class="prompt">Password:</code>
<code class="prompt">%</code> <strong class="userinput"><code>rlogin grunt</code></strong>
Last login: Mon May  1 21:14:47 from grumble
Copyright (c) 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
        The Regents of the University of California.   All rights reserved.

FreeBSD BUILT-19950429 (GR386) #0: Sat Apr 29 17:50:09 SAT 1995</pre><p>Vagy <code class="systemitem">jozsef</code> jelentkezik be ugyanazon a
	gépen <code class="systemitem">janos</code>
	hozzáférésével (a
	<code class="systemitem">janos</code> nevû
	felhasználónak a fentebb bemutatt
	<code class="filename">.klogin</code> állomány
	található a könyvtárában
	és a Kerberos üzemeltetéséért
	felelõs személy létrehozott egy
	<span class="emphasis"><em>jozsef</em></span> nevû szereplõt egy null
	példánnyal):</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kinit</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>rlogin grunt -l janos</code></strong>
MIT Project Athena (grunt.example.com)
<code class="prompt">Password:</code>
Last login: Mon May  1 21:16:55 from grumble
Copyright (c) 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
        The Regents of the University of California.   All rights reserved.
FreeBSD BUILT-19950429 (GR386) #0: Sat Apr 29 17:50:09 SAT 1995</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tcpwrappers.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="security.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="kerberos5.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">14.6. A TCP kapcsolatok burkolása </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 14.8. <span class="application">Kerberos5</span></td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>