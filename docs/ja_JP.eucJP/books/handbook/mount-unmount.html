<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>4.6. ファイルシステムのマウントとアンマウント</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD ハンドブック" /><link rel="up" href="basics.html" title="第4章 UNIX の基礎知識" /><link rel="prev" href="disk-organization.html" title="4.5. ディスク構成" /><link rel="next" href="basics-processes.html" title="4.7. プロセス" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.6. ファイルシステムのマウントとアンマウント</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="disk-organization.html">戻る</a>〓</td><th width="60%" align="center">第4章 UNIX の基礎知識</th><td width="20%" align="right">〓<a accesskey="n" href="basics-processes.html">次へ</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mount-unmount"></a>4.6. ファイルシステムのマウントとアンマウント</h2></div></div></div><p>ファイルシステムは <code class="filename">/</code>
      をルート (根) とする木構造として考えると視覚的に理解しやすいでしょう。
      ルートディレクトリにある
      <code class="filename">/dev</code> や <code class="filename">/usr</code>、
      その他のディレクトリは枝に相当し、
      それらには、<code class="filename">/usr/local</code>
      などのように、さらに枝分かれすることができます。</p><a id="idp82903760" class="indexterm"></a><p>さまざまな理由がありますが、
      ディレクトリをいくつかの異なるファイルシステム上に構築するのが良いでしょう。
      たとえば <code class="filename">/var</code> には、
      <code class="filename">log/</code> や <code class="filename">spool/</code>
      など、さまざまな種類の一時ファイルを置くディレクトリがあるため、
      あふれてしまう可能性があります。
      ルートファイルシステムをあふれさせるのは得策ではありませんので、
      普通は <code class="filename">/var</code> を <code class="filename">/</code>
      から分離します。</p><p>また、次のような場合も、ディレクトリツリーを
      別のファイルシステムに置く理由として良くあげられます。
      それは、たとえば物理的に別のディスクにディレクトリツリーを置く場合、
      <a class="link" href="network-nfs.html" title="22.6. NFS">ネットワークファイルシステム (Network File System)</a> や
      CDROM ドライブのような別の仮想ディスクに置くという場合です。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-fstab"></a>4.6.1. <code class="filename">fstab</code> ファイル</h3></div></div></div><a id="idp82908496" class="indexterm"></a><p><code class="filename">/etc/fstab</code> に書かれているファイルシステムは
        (<code class="option">noauto</code> オプションがなければ)
        <a class="link" href="boot.html" title="第13章 FreeBSD の起動のプロセス">起動プロセス</a>の途中で
	自動的にマウントされます。</p><p><code class="filename">/etc/fstab</code> ファイルは、
        次のような書式で書かれた行のリストになっています。</p><pre class="programlisting"><em class="replaceable"><code>device</code></em>       <em class="replaceable"><code>/mount-point</code></em> <em class="replaceable"><code>fstype</code></em>     <em class="replaceable"><code>options</code></em>      <em class="replaceable"><code>dumpfreq</code></em>     <em class="replaceable"><code>passno</code></em></pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">device</code></span></dt><dd><p>デバイスの名前 (存在していなければなりません)。
	      <a class="xref" href="disks-naming.html" title="16.2. デバイス名">「デバイス名」</a> に説明があります。</p></dd><dt><span class="term"><code class="literal">mount-point</code></span></dt><dd><p>ファイルシステムがマウントするディレクトリの名前
	      (存在していなければなりません)。</p></dd><dt><span class="term"><code class="literal">fstype</code></span></dt><dd><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> に渡されるファイルシステムタイプ。
	      FreeBSD ファイルシステムのデフォルトは
	      <code class="literal">ufs</code> です。</p></dd><dt><span class="term"><code class="literal">options</code></span></dt><dd><p>読み書きするファイルシステムには
	      <code class="option">rw</code>、読み込み専用のファイルシステムには
	      <code class="option">ro</code> を、必要な他のオプションの前に指定します。
	      よく使われるオプションは <code class="option">noauto</code> で、
	      起動時にはマウントされないファイルシステムに使います。
	      その他のオプションは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
	      マニュアルページに載っています。</p></dd><dt><span class="term"><code class="literal">dumpfreq</code></span></dt><dd><p>これは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> が使うもので、
	     どのファイルシステムにダンプが必要なのかを決めます。
             この項目がなければ、0 であるものとみなされます。</p></dd><dt><span class="term"><code class="literal">passno</code></span></dt><dd><p>これはファイルシステムをチェックする順番を決めます。
           ファイルシステムチェックを飛ばしたいファイルシステムには、
           <code class="literal">passno</code> を 0 に設定してください。
	   ルートファイルシステム
	   (どれよりも先にチェックしなければなりません)
	   は <code class="literal">passno</code> を 1 に設定してください。
           他のファイルシステムの <code class="literal">passno</code>
           は 1 以上に設定してください。
	   同じ <code class="literal">passno</code> のファイルシステムがあった場合、
           <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> は可能であれば並行してファイルシステムのチェック
	   を行なおうとします。</p></dd></dl></div><p><code class="filename">/etc/fstab</code>
	ファイルの書式やオプションに関しての詳細は、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-mount"></a>4.6.2. <code class="command">mount</code> コマンド</h3></div></div></div><a id="idp82942672" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> コマンドは、
        ファイルシステムをマウントするために使われるものです。</p><p>基本的には、次のように使います。</p><div class="informalexample"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount device mountpoint</code></strong></pre></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> マニュアルページにはたくさんのオプションが書かれていますが、
        いちばんよく使われるのは次のものです。</p><div class="variablelist"><div class="variablelist-title">マウントオプション</div><dl class="variablelist"><dt><span class="term"><code class="option">-a</code></span></dt><dd><p><code class="filename">/etc/fstab</code>
	      にある全てのファイルシステムをマウントします。
	      例外は <span class="quote">「<span class="quote">noauto</span>」</span> の印がついているものと、
	      <code class="option">-t</code> フラグで除外されたものと、
	      すでにマウントされているファイルシステムです。</p></dd><dt><span class="term"><code class="option">-d</code></span></dt><dd><p>実際にマウントシステムコールする以外のすべてのことをします。
	      このオプションは <code class="option">-v</code>
	      フラグと組み合わせて使い、
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> が実際なにをしようとしているのか調べるのに便利です。</p></dd><dt><span class="term"><code class="option">-f</code></span></dt><dd><p>クリーンでないファイルシステムを強制的にマウントします
	      (危険です)。もしくは、ファイルシステムのマウント状態を
	      読み書き可能から読み込みのみに変更するとき、
	      書き込みアクセスを強制的に取り消します。</p></dd><dt><span class="term"><code class="option">-r</code></span></dt><dd><p>ファイルシステムを読み込み専用でマウントします。
	      これは <code class="option">ro</code> (5.2 より前の
	      FreeBSD では <code class="option">rdonly</code> です)
	      引数を <code class="option">-o</code>
	      オプションに使うのと同じです。</p></dd><dt><span class="term"><code class="option">-t</code>
	    <em class="replaceable"><code>fstype</code></em></span></dt><dd><p>ファイルシステムを指定のファイルシステムタイプでマウントします。
	      または、<code class="option">-a</code> を使った場合、
	      指定したタイプのファイルシステムのみマウントします。</p><p>デフォルトのファイルシステムタイプは
	      <span class="quote">「<span class="quote">ufs</span>」</span> です。</p></dd><dt><span class="term"><code class="option">-u</code></span></dt><dd><p>ファイルシステムのマウントオプションを更新します。</p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>詳細な出力にします。</p></dd><dt><span class="term"><code class="option">-w</code></span></dt><dd><p>ファイルシステムを読み書き可能にマウントします。</p></dd></dl></div><p><code class="option">-o</code> には、
         次のようなオプションを複数カンマで区切って指定します。
         以下に挙げるのはその一部です。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">noexec</span></dt><dd><p>そのファイルシステム上のバイナリの実行を禁止します。
	        セキュリティのために有用なオプションです。</p></dd><dt><span class="term">nosuid</span></dt><dd><p>そのファイルシステム上の setuid や setgid フラグを解釈しません。
	      これもセキュリティのために有用なオプションです。</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-umount"></a>4.6.3. <code class="command">umount</code> コマンド</h3></div></div></div><a id="idp82980688" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a> コマンドは、パラメータとしてマウントポイントの一つ、
	デバイス名、もしくは <code class="option">-a</code> や <code class="option">-A</code>
	といったオプションを取ります。</p><p>いずれの形式でも <code class="option">-f</code> で強制的なアンマウントを行ない、
        <code class="option">-v</code> で詳細な出力を出します。
        ただしほとんどの場合、<code class="option">-f</code> は使わないほうがよいでしょう。
	強制的にファイルシステムをアンマウントすると、
	計算機がクラッシュしたりファイルシステム上部のデータが
	破壊されたりする恐れがあるためです。</p><p>オプション <code class="option">-a</code> と <code class="option">-A</code>
        はマウントされているファイルシステムすべてをアンマウントするのに使います。
	<code class="option">-t</code> にファイルシステムタイプを指定すると、
	指定されたものだけがアンマウントされます。
	また、<code class="option">-A</code> を使うとルートファイルシステムはアンマウントしません。</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="disk-organization.html">戻る</a>〓</td><td width="20%" align="center"><a accesskey="u" href="basics.html">上に戻る</a></td><td width="40%" align="right">〓<a accesskey="n" href="basics-processes.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">4.5. ディスク構成〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓4.7. プロセス</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>