<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>4.3. 許可属性</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD ハンドブック" /><link rel="up" href="basics.html" title="第4章 UNIX の基礎知識" /><link rel="prev" href="consoles.html" title="4.2. 仮想コンソールと端末" /><link rel="next" href="dirstructure.html" title="4.4. ディレクトリ構造" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.3. 許可属性</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="consoles.html">戻る</a>〓</td><th width="60%" align="center">第4章 UNIX の基礎知識</th><td width="20%" align="right">〓<a accesskey="n" href="dirstructure.html">次へ</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="permissions"></a>4.3. 許可属性</h2></div></div></div><a id="idp82377168" class="indexterm"></a><p>FreeBSD は BSD <span class="trademark">UNIX</span>® の直系の子孫であり、
      いくつかの鍵となる <span class="trademark">UNIX</span>® 思想にもとづいています。
      まず最も際だった特徴として最初に言えるのは、FreeBSD
      がマルチユーザのオペレーティングシステムだということです。
      FreeBSD は同時に働いている複数のユーザすべてを、
      完全に分離したタスク上で処理する能力を持っています。
      また FreeBSD は、ハードウェアデバイス、周辺装置、メモリ、
      CPU 時間等への要求を、各ユーザが平等に利用できるように適切に共有し、
      管理する役割を担っています。</p><p>システムがマルチユーザをサポートしているため、
      システムが管理する資源はすべて、
      誰がその資源を読み・書き・実行できるかを支配する、
      一組の許可属性を持っています。
      これらの許可属性は 3 つの部分からなる 3 桁の 8 進数の形で格納されています。
      それはそのファイルの所有者 (owner) に対するもの、
      そのファイルが所属するグループ (group) に対するもの、
      その他 (others) に対するものの 3 つです。
      これを数字を使って表現すると、次のようになります。</p><a id="idp82379472" class="indexterm"></a><a id="idp82379984" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>値</th><th>許可属性</th><th>ディレクトリの表示</th></tr></thead><tbody><tr><td>0</td><td>読み込み不可、書き込み不可、実行不可</td><td><code class="literal">---</code></td></tr><tr><td>1</td><td>読み込み不可、書き込み不可、実行可能</td><td><code class="literal">--x</code></td></tr><tr><td>2</td><td>読み込み不可、書き込み可能、実行不可</td><td><code class="literal">-w-</code></td></tr><tr><td>3</td><td>読み込み不可、書き込み可能、実行可能</td><td><code class="literal">-wx</code></td></tr><tr><td>4</td><td>読み込み可能、書き込み不可、実行不可</td><td><code class="literal">r--</code></td></tr><tr><td>5</td><td>読み込み可能、書き込み不可、実行可能</td><td><code class="literal">r-x</code></td></tr><tr><td>6</td><td>読み込み可能、書き込み可能、実行不可</td><td><code class="literal">rw-</code></td></tr><tr><td>7</td><td>読み込み可能、書き込み可能、実行可能</td><td><code class="literal">rwx</code></td></tr></tbody></table></div><a id="idp82401872" class="indexterm"></a><a id="idp82402768" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a> に対してコマンドライン引数 <code class="option">-l</code> を使うと、
      詳細なディレクトリリストを見ることができ、
      ファイルの所有者、グループ、その他への許可属性を示す欄があるのがわかります。
      例えば、<code class="command">ls -l</code> を実行して、
      適当なディレクトリを表示させると以下のようになります。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ls -l</code></strong>
total 530
-rw-r--r--  1 root  wheel     512 Sep  5 12:31 myfile
-rw-r--r--  1 root  wheel     512 Sep  5 12:31 otherfile
-rw-r--r--  1 root  wheel    7680 Sep  5 12:31 email.txt
...</pre><p>以下に示すのは、
      <code class="command">ls -l</code> の最初の行を抜き出したものです。</p><pre class="screen">-rw-r--r--</pre><p>最初の (一番左の) 文字は、それが
      普通のファイルなのか、ディレクトリなのか、
      キャラクタ型のデバイス特殊ファイルなのか、
      ソケットなのか、
      その他の特殊な疑似ファイルデバイスなのかといった種類を示す特別な文字です。
      この場合、<code class="literal">-</code> という文字は、
      普通のファイルであることを示します。
      この例でその次に来る <code class="literal">rw-</code> と書かれた 3 文字は、
      そのファイルの所有者に許可を与えるものです。
      その次の <code class="literal">r--</code> の 3 文字は、
      そのファイルが所属しているグループに許可を与えます。
      最後の <code class="literal">r--</code> の 3 文字は、
      システムに存在するその他のユーザに許可を与えます。
      <span class="quote">「<span class="quote">-</span>」</span> は許可が与えられていないことを示します。
      このファイルの例では、ファイルの所有者はこのファイルを読み書きでき、
      ファイルの所属しているグループに属するユーザはファイルを読むことだけでき、
      そのどちらでもないユーザは、
      このファイルを読むだけできるように許可属性が与えられています。
      上の表によれば、このファイルに与えられた許可属性は
      <code class="literal">644</code> となります。
      ここで各数字は、このファイルの許可属性の 3 つの部分を表しています。</p><p>ファイルについてはここまでの説明で十分です。 しかし、
      デバイスの場合の許可属性はどのようにコントロールされているのでしょうか?
      FreeBSD は、大部分のハードウェアをファイルとして取り扱います。
      そのため、プログラムからは普通のファイルとまったく同じようにオープンし、
      データの読み書きができるようになっています。
      これらのデバイス特殊ファイルは
      <code class="filename">/dev</code> ディレクトリに収められています。</p><p>ディレクトリもまた、ファイルと同様に扱われます。
      それは読み込み/書き込み/実行の許可属性を持ちます。
      ディレクトリの実行ビットはファイルのそれとは少し違った意味を持ちます。
      ディレクトリが実行可能になっているとき、
      そのディレクトリに移動することができます。
      つまり、そのディレクトリに <span class="quote">「<span class="quote">cd</span>」</span> (change directory)
      することが可能です。
      また、実行可能属性がついているディレクトリでは、
      名前が分かっているファイルにアクセスすることもできます
      (もちろんそのファイル自体の許可属性によります)。
    </p><p>特に、ディレクトリの中の一覧を表示するには、
      そのディレクトリに読み込み属性が設定されていなければなりません。
      一方、名前が分かっているファイルを削除するには、
      そのファイルが含まれているディレクトリに
      書き込み属性<span class="emphasis"><em>と</em></span>実行属性
      の両方が必要です。</p><p>この他にも許可属性ビットはありますが、いずれも
      setuid バイナリや sticky ディレクトリなどといった特殊な状況で使われます。
      ファイルの許可属性そのものについて、
      また、それらの設定のしかたに関する詳しい情報は、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a> マニュアルページを参照してください。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82417744"></a>4.3.1. シンボリック表記</h3></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span> <span class="firstname">Tom</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp82420944" class="indexterm"></a><p>シンボリック表記と呼ばれる許可属性を表す方法では、
	ファイルやディレクトリの許可属性を、
	8 進数ではなく記号を用いて設定します。
	シンボリック表記では、(who), (action), (permissions)
	という書式が用いられます。
	利用できる値は以下の通りです。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>オプション</th><th>文字</th><th>意味</th></tr></thead><tbody><tr><td>(who)</td><td>u</td><td>ユーザ</td></tr><tr><td>(who)</td><td>g</td><td>ファイルを所持しているグループ</td></tr><tr><td>(who)</td><td>o</td><td>その他</td></tr><tr><td>(who)</td><td>a</td><td>すべて (<span class="quote">「<span class="quote">world</span>」</span>)</td></tr><tr><td>(action)</td><td>+</td><td>許可属性を与える</td></tr><tr><td>(action)</td><td>-</td><td>許可属性を取り除く</td></tr><tr><td>(action)</td><td>=</td><td>許可属性を指定したものにする</td></tr><tr><td>(permissions)</td><td>r</td><td>読み込み</td></tr><tr><td>(permissions)</td><td>w</td><td>書き込み</td></tr><tr><td>(permissions)</td><td>x</td><td>実行</td></tr><tr><td>(permissions)</td><td>t</td><td>Sticky ビット</td></tr><tr><td>(permissions)</td><td>s</td><td>UID または GID を設定する</td></tr></tbody></table></div><p>これらの値は、これまでと同様に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a>
      コマンドで用いますが、文字で指定します。
      たとえば、<em class="replaceable"><code>FILE</code></em>
      に対して自分以外のユーザからアクセスを一切受け付けたくない、
      というときには以下のコマンドを実行してください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chmod go= FILE</code></strong></pre><p>カンマ区切りで設定することで、
      ファイルの属性を一度に 2 つ以上変更できます。
      以下の例では、<em class="replaceable"><code>FILE</code></em>
      に対して自分以外のユーザから書き込みの権限を取り上げ、
      かわりにすべてのユーザが <em class="replaceable"><code>FILE</code></em>
      を実行できるようにします。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chmod go-w,a+x <em class="replaceable"><code>FILE</code></em></code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82499152"></a>4.3.2. FreeBSD のファイルフラグ</h3></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span> <span class="firstname">Tom</span> [FAMILY Given]</span>. </span></div></div></div><p>先ほど説明したファイルの許可属性に加え、
	FreeBSD では <span class="quote">「<span class="quote">ファイルフラグ</span>」</span> を使えます。
	これはファイルにセキュリティや管理上の属性を追加するものですが、
	ディレクトリには追加しません。</p><p>これらのファイルフラグはファイルに管理上の属性を追加し、
	<code class="systemitem">root</code>
	ユーザでさえ誤ってファイルを消去、変更してしまうことを防ぎます。</p><p>ファイルフラグは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a>
	を使って、簡単なインタフェースで設定できます。
	例えば、<code class="filename">file1</code>
	というファイルにシステムレベルで消去不可のフラグを設定するには、
	以下のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags sunlink <code class="filename">file1</code></code></strong></pre><p>また、消去不可のフラグを削除するには、
	以下のように先ほどのコマンドの <code class="option">sunlink</code> の前に
	<span class="quote">「<span class="quote">no</span>」</span> をつけるだけです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags nosunlink <code class="filename">file1</code></code></strong></pre><p>ファイルにどのフラグが設定されているのかを見るには、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a>
	コマンドを <code class="option">-lo</code> オプションと一緒に使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls -lo <code class="filename">file1</code>
  </code></strong></pre><p>出力は以下のようになります。</p><pre class="programlisting">-rw-r--r--  1 trhodes  trhodes  sunlnk 0 Mar  1 05:54 file1</pre><p>いくつかのフラグの追加、削除は
	<code class="systemitem">root</code> ユーザしかできません。
	他のフラグは、ファイルの所有者が変更できます。
	システム管理者は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a> と <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chflags</span>(2)</span></a> から、
	より詳細な情報を得ることをおすすめします。</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="consoles.html">戻る</a>〓</td><td width="20%" align="center"><a accesskey="u" href="basics.html">上に戻る</a></td><td width="40%" align="right">〓<a accesskey="n" href="dirstructure.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">4.2. 仮想コンソールと端末〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓4.4. ディレクトリ構造</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>