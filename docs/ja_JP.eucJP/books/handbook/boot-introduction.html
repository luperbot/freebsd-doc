<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>13.2. 起動時の問題</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD ハンドブック" /><link rel="up" href="boot.html" title="第13章 FreeBSD の起動のプロセス" /><link rel="prev" href="boot.html" title="第13章 FreeBSD の起動のプロセス" /><link rel="next" href="boot-blocks.html" title="13.3. ブートマネージャと起動ステージ" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">13.2. 起動時の問題</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="boot.html">戻る</a>〓</td><th width="60%" align="center">第13章 FreeBSD の起動のプロセス</th><td width="20%" align="right">〓<a accesskey="n" href="boot-blocks.html">次へ</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-introduction"></a>13.2. 起動時の問題</h2></div></div></div><p>計算機の電源を入れ、オペレーティングシステムをスタートさせるのには、
      おもしろいジレンマがあります。定義により、
      計算機は、オペレーティングシステムが起動するまでは、
      ディスクからプログラムを動かすことも含めて、
      何をどうすればよいかまったく知りません。
      では、計算機はオペレーティングシステムなしに
      ディスクからプログラムを実行することができず、
      オペレーティングシステムのプログラムがディスク上にあるのなら、
      どうやってオペレーティングシステムを起動するのでしょうか?</p><p>この問題は<em class="citetitle">ほらふき男爵の冒険</em>
      という本の中に書かれている問題ととてもよく似ています。
      登場人物がマンホールの下に半分落っこちて、
      靴紐 (ブートストラップ) をつかんで自分を引っぱり、持ち上げるのです。
      計算機の黎明期には、<em class="firstterm">ブートストラップ</em>
      という用語でオペレーティングシステムをロードする
      機構のことを指していたのですが、
      いまはこれを縮めて <span class="quote">「<span class="quote">ブート (起動)</span>」</span> と言います。</p><a id="idp88778064" class="indexterm"></a><a id="idp88778576" class="indexterm"></a><p>x86 ハードウェアでは、基本入出力システム
      (Basic Input/Output System: BIOS)
      にオペレーティングシステムをロードする責任があります。
      オペレーティングシステムをロードするために、
      BIOS がハードディスク上のマスターブートレコード
      (Master Boot Record: MBR) を探します。
      MBR はハードディスク上の特定の場所になければなりません。
      BIOS には MBR をロードし起動するのに十分な知識があり、
      オペレーティングシステムをロードするために必要な作業の残りは、
      場合によっては BIOS の助けを得た上で
      MBR が実行できることを仮定しています。</p><a id="idp88779728" class="indexterm"></a><a id="idp88780240" class="indexterm"></a><a id="idp88780752" class="indexterm"></a><p>MBR 内部のコードは、
      通常<span class="emphasis"><em>ブートマネージャ</em></span>と呼ばれます。
      とりわけユーザとの対話がある場合にそう呼ばれます。
      その場合は、通常もっと多くのブートマネージャのコードが、
      ディスクの最初の<span class="emphasis"><em>トラック</em></span>
      または OS のファイルシステム上におかれます
      (ブートマネージャは<span class="emphasis"><em>ブートローダ</em></span>
      と呼ばれることもありますが、
      FreeBSD はこの言葉を起動のもっと後の段階に対して使います)。
      よく使われるブートマネージャには、
      <span class="application">boot0</span> (<span class="application">Boot Easy</span>
      とも呼ばれる FreeBSD 標準のブートマネージャ),
      <span class="application">Grub</span>, <span class="application">GAG</span> や
      <span class="application">LILO</span> 等があります
      (MBR 内に収まるのは <span class="application">boot0</span> だけです)。</p><p>ディスク上にインストールされているオペレーティングシステムが
      1 つであれば、標準の PC MBR で十分です。
      この MBR はディスク上の最初の起動可能な (アクティブな) スライスを探し、
      そのスライスにあるコードを起動してオペレーティングシステムの残りをロードします。
      デフォルトで <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> がインストールする MBR
      は、このような MBR です。<code class="filename">/boot/mbr</code>
      を基にしています。</p><p>ディスク上にオペレーティングシステムを複数インストールしているなら、
      別のブートマネージャ
      (複数のオペレーティングシステムの一覧を表示できて、
      起動するオペレーティングシステムを選択できるようなもの)
      をインストールするとよいでしょう。
      このようなブートマネージャの中から 2 つを次の節で説明します。</p><p>FreeBSD ブートストラップシステムの残りは 3 段階に分かれます。
      第 1 ステージは MBR によって起動されるもので、
      MBR は計算機を特定の状態にするために必要なことだけ知っていて、
      第 2 ステージを起動します。
      第 2 ステージでは、第 3 ステージを起動する前に、
      もうちょっとやることができます。
      第 3 ステージでオペレーティングシステムのロード作業を完了します。
      起動作業がこれらの 3 段階に分かれているのは、
      PC の規格がステージ 1 とステージ 2
      で実行できるプログラムのサイズに制限を課しているからです。
      これらの作業をつなぎ合わせることによって、
      FreeBSD はより柔軟なローダ (loader) を提供しているのです。</p><a id="idp88791632" class="indexterm"></a><a id="idp88792144" class="indexterm"></a><p>その後カーネルが起動し、デバイスの検出と初期化を開始します。
      そしてカーネルの起動が終わると、制御はユーザープロセスの
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> へ移されます。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> はまず
      ディスクが利用可能であることを確かめ、
      ファイルシステムのマウント、
      ネットワークで利用するネットワークカードのセットアップ、
      そして通常 FreeBSD システムで初期時に起動されるすべてのプロセスの起動、
      といったユーザーレベルでのリソース (資源) 設定を行ないます。</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="boot.html">戻る</a>〓</td><td width="20%" align="center"><a accesskey="u" href="boot.html">上に戻る</a></td><td width="40%" align="right">〓<a accesskey="n" href="boot-blocks.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">第13章 FreeBSD の起動のプロセス〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓13.3. ブートマネージャと起動ステージ</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>