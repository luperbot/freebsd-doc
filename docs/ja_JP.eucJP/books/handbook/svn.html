<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>A.4. Subversion を使う</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD ハンドブック" /><link rel="up" href="mirrors.html" title="付録A FreeBSD の入手方法" /><link rel="prev" href="ctm.html" title="A.3. CTM を使う" /><link rel="next" href="mirrors-rsync.html" title="A.5. rsync を使用する" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">A.4. <span class="application">Subversion</span> を使う</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ctm.html">戻る</a>〓</td><th width="60%" align="center">付録A FreeBSD の入手方法</th><td width="20%" align="right">〓<a accesskey="n" href="mirrors-rsync.html">次へ</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="svn"></a>A.4. <span class="application">Subversion</span> を使う</h2></div></div></div><a id="idp98260560" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="svn-intro"></a>A.4.1. はじめに</h3></div></div></div><p>2012 年 7 月から、FreeBSD
	はすべてのソースコード、ドキュメント、Ports Collection
	を管理するメインのバージョン管理システムに
	<span class="application">Subversion</span> を使っています。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">一般的には <span class="application">Subversion</span>
	  は開発者向けのツールです。
	  大部分のユーザは、FreeBSD のベースシステムのアップデートに
	  <code class="command">freebsd-update</code> (<a class="xref" href="updating-upgrading-freebsdupdate.html" title="18.2. FreeBSD Update">「FreeBSD Update」</a>)、
	  Ports Collection のアップデートには <code class="command">portsnap</code> (<a class="xref" href="ports-using.html" title="5.5. Ports Collection の利用">「Ports Collection の利用」</a>)
	  を使うべきでしょう。</p></div><p>この章では、FreeBSD システムへの
	<span class="application">Subversion</span> のインストール方法および、
	FreeBSD リポジトリをローカルに準備する方法について説明します。
	また、利用可能な FreeBSD <span class="application">Subversion</span> ミラーの一覧および、
	<span class="application">Subversion</span>
	を利用するための情報についても紹介します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="svn-install"></a>A.4.2. インストール</h3></div></div></div><p>リポジトリの中身をチェックアウトできるよう、事前に
	<span class="application">Subversion</span>
	をインストールしておく必要があります。
	もし、すでに ports ツリーが用意してあれば、
	以下のようにして <span class="application">Subversion</span>
	をインストールできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/devel/subversion</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>もし ports ツリーを利用できなければ、package から
	<span class="application">Subversion</span> をインストールできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install devel/subversion</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="svn-usage"></a>A.4.3. <span class="application">Subversion</span> の実行</h3></div></div></div><p><code class="command">svn</code> コマンドを使って、
	必要なリポジトリのソースコードを以下のようにしてダウンロードします。
        このディレクトリにあるファイルを
        <span class="emphasis"><em>ローカル作業コピー</em></span> と呼びます。</p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="emphasis"><em><code class="command">checkout</code> を使う前に、
	  ローカルディレクトリを移動するか削除してください。</em></span></p><p xmlns="http://www.w3.org/1999/xhtml"><code class="command">svn</code>
	  以外の方法で用意されたディレクトリでチェックアウトすると、
	  すでに存在するファイルと、
	  リポジトリから持ってきたファイルとの間で衝突が起きてしまいます。</p></div><p><span class="application">Subversion</span> では、リポジトリの指定に
	<em class="replaceable"><code>protocol://hostname/path</code></em> 形式の
	<acronym class="acronym">URL</acronym> を用います。
	以下に記載されているように、
	ミラーサイトは異なる複数のプロトコルに対応しています。
	アクセスする FreeBSD リポジトリは、パス (path) の最初で指定します。
	リポジトリは 3 つあります。
	<code class="literal">base</code> は FreeBSD ベースシステムのソースコード、
	<code class="literal">ports</code> は Ports Collection、
	そして <code class="literal">doc</code> はドキュメントのリポジトリです。
	たとえば、
	<code class="literal">svn://svn0.us-east.FreeBSD.org/ports/head/</code>
	という URL は、<code class="literal">svn</code> プロトコルによる <code class="systemitem">svn0.us-east.FreeBSD.org</code>
	ミラー上の ports リポジトリのメインブランチを示しています。</p><p>以下のように入力して、リポジトリからチェックアウトしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn checkout <em class="replaceable"><code>svn-mirror</code></em>/<em class="replaceable"><code>repository</code></em>/<em class="replaceable"><code>branch</code></em> <em class="replaceable"><code>lwcdir</code></em></code></strong></pre><p>ここで、<em class="replaceable"><code>repository</code></em>,
	<em class="replaceable"><code>branch</code></em> および <em class="replaceable"><code>root</code></em>
	は以下のとおりです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><em class="replaceable"><code>svn-mirror</code></em> は、
	    <a class="link" href="svn.html#svn-mirrors" title="A.4.4. Subversion ミラーサイト">Subversion
	    ミラーサイト</a> のひとつの URL です。</p></li><li class="listitem"><p><em class="replaceable"><code>repository</code></em> には、
	    プロジェクトのリポジトリ、すなわち <code class="literal">base</code>,
	    <code class="literal">ports</code>, または <code class="literal">doc</code>
	    のどれかひとつを指定します。</p></li><li class="listitem"><p><em class="replaceable"><code>branch</code></em> は、使うリポジトリによります。
	    <code class="literal">ports</code> および <code class="literal">doc</code>
	    では、ほとんどの変更が
	    <code class="literal">head</code> ブランチで行われます。
	    <code class="literal">base</code> リポジトリでは、<code class="literal">head</code>
	    ブランチで -CURRENT の最新バージョンを管理しています。
	    -STABLE ブランチの最新バージョンは、
	    8.<em class="replaceable"><code>x</code></em> は <code class="literal">stable/8</code>,
	    9.<em class="replaceable"><code>x</code></em> は <code class="literal">stable/9</code>,
	    そして
	    10.<em class="replaceable"><code>x</code></em> は <code class="literal">stable/10</code>
	    で管理しています。</p></li><li class="listitem"><p><em class="replaceable"><code>lwcdir</code></em> は、
	    指定したブランチの中身が置かれるターゲットのディレクトリです。
	    通常 <code class="literal">ports</code> は <code class="filename">/usr/ports</code>、
	    <code class="literal">base</code> は <code class="filename">/usr/src</code>、
	    そして <code class="literal">doc</code> では
	    <code class="filename">/usr/doc</code> と指定します。</p></li></ul></div><p>以下の例では、Ports Collection を western US リポジトリから
        <acronym class="acronym">HTTPS</acronym> プロトコルを使って、チェックアウトします。
	そしてそれらは、
	<code class="filename">/usr/ports</code>
	のローカル作業コピーに置かれます。
	もし <code class="filename">/usr/ports</code> がすでに存在して、
	それが <code class="command">svn</code> によって生成されたものでなければ、
	チェックアウトする前に、名前を変更するか削除してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn checkout <em class="replaceable"><code>https://svn0.us-west.FreeBSD.org</code></em>/ports/head /usr/ports</code></strong></pre><p>初めてチェックアウトする際には、
	リモートリポジトリのすべてのブランチをダウンロードするので時間がかかります。
	どうぞ我慢してください。</p><p>初めてのチェックアウト後は、
	以下を実行することでローカル作業コピーをアップデートできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn update <em class="replaceable"><code>lwcdir</code></em></code></strong></pre><p>この例で作成された
	<code class="filename">/usr/ports</code> をアップデートするには、
	以下のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn update /usr/ports</code></strong></pre><p>アップデートはチェックアウトにくらべ、
	変更点のあるファイルのみが転送されるので高速です。</p><p>チェックアウト後、ローカル作業コピーをアップデートするもうひとつの方法は、
	<code class="filename">/usr/ports</code>,
	<code class="filename">/usr/src</code> または
	<code class="filename">/usr/doc</code> ディレクトリの
	<code class="filename">Makefile</code> で提供されています。
	<code class="varname">SVN_UPDATE</code> を設定して
	<code class="buildtarget">update</code> ターゲットを使ってください。
	たとえば、<code class="filename">/usr/src</code>
        をアップデートするには、以下のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make update SVN_UPDATE=yes</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="svn-mirrors"></a>A.4.4. <span class="application">Subversion</span> ミラーサイト</h3></div></div></div><a id="idp98327888" class="indexterm"></a><p>すべてのミラーはすべてのリポジトリを持っています。</p><p>FreeBSD <span class="application">Subversion</span> サーバのマスタである
	<code class="systemitem">svn.FreeBSD.org</code> は、
	公には読み出し専用でアクセスできますが、
	将来的には変更される予定ですので、
	オフィシャルミラーを使うことが推奨されます。
	ブラウザを用いて FreeBSD の Subversion リポジトリを参照するには、<a class="link" href="http://svnweb.FreeBSD.org/" target="_top">http://svnweb.FreeBSD.org/</a>
	を利用してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD の <span class="application">Subversion</span>
	  ミラーのネットワークは、
	  まだ初期の段階にあるので、今後変更されることがあります。
	  以下のミラー一覧を不変なものとは考えないでください。
	  特に、サーバの <acronym class="acronym">SSL</acronym> 証明書は、
	  いずれかの時点で変更になるでしょう。</p></div><div class="informaltable"><table border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>名前</th><th>プロトコル</th><th>位置</th><th><acronym class="acronym">SSL</acronym> フィンガープリント</th></tr></thead><tbody><tr><td><code class="systemitem">svn0.us-west.FreeBSD.org</code></td><td><code class="literal">svn</code>, <a class="link" href="http://svn0.us-west.FreeBSD.org/" target="_top"><code class="literal">http</code></a>,
		<a class="link" href="https://svn0.us-west.FreeBSD.org/" target="_top"><code class="literal">https</code></a></td><td>USA, カリフォルニア</td><td>SHA1
		<code class="literal">1C:BD:85:95:11:9F:EB:75:A5:4B:C8:A3:FE:08:E4:02:73:06:1E:61</code></td></tr><tr><td><code class="systemitem">svn0.us-east.FreeBSD.org</code></td><td><code class="literal">svn</code>, <a class="link" href="http://svn0.us-east.FreeBSD.org/" target="_top"><code class="literal">http</code></a>,
		<a class="link" href="https://svn0.us-east.FreeBSD.org/" target="_top"><code class="literal">https</code></a>,
		<code class="literal">rsync</code></td><td>USA, ニュージャージ</td><td>SHA1
		<code class="literal">1C:BD:85:95:11:9F:EB:75:A5:4B:C8:A3:FE:08:E4:02:73:06:1E:61</code></td></tr><tr><td><code class="systemitem">svn0.eu.FreeBSD.org</code></td><td><code class="literal">svn</code>, <a class="link" href="http://svn0.eu.FreeBSD.org/" target="_top"><code class="literal">http</code></a>,
		<a class="link" href="https://svn0.eu.FreeBSD.org/" target="_top"><code class="literal">https</code></a>,
		<code class="literal">rsync</code></td><td>Europe, UK</td><td>SHA1
		<code class="literal">98:22:1F:B0:CF:20:ED:3F:5D:05:38:AB:50:F1:47:53:3C:6B:14:6A</code></td></tr><tr><td><code class="systemitem">svn0.ru.FreeBSD.org</code></td><td><code class="literal">svn</code>, <a class="link" href="http://svn0.ru.FreeBSD.org/" target="_top"><code class="literal">http</code></a>,
		<a class="link" href="https://svn0.ru.FreeBSD.org/" target="_top"><code class="literal">https</code></a>,
		<code class="literal">rsync</code></td><td>ロシア、モスクワ</td><td>SHA1
		<code class="literal">F6:44:AA:B9:03:89:0E:3E:8C:4D:4D:14:F0:27:E6:C7:C1:8B:17:C5</code></td></tr></tbody></table></div><p><acronym class="acronym">HTTPS</acronym> は推奨されているプロトコルです。
	他のコンピュータが FreeBSD ミラーを装う (一般的には
	<span class="quote">「<span class="quote">マン・イン・ザ・ミドル</span>」</span> 攻撃として知られています)
	ことや、もしくは、
	エンドユーザに対し好ましくない内容を送りつけようということに対し保護を行います。</p><p><a id="svn-mirrors-fingerprint"></a><acronym class="acronym">HTTPS</acronym>
	ミラーへの最初の接続の際には、
	サーバの <span class="emphasis"><em>フィンガープリント</em></span>
	の確認を求められます。</p><pre class="screen">Error validating server certificate for 'https://svn0.us-west.freebsd.org:443':
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
 - The certificate hostname does not match.
Certificate information:
 - Hostname: svnmir.ysv.FreeBSD.org
 - Valid: from Jul 29 22:01:21 2013 GMT until Dec 13 22:01:21 2040 GMT
 - Issuer: clusteradm, FreeBSD.org, (null), CA, US (clusteradm@FreeBSD.org)
 - Fingerprint: 1C:BD:85:95:11:9F:EB:75:A5:4B:C8:A3:FE:08:E4:02:73:06:1E:61
(R)eject, accept (t)emporarily or accept (p)ermanently?</pre><p>フィンガープリントを上の表の一覧のものと照合してください。
	フィンガープリントが一致したら、
	サーバのセキュリティ証明書を一時的 (permanently)
	もしくは恒久的 (temporarily) に受け入れてください。
	一時的な認証であれば、
	サーバとの一回のセッションで有効期限が切れるため、
	次回の接続時にはもう一度検証が行われます。
	恒常的な認証を選んだ場合には、認証のための証明書が
	<code class="filename">~/.subversion/auth/</code> に保存され、
	有効期限が切れるまでは、
	フィンガープリントの確認は求められません。</p><p>ファイアウォールまたは他の問題のため、<code class="literal">https</code>
	を使えなければ、転送速度がより少し早い <code class="literal">svn</code>
	を使ってください。
	両方を使えない場合には、
	<code class="literal">http</code> を使ってください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98405456"></a>A.4.5. より詳しい情報</h3></div></div></div><p><span class="application">Subversion</span> の利用に関する他の情報は、
	<a class="link" href="http://svnbook.red-bean.com/" target="_top">Version
	  Control with Subversion</a> や <a class="link" href="http://subversion.apache.org/docs/" target="_top">Subversion
	Documentation</a> といった
	<span class="quote">「<span class="quote">Subversion Book</span>」</span> をご覧ください。</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ctm.html">戻る</a>〓</td><td width="20%" align="center"><a accesskey="u" href="mirrors.html">上に戻る</a></td><td width="40%" align="right">〓<a accesskey="n" href="mirrors-rsync.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">A.3. CTM を使う〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓A.5. <span class="application">rsync</span> を使用する</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>