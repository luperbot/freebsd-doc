<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>15.2. はじめに</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD ハンドブック" /><link rel="up" href="security.html" title="第15章 セキュリティ" /><link rel="prev" href="security.html" title="第15章 セキュリティ" /><link rel="next" href="securing-freebsd.html" title="15.3. FreeBSDの安全性を高める" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">15.2. はじめに</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="security.html">戻る</a>〓</td><th width="60%" align="center">第15章 セキュリティ</th><td width="20%" align="right">〓<a accesskey="n" href="securing-freebsd.html">次へ</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-intro"></a>15.2. はじめに</h2></div></div></div><p>セキュリティとは、システム管理者をいつも悩ませる仕事の一つです。
      すべての BSD Unix マルチユーザシステムは、
      従来からいくつかのセキュリティ機構を備えていますが、
      ユーザを疑心暗鬼に陥らせないように追加のセキュリティ機構を構築し
      保守する仕事はおそらく、システム管理者としてもっとも大きな責務の一つでしょう。
      マシンの安全性に反映されるのは、管理者が作業したことだけです。
      またセキュリティ問題は、快適な環境に必要なものと競合します。
      一般に Unix システムは膨大な数のプロセスを同時に動作させることができ、
      そのプロセスの大部分は、サーバ 〓
      外部から接続し、通信するものとして動作します。
      かつてのミニコンとメインフレームがデスクトップにとってかわり、
      さらにコンピュータが相互に接続されたネットワークを形成するようになった今日、
      セキュリティは一層大きな関心事になってきています。</p><p>セキュリティを実装するには、
      タマネギのように階層化する手法
      (a layered <span class="quote">「<span class="quote">onion</span>」</span> approach)
      が最適です。
      どうすれば良いのか簡単に説明すると、
      便利な機能と同じ数だけセキュリティの階層を作り、
      システムへの侵入を注意深く監視するのです。
      あなたはセキュリティを過度に厳重にしたり、
      侵入の監視に時間をとられたいとは思わないでしょう。
      この侵入の発見という部分は、
      あらゆるセキュリティ機構において最も重要な部分の一つなのです。
      たとえば、システムの各バイナリに
      <code class="literal">schg</code> フラグ (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a> 参照)
      を設定するのは、大して意味がありません。
      フラグを設定すると一時的にバイナリが保護され、
      侵入してきた攻撃者によってシステムに加えられる変更のうち、
      容易に検出可能な変更は行なえなくなります。
      しかしその結果として、セキュリティ機構がその侵入者を検出することも
      まったくできなくなってしまうでしょう。</p><p>また、システムセキュリティには、
      さまざまな形での攻撃に対処することとも関係しています。
      攻撃の中には <code class="systemitem">root</code>
      権限を奪おう (<span class="quote">「<span class="quote">root 権限を破る</span>」</span>) とはしないけれども、
      クラッシュやシステムの不安定状態を引き起こそうとするものもあります。
      このセキュリティ問題は、いくつかに分類することが可能です。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>サービス妨害攻撃 (denial of service attack)</p></li><li class="listitem"><p>ユーザアカウントの不正利用 (user account compromise)</p></li><li class="listitem"><p>アクセス可能なサーバを使った root 権限の不正利用</p></li><li class="listitem"><p>ユーザアカウントを経由した root 権限の不正使用</p></li><li class="listitem"><p>バックドアの設置</p></li></ol></div><a id="idp89439056" class="indexterm"></a><a id="idp89440208" class="indexterm"></a><a id="idp89441872" class="indexterm"></a><p>サービス妨害攻撃 (DoS 攻撃) とは、
      マシンから必要な資源を奪う行為です。
      通常、サービス妨害攻撃はそのマシンで実行されるサーバや
      ネットワークスタックを過負荷状態にしてマシンをクラッシュさせたり、
      マシンを使えなくしたりするような力任せの方法です。
      サービス妨害攻撃の中には、
      ネットワークスタックのバグを利用して、
      パケット一つでマシンをクラッシュさせようとするものもあります。
      後者には、カーネルにバグ修正を施すことによってのみ対応することができます。
      サーバプロセスに対する攻撃は、オプションを適切に指定することによって、
      攻撃されている状況でサーバプロセスの負荷上昇に限界を設定することで
      対応できる場合が多いです。これらに比べると、
      ネットワークへの力任せの攻撃への対応はずっと難しくなります。
      たとえば、偽造パケットによる攻撃 (spoof-packet attack) は、
      インターネットからシステムを切り離す以外の方法で
      防ぐことはほとんど不可能です。
      この攻撃によって、マシンを落としてしまうことはできないかもしれませんが、
      接続しているインターネット回線を飽和させてしまうことはできます。</p><a id="idp89442768" class="indexterm"></a><p>ユーザアカウントの不正利用は、
      サービス妨害攻撃よりもずっとよくある問題です。
      このご時勢でも、自分たちのマシンで標準の
      <span class="application">telnetd</span>,
      <span class="application">rlogind</span>,
      <span class="application">rshd</span>, <span class="application">ftpd</span>
      サーバを実行させているシステ
      ム管理者は多いのです。これらのサーバは、デフォルトでは、暗号化さ
      れたコネクション上で動作していません。その結果、抱えているユーザ
      数が標準くらいであれば、リモートログイン (そのシステムにログイン
      するには最も普通で便利な方法です) しているユーザのうち一人以上は、
      パスワードを覗き見られてしまうでしょう。システム管理者が注意深い
      人ならば、たとえログインが成功していたとしても、リモートアクセス
      ログを解析して、疑わしい送信元アドレスを探すものです。</p><p>ひとたび攻撃者がユーザアカウントへのアクセス権を入手したら、
      攻撃者は <code class="systemitem">root</code> 権限を破れると仮定するべきです。
      しかし、セキュリティを十分維持し、手入れの行き届いたシステムにおい
      ては、あるユーザアカウントへのアクセスが可能となっても、
      必ずしも攻撃者に <code class="systemitem">root</code>
      へのアクセス権を与えるとは限りません。この違いは重要です。
      というのは、一般的に
      <code class="systemitem">root</code> へのアクセス権がなければ、
      攻撃者は自分の侵入の痕跡を隠蔽することができませんし、
      そのユーザのファイルを引っかき回したり、
      マシンをクラッシュさせたりするのがせいぜいです。
      ユーザアカウントの不正利用はめずらしいことではありません。
      なぜなら一般ユーザは、
      システム管理者ほど注意を払わない傾向があるからです。</p><a id="idp89447760" class="indexterm"></a><p>システム管理者は、あるマシン上で <code class="systemitem">root</code>
      権限を奪取する方法は、
      潜在的に何通りもあるということを心しておかねばなりません。
      攻撃者は <code class="systemitem">root</code>
      のパスワードを知っているかもしれませんし、
      攻撃者が <code class="systemitem">root</code>
      権限で実行されているサーバのバグを見つけ、
      ネットワーク接続を介して
      <code class="systemitem">root</code> 権限を破ることができるかもしれません。
      また、攻撃者は suid-root プログラムに存在するバグを知っていて、
      ユーザアカウントを破れば
      <code class="systemitem">root</code> 権限を奪取できるかもしれません。
      攻撃者があるマシン上で
      <code class="systemitem">root</code> 権限を破る方法を知ったならば、
      攻撃者は裏口を用意する必要がありません。
      これまでに発見され、ふさがれた <code class="systemitem">root</code>
      の穴の多くには、攻撃者が自分のしたことの痕跡を消そうとした作業が、
      かなりの割合で含まれています。
      そのため、ほとんどの攻撃者は裏口を作るのです。裏口は、
      攻撃者がたやすくシステムへの
      <code class="systemitem">root</code> アクセスを再び得られるようにしますが、
      有能な管理者に侵入を検知する便利な手段を与えるものでもあります。
      攻撃者に裏口を作らせないようにするということは、
      セキュリティにとっては実際には良くないことかもしれません。
      なぜなら、攻撃者が最初に見つけて侵入してきたセキュリティホールは
      ふさがれないからです。</p><p>セキュリティを改善する方法は、常に、
      タマネギの皮のように階層化する手法
      (a multi-layered <span class="quote">「<span class="quote">onion peel</span>」</span> approach)
      で実装されるべきです。これらは次のように分類できます。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="systemitem">root</code>
	  とスタッフのアカウントの安全性を高める。</p></li><li class="listitem"><p><code class="systemitem">root</code> の安全性を高める 〓
	  <code class="systemitem">root</code> 権限で動作するサーバと
	  suid/sgid バイナリ。</p></li><li class="listitem"><p>ユーザアカウントの安全性を高める。</p></li><li class="listitem"><p>パスワードファイルの安全性を高める。</p></li><li class="listitem"><p>カーネルのコア、raw デバイス、ファイルシステムの安全性を
	高める。</p></li><li class="listitem"><p>システムに対して行なわれた、不適切な変更をすばやく検出す
	る。</p></li><li class="listitem"><p>必要と思われる以上の対応をとる (paranoia)。</p></li></ol></div><p>本章の次の節では、上記の各項目についてより深く掘り下げていき
      ます。</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="security.html">戻る</a>〓</td><td width="20%" align="center"><a accesskey="u" href="security.html">上に戻る</a></td><td width="40%" align="right">〓<a accesskey="n" href="securing-freebsd.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">第15章 セキュリティ〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓15.3. FreeBSDの安全性を高める</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>