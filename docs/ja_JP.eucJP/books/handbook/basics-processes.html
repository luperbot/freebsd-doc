<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>4.7. プロセス</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD ハンドブック" /><link rel="up" href="basics.html" title="第4章 UNIX の基礎知識" /><link rel="prev" href="mount-unmount.html" title="4.6. ファイルシステムのマウントとアンマウント" /><link rel="next" href="basics-daemons.html" title="4.8. デーモン、シグナルとプロセス終了" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.7. プロセス</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mount-unmount.html">戻る</a>〓</td><th width="60%" align="center">第4章 UNIX の基礎知識</th><td width="20%" align="right">〓<a accesskey="n" href="basics-daemons.html">次へ</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-processes"></a>4.7. プロセス</h2></div></div></div><p>FreeBSD はマルチタスクのオペレーティングシステムです。
      つまり、1つ以上のプログラムがあたかも同時に動いているかのように見える、
      ということです。動作中のプログラムはそれぞれ
      <em class="firstterm">プロセス</em> と呼ばれます。
      コマンドを実行すると、最低でも1つの新しいプロセスがスタートします。
      システムを正常に機能させるために常に動作しているシステムプロセスもたくさんあります。</p><p>各プロセスは<em class="firstterm">プロセス ID</em>、もしくは
      <em class="firstterm">PID</em> と呼ばれる数字でただ一つに識別されます。
      また、ファイルのように各プロセスには所有者とグループがあります。
      所有者とグループの情報は、
      これまでに見たファイル許可属性を用い、
      そのプロセスが開けるファイルやデバイスを決定するために使われます。
      多くのプロセスには親プロセスもあります。
      親プロセスとは、そのプロセスをスタートさせたプロセスのことです。
      例えば、シェルにコマンドを打ち込んでいるときはシェルがプロセスで、
      動かすコマンドもまたどれもプロセスです。
      このようにして起動するプロセスはそれぞれシェルが親プロセスになります。
      これの例外は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> という特別なプロセスです。
      <code class="command">init</code> は常に最初のプロセスなので、
      PID は必ず 1 になります。
      <code class="command">init</code> は FreeBSD
      がスタートするときカーネルによって自動的に起動されます。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> と <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> という2つのコマンドが
      システム上のプロセスを確認するために特に便利です。
      <code class="command">ps</code>
      コマンドは現在動作中のプロセスのリストを見るために使い、
      PID やプロセスが使っているメモリの量、
      どういうコマンドラインで起動されたのか、
      などを表示させることができます。
      <code class="command">top</code> コマンドは動作中の全てのプロセスを表示し、
      数秒ごとに表示を更新するので、
      計算機がなにをしているのかインタラクティブに知ることができます。</p><p>デフォルトでは、<code class="command">ps</code>
      は動作中かつ所有者が自分のコマンドのみを表示します。
      例えば:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ps</code></strong>
  PID  TT  STAT      TIME COMMAND
  298  p0  Ss     0:01.10 tcsh
 7078  p0  S      2:40.88 xemacs mdoc.xsl (xemacs-21.1.14)
37393  p0  I      0:03.11 xemacs freebsd.dsl (xemacs-21.1.14)
48630  p0  S      2:50.89 /usr/local/lib/netscape-linux/navigator-linux-4.77.bi
48730  p0  IW     0:00.00 (dns helper) (navigator-linux-)
72210  p0  R+     0:00.00 ps
  390  p1  Is     0:01.14 tcsh
 7059  p2  Is+    1:36.18 /usr/local/bin/mutt -y
 6688  p3  IWs    0:00.00 tcsh
10735  p4  IWs    0:00.00 tcsh
20256  p5  IWs    0:00.00 tcsh
  262  v0  IWs    0:00.00 -tcsh (tcsh)
  270  v0  IW+    0:00.00 /bin/sh /usr/X11R6/bin/startx -- -bpp 16
  280  v0  IW+    0:00.00 xinit /home/nik/.xinitrc -- -bpp 16
  284  v0  IW     0:00.00 /bin/sh /home/nik/.xinitrc
  285  v0  S      0:38.45 /usr/X11R6/bin/sawfish</pre><p>この例で分かるとおり、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> の出力はいくつかの行に整形されています。
      <code class="literal">PID</code> は先ほど見たプロセス ID です。
      PID は 1 から順に 99999 まで割り当てられ、
      足りなくなると最初に戻って使い回されます
      (使用中の PID は割り当てられません) 。
      <code class="literal">TT</code> の列はプログラムが動いている tty を示します。
      差し当たって無視してもかまわないでしょう。
      <code class="literal">STAT</code> はプログラムの状態を示しますが、
      これもまた無視してよいでしょう。
      <code class="literal">TIME</code> はプログラムがその CPU
      上で動いている時間の長さです―
      通常はプログラムをスタートさせたときからの経過時間ではありません。
      CPU 上で時間を使う必要があるまでかなりの時間を費すようなプログラムもあるからです。
      最後に、<code class="literal">COMMAND</code>
      はそのプログラムを起動するのに使われたコマンドラインとなります。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> は表示する情報を変えるためのオプションをたくさんサポートしています。
      いちばん便利なのは <code class="literal">auxww</code> でしょう。
      <code class="option">a</code> は自分のプロセスだけではなく、
      動作中のプロセス全部についての情報を表示します。
      <code class="option">u</code> はプロセスの所有者の名前をメモリ使用量と同様に表示します。
      <code class="option">x</code> はデーモンプロセスについての情報を表示し、
      <code class="option">ww</code> で、スクリーンに入りきらないほど長くなったコマンドラインでも省略せず、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> に各プロセスの全コマンドラインを表示させます。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> の出力も同様です。 例は以下の通りです。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>top</code></strong>
last pid: 72257;  load averages:  0.13,  0.09,  0.03    up 0+13:38:33  22:39:10
47 processes:  1 running, 46 sleeping
CPU states: 12.6% user,  0.0% nice,  7.8% system,  0.0% interrupt, 79.7% idle
Mem: 36M Active, 5256K Inact, 13M Wired, 6312K Cache, 15M Buf, 408K Free
Swap: 256M Total, 38M Used, 217M Free, 15% Inuse

  PID USERNAME PRI NICE  SIZE    RES STATE    TIME   WCPU    CPU COMMAND
72257 nik       28   0  1960K  1044K RUN      0:00 14.86%  1.42% top
 7078 nik        2   0 15280K 10960K select   2:54  0.88%  0.88% xemacs-21.1.14
  281 nik        2   0 18636K  7112K select   5:36  0.73%  0.73% XF86_SVGA
  296 nik        2   0  3240K  1644K select   0:12  0.05%  0.05% xterm
48630 nik        2   0 29816K  9148K select   3:18  0.00%  0.00% navigator-linu
  175 root       2   0   924K   252K select   1:41  0.00%  0.00% syslogd
 7059 nik        2   0  7260K  4644K poll     1:38  0.00%  0.00% mutt
...</pre><p>出力は2つのセクションに分かれています。
      ヘッダ (最初の 5 行です) は動作している最新のプロセスの PID、
      システムの平均負荷 (システムがどれくらい忙しいかの指標)、
      システムの稼働時間 (最後の再起動からの時間)
      と現在の時刻を示します。
      ヘッダの中の他の数字は動作中のプロセスの数 (この場合 47 ですね)、
      使われているメモリとスワップ領域の量、
      そしてシステムが異なる CPU 状態に消費した時間と関係します。</p><p>その下には <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> の出力と同じような情報を持った行が続きます。
      前と同様 PID にユーザ名、消費 CPU 時間と実行中のコマンドを知ることができます。
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> を使うとデフォルトでプロセスが使っているメモリ容量も分かります。
      メモリ使用量の欄は2項目に分かれており、
      一方は合計使用量、
      そしてもう一方は実使用量です―合計使用量はアプリケーションが必要としているメモリ量で、
      実使用量はその時点で実際に使われているメモリ量です。
      この例では、<span class="application"><span class="trademark">Netscape</span>®</span> がだいたい
      30 MB の RAM を必要としていますが、
      いまのところ 9 MB しか使っていないことが分かります。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> は自動的に2秒ごとに画面を更新します。
      <code class="option">s</code> オプションを使えば更新間隔を変更することができます。</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mount-unmount.html">戻る</a>〓</td><td width="20%" align="center"><a accesskey="u" href="basics.html">上に戻る</a></td><td width="40%" align="right">〓<a accesskey="n" href="basics-daemons.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">4.6. ファイルシステムのマウントとアンマウント〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓4.8. デーモン、シグナルとプロセス終了</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>