<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>6.5. X11 でのフォントの使用</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD ハンドブック" /><link rel="up" href="x11.html" title="第6章 X Window System" /><link rel="prev" href="x-config.html" title="6.4. X11 の設定" /><link rel="next" href="x-xdm.html" title="6.6. X ディスプレイマネージャ" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.5. X11 でのフォントの使用</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="x-config.html">戻る</a>〓</td><th width="60%" align="center">第6章 X Window System</th><td width="20%" align="right">〓<a accesskey="n" href="x-xdm.html">次へ</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-fonts"></a>6.5. X11 でのフォントの使用</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Stokely</span> <span class="firstname">Murray</span> [FAMILY Given]</span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="type1"></a>6.5.1. Type1 フォント</h3></div></div></div><p>X11 に付いてくるデフォルトのフォントは、
	通常のデスクトップパブリッシングアプリケーションにとっては理想的とは言えない程度のものです。
	文字を大きくするとジャギーになりプロフェッショナルとは言えないようなものになりますし、
	小さなフォントは頭が悪そうに見えます。
	しかし、世の中には質の高い Type1 (<span class="trademark">PostScript</span>®)
	フォントがいくつかあり、
	X11 ではそれらを簡単に利用することができます。
	例えば、URW フォントコレクション
	(<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/urwfonts/pkg-descr">x11-fonts/urwfonts</a>)
	には高品質の Type1 フォント
	(<span class="trademark">Times Roman</span>®,
	<span class="trademark">Helvetica</span>®,
	<span class="trademark">Palatino</span>® など)
	が含まれています。freefont コレクション
	(<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/freefonts/pkg-descr">x11-fonts/freefonts</a>)
	にはもっとたくさんのフォントが含まれていますが、
	それらは <span class="application">Gimp</span>
	のようなグラフィックソフトウェアで使用するためのものであり、
	スクリーンフォントとしては十分ではありません。さらに、X11
	は簡単に <span class="trademark">TrueType</span>® フォントを使うように設定することも可能です。
	詳しくは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=X&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">X</span>(7)</span></a> のマニュアルページか
	<a class="link" href="x-fonts.html#truetype" title="6.5.2. TrueType® フォント"><span class="trademark">TrueType</span>® フォントの節</a>
	を参照してください。</p><p>上記の Type1 フォントコレクションを Ports Collection
	から入れる場合には次のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11-fonts/urwfonts</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>freefont や他のコレクションでも同じようにします。
	X サーバがこれらのフォントを検出できるようにするには
	X サーバ設定ファイル (<code class="filename">/etc/X11/xorg.conf</code>)
	の適切な場所に次のような行を加えます。</p><pre class="programlisting">FontPath "/usr/local/lib/X11/fonts/URW/"</pre><p>別の方法としては、
	X のセッション中に次のようなコマンドラインを実行します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xset fp+ /usr/local/lib/X11/fonts/URW</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>これは動くのですが、X
	のセッションが終了すると消えてしまいます。
	消えないようにするには X の起動時に読み込まれるファイル
	(通常の <code class="command">startx</code> セッションの場合は
	<code class="filename">~/.xinitrc</code>, <span class="application">XDM</span>
	のようなグラフィカルなログインマネージャを通してログインする時は
	<code class="filename">~/.xsession</code>) に加えておきます。
	三番目の方法は新しい
	<code class="filename">/usr/local/etc/fonts/local.conf</code>
	ファイルを使うことです。
	これに関しては <a class="link" href="x-fonts.html#antialias" title="6.5.3. フォントのアンチエイリアス">アンチエイリアス</a>
	節をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="truetype"></a>6.5.2. <span class="trademark">TrueType</span>® フォント</h3></div></div></div><a id="idp84207568" class="indexterm"></a><a id="idp84208336" class="indexterm"></a><p><span class="application">Xorg</span> には、
	<span class="trademark">TrueType</span>® フォントのレンダリング機能が組み込まれています。
	この機能を実現するために 2 つの異なるモジュールがあります。
	ここでは、freetype
	の方が他のフォントレンダリングバックエンドと整合性が高いので、
	このモジュールを使うことにします。
	freetype モジュールを使うためには
	<code class="filename">/etc/X11/xorg.conf</code> ファイルの
	<code class="literal">"Module"</code>
	セクションに以下の行を追加するだけです。</p><pre class="programlisting">Load  "freetype"</pre><p>さて、まずは <span class="trademark">TrueType</span>® フォント用のディレクトリ
	(例えば <code class="filename">/usr/local/lib/X11/fonts/TrueType</code>)
	を作り、そこに <span class="trademark">TrueType</span>® フォントをすべて放り込みましょう。
	<span class="trademark">Macintosh</span>® の <span class="trademark">TrueType</span>®
	フォントは、そのままでは使うことができませんので注意してください。
	X11 で使うには <span class="trademark">UNIX</span>®/<span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>®
	用のフォーマットでなければなりません。
	ファイルを置いたら <span class="application">ttmkfdir</span> を使って
	<code class="filename">fonts.dir</code> ファイルを作り、
	X のフォントレンダラが新しいファイルがイントールされたことを分かるようにしてください。
	<code class="command">ttmkfdir</code> は FreeBSD Ports Collection の
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/ttmkfdir/pkg-descr">x11-fonts/ttmkfdir</a>
	からインストールできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/local/lib/X11/fonts/TrueType</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ttmkfdir -o fonts.dir</code></strong></pre><p>次に <span class="trademark">TrueType</span>®
	フォントのディレクトリをフォントパスに追加します。
	上の <a class="link" href="x-fonts.html#type1" title="6.5.1. Type1 フォント">Type1</a>
	フォントの場合と同じように、</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xset fp+ /usr/local/lib/X11/fonts/TrueType</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>とするか、もしくは <code class="filename">xorg.conf</code>
	ファイルに <code class="literal">FontPath</code> 行を追加します。</p><p>これで終わりです。
	<span class="application">Gimp</span> や
	<span class="application">Apache OpenOffice</span>
	といったすべての X アプリケーションから
	<span class="trademark">TrueType</span>® フォントを使うことができます。
	(高解像度なディスプレイで見るウェブページ上のテキストみたいな)
	とても小さなフォントや
	(<span class="application"><span class="trademark">StarOffice</span>™</span> にあるような)
	非常に大きなフォントもかなり綺麗に見えるようになることでしょう。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="antialias"></a>6.5.3. フォントのアンチエイリアス</h3></div><div><span class="authorgroup">更新 : <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Clarke</span> <span class="firstname">Joe Marcus</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp84237264" class="indexterm"></a><a id="idp84238032" class="indexterm"></a><p><code class="filename">/usr/local/lib/X11/fonts/</code> と
	<code class="filename">~/.fonts/</code> にあるすべての X11 のフォントが、Xft
	に対応しているアプリケーションで自動的にアンチエイリアス表示できるようになりました。
	<span class="application">KDE</span>, <span class="application">GNOME</span> および
	<span class="application">Firefox</span>
	のような最新のアプリケーションは、Xft に対応しています。</p><p>どのフォントがアンチエイリアスされるかを制御するため、
	もしくはアンチエイリアスの特性を設定するために、
	<code class="filename">/usr/local/etc/fonts/local.conf</code>
	ファイルを作成 (すでに存在しているのなら編集) します。
	多くの Xft フォントシステムの高度な機能をこのファイルを使って調整できます。
	この節ではいくつか簡単なところだけを紹介します。
	詳しくは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fonts-conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fonts-conf</span>(5)</span></a> をご覧ください。</p><a id="idp84243152" class="indexterm"></a><p>このファイルは XML 形式でなければなりません。
	大文字小文字の区別に注意を払い、
	すべてのタグが正しく閉じられているか確認してください。
	ファイルは一般的な XML ヘッダで始まり、DOCTYPE 定義と
	<code class="literal">&lt;fontconfig&gt;</code>
	タグがその後にきます。</p><pre class="programlisting">
        &lt;?xml version="1.0"?&gt;
        &lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
        &lt;fontconfig&gt;
      </pre><p>すでに説明したように、
	<code class="filename">/usr/local/lib/X11/fonts/</code> と
	<code class="filename">~/.fonts/</code> にあるすべてのフォントは
	Xft 対応のアプリケーションで利用できます。
	これら 2 つ以外に別のディレクトリを追加したいのなら、
	<code class="filename">/usr/local/etc/fonts/local.conf</code>
	に以下のような行を追加します。</p><pre class="programlisting">&lt;dir&gt;/path/to/my/fonts&lt;/dir&gt;</pre><p>新しいフォント、
	そして特に新しいフォントディレクトリを追加したら、
	以下のコマンドを実行してフォントキャッシュを再構築してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fc-cache -f</code></strong></pre><p>アンチエイリアスをかけることによって境界が少しぼやけ、
	そのためにとても小さなテキストはさらに読みやすくなり、
	大きなフォントでは <span class="quote">「<span class="quote">ギザギザ</span>」</span> が消えるのです。
	しかし、普通のテキストにかけた場合には目が疲れてしまうこともあります。
	14 ポイント以下のサイズのフォントについて、
	アンチエイリアスをかけないようにするには次の行を加えます。</p><pre class="programlisting">        &lt;match target="font"&gt;
            &lt;test name="size" compare="less"&gt;
                &lt;double&gt;14&lt;/double&gt;
            &lt;/test&gt;
            &lt;edit name="antialias" mode="assign"&gt;
                &lt;bool&gt;false&lt;/bool&gt;
            &lt;/edit&gt;
        &lt;/match&gt;
        &lt;match target="font"&gt;
            &lt;test name="pixelsize" compare="less" qual="any"&gt;
                &lt;double&gt;14&lt;/double&gt;
            &lt;/test&gt;
            &lt;edit mode="assign" name="antialias"&gt;
                &lt;bool&gt;false&lt;/bool&gt;
            &lt;/edit&gt;
        &lt;/match&gt;</pre><a id="idp84249168" class="indexterm"></a><p>いくつかの等幅フォントは、
	アンチエイリアスをかけるとスペーシングがうまくいかなくなる場合があります。
	特に <span class="application">KDE</span> でその傾向があるようです。
	解決策の一つとして、そういったフォントのスペーシングを
	100 に設定する方法があります。
	そうするためには次の行を加えてください。</p><pre class="programlisting">        &lt;match target="pattern" name="family"&gt;
            &lt;test qual="any" name="family"&gt;
                &lt;string&gt;fixed&lt;/string&gt;
            &lt;/test&gt;
            &lt;edit name="family" mode="assign"&gt;
                &lt;string&gt;mono&lt;/string&gt;
            &lt;/edit&gt;
        &lt;/match&gt;
        &lt;match target="pattern" name="family"&gt;
            &lt;test qual="any" name="family"&gt;
                &lt;string&gt;console&lt;/string&gt;
            &lt;/test&gt;
            &lt;edit name="family" mode="assign"&gt;
                &lt;string&gt;mono&lt;/string&gt;
            &lt;/edit&gt;
        &lt;/match&gt;</pre><p>(これは固定サイズのフォントに <code class="literal">"mono"</code>
	という一般的な別名をつけます) そして以下を追加します。</p><pre class="programlisting">        &lt;match target="pattern" name="family"&gt;
            &lt;test qual="any" name="family"&gt;
                &lt;string&gt;mono&lt;/string&gt;
            &lt;/test&gt;
            &lt;edit name="spacing" mode="assign"&gt;
                &lt;int&gt;100&lt;/int&gt;
            &lt;/edit&gt;
        &lt;/match&gt;</pre><p>Helvetica の様なある種のフォントは、
	アンチエイリアスすると問題が起こるでしょう。
	たいてい、フォントが縦に半分に切られて表示されます。
	最悪の場合、アプリケーションがクラッシュします。
	これを回避するには、以下を <code class="filename">local.conf</code>
	に追加します。</p><pre class="programlisting">        &lt;match target="pattern" name="family"&gt;
            &lt;test qual="any" name="family"&gt;
                &lt;string&gt;Helvetica&lt;/string&gt;
            &lt;/test&gt;
            &lt;edit name="family" mode="assign"&gt;
                &lt;string&gt;sans-serif&lt;/string&gt;
            &lt;/edit&gt;
        &lt;/match&gt;</pre><p><code class="filename">local.conf</code> の編集を終えたら、
	ファイルの末尾が <code class="literal">&lt;/fontconfig&gt;</code>
	タグで終わるようにしてください。
	これを行わなければ、変更は無視されるでしょう。</p><p>最後に、ユーザは自分だけの設定を各自の
	<code class="filename">.fonts.conf</code> ファイルに追加できます。
	これを行うためには、それぞれのユーザが単に
	<code class="filename">~/.fonts.conf</code> を作成するだけです。
	このファイルも XML 形式でなければなりません。</p><a id="idp84260176" class="indexterm"></a><a id="idp84260688" class="indexterm"></a><p>最後に一つ。LCD
	スクリーンではサブピクセルサンプリングが必要な場合があります。
	これは、基本的には (水平方向に分かれている) 赤、緑、
	青の各コンポーネントを別々に扱うことによって水平方向の解像度を良くするというもので、
	劇的な結果が得られます。
	これを有効にするには <code class="filename">local.conf</code>
	ファイルに次の行を加えます。</p><pre class="programlisting">
        &lt;match target="font"&gt;
            &lt;test qual="all" name="rgba"&gt;
                &lt;const&gt;unknown&lt;/const&gt;
            &lt;/test&gt;
            &lt;edit name="rgba" mode="assign"&gt;
                &lt;const&gt;rgb&lt;/const&gt;
            &lt;/edit&gt;
        &lt;/match&gt;
      </pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">ディスプレイの種類にもよりますが、
	  <code class="literal">rgb</code> ではなく
	  <code class="literal">bgr</code> や <code class="literal">vrgb</code>、もしくは
	  <code class="literal">vbgr</code> の場合もあるので、
	  試してみて最も良いものを使ってください。</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="x-config.html">戻る</a>〓</td><td width="20%" align="center"><a accesskey="u" href="x11.html">上に戻る</a></td><td width="40%" align="right">〓<a accesskey="n" href="x-xdm.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">6.4. X11 の設定〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓6.6. X ディスプレイマネージャ</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>