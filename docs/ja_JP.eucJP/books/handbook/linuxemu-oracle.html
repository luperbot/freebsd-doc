<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>11.4. Oracle のインストール</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD ハンドブック" /><link rel="up" href="linuxemu.html" title="第11章 Linux バイナリ互換機能" /><link rel="prev" href="linuxemu-mathematicau.html" title="11.3. Mathematica のインストール" /><link rel="next" href="sapr3.html" title="11.5. SAP R/3 (4.6B - IDES) のインストール" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.4. Oracle のインストール</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="linuxemu-mathematicau.html">戻る</a>〓</td><th width="60%" align="center">第11章 Linux バイナリ互換機能</th><td width="20%" align="right">〓<a accesskey="n" href="sapr3.html">次へ</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-oracle"></a>11.4. Oracle のインストール</h2></div><div><span class="authorgroup">寄贈: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Moolenaar</span> <span class="firstname">Marcel</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp87831760" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87833040"></a>11.4.1. はじめに</h3></div></div></div><p>このドキュメントでは Oracle 8.0.5 と Oracle 8.0.5.1 Enterprise Edition
	の Linux 版を FreeBSD にインストールするための手順を解説します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87834192"></a>11.4.2. Linux 環境のインストール</h3></div></div></div><p>まずは Ports Collection から <code class="filename">linux_base</code> と
	<code class="filename">linux_devtools</code> をインストールしてください。
	これらの ports は FreeBSD 3.2 のリリース後にコレクションに加えられました。
	もし FreeBSD 3.2 もしくはそれよりも古いものを使っている場合は
	ports コレクションをアップデートしましょう。ついでに FreeBSD
	をアップデートするのもいいでしょう。もし <code class="filename">linux_base-6.1</code>
	や <code class="filename">linux_devtools-6.1</code> でうまくいかなければ
	5.2 を試してみてください。</p><p>もし賢いエージェント (intelligent agent) を起動したいなら
	Red Hat Tcl パッケージ <code class="filename">tcl-8.0.3-20.i386.rpm</code>
	もインストールする必要があるでしょう。
	公式の RPM パッケージをインストールするには一般的に次のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpm -i --ignoreos --root /compat/linux --dbpath /var/lib/rpm package</code></strong></pre><p>パッケージのインストール時にエラーが出てはいけません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87843152"></a>11.4.3. Oracle 環境の構築</h3></div></div></div><p>Oracleをインストールする前に、適切な環境を設定する必要があります。
	このドキュメントでは、
	Oracle のインストールガイドに書いてあるようなことではなく
	FreeBSD で Linux 用 Oracle
	を動かすために<span class="emphasis"><em>特別に</em></span>必要なことのみを解説します。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-kernel-tuning"></a>11.4.3.1. カーネルのチューニング</h4></div></div></div><a id="idp87845328" class="indexterm"></a><p>Oracle インストールガイドにあるように、
	  シェアードメモリーの最大サイズを設定しなければいけません。
	  FreeBSD では <code class="literal">SHMMAX</code> を使わないようにしてください。
	  <code class="literal">SHMMAX</code> は単に <code class="literal">SHMMAXPGS</code>
	  と <code class="literal">PGSIZE</code> から計算されるだけなのです。
	  従って、<code class="literal">SHMMAXPGS</code> を使うようにしましょう。
	  インストールガイドに記述されている他のオプションは使えます。
	  例えば以下のようにします。</p><pre class="programlisting">options SHMMAXPGS=10000
options SHMMNI=100
options SHMSEG=10
options SEMMNS=200
options SEMMNI=70
options SEMMSL=61</pre><p>これらのオプションを意図した Oracle
	  の使い方に合わせて設定してください。</p><p>また、
	  次のオプションがカーネルのコンフィギュレーションファイルにあることも確認します。</p><pre class="programlisting">options SYSVSHM #SysV shared memory
options SYSVSEM #SysV semaphores
options SYSVMSG #SysV interprocess communication</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-oracle-account"></a>11.4.3.2. Oracle 用アカウント</h4></div></div></div><p>他のアカウントを作るのと同じように Oracle 用のアカウントを作ります。
	  Oracle 用のアカウントに特別なのは Linux のシェルを割り当てるところだけです。
	  <code class="filename">/etc/shells</code> に <code class="literal">/compat/linux/bin/bash</code>
	  を加え、Oracle 用のアカウントに設定します。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-environment"></a>11.4.3.3. 環境設定</h4></div></div></div><p><code class="envar">ORACLE_HOME</code> や <code class="envar">ORACLE_SID</code>
	  といった通常の Oracle 用の変数の他に次の変数も設定しなければなりません。</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>変数</th><th>値</th></tr></thead><tbody><tr><td><code class="envar">LD_LIBRARY_PATH</code></td><td><code class="literal">$ORACLE_HOME/lib</code></td></tr><tr><td><code class="envar">CLASSPATH</code></td><td><code class="literal">$ORACLE_HOME/jdbc/lib/classes111.zip</code></td></tr><tr><td><code class="envar">PATH</code></td><td><code class="literal">/compat/linux/bin
/compat/linux/sbin
/compat/linux/usr/bin
/compat/linux/usr/sbin
/bin
/sbin
/usr/bin
/usr/sbin
/usr/local/bin
$ORACLE_HOME/bin</code></td></tr></tbody></table></div><p>全ての環境変数は <code class="filename">.profile</code>
	  で設定することをお勧めします。
	  完璧なサンプルは以下の通りです。</p><pre class="programlisting">ORACLE_BASE=/oracle; export ORACLE_BASE
ORACLE_HOME=/oracle; export ORACLE_HOME
LD_LIBRARY_PATH=$ORACLE_HOME/lib
export LD_LIBRARY_PATH
ORACLE_SID=ORCL; export ORACLE_SID
ORACLE_TERM=386x; export ORACLE_TERM
CLASSPATH=$ORACLE_HOME/jdbc/lib/classes111.zip
export CLASSPATH
PATH=/compat/linux/bin:/compat/linux/sbin:/compat/linux/usr/bin:/compat/linux/usr/sbin:/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:$ORACLE_HOME/bin
export PATH</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87871056"></a>11.4.4. Oracle のインストール</h3></div></div></div><p>インストーラーを起動する前に、<code class="filename">/var/tmp</code>
	に <code class="filename">.oracle</code>
	という名前のディレクトリを作る必要がありますが、
	これは Linux エミュレーターにおけるちょっとした不整合のためです。
	このディレクトリは誰でもが書けるか、もしくは oracle ユーザーのものにしておきます。
	これで特に問題なく Oracle がインストールできるでしょう。
	もし問題が起こったら、まずは Oracle の配布物や設定をチェックしてください。
	Oracle のインストールが終わったら次の二つのサブセクションで解説するパッチを当てます。</p><p>よくあるトラブルは、TCP プロトコルアダプターが正しくインストールされていないことです。
	そのため、一切 TCP リスナーを起動することができないのです。
	次の操作はこの問題を解決するのに役立ちます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/network/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make -f ins_network.mk ntcontab.o</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ar r libnetwork.a ntcontab.o</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/network/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make -f ins_network.mk install</code></strong></pre><p>もう一度 <code class="filename">root.sh</code> を起動するのを忘れないように!</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-patch-root"></a>11.4.4.1. root.sh へのパッチ</h4></div></div></div><p>Oracle をインストールする時、<code class="systemitem">root</code>
	  で行なう必要のあるいくつかの操作は <code class="filename">root.sh</code>
	  と呼ばれるシェルスクリプトに記録されます。
	  <code class="filename">root.sh</code> は <code class="filename">orainst</code>
	  ディレクトリにあります。次のパッチを root.sh に当てて
	  正しい場所にある <code class="command">chown</code> コマンドを使うようにするか、
	  代わりに Linux ネイティブなシェルのもとでスクリプトを走らせましょう。</p><pre class="programlisting">*** orainst/root.sh.orig Tue Oct 6 21:57:33 1998
--- orainst/root.sh Mon Dec 28 15:58:53 1998
***************
*** 31,37 ****
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/bin/chown
#
# Define variables to be used in this script
--- 31,37 ----
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/usr/sbin/chown
#
# Define variables to be used in this script</pre><p>CD-ROM からのインストールでない場合は <code class="filename">root.sh</code>
	  のソースにパッチを当ててもいいでしょう。
	  <code class="filename">rthd.sh</code> という名前でソースツリーの
	  <code class="filename">orainst</code> というディレクトリにあります。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-patch-tcl"></a>11.4.4.2. genclntsh へのパッチ</h4></div></div></div><p><code class="command">genclntsh</code>
	  スクリプトは一つの共有クライアントライブラリを生成するのに用いられます。
	  これはデモを作る時に使われます。
	  PATH の定義をコメントアウトするために次のパッチを当ててください。</p><pre class="programlisting">*** bin/genclntsh.orig Wed Sep 30 07:37:19 1998
--- bin/genclntsh Tue Dec 22 15:36:49 1998
***************
*** 32,38 ****
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst
--- 32,38 ----
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! #PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87890512"></a>11.4.5. Oracle の起動</h3></div></div></div><p>インストラクションに従えば、Linux でと同じように
	<span class="application">Oracle</span> を起動できるでしょう。</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="linuxemu-mathematicau.html">戻る</a>〓</td><td width="20%" align="center"><a accesskey="u" href="linuxemu.html">上に戻る</a></td><td width="40%" align="right">〓<a accesskey="n" href="sapr3.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">11.3. Mathematica のインストール〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓11.5. SAP R/3 (4.6B - IDES) のインストール</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>