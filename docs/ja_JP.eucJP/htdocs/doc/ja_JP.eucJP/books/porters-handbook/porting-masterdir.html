<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>第7章 MASTERDIR</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD port 作成者のためのハンドブック" /><link rel="up" href="index.html" title="FreeBSD port 作成者のためのハンドブック" /><link rel="prev" href="using-sdl.html" title="6.13. SDL の利用" /><link rel="next" href="shared.html" title="第8章 共有ライブラリのバージョン" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第7章 <code class="varname">MASTERDIR</code></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-sdl.html">戻る</a>〓</td><th width="60%" align="center">〓</th><td width="20%" align="right">〓<a accesskey="n" href="shared.html">次へ</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-masterdir"></a>第7章 <code class="varname">MASTERDIR</code></h1></div></div></div><p>その port の変数 (たとえば解像度とか紙のサイズなど) を
      変えたりした、少しだけ違うバージョンを作成する必要があるときには、
      ユーザが分りやすいように package ごとに別々のサブディレクトリを作成し、
      できるだけ port 間でファイルを共有するようにしてください。
      ほとんどの場合、うまく変数を使えば、一つを除くすべてのディレクトリには
      とても短い <code class="filename">Makefile</code> を置くだけで済みます。
      その短い <code class="filename">Makefile</code> では、
      <code class="varname">MASTERDIR</code> を使って、
      残りのファイルがあるディレクトリを指定できます。
      また、<a class="link" href="makefile-naming.html#porting-pkgname" title="5.2.4. package 名についての規則"><code class="varname">PKGNAMESUFFIX</code></a> の
      一部に変数に使って、package が別々の名前を持つようにしてください。</p><p>具体的な例を示すのが一番わかりやすいでしょう。
      これは <code class="filename">japanese/xdvi300/Makefile</code> の一部です。</p><pre class="programlisting">PORTNAME=       xdvi
PORTVERSION=    17
PKGNAMEPREFIX=  ja-
PKGNAMESUFFIX=  ${RESOLUTION}
 :
# default
RESOLUTION?=   300
.if ${RESOLUTION} != 118 &amp;&amp; ${RESOLUTION} != 240 &amp;&amp; \
       ${RESOLUTION} != 300 &amp;&amp; ${RESOLUTION} != 400
       @${ECHO} "Error: invalid value for RESOLUTION: \"${RESOLUTION}\""
       @${ECHO} "Possible values are: 118, 240, 300 (default) and 400."
       @${FALSE}
.endif</pre><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/japanese/xdvi300/pkg-descr">japanese/xdvi300</a> には
      <code class="filename">Makefile</code> の他に通常のパッチや、
      package ファイル等が置かれています。
      このディレクトリで <code class="command">make</code> を実行すると、
      デフォルトの解像度 (300) を使って、
      普通に port のビルドを行ないます。</p><p>他の解像度に関していうと、
      <code class="filename">xdvi118/Makefile</code> に
      必要なのは<span class="emphasis"><em>これだけ</em></span>です:</p><pre class="programlisting">RESOLUTION=     118
MASTERDIR=      ${.CURDIR}/../xdvi300

.include "${MASTERDIR}/Makefile"</pre><p>(<code class="filename">xdvi240/Makefile</code> や
      <code class="filename">xdvi400/Makefile</code> も同様のものになります)。
      <code class="filename">bsd.port.mk</code> は、
      <code class="varname">MASTERDIR</code> の定義から
      <code class="varname">FILESDIR</code> や <code class="varname">SCRIPTDIR</code> 等の
      通常のサブディレクトリが <code class="filename">xdvi300</code>
      以下に存在することを理解します。
      <code class="literal">RESOLUTION=118</code> の行が、
      <code class="filename">xdvi300/Makefile</code> の
      <code class="literal">RESOLUTION=300</code> の行を上書きし、
      port は解像度を 118 として作成されます。</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-sdl.html">戻る</a>〓</td><td width="20%" align="center">〓</td><td width="40%" align="right">〓<a accesskey="n" href="shared.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">6.13. SDL の利用〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓第8章 共有ライブラリのバージョン</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>