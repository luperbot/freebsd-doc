<?xml version="1.0" encoding="euc-jp"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>FreeBSD ハンドブック</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="description" content="FreeBSD へようこそ! このハンドブックは FreeBSD 8.4-RELEASE, FreeBSD 9.3-RELEASE と FreeBSD 10.1-RELEASE のインストールおよび、日常での使い方について記述したものです。 本ハンドブックは改編作業中であり、 さまざまな人々が編集に携わっています。 いま存在するセクションの中には情報が古くなってしまったため、 更新作業の必要があるものも含まれています。 もし、このハンドブックを編集するプロジェクトに協力したいとお考えなら、 FreeBSD documentation project メーリングリスト まで電子メールを(英語で)送ってください。 この文書の最新バージョンは、いつでも 日本国内版の FreeBSD ウェブサイト および FreeBSD ウェブサイト から入手できます (この文書の以前のバージョンは http://docs.FreeBSD.org/doc/ から入手できます)。 また、他のさまざまな文書形式、圧縮形式のものが FreeBSD FTP サーバ や数多くの ミラーサイト からダウンロードできます。 このハンドブックの書籍版 (英語版) は、 FreeBSD Mall から購入できます。また、ハンドブックの検索 を行なうこともできます。 FreeBSD ハンドブック日本語版の作成は FreeBSD 日本語ドキュメンテーションプロジェクト (FreeBSD doc-jp) がおこなっています。 ハンドブックの日本語訳に関することは FreeBSD 日本語ドキュメンテーションプロジェクト doc-jp@jp.FreeBSD.org において日本語で議論されています。 文書の日本語訳に関するお問い合わせや、 文書の原文に関する問い合わせをしたいが英語が得意でないという方は FreeBSD 日本語ドキュメンテーションプロジェクト doc-jp@jp.FreeBSD.org まで、日本語でコメントをお寄せください。" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div xml:lang="ja" class="book" lang="ja"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72895696"></a>FreeBSD ハンドブック</h1></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="author"><h3 class="author"><span class="orgname">FreeBSD ドキュメンテーションプロジェクト</span></h3></div></div><div>改訂: <a href="https://svnweb.freebsd.org/changeset/doc/"><span class="svnref"></span></a></div><div><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">製作著作 © 1995-2015 The FreeBSD Documentation Project</p></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="legalnotice"></a><p class="legalnotice-title"><strong>Copyright</strong></p><p>Redistribution and use in source (XML DocBook) and 'compiled'
    forms (XML, HTML, PDF, PostScript, RTF and so forth) with or without
    modification, are permitted provided that the following conditions are
    met:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Redistributions of source code (XML DocBook) must retain the
        above copyright notice, this list of conditions and the following
        disclaimer as the first lines of this file unmodified.</p></li><li class="listitem"><p>Redistributions in compiled form (transformed to other DTDs,
        converted to PDF, PostScript, RTF and other formats) must
        reproduce the above copyright notice, this list of conditions and
        the following disclaimer in the documentation and/or other
        materials provided with the distribution.</p></li></ol></div><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">THIS DOCUMENTATION IS PROVIDED BY THE FREEBSD DOCUMENTATION
      PROJECT "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING,
      BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
      FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
      THE FREEBSD DOCUMENTATION PROJECT BE LIABLE FOR ANY DIRECT, INDIRECT,
      INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS
      OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
      ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
      TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
      USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
      DAMAGE.</p></div></div></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="trademarks"></a><p>FreeBSD は
  The FreeBSD Foundation の登録商標です。</p><p>3Com および HomeConnect は
  3Com Corporation の登録商標です。</p><p>3ware は 3ware Inc. の登録商標です。</p><p>ARM は ARM Limited の登録商標です。</p><p>Adaptec は Adaptec, Inc. の登録商標です。</p><p>Adobe, Acrobat, Acrobat Reader, Flash および
  PostScript は アメリカ合衆国および/またはその他の国の
  Adobe Systems Incorporated の登録商標または商標です。</p><p>Apple, AirPort, FireWire,
  iMac, iPhone, iPad,
  Mac, Macintosh, Mac OS,
  Quicktime および TrueType は Apple Inc. の商標で、
  アメリカ合衆国およびその他の国で登録されています。</p><p>Android
  は Google Inc. の商標です。</p><p>Heidelberg, Helvetica,
  Palatino, および Times Roman はアメリカ合衆国およびその他の国における
  Heidelberger Druckmaschinen AG の登録商標または商標です。</p><p>IBM, AIX, OS/2,
  PowerPC, PS/2, S/390 および ThinkPad は
  アメリカ合衆国、その他の国、または両方における
  International Business Machines Corporation の商標です。</p><p>IEEE, POSIX および 802 は
  アメリカ合衆国における
  Institute of Electrical and Electronics Engineers, Inc.
  の登録商標です。</p><p>Intel, Celeron, Centrino, Core, EtherExpress, i386,
  i486, Itanium, Pentium および Xeon はアメリカ合衆国およびその他の国における
  Intel Corporation またはその関連会社の商標または登録商標です。</p><p>Intuit および Quicken は
  アメリカ合衆国およびその他の国における  Intuit Inc. またはその関連会社の
  商標および/または登録商標です。</p><p>Linux は
  Linus Torvalds の登録商標です。</p><p>LSI Logic, AcceleRAID, eXtremeRAID,
  MegaRAID および Mylex は LSI Logic Corp. の商標または登録商標です。</p><p>Microsoft, IntelliMouse, MS-DOS,
  Outlook, Windows, Windows Media および Windows NT は
  アメリカ合衆国および/またはその他の国における
  Microsoft Corporation の登録商標または商標です。</p><p>Motif, OSF/1 および UNIX は
  アメリカ合衆国およびその他の国における The Open Group の登録商標で、
  IT DialTone および The Open Group は同じく商標です。</p><p>Oracle は
  Oracle Corporation の登録商標です。</p><p>RealNetworks, RealPlayer および
  RealAudio は RealNetworks, Inc. の登録商標です。</p><p>Red Hat, RPM は
  アメリカ合衆国およびその他の国における
  Red Hat, Inc. の商標または登録商標です。</p><p>Sun, Sun Microsystems, Java, Java
  Virtual Machine, JDK, JRE, JSP, JVM, Netra, OpenJDK,
  Solaris, StarOffice, SunOS
  および VirtualBox は
  アメリカ合衆国およびその他の国における Sun Microsystems, Inc. の
  商標または登録商標です。</p><p>MATLAB は
  The MathWorks, Inc. の登録商標です。</p><p>SpeedTouch は Thomson の商標です。</p><p>VMware は VMware, Inc. の商標です。</p><p>Mathematica は
  Wolfram Research, Inc. の登録商標です。</p><p>XFree86 は
  The XFree86 Project, Inc. の商標です。</p><p>Ogg Vorbis および Xiph.Org は
  Xiph.Org の商標です。</p><p>製造者および販売者が製品を区別するのに
  用いている表示の多くは、商標とされています。
  この文書に登場する表示のうち FreeBSD Project
  がその商標を確認しているものには、その表示に続いて
  <span class="quote">「<span class="quote">™</span>」</span> または
  <span class="quote">「<span class="quote">®</span>」</span> 記号がおかれています。</p></div></div><div>   ： .</div><div><div xmlns="http://www.w3.org/1999/xhtml" class="abstract"><div class="abstract-title">概要</div><p>FreeBSD へようこそ!
	このハンドブックは
	<span class="emphasis"><em>FreeBSD 8.4-RELEASE</em></span>,
	<span class="emphasis"><em>FreeBSD 9.3-RELEASE</em></span>
	と <span class="emphasis"><em>FreeBSD 10.1-RELEASE</em></span>
	のインストールおよび、日常での使い方について記述したものです。
	本ハンドブックは<span class="emphasis"><em>改編作業中</em></span>であり、
	さまざまな人々が編集に携わっています。
	いま存在するセクションの中には情報が古くなってしまったため、
	更新作業の必要があるものも含まれています。
	もし、このハンドブックを編集するプロジェクトに協力したいとお考えなら、
	<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc" target="_top">FreeBSD documentation project メーリングリスト</a> まで電子メールを(英語で)送ってください。
	この文書の最新バージョンは、いつでも
	<a class="link" href="http://www.jp.FreeBSD.org/" target="_top">日本国内版の
	FreeBSD ウェブサイト</a> および
	<a class="link" href="http://www.FreeBSD.org/" target="_top">FreeBSD ウェブサイト</a>
	から入手できます
	(この文書の以前のバージョンは <code class="uri"><a class="uri" href="http://docs.FreeBSD.org/doc/" target="_top">http://docs.FreeBSD.org/doc/</a></code>
	から入手できます)。
	また、他のさまざまな文書形式、圧縮形式のものが <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/" target="_top">FreeBSD
	  FTP サーバ</a> や数多くの
	<a class="link" href="#mirrors" title="付録A FreeBSD の入手方法">ミラーサイト</a>
	からダウンロードできます。
	このハンドブックの書籍版 (英語版) は、
	<a class="link" href="http://www.freebsdmall.com/" target="_top">FreeBSD
	  Mall</a> から購入できます。また、<a class="link" href="../../../../search/index.html" target="_top">ハンドブックの検索</a>
	を行なうこともできます。</p><p>FreeBSD ハンドブック日本語版の作成は FreeBSD
	日本語ドキュメンテーションプロジェクト (FreeBSD doc-jp) がおこなっています。
	ハンドブックの日本語訳に関することは FreeBSD 日本語ドキュメンテーションプロジェクト <code class="email">&lt;<a xmlns="" class="email" href="mailto:doc-jp@jp.FreeBSD.org">doc-jp@jp.FreeBSD.org</a>&gt;</code>
	において日本語で議論されています。</p><p>文書の日本語訳に関するお問い合わせや、
	文書の原文に関する問い合わせをしたいが英語が得意でないという方は
	FreeBSD 日本語ドキュメンテーションプロジェクト <code class="email">&lt;<a xmlns="" class="email" href="mailto:doc-jp@jp.FreeBSD.org">doc-jp@jp.FreeBSD.org</a>&gt;</code> まで、日本語でコメントをお寄せください。</p></div></div></div><div class="docformatnavi">
      [
      <a href="index.html">分割版</a>
      /
      
	  単一版
	
      ]
    </div><hr /></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="preface"><a href="#book-preface">前書き</a></span></dt><dt><span class="part"><a href="#getting-started">I. 導入</a></span></dt><dd><dl><dt><span class="chapter"><a href="#introduction">1. はじめに</a></span></dt><dd><dl><dt><span class="sect1"><a href="#introduction-synopsis">1.1. この章では</a></span></dt><dt><span class="sect1"><a href="#nutshell">1.2. FreeBSD へようこそ!</a></span></dt><dt><span class="sect1"><a href="#history">1.3. FreeBSD プロジェクトについて</a></span></dt></dl></dd><dt><span class="chapter"><a href="#bsdinstall">2. FreeBSD のインストール (9.<em class="replaceable"><code>X</code></em> 以降の場合)</a></span></dt><dd><dl><dt><span class="sect1"><a href="#bsdinstall-synopsis">2.1. この章では</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-hardware">2.2. 最小ハードウェア要件</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-pre">2.3. インストール前に行う作業</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-start">2.4. インストールの開始</a></span></dt><dt><span class="sect1"><a href="#using-bsdinstall">2.5. <span class="application">bsdinstall</span> の使用</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-partitioning">2.6. ディスク領域の割り当て</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-final-warning">2.7. インストール操作の確定</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-post">2.8. インストール後の作業</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-install-trouble">2.9. トラブルシューティング</a></span></dt><dt><span class="sect1"><a href="#using-live-cd">2.10. Live <acronym class="acronym">CD</acronym> を使う</a></span></dt></dl></dd><dt><span class="chapter"><a href="#install">3. FreeBSD 8.<em class="replaceable"><code>X</code></em> のインストール</a></span></dt><dd><dl><dt><span class="sect1"><a href="#install-synopsis">3.1. この章では</a></span></dt><dt><span class="sect1"><a href="#install-hardware">3.2. ハードウェア要件</a></span></dt><dt><span class="sect1"><a href="#install-pre">3.3. インストール前に行う作業</a></span></dt><dt><span class="sect1"><a href="#install-start">3.4. インストールの開始</a></span></dt><dt><span class="sect1"><a href="#using-sysinstall">3.5. sysinstall(8) の紹介</a></span></dt><dt><span class="sect1"><a href="#install-steps">3.6. ディスク領域の割り当て</a></span></dt><dt><span class="sect1"><a href="#install-choosing">3.7. 何をインストールするか選択する</a></span></dt><dt><span class="sect1"><a href="#install-media">3.8. インストールメディアの選択</a></span></dt><dt><span class="sect1"><a href="#install-final-warning">3.9. インストール操作の確定</a></span></dt><dt><span class="sect1"><a href="#install-post">3.10. インストール後の作業</a></span></dt><dt><span class="sect1"><a href="#install-trouble">3.11. トラブルシューティング</a></span></dt><dt><span class="sect1"><a href="#install-advanced">3.12. 高度なインストールガイド</a></span></dt><dt><span class="sect1"><a href="#install-diff-media">3.13. カスタムインストールメディアの準備</a></span></dt></dl></dd><dt><span class="chapter"><a href="#basics">4. UNIX の基礎知識</a></span></dt><dd><dl><dt><span class="sect1"><a href="#basics-synopsis">4.1. この章では</a></span></dt><dt><span class="sect1"><a href="#consoles">4.2. 仮想コンソールと端末</a></span></dt><dt><span class="sect1"><a href="#permissions">4.3. 許可属性</a></span></dt><dt><span class="sect1"><a href="#dirstructure">4.4. ディレクトリ構造</a></span></dt><dt><span class="sect1"><a href="#disk-organization">4.5. ディスク構成</a></span></dt><dt><span class="sect1"><a href="#mount-unmount">4.6. ファイルシステムのマウントとアンマウント</a></span></dt><dt><span class="sect1"><a href="#basics-processes">4.7. プロセス</a></span></dt><dt><span class="sect1"><a href="#basics-daemons">4.8. デーモン、シグナルとプロセス終了</a></span></dt><dt><span class="sect1"><a href="#shells">4.9. シェル</a></span></dt><dt><span class="sect1"><a href="#editors">4.10. テキストエディタ</a></span></dt><dt><span class="sect1"><a href="#basics-devices">4.11. デバイスとデバイスノード</a></span></dt><dt><span class="sect1"><a href="#basics-more-information">4.12. さらに詳しい情報を得るには...</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ports">5. アプリケーションのインストール - packages と ports</a></span></dt><dd><dl><dt><span class="sect1"><a href="#ports-synopsis">5.1. この章では</a></span></dt><dt><span class="sect1"><a href="#ports-overview">5.2. ソフトウェアのインストール</a></span></dt><dt><span class="sect1"><a href="#ports-finding-applications">5.3. ソフトウェアの探し方</a></span></dt><dt><span class="sect1"><a href="#pkgng-intro">5.4. <span class="application">pkg</span> によるバイナリ
      package の管理</a></span></dt><dt><span class="sect1"><a href="#ports-using">5.5. Ports Collection の利用</a></span></dt><dt><span class="sect1"><a href="#ports-poudriere">5.6. <span class="application">Poudriere</span> を用いた
      package の構築</a></span></dt><dt><span class="sect1"><a href="#ports-nextsteps">5.7. インストール後の作業</a></span></dt><dt><span class="sect1"><a href="#ports-broken">5.8. うまく動作しない ports に遭遇した場合には</a></span></dt></dl></dd><dt><span class="chapter"><a href="#x11">6. X Window System</a></span></dt><dd><dl><dt><span class="sect1"><a href="#x11-synopsis">6.1. この章では</a></span></dt><dt><span class="sect1"><a href="#x-understanding">6.2. 用語の説明</a></span></dt><dt><span class="sect1"><a href="#x-install">6.3. X11 のインストール</a></span></dt><dt><span class="sect1"><a href="#x-config">6.4. X11 の設定</a></span></dt><dt><span class="sect1"><a href="#x-fonts">6.5. X11 でのフォントの使用</a></span></dt><dt><span class="sect1"><a href="#x-xdm">6.6. X ディスプレイマネージャ</a></span></dt><dt><span class="sect1"><a href="#x11-wm">6.7. デスクトップ環境</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#common-tasks">II. 日々の生活</a></span></dt><dd><dl><dt><span class="chapter"><a href="#desktop">7. デスクトップアプリケーション</a></span></dt><dd><dl><dt><span class="sect1"><a href="#desktop-synopsis">7.1. この章では</a></span></dt><dt><span class="sect1"><a href="#desktop-browsers">7.2. ブラウザ</a></span></dt><dt><span class="sect1"><a href="#desktop-productivity">7.3. 生産的なアプリケーション</a></span></dt><dt><span class="sect1"><a href="#desktop-viewers">7.4. ドキュメントビューア</a></span></dt><dt><span class="sect1"><a href="#desktop-finance">7.5. 財務管理ソフトウェア</a></span></dt></dl></dd><dt><span class="chapter"><a href="#multimedia">8. マルチメディア</a></span></dt><dd><dl><dt><span class="sect1"><a href="#multimedia-synopsis">8.1. この章では</a></span></dt><dt><span class="sect1"><a href="#sound-setup">8.2. サウンドカードの設定</a></span></dt><dt><span class="sect1"><a href="#sound-mp3">8.3. MP3 オーディオ</a></span></dt><dt><span class="sect1"><a href="#video-playback">8.4. ビデオ再生</a></span></dt><dt><span class="sect1"><a href="#tvcard">8.5. TV カードの設定</a></span></dt><dt><span class="sect1"><a href="#mythtv">8.6. MythTV</a></span></dt><dt><span class="sect1"><a href="#scanners">8.7. 画像スキャナ</a></span></dt></dl></dd><dt><span class="chapter"><a href="#kernelconfig">9. FreeBSD カーネルのコンフィグレーション</a></span></dt><dd><dl><dt><span class="sect1"><a href="#kernelconfig-synopsis">9.1. この章では</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-custom-kernel">9.2. なぜカスタムカーネルを作るか?</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-devices">9.3. システムのハードウェアについて知る</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-config">9.4. コンフィグレーションファイル</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-building">9.5. カスタムカーネルの構築とインストール</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-trouble">9.6. 問題が起きた場合には</a></span></dt></dl></dd><dt><span class="chapter"><a href="#printing">10. プリンタの利用</a></span></dt><dd><dl><dt><span class="sect1"><a href="#printing-synopsis">10.1. この章では</a></span></dt><dt><span class="sect1"><a href="#printing-intro-spooler">10.2. はじめに</a></span></dt><dt><span class="sect1"><a href="#printing-intro-setup">10.3. 基本的な設定</a></span></dt><dt><span class="sect1"><a href="#printing-advanced">10.4. プリンタ設定上級編</a></span></dt><dt><span class="sect1"><a href="#printing-using">10.5. プリンタを使う</a></span></dt><dt><span class="sect1"><a href="#printing-lpd-alternatives">10.6. 標準スプーラの代替品</a></span></dt><dt><span class="sect1"><a href="#printing-troubleshooting">10.7. トラブルシューティング</a></span></dt></dl></dd><dt><span class="chapter"><a href="#linuxemu">11. Linux バイナリ互換機能</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp85701584">11.1. この章では</a></span></dt><dt><span class="sect1"><a href="#linuxemu-lbc-install">11.2. インストール</a></span></dt><dt><span class="sect1"><a href="#linuxemu-mathematicau">11.3. Mathematica のインストール</a></span></dt><dt><span class="sect1"><a href="#linuxemu-oracle">11.4. Oracle のインストール</a></span></dt><dt><span class="sect1"><a href="#sapr3">11.5. SAP R/3 (4.6B - IDES) のインストール</a></span></dt><dt><span class="sect1"><a href="#idp86485712">11.6. 高度なトピックス</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#system-administration">III. システム管理</a></span></dt><dd><dl><dt><span class="chapter"><a href="#config-tuning">12. 設定とチューニング</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp86536528">12.1. この章では</a></span></dt><dt><span class="sect1"><a href="#configtuning-core-configuration">12.2. 中核となる設定</a></span></dt><dt><span class="sect1"><a href="#configtuning-appconfig">12.3. アプリケーションの設定</a></span></dt><dt><span class="sect1"><a href="#configtuning-starting-services">12.4. サービスの起動</a></span></dt><dt><span class="sect1"><a href="#configtuning-virtual-hosts">12.5. バーチャルホスト</a></span></dt><dt><span class="sect1"><a href="#configtuning-configfiles">12.6. 設定ファイル</a></span></dt><dt><span class="sect1"><a href="#configtuning-sysctl">12.7. sysctl によるチューニング</a></span></dt><dt><span class="sect1"><a href="#configtuning-disk">12.8. ディスクのチューニング</a></span></dt><dt><span class="sect1"><a href="#configtuning-kernel-limits">12.9. Kernel 制限のチューニング</a></span></dt></dl></dd><dt><span class="chapter"><a href="#boot">13. FreeBSD の起動のプロセス</a></span></dt><dd><dl><dt><span class="sect1"><a href="#boot-synopsis">13.1. この章では</a></span></dt><dt><span class="sect1"><a href="#boot-introduction">13.2. 起動時の問題</a></span></dt><dt><span class="sect1"><a href="#boot-blocks">13.3. ブートマネージャと起動ステージ</a></span></dt><dt><span class="sect1"><a href="#boot-kernel">13.4. カーネル起動時の応答</a></span></dt><dt><span class="sect1"><a href="#device-hints">13.5. Device Hints</a></span></dt><dt><span class="sect1"><a href="#boot-init">13.6. init: プロセス制御の初期化</a></span></dt><dt><span class="sect1"><a href="#boot-shutdown">13.7. シャットダウン動作</a></span></dt></dl></dd><dt><span class="chapter"><a href="#users">14. ユーザと基本的なアカウントの管理</a></span></dt><dd><dl><dt><span class="sect1"><a href="#users-synopsis">14.1. この章では</a></span></dt><dt><span class="sect1"><a href="#users-introduction">14.2. アカウントの種類</a></span></dt><dt><span class="sect1"><a href="#users-modifying">14.3. アカウント情報の管理</a></span></dt><dt><span class="sect1"><a href="#users-limiting">14.4. ユーザへの制限</a></span></dt><dt><span class="sect1"><a href="#users-groups">14.5. グループの管理</a></span></dt></dl></dd><dt><span class="chapter"><a href="#security">15. セキュリティ</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp87404368">15.1. この章では</a></span></dt><dt><span class="sect1"><a href="#security-intro">15.2. はじめに</a></span></dt><dt><span class="sect1"><a href="#securing-freebsd">15.3. FreeBSDの安全性を高める</a></span></dt><dt><span class="sect1"><a href="#crypt">15.4. DES, MD5 と Crypt</a></span></dt><dt><span class="sect1"><a href="#skey">15.5. S/Key</a></span></dt><dt><span class="sect1"><a href="#kerberos">15.6. Kerberos</a></span></dt><dt><span class="sect1"><a href="#firewalls">15.7. ファイアウォール</a></span></dt><dt><span class="sect1"><a href="#openssl">15.8. OpenSSL</a></span></dt><dt><span class="sect1"><a href="#ipsec">15.9. IPsec</a></span></dt><dt><span class="sect1"><a href="#openssh">15.10. OpenSSH</a></span></dt><dt><span class="sect1"><a href="#fs-acl">15.11. ファイルシステムアクセス制御リスト</a></span></dt></dl></dd><dt><span class="chapter"><a href="#disks">16. ストレージ</a></span></dt><dd><dl><dt><span class="sect1"><a href="#disks-synopsis">16.1. この章では</a></span></dt><dt><span class="sect1"><a href="#disks-naming">16.2. デバイス名</a></span></dt><dt><span class="sect1"><a href="#disks-adding">16.3. ディスクの追加</a></span></dt><dt><span class="sect1"><a href="#raid">16.4. RAID</a></span></dt><dt><span class="sect1"><a href="#creating-cds">16.5. 光メディア (CD &amp; DVD) の作成と使用</a></span></dt><dt><span class="sect1"><a href="#floppies">16.6. フロッピーディスクの作成と使用</a></span></dt><dt><span class="sect1"><a href="#backups-tapebackups">16.7. データテープの作成と使用</a></span></dt><dt><span class="sect1"><a href="#backups-floppybackups">16.8. フロッピーディスクへのバックアップ</a></span></dt><dt><span class="sect1"><a href="#backup-basics">16.9. バックアップの基本</a></span></dt><dt><span class="sect1"><a href="#disks-virtual">16.10. ネットワーク、メモリ、そしてファイルベースのファイルシステム</a></span></dt><dt><span class="sect1"><a href="#snapshots">16.11. ファイルシステムのスナップショット</a></span></dt><dt><span class="sect1"><a href="#quotas">16.12. ファイルシステムクォータ</a></span></dt><dt><span class="sect1"><a href="#disks-encrypting">16.13. ディスクパーティションの暗号化</a></span></dt></dl></dd><dt><span class="chapter"><a href="#l10n">17. 地域化 (localization) - I18N/L10N の利用と設定</a></span></dt><dd><dl><dt><span class="sect1"><a href="#l10n-synopsis">17.1. この章では</a></span></dt><dt><span class="sect1"><a href="#l10n-basics">17.2. 基礎知識</a></span></dt><dt><span class="sect1"><a href="#using-localization">17.3. 地域化の利用</a></span></dt><dt><span class="sect1"><a href="#l10n-compiling">17.4. 国際化に対応したプログラムのコンパイル</a></span></dt><dt><span class="sect1"><a href="#lang-setup">17.5. FreeBSD を特定の言語に地域化する</a></span></dt></dl></dd><dt><span class="chapter"><a href="#updating-upgrading">18. FreeBSD のアップデートとアップグレード</a></span></dt><dd><dl><dt><span class="sect1"><a href="#updating-upgrading-synopsis">18.1. この章では</a></span></dt><dt><span class="sect1"><a href="#updating-upgrading-freebsdupdate">18.2. FreeBSD Update</a></span></dt><dt><span class="sect1"><a href="#updating-upgrading-documentation">18.3. ドキュメントのアップデート</a></span></dt><dt><span class="sect1"><a href="#current-stable">18.4. 開発ブランチを追いかける</a></span></dt><dt><span class="sect1"><a href="#synching">18.5. ソースの同期</a></span></dt><dt><span class="sect1"><a href="#makeworld">18.6. world の再構築</a></span></dt><dt><span class="sect1"><a href="#small-lan">18.7. 複数のマシンで追いかける</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#network-communication">IV. ネットワーク通信</a></span></dt><dd><dl><dt><span class="chapter"><a href="#serialcomms">19. シリアル通信</a></span></dt><dd><dl><dt><span class="sect1"><a href="#serial-synopsis">19.1. この章では</a></span></dt><dt><span class="sect1"><a href="#serial">19.2. はじめに</a></span></dt><dt><span class="sect1"><a href="#term">19.3. シリアル端末</a></span></dt><dt><span class="sect1"><a href="#dialup">19.4. ダイアルインサービス</a></span></dt><dt><span class="sect1"><a href="#dialout">19.5. ダイアルアウトサービス</a></span></dt><dt><span class="sect1"><a href="#serialconsole-setup">19.6. シリアルコンソールの設定</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ppp-and-slip">20. PPP と SLIP</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp92000208">20.1. この章では</a></span></dt><dt><span class="sect1"><a href="#userppp">20.2. ユーザ ppp の利用</a></span></dt><dt><span class="sect1"><a href="#ppp">20.3. カーネル PPP の利用</a></span></dt><dt><span class="sect1"><a href="#pppoe">20.4.  PPP オーバイーサネット (PPPoE) の利用</a></span></dt><dt><span class="sect1"><a href="#slip">20.5. SLIP の利用</a></span></dt></dl></dd><dt><span class="chapter"><a href="#mail">21. 電子メール</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mail-synopsis">21.1. この章では</a></span></dt><dt><span class="sect1"><a href="#mail-using">21.2. 電子メールを使う</a></span></dt><dt><span class="sect1"><a href="#sendmail">21.3. <span class="application">sendmail</span> の設定</a></span></dt><dt><span class="sect1"><a href="#mail-changingmta">21.4. MTA の変更</a></span></dt><dt><span class="sect1"><a href="#mail-trouble">21.5. トラブルシュート</a></span></dt><dt><span class="sect1"><a href="#mail-advanced">21.6. 先進的なトピックス</a></span></dt><dt><span class="sect1"><a href="#SMTP-UUCP">21.7. UUCP とともに SMTP を使う</a></span></dt><dt><span class="sect1"><a href="#SMTP-dialup">21.8. ダイアルアップ接続でメールを使う</a></span></dt><dt><span class="sect1"><a href="#SMTP-Auth">21.9. SMTP 認証</a></span></dt></dl></dd><dt><span class="chapter"><a href="#advanced-networking">22. 高度なネットワーク</a></span></dt><dd><dl><dt><span class="sect1"><a href="#advanced-networking-synopsis">22.1. この章では</a></span></dt><dt><span class="sect1"><a href="#network-routing">22.2. ゲートウェイと経路</a></span></dt><dt><span class="sect1"><a href="#network-wireless">22.3. 無線ネットワーク</a></span></dt><dt><span class="sect1"><a href="#network-bluetooth">22.4. Bluetooth</a></span></dt><dt><span class="sect1"><a href="#network-bridging">22.5. ブリッジ</a></span></dt><dt><span class="sect1"><a href="#network-nfs">22.6. NFS</a></span></dt><dt><span class="sect1"><a href="#network-diskless">22.7. ディスクレス稼働</a></span></dt><dt><span class="sect1"><a href="#network-isdn">22.8. ISDN</a></span></dt><dt><span class="sect1"><a href="#network-nis">22.9. NIS/YP</a></span></dt><dt><span class="sect1"><a href="#network-dhcp">22.10. DHCP</a></span></dt><dt><span class="sect1"><a href="#network-dns">22.11. DNS</a></span></dt><dt><span class="sect1"><a href="#network-ntp">22.12. NTP</a></span></dt><dt><span class="sect1"><a href="#network-natd">22.13. ネットワークアドレス変換 (NAT)</a></span></dt><dt><span class="sect1"><a href="#network-inetd">22.14. <span class="application">inetd</span> <span class="quote">「<span class="quote">スーパサーバ</span>」</span></a></span></dt><dt><span class="sect1"><a href="#network-plip">22.15. パラレルライン IP (PLIP)</a></span></dt><dt><span class="sect1"><a href="#network-ipv6">22.16. IPv6</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#appendices">V. 付録</a></span></dt><dd><dl><dt><span class="appendix"><a href="#mirrors">A. FreeBSD の入手方法</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mirrors-cdrom">A.1. <acronym class="acronym">CD</acronym> および
      <acronym class="acronym">DVD</acronym> セット</a></span></dt><dt><span class="sect1"><a href="#mirrors-ftp">A.2. <acronym class="acronym">FTP</acronym> サイト</a></span></dt><dt><span class="sect1"><a href="#ctm">A.3. CTM を使う</a></span></dt><dt><span class="sect1"><a href="#svn">A.4. <span class="application">Subversion</span> を使う</a></span></dt><dt><span class="sect1"><a href="#mirrors-rsync">A.5. <span class="application">rsync</span> を使用する</a></span></dt></dl></dd><dt><span class="appendix"><a href="#bibliography">B. 参考図書</a></span></dt><dd><dl><dt><span class="sect1"><a href="#bibliography-freebsd">B.1. FreeBSD 専門の書籍</a></span></dt><dt><span class="sect1"><a href="#bibliography-userguides">B.2. 利用者向けのガイド</a></span></dt><dt><span class="sect1"><a href="#bibliography-adminguides">B.3. 管理者向けのガイド</a></span></dt><dt><span class="sect1"><a href="#idp96627920">B.4. プログラマ向けのガイド</a></span></dt><dt><span class="sect1"><a href="#idp96652112">B.5. オペレーティングシステム内部</a></span></dt><dt><span class="sect1"><a href="#idp96687696">B.6. セキュリティの参考資料</a></span></dt><dt><span class="sect1"><a href="#bibliography-hardware">B.7. ハードウェアの参考資料</a></span></dt><dt><span class="sect1"><a href="#bibliography-history">B.8. <span class="trademark">UNIX</span>® の歴史</a></span></dt><dt><span class="sect1"><a href="#bibliography-journals">B.9. 定期刊行物、雑誌およびジャーナル</a></span></dt></dl></dd><dt><span class="appendix"><a href="#eresources">C. インターネット上のリソース</a></span></dt><dd><dl><dt><span class="sect1"><a href="#eresources-mail">C.1. メーリングリスト</a></span></dt><dt><span class="sect1"><a href="#eresources-news">C.2. Usenet ニュースグループ</a></span></dt><dt><span class="sect1"><a href="#eresources-web">C.3. World Wide Web サイト</a></span></dt><dt><span class="sect1"><a href="#eresources-email">C.4. Email アドレス</a></span></dt><dt><span class="sect1"><a href="#eresources-shell">C.5. シェルアカウント</a></span></dt></dl></dd><dt><span class="appendix"><a href="#pgpkeys">D. <acronym class="acronym">PGP</acronym> 公開鍵</a></span></dt><dd><dl><dt><span class="sect1"><a href="#pgpkeys-officers">D.1. オフィサ</a></span></dt></dl></dd></dl></dd><dt><span class="glossary"><a href="#freebsd-glossary">FreeBSD Glossary</a></span></dt><dt><span class="index"><a href="#idp98362576">索引</a></span></dt></dl></div><div class="list-of-figures"><div class="toc-title">図の一覧</div><dl><dt>2.1. <a href="#bsdinstall-newboot-loader-menu">FreeBSD ブートローダメニュー</a></dt><dt>2.2. <a href="#bsdinstall-boot-options-menu">FreeBSD ブートオプションメニュー</a></dt><dt>2.3. <a href="#bsdinstall-choose-mode">ウェルカムメニュー</a></dt><dt>2.4. <a href="#bsdinstall-keymap-select-default">キーマップの選択</a></dt><dt>2.5. <a href="#bsdinstall-config-keymap">キーボードメニューの選択</a></dt><dt>2.6. <a href="#bsdinstall-keymap-10">拡張キーマップメニュー</a></dt><dt>2.7. <a href="#bsdinstall-config-hostname">ホスト名の設定</a></dt><dt>2.8. <a href="#bsdinstall-config-components">インストールするコンポーネントの設定</a></dt><dt>2.9. <a href="#bsdinstall-netinstall-notify">ネットワークからのインストール</a></dt><dt>2.10. <a href="#bsdinstall-netinstall-mirror">ミラーサイトの選択</a></dt><dt>2.11. <a href="#bsdinstall-part-guided-manual">FreeBSD 9.x におけるパーティションの分割の選択肢</a></dt><dt>2.12. <a href="#bsdinstall-zfs-partmenu">FreeBSD 10.x 以降でのパーティション分割の選択</a></dt><dt>2.13. <a href="#bsdinstall-part-guided-disk">複数のディスクから選択する</a></dt><dt>2.14. <a href="#bsdinstall-part-entire-part">Entire Disk または Partition の選択</a></dt><dt>2.15. <a href="#bsdinstall-part-review">作成されたパーティションの確認</a></dt><dt>2.16. <a href="#bsdinstall-part-manual-create">Manual によるパーティションの分割</a></dt><dt>2.17. <a href="#bsdinstall-part-manual-partscheme">手動でパーティションを作成する</a></dt><dt>2.18. <a href="#bsdinstall-part-manual-addpart">手動でパーティションを作成する</a></dt><dt>2.19. <a href="#bsdinstall-zfs-menu"><acronym class="acronym">ZFS</acronym> パーティションメニュー</a></dt><dt>2.20. <a href="#bsdinstall-zfs-vdev_type"><acronym class="acronym">ZFS</acronym> プールタイプ</a></dt><dt>2.21. <a href="#bsdinstall-zfs-disk_select">ディスクの選択</a></dt><dt>2.22. <a href="#bsdinstall-zfs-vdev_invalid">問題のある選択</a></dt><dt>2.23. <a href="#bsdinstall-zfs-disk_info">ディスクの解析</a></dt><dt>2.24. <a href="#bsdinstall-zfs-geli_password">ディスク暗号化パスワード</a></dt><dt>2.25. <a href="#bsdinstall-zfs-warning">最終確認</a></dt><dt>2.26. <a href="#bsdinstall-final-confirmation">最後の確認</a></dt><dt>2.27. <a href="#bsdinstall-distfile-fetching">配布ファイルのダウンロード</a></dt><dt>2.28. <a href="#bsdinstall-distfile-verify">配布ファイルの検証</a></dt><dt>2.29. <a href="#bsdinstall-distfile-extract">配布ファイルの取り出し</a></dt><dt>2.30. <a href="#bsdinstall-post-set-root-passwd"><code class="systemitem">root</code> パスワードの設定</a></dt><dt>2.31. <a href="#bsdinstall-configure-net-interface">イーサネットインタフェースの選択</a></dt><dt>2.32. <a href="#bsdinstall-wireless-scan">ワイヤレスアクセスポイントのスキャン</a></dt><dt>2.33. <a href="#bsdinstall-wireless-accesspoints">ワイヤレスネットワークの選択</a></dt><dt>2.34. <a href="#bsdinstall-wireless-wpa2">WPA2 のセットアップ</a></dt><dt>2.35. <a href="#bsdinstall-configure-net-ipv4"><acronym class="acronym">IPv4</acronym> ネットワークの選択</a></dt><dt>2.36. <a href="#bsdinstall-net-ipv4-dhcp"><acronym class="acronym">IPv4</acronym>
	  <acronym class="acronym">DHCP</acronym> 設定の選択</a></dt><dt>2.37. <a href="#bsdinstall-net-ipv4-static"><acronym class="acronym">IPv4</acronym> の静的な設定</a></dt><dt>2.38. <a href="#bsdinstall-net-ipv6">IPv6 ネットワークの選択</a></dt><dt>2.39. <a href="#bsdinstall-net-ipv6-slaac"><acronym class="acronym">IPv6</acronym> SLAAC 設定の選択</a></dt><dt>2.40. <a href="#bsdinstall-net-ipv6-static">IPv6 の静的な設定</a></dt><dt>2.41. <a href="#bsdinstall-net-dns-config">DNS の設定</a></dt><dt>2.42. <a href="#bsdinstall-local-utc">ローカルまたは UTC クロックの選択</a></dt><dt>2.43. <a href="#bsdinstall-timezone-region">地域の選択</a></dt><dt>2.44. <a href="#bsdinstall-timezone-country">国名の選択</a></dt><dt>2.45. <a href="#bsdinstall-timezone-zone">タイムゾーンの選択</a></dt><dt>2.46. <a href="#bsdinstall-timezone-confirmation">タイムゾーンの確定</a></dt><dt>2.47. <a href="#bsdinstall-config-serv">追加で有効にするサービスの選択</a></dt><dt>2.48. <a href="#bsdinstall-config-crashdump">クラッシュダンプの設定</a></dt><dt>2.49. <a href="#bsdinstall-add-user1">新しいユーザのアカウントの作成</a></dt><dt>2.50. <a href="#bsdinstall-add-user2">ユーザ情報の入力</a></dt><dt>2.51. <a href="#bsdinstall-add-user3">ユーザおよびグループの管理を終了する</a></dt><dt>2.52. <a href="#bsdinstall-final-config"></a></dt><dt>2.53. <a href="#bsdinstall-final-modification-shell">Manual Configuration</a></dt><dt>2.54. <a href="#bsdinstall-final-main">インストールの終了</a></dt><dt>3.1. <a href="#boot-loader-menu">FreeBSD ブートローダメニュー</a></dt><dt>3.2. <a href="#install-dev-probe">古典的なデバイス検出結果の例</a></dt><dt>3.3. <a href="#config-country">国の選択メニュー</a></dt><dt>3.4. <a href="#config-keymap">キーボードメニューの選択</a></dt><dt>3.5. <a href="#sysinstall-main3">Sysinstall のメインメニューから Usage を選択</a></dt><dt>3.6. <a href="#main-doc">ドキュメントメニューの選択</a></dt><dt>3.7. <a href="#docmenu1">Sysinstall ドキュメントメニュー</a></dt><dt>3.8. <a href="#sysinstall-keymap">Sysinstall メインメニュー</a></dt><dt>3.9. <a href="#sysinstall-keymap-menu">Sysinstall キー配列メニュー</a></dt><dt>3.10. <a href="#sysinstall-options">Sysinstall メインメニュー</a></dt><dt>3.11. <a href="#options">Sysinstall オプション</a></dt><dt>3.12. <a href="#sysinstall-standard">標準インストールの開始</a></dt><dt>3.13. <a href="#sysinstall-fdisk-drive1">fdisk を実行するディスクの選択</a></dt><dt>3.14. <a href="#sysinstall-fdisk1">典型的な <span class="application">FDisk</span> パーティション</a></dt><dt>3.15. <a href="#sysinstall-fdisk2">ディスク全体を使う FDisk 構成</a></dt><dt>3.16. <a href="#sysinstall-bootmgr">sysinstall ブートマネージャメニュー</a></dt><dt>3.17. <a href="#sysinstall-fdisk-drive2">ドライブ選択の終了</a></dt><dt>3.18. <a href="#sysinstall-label">sysinstall ディスクラベルエディタ</a></dt><dt>3.19. <a href="#sysinstall-label2">デフォルトの自動割り当てによる sysinstall ディスクラベルエディタ</a></dt><dt>3.20. <a href="#sysinstall-label-add">ルートパーティションに割りあてる容量</a></dt><dt>3.21. <a href="#sysinstall-label-add2">ルートパーティションサイズの編集</a></dt><dt>3.22. <a href="#sysinstall-label-type">ルートパーティションタイプの選択</a></dt><dt>3.23. <a href="#sysinstall-label-mount">ルートのマウントポイント選択</a></dt><dt>3.24. <a href="#sysinstall-label4">sysinstall ディスクラベルエディタ</a></dt><dt>3.25. <a href="#distribution-set1">ディストリビューションの選択</a></dt><dt>3.26. <a href="#distribution-set2">ディストリビューションの確認</a></dt><dt>3.27. <a href="#choose-media">インストールメディアの選択</a></dt><dt>3.28. <a href="#ed-config1">イーサネットデバイスを選ぶ</a></dt><dt>3.29. <a href="#ed-config2"><em class="replaceable"><code>ed0</code></em> ネットワークの設定</a></dt><dt>3.30. <a href="#inetd-edit"><code class="filename">inetd.conf</code> の編集</a></dt><dt>3.31. <a href="#anon-ftp2">Anonymous FTP のデフォルトの設定</a></dt><dt>3.32. <a href="#anon-ftp4">FTP Welcome メッセージの編集</a></dt><dt>3.33. <a href="#nfs-server-edit"><code class="filename">exports</code> ファイルの編集</a></dt><dt>3.34. <a href="#saver-options">システムコンソール設定オプション</a></dt><dt>3.35. <a href="#saver-select">スクリーンセーバオプション</a></dt><dt>3.36. <a href="#saver-timeout">スクリーンセーバのタイムアウト</a></dt><dt>3.37. <a href="#saver-exit">システムコンソールの設定の終了</a></dt><dt>3.38. <a href="#set-timezone-region">地域の選択</a></dt><dt>3.39. <a href="#set-timezone-country">国名の選択</a></dt><dt>3.40. <a href="#set-timezone-locality">タイムゾーンの選択</a></dt><dt>3.41. <a href="#mouse-protocol">マウスプロトコルのタイプの選択</a></dt><dt>3.42. <a href="#set-mouse-protocol">マウスプロトコルの選択</a></dt><dt>3.43. <a href="#config-mouse-port">マウスポートの設定</a></dt><dt>3.44. <a href="#set-mouse-port">マウスポート の設定</a></dt><dt>3.45. <a href="#test-daemon">マウスデーモンを有効にする。</a></dt><dt>3.46. <a href="#test-mouse-daemon">マウスデーモンのテスト</a></dt><dt>3.47. <a href="#package-category">Package カテゴリの選択</a></dt><dt>3.48. <a href="#package-select">Packages の選択</a></dt><dt>3.49. <a href="#package-install">Packages のインストール</a></dt><dt>3.50. <a href="#package-install-confirm">Package のインストールの確認</a></dt><dt>3.51. <a href="#add-user2">User の選択</a></dt><dt>3.52. <a href="#add-user3">ユーザ情報の入力</a></dt><dt>3.53. <a href="#add-user4">ユーザおよびグループの管理を終了する</a></dt><dt>3.54. <a href="#final-main">インストールの終了</a></dt><dt>3.55. <a href="#network-configuration">ネットワーク設定 (メニューの前半)</a></dt><dt>3.56. <a href="#mta-selection">デフォルトの MTA の選択</a></dt><dt>3.57. <a href="#Ntpdate-config">Ntpdate の設定</a></dt><dt>3.58. <a href="#Network-configuration-cont">ネットワーク設定 (メニューの後半)</a></dt></dl></div><div class="list-of-tables"><div class="toc-title">表の一覧</div><dl><dt>2.1. <a href="#idp78512464">パーティションスキーム</a></dt><dt>3.1. <a href="#idp78985680">サンプルデバイス一覧</a></dt><dt>3.2. <a href="#idp79433680">一つ目のディスクのパーティションレイアウト</a></dt><dt>3.3. <a href="#idp79459664">残りのディスクのパーティション構成</a></dt><dt>3.4. <a href="#idp80379088">FreeBSD
	      ISO イメージの名前と内容</a></dt><dt>4.1. <a href="#basics-dev-codes">ディスクデバイス記号</a></dt><dt>8.1. <a href="#idp83292880">良くあるエラーメッセージ</a></dt><dt>16.1. <a href="#disk-naming-physical-table">物理ディスクへの名前付け</a></dt><dt>22.1. <a href="#idp95639504">ネットワーク向けのパラレル (クロス) ケーブル結線</a></dt><dt>22.2. <a href="#idp95789392">予約された IPv6 アドレス</a></dt></dl></div><div class="list-of-examples"><div class="toc-title">例の一覧</div><dl><dt>2.1. <a href="#bsdinstall-part-manual-splitfs">伝統的なファイルシステムのパーティションを作成する。</a></dt><dt>3.1. <a href="#idp79023568">既存のパーティションを変更せずに使用</a></dt><dt>3.2. <a href="#idp79028048">既存のパーティションを縮小する</a></dt><dt>4.1. <a href="#basics-disk-slice-part">ディスク名、スライス名、パーティション名のサンプル</a></dt><dt>4.2. <a href="#basics-concept-disk-model">ディスクの概念的構成</a></dt><dt>13.1. <a href="#boot-boot0-example"><code class="filename">boot0</code> のスクリーンショット</a></dt><dt>13.2. <a href="#boot-boot2-example"><code class="filename">boot2</code> のスクリーンショット</a></dt><dt>13.3. <a href="#boot-insecure-console"><code class="filename">/etc/ttys</code> の insecure コンソール</a></dt><dt>14.1. <a href="#idp87160016">スーパーユーザ権限でプログラムをインストールする</a></dt><dt>14.2. <a href="#idp87196496">FreeBSD におけるユーザの追加</a></dt><dt>14.3. <a href="#idp87222224"><code class="command">rmuser</code> による対話的なアカウントの削除</a></dt><dt>14.4. <a href="#idp87239376">スーパユーザによる対話的な <code class="command">chpass</code></a></dt><dt>14.5. <a href="#idp87241168">通常のユーザによる対話的な <code class="command">chpass</code></a></dt><dt>14.6. <a href="#idp87253712">自分のパスワードの変更</a></dt><dt>14.7. <a href="#idp87255504">スーパーユーザ権限での他のユーザのパスワード変更</a></dt><dt>14.8. <a href="#idp87362128">pw(8) によるグループの追加</a></dt><dt>14.9. <a href="#idp87372752">pw(8) により新しいグループにメンバを追加する</a></dt><dt>14.10. <a href="#idp87384528">pw(8) によるグループへのユーザ追加</a></dt><dt>14.11. <a href="#idp87388496">グループに所属しているユーザを調べるための id(1) の使い方</a></dt><dt>15.1. <a href="#idp88728016">SSH を用いた SMTP 用の安全なトンネルの作成</a></dt><dt>16.1. <a href="#idp89551056"><span class="application">ssh</span> 越しの
	  <code class="command">dump</code> の利用</a></dt><dt>16.2. <a href="#idp89554512"><code class="envar">RSH</code> を設定した <span class="application">ssh</span> 越しの <code class="command">dump</code> を利用</a></dt><dt>16.3. <a href="#idp89662288">ブートフロッピーを作成するスクリプト</a></dt><dt>16.4. <a href="#idp89706832">FreeBSD 4.X での vnconfig を用いた既存のファイルシステムイメージのマウント</a></dt><dt>16.5. <a href="#idp89714512"><code class="command">vnconfig</code> を用いたファイルベースディスクの新規作成</a></dt><dt>16.6. <a href="#idp89733712">FreeBSD 5.X での <code class="command">mdconfig</code> を用いた既存のファイルシステムイメージのマウント</a></dt><dt>16.7. <a href="#idp89737552"><code class="command">mdconfig</code> を用いたファイルシステムイメージの新規作成</a></dt><dt>16.8. <a href="#idp89769680"><code class="command">mdmfs</code> を用いたファイルベースディスクの設定とマウント</a></dt><dt>16.9. <a href="#idp89785552">FreeBSD 4.X での md メモリディスク</a></dt><dt>16.10. <a href="#idp89799248"><code class="command">mdconfig</code> を用いたメモリベースディスクの新規作成</a></dt><dt>16.11. <a href="#idp89832528"><code class="command">mdmfs</code> を用いたメモリベースディスクの新規作成</a></dt><dt>19.1. <a href="#ex-etc-ttys">端末の項目を <code class="filename">/etc/ttys</code>
	    に追加する</a></dt><dt>21.1. <a href="#idp92873552"><span class="application">sendmail</span>
	  アクセスデータベースの設定</a></dt><dt>21.2. <a href="#idp92880592">メールエイリアス</a></dt><dt>21.3. <a href="#idp92905680">仮想ドメインメール対応表の例</a></dt><dt>22.1. <a href="#idp94046416"><span class="application">amd</span>
	  によるエクスポートされたファイルシステムのマウント</a></dt><dt>22.2. <a href="#idp94471760">支店または家庭のネットワーク</a></dt><dt>22.3. <a href="#idp94477008">本社 LAN や他の LAN</a></dt><dt>22.4. <a href="#network-inetd-hangup"><span class="application">inetd</span> への HangUP シグナル送付</a></dt></dl></div><div class="preface"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="book-preface"></a>前書き</h1></div></div></div><h2 class="title"><a id="preface-audience"></a>想定している読者</h2><p>最初の部分は FreeBSD を使い始めた人向けで、FreeBSD
    のインストールの過程を手引きし、<span class="trademark">UNIX</span>®
    の基礎となっている概念や慣習を丁寧に紹介します。
    この部分に取り組むために必要なのは、探究心と、
    紹介された新たな概念を理解する能力だけです。</p><p>その次の、ハンドブックのはるかに大きな部分では、FreeBSD
    システム管理者が興味を抱くあらゆる種類の話題が分かりやすく言及されています。
    一部の章は、その章の前に読んでおくべきことが推奨されており、
    各章の始めの概要で述べられています。</p><p>さらなる情報源の一覧は、<a class="xref" href="#bibliography" title="付録B 参考図書">付録B <em>参考図書</em></a> をご覧ください。</p><h2 class="title"><a id="preface-changes-from3"></a>第 3
    版からの変更</h2><p>オンライン版のハンドブックは、FreeBSD
    ドキュメンテーションプロジェクトの献身的なメンバーによる
    10 年以上に渡る作業の頂点に立つものです。
    2004 年に出版された 2 巻組の第 3 版からの主な変更は、次のようなものです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>強力なパフォーマンス解析ツール
	 DTrace
        に関する情報が追加されました。</p></li><li class="listitem"><p>
	ファイルシステム対応の章が追加されました。
	<span class="trademark">Sun</span>™ の ZFS のような FreeBSD
	ネイティブではないファイルシステムへの対応について説明しています。</p></li><li class="listitem"><p>
	セキュリティ監査の章が追加されました。
	FreeBSD における新しい監査のケイパビリティおよびその使用方法について説明しています。</p></li><li class="listitem"><p>
	仮想化の章が追加されました。os;
	を仮想化ソフトへインストールする方法などを取り上げています。</p></li><li class="listitem"><p>新しいインストールユーティリティの
	<span class="application">bsdinstall</span> を用いた FreeBSD
	のインストール方法を説明する
	<a class="xref" href="#bsdinstall" title="第2章 FreeBSD のインストール (9.X 以降の場合)">2章<em>FreeBSD のインストール (9.<em class="replaceable"><code>X</code></em> 以降の場合)</em></a> という章が追加されました。</p></li></ul></div><h2 class="title"><a id="preface-changes-from2"></a>第 2 版 (2004)
    からの変更</h2><p>第 3 版は、FreeBSD
    ドキュメンテーションプロジェクトの献身的なメンバーによる
    2 年以上に渡る作業の頂点に立つものです。
    サイズが大きくなったため、印刷版は、2 巻での出版となりました。
    この新たな版における主な変更は、次のようなものです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="#config-tuning" title="第12章 設定とチューニング">12章<em>設定とチューニング</em></a>
	に、ACPI 電源管理、<code class="command">cron</code> システムユーティリティ、
	およびカーネルチューニングオプションに関するより多くの情報が追加されました。</p></li><li class="listitem"><p><a class="xref" href="#security" title="第15章 セキュリティ">15章<em>セキュリティ</em></a> に、
	Virtual Private Network (VPN)、
	ファイルシステムアクセスコントロールリスト (ACL)、
	およびセキュリティ勧告に関する情報が追加されました。</p></li><li class="listitem"><p> Mandatory Access Control (MAC)
	の章がこの版で追加されました。
	MAC がどのようなもので、
	このメカニズムがどのように FreeBSD
	システムを安全にするかについて説明しています。</p></li><li class="listitem"><p><a class="xref" href="#disks" title="第16章 ストレージ">16章<em>ストレージ</em></a> に、
	USB ストレージデバイス、ファイルシステムスナップショット、
	ファイルシステムクォータ、
	ファイルおよびネットワークベースのファイルシステム、
	暗号化されたディスクパーティションに関する情報が追加されました。</p></li><li class="listitem"><p><a class="xref" href="#ppp-and-slip" title="第20章 PPP と SLIP">20章<em>PPP と SLIP</em></a> に、
	トラブルシューティングの節が追加されました。</p></li><li class="listitem"><p><a class="xref" href="#mail" title="第21章 電子メール">21章<em>電子メール</em></a>, に、
	他のメール転送エージェント、SMTP 認証、UUCP,
	<span class="application">fetchmail</span>,
	<span class="application">procmail</span>
	や他の高度な話題についての情報が追加されました。</p></li><li class="listitem"><p>
	ネットワークサービスの章が、この版で新しく追加されました。
	この章では、<span class="application">Apache HTTP サーバ</span>、
	<span class="application">fptd</span> および
	<span class="application">Samba</span> を用いて
	<span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®
	クライアント用にサーバを設定する方法などを取り上げています。
	再構成によりいくつかの節が、<a class="xref" href="#advanced-networking" title="第22章 高度なネットワーク">22章<em>高度なネットワーク</em></a> から移動してきました。</p></li><li class="listitem"><p><a class="xref" href="#advanced-networking" title="第22章 高度なネットワーク">22章<em>高度なネットワーク</em></a> に、
	FreeBSD での <span class="trademark">Bluetooth</span>® デバイスの使用、
	ワイヤレスネットワークの設定、
	Asynchronous Transfer Mode (ATM)
	ネットワークに関する情報が追加されました。</p></li><li class="listitem"><p>本書で使われている専門用語の定義をまとめた用語集が追加されました。</p></li><li class="listitem"><p>本書を通じて表および図の表現において数多くの改良がおこなわれました。</p></li></ul></div><h2 class="title"><a id="preface-changes"></a>第 1 版 (2001)
    からの変更</h2><p>第 2 版は、FreeBSD
    ドキュメンテーションプロジェクトの献身的なメンバーによる
    2 年以上に渡る作業の頂点に立つものでした。
    この新たな版における主な変更は、次のようなものでした。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>完備した索引が追加されました。</p></li><li class="listitem"><p>ASCII キャラクタによる図はすべて画像に置き換えられました
	  (訳注: 日本語版は作業中です)。</p></li><li class="listitem"><p>各章に、章に記載されている内容と、
	  読者に期待される予備知識がすぐに分かるように、
	  一定の内容の概要が付け加えられました。</p></li><li class="listitem"><p>内容は、<span class="quote">「<span class="quote">始めに</span>」</span>、<span class="quote">「<span class="quote">システム管理</span>」</span>、
	  <span class="quote">「<span class="quote">付録</span>」</span> の 3 つの論理的な部分に再構成されました。</p></li><li class="listitem"><p><a class="xref" href="#install" title="第3章 FreeBSD 8.X のインストール">3章<em>FreeBSD 8.<em class="replaceable"><code>X</code></em> のインストール</em></a>
	  は新規ユーザーが文章の内容を理解しやすいように多くのスクリーンショットを入れて完全に書き直されました。</p></li><li class="listitem"><p><a class="xref" href="#basics" title="第4章 UNIX の基礎知識">4章<em>UNIX の基礎知識</em></a> には、プロセス、デーモン、
	  シグナルに関する情報が追加されました。</p></li><li class="listitem"><p><a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a>
	  には、バイナリパッケージの管理に関する情報が追加されました。</p></li><li class="listitem"><p><a class="xref" href="#x11" title="第6章 X Window System">6章<em>X Window System</em></a> は、
	  <span class="trademark">XFree86</span>™ 4.X 上で <span class="application">KDE</span> や
	  <span class="application">GNOME</span>
	  のような近代的なデスクトップテクノロジーを利用することに力点をおいて、
	  完全に書き直されました。</p></li><li class="listitem"><p><a class="xref" href="#boot" title="第13章 FreeBSD の起動のプロセス">13章<em>FreeBSD の起動のプロセス</em></a> が拡張されました。</p></li><li class="listitem"><p><a class="xref" href="#disks" title="第16章 ストレージ">16章<em>ストレージ</em></a> は、
	  <span class="quote">「<span class="quote">ディスク</span>」</span> と <span class="quote">「<span class="quote">バックアップ</span>」</span> の
	  2 つの章に分かれていたものをまとめて書き直されました。私たちは、
	  この話題は 1 つの章にまとめて示した方が分かりやすいと感じています。
	  RAID (ハードウェアとソフトウェアの両方)
	  に関する節も追加されました。</p></li><li class="listitem"><p><a class="xref" href="#serialcomms" title="第19章 シリアル通信">19章<em>シリアル通信</em></a>
	  は FreeBSD 4.X/5.X 向けに一から再構成されました。</p></li><li class="listitem"><p><a class="xref" href="#ppp-and-slip" title="第20章 PPP と SLIP">20章<em>PPP と SLIP</em></a>
	  は大幅に更新されました。</p></li><li class="listitem"><p><a class="xref" href="#advanced-networking" title="第22章 高度なネットワーク">22章<em>高度なネットワーク</em></a>
	  に、多くの新しい節が追加されました。</p></li><li class="listitem"><p><a class="xref" href="#mail" title="第21章 電子メール">21章<em>電子メール</em></a>
	  に、<span class="application">sendmail</span>
	  の設定についてより多くの情報が加えられました。</p></li><li class="listitem"><p><a class="xref" href="#linuxemu" title="第11章 Linux バイナリ互換機能">11章<em>Linux バイナリ互換機能</em></a>
	  には、<span class="application"><span class="trademark">Oracle</span>®</span> や
	  <span class="application"><span class="trademark">Mathematica</span>®</span>
	  のインストール情報が加えられました
	  (訳注: 日本語版は作業中です)。</p></li><li class="listitem"><p>この第 2 版では、以下の新たな話題が扱われています。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="xref" href="#config-tuning" title="第12章 設定とチューニング">12章<em>設定とチューニング</em></a></p></li><li class="listitem"><p><a class="xref" href="#multimedia" title="第8章 マルチメディア">8章<em>マルチメディア</em></a></p></li></ul></div></li></ul></div><h2 class="title"><a id="preface-overview"></a>この文書の構成</h2><p>この文書は 5 部構成になっています。
    第 1 部<span class="emphasis"><em>導入</em></span>では、
    FreeBSD のインストールと基本的な使い方を扱います。
    各章は順に読むことを想定していますが、
    馴染み深い話題を扱った章は飛ばしてもよいでしょう。
    第 2 部<span class="emphasis"><em>日々の生活</em></span>では、
    FreeBSD で良く使われる機能について説明します。
    この章とそれに続く章は、順不同に読むことができます。
    各章の始めにはその章が何を扱っていて、
    読者にどんな予備知識が期待されるかを簡潔に述べた概要がおかれています。
    第 3 部<span class="emphasis"><em>システム管理</em></span>は、
    システム管理に関する話題を扱っています。
    第 4 部<span class="emphasis"><em>ネットワーク通信</em></span>では、
    ネットワークおよびサーバに関する話題を扱っています。
    第 5 部は参考情報からなる<span class="emphasis"><em>付録</em></span>です。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#introduction" title="第1章 はじめに">1章<em>はじめに</em></a></em></span></span></dt><dd><p>新規ユーザに FreeBSD を紹介します。ここでは、FreeBSD
	  プロジェクトの歴史、目標と開発モデルについて述べています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#bsdinstall" title="第2章 FreeBSD のインストール (9.X 以降の場合)">2章<em>FreeBSD のインストール (9.<em class="replaceable"><code>X</code></em> 以降の場合)</em></a></em></span></span></dt><dd><p><span class="application">bsdinstall</span> を用いた
	  FreeBSD 9.<em class="replaceable"><code>x</code></em>
	  以降のシステムのインストール過程を一通りユーザに案内しています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#install" title="第3章 FreeBSD 8.X のインストール">3章<em>FreeBSD 8.<em class="replaceable"><code>X</code></em> のインストール</em></a></em></span></span></dt><dd><p><span class="application">sysinstall</span> を用いた
	  FreeBSD 8.<em class="replaceable"><code>x</code></em> 以降のシステムの
	  インストール過程を一通りユーザに案内しています。
	  また、シリアルコンソール経由でのインストールのような高度な話題もいくらか扱っています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#basics" title="第4章 UNIX の基礎知識">4章<em>UNIX の基礎知識</em></a></em></span></span></dt><dd><p>FreeBSD
	  オペレーティングシステムの基本的なコマンドや機能を扱っています。
	  <span class="trademark">Linux</span>® やその他の <span class="trademark">UNIX</span>® 風のものに馴染んでいたら、
	  この章を飛ばしても構わないでしょう。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a></em></span></span></dt><dd><p>FreeBSD の革新的な <span class="quote">「<span class="quote">Ports Collection</span>」</span>
	  および標準的なバイナリパッケージによるサードパーティアプリケーションのインストールについて説明しています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#x11" title="第6章 X Window System">6章<em>X Window System</em></a></em></span></span></dt><dd><p>X Window System 全般と、特に FreeBSD 上での
	  X11 の利用について述べています。
	  また、<span class="application">KDE</span> や
	  <span class="application">GNOME</span>
	  のような一般的なデスクトップ環境にも触れています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#desktop" title="第7章 デスクトップアプリケーション">7章<em>デスクトップアプリケーション</em></a></em></span></span></dt><dd><p>Web ブラウザや生産性向上ツールのような一般的なデスクトップアプリケーションをいくつか挙げ、
	  FreeBSD におけるインストール方法を説明しています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#multimedia" title="第8章 マルチメディア">8章<em>マルチメディア</em></a></em></span></span></dt><dd><p>システムを音声やビデオ再生に対応させるためにどう設定するかを説明します。
	  また、音声やビデオアプリケーションも例示しています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a></em></span></span></dt><dd><p>どのような場合に新たにカーネルを構成する必要があるかを説明し、
	  カスタムカーネルのコンフィグレーション、構築、
	  インストールについて詳しく説明しています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#printing" title="第10章 プリンタの利用">10章<em>プリンタの利用</em></a></em></span></span></dt><dd><p>FreeBSD におけるプリンタの取り扱いを説明しています。たとえば、
	  バナーページ、プリンターの課金、初期設定といったことです。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#linuxemu" title="第11章 Linux バイナリ互換機能">11章<em>Linux バイナリ互換機能</em></a></em></span></span></dt><dd><p>FreeBSD の <span class="trademark">Linux</span>® バイナリ互換機能を説明しています。また、
	  <span class="application"><span class="trademark">Oracle</span>®</span>,
	  <span class="application"><span class="trademark">Mathematica</span>®</span> といった人気の高い
	  <span class="trademark">Linux</span>® アプリケーションのインストールを詳しく説明しています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#config-tuning" title="第12章 設定とチューニング">12章<em>設定とチューニング</em></a></em></span></span></dt><dd><p>システム管理者が FreeBSD
	  システムを調整して最適な性能を引き出すのに利用できるパラメータについて述べています。
	  また、FreeBSD
	  で利用されている様な設定ファイルとそのありかも解説しています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#boot" title="第13章 FreeBSD の起動のプロセス">13章<em>FreeBSD の起動のプロセス</em></a></em></span></span></dt><dd><p>FreeBSD の起動プロセスを解説し、
	  このプロセスを設定オプションで制御する方法を説明しています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#security" title="第15章 セキュリティ">15章<em>セキュリティ</em></a></em></span></span></dt><dd><p>FreeBSD システムを安全に保つために役立つ
	  Kerberos, IPsec および OpenSSH
	  といった利用可能なさまざまなツールについて説明しています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#disks" title="第16章 ストレージ">16章<em>ストレージ</em></a></em></span></span></dt><dd><p>FreeBSD
	  でストレージメディアやファイルシステムをどう扱うかを説明しています。
	  対象は、物理ディスク、RAID アレイ、
  	  光学およびテープメディア、メモリベースのディスク、
  	  ネットワークファイルシステムなどです。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#l10n" title="第17章 地域化 (localization) - I18N/L10N の利用と設定">17章<em>地域化 (localization) - I18N/L10N の利用と設定</em></a></em></span></span></dt><dd><p>FreeBSD を英語以外の言語で使う方法を説明しています。
	  システムとアプリケーション両方のレベルの地域化を扱っています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#updating-upgrading" title="第18章 FreeBSD のアップデートとアップグレード">18章<em>FreeBSD のアップデートとアップグレード</em></a></em></span></span></dt><dd><p>FreeBSD-STABLE, FreeBSD-CURRENT と FreeBSD
	  のリリースの違いを説明します。
	  どんなユーザにとって開発システムを追随するのが有用かを述べ、
	  その方法の概要をまとめています。
	  システムを最新のセキュリティリリースへアップデートする方法についても説明しています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#serialcomms" title="第19章 シリアル通信">19章<em>シリアル通信</em></a></em></span></span></dt><dd><p>FreeBSD システムに端末やモデムを、
	  ダイヤルインまたはダイヤルアウト用に接続する方法を説明しています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#ppp-and-slip" title="第20章 PPP と SLIP">20章<em>PPP と SLIP</em></a></em></span></span></dt><dd><p>FreeBSD で、PPP
	  を使ってリモートシステムに接続する方法を説明しています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#mail" title="第21章 電子メール">21章<em>電子メール</em></a></em></span></span></dt><dd><p>電子メールサーバの構成要素をそれぞれ説明し、
	  最もよく使われているメールサーバソフトウェアである
	  <span class="application">sendmail</span> について、
	  単純な設定をとりあげています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#advanced-networking" title="第22章 高度なネットワーク">22章<em>高度なネットワーク</em></a></em></span></span></dt><dd><p>LAN 上の他のコンピュータとインターネット接続の共有、
	  高度なルーティングに関するトピックス、ワイヤレスネットワーク、
	  <span class="trademark">Bluetooth</span>®, ATM, IPv6 等々、
	  ネットワークに関するさまざまな話題を取り扱っています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#mirrors" title="付録A FreeBSD の入手方法">付録A <em>FreeBSD の入手方法</em></a></em></span></span></dt><dd><p>FreeBSD を収録した CDROM や DVD の様々な入手先や、FreeBSD
	  をダウンロードしてインストールできるインターネット上のサイトを挙げています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#bibliography" title="付録B 参考図書">付録B <em>参考図書</em></a></em></span></span></dt><dd><p>この文書は、
	  もっと詳しい説明が欲しくなるかもしれないさまざまな題目について触れています。
	  参考図書には、このハンドブックで参照している、
	  多くの素晴らしい本が挙げられています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#eresources" title="付録C インターネット上のリソース">付録C <em>インターネット上のリソース</em></a></em></span></span></dt><dd><p>FreeBSD ユーザが FreeBSD について質問したり、
	  技術的な議論に参加できる、
	  多くの公開された場について説明しています。</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#pgpkeys" title="付録D PGP 公開鍵">付録D <em><acronym class="acronym">PGP</acronym> 公開鍵</em></a></em></span></span></dt><dd><p>多くの FreeBSD 開発者の PGP fingerprint を載せています。</p></dd></dl></div><h2 class="title"><a id="preface-conv"></a>この文書で用いられている表記法</h2><p>一貫して読みやすい文章を提供するために、
      この文書全体では以下の表記法が用いられています。</p><h3 class="title"><a id="preface-conv-typographic"></a>書体による表記</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>イタリック体</em></span></span></dt><dd><p><span class="emphasis"><em>イタリック体</em></span> のフォントは、ファイル名、URL,
	  強調表現、技術用語の最初の使用を表すのに使われています。</p></dd><dt><span class="term"><code class="literal">等幅</code></span></dt><dd><p><code class="literal">等幅</code>フォントは、エラーメッセージ、
	  コマンド、環境変数、ports の名称、ホスト名、ユーザ名、
	  グループ名、デバイスの名称、変数、
	  コードの断片を表すのに使われています。</p></dd><dt><span class="term"><span class="application">太字</span></span></dt><dd><p><span class="application">太字</span>のフォントは、
	  アプリケーション、コマンド、キーを表すのに使われています。</p></dd></dl></div><h3 class="title"><a id="preface-conv-commands"></a>ユーザー入力</h3><p>文章の他の部分と区別するため、
    キーは<span class="keycap"><strong>太字</strong></span>で示されています。
    同時に押すことを意図したキーの組み合わせは、キーの間に
    `<code class="literal">+</code>' を入れて表されます。たとえば</p><p>
    <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Del</strong></span></p><p>は、ユーザーが <span class="keycap"><strong>Ctrl</strong></span>,
    <span class="keycap"><strong>Alt</strong></span> それから <span class="keycap"><strong>Del</strong></span>
    キーを同時に押すことを意図しています。</p><p>順に押すことを意図したキーは、カンマで区切って表されます。
    たとえば</p><p>
    <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>X</strong></span>,
    <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>S</strong></span></p><p>は、ユーザーが
    <span class="keycap"><strong>Ctrl</strong></span> キーと <span class="keycap"><strong>X</strong></span> キーを同時に押してから、
    <span class="keycap"><strong>Ctrl</strong></span> キーと <span class="keycap"><strong>S</strong></span>
    キーを同時に押すことを意図しています。</p><h3 class="title"><a id="preface-conv-examples"></a>例</h3><p><code class="filename">C:\&gt;</code> で始まる例は、<span class="trademark">MS-DOS</span>®
    コマンドを表しています。特に注釈がなければ、それらのコマンドは最近の
    <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® の <span class="quote">「<span class="quote">コマンドプロンプト</span>」</span>
    環境でも実行できます。</p><pre class="screen"><code class="prompt">E:\&gt;</code> <strong class="userinput"><code>tools\fdimage floppies\kern.flp A:</code></strong></pre><p><code class="prompt">#</code> で始まる例は、FreeBSD
    上でスーパーユーザ権限で実行しなければならないコマンドを示しています。
    そのコマンドを入力するには、
    <code class="systemitem">root</code> としてログインするか、
    通常のアカウントでログインして、スーパーユーザ権限を取得するために
    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> を使います。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=kern.flp of=/dev/fd0</code></strong></pre><p><code class="prompt">%</code> で始まる例は、
    通常のユーザアカウントで実行するべきコマンドを示しています。
    特に断りのない限り、環境変数の設定やその他のシェルコマンドには
    C シェルの文法が使われています。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>top</code></strong></pre><h2 class="title"><a id="preface-acknowledgements"></a>謝辞</h2><p>あなたが手にしている文書は、
    世界中の何百人もの人々の努力の賜物です。
    誤字脱字の修正を送ったのか、文章を丸々投稿したのかによらず、
    すべての貢献が役に立ちました。</p><p>多くの会社が、
    著者らを雇用してフルタイムでこの文書に取り掛かれるようにしたり、
    出版費用を出したりして、この文書を作り上げるのを援助してくれました。
    特に、BSDi (その後
    <a class="link" href="http://www.windriver.com" target="_top">Wind River
      Systems</a> に買収されました)
    は、フルタイムでこの文書の改善作業をするように
    FreeBSD ドキュメンテーションプロジェクトのメンバーを雇用し、それが
    2000 年 3 月の最初の出版 (ISBN 1-57176-241-8) につながりました。
    その後、Wind River Systems は、印刷出力の仕組みを整備し、
    章を追加するために著者を何名か追加で雇用してくれました。この作業は、
    2001 年 11 月の第 2 版の出版 (ISBN 1-57176-303-1) に結実しました。
    2003-2004 年には、ハンドブック第 3 版の出版準備のために <a class="link" href="http://www.freebsdmall.com" target="_top">FreeBSD Mall, Inc</a>
    が貢献者を雇用してくれました。</p></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="getting-started"></a>パート〓I.〓導入</h1></div></div></div><div class="partintro"><div xmlns=""></div><p>FreeBSD ハンドブックの第 1 部はユーザと
	FreeBSD が初めての管理者向けです。各章の内容は以下のとおりです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD の紹介</p></li><li class="listitem"><p>インストールの手順の解説</p></li><li class="listitem"><p><span class="trademark">UNIX</span>® の基礎</p></li><li class="listitem"><p>FreeBSD で利用できる豊富なサードパーティ製のアプリケーションの
	    インストール方法</p></li><li class="listitem"><p><span class="trademark">UNIX</span>® におけるウィンドウシステム X、
	    およびクリエイティブなデスクトップ環境の設定の詳細の紹介</p></li></ul></div><p>このハンドブックでは頻繁にページを飛すことなく前から後へと
	スムーズに読み進めるように、
	後方への参照を極力抑えるようにしています。</p><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="chapter"><a href="#introduction">1. はじめに</a></span></dt><dd><dl><dt><span class="sect1"><a href="#introduction-synopsis">1.1. この章では</a></span></dt><dt><span class="sect1"><a href="#nutshell">1.2. FreeBSD へようこそ!</a></span></dt><dt><span class="sect1"><a href="#history">1.3. FreeBSD プロジェクトについて</a></span></dt></dl></dd><dt><span class="chapter"><a href="#bsdinstall">2. FreeBSD のインストール (9.<em class="replaceable"><code>X</code></em> 以降の場合)</a></span></dt><dd><dl><dt><span class="sect1"><a href="#bsdinstall-synopsis">2.1. この章では</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-hardware">2.2. 最小ハードウェア要件</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-pre">2.3. インストール前に行う作業</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-start">2.4. インストールの開始</a></span></dt><dt><span class="sect1"><a href="#using-bsdinstall">2.5. <span class="application">bsdinstall</span> の使用</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-partitioning">2.6. ディスク領域の割り当て</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-final-warning">2.7. インストール操作の確定</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-post">2.8. インストール後の作業</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-install-trouble">2.9. トラブルシューティング</a></span></dt><dt><span class="sect1"><a href="#using-live-cd">2.10. Live <acronym class="acronym">CD</acronym> を使う</a></span></dt></dl></dd><dt><span class="chapter"><a href="#install">3. FreeBSD 8.<em class="replaceable"><code>X</code></em> のインストール</a></span></dt><dd><dl><dt><span class="sect1"><a href="#install-synopsis">3.1. この章では</a></span></dt><dt><span class="sect1"><a href="#install-hardware">3.2. ハードウェア要件</a></span></dt><dt><span class="sect1"><a href="#install-pre">3.3. インストール前に行う作業</a></span></dt><dt><span class="sect1"><a href="#install-start">3.4. インストールの開始</a></span></dt><dt><span class="sect1"><a href="#using-sysinstall">3.5. sysinstall(8) の紹介</a></span></dt><dt><span class="sect1"><a href="#install-steps">3.6. ディスク領域の割り当て</a></span></dt><dt><span class="sect1"><a href="#install-choosing">3.7. 何をインストールするか選択する</a></span></dt><dt><span class="sect1"><a href="#install-media">3.8. インストールメディアの選択</a></span></dt><dt><span class="sect1"><a href="#install-final-warning">3.9. インストール操作の確定</a></span></dt><dt><span class="sect1"><a href="#install-post">3.10. インストール後の作業</a></span></dt><dt><span class="sect1"><a href="#install-trouble">3.11. トラブルシューティング</a></span></dt><dt><span class="sect1"><a href="#install-advanced">3.12. 高度なインストールガイド</a></span></dt><dt><span class="sect1"><a href="#install-diff-media">3.13. カスタムインストールメディアの準備</a></span></dt></dl></dd><dt><span class="chapter"><a href="#basics">4. UNIX の基礎知識</a></span></dt><dd><dl><dt><span class="sect1"><a href="#basics-synopsis">4.1. この章では</a></span></dt><dt><span class="sect1"><a href="#consoles">4.2. 仮想コンソールと端末</a></span></dt><dt><span class="sect1"><a href="#permissions">4.3. 許可属性</a></span></dt><dt><span class="sect1"><a href="#dirstructure">4.4. ディレクトリ構造</a></span></dt><dt><span class="sect1"><a href="#disk-organization">4.5. ディスク構成</a></span></dt><dt><span class="sect1"><a href="#mount-unmount">4.6. ファイルシステムのマウントとアンマウント</a></span></dt><dt><span class="sect1"><a href="#basics-processes">4.7. プロセス</a></span></dt><dt><span class="sect1"><a href="#basics-daemons">4.8. デーモン、シグナルとプロセス終了</a></span></dt><dt><span class="sect1"><a href="#shells">4.9. シェル</a></span></dt><dt><span class="sect1"><a href="#editors">4.10. テキストエディタ</a></span></dt><dt><span class="sect1"><a href="#basics-devices">4.11. デバイスとデバイスノード</a></span></dt><dt><span class="sect1"><a href="#basics-more-information">4.12. さらに詳しい情報を得るには...</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ports">5. アプリケーションのインストール - packages と ports</a></span></dt><dd><dl><dt><span class="sect1"><a href="#ports-synopsis">5.1. この章では</a></span></dt><dt><span class="sect1"><a href="#ports-overview">5.2. ソフトウェアのインストール</a></span></dt><dt><span class="sect1"><a href="#ports-finding-applications">5.3. ソフトウェアの探し方</a></span></dt><dt><span class="sect1"><a href="#pkgng-intro">5.4. <span class="application">pkg</span> によるバイナリ
      package の管理</a></span></dt><dt><span class="sect1"><a href="#ports-using">5.5. Ports Collection の利用</a></span></dt><dt><span class="sect1"><a href="#ports-poudriere">5.6. <span class="application">Poudriere</span> を用いた
      package の構築</a></span></dt><dt><span class="sect1"><a href="#ports-nextsteps">5.7. インストール後の作業</a></span></dt><dt><span class="sect1"><a href="#ports-broken">5.8. うまく動作しない ports に遭遇した場合には</a></span></dt></dl></dd><dt><span class="chapter"><a href="#x11">6. X Window System</a></span></dt><dd><dl><dt><span class="sect1"><a href="#x11-synopsis">6.1. この章では</a></span></dt><dt><span class="sect1"><a href="#x-understanding">6.2. 用語の説明</a></span></dt><dt><span class="sect1"><a href="#x-install">6.3. X11 のインストール</a></span></dt><dt><span class="sect1"><a href="#x-config">6.4. X11 の設定</a></span></dt><dt><span class="sect1"><a href="#x-fonts">6.5. X11 でのフォントの使用</a></span></dt><dt><span class="sect1"><a href="#x-xdm">6.6. X ディスプレイマネージャ</a></span></dt><dt><span class="sect1"><a href="#x11-wm">6.7. デスクトップ環境</a></span></dt></dl></dd></dl></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="introduction"></a>第1章 はじめに</h2></div><div><span class="authorgroup">再構成、部分的な改訂: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Mock</span> <span class="firstname">Jim</span> [FAMILY Given]</span>. </span></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#introduction-synopsis">1.1. この章では</a></span></dt><dt><span class="sect1"><a href="#nutshell">1.2. FreeBSD へようこそ!</a></span></dt><dt><span class="sect1"><a href="#history">1.3. FreeBSD プロジェクトについて</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="introduction-synopsis"></a>1.1. この章では</h2></div></div></div><p>FreeBSD に興味を持っていただきありがとうございます!
      この章では FreeBSD の歴史、目標、開発モデルなど、
      FreeBSD プロジェクトに関するさまざまな事柄を扱います。</p><p>この章に書かれている話題は、次のようなものです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD とその他のオペレーティングシステムとの違い</p></li><li class="listitem"><p>FreeBSD プロジェクトの歴史</p></li><li class="listitem"><p>FreeBSD プロジェクトの目標</p></li><li class="listitem"><p>FreeBSD オープンソース開発モデルの基本的な考え方</p></li><li class="listitem"><p>そして、<span class="quote">「<span class="quote">FreeBSD</span>」</span> という名前の由来について</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="nutshell"></a>1.2. FreeBSD へようこそ!</h2></div></div></div><a id="idp74915792" class="indexterm"></a><p>FreeBSD は、4.4BSD-Lite
      から派生したオペレーティングシステムで、
      Intel (x86 および <span class="trademark">Itanium</span>®), AMD64,
      Sun <span class="trademark">UltraSPARC</span>® コンピュータに対応しています。
      他のアーキテクチャに対する移植も進行中です。
      <a class="link" href="#history" title="1.3. FreeBSD プロジェクトについて">FreeBSD の歴史</a>や、
      <a class="link" href="#relnotes" title="1.3.4. サードパーティ製プログラム">現在のリリースについて</a>も読むことができます。
      プロジェクトへの何らかの貢献 (ソースコード、ハードウェア、
      資金の提供など) について興味があれば、
      <a class="link" href="../../../../doc/ja_JP.eucJP/articles/contributing/index.html" target="_top">FreeBSD
	への貢献</a>をご覧ください。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="os-overview"></a>1.2.1. FreeBSD で何ができるの?</h3></div></div></div><p>FreeBSD には多くの注目すべき機能があります。
	例を挙げれば以下のようになります:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>優先度を動的に調節する機能を備えることで
	    アプリケーションとユーザとの間で円滑かつ公平な
	    コンピュータ資源共有を実現し、
	    特に高い負荷にも耐えることができる堅牢さを備えた
	    <span class="emphasis"><em>プリエンプティブマルチタスキング</em></span><a id="idp74943824" class="indexterm"></a>。</p></li><li class="listitem"><p>多くの人々が 1 つの FreeBSD
	    システムをさまざまな目的で同時に使うことを可能にする
	    <span class="emphasis"><em>マルチユーザ機能</em></span><a id="idp74952912" class="indexterm"></a>。
	    これは例えば、プリンタやテープデバイスといったシステムの周辺機器が、
	    そのシステムを利用する全てのユーザだけでなく
	    ネットワーク経由においても自然な形で共有され、
	    さらに重要なシステム資源の使い過ぎを防ぐために
	    個々の資源に対する制限がユーザ単位、
	    グループ単位で設定できる、というようなことを意味しています。
	  </p></li><li class="listitem"><p>SCTP や DHCP, NFS, NIS, PPP, SLIP, IPsec, IPv6
	    といった業界標準規格のサポートを含んだ堅固な
	    <span class="emphasis"><em>TCP/IP ネットワーキング</em></span><a id="idp74957648" class="indexterm"></a>。これによって、FreeBSD
	    マシンが商用サーバと同じように相互に運用でき、
	    NFS (リモートファイルアクセス) や、
	    電子メールサービスのような極めて重要な機能を提供します。
	    また、WWW や FTP, ルーティング、ファイアウォール (セキュリティ)
	    サービスを用いてインターネットと接続できます。</p></li><li class="listitem"><p>アプリケーション (あるいはユーザ) がお互いに干渉できない
	    ようにする<span class="emphasis"><em>メモリ保護</em></span><a id="idp74961104" class="indexterm"></a>機能。
	    アプリケーションがクラッシュしても、
	    どのような場合でも他のアプリケーションには影響を与えません。</p></li><li class="listitem"><p>業界標準である <span class="emphasis"><em>X Window
	    システム</em></span><a id="idp74965328" class="indexterm"></a> (X11R7) は、普通の
	    VGA カードやモニタでグラフィカルユーザインタフェース (GUI)
	    を提供し、すべてのソースコードも一緒に提供されます。</p></li><li class="listitem"><p>
	    <a id="idp74981712" class="indexterm"></a>
	    <a id="idp74984912" class="indexterm"></a>
	    <a id="idp74987472" class="indexterm"></a>
	    <a id="idp74990288" class="indexterm"></a>
	    <a id="idp74993360" class="indexterm"></a>
	    Linux や SCO, SVR4, BSDI, NetBSD
	    用に作られた多くのプログラムとの
	    <span class="emphasis"><em>バイナリ互換性</em></span>。</p></li><li class="listitem"><p>何千もの<span class="emphasis"><em>すぐに実行可能な</em></span>
	    アプリケーションが FreeBSD の <span class="emphasis"><em>ports</em></span> や
	    <span class="emphasis"><em>packages</em></span> コレクションで利用可能です。
	    ここに用意されているものはネットを探し回る必要がありません</p></li><li class="listitem"><p>インターネット上で入手可能な、
	    <span class="emphasis"><em>移植が容易な</em></span>
	    何千ものアプリケーションを追加できます。FreeBSD
	    は最も評判のよい商用の <span class="trademark">UNIX</span>®
	    システムとソースコードレベルで互換性があります。
	    このため、ほとんどのアプリケーションは、
	    もしあったとしてもほんの少しの変更でコンパイルすることができます。</p></li><li class="listitem"><p>デマンドページング<span class="emphasis"><em>仮想メモリ</em></span><a id="idp75019472" class="indexterm"></a> とそれに <span class="quote">「<span class="quote">付随の VM/buffer キャッシュ</span>」</span>
	    の設計は、
	    多くのメモリを要求するアプリケーションに対して
	    効率よくメモリを与えるようにする一方で、
	    他のユーザに対しても対話的な応答を維持します。</p></li><li class="listitem"><p>複数の CPU を搭載したマシンにおける
	    <span class="emphasis"><em>SMP</em></span><a id="idp75026512" class="indexterm"></a>のサポート。</p></li><li class="listitem"><p>
	    <a id="idp75030608" class="indexterm"></a>
	    <a id="idp75033424" class="indexterm"></a>
	    完全な <span class="emphasis"><em>C</em></span> や <span class="emphasis"><em>C++</em></span>
	    の開発ツール。進んだ研究や開発のための多くの他の言語も
	    ports や packages コレクションで提供されています。</p></li><li class="listitem"><p>システム全体の<span class="emphasis"><em>ソースコード</em></span><a id="idp75040080" class="indexterm"></a>が提供されているので、
	    要求に合わせて環境を最大限に適合させることができます。
	    真のオープンシステムが利用できるのですから、
	    所有権のある解決方法に締めつけられ、
	    ベンダのなすがままになる必要はありません。</p></li><li class="listitem"><p>膨大な量の
	    <span class="emphasis"><em>オンラインドキュメント</em></span>。</p></li><li class="listitem"><p><span class="emphasis"><em>もう書ききれません!</em></span></p></li></ul></div><p>FreeBSD はカリフォルニア大学バークレイ校の Computer Systems
	Research Group (CSRG)<a id="idp75056592" class="indexterm"></a>
	による 4.4BSD-Lite<a id="idp75058128" class="indexterm"></a> リリースを基にしており、
	BSD システムの開発の優れた伝統を守り続けています。
	CSRG による素晴らしい活動に加えて、
	FreeBSD プロジェクトは何千時間もの時間を注ぎ込んで、
	実際の使用の場において最大の性能と信頼性を
	発揮するためにシステムのチューニングをおこなっています。
	多くの大企業が PC オペレーティングシステムの分野で
	実現しようと奮闘しているそのような機能や性能、信頼性を
	FreeBSD は<span class="emphasis"><em>今すぐ</em></span>提供できます!</p><p>あなたの思いつく限りのアプリケーションは、何でも FreeBSD
	で実行できます。ソフトウェア開発からファクトリオートメーション、
	在庫制御から遠く離れた人工衛星のアンテナの方向調整まで;
	商用 <span class="trademark">UNIX</span>® 製品でできることは、FreeBSD でも十分にできるのです!
	また、FreeBSD は世界中の研究センターや大学によって開発される
	文字通り何千もの高品質で、たいていはほとんど無料で利用できる
	アプリケーションによる恩恵を得ることができます。
	商用のアプリケーションも提供されており、
	日々増え続けています。</p><p>FreeBSD のソースコードは広く提供されているので、
	システムも特別なアプリケーションやプロジェクトに合わせて、
	いくらでもカスタマイズすることができます。
	これは有名な商業ベンダから出ているほとんどのオペレーティング
	システムでは不可能なことです。以下に現在 FreeBSD を
	使っている人々のアプリケーションの例をいくつか上げます:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>インターネットサービス:</em></span>
	    FreeBSD に組み込まれている 頑強な TCP/IP
	    ネットワーキング機能は次のようなさまざまな
	    インターネットサービスの理想的なプラットフォームになります:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>FTP サーバ<a id="idp75068752" class="indexterm"></a></p></li><li class="listitem"><p>World Wide Web サーバ<a id="idp75072464" class="indexterm"></a>
		(標準、もしくは安全な [SSL])</p></li><li class="listitem"><p>IPv4 および IPv6 ルーティング</p></li><li class="listitem"><p>ファイアウォール<a id="idp75078352" class="indexterm"></a>と NAT<a id="idp75080528" class="indexterm"></a>
		(<span class="quote">「<span class="quote">IP マスカレード</span>」</span>) ゲートウェイ</p></li><li class="listitem"><p>
		<a id="idp75100624" class="indexterm"></a>
		<a id="idp75103312" class="indexterm"></a>
	      電子メールサーバ</p></li><li class="listitem"><p>USENET<a id="idp75107408" class="indexterm"></a> ニュースおよび電子掲示板システム
	      </p></li><li class="listitem"><p>さらにいろいろ…</p></li></ul></div><p>FreeBSD を利用すれば、小規模で安価な 386 クラスの
	    PC でも気軽に導入することができますし、
	    事業の成長に合わせてアップグレードした
	    4 つの Xeon プロセッサと
	    RAID ストレージデバイスを備えたシステムでも、
	    全くそのまま使うことができるのです。</p></li><li class="listitem"><p><span class="emphasis"><em>教育:</em></span>
	    あなたは、計算機科学または関連分野の工学を専攻する学生さんですか?
	    オペレーティングシステムやコンピュータアーキテクチャ、
	    ネットワークについて学習するなら、
	    実際に FreeBSD のソースコードを読んで、
	    それがどのように動作するのかを学ぶのが一番よい方法です。
	    また、無料で利用できる CAD や数学、
	    グラフィックデザインのパッケージがいくつもあるので、
	    コンピュータに関わる主要な目的が、
	    <span class="emphasis"><em>他</em></span>のことをすることにある方にも、
	    大いに役立ちます。</p></li><li class="listitem"><p><span class="emphasis"><em>研究:</em></span>
	    システム全体のソースコードが利用できるため、
	    FreeBSD はオペレーティングシステムの研究だけでなく、
	    計算機科学の他の部門においても優れたプラットフォームです。
	    自由に利用できる FreeBSD の特長は、オープンフォーラムで
	    議論される特別なライセンスの同意や制限について心配することなく、
	    離れたグループでもアイディアや開発の共有による共同研究を可能にします。</p></li><li class="listitem"><p><span class="emphasis"><em>ネットワーキング:</em></span>
	    新しいルータ<a id="idp75120336" class="indexterm"></a>が必要? ネームサーバ (DNS)<a id="idp75122640" class="indexterm"></a> は?
	    内部のネットワークを人々から守るファイアウォールは?
	    FreeBSD はすみに眠っている使われていない 386 や 486 の PC を簡単に
	    洗練されたパケットフィルタリング機能を持つ高級なルータに
	    変えることができます。</p></li><li class="listitem"><p>
	    <a id="idp75126608" class="indexterm"></a>
	    <a id="idp75128272" class="indexterm"></a>
	    <span class="emphasis"><em>X Window ワークステーション:</em></span>
	    自由に利用できる X11 サーバを使うことによって、
	    安価な X 端末として FreeBSD を使うこともできます。
	    X 端末とは違って FreeBSD
	    は多くのアプリケーションをローカルに走らせることもでき、
	    中心のサーバの負荷を軽減することも可能です。
	    FreeBSD は<span class="quote">「<span class="quote">ディスクレス</span>」</span>でもブート可能であり、
	    個々のワークステーションを安価で、
	    容易に管理することさえ可能にします。</p></li><li class="listitem"><p><span class="emphasis"><em>ソフトウェア開発:</em></span>
	    基本的な FreeBSD システムには、有名な GNU の
	    C/C++<a id="idp75143632" class="indexterm"></a>
	    コンパイラやデバッガを含んだ完全な開発ツールがついてきます。</p></li></ul></div><p>FreeBSD は、ソースとバイナリの両方とも、CD-ROM または
	anonymous FTP で入手可能です。
	詳しくは <a class="xref" href="#mirrors" title="付録A FreeBSD の入手方法">付録A <em>FreeBSD の入手方法</em></a> をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="introduction-nutshell-users"></a>1.2.2. FreeBSD はどこに使われていますか?</h3></div></div></div><a id="idp75150928" class="indexterm"></a><p>FreeBSD は、以下に代表されるような世界最大クラスの
	IT 会社のデバイスおよび製品のプラットフォームとして利用されています。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.apple.com/" target="_top">Apple</a><a id="idp75157328" class="indexterm"></a></p></li><li class="listitem"><p><a class="link" href="http://www.cisco.com/" target="_top">Cisco</a><a id="idp75170512" class="indexterm"></a></p></li><li class="listitem"><p><a class="link" href="http://www.juniper.net/" target="_top">Juniper</a></p></li><li class="listitem"><p><a class="link" href="http://www.netapp.com/" target="_top">NetApp</a><a id="idp75183952" class="indexterm"></a></p></li></ul></div><p>FreeBSD は、以下のサイトに代表されるような、
	インターネット上で最大クラスのサイトでも利用されています。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.yahoo.com/" target="_top">Yahoo!</a><a id="idp75189712" class="indexterm"></a></p></li><li class="listitem"><p><a class="link" href="http://www.yandex.ru/" target="_top">Yandex</a><a id="idp75193936" class="indexterm"></a></p></li><li class="listitem"><p><a class="link" href="http://www.apache.org/" target="_top">Apache</a><a id="idp75197264" class="indexterm"></a></p></li><li class="listitem"><p><a class="link" href="http://www.rambler.ru/" target="_top">Rambler</a><a id="idp75204176" class="indexterm"></a></p></li><li class="listitem"><p><a class="link" href="http://www.sina.com/" target="_top">Sina</a><a id="idp75208144" class="indexterm"></a></p></li><li class="listitem"><p><a class="link" href="http://www.pair.com/" target="_top">Pair
	      Networks</a><a id="idp75220560" class="indexterm"></a></p></li><li class="listitem"><p><a class="link" href="http://www.sony.co.jp/" target="_top">Sony
	      Japan</a><a id="idp75224016" class="indexterm"></a></p></li><li class="listitem"><p><a class="link" href="http://www.netcraft.com/" target="_top">Netcraft</a><a id="idp75227728" class="indexterm"></a></p></li><li class="listitem"><p><a class="link" href="https://signup.netflix.com/openconnect" target="_top">Netflix</a>
	    <a id="idp75231952" class="indexterm"></a></p></li><li class="listitem"><p><a class="link" href="http://www.163.com/" target="_top">NetEase</a><a id="idp75235408" class="indexterm"></a></p></li><li class="listitem"><p><a class="link" href="http://www.weathernews.com/" target="_top">Weathernews</a><a id="idp75239504" class="indexterm"></a></p></li><li class="listitem"><p><a class="link" href="http://www.telehouse.com/" target="_top">TELEHOUSE
	      America</a><a id="idp75243856" class="indexterm"></a></p></li><li class="listitem"><p><a class="link" href="http://www.experts-exchange.com/" target="_top">Experts
	      Exchange</a><a id="idp75250640" class="indexterm"></a></p></li></ul></div><p>また、この他にもあります。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="history"></a>1.3. FreeBSD プロジェクトについて</h2></div></div></div><p>以下の節では簡単な歴史やプロジェクトの目標、
      開発モデルなど、普段は表にでない話題を提供しています。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="intro-history"></a>1.3.1. FreeBSD 小史</h3></div></div></div><a id="idp75273552" class="indexterm"></a><a id="idp75274960" class="indexterm"></a><a id="idp75276112" class="indexterm"></a><a id="idp75277648" class="indexterm"></a><a id="idp75278672" class="indexterm"></a><p>FreeBSD プロジェクトは 1993 年の始めに Unofficial
	386BSD Patchkit の最後の 3 人のまとめ役によって、部分的に
	patchkit から派生する形で開始されました。ここでの
	3 人のまとめ役というのは、Nate Williams, Rod Grimes と、
	Jordan Hubbard です。</p><a id="idp75281744" class="indexterm"></a><p>このプロジェクトのもともとの目標は、patchkit
	という仕組みではもう十分に解決できなくなってしまった 386BSD
	の数多くの問題を修正するための、386BSD
	の暫定的なスナップショットを作成することでした。
	こういった経緯を経ているので、
	このプロジェクトの初期の頃の名前は 386BSD 0.5 や
	386BSD 暫定版 (Interim)	でした。</p><a id="idp75283408" class="indexterm"></a><p>386BSD は、Bill Jolitz が (訳注: バークレイ Net/2
	テープを基に) 作成したオペレーティングシステムです。当時の
	386BSD は、ほぼ一年にわたって放っておかれていた (訳注:
	作者がバグの報告を受けても何もしなかった)
	というひどい状況に苦しんでいました。
	作者の代わりに問題を修正し続けていた  patchkit
	は日を追うごとに不快なまでに膨張してしまっていました。
	このような状況に対して、彼らは暫定的な
	<span class="quote">「<span class="quote">クリーンアップ</span>」</span> スナップショットを作成することで
	Bill を手助けしようと決めました。しかし、
	この計画は唐突に終了してしまいました。Bill Jolitz が、
	このプロジェクトに対する受け入れ支持を取り下げることを突然決意し、
	なおかつこのプロジェクトの代わりに何をするのかを一切言明しなかったのです。</p><a id="idp75286736" class="indexterm"></a><a id="idp75288272" class="indexterm"></a><p>たとえ Bill が支持してくれないとしても、
	彼ら 3 人の目標には依然としてやる価値があると考えていたため、
	David Greenman が考案した名称 <span class="quote">「<span class="quote">FreeBSD</span>」</span>
	をプロジェクトの名前に採用し、新たなスタートを切りました。
	この時点でのプロジェクトの初期目標は、すでにこのシステム
	(訳注: 386BSD + Patchkit)
	を使っていた利用者たちと相談して決められました。
	プロジェクトが実現に向けて軌道に乗ってきたことが明確になった時点で、
	Jordan は Walnut Creek CDROM
	社に連絡してみました。CD-ROM を使って FreeBSD
	を配布することによって、
	インターネットに容易に接続できない多くの人々が FreeBSD
	を簡単に入手できるようになると考えたからです。Walnut Creek
	CDROM 社は FreeBSD を CD
	で配布するというアイデアを採用してくれたばかりか、
	作業するためのマシンと高速なインターネット回線をプロジェクトに提供してくれました。
	当時は海のものとも山のものともわからなかったこのプロジェクトに対して、Walnut
	Creek CDROM 社が信じられないほどの信頼を寄せてくれたおかげで、
	FreeBSD は短期間のうちにここまで大きく成長したのです。</p><a id="idp75291472" class="indexterm"></a><a id="idp75292368" class="indexterm"></a><a id="idp75293520" class="indexterm"></a><a id="idp75294928" class="indexterm"></a><a id="idp75296080" class="indexterm"></a><p>CD-ROM による最初の配布 (そしてネットでの、
	ベータ版ではない最初の一般向け配布) は FreeBSD 1.0 で、1993 年
	12 月に公開されました。これはカリフォルニア大学バークレイ校の
	4.3BSD-Lite (<span class="quote">「<span class="quote">Net/2</span>」</span>) を基とし、386BSD や  Free
	Software Foundation からも多くの部分を取り入れたものです。
	これは初めて公開したものとしては十分に成功しました。続けて 1994 年
	5 月に FreeBSD 1.1 を公開し、
	非常に大きな成功を収めました。</p><a id="idp75307728" class="indexterm"></a><a id="idp75308496" class="indexterm"></a><a id="idp75310032" class="indexterm"></a><a id="idp75311568" class="indexterm"></a><p>この時期、
	あまり予想していなかった嵐が遠くから接近してきていました。
	バークレイ Net/2 テープの法的な位置づけについて、Novell
	社とカリフォルニア大学バークレイ校との間の長期にわたる
	法廷論争において和解が成立したのです。和解の内容は、Net/2
	のかなりの部分が <span class="quote">「<span class="quote">権利つき (encumbered)</span>」</span>
	コードであり、それは Novell 社の所有物である、
	というバークレイ校側が譲歩したものでした。なお、Novell
	社はこれらの権利を裁判が始まる少し前に  AT&amp;T
	社から買収していました。
	和解における譲歩の見返りにバークレイ校が得たのは、
	4.4BSD-Lite が最終的に発表された時点で、
	4.4BSD-Lite は権利つきではないと公式に宣言されること、
	そしてすべての既存の Net/2 の利用者が 4.4BSD-Lite
	の利用へと移行することが強く奨励されること、という Novell
	社からの <span class="quote">「<span class="quote">ありがたき天からの恵み</span>」</span> でした (訳注:
	4.4BSD-Lite はその後 Novell
	社のチェックを受けてから公開された)。FreeBSD も Net/2
	を利用していましたから、1994 年の 7 月の終わりまでに Net/2 ベースの
	FreeBSD の出荷を停止するように言われました。ただし、
	このときの合意によって、
	私たちは締め切りまでに一回だけ最後の公開をすることを許されました。
	そしてそれは FreeBSD 1.1.5.1 となりました。</p><p>それから FreeBSD プロジェクトは、まっさらでかなり不完全な
	4.4BSD-Lite を基に、文字どおり一から再度作り直すという、
	難しくて大変な作業の準備を始めました。<span class="quote">「<span class="quote">Lite</span>」</span>
	バージョンは、部分的には本当に軽くて、中身がなかったのです。
	起動し、
	動作できるシステムを実際に作り上げるために必要となるプログラムコードのかなりの部分がバークレイ校の
	CSRG (訳注: BSDを作っているグループ) によって
	(いろいろな法的要求のせいで)
	削除されてしまっていたということと、4.4BSD の Intel
	アーキテクチャ対応が元々かなり不完全であったということがその理由です。
	この移行作業は結局 1994 年の 11 月までかかりました。
	そしてその時点で FreeBSD 2.0 をネットと
	CD-ROM (12 月末ごろ) を通じて公開しました。これは、
	かなり粗削りなところが残っていたにもかかわらず、
	かなりの成功を収めました。そしてその後に、より信頼性が高く、
	そしてインストールが簡単になった FreeBSD 2.0.5 が 1995 年の
	6 月に公開されました。</p><p>これ以降、FreeBSD の安定性、速さや機能は改善され、
	リリースが行われてきました。</p><p>長期的な開発プロジェクトは 10.X-CURRENT 開発ブランチ
	(トランク) で続けられ、
	10.X のスナップショットリリースは、開発の進行状況に応じて
	<a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/snapshots" target="_top">スナップショットサーバ</a>
	より継続して入手できます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="goals"></a>1.3.2. FreeBSD プロジェクトの目標</h3></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Hubbard</span> <span class="firstname">Jordan</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp75340752" class="indexterm"></a><p>FreeBSD プロジェクトの目的は、いかなる用途にも使用でき、
	何ら制限のないソフトウェアを供給することです。
	私たちの多くは、
	コード (そしてプロジェクト) に対してかなりの投資をしてきており、
	これからも多少の無駄はあっても投資を続けて行くつもりです。ただ、
	他の人達にも同じような負担をするように主張しているわけではありません。
	FreeBSD に興味を持っている一人の残らず全ての人々に、
	目的を限定しないでコードを提供すること。これが、
	私たちの最初のそして最大の <span class="quote">「<span class="quote">任務</span>」</span>
	であると信じています。そうすれば、コードは可能な限り広く使われ、
	最大の恩恵をもたらすことができるでしょう。これが、
	私たちが熱烈に支持しているフリーソフトウェアの最も基本的な目的であると、
	私は信じています。</p><a id="idp75345616" class="indexterm"></a><a id="idp75347920" class="indexterm"></a><a id="idp75349584" class="indexterm"></a><p>私たちのソースツリーに含まれるソースのうち、
	GNU 一般公有使用許諾 (GPL) または GNU ライブラリ一般公有使用許諾 (LGPL)
	に従っているものについては、多少制限が課せられています。ただし、
	ソースコードへのアクセスの保証という、
	一般の制限とはいわば逆の制限 (訳注1) です。
	GPL ソフトウェアの商利用には、そのライセンスにある
	複雑な側面が影響してくることがあります。
	ですから私たちは、そうすることが合理的であると判断されたときには、
	より制限の少ない、BSD
	著作権表示を採用しているソフトウェアを選択するようにしています。</p><p>(訳注1) GPL では、「ソースコードを実際に受け取るか、
	あるいは、希望しさえすればそれを入手することが可能であること」
	を求めています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="development"></a>1.3.3. FreeBSD の開発モデル</h3></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">賢</span> <span class="firstname">浅見</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp75363024" class="indexterm"></a><p>FreeBSD の開発は非常に開かれた、柔軟性のあるプロセスです。
	<a class="link" href="../../../../doc/ja_JP.eucJP/articles/contributors/article.html" target="_top">貢献者リスト
	</a>を見ていただければわかるとおり、
	FreeBSD は文字通り世界中の何百という人々の努力によって開発されています。
	FreeBSD の開発環境は、
	この何百という開発者がインターネット経由で共同作業できるようになっているのです。
	新しい開発者はいつでも大歓迎ですので、<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hackers" target="_top">FreeBSD technical discussions メーリングリスト</a>
	にメールを送ってください。
	<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-announce" target="_top">FreeBSD announcements メーリングリスト</a> もありますので、他の FreeBSD
	ユーザに自分のやっていることを宣伝したい時にはどうぞ使ってください。</p><p>あと、FreeBSD プロジェクトとその開発プロセスについて、
	どなたにも知っていていただきたいのは以下のようなことです。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">SVN リポジトリ<a id="development-cvs-repository"></a></span></dt><dd><p>
	      <a id="idp75388112" class="indexterm"></a>

	      <a id="idp75389904" class="indexterm"></a>

	      <a id="idp75391568" class="indexterm"></a>

	      <a id="idp75394768" class="indexterm"></a>

	      <a id="idp75396688" class="indexterm"></a>

	      <a id="idp75398480" class="indexterm"></a>
	      長年にわたり FreeBSD のソースツリーは
	      <a class="link" href="http://www.nongnu.org/cvs/" target="_top">CVS</a>
	      (Concurrent Versions System) によってメンテナンスされてきました。
	      CVS はソースコード管理用のフリーソフトウェアで、
	      FreeBSD のリリースにも含まれています。
	      2008 年 6 月、プロジェクトはソースコード管理のシステムを <a class="link" href="http://subversion.tigris.org" target="_top">SVN</a>
	      (Subversion) に移行しました。
	      ソースツリーの急速な増加や、
	      これまでに蓄積された膨大な量の履歴によって、
	      <span class="application">CVS</span>
	      の持つ技術的な限界が明かになってきたためです。
	      ドキュメンテーションプロジェクトと
	      Ports Collection リポジトリも、それぞれ
	      2012 年 5 月と 7 月に
	      <span class="application">CVS</span> から
	      <span class="application">SVN</span> へと移行しました。
	      FreeBSD <code class="literal">src/</code> リポジトリを取得するための情報は
	      <a class="link" href="#synching" title="18.5. ソースの同期">
		ソースツリーの同期</a> の章を、FreeBSD
	      Ports Collection を取得するための詳細については
	      <a class="link" href="#ports-using" title="5.5. Ports Collection の利用">Ports Collection の利用</a>
	      の章をご覧ください。</p></dd><dt><span class="term">ソースツリー管理者<a id="development-committers"></a></span></dt><dd><p><em class="firstterm">コミッター (committers)</em><a id="idp75423824" class="indexterm"></a> は
	      Subversion ツリーへの<span class="emphasis"><em>書き込み権限</em></span>を持っている人、
	      FreeBSD のソースに変更を加えることができる人です
	      (リポジトリに変更を加えるには、ソースをコントロールする
	      <code class="command">commit</code> というコマンドを使うので、
	      これらの人々は英語では <span class="quote">「<span class="quote">committers</span>」</span>
	      と呼ばれます)。
	      開発者にコードを送って見てもらうのに一番いい方法は
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a> コマンドを使うことです。
	      もし、何か問題があって <code class="command">send-pr</code>
	      が使えないなら FreeBSD committer's メーリングリスト
	      にメールを送っていただいても構いません。</p></dd><dt><span class="term">FreeBSD コアチーム<a id="development-core"></a></span></dt><dd><p><em class="firstterm">FreeBSD コアチーム</em><a id="idp75443408" class="indexterm"></a>は
	      FreeBSD プロジェクトが会社だとすると取締役会にあたるものです。
	      コアチームとして一番重要な役割は
	      FreeBSD プロジェクトが全体としてよい方向に向かっていることを確認することです。
	      責任感あふれる開発者を上記のソースツリー管理者として招くこと、
	      また仕事上の都合などでコアチームをやめた人たちの後任を見つけることもコアチームの役割です。
	      現在のコアチームは FreeBSD 開発者 (committer) の中から
	      2014 年 7 月に選挙によって選出されました。
	      コアチームを選出するための選挙は、2 年ごとに行なわれています。</p><p>コアチームのうち何人かは特定の担当分野を持っており、
	      システムのうち一部に特に重点をおいて面倒を見ています。
	      FreeBSD 開発者と担当分野の完全なリストは<a class="link" href="../../../../doc/ja_JP.eucJP/articles/contributors/article.html" target="_top">
		コントリビュータのリスト</a>をご覧ください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">忘れてほしくないのは、
		コアチームのほとんどは FreeBSD に対してボランティアの立場であり、
		FreeBSD プロジェクトからは何ら金銭的な支援を受けていない、
		ということです。ですから、
		ここでの<span class="quote">「<span class="quote">責任</span>」</span>は
		<span class="quote">「<span class="quote">保証されたサポート</span>」</span>ではありません。
		そういう意味で、上記の<span class="quote">「<span class="quote">取締役会</span>」</span>
		という例えはあまりよくないかもしれません。むしろ、FreeBSD
		のために人生を棒に振ってしまった人の集まりといった方が正しいかも…。</p></div></dd><dt><span class="term">その他のコントリビュータ</span></dt><dd><p>最後になりますが、
	      もっとも重要で多数をしめる開発者はフィードバックやバグフィクスをどんどん送ってくれるユーザ自身です。
	      FreeBSD の開発に関わっていきたいという人は、
	      議論の場である <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hackers" target="_top">FreeBSD technical discussions メーリングリスト</a> に参加するとよいでしょう。
	      FreeBSD 関連メーリングリストに関する詳細は、
	      <a class="xref" href="#eresources" title="付録C インターネット上のリソース">付録C <em>インターネット上のリソース</em></a> をご覧ください。</p><p><em class="citetitle"><a class="link" href="../../../../doc/ja_JP.eucJP/articles/contributors/article.html" target="_top">
		FreeBSD への貢献者リスト</a></em><a id="idp75463888" class="indexterm"></a>
	      は日に日に長くなっています。
	      あなたも今日、何か送ることからはじめてみませんか?</p><p>もちろん FreeBSD に貢献するには、
	      コードを書くほかにもいろいろな方法があります。
	      助けが求められている分野については、
	      <a class="link" href="../../../../index.html" target="_top">
		FreeBSD プロジェクトのウェブサイト</a>をご覧ください。</p></dd></dl></div><p>ひとことで言うと、FreeBSD
	の開発組織はゆるやかな同心円状になっています。
	ともすると中央集権的に見えがちなこの組織は、
	FreeBSD の<span class="emphasis"><em>ユーザ</em></span>がきちんと管理されたコードベースを
	容易に追いかけられるようにデザインされているもので、
	貢献したいという人を締め出す意図は全くありません!
	私たちの目標は安定したオペレーティングシステムと
	簡単にインストールして使うことのできる
	<a class="link" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">アプリケーション</a>を提供することです。
	この方法は、それを達成するために非常にうまくはたらきます。</p><p>これから FreeBSD の開発にたずさわろうという人に、
	私たちが望むことはただ一つです。
	FreeBSD の成功を継続的なものにするために、
	現在の開発者と同じような情熱を持って接してください!</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="relnotes"></a>1.3.4. サードパーティ製プログラム</h3></div></div></div><p>FreeBSD では基本配布セットに加え、
	移植されたソフトウェア集として数千の人気の高いプログラムを提供しています。
	この文書を書いている時点で 24,000
	以上の ports (移植ソフトウェア) が存在します。
	ports には http サーバから、ゲーム、言語、
	エディタまでありとあらゆるものが含まれています。
	ports はオリジナルソースに対する
	<span class="quote">「<span class="quote">差分</span>」</span>という形で表現されており、
	Ports Collection 全体でも 500 MB 程度にしかなりません。
	ports をコンパイルするには、
	インストールしたいと思っているプログラムのディレクトリに移動し、
	<code class="command">make install</code> とすると、
	あとはすべてシステムがやってくれます。
	どの ports もオリジナルの配布セットを動的に取ってくるので、
	ディスクは構築したいと思っている
	ports の分だけを準備しておけば十分です。
	ほとんどの ports は、すでにコンパイルされた状態で
	<span class="quote">「<span class="quote">package</span>」</span> として提供されており、
	ソースコードからコンパイルしたくない場合、これを使うと
	(<code class="command">pkg install</code>
	というコマンドで) 簡単にインストールできます。
	package と ports に関する詳細は、
	<a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a> をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75490512"></a>1.3.5. ドキュメント</h3></div></div></div><p>最近の FreeBSD では、システムの最初のセットアップ時に、
	インストーラ (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> または
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdinstall</span>(8)</span></a> のどちらでも)
	上で、ドキュメントを <code class="filename">/usr/local/share/doc/freebsd</code>
	以下にインストールすることを選択できます。
	システムのインストール後でも、<a class="xref" href="#doc-ports-install-package" title="18.3.2. ports を用いたドキュメンテーションのアップデート">「ports を用いたドキュメンテーションのアップデート」</a> に記述されている
	package を使うことで、いつでもドキュメントをインストールできます。
	これらのローカルにインストールされたドキュメントは、HTML
	ブラウザを使って以下の URL から参照できます。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">FreeBSD ハンドブック (英文オリジナル)</span></dt><dd><p><a class="link" href="file://localhost/usr/local/share/doc/freebsd/handbook/index.html" target="_top"><code class="filename">/usr/local/share/doc/freebsd/handbook/index.html</code></a></p></dd><dt><span class="term">FreeBSD に関する FAQ (英文オリジナル)</span></dt><dd><p><a class="link" href="file://localhost/usr/local/share/doc/freebsd/faq/index.html" target="_top"><code class="filename">/usr/local/share/doc/freebsd/faq/index.html</code></a></p></dd></dl></div><p>また、
	<code class="uri"><a class="uri" href="http://www.FreeBSD.org/" target="_top">http://www.FreeBSD.org/</a></code>
	にはマスタ (かなり頻繁に更新されます) がありますので、
	こちらも参照してください。</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall"></a>第2章 FreeBSD のインストール (9.<em class="replaceable"><code>X</code></em> 以降の場合)</h2></div><div><span class="authorgroup">再構成、部分的に書き直し: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Mock</span> <span class="firstname">Jim</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">bsdinstall に向けた改訂: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Atkinson</span> <span class="firstname">Gavin</span> [FAMILY Given]</span> 、 <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Block</span> <span class="firstname">Warren</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">root-on-ZFS に向けた改訂: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Jude</span> <span class="firstname">Allan</span> [FAMILY Given]</span>. </span></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#bsdinstall-synopsis">2.1. この章では</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-hardware">2.2. 最小ハードウェア要件</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-pre">2.3. インストール前に行う作業</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-start">2.4. インストールの開始</a></span></dt><dt><span class="sect1"><a href="#using-bsdinstall">2.5. <span class="application">bsdinstall</span> の使用</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-partitioning">2.6. ディスク領域の割り当て</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-final-warning">2.7. インストール操作の確定</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-post">2.8. インストール後の作業</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-install-trouble">2.9. トラブルシューティング</a></span></dt><dt><span class="sect1"><a href="#using-live-cd">2.10. Live <acronym class="acronym">CD</acronym> を使う</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-synopsis"></a>2.1. この章では</h2></div></div></div><a id="idp75566672" class="indexterm"></a><p>FreeBSD 9.0-RELEASE から、
      <span class="application">bsdinstall</span> と呼ばれる、
      テキストベースの使いやすいインストールプログラムが
      FreeBSD に用意されました。
      この章では、<span class="application">bsdinstall</span> の使い方について説明します。
      FreeBSD 8.x で用いられるインストーラ
      <span class="application">sysinstall</span> の利用については、<a class="xref" href="#install" title="第3章 FreeBSD 8.X のインストール">3章<em>FreeBSD 8.<em class="replaceable"><code>X</code></em> のインストール</em></a> で説明しています。</p><p>この章で記載されているインストールの手順は、
      <span class="trademark">i386</span>™ および <acronym class="acronym">AMD64</acronym> アーキテクチャを対象にしています。
      必要に応じて、他のプラットフォーム特有の手順についても明記しています。
      インストーラとこの文書で記載している内容には、
      いくらかズレがあることがありますので、
      この章を正確で忠実な手順書としてではなく、
      一般的なガイドとしてご利用ください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">グラフィカルなインストーラで
	FreeBSD をインストールしたいと考えているユーザは、
	PC-BSD プロジェクトのインストーラである
	<span class="application">pc-sysinstall</span>
	に興味を持たれるかもしれません。
	このインストーラは、グラフィカルなデスクトップ (PC-BSD)
	や、コマンドラインの FreeBSD のインストールに利用できます。
	詳細については、PC-BSD のユーザハンドブック <a class="link" href="http://wiki.pcbsd.org/index.php/PC-BSD%C2%AE_Users_Handbook/10.1" target="_top">http://wiki.pcbsd.org/index.php/PC-BSD%C2%AE_Users_Handbook/10.1</a>) をご覧ください。</p></div><p>この章を読むと、以下のことがわかります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>最小ハードウェア要件、および FreeBSD
	  が対応しているアーキテクチャについて。</p></li><li class="listitem"><p>FreeBSD インストールメディアの作り方。</p></li><li class="listitem"><p><span class="application">bsdinstall</span>
	  をどのように起動するか。</p></li><li class="listitem"><p><span class="application">bsdinstall</span>
	  が聞いてくる質問がどのような意味であり、
	  またどのように答えれば良いか。</p></li><li class="listitem"><p>インストールに失敗した時の問題の解決方法。</p></li><li class="listitem"><p>インストールを確定する前に、
	  FreeBSD の live 版へアクセスする方法。</p></li></ul></div><p>この章を読む前に、以下のことを確認して下さい。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>インストールしようとしているバージョンに付属しているサポートハードウェア一覧を読み、
	  システムのハードウェアがサポートされているかどうかを確認して下さい。</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-hardware"></a>2.2. 最小ハードウェア要件</h2></div></div></div><p>FreeBSD をインストールするシステムのハードウェア要件は、
      FreeBSD のバージョンやハードウェアのアーキテクチャによって異なります。
      FreeBSD
      の各リリースが対応しているハードウェアアーキテクチャやデバイスの一覧は、
      FreeBSD ウェブサイトのリリース情報のページ (<a class="link" href="../../../../ja/releases/index.html" target="_top">http://www.FreeBSD.org/ja/releases/index.html</a>)
      にまとめられています。</p><p>FreeBSD の最小のインストールでは、
      少なくとも 64 MB の <acronym class="acronym">RAM</acronym>、
      および 1.5 GB のハードディスクの空き容量が必要です。
      しかしならが、これは <span class="emphasis"><em>最小</em></span> のインストールであり、
      自由に使える領域はほとんどありません。
      必要となる RAM は、使用目的によります。
      ある目的に特化された FreeBSD システムは、
      128MB の RAM で動作できる可能性がありますが、
      デスクトップ用途のシステムでは、少なくとも 4 GB の
      <acronym class="acronym">RAM</acronym> が必要となります。</p><p>各アーキテクチャごとに必要とされるプロセッサの要件は以下の通りです。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">amd64</span></dt><dd><p>デスクトップおよびラップトップで最も一般的なプロセッサです。
	    このアーキテクチャを <acronym class="acronym">x86-64</acronym>
	    と呼ぶベンダもあります。</p><p>amd64 プロセッサのベンダは 2 つあります。
	    <acronym class="acronym">Intel64</acronym> クラスのプロセッサを製造する <span class="trademark">Intel</span>®
	    と <acronym class="acronym">AMD64</acronym> を製造する AMD です。</p><p>amd64 互換のプロセッサの例は、
	    <span class="trademark">AMD Athlon</span>™64, <span class="trademark">AMD Opteron</span>™, 
	    マルチコアの <span class="trademark">Intel</span>® <span class="trademark">Xeon</span>™ および 
	    <span class="trademark">Intel</span>® <span class="trademark">Core</span>™ 2 以降のプロセッサです。</p></dd><dt><span class="term">i386</span></dt><dd><p>32 ビットの X86 アーキテクチャです。</p><p>浮動小数点演算ユニットを持つ
	    i386 互換のほとんどのプロセッサに対応しています。
	    486 以上のすべての <span class="trademark">Intel</span>® プロセッサに対応しています。</p><p>FreeBSD は、Physical Address Extensions (<acronym class="acronym">PAE</acronym>)
	    に対応した <acronym class="acronym">CPU</acronym> でこの機能を利用可能です。
	    <acronym class="acronym">PAE</acronym> 機能を有効にしたカーネルでは、
	    4 ギガバイト以上のメモリを認識し、システムが利用できます。
	    この機能は、FreeBSD
	    のデバイスドライバや他の機能に制限を課してしまいます。
	    詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pae&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pae</span>(4)</span></a> を参照してください。</p></dd><dt><span class="term">ia64</span></dt><dd><p>現在 <span class="trademark">Itanium</span>® および <span class="trademark">Itanium</span>® 2 プロセッサに対応しています。
	    対応しているチップセットは、HP zx1, <span class="trademark">Intel</span>®
	    460GX および <span class="trademark">Intel</span>® E8870 です。
	    どちらのプロセッサもユニプロセッサ
	    (<acronym class="acronym">UP</acronym>) および対称マルチプロセッサ
	    (<acronym class="acronym">SMP</acronym>) の設定に対応しています。</p></dd><dt><span class="term">pc98</span></dt><dd><p>i386 互換のプロセッサである 80486, <span class="trademark">Pentium</span>®, <span class="trademark">Pentium</span>® Pro
	    および <span class="trademark">Pentium</span>® II を搭載しているほとんどすべての
	    NEC PC-9801/9821 シリーズに対応しています。
	    AMD, Cyrix, IBM および IDT によるすべての
	    i386 互換のプロセッサに対応しています。
	    NEC PC-9801 シリーズに互換の EPSON PC-386/486/586
	    シリーズに対応しています。
	    NEC FC-9801/9821 および NEC SV-98 シリーズに対応しています。</p><p>ハイレゾリューションモードには対応していません。
	    NEC PC-98XA/XL/RL/XL^2 および NEC PC-H98 シリーズには、
	    ノーマル (PC-9801 互換) モードでのみ対応しています。
	    <acronym class="acronym">SMP</acronym> に関連した FreeBSD の機能には対応していません。
	    PC-H98, SV-H98 および FC-H98 シリーズで使われている
	    New Extend Standard Architecture (<acronym class="acronym">NESA</acronym>)
	    バスには対応していません。 </p></dd><dt><span class="term">powerpc</span></dt><dd><p><acronym class="acronym">USB</acronym> 内蔵のすべての
	    New World <acronym class="acronym">ROM</acronym> <span class="trademark">Apple</span>® <span class="trademark">Mac</span>®
	    システムに対応しています。
	    複数の <acronym class="acronym">CPU</acronym> を持つコンピュータは
	    <acronym class="acronym">SMP</acronym> に対応しています。</p><p>32-bit カーネルは、<acronym class="acronym">RAM</acronym> の最初の
	    2 GB だけを利用できます。</p></dd><dt><span class="term">sparc64</span></dt><dd><p>FreeBSD/sparc64
	    が対応しているハードウェアの一覧については、
	    FreeBSD/sparc64 プロジェクト (<a class="link" href="../../../../ja/platforms/sparc.html" target="_top">http://www.freebsd.org/ja/platforms/sparc.html</a>)
	    をご覧ください。</p><p>複数のプロセッサを搭載するすべてのシステムにおいて、
	    <acronym class="acronym">SMP</acronym> に対応しています。現時点では、
	    他のオペレーティングシステムとディスクの共有ができないので、
	    FreeBSD/sparc64 専用のディスクが必要です。</p></dd></dl></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-pre"></a>2.3. インストール前に行う作業</h2></div></div></div><p>システムが FreeBSD
      のインストールにおける最小ハードウェア要件を満たしていることを確認したら、
      インストールファイルをダウンロードして、
      インストール用のメディアを用意する必要があります。
      その前に、以下のチェックリストを確認して、
      システムをインストールする準備ができていることを確認してください。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>重要なデータのバックアップ</strong></p><p>オペレーティングシステムをインストールする前に、
	  <span class="emphasis"><em>常に</em></span>
	  価値のあるすべてのデータを最初にバックアップしてください。
	  インストールしようとしているシステムにはバックをとらないでください。
	  そのかわり、<acronym class="acronym">USB</acronym> ドライブ、
	  ネットワーク上の他のシステム、
	  もしくはオンラインのバックアップサービスといったリムーバルディスクにデータを保存してください。
	  インストールを始める前に、バックアップを調べて、
	  必要なすべてのファイルがバックアップに含まれていることを確認してください。
	  インストーラがシステムのディスクをフォーマットしてしまうと、
	  ディスクに保存されていたすべてのデータは失われます。</p></li><li class="step"><p class="title"><strong>FreeBSD をインストールする場所の決定</strong></p><p>インストールするオペレーティングシステムが FreeBSD のみであれば、
	  このステップは飛ばすことができます。
	  しかし、ディスクに FreeBSD と
	  他のオペレーティングシステムを共存させる必要がある場合には、FreeBSD
	  が利用するディスクおよびパーティションを決める必要があります。</p><p>i386 および amd64 アーキテクチャでは、
	  二つのパーティションスキームのどちらかを使って、
	  ハードディスクを複数の塊に分割することができます。
	  伝統的な <em class="firstterm">Master Boot Record</em>
	  (<acronym class="acronym">MBR</acronym>) では、
	  ディスク 1 台あたり最大 4 つの
	  <em class="firstterm">プライマリパーティション</em>
	  をパーティションテーブルに持つことができます
	  歴史的な理由により、FreeBSD では、これらのパーティションのことを
	  <em class="firstterm">スライス</em> と呼びます。
	  プライマリパーティションの 1 つに、
	  複数の <em class="firstterm">論理パーティション</em> を含む
	  <em class="firstterm">拡張パーティション</em> を作成できます。
	  <em class="firstterm">GUID Partition Table</em>
	  (<acronym class="acronym">GPT</acronym>) は、
	  ディスクをパーティションに分ける簡単で新しい方法です。
	  一般的な <acronym class="acronym">GPT</acronym> の実装では、
	  1 つのディスクに 128 個までのパーティションの作成が可能であり、
	  論理パーティションは必要ありません。</p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="trademark">Windows</span>® XP のような古いオペレーティングシステムは、
	    <acronym class="acronym">GPT</acronym> パーティションと互換性がありません。
	    FreeBSD をこのようなオペレーティングシステムとディスク上で共存させる場合には、
	    <acronym class="acronym">MBR</acronym>
	    パーティションテーブルを使う必要があります。</p></div><p>FreeBSD のブートローダは、プライマリまたは
	  <acronym class="acronym">GPT</acronym> パーティションのどちらかを必要とします。
	  ディスク上のプライマリ、もしくは
	  <acronym class="acronym">GPT</acronym> パーティションがすべて使われているのであれば、
	  そのひとつを FreeBSD のために開放してください。
	  ディスクにあるデータを消去せずにパーティションを作成するには、
	  パーティションサイズを変更するツールを使って今あるパーティションのサイズを小さくし、
	  空いたスペースに新しいパーティションを作成してください。</p><p>パーティションサイズを変更するフリーや商用のツールは、
	  <a class="link" href="http://en.wikipedia.org/wiki/List_of_disk_partitioning_software" target="_top">http://en.wikipedia.org/wiki/List_of_disk_partitioning_software</a>
	  にまとめられています。
	  <span class="application">GParted Live</span> (<a class="link" href="http://gparted.sourceforge.net/livecd.php" target="_top">http://gparted.sourceforge.net/livecd.php</a>)
	  は、<span class="application">GParted</span>
	  パーティションエディタを含む完全なライブ <acronym class="acronym">CD</acronym> です。
	  多くの Linux Live <acronym class="acronym">CD</acronym> ディストリビューションでも
	  <span class="application">GParted</span> を利用できます。</p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">ディスクパーティションを縮小するユーティリティは、
	    適切に用いるとパーティション用の空き容量を新しく安全に作成できます。
	    すでにあるパーティションを間違って選択してしまう可能性があるので、
	    ディスクのパーティションを変更する前に、
	    必ず重要なデータのバックアップをとり、
	    バックアップが正しくとれていることを検証してください。</p></div><p>ディスクパーティションごとに異なるオペレーティングシステムをインストールすることで、
	  一つのコンピュータに複数のオペレーティングシステムをインストールできます。
	  <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/virtualization.html" target="_top">仮想化技術</a>
	  を用いると、ディスクパーティションを変更することなく、
	  複数のオペレーティングシステムを同時に起動できます。</p></li><li class="step"><p class="title"><strong>ネットワーク情報の収集</strong></p><p>FreeBSD のインストール方法によっては、ネットワークに接続し、
	  インストールファイルをダウンロードする必要があります。
	  インストールする方法に関わらず、インストール後に、
	  インストーラはシステムのネットワークインタフェースの設定をする機会を提供します。</p><p>ネットワークに <acronym class="acronym">DHCP</acronym> サーバがあると、
	  自動的にネットワークの設定情報を取得できます。
	  <acronym class="acronym">DHCP</acronym> を利用できない環境では、
	  システムの以下のネットワーク情報について、
	  システム管理者かプロバイダにネットワーク情報を問い合わせる必要があります。</p><div class="orderedlist"><a id="bsdinstall-collect-network-information"></a><div class="orderedlist-title">必要となるネットワーク情報</div><ol class="orderedlist" type="1"><li class="listitem"><p><acronym class="acronym">IP</acronym> アドレス</p></li><li class="listitem"><p>サブネットマスク</p></li><li class="listitem"><p>デフォルトゲートウェイの
	      <acronym class="acronym">IP</acronym> アドレス</p></li><li class="listitem"><p>ネットワークのドメイン名</p></li><li class="listitem"><p>ネットワークの <acronym class="acronym">DNS</acronym>
	      サーバの <acronym class="acronym">IP</acronym> アドレス</p></li></ol></div></li><li class="step"><p class="title"><strong>FreeBSD Errata の確認</strong></p><p>FreeBSD プロジェクトでは FreeBSD
	  の各リリースができる限り安定するよう努力していますが、
	  時々バグが発生してしまうことがあります。極まれに、
	  発生したバグがインストールプロセスに影響を与えることがあります。
	  これらの問題は発見され解決されると、
	  FreeBSD のウェブサイトの FreeBSD Errata (<a class="link" href="../../../../releases/10.1R/errata.html" target="_top">http://www.freebsd.org/releases/10.1R/errata.html</a>)
	  に記載されます。
	  インストールに影響するような既知の問題が無いことを、
	  インストールする前に Errata で確認してください。</p><p>すべてのリリースに関する情報や Errata は、FreeBSD のウェブサイトの
	  リリース情報の項 (<a class="link" href="../../../../ja/releases/index.html" target="_top">http://www.freebsd.org/ja/releases/index.html</a>)
	  で確認できます。</p></li></ol></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-installation-media"></a>2.3.1. インストールメディアの準備</h3></div></div></div><p>FreeBSD のインストーラは、
	他のオペレーティングシステムで実行できるようなプログラムではありません。
	そのかわり、FreeBSD インストールファイルをダウンロードしたら、
	ファイルタイプやサイズに合わせてメディア
	(<acronym class="acronym">CD</acronym>,
	<acronym class="acronym">DVD</acronym> または <acronym class="acronym">USB</acronym>)
	に焼いてください。そして、挿入したメディアからインストールするように、
	システムを起動してください。</p><p>FreeBSD のインストールファイルは <a class="link" href="../../../../ja/where.html#download" target="_top">www.freebsd.org/ja/where.html#download</a>
	から入手できます。
	各インストールファイルの名前は、FreeBSD
	のリリースバージョンおよびアーキテクチャ、ファイルタイプからなります。
	たとえば、amd64 システムに <acronym class="acronym">DVD</acronym> から
	FreeBSD 10.0 をインストールするには、
	<code class="filename">FreeBSD-10.0-RELEASE-amd64-dvd1.iso</code>
	をダウンロードして、ファイルを <acronym class="acronym">DVD</acronym>
	に焼き、<acronym class="acronym">DVD</acronym>
	を挿入してからシステムを起動してください。</p><p>さまざまなファイル形式が用意されていますが、
	すべてのアーキテクチャに対して、
	すべての形式のファイルが用意されているわけではありません。
	利用可能な形式は以下の通りです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">-bootonly.iso</code>:
	    インストーラのみを含む最小のインストールファイルです。
	    インストールを行う間、インストーラは
	    FreeBSD をインストールするために必要なファイルをダウンロードするため、
	    ネットワーク接続が必要です。
	    このファイルは、<acronym class="acronym">CD</acronym>
	    を焼くためのアプリケーションを用いて、
	    <acronym class="acronym">CD</acronym> に書き込む必要があります。</p></li><li class="listitem"><p><code class="literal">-disc1.iso</code>: FreeBSD
	    のインストールに必要となる、ソースおよび Ports Collection
	    といったすべてのファイルが含まれています。
	    このファイルは、<acronym class="acronym">CD</acronym>
	    を焼くためのアプリケーションを用いて、
	    <acronym class="acronym">CD</acronym> に書き込む必要があります。</p></li><li class="listitem"><p><code class="literal">-dvd1.iso</code>: FreeBSD
	    のインストールに必要となる、ソースおよび Ports Collection
	    といったすべてのファイルが含まれています。
	    インターネットに接続することなく、
	    メディアのみでシステムのインストールを完了できるように、
	    良く使われるウィンドウマネージャおよびアプリケーションをインストールするためのバイナリ package も含まれています。
	    <acronym class="acronym">DVD</acronym> を焼くためのアプリケーションを使って、
	    <acronym class="acronym">DVD</acronym> に書き込む必要があります。</p></li><li class="listitem"><p><code class="literal">-memstick.img</code>: FreeBSD
	    のインストールに必要となる、ソースおよび Ports Collection
	    といったすべてのファイルが含まれています。
	    以下の手順に従って、<acronym class="acronym">USB</acronym>
	    スティックに書き込んでください。</p></li></ul></div><p>また、イメージファイルと同じディレクトリから
	<code class="filename">CHECKSUM.SHA256</code> をダウンロードし、
	<em class="firstterm">チェックサム</em>
	を計算してイメージファイルの完全性を確認してください。
	FreeBSD では <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sha256&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sha256</span>(1)</span></a> を用いてチェックサムを計算できますが、
	他のオペレーティングシステムも同様のプログラムを持っています。
	計算したチェックサムと <code class="filename">CHECKSUM.SHA256</code>
	に示されている値を比較してください。
	チェックサムは完全に一致している必要があります。
	もしチェックサムが一致していなければ、
	ファイルは壊れているのでもう一度ダウンロードしてください。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-usb"></a>2.3.1.1. イメージファイルを <acronym class="acronym">USB</acronym> に書き込む</h4></div></div></div><p><code class="filename">*.img</code> ファイルは、
	  完全なメモリスティックの内容の <span class="emphasis"><em>イメージ</em></span>
	  です。これは、
	  通常のファイルのように対象のデバイスにコピーすることは
	  <span class="emphasis"><em>できません</em></span>。
	  <acronym class="acronym">USB</acronym> スティックへ <code class="filename">*.img</code>
	  を書き込むためのアプリケーションは複数あります。
	  この節ではこのうちの二つのユーティリティについて説明します。</p><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">先に進む前に、<acronym class="acronym">USB</acronym>
	    スティックに存在する重要なデータをバックアップしてください。
	    以下の手順を実行すると、
	    スティックに存在するデータは削除されます。</p></div><div class="procedure"><a id="bsdinstall-usb-dd"></a><div class="procedure-title">手順2.1 <code class="command">dd</code> を使ってイメージを書き込む</div><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">この例では、イメージの書き込み先のターゲットデバイスとして、
	      <code class="filename">/dev/da0</code> が使われています。
	      ここで使われるコマンドは、
	      指定したターゲットデバイスに存在しているデータを破壊してしまうので、
	      正しいデバイスが指定されていることに
	      <span class="emphasis"><em>細心の注意を払ってください</em></span>。</p></div><ul class="procedure"><li class="step"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a> コマンドユーティリティは、
	      BSD, <span class="trademark">Linux</span>®, および <span class="trademark">Mac OS</span>® システムで利用できます。
	      <code class="command">dd</code> を使ってイメージを焼くには、
	      <acronym class="acronym">USB</acronym> スティックを挿入して、
	      デバイス名を確定してください。
	      その後、ダウンロードしたインストールファイルおよび、
	      <acronym class="acronym">USB</acronym> スティックのデバイス名を指定してください。
	      この例では、amd64 インストールイメージを
	      FreeBSD システムの最初の
	      <acronym class="acronym">USB</acronym> デバイスに書き込みます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=<em class="replaceable"><code>FreeBSD-10.0-RELEASE-amd64-memstick.img</code></em> of=/dev/<em class="replaceable"><code>da0</code></em> bs=64k</code></strong></pre><p>もし上記のコマンドに失敗するようでしたら、
	      <acronym class="acronym">USB</acronym> スティックがマウントされていないことや、
	      デバイス名がディスクに対してのものであり、
	      パーティションではないことを確認してください。
	      オペレーティングシステムによっては、このコマンドを
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sudo&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sudo</span>(8)</span></a> で実行することが求められる場合があります。
	      <span class="trademark">Linux</span>® のようなシステムでは、書き込みをバッファします。
	      すべての書き込みを完了させるには、
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sync&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sync</span>(8)</span></a> を使用してください。</p></li></ul></div><div class="procedure"><a id="idp78254288"></a><div class="procedure-title">手順2.2 <span class="trademark">Windows</span>® を使ってイメージを書き込む</div><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">適切なドライブレターを出力先に設定していることを十分に確認してください。
	      さもなければ、現在あるデータは上書きされ、
	      破壊されてしまうでしょう。</p></div><ol class="procedure" type="1"><li class="step"><p class="title"><strong><span class="application">Image Writer for <span class="trademark">Windows</span>®</span>
	      を入手する</strong></p><p><span class="application">Image Writer for <span class="trademark">Windows</span>®</span> は、
	      イメージファイルをメモリスティックに正しく書き込むことのできるフリーのアプリケーションです。
	      <code class="uri"><a class="uri" href="https://launchpad.net/win32-image-writer/" target="_top">https://launchpad.net/win32-image-writer/</a></code>
	      からダウンロードして、フォルダに展開してください。</p></li><li class="step"><p class="title"><strong>イメージライタを使ってイメージを書き込む</strong></p><p><span class="application">Win32DiskImager</span>
	      アイコンをダブルクリックして、プログラムを起動してください。
	      <code class="computeroutput">Device</code>
	      の下に表示されるデバイスレターが、
	      メモリスティックのドライブであることを確認してください。
	      フォルダのアイコンをクリックして、
	      メモリスティックに書き込むイメージファイルを選択します。
	      <span class="guibutton">[ Save ]</span> をクリックして、
	      イメージファイルの名前を確定してください。
	      すべてが正しく行われたかどうか、また、
	      他のウィンドウでメモリスティックのフォルダが開かれていないことを確認してください。
	      準備ができたら、<span class="guibutton">[ Write ]</span>
	      をクリックして、
	      メモリスティックにイメージファイルを書き込んでください。</p></li></ol></div><p>これで FreeBSD をインストールする用意ができました。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-start"></a>2.4. インストールの開始</h2></div></div></div><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">デフォルトでは、次のメッセージが表示されるまで
	インストーラはディスクに何の変更も加えません。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">Your changes will now be written to disk.  If you
have chosen to overwrite existing data, it will
be PERMANENTLY ERASED. Are you sure you want to
commit your changes?</pre><p xmlns="http://www.w3.org/1999/xhtml">この警告の前であれば、いつでもインストールを中断できます。
	もし、何かを間違って設定してしまったことが心配ならば、
	最後の警告の前に単にコンピュータをオフにしてください。
	システムのハードディスクを変更せずに済みます。</p></div><p>この章では、<a class="xref" href="#bsdinstall-installation-media" title="2.3.1. インストールメディアの準備">「インストールメディアの準備」</a>
      で説明されている手順によって準備されたインストールメディアから、
      システムを起動する方法について説明します。
      起動可能な <acronym class="acronym">USB</acronym> スティックを使用する場合には、
      コンピュータを立ち上げる前に、
      <acronym class="acronym">USB</acronym> スティックを挿入してください。
      <acronym class="acronym">CD</acronym> もしくは <acronym class="acronym">DVD</acronym>
      から起動する場合には、
      コンピュータを立ち上げ、
      すぐにメディアを挿入してください。
      挿入したメディアからシステムを起動するように設定する方法は、
      アーキテクチャによって異なります。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-starting-i386"></a>2.4.1. <span class="trademark">i386</span>™ および amd64 での起動</h3></div></div></div><p>これらのアーキテクチャでは、
	<acronym class="acronym">BIOS</acronym> メニューが用意されており、
	ブートデバイスを選択できます。
	利用するインストールメディアに合わせて、
	最初のブートデバイスに、
	<acronym class="acronym">CD</acronym>/<acronym class="acronym">DVD</acronym> または
	<acronym class="acronym">USB</acronym> を選択してください。
	ほとんどのシステムでは、<acronym class="acronym">BIOS</acronym>
	に入らずとも、起動時に特定のキーを押すことで、
	起動するデバイスを選択できます。
	通常、このキーは、
	<span class="keycap"><strong>F10</strong></span>, <span class="keycap"><strong>F11</strong></span>,
	<span class="keycap"><strong>F12</strong></span> または <span class="keycap"><strong>Escape</strong></span>
	のどれかです。</p><p>もし、コンピュータが FreeBSD のインストーラではなく、
	すでに存在しているオペレーティングシステムで起動してしまったのであれば、
	以下の原因が考えられます。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>インストールメディアが起動プロセスにおいて十分早いタイミングで挿入されていません。
	    メディアをそのままにしてコンピュータを再起動してください。</p></li><li class="listitem"><p><acronym class="acronym">BIOS</acronym> の変更が適切に行われていなかったり、
	    変更が保存されていません。
	    最初のブートデバイスに正しいブートデバイスが設定されていることを確認してください。</p></li><li class="listitem"><p>システムが古く、
	    希望しているメディアからの起動に対応していません。
	    この場合には、<span class="application">Plop Boot
	      Manager</span> (<a class="link" href="http://www.plop.at/en/bootmanagers.html" target="_top">http://www.plop.at/en/bootmanagers.html</a>)
	    を使うと、選択したメディアからシステムを起動できます。</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78292944"></a>2.4.2. <span class="trademark">PowerPC</span>® での起動</h3></div></div></div><p>ほとんどのコンピュータでは、
	起動中にキーボードの <span class="keycap"><strong>C</strong></span>
	を押しておくと、<acronym class="acronym">CD</acronym> から起動します。
	別の方法では <span class="keycap"><strong>Command</strong></span>+<span class="keycap"><strong>Option</strong></span>+<span class="keycap"><strong>O</strong></span>+<span class="keycap"><strong>F</strong></span>、
	または non-<span class="trademark">Apple</span>® キーボードでは
	<span class="keycap"><strong>Windows</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>O</strong></span>+<span class="keycap"><strong>F</strong></span>
	を押してください。<code class="prompt">0 &gt;</code> プロンプトで</p><pre class="screen"><strong class="userinput"><code>boot cd:,\ppc\loader cd:0</code></strong></pre><p>と入力してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78301264"></a>2.4.3. <span class="trademark">SPARC64</span>® での起動</h3></div></div></div><p>ほとんどの <span class="trademark">SPARC64</span>® システムは、
	ディスクから自動的に起動するように設定されています。
	FreeBSD を <acronym class="acronym">CD</acronym> からインストールするには、
	<acronym class="acronym">PROM</acronym> に入る必要があります。</p><p><acronym class="acronym">PROM</acronym> に入るにはシステムを再起動し、
	ブートメッセージが表示されるまで待ってください。
	モデルによりますが、以下のようなメッセージが表示されます。</p><pre class="screen">Sun Blade 100 (UltraSPARC-IIe), Keyboard Present
Copyright 1998-2001 Sun Microsystems, Inc.  All rights reserved.
OpenBoot 4.2, 128 MB memory installed, Serial #51090132.
Ethernet address 0:3:ba:b:92:d4, Host ID: 830b92d4.</pre><p>もしシステムがこの時点でディスクから起動するようでしたら、
	キーボードから <span class="keycap"><strong>L1</strong></span>+<span class="keycap"><strong>A</strong></span>
	または <span class="keycap"><strong>Stop</strong></span>+<span class="keycap"><strong>A</strong></span>
	を押すか、シリアルコンソールから <code class="command">BREAK</code>
	を送信してください。
	<span class="application">tip</span> または <span class="application">cu</span>
	を使用する場合には、<code class="command">~#</code>
	によって BREAK を送ることができます。
	単一の <acronym class="acronym">CPU</acronym> を持つシステムでの
	<acronym class="acronym">PROM</acronym> プロンプトは、<code class="prompt">ok</code> で、
	<acronym class="acronym">SMP</acronym> システムのプロンプトは、
	<code class="prompt">ok {0} </code> です。
	数字はアクティブな <acronym class="acronym">CPU</acronym>
	の数を表しています。</p><p>ここで、<acronym class="acronym">CD</acronym> をドライブに挿入し、
	<acronym class="acronym">PROM</acronym> プロンプトで
	<code class="command">boot cdrom</code> と入力してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-view-probe"></a>2.4.4. FreeBSD ブートメニュー</h3></div></div></div><p>インストールメディアからシステムが起動すると、
	以下のようなメニューが表示されます。</p><div class="figure"><a id="bsdinstall-newboot-loader-menu"></a><div class="figure-title">図2.1 FreeBSD ブートローダメニュー</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-newboot-loader-menu.png" alt="FreeBSD ブートローダメニュー" /></div></div></div><br class="figure-break" /><p>デフォルトでは、メニューは、FreeBSD インストーラが起動するまで
	(FreeBSD がインストールされているシステムでは、FreeBSD が起動するまで)、
	ユーザからの入力を 10 秒間受け付けます。
	タイマーを停止してオプションを確認には、
	<span class="keycap"><strong>Space</strong></span> を押してください。オプションを選択するには、
	ハイライトされている番号、文字、もしくはキーを押してください。
	以下のオプションが利用可能です。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">Boot Multi User</code>: FreeBSD
	    の起動プロセスを続けます。
	    ブートタイマが停止しているのであれば <span class="keycap"><strong>1</strong></span>、
	    大文字もしくは小文字の <span class="keycap"><strong>B</strong></span> または、
	    <span class="keycap"><strong>Enter</strong></span> を押してください。</p></li><li class="listitem"><p><code class="literal">Boot Single User</code>: このモードは、
	    すでにインストールされている FreeBSD を修復するために利用できます。
	  　シングルユーザモードについては、
	    <a class="xref" href="#boot-singleuser" title="13.6.2. シングルユーザモード">「シングルユーザモード」</a> で説明されています。
	    <span class="keycap"><strong>2</strong></span> もしくは、小文字もしくは、大文字の
	    <span class="keycap"><strong>S</strong></span> を押すとこのモードに入ることができます。 </p></li><li class="listitem"><p><code class="literal">Escape to loader prompt</code>: 
	    制限された低レベルのコマンドのみが利用可能な修復用プロンプトでシステムを起動します。
	    このプロンプトについては、
	    <a class="xref" href="#boot-loader" title="13.3.3. 起動ステージ 3 /boot/loader">「起動ステージ 3 <code class="filename">/boot/loader</code>」</a> で説明されています。
	    <span class="keycap"><strong>3</strong></span> または <span class="keycap"><strong>Esc</strong></span>
	    を押すとこのプロンプトで起動します。</p></li><li class="listitem"><p><code class="literal">Reboot</code>: システムを再起動します。</p></li><li class="listitem"><p><code class="literal">Configure Boot Options</code>: <a class="xref" href="#bsdinstall-boot-options-menu" title="図2.2 FreeBSD ブートオプションメニュー">図2.2「FreeBSD ブートオプションメニュー」</a>
	    で示されるメニューを開きます。</p></li></ul></div><div class="figure"><a id="bsdinstall-boot-options-menu"></a><div class="figure-title">図2.2 FreeBSD ブートオプションメニュー</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-boot-options-menu.png" alt="FreeBSD ブートオプションメニュー" /></div></div></div><br class="figure-break" /><p>この起動オプションメニューは、
	2 つのセクションから構成されています。
	最初のセクションは、メインのブートメニューに戻ったり、
	オプションをデフォルト値に戻すために利用できます。</p><p>次のセクションでは、変更可能なオプションついて、
	選択されている番号や文字を、<code class="literal">On</code> や
	<code class="literal">Off</code> に変更できます。
	システムは、これらのオプションが変更されない限り、
	常に変更されたオプションで起動します。
	このメニューで変更可能なオプションは以下の通りです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">ACPI Support</code>:
	    起動中にシステムが固まるようでしたら、このオプションを
	    <code class="literal">Off</code> にしてください。</p></li><li class="listitem"><p><code class="literal">Safe Mode</code>:
	    上記のオプションの対応を行ってもシステムが起動時に固まるようでしたら、
	    <code class="literal">ACPI Support</code> を <code class="literal">Off</code>
	    にし、このオプションを <code class="literal">On</code>
	    に設定してください。</p></li><li class="listitem"><p><code class="literal">Single User</code>:
	    シングルユーザモードでインストールされている FreeBSD を修復には、
	    <code class="literal">On</code> にしてください。
	    シングルユーザモードについては、
	    <a class="xref" href="#boot-singleuser" title="13.6.2. シングルユーザモード">「シングルユーザモード」</a> で説明されています。
	    問題が修正された後は、<code class="literal">Off</code>
	    に戻してください。</p></li><li class="listitem"><p><code class="literal">Verbose</code>:
	    起動プロセスの表示をより詳細に表示したい場合には、
	    このオプションを <code class="literal">On</code> にしてください。
	    ハードウェアの問題を解決する際には有効です。</p></li></ul></div><p>設定が終わったら、
	<span class="keycap"><strong>1</strong></span> または <span class="keycap"><strong>Backspace</strong></span>
	を押してメインブートメニューに戻り、
	<span class="keycap"><strong>Enter</strong></span> を押して FreeBSD の起動を続けてください。
	FreeBSD がハードウェアの検出を行い、
	インストールプログラムをロードしている間、
	ブートメッセージが表示されます。
	起動後、<a class="xref" href="#bsdinstall-choose-mode" title="図2.3 ウェルカムメニュー">図2.3「ウェルカムメニュー」</a>
	に示されるウェルカムメニューが表示されます。</p><div class="figure"><a id="bsdinstall-choose-mode"></a><div class="figure-title">図2.3 ウェルカムメニュー</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-choose-mode.png" alt="ウェルカムメニュー" /></div></div></div><br class="figure-break" /><p><span class="keycap"><strong>Enter</strong></span> を押して、デフォルトの
	<span class="guibutton">[ Install ]</span>
	を選択すると、インストール作業が始まります。
	この章の残りの部分では、このインストーラの使い方について説明します。
	そのほかには、左右の矢印キーまたは色が変わっている文字を使って、
	選択したいメニューの項目を選択してください。
	<span class="guibutton">[ Shell ]</span> を使うと、
	インストールの前に、FreeBSD
	シェルからコマンドラインユーティリティでディスクを準備できます。
	<span class="guibutton">[ Live CD ]</span> オプションを選択すると、
	インストール前に FreeBSD を試すことができます。
	live 版については、<a class="xref" href="#using-live-cd" title="2.10. Live CD を使う">「Live <acronym class="acronym">CD</acronym> を使う」</a>
	で説明されています。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">ハードウェアの検出などのブートメッセージを見るには
	  大文字または小文字の <span class="keycap"><strong>S</strong></span> を押してください。
	  その後、<span class="keycap"><strong>Enter</strong></span> を押して、
	  シェルにアクセスしてください。
	  シェルプロンプトから、<code class="command">more
	    /var/run/dmesg.boot</code> を入力してください。
	  メッセージのスクロールには、スペースバーを使ってってください。
	  終わったら、<code class="command">exit</code> を押して、
	  ウェルカムメニューに戻ってください。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-bsdinstall"></a>2.5. <span class="application">bsdinstall</span> の使用</h2></div></div></div><p>この章では、
      <span class="application">bsdinstall</span> メニューの順番と、
      システムがインストールされる前に、
      尋ねられる情報の形式について紹介します。
      メニューオプションの選択には、矢印キーを使い、
      メニューの項目の選択や解除する場合には、<span class="keycap"><strong>Space</strong></span>
      キーを使ってください。
      設定が終わったら、<span class="keycap"><strong>Enter</strong></span>
      を押して設定を保存し、次の画面へ移動してください。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-keymap"></a>2.5.1. キー配列メニューの選択</h3></div></div></div><p>使用しているシステムのコンソールにもよりますが、<a class="xref" href="#bsdinstall-keymap-select-default" title="図2.4 キーマップの選択">図2.4「キーマップの選択」</a>
	で表示されるメニューが最初に表示されます。</p><div class="figure"><a id="bsdinstall-keymap-select-default"></a><div class="figure-title">図2.4 キーマップの選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-keymap-select-default.png" alt="キーマップの選択" /></div></div></div><br class="figure-break" /><p>キーボードのレイアウトを設定するには、
	<span class="guibutton">[ YES ]</span> が選択されている状態で、
	<span class="keycap"><strong>Enter</strong></span> を押してください。<a class="xref" href="#bsdinstall-config-keymap" title="図2.5 キーボードメニューの選択">図2.5「キーボードメニューの選択」</a>
	で表示されているメニューが表示されます。
	デフォルトのレイアウトを使用する場合には、カーソルキーを使って、
	<span class="guibutton">[ NO ]</span> を選択し、
	<span class="keycap"><strong>Enter</strong></span> を押して、
	このメニュー画面をスキップしてください。</p><div class="figure"><a id="bsdinstall-config-keymap"></a><div class="figure-title">図2.5 キーボードメニューの選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-config-keymap.png" alt="キーボードメニューの選択" /></div></div></div><br class="figure-break" /><p>キーボードレイアウトを設定するには、
	システムのキーボードに最も近いキーマップをカーソルキーの上下キーので選択してください。
	選択を保存するには、<span class="keycap"><strong>Enter</strong></span> キーを押してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="keycap"><strong>Esc</strong></span> を押すと、メニューを終了し、
	  デフォルトのキーボードマップを使うようになります。
	  どのキーボードマップを選べばよいかわからない場合には、
	  <span class="guimenuitem">United States of America ISO-8859-1</span>
	  を選ぶとよいでしょう。</p></div><p>FreeBSD 10.0-RELEASE 以降では、このメニューが拡張されました。
	デフォルトの選択と共に、キーマップのすべて選択項目が表示されます。
	さらに、異なるキーマップを選択した時には、
	ダイアログが表示され、インストールを先に進む前に、
	ユーザがキーマップの試験を行い、適切かどうかを確認できます。</p><div class="figure"><a id="bsdinstall-keymap-10"></a><div class="figure-title">図2.6 拡張キーマップメニュー</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-keymap-10.png" alt="拡張キーマップメニュー" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-hostname"></a>2.5.2. ホスト名の設定</h3></div></div></div><p>次の <span class="application">bsdinstall</span> のメニューでは、
	新しくインストールするシステムに与えるホスト名を設定します。</p><div class="figure"><a id="bsdinstall-config-hostname"></a><div class="figure-title">図2.7 ホスト名の設定</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-config-hostname.png" alt="ホスト名の設定" /></div></div></div><br class="figure-break" /><p>ネットワーク上でユニークなホスト名を入力してください。
	入力するホスト名は、<code class="systemitem">machine3.example.com</code>
	のように完全修飾のホスト名で入力してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-components"></a>2.5.3. インストールするコンポーネントの設定</h3></div></div></div><p>次に、 <span class="application">bsdinstall</span>
	は、インストールするオプションのコンポーネントの選択に移ります。</p><div class="figure"><a id="bsdinstall-config-components"></a><div class="figure-title">図2.8 インストールするコンポーネントの設定</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-config-components.png" alt="インストールするコンポーネントの設定" /></div></div></div><br class="figure-break" /><p>どのコンポーネントをインストールするかは、
	システムの用途と用意されているディスク容量に依存します。
	<em class="firstterm">base system</em> として知られている
	FreeBSD カーネルとユーザランドは、
	常にインストールされます。
	アーキテクチャによっては、表示されないコンポーネントもあります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">doc</code> - 追加の文書。
	    多くは歴史的な興味のもので、<code class="filename">/usr/share/doc</code>
	    にインストールされます。
	    FreeBSD ドキュメンテーションプロジェクトが提供している文書は、
	    後で、<a class="xref" href="#updating-upgrading-documentation" title="18.3. ドキュメントのアップデート">「ドキュメントのアップデート」</a>
	    に書かれている手順でインストールされます。</p></li><li class="listitem"><p><code class="literal">games</code> - <span class="application">fortune</span>,
	    <span class="application">rot13</span>
	    などの伝統的な <acronym class="acronym">BSD</acronym>
	    ゲームをインストールします。</p></li><li class="listitem"><p><code class="literal">lib32</code> -
	    32-bit のアプリケーションを 64-bit 版の FreeBSD
	    で実行する際に必要となる互換ライブラリ。</p></li><li class="listitem"><p><code class="literal">ports</code> - FreeBSD 
	    Ports Collection は、
	    サードパーティ製ソフトウェアパッケージのダウンロード、
	    コンパイル、
	    インストールを自動化するように設計されたファイルの集まりです。
	    Ports Collection の使い方については、
	    <a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a> で説明します。</p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">インストールプログラムは、
	      システムのディスクに十分な空き容量があるかどうかを確認しないので、
	      ハードディスクに十分な容量があるときだけ、
	      このオプションを選択するしてください。
	      FreeBSD 9.0 では、Ports Collection が必要とする容量は、
	      約 500 MB です。</p></div></li><li class="listitem"><p><code class="literal">src</code> - FreeBSD
	    のカーネルおよびユーザランド両方の完全なソースコードです。
	    ほとんどのアプリケーションは必要としませんが、
	    デバイスドライバやカーネルモジュール、
	    Ports Collection
	    のアプリケーションによってはコンパイル時に必要となります。
	    このソースは、FreeBSD そのものの開発に使うこともできます。
	    すべてのソースツリーをインストールするには
	    1 GB のディスク容量を必要とします。
	    また、FreeBSD システム全体のコンパイルには、
	    さらに 5 GB の容量が必要です。</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-netinstall"></a>2.5.4. ネットワークからのインストール</h3></div></div></div><p><a class="xref" href="#bsdinstall-netinstall-notify" title="図2.9 ネットワークからのインストール">図2.9「ネットワークからのインストール」</a> で示されているメニューは、
	<code class="filename">-bootonly.iso</code> <acronym class="acronym">CD</acronym>
	からインストールする時のみ表示されます。この
	インストールメディアは、インストールファイルを含んでいません。
	ネットワーク経由でインストールファイルをダウンロードする必要があるため、
	このメニューは、ネットワークインタフェースを最初に設定する必要があることを示しています。</p><div class="figure"><a id="bsdinstall-netinstall-notify"></a><div class="figure-title">図2.9 ネットワークからのインストール</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-netinstall-files.png" alt="ネットワークからのインストール" /></div></div></div><br class="figure-break" /><p>ネットワーク接続の設定を行うには、
	<span class="keycap"><strong>Enter</strong></span> を押して、
	<a class="xref" href="#bsdinstall-config-network-dev" title="2.8.2. ネットワークインタフェースの設定">「ネットワークインタフェースの設定」</a>
	に示されている手順に従ってください。
        ネットワーク接続の設定が終わったら、
	FreeBSD をインストールするコンピュータと同じ地域のミラーサイトを選んでください。
	ターゲットコンピュータの近くにミラーサイトがあると、
	ファイルのダウンロードは早く終わるので、
	インストールの時間は短くなります。</p><div class="figure"><a id="bsdinstall-netinstall-mirror"></a><div class="figure-title">図2.10 ミラーサイトの選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-netinstall-mirrorselect.png" alt="ミラーサイトの選択" /></div></div></div><br class="figure-break" /><p>ローカルメディアにインストールファイルが用意されているように、
	インストールは先に進みます。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-partitioning"></a>2.6. ディスク領域の割り当て</h2></div></div></div><p>次のメニューでは、ディスク領域を割り当てる方法を選択します。
      メニューで選択できるオプションは、インストールする FreeBSD
      のバージョンに依存します。</p><div class="figure"><a id="bsdinstall-part-guided-manual"></a><div class="figure-title">図2.11 FreeBSD 9.x におけるパーティションの分割の選択肢</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-guided-manual.png" alt="FreeBSD 9.x におけるパーティションの分割の選択肢" /></div></div></div><br class="figure-break" /><div class="figure"><a id="bsdinstall-zfs-partmenu"></a><div class="figure-title">図2.12 FreeBSD 10.x 以降でのパーティション分割の選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-partmenu.png" alt="FreeBSD 10.x 以降でのパーティション分割の選択" /></div></div></div><br class="figure-break" /><p><span class="emphasis"><em>Guided</em></span> によるパーティションの分割方法では、
      ディスクパーティションを自動的に設定します。
      <span class="emphasis"><em>Manual</em></span> によるパーティションの分割方法は、
      高度な知識を持つユーザ向けで、
      メニューオプションからカスタマイズしたパーティションを作成できます。
      <code class="literal">Shell</code> は、シェルプロンプトを起動し、
      高度な知識を持つユーザが、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gpart&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gpart</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
      のようなコマンドラインのプログラムを実行して、
      カスタマイズしたパーティションを作成できます。
      FreeBSD 10 以降で利用可能な <acronym class="acronym">ZFS</acronym> オプションは、
      <em class="firstterm">ブート環境に対応した</em>
      root-on-ZFS システムを構築します。
      暗号化された root-on-ZFS システムを構築することもできます。</p><p>この章では、
      ディスクパーティションをレイアウトする際の検討事項を説明します。
      その後、各パーティションの作成方法について説明します。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="configtuning-initial"></a>2.6.1. パーティションレイアウトのデザイン</h3></div></div></div><a id="idp78461648" class="indexterm"></a><a id="idp78462160" class="indexterm"></a><a id="idp78463056" class="indexterm"></a><a id="idp78463952" class="indexterm"></a><p>ファイルシステムのレイアウトを行う際には、
	  ハードディスクの外周部は内周部よりもデータ転送が速いということを思い出してください。
	  これに従えば、
	  小さくて激しくアクセスされるファイルシステムを外周付近に、
	  <code class="filename">/usr</code>
	  のようなより大きなパーティションはディスクの内側に配置すべきでしょう。
	  そのため、パーティションを作成する際には、<code class="filename">/</code>、
	  スワップ、<code class="filename">/var</code>, <code class="filename">/usr</code>
	  のような順で作ってゆくのがよいでしょう。</p><p><code class="filename">/var</code> パーティションのサイズは、
	  あなたが計算機をどのように使おうとしているかを反映します。
	  このパーティションには主としてメールボックスやログファイル、
	  プリンタスプールが置かれます。
	  メールボックスとログファイルは、
	  システムのユーザ数やログの保持期間に依存して予期し得ぬサイズにまで成長する可能性があります。
	  概して、ほとんどのユーザは、<code class="filename">/var</code>
	  にギガバイト以上の空き容量を必要とはしないでしょう。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">時には、たくさんのディスク容量が
	  <code class="filename">/var/tmp</code> に必要になるときがあります。
	  新しいソフトウェアをインストールする際、
	  package のツールは、package の一時的なコピーを
	  <code class="filename">/var/tmp</code> 以下に展開します。
	  <code class="filename">/var/tmp</code>
	  以下に十分なディスク容量が用意されていないと、
	  <span class="application">Firefox</span>,
	  <span class="application">OpenOffice</span> や
	  <span class="application">LibreOffice</span> のような、
	  大きなソフトウェア package のインストールが、
	  困難になることがあります。</p></div><p><code class="filename">/usr</code> パーティションには、
	FreeBSD Ports Collection およびシステムのソースコードを含む、
	システムをサポートするのに必要な多くのファイル群が置かれます。
	このパーティションには、少なくとも 2 ギガバイトを用意することをおすすめします。</p><p>パーティションのサイズを考える時、
	必要量を念頭に置いてください。
	別のパーティションには潤沢にスペースが余っているのに、
	あるパーティションでスペースが足らないままというのは、
	フラストレーションがたまるものです。</p><a id="idp78484304" class="indexterm"></a><a id="idp78485072" class="indexterm"></a><p>経験からスワップパーティションのサイズは物理メモリ
	(<acronym class="acronym">RAM</acronym>) の 2 倍というのが一般的です。
	<acronym class="acronym">RAM</acronym> の少ないシステムでは、
	もっとスワップを増した方が性能がよくなります。
	スワップが少なすぎる設定は、
	あなたが後にメモリを増設したときに問題を起すばかりではなく、
	VM ページスキャニングコードの能率を落します。</p><p>複数の <acronym class="acronym">SCSI</acronym>
	ディスクや異なるコントローラで操作される複数の
	<acronym class="acronym">IDE</acronym> ディスクを持つ大規模なシステムでは、
	それぞれのドライブ (4 台まで) にスワップを設定することを推奨します。
	各ドライブのスワップパーティションはほぼ同一サイズであるべきです。
	カーネルは任意のサイズを扱うことができますが、
	内部のデータ構造は最大のスワップパーティションの 4 倍に調節されます。
	スワップパーティションをほぼ同一のサイズにしておくことで、
	カーネルはスワップスペースを最適なかたちでディスクをまたいでストライプさせることができます。
	あなたが通常スワップをたくさん使わないとしても、
	多くのスワップサイズを用意しておくと良いでしょう。
	プログラムが暴走しても再起動させられる前に回復することが容易になります。</p><p>システムを適切にパーティション化することで、
	  小さいが書き込みの激しいパーティションによって引き起こされるフラグメント化を、
	  読み出し専門のパーティションにまで波及させずにすみます。
	  また、書き込みの激しいパーティションをディスクの周辺部に配置することで、
	  <acronym class="acronym">I/O</acronym> パフォーマンスを増大させることができます。
	  大きなパーティション内の <acronym class="acronym">I/O</acronym>
	  パフォーマンスもまた必要とされているでしょうが、
	  ディスク周辺部へ移動させたとしても、
	  <code class="filename">/var</code>
	  を周辺部に移動させることによって大きな効果が得られたのとは対照的に、
	  意味のあるパフォーマンスの増加は見込めないでしょう。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-part-guided"></a>2.6.2. Guided によるパーティションの分割</h3></div></div></div><p>この方法を選択すると、
	メニューには利用可能なディスクが表示されます。
	複数のディスクが接続されている場合には、
	FreeBSD をインストールするディスクを選択してください。</p><div class="figure"><a id="bsdinstall-part-guided-disk"></a><div class="figure-title">図2.13 複数のディスクから選択する</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-guided-disk.png" alt="複数のディスクから選択する" /></div></div></div><br class="figure-break" /><p>ディスクを選択したら、次のメニューでは、
	ディスクのすべてにインストールを行うか、
	または空き容量にパーティションを作成してインストールを行うかを設定します。
	<span class="guibutton">[ Entire Disk ]</span> を選択すると、
	一般的なパーティションレイアウトが自動的に作成されます。
	<span class="guibutton">[ Partition ]</span> を選択すると、
	ディスクの使用していない領域にパーティションレイアウトを作成します。</p><div class="figure"><a id="bsdinstall-part-entire-part"></a><div class="figure-title">図2.14 Entire Disk または Partition の選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-entire-part.png" alt="Entire Disk または Partition の選択" /></div></div></div><br class="figure-break" /><p>パーティションのレイアウトを作成したら、
	インストールの条件を満たしているかどうかを深く確認してください。
	<span class="guibutton">[ Revert ]</span> を選択すると、
	パーティションをオリジナルの値にリセットします。
	また、<span class="guibutton">[ Auto ]</span> を選択すると、
	FreeBSD パーティションを自動的に作成します。
	パーティションを手動で作成、変更、削除することもできます。
	正しくパーティションを作成出来たら、
	<span class="guibutton">[ Finish ]</span> を選択し、
	インストールを進めてください。</p><div class="figure"><a id="bsdinstall-part-review"></a><div class="figure-title">図2.15 作成されたパーティションの確認</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-review.png" alt="作成されたパーティションの確認" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-part-manual"></a>2.6.3. Manual によるパーティションの分割</h3></div></div></div><p>この方法を選択すると、
	パーティションエディタが起動します。</p><div class="figure"><a id="bsdinstall-part-manual-create"></a><div class="figure-title">図2.16 Manual によるパーティションの分割</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-manual-create.png" alt="Manual によるパーティションの分割" /></div></div></div><br class="figure-break" /><p>インストール先のドライブ
	(この例では <code class="filename">ada0</code>) を選び、
	<span class="guibutton">[ Create ]</span> を選択すると、
	利用可能なパーティションスキームの一覧が表示されます。</p><div class="figure"><a id="bsdinstall-part-manual-partscheme"></a><div class="figure-title">図2.17 手動でパーティションを作成する</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-manual-partscheme.png" alt="手動でパーティションを作成する" /></div></div></div><br class="figure-break" /><p>amd64 コンピュータでは、通常 <acronym class="acronym">GPT</acronym>
	が最も適切な選択となります。
	<acronym class="acronym">GPT</acronym> に対応していないような古いコンピュータでは、
	<acronym class="acronym">MBR</acronym> を使う必要があります。
	他のパーティションスキームは、使うことがまれであったり、
	古いコンピュータで用いられるものです。</p><div class="table"><a id="idp78512464"></a><div class="table-title">表2.1 パーティションスキーム</div><div class="table-contents"><table summary="パーティションスキーム" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th align="left">省略形</th><th align="left">説明</th></tr></thead><tbody><tr><td align="left">APM</td><td align="left"><span class="trademark">PowerPC</span>® で使われている Apple Partition Map</td></tr><tr><td align="left">BSD</td><td align="left"><acronym class="acronym">MBR</acronym> を用いない
	      <acronym class="acronym">BSD</acronym> ラベル。
	      <acronym class="acronym">BSD</acronym>
	      以外のディスクユーティリティは認識しないため、しばしば
	      <em class="firstterm">dangerously dedicated mode</em>
	      と呼ばれます。</td></tr><tr><td align="left">GPT</td><td align="left">GUID Partition Table (<a class="link" href="http://en.wikipedia.org/wiki/GUID_Partition_Table" target="_top">http://en.wikipedia.org/wiki/GUID_Partition_Table</a>)</td></tr><tr><td align="left">MBR</td><td align="left">Master Boot Record (<a class="link" href="http://en.wikipedia.org/wiki/Master_boot_record" target="_top">http://en.wikipedia.org/wiki/Master_boot_record</a>)</td></tr><tr><td align="left">PC98</td><td align="left">NEC PC-98 コンピュータで使われている
	      <acronym class="acronym">MBR</acronym> の亜種 (<a class="link" href="http://en.wikipedia.org/wiki/Pc9801" target="_top">http://en.wikipedia.org/wiki/Pc9801</a>)</td></tr><tr><td align="left">VTOC8</td><td align="left">Volume Table Of Contents。
	      Sun SPARC64 および UltraSPARC コンピュータで使われます。</td></tr></tbody></table></div></div><br class="table-break" /><p>パーティションスキームを選択して作成した後で、
	もう一度 <span class="guibutton">[ Create ]</span> を選択すると、
	パーティションが作成されます。</p><div class="figure"><a id="bsdinstall-part-manual-addpart"></a><div class="figure-title">図2.18 手動でパーティションを作成する</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-manual-addpart.png" alt="手動でパーティションを作成する" /></div></div></div><br class="figure-break" /><p>標準の FreeBSD <acronym class="acronym">GPT</acronym> のインストールでは、
	少なくとも 3 つのパーティションが使われます。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">freebsd-boot</code> - FreeBSD
	    ブートコードを含んでいます。</p></li><li class="listitem"><p><code class="literal">freebsd-ufs</code> - FreeBSD
	    <acronym class="acronym">UFS</acronym> ファイルシステム。</p></li><li class="listitem"><p><code class="literal">freebsd-swap</code> - FreeBSD
	    スワップ空間。</p></li></ul></div><p>他のパーティション形式に <code class="literal">freebsd-zfs</code>
	があります。
	これは FreeBSD <acronym class="acronym">ZFS</acronym>
	ファイルシステム (<a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/filesystems-zfs.html" target="_top">
	  The Z File System (ZFS)</a>) を含めるためのものです。
	利用可能な <acronym class="acronym">GPT</acronym>
	パーティションタイプについては、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gpart&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gpart</span>(8)</span></a>
	をご覧ください。</p><p>複数のファイルシステムのパーティションを作成できます。
	<code class="filename">/</code>, <code class="filename">/var</code>,
	<code class="filename">/tmp</code> そして <code class="filename">/usr</code>
	といった伝統的なパーティション分割のレイアウトを好む人もいます。
	レイアウトの例が <a class="xref" href="#bsdinstall-part-manual-splitfs" title="例2.1 伝統的なファイルシステムのパーティションを作成する。">例2.1「伝統的なファイルシステムのパーティションを作成する。」</a> にあります。</p><p><code class="literal">Size</code> には、
	<span class="emphasis"><em>K</em></span> (キロバイト)、
	<span class="emphasis"><em>M</em></span> (メガバイト)、
	<span class="emphasis"><em>G</em></span> (ギガバイト)
	といった通常の省略形を使用出来ます。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">セクタを適切に配置することで、
	  最良のパフォーマンスを得ることができます。
	  また、パーティションサイズを 4K バイトの偶数倍にすると、
	  512 バイトまたは 4K バイトのセクタでドライブが配置しやすくなります。 一般的に、
	  4K の偶数倍の場所からパーティションが開始するように設定する簡単な方法は、
	  1M または 1G の偶数倍のパーティションサイズを用いることです。
	  ただし、例外があります。
	  <span class="emphasis"><em>freebsd-boot</em></span> パーティションは、
	  ブートコードの制限により 512K 以下である必要があります。</p></div><p>ファイルシステムを持つパーティションでは、
	<code class="literal">Mountpoint</code> が必要となります。
	1 つの <acronym class="acronym">UFS</acronym> パーティションだけを作成したのであれば、
	マウントポイントは <code class="filename">/</code> となります。</p><p><code class="literal">Label</code>
	は作成したパーティションを認識するための名前です。
	ドライブ名や番号は、
	ドライブが別のコントローラやポートに接続されると変わることがありますが、
	パーティションラベルは変わりません。
	<code class="filename">/etc/fstab</code> のようなファイルの中で、
	ドライブ名やパーティション番号ではなく、ラベルを参照することにより、
	システムがハードウェアの変更に対して、より寛容になります。
	<acronym class="acronym">GPT</acronym> ラベルは、
	ディスクが接続されると <code class="filename">/dev/gpt/</code>
	に現れます。他のパーティションスキームでは別のラベルとなり、
	<code class="filename">/dev/</code>
	以下の異なるディレクトリにラベルが現れます。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">名前の衝突を避けるため、
	  各パーティションには、一意的な名前使ってください。
	  コンピュータ名、使用、位置情報を表す単語をラベルに追加できます。
	  たとえば、<code class="literal">lab</code> という名前のコンピュータの
	  <acronym class="acronym">UFS</acronym> の root パーティションには、
	  <code class="literal">labroot</code> または
	  <code class="literal">rootfs-lab</code> といった名前を使ってください。</p></div><div class="example"><a id="bsdinstall-part-manual-splitfs"></a><div class="example-title">例2.1 伝統的なファイルシステムのパーティションを作成する。</div><div class="example-contents"><p>伝統的なパーティションレイアウト
	  (<code class="filename">/</code>, <code class="filename">/var</code>,
	  <code class="filename">/tmp</code> および <code class="filename">/usr</code>
	  ディレクトリが各パーティションの別のファイルシステム)
	  を作成するには、
	  <acronym class="acronym">GPT</acronym> パーティションスキームを作成し、
	  その後、示されているようにパーティションを作成してください。
	  示されているパーティションサイズは 20G のディスク用です。
	  ディスクにより多くの容量があれば、swap または
	  <code class="filename">/var</code>
	  パーティションを大きく取ると良いでしょう。
	  ここで示されているラベルには、
	  <code class="literal">example</code> を意味する
	  <code class="literal">ex</code> が付けられていますが、
	  実際には上で説明したように、
	  これとは別のユニークなラベルをつけてください。</p><p>FreeBSD の <code class="filename">gptboot</code> は、
	  デフォルトでは最初に見つかった
	  <acronym class="acronym">UFS</acronym> パーティションが、
	  <code class="filename">/</code> パーティションであることを前提としています。</p><div class="informaltable"><table border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>パーティションタイプ</th><th>サイズ</th><th>マウントポイント</th><th>ラベル</th></tr></thead><tbody><tr><td><code class="literal">freebsd-boot</code></td><td><code class="literal">512K</code></td><td class="auto-generated">〓</td><td class="auto-generated">〓</td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td><code class="literal">2G</code></td><td><code class="filename">/</code></td><td><code class="literal">exrootfs</code></td></tr><tr><td><code class="literal">freebsd-swap</code></td><td><code class="literal">4G</code></td><td>〓</td><td><code class="literal">exswap</code></td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td><code class="literal">2G</code></td><td><code class="filename">/var</code></td><td><code class="literal">exvarfs</code></td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td><code class="literal">1G</code></td><td><code class="filename">/tmp</code></td><td><code class="literal">extmpfs</code></td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td>デフォルト (ディスクの残りのすべての容量)</td><td><code class="filename">/usr</code></td><td><code class="literal">exusrfs</code></td></tr></tbody></table></div></div></div><br class="example-break" /><p>カスタムパーティション を作成したら
	<span class="guibutton">[ Finish ]</span> を選択して、
	インストールを先に進んでください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-part-zfs"></a>2.6.4. root-on-ZFS パーティションの自動作成</h3></div></div></div><p>root-on-ZFS のインストール時の自動作成は、
	FreeBSD 10.0-RELEASE から対応しました。
	このパーティションのモードは、
	ディスクのすべての領域に対して機能するので、
	ディスク上にあるすべての内容を消去してしまいます。
	インストーラは、<acronym class="acronym">ZFS</acronym> が 4k セクタを使うように、
	自動的に 4k の境界にアラインするようパーティションを作成します。
	512 バイトセクタのディスクでも利用できます。
	512 バイトのディスクで作成されたプールに、
	将来ストレージ空間を追加したり、壊れたディスクの置き換えにおいて、4k
	セクタのディスクを追加できるようにしておくことにはメリットがあります。
	インストーラはオプションとして、
	<acronym class="acronym">GELI</acronym> ディスクの暗号化にも対応しています。
	
	暗号化を有効にすると、<code class="filename">/boot</code>
	ディレクトリを含む 2 GB
	の暗号化されていないブートプールが作成されます。
	ここには、カーネルとシステムを起動するのに必要なファイルが含まれます。
	ユーザがサイズを選択可能な swap パーティションも作成され、
	残りのスペースが <acronym class="acronym">ZFS</acronym> プールとして使われます。</p><p>インストーラの <acronym class="acronym">ZFS</acronym> 設定メニューには、
	プールの作成をコントロールする数多くのオプションが用意されています。</p><div class="figure"><a id="bsdinstall-zfs-menu"></a><div class="figure-title">図2.19 <acronym class="acronym">ZFS</acronym> パーティションメニュー</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-menu.png" alt="ZFS パーティションメニュー" /></div></div></div><br class="figure-break" /><p><span class="keycap"><strong>T</strong></span> を選択して、<code class="literal">Pool Type</code>
	およびプールに対応するディスクを選択してください。
	現在のところ、自動の <acronym class="acronym">ZFS</acronym> インストーラは、
	ストライプモードを除き、
	単一のトップレベルの仮想デバイスの作成のみに対応しています。
	より複雑なプールを作成するには、<a class="xref" href="#bsdinstall-part-shell" title="2.6.5. シェルモードによるパーティションの作成">「シェルモードによるパーティションの作成」</a>
	で説明されている方法で作成してください。
	インストーラは、ストライプ (推奨されません。冗長性なし)、ミラー
	(ベストなパフォーマンス。使用できる容量は最小) および RAID-Z 1, 2
	および 3 (それぞれ 1, 2 および 3 ディスクの同時障害へ対応)、
	といったさまざまなタイプのプールの作成に対応しています。
	選択されているプールタイプに対しては、スクリーンの下に、
	必要なディスク数、RAID-Z の場合には、
	各設定に対して最適なディスクの数についてのアドバイスが表示されます。</p><div class="figure"><a id="bsdinstall-zfs-vdev_type"></a><div class="figure-title">図2.20 <acronym class="acronym">ZFS</acronym> プールタイプ</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-vdev_type.png" alt="ZFS プールタイプ" /></div></div></div><br class="figure-break" /><p><code class="literal">Pool Type</code> を選択したら、
	利用可能なディスクの一覧が表示されます。
	その後、プールを構成するディスクを、1 つまたは複数選択してください。
	十分なディスクが選択されているかどうかについて検証が行われます。
	もし、問題があるようでしたら、
	<span class="guibutton">&lt;Change Selection&gt;</span>
	を選択して、ィスクの一覧に戻ってください。
	もしくは、
	<span class="guibutton">&lt;Cancel&gt;</span> を選択して、
	プールのタイプを変更してください。</p><div class="figure"><a id="bsdinstall-zfs-disk_select"></a><div class="figure-title">図2.21 ディスクの選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-disk_select.png" alt="ディスクの選択" /></div></div></div><br class="figure-break" /><div class="figure"><a id="bsdinstall-zfs-vdev_invalid"></a><div class="figure-title">図2.22 問題のある選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-vdev_invalid.png" alt="問題のある選択" /></div></div></div><br class="figure-break" /><p>この一覧の中に抜けているディスクがある時や、
	インストーラが立ち上がった後にディスクを接続した場合に、
	最新の利用可能なディスクの一覧を見るには、
	<span class="guibutton">- Rescan Devices</span> を選択してください。
	間違ったディスクをアクシデントで破壊しないように、
	適切なディスクが選択されていることを確認するには、
	<span class="guibutton">- Disk Info</span> メニュー選択して、
	各ディスクのパーティションテーブル、および、
	デバイスモデル番号およびシリアル番号などのさまざまな情報を確認してください。</p><div class="figure"><a id="bsdinstall-zfs-disk_info"></a><div class="figure-title">図2.23 ディスクの解析</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-disk_info.png" alt="ディスクの解析" /></div></div></div><br class="figure-break" /><p>メインの <acronym class="acronym">ZFS</acronym> 設定メニューでは、
	pool 名の入力、4k セクタ制限の設定の無効化、
	暗号化の有効 / 無効の設定、パーティションテーブルタイプの
	<acronym class="acronym">GPT</acronym> (推奨)
	と <acronym class="acronym">MBR</acronym> の切り替え、
	そしてスワップ領域の容量を設定できます。
	すべてのオプションが適切な値に設定されたら、
	メニューのトップにある
	<span class="guibutton">&gt;&gt;&gt; Install</span>
	オプションを選択してください。</p><p><acronym class="acronym">GELI</acronym> ディスク暗号化を有効にしていたら、
	ディスクを暗号化するために用いるパスフレーズを 2 度求められます。</p><div class="figure"><a id="bsdinstall-zfs-geli_password"></a><div class="figure-title">図2.24 ディスク暗号化パスワード</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-geli_password.png" alt="ディスク暗号化パスワード" /></div></div></div><br class="figure-break" /><p>インストーラは <acronym class="acronym">ZFS</acronym>
	プールを作成するために選択されたドライブの中身を破棄することの最終確認を行います。</p><div class="figure"><a id="bsdinstall-zfs-warning"></a><div class="figure-title">図2.25 最終確認</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-warning.png" alt="最終確認" /></div></div></div><br class="figure-break" /><p>その後のインストールの過程は、通常通りに進みます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-part-shell"></a>2.6.5. シェルモードによるパーティションの作成</h3></div></div></div><p>高度なインストールを行うには、<span class="application">bsdinstall</span>
	が提供するパーティション分割のメニューは柔軟性にかけることがあります。
	高度な技術を持つユーザは、パーティションメニューで      
	<span class="guibutton">Shell</span> オプションを選択することで、
	手動でドライブを分割して、ファイルシステムを作成し、
	<code class="filename">/tmp/bsdinstall_etc/fstab</code> を作成し、
	<code class="filename">/mnt</code>
	以下にファイルシステムをマウントできます。
	以上を実行したら、
	<code class="command">exit</code> を実行して
	<span class="application">bsdinstall</span> に戻り、
	インストールを続けてください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-final-warning"></a>2.7. インストール操作の確定</h2></div></div></div><p>ディスクを一度設定すると、次のメニューは、
      選択したハードドライブをフォーマットする前に、
      設定を変更する最後のチャンスです。
      もし変更が必要であれば、
      <span class="guibutton">[ Back ]</span>
      を選択してメインのパーティションエディタまで戻ってください。
      <span class="guibutton">[ Revert &amp; Exit ]</span>
      を選択すると、
      ハードドライブへの変更なしにインストールを終了します。</p><div class="figure"><a id="bsdinstall-final-confirmation"></a><div class="figure-title">図2.26 最後の確認</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-final-confirmation.png" alt="最後の確認" /></div></div></div><br class="figure-break" /><p>本当にインストールを開始するのであれば、
      <span class="guibutton">[ Commit ]</span> を選択して、
      <span class="keycap"><strong>Enter</strong></span> を押してください。</p><p>インストールにかかる時間は、どのディストリビューションを選んだか、
      どのインストールメディアを使ったか、
      そしてコンピュータの速度にも依存します。
      進行状況を表すメッセージが逐次表示されます。</p><p>まず最初に、インストーラは選択されているディスクをフォーマットし、
      パーティションを初期化します。
      bootonly メディアを用いたインストールでは、
      選択されたコンポーネントがダウンロードされます。</p><div class="figure"><a id="bsdinstall-distfile-fetching"></a><div class="figure-title">図2.27 配布ファイルのダウンロード</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-distfile-fetching.png" alt="配布ファイルのダウンロード" /></div></div></div><br class="figure-break" /><p>次に、ダウンロードの際にエラーが含まれなかったか、
      インストールメディアからの読み取り中に読み間違いが起きなかったかどうか等、
      配布ファイルの完全性の検証が行われます。</p><div class="figure"><a id="bsdinstall-distfile-verify"></a><div class="figure-title">図2.28 配布ファイルの検証</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-distfile-verifying.png" alt="配布ファイルの検証" /></div></div></div><br class="figure-break" /><p>最後に、検証された配布ファイルがディスクへ取り出されます。</p><div class="figure"><a id="bsdinstall-distfile-extract"></a><div class="figure-title">図2.29 配布ファイルの取り出し</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-distfile-extracting.png" alt="配布ファイルの取り出し" /></div></div></div><br class="figure-break" /><p>必要な配布ファイルがすべて取り出されたら、
      <span class="application">bsdinstall</span> は、
      インストール後の設定画面を表示します。
      利用可能なインストール後のオプションについては次の章で説明します。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-post"></a>2.8. インストール後の作業</h2></div></div></div><p>FreeBSD のインストールが完了したら、
      新しくインストールしたシステムで起動する前に、
      <span class="application">bsdinstall</span> は、
      さまざまなオプションの設定に移ります。
      この章では、これらのオプションについて説明します。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">一度システムを起動した後は、
        <code class="command">bsdconfig</code> を使って、メニュー形式により、
	ここで説明するオプションや追加のオプションでシステムを設定できます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-post-root"></a>2.8.1. <code class="systemitem">root</code> パスワードの設定</h3></div></div></div><p>最初に <code class="systemitem">root</code>
	のパスワードを設定する必要があります。
	パスワードを入力している際には、
	入力している文字は画面に表示されません。
	パスワードの入力後、もう一度入力する必要があります。
	これは入力ミスを防ぐためです。</p><div class="figure"><a id="bsdinstall-post-set-root-passwd"></a><div class="figure-title">図2.30 <code class="systemitem">root</code> パスワードの設定</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-post-root-passwd.png" alt="root パスワードの設定" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-config-network-dev"></a>2.8.2. ネットワークインタフェースの設定</h3></div></div></div><p>次に、
	コンピュータが認識したすべてのネットワークインタフェースが表示されます。
	設定するネットワークインタフェースを選んでください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="emphasis"><em>bootonly</em></span> によるインストールの一部として、
	  すでにネットワークの設定を終えているのであれば、
	  このネットワークの設定メニューは飛ばしてください。</p></div><div class="figure"><a id="bsdinstall-configure-net-interface"></a><div class="figure-title">図2.31 イーサネットインタフェースの選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-interface.png" alt="イーサネットインタフェースの選択" /></div></div></div><br class="figure-break" /><p>イーサネットインタフェースを選択したのであれば、<a class="xref" href="#bsdinstall-configure-net-ipv4" title="図2.35 IPv4 ネットワークの選択">図2.35「<acronym class="acronym">IPv4</acronym> ネットワークの選択」</a>
	で表示されるメニューまで飛びます。
	ワイヤレスネットワークを選択したのであれば、
	システムはワイヤレスアクセスポイントをスキャンします。</p><div class="figure"><a id="bsdinstall-wireless-scan"></a><div class="figure-title">図2.32 ワイヤレスアクセスポイントのスキャン</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-wireless-scan.png" alt="ワイヤレスアクセスポイントのスキャン" /></div></div></div><br class="figure-break" /><p>ワイヤレスネットワークは Service Set Identifier
	(<acronym class="acronym">SSID</acronym>) によって識別されます。
	<acronym class="acronym">SSID</acronym> は、それぞれのネットワークに与えられる、
	短く、一意的な名前です。
	スキャンで見つかった <acronym class="acronym">SSID</acronym> の一覧は、
	そのネットワークで利用できる暗号化のタイプの説明とともに表示されます。
	もし、期待した <acronym class="acronym">SSID</acronym>
	が一覧に表示されていなければ、
	<span class="guibutton">[ Rescan ]</span>
	を選択してもう一度スキャンしてください。
	もし、期待したネットワークが表示されなければ、
	接続のためのアンテナを確認したり、
	コンピュータをアクセスポイントの近くに移動させてみてください。
	その後もう一度スキャンしてください。</p><div class="figure"><a id="bsdinstall-wireless-accesspoints"></a><div class="figure-title">図2.33 ワイヤレスネットワークの選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-wireless-accesspoints.png" alt="ワイヤレスネットワークの選択" /></div></div></div><br class="figure-break" /><p>次に、
	ワイヤレスネットワークに接続するための暗号情報を入力してください。
	<acronym class="acronym">WEP</acronym> のような古い暗号の安全性は低いので、
	<acronym class="acronym">WPA2</acronym> 暗号が強く推奨されます。
	<acronym class="acronym">WPA2</acronym> を使用してるネットワークでは、
	Pre-Shared Key (<acronym class="acronym">PSK</acronym>)
	と呼ばれるパスワードを入力してください。
	セキュリティ上の観点から、
	入力ボックスに入力した文字はアスタリスクで表示されます。</p><div class="figure"><a id="bsdinstall-wireless-wpa2"></a><div class="figure-title">図2.34 WPA2 のセットアップ</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-wireless-wpa2setup.png" alt="WPA2 のセットアップ" /></div></div></div><br class="figure-break" /><p>次は、イーサネットもしくはワイヤレスインタフェースに対して、
        <acronym class="acronym">IPv4</acronym> を設定するかどうかを選択します。</p><div class="figure"><a id="bsdinstall-configure-net-ipv4"></a><div class="figure-title">図2.35 <acronym class="acronym">IPv4</acronym> ネットワークの選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-interface-ipv4.png" alt="IPv4 ネットワークの選択" /></div></div></div><br class="figure-break" /><p><acronym class="acronym">IPv4</acronym> の設定方法は 2 通りあります。
	<span class="emphasis"><em><acronym class="acronym">DHCP</acronym></em></span>
	はネットワークインタフェースを自動的に適切に設定する方法で、
	<acronym class="acronym">DHCP</acronym> サーバのあるネットワークでは使用すべきです。
	もし、<acronym class="acronym">DHCP</acronym> を利用できない環境では、
	静的な設定として、
	ネットワークのアドレス情報を手動で入力する必要があります。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">適当なネットワーク情報を入力しても動かないので、
	  <acronym class="acronym">DHCP</acronym> サーバが利用できなのであれば、
	  ネットワーク管理者またはサービスプロバイダから <a class="xref" href="#bsdinstall-collect-network-information" title="必要となるネットワーク情報">必要となるネットワーク情報</a>
	  に示されている情報を入手してください。</p></div><p><acronym class="acronym">DHCP</acronym> サーバを利用できるのであれば、
	次のメニューで <span class="guibutton">[ Yes ]</span> を選択して、
	ネットワークインタフェースの設定を自動的に行ってください。
	インストーラは <acronym class="acronym">DHCP</acronym> サーバを検索し、
	システムに対するアドレス情報を入手するために、
	少しの間停止しているように表示されます。</p><div class="figure"><a id="bsdinstall-net-ipv4-dhcp"></a><div class="figure-title">図2.36 <acronym class="acronym">IPv4</acronym>
	  <acronym class="acronym">DHCP</acronym> 設定の選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-interface-ipv4-dhcp.png" alt="IPv4 DHCP 設定の選択" /></div></div></div><br class="figure-break" /><p><acronym class="acronym">DHCP</acronym> サーバを利用できない環境では、
	<span class="guibutton">[ No ]</span> を選択し、
	このメニューにおいて以下のアドレス情報を入力してください。</p><div class="figure"><a id="bsdinstall-net-ipv4-static"></a><div class="figure-title">図2.37 <acronym class="acronym">IPv4</acronym> の静的な設定</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-interface-ipv4-static.png" alt="IPv4 の静的な設定" /></div></div></div><br class="figure-break" /><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">IP Address</code> -
	    コンピュータに手動で与える <acronym class="acronym">IPv4</acronym> アドレスです。
	    このアドレスは一意的なものである必要があり、
	    すでにローカルネットワーク上の他のネットワーク機器で使われているものではいけません。</p></li><li class="listitem"><p><code class="literal">Subnet Mask</code> -
	    ネットワークのサブネットマスクです。</p></li><li class="listitem"><p><code class="literal">Default Router</code> -
	    このネットワークのデフォルトゲートウェイの <acronym class="acronym">IP</acronym>
	    アドレスです。</p></li></ul></div><p>次の画面では、インタフェースを <acronym class="acronym">IPv6</acronym>
	で設定すべきかを選択します。
	<acronym class="acronym">IPv6</acronym> が利用でき、希望するのであれば、
	<span class="guibutton">[ Yes ]</span> を選択してください。</p><div class="figure"><a id="bsdinstall-net-ipv6"></a><div class="figure-title">図2.38 IPv6 ネットワークの選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-interface-ipv6.png" alt="IPv6 ネットワークの選択" /></div></div></div><br class="figure-break" /><p><acronym class="acronym">IPv6</acronym> の設定に関しても 2 つの方法があります。
	StateLess Address AutoConfiguration
	(<span class="emphasis"><em><acronym class="acronym">SLAAC</acronym></em></span>)
	は、ローカルルータから適切なネットワーク設定情報を入手するように、
	自動的にリクエストします。
	詳細については <a class="link" href="http://tools.ietf.org/html/rfc4862" target="_top">http://tools.ietf.org/html/rfc4862</a>
	を参照してください。静的な設定では、
	ネットワーク情報を手動で入力する必要があります。</p><p><acronym class="acronym">IPv6</acronym> ルータを利用できるのであれば、
	次のメニューで <span class="guibutton">[ Yes ]</span> を選択し、
	ネットワークインタフェースの設定を自動的に行ってください。
	インストーラはルータを見つけ出し、
	システムに対するアドレス情報を入手するために、
	少しの間停止しているように表示されます。</p><div class="figure"><a id="bsdinstall-net-ipv6-slaac"></a><div class="figure-title">図2.39 <acronym class="acronym">IPv6</acronym> SLAAC 設定の選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-interface-slaac.png" alt="IPv6 SLAAC 設定の選択" /></div></div></div><br class="figure-break" /><p><acronym class="acronym">IPv6</acronym> ルータが利用できない環境では、
	<span class="guibutton">[ No ]</span> を選択して、
	表示されるメニューで以下のアドレス情報を入力する必要があります。</p><div class="figure"><a id="bsdinstall-net-ipv6-static"></a><div class="figure-title">図2.40 IPv6 の静的な設定</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-interface-ipv6-static.png" alt="IPv6 の静的な設定" /></div></div></div><br class="figure-break" /><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">IPv6 Address</code> -
	    このコンピュータに割り当てられた
	    <acronym class="acronym">IPv6</acronym> アドレスです。
	    このアドレスは一意的なものである必要があり、
	    すでにローカルネットワーク上の他のネットワーク機器で使われているものではいけません。</p></li><li class="listitem"><p><code class="literal">Default Router</code> -
	    このネットワークのデフォルトゲートウェイの <acronym class="acronym">IPv6</acronym>
	    アドレスです。</p></li></ul></div><p>最後のネットワークメニューでは、
	Domain Name System (<acronym class="acronym">DNS</acronym>)
	リゾルバを設定します。
	これは、ホスト名とネットワークアドレスを変換します。
	すでに <acronym class="acronym">DHCP</acronym> または <acronym class="acronym">SLAAC</acronym>
	を使って自動的にネットワークインタフェースを設定したのであれば、
	<code class="literal">Resolver Configuration</code>
	には値がすでに入っているでしょう。
	そうでなければ、<code class="literal">Search</code>
	フィールドにローカルネットワークのドメイン名を入力してください。
	<code class="literal">DNS</code> #1 および <code class="literal">DNS</code> #2 は、
	ローカル <acronym class="acronym">DNS</acronym> サーバの
	<acronym class="acronym">IPv4</acronym> または <acronym class="acronym">IPv6</acronym> アドレスです。
	少なくとも、1 つの <acronym class="acronym">DNS</acronym> サーバは必要です。</p><div class="figure"><a id="bsdinstall-net-dns-config"></a><div class="figure-title">図2.41 DNS の設定</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-ipv4-dns.png" alt="DNS の設定" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-timezone"></a>2.8.3. タイムゾーンの設定</h3></div></div></div><p>次のメニューでは、システムのクロックが <acronym class="acronym">UTC</acronym>
	を使うか、ローカルタイムを使うかを設定します。
	迷ったら、<span class="guibutton">[ No ]</span> を選択して、
	良く使われているローカルタイムを選択してください。</p><div class="figure"><a id="bsdinstall-local-utc"></a><div class="figure-title">図2.42 ローカルまたは UTC クロックの選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-set-clock-local-utc.png" alt="ローカルまたは UTC クロックの選択" /></div></div></div><br class="figure-break" /><p>次のメニューでは、地域、国、タイムゾーンを指定します。
	使用しているシステムのタイムゾーンを設定することで、
	夏時間などの地域による時刻の違いが自動的に調整され、
	タイムゾーンに関連した機能が適切に取り扱われます。</p><p>ここでの例では、United States の
	Eastern タイムゾーンにあるコンピュータに対するものです。
	実際の地理的位置に対応するタイムゾーンを設定してください。</p><div class="figure"><a id="bsdinstall-timezone-region"></a><div class="figure-title">図2.43 地域の選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-timezone-region.png" alt="地域の選択" /></div></div></div><br class="figure-break" /><p>矢印キーを使って、適切な地域を選択し、
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="bsdinstall-timezone-country"></a><div class="figure-title">図2.44 国名の選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-timezone-country.png" alt="国名の選択" /></div></div></div><br class="figure-break" /><p>矢印キーを使って、適切に国名を選び、
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="bsdinstall-timezone-zone"></a><div class="figure-title">図2.45 タイムゾーンの選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-timezone-zone.png" alt="タイムゾーンの選択" /></div></div></div><br class="figure-break" /><p>矢印キーを使って適切なタイムゾーンを選択し、
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="bsdinstall-timezone-confirmation"></a><div class="figure-title">図2.46 タイムゾーンの確定</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-timezone-confirm.png" alt="タイムゾーンの確定" /></div></div></div><br class="figure-break" /><p>タイムゾーンの省略形が正しいかどうかを確認してください。
	問題がないようであれば <span class="keycap"><strong>Enter</strong></span> を押して、
	インストール後の設定を続けてください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-sysconf"></a>2.8.4. サービスを有効にする</h3></div></div></div><p>次のメニューでは、システムが起動した時に、
	起動するシステムサービスを設定します。
	これらのサービスはすべてオプションです。
	システムの機能として必要なサービスだけを起動するようにしてください。</p><div class="figure"><a id="bsdinstall-config-serv"></a><div class="figure-title">図2.47 追加で有効にするサービスの選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-config-services.png" alt="追加で有効にするサービスの選択" /></div></div></div><br class="figure-break" /><p>このメニューで有効にできるサービスは以下の通りです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">sshd</code> - セキュアシェル
	    (<acronym class="acronym">SSH</acronym>) デーモンは、
	    暗号化された接続上でリモートアクセスするために使われます。
	    システムがリモートログインを必要とする場合のみ、
	    このサービスを有効にしてください。</p></li><li class="listitem"><p><code class="literal">moused</code> - システムのコンソールで、
	    マウスを利用する時に、このサービスを有効にしてください。</p></li><li class="listitem"><p><code class="literal">ntpd</code> - 自動時刻同期のための
	    The Network Time Protocol
	    (<acronym class="acronym">NTP</acronym>) デーモン。
	    ネットワーク上に、
	    <span class="trademark">Windows</span>®, Kerberos または <acronym class="acronym">LDAP</acronym> 
	    サーバがあるときには、このサービスを有効にしてください。</p></li><li class="listitem"><p><code class="literal">powerd</code> -
	    電源の管理およびエネルギーを節約するための電源コントロールユーティリティ</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-crashdump"></a>2.8.5. クラッシュダンプの設定</h3></div></div></div><p>次のメニューでは、
	クラッシュダンプを有効にするかどうかを設定します。
	システムのデバッグを行う上で、
	クラッシュダンプにより得られる情報は非常に有用です。
	可能であればクラッシュダンプを有効にすると良いでしょう。</p><div class="figure"><a id="bsdinstall-config-crashdump"></a><div class="figure-title">図2.48 クラッシュダンプの設定</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-config-crashdump.png" alt="クラッシュダンプの設定" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-addusers"></a>2.8.6. ユーザの追加</h3></div></div></div><p>次のメニューでは、少なくとも一人のユーザを追加してください。
	システムには <code class="systemitem">root</code>
	ではなく、ユーザアカウントでログインすることが推奨されています。
	<code class="systemitem">root</code>
	権限でログインすると、実行に対して制限がなく、また、保護されません。
	通常のユーザでログインすることにより、
	安全でセキュリティ的に危険が少なくなります。</p><p><span class="guibutton">[ Yes ]</span> を選択し、
	新しいユーザを追加してください。</p><div class="figure"><a id="bsdinstall-add-user1"></a><div class="figure-title">図2.49 新しいユーザのアカウントの作成</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-adduser1.png" alt="新しいユーザのアカウントの作成" /></div></div></div><br class="figure-break" /><p>プロンプトに従い、
	ユーザアカウントの作成で必要となる情報を入力してください。
	<a class="xref" href="#bsdinstall-add-user2" title="図2.50 ユーザ情報の入力">図2.50「ユーザ情報の入力」</a> で示されている例では、<code class="systemitem">asample</code> ユーザアカウントを作成します。</p><div class="figure"><a id="bsdinstall-add-user2"></a><div class="figure-title">図2.50 ユーザ情報の入力</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-adduser2.png" alt="ユーザ情報の入力" /></div></div></div><br class="figure-break" /><p>以下は、入力情報のまとめです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">Username</code> -
	    ログイン時のユーザ名を入力します。一般的な慣習では、
	    ファーストネームの最初の文字とラストネームを、
	    ユーザ名がシステムで一意的になる長さで組み合わせます。
	    ユーザ名は、大文字と小文字を区別し、
	    空白を含んではいけません。</p></li><li class="listitem"><p><code class="literal">Full name</code> - ユーザのフルネーム。
	    空白を含むことは可能です。
	    また、この情報はユーザアカウントの説明の記述に使われます。</p></li><li class="listitem"><p><code class="literal">Uid</code> - ユーザ <acronym class="acronym">ID</acronym> 番号。
	    通常は、システムが自動的に割り当てるように、
	    空欄のままにします。</p></li><li class="listitem"><p><code class="literal">Login group</code> -
	    新しいユーザのログイングループ。
	    空欄のままにすると、デフォルトに割り当てられます</p></li><li class="listitem"><p><code class="literal">Invite <em class="replaceable"><code>user</code></em> into
	    other groups?</code> -
	    ユーザを別のグループのメンバーとして追加するかどうか。
	    ユーザが管理者としてのアクセス必要であれば、
	    ここで <code class="literal">wheel</code> を入力してください。</p></li><li class="listitem"><p><code class="literal">Login class</code> -
	    空欄にするとデフォルトの設定になります。</p></li><li class="listitem"><p><code class="literal">Shell</code> -
	    一覧の中から、ユーザのシェルを入力してください。
	    シェルに関する詳細については <a class="xref" href="#shells" title="4.9. シェル">「シェル」</a>
	    をご覧ください。</p></li><li class="listitem"><p><code class="literal">Home directory</code> -
	    ユーザのホームディレクトリ。
	    通常は、デフォルトの場所が適切です。</p></li><li class="listitem"><p><code class="literal">Home directory permissions</code> -
	    ユーザのホームディレクトリの権限。
	    通常は、デフォルトが適切です。</p></li><li class="listitem"><p><code class="literal">Use password-based authentication?</code> -
	    通常は、ユーザがログイン時にパスワードの入力が要求されるように
	    <code class="literal">yes</code> と入力してください。</p></li><li class="listitem"><p><code class="literal">Use an empty password?</code> -
	    通常は、パスワードがないと安全ではなくなるので、
	    <code class="literal">no</code> です。</p></li><li class="listitem"><p><code class="literal">Use a random password?</code> -
	    通常は、次のプロンプトでユーザ自身のパスワードを入力できるように、
	    <code class="literal">no</code> です。</p></li><li class="listitem"><p><code class="literal">Enter password</code> -
	    ユーザのパスワードです。
	    入力している文字は画面に表示されません。</p></li><li class="listitem"><p><code class="literal">Enter password again</code> -
	    確認のため、パスワードをもう一度入力します。</p></li><li class="listitem"><p><code class="literal">Lock out the account after
	      creation?</code>
	    - 通常は、ユーザがログインできるようにするため、
	    <code class="literal">no</code> です。</p></li></ul></div><p>すべてを入力したら、サマリが表示され、
	正しいかどうかの確認を求められます。
	入力した情報に間違いがあれば、
	<code class="literal">no</code> を入力してもう一度作業を行なってください。
	すべてが正しく入力されていれば、
	<code class="literal">yes</code> を入力して、
	新しいユーザを作成してください。</p><div class="figure"><a id="bsdinstall-add-user3"></a><div class="figure-title">図2.51 ユーザおよびグループの管理を終了する</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-adduser3.png" alt="ユーザおよびグループの管理を終了する" /></div></div></div><br class="figure-break" /><p>さらにユーザを追加するのであれば、
	<code class="literal">Add another user?</code> の質問に対し、
	<code class="literal">yes</code> を入力してください。
      	<code class="literal">no</code> を入力すると、ユーザの追加が終わり、次に進みます。</p><p>ユーザの追加や、ユーザ管理の詳細については、
	<a class="xref" href="#users-synopsis" title="14.1. この章では">「この章では」</a> を参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-final-conf"></a>2.8.7. 最後の設定</h3></div></div></div><p>すべてをインストールし、設定が終わった後に、
	最後に設定を修正する機会が与えられます。</p><div class="figure"><a id="bsdinstall-final-config"></a><div class="figure-title">図2.52 </div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-finalconfiguration.png" /></div></div></div><br class="figure-break" /><p>インストールを完了する前に、
	このメニューを使って変更、または、追加の設定を行なってください。</p><div class="itemizedlist"><div class="itemizedlist-title">最終の設定オプション</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">Add User</code> -
	    <a class="xref" href="#bsdinstall-addusers" title="2.8.6. ユーザの追加">「ユーザの追加」</a> で説明しています。</p></li><li class="listitem"><p><code class="literal">Root Password</code> -
	    <a class="xref" href="#bsdinstall-post-root" title="2.8.1. root パスワードの設定">「<code class="systemitem">root</code> パスワードの設定」</a> で説明しています。</p></li><li class="listitem"><p><code class="literal">Hostname</code> -
	    <a class="xref" href="#bsdinstall-hostname" title="2.5.2. ホスト名の設定">「ホスト名の設定」</a> で説明しています。</p></li><li class="listitem"><p><code class="literal">Network</code> - <a class="xref" href="#bsdinstall-config-network-dev" title="2.8.2. ネットワークインタフェースの設定">「ネットワークインタフェースの設定」</a>
	    で説明しています。</p></li><li class="listitem"><p><code class="literal">Services</code> -
	    <a class="xref" href="#bsdinstall-sysconf" title="2.8.4. サービスを有効にする">「サービスを有効にする」</a> で説明しています。</p></li><li class="listitem"><p><code class="literal">Time Zone</code> -
	    <a class="xref" href="#bsdinstall-timezone" title="2.8.3. タイムゾーンの設定">「タイムゾーンの設定」</a> で説明しています。</p></li><li class="listitem"><p><code class="literal">Handbook</code> -
	    FreeBSD ハンドブックのダウンロードとインストール。</p></li></ul></div><p>最後の設定が完了したら、<span class="guibutton">Exit</span>
	を選んでください。</p><div class="figure"><a id="bsdinstall-final-modification-shell"></a><div class="figure-title">図2.53 Manual Configuration</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-final-modification-shell.png" alt="Manual Configuration" /></div></div></div><br class="figure-break" /><p>新しいシステムを再起動する前に、
	<span class="application">bsdinstall</span>
	は追加の設定が必要かどうかを尋ねてきます。
	<span class="guibutton">[ Yes ]</span>
	を選択して新しいシステムのシェルに入るか、または
	<span class="guibutton">[ No ]</span>
	を選択して、インストールの最後のステップに進んでください。</p><div class="figure"><a id="bsdinstall-final-main"></a><div class="figure-title">図2.54 インストールの終了</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-mainexit.png" alt="インストールの終了" /></div></div></div><br class="figure-break" /><p>追加の設定や、特別なセットアップが必要であれば、
	<span class="guibutton">[ Live CD ]</span>
	を選んでインストールメディアを
	Live <acronym class="acronym">CD</acronym> で起動してください。</p><p>インストールが終わったら、
	<span class="guibutton">[ Reboot ]</span> を選んで、
	コンピュータを再起動し、新しい FreeBSD システムで起動してください。
	再起動する前には、忘れずに FreeBSD インストールメディアを外してください。
	さもないと、もう一度インストールメディアから起動してしまいます。</p><p>FreeBSD の起動時には、多くのメッセージが画面に表示されます。
	システムの起動後には、ログインプロンプトが表示されます。
	<code class="prompt">login:</code> プロンプトで、
	インストール時に追加したユーザ名を入力してください。
	<code class="systemitem">root</code>
	でのログインは避けてください。管理者の権限が必要となった時に、
	スーパユーザになる方法については、<a class="xref" href="#users-superuser" title="14.2.3. スーパーユーザアカウント">「スーパーユーザアカウント」</a>
	を参照してください。</p><p>起動時に表示されていたメッセージは、
	<span class="keycap"><strong>Scroll-Lock</strong></span> を押し、
	scroll-back buffer で見ることができます。
	<span class="keycap"><strong>PgUp</strong></span>, <span class="keycap"><strong>PgDn</strong></span>
	そして矢印キーでメッセージをスクロールバックできます。
	メッセージの確認が終わったら、<span class="keycap"><strong>Scroll-Lock</strong></span>
	をもう一度押すと、ディスプレイのロックを外し、
	コンソールに戻ることができます。
	何度かシステムを起動した後で、これらのメッセージを見るには、
	コマンドプロンプトから
	<code class="command">less /var/run/dmesg.boot</code>
	と入力してください。
	確認後に <span class="keycap"><strong>q</strong></span> を押すと、
	コマンドラインに戻ります。</p><p><a class="xref" href="#bsdinstall-config-serv" title="図2.47 追加で有効にするサービスの選択">図2.47「追加で有効にするサービスの選択」</a> にて、
	<span class="application">sshd</span> を有効に設定した場合には、
	最初の起動時にシステムが <acronym class="acronym">RSA</acronym> および
	<acronym class="acronym">DSA</acronym> キーを生成するため、
	少々時間がかかるかもしれません。
	その後の起動はより速くなるでしょう。
	鍵のフィンガープリントは、以下の例のように表示されます。</p><pre class="screen">Generating public/private rsa1 key pair.
Your identification has been saved in /etc/ssh/ssh_host_key.
Your public key has been saved in /etc/ssh/ssh_host_key.pub.
The key fingerprint is:
10:a0:f5:af:93:ae:a3:1a:b2:bb:3c:35:d9:5a:b3:f3 root@machine3.example.com
The key's randomart image is:
+--[RSA1 1024]----+
|    o..          |
|   o . .         |
|  .   o          |
|       o         |
|    o   S        |
|   + + o         |
|o . + *          |
|o+ ..+ .         |
|==o..o+E         |
+-----------------+
Generating public/private dsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_dsa_key.
Your public key has been saved in /etc/ssh/ssh_host_dsa_key.pub.
The key fingerprint is:
7e:1c:ce:dc:8a:3a:18:13:5b:34:b5:cf:d9:d1:47:b2 root@machine3.example.com
The key's randomart image is:
+--[ DSA 1024]----+
|       ..     . .|
|      o  .   . + |
|     . ..   . E .|
|    . .  o o . . |
|     +  S = .    |
|    +  . = o     |
|     +  . * .    |
|    . .  o .     |
|      .o. .      |
+-----------------+
Starting sshd.</pre><p>フィンガープリントおよび <acronym class="acronym">SSH</acronym>
	についての詳細については、<a class="xref" href="#openssh" title="15.10. OpenSSH">「OpenSSH」</a>
	をご覧ください。</p><p>FreeBSD はデフォルトでは、グラフィカルな環境をインストールしません。
	グラフィカルなウィンドウマネージャのインストール、
	および設定に関するより多くの情報については、
	<a class="xref" href="#x11" title="第6章 X Window System">6章<em>X Window System</em></a> をご覧ください。</p><p>適切に FreeBSD をシャットダウンすることは、
	ハードウェアをダメージから守ったり、データの保護につながります。
	<span class="emphasis"><em>システムを適切にシャットダウンする前に、
	電源を落すということはしないでください!</em></span>
	<code class="systemitem">wheel</code>
	グループのメンバとなっているユーザは、
	コマンドラインから <code class="command">su</code> と入力し、
	<code class="systemitem">root</code>
	のパスワードを入力してスーパユーザとなってください。
	その後、<code class="command">shutdown -p now</code>
	と入力すると、システムは正しくシャットダウンし、
	ハードウェアが対応していれば、電源が落ちます。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-install-trouble"></a>2.9. トラブルシューティング</h2></div></div></div><a id="idp78912464" class="indexterm"></a><p>この章では、インストールの際の、
      これまで報告された共通の問題に対する解決のための情報が書いてあります。</p><p>インストールする FreeBSD のバージョンのハードウェアノート (<a class="link" href="../../../../ja/releases/index.html" target="_top">http://www.freebsd.org/ja/releases/index.html</a>)
      を調べて、
      使用しているハードウェアに対応しているかどうかを確認してください。
      もしハードウェアがサポートされているにもかかわらず、
      動作しなかったり他の問題点がある時は、
      <a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a> で説明されている方法で
      カスタムカーネルを構築して、<code class="filename">GENERIC</code>
      カーネルに含まれていないデバイスへのサポートを追加してください。
      起動ディスクのカーネルでは、ほとんどのハードウェアデバイスの
      <acronym class="acronym">IRQ</acronym>, <acronym class="acronym">I/O</acronym> アドレス、
      <acronym class="acronym">DMA</acronym>
      チャネルが工場出荷時の状態であると設定されています。
      もしハードウェアの設定が変更されている場合には、
      カーネルコンフィグレーションファイルを編集することにより、
      FreeBSD に設定することが可能です。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">いくつかのインストール上の問題は、さまざまなハードウェア装置、
	特にマザーボードのファームウェアのアップデートで回避または緩和することができます。
	マザーボードのファームウェアは、通常 <acronym class="acronym">BIOS</acronym>
	と呼ばれます。
	多くのマザーボードまたはコンピュータ製造メーカーは、
	アップデートやアップグレード情報を載せているウェブサイトを用意しています。</p><p xmlns="http://www.w3.org/1999/xhtml">通常、製造メーカーは、
	重要な更新のようなそれなりの理由がない限り、マザーボードの
	<acronym class="acronym">BIOS</acronym> のアップグレードは行わないよう推奨しています。
	アップデートの過程で失敗する<span class="emphasis"><em>可能性があり</em></span>、
	その場合 <acronym class="acronym">BIOS</acronym> が不完全な状態になり、
	コンピュータが動作しない原因となり得るからです。</p></div><p>システムの起動時に、ハードウェアの検出中にシステムが固まったり、
      インストール中におかしな振る舞いをする場合には、
      <acronym class="acronym">ACPI</acronym> が原因の可能性があります。
      i386, amd64 および ia64 プラットフォームにおいて、
      FreeBSD はシステムの設定を手助けするシステム
      <acronym class="acronym">ACPI</acronym> サービスを、
      起動時に検出された場合に広く使います。
      残念ながら、まだいくつかの不具合が、
      <acronym class="acronym">ACPI</acronym> ドライバとシステムのマザーボードおよび
      <acronym class="acronym">BIOS</acronym> ファームウェア両方に存在しています。
      起動ステージ 3 において、ヒント情報
      <code class="literal">hint.acpi.0.disabled</code>
      を以下のように設定すると <acronym class="acronym">ACPI</acronym>
      を無効にできます。</p><pre class="screen"><strong class="userinput"><code>set hint.acpi.0.disabled="1"</code></strong></pre><p>この設定はシステムが起動するたびにリセットされるので、
      <code class="filename">/boot/loader.conf</code> ファイルに
      <code class="literal">hint.acpi.0.disabled="1"</code> を追加する必要があります。
      ブートローダのより詳しい情報については
      <a class="xref" href="#boot-synopsis" title="13.1. この章では">「この章では」</a> で説明します。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-live-cd"></a>2.10. Live <acronym class="acronym">CD</acronym> を使う</h2></div></div></div><p><a class="xref" href="#bsdinstall-choose-mode" title="図2.3 ウェルカムメニュー">図2.3「ウェルカムメニュー」</a> で示されている
      <span class="application">bsdinstall</span> のウェルカムメニューは、
      <span class="guibutton">[ Live CD ]</span>
      オプションを提供します。
      これは、
      オペレーティングシステムに FreeBSD を使うべきかどうか迷っていて、
      インストール前に機能を試して見たいと思っている方に有用です。</p><p><span class="guibutton">[ Live CD ]</span>
      を使う際は、以下のことに気をつけてください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>システムにアクセスする際には、認証を求められます。
	  ユーザ名は <code class="systemitem">root</code>、
	  パスワードは空欄としてください。</p></li><li class="listitem"><p>システムはインストールメディアから直接起動するので、
	  ハードディスクにインストールされたシステムに比べ、
	  パフォーマンスはかなり遅い可能性があります。</p></li><li class="listitem"><p>このオプションのユーザインタフェースは、
	  コマンドプロンプトのみです。
	  グラフィカルなユーザインタフェースではありません。</p></li></ul></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install"></a>第3章 FreeBSD 8.<em class="replaceable"><code>X</code></em> のインストール</h2></div><div><span class="authorgroup">再構成、
	  部分的に書き直し: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Mock</span> <span class="firstname">Jim</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">Sysinstall
	  について、ウォークスルー、スクリーンショット、及びその他原稿:
	  <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Pratt</span> <span class="firstname">Randy</span> [FAMILY Given]</span>. </span></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#install-synopsis">3.1. この章では</a></span></dt><dt><span class="sect1"><a href="#install-hardware">3.2. ハードウェア要件</a></span></dt><dt><span class="sect1"><a href="#install-pre">3.3. インストール前に行う作業</a></span></dt><dt><span class="sect1"><a href="#install-start">3.4. インストールの開始</a></span></dt><dt><span class="sect1"><a href="#using-sysinstall">3.5. sysinstall(8) の紹介</a></span></dt><dt><span class="sect1"><a href="#install-steps">3.6. ディスク領域の割り当て</a></span></dt><dt><span class="sect1"><a href="#install-choosing">3.7. 何をインストールするか選択する</a></span></dt><dt><span class="sect1"><a href="#install-media">3.8. インストールメディアの選択</a></span></dt><dt><span class="sect1"><a href="#install-final-warning">3.9. インストール操作の確定</a></span></dt><dt><span class="sect1"><a href="#install-post">3.10. インストール後の作業</a></span></dt><dt><span class="sect1"><a href="#install-trouble">3.11. トラブルシューティング</a></span></dt><dt><span class="sect1"><a href="#install-advanced">3.12. 高度なインストールガイド</a></span></dt><dt><span class="sect1"><a href="#install-diff-media">3.13. カスタムインストールメディアの準備</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-synopsis"></a>3.1. この章では</h2></div></div></div><a id="idp78945488" class="indexterm"></a><p>FreeBSD は、
      テキストベースの使いやすいインストールプログラムを用意しています。
      FreeBSD 9.0-RELEASE 以降では <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdinstall</span>(8)</span></a>
      と呼ばれるインストールプログラムを使い、
      FreeBSD 8.<em class="replaceable"><code>X</code></em> では
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> を使います。
      この章では、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> の使い方について説明します。
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdinstall</span>(8)</span></a> の利用については
      <a class="xref" href="#bsdinstall" title="第2章 FreeBSD のインストール (9.X 以降の場合)">2章<em>FreeBSD のインストール (9.<em class="replaceable"><code>X</code></em> 以降の場合)</em></a> で説明します。</p><p>この章を読めば、次のことがわかるでしょう:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD インストールメディアの作り方。</p></li><li class="listitem"><p>FreeBSD がハードディスクをどのように参照するか、
	  またどのように分割するか。</p></li><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>
	  をどのように起動するか。</p></li><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>
	  が聞いてくる質問がどのような意味であり、
	  またどのように答えれば良いか。</p></li></ul></div><p>この章を読む前に、以下のことを確認して下さい:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>インストールしようとするバージョンの FreeBSD
	  に付属しているサポートハードウェア一覧を読んで、
	  システムのハードウェアがサポートされているかどうか確認して下さい。</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">この章で説明しているインストール手順は、<span class="trademark">i386</span>™ および
	FreeBSD/amd64 アーキテクチャを対象にしています。
	他のプラットフォームに特有の説明についても、
	該当する場所に明記しています。
	インストーラとこの文書で記述している内容との間にはいくらかズレがあります。
	この章を正確なインストールマニュアルとしてではなく、
	一般的なガイドとしてご利用ください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-hardware"></a>3.2. ハードウェア要件</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-hardware-minimal"></a>3.2.1. 最小構成</h3></div></div></div><p>FreeBSD をインストールする最小構成は、
	FreeBSD のバージョンやハードウェアのアーキテクチャによって異なります。</p><p>以下の節では、最小構成についての情報をまとめています。
	また、FreeBSD のインストール方法によって、フロッピードライブ、
	CDROM ドライブ、もしくはネットワークアダプタが必要となります。
	インストールメディアの準備方法については、
	<a class="xref" href="#install-boot-media" title="3.3.7. ブートメディアの準備">「ブートメディアの準備」</a> で説明されています。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78961104"></a>3.2.1.1. FreeBSD/i386 および FreeBSD/pc98</h4></div></div></div><p>FreeBSD/i386 と FreeBSD/pc98 の両方のアーキテクチャは、
	  486 以上のプロセッサと、
	  少なくとも 24 MB の RAM が必要です。
	  最小のインストールでは、
	  少なくとも 150  MB のハードディスクの空き容量が必要です。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">通常、古いハードウェアでは、
	    速いプロセッサを入手するより、より多くの RAM
	    やより多くの容量のハードドライブを用意するほうが重要となります。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78963024"></a>3.2.1.2. FreeBSD/amd64</h4></div></div></div><p>FreeBSD/amd64 を実行可能なプロセッサには
	  2 つのクラスがあります。
	  1 つ目のクラスは、<span class="trademark">AMD Athlon</span>™64, <span class="trademark">AMD Athlon</span>™64-FX, <span class="trademark">AMD Opteron</span>™
	  やそれより新しいプロセッサです。</p><p>もう 1 つのクラスは、
	  <span class="trademark">Intel</span>® EM64T アーキテクチャを採用しているプロセッサです。
	  これらのプロセッサの例は、
	  <span class="trademark">Intel</span>® <span class="trademark">Core</span>™ 2 Duo, Quad, Extreme プロセッサファミリおよび
	  <span class="trademark">Intel</span>® <span class="trademark">Xeon</span>™ 3000, 5000, および 7000 系のプロセッサです。</p><p>nVidia nForce3 Pro-150 ベースのコンピュータを使用するには、
	  BIOS のセットアップを使って、IO APIC を無効にする
	  <span class="emphasis"><em>必要があります</em></span>。
	  もし、このようなオプションがなければ、
	  かわりに ACPI を無効にしてください。
	  Pro-150 チップセットには回避策が見つかっていないバグがあるためです。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78973264"></a>3.2.1.3. FreeBSD/sparc64</h4></div></div></div><p>FreeBSD/sparc64 をインストールするには、
	  サポートされているプラットフォームが必要です
	  (<a class="xref" href="#install-hardware-supported" title="3.2.2. サポートされているハードウェア">「サポートされているハードウェア」</a> をご覧ください)。</p><p>現時点では、他のオペレーティングシステムとディスクの共有ができないので、
	  FreeBSD/sparc64 専用のディスクが必要です。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-hardware-supported"></a>3.2.2. サポートされているハードウェア</h3></div></div></div><p>サポートされるハードウェアのリストは FreeBSD のリリースと一緒に
	FreeBSD ハードウェアノートとして提供されます。
	このドキュメントは通常 CDROM や FTP 配布の一番上のディレクトリや
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> のドキュメントメニューにある
	<code class="filename">HARDWARE.TXT</code> という名のファイルで見ることができます。
	アーキテクチャごとに用意されるそのリストを見ることで、FreeBSD
	の各リリースでどのようなハードウェア装置がサポートされるかがわかります。
	リリースごと、およびアーキテクチャごとのハードウェアリストは、
	FreeBSD のウェブサイトの <a class="link" href="http://www.FreeBSD.org/ja/releases/index.html" target="_top">リリース情報</a>
	のページにあります。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-pre"></a>3.3. インストール前に行う作業</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-inventory"></a>3.3.1. コンピュータの部品一覧を作る</h3></div></div></div><p>FreeBSD をインストールする前に、
	コンピュータで使用している部品の一覧を作っておくといいでしょう。
	FreeBSD のインストールルーチンでは、ハードディスク、ネットワークカード、
	CDROM ドライブなどの部品を、モデル番号、メーカー名とともに表示します。
	さらにこれらのデバイスについて、使用する IRQ, I/O
	ポートまで含めて正しい設定を認識しようと試みます。
	しかし、コンピュータのハードウェアによっては、
	この過程が完全に成功するとは限らず、
	手動で修正しなければならないこともあります。</p><p>既に別のオペレーティングシステムがインストールされているのであれば、
	それらのオペレーティングシステムでのハードウェアの設定を参考にすると良いでしょう。
	拡張カードなどの設定がよく分からない場合は、
	カードそのものに印刷されていることもあります。
	よく使われる IRQ は 3, 5, 7 で、I/O ポートアドレスは通常
	<code class="literal">0x330</code> のような
	16 進数で書かれています。</p><p>FreeBSD をインストールする前に、
	これらの情報を印刷するか書き留めておくことを勧めます。
	例えば次のような表です:</p><div class="table"><a id="idp78985680"></a><div class="table-title">表3.1 サンプルデバイス一覧</div><div class="table-contents"><table summary="サンプルデバイス一覧" width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>デバイスの名前</th><th>IRQ</th><th>I/O ポート</th><th>メモ</th></tr></thead><tbody><tr><td>1 台目のハードディスク</td><td>N/A</td><td>N/A</td><td>40 GB, Seagate 製、プライマリ IDE マスタ</td></tr><tr><td>CDROM</td><td>N/A</td><td>N/A</td><td>プライマリ IDE スレーブ</td></tr><tr><td>2 台目のハードディスク</td><td>N/A</td><td>N/A</td><td>20 GB, IBM 製、セカンダリ IDE マスタ</td></tr><tr><td>1 つ目の IDE コントローラ</td><td>14</td><td>0x1f0</td><td class="auto-generated">〓</td></tr><tr><td>ネットワークカード</td><td>N/A</td><td>N/A</td><td><span class="trademark">Intel</span>® 10/100</td></tr><tr><td>モデム</td><td>N/A</td><td>N/A</td><td><span class="trademark">3Com</span>® 56K ファックスモデム、COM1 に接続</td></tr><tr><td>…</td><td class="auto-generated">〓</td><td class="auto-generated">〓</td><td class="auto-generated">〓</td></tr></tbody></table></div></div><br class="table-break" /><p>コンピュータで使用している部品の一覧を作成したら、
	インストールする FreeBSD
	のリリースのハードウェア要件を満たしているかどうかを確認してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79008976"></a>3.3.2. データのバックアップ</h3></div></div></div><p>コンピュータに価値のあるデータが入っている場合には、
	FreeBSD をインストールする前に、データのバックアップをとり、
	さらに正しくバックアップがとれていることを確認して下さい。FreeBSD
	のインストーラは、ハードディスクに実際に書き込む前に確認を求めますが、
	一度実際に書き込む作業が始まってしまうと、
	もう元に戻すことはできません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-where"></a>3.3.3. FreeBSD をインストールする場所の決定</h3></div></div></div><p>ハードディスク全体に FreeBSD をインストールする場合には、
	この節は読み飛ばしてください。</p><p>しかし FreeBSD
	を他のオペレーティングシステムと共存させる必要がある場合は、
	データがディスクにどのように配置されるかを大まかに理解する必要があります。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-where-i386"></a>3.3.3.1. FreeBSD/i386 アーキテクチャでのディスクレイアウト</h4></div></div></div><p>PC のディスクは、
	  <em class="firstterm">パーティション</em> と呼ばれる、
	  個別の塊に分割することができます。
	  FreeBSD は内部にもパーティションを持つので、この名称は混乱をおこします。
	  そのため、FreeBSD ではこの塊をスライスと呼びます。
	  たとえば、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> の FreeBSD 版は、
	  パーティションではなくスライスと呼びます。
	  PC では、ディスク 1 台あたり 4 つまでパーティションを作成できます。
	  これらのパーティションは<em class="firstterm">プライマリパーティション</em>と呼ばれます。
	  この制限を回避し、
	  4 つ以上のパーティションを作成するために<em class="firstterm">拡張パーティション</em>と呼ばれる新しいパーティション形式が作られました。
	  ディスク 1 台につき 1 つだけ拡張パーティションを作成できます。
	  論理パーティションと呼ばれる特別のパーティションは、
	  この拡張パーティションの内部に作成できます。</p><p>それぞれのパーティションは、
	  そのパーティションに含まれるデータの形式を示す数字である、
	  <em class="firstterm">パーティション ID</em> を持ちます。FreeBSD
	  パーティションのパーティション ID は
	  <code class="literal">165</code> です。</p><p>通常、各オペレーティングシステムは、
	  それぞれ独自の方法で個々のパーティションを識別します。
	  たとえば <span class="trademark">Windows</span>® は、
	  プライマリパーティションおよび論理パーティションそれぞれに
	  <code class="filename">C:</code> から始まる
	  <em class="firstterm">ドライブレター</em>を割り当てます。</p><p>FreeBSD
	  はプライマリパーティションにインストールしなければなりません。
	  複数のディスクがある場合は、そのうちのいくつか、もしくはすべてに、
	  FreeBSD パーティションを作成することもできます。
	  FreeBSD をインストールする時は
	  少なくとも 1 つのパーティションを使用可能にしておかなければなりません。
	  このパーティションは、空白のパーティション、
	  もしくは無くなっても構わないデータしか入っていない、
	  既存のパーティションでも構いません。</p><p>すべてのディスクのすべてのパーティションが使用されている場合は、
	  他のオペレーティングシステムで提供されているツール
	  (たとえば <span class="trademark">Windows</span>® の <code class="command">fdisk</code>) を使用して、
	  そのうちの 1 つを FreeBSD のために解放してください。</p><p>予備のパーティションがある場合には、それを使ってください。
	  もし、利用できる容量が少なければ、
	  1 つまたは複数の既存のパーティションを縮小して、
	  利用できる容量を確保してください。</p><p>FreeBSD の最小のインストールには、100 MB
	  程度のディスク容量が必要です。
	  しかしこれは<span class="emphasis"><em>非常に</em></span>小さなインストールであり、
	  自分のファイルを作成するスペースはほとんど残らないでしょう。
	  現実的には、グラフィカルな環境が必要ないのであれば 250 MB、
	  グラフィカルユーザインタフェースを使用するのであれば 350 MB
	  以上は必要でしょう。
	  その上、サードパーティ製ソフトウェアをインストールするならば、
	  さらに多くのスペースが必要になるでしょう。</p><p>FreeBSD のためのスペースを用意する際、
	  パーティションサイズを変更するために、
	  <span class="application">GParted</span>
	  などのツールを使用できます。
	  <span class="application">GParted</span> は、
	  <acronym class="acronym">NTFS</acronym> を操作することができ、
	  <a class="link" href="http://www.sysresccd.org/" target="_top">SystemRescueCD</a>
	  といった多くの Live CD Linux ディストリビューションで利用できます。</p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">パーティションサイズを縮小するツールの使用方法を誤ると、
	    ディスク上のデータが消えてしまう可能性があります。
	    この種のツールを使う際には、
	    使用前に必ず最新のデータのバックアップをとって下さい。</p></div><div class="example"><a id="idp79023568"></a><div class="example-title">例3.1 既存のパーティションを変更せずに使用</div><div class="example-contents"><p>既に <span class="trademark">Windows</span>® がインストールされている
	    4 GB のハードディスクが
	    1 台接続されており、そのハードディスクは 2 つのドライブレター
	    <code class="filename">C:</code> および <code class="filename">D:</code>
	    に分割されており、それぞれのサイズが 2 GB であるとします。
	    <code class="filename">C:</code> には 1 GB,
	    <code class="filename">D:</code> には 0.5 GB
	    のデータがあるとします。</p><p>ディスクには、ドライブレター 1 つあたり 1 つのパーティション、
	    合計で 2 つのパーティションがあることを意味します。
	    この場合、<code class="filename">D:</code> にあるデータをすべて
	    <code class="filename">C:</code> にコピーすれば、
	    2 つ目のパーティションを解放し、FreeBSD
	    のために使うことができるでしょう。</p></div></div><br class="example-break" /><div class="example"><a id="idp79028048"></a><div class="example-title">例3.2 既存のパーティションを縮小する</div><div class="example-contents"><p>既に <span class="trademark">Windows</span>® がインストールされている 4 GB
	    のハードディスクが
	    1 台接続された PC を使用しているとします。さらに <span class="trademark">Windows</span>®
	    をインストールする際、1 つの大きなパーティションを作成し、
	    <code class="filename">C:</code> ドライブとして 4 GB
	    を割り当てたとします。
	    現在 1.5 GB 使用しており、FreeBSD で
	    2 GB 使いたいとします。</p><p>FreeBSD をインストールするためには、
	    以下のどちらかを行わなければなりません。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><span class="trademark">Windows</span>® のデータをバックアップし、
		インストール時に 2 GB
		のパーティションを作成して <span class="trademark">Windows</span>®
		を再インストールする。</p></li><li class="listitem"><p>先に述べた <span class="trademark">Windows</span>®
		パーティションを縮小するツールを使用する。</p></li></ol></div></div></div><br class="example-break" /></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79046992"></a>3.3.4. ネットワーク設定の詳細をまとめる</h3></div></div></div><p>FTP サイトまたは <acronym class="acronym">NFS</acronym>
	サーバからインストールする場合は、
	ネットワークの設定を知る必要があります。
	インストールを完了するためにネットワークに接続できるよう、
	これらの情報をインストーラのプロンプトに入力する必要があります。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79048400"></a>3.3.4.1. イーサネットもしくはケーブル / DSL モデムでの接続</h4></div></div></div><p>イーサネットネットワークに接続する場合や、
	  ケーブル / DSL モデム経由でイーサネットアダプタを利用してインターネットに接続する場合は、
	  次の情報が必要になります:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>IP アドレス</p></li><li class="listitem"><p>デフォルトゲートウェイの IP アドレス</p></li><li class="listitem"><p>ホスト名</p></li><li class="listitem"><p>DNS サーバの IP アドレス</p></li><li class="listitem"><p>サブネットマスク</p></li></ol></div><p>これらの情報がわからなければ、
	  システム管理者かサービスプロバイダに問い合わせて下さい。
	  <em class="firstterm">DHCP</em>
	  を使用して、この情報を自動的に割り当てることもあります。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79054672"></a>3.3.4.2. モデムを使用した接続</h4></div></div></div><p>非常に長い時間がかかりますが、
	  ダイアルアップモデムを使って、
	  インターネット経由で FreeBSD をインストールできます。</p><p>この場合、以下の内容をあらかじめ確認しておく必要があります:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>インターネットサービスプロバイダ
	      (<acronym class="acronym">ISP</acronym>) にダイアルする際の電話番号</p></li><li class="listitem"><p>接続に使用する COM: ポート</p></li><li class="listitem"><p><acronym class="acronym">ISP</acronym>
	      のアカウントのユーザ名及びパスワード</p></li></ol></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79059920"></a>3.3.5. FreeBSD Errata の確認</h3></div></div></div><p>FreeBSD プロジェクトでは FreeBSD
	の各リリースができる限り安定するよう努力していますが、
	時々バグが発生してしまうことがあります。極まれに、
	発生したバグによりインストールプロセスに影響を与えることがあります。
	これらの問題は発見され解決されるとともに、
	FreeBSD のウェブサイトの <a class="link" href="http://www.FreeBSD.org/releases/10.1R/errata.html" target="_top">FreeBSD
	  Errata</a> に掲示されます。
	注意すべき既知の問題が無いことを確かめるために、インストールする前に
	Errata を確認してください。</p><p>Errata を含む、すべてのリリースに関する情報は、<a class="link" href="../../../../ja/index.html" target="_top">FreeBSD
	  のウェブサイト</a> の <a class="link" href="../../../../ja/releases/index.html" target="_top">リリース情報</a>
	の項で確認することができます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79062992"></a>3.3.6. FreeBSD インストールファイルの入手</h3></div></div></div><p>FreeBSD のインストーラは、
	以下のいずれかの場所に置いてあるファイルから FreeBSD
	をインストールします。</p><div class="itemizedlist"><div class="itemizedlist-title">ローカルメディア</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>CDROM または DVD</p></li><li class="listitem"><p>USB メモリスティック</p></li><li class="listitem"><p>同じコンピュータ上の <span class="trademark">MS-DOS</span>® パーティション</p></li><li class="listitem"><p>フロッピーディスク (FreeBSD/pc98 のみ)</p></li></ul></div><div class="itemizedlist"><div class="itemizedlist-title">ネットワーク</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ファイアウォール経由または HTTP プロキシを利用した
	    FTP サイト</p></li><li class="listitem"><p>NFS サーバ</p></li><li class="listitem"><p>パラレルまたはシリアル専用接続</p></li></ul></div><p>購入した CD または DVD から FreeBSD をインストールするのであれば、
	<a class="xref" href="#install-boot-media" title="3.3.7. ブートメディアの準備">「ブートメディアの準備」</a> を読み飛ばしてください。</p><p>FreeBSD のインストールファイルを入手するには、
	<a class="xref" href="#install-diff-media" title="3.13. カスタムインストールメディアの準備">「カスタムインストールメディアの準備」</a> まで読み飛ばしてください。
	インストールメディアをどのように準備すれば良いか説明しています。
	このセクションを読み終わった後、ここに戻ってきて、
	<a class="xref" href="#install-boot-media" title="3.3.7. ブートメディアの準備">「ブートメディアの準備」</a> を読んでください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-boot-media"></a>3.3.7. ブートメディアの準備</h3></div></div></div><p>FreeBSD のインストールプロセスは、FreeBSD
	インストーラでコンピュータを起動することから始まります。
	インストーラは、
	別のオペレーティングシステムで実行するプログラムではありません。
	通常、コンピュータはハードディスクにインストールされたオペレーティングシステムから起動しますが、
	CDROM や USB ディスクから起動するように設定することもできます。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">CDROM および DVD からの起動が可能な BIOS を持つコンピュータに
	  CDROM または DVD をインストールするのであれば、
	  この節を飛ばしてください。
	  FreeBSD の CDROM と DVD イメージは起動可能であり、
	  他の特別な準備をすることなく FreeBSD
	  のインストールで利用できます。</p></div><p>起動可能なメモリスティックを作成する場合には、
	以下の手順にしたがってください。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>メモリスティックのイメージの取得</strong></p><p>FreeBSD 8.<em class="replaceable"><code>X</code></em>
	    のメモリスティックのイメージは、
	    <code class="literal">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/<em class="replaceable"><code>arch</code></em>/ISO-IMAGES/<em class="replaceable"><code>version</code></em>/FreeBSD-<em class="replaceable"><code>version</code></em>-RELEASE-<em class="replaceable"><code>arch</code></em>-memstick.img</code> の
	    <code class="filename">ISO-IMAGES/</code>
	    ディレクトリからダウンロードできます。
	    ここで、 <em class="replaceable"><code>arch</code></em> と
	    <em class="replaceable"><code>version</code></em> の部分を、
	    それぞれインストールするアーキテクチャとバージョン番号に置き換えてください。
	    たとえば、FreeBSD/i386 9.3-RELEASE
	    のメモリスティックのイメージは、<code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/ISO-IMAGES/9.3/FreeBSD-9.3-RELEASE-i386-memstick.img" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/ISO-IMAGES/9.3/FreeBSD-9.3-RELEASE-i386-memstick.img</a></code>
	    から入手できます。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 9.0-RELEASE からは、
	      異なるディレクトリパスが使われています。
	      FreeBSD 9.<em class="replaceable"><code>X</code></em>
	      のダウンロードとインストールの詳細については、
	      <a class="xref" href="#bsdinstall" title="第2章 FreeBSD のインストール (9.X 以降の場合)">2章<em>FreeBSD のインストール (9.<em class="replaceable"><code>X</code></em> 以降の場合)</em></a> で説明します。</p></div><p>メモリスティックイメージには、<code class="filename">.img</code>
	    という拡張子がついています。<code class="filename">ISO-IMAGES/</code>
	    ディレクトリには複数の異なるイメージがあり、
	    用いるべきイメージは、
	    FreeBSD のバージョンやインストールするハードウェアが対応しているメディアに依存します。</p><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">以下の作業によってデータが<span class="emphasis"><em>消去</em></span>されるので、
	      先に進む前に、使用する USB
	      スティックにあるデータを<span class="emphasis"><em>バックアップ</em></span>してください。</p></div></li><li class="step"><p class="title"><strong>イメージファイルをメモリスティックに書き込む</strong></p><div class="procedure"><a id="idp79103056"></a><div class="procedure-title">手順3.1 FreeBSD を使ってイメージを書き込む</div><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">以下の例では、起動するデバイスを
		<code class="filename">/dev/da0</code> としています。
		適切なデバイスを出力先に設定していることを十分確認してくだい。
		さもなければ、現在あるデータを破壊してしまうでしょう。</p></div><ul class="procedure"><li class="step"><p class="title"><strong>イメージを <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a> を使って書き込む</strong></p><p><code class="filename">.img</code> ファイルは、
		単純にメモリスティックにコピーされるような、
		通常のファイルでは<span class="emphasis"><em>ありません</em></span>。
		ディスクの内容の完全なイメージです。
		したがって、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a> を使用して、
		直接ディスクにイメージを書き込む必要があります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=FreeBSD-9.3-RELEASE-i386-memstick.img of=/dev/<em class="replaceable"><code>da0</code></em> bs=64k</code></strong></pre><p>
		<code class="computeroutput">Operation not permitted</code>
		エラーが表示されたら、ターゲットデバイスが他で利用されていないかどうか、
		マウントされていないかどうか、
		他のプログラムが自動的にマウントしていないかどうかを確認してください。
		その後、もう一度実行してください。</p></li></ul></div><div class="procedure"><a id="idp79110480"></a><div class="procedure-title">手順3.2 <span class="trademark">Windows</span>® を使ってイメージを書き込む</div><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">以下のコマンドは、
		指定したデバイスに現在あるデータを上書きして破壊してしまうので、
		出力先に適切なドライブレターを設定していることを十分確認してくだい。</p></div><ol class="procedure" type="1"><li class="step"><p class="title"><strong><span class="application">Image Writer for Windows</span>
		を入手する</strong></p><p><span class="application">Image Writer for Windows</span> は、
		イメージファイルをメモリスティックに正しく書き込むことのできるフリーのアプリケーションです。<code class="uri"><a class="uri" href="https://launchpad.net/win32-image-writer/" target="_top">https://launchpad.net/win32-image-writer/</a></code>
		からダウンロードして、フォルダに展開してください。</p></li><li class="step"><p class="title"><strong>イメージライタを使ってイメージを書き込む</strong></p><p><span class="application">Win32DiskImager</span>
		アイコンをダブルクリックして、プログラムを起動します。
		<code class="computeroutput">Device</code>
		の下に表示されるデバイスレターが、
		メモリスティックのドライブであることを確認してください。
		フォルダのアイコンをクリックして、
		メモリスティックに書き込むイメージファイルを選択します。
	        <span class="guibutton">Save</span> をクリックして、
		イメージファイルの名前をアクセプトしてください。
		すべてが正しく行われたかどうか、また、
		他のウィンドウでメモリスティックのフォルダが開かれていないことを確認してください。
		最後に、<span class="guibutton">Write</span> を押して、ドライブにイメージファイルを書き込みます。</p></li></ol></div></li></ol></div><p>FreeBSD/pc98
	のインストール用に起動フロッピーディスクを作成するためには、
	次のステップに従って下さい:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>起動フロッピーイメージの取得</strong></p><p>FreeBSD/pc98 のブートディスクは、
	    floppies ディレクトリ、
	    <code class="literal">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/pc98/<em class="replaceable"><code>version</code></em>-RELEASE/floppies/</code>.
	    から入手できます。
	    ここで <em class="replaceable"><code>version</code></em> の部分を、
	    それぞれインストールするバージョン番号に置き換えてください。</p><p>フロッピーイメージは <code class="filename">.flp</code>
	    という拡張子がついています。
	    <code class="filename">floppies/</code>
	    には複数の異なるイメージがあります。
	    <code class="filename">boot.flp</code> とともに、
	    <code class="filename">kern.small*</code> または
	    <code class="filename">kern*</code>
	    といったインストールの種類に関連づいた複数のファイルをダウンロードしてください。</p><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">FTP プログラムを使用してこれらのディスクイメージをダウンロードする時は、
	      必ず<span class="emphasis"><em>バイナリモード</em></span>にして下さい。
	      Web ブラウザによっては <span class="emphasis"><em>テキスト</em></span>
	      または <span class="emphasis"><em>アスキー</em></span>
	      モードでダウンロードするものがあり、
	      ディスクから起動できないときは大抵これが原因です。</p></div></li><li class="step"><p class="title"><strong>フロッピーディスクの用意</strong></p><p>ダウンロードしたイメージファイル 1 つにつき
	    1 枚のフロッピーディスクを用意してください。
	    これらのディスクに欠陥があってはいけません。
	    これを確認する最も簡単な方法は、
	    自分自身でフォーマットしてみることです。
	    フォーマットする前のフロッピーを信用してはいけません。
	    <span class="trademark">Windows</span>® のフォーマットユーティリティは、
	    不良ディスクがあっても教えてはくれないでしょう。
	    それらを <span class="quote">「<span class="quote">bad</span>」</span> とマークして、無視するだけです。
	    新品のフロッピーを使うことをお薦めします。</p><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">インストーラがクラッシュしたりフリーズしたり、
	      おかしな動作をした時、
	      まずはじめに疑うべきもののうちの 1 つはフロッピーです。
	      フロッピーイメージを新しいディスクに書き込んで、
	      もう一度試してみて下さい。</p></div></li><li class="step"><p class="title"><strong>フロッピーディスクへイメージファイルを書き込む。</strong></p><p><code class="filename">.flp</code> ファイルは、
	    ディスクにコピーできるような、
	    通常のファイルでは<span class="emphasis"><em>ありません</em></span>。
	    完全なディスクの内容のイメージです。
	    イメージを直接ディスクに書き込む特別なツールを使用する必要があります。</p><a id="idp79149776" class="indexterm"></a><p>FreeBSD は、<span class="trademark">Windows</span>®
	    が動作しているコンピュータでフロッピーを作成する
	    <code class="command">rawrite</code> と呼ばれるツールを提供しています。
	    このツールは FreeBSD の FTP サイト上の
	    <code class="literal">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/pc98/<em class="replaceable"><code>
	      version</code></em>-RELEASE/tools/</code>
	    からダウンロードできます。
	    このツールをダウンロードしたら、フロッピーを挿入してください。
	    その後、ファイル名を指定してフロッピードライブに書き込んでください。</p><pre class="screen"><code class="prompt">C:\&gt;</code> <strong class="userinput"><code>rawrite boot.flp A:</code></strong></pre><p>毎回フロッピーディスクを入れ換え、
	    ファイルの名前を示すラベルを付けながら、
	    それぞれの <code class="filename">.flp</code>
	    ファイルに対してこのコマンドを繰り返します。
	    <code class="filename">.flp</code> ファイルを置いた場所に応じて、
	    コマンドラインを変更して下さい。</p><p>FreeBSD システムのような、
	    <span class="trademark">UNIX</span>®-like システムでフロッピーへの書き込みを行う場合は、
	    イメージファイルを直接ディスクに書き込むために <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a>
	    を使ってください。FreeBSD 上では、
	    次のように実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=boot.flp of=/dev/fd0</code></strong></pre><p>FreeBSD においては、<code class="filename">/dev/fd0</code> が
	    1 台目のフロッピーディスクドライブを表します。
	    他の <span class="trademark">UNIX</span>® システムでは、
	    フロッピーディスクデバイスには別の名前がついているかもしれないので、
	    必要に応じてそのシステムのドキュメントを確認して下さい。</p></li></ol></div><p>これで FreeBSD をインストールする用意ができました。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-start"></a>3.4. インストールの開始</h2></div></div></div><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">デフォルトでは、
	次のメッセージが表示されるまでインストーラはディスクに何の変更も加えません。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="literallayout">Last Chance: Are you SURE you want continue the installation?

If you're running this on a disk with data you wish to save then WE
STRONGLY ENCOURAGE YOU TO MAKE PROPER BACKUPS before proceeding!

We can take no responsibility for lost disk contents!</pre><p xmlns="http://www.w3.org/1999/xhtml">この最後の警告の前であれば、
	いつでもハードディスクの内容を変更することなくインストールを中断できます。
	もし、何かを間違って設定してしまったことが心配ならば、
	最後の警告の前に単にコンピュータをオフにしてください。
	被害を残さずに済みます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-starting"></a>3.4.1. 起動</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-starting-i386"></a>3.4.1.1. <span class="trademark">i386</span>™ アーキテクチャでの起動</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>コンピュータの電源をいれます。
	      起動が始まると、すぐにシステムまたは BIOS
	      のセットアップメニューに入るためのオプションが表示されるはずです。
	      一般的には <span class="keycap"><strong>F2</strong></span>, <span class="keycap"><strong>F10</strong></span>,
	      <span class="keycap"><strong>Del</strong></span> のようなキーまたは
	      <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>S</strong></span> のようなキーの組合せです。
	      画面上に示されるキーを使用してください。
	      コンピュータによっては、
	      起動する間に画像を表示するものもあります。
	      大抵の場合、<span class="keycap"><strong>Esc</strong></span> キーを押すと、
	      画像が消えてブートメッセージが表示されます。</p></li><li class="step"><p>どの装置からシステムが起動するかを制御する設定を探してください。
	      通常は <span class="quote">「<span class="quote">Boot Order</span>」</span> と呼ばれ、一般的には、
	      <code class="literal">Floppy</code>,
	      <code class="literal">CDROM</code>, <code class="literal">First Hard
		Disk</code> などの装置の一覧として表示されています。</p><p>CD または DVD から起動する場合には CDROM
	      が選択されていることを、
	      USB ディスクから起動するなら
	      USB ディスクが選択されていることを確認してください。
	      自信が無い場合は、
	      コンピュータやマザーボード付属のマニュアルを参照してください。</p><p>変更を保存して終了してください。
	      コンピュータが再起動するはずです。</p></li><li class="step"><p><a class="xref" href="#install-boot-media" title="3.3.7. ブートメディアの準備">「ブートメディアの準備」</a>
	      で説明されている <span class="quote">「<span class="quote">起動</span>」</span> USB
	      スティックを使用する場合には、
	      コンピュータを立ち上げる前に、
	      USB スティックを挿入してください。</p><p>CD または DVD から起動する場合、コンピュータを立ち上げ、
	      すぐに CD または DVD を挿入する必要があります。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD/pc98 では、
		インストール用の起動フロッピーが用意されており、
		<a class="xref" href="#install-boot-media" title="3.3.7. ブートメディアの準備">「ブートメディアの準備」</a>
		で説明されている方法で作成できます。
		<code class="filename">boot.flp</code>
		が最初に挿入するフロッピーディスクです。
		インストーラを起動できるように、
		このフロッピーをフロッピードライブに挿入してください。</p></div><p>もし、コンピュータがすでに存在している OS を読み込み、
	      通常通り起動してしまったのであれば、
	      以下の原因が考えられます。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>起動ディスクが起動プロセスにおいて十分早いタイミングで挿入されていません。
		  ディスクをそのままにしてコンピュータを再起動してください。</p></li><li class="listitem"><p>BIOS の変更が適切に行われていません。
		  正しいオプションを設定してやり直してください。</p></li><li class="listitem"><p>使用している BIOS は、
		  希望しているメディアからの起動に対応していません。</p></li></ol></div></li><li class="step"><p>FreeBSD は起動を開始します。CD または DVD から起動している場合、
	      次のような画面が表示されるでしょう。</p><pre class="screen">Booting from CD-Rom...
645MB medium detected
CD Loader 1.2

Building the boot loader arguments
Looking up /BOOT/LOADER... Found
Relocating the loader and the BTX
Starting the BTX loader

BTX loader 1.00 BTX version is 1.02
Consoles: internal video/keyboard
BIOS CD is cd0
BIOS drive C: is disk0
BIOS drive D: is disk1
BIOS 636kB/261056kB available memory

FreeBSD/i386 bootstrap loader, Revision 1.1

Loading /boot/defaults/loader.conf
/boot/kernel/kernel text=0x64daa0 data=0xa4e80+0xa9e40 syms=[0x4+0x6cac0+0x4+0x88e9d]
\</pre><p>フロッピーディスクから起動している場合、
	      次のような画面が現れるでしょう。</p><pre class="screen">Booting from Floppy...
Uncompressing ... done

BTX loader 1.00  BTX version is 1.01
Console: internal video/keyboard
BIOS drive A: is disk0
BIOS drive C: is disk1
BIOS 639kB/261120kB available memory

FreeBSD/i386 bootstrap loader, Revision 1.1

Loading /boot/defaults/loader.conf
/kernel text=0x277391 data=0x3268c+0x332a8 |

Insert disk labelled "Kernel floppy 1" and press any key...</pre><p><code class="filename">boot.flp</code> フロッピーを抜き、
	      次のフロッピーを挿入し、
	      <span class="keycap"><strong>Enter</strong></span> を押してください。
	      プロンプトが表示されたら、
	      要求される通りに他のディスクを挿入してください。</p></li><li class="step"><p>起動プロセスは FreeBSD ブートローダメニューを表示します。</p><div class="figure"><a id="boot-loader-menu"></a><div class="figure-title">図3.1 FreeBSD ブートローダメニュー</div><div class="figure-contents"><div class="mediaobject"><img src="install/boot-loader-menu.png" alt="FreeBSD ブートローダメニュー" /></div></div></div><br class="figure-break" /><p>10 秒間待つか、
	      <span class="keycap"><strong>Enter</strong></span> を押してください。</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79241936"></a>3.4.1.2. <span class="trademark">SPARC64</span>® アーキテクチャでの起動</h4></div></div></div><p>ほとんどの <span class="trademark">SPARC64</span>® システムは、
	  ディスクから自動的に起動するように設定されています。
	  FreeBSD をインストールするには、ネットワークまたは CD/DVD
	  から起動し、ブートメッセージが表示されるまで待ってください。
	  モデルによりますが、以下のようなメッセージが表示されます。</p><pre class="screen">Sun Blade 100 (UltraSPARC-IIe), Keyboard Present
Copyright 1998-2001 Sun Microsystems, Inc.  All rights reserved.
OpenBoot 4.2, 128 MB memory installed, Serial #51090132.
Ethernet address 0:3:ba:b:92:d4, Host ID: 830b92d4.</pre><p>もしシステムがディスクから起動するようでしたら、
	  キーボードから
	  <span class="keycap"><strong>L1</strong></span>+<span class="keycap"><strong>A</strong></span>
	  または <span class="keycap"><strong>Stop</strong></span>+<span class="keycap"><strong>A</strong></span>
	  を押すか、シリアルコンソールから
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> または <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a> で <code class="command">~#</code>
	  を使って <code class="command">BREAK</code> を送信して、
	  PROM プロンプトを表示してください。
	  次のような表示です。</p><pre class="screen"><code class="prompt">ok     </code><a id="prompt-single"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
<code class="prompt">ok {0} </code><a id="prompt-smp"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#prompt-single"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>単一の CPU を持つシステムでのプロンプト</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#prompt-smp"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>SMP システムのプロンプト。数字はアクティブな CPU の数。</p></td></tr></table></div><p>ここで、CD または DVD をドライブに挿入し、
	  PROM プロンプトで <code class="command">boot cdrom</code>
	  と入力してください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="view-probe"></a>3.4.2. デバイス検出結果を再表示する</h3></div></div></div><p>画面に表示される数百行の文字列は (バッファに) 記憶されており、
	再表示することが出来ます。</p><p>バッファを再表示するには、<span class="keycap"><strong>Scroll Lock</strong></span> を押してください。
	これで、画面をスクロールできます。結果を見るためには、矢印キーもしくは
	<span class="keycap"><strong>PageUp</strong></span> か <span class="keycap"><strong>PageDown</strong></span> を使います。
	<span class="keycap"><strong>Scroll Lock</strong></span> をもう一度押すと、スクロールを停止します。</p><p>この作業を行って、カーネルがデバイス検出を実行している時に画面の外に流れた文字列を再表示してください。
	<a class="xref" href="#install-dev-probe" title="図3.2 古典的なデバイス検出結果の例">図3.2「古典的なデバイス検出結果の例」</a> によく似た画面が現われるでしょうが、
	コンピュータに搭載されているデバイスによって、表示される文字列は異なります。</p><div class="figure"><a id="install-dev-probe"></a><div class="figure-title">図3.2 古典的なデバイス検出結果の例</div><div class="figure-contents"><pre class="screen">avail memory = 253050880 (247120K bytes)
Preloaded elf kernel "kernel" at 0xc0817000.
Preloaded mfs_root "/mfsroot" at 0xc0817084.
md0: Preloaded image &lt;/mfsroot&gt; 4423680 bytes at 0xc03ddcd4

md1: Malloc disk
Using $PIR table, 4 entries at 0xc00fde60
npx0: &lt;math processor&gt; on motherboard
npx0: INT 16 interface
pcib0: &lt;Host to PCI bridge&gt; on motherboard
pci0: &lt;PCI bus&gt; on pcib0
pcib1:&lt;VIA 82C598MVP (Apollo MVP3) PCI-PCI (AGP) bridge&gt; at device 1.0 on pci0
pci1: &lt;PCI bus&gt; on pcib1
pci1: &lt;Matrox MGA G200 AGP graphics accelerator&gt; at 0.0 irq 11
isab0: &lt;VIA 82C586 PCI-ISA bridge&gt; at device 7.0 on pci0
isa0: &lt;iSA bus&gt; on isab0
atapci0: &lt;VIA 82C586 ATA33 controller&gt; port 0xe000-0xe00f at device 7.1 on pci0
ata0: at 0x1f0 irq 14 on atapci0
ata1: at 0x170 irq 15 on atapci0
uhci0 &lt;VIA 83C572 USB controller&gt; port 0xe400-0xe41f irq 10 at device 7.2 on pci
0
usb0: &lt;VIA 83572 USB controller&gt; on uhci0
usb0: USB revision 1.0
uhub0: VIA UHCI root hub, class 9/0, rev 1.00/1.00, addr1
uhub0: 2 ports with 2 removable, self powered
pci0: &lt;unknown card&gt; (vendor=0x1106, dev=0x3040) at 7.3
dc0: &lt;ADMtek AN985 10/100BaseTX&gt; port 0xe800-0xe8ff mem 0xdb000000-0xeb0003ff ir
q 11 at device 8.0 on pci0
dc0: Ethernet address: 00:04:5a:74:6b:b5
miibus0: &lt;MII bus&gt; on dc0
ukphy0: &lt;Generic IEEE 802.3u media interface&gt; on miibus0
ukphy0: 10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
ed0: &lt;NE2000 PCI Ethernet (RealTek 8029)&gt; port 0xec00-0xec1f irq 9 at device 10.
0 on pci0
ed0 address 52:54:05:de:73:1b, type NE2000 (16 bit)
isa0: too many dependant configs (8)
isa0: unexpected small tag 14
orm0: &lt;Option ROM&gt; at iomem 0xc0000-0xc7fff on isa0
fdc0: &lt;NEC 72065B or clone&gt; at port 0x3f0-0x3f5,0x3f7 irq 6 drq2 on isa0
fdc0: FIFO enabled, 8 bytes threshold
fd0: &lt;1440-KB 3.5” drive&gt; on fdc0 drive 0
atkbdc0: &lt;Keyboard controller (i8042)&gt; at port 0x60,0x64 on isa0
atkbd0: &lt;AT Keyboard&gt; flags 0x1 irq1 on atkbdc0
kbd0 at atkbd0
psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: model Generic PS/@ mouse, device ID 0
vga0: &lt;Generic ISA VGA&gt; at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
sc0: &lt;System console&gt; at flags 0x100 on isa0
sc0: VGA &lt;16 virtual consoles, flags=0x300&gt;
sio0 at port 0x3f8-0x3ff irq 4 flags 0x10 on isa0
sio0: type 16550A
sio1 at port 0x2f8-0x2ff irq 3 on isa0
sio1: type 16550A
ppc0: &lt;Parallel port&gt; at port 0x378-0x37f irq 7 on isa0
pppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/15 bytes threshold
plip0: &lt;PLIP network interface&gt; on ppbus0
ad0: 8063MB &lt;IBM-DHEA-38451&gt; [16383/16/63] at ata0-master UDMA33
acd0: CD-RW &lt;LITE-ON LTR-1210B&gt; at ata1-slave PIO4
Mounting root from ufs:/dev/md0c
/stand/sysinstall running as init on vty0</pre></div></div><br class="figure-break" /><p>丹念に検出結果をチェックして、すべてのデバイスを
	 FreeBSD が検出できた事を確認してください。デバイスが見つからなかった場合、
	検出結果へ表示されません。
	<a class="link" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">カスタムカーネル</a> を構築することで、
	<code class="filename">GENERIC</code>
	カーネルに含まれていないデバイスに対応できるようになります。</p><p>デバイス検出後、
	<a class="xref" href="#config-country" title="図3.3 国の選択メニュー">図3.3「国の選択メニュー」</a> に示されるメニューが表示されます。
	矢印キーを使って、国、地域またはグループを選択し、
	その後、<span class="keycap"><strong>Enter</strong></span> を押して決定してください。</p><div class="figure"><a id="config-country"></a><div class="figure-title">図3.3 国の選択メニュー</div><div class="figure-contents"><div class="mediaobject"><img src="install/config-country.png" alt="国の選択メニュー" /></div></div></div><br class="figure-break" /><p>国に <span class="guimenuitem">United States</span> を選択した場合には、
	標準のアメリカのキーボードマップが使われるようになります。
	他の国を選択すると以下のメニューが表示されます。
	矢印キーを使い、適切なキーボードマップを選択して
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="config-keymap"></a><div class="figure-title">図3.4 キーボードメニューの選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/config-keymap.png" alt="キーボードメニューの選択" /></div></div></div><br class="figure-break" /><p>国の設定が終わったら、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>
	のメインメニューが表示されます。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-sysinstall"></a>3.5. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> の紹介</h2></div></div></div><p>FreeBSD 8.<em class="replaceable"><code>X</code></em> のインストーラである
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> は、
      コンソール上で動作し、
      いくつものメニューや画面から構成され、
      設定やインストールプロセスをコントロールできます。</p><p>メニューはカーソルキー、
      <span class="keycap"><strong>Enter</strong></span>, <span class="keycap"><strong>Tab</strong></span>,
      <span class="keycap"><strong>Space</strong></span> 等で操作します。
      これらのキーの詳しい解説とその意味については、<a class="xref" href="#sysinstall-main3" title="図3.5 Sysinstall のメインメニューから Usage を選択">図3.5「Sysinstall のメインメニューから Usage を選択」</a> に示されているように、
      <span class="guimenuitem">Usage</span> の項目が強調表示され、
      <span class="guibutton">[Select]</span> ボタンが選択されていることを確認してから、
      <span class="keycap"><strong>Enter</strong></span> を押してください。</p><p>メニューシステムの使い方が表示されます。読み終ったら、
      <span class="keycap"><strong>Enter</strong></span> を押してメインメニューに戻りましょう。</p><div class="figure"><a id="sysinstall-main3"></a><div class="figure-title">図3.5 Sysinstall のメインメニューから Usage を選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/main1.png" alt="Sysinstall のメインメニューから Usage を選択" /></div></div></div><br class="figure-break" /><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="select-doc"></a>3.5.1. ドキュメントメニューの選択</h3></div></div></div><p>メインメニューから、カーソルキーで
	<span class="guimenuitem">Doc</span> を選択して
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="main-doc"></a><div class="figure-title">図3.6 ドキュメントメニューの選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/main-doc.png" alt="ドキュメントメニューの選択" /></div></div></div><br class="figure-break" /><p>これでドキュメントメニューが表示されます。</p><div class="figure"><a id="docmenu1"></a><div class="figure-title">図3.7 Sysinstall ドキュメントメニュー</div><div class="figure-contents"><div class="mediaobject"><img src="install/docmenu1.png" alt="Sysinstall ドキュメントメニュー" /></div></div></div><br class="figure-break" /><p>付属のドキュメントを読むことは重要です。
	ドキュメントを読むには、カーソルキーで選択して
	<span class="keycap"><strong>Enter</strong></span> を押してください。読み終えたら、
	<span class="keycap"><strong>Enter</strong></span> を押すとドキュメントのメニューに戻ります。</p><p>メインのインストールメニューに戻るには、カーソルキーで
	<span class="guimenuitem">Exit</span> を選択して、
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="keymap"></a>3.5.2. キー配列メニューの選択</h3></div></div></div><p>キーボード配列を変更するには、カーソルキーで
	<span class="guimenuitem">Keymap</span> を選択して、
	<span class="keycap"><strong>Enter</strong></span> を押してください。
	使用しているキーボードが、標準ではなかったり、
	または US ではない場合に変更作業が必要となります。</p><div class="figure"><a id="sysinstall-keymap"></a><div class="figure-title">図3.8 Sysinstall メインメニュー</div><div class="figure-contents"><div class="mediaobject"><img src="install/main-keymap.png" alt="Sysinstall メインメニュー" /></div></div></div><br class="figure-break" /><p>上下のカーソルキーでメニュー項目を選択して
	<span class="keycap"><strong>Space</strong></span> を押すと、異なるキーボード配列を選択できます。
	もう一度 <span class="keycap"><strong>Space</strong></span> を押すと、選択を解除します。
	完了したら、カーソルキーで <span class="guibutton">[ OK ]</span> を選択して
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><p>このスクリーン表示では、リストの一部しか表示されていません。
	<span class="keycap"><strong>Tab</strong></span> を押して <span class="guibutton">[ Cancel ]</span> を選択すると、
	デフォルトのキーマップを使用して、
	メインインストールメニューに戻ります。</p><div class="figure"><a id="sysinstall-keymap-menu"></a><div class="figure-title">図3.9 Sysinstall キー配列メニュー</div><div class="figure-contents"><div class="mediaobject"><img src="install/keymap.png" alt="Sysinstall キー配列メニュー" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="viewsetoptions"></a>3.5.3. インストールオプション画面</h3></div></div></div><p><span class="guimenuitem">Options</span> を選択して、
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="sysinstall-options"></a><div class="figure-title">図3.10 Sysinstall メインメニュー</div><div class="figure-contents"><div class="mediaobject"><img src="install/main-options.png" alt="Sysinstall メインメニュー" /></div></div></div><br class="figure-break" /><div class="figure"><a id="options"></a><div class="figure-title">図3.11 Sysinstall オプション</div><div class="figure-contents"><div class="mediaobject"><img src="install/options.png" alt="Sysinstall オプション" /></div></div></div><br class="figure-break" /><p>ほとんどのユーザーにはデフォルトの値でよく、変更する必要はありません。
	リリース名は、インストールするバージョンによって変わります。</p><p>選択された項目の説明が、画面の下部に青く強調表示されます。
	オプションの 1 つは <span class="guimenuitem">Use Defaults</span> という、
	すべての値を初期値に戻すものであることに気をつけてください。</p><p><span class="keycap"><strong>F1</strong></span> を押すと、
	さまざまなオプションについての説明を読むことができます。</p><p><span class="keycap"><strong>Q</strong></span> を押すと、
	メインインストールメニューに戻ります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="start-install"></a>3.5.4. 標準インストールの開始</h3></div></div></div><p><span class="trademark">UNIX</span>® や FreeBSD が初めての人には
	<span class="guimenuitem">Standard</span> インストールがお奨めです。
	カーソルキーで <span class="guimenuitem">Standard</span> を選択し、
	<span class="keycap"><strong>Enter</strong></span> を押してインストールを始めてください。</p><div class="figure"><a id="sysinstall-standard"></a><div class="figure-title">図3.12 標準インストールの開始</div><div class="figure-contents"><div class="mediaobject"><img src="install/main-std.png" alt="標準インストールの開始" /></div></div></div><br class="figure-break" /></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-steps"></a>3.6. ディスク領域の割り当て</h2></div></div></div><p>最初の課題は、FreeBSD 用にディスク領域を割り当て、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>
      が使えるようにラベルを作成することです。
      そうするためには、FreeBSD
      がディスク上にどのような情報があることを前提としているかを知らなければなりません。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-drive-bios-numbering"></a>3.6.1. BIOS ドライブの番号付け</h3></div></div></div><p>FreeBSD をインストールして設定する前に、
	FreeBSD がどのように BIOS
	ドライブマッピングを取り扱うかを理解しておくことが重要です。</p><a id="idp79353552" class="indexterm"></a><a id="idp79354064" class="indexterm"></a><p><span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® のような
	に依存したオペレーティングシステムが動いている PC では、
	BIOS がディスクドライブの順序を構成でき、
	OS はその変化に追従します。これにより、"プライマリマスタ"
	以外のディスクから起動することができます。
	この仕組みを用いればシステムのバックアップを取る簡単な方法を構築できます。
	もう一つ同じディスクを買い、
	一つ目のディスクから二つめのディスクへのコピーを定期的に取ればいいのです。
	そして、一つ目のディスクに障害が起きたり、ウィルスに感染したり、
	オペレーティングシステムの不具合でめちゃくちゃにされてしまった時には、
	BIOS に対してドライブを論理的に交換するように指示することで簡単に復旧できるのです。
	この方法はドライブのケーブルを交換するのと同じようなことなのですが、
	ケースを開ける必要がありません。</p><a id="idp79355856" class="indexterm"></a><a id="idp79364688" class="indexterm"></a><p>SCSI コントローラを備えたシステムでは、
	しばしば BIOS に拡張が施されており、同じように 7
	台までのドライブの順番を組み換えることができるようになっています。</p><p>以上のような機能を便利に使っているユーザは、
	FreeBSD では同じような結果にならないことに驚くかもしれません。FreeBSD は
	BIOS を利用しないため、<span class="quote">「<span class="quote">論理 BIOS ドライブマッピング</span>」</span>
	については知らないのです。
	このため、特に同じ物理ジオメトリを持っているいくつかのドライブをデータのクローンとして使っている時に、
	ややこしい状況になり得ます。</p><p>FreeBSD を使う時は、
	インストール前にドライブの番号付けが自然なものになるように、
	必ず BIOS の設定を戻しておきましょう。
	もしドライブの番号付けを変更する必要がある場合には、
	ケースを開けジャンパーやケーブルを移動してください。</p><div class="sidebar"><div xmlns="" class="titlepage"><div><div><div xmlns="http://www.w3.org/1999/xhtml" class="-title"></div></div></div></div><p>Bill は Fred のためにもう一つ FreeBSD 箱を作ろうと古い
	  Wintel 箱を潰しました。Bill は ユニット番号 0 の SCSI ドライ
	  ブを一つ追加し、そこに FreeBSD を入れました。</p><p>Fred はこのシステムを使い始めましたが、数日後その古い
	  SCSI ドライブがたくさんのエラーを吐いていることに気付きました。</p><p>その問題に対処するため、
	  Bill は同じ SCSI ドライブを取ってきました。
	  このドライブを SCSI ユニット番号 4 と
	  して取り付け、ドライブ 0 からドライブ 4 へのイメージコピーを行ないました。
	  新しいドライブがインストールされ、
	  しかもうまく動いているため、Bill
	  はそれを使い始めてもいいだろうと思いました。
	  そこで彼は SCSI BIOS の機能を使ってシステムがユニット 4
	  から起動するようにディスクドライブの順序を入れ換えました。
	  FreeBSD が起動し、調子良く動き始めました。</p><p>Fred は作業を続けましたが、すぐに
	  新しいバージョンの FreeBSD
	  にアップグレードすることにしました。Bill は SCSI ユニット 0
	  のディスクは当てにならないので取りはずし、
	  別の新しい同じドライブと交換しました。
	  そして、Bill は新しいバージョンの
	  FreeBSD を、新しい SCSI ユニット 0 にインストールしました。
	  インストールはうまくいきました。</p><p>Fred は新しいバージョンの FreeBSD を数日使ってみて、
	  技術部門でも使えるくらい十分に良いものだと確認しました。
	  古いバージョンからすべての作業をコピーする時が来たのです。
	  そこで Fred は、古い FreeBSD
	  で行なっていた作業の最新のものが置いてあるはずの SCSI ユニット 4 
	  をマウントしました。ところが、Fred は SCSI ユニット 4
	  には自分の作業がなにも残っていないことを発見して慌てふためきました。</p><p>Bill がオリジナルの SCSI ユニット 0 のイメージをユニット
	  4 にコピーした時に、ユニット 4 が <span class="quote">「<span class="quote">新クローン</span>」</span>
	  になっていたのです。
	  Bill がユニット 4 から起動するように SCSI BIOS で順序の入れ換えを行なった後でも、
	  FreeBSD は依然として SCSI ユニット 0 上で動いていたのです。
	  BIOS にこのような変更を行なっても Boot と
	  Loader のコードの一部もしくは全部は選択された BIOS
	  ドライブから取得されます。しかしながら、処理が FreeBSD
	  のカーネルドライバに引き渡された時から BIOS ドライブの順序は無視され、
	  FreeBSD は、通常のドライブ番号順に移行するのです。
	  さきほどの例では、システムはオリジナルの SCSI ユニット 0 で動き続けており、
	  Fred のデータはすべて SCSI ユニット 4 ではなくそのディスクに残っていたのです。
	  システムが SCSI ユニット 4
	  で動いているように見えたのは単に人の期待からくる妄想だったのです。</p><p>幸運にも、古い SCSI ユニット 0 は見つけ出され、
	  Fred が行なった作業はすべて彼のもとへ返ってきたのです。</p><p>この例では SCSI ドライブが用いられましたが、その概念は
	  IDE ドライブにも同じように当てはまります。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="main-fdisk"></a>3.6.2. fdisk でスライス作成</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> で Standard インストールを選択すると、
	次のメッセージが表示されるでしょう。</p><pre class="screen">                                 Message
 In the next menu, you will need to set up a DOS-style ("fdisk")
 partitioning scheme for your hard disk. If you simply wish to devote
 all disk space to FreeBSD (overwriting anything else that might be on
 the disk(s) selected) then use the (A)ll command to select the default
 partitioning scheme followed by a (Q)uit. If you wish to allocate only
 free space to FreeBSD, move to a partition marked "unused" and use the
 (C)reate command.
                                [  OK  ]

                      [ Press enter or space ]</pre><p><span class="keycap"><strong>Enter</strong></span> を押すと、
	カーネルがデバイス検出時に見付けた、
	すべてのハードドライブのリストが表示されます。
	<a class="xref" href="#sysinstall-fdisk-drive1" title="図3.13 fdisk を実行するディスクの選択">図3.13「fdisk を実行するディスクの選択」</a> は
	<code class="filename">ad0</code> および
	<code class="filename">ad2</code> と名付けられた
	2 つの IDE ディスクをもつシステムの例です。</p><div class="figure"><a id="sysinstall-fdisk-drive1"></a><div class="figure-title">図3.13 fdisk を実行するディスクの選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/fdisk-drive1.png" alt="fdisk を実行するディスクの選択" /></div></div></div><br class="figure-break" /><p>この画面では、一覧に <code class="filename">ad1</code>
	が表示されていないことに注目してください。</p><p>一つ目はプライマリ IDE コントローラのマスタ、
	二つ目はセカンダリ IDE コントローラのマスタとして接続している
	2 つの IDE ハードディスクを考えてください。
	もし FreeBSD がこれらを <code class="filename">ad0</code> と
	<code class="filename">ad1</code>
	のように番号つけても、すべては動作するでしょう。</p><p>しかし、その後プライマリ IDE コントローラのスレーブとして
	3 つ目のディスクを追加したとしたら、
	それはたった今 <code class="filename">ad1</code> となり、
	以前の <code class="filename">ad1</code> は
	<code class="filename">ad2</code> となるでしょう。
	デバイス名はファイルシステムを見つけるのに使われるため、
	ファイルシステムのいくつかは突然正しく現れなくなるかもしれず、
	FreeBSD の設定を変更する必要があるでしょう。</p><p>これを解決するために、ディスクが見つかった順番ではなく、
	どこに接続されているかということに基づいて
	IDE ディスクを名前づけするようにカーネルを設定できます。
	この機構によって、セカンダリ IDE コントローラのマスタディスクは、
	たとえ <code class="filename">ad0</code> または <code class="filename">ad1</code>
	デバイスがないとしても<span class="emphasis"><em>いつでも</em></span>
	<code class="filename">ad2</code> になるでしょう。</p><p>この設定は FreeBSD カーネルの標準設定です。
	これがこの例で画面に <code class="filename">ad0</code> および
	<code class="filename">ad2</code> が表示される理由です。
	このスクリーンショットが得られたマシンには、
	IDE コントローラの両方のマスタチャネルにディスクがあり、
	スレーブチャネルにはありません。</p><p>FreeBSD をインストールしたいディスクを選択して、
	<span class="guibutton">[ OK ]</span> を押してください。
	<a class="xref" href="#sysinstall-fdisk1" title="図3.14 典型的な FDisk パーティション">図3.14「典型的な <span class="application">FDisk</span> パーティション」</a> のような表示とともに
	<span class="application">Fdisk</span> が起動するでしょう。</p><p><span class="application">Fdisk</span>
	の画面は三つのセクションに分かれます。</p><p>一つ目のセクションは、これは表示の先頭二行にわたっているのですが、
	現在選択されているディスクの詳細を表示します。
	ディスクの詳細には FreeBSD でのデバイス名、ディスクのジオメトリ、
	そしてディスクの全容量が含まれます。</p><p>二つ目のセクションは現在ディスク上にあるスライスを表示します。
	スライスの開始セクタと終了セクタ、大きさ、FreeBSD 上での名前、
	種類とサブタイプが表示されます。
	この例では、PC 上のディスクレイアウト機能が生み出した、
	未使用の小さなスライスを二つ表示しています。
	また大きな <acronym class="acronym">FAT</acronym> スライスも一つ表示しています。
	これは、<span class="trademark">Windows</span>® において <code class="filename">C:</code> ドライブ、
	および拡張スライスとして現れます
	(この場合、他のドライブレターとなりえます)。</p><p>三つ目のセクションは <span class="application">FDisk</span>
      において利用可能なコマンドを表示します。</p><div class="figure"><a id="sysinstall-fdisk1"></a><div class="figure-title">図3.14 典型的な <span class="application">FDisk</span> パーティション</div><div class="figure-contents"><div class="mediaobject"><img src="install/fdisk-edit1.png" alt="典型的な FDisk パーティション" /></div></div></div><br class="figure-break" /><p>今から行うことは、
	どのようにディスクを分割するかによります。</p><p>FreeBSD をディスク全体にインストールするのであれば、
	<span class="guimenuitem">Use Entire Disk</span> オプションを表す
	<span class="keycap"><strong>A</strong></span> キーを押してください。
	この場合、このディスクのすべてのデータは削除されます。
	存在しているスライスは取り除かれ、
	<code class="literal">unused</code> の小さな領域と、
	FreeBSD のための大きなスライスへ置きかわるでしょう。
	次に方向キーを使って新しく作成された
	FreeBSD スライスを選択し、スライスに起動可能の印をつけるために
	<span class="keycap"><strong>S</strong></span> キーを押してください。
	そのとき、画面の見た目は <a class="xref" href="#sysinstall-fdisk2" title="図3.15 ディスク全体を使う FDisk 構成">図3.15「ディスク全体を使う FDisk 構成」</a>
	とよく似たものとなるでしょう。
	<code class="literal">Flags</code> 列の <code class="literal">A</code> に注意してください。
	これはこのスライスが <span class="emphasis"><em>アクティブ</em></span> で、
	ここから起動することを示します。</p><p>FreeBSD のための空き領域を作成するために、
	存在しているスライスを削除しようとしているのなら、
	方向キーをつかってスライスを選択して
	<span class="keycap"><strong>D</strong></span> キーを押してください。
	それから <span class="keycap"><strong>C</strong></span> キーを押すと、
	作成したいスライスの大きさの入力を促されます。
	適切な数字を入力して <span class="keycap"><strong>Enter</strong></span> キーを押してください。
	この欄に表示されているデフォルト値は、
	スライスに対して割り当てることのできる最大の値です。
	この値は、割り当てられていない領域の連続したブロック、または、ハードディスクの全サイズです。</p><p>FreeBSD のための空き領域を既に作成しているなら、
	そのときは <span class="keycap"><strong>C</strong></span>
	キーを押して新しいスライスを作成できます。
	再び、作成したいスライスの大きさの入力を促されるでしょう。</p><div class="figure"><a id="sysinstall-fdisk2"></a><div class="figure-title">図3.15 ディスク全体を使う FDisk 構成</div><div class="figure-contents"><div class="mediaobject"><img src="install/fdisk-edit2.png" alt="ディスク全体を使う FDisk 構成" /></div></div></div><br class="figure-break" /><p>終了したら <span class="keycap"><strong>Q</strong></span> キーを押しください。
	あなたの変更は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>
	内に保存されるでしょう。
	しかし、まだディスクには書きこまれません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bootmgr"></a>3.6.3. ブートマネージャのインストール</h3></div></div></div><p>次のメニューでは、
	ブートマネージャをインストールするかどうかを選択します。
	一般的に、次の場合は
	FreeBSD ブートマネージャをインストールするべきです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>二つ以上のドライブがあり、
	    一番目のドライブ以外に FreeBSD をインストールする場合</p></li><li class="listitem"><p>FreeBSD を同じディスク内に他の OS と共存させてインストールしており、
	    コンピュータを起動する際に FreeBSD か他の OS かを選択したい場合</p></li></ul></div><p>もし、コンピュータに FreeBSD のみをインストールするのであれば、
	最初のハードディスクにインストールし、
	<span class="guimenuitem">Standard</span> ブートマネージャを選択してください。
	もし、FreeBSD をブート可能なサードパーティ製のブートマネージャを使うのであれば、
	<span class="guimenuitem">None</span> を選択してください。</p><p>選択をして <span class="keycap"><strong>Enter</strong></span> キーを押してください。</p><div class="figure"><a id="sysinstall-bootmgr"></a><div class="figure-title">図3.16 sysinstall ブートマネージャメニュー</div><div class="figure-contents"><div class="mediaobject"><img src="install/boot-mgr.png" alt="sysinstall ブートマネージャメニュー" /></div></div></div><br class="figure-break" /><p><span class="keycap"><strong>F1</strong></span> キーを押すと表示されるヘルプ画面では、
	ハードディスクを
	OS 間で共有する場合に起こり得る問題について議論しています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79418064"></a>3.6.4. 他のドライブのスライスの作成</h3></div></div></div><p>二つ以上ドライブがある場合、
	ブートマネージャを選択した後、ドライブ選択画面に戻ります。
	FreeBSD を二つ以上のディスクにインストールしたいのなら、
	他のディスクを選択し、<span class="application">FDisk</span>
	を用いてスライス作成の作業を繰りかえしてください。</p><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">一番目以外のドライブに FreeBSD をインストールするのであれば、
	  両方のドライブに FreeBSD
	  のブートマネージャをインストールする必要があります。</p></div><div class="figure"><a id="sysinstall-fdisk-drive2"></a><div class="figure-title">図3.17 ドライブ選択の終了</div><div class="figure-contents"><div class="mediaobject"><img src="install/fdisk-drive2.png" alt="ドライブ選択の終了" /></div></div></div><br class="figure-break" /><p><span class="keycap"><strong>Tab</strong></span> キーを押して、
	最後に選択したドライブと
	<span class="guibutton">[ OK ]</span> および <span class="guibutton">[ Cancel ]</span> の間を切りかえてください。</p><p><span class="guibutton">[ OK ]</span> に移るために <span class="keycap"><strong>Tab</strong></span> キーを一度押し、
	それからインストールを続けるために
	<span class="keycap"><strong>Enter</strong></span> キーを押してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdlabeleditor"></a>3.6.5. <span class="application">disklabel</span> でパーティション作成</h3></div></div></div><p>次に、作成したばかりのスライス内にパーティションをいくつか作成してください。
	それぞれのパーティションには
	<code class="literal">a</code> から <code class="literal">h</code> までの文字がつけられ、
	<code class="literal">b</code>, <code class="literal">c</code> そして
	<code class="literal">d</code>
	パーティションは守るべき慣習的な意味を持っています。</p><p>特定のアプリケーションは、特別のパーティション構成
	(特に二つ以上のディスクにわたってパーティションを構成している場合)
	から利益を得ることができます。
	しかしながら、はじめて FreeBSD をインストールする場合、
	ディスクをどのようにパーティションに区切るか、
	ということをあまり大げさに考えることはありません。
	FreeBSD をインストールして使い方を学びはじめることの方がより重要です。
	オペレーティングシステムにより詳しくなった後、
	いつでも FreeBSD を再インストールすることで、
	パーティション構成を変更できます。</p><p>以下は四つのパーティション : 一つはスワップ領域、
	三つのファイルシステム、の構成です。</p><div class="table"><a id="idp79433680"></a><div class="table-title">表3.2 一つ目のディスクのパーティションレイアウト</div><div class="table-contents"><table summary="一つ目のディスクのパーティションレイアウト" width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>パーティション</th><th>ファイルシステム</th><th>サイズ</th><th>説明</th></tr></thead><tbody><tr><td><code class="literal">a</code></td><td><code class="filename">/</code></td><td>1 GB</td><td>これはルートファイルシステムです。
		他のファイルシステムはすべてこの下のどこかにマウントされるでしょう。
		ユーザのファイルはここに格納されず、また、
		通常の FreeBSD インストールでは、
		ここに配置するデータは約 128 MB なので、
		1 GB はこのファイルシステムに手ごろなサイズです。</td></tr><tr><td><code class="literal">b</code></td><td>なし</td><td>メモリの 2-3 倍</td><td><p><code class="literal">b</code> パーティションには、
		システムのスワップ領域が保持されています。
		スワップ領域の正しい容量を決めることは、
		ちょっとした芸術かもしれません。
		確実な経験則は、物理的なメモリ (RAM) の
		2-3 倍のサイズのスワップ領域とするように、としています。
		また、最低 64 MB のスワップを確保するといいでしょう。
		したがって、コンピュータが
		32 MB 未満のメモリを搭載している時は、
		スワップ領域を 64 MB にしてください。
		二つ以上のディスクがあるときには、
		それぞれのディスクにスワップを置くことができます。
		FreeBSD はそれぞれのディスクをスワップに用い、
		スワップ動作を効果的に高速化させるでしょう。
		この場合、必要とするスワップサイズの合計を計算し、
		それぞれのディスクに置くスワップサイズを求めるために、
		ディスク数で割ってください。</p>
	      </td></tr><tr><td><code class="literal">e</code></td><td><code class="filename">/var</code></td><td>512 MB 〜 4096 MB</td><td><code class="filename">/var</code>
		には、ログファイルやその他の管理ファイルといった、
		絶えず変化するファイルが保存されています。
		これらのファイルの多くは
		FreeBSD の毎日の動作の間に広範囲にわたって読みこまれ、
		書きこまれます。 (訳注: <code class="filename">/</code>とは)
		別のファイルシステムにこれらのファイルを置くことは、
		異なったアクセス頻度のディレクトリ内にある他のファイルに影響を与えずに、
		FreeBSD がこれらのファイルへのアクセスを最適化することを可能とします。</td></tr><tr><td><code class="literal">f</code></td><td><code class="filename">/usr</code></td><td>ディスクの残り (少なくとも 8 GB)</td><td>他のすべてのファイルは、主に
		<code class="filename">/usr</code>
		およびそのサブディレクトリ内に保存されます。</td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">上記のサイズの値は、例として載せたものです。
	  経験のあるユーザのみが使ってください。
	  FreeBSD パーティションエディタの <code class="literal">Auto
	    Defaults</code>
	  で選択できる自動パーティションレイアウトが推奨されています。</p></div><p>二つ以上のディスクに FreeBSD をインストールしようとしているのなら、
	設定した他のスライスにもパーティションを作成しないといけません。
	最も簡単な方法は、
	それぞれのディスクに二つのパーティションを作成することです。
	一つはスワップ領域、
	そして一つはファイルシステムのためのパーティションです。</p><div class="table"><a id="idp79459664"></a><div class="table-title">表3.3 残りのディスクのパーティション構成</div><div class="table-contents"><table summary="残りのディスクのパーティション構成" width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>パーティション</th><th>ファイルシステム</th><th>サイズ</th><th>説明</th></tr></thead><tbody><tr><td><code class="literal">b</code></td><td>なし</td><td>説明を参照</td><td>スワップ領域をそれぞれのディスクにわたって分割できます。
		たとえ <code class="literal">a</code> パーティションが
		(訳注: そのスライスに) ないとしても、
		慣習により、スワップ領域は
		<code class="literal">b</code> パーティションとなります。</td></tr><tr><td><code class="literal">e</code></td><td>/disk<em class="replaceable"><code>n</code></em></td><td>ディスクの残り</td><td>ディスクの残りは一つの大きなパーティションとなります。
		これは <code class="literal">e</code> パーティションの代わりに、
		<code class="literal">a</code>
		パーティション上へ簡単に置くことができるかもしれません。
		しかしながら慣習により、スライス上の <code class="literal">a</code>
		パーティションはルート
		(<code class="filename">/</code>)
		ファイルシステムとなるファイルシステムのために予約されています。
		この慣習にしたがう必要はありませんが
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> はこのように設定します。
		したがってこの慣習に従うことで,
		インストールが少しだけわかりやすくなります。
		このファイルシステムをマウントする場所はどこにでも選択できます。
		この例では、これらを <code class="filename">/disk<em class="replaceable"><code>n</code></em></code>
		としてマウントするよう提案しています。
		ここで <em class="replaceable"><code>n</code></em>
		はそれぞれのディスクごとに変更する数字です。</td></tr></tbody></table></div></div><br class="table-break" /><p>パーティション構成を決めたら、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>  を用いて作成してください。</p><pre class="screen">                                 Message
 Now, you need to create BSD partitions inside of the fdisk
 partition(s) just created. If you have a reasonable amount of disk
 space (1GB or more) and don't have any special requirements, simply
 use the (A)uto command to allocate space automatically. If you have
 more specific needs or just don't care for the layout chosen by
 (A)uto, press F1 for more information on manual layout.

                                [  OK  ]
                          [ Press enter or space ]</pre><p><span class="application">Disklabel</span> と呼ばれる
	FreeBSD パーティションエディタを使うために、
	<span class="keycap"><strong>Enter</strong></span> キーを押してください。</p><p><a class="xref" href="#sysinstall-label" title="図3.18 sysinstall ディスクラベルエディタ">図3.18「sysinstall ディスクラベルエディタ」</a> は
	<span class="application">Disklabel</span>
	を起動したときの画面表示です。
	この画面は三つのセクションに分かれています。</p><p>はじめの数行は現在作業しているディスクの名前、
	そして作成しようとしているパーティションを含むスライスを表示します
	この時点で <span class="application">Disklabel</span>
	はスライスのことをスライス名ではなく<code class="literal">パーティション名</code>と呼びます 。
	この画面はスライス内の空き領域の合計も表示しています。
	この空き領域はスライス内に存在していて、
	しかしまだパーティションに割り当てられていない領域です。</p><p>画面の中段は作成したパーティションを表示しています。
	それぞれのパーティションが含むファイルシステムの名前、サイズ、
	ファイルシステム作成にまつわるいくつかのオプションが表示されます。</p><p>画面の下段にある三つ目のセクションは
	<span class="application">disklabel</span>
	で有効なキー操作を表示します。</p><div class="figure"><a id="sysinstall-label"></a><div class="figure-title">図3.18 sysinstall ディスクラベルエディタ</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-ed1.png" alt="sysinstall ディスクラベルエディタ" /></div></div></div><br class="figure-break" /><p><span class="application">Disklabel</span>
	は自動的にパーティションを作成し、
	デフォルトのサイズを割りあてます。
	デフォルトのサイズは、
	ディスクのサイズからパーティションサイズを決めるアルゴリズムによって計算されます。
	<span class="keycap"><strong>A</strong></span> キーを押すと、
	<a class="xref" href="#sysinstall-label2" title="図3.19 デフォルトの自動割り当てによる sysinstall ディスクラベルエディタ">図3.19「デフォルトの自動割り当てによる sysinstall ディスクラベルエディタ」</a> とよく似た画面が表示されます。
	デフォルトのサイズは使用しているディスクのサイズに依存するので、
	希望するサイズになることもあるし、ならないこともあるでしょう。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">デフォルトのパーティション構成では、
	  <code class="filename">/tmp</code> に対して、
	  <code class="filename">/</code>
	  パーティションの一部ではなく、
	  それ自身のパーティションを割り当てます。
	  このことは、一時ファイルによって
	  <code class="filename">/</code>
	  パーティションがあふれてしまうことを防ぐのに役立ちます。</p></div><div class="figure"><a id="sysinstall-label2"></a><div class="figure-title">図3.19 デフォルトの自動割り当てによる sysinstall ディスクラベルエディタ</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-auto.png" alt="デフォルトの自動割り当てによる sysinstall ディスクラベルエディタ" /></div></div></div><br class="figure-break" /><p>デフォルトのパーティションを変更するには、
	方向キーを用いて一番目のパーティションを選択し、
	<span class="keycap"><strong>D</strong></span> キーを押して削除してください。
	この作業を繰り返して、
	提案されたすべてのパーティションを削除してください。</p><p>一番目のパーティション (<code class="filename">/</code>
	としてマウントされる <code class="literal">a</code>) を作成するには、
	画面の先頭の適切なディスクスライスが選択されていることを確認して、
	<span class="keycap"><strong>C</strong></span> キーを押してください。
	<a class="xref" href="#sysinstall-label-add" title="図3.20 ルートパーティションに割りあてる容量">図3.20「ルートパーティションに割りあてる容量」</a> に示されるような、
	新しいパーティションのサイズの入力をうながすダイアログが現れます。
	使用したいサイズをブロック数で入力するか、
	数字の後に <code class="literal">M</code> をつけてメガバイト単位 、
	<code class="literal">G</code> をつけてギガバイト単位 、
	<code class="literal">C</code>
	をつけてシリンダ単位で入力してください。</p><div class="figure"><a id="sysinstall-label-add"></a><div class="figure-title">図3.20 ルートパーティションに割りあてる容量</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-root1.png" alt="ルートパーティションに割りあてる容量" /></div></div></div><br class="figure-break" /><p>(訳注: ダイアログに) 表示されるデフォルトのサイズは、
	スライスに残っているサイズのパーティションを作成するでしょう。
	上述したパーティションサイズを用いる場合は <span class="keycap"><strong>Backspace</strong></span>
	キーを用いて表示されている数字を削除し
	<a class="xref" href="#sysinstall-label-add2" title="図3.21 ルートパーティションサイズの編集">図3.21「ルートパーティションサイズの編集」</a> のように <strong class="userinput"><code>512M</code></strong>
	と入力してください。そして <span class="guibutton">[ OK ]</span> を押してください。</p><div class="figure"><a id="sysinstall-label-add2"></a><div class="figure-title">図3.21 ルートパーティションサイズの編集</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-root2.png" alt="ルートパーティションサイズの編集" /></div></div></div><br class="figure-break" /><p>パーティションのサイズを入力すると、
	次にインストーラは、このパーティションがファイルシステムなのか、
	それともスワップ領域なのかを聞いてきます。
	<a class="xref" href="#sysinstall-label-type" title="図3.22 ルートパーティションタイプの選択">図3.22「ルートパーティションタイプの選択」</a>
	のようにダイアログが表示されます。
	この一番目のパーティションにはファイルシステムが含まれるので、
	<span class="guimenuitem">FS</span> を選択し、
	<span class="keycap"><strong>Enter</strong></span> キーを押します。</p><div class="figure"><a id="sysinstall-label-type"></a><div class="figure-title">図3.22 ルートパーティションタイプの選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-fs.png" alt="ルートパーティションタイプの選択" /></div></div></div><br class="figure-break" /><p>最後に <span class="application">Disklabel</span> に対して、
	このファイルシステムがどこにマウントされるか教えなければなりません。
	<a class="xref" href="#sysinstall-label-mount" title="図3.23 ルートのマウントポイント選択">図3.23「ルートのマウントポイント選択」</a>
	のようなダイアログが表示されます。
	<strong class="userinput"><code>/</code></strong> と入力し
	<span class="keycap"><strong>Enter</strong></span> キーを押してください。</p><div class="figure"><a id="sysinstall-label-mount"></a><div class="figure-title">図3.23 ルートのマウントポイント選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-root3.png" alt="ルートのマウントポイント選択" /></div></div></div><br class="figure-break" /><p>画面は更新されて、
	新しく作成したパーティションが表示されます。
	この作業を繰りかえして、
	他のパーティションを作成してください。
	スワップパーティションを作成したときには、
	ファイルシステムのマウントポイントの入力は促されません。
	最後のパーティションの <code class="filename">/usr</code>
	を作成するときは、表示されたサイズをそのままにしておいて、
	スライスに残っているサイズを使用してください。</p><p>最終的な FreeBSD ディスクラベルエディタの画面は、
	選択された数値は異なっているかもしれませんが、
	<a class="xref" href="#sysinstall-label4" title="図3.24 sysinstall ディスクラベルエディタ">図3.24「sysinstall ディスクラベルエディタ」</a> のようになるでしょう。
	<span class="keycap"><strong>Q</strong></span> キーを押して終了します。</p><div class="figure"><a id="sysinstall-label4"></a><div class="figure-title">図3.24 sysinstall ディスクラベルエディタ</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-ed2.png" alt="sysinstall ディスクラベルエディタ" /></div></div></div><br class="figure-break" /></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-choosing"></a>3.7. 何をインストールするか選択する</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="distset"></a>3.7.1. ディストリビューションセットの選択</h3></div></div></div><p>インストールするディストリビューションセットを選択します。
	これは使おうとするシステムや利用可能なディスクの容量に依存します。
	最小構成のインストールから全てのインストールまでのオプションがあらかじめ用意されています。
	<span class="trademark">UNIX</span>® や FreeBSD に慣れてない人はこれらのどちらかを選ぶべきです。
	ディストリビューションセットのカスタマイズは、主としてより経験を積んだユーザーのためにあります。</p><p><span class="keycap"><strong>F1</strong></span> キーを押すとそのディストリビューションセットのオプションやそれらが何を含んでいるかというより詳しい情報が表示されます。
	ヘルプを見終わった後には、<span class="keycap"><strong>Enter</strong></span>
	キーを押してディストリビューションの選択メニューに戻ってください。</p><p>グラフィカルユーザインタフェースを望む場合には、
	FreeBSD のインストール後に
	<span class="application">Xorg</span>
	の設定とデフォルトデスクトップの選択を行ってください。
	<span class="application">Xorg</span>
	のインストールや設定に関する詳細な情報は
	<a class="xref" href="#x11" title="第6章 X Window System">6章<em>X Window System</em></a> にあります。</p><p>カスタムカーネルをコンパイルする予定ならばソースコードを含むオプションを選択します。
	なぜカスタムカーネルを構築するのか、またカスタムカーネルの構築方法に関しては
	<a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a> を参照してください。</p><p>すべてを含むシステムが最も多くのことを行えます。
	十分なディスクスペースがあるならば、<a class="xref" href="#distribution-set1" title="図3.25 ディストリビューションの選択">図3.25「ディストリビューションの選択」</a>
	で示されるように <span class="guimenuitem">All</span> を矢印キーで選択し、
	<span class="keycap"><strong>Enter</strong></span> を押します。
	ディスクスペースに懸念があるならば、状況に合ったよりふさわしいオプションを選択します。
	インストール後にそのほかのディストリビューションを加えることができるので、
	完璧な選択をしようとして悩まないでください。</p><div class="figure"><a id="distribution-set1"></a><div class="figure-title">図3.25 ディストリビューションの選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/dist-set.png" alt="ディストリビューションの選択" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portscol"></a>3.7.2. Ports Collection のインストール</h3></div></div></div><p>お望みのディストリビューションを選ぶと、
	FreeBSD Ports Collection をインストールするかどうかを尋ねてきます。
	Ports Collection とは、簡単にソフトウェアをインストールする方法です。
	サードパーティ製のソフトウェアパッケージのダウンロード、
	コンパイル、インストールを自動的に行うためのファイルの集まりです。
	<a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a> で Ports Collection の使用方法が解説されています。</p><p>インストールプログラムはディスクに十分な空き容量があるかどうかをチェックしませんので、
	十分な空き容量がある場合のみこのオプションを選択してください。
	FreeBSD 10.1 では、FreeBSD Ports Collection は、約 500 MB
	のディスク容量を必要とします。
	より最新の FreeBSD のバージョンでは、安全のためもう少し大きなサイズを想定してください。</p><pre class="screen">                         User Confirmation Requested
 FreeBSD Ports Collection をインストールしますか?

 これをインストールすることにより、24,000 以上の移植ソフトウェアパッケー
 ジにアクセスすることができます。これは、「クリーンな」状態では約 500 MB
 のディスク容量を占めますが、配布されている tarball をダウンロードしていくと、更に
 大きな領域を占めることになります (ただし、FreeBSD の CD/DVD で配布されている
 extra disk を持っていて、それを /cdrom にマウントして使用する場合には、
 さほど問題にはならないでしょう) 。

 Ports Collection は、非常に有用な資源であり、/usr パーティションに置
 いておくだけの価値は十分にあります。この質問には Yes と答えるのが賢明で
 しょう。

 Ports Collection に関するさらに詳しい情報や、最新の Ports に関しては、
 以下の場所を参照してください。
     http://www.FreeBSD.org/ports

                              [ Yes ]     No</pre><p>Ports Collection をインストールするなら <span class="guibutton">[ Yes ]</span>
	を、このオプションを選択しないのであれば <span class="guibutton">[ No ]</span>
	を矢印キーで選んでください。
	<span class="keycap"><strong>Enter</strong></span> キーを押して先に進みます。
	ディストリビューションの選択メニューが再度表示されます。</p><div class="figure"><a id="distribution-set2"></a><div class="figure-title">図3.26 ディストリビューションの確認</div><div class="figure-contents"><div class="mediaobject"><img src="install/dist-set2.png" alt="ディストリビューションの確認" /></div></div></div><br class="figure-break" /><p>オプションを選択したら矢印キーで <span class="guimenuitem">Exit</span>
	を選び、<span class="guibutton">[ OK ]</span> がハイライトされていることを確認し、
	<span class="keycap"><strong>Enter</strong></span> を押して先に進んでください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-media"></a>3.8. インストールメディアの選択</h2></div></div></div><p>CD または DVD からインストールする場合、矢印キーを使って
      <span class="guimenuitem">Install from a FreeBSD CD/DVD</span> を選んで下さい。
      <span class="guibutton">[ OK ]</span> が選択されていることを確認して、
      <span class="keycap"><strong>Enter</strong></span> キーを押しインストールを開始してください。</p><p>そのほかの方法でインストールする場合には、
      適切なオプションを選択しその後の指示に従ってください。</p><p><span class="keycap"><strong>F1</strong></span> キーを押すとインストールメディアに関するオンラインヘルプが表示されます。
      メディア選択メニューに戻るには <span class="keycap"><strong>Enter</strong></span> キーを押してください。</p><div class="figure"><a id="choose-media"></a><div class="figure-title">図3.27 インストールメディアの選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/media.png" alt="インストールメディアの選択" /></div></div></div><br class="figure-break" /><div xmlns="" class="note"><h3 class="admontitle">FTP インストールモード: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp79591632" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">FTP 経由のインストールを行う場合、active FTP, passive FTP,
	HTTP proxy 経由の三種類の FTP
	インストールモードから選択することになります。</p><div xmlns="http://www.w3.org/1999/xhtml" class="variablelist"><dl class="variablelist"><dt><span class="term">FTP Active: <span class="guimenuitem">Install from an FTP
	      server</span></span></dt><dd><p>すべての FTP 転送の際に <span class="quote">「<span class="quote">Active</span>」</span>
	      モードを使用します。
	      ファイアウォール内部のマシンではうまく動きませんが、
	      多くの場合 passive モードに対応していないような古い
	      FTP サーバでも動作します。
	      passive モードでの FTP 転送 (こちらがデフォルトです)
	      に失敗した場合には、active モードで確かめましょう!</p></dd><dt><span class="term">FTP Passive: <span class="guimenuitem">Install from an FTP server through a
	      firewall</span></span></dt><dd><p>このオプションでは、
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> は、すべての FTP 転送の際に
	      passive モード<a id="idp79602384" class="indexterm"></a>を使用します。
	      このモードを使用すると、
	      ランダム TCP ポートによる外部からの接続を許可していないファイアウォールを越えることができるようになります。</p></dd><dt><span class="term">HTTP proxy 経由の FTP:
	    <span class="guimenuitem">Install from an FTP server
	      through a http proxy</span></span></dt><dd><p>この方法では、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> は、HTTP
	      プロトコルを使って proxy サーバに接続し、FTP の操作を実現します。
	      proxy サーバは FTP 要求を (訳注: HTTP から FTP に) 変換して
	      FTP サーバに送るため、ファイアウォールが FTP
	      接続を禁止していても、HTTP proxy サーバ<a id="idp79606096" class="indexterm"></a>が提供されていれば
	      ファイアウォールを超えた FTP 接続を行なうことが可能です。
	      この方法を用いる場合には、FTP サーバの他に proxy
	      サーバを指定する必要があります。</p></dd></dl></div><p xmlns="http://www.w3.org/1999/xhtml">proxy FTP サーバに対しては、ユーザ名の一部として
	実際に接続したいサーバの名前を <span class="quote">「<span class="quote">@</span>」</span>
	記号に続けて与える必要があります。
	そうすると proxy サーバは本当のサーバの<span class="quote">「<span class="quote">ふり</span>」</span>
	をするようになります。
	たとえば、1234 ポートで要求を待つ proxy FTP サーバ
	<code class="systemitem">foo.example.com</code> を使って、
	<code class="systemitem">ftp.FreeBSD.org</code>
	をインストールするには、
	オプションメニューで
	FTP ユーザ名に <code class="literal">ftp@ftp.FreeBSD.org</code> を、
	パスワードとしてあなたのメールアドレスを設定します。
	そして、インストールメディアに FTP (proxy サーバが対応しているならば
	passive FTP)、URL として
	<code class="literal">ftp://foo.example.com:1234/pub/FreeBSD</code>
	を指定します。</p><p xmlns="http://www.w3.org/1999/xhtml"><code class="systemitem">ftp.FreeBSD.org</code> の
	<code class="filename">/pub/FreeBSD</code> は
	<code class="systemitem">foo.example.com</code>
	が代理で処理をおこなうことになるので、
	インストール時の要求に応じて
	<code class="systemitem">ftp.FreeBSD.org</code>
	からファイルを取り寄せます。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-final-warning"></a>3.9. インストール操作の確定</h2></div></div></div><p>これで良いと思ったら、ここでインストールを進めることができます。
      インストールするためにおこなうハードディスクに対する変更をやめるなら、
      ここが最後のチャンスでもあります。</p><pre class="screen">                       User Confirmation Requested
 Last Chance! Are you SURE you want to continue the installation?

 If you're running this on a disk with data you wish to save then WE
 STRONGLY ENCOURAGE YOU TO MAKE PROPER BACKUPS before proceeding!

 We can take no responsibility for lost disk contents!

                             [ Yes ]    No</pre><p><span class="guibutton">[ Yes ]</span> を選択して
      <span class="keycap"><strong>Enter</strong></span> キーを押すことでインストールは進みます。</p><p>インストールにかかる時間は、どのディストリビューションを選んだか、
      どのインストールメディアを使ったか、
      そしてコンピュータの速度にも依存します。
      インストール状況に従って、メッセージが逐次表示されます。</p><p>次のメッセージが表示されればインストールは終わりです。</p><pre class="screen">                               Message

Congratulations! You now have FreeBSD installed on your system.

We will now move on to the final configuration questions.
For any option you do not wish to configure, simply select No.

If you wish to re-enter this utility after the system is up, you may
do so by typing: /usr/sbin/sysinstall.

                                 [ OK ]

                      [  Press enter or space  ]</pre><p><span class="keycap"><strong>Enter</strong></span> キーを押せばインストール後の設定画面に
      移ることができます。</p><p><span class="guibutton">[ No ]</span> を選択して
      <span class="keycap"><strong>Enter</strong></span> キーを押すと、インストールを中断して
      システムには何の変更もおこないません。
      そのときには次のメッセージが表示されます。</p><pre class="screen">                                Message
Installation complete with some errors.  You may wish to scroll
through the debugging messages on VTY1 with the scroll-lock feature.
You can also choose "No" at the next prompt and go back into the
installation menus to retry whichever operations have failed.

                                 [ OK ]</pre><p>何もインストールされなかったため、このメッセージが表示されています。
      <span class="keycap"><strong>Enter</strong></span> キーを押しますと、
      インストーラを終了するためにメインメニューに戻ります。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-post"></a>3.10. インストール後の作業</h2></div></div></div><p>インストール完了後に数々のオプション設定を行います。
      オプションは、インストールした FreeBSD を起動する前に configuration
      の項目に入りなおすか、再起動後に
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>
      の中にある <span class="guimenuitem">Configure</span>
      の項目で設定することができます。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="inst-network-dev"></a>3.10.1. ネットワークデバイスの設定</h3></div></div></div><p>もし、FTP インストールのために PPP を設定したのならば、
	この画面は表示されず、前項で述べたように後から設定できます。</p><p>LAN の詳細情報と、FreeBSD のゲートウェイ・ルータの設定については
	<a class="link" href="#advanced-networking" title="第22章 高度なネットワーク">高度なネットワーク</a>
	の章を参照してください。</p><pre class="screen">                      User Confirmation Requested
   Would you like to configure any Ethernet or PPP network devices?

      (訳：イーサネットや SLIP/PPP ネットワークデバイスを設定したいですか？)

                             [ Yes ]   No</pre><p>ネットワークデバイスを設定するには <span class="guibutton">[ Yes ]</span>
	を選び、<span class="keycap"><strong>Enter</strong></span> キーを押します。
	設定しないのであれば、<span class="guibutton">[ No ]</span> を選びます。</p><div class="figure"><a id="ed-config1"></a><div class="figure-title">図3.28 イーサネットデバイスを選ぶ</div><div class="figure-contents"><div class="mediaobject"><img src="install/ed0-conf.png" alt="イーサネットデバイスを選ぶ" /></div></div></div><br class="figure-break" /><p>設定したいインタフェースを矢印キーで選び、<span class="keycap"><strong>Enter</strong></span>
	キーを押します。</p><pre class="screen">                      User Confirmation Requested
       Do you want to try IPv6 configuration of the interface?

      (訳：このインタフェース上で IPv6 の設定を行ないたいですか？)

                              Yes   [ No ]</pre><p>プライベートな LAN において、現行のインターネットプロトコル
	(<acronym class="acronym">IPv4</acronym>)
	で十分なのであれば、矢印キーで <span class="guibutton">[ No ]</span> を選び
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><p><acronym class="acronym">RA</acronym> サーバと
	<acronym class="acronym">IPv6</acronym> ネットワークで接続しているのであれば、
	<span class="guibutton">[ Yes ]</span> を選んで <span class="keycap"><strong>Enter</strong></span> を押してください。
	すると、数秒間 RA サーバを検索します。</p><pre class="screen">                             User Confirmation Requested
        Do you want to try DHCP configuration of the interface?

      (訳：このインタフェース上で DHCP 設定を行ないたいですか？)

                              Yes   [ No ]</pre><p>もし、Dynamic Host Configuration Protocol (<acronym class="acronym">DHCP</acronym>)
	が必要なければ、矢印で <span class="guibutton">[ No ]</span> を選び <span class="keycap"><strong>Enter</strong></span>
	を押してください。</p><p><span class="guibutton">[ Yes ]</span> を選んだ場合、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a> を実行します。設定が成功すると、
	ネットワーク設定情報が自動補完されます。 詳細については
	<a class="xref" href="#network-dhcp" title="22.10. DHCP">「DHCP」</a> を参照してください。</p><p>次のネットワーク設定画面では、LAN
	用ゲートウェイシステムのイーサネットデバイス構成が表示されます。</p><div class="figure"><a id="ed-config2"></a><div class="figure-title">図3.29 <em class="replaceable"><code>ed0</code></em> ネットワークの設定</div><div class="figure-contents"><div class="mediaobject"><img src="install/ed0-conf2.png" alt="ed0 ネットワークの設定" /></div></div></div><br class="figure-break" /><p><span class="keycap"><strong>Tab</strong></span> をつかって項目を選び、
	適切な情報を入力してください。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Host</span></dt><dd><p>完全修飾されたホスト名。この例では、<code class="systemitem">k6-2.example.com</code>。</p></dd><dt><span class="term">Domain</span></dt><dd><p>コンピュータのドメイン名。この例では <code class="systemitem">example.com</code>。</p></dd><dt><span class="term">IPv4 Gateway</span></dt><dd><p>ローカル以外のホストへパケットを送る際に使う IP アドレスです。
	      もしコンピュータがネットワーク上にいる場合は入力する必要があります。
	      このコンピュータがネットワークのインターネットゲートウェイである場合には
	      <span class="emphasis"><em>この項目は空白のまま</em></span>にします。
	      IPv4 ゲートウェイはデフォルトゲートウェイまたはデフォルトルートとも呼ばれます。</p></dd><dt><span class="term">Name server</span></dt><dd><p>ローカル DNS サーバの IP アドレスを指定します。
	      ローカル DNS サーバがプライベート LAN 上にないので、
	      プロバイダの DNS サーバ
	      (<code class="systemitem">208.163.10.2</code>)
	      を指定しました。</p></dd><dt><span class="term">IPv4 address</span></dt><dd><p>このインタフェースで使う IP アドレスは
	      <code class="systemitem">192.168.0.1</code>。</p></dd><dt><span class="term">Netmask</span></dt><dd><p>この例では、LAN で使うアドレスブロックは、
	      <code class="systemitem">192.168.0.0</code> -
	      <code class="systemitem">192.168.0.255</code>
	      です。
	      ネットマスクは (<code class="systemitem">255.255.255.0</code>) です。</p></dd><dt><span class="term">Extra options to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a></span></dt><dd><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> への追加のオプションを入力してください。
	      今回はありませんでした。</p></dd></dl></div><p>終了するときは、<span class="keycap"><strong>Tab</strong></span> キーを使って <span class="guibutton">[ OK ]</span> を選び、
	<span class="keycap"><strong>Enter</strong></span> を押します。</p><pre class="screen">                      User Confirmation Requested
        Would you like to bring the ed0 interface up right now?

      (訳：このインタフェースへの設定を今すぐ有効にしますか？)

                             [ Yes ]   No</pre><p><span class="guibutton">[ Yes ]</span> を選んで <span class="keycap"><strong>Enter</strong></span>
	を押すと、ネットワークへの設定を行い、利用可能な状態にします。
	しかしながら、コンピュータをまだ再起動する必要があるので、
	インストールの間には、多くのことは出来ません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="gateway"></a>3.10.2. ゲートウェイの設定</h3></div></div></div><pre class="screen">                       User Confirmation Requested
       Do you want this machine to function as a network gateway?

      (訳：このマシンにネットワークゲートウェイ機能を搭載しますか？)

                              [ Yes ]    No</pre><p>もし、マシンが LAN のゲートウエイであり、他マシン間の
	パケットを転送している場合は、<span class="guibutton">[ Yes ]</span> を選んで
	<span class="keycap"><strong>Enter</strong></span> を押します。
	もし、マシンがネットワーク上のノードである場合、<span class="guibutton">[ No ]</span> を選び
	<span class="keycap"><strong>Enter</strong></span> を押して先に進んでください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="inetd-services"></a>3.10.3. インターネットサービスの設定</h3></div></div></div><pre class="screen">                      User Confirmation Requested
Do you want to configure inetd and the network services that it provides?

      (訳：inetd 及び提供するネットワークサービスの設定を行いますか？)

                               Yes   [ No ]</pre><p>もし <span class="guibutton">[ No ]</span> を選んだ場合には、さまざまなサービスは有効になりません。
	これらのサービスは、インストール後に <code class="filename">/etc/inetd.conf</code>
	をテキストエディタで編集することで有効になります。
	詳しくは inetd の章  を見てください。</p><p>これらのサービスを利用したいと考えているならば，
	<span class="guibutton">[ Yes ]</span> を選びインストールしてください。
	追加の確認事項が表示されるでしょう。</p><pre class="screen">                      User Confirmation Requested
The Internet Super Server (inetd) allows a number of simple Internet
services to be enabled, including finger, ftp and telnetd.  Enabling
these services may increase risk of security problems by increasing
the exposure of your system.

      (訳：inetd は finger，ftp，telnet を含む数多くのインターネットサービスを
      許可します。この機能を有効にするとシステムへのアクセスの増加による
      セキュリティ上のリスクが増加することがあります。)

With this in mind, do you wish to enable inetd?

                             [ Yes ]   No</pre><p><span class="guibutton">[ Yes ]</span> を選んで続けます。</p><pre class="screen">                      User Confirmation Requested
inetd(8) relies on its configuration file, /etc/inetd.conf, to determine
which of its Internet services will be available.  The default FreeBSD
inetd.conf(5) leaves all services disabled by default, so they must be
specifically enabled in the configuration file before they will
function, even once inetd(8) is enabled.  Note that services for
IPv6 must be separately enabled from IPv4 services.

Select [Yes] now to invoke an editor on /etc/inetd.conf, or [No] to
use the current settings.

      (訳：inetd(8) が利用可能にするインターネットサービスの種類については
	   設定ファイル (/etc/inetd.conf) に依存します。FreeBSD に付属する
	   inetd.conf(5) の初期設定は、すべてのサービスが無効になっています。
	   従って、inetd(8) を一度有効にした後に設定ファイルの中で
	   必要なサービスを有効にする必要があります。なお、IPv4 サービス側から
	   IPv6 のサービスを個別に設定する必要があることに注意してください。

	   [Yes] を選ぶと /etc/inetd.conf をエディタで編集できます。
	   [No] を選ぶと、現在の設定をつかいます。)

                             [ Yes ]   No</pre><p><span class="guibutton">[ Yes ]</span> を選ぶと、
	対応するサービスの先頭行にある
	<code class="literal">#</code> を削除することで、サービスを有効にできます。</p><div class="figure"><a id="inetd-edit"></a><div class="figure-title">図3.30 <code class="filename">inetd.conf</code> の編集</div><div class="figure-contents"><div class="mediaobject"><img src="install/edit-inetd-conf.png" alt="inetd.conf の編集" /></div></div></div><br class="figure-break" /><p>変更が終わったら、<span class="keycap"><strong>Esc</strong></span> を押し、
	表示されるメニューでエディタを終了し、変更点を保存してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ssh-login"></a>3.10.4. SSH ログインを有効にする</h3></div></div></div><a id="idp79698128" class="indexterm"></a><pre class="screen">                      User Confirmation Requested
                  Would you like to enable SSH login?
                           Yes        [  No  ]</pre><p><span class="guibutton">[ Yes ]</span> を選択すると、<span class="application">OpenSSH</span>
	のデーモンである <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a> が有効になります。
	これは、コンピュータへの安全なリモートアクセスを許可します。
	<span class="application">OpenSSH</span> のより詳しい情報については、
	<a class="xref" href="#openssh" title="15.10. OpenSSH">「OpenSSH」</a> をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ftpanon"></a>3.10.5. Anonymous FTP</h3></div></div></div><a id="idp79703248" class="indexterm"></a><pre class="screen">                      User Confirmation Requested
 Do you want to have anonymous FTP access to this machine?

                              Yes    [ No ]</pre><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="deny-anon"></a>3.10.5.1. Anonymous FTP を許可しない</h4></div></div></div><p>デフォルトの <span class="guibutton">[ No ]</span> を選択して
	  <span class="keycap"><strong>Enter</strong></span> を押してください。
	  アカウントを持ったユーザは、パスワードを使い FTP
	  でコンピュータにアクセスできます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ftpallow"></a>3.10.5.2. Anonymous FTP を許可する</h4></div></div></div><p>anonymous FTP の接続を許可すると、
	  誰でもコンピュータにアクセスできるようになります。
	  このオプションを有効にする前に、
	  セキュリティ上の問題点を検討してください。
	  セキュリティに関する詳細については、
	  <a class="xref" href="#security" title="第15章 セキュリティ">15章<em>セキュリティ</em></a> をご覧ください。</p><p>anonymous FTP を有効にするには、矢印キーを使って
	  <span class="guibutton">[ Yes ]</span> を選択し、<span class="keycap"><strong>Enter</strong></span>
	  を押してください。以下のような確認事項が表示されるでしょう。</p><pre class="screen">                       User Confirmation Requested
 Anonymous FTP permits un-authenticated users to connect to the system
 FTP server, if FTP service is enabled.  Anonymous users are
 restricted to a specific subset of the file system, and the default
 configuration provides a drop-box incoming directory to which uploads
 are permitted.  You must separately enable both inetd(8), and enable
 ftpd(8) in inetd.conf(5) for FTP services to be available.  If you
 did not do so earlier, you will have the opportunity to enable inetd(8)
 again later.

 If you want the server to be read-only you should leave the upload
 directory option empty and add the -r command-line option to ftpd(8)
 in inetd.conf(5)

 Do you wish to continue configuring anonymous FTP?

                          [ Yes ]         No</pre><p>このメッセージは、anonymous FTP 接続を許可するのであれば、
	  <code class="filename">/etc/inetd.conf</code>
	  においても FTP サービスを有効にする必要があることを示しています。
	  <span class="guibutton">[ Yes ]</span> を選び <span class="keycap"><strong>Enter</strong></span> を押して先に進んでください。
	  以下の画面が表示されます。</p><div class="figure"><a id="anon-ftp2"></a><div class="figure-title">図3.31 Anonymous FTP のデフォルトの設定</div><div class="figure-contents"><div class="mediaobject"><img src="install/ftp-anon1.png" alt="Anonymous FTP のデフォルトの設定" /></div></div></div><br class="figure-break" /><p><span class="keycap"><strong>Tab</strong></span> を使って項目を選び、
	  適切な情報で埋めてください。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">UID</span></dt><dd><p>anonymous FTP ユーザに対して割り当てられるユーザ ID。
		アップロードされるすべてのファイルの所有者はこの ID となります。</p></dd><dt><span class="term">Group</span></dt><dd><p>anonymous FTP ユーザが所属するグループ</p></dd><dt><span class="term">Comment</span></dt><dd><p><code class="filename">/etc/passwd</code>
		内のユーザ情報を表す文字列</p></dd><dt><span class="term">FTP Root Directory</span></dt><dd><p>anonymous FTP で利用可能なファイルの置き場</p></dd><dt><span class="term">Upload Subdirectory</span></dt><dd><p>anonymous FTP ユーザによりアップロードされるファイルが置かれる場所</p></dd></dl></div><p>デフォルトでは、FTP のルートディレクトリは <code class="filename">/var</code>
	  に設定されています。
	  FTP が必要とする十分な容量が用意されていない場合には、
	  かわりに FTP のルートディレクトリを
	  <code class="filename">/usr/ftp</code>
	  と設定し、
	  <code class="filename">/usr</code> を使ってください。</p><p>十分な設定ができたら、
	  <span class="keycap"><strong>Enter</strong></span> を押して先に進んでください。</p><pre class="screen">                          User Confirmation Requested
         Create a welcome message file for anonymous FTP users?

                              [ Yes ]    No</pre><p><span class="guibutton">[ Yes ]</span> を選択した場合には、
	  <span class="keycap"><strong>Enter</strong></span> を押すと、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a> エディタが自動的に起動します。</p><div class="figure"><a id="anon-ftp4"></a><div class="figure-title">図3.32 FTP Welcome メッセージの編集</div><div class="figure-contents"><div class="mediaobject"><img src="install/ftp-anon2.png" alt="FTP Welcome メッセージの編集" /></div></div></div><br class="figure-break" /><p>操作の説明に従ってメッセージを変更してください。
	  エディタの画面の下に表示されるファイルの名前、場所に注意してください。</p><p><span class="keycap"><strong>Esc</strong></span> を押すと、ポップアップメニューが表示されます。
	  デフォルトは <span class="guimenuitem">a) leave editor</span> です。
	  <span class="keycap"><strong>Enter</strong></span> を押して終了し、先に進んでください。
	  変更を行った場合には、もう一度 <span class="keycap"><strong>Enter</strong></span>
	  を押して、変更点を保存してください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="nfsconf"></a>3.10.6. ネットワークファイルシステムの設定</h3></div></div></div><p>ネットワークファイルシステム (<acronym class="acronym">NFS</acronym>) を用いると、
	ネットワークを介してファイルの共有を行うことができます。
	コンピュータをサーバ、クライアントまたは両方に設定できます。
	より詳しい情報については <a class="xref" href="#network-nfs" title="22.6. NFS">「NFS」</a>
	を参照してください。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="nsf-server-options"></a>3.10.6.1. NFS サーバ</h4></div></div></div><pre class="screen">                       User Confirmation Requested
 Do you want to configure this machine as an NFS server?

                              Yes    [ No ]</pre><p><acronym class="acronym">NFS</acronym> の機能を必要としないのであれば、
	  <span class="guibutton">[ No ]</span> を選択し
	  <span class="keycap"><strong>Enter</strong></span> を押してください。</p><p><span class="guibutton">[ Yes ]</span> を選んだ場合には、
	  <code class="filename">/etc/exports</code>
	  を作成する必要があることを示すメッセージが表示されます。</p><pre class="screen">                               Message
Operating as an NFS server means that you must first configure an
/etc/exports file to indicate which hosts are allowed certain kinds of
access to your local filesystems.
Press [Enter] now to invoke an editor on /etc/exports
                               [ OK ]</pre><p><span class="keycap"><strong>Enter</strong></span> を押して先に進んでください。
	  <code class="filename">/etc/exports</code>
	  を編集するためにテキストエディタが立ち上がります。</p><div class="figure"><a id="nfs-server-edit"></a><div class="figure-title">図3.33 <code class="filename">exports</code> ファイルの編集</div><div class="figure-contents"><div class="mediaobject"><img src="install/nfs-server-edit.png" alt="exports ファイルの編集" /></div></div></div><br class="figure-break" /><p>説明に従い、共有されるファイルシステムを追加してください。
	  エディタのスクリーンの下に表示されているファイル名の場所の情報に注意してください。</p><p><span class="keycap"><strong>Esc</strong></span> を押すとポップアップメニューが表示されます。
	  デフォルトは <span class="guimenuitem">a) leave editor</span> です。
	  <span class="keycap"><strong>Enter</strong></span> を押して終了し、先に進んでください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="nfs-client-options"></a>3.10.6.2. <acronym class="acronym">NFS</acronym> クライアント</h4></div></div></div><p>利用しているコンピュータが <acronym class="acronym">NFS</acronym>
	  クライアントによって
	  <acronym class="acronym">NFS</acronym> サーバにアクセスできるようになります。</p><pre class="screen">                       User Confirmation Requested
 Do you want to configure this machine as an NFS client?

                              Yes   [ No ]</pre><p>矢印キーを使って、適切に <span class="guibutton">[ Yes ]</span> または
	  <span class="guibutton">[ No ]</span> を選択してください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="console"></a>3.10.7. システムコンソールの設定</h3></div></div></div><p>システムコンソールをカスタマイズするオプションがあります。</p><pre class="screen">                      User Confirmation Requested
       Would you like to customize your system console settings?

                              [ Yes ]  No</pre><p><span class="guibutton">[ Yes ]</span> を選択し、<span class="keycap"><strong>Enter</strong></span>
	を押してオプションの確認および設定をしてください。</p><div class="figure"><a id="saver-options"></a><div class="figure-title">図3.34 システムコンソール設定オプション</div><div class="figure-contents"><div class="mediaobject"><img src="install/console-saver1.png" alt="システムコンソール設定オプション" /></div></div></div><br class="figure-break" /><p>良く使われるオプションはスクリーンセーバです。
	矢印キーを使って <span class="guimenuitem">Saver</span> を選択し、
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="saver-select"></a><div class="figure-title">図3.35 スクリーンセーバオプション</div><div class="figure-contents"><div class="mediaobject"><img src="install/console-saver2.png" alt="スクリーンセーバオプション" /></div></div></div><br class="figure-break" /><p>矢印キーを使って、お望みのスクリーンセーバを選択し、
	<span class="keycap"><strong>Enter</strong></span> を押してください。
	システムコンソールの設定メニューが再び表示されます。</p><p>デフォルトの時間の間隔は 300 秒です。
	時間の間隔を変更する場合には、
	もう一度 <span class="guimenuitem">Saver</span> を選択してください。
	スクリーンセーバのオプションメニューにて、
	矢印キーで <span class="guimenuitem">Timeout</span> を選択して
	<span class="keycap"><strong>Enter</strong></span> を押してください。
	ポップアップメニューが表示されます。</p><div class="figure"><a id="saver-timeout"></a><div class="figure-title">図3.36 スクリーンセーバのタイムアウト</div><div class="figure-contents"><div class="mediaobject"><img src="install/console-saver3.png" alt="スクリーンセーバのタイムアウト" /></div></div></div><br class="figure-break" /><p>値を変更したら <span class="guibutton">[ OK ]</span> を選択し、
	<span class="keycap"><strong>Enter</strong></span> を押して、
	システムコンソールの設定メニューに戻ってください。</p><div class="figure"><a id="saver-exit"></a><div class="figure-title">図3.37 システムコンソールの設定の終了</div><div class="figure-contents"><div class="mediaobject"><img src="install/console-saver4.png" alt="システムコンソールの設定の終了" /></div></div></div><br class="figure-break" /><p><span class="guimenuitem">Exit</span> を選択し、<span class="keycap"><strong>Enter</strong></span>
	を押して、インストール後の設定を続けてください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="timezone"></a>3.10.8. タイムゾーンの設定</h3></div></div></div><p>使用しているコンピュータのタイムゾーンを設定することで、
	地域による時刻の違いが自動的に調整され、
	タイムゾーンに関連した機能が適切に取り扱われます。</p><p>ここでの例では、コンピュータが United States の
	Eastern タイムゾーンにあるとしています。
	実際の地理的位置を選択してください。</p><pre class="screen">                      User Confirmation Requested
          Would you like to set this machine's time zone now?

                            [ Yes ]   No</pre><p><span class="guibutton">[ Yes ]</span> を選択し
	<span class="keycap"><strong>Enter</strong></span> を押して、タイムゾーンを設定してください。</p><pre class="screen">                       User Confirmation Requested
 Is this machine's CMOS clock set to UTC? If it is set to local time
 or you don't know, please choose NO here!

                              Yes   [ No ]</pre><p>コンピュータのクロックがどのように設定されているかに従って、
	<span class="guibutton">[ Yes ]</span> または <span class="guibutton">[ No ]</span>
	を選択し、<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="set-timezone-region"></a><div class="figure-title">図3.38 地域の選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/timezone1.png" alt="地域の選択" /></div></div></div><br class="figure-break" /><p>矢印キーを使って、適切な地域を選択し、
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="set-timezone-country"></a><div class="figure-title">図3.39 国名の選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/timezone2.png" alt="国名の選択" /></div></div></div><br class="figure-break" /><p>矢印キーを使って、適切に国名を選び、
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="set-timezone-locality"></a><div class="figure-title">図3.40 タイムゾーンの選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/timezone3.png" alt="タイムゾーンの選択" /></div></div></div><br class="figure-break" /><p>矢印キーを使って適切なタイムゾーンを選択し、
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><pre class="screen">                            Confirmation
            Does the abbreviation 'EDT' look reasonable?

                            [ Yes ]   No</pre><p>タイムゾーンの短縮形が適切かどうかを確認をしてください。
	問題なければ <span class="keycap"><strong>Enter</strong></span> を押して、インストール後の設定を続けてください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mouse"></a>3.10.9. マウスの設定</h3></div></div></div><p>このオプションを設定することで、
	コンソールやユーザプログラムにおいて
	3-ボタンマウスによるテキストのカットアンドペーストが可能になります。
	2-ボタンマウスを使っている場合には、
	3-ボタンのエミュレートについて <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">moused</span>(8)</span></a> を参照してください。
	ここでは、非 USB マウスの設定を例に説明します。</p><pre class="screen">                      User Confirmation Requested
         Does this system have a PS/2, serial, or bus mouse?

                            [ Yes ]    No </pre><p>PS/2、シリアルまたはバスマウスを使っている場合には
	<span class="guibutton">[ Yes ]</span> を選択してください。
	USB マウスを利用する場合には、<span class="guibutton">[ No ]</span> を選択し
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="mouse-protocol"></a><div class="figure-title">図3.41 マウスプロトコルのタイプの選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse1.png" alt="マウスプロトコルのタイプの選択" /></div></div></div><br class="figure-break" /><p>矢印キーで <span class="guimenuitem">Type</span> を選択し、
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="set-mouse-protocol"></a><div class="figure-title">図3.42 マウスプロトコルの選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse2.png" alt="マウスプロトコルの選択" /></div></div></div><br class="figure-break" /><p>この例では PS/2 マウスを使うので、デフォルトの
	<span class="guimenuitem">Auto</span> が適切です。
	マウスのプロトコルを変更するには、
	矢印キーを使って他のプロトコルを選択してください。
	<span class="guibutton">[ OK ]</span> がハイライトされていることを確認し、
	<span class="keycap"><strong>Enter</strong></span> を押してこのメニューを終了してください。</p><div class="figure"><a id="config-mouse-port"></a><div class="figure-title">図3.43 マウスポートの設定</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse3.png" alt="マウスポートの設定" /></div></div></div><br class="figure-break" /><p>矢印キーで <span class="guimenuitem">Port</span> を選択して
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="set-mouse-port"></a><div class="figure-title">図3.44 マウスポート の設定</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse4.png" alt="マウスポート の設定" /></div></div></div><br class="figure-break" /><p>このシステムでは PS/2 マウスを使っているので、デフォルトの
	<span class="guimenuitem">PS/2</span> が適切です。
	ポートを変更する場合には、矢印キーで選択して
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="test-daemon"></a><div class="figure-title">図3.45 マウスデーモンを有効にする。</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse5.png" alt="マウスデーモンを有効にする。" /></div></div></div><br class="figure-break" /><p>最後に、矢印キーで <span class="guimenuitem">Enable</span> を選択して
	<span class="keycap"><strong>Enter</strong></span> を押し、マウスデーモンを有効にして、
	テストしてください。</p><div class="figure"><a id="test-mouse-daemon"></a><div class="figure-title">図3.46 マウスデーモンのテスト</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse6.png" alt="マウスデーモンのテスト" /></div></div></div><br class="figure-break" /><p>スクリーン上でマウスを動かし、
	カーソルが正しく反応することを確認してください。
	確認ができたら、 <span class="guibutton">[ Yes ]</span> を選択して
	<span class="keycap"><strong>Enter</strong></span> を押してください。
	もし、うまく動かないのであれば、マウスの設定が適切に行われていません。
	― <span class="guibutton">[ No ]</span> を選択して、
	他の設定オプションを使って試してください。</p><p>矢印キーで <span class="guimenuitem">Exit</span> を選択し、
	<span class="keycap"><strong>Enter</strong></span> を押してインストール後の設定を続けてください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="packages"></a>3.10.10. Packages のインストール</h3></div></div></div><p>packages はコンパイル済みのバイナリで、
	ソフトウェアをインストールするのに便利な方法です。</p><p>説明では、例としてひとつの package をインストールしますが、
	お望みであれば、ここで複数の package を追加することもできます。
	インストール後は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> を使って
	package を追加できます。</p><pre class="screen">                     User Confirmation Requested
 The FreeBSD package collection is a collection of hundreds of
 ready-to-run applications, from text editors to games to WEB servers
 and more. Would you like to browse the collection now?

                            [ Yes ]   No</pre><p><span class="guibutton">[ Yes ]</span> を選択して、
	<span class="keycap"><strong>Enter</strong></span> を押してください。
	Package を選択する画面が表示されます。</p><div class="figure"><a id="package-category"></a><div class="figure-title">図3.47 Package カテゴリの選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/pkg-cat.png" alt="Package カテゴリの選択" /></div></div></div><br class="figure-break" /><p>現在のインストールメディアに存在する packages のみをインストールできます。</p><p><span class="guimenuitem">All</span> を選ぶと、
	利用可能なすべての package が表示されます。
	もしくは、特定のカテゴリを選択してください。
	矢印キーで選択したいカテゴリをハイライトし、
	<span class="keycap"><strong>Enter</strong></span> を押してください</p><p>選択したカテゴリで利用可能なすべての
	package のメニューが表示されます。</p><div class="figure"><a id="package-select"></a><div class="figure-title">図3.48 Packages の選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/pkg-sel.png" alt="Packages の選択" /></div></div></div><br class="figure-break" /><p>ここでは、<span class="application">bash</span> シェルが選択されています。
	希望する数だけ package を選択してハイライト表示にし、
	<span class="keycap"><strong>Space</strong></span> キーを押してください。
	それぞれの package の簡単な説明がスクリーン下の左端に表示されます。</p><p><span class="keycap"><strong>Tab</strong></span> キーを押すと、最後に選択した package
	と <span class="guibutton">[ OK ]</span>, <span class="guibutton">[ Cancel ]</span> で選択が切り替わります。</p><p>インストールする package の選択が終わったら、
	<span class="keycap"><strong>Tab</strong></span> を一度押して <span class="guibutton">[ OK ]</span> に切り替え、
	その後 <span class="keycap"><strong>Enter</strong></span> を押して
	Package 選択メニューに戻ってください。</p><p>左右の矢印キーでも、<span class="guibutton">[ OK ]</span> と <span class="guibutton">[ Cancel ]</span>
	切り替えることができます。
	この方法で <span class="guibutton">[ OK ]</span> を選択することもできますので、
	その後、<span class="keycap"><strong>Enter</strong></span> を押して
	Package 選択メニューに戻ってください。</p><div class="figure"><a id="package-install"></a><div class="figure-title">図3.49 Packages のインストール</div><div class="figure-contents"><div class="mediaobject"><img src="install/pkg-install.png" alt="Packages のインストール" /></div></div></div><br class="figure-break" /><p><span class="keycap"><strong>Tab</strong></span> と矢印キーで <span class="guibutton">[ Install ]</span>
	を選択し、<span class="keycap"><strong>Enter</strong></span> を押すと、
	インストールを確認するメニューが表示されます。</p><div class="figure"><a id="package-install-confirm"></a><div class="figure-title">図3.50 Package のインストールの確認</div><div class="figure-contents"><div class="mediaobject"><img src="install/pkg-confirm.png" alt="Package のインストールの確認" /></div></div></div><br class="figure-break" /><p><span class="guibutton">[ OK ]</span> を選択し、<span class="keycap"><strong>Enter</strong></span> を押すと
	package のインストールが始まります。
	インストールが終わるまで、インストールのメッセージが表示されます。
	エラーメッセージが表示されないかどうか注意してください。</p><p>packages をインストールしたら、最後の設定に進みます。
	package を選択しなかった場合も、
	<span class="guibutton">Install</span> を選択して、
	最後の設定に戻ってください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="addusers"></a>3.10.11. ユーザ/グループの追加</h3></div></div></div><p>システムに <code class="systemitem">root</code> 以外でログインできるよう、
	インストール時には、少なくとも一人のユーザを追加してください。
	通常 root パーティッションの容量は小さいので、
	<code class="systemitem">root</code> 権限でアプリケーションを実行すると、
	すぐに消費してしまいます。</p><pre class="screen">                     User Confirmation Requested
 Would you like to add any initial user accounts to the system? Adding
 at least one account for yourself at this stage is suggested since
 working as the "root" user is dangerous (it is easy to do things which
 adversely affect the entire system).

                            [ Yes ]   No</pre><p><span class="guibutton">[ Yes ]</span> を選択し、
	<span class="keycap"><strong>Enter</strong></span> を押して、ユーザを追加してください。</p><div class="figure"><a id="add-user2"></a><div class="figure-title">図3.51 User の選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/adduser1.png" alt="User の選択" /></div></div></div><br class="figure-break" /><p>矢印キーで <span class="guimenuitem">User</span> を選択して、
	<span class="keycap"><strong>Enter</strong></span> を押してください。</p><div class="figure"><a id="add-user3"></a><div class="figure-title">図3.52 ユーザ情報の入力</div><div class="figure-contents"><div class="mediaobject"><img src="install/adduser2.png" alt="ユーザ情報の入力" /></div></div></div><br class="figure-break" /><p><span class="keycap"><strong>Tab</strong></span> で項目を選択すると、
	必要とされる情報の入力を助けるため、
	スクリーンの下に以下の説明が表示されます。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Login ID</span></dt><dd><p>新しいユーザのログインネーム (必須)</p></dd><dt><span class="term">UID</span></dt><dd><p>新しいユーザの ID 番号
	      (空欄のままにすると、自動的に割り当てられます)</p></dd><dt><span class="term">Group</span></dt><dd><p>新しいユーザのログイングループ</p></dd><dt><span class="term">Password</span></dt><dd><p>このユーザのパスワード
	      (このフィールドは注意して入力してください!)</p></dd><dt><span class="term">Full name</span></dt><dd><p>ユーザのフルネーム (コメント)</p></dd><dt><span class="term">Member groups</span></dt><dd><p>このユーザの所属するグループについて
	      (すなわち、どのようなアクセス権を持つか)</p></dd><dt><span class="term">Home directory</span></dt><dd><p>ユーザのホームディレクトリ
	      (空欄にするとデフォルトで設定されます)</p></dd><dt><span class="term">Login shell</span></dt><dd><p>ユーザのログインシェル
	      (空欄にするとデフォルトの <code class="filename">/bin/sh</code>
	      に設定されます)。</p></dd></dl></div><p>この例では、ログインシェルは
	<code class="filename">/bin/sh</code> から、
	先ほど package でインストールした <span class="application">bash</span>
	を使うよう、<code class="filename">/usr/local/bin/bash</code>
	に変更されています。
	インストールされていないシェルを選ぶと、
	ユーザはログインできなくなりますので、
	インストールされていないシェルは選ばないでください。
	FreeBSD で最も標準的なシェルは C シェルです。
	<code class="filename">/bin/tcsh</code> で指定できます。</p><p>ユーザは、<code class="systemitem">root</code>
	権限を持つスーパユーザになることができる
	<code class="systemitem">wheel</code> グループにも追加されています。</p><p>十分に記述したら、<span class="guibutton">[ OK ]</span> を押して、
	User および Group 管理メニューを再び表示してください。</p><div class="figure"><a id="add-user4"></a><div class="figure-title">図3.53 ユーザおよびグループの管理を終了する</div><div class="figure-contents"><div class="mediaobject"><img src="install/adduser3.png" alt="ユーザおよびグループの管理を終了する" /></div></div></div><br class="figure-break" /><p>ここでグループを追加することもできます。
	または、後で
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> を利用してアクセスできます。</p><p>ユーザを追加したら、矢印キーで、
	<span class="guimenuitem">Exit</span> を選択して、
	<span class="keycap"><strong>Enter</strong></span> を押して、次のインストール項目に進んでください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rootpass"></a>3.10.12. <code class="systemitem">root</code>
	パスワードの設定</h3></div></div></div><pre class="screen">                        Message
 Now you must set the system manager's password.
 This is the password you'll use to log in as "root".

                         [ OK ]

               [ Press enter or space ]</pre><p><span class="keycap"><strong>Enter</strong></span> を押して、
	<code class="systemitem">root</code> パスワードを設定してください。</p><p>パスワードは、正しく 2 回入力してください。
	パスワードは忘れないでください。
	パスワードとして入力した文字は表示されませんし、
	アスタリスクが表示されることもありません。</p><pre class="screen">New password:
Retype new password :</pre><p>パスワードの入力に成功したら、インストールは次に進みます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="exit-inst"></a>3.10.13. インストールの終了</h3></div></div></div><p>以下のようなメッセージが表示され、
        設定が終わったかどうかを尋ねられます。</p><pre class="screen">                     User Confirmation Requested
 Visit the general configuration menu for a chance to set any last
 options?

                              Yes   [ No ]</pre><p><span class="guibutton">[ No ]</span> を選択し、
	<span class="keycap"><strong>Enter</strong></span>
	を押すことでメインインストールメニューに戻ります。</p><div class="figure"><a id="final-main"></a><div class="figure-title">図3.54 インストールの終了</div><div class="figure-contents"><div class="mediaobject"><img src="install/mainexit.png" alt="インストールの終了" /></div></div></div><br class="figure-break" /><p>方向キーで <span class="guibutton">[X Exit Install]</span>
	を選択し、<span class="keycap"><strong>Enter</strong></span>を押します。
	インストーラがインストールを終了してもよいか確認を求めます。</p><pre class="screen">                     User Confirmation Requested
 Are you sure you wish to exit? The system will reboot.

                            [ Yes ]   No</pre><p><span class="guibutton">[ Yes ]</span> を選択してください。
	CDROM ドライブから起動しているのなら、
	ディスクを取り出すこと示す以下のメッセージが表示されます。</p><pre class="screen">                    Message
 Be sure to remove the media from the drive.

                    [ OK ]
           [ Press enter or space ]</pre><p>マシンが再起動し始めると CDROM ドライブはロックされるので、
	ドライブから素早くディスクを取り出してください。
	<span class="guibutton">[ OK ]</span> を押して再起動してください。</p><p>システムは再起動するので、
	表示されるかもしれないすべてのエラーメッセージに注意してください。
	詳細については、<a class="xref" href="#freebsdboot" title="3.10.15. FreeBSD のブート">「FreeBSD のブート」</a> をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-services"></a>3.10.14. ネットワークサービスの設定</h3></div><div><span class="authorgroup">寄稿:
	    <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span> <span class="firstname">Tom</span> [FAMILY Given]</span>. </span></div></div></div><p>ネットワークサービスの設定は、新しいユーザにとって、
	この領域について基本的な知識を持たないと気が遠くなるような作業となるでしょう。
	インターネットを含むネットワークは、
	現代のすべてのオペレーティングシステムにとって重要なので、FreeBSD
	の広範囲にわたるネットワークの能力を理解することは有益でしょう。</p><p>ネットワークサービスは、
	ネットワーク上のどこからでもアクセスを許可するプログラムです。
	時間が経過するとネットワークサービスのバグが攻撃者により発見されるので、
	必要なネットワークサービスのみを有効にすることは重要です。
	もし、あるネットワークサービスが必要かどうか疑わしい場合には、
	それが必要となるまでは、
	そのネットワークサービスを有効にしないでください。
	後で <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> を実行するか、
	<code class="filename">/etc/rc.conf</code>
	ファイルを編集することで機能を有効にできます。</p><p><span class="guimenu">Networking</span> オプションを選択すると、
	以下のようなメニューが表示されます。</p><div class="figure"><a id="network-configuration"></a><div class="figure-title">図3.55 ネットワーク設定 (メニューの前半)</div><div class="figure-contents"><div class="mediaobject"><img src="install/net-config-menu1.png" alt="ネットワーク設定 (メニューの前半)" /></div></div></div><br class="figure-break" /><p>最初のオプションである
	 <span class="guimenuitem">Interfaces</span> については、
	<a class="xref" href="#inst-network-dev" title="3.10.1. ネットワークデバイスの設定">「ネットワークデバイスの設定」</a> で説明されています。</p><p><span class="guimenuitem">AMD</span> オプションを選択すると
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a> に対応します。
	このオプションは、通常
	<acronym class="acronym">NFS</acronym> プロトコルともに、
	リモートファイルシステムの自動マウントのために使われます。</p><p>次は <span class="guimenuitem">AMD Flags</span> オプションです。
	選択すると <acronym class="acronym">AMD</acronym>
	フラグを入力するためのメニューが表示されます。
	メニューには以下のようなデフォルトのオプションのセットが含まれています。</p><pre class="screen">-a /.amd_mnt -l syslog /host /etc/amd.map /net /etc/amd.map</pre><p><code class="option">-a</code>
	は、デフォルトのマウント位置を指定します。
	ここでは <code class="filename">/.amd_mnt</code> を指定しています。
	<code class="option">-l</code> は、
	デフォルトの <code class="filename">log</code> を指定します。
	ただし、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> が指定されていると、
	すべてのログはシステムログのデーモンに送られます。
	<code class="filename">/host</code> は、
	リモートホストからエクスポートされたシステムのマウントに使われます。
	一方 <code class="filename">/net</code>
	は、<acronym class="acronym">IP</acronym>
	アドレスからエクスポートされたファイルシステムのマウントに使われます。
	<code class="filename">/etc/amd.map</code> は、
	<acronym class="acronym">AMD</acronym> エクスポートのデフォルトオプションを定義します。</p><a id="idp79984848" class="indexterm"></a><p><span class="guimenuitem">Anon FTP</span> は、anonymous
	<acronym class="acronym">FTP</acronym> 接続を許可します。
	使用しているコンピュータを <acronym class="acronym">FTP</acronym>
	サーバとして利用する場合には、
	このオプションを選択してください。
	このオプションを選択した際のセキュリティ上のリスクについて把握しておいてください。
	セキュリティリスクの説明、および、詳細の設定のためのメニューが表示されます。</p><p><span class="guimenuitem">Gateway</span> メニューでは、
	コンピュータをゲートウェイに設定します。
	もし、インストールの過程で <span class="guimenuitem">Gateway</span>
	オプションを間違って選択したのであれば、ここで無効にできます。</p><p><span class="guimenuitem">Inetd</span> オプションを使うと、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> を設定したり、完全に無効にできます。</p><p><span class="guimenuitem">Mail</span> オプションでは、システムのデフォルトの
	Mail Transfer Agent (<acronym class="acronym">MTA</acronym>) を設定できます。
	このオプションを選択すると、以下のメニューが起動します。</p><div class="figure"><a id="mta-selection"></a><div class="figure-title">図3.56 デフォルトの MTA の選択</div><div class="figure-contents"><div class="mediaobject"><img src="install/mta-main.png" alt="デフォルトの MTA の選択" /></div></div></div><br class="figure-break" /><p>このメニューでは、インストールしてデフォルトに設定する
	<acronym class="acronym">MTA</acronym> を選択できます。
	<acronym class="acronym">MTA</acronym> は、
	システム上またはインターネット上のユーザにメールを配送するメールサーバです。</p><p><span class="guimenuitem">Sendmail</span> を選択すると、
	デフォルトの <acronym class="acronym">MTA</acronym> として
	<span class="application">sendmail</span> がインストールされます。
	<span class="guimenuitem">Sendmail local</span> を選択すると、
	<span class="application">sendmail</span> をデフォルトの
	<acronym class="acronym">MTA</acronym> に設定しますが、
	インターネットからの電子メールの受け取りを無効にします。
	他のオプションである
	<span class="guimenuitem">Postfix</span> や
	<span class="guimenuitem">Exim</span> も、
	<span class="guimenuitem">Sendmail</span> と同じようにメールを配送します。</p><p><acronym class="acronym">MTA</acronym> メニューの次のメニューは
	<span class="guimenuitem">NFS client</span> です。
	このメニューは、システムが <acronym class="acronym">NFS</acronym>
	サーバと通信するように設定します。
	<acronym class="acronym">NFS</acronym> では、<acronym class="acronym">NFS</acronym>
	プロトコルを通じて、他のコンピュータのファイルシステムを利用できるようになります。
	クライアントやサーバの設定についての詳細は
	<a class="xref" href="#network-nfs" title="22.6. NFS">「NFS」</a> をご覧ください</p><p>その下のオプションが <span class="guimenuitem">NFS server</span>
	オプションです。
	システムを <acronym class="acronym">NFS</acronym> サーバに設定します。
	このオプションは、Remote Procedure Call <acronym class="acronym">RPC</acronym>
	サービスに必要なオプションを追加します。
	<acronym class="acronym">RPC</acronym> は、
	ホストとプログラム間の接続の調整に利用できます</p><p>次の行は <span class="guimenuitem">Ntpdate</span> オプションです。
	これは、時刻の同期を取り扱います。
	選択すると下のようなメニューが表示されます。</p><div class="figure"><a id="Ntpdate-config"></a><div class="figure-title">図3.57 Ntpdate の設定</div><div class="figure-contents"><div class="mediaobject"><img src="install/ntp-config.png" alt="Ntpdate の設定" /></div></div></div><br class="figure-break" /><p>このメニューでは、
	地理的に最も近いサーバを選択してください。
	遠い場所のサーバを選ぶと、
	ネットワークの応対時間が長くなる可能性があるので、
	最も近いサーバを選択することにより、
	より正確な時刻の同期ができるようになります。</p><p>次のオプションは、<acronym class="acronym">PCNFSD</acronym> の選択です。
	このオプションは、Ports Collection から
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pcnfsd/pkg-descr">net/pcnfsd</a> package をインストールします。
	Microsoft の <span class="trademark">MS-DOS</span>®
	オペレーティングシステムのような、自分自身では <acronym class="acronym">NFS</acronym>
	認証サービスを提供できないシステムに対し、<acronym class="acronym">NFS</acronym>
	認証サービスを提供する有効なユーティリティです。</p><p>ここで、他のオプションを見るために、
	少しスクロールダウンしてください。</p><div class="figure"><a id="Network-configuration-cont"></a><div class="figure-title">図3.58 ネットワーク設定 (メニューの後半)</div><div class="figure-contents"><div class="mediaobject"><img src="install/net-config-menu2.png" alt="ネットワーク設定 (メニューの後半)" /></div></div></div><br class="figure-break" /><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpcbind&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpcbind</span>(8)</span></a> は、<acronym class="acronym">NFS</acronym>
	サーバとクライアントの <acronym class="acronym">RPC</acronym> 通信を取り扱い、
	<acronym class="acronym">NFS</acronym> サーバが正しく機能するために必要です。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.statd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpc.statd</span>(8)</span></a> デーモンは、ステータスを監視し、
	報告されたステータスは、通常
	<code class="filename">/var/db/statd.status</code> に記録されます。
	次のオプションの <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.lockd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpc.lockd</span>(8)</span></a> は、
	ファイルロックサービスを提供します。
	この機能は通常 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.statd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpc.statd</span>(8)</span></a> と共に、
	どのホストがロックを必要としているか、
	どのくらいの頻度でリクエストするかをモニタするために利用されます。
	最後の二つのオプションは、デバッグ時に有用ですが、
	<acronym class="acronym">NFS</acronym>
	サーバおよびクライアントの動作時には必要ありません。</p><p>次のメニューの <span class="guimenuitem">Routed</span> は、
	ルーティングデーモンを設定します。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=routed&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">routed</span>(8)</span></a> は、ネットワークルーティングテーブルを管理し、
	マルチキャストルーターを理解し、
	そして、リクエストがあると、物理的に接続したホストに対し、
	ネットワークを通してルーティングテーブルを提供します。
	このユーティリティは、
	主にローカルネットワークのゲートウェイマシンで利用されます。
	選択すると、
	ユーティリティのデフォルトの場所を要求するメニューが表示されます。
	デフォルトの場所で良ければ、
	<span class="keycap"><strong>Enter</strong></span> キーを押してください。
	その後、別のメニューが表示され、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=routed&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">routed</span>(8)</span></a> に渡すフラグを要求します。
	画面にには、デフォルトのフラグの <code class="option">-q</code>
	が表示されます。</p><p>次のメニューは <span class="guimenuitem">Rwhod</span> オプションです。
	このオプションは、システムの初期化時に
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rwhod&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rwhod</span>(8)</span></a> を起動します。
	<code class="command">rwhod</code>
	ユーティリティは、定期的にシステムのメッセージをネットワークにブロードキャストし、
	<span class="quote">「<span class="quote">consumer</span>」</span> モードでは、
	システムのメッセージを収集します。
	詳細な情報は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ruptime&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ruptime</span>(1)</span></a> および
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rwho&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rwho</span>(1)</span></a> ページにあります。</p><p>リストの最後から 2 番目のオプションは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a> です。
	これは <span class="application">OpenSSH</span>
	のためのセキュアシェルサーバです。
	標準の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">telnetd</span>(8)</span></a> や <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ftpd</span>(8)</span></a>
	サーバではなく、このサーバが強く推奨されています。
	このサーバは、暗号化された通信を行い、
	あるホストと他のホストを安全に接続します。</p><p>最後のオプションが
	<span class="guimenuitem">TCP Extensions</span> オプションです。
	このオプションは、<acronym class="acronym">RFC</acronym> 1323 および
	<acronym class="acronym">RFC</acronym> 1644 で定義されます。
	多くのホストにおいて、このオプションはコネクションを高速にする一方で、
	いくつかのコネクションを破棄します。
	サーバに対して推奨はされませんが、
	スタンドアローンなコンピュータには有益でしょう。</p><p>ネットワークサービスの設定が終わったら、
	一番上の <span class="guimenuitem">X Exit</span>
	までスクロールアップして次の設定項目に進むか、
	<span class="guimenuitem">X Exit</span> を 2 回選択し、その後
	<span class="guibutton">[X Exit Install]</span> を選び、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> を終了してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdboot"></a>3.10.15. FreeBSD のブート</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdboot-i386"></a>3.10.15.1. FreeBSD/i386 の起動</h4></div></div></div><p>すべてがうまくいっていれば、画面上にメッセージがスクロールし、
	  ログインプロンプトが表示されます。
	  このメッセージを見るには、<span class="keycap"><strong>Scroll-Lock</strong></span>
	  を押し、<span class="keycap"><strong>PgUp</strong></span> および <span class="keycap"><strong>PgDn</strong></span>
	  キーを使ってください。
	  <span class="keycap"><strong>Scroll-Lock</strong></span>
	  をもう一度押すとプロンプトに戻ります。</p><p>バッファの容量制限により、
	  すべてのメッセージは表示されないかもしれませんが、
	  ログインの後に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a> で見ることができます。</p><p>インストールの際に設定したユーザ名とパスワードを用いてログインしてください。
	  必要な時を除き <code class="systemitem">root</code>
	  としてログインすることは避けてください。</p><p>典型的なブートメッセージ (バージョン情報は省略しています)</p><pre class="screen">Copyright (c) 1992-2002 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
        The Regents of the University of California. All rights reserved.

Timecounter "i8254"  frequency 1193182 Hz
CPU: AMD-K6(tm) 3D processor (300.68-MHz 586-class CPU)
  Origin = "AuthenticAMD"  Id = 0x580  Stepping = 0
  Features=0x8001bf&lt;FPU,VME,DE,PSE,TSC,MSR,MCE,CX8,MMX&gt;
  AMD Features=0x80000800&lt;SYSCALL,3DNow!&gt;
real memory  = 268435456 (262144K bytes)
config&gt; di sn0
config&gt; di lnc0
config&gt; di le0
config&gt; di ie0
config&gt; di fe0
config&gt; di cs0
config&gt; di bt0
config&gt; di aic0
config&gt; di aha0
config&gt; di adv0
config&gt; q
avail memory = 256311296 (250304K bytes)
Preloaded elf kernel "kernel" at 0xc0491000.
Preloaded userconfig_script "/boot/kernel.conf" at 0xc049109c.
md0: Malloc disk
Using $PIR table, 4 entries at 0xc00fde60
npx0: &lt;math processor&gt; on motherboard
npx0: INT 16 interface
pcib0: &lt;Host to PCI bridge&gt; on motherboard
pci0: &lt;PCI bus&gt; on pcib0
pcib1: &lt;VIA 82C598MVP (Apollo MVP3) PCI-PCI (AGP) bridge&gt; at device 1.0 on pci0
pci1: &lt;PCI bus&gt; on pcib1
pci1: &lt;Matrox MGA G200 AGP graphics accelerator&gt; at 0.0 irq 11
isab0: &lt;VIA 82C586 PCI-ISA bridge&gt; at device 7.0 on pci0
isa0: &lt;ISA bus&gt; on isab0
atapci0: &lt;VIA 82C586 ATA33 controller&gt; port 0xe000-0xe00f at device 7.1 on pci0
ata0: at 0x1f0 irq 14 on atapci0
ata1: at 0x170 irq 15 on atapci0
uhci0: &lt;VIA 83C572 USB controller&gt; port 0xe400-0xe41f irq 10 at device 7.2 on pci0
usb0: &lt;VIA 83C572 USB controller&gt; on uhci0
usb0: USB revision 1.0
uhub0: VIA UHCI root hub, class 9/0, rev 1.00/1.00, addr 1
uhub0: 2 ports with 2 removable, self powered
chip1: &lt;VIA 82C586B ACPI interface&gt; at device 7.3 on pci0
ed0: &lt;NE2000 PCI Ethernet (RealTek 8029)&gt; port 0xe800-0xe81f irq 9 at
device 10.0 on pci0
ed0: address 52:54:05:de:73:1b, type NE2000 (16 bit)
isa0: too many dependant configs (8)
isa0: unexpected small tag 14
fdc0: &lt;NEC 72065B or clone&gt; at port 0x3f0-0x3f5,0x3f7 irq 6 drq 2 on isa0
fdc0: FIFO enabled, 8 bytes threshold
fd0: &lt;1440-KB 3.5" drive&gt; on fdc0 drive 0
atkbdc0: &lt;keyboard controller (i8042)&gt; at port 0x60-0x64 on isa0
atkbd0: &lt;AT Keyboard&gt; flags 0x1 irq 1 on atkbdc0
kbd0 at atkbd0
psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: model Generic PS/2 mouse, device ID 0
vga0: &lt;Generic ISA VGA&gt; at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
sc0: &lt;System console&gt; at flags 0x1 on isa0
sc0: VGA &lt;16 virtual consoles, flags=0x300&gt;
sio0 at port 0x3f8-0x3ff irq 4 flags 0x10 on isa0
sio0: type 16550A
sio1 at port 0x2f8-0x2ff irq 3 on isa0
sio1: type 16550A
ppc0: &lt;Parallel port&gt; at port 0x378-0x37f irq 7 on isa0
ppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/15 bytes threshold
ppbus0: IEEE1284 device found /NIBBLE
Probing for PnP devices on ppbus0:
plip0: &lt;PLIP network interface&gt; on ppbus0
lpt0: &lt;Printer&gt; on ppbus0
lpt0: Interrupt-driven port
ppi0: &lt;Parallel I/O&gt; on ppbus0
ad0: 8063MB &lt;IBM-DHEA-38451&gt; [16383/16/63] at ata0-master using UDMA33
ad2: 8063MB &lt;IBM-DHEA-38451&gt; [16383/16/63] at ata1-master using UDMA33
acd0: CDROM &lt;DELTA OTC-H101/ST3 F/W by OIPD&gt; at ata0-slave using PIO4
Mounting root from ufs:/dev/ad0s1a
swapon: adding /dev/ad0s1b as swap device
Automatic boot in progress...
/dev/ad0s1a: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1a: clean, 48752 free (552 frags, 6025 blocks, 0.9% fragmentation)
/dev/ad0s1f: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1f: clean, 128997 free (21 frags, 16122 blocks, 0.0% fragmentation)
/dev/ad0s1g: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1g: clean, 3036299 free (43175 frags, 374073 blocks, 1.3% fragmentation)
/dev/ad0s1e: filesystem CLEAN; SKIPPING CHECKS
/dev/ad0s1e: clean, 128193 free (17 frags, 16022 blocks, 0.0% fragmentation)
Doing initial network setup: hostname.
ed0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
        inet6 fe80::5054::5ff::fede:731b%ed0 prefixlen 64 tentative scopeid 0x1
        ether 52:54:05:de:73:1b
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; mtu 16384
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x8
        inet6 ::1 prefixlen 128
        inet 127.0.0.1 netmask 0xff000000
Additional routing options: IP gateway=YES TCP keepalive=YES
routing daemons:.
additional daemons: syslogd.
Doing additional network setup:.
Starting final network daemons: creating ssh RSA host key
Generating public/private rsa1 key pair.
Your identification has been saved in /etc/ssh/ssh_host_key.
Your public key has been saved in /etc/ssh/ssh_host_key.pub.
The key fingerprint is:
cd:76:89:16:69:0e:d0:6e:f8:66:d0:07:26:3c:7e:2d root@k6-2.example.com
 creating ssh DSA host key
Generating public/private dsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_dsa_key.
Your public key has been saved in /etc/ssh/ssh_host_dsa_key.pub.
The key fingerprint is:
f9:a1:a9:47:c4:ad:f9:8d:52:b8:b8:ff:8c:ad:2d:e6 root@k6-2.example.com.
setting ELF ldconfig path: /usr/lib /usr/lib/compat /usr/X11R6/lib
/usr/local/lib
a.out ldconfig path: /usr/lib/aout /usr/lib/compat/aout /usr/X11R6/lib/aout
starting standard daemons: inetd cron sshd usbd sendmail.
Initial rc.i386 initialization:.
rc.i386 configuring syscons: blank_time screensaver moused.
Additional ABI support: linux.
Local package initialization:.
Additional TCP options:.

FreeBSD/i386 (k6-2.example.com) (ttyv0)

login: rpratt
Password:</pre><p>低速なマシンでは、
	  RSA および DSA キーを作成するのに少々時間がかかるかもしれません。
	  これは初めてインストールした後に初めてブートする時だけ起こります。
	  その後のブートはより速くなるでしょう。</p><p><span class="application">Xorg</span> が設定され、
	  デフォルトデスクトップが選択されていた場合、
	  コマンドラインで <code class="command">startx</code>
	  と入力することで <span class="application">Xorg</span>
	  を起動することが可能です。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="shutdown"></a>3.10.16. FreeBSD のシャットダウン</h3></div></div></div><p>オペレーティングシステムを適切にシャットダウンすることは重要です。
	ただ電源を落すということはしないでください。
	まず、コマンドラインから <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> と入力し、
	<code class="systemitem">root</code>
	パスワードを入力してスーパユーザとなります。
	これは <code class="systemitem">wheel</code>
	のメンバとなっているユーザだけが行うことができます。
	そうでなければ <code class="systemitem">root</code> としてログインしてください。
	システムをシャットダウンするには、<code class="command">shutdown -h now</code>
	と入力してください。</p><pre class="screen">The operating system has halted.
Please press any key to reboot.</pre><p>シャットダウンコマンドが実行され、
	<span class="quote">「<span class="quote">Please press any key to reboot</span>」</span>
	というメッセージが現れた後に電源を落すことは安全です。
	電源を落す代わりに何らかのキーが押された場合、
	システムはリブートするでしょう。</p><p><span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Del</strong></span>
	というキーの組合せを使ってシステムをリブートすることもできます。
	しかしながら、推奨はされません。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-trouble"></a>3.11. トラブルシューティング</h2></div></div></div><a id="idp80075856" class="indexterm"></a><p>この節では、
      インストールの際に起こりえる共通の問題を解決するための情報が書いてあります。
      また、FreeBSD と <span class="trademark">Windows</span>®
      のデュアルブートを行う際のいくつかの質問と回答も書いてあります。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80086224"></a>3.11.1. なにかおかしいときには何をすればよいでしょうか</h3></div></div></div><p>PC アーキテクチャのさまざまな制限により、
	100% 確実にデバイスを認識することは不可能です。
	しかしながら、失敗した時にいくつかできることがあります。</p><p>インストールする FreeBSD のバージョンの <a class="link" href="http://www.FreeBSD.org/ja/releases/index.html" target="_top">ハードウェアノート</a>
	を調べて、
	使っているハードウェアに対応しているかどうかを確認してください。</p><p>もしハードウェアがサポートされているにもかかわらず、
	動作しなかったり他の問題点がある時は、<a class="link" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">カスタムカーネル</a>
	を構築して <code class="filename">GENERIC</code>
	カーネルに含まれていないデバイスのサポートを追加してください。
	デフォルトのカーネルでは、ほとんどのハードウェアデバイスの IRQ, IO アドレス、
	DMA チャネルが工場出荷時の状態であると仮定しています。
	もしハードウェアの設定が変更されているのであれば、
	カスタムカーネルのコンフィグレーションファイルを作成し、
	再コンパイルを行なって、
	FreeBSD が認識するよう設定してください。</p><p>存在しないデバイスを認識してしまうことにより、
	その後実際に存在するデバイスの認識を失敗してしまうことがあります。
	このような場合は衝突しているドライバを無効にします。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">いくつかのインストール上の問題は、各ハードウェア装置、
	  特にマザーボード <acronym class="acronym">BIOS</acronym>
	  のファームウェアのアップデートで回避または緩和することができます。
	  ほとんどのマザーボードまたはコンピュータ製造メーカーは、
	  アップグレード情報を載せているウェブサイトを用意しています。</p><p xmlns="http://www.w3.org/1999/xhtml">多くの製造メーカーは、
	  重要な更新のようなそれなりの理由がない限りマザーボードの
	  <acronym class="acronym">BIOS</acronym> のアップグレードは行わないよう強く推奨しています。
	  アップデートの過程で失敗する<span class="emphasis"><em>かもしれず</em></span>、
	  <acronym class="acronym">BIOS</acronym> チップに深刻なダメージを与える原因となり得るからです。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80092752"></a>3.11.2. <span class="trademark">Windows</span>® ファイルシステムの利用</h3></div></div></div><p>現時点では、FreeBSD は、
	<span class="application">Double Space™</span>
	アプリケーションで圧縮されたファイルシステムに対応していません。
	そのため、FreeBSD がデータにアクセスする前に、
	ファイルシステムを展開しておく必要があります。
	展開するには、
	<span class="guimenuitem">Start</span>&gt;
	<span class="guimenuitem">Programs</span> &gt;
	<span class="guimenuitem">System Tools</span> メニューの
	<span class="application">Compression Agent</span> を実行してください。</p><p>FreeBSD は、<span class="trademark">MS-DOS</span>® ファイルシステム
	(FAT ファイルシステムとも呼ばれます) に対応しています。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a> コマンドは、
	ファイルシステムの内容にアクセスできるように、
	ファイルシステムを現存のディレクトリ構成にマウントします。
	通常 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a> プログラムは、
	直接用いられることはありません。
	システムから <code class="filename">/etc/fstab</code> 経由で利用されたり、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> から適切なパラメータとともに用いられます。</p><p><code class="filename">/etc/fstab</code>
	の典型的な記述例は以下のようになります。</p><pre class="programlisting">/dev/ad0sN  /dos  msdosfs rw  0	0</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">この記述がうまくいくためには、
	  <code class="filename">/dos</code> が存在している必要があります。
	  <code class="filename">/etc/fstab</code> のフォーマットの詳細については、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> をご覧ください。</p></div><p>FAT ファイルシステムをマウントする <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
	の典型例は以下となります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t msdosfs /dev/ad0s1 /mnt</code></strong></pre><p>この例では、FAT ファイルシステムは、
	プライマリのハードディスクの最初のパーティションに配置されています。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a> や <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> の出力から、
	パーティションレイアウトを把握するのに十分な情報を得ることが出来ます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD が割り当てる FAT パーティションの番号は、
	  他のオペレーティングシステムのものとは異なることがあります。
	  特に拡張パーティションには、
	  プライマリパーティションより大きなスライス番号が通常割り当てられます。
	  どのスライスが FreeBSD に属し、
	  どのスライスが他のオペレーティングシステムに属するかを決めるのに
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> は役立ちます。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80117200"></a>3.11.3. トラブルシューティングに関する Q &amp; A</h3></div></div></div><div class="qandaset"><a id="idp80117840"></a><dl><dt>3.11.3.1. <a href="#idp80118096">起動時のハードウェア検出で、システムがハングアップします。
	      または、インストール中にシステムがおかしくなります。</a></dt><dt>3.11.3.2. <a href="#idp80122576">FreeBSD をインストールした後の最初のハードウェアからの起動で、
	      カーネルが読み込まれ、ハードウェアを検出しましたが、
	      次のようなメッセージを表示して停止しました。</a></dt><dt>3.11.3.3. <a href="#idp80136016">FreeBSD をインストールした後、ハードウェアから起動しましたが、
	      ブートマネージャは、ブートメニューで
	      F? を表示し、それ以上起動が進みません。</a></dt><dt>3.11.3.4. <a href="#idp80143312">システムが ed(4) ネットワークカードを検出しましたが、
	      デバイスのタイムアウトエラーが出ます。</a></dt><dt>3.11.3.5. <a href="#idp80149456">Xorg 端末から
	      sysinstall(8) を使うと、
	      ライトグレーの背景にフォントが黄色で表示され、読みずらいです。
	      このアプリケーションのコントラスト
	      
	      を高くすることはできますか?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp80118096"></a><a id="idp80118480"></a><p><strong>3.11.3.1.</strong></p></td><td align="left" valign="top"><p>起動時のハードウェア検出で、システムがハングアップします。
	      または、インストール中にシステムがおかしくなります。</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>i386, amd64 および ia64 プラットフォームにおいて、
	      FreeBSD はシステムの設定を手助けするシステム ACPI サービスを、
	      起動時に検出された場合に広く使います。
	      残念ながら、まだいくつかの不具合が、
	      ACPI ドライバとシステムのマザーボードに存在しています。
	      起動ステージ 3 において、ヒント情報
	      <code class="literal">hint.acpi.0.disabled</code>
	      を以下のように設定すると ACPI を無効にできます。</p><pre class="screen"><strong class="userinput"><code>set hint.acpi.0.disabled="1"</code></strong></pre><p>この設定はシステムが起動するたびにリセットされるので、
	      <code class="filename">/boot/loader.conf</code> に
	      <code class="literal">hint.acpi.0.disabled="1"</code>
	      を追加して、永続的に変更するようにしてください。
	      ブートローダのより詳しい情報については
	      <a class="xref" href="#boot-synopsis" title="13.1. この章では">「この章では」</a> で説明します。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp80122576"></a><a id="idp80122832"></a><p><strong>3.11.3.2.</strong></p></td><td align="left" valign="top"><p>FreeBSD をインストールした後の最初のハードウェアからの起動で、
	      カーネルが読み込まれ、ハードウェアを検出しましたが、
	      次のようなメッセージを表示して停止しました。</p><pre class="screen">changing root device to ad1s1a panic: cannot mount root</pre><p>何が問題ですか？</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>起動ディスクがシステムの最初のディスクではない場合には、
	      この問題が起こりえます。BIOS は、FreeBSD とは異なる番号付けを用い、
	      どの番号がどの番号に対応するかを正しく見つけ出すことは簡単ではありません。</p><p>この問題が起きた場合には、
	      BIOS ディスク番号、ディスクのタイプおよびそのディスクタイプに対する
	      FreeBSD ディスク番号を設定することで、
	      ルートファイルシステムがどこにあるかを FreeBSD に指定する必要があります。</p><p>システムのそれぞれ IDE バスのマスタに接続された
	      2 つの IDE ディスクがあり、2 番目のディスクから
	      FreeBSD を起動する場合を考えます。
	      BIOS は、これらのデバイスをディスク 0 および ディスク 1 と認識し、
	      一方 FreeBSD は、<code class="filename">ad0</code> および
	      <code class="filename">ad2</code> と認識します。</p><p>BIOS ディスク 1 に FreeBSD があり、
	      ディスクタイプが <code class="literal">ad</code> で、
	      FreeBSD ディスク番号が 2 の場合には、次のようになるでしょう。</p><pre class="screen"><strong class="userinput"><code>1:ad(2,a)kernel</code></strong></pre><p>プライマリバスにスレーブが接続されている場合には、
	      上記は必要なく、適切ではありません。</p><p>2 番目の状況は、システムに 1 つまたはそれ以上の
	      IDE ディスクがあるときに、SCSI ディスクから起動するような場合です。
	      このようなケースでは、FreeBSD ディスク番号は、
	      BIOS ディスク番号より小さな番号になります。
	      2 つの IDE ディスクと SCSI ディスクがある場合には、
	      SCSI ディスクは BIOS ディスク 2、
	      タイプ <code class="literal">da</code>、
	      FreeBSD ディスク番号が 0 となるため、
	      FreeBSD に BIOS ディスク 2 (システムの 1 番目の SCSI ディスク)
	      から起動するように設定するには以下のようになります。</p><pre class="screen"><strong class="userinput"><code>2:da(0,a)kernel</code></strong></pre><p>IDE ディスクが 1 つの場合には、
	      かわりに <code class="literal">1:</code> を指定してください。</p><p>使用する適切な値が決まったら、
	      テキストエディタを使って、コマンドを
	      <code class="filename">/boot.config</code> に記述してください。
	      他に指定がなければ、FreeBSD はこのファイルの内容を、
	      デフォルトの <code class="literal">boot:</code>
	      プロンプトへのレスポンスとして使います。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp80136016"></a><a id="idp80136272"></a><p><strong>3.11.3.3.</strong></p></td><td align="left" valign="top"><p>FreeBSD をインストールした後、ハードウェアから起動しましたが、
	      ブートマネージャは、ブートメニューで
	      <code class="literal">F?</code> を表示し、それ以上起動が進みません。</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> FreeBSD のインストール時に、
	      パーティションエディタで指定したハードウェアのディスクジオメトリが正しくありません。
	      パーティションエディタまで戻り、
	      ハードディスクの正しいジオメトリを指定してください。
	      ジオメトリを正しく設定する所から FreeBSD
	      を再インストールする必要があります。</p><p>FreeBSD 専用のシステムで、
	      他のオペレーティングシステムとの互換性が必要なければ、
	      インストーラのパーティションエディタで
	      <span class="guimenuitem">A</span>) を選択して、
	      ディスクのすべてを使ってください。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp80143312"></a><a id="idp80143568"></a><p><strong>3.11.3.4.</strong></p></td><td align="left" valign="top"><p>システムが <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ed</span>(4)</span></a> ネットワークカードを検出しましたが、
	      デバイスのタイムアウトエラーが出ます。</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>使用しているカードの IRQ が、
	      <code class="filename">/boot/device.hints</code>
	      で指定された IRQ と異なる可能性があります。
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ed</span>(4)</span></a> ドライバは、デフォルトでは <span class="quote">「<span class="quote">ソフトウェア</span>」</span>
	      コンフィグレーションを用いませんが、
	      インターフェースのヒント情報に <code class="literal">-1</code>
	      を指定した場合には、
	      ソフトウェアコンフィグレーションが用いられます。</p><p>カードのジャンパを変更してコンフィグレーションの設定を行うか、
	      <code class="literal">hint.ed.0.irq="-1"</code> と指定して IRQ に
	      <code class="literal">-1</code> を設定してください
	      このように設定すると、
	      カーネルがソフトウェアコンフィグレーションを利用します。</p><p>その他として、利用しているカードが IRQ 9 を使っている可能性があります。
	      この IRQ は IRQ 2 と共有され、
	      特に、IRQ 2 を使っている VGA カードを持っている場合には、
	      しばしば問題を引き起こします。
	      できるだけ IRQ 2 や 9 を避けるべきでしょう。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp80149456"></a><a id="idp80149712"></a><p><strong>3.11.3.5.</strong></p></td><td align="left" valign="top"><p><span class="application">Xorg</span> 端末から
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> を使うと、
	      ライトグレーの背景にフォントが黄色で表示され、読みずらいです。
	      このアプリケーションのコントラスト
	      <a id="idp80151376" class="indexterm"></a>
	      を高くすることはできますか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/xterm/pkg-descr">x11/xterm</a> や <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/rxvt/pkg-descr">x11/rxvt</a>
	      使用時における <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>
	      のデフォルトのカラーが読みにくい場合には、<code class="literal">XTerm*color7:
	      #c0c0c0</code> を <code class="filename">~/.Xdefaults</code>
	      に追加して、より暗いグレーの背景に変更してください。</p></td></tr></tbody></table></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-advanced"></a>3.12. 高度なインストールガイド</h2></div><div><span class="authorgroup">寄稿:
	  <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Vaschetto</span> <span class="firstname">Valentino</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">改訂:
	  <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Fonvieille</span> <span class="firstname">Marc</span> [FAMILY Given]</span>. </span></div></div></div><p>この節では特殊な状況での FreeBSD のインストール方法が記述してあります。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="headless-install"></a>3.12.1. FreeBSD をモニタやキーボードのないシステムにインストールする</h3></div></div></div><a id="idp80169936" class="indexterm"></a><a id="idp80171088" class="indexterm"></a><p>この形式のインストールは <span class="quote">「<span class="quote">表示のないインストール</span>」</span> と呼ばれます。
	なぜなら、FreeBSD をインストールしようとするマシンにモニタが接続されていないか、
	VGA 出力をもっていないからです。
	このようなシステムへのインストールはシリアルコンソールを使い、
	別のマシンをシステムの主ディスプレイやキーボードとして使うと可能になります。
	これを行うには、<a class="xref" href="#install-boot-media" title="3.3.7. ブートメディアの準備">「ブートメディアの準備」</a>
	の説明に従い、インストール用の USB メモリスティックを作成するか、
	<a class="xref" href="#install-cdrom" title="3.13.1. インストール ISO の作成">「インストール ISO の作成」</a> で説明されているインストール用の
	ISO イメージをダウンロードしてください。</p><p>以下の説明に従って、
	これらのメディアをシリアルコンソールを使って起動するように変更してください
	CD/DVD メディアを使うのであれば、最初の手順を飛ばしてください。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>インストール用 USB スティックのシリアルコンソールへの起動を有効にする</strong></p><a id="idp80174416" class="indexterm"></a><p>デフォルトでは、USB スティックで起動すると、
	    インストーラを起動します
	    シリアルコンソールを使って起動するには、
	    os; のシステムに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
	    コマンドを使って USB ディスクをマウントしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/<em class="replaceable"><code>da0a</code></em> <em class="replaceable"><code>/mnt</code></em></code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">デバイスノードおよびマウントポイントの部分は、
	      利用している環境に合わせてください。</p></div><p>スティックをマウントしたら、USB
	    スティックをシリアルコンソールを使って起動するように設定してください。
	    以下の行を USB スティックの
	    <code class="filename">/boot/loader.conf</code> に追加してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 'console="comconsole"' &gt;&gt; <em class="replaceable"><code>/mnt</code></em>/boot/loader.conf</code></strong></pre><p>USB スティックを正しく設定することができたら、
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a> を使ってディスクをアンマウントしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umount <em class="replaceable"><code>/mnt</code></em></code></strong></pre><p>その後 USB スティックを抜き、3 番目の手順に進んでください。</p></li><li class="step"><p class="title"><strong>インストール用 CD/DVD
	    のシリアルコンソールへの起動を有効にする</strong></p><a id="idp80205392" class="indexterm"></a><p>デフォルトでは、インストール用の CD/DVD
	    で起動すると、FreeBSD は通常のインストールモードで起動します。
	    シリアルコンソールで起動するには、
	    ISO イメージを CD/DVD メディアに焼く前に、
	    展開して、変更し、再び ISO イメージを作成する必要があります。</p><p>インストール用の ISO イメージが保存されている
	    FreeBSD システムで、以下のようにすべてのファイルを
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> を使って展開してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir <em class="replaceable"><code>/path/to/headless-iso</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>tar -C <em class="replaceable"><code>/path/to/headless-iso</code></em> -pxvf FreeBSD-<em class="replaceable"><code>10.1</code></em>-RELEASE-<em class="replaceable"><code>i386</code></em>-disc1.iso</code></strong></pre><p>次に、
	    インストールメディアをシリアルコンソールを使って起動するように設定します。
	    以下の行を展開した ISO イメージの
	    <code class="filename">/boot/loader.conf</code> に追加します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 'console="comconsole"' &gt;&gt; <em class="replaceable"><code>/path/to/headless-iso</code></em>/boot/loader.conf</code></strong></pre><p>その後、修正されたツリーを使って新しい ISO イメージを作成します。
	    この例では、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a> package
	    または port の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> を使っています。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkisofs -v -b boot/cdboot -no-emul-boot -r -J -V "<em class="replaceable"><code>Headless_install</code></em>" \
	    -o <em class="replaceable"><code>Headless-</code></em>FreeBSD-<em class="replaceable"><code>9.3</code></em>-RELEASE-<em class="replaceable"><code>i386</code></em>-disc1.iso<em class="replaceable"><code> /path/to/headless-iso</code></em></code></strong></pre><p>適切な ISO イメージを作成できたので、
	    お気に入りの CD ライタ用のアプリケーションを使って
	    CD/DVD に焼いてください。</p></li><li class="step"><p class="title"><strong>ヌルモデムケーブルの接続</strong></p><a id="idp77822928" class="indexterm"></a><p>2 つのマシン間のシリアルポートを、
	    
	    ヌルモデムケーブルで接続してください。
	    <span class="emphasis"><em>普通のシリアルケーブルはここでは使えません。</em></span>
	    ヌルモデムケーブルが必要です。</p></li><li class="step"><p class="title"><strong>インストールのために起動</strong></p><p>いよいよインストールを開始します。
	    USB メモリスティックまたは CD/DVD メディアを、画面のない、
	    インストールを行おうとしているマシンに挿入し、
	    電源を投入してください。</p></li><li class="step"><p class="title"><strong>画面がないマシンへの接続</strong></p><a id="idp77826640" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a> でインストールを行いたいマシンに接続してください:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cu -l /dev/cuau0</code></strong></pre></li></ol></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a> を通して画面がないマシンを操作することができます。
	カーネルを読み込み、
	その後どの種類の端末を使うか選択する画面が表示されます。
	FreeBSD カラーコンソールを選んでインストールを続行してください!</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-diff-media"></a>3.13. カスタムインストールメディアの準備</h2></div></div></div><p>ある状況では、カスタマイズした FreeBSD
      インストールメディアやソースを用意する必要があります。
      これは
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>
      がインストールファイルを持ってくることのできる、
      物理的なメディアであったり、ソースの場合もあります。
      たとえば、以下のような状況です。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>たくさんのマシンが繋がったローカルネットワークに
	  FreeBSD インストールファイルを持つローカル FTP サーバをホストし、
	  各マシンはインストールにこのサーバのファイルを使うようにします。</p></li><li class="listitem"><p>FreeBSD は CD/DVD ドライブを認識できないが、
	  <span class="trademark">Windows</span>® はそれができるとします。
	  この場合、同じコンピュータ上の <span class="trademark">Windows</span>® パーティションに FreeBSD
	  のインストールファイルをコピーして、FreeBSD
	  のインストールにこれらのファイルを使います。</p></li><li class="listitem"><p>インストールを行いたいコンピュータが CD/DVD
	  ドライブやネットワークカードを搭載してなくても、
	  ヌルプリンタケーブルを用いてそのコンピュータに接続できます。</p></li><li class="listitem"><p>磁気テープを FreeBSD のインストールに使えます。</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-cdrom"></a>3.13.1. インストール ISO の作成</h3></div></div></div><p>FreeBSD プロジェクトは、それぞれのリリースに対して
	<span class="quote">「<span class="quote">ISO イメージ</span>」</span>
	をサポートされているアーキテクチャごとに用意します。
	書き込み用のアプリケーションを用いてイメージを CD または DVD
	メディアに書き込む
	(<span class="quote">「<span class="quote">焼く</span>」</span>) ことができ、
	それを使って FreeBSD をインストールできます。
	CD/DVD ライタを利用できるのであれば、
	これが FreeBSD をインストールする最も簡単な方法です。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>適切な ISO イメージのダウンロード</strong></p><p>それぞれのリリースの ISO イメージは、
	    <code class="filename">ftp://ftp.FreeBSD.org/pub/FreeBSD/ISO-IMAGES-<em class="replaceable"><code>arch</code></em>/<em class="replaceable"><code>version</code></em></code>
	    もしくは近くのミラーからダウンロードできます。
	    ここで、<em class="replaceable"><code>arch</code></em> と
	    <em class="replaceable"><code>version</code></em> の部分は適切なものに置き換えてください。</p><p>通常、このディレクトリには以下のイメージが置いてあります。</p><div class="table"><a id="idp80379088"></a><div class="table-title">表3.4 FreeBSD
	      ISO イメージの名前と内容</div><div class="table-contents"><table summary="FreeBSD&#10;&#9;      ISO イメージの名前と内容" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>ファイル名</th><th>内容</th></tr></thead><tbody><tr><td><code class="filename">FreeBSD-<em class="replaceable"><code>version</code></em>-RELEASE-<em class="replaceable"><code>arch</code></em>-bootonly.iso</code></td><td>CD-ROM ドライブから起動することでインストールを行うことができる CD イメージです。
		    この CD のみを使って FreeBSD をインストールすることはできません。
		    この CD から起動した後は、
		    FTP サーバなどからネットワーク経由でインストール作業をします。</td></tr><tr><td><code class="filename">FreeBSD-<em class="replaceable"><code>version</code></em>-RELEASE-<em class="replaceable"><code>arch</code></em>-dvd1.iso.gz</code></td><td>この DVD イメージには、
		    FreeBSD オペレーティングシステムのベースシステム、
		    コンパイル済みの package 一式、
		    ドキュメントをインストールするために必要なものが入っています。
		    <span class="quote">「<span class="quote">livefs</span>」</span> ベースのレスキューモードで起動することも可能です。</td></tr><tr><td><code class="filename">FreeBSD-<em class="replaceable"><code>version</code></em>-RELEASE-<em class="replaceable"><code>arch</code></em>-memstick.img</code></td><td>USB メモリスティックに書き込めるイメージです。
		    USB ドライブから起動可能なコンピュータで、
		    インストールに使うことができます。
		    <span class="quote">「<span class="quote">livefs</span>」</span>
		    ベースのレスキューモードで起動することも可能です。
		    package は、ドキュメントに関連するもののみが入っています。</td></tr><tr><td><code class="filename">FreeBSD-<em class="replaceable"><code>version</code></em>-RELEASE-<em class="replaceable"><code>arch</code></em>-disc1.iso</code></td><td>USB メモリスティックに書き込めるイメージです。
		    USB ドライブから起動可能なコンピュータで、
		    インストールに使うことができます。
		    <code class="filename">bootonly.iso</code> イメージと同様に、
		    配布物は含まれていませんが、
		    (ftp などの)
		    ネットワーク経由でのインストールに対応しています。</td></tr><tr><td><code class="filename">FreeBSD-version-RELEASE-arch-disc1.iso</code></td><td>この CD イメージには、
		    FreeBSD オペレーティングシステムのベースシステムとドキュメントインストールするために必要なものが入っています。
		    その他の package は含まれていません。</td></tr><tr><td><code class="filename">FreeBSD-<em class="replaceable"><code>version</code></em>-RELEASE-<em class="replaceable"><code>arch</code></em>-disc2.iso</code></td><td>この CD イメージには、ディスクに収まる容量のサードパーティ製
		    package が含まれています。このイメージは、
		    FreeBSD 9.<em class="replaceable"><code>X</code></em>
		    以降では利用できません。</td></tr><tr><td><code class="filename">FreeBSD-<em class="replaceable"><code>version</code></em>-RELEASE-<em class="replaceable"><code>arch</code></em>-disc3.iso</code></td><td>ディスクに収まる容量のサードパーティ製
		    package を含むもう 1 つの CD イメージです。このイメージは、
		    FreeBSD 9.<em class="replaceable"><code>X</code></em>
		    以降では利用できません。</td></tr><tr><td><code class="filename">FreeBSD-<em class="replaceable"><code>version</code></em>-RELEASE-<em class="replaceable"><code>arch</code></em>-livefs.iso</code></td><td><span class="quote">「<span class="quote">livefs</span>」</span>
		    ベースのレスキューモードで起動できるイメージです。
		    この CD のみを使ってシステムをインストールすることはできません。</td></tr></tbody></table></div></div><br class="table-break" /><p>CD からインストールを行うには、
	    <code class="literal">bootonly</code> ISO イメージまたは
	    <code class="literal">disc1</code> のどちらかをダウンロードしてください。
	    <code class="literal">disc1</code> には、<code class="literal">bootonly</code>
	    ISO イメージに含まれているものはすべて含まれているので、
	    両方をダウンロードする必要はありません。</p><p>インターネット経由でネットワークからインストールを行うには、
	    <code class="literal">bootonly</code> ISO を使ってください。
	    追加のソフトェアが必要であれば、
	    <a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a> に説明されているように Ports Collection
	    を用いてインストールできます。</p><p>FreeBSD をインストールし、
	    サードパーティ製の package をディスク上から利用したいのであれば、
	    <code class="literal">dvd1</code> を使ってください。</p></li><li class="step"><p class="title"><strong>メディアへイメージを書き込む</strong></p><p>次に、ダウンロードしたイメージをディスクに書き込んでください。
	    他の FreeBSD システムで書き込みを行う場合には、
	    <a class="xref" href="#cdrecord" title="16.5.4. cdrecord">「cdrecord」</a> の手順を参考にしてください。</p><p>他のプラットフォーム上で書き込みを行う場合には、
	    そのシステムにインストールされている書き込み用のユーティリティを利用してください。
	    提供されているイメージは標準の ISO フォーマットです。多くの CD
	    ライタ用のアプリケーションがこのフォーマットに対応しています。</p></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">カスタマイズした FreeBSD
	のリリースを構築するには、<a class="link" href="../../../../doc/ja_JP.eucJP/articles/releng" target="_top">Release Engineering
	Article</a> をご覧ください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-ftp"></a>3.13.2. FreeBSD ディスクを使ったローカル FTP サイトの作成</h3></div></div></div><a id="idp80408528" class="indexterm"></a><p>FreeBSD のディスクは FTP サイトと同じ配置がなされています。
	そのため、ローカルな FTP
	サイトを構築して、ネットワーク上の他のマシンが FreeBSD
	をインストールするのに使うようにできます。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>FTP サイトのホストとなる FreeBSD のコンピュータに、
	    CD/DVD をドライブに入れ、マウントしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /cdrom</code></strong></pre></li><li class="step"><p>anonymous FTP のアカウントを作成してください。
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a> を使用して次の行を加えてください。</p><pre class="programlisting">ftp:*:99:99::0:0:FTP:/cdrom:/nonexistent</pre></li><li class="step"><p>FTP サービスを請け負うために
	    <code class="filename">/etc/inetd.conf</code> で有効にしてください。</p></li></ol></div><p>このマシンにネットワークで繋がっているマシンは、
	インストール時にメディアタイプで FTP を選択し、
	FTP サイトメニューで <span class="quote">「<span class="quote">Other</span>」</span> を選んだ後
	<strong class="userinput"><code>ftp://<em class="replaceable"><code>your
	  machine</code></em></code></strong>
	と打ち込むことができます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">もし FTP クライアントの起動メディアの
	  FreeBSD のバージョンが FTP サイトで提供されているバージョンと正確に同じでなければ、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> でのインストールはうまくいきません。
	  バージョンを書き換えるには、
	  <span class="guimenu">Options</span> メニューで distribution name を
	  <span class="guimenuitem">any</span> に変更してください。</p></div><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">この方法はローカルネットワーク上の、
	  ファイアウォールで保護されたマシンでは容認できますが、
	  インターネットを介して他のマシンに FTP サービスを提供することは、
	  セキュリティリスクが高まります。
	  インターネット経由でサービスを提供する場合には、
	  セキュリティの状態に注意することを強く提言します。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-msdos"></a>3.13.3. <span class="trademark">Windows</span>® パーティションからのインストール</h3></div></div></div><a id="idp80433872" class="indexterm"></a><p>ハードディスクの <span class="trademark">Windows</span>® パーティションからインストールするときには、
	配布ファイルを例えば <code class="filename">c:\freebsd</code>
	などそのパーティションのルートディレクトリにコピーします。
	ディレクトリ構造を反映してコピーしなければならないので、
	CD/DVD からコピーする場合には <code class="command">robocopy</code>
	の使用をおすすめします。
	例えば、最低限の FreeBSD のインストールを行うには、
	次のように準備します:</p><pre class="screen"><code class="prompt">C:\&gt;</code> <strong class="userinput"><code>md c:\freebsd</code></strong>
<code class="prompt">C:\&gt;</code> <strong class="userinput"><code>robocopy e:\bin c:\freebsd\bin\ /s</code></strong>
<code class="prompt">C:\&gt;</code> <strong class="userinput"><code>robocopy e:\manpages c:\freebsd\manpages\ /s</code></strong></pre><p>ここで <code class="filename">C:</code> ドライブには十分な空き容量があり、
	CD/DVD は <code class="filename">E:</code>
	ドライブにマウントされているものとします。</p><p>あるいは、<a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/9.3-RELEASE/" target="_top">ftp.FreeBSD.org</a>
	から配布ファイルをダウンロードしてください。
	それぞれの配布ファイルは独自のディレクトリに入っています。
	例えば、<span class="emphasis"><em>base</em></span> 配布ファイルは <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/9.3-RELEASE/base/" target="_top">9.3/base/</a>
	ディレクトリにあります。</p><p><span class="trademark">Windows</span>® パーティションの <code class="filename">c:\freebsd</code>
	にインストールの配布ファイルをコピーしてください。
	<code class="literal">base</code> および <code class="literal">kernel</code>
	配布ファイルは、最低限必要です。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80444624"></a>3.13.4. ネットワーク経由のインストールの前に</h3></div></div></div><a id="idp80445264" class="indexterm"></a><a id="idp80455120" class="indexterm"></a><a id="idp80456656" class="indexterm"></a><p>3 種類のネットワークインストールを行うことができます。
	イーサネット、PPP、そして、PLIP です。</p><p>最も高速なネットワークインストールを行うには、
	イーサネットアダプタを使ってください。
	FreeBSD はきわめて多くの PC イーサネットカードをサポートしています。
	サポートされているカードの一覧は、
	FreeBSD それぞれのリリースのハードウェアノートで提供されます。
	サポートされている PCMCIA イーサネットカードを使う場合、
	システムの電源を入れる<span class="emphasis"><em>前に</em></span>差し込んでおくことに注意してください。
	FreeBSD はインストール時の PCMCIA
	カードの活線挿抜には対応していません。</p><p>静的に設定する場合には、システムの IP アドレス、
	サブネットマスク、ホスト名、デフォルトゲートウェイアドレス、
	DNS サーバアドレスを知っておくことが必要です。
	HTTP プロキシ経由で FTP インストールを行いたい場合には、
	プロキシサーバのアドレスも必要となります。
	これらの情報を知らない場合には、
	イーサネット経由でのインストールを始める<span class="emphasis"><em>前に</em></span>、
	ネットワーク管理者か ISP に相談するべきでしょう。</p><p>もしダイアルアップモデムを使用しているなら、
	インストールプロセスの初期にサービスプロバイダの PPP
	の情報が必要となるので、この情報を手元に用意してください。</p><p>もし <acronym class="acronym">ISP</acronym> に接続するのに PAP や CHAP
	を用いていて、スクリプトを使用していないのであれば、
	<code class="command">dial</code> と FreeBSD の <span class="application">ppp</span>
	のプロンプトに対して入力してください。
	それ以外の場合、モデム固有の <span class="quote">「<span class="quote">AT コマンド</span>」</span>を使って
	<acronym class="acronym">ISP</acronym> にダイヤルする方法を知っておく必要があります。
	PPP ダイヤラはとてもシンプルな端末エミュレータしか提供していません。
	これ以上の情報については <a class="xref" href="#userppp" title="20.2. ユーザ ppp の利用">「ユーザ ppp の利用」</a> や <code class="uri"><a class="uri" href="../../../../doc/ja_JP.eucJP/books/faq/ppp.html" target="_top">../../../../doc/ja_JP.eucJP/books/faq/ppp.html</a></code>
	を参照してください。
	<code class="command">set log local ...</code>
	コマンドを用いてログを画面に吐くこともできます。</p><p>FreeBSD の動いている別のマシンと直接接続が可能でしたら、
	ヌルモデムパラレルポートケーブルを介してインストールすることもできます。
	パラレルポート経由のデータ転送スピードは、
	シリアルラインでの一般的なスピードよりも高速です。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80464592"></a>3.13.4.1. <acronym class="acronym">NFS</acronym> 経由のインストールの前に</h4></div></div></div><a id="idp80465488" class="indexterm"></a><p><acronym class="acronym">NFS</acronym> インストールはまったく単純明快です。
	  FreeBSD の配布ファイルを <acronym class="acronym">NFS</acronym>
	  サーバの好きな場所にコピーしておいて、
	  インストーラのメディア選択で <acronym class="acronym">NFS</acronym>
	  を選択してください。</p><p>もしサーバが<span class="quote">「<span class="quote">特権ポート</span>」</span>へのアクセスのみをサポートしている場合、
	  インストールを進める前に <span class="guimenu">Options</span> メニューで
	  <code class="literal">NFS Secure</code> を選択してください。</p><p>イーサネットカードの性能が悪く、
	  転送速度が遅くて困っている場合には、
	  <code class="literal">NFS Slow</code> フラグを選択するといいでしょう。</p><p><acronym class="acronym">NFS</acronym> 経由でインストールするためには、
	  サブディレクトリも含んだマウントにサーバが対応している必要があります。
	  例えば FreeBSD 10.1 の配布ファイルが
	  <code class="filename">ziggy:/usr/archive/stuff/FreeBSD</code>,
	  にあるとすると、マシン <code class="systemitem">ziggy</code> では
	  <code class="filename">/usr</code> や
	  <code class="filename">/usr/archive/stuff</code>
	  だけでなく <code class="filename">/usr/archive/stuff/FreeBSD</code>
	  の直接マウントが可能になっていなければなりません。</p><p>FreeBSD の <code class="filename">/etc/exports</code>
	  ファイルでは、このことは <code class="option">-alldirs</code>
	  によって制御されています。
	  他の <acronym class="acronym">NFS</acronym>
	  サーバの場合だとまた話が違ってくるかもしれません。
	  もしサーバから <span class="errorname">permission denied</span>
	  が返ってくるようでしたら、
	  サブディレクトリマウントをちゃんと有効にできていないことが考えられます。</p></div></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="basics"></a>第4章 UNIX の基礎知識</h2></div><div><span class="authorgroup">改訂<span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Shumway</span> <span class="firstname">Chris</span> [FAMILY Given]</span>. </span></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#basics-synopsis">4.1. この章では</a></span></dt><dt><span class="sect1"><a href="#consoles">4.2. 仮想コンソールと端末</a></span></dt><dt><span class="sect1"><a href="#permissions">4.3. 許可属性</a></span></dt><dt><span class="sect1"><a href="#dirstructure">4.4. ディレクトリ構造</a></span></dt><dt><span class="sect1"><a href="#disk-organization">4.5. ディスク構成</a></span></dt><dt><span class="sect1"><a href="#mount-unmount">4.6. ファイルシステムのマウントとアンマウント</a></span></dt><dt><span class="sect1"><a href="#basics-processes">4.7. プロセス</a></span></dt><dt><span class="sect1"><a href="#basics-daemons">4.8. デーモン、シグナルとプロセス終了</a></span></dt><dt><span class="sect1"><a href="#shells">4.9. シェル</a></span></dt><dt><span class="sect1"><a href="#editors">4.10. テキストエディタ</a></span></dt><dt><span class="sect1"><a href="#basics-devices">4.11. デバイスとデバイスノード</a></span></dt><dt><span class="sect1"><a href="#basics-more-information">4.12. さらに詳しい情報を得るには...</a></span></dt></dl></div><p><span class="emphasis"><em>訳: 中井 幸博 <code class="email">&lt;<a xmlns="" class="email" href="mailto:nakai@mlab.t.u-tokyo.ac.jp">nakai@mlab.t.u-tokyo.ac.jp</a>&gt;</code>, 1996 年 10 月 12 日.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-synopsis"></a>4.1. この章では</h2></div></div></div><p>この章では FreeBSD
      オペレーティングシステムの基本的なコマンドと機能について記述しています。
      ここに書かれてあることのほとんどは、
      どんな <span class="trademark">UNIX</span>® オペレーティングシステムにもあてはまります。
      この章に書いてあることに馴染みがあるなら、
      この章は気軽に流し読みしてください。
      あなたが FreeBSD の初心者なら、
      何か質問する前にこの章を読んでおいた方がきっといいはずです。</p><p>この章を読んで分かることは、次のようなことです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD の <span class="quote">「<span class="quote">仮想コンソール</span>」</span> の使い方</p></li><li class="listitem"><p><span class="trademark">UNIX</span>® のファイルの許可属性の仕組みと
	  FreeBSD のファイルフラグについて</p></li><li class="listitem"><p>FreeBSD のファイルシステムの構成</p></li><li class="listitem"><p>FreeBSD のディスク構成</p></li><li class="listitem"><p>ファイルシステムをマウント、アンマウントする方法</p></li><li class="listitem"><p>プロセス、デーモンとシグナルとはなにか</p></li><li class="listitem"><p>シェルとはなにか。 また、デフォルトのログイン環境を変える方法</p></li><li class="listitem"><p>テキストエディタの基本的な使い方</p></li><li class="listitem"><p>デバイスおよびデバイスノードとはなにか</p></li><li class="listitem"><p>さらに詳しい情報を得るためのマニュアルページの読み方</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="consoles"></a>4.2. 仮想コンソールと端末</h2></div></div></div><a id="idp80500176" class="indexterm"></a><a id="idp80500688" class="indexterm"></a><p>FreeBSD は様々な使い方ができます。その中の一つが、
      テキスト端末でコマンドを入力することです。この方法で FreeBSD を使えば、
      <span class="trademark">UNIX</span>® オペレーティングシステムの能力と柔軟性を手にすることができます。
      この節では、<span class="quote">「<span class="quote">コンソール</span>」</span> と
      <span class="quote">「<span class="quote">端末</span>」</span> はどのようなもので、FreeBSD でどう使うかを
      説明します。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-intro"></a>4.2.1. コンソール</h3></div></div></div><a id="idp80503760" class="indexterm"></a><p>起動時に自動的にグラフィカルな環境が起動するように FreeBSD
	を設定していなければ、システムが起動してスタートアップ
	スクリプトが実行されると、すぐにログインプロンプトが出てくるでしょう。
	次のようものが表示されるはずです。</p><pre class="screen">Additional ABI support:.
Local package initialization:.
Additional TCP options:.

Fri Sep 20 13:01:06 EEST 2002

FreeBSD/i386 (pc3.example.org) (ttyv0)

login:</pre><p>あなたのシステムではメッセージが多少異なるかもしれませんが、
	似たようなものが見られるはずです。
	最後の 2 行が、今関心を向けているものです。
	最後から 2 行目は、以下のようになっています。</p><pre class="programlisting">FreeBSD/i386 (pc3.example.org) (ttyv0)</pre><p>この行には、
	起動したばかりのシステムについていくばくかの情報があります。
	あなたは、x86 アーキテクチャ上の Intel または
	その互換プロセッサ上で動作している <span class="quote">「<span class="quote">FreeBSD</span>」</span> の
	コンソールを目にしているのです<a href="#ftn.idp80506448" class="footnote" id="idp80506448"><sup class="footnote">[1]</sup></a>。このマシンの名称 (どの <span class="trademark">UNIX</span>® 機にも名前がついて
	  います) は <code class="systemitem">pc3.example.org</code> で、
	  あなたはそのシステムコンソール、<code class="filename">ttyv0</code>
	  端末に向かっています。</p><p>最後の行は、常に以下のものになります。</p><pre class="programlisting">login:</pre><p>ここは、FreeBSD にログインするために <span class="quote">「<span class="quote">ユーザ名</span>」</span>
	を入力するところです。次の節でどうするか説明します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-login"></a>4.2.2. FreeBSD にログインする</h3></div></div></div><p>FreeBSD は、マルチユーザ、マルチプロセスなシステムです。
	これは、1 台のマシンで何人もの人が交互に多くのプログラムを
	動かせるシステムに与えられる正式な説明です。</p><p>あらゆるマルチユーザシステムには、ある <span class="quote">「<span class="quote">ユーザ</span>」</span>
	を他のユーザと区別する何がしかの手段が必要です。
	FreeBSD (とすべての <span class="trademark">UNIX</span>® like なオペレーティングシステム) では、
	すべてのユーザに対してプログラムの実行を可能にするのに、システムに
	<span class="quote">「<span class="quote">ログイン</span>」</span> することを義務付けてこれを実現しています。
	どのユーザにも、一意な名前 (<span class="quote">「<span class="quote">ユーザ名</span>」</span>)
	と個人的な秘密の鍵 (<span class="quote">「<span class="quote">パスワード</span>」</span>) があります。
	FreeBSD はユーザにプログラムの実行を許可する前に、
	この 2 つの入力を要求します。</p><a id="idp80515152" class="indexterm"></a><p>FreeBSD が起動してスタートアップスクリプトを実行し終わった
	直後に<a href="#ftn.idp80515920" class="footnote" id="idp80515920"><sup class="footnote">[2]</sup></a>、プロンプトを表示して有効なユーザ名の入力を促します。</p><pre class="screen">login:</pre><p>この例では <code class="systemitem">john</code> というユーザ名を使う
	ことにしましょう。このプロンプトに対して
	<code class="literal">john</code> と入力して、<span class="keycap"><strong>Enter</strong></span> を
	押してください。そうすると、
	次のような<span class="quote">「<span class="quote">パスワード</span>」</span>の入力を要求するプロンプトが
	表示されます。</p><pre class="screen">login: <strong class="userinput"><code>john</code></strong>
Password:</pre><p>それでは <code class="systemitem">john</code> のパスワードを入力して
	<span class="keycap"><strong>Enter</strong></span> を押してください。パスワードは
	<span class="emphasis"><em>表示されません</em></span>。これについては、当面は
	気にする必要はありません。セキュリティのためといえば十分でしょう。</p><p>パスワードを正確に入力したら、FreeBSD にログインして
	利用可能なすべてのコマンドを試せるようになっているはずです。</p><p><acronym class="acronym">MOTD</acronym>、もしくはコマンドプロンプト
	(<code class="literal">#</code>, <code class="literal">$</code>
	または <code class="literal">%</code>)
	に表示されるメッセージを読むようにしましょう。
        これは FreeBSD へのログインに成功したときに表示されます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-virtual"></a>4.2.3. 多数のコンソール</h3></div></div></div><p>一つのコンソールで <span class="trademark">UNIX</span>® コマンドを動かすのは結構なことですが、
	FreeBSD は多くのプログラムを一度に動かせます。
	コマンドを入力できるコンソールが一つというのは、
	FreeBSD のようにいくつものプログラムを同時に動かせる
	オペレーティングシステムの場合は少しもったいないことです。
	ここで、<span class="quote">「<span class="quote">仮想コンソール</span>」</span> が非常に役に立ちます。</p><p>FreeBSD は、異なる仮想コンソールを複数
	表示するように設定できます。キーボード上である組合せのキーを押せば、
	その中の一つから他の仮想コンソールのどれかに切り替えられます。
	それぞれのコンソールは、個別の出力チャンネルを持っており、
	また FreeBSD はある仮想コンソールから次に切り替えるのに応じて、
	キーボード入力とモニター出力を適切につなぎ直します。</p><p>FreeBSD は、コンソールを切り替えるために、
	特別なキーの組合せを予約しています<a href="#ftn.idp80539088" class="footnote" id="idp80539088"><sup class="footnote">[3]</sup></a>。FreeBSD では
	<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>,
	<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F2</strong></span> から
	<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F8</strong></span> までを、
	別の仮想コンソールに切り替えるのに使えます。</p><p>あるコンソールから他に切り替えるのに応じて、FreeBSD は画面
	への出力を保存して戻します。結果として、FreeBSD で動かすコマン
	ドを入力するのに使える複数の画面とキーボードを
	<span class="quote">「<span class="quote">仮想的に</span>」</span> 実現できるのです。
	ある仮想コンソールで実行したプログラムは、
	そのコンソールが見えなくなっている時も実行を停止しません。
	別の仮想コンソールに切り替えても動き続けます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-ttys"></a>4.2.4. <code class="filename">/etc/ttys</code> ファイル</h3></div></div></div><p>初期設定では、FreeBSD は 8 つの仮想コンソールを立ち上げます。
	この設定はもともと埋め込まれているわけではなく、
	インストールしたものが、もっと多いまたは少ない数の仮想コンソールで
	起動するように、容易にカスタマイズできます。仮想コンソールの数と
	設定は <code class="filename">/etc/ttys</code> ファイルに書かれています。</p><p>FreeBSD の仮想コンソールを設定するには
	<code class="filename">/etc/ttys</code> ファイルを利用します。
	このファイルのコメントアウトされていない (<code class="literal">#</code>
	文字で始まっていない) 行は、一つの端末または仮想コンソールの
	設定があります。FreeBSD の初期設定では、
	仮想コンソールを 9 つ設定し、そのうち 8 つを有効にしています。
	<code class="literal">ttyv</code> で始まる行がそれです。</p><pre class="programlisting"># name  getty                           type    status          comments
#
ttyv0   "/usr/libexec/getty Pc"         cons25  on  secure
# Virtual terminals
ttyv1   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv2   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv3   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv4   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv5   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv6   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv7   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv8   "/usr/X11R6/bin/xdm -nodaemon"  xterm   off secure</pre><p>このファイルのそれぞれのカラムと仮想コンソールに設定可能な
	全オプションの詳しい説明は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a> のマニュアルを
	参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-singleuser"></a>4.2.5. シングルユーザモードのコンソール</h3></div></div></div><p><span class="quote">「<span class="quote">シングルユーザモード</span>」</span> とは何かという詳しい説明は、
	<a class="xref" href="#boot-singleuser" title="13.6.2. シングルユーザモード">「シングルユーザモード」</a> にあります。FreeBSD を
	シングルユーザモードで動かしている場合は一つしかコンソールが
	ないということは注意しておくに値するでしょう。仮想コンソールは
	利用できません。シングルユーザモードのコンソールの設定は、同じく
	<code class="filename">/etc/ttys</code> ファイルにあります。
	<code class="literal">console</code> で始まる行を探してください。</p><pre class="programlisting"># name  getty                           type    status          comments
#
# If console is marked "insecure", then init will ask for the root password
# when going to single-user mode.
console none                            unknown off secure</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="literal">console</code> 行の上のコメントが示すように、
	  この行を編集して <code class="literal">secure</code> を
	  <code class="literal">insecure</code> に変更できます。そうすると、
	  FreeBSD がシングルユーザモードで起動した場合にも
	  <code class="systemitem">root</code> のパスワードを要求します。</p><p xmlns="http://www.w3.org/1999/xhtml"><span class="emphasis"><em>これを <code class="literal">insecure</code> に
	  変更する場合は十分注意してください。</em></span>
	  <code class="systemitem">root</code> のパスワードを忘れてしまったら、
	  シングルユーザモードで起動するのは少しややこしくなります。
	  できることはできますが、FreeBSD の起動の過程とそれに関わる
	  プログラムにあまり親しんでいない人には少し難しいかも知れません。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-vidcontrol"></a>4.2.6. コンソールのビデオモードの変更</h3></div></div></div><p>FreeBSD のデフォルトのビデオモードは 1024x768 や 1280x1024 など、
	グラフィックカードとディスプレイが対応しているサイズに調整されます。
	別のビデオモードを使うには、以下の 2
	つのオプションを有効にしてカーネルを再コンパイルする必要があります。</p><pre class="programlisting">options VESA
options SC_PIXEL_MODE</pre><p>1 度このオプションを有効にしてカーネルを再コンパイルしたら、
	あなたのハードウェアがどのビデオモードに対応しているか、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a> を用いて知ることができます。
	以下を実行すると、どのビデオモードに対応しているかを知ることができます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vidcontrol -i mode</code></strong></pre><p>このコマンドの出力結果があなたのハードウェアが対応しているビデオモードです。
	その後 <code class="systemitem">root</code>
	ユーザで <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a> を実行することで、
        新しくどのビデオモードを使うかを選択できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vidcontrol MODE_279</code></strong></pre><p>このビデオモードで良いと思ったら、起動時に自動的に設定されるように
        <code class="filename">/etc/rc.conf</code> ファイルに以下のように設定してください。</p><pre class="programlisting">allscreens_flags="MODE_279"</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="permissions"></a>4.3. 許可属性</h2></div></div></div><a id="idp80575568" class="indexterm"></a><p>FreeBSD は BSD <span class="trademark">UNIX</span>® の直系の子孫であり、
      いくつかの鍵となる <span class="trademark">UNIX</span>® 思想にもとづいています。
      まず最も際だった特徴として最初に言えるのは、FreeBSD
      がマルチユーザのオペレーティングシステムだということです。
      FreeBSD は同時に働いている複数のユーザすべてを、
      完全に分離したタスク上で処理する能力を持っています。
      また FreeBSD は、ハードウェアデバイス、周辺装置、メモリ、
      CPU 時間等への要求を、各ユーザが平等に利用できるように適切に共有し、
      管理する役割を担っています。</p><p>システムがマルチユーザをサポートしているため、
      システムが管理する資源はすべて、
      誰がその資源を読み・書き・実行できるかを支配する、
      一組の許可属性を持っています。
      これらの許可属性は 3 つの部分からなる 3 桁の 8 進数の形で格納されています。
      それはそのファイルの所有者 (owner) に対するもの、
      そのファイルが所属するグループ (group) に対するもの、
      その他 (others) に対するものの 3 つです。
      これを数字を使って表現すると、次のようになります。</p><a id="idp80577872" class="indexterm"></a><a id="idp80578384" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>値</th><th>許可属性</th><th>ディレクトリの表示</th></tr></thead><tbody><tr><td>0</td><td>読み込み不可、書き込み不可、実行不可</td><td><code class="literal">---</code></td></tr><tr><td>1</td><td>読み込み不可、書き込み不可、実行可能</td><td><code class="literal">--x</code></td></tr><tr><td>2</td><td>読み込み不可、書き込み可能、実行不可</td><td><code class="literal">-w-</code></td></tr><tr><td>3</td><td>読み込み不可、書き込み可能、実行可能</td><td><code class="literal">-wx</code></td></tr><tr><td>4</td><td>読み込み可能、書き込み不可、実行不可</td><td><code class="literal">r--</code></td></tr><tr><td>5</td><td>読み込み可能、書き込み不可、実行可能</td><td><code class="literal">r-x</code></td></tr><tr><td>6</td><td>読み込み可能、書き込み可能、実行不可</td><td><code class="literal">rw-</code></td></tr><tr><td>7</td><td>読み込み可能、書き込み可能、実行可能</td><td><code class="literal">rwx</code></td></tr></tbody></table></div><a id="idp80604368" class="indexterm"></a><a id="idp80605264" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a> に対してコマンドライン引数 <code class="option">-l</code> を使うと、
      詳細なディレクトリリストを見ることができ、
      ファイルの所有者、グループ、その他への許可属性を示す欄があるのがわかります。
      例えば、<code class="command">ls -l</code> を実行して、
      適当なディレクトリを表示させると以下のようになります。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ls -l</code></strong>
total 530
-rw-r--r--  1 root  wheel     512 Sep  5 12:31 myfile
-rw-r--r--  1 root  wheel     512 Sep  5 12:31 otherfile
-rw-r--r--  1 root  wheel    7680 Sep  5 12:31 email.txt
...</pre><p>以下に示すのは、
      <code class="command">ls -l</code> の最初の行を抜き出したものです。</p><pre class="screen">-rw-r--r--</pre><p>最初の (一番左の) 文字は、それが
      普通のファイルなのか、ディレクトリなのか、
      キャラクタ型のデバイス特殊ファイルなのか、
      ソケットなのか、
      その他の特殊な疑似ファイルデバイスなのかといった種類を示す特別な文字です。
      この場合、<code class="literal">-</code> という文字は、
      普通のファイルであることを示します。
      この例でその次に来る <code class="literal">rw-</code> と書かれた 3 文字は、
      そのファイルの所有者に許可を与えるものです。
      その次の <code class="literal">r--</code> の 3 文字は、
      そのファイルが所属しているグループに許可を与えます。
      最後の <code class="literal">r--</code> の 3 文字は、
      システムに存在するその他のユーザに許可を与えます。
      <span class="quote">「<span class="quote">-</span>」</span> は許可が与えられていないことを示します。
      このファイルの例では、ファイルの所有者はこのファイルを読み書きでき、
      ファイルの所属しているグループに属するユーザはファイルを読むことだけでき、
      そのどちらでもないユーザは、
      このファイルを読むだけできるように許可属性が与えられています。
      上の表によれば、このファイルに与えられた許可属性は
      <code class="literal">644</code> となります。
      ここで各数字は、このファイルの許可属性の 3 つの部分を表しています。</p><p>ファイルについてはここまでの説明で十分です。 しかし、
      デバイスの場合の許可属性はどのようにコントロールされているのでしょうか?
      FreeBSD は、大部分のハードウェアをファイルとして取り扱います。
      そのため、プログラムからは普通のファイルとまったく同じようにオープンし、
      データの読み書きができるようになっています。
      これらのデバイス特殊ファイルは
      <code class="filename">/dev</code> ディレクトリに収められています。</p><p>ディレクトリもまた、ファイルと同様に扱われます。
      それは読み込み/書き込み/実行の許可属性を持ちます。
      ディレクトリの実行ビットはファイルのそれとは少し違った意味を持ちます。
      ディレクトリが実行可能になっているとき、
      そのディレクトリに移動することができます。
      つまり、そのディレクトリに <span class="quote">「<span class="quote">cd</span>」</span> (change directory)
      することが可能です。
      また、実行可能属性がついているディレクトリでは、
      名前が分かっているファイルにアクセスすることもできます
      (もちろんそのファイル自体の許可属性によります)。
    </p><p>特に、ディレクトリの中の一覧を表示するには、
      そのディレクトリに読み込み属性が設定されていなければなりません。
      一方、名前が分かっているファイルを削除するには、
      そのファイルが含まれているディレクトリに
      書き込み属性<span class="emphasis"><em>と</em></span>実行属性
      の両方が必要です。</p><p>この他にも許可属性ビットはありますが、いずれも
      setuid バイナリや sticky ディレクトリなどといった特殊な状況で使われます。
      ファイルの許可属性そのものについて、
      また、それらの設定のしかたに関する詳しい情報は、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a> マニュアルページを参照してください。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80616144"></a>4.3.1. シンボリック表記</h3></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span> <span class="firstname">Tom</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp80619344" class="indexterm"></a><p>シンボリック表記と呼ばれる許可属性を表す方法では、
	ファイルやディレクトリの許可属性を、
	8 進数ではなく記号を用いて設定します。
	シンボリック表記では、(who), (action), (permissions)
	という書式が用いられます。
	利用できる値は以下の通りです。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>オプション</th><th>文字</th><th>意味</th></tr></thead><tbody><tr><td>(who)</td><td>u</td><td>ユーザ</td></tr><tr><td>(who)</td><td>g</td><td>ファイルを所持しているグループ</td></tr><tr><td>(who)</td><td>o</td><td>その他</td></tr><tr><td>(who)</td><td>a</td><td>すべて (<span class="quote">「<span class="quote">world</span>」</span>)</td></tr><tr><td>(action)</td><td>+</td><td>許可属性を与える</td></tr><tr><td>(action)</td><td>-</td><td>許可属性を取り除く</td></tr><tr><td>(action)</td><td>=</td><td>許可属性を指定したものにする</td></tr><tr><td>(permissions)</td><td>r</td><td>読み込み</td></tr><tr><td>(permissions)</td><td>w</td><td>書き込み</td></tr><tr><td>(permissions)</td><td>x</td><td>実行</td></tr><tr><td>(permissions)</td><td>t</td><td>Sticky ビット</td></tr><tr><td>(permissions)</td><td>s</td><td>UID または GID を設定する</td></tr></tbody></table></div><p>これらの値は、これまでと同様に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a>
      コマンドで用いますが、文字で指定します。
      たとえば、<em class="replaceable"><code>FILE</code></em>
      に対して自分以外のユーザからアクセスを一切受け付けたくない、
      というときには以下のコマンドを実行してください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chmod go= FILE</code></strong></pre><p>カンマ区切りで設定することで、
      ファイルの属性を一度に 2 つ以上変更できます。
      以下の例では、<em class="replaceable"><code>FILE</code></em>
      に対して自分以外のユーザから書き込みの権限を取り上げ、
      かわりにすべてのユーザが <em class="replaceable"><code>FILE</code></em>
      を実行できるようにします。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chmod go-w,a+x <em class="replaceable"><code>FILE</code></em></code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80697552"></a>4.3.2. FreeBSD のファイルフラグ</h3></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span> <span class="firstname">Tom</span> [FAMILY Given]</span>. </span></div></div></div><p>先ほど説明したファイルの許可属性に加え、
	FreeBSD では <span class="quote">「<span class="quote">ファイルフラグ</span>」</span> を使えます。
	これはファイルにセキュリティや管理上の属性を追加するものですが、
	ディレクトリには追加しません。</p><p>これらのファイルフラグはファイルに管理上の属性を追加し、
	<code class="systemitem">root</code>
	ユーザでさえ誤ってファイルを消去、変更してしまうことを防ぎます。</p><p>ファイルフラグは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a>
	を使って、簡単なインタフェースで設定できます。
	例えば、<code class="filename">file1</code>
	というファイルにシステムレベルで消去不可のフラグを設定するには、
	以下のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags sunlink <code class="filename">file1</code></code></strong></pre><p>また、消去不可のフラグを削除するには、
	以下のように先ほどのコマンドの <code class="option">sunlink</code> の前に
	<span class="quote">「<span class="quote">no</span>」</span> をつけるだけです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags nosunlink <code class="filename">file1</code></code></strong></pre><p>ファイルにどのフラグが設定されているのかを見るには、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a>
	コマンドを <code class="option">-lo</code> オプションと一緒に使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls -lo <code class="filename">file1</code>
  </code></strong></pre><p>出力は以下のようになります。</p><pre class="programlisting">-rw-r--r--  1 trhodes  trhodes  sunlnk 0 Mar  1 05:54 file1</pre><p>いくつかのフラグの追加、削除は
	<code class="systemitem">root</code> ユーザしかできません。
	他のフラグは、ファイルの所有者が変更できます。
	システム管理者は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a> と <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chflags</span>(2)</span></a> から、
	より詳細な情報を得ることをおすすめします。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dirstructure"></a>4.4. ディレクトリ構造</h2></div></div></div><a id="idp80718800" class="indexterm"></a><p>FreeBSD のディレクトリ構造は、
      システム全体を理解するに当たって重要です。
      把握しておくべき最も重要なものは、<span class="quote">「<span class="quote">/</span>」</span>
      ディレクトリです。 このディレクトリは起動時に一番最初にマウントされ、
      オペレーティングシステムをマルチユーザで動作させるために
      必要な基本システムが含まれています。
      また、ルートディレクトリには、
      マルチユーザへの移行中に他のファイルシステムをマウントするためのマウントポイントも含まれます。</p><p>マウントポイントとは、
      追加のファイルシステムと接続するためのディレクトリのことです
      (普通はルートファイルシステムにあります) 。
      より詳細な説明は
      <a class="xref" href="#disk-organization" title="4.5. ディスク構成">「ディスク構成」</a>
      の節にあります。
      標準的なマウントポイントには
      <code class="filename">/usr</code>, <code class="filename">/var</code>, <code class="filename">/tmp</code>,
      <code class="filename">/mnt</code>, <code class="filename">/cdrom</code>
      があります。
      通常これらのディレクトリについては、
      <code class="filename">/etc/fstab</code> というファイル中のエントリが参照されます。
      <code class="filename">/etc/fstab</code>
      はさまざまなファイルシステムとマウントポイントの表であり、
      システムが参照します。
      <code class="filename">/etc/fstab</code> に書かれたファイルシステムは
      <code class="option">noauto</code> オプションが指定されていなければ、
      起動時に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> スクリプトによって自動的にマウントされます。
      詳細は <a class="xref" href="#disks-fstab" title="4.6.1. fstab ファイル">「<code class="filename">fstab</code> ファイル」</a> をご覧ください。</p><p>ファイルシステム構造を網羅した説明は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hier&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">hier</span>(7)</span></a> に書かれています。
      ここでは、もっともよく使われるディレクトリについて簡単に
      見るだけで十分でしょう。</p><p>
      </p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>ディレクトリ</th><th>説明</th></tr></thead><tbody valign="top"><tr><td valign="top"><code class="filename">/</code></td><td valign="top">ファイルシステムのルートディレクトリ</td></tr><tr><td valign="top"><code class="filename">/bin/</code></td><td valign="top">シングルユーザ環境とマルチユーザ環境の両方で重要な
	        ユーザユーティリティ</td></tr><tr><td valign="top"><code class="filename">/boot/</code></td><td valign="top">オペレーティングシステムの起動時に使われるプログラムと設定ファイル</td></tr><tr><td valign="top"><code class="filename">/boot/defaults/</code></td><td valign="top">デフォルトの起動設定ファイル; <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a> 参照</td></tr><tr><td valign="top"><code class="filename">/dev/</code></td><td valign="top">デバイスノード; <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=intro&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">intro</span>(4)</span></a> 参照</td></tr><tr><td valign="top"><code class="filename">/etc/</code></td><td valign="top">システム設定ファイルとスクリプト</td></tr><tr><td valign="top"><code class="filename">/etc/defaults/</code></td><td valign="top">デフォルトのシステム設定ファイル; <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> 参照</td></tr><tr><td valign="top"><code class="filename">/etc/mail/</code></td><td valign="top"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> のようなメール転送エージェントの設定ファイル</td></tr><tr><td valign="top"><code class="filename">/etc/namedb/</code></td><td valign="top"><code class="command">named</code> 設定ファイル; <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> 参照</td></tr><tr><td valign="top"><code class="filename">/etc/periodic/</code></td><td valign="top"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> 経由で毎日・毎週・毎月実行されるスクリプト;
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a> 参照</td></tr><tr><td valign="top"><code class="filename">/etc/ppp/</code></td><td valign="top"><code class="command">ppp</code> 設定ファイル;
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> 参照</td></tr><tr><td valign="top"><code class="filename">/mnt/</code></td><td valign="top">システム管理者が一時的なマウントポイントとしてよく使う
	        空のディレクトリ</td></tr><tr><td valign="top"><code class="filename">/proc/</code></td><td valign="top">プロセスファイルシステム; <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=procfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">procfs</span>(5)</span></a> と
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_procfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_procfs</span>(8)</span></a> 参照</td></tr><tr><td valign="top"><code class="filename">/rescue/</code></td><td valign="top">緊急時のために静的にリンクされているプログラム; 詳しくは
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rescue&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rescue</span>(8)</span></a> 参照</td></tr><tr><td valign="top"><code class="filename">/root/</code></td><td valign="top"><code class="systemitem">root</code> アカウントのホームディレクトリ</td></tr><tr><td valign="top"><code class="filename">/sbin/</code></td><td valign="top">シングルユーザ環境とマルチユーザ環境の両方で重要な
	        システムプログラムと管理ユーティリティ</td></tr><tr><td valign="top"><code class="filename">/tmp/</code></td><td valign="top">一時的なファイル。
		通常、<code class="filename">/tmp</code>
		の内容はシステムの再起動で失われます。
		メモリファイルシステムはよく
		<code class="filename">/tmp</code>
		にマウントされます。
		これは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> の tmpmfs 関係の変数を使うか、
		<code class="filename">/etc/fstab</code>
		に設定項目を記入することで自動化できます。
		詳しくは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a> を参照して下さい。</td></tr><tr><td valign="top"><code class="filename">/usr/</code></td><td valign="top">大部分のユーザユーティリティとアプリケーション</td></tr><tr><td valign="top"><code class="filename">/usr/bin/</code></td><td valign="top">よく使うユーティリティとプログラミングツールとアプリケーション</td></tr><tr><td valign="top"><code class="filename">/usr/include/</code></td><td valign="top">C の標準ヘッダファイル</td></tr><tr><td valign="top"><code class="filename">/usr/lib/</code></td><td valign="top">ライブラリ</td></tr><tr><td valign="top"><code class="filename">/usr/libdata/</code></td><td valign="top">いろいろなユーティリティのデータファイル</td></tr><tr><td valign="top"><code class="filename">/usr/libexec/</code></td><td valign="top">システムデーモンとシステムユーティリティ
	        (他のプログラムから実行される)</td></tr><tr><td valign="top"><code class="filename">/usr/local/</code></td><td valign="top">ローカルのプログラムやライブラリなど。
	        FreeBSD ports 構成のデフォルトインストール先としても使われます。
	        <code class="filename">/usr/local</code> 内では、
	        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hier&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">hier</span>(7)</span></a> に書かれている <code class="filename">/usr</code>
		のための一般構造が使われます。
	        例外は man ディレクトリで、
	        <code class="filename">/usr/local/share</code> の下ではなく
	        <code class="filename">/usr/local</code> の下に直接置かれ、
	        ports 関係文書は
	        <code class="filename">share/doc/port</code>
		にあります。
	      </td></tr><tr><td valign="top"><code class="filename">/usr/obj/</code></td><td valign="top"><code class="filename">/usr/src</code> ツリーのビルドで作られる
	        アーキテクチャ依存のターゲットツリー</td></tr><tr><td valign="top"><code class="filename">/usr/ports</code></td><td valign="top">FreeBSD Ports Collection (インストールしなくてもよい)。</td></tr><tr><td valign="top"><code class="filename">/usr/sbin/</code></td><td valign="top">(ユーザが実行する) システムデーモンとシステムユーティリティ</td></tr><tr><td valign="top"><code class="filename">/usr/share/</code></td><td valign="top">アーキテクチャに依存しないファイル</td></tr><tr><td valign="top"><code class="filename">/usr/src/</code></td><td valign="top">BSD のソースファイルまたはローカルのソースファイル、
	        あるいは両方</td></tr><tr><td valign="top"><code class="filename">/usr/X11R6/</code></td><td valign="top">X11R6 のプログラム、ライブラリなど (インストールしなくてもよい)</td></tr><tr><td valign="top"><code class="filename">/var/</code></td><td valign="top">ログ・一時的なファイル・スプールファイルなどいろいろな用途。
	        メモリファイルシステムは時々
		<code class="filename">/var</code>
		にマウントされます。
	        これは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> の varmfs 関係の変数を使うか、
	        <code class="filename">/etc/fstab</code>
		に設定項目を記入することで自動化できます。
	        詳しくは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a> を参照して下さい。</td></tr><tr><td valign="top"><code class="filename">/var/log/</code></td><td valign="top">いろいろなシステムログファイル</td></tr><tr><td valign="top"><code class="filename">/var/mail/</code></td><td valign="top">ユーザのメールボックスファイル</td></tr><tr><td valign="top"><code class="filename">/var/spool/</code></td><td valign="top">プリンタとメールシステムのスプールディレクトリなどなど</td></tr><tr><td valign="top"><code class="filename">/var/tmp/</code></td><td valign="top">一時的なファイル。
	        <code class="filename">/var</code>
		がメモリファイルシステムでなければ、
	        ここにあるファイルはシステムが再起動しても失われません。</td></tr><tr><td valign="top"><code class="filename">/var/yp</code></td><td valign="top">NIS のマップ</td></tr></tbody></table></div><p>
    </p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disk-organization"></a>4.5. ディスク構成</h2></div></div></div><p>ファイルを見つけるために FreeBSD
	が使用する構成の一番小さな単位はファイル名です。
	ファイル名は、大文字と小文字を区別します。
	このことは
	<code class="filename">readme.txt</code> および <code class="filename">README.TXT</code>
	が異なる二つのファイルであることを意味します。
	FreeBSD はそのファイルがプログラム、または文書、
	あるいはその他の形式かどうかを決定するために拡張子を使用しません。</p><p>ファイルはディレクトリ内に格納されます。
	ディレクトリはファイルを一つも含んでいないかもしれせんし、
	または数百のファイルを含んでいるかもしれません。
	ディレクトリはまた別のディレクトリを含むことができます。
	つまり、ディレクトリの階層構造を構築することができます。
	このことにより、データ構造がはるかに簡単になります。</p><p>ファイルおよびディレクトリは、
	必要な他のディレクトリ名とスラッシュ (<code class="literal">/</code>) を後に続けて
	ファイル名またはディレクトリ名を与えることによって参照されます。
	
	<code class="filename">foo</code> ディレクトリがあって、その中に
	<code class="filename">bar</code> ディレクトリがあるとします。
	そして、その中に <code class="filename">readme.txt</code> があるとすると、
	ファイルへのフルネーム、または<em class="firstterm">パス</em>は
	<code class="filename">foo/bar/readme.txt</code> となります。</p><p>ディレクトリおよびファイルはファイルシステム内に格納されます。
	どのファイルシステムは、そのファイルシステムのための
	<em class="firstterm">ルートディレクトリ</em> とよばれる、
	まさに頂点の位置にちょうど一つのディレクトリを含んでいます。
	このルートディレクトリは他のディレクトリを含むことができます。</p><p>これまでのところ、これはあなたの使ったことのある他の OS
	とおそらく似ているかもしれません。少し違いがあります。
	たとえば、<span class="trademark">MS-DOS</span>® ではファイル名とディレクトリ名を分けるのに
	<code class="literal">\</code> を使います。
	一方、<span class="trademark">Mac OS</span>® では <code class="literal">:</code> を使います。</p><p>FreeBSD はパス内にドライブレターまたは他のドライブ名を使いません。
	あなたは FreeBSD で <code class="filename">c:/foo/bar/readme.txt</code>
	とは書かないでしょう。</p><p>その代わり、一つのファイルシステムは
	<em class="firstterm">ルートファイルシステム</em>として設計されています。
	ルートファイルシステムのルートディレクトリは <code class="literal">/</code>
	として参照されます。それから、他のすべてのファイルシステムは、
	ルートファイルシステム以下に <em class="firstterm">マウント</em>
	されます。
	あなたが FreeBSD システムでどんなに多くのディスクを使用しても、
	すべてのディレクトリは、
	同じディスクの一部であるように見えるので問題ありません。</p><p><code class="literal">A</code>,<code class="literal">B</code> および
	<code class="literal">C</code>
	と呼ばれる三つのファイルシステムがあると仮定しましょう。
	それぞれのファイルファイルシステムには一つのルートディレクトリがあり、
	<code class="literal">A1</code>, <code class="literal">A2</code>
	と呼ばれている二つの他のディレクトリを含んでいます
	(同様に	<code class="literal">B1</code>, <code class="literal">B2</code> および
	<code class="literal">C1</code>, <code class="literal">C2</code> があります)。</p><p><code class="literal">A</code> をルートファイルシステムとします。
	このディレクトリになにが含まれているか見るために
	<code class="command">ls</code> コマンドを使うと、
	<code class="literal">A1</code> および <code class="literal">A2</code>
	の二つのサブディレクトリが現れるでしょう。
	ディレクトリツリーは以下のようになります。</p><div class="mediaobject"><img src="install/example-dir1.png" /></div><p>ファイルシステムはファイルシステム内のディレクトリにマウントしなければいけません。
	それでは、<code class="literal">A1</code> ディレクトリに
	<code class="literal">B</code> ファイルシステムをマウントすると仮定します。
	<code class="literal">B</code> のルートディレクトリは <code class="literal">A1</code>
	に置き換えられ、
	そして <code class="literal">B</code> 内のディレクトリがそれに応じて現れます。</p><div class="mediaobject"><img src="install/example-dir2.png" /></div><p><code class="literal">B1</code> または <code class="literal">B2</code>
	内にあるどんなファイルも、必要なときに
	<code class="filename">/A1/B1</code> または <code class="filename">/A1/B2</code>
	で到達できます。
	<code class="filename">/A1</code>
	にあったすべてのファイルは一時的に隠されました。
	それらは <code class="literal">B</code> が
	A から<em class="firstterm">アンマウント</em>されたら再び現れるでしょう。</p><p>もし <code class="literal">B</code> が <code class="literal">A2</code>
	にマウントされていたら、この図のようになります。</p><div class="mediaobject"><img src="install/example-dir3.png" /></div><p>そして、パスはそれぞれ <code class="filename">/A2/B1</code> および
	<code class="filename">/A2/B2</code> となるでしょう。</p><p>ファイルシステムは互いのファイルシステム上にもマウントできます。
	上記の最後の例に続けて、<code class="literal">C</code> ファイルシステム は
	<code class="literal">B</code> ファイルシステム内の <code class="literal">B1</code>
	ディレクトリ上にマウントできます。
	次の図のようになります。</p><div class="mediaobject"><img src="install/example-dir4.png" /></div><p>または <code class="literal">C</code> は <code class="literal">A1</code> の下の
	<code class="literal">A</code> ファイルシステムに直接マウントできます。</p><div class="mediaobject"><img src="install/example-dir5.png" /></div><p>もしあなたが <span class="trademark">MS-DOS</span>® を使いなれているなら、
	まったく同じではありませんが、これは <code class="command">join</code> コマンドと
	似ています。</p><p>これは、通常あなた自身が心配する必要のあるものではありません。
	一般的に、FreeBSD をインストールするときにファイルシステムを作成し、
	どこにマウントするか決定します。そして、
	新しいディスクを追加しなければそれらを変更することはありません。</p><p>一つの大きなファイルシステムを用意し、
	他のファイルシステムを作成する必要としないことはまったくもって可能です。
	この方法にはいくつかの短所と一つの利点があります。</p><div class="itemizedlist"><div class="itemizedlist-title">マルチファイルシステムの利点</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>異なったファイルシステムは異なった
	    <em class="firstterm">マウントオプション</em> を使用できます。
	    たとえば、注意深い考えなのですが、
	    ルートファイルシステムを読みだし専用でマウントして、
	    不注意によって重大なファイルを削除、
	    または編集できないようににすることができます。
	    また、<code class="filename">/home</code>
	    のようなユーザが書き込み可能なファイルシステムを他のファイルシステムと分けることによって、
	    <em class="firstterm">nosuid</em> でマウントすることも可能になります。
	    このオプションは、ファイルシステムに記録されている
	    <em class="firstterm">suid</em>/<em class="firstterm">guid</em>
	    の実行可能ビットを有効にしないので、安全性を高めることができるでしょう。</p></li><li class="listitem"><p>FreeBSD はファイルシステムがどのように使われているかによって、
	    自動的にファイルシステム上のファイルの配置を最適化します。
	    したがって、連続的に書き込まれた多くの小さなファイルが含まれているファイルシステムは、
	    より大きく少ないファイルが含まれているファイルシステムと異なる最適化をするでしょう。
	    一つの大きなファイルシステムを作成すると、
	    この最適化は成り立たなくなります。</p></li><li class="listitem"><p>FreeBSD のファイルシステムはトラブルが起きてもとても強固です。
	    しかしながら臨界点でのトラブルは、
	    ファイルシステムの構造にまだ損害を与えるかもしれません。
	    マルチファイルシステムへデータを分割しておくことで、
	    必要なときにバックアップからレストアすることをより容易にして、
	    まだシステムが回復するかもしれません。</p></li></ul></div><div class="itemizedlist"><div class="itemizedlist-title">シングルファイルシステムの利点</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ファイルシステムは固定サイズです。
	    FreeBSD をインストールするときにファイルシステムを作成して、
	    固定サイズを割りあてたなら、
	    後になってそのパーティションをより大きくする必要があると気づくかもしれません。
	    パーティションのサイズを変更するには、
	    バックアップ、新しいサイズを指定したファイルシステムの再作成、
	    バックアップしたデータをリストアする作業が必要となるでしょう。</p><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD には、
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">growfs</span>(8)</span></a> コマンドがあります。
	      このコマンドは、この制限を取り除いて、
	      ファイルシステムのファイルを直ちに増加させることを可能にします。
	      </p></div></li></ul></div><p>ファイルシステムはパーティション内に含まれています。
	FreeBSD の <span class="trademark">UNIX</span>® 遺産のために、
	これは普段使われるパーティション (例えば <span class="trademark">MS-DOS</span>® パーティション)
	という用語の意味とは違う意味を持っています。
	それぞれのパーティションは <code class="literal">a</code> から
	<code class="literal">h</code> までの文字で区別されます。
	それぞれのパーティションは、
	一つのファイルシステムだけを含むことができます。
	このことは、ファイルシステムがファイルシステムの階層上の典型的なマウントポイント、
	または含まれているパーティションの文字によって記述されることを意味します。</p><p>FreeBSD は <em class="firstterm">スワップ領域</em>
	にもまたディスク領域を使用します。
	スワップ領域は FreeBSD に <em class="firstterm">仮想メモリ</em>
	を提供します。
	これはあなたのコンピュータが、
	実際に搭載している以上のメモリがあるかのように振舞います。
	FreeBSD がメモリを使い果たしたときに、
	現在使用されていないデータのいくつかをスワップ領域に移動し、
	そのデータが必要となったときに 
	(その他のデータをスワップ領域に移動させてから) 
	メモリ内に移動しなおします。</p><p>いくつかのパーティションはある慣習と関係づけられています。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>パーティション</th><th>慣習</th></tr></thead><tbody valign="top"><tr><td valign="top"><code class="literal">a</code></td><td valign="top">通常、ルートパーティションを含みます。</td></tr><tr><td valign="top"><code class="literal">b</code></td><td valign="top">通常、スワップ領域を含みます。</td></tr><tr><td valign="top"><code class="literal">c</code></td><td valign="top">通常、スライス全体と同じサイズです。
		これは、スライス全体にアクセス必要のあるユーティリティ
		(たとえば、ひどいブロックスキャナ) が、
		<code class="literal">c</code> 
		パーティションにアクセスすることを可能にします。通常、
		このパーティション内にファイルシステムを作成しないでしょう。</td></tr><tr><td valign="top"><code class="literal">d</code></td><td valign="top"><code class="literal">d</code> パーティションは、
		それに関連づけられた特別な意味を持っていましたが、
		今は無いので、普通のパーティションとして動作するでしょう。</td></tr></tbody></table></div><p>ファイルシステムを含んだそれぞれのパーティションは、FreeBSD
	が <em class="firstterm">スライス</em> と呼ぶものの中に格納されます。
	スライスは FreeBSD の用語で、
	普通はパーティションと呼ばれるものです。
	もう一度言及しますが、これは FreeBSD の <span class="trademark">UNIX</span>® 背景によるものです。
	スライスは 1 から 4 までの番号がつけられます。</p><a id="idp81052112" class="indexterm"></a><a id="idp81052624" class="indexterm"></a><a id="idp81053136" class="indexterm"></a><p>スライス番号は 1 から始まり
	<code class="literal">s</code> を前につけられて、デバイス名の後に続きます。
	したがって、<span class="quote">「<span class="quote">da0<span class="emphasis"><em>s1</em></span></span>」</span>
	は一番目の SCSI ドライブ上の 一番目のスライスです。
	ディスク上に四つの物理スライスだけが存在できます。しかし、
	適切な種類の物理スライス内に論理スライスをもつことができます。
	これらの拡張されたスライス番号は 5 から始まります。したがって、
	<span class="quote">「<span class="quote">ad0<span class="emphasis"><em>s5</em></span></span>」</span> 
	は、一番目の IDE ディスク上の一番目の拡張スライスです。
	これらのデバイスは、
	スライスを占有することを予期するファイルシステムによって使用されます。</p><p>スライスや <span class="quote">「<span class="quote">危険な専用</span>」</span> の物理ドライブ、
	そして他のドライブは <code class="literal">a</code> から <code class="literal">h</code>
	までの文字として表される <em class="firstterm">パーティション</em>
	を含んでいます。
	この文字はデバイス名に追加されます。したがって、
	<span class="quote">「<span class="quote">da0<span class="emphasis"><em>a</em></span></span>」</span> 
	は一番目の <span class="quote">「<span class="quote">危険な専用</span>」</span> da ドライブ上の
	a パーティションです。
	<span class="quote">「<span class="quote">ad1s3<span class="emphasis"><em>e</em></span></span>」</span> は、
	二番目の IDE ディスク上の 三番目のスライス内にある五番目のパーティションです。</p><p>最後に、システム上のそれぞれのディスクは識別されます。
	ディスク名はどの種類のディスクであるかを示す記号ではじまり、
	どのディスクかを示す数字が続きます。
	スライスとは違いディスクの番号づけは 0 から始まります。
	共通の記号は <a class="xref" href="#basics-dev-codes" title="表4.1 ディスクデバイス記号">表4.1「ディスクデバイス記号」</a>
	に示されます。</p><p>パーティションを参照するときには、
	FreeBSD はパーティションを含むスライスおよびパーティションも指定することを必要とします。
	そしてスライスを参照するときはディスク名も参照しないといけません。
	したがって、ディスク名、<code class="literal">s</code>、スライス番号、
	そしてパーティション文字を並べることによってパーティションを参照します。
	<a class="xref" href="#basics-disk-slice-part" title="例4.1 ディスク名、スライス名、パーティション名のサンプル">例4.1「ディスク名、スライス名、パーティション名のサンプル」</a>に例があります。</p><p><a class="xref" href="#basics-concept-disk-model" title="例4.2 ディスクの概念的構成">例4.2「ディスクの概念的構成」</a>
	は理解をより明らかにすることを助けるための、
	ディスク構成の概念のモデルを示します。</p><p>FreeBSD をインストールするために、
	まずはじめにディスクスライスの設定をし、
	次に FreeBSD に用いるスライス内のパーティションを作成し、
	それからそれぞれのパーティション内にファイルシステム
	(またはスワップ領域) を作成し、
	ファイルシステムがどこにマウントされるか決定しなければいけません。</p><div class="table"><a id="basics-dev-codes"></a><div class="table-title">表4.1 ディスクデバイス記号</div><div class="table-contents"><table summary="ディスクデバイス記号" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>記号</th><th>意味</th></tr></thead><tbody><tr><td><code class="filename">ad</code></td><td>ATAPI (IDE) ディスク</td></tr><tr><td><code class="filename">da</code></td><td>SCSI ダイレクトアクセスディスク</td></tr><tr><td><code class="filename">acd</code></td><td>ATAPI (IDE) CDROM</td></tr><tr><td><code class="filename">cd</code></td><td>SCSI CDROM</td></tr><tr><td><code class="filename">fd</code></td><td>フロッピーディスク</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="basics-disk-slice-part"></a><div class="example-title">例4.1 ディスク名、スライス名、パーティション名のサンプル</div><div class="example-contents"><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>記号</th><th>意味</th></tr></thead><tbody><tr><td><code class="literal">ad0s1a</code></td><td>一番目の IDE ディスク (<code class="literal">ad0</code>)
		  上の一番目のスライス (<code class="literal">s1</code>) 
		  内の一番目のパーティション (<code class="literal">a</code>)。</td></tr><tr><td><code class="literal">da1s2e</code></td><td>二番目の SCSI ディスク (<code class="literal">da1</code>)
		  上の二番目のスライス (<code class="literal">s2</code>)
		  内の五番目のパーティション (<code class="literal">e</code>)。</td></tr></tbody></table></div></div></div><br class="example-break" /><div class="example"><a id="basics-concept-disk-model"></a><div class="example-title">例4.2 ディスクの概念的構成</div><div class="example-contents"><p>これはシステムに接続された一番目の IDE 
	  ディスクの FreeBSD から見た図を示します。
	  ディスクサイズは 4 GB と仮定し、
	  2 GB のスライス (<span class="trademark">MS-DOS</span>® でいうパーティション) が二つあるとします。
	  一番目のスライスは <span class="trademark">MS-DOS</span>® ディスクの <code class="filename">C:</code>
	  を含んでいます。
	  そして、二番目のスライスは FreeBSD のディスクを含んでいます。
	  これは FreeBSD インストーラが三つのデータパーティションと一つのスワップパーティションを作成した例です。</p><p>三つのパーティションはそれぞれファイルシステムを含んでいます。
	  <code class="literal">a</code> 
	  パーティションはルートファイルシステムに使用され、
	  <code class="literal">e</code> パーティションは <code class="filename">/var</code>
	  ディレクトリ階層に、 <code class="literal">f</code> パーティションは
	  <code class="filename">/usr</code> ディレクトリ階層に使用されるでしょう。</p><div class="mediaobject"><img src="install/disk-layout.png" /></div></div></div><br class="example-break" /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mount-unmount"></a>4.6. ファイルシステムのマウントとアンマウント</h2></div></div></div><p>ファイルシステムは <code class="filename">/</code>
      をルート (根) とする木構造として考えると視覚的に理解しやすいでしょう。
      ルートディレクトリにある
      <code class="filename">/dev</code> や <code class="filename">/usr</code>、
      その他のディレクトリは枝に相当し、
      それらには、<code class="filename">/usr/local</code>
      などのように、さらに枝分かれすることができます。</p><a id="idp81105872" class="indexterm"></a><p>さまざまな理由がありますが、
      ディレクトリをいくつかの異なるファイルシステム上に構築するのが良いでしょう。
      たとえば <code class="filename">/var</code> には、
      <code class="filename">log/</code> や <code class="filename">spool/</code>
      など、さまざまな種類の一時ファイルを置くディレクトリがあるため、
      あふれてしまう可能性があります。
      ルートファイルシステムをあふれさせるのは得策ではありませんので、
      普通は <code class="filename">/var</code> を <code class="filename">/</code>
      から分離します。</p><p>また、次のような場合も、ディレクトリツリーを
      別のファイルシステムに置く理由として良くあげられます。
      それは、たとえば物理的に別のディスクにディレクトリツリーを置く場合、
      <a class="link" href="#network-nfs" title="22.6. NFS">ネットワークファイルシステム (Network File System)</a> や
      CDROM ドライブのような別の仮想ディスクに置くという場合です。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-fstab"></a>4.6.1. <code class="filename">fstab</code> ファイル</h3></div></div></div><a id="idp81114832" class="indexterm"></a><p><code class="filename">/etc/fstab</code> に書かれているファイルシステムは
        (<code class="option">noauto</code> オプションがなければ)
        <a class="link" href="#boot" title="第13章 FreeBSD の起動のプロセス">起動プロセス</a>の途中で
	自動的にマウントされます。</p><p><code class="filename">/etc/fstab</code> ファイルは、
        次のような書式で書かれた行のリストになっています。</p><pre class="programlisting"><em class="replaceable"><code>device</code></em>       <em class="replaceable"><code>/mount-point</code></em> <em class="replaceable"><code>fstype</code></em>     <em class="replaceable"><code>options</code></em>      <em class="replaceable"><code>dumpfreq</code></em>     <em class="replaceable"><code>passno</code></em></pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">device</code></span></dt><dd><p>デバイスの名前 (存在していなければなりません)。
	      <a class="xref" href="#disks-naming" title="16.2. デバイス名">「デバイス名」</a> に説明があります。</p></dd><dt><span class="term"><code class="literal">mount-point</code></span></dt><dd><p>ファイルシステムがマウントするディレクトリの名前
	      (存在していなければなりません)。</p></dd><dt><span class="term"><code class="literal">fstype</code></span></dt><dd><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> に渡されるファイルシステムタイプ。
	      FreeBSD ファイルシステムのデフォルトは
	      <code class="literal">ufs</code> です。</p></dd><dt><span class="term"><code class="literal">options</code></span></dt><dd><p>読み書きするファイルシステムには
	      <code class="option">rw</code>、読み込み専用のファイルシステムには
	      <code class="option">ro</code> を、必要な他のオプションの前に指定します。
	      よく使われるオプションは <code class="option">noauto</code> で、
	      起動時にはマウントされないファイルシステムに使います。
	      その他のオプションは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
	      マニュアルページに載っています。</p></dd><dt><span class="term"><code class="literal">dumpfreq</code></span></dt><dd><p>これは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> が使うもので、
	     どのファイルシステムにダンプが必要なのかを決めます。
             この項目がなければ、0 であるものとみなされます。</p></dd><dt><span class="term"><code class="literal">passno</code></span></dt><dd><p>これはファイルシステムをチェックする順番を決めます。
           ファイルシステムチェックを飛ばしたいファイルシステムには、
           <code class="literal">passno</code> を 0 に設定してください。
	   ルートファイルシステム
	   (どれよりも先にチェックしなければなりません)
	   は <code class="literal">passno</code> を 1 に設定してください。
           他のファイルシステムの <code class="literal">passno</code>
           は 1 以上に設定してください。
	   同じ <code class="literal">passno</code> のファイルシステムがあった場合、
           <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> は可能であれば並行してファイルシステムのチェック
	   を行なおうとします。</p></dd></dl></div><p><code class="filename">/etc/fstab</code>
	ファイルの書式やオプションに関しての詳細は、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-mount"></a>4.6.2. <code class="command">mount</code> コマンド</h3></div></div></div><a id="idp81149008" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> コマンドは、
        ファイルシステムをマウントするために使われるものです。</p><p>基本的には、次のように使います。</p><div class="informalexample"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount device mountpoint</code></strong></pre></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> マニュアルページにはたくさんのオプションが書かれていますが、
        いちばんよく使われるのは次のものです。</p><div class="variablelist"><div class="variablelist-title">マウントオプション</div><dl class="variablelist"><dt><span class="term"><code class="option">-a</code></span></dt><dd><p><code class="filename">/etc/fstab</code>
	      にある全てのファイルシステムをマウントします。
	      例外は <span class="quote">「<span class="quote">noauto</span>」</span> の印がついているものと、
	      <code class="option">-t</code> フラグで除外されたものと、
	      すでにマウントされているファイルシステムです。</p></dd><dt><span class="term"><code class="option">-d</code></span></dt><dd><p>実際にマウントシステムコールする以外のすべてのことをします。
	      このオプションは <code class="option">-v</code>
	      フラグと組み合わせて使い、
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> が実際なにをしようとしているのか調べるのに便利です。</p></dd><dt><span class="term"><code class="option">-f</code></span></dt><dd><p>クリーンでないファイルシステムを強制的にマウントします
	      (危険です)。もしくは、ファイルシステムのマウント状態を
	      読み書き可能から読み込みのみに変更するとき、
	      書き込みアクセスを強制的に取り消します。</p></dd><dt><span class="term"><code class="option">-r</code></span></dt><dd><p>ファイルシステムを読み込み専用でマウントします。
	      これは <code class="option">ro</code> (5.2 より前の
	      FreeBSD では <code class="option">rdonly</code> です)
	      引数を <code class="option">-o</code>
	      オプションに使うのと同じです。</p></dd><dt><span class="term"><code class="option">-t</code>
	    <em class="replaceable"><code>fstype</code></em></span></dt><dd><p>ファイルシステムを指定のファイルシステムタイプでマウントします。
	      または、<code class="option">-a</code> を使った場合、
	      指定したタイプのファイルシステムのみマウントします。</p><p>デフォルトのファイルシステムタイプは
	      <span class="quote">「<span class="quote">ufs</span>」</span> です。</p></dd><dt><span class="term"><code class="option">-u</code></span></dt><dd><p>ファイルシステムのマウントオプションを更新します。</p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>詳細な出力にします。</p></dd><dt><span class="term"><code class="option">-w</code></span></dt><dd><p>ファイルシステムを読み書き可能にマウントします。</p></dd></dl></div><p><code class="option">-o</code> には、
         次のようなオプションを複数カンマで区切って指定します。
         以下に挙げるのはその一部です。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">noexec</span></dt><dd><p>そのファイルシステム上のバイナリの実行を禁止します。
	        セキュリティのために有用なオプションです。</p></dd><dt><span class="term">nosuid</span></dt><dd><p>そのファイルシステム上の setuid や setgid フラグを解釈しません。
	      これもセキュリティのために有用なオプションです。</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-umount"></a>4.6.3. <code class="command">umount</code> コマンド</h3></div></div></div><a id="idp81182800" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a> コマンドは、パラメータとしてマウントポイントの一つ、
	デバイス名、もしくは <code class="option">-a</code> や <code class="option">-A</code>
	といったオプションを取ります。</p><p>いずれの形式でも <code class="option">-f</code> で強制的なアンマウントを行ない、
        <code class="option">-v</code> で詳細な出力を出します。
        ただしほとんどの場合、<code class="option">-f</code> は使わないほうがよいでしょう。
	強制的にファイルシステムをアンマウントすると、
	計算機がクラッシュしたりファイルシステム上部のデータが
	破壊されたりする恐れがあるためです。</p><p>オプション <code class="option">-a</code> と <code class="option">-A</code>
        はマウントされているファイルシステムすべてをアンマウントするのに使います。
	<code class="option">-t</code> にファイルシステムタイプを指定すると、
	指定されたものだけがアンマウントされます。
	また、<code class="option">-A</code> を使うとルートファイルシステムはアンマウントしません。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-processes"></a>4.7. プロセス</h2></div></div></div><p>FreeBSD はマルチタスクのオペレーティングシステムです。
      つまり、1つ以上のプログラムがあたかも同時に動いているかのように見える、
      ということです。動作中のプログラムはそれぞれ
      <em class="firstterm">プロセス</em> と呼ばれます。
      コマンドを実行すると、最低でも1つの新しいプロセスがスタートします。
      システムを正常に機能させるために常に動作しているシステムプロセスもたくさんあります。</p><p>各プロセスは<em class="firstterm">プロセス ID</em>、もしくは
      <em class="firstterm">PID</em> と呼ばれる数字でただ一つに識別されます。
      また、ファイルのように各プロセスには所有者とグループがあります。
      所有者とグループの情報は、
      これまでに見たファイル許可属性を用い、
      そのプロセスが開けるファイルやデバイスを決定するために使われます。
      多くのプロセスには親プロセスもあります。
      親プロセスとは、そのプロセスをスタートさせたプロセスのことです。
      例えば、シェルにコマンドを打ち込んでいるときはシェルがプロセスで、
      動かすコマンドもまたどれもプロセスです。
      このようにして起動するプロセスはそれぞれシェルが親プロセスになります。
      これの例外は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> という特別なプロセスです。
      <code class="command">init</code> は常に最初のプロセスなので、
      PID は必ず 1 になります。
      <code class="command">init</code> は FreeBSD
      がスタートするときカーネルによって自動的に起動されます。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> と <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> という2つのコマンドが
      システム上のプロセスを確認するために特に便利です。
      <code class="command">ps</code>
      コマンドは現在動作中のプロセスのリストを見るために使い、
      PID やプロセスが使っているメモリの量、
      どういうコマンドラインで起動されたのか、
      などを表示させることができます。
      <code class="command">top</code> コマンドは動作中の全てのプロセスを表示し、
      数秒ごとに表示を更新するので、
      計算機がなにをしているのかインタラクティブに知ることができます。</p><p>デフォルトでは、<code class="command">ps</code>
      は動作中かつ所有者が自分のコマンドのみを表示します。
      例えば:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ps</code></strong>
  PID  TT  STAT      TIME COMMAND
  298  p0  Ss     0:01.10 tcsh
 7078  p0  S      2:40.88 xemacs mdoc.xsl (xemacs-21.1.14)
37393  p0  I      0:03.11 xemacs freebsd.dsl (xemacs-21.1.14)
48630  p0  S      2:50.89 /usr/local/lib/netscape-linux/navigator-linux-4.77.bi
48730  p0  IW     0:00.00 (dns helper) (navigator-linux-)
72210  p0  R+     0:00.00 ps
  390  p1  Is     0:01.14 tcsh
 7059  p2  Is+    1:36.18 /usr/local/bin/mutt -y
 6688  p3  IWs    0:00.00 tcsh
10735  p4  IWs    0:00.00 tcsh
20256  p5  IWs    0:00.00 tcsh
  262  v0  IWs    0:00.00 -tcsh (tcsh)
  270  v0  IW+    0:00.00 /bin/sh /usr/X11R6/bin/startx -- -bpp 16
  280  v0  IW+    0:00.00 xinit /home/nik/.xinitrc -- -bpp 16
  284  v0  IW     0:00.00 /bin/sh /home/nik/.xinitrc
  285  v0  S      0:38.45 /usr/X11R6/bin/sawfish</pre><p>この例で分かるとおり、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> の出力はいくつかの行に整形されています。
      <code class="literal">PID</code> は先ほど見たプロセス ID です。
      PID は 1 から順に 99999 まで割り当てられ、
      足りなくなると最初に戻って使い回されます
      (使用中の PID は割り当てられません) 。
      <code class="literal">TT</code> の列はプログラムが動いている tty を示します。
      差し当たって無視してもかまわないでしょう。
      <code class="literal">STAT</code> はプログラムの状態を示しますが、
      これもまた無視してよいでしょう。
      <code class="literal">TIME</code> はプログラムがその CPU
      上で動いている時間の長さです―
      通常はプログラムをスタートさせたときからの経過時間ではありません。
      CPU 上で時間を使う必要があるまでかなりの時間を費すようなプログラムもあるからです。
      最後に、<code class="literal">COMMAND</code>
      はそのプログラムを起動するのに使われたコマンドラインとなります。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> は表示する情報を変えるためのオプションをたくさんサポートしています。
      いちばん便利なのは <code class="literal">auxww</code> でしょう。
      <code class="option">a</code> は自分のプロセスだけではなく、
      動作中のプロセス全部についての情報を表示します。
      <code class="option">u</code> はプロセスの所有者の名前をメモリ使用量と同様に表示します。
      <code class="option">x</code> はデーモンプロセスについての情報を表示し、
      <code class="option">ww</code> で、スクリーンに入りきらないほど長くなったコマンドラインでも省略せず、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> に各プロセスの全コマンドラインを表示させます。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> の出力も同様です。 例は以下の通りです。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>top</code></strong>
last pid: 72257;  load averages:  0.13,  0.09,  0.03    up 0+13:38:33  22:39:10
47 processes:  1 running, 46 sleeping
CPU states: 12.6% user,  0.0% nice,  7.8% system,  0.0% interrupt, 79.7% idle
Mem: 36M Active, 5256K Inact, 13M Wired, 6312K Cache, 15M Buf, 408K Free
Swap: 256M Total, 38M Used, 217M Free, 15% Inuse

  PID USERNAME PRI NICE  SIZE    RES STATE    TIME   WCPU    CPU COMMAND
72257 nik       28   0  1960K  1044K RUN      0:00 14.86%  1.42% top
 7078 nik        2   0 15280K 10960K select   2:54  0.88%  0.88% xemacs-21.1.14
  281 nik        2   0 18636K  7112K select   5:36  0.73%  0.73% XF86_SVGA
  296 nik        2   0  3240K  1644K select   0:12  0.05%  0.05% xterm
48630 nik        2   0 29816K  9148K select   3:18  0.00%  0.00% navigator-linu
  175 root       2   0   924K   252K select   1:41  0.00%  0.00% syslogd
 7059 nik        2   0  7260K  4644K poll     1:38  0.00%  0.00% mutt
...</pre><p>出力は2つのセクションに分かれています。
      ヘッダ (最初の 5 行です) は動作している最新のプロセスの PID、
      システムの平均負荷 (システムがどれくらい忙しいかの指標)、
      システムの稼働時間 (最後の再起動からの時間)
      と現在の時刻を示します。
      ヘッダの中の他の数字は動作中のプロセスの数 (この場合 47 ですね)、
      使われているメモリとスワップ領域の量、
      そしてシステムが異なる CPU 状態に消費した時間と関係します。</p><p>その下には <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> の出力と同じような情報を持った行が続きます。
      前と同様 PID にユーザ名、消費 CPU 時間と実行中のコマンドを知ることができます。
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> を使うとデフォルトでプロセスが使っているメモリ容量も分かります。
      メモリ使用量の欄は2項目に分かれており、
      一方は合計使用量、
      そしてもう一方は実使用量です―合計使用量はアプリケーションが必要としているメモリ量で、
      実使用量はその時点で実際に使われているメモリ量です。
      この例では、<span class="application"><span class="trademark">Netscape</span>®</span> がだいたい
      30 MB の RAM を必要としていますが、
      いまのところ 9 MB しか使っていないことが分かります。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> は自動的に2秒ごとに画面を更新します。
      <code class="option">s</code> オプションを使えば更新間隔を変更することができます。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-daemons"></a>4.8. デーモン、シグナルとプロセス終了</h2></div></div></div><p>エディタを使っている場合、エディタを操作するのは簡単です。
      ファイルを開く、などと動かせばよいのです。
      このように操作できるのは、エディタにそういった機能があり、
      かつエディタが<em class="firstterm">端末</em>に関連づけられているからです。
      一方、ユーザから始終入力があるように設計されていないプログラムもあり、
      そういったプログラムは最初から端末と切り離されます。
      例えば、ウェブサーバは一日中ウェブのリクエストばかり処理するので、
      通常全く入力を必要としません。
      サイトからサイトへとメールを転送するプログラムも、
      こういった種類のアプリケーションの一例です。</p><p>このようなプログラムは、<em class="firstterm">デーモン</em>と呼ばれます。
      デーモンはギリシャ神話の登場人物で、
      善でも悪でもなく、大雑把にいうと、
      人間のために役立つことをしてくれる小さな妖精さんです。
      今日の便利なウェブサーバやメールサーバととてもよく似ていますね。
      このため、長い間 BSD のマスコットはスニーカーをはいてフォークを携えた
      かわいらしい姿のデーモンなのです。</p><p>通常デーモンとして動作するプログラムには末尾に <span class="quote">「<span class="quote">d</span>」</span>
      を持った名前をつける慣習があります。
      <span class="application">BIND</span> は Berkeley Internet Name Domain
      ですが、
      実際実行されるプログラムは <code class="command">named</code> という名前です。
      <span class="application">Apache</span> ウェブサーバのプログラムは
      <code class="command">httpd</code> と呼ばれ、
      ラインプリンタスプーリングデーモンは <code class="command">lpd</code>、
      などなどです。
      これは単なる慣習で、しっかりがっちりとしたルールではありません。
      例えば、<span class="application">Sendmail</span>
      アプリケーションの主なメールデーモンは
      <code class="command">sendmail</code> という名前で、
      連想しそうな <code class="command">maild</code> ではありません。</p><p>時々、デーモンプロセスと通信したいときがあります。
      一つの方法として、それ (に限らずどんな動作中のプロセスでも) に
      <em class="firstterm">シグナル</em>と呼ばれるものを送信する方法です。
      送信可能なシグナルはたくさんあります―特別な意味があるものもあれば、
      アプリケーションによって解釈されるものもありますし、
      アプリケーションがシグナルをどう解釈するかは
      そのアプリケーションの文章を読めば分かるでしょう。
      自分が持っているプロセスにしかシグナルを送ることはできません。
      他人のプロセスに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> や <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">kill</span>(2)</span></a>
      を使ってシグナルを送っても、許可されないでしょう。
      これの例外は <code class="systemitem">root</code> ユーザで、
      ルートユーザは誰のプロセスでもシグナルを送ることができます。</p><p>FreeBSD もアプリケーションにシグナルを送ることがあります。
      アプリケーションを下手に書くと、
      予想外のメモリにアクセスしようとするので、
      FreeBSD がプロセスに <em class="firstterm">セグメンテーション違反</em>
      シグナル (<code class="literal">SIGSEGV</code>) を送ります。
      ある程度の時間が経ったら <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=alarm&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">alarm</span>(3)</span></a>
      システムコールを使って警告してもらうようなアプリケーションには、
      警告シグナル (<code class="literal">SIGALRM</code>) が送信される、
      などです。</p><p>プロセスを止めるためには2つのシグナル、
      <code class="literal">SIGTERM</code> か <code class="literal">SIGKILL</code>
      を使います。
      <code class="literal">SIGTERM</code> は穏かにプロセスを終了させる方法です。
      プロセスはシグナルを<span class="emphasis"><em>受け取る</em></span>ことができ、
      終了させたいのだなということを理解し、
      開いているログファイルを全部を閉じ、
      一般的に終了前にしていたことを終えることができます。
      中断できない処理の途中だと、<code class="literal">SIGTERM</code>
      をプロセスが無視することもあるかもしれません。</p><p>プロセスは <code class="literal">SIGKILL</code> を無視することができません。
      これは、<span class="quote">「<span class="quote">なにをしていようが構わないから今すぐ止まれ</span>」</span>
      というシグナルです。 プロセスに <code class="literal">SIGKILL</code> を送ると、
      FreeBSD はそのプロセスをそこで止めます<a href="#ftn.idp81280848" class="footnote" id="idp81280848"><sup class="footnote">[4]</sup></a>。</p><p>使う可能性のあるシグナルは、他に
      <code class="literal">SIGHUP</code>、<code class="literal">SIGUSR1</code>、と
      <code class="literal">SIGUSR2</code> があります。
      これらは一般的な用途のシグナルで、
      このシグナルが送信されたときアプリケーションによって別のことをします。</p><p>ウェブサーバの設定ファイルを変更したとしましょう―ウェブサーバに新しい設定を再読み込みさせたいですね。
      <code class="command">httpd</code> を止めて再起動することもできますが、
      そうするとウェブサーバは一瞬ながら停止してしまいますし、
      ちょっとでも止まってほしくないこともあるでしょう。
      ほとんどのデーモンは <code class="literal">SIGHUP</code>
      シグナルに対して設定ファイルを再読み込みする反応を返すよう書かれています。
      従って、<code class="command">httpd</code> を止めて再起動する代わりに、
      <code class="literal">SIGHUP</code> シグナルを送りましょう。
      これらのシグナルへの標準的な反応というものがないために、
      デーモンごとに行動が違うので、
      疑問があれば必ずそのデーモンの文書を読んでください。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> コマンドを使って送るシグナルはこの例をご覧ください。</p><div class="procedure"><a id="idp81286736"></a><div class="procedure-title">手順4.1 プロセスにシグナルを送る</div><p>この例では、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> にシグナルを送る方法を示します。
	<code class="command">inetd</code> の設定ファイルは
	<code class="filename">/etc/inetd.conf</code> で、
	<code class="command">inetd</code> は <code class="literal">SIGHUP</code>
	が送信されるとこの設定ファイルを再読み込みします。</p><ol class="procedure" type="1"><li class="step"><p>シグナルを送りたいプロセスのプロセス ID を探します。
	  それには <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> と <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=grep&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">grep</span>(1)</span></a> を使います。
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=grep&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">grep</span>(1)</span></a> コマンドは出力を検索するために使い、
	  指定した文字列を探します。
	  このコマンドは一般ユーザで実行しますが、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> は <code class="systemitem">root</code> で実行されているので、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> には <code class="option">ax</code>
	  オプションを与える必要があります。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ps -ax | grep inetd</code></strong>
  198  ??  IWs    0:00.00 inetd -wW</pre><p>ということで、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> の PID は 198 です。
	  <code class="literal">grep inetd</code> コマンドがこの出力に出てくる場合もあります。
	  それは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> が動作中のプロセスのリストを見つける方法によります。</p></li><li class="step"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> を使ってシグナルを送ります。
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> は <code class="systemitem">root</code> で起動されているために、
	  まず <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> を使って <code class="systemitem">root</code>
	  にならなければなりません。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su</code></strong>
<code class="prompt">Password:</code>
<code class="prompt">#</code> <strong class="userinput"><code>/bin/kill -s HUP 198</code></strong></pre><p>大部分の <span class="trademark">UNIX</span>® コマンドと同じく、
	  成功したら <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> は何の出力も表示しません。
	  自分のものではないプロセスにシグナルを送ると、
	  <span class="errorname">kill:
	    <em class="replaceable"><code>PID</code></em>: Operation not
	    permitted</span> と表示されます。
	  PID を打ち間違えると、
	  悪いことに間違ったプロセスにシグナルを送ってしまうか、
	  もしくは運がよければその時点で使われていない PID
	  にシグナルを送ったことになり、<span class="errorname">kill:
	    <em class="replaceable"><code>PID</code></em>: No such process</span>
	  と表示されます。</p><div xmlns="" class="note"><h3 class="admontitle">なぜ <code xmlns="http://www.w3.org/1999/xhtml" class="command">/bin/kill</code> を使うんでしょう?: </h3><p xmlns="http://www.w3.org/1999/xhtml">多くのシェルは <code class="command">kill</code>
	    コマンドを組み込みコマンドとして備えています。
	    つまり、<code class="filename">/bin/kill</code> を実行するのではなく、
	    シェルが直接シグナルを送ります。
	    これはとても便利なのですが、
	    シェルが違うと送るシグナルの名前の指定の仕方が違います。
	    シェルによって異なるシグナルの指定の仕方を全部覚えようとはせずに、
	    <code class="command">/bin/kill ...</code>
	    コマンドを直接使うほうが簡単です。</p></div></li></ol></div><p>他のシグナルの送り方はほとんど同じで、
      コマンドラインの <code class="literal">TERM</code> や <code class="literal">KILL</code>
      を必要に応じて変えるだけです。</p><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">システム上のランダムプロセスを終了させるのはよくありません。
        特に、プロセス ID が 1 の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> は特別です。
	<code class="command">/bin/kill -s KILL 1</code>
	を使うといとも簡単にシステムをシャットダウンさせることができます。
	<span class="keycap"><strong>Return</strong></span> を押す<span class="emphasis"><em>前</em></span>に
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> を実行する引数を二重にチェックする<span class="emphasis"><em>癖</em></span>をつけてください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="shells"></a>4.9. シェル</h2></div></div></div><a id="idp81337808" class="indexterm"></a><a id="idp81338320" class="indexterm"></a><p>FreeBSD では日々の作業のほとんどは、
      「シェル」と呼ばれるコマンドラインインタフェイスを通して行われます。
      シェルの主な仕事はコマンドを入力チャンネルから受け取り、
      そしてそれらを実行することです。
      大部分のシェルはさらに組み込みの機能を持っていて、日々の作業、
      ファイル管理やファイル名の展開、コマンドライン編集、
      コマンドマクロ、環境変数などに便利です。
      FreeBSD には <code class="command">sh</code> (Bourne Shell) や
      <code class="command">tcsh</code> (高機能 C-shell) が含まれています。
      また、
      これ以外にも <code class="command">zsh</code> や <code class="command">bash</code>
      などたくさんのシェルが FreeBSD Ports Collection から利用可能です。</p><p>「あなたは、どのシェルを使いますか?」という質問は、
      まったく趣味の問題です。
      あなたが C のプログラマだったとすれば、
      <code class="command">tcsh</code> のような C 風のシェルの方が落ち着くかもしれません。
      Linux から来た人や <span class="trademark">UNIX</span>® のコマンドラインインタフェイスになじみがなければ、
      <code class="command">bash</code> を試すのも良いでしょう。
      ポイントは、それぞれのシェルは、
      あなたの好みの作業環境で利用できる (もしくはできない) 独自の機能を持っているということ、
      そして、どのシェルを使うことにするかを決めるのはあなた自身だということです。</p><p>シェルの一般的な機能の一つに、ファイル名の補完があります。
      コマンドやファイル名の最初の数文字を与えて <span class="keycap"><strong>Tab</strong></span> キーを押すことで、
      シェルにコマンドやファイル名の残りの部分を自動的に補完させることができます。
      例をあげましょう。 二つのファイル
      <code class="filename">foobar</code>, <code class="filename">foo.bar</code> が
      あったとします。 ここで <code class="filename">foo.bar</code>
      の方を削除するには、
      <code class="command">rm fo[Tab].[Tab]</code> と入力します。</p><a id="idp81348944" class="indexterm"></a><p>するとシェルは <code class="command">rm
      foo[BEEP].bar</code> と出力するでしょう。</p><p>[BEEP] のところはコンソールのベル (訳注: 通常はビープ音が鳴ります) です。
      これは複数のファイルがマッチしたため、
      ファイル名の補完を完全に行なえなかったことを伝えています。
      <code class="filename">foobar</code> と
      <code class="filename">foo.bar</code> は
      両方とも <code class="literal">fo</code> ではじまるため、
      補完できるのは <code class="literal">foo</code> までです。
      ここで <code class="literal">.</code> を入力して <span class="keycap"><strong>Tab</strong></span> を押せば、
      シェルはファイル名の残りの部分を補完できます。</p><p>もう一つあげられるシェルの特徴として、環境変数があります。
      環境変数とは、シェルの環境変数空間におけるキーと値とのペアです。
      この変数空間は、そのシェルから起動されたプログラムから参照でき、
      それを利用してプログラムの設定を保存するのに利用されます。
     下の表は、一般的な環境変数とその意味を示したものです。</p><a id="idp81353424" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>変数名</th><th>意味</th></tr></thead><tbody><tr><td><code class="envar">USER</code></td><td>現在のログインユーザのユーザ名。</td></tr><tr><td><code class="envar">PATH</code></td><td>コロンで区切られた実行ファイル探索のための
	      ディレクトリのリスト。</td></tr><tr><td><code class="envar">DISPLAY</code></td><td>接続する X11 ディスプレイのネットワーク名 (存在する場合のみ)。</td></tr><tr><td><code class="envar">SHELL</code></td><td>現在のシェル。</td></tr><tr><td><code class="envar">TERM</code></td><td>ユーザの端末種名。
              端末のケーパビリティを決定するのに使われる。</td></tr><tr><td><code class="envar">TERMCAP</code></td><td>種々の端末の機能を実現する端末のエスケープコードの
	      データベースのエントリ。</td></tr><tr><td><code class="envar">OSTYPE</code></td><td>オペレーティングシステムの種別。
              たとえば FreeBSD。</td></tr><tr><td><code class="envar">MACHTYPE</code></td><td>システムが動作している CPU のアーキテクチャ。</td></tr><tr><td><code class="envar">EDITOR</code></td><td>ユーザの選んだテキストエディタ。</td></tr><tr><td><code class="envar">PAGER</code></td><td>ユーザの選んだテキストページャ。</td></tr><tr><td><code class="envar">MANPATH</code></td><td>コロンで区切られたマニュアルページ探索のための
	      ディレクトリのリスト。</td></tr></tbody></table></div><a id="idp81375568" class="indexterm"></a><p>環境変数をセットする方法は、
      それぞれのシェルごとに多少異なります。
      たとえば、<code class="command">tcsh</code> や <code class="command">csh</code> 等の C シェルでは
      <code class="command">setenv</code> を使います。
      <code class="command">sh</code> や <code class="command">bash</code> 等の Bourne シェルでは
      <code class="command">set</code> と <code class="command">export</code>
      を使います。
      たとえば <code class="command">csh</code> か <code class="command">tcsh</code> で
      <code class="envar">EDITOR</code> 環境変数の値を
      <code class="filename">/usr/local/bin/emacs</code> に
      セットするか変更するには、次のようにします。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setenv EDITOR /usr/local/bin/emacs</code></strong></pre><p>Bourne シェルでは次のようになります。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>export EDITOR="/usr/local/bin/emacs"</code></strong></pre><p>ほとんどのシェルでは、
      コマンドライン中の変数名の前に <code class="literal">$</code> 文字を置くことで、
      環境変数を展開させることができます。
      たとえば、
      <code class="command">echo $TERM</code> は <code class="envar">$TERM</code> が
      セットされている内容を表示します。
      それはシェルが <code class="envar">$TERM</code> を展開して
      <code class="command">echo</code> に渡しているからです。</p><p>シェルはさまざまな特殊文字を、特別なデータを表すものとして扱います。
      その特殊文字はメタキャラクタと呼ばれます。
      もっとも一般的なものは <code class="literal">*</code> で、
      これはファイル名に含まれる、あらゆる文字を表します。
      これらの特殊なメタキャラクタはファイル名の展開に使われます。
      たとえば、<code class="command">echo *</code> と入力すると
      <code class="command">ls</code> と入力したのとほとんど同じ結果を得られます。
      これはシェルが <code class="literal">*</code> とマッチするすべてのファイルを
      受け取って <code class="command">echo</code> のコマンドラインに渡し、表示するからです。</p><p>これらの特殊文字をシェルに解釈させないようにするため、
      特殊文字の前にバックスラッシュ文字 (<code class="literal">\</code>)
      を置くことができます。
      <code class="command">echo $TERM</code> は、
      あなたの端末が何にセットされているかを表示します。
      <code class="command">echo \$TERM</code> は <code class="envar">$TERM</code> と
      そのまま表示します。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="changing-shells"></a>4.9.1. シェルの変更</h3></div></div></div><p>シェルを変更する一番簡単な方法は <code class="command">chsh</code>
	コマンドを使うことです。 <code class="command">chsh</code> を実行すると
	環境変数 <code class="envar">EDITOR</code> で示されたエディタが立ち上がります。
	環境変数をセットしていなかった時は
        <code class="command">vi</code> が立ち上がります。
	<span class="quote">「<span class="quote">Shell:</span>」</span> の行を適宜変更してください。</p><p><code class="command">chsh</code> に
        <code class="option">-s</code> オプションをつけると、
        エディタを起動せずにシェルを変更することが可能です。
        たとえば、シェルを <code class="command">bash</code> に変えたいなら、次のようにしてください。
      </p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chsh -s /usr/local/bin/bash</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">使おうと思っているシェルは<span class="emphasis"><em>必ず</em></span>
	  <code class="filename">/etc/shells</code> 中に書かれているものでなければなりません。
	  シェルを <a class="link" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">Ports Collection</a>
	  からインストールしていたのであれば、すでにそれは行なわれていますが、
	  手動でインストールした場合は、それを忘れずに行ってください。</p><p xmlns="http://www.w3.org/1999/xhtml">たとえば、<code class="command">bash</code>
          を手動で
          <code class="filename">/usr/local/bin</code>
          にインストールした場合
          以下のようにする必要があります。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "/usr/local/bin/bash" &gt;&gt; /etc/shells</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">そして <code class="command">chsh</code> を実行してください。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="editors"></a>4.10. テキストエディタ</h2></div></div></div><a id="idp81442000" class="indexterm"></a><a id="idp81442512" class="indexterm"></a><p>さまざまな FreeBSD の設定は、テキストファイルを編集することで行われます。
      そのため、テキストエディタの扱いに慣れると良いでしょう。
      FreeBSD には、基本システムの一部として二、三提供されるものと、
      Ports Collection から利用できる、たくさんのテキストエディタが用意されています。
    </p><a id="idp81443408" class="indexterm"></a><a id="idp81444304" class="indexterm"></a><p>最も学習が簡単なエディタは、
      easy editor の略で <span class="application">ee</span> と呼ばれるものです。
      <span class="application">ee</span> を立ち上げるには、コマンドラインから
      <code class="command">ee <em class="replaceable"><code>filename</code></em></code> と入力します。
      ここで <em class="replaceable"><code>filename</code></em> は、
      編集しようとしているファイルの名前です。
      たとえば、<code class="filename">/etc/rc.conf</code> を編集するには
      <code class="command">ee /etc/rc.conf</code> と入力します。
      一旦 <code class="command">ee</code> の中に入れば、
      エディタの機能を操作するコマンドはすべてディスプレイの上部に
      表示されています。キャレット <code class="literal">^</code> 文字は
      キーボードの <span class="keycap"><strong>Ctrl</strong></span> キーを意味しますので、
      <code class="literal">^e</code> はキーのコンビネーション
      <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>e</strong></span>
      を押すという意味になります。
      <span class="application">ee</span> を終了するには <span class="keycap"><strong>Esc</strong></span> キーを押し、
      そして leave editor を選びます。
      ファイルが更新されていたときは、
      エディタは変更をセーブするかどうかプロンプトを出します。</p><a id="idp81480784" class="indexterm"></a><a id="idp81481680" class="indexterm"></a><a id="idp81487184" class="indexterm"></a><a id="idp81488080" class="indexterm"></a><p>FreeBSD には、基本システムの一部として
      <span class="application">vi</span>、
      一方 <span class="application">Emacs</span> や <span class="application">vim</span>
      といった他のエディタは Ports Collection の一部として、
      より強力なテキストエディタが用意されています
      (<code class="filename">editors/emacs</code>, <code class="filename">editors/vim</code>)。
      これらのエディタはやや学習が複雑ですが、より強力で高い機能性を提供します。
      しかし、あなたが多量のテキストを編集することを考えているなら、
      <span class="application">vim</span> や <span class="application">Emacs</span>
      といった強力なエディタを習得することは、
      より多くの時間を節約することでしょう。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-devices"></a>4.11. デバイスとデバイスノード</h2></div></div></div><p>デバイスとはシステム上のハードウェアに関するものに対してよく使われる用語で、
      ディスクやプリンタ、グラフィックカードやキーボードが含まれます。
      FreeBSD が起動するとき、FreeBSD
      が表示しているものの大部分は検出されたデバイスです。
      <code class="filename">/var/run/dmesg.boot</code>
      を眺めれば起動メッセージを読み直すことができます。</p><p>例えば、<code class="filename">acd0</code> は最初の
      IDE CDROM ドライブで、<code class="filename">kbd0</code>
      はキーボードを表します。</p><p><span class="trademark">UNIX</span>® オペレーティングシステムにおけるデバイスのほとんどは、
      デバイスノードと呼ばれる <code class="filename">/dev</code>
      ディレクトリにあるスペシャルファイルを通してアクセスしなければなりません。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81496912"></a>4.11.1. デバイスノードを作成する</h3></div></div></div><p>新しいデバイスをシステムにつけ足したり、
        追加デバイスのサポートをコンパイルして加えたりするときは、
	デバイスノードを作成しなければなりません。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81497936"></a>4.11.1.1. <code class="literal">DEVFS</code> (デバイスファイルシステム: Device File System)</h4></div></div></div><p>デバイスファイルシステム <code class="literal">DEVFS</code> は、
	  グローバルファイルシステム名前空間の中のカーネルデバイス名前空間へのアクセスを提供します。
	  デバイスノードを作成したり変更したりするのではなく、
	  <code class="literal">DEVFS</code> がこの特別なファイルシステムを管理するのです。</p><p>詳しくは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> マニュアルページをご覧ください。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-more-information"></a>4.12. さらに詳しい情報を得るには...</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="basics-man"></a>4.12.1. オンラインマニュアル</h3></div></div></div><a id="idp81507792" class="indexterm"></a><p>FreeBSD についてのもっとも包括的な文書は、
        マニュアルページの形式になっているものです。
        FreeBSD システム上のほとんどすべてのプログラムには、
        基本的な操作方法とさまざまな引数を説明しているリファレンスマニュアルが添付されています。
        これらのマニュアルは <code class="command">man</code> コマンドで見ることができます。<code class="command">man</code>
        コマンドの使い方は簡単です。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>man コマンド名</code></strong></pre><p><code class="literal">コマンド名</code>
        のところには、知りたいコマンドの名前を入れます。
        たとえば <code class="command">ls</code> コマンドについて知りたい場合には、
        次のように入力します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>man ls</code></strong></pre><p>オンラインマニュアルは、
        セクション番号で分類されています。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>ユーザコマンド</p></li><li class="listitem"><p>システムコールとエラー番号</p></li><li class="listitem"><p>C のライブラリ関数</p></li><li class="listitem"><p>デバイスドライバ</p></li><li class="listitem"><p>ファイル形式</p></li><li class="listitem"><p>ゲームや娯楽</p></li><li class="listitem"><p>さまざまな情報</p></li><li class="listitem"><p>システムの管理と操作のためのコマンド</p></li><li class="listitem"><p>カーネル開発者のための情報</p></li></ol></div><p>時折、
        同じトピックがオンラインマニュアルの複数のセクションに記載されている場合があります。
        たとえば、<code class="command">chmod</code> ユーザコマンドと
        <code class="function">chmod()</code>
        システムコールの場合がそれに該当します。
        この場合、<code class="command">man</code> コマンドにセクション番号を与えることで、
        どちらを参照したいかを指定することができます。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>man 1 chmod</code></strong></pre><p>上のようにすれば、
        ユーザコマンド <code class="command">chmod</code>
        のマニュアルページが表示されます。
        オンラインマニュアルの特定セクションへの参照は、
        慣習的に書かれている文書で括弧の中に示されます。
        すなわち、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a> は <code class="command">chmod</code>
        ユーザコマンドを、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chmod</span>(2)</span></a>
        はシステムコールの方を示しています。</p><p>コマンドの名前を知っていて、
        単純にその使い方を知りたい場合はここまでの説明で十分でしょう。
        しかし、
        もしコマンドの名前を思い出せない場合にはどうしたら良いのでしょうか?
        <code class="command">man</code> に <code class="option">-k</code> スイッチをつければ、
        コマンド解説 (description) の文章から、
        指定したキーワードを検索することができます。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>man -k mail</code></strong></pre><p>このコマンドにより、
        <span class="quote">「<span class="quote">mail</span>」</span>
        というキーワードをコマンド解説に含むコマンドの一覧が表示されます。
        実際には、これは <code class="command">apropos</code> コマンドを使う場合と同等の機能です。</p><p>それでは、<code class="filename">/usr/bin</code>
        にあるさまざまなコマンドすべてを見ていて、
        それらが実際にどう働くのかが、まったく見当もつかないときには
        どうしたら良いでしょう?
        そのときは単純に、</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /usr/bin</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>man -f *</code></strong></pre><p>とするか、あるいは同じ働きをする</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /usr/bin</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>whatis *</code></strong></pre><p>としてください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="basics-info"></a>4.12.2. GNU の Info ファイル</h3></div></div></div><a id="idp81555024" class="indexterm"></a><p>FreeBSD には Free Software Foundation (FSF)
        によるアプリケーションや
        ユーティリティがたくさん含まれています。
        これらのプログラムには、マニュアルページに加えて
        <code class="literal">info</code> ファイルと呼ばれる
        ハイパーテキスト形式の文書が付属しています。
        この文書は <code class="command">info</code> コマンド、
        あるいは <span class="application">emacs</span> をインストールしているなら
        <span class="application">emacs</span> の info
        モードで読むことができます。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=info&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">info</span>(1)</span></a> コマンドを使うには、単に次のように入力します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>info</code></strong></pre><p>
        <code class="literal">h</code> と入力すると、
        簡単な手引きを読むことができます。
        クイックコマンドリファレンスは <code class="literal">?</code>
        を入力してください。</p></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp80506448" class="footnote"><p><a href="#idp80506448" class="para"><sup class="para">[1] </sup></a><code class="literal">i386</code> が意味しているのはそういうことです。
	    FreeBSD を Intel の 386 CPU 上で動かしていなくても、
	    ここは <code class="literal">i386</code> になります。
	    ここで表示されるのはプロセッサの種類ではなく、プロセッサの
	    <span class="quote">「<span class="quote">アーキテクチャ</span>」</span>です。</p></div><div id="ftn.idp80515920" class="footnote"><p><a href="#idp80515920" class="para"><sup class="para">[2] </sup></a>スタートアップスクリプトは、
	    起動時に FreeBSD が自動的に実行するプログラムです。
	    主な機能は、全プログラムが動作するように設定を行なうことと、
	    バックグラウンドで動作するように設定した
	    有用なサービスを開始することです。</p></div><div id="ftn.idp80539088" class="footnote"><p><a href="#idp80539088" class="para"><sup class="para">[3] </sup></a>FreeBSD のコンソールとキーボードドライバの詳細全体に
	    ついて、それなりに技術的かつ正確な説明は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syscons&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">syscons</span>(4)</span></a>,
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atkbd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atkbd</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a> および
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kbdcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kbdcontrol</span>(1)</span></a> のマニュアルにあります。
	    ここではその詳細には立ち入りませんが、
	    興味をもった方は、いつでもマニュアルを参照して、
	    動作に関する詳細な説明を読むことができます。</p></div><div id="ftn.idp81280848" class="footnote"><p><a href="#idp81280848" class="para"><sup class="para">[4] </sup></a>正確ではありません―中断できないものはわずかながら存在します。
	  例えば、プロセスがネットワーク上の別の計算機にあるファイルを読もうとして、
	  その計算機がなんらかの理由
	  (電源を落とされたとか、ネットワークに問題があるとか)
	  でいなくなった場合、そのプロセスは<span class="quote">「<span class="quote">中断不可能</span>」</span>と言われます。
	  最終的にはそのプロセスはタイムアウトします。普通は2分後です。
	  タイムアウトした直後、そのプロセスは終了します。</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports"></a>第5章 アプリケーションのインストール - packages と ports</h2></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#ports-synopsis">5.1. この章では</a></span></dt><dt><span class="sect1"><a href="#ports-overview">5.2. ソフトウェアのインストール</a></span></dt><dt><span class="sect1"><a href="#ports-finding-applications">5.3. ソフトウェアの探し方</a></span></dt><dt><span class="sect1"><a href="#pkgng-intro">5.4. <span class="application">pkg</span> によるバイナリ
      package の管理</a></span></dt><dt><span class="sect1"><a href="#ports-using">5.5. Ports Collection の利用</a></span></dt><dt><span class="sect1"><a href="#ports-poudriere">5.6. <span class="application">Poudriere</span> を用いた
      package の構築</a></span></dt><dt><span class="sect1"><a href="#ports-nextsteps">5.7. インストール後の作業</a></span></dt><dt><span class="sect1"><a href="#ports-broken">5.8. うまく動作しない ports に遭遇した場合には</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-synopsis"></a>5.1. この章では</h2></div></div></div><a id="idp81563088" class="indexterm"></a><a id="idp81563600" class="indexterm"></a><p>FreeBSD の基本システムには数多くのシステムツールが含まれています。
      FreeBSD は、サードパーティ製のソフトウェアの導入を支援するために、
      ソースコードをコンパイルしてインストールする Ports Collection と、
      コンパイル済みのバイナリをインストールする packages
      という相補的な 2 つの技術を提供しています。
      どちらのシステムを用いても、
      ローカルメディアやネットワーク上からソフトウェアをインストールできます。</p><p>この章を読むと、以下のことがわかります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>packages と ports の違い</p></li><li class="listitem"><p>FreeBSD に移植されたサードパーティ製のソフトウェアの探し方</p></li><li class="listitem"><p><span class="application">pkg</span> を用いてバイナリ
	  package を管理する方法</p></li><li class="listitem"><p>Ports Collection を用いてサードパーティ製のソフトウェアをソースコードから構築する方法</p></li><li class="listitem"><p>インストール後の設定のために、
	  アプリケーションとともにインストールされたファイルを探す方法</p></li><li class="listitem"><p>ソフトウェアのインストールに失敗した場合に、どうしたらよいか</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-overview"></a>5.2. ソフトウェアのインストール</h2></div></div></div><p><span class="trademark">UNIX</span>® システムでは、
      サードパーティ製ソフトウェアの典型的なインストール手順は以下のようになります。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>ソースコード、
	  またはバイナリ形式で配布されているソフトウェアを探し出し、
	  ダウンロードする。</p></li><li class="step"><p>配布時のフォーマットからソフトウェアを取り出す。
	  一般的には <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=compress&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">compress</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gzip</span>(1)</span></a> または <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bzip2&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">bzip2</span>(1)</span></a>
	  で圧縮された tarball です。</p></li><li class="step"><p><code class="filename">INSTALL</code> または
	  <code class="filename">README</code> ファイル、あるいは
	  <code class="filename">doc/</code>
	  サブディレクトのファイルからドキュメントを探しだし、
	  ソフトウェアのインストール方法を調べる。</p></li><li class="step"><p>ソース形式でソフトウェアが配布されている場合はコンパイルを行う。
	  ここでは、<code class="filename">Makefile</code> の編集、
	  または、<code class="command">configure</code>
	  スクリプトの実行を伴うことがあります。 </p></li><li class="step"><p>ソフトウェアの動作を確認し、インストールする。</p></li></ol></div><p>インストールしているソフトウェアパッケージが、
      FreeBSD を意識して移植されたものでなかったり、
      FreeBSD 上でテストされていなければ、
      正しくインストールが行われ、適切に動くようにコードを調べ、
      編集する必要があるかもしれません。
      この文書を書いている時点では、24,000
      を越えるサードパーティ製アプリケーションが利用可能です。</p><p>FreeBSD の package は、コンパイル済みのアプリケーションの全コマンド、
      各種設定ファイルやドキュメントを含んでいます。
      <span class="application">pkg</span>
      コマンドでは、<code class="command">pkg install</code> といったコマンドで、
      package を扱うことができます。</p><p>FreeBSD port は、
      アプリケーションをソースコードからコンパイルする際の処理を自動化するように設計されたファイルの集まりです。
      port を構成するファイルは、
      自動的にアプリケーションをダウンロードし、展開、パッチ作業、
      コンパイル、そしてインストールを行うために必要な情報を含んでいます。</p><p>さらに ports システムは、FreeBSD の package
      管理コマンドで扱うことのできる packages を生成できます。</p><p>packages と ports は依存関係を理解します。
      package または port
      を用いてアプリケーションをインストールすると、
      依存するライブラリがまだインストールされていない場合には、
      最初にライブラリが自動的にインストールされます。</p><p>2 つの技術は類似していますが、
      packages と ports にはそれぞれ独自の特徴があります。
      それぞれのアプリケーションのインストールに対する必要要件に応じてどちらかを選択してください。</p><div class="itemizedlist"><div class="itemizedlist-title">package の利点</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>一般的に、あるアプリケーションの package の tarball は、
          ソースコードを含む tarball より小さなサイズとなります。</p></li><li class="listitem"><p>packages はコンパイルの時間を必要としません。
	  このことは、遅いシステム上で <span class="application">Mozilla</span>,
  	  <span class="application">KDE</span>,
	  または <span class="application">GNOME</span>
	  といった大きなアプリケーションを扱う場合に重要となります。</p></li><li class="listitem"><p>packages を用いれば、
	  ソフトウェアのコンパイルに関する知識は必要ありません。</p></li></ul></div><div class="itemizedlist"><div class="itemizedlist-title">port の利点</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>packages は、通常最も多くのシステムで実行できるように、
          非常に保守的な設定で構築されています。
          port からコンパイルすることで、
          コンパイルオプションを指定できます。 </p></li><li class="listitem"><p>アプリケーションのなかには、
	  どの機能をインストールするかをコンパイル時に設定するものがあります。
	  たとえば、<span class="application">Apache</span> は多種多様な
	  ビルトインオプションを設定できます。</p><p>設定を区別するために、同じアプリケーションに対して
          複数の packages が存在することがあります。
          たとえば、<span class="application">Ghostscript</span> は
          <span class="application">Xorg</span> がインストールされているかどうかにより、
          <code class="filename">ghostscript</code> package と
          <code class="filename">ghostscript-nox11</code> package
          が選択可能となっています。
          アプリケーションのコンパイルオプションが 1 つもしくは
	  2 つ以上になると、
          複数の packages を用意することは困難になります。</p></li><li class="listitem"><p>ライセンス条項で、
	  バイナリでの配布を禁止しているソフトウェアがあります。
	  このようなソフトウェアはソースコードで配布される必要があり、
	  エンドユーザがコンパイルしなくてはなりません。</p></li><li class="listitem"><p>バイナリ配布を信用していない人や、
	  潜在的な問題点を見つけ出すためにソースコードを読むことを好む人がいます。</p></li><li class="listitem"><p>カスタマイズしたパッチを適用するためには、
	  ソースコードが必要になります。</p></li></ul></div><p>ports の更新状況を把握するために、
      <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">FreeBSD ports メーリングリスト</a> や <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports-bugs" target="_top">FreeBSD ports bugs メーリングリスト</a> を購読するとよいでしょう。</p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">アプリケーションをインストールする前に、
	そのアプリケーションに関連したセキュリティ上の問題がないことを <a class="link" href="http://vuxml.freebsd.org/" target="_top">http://vuxml.freebsd.org/</a>
	で確認するか、<code class="command">pkg audit -F</code> と入力して、
	インストールされているアプリケーションに既知の脆弱性がないことを確認してください。</p></div><p>この章では、packages と ports を用いた FreeBSD 上での
      サードパーティ製ソフトウェアのインストール方法や管理方法について説明します。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-finding-applications"></a>5.3. ソフトウェアの探し方</h2></div></div></div><p>FreeBSD 上で利用可能なアプリケーションのリストは常に増えています。
      インストールするソフトウェアを探す方法はたくさん用意されています。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD ウェブサイトは、
	  利用可能なすべてのアプリケーションの最新の一覧を、検索できる形で
	  <a class="link" href="../../../../ja/ports/index.html" target="_top">http://www.FreeBSD.org/ja/ports/</a>
	  において公開しています。
	  ports はアプリケーションの名前や、ソフトウェアのカテゴリで検索出来ます。</p></li><li class="listitem"><a id="idp81630544" class="indexterm"></a><p>Dan Langille は、包括的な検索ユーティリティや
	  Ports Collection にあるアプリケーションの変更点を追跡する
	  <a class="link" href="http://www.FreshPorts.org/" target="_top">FreshPorts.org</a>
	  を公開しています。
	  登録したユーザは、監視している ports  がアップデートされた時に、
	  そのことを自動的にメールで知らせてくれるような、
	  カスタマイズ可能な監視リストを使うことができます。</p></li><li class="listitem"><a id="idp81632336" class="indexterm"></a><p>アプリケーションを見つけることが難しい場合には、<a class="link" href="http://www.sourceforge.net/" target="_top">SourceForge.net</a>
	  または <a class="link" href="http://www.github.com/" target="_top">GitHub.com</a>
	  のようなサイトで探してみてください。
	  その後、そのアプリケーションが ports で利用可能かどうかを <a class="link" href="../../../../ja/ports/index.html" target="_top">FreeBSD サイト</a>
	  で調べて下さい。</p></li><li class="listitem"><a id="idp81635152" class="indexterm"></a><p><a id="pkg-search"></a>バイナリ package
	  リポジトリでアプリケーションを探すには、
	  以下のように実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg search <em class="replaceable"><code>subversion</code></em></code></strong>
git-subversion-<em class="replaceable"><code>1.9.2</code></em>
java-subversion-<em class="replaceable"><code>1.8.8_2</code></em>
p5-subversion-<em class="replaceable"><code>1.8.8_2</code></em>
py27-hgsubversion-<em class="replaceable"><code>1.6</code></em>
py27-subversion-<em class="replaceable"><code>1.8.8_2</code></em>
ruby-subversion-<em class="replaceable"><code>1.8.8_2</code></em>
subversion-<em class="replaceable"><code>1.8.8_2</code></em>
subversion-book-<em class="replaceable"><code>4515</code></em>
subversion-static-<em class="replaceable"><code>1.8.8_2</code></em>
subversion16-<em class="replaceable"><code>1.6.23_4</code></em>
subversion17-<em class="replaceable"><code>1.7.16_2</code></em></pre><p>package 名にはバージョン番号が含まれます。
	  また、python ベースの ports では、
	  共に構築された python のバージョン番号も含まれます。
	  ports によっては、複数のバージョンを利用できるものがあります。
	  <span class="application">subversion</span> では、
	  複数のバージョンを利用できますが、
	  異なるコンパイルオプションで構築されたものも利用できます。
	  インストールする package を指定する際には、
	  アプリケーションに、port ツリーのパスである、
	  port のオリジンを指定すると良いでしょう。
	  <code class="command">pkg search</code> に <code class="option">-o</code>
	  オプションを付けて、実行してください。
	  各 package のオリジンの一覧が表示されます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg search -o <em class="replaceable"><code>subversion</code></em></code></strong>
devel/git-subversion
java/java-subversion
devel/p5-subversion
devel/py-hgsubversion
devel/py-subversion
devel/ruby-subversion
devel/subversion16
devel/subversion17
devel/subversion
devel/subversion-book
devel/subversion-static</pre><p><code class="command">pkg search</code> は、
	  リポジトリデータベースの説明やその他のフィールドにおいて、
	  シェルグロブ、正規表現、完全一致にも対応しています。
	  詳細については、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/pkg/pkg-descr">ports-mgmt/pkg</a> または
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/pkg-devel/pkg-descr">ports-mgmt/pkg-devel</a> のインストール後、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg-search&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg-search</span>(8)</span></a> をご覧ください。</p></li><li class="listitem"><p>Ports Collection がすでにインストールされていれば、
	  ports ツリーのローカルバージョンを調べることができます。
	  port がどのカテゴリに分類されているのかを知りたければ、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=whereis&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">whereis</span>(1)</span></a> コマンドで調べることができます。
	  <code class="command">whereis <em class="replaceable"><code>ファイル</code></em></code>
	  と入力してください。<em class="replaceable"><code>ファイル</code></em>
	  の部分にはインストールを考えているプログラム名を入れます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>whereis lsof</code></strong>
lsof: /usr/ports/sysutils/lsof</pre><p>さらに、以下の例のように <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=echo&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">echo</span>(1)</span></a>
	  を使って調べることもできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo /usr/ports/*/*lsof*</code></strong>
/usr/ports/sysutils/lsof</pre><p>この方法では <code class="filename">/usr/ports/distfiles</code>
	  以下にダウンロードされたファイル名にもマッチします。</p></li><li class="listitem"><p>また、Ports Collection に備わっている検索機能を利用して
	  port を検索する方法もあります。
	  この検索機能を利用するには、
	  <span class="application">cd</span> コマンドを用いて
	  <code class="filename">/usr/ports</code>
	  ディレクトリに移動し、<code class="command">make search
	    name=プログラム名</code>
	  と入力してください。
	  <em class="replaceable"><code>プログラム名</code></em>
	  の部分には検索したいソフトウェアの名前を入れてください。
	  たとえば、<code class="command">lsof</code> を探すには次のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make search name=lsof</code></strong>
Port:   lsof-4.88.d,8
Path:   /usr/ports/sysutils/lsof
Info:   Lists information about open files (similar to fstat(1))
Maint:  ler@lerctr.org
Index:  sysutils
B-deps:
R-deps: </pre><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ports Collection に用意されている検索のメカニズムでは、
	    インデックスファイルを利用して検索を行います。
	    もし <code class="filename">INDEX</code>
	    が必要であるというメッセージが表示されたら、
	    <code class="command">make fetchindex</code> を実行して、
	    最新のインデックスファイルをダウンロードしてください。
	    <code class="filename">INDEX</code> が用意されれば、
	    <code class="command">make search</code>
	    で検索を実行できるでしょう。</p></div><p><span class="quote">「<span class="quote">Path:</span>」</span> という行は、
	  port がどこにあるかを示しています。</p><p>より絞られた情報を得るには、
	  <code class="command">quicksearch</code>
	  と呼ばれる機能を使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make quicksearch name=lsof</code></strong>
Port:   lsof-4.88.d,8
Path:   /usr/ports/sysutils/lsof
Info:   Lists information about open files (similar to fstat(1))</pre><p>もっと詳しく検索するには、
	  <code class="command">make search
	  key=<em class="replaceable"><code>string</code></em></code> または
	  <code class="command">make quicksearch
	  key=<em class="replaceable"><code>string</code></em></code>
	  と入力してください。
	  <em class="replaceable"><code>string</code></em>
	  の部分には検索したいテキストを入れます。
	  プログラムの名前がわからない場合でも、
	  ある目的に関連した ports の検索に利用できるよう、
	  テキストの部分には、コメント、
	  説明文および依存情報を入れることができます。</p><p><code class="buildtarget">search</code>
	  および <code class="buildtarget">quicksearch</code> を使う場合には、
	  検索文字列中の大文字と小文字を区別せずに検索が行われるので、
	  <span class="quote">「<span class="quote">LSOF</span>」</span> を検索した結果は、
	  <span class="quote">「<span class="quote">lsof</span>」</span> と同じ検索結果になります。</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pkgng-intro"></a>5.4. <span class="application">pkg</span> によるバイナリ
      package の管理</h2></div></div></div><p><span class="application">pkg</span> は、FreeBSD における伝統的な 
      package 管理ツールの置き換えとなる次世代の管理ツールで、
      バイナリ packages をより早く、
      より簡単に管理できるようにする数多くの機能を提供します。</p><p><span class="application">pkg</span> は
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portmaster/pkg-descr">ports-mgmt/portmaster</a> や
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a> などの
      port 管理ツールの置き換えではありません。
      これらのツールは、
      サードパーティ製ソフトウェアをバイナリ packages と
      Ports Collection の両形式からインストールできますが、
      一方で <span class="application">pkg</span> はバイナリ packages
      のみをインストールします。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pkgng-initial-setup"></a>5.4.1. <span class="application">pkg</span> 入門</h3></div></div></div><p>FreeBSD 8.4 以降では、
	<span class="application">pkg</span> とマニュアルページをダウンロードし、
	インストールするためのブートストラップユーティリティが用意されています。</p><p>システムをブートストラップするためには、
	以下を実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/sbin/pkg</code></strong></pre><p>これより前のバージョンの FreeBSD では、かわりに Ports Collection
	または packages を用いてインストールする必要があります。</p><p>port をインストールするには以下を実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/ports-mgmt/pkg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>古い package システムを用いているシステムをアップグレードする際には、
	新しいツールがすでにインストールされている package に認識するよう、
	データベースを新しいフォーマットへと変換する必要があります。    
	<span class="application">pkg</span> をインストールしたら、
	以下のコマンドを実行して、package
	データベースをこれまでの伝統的なフォーマットから新しいフォーマットへと変換する必要があります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg2ng</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">このステップは、
	サードパーティ製ソフトウェアがまだインストールされていないような、
	新しくインストールされた直後のシステムでは必要ありません。</p></div><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">このステップは非可逆です。
	  一度 package データベースを <span class="application">pkg</span>
	  フォーマットへと変換したら、伝統的な <span class="application">pkg_*</span>
	  ツールを使うべきではありません。</p></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">package データベースを変換する際には、
	  新しいバージョンへのデータ変換に伴ったエラーが出力されることがあります。
	  通常、これらのエラーは無視して構いませんが、
	  <code class="command">pkg2ng</code> 終了後に表示される、
	  変換に失敗したサードパーティ製ソフトウェアの一覧については、
	  これらのソフトウェアを手動で再インストールする必要があります。</p></div><p>FreeBSD のバージョンが
	10.<em class="replaceable"><code>X</code></em> より前であれば、
	以下の行を <code class="filename">/etc/make.conf</code> に追加して、
	FreeBSD Ports Collection がソフトウェアの登録に、伝統的な
	package のフォーマットではなく、<span class="application">pkg</span>
	を用いるように設定してください。</p><pre class="programlisting">WITH_PKGNG=	yes</pre><p><span class="application">pkg</span> package 管理システムでは、
	ほとんどのコマンドに対して package リポジトリを使います。
	デフォルトの package リポジトリは
	<code class="filename">/usr/local/etc/pkg.conf</code> または
	<code class="envar">PACKAGESITE</code> 環境変数で定義されます。
	この環境変数は、設定ファイルを上書きします。</p><p>その他の <span class="application">pkg</span>
	の設定オプションは、pkg.conf(5) に記述されています。</p><p><span class="application">pkg</span> の利用情報は、
	pkg(8) マニュアルページや、
	<code class="command">pkg</code> を引数なしに実行すると表示されます。</p><p>各 <span class="application">pkg</span> コマンドの引数は、
	コマンドに固有なマニュアルページに記述されています。
	たとえば、<code class="command">pkg install</code> のマニュアルページを読むには、
	以下のコマンドのどちらかを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg help install</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>man pkg-install</code></strong></pre><p>以下の節では、<span class="application">pkg</span>
	を用いた通常のバイナリ package の管理について説明します。
	各コマンドでは、カスタマイズのために、
	多くのオプションが使われています。
	詳細や、他の例については、
	コマンドのヘルプやマニュアルページを参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pkgng-pkg-info"></a>5.4.2. インストールされている package の情報を入手する</h3></div></div></div><p>オプションを使用しないで <code class="command">pkg info</code>
	を実行すると、
	システムにインストールされているすべての package もしくは、
	ある特定の package の情報が得られます。</p><p>たとえば、インストールされている
	<span class="application">pkg</span> の情報を調べるには、
	以下のように実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg info pkg</code></strong>
pkg-1.1.4_1</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pkgng-installing-deinstalling"></a>5.4.3. package のインストールと削除</h3></div></div></div><p>バイナリ package をインストールするには、
	以下のコマンドを使ってください。
	ここで <em class="replaceable"><code>packagename</code></em> は、インストールする
	package の名前です。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install <em class="replaceable"><code>packagename</code></em></code></strong></pre><p>このコマンドは、リポジトリデータを使用して、
	インストールすべきソフトウェアのバージョン、および、
	インストールされていない依存ソフトウェアがあるかどうかを調べます。
	たとえば、<span class="application">curl</span>
	をインストールするには以下を実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install curl</code></strong>
Updating repository catalogue
/usr/local/tmp/All/curl-7.31.0_1.txz          100% of 1181 kB 1380 kBps 00m01s

/usr/local/tmp/All/ca_root_nss-3.15.1_1.txz   100% of  288 kB 1700 kBps 00m00s

Updating repository catalogue
The following 2 packages will be installed:

        Installing ca_root_nss: 3.15.1_1
        Installing curl: 7.31.0_1

The installation will require 3 MB more space

0 B to be downloaded

Proceed with installing packages [y/N]: <strong class="userinput"><code>y</code></strong>
Checking integrity... done
[1/2] Installing ca_root_nss-3.15.5_1... done
[2/2] Installing curl-7.31.0_1... done
Cleaning up cache files...Done</pre><p>新しい package と依存関係から追加された package は、
	  インストール済み package 一覧に表示されます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg info</code></strong>
ca_root_nss-3.15.5_1	The root certificate bundle from the Mozilla Project
curl-7.31.0_1	Non-interactive tool to get files from FTP, GOPHER, HTTP(S) servers
pkg-1.1.4_6	New generation package manager</pre><p>必要のなくなった packages は、
	  <code class="command">pkg delete</code> を使って削除できます。
	  たとえば、以下のようにして削除できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg delete curl</code></strong>
The following packages will be deleted:

	curl-7.31.0_1

The deletion will free 3 MB

Proceed with deleting packages [y/N]: <strong class="userinput"><code>y</code></strong>
[1/1] Deleting curl-7.31.0_1... done</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pkgng-upgrading"></a>5.4.4. インストールされている package のアップグレード</h3></div></div></div><p>以下のコマンドを実行すると、
	インストールされている packages
	が最新のバージョンにアップグレードされます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg upgrade</code></strong></pre><p>このコマンドは、インストールされているソフトウェアのバージョンと、
	リポジトリのカタログから利用できるバージョンとを比較し、
	リポジトリからアップグレードします。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pkgng-auditing"></a>5.4.5. インストールされている package の検証</h3></div></div></div><p>時折、
	サードウェア製のアプリケーションに脆弱性が見つかることがあります。
	脆弱性を調べるために、
	<span class="application">pkg</span> は、検証機能を持っています。
	システムにインストールされているソフトウェアに既知の脆弱性がないかどうかを調べるには、
	以下のように実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg audit -F</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pkgng-autoremove"></a>5.4.6. リーフ依存 ports の自動削除</h3></div></div></div><p>package を削除すると、不必要な依存 ports
	が残されることがあります。
	依存のために導入され、現在は不必要になった package は、
	以下のようにすると自動的に検出され、削除されます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg autoremove</code></strong>
Packages to be autoremoved:
	ca_root_nss-3.13.5

The autoremoval will free 723 kB

Proceed with autoremoval of packages [y/N]: <strong class="userinput"><code>y</code></strong>
Deinstalling ca_root_nss-3.15.1_1... done</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pkgng-backup"></a>5.4.7. package データベースのリストア</h3></div></div></div><p>伝統的な package 管理システムとは異なり、
	<span class="application">pkg</span> には package
	データベースをバックアップするメカニズムがあります。
	この機能はデフォルトで有効に設定されています。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">スクリプトによる定期的な
	  package データベースのバックアップを無効にするには、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">periodic.conf</span>(5)</span></a> の中で、
	  <code class="literal">daily_backup_pkgdb_enable="NO"</code> 
	  と設定してください。</p></div><p>過去にバックアップした package
	データベースの中身をリストアするには、
	以下のコマンドを実行してください。
	以下のコマンドの <em class="replaceable"><code>/path/to/pkg.sql</code></em>
	については、バックアップのある場所に置き換えて実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg backup -r <em class="replaceable"><code>/path/to/pkg.sql</code></em></code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">システムの定期的なスクリプトによって取得されたバックアップをリストアする場合には、
	  リストアの前に展開しておく必要があります。</p></div><p>手動で <span class="application">pkg</span>
	データベースをバックアップするには、以下のコマンドを実行してください。
	以下のコマンドの <em class="replaceable"><code>/path/to/pkg.sql</code></em>
	については、適切なファイル名と場所に置き換えて下さい。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg backup -d <em class="replaceable"><code>/path/to/pkg.sql</code></em></code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pkgng-clean"></a>5.4.8. 古くなった package の削除</h3></div></div></div><p>デフォルトでは、<span class="application">pkg</span>
	は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">pkg.conf</span>(5)</span></a> の	<code class="envar">PKG_CACHEDIR</code>
	変数で定義されるキャッシュディレクトリにバイナリ
	packages を保存します。
	インストールされている package の最新のコピーのみが保存されます。
	古いバージョンの <span class="application">pkg</span> では、
	過去にインストールされたすべての package が保存されていました。
	これらの古くなったバイナリ package を削除するには、
	以下を実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg clean</code></strong></pre><p>キャッシュ全体を削除するには以下を実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg clean -a</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pkgng-set"></a>5.4.9. package メタデータの変更</h3></div></div></div><p>FreeBSD Ports Collection
	では、メジャーバージョン番号が変更になることがあります。
	これに対応するために、<span class="application">pkg</span> には、
	package の情報をアップデートするコマンドが組み込まれています。
	たとえば、<code class="filename">lang/php5</code> が、
	バージョン <code class="literal">5.4</code> を表すようになり、
	<code class="filename">lang/php5</code> を
	<code class="filename">lang/php53</code>
	と名前を変更する必要があるような場合に、有用です。</p><p>上記の例の package の情報を変更するには、
	以下のように実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg set -o lang/php5:lang/php53</code></strong></pre><p>別の例として、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/ruby18/pkg-descr">lang/ruby18</a> を
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/ruby19/pkg-descr">lang/ruby19</a> にアップデートするには、
	以下のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg set -o lang/ruby18:lang/ruby19</code></strong></pre><p>最後の例として、
	<code class="filename">libglut</code> 共有ライブラリの情報を
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/libglut/pkg-descr">graphics/libglut</a> から
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/freeglut/pkg-descr">graphics/freeglut</a> へと変更するには、
	以下のように実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg set -o graphics/libglut:graphics/freeglut</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">package の情報を変更したら、
	  情報が変更された package に依存している
	  packages を再インストールすることが重要となります。
	  依存 packages を再インストールするには、
	  以下のように実行してください。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install -Rf <em class="replaceable"><code>graphics/freeglut</code></em></code></strong></pre></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-using"></a>5.5. Ports Collection の利用</h2></div></div></div><p>Ports Collection とは、<code class="filename">/usr/ports</code>
      以下に置かれる <code class="filename">Makefile</code>, 修正パッチ、
      説明文などの一連のファイルのことです。このファイルのセットは、
      アプリケーションをコンパイルして FreeBSD
      にインストールするのに用いられます。
      port を用いてアプリケーションをコンパイルできるようにするには、
      まず最初に Ports Collection をインストールする必要があります。
      FreeBSD のインストール時に Ports Collection をインストールしなかった場合に、
      以下の方法のどれかを用いてインストールしてください。</p><div class="procedure"><a id="ports-using-portsnap-method"></a><div class="procedure-title">手順5.1 Portsnap を利用する方法</div><p>FreeBSD のベースシステムには、<span class="application">Portsnap</span>
	が含まれています。
	これはは Ports Collection
	を取得するための速くて使いやすく、
	多くのユーザに推奨されるツールです。
	このユーティリティは、FreeBSD のサイトに接続し、セキュリティキーを検証し、
	Ports Collection の最新版をダウンロードします。
	セキュリティキーは、
	ダウンロードしたすべてのファイルの検証に用いられます。</p><ol class="procedure" type="1"><li class="step"><p>圧縮された Ports Collection のスナップショットを
	  <code class="filename">/var/db/portsnap</code>
	  にダウンロードするには以下を実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap fetch</code></strong></pre></li><li class="step"><p>初めて <span class="application">Portsnap</span> を使う時は、
	  スナップショットをまず <code class="filename">/usr/ports</code>
	  に展開してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap extract</code></strong></pre></li><li class="step"><p>上で示した <span class="application">Portsnap</span>
	  を初めて利用する際に行うコマンドを実行した後は、
	  以下のコマンドで
	  <code class="filename">/usr/ports</code>
	  をアップデートしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap fetch</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>portsnap update</code></strong></pre><p><code class="literal">fetch</code> を使う場合には、以下のよう
	  <code class="literal">extract</code> または <code class="literal">update</code>
	  を連続して行うことができます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap fetch update</code></strong></pre></li></ol></div><div class="procedure"><a id="ports-using-subversion-method"></a><div class="procedure-title">手順5.2 Subversion を用いる方法</div><p>ports ツリーの管理が必要な場合や、
	ローカルで変更点をメンテナンスする必要がある場合には、
	<span class="application">Subversion</span> を使って
	Ports Collection を取得する方法があります。
	<span class="application">Subversion</span> のより詳細な説明については、
	<a class="link" href="../../../../doc/en_US.ISO8859-1/articles/committers-guide/subversion-primer.html" target="_top">
	Subversion Primer</a> を参照してください。</p><ol class="procedure" type="1"><li class="step"><p><span class="application">Subversion</span>
	  を使って ports ツリーをチェックアウトする前に、
	  <span class="application">Subversion</span>
	  をインストールしておく必要があります。
	  ports ツリーがすでにインストールされていれば、
	  以下のようにして <span class="application">Subversion</span>
	  をインストールできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/devel/subversion</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>ports ツリーが利用できない場合や、
	  package の管理に <span class="application">pkg</span>
	  を使っているのであれば、package から
	  <span class="application">Subversion</span> をインストールできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install subversion</code></strong></pre></li><li class="step"><p>ports ツリーをチェックアウトしてください。
	  パフォーマンスを良くするため、
	  <em class="replaceable"><code>svn0.us-east.FreeBSD.org</code></em>
	  を
	  <a class="link" href="#svn-mirrors" title="A.4.4. Subversion ミラーサイト">Subversion
	   ミラー</a>
	  の中から地理的に近い場所にあるミラーに置き換えてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn checkout https://<em class="replaceable"><code>svn0.us-east.FreeBSD.org</code></em>/ports/head /usr/ports</code></strong></pre></li><li class="step"><p><span class="application">Subversion</span>
	  で最初のチェックアウトを行ったら、必要に応じて
	  <code class="filename">/usr/ports</code>
	  をアップデートしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn update /usr/ports</code></strong></pre></li></ol></div><p>Ports Collection
      はソフトウェアのカテゴリを表すディレクトリを持ち、
      各カテゴリには、各アプリケーションのサブディレクトリがあります。
      ports スケルトンとも呼ばれる各サブディレクトリには、
      プログラムを FreeBSD
      上で正しくコンパイルしてインストールする方法を提供するファイルのセットが含まれています。
      それぞれの port スケルトンには、
      次のファイルおよびディレクトリが含まれています。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">Makefile</code>:
	  このファイルにはアプリケーションのコンパイル方法やシステムのどこにインストールするかを指定する命令文が含まれています。</p></li><li class="listitem"><p><code class="filename">distinfo</code>:
	  このファイルには、その port
	  を構築するためにダウンロードする必要があるファイルのファイル名と、
	  チェックサム情報が含まれています。</p></li><li class="listitem"><p><code class="filename">files</code>:
	  このディレクトリには FreeBSD 上でプログラムをコンパイルし、
	  インストールするための修正パッチが含まれています。
	  このディレクトリには、その port
	  の構築に必要なその他のファイルが入る場合もあります。</p></li><li class="listitem"><p><code class="filename">pkg-descr</code>:
	  このファイルにはプログラムに関する、
	  より詳しい説明文が含まれます。</p></li><li class="listitem"><p><code class="filename">pkg-plist</code>:
	  これは、その port によってインストールされる全ファイルのリストです。
	  これにはプログラムを削除する際に、
	  どのファイルを削除すれば良いのかを ports
	  システムに伝える役割もあります。</p></li></ul></div><p>これらの他に <code class="filename">pkg-message</code>
      や特殊な状況に対応するためのファイルを含む ports もあります。
      これらのファイルについての詳細および
      ports の一般的な説明については、
      <a class="link" href="../../../../doc/ja_JP.eucJP/books/porters-handbook/index.html" target="_top">port
      作成者のためのハンドブック</a> をご覧下さい。</p><p>port は実際のソースコード
      (<code class="filename">distfile</code> とも呼ばれます)
      を含んではいません。
      port の構築の展開部で、ダウンロードされたソースは自動的に <code class="filename">/usr/ports/distfiles</code>
      に保存されます。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-skeleton"></a>5.5.1. ports のインストール</h3></div></div></div><a id="idp81862992" class="indexterm"></a><p>この節では、Ports Collection
	を利用してプログラムをインストールしたり、
	システムから削除したりする基本的な手順について説明します。
	利用可能な <code class="command">make</code>
	のターゲットや環境変数についての詳細は
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ports&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">ports</span>(7)</span></a> をご覧ください。</p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">いかなる port でも、構築する前には、
	  前節に書かれているように、Ports Collection
	  をアップデートしてください。
	  サードパーティ製のソフトウェアをインストールすると、
	  セキュリティの脆弱性を引き起こす可能性があります。
	  その port に関連したセキュリティ上の問題がないことを、まずは
	  <a class="link" href="http://vuxml.freebsd.org/" target="_top">http://vuxml.freebsd.org/</a>
	  で確認してください。または、
	  新しい port をインストールする前に、
	  <code class="command">pkg audit -F</code> を実行してください。
	  毎日のシステムのセキュリティ確認時に、
	  自動的にセキュリティの検査およびデータベースの更新を行うようにこのコマンドを設定できます。
	  詳しくは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg-audit&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg-audit</span>(8)</span></a> および
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a> を参照してください。</p></div><p>Ports Collection は、ネットワークに接続できることを想定しています。
	また、superuser の権限も必要となります。</p><p><a class="link" href="http://www.freebsdmall.com/" target="_top">freebsdmaill.com</a>
	の FreeBSD Toolkit のようなサードパーティ製の DVD-ROM
	製品の中には distfiles を収録しているものがあります。
	これらを使うとインターネットへの接続がなくても
	ports をインストールするのに使うことができます。
	DVD を <code class="filename">/cdrom</code>
	にマウントしてください。
	ほかのマウントポイントを使用したければ、
	<code class="varname">CD_MOUNTPTS</code> 変数を設定してください。
	ディスク上に必要な distfiles が存在すると、
	自動的に利用されます。port には DVD
	への収録を許可しないライセンス条項を持つものがあります。
	これにはダウンロード前に登録を必要としたり、
	再配布が禁止されているという理由があります。
	DVD に含まれていない port をインストールしたい場合には、
	ネットワークに接続する必要があります。</p><p>port をコンパイルしてインストールするには、
	インストールしたい port のディレクトリに移動してください。
	その後、プロンプトから
	<code class="command">make install</code> と入力してください。
	すると、次のような出力が現われるはずです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/sysutils/lsof</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong>
&gt;&gt; lsof_4.88D.freebsd.tar.gz doesn't seem to exist in /usr/ports/distfiles/.
&gt;&gt; Attempting to fetch from ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/.
===&gt;  Extracting for lsof-4.88
...
[extraction output snipped]
...
&gt;&gt; Checksum OK for lsof_4.88D.freebsd.tar.gz.
===&gt;  Patching for lsof-4.88.d,8
===&gt;  Applying FreeBSD patches for lsof-4.88.d,8
===&gt;  Configuring for lsof-4.88.d,8
...
[configure output snipped]
...
===&gt;  Building for lsof-4.88.d,8
...
[compilation output snipped]
...
===&gt;  Installing for lsof-4.88.d,8

===&gt;  Installing for lsof-4.88.d,8
...
[installation output snipped]
...
===&gt;   Generating temporary packing list
===&gt;   Compressing manual pages for lsof-4.88.d,8
===&gt;   Registering installation for lsof-4.88.d,8
===&gt;  SECURITY NOTE:
      This port has installed the following binaries which execute with
      increased privileges.
/usr/local/sbin/lsof
<code class="prompt">#</code></pre><p><code class="command">lsof</code> は高い権限で動作するプログラムなので、
	インストールする時にセキュリティに関する警告が表示されます。
	インストールが終わったら、プロンプトが戻ります。</p><p>シェルによってはコマンドの実行ファイルを探す時間を短縮するために、
	環境変数 <code class="envar">PATH</code> に登録されている
	ディレクトリのコマンド一覧をキャッシュするものがあります。
	<code class="command">tcsh</code> シェルを使っているのであれば、
	フルパスを指定することなく新しくインストールしたコマンドを利用できるように、
	<code class="command">rehash</code> を実行してください。
	<code class="command">sh</code> シェルを使っているのであれば
 	かわりに <code class="command">hash -r</code> を実行してください。
	詳細については、
	あなたの使っているシェルのドキュメントをご覧ください。</p><p>インストールの間に、作業用ディレクトリが作成されます。
	このディレクトリにはコンパイル時に使用されるすべての一時ファイルが含まれています。
	このディレクトリを削除することで、ディスク容量を節約でき、また port
	を新しいバージョンへアップデートする際に問題が起こる可能性を小さくします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make clean</code></strong>
===&gt;  Cleaning for lsof-88.d,8
<code class="prompt">#</code></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">port を構築する際に、
	  <code class="command">make install clean</code>
	  と実行することで、
	  これらの余分な手順を省くことができます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81933392"></a>5.5.1.1. ports のインストールのカスタマイズ</h4></div></div></div><p>ports の中にはビルドオプションを指定できるものがあります。
	  このオプションを指定することで、
	  アプリケーションの機能の一部を有効もしくは無効にできます。
	  また、セキュリティオプションを設定したり、
	  その他のカスタマイズを行うことができます。
	  このようなアプリケーションには
	  <code class="filename">www/firefox</code>,
	  <code class="filename">security/gpgme</code> や
	  <code class="filename">mail/sylpheed-claws</code>
	  などがあります。
	  port が他のカスタマイズ可能なオプションを持つ ports
	  に依存する場合には、デフォルトでは、ユーザに port
	  のオプションをメニューから選択させる設定のため、
	  何度もユーザとの対話が起こり待たされることがあります。
	  これを避けるには、まず最初に port スケルトンで
	  <code class="command">make config-recursive</code>
	  を実行して設定を一括で行い、その後
	  <code class="command">make install [clean]</code>
	  を実行して port を構築してインストールしてください。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="buildtarget">config-recursive</code> を実行する際、
	    <code class="buildtarget">all-depends-list</code>
	    を実行すると、設定すべき ports の一覧を得ることができます。
	    多くの場合は、すべての依存 ports のオプションが定義され、
	    ports オプションの画面が表示されなくなり、
	    すべてのオプションが設定されたことを確認できるまで
	    <code class="command">make config-recursive</code>
	    を実行すると良いでしょう。</p></div><p>port の構築後、
	  再びこのメニューを表示させてオプションの追加や削除、
	  設定の変更を行う方法はたくさんあります。
	  一つ目は port のディレクトリに <code class="command">cd</code> で移動し、
	  <code class="command">make	config</code>
	  と入力する方法です。
	  別の方法は <code class="command">make showconfig</code>
	  を使う方法です。
	  他の方法は <code class="command">make rmconfig</code>
	  の実行です。
	  このコマンドを実行すると選択されているすべてのオプションが削除され、
	  設定をもう一度やり直すことができます。
	  これらの方法や他の方法についての詳細は、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ports&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">ports</span>(7)</span></a> マニュアルで説明されています。</p><p>ports は、いくつかの環境変数を参照する <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">fetch</span>(1)</span></a>
	  を用いてソースファイルをダウンロードします。
	  FreeBSD システムがファイアウォールの内側であったり、
	  FTP/HTTP プロキシを使う場合には、
	  <code class="envar">FTP_PASSIVE_MODE</code>,
	  <code class="envar">FTP_PROXY</code>, <code class="envar">FTP_PASSWORD</code>
	  の環境変数を設定することなります。
	  対応している環境変数の一覧については
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">fetch</span>(3)</span></a> をご覧ください。</p><p>インターネットに常時接続できないユーザのために
	  <code class="command">make fetch</code>
	  コマンドが用意されています。
	  このコマンドを
	  <code class="filename">/usr/ports</code>
	  で実行してすべての distfiles をダウンロードするか、
	  <code class="filename">/usr/ports/net</code>
	  といったカテゴリや、あるスケルトンにおいても実行できます。
	  ある port がライブラリやその他の ports に依存している場合には、
	  別のカテゴリの ports の distfiles
	  はダウンロードされ<span class="emphasis"><em>ない</em></span>ことに注意してください。
	  port が依存しているすべての distfiles をダウンロードしたければ、
	  <code class="command">make fetch-recursive</code>
	  を使ってください。</p><p>めったにないことかもしれませんが、
	  ローカルに distfiles のリポジトリがあるような場合に、
	  <code class="varname">MASTER_SITES</code> 変数を変更することで
	  <code class="filename">Makefile</code> で指定されているダウンロードの場所を
	  変更することができます。
	  設定する場合には、変更先を以下のようにして指定してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/<em class="replaceable"><code>directory</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make MASTER_SITE_OVERRIDE= \
<em class="replaceable"><code>ftp://ftp.organization.org/pub/FreeBSD/ports/distfiles/</code></em> fetch</code></strong></pre><p><code class="varname">WRKDIRPREFIX</code> 変数と
	  <code class="varname">PREFIX</code> 変数を変更することで、
	  作業ディレクトリやターゲットディレクトリをデフォルトのものから変更できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make WRKDIRPREFIX=/usr/home/example/ports install</code></strong></pre><p>とすると、ports は <code class="filename">/usr/home/example/ports</code>
	  でコンパイルされ、すべて <code class="filename">/usr/local</code>
	  以下にインストールされます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make PREFIX=/usr/home/example/local install</code></strong></pre><p>この場合、port のコンパイルは <code class="filename">/usr/ports</code>
	  でおこない、<code class="filename">/usr/home/example/local</code>
	  にインストールします。そして</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make WRKDIRPREFIX=../ports PREFIX=../local install</code></strong></pre><p>とすれば両者を組み合わせることが可能です。</p><p>これらを環境変数に設定する方法もあります。
	  どのように環境変数を設定するかについては、
	  あなたの使っているシェルのマニュアルページを参照してください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-removing"></a>5.5.2. インストールした ports の削除</h3></div></div></div><a id="idp81963216" class="indexterm"></a><p>インストールされた ports は、
	<code class="command">pkg delete</code> コマンドで削除できます。
	このコマンドの使用例は、<a class="xref" href="#pkgng-intro" title="5.4. pkg によるバイナリ package の管理">「<span class="application">pkg</span> によるバイナリ
      package の管理」</a> にあります。</p><p>あるいは、port のディレクトリにて
	<code class="command">make deinstall</code> を実行することでも削除できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/sysutils/lsof</code></strong>
<strong class="userinput"><code>make deinstall</code></strong>
===&gt;  Deinstalling for sysutils/lsof
===&gt;   Deinstalling
Deinstallation has been requested for the following 1 packages:

	lsof-4.88.d,8

The deinstallation will free 229 kB
[1/1] Deleting lsof-4.88.d,8... done</pre><p>port が削除されるときに表示されるメッセージを読むことをお勧めします。
	もし削除した port に依存するアプリケーションがあった場合には、
	その情報が表示されますが、port の削除は行われます。
	そのようなケースでは、依存を直すためにアプリケーションを再インストールするとよいでしょう。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-upgrading"></a>5.5.3. ports のアップグレード</h3></div></div></div><a id="idp81968976" class="indexterm"></a><p>ports のインストール後、時間が経過すると、Ports Collection
	で新しいバージョンのソフトウェアを利用できるようになります。
	この章では、
	どのようにしてアップグレードする必要のあるソフトウェアを判断するか、
	そしてアップグレードの方法について説明します。</p><p>インストールされている ports
	の新しいバージョンを利用できるかどうかを知るには、まず、
	最新の ports ツリーがインストールされていることを確認してください。
	これには、<a class="xref" href="#ports-using-portsnap-method" title="手順5.1 Portsnap を利用する方法">手順5.1「Portsnap を利用する方法」</a> もしくは
	<a class="xref" href="#ports-using-subversion-method" title="手順5.2 Subversion を用いる方法">手順5.2「Subversion を用いる方法」</a>
	で書かれているアップデートのコマンドを使ってください。
	FreeBSD 10 以降のシステム、または、<span class="application">pkg</span>
	に変換されたシステムでは、
	以下のコマンドを実行すると、現在利用可能なバージョンよりも古い
	ports の一覧が表示されます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg version -l "&lt;"</code></strong></pre><p>FreeBSD 9.<em class="replaceable"><code>X</code></em> より前のシステムでは、
	現在利用可能なバージョンよりも古い
	ports の一覧を表示されるには、以下のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_version -l "&lt;"</code></strong></pre><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">アップグレードする前に
	  <code class="filename">/usr/ports/UPDATING</code>
	  を、ファイルの頭から、ports を最後にアップデートした日、
	  もしくはシステムをインストールをした日に最も近い日まで目を通してください
	  このファイルには
	  port をアップグレードする際にユーザが遭遇するであろう問題や、
	  追加で必要な作業などが記述されています。
	  例えば、ファイル形式の変更や設定ファイルの場所の変更、
	  前のバージョンと互換性がなくなったことなどが書かれています。
	  アップグレードする必要のある ports に関連した手順に注意し、
	  アップグレードする際にはこれらの手順に従ってください。</p></div><p>実際にアップグレードを行うには、
	<span class="application">Portmaster</span> もしくは
	<span class="application">Portupgrade</span> を使ってください。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portmaster"></a>5.5.3.1. <span class="application">portmaster</span>
	  を用いた ports のアップグレード</h4></div></div></div><a id="idp81994576" class="indexterm"></a><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portmaster/pkg-descr">ports-mgmt/portmaster</a> package または port は、
	  FreeBSD と共にインストールされているツールだけを使うので、
	  インストールされている ports のアップグレードに推奨されているツールです。
	  <span class="application">portmaster</span> は、
	  他の ports に依存せずに、<span class="quote">「<span class="quote">base</span>」</span>
	  システムのツールのみを使うように設計されています。
	  このアプリケーションは、
	  どの ports をアップグレードすべきかの判断を、
	  <code class="filename">/var/db/pkg/</code> の情報を使って行います。port
	  からこのユーティリティをインストールするには以下のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/ports-mgmt/portmaster</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p><span class="application">Portmaster</span> は、
	  ports を 4 つのカテゴリに分類します。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Root ports: 他の port に依存せず、
	      他の port からも依存されない ports。</p></li><li class="listitem"><p>Trunk ports: 他の port には依存しないが、
	      他の port から依存されている ports。</p></li><li class="listitem"><p>Branch ports: 他の port に依存し、
	      他の port からも依存されている ports。</p></li><li class="listitem"><p>Leaf ports: 他の port に依存するが、
	      他の port からは依存されない ports。</p></li></ul></div><p>これらのカテゴリの一覧や、アップデート可能な
	  port の一覧を表示するには以下のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster -L</code></strong>
===&gt;&gt;&gt; Root ports (No dependencies, not depended on)
===&gt;&gt;&gt; ispell-3.2.06_18
===&gt;&gt;&gt; screen-4.0.3
        ===&gt;&gt;&gt; New version available: screen-4.0.3_1
===&gt;&gt;&gt; tcpflow-0.21_1
===&gt;&gt;&gt; 7 root ports
...
===&gt;&gt;&gt; Branch ports (Have dependencies, are depended on)
===&gt;&gt;&gt; apache22-2.2.3
        ===&gt;&gt;&gt; New version available: apache22-2.2.8
...
===&gt;&gt;&gt; Leaf ports (Have dependencies, not depended on)
===&gt;&gt;&gt; automake-1.9.6_2
===&gt;&gt;&gt; bash-3.1.17
        ===&gt;&gt;&gt; New version available: bash-3.2.33
...
===&gt;&gt;&gt; 32 leaf ports

===&gt;&gt;&gt; 137 total installed ports
        ===&gt;&gt;&gt; 83 have new versions available</pre><p>以下のコマンドを使うと、
	  古くなった ports をすべてアップデートします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster -a</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">Portmaster</span> のデフォルトの設定では、
	  インストールされている port を削除する前にバックアップ用の
	  package が作成されます。
	  このバックアップは、
	  新しいバージョンのインストールに成功すると削除されます。
	  <code class="option">-b</code> を使うと、
	  <span class="application">Portmaster</span>
	  の自動的なバックアップの削除は行いません。
	  <code class="option">-i</code> を追加すると、
	  <span class="application">Portmaster</span> をインタラクティブモードで使用できます。
	  このモードでは、各 port
	  をアップグレードするかどうかの選択を対話的に行うことがでます。
	  多くのオプションが利用可能です。portmaster(8) のマニュアルページから、
	  それらの使用方法に関する詳細な説明を読んでください。</p></div><p>アップグレードの過程でエラーに遭遇した場合には、
	  <code class="option">-f</code> を使ってすべての
	  ports のアップグレードや再構築を行なってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster -af</code></strong></pre><p><span class="application">Portmaster</span>
	  を使ってシステムに新しい ports をインストールしたり、
	  新しい port のコンパイルやインストール前に依存するすべての
	  port をアップグレードできます。この機能を使う時には、
	  Ports Collection の場所を指定してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster <em class="replaceable"><code>shells/bash</code></em></code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portupgrade"></a>5.5.3.2. Portupgrade を用いた ports のアップグレード</h4></div></div></div><a id="idp82045648" class="indexterm"></a><p><span class="application">Portupgrade</span> は、
	  インストールした ports
	  のアップグレードを行なうためのもう一つのユーティリティです。
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a>
	  package または port から利用できます。
	  このユーティリティは ports
	  を管理するために用いられるアプリケーションをインストールします。
	  Ruby に依存します。
	  port をインストールするには、以下を実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/ports-mgmt/portupgrade</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>このユーティリティを使ってアップグレードを行う前に、
	  <code class="command">pkgdb -F</code> を使って、
	  インストールされている ports の一覧を調べてください。
	  矛盾が検出された場合には修復してください。</p><p>システムにインストールされている port
	  の中で古くなったものをすべてアップデートするには
	  <code class="command">portupgrade -a</code> を実行してください。
	  もし、すべての ports
	  に対して個別にアップグレードするかどうかを確認したいのであれば、
	  <code class="option">-i</code> を追加してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -ai</code></strong></pre><p>ports で利用可能なすべてのアプリケーションではなく、
	  ある特定のアプリケーションだけを更新したいのであれば、
	  <code class="command">portupgrade <em class="replaceable"><code>pkgname</code></em></code>
	  を実行してください。
	  アップグレードするアプリケーションが依存しているすべての
	  ports をまず先に更新したい場合には、
	  <code class="option">-R</code> を使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -R firefox</code></strong></pre><p><code class="option">-P</code> オプションを使うと、
	  <span class="application">portupgrade</span> は
	  <code class="envar">PKG_PATH</code> に登録されているローカルディレクトリから、
	  利用可能な package を探します。
	  ローカルに利用可能な packages が見つからなければ、
	  リモートサイトから package のダウンロードを試みます。
	  packages をローカルに見つけることができず、
	  リモートサイトからもダウンロードできない場合には、
	  <span class="application">portupgrade</span>
	  は ports からインストールを行ないます。
	  ports を使用したくなければ、<code class="option">-PP</code>
	  オプションを指定してください。
	  この最後のオプションを設定すると、
	  もし package が利用できなければ
	  <span class="application">Portupgrade</span> は終了します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -PP gnome2</code></strong></pre><p>また、ビルドやインストールを行なわず、
	distfiles または packages だけをダウンロードしたければ、
	<code class="option">-F</code> オプションを指定してください。
	利用可能なすべてのオプションについては、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portupgrade&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">portupgrade</span>(1)</span></a> のマニュアルを参照してください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-disk-space"></a>5.5.4. ports とディスク容量</h3></div></div></div><a id="idp82072912" class="indexterm"></a><p>Ports Collection を使い続けていると、
	そのうちディスクを食いつぶしてしまうでしょう。
	ports をビルドしてインストールした後、
	ports スケルトンで <code class="command">make clean</code>
	を実行すると、作業用の <code class="filename">work</code>
	ディレクトリを削除します。
	<span class="application">Portmaster</span> を使って port
	をインストールする場合には、<code class="option">-K</code>
	を使わなければこのディレクトリは自動的に削除されます。
	<span class="application">Portupgrade</span>
	がインストールされている場合には、
	以下のコマンドはローカルの Ports Collection
	に見つかったすべての <code class="filename">work</code>
	ディレクトリを削除します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsclean -C</code></strong></pre><p>さらに、時間が経つにつれ
	<code class="filename">/usr/ports/distfiles</code>
	には、古くなったソースファイルがたまっていきます。
	<span class="application">Portupgrade</span>
	がインストールされている場合には、
	次のコマンドで、どの ports からも使われていない
	distfiles を削除できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsclean -D</code></strong></pre><p><span class="application">Portupgrade</span>
	を使って、システムにインストールされている port から使われていない
	distfiles をすべて削除するには、以下のコマンドを使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsclean -DD</code></strong></pre><p>もし <span class="application">Portmaster</span>
	がインストールされているのであれば、以下を実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster --clean-distfiles</code></strong></pre><p>デフォルトでは、このコマンドはインタラクティブに設定されているため、
	ユーザに対して distfile
	を削除すべきかどうかを確認するプロンプトが表示されます。</p><p>これらのコマンドに加え、<code class="filename">ports-mgmt/pkg_cutleaves</code>
	package または port は、
	必要なくなった ports を削除する作業を自動化します。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-poudriere"></a>5.6. <span class="application">Poudriere</span> を用いた
      package の構築</h2></div></div></div><p><span class="application">poudriere</span> は、FreeBSD package
      を作成したり、試験に用いられる <acronym class="acronym">BSD</acronym>
      ライセンスのユーティリティです。
      このユーティリティは、FreeBSD jails を用いて、
      独立したコンパイル環境を構築します。
      これらの jail を使って、
      インストールされている FreeBSD のバージョンとは異なるバージョンの
      package を作成したり、ホストが amd64 のシステムでは、
      i386 用の package を構築することもできます。
      構築された package のレイアウトは公式のミラーと同じです。
      これらの package は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pkg</span>(8)</span></a> や他の
      package 管理ツールで利用できます。</p><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/poudriere/pkg-descr">ports-mgmt/poudriere</a> package
      または port から <span class="application">poudriere</span>
      をインストールしてください。
      アプリケーションをインストールすると、サンプルの設定ファイルである
      <code class="filename">/usr/local/etc/poudriere.conf.sample</code>
      もインストールされます。
      このファイルを
      <code class="filename">/usr/local/etc/poudriere.conf</code> にコピーして、
      ローカルの環境に合わせて編集してください。</p><p><span class="application">poudriere</span> を実行するシステムで、
      必ずしも <acronym class="acronym">ZFS</acronym> を使う必要はありませんが、
      有用です。<acronym class="acronym">ZFS</acronym> を使う際には、
      <code class="filename">/usr/local/etc/poudriere.conf</code>
      の中で <code class="varname">ZPOOL</code> を指定する必要があります。
      そして、<code class="varname">FREEBSD_HOST</code>
      を最も近いミラーに設定してください。
      <code class="varname">CCACHE_DIR</code> を定義することで、
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/ccache/pkg-descr">devel/ccache</a>
      を使ったコンパイルのキャッシュが可能となり、
      コンパイルで頻繁に使われるコードの構築時間を短縮できます。
      <span class="application">poudriere</span> データセットを
      <code class="filename">/poudriere</code>
      にマウントされた独立したツリーに置くと良いでしょう。
      他の値はデフォルトの値で十分です。</p><p>同時に走らせるコンパイル数の定義には、
      認識されたコアプロセッサの数が用いられます。
      <acronym class="acronym">RAM</acronym>
      もしくはスワップ空間のどちらかの仮想メモリを十分用意してください。
      もし、仮想メモリを使い切ってしまったら、jail の構築は中断し、
      異常なメッセージが表示されることでしょう。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="poudriere-initialization"></a>5.6.1. Jails および Port ツリーの初期化</h3></div></div></div><p>設定が終わったら、<span class="application">poudriere</span>
	を初期化して、必要とする FreeBSD ツリーおよび jail、
	そして ports ツリーをインストールしてください。
	jail の名前を <code class="option">-j</code>、
	FreeBSD のバージョンを <code class="option">-v</code> で指定してください。
	FreeBSD/amd64 システムでは、
	<code class="option">-a</code> を使ってアーキテクチャに
	<code class="literal">i386</code> または <code class="literal">amd64</code>
	を設定できます。
	デフォルトでは、<code class="command">uname</code>
	で表示されるアーキテクチャに設定されます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere jail -c -j <em class="replaceable"><code>10amd64</code></em> -v <em class="replaceable"><code>10.0-RELEASE</code></em></code></strong>
====&gt;&gt; Creating 10amd64 fs... done
====&gt;&gt; Fetching base.txz for FreeBSD 10.0-RELEASE amd64
/poudriere/jails/10amd64/fromftp/base.txz      100% of   59 MB 1470 kBps 00m42s
====&gt;&gt; Extracting base.txz... done
====&gt;&gt; Fetching src.txz for FreeBSD 10.0-RELEASE amd64
/poudriere/jails/10amd64/fromftp/src.txz       100% of  107 MB 1476 kBps 01m14s
====&gt;&gt; Extracting src.txz... done
====&gt;&gt; Fetching games.txz for FreeBSD 10.0-RELEASE amd64
/poudriere/jails/10amd64/fromftp/games.txz     100% of  865 kB  734 kBps 00m01s
====&gt;&gt; Extracting games.txz... done
====&gt;&gt; Fetching lib32.txz for FreeBSD 10.0-RELEASE amd64
/poudriere/jails/10amd64/fromftp/lib32.txz     100% of   14 MB 1316 kBps 00m12s
====&gt;&gt; Extracting lib32.txz... done
====&gt;&gt; Cleaning up... done
====&gt;&gt; Jail 10amd64 10.0-RELEASE amd64 is ready to be used</pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere ports -c -p <em class="replaceable"><code>local</code></em></code></strong>
====&gt;&gt; Creating local fs... done
====&gt;&gt; Extracting portstree "local"...
Looking up portsnap.FreeBSD.org mirrors... 7 mirrors found.
Fetching public key from ec2-eu-west-1.portsnap.freebsd.org... done.
Fetching snapshot tag from ec2-eu-west-1.portsnap.freebsd.org... done.
Fetching snapshot metadata... done.
Fetching snapshot generated at Tue Feb 11 01:07:15 CET 2014:
94a3431f0ce567f6452ffde4fd3d7d3c6e1da143efec76100% of   69 MB 1246 kBps 00m57s
Extracting snapshot... done.
Verifying snapshot integrity... done.
Fetching snapshot tag from ec2-eu-west-1.portsnap.freebsd.org... done.
Fetching snapshot metadata... done.
Updating from Tue Feb 11 01:07:15 CET 2014 to Tue Feb 11 16:05:20 CET 2014.
Fetching 4 metadata patches... done.
Applying metadata patches... done.
Fetching 0 metadata files... done.
Fetching 48 patches.
(48/48) 100.00%  done.
done.
Applying patches...
done.
Fetching 1 new ports or files... done.
/poudriere/ports/tester/CHANGES
/poudriere/ports/tester/COPYRIGHT

[...]

Building new INDEX files... done.</pre><p>一つのコンピュータ上で、
	複数の設定、複数の jails、異なる port ツリーから
	<span class="application">poudriere</span> は port をビルドできます。
	これらのコンビネーションのカスタム設定は
	<span class="emphasis"><em>セット</em></span> と呼ばれます。
	詳細については、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/poudriere/pkg-descr">ports-mgmt/poudriere</a> もしくは
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/poudriere-devel/pkg-descr">ports-mgmt/poudriere-devel</a> をインストール後、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=poudriere&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">poudriere</span>(8)</span></a> の CUSTOMIZATION の章をご覧下さい。</p><p>ここで示される基本設定では、jail, ports そしてセット固有の
	<code class="filename">make.conf</code> を
	<code class="filename">/usr/local/etc/poudriere.d</code> に置いてください。
	この例でのファイル名
	<code class="filename"><em class="replaceable"><code>10amd64-local-workstation</code></em>-make.conf</code>
	は、jail 名、port 名そして、セット名の組み合わせで付けられています。
	システムの <code class="filename">make.conf</code>
	と、この新しいファイルは、ビルド時に結合され、構築した jail
	で用いられる <code class="filename">make.conf</code> を作成します。</p><p>ビルドする package を
	<code class="filename"><em class="replaceable"><code>10amd64-local-workstation</code></em>-pkglist</code> に記載してください。</p><pre class="programlisting">editors/emacs
devel/git
ports-mgmt/pkg
...</pre><p>特定の ports に対し、
	オプションや依存を設定してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere options -j <em class="replaceable"><code>10amd64</code></em> -p <em class="replaceable"><code>local</code></em> -z <em class="replaceable"><code>workstation</code></em> -f <em class="replaceable"><code>10amd64-local-workstation-pkglist</code></em></code></strong></pre><p>最後に packages を構築し、
	package リポジトリを生成してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>poudriere bulk -j <em class="replaceable"><code>10amd64</code></em> -p <em class="replaceable"><code>local</code></em> -z <em class="replaceable"><code>workstation</code></em> -f <em class="replaceable"><code>10amd64-local-workstation-pkglist</code></em></code></strong></pre><p><span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>t</strong></span>
	は現在のビルド状況を表示します。
	<span class="application">Poudriere</span> は
	<code class="filename">/poudriere/logs/bulk/<em class="replaceable"><code>jailname</code></em>
	</code>
	にあるファイルも構築します。
	このファイルをウェブサーバと共に使うことで、
	ビルド情報を表示できます。</p><p>これで <span class="application">poudriere</span>
	リポジトリを package
	のインストールに利用できるようになりました。</p><p><span class="application">poudriere</span>
	を利用する上でのより多くの情報については、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=poudriere&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">poudriere</span>(8)</span></a> およびメインのウェブサイトである <a class="link" href="https://github.com/freebsd/poudriere/wiki" target="_top">https://github.com/freebsd/poudriere/wiki</a>
	を参照してください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-nextsteps"></a>5.7. インストール後の作業</h2></div></div></div><p>バイナリ package もしくは port
      のどちらを用いてソフトウェアをインストールするかに関わらず、
      サードパーティ製のアプリケーションの多くは、
      インストール後にある程度の設定を必要とします。
      以下のコマンドや場所の情報は、
      アプリケーションとともに何がインストールされたかを知るための助けとなるでしょう。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>多くのアプリケーションでは、
	  デフォルトの設定ファイルが、少なくとも一つは
	  <code class="filename">/usr/local/etc</code> にインストールされます。
	  数多くの設定ファイルを持つようなアプリケーションでは、
	  それらのファイルを格納するためにサブディレクトリを作成するものもあります。
	  サンプルの設定ファイルは、しばしば <code class="filename">.sample</code>
	  といった拡張子がついた名前でインストールされます。
	  設定ファイルを確認し、
	  必要に応じてシステムの要求に合うように編集してください。
	  最初にサンプルファイルを <code class="filename">.sample</code>
	  を外した名前のファイルにコピーしてから、編集してください。</p></li><li class="listitem"><p>ドキュメントが付属しているアプリケーションは、
	  ドキュメントを <code class="filename">/usr/local/share/doc</code>
	  にインストールします。また、
	  多くのアプリケーションは、マニュアルページもインストールします。
	  これらのドキュメントは、
	  アプリケーションを使い続ける前に見ておくべきものです。</p></li><li class="listitem"><p>ある種のアプリケーションでは、
	  サービスを実行するためには、
	  アプリケーションの起動前に、
	  <code class="filename">/etc/rc.conf</code>
	  に追加する必要があります。
	  これらのアプリケーションでは、通常、
	  スタートアップスクリプトが
	  <code class="filename">/usr/local/etc/rc.d</code>
	  にインストールされます。詳細は、
	  <a class="link" href="#configtuning-starting-services" title="12.4. サービスの起動">サービスの起動</a>
	  をご覧ください。</p></li><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csh</span>(1)</span></a> のユーザは、
	  <code class="command">rehash</code> を実行して、
	  シェルの <code class="envar">PATH</code> のバイナリリストを再構築してください。</p></li><li class="listitem"><p><code class="command">pkg info</code>
	  を使って、アプリケーションと共にインストールされたファイル、
	  マニュアルページ、およびバイナリを調べることができます。</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-broken"></a>5.8. うまく動作しない ports に遭遇した場合には</h2></div></div></div><p>port をうまくコンパイルできなかったりインストールできない場合には、
      以下を試してください。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>その port に対する修正案が提出されていないかどうかを
	  <a class="link" href="../../../../ja/support.html" target="_top">障害報告
	    (Problem Report) データベース</a> で調べてください。
	  もし提案されていれば、
	  その提案されている修正によって問題を解決できるかもしれません。</p></li><li class="listitem"><p>port の保守担当者に対応してもらいましょう。
	  port スケルトンで <code class="command">make maintainer</code> と入力するか、
	  port の <code class="filename">Makefile</code> を読み、
	  保守担当者の電子メールアドレスを調べてください。
	  保守担当者にメールを送る際には、port の
	  <code class="filename">Makefile</code> の
	  <code class="literal">$FreeBSD:</code> 行、
	  そしてエラーが出力されるまでの出力ログを忘れずに添付してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">特定の保守担当者が存在せず、かわりに <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/mailing-list-faq/article.html" target="_top">メーリングリスト
	    </a> が保守している ports があります。
	    そのような場合には、メールアドレスは
	    <code class="email">&lt;freebsd-listname@FreeBSD.org&gt;</code>
	    のようになります。
	    メールを送る際には、このことに気をつけてください。</p><p xmlns="http://www.w3.org/1999/xhtml">特に <code class="email">&lt;ports@FreeBSD.org&gt;</code>
	    が保守している ports には、保守担当者がいません。
	    そのかわり、
	    そのメーリングリストを購読する人々からなるコミュニティが、
	    修正や対応をおこなっています。
	    もっとボランティアが必要です!</p></div><p>メールに対して返信がなければ、
	  <a class="link" href="../../../../doc/ja_JP.eucJP/articles/problem-reports/article.html" target="_top">
	    FreeBSD 障害報告の書き方</a> に書かれている手順にしたがい、
	  Bugzilla を使ってバグレポートを提出してください。</p></li><li class="listitem"><p>自分で直しましょう!
	  ports システムに関する詳細な情報は
	  <a class="link" href="../../../../doc/ja_JP.eucJP/books/porters-handbook/index.html" target="_top">port
	    作成者のためのハンドブック</a> にあります。
	  このセクションを読むと、壊れてしまった port を直したり、
	  自分で作った port を提出したりできるようになります!</p></li><li class="listitem"><p><a class="xref" href="#pkgng-intro" title="5.4. pkg によるバイナリ package の管理">「<span class="application">pkg</span> によるバイナリ
      package の管理」</a> に書かれている手順にしたがって、
	  package をインストールしてください。</p></li></ol></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11"></a>第6章 X Window System</h2></div><div><span class="authorgroup">X.Org X11 サーバ対応: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Tom</span> <span class="firstname">Ken</span> [FAMILY Given]</span> 、 <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Fonvieille</span> <span class="firstname">Marc</span> [FAMILY Given]</span>. </span></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#x11-synopsis">6.1. この章では</a></span></dt><dt><span class="sect1"><a href="#x-understanding">6.2. 用語の説明</a></span></dt><dt><span class="sect1"><a href="#x-install">6.3. X11 のインストール</a></span></dt><dt><span class="sect1"><a href="#x-config">6.4. X11 の設定</a></span></dt><dt><span class="sect1"><a href="#x-fonts">6.5. X11 でのフォントの使用</a></span></dt><dt><span class="sect1"><a href="#x-xdm">6.6. X ディスプレイマネージャ</a></span></dt><dt><span class="sect1"><a href="#x11-wm">6.7. デスクトップ環境</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x11-synopsis"></a>6.1. この章では</h2></div></div></div><p>FreeBSD
      では、ユーザに強力なグラフィカルインタフェースを提供するために
      X11 を採用しています。
      X11 は、
      <span class="application">Xorg</span>
      (他のソフトウェアパッケージについてはここでは述べません) に実装された、
      フリーで利用できる X Window System です。
      FreeBSD におけるデフォルトかつ公式の X11 サーバは
      X.Org Foundation が開発している
      <span class="application">Xorg</span> です。
      FreeBSD に似たライセンスに従って配布されています。</p><p>X11 がサポートするビデオハードウェアについての情報は、
      <a class="link" href="http://www.x.org/" target="_top">Xorg</a>
      のウェブサイトをご覧ください。</p><p>この章を読めば以下のことがわかります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>X Window System のさまざまなコンポーネントと、
	  それらが互いにどのように連携しているか。</p></li><li class="listitem"><p>X11 のインストールおよび設定方法</p></li><li class="listitem"><p>さまざまなウィンドウマネージャのインストール方法</p></li><li class="listitem"><p>X11 での <span class="trademark">TrueType</span>® フォントの使い方</p></li><li class="listitem"><p>GUI ログイン (<span class="application">XDM</span>)
	  の設定方法</p></li></ul></div><p>この章を読み始める前に以下のことを理解しておく必要があります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>サードパーティ製ソフトウェアのインストール方法
	  (<a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a>)</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-understanding"></a>6.2. 用語の説明</h2></div></div></div><p>X Window System のさまざまなコンポーネントについての詳細や、
      それらがどのようにやり取りするかについてすべて理解する必要はありませんが、
      これらのコンポーネントについて基本的なことを知っていると、
      強力な武器になるでしょう。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">X サーバ</span></dt><dd><p>X は最初からネットワークを意識してデザインされており、
	    <span class="quote">「<span class="quote">クライアント - サーバ</span>」</span> モデルを採用しています。
	    このモデルでは、<span class="quote">「<span class="quote">X サーバ</span>」</span> はキーボードやモニタ、
	    マウスが接続されたコンピュータ上で動きます。
	    このサーバはディスプレイの表示を管理したり、キーボード、
	    マウスからの入力を処理したり、
	    タブレットやビデオプロジェクタ等の他の装置からの入出力を処理します。
	    これは、ある人々を混乱させることがあります。
	    X での用語は彼らが想定するものとは正反対だからです。
	    彼らは <span class="quote">「<span class="quote">X サーバ</span>」</span>
	    は地下にある大きなパワフルなマシンであり、
	    <span class="quote">「<span class="quote">X クライアント</span>」</span>
	    が自分たちのデスク上にあると想像するのです。</p></dd><dt><span class="term">X クライアント</span></dt><dd><p><span class="application">XTerm</span> や
	    <span class="application">Firefox</span> などの各 X アプリケーションは、
	    <span class="quote">「<span class="quote">クライアント</span>」</span> になります。
	    クライアントは <span class="quote">「<span class="quote">この座標にウィンドウを描いてください</span>」</span>
	    といったメッセージをサーバへ送り、サーバは
	    <span class="quote">「<span class="quote">ユーザが OK ボタンを押しました</span>」</span>
	    といったメッセージを送り返します。</p><p>家庭や小さなオフィスのような環境では、X サーバと
	    X クライアントは通常同じコンピュータ上で動いています。
	    X サーバを非力なコンピュータで動かし、
	    X アプリケーションをより高性能なマシンで動かすことも可能です。
	    この場合、
	    X のクライアントとサーバの通信はネットワーク越しに行なわれます。</p></dd><dt><span class="term">ウィンドウマネージャ</span></dt><dd><p>X はスクリーン上でウィンドウがどのように見えるべきか、
	    マウスでそれらをどうやって動かすか、
	    ウィンドウ間を移動するのにどういうキーストロークを使うべきか、
	    各ウィンドウのタイトルバーはどのように見えるべきか、
	    クローズボタンを持つべきかどうか、
	    といったことは規定しません。そのかわりに、X
	    ではそういったことを <span class="quote">「<span class="quote">ウィンドウマネージャ</span>」</span>
	    と呼ばれるアプリケーションに任せます。<a class="link" href="http://xwinman.org/" target="_top">ウィンドウマネージャはたくさん</a>
	    あります。
	    これらのウィンドウマネージャの見た目や使い勝手はそれぞれ異なっています。
	    バーチャルデスクトップをサポートしているものもありますし、
	    デスクトップを操作するキーストロークをカスタマイズできたり、
	    <span class="quote">「<span class="quote">スタート</span>」</span>
	    ボタンやそれに類するものを持っているものもあります。
	    テーマに対応しており、
	    デスクトップの見た目や使い勝手を完全に変えられるものもあります。
	    ウィンドウマネージャは Ports Collection の
	    <code class="filename">x11-wm</code>	カテゴリに用意されています。</p><p>それぞれのウィンドウマネージャは異なる設定機構を備えています。
	    手で設定ファイルを編集しなければならないものや、
	    設定作業のほとんどを GUI ツールで行うことができるものもあります。</p></dd><dt><span class="term">デスクトップ環境</span></dt><dd><p><span class="application">KDE</span> や
	    <span class="application">GNOME</span> は、デスクトップ環境です。
	    これらは、共通のデスクトップのタスクを実行するための完全なアプリケーションスイートを含んでいます。
	    オフィススイート、ウェブブラウザやゲームを含んでいるものもあります。</p></dd><dt><span class="term">フォーカスポリシ</span></dt><dd><p>ウィンドウマネージャは、
	    マウスのフォーカスポリシに責任を持ちます。
	    このポリシは、どのウィンドウがアクティブにキーストロークを
	    受け付けるようにするための方法を提供し、
	    そして、どのウィンドウがアクティブなのかを示します。</p><p>よく知られているフォーカスポリシは
	    <span class="quote">「<span class="quote">click-to-focus</span>」</span> と呼ばれるものです。
	    このポリシは、
	    あるウィンドウ内でマウスをクリックすればそのウィンドウがアクティブになる、
	    というものです。
	    <span class="quote">「<span class="quote">focus-follows-mouse</span>」</span> ポリシでは、
	    マウスポインタの下にいるウィンドウがフォーカスされるというものです。
	    フォーカスを変えるには他のウィンドウにマウスポインタを動かすだけです。
	    マウスがルートウィンドウに移動した時には、
	    このウィンドウがフォーカスされます。
	    <span class="quote">「<span class="quote">sloppy-focus</span>」</span> モデルでは、
	    マウスがルートウィンドウに移動した時には、
	    直前に使われていたウィンドウがフォーカスされています。
	    sloppy-focus では、
	    ポインタが別のウィンドウに移った時のみフォーカスが変わり、
	    現在のウィンドウから出ただけでは変わりません。
	    <span class="quote">「<span class="quote">click-to-focus</span>」</span> ポリシでは、
	    マウスクリックによりアクティブなウィンドウが選択されます。
	    ウィンドウは前面に表示され、他のすべてのウィンドウの前にきます。
	    ポインタが別のウィンドウ上に移動した時でも、
	    すべてのキーストロークがこのウィンドウに届きます。</p><p>それぞれのウィンドウマネージャは、
	    それぞれのフォーカスポリシに対応しています。
	    すべてのものは click-to-focus をサポートしていますし、
	    多くのものは他の方法もサポートしています。
	    どのフォーカスモデルを利用可能かどうかについては、
	    ウィンドウマネージャのドキュメントをご覧ください。</p></dd><dt><span class="term">ウィジェット</span></dt><dd><p>ウィジェットはクリック可能であったり、
	    他の方法で操作可能なすべてのユーザインタフェース用アイテムを指す用語です。
	    ボタンやチェックボックス、ラジオボタン、アイコン、リスト、などがそうです。
	    ウィジェットツールキットはグラフィカルアプリケーションを作成するために使われます。
	    <span class="application">KDE</span> で使われている Qt や
	    <span class="application">GNOME</span> プロジェクトで使われている GTK+
	    といった有名なウィジェットセットがあります。
	    そのため、アプリケーションのルックアンドフィールは、
	    アプリケーションを作成するのに使われたウィジェットツールキットに依存し、
	    異なります。</p></dd></dl></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-install"></a>6.3. X11 のインストール</h2></div></div></div><p>FreeBSD における X11 の実装は、<span class="application">Xorg</span> です。
      <span class="application">Xorg</span> は X.Org Foundation
      がリリースしている X Window System のオープンソースな実装です。
      <span class="application">Xorg</span> は
      <span class="application"><span class="trademark">XFree86</span>™ 4.4RC2</span>
      と X11R6.6 のコードを元にしています。
      現在 FreeBSD Ports Collection で利用可能な
      <span class="application">Xorg</span> のバージョンは
      7.7 です。</p><p>Ports Collection から <span class="application">Xorg</span>
      をビルドしインストールするには、以下のように入力します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11/xorg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">Xorg</span> をすべてビルドするには、
	少なくとも 4 GB の空き容量が必要です。</p></div><p>package から直接 X11 をインストールすることもできます。
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> ツールで扱われるバイナリパッケージが
      X11 についても提供されています。
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> のリモート取得機能を利用する時は、
      package のバージョンは外してください。
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>
      は自動的にそのアプリケーションの最新版を取得します。</p><p>ですから、<span class="application">Xorg</span>
      の package を取得してインストールするには、
      次のように入力します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r xorg</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">上記の例では、サーバ、クライアント、フォントなどを含んだ
	X11 ディストリビューション全体をインストールします。
	分割された X11 のパッケージや ports も利用できます。</p><p xmlns="http://www.w3.org/1999/xhtml">最小の構成で X11 をインストールをするには、
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/xorg-minimal/pkg-descr">x11/xorg-minimal</a>
	をインストールしてください。</p></div><p>この章の残りでは、X11 をどのように設定すればよいか、
      また生産性の高いデスクトップ環境をどのように設定するかについて解説します。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-config"></a>6.4. X11 の設定</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Shumway</span> <span class="firstname">Christopher</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp82242384" class="indexterm"></a><a id="idp82242896" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82243408"></a>6.4.1. はじめに</h3></div></div></div><p>X11 は、ほとんどの機器を自動で設定します。
	古かったり、一般的ではないような機器を使う場合には、設定を始める前に、
	以下のハードウェア情報を集めておくと助けになるでしょう。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>モニタ同期周波数</p></li><li class="listitem"><p>ビデオカードのチップセット</p></li><li class="listitem"><p>ビデオカードのメモリ</p></li></ul></div><a id="idp82247248" class="indexterm"></a><a id="idp82248016" class="indexterm"></a><a id="idp82249168" class="indexterm"></a><a id="idp82249680" class="indexterm"></a><a id="idp82250832" class="indexterm"></a><p>画面の解像度とリフレッシュレートは、
	モニタの水平および垂直同期周波数により決定されます。
	ほとんどすべてのモニタは、これらの値を自動検出します。
	これらの値を自動検出しないモニタもありますが、
	こういった仕様は、付属のマニュアルや、
	製造元のウェブサイトから取得できます。</p><p>ビデオカードのチップセットも自動検出され、
	ビデオドライバの選択に使われます。
	正常に認識されない時のために、
	どのチップセットが使われているかを知っておくとよいでしょう。</p><p>ビデオカードのメモリは、
	グラフィックアダプタがどの解像度とどの色数で動くことができるかを決めます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82253392"></a>6.4.2. X11 の設定</h3></div></div></div><p><span class="application">Xorg</span> は、
	<acronym class="acronym">HAL</acronym> を用いてキーボードやマウスを自動認識します。
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/xorg/pkg-descr">x11/xorg</a> の依存として、
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/hal/pkg-descr">sysutils/hal</a> および
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/dbus/pkg-descr">devel/dbus</a> port
	がインストールされますが、以下のようなエントリを
	<code class="filename">/etc/rc.conf</code> ファイルに追加し、
	有効にする必要があります。</p><pre class="programlisting">hald_enable="YES"
dbus_enable="YES"</pre><p>これらのサービスは、
	<span class="application">Xorg</span> の設定や起動が行われる前に
	(手動や再起動によって) 起動している必要があります。</p><p><span class="application">Xorg</span> は、設定をすることなく</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>startx</code></strong></pre><p>と入力するだけで起動します。</p><p>ある種のハードウェアは、自動設定で動作しなかったり、
	期待したような設定が行われないかもしれません。
	そのような場合には、手動で設定する必要があります。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">GNOME</span>,
	  <span class="application">KDE</span> および
	  <span class="application">Xfce</span> などのデスクトップ環境では、
	  解像度などのスクリーンパラメータを簡単に設定できるツールがあります。
	  したがって、デフォルトの設定が満足するようなものではない場合でも、
	  これらのデスクトップ環境をインストールすることを考えているのであれば、
	  デスクトップ環境をインストールして、
	  スクリーン設定ツールを利用してください。</p></div><p>X11 の設定は複数の段階を経て行います。
	まずは初期設定ファイルを作りましょう。
	スーパーユーザになって次のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>Xorg -configure</code></strong></pre><p>これにより、<code class="filename">/root</code>
	ディレクトリに <code class="filename">xorg.conf.new</code>
	という X11 の設定ファイルの雛形が生成されます
	(<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> か直接ログインのどちらを利用したかが、受け継がれる
	<code class="envar">$HOME</code> 環境変数に影響します)。
	X11 プログラムはシステム上のグラフィックハードウェアを検出し、
	そのハードウェア用の適切なドライバを読み込む設定ファイルを作ります。</p><p>次のステップは、作成した設定ファイルで
	<span class="application">Xorg</span>
	がそのグラフィックハードウェアで動くことを確認することです。
	以下を実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>Xorg -config xorg.conf.new -retro</code></strong></pre><p>黒とグレーのグリッドと
	X のマウスポインタが現われればその設定は成功です。
	テストを終了するには、コマンドを実行した仮想コンソールに
	<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F<em class="replaceable"><code>n</code></em></strong></span> (1 番目の仮想コンソールへは <span class="keycap"><strong>F1</strong></span>)
	と入力して切り替え、
	<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>C</strong></span> と入力してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">
	  <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Backspace</strong></span> キーの組み合わせでも
	  <span class="application">Xorg</span> を終了できます。
	  このキー操作を利用する場合には、
	  X 端末エミュレータで以下のコマンドを入力してください。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setxkbmap -option terminate:ctrl_alt_bksp</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">または、<span class="application">hald</span> 用のキーボード設定ファイル
	  <code class="filename">x11-input.fdi</code> を作成して、<code class="filename">/usr/local/etc/hal/fdi/policy</code>
	  ディレクトリに保存してください。
	  このファイルには以下を含める必要があります。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;
&lt;deviceinfo version="0.2"&gt;
  &lt;device&gt;
    &lt;match key="info.capabilities" contains="input.keyboard"&gt;
	  &lt;merge key="input.x11_options.XkbOptions" type="string"&gt;terminate:ctrl_alt_bksp&lt;/merge&gt;
    &lt;/match&gt;
  &lt;/device&gt;
&lt;/deviceinfo&gt;</pre><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">hald</span>
	  がこのファイルを読み込むように、
	  コンピュータを再起動してください。</p><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">xorg.conf.new</code> の
	  <code class="literal">ServerLayout</code> もしくは <code class="literal">ServerFlags</code>
	  セクションに、以下の行を追加する必要もあるでしょう。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">Option	"DontZap"	"off"</pre></div><p>もしマウスが動作しなければ、
	先へ進む前にマウスの設定を行う必要があります。
	FreeBSD インストールの章の <a class="xref" href="#mouse" title="3.10.9. マウスの設定">「マウスの設定」</a> を参照してください。
	さらに、
	最近の <span class="application">Xorg</span> では、デバイスの自動認識のため、
	<code class="filename">xorg.conf</code> の
	<code class="literal">InputDevice</code> セクションは無視されます。
	古い設定の記述を利用するには、
	以下の行をファイルの <code class="literal">ServerLayout</code> もしくは、
	<code class="literal">ServerFlags</code> セクションに追加してください。</p><pre class="programlisting">Option "AutoAddDevices" "false"</pre><p>これで、以前のバージョンのように、入力デバイスを
	(キーボードレイアウトの変更のように)
	必要なオプションを用いて設定できるようになります。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">すでに説明したように、デフォルトで
	  <span class="application">hald</span>
	  デーモンがキーボードを自動的に認識します。
	  キーボードレイアウトやモデルを正しく認識しない場合でも、
	  <span class="application">GNOME</span>,
	  <span class="application">KDE</span> もしくは
	  <span class="application">Xfce</span>
	  のようなデスクトップ環境が、
	  キーボードの設定ツールを提供している可能性があります。
	  しかしながら、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setxkbmap&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">setxkbmap</span>(1)</span></a> ユーティリティや
	  <span class="application">hald</span> の設定を利用することで、
	  キーボードのプロパティを直接設定できます。</p><p xmlns="http://www.w3.org/1999/xhtml">たとえば、フランス語のレイアウトの PC 102
	  キーボードを使いたい場合には、
	  <span class="application">hald</span> のキーボード設定ファイル
	  <code class="filename">x11-input.fdi</code> を作成し、<code class="filename">/usr/local/etc/hal/fdi/policy</code>
	  ディレクトリに保存してください。
	  このファイルは以下を含んでいる必要があります。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;
&lt;deviceinfo version="0.2"&gt;
  &lt;device&gt;
    &lt;match key="info.capabilities" contains="input.keyboard"&gt;
	  &lt;merge key="input.x11_options.XkbModel" type="string"&gt;pc102&lt;/merge&gt;
	  &lt;merge key="input.x11_options.XkbLayout" type="string"&gt;fr&lt;/merge&gt;
    &lt;/match&gt;
  &lt;/device&gt;
&lt;/deviceinfo&gt;</pre><p xmlns="http://www.w3.org/1999/xhtml">このファイルがすでに存在する場合には、
	  キーボードの設定に関する部分をただ単にコピーし、
	  ファイルに追加してください。</p><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">hald</span>
	  がこのファイルを読み込むように、
	  コンピュータを再起動してください。</p><p xmlns="http://www.w3.org/1999/xhtml">X 端末やスクリプトから以下のコマンドラインを実行することでも、
	  同様に設定できます。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setxkbmap -model pc102 -layout fr</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">
	  <code class="filename">/usr/local/share/X11/xkb/rules/base.lst</code>
	  ファイルは、利用可能なキーボード、レイアウトおよびオプションの一覧です。</p></div><a id="idp82304080" class="indexterm"></a><p>次に <code class="filename">xorg.conf.new</code>
	を好みに合うように調整します。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=emacs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">emacs</span>(1)</span></a> や <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ee&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ee</span>(1)</span></a>
	のようなテキストエディタでファイルを開いてください。
	モニタが古い場合や、通常とは異なるモデルでは、
	同期周波数の自動認識に対応していないので、
	これらの値を <code class="filename">xorg.conf.new</code> の
	<code class="literal">"Monitor"</code>
	セクションに次のように書き加えます。</p><pre class="programlisting">
	Section "Monitor"
        Identifier   "Monitor0"
        VendorName   "Monitor Vendor"
        ModelName    "Monitor Model"
        HorizSync    30-107
        VertRefresh  48-120
	EndSection
      </pre><p>ほとんどのモニタは同期周波数の自動認識に対応しているので、
	これらの値を手動で入力する必要はありません。
	自動認識に対応していないモニタでは、
	ダメージの可能性を避けるため、
	メーカーが提供している値のみを入力してください。</p><p>X はモニタが対応していれば DPMS (Energy Star)
	機能を使うことができます。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xset&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xset</span>(1)</span></a> プログラムでタイムアウトをコントロールしたり、
	強制的にスタンバイ、サスペンドや電源オフにすることができます。
	モニタの DPMS 機能を有効にしたい場合は、
	<code class="literal">"Monitor"</code>
	セクションに次の行を加えてください。</p><pre class="programlisting">Option       "DPMS"</pre><a id="idp82310992" class="indexterm"></a><p><code class="filename">xorg.conf.new</code>
	はエディタで開いたままにしておき、
	デフォルトの解像度と色数を好みで選びましょう。
	<code class="literal">"Screen"</code>
	セクションに以下のように書きます。</p><pre class="programlisting">Section "Screen"
        Identifier "Screen0"
        Device     "Card0"
        Monitor    "Monitor0"
        DefaultDepth 24
        SubSection "Display"
                Viewport  0 0
                Depth     24
                Modes     "1024x768"
        EndSubSection
EndSection</pre><p><code class="literal">DefaultDepth</code> というキーワードは
	実行時のデフォルトの色数について記述するためのものです。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=Xorg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">Xorg</span>(1)</span></a> のコマンドラインスイッチ <code class="option">-depth</code>
	が使用された場合はそちらが優先されます。
	<code class="literal">Modes</code> というキーワードは、
	与えられた色数におけるデフォルトの解像度を記述しておくためのものです。
	ターゲットのシステムのグラフィックハードウェアによって定義されている、
	VESA スタンダードモードのみがサポートされていることに注意してください。
	上の例ではデフォルトの色数はピクセルあたり 24 ビットであり、
	この色数での解像度は 1024 ピクセル× 768 ピクセルです。</p><p>最後に、設定ファイルを保存し、
	上の例にあるようにテストしてみてください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">トラブルシューティングの過程で手助けするツールのひとつに
	  X11 のログファイルがあります。これには、
	  X11 サーバが検知したデバイスそれぞれについての情報があります。
	  <span class="application">Xorg</span> のログファイル名は
	  <code class="filename">/var/log/Xorg.0.log</code>
	  という形式です。実際のログファイル名は
	  <code class="filename">Xorg.0.log</code> から
	  <code class="filename">Xorg.8.log</code> のように変わります。</p></div><p>すべてうまくいったなら、設定ファイルを <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=Xorg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">Xorg</span>(1)</span></a>
	が見つけることができる共通の場所に置きます。
	これは、通常は <code class="filename">/etc/X11/xorg.conf</code> や
	<code class="filename">/usr/local/etc/X11/xorg.conf</code> です。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp xorg.conf.new /etc/X11/xorg.conf</code></strong></pre><p>これで X11 の設定は完了です。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=startx&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">startx</span>(1)</span></a> ユーティリティで
	<span class="application">Xorg</span> を起動できます。また、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a> を使って X11 サーバを起動することもできます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82336464"></a>6.4.3. 高度な設定</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82337104"></a>6.4.3.1. <span class="trademark">Intel</span>® <code class="literal">i810</code>
	  グラフィックチップセットの設定</h4></div></div></div><a id="idp82338512" class="indexterm"></a><p><span class="trademark">Intel</span>® i810 統合チップセットを設定するには、
	  X11 にカードを制御させるために
	  AGP プログラミングインタフェースである
	  <code class="filename">agpgart</code> が必要になります。
	  詳しくは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=agp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">agp</span>(4)</span></a>
	  ドライバのマニュアルページをご覧ください。</p><p>このドライバを用いることで、
	  他のグラフィックカードと同様に設定を行うことができるようになります。
	  カーネルに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=agp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">agp</span>(4)</span></a> ドライバが組み込まれていないシステムでは、
	  このモジュールを <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>
	  を使って読み込もうとしても動作しないことに注意してください。
	  このドライバは、
	  起動時にカーネル内に存在するようにカーネル内部に組み込むか、
	  <code class="filename">/boot/loader.conf</code>
	  を使わなければなりません。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82343760"></a>6.4.3.2. ワイドスクリーンフラットパネルの追加</h4></div></div></div><a id="idp82344400" class="indexterm"></a><p>この章では、設定に関する幾分高度な知識を必要とします。
	  これまでに述べた標準ツールを使って設定に失敗する場合は、
	  ログファイルを参照してください。
	  ログファイルには、
	  設定のために有用な情報が十分含まれています。
	  テキストエディタを使用する必要があるでしょう。</p><p>現在のワイドスクリーン
	  (WSXGA, WSXGA+, WUXGA, WXGA, WXGA+ など) は、
	  16:10 や 10:9 形式、または
	  (問題を含む可能性のある) 他のアスペクト比に対応しています。
	  以下は、16:10 アスペクト比のスクリーン解像度の例です。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>2560x1600</p></li><li class="listitem"><p>1920x1200</p></li><li class="listitem"><p>1680x1050</p></li><li class="listitem"><p>1440x900</p></li><li class="listitem"><p>1280x800</p></li></ul></div><p>これらの解像度のひとつを以下のように
	  <code class="literal">"Screen" セクション</code> の
	  <code class="literal">Mode</code> に追加してください。</p><pre class="programlisting">Section "Screen"
Identifier "Screen0"
Device     "Card0"
Monitor    "Monitor0"
DefaultDepth 24
SubSection "Display"
	Viewport  0 0
	Depth     24
	Modes     "1680x1050"
EndSubSection
EndSection</pre><p><span class="application">Xorg</span> は、I2C/DDC
	  を通してワイドスクリーンの解像度に関する情報を取得できるので、
	  モニタの周波数や解像度の範囲を把握しています。</p><p>もし、これらの <code class="literal">ModeLines</code>
	  についての情報がドライバに存在しないのであれば、
	  <span class="application">Xorg</span>
	  にヒントを与えなけれならないでしょう。
	  <code class="literal">ModeLine</code>
	  を手動で設定するのに十分な情報を
	  <code class="filename">/var/log/Xorg.0.log</code>
	  から得ることができます。
	  以下のような情報を探してください。</p><pre class="programlisting">(II) MGA(0): Supported additional Video Mode:
(II) MGA(0): clock: 146.2 MHz   Image Size:  433 x 271 mm
(II) MGA(0): h_active: 1680  h_sync: 1784  h_sync_end 1960 h_blank_end 2240 h_border: 0
(II) MGA(0): v_active: 1050  v_sync: 1053  v_sync_end 1059 v_blanking: 1089 v_border: 0
(II) MGA(0): Ranges: V min: 48  V max: 85 Hz, H min: 30  H max: 94 kHz, PixClock max 170 MHz</pre><p>これは EDID と呼ばれる情報です。
	  この情報を用いて <code class="literal">ModeLine</code>
	  を作成するには、
	  正しい順番に数字を入力するだけです。 </p><pre class="programlisting"> ModeLine &lt;name&gt; &lt;clock&gt; &lt;4 horiz. timings&gt; &lt;4 vert. timings&gt;</pre><p>この例では "Monitor" セクションの ModeLine
	  は以下のようになります。</p><pre class="programlisting">Section "Monitor"
Identifier      "Monitor1"
VendorName      "Bigname"
ModelName       "BestModel"
ModeLine        "1680x1050" 146.2 1680 1784 1960 2240 1050 1053 1059 1089
Option          "DPMS"
EndSection</pre><p>以上の簡単な編集作業が終わったら、
	  新しいワイドスクリーンモニタ上で X が動作するでしょう。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-fonts"></a>6.5. X11 でのフォントの使用</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Stokely</span> <span class="firstname">Murray</span> [FAMILY Given]</span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="type1"></a>6.5.1. Type1 フォント</h3></div></div></div><p>X11 に付いてくるデフォルトのフォントは、
	通常のデスクトップパブリッシングアプリケーションにとっては理想的とは言えない程度のものです。
	文字を大きくするとジャギーになりプロフェッショナルとは言えないようなものになりますし、
	小さなフォントは頭が悪そうに見えます。
	しかし、世の中には質の高い Type1 (<span class="trademark">PostScript</span>®)
	フォントがいくつかあり、
	X11 ではそれらを簡単に利用することができます。
	例えば、URW フォントコレクション
	(<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/urwfonts/pkg-descr">x11-fonts/urwfonts</a>)
	には高品質の Type1 フォント
	(<span class="trademark">Times Roman</span>®,
	<span class="trademark">Helvetica</span>®,
	<span class="trademark">Palatino</span>® など)
	が含まれています。freefont コレクション
	(<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/freefonts/pkg-descr">x11-fonts/freefonts</a>)
	にはもっとたくさんのフォントが含まれていますが、
	それらは <span class="application">Gimp</span>
	のようなグラフィックソフトウェアで使用するためのものであり、
	スクリーンフォントとしては十分ではありません。さらに、X11
	は簡単に <span class="trademark">TrueType</span>® フォントを使うように設定することも可能です。
	詳しくは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=X&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">X</span>(7)</span></a> のマニュアルページか
	<a class="link" href="#truetype" title="6.5.2. TrueType® フォント"><span class="trademark">TrueType</span>® フォントの節</a>
	を参照してください。</p><p>上記の Type1 フォントコレクションを Ports Collection
	から入れる場合には次のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11-fonts/urwfonts</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>freefont や他のコレクションでも同じようにします。
	X サーバがこれらのフォントを検出できるようにするには
	X サーバ設定ファイル (<code class="filename">/etc/X11/xorg.conf</code>)
	の適切な場所に次のような行を加えます。</p><pre class="programlisting">FontPath "/usr/local/lib/X11/fonts/URW/"</pre><p>別の方法としては、
	X のセッション中に次のようなコマンドラインを実行します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xset fp+ /usr/local/lib/X11/fonts/URW</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>これは動くのですが、X
	のセッションが終了すると消えてしまいます。
	消えないようにするには X の起動時に読み込まれるファイル
	(通常の <code class="command">startx</code> セッションの場合は
	<code class="filename">~/.xinitrc</code>, <span class="application">XDM</span>
	のようなグラフィカルなログインマネージャを通してログインする時は
	<code class="filename">~/.xsession</code>) に加えておきます。
	三番目の方法は新しい
	<code class="filename">/usr/local/etc/fonts/local.conf</code>
	ファイルを使うことです。
	これに関しては <a class="link" href="#antialias" title="6.5.3. フォントのアンチエイリアス">アンチエイリアス</a>
	節をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="truetype"></a>6.5.2. <span class="trademark">TrueType</span>® フォント</h3></div></div></div><a id="idp82385232" class="indexterm"></a><a id="idp82386000" class="indexterm"></a><p><span class="application">Xorg</span> には、
	<span class="trademark">TrueType</span>® フォントのレンダリング機能が組み込まれています。
	この機能を実現するために 2 つの異なるモジュールがあります。
	ここでは、freetype
	の方が他のフォントレンダリングバックエンドと整合性が高いので、
	このモジュールを使うことにします。
	freetype モジュールを使うためには
	<code class="filename">/etc/X11/xorg.conf</code> ファイルの
	<code class="literal">"Module"</code>
	セクションに以下の行を追加するだけです。</p><pre class="programlisting">Load  "freetype"</pre><p>さて、まずは <span class="trademark">TrueType</span>® フォント用のディレクトリ
	(例えば <code class="filename">/usr/local/lib/X11/fonts/TrueType</code>)
	を作り、そこに <span class="trademark">TrueType</span>® フォントをすべて放り込みましょう。
	<span class="trademark">Macintosh</span>® の <span class="trademark">TrueType</span>®
	フォントは、そのままでは使うことができませんので注意してください。
	X11 で使うには <span class="trademark">UNIX</span>®/<span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>®
	用のフォーマットでなければなりません。
	ファイルを置いたら <span class="application">ttmkfdir</span> を使って
	<code class="filename">fonts.dir</code> ファイルを作り、
	X のフォントレンダラが新しいファイルがイントールされたことを分かるようにしてください。
	<code class="command">ttmkfdir</code> は FreeBSD Ports Collection の
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/ttmkfdir/pkg-descr">x11-fonts/ttmkfdir</a>
	からインストールできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/local/lib/X11/fonts/TrueType</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ttmkfdir -o fonts.dir</code></strong></pre><p>次に <span class="trademark">TrueType</span>®
	フォントのディレクトリをフォントパスに追加します。
	上の <a class="link" href="#type1" title="6.5.1. Type1 フォント">Type1</a>
	フォントの場合と同じように、</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xset fp+ /usr/local/lib/X11/fonts/TrueType</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>とするか、もしくは <code class="filename">xorg.conf</code>
	ファイルに <code class="literal">FontPath</code> 行を追加します。</p><p>これで終わりです。
	<span class="application">Gimp</span> や
	<span class="application">Apache OpenOffice</span>
	といったすべての X アプリケーションから
	<span class="trademark">TrueType</span>® フォントを使うことができます。
	(高解像度なディスプレイで見るウェブページ上のテキストみたいな)
	とても小さなフォントや
	(<span class="application"><span class="trademark">StarOffice</span>™</span> にあるような)
	非常に大きなフォントもかなり綺麗に見えるようになることでしょう。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="antialias"></a>6.5.3. フォントのアンチエイリアス</h3></div><div><span class="authorgroup">更新 : <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Clarke</span> <span class="firstname">Joe Marcus</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp82414800" class="indexterm"></a><a id="idp82415568" class="indexterm"></a><p><code class="filename">/usr/local/lib/X11/fonts/</code> と
	<code class="filename">~/.fonts/</code> にあるすべての X11 のフォントが、Xft
	に対応しているアプリケーションで自動的にアンチエイリアス表示できるようになりました。
	<span class="application">KDE</span>, <span class="application">GNOME</span> および
	<span class="application">Firefox</span>
	のような最新のアプリケーションは、Xft に対応しています。</p><p>どのフォントがアンチエイリアスされるかを制御するため、
	もしくはアンチエイリアスの特性を設定するために、
	<code class="filename">/usr/local/etc/fonts/local.conf</code>
	ファイルを作成 (すでに存在しているのなら編集) します。
	多くの Xft フォントシステムの高度な機能をこのファイルを使って調整できます。
	この節ではいくつか簡単なところだけを紹介します。
	詳しくは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fonts-conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fonts-conf</span>(5)</span></a> をご覧ください。</p><a id="idp82420688" class="indexterm"></a><p>このファイルは XML 形式でなければなりません。
	大文字小文字の区別に注意を払い、
	すべてのタグが正しく閉じられているか確認してください。
	ファイルは一般的な XML ヘッダで始まり、DOCTYPE 定義と
	<code class="literal">&lt;fontconfig&gt;</code>
	タグがその後にきます。</p><pre class="programlisting">
        &lt;?xml version="1.0"?&gt;
        &lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
        &lt;fontconfig&gt;
      </pre><p>すでに説明したように、
	<code class="filename">/usr/local/lib/X11/fonts/</code> と
	<code class="filename">~/.fonts/</code> にあるすべてのフォントは
	Xft 対応のアプリケーションで利用できます。
	これら 2 つ以外に別のディレクトリを追加したいのなら、
	<code class="filename">/usr/local/etc/fonts/local.conf</code>
	に以下のような行を追加します。</p><pre class="programlisting">&lt;dir&gt;/path/to/my/fonts&lt;/dir&gt;</pre><p>新しいフォント、
	そして特に新しいフォントディレクトリを追加したら、
	以下のコマンドを実行してフォントキャッシュを再構築してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fc-cache -f</code></strong></pre><p>アンチエイリアスをかけることによって境界が少しぼやけ、
	そのためにとても小さなテキストはさらに読みやすくなり、
	大きなフォントでは <span class="quote">「<span class="quote">ギザギザ</span>」</span> が消えるのです。
	しかし、普通のテキストにかけた場合には目が疲れてしまうこともあります。
	14 ポイント以下のサイズのフォントについて、
	アンチエイリアスをかけないようにするには次の行を加えます。</p><pre class="programlisting">        &lt;match target="font"&gt;
            &lt;test name="size" compare="less"&gt;
                &lt;double&gt;14&lt;/double&gt;
            &lt;/test&gt;
            &lt;edit name="antialias" mode="assign"&gt;
                &lt;bool&gt;false&lt;/bool&gt;
            &lt;/edit&gt;
        &lt;/match&gt;
        &lt;match target="font"&gt;
            &lt;test name="pixelsize" compare="less" qual="any"&gt;
                &lt;double&gt;14&lt;/double&gt;
            &lt;/test&gt;
            &lt;edit mode="assign" name="antialias"&gt;
                &lt;bool&gt;false&lt;/bool&gt;
            &lt;/edit&gt;
        &lt;/match&gt;</pre><a id="idp82435024" class="indexterm"></a><p>いくつかの等幅フォントは、
	アンチエイリアスをかけるとスペーシングがうまくいかなくなる場合があります。
	特に <span class="application">KDE</span> でその傾向があるようです。
	解決策の一つとして、そういったフォントのスペーシングを
	100 に設定する方法があります。
	そうするためには次の行を加えてください。</p><pre class="programlisting">        &lt;match target="pattern" name="family"&gt;
            &lt;test qual="any" name="family"&gt;
                &lt;string&gt;fixed&lt;/string&gt;
            &lt;/test&gt;
            &lt;edit name="family" mode="assign"&gt;
                &lt;string&gt;mono&lt;/string&gt;
            &lt;/edit&gt;
        &lt;/match&gt;
        &lt;match target="pattern" name="family"&gt;
            &lt;test qual="any" name="family"&gt;
                &lt;string&gt;console&lt;/string&gt;
            &lt;/test&gt;
            &lt;edit name="family" mode="assign"&gt;
                &lt;string&gt;mono&lt;/string&gt;
            &lt;/edit&gt;
        &lt;/match&gt;</pre><p>(これは固定サイズのフォントに <code class="literal">"mono"</code>
	という一般的な別名をつけます) そして以下を追加します。</p><pre class="programlisting">        &lt;match target="pattern" name="family"&gt;
            &lt;test qual="any" name="family"&gt;
                &lt;string&gt;mono&lt;/string&gt;
            &lt;/test&gt;
            &lt;edit name="spacing" mode="assign"&gt;
                &lt;int&gt;100&lt;/int&gt;
            &lt;/edit&gt;
        &lt;/match&gt;</pre><p>Helvetica の様なある種のフォントは、
	アンチエイリアスすると問題が起こるでしょう。
	たいてい、フォントが縦に半分に切られて表示されます。
	最悪の場合、アプリケーションがクラッシュします。
	これを回避するには、以下を <code class="filename">local.conf</code>
	に追加します。</p><pre class="programlisting">        &lt;match target="pattern" name="family"&gt;
            &lt;test qual="any" name="family"&gt;
                &lt;string&gt;Helvetica&lt;/string&gt;
            &lt;/test&gt;
            &lt;edit name="family" mode="assign"&gt;
                &lt;string&gt;sans-serif&lt;/string&gt;
            &lt;/edit&gt;
        &lt;/match&gt;</pre><p><code class="filename">local.conf</code> の編集を終えたら、
	ファイルの末尾が <code class="literal">&lt;/fontconfig&gt;</code>
	タグで終わるようにしてください。
	これを行わなければ、変更は無視されるでしょう。</p><p>最後に、ユーザは自分だけの設定を各自の
	<code class="filename">.fonts.conf</code> ファイルに追加できます。
	これを行うためには、それぞれのユーザが単に
	<code class="filename">~/.fonts.conf</code> を作成するだけです。
	このファイルも XML 形式でなければなりません。</p><a id="idp82441936" class="indexterm"></a><a id="idp82442448" class="indexterm"></a><p>最後に一つ。LCD
	スクリーンではサブピクセルサンプリングが必要な場合があります。
	これは、基本的には (水平方向に分かれている) 赤、緑、
	青の各コンポーネントを別々に扱うことによって水平方向の解像度を良くするというもので、
	劇的な結果が得られます。
	これを有効にするには <code class="filename">local.conf</code>
	ファイルに次の行を加えます。</p><pre class="programlisting">
        &lt;match target="font"&gt;
            &lt;test qual="all" name="rgba"&gt;
                &lt;const&gt;unknown&lt;/const&gt;
            &lt;/test&gt;
            &lt;edit name="rgba" mode="assign"&gt;
                &lt;const&gt;rgb&lt;/const&gt;
            &lt;/edit&gt;
        &lt;/match&gt;
      </pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">ディスプレイの種類にもよりますが、
	  <code class="literal">rgb</code> ではなく
	  <code class="literal">bgr</code> や <code class="literal">vrgb</code>、もしくは
	  <code class="literal">vbgr</code> の場合もあるので、
	  試してみて最も良いものを使ってください。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-xdm"></a>6.6. X ディスプレイマネージャ</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Kingsley</span> <span class="firstname">Seth</span> [FAMILY Given]</span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82449744"></a>6.6.1. 概要</h3></div></div></div><a id="idp82450384" class="indexterm"></a><p>X ディスプレイマネージャ (<span class="application">XDM</span>)
	は X Window System のオプショナルな一部分であり、
	ログインセッションの管理に用います。
	最低限の機能を実装した <span class="quote">「<span class="quote">X 端末</span>」</span> やデスクトップ、
	大規模なネットワークディスプレイサーバといった場面ではこれが有用です。
	X Window System はネットワークとプロトコルから独立しているため、
	ネットワークで繋がれた
	X のクライアントとサーバを動かすための設定はかなり幅が広くなります。
	<span class="application">XDM</span>
	はどのディスプレイサーバに接続するかを選択でき、
	ログイン名とパスワードの組み合わせなど認証情報を入力できるグラフィカルなインタフェースを提供しています。</p><p><span class="application">XDM</span> がユーザに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>
	(詳しくは <a class="xref" href="#term-config" title="19.3.2. 設定">「設定」</a> をご覧ください)
	と同じ機能を提供することを考えてみてください。
	つまり、ディスプレイ上でシステムへのログインができ、
	ユーザの代わりにセッションマネージャ
	(通常は X のウィンドウマネージャ) を起動することができるのです。
	それから <span class="application">XDM</span> は、
	ユーザが作業を終えてディスプレイからログアウトする合図を送ってきてプログラムが終了するのを待ちます。
	この時点で、<span class="application">XDM</span>
	は次にログインするユーザのためにログイン画面や
	chooser 画面を表示できます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82455120"></a>6.6.2. XDM の使用</h3></div></div></div><p><span class="application">XDM</span> を使用するには、
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/xdm/pkg-descr">x11/xdm</a>
	port をインストールしてください
	(最近の <span class="application">Xorg</span> のバージョンでは、
	デフォルトでインストールされません)。
	<span class="application">XDM</span> のデーモンプログラムは
	<code class="filename">/usr/local/bin/xdm</code> にあります。
	このプログラムは <code class="systemitem">root</code>
	になればいつでも起動することができ、
	ローカルマシン上のディスプレイの管理を始めます。
	マシンをブートする際、いつも <span class="application">XDM</span>
	を起動したい場合には、<code class="filename">/etc/ttys</code>
	にそのためのエントリを加えておくのが簡単です。
	このファイルのフォーマットや使用方法についての詳細は
	<a class="xref" href="#term-etcttys" title="19.3.2.1. /etc/ttys へのエントリの追加">「<code class="filename">/etc/ttys</code> へのエントリの追加」</a> を参照してください。
	デフォルトの <code class="filename">/etc/ttys</code>
	ファイルには仮想端末上で <span class="application">XDM</span>
	デーモンを起動するための行:</p><pre class="screen">ttyv8	"/usr/local/bin/xdm -nodaemon"	xterm	off secure</pre><p>があります。
	このエントリはデフォルトでは無効になっており、有効にするには
	5 番目のカラムを <code class="literal">off</code> から
	<code class="literal">on</code> にし、<a class="xref" href="#term-hup" title="19.3.2.2. init にファイル /etc/ttys の再読み込みをさせる">「<code class="command">init</code> にファイル
	  <code class="filename">/etc/ttys</code> の再読み込みをさせる」</a>
	の指示に従って <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> を再起動します。
	最初のカラムはこのプログラムが管理する端末の名前で、この場合
	<code class="literal">ttyv8</code> になります。
	つまり、<span class="application">XDM</span> は
	9 番目の仮想端末で起動されるということです。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82468304"></a>6.6.3. XDM の設定</h3></div></div></div><p><span class="application">XDM</span> の設定用ディレクトリは
	<code class="filename">/usr/local/lib/X11/xdm</code> です。
	このディレクトリには <span class="application">XDM</span>
	の振る舞いや見た目を変更するために用いられるいくつかのファイルがあります。
	だいたいは以下のような感じです。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>ファイル</th><th>説明</th></tr></thead><tbody><tr><td><code class="filename">Xaccess</code></td><td>クライアント認証のルールセット</td></tr><tr><td><code class="filename">Xresources</code></td><td>デフォルトの X リソース</td></tr><tr><td><code class="filename">Xservers</code></td><td>管理すべきリモートやローカルのディスプレイのリスト</td></tr><tr><td><code class="filename">Xsession</code></td><td>デフォルトのログイン時のセッションスクリプト</td></tr><tr><td><code class="filename">Xsetup_</code>*</td><td>ログインインタフェースの前にアプリケーションを起動するためのスクリプト</td></tr><tr><td><code class="filename">xdm-config</code></td><td>このマシンで動いているすべてのディスプレイのグローバルな設定</td></tr><tr><td><code class="filename">xdm-errors</code></td><td>サーバプログラムによって生成されるエラー</td></tr><tr><td><code class="filename">xdm-pid</code></td><td>現在動いている XDM のプロセス ID</td></tr></tbody></table></div><p>このディレクトリにはまた、<span class="application">XDM</span>
	の動作中にデスクトップをセットアップするために用いられるスクリプトやプログラムがいくつかあります。
	それぞれのファイルの目的を簡単に解説しましょう。
	正確な文法や使い方は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a> に記述されています。</p><p>デフォルトの設定では、単純な四角のログインウィンドウがあり、
	そこにはマシンのホスト名が大きなフォントで表示され、
	<span class="quote">「<span class="quote">Login:</span>」</span> と <span class="quote">「<span class="quote">Password:</span>」</span>
	のプロンプトがその下に表示されています。
	<span class="application">XDM</span>
	スクリーンの見ためや使い勝手を変えるにはここから始めるのがいいでしょう。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82491472"></a>6.6.3.1. Xaccess</h4></div></div></div><p><span class="application">XDM</span>
	  がコントロールするディスプレイに接続するためのプロトコルは
	  X Display Manager Connection Protocol (XDMCP) と呼ばれます。
	  このファイルにはリモートのマシンからの
	  XDMCP 接続をコントロールするためのルールセットが書かれます。
	  これは、<code class="filename">xdm-config</code>
	  を変更してリモートからのコネクションを待ち受けるようにしない限り無視されます。
	  デフォルトでは、どのクライアントからの接続も拒否します。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82493264"></a>6.6.3.2. Xresources</h4></div></div></div><p>これはディスプレイの chooser とログインスクリーン用の
	  application-defaults ファイルです。
	  このファイルでログインプログラムの見た目を変更することができます。
	  フォーマットは X11 のドキュメントで記述されている
	  app-defaults ファイルのものと同じです。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82494416"></a>6.6.3.3. Xservers</h4></div></div></div><p>これは、chooser
	  が選択肢として提供するリモートのディスプレイの一覧です。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82495568"></a>6.6.3.4. Xsession</h4></div></div></div><p><span class="application">XDM</span>
	  でログインした後に実行されるデフォルトのセッションスクリプトです。
	  通常、各ユーザは <code class="filename">~/.xsession</code>
	  というカスタマイズしたセッションスクリプトを持っており、
	  こちらが優先されます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82497360"></a>6.6.3.5. Xsetup_*</h4></div></div></div><p>これらは chooser
	  やログインインタフェースが表示される前に自動的に実行されます。
	  それぞれのディスプレイに対して、<code class="filename">Xsetup_</code>
	  に続けてローカルのディスプレイ番号を付けた
	  (たとえば <code class="filename">Xsetup_0</code>)
	  名前のついたスクリプトがあります。
	  典型的な使い方は <code class="command">xconsole</code>
	  のようなバックグラウンドで動かすプログラムを一つか二つ起動することです。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82503888"></a>6.6.3.6. xdm-config</h4></div></div></div><p>app-defaults の書式で書かれた、
	  このインストレーションで管理されるすべてのディスプレイに適用される設定を保持しています。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82505040"></a>6.6.3.7. xdm-errors</h4></div></div></div><p>このファイルには <span class="application">XDM</span>
	  が起動しようとしている X サーバからの出力が書き出されます。
	  <span class="application">XDM</span>
	  が起動しようとしているディスプレイがなんらかの理由でハングした場合、
	  このファイルのエラーメッセージを見てください。
	  そういったメッセージは各ユーザの
	  <code class="filename">~/.xsession-errors</code>
	  にもセッション毎に書き出されます。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82507472"></a>6.6.4. ネットワークディスプレイサーバの起動</h3></div></div></div><p>あるディスプレイサーバに他のクライアントが接続することができるようにするために、
	アクセスコントロールのルールを編集し、
	コネクションリスナを有効にする必要があります。
	デフォルトでは保守的な設定になっています。
	<span class="application">XDM</span>
	がそういったコネクションを待ち受けるようにするためには
	<code class="filename">xdm-config</code>
	にある次の行をコメントアウトします。</p><pre class="screen">! SECURITY: do not listen for XDMCP or Chooser requests
! Comment out this line if you want to manage X terminals with xdm
DisplayManager.requestPort:     0</pre><p>そして、<span class="application">XDM</span> を再起動します。
	app-defaults ファイルにおけるコメントは <span class="quote">「<span class="quote">!</span>」</span>
	であっていつものような <span class="quote">「<span class="quote">#</span>」</span>
	ではないことに注意してください。
	アクセス制限はもっと厳しくしてもよいかもしれません。
	<code class="filename">Xaccess</code>
	にある例を参考にしたり、詳細についてオンラインマニュアル
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a> を参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82512848"></a>6.6.5. XDM の代わりになるもの</h3></div></div></div><p>デフォルトの <span class="application">XDM</span>
	に代わるものがいくつかあります。
	一つは <span class="application">KDM</span>
	(<span class="application">KDE</span> に付属しています)
	はその一つであり、この章の後ろで解説します。
	<span class="application">KDM</span> ディスプレイマネージャは、
	ログイン時にウィンドウマネージャを選ぶことができるのに加え、
	見た目もかなり綺麗にしてくれます。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x11-wm"></a>6.7. デスクトップ環境</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Vaschetto</span> <span class="firstname">Valentino</span> [FAMILY Given]</span>. </span></div></div></div><p>このセクションでは、FreeBSD 上の X
      で利用可能ないくつかのデスクトップ環境について解説します。
      <span class="quote">「<span class="quote">デスクトップ環境</span>」</span> とは、
      単なるウィンドウマネージャから <span class="application">KDE</span>
      や <span class="application">GNOME</span>
      といったような完全なデスクトップアプリケーションスイートまでカバーします。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-gnome"></a>6.7.1. GNOME</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-gnome-about"></a>6.7.1.1. GNOME について</h4></div></div></div><a id="idp82521936" class="indexterm"></a><p><span class="application">GNOME</span>
	  はユーザフレンドリなデスクトップ環境で、
	  ユーザはコンピュータを簡単に使ったり設定したりできるようになります。
	  <span class="application">GNOME</span> にはパネル
	  (アプリケーションを起動したり状態を表示したりするもの)、
	  デスクトップ (データやアプリケーションが置かれる場所)、
	  標準的なデスクトップツールやアプリケーションのセット、
	  そしてアプリケーションが互いにうまくやり取りできるような仕組みが含まれています。
	  他の OS や環境に慣れている人でも
	  <span class="application">GNOME</span>
	  の提供するグラフィック環境であれば心地よく感じるでしょう。
	  FreeBSD 上の <span class="application">GNOME</span>
	  に関するもっと詳しい情報は、
	  <a class="link" href="http://www.FreeBSD.org/gnome" target="_top">FreeBSD GNOME
	    Project</a> のウェブサイトで見ることができます。
	  ウェブサイトには、<span class="application">GNOME</span>
	  のインストール、設定、管理に関する非常に分かりやすい FAQ
	  も用意されています。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-gnome-install"></a>6.7.1.2. GNOME のインストール</h4></div></div></div><p>package や Ports Collection
	  を利用してソフトウェアを簡単にインストールできます。</p><p><span class="application">GNOME</span> package
	  をネットワークからインストールするには、
	  以下のようにするだけです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r gnome2</code></strong></pre><p><span class="application">pkgng</span> ユーザは、
	  以下のコマンドを使用してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install gnome2</code></strong></pre><p><span class="application">GNOME</span> をソースから構築する場合、
	  次のように ports ツリーを使いましょう。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11/gnome2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p><span class="application">GNOME</span> を適切に動作させるには、
          <code class="filename">/proc</code> ファイルシステムをマウントする必要があります。
          以下を <code class="filename">/etc/fstab</code> に追加して、起動中に
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=procfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">procfs</span>(5)</span></a> をマウントするように設定してください。</p><pre class="programlisting">proc           /proc       procfs  rw  0   0</pre><p><span class="application">GNOME</span> がインストールできたら、
	  デフォルトのウィンドウマネージャの代わりに
	  <span class="application">GNOME</span> を起動するように
	  X サーバに指示しなければなりません。</p><p><span class="application">GNOME</span>
	  を起動する最も簡単な方法は、GNOME ディスプレイマネージャ
	  <span class="application">GDM</span> を使うことです。
	  <span class="application">GDM</span> は、
	  <span class="application">GNOME</span>
	  デスクトップの一部としてインストールされますが、
	  デフォルトでは無効になっています。
	  有効にするには、以下の行を <code class="filename">/etc/rc.conf</code>
	  に追加してください。</p><pre class="programlisting">gdm_enable="YES"</pre><p>再起動すると、<span class="application">GDM</span>
	  が自動的に起動します。</p><p><span class="application">GNOME</span> のすべてのサービスを、
	  <span class="application">GDM</span> とともに起動するようにしておくと良いでしょう。
	  このように設定するには、以下の行を <code class="filename">/etc/rc.conf</code>
	  ファイルに追加してください。</p><pre class="programlisting">gnome_enable="YES"</pre><p><span class="application">GNOME</span> は
	  <code class="filename">.xinitrc</code>
	  という名前のファイルを適切に設定することで、
	  コマンドラインから起動することもできます。
	  自分の <code class="filename">.xinitrc</code>
	  が既にある場合には、ウィンドウマネージャを起動する行を
	  <span class="application">/usr/local/bin/gnome-session</span>
	  を起動するように変更するだけです。
	  特にこのファイルを用意していない場合には、
	  次のようにすれば十分でしょう。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "/usr/local/bin/gnome-session" &gt; ~/.xinitrc</code></strong></pre><p>次に、<code class="command">startx</code> と入力すれば
	  <span class="application">GNOME</span>
	  デスクトップ環境が起動します。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">もし <span class="application">XDM</span>
	    のような古いディスプレイマネージャを使っているなら、
	    この方法ではうまくいきません。その代わり、実行可能な
	    <code class="filename">.xsession</code> というファイルを作成し、
	    同じコマンドを起動するようにします。
	    そのためには、このファイルを編集してウィンドウマネージャを
	    <span class="application">/usr/local/bin/gnome-session</span>
	    で置き換えます。</p></div><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "#!/bin/sh" &gt; ~/.xsession</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>echo "/usr/local/bin/gnome-session" &gt;&gt; ~/.xsession</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>chmod +x ~/.xsession</code></strong></pre><p>もう一つの方法は、
	  ログイン時にウィンドウマネージャを選択できるようにディスプレイマネージャを設定することです。
	  <a class="link" href="#x11-wm-kde-details" title="6.7.3. KDE の詳細について">KDE
	  の詳細</a>についてのセクションで
	  <span class="application">KDE</span> のディスプレイマネージャである
	  <span class="application">KDM</span>
	  を使ってどのようにすればいいのかを解説しています。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde"></a>6.7.2. KDE</h3></div></div></div><a id="idp82605264" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde-about"></a>6.7.2.1. KDE について</h4></div></div></div><p><span class="application">KDE</span>
	  は最近の簡単に使えるデスクトップ環境です。
	  <span class="application">KDE</span>
	  によりユーザは以下のようなメリットを亨受します。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>美しい現代風のデスクトップ</p></li><li class="listitem"><p>ネットワーク透過なデスクトップ</p></li><li class="listitem"><p><span class="application">KDE</span>
	      デスクトップやそのアプリケーションを使う際に、
	      ヘルプへのアクセスを便利で統一されたものにする統合されたヘルプシステム</p></li><li class="listitem"><p>すべての <span class="application">KDE</span>
	      アプリケーションで統一された見ためや使い勝手</p></li><li class="listitem"><p>標準化されたメニュー、ツールバー、
	      キーバインディング、カラースキームなど</p></li><li class="listitem"><p>国際化: <span class="application">KDE</span> は
	      55 を越える言語で利用可能</p></li><li class="listitem"><p>一元的で、首尾一貫した、ダイアログベースのデスクトップ設定</p></li><li class="listitem"><p>膨大な数の <span class="application">KDE</span>
	      アプリケーション</p></li></ul></div><p><span class="application">KDE</span> には
	  <span class="application">Konqueror</span>
	  と呼ばれるウェブブラウザも付属しており、これは <span class="trademark">UNIX</span>®
	  システム上の他のウェブブラウザの強力な競争相手です。
	  <span class="application">KDE</span> の詳細については
	  <a class="link" href="http://www.kde.org/" target="_top">KDE のウェブサイト</a>
	  をご覧ください。
	  <span class="application">KDE</span> に関する
	  FreeBSD 特有の情報とリソースについては、
	  <a class="link" href="http://freebsd.kde.org/" target="_top">KDE/FreeBSD
	    initiative</a> のウェブサイトをご覧ください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde-install"></a>6.7.2.2. KDE のインストール</h4></div></div></div><p><span class="application">GNOME</span>
	  や他のデスクトップ環境とまったく同じように、
	  package や Ports Collection から簡単にインストールできます。</p><p><span class="application">KDE 4</span> package
	  をネットワーク越しにインストールするには次のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r kde4</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>
	  は自動的にアプリケーションの最新版を取得します。</p><p><span class="application">pkgng</span> ユーザは、
	  以下のコマンドを使用してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install kde4</code></strong></pre><p><span class="application">KDE</span>
	  をソースから構築するには、次のように ports ツリーを使いましょう。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11/kde4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>port を最初にインストールするときには、
	  オプションを選択するメニューが表示されます。
	  デフォルトが推奨されます。</p><p><span class="application">KDE 4</span> は大きなアプリケーションのため、
	  高速のコンピュータでもコンパイルに長い時間がかかります。</p><p><span class="application">KDE</span> がインストールできたら
	  X サーバに、デフォルトのウィンドウマネージャの代わりにこのアプリケーションを立ち上げるように教えます。
	  <code class="filename">.xinitrc</code>
	  ファイルを次のように編集しましょう。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "exec /usr/local/kde4/bin/startkde" &gt; ~/.xinitrc</code></strong></pre><p>さぁ、これで <code class="command">startx</code> でいつ
	  X Window System を立ち上げても
	  <span class="application">KDE</span>
	  がデスクトップになります。</p><p><span class="application">XDM</span>
	  のようなディスプレイマネージャを使っている場合、
	  設定は少し異なります。代わりに
	  <code class="filename">.xsession</code> ファイルを編集しましょう。
	  <span class="application">KDM</span>
	  用の説明はこの章の後のほうにあります。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde-details"></a>6.7.3. KDE の詳細について</h3></div></div></div><p>さぁ、<span class="application">KDE</span>
	のインストールができました。
	ほとんどのことはヘルプページを見たりいろんなメニューをつつけばわかるでしょう。
	<span class="trademark">Windows</span>® や <span class="trademark">Mac</span>® のユーザにも簡単なはずです。</p><p><span class="application">KDE</span>
	の最も良いリファレンスはオンラインドキュメントです。
	<span class="application">KDE</span> には独自のウェブブラウザ
	<span class="application">Konqueror</span> が付属していますし、
	膨大な数の便利なアプリケーションや詳しいドキュメントも用意されています。
	このセクションの残りではなんとなく使っているだけでは理解し難い技術的なところを解説します。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde-kdm"></a>6.7.3.1. KDE ディスプレイマネージャ</h4></div></div></div><a id="idp82662736" class="indexterm"></a><p>マルチユーザシステムの管理者であれば、
	  ユーザを迎えるにあたってグラフィカルなログイン画面が欲しいと思うかもしれません。
	  前の章で述べたように
	  <a class="link" href="#x-xdm" title="6.6. X ディスプレイマネージャ">XDM</a> はそのために使えますが、
	  <span class="application">KDE</span>
	  にはその代わりになる <span class="application">KDM</span>
	  が付いています。
	  見た目がより魅力的で、ログイン時のオプションもたくさんあります。
	  特に (メニューを使って) ログイン後に使うデスクトップ環境
	  (<span class="application">KDE</span> や
	  <span class="application">GNOME</span> など)
	  を簡単に選ぶことができます。</p><p><span class="application">KDE 4</span> では、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=procfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">procfs</span>(5)</span></a> をマウントする必要があります。
	  <code class="filename">/etc/rc.conf</code> に以下の行を追加してください。</p><pre class="programlisting">kdm4_enable="YES"</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-xfce"></a>6.7.4. Xfce</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-xfce-about"></a>6.7.4.1. Xfce について</h4></div></div></div><p><span class="application">Xfce</span> は
	  <span class="application">GNOME</span> で使われている
	  GTK+ ツールキットをベースにしたデスクトップ環境ですが、
	  ずっと軽いので、
	  シンプルで効率的でありながら使いやすく設定が簡単なデスクトップ環境を求める人に向いています。
	  見ためは商用 <span class="trademark">UNIX</span>® システムが採用している
	  <span class="application">CDE</span>
	  にかなり似ています。<span class="application">Xfce</span>
	  の機能をいくつか以下に挙げます。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>シンプルで使いやすいデスクトップ</p></li><li class="listitem"><p>マウスのドラッグアンドドロップなどですべての設定が可能</p></li><li class="listitem"><p><span class="application">CDE</span>
	      に似たメインパネルとメニューやアプレット、
	      アプリケーションランチャ</p></li><li class="listitem"><p>統合されたウィンドウマネージャ、ファイルマネージャ、
	      サウンドマネージャと <span class="application">GNOME</span>
	      準拠のモジュールなど</p></li><li class="listitem"><p>(GTK+ なので) テーマをサポート</p></li><li class="listitem"><p>速くて軽くて効率的: 古いマシンや遅いマシン、
	      メモリの限られたマシンに向いています</p></li></ul></div><p><span class="application">Xfce</span> に関する詳しい情報は
	  <a class="link" href="http://www.xfce.org/" target="_top">Xfce のウェブサイト</a>
	  で得られます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-xfce-install"></a>6.7.4.2. Xfce のインストール</h4></div></div></div><p><span class="application">Xfce</span>
	  をネットワークからインストールするには、
	  次のように実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r xfce4</code></strong></pre><p><span class="application">pkgng</span> ユーザは、
	  以下のコマンドを使用してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install xfce4</code></strong></pre><p>また、Ports Collection
	  を利用してソースからインストールすることも可能です。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11-wm/xfce4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>インストール後、次回 X を起動した時に
	  <span class="application">Xfce</span> が立ち上がるように設定します。
	  次のようにしてください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "/usr/local/bin/startxfce4" &gt; ~/.xinitrc</code></strong></pre><p>X を次に起動すると <span class="application">Xfce</span>
	  が立ち上がります。
	  <span class="application">XDM</span>
	  のようなディスプレイマネージャを使っている場合には、
	  <a class="link" href="#x11-wm-gnome" title="6.7.1. GNOME">GNOME</a>
	  のセクションに書いてあるように
	  <code class="filename">.xsession</code> ファイルを作成し、
	  <code class="filename">/usr/local/bin/startxfce4</code>
	  を起動するように追加します。
	  または <a class="link" href="#x11-wm-kde-kdm" title="6.7.3.1. KDE ディスプレイマネージャ">KDM</a>
	  のセクションにあるように、
	  ログイン時にディスプレイマネージャからデスクトップ環境を選択できるように設定してください。</p></div></div></div></div></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="common-tasks"></a>パート〓II.〓日々の生活</h1></div></div></div><div class="partintro"><div xmlns=""></div><p>第 1 部では基礎的なことがらを説明したので、
	FreeBSD ハンドブックの第 2 部では
	FreeBSD でよく使われる機能について説明します。
	各章の内容は以下のとおりです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ブラウザ、生産的なツール、ドキュメントビューアといった、
	    人気があって便利なデスクトップアプリケーションの紹介</p></li><li class="listitem"><p>FreeBSD で利用可能なマルチメディアツールの紹介</p></li><li class="listitem"><p>システムで特別な機能を有効にするために、
	    カスタムカーネルを構築する手順の説明</p></li><li class="listitem"><p>デスクトップおよびネットワーク接続両方のプリンタの設定に関する、
	    印刷システムの詳細な説明</p></li><li class="listitem"><p>FreeBSD システムで Linux アプリケーションを実行する方法</p></li></ul></div><p>これらの章では、読み飛ばしを推奨しているものもあります。
	これについてはそれぞれの章の始めにある概要に書かれています。</p><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="chapter"><a href="#desktop">7. デスクトップアプリケーション</a></span></dt><dd><dl><dt><span class="sect1"><a href="#desktop-synopsis">7.1. この章では</a></span></dt><dt><span class="sect1"><a href="#desktop-browsers">7.2. ブラウザ</a></span></dt><dt><span class="sect1"><a href="#desktop-productivity">7.3. 生産的なアプリケーション</a></span></dt><dt><span class="sect1"><a href="#desktop-viewers">7.4. ドキュメントビューア</a></span></dt><dt><span class="sect1"><a href="#desktop-finance">7.5. 財務管理ソフトウェア</a></span></dt></dl></dd><dt><span class="chapter"><a href="#multimedia">8. マルチメディア</a></span></dt><dd><dl><dt><span class="sect1"><a href="#multimedia-synopsis">8.1. この章では</a></span></dt><dt><span class="sect1"><a href="#sound-setup">8.2. サウンドカードの設定</a></span></dt><dt><span class="sect1"><a href="#sound-mp3">8.3. MP3 オーディオ</a></span></dt><dt><span class="sect1"><a href="#video-playback">8.4. ビデオ再生</a></span></dt><dt><span class="sect1"><a href="#tvcard">8.5. TV カードの設定</a></span></dt><dt><span class="sect1"><a href="#mythtv">8.6. MythTV</a></span></dt><dt><span class="sect1"><a href="#scanners">8.7. 画像スキャナ</a></span></dt></dl></dd><dt><span class="chapter"><a href="#kernelconfig">9. FreeBSD カーネルのコンフィグレーション</a></span></dt><dd><dl><dt><span class="sect1"><a href="#kernelconfig-synopsis">9.1. この章では</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-custom-kernel">9.2. なぜカスタムカーネルを作るか?</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-devices">9.3. システムのハードウェアについて知る</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-config">9.4. コンフィグレーションファイル</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-building">9.5. カスタムカーネルの構築とインストール</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-trouble">9.6. 問題が起きた場合には</a></span></dt></dl></dd><dt><span class="chapter"><a href="#printing">10. プリンタの利用</a></span></dt><dd><dl><dt><span class="sect1"><a href="#printing-synopsis">10.1. この章では</a></span></dt><dt><span class="sect1"><a href="#printing-intro-spooler">10.2. はじめに</a></span></dt><dt><span class="sect1"><a href="#printing-intro-setup">10.3. 基本的な設定</a></span></dt><dt><span class="sect1"><a href="#printing-advanced">10.4. プリンタ設定上級編</a></span></dt><dt><span class="sect1"><a href="#printing-using">10.5. プリンタを使う</a></span></dt><dt><span class="sect1"><a href="#printing-lpd-alternatives">10.6. 標準スプーラの代替品</a></span></dt><dt><span class="sect1"><a href="#printing-troubleshooting">10.7. トラブルシューティング</a></span></dt></dl></dd><dt><span class="chapter"><a href="#linuxemu">11. Linux バイナリ互換機能</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp85701584">11.1. この章では</a></span></dt><dt><span class="sect1"><a href="#linuxemu-lbc-install">11.2. インストール</a></span></dt><dt><span class="sect1"><a href="#linuxemu-mathematicau">11.3. Mathematica のインストール</a></span></dt><dt><span class="sect1"><a href="#linuxemu-oracle">11.4. Oracle のインストール</a></span></dt><dt><span class="sect1"><a href="#sapr3">11.5. SAP R/3 (4.6B - IDES) のインストール</a></span></dt><dt><span class="sect1"><a href="#idp86485712">11.6. 高度なトピックス</a></span></dt></dl></dd></dl></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="desktop"></a>第7章 デスクトップアプリケーション</h2></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#desktop-synopsis">7.1. この章では</a></span></dt><dt><span class="sect1"><a href="#desktop-browsers">7.2. ブラウザ</a></span></dt><dt><span class="sect1"><a href="#desktop-productivity">7.3. 生産的なアプリケーション</a></span></dt><dt><span class="sect1"><a href="#desktop-viewers">7.4. ドキュメントビューア</a></span></dt><dt><span class="sect1"><a href="#desktop-finance">7.5. 財務管理ソフトウェア</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-synopsis"></a>7.1. この章では</h2></div></div></div><p>FreeBSD は性能や安定性によりサーバとして人気がある一方で、
      日々のデスクトップとしての利用にも適しています。
      packages や ports から
      24,000 を超えるアプリケーションを利用できるので、
      さまざまなアプリケーションを動かせるようにカスタマイズしたデスクトップを作り上げることができます。
      この章では、ウェブブラウザ、生産的なソフトウェア、ドキュメントビューア、
      および財務管理ソフトウェアといった、
      数多くのデスクトップアプリケーションのインストール方法について説明します。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">一から構築するのではなく、
	事前に構築されたデスクトップバージョンの FreeBSD
	をお望みのユーザは、<a class="link" href="http://www.pcbsd.org/" target="_top">pcbsd.org
	ウェブサイト</a> をご覧ください。</p></div><p>この章の読者は、以下のことを理解しておく必要があります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>package または ports
	  を用いたサードパーティ製ソフトウェアのインストール方法
	  (<a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a>)。</p></li><li class="listitem"><p>X およびウィンドウマネージャのインストール方法
	  (<a class="xref" href="#x11" title="第6章 X Window System">6章<em>X Window System</em></a>)。</p></li></ul></div><p>マルチメディア環境を整える方法については
      <a class="xref" href="#multimedia" title="第8章 マルチメディア">8章<em>マルチメディア</em></a> を参照してください。</p><div xmlns="" class="note"><h3 class="admontitle">訳注: </h3><p xmlns="http://www.w3.org/1999/xhtml">この文書は英語で書かれている原文をそのまま邦訳したものです。
	必ずしも各アプリケーションで日本語が扱えるとは限らないことに注意してください。
	日本語に対応したアプリケーションは、Ports Collection の
	japanese ディレクトリにあるかもしれません。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-browsers"></a>7.2. ブラウザ</h2></div></div></div><a id="idp82736336" class="indexterm"></a><p>FreeBSD では Web ブラウザは事前にインストールされていません。
      そのかわり、Ports Collection の <a class="link" href="http://www.FreeBSD.org/ja/ports/www.html" target="_top">www</a>
      カテゴリには数多くの Web ブラウザ が用意されており、
      多くのプログラムを packages からインストールしたり、
      Ports Collection からコンパイルできます。</p><p><span class="application">KDE</span> や
      <span class="application">GNOME</span> デスクトップ環境には、
      それぞれ HTML ブラウザが用意されています。
      これらのデスクトップ環境を設定するための情報については
      <a class="xref" href="#x11-wm" title="6.7. デスクトップ環境">「デスクトップ環境」</a> を参照してください。</p><p>軽量なブラウザには、
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/dillo2/pkg-descr">www/dillo2</a>, <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/links/pkg-descr">www/links</a>, および
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/w3m/pkg-descr">www/w3m</a>
      といったものがあります。</p><p>この節では、広く使われている以下の web
      ブラウザのインストール方法について説明します。
      もし、アプリケーションがリソースを大量に消費したり、
      ports からのコンパイルに時間がかかったり、
      他の ports に大きく依存する場合には、そのことについても触れます。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>アプリケーション名</th><th>必要なリソース</th><th>port からのインストール</th><th>備考</th></tr></thead><tbody><tr><td><span class="application">Firefox</span></td><td>中</td><td>重</td><td>FreeBSD, <span class="trademark">Linux</span>®
	      および地域化されたバージョンを利用できます。</td></tr><tr><td><span class="application">Opera</span></td><td>少</td><td>軽</td><td>FreeBSD と <span class="trademark">Linux</span>® 版を利用できます。</td></tr><tr><td><span class="application">Konqueror</span></td><td>中</td><td>重</td><td><span class="application">KDE</span>
	    ライブラリを必要とします。</td></tr><tr><td><span class="application">Chromium</span></td><td>中</td><td>重</td><td><span class="application">Gtk+</span> を必要とします。</td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82763728"></a>7.2.1. Firefox</h3></div></div></div><a id="idp82764496" class="indexterm"></a><p><span class="application">Firefox</span> は、
	FreeBSD に完全に対応したオープンソースのブラウザです。
	標準に準拠した HTML 表示エンジン、タブブラウジング、ポップアップブロック、
	拡張性、高い安全性などが特徴です。
	<span class="application">Firefox</span> は <span class="application">Mozilla</span>
	のコードベースから派生したブラウザです。</p><p>最新の <span class="application">Firefox</span> の package
	をインストールするには以下のように入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install firefox</code></strong></pre><p><span class="application">Firefox</span> 延長サポート版
	(ESR: Extended Support Release)	を利用したい場合には、
	かわりに以下のように入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install firefox-esr</code></strong></pre><p>ローカライズ版は、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/firefox-i18n/pkg-descr">www/firefox-i18n</a>
	および <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/firefox-esr-i18n/pkg-descr">www/firefox-esr-i18n</a>
	から利用できます。</p><p>かわりにソースコードから希望の <span class="application">firefox</span>
	をコンパイルすることもできます。
	この例では <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/firefox/pkg-descr">www/firefox</a> をビルドしますが、
	<code class="literal">firefox</code> の部分は、
	インストールする ESR やローカライズに置き換えることもできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/firefox</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="moz-java-plugin"></a>7.2.1.1. Firefox と <span class="trademark">Java</span>™ プラグイン</h4></div></div></div><p><span class="application">Firefox</span> をインストールしただけでは、
	<span class="trademark">Java</span>™ には対応していません。
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/java/icedtea-web/pkg-descr">java/icedtea-web</a> は、
	Java アプレットを実行するための、
	フリーソフトの web ブラウザのプラグインです。
	package からインストールできます。port からコンパイルするには、
	以下のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/java/icedtea-web</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>ports をコンパイルする際のコンフィグレーションオプションは、
	デフォルトのままにしてください。</p><p>インストールしたら、ブラウザを起動し、ロケーションバーに
	<code class="literal">about:plugins</code> と入力して
	<span class="keycap"><strong>Enter</strong></span> を押してください。
	インストールされているプラグイン一覧のページが表示されます。
	<span class="application"><span class="trademark">Java</span>™</span>
	プラグインが一覧に追加されているでしょう。</p><p>プラグインが一覧に追加されていない場合には、
	ユーザごとに以下のコマンドを実行し、ブラウザを再起動してください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ln -s /usr/local/lib/IcedTeaPlugin.so \
  $HOME/.mozilla/plugins/</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="moz-flash-plugin"></a>7.2.1.2. Firefox と <span class="trademark">Adobe</span>® <span class="trademark">Flash</span>® プラグイン</h4></div></div></div><a id="idp82788304" class="indexterm"></a><p>FreeBSD 用の <span class="trademark">Adobe</span>® <span class="trademark">Flash</span>® プラグインは提供されていませんが、
	<span class="trademark">Linux</span>®
	版のプラグインを実行するためのソフトウェア wrapper を利用できます。
	この wrapper は、<span class="trademark">RealPlayer</span>®
	プラグインといった他のブラウザのプラグインにも対応しています。</p><p>プラグインをインストールして有効にするには、
	以下を実行してください。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>port から <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/nspluginwrapper/pkg-descr">www/nspluginwrapper</a>
	    をインストールしてください。
	    ライセンスの制限のため package は利用できません。
	    この port は、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base-c6/pkg-descr">emulators/linux_base-c6</a>
	    を必要とします。</p></li><li class="step"><p>port から <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/linux-c6-flashplugin11/pkg-descr">www/linux-c6-flashplugin11</a>
	    をインストールしてください。
	    ライセンスの制限により、package は利用できません。</p></li><li class="step"><p>プラグインを最初に使う前に、
	    ユーザごとに以下を実行しておく必要があります。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>nspluginwrapper -v -a -i</code></strong></pre><p>プラグインの port がアップデートされ、
	    再インストールされた際には、
	    各ユーザは以下を実行する必要があります。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>nspluginwrapper -v -a -u</code></strong></pre><p>ブラウザを起動し、ロケーションバーに
	    <code class="literal">about:plugins</code> と入力して
	    <span class="keycap"><strong>Enter</strong></span> を押してください。
	    現在利用可能なプラグインの一覧が表示されます。</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="moz-swfdec-flash-plugin"></a>7.2.1.3. Firefox と Swfdec <span class="trademark">Flash</span>® プラグイン</h4></div></div></div><p><span class="application">Swfdec</span> は <span class="trademark">Flash</span>®
	アニメーションのデコーダーおよびレンダラーです。
	<span class="application">Swfdec-Mozilla</span> は、
	<span class="application">Firefox</span> ブラウザにおいて
	SWF ファイルを実行するためのプラグインで、
	Swfdec ライブラリを利用しています。</p><p>package をインストールするには、以下を実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install swfdec-plugin</code></strong></pre><p>package を利用できない場合は、Ports Collection
	からコンパイルしてインストールしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/swfdec-plugin</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>その後、ブラウザを再起動してプラグインを有効にしてください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82815184"></a>7.2.2. Opera</h3></div></div></div><a id="idp82815824" class="indexterm"></a><p><span class="application">Opera</span> は、
	機能満載で、標準規格に準拠したブラウザで、
	軽量で高速です。
	メールおよびニュースリーダや、IRC クライアント、
	RSS/Atom フィードリーダ、その他いろいろなものが組み込まれています。
	FreeBSD ネイティブ版と、<span class="trademark">Linux</span>®
	バイナリ互換機能によって動作するバージョンを利用できます。</p><p>以下のコマンドは、FreeBSD 版の <span class="application">Opera</span>
	package をインストールします。
	<span class="trademark">Linux</span>® 版をインストールするには、
	<code class="literal">opera</code> を <code class="literal">linux-opera</code>
	に置き換えてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install opera</code></strong></pre><p>あるいは Ports Collection からインストールしてください。
	以下のコマンドで、ネイティブ版がインストールされます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/opera</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p><span class="trademark">Linux</span>® 版の <span class="application">Opera</span>
	をインストールするには、<code class="literal">opera</code> を
	<code class="literal">linux-opera</code> に置き換えてください。</p><p><span class="trademark">Adobe</span>® <span class="trademark">Flash</span>® プラグインをインストールするには、
	まず <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/linux-c6-flashplugin11/pkg-descr">www/linux-c6-flashplugin11</a> port
	をコンパイルしてください。
	ライセンスの制限により package は利用できません。
	その後、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/opera-linuxplugins/pkg-descr">www/opera-linuxplugins</a>
	をインストールしてください。
	以下の例では、両方のアプリケーションを
	ports からコンパイルします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/linux-c6-flashplugin11</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/opera-linuxplugins</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>インストールが終了したら、
	プラグインがインストールされたかどうかをブラウザを起動して確認してください。
	ロケーションバーに <code class="literal">about:plugins</code> と入力して
	<span class="keycap"><strong>Enter</strong></span> を押してください。
	現在利用可能なプラグインの一覧が表示されます。</p><p><span class="application"><span class="trademark">Java</span>™</span> プラグインを追加するには、
	<a class="xref" href="#moz-java-plugin" title="7.2.1.1. Firefox と Java™ プラグイン">「Firefox と <span class="trademark">Java</span>™ プラグイン」</a>
 	に書かれている手順に従ってください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82837328"></a>7.2.3. Konqueror</h3></div></div></div><a id="idp82846288" class="indexterm"></a><p><span class="application">Konqueror</span> はブラウザであると同時に、
	ファイルマネージャおよびマルチメディアビューアの役割も果たします。
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/kde4-baseapps/pkg-descr">x11/kde4-baseapps</a> package または
	port に含まれています。</p><p><span class="application">Konqueror</span> は、KHTML とともに、WebKit
	にも対応しています。WebKit は Chromium
	など最近のブラウザの多くで採用されているレンダリングエンジンです。
	FreeBSD の <span class="application">Konqueror</span> で WebKit
	を使うには、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/kwebkitpart/pkg-descr">www/kwebkitpart</a> package または
	port をインストールしてください。
	以下の例では、port をコンパイルします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/kwebkitpart</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p><span class="application">Konqueror</span> で、WebKit を有効にするには、
	<span class="quote">「<span class="quote">Settings</span>」</span>, <span class="quote">「<span class="quote">Configure Konqueror</span>」</span>
	をクリックしてください。
	<span class="quote">「<span class="quote">General</span>」</span> の設定ページにおいて、
	<span class="quote">「<span class="quote">Default web browser engine</span>」</span> の隣の
	ドロップダウンメニューをクリックし、<span class="quote">「<span class="quote">WebKit</span>」</span>
	を <span class="quote">「<span class="quote">KHTML</span>」</span> に変更してください。</p><p><span class="application">Konqueror</span> は
	<span class="application"><span class="trademark">Flash</span>®</span> にも対応しています。
	<span class="application">Konqueror</span> に
	<span class="application"><span class="trademark">Flash</span>®</span>
	を導入するための <span class="quote">「<span class="quote">How To</span>」</span> ガイドが	<code class="uri"><a class="uri" href="http://freebsd.kde.org/howtos/konqueror-flash.php" target="_top">http://freebsd.kde.org/howtos/konqueror-flash.php</a></code>
	にあります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82857680"></a>7.2.4. Chromium</h3></div></div></div><a id="idp82858320" class="indexterm"></a><p><span class="application">Chromium</span> は、
	オープンソースのブラウザのプロジェクトで、
	より安全かつより高速、
	より安定したウェブブラウジングを目指しています。
	<span class="application">Chromium</span> は、タブブラウジング、
	ポップアップブロック、拡張機能などの機能を持っています。
	<span class="application">Chromium</span> は、Google Chrome
	ウェブブラウザがベースとしているオープンソースのプロジェクトです。</p><p><span class="application">Chromium</span> は、
	以下のように入力することで package からインストールできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install chromium</code></strong></pre><p>または、Ports Collection を用いて
	ソースから <span class="application">Chromium</span>
	をコンパイルしてインストールできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/chromium</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">Chromium</span> の実行可能ファイルは、
	  <code class="filename">/usr/local/bin/chrome</code> です。
	  <code class="filename">/usr/local/bin/chromium</code> ではありません。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="chromium-java-plugin"></a>7.2.4.1. Chromium と <span class="trademark">Java</span>™ プラグイン</h4></div></div></div><p><span class="application">Chromium</span> をインストールしただけでは、
	<span class="trademark">Java</span>™ には対応していません。
	<span class="trademark">Java</span>™ プラグインをインストールするには、
	<a class="xref" href="#moz-java-plugin" title="7.2.1.1. Firefox と Java™ プラグイン">「Firefox と <span class="trademark">Java</span>™ プラグイン」</a>
	に書かれている手順に従ってください。</p><p><span class="trademark">Java</span>™ のサポートをインストールしたら、
	<span class="application">Chromium</span> を起動し、アドレスバーに、
	<code class="literal">about:plugins</code> と入力してください。
	インストールされているプラグインの一覧に
	IcedTea-Web が追加されているはずです。</p><p><span class="application">Chromium</span>
	に IcedTea-Web プラグインが追加されていない場合には、
	以下のコマンドを実行し、ブラウザを再起動してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /usr/local/share/chromium/plugins
<code class="prompt">#</code> ln -s /usr/local/lib/IcedTeaPlugin.so \
  /usr/local/share/chromium/plugins/</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="chromium-flash-plugin"></a>7.2.4.2. Chromium と <span class="trademark">Adobe</span>® <span class="trademark">Flash</span>® プラグイン</h4></div></div></div><p><span class="application">Chromium</span> と <span class="trademark">Adobe</span>® <span class="trademark">Flash</span>®
	  の設定は、<a class="xref" href="#moz-flash-plugin" title="7.2.1.2. Firefox と Adobe® Flash® プラグイン">「Firefox と <span class="trademark">Adobe</span>® <span class="trademark">Flash</span>® プラグイン」</a>
	  に書かれている手順と同じです。
	  <span class="application">Chromium</span>
	  は、他のブラウザのプラグインを用いることができるので、
	  追加の設定は必要ありません。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-productivity"></a>7.3. 生産的なアプリケーション</h2></div></div></div><p>生産的なアプリケーションということになると、
      新しいユーザはしばしばオフィススイートや、
      使いやすい文書作成ソフトウェアを求めるでしょう。
      デフォルトの生産的なアプリケーションはありませんが、
      <span class="application">KDE</span> のような
      <a class="link" href="#x11-wm" title="6.7. デスクトップ環境">デスクトップ環境</a>
      はオフィススイートを提供しています。
      インストールされているウィンドウマネージャにかかわらず、FreeBSD では、
      いくつものオフィススイート、
      グラフィカルな文書作成ソフトウェアを利用できます。</p><p>この節では、
      以下の人気のある生産的なソフトウェアのインストール方法について説明します。
      もし、アプリケーションがリソースを大量に消費したり、
      ports からのコンパイルに時間がかかったり、
      もしくは他の ports に大きく依存する場合には、
      そのことについても触れます。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>アプリケーション名</th><th>必要なリソース</th><th>port からのインストール</th><th>実行に必要となる主な環境</th></tr></thead><tbody><tr><td><span class="application">Calligra</span></td><td>少</td><td>重</td><td><span class="application">KDE</span></td></tr><tr><td><span class="application">AbiWord</span></td><td>少</td><td>軽</td><td><span class="application">Gtk+</span> または
	      <span class="application">GNOME</span></td></tr><tr><td><span class="application">Gimp</span></td><td>少</td><td>重</td><td><span class="application">Gtk+</span></td></tr><tr><td><span class="application">Apache
		OpenOffice</span></td><td>多</td><td>莫大</td><td><span class="application"><span class="trademark">JDK</span>™</span> および
	      <span class="application">Mozilla</span></td></tr><tr><td><span class="application">LibreOffice</span></td><td>やや多</td><td>莫大</td><td><span class="application">Gtk+</span> または
	      <span class="application">KDE</span>/
	      <span class="application">GNOME</span> または
	      <span class="application"><span class="trademark">JDK</span>™</span></td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82918096"></a>7.3.1. Calligra</h3></div></div></div><a id="idp82918736" class="indexterm"></a><a id="idp82919632" class="indexterm"></a><p>KDE デスクトップには、
	<span class="application">KDE</span>
	環境以外でも利用可能なオフィススイートがあります。
	<span class="application">Calligra</span> には、他のオフィススイートと同様に、
	標準的なアプリケーションが含まれています。
	<span class="application">Words</span> は文書作成ソフトウェア、
	<span class="application">Sheets</span> は表計算ソフトウェア、
	<span class="application">Stage</span>
	はプレゼンテーションソフトウェア、そして
	<span class="application">Karbon</span> は図形描画ソフトウェアです。</p><p>FreeBSD では package または port から
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/calligra/pkg-descr">editors/calligra</a> をインストール出来ます。
	package からインストールするには次のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install calligra</code></strong></pre><p>package を入手できない場合は、かわりに Ports Collection
	を利用してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/editors/calligra</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82927568"></a>7.3.2. AbiWord</h3></div></div></div><a id="idp82928208" class="indexterm"></a><p><span class="application">AbiWord</span>
	は、<span class="application"><span class="trademark">Microsoft</span>® Word</span>
	のような見た目や操作感を持つフリーの文書作成ソフトウェアです。
	速く、多くの機能を持ち、ユーザフレンドリです。</p><p><span class="application">AbiWord</span> は、
	<span class="trademark">Microsoft</span>® <code class="filename">.rtf</code>
	のような独自仕様を含む多くの形式のファイルを読み書きできます。</p><p><span class="application">AbiWord</span> package
	をインストールするには、以下のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install abiword</code></strong></pre><p>package を入手できない場合は、
	Ports Collection からコンパイルしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/editors/abiword</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82935888"></a>7.3.3. GIMP</h3></div></div></div><a id="idp82936528" class="indexterm"></a><p>画像を描画したり写真を修正することに関して、
	<span class="application">GIMP</span>
	は洗練された編集プログラムです。
	単純にお絵かきソフトウェアとして使うこともできますし、
	高品質な写真の加工ツールとしても使えます。
	多くのプラグインに対応しており、
	スクリプトインタフェースを特徴としています。
	<span class="application">GIMP</span>
	はさまざまな形式のファイルを読み書きでき、
	スキャナやタブレットとのインタフェースにも対応しています。</p><p>package をインストールするには、以下のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install gimp</code></strong></pre><p>もしくは、Ports Collection を利用してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/graphics/gimp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Ports Collection の graphics カテゴリ (<a class="link" href="http://www.FreeBSD.org/ja/ports/graphics.html" target="_top">freebsd.org/ja/ports/graphics.html</a>)
	には、<span class="application">GIMP</span> に関連したプラグイン、
	ヘルプファイルおよびユーザマニュアルなどがあります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82951632"></a>7.3.4. Apache OpenOffice</h3></div></div></div><a id="idp82952272" class="indexterm"></a><a id="idp82953424" class="indexterm"></a><p><span class="application">Apache OpenOffice</span> は、
	Apache Software Foundation
	のインキュベータプロジェクトとして開発が行われているオープンソースのオフィススイートです。
	<span class="application">Apache OpenOffice</span>
	は、完全なオフィススイートに必須のアプリケーション
	(文書作成ソフトウェア、表計算ソフトウェア、
	プレゼンテーションソフトウェア、そして図形描画ソフトウェア)
	をひととおり揃えています。
	ユーザインタフェースは他のオフィススイートと似ており、
	広く用いられているさまざまな形式のファイルを読み書きできます。
	多くの言語で利用でき、インタフェース、スペルチェッカ、
	辞書は国際化されています。</p><p><span class="application">Apache OpenOffice</span>
	の文書作成ソフトウェアは、ネイティブの XML
	ファイル形式を採用することでポータビリティや柔軟性を高めています。
	表計算ソフトウェアにはマクロ機能があり、
	外部データベースと接続することもできます。
	<span class="application">Apache OpenOffice</span> は、
	<span class="trademark">Windows</span>®, <span class="trademark">Solaris</span>™, <span class="trademark">Linux</span>®, FreeBSD および <span class="trademark">Mac OS</span>® X
	において安定してネイティブに動作しています。
	<span class="application">Apache OpenOffice</span>
	についてのより詳しい情報は、
	<a class="link" href="http://openoffice.org/" target="_top">openoffice.org</a>
	をご覧ください。
	また、<a class="link" href="http://porting.openoffice.org/freebsd/" target="_top">porting.openoffice.org/freebsd/</a>
	から、FreeBSD 特有の情報を参照してください。</p><p><span class="application">Apache OpenOffice</span> package
	をインストールするには、以下のように入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install apache-openoffice</code></strong></pre><p>package をインストールしたら、以下のコマンドを入力して
	<span class="application">Apache OpenOffice</span> を起動してください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>openoffice-<em class="replaceable"><code>X.Y.Z</code></em></code></strong></pre><p>ここで <em class="replaceable"><code>X.Y.Z</code></em> は、
	インストールされている
	<span class="application">Apache OpenOffice</span> のバージョン番号です。
	<span class="application">Apache OpenOffice</span>
	の初回起動時に、いくつかの質問が行われ、
	ユーザのホームディレクトリに <code class="filename">.openoffice.org</code>
	フォルダが作成されます。</p><p>希望の <span class="application">Apache OpenOffice</span> の packages
	を利用できない場合には、port を利用する方法もあります。
	しかしながら、コンパイルには大きなディスクスペースと、
	本当にかなり長い時間を必要とします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/editors/openoffice-4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">地域化されたバージョンをビルドするには、
	  上記のコマンドの代わりに以下を実行して下さい。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make LOCALIZED_LANG=<em class="replaceable"><code>your_language</code></em> install clean</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml"><em class="replaceable"><code>your_language</code></em>
	  を正しい言語 ISO コードに置き換えてください。
	  サポートされている言語コードは、同じ port ディレクトリにある
	  <code class="filename">files/Makefile.localized</code>
	  に書かれています。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82979792"></a>7.3.5. LibreOffice</h3></div></div></div><a id="idp82980432" class="indexterm"></a><a id="idp82989648" class="indexterm"></a><p><span class="application">LibreOffice</span> は、<a class="link" href="http://www.documentfoundation.org/" target="_top">documentfoundation.org</a>
	が開発しているフリーソフトウェアのオフィススイートです。
	他のメジャーなオフィススイートと互換性があり、
	さまざまなプラットフォームで利用できます。
	<span class="application">OpenOffice.org</span>
	からの新しいフォークで、
	完全なオフィススイートに必須のアプリケーション
	(文書作成ソフトウェア、表計算ソフトウェア、
	プレゼンテーションソフトウェア、図形描画ソフトウェア、
	データベース管理ソフトウェア、数式エディタ) をすべて揃えています。
	多くの言語で利用でき、
	インタフェース、スペルチェッカ、辞書は国際化されています。</p><p><span class="application">LibreOffice</span>
	の文書作成ソフトウェアは、
	ネイティブのファイル形式に XML を採用することで
	ポータビリティや柔軟性を高めています。
	表計算ソフトウェアにはマクロ機能があり、
	外部データベースと接続することもできます。
	<span class="application">LibreOffice</span> は、
	<span class="trademark">Windows</span>®, <span class="trademark">Solaris</span>™, <span class="trademark">Linux</span>®, FreeBSD, <span class="trademark">Mac OS</span>® X
	において安定してネイティブに動作しています。
	<span class="application">LibreOffice</span>
	についての詳しい情報は、<a class="link" href="http://www.libreoffice.org/" target="_top">libreoffice.org</a>
	をご覧ください。</p><p>英語版の <span class="application">LibreOffice</span> package
	をインストールするには、以下のように入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install libreoffice</code></strong></pre><p>Ports Collection の edtors カテゴリ (<a class="link" href="http://www.FreeBSD.org/ja/ports/editors.html" target="_top">freebsd.org/ja/ports/editors.html</a>)
	カテゴリには、地域化された <span class="application">LibreOffice</span>
	が用意されています。
	地域化された package をインストールするには、
	<code class="literal">libreoffice</code> を地域化された
	package 名に置き換えてください。</p><p>package をインストールしたら、以下のコマンドで
	<span class="application">LibreOffice</span> を起動してください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>libreoffice</code></strong></pre><p>初回起動時には、いくつかの質問が行われ、
	ユーザのホームディレクトリに
	<code class="filename">.libreoffice</code> フォルダが作成されます。</p><p>希望の <span class="application">LibreOffice</span> の packages
	を利用できない場合には、port からコンパイルする方法もあります。
	しかしながら、コンパイルには大きなディスクスペースと、
	本当にかなり長い時間を必要とします。
	以下の例では、英語版をコンパイルします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/editors/libreoffice</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">地域化されたバージョンをビルドしたいのなら、
	  希望の言語の port ディレクトリに <code class="command">cd</code>
	  コマンドで移動してください。
	  対応している言語は、Ports Collection の editors カテゴリ (<a class="link" href="http://www.FreeBSD.org/ja/ports/editors.html" target="_top">freebsd.org/ja/ports/editors.html</a>)
	  にあります。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-viewers"></a>7.4. ドキュメントビューア</h2></div></div></div><p><span class="trademark">UNIX</span>® の出現以降、
      いくつかの新しい文書形式が広く使われるようになりました。
      基本システムには、それらの文書が要求するビューアがないかもしれません。
      この節ではそれらのドキュメントビューアのインストール方法について説明します。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>アプリケーション名</th><th>必要なリソース</th><th>port からのインストール</th><th>実行に必要になる主な環境</th></tr></thead><tbody><tr><td><span class="application">Xpdf</span></td><td>少</td><td>軽</td><td><span class="application">FreeType</span></td></tr><tr><td><span class="application">gv</span></td><td>少</td><td>軽</td><td><span class="application">Xaw3d</span></td></tr><tr><td><span class="application">GQview</span></td><td>少</td><td>軽</td><td><span class="application">Gtk+</span> または
	      <span class="application">GNOME</span></td></tr><tr><td><span class="application">ePDFView</span></td><td>少</td><td>軽</td><td><span class="application">Gtk+</span> または
	      <span class="application">GNOME</span></td></tr><tr><td><span class="application">Okular</span></td><td>少</td><td>重</td><td><span class="application">KDE</span></td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83032272"></a>7.4.1. Xpdf</h3></div></div></div><a id="idp83032912" class="indexterm"></a><a id="idp83033808" class="indexterm"></a><p>FreeBSD 向けの軽い PDF ビューアを使いたいのなら
	<span class="application">Xpdf</span>
	を試してみてください。
	これは少ないリソースで動作するビューアで、軽くて効率的です。
	標準の X フォントを利用し、
	他の X ツールキットを必要としません。</p><p><span class="application">Xpdf</span> の
	package をインストールするには次のコマンドを入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install xpdf</code></strong></pre><p>package を入手できない場合は、
	Ports Collection を利用してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/graphics/xpdf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>インストールが完了したら <span class="application">xpdf</span>
	を起動してください。
	メニューを表示するにはマウスの右ボタンを押してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83044432"></a>7.4.2. <span class="application">gv</span></h3></div></div></div><a id="idp83045200" class="indexterm"></a><a id="idp83046096" class="indexterm"></a><a id="idp83047248" class="indexterm"></a><p><span class="application">gv</span>
	は <span class="trademark">PostScript</span>® と PDF のビューアです。これは
	<span class="application">ghostview</span> をベースとしていますが、
	<span class="application">Xaw3d</span>
	ウィジットツールキットによってより良い外観になっています。
	<span class="application">gv</span> は向きや用紙のサイズ、
	拡大縮小、アンチエイリアスなどたくさんの設定可能な機能を持っています。
	ほとんどすべての操作をキーボードかマウスのどちらかだけで行なうことができます。</p><p>package から <span class="application">gv</span>
	をインストールするには次のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install gv</code></strong></pre><p>package を利用できない場合には、Ports Collection
	を使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/print/gv</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83054800"></a>7.4.3. GQview</h3></div></div></div><a id="idp83055440" class="indexterm"></a><p><span class="application">GQview</span>
	は画像管理ソフトウェアです。
	クリックひとつで画像ファイルを開いたり、外部エディタを起動したり、
	サムネイル画像を作成できます。
	また、スライドショーや基本的なファイル操作機能も備えており、
	画像のコレクションの管理や、
	重複したファイルを見つけることが簡単にできます。
	<span class="application">GQview</span> は全画面表示、
	および国際化にも対応しています。</p><p><span class="application">GQview</span>
	package をインストールするには次のコマンドを入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install gqview</code></strong></pre><p>package を入手できない場合は、
	Ports Collection を利用してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/graphics/gqview</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83065296"></a>7.4.4. ePDFView</h3></div></div></div><a id="idp83065936" class="indexterm"></a><a id="idp83066832" class="indexterm"></a><p><span class="application">ePDFView</span> は軽量な
	<acronym class="acronym">PDF</acronym> ドキュメントビューアです。
	このビューアは、
	<span class="application">Gtk+</span> および
	<span class="application">Poppler</span> ライブラリのみを使います。
	このソフトウェアは、現在開発中ですが、ほぼすべての
	<acronym class="acronym">PDF</acronym> ファイル (暗号化されたものを含む)
	を開くことが可能で、ドキュメントのコピーを保存でき、
	<span class="application">CUPS</span> を用いた印刷にも対応しています。</p><p>package から <span class="application">ePDFView</span>
	をインストールするには以下のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install epdfview</code></strong></pre><p>package が利用できないようでしたら、
	Ports Collection を使ってインストールしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/graphics/epdfview</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83074512"></a>7.4.5. Okular</h3></div></div></div><a id="idp83075152" class="indexterm"></a><a id="idp83076048" class="indexterm"></a><p><span class="application">Okular</span> は、
	<span class="application">KDE</span> の <span class="application">KPDF</span>
	をベースとした一般的なドキュメントビューアです。
	このビューアは、<acronym class="acronym">PDF</acronym>, <span class="trademark">PostScript</span>®, DjVu,
	<acronym class="acronym">CHM</acronym>, <acronym class="acronym">XPS</acronym>, および
	ePub といった、多くの形式のファイルを開くことができます。</p><p>package で <span class="application">Okular</span>
	をインストールするには、以下のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install okular</code></strong></pre><p>package が利用できないようでしたら、
	Ports Collection を使ってインストールしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/graphics/okular</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-finance"></a>7.5. 財務管理ソフトウェア</h2></div></div></div><p>FreeBSD のデスクトップで個人的な財務管理ができるように、
      強力で簡単に使えるアプリケーションが用意されています。
      それらのアプリケーションの中には
      <span class="application">Quicken</span>
      や <span class="application">Excel</span>
      などの広く行き渡った形式のファイルと互換性があるものもあります。</p><p>この節では次のアプリケーションについて説明します。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>アプリケーション名</th><th>必要なリソース</th><th>port からのインストール</th><th>実行に必要になる主な環境</th></tr></thead><tbody><tr><td><span class="application">GnuCash</span></td><td>少</td><td>重</td><td><span class="application">GNOME</span></td></tr><tr><td><span class="application">Gnumeric</span></td><td>少</td><td>重</td><td><span class="application">GNOME</span></td></tr><tr><td><span class="application">KMyMoney</span></td><td>少</td><td>重</td><td><span class="application">KDE</span></td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83122000"></a>7.5.1. GnuCash</h3></div></div></div><a id="idp83122640" class="indexterm"></a><p><span class="application">GnuCash</span> は、
	<span class="application">GNOME</span> の一部で、
	使いやすくかつ強力なアプリケーションとしてエンドユーザに提供されています。
	<span class="application">GnuCash</span> を使えば、
	収入や支出、銀行口座、あるいは株を管理できます。
	直観的なインタフェースを特徴としていますが、
	高度な機能も提供しています。</p><p><span class="application">GnuCash</span> は洗練された登録機能、
	階層構造の勘定システム、多くのキーボードショートカット、
	自動補完機能を提供しています。
	単一のトランザクションをより小さな要素に分解できます。
	<span class="application">GnuCash</span> は、
	<span class="application">Quicken</span>
	の QIF ファイルの読み込みやマージができます。
	また、国際的な日付および通貨形式も扱えます。</p><p><span class="application">GnuCash</span> package
	をインストールするには次のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install gnucash</code></strong></pre><p>package が手に入らなければ、Ports Collection
	を使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/finance/gnucash</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83130192"></a>7.5.2. Gnumeric</h3></div></div></div><a id="idp83130832" class="indexterm"></a><a id="idp83131728" class="indexterm"></a><p><span class="application">Gnumeric</span> は、
	<span class="application">GNOME</span>
	コミュニティによって開発されている表計算ソフトウェアです。
	セルの書式に従ってユーザの入力を自動的に推測する便利な機能や、
	多くのシーケンスに対する自動補完機能があります。
	<span class="application">Excel</span>,
	<span class="application">Lotus 1-2-3</span>,
	<span class="application">Quattro Pro</span>
	といった広く行き渡っている多くの形式のファイルを読みこめます。
	多くの関数を内蔵しており、
	数値、通貨、日付、時間などのよく使うセルの書式が利用できます。</p><p><span class="application">Gnumeric</span> package
	をインストールするには次のように入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install gnumeric</code></strong></pre><p>package が手に入らなければ、Ports Collection
	を使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/math/gnumeric</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83143120"></a>7.5.3. KMyMoney</h3></div></div></div><a id="idp83143760" class="indexterm"></a><a id="idp83144400" class="indexterm"></a><p><span class="application">KMyMoney</span>
	は、<span class="application">KDE</span>
	コミュニティが作成している個人用財務管理アプリケーションです。
	<span class="application">KMyMoney</span> は、
	商用の個人用財務管理ソフトウェアに見られる重要な機能を提供することを目指しています。
	また、使いやすい複式簿記機能も特徴です。
	<span class="application">KMyMoney</span> は標準の
	<span class="application">Quicken</span> QIF ファイルをインポート可能で、
	投資履歴や複数通貨の取扱い、財政状況のレポートを提供します。</p><p>package から <span class="application">KMyMoney</span>
	をインストールするには次のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install kmymoney-kde4</code></strong></pre><p>package が手に入らない場合は、
	Ports Collection を使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/finance/kmymoney-kde4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="multimedia"></a>第8章 マルチメディア</h2></div><div><span class="authorgroup">編集: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lippert</span> <span class="firstname">Ross</span> [FAMILY Given]</span>. </span></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#multimedia-synopsis">8.1. この章では</a></span></dt><dt><span class="sect1"><a href="#sound-setup">8.2. サウンドカードの設定</a></span></dt><dt><span class="sect1"><a href="#sound-mp3">8.3. MP3 オーディオ</a></span></dt><dt><span class="sect1"><a href="#video-playback">8.4. ビデオ再生</a></span></dt><dt><span class="sect1"><a href="#tvcard">8.5. TV カードの設定</a></span></dt><dt><span class="sect1"><a href="#mythtv">8.6. MythTV</a></span></dt><dt><span class="sect1"><a href="#scanners">8.7. 画像スキャナ</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="multimedia-synopsis"></a>8.1. この章では</h2></div></div></div><p>FreeBSD は数多くの種類のサウンドカードに対応しており、
      FreeBSD システムで原音に忠実な出力を楽しむことができます。
      これには録音機能と、MPEG Audio Layer 3 (<acronym class="acronym">MP3</acronym>)
      や Waveform Audio File (<acronym class="acronym">WAV</acronym>), Ogg Vorbis
      などをはじめとした多くの形式の音楽の再生機能が含まれます。
      加えて FreeBSD の Ports Collection には、
      録音した音楽を編集したり、音響効果を加えたり、接続された
      MIDI 機器を制御するためのアプリケーションが用意されています。</p><p>FreeBSD ではビデオファイルおよび <acronym class="acronym">DVD</acronym>
      の再生もできます。
      FreeBSD の Ports Collection には、さまざまなビデオメディアをエンコード、
      変換、再生するアプリケーションが用意されています。</p><p>この章では FreeBSD 上でサウンドカード、ビデオの再生、TV チューナカード、
      スキャナを設定する方法について説明します。
      また、これらのデバイスを使うためのアプリケーションについても説明します。</p><p>この章を読むと、以下のことがわかります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD でのサウンドカードの設定方法</p></li><li class="listitem"><p>サウンドの設定に関するトラブルシューティング</p></li><li class="listitem"><p>MP3 およびその他の形式の音声を再生、エンコードする方法</p></li><li class="listitem"><p>FreeBSD システムでのビデオ再生の準備</p></li><li class="listitem"><p><acronym class="acronym">DVD</acronym>, <code class="filename">.mpg</code> および
	  <code class="filename">.avi</code> ファイルを再生する方法</p></li><li class="listitem"><p><acronym class="acronym">CD</acronym> および <acronym class="acronym">DVD</acronym>
	  の情報をファイルに抽出する方法</p></li><li class="listitem"><p>TV カードの設定方法</p></li><li class="listitem"><p>MythTV を FreeBSD にインストールして設定する方法</p></li><li class="listitem"><p>画像スキャナの設定方法</p></li></ul></div><p>この章を読む前に、以下のことを理解しておく必要があります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>アプリケーションのインストール方法
	(<a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a>)</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sound-setup"></a>8.2. サウンドカードの設定</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Moore</span> <span class="firstname">Moses</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">再構成: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Fonvieille</span> <span class="firstname">Marc</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp83189072" class="indexterm"></a><a id="idp83189584" class="indexterm"></a><p>設定をはじめる前に、サウンドカードのモデル、
      そのカードが使用しているチップを確認してください。
      FreeBSD は サウンドカードに幅広く対応しています。
      使用しているカードが対応しているかどうか、
      どの FreeBSD ドライバを使うかについて、
      <a class="link" href="http://www.FreeBSD.org/releases/10.1R/hardware.html" target="_top">ハードウェアノート</a>
      の対応オーディオデバイスの一覧を確認してください。</p><a id="idp83190992" class="indexterm"></a><p>サウンドデバイスを使うためには、
      デバイスドライバを読み込まなければいけません。
      もっとも簡単な方法は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>
      を使ってサウンドカードのカーネルモジュールを読み込むことです。
      次の例は、Intel
      仕様のビルトインオーディオチップセットのドライバを読み込む例です。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload snd_hda</code></strong></pre><p>このドライバを起動時に読み込むように設定するためには、
      <code class="filename">/boot/loader.conf</code> にドライバを追加してください。
      このドライバの場合は以下の行になります。</p><pre class="programlisting">snd_hda_load="YES"</pre><p>他に利用可能な読み込み可能なサウンドモジュールは
      <code class="filename">/boot/defaults/loader.conf</code>
      に記載されています。
      どのドライバを利用すればいいか確かでなければ、
      <code class="filename">snd_driver</code>
      モジュールを読み込んでください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload snd_driver</code></strong></pre><p><code class="filename">snd_driver</code> モジュールは、
      一般に使用されるカードに対応したドライバをまとめて一度に読み込むメタドライバです。
      このドライバを使用すれば、速やかに正しいドライバを探し出すことができます。
      <code class="filename">/boot/loader.conf</code> ファイルを使用して、
      すべてのサウンドドライバを読み込むこともできます。</p><p><code class="filename">snd_driver</code> メタドライバの読み込み後に、
      どのドライバがサウンドカードに選択されたのかを知るには、
      <code class="command">cat /dev/sndstat</code> と入力してください。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83203664"></a>8.2.1. サウンドに対応したカスタムカーネルを設定する</h3></div></div></div><p>この節は、
	サウンドカードのドライバをカーネルへ静的に組み込もうと考えているユーザ向けです。
	カーネル再構築の詳細は
	<a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a> を参照してください。</p><p>サウンドに対応したカスタムカーネルを使うときには、
	オーディオフレームワークドライバをカーネルコンフィグレーションファイルに追加してください。</p><pre class="programlisting">device sound</pre><p>次に、サウンドカードに対応したドライバを追加します。
	前節の Intel 仕様のビルトインオーディオチップセットの例では、
	カスタムカーネルコンフィグレーションファイルに以下の行を追加してください。</p><pre class="programlisting">device snd_hda</pre><p>ドライバのマニュアルページを読んで、
	ドライバが使用するデバイス名を調べてください。</p><p>PnP 非対応の ISA サウンドカードでは、
	IRQ および I/O ポートの設定を
	<code class="filename">/boot/device.hints</code>　
	に指定する必要があるかもしれません。
	システムの起動時に、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>
	はこのファイルを読み、設定情報をカーネルに渡します。
	たとえば、PnP 非対応の古い Creative <span class="trademark">SoundBlaster</span>® 16 (ISA 接続)
	には <code class="literal">snd_sb16</code> とともに
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_sbc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">snd_sbc</span>(4)</span></a> ドライバを使用します。
	このカードを使用する場合には、
	カーネルコンフィグレーションファイルに以下の行を追加してください。</p><pre class="programlisting">device snd_sbc
device snd_sb16</pre><p>もしカードが <code class="literal">0x220</code> I/O port と
	IRQ <code class="literal">5</code> を使用している場合には、
	<code class="filename">/boot/device.hints</code>
	に以下の行を追加してください。</p><pre class="programlisting">hint.sbc.0.at="isa"
hint.sbc.0.port="0x220"
hint.sbc.0.irq="5"
hint.sbc.0.drq="1"
hint.sbc.0.flags="0x15"</pre><p>この例では、
	I/O ポートに <code class="literal">0x220</code> を、
	IRQ に <code class="literal">5</code> を使用します。</p><p><code class="filename">/boot/device.hints</code>
	に用いるべき構文は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sound&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sound</span>(4)</span></a> および、
	サウンドカードの各ドライバのマニュアルページに記載されています。</p><p>これまでの設定はデフォルトのものです。
	カードを使用する状況によっては、
	IRQ やその他の設定を変更する必要があるかもしれません。
	このカードについての詳細は、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_sbc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">snd_sbc</span>(4)</span></a> をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sound-testing"></a>8.2.2. サウンドのテスト</h3></div></div></div><p>必要となるモジュールを読み込むか、カスタムカーネルで再起動すると、
	サウンドカードが検出されます。
	確認をするには、<code class="command">dmesg | grep pcm</code> と実行してください。
	この例は、ビルトイン Conexant CX20590
	チップセットを搭載したシステムのものです。</p><pre class="screen">pcm0: &lt;NVIDIA (0x001c) (HDMI/DP 8ch)&gt; at nid 5 on hdaa0
pcm1: &lt;NVIDIA (0x001c) (HDMI/DP 8ch)&gt; at nid 6 on hdaa0
pcm2: &lt;Conexant CX20590 (Analog 2.0+HP/2.0)&gt; at nid 31,25 and 35,27 on hdaa1</pre><p>サウンドカードの状態は、
	以下のコマンドを使用して確認することもできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat /dev/sndstat</code></strong>
FreeBSD Audio Driver (newpcm: 64bit 2009061500/amd64)
Installed devices:
pcm0: &lt;NVIDIA (0x001c) (HDMI/DP 8ch)&gt; (play)
pcm1: &lt;NVIDIA (0x001c) (HDMI/DP 8ch)&gt; (play)
pcm2: &lt;Conexant CX20590 (Analog 2.0+HP/2.0)&gt; (play/rec) default</pre><p>この出力は、サウンドカードによって異なります。
	<code class="filename">pcm</code> デバイスがなければ、
	適切なデバイスドライバが読み込まれているか、
	カーネルに追加されてコンパイルされているかどうかを確認してください。
	次の節では、良くある問題とその解決方法をリストアップしています。</p><p>すべてうまくいけば、サウンドカードが FreeBSD で機能するでしょう。
	<acronym class="acronym">CD</acronym> または <acronym class="acronym">DVD</acronym>
	ドライブのオーディオ出力端子がサウンドカードと適切に接続されていれば、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdcontrol</span>(1)</span></a> を使ってドライブ内のオーディオ
	<acronym class="acronym">CD</acronym> を再生できます。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cdcontrol -f /dev/acd0 play 1</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">オーディオ <acronym class="acronym">CD</acronym>
	  は特別なエンコーディングが行われているため、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> を使ってマウントすべきではありません。</p></div><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/workman/pkg-descr">audio/workman</a> のように、
	よりよいインタフェースを提供するさまざまなアプリケーションがあります。
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/mpg123/pkg-descr">audio/mpg123</a> port
	をインストールして MP3 オーディオファイルを聞くことができます。</p><p>手っ取り早くカードをテストするには、
	<code class="filename">/dev/dsp</code>
	デバイスにデータを送ってみてください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cat <em class="replaceable"><code>filename</code></em> &gt; /dev/dsp</code></strong></pre><p>ここで <code class="filename"><em class="replaceable"><code>filename</code></em></code>
	は、どのような形式のファイルでも構いません。
	このコマンドラインを実行すると雑音が発生するはずです。
	これにより、サウンドカードが動作していることを確認できます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">/dev/dsp*</code> デバイスノードは、
	  必要に応じて自動的に作成されます。
	  デバイスノードが使用されていない場合には存在せず、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a> の出力に表示されません。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="troubleshooting"></a>8.2.3. サウンドカードの問題についてのトラブルシューティング</h3></div></div></div><a id="idp83290448" class="indexterm"></a><a id="idp83290960" class="indexterm"></a><a id="idp83291472" class="indexterm"></a><a id="idp83291984" class="indexterm"></a><p>表 8.1 は、良くあるエラーメッセージとその解決法の一覧です。</p><div class="table"><a id="idp83292880"></a><div class="table-title">表8.1 良くあるエラーメッセージ</div><div class="table-contents"><table summary="良くあるエラーメッセージ" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>エラー</th><th>解決方法</th></tr></thead><tbody><tr><td><span class="errorname">sb_dspwr(XX) timed
		  out</span></td><td><p>使用する
		I/O ポートが適切に設定されていません。</p></td></tr><tr><td><span class="errorname">bad irq XX</span></td><td><p>使用する IRQ が正しく設定されていません。
		サウンドカードの IRQ と設定した IRQ
		が同じかどうか確かめてください。</p></td></tr><tr><td><span class="errorname">xxx: gus pcm not attached, out of
		  memory</span></td><td><p>デバイスを使用するのに十分なメモリを確保できません。</p></td></tr><tr><td><span class="errorname">xxx: can't open
		  /dev/dsp!</span></td><td><p><code class="command">fstat | grep dsp</code>
		と入力して、
		他のアプリケーションがデバイスを使用しているか調べてください。
		注目すべきトラブルメーカは
		<span class="application">esound</span> と
		<span class="application">KDE</span>
		のサウンド機能です。</p></td></tr></tbody></table></div></div><br class="table-break" /><p>最近のグラフィックカードの中には、
	<acronym class="acronym">HDMI</acronym> を利用するため、
	グラフィックカード自身がサウンドカードを持つものがあります。
	このようなサウンドデバイスには、
	時としてサウンドカードより若い番号が付けられることがあります。
	そのような場合には、
	サウンドカードをデフォルトプレイバックデバイスとして利用できません。
	このことが原因かどうかを確認するには、<span class="application">dmesg</span> を実行して
	<code class="literal">pcm</code> を探してください。
	以下のような出力を得るかもしれません。</p><pre class="programlisting">...
hdac0: HDA Driver Revision: 20100226_0142
hdac1: HDA Driver Revision: 20100226_0142
hdac0: HDA Codec #0: NVidia (Unknown)
hdac0: HDA Codec #1: NVidia (Unknown)
hdac0: HDA Codec #2: NVidia (Unknown)
hdac0: HDA Codec #3: NVidia (Unknown)
pcm0: &lt;HDA NVidia (Unknown) PCM #0 DisplayPort&gt; at cad 0 nid 1 on hdac0
pcm1: &lt;HDA NVidia (Unknown) PCM #0 DisplayPort&gt; at cad 1 nid 1 on hdac0
pcm2: &lt;HDA NVidia (Unknown) PCM #0 DisplayPort&gt; at cad 2 nid 1 on hdac0
pcm3: &lt;HDA NVidia (Unknown) PCM #0 DisplayPort&gt; at cad 3 nid 1 on hdac0
hdac1: HDA Codec #2: Realtek ALC889
pcm4: &lt;HDA Realtek ALC889 PCM #0 Analog&gt; at cad 2 nid 1 on hdac1
pcm5: &lt;HDA Realtek ALC889 PCM #1 Analog&gt; at cad 2 nid 1 on hdac1
pcm6: &lt;HDA Realtek ALC889 PCM #2 Digital&gt; at cad 2 nid 1 on hdac1
pcm7: &lt;HDA Realtek ALC889 PCM #3 Digital&gt; at cad 2 nid 1 on hdac1
...</pre><p>この例では、グラフィックカード (<code class="literal">NVidia</code>)
	には、サウンドカード (<code class="literal">Realtek ALC889</code>)
	より若い番号が付けられています。
	サウンドカードをデフォルトのプレイバックデバイスとして利用するには、
	<code class="literal">hw.snd.default_unit</code>
	をプレイバックで使用するユニット番号に変更してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl hw.snd.default_unit=<em class="replaceable"><code>n</code></em></code></strong></pre><p>ここで、<code class="literal">n</code> は使用するサウンドデバイスの番号です。
	この例では <code class="literal">4</code> です。
	<code class="filename">/etc/sysctl.conf</code> に以下の行を入れると、
	設定の変更が常に反映されるようになります。</p><pre class="programlisting">hw.snd.default_unit=<em class="replaceable"><code>4</code></em></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sound-multiple-sources"></a>8.2.4. 複数音源の利用</h3></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Chopra</span> <span class="firstname">Munish</span> [FAMILY Given]</span>. </span></div></div></div><p>同時に再生することのできる音源を複数実装していることは、
      多くの場合望ましいことです。
      FreeBSD では、<span class="quote">「<span class="quote">仮想サウンドチャネル</span>」</span>
      を使ってカーネル内でサウンドを合成することにより、
      サウンドカードの再生を多重化することができます。</p><p>仮想チャネルの数を決めるのに三つの <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>
      変数を設定できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl dev.pcm.0.play.vchans=4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl dev.pcm.0.rec.vchans=4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl hw.snd.maxautovchans=4</code></strong></pre><p>この例では四つの仮想チャネルを設定しています。
      これは通常利用する上で十分実用的な数です。
      <code class="varname">dev.pcm.0.play.vchans=4</code> と
      <code class="varname">dev.pcm.0.rec.vchans=4</code> は、
      デバイスが取り付けられた後で設定できます。
      これらは <code class="filename">pcm0</code>
      が再生や録音のために持っている仮想チャネルの数です。
      <code class="literal">hw.snd.maxautovchans</code> は、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>
      を用いて認識された新しいデバイスの仮想チャネル数です。
      <code class="filename">pcm</code>
      モジュールはハードウェアドライバとは独立して読み込むことができるので、
      <code class="varname">hw.snd.maxautovchans</code>
      は、オーディオデバイスが取り付けられた時に、
      デバイスに与えられる仮想チャネルの数を表しています。
      より詳細な情報については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pcm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pcm</span>(4)</span></a> を参照してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">デバイスを使用しているときに仮想チャンネルの数を変更することはできません。
	まず、ミュージックプレーヤやサウンドデーモンといった
	デバイスを使用しているすべてのプログラムを終了してください。</p></div><p>
      <code class="filename">/dev/dsp0</code>
      を必要とするプログラムが意識しなくても、
      適切な <code class="filename">pcm</code>
      デバイスが自動的に設定されます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83373648"></a>8.2.5. ミキサチャネルの初期値を設定する</h3></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">El-Rayes</span> <span class="firstname">Josef</span> [FAMILY Given]</span>. </span></div></div></div><p>各ミキサチャネルの初期値は
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pcm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pcm</span>(4)</span></a> ドライバのソースコードにハードコーディングされています。
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mixer&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mixer</span>(8)</span></a>
      および他のサードパーティ製のアプリケーションやデーモンによって、
      サウンドカードのミキサレベルを変更できますが、
      永続的な解決方法ではありません。
      そのかわり以下の例のように、
      適切な値を <code class="filename">/boot/device.hints</code>
      ファイルに記述することによって、
      ドライバレベルでミキサの初期値を設定することができます。</p><pre class="programlisting">hint.pcm.0.vol="50"</pre><p>この例では、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pcm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pcm</span>(4)</span></a> が読み込まれたと同時に、
      ボリュームチャネルの初期値を <code class="literal">50</code>
      に設定します。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sound-mp3"></a>8.3. MP3 オーディオ</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lee</span> <span class="firstname">Chern</span> [FAMILY Given]</span>. </span></div></div></div><p>この節では、FreeBSD で利用できる <acronym class="acronym">MP3</acronym>
    プレイヤや、オーディオ <acronym class="acronym">CD</acronym> トラックを吸い出す方法、
    および <acronym class="acronym">MP3</acronym> のエンコード、
    デコードの方法について説明します。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mp3-players"></a>8.3.1. MP3 プレイヤ</h3></div></div></div><p><span class="application">XMMS</span> は
      人気のあるグラフィカルな <acronym class="acronym">MP3</acronym> プレイヤです。
      <span class="application">Winamp</span>
      スキンや追加のプラグインに対応しています。
      <span class="application">XMMS</span> のプレイリスト、
      グラフィックイコライザ等のインタフェースは直感的です。
      <span class="application">Winamp</span> を使いなれている人は簡単に
      <span class="application">XMMS</span> を使えるでしょう。
      FreeBSD では、<span class="application">XMMS</span> は
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/xmms/pkg-descr">multimedia/xmms</a> の
      port または package からインストールできます。</p><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/mpg123/pkg-descr">audio/mpg123</a> package もしくは port は、
	は代替となる コマンドライン上の <acronym class="acronym">MP3</acronym>
	プレイヤです。インストールしたら、再生する <acronym class="acronym">MP3</acronym>
	ファイルをコマンドラインから指定してください。
	もしシステムが、複数のオーディオデバイスを搭載しているのであれば、
	サウンドデバイスを同様に指定してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mpg123 <em class="replaceable"><code>-a /dev/dsp1.0 Foobar-GreatesHits.mp3</code></em></code></strong>
High Performance MPEG 1.0/2.0/2.5 Audio Player for Layers 1, 2 and 3
        version 1.18.1; written and copyright by Michael Hipp and others
        free software (LGPL) without any warranty but with best wishes

Playing MPEG stream from Foobar-GreatestHits.mp3 ...
MPEG 1.0 layer III, 128 kbit/s, 44100 Hz joint-stereo</pre><p>他の <acronym class="acronym">MP3</acronym> プレイヤも
	Ports Collection から利用できます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rip-cd"></a>8.3.2. <acronym class="acronym">CD</acronym> オーディオトラックの抽出</h3></div></div></div><p><acronym class="acronym">CD</acronym> 全体または <acronym class="acronym">CD</acronym>
	トラックを <acronym class="acronym">MP3</acronym>
	に変換する前に、<acronym class="acronym">CD</acronym>
	上のオーディオデータをハードディスク上に抽出する必要があります。
	これは raw <acronym class="acronym">CD</acronym> Digital Audio
	(<acronym class="acronym">CDDA</acronym>) データを
	<acronym class="acronym">WAV</acronym> ファイルにコピーすることで行われます。</p><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a>
	スイートからインストールされる <code class="command">cdda2wav</code>
	ツールを用いて、<acronym class="acronym">CD</acronym>
	からオーディオデータを抽出できます。</p><p><acronym class="acronym">CD</acronym> をドライブにいれて次のコマンドを
	<code class="systemitem">root</code> 権限で実行すると、
	<acronym class="acronym">CD</acronym> 全体をトラックごとに個々の
	<acronym class="acronym">WAV</acronym> ファイルに抽出できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdda2wav -D <em class="replaceable"><code>0,1,0</code></em> -B</code></strong></pre><p>この例では、<code class="option">-D <em class="replaceable"><code>0,1,0</code></em></code>
	は <acronym class="acronym">SCSI</acronym> デバイス <code class="filename">0,1,0</code>
	が抽出する <acronym class="acronym">CD</acronym> を表します。
	<code class="command">cdrecord -scanbus</code> を使って、
	システムの適切なデバイスパラメータを取得してください。</p><p>個々のトラックを抽出するには、
	次のように <code class="option">-t</code> でトラックを指定してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdda2wav -D <em class="replaceable"><code>0,1,0</code></em> -t 7</code></strong></pre><p>範囲を指定して、
	一番目から七番目のトラックまで抽出したい場合、
	次のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdda2wav -D <em class="replaceable"><code>0,1,0</code></em> -t 1+7</code></strong></pre><p><acronym class="acronym">ATAPI</acronym> (<acronym class="acronym">IDE</acronym>)
	<acronym class="acronym">CDROM</acronym> ドライブから抽出するには、
	<acronym class="acronym">SCSI</acronym>
	ユニット番号をデバイス名に置き換えて指定します。
	たとえば IDE ドライブから七番目のトラックを抽出するには、
	次のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdda2wav -D <em class="replaceable"><code>/dev/acd0 -t 7</code></em></code></strong></pre><p>または、<a class="xref" href="#duplicating-audiocds" title="16.5.5. オーディオ CD の複製">「オーディオ CD の複製」</a>
	で説明されているように、<code class="command">dd</code> を使って
	<acronym class="acronym">ATAPI</acronym>
	ドライブ上のオーディオトラックを展開できます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mp3-encoding"></a>8.3.3. MP3 のエンコードとデコード</h3></div></div></div><p><span class="application">lame</span> は、
	ポピュラーな <acronym class="acronym">MP3</acronym> エンコーダです。
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/lame/pkg-descr">audio/lame</a>
	port からインストールできます。
	特許の問題から、package は利用できません。</p><p>次のコマンドを実行すると、抽出した <acronym class="acronym">WAV</acronym> ファイル
	<code class="filename"><em class="replaceable"><code>audio01.wav</code></em></code>
	を使って
	<code class="filename"><em class="replaceable"><code>audio01.mp3</code></em></code>
	に変換します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lame -h -b <em class="replaceable"><code>128</code></em> --tt "<em class="replaceable"><code>曲名</code></em>" --ta "<em class="replaceable"><code>アーティスト名</code></em>" --tl "<em class="replaceable"><code>アルバム名</code></em>" \
--ty "<em class="replaceable"><code>年</code></em>" --tc "<em class="replaceable"><code>コメント</code></em>" --tg "<em class="replaceable"><code>ジャンル</code></em>" <em class="replaceable"><code>audio01.wav audio01.mp3</code></em></code></strong></pre><p>ここで指定している 128 kbits は、<acronym class="acronym">MP3</acronym>
	の標準のビットレートです。
	160 kbits または 192 kbits のビットレートは、
	さらに高音質を提供します。
	ビットレートが高くなるにつれて作成される
	<acronym class="acronym">MP3</acronym> ファイルは多くのディスク領域を消費します。
	<code class="option">-h</code> オプションを指定すると
	<span class="quote">「<span class="quote">低速高品質</span>」</span> モードとなります。
	<code class="option">--t</code> ではじまるオプションは <acronym class="acronym">ID3</acronym>
	タグを設定します。
	このタグにはたいてい曲の情報が含まれており、
	<acronym class="acronym">MP3</acronym> ファイルに格納されます。
	<span class="application">Lame</span>	のマニュアルを参照すれば、
	他のエンコーディングのオプションが見つかるでしょう。</p><p><acronym class="acronym">MP3</acronym> からオーディオ
	<acronym class="acronym">CD</acronym> を作成するには、
	まず非圧縮のファイル形式に変換しなければなりません。
	<span class="application">XMMS</span>
	は <acronym class="acronym">WAV</acronym> 形式へ変換できますが、
	<span class="application">mpg123</span> は
	raw Pulse-Code Modulation (<acronym class="acronym">PCM</acronym>)
	オーディオデータに変換します。</p><p><span class="application">mpg123</span> を使って
	<code class="filename">audio01.mp3</code>
	を変換するには、<acronym class="acronym">PCM</acronym>
	ファイルを指定してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mpg123 -s <em class="replaceable"><code>audio01.mp3</code></em> &gt; <em class="replaceable"><code>audio01.pcm</code></em></code></strong></pre><p><span class="application">XMMS</span> を使って
	<acronym class="acronym">MP3</acronym> を <acronym class="acronym">WAV</acronym> 形式に変換するには、
	以下の手順に従ってください。</p><div class="procedure"><a id="idp83445712"></a><div class="procedure-title">手順8.1 <span class="application">XMMS</span> を使って
	  <acronym class="acronym">WAV</acronym> 形式に変換する</div><ol class="procedure" type="1"><li class="step"><p><span class="application">XMMS</span> を起動します。</p></li><li class="step"><p>右クリックで
	    <span class="application">XMMS</span> メニューを表示します。</p></li><li class="step"><p><code class="literal">Options</code>
	    から <code class="literal">Preferences</code> を選択します。</p></li><li class="step"><p>Output Plugin を <span class="quote">「<span class="quote">Disk Writer Plugin</span>」</span>
	    に変更します。</p></li><li class="step"><p><code class="literal">Configure</code> を押します。</p></li><li class="step"><p>非圧縮ファイルを書き出すディレクトリを入力、
	    または選択します。</p></li><li class="step"><p>普段通り <span class="application">XMMS</span>
	    へ <acronym class="acronym">MP3</acronym> ファイルを読み込みます。
	    音量は 100% でイコライザの設定はオフにします。</p></li><li class="step"><p><code class="literal">Play</code> を押します。
	    <span class="application">XMMS</span>
	    は <acronym class="acronym">MP3</acronym> を再生しているかのように表示しますが、
	    音声はきこえません。
	    実際には <acronym class="acronym">MP3</acronym> をファイルに出力しています。</p></li><li class="step"><p>終了したら、再び <acronym class="acronym">MP3</acronym> を聴けるように
	    Output Plugin を以前のように元に戻すのを忘れないでください。</p></li></ol></div><p><acronym class="acronym">WAV</acronym> と <acronym class="acronym">PCM</acronym> 形式は、
	<span class="application">cdrecord</span> で利用できます。
	<acronym class="acronym">WAV</acronym> ファイルを使用する場合、
	それぞれのトラックの先頭に小さなノイズが入るのに気づくでしょう。
	これは <acronym class="acronym">WAV</acronym> ファイルのヘッダ情報です。
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/sox/pkg-descr">audio/sox</a> port または package
	を使うとヘッダ情報を削除できます。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sox -t wav -r 44100 -s -w -c 2 <em class="replaceable"><code>track.wav track.raw</code></em></code></strong></pre><p>FreeBSD での <acronym class="acronym">CD</acronym> 作成の詳しい情報は
	<a class="xref" href="#creating-cds" title="16.5. 光メディア (CD &amp; DVD) の作成と使用">「光メディア (CD &amp; DVD) の作成と使用」</a> を参照してください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="video-playback"></a>8.4. ビデオ再生</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lippert</span> <span class="firstname">Ross</span> [FAMILY Given]</span>. </span></div></div></div><p>ビデオ再生のための設定をはじめる前に、
      ビデオカードのモデルおよびチップセットを確認する必要があります。
      <span class="application">Xorg</span>
      はさまざまなビデオカードに対応していますが、
      すべてのカードがビデオ再生に性能を発揮できるとは限りません。
      利用しているビデオカードの <span class="application">Xorg</span>
      サーバが対応している拡張機能のリストを得るには、
      <span class="application">Xorg</span> を実行中に
      <code class="command">xdpyinfo</code> を実行してください。</p><p>さまざまなプレイヤやオプションを試すのに、
      テストファイルとして小さな MPEG ファイルを用意しておくのはよい考えです。
      いくつかの <acronym class="acronym">DVD</acronym> アプリケーションは
      <acronym class="acronym">DVD</acronym> メディアを
      <code class="filename">/dev/dvd</code>
      として初期設定しているか、ハードコーディングしているので、
      次のように適切なデバイスにシンボリックリンクを張っておくと便利かもしれません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -sf /dev/cd0 /dev/dvd</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> の仕様により、
      このように手動で作成されたリンクはシステムを再起動すると消えてしまいます。
      システムの起動時にこれらのシンボリックリンクを自動的に作成するには、
      <code class="filename">/etc/devfs.conf</code>
      に下記の設定を追加してください。</p><pre class="programlisting">link cd0 dvd</pre><p>特別な機能を必要とする <acronym class="acronym">DVD</acronym> の抽出には、
      <acronym class="acronym">DVD</acronym> デバイスへの書き込み権限が必要です。</p><p><span class="application">Xorg</span>
      インタフェースの使う共有メモリを拡張するために、
      以下の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> 変数の値を増やすことが推奨されています。</p><pre class="programlisting">kern.ipc.shmmax=67108864
kern.ipc.shmall=32768</pre><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-interface"></a>8.4.1. ビデオ機能の決定</h3></div></div></div><a id="idp83486160" class="indexterm"></a><a id="idp83486672" class="indexterm"></a><a id="idp83487184" class="indexterm"></a><p><span class="application">Xorg</span>
	においてビデオ表示性能を改善する方法はいくつかあり、
	正しく動作するかどうかはハードウェアに大きく依存しています。
	下記に説明したどの方法でも、
	ハードウェアが変わると品質が変わるでしょう。</p><p>よく知られたビデオインタフェースは次の通りです。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><span class="application">Xorg</span>:
	    共有メモリを用いた通常の出力</p></li><li class="listitem"><p>XVideo: 特別なアクセラレータによって、
	    drawable オブジェクトに直接ビデオを表示する
	    <span class="application">Xorg</span> インタフェースの拡張機能です。
	    この拡張を使うことで廉価なコンピュータでも高品質の再生が可能になります。
	    次の節では、
	    この拡張が動作していることの確認方法について説明します。</p></li><li class="listitem"><p><acronym class="acronym">SDL</acronym>: Simple Directmedia Layer は、
	    さまざまなオペレーティングシステムの間でサウンドとグラフィックスを効果的に利用したクロスプラットホームアプリケーションを開発することを目的としたレイヤです。
	    <acronym class="acronym">SDL</acronym>
	    はハードウェアに対する低レベルの抽象的概念を提供し、
	    時には <span class="application">Xorg</span>
	    インタフェースを使用するよりも効果的なことがあります。
	    FreeBSD では、<acronym class="acronym">SDL</acronym> は、
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/sdl20/pkg-descr">devel/sdl20</a> package または port
	    によりインストールできます。</p></li><li class="listitem"><p><acronym class="acronym">DGA</acronym>: Direct Graphics Access は、
	    プログラムが <span class="application">Xorg</span>
	    サーバを介せず直接フレームバッファを変更することを可能にする
	    <span class="application">Xorg</span> の拡張機能です。
	    低レベルのメモリマッピングが実行できることを期待しているので、
	    この機能を使うプログラムは
	    <code class="systemitem">root</code>
	    権限で実行されなければなりません。
	    <acronym class="acronym">DGA</acronym> 機能拡張は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dga&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dga</span>(1)</span></a>
	    によってテストとベンチマークができます。
	    <code class="command">dga</code>
	    実行中はキーボードを押せばいつでもディスプレイ色が変更されます。
	    中止するには <span class="keycap"><strong>q</strong></span> を押します。</p></li><li class="listitem"><p>SVGAlib: 低レベルコンソールグラフィックレイヤ</p></li></ol></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-interface-xvideo"></a>8.4.1.1. XVideo</h4></div></div></div><p>この拡張機能が動作しているかどうかを調べるには、
	  <code class="command">xvinfo</code> を使います。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xvinfo</code></strong></pre><p>以下のような結果が得られたならば、カードは
	  XVideo に対応しています。</p><pre class="screen">X-Video Extension version 2.2
  screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
      "XV_COLORKEY" (range 0 to 16777215)
              client settable attribute
              client gettable attribute (current value is 2110)
      "XV_BRIGHTNESS" (range -128 to 127)
              client settable attribute
              client gettable attribute (current value is 0)
      "XV_CONTRAST" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_SATURATION" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_HUE" (range -180 to 180)
              client settable attribute
              client gettable attribute (current value is 0)
    maximum XvImage size: 1024 x 1024
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x30323449 (I420)
        guid: 49343230-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x36315652 (RV16)
        guid: 52563135-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x3e0, 0x7c00
      id: 0x35315652 (RV15)
        guid: 52563136-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x7e0, 0xf800
      id: 0x31313259 (Y211)
        guid: 59323131-0000-0010-8000-00aa00389b71
        bits per pixel: 6
        number of planes: 3
        type: YUV (packed)
      id: 0x0
        guid: 00000000-0000-0000-0000-000000000000
        bits per pixel: 0
        number of planes: 0
        type: RGB (packed)
        depth: 1
        red, green, blue masks: 0x0, 0x0, 0x0</pre><p>リストにある形式、YUV2, YUV12 などが XVideo
	  のすべての実装で存在するとは限りません。
	  対応している形式が少ないために、
	  あるプレイヤでは悪影響が出るかもしれないことにも注意してください。</p><p>出力が以下のような場合、</p><pre class="screen">X-Video Extension version 2.2
screen #0
no adaptors present</pre><p>カードはおそらく XVideo に対応していないのでしょう。
	  このことはディスプレイでビデオを表示するのに、
	  ビデオカードおよびプロセッサによっては、
	  計算上の要求を満たすことがより困難になることを意味します。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-ports"></a>8.4.2. ビデオを扱う ports および packages</h3></div></div></div><a id="idp83509456" class="indexterm"></a><a id="idp83518288" class="indexterm"></a><p>この節では Ports Collection で利用可能な、
	ビデオの再生に使用できるソフトウェアについて紹介します。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-mplayer"></a>8.4.2.1. <span class="application">MPlayer</span> および
	  <span class="application">MEncoder</span></h4></div></div></div><p><span class="application">MPlayer</span>
	  はコマンドラインのビデオプレイヤで、
	  高速性と柔軟性をもたらすグラフィカルなインタフェースも持っています。
	  <span class="application">MPlayer</span>
	  の他のグラフィカルなフロントエンドも
	  Ports Collection からインストールできます。</p><a id="idp83521488" class="indexterm"></a><p><span class="application">MPlayer</span> は
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/mplayer/pkg-descr">multimedia/mplayer</a>
	  package または port からインストールできます。
	  いくつかのコンパイル時のオプションを設定することができ、また、
	  構築の際にさまざまなハードウェアのチェックがおこなわれます。
	  そのため、package からインストールを行わず、
	  port から構築することを好むユーザもいます。</p><p>port を構築する際に、メニューのオプションは、port
	  にコンパイル時にオプションとしてどの形式に対応するかを決定するため、
	  見ておく必要があります。
	  オプションが選択されていなければ、
	  <span class="application">MPlayer</span>
	  はその形式のビデオ形式を表示することは出来ません。
	  矢印キーとスペースキーを使って必要な形式を選択してください。
	  選択が終わったら、<span class="keycap"><strong>Enter</strong></span> を押して、
	  port の構築とインストールを続けてください。</p><p>デフォルトでは、この packege または port は、
	  <code class="command">mplayer</code> コマンドラインユーティリティと
	  <code class="command">gmplayer</code> グラフィカルユーティリティを構築します。
	  ビデオをエンコードする必要があれば、
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/mencoder/pkg-descr">multimedia/mencoder</a>
	  port をコンパイルしてください。
	  ライセンスの制限のため、
	  <span class="application">MEncoder</span> の
	  package は利用できません。</p><p><span class="application">MPlayer</span> を初めて起動すると、
	  各自のホームディレクトリ内に <code class="filename">~/.mplayer</code>
	  が作成されます。このサブディレクトリには、
	  ユーザ固有の設定ファイルのデフォルトバージョンが含まれています。</p><p>この節では、一般的な使用法についてのみ説明します。
	  数多くのオプションの完全な説明については、
	  mplayer(1) のマニュアルに記載されています。</p><p><code class="filename"><em class="replaceable"><code>testfile.avi</code></em></code>
	  というファイルを再生するには、以下の例のように、
	  <code class="option">-vo</code> とともに、
	  ビデオインタフェースを指定してください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mplayer -vo xv <em class="replaceable"><code>testfile.avi</code></em></code></strong></pre><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mplayer -vo sdl <em class="replaceable"><code>testfile.avi</code></em></code></strong></pre><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mplayer -vo x11 <em class="replaceable"><code>testfile.avi</code></em></code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -vo dga <em class="replaceable"><code>testfile.avi</code></em></code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -vo 'sdl:dga' <em class="replaceable"><code>testfile.avi</code></em></code></strong></pre><p>ビデオ再生の相対的性能は多くの要因に依存し、
	  ハードウェアに応じて著しく変わると思われるので、
	  これらのオプションをすべて試してみる価値はあるでしょう。</p><p><acronym class="acronym">DVD</acronym> を再生するには、
	  <code class="filename"><em class="replaceable"><code>testfile.avi</code></em></code> を
	  <code class="option">dvd://<em class="replaceable"><code>N</code></em> -dvd-device
	    <em class="replaceable"><code>DEVICE</code></em></code>
	  に置き換えてください。
	  &lt;N&gt; には再生するタイトル番号を、
	  <em class="replaceable"><code>DEVICE</code></em>
	  は <acronym class="acronym">DVD</acronym> のデバイスノードを指定します。
	  たとえば、<code class="filename">/dev/dvd</code>
	  から 2 番目のタイトルを再生するには以下のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -vo xv dvd://3 -dvd-device /dev/dvd</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">デフォルトの <acronym class="acronym">DVD</acronym> デバイスは、
	    <span class="application">MPlayer</span> port の構築時に
	    <code class="varname">WITH_DVD_DEVICE=/path/to/desired/device</code>
	    を追加することでで定義できます。
	    デフォルトでは、デバイスは
	    <code class="filename">/dev/cd0</code> です。
	    詳細はこの port の
	    <code class="filename">Makefile.options</code> をご覧ください。</p></div><p>停止、休止、
	  再生などをするにはキーバインディングを使ってください。
	  キーバインディングの一覧を見るには、<code class="command">mplayer -h</code>
	  を実行するか、もしくは、mplayer(1) を読んでください。</p><p>再生に関する追加のオプションがあります。
	  全画面モードにする <code class="option">-fs -zoom</code> オプションと、
	  性能を向上させる <code class="option">-framedrop</code> オプションです。</p><p>よく使用するオプションについては、各ユーザの
	  <code class="filename">.mplayer/config</code>
	  に以下のように追加してください。</p><pre class="programlisting">vo=xv
fs=yes
zoom=yes</pre><p><code class="command">mplayer</code> を使って、
	  <acronym class="acronym">DVD</acronym> タイトルを
	  <code class="filename">.vob</code> に抽出できます。
	  <acronym class="acronym">DVD</acronym> から
	  2 番目のタイトルをダンプするには次のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -dumpstream -dumpfile out.vob dvd://2 -dvd-device /dev/dvd</code></strong></pre><p>出力された <code class="filename">out.vob</code> ファイルは
	  MPEG 形式です。</p><p><span class="trademark">UNIX</span>® ビデオについて、
	  高レベルのノウハウを得たいと考えている方は <a class="link" href="http://www.mplayerhq.hu/DOCS/" target="_top">mplayerhq.hu/DOCS</a>
	  をご覧ください。技術的な情報があります。
	  このドキュメントは、
	  バグを報告する前に、読むべきものです。</p><a id="idp83570384" class="indexterm"></a><p><code class="command">mencoder</code> を使う前に、<a class="link" href="http://www.mplayerhq.hu/DOCS/HTML/en/mencoder.html" target="_top">mplayerhq.hu/DOCS/HTML/en/mencoder.html</a>
	  を読んでオプションに慣れておくのはよい考えです。
	  品質向上、低ビットレート、形式変換をする方法が無数にあります。
	  これらの要素の調節具合で、性能が良かったり悪かったりするなど、
	  結果に違いが出るかもしれません。
	  コマンドラインオプションを不適切に組合せると、
	  <code class="command">mplayer</code>
	  でさえ再生できない出力ファイルを作成してしまいます。</p><p> はじめは単純なファイルのコピーです。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mencoder <em class="replaceable"><code>input.avi</code></em> -oac copy -ovc copy -o <em class="replaceable"><code>output.avi</code></em></code></strong></pre><p>したがって、単にファイルを抽出したいときには、
	  <code class="command">mplayer</code> に <code class="option">-dumpfile</code>
	  をつけます。</p><p><code class="filename"><em class="replaceable"><code>input.avi</code></em></code>
	  を音声に MPEG3 エンコードを使用して
	  MPEG4 コーデックに変換するには、まず最初に
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/lame/pkg-descr">audio/lame</a>
	  port をインストールしてください。
	  ライセンスの制限により、package は利用できません。
	  インストールしたら、以下のように入力してください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mencoder <em class="replaceable"><code>input.avi</code></em> -oac mp3lame -lameopts br=192 \
	 -ovc lavc -lavcopts vcodec=mpeg4:vhq -o <em class="replaceable"><code>output.avi</code></em></code></strong></pre><p>これは <code class="command">mplayer</code> や
	  <code class="command">xine</code>
	  といったアプリケーションで再生可能な出力ファイルを作成します。</p><p><acronym class="acronym">DVD</acronym> タイトルを直接再エンコードするためには、
	  上記のコマンドラインの
	  <code class="filename"><em class="replaceable"><code>input.avi</code></em></code> を
	  <code class="option">dvd://1 -dvd-device /dev/dvd</code> に置き換えて、
	  <code class="systemitem">root</code> 権限で実行します。
	  期待する結果を得るには何度か繰り返すことになるので、
	  かわりにタイトルをファイルにダンプして、
	  ファイルに対して作業することをおすすめします。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-xine"></a>8.4.2.2. <span class="application">xine</span> ビデオプレイヤ</h4></div></div></div><p><span class="application">xine</span> は、
	  再利用可能な基本ライブラリと、
	  プラグインで拡張できる実行可能なモジュールを提供するビデオプレイヤです。
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/xine/pkg-descr">multimedia/xine</a> package
	  または port からインストールできます。</p><p>実用上、<span class="application">xine</span>
	  を使用するには高速なビデオカードとともに高速な CPU があるか、
	  またはビデオカードが XVideo 拡張に対応している必要があります。
	  XVideo インタフェースとともに <span class="application">xine</span>
	  ビデオプレイヤを使うのが最良です。</p><p>デフォルトでは、<span class="application">xine</span> プレイヤは
	  GUI 付きで起動するでしょう。
	  メニューを使用して特定のファイルを開くことができます。</p><p><span class="application">xine</span> は、
	  再生するファイル名を指定することで、
	  コマンドラインから実行することもできます。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xine -g -p <em class="replaceable"><code>mymovie.avi</code></em></code></strong></pre><p><a class="link" href="http://www.xine-project.org/faq" target="_top">
	    xine-project.org/faq</a>
	  には、より多くの情報やトラブルシューティングがあります。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-ports-transcode"></a>8.4.2.3. <span class="application">Transcode</span> ユーティリティ</h4></div></div></div><p><span class="application">Transcode</span> は、
	  ビデオおよびオーディオファイルを再エンコードするためのツール一式です。
	  <span class="application">Transcode</span> を使えば、stdin/stdout
	  ストリームインタフェースとともにコマンドラインツールを用いることで、
	  ビデオファイルの統合や、壊れたファイルの修復ができます。</p><p>FreeBSD では、<span class="application">Transcode</span> は、
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/transcode/pkg-descr">multimedia/transcode</a> package
	  もしくは port からインストールできます。
	  多くのユーザは port からコンパイルすることを好みます。
	  port では、
	  コンパイルで有効にするサポートやコーデックを指定するコンパイルオプションのメニューを利用できるためです。
	  オプションを選択しないと、<span class="application">Transcode</span>
	  は、その形式をエンコード出来ないでしょう。
	  矢印キーとスペースバーを使って、
	  必要とするフォーマットを選択してください。
	  選択が終わったら、
	  <span class="keycap"><strong>Enter</strong></span> を押して、port
	  のコンパイルとインストールを続けてください。</p><p>この例では、DivX ファイルを
	  PAL MPEG-1 (PAL VCD) に変換する使用例を示します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>transcode -i
<em class="replaceable"><code>input.avi</code></em> -V --export_prof vcd-pal -o output_vcd</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>mplex -f 1 -o <em class="replaceable"><code>output_vcd.mpg output_vcd.m1v output_vcd.mpa</code></em></code></strong></pre><p>作成された <acronym class="acronym">MPEG</acronym> ファイル、
	  <code class="filename"><em class="replaceable"><code>output_vcd.mpg</code></em></code> は、
	  <span class="application">MPlayer</span> を使って再生できます。
	  また、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/vcdimager/pkg-descr">multimedia/vcdimager</a>
	  および <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrdao/pkg-descr">sysutils/cdrdao</a>
	  といったユーティリティを使って、
	  ファイルを <acronym class="acronym">CD</acronym>
	  メディアに書き込むことでビデオ
	  <acronym class="acronym">CD</acronym> も作成できます。</p><p><code class="command">transcode</code> のマニュアルページに加え、<a class="link" href="http://www.transcoding.org/cgi-bin/transcode" target="_top">transcoding.org/cgi-bin/transcode</a>
	  から、更なる情報や使用例を得てください。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="tvcard"></a>8.5. TV カードの設定</h2></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">El-Rayes</span> <span class="firstname">Josef</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">改訂: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Fonvieille</span> <span class="firstname">Marc</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp83622864" class="indexterm"></a><p>TV カードを使用することで、
      TV 放送をコンピュータで見ることができます。
      これらの多くのカードは <acronym class="acronym">RCA</acronym>
      または S-video 入力端子を備えており、
      <acronym class="acronym">FM</acronym> ラジオチューナを装備したカードもあります。</p><p>FreeBSD は、Brooktree Bt848/849/878/879
      をビデオキャプチャチップに採用した PCI TV カードに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a>
      ドライバで対応しています。
      このドライバは、ほとんどの Pinnacle PCTV ビデオカードに対応しています。
      TV カードを購入する前に、対応しているチューナの一覧について、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a> を参照してください。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83626704"></a>8.5.1. ドライバを読み込む</h3></div></div></div><p>カードを使用するには、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a>
	ドライバを読み込む必要があります。
	起動時に自動的に読み込むためには、
	<code class="filename">/boot/loader.conf</code>
	に以下の行を追加してください。</p><pre class="programlisting">bktr_load="YES"</pre><p>あるいは、カスタムカーネルに TV
	ビデオカードへのサポートを静的に組み込むこともできます。
	この場合には、
	次の行をカーネルコンフィギュレーションファイルに追加してください。</p><pre class="programlisting">device	 bktr
device	iicbus
device	iicbb
device	smbus</pre><p>カードコンポーネントは I2C バス経由で連結されているため、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a> ドライバに加えてこれらのデバイスが必要になります。
	編集したら新しいカーネルを構築し、インストールします。</p><p>チューナが適切に検出されたかどうかを確認するため、
	システムを再起動してください。
	起動時のメッセージに TV カードが以下のように認識されるでしょう。</p><pre class="programlisting">bktr0: &lt;BrookTree 848A&gt; mem 0xd7000000-0xd7000fff irq 10 at device 10.0 on pci0
iicbb0: &lt;I2C bit-banging driver&gt; on bti2c0
iicbus0: &lt;Philips I2C bus&gt; on iicbb0 master-only
iicbus1: &lt;Philips I2C bus&gt; on iicbb0 master-only
smbus0: &lt;System Management Bus&gt; on bti2c0
bktr0: Pinnacle/Miro TV, Philips SECAM tuner.</pre><p>これらのメッセージはハードウェアに応じて異なります。
	必要であれば、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> や、
	カーネルコンフィギュレーションファイルオプションで、
	検知されたいくつかのパラメータを変更できます。
	たとえば、チューナを Philips SECAM
	チューナとして検知されるようにするには、
	カーネルコンフィギュレーションファイルに以下の行を追加します。</p><pre class="programlisting">options OVERRIDE_TUNER=6</pre><p>または、直接 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> を使用して変更します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl hw.bt848.tuner=6</code></strong></pre><p>利用可能な <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>
	パラメータおよびカーネルオプションについては <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a>
	を参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83641936"></a>8.5.2. 便利なアプリケーション</h3></div></div></div><p>TV カードを使用するためには、
	以下のアプリケーションの一つをインストールする必要があります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/fxtv/pkg-descr">multimedia/fxtv</a>
	    はウィンドウ内に TV 映像を映します。
	    画像/音声/ビデオを取り込むこともできます。</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/xawtv/pkg-descr">multimedia/xawtv</a>
	    も同様の機能を持った TV アプリケーションです。</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/xmradio/pkg-descr">audio/xmradio</a>
	    は TV カードに搭載された FM
	    ラジオチューナを使用するためのアプリケーションです。</p></li></ul></div><p>他にも多くのアプリケーションが FreeBSD の
	Ports Collection に収録されています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83646928"></a>8.5.3. トラブルシューティング</h3></div></div></div><p>TV カードに関する問題が起きたときには、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a>
	が本当にビデオキャプチャチップおよびチューナに対応しているか、
	オプションが正しく設定されているかどうかをまず確認してください。
	TV カードに関するサポートや質問に関しては、
	<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-multimedia" target="_top">freebsd-multimedia</a>
	メーリングリストを参照してください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mythtv"></a>8.6. MythTV</h2></div></div></div><p>MythTV は、広く使われているオープンソースの Personal Video Recorder
      (<acronym class="acronym">PVR</acronym>) アプリケーションです。
      この節では、FreeBSD に MythTV をインストールし、
      設定する方法について説明します。
      MythTV の使用法に関するより詳細な情報については、<a class="link" href="http://www.mythtv.org/wiki/" target="_top">mythtv.org/wiki</a>
      をご覧ください。</p><p>MythTV は、フロントエンドおよびバックエンドを必要とします。
      これらは、同じシステム上でも、
      異なるコンピュータ上でも動かすことが可能です。</p><p>フロントエンドについては、
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/mythtv-frontend/pkg-descr">multimedia/mythtv-frontend</a> package または port
      から FreeBSD にインストールできます。
      <a class="xref" href="#x11" title="第6章 X Window System">6章<em>X Window System</em></a> で説明されているように、
      <span class="application">Xorg</span>
      をインストールして設定する必要もあります。
      このシステムは X-Video Motion Compensation
      (<acronym class="acronym">XvMC</acronym>) に対応し、
      オプションとして、Linux Infrared Remote Control
      (<acronym class="acronym">LIRC</acronym>)-互換のリモートに対応したビデオカードを持っていることが理想的です。</p><p>FreeBSD にバックエンドとフロントエンドの両方をインストールするには、
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/mythtv/pkg-descr">multimedia/mythtv</a> package または port
      を使ってください。
      <span class="trademark">MySQL</span>™ データベースサーバも必要となりますが、
      自動的に依存でインストールされます。オプションで、
      チューナカードと録音したデータを保存するためのストレージが必要です。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83668048"></a>8.6.1. ハードウェア</h3></div></div></div><p>MythTV は、
	エンコーダやチューナなどのビデオ入力デバイスへのアクセスに
	Video for Linux (<acronym class="acronym">V4L</acronym>) を用います。
	FreeBSD では、<acronym class="acronym">USB</acronym> DVB-S/C/T
	カードにおいて最もよく動作します。
	なぜならば、このカードは、
	<acronym class="acronym">V4L</acronym> ユーザランドアプリケーションを提供する
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/webcamd/pkg-descr">multimedia/webcamd</a> package または port
	により良くサポートされているためです。
	<span class="application">webcamd</span> により対応している
	Digital Video Broadcasting (<acronym class="acronym">DVB</acronym>)
	カードは、MythTV で動作するはずです。
	動作することが知られているカードの一覧が
	<a class="link" href="http://wiki.freebsd.org/WebcamCompat" target="_top">wiki.freebsd.org/WebcamCompat</a>
	にあります。
	Hauppauge カードのドライバもまた、
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/pvr250/pkg-descr">multimedia/pvr250</a>
	および <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/pvrxxx/pkg-descr">multimedia/pvrxxx</a>
	port として利用可能ですが、
	標準的ではないドライバのインタフェースを提供しており、
	0.23 より後の MythTV では動作しません。
	ライセンスの制限により、package は利用できません。
	そのため、これらの ports はコンパイルをしなければなりません。</p><p><a class="link" href="http://wiki.freebsd.org/HTPC" target="_top">wiki.freebsd.org/HTPC</a>
	ページは、<acronym class="acronym">DVB</acronym>
	ドライバのすべての一覧を提供しています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83674448"></a>8.6.2. MythTV バックエンドの設定</h3></div></div></div><p>port を使って MythTV をインストールしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/multimedia/mythtv</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong></pre><p>インストールが終わったら、
	MythTV データベースを設定してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mysql -uroot -p &lt; /usr/local/share/mythtv/database/mc.sql</code></strong></pre><p>その後、バックエンドを設定してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mythtv-setup</code></strong></pre><p>最後にバックエンドを起動してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 'mythbackend_enable="YES"' &gt;&gt; /etc/rc.conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>service mythbackend start</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="scanners"></a>8.7. 画像スキャナ</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Fonvieille</span> <span class="firstname">Marc</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp83694160" class="indexterm"></a><p>FreeBSD では、画像スキャナに対するアクセスは
      <span class="application">SANE</span> (Scanner Access Now Easy)
      によって実現されており、
      FreeBSD の Ports Collection で提供されています。
      <span class="application">SANE</span>
      はスキャナのハードウェアにアクセスするために
      FreeBSD デバイスドライバを使用します。</p><p>FreeBSD は
      <acronym class="acronym">SCSI</acronym> 接続および <acronym class="acronym">USB</acronym>
      接続のスキャナのどちらにも対応しています。
      スキャナのインタフェースに依存して、異なるドライバが必要となります。
      設定を始める前に、
      <span class="application">SANE</span>
      がスキャナに対応していることを確認してください。
      対応しているスキャナに関してのより詳細な情報については、<a class="link" href="http://www.sane-project.org/sane-supported-devices.html" target="_top">
      http://www.sane-project.org/sane-supported-devices.html</a>
      をご覧ください。</p><p>この節では、FreeBSD
      がどのようにしてスキャナを認識するかについて説明します。
      その後、FreeBSD システム上で <span class="application">SANE</span>
      を設定して使用する方法の概要について説明します。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="scanners-kernel-usb"></a>8.7.1. スキャナの確認</h3></div></div></div><p><code class="filename">GENERIC</code> カーネルには <acronym class="acronym">USB</acronym>
	スキャナに対応するためのデバイスドライバが搭載されています。
	カスタムカーネルを使用する際には、
	以下の行がカーネルコンフィグレーションファイルにあることを確認してください。</p><pre class="programlisting">device usb
device uhci
device ohci
device ehci</pre><p><acronym class="acronym">USB</acronym> スキャナが認識されたかを確認するには、
	スキャナを接続して、<code class="command">dmesg</code> を利用し、
	システムメッセージバッファで、
	スキャナが認識されているかどうかを確認してください。
	認識されていたら、以下のようなメッセージが表示されます。</p><pre class="screen">ugen0.2: &lt;EPSON&gt; at usbus0</pre><p>この例では、<span class="trademark">EPSON
  Perfection</span>® 1650
	<acronym class="acronym">USB</acronym> スキャナが
	<code class="filename">/dev/ugen0.2</code>
	上で認識されています。</p><p>スキャナのインタフェースが <acronym class="acronym">SCSI</acronym> であれば、
	どの <acronym class="acronym">SCSI</acronym>
	コントローラボードを使用するかを知ることが重要です。
	使用する <acronym class="acronym">SCSI</acronym> チップセットによって、
	カスタムカーネルコンフィグレーションファイルを調整する必要があります。
	<code class="filename">GENERIC</code> カーネルは、
	一般に使用される <acronym class="acronym">SCSI</acronym>
	コントローラのほとんどに対応しています。
	<code class="filename">/usr/src/sys/conf/NOTES</code> ファイルを読んで、
	適切な行をカーネルコンフィグレーションファイルに追加してください。
	また、<acronym class="acronym">SCSI</acronym> アダプタドライバに加えて、
	以下の行をカスタムカーネルコンフィグレーションファイルに記述する必要があります。</p><pre class="programlisting">device scbus
device pass</pre><p>デバイスがメッセージバッファに出力されていることを確認してください。</p><pre class="screen">pass2 at aic0 bus 0 target 2 lun 0
pass2: &lt;AGFA SNAPSCAN 600 1.10&gt; Fixed Scanner SCSI-2 device
pass2: 3.300MB/s transfers</pre><p>システムを起動する際にスキャナの電源を入れてなければ、
	<code class="command">camcontrol</code> を使用して
	<acronym class="acronym">SCSI</acronym> バスをスキャンし、
	以下のように手動でデバイスを検出させることもできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol rescan all</code></strong>
Re-scan of bus 0 was successful
Re-scan of bus 1 was successful
Re-scan of bus 2 was successful
Re-scan of bus 3 was successful</pre><p>すると、スキャナは <acronym class="acronym">SCSI</acronym>
	デバイスの一覧に現れるでしょう。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol devlist</code></strong>
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 5 lun 0 (pass0,da0)
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 6 lun 0 (pass1,da1)
&lt;AGFA SNAPSCAN 600 1.10&gt;           at scbus1 target 2 lun 0 (pass3)
&lt;PHILIPS CDD3610 CD-R/RW 1.00&gt;     at scbus2 target 0 lun 0 (pass2,cd0)</pre><p>FreeBSD における <acronym class="acronym">SCSI</acronym> デバイスについての詳細は、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scsi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">scsi</span>(4)</span></a> および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">camcontrol</span>(8)</span></a> をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83727312"></a>8.7.2. <span class="application">SANE</span> の設定</h3></div></div></div><p><span class="application">SANE</span> システムは、
	二つの部分、すなわちバックエンド
	(<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-backends/pkg-descr">graphics/sane-backends</a>)
	とフロントエンド
	(<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-frontends/pkg-descr">graphics/sane-frontends</a>
	もしくは、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/xsane/pkg-descr">graphics/xsane</a>)
	に分割されています。
	バックエンドはスキャナに対するアクセスを提供します。
	どのバックエンドが画像スキャナに対応しているかについては、<a class="link" href="http://www.sane-project.org/sane-supported-devices.html" target="_top">http://www.sane-project.org/sane-supported-devices.html</a>
	を参照してください。
	フロントエンドはグラフィカルなスキャニングインタフェースを提供します。
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-frontends/pkg-descr">graphics/sane-frontends</a> は、
	<span class="application">xscanimage</span> をインストールし、一方、
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/xsane/pkg-descr">graphics/xsane</a> は、
	<span class="application">xsane</span> をインストールします。</p><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-backends/pkg-descr">graphics/sane-backends</a>
	port または package をインストールしたら、
	<code class="command">sane-find-scanner</code> コマンドを使用して、
	<span class="application">SANE</span>
	システムで検出されているスキャナを確認してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sane-find-scanner -q</code></strong>
found SCSI scanner "AGFA SNAPSCAN 600 1.10" at /dev/pass3</pre><p>この出力から、
	スキャナインタフェースの種類と
	システムに接続されているスキャナが使用するデバイスノードがわかります。
	ベンダ名や製品のモデル名は表示されないかも知れません。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">いくつかの <acronym class="acronym">USB</acronym>
	  スキャナではファームウェアを読み込む必要がある場合があります。
	  詳細については、sane-find-scanner(1) および
	  sane(7) を参照してください。</p></div><p>次に、スキャナがフロントエンドで認識されるか調べてください。
	<span class="application">SANE</span> のバックエンドには
	<code class="command">scanimage</code> が付属します。
	このコマンドを使用すると、
	デバイスの一覧を表示したり画像を取得することができます。
	スキャナデバイスの一覧を表示するには、
	<code class="option">-L</code> オプションを使ってください。
	以下の最初の例は、<acronym class="acronym">SCSI</acronym> スキャナ用のもので、
	次の例は、<acronym class="acronym">USB</acronym> スキャナ用のものです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>
device `snapscan:/dev/pass3' is a AGFA SNAPSCAN 600 flatbed scanner
<code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>
device 'epson2:libusb:/dev/usb:/dev/ugen0.2' is a Epson GT-8200 flatbed scanner</pre><p>2 番目の出力の中で、
	<code class="literal">'epson2:libusb:/dev/usb:/dev/ugen0.2'</code>
	がスキャナが使用するバックエンド名
	(<code class="literal">epson2</code>) および
	<code class="literal">/dev/ugen0.2</code> は、デバイスノードです。</p><p><code class="command">scanimage</code> がスキャナの認識に失敗した場合には、
	以下のようなメッセージが表示されます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>

No scanners were identified. If you were expecting something different,
check that the scanner is plugged in, turned on and detected by the
sane-find-scanner tool (if appropriate). Please read the documentation
which came with this software (README, FAQ, manpages).</pre><p>このような場合には、<code class="filename">/usr/local/etc/sane.d/</code>
	にあるバックエンドの設定ファイルを編集して、
	使用するスキャナデバイスを設定してください。
	例えば、認識されなかったスキャナのモデルが、
	<span class="trademark">EPSON
  Perfection</span>® 1650 で、<code class="literal">epson2</code>
	バックエンドを使っているのであれば、
	<code class="filename">/usr/local/etc/sane.d/epson2.conf</code>
	を編集してください。
	編集作業を行う際には、
	使用するインタフェースとデバイスノードを指定する行を追加します。
	この例では、以下の行を追加します。</p><pre class="programlisting">usb /dev/ugen0.2</pre><p>編集を保存し、
	適切なバックエンド名とデバイスノードでスキャナが認識されたかどうかを確認してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>
device 'epson2:libusb:/dev/usb:/dev/ugen0.2' is a Epson GT-8200 flatbed scanner</pre><p><code class="command">scanimage -L</code>
	を実行してスキャナが認識されたことがわかれば、設定は終了です。
	スキャナを使用する準備ができました。</p><p><code class="command">scanimage</code>
	を使用してコマンドラインから画像を取得することができますが、
	GUI を使用して画像を取得できるとより望ましいでしょう。
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-frontends/pkg-descr">graphics/sane-frontends</a>
	package および port は、シンプルですが、
	効率的なグラフィカルインタフェース
	<span class="application">xscanimage</span>
	をインストールします。</p><p>一方、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/xsane/pkg-descr">graphics/xsane</a>
	package または port からインストールされる
	<span class="application">xsane</span> は、
	広く使われているもう一つのグラフィカルなスキャニングフロントエンドです。
	<span class="application">Xsane</span> には、さまざまなスキャニングモード、
	色補正、バッチスキャンなど先進的な機能があります。
	これらのアプリケーションの両方とも <span class="application">GIMP</span>
	のプラグインとして使用することができます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83772624"></a>8.7.3. スキャナの許可属性</h3></div></div></div><p>スキャナにアクセスするには、
	ユーザはスキャナが使用するデバイスノードへの読み込み権限と書き込み権限が必要です。
	今回の例では、<acronym class="acronym">USB</acronym> スキャナは
	<code class="filename">/dev/ugen0.2</code> デバイスノードを使用しています。
	このデバイスノードは、
	<code class="filename">/dev/usb/0.2.0</code> へのシンボリックリンクです
	シンボリックリンクとデバイスノードは、
	それぞれ <code class="systemitem">wheel</code> および
	<code class="systemitem">operator</code>
	グループが所有しています。
	ユーザをこれらのグループに加えると、
	スキャナを使用できるようになりますが、
	ユーザを <code class="systemitem">wheel</code>
	に追加することは、セキュリティの観点からお勧めできません。
	良い方法は、
	スキャナデバイスにアクセスできるグループを作成することです。</p><p>この例では、<code class="systemitem"><em class="replaceable"><code>usb</code></em></code>
	という名前のグループを作成します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupadd usb</code></strong></pre><p>その後、シンボリックリンク <code class="filename">/dev/ugen0.2</code>
	および、<code class="filename">/dev/usb/0.2.0</code> デバイスノードに対して、
	<code class="systemitem">usb</code>
	グループが利用できるように書き込みの許可属性
	<code class="literal">0660</code> または <code class="literal">0664</code>
	を設定してください。
	<code class="filename">/etc/devfs.rules</code>
	に次の行を追加すれば設定できます。</p><pre class="programlisting">[system=5]
add path ugen0.2 mode 0660 group usb
add path usb/0.2.0 mode 0666 group usb</pre><p>最後に、スキャナを利用するユーザを <code class="systemitem"><em class="replaceable"><code>usb</code></em></code>
	グループに追加してスキャナを利用できるようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupmod usb -m <em class="replaceable"><code>joe</code></em></code></strong></pre><p>詳細については、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> をご覧ください。</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="kernelconfig"></a>第9章 FreeBSD カーネルのコンフィグレーション</h2></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#kernelconfig-synopsis">9.1. この章では</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-custom-kernel">9.2. なぜカスタムカーネルを作るか?</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-devices">9.3. システムのハードウェアについて知る</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-config">9.4. コンフィグレーションファイル</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-building">9.5. カスタムカーネルの構築とインストール</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-trouble">9.6. 問題が起きた場合には</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-synopsis"></a>9.1. この章では</h2></div></div></div><a id="idp83791952" class="indexterm"></a><p>カーネルは FreeBSD オペレーティングシステムの中核をなすものです。
      カーネルは、メモリ管理、セキュリティ制御の強制、ネットワーク、
      ディスクアクセスなどを担っています。
      FreeBSD の大部分は動的に構成することができるようになっていますが、
      まだ、時にはカスタムカーネルを設定してコンパイルする必要があります。</p><p>この章では、以下のことを扱っています。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>いつカスタムカーネルの構築が必要になるか。</p></li><li class="listitem"><p>ハードウェア一覧の作成方法。</p></li><li class="listitem"><p>カーネルコンフィグレーションファイルのカスタマイズの方法。</p></li><li class="listitem"><p>カーネルコンフィグレーションファイルから新しいカーネルを構築する方法。</p></li><li class="listitem"><p>新しいカーネルのインストール方法。</p></li><li class="listitem"><p>うまく行かないときの問題解決法。</p></li></ul></div><p>この章で表示されているすべてのコマンドは、<code class="systemitem">root</code> 権限で実行する必要があります。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-custom-kernel"></a>9.2. なぜカスタムカーネルを作るか?</h2></div></div></div><p>伝統的に、FreeBSD はモノリシック
      (monolithic) カーネルを使っていました。
      このカーネルは、単一の巨大なプログラムで、
      扱えるデバイスは固定されていて、
      カーネルの振る舞いを変えたければ構築してコンピュータを再起動し、
      新しいカーネルを動かさなれければなりませんでした。</p><p>今日では、FreeBSD
      カーネルのかなりの機能はモジュールに含まれるようになり、
      必要に応じて動的にカーネルに組み込んだり外したりできるようになりました。
      この移行により、
      動作しているカーネルが新しいハードウェアに迅速に対応したり、
      カーネルに新たな機能を取り入れられるようになります。
      このようなカーネルは、モジュラ (modular) カーネルと呼ばれます。</p><p>しかしながら、
      いまだにいくらかは静的にカーネルを構成する必要があります。
      機能がカーネルとあまりに密接に結びついているため、
      動的に組み込むことができない場合があるためです。
      環境によっては、セキュリティの観点から、
      カーネルモジュールを読み込んだり外すことができず、
      必要となる機能を静的にカーネルにコンパイルしなければならない場合もあります。</p><p>システムに合わせたカーネルを構築することは、多くの場合、
      高度な知識を持つ BSD ユーザが避けて通ることのできない通過儀礼です。
      この作業は多くの時間を必要としますが、FreeBSD
      システムに利益をもたらします。
      広範囲のハードウェアをサポートしなければならない
      <code class="filename">GENERIC</code> カーネルとは異なり、カスタムカーネルは、
      使用しているコンピュータのハードウェアのみをサポートするように、
      必要のない機能を省くことができます。これは、
      次にあげるような利益をもたらします。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>素早く起動します。
	  カーネルはシステム上にあるハードウェアしか検出しないので、
	  システムの起動にかかる時間を短くできます。
	</p></li><li class="listitem"><p>メモリの消費量を減らすことができます。
	  システムに合わせたカーネルは、
	  使用しない機能やデバイスドライバを含まないので、
	  大抵 <code class="filename">GENERIC</code>
	  カーネルより少ないメモリしか消費しません。
	  カーネルコードは常に物理メモリ上に存在し、
	  アプリケーションはその容量分のメモリを使用できないので、
	  これは重要なことです。
	  したがって、メモリが少ないシステムでは、
	  カーネルの再構築は重要です。</p></li><li class="listitem"><p>追加のハードウェアをサポートします。
	  カスタムカーネルは、<code class="filename">GENERIC</code>
	  カーネルに存在しないデバイスのサポートを追加することができます。</p></li></ul></div><p>カスタムカーネルを構築する前に、再構築する理由を考えてください。
      ある特定のハードウェアに対応する必要がある場合に、
      そのハードウェアに対応するためのモジュールがすでに用意されていることがあります。</p><p>カーネルモジュールは
      <code class="filename">/boot/kernel</code>
      にあります。モジュールによっては <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a> により、
      すでに実行中のカーネルに動的に読み込まれています。
      ほとんどのカーネルドライバには、
      読み込み可能なモジュールやマニュアルページが用意されています。
      たとえば、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ath&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ath</span>(4)</span></a>
      ワイヤレスイーサネットドライバのマニュアルページには以下のような記述があります。</p><pre class="screen">Alternatively, to load the driver as a module at boot time, place the
following line in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a>:

    if_ath_load="YES"</pre><p><code class="filename">/boot/loader.conf</code> に
      <code class="literal">if_ath_load="YES"</code> を追加すると、
      起動時にモジュールが読み込まれるようになります。</p><p>対応するモジュールが <code class="filename">/boot/kernel</code>
      に存在しないこともあります。
      特定のサブシステムでは、ほとんど多くの場合存在しません。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-devices"></a>9.3. システムのハードウェアについて知る</h2></div></div></div><p>カーネルコンフィグレーションファイルの編集を始める前に、
      コンピュータのハードウェア一覧を作成すると良いでしょう。
      デュアルブートシステムでは、
      現在インストールされている別のオペレーティングシステムの設定を調べることで、
      一覧を作成できます。
      たとえば、<span class="trademark">Microsoft</span>® の
      <span class="application">デバイスマネージャ</span>
      は、インストールされているデバイスに関する情報を持っています。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® のバージョンによっては、
	<span class="application">システム</span> アイコンを使って、
	<span class="application">デバイスマネージャ</span>
	にアクセスできます。</p></div><p>インストールされているオペレーティングシステムが FreeBSD
      だけであれば、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a> を使い、
      起動時に検出されたハードウェアの一覧を調べてください。
      FreeBSD のほとんどのデバイスドライバにはマニュアルページが用意され、
      対応しているハードウェアの一覧を提供しています。
      たとえば、以下の行は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=psm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">psm</span>(4)</span></a>
      ドライバがマウスを検出したことを示しています。</p><pre class="screen">psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: [GIANT-LOCKED]
psm0: [ITHREAD]
psm0: model Generic PS/2 mouse, device ID 0</pre><p>このハードウェアはシステムに存在するので、
      カスタムカーネルコンフィグレーションファイルからこのドライバを外さないでください。</p><p><code class="command">dmesg</code> が起動時の検出結果を表示しない場合には、
      かわりに <code class="filename">/var/run/dmesg.boot</code>
      で出力を確認してください。</p><p>ハードウェアを見つけるためのもうひとつのツールは、
      より冗長な出力を行う <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pciconf&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pciconf</span>(8)</span></a> です。
      たとえば、以下のようになります。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>pciconf -lv</code></strong>
ath0@pci0:3:0:0:        class=0x020000 card=0x058a1014 chip=0x1014168c rev=0x01 hdr=0x00
    vendor     = 'Atheros Communications Inc.'
    device     = 'AR5212 Atheros AR5212 802.11abg wireless'
    class      = network
    subclass   = ethernet</pre><p>この出力は、<code class="filename">ath</code>
      ドライバがワイヤレスイーサネットデバイスにあることを示しています。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=man&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">man</span>(1)</span></a> を <code class="option">-k</code> フラグで実行すると、
      有用な情報を得ることができます。たとえば、
      ある特定の単語を含むマニュアルページの一覧を表示するには、
      以下のようになります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>man -k <em class="replaceable"><code>Atheros</code></em></code></strong></pre><pre class="programlisting">ath(4)                   - Atheros IEEE 802.11 wireless network driver
ath_hal(4)               - Atheros Hardware Access Layer (HAL)</pre><p>ハードウェアの一覧を作成したら、
      この一覧を利用して、
      カスタムカーネルのコンフィグレーションファイルを編集している時に、
      インストールされているハードウェアのドライバが削除されていないことを確認してください。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-config"></a>9.4. コンフィグレーションファイル</h2></div></div></div><p>カスタムカーネルのコンフィグレーションファイルを作成し、
      カスタムカーネルを構築するには、
      FreeBSD の全ソースツリーがまずインストールされている必要があります。</p><p>もし <code class="filename">/usr/src/</code>
      が存在していなかったり、空であれば、
      カーネルのソースはインストールされていません。
      <a class="xref" href="#svn" title="A.4. Subversion を使う">「<span class="application">Subversion</span> を使う」</a> で説明した
      <span class="application">Subversion</span>
      を使ってソースをインストールしてください。</p><p>ソースをインストールしたら、
      <code class="filename">/usr/src/sys</code> を確認して下さい。
      このディレクトリには、いくつものサブディレクトリがあります。
      その中には、サポートされている各アーキテクチャ
      <code class="filename">amd64</code>,
      <code class="filename">i386</code>, <code class="filename">ia64</code>,
      <code class="filename">pc98</code>, <code class="filename">powerpc</code> および
      <code class="filename">sparc64</code> のサブディレクトリがあります。
      各アーキテクチャのディレクトリ内部にあるファイルはすべてそのアーキテクチャでのみ使用されます。
      残りのコードは、アーキテクチャに依存しない、
      すべてのプラットフォームで共有されるコードです。
      サポートされている各アーキテクチャには、
      <code class="filename">conf</code> サブディレクトリがあり、
      そのアーキテクチャ用の <code class="filename">GENERIC</code>
      カーネルコンフィグレーションファイルが用意されています。</p><p>この <code class="filename">GENERIC</code> は編集しないでください。
      かわりに、このファイルを別名でコピーし、コピーを編集してください。
      慣習として、この名前はすべて大文字でつづられます。もし、
      いくつかの異なるハードウェアの FreeBSD マシンを扱うなら、
      この名前にホスト名を含めるとよいでしょう。ここでは、例として
      <code class="filename">MYKERNEL</code> という名前の
      <code class="literal">amd64</code> アーキテクチャ用の <code class="filename">GENERIC</code>
      コンフィグレーションファイルのコピーを作成します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/<em class="replaceable"><code>amd64</code></em>/conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp GENERIC <em class="replaceable"><code>MYKERNEL</code></em></code></strong></pre><p>これで、<code class="filename"><em class="replaceable"><code>MYKERNEL</code></em></code>
      を <acronym class="acronym">ASCII</acronym> テキストエディタで編集できます。
      初心者に対してより簡単なエディタである
      <span class="application">ee</span> も FreeBSD
      とともにインストールされていますが、
      デフォルトのエディタは <span class="application">vi</span> です。</p><a id="idp83857104" class="indexterm"></a><a id="idp83858256" class="indexterm"></a><a id="idp83858768" class="indexterm"></a><p>コンフィグレーションファイルのフォーマットはシンプルです。
      各行はデバイスやサブシステム、引数、または簡単な説明を含んでいます。
      <code class="literal">#</code> に続くテキストはすべてコメントとして扱われ、
      無視されます。
      カーネルからデバイスもしくはサブシステムのサポートを外すには、
      対応する行の最初に <code class="literal">#</code> を入れてください。
      理解していない行に対しては、<code class="literal">#</code>
      を追加したり削除しないでください。</p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">デバイスやオプションのサポートを外すことは簡単で、
	その結果、カーネルを壊すことがあります。
	たとえば <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ata&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ata</span>(4)</span></a>
	ドライバをカーネルコンフィグレーションファイルから除くと、
	<acronym class="acronym">ATA</acronym>
	ディスクドライバを用いているシステムは起動しません。
	確信が持てないものについては、
	カーネルにサポートを残したままにしてください。</p></div><p>このファイルで与えられる説明の他に、
      そのアーキテクチャの <code class="filename">GENERIC</code>
      と同じディレクトリにある
      <code class="filename">NOTES</code> にも説明があります。
      アーキテクチャに依存しないオプションについては、
      <code class="filename">/usr/src/sys/conf/NOTES</code> をご覧ください。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">カーネルコンフィグレーションファイルの編集を終えたら、
	ファイルのバックアップを <code class="filename">/usr/src</code>
	以外の場所に保存してください。</p><p xmlns="http://www.w3.org/1999/xhtml">または、カーネルコンフィグレーションファイルは他の場所において、
	シンボリックリンクを張る方法もあります。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/amd64/conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /root/kernels</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp GENERIC /root/kernels/MYKERNEL</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /root/kernels/MYKERNEL</code></strong></pre></div><p>コンフィグレーションファイルでは <code class="literal">include</code>
      ディレクティブを利用できます。
      コンフィグレーションファイルに他のファイルを取り込むことができるので、
      すでに存在するファイルに対する小さな変更の管理が簡単にできます。
      オプションやドライバの追加が少しだけの場合には、
      以下の例のように <code class="filename">GENERIC</code>
      からの差分による管理が可能になります。</p><pre class="programlisting">include GENERIC
ident MYKERNEL

options         IPFIREWALL
options         DUMMYNET
options         IPFIREWALL_DEFAULT_TO_ACCEPT
options         IPDIVERT</pre><p>この方法では、ローカルのコンフィグレーションファイルには、
      ローカルにある <code class="filename">GENERIC</code>
      カーネルとの差分が記述されています。
      アップグレードが行われると、
      <code class="filename">GENERIC</code> に追加された新しい機能は、
      (<code class="literal">nooptions</code> や <code class="literal">nodevice</code>
      によって外されない限り) ローカルのカーネルにも反映されます。
      コンフィグレーションの構成要素に関する包括的な一覧と説明は
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">config</span>(5)</span></a> にあります。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">利用可能なすべてのオプションを含むファイルを構築するには、
	以下のコマンドを <code class="systemitem">root</code> 権限で実行してください。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/<em class="replaceable"><code>arch</code></em>/conf &amp;&amp; make LINT</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-building"></a>9.5. カスタムカーネルの構築とインストール</h2></div></div></div><p>カスタムコンフィグレーションファイルを編集して保存したら、
      カーネルのソースコードを以下の手順でコンパイルしてください。</p><div class="procedure"><a id="idp81691856"></a><div class="procedure-title">手順9.1 カーネルの構築</div><a id="idp81692496" class="indexterm"></a><ol class="procedure" type="1"><li class="step"><p>以下のディレクトリに移動してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong></pre></li><li class="step"><p>カスタムコンフィグレーションファイルの名前を指定して新しいカーネルをコンパイルします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make buildkernel KERNCONF=<em class="replaceable"><code>MYKERNEL</code></em></code></strong></pre></li><li class="step"><p>指定したカーネルコンフィグレーションファイルでコンパイルされた新しいカーネルをインストールします。
	  以下のコマンドは、新しいカーネルを
	  <code class="filename">/boot/kernel/kernel</code> に、
	  今までのカーネルを <code class="filename">/boot/kernel.old/kernel</code>
	  という名前で保存します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make installkernel KERNCONF=<em class="replaceable"><code>MYKERNEL</code></em></code></strong></pre></li><li class="step"><p>新しいカーネルを使うために、
	  システムをシャットダウンして再起動してください。
	  うまく行かない場合は、<a class="xref" href="#kernelconfig-noboot">カーネルが起動しない</a>
	  を参照してください。</p></li></ol></div><p>デフォルトでは、カスタムカーネルを構築すると、
      すべてのカーネルモジュールが再構築されます。
      カーネルのアップデートをより早く行いたい、または、
      カスタムモジュールのみを構築したいといった場合は、
      カーネルの構築を開始する前に、以下のように
      <code class="filename">/etc/make.conf</code> を編集してください。</p><p>例として、以下の変数は、
      デフォルトのすべてのモジュールを構築する設定を変更し、
      構築するモジュール一覧を指定します。</p><pre class="programlisting">MODULES_OVERRIDE = linux acpi</pre><p>また、以下の変数は、構築を行わないモジュールを指定します。</p><pre class="programlisting">WITHOUT_MODULES = linux acpi sound</pre><p>他の変数については、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">make.conf</span>(5)</span></a> を参照してください。</p><a id="idp81704784" class="indexterm"></a></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-trouble"></a>9.6. 問題が起きた場合には</h2></div></div></div><p>カスタムカーネルを作る際に起こりうるトラブルは、
      次の 4 種類に分けられます。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="command">config</code> コマンドの失敗</span></dt><dd><p><code class="command">config</code> で失敗した時には、
	    トラブルの起きた行番号が出力されます。
	    たとえば、次のように出力された場合には、
	    17 行目が正しく入力されているかどうか、
	    <code class="filename">GENERIC</code> や <code class="filename">NOTES</code>
	    と比較して修正してください。</p><pre class="screen">config: line 17: syntax error</pre></dd><dt><span class="term"><code class="command">make</code> コマンドの失敗</span></dt><dd><p><code class="command">make</code> が失敗した場合には、
	    通常、カーネルコンフィグレーションファイルにおいて、
	    <code class="command">config</code>
	    がとらえられなかったような間違いをしています。
	    コンフィグレーションファイルを見直してください。
	    それでも問題を解決することができなければ、
	    <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">FreeBSD general questions メーリングリスト</a>
	    へカーネルコンフィグレーションファイルを添付して送ってください。</p></dd><dt><a id="kernelconfig-noboot"></a><span class="term">カーネルが起動しない</span></dt><dd><p>新しいカーネルが起動しなかったり、
	    デバイスの認識をしない場合でもあわてないでください!
	    さいわい、FreeBSD
	    には利用できないカーネルから復帰する洗練されたメカニズムがあります。
	    FreeBSD のブートローダで起動したいカーネルを選択してください。
	    システムの起動メニューが表示されている時に、
	    <span class="quote">「<span class="quote">Escape to a loader prompt</span>」</span>
	    オプションを選択するとアクセスできます。
	    プロンプトで
	    <code class="command">boot <em class="replaceable"><code>kernel.old</code></em></code>
	    か他の正常に起動するカーネルを入力してください。</p><p>問題のないカーネルで起動した後、
	    コンフィグレー ションファイルを調べ、
	    再び構築を試みてください。
	    <code class="filename">/var/log/messages</code>
	    にはすべての成功した起動時のカーネルメッセージの記録があり、
	    これは問題を解決するための助けになる情報の一つでしょう。また、
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a> は現在の起動時のカーネルメッセージを出力します。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">カーネルの構築中にトラブルが起きた時には、
	      次回の構築で消されないように、
	      <code class="filename">GENERIC</code>
	      のコピーや他の正常に起動するカーネルを別の名前で保存するようにしてください。
	      <span class="emphasis"><em>kernel.old</em></span>
	      は新しいカーネルをインストールする時に、
	      その一つ前にインストールした、
	      うまく動かないかもしれないカーネルで上書きされてしまうため、
	      起動するカーネルを保存しておくことは重要です。
	      できる限り早く以下のようにして、
	      正しく起動するカーネルを含むディレクトリ名に変更してください。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mv /boot/kernel <em class="replaceable"><code>/boot/kernel.bad</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv /boot/<em class="replaceable"><code>kernel.good</code></em> /boot/kernel</code></strong></pre></div></dd><dt><span class="term">カーネルは動きますが <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> は動きません!</span></dt><dd><p>システムユーティリティの構築されたバージョンと異るバージョンのカーネルをインストールした場合、
	    たとえば -CURRENT のソースから構築したカーネルを
	    -RELEASE システム上にインストールするような場合には、
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> や <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vmstat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vmstat</span>(8)</span></a>
	    のような多くのシステムステータスコマンドは動かなくなります。
	    修正するには、カーネルと同じバージョンのソースツリーで
	    <a class="link" href="#makeworld" title="18.6. world の再構築">world を再構築し、インストール</a>
	    してください。
	    カーネルとそれ以外で異なるバージョンを組み合わせてオペレーティングシステムを使用することは推奨されていません。</p></dd></dl></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing"></a>第10章 プリンタの利用</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Kelly</span> <span class="firstname">Sean</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">改訂:<span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Mock</span> <span class="firstname">Jim</span> [FAMILY Given]</span>. </span></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#printing-synopsis">10.1. この章では</a></span></dt><dt><span class="sect1"><a href="#printing-intro-spooler">10.2. はじめに</a></span></dt><dt><span class="sect1"><a href="#printing-intro-setup">10.3. 基本的な設定</a></span></dt><dt><span class="sect1"><a href="#printing-advanced">10.4. プリンタ設定上級編</a></span></dt><dt><span class="sect1"><a href="#printing-using">10.5. プリンタを使う</a></span></dt><dt><span class="sect1"><a href="#printing-lpd-alternatives">10.6. 標準スプーラの代替品</a></span></dt><dt><span class="sect1"><a href="#printing-troubleshooting">10.7. トラブルシューティング</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-synopsis"></a>10.1. この章では</h2></div></div></div><a id="idp83903440" class="indexterm"></a><a id="idp83903952" class="indexterm"></a><p>FreeBSD
      は古いインパクトプリンタから最新のレーザープリンタまで幅広いプリンタが利用でき、
      実行しているアプリケーションから高品質な印刷出力が行えます。</p><p>FreeBSD はネットワーク上のプリンタサーバとして動作するように設定することもできます。
      この機能は、他の FreeBSD コンピュータや、<span class="trademark">Windows</span>® や
      <span class="trademark">Mac OS</span>® ホストから印刷ジョブを受け取ることができます。
      FreeBSD は印刷ジョブを 1 つずつ処理することを保証します。
      また、どのユーザやマシンが最も多く印刷しているかの統計を取り、
      どの印刷物が誰の物か表示する
      <span class="quote">「<span class="quote">バナー</span>」</span> ページの作成などを行うことができます。</p><p>この章を読めば以下のことがわかります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD プリントスプーラの設定方法。</p></li><li class="listitem"><p>入力ドキュメントをプリンタが扱える印刷フォーマットへ変換するなどといった、
	  特別な印刷ジョブを別に取り扱うための印刷フィルタのインストール方法。</p></li><li class="listitem"><p>印刷物へのヘッダやバナーの適用方法。</p></li><li class="listitem"><p>他のコンピュータに接続されたプリンタで印刷する方法。</p></li><li class="listitem"><p>ネットワークに直接接続されたプリンタで印刷する方法。</p></li><li class="listitem"><p>印刷ジョブの上限サイズや特定のユーザからの印刷拒否といった、
	  プリンタの制限の制御方法。</p></li><li class="listitem"><p>印刷の統計とプリンタの使用状況の取得方法。</p></li><li class="listitem"><p>印刷問題のトラブルシューティング方法。</p></li></ul></div><p>この章を読み始める前に以下を済ませておいてください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>新しいカーネルの設定とインストール方法について理解すること
	  (<a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a>)。</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-intro-spooler"></a>10.2. はじめに</h2></div></div></div><p>FreeBSD でプリンタを使うために、それらを
      <span class="application">LPD</span> スプーリングシステム、
      または単に <span class="application">LPD</span> としても知られる
      Berkeley ラインプリンタスプーリングシステムで動作するように設定できます。
      これは FreeBSD での標準的なプリンタ制御システムです。
      この章では、<span class="application">LPD</span> を紹介し、
      その設定方法について説明します。</p><p>あなたがすでに <span class="application">LPD</span>
      やその他のプリンタスプーリングシステムに詳しいのなら、
      <a class="link" href="#printing-intro-setup" title="10.3. 基本的な設定">基本的な設定</a>
      まで読み飛ばしてもかまいません。</p><p><span class="application">LPD</span>
      はホストのプリンタに関するあらゆることを制御します。
      ここで言う制御としては、次のことがあげられます。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ホストに接続されたプリンタ、
          あるいはネットワーク上の他ホストに接続されたプリンタに対するアクセス制御を行ないます。</p></li><li class="listitem"><p>ファイルをプリントする要求に対して許可を与えます。
	  この要求は特に<span class="emphasis"><em>ジョブ</em></span><a id="idp83995984" class="indexterm"></a>と呼ばれています。</p></li><li class="listitem"><p>各々のプリンタの<span class="emphasis"><em>キュー</em></span>を管理することにより、
	  複数のユーザがあるプリンタに対して同時にアクセスすることを防ぎます。</p></li><li class="listitem"><p><span class="emphasis"><em>ヘッダページ</em></span>
	  (<span class="emphasis"><em>バナー</em></span>または
	  <span class="emphasis"><em>バースト</em></span>ページとしても知られています)
	  をプリントすることができます。
	  これにより、
	  プリントアウトの山の中から自分がプリントしたジョブを見つけやすくなります。</p></li><li class="listitem"><p>シリアルポートに接続したプリンタ用に通信パラメータを管理します。</p></li><li class="listitem"><p>ネットワーク経由で他のホスト上の
	  <span class="application">LPD</span>
	  スプーラにジョブを送ることができます。</p></li><li class="listitem"><p>様々なプリンタ言語やプリンタの能力に応じてジョブの形式を整えるため、
	  特別なフィルタを起動することができます。</p></li><li class="listitem"><p>プリンタの使用に対して課金を行なうことができます。</p></li></ul></div><p>設定ファイル (<code class="filename">/etc/printcap</code>)
      を通して、専用のフィルタプログラムを用いることにより、
      多種多様なプリンタ機器に対して、上述の機能の全部または一部を
      <span class="application">LPD</span> システムに行なわせることができます。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-intro-why"></a>10.2.1. どうしてスプーラを使うべきなのか</h3></div></div></div><p>あなたのシステムを利用するのがあなた一人だけだとしても、
	スプーラは有用ですし、使用すべきです。その理由は以下のとおりです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">LPD</span>
	    はジョブをバックグラウンドで処理します。
            データがプリンタに送信されるまで待つ必要がなくなります。</p></li><li class="listitem"><p><span class="application">LPD</span>
	    ではジョブをフィルタを通してプリントすることが簡単にできます。
            これにより、印刷物のヘッダに時刻や日付を入れたり、
            特別なファイル形式
	    (<span class="application">TeX</span><a id="idp84008144" class="indexterm"></a>
	    の DVI ファイルなど)
            をプリンタが処理できる形式に変更することができ、
            これらの作業を手動で行なう必要がなくなります。</p></li><li class="listitem"><p>プリント処理を行なうフリー、
            または商用のプログラムのほとんどは、
            システムのスプーラとやりとりするように作られています。
            スプーリングシステムをセットアップすることで、
            今後加えるかもしれない、あるいは、
            すでに持っている別のソフトウェアをより簡単にサポートすることができるでしょう。</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-intro-setup"></a>10.3. 基本的な設定</h2></div></div></div><p><span class="application">LPD</span>
      スプーリングシステムを用いてプリンタを使用するためには、
      プリンタ機器と <span class="application">LPD</span>
      用ソフトウェアの両方を準備する必要があります。
      本文書では次の二段階のレベルに分けて説明をします。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>プリンタを接続する方法、
	  プリンタにどのように通信するかを
	  <span class="application">LPD</span> に指示する方法や、
          プレインテキストをプリンタで印字する方法については、
          <a class="link" href="#printing-simple" title="10.3.1. プリンタ設定導入編">プリンタの簡単な設定</a>をご覧ください。</p></li><li class="listitem"><p>様々な形式のファイルを印字する方法、
          ヘッダページを印字する方法、
          ネットワーク経由でプリンタに印字する方法、
          プリンタを制御する方法、
          プリンタの使用に対する課金を行なう方法については<a class="link" href="#printing-advanced" title="10.4. プリンタ設定上級編">プリンタ設定上級編</a>をご覧ください。</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-simple"></a>10.3.1. プリンタ設定導入編</h3></div></div></div><p>この節では、プリンタ機器やプリンタを使用するための
        <span class="application">LPD</span>
	用ソフトウェアを設定する方法について述べます。
        この節の概要は次のとおりです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="#printing-hardware" title="10.3.1.1. プリンタ機器の設定">プリンタ機器の設定</a>では、
            プリンタをコンピュータに接続するためのヒントがいくつか書かれています。</p></li><li class="listitem"><p><a class="link" href="#printing-software" title="10.3.1.2. ソフトウェアの設定">ソフトウェアの設定</a>では、
            <span class="application">LPD</span> のスプーラ設定ファイル
            (<code class="filename">/etc/printcap</code>)
            の設定方法について書かれています。</p></li></ul></div><p>データをプリンタに送るのにコンピュータのローカルインタフェースではなく、
        ネットワークプロトコルを使用する場合は、
        <a class="link" href="#printing-advanced-network-net-if" title="10.4.3.2. ネットワークにおけるデータストリームの インタフェースを持つプリンタ">
        ネットワークにおけるデータストリームインタフェースを持つプリンタ</a>をご覧ください。</p><p>この節のタイトルは <span class="quote">「<span class="quote">プリンタ設定導入編</span>」</span> ですが、
        実際の設定はかなり複雑です。
        プリンタをコンピュータに接続し、
	<span class="application">LPD</span>
	スプーラを起動させることは一番困難な作業です。
        ヘッダページを出力させたり課金したりするオプションの設定は、
        一度プリンタがうまく動くようになればとても簡単です。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-hardware"></a>10.3.1.1. プリンタ機器の設定</h4></div></div></div><p>この節では、プリンタに PC
          を接続するための様々な方法について説明しています。
          ここでは、ポートやケーブルの種類、
          FreeBSD がプリンタとの通信に必要なカーネルコンフィグレーションについても言及しています。</p><p>もしプリンタが既に接続されていて、
          他のオペレーティングシステム上でプリンタからの印字に成功している場合は、
          <a class="link" href="#printing-software" title="10.3.1.2. ソフトウェアの設定">ソフトウェアの設定</a>まで読み飛ばすことが多分できるでしょう。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-ports"></a>10.3.1.1.1. ポートとケーブル</h5></div></div></div><p>今日 PC 用に売られているプリンタには通常、
	    次の 3 つのインタフェースのうち、どれか
	    1 つ以上がついてきます。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>シリアル</em></span><a id="idp84047440" class="indexterm"></a>インタフェース
		(RS-232 または COM ポートとも呼ばれます) は、
		コンピュータにあるシリアルポートを使ってプリンタにデータを送信します。
                シリアルインタフェースはコンピュータ業界で共通して使用されています。
                そのケーブルは容易に手に入りますし、簡単に自作することもできます。
                シリアルインタフェースの場合は時々、
		特別なケーブルや何か複雑な通信方式選択の設定が必要になることがあります。
		ほとんどの PC のシリアルポートは通信速度が最大で
		115200 bps であり、
		大きな画像を印刷するのには実用的ではありません。</p></li><li class="listitem"><p><span class="emphasis"><em>パラレル</em></span><a id="idp84049104" class="indexterm"></a>インタフェースではプリンタにデータを送信するために、
                コンピュータにあるパラレルポートを使用します。
		パラレルインタフェースは PC 業界ではよく使われており、
		RS-232 シリアルよりも速いです。
                ケーブルの入手は容易ですが、
                自作するのはシリアルよりも困難です。
                パラレルインタフェースには通常、通信方式の選択はなく、
                設定は極めて単純です。</p><p>パラレルインタフェースは
	      <span class="quote">「<span class="quote">セントロニクス</span>」</span><a id="idp84050512" class="indexterm"></a>
		インタフェースとして知られています。
                これは、プリンタ用のコネクタタイプとして採用された後に名付けられました。</p></li><li class="listitem"><p>USB<a id="idp84052048" class="indexterm"></a>
		インタフェースは、Universal Serial Bus
		(汎用シリアルバス) の略で、パラレルや RS-232
		シリアルよりさらに速く動作します。
		ケーブルは単純で安価です。USB は、印刷目的には RS-232
		シリアルやパラレルよりも向いていますが、<span class="trademark">UNIX</span>®
		システムでは十分対応されていません。
		この問題を回避する手としては、多くのプリンタがそうですが、
		USB とパラレルの両方のインタフェースを備えたプリンタを購入することが挙げられます。</p></li></ul></div><p>パラレルインタフェースでは、普通は
	    (コンピュータからプリンタへの)
	    単方向通信のみを行なうのに対して、
	    シリアルおよび USB インタフェースは双方向通信を行ないます。
	    FreeBSD でも IEEE1284 準拠のケーブルを使えば、
	    最近のパラレルポート (EPP や ECP)
	    とプリンタの多くで双方向通信を行なうことができます。</p><a id="idp84054096" class="indexterm"></a><p>パラレルポート経由のプリンタとの双方向通信には、
	    通常 2 つの方法のどちらかが使われます。一つ目の方法は、
	    プリンタが使用しているプロプライエタリな言語を話す
	    FreeBSD 用に作成されたプリンタドライバを使うものです。
	    これはインクジェットプリンタではよく使われる方法で、
	    インクの残量やその他の状態の情報を知らせるのに使えます。
	    二つ目の方法は、プリンタが <span class="trademark">PostScript</span>®
	    に対応している時に使われます。</p><p><span class="trademark">PostScript</span>®
	    ジョブは、実際にはプリンタに送信されるプログラムです。
	    印字作業を行う必要は必ずしありませんし、
	    プログラムの結果を直接コンピュータに返してもよいのです。
            <span class="trademark">PostScript</span>® プリンタでは双方向通信を使って
            <span class="trademark">PostScript</span>® プログラムのエラーや紙づまりといった問題をコンピュータに報告します。
            ユーザはそれらの情報を知りたいと思うかも知れません。
            また、<span class="trademark">PostScript</span>® プリンタで課金作業をもっとも効率よく行なうためには、
            双方向通信が必要となります。
            この方法ではまず、プリンタの現在のページカウント
            (起動してから今まで何枚の紙を印字したか) の情報を得ます。
            次に、ユーザのジョブを実行し、終了後、再びページカウントを得ます。
            この二つの数を差によって、
            課金対象となる紙の枚数を知ることができるのです。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-parallel"></a>10.3.1.1.2. パラレルポート</h5></div></div></div><p>プリンタをパラレルインタフェースを使って接続する場合は、
            セントロニクスケーブルでプリンタとコンピュータを接続してください。
            詳しい説明はプリンタやコンピュータに付属する説明書に書かれているはずです。</p><p>その際、
            どのパラレルポートを使用したかを覚えておいてください。
	    FreeBSD では最初のポートは <code class="filename">ppc0</code>、
	    二番目が <code class="filename">ppc1</code> であり、
            三番目以降も同様に続きます。
	    プリンタのデバイス名にも同じ形式が使われており、
	    最初のパラレルポートに接続されたプリンタは
	    <code class="filename">/dev/lpt0</code> などとなります。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-serial"></a>10.3.1.1.3. シリアルポート</h5></div></div></div><p>シリアルインタフェースを使ってプリンタを使う場合は、
            適切なシリアルケーブルでプリンタとコンピュータを接続してください。
            詳しい説明はプリンタ、コンピュータ、あるいは両方に付属する説
            明書に書かれているはずです。</p><p><span class="quote">「<span class="quote">適切なシリアルケーブル</span>」</span> が良くわからないときは、
            次のどれかを試してみてください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>モデム</em></span>用ケーブルでは、
                それぞれのピンは他方のコネクタの対応するピンと線でつながっています。
                このタイプのケーブルは <span class="quote">「<span class="quote">DTE-DCE</span>」</span>
                間ケーブルとしても知られています
                (訳注:
                日本ではストレートケーブルという名前で売られています)。</p></li><li class="listitem"><p><span class="emphasis"><em>ヌルモデム</em></span>用ケーブル<a id="idp84118608" class="indexterm"></a>では、
                あるピンは対応するピンとを接続していますが、
                あるピン
                (たとえば、データ送信用とデータ受信用のピン)
                が交差して接続したり、
                いくつかのピンは内部で短絡していたりします。
                このタイプのケーブルは、
                <span class="quote">「<span class="quote">DTE-DTE</span>」</span> 間ケーブルと呼ばれています
                (訳注: 日本ではクロスケーブルという名前で売られています)。</p></li><li class="listitem"><p>A <span class="emphasis"><em>シリアルプリンタ</em></span>用ケーブルは、
                ある特定のプリンタで必要とされるものです。
                ヌルモデムケーブルと似ていますが、
                内部で短絡させる代わりに、
                ある信号を他方側に送るために使用しています。</p></li></ul></div><a id="idp84121040" class="indexterm"></a><a id="idp84121552" class="indexterm"></a><a id="idp84122064" class="indexterm"></a><p>この他に、
            プリンタ用の通信パラメータを設定する必要があります。
            通常、プリンタのフロントパネルや DIP スイッチによって制御します。
            コンピュータとプリンタの双方で設定できる最高の通信速度
            [bps] (ビット/秒、
            <span class="emphasis"><em>ボーレート</em></span>と示されているときもある)
            を選んでください。そして、データビット (7 または 8)、
            パリティ (偶/奇/なし)、ストップビット (1 または 2)
            を選んでください。
            そして、フローコントロールの有無
            (制御なし、または XON/XOFF (<span class="quote">「<span class="quote">イン・バンド</span>」</span>
            または
            <span class="quote">「<span class="quote">ソフトウェア</span>」</span> フローコントロールとも呼ばれる))
            を選びます。
            以下に続くソフトウェアの設定のために、
            ここでの設定を覚えておいてください。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-software"></a>10.3.1.2. ソフトウェアの設定</h4></div></div></div><p>本節では FreeBSD の <span class="application">LPD</span>
	スプーリングシステムで印字をおこなうために
	必要となるソフトウェアの設定について説明しています。</p><p>本節の概要は次のようになります。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>プリンタで使用するポートのために、必要があれば、
	    カーネルの書き変えをおこないます。「<a class="link" href="#printing-kernel" title="10.3.1.2.1. カーネルの変更">カーネルの変更</a>」で、
	    このためにしなくてはならないことを説明しています。</p></li><li class="step"><p>パラレルポートを使用している場合は、
	    パラレルポートのための通信モードを設定します。
	    詳細は、
	    「<a class="link" href="#printing-parallel-port-mode" title="10.3.1.3. パラレルポートの通信モードを設定する">
	      パラレルポートの通信モードを設定する</a>」
	    で説明しています。</p></li><li class="step"><p>オペレーティングシステムからプリンタにデータが送ら
	    れているかをテストします。「<a class="link" href="#printing-testing" title="10.3.1.4. プリンタとの通信状況を調べる">プリンタとの通信状況を調べる</a>」で、
	    どのようにテストするかの提案をいくつかおこなっています。</p></li><li class="step"><p>ファイル<code class="filename">/etc/printcap</code>を変更し、
	    <span class="application">LPD</span> の設定をおこないます。
	    この節で、どのように変更するかを説明しています。</p></li></ol></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-kernel"></a>10.3.1.2.1. カーネルの変更</h5></div></div></div><p>オペレーティングシステムのカーネルの
	  コンパイルをおこなうことによって、
	  指定されたデバイスが機能するようになります。シリアル、
	  または、パラレルインタフェースをプリンタで使用する場合、
	  必要なデバイスがこの指定の中に含まれていなくてはなりません。
	  したがって、
	  必要なデバイスがカーネルに組み込まれていない場合、
	  追加のシリアル、または、パラレルポートをサポートするために、
	  カーネルの再コンパイルが必要となるかもしれません。</p><p>シリアルポートが現在使用しているカーネルで
	  サポートされているかどうかを調べるためには、
	  次のように入力します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>grep sioN /var/run/dmesg.boot</code></strong></pre><p>ここで、<em class="replaceable"><code>N</code></em>
	  はシリアルポートの番号を示し、この番号は 0 から始まります。
	  次のような出力があった場合、
	  カーネルはそのポートをサポートしています。</p><pre class="screen">sio2 at port 0x3e8-0x3ef irq 5 on isa
 sio2: type 16550A</pre><p>パラレルポートが現在使用しているカーネルで
	  サポートされているかどうかを調べるためには、
	  次のように入力します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>grep ppcN /var/run/dmesg.boot</code></strong></pre><p>ここで、<em class="replaceable"><code>N</code></em>
	  はパラレルポートの番号を示し、この番号は 0 から始まります。
	  次のような出力があった場合、
	  カーネルはそのポートをサポートしています。</p><pre class="screen">ppc0: &lt;Parallel port&gt; at port 0x378-0x37f irq 7 on isa0
ppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/8 bytes threshold</pre><p>上記の出力が得られない場合、プリンタを使うため、
	  オペレーティングシステムにパラレル、または、
	  シリアルポートを認識し、使用できるようにするためには
	  カーネルを変更する必要があります。</p><p>シリアルポートをサポートさせるには、「<a class="link" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">
	    FreeBSD カーネルのコンフィグレーション</a>」の節をご覧く
	  ださい。パラレルポートをサポートさせる場合も、その節と、
	  <span class="emphasis"><em>あわせて</em></span>、
	  この節に続く節もご覧ください。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-parallel-port-mode"></a>10.3.1.3. パラレルポートの通信モードを設定する</h4></div></div></div><p>パラレルインタフェースを使用している場合、FreeBSD では、
	    割り込み駆動型にするか、
	    プリンタとの通信の状況をカーネルに監視させるかのいずれかを選択できます。
	    FreeBSD の汎用プリンタデバイスドライバ
	    (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lpt</span>(4)</span></a>) は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppbus&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ppbus</span>(4)</span></a> システムを利用しています。
	    これは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ppc</span>(4)</span></a>
	    ドライバを使ってパラレルポートのチップセットを制御します。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>GENERIC
		カーネルでは<span class="emphasis"><em>割り込み駆動</em></span>方式がデフォルトになっています。
		この方式では、
		オペレーティングシステムはプリンタがデータを受け付けられるかどうかを調べるために、
		IRQ ラインを一つ使用します。</p></li><li class="listitem"><p><span class="emphasis"><em>監視</em></span>方式では、
		オペレーティングシステムにプリンタがもっとデータを受け付けられるかどうかを繰り返し尋ねるように指示します。
		そして、受け付けるという応答を受けたとき、
		カーネルはさらなるデータを送信します。</p></li></ul></div><p>割り込み駆動方式は一般的にいくらか高速になりますが、貴重な
	    IRQ ラインを一つ消費します。
	    HP の新しいプリンタの一部には、明らかに何かしらのタイミングの問題
	    (まだ正確にはわかっていません)
	    で割り込みモードでは正常に動作しないものがあると言われています。
	    これらのプリンタにはポーリングモードが必要になります。
	    どちらかうまく機能する方を使ってください。
	    一部のプリンタはどちらの方式でも動作しますが、
	    割り込みモードでは苦痛を感じるほど低速です。</p><p>通信モードを設定するためには 2 つの方法があります。
	    1 つはカーネルを変更することで、もう一つは
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lptcontrol</span>(8)</span></a> プログラムを使用する方法です。</p><p><span class="emphasis"><em> カーネルを設定することによって、
	      通信モードを変更する。</em></span></p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>カーネルコンフィグレーションファイルを変更します。
		<code class="literal">ppc0</code> のエントリを探してください。
		2 番目のパラレルポートを設定するときは、代わりに
		<code class="literal">ppc1</code> を使います。
		以下、3 番目のポートは <code class="literal">ppc2</code> となっていきます。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>割り込み駆動方式にする場合は、
		    <code class="filename">/boot/device.hints</code>
		    ファイルの以下の行を編集して、
		    <em class="replaceable"><code>N</code></em> を適切な
		    IRQ 番号に置き換えてください。</p><pre class="programlisting">hint.ppc.0.irq="<em class="replaceable"><code>N</code></em>"</pre><p>カーネルの設定ファイルには <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ppc</span>(4)</span></a>
		    ドライバも入れなければなりません。</p><pre class="screen">device ppc</pre></li><li class="listitem"><p>ポーリングモードを使用する場合は、
		    <code class="filename">/boot/device.hints</code>
		    ファイルの以下の行を削除してください。</p><pre class="programlisting">hint.ppc.0.irq="<em class="replaceable"><code>N</code></em>"</pre><p>場合によっては、これだけでは FreeBSD
		    でポートをポーリングモードにするには十分ではないことがあります。
		    多くの場合これは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">acpi</span>(4)</span></a> ドライバと併せて動作します。
		    これはデバイスのプローブとアタッチを行うので、
		    プリンタポートへのアクセスモードを制御できます。
		    問題を修正するために <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">acpi</span>(4)</span></a>
		    の設定を確認してください。</p></li></ul></div></li><li class="step"><p>ファイルをセーブし、config プログラムを起動し、
		カーネルの構築、インストールをおこないます。そして、
		リブートしてください。詳細は、「<a class="link" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">
		  FreeBSDカーネルのコンフィグレーション</a>」を参照
		してください。</p></li></ol></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lptcontrol</span>(8)</span></a> <span class="emphasis"><em>
	      で通信モードを設定する場合</em></span></p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p><code class="literal">lptN</code>
		をイベント駆動方式に設定する場合は、
		次のように入力します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lptcontrol -i -d /dev/lptN</code></strong></pre></li><li class="step"><p><code class="literal">lptN</code>
		を監視方式に設定する場合は、次のように入力します。
	      </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lptcontrol -p -d /dev/lptN</code></strong></pre></li></ol></div><p>これらのコマンドを <code class="filename">/etc/rc.local</code>
	    ファイルに追加
	    しておくと、システムをブートする度に通信モードを設定する
	    ことができます。詳細については、
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lptcontrol</span>(8)</span></a> をご覧ください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-testing"></a>10.3.1.4. プリンタとの通信状況を調べる</h4></div></div></div><p>スプーリングシステムの設定に進む前に、オペレーティング
	    システムがプリンタにデータを送ることに成功しているかどうか
	    を確かめるべきでしょう。これにより、印字がうまくいかないと
	    き、プリンタとの通信が問題なのか、スプーリングシステムが問
	    題なのかを分けて調べることがかなり容易になります。</p><p>プリンタをテストするためには、
	    プリンタに何かのテキストを送
	    信してみます。送信した文字をすぐに印字してくれるプリンタに
	    は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> コマンドを使うと有用です。このコマンドは印
	    字可能な 96 文字の ASCII 文字すべてを 96 行生成します。</p><a id="idp84187472" class="indexterm"></a><p><span class="trademark">PostScript</span>® (または他の言語に対応した) プリンタの場合
	    は、もっと巧妙なテストが必要になります。次のような、簡単な
	    <span class="trademark">PostScript</span>® プログラムを使えば十分でしょう。</p><pre class="programlisting">%!PS
100 100 moveto 300 300 lineto stroke
310 310 moveto
/Helvetica findfont 12 scalefont setfont
(Is this thing working?) show
showpage</pre><p>上の <span class="trademark">PostScript</span>® コードはファイルに保存し、
            以降の節で例として示されているように利用することができます。</p><a id="idp84190672" class="indexterm"></a><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">このドキュメントでプリンタ用言語を参照するときは、
	      <span class="trademark">PostScript</span>® のような言語を仮定しており、Hewlett Packard
	      の PCL は考慮していません。PCL は非常に機能的なの
	      ですが、
	      プレインテキストにエスケープシーケンスを混ぜること
	      ができます。<span class="trademark">PostScript</span>® ではプレインテキストを直接印字
	      することはできません。
	      このような種類のプリンタ言語に対しては、
	      特別な対応をおこなわなければなりません。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-checking-parallel"></a>10.3.1.4.1. パラレルポートのプリンタとの接続を調べる</h5></div></div></div><p>この節では、FreeBSD がパラレル<a id="idp84194000" class="indexterm"></a>ポートに接続されたプリ
	      ンタと通信できているかどうかを調べる方法について説明し
	      ています。</p><p><span class="emphasis"><em>
		パラレルポートのプリンタをテストするために
	      </em></span></p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> コマンドで <code class="systemitem">root</code> になります。</p></li><li class="step"><p>プリンタにデータを送ります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>プリンタがプレインテキストを印字できる場合、
		      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> コマンドを使います。
		      次のように入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lptest &gt; /dev/lptN</code></strong></pre><p>ここで、<em class="replaceable"><code>N</code></em>
		      はパラレルポートの番号で、番号は
		      0 から始まります。</p></li><li class="listitem"><p>プリンタが <span class="trademark">PostScript</span>® か他のプリンタ
		      言語を使用している場合、そのプリンタに簡単なプロ
		      グラムを送信してください。次のように入力します。
		    </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat &gt; /dev/lptN</code></strong></pre><p>そして、一行一行、
		      プログラムを<span class="emphasis"><em>慎重に</em></span>入力して
		      下さい。RETUREN または ENTER キーを入力してしま
		      うと、その行は編集できなくなります。プログラムの
		      入力が終わったら、CONTROL+D か、あなたが設定して
		      いるファイル終了のキーを押してください。</p><p>もしくは、プログラムを入力したファイルがある
		      場合は、次のように入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat file &gt; /dev/lptN</code></strong></pre><p>ここで、<em class="replaceable"><code>file</code></em>
		      はプログラムが格納されていて、
		      プリンタに送信するファイルの名前です。</p></li></ul></div></li></ol></div><p>これで何かが印刷されるはずです。
	      印字されたテキストがおかしくても心配は無用です。
	      それについては、後で修正します。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-checking-serial"></a>10.3.1.4.2. シリアルポートのプリンタとの接続を調べる</h5></div></div></div><a id="idp84212688" class="indexterm"></a><p>この節では、FreeBSD がシリアルポートに接続されたプリ
	      ンタと通信できているかどうかを調べる方法について述べられ
	      ています。</p><p><span class="emphasis"><em>
		シリアルポートのプリンタをテストするために
	      </em></span></p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> コマンドで <code class="systemitem">root</code> になります。</p></li><li class="step"><p><code class="filename">/etc/remote</code>
		  ファイルを編集します。次のエントリを加えてください。
		</p><pre class="programlisting">printer:dv=<code class="filename">/dev/port</code>:br#<em class="replaceable"><code>bps-rate</code></em>:pa=<em class="replaceable"><code>parity</code></em></pre><a id="idp84223440" class="indexterm"></a><a id="idp84223952" class="indexterm"></a><a id="idp84224464" class="indexterm"></a><p>ここで、<em class="replaceable"><code>port</code></em>
		  シリアルポート (<code class="literal">ttyu0</code>、
		  <code class="literal">ttyu1</code> など) のデバイスエントリで、
		  <em class="replaceable"><code>bps-rate</code></em>は
		  プリンタとの通信の転送速度[bit/秒]、
		  <em class="replaceable"><code>parity</code></em>はプリ
		  ンタとの通信で必要とされるパリティ
		  (<code class="literal">even</code>、<code class="literal">odd</code>、
		  <code class="literal">none</code>、
		  <code class="literal">zero</code>のいずれか) を表わしていま
		  す。</p><p>次の例は、
		  プリンタをシリアルケーブルでパリティなし、転送速度
		  19200 bps で第 3 番目のシリアルポートに接続した場
		  合です。</p><pre class="programlisting">printer:dv=<code class="filename">/dev/ttyu2</code>:br#19200:pa=none</pre></li><li class="step"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> コマンドでプリンタと接続します。
		  次のように入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tip printer</code></strong></pre><p>これがうまくいかなかった場合は、
		  <code class="filename">/etc/remote</code>を編集して、
		<code class="filename">/dev/ttyuN</code>
		  の代わりに
		  <code class="filename">/dev/cuaaN</code>
		  を試してみてください。</p></li><li class="step"><p>プリンタにデータを送ります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>プリンタがプレインテキストを印字できる場合、
		      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> コマンドを使います。
		      次のように入力してください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>$lptest</code></strong></pre></li><li class="listitem"><p>プリンタが <span class="trademark">PostScript</span>® か他のプリンタ言語を使用している場合、
		      そのプリンタに簡単なプログラムを入力します。
		      一行一行、プログラムを<span class="emphasis"><em>慎重に</em></span>入力してください。
		      バックスペースキーや他の編集用のキーは、
		      プリンタの制御コードに割り当てられているかもしれません。
		      プログラムが終了したことをプリンタに伝えるための特別なファイル終了キーを
		      入力する必要があるかもしれません。
		      <span class="trademark">PostScript</span>® プリンタの場合、
		      <code class="literal">CONTROL+D</code> を入力します。</p><p>もしくは、プログラムを入力したファイルがある場合は、
		      次のように入力してください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>&gt;file</code></strong></pre><p>ここで、<em class="replaceable"><code>file</code></em>
		      はプログラムが格納されているファイル名です。
		      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> コマンドでファイルを送信した後は、
		      ファイル終了を表わすキーを入力する必要があります。</p></li></ul></div></li></ol></div><p>これで何かがプリントされることでしょう。
	      印字されたテキ
	      ストがおかしくても心配しなくても構いません。
	      それについては、後で修正します。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-printcap"></a>10.3.1.5. スプーラに許可を与える:
	  <code class="filename">/etc/printcap</code> ファイル</h4></div></div></div><p>ここまでで、プリンタはコンピュータに接続され、(必要なら)
	  プリンタと通信できるようにカーネルを変更し、
	  簡単なデータをプリンタに送信することができているはずです。
	  これで、<span class="application">LPD</span> にプリンタへのアクセスを
	  制御させる設定をおこなう準備が整いました。</p><p><span class="application">LPD</span> の設定は
	  <code class="filename">/etc/printcap</code> を編集することでおこないます。
	  <span class="application">LPD</span> スプーリングシステムは
	  スプーラが使われる毎にこのファイルを参照します。
	  そのため、ファイルを更新するとすぐにその変更が反映されます。</p><a id="idp84259664" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=printcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">printcap</span>(5)</span></a> ファイルの書式は簡単です。
	  <code class="filename">/etc/printcap</code>
	  の編集はお好みのテキストエディタをお
	  使いください。このファイルの書式は、
	  <code class="filename">/usr/share/misc/termcap</code> や
	  <code class="filename">/etc/remote</code>
	  といった他のケイパビリティファイルと一致しています。
	  この書式
	  についての詳細な情報については
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cgetent&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">cgetent</span>(3)</span></a> をご覧ください。</p><p>スプーラの単純な設定法は、
	  次のステップでおこないます。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>プリンタに名前 (と簡単な別名 2 〜 3 個) を付け、それを
	      <code class="filename">/etc/printcap</code> ファイルに記述します。
	      これについては、「<a class="link" href="#printing-naming" title="10.3.1.5.1. プリンタに名前を付ける">
		プリンタに名前を付ける</a>」
	      を参照してください。</p></li><li class="step"><p><code class="literal">sh</code> の項目を追加することで、
	      ヘッダページ<a id="idp84266960" class="indexterm"></a>の出力を禁止します (デフォルトは許可)。
	      これについては、「<a class="link" href="#printing-no-header-pages" title="10.3.1.5.2. ヘッダページの印字を禁止する">
		ヘッダページの印字を禁止する</a>」
	      を参照してください。</p></li><li class="step"><p>スプール用のディレクトリを作成し、その位置を
	      <code class="literal">sd</code> 項目で指定します。これについては、
	      「<a class="link" href="#printing-spooldir" title="10.3.1.5.3. スプーリングディレクトリの作成">
		スプーリングディレクトリの作成</a>」
	      を参照してください。</p></li><li class="step"><p>プリンタを使用するために <code class="filename">/dev</code>
	      エントリを設定し、<code class="filename">/etc/printcap</code> の
	      <code class="literal">lp</code> 項目でそのエントリを指定します。
	      これについては、「<a class="link" href="#printing-device" title="10.3.1.5.4. プリンタデバイスの特定">
		プリンタデバイスの特定</a>」 を参照してください。
	      プリンタをシリアルポートに接続した場合は、
	      <code class="literal">ms#</code>
	      の項目を設定する必要があります。こちらについては、
	      「<a class="link" href="#printing-commparam" title="10.3.1.5.5. スプーラのための通信パラメータの設定">
		スプーラのための通信パラメータの設定</a>」
	      を参照してください。</p></li><li class="step"><p>プレインテキスト用の入力フィルタのインストールをおこないます。
	    「<a class="link" href="#printing-textfilter" title="10.3.1.5.6. テキストフィルタのインストール">テキストフィルタのインストール</a>」
	      を参照してください。</p></li><li class="step"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a>
	      コマンドで何かを印字することで設定のテストをおこないます。
	    <a class="link" href="#printing-trying" title="10.3.1.5.8. 印字してみよう">印字してみよう</a> と
	    <a class="link" href="#printing-troubleshooting" title="10.7. トラブルシューティング">トラブルシューティング</a>
	    を参照してください。</p></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="trademark">PostScript</span>® プリンタのような、
	    プリンタ言語を使用しているプリンタには、
	    プレインテキストを直接印字させることができません。
	    上にアウトラインを示し、
	    以下の節で説明する簡単な設定方法の説明では、
	    そのようなプリンタを設置している場合は、
	    プリンタが認識できるファイルだけを印字の対象としているという
	    仮定をしています。</p></div><p>多くの場合、
	  利用者はシステムに設置されているプリンタすべてで
	  プレインテキストが印字できることを期待しています。
	  印字作業をおこなうために <span class="application">LPD</span>
	  のインタフェースを利用するプログラムでも、
	  通常、そのような仮定を置きます。
	  プリンタ言語を使用するプリンタを設置しており、
	  そのプリンタ言語で記述されたジョブと、
	  <span class="emphasis"><em>これに加えて</em></span>、
	  プレインテキストのジョブも印字できるようにしたいならば、
	  上で示した簡単な設定方法に加えて、
	  さらなる設定をおこなうことを強くお勧めします。すなわち、
	  自動的にプレインテキストから <span class="trademark">PostScript</span>® (もしくは、
	  他のプリンタ言語)
	  に変換するプログラムをインストールしてください。「<a class="link" href="#printing-advanced-if-conversion" title="10.4.1.2. プレインテキストのジョブを PostScript® プリンタで印字する">
	    プレインテキストのジョブを <span class="trademark">PostScript</span>®
	    プリンタで印字する</a>」
	  で、それをどのようにおこなえばよいのかが説明されています。</p><div xmlns="" class="note"><h3 class="admontitle">訳注: </h3><p xmlns="http://www.w3.org/1999/xhtml">
	    日本語を印字したい場合は、プリンタ言語を使用し
	    ていない「日本語プリンタ」についても、
	    プリンタ固有のエスケープシーケンスを送る必要があります。
	    また、漢字コードをプリン
	    タが設定しているものに変換したりする必要があり、
	    各プリンタ毎に、日本語用のフィルタが必要になります。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-naming"></a>10.3.1.5.1. プリンタに名前を付ける</h5></div></div></div><p>最初の (簡単な) ステップで、プリンタの名前を考えます。
	    プリンタには別名をいくつか付けることもできるので、
	    機能的な名前
	    でも風変わりな名前でもどちらを選んでもまったく
	    問題はありません。</p><p>少なくとも1つのプリンタには、
	    <code class="filename">/etc/printcap</code> の中で、
	    <code class="literal">lp</code> という別名を持たせるべきでしょう。
	    この名前はデフォルトのプリンタ名になっています。
	    ユーザが環境変数 <code class="envar">PRINTER</code> を設定しておらず、
	    かつ、<span class="application">LPD</span> コマンドのコマンドラインで
	    プリンタの名前が指定されていない場合、<code class="literal">lp</code>
	    がデフォルトのプリンタ名となり、
	    そのプリンタに出力されます。</p><p>それから、これは共通の慣習ですが、
	    プリンタの最後の別名には、
	    メーカーやモデル名を含むプリンタの完全な名称をつけることに
	    なっています。</p><p>名前と別名のいくつかを決めたら、
	    <code class="filename">/etc/printcap</code> ファイルに設定します。
	    プリンタ名は一番左のカラムから書き始めます。
	    別名はそれぞれ縦棒によって区切られ、
	    最後の別名の後ろにコロンを置きます。</p><p>次の例では、2 台のプリンタ (Diablo 630 ラインプリンタと
	    Panasonic KX-P4455 <span class="trademark">PostScript</span>® レーザライタプリンタ) が定義
	    されている <code class="filename">/etc/printcap</code>
	    のスケルトンを記しています。</p><pre class="programlisting">#
#  /etc/printcap for host rose
#
rattan|line|diablo|lp|Diablo 630 Line Printer:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:</pre><p>この例では、最初のプリンタに <code class="literal">rattan</code>
	    という名前と別名として、<code class="literal">line</code>、
	    <code class="literal">diablo</code>、<code class="literal">lp</code> そして
	    <code class="literal">Diablo 630 Line Printer</code>
	    が付けられています。別名とし て <code class="literal">lp</code>
	    があるので、このプリンタはデフォルトのプリンタとなっ
	    ています。2 番目は <code class="literal">bamboo</code> と名付けられ、
	    別名として、<code class="literal">ps</code> と
	    <code class="literal">PS</code>、<code class="literal">S</code>、
	    <code class="literal">panasonic</code>、<code class="literal">Panasonic KX-P4455
	      PostScript v51.4</code> が付けられています。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-no-header-pages"></a>10.3.1.5.2. ヘッダページの印字を禁止する</h5></div></div></div><a id="idp84307408" class="indexterm"></a><p><span class="application">LPD</span> スプーリングシステムでは、
	    デフォルトでジョブ毎に
	    <span class="emphasis"><em>ヘッダページ</em></span>を印字します。
	    ヘッダページにはジョブを要求したユーザ名、
	    ジョブが送られたホスト名、そして、ジョブの名前が素晴
	    らしい大きな文字で印字されています。
	    残念なことに、この余分なテキストすべてが、
	    簡単なプリンタ設定法のデバッグの際に紛れ込んできてしまいます。
	    このため、ヘッダページの出力を禁止しておきます。</p><p>ヘッダページの出力を禁止するには、
	    <code class="filename">/etc/printcap</code>
	    にあるプリンタのエントリに <code class="literal">sh</code>
	    の項目を追加します。次に、<code class="literal">sh</code> を加えた
	    <code class="filename">/etc/printcap</code> の例を示します。</p><pre class="programlisting">#
#  /etc/printcap for host rose - no header pages anywhere
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:</pre><p>この書式を正しく使うための注意をしておきます。
	    最初の行は左端のカラムから始めます。
	    それに続く行は字下げします。最後の行以外のすべての行は、
	    行末にバックスラッシュを記述します。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-spooldir"></a>10.3.1.5.3. スプーリングディレクトリの作成</h5></div></div></div><a id="idp84317392" class="indexterm"></a><a id="idp84317904" class="indexterm"></a><p>スプーラの簡単な設定の次のステップでは、
	    <span class="emphasis"><em>スプーリングディレクトリ</em></span>を作成します。
	    プリンタに送られるジョブは、
	    その印字が終了するまでこのディレクトリに置かれます。また、
	    他のたくさんのスプーラもこのディレクトリにファイルを置きます。</p><p>様々な事情によりスプーリングディレクトリは、通常、慣例
	    として <code class="filename">/var/spool</code> の下に置きます。
	    また、スプーリングディレクトリの内容は
	    バックアップをする必要はありません。
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkdir&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mkdir</span>(1)</span></a> によってディレクトリを
	    作るだけでスプーリングディレクトリの復旧は完了します。
	  </p><p>スプーリングディレクトリの名前は、これも慣例ですが、
	    次のようにプリンタの名前と同じにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/spool/printer-name</code></strong></pre><p>しかしながら、ネットワーク上に使用可能なプリンタがたく
	    さんあるならば、<span class="application">LPD</span>
	    で印字するための専用のディレクトリにスプーリングディレクトリを置きたくなるかもしれません。
	    例に出てきたプリンタ <code class="literal">rattan</code> と
	    <code class="literal">bamboo</code> について、この方式を採用すると、
	    次のようになります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/spool/lpd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/spool/lpd/rattan</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/spool/lpd/bamboo</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">各ユーザが印字するジョブのプライバシを守りた
	      いと考えているならば、スプーリングディレクトリを保護し
	      て、これを誰からでもアクセスできないようにしたいと思う
	      かもしれません。スプーリングディレクトリは、
	      <code class="systemitem">daemon</code> ユーザと
	      <code class="systemitem">daemon</code> グループに所有され、
	      読み込み、書き込み、検
	      索可能であり、他からはアクセスできないようにするべきで
	      す。例題のプリンタに対して、次のようにすることにしましょ
	      う。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chown daemon:daemon /var/spool/lpd/rattan</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown daemon:daemon /var/spool/lpd/bamboo</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 770 /var/spool/lpd/rattan</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 770 /var/spool/lpd/bamboo</code></strong></pre></div><p>最後に、<code class="filename">/etc/printcap</code> ファイルで、
	    これらのディレクトリの位置を
	    <span class="application">LPD</span> に伝える必要があります。
	    スプーリングディレクトリのパス名は <code class="literal">sd</code>
	    項目で指定します。</p><pre class="programlisting">#
#  /etc/printcap for host rose - added spooling directories
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=<code class="filename">/var/spool/lpd/rattan</code>:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=<code class="filename">/var/spool/lpd/bamboo</code>:</pre><p>プリンタ名が最初のカラムから始まっており、
	    そのプリンタに関して記述される他の項目は字下げされていること、
	    各行がバックスラッシュで終わっていることに注意してください。</p><p><code class="literal">sd</code>
	    によりスプーリングディレクトリが指定されていない場合、
	    スプーリングシステムは
	    <code class="filename">/var/spool/lpd</code>
	    をデフォルト値として使用します。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-device"></a>10.3.1.5.4. プリンタデバイスの特定</h5></div></div></div><p><a class="link" href="#printing-hardware" title="10.3.1.1. プリンタ機器の設定">プリンタ機器の設定</a>
	    の節では、FreeBSD でプリンタとの通信に使用されるポートおよび
	    <code class="filename">/dev</code>
	    ディレクトリ内のエントリを特定します。
	    そして、<span class="application">LPD</span> にその情報を伝えます。
	    印字するジョブを受け取ると、スプーリングシステムは、
	    (プリンタにデータを渡す義務がある)
	    フィルタプログラムに代わって指定されたデバイスをオープンします。</p><p><code class="filename">/etc/printcap</code> ファイルで
	    <code class="literal">lp</code> 項目を使って
	    <code class="filename">/dev</code> エントリを記入します。</p><p>ここでの例では、<code class="literal">rattan</code>
	    は 1 番目のパラレルポートに、<code class="literal">bamboo</code>
	    は 6 番目のシリアルポートに接続されていることにしましょう。
	    このとき、<code class="filename">/etc/printcap</code> には
	    次のようになります。</p><pre class="programlisting">#
#  /etc/printcap for host rose - identified what devices to use
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=<code class="filename">/var/spool/lpd/rattan</code>:\
        :lp=<code class="filename">/dev/lpt0</code>:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=<code class="filename">/var/spool/lpd/bamboo</code>:\
        :lp=<code class="filename">/dev/ttyu5</code>:</pre><p><code class="filename">/etc/printcap</code> でプリンタの
	    <code class="literal">lp</code> 項目が指定されていない場合は、
	    <span class="application">LPD</span>
	    はデフォルトとして <code class="filename">/dev/lp</code>
	    を使用します。<code class="filename">/dev/lp</code> は、現在の
	    FreeBSD には存在していません。</p><p>設置したプリンタがパラレルポートに
	    接続されている場合は、
	    「<a class="link" href="#printing-textfilter" title="10.3.1.5.6. テキストフィルタのインストール">
	      テキストフィルタのインストール</a>」
	    まで読み飛ばしてください。
	    そうでない場合は、次節の説明に続いてください。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-commparam"></a>10.3.1.5.5. スプーラのための通信パラメータの設定</h5></div></div></div><a id="idp84371664" class="indexterm"></a><p>シリアルポートにプリンタを接続した場合、
	    <span class="application">LPD</span>
	    は、プリンタにデータを送信するフィルタプログラムに代わり、
	    通信速度やパリティ、
	    その他のシリアル通信パラメータを設定することができます。
	    このことによる利点は、</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/etc/printcap</code>
		を編集するだけで、
		様々な通信パラメータを試してみることができます。
		フィルタプログラムを再コンパイルする必要はありません。</p></li><li class="listitem"><p>スプーリングシステムで、
		シリアル通信の設定が異なっているかもしれない複数のプリンタに
		同じフィルタプログラムを使うことが可能になります。</p></li></ul></div><p>次の <code class="filename">/etc/printcap</code> の項目で、
	    <code class="literal">lp</code> で指定された
	    デバイスのシリアル通信パラメータを制御できます。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">
		  br#bps-rate</code></span></dt><dd><p>デバイスの通信速度を
		  <em class="replaceable"><code>bps-rate</code></em> に設定します。
		  ここで、<em class="replaceable"><code>bps-rate</code></em> は 50,
		  75, 110, 134, 150, 200, 300, 600, 1200, 1800, 2400,
		  4800, 9600, 19200, 38400, 57600, 115200 [bit/秒]
		  のいずれかです。</p></dd><dt><span class="term"><code class="literal">ms#stty-mode</code></span></dt><dd><p>デバイスをオープンした後にターミナルデバイスのオプションを設定します。
		  利用できるオプションについては <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a> を参照してください。</p></dd></dl></div><p><code class="literal">lp</code> で指定されたデバイスをオープンするとき、
	    <span class="application">LPD</span> は <code class="literal">ms#</code>
	    で指定されたデバイスの特性を設定します。
	    特に関係があるのは、<code class="literal">parenb</code>,
	    <code class="literal">parodd</code>, <code class="literal">cs5</code>,
	    <code class="literal">cs6</code>, <code class="literal">cs7</code>,
	    <code class="literal">cs8</code>, <code class="literal">cstopb</code>,
	    <code class="literal">crtscts</code>, <code class="literal">ixon</code>
	    モードです。
	    これらは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a> のマニュアルページで説明されています。</p><p>例題のプリンタで6番目のシリアルポートに接続された
	    プリンタの設定を追加してみましょう。
	    通信速度は 38400bps に設定します。
	    モードとして、<code class="literal">-parenb</code> でパリティ無し、
	    <code class="literal">cs8</code> で 8 ビットキャラクタ、
	    <code class="literal">clocal</code> でモデム制御無し、
	    そして <code class="literal">crtscts</code>
	    でハードウェアフロー制御を設定します。</p><pre class="programlisting">bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=<code class="filename">/var/spool/lpd/bamboo</code>:\
        :lp=<code class="filename">/dev/ttyu5</code>:ms#-parenb cs8 clocal crtscts:</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-textfilter"></a>10.3.1.5.6. テキストフィルタのインストール</h5></div></div></div><a id="idp84408656" class="indexterm"></a><p>ここまでで、
	    プリンタにジョブを送るために使うテキストフィルタを
	    <span class="application">LPD</span> に設定する準備が整いました。
	    <span class="emphasis"><em>テキストフィルタ</em></span>とは、
	    <span class="emphasis"><em>入力フィルタ</em></span>としても知られていますが、
	    印字するジョブがあるときに
	    <span class="application">LPD</span> が起動するプログラムです。
	    <span class="application">LPD</span>
	    がプリンタのためにテキストフィルタを起動するとき、
	    <span class="application">LPD</span>
	    はフィルタの標準入力からプリントするジョブを入力し、
	    フィルタの標準出力に項目 <code class="literal">lp</code>
	    で指定されたプリンタデバイスを接続します。フィルタは、
	    標準入力からジョブを読み込み、
	    プリンタのための必要な変換をおこなった後、
	    その結果を標準出力に出力する、
	    これにより印字がなされることを期待されています。
	    テキストフィルタについての更に詳しい情報については、「<a class="link" href="#printing-advanced-filters" title="10.4.1.1. フィルタはどのように機能しているか">
	      フィルタはどのように機能しているか</a>」
	    をご覧ください。</p><p>ここでの簡単なプリンタ設定では、
	    プリンタにジョブを送るため、<code class="command">/bin/cat</code>
	    を実行するだけの簡単なシェルスクリプトで間に合います。
	    FreeBSD に標準で付属している <code class="command">lpf</code>
	    というフィルタでは、バックスペース文字を使った
	    下線引きの動作をおこなう文字ストリームをうまく扱うことができない
	    プリンタのための代替処理をおこなってくれます。
	    もちろん、
	    他のどんなフィルタプログラムを使っても構いません。
	    フィルタ <code class="filename">lpf</code> については、「<a class="link" href="#printing-advanced-lpf" title="10.4.1.6. テキストフィルタ lpf">テキストフィルタ
	      lpf</a>」で詳しく説明します。</p><p>最初に、簡単なテキストフィルタであるシェルスクリプト
	    <code class="filename">/usr/local/libexec/if-simple</code>
	    を作ってみましょう。
	    次のテキストをお好みのテキストエディタでファイルに
	    書き込んでください。</p><pre class="programlisting">#!/bin/sh
#
# if-simple - Simple text input filter for lpd
# Installed in /usr/local/libexec/if-simple
#
# Simply copies stdin to stdout.  Ignores all filter arguments.

/bin/cat &amp;&amp; exit 0
exit 2</pre><p>そして、このファイルを実行可能にします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 555 /usr/local/libexec/if-simple</code></strong></pre><p>LPD
	    にこのテキストフィルタを使うことを設定するためには、
	    <code class="filename">/etc/printcap</code> に
	    <code class="literal">if</code> 項目を使って指定します。これまでの
	    <code class="filename">/etc/printcap</code> の例のプリンタ 2 台に、
	    このフィルタを加えてみましょう。</p><pre class="programlisting">#
#  /etc/printcap for host rose - added text filter
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=<code class="filename">/var/spool/lpd/rattan</code>:\ :lp=<code class="filename">/dev/lpt0</code>:\
        :if=<code class="filename">/usr/local/libexec/if-simple</code>:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=<code class="filename">/var/spool/lpd/bamboo</code>:\
        :lp=<code class="filename">/dev/ttyu5</code>:ms#-parenb cs8 clocal crtscts:\
        :if=<code class="filename">/usr/local/libexec/if-simple</code>:</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">if-simple</code>
	      スクリプトのコピーが <code class="filename">/usr/share/examples/printing</code>
	      ディレクトリにあります。</p></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84424272"></a>10.3.1.5.7. <span class="application">LPD</span> の起動</h5></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lpd</span>(8)</span></a> は <code class="literal">lpd_enable</code> 変数に従って
	    <code class="filename">/etc/rc</code> から実行されます。この変数の
	    デフォルト値は <code class="literal">NO</code> です。まだ
	    そうしていなかったならば</p><pre class="programlisting">lpd_enable="YES"</pre><p>の行を <code class="filename">/etc/rc.conf</code> に追加して
	    計算機を再起動するか、そのまま <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lpd</span>(8)</span></a> を
	    起動してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lpd</code></strong></pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-trying"></a>10.3.1.5.8. 印字してみよう</h5></div></div></div><p>簡単な <span class="application">LPD</span>
	    設定も終わりにたどり着きました。
	    残念ながら、設定はこれでおしまいというわけではありません。
	    なぜなら、さらに、設定をテストし、
	    すべての問題点を解決しなくてはならないからです。
	    設定をテストするために、
	    何かを印字してみましょう。
	    <span class="application">LPD</span> システムで印字をするためには、
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> コマンドを使います。このコマンドは、
	    印字するためのジョブを投入する働きをします。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> コマンドを
	    「<a class="link" href="#printing-testing" title="10.3.1.4. プリンタとの通信状況を調べる">
	      プリンタとの通信状況を調べる</a>」で紹介した、
	    あるテスト用のテキストを生成してくれる
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> プログラムと一緒に使うこともできます。</p><p><span class="emphasis"><em>簡単な <span class="application">LPD</span>
	      設定のテスト</em></span></p><p>次のように入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lptest 20 5 | lpr -Pprinter-name</code></strong></pre><p>ここで、<em class="replaceable"><code>printer-name</code></em>
	    は <code class="filename">/etc/printcap</code>
	    で指定したプリンタ名 (もしくはその別名) です。デフォルト
	    のプリンタを使用する場合は、
	    <code class="option">-P</code> 引数を付けないで
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> を打ち込んでください。もう一度述べますが、
	    <span class="trademark">PostScript</span>® を期待しているプリンタをテストするならば、
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> を使う代わりに <span class="trademark">PostScript</span>® で書かれた
	    プログラムをプリンタに送ってください。
	    プログラムを送るためには、プログラムをファイルに格納して、
	    <code class="command">lpr file</code>
	    と打ち込みます。</p><p><span class="trademark">PostScript</span>® プリンタの場合、
	    送信したプログラムによる結果が得られるでしょう。
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> を使った場合は、
	    以下のような結果が見られるでしょう。</p><pre class="screen">!"#$%&amp;'()*+,-./01234
"#$%&amp;'()*+,-./012345
#$%&amp;'()*+,-./0123456
$%&amp;'()*+,-./01234567
%&amp;'()*+,-./012345678</pre><p>更にプリンタをテストしたい場合は、
	    (言語ベースのプリンタのための) もっと大きなプログラムを送信するか、
	    引数を変えて
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> を実行します。たとえば、<code class="command">lptest
	      80 60</code> で、それぞれ 80 文字の行を 60
	    行生成します。</p><p>プリンタがうまく動かなかった場合は、次の節、「<a class="link" href="#printing-troubleshooting" title="10.7. トラブルシューティング">
	      トラブルシューティング</a>」をご覧ください。</p></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-advanced"></a>10.4. プリンタ設定上級編</h2></div></div></div><p>この節では、特殊な形式のファイルを印字するためのフィルタ、
      ヘッダページ、ネットワーク越しのプリンタへの印字、そして、
      プリンタ使用の制限や課金について説明しています。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-filter-intro"></a>10.4.1. フィルタ</h3></div></div></div><a id="idp84457552" class="indexterm"></a><p><span class="application">LPD</span>
	は、ネットワークプロトコル、キュー、アクセス制御などの
	印刷にかかわるさまざまな点を扱いますが、
	<span class="emphasis"><em>実際の</em></span>作業のほとんどは
	<span class="emphasis"><em>フィルタ</em></span>によっておこなわれています。
	フィルタは、プリンタと通信し、
	プリンタのデバイス依存性や特殊な要求を扱うプログラムです。
	簡単なプリンタ設定では、
	プレインテキストのためのフィルタをインストールしました。
	このプレインテキストフィルタは、
	ほとんどのプリンタで機能する極めて単純なものでした
	(「<a class="link" href="#printing-textfilter" title="10.3.1.5.6. テキストフィルタのインストール">
	  テキストフィルタのインストール</a>」を参照)。</p><p>しかしながら、形式変換やプリンタ課金、特定のプリンタの癖、
	など をうまく利用するためには、
	フィルタがどのように機能するかという
	ことを理解しておくべきです。これらの側面を扱うことは、
	最終的には、フィルタの責任であるからです。
	そして、これは悪い情報ですが、ほとんどの場合において、
	<span class="emphasis"><em>あなた自身</em></span>が
	フィルタを供給する必要があるということです。また都合のよいことには、
	たくさんのフィルタが一般的に利用できるということです。
	もしフィルタがなかったとしても、
	普通はフィルタを作るのは簡単です。</p><p>FreeBSD にも、プレインテキストを印字させることができる
	<code class="filename">/usr/libexec/lpr/lpf</code>
	というフィルタが 1 つ付いています
	(このフィルタはファイルに含まれるバックスペースやタブを扱います。
	また、課金をすることもできますが、
	できることはこれだけしかありません)。
	いくつかのフィルタとフィルタの構成要素は
        FreeBSD Ports Collection にもあります。</p><p>この節で述べることは次の通りです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>「<a class="link" href="#printing-advanced-filters" title="10.4.1.1. フィルタはどのように機能しているか">
	      フィルタはどのように機能しているか</a>」では、
	    印字の過程におけるフィルタの役割を概説します。
	    この節を読むことで、<span class="application">LPD</span>
	    がフィルタを使うときに、<span class="quote">「<span class="quote">見えないところで</span>」</span>
	    何が起こっているかが理解できるでしょう。このことを知っておくと、
	    プリンタそれぞれに様々なフィルタをインストールしたときに
	    遭遇するかもしれない問題を予期したり、
	    デバッグするときに役立つでしょう。</p></li><li class="listitem"><p><span class="application">LPD</span>
	    は、すべてのプリンタがデフォルトでプレインテキストを印字できることを期待しています。
	    これは、プレインテキストを直接印字できない <span class="trademark">PostScript</span>®
	    (または他の言語対応の) プリンタで問題になります。「<a class="link" href="#printing-advanced-if-conversion" title="10.4.1.2. プレインテキストのジョブを PostScript® プリンタで印字する">
	      プレインテキストのジョブを <span class="trademark">PostScript</span>®
	      プリンタで印字する</a>」 で、
	    この問題を克服する方法について述べます。
            <span class="trademark">PostScript</span>® プリンタをお持ちの方は、
            この節をお読みになることをおすすめします。</p></li><li class="listitem"><p><span class="trademark">PostScript</span>®
	    は様々なプログラムのための有名な出力形式です。
	    <span class="trademark">PostScript</span>® のコードを直接書いてしまう人すらいます。
	    残念ながら、<span class="trademark">PostScript</span>® プリンタは高価です。「<a class="link" href="#printing-advanced-ps" title="10.4.1.3. 非 PostScript® プリンタによる PostScript® のシミュレート">非 <span class="trademark">PostScript</span>® プリンタによる
	      <span class="trademark">PostScript</span>® のシミュレート</a>」節では、<span class="trademark">PostScript</span>®
	    データを<span class="emphasis"><em>非 <span class="trademark">PostScript</span>®
	    プリンタ</em></span>に受けつけさせ、印字させるために、
	    どのようにしてプリンタ用のテキストフィルタをさらに変更すればよいのか、
	    ということについて説明しています。<span class="trademark">PostScript</span>®
	    プリンタを持っていない方は、
	    この節をお読みになることをおすすめします。</p></li><li class="listitem"><p>「<a class="link" href="#printing-advanced-convfilters" title="10.4.1.4. 変換フィルタ">
	      変換フィルタ</a>」では、
	      図形や組版データといった特定のファイル形式を、
	      プリンタが理解できる形式へ変換する作業を自動的におこなわせる方法について述べます。
	      この節を読むと、troff のデータを印字するには <code class="command">lpr
	      -t</code>, または、<span class="application">TeX</span> DVI を印字するには
	    <code class="command">lpr -d</code>、
	    ラスタイメージデータを印字するには <code class="command">lpr -v</code>、
	    などといったようにユーザが入力することができるように
	    プリンタの設定をおこなうことができます。
	    この節もお読みになることをお薦めします。</p></li><li class="listitem"><p>「<a class="link" href="#printing-advanced-of" title="10.4.1.5. 出力フィルタ">出力フィルタ</a>」
	    では、あまり使われない <span class="application">LPD</span>
	    の機能のすべて、すなわち、
	    出力フィルタに関することが記述されています。ヘッダページ
	    (「<a class="link" href="#printing-advanced-header-pages" title="10.4.2. ヘッダページ">
	      ヘッダページ</a>」参照) を印字させていない場合は、
	    多分、この節は飛ばしても構わないでしょう。</p></li><li class="listitem"><p>「<a class="link" href="#printing-advanced-lpf" title="10.4.1.6. テキストフィルタ lpf">テキストフィルタ
	      lpf</a>」では、<code class="command">lpf</code>
	    についての説明が、ほぼ完全におこなわれています。これは
	    FreeBSD に付属するラ インプリンタ (または、
	    ラインプリンタのように動作するレーザプリンタ) のための、
	    単純なテキストフィルタです。
	    プレインテキストを印字したことに対して課金をおこなう方法が
	    至急必要な場合、もしくは、バックスペース文字を印字しようと
	    すると煙を発するプリンタを持っている場合は、絶対に
	    <code class="command">lpf</code> を検討するべきです。</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">以下で述べられているさまざまなスクリプトは、<code class="filename">/usr/share/examples/printing</code>
	  ディレクトリにあります。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-filters"></a>10.4.1.1. フィルタはどのように機能しているか</h4></div></div></div><p>既に言及したように、フィルタとは、プリンタにデータを送る際に、
	  デバイスに依存した部分を取り扱うために <span class="application">LPD</span>
	  によって起動される実行プログラムです。</p><p><span class="application">LPD</span>
	  がジョブ中のファイルを印字しようとするとき、
	  <span class="application">LPD</span>
	  はフィルタプログラムを起動します。このとき、
	  フィルタの標準入力を印字するファイルに、
	  標準出力をプリンタに、そして、標準エラー出力を
	  エラーログファイル (<code class="filename">/etc/printcap</code> 内の
	  <code class="literal">lf</code> 項目で指定されたファイル、または、
	  指定されていない場合は、デフォルトとして
	  <code class="filename">/dev/console</code>)
	  にセットします。</p><a id="idp84494672" class="indexterm"></a><p><span class="application">LPD</span>
	  が起動するフィルタと、その引数が何であるかは、
	  <code class="filename">/etc/printcap</code>
	  ファイルの内容と、ジョブの起動時にユーザが指定した
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> コマンドの引数に依存しています。
	  たとえば、ユーザが <code class="command">lpr -t</code> と入力した場合は、
	  <span class="application">LPD</span> は出力先のプリンタ用の
	  <code class="literal">tf</code> 項目で指定されている troff
	  用のフィルタを起動させるでしょう。
	  ユーザがプレインテキストの印字を指示したときは、
	  <code class="literal">if</code> で指定されたフィルタが起動されるでしょう
	  (このことはほとんどの場合にあてはまります。
	  詳細については、「<a class="link" href="#printing-advanced-of" title="10.4.1.5. 出力フィルタ">
	    出力フィルタ</a>」をご覧ください)。</p><p><code class="filename">/etc/printcap</code>
	  で指定可能なフィルタは次の3種類があります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>テキストフィルタ</em></span>
	      (<span class="application">LPD</span> のドキュメントでは紛らわしいことに
	      <span class="emphasis"><em>入力フィルタ</em></span>と呼んでいますが)
	      は一般のテキストの印字を扱います。これはデフォルトのフィルタと
	      考えてください。<span class="application">LPD</span>
	      では、すべてのプリンタに対して、
	      デフォルトでプレインテキストが印字できることを期待しています。
	      さらに、バックスペースやタブを正しく扱い、また、
	      他の特殊な文字が入力されてもプリンタに混乱を来さないように
	      するのはテキストフィルタの仕事であると考えています。

	      プリンタの使用に対して課金をしなくてはならない環境にあ
	      るときは、テキストフィルタが印字したページ数を数える作
	      業もしなくてはなりません。この作業は、通常、印字した行
	      数を数え、これをプリンタが 1 ページ当たりに印字できる行
	      数と比較することでおこなわれます。

	      テキストフィルタは、次のような引数を付けて起動されます。</p><div class="cmdsynopsis"><p><code class="command">filter-name</code> [-c]  -w <em class="replaceable"><code>width</code></em>   -l <em class="replaceable"><code>length</code></em>   -i <em class="replaceable"><code>indent</code></em>   -n <em class="replaceable"><code>login</code></em>   -h <em class="replaceable"><code>host</code></em>   <em class="replaceable"><code>acct-file</code></em> </p></div><p>ここで、</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-c</code></span></dt><dd><p><code class="command">lpr -l</code>
		      によってジョブが入力されたときに与えられます。</p></dd><dt><span class="term"><em class="replaceable"><code>width</code></em></span></dt><dd><p><code class="filename">/etc/printcap</code>
		      で指定された <code class="literal">pw</code> (page width)
		      項目の値が与えられます。デフォルトは、
		      132 です。</p></dd><dt><span class="term"><em class="replaceable"><code>length</code></em></span></dt><dd><p><code class="literal">pl</code> (page length)
		      項目で指定された値が与えられます。
		      デフォルトは 66 です。</p></dd><dt><span class="term"><em class="replaceable"><code>indent</code></em></span></dt><dd><p><code class="command">lpr -i</code>
		      によって与えられた字下げの量で、
		      デフォルトは 0 です。</p></dd><dt><span class="term"><em class="replaceable"><code>login</code></em></span></dt><dd><p>ファイルを印字したユーザのアカウント名が
		      与えられます。</p></dd><dt><span class="term"><em class="replaceable"><code>host</code></em></span></dt><dd><p>ジョブが入力されたホスト名が
		      与えられます。</p></dd><dt><span class="term"><em class="replaceable"><code>acct-file</code></em></span></dt><dd><p><code class="literal">af</code>
		      項目で指定されている課金データファイル
		      の名前が与えられます。</p></dd></dl></div></li><li class="listitem"><p><span class="emphasis"><em>変換フィルタ</em></span><a id="idp84538960" class="indexterm"></a>は、
	      特定のファイル形式をプリンタ
	      が紙に印字できるようなものに変換します。たとえば、
	      プリンタで ditroff 組版データを直接印字することはできません。
	      しかし、ditroff データをプリンタが消化し、
	      印字することができる形式へ変換するために、ditroff
	      ファイル用フィルタをインストールすることができます。
	      「<a class="link" href="#printing-advanced-convfilters" title="10.4.1.4. 変換フィルタ">
		変換フィルタ</a>」
	      で、これらに関するすべてについて説明します。
	      プリンタの課金をする必要がある場合は、
	      変換フィルタでも印字ページを数える作業が必要となります。

	      変換フィルタは次の引数をとって起動されます。</p><div class="cmdsynopsis"><p><code class="command">filter-name</code>  -x <em class="replaceable"><code>pixel-width</code></em>   -y <em class="replaceable"><code>pixel-height</code></em>   -n <em class="replaceable"><code>login</code></em>   -h <em class="replaceable"><code>host</code></em>   <em class="replaceable"><code>acct-file</code></em> </p></div><p>ここで、<em class="replaceable"><code>pixel-width</code></em> は、
	      <code class="literal">px</code> 項目で指定された値
	      (デフォルトは 0)、
	      <em class="replaceable"><code>pixel-height</code></em> は、
	      <code class="literal">py</code> 項目で指定された値
	      (デフォルトは 0) です。</p></li><li class="listitem"><p><span class="emphasis"><em>出力フィルタ</em></span>は、
	      テキストフィルタが指定されて
	      おらず、かつ、
	      ヘッダページの出力が許可されている場合にのみ使われます。
	      「<a class="link" href="#printing-advanced-of" title="10.4.1.5. 出力フィルタ">
		出力フィルタ</a>」で、これらのことについて説明します。
	      出力フィルタに対する引数は次の 2 つだけです。</p><div class="cmdsynopsis"><p><code class="command">filter-name</code>  -w <em class="replaceable"><code>width</code></em>   -l <em class="replaceable"><code>length</code></em> </p></div><p>ここで、<code class="option">-w</code> と <code class="option">-l</code> は、
	      テキストフィルタの場合と同じです。</p></li></ul></div><p>フィルタは、次に示す終了状態をもってプログラムを
	  <span class="emphasis"><em>exit</em></span> するべきです。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">exit 0</span></dt><dd><p>フィルタがファイルを正常に印字した場合。</p></dd><dt><span class="term">exit 1</span></dt><dd><p>フィルタはファイルの印字に失敗したが、
		<span class="application">LPD</span>
		に再度ファイルの印字を試みて欲しい場合。
		この終了状態で終了した場合、<span class="application">LPD</span>
		はフィルタを再スタートします。</p></dd><dt><span class="term">exit 2</span></dt><dd><p>フィルタはファイルの印字に失敗し、かつ、<span class="application">LPD</span>
		に再出力を試みて欲しくない場合。この場合、<span class="application">LPD</span>
		はそのファイルを放棄します。</p></dd></dl></div><p>FreeBSD に付属するテキストフィルタ
	  <code class="filename">/usr/libexec/lpr/lpf</code> は、FORM FEED
	  文字が送られたときやプリンタ使用に対する課金をどのようにするかを決定するために、
	  ページ幅やページ長の引数を利用します。また、
	  課金用のエントリを作成するため、ログイン名、ホスト名、
	  課金ファイル名の引数を利用します。</p><p>もし、フィルタの購入を検討しているならば、<span class="application">LPD</span>
	  と互換性があるかどうかを確認してください。もしそうならば、
	  上述の引数リストをサポートしていなければなりません。
	  一般向けの使用のためにフィルタを作成する計画をしている場合は、
	  同じ引数リストと終了コードをサポートしてください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-if-conversion"></a>10.4.1.2. プレインテキストのジョブを <span class="trademark">PostScript</span>® プリンタで印字する</h4></div></div></div><a id="idp84570320" class="indexterm"></a><p>コンピュータと <span class="trademark">PostScript</span>® (または、他の言語に対応した)
	  プリンタをあなたしか使用しない場合は、プリンタにプレ
	  インテキストを絶対に送らない、そして、
	  プリンタにプレインテキストを送りたがっている
	  様々なプログラムの機能を決して使わないことにしてください。そうすれば、
	  この節に書かれたことに心を煩わせる必要はまったくなくなります。</p><p>しかし、<span class="trademark">PostScript</span>®
	  とプレインテキストの両方のジョブをプリンタへ送りたいと思っている場合は、
	  プリンタ設定についての要求が増えるでしょう。
	  両者をプリンタへ送信するためには、
	  到着したジョブがプレインテキストであるか
	  <span class="trademark">PostScript</span>® であるかを検出するテキストフィルタが必要です。
	  <span class="trademark">PostScript</span>® のジョブはすべて <code class="literal">%!</code>
	  で始まらなければならないことになっています
	  (他のプリンタ言語に関しては、
	  プリンタのドキュメントをご覧ください)。
	  ジョブの最初の 2 文字がこれならば、<span class="trademark">PostScript</span>® であることが分かります。
	  したがって、
	  ジョブのそれ以降の部分をプリンタに直接送ることができます
	  (訳注: <span class="trademark">PostScript</span>® では、<span class="emphasis"><em>%</em></span>
	  以降はコメントとして扱われるので、最初の <span class="emphasis"><em>%!</em></span> の行を読み捨てても問題はない)。
	  最初の2文字が <span class="emphasis"><em>%!</em></span> でない場合は、
	  フィルタはテキストを <span class="trademark">PostScript</span>® に変換し、
	  その結果を使って印字をおこないます。</p><p>この作業をどうやってやればよいのでしょうか。</p><a id="idp84610512" class="indexterm"></a><p>シリアルポートにプリンタを接続した場合は、
	  <code class="command">lprps</code> をインストールすることをお勧めします。
	  <code class="command">lprps</code> は <span class="trademark">PostScript</span>® 用のフィルタで、
	  プリンタとの双方向通信をおこないます。
	  このフィルタでは、プリンタからの冗長な情報を得ることで、
	  プリンタの状況を示すファイルが更新されていきます。
	  したがって、ユーザや管理者は
	  (<span class="errorname">トナー残量少</span>や
	  <span class="errorname">紙詰まり</span>といった)
	  プリンタの状況を正確に知ることができます。しかし、
	  もっと重要なことは、<code class="command">psif</code>
	  と呼ばれるプログラムが含まれているということです。
	  このプログラムは、
	  入力されたジョブがプレインテキストかどうかを検出し、
	  これを <span class="trademark">PostScript</span>® に変換するために、<code class="command">textps</code>
	  (<code class="command">lprps</code> に付属する別のプログラム)
	  を呼び出します。そして、このジョブをプリンタに送るために、
	  <code class="command">lprps</code> が使われます。</p><p><code class="command">lprps</code> は FreeBSD Ports Collection
	  に含まれています (<a class="link" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">Ports Collection</a>
          を参照してください)。
	  紙のサイズに合わせて
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/print/lprps-a4/pkg-descr">print/lprps-a4</a> または
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/print/lprps-letter/pkg-descr">print/lprps-letter</a> port
	  をインストールしてください。<code class="command">lprps</code>
	  をインストールした後は、<code class="command">lprps</code>
	  の一部である <code class="command">psif</code>
	  プログラムのパス名を指定するだけです。Ports Collection から
	  <code class="command">lprps</code> をインストールしたときは、
	  <code class="filename">/etc/printcap</code> の中のシリアル接続した
	  <span class="trademark">PostScript</span>® プリンタのエントリに対して、次を使ってください。
	</p><pre class="programlisting">:if=<code class="filename">/usr/local/libexec/psif</code>:</pre><p><span class="application">LPD</span>
	  にプリンタをリード・ライトモードでオープンさせるために、
	  <code class="literal">rw</code> 項目も指定すべきです。</p><p>パラレルポート接続の <span class="trademark">PostScript</span>® プリンタの場合 (すなわち、
	  <code class="command">lprps</code> が
	  必要としているプリンタとの双方向通信ができない)、
	  テキストフィルタとして次のシェルスクリプトを使うことができます。</p><pre class="programlisting">#!/bin/sh
#
#  psif - Print PostScript or plain text on a PostScript printer
#  Script version; NOT the version that comes with lprps
#  Installed in /usr/local/libexec/psif
#

IFS="" read -r first_line
first_two_chars=`expr "$first_line" : '\(..\)'`

if [ "$first_two_chars" = "%!" ]; then
   #
   #  PostScript job, print it.
   #
   echo "$first_line" &amp;&amp; cat &amp;&amp; printf "\004" &amp;&amp; exit 0
   exit 2
else
   #
   #  Plain text, convert it, then print it.
   #
   ( echo "$first_line"; cat ) | /usr/local/bin/textps &amp;&amp; printf "\004" &amp;&amp; exit 0
   exit 2
fi</pre><p>上記のスクリプトにおいて、<code class="command">textps</code>
	  はプレインテキストから <span class="trademark">PostScript</span>®
	  へ変換するために別にインストールしたプログラムです。
	  テキストから <span class="trademark">PostScript</span>® へ変換するのには、
	  お好みのどんなプログラムでも使うことができます。FreeBSD
	  Ports Collection (<a class="link" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">Ports Collection</a>
	  を参照してください) には、<code class="literal">a2ps</code>
	  と呼ばれるテキストから
	  <span class="trademark">PostScript</span>® に変換するプログラムが入っています。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-ps"></a>10.4.1.3. 非 <span class="trademark">PostScript</span>® プリンタによる <span class="trademark">PostScript</span>®
	  のシミュレート</h4></div></div></div><a id="idp84654416" class="indexterm"></a><a id="idp84655568" class="indexterm"></a><p><span class="trademark">PostScript</span>®
	  は質の高い組版と印字をおこなうための
	  <span class="emphasis"><em>事実上の</em></span>標準です。しかしながら、<span class="trademark">PostScript</span>®
	  は、<span class="emphasis"><em>高価な</em></span>標準です。ありがたいことに、
	  Aladdin Enterprises から
	  <span class="application">Ghostscript</span> と呼ばれる、
	  <span class="trademark">PostScript</span>® 互換の動作をするフリーのプログラムが出されていて、
	  FreeBSD で動きます。
	  <span class="application">Ghostscript</span> はほとんどの <span class="trademark">PostScript</span>® ファイルを読むことができ、
	  これらの各ページを多くのブランドの非 <span class="trademark">PostScript</span>® プリンタを含む
	  様々なデバイス用に変換することができます。
	  <span class="application">Ghostscript</span> をインストールし、
	  プリンタ用の特別なテキストフィルタを使うことによって、
	  非 <span class="trademark">PostScript</span>® プリンタをあたかも本物の <span class="trademark">PostScript</span>®
	  プリンタであるかのように動作させることができます。</p><p><span class="application">Ghostscript</span> は FreeBSD Ports Collection に入っています。
	  複数のバージョンがありますが、最も良く使われているバージョンは <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/print/ghostscript-gpl/pkg-descr">print/ghostscript-gpl</a> です。</p><p><span class="trademark">PostScript</span>® プリンタをシミュレートさせる場合は、
	  テキストフィルタに <span class="trademark">PostScript</span>®
	  ファイルを印字しようとしているかどうかを検出させます。
	  <span class="trademark">PostScript</span>® ファイルでない場合は、
	  フィルタはそのファイルを直接プリンタに送ります
	  (訳注: テキストファイルを直接印字できない場合は、もちろん、
	  変換フィルタを通す必要があります)。<span class="trademark">PostScript</span>® の場合は、
	  まず、<span class="application">Ghostscript</span> を使い、
	  ファイルをそのプリンタが理解できる形式へ変換します。</p><p>次の例のスクリプトは、Hewlett Packard DeskJet 500
	  プリンタ用 のテキストフィルタです。
	  他のプリンタで用いるときは、<code class="option">-sDEVICE</code>
	  引数を <code class="command">gs</code> (<span class="application">Ghostscript</span>)
	  コマンドに変えてください (<code class="command">gs -h</code>
	  と入力すると、現在インストールされている <span class="application">Ghostscript</span>
	  でサポートされているデバイスのリストが得られます)。</p><pre class="programlisting">#!/bin/sh
#
#  ifhp - Print Ghostscript-simulated PostScript on a DeskJet 500
#  Installed in /usr/local/libexec/ifhp

#
#  Treat LF as CR+LF (to avoid the "staircase effect" on HP/PCL
#  printers):
#
printf "\033&amp;k2G" || exit 2

#
#  Read first two characters of the file
#
IFS="" read -r first_line
first_two_chars=`expr "$first_line" : '\(..\)'`

if [ "$first_two_chars" = "%!" ]; then
    #
    #  It is PostScript; use Ghostscript to scan-convert and print it.
    #
    /usr/local/bin/gs -dSAFER -dNOPAUSE -q -sDEVICE=djet500 \
      -sOutputFile=- - &amp;&amp; exit 0

else
    #
    #  Plain text or HP/PCL, so just print it directly; print a form feed
    #  at the end to eject the last page.
    #
    echo "$first_line" &amp;&amp; cat &amp;&amp; printf "\033&amp;l0H" &amp;&amp;
    exit 0
fi

exit 2</pre><p>最後に、<code class="literal">if</code> 項目を通して、<span class="application">LPD</span>
	  にこのフィルタを教えてやる必要があります。</p><pre class="programlisting">:if=<code class="filename">/usr/local/libexec/ifhp</code>:</pre><p>これでおしまいです。<code class="command">lpr plain.text</code>
	  とか <code class="command">lpr whatever.ps</code>
	  と入力してみましょう。どちらも正常に印字されるはずです。</p><div xmlns="" class="note"><h3 class="admontitle">訳注: </h3><p xmlns="http://www.w3.org/1999/xhtml">
	    日本語を印字する場合は、
	    日本語対応の Ghostscript が必要です。日本語対応版の
	    Ghostscript も Ports Collection に入っています。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-convfilters"></a>10.4.1.4. 変換フィルタ</h4></div></div></div><p>「<a class="link" href="#printing-simple" title="10.3.1. プリンタ設定導入編">プリンタ設定導入編</a>」
	  に書かれた簡単な設定が完了したら、最初に、
	  やってみたいと思うことは、多分 (プレイン ASCII テキストに加えて)
	  好みのファイル形式のための変換フィルタをインストールすることでしょう。
	  </p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84686928"></a>10.4.1.4.1. なぜ、変換フィルタをインストールするのか?</h5></div></div></div><a id="idp84687568" class="indexterm"></a><p>変換フィルタによって、
	    様々な種類のファイルを印字することが簡単になります。たとえば、<span class="application">TeX</span>
	    組版システムでたくさんの仕事をしたと仮定しましょう。
	    そして、<span class="trademark">PostScript</span>® プリンタが接続 されているとします。
	    すると、<span class="application">TeX</span> で DVI ファイルを作成する度に、DVI
	    ファイルを印字するために、
	    これを <span class="trademark">PostScript</span>® ファイルに変換する必要があります。
	    このコマンドは次のようになるでしょう。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>dvips seaweed-analysis.dvi</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>lpr seaweed-analysis.ps</code></strong></pre><p>DVI ファイル用の変換フィルタがインストールしてあると、
	    <span class="application">LPD</span> に変換を肩代わりさせることで毎回毎回
	    おこなわなければならなかった面倒な変換作業を省くことができます。
	    つまり、DVI を生成したら、
	    次のようなコマンドを入力するだけで、これが印字されます。
	  </p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lpr -d seaweed-analysis.dvi</code></strong></pre><p><span class="application">LPD</span> に DVI
	    ファイルの変換をさせるためには、
	    <code class="option">-d</code> オプション を指定します。
	    変換オプションのリストは「<a class="link" href="#printing-lpr-options-format" title="10.5.4.1. 整形と変換に関するオプション">
	      整形と変換に関するオプション</a>」
	    に載せてあります。</p><p>変化のオプションのそれぞれをプリンタに
	    サポートさせるためには、
	    <span class="emphasis"><em>変換フィルタ</em></span>をインストールし、
	    そのパス名を <code class="filename">/etc/printcap</code>
	    の中で指定しなくてはなりません。変換フィルタは、
	    プレインテキストを印字する代わりに、フィルタはファイルを
	    プリンタが理解できる形式に変換するところを除けば、
	    「プリンタの簡単な設定」で説明したテキストファイル
	    (「<a class="link" href="#printing-textfilter" title="10.3.1.5.6. テキストフィルタのインストール">
	      テキストフィルタのインストール</a>」 を見て下さい)
	    に似ています。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84702032"></a>10.4.1.4.2. どの変換フィルタをインストールすべきか?</h5></div></div></div><p>使いたいと思う変換フィルタをインストールすべきです。
	    DVI のデータを頻繁に印字するならば、DVI 変換フィルタ
	    をインストールするのが適切でしょう。印字しなくてはなら
	    ない troff を大量に抱えている場合は、多分、
	    troff フィルタが欲しくなるはずです。</p><p>次の表は、<span class="application">LPD</span> で動作するフィルタと、
	    <code class="filename">/etc/printcap</code>
	    ファイルでのエントリする項目、そして、
	    <code class="command">lpr</code>
	    コマンドで呼び出す方法をまとめたものです。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>ファイル形式</th><th><code class="filename">/etc/printcap</code>項目</th><th><code class="command">lpr</code> オプション</th></tr></thead><tbody><tr><td>cifplot</td><td><code class="literal">cf</code></td><td><code class="option">-c</code></td></tr><tr><td>DVI</td><td><code class="literal">df</code></td><td><code class="option">-d</code></td></tr><tr><td>plot</td><td><code class="literal">gf</code></td><td><code class="option">-g</code></td></tr><tr><td>ditroff</td><td><code class="literal">nf</code></td><td><code class="option">-n</code></td></tr><tr><td>FORTRAN text</td><td><code class="literal">rf</code></td><td><code class="option">-f</code></td></tr><tr><td>troff</td><td><code class="literal">tf</code></td><td><code class="option">-f</code></td></tr><tr><td>raster</td><td><code class="literal">vf</code></td><td><code class="option">-v</code></td></tr><tr><td>プレインテキスト</td><td><code class="literal">if</code></td><td>なし、<code class="option">-p</code>、または
		    <code class="option">-l</code></td></tr></tbody></table></div><p>先の例のように、<code class="command">lpr -d</code>
	    を使うためには、出力先のプリンタの
	    <code class="filename">/etc/printcap</code> 内のエントリで、
	    <code class="literal">df</code>
	    項目が必要であることが分かります。</p><a id="idp84729552" class="indexterm"></a><p>反論はあるかも知れませんが、FORTRAN テキストや plot
	    のような形式は、多分、廃れてていくでしょう。
	    あなたのサイトで、自前のフィルタをインストールするだけで、
	    プリントオプションのいくつか、あるいは、
	    全部に新しい意味を与えることができます。たとえば、
	    Printerleaf ファイル (Interleaf
	    デスクトップパブリッシングプログラムによるファイル)
	    を直接印字したいとします。
	    そして、Printerleaf 用の変換フィルタを
	    <code class="literal">gf</code> 項目で
	    指定したパスにインストールすれば、<code class="command">lpr
	      -g</code> の意味は <span class="quote">「<span class="quote">Printerleaf
	    ファイルを印字する</span>」</span> 意味だとユーザに教えることができます。
	    </p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84731856"></a>10.4.1.4.3. 変換フィルタのインストール</h5></div></div></div><p>変換フィルタは FreeBSD
	    の基本システムのインストールとは別にインストールするプログラムなので、
	    変換フィルタは、
	    <code class="filename">/usr/local</code>
	    ディレクトリの下に置くべきでしょう。
	    フィルタは <span class="application">LPD</span> だけが実行する特別なプログラム、
	    すなわち、一般ユーザが実行する必要すらないプログラムなので、
	    <code class="filename">/usr/local/libexec</code>
	    ディレクトリに置くのが普通です。</p><p>変換フィルタを使用可能にするためには、
	    <code class="filename">/etc/printcap</code>
	    の目的のプリンタの適切な項目に
	    フィルタがあるパス名を指定します。</p><p>DVI 変換フィルタをプリンタ <code class="literal">bamboo</code>
	    のエントリに加えてみましょう。プリンタ
	    <code class="literal">bamboo</code> の <code class="literal">df</code>
	    項目を新たに加えた <code class="filename">/etc/printcap</code>
	    ファイルの例を以下に再掲します。</p><pre class="programlisting">#
#  /etc/printcap for host rose - added df filter for bamboo
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=<code class="filename">/var/spool/lpd/rattan</code>:\
        :lp=<code class="filename">/dev/lpt0</code>:\
        :if=<code class="filename">/usr/local/libexec/if-simple</code>:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=<code class="filename">/var/spool/lpd/bamboo</code>:\
        :lp=<code class="filename">/dev/ttyu5</code>:ms#-parenb cs8 clocal crtscts:rw:\
        :if=<code class="filename">/usr/local/libexec/psif</code>:\
        :df=<code class="filename">/usr/local/libexec/psdf</code>:</pre><p>DVI フィルタは
	    <code class="filename">/usr/local/libexec/psdf</code> という
	    名前のシェルスクリプトです。
	    このスクリプトは次のようになっています。</p><pre class="programlisting">#!/bin/sh
#
#  psdf - DVI to PostScript printer filter
#  Installed in /usr/local/libexec/psdf
#
#  Invoked by lpd when user runs lpr -d
#
exec /usr/local/bin/dvips -f | /usr/local/libexec/lprps "$@"</pre><p>このスクリプトでは、<code class="command">dvips</code>
	    をフィルタモード (引数 <code class="option">-f</code>) で、
	    標準入力上で起動しています。標準入力は印字するジョブです。
	    それから、<span class="trademark">PostScript</span>® プリンタ用フィルタ
	    <code class="command">lprps</code> (これについては「<a class="link" href="#printing-advanced-if-conversion" title="10.4.1.2. プレインテキストのジョブを PostScript® プリンタで印字する">
	      プレインテキストのジョブを <span class="trademark">PostScript</span>®
	      プリンタで印字する</a>」 を参照してください) を
	    <span class="application">LPD</span> に与えられた引数を付けて起動します。
	    <code class="command">lprps</code>
	    はこれらの引数を印字されたページ分の課金をおこなうために使われます。
	    </p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84761680"></a>10.4.1.4.4. 変換フィルタのその他の例</h5></div></div></div><p>変換フィルタのインストールには決まったステップがないので、
	    この節では、例をもっと挙げることにします。
	     これを自分でフィルタを作る際のガイドにしてください。
	    適当な例があったら、それをそのまま使ってください。</p><p>次のスクリプト例は、Hewlett Packard LaserJet III-Si
	    のための、raster (ええと・・実は、GIF ファイル)
	    用の変換フィルタです。</p><pre class="programlisting">#!/bin/sh
#
#  hpvf - Convert GIF files into HP/PCL, then print
#  Installed in /usr/local/libexec/hpvf

PATH=/usr/X11R6/bin:$PATH; export PATH

giftopnm | ppmtopgm | pgmtopbm | pbmtolj -resolution 300 \
    &amp;&amp; exit 0 \
    || exit 2</pre><p>ここでは、GIF ファイルから PNM (portable anymap)
	    形式に変換し、次に PGM (portable graymap) 形式に変換してから、
	    LaserJet/PCL-互換データに変換しています。</p><p>上記のフィルタを使うプリンタのためのエントリを付け加えた
	    <code class="filename">/etc/printcap</code>
	    ファイルは次のようになります。</p><pre class="programlisting">#
#  /etc/printcap for host orchid
#
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=<code class="filename">/dev/lpt0</code>:sh:sd=<code class="filename">/var/spool/lpd/teak</code>:mx#0:\
        :if=<code class="filename">/usr/local/libexec/hpif</code>:\
        :vf=<code class="filename">/usr/local/libexec/hpvf</code>:</pre><p>次のスクリプトは、<span class="trademark">PostScript</span>® プリンタ
	    <code class="literal">bamboo</code> のための groff 組版システムの
	    troff データのための変換フィルタです。</p><pre class="programlisting">#!/bin/sh
#
#  pstf - Convert groff's troff data into PS, then print.
#  Installed in /usr/local/libexec/pstf
#
exec grops | /usr/local/libexec/lprps "$@"</pre><p>上記のスクリプトではプリンタとの通信をおこなうため、
	    <code class="command">lprps</code> をまた利用しています。
	    プリンタがパラレルポートに接続されている場合は、代わりに、
	    次のスクリプトを使うかもしれません。</p><pre class="programlisting">#!/bin/sh
#
#  pstf - Convert groff's troff data into PS, then print.
#  Installed in /usr/local/libexec/pstf
#
exec grops</pre><p>これで完成しました。次に、フィルタを使用可能にするため
	    に <code class="filename">/etc/printcap</code>
	    に加える必要があるエントリを示します。</p><pre class="programlisting">:tf=<code class="filename">/usr/local/libexec/pstf</code>:</pre><p>次の例をみたら、FORTRAN のベテランは赤面するかもしれません。
	    この FORTRAN テキストフィルタは、
	    プレインテキストを直接印字できるすべてのプリンタで利用できます。
	    このフィルタをプリンタ <code class="literal">teak</code>
	    にインストールすることにしましょう。</p><pre class="programlisting">#!/bin/sh
#
# hprf - FORTRAN text filter for LaserJet 3si:
# Installed in /usr/local/libexec/hprf
#

printf "\033&amp;k2G" &amp;&amp; fpr &amp;&amp; printf "\033&amp;l0H" &amp;&amp; exit 0
exit 2</pre><p>そして、このフィルタを使用可能にするため、以下の行を
	    <code class="filename">/etc/printcap</code> のプリンタ
	    <code class="literal">teak</code> のエントリに加えます。</p><pre class="programlisting">:rf=<code class="filename">/usr/local/libexec/hprf</code>:</pre><p>これが最後の、そして、若干複雑な例です。前に紹介した
	    LaserJet プリンタ <code class="literal">teak</code> に、DVI
	    フィルタを加える ことにしましょう。最初に、
	    簡単な部分をおこないます。すなわち、DVI フィルタの位置を
	    <code class="filename">/etc/printcap</code> に書き加えます。
	  </p><pre class="programlisting">:df=<code class="filename">/usr/local/libexec/hpdf</code>:</pre><p>さて、難しい部分であるフィルタの作成をおこないます。
	    このために、DVI から LaserJet/PCL
	    への変換プログラムが必要です。FreeBSD の Ports Collection
            (<a class="link" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">Ports Collection</a>
	    を参照してください) には、それがあります。
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/dvi2xx/pkg-descr">dvi2xx</a> というのがその port の名前です。
	    これをインストールすると、必要なプログラム
	    <code class="command">dvilj2p</code> が使えます。このプログラムは
	    DVI を LaserJet IIp、LaserJet III、そして LaserJet 2000
	    の互換コードへ変換してくれます。</p><p><code class="command">dvilj2p</code> はフィルタ
	    <code class="command">hpdf</code> を極めて複雑にしています。
	    なぜなら、<code class="command">dvilj2p</code>
	    は標準入力からデータを読み込むことができないからです。
	    このプログラムを働かせるためには、ファイル名が必要です。
	    もっと悪いことに、ファイル名は <code class="filename">.dvi</code>
	    で終わっている必要があり、標準入力の代わりに、
	    <code class="filename">/dev/fd/0</code> を使うのは問題があります。
	    この問題は、(<code class="filename">.dvi</code> で終わる)
	    一時的なファイル名から<code class="filename">/dev/fd/0</code> に
	    (シンボリックな) リンクを張る
	    ことで回避することができます。これで、
	    <code class="command">dvilj2p</code>
	    に強制的に標準入力からデータを読み込ませることができます。</p><p>もう1つの問題は、一時的なリンクを張るために
	    <code class="filename">/tmp</code>
	    ディレクトリを使うことができないという事実です。
	    シンボリックリンクはユーザ、グループが <code class="systemitem">bin</code>
	    であるユーザに所有されています。フィルタはユーザ
	    <code class="systemitem">daemon</code> として起動します。そして、
	    <code class="filename">/tmp</code>
	    ディレクトリはスティッキービットが立っています。
	    フィルタはリンクを作ることができます。しかし、
	    リンクは別のユーザに所有されているため、
	    作業が終了したとき、このリンクを削除することができません。</p><p>その代わりに、シンボリックリンクは現在の作業ディレクトリ、
	    すなわち、スプーリングディレクトリ
	    (<code class="filename">/etc/printcap</code> の
	    <code class="literal">sd</code> 項目で指定する) に作ることにします。
	    フィルタが作業するにはここの場所は完璧な場所で、なぜなら、
	    特に、スプーリングディレクトリのディ スクの空き容量は
	    (ときどき) <code class="filename">/tmp</code>
	    ディレクトリよりもたくさんあるからです。</p><p>以下に示すのが最後のフィルタです。</p><pre class="programlisting">#!/bin/sh
#
#  hpdf - Print DVI data on HP/PCL printer
#  Installed in /usr/local/libexec/hpdf

PATH=/usr/local/bin:$PATH; export PATH

#
#  Define a function to clean up our temporary files.  These exist
#  in the current directory, which will be the spooling directory
#  for the printer.
#
cleanup() {
   rm -f hpdf$$.dvi
}

#
#  Define a function to handle fatal errors: print the given message
#  and exit 2.  Exiting with 2 tells LPD to do not try to reprint the
#  job.
#
fatal() {
    echo "$@" 1&gt;&amp;2
    cleanup
    exit 2
}

#
#  If user removes the job, LPD will send SIGINT, so trap SIGINT
#  (and a few other signals) to clean up after ourselves.
#
trap cleanup 1 2 15

#
#  Make sure we are not colliding with any existing files.
#
cleanup

#
#  Link the DVI input file to standard input (the file to print).
#
ln -s /dev/fd/0 hpdf$$.dvi || fatal "Cannot symlink /dev/fd/0"

#
#  Make LF = CR+LF
#
printf "\033&amp;k2G" || fatal "Cannot initialize printer"

#
#  Convert and print.  Return value from dvilj2p does not seem to be
#  reliable, so we ignore it.

#
dvilj2p -M1 -q -e- dfhp$$.dvi

#
#  Clean up and exit
#
cleanup
exit 0</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-autoconv"></a>10.4.1.4.5. 自動変換: その他の変換フィルタ</h5></div></div></div><p>ここまでに述べてきたフィルタによって、
	    印字環境の能率が上がったことと思います。しかし、
	    これはどのフィルタを使うかを (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> のコマンドライン上で)
	    ユーザが指定しなくてはならないという代価を支払って実現されています。
	    コンピュータの事情にあまり詳しくないユーザにとって、
	    フィルタのオプションを指定させられるということは
	    いらいらさせられるものになるでしょう。更に悪いことに、
	    間違ったフィルタオプションを指定されると、
	    間違った形式のファイルがそのフィルタに適用されることになり、
	    その結果、何百枚もの紙を吐き出すことになるかもしれません。</p><p>そのような結果になるならば、
	    変換フィルタをインストールするよりもむしろ、
	    テキストフィルタ (これがデフォルトフィルタなので)
	    に印字するよう要求されたファイルの形式を検出させ、自動的に、
	    適切な変換フィルタを起動するようにしたいと思うかもしれません。
	    ここでは <code class="command">file</code>
	    コマンドのようなツールを役立たせることができます。
	    もちろん、<span class="emphasis"><em>いくつかの</em></span>
	    ファイル形式の違いを見分けることは難しいことでしょう。
	    そして、もちろん、それらのファイルに対しては、
	    変換フィルタを提供するだけで済ますこともできるのです。</p><a id="idp84801872" class="indexterm"></a><a id="idp84802384" class="indexterm"></a><p>FreeBSD Ports Collection には、<code class="command">apsfilter</code>
	    (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/print/apsfilter/pkg-descr">print/apsfilter</a>)
	    と呼ばれる自動変換をおこなうテキストフィルタがあります。
	    このフィルタは プレインテキスト、<span class="trademark">PostScript</span>®, DVI
	    など、ほとんどすべてのファイル形式を検出し、適当な変換をおこなった後、
	    データを印字することができます。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-of"></a>10.4.1.5. 出力フィルタ</h4></div></div></div><p><span class="application">LPD</span> スプーリングシステムでは、
	  ここまでにまだ取り上げていないフィルタ形式、
	  出力フィルタをサポートしています。出力フィルタは、
	  テキストフィルタのように、
	  プレインテキストのみを印字するために意図されたものですが、
	  非常に簡単化されています。テキストフィルタを用いずに、
	  出力フィルタを使っている場合は、次のようになります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">LPD</span>
	      はジョブ中の各ファイルに一度ではなく、
	      ジョブ全体に対して一度だけ出力フィルタを起動します。</p></li><li class="listitem"><p><span class="application">LPD</span> は出力フィルタに対し、
	      ジョブ中のファイルの先頭や末尾を特定するための対策を
	      一切おこなっていません。</p></li><li class="listitem"><p><span class="application">LPD</span>
	      はユーザのログイン名やホスト名をフィルタに渡しません。
	      したがって、課金の処理をおこなうことは考えていません。
	      実際、出力フィルタには、以下2つの引数しか与えられません。</p><div class="cmdsynopsis"><p><code class="command">filter-name</code>  -w<em class="replaceable"><code>width</code></em>   -l<em class="replaceable"><code>length</code></em> </p></div><p>ここで、<em class="replaceable"><code>width</code></em>
	      は対象となるプリンタの <code class="literal">pw</code> 項目、
	      <em class="replaceable"><code>length</code></em> は
	      <code class="literal">pl</code> 項目に指定された数です。</p></li></ul></div><p>出力フィルタの簡便さに誘惑されてはいけません。もし、
	  ジョブ中のそれぞれのファイルに別のページ番号を付加しようとしても、
	  出力フィルタは<span class="emphasis"><em>うまく動作しないでしょう</em></span>。
	  そのような動作を期待しているならば、
	  (入力フィルタとしても知られている) テキストフィルタを使ってください。
	  詳しくは、「<a class="link" href="#printing-textfilter" title="10.3.1.5.6. テキストフィルタのインストール">
	    テキストフィルタのインストール</a>」をご覧ください。
	  さらに、出力フィルタは、実のところ、
	  <span class="emphasis"><em>もっと複雑</em></span>になっています。まず、
	  特殊なフラグ文字を検出するために、
	  フィルタに送られてくるバイトストリームを検査する必要があります。
	  また、<span class="application">LPD</span> に代わって、
	  自分自身にシグナルを送らなければなりません。</p><p>しかしながら、ヘッダページの印字をおこないたくて、
	  エスケープシーケンスやヘッダページを印字できるようにするその他の初期化文字列を送信する必要がある場合は、
	  出力ファイルが<span class="emphasis"><em>必要</em></span>です。
	  (しかし、
	  ヘッダページを要求したユーザに対して課金しようとするのもまた無駄なことです。
	  <span class="application">LPD</span>
	  は出力フィルタにユーザやホストの情報を渡しません)。</p><p>1 台のプリンタに対し、<span class="application">LPD</span>
	  では出力フィルタとテキストやその他のフィルタを両方使うことができます。
	  このような場合、<span class="application">LPD</span> はヘッダページ (「<a class="link" href="#printing-advanced-header-pages" title="10.4.2. ヘッダページ">
	    ヘッダページ</a>」 を参照してください)
	  だけを印字させるために、出力フィルタを起動させます。
	  それから <span class="application">LPD</span> では、出力フィルタに 2 バイトの文字
	  (ASCII 031 の次に ASCII 001) を送ることで、
	  出力フィルタが<span class="emphasis"><em>自分自身を停止する</em></span>ことを期待しています。
	  2 バイト (031, 001) が出力フィルタに送られたとき、
	  出力フィルタは自分自身にシグナル <code class="literal">SIGSTOP</code>
	  を送ることによって停止するはずです。
	  <span class="application">LPD</span> がその他のフィルタを動かし終わると、
	  出力フィルタにシグナル <code class="literal">SIGCONT</code>
	  を送って、出力フィルタを再起動します。</p><p>出力フィルタがあり、
	  テキストフィルタが<span class="emphasis"><em>ない</em></span>場合、
	  <span class="application">LPD</span>
	  はプレインテキストジョブを扱う場合に、
	  出力フィルタを使います。前述したように、出力フィルタでは、
	  ジョブ中の各ファイルの間に
	  FORM FEED 文字や紙を送る他の文字を入れることはしません。
	  この動作は多分、
	  あなたが求めているものとは<span class="emphasis"><em>異なっている</em></span>でしょう。
	  ほとんどの場合において、テキストフィルタが必要なはずです。</p><p>プログラム <code class="command">lpf</code> は、
	  テキストフィルタの項で既に紹介しましたが、
	  出力フィルタとしても動作させることができます。もし、
	  簡便で極悪な出力フィルタが必要で、かつ、
	  バイトストリームを検査したりシグナルを送るコードを書きたくないときには、
	  <code class="command">lpf</code> をお試しください。
	  あるいは、プリントが要求する初期化コードを送るために、
	  <code class="command">lpf</code>
	  をシェルスクリプトに包んで使うこともできます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-lpf"></a>10.4.1.6. テキストフィルタ <code class="command">lpf</code></h4></div></div></div><p>プログラム <code class="filename">/usr/libexec/lpr/lpf</code> は、
	  FreeBSD の バイナリ配布に付属しているテキストフィルタ
	  (入力フィルタ) で、出力を字下げしたり (<code class="command">lpr
	    -i</code> でジョブが入力さ れたとき)、
	  文字を未処理のままプリンタに送ったり (<code class="command">lpr
	    -l</code> でジョブが入力されたとき)、
	  ジョブ中のバックスペースやタブの印字位置を調節したり、
	  印字したページに対して課金したりすることができます。また、
	  このフィルタは出力フィルタとしても動作させることができます。</p><p><code class="command">lpf</code>
	  フィルタは多くの印字環境において使用することに適しています。
	  このフィルタには、プリンタに初期化文字列を送る機能はありませんが、
	  必要とされる初期化をおこない、それから
	  <code class="command">lpf</code>
	  を実行させるためのシェルスクリプトを作成するのはたやすいことです。
	  </p><a id="idp84857808" class="indexterm"></a><a id="idp84858320" class="indexterm"></a><p><code class="command">lpf</code> に対して、
	  印字ページへの課金を正確におこなわせるためには、
	  <code class="filename">/etc/printcap</code> ファイルの中の
	  <code class="literal">pw</code> と <code class="literal">pl</code>
	  の項目に正確な値を入れておく必要があります。これらの値は、
	  どのくらいの量のテキストがページにフィットするか、また、
	  ユーザのジョブが何ページあるのかを調べるために使われます。
	  プリンタの課金についての詳しい情報については、「<a class="link" href="#printing-advanced-acct" title="10.4.5. プリンタの利用に対する課金">
	    プリンタの利用に対する課金</a>」をご覧ください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-header-pages"></a>10.4.2. ヘッダページ</h3></div></div></div><p>あなたが管理するシステムのユーザが
	<span class="emphasis"><em>たくさん</em></span>おり、
	ユーザ全員が様々なプリンタを使用する場合、多分、
	必要悪である<span class="emphasis"><em>ヘッダページ</em></span>を
	印字させることを検討したいと思うかもしれません。</p><a id="idp84868176" class="indexterm"></a><a id="idp84869328" class="indexterm"></a><p>ヘッダページは、<span class="emphasis"><em>バナー</em></span> とか
	<span class="emphasis"><em>バーストページ</em></span> としても知られていますが、
	出力されたジョブが誰によるものなのかを特定させる働きがあります。
	印字結果の山の中において、
	ユーザのジョブによって印字された本物のドキュメント部分よりも際立たせるために、
	ヘッダページは、通常、多分、縁が装飾されている大きな太文字で印字されます。
	ヘッダページにより、
	ユーザは自分が出したジョブがどこにあるのかをすばやく見つけることができます。
	ヘッダページの欠点は、明らかに、すべてのジョブに対して、
	紙が 1 枚余分に印字されるということです。
	この紙の有効期間は短く、2 〜 3 分も続きません。最終的に、
	これらの紙は再利用紙入れの中かくずの山に入れられることでしょう
	(ヘッダページはジョブ中の各ファイル毎に印字されるのではなく、
	ジョブ毎に印字されるということに注意してください。したがって、
	紙の消費はそれほどひどくはないかもしれません)。</p><p><span class="emphasis"><em>もし</em></span>、
	プリンタがプレインテキストを直接印字できるならば、<span class="application">LPD</span>
	システムは印字物に対して自動的にヘッダページを付けることができます。
	<span class="trademark">PostScript</span>® プリンタを使っている場合は、
	ヘッダページを生成する外部プログラムが必要になります。これについては、
	「<a class="link" href="#printing-advanced-header-pages-ps" title="10.4.2.4. PostScript® プリンタでのヘッダページ"><span class="trademark">PostScript</span>®
	  プリンタでのヘッダページ</a>」をご覧ください。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-header-pages-enabling"></a>10.4.2.1. ヘッダページの印字を許可する</h4></div></div></div><p>「<a class="link" href="#printing-simple" title="10.3.1. プリンタ設定導入編">プリンタ設定導入編
	  </a>」節では、<code class="filename">/etc/printcap</code>
	  ファイルの <code class="literal">sh</code> (``suppress header'' :
	  <span class="quote">「<span class="quote">ヘッダを供給しない</span>」</span> という意味) を指定して、
	  ヘッダページの印字を止めていました。
	  プリンタでのヘッダページの印字を許可するには、
	  <code class="literal">sh</code> 項目を取り除くだけでよいのです。</p><p>とても簡単そうに見えるけど、本当かな?</p><p>それは本当です。
	  プリンタに初期化文字列を送るための
	  出力フィルタを用意しなくてはならないかもしれません。次に、Hewlett
	  Packard PCL 互換プリンタの例を挙げます。</p><pre class="programlisting">#!/bin/sh
#
#  hpof - Output filter for Hewlett Packard PCL-compatible printers
#  Installed in /usr/local/libexec/hpof


printf "\033&amp;k2G" || exit 2
exec /usr/libexec/lpr/lpf</pre><p><code class="literal">of</code>
	  項目に出力フィルタのパス名を指定してください。
	  詳細については、「<a class="link" href="#printing-advanced-of" title="10.4.1.5. 出力フィルタ">出力フィルタ</a>」節
	  をご覧ください。</p><p>次に、以前紹介したプリンタ <code class="literal">teak</code>
	  のための <code class="filename">/etc/printcap</code>
	  ファイルの例を示します。ここでは、
	  ヘッダページの印字を許可し、上記の出力フィルタを追加しました。
	</p><pre class="programlisting">#
#  /etc/printcap for host orchid
#
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=<code class="filename">/dev/lpt0</code>:sd=<code class="filename">/var/spool/lpd/teak</code>:mx#0:\
        :if=<code class="filename">/usr/local/libexec/hpif</code>:\
        :vf=<code class="filename">/usr/local/libexec/hpvf</code>:\
        :of=<code class="filename">/usr/local/libexec/hpof</code>:</pre><p>さて、ユーザが <code class="literal">teak</code>
	  からジョブを印字させたとき、
	  それぞれのジョブ毎にヘッダページが印字されます。
	  もし、ユーザが印字物を探すのに時間を費やしたいと思うなら、
	  <code class="command">lpr -h</code> によってジョブを入力することで、
	  ヘッダページの印字を止めることができます。
	  これ以外の
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> のオプションについては、
	  「<a class="link" href="#printing-lpr-options-misc" title="10.5.4.3. ヘッダページ用オプション">
	    ヘッダページ用オプション</a>」節をご覧ください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">LPD</span> では、ヘッダページの最後に、
	    FORM FEED 文字が印字されます。
	    プリンタに紙排出をさせるために、別な文字、
	    もしくは、別な文字列が利用されている場合は、
	    <code class="filename">/etc/printcap</code> 中の
	    <code class="literal">ff</code> 項目で指定することができます。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-header-pages-controlling"></a>10.4.2.2. ヘッダページを制御する</h4></div></div></div><p>ヘッダページの印字が許可されていると、<span class="application">LPD</span> は
	  <span class="emphasis"><em>長いヘッダ</em></span>を作ります。これには、
	  紙全面に大きな文字でユーザ名、ホスト名、
	  ジョブ名が書かれています。次に、このヘッダページの例を示
	  します (<code class="systemitem">kelly</code> がジョブ名
	  <span class="quote">「<span class="quote">outline</span>」</span> を <code class="systemitem">rose</code>
	  というホストから印字 された場合)。</p><pre class="screen">      k                   ll       ll
      k                    l        l
      k                    l        l
      k   k     eeee       l        l     y    y
      k  k     e    e      l        l     y    y
      k k      eeeeee      l        l     y    y
      kk k     e           l        l     y    y
      k   k    e    e      l        l     y   yy
      k    k    eeee      lll      lll     yyy y
                                               y
                                          y    y
                                           yyyy


                                   ll
                          t         l        i
                          t         l
       oooo    u    u   ttttt       l       ii     n nnn     eeee
      o    o   u    u     t         l        i     nn   n   e    e
      o    o   u    u     t         l        i     n    n   eeeeee
      o    o   u    u     t         l        i     n    n   e
      o    o   u   uu     t  t      l        i     n    n   e    e
       oooo     uuu u      tt      lll      iii    n    n    eeee









      r rrr     oooo     ssss     eeee
      rr   r   o    o   s    s   e    e
      r        o    o    ss      eeeeee
      r        o    o      ss    e
      r        o    o   s    s   e    e
      r         oooo     ssss     eeee







                                              Job:  outline
                                              Date: Sun Sep 17 11:04:58 1995</pre><p><span class="application">LPD</span> はこのテキストの終わりに
	  FORM FEED 文字を加えます
	  ので、ジョブは新しいページから開始されます (ただし、
	  <code class="filename">/etc/printcap</code>
	  で出力先のプリンタのエントリに <code class="literal">sf</code>
	  (suppress form feeds) が指定されているときはこ
	  の限りではありません)。</p><p>お望みならば、<span class="application">LPD</span>
	  に<span class="emphasis"><em>短いヘッダページ</em></span>を出力させることもできます。
	  この場合は、
	  <code class="filename">/etc/printcap</code> ファイルの中で
	  <code class="literal">sb</code> (short banner) を指定してください。
	  ヘッダページは次のようになります。</p><pre class="screen">rose:kelly  Job: outline  Date: Sun Sep 17 11:07:51 1995</pre><p>デフォルトでは、<span class="application">LPD</span>
	  はヘッダページを最初に印字し、次にジョブの印字をおこないます。
	  この順番を逆にするときは、
	  <code class="filename">/etc/printcap</code> で <code class="literal">hl</code>
	  (header last) を指定してください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-header-pages-accounting"></a>10.4.2.3. ヘッダページに対する課金</h4></div></div></div><p><span class="application">LPD</span>
	  に備わっているヘッダページ出力機能を使うと、
	  入力されたジョブに対して課金をおこなうことができても、
	  ヘッダページは<span class="emphasis"><em>無料</em></span>で提供しなくてはならない、
	  という特有のやり方を強要されます。</p><p>なぜでしょうか。</p><p>出力フィルタは単なる外部プログラムなので、
	  課金をするための制御をおこなうとすれば、
	  それはヘッダページを印字するときですが、出力フィルタには、
	  <span class="emphasis"><em>ユーザ名とホスト名</em></span>
	  の情報や課金情報を格納するファイルがどれな
	  のかということが知らされません。それゆえ、出力ファイルには、
	  誰にプリンタ利用の課金をおこなえばよいのかが分からないのです。
	  テキストフィルタやその他の変換フィルタ
	  (これらのフィルタはユーザやホストの情報が知らされます)
	  が出力ページの枚数に <span class="quote">「<span class="quote">1 ページ分水増しする</span>」</span> だけでは十分ではありません。
          なぜなら、ユーザは
	  <code class="command">lpr -h</code> に
	  よってヘッダページの出力を止めることができるからです。
	  やみくもに 1 ページを水増しすると、
	  印字されてもいないヘッダページに対する
	  料金をとることになります。基本的に、<code class="command">lpr
	   -h</code> は環境に優しい心を持つユーザに好まれるオプションですが、
	  これを使うように奨励することもできません。</p><p>各々のフィルタに独自のヘッダページを生成させる
	  (その結果、ヘッダページに課金することができる)
	  という方法<span class="emphasis"><em>でも十分であるとはいえません</em></span>。
	  この場合、<span class="application">LPD</span> はフィルタに
	  <code class="option">-h</code> の情報を送りませんので、<code class="command">lpr
	    -h</code>
	  によってヘッダページを印字しないオプションを選択したとしても、
	  依然としてヘッダページは印字され、
	  その分の課金がおこなわれてしまいます。</p><p>では、どのような選択肢があるのでしょうか。</p><p>ヘッダページへの課金に関しては、
	  次のことができます。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">LPD</span> のやり方を受け入れ、
	      ヘッダページは無料とする。</p></li><li class="listitem"><p><span class="application">LPRng</span> などの
	      <span class="application">LPD</span> の代替品をインストールする。
	      <span class="application">LPD</span>
	      と入れ替えが可能な他のスプーリングソフトウェアに関しては、
              <a class="link" href="#printing-lpd-alternatives" title="10.6. 標準スプーラの代替品">標準スプーラの代替品</a>
              をご覧ください。</p></li><li class="listitem"><p><span class="emphasis"><em>スマートな</em></span>
	      出力フィルタを作成する。通常、
	      出力フィルタはプリンタを初期化するか、
	      単純な文字列変換をする程度の働きしかしません。
	      (テキスト (入力) フィルタがない場合)
	      出力フィルタはヘッダページとプレインテキストの印字をおこなうのに適しています。

	      プレインテキストを印字するためのテキストフィルタがない場合、
	      <span class="application">LPD</span>
	      はヘッダページを印字するためだけの目的で出力フィルタを起動します。
	      そして、<span class="application">LPD</span>
	      が生成するヘッダページのテキストを解析することにより、
	      出力フィルタはヘッダページに課金するために必要なユーザ名と
	      ホスト名を取得することができます。この方式の唯一の問題点は、
	      出力フィルタは課金情報を格納するデータファイルの名前を知ることが
	      できないということです
	      (<code class="literal">af</code> 項目で指定されたファイル名は
	      出力ファイルに渡されません)。しかし、既知の
	      名前の課金データファイルを使うのならば、
	      その名前を出力フィルタのプログラム中に埋め込むことができます。

	      解析の手順を簡単にするためには、
	      <code class="filename">/etc/printcap</code>
	      で <code class="literal">sh</code> 項目
	      (短いヘッダを指定) を使うとよいでしょう。

	      そしてまた、
	      ここまでの方法は少なからぬトラブルを生じさせるかもしれません。
	      そうなれば、もちろんユーザはヘッダページを無料で
	      提供してくれる気前のよいシステム管理者に感謝することでしょう。
	    </p></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-header-pages-ps"></a>10.4.2.4. <span class="trademark">PostScript</span>® プリンタでのヘッダページ</h4></div></div></div><p>これまでに述べたように、<span class="application">LPD</span>
	  ではプレインテキストのヘッダページをたくさんのプリンタに合うように生成することができます。
	  残念ながら、<span class="trademark">PostScript</span>® プリンタは、
	  プレインテキストを直接印字することができません。ですから、
	  <span class="application">LPD</span> のヘッダページ機能はまったく、
	  あるいはほとんどの場合、役に立ちません。</p><p>ヘッダページを出力するための自明な方法の1つに、
	  すべての変換フィルタとテキストフィルタにヘッダページを生成させる方法があります。
	  フィルタは、
	  適切なヘッダページを生成するために、
	  ユーザ名とホスト名の引数を使うべきです。この方法の欠点は、いつでも、
	  <code class="command">lpr -h</code>
	  によってジョブが入力された場合でさえも、
	  ヘッダページが印字されるということです。</p><p>この方法で試してみましょう。次のスクリプトは、3 つの引数
	  (ユーザ のログイン名、ホスト名、ジョブ名) をとり、簡単な
	  <span class="trademark">PostScript</span>® 用 のヘッダページを生成します。</p><pre class="programlisting">#!/bin/sh
#
#  make-ps-header - make a PostScript header page on stdout
#  Installed in /usr/local/libexec/make-ps-header
#

#
#  These are PostScript units (72 to the inch).  Modify for A4 or
#  whatever size paper you are using:
#
page_width=612
page_height=792
border=72

#
#  Check arguments
#
if [ $# -ne 3 ]; then
    echo "Usage: `basename $0` &lt;user&gt; &lt;host&gt; &lt;job&gt;" 1&gt;&amp;2
    exit 1
fi

#
#  Save these, mostly for readability in the PostScript, below.
#
user=$1
host=$2
job=$3
date=`date`

#
#  Send the PostScript code to stdout.
#
exec cat &lt;&lt;EOF
%!PS

%
%  Make sure we do not interfere with user's job that will follow
%
save

%
%  Make a thick, unpleasant border around the edge of the paper.
%
$border $border moveto
$page_width $border 2 mul sub 0 rlineto
0 $page_height $border 2 mul sub rlineto
currentscreen 3 -1 roll pop 100 3 1 roll setscreen
$border 2 mul $page_width sub 0 rlineto closepath
0.8 setgray 10 setlinewidth stroke 0 setgray

%
%  Display user's login name, nice and large and prominent
%
/Helvetica-Bold findfont 64 scalefont setfont
$page_width ($user) stringwidth pop sub 2 div $page_height 200 sub moveto
($user) show

%
%  Now show the boring particulars
%
/Helvetica findfont 14 scalefont setfont
/y 200 def
[ (Job:) (Host:) (Date:) ] {
200 y moveto show /y y 18 sub def
} forall

/Helvetica-Bold findfont 14 scalefont setfont
/y 200 def
[ ($job) ($host) ($date) ] {
        270 y moveto show /y y 18 sub def
} forall

%
%  That is it
%
restore
showpage
EOF</pre><p>そして、変換フィルタやテキストフィルタがそれぞれ、
	  最初にこのスクリプトを起動することで、
	  ヘッダページが出力され、それから、
	  ユーザのジョブの印字をおこないます。次に、
	  このドキュメントの始めのほうで紹介した DVI 変換フィルタを、
	  ヘッダページを印字するように変更したものを示します。</p><pre class="programlisting">#!/bin/sh
#
#  psdf - DVI to PostScript printer filter
#  Installed in /usr/local/libexec/psdf
#
#  Invoked by lpd when user runs lpr -d
#

orig_args="$@"

fail() {
    echo "$@" 1&gt;&amp;2
    exit 2
}

while getopts "x:y:n:h:" option; do
    case $option in
        x|y)  ;; # Ignore
        n)    login=$OPTARG ;;
        h)    host=$OPTARG ;;
        *)    echo "LPD started `basename $0` wrong." 1&gt;&amp;2
              exit 2
              ;;
    esac
done

[ "$login" ] || fail "No login name"
[ "$host" ] || fail "No host name"

( /usr/local/libexec/make-ps-header $login $host "DVI File"
  /usr/local/bin/dvips -f ) | eval /usr/local/libexec/lprps $orig_args</pre><p>このフィルタがユーザ名やホスト名を決定するために
	  引数リストをどのように解析しなくてはならないかという点に注意してください。
	  この解析方法は他の変換フィルタに対しても同様です。
	  しかしながら、テキストフィルタについては、
	  引数の設定が少し異なっています (これについては、「<a class="link" href="#printing-advanced-filters" title="10.4.1.1. フィルタはどのように機能しているか">
	    フィルタはどのように機能しているか</a>」
	  をご覧ください)。</p><p>前述の通り、上記の手法は、極めて単純なのにも関らず、
	  <code class="literal">lpr</code>
	  で <span class="quote">「<span class="quote">ヘッダページを印字しない</span>」</span> オプション
	  (<code class="option">-h</code> オプション) が使えなくなっています。
	  ユーザが森林資源を (あるいは、
	  ヘッダページが課金されているならば、その僅かな金額を)、
	  節約したいと望んでいる場合でも、
	  すべてのフィルタがすべてのジョブ毎にヘッダページを印字
	  することになっているので、節約することはできません。</p><p>ジョブ毎に印字されるヘッダページを
	  ユーザが抑制できるようにするためには、「<a class="link" href="#printing-advanced-header-pages-accounting" title="10.4.2.3. ヘッダページに対する課金">
	    ヘッダページに対する課金</a>」で紹介したトリックを
	  使う必要があります。すなわち、LPD
	  が生成するヘッダページの解析をおこない、<span class="trademark">PostScript</span>®
	  版のヘッダページを出力させる出力フィルタを作るのです。
	  この場合、ユーザが <code class="command">lpr -h</code> でジョブを入力すると、
	  <span class="application">LPD</span> はヘッダページを生成しなくなり、また、
	  出力フィルタも起動されません。そうでないならば、
	  作成した出力フィルタが <span class="application">LPD</span>
	  からのテキストを読み込み、ヘッダページを印字する適当な
	  <span class="trademark">PostScript</span>® のコードがプリンタに送られるでしょう。</p><p><span class="trademark">PostScript</span>® プリンタがシリアルポートに接続されている場合、
	  出力フィルタとして <code class="command">lprps</code> を、
	  上記の動作をおこなうものとして <code class="command">psof</code>
	  を使うことができます。ただし、<code class="command">psof</code>
	  はヘッダページに対して課金をおこないませんので注意してください。
	</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-network-printers"></a>10.4.3. リモートプリンタからの出力</h3></div></div></div><a id="idp84946000" class="indexterm"></a><a id="idp84947152" class="indexterm"></a><p>FreeBSD では、ネットワーク越しの印字、すなわち、
	ジョブをリモートプリンタに送ることをサポートしています。
	リモートプリンタからの出力をするには、一般に、
	次の 2 つを参照してください。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>リモートホストに接続されたプリンタにアクセスする方法。
	    プリンタがあるホストのシリアル、
	    または、パラレルインタフェースに接続されている場合、
	    ネットワーク上の他のホストからこのプリンタにアクセスできるように
	    <span class="application">LPD</span> を設定します。「<a class="link" href="#printing-advanced-network-rm" title="10.4.3.1. リモートホストに接続されたプリンタ">リモートホストに
	      接続されたプリンタ</a>」
	    でどのようにするかを説明します。</p></li><li class="listitem"><p>ネットワークに直接接続されているプリンタにアクセスする方法。
	    プリンタに、旧来のシリアル、または、
	    パラレルインタフェースに加えて (もしくは、これらに代わって)
	    ネットワーク用のインタフェースがある場合。
	    そのようなプリンタは次のように動作するでしょう。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>そのプリンタが <span class="application">LPD</span>
		のプロトコルを理解でき、リモートホストからのジョブを
		キューに入れることさえできる場合。この場合、
		プリンタは、<span class="application">LPD</span>
		が起動している一般のホストのように振る舞います。
		そのようなプリンタを設定するために、
		「<a class="link" href="#printing-advanced-network-rm" title="10.4.3.1. リモートホストに接続されたプリンタ">
		  リモートホストに接続されたプリンタ</a>」
		と同様の手順をおこなってください。</p></li><li class="listitem"><p>そのプリンタが、
	        データストリームによるネットワーク接続をサポートしている場合。
		この場合、ネットワーク上の1つのホストとしてプリンタを
		<span class="quote">「<span class="quote">接続</span>」</span> します。
		このホストは、ジョブをスプーリングする責任を負い、
		スプーリングされたジョブはプリンタに送られます。
		そのようなプリンタをインストールするためのいくつかの提案が
		「<a class="link" href="#printing-advanced-network-net-if" title="10.4.3.2. ネットワークにおけるデータストリームの インタフェースを持つプリンタ">
		  ネットワークにおけるデータストリームの
		  インタフェースを持つプリンタ</a>」にあります。</p></li></ul></div></li></ul></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-network-rm"></a>10.4.3.1. リモートホストに接続されたプリンタ</h4></div></div></div><p><span class="application">LPD</span> スプーリングシステムでは
	  <span class="application">LPD</span>
	  (または <span class="application">LPD</span> 互換のシステム)
	  が起動している他のホストへジョブを送る機能が
	  始めからサポートされています。この機能により、
	  あるホストに接続されたプリンタへ、
	  他のホストからアクセスできるようになります。また、
	  <span class="application">LPD</span>
	  プロトコルを理解するネットワークインタフェースを持ったプリンタに対しても、
	  この機能は働きます。</p><p>リモートプリンタへの出力を許可するためには、最初に、
	  あるホスト (これを、
	  <span class="emphasis"><em>プリンタホスト</em></span>と呼びます)
	  にプリンタを接続します。そして、「<a class="link" href="#printing-simple" title="10.3.1. プリンタ設定導入編"> プリンタ設定導入編</a>」
	  に書かれた簡単なプリンタの設定をおこなってください。
	  必要ならば、「<a class="link" href="#printing-advanced" title="10.4. プリンタ設定上級編">プリンタ設定上級編</a>」
	  にある、更に進んだ設定をおこなってください。そして、
	  そのプリンタをテストしてうまく動作することを確認し、<span class="application">LPD</span>
	  に許可した機能がうまく働くかどうかを見てください。さらに
	  <span class="emphasis"><em>ローカルホスト</em></span>が
	  <span class="emphasis"><em>プリンタホスト</em></span>の <span class="application">LPD</span>
	  サービスの使用を許可されているか確認して下さい (「<a class="link" href="#printing-advanced-restricting-remote" title="10.4.4.4. リモートホストからの利用を制限する">
	    リモートホストからの利用を制限する
	  </a>」参照)。</p><a id="idp84974288" class="indexterm"></a><a id="idp84975440" class="indexterm"></a><p><span class="application">LPD</span>
	  互換のネットワークインタフェースを持つプリンタを使用している場合は、
	  そのプリンタ自身が以下で説明する
	  <span class="emphasis"><em>プリンタホスト</em></span>になります。そして、
	  <span class="emphasis"><em>プリンタ名</em></span>とは、
	  そのプリンタに設定した名前のことを指します。
	  これについては、プリンタ、および (または)、
	  プリンタのネットワークインタフェースに付属するドキュメントを参照してください。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">
            ヒューレット・パッカード社の Laserjet シリーズを使用している場合には、
            プリンタ名を <code class="literal">text</code> とすると、
            自動的に LF から CRLF への変換が行なわれます。
            そのため、<code class="filename">hpif</code> スクリプトは必要ありません。
          </p></div><p>次に、
	  そのプリンタにアクセスしたいと思っている他ホストにおいて、
	  そのホストの <code class="filename">/etc/printcap</code>
	  ファイルに次にあげるエントリを作ります。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>名前のエントリ。どんな名前でもよいのですが、簡単のため、多分、
	      プリンタホストで設定されたプリンタ名や別名と同じものを使いたいと思うでしょう。</p></li><li class="listitem"><p><code class="literal">lp</code>
	      項目で指定されるデバイスは明示的に空にします
	      (<code class="literal">:lp=:</code> とします)。</p></li><li class="listitem"><p>スプーリングディレクトリを作成し、
	      <code class="literal">sd</code> 項目でその位置を指定します。
	      <span class="application">LPD</span>
	      では、プリンタホストにジョブを送信するまでの間、
	      このディレクトリにジョブを格納します。</p></li><li class="listitem"><p><code class="literal">rm</code>
	      項目でプリンタホストの名前を指定します。</p></li><li class="listitem"><p><code class="literal">rp</code> 項目で
	      <span class="emphasis"><em>プリンタホスト</em></span>に接続したプリンタ名を指定します。</p></li></ol></div><p>これで終わりです。
	  変換フィルタやページの大きさやその他の事項を
	  <code class="filename">/etc/printcap</code>
	  に加える必要はありません。</p><p>次に、
	  リモートホストに接続されたプリンタで印字するための設定例を示します。
	  ホスト <code class="systemitem">rose</code> には 2 台のプリンタ
	  <code class="literal">bamboo</code> と <code class="literal">rattan</code>
	  が接続されています。これらのプリンタをホスト <code class="systemitem">orchid</code>
	  のユーザが使えるようにしましょう。最初に
	  <code class="systemitem">orchid</code> の
	  <code class="filename">/etc/printcap</code> を示します
	  (このファイルは、「<a class="link" href="#printing-advanced-header-pages-enabling" title="10.4.2.1. ヘッダページの印字を許可する">
	    ヘッダページの出力を許可する</a>」
	  で参照することができます)。このファイルには、既に、プリンタ
	  <code class="literal">teak</code> 用のエントリがありました。以下では、
	  これに、ホスト <code class="systemitem">rose</code>
	  にある2台のプリンタ用のエントリが加えられています。</p><pre class="programlisting">#
#  /etc/printcap for host orchid - added (remote) printers on rose
#

#
#  teak is local; it is connected directly to orchid:
#
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=<code class="filename">/dev/lpt0</code>:sd=<code class="filename">/var/spool/lpd/teak</code>:mx#0:\
        :if=<code class="filename">/usr/local/libexec/ifhp</code>:\
        :vf=<code class="filename">/usr/local/libexec/vfhp</code>:\
        :of=<code class="filename">/usr/local/libexec/ofhp</code>:

#
#  rattan is connected to rose; send jobs for rattan to rose:
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :lp=:rm=rose:rp=rattan:sd=<code class="filename">/var/spool/lpd/rattan</code>:

#
#  bamboo is connected to rose as well:
#
bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :lp=:rm=rose:rp=bamboo:sd=<code class="filename">/var/spool/lpd/bamboo</code>:</pre><p><code class="systemitem">orchid</code>
	  で必要となる作業はスプーリングディレクトリを作ることだけです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /var/spool/lpd/rattan /var/spool/lpd/bamboo</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 770 /var/spool/lpd/rattan /var/spool/lpd/bamboo</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown daemon:daemon /var/spool/lpd/rattan /var/spool/lpd/bamboo</code></strong></pre><p>これで、<code class="systemitem">orchid</code> のユーザが
	  <code class="literal">rattan</code> と <code class="literal">bamboo</code>
	  で印字することができるようになりました。
	  たとえば、<code class="systemitem">orchid</code> のユーザが次のように入力したとします。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lpr -P bamboo -d sushi-review.dvi</code></strong></pre><p>すると、<code class="systemitem">orchid</code> の
	  <span class="application">LPD</span> システムは、
	  ジョブをスプーリングディレクトリ
	  <code class="filename">/var/spool/lpd/bamboo</code>
	  にコピーし、これが
	  DVI ファイルを印字するジョブであることを記録します。
	  ホスト <code class="systemitem">rose</code> の <code class="literal">bamboo</code>
	  スプーリングディレクトリに十分な容量が確保でき次第、
	  両者の <span class="application">LPD</span> は、ジョブのファイルを
	  <code class="systemitem">rose</code> に転送します。
	  このファイルは、そのすべてが印字されるまで、<code class="systemitem">rose</code>
	  のキューに留まります。
	  (<code class="literal">bamboo</code> は <span class="trademark">PostScript</span>® プリンタなので)
	  DVI から <span class="trademark">PostScript</span>® への変換は
	  <code class="systemitem">rose</code> でおこなわれます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-network-net-if"></a>10.4.3.2. ネットワークにおけるデータストリームの
	  インタフェースを持つプリンタ</h4></div></div></div><p>プリンタのネットワークインタフェースカードは、
	  2 種類に分類することができます。
	  1 つはスプーラをエミュレートするもの (高価) で、もう 1
	  つはシリアルやパラレルポートを使うように
	  プリンタにデータを送ることができるだけのもの (安価) です。この節では、
	  後者の使い方を説明します。前者のプリンタは、前節「<a class="link" href="#printing-advanced-network-rm" title="10.4.3.1. リモートホストに接続されたプリンタ">
	    リモートホストに接続されたプリンタ</a>」
	  の方法が適用できます。</p><p><code class="filename">/etc/printcap</code> ファイルでは、
	  シリアルかパラレルのインタフェースのどちらを使うのか、
	  そして、(シリアルインタフェースを使う場合)
	  そのボーレートはいくらであるか、フロー制御は使うのか、
	  タブのための遅延を加えるのか、
	  改行文字を変換するかなどの指定をおこなうことができます。
	  しかし、TCP/IP や他のネットワークポートからデータを受け取るプリンタを
	  接続するための指定をおこなうことはでき ません。</p><p>ネットワーク接続されたプリンタにデータを送るためには、
	  テキストフィルタと変換フィルタから呼び出すことができる
	  通信プログラムを開発する必要があります。以下に、
	  そのようなプログラムの例を示します。スクリプト
	  <code class="command">netprint</code> では、
	  標準入力から印字データをすべて受け取り、
	  ネットワーク接続されたプリンタにこれを送ります。
	  <code class="command">netprint</code>
	  の最初の引数でプリンタのホスト名を、
	  2 番目の引数で接続するポート番号を指定します。
	  このプログラムでは単方向通信 (FreeBSD からプリンタ)
	  のみをサポートしていることに注意してください。
	  ネットワークプリンタの多くは双方向通信をサポートしていますので、
	  その恩恵 (プリンタの状態を得たり、
	  課金をおこなうなど) にあずかりたいと思われるかもしれません。
	</p><pre class="programlisting">#!/usr/bin/perl
#
#  netprint - Text filter for printer attached to network
#  Installed in /usr/local/libexec/netprint
#

$#ARGV eq 1 || die "Usage: $0 &lt;printer-hostname&gt; &lt;port-number&gt;";

$printer_host = $ARGV[0];
$printer_port = $ARGV[1];

require 'sys/socket.ph';

($ignore, $ignore, $protocol) = getprotobyname('tcp');
($ignore, $ignore, $ignore, $ignore, $address)
    = gethostbyname($printer_host);

$sockaddr = pack('S n a4 x8', &amp;AF_INET, $printer_port, $address);

socket(PRINTER, &amp;PF_INET, &amp;SOCK_STREAM, $protocol)
    || die "Can't create TCP/IP stream socket: $!";
connect(PRINTER, $sockaddr) || die "Can't contact $printer_host: $!";
while (&lt;STDIN&gt;) { print PRINTER; }
exit 0;</pre><p>このスクリプトは、
	  様々なフィルタが利用することができます。仮に、Diablo 750-N
	  ラインプリンタを持っており、
	  これがネットワークに接続されているとしましょう。
	  プリンタはポート番号 5100 にて印字するデータを受け取ります。
	  プリンタのホスト名は <code class="systemitem">scrivener</code> とします。このとき、
	  このプリンタのテキストフィルタは次のようになります。</p><pre class="programlisting">#!/bin/sh
#
#  diablo-if-net - Text filter for Diablo printer `scrivener' listening
#  on port 5100.  Installed in /usr/local/libexec/diablo-if-net
#

exec /usr/libexec/lpr/lpf "$@" | /usr/local/libexec/netprint scrivener 5100</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-restricting"></a>10.4.4. プリンタの利用に制約を与える</h3></div></div></div><a id="idp85032656" class="indexterm"></a><p>本節では、プリンタの利用に制約を与えるための情報を記しています。
	<span class="application">LPD</span> システムでは、プリンタ (ローカル、
	リモートのいずれに接続されていても)
	にアクセスできる人を制限する機能、
	複数部のコピーの印字の可否を制御する機能、
	ジョブのサイズの最大値やプリンタキューに入る
	ジョブの最大個数を制御する機能を提供しています。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-restricting-copies"></a>10.4.4.1. 複数部のコピーの印字を制限する</h4></div></div></div><p><span class="application">LPD</span>
	  システムではユーザが複数部のコピーの印字を簡単におこなう
	  機能を提供しています。ユーザが、(たとえば) <code class="command">lpr
	    -#5</code> コマンドを使ってジョブを印字すると、
	  ジョブのそれぞれのファイルのコピーを 5 部得ることができます。
	  これがよい機能であると思うかどうかは人それぞれでしょう。</p><p>複数部のコピーの印字によってプリンタが
	  必要以上に消耗してしまうと感じるならば、
	  <code class="filename">/etc/printcap</code>
	  ファイルに <code class="literal">sc</code>
	  項目を加えてください。これにより、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> の <code class="option">-#</code>
	  オプションの使用が禁止されます。
	  このオプションが指定されているにも関らず、
	  <code class="option">-#</code> オプションを使うと、
	  次のようなメッセージが表示され、
	  このオプションの利用できない旨を伝えます。</p><pre class="screen">lpr: multiple copies are not allowed</pre><p>リモートホストからプリンタをアクセスできる
	  設定にしている場合 (この 設定については、「<a class="link" href="#printing-advanced-network-rm" title="10.4.3.1. リモートホストに接続されたプリンタ">
	    リモートホストに接続されたプリンタ</a>」
	  をご覧ください)、そのリモートホストの
	  <code class="filename">/etc/printcap</code> にも同じように
	  <code class="literal">sc</code>
	  項目を追加する必要があることに注意してください。
	  そうしないと、ユーザは別なホストから複数部のコピーの
	  印字をすることができてしまいます。</p><p>例を使って説明しましょう。次に示す
	  <code class="filename">/etc/printcap</code> ファイルは、ホスト
	  <code class="systemitem">rose</code> のものです。プリンタ
	  <code class="literal">rattan</code> は極めて頑丈なので、
	  複数部のコピーの印字は許可されています。しかし、
	  レーザプリンタの <code class="literal">bamboo</code>
	  はもう少しデリケートで、
	  このプリンタから複数部のコピーを印字することを <code class="literal">sc</code>
	  項目を追加することで禁止しています。</p><pre class="programlisting">#
#  /etc/printcap for host rose - restrict multiple copies on bamboo
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=<code class="filename">/var/spool/lpd/rattan</code>:\
        :lp=<code class="filename">/dev/lpt0</code>:\
        :if=<code class="filename">/usr/local/libexec/if-simple</code>:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=<code class="filename">/var/spool/lpd/bamboo</code>:sc:\
        :lp=<code class="filename">/dev/ttyu5</code>:ms#-parenb cs8 clocal crtscts:rw:\
        :if=<code class="filename">/usr/local/libexec/psif</code>:\
        :df=<code class="filename">/usr/local/libexec/psdf</code>:</pre><p>さらに、orchid の <code class="filename">/etc/printcap</code>
	  にも </p><div class="literallayout"><p>sc</p></div><p>
	  項目を追加する必要があります (<code class="systemitem">orchid</code>
	  でこの編集をおこなっているときに、ついでに、プリンタ
	  <code class="literal">teak</code>
	  でも複数部のコピーの印字を禁止することにしましょう)。</p><pre class="programlisting">#
#  /etc/printcap for host orchid - no multiple copies for local
#  printer teak or remote printer bamboo

teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=<code class="filename">/dev/lpt0</code>:sd=<code class="filename">/var/spool/lpd/teak</code>:mx#0:sc:\
        :if=<code class="filename">/usr/local/libexec/ifhp</code>:\
        :vf=<code class="filename">/usr/local/libexec/vfhp</code>:\
        :of=<code class="filename">/usr/local/libexec/ofhp</code>:

rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :lp=:rm=rose:rp=rattan:sd=<code class="filename">/var/spool/lpd/rattan</code>:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :lp=:rm=rose:rp=bamboo:sd=<code class="filename">/var/spool/lpd/bamboo</code>:sc:</pre><p><code class="literal">sc</code> 項目を指定することにより、
	  <code class="command">lpr -#</code>
	  の使用を防ぐことができます。しかし、この状態では
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> を複数回起動したり、
	  1 回のジョブで次のように同じファイルを複数個指定することを防ぐまでには至っていません。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lpr forsale.sign forsale.sign forsale.sign forsale.sign forsale.sign</code></strong></pre><p>このような悪用を防ぐ方法は
	  (その指示を無視することも含めて) たくさんあります。
	  各自で調べてみてください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-restricting-access"></a>10.4.4.2. プリンタを使用できる人を限定する</h4></div></div></div><p>それぞれのプリンタを使用できる人を限定するには、<span class="trademark">UNIX</span>® の
	  グループ権限のメカニズムを利用し、さらに、
	  <code class="filename">/etc/printcap</code> で <code class="literal">rg</code>
	  項目を指定することでおこないます。
	  あるプリンタにアクセスさせてもよいと思うユーザすべてを
	  グループのどれかに入れてください。そして、
	  そのグループ名を <code class="literal">rg</code> で指定します。</p><p>このとき、そのグループに含まれないユーザ
	  (<code class="systemitem">root</code> も含みます)
	  がプリントしようとすると、次のようなメッセージが表示されます。</p><pre class="screen">lpr: Not a member of the restricted group</pre><p><code class="literal">sc</code> (suppress multiple copies :
	  複数部のコピーの印字を禁止する)
	  を指定するときと同様に、<code class="literal">rg</code>
	  が指定されたプリンタがリモートホストからもアクセスでき
	  (この設定については、
	  「<a class="link" href="#printing-advanced-network-rm" title="10.4.3.1. リモートホストに接続されたプリンタ">
	    リモートホストに接続されたプリンタ</a>」
	  をご覧ください)、かつ、
	  そのホストでもプリンタを使用できる人を限定するのが
	  妥当であると思う場合は、
	  そのホストの <code class="filename">/etc/printcap</code> にも
	  <span class="emphasis"><em>rg</em></span>
	  指定をおこなう必要があります。</p><p>たとえば、プリンタ <code class="literal">rattan</code>
	  は誰でも利用できるが、<code class="literal">bamboo</code> はグループ
	  <code class="systemitem">artists</code>
	  に属している人のみが利用できるようにしてみましょう。
	  以下に、もうお馴染みとなったホスト
	  <code class="systemitem">rose</code> の <code class="filename">/etc/printcap</code>
	  を示します。</p><pre class="programlisting">#
#  /etc/printcap for host rose - restricted group for bamboo
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=<code class="filename">/var/spool/lpd/rattan</code>:\
        :lp=<code class="filename">/dev/lpt0</code>:\
        :if=<code class="filename">/usr/local/libexec/if-simple</code>:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=<code class="filename">/var/spool/lpd/bamboo</code>:sc:rg=artists:\
        :lp=<code class="filename">/dev/ttyu5</code>:ms#-parenb cs8 clocal crtscts:rw:\
        :if=<code class="filename">/usr/local/libexec/psif</code>:\
        :df=<code class="filename">/usr/local/libexec/psdf</code>:</pre><p>これ以外の <code class="filename">/etc/printcap</code> ファイル
	  (ホスト <code class="systemitem">orchid</code> のもの)
	  はそのままにしておくことにします。もちろん、
	  <code class="systemitem">orchid</code> のユーザは全員
	  <code class="literal">bamboo</code> を利用することができます。これは、
	  <code class="systemitem">orchid</code>
	  には特定のユーザのみにしかアクセスさせておらず、
	  そのユーザにはプリンタを利用させたいと思っているからなのかもしれませんし、
	  そうでないかもしれません。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">1台のプリンタを複数グループのユーザに利用させることはできません。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-restricting-sizes"></a>10.4.4.3. 入力可能なジョブのサイズを制限する</h4></div></div></div><a id="idp85113040" class="indexterm"></a><p>たくさんのユーザからプリンタが利用される場合には、多分、
	  ユーザが印字要求を出すことができるファイルのサイズに
	  上限値を置く必要が生じるでしょう。結局のところ、
	  スプーリングディレクトリ
	  が置かれているファイルシステムの空き容量がその
	  上限値になる訳ですが、
	  あるユーザがこれを独占的に使用すること避けるために、
	  他ユーザからのジョブ用の空き容量を確保する必要もあります。</p><a id="idp85113936" class="indexterm"></a><p><span class="application">LPD</span> では、<code class="literal">mx</code>
	  項目を指定することにより、
	  ジョブ中の個々のファイルのサイズの上限値を制限する機能を提供しています。
	  指定される ファイルサイズの単位は BUFSIZ ブロックで、1
	  <code class="literal">BUFSIZ</code> ブロックは 1024バイトを表わします。この
	  <code class="literal">mx</code> 項目の値として 0 が指定されると、
	  ファイルサイズの制限はなくなります。
	  <code class="literal">mx</code> が指定されない場合は、
	  デフォルトの制限として 1000 ブロックが使われます。
	</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">この制限はジョブ中の各
	    <span class="emphasis"><em>ファイル</em></span>に対して適用されるものであり、
	    ジョブ全体のサイズ
	    を制限するものでは<span class="emphasis"><em>ありません</em></span>。</p></div><p>ところで、
	  プリンタに設定された上限値を超えるファイルサイズの
	  ファイルが入力された場合でも、<span class="application">LPD</span>
	  はこれを拒否しません。その代わりに、このファイルは、
	  その先頭から上限値のファイルサイズまでしかキューに入れられません。
	  そして、その部分までが印字され、
	  残りの部分は捨てられます。
	  これが正しい動作といえるのかどうかは議論の余地があるところです。</p><p>それでは、設定例に登場しているプリンタ
	  <code class="literal">rattan</code> と  <code class="literal">bamboo</code>
	  の印字可能なファイルサイズに制限を加えてみましょう。
	  <code class="systemitem">artists</code>
	  グループの人達が作る <span class="trademark">PostScript</span>® ファイルのサイズは
	  巨大になる傾向があるので、上限値を 5M バイトとします。
	  それから、
	  プレインテキスト用のラインプリンタは無制限とします。</p><pre class="programlisting">#
#  /etc/printcap for host rose
#

#
#  No limit on job size:
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:mx#0:sd=<code class="filename">/var/spool/lpd/rattan</code>:\
        :lp=<code class="filename">/dev/lpt0</code>:\
        :if=<code class="filename">/usr/local/libexec/if-simple</code>:

#
#  Limit of five megabytes:
#
bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=<code class="filename">/var/spool/lpd/bamboo</code>:sc:rg=artists:mx#5000:\
        :lp=<code class="filename">/dev/ttyu5</code>:ms#-parenb cs8 clocal crtscts:rw:\
        :if=<code class="filename">/usr/local/libexec/psif</code>:\
        :df=<code class="filename">/usr/local/libexec/psdf</code>:</pre><p>この場合もそうですが、この制限はローカル (ホスト rose)
	  のユーザのみに適用されます。
	  リモートホストからプリンタを利用できるように設定している場合は、
	  そのリモートホストのユーザはこの制限を受けません。
	  これらのユーザにも制限を加える場合は、リモートホストの
	  <code class="filename">/etc/printcap</code> の <code class="literal">mx</code>
	  を指定する必要があります。
	  リモートホストから印字するための詳しい情報については、
	  「<a class="link" href="#printing-advanced-network-rm" title="10.4.3.1. リモートホストに接続されたプリンタ">
	    リモートホストに接続されたプリンタ</a>」
	  を参照してください。</p><p>リモートホストに接続されたプリンタへのジョブの
	  サイズを制限する特別な方法は他にもあります。これについては、
	  「<a class="link" href="#printing-advanced-restricting-remote" title="10.4.4.4. リモートホストからの利用を制限する">
	    リモートホストからの利用を制限する</a>」
	  を参照してください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-restricting-remote"></a>10.4.4.4. リモートホストからの利用を制限する</h4></div></div></div><p><span class="application">LPD</span> スプーリングシステムでは、
	  リモートホストから要求されたジョブの印字を制限するための方法がいくつか提供されています。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">ホストの制限</span></dt><dd><p>ローカルの <span class="application">LPD</span>
		が印字要求を受け付けるリモートホストは、ファイル
		<code class="filename">/etc/hosts.equiv</code> と
		<code class="filename">/etc/hosts.lpd</code>
		によって制御することができます。<span class="application">LPD</span>
		では、あるホストから印字の要求がきたとき、
		このホストの名前がこれら 2 つのファイルのどちらかに含まれている
		かどうかを調べます。これが含まれていない場合は、<span class="application">LPD</span>
		はこの要求を拒否します。</p><p>これらのファイルの形式は単純です。
		各行にホストの名前を
		1つずつ書いていきます。ファイル
		<code class="filename">/etc/hosts.equiv</code> の方は
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ruserok&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">ruserok</span>(3)</span></a> プロトコルでも利用され、
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rsh</span>(1)</span></a> や <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rcp</span>(1)</span></a>
		といったプログラムの動作に影響するので注意が必要です。
		<code class="filename">/etc/hosts.equiv</code>
		の記述は慎重におこないましょう。</p><p>例として、以下にホスト <code class="systemitem">rose</code> の
		<code class="filename">/etc/hosts.lpd</code> を示します。
	      </p><pre class="programlisting">orchid
violet
madrigal.fishbaum.de</pre><p>この例では、<code class="systemitem">rose</code> はホスト
		<code class="systemitem">orchid</code>, <code class="systemitem">violet</code>
		そして <code class="systemitem">madrigal.fishbaum.de</code>
		からの要求を受け付けることになります。
		その他のホストが <code class="systemitem">rose</code> の
		<span class="application">LPD</span> にアクセスしようとしても、
		<span class="application">LPD</span> はそのジョブを拒否します
		(訳注: 拒否されるのは、そのホストが
		<code class="filename">/etc/hosts.equiv</code>
		にも含まれていない場合です)。</p></dd><dt><span class="term">サイズの制限</span></dt><dd><p>スプーリングディレクトリがある
		ファイルシステムに残しておく必要がある
		空き容量の大きさを制御することができます。
		ローカルプリンタ用のスプーリングディレクトリに
		<code class="filename">minfree</code>
		という名前のファイルを作成します。そして、
		そのファイルの中にリモートホストからのジョブの
		要求を受け付けるために必要な空き容量のディスクブロックサイズ
		(1 ディスクブロック = 512 バイト) を記します。</p><p>これで、
		リモートホストのユーザにファイルシステムを満杯にされないことが保証されます。
		この機能を使うと、
		ローカルホストのユーザに対してある種の優先権を与えることもできます。
		ローカルホストのユーザは、
		<code class="filename">minfree</code>
		ファイルで指定された値よりもディスクの空き容量が下回った後でもずっと、
		ジョブをキューに入れることができるのです。</p><p>たとえば、プリンタ <code class="literal">bamboo</code> 用の
		<code class="filename">minfree</code> を作ってみましょう。
		このプリンタのスプーリングディレクトリを調べるために、
		<code class="filename">/etc/printcap</code> を調べてみましょう。
		以下に、<code class="literal">bamboo</code>
		のエントリ部分を示します。</p><pre class="programlisting">bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=<code class="filename">/var/spool/lpd/bamboo</code>:sc:rg=artists:mx#5000:\
        :lp=<code class="filename">/dev/ttyu5</code>:ms#-parenb cs8 clocal crtscts:rw:mx#5000:\
        :if=<code class="filename">/usr/local/libexec/psif</code>:\
        :df=<code class="filename">/usr/local/libexec/psdf</code>:</pre><p>スプーリングディレクトリは <code class="literal">sd</code>
		項目で指定されます。<span class="application">LPD</span>
		がリモートホストからのジョブを受け付けるために必要な
		ファイルシステムの空き容量を 3M バイト
		(= 6144 ディスクブロック) にすることにしましょう。
	      </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 6144 &gt; /var/spool/lpd/bamboo/minfree
              </code></strong></pre></dd><dt><span class="term">利用ユーザの制限</span></dt><dd><p><code class="filename">/etc/printcap</code> の
		<code class="literal">rs</code> 項目を指定することで、
		ローカルプリンタを利用できるリモートホストのユーザを制限することができます。
		ローカルホストに接続されたプリンタ用のエントリに
		<code class="literal">rs</code> 項目が指定されている場合、
		<span class="application">LPD</span>
		は、印字を要求したユーザのアカウントと同じログイン名が
		ローカルホストに登録されている<span class="emphasis"><em>場合に限り</em></span>、
		そのジョブを受け付けます。それ以外のジョブを
		<span class="application">LPD</span> は拒否します。</p><p>この機能は、(たとえば)
		複数の部署がネットワークを共有しており、
		この内のあるユーザが部署の境界を越えて活動している場合には特に有用です。
		そのようなユーザに対して、システムのアカウントを与えるだけで、
		これらのユーザは自分が所属する部署のシステムから
		そのシステムに接続されているプリンタを使用することができます。
		これらのユーザにはむしろ、
		プリンタの使用<span class="emphasis"><em>だけ</em></span>を認め、
		その他のコンピュータ資源を利用させたくないときは、
		それらのユーザにはホームディレクトリを与えず、
		ログインシェルはシェルとしては何の役にも立たない
		<code class="filename">/usr/bin/false</code> などを指定して、
		これらのユーザのアカウントはプリンタ用の <span class="quote">「<span class="quote">形式的な</span>」</span> ものとします。</p></dd></dl></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-acct"></a>10.4.5. プリンタの利用に対する課金</h3></div></div></div><a id="idp85185744" class="indexterm"></a><p>という訳で、印字するためには料金をとることが必要です。
	取らない理由などありましょうか。紙やインクにはお金がかかります。
	そして、プリンタの維持費もかかります。
	プリンタには可動部分が搭載されており、
	これらの部分は壊れやすいという傾向があります。
	プリンタや、その利用形態、維持費について調査をし、1 ページ
	(1 フィート、1 メートルなど) 当たりにかかるコストを調べておいてください。
	これに基づき、プリンタの利用に対する課金を、実際に、
	どのように始めればよいのでしょうか。</p><p>さて、残念ながら、この部分に関しては <span class="application">LPD</span>
	スプーリングシステムはほとんど役に立ちません。
	課金は使用しているプリンタの種類、印字するもののファイルの形式、
	プリンタの利用に対する課金での
	<span class="emphasis"><em>あなた自身の</em></span>要求に大きく左右されます。</p><p>課金システムを実現するためには、プリンタのテキストフィルタ
	(プレインテキストのジョブに対して課金するため) と変換フィルタ
	(その他のファイル形式に対して課金するため) を変更して、
	印字したページを数えたり、
	プリンタに印字したページ数を取得するための要求を送る必要があります。
	ただし、出力フィルタのみを利用している場合は、
	課金をおこなうことができません。フィルタに関しては、
	「<a class="link" href="#printing-advanced-filter-intro" title="10.4.1. フィルタ">
	  フィルタ</a>」をご覧ください。</p><p>一般に、課金方式には次の 2 つがあります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>定期的に課金する方法</em></span>
	    はよく利用される方法です。この理由は、
	    恐らく比較的簡単に実現できるからです。
	    誰かがジョブを印字する度に、フィルタはそのユーザ名、
	    ホスト名、印字したページ数を課金データファイルに記録します。
	    毎月、毎学期、毎年、その他お好みの時期に、
	    各プリンタの課金用ファイルを集め、
	    それぞれのユーザが印字したページ数を合計して
	    その分の課金をおこないます。
	    次回の課金期間をデータを 0 にして課金を再開するために、
	    すべてのログファイルを削除します。</p></li><li class="listitem"><p><span class="emphasis"><em>利用毎に課金する方法</em></span>
	    はあまり利用されていません。これは、
	    実現するのが比較的難しいからです。この方式では、
	    プリンタを使用したらすぐに、
	    フィルタがユーザにその利用に対する課金をおこないます。
	    ディスククォータのように、課金作業は瞬時におこなわれます。
	    この方式では、ユーザのアカウントが赤字になる場合に、
	    ユーザが印字をおこなうことを拒否することができます。
	    また、ユーザに <span class="quote">「<span class="quote">プリンタ版 quota</span>」</span> を調べたり、
	    調整したりする方法を提供したいと思うかもしれ ません。
	    これを実現するためには、ユーザとその quota を追跡するために、
	    あるデータベース用のコードが必要となります。</p></li></ul></div><p><span class="application">LPD</span> スプーリングシステムでは、
	どちらの方式にも簡単に対応できます。(ほとんどの場合は)
	フィルタを用意しなければならないので、
	課金作業のためのコードも用意しなければなりません。
	しかし、明るい面もあります。
	それは、課金方式に関して、非常に大きな柔軟性が与えられたということです。
	たとえば、「定期的に課金する方法」か、
	「利用毎に課金する方法」のどちらかを選びまず、そして、
	どんな情報 (ユーザ名、ホスト名、ジョブのタイプ、印字された頁数、
	使用した紙の大きさ、印字をするために要した時間など)
	をログに記録するかを決めます。
	以上のことをおこなうには、上記の情報を保持するために、
	フィルタを変更しなくてはなりません。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85193296"></a>10.4.5.1. 手軽なプリンタ課金方法</h4></div></div></div><p>FreeBSD には、「定期的に課金する方法」による課金を
	  すぐに設定できるように、2 個のプログラムを添付しています。
	  その内の1つはテキストフィルタ <code class="command">lpf</code> で、
	  これについては、「<a class="link" href="#printing-advanced-lpf" title="10.4.1.6. テキストフィルタ lpf">
	    テキストフィルタ lpf</a>」をご覧ください。もう1つは、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pac&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pac</span>(8)</span></a> で、
	  これはプリンタの課金データファイルからのエントリを集め、
	  これを合計するプログラムです。</p><p>「<a class="link" href="#printing-advanced-filters" title="10.4.1.1. フィルタはどのように機能しているか">
	    フィルタはどのように機能しているか</a>」で述べたように、
	  <span class="application">LPD</span>
	  ではテキストフィルタや変換フィルタを起動しますが、
	  そのコマンドラインで使用している課金データファイルの名前が指定されます。
	  両フィルタはこの引数を使って、
	  どの課金データファイルのエントリに書き込めばよいのかを知ることができます。
	  このファイルの名前は <code class="filename">/etc/printcap</code> 中の
	  <code class="literal">af</code> 項目によって指定されます。
	  このファイルが絶対パ スで指定されない場合は、
	  スプーリングディレクトリからの相対パスとして扱われます。</p><p><span class="application">LPD</span> は、紙のページの幅と行数
	  (<code class="literal">pw</code> と <code class="literal">pl</code> 項目で 指定される)
	  を引数として <code class="command">lpf</code>
	  を起動します。<code class="command">lpf</code> フィルタでは、
	  何ページ印字したかを決定するためにこれらの引数を使用します。
	  ファイルをプリンタに送った後、
	  課金情報を課金データファイルに書き込みます。
	  このファイルは次のようになります。</p><pre class="programlisting">2.00 rose:andy
3.00 rose:kelly
3.00 orchid:mary
5.00 orchid:mary
2.00 orchid:zhang</pre><p>課金データファイルはプリンタ毎に分けて作るべきです。
	  これは、<code class="command">lpf</code>
	  にはファイルをロックする機構が組み込まれていないためです。
	  したがって、<code class="command">lpf</code>
	  が 2 つ起動されたとき、
	  同じファイルに同時に書き込みをおこなった場合、
	  お互いのエントリを破壊してしまうかもしれません。
	  課金用ファイルを各プリンタ毎に確実に分けるには、
	  <code class="filename">/etc/printcap</code> 中の
	  <code class="literal">af=acct</code> 項目を使います。
	  そうすれば、それぞれの課金用ファイルがプリンタのスプーリングディレクトリに、
	  <code class="filename">acct</code> という名称で作成されます。</p><p>プリンタの利用に対してユーザに課金する準備ができたら、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pac&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pac</span>(8)</span></a> プログラムを実行してください
	  (課金したいプリンタのスプーリングディレクトリに移動した後、
	  <code class="command">pac</code> と入力してください)。
	  次のような、ドル中心主義の課金リストが表示されます
	  (訳注: ドル中心主義という表現は、
	  表示がドルで出ることへの著者の皮肉でしょう。
	  セントがあるので小数点以下が表示されますが、
	  この機能も日本では邪魔ですね)。</p><pre class="screen">  Login               pages/feet   runs    price
orchid:kelly                5.00    1   $  0.10
orchid:mary                31.00    3   $  0.62
orchid:zhang                9.00    1   $  0.18
rose:andy                   2.00    1   $  0.04
rose:kelly                177.00  104   $  3.54
rose:mary                  87.00   32   $  1.74
rose:root                  26.00   12   $  0.52

total                     337.00  154   $  6.74</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pac&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pac</span>(8)</span></a> が受け付ける引数には次のようなものがあります。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-P<em class="replaceable"><code>printer</code></em></code></span></dt><dd><p> プリンタ <em class="replaceable"><code>printer</code></em>
		の利用に対する課金リストを作成します。
		このオプションは、<code class="filename">/etc/printcap</code>
		の <code class="literal">af</code>
		が絶対パスで指定されていた場合に限り、動作します。</p></dd><dt><span class="term"><code class="option">-c</code></span></dt><dd><p>ユーザ名のアルファベット順ではなく、
		課金額の低い順にリストを並べます。</p></dd><dt><span class="term"><code class="option">-m</code></span></dt><dd><p>課金データファイルにあるホスト名を無視します。
		このオプションを使用すると、ホスト
		<code class="systemitem">alpha</code> のユーザ
		<code class="systemitem">smith</code> とホスト
		<code class="systemitem">gamma</code> のユーザ
		<code class="systemitem">smith</code> は同一人物として扱われます。
		このオプションが指定されない場合は、
		両者は別なユーザとして扱います。</p></dd><dt><span class="term"><code class="option">-p<em class="replaceable"><code>price</code></em></code></span></dt><dd><p><code class="filename">/etc/printcap</code> の
		<code class="literal">pc</code> 項目で指定された値、または、
		デフォルトの値 (2 セント) に代わり、紙1ページ、または、
		1フィート当たりの価格を指定します。
		<em class="replaceable"><code>price</code></em> として、
		浮動小数点数を指定することができます。</p></dd><dt><span class="term"><code class="option">-r</code></span></dt><dd><p>リストの並べる順番を逆順にします。</p></dd><dt><span class="term"><code class="option">-s</code></span></dt><dd><p>課金リストを作成し、
		課金データファイルを削除します。</p></dd><dt><span class="term"><em class="replaceable"><code>name</code></em> <em class="replaceable"><code>…</code></em></span></dt><dd><p>ユーザ <em class="replaceable"><code>names</code></em>
		に対する課金情報のみを表示します。</p></dd></dl></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pac&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pac</span>(8)</span></a> が生成するデフォルトのリストには、
	  各ホストのユーザ別に印字ページ数が表示されます。
	  (ユーザがサイト内のすべてのホストを使用できるため)
	  ホスト名の情報が意味を持たない場合、
	  <code class="command">pac -m</code>
	  を実行してください。次のようなリストが得られます。</p><pre class="screen">  Login               pages/feet   runs    price
andy                        2.00    1   $  0.04
kelly                     182.00  105   $  3.64
mary                      118.00   35   $  2.36
root                       26.00   12   $  0.52
zhang                       9.00    1   $  0.18

total                     337.00  154   $  6.74</pre><p>課金額を決めるために、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pac&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pac</span>(8)</span></a> は <code class="filename">/etc/printcap</code>
	  ファイルの <code class="literal">pc</code>
	  項目で指定された値 (デフォルト値は 200、すなわち 1
	  ページ当たり 2 セント)
	  を使います。この項目で、印字物に課金したい
	  ファと思う 1 ページ当たり、
	  または、1 フィート当たりの価格を 100 分の 1 セント単位で指定します。
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pac&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pac</span>(8)</span></a> を <code class="option">-p</code> オプション付きで起動すると、
	  この値を置き換えることができます。
	  この <code class="option">-p</code> オプションで指定する額の単位は、
	  100 分の 1 セント単位ではなく、ドル単位です。たとえば、次の指定では、
	  1 ページ当たりの単価が 1 ドル 50 セントになります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pac -p1.50</code></strong></pre><p>このオプションを使うと、
	  実際の課金額を集計することができます。</p><p>最後に、<code class="command">pac -s</code>
	  を起動すると、課金情報は課金データ累計ファイルに保存されます。
	  このファイルの名前は、プリンタの課金データファイルの後ろに
	  <code class="literal">_sum</code> を付けたものとなります。そして、
	  課金データファイルは削除されます。次に
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pac&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pac</span>(8)</span></a> が起動されると、
	  その時点までの累計金額を得るために、
	  課金データ累計ファイルが読み込まれ、
	  通常の課金データファイルからの情報に加算されます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85243856"></a>10.4.5.2. 印字されたページ数をどのように数えるか?</h4></div></div></div><p>課金を、リモートホストからの印字でさえも、
	  正確におこなうためには、
	  ジョブで使用された紙が何ページであるかを特定できる必要があります。
	  このことは、プリンタ利用に対する課金をおこなう上の根本的な問題です。</p><p>プレインテキストのジョブの場合、
	  問題を解決するのはさほど難しくはありません。
	  ジョブが何行であったかを数え、プリンタがサポートしている紙
	  1 ページに印字できる最大の行数と比較すればよいのです。
	  重ね打ちするために利用されるファイル中のバックスペース文字や、
	  物理的に複数の行に渡る長い論理行に対する取り扱いを忘れずにおこなってください。</p><p>(「<a class="link" href="#printing-advanced-lpf" title="10.4.1.6. テキストフィルタ lpf">テキストフィルタ
	    lpf</a>」で紹介した) テキストフィルタ
	  <code class="command">lpf</code> では、課金をおこなうときに、
	  これらの取り扱いをおこなってくれます。
	  課金をおこなうために必要なテキストフィルタを作成している方は、
	  <code class="command">lpf</code>
	  のソースコードが参考になるでしょう。</p><p>これに対して、他のファイル形式の処理はどのようにすれば
	  よいのでしょうか。</p><p>まず、DVI から LaserJet, または、DVI から <span class="trademark">PostScript</span>®
	  への変換の場合、フィルタが <code class="command">dvilj</code> や
	  <code class="command">dvips</code> の 出力メッセージを解析することで、
	  何ページ分の変換がおこなわれたかを知ることができます。
	  他のファイル形式とその変換プログラムに関しても、
	  同様のことができるかもしれません。</p><p>しかし、この方式には問題点があります。それは、
	  変換されたページがすべて印字されるとは限らないということです。
	  たとえば、プリンタが紙詰まりを起こしたり、トナー切れになったり、
	  はたまた、爆発したりするかもしれません。
	  そのような状況により印字が途中で中止されたとしても、この方式では、
	  ユーザは全ページ分の料金を課されてしまうのです。</p><p>それでは、どのような対策をたてることができるのでしょうか。</p><p><span class="emphasis"><em>正確な</em></span>
	  課金をおこなうための唯一の<span class="emphasis"><em>確実な</em></span>方法は、
	  何ページ印字したのかを知らせることができるプリンタを入手し、
	  これをシリアルポートかネットワークに接続することです。
	  ほとんどすべての <span class="trademark">PostScript</span>®
	  プリンタではこの概念がサポートされています。
	  他のプリンタも同様です (Imagen
	  レーザプリンタをネットワーク接続するなど)。
	  それぞれのプリンタのフィルタを、
	  ジョブを印字した後で印字ページ数を得るように変更してください。
	  そして、課金情報はここで得られた値<span class="emphasis"><em>のみに</em></span>
	  基づいて記録してください。行数を数えたり、
	  エラーが生じやすいファイルの調査は必要とされません。</p><p>もちろん、
	  気前よく印字料金をすべて無料にすることもできます。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-using"></a>10.5. プリンタを使う</h2></div></div></div><a id="idp85257680" class="indexterm"></a><p>この節では、FreeBSD で設定したプリンタを使う方法について説明します。
      ここでは、ユーザレベルでのコマンドを概説します。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a></span></dt><dd><p>印字をおこないます。</p></dd><dt><span class="term"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpq&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpq</span>(1)</span></a></span></dt><dd><p>プリンタキューを調べます。</p></dd><dt><span class="term"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lprm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lprm</span>(1)</span></a></span></dt><dd><p>プリンタキューにあるジョブを削除します。</p></dd></dl></div><p>また、「<a class="link" href="#printing-lpc" title="10.5.5. プリンタの管理">プリンタの管理</a>」
      節で説明されている管理者用コマンド <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lpc</span>(8)</span></a> もあり、
      プリンタやそのキューの制御のために用いられています。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a>、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lprm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lprm</span>(1)</span></a>、そして <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpq&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpq</span>(1)</span></a> の 3
      コマンドは、<code class="option">-P<em class="replaceable"><code>printer-name</code></em></code>
      オプションをとり、これによって、
      <code class="filename">/etc/printcap</code> のように操作の対象となる
      プリンタやキューを指定します。
      これによって、様々なプリンタに対してジョブを送る、
      取り消す、調査することができます。
      <code class="option">-P</code> が使われなかった場合は、これらのコマンドは
      <code class="envar">PRINTER</code> 環境変数で指定されたプリンタを使用します。
      そして、<code class="envar">PRINTER</code> 環境変数がなかった場合は、
      これらのコマンドはデフォルトのプリンタ
      <code class="literal">lp</code> を使います。</p><p>以下では、<span class="emphasis"><em>デフォルトプリンタ</em></span>
      という用語が意味するプリンタは、<code class="envar">PRINTER</code>
      環境変数で指定されたプリンタ、もしくは、<code class="envar">PRINTER</code>
      環境変数がない場合は、<code class="literal">lp</code>
      という名前のプリンタです。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lpr"></a>10.5.1. 印字する</h3></div></div></div><p>ファイルを印字するためには、
	次のように入力してください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lpr filename ...</code></strong></pre><a id="idp85280720" class="indexterm"></a><p>これにより、
	入力されたファイルのそれぞれをデフォルトのプリンタ
	から印字します。ファイル名が与えられなかった場合、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a>
	は標準入力から印字するデータを読み込みます。たとえば、
	次のコマンドにより、ある重要なシステムファイルが印字されます。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lpr /etc/host.conf /etc/hosts.equiv</code></strong></pre><p>印字させるプリンタを選択するためには、
	次のように入力します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lpr -P printer-name filename ...</code></strong></pre><p>次の例では、プリンタ <code class="literal">rattan</code> に、
	カレントディレクトリにあるファイルの詳細なリストを印字しています。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ls -l | lpr -P rattan</code></strong></pre><p>上記の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> コマンドではファイル名の指定がないので、
	<code class="command">lpr</code> は標準入力から印字するデータ、
	この場合、<code class="command">ls -l</code>
	コマンドの出力、を読み込みます。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> コマンドでは、
	出力の整形を制御したり、ファイル変換を適用したり、
	複数部数のコピーを作成したり、
	などといた様々な幅広いオプションを受け付けることもできます。
	詳細については、
	「<a class="link" href="#printing-lpr-options" title="10.5.4. その他の印字オプション">
	  その他の印字オプション</a>」をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lpq"></a>10.5.2. ジョブの処理状況を調べる</h3></div></div></div><a id="idp85290960" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> コマンドを使って印字をする場合、プリントしようと
	するデータは <span class="quote">「<span class="quote">プリントジョブ</span>」</span> と呼ばれる箱に一緒に置かれ、
	これが <span class="application">LPD</span> スプーリングシステムに送られます。
        プリンタにはそれぞれジョブ用のキューがあり、
	送られてきたジョブはあなたや他のユーザからの別のジョブと一緒にそのキューで並んで、
	処理される順番を待ちます。
	プリンタは到着順にこれらのジョブの印字をおこないます。</p><p>デフォルトプリンタのキューの状態を表示するには、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpq&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpq</span>(1)</span></a> と入力します。プリンタを指定するときは、
	<code class="option">-P</code> オプションを使います。たとえば、次のコマンド</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lpq -P bamboo</code></strong></pre><p>は、プリンタ <code class="literal">bamboo</code>
	のキューの状態を表示します。この <code class="command">lpq</code>
	コマンドの出力結果の例を次に示します。</p><pre class="screen">bamboo is ready and printing
Rank   Owner    Job  Files                              Total Size
active kelly    9    /etc/host.conf, /etc/hosts.equiv   88 bytes
2nd    kelly    10   (standard input)                   1635 bytes
3rd    mary     11   ...                                78519 bytes</pre><p>この例では、<code class="literal">bamboo</code>
	のキューに 3 つのジョブがあることが分かります。
	最初のジョブはユーザ kelly からのものであり、
        <span class="quote">「<span class="quote">ジョブ番号</span>」</span> 9 が割り当てられています。
	プリンタのすべてのジョブには一意なジョブ番号が付けられています。
	ほとんどの場合、このジョブ番号は無視することができますが、
	ジョブをキャンセルするときにはこの番号が必要になります。
	このことの詳細については、「<a class="link" href="#printing-lprm" title="10.5.3. ジョブの削除">ジョブの削除</a>
	」をご覧ください。</p><p>ジョブ番号 9 のジョブは 2 つのファイルを処理します。すなわち、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a>
	のコマンドラインに複数のファイル名が与えられたときは、
	1つのジョブとして扱われるのです。このジョブは、現在、
	アクティブジョブ (<span class="quote">「<span class="quote">Rank</span>」</span>
	の欄の <code class="literal">active</code> という後に注目) になっています。
	これは、プリンタからそのジョブが現在印字されているはずであることを意味しています。
	2 番目のジョブでは、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> コマンドに標準入力からデータが与えられています。
	3番目のジョブはユーザ <code class="systemitem">mary</code> から与えられました。
	このジョブのサイズはとても大きくなっています。
	彼女がプリントしようとしたファイルのパス名はここで表示させるには長すぎるため、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpq&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpq</span>(1)</span></a> コマンドはドットを 3 つだけ表示しています。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpq&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpq</span>(1)</span></a> からの出力で一番最初の行もまた有益な情報を与えています。
        この行から、プリンタが現在何をしているか (あるいは、少なくとも
	<span class="application">LPD</span> がプリンタがしていると思っていること)
	が分かります。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpq&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpq</span>(1)</span></a> コマンドは
	<code class="option">-l</code> オプションもサポートしています。
	これにより、
	詳しい情報が表示されます。
	<code class="command">lpq -l</code> の実行例を次に示します。</p><pre class="screen">waiting for bamboo to become ready (offline ?)
kelly: 1st                               [job 009rose]
       /etc/host.conf                    73 bytes
       /etc/hosts.equiv                  15 bytes

kelly: 2nd                               [job 010rose]
       (standard input)                  1635 bytes

mary: 3rd                                [job 011rose]
      /home/orchid/mary/research/venus/alpha-regio/mapping 78519 bytes</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lprm"></a>10.5.3. ジョブの削除</h3></div></div></div><p>印字するようジョブを
	送った後で印字を中断したくなったときは、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lprm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lprm</span>(1)</span></a> コマンドで、
	キューの中からそのジョブを削除することができます。
	大抵の場合、アクティブジョブでさえも
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lprm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lprm</span>(1)</span></a> を使って削除することができますが、
	そのジョブの一部またはすべてが印字されてしまうかもしれません。</p><p>デフォルトプリンタへのジョブを削除するためには、最初に、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpq&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpq</span>(1)</span></a> を使ってそのジョブ番号を調べます。
	すなわち、それから、
	次のように入力して、ジョブを削除します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lprm job-number</code></strong></pre><p>特定のプリンタへのジョブを削除するときは、
	<code class="option">-P</code> オプションを使ってそのプリンタを指定します。
	たとえば、プリンタ <code class="literal">bamboo</code>
	のキューからジョブ番号 10 のジョブを削除するには次のようにします。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lprm -P bamboo 10</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lprm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lprm</span>(1)</span></a> コマンドには略記法がいくつかあります。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">lprm -</span></dt><dd><p>あなたが (デフォルトプリンタへ)
	      送ったジョブをすべて削除します。</p></dd><dt><span class="term">lprm <em class="replaceable"><code>user</code></em></span></dt><dd><p>ユーザ <em class="replaceable"><code>user</code></em> が
	      (デフォルトプリンタへ) 送ったジョブをすべて削除します。
	      他のユーザのジョブを削除できるのはスーパユーザだけです。
	      あなたは、あなた自身のジョブしか削除することはできません。</p></dd><dt><span class="term">lprm</span></dt><dd><p>ジョブ番号もユーザ名もシンボル
	      <code class="option">-</code>も指定されないときは、
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lprm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lprm</span>(1)</span></a> は現在のアクティブジョブを、
	      そのジョブを送ったのがあなた自身であるときに限り、
	      デフォルトプリンタから削除します。ただし、
	      スーパユーザは任意のアクティブジョブを削除することができます。</p></dd></dl></div><p>上記の略記法をデフォルトプリンタではなく
	特定のプリンタに対しておこなうときは、<code class="option">-P</code>
	オプションでそのプリンタを指定するだけよいのです。たとえば、
	プリンタ <code class="literal">rattan</code> のキューへあなたが送ったジョブを
	すべて削除するためには次のようにします。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lprm -P rattan -</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">ネットワーク環境で作業をしている場合、
	  あるホストから送られたプリンタジョブは、これを送ったホストで
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lprm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lprm</span>(1)</span></a> を使った場合に限って、
	  これを削除することができます。
	  他のホストで同じプリンタを使えたとしても、
	  このジョブを削除することはできません。
	  次の例では、他ホストからジョブを削除することを試みています。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lpr -P rattan myfile</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>rlogin orchid</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>lpq -P rattan</code></strong>
Rank   Owner      Job  Files                          Total Size
active seeyan     12    ...                           49123 bytes
2nd    kelly      13   myfile                         12 bytes
<code class="prompt">%</code> <strong class="userinput"><code>lprm -P rattan 13</code></strong>
rose: Permission denied
<code class="prompt">%</code> <strong class="userinput"><code>logout</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>lprm -P rattan 13</code></strong>
dfA013rose dequeued
cfA013rose dequeued
	</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lpr-options"></a>10.5.4. その他の印字オプション</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> コマンドには、テキストの整形や、
	図や他のファイル形式の変換、複数部コピーの生成、
	ジョブの扱いなどを制御することができます。
	この節では、これに関するオプションについて記しています。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lpr-options-format"></a>10.5.4.1. 整形と変換に関するオプション</h4></div></div></div><p>以下の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> 用のオプションはジョブにおける
	  ファイルの整形の制御に関するものです。
	  このオプションは、ジョブにプレインテキストが含まれない場合や
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pr</span>(1)</span></a>
	  ユーティリティを使ってプレインテキストを整形する場合に用いてください。</p><a id="idp85355472" class="indexterm"></a><p>次の例では、プリンタ
	  <code class="literal">bamboo</code> に (<span class="application">TeX</span> 組版システムによる)
	  DVI ファイル
	  <code class="filename">fish-report.dvi</code> を印字しています。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lpr -P bamboo -d fish-report.dvi</code></strong></pre><p>このオプションは、
	  ジョブに含まれるすべてのファイルに対して適用されます。
	  したがって、1 つのジョブに (たとえば) DVI ファイルと ditroff
	  ファイルを混在させることはできません。その代わりに、
	  ファイルを形式毎に別々のジョブに分け、
	  それぞれのジョブでその形式用の変換オプションを使って印字してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="option">-p</code> と <code class="option">-T</code>
	    を除くすべてのオプションを使用 するためには、
	    出力先プリンタ用の変換フィルタが必要です。たとえば、
	    <code class="option">-d</code> オプションを使用するには、DVI
	    用の変換フィルタが必要 です。詳細については、「<a class="link" href="#printing-advanced-convfilters" title="10.4.1.4. 変換フィルタ">
	      変換フィルタ</a>」で説明しています。</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-c</code></span></dt><dd><p>cifplot ファイルを印字します。</p></dd><dt><span class="term"><code class="option">-d</code></span></dt><dd><p>DVI ファイルを印字します。</p></dd><dt><span class="term"><code class="option">-f</code></span></dt><dd><p>FORTRAN プログラムを印字します。</p></dd><dt><span class="term"><code class="option">-g</code></span></dt><dd><p>plot のデータを印字します。</p></dd><dt><span class="term"><code class="option">-i <em class="replaceable"><code>number</code></em></code></span></dt><dd><p>出力に対して、<em class="replaceable"><code>number</code></em>
		カラム分の字下げをおこないます。
		<em class="replaceable"><code>number</code></em> が省略されると、
		8 カラム分字下げされます。
		このオプションはある変換フィルタと一緒の指定されたときのみに機能します。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="option">-i</code>
		  と数字の間に空白を入れてはいけません。</p></div></dd><dt><span class="term"><code class="option">-l</code></span></dt><dd><p>制御文字を含む文字通りのテキストデータを印字します。</p></dd><dt><span class="term"><code class="option">-n</code></span></dt><dd><p>ditroff (device independent troff) データを印字します。</p></dd><dt><span class="term">-p</span></dt><dd><p>印字する前に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pr</span>(1)</span></a>
		によってプレインテキストを整形します。
		詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pr</span>(1)</span></a> をご覧ください。</p></dd><dt><span class="term"><code class="option">-T <em class="replaceable"><code>title</code></em></code></span></dt><dd><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pr</span>(1)</span></a> コマンドにより生成されるヘッダを、
		ファイル名の代わりに <em class="replaceable"><code>title</code></em> とする。
		このオプションは、<code class="option">-p</code>
		と一緒に使ったときのみ機能する。</p></dd><dt><span class="term"><code class="option">-t</code></span></dt><dd><p>troff データを印字します。</p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>ラスタのデータを印字します。</p></dd></dl></div><p>次の例では、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a>
	  のマニュアルを美しく整形したものをデフォルトプリンタで印字しています。
	</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>zcat /usr/share/man/man1/ls.1.gz | troff -t -man | lpr -t</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=zcat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">zcat</span>(1)</span></a> コマンドで
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a> のマニュアルのソースファイルの圧縮を復元し、これを
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=troff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">troff</span>(1)</span></a> コマンドに渡しています。
          これによりソースファイルが整形され
          GNU troff の形式となります。
          その結果は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> に渡され、
	  <span class="application">LPD</span> スプーラへジョブの要求が発せられます。
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> には
	  <code class="option">-t</code> オプションが使われているため、
          スプーラでジョブを印字したときに GNU troff
          の形式から、デフォルトプリンタが解釈できる形式へと変換されます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lpr-options-job-handling"></a>10.5.4.2. ジョブに関するオプション</h4></div></div></div><p>以下のオプションは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> によって、
	  そのジョブを特殊な扱いにするよう <span class="application">LPD</span>
	  に指示するためのものです。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">-# <em class="replaceable"><code>copies</code></em></span></dt><dd><p>ジョブに含まれるファイルのそれぞれを
		1 部だけ印字するのではなく、
		<em class="replaceable"><code>copies</code></em>
		部のコピーを生成させるものです。管理者によっては、
		プリンタの消耗を避け、コピー機による複製を奨励するために
		このオプションの使用が禁止されているかもしれません。
		これに関しては、「<a class="link" href="#printing-advanced-restricting-copies" title="10.4.4.1. 複数部のコピーの印字を制限する">
		  複数部のコピーの印字を制限する
		</a>」をご覧ください。</p><p>次の例では、デフォルトプリンタで
		<code class="filename">parser.c</code> を 3 部コピーし、次に、
		<code class="filename">parser.h</code> を 3 部コピーしています。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lpr -#3 parser.c parser.h</code></strong></pre></dd><dt><span class="term">-m</span></dt><dd><p>印字ジョブが完了した後で、メールを送ります。
		このオプションを付けると、<span class="application">LPD</span>
		システムはジョブの処理が終了したときに、
		あなたのアカウントにメールを送ります。
		メールのメッセージには、ジョブが正常終了したのか、あるいは、
		何か異常があり、(しばしば)
		その異常が何であったのかが書かれています。</p></dd><dt><span class="term">-s</span></dt><dd><p>印字ファイルをスプールディレクトリにコピーせず、
		代わりに、
		シンボリックリンクを作成するよう指示します。</p><p>印字させるジョブのサイズが大きいとき、
		このオプションを使うと便利かもしれません。このオプションにより、
		スプー ルディレクトリの容量が節約されます (それに、
		巨大なジョブのお陰でスプールディレクトリのあるファイルシステムの空き容量がなくなってしまうかもしれません)。
		さらに、<span class="application">LPD</span>
		がいちいちすべてのデータをコピーする必要がなくなりますので、
		時間の節約にもなります。</p><p>ただし、欠点もあります。<span class="application">LPD</span>
		はオリジナルのファイルを直接参照するので、
		印字が終了するまでそのファイルを変更したり削除することができません。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">リモートのプリンタで印字している場合、
		  <span class="application">LPD</span> は、結局のところ、
		  ローカルホストからリモートホストにファイルをコピーする必要があります。
		  したがって、<code class="option">-s</code>
		  オプションはローカルのスプーリングディレクトリの空き容量を節約するだけで、
		  リモート側では節約されません。
		  それでも、このオプションは有用です。</p></div></dd><dt><span class="term">-r</span></dt><dd><p>ジョブに含まれるファイルを、
		スプーリングディレクトリに
		ファイルをコピーした後に削除します。もしくは、
		<code class="option">-s</code> オプションと一緒に使われた場合は、
		印字終了後に削除されます。
		このオプションの使用には十分注意して下さい。</p></dd></dl></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lpr-options-misc"></a>10.5.4.3. ヘッダページ用オプション</h4></div></div></div><p>以下のオプションにより、
	  ジョブのヘッダページに通常印字さ
	  れるテキストを
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> に調整させることができます。
	  対象のプリンタからヘッダページが出力されない場合は、
	  これらのオプションは何の効力も持ちません。
	  ヘッダページの設定に関する情報については、
	  「<a class="link" href="#printing-advanced-header-pages" title="10.4.2. ヘッダページ">
	    ヘッダページ</a>」を参照してください。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">-C <em class="replaceable"><code>text</code></em></span></dt><dd><p>ヘッダページに印字されるホスト名を
		<em class="replaceable"><code>text</code></em> に置き換えます。なお、
		ホスト名の場所には、通常、
		ジョブの要求があったホストの名前が印字されます。</p></dd><dt><span class="term">-J <em class="replaceable"><code>text</code></em></span></dt><dd><p>ヘッダページに印字されるジョブ名を
		<em class="replaceable"><code>text</code></em> に置き換えます。
		ジョブ名の場所には、通常、ジョブの最初のファイル名、
		または、標準入力からデータが印字されたときは
		<code class="filename">stdin</code> が印字されます。</p></dd><dt><span class="term">-h</span></dt><dd><p>ヘッダページの出力を禁止します。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">サイトによっては、
		  そのヘッダページの生成方法により、
		  このオプションの効果が現れないかもしれません。
		  詳細は、「<a class="link" href="#printing-advanced-header-pages" title="10.4.2. ヘッダページ">
		    ヘッダページ</a>」をご覧ください。</p></div></dd></dl></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lpc"></a>10.5.5. プリンタの管理</h3></div></div></div><p>プリンタの管理者として、プリンタの設置、設定、
	そして、それらのテストをおこなう必要がありました。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lpc</span>(8)</span></a> コマンドにより、
	これまでとは別な管理方法がプリンタと対話的におこなわれます。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lpc</span>(8)</span></a> により、次のことが可能となります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>プリンタの起動、停止をおこなう。</p></li><li class="listitem"><p>キューへの入力の許可、禁止をおこなう。</p></li><li class="listitem"><p>それぞれのキューにあるジョブの順番を変更する。</p></li></ul></div><p>最初に用語に関する注意をしておきます。
	プリンタが<span class="emphasis"><em>停止している</em></span>とは、
	キューの中にあるどのジョブも印字されることがない状態
	を言います。この状態においても、
	ユーザはまだジョブの要求をおこなうことができますが、
	これらのジョブはキューの中で、
	プリンタが<span class="emphasis"><em>スタートする</em></span>状態になるまで、
	あるいは、キューの内容が削除されるまで待たされることになります。</p><p>キューが<span class="emphasis"><em>禁止状態</em></span>にあると、
	(<code class="systemitem">root</code> 以外の)
	すべてのユーザがプリンタにジョブを要求することができません。
	キューが<span class="emphasis"><em>許可状態にある</em></span>場合は、
	ジョブの入力が許可されます。
	キューが<span class="emphasis"><em>禁止状態にある</em></span>場合でも、
	プリンタを<span class="emphasis"><em>スタートす
	  る</em></span>状態にすることは可能です。この場合は、
	キューが空になるまで、
	キュー内のジョブの印字が続けられます。</p><p>一般的に、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lpc</span>(8)</span></a> コマンドを使用するには
	<code class="systemitem">root</code> 権限を持っている必要があります。
	一般のユーザも <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lpc</span>(8)</span></a> コマンドを使うことはできますが、
	プリンタの状態を取得することとハングしたプリンタ
	を再スタートすることだけに使用が制限されています。</p><p>以下に、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lpc</span>(8)</span></a> コマンドに関する説明の要約を述べます。
	ほとんどのコマンドでは、操作対象となるプリンタを指定するため
	<em class="replaceable"><code>printer-name</code></em> 引数を与えます。
	<em class="replaceable"><code>printer-name</code></em> の代わりに
	<code class="literal">all</code> が与えられると、操作は
	<code class="filename">/etc/printcap</code>
	内にある全プリンタに対しておこなわれることになります。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="command">
	      abort printer-name</code></span></dt><dd><p>現在のジョブをキャンセルし、プリンタを停止させます。
	      キューが許可状態にある場合は、
	      ユーザはまだジョブを入力することができます。</p></dd><dt><span class="term"><code class="command">
	      clean printer-name</code></span></dt><dd><p>プリンタのスプーリングディレクトリから、
	      ジョブの古いファイルを削除します。状況によって、
	      とりわけ、印字途中でエラーが発生していたり、
	      管理操作が頻発していた場合には、
	      ジョブで作られたファイルを <span class="application">LPD</span>
	      が完全に削除しないことがあります。このコマンドでは、
	      スプーリングディレクトリに入っていないファイルを見つけ出し、
	      それを削除しています。</p></dd><dt><span class="term"><code class="command">
	      disable printer-name</code></span></dt><dd><p>キューに新しいジョブを入れることを禁止します。
	      プリンタが動作しているときは、
	      キューに残っているジョブの印字は続けられます。ただし、
	      キューが禁止状態にあったとしても、スーパーユーザ
	      (<code class="systemitem">root</code>)
	      は常にジョブを入力することができます。</p><p>このコマンドは、
	      新しいプリンタやフィルタを設置している間に使用すると有用です。
	      すなわち、キューを禁止状態にしておくと、
	      <code class="systemitem">root</code> によるジョブのみが入力されます。
	      そして、他のユーザは、テストが完了し、
	      <code class="command">enable</code>
	      コマンドでキューが再度許可状態になるまで、
	      ジョブの入力はできなくなります。</p></dd><dt><span class="term"><code class="command">
	      down printer-name
	      message</code></span></dt><dd><p>プリンタをダウンさせます。これは、
	      <code class="command">disable</code> をおこなった後で、
	      <code class="command">stop</code> をおこなった場合と等価になります。
	      <em class="replaceable"><code>message</code></em> は、ユーザが
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpq&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpq</span>(1)</span></a> コマンドでプリンタのキューの状態を調べたり、
	      <code class="command">lpc status</code>
	      でプリンタの状態を調べたときに、
	      プリンタの状況として表示されるメッセージです。</p></dd><dt><span class="term"><code class="command">
	      enable printer-name</code></span></dt><dd><p>プリンタのキューを許可状態にします。
	      ユーザはジョブの入力ができるようになりますが、
	      プリンタがスタートの状態になるまでは、
	      プリンタからは何も印字されません。</p></dd><dt><span class="term"><code class="command">
	      help command-name</code></span></dt><dd><p><em class="replaceable"><code>command-name</code></em>
	      コマンドのヘルプメッセージを表示します。
	      <em class="replaceable"><code>command-name</code></em>
	      が指定されなかった場合は、
	      利用できるコマンドの要約が表示されます。</p></dd><dt><span class="term"><code class="command">
	      restart printer-name</code></span></dt><dd><p>プリンタをスタートさせます。通常のユーザは、
	      <span class="application">LPD</span>
	      がある異常な状況でハングしたときに限り、
	      このコマンドを使用することができます。しかし、
	      <code class="command">stop</code>
	      または <code class="command">down</code> コマンドにより、
	      停止状態にあるプリンタをスタートさせることはできません。
	      <code class="command">restart</code> コマンドは、
	      <code class="command">abort</code> の後に <code class="command">start</code>
	      をおこなったことと同じになります。</p></dd><dt><span class="term"><code class="command">
	      start printer-name</code></span></dt><dd><p>プリンタをスタートさせます。
	      プリンタのキューにあるジョブを印字することでしょう。</p></dd><dt><span class="term"><code class="command">
	      stop printer-name</code></span></dt><dd><p>プリンタを停止します。プリンタは、
	      現在のジョブを終了させ、そして、
	      キューにあるその他のジョブは印字しません。
	      プリンタが停止状態にあったとしても、まだ、
	      許可状態にあるキューに対して、ジョブを送ることができます。</p></dd><dt><span class="term"><code class="command">
	      topq printer-name
	      job-or-username</code></span></dt><dd><p><em class="replaceable"><code>printer-name</code></em>
	      のキューに対して、ジョブ番号
	      <em class="replaceable"><code>job</code></em> のジョブ、または、ユーザ
	      <em class="replaceable"><code>username</code></em>
	      から送られたジョブを置き換えて、キューの先頭に持ってきます。
	      このコマンドに関しては、
	      <em class="replaceable"><code>printer-name</code></em> の代わりに
	      <code class="literal">all</code>
	      を使用することはできません。</p></dd><dt><span class="term"><code class="command">
	      up printer-name</code></span></dt><dd><p>プリンタをアップ状態にします。これの反対のコマンドが
	      <code class="command">down</code> です。<code class="command">start</code>
	      の次に <code class="command">enable</code>
	      をおこなったことと等しくなります。</p></dd></dl></div><p>コマンドラインから上記のコマンドを入力すると、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lpc</span>(8)</span></a>
	はこれを受け付けます。コマンドが入力されなかった場合は、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lpc</span>(8)</span></a> は対話モードに入り、
	<code class="command">exit</code>、<code class="command">quit</code>、
	または、
	ファイル終端文字が入力されるまでコマンドの入力ができます。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-lpd-alternatives"></a>10.6. 標準スプーラの代替品</h2></div></div></div><p>このマニュアルを最初から通読されている方ならば、ここまでで、
      FreeBSD 付属の <span class="application">LPD</span>
      スプーリングシステムに関して知っておくべきことすべてを学ばれたことと思います。
      多分、このシステムにあるたくさんの欠点について認識できたことでしょう。
      そこから
      <span class="quote">「<span class="quote">(FreeBSD 上で動作する)
      スプーリングシステムには他にどのようなものがあるのか</span>」</span>
      という疑問が自然と湧いてきます。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">LPRng</span></dt><dd><p><span class="quote">「<span class="quote">次世代 LPR</span>」</span><a id="idp85541072" class="indexterm"></a>
	    を称する<span class="application">LPRng</span> は、
	    PLP を完全に書き換えたものです。
            Patrick Powell と Justin Mason (PLP の主要な管理者)
	    が共同で <span class="application">LPRng</span> を作成しました。
            <span class="application">LPRng</span> の本サイトは
            <code class="uri"><a class="uri" href="http://www.lprng.org/" target="_top">http://www.lprng.org/</a></code>
            です。</p></dd><dt><span class="term">CUPS</span></dt><dd><p><span class="application">CUPS</span><a id="idp85544912" class="indexterm"></a> (the Common UNIX Printing
	    System) は、<span class="trademark">UNIX</span>® ベースのオペレーティングシステムに対して、
	    移植性の高い印刷レイヤを提供します。
	    <span class="application">CUPS</span> は Easy Software Products
	    によって、すべての <span class="trademark">UNIX</span>® ベンダとユーザに、
	    標準的な印刷ソリューションを普及するために開発されています。</p><p><span class="application">CUPS</span>
	    は、プリントジョブとキューを管理する基盤として
	    Internet Printing Protocol (<acronym class="acronym">IPP</acronym>)
	    を使っています。機能は限定されますが、
	    ラインプリンタデーモン (<acronym class="acronym">LPD</acronym>)、
	    サーバーメッセージブロック　(<acronym class="acronym">SMB</acronym>) や
	    AppSocket (JetDirect とも呼ばれています)
	    プロトコルにも対応しています。
	    CUPS は、<span class="trademark">UNIX</span>® に現実的なプリント機能を備えるため、
	    ネットワークプリンタの検索、
	    PostScript プリンタ記述言語 (<acronym class="acronym">PPD</acronym>)
	    に基づいた印刷オプションを追加します。</p><p><span class="application">CUPS</span>
	    のメインサイトは <code class="uri"><a class="uri" href="http://www.cups.org/" target="_top">http://www.cups.org/</a></code> です</p></dd><dt><span class="term">HPLIP</span></dt><dd><p><span class="application">HPLIP</span><a id="idp85552592" class="indexterm"></a>
	    (the HP <span class="trademark">Linux</span>® Imaging and Printing system) は、
	    HP アプライアンス用に HP が開発した、
	    プリンタ、スキャナ、ファックスへの対応のためのプログラム群です。
	    このプログラムでは、印刷機能において
	    <span class="application">CUPS</span>
	    印刷システムをバックエンドとして利用しています。</p><p><span class="application">HPLIP</span> のメインサイトは、
	    <code class="uri"><a class="uri" href="http://hplipopensource.com/hplip-web/index.html" target="_top">http://hplipopensource.com/hplip-web/index.html</a></code>
	    です。</p></dd></dl></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-troubleshooting"></a>10.7. トラブルシューティング</h2></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> を使った簡単なテストをおこなった結果、
	    正しい出
	    力を得られずに、以下に示すような出力が得られるかもしれません。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">しばらくしたら出力される、または、
		紙の全体が出てこない</span></dt><dd><p>プリンタは上で示されたような印字を
		  おこなったのですが、しばらくして止まってしまい、
		  動かなくなってしまいました。
		  印字された結果をプリンタから取り出すためには、
		  プリンタにある PRINT REMAINING ボタン、または、FORM
		  FEED ボタンを押す必要があるようです。</p><p>この場合は、
		  おそらくジョブはプリントをする前に
		  更にデータが送られてこないか待ち続けているのでしょう。
		  この問題を解決するためには、プリンタに FORM FEED
		  文字 (あるいは特定の必要な文字コード) を
		  送るテキストフィルタを使ってください。
		  プリンタ内部に残ったデータをプリンタにすぐに印字させるには、
		  普通はこれで十分です。
		  次のジョブが前のジョブの最終ページの中央の
		  どこかから印字を開始させないためにも、
		  紙の途中で印字のジョブが終了したかどうかを確認するのは有益です。</p><p>シェルスクリプト
		  <code class="filename">/usr/local/libexec/if-simple</code>
		  を次のように変更して、プリンタへジョブを送信した後に
		  FORM FEED 文字を印字させるようにします。</p><pre class="programlisting">#!/bin/sh
#
# if-simple - Simple text input filter for lpd
# Installed in /usr/local/libexec/if-simple
#
# Simply copies stdin to stdout.  Ignores all filter arguments.
# Writes a form feed character (\f) after printing job.

/bin/cat &amp;&amp; printf "\f" &amp;&amp; exit 0
exit 2</pre></dd><dt><span class="term"><span class="quote">「<span class="quote">階段効果</span>」</span> が現れた</span></dt><dd><p>出力された紙には次のように印字されていました。</p><pre class="screen">!"#$%&amp;'()*+,-./01234
                 "#$%&amp;'()*+,-./012345
                                 #$%&amp;'()*+,-./0123456</pre><p>あなたは<span class="emphasis"><em>「階段効果」</em></span>
		  の新たなる犠牲者になってしまいました。この原因は、
		  改行を表わすべき文字がなんであるか
                  の解釈が混乱していることにあります。<span class="trademark">UNIX</span>®
		  スタイルのオペレーティングシステムでは、改行文字は
		  ASCII<a id="idp85576272" class="indexterm"></a> コード 10 の line feed (LF)
		  の 1 文字が使われています。<span class="trademark">MS-DOS</span>®<a id="idp85577168" class="indexterm"></a>
		  や <span class="trademark">OS/2</span>®<a id="idp85578064" class="indexterm"></a> などは ASCII
		  コード 10の LF <span class="emphasis"><em>と</em></span>、ASCII コード
		  13 の文字 (carriage return または CR)
		  をペアで使います (訳注: Macintosh では CR
		  のみで表現されています)。大抵のプリンタでは、
		  改行を表わすために <span class="trademark">MS-DOS</span>® の慣習にしたがいます。</p><p>FreeBSD で印字する場合、印字したテキストは LF
		  文字だけ が使われていました。プリンタでは LF
		  文字を見つけると、紙を 1 行分送り出しました。しかし、
		  次の文字を印字するた
		  めの紙の水平方向の位置は維持されました。すなわち、CR
		  文字が意味することは、
		  次の文字を印字する位置を紙の左端に動かすことです。</p><p>FreeBSD
		  がプリンタに動作をして欲しいと思っている動作を以下に示します。
		</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>プリンタが CR を受け取ったとき</td><td>CR 動作 (復帰) をおこなう</td></tr><tr><td>プリンタが LF を受け取ったとき</td><td>CR + LF 動作 (復帰、改行) をおこなう</td></tr></tbody></table></div><p>このように動作させるための方法がいくつかあります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>これらの文字の解釈を変えるために、
		      プリンタの設定スイッチかコントロールパネルを操作する方法。
		      どのようにして設定をするかはプリンタのマニュアルを参照してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD
			以外のオペレーティングシステムを切り替えて使う場合、
			CR と LF 文字の解釈をそのオペレーティングシステムで使われているようにプリンタを
			<span class="emphasis"><em>再設定</em></span>する必要があるかもしれません。
			以下に示す解決方法のいずれかを
			選ぶのがよいかもしれませんね。</p></div></li><li class="listitem"><p>自動的に LF を CR+LF に変換してくれる
		      FreeBSD 用のシリアルドライバを入手する方法。
		      もちろん、このドライバはプリンタ専用に接続される
		      シリアルポート
		      <span class="emphasis"><em>のみ</em></span>で動作します。
		      この機能を許可するためには、
		      <code class="literal">ms#</code> 項目を使い、
		      対象プリンタの <code class="filename">/etc/printcap</code>
		      ファイルで<code class="literal">onlcr</code> モードを設定します。</p></li><li class="listitem"><p>LF
		      文字の扱いを一時的に変更するための
		      <span class="emphasis"><em>エスケープコード</em></span>
		      をプリンタに送る方法。
		      プリンタがサポートしているかもしれないエスケープコード
		      については、
		      プリンタのマニュアルを参照してください。
		      適切なエスケープコードが見つかったら、
		      最初にそのコードを送り、次にプリントジョブを送信
		      するようにテキストフィルタを変更してください。
		    </p><a id="idp85590224" class="indexterm"></a><p>次に、Hewlett Packard 社の PCL
		      エスケープコードに対応しているプリンタのための
		      テキストフィルタの例を示します。
		      このフィルタでは、プリンタ に
		      LF 文字を LF と CR の2文字として扱わせます。
		      その後に、プリンタにジョブを送ります。最後に、
		      ジョブの最終ページの紙を排出するため、FROM FEED
		      文字を送ります。このフィルタは Hewlett Packard
		      社のほとんどすべてのプリンタで機能するはずです。</p><pre class="programlisting">#!/bin/sh
#
# hpif - Simple text input filter for lpd for HP-PCL based printers
# Installed in /usr/local/libexec/hpif
#
# Simply copies stdin to stdout.  Ignores all filter arguments.
# Tells printer to treat LF as CR+LF.  Ejects the page when done.

printf "\033&amp;k2G" &amp;&amp; cat &amp;&amp; printf "\f" &amp;&amp; exit 0
exit 2</pre><p>ホスト <code class="systemitem">orchid</code> の
		      <code class="filename">/etc/printcap</code>
		      の例を以下に示します。ここには、
		      一番目のパラレルポートにプリンタ
		      (Hewlett Packard LaserJet 3Si)
		      が一台接続されており、そのプリンタ名は
		      <code class="literal">teak</code> です。</p><pre class="programlisting">#
#  /etc/printcap for host orchid
#
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=<code class="filename">/dev/lpt0</code>:sh:sd=<code class="filename">/var/spool/lpd/teak</code>:mx#0:\
        :if=<code class="filename">/usr/local/libexec/hpif</code>:</pre></li><li class="listitem"><div xmlns="" class="note"><h3 class="admontitle">訳注: </h3><p xmlns="http://www.w3.org/1999/xhtml">
		         LF を CR+LF
			に置き換える cat コマンドを作る方法も当然考えられます。
			そして、このコマンドと、<span class="emphasis"><em>if-simple</em></span> の cat
			の部分を置き換えればよいわけです。
			具体的にどのようにするかは、
			読者への練習問題としましょう。</p></div></li></ul></div></dd><dt><span class="term">各行が重ね書きされてしまった</span></dt><dd><p>プリンタは紙送りをまったくしませんでした。
		  テキストすべての行がある行の上で重ねて印字されてしまいました。
		</p><p>この問題は、
		  階段現象とは <span class="quote">「<span class="quote">正反対</span>」</span> な問題で、
		  ほとんどまれにしか起こりません。FreeBSD では行末として扱われる
		  LF  文字が、紙の左端に印字位置を復帰しますが、
		  紙送りはしない CR 文字として扱われています。</p><p>プリンタの設定スイッチかコントロールパネルを使って、
		  LF と CR
		  の文字を次のような解釈をするようにしてください。
		</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>プリンタが受け取ったとき</th><th>プリンタがおこなう</th></tr></thead><tbody><tr><td>CR</td><td>CR 動作 (復帰)</td></tr><tr><td>LF</td><td>CR + LF (復帰、改行)</td></tr></tbody></table></div><div xmlns="" class="note"><h3 class="admontitle">訳注: </h3><p xmlns="http://www.w3.org/1999/xhtml">
		    LF を CR+LF
		    に置き換える cat コマンドを作る方法も当然考えられます。
		    そして、このコマンドと、
		    <code class="filename">if-simple</code> の cat
		    の部分を置き換えればよいわけです。
		    具体的にどのようにするかは、
		    読者への練習問題としましょう。</p></div></dd><dt><span class="term">プリンタが文字を紛失してしまう</span></dt><dd><p>印字しているのですが、
		  各行の 2 〜 3 文字が印字されません。
		  プリンタを動かせば動かすほど、
		  もっとたくさんの文字が紛失されていき、
		  この問題は更に悪くなっていくかもしれませんでした。</p><p>この問題は、
		  シリアルポートを通してコンピュータから送られてくるデータの速度に、
		  プリンタがついていけないことに起因します
		  (この問題は、パラレルポートに接続された
		  プリンタでは発生することはありません)。
		  この問題を克服する方法が2つあります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>プリンタが XON/XOFF のフロー制御をサポート
		      している場合は、項目 <code class="literal">ms#</code> で
		      <code class="literal">ixon</code> モードをセットして、FreeBSD
		      にこの機能を使用させてください。</p></li><li class="listitem"><p>プリンタが Request to Send / Clear to Send
		      ハードウェアハンドシェイク
		      (通称 <code class="literal">RTS/CTS</code>) をサポートして
		      いる場合は、項目 <code class="literal">ms#</code> で
		      <code class="literal">crtscts</code>
		      モードをセットして下さい。それから、
		      プリンタとコンピュータを接続しているシリアルケーブルが
		      ハードウェアフロー制御用に正しく配線されたものかどうかを確認してください。</p></li></ul></div></dd><dt><span class="term">プリンタは意味不明な文字列を印字した</span></dt><dd><p>プリンタはランダムなゴミのように
		  見えるものを印字しましたが、
		  意図したテキストは印字してくれませんでした。</p><p>この問題は、通常、
		  シリアルポートに接続したプリンタでの
		  通信パラメータの誤りからくる前項とは別の症状です。
		  <code class="literal">br</code> 項目の通信速度と
		  <code class="literal">ms#</code> 項目を再確認してください。
		  また、プリンタでの設定が
		  <code class="filename">/etc/printcap</code>
		  ファイルで設定した
		  内容と一致しているかどうかも確認してください。</p><div xmlns="" class="note"><h3 class="admontitle">訳注: </h3><p xmlns="http://www.w3.org/1999/xhtml">
		    simple-if
		    のような単純なフィルタだけの状態で、
		    日本語を含むテキストを印字しようとした場合にも、
		    シリアルポート、パラレルポートの使用に関係なく、
		    このような症状は見られます。日本語プリンタの場合、
		    漢字コードそのもの
		    を送信しただけでその漢字を印字してくれるものは、
		    少なくとも訳者は見たことがありません。
		    漢字を印字するための制御
		    コードを別途送信するフィルタが必要となります。
		    また、そのようなフィルタを使用していても、
		    そのフィルタが想定してる漢字コードと異なった文書を
		    プリントしようとしたときもこのような症状は出ます。
		    もちろん、これはプリンタ用の
		    言語を持たないプリンタの話で、<span class="trademark">PostScript</span>® プリンタ
		    などにプレインテキストを送信しても、日本語対応、
		    非対応に関らず、意味不明な文字列が印字される
		    (もしくは、何も印字されない) ことでしょう。</p></div></dd><dt><span class="term">何も起きない</span></dt><dd><p>もしプリンタが何の動作もしないのであれば、
		  ハード的な問題ではなく、多分 FreeBSD
		  の中に問題があります。
		  <code class="filename">/etc/printcap</code> ファイルで、
		  デバッグしているプリンタのエントリに
		  (<code class="literal">lf</code> 項目で) ログファイルを取るように
		  設定を追加してください。たとえば、プリンタ
		  <code class="literal">rattan</code> 用のエントリの項目
		  <code class="literal">lf</code> は次のようになります。</p><pre class="programlisting">rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=<code class="filename">/var/spool/lpd/rattan</code>:\
        :lp=<code class="filename">/dev/lpt0</code>:\
        :if=<code class="filename">/usr/local/libexec/if-simple</code>:\
        :lf=<code class="filename">/var/log/rattan.log</code></pre><p>次に、もう一度印字をおこなってみます。そして、
		  発生したと思われるエラーメッセージを見るためにログファイル
		  (上記の例では、
		  <code class="filename">/var/log/rattan.log</code>)
		  を調べます。そこで見られたメッセージを元に、
		  問題を解決してみてください。</p><p>項目 <code class="literal">lf</code>
		  が指定されていない場合、<span class="application">LPD</span>
		  はデフォルトのログファイルとして
		  <code class="filename">/dev/console</code> を使います。</p></dd></dl></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu"></a>第11章 Linux バイナリ互換機能</h2></div><div><span class="authorgroup">再構成と一部の更新: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Mock</span> <span class="firstname">Jim</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">オリジナルの文書を執筆: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Handy</span> <span class="firstname">Brian N.</span> [FAMILY Given]</span> 、 <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Murphey</span> <span class="firstname">Rich</span> [FAMILY Given]</span>. </span></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#idp85701584">11.1. この章では</a></span></dt><dt><span class="sect1"><a href="#linuxemu-lbc-install">11.2. インストール</a></span></dt><dt><span class="sect1"><a href="#linuxemu-mathematicau">11.3. Mathematica のインストール</a></span></dt><dt><span class="sect1"><a href="#linuxemu-oracle">11.4. Oracle のインストール</a></span></dt><dt><span class="sect1"><a href="#sapr3">11.5. SAP R/3 (4.6B - IDES) のインストール</a></span></dt><dt><span class="sect1"><a href="#idp86485712">11.6. 高度なトピックス</a></span></dt></dl></div><p><span class="emphasis"><em>訳: はらだ きろう <code class="email">&lt;<a xmlns="" class="email" href="mailto:kiroh@jp.FreeBSD.org">kiroh@jp.FreeBSD.org</a>&gt;</code>、1996 年 9 月 24 日</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp85701584"></a>11.1. この章では</h2></div></div></div><a id="idp85702224" class="indexterm"></a><a id="idp85702736" class="indexterm"></a><p>FreeBSD は、Linux を含む Unix-like
      なオペレーティングシステムとのバイナリ互換機能を提供しています。
      現時点では、一体なぜ FreeBSD が Linux
      バイナリを実行できるようにならなければならないのか自問しているのではないでしょうか?
      答えはきわめて簡単です。
      Linux は現在コンピュータの世界では最も<span class="quote">「<span class="quote">ホットなモノ</span>」</span>なのでたくさんの会社や開発者たちが
      Linux のためだけに開発を行なっています。そのため、残された私たち
      FreeBSD ユーザは彼らに対して FreeBSD ネイティブなアプリケーションも出すように言うしかないのです。
      問題は、FreeBSD バージョンも出した場合にどれくらいの数のユーザーが使うのかわからない、
      ということであり、そのため Linux 版のみを開発しているということなのです。
      そこで FreeBSD では Linux バイナリ互換機能が役に立つのです。</p><p>簡単に言ってしまえば、この機能により全ての Linux アプリケーションの
      90% が修正なしに FreeBSD 上で起動できます。
      この中には <span class="application">Star Office</span> や Linux 版の
      <span class="application">Netscape</span>、<span class="application">Adobe Acrobat</span>、
      <span class="application">RealPlayer</span> 5 と 7、
      <span class="application">VMWare</span>、<span class="application">Oracle</span>、
      <span class="application">WordPerfect</span>、<span class="application">Doom</span>、
      <span class="application">Quake</span> などがあります。
      また、ある状況においては Linux バイナリを Linux で動かすよりも
      FreeBSD で動かすほうが良いパフォーマンスが出るという報告もあります。</p><a id="idp85708496" class="indexterm"></a><p>しかしながら、いくつかの Linux に特有な OS の機能は FreeBSD ではサポートされていません。
      例えば、Linux の <code class="filename">/proc</code> ファイルシステムを過度に使うような
      Linux バイナリは FreeBSD では動きません (FreeBSD の <code class="filename">/proc</code>
      ファイルシステムとは異なるのです) し、
      仮想 8086 モードを有効にするような i386 特有の呼び出しも動きません。</p><p>この章を読むと、以下のことがわかります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Linux バイナリ互換機能を有効にする方法。</p></li><li class="listitem"><p>Linux 共有ライブラリを追加する方法。</p></li><li class="listitem"><p>Linux アプリケーションを
	  FreeBSD システムにインストールする方法</p></li><li class="listitem"><p>FreeBSD における Linux
	  互換機能の実装の詳細。</p></li></ul></div><p>この章を読む前に、以下のことを理解しておく必要があります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>サードパーティ製ソフトウェアのインストール方法 (<a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a>)</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-lbc-install"></a>11.2. インストール</h2></div></div></div><a id="idp85716816" class="indexterm"></a><p>Linux バイナリ互換機能は、デフォルトでは有効ではありません。
      この機能を有効にする最も簡単な方法は、
      <code class="literal">linux</code> KLD オブジェクト
      (<span class="quote">「<span class="quote">Kernel LoaDable object</span>」</span>) を読み込むことです。
      コマンドプロンプトで <code class="command">linux</code>
      と打つだけでモジュールを読み込むことができます。</p><p>Linux 互換機能を常に有効にする場合には、
      <code class="filename">/etc/rc.conf</code> に以下の行を追加してください。</p><pre class="programlisting">linux_enable="YES"</pre><p>この設定により、<code class="filename">/etc/rc.i386</code>
      では次のような操作が行なわれます。</p><pre class="programlisting"># Start the Linux binary compatibility if requested.
#
case ${linux_enable} in
[Yy][Ee][Ss])
	echo -n ' linux';	linux &gt; /dev/null 2&gt;&amp;1
	;;
esac
    </pre><p>望みの KLD モジュールがロードされているか確認したい時には
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldstat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldstat</span>(8)</span></a> コマンドを利用します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kldstat</code></strong>
Id Refs Address    Size     Name
 1    2 0xc0100000 16bdb8   kernel
 7    1 0xc24db000 d000     linux.ko</pre><a id="idp85748176" class="indexterm"></a><p>
      何らかの理由で Linux KLD をロードしたくない、
      あるいはロードできないような場合には、
      <code class="literal">options  LINUX</code>
      をカーネルの設定ファイルに指定して、
      Linux バイナリ互換機能をカーネルにスタティックリンクしてください。
      そして、<a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a>
      の記述にしたがって新しいカーネルをインストールしてください。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85762896"></a>11.2.1. Linux ランタイムライブラリのインストール</h3></div></div></div><a id="idp85763664" class="indexterm"></a><p>これは、<a class="link" href="#linuxemu-libs-port" title="11.2.1.1. linux_base の port を用いたインストール">linux_base</a>
	port を用いるか、もしくは <a class="link" href="#linuxemu-libs-manually" title="11.2.1.2. 手動でのライブラリのインストール">手動で</a> インストールします。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-port"></a>11.2.1.1. linux_base の port を用いたインストール</h4></div></div></div><a id="idp85766992" class="indexterm"></a><p>ランタイムライブラリをインストールするには最も簡単な方法です。
	  <a class="link" href="http://www.FreeBSD.org/ja/ports/" target="_top">Ports Collection</a> から他の port
	  をインストールするのと全く同じようにできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/emulators/linux_base</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install distclean</code></strong></pre><p>これで Linux バイナリ互換機能が使えるはずです。
	  いくつかのプログラムはシステムライブラリのマイナーバージョンが違うと文句を言うかもしれませんが一般的には大した問題ではありません。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-manually"></a>11.2.1.2. 手動でのライブラリのインストール</h4></div></div></div><p><span class="quote">「<span class="quote">ports</span>」</span> コレクションをインストールしていない場合、
	  代わりに手動でライブラリをインストールすることができます。
	  プログラムが必要とする Linux のシェアードライブラリとランタイムリンカが必要です。
	  また Linux ライブラリ用の <span class="quote">「<span class="quote">shadow root</span>」</span> ディレクトリ、
	  <code class="filename">/compat/linux</code> を作成する必要があります。
	  FreeBSD で動作する Linux プログラムが使用するシェアードライブラリは、
	  まずこのファイルツリーから検索されます。例えば、
	  Linux のプログラムが <code class="filename">/lib/libc.so</code>
	  をロードしようとした場合には、FreeBSD はまず
	  <code class="filename">/compat/linux/lib/libc.so</code>
	  を開こうとします。これが存在しなかった場合には、次に
	  <code class="filename">/lib/libc.so</code> を試します。
	  シェアードライブラリは、Linux の <code class="command">ld.so</code>
	  が報告するパスではなく、
	  <code class="filename">/compat/linux/lib</code>
	  以下にインストールする必要があります。</p><p>Linux のプログラムが必要とする
	  シェアードライブラリを探す必要があるのは、FreeBSD
	  のシステムに Linux
	  のプログラムをインストールする最初の数回だけでしょう。
	  それが過ぎれば、十分な Linux のシェアードライブラリがシステムにインストールされ、
	  新しくインストールした Linux のバイナリも余計な作業をせずに動作させることができるようになります。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85787728"></a>11.2.1.3. シェアードライブラリの追加</h4></div></div></div><a id="idp85788368" class="indexterm"></a><p><code class="filename">linux_base</code> port をインストールした後に、
	  アプリケーションが必要なライブラリが存在しないというエラーを出したらどうしたらよいでしょうか?
	  Linux のバイナリがどのシェアードライブラリを必要とし、
	  そしてどこで入手できるか、どのように探したらよいでしょうか?
	  基本的には、以下の 2 種類の方法があります (以下の手順に従う場合には、
	  必要なインストール作業をおこなう FreeBSD システム上で root
	  として作業をおこなう必要があります)。</p><p>Linux システムにアクセス可能ならば、
	  そのアプリケーションがどういうシェアードライブラリを必要としているのか調べ、
	  単に FreeBSD にそのライブラリをコピーするだけです。
	  次の例を見てみましょう。</p><div class="informalexample"><p>FTP を使って Doom の Linux バイナリを取ってきて、
	    アクセスできる Linux システムに置いたとしましょう。
	    次のように <code class="command">ldd linuxdoom</code> とするだけでどのシェアードライブラリが必要かチェックできます。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ldd linuxxdoom</code></strong>
libXt.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libXt.so.3.1.0
libX11.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libX11.so.3.1.0
libc.so.4 (DLL Jump 4.5pl26) =&gt; /lib/libc.so.4.6.29</pre><a id="idp85792080" class="indexterm"></a><p>最後のカラムに表示されているすべてのファイルを持って来て、
	  <code class="filename">/compat/linux</code> の下に置き、
	  最初のカラムに示されるファイル名にシンボリックリンクを張ります。
	  すなわち、FreeBSD システムでは以下のようなファイルが必要となります。</p><pre class="screen">/compat/linux/usr/X11/lib/libXt.so.3.1.0
/compat/linux/usr/X11/lib/libXt.so.3 -&gt; libXt.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3 -&gt; libX11.so.3.1.0
/compat/linux/lib/libc.so.4.6.29 /compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">最初のカラムに表示されているファイルとメジャーバージョンが同じ
	        Linux シェアードライブラリを既にインストールしている場合は、
		新たにコピーする 必要はありません。
		既にあるライブラリで動作するはずです。
		ただ、新しいバージョンのものをコピーすることをお奨めします。
		新しいライブラリにシンボリックリンクを変更したら、
		古いライブラリは削除してかまいません。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.27
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.27</pre><p xmlns="http://www.w3.org/1999/xhtml">従って、以上のようなライブラリがインストールされており、
	        新しいバイナリに対する <code class="command">ldd</code>
	        の出力が以下のようになる場合を考えます。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">libc.so.4 (DLL Jump 4.5pl26) -&gt; libc.so.4.6.29</pre><p xmlns="http://www.w3.org/1999/xhtml">このように最後の番号が 1 つか 2 つ古いだけならば、普通は
	        <code class="filename">/lib/libc.so.4.6.29</code>
	        をコピーする必要はありません。わずかに古いライブラリでもプログラムは動作するはずだからです。
	        もちろん、以下のように新しいライブラリと置き換えても構いません。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">シンボリックリンクのメカニズムは Linux
	      バイナリに<span class="emphasis"><em>のみ</em></span>必要なことに注意してください。
	      FreeBSD のランタイムリンカはメジャーリビジョン番号の一致したライブラリを検索するので、
	      ユーザが気にする必要はありません。</p></div></blockquote></div></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85799888"></a>11.2.2. Linux の ELF バイナリのインストール</h3></div></div></div><a id="idp85800528" class="indexterm"></a><p>ELF のバイナリを使うためには、
	<span class="quote">「<span class="quote">マークをつける (branding)</span>」</span> 作業が必要になります。
	マークのない ELF バイナリを実行しようとすると以下のようなエラーメッセージを受けとってしまうことでしょう。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>./my-linux-elf-binary</code></strong>
ELF binary type not known
Abort</pre><p>カーネルが FreeBSD の ELF バイナリと Linux のバイナリとを
	見分けられるようにするためには、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a>
	ユーティリティを以下のようにして使ってください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>brandelf -t Linux my-linux-elf-binary</code></strong></pre><a id="idp85805648" class="indexterm"></a><p>今では GNU のツールたちが
	ELF バイナリに自動的に適切なマークを付加するようになったので、
	今後はこの作業もだんだんと必要なくなってゆくでしょう。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85806672"></a>11.2.3. ホストネームリゾルバの設定</h3></div></div></div><p>DNS がうまく動作しなかったり、
	以下のようなエラーメッセージが表示され
	る場合は、<code class="filename">/compat/linux/etc/host.conf</code>
	ファイルを設定する必要があります。</p><pre class="screen">resolv+: "bind" is an invalid keyword resolv+:
"hosts" is an invalid keyword</pre><p>ファイルの内容を以下のように設定してください。</p><pre class="programlisting">order hosts, bind
multi on</pre><p>ここで、order は <code class="filename">/etc/hosts</code> を最初に検索し、
	次に DNS を検索するように指定します。
	<code class="filename">/compat/linux/etc/host.conf</code>
	がインストールされていない場合、
	Linux アプリケーションは FreeBSD の
	<code class="filename">/etc/host.conf</code> を使用しようとして、
	文法の違いによる警告を出力します。
	<code class="filename">/etc/resolv.conf</code> を利用してネームサーバの設定をしていない場合には、
	<code class="literal">bind</code> を削除してください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-mathematicau"></a>11.3. Mathematica のインストール</h2></div></div></div><p><span class="emphasis"><em><span class="application">Mathematica</span> 4.X 用に Murray Stokely
      がアップデートし、Bojan Bistrovic <code class="email">&lt;<a xmlns="" class="email" href="mailto:bojanb@physics.odu.edu">bojanb@physics.odu.edu</a>&gt;</code>
      がマージしました。</em></span></p><a id="idp85822032" class="indexterm"></a><p>この章では、<span class="application">Mathematica</span> 4.X Linux 版の FreeBSD
      へのインストールについて説明します。</p><p>Linux 版の <span class="application">Mathematica</span> は
      FreeBSD においても完璧に動きます。
      ただ、実行する際に Linux ABI を用いる必要があることを
      FreeBSD に教えるために、Wolfram によって出荷されているバイナリにマーク付け
      (branded) をする必要があります。</p><p><span class="application">Mathematica</span> や
      <span class="application">Mathematica for Students</span> の Linux 版は Wolfram
      (<a class="link" href="http://www.wolfram.com/" target="_top">http://www.wolfram.com/</a>)
      から直接注文することができます。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85826640"></a>11.3.1. Linux バイナリへのマーク付け (branding)</h3></div></div></div><p>Linux 用バイナリは Wolfram の <span class="application">Mathematica</span>
	CD-ROM の <code class="filename">Unix</code> ディレクトリにあります。
	インストーラーを起動する前にこのディレクトリをローカルディスクにコピーし、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a> により Linux バイナリにマークを付けます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /cdrom</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp -rp /cdrom/Unix/ /localdir/</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>brandelf -t Linux /localdir/Files/SystemFiles/Kernel/Binaries/Linux/*</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>brandelf -t Linux /localdir/Files/SystemFiles/FrontEnd/Binaries/Linux/*</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>brandelf -t Linux /localdir/Files/SystemFiles/Installation/Binaries/Linux/*</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>brandelf -t Linux /localdir/Files/SystemFiles/Graphics/Binaries/Linux/*</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>brandelf -t Linux /localdir/Files/SystemFiles/Converters/Binaries/Linux/*</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>brandelf -t Linux /localdir/Files/SystemFiles/LicenseManager/Binaries/Linux/mathlm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /localdir/Installers/Linux/</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./MathInstaller</code></strong></pre><p>また以下のようにすると、マーク付けされていない
	 ELF バイナリすべての扱いを、デフォルトで Linux
	 バイナリとすることが可能です。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl -w kern.fallback_elf_brand=3</code></strong></pre><p>これは FreeBSD システムに対して、
	 マーク付けされていない ELF バイナリが
	 Linux ABI を利用するように設定します。こうすることで、
	 CDROM から直接インストーラを実行することが可能になります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85839056"></a>11.3.2. Mathematica パスワードの取得</h3></div></div></div><p><span class="application">Mathematica</span> を起動する前に Wolfram から自分の
	<span class="quote">「<span class="quote">マシン ID</span>」</span> に対応したパスワードを取得しなければいけません。</p><a id="idp85844944" class="indexterm"></a><p>一旦 Linux 互換ランタイムライブラリをインストールし、
	<span class="application">Mathematica</span> を展開すれば Install ディレクトリにある
	<code class="command">mathinfo</code> プログラムを起動して
	<span class="quote">「<span class="quote">マシン ID</span>」</span> を得ることができます。
	このマシン ID は、最初に見つかったイーサネットカードの MAC アドレスをベースに生成されます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /localdir/Files/SystemFiles/Installation/Binaries/Linux</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mathinfo</code></strong>
disco.example.com 7115-70839-20412</pre><p>電子メールや電話、FAX などで Wolfram に登録する時にはこの
	<span class="quote">「<span class="quote">マシン ID</span>」</span> を渡します。
	するといくつかの数字から構成されるパスワードが返されるので、
	他の <span class="application">Mathematica</span>
	プラットホームでするのと全く同じように最初に
	<span class="application">Mathematica</span>
	を立ち上げる時にその情報を入力します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85851344"></a>11.3.3. ネットワーク経由での Mathematica フロントエンドの起動</h3></div></div></div><p><span class="application">Mathematica</span>
	は標準フォントセットにない特別な記号
	(積分記号、総和記号、ギリシャ文字など)
	を表示するために特殊なフォントを使用します。
	X プロトコルは、これらのフォントが
	<span class="emphasis"><em>ローカルマシンに</em></span>
	インストールされていることを要求します。
	これはつまり、ローカルマシンに (CD-ROM や <span class="application">Mathematica</span>
	がインストールされているホストマシンから)
	そのフォントをコピーしなければならないということです。
	これらのフォントは通常、CD-ROM の
	<code class="filename">/cdrom/Unix/Files/SystemFiles/Fonts</code> か、もしくはハードディスクの
	<code class="filename">/usr/local/mathematica/SystemFiles/Fonts</code>
	に置かれており、実際に使用されるフォントは <code class="filename">Type1</code> と
	<code class="filename">X</code> のサブディレクトリに格納されています。
	これらを利用するには次のような二つ方法があります。</p><p>一つは、フォントファイルをすべて
	<code class="filename">/usr/X11R6/lib/X11/fonts/</code>
	以下にある既存のフォントディレクトリにコピーする方法です。
	この場合、<code class="filename">fonts.dir</code> にフォント名を追加し、
	先頭行のフォント総数を変更することも必要になります。
	あるいは、フォントをコピーしたディレクトリで
	<code class="command">mkfontdir</code> を実行するだけでもかまいません。</p><p>もう一つの方法は、
	<code class="filename">/usr/X11R6/lib/X11/fonts/</code>
	にフォントディレクトリごとコピーする方法です。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/X11R6/lib/X11/fonts</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir X</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir MathType1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /cdrom/Unix/Files/SystemFiles/Fonts</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp X/* /usr/X11R6/lib/X11/fonts/X</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp Type1/* /usr/X11R6/lib/X11/fonts/MathType1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/X11R6/lib/X11/fonts/X</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkfontdir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd ../MathType1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkfontdir</code></strong></pre><p>そして、フォントパスに新しいフォントディレクトリを追加します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>xset fp+ /usr/X11R6/lib/X11/fonts/X</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>xset fp+ /usr/X11R6/lib/X11/fonts/MathType1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>XFree86 サーバを使用しているなら、
	<code class="filename">/etc/XF86Config</code>
	に加えることでこれらのフォントを自動的に読み込むことができます。</p><a id="idp85872976" class="indexterm"></a><p>
	<code class="filename">/usr/X11R6/lib/X11/fonts/Type1</code> という
	ディレクトリが<span class="emphasis"><em>存在していない</em></span>場合には、
	上記例の <code class="filename">MathType1</code> を
	<code class="filename">Type1</code>
	とすることができます。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-oracle"></a>11.4. Oracle のインストール</h2></div><div><span class="authorgroup">寄贈: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Moolenaar</span> <span class="firstname">Marcel</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp85882704" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85883984"></a>11.4.1. はじめに</h3></div></div></div><p>このドキュメントでは Oracle 8.0.5 と Oracle 8.0.5.1 Enterprise Edition
	の Linux 版を FreeBSD にインストールするための手順を解説します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85885136"></a>11.4.2. Linux 環境のインストール</h3></div></div></div><p>まずは Ports Collection から <code class="filename">linux_base</code> と
	<code class="filename">linux_devtools</code> をインストールしてください。
	これらの ports は FreeBSD 3.2 のリリース後にコレクションに加えられました。
	もし FreeBSD 3.2 もしくはそれよりも古いものを使っている場合は
	ports コレクションをアップデートしましょう。ついでに FreeBSD
	をアップデートするのもいいでしょう。もし <code class="filename">linux_base-6.1</code>
	や <code class="filename">linux_devtools-6.1</code> でうまくいかなければ
	5.2 を試してみてください。</p><p>もし賢いエージェント (intelligent agent) を起動したいなら
	Red Hat Tcl パッケージ <code class="filename">tcl-8.0.3-20.i386.rpm</code>
	もインストールする必要があるでしょう。
	公式の RPM パッケージをインストールするには一般的に次のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpm -i --ignoreos --root /compat/linux --dbpath /var/lib/rpm package</code></strong></pre><p>パッケージのインストール時にエラーが出てはいけません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85894096"></a>11.4.3. Oracle 環境の構築</h3></div></div></div><p>Oracleをインストールする前に、適切な環境を設定する必要があります。
	このドキュメントでは、
	Oracle のインストールガイドに書いてあるようなことではなく
	FreeBSD で Linux 用 Oracle
	を動かすために<span class="emphasis"><em>特別に</em></span>必要なことのみを解説します。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-kernel-tuning"></a>11.4.3.1. カーネルのチューニング</h4></div></div></div><a id="idp85896272" class="indexterm"></a><p>Oracle インストールガイドにあるように、
	  シェアードメモリーの最大サイズを設定しなければいけません。
	  FreeBSD では <code class="literal">SHMMAX</code> を使わないようにしてください。
	  <code class="literal">SHMMAX</code> は単に <code class="literal">SHMMAXPGS</code>
	  と <code class="literal">PGSIZE</code> から計算されるだけなのです。
	  従って、<code class="literal">SHMMAXPGS</code> を使うようにしましょう。
	  インストールガイドに記述されている他のオプションは使えます。
	  例えば以下のようにします。</p><pre class="programlisting">options SHMMAXPGS=10000
options SHMMNI=100
options SHMSEG=10
options SEMMNS=200
options SEMMNI=70
options SEMMSL=61</pre><p>これらのオプションを意図した Oracle
	  の使い方に合わせて設定してください。</p><p>また、
	  次のオプションがカーネルのコンフィギュレーションファイルにあることも確認します。</p><pre class="programlisting">options SYSVSHM #SysV shared memory
options SYSVSEM #SysV semaphores
options SYSVMSG #SysV interprocess communication</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-oracle-account"></a>11.4.3.2. Oracle 用アカウント</h4></div></div></div><p>他のアカウントを作るのと同じように Oracle 用のアカウントを作ります。
	  Oracle 用のアカウントに特別なのは Linux のシェルを割り当てるところだけです。
	  <code class="filename">/etc/shells</code> に <code class="literal">/compat/linux/bin/bash</code>
	  を加え、Oracle 用のアカウントに設定します。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-environment"></a>11.4.3.3. 環境設定</h4></div></div></div><p><code class="envar">ORACLE_HOME</code> や <code class="envar">ORACLE_SID</code>
	  といった通常の Oracle 用の変数の他に次の変数も設定しなければなりません。</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>変数</th><th>値</th></tr></thead><tbody><tr><td><code class="envar">LD_LIBRARY_PATH</code></td><td><code class="literal">$ORACLE_HOME/lib</code></td></tr><tr><td><code class="envar">CLASSPATH</code></td><td><code class="literal">$ORACLE_HOME/jdbc/lib/classes111.zip</code></td></tr><tr><td><code class="envar">PATH</code></td><td><code class="literal">/compat/linux/bin
/compat/linux/sbin
/compat/linux/usr/bin
/compat/linux/usr/sbin
/bin
/sbin
/usr/bin
/usr/sbin
/usr/local/bin
$ORACLE_HOME/bin</code></td></tr></tbody></table></div><p>全ての環境変数は <code class="filename">.profile</code>
	  で設定することをお勧めします。
	  完璧なサンプルは以下の通りです。</p><pre class="programlisting">ORACLE_BASE=/oracle; export ORACLE_BASE
ORACLE_HOME=/oracle; export ORACLE_HOME
LD_LIBRARY_PATH=$ORACLE_HOME/lib
export LD_LIBRARY_PATH
ORACLE_SID=ORCL; export ORACLE_SID
ORACLE_TERM=386x; export ORACLE_TERM
CLASSPATH=$ORACLE_HOME/jdbc/lib/classes111.zip
export CLASSPATH
PATH=/compat/linux/bin:/compat/linux/sbin:/compat/linux/usr/bin:/compat/linux/usr/sbin:/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:$ORACLE_HOME/bin
export PATH</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85922000"></a>11.4.4. Oracle のインストール</h3></div></div></div><p>インストーラーを起動する前に、<code class="filename">/var/tmp</code>
	に <code class="filename">.oracle</code>
	という名前のディレクトリを作る必要がありますが、
	これは Linux エミュレーターにおけるちょっとした不整合のためです。
	このディレクトリは誰でもが書けるか、もしくは oracle ユーザーのものにしておきます。
	これで特に問題なく Oracle がインストールできるでしょう。
	もし問題が起こったら、まずは Oracle の配布物や設定をチェックしてください。
	Oracle のインストールが終わったら次の二つのサブセクションで解説するパッチを当てます。</p><p>よくあるトラブルは、TCP プロトコルアダプターが正しくインストールされていないことです。
	そのため、一切 TCP リスナーを起動することができないのです。
	次の操作はこの問題を解決するのに役立ちます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/network/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make -f ins_network.mk ntcontab.o</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ar r libnetwork.a ntcontab.o</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/network/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make -f ins_network.mk install</code></strong></pre><p>もう一度 <code class="filename">root.sh</code> を起動するのを忘れないように!</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-patch-root"></a>11.4.4.1. root.sh へのパッチ</h4></div></div></div><p>Oracle をインストールする時、<code class="systemitem">root</code>
	  で行なう必要のあるいくつかの操作は <code class="filename">root.sh</code>
	  と呼ばれるシェルスクリプトに記録されます。
	  <code class="filename">root.sh</code> は <code class="filename">orainst</code>
	  ディレクトリにあります。次のパッチを root.sh に当てて
	  正しい場所にある <code class="command">chown</code> コマンドを使うようにするか、
	  代わりに Linux ネイティブなシェルのもとでスクリプトを走らせましょう。</p><pre class="programlisting">*** orainst/root.sh.orig Tue Oct 6 21:57:33 1998
--- orainst/root.sh Mon Dec 28 15:58:53 1998
***************
*** 31,37 ****
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/bin/chown
#
# Define variables to be used in this script
--- 31,37 ----
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/usr/sbin/chown
#
# Define variables to be used in this script</pre><p>CD-ROM からのインストールでない場合は <code class="filename">root.sh</code>
	  のソースにパッチを当ててもいいでしょう。
	  <code class="filename">rthd.sh</code> という名前でソースツリーの
	  <code class="filename">orainst</code> というディレクトリにあります。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-patch-tcl"></a>11.4.4.2. genclntsh へのパッチ</h4></div></div></div><p><code class="command">genclntsh</code>
	  スクリプトは一つの共有クライアントライブラリを生成するのに用いられます。
	  これはデモを作る時に使われます。
	  PATH の定義をコメントアウトするために次のパッチを当ててください。</p><pre class="programlisting">*** bin/genclntsh.orig Wed Sep 30 07:37:19 1998
--- bin/genclntsh Tue Dec 22 15:36:49 1998
***************
*** 32,38 ****
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst
--- 32,38 ----
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! #PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85937360"></a>11.4.5. Oracle の起動</h3></div></div></div><p>インストラクションに従えば、Linux でと同じように
	<span class="application">Oracle</span> を起動できるでしょう。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sapr3"></a>11.5. SAP R/3 (4.6B - IDES) のインストール</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Kipp</span> <span class="firstname">Holger</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">SGML への変換: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Vaschetto</span> <span class="firstname">Valentino</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp85955536" class="indexterm"></a><p>SAP サポートチームは、
      認定されたプラットフォームのみをサポートしているので、
      FreeBSD 上への SAP システムのインストールについてはサポートしていません。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="preface"></a>11.5.1. まえがき</h3></div></div></div><p>この文書は、<span class="application">SAP R/3 4.6B IDES-System</span>
	with <span class="application">Oracle 8.0.5</span> for
	Linux を FreeBSD 4.3 上にインストールする方法を、FreeBSD
	4.3-STABLE と <span class="application">Oracle 8.0.5</span>
	のインストール方法と一緒に説明しています。</p><p>この文書では、重要な手順をすべて詳しく説明しようとしていますが、
	<span class="application">Oracle</span> および <span class="application">SAP R/3</span>
	のインストールの手引きを置き換えるものではありません。</p><p><span class="application">SAP</span> や <span class="application">Oracle</span>
	に特有の質問については、<span class="application">SAP R/3</span> の
	Linux 版についてくる文書や <span class="application">Oracle</span> と
	<span class="application">SAP OSS</span>
	が出している資料をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="software"></a>11.5.2. ソフトウェア</h3></div></div></div><p>SAP のインストールには以下の CDROM を使いました。</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>名称</th><th>番号</th><th>説明</th></tr></thead><tbody><tr><td>KERNEL</td><td>51009113</td><td>SAP Kernel Oracle /
	  Installation / AIX, Linux, Solaris</td></tr><tr><td>RDBMS</td><td>51007558</td><td>Oracle / RDBMS 8.0.5.X /
	  Linux</td></tr><tr><td>EXPORT1</td><td>51010208</td><td>IDES / DB-Export / Disc
	  1 of 6</td></tr><tr><td>EXPORT2</td><td>51010209</td><td>IDES / DB-Export / Disc
	  2 of 6</td></tr><tr><td>EXPORT3</td><td>51010210</td><td>IDES / DB-Export /
	  Disc3 of 6</td></tr><tr><td>EXPORT4</td><td>51010211</td><td>IDES / DB-Export /
	  Disc4 of 6</td></tr><tr><td>EXPORT5</td><td>51010212</td><td>IDES / DB-Export /
	  Disc5 of 6</td></tr><tr><td>EXPORT6</td><td>51010213</td><td>IDES / DB-Export /
	  Disc6 of 6</td></tr></tbody></table></div><p>更に、<span class="application">Oracle 8 Server</span>
	(Pre-production バージョン 8.0.5 for Linux, カーネルバージョン
	2.0.33) の CD も使いましたが、これは必ずしも必要ではありません。
	また、もちろん FreeBSD 4.3-STABLE
	(4.3-RELEASE から間もない時期のものです) も利用しました。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sap-notes"></a>11.5.3. SAP ノート</h3></div></div></div><p>以下のノートは、<span class="application">SAP R/3</span>
	をインストールする前に読んでおくべき、
	もしくはインストールの際に役立つことが分かっているものです。</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>番号</th><th>題名</th></tr></thead><tbody><tr><td>0171356</td><td>SAP Software auf Linux: grundlegenden
	  Anmerkungen</td></tr><tr><td>0201147</td><td>INST: 4.6C R/3 Inst. on UNIX -
	  Oracle</td></tr><tr><td>0373203</td><td>Update / Migration Oracle 8.0.5 --&gt;
	  8.0.6/8.1.6 LINUX</td></tr><tr><td>0072984</td><td>Release of Digital UNIX 4.0B for
	  Oracle</td></tr><tr><td>0130581</td><td>R3SETUP step DIPGNTAB terminates</td></tr><tr><td>0144978</td><td>Your system has not been installed
	  correctly</td></tr><tr><td>0162266</td><td>Questions and tips for R3SETUP on Windows
	  NT / W2K</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="hardware-requirements"></a>11.5.4. ハードウェア要件</h3></div></div></div><p>以下の機器であれば <span class="application">SAP R/3
	System</span> (4.6B) を動かすのに十分です。</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>構成部品</th><th>4.6B</th><th>4.6C</th></tr></thead><tbody><tr><td>プロセッサ</td><td>2 × 800MHz Pentium III</td><td>2 × 800MHz Pentium III</td></tr><tr><td>メモリ</td><td>1GB ECC</td><td>2GB ECC</td></tr><tr><td>ハードディスク容量</td><td>50-60GB (IDES)</td><td>50-60GB (IDES)</td></tr></tbody></table></div><p>業務で利用するなら、大容量キャッシュメモリを備えた Xeon
	プロセッサ、高速なディスク (SCSI, ハードウェア RAID コントローラ)、
	USV および ECC-RAM を推奨します。
	ハードディスク容量が大きいのは、設定済みの IDES システムが、
	インストール時に 27 GB のデータベースファイルを作成するためです。
	通常、インストール後には一部のテーブル領域を拡張する必要があります。</p><p>私は、800MHz の Pentium III を 2 個、Adaptec 29160
	Ultra160 SCSI アダプタ (40/80 GB DLT テープドライブと CDROM
	にアクセスするため)、Mylex AcelleRAID
	(2 チャンネル、ファームウェアバージョン 6.00-1-00、32MB RAM)
	を積んだデュアルプロセッサボードを使いました。Mylex RAID
	コントローラには 17GB のハードディスク 2 台 (ミラー) と
	36GB のハードディスク (RAID 5) 4 台が接続されています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installation"></a>11.5.5. FreeBSD 4.3-STABLE のインストール</h3></div></div></div><p>まず、FreeBSD 4.3-STABLE をインストールしました。FTP
	経由のデフォルトインストールを行いました。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-via-ftp"></a>11.5.5.1. FTP 経由のインストール</h4></div></div></div><p>ディスクイメージ kern.flp と mfsroot.flp を入手して、
	  フロッピーディスクに書き込んでください (私は
	  ftp7.de.freebsd.org から入手しました。
	  適切なミラーサイトを選んでください)。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=kern.flp of=/dev/fd0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dd if=mfsroot.flp of=/dev/fd0</code></strong> </pre><p>2 つのイメージファイルそれぞれについて、
	  別のディスクを使うようにしてください。それから kern.flp
	  を書き込んだフロッピーディスクで起動して、指示に従ってください。
	  私は、次のようにディスクを分割しました。</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>ファイルシステム</th><th>容量 (1kB ブロック)</th><th>容量 (GB)</th><th>マウントポイント</th></tr></thead><tbody><tr><td>/dev/da0s1a</td><td>1.016.303</td><td>1</td><td>/</td></tr><tr><td>/dev/da0s1b</td><td> </td><td>6</td><td>&lt;swap&gt;</td></tr><tr><td>/dev/da0s1e</td><td>2.032.623</td><td>2</td><td>/var</td></tr><tr><td>/dev/da0s1f</td><td>8.205.339</td><td>8</td><td>/usr</td></tr><tr><td>/dev/da1s1e</td><td>45.734.361</td><td>45</td><td>/compat/linux/oracle</td></tr><tr><td>/dev/da1s1f</td><td>2.032.623</td><td>2</td><td>/compat/linux/sapmnt</td></tr><tr><td>/dev/da1s1g</td><td>2.032.623</td><td>2</td><td>/compat/linux/usr/sap</td></tr></tbody></table></div><p>はじめに、Mylex のソフトウェアで論理ドライブ
	  2 台を設定して初期化しなければなりませんでした。
	  このソフトウェアはボードに組み込まれていて、
	  PC 起動時に動かせます。</p><p>このディスクの割り当て方は SAP
	  の推奨と少し異なることに注意してください。SAP は oracle (その他)
	  サブディレクトリを別途マウントするように提案していますが、
	  私は簡便であることを優先して、
	  実際にサブディレクトリとして作成するだけにしました。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="getlatestsources"></a>11.5.5.2. 最新の STABLE のソースコードの入手</h4></div></div></div><p>FreeBSD 4.3-STABLE 以降では、
	  最新のソースコードは楽に手に入ります。それより前のバージョンの
	  FreeBSD では、/etc/cvsup
	  に自分で書いたスクリプトを置いていました。FreeBSD 4.3 で
	  <span class="application">CVSup</span> を設定するのは簡単です。
	  <code class="systemitem">root</code> で以下を実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp /etc/defaults/make.conf /etc/make.conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/make.conf</code></strong> </pre><p><code class="filename">/etc/make.conf</code> ファイルで、
	  以下の項目を有効にしておかねばなりません。</p><pre class="programlisting">SUP_UPDATE=    yes
SUP=           /usr/local/bin/cvsup
SUPFLAGS=      -g -L 2
SUPHOST=       cvsup8.FreeBSD.org
SUPFILE=       /usr/share/examples/cvsup/stable-supfile
PORTSSUPFILE=  /usr/share/examples/cvsup/ports-supfile
DOCSUPFILE=    /usr/share/examples/cvsup/doc-supfile</pre><p><span class="emphasis"><em>SUPHOST</em></span>
	  の値は適切なものに変更してください。
	  <code class="filename">/usr/share/examples/cvsup</code>
	  にある supfile で十分でしょう。
	  もしもすべてのドキュメントを持ってくるのが嫌なら、
	  <span class="emphasis"><em>DOCSUPFILE</em></span>
	  の項は無効なままにしておいてください。
	  ここまでくれば、<span class="application">cvsup</span>
	  を起動して stable
	  の最新のソースコードを入手するのはたやすいことです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make update</code></strong> </pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makeworldandnewkernel"></a>11.5.5.3. <code class="command">make world</code> と新しいカーネル</h4></div></div></div><p>最初にすべきことは、ソースコードのインストールです。root
	  ユーザで次の作業を行ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make world</code></strong> </pre><p>最後まで実行できたら、
	  新しいカーネルの作成と設定を行えます。
	  通常はここでカーネルコンフィグレーションファイルをカスタマイズします。
	  コンピュータに <code class="systemitem">troubadix</code> という名前をつけているので、
	  コンフィグレーションファイルを <code class="filename">troubadix</code>
	  という名称にするのが自然です。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp GENERIC TROUBADIX</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi TROUBADIX</code></strong> </pre><p>この段階で、どのドライバを使うか、
	  使わないかといったことを決定できます。詳しい説明は、適当な文書や
	  <code class="filename">LINT</code> ファイルをご覧ください。</p><p>また、後述するパラメータをいれることもできます。
	  新しいカーネルを作成するには次のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>config TROUBADIX</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/compile/TROUBADIX</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make depend</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong> </pre><p><code class="command">make install</code> が無事終わったら、
	  コンピュータを再起動して新しいカーネルを動かしてください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingthelinuxenviornment"></a>11.5.6. Linux 環境のインストール</h3></div></div></div><p>(2001 年 5 月 2 日時点の 4.3-STABLE 用に) 必要な
	RPM ファイルをダウンロードするのに多少問題があったので、
	以下の場所も (他がすべてだめで、ここが古くなってしまっていなければ)
	試してみるとよいかもしれません。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ftp7.de.freebsd.org/pub/FreeBSD/distfiles/rpm</p></li><li class="listitem"><p>ftp.redhat.com/pub/redhat/linux/6.1/en/os/i386/RedHat/RPMS</p></li></ul></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installinglinuxbase-system"></a>11.5.6.1. Linux ベースシステムのインストール</h4></div></div></div><p>まず、Linux のベースシステムを (root で)
	  インストールしなければなりません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/emulators/linux_base</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make package</code></strong> </pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installinglinuxdevelopment"></a>11.5.6.2. Linux 開発環境のインストール</h4></div></div></div><p>次に、必要なら Linux 開発環境をインストールします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/devel/linux_devtools</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make package</code></strong> </pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingnecessaryrpms"></a>11.5.6.3. 必要な RPM のインストール</h4></div></div></div><a id="idp86100304" class="indexterm"></a><p>R3SETUP プログラムを動かすには、pam
	  サポートが必要になります。
	  これが更に他の package を必要としているので、
	  私は結局いくつもの package をインストールすることになりました。
	  それでも、pam は足りない package があると文句をいうので、
	  強制的にインストールしたら動きました。
	  pam 以外にインストールした package が本当に必要なのか、pam
	  package をインストールするのに十分だったのかよくわかっていません。</p><p>なんにせよ、これが私がインストールした package 一覧です。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>cracklib-2.7-5.i386.rpm</p></li><li class="listitem"><p>cracklib-dicts-2.7-5.i386.rpm</p></li><li class="listitem"><p>pwdb-0.60-1.i386.rpm</p></li><li class="listitem"><p>pam-0.68-7.i386.rpm</p></li></ul></div><p>これらの package は、
	  以下のコマンドでインストールしました。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpm -i --ignoreos --root /compat/linux --dbpath /var/lib/rpm &lt;package_name&gt;</code></strong> </pre><p>ただし、pam
	  パッケージは次のようにして強制的にインストールしました。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpm -i --ignoreos --nodeps --root /compat/linux --dbpath /var/lib/rpm pam-0.68-7.i386.rpm</code></strong> </pre><p><span class="application">Oracle</span> が intelligent agent
	  を動作させるには、次の RedHat Tcl package を (FreeBSD
	  ハンドブックにあるように) インストールしなければなりませんでした。
	  <code class="filename">tcl-8.0.5-30.i386.rpm</code> (そうしないと、
	  <span class="application">Oracle</span>
	  インストール中の再リンクがうまくゆきません)。
	  <span class="application">Oracle</span>
	  の再リンクについては他にも問題がありますが、
	  私が理解している限りでは Oracle-Linux の問題で、FreeBSD
	  に特有のものではありません。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingsapr3env"></a>11.5.7. SAP/R3 環境の構築</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="filesystemsandmountpoints"></a>11.5.7.1. 必要となるファイルシステムとマウントポイントの作成</h4></div></div></div><p>単純なインストールでは、
	  次のファイルシステムを作成すれば事足ります。</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>マウントポイント</th><th>サイズ (GB)</th></tr></thead><tbody><tr><td>/compat/linux/oracle</td><td>45 GB</td></tr><tr><td>/compat/linux/sapmnt</td><td>2 GB</td></tr><tr><td>/compat/linux/usr/sap</td><td>2 GB</td></tr></tbody></table></div><p>また、私は FreeBSD が正しいパスを見付けられるように、
	  いくつかリンクを作成しました。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/oracle /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/sapmnt /sapmnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/usr/sap /usr/sap</code></strong> </pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingusersanddirectories"></a>11.5.7.2. ユーザとディレクトリの作成</h4></div></div></div><p><span class="application">SAP R/3</span> には、
	  2 名のユーザと 3 つのグループが必要です。
	  ユーザ名は 3 文字からなる <span class="application">SAP</span> システム ID (SID)
	  に準じています。SID の中には <span class="application">SAP</span>
	  が予約しているものがあります
	  (たとえば <span class="emphasis"><em>SAP</em></span> や <span class="emphasis"><em>NIX</em></span>
	  です。すべて網羅した一覧は SAP のドキュメントをご覧ください)。
	  IDES のインストールでは、<span class="emphasis"><em>IDS</em></span> を使いました。
	  したがって、次のグループができます (グループ ID
	  は異なっていてもかまいません。
	  これは単に私がインストールした時に使用した値です)。</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>グループ ID</th><th>グループ名</th><th>説明</th></tr></thead><tbody><tr><td>100</td><td>dba</td><td>データベース管理者</td></tr><tr><td>101</td><td>sapsys</td><td>SAP システム</td></tr><tr><td>102</td><td>oper</td><td>データベースオペレータ</td></tr></tbody></table></div><p>デフォルトの Oracle のインストールでは、
	  <code class="systemitem">dba</code> グループだけが使われます。
	  <code class="systemitem">oper</code> グループとして、
	  <code class="systemitem">dba</code> を使う人もいます。(詳しくは Oracle と
	  SAP のドキュメントを参照してください)。</p><p>以下のユーザも必要になります。</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th>ユーザ ID</th><th>ユーザ名</th><th>一般名称</th><th>グループ</th><th>追加グループ</th><th>説明</th></tr></thead><tbody><tr><td>1000</td><td>idsadm</td><td>&lt;sid&gt;adm</td><td>sapsys</td><td>oper</td><td>SAP 管理者</td></tr><tr><td>1002</td><td>oraids</td><td>ora&lt;sid&gt;</td><td>dba</td><td>oper</td><td>DB 管理者</td></tr></tbody></table></div><p><code class="command">adduser</code> でユーザを追加するには、
	  以下の項目が必要になります
	  (シェルとホームディレクトリを控えてください)。
	  SAP 管理者については、</p><pre class="programlisting">Name: idsadm            &lt;sid&gt;adm
Password: ******
Fullname: SAP IDES Administrator
Uid: 1000
Gid: 101 (sapsys)
Class:
Groups: sapsys dba
HOME: /home/idsadm      /home/&lt;sid&gt;adm
Shell: /bin/sh</pre><p>そしてデータベース管理者については、</p><pre class="programlisting">Name: oraids          ora&lt;sid&gt;
Password: ******
Fullname: Oracle IDES Administrator
Uid: 1002
Gid: 100 (dba)
Class:
Groups: dba
HOME: /oracle/IDS     /oracle/&lt;sid&gt;
Shell: /bin/sh</pre><p>あなたが <code class="systemitem">dba</code> と
	  <code class="systemitem">oper</code> の両方のグループを使っていたら、
	  ここには <code class="systemitem">oper</code>
	  グループもいれるべきです。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingdirectories"></a>11.5.7.3. ディレクトリ作成</h4></div></div></div><p>以下のディレクトリは、
	  普通は別のファイルシステムとして作成します。
	  どうするかは、あなたの要件に応じて決めてください。
	  結局はすべてが同じ RAID 5 におかれるので、
	  私は単なるディレクトリにしました。</p><p>まず、一部のディレクトリに (<code class="systemitem">root</code>
	  ユーザで) 所有者と権限を設定しましょう。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 775 /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 777 /sapmnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown root:dba /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown idsadm:sapsys /compat/linux/usr/sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmow 775 /compat/linux/usr/sap</code></strong> </pre><p>第二に、ユーザ ora&lt;sid&gt;
	  権限でディレクトリを作成します。
	  すべて /oracle/IDS のサブディレクトリになります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - oraids</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir mirrlogA mirrlogB origlogA origlogB</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir sapdata1 sapdata2 sapdata3 sapdata4 sapdata5 sapdata6</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir saparch sapreorg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong> </pre><p>第三段階では、<code class="systemitem">idsadm</code> (&lt;sid&gt;adm)
	  ユーザ権限でディレクトリを作成します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - idsadm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir IDS</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir trans</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong> </pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="entriesinslashetcslashservices"></a>11.5.7.4. /etc/services 内の項目</h4></div></div></div><p>SAP R/3 は、<code class="filename">/etc/services</code>
	  にいくつか項目を必要としますが、FreeBSD
	  にインストールする場合は正しく設定されません。
	  次の項目を追加してください
	  (少なくとも、インスタンス番号に対応する項目が必要で、
	  この場合は <span class="emphasis"><em>00</em></span> です。
	  <span class="emphasis"><em>dp</em></span>, <span class="emphasis"><em>gw</em></span>,
	  <span class="emphasis"><em>sp</em></span> および <span class="emphasis"><em>ms</em></span>
	  について
	  <span class="emphasis"><em>00</em></span> から <span class="emphasis"><em>99</em></span>
	  まで項目を追加してもなんの問題もないでしょう)。</p><pre class="programlisting">sapdp00  3200/tcp # SAP Dispatcher.      3200 + インスタンス番号
sapgw00  3300/tcp # SAP Gateway.         3300 + インスタンス番号
sapsp00  3400/tcp #                      3400 + インスタンス番号
sapms00  3500/tcp #                      3500 + インスタンス番号
sapmsIDS 3600/tcp # SAP Message Server.  3600 + インスタンス番号</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="necessarylocales"></a>11.5.7.5. 必要となるロケール</h4></div></div></div><a id="idp86227152" class="indexterm"></a><p>SAP は、デフォルトの RedHat
	  のインストールでは入らないロケールを少なくとも
	  2 つ必要とします。
	  SAP は、必要な RPM を FTP
	  サーバからダウンロードする形で提供しています
	  (OSS アクセス契約している顧客でなければアクセスできません)。
	  必要な RPM の一覧は note 0171356 をご覧ください。</p><p>適切なリンクを (たとえば <span class="emphasis"><em>de_DE</em></span> と
	  <span class="emphasis"><em>en_US</em></span> から) 作成するという手もありますが、
	  業務用システムでそうすることはお勧めしません
	  (いまのところ、IDES システムで問題なく動いてはいますが)。
	  必要なのは、次のロケールです。</p><pre class="programlisting">de_DE.ISO-8859-1
en_US.ISO-8859-1</pre><p>このロケールがないと、
	  インストール時になんらかの問題が起きるでしょう。
	  それを (たとえば CENTRDB.R3S ファイルで問題の段階を
	  OK にして) 無視してしまうと、追加でなにかしないと
	  SAP システムにログオンできないでしょう。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="kerneltuning"></a>11.5.7.6. カーネルのチューニング</h4></div></div></div><a id="idp86235088" class="indexterm"></a><p>SAP R/3 システムには多くのリソースが必要です。
	  そのため、私はカーネルコンフィグレーションファイルに
	  以下のパラメータを追加しました。

	</p><pre class="programlisting"># Set these for memory pigs (SAP and Oracle):
options MAXDSIZ="(1024*1024*1024)"
options DFLDSIZ="(1024*1024*1024)" # System V options needed.
options SYSVSHM #SYSV-style shared memory
options SHMMAXPGS=262144 #max amount of shared mem. pages
options SHMMNI=256 #max number of shared memory ident if.
options SHMSEG=100 #max shared mem.segs per process
options SYSVMSG #SYSV-style message queues
options MSGSEG=32767 #max num. of mes.segments in system
options MSGSSZ=32 #size of msg-seg. MUST be power of 2
options MSGMNB=65535 #max char. per message queue
options MSGTQL=2046 #max amount of msgs in system
options SYSVSEM #SYSV-style semaphores
options SEMMNU=256 #number of semaphore UNDO structures
options SEMMNS=1024 #number of semaphores in system
options SEMMNI=520 #number of semaphore indentifiers
options SEMUME=100 #number of UNDO keys</pre><p>SAP についてくる文書に最小値が指定されています。Linux
	  に関する記述はないので、詳しいことは HP-UX (32-bit)
	  の節を参照してください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingsapr3"></a>11.5.8. SAP R/3 のインストール</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="preparingsapcdroms"></a>11.5.8.1. SAP CDROM の準備</h4></div></div></div><p>インストールの際にマウントしてアンマウントしなければならない
	  CDROM が山ほどあります。十分な数の
	  CDROM ドライブを持っていれば、
	  すべてマウントしてしまえばよいでしょう。私は、CDROM
	  の中身をそれぞれに対応するディレクトリにコピーすることにしました。</p><pre class="programlisting">/oracle/IDS/sapreorg/&lt;cd-name&gt;</pre><p>ここで、&lt;cd-name&gt; は <code class="filename">KERNEL</code>,
	  <code class="filename">RDBMS</code>, <code class="filename">EXPORT1</code>,
	  <code class="filename">EXPORT2</code>, <code class="filename">EXPORT3</code>,
	  <code class="filename">EXPORT4</code>, <code class="filename">EXPORT5</code>
	  および <code class="filename">EXPORT6</code>
	  のいずれかです。すべてのファイル名を大文字にするか、
	  さもなければ、マウントする際に -g オプションをつけるべきです。
	  次のコマンドを使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount_cd9660 -g /dev/cd0a /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp -R /mnt/* /oracle/IDS/sapreorg/&lt;cd-name&gt;</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>umount /mnt</code></strong> </pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="runningtheinstall-script"></a>11.5.8.2. インストールスクリプトの実行</h4></div></div></div><p>まず、インストールディレクトリを用意しなければなりません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/IDS/sapreorg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd install</code></strong> </pre><p>その後、インストールスクリプトを起動すると、
	  関連するファイルがほぼすべてインストールディレクトリにコピーされます。</p><p><code class="filename">/oracle/IDS/sapreorg/KERNEL/UNIX/INSTTOOL.SH</code></p><p>これは、完全にカスタマイズされた SAP R/3
	  デモシステム付きの IDES のインストールなので、EXPORT CD は
	  3 枚ではなく 6 枚あります。この時点では、
	  インストールテンプレート CENTRDB.R3S
	  は標準の中心インスタンス (R/3 とデータベース)
	  をインストールするためのもので、
	  IDES 中心インスタンスをインストールするためのものではありません。
	  ですから、それに対応する CENTRDB.R3S ファイルを
	  EXPORT1 ディレクトリからコピーしてください。さもないと、
	  R3SETUP は EXPORT CD を 3 枚しか要求しません。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="startr3setup"></a>11.5.8.3. R3SETUP の起動</h4></div></div></div><p>LD_LIBRARY_PATH
	  が正しく設定されていることを確認してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>export LD_LIBRARY_PATH=/oracle/IDS/lib:/sapmnt/IDS/exe:/oracle/805_32/lib</code></strong> </pre><p>インストールディレクトリから root ユーザで
	  R3SETUP を起動してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/IDS/sapreorg/install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRDB.R3S</code></strong> </pre><p>スクリプトがいくつか質問してきます
	  (デフォルトが括弧に囲まれて表示され、
	  その後に実際に入力します)。</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>質問</th><th>デフォルト</th><th>入力</th></tr></thead><tbody><tr><td>Enter SAP System ID
	      (SAP システム ID を入力してください)</td><td>[C11]</td><td>IDS&lt;ret&gt;</td></tr><tr><td>Enter SAP Instance Number
	      (SAP インスタンス番号を入力してください)</td><td>[00]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter SAPMOUNT Directory
	      (SAPMOUNT ディレクトリを入力してください)</td><td>[/sapmnt]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter name of SAP central host
	      (SAP 中心ホストの名称を入力してください)</td><td>[troubadix.domain.de]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter name of SAP db host
	      (SAP データベースホストの名称を入力してください)</td><td>[troubadix]</td><td>&lt;ret&gt;</td></tr><tr><td>Select character set
	      (文字集合を選択してください)</td><td>[1] (WE8DEC)</td><td>&lt;ret&gt;</td></tr><tr><td>Enter Oracle server version
	      (Oracle サーバのバージョンを入力してください)
	      (1) Oracle 8.0.5, (2) Oracle 8.0.6, (3) Oracle 8.1.5, (4) Oracle 8.1.6</td><td> </td><td>1&lt;ret&gt;</td></tr><tr><td>Extract Oracle Client archive
	      (Oracle クライアントアーカイブを展開しますか)</td><td>[1] (はい、展開します)</td><td>&lt;ret&gt;</td></tr><tr><td>Enter path to KERNEL CD
	      (KERNEL CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/KERNEL</td></tr><tr><td>Enter path to RDBMS CD
	      (RDBMS CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/RDBMS</td></tr><tr><td>Enter path to EXPORT1 CD
	      (EXPORT1 CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT1</td></tr><tr><td>Directory to copy EXPORT1 CD
	      (EXPORT1 CD をコピーするディレクトリ)</td><td>[/oracle/IDS/sapreorg/CD4_DIR]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter path to EXPORT2 CD
	      (EXPORT2 CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT2</td></tr><tr><td>Directory to copy EXPORT2 CD
	      (EXPORT2 CD をコピーするディレクトリ)</td><td>[/oracle/IDS/sapreorg/CD5_DIR]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter path to EXPORT3 CD
	      (EXPORT3 CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT3</td></tr><tr><td>Directory to copy EXPORT3 CD
	      (EXPORT3 CD をコピーするディレクトリ)</td><td>[/oracle/IDS/sapreorg/CD6_DIR]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter path to EXPORT4 CD
	      (EXPORT4 CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT4</td></tr><tr><td>Directory to copy EXPORT4 CD
	      (EXPORT4 CD をコピーするディレクトリ)</td><td>[/oracle/IDS/sapreorg/CD7_DIR]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter path to EXPORT5 CD
	      (EXPORT5 CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT5</td></tr><tr><td>Directory to copy EXPORT5 CD
	      (EXPORT5 CD をコピーするディレクトリ)</td><td>[/oracle/IDS/sapreorg/CD8_DIR]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter path to EXPORT6 CD
	      (EXPORT6 CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT6</td></tr><tr><td>Directory to copy EXPORT6 CD
	      (EXPORT6 CD をコピーするディレクトリ)</td><td>[/oracle/IDS/sapreorg/CD9_DIR]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter amount of RAM for SAP + DB
	      (SAP + DB に割り当てる RAM の合計を入力してください)</td><td> </td><td>850&lt;ret&gt; (MB)</td></tr><tr><td>Service Entry Message Server</td><td>[3600]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter Group-ID of sapsys
	      (sapsys のグループ ID を入力してください)</td><td>[101]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter Group-ID of oper
	      (oper のグループ ID を入力してください)</td><td>[102]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter Group-ID of dba
	      (dba のグループ ID を入力してください)</td><td>[100]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter User-ID of &lt;sid&gt;adm
	      (&lt;sid&gt;adm のユーザ ID を入力してください)</td><td>[1000]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter User-ID of ora&lt;sid&gt;
	      (ora&lt;sid&gt; のユーザ ID を入力してください)</td><td>[1002]</td><td>&lt;ret&gt;</td></tr><tr><td>Number of parallel procs
	      (並列プロセスの数)</td><td>[2]</td><td>&lt;ret&gt;</td></tr></tbody></table></div><p>CD をそれぞれ別の場所にコピーしないと、SAP
	  インストーラは (CD 内の <code class="filename">LABEL.ASC</code>
	  ファイルで識別される) 必要な CD を見つけられず、CD
	  を挿入 / マウントして承認するかマウントパスを入力するよう求めてくるでしょう。</p><p><code class="filename">CENTRDB.R3S</code>
	  ファイルには、間違いがないわけではありません。
	  私の場合は、EXPORT4 を再度要求されました
	  (が、正しいキーを表示していたので
	  (6_LOCATION、それから 7_LOCATION など))、
	  正しい値を入力して進めて問題ありませんでした。
	  いらいらしないようにしてください。</p><p>後で触れるいくつかの問題を除けば、Oracle
	  データベースソフトウェアをインストールするところまでは
	  素直に進むはずです。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingoracle805"></a>11.5.9. Oracle 8.0.5 のインストール</h3></div></div></div><p>Linux と Oracle DB で起こりうる問題についての SAP-Notes と
	Oracle の Readme を読むようにしてください。
	すべてではないにしても、
	ほとんどは互換性のないライブラリに起因しています。</p><p>Oracle のインストールについて詳しいことは、<a class="link" href="linuxemu-oracle.html" target="_top">Oracle のインストール</a>
	の章をご覧ください。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingtheoracle805withorainst"></a>11.5.9.1. orainst による Oracle 8.0.5 のインストール</h4></div></div></div><p><span class="application">Oracle 8.0.5</span>
	  を利用する予定なら、
	  無事に再リンクするのにライブラリがいくつか追加で必要です。
	  なぜなら、Oracle 8.0.5 は古い glibc (RedHat 6.0)
	  とリンクされていますが、RedHat 6.1 は新しい glibc
	  を利用しているからです。
	  ですから、リンクが行われることを保証するには、
	  次の追加パッケージをインストールしなければなりません。</p><p><code class="filename">compat-libs-5.2-2.i386.rpm</code></p><p><code class="filename">compat-glibc-5.2-2.0.7.2.i386.rpm</code></p><p><code class="filename">compat-egcs-5.2-1.0.3a.1.i386.rpm</code></p><p><code class="filename">compat-egcs-c++-5.2-1.0.3a.1.i386.rpm</code></p><p><code class="filename">compat-binutils-5.2-2.9.1.0.23.1.i386.rpm</code></p><p>詳しくは、対応する SAP-Note や Oracle Readme
	  をご覧ください。他に選択肢がなければ
	  (私がインストールした時は、確認している暇がありませんでした)、
	  元のバイナリまたは再リンクされたバイナリを、
	  元の RedHat システムから持ってきて使うこともできるでしょう。</p><p>インテリジェントエージェントをコンパイルするために、
	  RedHat Tcl パッケージがインストールされていなければなりません。
	  <code class="filename">tcl-8.0.3-20.i386.rpm</code>
	  が入手できないなら、RedHat 6.1 用の
	  <code class="filename">tcl-8.0.5-30.i386.rpm</code>
	  など新しいものでも構いません。</p><p>再リンク以外は、インストールは簡単です。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - oraids</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export TERM=xterm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export ORACLE_TERM=xterm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export ORACLE_HOME=/oracle/IDS</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /ORACLE_HOME/orainst_sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./orainst</code></strong> </pre><p>ソフトウェアのインストールが終わるまで、すべての画面で
	  Enter を押して承認してください。ただし、
	  <span class="emphasis"><em>Oracle On-Line Text Viewer</em></span>
	  は現時点では Linux 版がないので選択を外してください。
	  その後、Oracle は利用可能な
	  <code class="command">gcc</code>, <code class="command">egcs</code> や
	  <code class="command">i386-redhat-linux-gcc</code> ではなく、
	  <code class="command">i386-glibc20-linux-gcc</code>
	  で再リンクしようとします。</p><p>時間が限られていたので、私は
	  <span class="application">Oracle 8.0.5 PreProduction</span>
	  リリースのバイナリを利用することにしました。
	  最初 RDBMS-CD 収録のバージョンを動かそうとして失敗し、
	  その時点では正しい RPM
	  を見つけて利用するのはまるで悪夢のようだったからです。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingtheoracle805preproduction"></a>11.5.9.2. Linux (Kernel 2.0.33) 用の
	  Oracle 8.0.5 Pre-Production リリースのインストール</h4></div></div></div><p>これをインストールするのは簡単です。
	  CD をマウントして、インストーラを起動してください。
	  インストーラが Oracle ホームディレクトリの位置をたずねて、
	  そこにすべてのバイナリをコピーします。
	  もっとも、私はその前の RDBMS
	  インストールを試した時の残りを削除していませんでした。</p><p>この後、Oracle データベースは問題なく起動できました。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="continuewithsapr4installation"></a>11.5.10. SAP R/3 のインストールの続行</h3></div></div></div><p>まず、<code class="systemitem">idsamd</code> (&lt;sid&gt;adm) ユーザと
	<code class="systemitem">oraids</code> (ora&lt;sid&gt;) ユーザの環境設定を確認してください。
	両者とも、<code class="filename">.profile</code>,
	<code class="filename">.login</code> と <code class="filename">.cshrc</code>
	をもっていて、いずれも <code class="command">hostname</code>
	を使っているはずです。
	そのシステムのホスト名が完全修飾名であれば、すべてのファイルで
	<code class="command">hostname</code> を
	<code class="command">hostname -s</code> に変更する必要があります。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="databaseload"></a>11.5.10.1. データベースの読み込み</h4></div></div></div><p>その後、(exit を選択したかどうかによって) R3SETUP
	  を再起動または継続実行します。R3SETUP
	  は、テーブル領域を作成し、EXPORT1 から EXPORT6
	  までデータを R3load でデータベースに読み込みます
	  (これは IDES システムです。違う場合は、EXPORT1 から EXPORT3
	  だけになります)。</p><p>データベースの読み込みが完了したら
	  (数時間に渡るかもしれません)、何かパスワードを要求されます。
	  テスト用にインストールしたのであれば、
	  周知のデフォルトパスワードを使ってもよいでしょう
	  (セキュリティが問題になるなら、異なるものを使ってください!)。</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>質問</th><th>入力</th></tr></thead><tbody><tr><td>Enter Password for sapr3
	      (sapr3 のパスワードを入力してください)</td><td>sap&lt;ret&gt;</td></tr><tr><td>Confirum Password for sapr3
	      (sapr3 のパスワードを再入力してください)</td><td>sap&lt;ret&gt;</td></tr><tr><td>Enter Password for sys
	      (sys のパスワードを入力してください)</td><td>change_on_install&lt;ret&gt;</td></tr><tr><td>Confirm Password for sys
	      (sys のパスワードを再入力してください)</td><td>change_on_install&lt;ret&gt;</td></tr><tr><td>Enter Password for system
	      (system のパスワードを入力してください)</td><td>manager&lt;ret&gt;</td></tr><tr><td>Confirm Password for system
	      (system のパスワードを再入力してください)</td><td>manager&lt;ret&gt;</td></tr></tbody></table></div><p>ここで、<code class="literal">dipgntab</code> で少し問題がありました。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="listener"></a>11.5.10.2. Listener</h4></div></div></div><p>次のように、Oracle-Listener を <code class="systemitem">oraids</code>
	  (ora&lt;sid&gt;) ユーザで起動してください。</p><pre class="programlisting">umask 0; lsnrctl start</pre><p>そうしないと、ソケットが正しいパーミッションにならないので、
	  ORA-12546 が発生するかもしれません。SAP note 072984
	  をご覧ください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="postinstallationsteps"></a>11.5.11. インストール後の手順</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="requestsapr3licensekey"></a>11.5.11.1. SAP R/3 ライセンスキーの要求</h4></div></div></div><p>一時ライセンスは
	  4 週間だけ有効なので、これが必要になります。
	  オペレーティングシステムを正しく入力するようにしてください:
	  (X) Other (その他): <span class="emphasis"><em>FreeBSD 4.3 Stable</em></span>。
	  まず、ハードウェアキーを入手してください。
	  <code class="systemitem">idsadm</code> ユーザでログオンし、
	  <code class="command">saplicense</code> を呼び出してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sapmnt/IDS/exe/saplicense -get</code></strong></pre><p><code class="command">saplicense</code>
	  をオプションなしで起動すると、オプション一覧を出力します。
	  ライセンスキーを受け取ったら、
	  次のようにしてインストールできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sapmnt/IDS/exe/saplicense -install</code></strong></pre><p>そうしたら、次の値を入力します。</p><pre class="programlisting">SAP SYSTEM ID   = &lt;SID, 3 chars&gt;
CUSTOMER KEY    = &lt;hardware key, 11 chars&gt;
INSTALLATION NO = &lt;installation, 10 digits&gt;
EXPIRATION DATE = &lt;yyyymmdd, usually "99991231"&gt;
LICENSE KEY     = &lt;license key, 24 chars&gt;</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingusers"></a>11.5.11.2. ユーザの作成</h4></div></div></div><p>クライアント 000 内でユーザを作成します
	  (クライアント 000 内で行わなければなりませんが、
	  ユーザ <code class="systemitem">sap*</code> や <code class="systemitem">ddic</code>
	  以外のユーザでなければならないタスクのためです)。
	  ユーザ名として、私は通常
	  <em class="replaceable"><code>wartung</code></em> (または
	  英語で <em class="replaceable"><code>service</code></em>)
	  を選択しています。必要となるプロファイルは
	  <span class="emphasis"><em>sap_new</em></span> と <span class="emphasis"><em>sap_all</em></span>
	  です。セキュリティを高めるため、
	  すべてのクライアントのデフォルトユーザのパスワードを変更すべきです
	  (ユーザ <code class="systemitem">sap*</code> と <code class="systemitem">ddic</code>
	  を含みます)。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="configtranssysprofileopermodesetc"></a>11.5.11.3. トランスポートシステム、プロファイル、操作モードなどの設定</h4></div></div></div><p>クライアント 000 内で、<code class="systemitem">ddic</code> と sap*
	  以外のユーザについて、少なくとも次のことを行ってください。</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>作業</th><th>トランザクション</th></tr></thead><tbody><tr><td>トランスポートシステムの設定。たとえば、
	      <span class="emphasis"><em>スタンドアロントランスポートエンティティ</em></span></td><td>STMS</td></tr><tr><td>システム用のプロファイルの作成・編集</td><td>RZ10</td></tr><tr><td>操作モードとインスタンスの維持管理</td><td>RZ04</td></tr></tbody></table></div><p>これらのインストール後の手順は、それ以外も含めて
	  SAP インストールガイドにすべて書かれています。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="editintsidsap"></a>11.5.11.4. Edit init&lt;sid&gt;.sap (initIDS.sap)</h4></div></div></div><p><code class="filename">/oracle/IDS/dbs/initIDS.sap</code>
	  ファイルには
	  SAP バックアッププロファイルが含まれます。ここで、
	  使用するテープの容量、
	  圧縮の種類などを定義しなければなりません。
	  <code class="command">sapdba</code> や <code class="command">brbackup</code>
	  と共に動かすため、以下の値を変更しました。</p><pre class="programlisting">compress = hardware
archive_function = copy_delete_save
cpio_flags = "-ov --format=newc --block-size=128 --quiet"
cpio_in_flags = "-iuv --block-size=128 --quiet"
tape_size = 38000M
tape_address = /dev/nsa0
tape_address_rew = /dev/sa0</pre><p>説明:</p><p><span class="emphasis"><em>compress</em></span> 私が使っているテープは
	  HP DLT1 で、ハードウェア圧縮を行います。</p><p><span class="emphasis"><em>archive_function</em></span>
	  この変数は、Oracle
	  のアーカイブログを保存する際のデフォルトの振る舞いを定義します。
	  新規のログファイルはテープに保存され、
	  保存済みのログファイルは再度保存された後、削除されます。
	  これは、もし、データベースを復旧しなければならなくなったのに、
	  アーカイブテープのどれかが駄目になっていたという場合にも問題を回避します。</p><p><span class="emphasis"><em>cpio_flags</em></span>
	  デフォルトはブロックサイズを 5120 バイトに設定する -B
	  が使われます。DLT テープについては、HP はブロックサイズに
	  32 キロバイト以上を推奨していますので、64 キロバイトに設定する
	  --block-size=128 を用いました。65535 より多くの
	  inode 番号があるので、--format=newc が必要になります。
	  最後のオプション --quiet は、<code class="command">cpio</code>
	  が保存したブロック数を出力すると
	  <code class="command">brbackup</code> が文句をいうので必要になります。</p><p><span class="emphasis"><em>cpio_in_flags</em></span>
	  は、データをテープから読み込むのに必要となるフラグです。
	  データ形式は自動的に認識されます。</p><p><span class="emphasis"><em>tape_size</em></span>
	  これは通常、テープの raw (生の) 容量を表します。
	  (ハードウェア圧縮を利用しているので) 安全のため、</p><p><span class="emphasis"><em>value</em></span>
	  は実際の値よりもわずかに小さくしています。</p><p><span class="emphasis"><em>tape_address</em></span>
	  <code class="command">cpio</code> と組み合わせて用いる巻き戻し不可なデバイス。</p><p><span class="emphasis"><em>tape_address_rew</em></span>
	  cpio と組み合わせて用いる巻き戻し可能なデバイス。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86412624"></a>11.5.11.5. インストール後の設定</h4></div></div></div><p>以下の SAP パラメータについてはインストール後に調整する必要があります。</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>名前</th><th>値</th></tr></thead><tbody><tr><td>ztta/roll_extension</td><td>250000000</td></tr><tr><td>abap/heap_area_dia</td><td>300000000</td></tr><tr><td>abap/heap_area_nondia</td><td>400000000</td></tr><tr><td>em/initial_size_MB</td><td>256</td></tr><tr><td>em/blocksize_kB</td><td>1024</td></tr><tr><td>ipc/shm_psize_40</td><td>70000000</td></tr></tbody></table></div><p>SAP-Note 0013026:</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>名前</th><th>値</th></tr></thead><tbody><tr><td>ztta/dynpro_area</td><td>2500000</td></tr></tbody></table></div><p>SAP-Note 0157246:</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>名前</th><th>値</th></tr></thead><tbody><tr><td>rdisp/ROLL_MAXFS</td><td>16000</td></tr><tr><td>rdisp/PG_MAXFS</td><td>30000</td></tr></tbody></table></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">以上のパラメータと、1 ギガバイトのメモリを持つシステムでは、
	    以下のようなメモリ使用量となるでしょう。

	  </p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">Mem: 547M Active, 305M Inact, 109M Wired, 40M Cache, 112M Buf, 3492K Free</pre></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="problemsduringinstallation"></a>11.5.12. インストール中の問題</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="indoraduringduringr3setup"></a>11.5.12.1. R3SETUP 中の OSUSERSIDADM_IND_ORA エラー</h4></div></div></div><p>この段階で R3SETUP がエラーを報告したら、CENTRDB.R3S
	  ファイルを編集します。[OSUSERSIDADM_IND_ORA]
	  という項目を探して、以下の値を変更します。</p><pre class="programlisting">HOME=/home/idsadm (was empty)
STATUS=OK (had status ERROR)</pre><p>以下のように、R3SETUP を再起動します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRDB.R3S</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="indoraduringr3setup"></a>11.5.12.2. R3SETUP 中の OSUSERDBSID_IND_ORA</h4></div></div></div><p>この段階で R3SETUP がエラーを報告する可能性もあります。
	  CENTRDB.R3S を編集して、[OSUSERDBSID_IND_ORA]
	  という項目を探し、その項目内の次の値を変更してください。</p><pre class="programlisting">STATUS=OK</pre><p>その後、R3SETUP を再起動します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRDB.R3S</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="oraviewvrffilenotfound"></a>11.5.12.3. Oracle のインストール中に oraview.vrf
	  ファイルがみつからないという (FILE NOT FOUND) エラー</h4></div></div></div><p>インストールを開始する前に
	  <span class="emphasis"><em>Oracle On-Line Text Viewer</em></span>
	  の選択を外すのを忘れています。この選択肢は現在 Linux
	  にはないにもかかわらず、インストール対象に選ばれています。
	  Oracle のインストールメニューでこの製品を選択しているのを外して、
	  インストールを再開してください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="textenvincalid"></a>11.5.12.4. R3SETUP, RFC または SAPGUI 起動時に
	  TEXTENV_INVALID エラー</h4></div></div></div><p>このエラーが起きた場合は、正しいロケールがありません。
	  SAP note 0171356 にインストールしておかなければならない
	  RPM が挙げられています (たとえば、RedHat 6.1 なら
	  <span class="emphasis"><em>saplocales-1.0-3</em></span>,
	  <span class="emphasis"><em>saposcheck-1.0-1</em></span>)。R3SETUP
	  がこれに関係するエラーを出してもすべて無視して、対応する状態を
	  ERROR から OK に (CENTRDB.R3S で) 変更して R3SETUP
	  を再起動していると、SAP システムは正しく設定されず、
	  システムを起動できたとしても、<code class="literal">sapgui</code>
	  でシステムに接続することはできません。古い Linux 版 <code class="literal">sapgui</code>
	  で接続しようとすると、次のメッセージがでます。</p><pre class="programlisting">Sat May 5 14:23:14 2001
*** ERROR =&gt; no valid userarea given [trgmsgo. 0401]
Sat May 5 14:23:22 2001
*** ERROR =&gt; ERROR NR 24 occured [trgmsgi. 0410]
*** ERROR =&gt; Error when generating text environment. [trgmsgi. 0435]
*** ERROR =&gt; function failed [trgmsgi. 0447]
*** ERROR =&gt; no socket operation allowed [trxio.c 3363]
Speicherzugriffsfehler</pre><p>これは、SAP R/3 がロケールを割り当てられないか、
	  正しく設定されていない
	  (データベーステーブルの一部の項目が不足している)
	  ためです。SAP に接続するためには、次の項目をファイル
	  DEFAULT.PFL に追加してください (note 0043288 参照)。</p><pre class="programlisting">abap/set_etct_env_at_new_mode =0
install/collate/active =0
rscp/TCP0B =TCP0B</pre><p>SAP システムを再起動してください。
	  地域特有の言語設定が期待どおりに動かないかもしれませんが、
	  システムに接続できるはずです。
	  地域設定を修正 (して、適切なロケールを提供) したら、
	  これらの項目を DEFAULT.PFL から削除して
	  SAP システムを再起動してかまいません。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ora-12546"></a>11.5.12.5. ORA-12546 エラー。リスナーの適切なパーミッションによる操作</h4></div></div></div><p>次のコマンドを実行して、Oracle リスナーをユーザ
          <code class="systemitem">oraids</code> で起動してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umask 0; lsnrctl start</code></strong></pre><p>そうしないと、
	  ソケットが正しいパーミッションになっていないという
	  ORA-12546 エラーを受け取るかもしれません。
	  SAP note 0072984 をご覧ください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dipgntabindind"></a>11.5.12.6. R3SETUP 中の [DIPGNTAB_IND_IND] エラー</h4></div></div></div><p>一般的なことは SAP note 0130581 (R3SETUP の
	  <code class="literal">DIPGNTAB</code> 段階での終了) をご覧ください。
	  この特定のインストール段階において、
	  なぜかインストールプロセスは、適切な SAP システム名
	  "IDS" を使うかわりに、空文字列 "" を使います。
	  ディレクトリにアクセスするのにパスを &lt;sid&gt;
	  (この場合は IDS) を使って生成するので、
	  これはちょっとした問題を起こすことがあります。</p><pre class="programlisting">/usr/sap/IDS/SYS/...
/usr/sap/IDS/DVMGS00</pre><p>にアクセスするかわりに、
	  つぎのパスを使います。</p><pre class="programlisting">/usr/sap//SYS/...
/usr/sap/D00i</pre><p>インストールを続けるため、
	  リンクと追加のディレクトリを作成します。</p><pre class="screen"><code class="prompt">#</code> pwd
/compat/linux/usr/sap
<code class="prompt">#</code> ls -l
total 4
drwxr-xr-x 3  idsadm sapsys 512 May 5 11:20 D00
drwxr-x--x 5  idsadm sapsys 512 May 5 11:35 IDS
lrwxr-xr-x 1  root   sapsys 7 May 5 11:35 SYS -&gt; IDS/SYS
drwxrwxr-x 2  idsadm sapsys 512 May 5 13:00 tmp
drwxrwxr-x 11 idsadm sapsys 512 May 4 14:20 trans </pre><p>この現象を解説している SAP notes (0029227 and 0008401)
	  があります。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rfcrswboiniindind"></a>11.5.12.7. R3SETUP 中の [RFCRSWBOINI_IND_IND] エラー</h4></div></div></div><p>(ファイル <code class="filename">CENTRDB.R3S</code> で)
	  問題の段階の状態 (STATUS) を ERROR から OK に設定して
	  R3SETUP を再起動してください。
	  インストール後、レポート <code class="literal">RSWBOINS</code>
	  をトランザクション SE38 から実行しなければなりません。
	  <code class="literal">RFCRSWBOINI</code> および <code class="literal">RFCRADDBDIF</code>
	  段階の詳細については
	  SAP note 0162266 をご覧ください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rfcraddbdifindind"></a>11.5.12.8. R3SETUP 中の [RFCRADDBDIF_IND_IND] エラー</h4></div></div></div><p>(ファイル <code class="filename">CENTRDB.R3S</code> で)
	  問題の段階の状態 (STATUS) を ERROR から OK に設定して
	  R3SETUP を再起動してください。
	  インストール後、レポート <code class="literal">RADDBDIF</code> をトランザクション SE38
	  から実行しなければなりません。詳しくは
	  SAP note 0162266 をご覧ください。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp86485712"></a>11.6. 高度なトピックス</h2></div></div></div><p>Linux バイナリ互換機能がどのような仕組みなのか興味がある人はこのセクションを読んでください。
      以下の文章で説明されていることのほとんどは <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-chat" target="_top">FreeBSD chat メーリングリスト</a> に投稿された
      Terry Lambert (<code class="email">&lt;<a xmlns="" class="email" href="mailto:tlambert@primenet.com">tlambert@primenet.com</a>&gt;</code>) 氏のメール
      (Message ID: <code class="literal">&lt;199906020108.SAA07001@usr09.primenet.com&gt;</code>)
      をもとにしています。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86488016"></a>11.6.1. どのように動くのでしょう?</h3></div></div></div><a id="idp86488656" class="indexterm"></a><p>FreeBSD は、“実行クラスローダ (execution class loader) ”
      と呼ばれる抽象的な機構を持っています。これは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=execve&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">execve</span>(2)</span></a>
      システムコールへの楔という形で実装されています。
    </p><p>FreeBSD は、シェルインタプリタやシェルスクリプトを実行するための
      <code class="literal">#!</code> ローダを持った単一のプログラムローダではなく、
      ローダのリストを持っているのです。
    </p><p>歴史的には、Unix プラットフォーム上の唯一のローダーがマジックナンバー
      (一般的にはファイルの先頭の 4 ないし 8 バイトの部分)
      の検査を行ないシステムで実行できるバイナリかどうかを検査し、
      もしそうならバイナリローダーを呼び出すというようになっていました。</p><p>もし、そのシステム用のバイナリでない場合には、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=execve&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">execve</span>(2)</span></a> システムコールの呼び出しは失敗の戻り値を返し、
      シェルがシェルコマンドとして実行しようと試みていたわけです。
    </p><p>この仮定は<span class="quote">「<span class="quote">現在利用しているシェルがどのようなものであっても</span>」</span>変わりません。</p><p>後に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sh</span>(1)</span></a> に変更が加えられ、先頭の 2 バイトを検査した結果
      <code class="literal">:\n</code> であれば代わりに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csh</span>(1)</span></a> を呼び出す、
      というようになりました (この変更は SCO が最初に行なったと思われます)。</p><p>現在の FreeBSD は、プログラムローダリストを走査します。
      その際、空白文字までの文字列をインタプリタとして認識する、
      通常の <code class="literal">#!</code> ローダを用いるため、
      該当するものが存在しなければ最終的に /bin/sh がロードされます。</p><a id="idp86500688" class="indexterm"></a><p>Linux ABI をサポートするため、FreeBSD は
      ELF バイナリを示すマジックナンバを確認します。
      (ただし、この段階では FreeBSD、Solaris、Linux、そしてその他の
      ELF イメージ形式を使っている OS を区別することはできません)。</p><a id="idp86501584" class="indexterm"></a><p>ELF ローダは、特殊な<span class="emphasis"><em>マーク (brand)</em></span> があるかどうか探します。
      このマークとは、ELF イメージのコメントセクションのことです。
      SVR4/Solaris の ELF バイナリには、このセクションは存在しません。</p><p>Linux バイナリを実行するためには、
      ELF バイナリに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a> で説明されている
      <code class="literal">Linux</code> のマークが<span class="emphasis"><em>付けられて</em></span>いなければなりません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>brandelf -t Linux file</code></strong></pre><p>上のようにすることで、指定されたファイルは
	<code class="literal">Linux</code> のマークが付けられ、
	ELF ローダが認識できるようになります。</p><a id="idp86506576" class="indexterm"></a><p>ELF ローダが <code class="literal">Linux</code> マークを確認すると、
      ローダは <code class="literal">proc</code> 構造体内の
      ある一つのポインタを置き換えます。システムコールは全て、
      このポインタ (伝統的な Unix システムではこれは構造体の配列 <code class="literal">sysent[]</code>
      で、システムコールが含まれています) を通してインデックスされます。
      さらに、そのプロセスには Linux カーネルモジュールに必要な
      シグナルトランポリンコード (訳注:
      シグナルの伝播を実現するコード) 用の特殊なトラップベクタの設定や、
      他の (細かな) 調整のための設定が行なわれます。</p><p>Linux システムコールベクタは、
      さまざまなデータに加えて <code class="literal">sysent[]</code>
      エントリーのリストを含んでおり、それらのアドレスはカーネルモジュール内にあります。</p><p>Linux バイナリがシステムコールを発行する際、トラップコードは
      <code class="literal">proc</code> 構造体を用いてシステムコール関数ポインタを
      解釈します。そして FreeBSD ではなく
      Linux 用のシステムコールエントリポイントを得るわけです。</p><p>さらに、Linux モードは状況に応じて<span class="emphasis"><em>ファイルシステム本来のルートマウントポイントを置き換えて</em></span>ファイルの参照を行ないます。
      これは、<code class="literal">union</code> オプションを指定してマウントされたファイルシステム
      (unionfs では<span class="emphasis"><em>ありません!</em></span>)が行なっていることと同じです。
      ファイルを検索する際にはまず
      <code class="filename">/compat/linux/original-path</code>
      ディレクトリを、<span class="emphasis"><em>それから</em></span>見つけられなかったときにのみ、
      <code class="filename">/original-path</code>
      を調べます。
      こうすることで、他のバイナリを要求するバイナリの実行を可能にしています
      (したがって、Linux 用プログラムツールは Linux ABI サポート環境下で完全に動作するわけです)。
      またこれは、もし対応する Linux バイナリが存在しない場合に
      Linux バイナリが FreeBSD バイナリをロードしたり、実行したりすることが可能であること、
      その Linux バイナリに自分自身が Linux 上で実行されていないことを
      気付かせないようにする目的で、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uname&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">uname</span>(1)</span></a> コマンドを
      <code class="filename">/compat/linux</code> ディレクトリに置くことができる、
      ということを意味します。
    </p><p>要するに、Linux カーネルが FreeBSD カーネルの内部に存在しているわけです。
      カーネルによって提供されるサービス全ての実装の基礎となるさまざまな関数は
      FreeBSD システムコールテーブルエントリと
      Linux システムコールテーブルエントリの両方で共通に利用されています。
      これらにはファイルシステム処理、仮想メモリ処理、シグナル伝送、System V IPC
      などが含まれますが、
      FreeBSD バイナリは FreeBSD <span class="emphasis"><em>グルー</em></span> (訳注: glue;
      二者の間を仲介するという意味) 関数群、
      そして Linux バイナリは Linux <span class="emphasis"><em>グルー</em></span>関数群を用いる、
      という点だけが異なります (過去に存在したほとんどの OS は、
      自分自身のための<span class="emphasis"><em>グルー</em></span>関数群しか備えていません。
      前述したように、システムコールを発行する際、
      各々のプロセスの <code class="literal">proc</code> 構造体内にある、
      ローダによって動的に初期化されるポインタを参照してアドレスを得る代わりに、
      静的でグローバルな <code class="literal">sysent[]</code> 構造体の配列に
      システムコール関数のアドレスが直接格納されているのです)。</p><p>さて、どちらを本来の FreeBSD ABI (訳注: Applications Binary Interface;
      同じ CPU を利用したコンピュータ間でバイナリを共有するための規約のこと)
      と呼ぶべきなのでしょうか?
      実は、どちらが本来のものであるかということを論ずることに意味はありません。
      基本的に、FreeBSD <span class="emphasis"><em>グルー</em></span>関数群はカーネルの中に静的にリンクされていて、
      Linux <span class="emphasis"><em>グルー</em></span>関数群は静的にリンクすることも、
      カーネルモジュールを介して利用することもできるようになっている、
      という違いがあるだけ (ただしこれは現時点においての話であり、
      将来のリリースで変更される可能性がありますし、
      おそらく実際に変更されるでしょう) です。</p><p>あ、「でもこれは本当にエミュレーションと呼べるのか」って?
      答えは「いいえ」です。これは ABI の実装であり、
      エミュレーションとは異なります。エミュレータが呼び出されているわけではありません
      (シミュレータでもないことをあらかじめ断っておきましょう)。</p><p>では、これがよく <span class="quote">「<span class="quote">Linux エミュレーション</span>」</span>と呼ばれるのは何故でしょうか?
     それはもちろん FreeBSD の売りにするためでもあるのですが、
     実際には、次のような理由によります。
     この機能が初めて実装された頃、
     動作原理を説明する以外にこの機能を表現する言葉はありませんでした。
     しかし、コードをコンパイルしたりモジュールをロードしない場合、
     「FreeBSD 上で Linux バイナリを実行する」という表現は、
     厳密に考えると適切ではありません。
     そこで、その際にロードされているもの自身を表現する言葉 ― すなわち
     <span class="quote">「<span class="quote">Linux エミュレータ</span>」</span>が必要だったのです。</p></div></div></div></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="system-administration"></a>パート〓III.〓システム管理</h1></div></div></div><div class="partintro"><div xmlns=""></div><p>FreeBSD ハンドブックの以下の章は、
	FreeBSD のシステム管理の面について書かれています。
	各章のはじめでは、その章で学ぶ内容や
	実際に取り組む前に知っておくべきことについて説明します。</p><p>各章は、必要になった時に個別に参照できるように構成されています。
	どの順番で読んでも構いませんし、FreeBSD を使うのに、
	すべてを読み通す必要がある、というわけでもありません。</p><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="chapter"><a href="#config-tuning">12. 設定とチューニング</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp86536528">12.1. この章では</a></span></dt><dt><span class="sect1"><a href="#configtuning-core-configuration">12.2. 中核となる設定</a></span></dt><dt><span class="sect1"><a href="#configtuning-appconfig">12.3. アプリケーションの設定</a></span></dt><dt><span class="sect1"><a href="#configtuning-starting-services">12.4. サービスの起動</a></span></dt><dt><span class="sect1"><a href="#configtuning-virtual-hosts">12.5. バーチャルホスト</a></span></dt><dt><span class="sect1"><a href="#configtuning-configfiles">12.6. 設定ファイル</a></span></dt><dt><span class="sect1"><a href="#configtuning-sysctl">12.7. sysctl によるチューニング</a></span></dt><dt><span class="sect1"><a href="#configtuning-disk">12.8. ディスクのチューニング</a></span></dt><dt><span class="sect1"><a href="#configtuning-kernel-limits">12.9. Kernel 制限のチューニング</a></span></dt></dl></dd><dt><span class="chapter"><a href="#boot">13. FreeBSD の起動のプロセス</a></span></dt><dd><dl><dt><span class="sect1"><a href="#boot-synopsis">13.1. この章では</a></span></dt><dt><span class="sect1"><a href="#boot-introduction">13.2. 起動時の問題</a></span></dt><dt><span class="sect1"><a href="#boot-blocks">13.3. ブートマネージャと起動ステージ</a></span></dt><dt><span class="sect1"><a href="#boot-kernel">13.4. カーネル起動時の応答</a></span></dt><dt><span class="sect1"><a href="#device-hints">13.5. Device Hints</a></span></dt><dt><span class="sect1"><a href="#boot-init">13.6. init: プロセス制御の初期化</a></span></dt><dt><span class="sect1"><a href="#boot-shutdown">13.7. シャットダウン動作</a></span></dt></dl></dd><dt><span class="chapter"><a href="#users">14. ユーザと基本的なアカウントの管理</a></span></dt><dd><dl><dt><span class="sect1"><a href="#users-synopsis">14.1. この章では</a></span></dt><dt><span class="sect1"><a href="#users-introduction">14.2. アカウントの種類</a></span></dt><dt><span class="sect1"><a href="#users-modifying">14.3. アカウント情報の管理</a></span></dt><dt><span class="sect1"><a href="#users-limiting">14.4. ユーザへの制限</a></span></dt><dt><span class="sect1"><a href="#users-groups">14.5. グループの管理</a></span></dt></dl></dd><dt><span class="chapter"><a href="#security">15. セキュリティ</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp87404368">15.1. この章では</a></span></dt><dt><span class="sect1"><a href="#security-intro">15.2. はじめに</a></span></dt><dt><span class="sect1"><a href="#securing-freebsd">15.3. FreeBSDの安全性を高める</a></span></dt><dt><span class="sect1"><a href="#crypt">15.4. DES, MD5 と Crypt</a></span></dt><dt><span class="sect1"><a href="#skey">15.5. S/Key</a></span></dt><dt><span class="sect1"><a href="#kerberos">15.6. Kerberos</a></span></dt><dt><span class="sect1"><a href="#firewalls">15.7. ファイアウォール</a></span></dt><dt><span class="sect1"><a href="#openssl">15.8. OpenSSL</a></span></dt><dt><span class="sect1"><a href="#ipsec">15.9. IPsec</a></span></dt><dt><span class="sect1"><a href="#openssh">15.10. OpenSSH</a></span></dt><dt><span class="sect1"><a href="#fs-acl">15.11. ファイルシステムアクセス制御リスト</a></span></dt></dl></dd><dt><span class="chapter"><a href="#disks">16. ストレージ</a></span></dt><dd><dl><dt><span class="sect1"><a href="#disks-synopsis">16.1. この章では</a></span></dt><dt><span class="sect1"><a href="#disks-naming">16.2. デバイス名</a></span></dt><dt><span class="sect1"><a href="#disks-adding">16.3. ディスクの追加</a></span></dt><dt><span class="sect1"><a href="#raid">16.4. RAID</a></span></dt><dt><span class="sect1"><a href="#creating-cds">16.5. 光メディア (CD &amp; DVD) の作成と使用</a></span></dt><dt><span class="sect1"><a href="#floppies">16.6. フロッピーディスクの作成と使用</a></span></dt><dt><span class="sect1"><a href="#backups-tapebackups">16.7. データテープの作成と使用</a></span></dt><dt><span class="sect1"><a href="#backups-floppybackups">16.8. フロッピーディスクへのバックアップ</a></span></dt><dt><span class="sect1"><a href="#backup-basics">16.9. バックアップの基本</a></span></dt><dt><span class="sect1"><a href="#disks-virtual">16.10. ネットワーク、メモリ、そしてファイルベースのファイルシステム</a></span></dt><dt><span class="sect1"><a href="#snapshots">16.11. ファイルシステムのスナップショット</a></span></dt><dt><span class="sect1"><a href="#quotas">16.12. ファイルシステムクォータ</a></span></dt><dt><span class="sect1"><a href="#disks-encrypting">16.13. ディスクパーティションの暗号化</a></span></dt></dl></dd><dt><span class="chapter"><a href="#l10n">17. 地域化 (localization) - I18N/L10N の利用と設定</a></span></dt><dd><dl><dt><span class="sect1"><a href="#l10n-synopsis">17.1. この章では</a></span></dt><dt><span class="sect1"><a href="#l10n-basics">17.2. 基礎知識</a></span></dt><dt><span class="sect1"><a href="#using-localization">17.3. 地域化の利用</a></span></dt><dt><span class="sect1"><a href="#l10n-compiling">17.4. 国際化に対応したプログラムのコンパイル</a></span></dt><dt><span class="sect1"><a href="#lang-setup">17.5. FreeBSD を特定の言語に地域化する</a></span></dt></dl></dd><dt><span class="chapter"><a href="#updating-upgrading">18. FreeBSD のアップデートとアップグレード</a></span></dt><dd><dl><dt><span class="sect1"><a href="#updating-upgrading-synopsis">18.1. この章では</a></span></dt><dt><span class="sect1"><a href="#updating-upgrading-freebsdupdate">18.2. FreeBSD Update</a></span></dt><dt><span class="sect1"><a href="#updating-upgrading-documentation">18.3. ドキュメントのアップデート</a></span></dt><dt><span class="sect1"><a href="#current-stable">18.4. 開発ブランチを追いかける</a></span></dt><dt><span class="sect1"><a href="#synching">18.5. ソースの同期</a></span></dt><dt><span class="sect1"><a href="#makeworld">18.6. world の再構築</a></span></dt><dt><span class="sect1"><a href="#small-lan">18.7. 複数のマシンで追いかける</a></span></dt></dl></dd></dl></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="config-tuning"></a>第12章 設定とチューニング</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lee</span> <span class="firstname">Chern</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">基にしたチュートリアルの執筆: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Smith</span> <span class="firstname">Mike</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">基にした tuning(7) の執筆: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Dillon</span> <span class="firstname">Matt</span> [FAMILY Given]</span>. </span></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#idp86536528">12.1. この章では</a></span></dt><dt><span class="sect1"><a href="#configtuning-core-configuration">12.2. 中核となる設定</a></span></dt><dt><span class="sect1"><a href="#configtuning-appconfig">12.3. アプリケーションの設定</a></span></dt><dt><span class="sect1"><a href="#configtuning-starting-services">12.4. サービスの起動</a></span></dt><dt><span class="sect1"><a href="#configtuning-virtual-hosts">12.5. バーチャルホスト</a></span></dt><dt><span class="sect1"><a href="#configtuning-configfiles">12.6. 設定ファイル</a></span></dt><dt><span class="sect1"><a href="#configtuning-sysctl">12.7. sysctl によるチューニング</a></span></dt><dt><span class="sect1"><a href="#configtuning-disk">12.8. ディスクのチューニング</a></span></dt><dt><span class="sect1"><a href="#configtuning-kernel-limits">12.9. Kernel 制限のチューニング</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp86536528"></a>12.1. この章では</h2></div></div></div><a id="idp86537296" class="indexterm"></a><p>システムを正しく設定することは、
      メンテナンスや将来の更新の際の作業の量を減らします。
      この章では FreeBSD システムの管理上の設定の側面について記述します。</p><p>またこの章では FreeBSD システムのパフォーマンスを最適化する
      チューニングについても記述します。</p><p>この章を読むと、以下のことがわかります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">rc.conf</code> の設定と
	  <code class="filename">/usr/local/etc/rc.d</code>
	  スタートアップシステムの基礎</p></li><li class="listitem"><p>ネットワークデバイスに対する、仮想ホストの設定方法</p></li><li class="listitem"><p><code class="filename">/etc</code> ディレクトリ内のさまざまな設定ファ
	  イルの使い方</p></li><li class="listitem"><p><code class="command">sysctl</code> 変数を使った
	  FreeBSD のチューニング方法</p></li><li class="listitem"><p>ディスク性能のチューニング方法と、カーネルの制限の変更方法</p></li></ul></div><p>この章を読む前に、以下のことをやっておくとよいでしょう。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Unix と FreeBSD の基本を理解する (<a class="xref" href="#basics" title="第4章 UNIX の基礎知識">4章<em>UNIX の基礎知識</em></a>)。</p></li><li class="listitem"><p>FreeBSD のソースコードを最新に保つこと
	  (<a class="xref" href="#updating-upgrading" title="第18章 FreeBSD のアップデートとアップグレード">18章<em>FreeBSD のアップデートとアップグレード</em></a>) と、
	  カーネルコンフィグレーションおよび構築の基礎
	  (<a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a>) に親しんでおく。</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-core-configuration"></a>12.2. 中核となる設定</h2></div></div></div><a id="idp86549072" class="indexterm"></a><p>システムの設定情報が収められている主な場所は
      <code class="filename">/etc/rc.conf</code> です。
      このファイルにはシステムの起動時にシステムの設定を行なうものをはじめ
      多岐に渡る設定情報が含まれています。
      そのファイル名はダイレクトに、それが <code class="filename">rc*</code>
      ファイル群の設定情報であることを示しています。</p><p>管理者は <code class="filename">/etc/defaults/rc.conf</code>
      のデフォルトの設定を <code class="filename">rc.conf</code> ファイルにエン
      トリを作ることで上書きすべきです。
      デフォルトのファイルをそのまま <code class="filename">/etc</code>
      にコピーするのはやめるべきです。
      それはデフォルト値であってサンプルではないのです。
      システム固有のすべての変更は <code class="filename">rc.conf</code> ファイ
      ルの中でするべきです。</p><p>管理の手間を減らす為、クラスター化されたアプリケーションには
      サイト共通の設定とシステム固有の設定を分離するさまざまな戦略が適用できます。
      推奨されるアプローチは、サイト共通の設定は
      <code class="filename">/etc/rc.conf.site</code> のような別のファイルに置き、
      それをシステム固有の設定情報しか含ませない
      <code class="filename">/etc/rc.conf</code> からインクルードすることです。</p><p><code class="filename">rc.conf</code> は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sh</span>(1)</span></a>
      によって読み込まれているので、これはじつに簡単に達成できます。
      たとえば、</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>rc.conf:</p><pre class="programlisting">	. rc.conf.site
	hostname="node15.example.com"
	network_interfaces="fxp0 lo0"
	ifconfig_fxp0="inet 10.1.1.1"</pre></li><li class="listitem"><p>rc.conf.site:</p><pre class="programlisting">	defaultrouter="10.1.1.254"
	saver="daemon"
	blanktime="100"</pre></li></ul></div><p><code class="filename">rc.conf.site</code> ファイルは
      <code class="command">rsync</code> のようなプログラムを使うことで全システ
      ムに配布でき、一方 <code class="filename">rc.conf</code>
      ファイルはユニークなままを保つことができます。</p><p>システムを <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> や <code class="command">make world</code> 等で
      更新した場合 <code class="filename">rc.conf</code> ファイルは上書きされません。
      なのでシステムの設定情報が失われることもありません。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-appconfig"></a>12.3. アプリケーションの設定</h2></div></div></div><p>基本的に、インストールされたアプリケーションには独自の文法を持つ
      固有の設定ファイルがあります。
      これらのファイルがベースシステムから分離されているということは重要で、
      このためパッケージ管理ツールによる配置と管理が容易になっています。</p><a id="idp86571216" class="indexterm"></a><p>基本的に、それらのファイルは
      <code class="filename">/usr/local/etc</code> にインストールされます。
      設定ファイルの数が多数にのぼるアプリケーションに対しては、
      それら用にサブディレクトリが作られます。</p><p>通常、ports やパッケージがインストールされると
      設定ファイルのサンプルが一緒にインストールされます。
      大抵、識別のためにサフィックスとして
      <span class="quote">「<span class="quote">.default</span>」</span> がついています。
      アプリケーションのための設定ファイルがまだ存在していなければ、
      .defaults ファイルをコピーすることで作成できます。</p><p><code class="filename">/usr/local/etc/apache</code>
      ディレクトリの例をご覧ください。</p><pre class="literallayout">-rw-r--r--  1 root  wheel   2184 May 20  1998 access.conf
-rw-r--r--  1 root  wheel   2184 May 20  1998 access.conf.default
-rw-r--r--  1 root  wheel   9555 May 20  1998 httpd.conf
-rw-r--r--  1 root  wheel   9555 May 20  1998 httpd.conf.default
-rw-r--r--  1 root  wheel  12205 May 20  1998 magic
-rw-r--r--  1 root  wheel  12205 May 20  1998 magic.default
-rw-r--r--  1 root  wheel   2700 May 20  1998 mime.types
-rw-r--r--  1 root  wheel   2700 May 20  1998 mime.types.default
-rw-r--r--  1 root  wheel   7980 May 20  1998 srm.conf
-rw-r--r--  1 root  wheel   7933 May 20  1998 srm.conf.default</pre><p>ファイルサイズの差から、<code class="filename">srm.conf</code>
      ファイルだけが変更されていることが分かります。
      後に apache を更新した時にも、
      この変更されたファイルは上書きされることはありません。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-starting-services"></a>12.4. サービスの起動</h2></div></div></div><a id="idp86576080" class="indexterm"></a><p>一つのシステムでサービスをいくつも立ち上げているということは
      よくあることです。  それらには独自の立ち上げかたがあることがあり、
      それぞれ有利な点があります。</p><a id="idp86576976" class="indexterm"></a><p>Ports collection やパッケージからインストールしたソフトウェアは
      しばしば <code class="filename">/usr/local/etc/rc.d</code> にスクリプトを置き、
      システムが起動した時には <code class="option">start</code>、システムをシャッ
      トダウンする時には <code class="option">stop</code> を引数にして実行します。
      これは <code class="systemitem">root</code> で実行すべき、または
      <code class="systemitem">root</code> で起動することを期待されているシステム
      ワイドなサービスを起動する場合に推奨される方法です。
      これらのスクリプトはパッケージの一部としてインストール時に記録され、
      パッケージとともに削除されます。</p><p><code class="filename">/usr/local/etc/rc.d</code> にある
      一般的なスクリプトは次のようなものです。</p><pre class="programlisting">#!/bin/sh
echo -n ' FooBar'

case "$1" in
start)
        /usr/local/bin/foobar
        ;;
stop)
        kill -9 `cat /var/run/foobar.pid`
        ;;
*)
        echo "Usage: `basename $0` {start|stop}" &gt;&amp;2
        exit 64
        ;;
esac

exit 0
    </pre><p>このスクリプトはその目的を果すべく起動時に <code class="option">start</code>、
      シャットダウン時に <code class="option">stop</code> をつけて呼ばれます。</p><p>サービスの中には固有のポートに接続を受けたときに
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> から起動されるものもあります。
      これはメールリーダサーバ (POP や IMAP 等) の場合によくあります。
      これらのサービスは <code class="filename">/etc/inetd.conf</code>
      ファイルを編集することで有効化されます。
      このファイルの編集に関する詳細は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> を見てください。</p><p>これらの他に <code class="filename">/etc/rc.conf</code>
      による有効化/無効化がカバーされていないサービスもあります。
      それらは伝統的に <code class="filename">/etc/rc.local</code>
      にコマンドを書き込むことで実行されていました。
      FreeBSD 3.1 にはデフォルトの <code class="filename">/etc/rc.local</code>
      は存在していません。  もし管理者によって作られていれば、
      その時は一般的なやりかたとして認められるべきでしょう。
      <code class="filename">rc.local</code> は最後の場所と考えられているということを
      知っておいてください。  サービスを起動させるのにもっといい場所があるなら
      そこから始めてください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">/etc/rc.conf</code>
      でその他のコマンドを実行<span class="emphasis"><em>しないでください</em></span>。
      そのかわり、デーモンの起動やブート時のコマンド実行は
      <code class="filename">/usr/local/etc/rc.d</code> にスクリプトを配置してください。</p></div><p>この他にサービスの起動に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> を利用することもできます。
      このアプローチには、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> がそのプロセスを
      <code class="command">crontab</code> の所有者権限で実行したり、サービスが
      非特権ユーザによって立ち上げられ管理されるなどといった有利な点が
      いくつもあります。</p><p>これで <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> の機能の利点を得ることができます。
      日時の指定を <code class="literal">@reboot</code> で置き換えることでジョブは
      システムがブートした直後、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> が起動した時に実行されます。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-virtual-hosts"></a>12.5. バーチャルホスト</h2></div></div></div><a id="idp86618448" class="indexterm"></a><a id="idp86619088" class="indexterm"></a><p>FreeBSD の非常にありふれた用途の一つにバーチャルサイトの
      ホスティングがあります。
      これは一つのサーバがネットワークには複数のサーバとして現れるものです。
      これは一つのネットワークインタフェイスに
      複数のアドレスを割当てることで実現されます。</p><p>ネットワークインタフェイスは <span class="quote">「<span class="quote">真の</span>」</span> アドレスを
      一つと <span class="quote">「<span class="quote">別名</span>」</span> のアドレスを複数持ちます。これらの別
      名は通常 <code class="filename">/etc/rc.conf</code>
      に別名のエントリを置くことで追加されます。</p><p><code class="filename">fxp0</code> インタフェイスへの別名のエント
      リは以下の様なものです。</p><pre class="programlisting">ifconfig_fxp0_alias0="inet xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx"</pre><p>別名のエントリは alias0 から始まり昇順に命名されなければなり
      ません (たとえば、_alias1, _alias2 の様になります)。設定プロセス
      は最初に欠けた番号のところで停まります。</p><p>別名のネットマスクの計算は重要ですが、幸いなことに非常に簡単です。
      個々のインタフェイスについてそのネットワークのネットマスクを正しく
      表現しているアドレスが必ず一つ必要です。
      そのネットワークに所属しているそれ以外のアドレスのネットマスクは
      すべて 1 でなければなりません。</p><p>例として、<code class="filename">fxp0</code> インタフェイスが二つ
      のネットワークに接続されているものを考えてみましょう。
      一つはネットマスクが 255.255.255.0 である
      10.1.1.0 ネットワークで、もう一つはネットマスクが 255.255.255.240 である
      202.0.75.16 ネットワークです。  システムは 10.1.1.0 には 10.1.1.1 として、
      202.0.75.20 には 202.0.75.17 として現れるようにします。</p><p>以下のエントリはネットワークインタフェイスを上述の環境に正しく
      設定するものです。</p><pre class="programlisting"> ifconfig_fxp0="inet 10.1.1.1 netmask 255.255.255.0"
 ifconfig_fxp0_alias0="inet 10.1.1.2 netmask 255.255.255.255"
 ifconfig_fxp0_alias1="inet 10.1.1.3 netmask 255.255.255.255"
 ifconfig_fxp0_alias2="inet 10.1.1.4 netmask 255.255.255.255"
 ifconfig_fxp0_alias3="inet 10.1.1.5 netmask 255.255.255.255"
 ifconfig_fxp0_alias4="inet 202.0.75.17 netmask 255.255.255.240"
 ifconfig_fxp0_alias5="inet 202.0.75.18 netmask 255.255.255.255"
 ifconfig_fxp0_alias6="inet 202.0.75.19 netmask 255.255.255.255"
 ifconfig_fxp0_alias7="inet 202.0.75.20 netmask 255.255.255.255"</pre></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-configfiles"></a>12.6. 設定ファイル</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86625872"></a>12.6.1. <code class="filename">/etc</code> のレイアウト</h3></div></div></div><p>設定のための情報が含まれているディレクトリはたくさんあります。
	それぞれ以下のものを含んでいます。</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="filename">/etc</code></td><td>システム全般の設定情報。  ここにあるデータはシステム
	        固有のものです。</td></tr><tr><td><code class="filename">/etc/defaults</code></td><td>デフォルトのシステム設定ファイル。</td></tr><tr><td><code class="filename">/etc/mail</code></td><td>追加的な <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> の設定、他の MTA の設定ファイル。
	      </td></tr><tr><td><code class="filename">/etc/ppp</code></td><td>ユーザモード、およびカーネルモードの ppp プログラムの設定。
	      </td></tr><tr><td><code class="filename">/etc/namedb</code></td><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> のデータのデフォルトの置場。通常
		boot ファイルはここに置かれ、
		<code class="filename">/var/db</code> に置かれた他のデータを
		参照するディレクティブを含みます。</td></tr><tr><td><code class="filename">/usr/local/etc</code></td><td>インストールされたアプリケーションの設定ファイル。
		アプリケーションごとのサブディレクトリを含んでいることがあります。</td></tr><tr><td><code class="filename">/usr/local/etc/rc.d</code></td><td>インストールされたアプリケーションの起動/停止スクリプト。</td></tr><tr><td><code class="filename">/var/db</code></td><td>永続的なシステム固有のデータファイル。 たとえば
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> のゾーンファイル、データベースファイル等。</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86650064"></a>12.6.2. ホスト名</h3></div></div></div><a id="idp86650704" class="indexterm"></a><a id="idp86651216" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86651856"></a>12.6.2.1. <code class="filename">/etc/resolv.conf</code></h4></div></div></div><a id="idp86652624" class="indexterm"></a><p><code class="filename">/etc/resolv.conf</code> は FreeBSD に
	  インターネットドメインネームシステム (DNS)
	  にどのようにアクセスするかを指定します。</p><p><code class="filename">resolv.conf</code> の最もよくあるエントリは
	</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="literal">nameserver</code></td><td>リゾルバが問い合わせるべきネームサーバの IP アドレス。
		  サーバはリストの順に 3 番目まで問い合わせられます。</td></tr><tr><td><code class="literal">search</code></td><td>ホスト名をルックアップするための検索リスト。
		  通常、ローカルなホスト名のドメインから決定されます。</td></tr><tr><td><code class="literal">domain</code></td><td>ローカルドメイン名。</td></tr></tbody></table></div><p>基本的な <code class="filename">resolv.conf</code>。</p><pre class="programlisting">search example.com
nameserver 147.11.1.11
nameserver 147.11.100.30</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="literal">search</code> オプションと
	  <code class="literal">domain</code> オプションは、
	  どちらか一方しか使ってはいけません。</p></div><p>DHCP を利用している場合、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a> は通常
	  <code class="filename">resolv.conf</code> を DHCP サーバから受け取っ
	  た情報で書き換えます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86664144"></a>12.6.2.2. <code class="filename">/etc/hosts</code></h4></div></div></div><a id="idp86664912" class="indexterm"></a><p><code class="filename">/etc/hosts</code> は古きインターネットを
	  偲ばせるシンプルなテキストのデータベースです。
	  これはホスト名と IP アドレスをマッピングする DNS や NIS
	  と組み合わせて使われます。  LAN でつながれているローカルな計算機は、
	  名前引きを簡単にするために
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> サーバを立ち上げるかわりにここに書くことができます。
	  さらに <code class="filename">/etc/hosts</code>
	  はインターネット名のローカルなレコードを提供し、
	  よくアクセスされる名前を外部に問い合わせるのを減らすためにも使えます。</p><pre class="programlisting"># $FreeBSD$
#
# Host Database
# This file should contain the addresses and aliases
# for local hosts that share this file.
# In the presence of the domain name service or NIS, this file may
# not be consulted at all; see /etc/nsswitch.conf for the resolution order.
#
#
::1                     localhost localhost.my.domain myname.my.domain
127.0.0.1               localhost localhost.my.domain myname.my.domain

#
# Imaginary network.
#10.0.0.2               myname.my.domain myname
#10.0.0.3               myfriend.my.domain myfriend
#
# According to RFC 1918, you can use the following IP networks for
# private nets which will never be connected to the Internet:
#
#       10.0.0.0        -   10.255.255.255
#       172.16.0.0      -   172.31.255.255
#       192.168.0.0     -   192.168.255.255
#
# In case you want to be able to connect to the Internet, you need
# real official assigned numbers.  PLEASE PLEASE PLEASE do not try
# to invent your own network numbers but instead get one from your
# network provider (if any) or from the Internet Registry (ftp to
# rs.internic.net, directory `/templates').
#</pre><p><code class="filename">/etc/hosts</code> は、
          次のようなごく簡単なフォーマットになっています。</p><pre class="programlisting">[インターネットアドレス] [正式なホスト名] [別名1] [別名2] ...</pre><p>例:</p><pre class="programlisting">10.0.0.1 myRealHostname.example.com myRealHostname foobar1 foobar2</pre><p>これ以上の情報は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts</span>(5)</span></a> をあたってください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86687312"></a>12.6.3. ログファイルに関係する設定</h3></div></div></div><a id="idp86687952" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86688464"></a>12.6.3.1. <code class="filename">syslog.conf</code></h4></div></div></div><a id="idp86689232" class="indexterm"></a><p><code class="filename">syslog.conf</code>
	  は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> プログラムのための設定ファイルです。
	  これはどのタイプの <code class="command">syslog</code> メッセージを対応する
	  ログファイルに記録するかを指定します。</p><pre class="programlisting"># $FreeBSD$
#
#       Spaces ARE valid field separators in this file. However,
#       other *nix-like systems still insist on using tabs as field
#       separators. If you are sharing this file between systems, you
#       may want to use only tabs as field separators here.
#       Consult the syslog.conf(5) manual page.
*.err;kern.debug;auth.notice;mail.crit          /dev/console
*.notice;kern.debug;lpr.info;mail.crit;news.err /var/log/messages
security.*                                      /var/log/security
mail.info                                       /var/log/maillog
lpr.info                                        /var/log/lpd-errs
cron.*                                          /var/log/cron
*.err                                           root
*.notice;news.err                               root
*.alert                                         root
*.emerg                                         *
# uncomment this to log all writes to /dev/console to /var/log/console.log
#console.info                                   /var/log/console.log
# uncomment this to enable logging of all log messages to /var/log/all.log
#*.*                                            /var/log/all.log
# uncomment this to enable logging to a remote log host named loghost
#*.*                                            @loghost
# uncomment these if you're running inn
# news.crit                                     /var/log/news/news.crit
# news.err                                      /var/log/news/news.err
# news.notice                                   /var/log/news/news.notice
!startslip
*.*                                             /var/log/slip.log
!ppp
*.*                                             /var/log/ppp.log</pre><p>これ以上の情報は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">syslog.conf</span>(5)</span></a> のマニュアルページに
	  あたってください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86697552"></a>12.6.3.2. <code class="filename">newsyslog.conf</code></h4></div></div></div><a id="idp86698320" class="indexterm"></a><p><code class="filename">newsyslog.conf</code> は、通常
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> によって予定を決めて実行されるプログラム
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newsyslog</span>(8)</span></a> のための設定ファイルです。
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newsyslog</span>(8)</span></a> は、
	  ログファイルをいつ保存して再編するかを決定します。
	  <code class="filename">logfile</code> は <code class="filename">logfile.0</code>
	  に移され、<code class="filename">logfile.0</code> は
	  <code class="filename">logfile.1</code> に、そして以下同様に移されます。
	  また、ログファイルを <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gzip</span>(1)</span></a> 形式で保存することもできます。
	  この場合ファイル名は <code class="filename">logfile.0.gz</code>,
	  <code class="filename">logfile.1.gz</code> の様になります。</p><p><code class="filename">newsyslog.conf</code>
	  はどのログファイルが管理され、どのくらいの期間保存され、
	  そしていつ touch されるかを指定します。
	  ログファイルはあるサイズに到達するか、ある決められた時刻・
	  日時で再編されあるいは保存されます。</p><pre class="programlisting"># configuration file for newsyslog
# $FreeBSD$
#
# filename          [owner:group]    mode count size when [ZB] [/pid_file] [sig_num]
/var/log/cron                           600  3     100  *     Z
/var/log/amd.log                        644  7     100  *     Z
/var/log/kerberos.log                   644  7     100  *     Z
/var/log/lpd-errs                       644  7     100  *     Z
/var/log/maillog                        644  7     *    @T00  Z
/var/log/sendmail.st                    644  10    *    168   B
/var/log/messages                       644  5     100  *     Z
/var/log/all.log                        600  7     *    @T00  Z
/var/log/slip.log                       600  3     100  *     Z
/var/log/ppp.log                        600  3     100  *     Z
/var/log/security                       600  10    100  *     Z
/var/log/wtmp                           644  3     *    @01T05 B
/var/log/daily.log                      640  7     *    @T00  Z
/var/log/weekly.log                     640  5     1    $W6D0 Z
/var/log/monthly.log                    640  12    *    $M1D0 Z
/var/log/console.log                    640  5     100  *     Z</pre><p>これ以上の情報は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newsyslog</span>(8)</span></a> のマニュアルページに
	  あたってください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86707536"></a>12.6.4. <code class="filename">sysctl.conf</code></h3></div></div></div><a id="idp86708304" class="indexterm"></a><a id="idp86708816" class="indexterm"></a><p><code class="filename">sysctl.conf</code> は
	<code class="filename">rc.conf</code> によく似ています。
	値は<code class="literal">変数=値</code>のかたちでセットされます。
	指定された値はシステムがマルチユーザモードに移行した後でセットされます。
	すべての変数がこのモードで設定可能というわけではありません。</p><p>以下は <code class="filename">sysctl.conf</code> のサンプルで
        致命的なシグナルを記録しないように、また Linux プログラムに
	それらが実際は FreeBSD 上で動いていることを知らせる様に
	チューニングしています。</p><pre class="programlisting">kern.logsigexit=0       # Do not log fatal signal exits (e.g. sig 11)
compat.linux.osname=FreeBSD
compat.linux.osrelease=4.3-STABLE</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-sysctl"></a>12.7. sysctl によるチューニング</h2></div></div></div><a id="idp86717136" class="indexterm"></a><a id="idp86717648" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> は稼働中の FreeBSD
      システムに変更を加えるためのインタフェイスです。
      これには経験を積んだ管理者用の TCP/IP スタックや
      仮想メモリシステムのパフォーマンスを劇的に改善する
      先進的なオプションが含まれます。
      500 を越えるシステム変数を <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> で読んだり
      セットしたりできます。</p><p>本質的には <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> の機能は次の二つ、
      システムの設定を読むことと変更することです。</p><p>読み取り可能なすべての変数を表示するには以下のようにします。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sysctl -a</code></strong></pre><p>個々の変数、たとえば
      <code class="varname">kern.maxproc</code> を読むには以下のようにします。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sysctl kern.maxproc</code></strong>
kern.maxproc: 1044</pre><p>特定の変数をセットするには、直感的な文法
      <em class="replaceable"><code>変数</code></em>=<em class="replaceable"><code>値</code></em>
      を使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl kern.maxfiles=5000</code></strong>
kern.maxfiles: 2088 -&gt; 5000</pre><p>sysctl 変数の値は通常、文字列、数値、真偽値のいずれかです。
      (真偽値は yes の場合には <code class="literal">1</code> で no の場合には
      <code class="literal">0</code> です)。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-disk"></a>12.8. ディスクのチューニング</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86728656"></a>12.8.1. sysctl 変数</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86729296"></a>12.8.1.1. <code class="varname">vfs.vmiodirenable</code></h4></div></div></div><a id="idp86730064" class="indexterm"></a><p><code class="varname">vfs.vmiodirenable</code> sysctl
	  変数のデフォルトは 1 (オン) で、
	  0 (オフ) または 1 (オン) にセットすることができます。
	このパラメータはディレクトリがシステムによってどのように
	キャッシュされるかを制御します。
	ほとんどのディレクトリは小さく、
	ファイルシステムにおいては単一フラグメント (典型的には 1K)
	であり、バッファキャッシュではさらに小さくなっています
	(典型的には 512 バイト)。
	しかしデフォルトモードで動作している時は、
	大量のメモリを搭載していても
	バッファキャッシュは固定数のディレクトリしかキャッシュしません。
	この sysctl をオンにすると、バッファキャッシュが VM ページキャッシュを、
	ディレクトリをキャッシュするために使うことを可能にします。
	これによる利点は、全てのメモリがディレクトリを
	キャッシュするのに使えるようになるということです。
	欠点は、キャッシュに使われる最小のメモリの大きさが 512 バイトではなく
	物理ページサイズ (大抵は 4K) になることです。
	多数のファイルを操作するサービスを稼動しているなら、
	常にこのオプションをオンにすることを推奨します。
	そのようなサービスには、web キャッシュや大規模なメールシステム、
	ニューズシステムなどが含まれます。
	このオプションは一般にメモリを消費しますが、
	性能を削減することはありません。
	ただし実験して調べてみるべきでしょう。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86731728"></a>12.8.1.2. <code class="varname">hw.ata.wc</code></h4></div></div></div><a id="idp86732496" class="indexterm"></a><p>FreeBSD 4.3 では IDE のライトキャッシュがオフになりました。
	  これは IDE
	  ディスクへの書き込み帯域幅を減らしてしまうことになりますが、
	  ハードドライブベンダに起因するデータの一貫性に関する
	  重大な問題のために必要なことだと考えられました。
	  基本的には、書き込み完了時期について IDE
	  ドライブが嘘をつくという問題です。
	  IDE ライトキャッシュがオンであると
	  IDE ハードドライブはデータを順番に書きこまないばかりか、
	  ディスクの負荷が高い時にはいくつかのブロックの書き込みを
	  無期限に延期してしまいます。  クラッシュや電源故障の場合、
	  ファイルシステムの重大な破壊をもたらします。
	  したがって私たちはデフォルトを安全側に変更しました。
	  残念ながらこれは大変な性能の低下をもたらし、
	  私たちはあきらめてこのリリース後にオンに戻しました。
	  <code class="varname">hw.ata.wc</code> sysctl 変数を見てデフォルトを
	  チェックしてみるべきです。
	  もし IDE ライトキャッシュがオフになっていたら、
	  hw.ata.wc カーネル変数を 1 に戻すことでオンに戻すことができます。
	  これはブート時にブートローダから行わなければなりません。
	  カーネルがブートした後に行っても効果はありません。</p><p>詳しくは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ata&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ata</span>(4)</span></a> を見てください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86743888"></a>12.8.2. ソフトアップデート</h3></div></div></div><a id="idp86744528" class="indexterm"></a><a id="idp86745040" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a> プログラムはファイルシステムを細かくチュー
	ニングするのに使えます。このプログラムにはさまざまなオプションがありま
	すが、ここではソフトアップデートをオンオフすることだけを考えま
	す。以下の様にして切り替えます。</p><pre class="screen"><code class="prompt">#</code> tunefs -n enable /filesystem
<code class="prompt">#</code> tunefs -n disable /filesystem</pre><p>ファイルシステムはマウントされているあいだは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a>
        で変更することができません。  ソフトアップデートを有効にする
	いい機会はシングルユーザモードでどのパーティションもマウント
	されていない時です。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 4.5 からは、ファイルシステム生成時に
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> の <code class="literal">-U</code> オプションを使って
	ソフトアップデートを有効化できるようになりました。</p></div><p>ソフトアップデートはメタデータの性能、
        主にファイルの作成と削除の性能を劇的に改善します。
	すべてのファイルシステムでソフトアップデートを有効にすることを推奨します。
	ソフトアップデートに関して、2 つの欠点を意識すべきです。
	1 つめは、ソフトアップデートはクラッシュ時におけるファイルシス
	テムの一貫性は保証しますが、
	物理ディスクの更新が何秒か (1 分に達することもあります!)
	遅れる可能性が高いことです。
	システムがクラッシュした場合、より多くの作業結果が消えてしまうかもしれません。
	2 つめは、ソフトアップデート
	はファイルシステムブロックを解放するのを遅らせるということです。
	あるファイルシステム (たとえばルートファイルシステム) が満杯近くの時に
	それに対する大規模な更新、たとえば <code class="command">make installworld</code>
	をすると、空き領域を使い果たして更新が失敗してしまうことがあります。
      </p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-kernel-limits"></a>12.9. Kernel 制限のチューニング</h2></div></div></div><a id="idp86756560" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86757072"></a>12.9.1. File/Process 制限</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86757712"></a>12.9.1.1. <code class="varname">kern.maxfiles</code></h4></div></div></div><a id="idp86758480" class="indexterm"></a><p><code class="varname">kern.maxfiles</code> はあなたのシステムの要求に
	  応じて増減させることができます。
	  この変数はあなたのシステムのファイル記述子の最大値を示します。
	  ファイル記述子テーブルが溢れるような時には、システムメッセー
	  ジバッファに頻繁に <code class="literal">file: table is full</code>
	  と表示されます。これは、
	  <code class="command">dmesg</code> コマンドで確認できます。</p><p>ファイル、ソケット、パイプ (fifo) は
	  それぞれオープンされるとファイル記述子を一つ消費します。
	  大規模なプロダクションサーバでは
	  その時実行されているサービスの種類や数に応じては
	  あっさり数千のファイル記述子が必要になります。</p><p><code class="varname">kern.maxfile</code> のデフォルト値はカーネル
	  コンフィグレーションファイルの <code class="option">MAXUSERS</code> オ
	  プションで決まります。<code class="varname">kern.maxfiles</code> は
	  <code class="option">MAXUSERS</code> の値に比例して増加します。
	  カスタムカーネルをコンパイルする際は、このカーネルコンフィグ
	  レーションオプションをシステムの利用法に合わせて設定するとよ
	  いでしょう。カーネルは、この数値からほとんどの制限の初期値を
	  決定します。業務用マシンに、実際に 256 名のユーザが一度に接
	  続することはないかもしれませんが、大規模なウェブサーバに必要
	  なリソースは同程度になります。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 4.5 からは、
	  カーネルコンフィグレーションファイルで
	  <code class="option">MAXUSERS</code> を <code class="literal">0</code>
	  に設定すると、システムの RAM
	  容量に基づいて適切なデフォルト値が選択されます。</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86797392"></a>12.9.2. ネットワークの制限</h3></div></div></div><p>カーネルコンフィグレーションオプション
	<code class="option">NMBCLUSTERS</code> は、そのシステムで利用可能なネッ
	トワーク mbuf の量を決定します。通信量の多いサーバで MBUF の量
	が少ないと、FreeBSD の性能が低下してしまいます。クラスタ一つは
	およそ 2kB のメモリに対応しているので、1024 だとカーネルメモリ
	から約 2 MB をネットワークバッファに予約することになります。ど
	れだけ必要になるかを、簡単な計算で出すことができます。同時に最
	大 1000 接続までゆくウェブサーバがあり、それぞれの接続によって
	受信バッファ 16kB と送信バッファ 16kB が消費されるなら、ウェ
	ブサーバをまかなうのに 32MB 程度のネットワークバッファが必要
	になります。経験的に有用な値は、それを 2 倍したものなので、
	32MBx2 = 64MB/2K = 32768 になります。</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot"></a>第13章 FreeBSD の起動のプロセス</h2></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#boot-synopsis">13.1. この章では</a></span></dt><dt><span class="sect1"><a href="#boot-introduction">13.2. 起動時の問題</a></span></dt><dt><span class="sect1"><a href="#boot-blocks">13.3. ブートマネージャと起動ステージ</a></span></dt><dt><span class="sect1"><a href="#boot-kernel">13.4. カーネル起動時の応答</a></span></dt><dt><span class="sect1"><a href="#device-hints">13.5. Device Hints</a></span></dt><dt><span class="sect1"><a href="#boot-init">13.6. init: プロセス制御の初期化</a></span></dt><dt><span class="sect1"><a href="#boot-shutdown">13.7. シャットダウン動作</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-synopsis"></a>13.1. この章では</h2></div></div></div><a id="idp86801104" class="indexterm"></a><a id="idp86801616" class="indexterm"></a><p>計算機を起動しオペレーティングシステムをロードするプロセスは、
      <span class="quote">「<span class="quote">ブートストラッププロセス</span>」</span>、
      もしくは単に <span class="quote">「<span class="quote">起動</span>」</span> と呼ばれます。
      FreeBSD の起動プロセスを使えば、
      システムをスタートするときに起きることを
      かなり柔軟にカスタマイズすることができます。
      同じ計算機にインストールされた
      別のオペレーティングシステムを選択することもできますし、
      同じオペレーティングシステムの違うバージョンを選択することも、
      インストールされた別のカーネルを選択することさえできます。</p><p>この章では、指定できる設定オプションと FreeBSD
      の起動プロセスのカスタマイズ方法について詳しく述べます。
      この章では FreeBSD カーネルがスタートし、デバイスを検出し、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> を起動するまでに起きることすべてを扱います。
      どの最中のことだかはっきりしていない人のために補足すると、
      テキストの色が明るい白から灰色に変わるまでに起きていることです。</p><p>この章を読むと、以下のことが分かります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>どのように FreeBSD のブートストラップシステムが構成され、
	  そしてそれらが互いにどう関係しているのか</p></li><li class="listitem"><p>起動プロセスを制御するために FreeBSD
	  のブートストラップの各要素に付加できるオプション</p></li><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=device.hints&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">device.hints</span>(5)</span></a> の基本的な記述方法</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">x86 限定: </h3><p xmlns="http://www.w3.org/1999/xhtml">この章では Intel x86 システム上で動作する FreeBSD
	の起動プロセスだけを扱います。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-introduction"></a>13.2. 起動時の問題</h2></div></div></div><p>計算機の電源を入れ、オペレーティングシステムをスタートさせるのには、
      おもしろいジレンマがあります。定義により、
      計算機は、オペレーティングシステムが起動するまでは、
      ディスクからプログラムを動かすことも含めて、
      何をどうすればよいかまったく知りません。
      では、計算機はオペレーティングシステムなしに
      ディスクからプログラムを実行することができず、
      オペレーティングシステムのプログラムがディスク上にあるのなら、
      どうやってオペレーティングシステムを起動するのでしょうか?</p><p>この問題は<em class="citetitle">ほらふき男爵の冒険</em>
      という本の中に書かれている問題ととてもよく似ています。
      登場人物がマンホールの下に半分落っこちて、
      靴紐 (ブートストラップ) をつかんで自分を引っぱり、持ち上げるのです。
      計算機の黎明期には、<em class="firstterm">ブートストラップ</em>
      という用語でオペレーティングシステムをロードする
      機構のことを指していたのですが、
      いまはこれを縮めて <span class="quote">「<span class="quote">ブート (起動)</span>」</span> と言います。</p><a id="idp86824912" class="indexterm"></a><a id="idp86825424" class="indexterm"></a><p>x86 ハードウェアでは、基本入出力システム
      (Basic Input/Output System: BIOS)
      にオペレーティングシステムをロードする責任があります。
      オペレーティングシステムをロードするために、
      BIOS がハードディスク上のマスターブートレコード
      (Master Boot Record: MBR) を探します。
      MBR はハードディスク上の特定の場所になければなりません。
      BIOS には MBR をロードし起動するのに十分な知識があり、
      オペレーティングシステムをロードするために必要な作業の残りは、
      場合によっては BIOS の助けを得た上で
      MBR が実行できることを仮定しています。</p><a id="idp86826576" class="indexterm"></a><a id="idp86827088" class="indexterm"></a><a id="idp86827600" class="indexterm"></a><p>MBR 内部のコードは、
      通常<span class="emphasis"><em>ブートマネージャ</em></span>と呼ばれます。
      とりわけユーザとの対話がある場合にそう呼ばれます。
      その場合は、通常もっと多くのブートマネージャのコードが、
      ディスクの最初の<span class="emphasis"><em>トラック</em></span>
      または OS のファイルシステム上におかれます
      (ブートマネージャは<span class="emphasis"><em>ブートローダ</em></span>
      と呼ばれることもありますが、
      FreeBSD はこの言葉を起動のもっと後の段階に対して使います)。
      よく使われるブートマネージャには、
      <span class="application">boot0</span> (<span class="application">Boot Easy</span>
      とも呼ばれる FreeBSD 標準のブートマネージャ),
      <span class="application">Grub</span>, <span class="application">GAG</span> や
      <span class="application">LILO</span> 等があります
      (MBR 内に収まるのは <span class="application">boot0</span> だけです)。</p><p>ディスク上にインストールされているオペレーティングシステムが
      1 つであれば、標準の PC MBR で十分です。
      この MBR はディスク上の最初の起動可能な (アクティブな) スライスを探し、
      そのスライスにあるコードを起動してオペレーティングシステムの残りをロードします。
      デフォルトで <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> がインストールする MBR
      は、このような MBR です。<code class="filename">/boot/mbr</code>
      を基にしています。</p><p>ディスク上にオペレーティングシステムを複数インストールしているなら、
      別のブートマネージャ
      (複数のオペレーティングシステムの一覧を表示できて、
      起動するオペレーティングシステムを選択できるようなもの)
      をインストールするとよいでしょう。
      このようなブートマネージャの中から 2 つを次の節で説明します。</p><p>FreeBSD ブートストラップシステムの残りは 3 段階に分かれます。
      第 1 ステージは MBR によって起動されるもので、
      MBR は計算機を特定の状態にするために必要なことだけ知っていて、
      第 2 ステージを起動します。
      第 2 ステージでは、第 3 ステージを起動する前に、
      もうちょっとやることができます。
      第 3 ステージでオペレーティングシステムのロード作業を完了します。
      起動作業がこれらの 3 段階に分かれているのは、
      PC の規格がステージ 1 とステージ 2
      で実行できるプログラムのサイズに制限を課しているからです。
      これらの作業をつなぎ合わせることによって、
      FreeBSD はより柔軟なローダ (loader) を提供しているのです。</p><a id="idp86842576" class="indexterm"></a><a id="idp86843088" class="indexterm"></a><p>その後カーネルが起動し、デバイスの検出と初期化を開始します。
      そしてカーネルの起動が終わると、制御はユーザープロセスの
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> へ移されます。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> はまず
      ディスクが利用可能であることを確かめ、
      ファイルシステムのマウント、
      ネットワークで利用するネットワークカードのセットアップ、
      そして通常 FreeBSD システムで初期時に起動されるすべてのプロセスの起動、
      といったユーザーレベルでのリソース (資源) 設定を行ないます。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-blocks"></a>13.3. ブートマネージャと起動ステージ</h2></div></div></div><a id="idp86846544" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-boot0"></a>13.3.1. ブートマネージャ</h3></div></div></div><a id="idp86847824" class="indexterm"></a><p>MBR やブートマネージャのコードは起動プロセスの<span class="emphasis"><em>第
	0 ステージ</em></span>と呼ばれることがあります。
	この節では前述の 2 つのブートマネージャ、
	<span class="application">boot0</span> と <span class="application">LILO</span>
	について説明します。</p><p><span class="formalpara-title"><span class="application">boot0</span> ブートマネージャ.〓</span>FreeBSD のインストーラや <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot0cfg</span>(8)</span></a>
	  がデフォルトでインストールする
	  MBR は、<code class="filename">/boot/boot0</code> を基にしています
	  (<code class="filename">boot0</code> は非常に単純なプログラムです。
	  <abbr class="abbrev">MBR</abbr> にあるプログラムは、
	  スライステーブルと末尾の識別子 <code class="literal">0x55AA</code> があるため、
	  446 バイトの大きさでなければならないという制限があるためです)。
	  ハードディスクに <span class="application">boot0</span>
	  と複数のオペレーティングシステムをインストールした場合、
	  起動時に以下のような画面が出るでしょう。</p><div class="example"><a id="boot-boot0-example"></a><div class="example-title">例13.1 <code class="filename">boot0</code> のスクリーンショット</div><div class="example-contents"><pre class="screen">F1 DOS
F2 FreeBSD
F3 Linux
F4 ??
F5 Drive 1

Default: F2</pre></div></div><br class="example-break" /><p>他のオペレーティングシステム、特に <span class="trademark">Windows</span>® は、
	既存の MBR を自らの MBR で上書きしてしまうことで知られています。
	もしそうなってしまったら、
	もしくは既存の MBR を FreeBSD の MBR で置き換えたいのなら、
	次のコマンドを使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fdisk -B -b /boot/boot0 device</code></strong></pre><p><em class="replaceable"><code>device</code></em> は起動するデバイス名で、
	たとえば 1 番目の IDE ディスクは
	<code class="filename">ad0</code>、
	2 番目の IDE コントローラに接続されている 1 番目の IDE ディスクは
	<code class="filename">ad2</code>、
	1 番目の SCSI ディスクは
	<code class="filename">da0</code>
	などとなります。
	MBR の設定をカスタマイズしたい場合は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot0cfg</span>(8)</span></a>
	を使ってください。</p><p><span class="formalpara-title">LILO ブートマネージャ.〓</span>このブートマネージャをインストールして FreeBSD
	  を起動するようにするには、まず Linux を起動して
	  <code class="filename">/etc/lilo.conf</code>
	  コンフィグレーションファイルに以下を追加してください。</p><pre class="programlisting">other=/dev/hdXY
table=/dev/hdX
loader=/boot/chain.b
label=FreeBSD</pre><p>上記において、FreeBSD のプライマリパーティションとドライブを
	Linux の識別子を使って指定してください。
	<em class="replaceable"><code>X</code></em> を Linux のドライブ文字に、また
	<em class="replaceable"><code>Y</code></em> を Linux
	のプライマリパーティション番号に置き換えてください。
	<acronym class="acronym">SCSI</acronym> ドライブを使っているのであれば、
	<em class="replaceable"><code>/dev/hd</code></em> を
	<em class="replaceable"><code>/dev/sd</code></em>
	のように読み替えてください。
	同じドライブ上に両方のオペレーティングシステムが置いてあるなら、
	<code class="option">loader=/boot/chain.b</code> 行は不要です。
	これで <code class="command">/sbin/lilo -v</code>
	を実行するとシステムに新しい変更が反映されます。
	画面のメッセージを見て確認しておきましょう。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-boot1"></a>13.3.2. 起動ステージ 1 <code class="filename">/boot/boot1</code> と起動ステージ 2
	<code class="filename">/boot/boot2</code></h3></div></div></div><p>概念上、第 1 ステージと第 2 ステージは
	ハードディスクの同じ領域上の同一のプログラムの部分部分です。
	スペースの制約のため 2 つに分割されていますが、
	いつも一緒にインストールされます。
	インストーラまたは <span class="application">bsdlabel</span>
	は、両者を 1 つにまとめたファイル
	<code class="filename">/boot/boot</code> をコピーします (下記参照)。</p><p>第 1 ステージと第 2 ステージは、ファイルシステムの外部、
	起動スライスの最初のトラックに置かれ、
	先頭が最初のセクタにきます。
	<a class="link" href="#boot-boot0" title="13.3.1. ブートマネージャ">boot0</a>
	またはその他のブートマネージャは、
	起動プロセスを続けるために必要なプログラムがそこにあると想定しています。
	使用されるセクタの数は、<code class="filename">/boot/boot</code>
	の大きさから簡単に分かります。</p><p><code class="filename">boot1</code> は
	512 バイトの大きさでなければならないという制限があるので、
	非常に単純なプログラムです。
	このプログラムは <code class="filename">boot2</code> を検索し、
	実行するため、そのスライスの情報を保持する FreeBSD
	の <em class="firstterm">BSD ラベル</em>
	に関する最低限の情報だけを持っています。</p><p><code class="filename">boot2</code> はもう少し高機能です。
	これは FreeBSD のファイルシステム上でファイルを見つける能力を持ち、
 	実行するカーネルやローダを指定するための簡単なインタフェースを提供します。</p><p><a class="link" href="#boot-loader" title="13.3.3. 起動ステージ 3 /boot/loader">ローダ (loader)</a>
	はさらに高機能なもので、
	使いやすく簡単な起動設定が行なえる手段を提供します。
	<code class="filename">boot2</code> は通常それを起動します。
	以前の <code class="filename">boot2</code> には、
	カーネルを直接起動する機能しかありませんでした。</p><div class="example"><a id="boot-boot2-example"></a><div class="example-title">例13.2 <code class="filename">boot2</code> のスクリーンショット</div><div class="example-contents"><pre class="screen">&gt;&gt; FreeBSD/i386 BOOT
Default: 0:ad(0,a)/boot/loader
boot:</pre></div></div><br class="example-break" /><p>もし仮にインストールされた <code class="filename">boot1</code> と
	<code class="filename">boot2</code> を変更したいのであれば、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> を使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -B diskslice</code></strong></pre><p><em class="replaceable"><code>diskslice</code></em>
	は起動するディスクとスライスで、
	たとえば最初の IDE ディスクの 1 番目のスライスは
	<code class="filename">ad0s1</code> となります。</p><div xmlns="" class="warning"><h3 class="admontitle">Dangerously Dedicated Mode: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> を使うとき、
	  <code class="filename">ad0</code> のようにディスク名だけを指定すると、
	  スライスを持たない危険な専用ディスクを作成してしまいます。
	  これはまず間違いなく、あなたがやりたいことではないでしょうから、
	  必ず <span class="keycap"><strong>Return</strong></span> キーを押す前に
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> コマンドを二重にチェックしてください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader"></a>13.3.3. 起動ステージ 3 <code class="filename">/boot/loader</code></h3></div></div></div><a id="idp86907472" class="indexterm"></a><p>ローダは三段階の起動プロセスの最終段階です。
      ローダは通常、ファイルシステム上の
      <code class="filename">/boot/loader</code>
      として存在しています。</p><p>ローダは、よりさまざまなコマンド群をサポートした
      強力なインタプリタによって提供される簡易組み込みコマンド群を利用することで、
      ユーザが利用しやすい設定手段となるように設計されています。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader-flow"></a>13.3.3.1. ローダプログラムの処理の流れ</h4></div></div></div><p>ローダは初期化の際にコンソールとディスクの検出を行ない、
	どのディスクから起動しているかを調べます。
	そして必要な変数を設定してからインタプリタを起動し、
	スクリプトからコマンドを送ったり手でコマンドを入力したりできます。</p><a id="idp86910288" class="indexterm"></a><a id="idp86910800" class="indexterm"></a><p>ローダは次に
	<code class="filename">/boot/loader.rc</code>
	を読み込み、通常、変数の標準値を定義した
	<code class="filename">/boot/defaults/loader.conf</code>
	と、そのマシンにローカルな変数を定義した
	<code class="filename">/boot/loader.conf</code>
	を読み込みます。
	<code class="filename">loader.rc</code>
	はそれらの変数にもとづき、
	選択されたモジュールとカーネルをロードします。</p><p>ローダは最後に、標準設定で 10 秒のキー入力待ち時間を用意し、
	入力がなければカーネルを起動します。
	入力があった場合、簡易コマンド群が使えるプロンプトが表示され、
	ユーザは変数を調整したり、
	すべてのモジュールをアンロードしたり、
	モジュールをロードしたりすることができます。
	その後、最終的な起動や再起動へ移行します。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader-commands"></a>13.3.3.2. ローダの組み込みコマンド</h4></div></div></div><p>もっともよく使われるローダのコマンドを以下に示します。
	利用可能なコマンドをすべて知りたい場合、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> を参照してください。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">autoboot <em class="replaceable"><code>seconds</code></em></span></dt><dd><p><em class="replaceable"><code>seconds</code></em>
	      で与えられた時間内に入力がなければ、
	      カーネルの起動へと進みます。
	      カウントダウンを表示し、標準設定では 10 秒間です。</p></dd><dt><span class="term">boot
	    [<span class="optional">-options</span>]
	    [<span class="optional">kernelname</span>]</span></dt><dd><p>すぐにカーネルの起動へ進みます。
	      オプション、カーネル名が指定されている場合は、
	      それらが使われます。</p></dd><dt><span class="term">boot-conf</span></dt><dd><p>すべてのモジュールの設定を、
	      起動時と同じように変数にもとづいて自動的に行ないます。
	      このコマンドは、まず <code class="command">unload</code> を行なって、
	      変数―普通 <code class="envar">kernel</code>
	      など―を変更した場合にのみ有効に働きます。</p></dd><dt><span class="term">help
	    [<span class="optional">topic</span>]</span></dt><dd><p><code class="filename">/boot/loader.help</code>
	      を読み込み、ヘルプメッセージを表示します。
	      <em class="replaceable"><code>topic</code></em> に
	      <code class="literal">index</code> が指定された場合、利用可能な
	      <em class="replaceable"><code>topic</code></em> を表示します。</p></dd><dt><span class="term">include <em class="replaceable"><code>filename</code></em>
	    …</span></dt><dd><p>指定されたファイル名のファイルを処理します。
	      ローダはファイルを読み込み、行単位で解釈します。
	      エラーが発生した場合、
	      include コマンドの実行はその時点で停止します。</p></dd><dt><span class="term">load [<span class="optional">-t
	    type</span>]
	    <em class="replaceable"><code>filename</code></em></span></dt><dd><p>指定されたファイル名のカーネル、
	      カーネルモジュール、あるいは
	      type に指定された種類のファイルをロードします。
	      ファイル名以降に指定された引数はファイルへと渡されます。</p></dd><dt><span class="term">ls [<span class="optional">-l</span>]
	    [<span class="optional">path</span>]</span></dt><dd><p>指定された <em class="replaceable"><code>path</code></em>
	      にあるファイルを表示します。
	      <em class="replaceable"><code>path</code></em>
	      が指定されていなければ、ルートディレクトリを表示します。
	      <code class="option">-l</code>
	      が指定されていればファイルサイズも表示されます。</p></dd><dt><span class="term">lsdev [<span class="optional">-v</span>]</span></dt><dd><p>モジュールがロード可能なすべてのデバイスを表示します。
	      もし <code class="option">-v</code> が指定されていれば、
	      より詳細な出力がされます。</p></dd><dt><span class="term">lsmod [<span class="optional">-v</span>]</span></dt><dd><p>ロード済みのモジュールを表示します。
	      <code class="option">-v</code> が指定されていれば、
	      より詳細な内容が出力されます。</p></dd><dt><span class="term">more <em class="replaceable"><code>filename</code></em></span></dt><dd><p><code class="varname">LINES</code>
	      行を表示するごとに停止しながら指定されたファイルを表示します。</p></dd><dt><span class="term">reboot</span></dt><dd><p>すぐにシステムを再起動します。</p></dd><dt><span class="term">set <em class="replaceable"><code>variable</code></em>, </span><span class="term">set
	    <em class="replaceable"><code>variable</code></em>=<em class="replaceable"><code>value</code></em></span></dt><dd><p>ローダの環境変数を設定します。</p></dd><dt><span class="term">unload</span></dt><dd><p>すべてのロード済みモジュールを削除します。</p></dd></dl></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader-examples"></a>13.3.3.3. ローダの使用例</h4></div></div></div><p>次にあげるのは、ローダの実践的な使用例です。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>普段使っているカーネルをシングルユーザモード<a id="idp86956496" class="indexterm"></a>で起動します。</p><pre class="screen"><strong class="userinput"><code>boot -s</code></strong></pre></li><li class="listitem"><p>普段使っているカーネルとモジュールをアンロードし、
	    古い (もしくは別の) カーネルをロードします。</p><pre class="screen"><strong class="userinput"><code>unload</code></strong>
<strong class="userinput"><code>load kernel.old</code></strong></pre><p><code class="filename">kernel.GENERIC</code> とすると、
	    インストールディスクに入っていた
	    generic カーネルを指定することができます。
	    また、直前にインストールされていたカーネル (たとえば、
	    カーネルを自分で設定したり、
	    アップグレードしたりした場合) を指定するには
	    <code class="filename">kernel.old</code><a id="idp86960080" class="indexterm"></a> とします。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">普段のカーネルで使っているモジュールを
	      指定したカーネルでロードする場合は、下のようにします。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><strong class="userinput"><code>unload</code></strong>
<strong class="userinput"><code>set kernel="kernel.old"</code></strong>
<strong class="userinput"><code>boot-conf</code></strong></pre></div></li><li class="listitem"><p>カーネルの設定スクリプト (通常、
	    カーネル起動時に設定される内容を自動化するスクリプト)
	    をロードします。</p><pre class="screen"><strong class="userinput"><code>load -t userconfig_script /boot/kernel.conf</code></strong></pre></li></ul></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-kernel"></a>13.4. カーネル起動時の応答</h2></div></div></div><a id="idp86969680" class="indexterm"></a><p>カーネルが<a class="link" href="#boot-loader" title="13.3.3. 起動ステージ 3 /boot/loader">ローダ</a> (通常は)
      か<a class="link" href="#boot-boot1" title="13.3.2. 起動ステージ 1 /boot/boot1 と起動ステージ 2 /boot/boot2">boot2</a>
      (ローダを迂回して) によってロードされると、
      起動フラグを調べます。
      もし起動フラグがあれば、それに応じて動作を調整します。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-kernel-bootflags"></a>13.4.1. カーネル起動フラグ</h3></div></div></div><a id="idp86973008" class="indexterm"></a><p>良く使われる起動フラグは次のとおりです。</p><div class="variablelist"><a id="boot-kernel-bootflags-list"></a><dl class="variablelist"><dt><span class="term"><code class="option">-a</code></span></dt><dd><p>カーネル初期化中に、
	      ルートファイルシステムとしてマウントするデバイスを尋ねます。</p></dd><dt><span class="term"><code class="option">-C</code></span></dt><dd><p>CDROM から起動します。</p></dd><dt><span class="term"><code class="option">-c</code></span></dt><dd><p>起動時にカーネルコンフィグレーションを行なう
	      UserConfig を実行します。</p></dd><dt><span class="term"><code class="option">-s</code></span></dt><dd><p>シングルユーザモードで起動します。</p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>カーネル起動時により詳細な情報を表示します。</p></dd></dl></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">起動フラグはこの他にもあります。
	  それらについては <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot</span>(8)</span></a> を参照してください。
	</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="device-hints"></a>13.5. Device Hints</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span> <span class="firstname">Tom</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp86992208" class="indexterm"></a><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">これは FreeBSD 5.0 以降の機能です。
      これ以前のバージョンには存在しません。</p></div><p>起動プロセスの間に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> は
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=device.hints&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">device.hints</span>(5)</span></a> を読み込みます。
      このファイルにはカーネル起動の環境変数が格納されており、
      これらの環境変数は <span class="quote">「<span class="quote">device hints</span>」</span>
      と呼ばれることがあります。<span class="quote">「<span class="quote">device hints</span>」</span>
      はデバイスを設定するためにデバイスドライバが使用します。</p><p>device hints は <a class="link" href="#boot-loader" title="13.3.3. 起動ステージ 3 /boot/loader">ステージ 3 ブートローダ</a>
      でも設定できます。変数は
      <code class="command">set</code> コマンドを用いて追加したり、
      <code class="command">unset</code> コマンドを用いて削除できます。
      <code class="command">show</code> コマンドを用いて一覧を見ることもできます。
      <code class="filename">/boot/device.hints</code> に設定されている変数は
      このときに上書きすることができます。
      ローダで設定した device hints の効果は一時的なものであるため、
      次回起動するときには無効になります。</p><p>システムが起動すると、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kenv&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kenv</span>(1)</span></a>
      コマンドでカーネル環境変数をダンプすることができます。</p><p><code class="filename">/boot/device.hints</code>
      は 1 行につき一つの変数を設定でき、行頭の <span class="quote">「<span class="quote">#</span>」</span>
      はその行がコメントであることを示しています。
      書式は次の通りです。</p><pre class="screen"><strong class="userinput"><code>hint.driver.unit.keyword="value"</code></strong></pre><p>ステージ 3 ブートローダ で設定するときの書式は次の通りです。</p><pre class="screen"><strong class="userinput"><code>set hint.driver.unit.keyword=value</code></strong></pre><p><code class="literal">driver</code> はデバイスドライバの名前、
      <code class="literal">unit</code> はデバイスドライバのユニット番号、
      <code class="literal">keyword</code> はヒントキーワードです。
      キーワードは次の設定を指定します:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">at</code>:
	  デバイスがどのバスに接続されているか指定します。</p></li><li class="listitem"><p><code class="literal">port</code>:
	  使用する <acronym class="acronym">I/O</acronym>
	  ポートの開始アドレスを指定します。</p></li><li class="listitem"><p><code class="literal">irq</code>:
	  使用する IRQ を指定します。</p></li><li class="listitem"><p><code class="literal">drq</code>:
	  使用する DMA チャネルを指定します。</p></li><li class="listitem"><p><code class="literal">maddr</code>:
	  使用する物理メモリアドレスを指定します。</p></li><li class="listitem"><p><code class="literal">flags</code>:
	  デバイスに対してさまざまなフラグを設定します。</p></li><li class="listitem"><p><code class="literal">disabled</code>:
	  <code class="literal">1</code>
	  が設定されていると、そのデバイスは無効になります。</p></li></ul></div><p>デバイスドライバはこのリスト以外の変数を設定できるかもしれませんし、
      このリスト以外の変数を必要とするかもしれません。
      したがって、デバイスドライバのマニュアルを読むことをおすすめします。
      より多くの情報を知りたければ、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=device.hints&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">device.hints</span>(5)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kenv&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kenv</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>
      などのマニュアルを参照してください。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-init"></a>13.6. init: プロセス制御の初期化</h2></div></div></div><a id="idp87021264" class="indexterm"></a><p>カーネルの起動が完了すると、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>
      というユーザプロセスに制御が移されます。
      これは <code class="filename">/sbin/init</code>、
      もしくは <code class="command">loader</code> の
      <code class="envar">init_path</code> 変数で指定される場所にあります。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-autoreboot"></a>13.6.1. 自動再起動 (automatic reboot)の動作</h3></div></div></div><p>自動再起動では、
	システム上で利用できるファイルシステムの一慣性を確認します。
	もしそれに問題があって <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a>
	がその不一致を修復できなければ、管理者に直接対処させるため
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> はシステムを<a class="link" href="#boot-singleuser" title="13.6.2. シングルユーザモード">シングルユーザモード</a>へと移行させます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-singleuser"></a>13.6.2. シングルユーザモード</h3></div></div></div><a id="idp87045072" class="indexterm"></a><a id="idp87045584" class="indexterm"></a><p>このモードには、
	<a class="link" href="#boot-autoreboot" title="13.6.1. 自動再起動 (automatic reboot)の動作">自動再起動</a>の処理中か、
	ユーザが起動時に <code class="option">-s</code> オプションを指定した場合、
	あるいは <code class="command">loader</code> で
	<code class="envar">boot_single</code>
	変数を設定することによって移行します。</p><p>また、
	<a class="link" href="#boot-multiuser" title="13.6.3. マルチユーザモード">マルチユーザモード</a>から
	再起動オプション (<code class="option">-r</code>)
	や停止 (halt) オプション (<code class="option">-h</code>) なしで
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shutdown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">shutdown</span>(8)</span></a> を呼び出すとこのモードに移行します。</p><p><code class="filename">/etc/ttys</code>
	でシステムコンソール <code class="literal">console</code>
	が <code class="literal">insecure</code> に設定されている場合、
	システムはシングルユーザモードに移行する前に
	<code class="systemitem">root</code> のパスワードを入力するように求めます。</p><div class="example"><a id="boot-insecure-console"></a><div class="example-title">例13.3 <code class="filename">/etc/ttys</code> の insecure コンソール</div><div class="example-contents"><pre class="programlisting"># name  getty                           type    status          comments
#
# If console is marked "insecure", then init will ask for the root password
# when going to single-user mode.
#
# 訳) console に "insecure" という印をつけると、シングルユーザモードへ移行する
# 際に init が root のパスワードを要求するようになります。
#
console none                            unknown off insecure</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="literal">insecure</code> コンソールとは、
	  あなた自身、コンソールが物理的に安全でないと考えていて、
	  <code class="systemitem">root</code>
	  のパスワードを知る人だけがシングルユーザモードを
	  使えるようにしたいという意味であり、
	  コンソールを安全でない状態で使いたいという意味ではありません。
	  そのため、安全性を求めるならば
	  <code class="literal">secure</code> でなく
	  <code class="literal">insecure</code> を選んでください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-multiuser"></a>13.6.3. マルチユーザモード</h3></div></div></div><a id="idp87057744" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> がファイルシステムが正常であると判断するか、
	ユーザが<a class="link" href="#boot-singleuser" title="13.6.2. シングルユーザモード">シングルユーザモード</a>を終了すると、
	システムはマルチユーザモードへ移行し、
	リソースの設定を始めます。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-rc"></a>13.6.3.1. リソース設定 (rc)</h4></div></div></div><a id="idp87060688" class="indexterm"></a><p>リソース設定システムはデフォルト設定を
	  <code class="filename">/etc/defaults/rc.conf</code> から、
	  そのシステム独自の細かな設定を
	  <code class="filename">/etc/rc.conf</code> から読み込みます。
	  そして <code class="filename">/etc/fstab</code>
	  に記述されるシステムファイルシステムをマウントし、
	  ネットワークサービスの開始、
	  さまざまなシステムデーモンの開始、
	  そして最後に、ローカルにインストールされた package
	  の起動スクリプトの実行へと進みます。</p><p>リソース設定システムに関する参考資料は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> にあります。
	  これはスクリプトそのものを調べることと同じくらい優れたものです。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-shutdown"></a>13.7. シャットダウン動作</h2></div></div></div><a id="idp87069392" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shutdown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">shutdown</span>(8)</span></a>
      を用いてシステムを意図的にシャットダウンした場合、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> は
      <code class="filename">/etc/rc.shutdown</code>
      というスクリプトの実行を試みます。
      そして、すべてのプロセスへ <code class="literal">TERM</code>
      シグナルを送り、続いてうまく終了できなかったプロセスへ
      <code class="literal">KILL</code> シグナルを送ります。</p><p>電源管理機能を持ったシステムで稼働している FreeBSD
      では <code class="command">shutdown -p now</code> コマンドによって、
      直ちに電源を落とすことができます。FreeBSD を再起動するには、
      <code class="command">shutdown -r now</code> を実行するだけです。
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shutdown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">shutdown</span>(8)</span></a> を実行するには、<code class="systemitem">root</code>
      であるか、<code class="systemitem">operator</code>
      グループのメンバでなければなりません。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=halt&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">halt</span>(8)</span></a> や
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=reboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">reboot</span>(8)</span></a> コマンドを利用することもできますが、
      より多くの情報を知るために、それらと <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shutdown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">shutdown</span>(8)</span></a>
      のマニュアルページを参照してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">電源管理機能には <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">acpi</span>(4)</span></a>
	がカーネルに組み込まれているか、
	モジュールが読み込まれていることが必要です。</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users"></a>第14章 ユーザと基本的なアカウントの管理</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Blakey-Milner</span> <span class="firstname">Neil</span> [FAMILY Given]</span>. </span></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#users-synopsis">14.1. この章では</a></span></dt><dt><span class="sect1"><a href="#users-introduction">14.2. アカウントの種類</a></span></dt><dt><span class="sect1"><a href="#users-modifying">14.3. アカウント情報の管理</a></span></dt><dt><span class="sect1"><a href="#users-limiting">14.4. ユーザへの制限</a></span></dt><dt><span class="sect1"><a href="#users-groups">14.5. グループの管理</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-synopsis"></a>14.1. この章では</h2></div></div></div><p>FreeBSD は、複数のユーザが同時にコンピュータを使えるようにします。
      スクリーンとキーボードの前に一度に座れるのはその中の一人だけですが
      ユーザは何人でもネットワークを通してログインできます。
      システムを使うためには、
      どのユーザもアカウントがなければなりません。</p><p>この章では、以下のことを説明します。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD
	  システムにおけるさまざまな種類のユーザアカウントについて</p></li><li class="listitem"><p>ユーザアカウントを追加、削除および変更する方法</p></li><li class="listitem"><p>ユーザやグループが利用できるリソースの上限を制御する方法</p></li><li class="listitem"><p>グループの作成、
	およびグループにユーザをメンバとして追加する方法</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-introduction"></a>14.2. アカウントの種類</h2></div></div></div><p>FreeBSD システムへアクセスするには、
      かならずアカウントが使われ、
      また、プロセスもすべてユーザによって実行されるので、
      ユーザとアカウントの管理は、重要なものです。
    </p><p>アカウントには大きく分けて三種類あります。
      システムアカウント (system accounts)、ユーザアカウント (user accounts)、
      そしてスーパーユーザ (superuser) です。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-system"></a>14.2.1. システムアカウント</h3></div></div></div><a id="idp87099088" class="indexterm"></a><p>システムアカウントは、DNS、メール、
	ウェブサーバといった各種サービスを運用するために使われます。
	この目的は、セキュリティを確保するためです。
	もしすべてのサービスがスーパーユーザで実行されていると、
	それらのサービスはどんな動作でも可能となり、
	適切な制限を適用することができません。</p><a id="idp87100624" class="indexterm"></a><a id="idp87106256" class="indexterm"></a><p>システムアカウントの具体例は、
	<code class="systemitem">daemon</code>, <code class="systemitem">operator</code>,
	<code class="systemitem">bind</code>, <code class="systemitem">news</code> および
	<code class="systemitem">www</code> といったものです。</p><a id="idp87110608" class="indexterm"></a><p><code class="systemitem">nobody</code>
	は通常の特権を持たないシステムアカウントです。
	しかし、<code class="systemitem">nobody</code>
	を利用するサービスが増えれば増えるほど、
	それに所属するファイルやプロセスも増え、
	その特権も大きくなるということを忘れないようにしてください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-user"></a>14.2.2. ユーザアカウント</h3></div></div></div><a id="idp87114320" class="indexterm"></a><p>ユーザアカウントは、
	主に現実のユーザがシステムにアクセスする手段として用いられるものです。
	システムにアクセスするすべてのユーザは、
	それぞれ唯一のユーザアカウントを持つべきです。
	こうすることで管理者は誰が何を行なっているかがわかりますし、
	他の人の設定を壊してしまうようなことを避けることができます。</p><p>それぞれのユーザは快適にシステムを利用するため、
	シェル、エディタ、キー設定、言語など、
	各自の環境をセットアップすることができます。</p><p>FreeBSD システム上のどのアカウントにも、
	以下のような情報がなにかしら結び付けられています。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">ユーザ名</span></dt><dd><p><code class="prompt">login:</code>
	    プロンプトに対して入力するユーザの名前です。
	    ユーザ名はそのシステムで一意でなければならず、
	    2 名のユーザに同じユーザ名をつけることはできません。
	    有効なユーザ名を作成するには <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">passwd</span>(5)</span></a>
	    に記載されているいくつもの規則があります。
	    アプリケーションの上位互換性を保つために、
	    8 文字以下の小文字からなるユーザ名を使うことが推奨されています。</p></dd><dt><span class="term">パスワード</span></dt><dd><p>それぞれのユーザアカウントにはパスワードがあります。
	    パスワードは空白にもできますが、
	    行うべきではありません。</p></dd><dt><span class="term">ユーザ ID (<acronym class="acronym">UID</acronym>)</span></dt><dd><p>ユーザ ID (<acronym class="acronym">UID</acronym>) は、
	    FreeBSD システムがユーザを一意に識別するための数値です。
	    ユーザ名を指定できるコマンドは、
	    ユーザ名を <acronym class="acronym">UID</acronym> に変換してから扱っています。
	    65535 より大きな UID は、32
	    ビット以上の整数に対応していないソフトウェアにおいて互換性の問題を引き起こす可能性があるので、
	    65535 以下の UID を使用することが推奨されています。</p></dd><dt><span class="term">グループ ID (<acronym class="acronym">GID</acronym>)</span></dt><dd><p>グループ ID (<acronym class="acronym">GID</acronym>) は、
	    ユーザが属する第一グループを一意に識別するための数値です。
	    グループは、<acronym class="acronym">UID</acronym> ではなく、
	    ユーザの <acronym class="acronym">GID</acronym> に基づいて資源へのアクセスを制御する仕組みです。
	    これは、ある種の設定ファイルのサイズを大幅に小さくします。
	    ユーザは、複数のグループに所属できます。
	    65535 より大きな GID は、ソフトウェアに問題を引き起こす可能性があるので、
	    65535 以下の GID を使うことを推奨します。</p></dd><dt><span class="term">ログインクラス</span></dt><dd><p>ログインクラスはグループの仕組みを拡張したもので、
	    別々のユーザに対してシステムを調整する時に、
	    さらなる柔軟性を提供します。ログインクラスの詳細については、
	    <a class="xref" href="#users-limiting" title="14.4. ユーザへの制限">「ユーザへの制限」</a> で説明します。</p></dd><dt><span class="term">パスワード変更時間</span></dt><dd><p>デフォルトでは、FreeBSD
	    は定期的にパスワードを変更することをユーザに強制しません。
	    これを <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> を使用してユーザごとに設定し、
	    一部またはすべてのユーザに、
	    一定の時間がたったらパスワードを強制的に変更させることができます。</p></dd><dt><span class="term">アカウント失効時間</span></dt><dd><p>デフォルトでは、FreeBSD はアカウントを失効させません。
	    たとえば学校で生徒のアカウントがある場合など、
	    限られた期間だけのアカウントを作成するなら、
	    そのアカウントがいつ失効するか <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> を使って指定できます。
	    有効期間が経過したら、
	    そのアカウントのディレクトリやファイルは残っていますが、
	    システムへのログインはできなくなります。</p></dd><dt><span class="term">ユーザの氏名</span></dt><dd><p>FreeBSD ではユーザ名でアカウントを一意に識別しますが、
	    必ずしもユーザの本名を反映したものではありません。
	    この情報をアカウントに関連付けることもできます。
	    この情報は、コメントのように、空白、大文字、および
	    8 字以上で記載できます。</p></dd><dt><span class="term">ホームディレクトリ</span></dt><dd><p>ホームディレクトリは、システム中のディレクトリへのフルパスです。
	    これはユーザがログインした時に作業を開始するディレクトリです。
	    一般的な慣習は、すべてのユーザのホームディレクトリを <code class="filename">/home/username</code>
	    か <code class="filename">/usr/home/username</code>
	    の下に置くことです。
	    各ユーザは、個人のファイルやサブディレクトリを、
	    ユーザのホームディレクトリに保存します。</p></dd><dt><span class="term">ユーザシェル</span></dt><dd><p>シェルは、
	    ユーザがシステムと対話するデフォルトの環境を提供します。
	    いろいろな種類のシェルがあり、
	    経験を積んだユーザはそれぞれ好みがあり、
	    それをアカウントの設定に反映できます。</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-superuser"></a>14.2.3. スーパーユーザアカウント</h3></div></div></div><a id="idp87152336" class="indexterm"></a><p>スーパーユーザアカウントは通常
	<code class="systemitem">root</code> と呼ばれ、
	システム管理を行なうために使われ、権限に制限がありません。
	そのため、このアカウントはメールのやりとり、システムの調査、
	プログラミングといった日常的な作業を行なうために使われるべきものではありません。</p><p>その理由は、スーパーユーザが通常のユーザアカウントと異なり、
	操作にまったく制限を受けないことによります。
	そのためスーパーユーザアカウントで操作を間違えると、
	システムに重大な影響を与えてしまう恐れがあるのです。
	ユーザアカウントでは、
	仮に操作を間違えてもシステムを壊してしまうようなことはできないようになっています。
	そのため、ユーザアカウントでログインし、
	高い権限が必要なコマンドを実行するときだけスーパーユーザになることが推奨されています。</p><p>スーパーユーザで実行するコマンドはいつでも、
	二回、三回と確認してください。
	なぜならスペースが多かったり、文字が欠けていたりするだけで、
	取り返しのつかないデータの破壊につながる可能性があるからです。</p><p>スーパーユーザの権限を得るには、さまざまな方法があります。
      <code class="systemitem">root</code> ユーザとしてログインする方法もありますが、
      これはまったくお勧めできません。</p><p>スーパーユーザの権限を手に入れるには、かわりに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>
      を使って下さい。
      <code class="literal">-</code> オプションをつけて実行すると、
      実行したユーザに root ユーザの環境が設定されます。
      このコマンドは <code class="systemitem">wheel</code>
      グループに入ってるユーザのみが実行でき、他のユーザは実行出来ません。
      また、実行時には <code class="systemitem">root</code>
      ユーザのパスワードを必要とします。</p><p>以下の例では、<code class="command">make install</code>
      を行うときにスーパーユーザの権限が必要なので、
      このコマンドを実行する時だけユーザはスーパーユーザになります。
      コマンドを実行したら、ユーザは <code class="command">exit</code>
      を実行してスーパーユーザからログアウトし、
      通常のユーザアカウントの権限に戻ります。</p><div class="example"><a id="idp87160016"></a><div class="example-title">例14.1 スーパーユーザ権限でプログラムをインストールする</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>configure</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>su -</code></strong>
Password:
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong>
<code class="prompt">%</code></pre></div></div><br class="example-break" /><p>1 人の管理者が一台のマシン、
       もしくは小規模なネットワークを管理する場合には、
       <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> のフレームワークはうまく機能するでしょう。
       この代わりとなるのは、
       <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/sudo/pkg-descr">security/sudo</a> package または port
       です。これはログ機能や、
       スーパーユーザの権限で実行できるユーザやコマンドを設定できます。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-modifying"></a>14.3. アカウント情報の管理</h2></div></div></div><a id="idp87171920" class="indexterm"></a><p>FreeBSD には、
      ユーザアカウントを操作するのにさまざまなコマンドが用意されています。
      もっとも一般的なコマンドを以下に示し、
      それに続いて詳しい使用例を示します。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>コマンド</th><th>要約</th></tr></thead><tbody><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a></td><td>コマンドラインからユーザを追加するための推奨アプリケーション</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rmuser</span>(8)</span></a></td><td>コマンドラインからユーザを削除するための推奨アプリケーション</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a></td><td>ユーザデータベースの情報を変更するための柔軟なツール</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">passwd</span>(1)</span></a></td><td>ユーザのパスワードを変更する簡単なコマンドラインツール</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a></td><td>ユーザアカウントのあらゆる箇所を変更する強力で柔軟なツール</td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-adduser"></a>14.3.1. <code class="command">adduser</code></h3></div></div></div><a id="idp87186640" class="indexterm"></a><a id="idp87187792" class="indexterm"></a><a id="idp87192912" class="indexterm"></a><a id="idp87193808" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> は、
        新しいユーザを登録するためのシンプルなプログラムです。
	ユーザを追加すると、
	このプログラムは、<code class="filename">/etc/passwd</code> と
	<code class="filename">/etc/group</code> を自動的に更新します。
	また、新規ユーザのホームディレクトリを作成し、
	<code class="filename">/usr/share/skel</code>
	から、デフォルトで使用される設定ファイルをコピーします。
	また、新しく作成されたユーザに対して、
        ウェルカムメッセージをメールで送信することも可能です。</p><div class="example"><a id="idp87196496"></a><div class="example-title">例14.2 FreeBSD におけるユーザの追加</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>adduser</code></strong>
Username: <strong class="userinput"><code>jru</code></strong>
Full name: <strong class="userinput"><code>J. Random User</code></strong>
Uid (Leave empty for default):
Login group [jru]:
Login group is jru. Invite jru into other groups? []: <strong class="userinput"><code>wheel</code></strong>
Login class [default]:
Shell (sh csh tcsh zsh nologin) [sh]: <strong class="userinput"><code>zsh</code></strong>
Home directory [/home/jru]:
Home directory permissions (Leave empty for default):
Use password-based authentication? [yes]:
Use an empty password? (yes/no) [no]:
Use a random password? (yes/no) [no]:
Enter password:
Enter password again:
Lock out the account after creation? [no]:
Username   : jru
Password   : ****
Full Name  : J. Random User
Uid        : 1001
Class      :
Groups     : jru wheel
Home       : /home/jru
Shell      : /usr/local/bin/zsh
Locked     : no
OK? (yes/no): <strong class="userinput"><code>yes</code></strong>
adduser: INFO: Successfully added (jru) to the user database.
Add another user? (yes/no): <strong class="userinput"><code>no</code></strong>
Goodbye!
<code class="prompt">#</code></pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">入力したパスワードは画面に表示されませんので、
	  ユーザアカウントを作成する際には、
	  パスワードを間違えて入力してしまわないように注意してください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-rmuser"></a>14.3.2. <code class="command">rmuser</code></h3></div></div></div><a id="idp87206864" class="indexterm"></a><a id="idp87207504" class="indexterm"></a><p>システムから完全にユーザを削除するには、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rmuser</span>(8)</span></a> を使います。
	このコマンドは、次の手順を実行します。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>指定されたユーザの <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">crontab</span>(1)</span></a>
	    エントリが存在する場合には削除。</p></li><li class="step"><p>指定されたユーザの <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=at&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">at</span>(1)</span></a> ジョブをすべて削除。</p></li><li class="step"><p>指定されたユーザが所有するすべてのプロセスを強制終了。</p></li><li class="step"><p>ローカルパスワードファイルから、
            指定されたユーザのエントリを削除。</p></li><li class="step"><p>指定されたユーザのホームディレクトリを削除
            (ディレクトリの所有者が指定されたユーザのものだった場合)。</p></li><li class="step"><p><code class="filename">/var/mail</code>
            から、指定されたユーザの到着メールファイルを削除。</p></li><li class="step"><p><code class="filename">/tmp</code>
            のような一時ファイル保存領域から、
            指定されたユーザの所有するファイルを削除。</p></li><li class="step"><p>そして最後に、
            <code class="filename">/etc/group</code> にある
            すべてのグループから、指定されたユーザを削除します。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">指定されたユーザと同じ名前のグループで、
	      そのユーザが削除されると空のグループとなる場合は、
	      そのグループ自体が削除されます。
	      これは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> によってユーザごとに作成される、
	      ユニークなグループに対応するものです。</p></div></li></ol></div><p>スーパユーザアカウントの削除に
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rmuser</span>(8)</span></a> を利用することはできません。
        スーパユーザアカウントの削除はほとんどすべての場合、
        大規模なシステムの破壊を意味するからです。</p><p>デフォルトでは、以下の例のような対話モードが使われます。</p><div class="example"><a id="idp87222224"></a><div class="example-title">例14.3 <code class="command">rmuser</code> による対話的なアカウントの削除</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rmuser jru</code></strong>
Matching password entry:
jru:*:1001:1001::0:0:J. Random User:/home/jru:/usr/local/bin/zsh
Is this the entry you wish to remove? <strong class="userinput"><code>y</code></strong>
Remove user's home directory (/home/jru)? <strong class="userinput"><code>y</code></strong>
Updating password file, updating databases, done.
Updating group file: trusted (removing group jru -- personal group is empty) done.
Removing user's incoming mail file /var/mail/jru: done.
Removing files belonging to jru from /tmp: done.
Removing files belonging to jru from /var/tmp: done.
Removing files belonging to jru from /var/tmp/vi.recover: done.
<code class="prompt">#</code></pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-chpass"></a>14.3.3. <code class="command">chpass</code></h3></div></div></div><a id="idp87226320" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a> を用いて、
        パスワード、シェル、その他の個人情報といった、
        ユーザデータベース情報を変更できます。</p><p>スーパユーザ権限に限り、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a> を用い、
	他のユーザの情報やパスワードを変更できます。</p><p>ユーザ名の他にオプションを指定しないと、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a> はユーザ情報を編集するエディタを表示します。
	ユーザがエディタを終了すると、
	ユーザデータベースが新しい情報に更新されます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">スーパユーザでない場合は、
	  エディタを抜けた後にパスワードを聞かれます。</p></div><div class="example"><a id="idp87239376"></a><div class="example-title">例14.4 スーパユーザによる対話的な <code class="command">chpass</code></div><div class="example-contents"><pre class="screen">#Changing user database information for jru.
Login: jru
Password: *
Uid [#]: 1001
Gid [# or name]: 1001
Change [month day year]:
Expire [month day year]:
Class:
Home directory: /home/jru
Shell: /usr/local/bin/zsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:</pre></div></div><br class="example-break" /><p>ユーザは、この情報の限られた部分のみ変更が可能です。
        また、変更できるのはそのユーザ自身のアカウント情報のみです。
      </p><div class="example"><a id="idp87241168"></a><div class="example-title">例14.5 通常のユーザによる対話的な <code class="command">chpass</code></div><div class="example-contents"><pre class="screen">#Changing user database information for jru.
Shell: /usr/local/bin/zsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chfn&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chfn</span>(1)</span></a> および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chsh</span>(1)</span></a> はいずれも、 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a>
	  へのリンクです。
          また、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypchpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypchpass</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypchfn&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypchfn</span>(1)</span></a> および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypchsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypchsh</span>(1)</span></a> も同様です。
          <acronym class="acronym">NIS</acronym> のサポートは自動的に行なわれますので、
          コマンドの先頭に <code class="literal">yp</code>
          をつける必要はありません。
	  NIS の設定については、
	  
	  で説明されています。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-passwd"></a>14.3.4. <code class="command">passwd</code></h3></div></div></div><a id="idp87250000" class="indexterm"></a><a id="idp87250640" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">passwd</span>(1)</span></a> は、
        ユーザが自分のパスワードを変更する通常の方法です。
        スーパユーザ権限では、
        他のユーザのパスワードを変更するのに使われます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">誤って、または不正なパスワードの変更を避けるため、
	  新しいパスワードを設定する前に、
	  もとのパスワードを入力しなければなりません。
	  スーパーユーザの権限でユーザのパスワードを変更する際には、
	  もとのパスワードを入力する必要はありません。</p></div><div class="example"><a id="idp87253712"></a><div class="example-title">例14.6 自分のパスワードの変更</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>passwd</code></strong>
Changing local password for jru.
Old password:
New password:
Retype new password:
passwd: updating the database...
passwd: done</pre></div></div><br class="example-break" /><div class="example"><a id="idp87255504"></a><div class="example-title">例14.7 スーパーユーザ権限での他のユーザのパスワード変更</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>passwd jru</code></strong>
Changing local password for jru.
New password:
Retype new password:
passwd: updating the database...
passwd: done</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a> 同様、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=yppasswd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">yppasswd</span>(1)</span></a> は、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">passwd</span>(1)</span></a> へのリンクになっていますので、
	  NIS はどちらのコマンドでも動作します。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-pw"></a>14.3.5. <code class="command">pw</code></h3></div></div></div><a id="idp87261392" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> は、ユーザやグループの作成、削除、
	変更および表示を行なうコマンドラインのユーティリティです。
	これは、システムユーザファイルやシステムグループファイルの
	フロントエンドとして働きます。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a>
	はとても強力な一連のコマンドラインオプションを有しており、
	シェルスクリプトで使うのに向いていますが、新しいユーザは、
	この章で紹介されている他のコマンドに比べて難しいと感じるかもしれません。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-limiting"></a>14.4. ユーザへの制限</h2></div></div></div><a id="idp87269072" class="indexterm"></a><a id="idp87269584" class="indexterm"></a><p>FreeBSD は、
      個々のユーザが利用できるシステム資源の量を管理者が制限できる方法をいくつも用意しています。
      その種の制限は、ディスククォータ (quota)
      とその他の資源の制限の 2 つの章で説明します。</p><a id="idp87271120" class="indexterm"></a><a id="idp87271632" class="indexterm"></a><a id="idp87272784" class="indexterm"></a><p>ディスククォータは、ユーザが利用できるディスク容量を制限し、
      その都度計算しなくてもディスク使用量を簡単に確認できる手段も提供しています。
      クォータについては、<a class="xref" href="#quotas" title="16.12. ファイルシステムクォータ">「ファイルシステムクォータ」</a> で解説しています。</p><p>その他のリソースの制限とは、ユーザが消費できる
      CPU、メモリなどのリソースを制限する手段のことです。
      これはログインクラスを用いて定義されているもので、
      この後で解説しています。</p><a id="idp87282768" class="indexterm"></a><p>ログインクラスは <code class="filename">/etc/login.conf</code>
      で定義します。詳細な説明は
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> に詳しく記載されています。
      各ユーザアカウントにはログインクラスが割り当てられていて
      (デフォルトでは <code class="literal">default</code> です)、
      それぞれのログインクラスにはログインケーパビリティの集合が割り当てられています。
      ログインケーパビリティとは、
      <code class="literal">名称=値</code>
      の組のことで、<em class="replaceable"><code>名称</code></em>
      は周知の識別子、<em class="replaceable"><code>値</code></em>
      は、<em class="replaceable"><code>名称</code></em> に応じて処理される任意の文字列です。
      ログインクラスとケーパビリティを設定するのはどちらかといえば簡単なことで、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> でも説明されています。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD は通常、直接 <code class="filename">/etc/login.conf</code>
	から設定を読み込まず、
	より速く検索できる
	<code class="filename">/etc/login.conf.db</code>
	データベースから読み込みます。<code class="filename">/etc/login.conf</code>
	を編集する時には <code class="filename">/etc/login.conf.db</code>
	を次のコマンドを実行してアップデートする必要があります。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cap_mkdb /etc/login.conf</code></strong></pre></div><p>リソースの制限は、
      2 つの点で標準的なログインケーパビリティと異なっています。
      第一に、どの制限についても、ソフト (現在の)
      リミットとハードリミットがあります。
      ソフトリミットは、ユーザやアプリケーションが調整できますが、
      ハードリミットを超えることはできません。
      ユーザはハードリミットを下げることはできますが、
      上げることはスーパユーザのみができます。
      第二に、ほとんどのリソースの制限は特定のユーザに対してプロセス毎に適用されるもので、
      そのユーザが利用するリソースの総量を制限するものではありません。
      ただし、この違いは制限を特別扱いすることで実現されるものであり、
      ログインケーパビリティフレームワークの実装によるものではありません。</p><p>以下が最もよく使われるリソースの制限になります。
      残りは、他のすべてのログインケーパビリティと並んで
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> に書かれています。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">coredumpsize</code></span></dt><dd><p>プログラムが生成する core
	    ファイルのサイズ<a id="idp87294288" class="indexterm"></a>にかかる制限は、
	    <code class="literal">filesize</code> やディスククォータなどの、
	    ほかのディスク使用に関する制限<a id="idp87295184" class="indexterm"></a>に従属します。
	    この制限は、ディスク領域の消費を制御するあまり厳しくない手段としてよく使われています。
	    ユーザは core ファイルを自分で生成するわけではなく、
	    削除しないことも多いので、
	    これを設定すれば大きなプログラムが異常終了してもディスクの空きがなくならずに済みます。</p></dd><dt><span class="term"><code class="literal">cputime</code></span></dt><dd><p>そのユーザのプロセスが消費できる CPU 時間<a id="idp87297616" class="indexterm"></a><a id="idp87298000" class="indexterm"></a> の上限です。
	    これを超えたプロセスは、カーネルにより終了されます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">これは、消費される CPU <span class="emphasis"><em>時間</em></span>
	      についての制限であって、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> や <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a>
	      のフィールドで表示される
	      CPU の割合に関するものではありません。</p></div></dd><dt><span class="term"><code class="literal">filesize</code></span></dt><dd><p>ユーザが所有できるファイルの大きさ<a id="idp87307344" class="indexterm"></a><a id="idp87307728" class="indexterm"></a>の上限です。<a class="link" href="#quotas" title="16.12. ファイルシステムクォータ">ディスククォータ</a> と違い、
	    この制限はユーザのファイルをすべてまとめた集合にではなく、
	    個々のファイルにかかります。</p></dd><dt><span class="term"><code class="literal">maxproc</code></span></dt><dd><p>ユーザが実行できるプロセス数の上限<a id="idp87310672" class="indexterm"></a><a id="idp87311184" class="indexterm"></a>です。
	    フォアグラウンドプロセスとバックグラウンドプロセスの両方を扱います。
	    この上限は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> 変数
	    <code class="varname">kern.maxproc</code>
	    で指定されたシステムの制限を超えることはできません。
	    同時に複数ログインすることや、
	    パイプライン実行することは便利なことが多いので、
	    この値をあまり小さな値に設定すると、
	    そのユーザの生産性が悪化する可能性があります。
	    大きなプログラムをコンパイルする場合のように、
	    タスクによっては複数のプロセスやプリプロセッサが実行されます。</p></dd><dt><span class="term"><code class="literal">memorylocked</code></span></dt><dd><p>これは、1 つのプロセスが <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mlock&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">mlock</span>(2)</span></a>
	    によりメインメモリにロックされることを要求できるメモリ<a id="idp87315536" class="indexterm"></a><a id="idp87315920" class="indexterm"></a>の最大容量です。
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a> のようなシステムで重要なプログラムは、
	    メインメモリへロックして、システムがスワップする際に、
	    ディスクのスラッシングを引き起こさないようにします。</p></dd><dt><span class="term"><code class="literal">memoryuse</code></span></dt><dd><p>これは、どの時点かを問わず、
	    あるプロセスが消費できる最大のメモリ容量<a id="idp87327440" class="indexterm"></a><a id="idp87327824" class="indexterm"></a>です。
	    これは、メインメモリとスワップの使用量を合わせたものです。
	    メモリ消費を抑えるための包括的な制限ではありませんが、
	    手始めにはよいでしょう。</p></dd><dt><span class="term"><code class="literal">openfiles</code></span></dt><dd><p>これは、あるプロセスが開いておける最大のファイル数<a id="idp87330256" class="indexterm"></a><a id="idp87330640" class="indexterm"></a>です。
	    FreeBSD では、ファイルはまた、ソケットや
	    IPC チャンネルを表わすのにも使われています。
	    ですから、あまり低い値に設定しないよう注意してください。
	    これに対応するシステム全体の制限は
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>
	    <code class="varname">kern.maxfiles</code> で定義されています。</p></dd><dt><span class="term"><code class="literal">sbsize</code></span></dt><dd><p>これは、あるユーザが消費できるネットワークメモリ
	    (つまり mbuf<a id="idp87334224" class="indexterm"></a><a id="idp87334608" class="indexterm"></a>) の上限の量です。ユーザは、
	    ネットワーク通信を制限するのに使えます。</p></dd><dt><span class="term"><code class="literal">stacksize</code></span></dt><dd><p>これは、プロセスのスタックサイズ<a id="idp87337168" class="indexterm"></a><a id="idp87337552" class="indexterm"></a>の上限です。
	    あるプログラムが使用しうるメモリの量を制限するには、
	    これだけでは十分ではありません。
	    したがって、他の制限と組み合わせて使わなければなりません。</p></dd></dl></div><p>リソースの制限を設定するにあたり、
      ほかにもいくつか覚えておかなければならないことがあります。
      以下は、一般的なこつやお勧め、さまざまなコメントになります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>システム起動時に <code class="filename">/etc/rc</code>
	  から起動されたプロセスは、<code class="literal">daemon</code>
	  ログインクラスに割り当てられます。</p></li><li class="listitem"><p>システムに付属していた
	  <code class="filename">/etc/login.conf</code>
	  はほとんどの制限について妥当な値になっていますが、
	  すべてのシステムにおいてふさわしいというわけではありません。
	  制限をあまり緩くするとシステムを悪用しやすくしてしまいますし、
	  厳しくしすぎると生産性を悪化させてしまいます。</p></li><li class="listitem"><p><span class="application">Xorg</span> のユーザには、
	  他のユーザより多くのリソースを与えるべきかもしれません。
	  <span class="application">Xorg</span>
	  そのものが多くのリソースを使うだけでなく、
	  より多くのプログラムを並行して使うことをユーザに促します。</p></li><li class="listitem"><p>多くの制限は個々のプロセスにかかるもので、
	  一人のユーザにまとめてかかるものではありません。
	  例えば、<code class="varname">openfiles</code> を 50 に設定することは、
	  ユーザが動かすそれぞれのプロセスが最大
	  50 個のファイルを開けるということです。
	  あるユーザが開けるファイルの総数は、
	  <code class="literal">openfiles</code> の値に <code class="literal">maxproc</code>
	  をかけたものになります。
	  同じことがメモリ消費量にもあてはまります。</p></li></ul></div><p>リソースの制限と、ログインクラス、
      ログインケーパビリティ一般についての詳しい情報は、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cap_mkdb&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cap_mkdb</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getrlimit&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">getrlimit</span>(2)</span></a> および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>
      をご覧ください。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-groups"></a>14.5. グループの管理</h2></div></div></div><a id="idp87349328" class="indexterm"></a><a id="idp87349840" class="indexterm"></a><a id="idp87350736" class="indexterm"></a><p>グループとは、ユーザを羅列したものです。
      グループは、グループ名と <acronym class="acronym">GID</acronym> で識別されます。
      FreeBSD では、
      あるプロセスが何かするのを許可するかどうかをカーネルが判断する際に、
      プロセスの <acronym class="acronym">UID</acronym>
      とそのユーザが所属するグループの一覧を利用します。
      ほとんどの場合、ユーザもしくはプロセスの <acronym class="acronym">GID</acronym>
      は一覧の最初のグループを指しています。</p><p>グループ名から <acronym class="acronym">GID</acronym> への写像は
      <code class="filename">/etc/group</code> にあります。
      これは、コロンで区切られた 4 項目からなるテキストファイルです。
      1 番目の項目はグループ名、
      2 番目は暗号化されたパスワード、
      3 番目が <acronym class="acronym">GID</acronym>、
      4 番目がカンマで区切られたメンバの一覧です。
      文法についての完全な説明は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=group&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">group</span>(5)</span></a> をご覧ください。</p><p>スーパーユーザは、<code class="filename">/etc/group</code>
      をテキストエディタで編集できます。
      もしくは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> を使ってグループの追加や編集をできます。
      たとえば、<code class="systemitem">teamtwo</code>
      というグループを追加して、その存在を確認するには、
      次のように使います。</p><div class="example"><a id="idp87362128"></a><div class="example-title">例14.8 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> によるグループの追加</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupadd teamtwo</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>pw groupshow teamtwo</code></strong>
teamtwo:*:1100:</pre></div></div><br class="example-break" /><p>この例では、<code class="literal">1100</code> という番号は、
      <code class="systemitem">teamtwo</code> の <acronym class="acronym">GID</acronym> です。
      この時点では、<code class="systemitem">teamtwo</code>
      にメンバはいません。
      以下のコマンドは、
      <code class="systemitem">jru</code> を <code class="systemitem">teamtwo</code>
      のメンバに追加します。</p><div class="example"><a id="idp87372752"></a><div class="example-title">例14.9 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> により新しいグループにメンバを追加する</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupmod teamtwo -M jru</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>pw groupshow teamtwo</code></strong>
teamtwo:*:1100:jru</pre></div></div><br class="example-break" /><p><code class="option">-M</code> の引数は、
      カンマで区切られた新しい (空の) グループに追加するもしくは存在するグループのメンバを置き換えるユーザの一覧です。
      ユーザにとっては、このグループのメンバーシップはパスワードファイルに記載されているプライマリのグループとは異なります。
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> の <code class="option">groupshow</code> コマンドを使った時は、
      そのユーザはグループの一員として表示されませんが、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=id&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">id</span>(1)</span></a>
      などのツールを使って情報を問い合わせれば、
      その情報を引き出せます。ユーザをグループに追加をする際に、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> は
      <code class="filename">/etc/group</code> しか扱わず、
      <code class="filename">/etc/passwd</code> から追加のデータを読んだりはしません。</p><div class="example"><a id="idp87384528"></a><div class="example-title">例14.10 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> によるグループへのユーザ追加</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupmod teamtwo -m db</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>pw groupshow teamtwo</code></strong>
teamtwo:*:1100:jru,db</pre></div></div><br class="example-break" /><p>この例では、<code class="option">-m</code> の引数は、
      カンマで区切られたグループに追加するユーザの一覧です。
      前の例と異なり、これらのユーザはグループ一覧に追加され、
      グループのユーザ一覧を置き換えることはありません。</p><div class="example"><a id="idp87388496"></a><div class="example-title">例14.11 グループに所属しているユーザを調べるための <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=id&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">id</span>(1)</span></a> の使い方</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>id jru</code></strong>
uid=1001(jru) gid=1001(jru) groups=1001(jru), 1100(teamtwo)</pre></div></div><br class="example-break" /><p>この例では、<code class="systemitem">jru</code> は
      <code class="systemitem">jru</code> グループと
      <code class="systemitem">teamtwo</code> グループのメンバです。</p><p>このコマンドや <code class="filename">/etc/group</code>
      のフォーマットの詳細については、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=group&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">group</span>(5)</span></a> をご覧ください。</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security"></a>第15章 セキュリティ</h2></div><div><span class="authorgroup">本章の基にした security(7) マニュアルページの執筆: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Dillon</span> <span class="firstname">Matthew</span> [FAMILY Given]</span>. </span></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#idp87404368">15.1. この章では</a></span></dt><dt><span class="sect1"><a href="#security-intro">15.2. はじめに</a></span></dt><dt><span class="sect1"><a href="#securing-freebsd">15.3. FreeBSDの安全性を高める</a></span></dt><dt><span class="sect1"><a href="#crypt">15.4. DES, MD5 と Crypt</a></span></dt><dt><span class="sect1"><a href="#skey">15.5. S/Key</a></span></dt><dt><span class="sect1"><a href="#kerberos">15.6. Kerberos</a></span></dt><dt><span class="sect1"><a href="#firewalls">15.7. ファイアウォール</a></span></dt><dt><span class="sect1"><a href="#openssl">15.8. OpenSSL</a></span></dt><dt><span class="sect1"><a href="#ipsec">15.9. IPsec</a></span></dt><dt><span class="sect1"><a href="#openssh">15.10. OpenSSH</a></span></dt><dt><span class="sect1"><a href="#fs-acl">15.11. ファイルシステムアクセス制御リスト</a></span></dt></dl></div><a id="idp87402960" class="indexterm"></a><p><span class="emphasis"><em>訳: 日野 浩志 <code class="email">&lt;<a xmlns="" class="email" href="mailto:hino@ccm.cl.nec.co.jp">hino@ccm.cl.nec.co.jp</a>&gt;</code>、(jpman プロジェクトの成果を利用させ
    ていただきました)。</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp87404368"></a>15.1. この章では</h2></div></div></div><p>この章では、基本的なシステムセキュリティの考え方、
      覚えておくべき一般的なルールを紹介し、
      FreeBSD における高度な話題について簡単に説明します
      ここで扱う話題の多くは、
      一般的なシステムやインターネットセキュリティにもあてはまります。
      インターネットはもはや、誰もが親切な隣人であろうとする
      <span class="quote">「<span class="quote">友好的な</span>」</span> 場ではありません。
      あなたのシステムを安全に保つことは、
      あなたのデータ、知的財産、時間、その他を、
      ハッカーやその同類から守るためには欠かせません。</p><p>FreeBSD は、
      システムとネットワークの整合性と安全性を確実にする仕組みと一連のユーティリティを提供しています。</p><p>この章を読むと、以下のことがわかります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD
	  に関する基本的なシステムセキュリティの考え方</p></li><li class="listitem"><p>DES や MD5 のような、FreeBSD
	  で利用できるさまざまな暗号化手法について</p></li><li class="listitem"><p>代替認証システムである、
	  ワンタイムパスワード認証システム S/Key の設定方法</p></li><li class="listitem"><p>もう一つの代替認証システム Kerberos の設定方法</p></li><li class="listitem"><p>IPFW で firewall を構築する方法</p></li><li class="listitem"><p>IPsec の設定方法</p></li><li class="listitem"><p>FreeBSD で使われている SSH 実装である
	  OpenSSH の設定および使用方法</p></li><li class="listitem"><p>ファイルシステムの <acronym class="acronym">ACL</acronym> (アクセス制御リスト)
	  とは何か、またその使用法</p></li></ul></div><p>この章を読む前に、次のことが必要になります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD およびインターネットの基本概念の理解</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-intro"></a>15.2. はじめに</h2></div></div></div><p>セキュリティとは、システム管理者をいつも悩ませる仕事の一つです。
      すべての BSD Unix マルチユーザシステムは、
      従来からいくつかのセキュリティ機構を備えていますが、
      ユーザを疑心暗鬼に陥らせないように追加のセキュリティ機構を構築し
      保守する仕事はおそらく、システム管理者としてもっとも大きな責務の一つでしょう。
      マシンの安全性に反映されるのは、管理者が作業したことだけです。
      またセキュリティ問題は、快適な環境に必要なものと競合します。
      一般に Unix システムは膨大な数のプロセスを同時に動作させることができ、
      そのプロセスの大部分は、サーバ 〓
      外部から接続し、通信するものとして動作します。
      かつてのミニコンとメインフレームがデスクトップにとってかわり、
      さらにコンピュータが相互に接続されたネットワークを形成するようになった今日、
      セキュリティは一層大きな関心事になってきています。</p><p>セキュリティを実装するには、
      タマネギのように階層化する手法
      (a layered <span class="quote">「<span class="quote">onion</span>」</span> approach)
      が最適です。
      どうすれば良いのか簡単に説明すると、
      便利な機能と同じ数だけセキュリティの階層を作り、
      システムへの侵入を注意深く監視するのです。
      あなたはセキュリティを過度に厳重にしたり、
      侵入の監視に時間をとられたいとは思わないでしょう。
      この侵入の発見という部分は、
      あらゆるセキュリティ機構において最も重要な部分の一つなのです。
      たとえば、システムの各バイナリに
      <code class="literal">schg</code> フラグ (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a> 参照)
      を設定するのは、大して意味がありません。
      フラグを設定すると一時的にバイナリが保護され、
      侵入してきた攻撃者によってシステムに加えられる変更のうち、
      容易に検出可能な変更は行なえなくなります。
      しかしその結果として、セキュリティ機構がその侵入者を検出することも
      まったくできなくなってしまうでしょう。</p><p>また、システムセキュリティには、
      さまざまな形での攻撃に対処することとも関係しています。
      攻撃の中には <code class="systemitem">root</code>
      権限を奪おう (<span class="quote">「<span class="quote">root 権限を破る</span>」</span>) とはしないけれども、
      クラッシュやシステムの不安定状態を引き起こそうとするものもあります。
      このセキュリティ問題は、いくつかに分類することが可能です。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>サービス妨害攻撃 (denial of service attack)</p></li><li class="listitem"><p>ユーザアカウントの不正利用 (user account compromise)</p></li><li class="listitem"><p>アクセス可能なサーバを使った root 権限の不正利用</p></li><li class="listitem"><p>ユーザアカウントを経由した root 権限の不正使用</p></li><li class="listitem"><p>バックドアの設置</p></li></ol></div><a id="idp87432656" class="indexterm"></a><a id="idp87433936" class="indexterm"></a><a id="idp87435472" class="indexterm"></a><p>サービス妨害攻撃 (DoS 攻撃) とは、
      マシンから必要な資源を奪う行為です。
      通常、サービス妨害攻撃はそのマシンで実行されるサーバや
      ネットワークスタックを過負荷状態にしてマシンをクラッシュさせたり、
      マシンを使えなくしたりするような力任せの方法です。
      サービス妨害攻撃の中には、
      ネットワークスタックのバグを利用して、
      パケット一つでマシンをクラッシュさせようとするものもあります。
      後者には、カーネルにバグ修正を施すことによってのみ対応することができます。
      サーバプロセスに対する攻撃は、オプションを適切に指定することによって、
      攻撃されている状況でサーバプロセスの負荷上昇に限界を設定することで
      対応できる場合が多いです。これらに比べると、
      ネットワークへの力任せの攻撃への対応はずっと難しくなります。
      たとえば、偽造パケットによる攻撃 (spoof-packet attack) は、
      インターネットからシステムを切り離す以外の方法で
      防ぐことはほとんど不可能です。
      この攻撃によって、マシンを落としてしまうことはできないかもしれませんが、
      接続しているインターネット回線を飽和させてしまうことはできます。</p><a id="idp87436368" class="indexterm"></a><p>ユーザアカウントの不正利用は、
      サービス妨害攻撃よりもずっとよくある問題です。
      このご時勢でも、自分たちのマシンで標準の
      <span class="application">telnetd</span>,
      <span class="application">rlogind</span>,
      <span class="application">rshd</span>, <span class="application">ftpd</span>
      サーバを実行させているシステ
      ム管理者は多いのです。これらのサーバは、デフォルトでは、暗号化さ
      れたコネクション上で動作していません。その結果、抱えているユーザ
      数が標準くらいであれば、リモートログイン (そのシステムにログイン
      するには最も普通で便利な方法です) しているユーザのうち一人以上は、
      パスワードを覗き見られてしまうでしょう。システム管理者が注意深い
      人ならば、たとえログインが成功していたとしても、リモートアクセス
      ログを解析して、疑わしい送信元アドレスを探すものです。</p><p>ひとたび攻撃者がユーザアカウントへのアクセス権を入手したら、
      攻撃者は <code class="systemitem">root</code> 権限を破れると仮定するべきです。
      しかし、セキュリティを十分維持し、手入れの行き届いたシステムにおい
      ては、あるユーザアカウントへのアクセスが可能となっても、
      必ずしも攻撃者に <code class="systemitem">root</code>
      へのアクセス権を与えるとは限りません。この違いは重要です。
      というのは、一般的に
      <code class="systemitem">root</code> へのアクセス権がなければ、
      攻撃者は自分の侵入の痕跡を隠蔽することができませんし、
      そのユーザのファイルを引っかき回したり、
      マシンをクラッシュさせたりするのがせいぜいです。
      ユーザアカウントの不正利用はめずらしいことではありません。
      なぜなら一般ユーザは、
      システム管理者ほど注意を払わない傾向があるからです。</p><a id="idp87441360" class="indexterm"></a><p>システム管理者は、あるマシン上で <code class="systemitem">root</code>
      権限を奪取する方法は、
      潜在的に何通りもあるということを心しておかねばなりません。
      攻撃者は <code class="systemitem">root</code>
      のパスワードを知っているかもしれませんし、
      攻撃者が <code class="systemitem">root</code>
      権限で実行されているサーバのバグを見つけ、
      ネットワーク接続を介して
      <code class="systemitem">root</code> 権限を破ることができるかもしれません。
      また、攻撃者は suid-root プログラムに存在するバグを知っていて、
      ユーザアカウントを破れば
      <code class="systemitem">root</code> 権限を奪取できるかもしれません。
      攻撃者があるマシン上で
      <code class="systemitem">root</code> 権限を破る方法を知ったならば、
      攻撃者は裏口を用意する必要がありません。
      これまでに発見され、ふさがれた <code class="systemitem">root</code>
      の穴の多くには、攻撃者が自分のしたことの痕跡を消そうとした作業が、
      かなりの割合で含まれています。
      そのため、ほとんどの攻撃者は裏口を作るのです。裏口は、
      攻撃者がたやすくシステムへの
      <code class="systemitem">root</code> アクセスを再び得られるようにしますが、
      有能な管理者に侵入を検知する便利な手段を与えるものでもあります。
      攻撃者に裏口を作らせないようにするということは、
      セキュリティにとっては実際には良くないことかもしれません。
      なぜなら、攻撃者が最初に見つけて侵入してきたセキュリティホールは
      ふさがれないからです。</p><p>セキュリティを改善する方法は、常に、
      タマネギの皮のように階層化する手法
      (a multi-layered <span class="quote">「<span class="quote">onion peel</span>」</span> approach)
      で実装されるべきです。これらは次のように分類できます。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="systemitem">root</code>
	  とスタッフのアカウントの安全性を高める。</p></li><li class="listitem"><p><code class="systemitem">root</code> の安全性を高める 〓
	  <code class="systemitem">root</code> 権限で動作するサーバと
	  suid/sgid バイナリ。</p></li><li class="listitem"><p>ユーザアカウントの安全性を高める。</p></li><li class="listitem"><p>パスワードファイルの安全性を高める。</p></li><li class="listitem"><p>カーネルのコア、raw デバイス、ファイルシステムの安全性を
	高める。</p></li><li class="listitem"><p>システムに対して行なわれた、不適切な変更をすばやく検出す
	る。</p></li><li class="listitem"><p>必要と思われる以上の対応をとる (paranoia)。</p></li></ol></div><p>本章の次の節では、上記の各項目についてより深く掘り下げていき
      ます。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="securing-freebsd"></a>15.3. FreeBSDの安全性を高める</h2></div></div></div><div xmlns="" class="note"><h3 class="admontitle">コマンド対プロトコル: </h3><p xmlns="http://www.w3.org/1999/xhtml">この文書を通して、コマンドまたはアプリケーションを指すのには
	<span class="application">太字</span> を使います。
	たとえばプロトコルであると同時にコマンドでもある
	ssh などに対して使います。</p></div><a id="idp87601360" class="indexterm"></a><p>以下の節では、本章の<a class="link" href="#security-intro" title="15.2. はじめに">前節
      </a>でとりあげた FreeBSD システムの安全性を高める方法について
      述べます。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="securing-root-and-staff"></a>15.3.1. <code class="systemitem">root</code>
	アカウントとスタッフアカウントの安全性を高める</h3></div></div></div><a id="idp87612880" class="indexterm"></a><p><code class="systemitem">root</code>
	のアカウントの安全性を確保しないうちから
	スタッフのアカウントの安全性をうんぬんしてもしかたがありません。
	ほとんどのシステムでは、<code class="systemitem">root</code>
	アカウントに割り当てたパスワードが 1 つあり
	ます。まず最初にすべきことは、このパスワードは<span class="emphasis"><em>いつで
	も</em></span>不正利用の危険に晒されていると仮定することです。これは
	<code class="systemitem">root</code>
	のパスワードを消すべきだと言っているのではありません。
	<code class="systemitem">root</code>
	のパスワードは、マシンにコンソールからアクセスするのには、
	ほとんどいつでも必要なものです。ここで言いたいのは、コンソール
	以外からは、そして可能なら <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> コマンドを実行する場合も
	<code class="systemitem">root</code>
	のパスワードを使えないようにするべきである、ということで
	す。たとえば、あなたが使っている pty が、
	<code class="filename">/etc/ttys</code> ファイルで insecure と指定
	されているか確認してください。そうすると、
	<code class="command">telnet</code> や <code class="command">rlogin</code> 経由では
	<code class="systemitem">root</code> で直接ログインできないようになります。
	これは、<code class="filename">/etc/ssh/sshd_config</code> を編集して
	<code class="literal">PermitRootLogin</code> に <code class="literal">NO</code>
	が設定されるようにすることで実現できます。
	<span class="application">sshd</span> のような、別のログインサービス
	を使っている場合でも同様に、直接 <code class="systemitem">root</code>
	へログインすることを許し
	ていないかどうか確認してください。すべてのアクセス手段 〓
	たとえば FTP
	のようなサービスが、良くクラックの対象となることを考えましょう。
	<code class="systemitem">root</code> への直接ログインは、
	システムコンソール経由でのみ可能であるべきなのです。</p><a id="idp87630288" class="indexterm"></a><p>また当然、システム管理者として自分が <code class="systemitem">root</code>
	になれるようにしておく必要が
	ありますから、そのための穴をいくつか開けておきます。し
	かし、それらの穴を動作させるには、さらに追加のパスワード認証が
	必要であるようにしておくことが重要です。
	<code class="systemitem">root</code> でアクセス可能と
	する方法の一つとして、適切なスタッフアカウントを
	(<code class="filename">/etc/group</code> 中の)
	<code class="systemitem">wheel</code> グループに加えることがあります。
	<code class="systemitem">wheel</code> グループに入っているスタッフメンバは
	<code class="command">su</code> を使って
	<code class="systemitem">root</code> になることが許されます。
	パスワードエントリにおいて、スタッフメンバを
	<code class="systemitem">wheel</code> グループに置くことによって直接
	<code class="systemitem">wheel</code>
	権限を与えてはいけません。スタッフメンバのアカウントは
	<code class="systemitem">staff</code> グループに所属させるべきで、その上で
	<code class="filename">/etc/group</code> ファイルを通して
	<code class="systemitem">wheel</code> グループに加えるべきです。実際に
	<code class="systemitem">root</code> アクセスの必要なスタッフメンバのみ
	<code class="systemitem">wheel</code> グループに置くようにすべきです。
	他の認証方法の場合、たとえば Kerberos を使用する場合には、
	<code class="systemitem">root</code> アカウントの
	Kerberos <code class="filename">.k5login</code> ファイルを使えば、誰も
	<code class="systemitem">wheel</code> グループに置く必要なく
	<code class="systemitem">root</code> に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ksu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ksu</span>(1)</span></a>
	することを許可できます。このやり
	方はよりよい解決策なのかもしれません。なぜなら、
	<code class="literal">wheel</code> のメカニズムでは、侵入者がパスワード
	ファイルを手に入れ、スタッフアカウントのいずれか 1 つを破るこ
	とができると、
	<code class="systemitem">root</code> を破ることがまだできてしまうからです。
	<code class="systemitem">wheel</code> のメカニズムを用いる方が、
	何もしないよりは良いのですが、
	必ずしも最も安全な選択肢とは限りません。</p><p>スタッフのアカウント、また究極には
	<code class="systemitem">root</code> アカウントの安全性
	を高める間接的な方法は、別のログインアクセスの方法を用いてスタッ
	フのアカウントの安全性を高め、その上でそのスタッフのアカウント
	の暗号化パスワードを <span class="quote">「<span class="quote">アスタリスク化</span>」</span>
	するものです。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a> コマンドを使えば、暗号化されたパスワードを
	<span class="quote">「<span class="quote"><code class="literal">*</code></span>」</span> 1 文字に置き換えられます。
	このコマンドは、<code class="filename">/etc/master.passwd</code>
	ファイルとユーザ/パスワードデータベースを更新して、
	パスワード認証によるログインができないようにします。</p><p>たとえば、次のスタッフアカウントを、</p><pre class="programlisting">foobar:R9DT/Fa1/LV9U:1000:1000::0:0:Foo Bar:/home/foobar:/usr/local/bin/tcsh</pre><p>こう変更します。</p><pre class="programlisting">foobar:*:1000:1000::0:0:Foo Bar:/home/foobar:/usr/local/bin/tcsh</pre><p>暗号化されたパスワードは
	<span class="quote">「<span class="quote"><code class="literal">*</code></span>」</span> と一致することがないので、
	この変更によって通常のログインはできなくなります。
	こうした後は、スタッフメンバは認証のために <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kerberos&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kerberos</span>(1)</span></a> や
	公開鍵 / 秘密鍵の組を用いる <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> のような代わりとなる認
	証手段を利用しなければなりません。
	Kerberos のようなログイン機構を使う場合は、一般に Kerberos
	サーバを実行するマシンと自分のデスクトップワークステーションの安全性を確保しなければなりません。
	また ssh で公開鍵 / 秘密鍵の組を使う場合、
	一般に、<span class="emphasis"><em>ログイン元</em></span>マシン (通常は自分のワー
	クステーション) の安全性を確保しなければなりません。ここで、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a> で公開鍵 / 秘密鍵の組を生成する際、鍵の組
	をパスワードで防御することにより、鍵の組への防御層を追加するこ
	ともできます。スタッフアカウントのパスワードを
	<span class="quote">「<span class="quote">アスタリスク</span>」</span> でつぶすことができると、
	管理者自身が設定
	した安全性の高い方法でしかスタッフメンバがログインできないこと
	も保証できます。こうして、多くの侵入者が使う重大なセキュリティ
	の穴である、
	安全性の低い無関係なマシンからネットワークを覗き見る方法を塞ぐようなセッションを提供する、
	安全性の高い暗号
	化されたコネクションを使うことを、スタッフメンバ全員に強制する
	ことができるのです。</p><p>より間接的なセキュリティの仕組みでは、制限の強いサーバから
	制限の弱いサーバへログインすることを前提としています。たとえば、
	メインマシンで、様々な種類のサーバを実行させている場合、ワーク
	ステーションではそれらのサーバを実行させてはなりません。ワーク
	ステーションを十分に安全にしておくためには、実行するサーバの数
	を、一つもサーバが実行されていないというくらいにまでできる限り
	減らすべきです。また、パスワードで保護されたスクリーンセーバを
	走らせておくべきです。ワークステーションへの物理的アクセスが与
	えられたとすると、もちろん言うまでもなく、攻撃者は管理者が設定
	したいかなる種類のセキュリティをもうち破ることができるのです。
	このことは、管理者として必ず考えておかねばならない問題ですが、
	システム破りの大多数は、ネットワーク経由でリモートから、ワーク
	ステーションやサーバへの物理的アクセス手段を持たない人々によっ
	て行われるという事実もまた、念頭に置いておく必要があります。
	</p><a id="idp87656272" class="indexterm"></a><p>Kerberos のような方法を使うことで、
	スタッフアカウントのパ
	スワードの変更もしくは停止を一箇所で行なうことと、スタッフメン
	バがアカウントを持つすべてのマシンに即時にその効果を及ぼすこと
	が可能となります。スタッフメンバのアカウントが危険に晒されたと
	きに、すべてのマシンでスタッフメンバのパスワードを即座に変更す
	る能力を過小評価してはいけません。パスワードが分散されている状
	況では、N 台のマシンでパスワードを変更すると、てんやわんやの事
	態を招く可能性があります。Kerberos を使用すると、パスワードの
	再発行に制限 (re-passwording restriction) を課することもできま
	す。この機能を使うことにより、ある Kerberos チケットをしばらく
	経つとタイムアウトにすることができるだけでなく、一定期間 ( 例
	えば、1 ヶ月に 1 回) 経つと、ユーザに新しいパスワードを選ぶよ
	うに要求することもできます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87657296"></a>15.3.2. root 権限で実行されているサーバと SUID/SGID バイナリの安全性を高める</h3></div></div></div><a id="idp87657936" class="indexterm"></a><a id="idp87658832" class="indexterm"></a><a id="idp87659728" class="indexterm"></a><a id="idp87660624" class="indexterm"></a><a id="idp87661392" class="indexterm"></a><a id="idp87662288" class="indexterm"></a><a id="idp87663312" class="indexterm"></a><a id="idp87664208" class="indexterm"></a><p>用心深いシステム管理者は、自分に必要なサーバプロセスだけを
	過不足なく実行させるものです。サードパーティ製のサーバは、よくバグを持っ
	ていがちだということに注意して下さい。たとえば、古いバージョンの
	<span class="application">imapd</span> や
	<span class="application">popper</span>
	を実行させておくのは、全世界に万能の <code class="systemitem">root</code>
	の切符を与えているようなものです。自分で注意深くチェックしていない
	サーバは、決して実行してはいけません。<code class="systemitem">root</code>
	で実行させる必要のあるサーバはほとんどありません。たとえば、
	<span class="application">ntalk</span>,
	<span class="application">comsat</span>,
	<span class="application">finger</span> デーモンを、専用ユーザの
	<em class="firstterm">砂場 (sandbox)</em> で実行させることができます。
	管理者が膨大な数の問題を経験していないのなら、
	この「砂場」は完
	璧ではありませんが、セキュリティに関するタマネギ的アプローチは
	ここでも成り立ちます。砂場で実行されているサーバプロセスを経由
	して侵入を果たすことができたとしても、攻撃者はさらに砂場から外
	に脱出しなければなりません。攻撃者が通過せねばならない層の数が
	増えれば増えるほど、それだけ攻撃者が侵入に成功する確率が減りま
	す。Root の抜け穴は歴史的に、基本システムサーバも含め、
	<code class="systemitem">root</code>
	権限で実行されるほとんどすべてのサーバプロセスで発見されています。
	ユーザが <span class="application">sshd</span> 経由でのみログインし、
	<span class="application">telnetd</span>,
	<span class="application">rshd</span>,
	<span class="application">rlogind</span> 経由でログインすることが決
	してないマシンを稼働させているのであれば、それらのサービスを停
	止させて下さい!</p><p>FreeBSD では、今では <span class="application">ntalkd</span>,
	<span class="application">comsat</span>,
	<span class="application">finger</span> は砂場で実行させることがデフォ
	ルトになっています。次に砂場で実行させるべきプログラムの候補と
	して、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> があります。
	<code class="filename">/etc/defaults/rc.conf</code> ファイルには、
	<span class="application">named</span> を砂場で実行するために必要な
	引数がコメントアウトされた形式で含まれています。新しいシステム
	をインストールしているか、それとも既存のシステムをアップグレー
	ドして使っているかに依存しますが、砂場として使用する特別のユー
	ザアカウントがインストールされていないかもしれません。用心深い
	システム管理者であれば、できるだけいつでも研究を怠らず、サーバ
	に砂場を仕込むものでしょう。</p><a id="idp87678288" class="indexterm"></a><p>通常、砂場で実行しないサーバが他にいくつかあります。
	<span class="application">sendmail</span>,
	<span class="application">popper</span>,
	<span class="application">imapd</span>,
	<span class="application">ftpd</span> などです。これらのうちいくつか
	のサーバには代わりとなるものがありますが、代わりのものをインス
	トールするには、あなたが思うより多くの仕事が必要になるかもしれ
	ません (便利さという要素がまたも勝利を収めるわけです)。これら
	のサーバは、<code class="systemitem">root</code>
	権限で実行しなければばならないかもしれません。また、
	これらのサーバ経由で生じる侵入を検出するためには、他の仕組みに
	頼らなくてはならないかもしれません。</p><p>システムの <code class="systemitem">root</code>
	権限の潜在的な穴で他に大きなものには、シ
	ステムにインストールされた suid-root/sgid バイナリがあります。
	これらのバイナリは、<span class="application">rlogin</span> のように、
	<code class="filename">/bin</code>, <code class="filename">/sbin</code>,
	<code class="filename">/usr/bin</code>, <code class="filename">/usr/sbin</code>
	に存在するものがほとんどです。100% 安全なものは存在しないとは
	いえ、システムデフォルトの siud/sgid バイナリは比較的安全とい
	えます。それでもなお、<code class="systemitem">root</code>
	セキュリティホールがこれらのバイナリにときおり発見されています。
	1998 年に <span class="application">xterm</span>
	(普通、suid 設定されています) を脆弱にしていた
	<code class="literal">Xlib</code> の <code class="systemitem">root</code>
	セキュリティホールが見つかりました。
	安全である方がよいので、
	用心深いシステム管理者は残念に思いながらも、スタッフのみが実行
	する必要がある suid バイナリは、スタッフのみがアクセス可能な特
	別なグループに含めるように制限を加え、誰も使わない suid バイナ
	リは (<code class="command">chmod 000</code> を実行して) 片付けてしまう
	でしょう。ディスプレイを持たないサーバは、一般的に
	<span class="application">xterm</span> のバイナリを必要としません。
	sgid バイナリもほとんど同様の危険な存在になり得ます。侵入者が
	kmem に sgid されたバイナリを破ることができた場合、その侵入者
	は <code class="filename">/dev/kmem</code> を読み出すことができるように
	なるでしょう。つまり、暗号化されたパスワードファイルを読み出す
	ことができるようになるので、パスワードを持つどのアカウントをも、
	潜在的な危険に晒すことになります。他にも、
	<code class="literal">kmem</code> グループを破った侵入者が pty を通して
	送られたキーストロークを監視できるという危険があります。キース
	トロークには、安全な方法でログインするユーザが使っている pty
	も含まれます。
	<code class="systemitem">tty</code> グループを破った侵入者は、ほぼ任意のユーザの
	tty へ書き込みができます。ユーザが端末プログラムやキーボードを
	シミュレーションする機能を持ったエミュレータを使っている場合、
	侵入者は潜在的に、結局そのユーザとして実行されるコマンドをユー
	ザの端末にエコーさせるデータストリームを生成できる可能性があり
	ます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="secure-users"></a>15.3.3. ユーザアカウントの安全性を高める</h3></div></div></div><p>ユーザアカウントは、普通、安全性を高めることが最も困難です。
	スタッフに対しては、とても厳格なアクセス制限を強制しパスワードを
	<span class="quote">「<span class="quote">アスタリスク</span>」</span> で外すことができるでしょうが、
	管理者が
	持ちうる一般ユーザすべてのアカウントに対して同じことはできない
	かもしれません。管理者が十分に統率をとることができるなら、管理
	者は勝利し、ユーザのアカウントの安全を適切に確保できるかもしれ
	ません。それができないならば、よりいっそう気を配って一般ユーザ
	のアカウントを監視するよりほかありません。
	一般ユーザアカウントに対し ssh や Kerberos を利用することには、
	システム管理がさらに増えたりテクニカルサポートが必要に
	なるなどの問題があります。それでも、暗号化パスワードファイルと
	比較するとはるかに良い解です。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87690192"></a>15.3.4. パスワードファイルの安全性を高める</h3></div></div></div><p>できるだけ多くのパスワードを <code class="literal">*</code> で外し、
	それらのアカウントのアクセスには
	ssh や Kerberos を使うようにすることが、唯一の確実な方法です。
	暗号化パスワードファイル
	(<code class="filename">/etc/spwd.db</code>) は <code class="systemitem">root</code>
	でのみ読み出し可能だけれども、
	たとえ、侵入者が root の書き込み権限は得られなくとも、
	読み出しアクセス権限を得ることは可能かもしれません。</p><p>セキュリティスクリプトで常にパスワードファイルの変更をチェッ
	クし、報告するようにすべきです (<a class="link" href="#security-integrity" title="15.3.6. ファイルの完全性のチェック: バイナリ、設定ファイルなど">ファイルの完全性のチェック</a>
	節参照)。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87697744"></a>15.3.5. カーネルのコア、raw デバイス、ファイルシステムの安全性を
      高める</h3></div></div></div><p><code class="systemitem">root</code>
	の権限を破ると、攻撃者はほとんど何でもできますが、特に重宝さ
	れる特定の事柄もいくつかあります。たとえば、最近のカーネルは、組
	み込みのパケット覗き見デバイス (packet sniffing device) ドライ
	バを備えているものがほとんどです。FreeBSD では
	<code class="filename">bpf</code> デバイスと呼ばれています。侵入者
	は普通、侵入済みのマシンでパケット覗き見プログラムを実行させよ
	うと試みます。侵入者にわざわざそういう機能を提供する必要はない
	ので、ほとんどのシステムで <code class="filename">bpf</code>
	デバイスを組み込むべきではありません。</p><a id="idp87700048" class="indexterm"></a><p><code class="filename">bpf</code> デバイスを外しても、
	<code class="filename">/dev/mem</code> と
	<code class="filename">/dev/kmem</code>
	という悩みの種がまだ残っています。この問題に関しては、侵入者は
	raw ディスクデバイスに書き込
	むこともできます。ほかにも、モジュールローダ、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a> とい
	う、別のカーネル機能があります。やる気まんまんの侵入者は、KLD
	モジュールを使って自分独自の <code class="filename">bpf</code>
	もしくはその他覗き見デバイス
	を動作中のカーネルにインストールできます。この問題を
	避けるため、システム管理者はカーネルをより高い安全レベル (
	securelevel)、少なくとも安全レベル 1 で実行させる必要がありま
	す。安全レベルは <code class="command">sysctl</code> を使って
	<code class="varname">kern.securelevel</code>
	変数を操作して設定できます。ひとたび安全レベルに 1 を設定すると、raw デバ
	イスに対する書き込みアクセスは拒否され、たとえば
	<code class="literal">schg</code> のような特別な
	<code class="command">chflags</code> フラグの機能が
	強制されます。システム起動に関わる重要なバイナリやディレクトリ、
	スクリプトファイルなど、安全レベルが設定されるまでの間に実行さ
	れるすべてのものに対しても、確実に <code class="literal">schg</code>
	フラグを設定してください。この設定をやり過ぎても
	構いませんが、より高い安全レベルで動作している場合、システムの
	アップグレードがはるかに困難になります。システムをより高い安全
	レベルで実行させるようにするが、すべてのシステムファイルとディ
	レクトリに <code class="literal">schg</code>
	フラグを設定しないというところで妥協するという手もあります。
	もう一つの可能性としては、単純に
	<code class="filename">/</code> および <code class="filename">/usr</code> を読み
	込み専用でマウントすることです。ここで特筆すべきことは、システ
	ムを守ろうとして厳しくしすぎると、侵入を検出するという非常に重
	要なことができなくなってしまうということです。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security-integrity"></a>15.3.6. ファイルの完全性のチェック: バイナリ、設定ファイルなど
      </h3></div></div></div><p>ことこの問題に至ると、システム管理者にできることは、便利さ
	という要素がその醜い頭を上げない程度に、コアシステムの設定と制
	御ファイルを防御することだけです。たとえば、
	<code class="filename">/</code> および <code class="filename">/usr</code> にある
	大部分のファイルに <code class="literal">schg</code> ビットを設定するた
	めに <code class="command">chflags</code> を使用するのは、おそらく逆効果
	でしょう。なぜなら、そうすることでファイルは保護できますが、侵
	入を検出する窓を閉ざしてしまうことにもなるからです。セキュリティ
	のタマネギの最後の層はおそらく最も重要なもの 〓 検出で
	す。セキュリティの残りのものは、突然の侵入を検出できなければ、
	まったく有用ではありません (あるいは、もっと悪ければ、安全性に
	対する間違った感覚を植え付けてしまいます)。タマネギの仕事の半
	分は、もう半分の検出側が攻撃者を攻撃の最中に捕えるようにするた
	めに、攻撃者を食い止めるのではなく侵入を遅らせることなのです。
	</p><p>侵入を検出する最も良い方法は、変更されていたり、消えていた
	り、入れた覚えがないのに入っているファイルを探すことです。変更
	されたファイルを探すのに最も良い方法は、もう一つの (しばしば中
	央に集められた)、アクセスが制限されたシステムから行なうもので
	す。さらに安全でアクセス制限されたシステム上でセキュリティ用ス
	クリプトを書けば、
	スクリプトは潜在的な攻撃者からはほぼ見えなくなります。
	これは重要なことです。この有効性を最大限に活用
	するためには、一般的に、アクセスの制限されたマシンから実際に使っている他のマシンへのかなりのアクセスを許可する必要があります。普
	通は、他のマシンからアクセス制限されたマシンへ読み込み専用の
	NFS エクスポートをしたり、アクセス制限されたマシンから他のマシンへ
	ssh 接続を行なうために、
	ssh 鍵のペアを作ったりすることで行います。
	ネットワークのトラフィックを別にして、NFS は最も可視性
	のない方法です 〓 各クライアント上のファイルシステムを、
	事実上検出されずに監視できるようになります。アクセス制限された
	サーバがスイッチを通してクライアントに接続されている場合、たい
	てい NFS がより良い選択肢です。アクセス制限されたサーバがハブ
	や、いくつかのルーティング層を通してクライアントに接続している場合、
	NFS は (ネットワークの面で) あまりにも危険なので、
	ssh の方が認証を行った跡は残りますが、良い方法でしょう。</p><p>アクセス制限されたマシンに、監視しようとするクライアントシ
	ステムへの少なくとも読み込みのアクセス権を与えたら、次に実際に
	監視するためのスクリプトを書かなくてはいけません。NFS マウント
	をすれば、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=find&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">find</span>(1)</span></a> や <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md5&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">md5</span>(1)</span></a> などの単純なシステムユー
	ティリティでスクリプトを書くことができます。少なくとも 1 日 1
	回、クライアントのファイルを直接 md5 にかけ、さらにもっと頻繁
	に <code class="filename">/etc</code> および
	<code class="filename">/usr/local/etc</code> にあるようなコントロール用
	ファイルを試験するのが一番です。アクセス制限されたマシンが正し
	いと知っている、基となる md5 情報と比べて違いが見つかった場合、
	システム管理者に調べて欲しいと悲鳴を上げるようにすべきです。優
	れたセキュリティ用スクリプトは、<code class="filename">/</code> および
	<code class="filename">/usr</code> などのシステムパーティション上で不適
	当に suid されたバイナリや、新たに作成されたファイルや削除され
	たファイルがないかどうかを調べるでしょう。</p><p>NFS ではなく、ssh を使用する場合は、
	セキュリティ用スクリプトを書くのはずっと難しいことで
	す。スクリプトを動かすためには、クライアントに対してスクリプト
	を <code class="command">scp</code> しなくてはいけませんし、それは目に見
	えてしまいます。そして、安全のためには、スクリプトが使うバイナ
	リ (find など) を <code class="command">scp</code> する必要もあります。
	クライアントマシンの <span class="application">ssh</span>
	クライアントはすでに攻撃されてしまっているかもしれません。
	結局のところ、安全でないリンク上の場合は
	ssh は必要かもしれませんが、ssh
	を扱うのはとても大変なことです。</p><p>優れたセキュリティ用スクリプトは、ユーザやスタッフメンバの
	アクセス設定ファイルの変更もチェックするものです。
	<code class="filename">.rhosts</code>, <code class="filename">.shosts</code>,
	<code class="filename">.ssh/authorized_keys</code> など …
	<code class="literal">MD5</code> チェックの範囲外になってしまうであろう
	ファイル群です。</p><p>ユーザ用のディスク容量が非常に大きい場合は、パーティション
	上の各ファイルを見て回るのに大変な時間がかかるかもしれません。
	この場合は、マウントフラグを設定して、このパーティションに
	suid されたバイナリやデバイスを置けないようにするのが良い考え
	です。<code class="literal">nodev</code> および <code class="literal">nosuid</code>
	オプション (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> 参照) が知るべきものでしょう。
	とにかく少なくとも週に 1 度はファイルシステムをスキャンするべきです。
	なぜなら、この層の目的は、侵入が成功したかどうかに関わらず、侵
	入があったことの検出をすることだからです。</p><p>プロセスアカウンティング (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=accton&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">accton</span>(8)</span></a> 参照) は、
	マシンへの侵入を検出するためのメカニズムとして推奨できる、
	比較的オーバヘッドの少ないオペレーティングシステムの機能です。
	侵入を受けた後でも当該ファイルが無傷である場合に、侵入者が
	実際にどのようにしてシステムに侵入したかを追跡するのに特に役立ちます。</p><p>最後に、セキュリティスクリプトはログファイルを処理するよう
	にし、ログファイル自体もできるだけ安全性の高い方法で生成するよ
	うにすべきです 〓 リモート syslog は極めて有益になり得ま
	す。侵入者は自分の侵入の痕跡を覆い隠そうとしますし、また、ログ
	ファイルはシステム管理者が最初の侵入の時刻と方法を追跡してゆく
	ために極めて重要です。ログファイルを永久に残しておくための 1
	つの方法は、システムコンソールをシリアルポートにつないで走らせ、
	コンソールを監視している安全なマシンを通して絶えず情報を集める
	ことです。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87728848"></a>15.3.7. 偏執狂的方法</h3></div></div></div><p>多少偏執狂的になっても決して悪いことにはなりません。原則的
	に、システム管理者は、便利さに影響を与えない範囲でいくつでもセ
	キュリティ機能を追加することができます。
	また、いくらか考慮した結果、
	便利さに<span class="emphasis"><em>影響を与える</em></span>セキュリティ機能を追加することもできます。
	より重要なことは、
	セキュリティ管理者はこれを多少混ぜこぜにして使うべきだということです。
	〓 もしあなたが、本文書に書かれている勧告をそのまま使用した場合は、
	予想される攻撃者はやはり本文書を読んでいるわけですから、
	あなたの防御策を教えてしまうことになります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87730384"></a>15.3.8. サービス妨害攻撃</h3></div></div></div><a id="idp87731024" class="indexterm"></a><p>このセクションではサービス妨害攻撃 (DoS 攻撃) を扱います。
	サービス妨害攻撃は、普通は、パケット攻撃です。ネットワークを飽
	和させる最先端の偽造パケット (spoofed packet) 攻撃に対してシス
	テム管理者が打てる手はそれほど多くありませんが、一般的に、その
	種の攻撃によってサーバがダウンしないことを確実にすることで、被
	害をある限度に食い止めることはできます。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>サーバの fork の制限。</p></li><li class="listitem"><p>踏み台攻撃の制限 (ICMP 応答攻撃、ping broadcast など)。
	  </p></li><li class="listitem"><p>カーネルの経路情報のキャッシュ。</p></li></ol></div><p>よくあるサービス妨害攻撃は、fork するサーバプロセスに対す
	るものです。これは、サーバにプロセス、ファイル記述子、メモリを
	マシンが死ぬまで食い尽くさせようとするものです。
	<span class="application">inetd</span>
	(<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> 参照) には、この種の攻撃を制限するオプションが
	いくつかあります。マシンがダウンすることを防止することは可能で
	すが、この種の攻撃によりサービスが中断することを防止することは
	一般的に言ってできないことに注意する必要があります。
	<span class="application">inetd</span>
	のマニュアルページを注意深く読んで下さい。特に、
	<code class="option">-c</code>, <code class="option">-C</code>, <code class="option">-R</code>
	オプションに注意して下さい。IP 偽造攻撃 (spoofed-IP attack) は
	<span class="application">inetd</span> の
	<code class="option">-C</code> オプションの裏をかけるので、
	一般にオプションを組み合わせて使用するべきであることに注意して下さ
	い。スタンドアロンサーバの中には、自分自身で fork を制限するパ
	ラメータを持っているものがあります。</p><p><span class="application">Sendmail</span> には、
	<code class="option">-OMaxDaemonChildren</code> オプションがあります。シ
	ステム負荷の値変化には遅れがあるので、sendmail の負荷限界指定
	オプションを使うよりも、このオプションを使う方がまともに動作す
	る可能性ははるかに高いです。
	<span class="application">sendmail</span> の実行を開始する際に、
	<code class="literal">MaxDaemonChildren</code> パラメータを設定するべき
	です。その値は、通常見込まれる負荷を扱える程度に十分高いが、そ
	れだけの数の <span class="application">sendmail</span> を操作しよう
	とするとマシンが卒倒してしまうほどには高くないような値に設定す
	るべきです。sendmail をキュー処理モード
	(<code class="option">-ODeliveryMode=queued</code>) で実行することや、
	sendmail デーモン (<code class="command">sendmail -bd</code>) をキュー処
	理用プロセス (<code class="command">sendmail -q15m</code>) と別に実行す
	ることも、用心深いことと言えます。それでもなおリアルタイムでの
	配送を望むのであれば、<code class="option">-q1m</code> のようにすることで、
	キュー処理をはるかに短い時間間隔で行うことができます。いずれに
	しても、<code class="literal">MaxDaemonChildren</code> オプションに合理
	的な値を確実に指定して、sendmail がなだれをうって失敗すること
	がないようにして下さい。</p><p><span class="application">syslogd</span> は直接攻撃される可能性
	があるので、可能ならばいつでも <code class="option">-s</code> オプション
	を用いることを強く推奨します。これができないなら、
	<code class="option">-a</code> オプションを使って下さい。</p><p><span class="application">tcpwrapper</span> の逆 identd などの接
	続返し (connect-back) を行うサービスについては十分注意を払うよ
	うにするべきです。これらは直接攻撃を受ける可能性があります。こ
	ういう事情があるので、<span class="application">tcpwrapper</span> の
	逆 ident 機能を使おうとは思わないのが一般的です。</p><p>境界ルータのところでファイアウォールを設けて、外部からのア
	クセスに対して内部サービスを防御するという考えは実によいもので
	す。この考えは、LAN の外部からの飽和攻撃を防ぐことにあり、内部
	サービスをネットワークベースの <code class="systemitem">root</code>
	権限への攻撃から防御するこ
	とにはあまり考慮を払っていません。ファイアウォールは常に排他的
	に設定して下さい。つまり、<span class="quote">「<span class="quote">ポート A, B, C, D と M から Z
	まで<span class="emphasis"><em>以外</em></span> のすべてにファイアウォールを設ける</span>」</span>
	というふうにです。このようにすることで、
	<span class="application">named</span> (ゾーンのプライマリである場合)、
	<span class="application">ntalkd</span>,
	<span class="application">sendmail</span> などのインターネットからア
	クセスできるサービスとして特に指定するもの以外の、小さい番号の
	ポートすべてをファイアウォールで防御することができます。ファイ
	アウォールをこの他のやり方 〓 つまり包含的もしくは受容的
	なファイアウォールとして設定しようとする場合、
	<span class="quote">「<span class="quote">close</span>」</span> することを忘れてしまうサービスがいくつか
	出てきたり、新しい内部サービスを追加したのにファイアウォールの
	更新を忘れたりする可能性がよく出てきます。ファイアウォール上の
	大きい番号のポートを開けておくことにより、小さい番号のポートを
	危険に晒すことなく受容的な動作を許すことができます。FreeBSD で
	は、<code class="varname">net.inet.ip.portrange</code> への
	<code class="command">sysctl</code> (<code class="command">sysctl -a | fgrep
	portrange</code>) をいろいろ使用することで、動的バインドに使用される
	ポート番号の範囲を制御できることを記憶にとどめておいてください。
	これによりファイアウォールの設定を簡略化することもできます。
	たとえば、通常の first/last 範囲として 4000 から 5000 を、
	高位ポートの範囲として、49152 から 65535 を指定し、
	(いくつかのインターネットアクセス可能
	なポートをブロックから除外するのはもちろんですが) 4000
	より下のすべてのポートをブロックするという設定が考えられます。</p><a id="idp87790544" class="indexterm"></a><p>また別のよくあるサービス妨害攻撃として、踏み台攻撃
	(springboard attack) と呼ばれるものがあります 〓 これは、
	あるサーバを攻撃し、そこ結果として生成される応答が自分自身、ロー
	カルネットワーク、そして他のマシンを過負荷に追い込むようにする
	攻撃です。この種の攻撃の中で最もありふれたものに、
	<span class="emphasis"><em>ICMP ping broadcast 攻撃</em></span>があります。攻撃
	者は、実際に攻撃したいマシンのアドレスを送信元アドレスに設定し
	た ping パケットを偽造して、対象の LAN のブロードキャストアド
	レスに向けてパケットを送信します。境界にあるルータがブロードキャ
	ストアドレスに対する ping パケットを握り潰すように設定されてい
	ない場合、LAN は、詐称された送信元アドレスに向けて応答パケット
	を生成するはめになり、犠牲となるマシンが飽和するところまで行っ
	てしまいます。攻撃者が同じトリックを異なるネットワーク上のいく
	つものブロードキャストアドレスに対して同時に使用した場合、とく
	にひどいことになります。これまでに、120 メガビット以上のブロー
	ドキャスト攻撃が観測されています。2 番目の踏み台攻撃は、ICMP
	エラー報告の仕掛けを狙うものです。攻撃者は ICMP エラー応答を生
	成するパケットを生成し、サーバの受信ネットワークを飽和させ、そ
	の結果としてサーバが送信ネットワークを ICMP 応答で飽和させてし
	まうようにすることができます。mbuf を消費し尽くさせることによ
	り、この種の攻撃でサーバをクラッシュさせることも可能です。サー
	バが生成した ICMP 応答を十分速く送信できない場合、とくにひどい
	ことになります。FreeBSD カーネルには、この種の攻撃の効果を抑制する
	<code class="option">ICMP_BANDLIM</code>
	と呼ばれる新しいカーネルコンパイルオプション
	があります。踏み台攻撃の 3 つめの主要なクラスに属する攻撃は、
	udp echo サービスのような、特定の
	<span class="application">inetd</span> 内部サービスに関連する
	ものです。攻撃者は、単に送信元アドレスがサーバ A の echo ポー
	トであり、送信先アドレスがサーバ B の echo ポートであるように
	UDP パケットを偽造します。ここでサーバ A, B はともにあなたの
	LAN に接続されています。この 2 つのサーバは、この一つのパケッ
	トを両者の間で互いに相手に対して打ち返しあいます。このようにし
	てパケットをほんのいくつか注入するだけで、攻撃者は両方のサーバ
	と LAN を過負荷状態にすることができます。同様の問題が内部
	<span class="application">chargen</span> ポートにも存在します。
	有能なシステム管理者はこの手の
	inetd 内部テストサービスのすべてを無効にしておくものです。
	</p><p>偽造パケット攻撃は、カーネルの経路情報キャッシュに過負荷を
	生じさせるために用いられることもあります。
	<code class="varname">net.inet.ip.rtexpire</code>,
	<code class="varname">rtminexpire</code>, <code class="varname">rtmaxcache</code>
	の <code class="command">sysctl</code> パラメータを参照して下さい。でた
	らめな送信元 IP アドレスを用いた偽造パケット攻撃により、カーネ
	ルは、一時的なキャッシュ経路を経路情報テーブルに生成します。こ
	れは <code class="command">netstat -rna | fgrep W3</code> で見ることがで
	きます。これらの経路は、普通は 1600 秒程度でタイムアウトになり
	ます。カーネルがキャッシュ経路テーブルが大きくなり過ぎたことを
	検知すると、カーネルは動的に <code class="varname">rtexpire</code>
	を減らしますが、<code class="varname">rtminexpire</code>
	より小さくなるようには決して減らしません。ここに問題が
	2 つあります。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>負荷の軽いサーバが突然攻撃された場合、カーネルが十分素
	    早く反応できないこと。</p></li><li class="listitem"><p>カーネルが持続的攻撃に耐えられるほど十分
	    <code class="varname">rtminexpire</code> が低く設定されていないこと。</p></li></ol></div><p>自分のサーバが T3 もしくはそれより高速の回線でインターネッ
	トに接続されている場合、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> を用いて
	<code class="varname">rtexpire</code> と <code class="varname">rtminexpire</code>
	とを手動で上書きしておくことが思慮深いことといえます。どちらか
	一方でも 0 には決してしないで下さい (自分のマシンをクラッシュ
	させたくないのであれば)。両パラメータを 2 秒
	に設定すれば、攻撃から経路情報テーブルを守るには十分でしょう。
	</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87800784"></a>15.3.9. Kerberos および SSH を用いたアクセスの問題</h3></div></div></div><a id="idp87801552" class="indexterm"></a><a id="idp87802192" class="indexterm"></a><p>もしあなたが、Kerberos と ssh を使いたいのだとしたら、
	両者に関して言っておかねばならない問題がいくつかあります。
	Kerberos V は大変優れた認証プロトコルですが、Kerberos 化された
	<span class="application">telnet</span> や
	<span class="application">rlogin</span> は、バイナリストリームを扱う
	のに不向きになってしまうようなバグがあります。さらに、デフォル
	トでは、Kerberos は <code class="option">-x</code> オプションを使わない限
	りセッションを暗号化してくれません。
	<span class="application">ssh</span> では、デフォルトですべてを暗号
	化してくれます。</p><p>ssh はあらゆる場面でとても良く働いてくれます。
	ただし、デフォルトで暗号鍵を転送してしまうこと
	を除けばです。これはつまり、暗号鍵を持った安全なワークステーショ
	ンがあって、この暗号鍵で残りのシステムとアクセスできるようになっ
	ている場合に、安全でないマシンへ
	ssh 接続を行なうとあなたの暗号鍵を使えてしまうということです。
	実際の鍵そのものが見えてしまうわけではありませんが、
	ssh はあなたが login
	している間、転送用ポートを作ります。攻撃者が安全でないマシンの
	<code class="systemitem">root</code> を破ったら、このポートを使って暗号鍵を取得し、
	この暗号鍵でロックが外れる他のマシンへのアクセスを得てしまいます。
	</p><p>スタッフのログインには、Kerberos を組み合せた
	ssh を使用することを勧めます。
	<span class="application">ssh</span> は、Kerberos 対応機能と一緒
	にコンパイルできます。こうすると、見えてしまうかもしれない
	ssh 鍵をあまりあてにしないで良いようになります。
	また、それと同時に、Kerberos 経由でパスワードを保護することもできます。
	ssh 鍵は、安全なマシンからの自動化されたタスク
	(Kerberos はこの用途には不向きです) のみに使用するべきです。また、
	ssh の設定で鍵転送をしないようにするか、あるいは ssh が
	<code class="filename">authorized_keys</code> ファイル中に書くことを許
	している <code class="literal">from=IP/DOMAIN</code> オプションを使用し
	て、特定のマシンからログインしてきたときのみ鍵が有効であるよう
	にすることも勧めます。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="crypt"></a>15.4. DES, MD5 と Crypt</h2></div><div><span class="authorgroup">改訂: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Swingle</span> <span class="firstname">Bill</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp87818192" class="indexterm"></a><a id="idp87839952" class="indexterm"></a><a id="idp87840464" class="indexterm"></a><a id="idp87840976" class="indexterm"></a><p><span class="emphasis"><em>訳: 花井 浩之 <code class="email">&lt;<a xmlns="" class="email" href="mailto:hanai@FreeBSD.org">hanai@FreeBSD.org</a>&gt;</code>,
	12 September 1996.</em></span></p><p><span class="emphasis"><em>訳改訂: 日野 浩志 <code class="email">&lt;<a xmlns="" class="email" href="mailto:hino@ccm.cl.nec.co.jp">hino@ccm.cl.nec.co.jp</a>&gt;</code>,
	12 March 2001.</em></span></p><p>Unix システムにおけるすべてのユーザは、そのアカウントに対応し
      た一つのパスワードを持っています。それらのパスワードはユーザ本人
      と本当のオペレーティングシステムのみが知っているべきであるという
      ことは明らかでしょう。それらのパスワードを秘密に保っておくために、
      パスワードは<span class="quote">「<span class="quote">一方向ハッシュ</span>」</span>として知られる方式で暗
      号化されます。一方向ハッシュとは、簡単に暗号化はできるが解読は難
      しいという方法です。言葉を換えると、先ほど明らかであると書いたの
      は実は正しくないのです: オペレーティングシステム自身は<span class="emphasis"><em>
      本当は</em></span>パスワードを知らないのです。その代わりに
      <span class="emphasis"><em>暗号化された</em></span>形でのみパスワードを知っていま
      す。<span class="quote">「<span class="quote">素のテキスト</span>」</span>としてパスワードを得る唯一の方法は、
      可能な限りのパスワード空間を検索するという力任せの方法です。
      </p><p>不幸なことに、Unix が生まれようとしているときにパスワードを
      安全な形で暗号化できる方式は DES (Data Encryption Standard)
      に基づいたものだけでした。このことは米国に住んでいるユーザにとって
      は大して問題ではありませんでしたが、DES のソースコードを米国外に
      輸出することはできないという問題がありました。そのために、
      FreeBSD は、米国の法律を守ることと、未だに DES を使っていた他の
      Unix 一族との互換性を保つこととを両立する方法を探し出す必要がありました。</p><p>その解決方法は、米国のユーザは DES のライブラリをインストー
      ルして DES を使用できるが、米国外のユーザは国外に輸出可能な他の
      ひとつの暗号化方式を使用することができる、というように暗号化ライ
      ブラリを分割することでした。これが FreeBSD がデフォルトの暗号化
      方式として MD5 を使うようになったいきさつです。MD5 は DES よりも
      より安全であると考えられているため、DES をインストールする一番の
      理由は互換性を保つためといえます。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87845968"></a>15.4.1. 暗号化機構を理解する</h3></div></div></div><p>FreeBSD 4.4 の前までは、<code class="filename">libcrypt.a</code>
	は暗号化に使われるライブラリへのシンボリックリンクでした。
	FreeBSD 4.4 で <code class="filename">libcrypt.a</code>
	は設定可能なパスワード認証ハッシュライブラリを提供するようになりました。
	現在のところ、このライブラリは DES, MD5 および Blowfish
	ハッシュ関数に対応しています。デフォルトでは、FreeBSD
	はパスワードの暗号化に MD5 を利用します。</p><p>FreeBSD がどの暗号化方式を使うようにセットアップされている
	かを判断するのは簡単です。
	<code class="filename">/etc/master.passwd</code> ファイルの中の暗号化さ
	れたパスワードを調べてみるのが一つの方法です。MD5 ハッシュで暗
	号化されたパスワードは、DES ハッシュで暗号化されたパスワードよ
	りも長く、<code class="literal">$1$</code>
	という文字で始まるという特徴を持っています。
	<code class="literal">$2$</code>
	で始まるパスワードは、Blowfish ハッシュ関数で暗号化されています。
	DES のパスワードはこ
	れといって識別可能な特徴は持っていませんが、MD5 のパスワードよ
	りは短く、そして <code class="literal">$</code> という文字を含ま
	ない 64 文字のアルファベットを使って表現されているので、比較的
	短い文字列でドル記号で始まっていないものはおそらく DES のパス
	ワードでしょう。</p><p>新規パスワードがどちらのパスワード形式になるかは、
	<code class="filename">/etc/login.conf</code> の中の
	<span class="quote">「<span class="quote">passwd_format</span>」</span> ログインケーパビリティによって制御されます。
	その値としては、<span class="quote">「<span class="quote">des</span>」</span>、
	<span class="quote">「<span class="quote">md5</span>」</span> または <span class="quote">「<span class="quote">blf</span>」</span> を設定することができます。
	ログインケーパビリティに関するより詳細な情報は、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> マニュアルページをご覧ください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="skey"></a>15.5. S/Key</h2></div></div></div><a id="idp87890768" class="indexterm"></a><a id="idp87891280" class="indexterm"></a><p>S/Key は一方向ハッシュ関数を基にしたワンタイムパスワード方式
      です。FreeBSD では、互換性のために MD4 ハッシュを用いていますが
      他のシステムでは MD5 や DES-MAC を用いてます。S/Key は、バージョ
      ン1.1.5 以降のすべての FreeBSD に含まれていますし、FreeBSD 以外
      の数多くのシステムの上でも利用されています。S/Key は Bell
      Communications Research, Inc. の登録商標です。</p><p>FreeBSD バージョン 5.0 以降では、S/Key
      は機能的に同等な OPIE (Onetime Passwords In Everything)
      で置き換えられました。OPIE はデフォルトでは
      MD5 ハッシュを使用します。</p><p>以下の説明では、三種類の異なる「パスワード」が使われます。
      まず一つ目は、あなたが普段使っている普通の
      Unix スタイルの、もしくは Kerberos
      のパスワードです。ここではこれを
      <span class="quote">「<span class="quote">Unix パスワード</span>」</span> と呼ぶことにします。二つ目は、S/Key
      の <code class="command">key</code> プログラム、または
      OPIE の <code class="command">opiekey</code> プログラムによって生成され、
      <code class="command">keyinit</code> または <code class="command">opiepasswd</code>
      プログラムとログインプロンプトが受け付けるパスワードです。
      ここではこれを <span class="quote">「<span class="quote">ワンタイムパスワード</span>」</span>
      と呼ぶことにします。三つ目のパスワードは、
      <code class="command">key</code>/<code class="command">opiekey</code> (と場合により
      <code class="command">keyinit</code>/<code class="command">opiepasswd</code>)
      プログラムに対してユーザが入力する秘密のパスワードで、
      ワンタイムパスワードを生成するのに使われます。ここではこれを
      <span class="quote">「<span class="quote">秘密のパスフレーズ</span>」</span> もしくは単に
      <span class="quote">「<span class="quote">パスフレーズ</span>」</span> と呼ぶことにします。
      (訳注: ユーザが頭の中だけにしまっておくべきものが、
      この秘密のパスフレーズです。なお、原文ではこれを
      <span class="quote">「<span class="quote">password</span>」</span> と表記していますが、
      混乱を避けるために訳文ではすべて
      <span class="quote">「<span class="quote">秘密のパスフレーズ</span>」</span> に統一しています)。</p><p>秘密のパスフレーズは、Unix
      パスワードと何の関連性もありません。
      両者を同一に設定することは可能ですが、お奨めしません。Unix
      パスワードは長さが 8 文字に制限されています (訳注: FreeBSD で
      DES を導入していない場合はもっと長いパスワードも認識されます)。
      これに対し、S/Key や OPIE
      では秘密のパスフレーズを好きなだけ長くすることができます
      (訳注: 実装上、<code class="command">key</code> コマンドなどの
      バッファ長で制限されてしまう可能性があります。200 文字程度に押
      えておいた方がよいでしょう :-)。
      6 語から 7 語からなるパスフレーズがふつうです。ほとんどの部分で、
      S/Key や OPIE システムは Unix
      のパスワードシステムと完全に独立して動作するようになっています。</p><p>パスフレーズに加え、S/Key や OPIE
      システムにとって重要な 2 種類のデータがあります。一つは
      <span class="quote">「<span class="quote">シード (seed: 種)</span>」</span> または
      <span class="quote">「<span class="quote">キー (key: 鍵)</span>」</span> と呼ばれるもので、2 つの文字と
      5 つの数字で構成されます。もう一つは <span class="quote">「<span class="quote">シーケンス番号 (iteration
      count)</span>」</span> で、1 から 100 までの整数です。S/Key はここまで
      に述べたデータを利用してワンタイムパスワードを生成します。その方
      法は、まずシードと秘密のパスフレーズを連結し、それに対してシーケ
      ンス番号の回数だけ MD4/MD5 ハッシュを繰り返し計算します。
      そしてその結果を 6 つの短い英単語に変換します。
      認証システム (一次的には PAM)
      は、前回最後に受け付けたワンタイムパスワードを記録しています。
      そして、その前回
      のワンタイムパスワードと、ユーザが入力したワンタイムパスワードを
      1 回ハッシュ関数にかけた結果とが一致した場合に、このユーザは認証
      されます。一方向ハッシュ関数を使っているので、もし正しく認証され
      たワンタイムパスワードが一回盗聴されたとしても、次回以降に使われ
      る複数のワンタイムパスワードを生成することは不可能です。シーケ
      ンス番号はログインが成功するたびに一つずつ減らされて、ユーザとロ
      グインプログラムの間で同期が取られます。シーケンス番号が 1 まで
      減ったら、S/Key や OPIE を再度初期化する必要があります。</p><p>次に、それぞれのシステムで関連する
      3 つのプログラムについて説明します。
      <code class="command">key</code> と <code class="command">opiekey</code>
      プログラムは、シーケンス番号と、シードと、
      秘密のパスフレーズを受け付けて、ワンタイムパスワード 1 つ、
      または一連のワンタイムパスワードの一覧を生成します。
      <code class="command">keyinit</code> と <code class="command">opiepasswd</code>
      プログラムは、それぞれ S/Key と OPIE
      を初期化するのに使用され、また秘密のパスフレーズ、
      シーケンス番号やシードを変更するためにも使用されます。
      それぞれのプログラムを実行するには、秘密のパスフレーズか、
      または、シーケンス番号とシードとワンタイムパスワードの
      1 組かの、どちらかを与えます。
      <code class="command">keyinfo</code> と <code class="command">opieinfo</code> プログラムは、
      それぞれに対応する認証ファイル (<code class="filename">/etc/skeykeys</code>
      または <code class="filename">/etc/opiekeys</code>)
      を調べて、プログラムを起動したユーザの現在のシーケンス番号とシードを表示します。</p><p>この文書では、4 種類の異なる操作について説明します。
      1 つ目は、<code class="command">keyinit</code> または
      <code class="command">opiepasswd</code> を信頼できる通信路上で利用して、
      最初にワンタイムパスワードを設定したり、
      秘密のパスフレーズやシードを変更する操作です。
      2 つ目は、同じことを行うために <code class="command">keyinit</code>
      または <code class="command">opiepasswd</code>
      を信頼できない通信路上で利用する操作です。
      この場合は信頼できる通信路経由の
      <code class="command">key</code> または <code class="command">opiekey</code>
      を併用します。3 つ目は、<code class="command">key</code> または
      <code class="command">opiekey</code>
      を使い、信頼できない通信路を通じてログインする操作です。
      4 番目は、<code class="command">key</code> または <code class="command">opiekey</code>
      を使って複数のワンタイムパスワードを一気に生成する操作です。
      ここで生成した複数のワンタイムパスワードは、
      メモしたり印刷したりして携帯し、
      信頼できる通信路が一切ないところで利用することができます。
      (訳注: ワンタイムパスワードを記録した紙をなくさないこと!
       電話番号や
       IP アドレス、ユーザ名を一緒にメモしていたら最悪です!!)</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87934160"></a>15.5.1. 信頼できる通信路での初期化</h3></div></div></div><p>信頼できる通信路 (たとえばあるマシンのコンソール画面や、ssh
	を使っている時など) を利用しているときに、S/Key を初めて初期化
	すること、S/Key の秘密のパスフレーズを変更すること、またはシー
	ドを変更すること、をおこなうことができます。そのためには、まず
	あなた自身がログインし、<code class="command">keyinit</code> コマンドを
	以下のようにパラメータなしで実行します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>keyinit</code></strong>
Adding unfurl:
Reminder - Only use this method if you are directly connected.
If you are using telnet or rlogin exit with no password and use keyinit -s.
        ) `keyinit' コマンドが出力する注意です。訳すと、
        ) 注意 - この動作モードはマシンに直接入力しているときのみ利用
        ) すること。もし今 telnet や rlogin を使っているなら、秘密のパ
        ) スフレーズを入力せずにこのままコマンドを終了し、かわりに
        ) keyinit -s を実行すること。
Enter secret password:
Again secret password:

ID unfurl s/key is 99 to17757
DEFY CLUB PRO NASH LACE SOFT</pre><p>OPIE では <code class="command">opiepasswd</code>
	が代わりに使われます。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiepasswd -c</code></strong>
[grimreaper] ~ $ opiepasswd -f -c
Adding unfurl:
Only use this method from the console; NEVER from remote. If you are using
telnet, xterm, or a dial-in, type ^C now or exit with no password.
Then run opiepasswd without the -c parameter.
        ) `opiepasswd' コマンドが出力する注意です。訳すと、
        ) この手順はコンソール以外では利用しないでください。リモートからは
        ) 絶対に利用してはいけません。telnet, xterm またはダイアルアップで
        ) 利用している場合は、^C を入力するかパスワードを入れずに終了してく
        ) ださい。その後、opiepasswd を -c オプションなしで実行してください。
Using MD5 to compute responses.
Enter new secret pass phrase:
Again new secret pass phrase:
ID unfurl OTP key is 499 to4268
MOS MALL GOAT ARM AVID COED
</pre><p><code class="prompt">Enter new secret pass phrase:</code>
	または <code class="prompt">Enter secret password:</code>
	というプロンプトに対して、
	あなたが考えた秘密のパスフレーズを入力します。このパスフ
	レーズはログインするときに使うものではなく、ログインするときに
	使うワンタイムパスワードを生成するために使うものであることを覚
	えておいてください。<span class="quote">「<span class="quote">ID</span>」</span> から始まる行は、
	1 回分のパラメータで、
	あなたのログイン名とシーケンス番号とシードです。
	(訳注: <code class="command">keyinit</code> コマンドは
	次回にログインするときに使えるパラメータを参考のためにここで表示します)。
	システムにログインするときには、
	システム側が自動的にこれらのパラメータを表示してくれますから、
	これらのパラメータを
	覚えておく必要はありません。最後の行が、今述べたパラメータと入力
	された秘密のパスフレーズから計算されたワンタイムパスワードです。
	この例を実行した後、次にログインするときに打ち込むべきワンタイ
	ムパスワードがこれです。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87940304"></a>15.5.2. 信頼できない通信路での初期化</h3></div></div></div><p>信頼できない通信路を使って秘密のパスフレーズを初期化または変更するためには、
	それとは別に <code class="command">key</code> または <code class="command">opiekey</code>
	プログラムを実行するための信頼できる通信路を用意しておく必要があります。
	たとえばそれは、あなたが信頼できる Macintosh
	のデスクアクセサリや信頼できるマシンのシェルプロンプトだったり
	するでしょう。(訳注: ここでの通信路とはマシンそのものになりま
	す。信頼できるマシンとは、信頼できる人がしっかり管理しているマ
	シンということです)。他に準備しておくものとして、シーケンス番
	号 (100 は適切な値といえるでしょう) と、場合によっては自分で考
	えた、またはランダムに生成されたシードがあります。(あなたが
	S/Key を初期化しようとしているマシンへの) 信頼できない通信路を
	使うときには、<code class="command">keyinit -s</code> コマンドを以下のよ
	うに使用します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>keyinit -s</code></strong>
Updating unfurl:
Old key: to17758
Reminder you need the 6 English words from the key command.
	) `keyinit' コマンドが出力する注意です。訳すと、
	) 注意 - skey コマンドの出力する 6 英単語が必要になります。
Enter sequence count from 1 to 9999: <strong class="userinput"><code>100</code></strong>
Enter new key [default to17759]:
s/key 100 to 17759
s/key access password:
s/key access password:<strong class="userinput"><code>CURE MIKE BANE HIM RACY GORE</code></strong>
</pre><p>OPIE では、<code class="command">opiepasswd</code>
	を使います。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiepasswd</code></strong>

Updating unfurl:
You need the response from an OTP generator.
	) `opiepasswd' コマンドが出力する注意です。訳すと、
	) OTP 生成器の返す出力が必要になります。
Old secret pass phrase:
        otp-md5 498 to4268 ext
        Response: GAME GAG WELT OUT DOWN CHAT
New secret pass phrase:
        otp-md5 499 to4269
        Response: LINE PAP MILK NELL BUOY TROY

ID mark OTP key is 499 gr4269
LINE PAP MILK NELL BUOY TROY
</pre><p>デフォルトのシード (<code class="command">keyinit</code> プログラム
	は困ったことにこれを <code class="literal">key</code>
	と呼んでいるのですが、混乱しないよう注意してください)
	で構わなければ、<span class="keycap"><strong>Return</strong></span>
	を押してください。次に、アクセスパスワードを入れる前に、あらか
	じめ用意しておいた信頼できる通信路(信頼できるマシンや信頼でき
	る S/Key デスクアクセサリなど) へ移って、先ほどと同じパラメータ
	を入力します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>key 100 to17759</code></strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password: <strong class="userinput"><code>&lt;秘密のパスフレーズ&gt;</code></strong>
CURE MIKE BANE HIM RACY GORE</pre><p>OPIE では、</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiekey 498 to4268</code></strong>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT
</pre><p>ここで信頼できない通信路の方に戻って、
	生成されたワンタイムパスワードをコピーして対応するプログラムに入力します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87955280"></a>15.5.3. ワンタイムパスワードを一つ生成する</h3></div></div></div><p>S/Key または OPIE を初期化したら、
	ログイン時には以下のようなプロンプトが出てくるでしょう。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>telnet example.com</code></strong>
Trying 10.0.0.1...
Connected to example.com
Escape character is '^]'.

FreeBSD/i386 (example.com) (ttypa)

login: <strong class="userinput"><code>&lt;ユーザ名&gt;</code></strong>
s/key 97 fw13894
Password: </pre><p>OPIE については、</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>telnet example.com</code></strong>
Trying 10.0.0.1...
Connected to example.com
Escape character is '^]'.

FreeBSD/i386 (example.com) (ttypa)

login: <strong class="userinput"><code>&lt;username&gt;</code></strong>
otp-md5 498 gr4269 ext
Password: </pre><p>ここでは表示していませんが、S/Key と OPIE
	のプロンプトには便利な機能が備わっています。
	パスワードプロンプトに対して、何も入力せずに
	<span class="keycap"><strong>Return</strong></span> を押すとエコーモードに切り替わります。
	つまりタイプした文字がそのまま見えるようになるのです。
	これは、紙に印刷していたりするワンタイムパスワードを
	手で入力しなければならない場合に特に役立つ機能です。</p><a id="idp87960528" class="indexterm"></a><a id="idp87961040" class="indexterm"></a><a id="idp87961552" class="indexterm"></a><p>次に、
	このログインプロンプトに対して入力するワンタイムパスワードを生成しなければなりません。
	これは、<code class="command">key</code> または <code class="command">opiekey</code>
	プログラムを使える信頼できるマシン上で行わなければなりません。
	(これらのプログラムには DOS や Windows, MacOS 版があります)。
	どちらも、コマンドラインからシーケンス番号とシードを指定しなければなりません。
	ログインしようとしているマシンのログインプロンプトから直接カットアンドペーストすると楽でしょう。</p><p>信頼できるシステムで</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>key 97 fw13894</code></strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password:
WELD LIP ACTS ENDS ME HAAG</pre><p>OPIE では</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiekey 498 to4268</code></strong>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT</pre><p>ここでワンタイムパスワードが得られました。
	ログインを続けましょう。</p><pre class="screen">login: <strong class="userinput"><code>&lt;username&gt;</code></strong>
s/key 97 fw13894
Password: <strong class="userinput"><code>&lt;return to enable echo&gt;</code></strong>
s/key 97 fw13894
Password [echo on]: WELD LIP ACTS ENDS ME HAAG
Last login: Tue Mar 21 11:56:41 from 10.0.0.2 ...</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87968080"></a>15.5.4. 複数のワンタイムパスワードを生成する</h3></div></div></div><p>都合によっては、信頼できるマシンや信頼できる通信路が一切確
	保できないようなところで S/Key を使う必要があるでしょう。この
	ような場合には、<code class="command">key</code> コマンドを使って複数の
	ワンタイムパスワードをあらかじめ一気に生成し、紙に印刷して携帯
	していくことができます。たとえば</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>key -n 5 30 zz99999</code></strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password: <strong class="userinput"><code>&lt;秘密のパスフレーズ&gt;</code></strong>
26: SODA RUDE LEA LIND BUDD SILT
27: JILT SPY DUTY GLOW COWL ROT
28: THEM OW COLA RUNT BONG SCOT
29: COT MASH BARR BRIM NAN FLAG
30: CAN KNEE CAST NAME FOLK BILK</pre><p><code class="option">-n 5</code> という引数によって 5 個のワンタイム
	パスワードを順に生成します。ここで <code class="option">30</code> は、最
	後のシーケンス番号となるべき数字です。出力は普通に使う順番とは
	<span class="emphasis"><em>逆</em></span>に出力されていることに注意してください
	(訳注: 一番最初に使うワンタイムパスワードは一番最後に出力され
	たものです)。この結果をカットアンドペーストして
	<code class="command">lpr</code> コマンドを使って印刷すると よいでしょう。
	もしあなたがセキュリティに偏執するなら、この結果を紙と鉛筆を使っ
	て手で書き移した方がよいかもしれません。ここで、出力の各行はシー
	ケンス番号とそれに対応する一回分のワンタイムパスワードです。
	消費済みの ワンタイムパスワードの行をペンで消していくと便利で
	しょう。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87977040"></a>15.5.5. Unix パスワードの利用を制限する</h3></div></div></div><p>設定ファイル <code class="filename">/etc/skey.access</code>
	を使って Unix パスワードの利用を制限することができます。
	この場合の判
	断基準として、ログインを受け付ける際のホスト名、ユーザ名、端末
	のポート、IP アドレスなどが利用できます。この設定ファイルの詳
	細に関してはマニュアル <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=skey.access&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">skey.access</span>(5)</span></a> をご覧ください。マ
	ニュアルにはこの機能に関わるセキュリティについて、いくつかの警
	告が記述してあります。この機能を使ってセキュリティを高めようと
	するのならば絶対にこのマニュアルを読んでください。</p><p>もし <code class="filename">/etc/skey.access</code> ファイルが存在
	しないならば (FreeBSD のデフォルト状態ではそうです)、すべての
	ユーザが Unix パスワードを利用することができます。逆に、もし
	ファイルが存在するならば、<code class="filename">skey.access</code> ファ
	イルに明示的に記述されていない限り、すべてのユーザは S/Key の
	利用を要求されます。どちらの場合においても、そのマシンのコンソー
	ルからはいつでも Unix パスワードを使ってログインすることが可能
	です。</p><p>以下によく使われるであろう三種類の設定を含む設定ファイルの
	例を示します。</p><pre class="programlisting">permit internet 192.168.0.0 255.255.0.0
permit user fnord
permit port ttyd0</pre><p>はじめの行 (<code class="literal">permit internet</code>) で、telnet
	などで接続するときの IP のソースアドレス (注意: これは偽造され
	るおそれがあります) が特定の値とマスクに一致している場合に、
	Unix パスワードの利用を許可することを指定しています。
	この設定自体はセキュリティを高めるための機能ではありません。そうでは
	なく、ログインの権利を持つ許可されたユーザに対して、現在そのユー
	ザが使っているネットワークが信頼できないと考えられるので S/Key
	を使うべきである、ということを気づかせるための機能であると考え
	てください。</p><p>二行目 (<code class="literal">permit user</code>)
	によって、ある特定のユーザ、この場合は
	<code class="systemitem">fnord</code>、に対して、いつでも Unix
	パスワードの利用を許可するように指定しています。
	一般的にはこの設定をおこなうべきではありません。
	<code class="command">key</code> プログラムがどうしても使えない環境にい
	る人や、ダム端末しかない環境にいる人、または何度教えても聞く耳
	を持たないような人をサポートする必要がある場合にのみ設定をおこ
	なってください。</p><p>三行目 (<code class="literal">permit port</code>) によって、ある特定
	の端末ポートからログインしようとするすべてのユーザに対して
	Unix パスワードの利用を許可するように指定しています。この設定
	はダイヤルアップ回線に対する設定として利用できるでしょう。
	</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kerberos"></a>15.6. Kerberos</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Murray</span> <span class="firstname">Mark</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">基にした文書の執筆: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Dapoz</span> <span class="firstname">Mark</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp88058576" class="indexterm"></a><p><span class="emphasis"><em>訳: 有村 光晴 <code class="email">&lt;<a xmlns="" class="email" href="mailto:arimura@jp.FreeBSD.org">arimura@jp.FreeBSD.org</a>&gt;</code>.</em></span></p><p>Kerberosは、
      サーバのサービスによってユーザが安全に認証を受けられる
      ようにするための、ネットワークの付加システム及びプロトコルです。
      リモートログイン、リモートコピー、
      システム間での安全なファイルのコピ
      ーやその他のリスクの高い仕事がかなり安全に、
      そしてこれまでより制御 できるようになります。</p><p>以下の文章は、
      FreeBSD用として配布されているKerberosをセットアップ
      する際のガイドとして読むことができます。しかし、
      完全な説明が必要な場合には、マニュアルページを読んだ方がよい
      でしょう。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88060880"></a>15.6.1. Kerberos のインストール</h3></div></div></div><a id="idp88061520" class="indexterm"></a><a id="idp88062032" class="indexterm"></a><p>Kerberos は選択が任意な FreeBSD のコンポーネントです。
	もっとも簡単なインストール方法は、FreeBSD
	のインストール時に <span class="application">sysinstall</span>
	で 'krb4' または 'krb5' 配布物を選択することです。
	そうすると、Kerberos の 'eBones' (KerberosIV) または
	'Heimdal' (Kerberos5) 実装がインストールされます。
	これらの実装が入っているのは、
	これがアメリカ合衆国およびカナダの外で開発されたものであるため、
	アメリカ合衆国からの暗号ソフトウェアの輸出が制限されていた時代でも
	アメリカ合衆国およびカナダ以外の国に住んでいるシステム所有者の手に入るものだったからです。</p><p>ほかに、MIT で実装された Kerberos が Ports Collection
	の <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/krb5/pkg-descr">security/krb5</a>
	から利用できます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88064848"></a>15.6.2. 初期データベースの作成</h3></div></div></div><p>この作業はKerberosサーバだけでおこないます。まず、
	古いKerberosの データベースが存在しないことを確認してください。
	ディレクトリ<code class="filename">/etc/kerberosIV</code>に移って、
	次のファイルだけが 存在することをチェックします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /etc/kerberosIV</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ls</code></strong>
README          krb.conf        krb.realms</pre><p>もし他のファイル (<code class="filename">principal.*</code> や
	<code class="filename">master_key</code>) が 存在する場合には、
	<code class="command">kdb_destroy</code>というコマンドで古い
	Kerberosデータベースを消してください。
	Kerberosが走っていなければ、
	単に余計なファイルを消せばよいです。</p><p>まず、<code class="filename">krb.conf</code> と
	<code class="filename">krb.realms</code>を編集してKerberosの 管理領域
	(realm) を定義してください。
	ここでは管理領域が <code class="filename">EXAMPLE.COM</code>
	で、サーバ名が <code class="systemitem">grunt.example.com</code>
	であるとします。
	<code class="filename">krb.conf</code>
	というファイルを次のように編集してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat krb.conf</code></strong>
EXAMPLE.COM
EXAMPLE.COM grunt.example.com admin server
CS.BERKELEY.EDU okeeffe.berkeley.edu
ATHENA.MIT.EDU kerberos.mit.edu
ATHENA.MIT.EDU kerberos-1.mit.edu
ATHENA.MIT.EDU kerberos-2.mit.edu
ATHENA.MIT.EDU kerberos-3.mit.edu
LCS.MIT.EDU kerberos.lcs.mit.edu
TELECOM.MIT.EDU bitsy.mit.edu
ARC.NASA.GOV trident.arc.nasa.gov</pre><p>この例にあるような他の管理領域は、実際には必要ありません。
	この例は複数の管理領域を認識する方法を示したものですので、
	これらの行は含めなくても結構です。</p><p>1行目はこのシステムが動いている管理領域の名前です。
	他の行は管理領域とホスト名のエントリです。
	行の1つめの単語が管理領域で、2つめがその管理領域の中で
	<span class="quote">「<span class="quote">鍵配布センター</span>」</span>(Key Distribution Center)
	として働くホスト名です。ホスト名の次に <code class="literal">admin
	server</code> と書いてある場合には、そのホストが
	管理データベースサーバ (Administrative Database Server)
	も提供することを意味します。
	これらの単語について詳しく知りたい場合には Kerberos
	のマニュアルページをご覧ください。</p><p>ここで、<code class="filename">EXAMPLE.COM</code> という管理領域に
	<code class="systemitem">grunt.example.com</code>
	およびその他の <code class="systemitem">.example.com</code>
	ドメインのすべてのホストを追加しなければなりません。
	<code class="filename">krb.realms</code> は次のようになります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat krb.realms</code></strong>
grunt.example.com EXAMPLE.COM
.example.com EXAMPLE.COM
.berkeley.edu CS.BERKELEY.EDU
.MIT.EDU ATHENA.MIT.EDU
.mit.edu ATHENA.MIT.EDU</pre><p>もう一度注意しますが、他の管理領域を書く必要はありません。
	これらは複数の管理領域を認識できるようにマシンを設定する方法を
	示した例ですので、これらの行は消して構いません。</p><p>1行目は名前をつけた管理領域に <span class="emphasis"><em>特定の</em></span>
	システムを含めるための ものです。
	残りの行は名前をつけた管理領域にサブドメインのデフォルトの
	システムを含めるためのものです。</p><p>これでデータベースを作成する準備ができました。
	この操作はKerberos サーバ (鍵配布センター) を起動するだけです。
	<code class="command">kdb_init</code>コ
	マンドを次のように実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_init</code></strong>
<code class="prompt">Realm name [default  ATHENA.MIT.EDU ]:</code> <strong class="userinput"><code>EXAMPLE.COM</code></strong>
You will be prompted for the database Master Password.
It is important that you NOT FORGET this password.

<code class="prompt">Enter Kerberos master key:</code> </pre><p>ここで鍵を保存して、
	ローカルのマシンにあるサーバが取り出せるように します。
	それには<code class="command">kstash</code>コマンドを使用します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kstash</code></strong>

<code class="prompt">Enter Kerberos master key: </code>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!</pre><p>これで暗号化されたマスタパスワードが
	<code class="filename">/etc/kerberosIV/master_key</code>
	に保存されました。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88093520"></a>15.6.3. すべてが動くようにするための設定</h3></div></div></div><p>Kerberosを導入する <span class="emphasis"><em>それぞれの</em></span>
	システムのデータベースに、2つ のprincipal (主体名)
	を追加する必要があります。その名前は
	<code class="literal">kpasswd</code>と<code class="literal">rcmd</code>です。
	これら2つのprincipalは、個々 のシステムにおいて、
	システム名と同じ名前のインスタンスと組にして作成
	されます。</p><p>これらの <code class="command">kpasswd</code> と
	<code class="command">rcmd</code> というデーモンによって、他の
	システムからKerberosのパスワードを変更したり、
	<code class="command">rcp</code>や <code class="command">rlogin</code>,
	<code class="command">rsh</code>といったコマンドを実行したりできるよ
	うになります。</p><p>それでは実際にこれらのエントリを追加しましょう。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_edit</code></strong>
Opening database...

<code class="prompt">Enter Kerberos master key: </code>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<code class="prompt">Principal name:</code> <strong class="userinput"><code>passwd</code></strong>
<code class="prompt">Instance:</code> <strong class="userinput"><code>grunt</code></strong>

&lt;Not found&gt;, <code class="prompt">Create [y] ?</code> <strong class="userinput"><code>y</code></strong>

Principal: passwd, Instance: grunt, kdc_key_ver: 1
<code class="prompt">New Password:</code>                    &lt;---- ここは「RANDOM」と入力してください
Verifying password

<code class="prompt">New Password:</code>                    &lt;---- ここは「RANDOM」と入力してください

<code class="prompt">Random password [y] ?</code> <strong class="userinput"><code>y</code></strong>

Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ? </code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ? </code>
<code class="prompt">Attributes [ 0 ] ? </code>
Edit O.K.
<code class="prompt">Principal name:</code> <strong class="userinput"><code>rcmd</code></strong>
<code class="prompt">Instance:</code> <strong class="userinput"><code>grunt</code></strong>

&lt;Not found&gt;, <code class="prompt">Create [y] ?</code>

Principal: rcmd, Instance: grunt, kdc_key_ver: 1
<code class="prompt">New Password:</code>                    &lt;---- ここは「RANDOM」と入力してください
Verifying password

<code class="prompt">New Password:</code>                    &lt;---- ここは「RANDOM」と入力してください

<code class="prompt">Random password [y] ? </code>

Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ? </code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ? </code>
<code class="prompt">Attributes [ 0 ] ? </code>
Edit O.K.
<code class="prompt">Principal name:</code>                  &lt;---- 何も入力しないと終了します</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88113872"></a>15.6.4. サーバファイルの作成</h3></div></div></div><p>次に、各マシンにおけるサービスを定義している、
	すべてのインスタンスを展開します。
	これには <code class="command">ext_srvtab</code> というコマンドを使用します。
	このコマンドで作成されるファイルは、Kerberos
	の各クライアントの <code class="filename">/etc/kerberosIV</code>
	ディレクトリに<span class="emphasis"><em>安全な方法で</em></span>
	コピーまたは移動する必要があります。
	このファイルはそれぞれのサーバとクライアントに存在しなければならず、
	また Kerberos の運用において重要なものです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ext_srvtab grunt</code></strong>

<code class="prompt">Enter Kerberos master key: </code>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Generating 'grunt-new-srvtab'....</pre><p>このコマンドは一時的なファイルを作成するだけです。
	ファイル名をすべ てのサーバが読めるような
	<code class="filename">srvtab</code> という名前に変更しな
	ければなりません。
	<code class="command">mv</code>コマンドを用いてシステムの場所に移動
	してください。</p><pre class="screen"><code class="prompt">#</code> mv grunt-new-srvtab srvtab</pre><p>そのファイルがクライアントに配るためのもので、
	ネットワークが安全で はないと思われる場合には、<code class="filename">
	  client-new-srvtab</code>
	を移動
	可能なメディアにコピーして物理的に安全な方法で運んでください。
	クラ
	イアントの<code class="filename">/etc/kerberosIV</code>ディレクトリで、
	名前を <code class="filename">srvtab</code>に変更し、
	modeを600にするのを忘れないでください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mv grumble-new-srvtab srvtab</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 600 srvtab</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88122832"></a>15.6.5. データベースへのユーザの追加</h3></div></div></div><p>ここで、
	ユーザのエントリをデータベースに追加する必要があります。
	始めに、
	ユーザ<code class="systemitem">jane</code>のエントリを作成してみましょう。
	<code class="command">kdb_edit</code>
	を用いて次のように作成してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_edit</code></strong>
Opening database...

<code class="prompt">Enter Kerberos master key: </code>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<code class="prompt">Principal name:</code> <strong class="userinput"><code>jane</code></strong>
<code class="prompt">Instance:</code>

&lt;Not found&gt;, <code class="prompt">Create [y] ?</code> <strong class="userinput"><code>y</code></strong>

Principal: jane, Instance: , kdc_key_ver: 1
<code class="prompt">New Password:</code>                    &lt;---- 安全なパスワードを入れてください
Verifying password

<code class="prompt">New Password:</code>                    &lt;---- もう一度パスワードを入れてください

Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ? </code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ? </code>
<code class="prompt">Attributes [ 0 ] ? </code>
Edit O.K.
<code class="prompt">Principal name:</code>                  &lt;---- 何も入力しないと終了します</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88134992"></a>15.6.6. すべてのテスト</h3></div></div></div><p>まず始めにKerberosデーモンを起動する必要があります。
	<code class="filename">/etc/rc.conf</code>
	ファイルを正しく編集してあれば、マシンを再
	起動することでに自動的にデーモンが起動します。
	これはKerberosサー バでのみ必要です。
	Kerberosクライアントは<code class="filename">/etc/kerberosIV</code>か
	ら必要なものを自動的に入手します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kerberos &amp;</code></strong>
Kerberos server starting
Sleep forever on error
Log file is /var/log/kerberos.log
Current Kerberos master key version is 1.

Master key entered.  BEWARE!

Current Kerberos master key version is 1
Local realm: EXAMPLE.COM
<code class="prompt">#</code> <strong class="userinput"><code>kadmind -n &amp;</code></strong>
KADM Server KADM0.0A initializing
Please do not use 'kill -9' to kill this job, use a
regular kill instead

Current Kerberos master key version is 1.

Master key entered.  BEWARE!</pre><p>さあ、これで上で作成した <code class="systemitem">jane</code>
	というIDのチケットを
	<code class="command">kinit</code>コマンドで得ることができます。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kinit jane</code></strong>
MIT Project Athena (grunt.example.com)
Kerberos Initialization for "jane"
<code class="prompt">Password:</code> </pre><p><code class="command">klist</code> コマンドを用いてトークンを見て、
	きちんとチケットを持って いるかどうか確認してください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>klist</code></strong>
Ticket file:    /tmp/tkt245
Principal:      jane@EXAMPLE.COM

  Issued           Expires          Principal
Apr 30 11:23:22  Apr 30 19:23:22  krbtgt.EXAMPLE.COM@EXAMPLE.COM</pre><p><code class="command">passwd</code>
	コマンドを用いてパスワードを変更して、
	<span class="application">kpasswd</span> デーモンが Kerberos
	データベースに対して認証されるかどうかチェックして
	ください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>passwd</code></strong>
realm EXAMPLE.COM
<code class="prompt">Old password for jane:</code>
<code class="prompt">New Password for jane:</code>
Verifying password
<code class="prompt">New Password for jane:</code>
Password changed.</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88150608"></a>15.6.7. <code class="command">su</code> 特権の追加</h3></div></div></div><p>Kerberos は <code class="systemitem">root</code> 権限が必要な
	<span class="emphasis"><em>各</em></span> ユーザに対し、
	<code class="command">su</code> コマンドのパスワードをユーザ毎に
	<span class="emphasis"><em>別のもの</em></span> として持つことを可能にします。
	<code class="systemitem">root</code> に <code class="command">su</code>
	できる権利を与えられた id を追加します。これは、
	principal に付いている <code class="systemitem">root</code>
	というインスタンスに よって制御されています。
	<code class="command">kdb_edit</code>を用いて
	<code class="literal">jane.root</code>というエントリを
	Kerberosデータベースに作成します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_edit</code></strong>
Opening database...

<code class="prompt">Enter Kerberos master key: </code>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<code class="prompt">Principal name:</code> <strong class="userinput"><code>jane</code></strong>
<code class="prompt">Instance:</code> <strong class="userinput"><code>root</code></strong>

&lt;Not found&gt;, Create [y] ? y

Principal: jane, Instance: root, kdc_key_ver: 1
<code class="prompt">New Password:</code>                    &lt;---- 安全なパスワードを入れます
Verifying password

<code class="prompt">New Password:</code>                    &lt;---- もう一回パスワードを入れます

Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ? </code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ?</code> <strong class="userinput"><code>12</code></strong> &lt;--- ここは短くしてください
<code class="prompt">Attributes [ 0 ] ? </code>
Edit O.K.
<code class="prompt">Principal name:</code>                  &lt;---- 何も入力しないと終了します</pre><p>実際にトークンをもらって、
	ちゃんと働いているかどうか確認しましょう。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kinit jane.root</code></strong>
MIT Project Athena (grunt.example.com)
Kerberos Initialization for "jane.root"
<code class="prompt">Password: </code></pre><p>ここで <code class="systemitem">root</code> ユーザの
	<code class="filename">.klogin</code>
	ファイルにユーザを追加する必要があります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat /root/.klogin</code></strong>
jane.root@EXAMPLE.COM</pre><p><code class="command">su</code> してみましょう。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su</code></strong>
<code class="prompt">Password: </code></pre><p>どのトークンを持っているか見てみましょう。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>klist</code></strong>
Ticket file:	/tmp/tkt_root_245
Principal:      jane.root@EXAMPLE.COM

  Issued           Expires          Principal
May  2 20:43:12  May  3 04:43:12  krbtgt.EXAMPLE.COM@EXAMPLE.COM</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88181328"></a>15.6.8. 他のコマンドの使用</h3></div></div></div><p>ここまでの例では、<code class="literal">jane</code> という principal
	を <code class="literal">root</code> とい
	うインスタンス付きで作成しました。
	これはユーザと同じ名前をprincipalと しており、
	Kerberosのデフォルトの値です;
	<code class="literal">&lt;username&gt;.</code><code class="systemitem">root</code>
	という形式の
	<code class="literal">&lt;principal&gt;.&lt;instance&gt;</code>で、
	必要なエントリが <code class="systemitem">root</code> のホームディレクトリの
	<code class="filename">.klogin</code> ファイルにあれば、
	<code class="literal">&lt;username&gt;</code> が
	<code class="systemitem">root</code> に
	<code class="command">su</code> できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat /root/.klogin</code></strong>
jane.root@EXAMPLE.COM</pre><p>同様に、ユーザのホームディレクトリの
	<code class="filename">.klogin</code>ファイルに次の
	ような行がある場合には</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cat ~/.klogin</code></strong>
jane@EXAMPLE.COM
jack@EXAMPLE.COM</pre><p><code class="systemitem">jane</code> または <code class="systemitem">jack</code>
	という名前で (前述の<code class="command">kinit</code> によって)
	認証されている <code class="filename">EXAMPLE.COM</code>
	という管理領域のユーザ なら誰でも<code class="command">rlogin</code> や
	<code class="command">rsh</code>, <code class="command">rcp</code>等によってこ
	のシステム (<code class="systemitem">grunt</code>)
	の<code class="systemitem">jane</code>のアカウントまたはファ
	イルにアクセスできます。</p><p>たとえば、<code class="systemitem">jane</code> が他のシステムに
	Kerberos を用いて login します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kinit</code></strong>
MIT Project Athena (grunt.example.com)
<code class="prompt">Password: </code>
<code class="prompt">%</code> <strong class="userinput"><code>rlogin grunt</code></strong>
Last login: Mon May  1 21:14:47 from grumble
Copyright (c) 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
	The Regents of the University of California.   All rights reserved.

FreeBSD BUILT-19950429 (GR386) #0: Sat Apr 29 17:50:09 SAT 1995</pre><p>次の例では、Jack が同じマシンの Jane
	のアカウントに login します。<code class="systemitem">jane</code> は
	<code class="filename">.klogin</code> ファイルを前述のように設定しており、
	Kerberos では <span class="emphasis"><em>jack</em></span> という principal
	をインスタンスなしで設定してあります。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kinit</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>rlogin grunt -l jane</code></strong>
MIT Project Athena (grunt.example.com)
<code class="prompt">Password: </code>
Last login: Mon May  1 21:16:55 from grumble
Copyright (c) 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
	The Regents of the University of California.   All rights reserved.

FreeBSD BUILT-19950429 (GR386) #0: Sat Apr 29 17:50:09 SAT 1995</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="firewalls"></a>15.7. ファイアウォール</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Palmer</span> <span class="firstname">Gary</span> [FAMILY Given]</span> 、 <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Nash</span> <span class="firstname">Alex</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp88220752" class="indexterm"></a><a id="idp88221264" class="indexterm"></a><p><span class="emphasis"><em>訳: 佐伯 隆司 <code class="email">&lt;<a xmlns="" class="email" href="mailto:saeki@jp.FreeBSD.org">saeki@jp.FreeBSD.org</a>&gt;</code>.
	11 November 1996.</em></span></p><p>ファイアウォールは、
      インターネットに参加している人はもちろんのこと、
      プライベートネットワークのセキュリティ向上のための
      アプリケーションを 探している人にとっても、
      ますます興味深くなりつつある分野です。
      このセクションではファイアウォールとは何か、
      ファイアウォールの使用法、
      そしてファイアウォールを構築するために FreeBSD のカーネルで
      提供されているファシリティ (機能)
      の使用法について説明したいと思います。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">社内のネットワークと <span class="quote">「<span class="quote">巨大かつ信頼のおけない
	インターネット</span>」</span>との間にファイアウォールを構築することで
	セキュリティ上のすべての問題が解決できると考える人がいます。
	ファイアウォールはセキュリティ上の問題を
	解決する助けになる場合もありますが、
	充分な設定がなされていないファイアウォールは、
	まったくファイアウォールを
	持たない場合よりもセキュリティ上の危険を増大させてしまいます。
	ファイアウォールにできることは、
	あなたのシステムにもう一つのセキュリティ層を
	追加することだけで、
	本気でアタックをしかけてくるクラッカーが内部ネットワークに
	侵入するのを妨げることはできません。
	ファイアウォールを侵入不可能と過信して
	内部のセキュリティをおろそかにすることは、
	単にクラッカーの仕事を少し簡単にするだけでしか
	ありません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88241616"></a>15.7.1. ファイアウォールとは何か ?</h3></div></div></div><p>現在インターネットで普通に使用されている
	ファイアウォールには 二つの異なるタイプがあります。一つは、
	厳密には <span class="emphasis"><em> パケットフィルタリングルータ </em></span>
	と 呼ばれるタイプのものです。これはマルチホームのホストマシン
	(複数の ネットワークに接続されているマシン) のカーネルが、
	ある規則にしたがって
	パケットを転送したりブロックしたりするものです。もう一つは、
	<span class="emphasis"><em> proxy (代理) サーバ </em></span>
	として知られているタイプのものです。これは、
	おそらくはマルチホームのホストマシン上で、
	カーネルによるパケット転送を 禁止して、
	デーモンにより認証の提供とパケットの転送とを
	おこなうものです。</p><p>二つのタイプのファイアウォールを組み合わせて使用して、
	特定のマシン (<span class="emphasis"><em> 要塞ホスト </em></span> と呼ばれる)
	だけが パケットフィルタリングルータを通して内部ネットワークへ
	パケットを送ることができるよう設定している
	サイトがしばしば存在します。proxy (代理)
	サービスは通常の認証機構よりもセキュリティを
	強化してある 要塞ホストで動作させます。</p><p>FreeBSD は (IPFW として知られる)
	カーネルパケットフィルタ込みで提供されています。
	この節の残りでは、このフィルタについて集中して説明します。
	サードパーティから提供されるソフトウェアを使用することにより、
	Proxy サーバを FreeBSD 上に構築することができます。
	しかし、現在入手可能な
	proxy サーバはたいへんバラエティに富んでいるので、
	この節でそれらすべてをカバーすることはできません。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="firewalls-packet-filters"></a>15.7.1.1. パケットフィルタリングルータ</h4></div></div></div><p>ルータとは、二つまたはそれ以上のネットワークの間で
	  パケットの転送をおこなう マシンのことです。
	  パケットフィルタリングルータは、そのカーネルの内部に、
	  一つ一つのパケットをルールリストと比較して
	  転送するかしないかを決める 特別なコードを持っています。
	  最近の IP ルーティングソフトウェアのほとんどは、内部に
	  パケットのフィルタリングをおこなうためのコードを持っていて、
	  デフォルトでは すべてのパケットを転送するようになっています。
	  このフィルタを有効にするためには、
	  パケットの通過を許すべきかどうかを決める
	  ルールを自分で定義する必要があります。</p><p>パケットを通すべきか通すべきでないかを決めるために、
	  パケットヘッダの内容にマッチするものが
	  ルールリストから探されます。マッチするルールが見つかると、
	  ルールアクションが実行されます。ルールアクションには、
	  パケットを捨てる、パケットを転送する、
	  またはパケットの発信元に ICMP
	  メッセージを送り返すというものがあります。
	  ルールの検索は先頭から順番におこなわれ、
	  通常は最初にマッチしたものだけが 適用されます。そのため、
	  このルールリストは<span class="quote">「<span class="quote">ルールチェーン</span>」</span>
	  と呼ばれることもあります。</p><p>パケットマッチングの基準は使用するソフトウェアに
	  よって異なりますが、通常はパケットの発信元 IP アドレス、
	  宛先 IP アドレス、発信元ポート番号、宛先ポート番号
	  (ポート番号はポートをサポートするプロトコルの場合のみ)、
	  パケットタイプ (UDP, TCP, ICMP など)
	  に基づくルールを指定することができます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="firewalls-proxy-servers"></a>15.7.1.2. Proxy サーバ</h4></div></div></div><p>Proxy サーバとは通常のシステムデーモン
	  (<span class="application">telnetd</span>,
	  <span class="application">ftpd</span>
	  など) を 特別なサーバで置き換えたマシンのことです。
	  これらのサーバは、
	  通常は中継をおこなって特定方向への接続だけを許すため、
	  <span class="emphasis"><em>proxy サーバ </em></span> と呼ばれます。(たとえば)
	  proxy telnet
	  サーバをファイアウォールホストで走らせておきます。
	  外部からユーザがファイアウォールに対して telnet
	  を実行すると、proxy telnet サーバが応答して、
	  何らかの認証機構を実行します。これを通過した後で、
	  内部ネットワークへのアクセスがおこなえるように なるのです。
	  (内部ネットワークからの信号は proxy
	  サーバがかわりに受け取り、外へ向けて送り出します)。</p><p>Proxy サーバは通常、
	  普通のサーバより堅固に構築されていて、しばしば
	  <span class="quote">「<span class="quote">使い捨て</span>」</span>パスワードシステムなどを含む、
	  多様な認証機構を持っています。
	  <span class="quote">「<span class="quote">使い捨て</span>」</span>パスワードシステムとは、
	  どういうものなのでしょうか。仮に誰かが何らかの方法で、
	  あなたが使用したパスワードを手に入れたとします。しかし、
	  一度使用したことで、
	  そのパスワードは既に無効になっているのです。ですから、
	  そのパスワードをもう一度使用したとしても、あなたのシステムへ
	  アクセスすることはできないというわけです。
	  これらのサーバは中継をおこなうだけで、
	  実際のところサーバホスト自身への
	  アクセスをユーザに許してはいません。そのため、
	  何者かがセキュリティシステムに
	  侵入用の裏口を取り付けることは、
	  より困難になっています。</p><p>proxy サーバはアクセス制限の方法をいくつも持っていて、
	  特定のホスト
	  だけがサーバへのアクセス権を得ることができるように
	  なっていることがあります。
	  そして目的のマシンと通信できるユーザを制限するように
	  設定することもできます。もう一度言いますが、
	  どんなファシリティ (機能) が使えるかは、どんな proxy
	  サービスをおこなうソフトウェアを選ぶかに大きく
	  依存します。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88255440"></a>15.7.2. IPFW で何ができるか</h3></div></div></div><a id="idp88256080" class="indexterm"></a><p>FreeBSD とともに配布されている IPFW は、
	カーネル内部にあってパケットのフィルタリングとアカウンティングをおこなうシステムであり、
	ユーザ側のコントロールユーティリティである <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ipfw</span>(8)</span></a>
	を含んでいます。
	ルーティングの決定をおこなう際に、これらは互いに協力して、
	カーネルで使用されるルールを定義したり、
	現在使用されているルールを問い合わせたりすることができます。</p><p>IPFW は互いに関連する二つの部分からなっています。
	ファイアウォールセクションは
	パケットフィルタリングをおこないます。また、IP
	アカウンティングセクションはファイアウォールセクションのものと
	似たルールに基づいてルータの使用を追跡します。これにより、
	(たとえば) 特定のマシンからルータへのトラフィックがどのくらい
	発生しているか調べたり、どれだけの WWW (World Wide Web)
	トラフィックが
	フォワードされているかを知ることができます。</p><p>IPFW は、
	ルータではないマシンにおいても入出力コネクションの
	パケットフィルタリングのために使用することができるように設計されています。
	これは一般的な IPFW の使用法とは異なる特別な使い方ですが、
	こういった状況でも同じコマンドとテクニックが使用されます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88258768"></a>15.7.3. FreeBSD で IPFW を有効にする</h3></div></div></div><a id="idp88259408" class="indexterm"></a><p>IPFW システムの中心となる部分はカーネル内部にあります。
	そのため、どのファシリティ (機能) を必要とするかによって、
	1 つまたは複数のオプションをカーネルコンフィグレーションファイルに追加し、
	カーネルを再コンパイルする必要があるでしょう。
	カーネルの再コンパイル方法の詳細については、
	「カーネルのコンフィグレーション」(<a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a>)
	をご覧ください。</p><p>現在、IPFW
	に関係するカーネルコンフィグレーションオプションは
	三つあります。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">options IPFIREWALL</code></span></dt><dd><p>パケットフィルタリングのためのコードを
	      カーネルに組み込みます。</p></dd><dt><span class="term"><code class="literal">
	      options IPFIREWALL_VERBOSE</code></span></dt><dd><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> を通じて
	      パケットのログを取るためのコードを有効にします。
	      フィルタルールでパケットのログを取るように指定しても、
	      このオプションが指定されていなければ、
	      ログを取ることはできません。</p></dd><dt><span class="term"><code class="literal">
	      options IPFIREWALL_VERBOSE_LIMIT=10</code></span></dt><dd><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> を通じて
	      ログを取るパケットの数をエントリ毎に制限します。
	      敵対的な環境においてファイアウォールの
	      動作のログを取りたいけれど、
	      syslog の洪水によるサービス拒絶攻撃に対し
	      無防備でありたくないという場合に、
	      このオプションを使用したいと思うことが
	      あるかもしれません。</p><p>チェーンエントリのログが指定された制限数に達すると、
	      そのエントリに関するログ取りは停止されます。
	      ログ取りを再開するには、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ipfw</span>(8)</span></a>
	      ユーティリティを使用して
	      関連するカウンタをリセットする必要があります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ipfw zero 4500</code></strong></pre><p>4500 とは、
	      ログ取りを続行したいチェーンエントリの番号です。</p></dd></dl></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">以前のバージョンの FreeBSD は
	<code class="literal">IPFIREWALL_ACCT</code> というオプションを
	持っていました。しかし、
	ファイアウォールコードがアカウンティングファシリティ (機能) を
	自動的に含むようになったため、
	現在では使用されることはなくなっています。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88276048"></a>15.7.4. IPFW の設定</h3></div></div></div><a id="idp88276688" class="indexterm"></a><p>IPFW ソフトウェアの設定は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ipfw</span>(8)</span></a>
	ユーティリティを通じておこないます。
	このコマンドの構文は非常に複雑に見えますが、
	一旦その構造を理解すれば比較的単純です。</p><p>このユーティリティでは今のところ四つの異なる
	コマンドカテゴリが 使用されています: それは追加 / 削除、表示、
	フラッシュ、およびクリアです。追加 /
	削除はパケットの受け入れ、拒絶、ログ取りをどのようにおこなうか
	というルールを構築するのに使用します。表示はルールリスト
	(またはチェーン) と (アカウンティング用) パケットカウンタの
	内容を調べるのに使用します。
	フラッシュはチェーンからすべてのエントリを
	取り除くのに使用します。
	クリアは一つまたはそれ以上のアカウンティングエントリを
	ゼロにするのに 使用します。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88279376"></a>15.7.4.1. IPFW ルールの変更</h4></div></div></div><p>この形式での使用法は:
	  </p><div class="cmdsynopsis"><p><code class="command">ipfw</code> [-N]  コマンド  [index]  アクション  [log]  プロトコル   アドレス  [オプション]</p></div><p>
	</p><p>この形式で使用する際に有効なフラグは一つだけです。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">-N</span></dt><dd><p>アドレスやサービス名を
		文字列に変換して表示します。</p></dd></dl></div><p><span class="emphasis"><em> コマンド </em></span>
	  は一意である限り短縮可能です。有効な <span class="emphasis"><em> コマンド
	  </em></span> は</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">add</span></dt><dd><p>ファイアウォール / アカウンティングルールリストに
		エントリを追加します。</p></dd><dt><span class="term">delete</span></dt><dd><p>ファイアウォール /
		アカウンティングルールリストから
		エントリを削除します。</p></dd></dl></div><p>以前のバージョンの IPFW では、
	  ファイアウォールエントリと
	  パケットアカウンティングエントリが別々に利用されていました。
	  現在のバージョンでは、それぞれのファイアウォールエントリ毎に
	  パケットアカウンティングエントリが備えられています。</p><p><span class="emphasis"><em>index</em></span> 値が指定されていると、
	  エントリはチェーン中の指示された位置に置かれます。
	  <span class="emphasis"><em>index</em></span> 値が指定されて いなければ、
	  エントリは (65535 番のデフォルトルールである
	  パケット拒絶を別にして) 最後のチェーンエントリの index に
	  100 を足した 位置 (チェーンの最後) に置かれます。</p><p>カーネルが <code class="literal">IPFIREWALL_VERBOSE</code>
	  つきでコンパイルされている場合、<code class="literal">log</code>
	  オプションはマッチしたルールを
	  システムコンソールに出力させます。</p><p>有効な <span class="emphasis"><em> アクション </em></span> は:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">reject</span></dt><dd><p>パケットを捨てます。ICMP ホスト /
		ポート到達不能パケットを (適切な方を)
		発信元へ送ります。</p></dd><dt><span class="term">allow</span></dt><dd><p>通常通りパケットを通過させます。(別名:
		<code class="literal">pass</code> および
		<code class="literal">accept</code>)</p></dd><dt><span class="term">deny</span></dt><dd><p>パケットを捨てます。発信元は ICMP メッセージによる
		通知を受けません (そのためパケットが
		宛先に到達しなかったように見えます)。</p></dd><dt><span class="term">count</span></dt><dd><p>このルールはパケットカウンタを更新するだけで、
		パケットを 通過させたり拒絶したりしません。
		検索は次のチェーンエントリから続けられます。</p></dd></dl></div><p>それぞれの <span class="emphasis"><em> アクション </em></span>
	  は一意な先頭部分だけでも認識されます。</p><p>指定可能な <span class="emphasis"><em> プロトコル </em></span>
	  は以下の通りです。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">all</span></dt><dd><p>任意の IP パケットにマッチします。</p></dd><dt><span class="term">icmp</span></dt><dd><p>ICMP パケットにマッチします。</p></dd><dt><span class="term">tcp</span></dt><dd><p>TCP パケットにマッチします。</p></dd><dt><span class="term">udp</span></dt><dd><p>UDP パケットにマッチします。</p></dd></dl></div><p><span class="emphasis"><em> アドレス </em></span> の指定は:</p><div class="cmdsynopsis"><p> from   <em class="replaceable"><code>address/mask</code></em>  [<em class="replaceable"><code>port</code></em>]  to   <em class="replaceable"><code>address/mask</code></em>  [<em class="replaceable"><code>port</code></em>] [via <em class="replaceable"><code>interface</code></em>]</p></div><p><em class="replaceable"><code>port</code></em> はポートをサポートする
	  <span class="emphasis"><em> プロトコル </em></span> (UDP と TCP) の
	  場合にだけ指定可能です。</p><p><code class="option">via</code> は必須ではなく、
	  特定のインタフェースを通ってきたパケット
	  だけにマッチするように、IP アドレスまたはローカル IP
	  インタフェースの ドメイン名、またはインタフェース名
	  (たとえば <code class="filename">ed0</code>) を
	  指定することができます。
	  インタフェースユニット番号はオプションで、
	  ワイルドカードで指定することが できます。たとえば、
	  <code class="literal">ppp*</code> はすべてのカーネル PPP
	  インタフェースに マッチします。</p><p><em class="replaceable"><code>address/mask</code></em> の指定は:

	  </p><pre class="screen"><em class="replaceable"><code>address</code></em></pre><p>

	  または

	  </p><pre class="screen"><em class="replaceable"><code>address</code></em>/<em class="replaceable"><code>mask-bits</code></em></pre><p>

	  または

	  </p><pre class="screen"><em class="replaceable"><code>address</code></em>:<em class="replaceable"><code>mask-pattern</code></em></pre><p>
	</p><p>IP
	  アドレスのかわりに有効なホスト名を指定することも可能です。
	  <code class="option"><em class="replaceable"><code>mask-bits</code></em></code>
	  はアドレスマスクで上位何ビットを１にするべきかを
	  示す十進数値です。たとえば次の指定、
	  <code class="systemitem">192.216.222.1/24</code> はクラス C のサブネット
	  (この場合 <code class="systemitem">192.216.222</code>)
	  の任意のアドレスにマッチするマスクを作成します。
	  <code class="option"><em class="replaceable"><code>mask-pattern</code></em></code>
	  は与えられたアドレスと 論理 AND される IP アドレスです。
	  キーワード <code class="literal">any</code> は<span class="quote">「<span class="quote">任意の IP
	  アドレス</span>」</span>を指定するために
	  使用することができます。</p><p>ブロックするポート番号は以下のように指定します:

	  </p><div class="cmdsynopsis"><p> <em class="replaceable"><code>port</code></em> [,
		<em class="replaceable"><code>port</code></em> [,
		  <em class="replaceable"><code>port</code></em> […
		  ]]] </p></div><p>

	  のように単独のポートまたはポートのリストを指定します。
	  または

	  </p><div class="cmdsynopsis"><p> <em class="replaceable"><code>port</code></em>-
	      <em class="replaceable"><code>port</code></em> </p></div><p>

	  のようにポートの範囲を指定します。
	  単独のポートとポートのリストを
	  組み合わせて指定することも可能ですが、
	  その場合は常に範囲の方を
	  最初に指定しなければなりません。</p><p>使用可能な <span class="emphasis"><em> オプション </em></span> は:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">frag</span></dt><dd><p>データグラムの最初の
		フラグメントでなければマッチします。</p></dd><dt><span class="term">in</span></dt><dd><p>入力途中のパケットであればマッチします。</p></dd><dt><span class="term">out</span></dt><dd><p>出力途中のパケットであればマッチします。</p></dd><dt><span class="term">ipoptions <em class="replaceable"><code>spec</code></em></span></dt><dd><p>IP ヘッダが <em class="replaceable"><code>spec</code></em>
		に指定された カンマで区切られた
		オプションのリストを含んでいればマッチします。
		サポートされている IP オプションのリストは:
		<code class="literal">ssrr</code> (ストリクトソースルート)、
		<code class="literal">lsrr</code> (ルーズソースルート)、
		<code class="literal">rr</code> (レコードパケットルート)、
		そして <code class="literal">ts</code> (タイムスタンプ) です。
		特定のオプションを含まないことを指定するには
		<code class="literal">!</code> を先頭につけます。</p></dd><dt><span class="term">established</span></dt><dd><p>パケットが既に確立されている TCP
		コネクションの一部であれば (つまり RST または ACK
		ビットがセットされていれば) マッチします。
		<span class="emphasis"><em>established</em></span>
		ルールをチェーンの最初の方に置くことで、
		ファイアウォールのパフォーマンスを向上させることが
		できます。</p></dd><dt><span class="term">setup</span></dt><dd><p>パケットが TCP
		コネクションを確立しようとするものであれば (SYN
		ビットがセットされ ACK ビットはセットされていなければ)
		マッチします。</p></dd><dt><span class="term">tcpflags <em class="replaceable"><code>flags</code></em></span></dt><dd><p>TCP ヘッダが <em class="replaceable"><code>flags</code></em>
		に指定された カンマで区切られたフラグの
		リストを含んでいればマッチします。
		サポートされているフラグは、<code class="literal">fin</code>,
		<code class="literal">syn</code>, <code class="literal">rst</code>,
		<code class="literal">psh</code>, <code class="literal">ack</code> と
		<code class="literal">urg</code> です。
		特定のフラグを含まないことを指定するには
		<code class="literal">!</code> を先頭につけます。</p></dd><dt><span class="term">icmptypes <em class="replaceable"><code>types</code></em></span></dt><dd><p>ICMP タイプが <em class="replaceable"><code>types</code></em>
		リストに 存在していればマッチします。
		リストはタイプの範囲または個々のタイプを
		カンマで区切った任意の組合せで指定できます。
		一般的に使用されている ICMP タイプは:
		<code class="literal">0</code> エコーリプライ (ping リプライ)、
		<code class="literal">3</code> 相手先到達不可能、
		<code class="literal">5</code> リダイレクト、
		<code class="literal">8</code> エコーリクエスト (ping
		リクエスト)、そして <code class="literal">11</code> 時間超過
		(<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a> で使用されているように、TTL
		満了を示すのに使用されます) です。</p></dd></dl></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88370896"></a>15.7.4.2. IPFW ルールリストの表示</h4></div></div></div><p>この形式での使用法は:
	  </p><div class="cmdsynopsis"><p><code class="command">ipfw</code> [-a] [-t] [-N]  l </p></div><p>
	</p><p>この形式で使用する際に有効なフラグは三つあります。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">-a</span></dt><dd><p>リスト表示の際にカウンタの値も表示します。
		このオプションは アカウンティングカウンタの
		内容を見る唯一の手段です。</p></dd><dt><span class="term">-t</span></dt><dd><p>各チェーンエントリが最後に
		マッチした時刻を表示します。この時刻表示は
		  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ipfw</span>(8)</span></a> ユーティリティで使用される入力形式と
		互換性がありません。</p></dd><dt><span class="term">-N</span></dt><dd><p>(可能であれば)
		アドレスやサービス名を文字列に変換して表示します。</p></dd></dl></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88384464"></a>15.7.4.3. IPFW ルールのフラッシュ</h4></div></div></div><p>チェーンをフラッシュするには:
	  </p><div class="cmdsynopsis"><p><code class="command">ipfw</code>  flush </p></div><p>
	</p><p>カーネルに固定されているデフォルトルール (インデックス
	  65535 番)  以外の、
	  ファイアウォールチェーンの中のすべてのエントリを削除します。
	  デフォルトではすべてのパケットが拒絶されるので、
	  一旦これを実行すると、
	  パケットを許可するエントリがチェーンに追加されるまで、
	  あなたのシステムがネットワークから切り放されてしまいます。
	  そのため、
	  ルールのフラッシュをおこなうときは注意が必要です。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88387280"></a>15.7.4.4. IPFW パケットカウンタのクリア</h4></div></div></div><p>一つまたはそれ以上のパケットカウンタをクリアするためには:
	  </p><div class="cmdsynopsis"><p><code class="command">ipfw</code>  zero  [<em class="replaceable"><code>index</code></em>]</p></div><p>
	</p><p><em class="replaceable"><code>index</code></em> が指定されていなければ、
	  すべてのパケットカウンタが クリアされます。
	  <em class="replaceable"><code>index</code></em> が指定されていれば、
	  特定のチェーンエントリだけが クリアされます。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88395728"></a>15.7.5. <span class="application">ipfw</span> についてのコマンドの例</h3></div></div></div><p>このコマンドは、ホスト <code class="systemitem">evil.crackers.org</code> から ホスト <code class="systemitem">nice.people.org</code> の telnet ポートへの
	すべてのパケットを拒絶します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ipfw add deny tcp from evil.crackers.org to nice.people.org 23</code></strong></pre><p>次の例は、ネットワーク <code class="systemitem">crackers.org</code> (クラス C) 全体から
	マシン <code class="systemitem">nice.people.org</code>
	(の任意のポート) への 任意の TCP トラフィックを拒絶し、
	ログを取ります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ipfw add deny log tcp from evil.crackers.org/24 to nice.people.org</code></strong></pre><p>あなたの内部ネットワーク (クラス C のサブネット) に対する
	X セッションを 張れないようにする場合、
	以下のコマンドで必要なフィルタリングがおこなえます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ipfw add deny tcp from any to my.org/28 6000 setup</code></strong></pre><p>アカウンティングレコードを見るには:

	</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ipfw -a list</code></strong></pre><p>

	または短縮形式で</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ipfw -a l</code></strong></pre><p>最後にチェーンエントリがマッチした
	時刻を見ることもできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ipfw -at l</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88406224"></a>15.7.6. パケットフィルタリングファイアウォールの構築</h3></div></div></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">以下の提案は、ただの提案にすぎません:
	  必要な処理はそれぞれのファイアウォールで異なるため、
	  あなた独自の要求にあったファイアウォールを構築する方法を
	  ここで述べることはできないのです。</p></div><p>最初にファイアウォールをセットアップするとき、
	コントロールされた環境でファイアウォールホストの
	設定がおこなえるような
	テストベンチセットアップが用意できない場合には、
	カーネルのログ取りを
	有効にしてログ取り版のコマンドを使用することを
	強くおすすめします。そうすることで、
	大した混乱や中断なしに問題となる範囲の特定と処置を
	素早くおこなうことができます。
	初期セットアップフェーズが完了してからであっても、
	アタックの可能性のあるアクセスをトレースしたり、
	要求の変化に応じてファイアウォールルールを
	変更したりできるので、`deny'
	に対するログ取りをおこなうことをおすすめします。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="command">accept</code>
	  コマンドでログを取っていると、
	  ファイアウォールをパケットが一つ通過する毎に 1
	  行のログが生成されるため <span class="emphasis"><em>大量の</em></span>
	  ログデータが発生します。そのため、大規模な FTP/HTTP
	  転送などをおこなうと、システムが非常に 遅くなってしまいます。
	  また、パケットが通過するまでにカーネルにより
	  多くの仕事を要求するため、パケットのレイテンシ (latency)
	  を増加させてしまいます。<span class="application">syslogd</span>
	  もログをディスクに記録するなど、より多くの CPU タイムを
	  使用し始め、実に容易に <code class="filename">/var/log</code>
	  が置かれているパーティションを溢れさせてしまう可能性があります。</p></div><p>ファイアウォールは、
	<code class="filename">/etc/rc.conf.local</code> か、もしくは
	<code class="filename">/etc/rc.conf</code> によって有効化されるべきです。
	関連マニュアルページには、どのドアノブ (訳注:
	ポートや IP アドレスなど、
	ネットワークからの入口を示すもののこと)
	に手をつければ良いのかに
	ついての説明と、ファイアウォール設定の既定値のリストがあります。
	もし、設定の既定値を使わない場合には、
	<code class="command">ipfw list</code> とすることで、
	現在のルールセットを <code class="filename">rc.conf</code> から読み込める形で
	ファイルに出力できます。
	また、<code class="filename">/etc/rc.conf.local</code> や
	<code class="filename">/etc/rc.conf</code>
	によってファイアウォールを有効化しない場合には、
	すべての IP インタフェースが設定されるよりも前に、
	確実にファイアウォールの有効化が行なわれるようにすることが重要です。</p><p>次の問題は、ファイアウォールが実際には何を
	<span class="emphasis"><em>する</em></span> べきかです !
	これは外部からそのネットワークへのどんなアクセスを許したいか、
	また内部から外界へのアクセスを
	どのくらい許したいかに大きく依存します。
	いくつか一般的なルールを挙げると:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>1024 番以下のポートへのすべての TCP
	    入力アクセスをブロックします。ここは finger, SMTP (mail)
	    そして telnet など、最もセキュリティに敏感な
	    サービスが存在する場所だからです。</p></li><li class="listitem"><p><span class="emphasis"><em> すべての </em></span> 入力 UDP
	    トラフィックをブロックします。これは UDP
	    を使用しているサービスで有用なものは極めて少ないうえ、
	    (Sun の RPC と NFS プロトコルのように)
	    有用なトラフィックであったとしても、
	    通常セキュリティに対する脅威となるためです。UDP
	    はコネクションレスプロトコルであるため、入力 UDP
	    トラフィックを拒絶することは すなわち出力 UDP
	    トラフィックに対する返答をも ブロックすることになるので、
	    このことはそれなりの不利益をもたらします。たとえば外部の
	    archie (prospero) サーバを使用している (内部の) ユーザに
	    とって問題となる可能性があります。もし archie
	    へのアクセスを許したければ、191 番と 1525 番のポートから
	    任意の UDP
	    ポートへ来るパケットがファイアウォールを通過することを
	    許可しなければなりません。123
	    番のポートから来るパケットは
	    <span class="application">ntp</span> パケットで、
	    これも通過の許可を考慮する必要がある
	    もう一つのサービスです。</p></li><li class="listitem"><p>外部から 6000
	    番のポートへのトラフィックをブロックします。6000
	    番のポートは X11 サーバへのアクセスに使用されるポートで、
	    セキュリティに対する脅威となりえます。
	    (特に自分のワークステーションで  <code class="command">xhost
	      +</code>
	    をおこなう癖を持っている人がいればなおさらです)。X11
	    は実際に 6000 番以降のポートを使用する可能性があるため、
	    通過許可に 上限を定めると、
	    そのマシンで走らせることのできる X ディスプレイの
	    個数が制限されます。RFC 1700 (Assigned Numbers)
	    で定義されているように、上限は 6063 です。</p></li><li class="listitem"><p>内部のサーバ (たとえば SQL サーバなど)
	    がどのポートを使用するかを チェックします。
	    それらのポートは通常、上で指定した 1-1024
	    番の範囲から外れていますので、
	    これらも同様にブロックしておくことは
	    おそらく良い考えです。</p></li></ul></div><p>これとは別のファイアウォール設定に 関するチェックリストが
	CERT から 入手可能です。<a class="link" href="http://www.cert.org/tech_tips/packet_filtering.html" target="_top">http://www.cert.org/tech_tips/packet_filtering.html</a></p><p>前にも述べたように、これはただの <span class="emphasis"><em> ガイドライン
	</em></span> にすぎません。
	ファイアウォールでどのようなフィルタルールを使用するかは、
	あなた自身が 決めなければなりません。
	これまでのアドバイスに従ったにも関わらず、
	誰かがあなたのネットワークに 侵入してきたとしても、
	わたしたちは「いかなる」責任もとることはできません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ipfw-overhead"></a>15.7.7. IPFW のオーバーヘッドと最適化</h3></div></div></div><p>多くの人が IPFW
	がどのくらいのオーバヘッドをシステムに加えるかを知りたがっています。
	この答えは、使っているルールセットとプロセッサのスピードによってほぼ決まります。
	イーサネットを使っていてルールセットが少ないアプリケーションにとって答えは、
	<span class="quote">「<span class="quote">その影響は無視できる程度</span>」</span> です。
	実際の測定値を見ないと満足できない方は、引き続きお読みください。</p><p>次の測定は 486-66 (訳注: Intel 社製 CPU i486, 66MHz のこと)
	上で 2.2.5-STABLE を使用して行なわれました
	(IPFW はその後の FreeBSD のリリースで多少変更されていますが、
	現在も同程度の速度で動きます)。IPFW には、
	<code class="literal">ip_fw_chk</code> ルーチン内でかかる時間を測定して、
	1000 パケット毎に結果をコンソールに表示する変更が加えられています。</p><p>それぞれ 1000 ずつのルールからなる
	2 つのルールセットでテストが行なわれました。
	1 つ目のルールセットは最悪のケースを見るために、
	次のルールを繰り返しています。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ipfw add deny tcp from any to any 55555</code></strong></pre><p>これは、最終的にパケットが (ポート番号から)
	ルールにマッチしないことがわかるまでに IPFW
	のほとんどのパケットチェックルーチンが実行されるような、
	最悪の場合を示します。このルールを 999 個繰り返し並べた後に
	<code class="literal">allow ip from any to any</code>
	がきます。</p><p>2 つ目のルールセットは、
	なるべく早く確認が終了するように書かれたものです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ipfw add deny ip from 1.2.3.4 to 1.2.3.4</code></strong></pre><p>このルールでは、発信元の IP アドレスが一致しないので、
	すぐに確認が終わります。前とおなじように、1000 個目のルールは
	<code class="literal">allow ip from any to any</code> です。</p><p>前者のパケットあたりのオーバヘッドはおよそ 2.703 ms/packet
	または 1 つのルールにつき 2.7 マイクロ秒です。したがって、
	このルールにおけるパケット処理時間の理論的な限界は、
	毎秒約 370 パケットです。10 Mbps の Ethernet で
	1500 バイト程度のパケットサイズを仮定すると、
	バンド幅の利用効率は 55.5% が限界です。</p><p>後者では、それぞれのパケットがおよそ 1.172 ms
	または、1 つのルールにつき 1.2 マイクロ秒で処理されていました。
	パケット処理時間の理論的な限界は、
	毎秒約 853 パケットとなりますので、10 Mbps Ethernet
	のバンド幅を使い切ることができます。</p><p>このテストに使われたルールの数が多過ぎることと、
	その性質から、これは実際の状況を反映したものではありません。
	これらは上に示したタイミング情報を出すためだけに用いられたものです。
	効率の良いルールセットを作るためには、
	次のような事を考えればよいでしょう。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">established</code> ルールは
	    TCP トラフィックの大半を処理するため、
	    先頭の方に持ってきてください。このルールの前には
	    <code class="literal">allow tcp</code>
	    という記述を置かないでください。</p></li><li class="listitem"><p>良く使われるルールを、
	    あまり良く使われないルールよりも前の方に
	    (もちろん<span class="emphasis"><em>ファイアウォールの許可設定を変えない範囲で</em></span>)
	    持ってきてください。<code class="command">ipfw -a l</code>
	    でパケット数の統計を取ることで、
	    どのルールが最もよく使われているかを調べられます。</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="openssl"></a>15.8. OpenSSL</h2></div></div></div><a id="idp88510160" class="indexterm"></a><a id="idp88511440" class="indexterm"></a><p>FreeBSD 4.0 では、OpenSSL ツールキットが基本構成の一部に
      含まれています。<a class="link" href="http://www.openssl.org/" target="_top">OpenSSL</a> は、
      Secure Sockets Layer v2/v3 (SSLv2/SSLv3) や Transport Layer
      Security v1 (TLSv1) ネットワークセキュリティプロトコルと同様の
      多目的な暗号化ライブラリを提供します。</p><p>しかしながら、OpenSSL に含まれるアルゴリズムのひとつ
      (特に IDEA) は、合衆国内、その他の地域において、
      特許により保護されています。そのため、
      無制約な利用は許されません。IDEA は
      FreeBSD の OpenSSL 配布に含まれていますが、デフォルトではコンパ
      イルされません。もし IDEA を使いたいなら、そしてあなたがそのライ
      センス条項に合致するなら、<code class="filename">/etc/make.conf</code>
      の中の <code class="literal">MAKE_IDEA</code> スイッチを有効にして、
      <code class="command">make world</code> でソースをリビルドしてください。</p><p>現在は RSA アルゴリズムはアメリカとその他の国で自由に利用で
      きます。以前は特許により保護されていました。</p><a id="idp88514768" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88515920"></a>15.8.1. ソースコードのインストール</h3></div></div></div><p>OpenSSL は <code class="literal">src-crypto</code> と
	<code class="literal">src-secure</code> cvsup コレクションの一部です。
	FreeBSD のソースコードの取得と更新の詳細は、
	<a class="link" href="#mirrors" title="付録A FreeBSD の入手方法">FreeBSD
	  の入手</a>の項を参照して下さい。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ipsec"></a>15.9. IPsec</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Inoue</span> <span class="firstname">Yoshinobu</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp88529616" class="indexterm"></a><a id="idp88530128" class="indexterm"></a><p><span class="emphasis"><em>訳: 日野 浩志 <code class="email">&lt;<a xmlns="" class="email" href="mailto:hino@ccm.cl.nec.co.jp">hino@ccm.cl.nec.co.jp</a>&gt;</code>, 14 March
	2001.</em></span></p><div xmlns="" class="note"><h3 class="admontitle">終端文字: </h3><p xmlns="http://www.w3.org/1999/xhtml">この節の、また他の節を通して、末尾に <span class="quote">「<span class="quote">^D</span>」</span>
	が置かれている例があることに気づかれるでしょう。
	これは、<span class="keycap"><strong>Control</strong></span> キーを押しながら
	<span class="keycap"><strong>D</strong></span> キーを押すことを意味しています。
	ほかによく使われる文字は <span class="quote">「<span class="quote">^C</span>」</span>
	で、<span class="keycap"><strong>Control</strong></span>　キーを押しながら
	<span class="keycap"><strong>C</strong></span> を押すことを意味しています。</p></div><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD の IPsec 実装について説明した HOWTO は、他に
	<code class="uri"><a class="uri" href="http://www.daemonnews.org/200101/ipsec-howto.html" target="_top">http://www.daemonnews.org/200101/ipsec-howto.html</a></code>
	と <code class="uri"><a class="uri" href="http://www.freebsddiary.org/ipsec.php" target="_top">http://www.freebsddiary.org/ipsec.php</a></code>
	があります。</p></div><p>IPsec 機構は、IP 層とソケット層に対して安全な通信を提供します。
      この節ではその使い方を説明します。実装の詳細に関しては <a class="link" href="../../../en_US.ISO8859-1/books/developers-handbook/ipv6.html" target="_top">The
      Developers' Handbook</a> を参照してください。
      
      </p><p>現在の IPsec の実装は、
      トランスポートモードとトンネルモードの両方に対応しています。
      しかし、トンネルモードにはいくつかの制限事項があります。<a class="link" href="http://www.kame.net/newsletter/" target="_top">http://www.kame.net/newsletter/
      </a> にはより総合的な例が載っています。</p><p>ここで述べる機能を利用するには、以下のオプションをカーネルコ
      ンパイル時に指定する必要があることにご注意ください。</p><pre class="programlisting">options          IPSEC              #IP security
options          IPSEC_ESP          #IP security (crypto; define w/IPSEC)</pre><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88544592"></a>15.9.1. IPv4 におけるトランスポートモードの例</h3></div></div></div><p>ホスト A (<code class="systemitem">10.2.3.4</code>)
	とホスト B (<code class="systemitem">10.6.7.8</code>)
	との間に安全なチャネルを配置するために、
	セキュリティアソシエーションを設定しましょう。
	ここでは、少し込み入った例を示します。ホスト A からホストB
	へは old AH のみを使います。ホスト B からホスト A へは
	new AH と new ESP を組み合わせます。</p><p>ここで <span class="quote">「<span class="quote">AH</span>」</span>/<span class="quote">「<span class="quote">new AH</span>」</span>/<span class="quote">「<span class="quote">ESP</span>」</span>/<span class="quote">「<span class="quote">new ESP</span>」</span>
	に対応するアルゴリズムを決めないといけません。
	アルゴリズムの名前を知るには、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setkey&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">setkey</span>(8)</span></a> マニュアルページをご覧ください。ここでは、AH に
	MD5 を、new AH には new-HMAC-SHA1 を、new ESP には 8 バイト IV
	の new-DES-expIV を選びました。</p><p>鍵長はそれぞれのアルゴリズムに大きく依存します。たとえば、
	MD5 では鍵長は 16 バイトでなければなりませんし、new-HMAC-SHA1
	では 20 バイトでなければなりませんし、new-DES-expIV では
	8 バイトでなければなりません。ここではそれぞれ
	<span class="quote">「<span class="quote">MYSECRETMYSECRET</span>」</span>,
	<span class="quote">「<span class="quote">KAMEKAMEKAMEKAMEKAME</span>」</span>,
	<span class="quote">「<span class="quote">PASSWORD</span>」</span> とします。</p><p>次に、それぞれのプロトコルに対して SPI
	(セキュリティパラメータインデックス: Security Parameter Index)
	を割り当てます。3 種類のセキュリティヘッダ
	(ホスト A からホスト B に 1 つ、ホスト B から ホスト A に 2 つ)
	を生成するので、この安全なチャネルには 3 つの SPI
	が必要になることに注意してください。さらに、SPI は
	256 以上でなければならないことにも注意してください。
	ここではそれぞれ 1000, 2000, 3000 を割り当てます。</p><pre class="screen">
	           (1)
	ホスト A ------&gt; ホスト B

	(1)PROTO=AH
		ALG=MD5(RFC1826)
		KEY=MYSECRETMYSECRET
		SPI=1000

	           (2.1)
	ホスト A &lt;------ ホスト B
	         &lt;------
	           (2.2)

	(2.1)
	PROTO=AH
		ALG=new-HMAC-SHA1(new AH)
		KEY=KAMEKAMEKAMEKAMEKAME
		SPI=2000

	(2.2)
	PROTO=ESP
		ALG=new-DES-expIV(new ESP)
			IV length = 8
		KEY=PASSWORD
		SPI=3000
</pre><p>次に、セキュリティアソシエーションを設定しましょう。ホスト
	A とホスト B の両方で、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setkey&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">setkey</span>(8)</span></a> を実行します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -c
    add 10.2.3.4 10.6.7.8 ah-old  1000 -m transport -A keyed-md5 "MYSECRETMYSECRET" ;
    add 10.6.7.8 10.2.3.4 ah  2000 -m transport -A hmac-sha1 "KAMEKAMEKAMEKAMEKAME" ;
    add 10.6.7.8 10.2.3.4 esp 3000 -m transport -E des-cbc "PASSWORD" ;
    ^D</code></strong></pre><p>実際には、セキュリティポリシのエントリが定義されるまでは
	IPsec による通信は行われません。
	この例の場合、両方のホストを設定する必要があります。</p><pre class="screen">
A で:

<code class="prompt">#</code> <strong class="userinput"><code>setkey -c
    spdadd 10.2.3.4 10.6.7.8 any -P out ipsec
	ah/transport/10.2.3.4-10.6.7.8/require ;
    ^D</code></strong>

B で:

<code class="prompt">#</code> <strong class="userinput"><code>setkey -c
    spdadd 10.6.7.8 10.2.3.4 any -P out ipsec
	esp/transport/10.6.7.8-10.2.3.4/require ;
    spdadd 10.6.7.8 10.2.3.4 any -P out ipsec
	ah/transport/10.6.7.8-10.2.3.4/require ;
    ^D</code></strong>


  ホスト A -------------------------------------&gt; ホスト B
  10.2.3.4                                       10.6.7.8
          |                                     |
          ========== old AH keyed-md5 ==========&gt;

          &lt;========= new AH hmac-sha1 ===========
          &lt;========= new ESP des-cbc ============
</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88560592"></a>15.9.2. IPv6 におけるトランスポートモードの例</h3></div></div></div><p>IPv6 を使ったもう一つの例。</p><p>ホスト-A とホスト-B 間の TCP ポート番号 110 番の通信には、
	ESP トランスポートモードが推奨されます。</p><pre class="screen">
              ============ ESP ============
              |                           |
          ホスト-A                      ホスト-B
          fec0::10 -------------------- fec0::11
</pre><p>暗号化アルゴリズムは blowfish-cbc で、その鍵は <span class="quote">「<span class="quote">kamekame</span>」</span>、
	認証アルゴリズムは hmac-sha1 で、その鍵は <span class="quote">「<span class="quote">this is the test
	key</span>」</span> とします。ホスト-A の設定は次のようになります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -c &lt;&lt;EOF
    spdadd fec0::10[any] fec0::11[110] tcp -P out ipsec
	esp/transport/fec0::10-fec0::11/use ;
    spdadd fec0::11[110] fec0::10[any] tcp -P in ipsec
	esp/transport/fec0::11-fec0::10/use ;
    add fec0::10 fec0::11 esp 0x10001
	-m transport
	-E blowfish-cbc "kamekame"
	-A hmac-sha1 "this is the test key" ;
    add fec0::11 fec0::10 esp 0x10002
	-m transport
	-E blowfish-cbc "kamekame"
	-A hmac-sha1 "this is the test key" ;
    EOF</code></strong></pre><p>そしてホスト-B の設定は次のようになります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -c &lt;&lt;EOF
    spdadd fec0::11[110] fec0::10[any] tcp -P out ipsec
	esp/transport/fec0::11-fec0::10/use ;
    spdadd fec0::10[any] fec0::11[110] tcp -P in ipsec
	esp/transport/fec0::10-fec0::11/use ;
    add fec0::10 fec0::11 esp 0x10001 -m transport
	-E blowfish-cbc "kamekame"
	-A hmac-sha1 "this is the test key" ;
    add fec0::11 fec0::10 esp 0x10002 -m transport
	-E blowfish-cbc "kamekame"
	-A hmac-sha1 "this is the test key" ;
    EOF</code></strong></pre><p>SP の方向に注意してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88566224"></a>15.9.3. IPv4 におけるトンネルモードの例</h3></div></div></div><p>2 台のセキュリティゲートウェイ間のトンネルモード</p><p>セキュリティプロトコルは old AH トンネルモード、すなわち
	RFC1826 で指定されるものです。認証アルゴリズムは <span class="quote">「<span class="quote">this is the
	test</span>」</span> を鍵とする keyed-md5 です。</p><pre class="screen">
                             ======= AH =======
                             |                |
     ネットワーク-A   ゲートウェイ-A    ゲートウェイ-B   ネットワーク-B
        10.0.1.0/24 ---- 172.16.0.1 ----- 172.16.0.2 ---- 10.0.2.0/24
</pre><p>ゲートウェイ-A における設定は次のようになります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -c &lt;&lt;EOF
    spdadd 10.0.1.0/24 10.0.2.0/24 any -P out ipsec
	ah/tunnel/172.16.0.1-172.16.0.2/require ;
    spdadd 10.0.2.0/24 10.0.1.0/24 any -P in ipsec
	ah/tunnel/172.16.0.2-172.16.0.1/require ;
    add 172.16.0.1 172.16.0.2 ah-old 0x10003 -m any
	-A keyed-md5 "this is the test" ;
    add 172.16.0.2 172.16.0.1 ah-old 0x10004 -m any
	-A keyed-md5 "this is the test" ;

EOF</code></strong></pre><p>上記の例のように、もしポート番号フィールドを書かないと、
	<code class="literal">[any]</code> と同じ意味になります。<code class="literal">-m</code> は使用される SA
	のモードを指定します。<code class="literal">-m any</code>
	はセキュリティプロトコルのモードのワイルドカードを意味します。
	この SA をトンネルモードとトランスポートモードの両方で使用できます。</p><p>そしてゲートウェイ-B では次のようになります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -c &lt;&lt;EOF
    spdadd 10.0.2.0/24 10.0.1.0/24 any -P out ipsec
	ah/tunnel/172.16.0.2-172.16.0.1/require ;
    spdadd 10.0.1.0/24 10.0.2.0/24 any -P in ipsec
	ah/tunnel/172.16.0.1-172.16.0.2/require ;
    add 172.16.0.1 172.16.0.2 ah-old 0x10003 -m any
	-A keyed-md5 "this is the test" ;
    add 172.16.0.2 172.16.0.1 ah-old 0x10004 -m any
	-A keyed-md5 "this is the test" ;

EOF</code></strong></pre><p>二台のセキュリティゲートウェイ間の SA の束の作成</p><p>ゲートウェイ-A とゲートウェイ-B の間では、
	AH トランスポートモードと ESP トンネルモードが要求されます。
	この例では、まず ESP トンネルモードが適用され、次に
	AH トランスポートモードが適用されます。</p><pre class="screen">
                            ========== AH =========
                            |  ======= ESP =====  |
                            |  |               |  |
    ネットワーク-A     ゲートウェイ-A     ゲートウェイ-B     ネットワーク-B
    fec0:0:0:1::/64 --- fec0:0:0:1::1 ---- fec0:0:0:2::1 --- fec0:0:0:2::/64
</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88578128"></a>15.9.4. IPv6 におけるトンネルモードの例</h3></div></div></div><p>暗号化アルゴリズムは 3des-cbc, ESP の認証アルゴリズムは
	hmac-sha1 とします。AH の認証アルゴリズムは hmac-md5 とします。
	ゲートウェイ-A での設定は次のようになります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -c &lt;&lt;EOF
    spdadd fec0:0:0:1::/64 fec0:0:0:2::/64 any -P out ipsec
	esp/tunnel/fec0:0:0:1::1-fec0:0:0:2::1/require
	ah/transport/fec0:0:0:1::1-fec0:0:0:2::1/require ;
    spdadd fec0:0:0:2::/64 fec0:0:0:1::/64 any -P in ipsec
	esp/tunnel/fec0:0:0:2::1-fec0:0:0:1::1/require
	ah/transport/fec0:0:0:2::1-fec0:0:0:1::1/require ;
    add fec0:0:0:1::1 fec0:0:0:2::1 esp 0x10001 -m tunnel
	-E 3des-cbc "kamekame12341234kame1234"
	-A hmac-sha1 "this is the test key" ;
    add fec0:0:0:1::1 fec0:0:0:2::1 ah 0x10001 -m transport
	-A hmac-md5 "this is the test" ;
    add fec0:0:0:2::1 fec0:0:0:1::1 esp 0x10001 -m tunnel
	-E 3des-cbc "kamekame12341234kame1234"
	-A hmac-sha1 "this is the test key" ;
    add fec0:0:0:2::1 fec0:0:0:1::1 ah 0x10001 -m transport
	-A hmac-md5 "this is the test" ;

    EOF</code></strong></pre><p>異なる通信端での SA の作成</p><p>ホスト-A とゲートウェイ-A の間では
	ESP トンネルモードが要求されています。暗号化アルゴリズムは
	cast128-cbc で、ESP の認証アルゴリズムは hmac-sha1
	です。ホスト-A とホスト-B との間では
	ESP トランスポートモードが推奨されています。
	暗号化アルゴリズムは rc5-cbc で、ESP
	の認証アルゴリズムは hmac-md5 です。</p><pre class="screen">
              ================== ESP =================
              |  ======= ESP =======                 |
              |  |                 |                 |
            ホスト-A        ゲートウェイ-A         ホスト-B
          fec0:0:0:1::1 ---- fec0:0:0:2::1 ---- fec0:0:0:2::2
</pre><p>ホスト-A での設定は次のようになります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -c &lt;&lt;EOF
    spdadd fec0:0:0:1::1[any] fec0:0:0:2::2[80] tcp -P out ipsec
	esp/transport/fec0:0:0:1::1-fec0:0:0:2::2/use
	esp/tunnel/fec0:0:0:1::1-fec0:0:0:2::1/require ;
    spdadd fec0:0:0:2::1[80] fec0:0:0:1::1[any] tcp -P in ipsec
	esp/transport/fec0:0:0:2::2-fec0:0:0:l::1/use
	esp/tunnel/fec0:0:0:2::1-fec0:0:0:1::1/require ;
    add fec0:0:0:1::1 fec0:0:0:2::2 esp 0x10001
	-m transport
	-E cast128-cbc "12341234"
	-A hmac-sha1 "this is the test key" ;
    add fec0:0:0:1::1 fec0:0:0:2::1 esp 0x10002
	-E rc5-cbc "kamekame"
	-A hmac-md5 "this is the test" ;
    add fec0:0:0:2::2 fec0:0:0:1::1 esp 0x10003
	-m transport
	-E cast128-cbc "12341234"
	-A hmac-sha1 "this is the test key" ;
    add fec0:0:0:2::1 fec0:0:0:1::1 esp 0x10004
	-E rc5-cbc "kamekame"
	-A hmac-md5 "this is the test" ;

    EOF</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="openssh"></a>15.10. OpenSSH</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lee</span> <span class="firstname">Chern</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp88585680" class="indexterm"></a><a id="idp88586192" class="indexterm"></a><p>セキュアシェル (secure shell)
      はリモートマシンへのセキュアなアクセスに使われるネットワーク接続ツールの集合です。
      これは <code class="command">rlogin</code>,
      <code class="command">rsh</code>, <code class="command">rcp</code>,
      <code class="command">telnet</code> をそのまま置き換えて使えます。
      また、他のあらゆる TCP/IP 接続を
      ssh 経由でセキュアにトンネル/フォワードすることもできます。
      ssh はすべてのトラフィックを暗号化し、
      盗聴や接続の乗っ取り等のネットワークレベルの攻撃を事実上無効化します。</p><p>OpenSSH は OpenBSD プロジェクトによって維持管理されており、SSH v1.2.12
      に最新のすべてのバグ修正と更新を適用したものをベースにしています。
      OpenSSH クライアントは SSH プロトコル 1 と 2 の両方に互換性があります。
      OpenSSH は FreeBSD 4.0 以降ベースシステムに取り込まれています。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88622544"></a>15.10.1. OpenSSH を使うことの利点</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">telnet</span>(1)</span></a> や <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a>
	を使う場合、一般にデータはネットワークを平文で流れます。
	ネットワークをクライアントとサーバの間のどこかで盗聴することで
	あなたのユーザ/パスワード情報やセション中を流れるデータを盗むことが可能です。
	OpenSSH はこれらを予防する為にさまざまな認証と暗号化の方法を提供します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88625104"></a>15.10.2. sshd を有効にする</h3></div></div></div><a id="idp88625744" class="indexterm"></a><p><code class="filename">rc.conf</code> ファイルに
	以下の行を追加してください。</p><pre class="screen">sshd_enable="YES"</pre><p>次に起動したときから
	<span class="application">ssh</span> デーモンが起動します。
	もしくは単に <span class="application">sshd</span>
	デーモンを実行しても構いません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88629328"></a>15.10.3. SSH クライアント</h3></div></div></div><a id="idp88638288" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> ユーティリティは
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a> と同様に働きます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ssh user@example.com</code></strong>
Host key not found from the list of known hosts.
Are you sure you want to continue connecting (yes/no)? <strong class="userinput"><code>yes</code></strong>
Host 'example.com' added to the list of known hosts.
user@example.com's password: <strong class="userinput"><code>*******</code></strong></pre><p>ログインは <code class="command">rlogin</code> や <code class="command">telnet</code>
	でセッションを張った時と同様に続きます。
	SSH はクライアントが接続した時、
	サーバの信頼性の検証のために鍵指紋システム
	(key fingerprint system) を利用します。
	初めての接続の際にのみ、ユーザは <code class="literal">yes</code> と入力することを要求されます。
	これ以降の login では保存されていた鍵指紋を照合することで検証されます。
	SSH クライアントは保存されていた鍵指紋が
	login しようとした際に送られてきたものと異なっていた場合には警告を表示します。
	指紋は <code class="filename">~/.ssh/known_hosts</code> に、また
	SSH v2 指紋の場合は <code class="filename">~/.ssh/known_hosts2</code>
	に保存されます。</p><p>デフォルトでは、OpenSSH サーバは SSH v1 と SSH v2
	両方の接続を受け付けるように設定されています。
	クライアントはそのどちらかを選択できます。
	バージョン 2 は、旧バージョンよりも堅固で安全です。</p><p><code class="command">ssh</code> に、プロトコル v1 と v2
	についてそれぞれ、引数 <code class="option">-1</code> または <code class="option">-2</code>
	を渡すことで、利用するプロトコルを強制できます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88647248"></a>15.10.4. Secure copy</h3></div></div></div><a id="idp88647888" class="indexterm"></a><a id="idp88649040" class="indexterm"></a><p><code class="command">scp</code> コマンドは
	<code class="command">rcp</code> と同様に働きます。
	安全な方法で行っているほかは、ローカルのファイルをリモートマシンへ、
	あるいはリモートマシンのファイルをローカルにコピーするのは同じです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code> scp user@example.com:/COPYRIGHT COPYRIGHT</code></strong>
user@example.com's password: <strong class="userinput"><code>*******</code></strong>
COPYRIGHT            100% |*****************************|  4735
00:00
<code class="prompt">#</code></pre><p>前回の例でこのホストの指紋がすでに保存されていれば
	この <code class="command">scp</code> を使う時に検証が行なわれます。</p><p><code class="command">scp</code> に渡される引数は、<code class="command">cp</code>
	のものと似ており、ファイル (1 つまたは複数) が
	1 つめの引数になり、コピー先が 2 つめの引数になります。
	ファイルはネットワーク越しに SSH を通して送られるので、
	引数に指定するファイルには
	<code class="option">user@host:&lt;path_to_remote_file&gt;</code>
	という形式をとるものがあります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88654800"></a>15.10.5. 設定</h3></div></div></div><a id="idp88655440" class="indexterm"></a><p>システム全体の設定ファイルは、OpenSSH デーモン、
	クライアントの両方とも <code class="filename">/etc/ssh</code>
	ディレクトリにあります。</p><p><code class="filename">ssh_config</code> はクライアントの動作設定、
	<code class="filename">sshd_config</code>
	はデーモンの動作設定を行ないます。</p><p>さらに、<code class="filename">rc.conf</code> オプションの
	<code class="option">sshd_program</code>
	(デフォルトは <code class="filename">/usr/sbin/sshd</code>) と
	<code class="option">sshd_flags</code>
	により、詳細な設定が行えます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88660432"></a>15.10.6. ssh-keygen</h3></div></div></div><p>パスワードの代わりに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a>
	を使ってユーザの認証用の RSA 暗号鍵を作ることができます。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh-keygen</code></strong>
Initializing random number generator...
Generating p:  .++ (distance 66)
Generating q:  ..............................++ (distance 498)
Computing the keys...
Key generation complete.
Enter file in which to save the key (/home/user/.ssh/identity):
Enter passphrase:
Enter the same passphrase again:
Your identification has been saved in /home/user/.ssh/identity.
...</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a> は認証に使う為の公開鍵と秘密鍵のペアを作ります。
	秘密鍵は <code class="filename">~/.ssh/identity</code> に保存され、
	公開鍵は <code class="filename">~/.ssh/identity.pub</code> に保存されます。
	公開鍵はリモートマシンの <code class="filename">~/.ssh/authorized_keys</code>
	にも置かなければなりません。</p><p>これでパスワードの代わり
	RSA 認証を使ってリモートマシンに接続できるようになったはずです。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a> でパスフレーズを使っている場合は、
	ユーザは秘密鍵を使うために毎回パスフレーズの入力を行なう必要があります。</p><p>同じ目的で、<code class="command">ssh-keygen -d</code>
	(FreeBSD FreeBSD-CURRENT では
	<code class="command">ssh-keygen -t dsa</code>)
	コマンドを使って SSH v2 DSA 鍵を生成することもできます。
	これは、SSH v2 セッション専用の DSA 公開/秘密鍵を生成します。
	公開鍵は <code class="filename">~/.ssh/id_dsa.pub</code>
	に保存され、秘密鍵は <code class="filename">~/.ssh/id_dsa</code>
	に置かれます。</p><p>DSA 公開鍵はリモートマシンの
	<code class="filename">~/.ssh/authorized_keys2</code>
	内におきます。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> と <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-add</span>(1)</span></a> は
	複数のパスワード化された秘密鍵の管理に使われます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88679888"></a>15.10.7. SSH トンネリング</h3></div></div></div><a id="idp88680528" class="indexterm"></a><p>OpenSSH は暗号化されたセッションの中に他のプロトコルを
	カプセル化するトンネルを作ることができます。</p><p>以下のコマンドは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> で telnet
	用のトンネルを作成します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 5023:localhost:23 user@foo.example.com</code></strong>
<code class="prompt">%</code></pre><p><code class="command">ssh</code> コマンドは、
	次のオプションとともに利用します。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-2</code></span></dt><dd><p><code class="command">ssh</code> にプロトコルバージョン 2
	      を使うことを指示します。(古い ssh
	      サーバを使っているときには指定しないでください)</p></dd><dt><span class="term"><code class="option">-N</code></span></dt><dd><p>はトンネルだけでコマンドはないことを示します。
	      省略されると <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> は通常のセッションを開始します。</p></dd><dt><span class="term"><code class="option">-f</code></span></dt><dd><p><code class="command">ssh</code>
	      にバックグラウンド実行を強制します。</p></dd><dt><span class="term"><code class="option">-L</code></span></dt><dd><p>ローカルトンネルを
	      <em class="replaceable"><code>localport:remotehost:remoteport</code></em>
	      という形式で指定します。</p></dd><dt><span class="term"><code class="option">user@foo.example.com</code></span></dt><dd><p>リモートの SSH サーバです。</p></dd></dl></div><p>SSH のトンネルは <code class="systemitem">localhost</code>
	の指定されたポートに listen
	するソケットを作ることで実現されています。
	SSH はローカルのホスト/ポートで受けた接続すべてを SSH
	接続経由で指定されたリモートホストのポートへ転送します。</p><p>この例では、<code class="systemitem">localhost</code> のポート
	<em class="replaceable"><code>5023</code></em>	がリモートマシンの
	<code class="systemitem">localhost</code> のポート <em class="replaceable"><code>23</code></em>
	に転送されるようになっています。
 	<em class="replaceable"><code>23</code></em> は telnet なのでこれは SSH
 	トンネルを通るセキュアな telnet セッションを作ります。</p><p>このようにして SMTP や POP3, FTP 等のセキュアではない TCP
	プロトコルをカプセル化することができます。</p><div class="example"><a id="idp88728016"></a><div class="example-title">例15.1 SSH を用いた SMTP 用の安全なトンネルの作成</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 5025:localhost:25 user@mailserver.example.com</code></strong>

user@mailserver.example.com's password: <strong class="userinput"><code>*****</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>telnet localhost 5025</code></strong>
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
220 mailserver.example.com ESMTP</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a>
	  と別のユーザアカウントを組み合わせて使うことでより透過的で悩まずに済むような
	  SSH のトンネル環境を作ることができます。
	  パスワードを入力するところで暗号鍵を使い、
	  トンネルは別のユーザ権限で実行することが可能です。</p></div></div><br class="example-break" /><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88732240"></a>15.10.7.1. 実用的な SSH トンネルの例</h4></div></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88732880"></a>15.10.7.1.1. POP3 サーバへの安全な接続</h5></div></div></div><p>仕事で、外部からの接続を受ける SSH サーバがあるとします。
	    同じオフィスのネットワークには、POP3
	    サーバが動いているメールサーバがあるとします。
	    ネットワークもしくはあなたの家とオフィスの間のネットワーク経路は、
	    完全に信頼できるものかもしれませんし、そうではないかもしれません。
	    そのため、電子メールは安全なやり方で見るようにしなければなりません。
	    解決策は、オフィスの SSH サーバへの SSH 接続を行い、
	    メールサーバへのトンネルを作成することです。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 2110:mail.example.com:110 user@ssh-server.example.com</code></strong>
user@ssh-server.example.com's password: <strong class="userinput"><code>******</code></strong></pre><p>トンネルが作成されて動作したら、
	    メールクライアントに対し <code class="systemitem">localhost</code>
	    のポート 2110 に POP3 リクエストを送るように指示できます。
	    そこへの接続は、トンネルを経由して安全に
	    <code class="systemitem">mail.example.com</code> に転送されます。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88736464"></a>15.10.7.1.2. 厳格なファイアウォールをすり抜ける</h5></div></div></div><p>内向けの接続をフィルタするだけでなく、
	    外向けの接続もフィルタして、
	    極端に厳しいファイアウォールルールを課すネットワーク管理者もいます。
	    リモートのマシンには、SSH 接続と web サーフィンのための
	    22 番および 80 番ポートにしか接続させてもらえないかもしれません。</p><p>あなたは、それ以外の (もしかすると仕事に関係ない)
	    サービスにアクセスしたくなるかもしれません。
	    例えば、音楽ストリーミングを行う
	    Ogg Vorbis サーバといったものです。
	    この Ogg Vorbis サーバが 22 番または
	    80 番ポート以外でストリーミングを行っていたら、
	    あなたはそのサーバに接続できないでしょう。</p><p>それに対する解決策は、
	    あなたが接続しているネットワークのファイアウォールの外部にあるマシンに対して
	    SSH 接続を行い、Ogg Vorbis
	    サーバへのトンネルに利用することです。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 8888:music.example.com:8000 user@unfirewalled.myserver.com</code></strong>
user@unfirewalled.myserver.com's password: <strong class="userinput"><code>*******</code></strong></pre><p>ストリーミングクライアントを <code class="systemitem">localhost</code>
	    の 8888 番ポートに向けると、<code class="systemitem">music.example.com</code>
	    の 8000 番ポートに転送され、
	    ファイアウォールをすり抜けられます。</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88745296"></a>15.10.8. もっと詳しく知りたい人へ</h3></div></div></div><p><a class="link" href="http://www.openssh.com/" target="_top">OpenSSH</a></p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scp</span>(1)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a>
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-add</span>(1)</span></a></p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sftp-server&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sftp-server</span>(8)</span></a></p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="fs-acl"></a>15.11. ファイルシステムアクセス制御リスト</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span> <span class="firstname">Tom</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp88763600" class="indexterm"></a><p>スナップショットのようなファイルシステムの拡張と連携して、
      FreeBSD 5.0 以降ではファイルシステムアクセス制御リスト
      (<acronym class="acronym">ACLs</acronym>) によるセキュリティを提供しています。</p><p>アクセス制御リストは、標準的な UNIX のパーミッションモデルを、
      非常に互換性の高い (POSIX.1e) やり方で拡張しています。
      この機能は、管理者がより洗練されたセキュリティモデルを利用し、
      その恩恵を受けられるようにします。</p><p><acronym class="acronym">UFS</acronym> ファイルシステム用の
      <acronym class="acronym">ACL</acronym> サポートを有効にするには、
      次のオプションをカーネルに組み込まなければなりません。</p><pre class="programlisting">options UFS_ACL</pre><p>もしこのオプションが組み込まれていなければ、<acronym class="acronym">ACLs</acronym>
      に対応したファイルシステムをマウントしようとすると、
      警告が表示されます。このオプションは <code class="filename">GENERIC</code>
      カーネルに含まれています。<acronym class="acronym">ACLs</acronym>
      は、ファイルシステムの拡張属性が有効になっていることに依存しています。
      拡張属性は、次世代 UNIX ファイルシステムである <acronym class="acronym">UFS2</acronym>
      でネイティブ対応されています。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><acronym class="acronym">UFS1</acronym> に拡張属性を付すように設定するのは、
      <acronym class="acronym">UFS2</acronym> よりも高いレベルの管理オーバヘッドが必要になります。
      また、<acronym class="acronym">UFS2</acronym>
      における拡張属性のパフォーマンスも大きく上がっています。
      その結果、アクセス制御リストを利用する上では、一般的には
      <acronym class="acronym">UFS1</acronym> よりも <acronym class="acronym">UFS2</acronym>
      の方がおすすめです。</p></div><p><acronym class="acronym">ACLs</acronym> は、マウント時の管理フラグ <code class="option">acls</code>
      で有効にされます。これは <code class="filename">/etc/fstab</code> に記述できます。
      マウント時のフラグは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a>
      を使って、ファイルシステムヘッダのスーパブロックにある
      <acronym class="acronym">ACLs</acronym> フラグを変更するという方法で、
      常に自動で設定されるようになります。一般的には、
      下記の理由からスーパブロックフラグを使う方がよいでしょう。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>マウント時に指定した <acronym class="acronym">ACLs</acronym> フラグは再マウント
	  (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> <code class="option">-u</code>) 時に変更できません。完全に
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a> した上で、新たに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
	  するしかありません。これは、起動後にルートファイルシステムで
	  <acronym class="acronym">ACLs</acronym> を有効にできないことを意味します。
	  また、ファイルシステムを利用し始めた後では、
	  その配列を変えられないことも意味しています。</p></li><li class="listitem"><p>スーパブロックフラグを設定すると、<code class="filename">fstab</code>
	  に記述されていなかったり、デバイスの順番が変わってしまっても、常に
	  <acronym class="acronym">ACLs</acronym> が有効な状態でマウントされます。
	  こうすることで、ファイルシステムを <acronym class="acronym">ACLs</acronym>
	  を有効にしないままマウントしてしまい、<acronym class="acronym">ACLs</acronym>
	  が正しくないかたちで強制され、
	  セキュリティ問題につながることを防ぎます。</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><acronym class="acronym">ACLs</acronym> の動作を変更して、まったく新たに
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> を行わなくてもフラグを有効にできるようにすることも可能でしょう。
      しかし、我々は、うっかり <acronym class="acronym">ACLs</acronym>
      を有効にしないでマウントしてしまうのを防ぐようにした方が望ましいと考えました。
      <acronym class="acronym">ACLs</acronym> を有効にし、その後無効にしてから、
      拡張属性を取り消さないでまた有効にしてしまうと、
      鬱陶しい状態に自分で入り込んでしまえるからです。
      一般的には、一度ファイルシステムで <acronym class="acronym">ACLs</acronym>
      を有効にしたら、無効にすべきではありません。そうしてしまうと、
      ファイル保護がシステムのユーザの意図と齟齬をきたす可能性があるばかりか、
      <acronym class="acronym">ACLs</acronym> を再度有効にすると、
      それまでパーミッションが変更されてきたファイルに古い
      <acronym class="acronym">ACLs</acronym> を割り当ててしまい、
      予想しない動作につながることも考えられます。</p></div><p><acronym class="acronym">ACLs</acronym> を有効にしたファイルシステムは、
      パーミッション設定の表示に <code class="literal">+</code> (プラス)
      記号がつきます。例えば、次のようになります。</p><pre class="programlisting">drwx------  2 robert  robert  512 Dec 27 11:54 private
drwxrwx---+ 2 robert  robert  512 Dec 23 10:57 directory1
drwxrwx---+ 2 robert  robert  512 Dec 22 10:20 directory2
drwxrwx---+ 2 robert  robert  512 Dec 27 11:57 directory3
drwxr-xr-x  2 robert  robert  512 Nov 10 11:54 public_html</pre><p>ここでは、ディレクトリ <code class="filename">directory1</code>,
      <code class="filename">directory2</code> および <code class="filename">directory3</code>
      のすべてで <acronym class="acronym">ACLs</acronym> が働いています。
      ディレクトリ <code class="filename">public_html</code> は対象外です。</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks"></a>第16章 ストレージ</h2></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#disks-synopsis">16.1. この章では</a></span></dt><dt><span class="sect1"><a href="#disks-naming">16.2. デバイス名</a></span></dt><dt><span class="sect1"><a href="#disks-adding">16.3. ディスクの追加</a></span></dt><dt><span class="sect1"><a href="#raid">16.4. RAID</a></span></dt><dt><span class="sect1"><a href="#creating-cds">16.5. 光メディア (CD &amp; DVD) の作成と使用</a></span></dt><dt><span class="sect1"><a href="#floppies">16.6. フロッピーディスクの作成と使用</a></span></dt><dt><span class="sect1"><a href="#backups-tapebackups">16.7. データテープの作成と使用</a></span></dt><dt><span class="sect1"><a href="#backups-floppybackups">16.8. フロッピーディスクへのバックアップ</a></span></dt><dt><span class="sect1"><a href="#backup-basics">16.9. バックアップの基本</a></span></dt><dt><span class="sect1"><a href="#disks-virtual">16.10. ネットワーク、メモリ、そしてファイルベースのファイルシステム</a></span></dt><dt><span class="sect1"><a href="#snapshots">16.11. ファイルシステムのスナップショット</a></span></dt><dt><span class="sect1"><a href="#quotas">16.12. ファイルシステムクォータ</a></span></dt><dt><span class="sect1"><a href="#disks-encrypting">16.13. ディスクパーティションの暗号化</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-synopsis"></a>16.1. この章では</h2></div></div></div><p>この章では、FreeBSD におけるディスクの使用方法を説明します。
      これにはメモリディスク、ネットワークに接続されたディスク、
      および標準的な SCSI/IDE 記憶デバイスが含まれます。</p><p>この章では、以下の分野について説明します。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>物理ディスク上のデータ構成
	について記述するために FreeBSD が使用する用語
	(パーティションおよびスライス) </p></li><li class="listitem"><p>システムにハードディスクを追加する方法</p></li><li class="listitem"><p>メモリディスクのような仮想ファイルシステムを設定する方法</p></li><li class="listitem"><p>使用できるディスク容量を制限するためにクォータを設定する方法</p></li><li class="listitem"><p>攻撃者から保護するためにディスクを暗号化する方法</p></li><li class="listitem"><p>FreeBSD で CD や DVD を作成する方法</p></li><li class="listitem"><p>バックアップのためのさまざまな記憶メディアオプション</p></li><li class="listitem"><p>FreeBSD で利用できるバックアッププログラムの使用方法</p></li><li class="listitem"><p>フロッピーディスクにバックアップする方法</p></li><li class="listitem"><p>スナップショットとは何か、そしてそれを効果的に使用する方法</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-naming"></a>16.2. デバイス名</h2></div></div></div><p>以下は、FreeBSD で対応している物理記憶デバイスとそれに対応するデバイス名のリストです。</p><div class="table"><a id="disk-naming-physical-table"></a><div class="table-title">表16.1 物理ディスクへの名前付け</div><div class="table-contents"><table summary="物理ディスクへの名前付け" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>ドライブの種類</th><th>ドライブのデバイス名</th></tr></thead><tbody><tr><td>IDE ハードドライブ</td><td><code class="literal">ad</code></td></tr><tr><td>IDE CD-ROM ドライブ</td><td><code class="literal">acd</code></td></tr><tr><td>SCSI ハードドライブおよび USB 大容量記憶デバイス</td><td><code class="literal">da</code></td></tr><tr><td>SCSI CD-ROM ドライブ</td><td><code class="literal">cd</code></td></tr><tr><td>その他の非標準的 CD-ROM ドライブ</td><td>ミツミ CD-ROM は <code class="literal">mcd</code>,
	      Sony CD-ROM は <code class="literal">scd</code>,
	      松下/パナソニック CD-ROM は <code class="literal">matcd</code>
	    </td></tr><tr><td>フロッピードライブ</td><td><code class="literal">fd</code></td></tr><tr><td>SCSI テープドライブ</td><td><code class="literal">sa</code></td></tr><tr><td>IDE テープドライブ</td><td><code class="literal">ast</code></td></tr><tr><td>フラッシュドライブ</td><td><span class="trademark">DiskOnChip</span>® フラッシュデバイスは
	      <code class="literal">fla</code></td></tr><tr><td>RAID ドライブ</td><td><span class="trademark">Adaptec</span>® AdvancedRAID は <code class="literal">aacd</code>, <span class="trademark">Mylex</span>®
	      は <code class="literal">mlxd</code> および <code class="literal">mlyd</code>,
	      AMI <span class="trademark">MegaRAID</span>® は <code class="literal">amrd</code>,
	      Compaq Smart RAID は <code class="literal">idad</code>,
	      <span class="trademark">3ware</span>® RAID は<code class="literal">twed</code></td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-adding"></a>16.3. ディスクの追加</h2></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">O'Brien</span> <span class="firstname">David</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp88862544" class="indexterm"></a><p>現在一つしかドライブがない計算機に新しく SCSI
      ディスクを追加したいとしましょう。まずコンピュータの電源を切り、
      コンピュータやコントローラ、
      ドライブの製造元の説明書に従ってドライブを取り付けます。
      このあたりの手順は非常に多岐にわたるため、
      詳細はこの文書の範囲外です。</p><p><code class="systemitem">root</code> ユーザでログインします。
      ドライブの取り付け後は <code class="filename">/var/run/dmesg.boot</code>
      を調べて新しいディスクが見つかっていることを確認しておきます。
      この例では、新しく付けたドライブは <code class="filename">da1</code> で、
      我々はそれを <code class="filename">/1</code> にマウントしたいとしましょう
      (もし IDE ドライブを付けようとしているのなら、デバイス名は
      4.0 以前のシステムでは <code class="filename">wd1</code>, ほとんどの 4.x
      システムでは <code class="filename">ad1</code> になるでしょう)。</p><a id="idp88866896" class="indexterm"></a><a id="idp88867408" class="indexterm"></a><a id="idp88867920" class="indexterm"></a><p>FreeBSD は IBM-PC 互換のコンピュータで動くため、
      PC BIOS のパーティションを考慮に入れる必要があります。
      これは従来の BSD パーティションとは異なります。PC ディスクは 4 つまでの
      BIOS パーティションエントリを持つことができます。
      もしそのディスクを本当に FreeBSD 専用にしたい場合には
      <span class="emphasis"><em>専用</em></span> モードで用いることもできます。
      そうでない場合には、FreeBSD は PC BIOS
      パーティションのどれか一つの中に入れることになります。
      FreeBSD では、従来の BSD パーティションと混乱しないように
      PC BIOS パーティションのことを<span class="emphasis"><em>スライス</em></span>と呼びます。
      また、別の OS がインストールされていたコンピュータで使われていたが
      FreeBSD 専用にするディスク上でもスライスを用いることができます。
      これは、他の OS の <code class="command">fdisk</code>
      ユーティリティを混乱させないためです。</p><p>スライスの場合、ドライブは <code class="filename">/dev/da1s1e</code>
      として加えられるでしょう。これは、SCSI ディスクでユニット番号は 1
      (二つめの SCSI ディスク), スライスは 1 (PC BIOS のパーティションが 1) で
      BSD パーティション <code class="filename">e</code>, と読みます。
      専用ディスクの場合だと単純に <code class="filename">/dev/da1e</code>
      として加えられるでしょう。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88879952"></a>16.3.1. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> の利用</h3></div></div></div><a id="idp88881232" class="indexterm"></a><a id="idp88882512" class="indexterm"></a><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong><span class="application">sysinstall</span> の操作</strong></p><p><code class="command">sysinstall</code> の使い易いメニューを利用して、
	    新しいディスクのパーティション分けやラベル付けを行なうことができます。
	    <code class="systemitem">root</code> ユーザでログインするか
	    <code class="command">su</code> コマンドを用いるかして root 権限を取得します。
	    <code class="command">/stand/sysinstall</code> を実行して <code class="literal">Configure</code>
	    メニューに入ります。<code class="literal">FreeBSD Configuration Menu</code>
	    の中でスクロールダウンして <code class="literal">Fdisk</code>
	    の項目を選びます。</p></li><li class="step"><p class="title"><strong><span class="application">fdisk</span> パーティションエディタ</strong></p><p><span class="application">fdisk</span> では、ディスク全体を
	    FreeBSD で使うために <strong class="userinput"><code>A</code></strong> を入力します。
	    <span class="quote">「<span class="quote">remain cooperative with any future possible operating systems</span>」</span>
	    と聞かれたら <code class="literal">YES</code> と答えます。
	    <strong class="userinput"><code>W</code></strong> で変更をディスクに書き込みます。ここで
	    <strong class="userinput"><code>q</code></strong> と入力して FDISK エディタを抜けます。
	    次にマスタブートレコードについて聞かれます。
	    ここでは既に動いているシステムにディスクを追加しようとしているので
	    <code class="literal">None</code> を選びます。</p></li><li class="step"><p class="title"><strong>ディスクラベルエディタ</strong></p><a id="idp88892112" class="indexterm"></a><p>次に <span class="application">sysinstall</span> を終了し、
	    もう一度起動する必要があります。同じ手順を踏んで今度は
	    <code class="literal">Label</code> オプションを選択し、
	    <code class="literal">Disk Label Editor</code> に入ります。
	    ここでは従来の BSD パーティションを作成します。
	    一つのディスクは <code class="literal">a</code> から <code class="literal">h</code> までのラベルがついた最大
	    8 つのパーティションを持つことができます。
	    いくつかのパーティションラベルは特別な用途に用いられます。
	    <code class="literal">a</code> パーティションはルートパーティション
	    (<code class="filename">/</code>) です。したがって、システムディスク
	    (つまり起動ディスク) のみに <code class="literal">a</code>
	    パーティションがあるべきです。<code class="literal">b</code>
	    パーティションはスワップパーティションに用いられ、
	    複数のディスクにスワップパーティションを作ることができます。
	    <code class="literal">c</code> は専用モードにおけるディスク全体、
	    もしくはスライスモードにおけるスライス全体を指します。
	    他のパーティションは汎用的に用いられます。</p><p><span class="application">sysinstall</span> のラベルエディタ
	    は、ルートパーティションでもスワップパーティションでもないパーティションには、<code class="literal">e</code>
	    パーティションを採用しようとします。ラベルエディタでファイルシステムを作成するには
	    <strong class="userinput"><code>C</code></strong> を入力してください。
	    FS (ファイルシステム) かスワップかを聞かれたら
	    <code class="literal">FS</code> を選びマウントポイント
	    (たとえば <code class="filename">/mnt</code>) を入力します。
	    インストール後のモードでディスクを追加する場合、
	    <span class="application">sysinstall</span> は
	    <code class="filename">/etc/fstab</code> にエントリを追加しないため、
	    ここで指定するマウントポイントはそれほど重要ではありません。</p><p>さて、ディスクに新しいラベルを書き込み、
	    そこにファイルシステムを作る準備が整いました。早速
	    <code class="command">W</code> を叩いて実行しましょう。
	    <span class="application">sysinstall</span> からの、
	    新しいパーティションをマウントできない、
	    というエラーは無視してください。Label Editor から抜け、
	    <span class="application">sysinstall</span> を終了します。</p></li><li class="step"><p class="title"><strong>終了</strong></p><p>最後に <code class="filename">/etc/fstab</code> を編集し、
	    新しいディスクのエントリを追加します。</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88928080"></a>16.3.2. コマンドラインユーティリティの利用</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88928848"></a>16.3.2.1. スライスの利用</h4></div></div></div><p>このセットアップ方法では、
	  すでにコンピュータに他のオペレーティングシステムがインストールされていても
	  正しく協調動作することが可能で、他のオペレーティングシステムの
	  <code class="command">fdisk</code> ユーティリティを混乱させることもありません。
	  新しいディスクにインストールする場合は、
	  この方法を用いることが推奨されています。
	  後述する <code class="literal">専用モード</code> は、
	  そうしなければならない理由がある時にのみ、
	  利用するようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 bs=1k count=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>fdisk -BI da1</code></strong> # 新しいディスクの初期化
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -B -w -r da1s1 auto</code></strong> # ディスクにラベルを付ける
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -e da1s1</code></strong> # 作成したディスクラベルを編集し、パーティションを追加する
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da1s1e</code></strong> # 作成したすべてのパーティションに対してこれを繰り返す
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/da1s1e /1</code></strong> # パーティションをマウントする
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong> # <code class="filename">/etc/fstab</code> に適切なエントリを追加する</pre><p>IDE ディスクを使う場合は <code class="filename">da</code> の部分を
	  <code class="filename">ad</code> とします。4.X より前のシステムでは、
	  (訳注: <code class="filename">ad</code> ではなく)
	  <code class="filename">wd</code> としてください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88947792"></a>16.3.2.2. 専用モード</h4></div></div></div><a id="idp88948432" class="indexterm"></a><p>新しいドライブを他の OS と共有しない場合には
	  <code class="literal">専用</code> モードを用いることもできます。
	  このモードはマイクロソフトの OS
	  を混乱させることを憶えておいてください
	  (しかし、それらによって壊されることはありません)。 一方、IBM の <span class="trademark">OS/2</span>®
	  はどんなパーティションでも見つけたら理解できなくても
	  <span class="quote">「<span class="quote">専有</span>」</span> します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 bs=1k count=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -Brw da1 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -e da1</code></strong> # `e' パーティションの作成
<code class="prompt">#</code> <strong class="userinput"><code>newfs -d0 /dev/da1e</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong> # /dev/da1e エントリの追加
<code class="prompt">#</code> <strong class="userinput"><code>mount /1</code></strong></pre><p>もう一つの方法は次の通り。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 count=2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel /dev/da1 | disklabel -BrR da1 /dev/stdin</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da1e</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong> # /dev/da1e エントリの追加
<code class="prompt">#</code> <strong class="userinput"><code>mount /1</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.1-RELEASE から、従来の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>
	    プログラムは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	    ユーティリティに置き換えられました。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> では、
	    使用されていない数多くのオプションやパラメタが削除されました。
	    たとえば <code class="option">-r</code> オプションは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	    では取り除かれました。詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	    のマニュアルページを参照してください。</p></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="raid"></a>16.4. RAID</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="raid-soft"></a>16.4.1. ソフトウェア RAID</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd"></a>16.4.1.1. Concatenated Disk Driver (CCD) の設定</h4></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Shumway</span> <span class="firstname">Christopher</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">改訂: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Brown</span> <span class="firstname">Jim</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp89013712" class="indexterm"></a><a id="idp89014864" class="indexterm"></a><p>大容量記録に関する解決法を選択する際にもっとも重視すべき要素は、
	  速度、信頼性、そして費用です。
	  三つを同時にバランスよく実現することは稀です。
	  通常、速くて信頼性のある大容量記録装置は高価であり、
	  費用を抑えようとすると速度または信頼性のどちらかが犠牲になります。</p><p>ここで例にあげるシステムの設計においては、
	  費用が最も重要な要素として、次に速度、最後に信頼性が選択されています。
	  このシステムでのデータ転送速度は結局のところネットワークによって制限されます。
	  信頼性は大変重要です。ただし、以下で説明する CCD ドライブは、
	  データ自体はすでに CD-R に完全にバックアップしてあるもの
	  (したがって交換は簡単にできます)
	  の、オンラインデータの役割をさせています。</p><p>あなた自身の要求事項を決定することは、
	  大容量記録に関する解決法を選択することの最初の段階です。
	  もしあなたの要求事項が費用より速度または信頼性を優先するなら、
	  解決法はこのシステムとは違うものになるでしょう。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-installhw"></a>16.4.1.1.1. ハードウェアのインストール</h5></div></div></div><p>IDE システムディスクに加えて、Western Digital 製の
	    30GB, 5400RPM の IDE ディスク三台を使って、
	    以下に説明されているような約 90GB のオンラインストレージとなる
	    CCD ディスクを作成しました。各 IDE ディスクがそれぞれの
	    IDE コントローラとケーブルをもっていることが理想的ですが、
	    費用を最低限にするために、
	    IDE コントローラを追加していません。その代わり、それぞれの IDE
	    コントローラがマスタデバイスを一つ、
	    スレーブデバイスを一つ持つように、
	    ディスクはジャンパを使って設定されています。</p><p>再起動の際に、システム BIOS
	    が接続されたディスクを自動的に検出するように設定されました。
	    より重要なことは、FreeBSD が再起動の際にそれらを検出することです。</p><pre class="programlisting">ad0: 19574MB &lt;WDC WD205BA&gt; [39770/16/63] at ata0-master UDMA33
ad1: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata0-slave UDMA33
ad2: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata1-master UDMA33
ad3: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata1-slave UDMA33</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD がディスクをすべて検出しないときは、
	      ジャンパを正しく設定してあるか確認してください。多くの IDE
	      ドライブは <span class="quote">「<span class="quote">ケーブルセレクト</span>」</span>
	      ジャンパを持っています。
	      これはマスタ/スレーブの関係を設定するジャンパでは
	      <span class="emphasis"><em>ありません</em></span>。ドライブの文書を参照して、
	      正しいジャンパ設定を見つけてください。</p></div><p>次に、ファイルシステムの一部分として、
	    それらをどのように接続するのかを考慮します。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a>
	    
	    および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
	    の両方を検討すべきでしょう。この設定では、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
	    を選択しました。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-setup"></a>16.4.1.1.2. CCD の設定</h5></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> ドライバは、いくつかの同じディスクを使って、
	    一つの論理的ファイルシステムに連結することができます。
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> を使用するためには、カーネルが <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
	    に対応している必要があります。
	    次の行をカーネルコンフィギュレーションファイルに追加して、
	    カーネルを再構築し、再インストールしてください。</p><pre class="programlisting">pseudo-device   ccd     4</pre><p>5.X システムでは、
	    上記の代わりに次の行を追加しなければなりません。</p><pre class="programlisting">device   ccd</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.X では <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
	      デバイスの数を指定する必要はありません。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
	      デバイスドライバは自己複製するようになりました ―
	      新しいデバイスインスタンスは、
	      必要に応じてその都度自動的に作成されます。</p></div><p>FreeBSD 3.0 以降では、
	    カーネルモジュールを読み込んで
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> に対応することもできます。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> を設定するために、まず <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>
	    を使用してディスクにラベルを書き込まなくてはなりません。</p><pre class="programlisting">disklabel -r -w ad1 auto
disklabel -r -w ad2 auto
disklabel -r -w ad3 auto</pre><p>このコマンドはディスク全体を示す
	    <code class="filename">ad1c</code>,
	    <code class="filename">ad2c</code> および
	    <code class="filename">ad3c</code> に対するディスクラベルを作成します。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.1-RELEASE から、従来の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>
	      プログラムは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	      ユーティリティに置き換えられました。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> では、
	      使用されていない数多くのオプションやパラメタが削除されました。
	      たとえば <code class="option">-r</code> オプションは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	      では取り除かれました。詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	      のマニュアルページを参照してください。</p></div><p>次に、ディスクラベルのタイプを変更します。
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a> を使用してディスクラベルを編集してください。</p><pre class="programlisting">disklabel -e ad1
disklabel -e ad2
disklabel -e ad3</pre><p>このコマンドは <code class="envar">EDITOR</code>
	    環境変数に設定されているエディタ (一般的には <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a>)
	    でそれぞれのディスクの現在のディスクラベルを開きます。</p><p>変更されていないディスクラベルは以下のようになります。</p><pre class="programlisting">8 partitions:
#        size   offset    fstype   [fsize bsize bps/cpg]
  c: 60074784        0    unused        0     0     0   # (Cyl.    0 - 59597)</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> で使用する <code class="literal">e</code>
	    パーティションを作成します。通常では <code class="literal">c</code>
	    パーティションの行をコピーすれば良いでしょう。しかし、
	    <code class="option">fstype</code> は <strong class="userinput"><code>4.2BSD</code></strong>
	    でなければ <span class="emphasis"><em>なりません</em></span>。
	    ディスクラベルは以下のようになるでしょう。</p><pre class="programlisting">8 partitions:
#        size   offset    fstype   [fsize bsize bps/cpg]
  c: 60074784        0    unused        0     0     0   # (Cyl.    0 - 59597)
  e: 60074784        0    4.2BSD        0     0     0   # (Cyl.    0 - 59597)</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-buildingfs"></a>16.4.1.1.3. ファイルシステムの構築</h5></div></div></div><p><code class="filename">ccd0c</code>
	    デバイスノードはまだ存在していないかも知れません。
	    そのときは、次のコマンドを実行して作成してください。</p><pre class="programlisting">cd /dev
sh MAKEDEV ccd0</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.0 では <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> が
	      <code class="filename">/dev</code> 以下のデバイスノードを自動的に管理するので、
	      <code class="command">MAKEDEV</code>を使用する必要はありません。</p></div><p>すべてのディスクにラベルを書き込んだので、
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> を構築してください。
	    これを行うためには、以下のようなオプションで
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a> を使います。</p><pre class="programlisting">ccdconfig ccd0<a id="co-ccd-dev"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span> 32<a id="co-ccd-interleave"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span> 0<a id="co-ccd-flags"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span> /dev/ad1e<a id="co-ccd-devs"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span> /dev/ad2e /dev/ad3e</pre><p>各オプションの使用法と意味は以下の通りです。</p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-dev"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>一番目の引数は設定するデバイスです。この例の場合は
		<code class="filename">/dev/ccd0c</code> です。
		<code class="filename">/dev/</code> の部分はオプションです。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-interleave"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>ファイルシステムに対するインタリーブです。インタリーブは、
		ディスクブロック内のストライプサイズを定義します。
		ディスクブロックは通常 512 バイトです。したがって 32
		インタリーブは 16,384 バイトとなります。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-flags"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>これは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a> に対するフラグです。
		ドライブミラーリングを有効にしたい場合、
		ここにフラグを指定します。
		この設定では <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> に対するミラーリングは提供しませんので、
		0 (ゼロ) を指定しています。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-devs"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>この <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a> に対する最後の引数は、
		アレイ内に置くデバイスです。
		それぞれのデバイスに対する完全なパス名を使用します。</p></td></tr></table></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a> を実行すると <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> が設定されます。
	    これでファイルシステムをインストールすることが可能です。
	    オプションについて <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> を参照するか、
	    次のように実行してください。</p><pre class="programlisting">newfs /dev/ccd0c</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-auto"></a>16.4.1.1.4. 自動的に設定する</h5></div></div></div><p>一般的に、再起動するたびに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
	    をマウントしたいと思うでしょう。これを行うために、
	    まず設定をしなければなりません。次のコマンドを用いて、
	    現在の設定を <code class="filename">/etc/ccd.conf</code> に書き出します。</p><pre class="programlisting">ccdconfig -g &gt; /etc/ccd.conf</pre><p><code class="filename">/etc/ccd.conf</code> が存在すると、
	    再起動の際に <code class="command">/etc/rc</code> スクリプトが
	    <code class="command">ccdconfig -C</code> を実行します。これにより、
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> は自動的に設定された後、マウントされます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">シングルユーザモードで起動している場合には、
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> を <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> する前に、
	      アレイを設定するために次のコマンドを実行する必要があります。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">ccdconfig -C</pre></div><p>自動的に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> をマウントするには、
	    <code class="filename">/etc/fstab</code> に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
	    のエントリ追加します。このように設定すると起動時にマウントされます。</p><pre class="programlisting">/dev/ccd0c              /media       ufs     rw      2       2</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="vinum"></a>16.4.1.2. Vinum ボリュームマネージャ</h4></div></div></div><a id="idp89147472" class="indexterm"></a><a id="idp89148624" class="indexterm"></a><p>Vinum ボリュームマネージャは、
	  仮想ディスクドライブを実装したブロックデバイスドライバです。
	  Vinum は、ディスクハードウェアをブロックデバイスインタフェースから
	  分離し、データを配置します。
	  その結果、ディスク記憶装置を従来のスライスで扱うのと比較して、
	  柔軟性、性能および信頼性が向上しています。
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a> は RAID-0, RAID-1 および RAID-5 モデル、
	  そしてそれぞれの組合せを実装しています。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a> の詳細については Vinum ボリュームマネジャ
	  
	  を参照してください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="raid-hard"></a>16.4.2. ハードウェア RAID</h3></div></div></div><a id="idp89153488" class="indexterm"></a><p>FreeBSD は、さまざまなハードウェア <acronym class="acronym">RAID</acronym>
	コントローラにも対応しています。これらのデバイスはアレイを制御するための
	特別なソフトウェアを FreeBSD で必要することなく、
	<acronym class="acronym">RAID</acronym> サブシステムを制御します。</p><p>カード上の <acronym class="acronym">BIOS</acronym> を使用して、
	カードはそれ自身でディスク操作のほとんどを制御します。以下は
	<acronym class="acronym">Promise IDE RAID</acronym>
	コントローラを使用した設定の簡単な説明です。
	このカードがインストールされ、システムが起動したときには、
	情報の入力を促すプロンプトを表示します。
	指示にしたがってカードの設定画面に進んでください。
	接続されたドライブを組み合わせるように設定することができます。
	設定後、ディスクは FreeBSD に対して単一のドライブのように見えます。
	他の <acronym class="acronym">RAID</acronym> レベルは適宜設定できます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89157584"></a>16.4.3. ATA RAID1 アレイの再構築</h3></div></div></div><p>FreeBSD はアレイ内の障害ディスクを動作中に交換できます。
	ただし、再起動前にそれを検知していることが必要です。</p><p><code class="filename">/var/log/messages</code> または <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>
	の出力に次のような行があるでしょう。</p><pre class="programlisting">ad6 on monster1 suffered a hard error.
ad6: READ command timeout tag=0 serv=0 - resetting
ad6: trying fallback to PIO mode
ata3: resetting devices .. done
ad6: hard error reading fsbn 1116119 of 0-7 (ad6 bn 1116119; cn 1107 tn 4 sn 11) status=59 error=40
ar0: WARNING - mirror lost</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atacontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">atacontrol</span>(8)</span></a> を使用して詳細を調べてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol list</code></strong>
ATA channel 0:
	Master:      no device present
	Slave:   acd0 &lt;HL-DT-ST CD-ROM GCR-8520B/1.00&gt; ATA/ATAPI rev 0

ATA channel 1:
	Master:      no device present
	Slave:       no device present

ATA channel 2:
	Master:  ad4 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
	Slave:       no device present

ATA channel 3:
	Master:  ad6 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
	Slave:       no device present

<code class="prompt">#</code> <strong class="userinput"><code>atacontrol status ar0</code></strong>
ar0: ATA RAID1 subdisks: ad4 ad6 status: DEGRADED</pre><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>ディスクを安全に取り外すために、
	    まずアレイから切り離します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol detach 3</code></strong></pre></li><li class="step"><p>ディスクを取り外します。</p></li><li class="step"><p>スペアのディスクを取り付けます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol attach 3</code></strong>
Master:  ad6 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
Slave:   no device present</pre></li><li class="step"><p>アレイを再構築します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol rebuild ar0</code></strong></pre></li><li class="step"><p>再構築コマンドは完了するまで他の操作を受け付けません。しかし、
	    もう一つ別のターミナルを
	    (<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F<em class="replaceable"><code>n</code></em></strong></span>
	    を押して) 開き、
	    次のコマンドを実行すると進行状態を確認することができます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dmesg | tail -10</code></strong>
[output removed]
ad6: removed from configuration
ad6: deleted from ar0 disk1
ad6: inserted into ar0 disk1 as spare

<code class="prompt">#</code> <strong class="userinput"><code>atacontrol status ar0</code></strong>
ar0: ATA RAID1 subdisks: ad4 ad6 status: REBUILDING 0% completed</pre></li><li class="step"><p>操作が完了するまでお待ちください。</p></li></ol></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="creating-cds"></a>16.5. 光メディア (CD &amp; DVD) の作成と使用</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Meyer</span> <span class="firstname">Mike</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp89185744" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89187024"></a>16.5.1. はじめに</h3></div></div></div><p>CD は他の一般的なディスクと異なる様々な特徴を持っています。
	そもそもユーザが書き込むことができません。
	また遅延なしで連続的に読み出せるように、
	トラック間をヘッドが移動しないですむようにデザインされています。
	さらにこのサイズのメディアの中ではシステムをまたぐデータの
	移動が比較的簡単でもあります。</p><p>CD はトラックの概念を持っていますが、
	これはデータを連続的に読み出すためのものであってディスクの物理特性ではありません。
	FreeBSD で CD を作成するには、まず CD
	のトラックとなるデータファイルを用意し、
	そのトラックを CD に書き込みます。</p><a id="idp89188432" class="indexterm"></a><a id="idp89188944" class="indexterm"></a><p>ISO 9660 ファイルシステムはこの様な差異を扱うべく設計されました。
	その結果、ファイルシステムは一般的に使用するのに差しつかえない程度に
	制限されて標準化されています。幸いなことに、ISO 9660
	ファイルシステムには拡張機構が提供されています。適切に書かれた CD は、
	拡張機構に対応したシステムでは拡張を利用して、そうでないシステムでは
	拡張機構を使用しない範囲で動作するようになっています。</p><a id="idp89190480" class="indexterm"></a><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/mkisofs/pkg-descr">sysutils/mkisofs</a> プログラムは
	ISO 9660 ファイルシステムを含むデータファイルを作成するのに使われます。
	これには様々な拡張をサポートするオプションがあり、
	以下で説明します。 このソフトウェアは、ports の
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/mkisofs/pkg-descr">sysutils/mkisofs</a>
	からインストールすることができます。</p><a id="idp89192528" class="indexterm"></a><p>CD に書き込むためのツールは、お使いの CD ライタが ATAPI
	接続か否かにも依存します。ATAPI CD ライタなら、ベースシステムの一部である
	<code class="command">burncd</code>
	プログラムを使います。SCSI や USB の CD ライタなら、ports の
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrecord/pkg-descr">sysutils/cdrecord</a>
	をインストールして
	<code class="command">cdrecord</code>
	プログラムを使うべきでしょう。</p><p><code class="command">burncd</code>
	が対応しているドライブは限定されています。
	ドライブが対応されているかどうかを確認するには、
	<a class="link" href="http://www.freebsd.dk/ata/" target="_top">CD-R/RW supported
	  drives</a> にある一覧を見てください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp89204944" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.X または FreeBSD 4.8-RELEASE
	  以降のバージョンを使用している場合、
	  <a class="link" href="#atapicam" title="16.5.9. ATAPI/CAM ドライバの使用">ATAPI/CAM モジュール</a> を使用すると
	  ATAPI ハードウェア上で SCSI ドライブ用の
	  <code class="command">cdrecord</code>
	  および他のツールを使用できるようになります。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mkisofs"></a>16.5.2. mkisofs</h3></div></div></div><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/mkisofs/pkg-descr">sysutils/mkisofs</a> は <span class="trademark">UNIX</span>®
	ファイルシステムの名前空間におけるディレクトリツリーのイメージとして
	ISO 9660 ファイルシステムを作成します。
	最も簡単な使い方は以下の通りです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkisofs -o imagefile.iso /path/to/tree</code></strong></pre><a id="idp89210448" class="indexterm"></a><p>このコマンドは <em class="replaceable"><code>/path/to/tree</code></em>
	以下のディレクトリツリーのコピーである ISO 9660
	ファイルシステムを含んだ <em class="replaceable"><code>imagefile.iso</code></em>
	ファイルを作成します。この過程において、ファイル名は標準的な ISO 9660
	ファイルシステムの制限に適合するようなファイル名に対応づけられ、
	ISO ファイルシステムでファイル名を文字化できないファイルは除外されます。</p><a id="idp89216976" class="indexterm"></a><a id="idp89218128" class="indexterm"></a><p>この制限を回避するために利用できるオプションはいくつもあります。
	特に <code class="option">-R</code> オプションは <span class="trademark">UNIX</span>® システムで標準的な Rock Ridge
	拡張を有効にします。<code class="option">-J</code> オプションは Microsoft
	のシステムで標準的な Joliet 拡張を有効にし、
	<code class="option">-hfs</code> オプションは <span class="trademark">Mac OS</span>® で使用されている
	HFS ファイルシステムを作成するために使われます。</p><p>FreeBSD でしか使わないのであれば、<code class="option">-U</code>
	オプションを使用するとあらゆるファイル名制限を無効にできます。
	さらに <code class="option">-R</code> オプションとともに使うことで
	FreeBSD と同一のファイルシステムイメージを作成できますが、
	これは ISO 9660 標準の多くを無視しています。</p><a id="idp89222992" class="indexterm"></a><p>一般的に使われる最後のオプションは <code class="option">-b</code> オプションです。
	これは <span class="quote">「<span class="quote">El Torito</span>」</span>	ブータブル CD
	を作成するのに使う起動イメージのありかを指定します。
	このオプションは引数として起動イメージへのパスを、
	CD に書き込まれるディレクトリツリーの頂点からの相対位置で取ります。
	したがって <code class="filename">/tmp/myboot</code> がブート可能な
	FreeBSD システムで <code class="filename">/tmp/myboot/boot/cdboot</code>
	にブートイメージがあるならば、以下のようにすることで ISO 9660
	ファイルシステムのイメージを <code class="filename">/tmp/bootable.iso</code>
	に作成することができます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkisofs -U -R -b boot/cdboot -o /tmp/bootable.iso /tmp/myboot</code></strong></pre><p>この後、カーネルで <code class="filename">vn</code> (FreeBSD 4.X)
	または <code class="filename">md</code> (FreeBSD 5.X)
	が設定されていれば、
	ファイルシステムを以下のようにしてマウントすることができます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vnconfig -e vn0c /tmp/bootable.iso</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -t cd9660 /dev/vn0c /mnt</code></strong></pre><p>FreeBSD 4.X および FreeBSD 5.X に対しては以下の通りです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f /tmp/bootable.iso -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -t cd9660 /dev/md0 /mnt</code></strong></pre><p><code class="filename">/mnt</code> と
	<code class="filename">/tmp/myboot</code> が同一かどうか確認してください。</p><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/mkisofs/pkg-descr">sysutils/mkisofs</a>
      には挙動を細かく制御するために他にもたくさんのオプションがあります。
      特に、ISO 9660
      レイアウトの変更や Joliet および HFS ディスク作成などの
      詳細は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> のマニュアルページをご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="burncd"></a>16.5.3. burncd</h3></div></div></div><a id="idp89240016" class="indexterm"></a><p>あなたが持っているのが ATAPI CD ライタなら、CD に ISO
	イメージを書き込むために <code class="command">burncd</code> コマンドが使えます。
	<code class="command">burncd</code> はベースシステムの一部で
	<code class="filename">/usr/sbin/burncd</code> としてインストールされています。
	使い方はとても単純でオプションも少ししかありません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>burncd -f cddevice data imagefile.iso fixate</code></strong></pre><p>以上のコマンドは <em class="replaceable"><code>imagefile.iso</code></em>
	のコピーを <em class="replaceable"><code>cddevice</code></em> に書き込みます。
	デフォルトのデバイスは <code class="filename">/dev/acd0c</code> です。
	書き込み速度や操作完了後に CD を自動的に取り出す方法、
	オーディオデータの書き込みなどのオプションについては <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=burncd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">burncd</span>(8)</span></a>
	を見てください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cdrecord"></a>16.5.4. cdrecord</h3></div></div></div><p>あなたが持っている CD ライタが ATAPI ではなければ、
	CD を書き込むのに <code class="command">cdrecord</code> を使う必要があります。
	<code class="command">cdrecord</code> はベースシステムの一部ではなく、
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a> の port または
	適切な package を利用してインストールしなければなりません。
	なお、ベースシステムを変更するとバイナリに矛盾が発生し、
	<span class="quote">「<span class="quote">コースター</span>」</span> を作ってしまうおそれがあります。
	したがって、システムをアップグレードする度にこの port も作り直すか、
	あるいは<a class="link" href="#stable" title="18.4.2. FreeBSD-STABLE を使う">FreeBSD の安定版を追いかけている</a>のならば、
	新しいバージョンが利用できるようになった時に ports
	をアップグレードする必要があります。</p><p><code class="command">cdrecord</code> にはたくさんのオプションがありますが、
	基本的な使い方は <code class="command">burncd</code> よりもさらに簡単です。
	ISO 9660 イメージを書き込むには以下のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdrecord dev=device imagefile.iso</code></strong></pre><p><code class="command">cdrecord</code> のトリッキーな部分は、使用する
	<code class="option">dev</code> を見つけるところにあります。
	適切な設定を見つけるためには <code class="command">cdrecord</code> の
	<code class="option">-scanbus</code> フラグを使います。
	たとえば、以下のような結果が出力されるでしょう。</p><a id="idp89257424" class="indexterm"></a><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdrecord -scanbus</code></strong>
Cdrecord 1.9 (i386-unknown-freebsd4.2) Copyright (C) 1995-2000 Jörg Schilling
Using libscg version 'schily-0.1'
scsibus0:
        0,0,0     0) 'SEAGATE ' 'ST39236LW       ' '0004' Disk
        0,1,0     1) 'SEAGATE ' 'ST39173W        ' '5958' Disk
        0,2,0     2) *
        0,3,0     3) 'iomega  ' 'jaz 1GB         ' 'J.86' Removable Disk
        0,4,0     4) 'NEC     ' 'CD-ROM DRIVE:466' '1.26' Removable CD-ROM
        0,5,0     5) *
        0,6,0     6) *
        0,7,0     7) *
scsibus1:
        1,0,0   100) *
        1,1,0   101) *
        1,2,0   102) *
        1,3,0   103) *
        1,4,0   104) *
        1,5,0   105) 'YAMAHA  ' 'CRW4260         ' '1.0q' Removable CD-ROM
        1,6,0   106) 'ARTEC   ' 'AM12S           ' '1.06' Scanner
        1,7,0   107) *</pre><p>リストにあるデバイスに対する適切な <code class="option">dev</code>
	の値がここに示されています。あなたの CD ライタをこのリストから見つけ、
	カンマで区切られた 3 つの数値を <code class="option">dev</code>
	の値として使ってください。この例では CRW デバイスは 1,5,0
	なので、適切な入力は <code class="option">dev=1,5,0</code> となります。
	値を明示するもっと簡単な方法もあります。詳細は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdrecord&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdrecord</span>(1)</span></a>
	を見てください。そこにはオーディオトラックを書き込む方法や、
	書き込み速度その他を操作する方法も書かれています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="duplicating-audiocds"></a>16.5.5. オーディオ CD の複製</h3></div></div></div><p>CD からオーディオデータを連続したファイルに展開し、ブランク CD
	にこれらのファイルを書き込むことで、オーディオ CD
	を複製することができます。
	この手順は ATAPI および SCSI ドライブの間で少し異なります。</p><div class="procedure"><a id="idp89263312"></a><div class="procedure-title">手順16.1 SCSI ドライブ</div><ol class="procedure" type="1"><li class="step"><p><code class="command">cdda2wav</code> を使用してオーディオを展開します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cdda2wav -v255 -D2,0 -B -Owav</code></strong></pre></li><li class="step"><p><code class="command">cdrecord</code> を使用して
	    <code class="filename">.wav</code> ファイルに書き出します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cdrecord -v dev=2,0 -dao -useinfo  *.wav</code></strong></pre><p><a class="xref" href="#cdrecord" title="16.5.4. cdrecord">「cdrecord」</a> に説明されているように
	    <em class="replaceable"><code>2.0</code></em>
	    が適切に指定されていることを確かめてください。</p></li></ol></div><div class="procedure"><a id="idp89273552"></a><div class="procedure-title">手順16.2 ATAPI ドライブ</div><ol class="procedure" type="1"><li class="step"><p>ATAPI CD ドライバでは、それぞれのトラックを
	    <code class="filename">/dev/acddtnn</code> のように利用できます。
	    ここで <em class="replaceable"><code>d</code></em> はドライブ番号であり、
	    <em class="replaceable"><code>nn</code></em> は二桁十進のトラック番号です。
	    一桁の場合 0 を前に付加する必要があります。
	    したがって、一番目のディスクの一番目のトラックは
	    <code class="filename">/dev/acd0t01</code>、二番目のトラックは
	    <code class="filename">/dev/acd0t02</code>、三番目のトラックは
	    <code class="filename">/dev/acd0t03</code> などとなります。</p><p>適切なデバイスファイルが <code class="filename">/dev</code>
	    に存在することを確かめてください。
	    存在しなければ、たとえば次のようにして作成します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /dev</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sh MAKEDEV acd0t99</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.0 では <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> が
	      <code class="filename">/dev</code> にエントリを自動的に作成、
	      管理するので、<code class="command">MAKEDEV</code>
	      を使用する必要はありません。</p></div></li><li class="step"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a> を使用して各トラックを展開します。
	    ファイルを展開する際、ブロックサイズを指定しなければなりません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/acd0t01 of=track1.cdr bs=2352</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/acd0t02 of=track2.cdr bs=2352</code></strong>
...</pre></li><li class="step"><p><code class="command">burncd</code> を使用して、
	    展開したファイルをディスクに書き込みます。
	    これらがオーディオファイルであること、
	    そして書き込みが終了したときに <code class="command">burncd</code>
	    がディスクを固定 (fixate) することを明示しなければなりません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>burncd -f /dev/acd0c audio track1.cdr track2.cdr ... fixate</code></strong></pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="imaging-cd"></a>16.5.6. データ CD の複製</h3></div></div></div><p>データ CD を、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/mkisofs/pkg-descr">sysutils/mkisofs</a>
	を用いて作成されたイメージファイルと機能的に等価なイメージファイルにコピーできます。
	これを使用して、すべてのデータ CD を複製することができます。
	ここでの例は CDROM デバイスが <code class="filename">acd0</code>
	であるとしています。あなたの CDROM デバイスに読み替えてください。
	CDROM の場合には、パーティション全体またはディスク全体
	を指定するために <code class="literal">c</code>
	をデバイス名の後に追加しなければなりません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/acd0c of=file.iso bs=2048</code></strong></pre><p>これでディスクイメージを取り出すことができました。
	すでに説明した方法を用いて CD に書き込むことができます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mounting-cd"></a>16.5.7. データ CD の使用</h3></div></div></div><p>さて、標準的なデータ CDROM を作成したので、
	おそらく次はそれをマウントしてデータを読み出したいと思うでしょう。
	デフォルトでは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> は、ファイルシステムタイプを
	<code class="literal">ufs</code> としています。
	次のように実行しようとすると、</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/cd0c /mnt</code></strong></pre><p><span class="errorname">Incorrect super block</span>
	というエラーが返されてマウントできないでしょう。
	CDROM は <code class="literal">UFS</code> ファイルシステムではないために、
	このような手順でマウントしようすると失敗します。
	ファイルシステムのタイプが <code class="literal">ISO9660</code> であると
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> に教えさえすれば、すべてはうまく動作します。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> に <code class="option">-t cd9660</code>
	オプションを指定することでこれを行います。
	たとえば <code class="filename">/dev/cd0c</code> の CDROM デバイスを
	<code class="filename">/mnt</code> にマウントしたい場合は、
	以下のように実行します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t cd9660 /dev/cd0c /mnt</code></strong></pre><p>使用している CDROM インタフェースによっては、
	デバイス名
	(この例では <code class="filename">/dev/cd0c</code>)
	が異なるかもしれないことに注意してください。
	また、<code class="option">-t cd9660</code> オプションは、単に
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_cd9660&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_cd9660</span>(8)</span></a> を実行します。
	この例を以下のように短縮することもできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount_cd9660 /dev/cd0c /mnt</code></strong></pre><p>一般的にこの方法では、すべてのメーカの データ CDROM
	を使用することができます。しかしながら、特定の ISO 9660
	拡張が施されたディスクでは奇妙な動作をするかもしれません。
	たとえば Joliet ディスクは、
	すべてのファイル名を 2 バイトの Unicode 文字で格納します。
	FreeBSD カーネルは (まだ) Unicode を理解できないので、
	非英語文字はクエスチョンマークで表示されます
	(FreeBSD 4.3 以降を使用している場合、CD9660 ドライバには適切な Unicode
	変換表を読み込むための急ごしらえのフックが含まれています。
	いくつかの共通のエンコードに対するモジュールは
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cd9660_unicode/pkg-descr">sysutils/cd9660_unicode</a> port
	から利用可能です)。</p><p>CDROM をマウントしようとする時に、
	<span class="errorname">Device not configured</span>
	と表示されるかもしれません。これは、ディスクがトレーにないと
	CDROM ドライブが判断しているか、
	ドライブがバス上に認識できないことを通常意味します。
	ディスクが挿入されたことを CDROM ドライブが認識するには数秒かかりますので、
	辛抱強く待ってください。</p><p>バスのリセットに返答するためのタイムアウトが短いために、時々 SCSI
	CDROM は認識に失敗するかもしれません。SCSI CDROM を持っている場合は、
	次のオプションをカーネルコンフィギュレーションファイルに追加して、
	<a class="link" href="#kernelconfig-building" title="9.5. カスタムカーネルの構築とインストール">カーネルを再構築してください</a>。</p><pre class="programlisting">options SCSI_DELAY=15000</pre><p>これより、SCSI バスを起動時に 15 秒間停止させて、
	CDROM ドライブがバスリセットに応答する機会を与えます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rawdata-cd"></a>16.5.8. Raw データ CD の書き込み</h3></div></div></div><p>ISO 9660 ファイルシステムを作成すること無く、
	ファイルを直接 CD に書き込むこともできます。
	この方法をバックアップ目的に使用している人もいます。
	これは、標準 CD を書き込むよりもさらに速く実行することができます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>burncd -f /dev/acd1c -s 12 data archive.tar.gz fixate</code></strong></pre><p>このように CD に書き込まれたデータを取得するには、
	raw デバイスノードからデータを読み込まなくてはなりません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar xzvf /dev/acd1c</code></strong></pre><p>このディスクを通常の CDROM としてマウントすることはできません。
	このような CDROM は FreeBSD を除いて、
	他のすべてのオペレーティングシステムでは読み込むことはできません。
	CD をマウントしたいか、
	その他のオペレーティングシステムとデータを共有したい場合は、
	上記に説明したように
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/mkisofs/pkg-descr">sysutils/mkisofs</a>
	を使用しなくてはなりません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="atapicam"></a>16.5.9. ATAPI/CAM ドライバの使用</h3></div></div></div><a id="idp89352272" class="indexterm"></a><p>このドライバは、ATAPI デバイス (CD-ROM, CD-RW, DVD ドライブなど)
	へ SCSI サブシステムを通じてアクセスすることを可能にします。
	これにより、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrdao/pkg-descr">sysutils/cdrdao</a> または
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdrecord&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdrecord</span>(1)</span></a> のようなアプリケーションが使用できるようになります。</p><p>このドライバを使用するためには、
	カーネルコンフィギュレーションファイルに次の行を追加する必要があります。</p><pre class="programlisting">device atapicam
device scbus
device cd
device pass</pre><p>次の行もカーネルコンフィギュレーションファイルに必要です。</p><pre class="programlisting">device ata
device atapicd</pre><p>両方がすでに存在しなければなりません。</p><p>それから再構築し、新しいカーネルをインストールし、
	コンピュータを再起動します。
	起動プロセス中にディスクライタは以下のように表示されるでしょう。</p><pre class="screen">acd0: CD-RW &lt;MATSHITA CD-RW/DVD-ROM UJDA740&gt; at ata1-master PIO4
cd0 at ata1 bus 0 target 0 lun 0
cd0: &lt;MATSHITA CDRW/DVD UJDA740 1.00&gt; Removable CD-ROM SCSI-0 device
cd0: 16.000MB/s transfers
cd0: Attempt to query device size failed: NOT READY, Medium not present - tray closed</pre><p>ドライブは <code class="filename">/dev/cd0</code>
	デバイスを通じてアクセスすることが可能となります。
	たとえば、次のようにして CD-ROM を <code class="filename">/mnt</code>
	にマウントします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t cd9660 /dev/cd0c /mnt</code></strong></pre><p><code class="systemitem">root</code> 権限で次のコマンドを実行して、
	ライタの SCSI アドレスを得ることができます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol devlist</code></strong>
&lt;MATSHITA CDRW/DVD UJDA740 1.00&gt;   at scbus1 target 0 lun 0 (pass0,cd0)</pre><p>したがって、<code class="literal">1,0,0</code> が <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdrecord&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdrecord</span>(1)</span></a>
	およびその他の SCSI アプリケーションで使用する SCSI アドレスです。</p><p>ATAPI/CAM および SCSI システムの詳細は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atapicam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atapicam</span>(4)</span></a> および
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">cam</span>(4)</span></a> マニュアルページを参照してください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="floppies"></a>16.6. フロッピーディスクの作成と使用</h2></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Merino</span> <span class="firstname">Julio</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">改訂: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Karlsson</span> <span class="firstname">Martin</span> [FAMILY Given]</span>. </span></div></div></div><p>フロッピーディスクにデータを格納することはしばしば役にたちます。
      たとえば、ある人が他のリムーバブル記録メディアを何も持っていないときや、
      小さなデータを他のコンピュータに移動させる必要があるときです。</p><p>この節では、FreeBSD におけるフロッピーディスクの使用方法を説明します。
      主に 3.5 インチの DOS フロッピーのフォーマットと操作方法を扱いますが、
      他のフロッピーディスクの形式についても概念は似ています。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89382864"></a>16.6.1. フロッピーのフォーマット</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89383504"></a>16.6.1.1. デバイス</h4></div></div></div><p>他のデバイスと同様に、フロッピーディスクは
	  <code class="filename">/dev</code> にあるエントリを通じてアクセスされます。4.X
	  およびそれ以前のリリースにおいて raw
	  フロッピーディスクにアクセスするには
	  <code class="filename">/dev/fdN</code>
	  または <code class="filename">/dev/fdNX</code>
	  を使用します。<em class="replaceable"><code>N</code></em> はドライブ番号を表し、
	  大抵は 0 です。<em class="replaceable"><code>X</code></em> は文字を表します。</p><p>5.0 およびそれ以降のリリースでは、単に
	  <code class="filename">/dev/fdN</code> を使用します。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89391696"></a>16.6.1.1.1. 4.X およびそれ以前のリリースでのディスクサイズ</h5></div></div></div><p><code class="filename">/dev/fdN.size</code> というデバイスもあります。
	    <em class="replaceable"><code>size</code></em>
	    はフロッピーディスクのサイズをキロバイトで示したものです。
	    これらのエントリは低レベルフォーマットの際に、
	    ディスクサイズを決定するのに使用されます。
	    1440kB は以下の例で使用されるサイズです。</p><p>時々 <code class="filename">/dev</code> 下のエントリは (再)
	    作成されなければなりません。次のコマンドでこれを行います。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /dev &amp;&amp; ./MAKEDEV "fd*"</code></strong></pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89395152"></a>16.6.1.1.2. 5.X およびそれ以降のリリースでのディスクサイズ</h5></div></div></div><p>FreeBSD 5.0 では <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> が
	    <code class="filename">/dev</code> 内のエントリを自動的に管理するので、
	    <code class="command">MAKEDEV</code>を使用する必要はありません。</p><p>所望のディスクサイズは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdformat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">fdformat</span>(1)</span></a> に <code class="option">-f</code>
	    フラグを通して渡されます。対応しているサイズは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdcontrol</span>(8)</span></a>
	    のマニュアルページに掲載されていますが、最良に動作するのは
	    1440kB だと助言しておきます。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89404752"></a>16.6.1.2. フォーマット</h4></div></div></div><p>フロッピーディスクは、
	  使用前に低レベルフォーマットをする必要があります。
	  通常、ベンダは低レベルフォーマット済みのディスクを出荷していますが、
	  フォーマットはメディアの品質を確認するよい方法です。
	  より大きな (または小さな) ディスクサイズにすることも可能ですが、
	  ほとんどのフロッピーディスクのサイズは 1440kB で動作するように設計されています。</p><p>フロッピーディスクを低レベルフォーマットするには
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdformat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">fdformat</span>(1)</span></a> を使用する必要があります。
	  このユーティリティは引数としてデバイス名を指定します。</p><p>ディスクが良好かあるいは不良であるかを決定するのに役立つので、
	  エラーメッセージをすべてメモに取っておいてください。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89407312"></a>16.6.1.2.1. 4.X 以前のリリースでのフォーマット</h5></div></div></div><p><code class="filename">/dev/fdN.size</code> デバイスを使ってフロッピーをフォーマットします。
	    新しい 3.5 インチフロッピーディスクをドライブに挿入し、
	    以下のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/sbin/fdformat /dev/fd0.1440</code></strong></pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89409616"></a>16.6.1.2.2. 5.0 以降のリリースでのフォーマット</h5></div></div></div><p><code class="filename">/dev/fdN</code>
	    デバイスを使用してフロッピーをフォーマットします。
	    新しい 3.5 インチフロッピーディスクをドライブに挿入し、
	    以下のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/sbin/fdformat -f 1440 /dev/fd0</code></strong></pre></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89424592"></a>16.6.2. ディスクラベル</h3></div></div></div><p>ディスクを低レベルフォーマットしたら、
	次にディスクラベルを作成する必要があります。
	ディスクラベルは後で破棄されますが、
	システムがディスクのサイズとジオメトリを決定するのに必要になります。</p><p>新しいディスクラベルはディスク全体を引き継ぎ、
	フロッピーのジオメトリに関する適切な情報のすべてが含まれます。
	ディスクラベルに対するジオメトリの値は
	<code class="filename">/etc/disktab</code> に掲載されています。</p><p>次のように <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a> を実行できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/disklabel -B -r -w /dev/fd0 fd1440</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.1-RELEASE から、従来の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>
	  プログラムは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	  ユーティリティに置き換えられました。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> では、
	  使用されていないオプションおよびパラメタの数多くが削除されました。
	  たとえば <code class="option">-r</code> オプションは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	  では取り除かれました。詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	  マニュアルページを参照してください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89437904"></a>16.6.3. ファイルシステム</h3></div></div></div><p>これでフロッピーを高レベルフォーマットする準備ができました。これは
	FreeBSD がディスクを読み書きする新しいファイルシステムを作成します。
	新しいファイルシステムを作成するとディスクラベルは破棄されます。
	したがって、ディスクを再フォーマットするときには、
	ディスクラベルを再作成しなくてはなりません。</p><p>フロッピーのファイルシステムには UFS または FAT を使用できます。
	フロッピーに対しては FAT が一般的によりよい選択です。</p><p>フロッピー上に新しいファイルシステムを作成するには次のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/newfs_msdos /dev/fd0</code></strong></pre><p>これでディスクが使用できるようになりました。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89441104"></a>16.6.4. フロッピーの使用</h3></div></div></div><p>フロッピーを使用するために、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdos&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdos</span>(8)</span></a>
	(4.X 以前のリリース) または <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a>
	(5.0 以後のリリース) を用いてマウントします。
	Ports Collection から
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/mtools/pkg-descr">emulators/mtools</a>
	を使用することもできます。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="backups-tapebackups"></a>16.7. データテープの作成と使用</h2></div></div></div><a id="idp89449296" class="indexterm"></a><p>一般的なテープメディアには 4mm, 8mm, QIC, ミニカートリッジ、
      DLT があります。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-tapebackups-4mm"></a>16.7.1. 4mm (DDS: Digital Data Storage)</h3></div></div></div><a id="idp89450960" class="indexterm"></a><a id="idp89452112" class="indexterm"></a><p>4mm テープはワークステーションのバックアップメディアとして
	QIC に取って代わりつつあります。この傾向は
	QIC ドライブの主要なメーカであった Archive を Conner が買収し
	QIC ドライブの製造を中止したことで加速しました。
	4mm ドライブは小型で静かですが 8mm
	ドライブが持っている信頼性ほど、その評判は良くありません。
	また、4mm カートリッジは 8mm カートリッジよりも安価で小型
	(3 x 2 x 0.5 インチ、76 x 51 x 12 mm) になっています。
	ただし、8mm と同様に、4mm のヘッドはヘリカルスキャン方式
	(訳注: VTR と同様の回転ヘッドを使う方式)
	を採用しているため、比較的寿命が短いです。</p><p>ドライブのデータスループットは、150 kB/s から
	最大で 500 kB/s 程度です。	データ容量は 1.3 GB から
	2.0 GB です。
	ドライブのほとんどで利用可能なハードウェア圧縮を使用すると、
	容量が約 2 倍になります。
	マルチドライブテープライブラリユニットは 1 つの筐体に
	6 つのドライブを収容可能で、自動的にテープの交換ができます。
	ライブラリの容量は 240 GB に達します。</p><p>現在の DDS-3 標準は 12 GB (圧縮時 24 GB)
	までのテープ容量に対応しています。</p><p>8mm ドライブと同様に
	4mm ドライブはヘリカルスキャンを使用します。
	ヘリカルスキャン方式の利点および欠点はすべて 4mm および 8mm
	ドライブの両方に当てはまります。</p><p>テープは 2,000 回のパスあるいは
	100 回フルバックアップした後には交換するべきです。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-tapebackups-8mm"></a>16.7.2. 8mm (Exabyte)</h3></div></div></div><a id="idp89456208" class="indexterm"></a><p>8mm テープは SCSI
	テープドライブとして最もよく使われているもので、
	データ交換用として最良の選択です。ほとんどのサイトには Exabyte
	2 GB 8mm テープドライブがあるでしょう。8mm
	ドライブは信頼性が高く、使いやすく、静かです。
	カートリッジは安価で小型です
	(4.8 x 3.3 x 0.6 インチ、122 x 84 x 15 mm)。8mm
	テープの欠点は、テープとヘッドの相対的な速度が高速なために、
	比較的ヘッドとテープの寿命が短いことです。</p><p>データスループットは 250 kB/s から 500 kB/s
	程度です。データ容量は 300 MB から 7 GB です。
	ほとんどのドライブで利用可能なハードウェア圧縮を利用すると、
	容量が約 2 倍になります。
	これらのドライブは、単一のユニットから
	6 つのドライブと 120
	本のテープを一つの筐体に収容したマルチドライブテープライブラリまで利用可能です。
	テープはユニットによって自動的に取り換えられます。
	ライブラリの容量は 840 GB 以上に達します。</p><p>Exabyte の <span class="quote">「<span class="quote">Mammoth</span>」</span>
	モデルはテープ 1 本あたり 12 GB
	(圧縮時 24 GB) に対応し、
	従来のテープドライブと比べ費用は約 2 倍になります。</p><p>データはヘリカルスキャンを用いてテープに記録されます。
	ヘッダはメディアに対してある傾き (約 6 度) に配置されます。
	テープはヘッドのある円筒の周の 270 度にわたって接触します。
	テープが円筒面を走行する間、円筒は回転しています。
	この結果、高密度のデータのつまったトラックは、
	狭い間隔でテープの上端と下端の間を斜めに横切ります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-tapebackups-qic"></a>16.7.3. QIC</h3></div></div></div><a id="idp89460304" class="indexterm"></a><p>QIC-150 テープとドライブは、
	おそらく最も一般的に使われているドライブとメディアでしょう。
	QIC テープドライブは <span class="quote">「<span class="quote">現実的な</span>」</span>
	バックアップドライブとしては最も高価でないものです。
	欠点はメディアのコストです。QIC テープは 8mm や 4mm テープと比較して
	GB あたりのデータの保存で 5 倍ほど高価です。
	しかし、あなたの必要とする量が半ダース程のテープで十分であれば、
	QIC は正しい選択かもしれません。QIC は
	<span class="emphasis"><em>最も</em></span>一般的なテープドライブです。
	すべてのサイトに QIC ドライブのどれかの容量のものがあります。問題は、
	QIC は同じようなテープ (まったく同じ場合もある)
	に多様な記録密度があることです。QIC ドライブは静かではありません。
	これらのドライブはデータ記録を開始する前に音をたててシークしますし、
	リード、ライト、シークの時にはっきりと聞こえる音を出します。
	QIC テープの大きさは (6 x 4 x 0.7 インチ、152 x 102 x 17 mm) です。
	1/4 インチ幅のテープも使用している
	<a class="link" href="#backups-tapebackups-mini" title="16.7.4. XXX* ミニカートリッジ">ミニカートリッジ</a>
	は別に議論します。テープライブラリやチェンジャはありません。</p><p>データスループットは ~1500 kB/s から ~5000 kB/s
	程度です。データ容量は 400 MB から 150 GB です。
	ハードウェア圧縮が最近のドライブの多くで利用できます。
	QIC ドライブは DAT ドライブに置き換えられつつあり、
	あまり頻繁には使用されなくなっています。</p><p>データは複数のトラックに分かれてテープに記録されます。
	トラックはテープメディアの長さ方向の一端からもう一方の端までです
	(訳注: 1 トラックの read/write が終わるとテープの走行方向を反転させ
	次のトラックの read/write を行います)。トラックの数と、
	それに対応するトラックの幅はテープの容量によって変わります。
	すべてではありませんが、
	最近のドライブはほとんど、少なくとも読み出しについては
	(場合によっては書き込みも) 下位互換性があります。
	QIC はデータの安全性についてはよいといわれています
	(ヘリカルスキャンドライブに比べて機構は単純でより丈夫です)。</p><p>テープは 5000 回のバックアップで寿命となるでしょう。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-tapebackups-mini"></a>16.7.4. XXX* ミニカートリッジ</h3></div></div></div><p></p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-tapebackups-dlt"></a>16.7.5. DLT</h3></div></div></div><a id="idp89466448" class="indexterm"></a><p>DLT	はここに示したドライブのタイプの中で最高速のデータ転送レートを発揮します。
	1/2 インチ (12.5mm) テープが単リールのカートリッジ
	(4 x 4 x 1 インチ、100 x 100 x 25 mm) に入っています。
	カートリッジのひとつの側面全体がスイングゲートになっています。
	ドライブの機構がこのゲートを開け、テープリーダを引き出します。
	テープリーダには楕円形の穴があり、
	ドライブがテープを <span class="quote">「<span class="quote">引っ掛ける</span>」</span> のに使います。
	巻き取りのためのリールはドライブの中にあります。
	ここに挙げた他のカートリッジはすべて
	(9 トラックテープは唯一の例外です)
	送り出しリールと巻き取りリールの両方がカートリッジの中にあります。</p><p>データスループットは約 1.5 MB/s で、4mm, 8mm, QIC
	テープドライブの 3 倍です。データ容量は単一のドライブで
	10 GB から 20 GB の範囲です。マルチテープチェンジャ、
	マルチテープドライブ、5 から 900 巻のテープを 1 から
	20 ドライブで扱うマルチドライブテープライブラリがあり、
	50 GB から 9 TB の容量が得られます。</p><p>圧縮によって、DLT Type IV フォーマットは
	70 GB までの容量に対応しています。</p><p>データは (QICテープのように)
	テープの走行方向と平行に複数あるトラックへ記録されます。
	2 つのトラックに同時書き込みを行います。
	read/write ヘッドの寿命は比較的長いと言えます。
	テープの走行が止まればヘッドとテープの間の相対運動は無いからです。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89469648"></a>16.7.6. AIT</h3></div></div></div><a id="idp89470416" class="indexterm"></a><p>AIT は、Sony が発表した新しいフォーマットで、
        テープ 1 本あたり 50 GB (圧縮時) まで格納できます。
	テープにはメモリチップが搭載されており、
	テープの内容の索引情報を保持しています。
	他のテープではテープ上のファイルの位置を把握するのに数分必要とするのですが、
	このテープドライブでは索引情報を読んで直ちに決定することができます。
	<span class="application">SAMS:Alexandria</span>
        のようなソフトウェアは、40 を超える
        ATI テープライブラリを操作できるのはもちろんのこと、
	テープのメモリチップと直接通信して、スクリーンに内容を表示し、
	どのファイルがどのテープにバックアップされたかを調べて、
	正しいテープを見つけ、読み込み、
	テープからデータを復元することができます。</p><p>このようなライブラリは大体 $20,000 くらいするので、
	愛好家が購入できる価格帯からは外れてしまいます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89472848"></a>16.7.7. 新品のテープを初めて使う場合</h3></div></div></div><p>全く新品の空テープを読もうとしたり書き込もうとすると、
	処理は失敗するでしょう。
	次のようなメッセージがコンソールに出力されるでしょう。</p><pre class="screen">sa0(ncr1:4:0): NOT READY asc:4,1
sa0(ncr1:4:0):  Logical unit is in process of becoming ready</pre><p>テープに識別ブロック (Identifier Block:block number 0)
	がありません。QIC-525 標準を採用したすべての QIC
	テープドライブは識別ブロックをテープに書き込みます。
	2 つの解決方法があります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">mt fsf 1</code>
	      によりテープドライブはテープに識別ブロックを書き込みます。</p></li><li class="listitem"><p>フロントパネルのボタンを押してテープを取り出します。</p><p>再びテープを挿入し、データをテープに <code class="command">dump</code>
	      します。</p><p><code class="command">dump</code> は
	      <span class="errorname">DUMP: End of tape detected</span> と報告し、
	      コンソールには
	      <span class="errorname">HARDWARE FAILURE info:280 asc:80,96</span>
	      と表示されるでしょう。</p><p><code class="command">mt rewind</code> を使ってテープを巻戻します。</p><p>次からはテープの操作はうまくいくでしょう。</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="backups-floppybackups"></a>16.8. フロッピーディスクへのバックアップ</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="floppies-using"></a>16.8.1. データをバックアップするのにフロッピーは使えますか?</h3></div></div></div><a id="idp89490256" class="indexterm"></a><a id="idp89490768" class="indexterm"></a><p>フロッピーディスクは以下の理由によって、
	実際にバックアップをつくるための適切なメディアではありません。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>メディアの信頼性が (特に長期間の場合) 低い。</p></li><li class="listitem"><p>バックアップとリストアがとても遅い。</p></li><li class="listitem"><p>容量が非常に小さい
	    (1 ダースかそこらのフロッピーディスクに
	    ハードディスク全体をバックアップしていた時代は、
	    はるか遠くに過ぎ去りました)。</p></li></ul></div><p>しかしながら、データをバックアップする他の手段がないのなら、
	バックアップを取らないよりもフロッピーディスクを使う方がましでしょう。</p><p>フロッピーディスクを使用せざるを得ないときは、
	品質のよいディスクを使用してください。
	事務所のその辺に数年転がっていたフロッピーは使わない方が良いでしょう。
	評判のよいメーカの新しいディスクを使用することが理想です。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="floppies-creating"></a>16.8.2. それではどうやってデータをフロッピーにバックアップするのですか?</h3></div></div></div><p>フロッピーにバックアップする最もよい方法は、
	<code class="option">-M</code> (マルチボリューム) オプション付きで
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> コマンドを使用することです。これで、
	複数のフロッピーにわたってバックアップすることが可能になります。</p><p>カレントディレクトリとサブディレクトリ内のすべてのファイルをバックアップするには、
	以下のコマンドを (<code class="systemitem">root</code> 権限で)
	使用します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar Mcvf /dev/fd0 *</code></strong></pre><p>1 枚目のフロッピーが一杯になると、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> は次のボリュームを挿入するように要求します
	(<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> はさまざまなメディアを扱えるので、
	ボリュームと表示します。この文脈ではフロッピーディスクのことです)。</p><pre class="screen">Prepare volume #2 for /dev/fd0 and hit return:</pre><p>指定したファイルがすべて保存されるまで
	(ボリューム番号を増やしながら) これが繰り返されます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="floppies-compress"></a>16.8.3. バックアップを圧縮することはできませんか?</h3></div></div></div><a id="idp89503056" class="indexterm"></a><a id="idp89503952" class="indexterm"></a><a id="idp89504848" class="indexterm"></a><p>残念なことに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> はマルチボリュームアーカイブに対して、
	<code class="option">-z</code> オプションを使うことができません。
	もちろん、すべてのファイルを <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gzip</span>(1)</span></a> で圧縮し、
	それらを <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> を用いてフロッピーに保存して、
	それから再び <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gunzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gunzip</span>(1)</span></a> することはできます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="floppies-restoring"></a>16.8.4. どのようにしてバックアップをリストアしたらいいのでしょうか?</h3></div></div></div><p>すべてのアーカイブをリストアするには以下のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar Mxvf /dev/fd0</code></strong></pre><p>特定のファイルだけをリストアするには 2 つの方法があります。
	1 つ目は、1 枚目のフロッピーを用いて以下のようにするものです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar Mxvf /dev/fd0 filename</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> ユーティリティは、
	必要なファイルを見つけるまで次のディスクを挿入するように要求します。</p><p>もう 1 つは、
	必要なファイルがどのフロッピーに保存されているか分かっている場合、
	そのフロッピーを挿入して上記と同じコマンドを使用するだけでもよいです。
	あるフロッピー上にある 1 番目のファイルが、
	その前のフロッピーから続いている場合は、
	そのファイルのリストアを要求していなくても <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a>
	はそれをリストアできないと警告することに注意してください!</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="backup-basics"></a>16.9. バックアップの基本</h2></div></div></div><p>主なバックアッププログラムは
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> の三つです。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89523024"></a>16.9.1. ダンプとリストア</h3></div></div></div><a id="idp89523664" class="indexterm"></a><a id="idp89524816" class="indexterm"></a><a id="idp89525456" class="indexterm"></a><p>伝統的な <span class="trademark">UNIX</span>® のバックアッププログラムは
	<code class="command">dump</code> と <code class="command">restore</code> です。
	これらはファイルシステムによって作成されるファイル、リンク、
	ディレクトリといった抽象の下位にある、
	ディスクブロックの集合としてドライブを操作します。
	<code class="command">dump</code>
	はデバイス上のファイルシステム全体をバックアップします。
	ファイルシステムの一部分だけ、
	または二つ以上のファイルシステムにわたるディレクトリツリーをバックアップすることはできません。
	<code class="command">dump</code>
	はファイルおよびディレクトリをテープに書き込まずに、
	ファイルおよびディレクトリを含んだ raw データブロックを書き込みます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">ルートディレクトリで <code class="command">dump</code>
	を使った場合、
	<code class="filename">/home</code>, <code class="filename">/usr</code>
	など、他の多くのディレクトリはバックアップされません。
	これらのディレクトリは通常、
	他のファイルシステムへのマウントポイントであったり、
	シンボリックリンクとなっているためです。</p></div><p><code class="command">dump</code> には AT&amp;T UNIX のバージョン 6
	(およそ 1975 年) の初期から残っている癖があります。
	デフォルトのパラメタは、現在利用可能な高密度メディア
	(最大 62,182 ftpi) ではなく、9 トラックテープ (6250 bpi)
	に最適な値となっています。
	現在のテープドライブの容量を利用するために、
	これらのデフォルト値をコマンドラインで上書きしなければなりません。</p><a id="idp89539152" class="indexterm"></a><p><code class="command">rdump</code> と <code class="command">rrestore</code>
	を用いて他のコンピュータに接続されているテープドライブにネットワーク経由でデータをバックアップすることも可能です。
	どちらのプログラムもリモートのテープドライブにアクセスするために
	<code class="command">rcmd</code> および <code class="command">ruserok</code>
	に依存しています。
	したがって、バックアップを実行するユーザがリモートコンピュータの
	<code class="filename">.rhosts</code> ファイルに書かれていなければなりません。
	<code class="command">rdump</code> および <code class="command">rrestore</code>
	の引数はリモートコンピュータに適切なものを用いなければなりません。
	FreeBSD コンピュータから <code class="systemitem">komodo</code> と呼ばれる Sun
	に接続されている Exabyte テープへ <code class="command">rdump</code>
	するには以下のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/rdump 0dsbfu 54000 13000 126 komodo:/dev/nsa8 /dev/da0a 2&gt;&amp;1</code></strong></pre><p>注意: <code class="filename">.rhosts</code>
	認証を許可することには、セキュリティに関する暗黙の仮定があります。
	あなたの置かれている状況を注意深く調べてください。</p><p><code class="command">ssh</code> 越しに
	<code class="command">dump</code> と <code class="command">restore</code>
	をより安全な形で使うこともできます。</p><div class="example"><a id="idp89551056"></a><div class="example-title">例16.1 <span class="application">ssh</span> 越しの
	  <code class="command">dump</code> の利用</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/dump -0uan -f - /usr | gzip -2 | ssh1 -c blowfish \
          targetuser@targetmachine.example.com dd of=/mybigfiles/dump-usr-l0.gz</code></strong></pre></div></div><br class="example-break" /><p>または、環境変数 <code class="envar">RSH</code> を設定して、
	<code class="command">dump</code> の組み込み機能を利用する。</p><div class="example"><a id="idp89554512"></a><div class="example-title">例16.2 <code class="envar">RSH</code> を設定した <span class="application">ssh</span> 越しの <code class="command">dump</code> を利用</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>RSH=/usr/bin/ssh /sbin/dump -0uan -f targetuser@targetmachine.example.com:/dev/sa0</code></strong></pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89557456"></a>16.9.2. <code class="command">tar</code></h3></div></div></div><a id="idp89558224" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> は AT&amp;T UNIX の バージョン 6 (1975 年ごろ)
	にまで遡ることができます。<code class="command">tar</code>
	はファイルシステムと協調して動作し、
	ファイルとディレクトリをテープに書き込みます。<code class="command">tar</code>
	は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a>
	で使用可能なフルレンジのオプションには対応していませんが、
	<code class="command">tar</code> には <code class="command">cpio</code>
	が使用するような奇妙なコマンドパイプラインは必要ありません。</p><a id="idp89562832" class="indexterm"></a><p><code class="command">tar</code>
	の多くの版はネットワーク経由のバックアップには対応していません。
	FreeBSD が使用している GNU 版の <code class="command">tar</code> は、
	<code class="command">rdump</code>
	と同じ構文でリモートデバイスに対応しています。
	<code class="systemitem">komodo</code> と呼ばれる Sun に接続された Exabyte
	テープドライブに対して <code class="command">tar</code>
	を実行するには以下のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/bin/tar cf komodo:/dev/nsa8 . 2&gt;&amp;1</code></strong></pre><p>リモートデバイスに対応していない版に対しては、パイプラインと
	<code class="command">rsh</code>
	を使用してリモートテープドライブにデータを送ることができます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar cf - . | rsh hostname dd of=tape-device obs=20b</code></strong></pre><p>ネットワークを越えたバックアップのセキュリティを懸念しているなら、
	<code class="command">rsh</code> の代わりに <code class="command">ssh</code>
	を使うべきです。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89573712"></a>16.9.3. <code class="command">cpio</code></h3></div></div></div><a id="idp89574480" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> は本来 <span class="trademark">UNIX</span>®
	ファイルを磁気メディアで交換するためのプログラムです。
	<code class="command">cpio</code> はバイトスワッピング、
	多くの異なるアーカイブフォーマットの書き込みオプションがあり
	(それ以外にも多数のオプションがあります)、
	パイプで他のプログラムにデータを渡すこともできます。
	この最後にあげた特徴が、<code class="command">cpio</code>
	をインストールメディアとしては優れた選択肢にしています。
	<code class="command">cpio</code>
	はディレクトリツリーの探索の機能はなく、ファイルリストは
	<code class="filename">stdin</code> からの入力でなくてはなりません。</p><a id="idp89583056" class="indexterm"></a><p><code class="command">cpio</code>
	はネットワーク経由のバックアップには対応していません。
	以下のようにパイプラインと <code class="command">rsh</code>
	を用いてリモートテープドライブにデータを送ることができます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>for f in directory_list; do</code></strong>
<strong class="userinput"><code>find $f &gt;&gt; backup.list</code></strong>
<strong class="userinput"><code>done</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cpio -v -o --format=newc &lt; backup.list | ssh user@host "cat &gt; backup_device"</code></strong></pre><p><em class="replaceable"><code>directory_list</code></em>
	はバックアップしたいディレクトリのリストで、
	<em class="replaceable"><code>user</code></em>@<em class="replaceable"><code>host</code></em>
	はバックアップを実行したいユーザとホスト名の組であり、
	<em class="replaceable"><code>backup_device</code></em>
	はバックアップを書き込みたいデバイスです
	(たとえば <code class="filename">/dev/nsa0</code>)。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89589584"></a>16.9.4. <code class="command">pax</code></h3></div></div></div><a id="idp89590352" class="indexterm"></a><a id="idp89591632" class="indexterm"></a><a id="idp89592272" class="indexterm"></a><a id="idp89592784" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pax&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pax</span>(1)</span></a> は <code class="command">tar</code> と
	<code class="command">cpio</code>	に対する IEEE/<span class="trademark">POSIX</span>®
	の回答です。長年の間、さまざまな版の
	<code class="command">tar</code> と <code class="command">cpio</code>
	は互いにわずかに非互換になってきていました。
	それらをしらみ潰しに標準化する代わりに、<span class="trademark">POSIX</span>®
	は新しいアーカイブユーティリティを作りました。
	<code class="command">pax</code>
	は、いくつもの <code class="command">cpio</code> や
	<code class="command">tar</code>
	のフォーマットの読み書きに対応しようと試みているほか、
	専用に新しいフォーマットを開発しました。
	コマンド群は <code class="command">tar</code> よりも
	<code class="command">cpio</code> の方にいくぶん似ています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-programs-amanda"></a>16.9.5. <span class="application">Amanda</span></h3></div></div></div><a id="idp89624656" class="indexterm"></a><a id="idp89625936" class="indexterm"></a><p><span class="application">Amanda</span> (Advanced Maryland
	Network Disk Archiver) は単一のプログラムではなく、
	クライアント/サーバ型のバックアップシステムです。
	<span class="application">Amanda</span> サーバは、
	<span class="application">Amanda</span> クライアントを有する
	ネットワークに接続されたコンピュータからデータを受け取り、
	備え付けられたテープドライブにバックアップします。
	いくつもの大容量ディスクを備えたサイトでの共通の問題は、
	データディレクトリをテープにバックアップするのに時間がかかりすぎることです。
	<span class="application">Amanda</span> はこの問題を解決します。
	<span class="application">Amanda</span> は
	<span class="quote">「<span class="quote">ホールディングディスク</span>」</span> を使用して、
	同時に複数のファイルシステムのバックアップを行うことができます。
	<span class="application">Amanda</span> の設定ファイルにかかれたすべてのファイルシステムのフルバックアップを特定の間隔でとるために
	<span class="quote">「<span class="quote">アーカイブセット</span>」</span> と呼ばれるテープグループを作成します。
	<span class="quote">「<span class="quote">アーカイブセット</span>」</span> には
	夜間に作成されるすべてのファイルシステムの増分 (または差分)
	のバックアップも含まれます。
	障害が起きたファイルシステムのリストアには、
	最も新しいフルバックアップと増分のバックアップが必要です。</p><p>設定ファイルでは、バックアップの制御と
	<span class="application">Amanda</span>
	によるネットワークトラフィック量を設定します。
	<span class="application">Amanda</span>
	は上記のバックアッププログラムのいずれかを使ってデータをテープに書き込みます。
	<span class="application">Amanda</span> は port または package
	として利用可能です。デフォルトではインストールされていません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89632464"></a>16.9.6. 何もしない</h3></div></div></div><p><span class="quote">「<span class="quote">何もしない</span>」</span>
	というのはコンピュータのプログラムではありませんが、
	バックアップの戦略として最も広く採用されています。
	これには初期投資が必要ありません。
	従わなければならないバックアップスケジュールもありません。
	ただ何もしないだけです。データに何か起きたら苦笑いして耐えてください!</p><p>あなたにとって時間やデータの価値が少ないか、
	あるいはまったくないのであれば <span class="quote">「<span class="quote">何もしない</span>」</span>
	のはあなたのコンピュータに最も適したバックアッププログラムでしょう。
	しかし注意してください。<span class="trademark">UNIX</span>® は便利なツールです。
	6 ヶ月も使用していれば、
	あなたにとって価値のあるファイルの山が出来上がっているでしょう。</p><p><span class="quote">「<span class="quote">何もしない</span>」</span>
	ことはコンピュータが同じものをもう一度作り直すことのできる
	<code class="filename">/usr/obj</code>
	やその他のディレクトリツリーについては適切なバックアップ方法です。
	一例として、このハンドブックの HTML 版 または <span class="trademark">PostScript</span>®
	版を構成するファイルがあります。
	これらの文書形式は SGML ファイルから作成されたものです。
	HTML または <span class="trademark">PostScript</span>® ファイルのバックアップは必要ありません。
	SGML ファイルは定期的にバックアップされています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89637456"></a>16.9.7. どのバックアッププログラムが最適ですか?</h3></div></div></div><a id="idp89638096" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> です。<span class="emphasis"><em>以上。</em></span>
	Elizabeth D. Zwicky
	はここで検討したプログラムすべてについて拷問的なテストを行いました。
	すべてのデータと <span class="trademark">UNIX</span>®
	ファイルシステムの状態すべてを保存するのに最適なのは、明らかに
	<code class="command">dump</code> です。
	Elizabeth は多種多様の特異な状態
	(いくつかはあまり珍しくないものもあります)
	を含むファイルシステムを作成し、
	それらのファイルシステムのバックアップとリストアを行って、
	それぞれのプログラムのテストを行いました。特異な状態とは、
	ホールがあるファイル、ホールとヌルブロックがあるファイル、
	奇妙な文字をファイル名に持つファイル、読み取り不可、
	書き込み不可のファイル、デバイスファイル、
	バックアップ中のファイルのサイズ変更、
	バックアップ中のファイルの作成および削除、などです。
	彼女は 1991 年 10 月の LISA V で結果を発表しています。
	<a class="link" href="http://berdmann.dyndns.org/zwicky/testdump.doc.html" target="_top">torture-testing Backup and Archive Programs</a>
	を参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89641808"></a>16.9.8. 緊急時のリストア手順</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89642448"></a>16.9.8.1. 惨事が起きる前に</h4></div></div></div><p>発生する可能性があるどのような惨事に対しても、
	  備えるのに必要な手順は以下の 4 ステップだけです。</p><a id="idp89643472" class="indexterm"></a><p>最初に、
	  各ディスクのディスクラベルとファイルシステムテーブル
	  (<code class="filename">/etc/fstab</code>)、
	  ブートメッセージ全体をそれぞれ 2 枚ずつ印刷します
	  (たとえば <code class="command">disklabel da0 | lpr</code>)。</p><a id="idp89653840" class="indexterm"></a><p>2 番目に、ブートフロッピーと fix-it フロッピー
	  (<code class="filename">boot.flp</code> および <code class="filename">fixit.flp</code>)
	  にそのシステムのデバイスがすべて含まれているか確認します。
	  最も簡単に確認する方法は、フロッピーをドライブに入れてマシンをリブートしてブートメッセージを確認することです。
	  あなたのシステムのデバイスのすべてが含まれ、
	  機能していれば 3 番目の手順に進んでください。</p><p>さもなければ、
	  そのシステムのすべてのディスクをマウントでき、
	  テープドライブにもアクセスできるカーネルを備えた
	  カスタムブートフロッピーを 2 枚作成する必要があります。
	  これらのフロッピーディスクには <code class="command">fdisk</code>,
	  <code class="command">disklabel</code>, <code class="command">newfs</code>,
	  <code class="command">mount</code>
	  と、利用するバックアッププログラムが入っていなければなりません。
	  これらのプログラムはスタティックリンクされていなければなりません。
	  <code class="command">dump</code> を使用するのなら、このフロッピーには
	  <code class="command">restore</code> も含まれていなければなりません。</p><p>3 番目に、定期的にバックアップテープを作成します。
	  最後のバックアップの後で行われた変更は、回復できずに失われます。
	  バックアップテープにライトプロテクトを施してください。</p><p>4 番目に、フロッピーディスク
	  (<code class="filename">boot.flp</code> と
	  <code class="filename">fixit.flp</code>、
	  か、第 2 段階で作成した
	  2 枚のカスタムブートフロッピーディスクのどちらか)
	  およびバックアップテープのテストをします。
	  手順のメモを作りましょう。
	  このメモはブートフロッピー、印刷した紙、
	  バックアップテープと一緒に保存しておきます。
	  リストアを行うときには、
	  このメモがバックアップテープを壊すのを防ぐくらい取り乱しているかもしれません
	  (どのように?
	  <code class="command">tar xvf /dev/sa0</code> の代わりに、うっかり
	  <code class="command">tar cvf /dev/sa0</code>
	  と入力してバックアップテープを上書きしてしまうかもしれません)。</p><div xmlns="" class="note"><h3 class="admontitle">訳注: </h3><p xmlns="http://www.w3.org/1999/xhtml">上書きはライトプロテクトをしておけば防げますが、
	    何らかの原因でプロテクトがはずれているかもしれません。
	    ちなみに訳者の経験から言えば、
	    上のようなミスタイプは結構起きます。</p></div><p>安全性を増すために、毎回、
	  ブートフロッピーを作成し、
	  2 巻のバックアップテープを取ります。
	  一方を離れた場所に保管します。
	  離れた場所は同じ事務所の建物の地下室ではいけません。
	  世界貿易センタービルにあった数多くの会社は、
	  苦い経験によりこの教訓を得ました。離れた場所とは、
	  コンピュータやディスクドライブから十分な距離を取って
	  物理的に分離されていなければなりません。</p><div class="example"><a id="idp89662288"></a><div class="example-title">例16.3 ブートフロッピーを作成するスクリプト</div><div class="example-contents"><pre class="programlisting">#!/bin/sh
#
# create a restore floppy
#
# format the floppy
#
PATH=/bin:/sbin:/usr/sbin:/usr/bin

fdformat -q fd0
if [ $? -ne 0 ]
then
	 echo "Bad floppy, please use a new one"
	 exit 1
fi

# place boot blocks on the floppy
#
disklabel -w -B /dev/fd0c fd1440

#
# newfs the one and only partition
#
newfs -t 2 -u 18 -l 1 -c 40 -i 5120 -m 5 -o space /dev/fd0a

#
# mount the new floppy
#
mount /dev/fd0a /mnt

#
# create required directories
#
mkdir /mnt/dev
mkdir /mnt/bin
mkdir /mnt/sbin
mkdir /mnt/etc
mkdir /mnt/root
mkdir /mnt/mnt			# for the root partition
mkdir /mnt/tmp
mkdir /mnt/var

#
# populate the directories
#
if [ ! -x /sys/compile/MINI/kernel ]
then
	 cat &lt;&lt; EOM
The MINI kernel does not exist, please create one.
Here is an example config file:
#
# MINI - A kernel to get FreeBSD onto a disk.
#
machine         "i386"
cpu             "I486_CPU"
ident           MINI
maxusers        5

options         INET                    # needed for _tcp _icmpstat _ipstat
                                        #            _udpstat _tcpstat _udb
options         FFS                     #Berkeley Fast File System
options         FAT_CURSOR              #block cursor in syscons or pccons
options         SCSI_DELAY=15           #Be pessimistic about Joe SCSI device
options         NCONS=2                 #1 virtual consoles
options         USERCONFIG              #Allow user configuration with -c XXX

config          kernel	root on da0 swap on da0 and da1 dumps on da0

device          isa0
device          pci0

device          fdc0	at isa? port "IO_FD1" bio irq 6 drq 2 vector fdintr
device          fd0	at fdc0 drive 0

device          ncr0

device          scbus0

device          sc0	at isa? port "IO_KBD" tty irq 1 vector scintr
device          npx0	at isa? port "IO_NPX" irq 13 vector npxintr

device          da0
device          da1
device          da2

device          sa0

pseudo-device   loop            # required by INET
pseudo-device   gzip            # Exec gzipped a.out's
EOM
	 exit 1
fi

cp -f /sys/compile/MINI/kernel /mnt

gzip -c -best /sbin/init &gt; /mnt/sbin/init
gzip -c -best /sbin/fsck &gt; /mnt/sbin/fsck
gzip -c -best /sbin/mount &gt; /mnt/sbin/mount
gzip -c -best /sbin/halt &gt; /mnt/sbin/halt
gzip -c -best /sbin/restore &gt; /mnt/sbin/restore

gzip -c -best /bin/sh &gt; /mnt/bin/sh
gzip -c -best /bin/sync &gt; /mnt/bin/sync

cp /root/.profile /mnt/root

cp -f /dev/MAKEDEV /mnt/dev
chmod 755 /mnt/dev/MAKEDEV

chmod 500 /mnt/sbin/init
chmod 555 /mnt/sbin/fsck /mnt/sbin/mount /mnt/sbin/halt
chmod 555 /mnt/bin/sh /mnt/bin/sync
chmod 6555 /mnt/sbin/restore

#
# create the devices nodes
#
cd /mnt/dev
./MAKEDEV std
./MAKEDEV da0
./MAKEDEV da1
./MAKEDEV da2
./MAKEDEV sa0
./MAKEDEV pty0
cd /

#
# create minimum file system table
#
cat &amp;gt; /mnt/etc/fstab &amp;lt;&amp;lt;EOM
/dev/fd0a    /    ufs    rw  1  1
EOM

#
# create minimum passwd file
#
cat &gt; /mnt/etc/passwd &lt;&lt;EOM
root:*:0:0:Charlie &amp;:/root:/bin/sh
EOM

cat &gt; /mnt/etc/master.passwd &lt;&lt;EOM
root::0:0::0:0:Charlie &amp;:/root:/bin/sh
EOM

chmod 600 /mnt/etc/master.passwd
chmod 644 /mnt/etc/passwd
/usr/sbin/pwd_mkdb -d/mnt/etc /mnt/etc/master.passwd

#
# umount the floppy and inform the user
#
/sbin/umount /mnt
echo "The floppy has been unmounted and is now ready."</pre></div></div><br class="example-break" /></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89663568"></a>16.9.8.2. 惨事の後は</h4></div></div></div><p>重要な問題は、ハードウェアが生き残ったかどうかです。
	  定期的にバックアップを取っていれば、
	  ソフトウェアについて心配する必要はありません。</p><p>ハードウェアに障害があれば、
	  コンピュータを使用する前にその部品を交換してください。</p><p>ハードウェアに問題が無ければ、フロッピーを確認してください。
	  カスタムブートフロッピーディスクを使用しているのであれば、
	  シングルユーザモードでブートして (<code class="prompt">boot:</code>
	  プロンプトで <code class="literal">-s</code> を入力します)、
	  次の段落は飛ばしてください。</p><p><code class="filename">boot.flp</code> と <code class="filename">fixit.flp</code>
	  を使用しているのであればこのまま読み進めてください。
	  <code class="filename">boot.flp</code>
	  フロッピーをフロッピードライブに入れて、
	  コンピュータを起動してください。
	  本来のインストールメニューが画面に表示されます。
	  <code class="literal">Fixit--Repair mode with CDROM or floppy.</code>
	  オプションを選択します。指示された通り
	  <code class="filename">fixit.flp</code> をいれてください。
	  <code class="command">restore</code> とその他必要となるプログラムは
	  <code class="filename">/mnt2/stand</code> にあります。</p><p>そして、ファイルシステムを一つずつ回復します。</p><a id="idp89669584" class="indexterm"></a><a id="idp89678800" class="indexterm"></a><a id="idp89679312" class="indexterm"></a><a id="idp89680208" class="indexterm"></a><p>最初のディスクのルートパーティションを <code class="command">mount</code>
	  してみてください (たとえば <code class="command">mount /dev/da0a /mnt</code>)。
	  ディスクラベルが破壊されている場合は、<code class="command">disklabel</code>
	  を用いてあらかじめ印刷して保存しておいた通りにパーティションを作り直し、ディスクラベルを作成してください。
	  <code class="command">newfs</code> を使用してファイルシステムを作り直します。
	  ルートパーティションを読み書き可能にマウントし直します
	  (<code class="command">mount -u -o rw /mnt</code>)。
	  バックアッププログラムとバックアップテープを使用して、
	  このファイルシステムのデータを回復します
	  (たとえば <code class="command">restore vrf /dev/sa0</code>)。
	  ファイルシステムをアンマウントします
	  (たとえば <code class="command">umount /mnt</code>)。
	  障害を受けたファイルシステムそれぞれについて繰り返してください。</p><p>システムが動き出したら、
	  新しいテープにデータをバックアップしてください。
	  どのような理由で再び事故が起きたり、データが失われるかわかりません。
	  これに数時間を費すことで、後々の災難から救われます。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-virtual"></a>16.10. ネットワーク、メモリ、そしてファイルベースのファイルシステム</h2></div><div><span class="authorgroup">再構成および追記: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Fonvieille</span> <span class="firstname">Marc</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp89687632" class="indexterm"></a><a id="idp89688144" class="indexterm"></a><p>FreeBSD にはフロッピーや CD,
      ハードディスクなどの手元の計算機に取り付けたディスクの他に、
      別の形態のディスク、<em class="firstterm">仮想ディスク</em>、もあります。</p><a id="idp89690064" class="indexterm"></a><a id="idp89690576" class="indexterm"></a><a id="idp89691088" class="indexterm"></a><p>これには、<a class="link" href="#network-nfs" title="22.6. NFS">Network File System</a>
      のようなネットワークファイルシステムや Coda,
      メモリベースのファイルシステムおよびファイルベースのファイルシステムがあります。</p><p>稼働させている FreeBSD のバージョンによって、
      ファイルベースおよびメモリベースのファイルシステムを作成したり操作するために、異なるツールを使用しなければならないでしょう。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 4.X の使用者は必要なデバイスを作成するために
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=MAKEDEV&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">MAKEDEV</span>(8)</span></a> を使用しなければならないでしょう。FreeBSD 5.0
	以降では、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> がデバイスノードを自動的に割り当ててくれるので、
	使用者が意識する必要はありません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-vnconfig"></a>16.10.1. FreeBSD 4.X でファイル中に構築されるファイルシステム</h3></div></div></div><a id="idp89700944" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a>
	ユーティリティを使えば擬似ディスクデバイスを設定し、
	有効にすることができます。
	<em class="firstterm">vnode</em> とはファイルの内部的な表現方法であり、
	ファイルに関する操作の中心となるものです。つまり、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a>
	はファイルシステムを生成したり操作したりするためにファイルを用いるのです。
	一つ例を挙げると、
	ファイルに収められたフロッピーや CD-ROM のイメージをマウントするために用いることができます。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a> を使用するためには、
	カーネルが <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vn&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">vn</span>(4)</span></a> デバイスに対応している必要があります。
	そうでなければ、カーネルコンフィギュレーションファイルに
	次の行を追加してカーネルを再構築し、システムを再起動してください。</p><pre class="programlisting">pseudo-device vn</pre><p>既にあるファイルシステムイメージのマウント</p><div class="example"><a id="idp89706832"></a><div class="example-title">例16.4 FreeBSD 4.X での vnconfig を用いた既存のファイルシステムイメージのマウント</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vnconfig vn0 diskimage</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/vn0c /mnt</code></strong></pre></div></div><br class="example-break" /><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a> を用いたファイルシステムイメージの新規作成</p><div class="example"><a id="idp89714512"></a><div class="example-title">例16.5 <code class="command">vnconfig</code> を用いたファイルベースディスクの新規作成</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=newimage bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>vnconfig -s labels -c vn0 newimage</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -r -w vn0 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs vn0c</code></strong>
Warning: 2048 sector(s) in last cylinder unallocated
/dev/vn0c:     10240 sectors in 3 cylinders of 1 tracks, 4096 sectors
        5.0MB in 1 cyl groups (16 c/g, 32.00MB/g, 1280 i/g)
super-block backups (for fsck -b #) at:
 32
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/vn0c /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem  1K-blocks     Used    Avail Capacity  Mounted on
/dev/vn0c        4927        1     4532     0%    /mnt</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-mdconfig"></a>16.10.2. FreeBSD 5.X でファイル中に構築されるファイルシステム</h3></div></div></div><a id="idp89725776" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> ユーティリティは FreeBSD 5.X において
	メモリディスク (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>) を設定し、有効にするために使用されます。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> を使用するためには <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> モジュールを読み込むか、
	カーネルコンフィギュレーションファイルに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>
	デバイスを追加してカーネルを再構築し、システムを再起動してください。</p><pre class="programlisting">device md</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> コマンドは、
	三つのタイプのメモリベース仮想ディスクに対応しています。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a> を用いて割り当てられたメモリディスク、
	ファイルをベースにしたメモリディスク、
	およびスワップ領域をベースにしたメモリディスクです。
	想定される使用法は、ファイル内に保持されたフロッピーイメージまたは
	CD イメージをマウントすることです。</p><p>既にあるファイルシステムイメージのマウント</p><div class="example"><a id="idp89733712"></a><div class="example-title">例16.6 FreeBSD 5.X での <code class="command">mdconfig</code> を用いた既存のファイルシステムイメージのマウント</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f diskimage -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0c /mnt</code></strong></pre></div></div><br class="example-break" /><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> を用いたファイルシステムイメージの新規作成</p><div class="example"><a id="idp89737552"></a><div class="example-title">例16.7 <code class="command">mdconfig</code> を用いたファイルシステムイメージの新規作成</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=newimage bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f newimage -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -r -w md0 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs md0c</code></strong>
/dev/md0c: 5.0MB (10240 sectors) block size 16384, fragment size 2048
	using 4 cylinder groups of 1.27MB, 81 blks, 256 inodes.
super-block backups (for fsck -b #) at:
 32, 2624, 5216, 7808
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0c /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem  1K-blocks     Used    Avail Capacity  Mounted on
/dev/md0c        4846        2     4458     0%    /mnt</pre></div></div><br class="example-break" /><p><code class="option">-u</code> オプションを用いて
	ユニット番号を指定しない場合、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>
	は未使用のデバイスを自動的に選択するために
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> デバイスの auto-unit 機能を使用します。
	割り当てられたユニットの名前は <code class="filename">md4</code>
	のように標準出力に出力されます。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>
	の詳細についてはマニュアルページを参照してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.1-RELEASE から、従来の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>
	  プログラムは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	  ユーティリティに置き換えられました。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> では、
	  使用されていないオプションおよびパラメタの数多くが削除されました。
	  たとえば <code class="option">-r</code> オプションは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	  では取り除かれました。詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	  マニュアルページを参照してください。</p></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> ユーティリティは大変役に立ちますが、
	ファイルベースのファイルシステムを作成するために、
	多くのコマンドの入力が必要となります。FreeBSD 5.0 では
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a> と呼ばれるツールも用意されています。このプログラムは
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> を用いて <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> ディスクを設定し、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>
	を用いて UFS ファイルシステムを作成し、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
	を用いてマウントします。たとえば、上記と同じファイルシステムを作成し、
	マウントしたい場合は、下記のように入力するだけです。</p><div class="example"><a id="idp89769680"></a><div class="example-title">例16.8 <code class="command">mdmfs</code> を用いたファイルベースディスクの設定とマウント</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=newimage bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mdmfs -F newimage -s 5m md0 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md0        4846    2  4458     0%    /mnt</pre></div></div><br class="example-break" /><p>ユニット番号を指定せずに <code class="option">md</code>
	オプションを使用した場合、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>
	は未使用のデバイスを自動的に選択するために <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> デバイスの
	auto-unit 機能を使用します。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>
	についての詳細はマニュアルページを参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-md-freebsd4"></a>16.10.3. FreeBSD 4.X でのメモリベースのファイルシステム</h3></div></div></div><a id="idp89781584" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> ドライバは FreeBSD 4.X
	においてメモリファイルシステムを作成するために単純で効果的な手段です。
	メモリを割り当てるために <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a> 関数が使用されます。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a> を用いて作成したファイルシステムを例に取ると、
	以下のようにします。</p><div class="example"><a id="idp89785552"></a><div class="example-title">例16.9 FreeBSD 4.X での md メモリディスク</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=newimage of=/dev/md0</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0c /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem  1K-blocks     Used    Avail Capacity  Mounted on
/dev/md0c        4927        1     4532     0%    /mnt</pre></div></div><br class="example-break" /><p>詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> マニュアルページを参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-md-freebsd5"></a>16.10.4. FreeBSD 5.X でのメモリベースのファイルシステム</h3></div></div></div><a id="idp89795408" class="indexterm"></a><p>メモリベースおよびファイルベースのファイルシステムに対しても
	同じツール (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> または <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>) を使用できます。
	メモリベースのファイルシステムに対する記憶領域は
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a> 関数を用いて割り当てられます。</p><div class="example"><a id="idp89799248"></a><div class="example-title">例16.10 <code class="command">mdconfig</code> を用いたメモリベースディスクの新規作成</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t malloc -s 5m -u 1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs -U md1</code></strong>
/dev/md1: 5.0MB (10240 sectors) block size 16384, fragment size 2048
	using 4 cylinder groups of 1.27MB, 81 blks, 256 inodes.
	with soft updates
super-block backups (for fsck -b #) at:
 32, 2624, 5216, 7808
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md1 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md1        4846    2  4458     0%    /mnt</pre></div></div><br class="example-break" /><div class="example"><a id="idp89832528"></a><div class="example-title">例16.11 <code class="command">mdmfs</code> を用いたメモリベースディスクの新規作成</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdmfs -M -s 5m md2 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md2        4846    2  4458     0%    /mnt</pre></div></div><br class="example-break" /><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> のコマンドラインの <code class="option">malloc</code> を
	<code class="option">swap</code> に置き換えることで、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a>
	関数によるファイルシステムを使用する代わりに
	スワップ領域を使用することが可能です。デフォルトでは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>
	ユーティリティはスワップベースのディスクを作成します
	(<code class="option">-M</code> なし)。詳細は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> および
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a> マニュアルページを参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89840976"></a>16.10.5. システムからメモリディスクを切り離す</h3></div></div></div><a id="idp89841616" class="indexterm"></a><p>メモリベースまたはファイルベースのファイルシステムが使用されていない場合、
	すべてのリソースをシステムに開放するべきです。
	はじめにファイルシステムをアンマウントします。
	次にシステムからディスクを切り離し、リソースを開放するために
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> を使用します。</p><p>たとえば <code class="filename">/dev/md4</code> によって使用されたすべてのリソースを切り離し、開放するには以下のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -d -u 4</code></strong></pre><p><code class="command">mdconfig -l</code> コマンドを使用することによって、
	設定された <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> デバイスについての情報を表示することが可能です。</p><p>FreeBSD 4.X では <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a> はデバイスを切り離すのに使用されます。たとえば <code class="filename">/dev/vn4</code> によって使用されたすべてのリソースを切り離し、開放するには以下のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vnconfig -u vn4</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="snapshots"></a>16.11. ファイルシステムのスナップショット</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span> <span class="firstname">Tom</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp89852368" class="indexterm"></a><p>FreeBSD 5.0 は
      Soft Updates
      
      と協調するファイルシステムスナップショットという新しい機能を提供します。</p><p>スナップショットは指定したファイルシステムのイメージを作成し、
      また、ファイルとして扱うことができるようになります。
      スナップショットファイルはアクションが実行されるファイルシステム内で作成されなければなりません。
      また、ユーザは一つのファイルシステムあたり 20
      までスナップショットを作成することができます。
      有効なスナップショットはスーパーブロック内に記録されるので、
      リブートしてから永続的にアンマウントおよびリマウントを記録します。
      スナップショットが必要無くなったときは、
      標準の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rm</span>(1)</span></a> コマンドを用いて削除することができます。
      スナップショットはどんな順番で削除してもよいのですが、
      その他のスナップショットが開放されたブロックのうちいくらかをおそらく必要とするので、
      使用されていたすべてのスペースを得られるとは限りません。</p><p>初めてスナップショットを作成すると、<code class="systemitem">root</code>
      でさえも書き込めないように <code class="option">schg</code>
      フラグ (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a> のマニュアルページを参照) が設定されます。
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=unlink&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">unlink</span>(1)</span></a> コマンドは、スナップショットに <code class="option">schg</code>
      フラグが設定されていてもそれらを削除することのできる例外です。
      したがって、スナップショットファイルを削除する前に、
      <code class="option">schg</code> フラグをクリアする必要はありません。</p><p>スナップショットは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> コマンドを用いて作成されます。
      <code class="filename">/var</code> のスナップショットを
      <code class="filename">/var/snapshot/snap</code> に作成したいときは、
      以下のコマンドを使用します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -u -o snapshot /var/snapshot/snap /var</code></strong></pre><p>また、スナップショットを作成するのに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mksnap_ffs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mksnap_ffs</span>(8)</span></a>
      も使えます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mksnap_ffs /var /var/snapshot/snap</code></strong></pre><p>スナップショットにはいくつかの利用法があります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>スナップショットをバックアップ目的に使用する管理者もいます。
	  なぜならスナップショットは CD やテープに転送できるからです。</p></li><li class="listitem"><p>ファイルの完全性を検証するために、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> をスナップショットに実行してもよいでしょう。
	  スナップショットをマウントしたときにそのファイルシステムがクリーンであったとすると、
	  そのスナップショットをマウントするときはいつでもクリーンな
	  (そして変更のない) 結果を得るでしょう。
	  これは本質的には バックグラウンド <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> が行うことです。</p></li><li class="listitem"><p>スナップショット上で <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> ユーティリティを実行すると、
	  スナップショットのファイルシステムとタイムスタンプが一致するダンプが返されるでしょう。
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> は <code class="option">-L</code> オプションを使用することで、
	  一つのコマンドでスナップショットをとり、ダンプイメージを作成して、スナップショットを削除することが可能です。</p></li><li class="listitem"><p>ファイルシステムの <span class="quote">「<span class="quote">凍結された</span>」</span> イメージとしてスナップショットを
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> します。
	  <code class="filename">/var/snapshot/snap</code> のスナップショットを
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> するには以下のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f /var/snapshot/snap -u 4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -r /dev/md4 /mnt</code></strong></pre></li></ul></div><p>これで <code class="filename">/mnt</code> にマウントした
      凍結状態の <code class="filename">/var</code> ファイルシステム構造を探索できます。
      すべてがスナップショットが作成された時と同じ状態になるはずです。ただし、
      以前に作成されたスナップショットがサイズ 0 のファイルとして現れることが唯一の例外です。
      スナップショットの使用を終えた場合、以下のようにアンマウントできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umount /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mdconfig -d -u 4</code></strong></pre><p><code class="option">softupdates</code>
      およびファイルシステムスナップショットに関する詳細については、
      <a class="link" href="http://www.mckusick.com/" target="_top">http://www.mckusick.com/</a>
      にある Marshall Kirk McKusick のウェブサイトを参照してください。
      ここには技術的な論文もあります。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="quotas"></a>16.12. ファイルシステムクォータ</h2></div></div></div><a id="idp89896784" class="indexterm"></a><a id="idp89897936" class="indexterm"></a><p>クォータは OS の持っているオプショナルな機能であり、
      ファイルシステム毎にユーザやグループのメンバが使用するディスク容量やファイルの数を制限することができます。
      この機能は、あるユーザやグループに割り当てられるリソースの量を制限することが望ましいようなタイムシェアリングシステムにおいてよく用いられます。
      この機能を用いることによって使用可能なディスク容量の全てを一人のユーザやユーザのグループが使ってしまうことを防ぐことができます。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89898832"></a>16.12.1. ディスククォータを使うためのシステム設定</h3></div></div></div><p>ディスククォータの設定を始める前に、
	まずはカーネルにクォータが組み込まれていることを確認しましょう。
	カーネルのコンフィグレーションファイルに次の行を入れます。</p><pre class="programlisting">options QUOTA</pre><p>標準の <code class="filename">GENERIC</code> カーネルでは、
	この機能は有効になっていませんので、
	ディスククォータを利用するためには上記を設定後カーネルを構築しなおし、
	作成されたカスタムカーネルをインストールしなければいけません。
	カーネルのコンフィグレーションに関しては
	<a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a> をご覧ください。</p><p>次に <code class="filename">/etc/rc.conf</code>
	でディスククォータを有効にする必要があります。
	次の行を加えましょう。</p><pre class="programlisting">enable_quotas="YES"</pre><a id="idp89902544" class="indexterm"></a><p>起動時の動作をさらに細かくコントロールするためにもう一つ設定用の変数があります。
	通常、起動時には <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotacheck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotacheck</span>(8)</span></a>
	によりそれぞれのファイルシステムのクォータの整合性がチェックされます。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotacheck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotacheck</span>(8)</span></a> の役割は、
	クォータデータベースのデータが正しくファイルシステム上のデータを反映しているか確認することです。
	これはかなり時間を食う処理であり、
	起動にかかる時間に大きな影響を及ぼします。
	このステップをとばしたい人のために
	<code class="filename">/etc/rc.conf</code> に次の変数が用意されています。</p><pre class="programlisting">check_quotas="NO"</pre><p>もし 3.2-RELEASE よりも前の FreeBSD
	を使っているならば設定はもっと単純で、一つの変数のみです。
	次の行を <code class="filename">/etc/rc.conf</code> で設定してください。</p><pre class="programlisting">check_quotas="YES"</pre><p>最後に、ファイルシステム毎にディスククォータを有効にするために
	<code class="filename">/etc/fstab</code> を編集する必要があります。
	ここでユーザもしくはグループ、
	あるいはその両方にクォータを設定することができるのです。</p><p>あるファイルシステム上にユーザ毎のクォータを有効にする場合には、
	<code class="filename">/etc/fstab</code>
	中でクォータを有効にしたいファイルシステムエントリのオプション部に
	<code class="option">userquota</code> を加えます。
	例えば次のようになります。</p><pre class="programlisting">/dev/da1s2g   /home    ufs rw,userquota 1 2</pre><p>同様に、グループクォータを有効にするには
	<code class="option">userquota</code> キーワードの代わりに
	<code class="option">groupquota</code> を用います。
	ユーザとグループの両方のクォータを有効にするには次のようにします。</p><pre class="programlisting">/dev/da1s2g    /home    ufs rw,userquota,groupquota 1 2</pre><p>デフォルトでは、
	クォータファイルはそのファイルシステムのルートディレクトリに
	ユーザ用、グループ用それぞれ
	<code class="filename">quota.user</code>, <code class="filename">quota.group</code>
	という名前で置かれます。さらに詳しい情報は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a>
	をご覧ください。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a>
	マニュアルには別の場所を指定することができると書いてはありますが、
	あまり勧められません。なぜなら、
	様々なクォータ関係のユーティリティがそれにうまく対処できるようにないためです。</p><p>この時点で、
	一度システムを再起動して新しいカーネルで立ち上げましょう。
	<code class="filename">/etc/rc</code> が自動的に適当なコマンドを実行し、
	<code class="filename">/etc/fstab</code>
	で有効にした全てのクォータ用に初期ファイルを作ってくれます。
	従って、空のクォータファイルを手で作る必要は一切ありません。</p><p>通常の運用では <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotacheck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotacheck</span>(8)</span></a> や
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotaon&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotaon</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotaoff&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotaoff</span>(8)</span></a>
	といったコマンドを手で動かす必要はないのですが、
	慣れるためにもこれらのマニュアルは読んでおきましょう。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89918416"></a>16.12.2. クォータリミットの設定</h3></div></div></div><a id="idp89919056" class="indexterm"></a><p>一旦クォータを有効にしたら本当に有効になっているのか確認しておきましょう。簡単な方法は次のコマンドを実行することです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>quota -v</code></strong></pre><p>ディスクの使用状況と、クォータが有効になっているファイルシステムのクォータリミットが一行にまとめて出力されるでしょう。</p><p>さあ、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a> でクォータリミットを設定する準備ができました。</p><p>ユーザやグループが使用できるディスク容量や作成できるファイルの数に制限をかけるにはいくつかのオプションがあります。割り当てディスク容量を制限
	(ブロッククォータ) することもファイル数を制限 (inode クォータ)
	することも、両者を組み合わせることもできるのです。
	これらの制限はそれぞれさらに二つのカテゴリ、
	ハードリミットとソフトリミット、に分けることができます。</p><a id="idp89960400" class="indexterm"></a><p>ハードリミットを越えることはできません。
	あるユーザが一旦ハードリミットにたっした場合、
	そのファイルシステムではそれ以上の割り当ては望めません。
	例えばあるファイルシステム上に
	500 ブロックのハードリミットが設定されており現在
	490 ブロックを使用している場合、さらに 10 ブロックしか使えないのです。
	11 ブロックを使おうとすると失敗します。</p><a id="idp89961296" class="indexterm"></a><p>一方、
	ソフトリミットはある限られた時間内であれば越えることができます。
	この時間は猶予期間として知られており、デフォルトでは 1 週間です。
	あるユーザが自分のソフトリミットを猶予期間よりも長い間越えているとソフトリミットはハードリミットに変わり、それ以上使用することはできなくなります。
	ユーザがソフトリミットよりも減らせば猶予期間はリセットされます。</p><p>以下は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a>
	コマンドを実行した時に見ることになるであろう例です。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a> コマンドが起動されると環境変数
	<code class="envar">EDITOR</code> で指定されるエディタに入ります。
	<code class="envar">EDITOR</code> が設定されていない場合には
	<span class="application">vi</span> が起動されます。
	ここでクォータリミットを編集します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>edquota -u test</code></strong></pre><pre class="programlisting">Quotas for user test:
/usr: blocks in use: 65, limits (soft = 50, hard = 75)
        inodes in use: 7, limits (soft = 50, hard = 60)
/usr/var: blocks in use: 0, limits (soft = 50, hard = 75)
        inodes in use: 0, limits (soft = 50, hard = 60)</pre><p>通常、クォータが有効になっているファイルシステム毎に 2 行あります。
	一つはブロックリミット用でもう一つは inode リミット用です。
	クォータリミットを変更したいところを書き変えるだけでかまいません。
	たとえばこのユーザのブロックリミットを、ソフトリミットは 50 から 500
	へ、ハードリミットは 75 から 600 に変更する場合、</p><pre class="programlisting">/usr: blocks in use: 65, limits (soft = 50, hard = 75)</pre><p>から</p><pre class="programlisting"> /usr: blocks in use: 65, limits (soft = 500, hard = 600)</pre><p>へ書き換えます。新しいクォータリミットはエディタを終了すれば設定されます。</p><p>ある範囲の UID
	に対してクォータリミットを設定したい場合がありますが、このような時には
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a> コマンドの <code class="option">-p</code>
	オプションを使うといいでしょう。まず、
	あるユーザに割り当てたいクォータリミットを設定し、次に
	<code class="command">edquota -p protouser startuid-enduid</code>
	を実行するのです。例えばユーザ <code class="systemitem">test</code>
	にお望みのクォータリミットが付いているとしましょう。
	次のコマンドにより 10,000 から 19,999 の間の UID
	に対して同じクォータリミットを付けることができるのです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>edquota -p test 10000-19999</code></strong></pre><p>さらに詳しいことは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a> のマニュアルページをご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89993808"></a>16.12.3. クォータリミットとディスク使用状況のチェック</h3></div></div></div><a id="idp89994448" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a> または <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=repquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">repquota</span>(8)</span></a>
	といったコマンドを使ってクォータリミットやディスクの利用状況を確認することができます。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a> コマンドは個々のユーザやグループのクォータやディスク利用状況を確認するのに使えます。
	ユーザは自身のクォータ、そして所属するグループのグループのみ確認することができます。
	スーパーユーザのみが他のユーザや所属していないグループのクォータと利用状況を見ることができます。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=repquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">repquota</span>(8)</span></a> コマンドを使うと、クォータが有効になっているファイルシステム用の全てのクォータやディスク容量のサマリを得ることができます。</p><p>以下は二つのファイルシステムにクォータ制限がかけられているユーザに対する<code class="command">quota -v</code> コマンドの出力例です。</p><pre class="programlisting">Disk quotas for user test (uid 1002):
     Filesystem  blocks   quota   limit   grace   files   quota   limit   grace
           /usr      65*     50      75   5days       7      50      60
       /usr/var       0      50      75               0      50      60</pre><a id="idp90000080" class="indexterm"></a><p>上の例で、<code class="filename">/usr</code>
	ファイルシステム上ではこのユーザは現在
	50 ブロックというソフトリミットを 15 ブロックオーバーし
	5 日間の猶予期間が残っています。アスタリスク <code class="literal">*</code>
	はクォータリミットを越えているユーザを示していることに注意してください。</p><p>通常、そのユーザが全く使っていないファイルシステムは、
	クォータリミットが付けられているとしても
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a> コマンドの出力には現われません。
	<code class="option">-v</code> オプションを用いればそのようなファイルシステム、
	上の例では <code class="filename">/usr/var</code>、
	を表示することができます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90008016"></a>16.12.4. NFS 上の クォータ</h3></div></div></div><a id="idp90008656" class="indexterm"></a><p>クォータは NFS サーバ上のクォータサブシステムにより実行されます。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.rquotad&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpc.rquotad</span>(8)</span></a> デーモンにより、NFS クライアント上の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a>
	コマンドは情報を得ることができ、クライアントマシン上のユーザが自分のクォータの統計を見ることができます。</p><p><code class="filename">/etc/inetd.conf</code> において以下のように
	<code class="command">rpc.rquotad</code> を有効にしましょう。</p><pre class="programlisting">rquotad/1      dgram rpc/udp wait root /usr/libexec/rpc.rquotad rpc.rquotad</pre><p>そして以下のように <code class="command">inetd</code> を再起動します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat /var/run/inetd.pid`</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-encrypting"></a>16.13. ディスクパーティションの暗号化</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Green</span> <span class="firstname">Lucky</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp90021968" class="indexterm"></a><p>FreeBSD
      は無許可のデータアクセスに対する優れたオンライン保護機能を提供します。
      ファイルのパーミッションおよび強制的アクセスコントロール
      (MAC: Mandatory Access Control)
      (Mandatory Access Control (MAC) を参照)
      
      は、コンピュータが動作中で、OS が実行中であるときに、
      無許可の第三者がデータにアクセスするのを防ぐことに役立ちます。
      しかしながら、攻撃者がコンピュータに物理的にアクセスし、
      機密データをコピーし分析するためにコンピュータのハードドライブを別のシステムに移動させることができれば、
      OS によって強化された許可属性は意味をなさなくなります。</p><p>攻撃者が電源の落ちたコンピュータや
      ハードドライブを手にいれる手段にかかわらず、
      <span class="application">GEOM ベースのディスク暗号化 (gbde: GEOM Based Disk Encryption)</span>
      は、著しい資源を持ち本気で攻撃を仕掛けるつもりでやってきた攻撃者からさえもコンピュータのファイルシステム上にあるデータを保護することができます。
      個々のファイルだけを暗号化する煩わしい方法と異なり、
      <span class="application">gbde</span>
      は全ファイルシステムを透過的に暗号化します。
      平文テキストは決してハードドライブのプラッタに関係しません。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90024784"></a>16.13.1. カーネルで gbde を有効にする</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong><code class="systemitem">root</code> になる</strong></p><p><span class="application">gbde</span>
	    の設定をするにはスーパユーザの権限が必要になります。
	    以下のコマンドを実行して、
	    <code class="systemitem">root</code> になってください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su -</code></strong>
Password:</pre></li><li class="step"><p class="title"><strong>オペレーティングシステムのバージョンを確かめる</strong></p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gbde</span>(4)</span></a> が動作するには FreeBSD 5.0 以降が必要です。
	    以下のコマンドを実行して、
	    オペレーティングシステムのバージョンを確認してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>uname -r</code></strong>
5.0-RELEASE</pre></li><li class="step"><p class="title"><strong>カーネルコンフィギュレーションファイルに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gbde</span>(4)</span></a>
	    対応を追加する</strong></p><p>お好みのテキストエディタを使用して、
	    以下の行をカーネルコンフィギュレーションファイルに加えます。</p><p><code class="literal">options GEOM_BDE</code></p><p>FreeBSD カーネルを設定、再コンパイル、インストールします。
	    この手順は <a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a> で説明されています。</p><p>新しいカーネルで再起動します。</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90048208"></a>16.13.2. 暗号化されたハードドライブの準備</h3></div></div></div><p>以下の例では、システムに新しいハードディスクを追加しようとしています。このシステムは単一の暗号化されたパーティションを保持することになります。
	このパーティションは <code class="filename">/private</code>
	としてマウントされます。<span class="application">gbde</span> は
	<code class="filename">/home</code> および <code class="filename">/var/mail</code>
	を暗号化するのにも使用できますが、
	より複雑な指示を必要となるのでこの解説の範疇を越えています。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>新しいハードドライブを追加する</strong></p><p><a class="xref" href="#disks-adding" title="16.3. ディスクの追加">「ディスクの追加」</a> で説明されている通りに新しいドライブをシステムに設置します。
	    この例では、新しいハードドライブは
	    <code class="filename">/dev/ad4s1c</code> パーティションに
	    加えられたものとします。
	    <code class="filename">/dev/ad0s1*</code>
	    デバイスは、この例のシステム上に存在する標準的な
	    FreeBSD パーティションを表します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls /dev/ad*</code></strong>
/dev/ad0        /dev/ad0s1b     /dev/ad0s1e     /dev/ad4s1
/dev/ad0s1      /dev/ad0s1c     /dev/ad0s1f     /dev/ad4s1c
/dev/ad0s1a     /dev/ad0s1d     /dev/ad4</pre></li><li class="step"><p class="title"><strong>gbde ロックファイルを保持するディレクトリを作成する</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /etc/gbde</code></strong></pre><p><span class="application">gbde</span> ロックファイルには、
	    暗号化されたパーティションにアクセスするのに必要となる情報が格納されています。
	    ロックファイルにアクセスしない場合、
	    <span class="application">gbde</span> は
	    膨大な手動による介在なしには (ソフトウェアは対応していません)、暗号化されたパーティションに含まれるデータを解読することはできないでしょう。
	    それぞれの暗号化されたパーティションは別々のロックファイルを使用します。</p></li><li class="step"><p class="title"><strong>gbde パーティションを初期化する</strong></p><p><span class="application">gbde</span>
	    パーティションは使用する前に初期化されなければなりません。
	    この初期化は一度だけ実行される必要があります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde init /dev/ad4s1c -i -L /etc/gbde/ad4s1c</code></strong></pre><p>エディタが開くので、
	    テンプレートをもとにさまざまなオプションを設定してください。
	    UFS1 または UFS2 で使用するには、sector_size を
	    2048 に設定してください。</p><pre class="programlisting">$FreeBSD: src/sbin/gbde/template.txt,v 1.1 2002/10/20 11:16:13 phk Exp $
#
# Sector size is the smallest unit of data which can be read or written.
# Making it too small decreases performance and decreases available space.
# Making it too large may prevent filesystems from working.  512 is the
# minimum and always safe.  For UFS, use the fragment size
#
sector_size     =       2048
[...]
</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a>
	    はデータを保護するのに使用するパスフレーズを二度尋ます。
	    パスフレーズはそれぞれ同じでなければなりません。
	    データを保護する <span class="application">gbde</span> の能力は、
	    あなたが選択したパスフレーズの品質に完全に依存します。
	    <a href="#ftn.idp90061520" class="footnote" id="idp90061520"><sup class="footnote">[5]</sup></a></p><p><code class="command">gbde init</code> コマンドは
	    <span class="application">gbde</span>
	    パーティションに対するロックファイルを作成します。この例では
	    <code class="filename">/etc/gbde/ad4s1c</code> に格納されます。</p><div xmlns="" class="caution"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">gbde</span> ロックファイルは、
	      すべての暗号化されたパーティションの内容とともにバックアップされなければ <span class="emphasis"><em>なりません</em></span>。
	      ロックファイルだけを削除している間、
	      ロックファイルなしでは信念の固い攻撃者が
	      <span class="application">gbde</span>
	      パーティションを解読することを防ぐことができない一方で、
	      正当な所有者は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> およびこの設計者にまったく支持されない膨大な量の作業なしには、
	      暗号化されたパーティション上のデータにアクセスすることができないでしょう。</p></div></li><li class="step"><p class="title"><strong>カーネルに暗号化されたパーティションを接続する</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde attach /dev/ad4s1c -l /etc/gbde/ad4s1c</code></strong></pre><p>暗号化されたパーティションを初期化する際に選択したパスフレーズを入力するように求められます。
	    新しい暗号化デバイスは <code class="filename">/dev</code> に
	    <code class="filename">/dev/device_name.bde</code>
	    として現れます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls /dev/ad*</code></strong>
/dev/ad0        /dev/ad0s1b     /dev/ad0s1e     /dev/ad4s1
/dev/ad0s1      /dev/ad0s1c     /dev/ad0s1f     /dev/ad4s1c
/dev/ad0s1a     /dev/ad0s1d     /dev/ad4        /dev/ad4s1c.bde</pre></li><li class="step"><p class="title"><strong>暗号化デバイス上にファイルシステムを作成する</strong></p><p>カーネルに暗号化デバイスが接続されると、
	    デバイス上にファイルシステムを作成できます。
	    暗号化デバイス上にファイルシステムを作成するには <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>
	    を使用します。従来の UFS1 ファイルシステムで初期化するより、
	    新しい UFS2 ファイルシステムで初期化した方が高速なので、
	    <code class="option">-O2</code> オプションとともに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>
	    を使用することが推奨されています。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.1-RELEASE 以降では、<code class="option">-O2</code>
	      オプションはデフォルトです。</p></div><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs -U -O2 /dev/ad4s1c.bde</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> は、デバイス名に
	      <code class="filename">*.bde</code>
	      拡張子によって認識される、
	      接続された <span class="application">gbde</span>
	      パーティションに対して実行されなければなりません。</p></div></li><li class="step"><p class="title"><strong>暗号化パーティションをマウントする</strong></p><p>暗号化ファイルシステムに対するマウントポイントを作成します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /private</code></strong></pre><p>暗号化ファイルシステムをマウントします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad4s1c.bde /private</code></strong></pre></li><li class="step"><p class="title"><strong>暗号化ファイルシステムが利用可能か確かめる</strong></p><p>これで暗号化ファイルシステムは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=df&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">df</span>(1)</span></a> で見ることができ、
	    利用する準備ができました。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>df -H</code></strong>
Filesystem        Size   Used  Avail Capacity  Mounted on
/dev/ad0s1a      1037M    72M   883M     8%    /
/devfs            1.0K   1.0K     0B   100%    /dev
/dev/ad0s1f       8.1G    55K   7.5G     0%    /home
/dev/ad0s1e      1037M   1.1M   953M     0%    /tmp
/dev/ad0s1d       6.1G   1.9G   3.7G    35%    /usr
/dev/ad4s1c.bde   150G   4.1K   138G     0%    /private</pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90092880"></a>16.13.3. 存在する暗号化ファイルシステムをマウントする</h3></div></div></div><p>システムを起動する度に、すべての暗号化ファイルシステムは
	使用前にカーネルに接続し、
	エラーの有無をチェックし、マウントする必要があります。
	必要なコマンドは <code class="systemitem">root</code>
	ユーザとして実行されなければなりません。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>カーネルに gbde パーティションを接続する</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde attach /dev/ad4s1c -l /etc/gbde/ad4s1c</code></strong></pre><p>パーティションの暗号化を初期化する際に選択したパスフレーズを入力するように求められるでしょう。</p></li><li class="step"><p class="title"><strong>ファイルシステムのエラーをチェックする</strong></p><p>暗号化ファイルシステムを自動的にマウントするために
	    <code class="filename">/etc/fstab</code> に設定を掲載することはまだできないため、
	    マウントする前に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> を実行して、
	    ファイルシステムのエラーをチェックしなければなりません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fsck -p -t ffs /dev/ad4s1c.bde</code></strong></pre></li><li class="step"><p class="title"><strong>暗号化ファイルをマウントする</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad4s1c.bde /private</code></strong></pre><p>これで暗号化ファイルシステムが利用できるようになりました。</p></li></ol></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90106448"></a>16.13.3.1. 暗号化パーティションを自動的にマウントする</h4></div></div></div><p>スクリプトを作成して、暗号化パーティションを自動的に接続、
	  チェック、マウントすることは可能です。しかしながら、
	  安全上の理由によりスクリプトに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a>
	  パスワードを含めるべきではありません。その代わりに、コンソールまたは
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> による接続からパスワードを入力するようなスクリプトが手動で実行されることが推奨されます。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90109392"></a>16.13.4. gbde が採用した暗号の保護</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> は 128bit AES の
	CBC モードを使用してセクタペイロードを暗号化します。
	ディスク上のそれぞれのセクタは異なる AES 鍵で暗号化されます。
	セクタ鍵がユーザが入力したパスフレーズからどのように導き出されるかを含め、
	<span class="application">gbde</span> の暗号手法の設計についての詳細は、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gbde</span>(4)</span></a> を参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90112336"></a>16.13.5. 互換性に関する問題</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> は
	<span class="application">gbde</span> 暗号化デバイスと互換性がありません。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> を実行する前に
	<code class="filename">*.bde</code>
	デバイスはすべてカーネルから切断されなければなりません。
	そうしないと、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> が初めにデバイスを走査する際にクラッシュしてしまうでしょう。
	暗号化デバイスを切断するには、以下のコマンドを使用します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde detach /dev/ad4s1c</code></strong></pre></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp90061520" class="footnote"><p><a href="#idp90061520" class="para"><sup class="para">[5] </sup></a>記憶するのが簡単で、
		安全なパスフレーズを選択する方法については、
		<a class="link" href="http://world.std.com/~reinhold/diceware.html" target="_top">
		  Diceware Passphrase</a>
		ウェブサイトを参照してください。</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="l10n"></a>第17章 地域化 (localization) - I18N/L10N の利用と設定</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Chernov</span> <span class="firstname">Andrey</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">改訂: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Wu</span> <span class="firstname">Michael C.</span> [FAMILY Given]</span>. </span></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#l10n-synopsis">17.1. この章では</a></span></dt><dt><span class="sect1"><a href="#l10n-basics">17.2. 基礎知識</a></span></dt><dt><span class="sect1"><a href="#using-localization">17.3. 地域化の利用</a></span></dt><dt><span class="sect1"><a href="#l10n-compiling">17.4. 国際化に対応したプログラムのコンパイル</a></span></dt><dt><span class="sect1"><a href="#lang-setup">17.5. FreeBSD を特定の言語に地域化する</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="l10n-synopsis"></a>17.1. この章では</h2></div></div></div><p>FreeBSD は、ユーザーおよび貢献者が世界中にいる、非常に分散した
      プロジェクトです。この章では、英語以外の言語を使うユーザーの実用に
      耐えられるようにする FreeBSD の国際化 (internationalization) と
      地域化 (localization) 機能について解説します。
      システムレベルでもアプリケーションレベルでも、国際化の実装には
      様々な側面があるので、必要に応じて読者に対してより専門的な文書情報を
      示すことにします。</p><p>この章では、以下の分野について説明します。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>近代的なオペレーティングシステムで、異なる言語および
	  ロケールがどのように符号化されているか。</p></li><li class="listitem"><p>ログインシェルでロケールを設定するには
	  どうするか。</p></li><li class="listitem"><p>コンソールを英語以外の言語用に設定するには
	  どうするか。</p></li><li class="listitem"><p>様々な言語で効率的に X Window System を使うには
	  どうすればよいか。</p></li><li class="listitem"><p>国際化されたアプリケーションを書くための
	  情報はどこにあるか。</p></li></ul></div><p>この章を読む前に、以下のことを理解しておく必要があります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>サードパーティ製アプリケーションのインストール方法
	  (<a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a>)。</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="l10n-basics"></a>17.2. 基礎知識</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90142288"></a>17.2.1. I18N/L10N とは?</h3></div></div></div><a id="idp90142928" class="indexterm"></a><a id="idp90144080" class="indexterm"></a><p>開発者たちはしばしば、internationalization を縮めて I18N
	と表記します。18 は internationalization の最初と最後の間の
	文字数です。L10N も同じ命名法を用いて
	<span class="quote">「<span class="quote">localization</span>」</span> を縮めたものです。
	これらを合わせて、I18N/L10N された (すなわち国際化/地域化された)
	手法、プロトコル、アプリケーションは、自分達の好みの言語を
	使うことを可能にしてくれます。</p><p>国際化されたアプリケーションはライブラリとして国際化キット
	を用いてプログラミングされています。
	これは開発者が単純なファイルを書いて、
	表示されるメニューやテキストを各国語に翻訳できるようにしてくれます。
	プログラマのみなさんには、
	これらの方法を利用することを強く推奨します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90150096"></a>17.2.2. なぜ I18N/L10N を使わなければいけないの?</h3></div></div></div><p>英語以外の言語を見たり、入力したり、処理したりする場合はいつでも、
	I18N/L10N が使われます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90151248"></a>17.2.3. I18N で使えるようになる言語には何があるの?</h3></div></div></div><p>I18N や L10N は FreeBSD に限った話題ではありません。
	現在では、世界中の主要な言語のほとんどから選ぶことができます。
	たとえば中国語、ドイツ語、日本語、韓国語、フランス語、ロシア語、
	ベトナム語などがありますが、これらに限定されるわけではありません。</p><a id="idp90152400" class="indexterm"></a></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-localization"></a>17.3. 地域化の利用</h2></div></div></div><p>I18N は FreeBSD に特有のものではなく、一つの考え方です。
      以下の慣習にしたがって FreeBSD を利用するようにしてください。</p><p>地域化の設定は言語コード、
      国コード、エンコーディングという三つの用語を基本とします。
      ロケール名はこれらから以下のように構成されます。</p><pre class="programlisting"><em class="replaceable"><code>言語コード</code></em>_<em class="replaceable"><code>国コード</code></em>.<em class="replaceable"><code>エンコーディング</code></em></pre><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90155984"></a>17.3.1. 言語コードと国コード</h3></div></div></div><a id="idp90156624" class="indexterm"></a><a id="idp90157136" class="indexterm"></a><p>FreeBSD (やその他の国際化をサポートした <span class="trademark">UNIX</span>®-like なシステム)
	を特定の言語に地域化するには、
	国と言語を特定するためのコードを知る必要があります
	(国コードはアプリケーションに指定された言語のどの変種
	(variation) を用いれば良いかを教えてくれます)。
	加えて、ウェブブラウザ、SMTP/POP サーバ、
	ウェブサーバなどもこれらを元に様々な選択を行います。
	以下は言語/国コードの例です。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>言語/国コード</th><th>説明</th></tr></thead><tbody><tr><td>en_US</td><td>英語 (合衆国)</td></tr><tr><td>ru_RU</td><td>ロシア語 (ロシア)</td></tr><tr><td>zh_TW</td><td>繁体字中国語 (台湾)</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90165328"></a>17.3.2. エンコーディング</h3></div></div></div><a id="idp90170192" class="indexterm"></a><a id="idp90170704" class="indexterm"></a><p>いくつかの言語では、8-bit やワイド文字、
	多バイト文字など ASCII とは異なったエンコード法を用います
	(<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=multibyte&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">multibyte</span>(3)</span></a> 参照)。
	古いアプリケーションはこれらを認識せず、
	誤ってコントロール文字として認識してしまいます。
	最近のアプリケーションは、大抵 8-bit 文字を認識します。
	実装方法にも依りますが、アプリケーションのコンパイル時もしくは
	configure 時に、ワイド/多バイト文字のサポートを指定する必要があるかも知れません。
	ワイド/多バイト文字を入力したり処理したりすることを可能にするために、
	<a class="link" href="../../../../ja/ports/index.html" target="_top">FreeBSD Ports Collection</a>
	では各言語向けに異なったプログラムを提供しています。
	各 FreeBSD Port の国際化文書を参照してください。
      </p><p>特に、正しく configure したり、configure/Makefile/
	コンパイラに適切な値を渡すために、アプリケーションの
	文書を良く読む必要があります。</p><p>次のことを心に留めておいてください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>言語固有の、C 言語の char で表現できる
	    シングルバイトの文字セット
	    (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=multibyte&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">multibyte</span>(3)</span></a> を参照)、たとえば
	    ISO8859-1, ISO8859-15, KOI8-R, CP437。</p></li><li class="listitem"><p>ワイド、多バイトのエンコーディング、たとえば EUC, Big5。
	  </p></li></ul></div><p>現在有効な文字セットのリストに関しては
	<a class="link" href="http://www.iana.org/assignments/character-sets" target="_top">IANA Registry</a>
	をチェックしてください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD
	  では、X11 互換のロケール符号を用いています。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90178256"></a>17.3.3. 国際化アプリケーション</h3></div></div></div><p>FreeBSD の ports/packages システムでは、
	それとひと目でわかるように国際化アプリケーションには名前に
	<code class="literal">I18N</code> という文字が含まれています。
	ただし、それらのアプリケーションが常にあなたの望む言語を
	サポートしているとは限りません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="setting-locale"></a>17.3.4. ロケールの設定</h3></div></div></div><p>通常は、ログインシェルで環境変数 <code class="envar">LANG</code> に
	ロケール名を設定し export すれば十分です。これは、ユーザーの
	<code class="filename">~/.login_conf</code> ファイル、またはユーザーの
	シェルの初期設定ファイル (<code class="filename">~/.profile</code>,
	<code class="filename">~/.bashrc</code>, <code class="filename">~/.cshrc</code>)
	でできます。
	<code class="envar">LC_CTYPE</code> や <code class="envar">LC_CTIME</code> のような
	ロケールのサブセットを設定する必要はありません。
	詳細に関しては、各言語向けの FreeBSD 文書を参照してください。</p><p>以下の二つの環境変数を設定ファイルで指定する必要があります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="idp90184528" class="indexterm"></a><p><span class="trademark">POSIX</span>® <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setlocale&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">setlocale</span>(3)</span></a> 関連の関数のための
	    <code class="envar">LANG</code></p></li><li class="listitem"><a id="idp90191440" class="indexterm"></a><p>アプリケーション用の MIME 文字セットのための
	    <code class="envar">MM_CHARSET</code></p></li></ul></div><p>これにはユーザのシェルの設定、アプリケーション固有の設定、
	X11 の設定などが含まれます。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90193232"></a>17.3.4.1. ロケールを設定する方法</h4></div></div></div><a id="idp90193872" class="indexterm"></a><a id="idp90194384" class="indexterm"></a><p>ロケールを設定するには以下で説明するように、二つの方法があります。
	  一つは推奨される方法で、<a class="link" href="#login-class" title="17.3.4.1.1. ログインクラスを用いる方法">ログインクラス (login
	  class)</a> において環境変数に割り当てる方法。
	  もう一つはシステムのシェル
	  <a class="link" href="#startup-file" title="17.3.4.1.2. シェルの初期化ファイルによる方法">初期化ファイル</a>
	  において環境変数の指定を追加する方法です。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="login-class"></a>17.3.4.1.1. ログインクラスを用いる方法</h5></div></div></div><p>この方法では、
	    各シェルの初期化ファイルに特定のシェル設定を追加する代わりに、
	    すべてのシェルにおいて一度に必要なロケール名と MIME
	    文字セットを環境変数に割り当てることができます。
	    <a class="link" href="#usr-setup" title="17.3.4.1.1.1. ユーザの設定">ユーザの設定</a>はユーザ自身で行なえますが、
	    <a class="link" href="#adm-setup" title="17.3.4.1.1.2. 管理者の設定">管理者の設定</a>にはスーパユーザの権限が必要となります。</p><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="usr-setup"></a>17.3.4.1.1.1. ユーザの設定</h6></div></div></div><p>ユーザのホームディレクトリの
	      <code class="filename">.login_conf</code> ファイルを用いて、
	      両方の変数に Latin-1 エンコーディングを設定する
	      簡単な例は次の通りです。</p><pre class="programlisting">me:\
	:charset=ISO-8859-1:\
	:lang=de_DE.ISO8859-1:</pre><a id="idp90204624" class="indexterm"></a><p>これは、BIG-5 エンコーディングされた繁体字中国語用の環境変数を設定する
	      <code class="filename">.login_conf</code> の一例です。
	      中国語、日本語、韓国語用のロケール変数を
	      正しく認識しないソフトウェアに対処するため、
	      よりたくさんの変数を設定していることに注目してください。</p><pre class="programlisting">#Users who do not wish to use monetary units or time formats
#of Taiwan can manually change each variable
me:\
	:lang=zh_TW.Big5:\
	:lc_all=zh_TW.Big:\
	:lc_collate=zh_TW.Big5:\
	:lc_ctype=zh_TW.Big5:\
	:lc_messages=zh_TW.Big5:\
	:lc_monetary=zh_TW.Big5:\
	:lc_numeric=zh_TW.Big5:\
	:lc_time=zh_TW.Big5:\
	:charset=big5:\
	:xmodifiers="@im=xcin": #Setting the XIM Input Server</pre><p>詳細に関しては
	      <a class="link" href="#adm-setup" title="17.3.4.1.1.2. 管理者の設定">管理者の設定</a> と
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> を参照してください。</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="adm-setup"></a>17.3.4.1.1.2. 管理者の設定</h6></div></div></div><p><code class="filename">/etc/login.conf</code> において、
	      正しい言語がユーザのクラスに指定されていることを確認してください。
	      <code class="filename">/etc/login.conf</code> は、このようになります。</p><pre class="programlisting"><em class="replaceable"><code>language_name</code></em>:<em class="replaceable"><code>accounts_title</code></em>:\
	:charset=<em class="replaceable"><code>MIME_charset</code></em>:\
	:lang=<em class="replaceable"><code>locale_name</code></em>:\
	:tc=default:</pre><p>先ほどの例のように Latin-1
	      での設定はこのようになります。</p><pre class="programlisting">german:German Users Accounts:\
	:charset=ISO-8859-1:\
	:lang=de_DE.ISO8859-1:\
	:tc=default:</pre><p>ユーザのログインクラスを変更する前に次のコマンドを実行して、
	      <code class="filename">/etc/login.conf</code>
	      の新たな設定がシステムに見えるようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cap_mkdb /etc/login.conf</code></strong></pre><h5 class="title"><a id="idp90214480"></a>ログインクラスを <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a> で変更する</h5><a id="idp90215760" class="indexterm"></a><p>新しいユーザを追加するために <code class="command">vipw</code>
	      を用います。そして以下のようなエントリを作成します。</p><pre class="programlisting">user:password:1111:11:<em class="replaceable"><code>language</code></em>:0:0:User Name:/home/user:/bin/sh</pre><h5 class="title"><a id="idp90218192"></a>ログインクラスを <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> で変更する</h5><a id="idp90219600" class="indexterm"></a><a id="idp90220496" class="indexterm"></a><p>新しいユーザを追加するために <code class="command">adduser</code>
	      を用います。そして以下の手順を踏みます。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/etc/adduser.conf</code> で
		  <code class="literal">defaultclass = language</code>
		  と設定します。
		  この場合、他の言語のユーザには
		  <code class="literal">default</code> クラスを指定することを
		  忘れないでください。</p></li><li class="listitem"><p>もうひとつの方法は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> が
</p><pre class="screen"><code class="prompt">Enter login class: default []: </code></pre><p>
		  と聞いてきたときに、毎回言語を指定するやり方です。</p></li><li class="listitem"><p>さらに別の方法は、異なる言語を利用するユーザを
		  追加する際に、以下のようにするやり方です。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>adduser -class language</code></strong></pre></li></ul></div><h5 class="title"><a id="idp90235984"></a>ログインクラスを <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> で変更する</h5><a id="idp90237264" class="indexterm"></a><p>新しいユーザを追加するために <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> を
	      用いる場合、以下の形式で実行します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw useradd user_name -L language</code></strong></pre></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="startup-file"></a>17.3.4.1.2. シェルの初期化ファイルによる方法</h5></div></div></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">シェルごとに異なった設定が必要なため、
	      この方法は推奨されません。
	      代わりに <a class="link" href="#login-class" title="17.3.4.1.1. ログインクラスを用いる方法">ログインクラスを用いる方法</a>を使ってください。</p></div><a id="idp90242640" class="indexterm"></a><a id="idp90243152" class="indexterm"></a><p>ロケール名と MIME 文字コードを追加するには、
	    <code class="filename">/etc/profile</code> や
	    <code class="filename">/etc/csh.login</code> などのシェル初期化ファイル
	    に以下の二つの環境変数を設定します。
	    以下に示す例は、ドイツ語の設定です。</p><p><code class="filename">/etc/profile</code> では
            次のように設定します。</p><pre class="programlisting"><code class="envar">LANG=de_DE.ISO8859-1; export LANG</code>
<code class="envar">MM_CHARSET=ISO-8859-1; export MM_CHARSET</code></pre><p>また <code class="filename">/etc/csh.login</code> では
            次のように設定します。</p><pre class="programlisting"><code class="envar">setenv LANG de_DE.ISO8859-1</code>
<code class="envar">setenv MM_CHARSET ISO-8859-1</code></pre><p>もしくは、上記のやり方を
	    <code class="filename">/usr/share/skel/dot.profile</code>
	    (<code class="filename">/etc/profile</code> と同形式) や
	    <code class="filename">/usr/share/skel/dot.login</code>
	    (<code class="filename">/etc/csh.login</code> と同形式)
	    に追加することもできます。</p><p>X11 では、
	    <code class="filename">$HOME/.xinitrc</code> に
	    使用しているシェルに合った形式で</p><pre class="programlisting"><code class="envar">LANG=de_DE.ISO8859-1; export LANG</code></pre><p>もしくは、</p><pre class="programlisting"><code class="envar">setenv LANG de_DE.ISO8859-1</code></pre><p>と指定します。</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="setting-console"></a>17.3.5. コンソールの設定</h3></div></div></div><p>C 言語の char で表現できるシングルバイトの文字セット用に、
	<code class="filename">/etc/rc.conf</code>
	でその言語に対応した適切なコンソールフォントを指定してください。</p><pre class="programlisting">font8x16=<em class="replaceable"><code>フォント名</code></em>
font8x14=<em class="replaceable"><code>フォント名</code></em>
font8x8=<em class="replaceable"><code>フォント名</code></em></pre><p>ここで <em class="replaceable"><code>フォント名</code></em>
	は <code class="filename">/usr/share/syscons/fonts</code> ディレクトリ
	にあるフォントファイルから <code class="filename">.fnt</code>
	という拡張子を除いたものです。</p><a id="idp90262096" class="indexterm"></a><a id="idp90262992" class="indexterm"></a><a id="idp90263504" class="indexterm"></a><p>また、<code class="command">sysinstall</code> (FreeBSD バージョンが 5.2
	よりも古い場合は <code class="command">/stand/sysinstall</code>)
	を使って、C 言語の char で表現できるシングルバイトの文字セット用の正しい
	キーマップとスクリーンマップを指定するようにしてください。
	<span class="application">sysinstall</span> では、<span class="guimenuitem">Configure</span>
	を選択し、<span class="guimenuitem">Console</span> を選択します。
	もしくは、<code class="filename">/etc/rc.conf</code>
	に以下の行を加えてください。</p><pre class="programlisting">scrnmap=<em class="replaceable"><code>スクリーンマップ名</code></em>
keymap=<em class="replaceable"><code>キーマップ名</code></em>
keychange="<em class="replaceable"><code>ファンクションキー番号の並び</code></em>"</pre><p>ここで <em class="replaceable"><code>スクリーンマップ名</code></em>
	は <code class="filename">/usr/share/syscons/scrnmaps</code> ディレクトリ
	にあるマップファイルから <code class="filename">.scm</code>
	という拡張子を除いたものです。
	VGA アダプタが疑似グラフィクス領域のフォント文字マトリクスで
	bit 8 を bit 9 に拡張することに対処するために
	(例えばスクリーンフォントが
	bit 8 列を使っている時に文字をその領域から外に移動する場合)、
	フォントに適切にマップされたスクリーンマップが必要となります。
      </p><p>もし、<code class="filename">/etc/rc.conf</code> を以下のように設定して、
	<span class="application">moused</span> デーモンを有効化している場合は、
	次の段落に書かれているマウスカーソルに関する情報を確認してください。</p><pre class="programlisting">moused_enable="YES"</pre><a id="idp90275792" class="indexterm"></a><p>設定省略時には、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syscons&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">syscons</span>(4)</span></a> ドライバのマウスカーソルは
	キャラクタセット中の 0xd0-0xd3 の範囲を占めています。そのため、
	利用している言語がこの範囲のキャラクタセットを使っている場合、
	カーソルの占める範囲を重ならないように移動させなければなりません。
	FreeBSD でこれを回避するには、次の行を
	<code class="filename">/etc/rc.conf</code> に追加してください。</p><pre class="programlisting">mousechar_start=3</pre><p><em class="replaceable"><code>キーマップ名</code></em> は
	<code class="filename">/usr/share/syscons/keymaps</code>
	ディレクトリにあるキーマップファイルから <code class="filename">.kbd</code>
	という拡張子を除いたものです。
	どのキーマップを使うかよくわからないなら、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kbdmap&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kbdmap</span>(1)</span></a>
	で再起動せずにキーマップを試すことができます。</p><p>ファンクションキーの並びはキーマップにより定義されてはいないため、
	端末タイプに合わせたファンクションキーを設定するために
	<code class="literal">keychange</code> が必要となります。</p><p>また、<code class="filename">/etc/ttys</code> の中のすべての
	<code class="literal">ttyv*</code> において、
	正しいコンソール端末タイプを設定するようにしてください。
	現在の定義済の値は以下の通りです。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>文字セット</th><th>端末タイプ</th></tr></thead><tbody><tr><td>ISO8859-1 もしくは ISO8859-15</td><td><code class="literal">cons25l1</code></td></tr><tr><td>ISO8859-2</td><td><code class="literal">cons25l2</code></td></tr><tr><td>ISO8859-7</td><td><code class="literal">cons25l7</code></td></tr><tr><td>KOI8-R</td><td><code class="literal">cons25r</code></td></tr><tr><td>KOI8-U</td><td><code class="literal">cons25u</code></td></tr><tr><td>CP437 (VGA のデフォルト)</td><td><code class="literal">cons25</code></td></tr><tr><td>US-ASCII</td><td><code class="literal">cons25w</code></td></tr></tbody></table></div><p>ワイド/多バイト文字の言語については、
	<code class="filename">/usr/ports/language</code>
	内の適切な FreeBSD port を利用してください。
	いくつかの ports はシステムからシリアルの vtty
	のように見えるようにコンソールとして振る舞います。
	したがって、X11 と疑似シリアルコンソール用に充分な
	vtty を確保しておかなければなりません。
	コンソールで他の言語を使うためのアプリケーションのリストの
	一部です。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>言語</th><th>ports の位置</th></tr></thead><tbody><tr><td>繁体字中国語 (BIG-5)</td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/chinese/big5con/pkg-descr">chinese/big5con</a></td></tr><tr><td>日本語</td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/japanese/kon2-16dot/pkg-descr">japanese/kon2-16dot</a> または
		<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/japanese/mule-freewnn/pkg-descr">japanese/mule-freewnn</a></td></tr><tr><td>韓国語</td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/korean/han/pkg-descr">korean/han</a></td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90311760"></a>17.3.6. X11 の設定</h3></div></div></div><p>X11 は FreeBSD プロジェクトの一部ではありませんが、
	FreeBSD ユーザのための情報を記しておきます。
	詳細に関しては、<a class="link" href="http://www.x.org/" target="_top">Xorg
	  ウェブサイト</a>や、あなたの使っている
	X11 サーバのサイトを参照してください。</p><p><code class="filename">~/.Xresources</code> を使うことで、
	アプリケーション固有の国際化の設定 (フォント、メニューなど)
	を追加することができます。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90313936"></a>17.3.6.1. フォントの表示</h4></div></div></div><a id="idp90314576" class="indexterm"></a><p><span class="application">Xorg</span> サーバ
	  (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-servers/xorg-server/pkg-descr">x11-servers/xorg-server</a>) か
	  <span class="application"><span class="trademark">XFree86</span>™</span> サーバ
	  (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-servers/XFree86-4-Server/pkg-descr">x11-servers/XFree86-4-Server</a>)
	  をインストールし、言語の <span class="trademark">TrueType</span>® フォントをインストールします。
	  ロケールを正しく設定すれば、
	  選んだ言語がメニューなどに表示されるはずです。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90317776"></a>17.3.6.2. 非英語の文字を入力する</h4></div></div></div><a id="idp90318416" class="indexterm"></a><p>X11 Input Method (XIM) プロトコルはすべての X11
	  クライアント用の新たな標準規格です。
	  すべての X11 アプリケーションは XIM 入力サーバからの入力を受け取る
	  XIM クライアントとして書かれるべきです。
	  様々な言語用の XIM サーバが存在します。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90319568"></a>17.3.7. プリンタの設定</h3></div></div></div><p>プリンタにはいくつかの C 言語の char で表現できる
	シングルバイトの文字セットがハードウェアに組み込まれています。
	ワイド/多バイトの文字セットでは特殊な設定が必要であり、
	<span class="application">apsfilter</span> を使うことをお勧めします。
	言語固有のコンバータを用いて、<span class="trademark">PostScript</span>® か PDF フォーマット
	に文書をコンバートする場合もあるでしょう。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90321616"></a>17.3.8. カーネルとファイルシステム</h3></div></div></div><p>FreeBSD の高速ファイルシステム (FFS) は 8-bit 透過であり、
	C 言語の char で表現できるいかなる文字セットも使うことが
	できます (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=multibyte&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">multibyte</span>(3)</span></a> を参照)。
	しかし、ファイルシステム中には文字セットの名前は記録されていません。
	したがって、これは単なる 8-bit であり、
	エンコーディングに関しては何の情報もないのです。
	公式には、FFS
	はまだいかなるワイド/マルチバイトの文字セットもサポートしていません。
	しかし FFS でそのようなサポートを行うためのパッチが、
	多くのワイド/マルチバイトの文字セットに存在します。
	それらは単に一時的で汎用性のない解決策であり、
	わたしたちはそれらをソースツリーに含めないことを決めています。
	これらのパッチに関しては、各言語のウェブサイトを参照してください。
      </p><a id="idp90323408" class="indexterm"></a><a id="idp90323920" class="indexterm"></a><p>FreeBSD の <span class="trademark">MS-DOS</span>® ファイルシステムでは、
	<span class="trademark">MS-DOS</span>®, Unicode 文字セット、FreeBSD ファイルシステムの
	文字セットの間で変換を行うことが可能です。
	詳細は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdos&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdos</span>(8)</span></a> を参照してください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="l10n-compiling"></a>17.4. 国際化に対応したプログラムのコンパイル</h2></div></div></div><p>FreeBSD ports の多くはすでに国際化されています。
      いくつかには port の名前に -I18N と付いています。
      これらはもちろんのこと、他のプログラムも国際化への対応を組み込んだものがあり、
      コンパイルに際して特別な注意を払う必要はありません。</p><a id="idp90332240" class="indexterm"></a><p>しかし、<span class="application">MySQL</span> のようなアプリケーションでは、
      特定の文字セットを使うように <code class="filename">Makefile</code>
      を設定する必要があります。
      これは大抵 <code class="filename">Makefile</code> の中で
      対処されているか、ソース中の <span class="application">configure</span>
      に値を渡すことで対応しています。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="lang-setup"></a>17.5. FreeBSD を特定の言語に地域化する</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ru-localize"></a>17.5.1. ロシア語 (KOI8-R エンコーディング)</h3></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Chernov</span> <span class="firstname">Andrey</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp90342864" class="indexterm"></a><p>KOI8-R エンコーディングの詳細については、
	<a class="link" href="http://koi8.pp.ru/" target="_top">KOI8-R References
	  (Russian Net Character Set)</a> を参照してください。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90345040"></a>17.5.1.1. ロケールの設定</h4></div></div></div><p>以下の行を
	  <code class="filename">~/.login_conf</code> に追加してください。</p><pre class="programlisting">me:My Account:\
	:charset=KOI8-R:\
	:lang=ru_RU.KOI8-R:</pre><p><a class="link" href="#setting-locale" title="17.3.4. ロケールの設定">ロケール</a> を
	  設定する際の例については、この章の前の方を参照してください。
	</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90347728"></a>17.5.1.2. コンソールの設定</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/etc/rc.conf</code>
	      ファイルに次の行を追加してください。</p><pre class="programlisting">mousechar_start=3</pre></li><li class="listitem"><p>また、<code class="filename">/etc/rc.conf</code>
	      で以下の設定を使ってください。</p><pre class="programlisting">keymap="ru.koi8-r"
scrnmap="koi8-r2cp866"
font8x16="cp866b-8x16"
font8x14="cp866-8x14"
font8x8="cp866-8x8"</pre></li><li class="listitem"><p><code class="filename">/etc/ttys</code> の各
	      <code class="literal">ttyv*</code> エントリにおいて、
	      端末タイプとして <code class="literal">cons25r</code>
	      を指定してください。</p></li></ul></div><p><a class="link" href="#setting-console" title="17.3.5. コンソールの設定">コンソール</a>を設定する際の例については、この章の前の方を参照してください。
	</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90354768"></a>17.5.1.3. プリンタの設定</h4></div></div></div><a id="idp90355408" class="indexterm"></a><p>ロシア語用の文字を搭載したプリンタはほとんど
	  ハードウェアコードページ CP866 を使っているため、
	  KOI8-R を CP866 に変換する専用の出力フィルタが必要となります。
	  このフィルタはデフォルトで
	  <code class="filename">/usr/libexec/lpr/ru/koi2alt</code> に
	  インストールされています。
	  ロシア語用のプリンタの <code class="filename">/etc/printcap</code>
	  エントリは以下のようになります。</p><pre class="programlisting">lp|Russian local line printer:\
	:sh:of=/usr/libexec/lpr/ru/koi2alt:\
	:lp=/dev/lpt0:sd=/var/spool/output/lpd:lf=/var/log/lpd-errs:</pre><p>記述の詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=printcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">printcap</span>(5)</span></a>
	  を参照してください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90367056"></a>17.5.1.4. <span class="trademark">MS-DOS</span>® ファイルシステムとロシア語ファイル名</h4></div></div></div><p>以下の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> エントリの例は、マウントされた
	  <span class="trademark">MS-DOS</span>® ファイルシステムにおいてロシア語ファイル名を
	  使えるようにします。</p><pre class="programlisting">/dev/ad0s2      /dos/c  msdos   rw,-Wkoi2dos,-Lru_RU.KOI8-R 0 0</pre><p><code class="option">-L</code> オプションは利用するロケール名を選択し、
	  <code class="option">-W</code> オプションは文字変換表を設定します。
	  <code class="option">-W</code> オプションを使う時は、変換表が
	  <code class="filename">/usr/libdata/msdosfs</code> にあるので、
	  <code class="filename">/usr</code> を <span class="trademark">MS-DOS</span>® パーティションより前に
	  マウントするようにしてください。詳しくは、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdos&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdos</span>(8)</span></a> のマニュアルを参照してください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90373840"></a>17.5.1.5. X11 の設定</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>まず <a class="link" href="#setting-locale" title="17.3.4. ロケールの設定">X 以外のロケールの設定</a>を行ってください。</p></li><li class="listitem"><p><span class="application">Xorg</span> を使っているなら、
	      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/xorg-fonts-cyrillic/pkg-descr">x11-fonts/xorg-fonts-cyrillic</a>
	      パッケージをインストールしてください。</p><p><code class="filename">/etc/X11/xorg.conf</code> ファイルの
	      <code class="literal">"Files"</code>
	      セクションをチェックしてください。
	      既存の <code class="literal">FontPath</code>
	      エントリの<span class="emphasis"><em>前に</em></span>以下の行を追加しなければなりません。</p><pre class="programlisting">FontPath   "/usr/X11R6/lib/X11/fonts/cyrillic/misc"
FontPath   "/usr/X11R6/lib/X11/fonts/cyrillic/75dpi"
FontPath   "/usr/X11R6/lib/X11/fonts/cyrillic/100dpi"</pre><p>もし高解像度のビデオモードを使っている場合には、
	      75 dpi と 100 dpi の行を入れ替えてください。</p></li><li class="listitem"><p>ロシア語のキーボードを使えるようにするには、
	      以下の行を <code class="filename">xorg.conf</code> ファイルの
	      <code class="literal">"Keyboard"</code> セクションに追加します。</p><pre class="programlisting">Option "XkbLayout"   "us,ru"
Option "XkbOptions"  "grp:toggle"</pre><p>また、<code class="literal">XkbDisable</code> が無効
	      (コメントアウト) になっていることを確認してください。
	    </p><p><code class="literal">grp:caps_toggle</code>
	      については、ロシア語/ラテン文字の切り替えは
	      <span class="keycap"><strong>CapsLock</strong></span> で行います。
	      従来の <span class="keycap"><strong>CapsLock</strong></span> の機能は
	      <span class="keycap"><strong>Shift</strong></span>+<span class="keycap"><strong>CapsLock</strong></span>
	      で使うことができます (ラテン文字モードの時のみ)。
	      <code class="literal">grp:toggle</code>
	      については、ロシア語/ラテン文字の切り替えは
	      <span class="keycap"><strong>Right Alt</strong></span> で行います。
	      <span class="application">Xorg</span> では、理由は不明ですが
	      <code class="literal">grp:caps_toggle</code> は動作しません。</p><p>キーボードに <span class="quote">「<span class="quote"><span class="trademark">Windows</span>®</span>」</span> キーがあり、
	      ロシア語モードでそのキーにいくつかの非英字キーが
	      割り当てられているようなら、<code class="filename">xorg.conf</code>
	      ファイルに以下の行を追加してください。</p><pre class="programlisting">Option "XkbVariant" ",winkeys"</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">ロシア語の XKB キーボードは、
		地域化されていないアプリケーションではうまく動かないかも知れません。</p></div></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">地域化がされたアプリケーションは少なくともプログラムの最初の方で
	    <code class="function">XtSetLanguageProc (NULL, NULL, NULL);</code>
	    を呼び出すべきです。
	    X11 アプリケーションを地域化する方法については、
	    <a class="link" href="http://koi8.pp.ru/xwin.html" target="_top">
	    KOI8-R for X Window</a>
	    を参照してください。</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90399696"></a>17.5.2. 台湾向けの繁体字中国語への地域化</h3></div></div></div><a id="idp90400336" class="indexterm"></a><p>FreeBSD-Taiwan プロジェクトは、多くの
	中国語 ports を利用した、
	FreeBSD を中国語化するための手引き
	<code class="uri"><a class="uri" href="http://netlab.cse.yzu.edu.tw/~statue/freebsd/zh-tut/" target="_top">http://netlab.cse.yzu.edu.tw/~statue/freebsd/zh-tut/</a></code>
	を提供しています。
	<code class="literal">FreeBSD Chinese HOWTO</code> の現在の編集者は
	Shen Chuan-Hsing <code class="email">&lt;<a xmlns="" class="email" href="mailto:statue@freebsd.sinica.edu.tw">statue@freebsd.sinica.edu.tw</a>&gt;</code> です。</p><p>Chuan-Hsing Shen <code class="email">&lt;<a xmlns="" class="email" href="mailto:statue@freebsd.sinica.edu.tw">statue@freebsd.sinica.edu.tw</a>&gt;</code> は
	FreeBSD-Taiwan の <code class="literal">zh-L10N-tut</code> を使って
	<a class="link" href="http://netlab.cse.yzu.edu.tw/~statue/cfc/" target="_top">Chinese
	  FreeBSD Collection (CFC)</a> を作成しました。
	パッケージとスクリプトは
	<code class="uri"><a class="uri" href="ftp://freebsd.csie.nctu.edu.tw/pub/taiwan/CFC/" target="_top">ftp://freebsd.csie.nctu.edu.tw/pub/taiwan/CFC/</a></code>
	から入手できます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90405456"></a>17.5.3. ドイツ語への地域化 (すべての ISO 8859-1 言語向け)</h3></div></div></div><a id="idp90406096" class="indexterm"></a><p>Slaven Rezic <code class="email">&lt;<a xmlns="" class="email" href="mailto:eserte@cs.tu-berlin.de">eserte@cs.tu-berlin.de</a>&gt;</code> は
	FreeBSD マシン上でウムラウトを使うためのチュートリアルを書きました。
	チュートリアルはドイツ語で書かれており、
	<code class="uri"><a class="uri" href="http://www.de.FreeBSD.org/de/umlaute/" target="_top">http://www.de.FreeBSD.org/de/umlaute/</a></code>
	から入手できます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90408784"></a>17.5.4. 日本語/韓国語への地域化</h3></div></div></div><a id="idp90409424" class="indexterm"></a><a id="idp90410576" class="indexterm"></a><p>日本語に関しては
	<code class="uri"><a class="uri" href="http://www.jp.FreeBSD.org/" target="_top">http://www.jp.FreeBSD.org/</a></code>
	を、韓国語に関しては
	<code class="uri"><a class="uri" href="http://www.kr.FreeBSD.org/" target="_top">http://www.kr.FreeBSD.org/</a></code>
	を参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90413264"></a>17.5.5. 英語以外の FreeBSD ドキュメント</h3></div></div></div><p>FreeBSD の一部を他の言語に翻訳してくれている人たちがいます。
	これらは <a class="link" href="../../../../ja/index.html" target="_top">メインサイト</a>のリンクを辿るか
	<code class="filename">/usr/share/doc</code>
	から入手できます。</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-upgrading"></a>第18章 FreeBSD のアップデートとアップグレード</h2></div><div><span class="authorgroup">再構成、再編成および改訂: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Mock</span> <span class="firstname">Jim</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Hubbard</span> <span class="firstname">Jordan</span> [FAMILY Given]</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Kamp</span> <span class="firstname">Poul-Henning</span> [FAMILY Given]</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Polstra</span> <span class="firstname">John</span> [FAMILY Given]</span> 、 <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Clayton</span> <span class="firstname">Nik</span> [FAMILY Given]</span>. </span></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#updating-upgrading-synopsis">18.1. この章では</a></span></dt><dt><span class="sect1"><a href="#updating-upgrading-freebsdupdate">18.2. FreeBSD Update</a></span></dt><dt><span class="sect1"><a href="#updating-upgrading-documentation">18.3. ドキュメントのアップデート</a></span></dt><dt><span class="sect1"><a href="#current-stable">18.4. 開発ブランチを追いかける</a></span></dt><dt><span class="sect1"><a href="#synching">18.5. ソースの同期</a></span></dt><dt><span class="sect1"><a href="#makeworld">18.6. world の再構築</a></span></dt><dt><span class="sect1"><a href="#small-lan">18.7. 複数のマシンで追いかける</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="updating-upgrading-synopsis"></a>18.1. この章では</h2></div></div></div><p>あるリリースから次のリリースまでの期間にも、
      FreeBSD の開発は休みなく続けられています。
      最新の開発ツリーと同期することを好む人もいますし、
      公式のリリース版を好んで使う方もいます。
      しかしながら、公式のリリースといえども、
      セキュリティや他の重要な修正のため、時にはアップデートを行う必要があります。
      使用しているバージョンに関わらず、FreeBSD は、
      手元のシステムを最新の開発ツリーと同期するために必要なツールをすべて用意しています。
      そして、これらのツールは、FreeBSD のバージョンをアップグレードするために使えます。
      この章では、開発ブランチを追いかける方法、および、FreeBSD
      システムをアップデートする基本的なツールについて解説しています。</p><p>この章を読んで分かるのは:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">freebsd-update</span>,
	  <span class="application">Subversion</span> もしくは
	  <span class="application">CTM</span>
	  を使った FreeBSD システムの更新方法</p></li><li class="listitem"><p>インストールされているシステムと、変更が行われていない状態との比較方法。</p></li><li class="listitem"><p><span class="application">Subversion</span>
	  またはドキュメント用の ports を使って、
	  インストールされているドキュメントを最新のものにアップデートする方法。</p></li><li class="listitem"><p>2 つの開発ブランチ、FreeBSD-STABLE と FreeBSD-CURRENT の違い</p></li><li class="listitem"><p>ベースシステム全体を再構築しインストールする方法</p></li></ul></div><p>この章を読む前に、以下の準備をしましょう。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ネットワーク接続の適切な設定
	  (<a class="xref" href="#advanced-networking" title="第22章 高度なネットワーク">22章<em>高度なネットワーク</em></a>)</p></li><li class="listitem"><p>サードパーティ製のソフトウェアのインストール方法の習得
        (<a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a>)</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">この章を通じて、
	FreeBSD のソースコードをダウンロードしたりアップデートするのに
	<code class="command">svn</code> が用いられます。
	このコマンドを使うためには、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/subversion/pkg-descr">devel/subversion</a> port または package
	をインストールしておく必要があります。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="updating-upgrading-freebsdupdate"></a>18.2. FreeBSD Update</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span> <span class="firstname">Tom</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">ベースとなったノートの提供: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Percival</span> <span class="firstname">Colin</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp90465232" class="indexterm"></a><a id="idp90466000" class="indexterm"></a><p>システム管理における重要な側面に、
      すみやかにセキュリティパッチを適用し、
      オペレーティングシステムを新しいリリースにアップグレードすることがあります。
      FreeBSD には、これらの処理を行うために <code class="command">freebsd-update</code>
      と呼ばれるユーティリティが用意されています。</p><p>このユーティリティを用いると、FreeBSD のセキュリティおよび
      eratta アップデートをバイナリによって行うことができます。
      手動でパッチもしくは新しいカーネルをコンパイルし、
      インストールする必要はありません。
      バイナリアップデートは、
      セキュリティチームがサポートしているすべてのアーキテクチャとリリースで利用できます。
      <code class="uri"><a class="uri" href="http://www.FreeBSD.org/ja/security/" target="_top">http://www.FreeBSD.org/ja/security/</a></code> には、
      サポートが行われているリリースや保守終了予定日の一覧があります。</p><p>このユーティリティは、マイナーリリースであったり、
      他のリリースブランチへのアップグレードにも対応しています。
      新しいリリースにアップデートする前に、
      アップデートしようとしているリリースのアナウンスに目を通し、
      重要な情報がないかどうかを確認してください。
      リリースのアナウンスは <code class="uri"><a class="uri" href="http://www.FreeBSD.org/ja/releases/" target="_top">http://www.FreeBSD.org/ja/releases/</a></code>
      で確認できます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">もし <code class="command">crontab</code> の中に
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=freebsd-update&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">freebsd-update</span>(8)</span></a> の機能が含まれていたら、
	オペレーティングシステムのアップグレード作業を終えるまでは無効にしてください。</p></div><p>この節では、<code class="command">freebsd-update</code>
      で使われる設定ファイルの説明、
      セキュリティパッチの適応方法のデモンストレーション、
      オペレーティングシステムをアップグレードする際に考慮すべきことについて説明します。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-config-file"></a>18.2.1. 設定ファイル</h3></div></div></div><p><code class="command">freebsd-update</code> のデフォルトの設定ファイルは、
	そのままでも用いることができます。      
	<code class="filename">/etc/freebsd-update.conf</code>
	の設定をデフォルトからきめ細かく調整して、
	アップデートプロセスを制御するユーザもいます。
	このファイルのコメントにおいて利用可能なオプションが説明されていますが、
	以下の項目については補足が必要でしょう。</p><pre class="programlisting"># Components of the base system which should be kept updated.
Components world kernel</pre><p>このパラメータは、FreeBSD のどの部分を最新に維持するかを設定します。
	デフォルトでは、ベースシステム全体、
	そしてカーネルをアップデートします。
	<code class="literal">src/base</code> や <code class="literal">src/sys</code>
	のように、個々の項目を指定することもできます。
	この部分についてはデフォルトのままにしておき、
	アップデートする項目をユーザがリストに加える形にするのがベストでしょう。
	ソースコードとバイナリが同期していないと、
	長い年月の間に悲惨な結果がもたらされる可能性があります。</p><pre class="programlisting"># Paths which start with anything matching an entry in an IgnorePaths
# statement will be ignored.
IgnorePaths /boot/kernel/linker.hints</pre><p><code class="filename">/bin</code> や <code class="filename">/sbin</code>
	等の特定のディレクトリをアップデートで変更しないように、
	これらのパスを追加してください。
	このオプションは、ローカルの変更点を <code class="command">freebsd-update</code>
	が上書きすることを防ぐ目的にも利用できます。</p><pre class="programlisting"># Paths which start with anything matching an entry in an UpdateIfUnmodified
# statement will only be updated if the contents of the file have not been
# modified by the user (unless changes are merged; see below).
UpdateIfUnmodified /etc/ /var/ /root/ /.cshrc /.profile</pre><p>このオプションは、指定したディレクトリにある設定ファイルを、
	ローカルで変更されていない場合のみアップデートします。
	ユーザがこれらのファイルを変更していると、
	これらのファイルの自動アップデートは妨げられます。
	他に、<code class="literal">KeepModifiedMetadata</code>
	という別のオプションが存在します。
	このオプションは、<code class="command">freebsd-update</code>
	がマージ中に変更点を保存するようにします。</p><pre class="programlisting"># When upgrading to a new FreeBSD release, files which match MergeChanges
# will have any local changes merged into the version from the new release.
MergeChanges /etc/ /var/named/etc/ /boot/device.hints</pre><p><code class="command">freebsd-update</code>
	がマージすべきファイルが存在するディレクトリの一覧です。
	ファイルのマージのプロセスは、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> と同様 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> パッチの連続ですが、
	選択肢は少なく、マージを承認するか、エディタを起動するか、
	<code class="command">freebsd-update</code>
	を中断するかどうかを選んでください。
	もし、心配な点があれば、
	<code class="filename">/etc</code>
	をバックアップしてからマージを承認してください。
	<code class="command">mergemaster</code> の詳細な情報については、
	<a class="xref" href="#mergemaster" title="18.6.4. 設定ファイルの同期">「設定ファイルの同期」</a> で確認してください。</p><pre class="programlisting"># Directory in which to store downloaded updates and temporary
# files used by FreeBSD Update.
# WorkDir /var/db/freebsd-update</pre><p>ここではすべてのパッチや一次ファイルを置くディレクトリを指定しています。
	バージョンをアップグレードするのであれば、
	この場所には少なくともギガバイトの空き容量が必要です。</p><pre class="programlisting"># When upgrading between releases, should the list of Components be
# read strictly (StrictComponents yes) or merely as a list of components
# which *might* be installed of which FreeBSD Update should figure out
# which actually are installed and upgrade those (StrictComponents no)?
# StrictComponents no</pre><p>このオプションを <code class="literal">yes</code> に設定すると、
	<code class="command">freebsd-update</code> は
	<code class="literal">Components</code> のリストが完全に正しいと判断し、
	このリスト以外の変更点については取り扱いません。
	<code class="command">freebsd-update</code> は、効率的に
	<code class="literal">Components</code>
	リストに属するファイルをアップデートします。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-security-patches"></a>18.2.2. セキュリティパッチの適用</h3></div></div></div><p>FreeBSD のセキュリティパッチを適用する過程は簡単になり、
	管理者は <code class="command">freebsd-update</code> を使って、
	システムを完全にパッチがあたった状態に保つ事ができるようになりました。
	FreeBSD セキュリティ勧告の詳細については、
	<a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/security-advisories.html" target="_top">FreeBSD セキュリティ勧告</a>
	
	の節で説明されています。</p><p>以下のコマンドを実行すると、FreeBSD
	のセキュリティパッチがダウンロードされ、インストールされます。
	最初のコマンドは、未対応のパッチがあるかどうかを調べます。
	もし未対応のパッチがある場合には、
	パッチが当てられた際に変更されるファイルのリストが作成されます。
	2 番目のコマンドはパッチを適用します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update fetch</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><p>アップデートによってカーネルにパッチが当たった場合には、
	パッチが当たったカーネルで起動するように、
	システムを再起動する必要があります。
	もし、実行中のバイナリにパッチが当てられた場合には、
	パッチの当てられたバージョンのバイナリが使われるように、
	影響のあるアプリケーションを再起動する必要があります。</p><p>毎日一度アップデートがないかどうかを自動的に確認するように設定するには、
	以下のエントリを <code class="filename">/etc/crobntab</code>
	に追加してください。</p><pre class="programlisting">@daily                                  root    freebsd-update cron</pre><p>パッチが存在すると、
	自動的にダウンロードされますが、適用はされません。
	<code class="systemitem">root</code>宛てにメールで、
	ダウンロードされたパッチを確認し、
	<code class="command">freebsd-update install</code>
	とともに手動でインストールする必要のあることが通知されます。</p><p>うまく行かなかった場合には、<code class="command">freebsd-update</code>
	を以下のように実行すると、最後の変更までロールバックできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update rollback</code></strong>
Uninstalling updates... done.</pre><p>カーネルまたはカーネルモジュールがアップデートされた場合には、
	完了後にもう一度システムを再起動して、
	影響のあったバイナリを再起動してください。</p><p><code class="command">freebsd-update</code>
	ユーティリティが自動的にアップデートするカーネルは
	<code class="filename">GENERIC</code> のみです。
	カスタムカーネルがインストールされている場合には、
	<code class="command">freebsd-update</code> がインストールした後、
	カーネルを再構築し、もう一度インストールする必要があります。
	しかしながら、<code class="filename">GENERIC</code> カーネルが
	<code class="filename">/boot/GENERIC</code> に存在する場合には、
	現在のシステムで実行されているカーネルでなくとも、
	<code class="command">freebsd-update</code>
	によりアップデートされます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">GENERIC</code> カーネルを、
	  常に <code class="filename">/boot/GENERIC</code> に置いておいてください。
	  さまざまな問題を解決する際や、
	  バージョンをアップグレードする際に助けとなります。
	  <code class="filename">GENERIC</code> カーネルを用意する方法については、
	  <a class="xref" href="#freebsd-update-custom-kernel-9x" title="18.2.3.1. FreeBSD 9.X 以降のシステムにおけるカスタムカーネル">「FreeBSD 9.X 以降のシステムにおけるカスタムカーネル」</a> または <a class="xref" href="#freebsd-update-custom-kernel-8x" title="18.2.3.2. FreeBSD 8.X におけるカスタムカーネル">「FreeBSD 8.X におけるカスタムカーネル」</a>
	  を参照してください。</p></div><p><code class="filename">/etc/freebsd-update.conf</code>
	のデフォルトの設定を変更しない限り、
	<code class="command">freebsd-update</code> は、
	他の更新と共にカーネルソースをアップデートします。
	新しいカスタムカーネルの再構築と再インストールは、
	通常通り行うことができます。</p><p><code class="command">freebsd-update</code> は、
	常にカーネルをアップデートするとは限りません。
	<code class="command">freebsd-update install</code>
	によってカーネルソースが変更されなかった場合には、
	カスタムカーネルを再構築する必要はありません。
	しかしながら <code class="command">freebsd-update</code> は、
	<code class="filename">/usr/src/sys/conf/newvers.sh</code>
	を常にアップデートします。
	これは、現在のシステムのパッチレベルを
	<code class="command">uname -r</code> が <code class="literal">-p</code>
	で表示する時にこのファイルが参照されます。
	そのため、何も変更されていない場合でも、
	カスタムカーネルを再構築することにより、
	<code class="command">uname</code> がシステムの正確なパッチレベルを報告するようになります。
	各システムにインストールされているアップデートをすばやく把握できるようになるので、
	特に複数のシステムを管理するときに助けとなります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-upgrade"></a>18.2.3. メジャーおよびマイナーバージョンのアップグレードを行う</h3></div></div></div><p>FreeBSD のマイナーバージョン間のアップグレード、
	たとえば、FreeBSD 9.0 から FreeBSD 9.1 へのアップグレードは、
	<span class="emphasis"><em>マイナーバージョン</em></span> アップグレードと呼ばれます。
	<span class="emphasis"><em>メジャーバージョン</em></span> アップグレードは、
	FreeBSD 9.X から FreeBSD 10.X へのアップグレードといった、
	FreeBSD のメジャーバージョンが変わるようなアップグレードのことです。
	どちらのアップグレードもリリース番号のターゲットを指定する事で、
	<code class="command">freebsd-update</code> によって行う事ができます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">カスタムカーネルを使っているシステムでは、
	  アップグレードを行う前に
	  <code class="filename">GENERIC</code> カーネルが、
	  <code class="filename">/boot/GENERIC</code>
	  に置かれている事を確認してください。
	  <code class="filename">GENERIC</code> カーネルを用意する方法については、
	  <a class="xref" href="#freebsd-update-custom-kernel-9x" title="18.2.3.1. FreeBSD 9.X 以降のシステムにおけるカスタムカーネル">「FreeBSD 9.X 以降のシステムにおけるカスタムカーネル」</a> または <a class="xref" href="#freebsd-update-custom-kernel-8x" title="18.2.3.2. FreeBSD 8.X におけるカスタムカーネル">「FreeBSD 8.X におけるカスタムカーネル」</a>
	  を参照してください。</p></div><p>以下のコマンドを実行すると、FreeBSD 9.0
	のシステムを FreeBSD 9.1 にアップグレードします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update -r 9.1-RELEASE upgrade</code></strong></pre><p>コマンドを実行すると、<code class="command">freebsd-update</code>
	は設定ファイルと現在のシステムを評価し、
	アップデートするために必要な情報を収集します。
	画面には、どのコンポーネントが認識され、
	どのコンポーネントが認識されていないといったリストが表示されます。
	たとえば以下のように表示されます。</p><pre class="screen">Looking up update.FreeBSD.org mirrors... 1 mirrors found.
Fetching metadata signature for 9.0-RELEASE from update1.FreeBSD.org... done.
Fetching metadata index... done.
Inspecting system... done.

The following components of FreeBSD seem to be installed:
kernel/smp src/base src/bin src/contrib src/crypto src/etc src/games
src/gnu src/include src/krb5 src/lib src/libexec src/release src/rescue
src/sbin src/secure src/share src/sys src/tools src/ubin src/usbin
world/base world/info world/lib32 world/manpages

The following components of FreeBSD do not seem to be installed:
kernel/generic world/catpages world/dict world/doc world/games
world/proflibs

Does this look reasonable (y/n)? <strong class="userinput"><code>y</code></strong></pre><p>ここで、<code class="command">freebsd-update</code>
	はアップグレードに必要なすべてのファイルをダウンロードします。
	何をインストールし、どのように進むかといった質問をされることもあります。</p><p>カスタムカーネルを使っていると、
	上記のステップで以下のような警告が表示されます。</p><pre class="screen">WARNING: This system is running a "<em class="replaceable"><code>MYKERNEL</code></em>" kernel, which is not a
kernel configuration distributed as part of FreeBSD 9.0-RELEASE.
This kernel will not be updated: you MUST update the kernel manually
before running "/usr/sbin/freebsd-update install"</pre><p>この時点ではこの警告を無視してもかまいません。
	アップデートされた <code class="filename">GENERIC</code> カーネルは、
	アップグレードプロセスの途中で利用されます。</p><p>すべてのパッチがローカルシステムへダウンロードされたら、
	次にパッチが適用されます。
	このプロセスには時間がかかります。
	この時間はコンピュータの性能とワークロードに依存します。
	その後、設定ファイルがマージされます。
	このプロセスでは、ユーザはファイルをマージするか、
	画面上にエディタを立ち上げて手動でマージするかを尋ねられます。
	プロセスが進むごとに、成功したマージのすべての結果の情報がユーザに示されます。
	マージに失敗したり、無視した場合には、プロセスが中断します。
	ユーザによっては <code class="filename">/etc</code>
	のバックアップを取り、
	<code class="filename">master.passwd</code> や <code class="filename">group</code>
	のような重要なファイルを後で手動でマージする方もいます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">すべてのパッチは別のディレクトリでマージされており、
	  まだ、システムには反映されていません。
	  すべてのパッチが正しく適用され、
	  すべての設定ファイルがマージされてプロセスがスムーズに進んだら、
	  ユーザは以下のコマンドを用いて、
	  変更点をディスクに反映してください。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre></div><p>パッチは最初にカーネルとカーネルモジュールに対して当てられます。
	システムがカスタムカーネルを実行している場合には、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nextboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nextboot</span>(8)</span></a> を使って次回の再起動時のカーネルを、
	アップデートされた <code class="filename">/boot/GENERIC</code>
	に設定してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>nextboot -k GENERIC</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">GENERIC</code> カーネルで再起動する前に、
	  カーネルにシステムが適切に起動するために必要なすべてのドライバが含まれていること、
	  もしアップデートしているコンピュータがリモートでアクセスしているのであれば、
	  ネットワーク接続に必要なすべてのドライバも含まれていることを確認してください。
	  特に、これまで実行しているカスタムカーネルが、
	  カーネルモジュールとして提供されているビルドインの機能を含んでいるのであれば、
	  これらのモジュールを一時的に <code class="filename">/boot/loader.conf</code>
	  の機能を用いて、
	  <code class="filename">GENERIC</code> に読み込んでください。
	  アップグレードプロセスが終わるまでは、
	  重要ではないサービスを無効にするとともに、
	  必要のないディスクやネットワークのマウントなども避けることが推奨されています。</p></div><p>アップデートされたカーネルでコンピュータを再起動してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown -r now</code></strong></pre><p>システムがオンラインに戻ったら、以下のコマンドを使って
	<code class="command">freebsd-update</code> を再び実行してください。
	アップデートプロセスの状態は保存されているので、
	<code class="command">freebsd-update</code> を実行すると、
	最初からではなく、次のステップに進み、
	古い共有ライブラリとオブジェクトファイルを削除します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">使用しているライブラリのバージョン番号の付けられ方によって、
	  3 つのインストールフェーズが 2 つになる場合もあります。</p></div><p>アップグレードはこれで終了です。
	もしメジャーアップグレードを行った場合には、
	<a class="xref" href="#freebsdupdate-portsrebuild" title="18.2.3.3. メジャーバージョンアップグレード後の package のアップグレード">「メジャーバージョンアップグレード後の
	  package のアップグレード」</a>
	で説明されているようにすべての ports および package
	を再構築してください。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsd-update-custom-kernel-9x"></a>18.2.3.1. FreeBSD 9.X 以降のシステムにおけるカスタムカーネル</h4></div></div></div><p><code class="command">freebsd-update</code> を使う前に、
	  <code class="filename">GENERIC</code> カーネルが
	  <code class="filename">/boot/GENERIC</code>
	  に置かれていることを確認してください。
	  ただ一度だけカスタムカーネルを構築したのであれば、
	  <code class="filename">/boot/kernel.old</code>
	  は <code class="filename">GENERIC</code> カーネルそのものです。
	  このディレクトリの名前を
	  <code class="filename">/boot/kernel</code>
	  へと変更してください。</p><p>もし、2 回以上カスタムカーネルを構築した後であったり、
	  カスタムカーネルを構築した回数がわからなければ、
	  現在のオペレーティングシステムのバージョンの
	  <code class="filename">GENERIC</code> カーネルを入手してください。
	  コンピュータへの物理的なアクセスが可能であれば、
	  インストールメディアから <code class="filename">GENERIC</code>
	  カーネルをインストールできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /cdrom</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /cdrom/usr/freebsd-dist</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>tar -C/ -xvf kernel.txz boot/kernel/kernel</code></strong></pre><p>別な方法としては、
	  <code class="filename">GENERIC</code> カーネルをソースから再構築して、
	  インストールしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make kernel __MAKE_CONF=/dev/null SRCCONF=/dev/null</code></strong></pre><p><code class="command">freebsd-update</code> がこのカーネルを
	  <code class="filename">GENERIC</code> カーネルとして認識するために、
	  <code class="filename">GENERIC</code> コンフィグレーションファイルは、
	  とにかく変更してはいけません。
	  また、特別なオプションを指定しないで構築してください。</p><p><code class="command">freebsd-update</code> は、
	  <code class="filename">/boot/GENERIC</code>
	  が存在する事だけを必要とするので、
	  <code class="filename">GENERIC</code>
	  カーネルで再起動する必要はありません。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsd-update-custom-kernel-8x"></a>18.2.3.2. FreeBSD 8.X におけるカスタムカーネル</h4></div></div></div><p>FreeBSD 8.X システムでは、<code class="filename">GENERIC</code>
	  カーネルを入手する方法や構築の方法が少し異なります。</p><p>コンピュータへの物理的なアクセスが可能であれば、
	  以下のコマンドを実行することで、
	  インストールメディアから <code class="filename">GENERIC</code>
	  カーネルをインストールできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /cdrom</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /cdrom/<em class="replaceable"><code>X.Y-RELEASE</code></em>/kernels</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./install.sh GENERIC</code></strong></pre><p>ここで <code class="filename"><em class="replaceable"><code>X.Y-RELEASE</code></em></code>
	  をリリース番号に置き換えてください。
	  <code class="filename">GENERIC</code> カーネルは、
	  デフォルトで <code class="filename">/boot/GENERIC</code>
	  にインストールされます。</p><p>または、<code class="filename">GENERIC</code>
	  カーネルをソースから再構築してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>env DESTDIR=/boot/GENERIC make kernel __MAKE_CONF=/dev/null SRCCONF=/dev/null</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv /boot/GENERIC/boot/kernel/* /boot/GENERIC</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm -rf /boot/GENERIC/boot</code></strong></pre><p><code class="command">freebsd-update</code> が、このカーネルを
	  <code class="filename">GENERIC</code> カーネルとして扱うように、
	  <code class="filename">GENERIC</code> コンフィグレーションファイルは、
	  とにかく変更してはいけません。
	  また、特別なオプションを指定しないで構築してください。</p><p><code class="filename">GENERIC</code>
	  カーネルで再起動する必要はありません。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-portsrebuild"></a>18.2.3.3. メジャーバージョンアップグレード後の
	  package のアップグレード</h4></div></div></div><p>一般的に、マイナーバージョンアップグレードの後では、
	  インストールされているアプリケーションは、問題なく動作するでしょう。
	  メジャーバージョンが異なるとアプリケーションバイナリーインタフェース
	  (<acronym class="acronym">ABI</acronym>) が異なるため、
	  サードパーティ製のアプリケーションの多くは動作しなくなるでしょう。
	  メジャーバージョンアップグレード後には、
	  インストールされているすべての packages, ports
	  をアップグレードする必要があります。
	  package は、<code class="command">pkg upgrade</code>
	  を使ってアップグレードできます。
	  インストールされている ports をアップグレードする場合には、
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portmaster/pkg-descr">ports-mgmt/portmaster</a>
	  といったユーティリティを使ってください。</p><p>すべての package の強制的なアップグレードでは、
	  バージョン番号が上がらない package に対しても、
	  リポジトリから最新のバージョンで、インストールされている
	  package を置き換えます。
	  FreeBSD のメージャーバージョンが変わるようなアップグレードでは、
	  ABI のバージョンも変わるため、
	  このようなアップグレードが必要になります。
	  強制的なアップグレードを行うには、以下のように実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg-static upgrade -f</code></strong></pre><p>インストールされているすべてのアプリケーションを再構築するには、
	  以下のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster -af</code></strong></pre><p>このコマンドを実行すると、
	  設定を変更するオプションを持つアプリケーションは、
	  設定変更のスクリーンを表示し、
	  ユーザからの指示待ちの状態で停止します。
	  この振る舞いをやめ、デフォルトのオプションを使用するには、
	  上記のコマンドに <code class="option">-G</code> を含めてください。</p><p>ソフトウェアのアップグレードが終わったら、最後にもう一度
	  <code class="command">freebsd-update</code>
	  を実行して、
	  すべてのアップグレードプロセスのやり残し作業を行い、
	  アップグレードのプロセスを完了してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><p><code class="filename">GENERIC</code>
	  カーネルを一時的に読み込んでいたのであれば、<a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a> に書かれている手順に従って、
	  新しいカスタムを構築し、インストールしてください。</p><p>コンピュータを再起動し、新しい FreeBSD を立ち上げてください。
	  これでアップグレードのプロセスは完了です。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-system-comparison"></a>18.2.4. システムの状態の比較</h3></div></div></div><p><code class="command">freebsd-update</code> を用いて、
	インストールされている FreeBSD の状態と、
	正しく動作することが分かっている状態とを比較できます。
	このコマンドは、現在のシステムのユーティリティ、ライブラリ、
	設定ファイルを評価するので、
	組み込みの侵入検知システム (<acronym class="acronym">IDS</acronym>)
	として使うことができます。</p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">このコマンドは、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/snort/pkg-descr">security/snort</a>
	  のような本当の <acronym class="acronym">IDS</acronym>
	  の置き換えになるものではありません。
	  <code class="command">freebsd-update</code> はデータをディスクに保存するので、
	  不正な変更が行われる可能性があります。
	  <code class="varname">kern.securelevel</code> と、
	  <code class="command">freebsd-update</code> のデータを使用しないときに、
	  読み取りのみの許可属性に設定されているファイルシステムに置くことで、
	  不正な変更の可能性を低くできますが、
	  よりよい解決方法は、
	  <acronym class="acronym">DVD</acronym>
	  または安全に保存されている外部 <acronym class="acronym">USB</acronym>
	  ディスクのような安全なディスクとシステムを比較することです。
	  組み込まれているユーティリティを用いた、別の方法による
	  <acronym class="acronym">IDS</acronym> 機能については、
	  <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/security-intro.html#security-ids" target="_top">FreeBSD バイナリによる検出</a>
	  
	  の節をご覧ください。</p></div><p>比較を行うには、
	結果の出力先のファイル名を指定してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update IDS &gt;&gt; outfile.ids</code></strong></pre><p>システムは検査され、リリースファイルの <acronym class="acronym">SHA256</acronym>
	ハッシュ値と現在インストールされているファイルのハッシュ値がファイルの一覧と共に、
	指定した出力先のファイルに送られます。</p><p>これらの行は極めて長いのですが、出力形式は簡単にすぐに解析できます。
	たとえば、これらのリリースで異なっているすべてのファイルを知りたいのであれば、
	以下のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat outfile.ids | awk '{ print $1 }' | more</code></strong>
/etc/master.passwd
/etc/motd
/etc/passwd
/etc/pf.conf</pre><p>上の表示例では出力は切り捨てられており、
	実際にはもっと多くのファイルが存在します。
	これらのファイルには、運用中に変更されるファイルがあります。
	たとえば、<code class="filename">/etc/passwd</code>
	はユーザがシステムに追加されると変更されます。
	また、カーネルモジュールは、
	<code class="command">freebsd-update</code>
	によりアップデートされるため、変更されます。
	このような特別なファイルやディレクトリを除外するには、
	それらを <code class="filename">/etc/freebsd-update.conf</code> の
	<code class="literal">IDSIgnorePaths</code> オプションに追加してください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="updating-upgrading-documentation"></a>18.3. ドキュメントのアップデート</h2></div></div></div><a id="idp90635728" class="indexterm"></a><a id="idp90636240" class="indexterm"></a><p>ドキュメントは、FreeBSD オペレーティングシステムの必須要素です。
      FreeBSD ドキュメントの最新バージョンは、FreeBSD ウェブサイト (<a class="link" href="../../../../doc/" target="_top">http://www.freebsd.org/doc/</a>)
      から入手できますが、
      FreeBSD ウェブサイト、ハンドブック、<acronym class="acronym">FAQ</acronym>
      および文書の最新版をローカルに用意しておくと便利です。</p><p>この章では、ソースまたは Ports Collection を使って、
      ローカルの FreeBSD ドキュメントを最新に保つ方法を説明します。</p><p>ドキュメントを編集したり、
      ドキュメントの誤りを報告する方法については、
      新しい貢献者のための FreeBSD ドキュメンテーションプロジェクト入門 (<a class="link" href="../../../../doc/en_US.ISO8859-1/books/fdp-primer" target="_top">http://www.freebsd.org/doc/en_US.ISO8859-1/books/fdp-primer/</a>)
      をご覧ください。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-installed-documentation"></a>18.3.1. ソースから FreeBSD ドキュメントをインストールする</h3></div></div></div><p>ソースから FreeBSD ドキュメントを構築するのに必要なツールは、
	FreeBSD のベースシステムには含まれてはいません。
	<span class="application">svn</span> などの必要なツールは、
	FreeBSD ドキュメンテーションプロジェクトが開発している
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/textproc/docproj/pkg-descr">textproc/docproj</a> package または port 
	からインストールできます。</p><p>インストールしたら、<span class="application">svn</span>
	を使って、ドキュメントのソースをダウンロードしてください。
	以下の例で、
	<em class="replaceable"><code>https://svn0.us-west.FreeBSD.org</code></em>
	を <a class="xref" href="#svn-mirrors" title="A.4.4. Subversion ミラーサイト">「<span class="application">Subversion</span> ミラーサイト」</a>
	の中からもっとも近いミラーのアドレスに変更してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn checkout <em class="replaceable"><code>https://svn0.us-west.FreeBSD.org</code></em>/doc/head /usr/doc</code></strong></pre><p>最初にドキュメントのソースをダウンロードするには少し時間がかかります。
	ダウンロードが終わるまでお待ちください。</p><p>ダウンロードしたドキュメントのソースをアップデートするには、
	以下のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn update /usr/doc</code></strong></pre><p>最新のドキュメントのソースのスナップショットを
	<code class="filename">/usr/doc</code> に用意できたら、
	インストールされているドキュメントをアップデートする準備はすべて整いました。</p><p>利用可能なすべての言語のドキュメントをアップデートするには、
	以下のように入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/doc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>もし、ある特定の言語のみをアップデートしたいのであれば、
	<code class="filename">/usr/doc</code>
	の下にある各言語のサブディレクトリで <code class="command">make</code>
	を実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/doc/en_US.ISO8859-1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>ドキュメントをアップデートする別の方法は、
	<code class="filename">/usr/doc</code>
	または各言語のサブディレクトリで以下のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make update</code></strong></pre><p><code class="varname">FORMATS</code> を設定して、
	以下のようにインストールする出力形式を指定できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/doc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make FORMATS='html html-split' install clean</code></strong></pre><p>ドキュメンテーションの一部のアップデートを簡単にするオプションや、
	特定の翻訳のビルドを行うためのオプションが用意されています。
 	これらのオプションは、システム全般のオプションである
	<code class="filename">/etc/make.conf</code> や、<code class="command">make</code>
	に与えるコマンドラインオプションで設定できます。</p><p>オプションには以下のようなものがあります。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">DOC_LANG</code></span></dt><dd><p>ビルドおよびインストールの言語およびエンコーディングの一覧。
	      たとえば、英語のドキュメントを指定するには
	      <code class="literal">en_US.ISO8859-1</code> を設定します。</p></dd><dt><span class="term"><code class="varname">FORMATS</code></span></dt><dd><p>ビルドを行うフォーマット、または出力フォーマットの一覧。
	      現在は <code class="literal">html</code>,
	      <code class="literal">html-split</code>, <code class="literal">txt</code>,
	      <code class="literal">ps</code> そして <code class="literal">pdf</code>
	      に対応しています。</p></dd><dt><span class="term"><code class="varname">DOCDIR</code></span></dt><dd><p>ドキュメントをインストールする場所。デフォルトは
	      <code class="filename">/usr/share/doc</code> です。</p></dd></dl></div><p>FreeBSD のシステム全般のオプションに関連するもっと多くの
	<code class="command">make</code> 変数については、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">make.conf</span>(5)</span></a> をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="doc-ports-install-package"></a>18.3.2. ports を用いたドキュメンテーションのアップデート</h3></div><div><span class="authorgroup">ベースとなった作業:<span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Fonvieille</span> <span class="firstname">Marc</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp90679504" class="indexterm"></a><a id="idp90680272" class="indexterm"></a><p>これまでのセクションでは、ソースコードを用いた FreeBSD
	ドキュメントのアップデート方法について説明してきました。
	この節では、インストールされている
	FreeBSD のドキュメントをアップデートするもう一つの方法である、
	Ports Collection を用いた方法について説明し、
	以下について説明します。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>構築済のドキュメントの packages をインストールする方法。
	    ローカルでの構築作業やドキュメンテーションツールチェインをインストールする必要はありません。</p></li><li class="listitem"><p>ports フレームワークを使ったドキュメントのソースの構築方法。
	    チェックアウトおよび構築作業が簡単になります。</p></li></ul></div><p>FreeBSD のドキュメントをアップデートするこれらの方法は、
	ドキュメンテーションエンジニアリングチーム <code class="email">&lt;<a xmlns="" class="email" href="mailto:doceng@FreeBSD.org">doceng@FreeBSD.org</a>&gt;</code> が毎月アップデートしている
        ドキュメンテーション ports および packages
	によりサポートされています。
	これらの ports は、FreeBSD Ports Collection の
	docs カテゴリ (<a class="link" href="http://www.freshports.org/docs/" target="_top">http://www.freshports.org/docs/</a>)
	にまとめられています。</p><p>ドキュメンテーション ports の構成は以下の通りです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/misc/freebsd-doc-en/pkg-descr">misc/freebsd-doc-en</a> package または portは、
	    すべての英語文書をインストールします。</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/misc/freebsd-doc-all/pkg-descr">misc/freebsd-doc-all</a> メタ package
	    もしくは port は、
	    すべての利用可能な言語のすべてのドキュメントを構築します。</p></li><li class="listitem"><p>各言語のために package または port
	    が用意されています。たとえば、
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/misc/freebsd-doc-hu/pkg-descr">misc/freebsd-doc-hu</a>
	    はハンガリー語のドキュメンテーション port です。</p></li></ul></div><p>バイナリ package を使うと、
	インストールする言語に用意されているすべての形式の
	FreeBSD ドキュメントがインストールされます。
	たとえば、以下のコマンドを実行すると、
	ハンガリー語のドキュメントの最新 package
	がインストールされます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install hu-freebsd-doc</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">ドキュメントの package は、対応する port 名とは異なり、
	  <code class="literal"><em class="replaceable"><code>lang</code></em>-freebsd-doc</code>
	  の形式で名前がつけられています。
	  ここで、<em class="replaceable"><code>lang</code></em> は言語コードの短縮形です。
	  ハンガリー語の場合は <code class="literal">hu</code>、簡体字の場合には
	  <code class="literal">zh_cn</code> です。</p></div><p>ドキュメントのフォーマットを指定する場合には、package ではなく
	port から構築をしてください。たとえば、
	英語のドキュメントを構築してインストールするには以下のようにして下さい。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/misc/freebsd-doc-en</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>この port には、
	構築およびインストールするフォーマットを設定するメニューがあります。
	デフォルトでは、<code class="uri"><a class="uri" href="http://www.FreeBSD.org" target="_top">http://www.FreeBSD.org</a></code>
	と同じ形式である分割版の <acronym class="acronym">HTML</acronym> 形式、
	<acronym class="acronym">PDF</acronym> が選択されています。</p><p>以下のように、ドキュメンテーション ports を構築する際の
	<code class="command">make</code> オプションが用意されています。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">WITH_HTML</code></span></dt><dd><p>HTML 形式を構築します。
	      各ドキュメントに対し、単一版の HTML ファイルが構築されます。
	      整形されたドキュメントは、
	      <code class="filename">article.html</code> や
	      <code class="filename">book.html</code>
	      といった名前でインストールされます。</p></dd><dt><span class="term"><code class="varname">WITH_PDF</code></span></dt><dd><p>整形されたドキュメントは、
	      <code class="filename">article.pdf</code> や
	      <code class="filename">book.pdf</code>
	      といった名前でインストールされます。</p></dd><dt><span class="term"><code class="varname">DOCBASE</code></span></dt><dd><p>ドキュメントのインストール先を設定します。
	      デフォルトのインストール先は
	      <code class="filename">/usr/local/share/doc/freebsd</code>
	      です。</p></dd></dl></div><p>以下は、上記の変数を用いてハンガリー語のドキュメントを
	<acronym class="acronym">PDF</acronym> 形式でインストールする方法です。</p><pre class="screen"><code class="prompt">#</code> cd /usr/ports/misc/freebsd-doc-hu
<code class="prompt">#</code> make -DWITH_PDF DOCBASE=share/doc/freebsd/hu install clean</pre><p><a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a> に書かれている手順を使って、
	ドキュメンテーション package または port
	をアップデートできます。
	たとえば、以下のコマンドを実行すると、
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a>
	から、package
	だけを使ってインストールされているハンガリー語のドキュメントをアップデートします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster -PP hu-freebsd-doc</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="current-stable"></a>18.4. 開発ブランチを追いかける</h2></div></div></div><a id="idp90747088" class="indexterm"></a><a id="idp90747600" class="indexterm"></a><p>FreeBSD には二つの開発ブランチがあります。
      それは FreeBSD-CURRENT と FreeBSD-STABLE です。</p><p>この節ではそれぞれのブランチと対象としている読者についての説明と、
      どのようにしてシステムの対応するブランチを最新の状態に保つかについて説明します。</p><p><span class="emphasis"><em>訳: 花井 浩之 <code class="email">&lt;<a xmlns="" class="email" href="mailto:hanai@FreeBSD.org">hanai@FreeBSD.org</a>&gt;</code>、1996 年 11 月 6 日</em></span></p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="current"></a>18.4.1. FreeBSD-CURRENT を使う</h3></div></div></div><p>FreeBSD-CURRENT とは FreeBSD の開発の <span class="quote">「<span class="quote">最前線</span>」</span> なので、
	FreeBSD-CURRENT のユーザは高い技術力を持つことが要求されます。
	そこまでの技術力を持っていないが、
	開発ブランチを追いかけたいと考えているユーザは、
	かわりに FreeBSD-STABLE を追いかけると良いでしょう。</p><p>FreeBSD-CURRENT は FreeBSD の最新のソースコードであり、
	中には現在開発途上のソフトウェア、
	実験的な変更、あるいは過渡的な機能などが含まれています。
	また、この中に入っている機能がすべて、
	次の公式リリースに入るとは限りません。FreeBSD-CURRENT
	をソースからほぼ毎日コンパイルしている人はたくさんいますが、
	短い期間ではコンパイルさえできない状態になっている時期もあります。
	これらの問題は可能な限り迅速に解決されますが、
	FreeBSD-CURRENT が不幸をもたらすか、
	それとも新しい機能をもたらすかは、
	まさにソースコードを同期した瞬間によるのです!</p><p>FreeBSD-CURRENT は、
	次の 3 つの重要なグループを対象としています。</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>ソースツリーのある部分に関して活発に作業している
	    FreeBSD コミュニティのメンバ。</p></li><li class="listitem"><p>活発にテストしている FreeBSD コミュニティのメンバ。
	    彼らは、種々の問題を解決するのに時間を惜しまない人々であり、
	    さまざまな変更に関する提案や
	    FreeBSD の大まかな方向付けを行ないたいと思っている人々でもあり、
	    パッチも提出します。</p></li><li class="listitem"><p>さまざまな事に目を向け、
	    参考のために最新のソースを使いたいと思っていたり、
	    時々コメントやコードを寄稿したいと考えているユーザ。</p></li></ol></div><p>FreeBSD-CURRENT は、次のリリースの前に、
	最も早く新しい機能を入手する手段として、
	期待しては<span class="emphasis"><em>いけません</em></span>。
	リリース前の機能は十分にテストされていないため、
	バグを含んでいる可能性が大いにあるためです。
	また、バグを修正するための素早い方法でもありません。
	いかなるコミットは、元からあるバグを修正するのと同じく、
	新しいバグを生み出すおそれがあります。
	FreeBSD-CURRENT には <span class="quote">「<span class="quote">公式のサポート</span>」</span> はありません。</p><a id="idp90776656" class="indexterm"></a><p>FreeBSD-CURRENT を追いかけるには</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">freebsd-current</a> と <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-head" target="_top">svn-src-head</a>
	    <a id="idp90779856" class="indexterm"></a>
	    メーリングリストに加わってください。
	    さまざまな人がシステムの現在の状態について述べているコメントを見たり、
	    FreeBSD-CURRENT の現在の状態に関する重要な情報を見逃さないために、
	    <span class="emphasis"><em>必須の</em></span> ことです。</p><p><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-head" target="_top">svn-src-head</a> メーリングリストでは、
	    それぞれの変更についての commit ログが記録されています。
	    また、それに関して起こり得る副作用の情報を得ることができますので、
	    参加する価値のあるメーリングリストです。</p><p>これらのメーリングリストに入るには、
	    <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo" target="_top">http://lists.FreeBSD.org/mailman/listinfo</a>
	    をたどって参加したいメーリングリストをクリックし、
	    手順の説明にしたがってください。
	    FreeBSD-CURRENT だけでなく、
	    ソースツリー全体の変更点を追いかけるのであれば、
	    <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-all" target="_top">svn-src-all</a> メーリングリストを購読してください。</p></li><li class="listitem"><p>FreeBSD-CURRENT のソースを同期してください。
	    特に <a class="link" href="#svn" title="A.4. Subversion を使う">svn</a> を使って
	    <a class="xref" href="#svn-mirrors" title="A.4.4. Subversion ミラーサイト">「<span class="application">Subversion</span> ミラーサイト」</a> の一覧にある
	    Subversion ミラーサイトのひとつの
	    <code class="literal">head</code> ブランチから
	    -CURRENT コードをチェックアウトしてください。</p></li><li class="listitem"><p>インターネットの接続がとても遅かったり、
	    制限がある場合には、
	    <a class="xref" href="#ctm" title="A.3. CTM を使う">「CTM を使う」</a> で説明されている CTM
	    を利用すると良いでしょう。
	    ただし、<span class="application">svn</span>
	    ほどには信頼はできないので、
	    <span class="application">svn</span>
	    を利用されることを推奨します。</p></li><li class="listitem"><p>リポジトリのサイズが大きいため、興味のある部分や、
	    パッチを当てる部分のソースのみを同期するユーザもいます。
	    しかしながら、
	    ソースからオペレーティングシステムをコンパイルしようと思っているユーザは、
	    一部分だけではなく、FreeBSD-CURRENT の <span class="emphasis"><em>すべて</em></span>
	    をダウンロードする必要があります。</p><p>FreeBSD-CURRENT をコンパイル
	    <a id="idp90789456" class="indexterm"></a> する前に
	    <code class="filename">/usr/src/Makefile</code> を注意深く読み、
	    <a class="xref" href="#makeworld" title="18.6. world の再構築">「world の再構築」</a>
	    に書かれている手順に従ってください。
	    <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">FreeBSD-CURRENT メーリングリスト</a> と <code class="filename">/usr/src/UPDATING</code> を読めば、
	    次のリリースへ向けて移ってゆくに当たって、
	    ときどき必要となる既存システムからの新システムの構築手順についての最新情報が得られるでしょう。</p></li><li class="listitem"><p>アクティブになってください!
	    FreeBSD-CURRENT のユーザには、
	    拡張やバグ潰しに関して提案することが勧められています。
	    コードを伴う提案はいつでも歓迎されます!</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="stable"></a>18.4.2. FreeBSD-STABLE を使う</h3></div></div></div><p><span class="emphasis"><em>訳: 岩崎 満 <code class="email">&lt;<a xmlns="" class="email" href="mailto:iwasaki@jp.FreeBSD.org">iwasaki@jp.FreeBSD.org</a>&gt;</code></em></span></p><p>FreeBSD-STABLE
	とは定期的に公開されるリリースを作成するための開発ブランチです。
	このブランチに加えられる変更は FreeBSD-CURRENT よりゆっくりで、
	原則として、事前に FreeBSD-CURRENT で試験ずみであるという特徴があります。
	ただ<span class="emphasis"><em>そうであっても</em></span>、
	これは開発用ブランチの一つであり、ある時点における FreeBSD-STABLE
	のソースがどんな場合にも使えるものであるとは限りません。
	このブランチはもう一つの開発の流れというだけであって、
	エンドユーザ向けのものではありません。
	もし試験をする資源的な余裕がない場合は、代わりに最新の
	FreeBSD リリースを使ってください。</p><p>FreeBSD の開発プロセスに興味があったり、
	それに対する貢献を考えていて、特にそれが次回の
	FreeBSD のリリースに関係するものであるなら
	FreeBSD-STABLE を追うことを考えると良いでしょう。</p><p>FreeBSD-STABLE ブランチはいつもコンパイルができ、
	安定に動作すべきですが、
	それが保証されているというわけではありません。
	FreeBSD-STABLE のユーザは FreeBSD-CURRENT よりも多いため、FreeBSD-CURRENT
	で発見されなかったバグが FreeBSD-STABLE で発見され、
	ときどきそれが問題となることがあるのは避けることができません。
	このような理由から、盲目的に FreeBSD-STABLE
	を追いかけるべきではありません。
	特に、開発環境もしくはテスト環境でコードを十分に試験せずに、
	プロダクション品質が要求されるサーバを FreeBSD-STABLE
	にアップグレードしては<span class="emphasis"><em>いけません</em></span>。</p><p>FreeBSD-STABLE を追いかけるには</p><a id="idp90805712" class="indexterm"></a><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>FreeBSD-STABLE の構築に関連する事柄や、
	    その他の注意すべき点 に関する情報を得るために、
	    <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-stable" target="_top">freebsd-stable</a> メーリングリストに加わってください。
	    また開発者は議論の余地がある修正や変更を考えている場合に、
	    このメーリングリストで公表し、
	    提案された変更に関して問題が生じるかどうかを返答する機会をユーザに与えます。</p><p>追いかけているブランチに関連する
	    <span class="application">svn</span> メーリングリストに参加してください。
	    たとえば、9-STABLE ブランチを追いかけているユーザは
	    <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-stable-9" target="_top">svn-src-stable-9</a> メーリングリストに参加してください。
	    このリストでは、変更がなされるごとに作成される commit log
	    やそれに伴う起こりうる副作用についての情報が記録されています。</p><p>これらのメーリングリストに入るには、<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo" target="_top">http://lists.FreeBSD.org/mailman/listinfo</a>
	    をたどって参加したいメーリングリストをクリックし、
	    手順の説明にしたがってください。
	    ソースツリー全体の変更点を追いかけるには、
	    <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-all" target="_top">svn-src-all</a> メーリングリストを購読してください。</p></li><li class="listitem"><p>新しい FreeBSD-STABLE システムをインストールするには、
	    <a class="link" href="#mirrors" title="付録A FreeBSD の入手方法">ミラーサイト</a> から最近の
	    FreeBSD-STABLE リリースをインストールするか、
	    毎月公開されている FreeBSD-STABLE
	    からビルドされたスナップショットを使ってください。
	    スナップショットの詳細については、<a class="link" href="../../../../ja/snapshots/" target="_top">www.freebsd.org/ja/snapshots</a>
	    をご覧ください。</p><p>既に FreeBSD が動いているシステムを
	    FreeBSD-STABLE にアップグレードするには、
	    <a class="link" href="#svn" title="A.4. Subversion を使う">svn</a>
	      <a id="idp90813776" class="indexterm"></a> を使って、
	    希望する開発ブランチのソースをチェックアウしてください。
	    <code class="literal">stable/9</code> といったブランチ名は、
	    <a class="link" href="../../../../releng/" target="_top">www.freebsd.org/releng</a>
	    で説明されています。
	    インターネットへの接続に信頼できる回線を利用できないのであれば、
	    CTM (<a class="xref" href="#ctm" title="A.3. CTM を使う">「CTM を使う」</a>) を使ってください。</p></li><li class="listitem"><p>FreeBSD-STABLE をコンパイルしたり FreeBSD-STABLE へとアップグレード
	    <a id="idp90816592" class="indexterm"></a> する前に、
	    <code class="filename">/usr/src/Makefile</code> を注意深く読み、
	    <a class="xref" href="#makeworld" title="18.6. world の再構築">「world の再構築」</a>
	    に書かれている手順に従ってください。
	    <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-stable" target="_top">FreeBSD-STABLE メーリングリスト</a> と <code class="filename">/usr/src/UPDATING</code> を読んで、
	    次のリリースへ向けて移ってゆくに当たって、
	    ときどき必要となる既存システムからの新システムの構築手順についての最新情報を得てください。</p></li></ol></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="synching"></a>18.5. ソースの同期</h2></div></div></div><p><span class="emphasis"><em>訳: 岩崎 満 <code class="email">&lt;<a xmlns="" class="email" href="mailto:iwasaki@jp.FreeBSD.org">iwasaki@jp.FreeBSD.org</a>&gt;</code>、1997 年 9 月 13 日</em></span></p><p>FreeBSD のソースの最新を追いかける方法は色々あります。
      この節では、基本的なサービスである
      <span class="application">Subversion</span> および
      <span class="application">CTM</span> について説明します。</p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">ソースツリーの一部を最新のものに更新することは可能です。
	ただし、サポートされているアップデート手順は、
	ソースツリー全体を最新のものに更新し、
	<code class="filename">/bin</code>, <code class="filename">/sbin</code>
	といったユーザ空間で動作するもの、
	およびカーネルソースを再構築することのみです。
	ソースツリーの一部だけであったり、カーネルだけ、
	もしくはユーザランドのプログラムだけを更新した場合は、
	問題が生じることがよくあります。
        この時に発生する問題はコンパイル時のエラーからカーネルパニック、
        データの破壊とさまざまです。</p></div><a id="idp90824528" class="indexterm"></a><p><span class="application">Subversion</span>
      は <span class="emphasis"><em>pull</em></span> 同期モデルを採用しています。
      ユーザ (または <code class="command">cron</code> スクリプト) が
      <code class="command">svn</code> プログラムを起動し、
      ローカルにあるソースを最新状態にします。
      更新情報はその時点の最新のものであり、
      いつダウンロードするかはユーザがコントロールするので、
      <span class="application">Subversion</span>
      はローカルのソースツリーをアップデートする好ましい方法です。
      特定のファイルやディレクトリに限定して更新することも簡単にできます。
      更新情報はサーバによって素早く生成されます。
      <span class="application">Subversion</span> によるソースの同期方法については、
      <a class="xref" href="#svn" title="A.4. Subversion を使う">「<span class="application">Subversion</span> を使う」</a> で説明されています。</p><a id="idp90828368" class="indexterm"></a><p>一方、<span class="application">CTM</span>
      はあなたが持っているソースとマスタアーカイブ上に
      あるそれとの対話的な比較をおこないませんし、
      あるいは向こう側から変更点を pull したりもしません。
      そのかわりに、前回の実行時からの変更を認識するスクリプトが
      マスタ CTM マシン上で一日に数回実行され、
      すべての変更を compress して通し番号を振り、
      さらに電子メールで、印字可能な <acronym class="acronym">ASCII</acronym>
      キャラクタのみで転送できるようにエンコードします。
      ダウンロードした後は、
      これらの <span class="quote">「<span class="quote">デルタ</span>」</span> は、
      自動的にデコード、検査してユーザのソースのコピーに変更を適用する
      <code class="command">ctm.rmail</code> によって処理可能です。
      この処理は <span class="application">Subversion</span>
      よりずっと効率的であり、<span class="emphasis"><em>pull</em></span> モデルというよりむしろ
      <span class="emphasis"><em>push</em></span> モデルであるため、
      サーバ資源の負荷は軽くなります。
      <span class="application">CTM</span> を用いたソースの同期方法については、
      <a class="xref" href="#ctm" title="A.3. CTM を使う">「CTM を使う」</a> をご覧ください。</p><p><span class="application">Subversion</span> であれば、
      うっかりローカルのアーカイブの一部を消してしまっても、
      壊れた部分を検出して再構築してくれます。
      <span class="application">CTM</span> はこれをやってくれません。
      もしソースツリーの一部を消してしまい、
      そしてバックアップを取っていないのであれば、最新の
      <em class="firstterm">ベースデルタ</em> を用いて、一からやり直し、
      <span class="application">CTM</span>
      を使ってすべてを再構築しなければなりません。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makeworld"></a>18.6. world の再構築</h2></div></div></div><a id="idp90840272" class="indexterm"></a><p>FreeBSD-STABLE、FreeBSD-CURRENT などの
      FreeBSD のどれか特定のバージョンについて、
      ローカルのソースツリーを同期させたら、
      そのソースツリーを使ってシステムを再構築できます。
      このプロセスは world の再構築と呼ばれます。</p><p>world を再構築する<span class="emphasis"><em>前</em></span>に、
      以下を行ってください。</p><div class="procedure"><a id="idp90850768"></a><div class="procedure-title">手順18.1 world の構築<span class="emphasis"><em>前</em></span>に行う作業</div><ol class="procedure" type="1"><li class="step"><p>重要なデータを他のシステムやリムーバブルメディアにバックアップし、
	  きちんとバックアップが作成されていることを確認したら、
	  起動可能なインストールメディアを用意してください。
	  システムを再構築する<span class="emphasis"><em>前に</em></span>、
	  バックアップを作成することの重要性は、
	  いくら強調してもし過ぎると言うことはありません。
	  システム全体の再構築は難しい作業ではありませんが、
	  どんなに注意していたとしても、
	  ソースツリーそのものに手違いがあった時には、
	  システムが起動しなくなってしまう状態になることがあるのです。
	  多分、それを使うことはないと思いますが、
	  あとで後悔することのないよう、念のため用意しておきましょう!</p></li><li class="step"><a id="idp90853456" class="indexterm"></a><p>追いかけているブランチに応じて、
	  <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-stable" target="_top">freebsd-stable</a> もしくは <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">freebsd-current</a>
	  の最近のエントリを調べて、
	  既知の問題や影響を受けるシステムを確認してください。
	  既知の問題が同期しているバージョンのコードに影響する場合は、
	  その問題が解決されたことを報告する
	  <span class="quote">「<span class="quote">問題解決 (all clear)</span>」</span>
	  のアナウンスが投稿されるまで待ってから、ソースを同期して、
	  ローカルのソースに必要な修正を入れてください。</p></li><li class="step"><p><code class="filename">/usr/src/UPDATING</code> を読み、
	  同期しているソースのバージョンで必要となるステップがないかどうかを調べて下さい。
	  このファイルには潜在的な問題や特定のコマンドを実行する順などの重要な情報が含まれています。
	  大きなアップグレードでは、world
	  をインストールする前に特定のファイルの名前を変更したり、
	  削除するといった、特別なステップが追加で必要となることがあります。
	  ファイルの最後には、
	  現在推奨されているアップグレードの手順が詳しく正確に説明されています。
	  もし、<code class="filename">UPDATING</code> に書かれている手順が、
	  この節に書かれているものと矛盾していたら、
	  <code class="filename">UPDATING</code> の手順を採用してください。</p></li></ol></div><div xmlns="" class="warning"><h3 class="admontitle"><code xmlns="http://www.w3.org/1999/xhtml" class="command">make world</code> は使わないこと: </h3><p xmlns="http://www.w3.org/1999/xhtml">古いドキュメントの中には、
	<code class="command">make world</code> を使うことを薦めているものがあります。
	これは、重要な手順をいくつか抜かしてしまうので、
	エキスパートでなければ使うべきではありません。
	ほぼあらゆる場合において、<code class="command">make world</code>
	を実行するのは間違っており、
	ここで説明されている手順を用いるべきです。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="canonical-build"></a>18.6.1. システム更新の概要</h3></div></div></div><p>world の構築では、<a class="xref" href="#synching" title="18.5. ソースの同期">「ソースの同期」</a>
	に書かれている手順で入手したソースを用いて、
	古い FreeBSD のバージョンをアップデートします。</p><p>FreeBSD では、<span class="quote">「<span class="quote">world</span>」</span> は、
	カーネル、コアシステムのバイナリ、
	ライブラリ、プログラミングファイル、組み込みのコンパイラを意味します。
	これらのコンポーネントの構築およびインストールの順番は重要です。</p><p>例えば、古いコンパイラは、
	バグを含み、新しいカーネルをコンパイルできない可能性があります。
	そのため、新しいカーネルは新しいコンパイラで構築しなければならないので、
	新しいコンパイラの構築が必要となりますが、
	必ずしも、
	新しいコンパイラがインストールされている必要はありません。</p><p>新しい world は、
	新しいカーネルの機能に依存している可能性があるので、
	新しい world をインストールする前に、
	新しいカーネルがインストールされていなければなりません。
	古い world は、新しいカーネルでは正しく動かないかも知れません。
	そのため、新しいカーネルをインストールしたら、
	直ちに新しい world をインストールしてください。</p><p>設定の中には、新しい world
	をインストールする前に変更すべきものがありますが、
	古い world を壊す可能性があります。
	そのため、設定のアップデートは 2 つの手順で行われます。
	多くの場合、アップデートのプロセスは、ファイルを置き換えたり、
	追加のみを行い、古いファイルを削除しません。
	このことが問題を引き起こす可能性があるため、
	<code class="filename">/usr/src/UPDATING</code> には、
	手動で削除すべきファイルをどのステップで削除すべきかが書かれています。</p><p>これらを配慮した結果、以下で説明するアップグレードの推奨手順が作られました。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="command">make</code> を実行したときの出力は、
	  ファイルに保存すると良いでしょう。
	  何か障害が発生した場合には、エラーメッセージのコピーを
	  FreeBSD メーリングリストに投稿してください。</p><p xmlns="http://www.w3.org/1999/xhtml">ファイルに保存する最も簡単な方法は、
	  引数として出力の保存先のファイル名を指定して
	  <code class="command">script</code> コマンドを使うことです。
	  <code class="filename">/tmp</code> は、
	  再起動をすると削除されてしまう可能性があるので、
	  このディレクトリには出力を保存しないようにしてください。
	  出力の保存には、<code class="filename">/var/tmp</code> が適しています。
	  次のコマンドを world の構築の直前に行ない、再構築が終了したら
	  <strong class="userinput"><code>exit</code></strong> と入力してください。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>script <em class="replaceable"><code>/var/tmp/mw.out</code></em></code></strong>
Script started, output file is /var/tmp/mw.out</pre></div><div class="procedure"><a id="idp90913872"></a><div class="procedure-title">手順18.2 world の構築プロセスの概要</div><p>world の構築プロセスで用いられるコマンドは、
	  ここで示されている順番で実行してください。
	  この節では各コマンドの機能についてまとめます。</p><ol class="procedure" type="1"><li class="step"><p>システム上で world の構築が一度でも行われたのであれば、
	    前回の構築の際のコピーが
	    <code class="filename">/usr/obj</code>
	    に存在するはずです。
	    このディレクトリが存在しているのであれば、
	    このディレクトリを削除することで
	    <code class="command">make buildworld</code> の行程にかかる時間を短縮し、
	    依存問題に悩まされるようなトラブルを回避できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags -R noschg /usr/obj/*</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm -rf /usr/obj</code></strong></pre></li><li class="step"><p>新しいコンパイラと関連ツールを最初にコンパイルし、
	    その後、新しいコンパイラで、
	    新しい world の残りの部分をコンパイルします。
	    コンパイルされたものは、
	    <code class="filename">/usr/obj</code> に格納されます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make buildworld</code></strong></pre></li><li class="step"><p>コンパイラとカーネルのミスマッチを防ぐため、
	    <code class="filename">/usr/obj</code>
	    にある新しいコンパイラを用いて新しいカーネルを構築します。
	    再構築は、ある種のメモリ構造体が変更されたような場合には必須で、
	    <code class="command">ps</code> や <code class="command">top</code>
	    のようなプログラムは、
	    カーネルとソースコードのバージョンが一致しないと正常に動作しないでしょう。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make buildkernel</code></strong></pre></li><li class="step"><p>新しくアップデートされたカーネルで起動できるように、
	    新しいカーネルとカーネルモジュールをディスク上に配置します。
	    <code class="varname">kern.securelevel</code> を 1 より大きくしていて、
	    <span class="emphasis"><em>かつ</em></span> カーネルのバイナリファイルに
	    <code class="literal">noschg</code> のようなフラグを設定している場合は、
	    まず、シングルユーザモードに移行してください。
	    それ以外の場合は、
	    マルチユーザモードでこれらのコマンドを問題なく動かせるはずです。
	    <code class="varname">kern.securelevel</code> について詳しくは
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> を、ファイルに対するさまざまなフラグについて詳しくは
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a> をご覧ください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make installkernel</code></strong></pre></li><li class="step"><p>すでに実行されているソフトウェアをアップデートする際の問題を最小限にするため、シングルユーザモードに移行してください。
	    シングルユーザモードに移行することにより、
	    新しいカーネル上で古い world
	    が実行される際の問題も最小限にします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown now</code></strong></pre><p>シングルユーザモードに移行したら、UFS
	    でフォーマットされているシステムでは、
	    以下のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -u /</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -a -t ufs</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>swapon -a</code></strong></pre><p>もしシステムが ZFS でフォーマットされている場合には、
	    以下の 2 つのコマンドを実行してください。
	    この例では、zpool の名前は <code class="literal">zroot</code>
	    であると仮定します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>zfs set readonly=off zroot</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>zfs mount -a</code></strong></pre></li><li class="step"><p>オプション: もし、デフォルトの US English
	    以外のキーボードマップが必要であれば、
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kbdmap&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kbdmap</span>(1)</span></a> で変更してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kbdmap</code></strong></pre></li><li class="step"><p>その後、どちらのファイルシステムでも、
	    <acronym class="acronym">CMOS</acronym> クロックが地域時間に設定されていて
	    GMT ではない場合
	    (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=date&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">date</span>(1)</span></a> が正しい時間と地域を表示しないなら当てはまります)
	    には、次のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>adjkerntz -i</code></strong></pre></li><li class="step"><p>システムの再構築では、
	    <code class="filename">/etc</code>,
	    <code class="filename">/var</code> や
	    <code class="filename">/usr</code>
	    といったディレクトリに新規に導入されたファイルや、
	    変更された設定ファイルに対する更新は行なわれません。
	    次に、新しい world
	    に対する <code class="filename">/etc</code>
	    の最初の設定ファイルのアップデートを行います。
	    以下のコマンドは
	    <code class="buildtarget">installworld</code>
	    に成功するために本質的なファイルのみを比較します。
	    たとえば、
	    このステップでは、最後のアップデート後に FreeBSD に追加された、
	    新しいグループや新しいシステムアカウント、
	    もしくはスタートアップスクリプトがシステムに追加されることがあります。
	    次のコマンドに関する詳細な情報については、
	    <a class="xref" href="#mergemaster" title="18.6.4. 設定ファイルの同期">「設定ファイルの同期」</a> を参照してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mergemaster -iF</code></strong></pre></li><li class="step"><p><code class="filename">/usr/obj</code>
	    にある新しい world
	    およびシステムのバイナリをインストールします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installworld</code></strong></pre></li><li class="step"><p>残りの設定ファイルをアップデートします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mergemaster -p</code></strong></pre></li><li class="step"><p>使われなくなったファイルを削除します。
	    もし使われなくなったファイルがディスクに残っていると、
	    問題が起きる可能性があるため重要な作業です。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make delete-old</code></strong></pre></li><li class="step"><p>再起動を行い、新しいカーネル、
	    world そして設定ファイルをロードします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>reboot</code></strong></pre></li><li class="step"><p>古いライブラリを削除する前に、
	    <a class="xref" href="#ports-upgrading" title="5.5.3. ports のアップグレード">「ports のアップグレード」</a>
	    に書かれている手順にしたがって、
	    すべての ports を再構築する必要があります。
	    再構築が終わったら、新しいライブラリと競合することを避けるため、
	    使われなくなったライブラリを削除します。
	    この過程に関する詳細については、<a class="xref" href="#make-delete-old" title="18.6.5. 使われなくなったファイル、ライブラリの削除">「使われなくなったファイル、ライブラリの削除」</a>
	    を参照して下さい。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make delete-old-libs</code></strong></pre></li></ol></div><a id="idp90963920" class="indexterm"></a><p>もしシステムがダウンタイムを持つことができるのであれば、
	システムのコンパイルをマルチユーザモードでおこない、
	インストールのためにシングルユーザモードに移行するという方法ではなく、
	コンパイルをシングルユーザモードで行うことを考えてください。
	システムの再インストールでは、たくさんの重要なシステムファイル、
	すべての標準的なシステムバイナリ、ライブラリ、
	インクルードファイルが変更されるので、
	実際に動作しているシステムにおいて、
	特にアクティブなユーザは、トラブルに見舞われる可能性があります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="src-updating"></a>18.6.2. 設定ファイル</h3></div></div></div><a id="idp90965712" class="indexterm"></a><p>world
	の構築プロセスでは、いくつかの設定ファイルが使われます。</p><p><code class="filename">/usr/src</code> に置かれている、
	<code class="filename">Makefile</code> には、
	FreeBSD を構成するプログラムの構築方法や、
	どういう順番でそれらを構築すべきかといった指示が記述されています。</p><p><code class="command">make</code> で利用可能なオプションの説明は
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">make.conf</span>(5)</span></a> や、共通の例が
	<code class="filename">/usr/share/examples/etc/make.conf</code> にあります。
	これらの設定を <code class="filename">/etc/make.conf</code> に追加すると、
	<code class="command">make</code> の実行やプログラムの構築方法を設定できます。
	これらのオプションは、
	<code class="command">make</code> が使われる際には常に有効となるため、
	Ports Collection からアプリケーションをコンパイルする時、
	ユーザが書いた C プログラムや FreeBSD
	オペレーティングシステムを構築する際に影響を及ぼします。
	ある設定を変更したことにより、影響が広い範囲におよび、
	驚くべき結果をもたらす可能性があります。
	両方のファイルに書かれているコメントを読むことと、
	デフォルトの設定は、パフォーマンスと安全性の観点から選ばれていることを覚えておいてください。</p><a id="idp90975184" class="indexterm"></a><p><code class="filename">/etc/src.conf</code> は、
	ソースコードを用いたオペレーティングシステムの構築をコントロールします。
	<code class="filename">/etc/make.conf</code> とは異なり、
	<code class="filename">/etc/src.conf</code> に書かれた設定は、
	FreeBSD オペレーティングシステムそのものを構築するときにのみ影響します。
	このファイルで設定可能な多くのオプションについては、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=src.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">src.conf</span>(5)</span></a> に記述されています。
	一見したところ無効にされている、
	使われていないカーネルモジュールやビルドオプションに注意してください。
	ときどき予期しなかったり、わずかな影響を与えることがあります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="make-buildworld"></a>18.6.3. 変数とターゲット</h3></div></div></div><p><code class="command">make</code> の使用における一般的な書式は、
	次のとおりです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -<em class="replaceable"><code>x</code></em> -D<em class="replaceable"><code>VARIABLE</code></em> <em class="replaceable"><code>target</code></em></code></strong></pre><p>この例では、<code class="option">-<em class="replaceable"><code>x</code></em></code> が
	<code class="command">make</code> に渡されるオプションになります。
	利用可能なオプションについては、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>
	を参照してください。</p><p>変数を渡すには、変数の名前を
	<code class="option">-D<em class="replaceable"><code>VARIABLE</code></em></code>
	のように指定してください。
	この変数は <code class="filename">Makefile</code> の動作をコントロールします。
	変数の指定は、<code class="filename">/etc/make.conf</code> で設定するか、
	<code class="command">make</code> の実行時に指定するかのどちらかで行います。
	たとえば、以下の変数は、プロファイル版のライブラリを構築しないことを指定します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DNO_PROFILE <em class="replaceable"><code>target</code></em></code></strong></pre><p>これは、<code class="filename">/etc/make.conf</code>
	の中で以下のように設定することに対応します。</p><pre class="programlisting">NO_PROFILE=    true     #    Avoid compiling profiled libraries</pre><p><em class="replaceable"><code>target</code></em> は、<code class="command">make</code> に
	どのように動作するのかを指示するためのものです。
	<code class="filename">Makefile</code> は利用可能なターゲットを定義しています。
	ターゲットには、
	システムの再構築に必要な段階を、
	多くのさらに細かい段階に分割するため、
	構築の過程で利用されるものがあります。</p><p>選択肢が分けられていることは、二つの理由から有用です。
	まず第一に、構築作業は稼働中のシステムにまったく影響を与えません。
	そのため、マルチユーザモードで稼働中のシステムでも、安全に
	<code class="buildtarget">buildworld</code> を実行できます。
	ただし、<code class="buildtarget">installworld</code> は
	シングルユーザモードで行なうことをおすすめします。</p><p>第二に、<acronym class="acronym">NFS</acronym> マウントを利用することで、<a class="xref" href="#small-lan" title="18.7. 複数のマシンで追いかける">「複数のマシンで追いかける」</a> で説明されているように、
	ネットワーク上の複数のマシンをアップグレードすることが可能な点があげられます。</p><p><code class="command">make</code> に
	<code class="option">-j</code> をつけると、
	同時に複数のプロセスを生成できます。
	構築過程の大部分では <acronym class="acronym">CPU</acronym> 性能の限界より
	<acronym class="acronym">I/O</acronym> 性能の限界の方が問題となるため、
	シングル <acronym class="acronym">CPU</acronym> とマルチ <acronym class="acronym">CPU</acronym>
	マシンの両方に効果があります。</p><p>普通のシングル <acronym class="acronym">CPU</acronym> マシンで以下のコマンド
	を実行すると、最大 4 個までのプロセスを同時に実行します。
	メーリングリストに投稿された経験的な報告によると、
	4 個という指定が最も良いパフォーマンスを示すようです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -j4 buildworld</code></strong></pre><p>マルチ <acronym class="acronym">CPU</acronym> マシンでは、
	<code class="literal">6</code> から <code class="literal">10</code> の間の値を設定し、
	速度がどれくらい向上するか確認してみてください。</p><a id="idp91002448" class="indexterm"></a><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="command">make buildworld</code>
	  に変数を指定した場合は、同じ指定を
          <code class="command">make installworld</code> にも指定しなければなりません。
	  ただし <code class="buildtarget">installworld</code>
	  では、<code class="option">-j</code> を
	  <span class="emphasis"><em>絶対に使ってはいけません</em></span>。</p><p xmlns="http://www.w3.org/1999/xhtml">たとえば、以下のコマンドを実行したなら、</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DNO_PROFILE buildworld</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">以下のようにしてインストールしなければなりません。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DNO_PROFILE installworld</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">もしそうしなかった場合、2 番目のコマンドは、
          <code class="command">make buildworld</code>
	  の段階で構築されていないプロファイル版ライブラリをインストールしようとしてしまうでしょう。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mergemaster"></a>18.6.4. 設定ファイルの同期</h3></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span> <span class="firstname">Tom</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp91021776" class="indexterm"></a><p>FreeBSD の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> Bourne シェルスクリプトは、
	<code class="filename">/etc</code> にある設定ファイルと、
	<code class="filename">/usr/src/etc</code>
	にある設定ファイルの違いを確認するためのものです。
	システムの設定ファイルをソースツリーにある設定ファイルにアップデートするには、
        この方法を使用してください。</p><p><code class="command">mergemaster</code> を使う前に、
	既存の <code class="filename">/etc</code>
	をどこか安全な場所にコピーしておきましょう。
	再帰的なコピーを行なう <code class="option">-R</code> と、
	ファイルの更新時間や所有者などを保存する
	<code class="option">-p</code> と共に実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp -Rp /etc /etc.old</code></strong></pre><p><code class="command">mergemaster</code> を実行すると、
	<code class="filename">/</code> を起点とした一時的なルート環境を構築し、
	さまざまなシステム設定ファイルを
	(訳注: デフォルトでは <code class="filename">/var/tmp/temproot</code> に)
	置いていきます。
	これらのファイルは現在システムにインストールされているファイルと比較されます。
	異なるファイルは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> 形式で示され、
	<code class="option">+</code> の記号は追加または変更された行を表し、
	<code class="option">-</code> は完全に削除されたか新しく置き換えられた行を表します。
	ファイルの違いの表示方法についてのより詳しい情報は、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> を参照してください。</p><p>次に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> は違いのあるファイルをそれぞれ示し、
	選択可能なオプションを表示します。
	ここでは、新しいファイルを削除するか、
	一時ファイルをそのままインストールするか、
	一時ファイルと現在インストールされているファイルを統合するか、
	もしくは結果をもう一度見るかを選択できます。</p><p>一時ファイルの削除を選ぶと、<code class="command">mergemaster</code>
	に現在のファイルを変更しないで新しいバージョンを削除せよと伝えます。
	この選択は、お勧めできません。
	<code class="command">mergemaster</code>
	のプロンプトで <span class="keycap"><strong>?</strong></span> とタイプすれば、
	いつでもヘルプが見られます。
	ファイルのスキップを選ぶと、他のすべてのファイルを終えたあと、
	もう一度そのファイルが提示されます。</p><p>一時ファイルをそのままインストールすることを選ぶと、
	現在のファイルを新しいファイルで置き換えます。
	ほとんどの手を加えていないファイルは、
	これが一番よい選択です。</p><p>ファイルの統合を選んだ場合、
	テキストエディタが起動され、両方のファイルの中身が提示されます。
	画面上に並ぶ両方のファイルを見て新しいファイルを作成するために両方から必要な部分を選択し、
	2 つのファイルを統合することができます。
	並んでいるファイルを比較するとき、
	<span class="keycap"><strong>l</strong></span> で左側の中身を選択し、
	<span class="keycap"><strong>r</strong></span> で右側の中身を選択します。
	最終出力は左右両方の部分でできたファイルになるでしょう。
	このファイルをインストールすることができます。
	たいてい、このオプションはユーザが設定を変更したファイルに使われます。</p><p>結果をもう一度見る、を選択すると、
	ファイルの相異点をもう一度見ることができます。</p><p><code class="command">mergemaster</code>
	がシステムファイルの比較を終えたあと、
	他のオプションについてもプロンプトが表示されます。
	たとえば、
	パスワードファイルを再構築するかどうかを尋ねることがあります。
	最後に残った一時ファイルを削除するかどうかを尋ねて終了します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="make-delete-old"></a>18.6.5. 使われなくなったファイル、ライブラリの削除</h3></div><div><span class="authorgroup">ベースとなったノートの提供: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Shterenlikht</span> <span class="firstname">Anton</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp91049040" class="indexterm"></a><p>FreeBSD の開発サイクルにおいて、
	ファイルやシステムの一部が使われなくなることがあります。
	それらの機能が別の場所で実装されたり、
	ライブラリのバージョン番号が変わったり、
	システムから完全に削除されることがあるためです。
	システムのアップデート時に削除が必要になるのは、
	古いファイル、ライブラリそしてディレクトリです。
	これらのファイルを削除することで、
	記憶媒体やバックアップ媒体において不必要な容量を占めている古いファイルが、
	システム上に散乱することがなくなります。
	また、古いライブラリのセキュリティや安定性に問題があると、
	ライブラリを新しくしてシステムを安定な状態にし、
	古いライブラリによりシステムがクラッシュすることを防がなければなりません。
	使われなくなったファイル、ディレクトリ、ライブラリは
	<code class="filename">/usr/src/ObsoleteFiles.inc</code>
	にまとめられています。以下の手順により、
	アップグレードの過程でこれらのファイルを削除できます。</p><p>
	<code class="command">make installworld</code>
	と、その後の <code class="command">mergemaster</code> が無事に終わったら、
	使われなくなったファイルやライブラリを確認してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make check-old</code></strong></pre><p>見つかった古いファイルは、以下のコマンドで削除できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make delete-old</code></strong></pre><p>使われなくなったファイルを削除する際、
	ファイルごとに確認が求められます。
	確認を省略し、自動的にファイルを削除するには、
	以下のように <code class="varname">BATCH_DELETE_OLD_FILES</code>
	を設定してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DBATCH_DELETE_OLD_FILES delete-old</code></strong></pre><p><code class="command">yes</code>
	をコマンドへパイプでつなげても省略できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>yes|make delete-old</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Warning: </h3><p xmlns="http://www.w3.org/1999/xhtml">使われなくなったファイルを削除すると、
	  削除したファイルに依存していたアプリケーションは壊れてしまいます。
	  特に、古いライブラリを削除する場合に起こり得ます。
	  通常、<code class="command">make
	    delete-old-libs</code>
	  を実行する前に、
	  これらの古いライブラリを使っているプログラム、ports、
	  ライブラリを再構築する必要があります。</p></div><p>共有ライブラリをチェックするユーティリティとして、
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/libchk/pkg-descr">sysutils/libchk</a> や
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/bsdadminscripts/pkg-descr">sysutils/bsdadminscripts</a>
	を利用できます。</p><p>使われなくなった共有ライブラリは、
	新しいライブラリと競合し、以下のようなメッセージを表示することがあります。</p><pre class="screen">/usr/bin/ld: warning: libz.so.4, needed by /usr/local/lib/libtiff.so, may conflict with libz.so.5
/usr/bin/ld: warning: librpcsvc.so.4, needed by /usr/local/lib/libXext.so, may conflict with librpcsvc.so.5</pre><p>この問題を解決するには、
	まずライブラリがどの port によってインストールされたかを調べて下さい。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg which /usr/local/lib/libtiff.so</code></strong>
  /usr/local/lib/libtiff.so was installed by package tiff-3.9.4
<code class="prompt">#</code> <strong class="userinput"><code>pkg which /usr/local/lib/libXext.so</code></strong>
  /usr/local/lib/libXext.so was installed by package libXext-1.1.1,1</pre><p>見つかった port をアンインストールし、
	再構築、再インストールしてください。
	この過程は <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portmaster/pkg-descr">ports-mgmt/portmaster</a>
	で自動化できます。
	すべての ports が再構築され、
	古いライブラリがどこにも使われていないことを確認したら、
	以下のコマンドで古いライブラリを削除してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make delete-old-libs</code></strong></pre><p>もしちょっとした問題があった場合でも、
        システムの一部を再構築するのは簡単です。
	たとえば、アップグレードや <code class="filename">/etc</code>
	のマージの途中で誤って
	<code class="filename">/etc/magic</code> を削除してしまい、
	その結果 <code class="command">file</code>
	が動作しなくなってしまったような場合には、
	次のコマンドを実行して修復してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.bin/file</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make all install</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-questions"></a>18.6.6. よくある質問</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">変更が行なわれたら、
	    その度にシステムの再構築が必要になるのでしょうか?</span></dt><dd><p>それは変更の内容によります。
	      たとえば、<span class="application">svn</span> を実行したとき、
	      次にあげるようなファイルが更新されていたとします。</p><pre class="screen"><code class="filename">src/games/cribbage/instr.c</code>
<code class="filename">src/games/sail/pl_main.c</code>
<code class="filename">src/release/sysinstall/config.c</code>
<code class="filename">src/release/sysinstall/media.c</code>
<code class="filename">src/share/mk/bsd.port.mk</code></pre><p>このときには、改めてシステム全体を再構築する必要はないでしょう。
	      そのかわり、適切なサブディレクトリに移って
	      <code class="command">make all install</code> を行ってください。
	      しかし、たとえば <code class="filename">src/lib/libc/stdlib</code>
	      のような大きな変更が行なわれた場合には、
	      システム全体を再構築することを検討してください。</p><p>2 週間ごとにシステムを再構築して、
	      その 2 週間分の変更を取り込むユーザもいますし、
	      変更のあった部分だけ再構築し、
	      すべての依存関係を確かめたいと考えるユーザもいます。
	      それらはどのくらいの頻度でアップグレードしたいか、
	      そして FreeBSD-STABLE か FreeBSD-CURRENT
	      のどちらを追いかけているのかにもよります。</p></dd><dt><span class="term">どうして
	      signal 11<a id="idp91100752" class="indexterm"></a>
	      (もしくは他のシグナル番号) のエラーがたくさん出て
	      コンパイルが失敗するのでしょうか？</span></dt><dd><p>これは通常、ハードウェアに問題があることを示しています。
	      world の再構築は、
	      ハードウェア (特にメモリ)
	      に対する負荷耐久試験を行なうための有効な手段です。
	      本当にこの問題によるものかどうかは、
	      <span class="application">make</span>
	      をもう一度実行し、異なる段階で異常終了が発生するか、
	      ということから確認できます。</p><p>このエラーに対応するには、RAM を始めとして、
	      マシンの部品をメモリから交換して、
	      どの部分が悪いのかを調べてみてください。</p></dd><dt><span class="term">終了したら <code class="filename">/usr/obj</code>
	      を削除してもかまいませんか?</span></dt><dd><p>このディレクトリには、
	      コンパイルの段階で生成された
	      すべてのオブジェクトファイルが含まれています。
	      通常 <code class="command">make buildworld</code> の最初の段階では、
	      このディレクトリを削除して新しくつくり直すようになっています。
	      構築終了後も <code class="filename">/usr/obj</code>
	      を保存しておいても、あまり意味はありません。
	      削除すれば、だいたい 2GB
	      のディスクスペースを解放することができます。</p></dd><dt><span class="term">構築を中断した場合、
	    その構築を途中から再開することはできますか?</span></dt><dd><p>それは、問題が起こるまでに、
	      どれだけの作業を終えているかによります。
	      一般的に <code class="command">make buildworld</code> は、
	      基本的なツールや、
	      システムライブラリの新しいコピーを作成します。
	      その後、これらのツールやライブラリがインストールされてから、
	      自分自身の再構築に使われ、もう一度、インストールされます。
	      システムの残りの部分がその新しいシステムファイルを用いて作り直されます。</p><p>再構築の最終段階では、
	      まったく安全に以下のコマンドを実行することができます。
	      これは、前回の <code class="command">make buildworld</code>
	      の作業をやり直しません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make -DNO_CLEAN all</code></strong></pre><p>次のメッセージ</p><pre class="screen">--------------------------------------------------------------
Building everything..
--------------------------------------------------------------</pre><p>が <code class="command">make buildworld</code> の出力にある場合には、
	      上のようにしてもほとんど悪影響が現れることはありません。</p><p>もしこのメッセージがない場合には、
	      安全を確保し、後悔するようなことがないよう、
              システムの再構築を最初からやり直しましょう。</p></dd><dt><span class="term">make world を高速化できますか?</span></dt><dd><p>いくつかの方法で build world のプロセスを高速化できます。
	      たとえば、全体のプロセスは、
	      シングルユーザモードで動かすことで高速になります。
	      しかしながら、この方法では、プロセスが完了するまで、
	      ユーザがシステムにアクセスすることはできません。</p><p>ファイルシステムを注意深く設計したり、
	      ZFS データセットを使うことでも変わります。
	      <code class="filename">/usr/src</code> と
	      <code class="filename">/usr/obj</code>
	      を、異なるディスク上の別のファイルシステムに置くことを検討してください。
	      また可能ならば、
	      異なるディスクコントローラに接続された異なるディスクにファイルシステムを置いてください。
	      <code class="filename">/usr/src</code>
	      をマウントする時には、
	      最後にアクセスされた時刻の書き込みを抑制するように、
	      <code class="option">noatime</code>
	      オプションを付けてマウントしてください。
	      もし、<code class="filename">/usr/src</code> が、
	      独立したファイルシステムではないときには、
	      <code class="option">noatime</code> オプションで、<code class="filename">/usr</code>
	      を再マウントしてください。</p><p><code class="filename">/usr/obj</code>
	      のあるファイルシステムを、<code class="option">async</code>
	      オプションをつけてマウントもしくは再マウントしてください。
	      これによって、ディスクへの書き込みが非同期になります。
	      つまり、書き込み命令はすぐに完了するのに対し、
	      実際にデータがディスクに書き込まれるのは、その数秒後になります。
	      これによって、書き込み処理の一括化が可能になるため、
	      劇的なパフォーマンスの向上が期待できます。
	      
	    </p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">
		このオプションを指定すると、ファイルシステムは
		壊れやすくなってしまうことに注意してください。
		このオプションを付けていて、突然電源が落ちた場合には、
		再起動後にファイルシステムが復旧不能になる可能性が
		非常に高くなります。</p><p xmlns="http://www.w3.org/1999/xhtml">もし、<code class="filename">/usr/obj</code>
		が、ファイルシステムにある唯一のディレクトリであれば、
		これは問題になりません。
                しかし、同じファイルシステムに、
		他の貴重なデータを置いているときには、
		このオプションを有効にする前に、
		バックアップをきちんと取っておきましょう。</p></div><p><code class="filename">/etc/make.conf</code> に
	      <span class="quote">「<span class="quote">NO_PROFILE=true</span>」</span> をセットして、
	      プロファイル版の作成を無効化してください。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> に
	      <code class="option">-j<em class="replaceable"><code>n</code></em></code>
	      を指定して、複数のプロセスを並列に実行させてください。
	      これは、単一のプロセッサでも複数のプロセッサでも、
	      同様に恩恵を得ることができます。</p></dd><dt><span class="term">なにか悪いことがあったらどうすればいいですか?</span></dt><dd><p>まず、自分の環境に前のビルドの余計なゴミが残っていないことをはっきりと確認してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags -R noschg /usr/obj/usr</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm -rf /usr/obj/usr</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong></pre><p>ええ、<code class="command">make cleandir</code>
	      は本当に 2 回実行するのです。</p><p>そして、<code class="command">make buildworld</code> を行い、
	      全プロセスを最初からやり直してください。</p><p>まだ問題があれば、エラーと <code class="command">uname -a</code>
	      の出力を <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">FreeBSD general questions メーリングリスト</a> に送ってください。
	      設定についてさらに質問されても答えられるよう用意してください!</p></dd></dl></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="small-lan"></a>18.7. 複数のマシンで追いかける</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Meyer</span> <span class="firstname">Mike</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp91172048" class="indexterm"></a><p>複数のコンピュータで同じソースツリーを追いかけていて、
      全部のマシンにソースをダウンロードして全部を再構築するのは、
      ディスクスペース、ネットワーク帯域、
      そして <acronym class="acronym">CPU</acronym> サイクルの無駄使いです。
      解決策は 1 つのマシンに仕事のほとんどをさせ、
      残りのマシンは <acronym class="acronym">NFS</acronym>
      経由でそれをマウントする、というものです。
      このセクションではそのやり方を概観します。
      <acronym class="acronym">NFS</acronym> の使い方の詳細については、<a class="xref" href="#network-nfs" title="22.6. NFS">「NFS」</a> をご覧下さい。</p><p>まず初めに、同じバイナリで動かそうとするマシンたちを決めます。
      このマシンたちのことを<em class="firstterm">ビルドセット</em>と呼びます。
      それぞれのマシンはカスタムカーネルを持っているかもしれませんが、
      同じユーザランドバイナリを動かそうというのです。
      このビルドセットから、
      <em class="firstterm">ビルドマシン</em>となるマシンを 1 台選びます。
      ベースシステムとカーネルを構築するのはこのマシンになります。
      理想的には、このマシンは <code class="command">make buildworld</code>
      と <code class="command">make buildkernel</code>
      を実行するのに十分な <acronym class="acronym">CPU</acronym>
      を持った速いマシンであるべきです。</p><p><em class="firstterm">テストマシン</em>
      となるべきマシンも選んでください。
      更新されたソフトウェアを使う前にそのマシンでテストするのです。
      テストマシンはかなり長い時間落ちていても
      だいじょうぶなマシン<span class="emphasis"><em>であったほうがいいでしょう</em></span>。
      ビルドマシンでもかまいませんが、
      ビルドマシンである必要はありません。</p><p>このビルドセットのマシンはすべて
      <code class="filename">/usr/obj</code> と
      <code class="filename">/usr/src</code>
      をビルドマシンから <acronym class="acronym">FTP</acronym>
      経由でマウントする必要があります。
      ビルドセット自体が複数ある場合は、
      <code class="filename">/usr/src</code>
      はひとつのビルドマシン上にあるべきです。
      他のマシンからはそれを <acronym class="acronym">NFS</acronym>
      マウントするようにしましょう。</p><p>ビルドセットのすべてのマシン上の
      <code class="filename">/etc/make.conf</code> と
      <code class="filename">/etc/src.conf</code>
      がビルドマシンと一致していることを確認してください。つまり、
      ビルドマシンはビルドセットのどのマシンもインストールしようとしている
      ベースシステムを全部ビルドしなければならないということです。
      また、各ビルドマシンは <code class="filename">/etc/make.conf</code>
      にそれぞれのビルドマシンのカーネル名を
      <code class="varname">KERNCONF</code> で指定し、
      ビルドマシンは自分自身のカーネルから順に全部のカーネル名を
      <code class="varname">KERNCONF</code> にリストアップしてください。
      ビルドマシンは各マシンのカーネル設定ファイルを <code class="filename">/usr/src/sys/<em class="replaceable"><code>arch</code></em>/conf</code>
      に持っていなければなりません。</p><p>ビルドマシンにて、
      <a class="xref" href="#makeworld" title="18.6. world の再構築">「world の再構築」</a>
      に書いてあるようにカーネルとベースシステムを構築してください。
      でも、まだビルドマシンにはインストールしないでください。
      そのかわり、
      ビルドしたカーネルをテストマシンにインストールしてください。
      <acronym class="acronym">FTP</acronym> 経由で
      <code class="filename">/usr/src</code> および <code class="filename">/usr/obj</code>
      をテストマシンにマウントしてください。
      その後、<code class="command">shutdown now</code>
      を実行してシングルユーザモードに移行し、
      新しいカーネルとベースシステムをインストールし、
      いつもするように
      <code class="command">mergemaster</code> を実行してください。
      終わったら、再起動して通常のマルチユーザ動作に戻します。</p><p>テストマシンにあるものすべてがちゃんと動いている確信が得られたら、
      同じ手順でビルドセットの他のマシンにも新しいソフトウェアをインストールします。</p><p>ports ツリーにも同じ方法が使えます。
      最初のステップは、
      ビルドセットのすべてのマシンが <acronym class="acronym">NFS</acronym> 経由で
      <code class="filename">/usr/ports</code> をマウントすることです。
      そして、distfiles を共有するように
      <code class="filename">/etc/make.conf</code> を設定します。
      <acronym class="acronym">NFS</acronym> マウントによってマップされる
      <code class="systemitem">root</code>
      ユーザが何であれ、<code class="varname">DISTDIR</code>
      はそのユーザが書き込める共通の共有ディレクトリに設定する必要があります。
      ports をローカルでビルドする場合には、
      各マシンは <code class="varname">WRKDIRPREFIX</code>
      を自分のマシンのビルドディレクトリに設定しなければなりません。
      また、ビルドシステムが packages
      をビルドしてビルドセットのコンピュータに配布するのであれば、
      <code class="varname">DISTDIR</code> と同じようにビルドシステム上の
      <code class="varname">PACKAGES</code>
      ディレクトリも設定してください。</p></div></div></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-communication"></a>パート〓IV.〓ネットワーク通信</h1></div></div></div><div class="partintro"><div xmlns=""></div><p>FreeBSD は、高性能なネットワークサーバとして最も広く使用されているオペレーティングシステムの 1 つです。
	各章の内容は以下の通りです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>シリアル通信</p></li><li class="listitem"><p>PPP と PPP オーバイーサネット (PPPoE)</p></li><li class="listitem"><p>電子メール</p></li><li class="listitem"><p>ネットワークサーバの運用</p></li><li class="listitem"><p>ファイアウォール</p></li><li class="listitem"><p>その他の高度なネットワークに関する話題</p></li></ul></div><p>各章は、必要になった時に個別に参照できるように構成されています。
	どの順番で読んでも構いませんし、ネットワーク環境で FreeBSD を使うのに、
	すべてを読み通す必要がある、というわけでもありません。</p><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="chapter"><a href="#serialcomms">19. シリアル通信</a></span></dt><dd><dl><dt><span class="sect1"><a href="#serial-synopsis">19.1. この章では</a></span></dt><dt><span class="sect1"><a href="#serial">19.2. はじめに</a></span></dt><dt><span class="sect1"><a href="#term">19.3. シリアル端末</a></span></dt><dt><span class="sect1"><a href="#dialup">19.4. ダイアルインサービス</a></span></dt><dt><span class="sect1"><a href="#dialout">19.5. ダイアルアウトサービス</a></span></dt><dt><span class="sect1"><a href="#serialconsole-setup">19.6. シリアルコンソールの設定</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ppp-and-slip">20. PPP と SLIP</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp92000208">20.1. この章では</a></span></dt><dt><span class="sect1"><a href="#userppp">20.2. ユーザ ppp の利用</a></span></dt><dt><span class="sect1"><a href="#ppp">20.3. カーネル PPP の利用</a></span></dt><dt><span class="sect1"><a href="#pppoe">20.4.  PPP オーバイーサネット (PPPoE) の利用</a></span></dt><dt><span class="sect1"><a href="#slip">20.5. SLIP の利用</a></span></dt></dl></dd><dt><span class="chapter"><a href="#mail">21. 電子メール</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mail-synopsis">21.1. この章では</a></span></dt><dt><span class="sect1"><a href="#mail-using">21.2. 電子メールを使う</a></span></dt><dt><span class="sect1"><a href="#sendmail">21.3. <span class="application">sendmail</span> の設定</a></span></dt><dt><span class="sect1"><a href="#mail-changingmta">21.4. MTA の変更</a></span></dt><dt><span class="sect1"><a href="#mail-trouble">21.5. トラブルシュート</a></span></dt><dt><span class="sect1"><a href="#mail-advanced">21.6. 先進的なトピックス</a></span></dt><dt><span class="sect1"><a href="#SMTP-UUCP">21.7. UUCP とともに SMTP を使う</a></span></dt><dt><span class="sect1"><a href="#SMTP-dialup">21.8. ダイアルアップ接続でメールを使う</a></span></dt><dt><span class="sect1"><a href="#SMTP-Auth">21.9. SMTP 認証</a></span></dt></dl></dd><dt><span class="chapter"><a href="#advanced-networking">22. 高度なネットワーク</a></span></dt><dd><dl><dt><span class="sect1"><a href="#advanced-networking-synopsis">22.1. この章では</a></span></dt><dt><span class="sect1"><a href="#network-routing">22.2. ゲートウェイと経路</a></span></dt><dt><span class="sect1"><a href="#network-wireless">22.3. 無線ネットワーク</a></span></dt><dt><span class="sect1"><a href="#network-bluetooth">22.4. Bluetooth</a></span></dt><dt><span class="sect1"><a href="#network-bridging">22.5. ブリッジ</a></span></dt><dt><span class="sect1"><a href="#network-nfs">22.6. NFS</a></span></dt><dt><span class="sect1"><a href="#network-diskless">22.7. ディスクレス稼働</a></span></dt><dt><span class="sect1"><a href="#network-isdn">22.8. ISDN</a></span></dt><dt><span class="sect1"><a href="#network-nis">22.9. NIS/YP</a></span></dt><dt><span class="sect1"><a href="#network-dhcp">22.10. DHCP</a></span></dt><dt><span class="sect1"><a href="#network-dns">22.11. DNS</a></span></dt><dt><span class="sect1"><a href="#network-ntp">22.12. NTP</a></span></dt><dt><span class="sect1"><a href="#network-natd">22.13. ネットワークアドレス変換 (NAT)</a></span></dt><dt><span class="sect1"><a href="#network-inetd">22.14. <span class="application">inetd</span> <span class="quote">「<span class="quote">スーパサーバ</span>」</span></a></span></dt><dt><span class="sect1"><a href="#network-plip">22.15. パラレルライン IP (PLIP)</a></span></dt><dt><span class="sect1"><a href="#network-ipv6">22.16. IPv6</a></span></dt></dl></dd></dl></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialcomms"></a>第19章 シリアル通信</h2></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#serial-synopsis">19.1. この章では</a></span></dt><dt><span class="sect1"><a href="#serial">19.2. はじめに</a></span></dt><dt><span class="sect1"><a href="#term">19.3. シリアル端末</a></span></dt><dt><span class="sect1"><a href="#dialup">19.4. ダイアルインサービス</a></span></dt><dt><span class="sect1"><a href="#dialout">19.5. ダイアルアウトサービス</a></span></dt><dt><span class="sect1"><a href="#serialconsole-setup">19.6. シリアルコンソールの設定</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="serial-synopsis"></a>19.1. この章では</h2></div></div></div><a id="idp91213264" class="indexterm"></a><p>
      Unix は現在に至るまで、常にシリアル通信機能をサポートしていました。
      実際、本当に初期の Unix マシンは、ユーザとの入出力にシリアル通信を使っていました。
      10 文字毎秒のシリアルプリンタ、
      キーボードから構成された <span class="quote">「<span class="quote">端末(terminal)</span>」</span> が広く使われていた当時とは、
      何もかもがすっかり変わっています。この章では、FreeBSD
      でシリアル通信を行なういくつかの方法について説明しています。
    </p><p>この章を読むと、以下のことがわかります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD システムへの端末の接続方法</p></li><li class="listitem"><p>リモートホストへダイヤルするためのモデムの使い方</p></li><li class="listitem"><p>リモートのユーザがモデムでシステムにログインできるようにする方法</p></li><li class="listitem"><p>シリアルコンソールからのシステム起動方法</p></li></ul></div><p>この章を読む前に、以下のことを行っておくべきです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>新しいカーネルを構成してインストールする方法を覚える
	(<a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a>)。</p></li><li class="listitem"><p>Unix のパーミッションとプロセスについて理解する
	(<a class="xref" href="#basics" title="第4章 UNIX の基礎知識">4章<em>UNIX の基礎知識</em></a>)。</p></li><li class="listitem"><p>FreeBSD で使おうとしているシリアルハードウェア
	(モデムまたはマルチポートカード)
	のテクニカルマニュアルを読めるようにする。</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="serial"></a>19.2. はじめに</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serial-terminology"></a>19.2.1. 用語解説</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">bps</span></dt><dd><a id="idp91223504" class="indexterm"></a><p>Bits per Second の略で、
	      データの転送速度を表す単位。</p></dd><dt><span class="term">DTE</span></dt><dd><a id="idp91225552" class="indexterm"></a><p>Data Terminal Equipment の略。
	      たとえばコンピュータ本体のこと</p></dd><dt><span class="term">DCE</span></dt><dd><a id="idp91227600" class="indexterm"></a><p>Data Communications Equipment
	      の略で、具体的にはモデムのこと。</p></dd><dt><span class="term">RS-232</span></dt><dd><a id="idp91229648" class="indexterm"></a><p>EIA (米電気産業協会)
	      のハードウェアシリアル通信の標準規格</p></dd></dl></div><p>通信におけるデータ転送速度に関して、
	このセクションでは <span class="quote">「<span class="quote">ボー</span>」</span> (baud) という用語は使いません。
	ボーというのは一定時間に生じうる電気的状態の変化の数を表すにすぎず、
	<span class="quote">「<span class="quote">bps</span>」</span> (bits per second)
	という単位の方が<span class="emphasis"><em>正しい</em></span>からです
	(少なくとも、こういう表現をしておけば、
	意地の悪い人に怒られることもないのではないかと思います)。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serial-cables-ports"></a>19.2.2. ケーブルとポート</h3></div></div></div><p>モデムまたはシリアル端末を FreeBSD システムに接続するためには、
	コンピュータ上のシリアルポートと、
	シリアルデバイスに接続する適切なケーブルが必要です。
	ハードウェアとそれが必要とするケーブルについてよく理解しているなら、
	この節は飛ばしても問題ありません。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-cables"></a>19.2.2.1. ケーブル</h4></div></div></div><p>シリアルケーブルにはさまざまな種類があります。
	  我々の目的にあうもっとも一般的な 2 種類は、
	  ヌルモデムケーブル<a href="#ftn.idp91243088" class="footnote" id="idp91243088"><sup class="footnote">[6]</sup></a>
	  と、スタンダード (ストレート) RS-232 ケーブルです
	  ハードウェアの説明文書に必要なケーブルの種類が記載されているはずです。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-cables-null"></a>19.2.2.1.1. ヌルモデムケーブル</h5></div></div></div><a id="idp91244496" class="indexterm"></a><p>ヌルモデムケーブル (またはリバースケーブルあるいはクロ
	    スケーブル) は、たとえば <span class="quote">「<span class="quote">signal ground</span>」</span>
	    信号のように、いくつかの信 号はそのまま通しますが、
	    他の信号は途中で入れ替えて通します。たとえば、<span class="quote">「<span class="quote">send
	    data</span>」</span> 信号のピンは、反対側のコネクタの
	    <span class="quote">「<span class="quote">receive data</span>」</span> 信号の
	    ピンと繋がっています。</p><p>自分で使うケーブルは自分で作りたいということであれば、
	    端末で使うヌルモデムケーブルを作成できます。この表では、
	    RS-232C の信号線の名前と、DB-25 コネクタ上のピンの番
	    号を示しています。</p><div class="informaltable"><table border="0"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>Signal</th><th>Pin #</th><th>〓</th><th>Pin #</th><th>Signal</th></tr></thead><tbody><tr><td>TxD</td><td>2</td><td>connects to</td><td>3</td><td>RxD</td></tr><tr><td>RxD</td><td>3</td><td>connects to</td><td>2</td><td>TxD</td></tr><tr><td>DTR</td><td>20</td><td>connects to</td><td>6</td><td>DSR</td></tr><tr><td>DSR</td><td>6</td><td>connects to</td><td>20</td><td>DTR</td></tr><tr><td>SG</td><td>7</td><td>connects to</td><td>7</td><td>SG</td></tr><tr><td>DCD</td><td>8</td><td>connects to</td><td>4</td><td>RTS</td></tr><tr><td>RTS</td><td>4</td><td>〓</td><td>5</td><td>CTS</td></tr><tr><td>CTS</td><td>5</td><td>connects to</td><td>8</td><td>DCD</td></tr></tbody></table></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">DCD と RST では、コネクタ内部でピン4を5に接続し、
	      そして逆側のコネクタのピン8と接続します。</p></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-cables-std"></a>19.2.2.1.2. スタンダード RS-232C ケーブル</h5></div></div></div><a id="idp91275856" class="indexterm"></a><p>スタンダードシリアルケーブル
	    (またはストレートケーブル)  の場合は、すべての RS-232C
	    信号をそのまま通します。つまり、片方の <span class="quote">「<span class="quote">send
	    data</span>」</span> 信号のピンは、逆側の <span class="quote">「<span class="quote">send data</span>」</span>
	    信号のピンと繋がっています。モデムを FreeBSD
	    に接続するときや、一部の端末を接続するときにこのタイプの
	    ケーブルを使用します。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-ports"></a>19.2.2.2. ポート</h4></div></div></div><p>シリアルポートは、FreeBSDが動作しているホスト
	  コンピュータと端
	  末の間でデータのやりとりを行うために用いるデバイスです。
	  ここでは、現在存在するポートの種類と FreeBSD
	  でのポートのアクセス方法について解 説します。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-portkinds"></a>19.2.2.2.1. ポートの種類</h5></div></div></div><p>シリアルポートには何種類かのものがあります。
	    ケーブルを購 入したり自作したりする前に、
	    そのケーブルのコネクタの形状が端末および FreeBSD
	    システムのポートの形状と一致していることを
	    確認してください。</p><p>ほとんどの端末は DB25 ポートを搭載しています。
	    FreeBSDが動作しているも のを含めて、PCは DB25 または DB9
	    ポートを搭載しています。マルチポート
	    のシリアルカードの場合は、RJ-12 や RJ-45
	    のポートを搭載しているかもし れません。</p><p>利用されているポートの種類に関しては、
	    ハードウェアについてきたドキュメントを参照してください。
	    また、多くの場合、ポートの形状から判断することもできるでしょう。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-portnames"></a>19.2.2.2.2. ポートの名前</h5></div></div></div><p>FreeBSDでは、<code class="filename">/dev</code>
	    ディレクトリ内のエントリを介
	    してシリアルポートへのアクセスがおこなわれます。
	    2種類の異なったエン トリがあります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>着信用のポートの名前は、
		<code class="filename">/dev/ttydN</code>
		(<em class="replaceable"><code>N</code></em> は 0から始まるポート番号)
		となっています。一般に端末の接続には
		着信用ポートを用います。着信用のポートでは、
		シリアルラインのデータ キャリア検出 (DCD)
		信号がオンになっている必要があります。</p></li><li class="listitem"><p>発信用のポートの名前は、
		<code class="filename">/dev/cuaaN</code>
		となっています。
		発信用のポートは普通モデムの接続に用い、端末の接続には
		利用しません。ただ、
		ケーブルまたは端末がキャリア検出信号を使えない
		タイプのものの場合は、
		発信用のポートを使うとよいでしょう。</p></li></ul></div><p>たとえば、端末を一つ目のシリアルポート (MS-DOS
	    でいうところの <code class="filename">COM1</code>) に接
	    続したとすると、<code class="filename">/dev/ttyd0</code>
	    がこの端末を指すことになります。また、
	    二つ目のシリアルポート (<code class="filename">COM2</code>)
	    ならば <code class="filename">/dev/ttyd1</code> となり、
	    以下この形式のデバイスエントリを使います。</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91292112"></a>19.2.3. カーネルの設定</h3></div></div></div><p>デフォルトでは、FreeBSD は
	4 つのシリアルポートに対応しています。MS-DOS の世界では、
	<code class="filename">COM1</code>,
	<code class="filename">COM2</code>,
	<code class="filename">COM3</code> および
	<code class="filename">COM4</code> と呼ばれています。
	FreeBSD では、現在のところ BocaBoard の 1008 や 2016 などの、
	<span class="quote">「<span class="quote">単純な</span>」</span>マルチポートシリアルインタフェースや、
	Digiboard や Stallion Technologies
	が製造しているよりインテリジェントなマルチポートカードにも対応しています。
	しかしながら、デフォルトのカーネルは、標準の COM ポートしか見ません。</p><p>搭載されているシリアルポートのいずれかを、
	カーネルが認識しているかどうか確認したい場合は、
	カーネルの起動時のメッセージを注意深く見るか、あるいは
	<code class="command">/sbin/dmesg</code> コマンドを使って、
	起動時の出力メッセージを確認してください。特に、
	<code class="literal">sio</code>
	で始まるメッセージをよく見てください。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">以下のコマンドで <code class="literal">sio</code>
	という文字列を含むメッセージだけを表示できます。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/dmesg | grep 'sio'</code></strong></pre></div><p>たとえば、シリアルポートを四つ持つシステムの場合は、
	以下のようなシリアルポートに関するメッセージがカーネルによって表示されます。</p><pre class="screen">sio0 at 0x3f8-0x3ff irq 4 on isa
sio0: type 16550A
sio1 at 0x2f8-0x2ff irq 3 on isa
sio1: type 16550A
sio2 at 0x3e8-0x3ef irq 5 on isa
sio2: type 16550A
sio3 at 0x2e8-0x2ef irq 9 on isa
sio3: type 16550A</pre><p>もし、カーネルに正常に認識されないポートがある場合は、
	おそらくカスタマイズした FreeBSD カーネルを構築する必要があるでしょう。
	カーネルコンフィグレーションの詳細については
	<a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a> をご覧ください。</p><p>カーネルコンフィグレーションの該当するデバイス行は、
	次のようになります。</p><pre class="programlisting">device		sio0	at isa? port "IO_COM1" tty irq 4 vector siointr
device		sio1	at isa? port "IO_COM2" tty irq 3 vector siointr
device		sio2	at isa? port "IO_COM3" tty irq 5 vector siointr
device		sio3	at isa? port "IO_COM4" tty irq 9 vector siointr</pre><p>システムに搭載されていないデバイスに関する記述は、
	コメントアウトまたは削除してしまってかまいません。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> のマニュアルを見て、
	マルチポートのボードのためのコンフィグレーションファイルの記述の仕方を確認してください。
	デバイスのフラグの指定方法がバージョンによって異なりますので、
	別のバージョンの FreeBSD
	で利用していたコンフィグレーションファイルを流用する場合には十分注意してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">なお、<code class="literal">port "IO_COM1"</code>,
	  <code class="literal">IO_COM2</code>, <code class="literal">IO_COM3</code>
	  および <code class="literal">IO_COM4</code> は、
	  それぞれのポートの一般的なアドレスである
	  <code class="literal">0x3f8</code>, <code class="literal">0x2f8</code>,
	  <code class="literal">0x3e8</code> および <code class="literal">0x2e8</code>
	  を表します。また、割り込み番号 4, 3, 5 と 9 は、それぞれ
	  <code class="filename">COM1:</code> から
	  <code class="filename">COM4:</code> のポートで一般的に使用される
	  IRQ です。また、ISA バスのコンピュータの場合、
	  一般的なシリアルポートは複数のポートで一つの IRQ
	  を共有することが
	  <span class="emphasis"><em>できません</em></span>ので注意が必要です
	  (マルチポートのシリアルボードの場合は、複数の 16550A
	  ベースのポートで一つまたは二つの IRQ
	  を共有するための機構を備えています)。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91315408"></a>19.2.4. デバイススペシャルファイル</h3></div></div></div><p>カーネルに組み込まれているほとんどのデバイスは、
	<code class="filename">/dev</code> ディレクトリにある、
	<span class="quote">「<span class="quote">デバイススペシャルファイル</span>」</span>を介してアクセスされます。
	<code class="filename">sio</code> デバイスの場合は、着信用の
	<code class="filename">/dev/ttydN</code>
	および、発信用の
	<code class="filename">/dev/cuaaN</code>
	が利用されます。さらに、FreeBSD は、初期化デバイス
	(<code class="filename">/dev/ttyidN</code> と
	<code class="filename">/dev/cuai0N</code>)
	およびロッキングデバイス
	(<code class="filename">/dev/ttyldN</code> と
	<code class="filename">/dev/cual0N</code>)
	も用意しています。
	初期化デバイスは、通信ポートがオープンされる度に、
	そのポートの初期設定を行うために使われます。たとえば、
	<code class="literal">RTS/CTS</code>
	によるフロー制御を行うモデムが接続されている場合の
	<code class="literal">crtscts</code>
	などのパラメータの初期化が行われます。
	ロッキングデバイスは、ポートの設定をロックし、
	他のユーザやプログラムにこれらを変更されることのないようにするために利用されます。
	通信ポートの設定、デバイスのロックと初期化および設定の変更に関しては、
	それぞれ <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=termios&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">termios</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> と <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a>
	のマニュアルをご覧ください。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91323088"></a>19.2.4.1. デバイススペシャルファイルの作成</h4></div></div></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.0 には、
	  必要に応じてデバイスノードを自動的に作成する
	  <code class="literal">devfs</code> ファイルシステムがあります。
	  <code class="literal">devfs</code> が有効になっているバージョンの
	  FreeBSD を動かしているなら、
	  この節は飛ばしてかまいません。</p></div><p>デバイススペシャルファイルの管理は、ディレクトリ
	  <code class="filename">/dev</code> にあるシェルスクリプト
	  <code class="command">MAKEDEV</code> で行います。
	  <code class="command">MAKEDEV</code> を使って、
	  <code class="filename">COM1</code> (ポート 0)
	  をダイアルアップのポートとして利用するための
	  デバイススペシャルファイルを作るには、
	  <code class="filename">/dev</code> に <code class="command">cd</code> してから、
	  <code class="command">MAKEDEV ttyd0</code> と実行してください。
	  同様に、<code class="command">MAKEDEV ttyd1</code> とすることで、
	  <code class="filename">COM2</code> (ポート 1)
	  用のデバイススペシャルファイルを作成できます。</p><p><code class="command">MAKEDEV</code> は、
	  <code class="filename">/dev/ttydN</code>
	  のデバイススペシャルファイルだけでなく、
	  <code class="filename">/dev/cuaaN</code>,
	  <code class="filename">/dev/cuaiaN</code>,
	  <code class="filename">/dev/cualaN</code>,
	  <code class="filename">/dev/ttyldN</code>
	  および
	  <code class="filename">/dev/ttyidN</code>
	  ノードも作成します。</p><p>デバイススペシャルファイルの作成後、
	  これらのファイルの許可属性が適切に設定されていて、
	  これらのデバイスを利用してもよいユーザのみが読み書きできるようになっていることを確認してください
	  (特に <code class="filename">/dev/cua*</code> の許可属性には注意を払ってください)。
	  この確認を怠ると、
	  一般のユーザがあなたのモデムを使うことができるようなことになりかねません。
	  デフォルトの <code class="filename">/dev/cua*</code>
	  の許可属性は、以下のようになっていて、
	  たいていの場合適切なものだと思います。</p><pre class="screen">crw-rw----    1 uucp     dialer    28, 129 Feb 15 14:38 /dev/cuaa1
crw-rw----    1 uucp     dialer    28, 161 Feb 15 14:38 /dev/cuaia1
crw-rw----    1 uucp     dialer    28, 193 Feb 15 14:38 /dev/cuala1</pre><p>上の設定では、ユーザ <code class="systemitem">uucp</code>
	  と、グループ <code class="systemitem">dialer</code>
	  に属するユーザが発信用のデバイスを利用できます。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serial-hw-config"></a>19.2.5. シリアルポートの設定</h3></div></div></div><a id="idp91335888" class="indexterm"></a><a id="idp91336528" class="indexterm"></a><p><code class="filename">ttydN</code>
      (または <code class="filename">cuaaN</code>)
      デバイスは、
      アプリケーション上でシリアルポートをオープンする時に使用する、
      標準的なデバイスです。プロセスがデバイスをオープンする際、端末
      I/O 設定のデフォルトセットが適用されます。これらの設定内容は、
      次のコマンドで確認することができます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>stty -a -f /dev/ttyd1</code></strong></pre><p>このデバイスの設定を変更した場合、
      その設定はデバイスがクローズされるまで有効です。
      デバイスが再びオープンされる時、デフォルトの設定値に戻ります。
      デフォルトの設定を変更するためには、<span class="quote">「<span class="quote">初期状態</span>」</span>
      を設定したいデバイスをオープンして調節できます。
      たとえば、<code class="filename">ttyd5</code> というデバイスに対して、デフォルトで
      <code class="option">CLOCAL</code> モード, 8 bits,
      <code class="option">XON/XOFF</code> フロー制御を設定したい場合は、
      次のように入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>stty -f /dev/ttyid5 clocal cs8 ixon ixoff</code></strong></pre><a id="idp91346256" class="indexterm"></a><p>システム全体のシリアルデバイス初期化は
      <code class="filename">/etc/rc.serial</code> で制御されています。
      このファイルは、シリアルデバイスのデフォルトの設定を決めます。</p><p>また、<span class="quote">「<span class="quote">ロック状態</span>」</span>のデバイスに調節を加えることで、
      アプリケーションがある種の設定を変更してしまうことを防げます。
      たとえば、<code class="filename">ttyd5</code> の速度を 57600 bps
      に固定したい場合には、次のように入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>stty -f /dev/ttyld5 57600</code></strong></pre><p>これで、<code class="filename">ttyd5</code> をオープンして、
      シリアルポートの転送スピードを変更しようとするアプリケーションは
      57600 bps で頭打ちになります。</p><a id="idp91355344" class="indexterm"></a><p>本来、初期状態やロックされているデバイスに書き込めるのは
      <code class="systemitem">root</code> アカウントだけにすべきです。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="term"></a>19.3. シリアル端末</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Kelly</span> <span class="firstname">Sean</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp91360208" class="indexterm"></a><p><span class="emphasis"><em>訳: 中根 雅文 <code class="email">&lt;<a xmlns="" class="email" href="mailto:max@FreeBSD.org">max@FreeBSD.org</a>&gt;</code></em></span></p><p>シリアル端末を利用することで、
      コンピュータのコンソールのそばにいないときや、
      手近にネットワーク接続されているコンピュータがないときでも、
      FreeBSD の機能を便利に、かつ安価に利用することができます。
      ここでは、FreeBSD
      にシリアル端末を接続する方法を解説します。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-uses"></a>19.3.1. 端末の種類と利用方法</h3></div></div></div><p>もともと Unix システムにはコンソールがありませんでした。
	ユーザはコンピュータのシリアルポートに接続された端末からログインしてプログラムを利用していました。
	ちょうどモデムと通信ソフトを使ってリモートのコンピュータにログインし、
	テキストベースのプログラムを利用するのとよく似ています。</p><p>最近の PC は、
	高品質の画像を表示できるコンソールを搭載していますが、
	ほとんどすべての Unix 系 OS
	には未だにシリアルポートを使ってログインするための機能があり、
	FreeBSD でもこの機能がサポートされています。
	現在使用されていないシリアルポートに端末を接続することでシステムにログインし、
	通常はコンソールや X ウィンドウシステムの <code class="command">xterm</code>
	のウィンドウ上で起動しているテキストベースのプログラムであれば何でも利用できます。</p><p>職場での利用ということで考えるならば、FreeBSD
	が動作しているコンピュータに接続された何台ものシリアル端末を各社員の机に配置するというようなことが可能です。
	また、家庭での利用方法としては、余っている古い
	IBM PC や Macintosh を FreeBSD
	が動いているパワフルなコンピュータの端末として利用できます。
	普通ならシングルユーザのコンピュータを、
	パワフルなマルチユーザのシステムに変えることができるのです。</p><p>FreeBSD では、以下に挙げる 3 種類の端末が利用できます。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="#term-dumb" title="19.3.1.1. ダム端末">ダム (dumb) 端末</a></p></li><li class="listitem"><p><a class="link" href="#term-pcs" title="19.3.1.2. PC を端末として利用する">PCを利用した端末</a></p></li><li class="listitem"><p><a class="link" href="#term-x" title="19.3.1.3. X 端末">X 端末</a></p></li></ul></div><p>以下は、それぞれについての解説です。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-dumb"></a>19.3.1.1. ダム端末</h4></div></div></div><p>ダム端末は、
	  シリアルライン経由でのコンピュータとの接続専用のハードウェアです。
	  ダム端末は、テキストの送受信および表示ができる程度の計算能力しかもっていないので、
	  <span class="quote">「<span class="quote">dumb</span>」</span> (間抜け) というように呼ばれています。
	  この端末上でプログラムを実行することはできません。
	  テキストエディタ、コンパイラ、E-mail、
	  ゲームなどなどのプログラムを実行するのは、
	  ダム端末を接続しているコンピュータの方です。</p><p>Digital Equipment 社の VT-100 や、Wyse 社の WY-75
	  を初めとして、多くのメーカが何百種類ものダム端末を作っています。
	  ほとんどどんな種類のダム端末でも
	  FreeBSD に接続して使用できます。さらに、
	  高性能の端末の中には画像を取り扱えるものもありますが、
	  限られた数のソフトウェアパッケージしかこういった機能には対応していません。</p><p>ダム端末は、
	  X ウィンドウシステムで提供されるようなグラフィックアプリケーションを必要としない職場で広く用いられています。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-pcs"></a>19.3.1.2. PC を端末として利用する</h4></div></div></div><p><a class="link" href="#term-dumb" title="19.3.1.1. ダム端末">ダム端末</a>
	  がテキストの表示および送受信の機能をそなえただけのものならば、
	  言うまでもなく、どんな PC もダム端末になり得ます。
	  必要なものは適切なケーブルと、その PC
	  の上で動作する<span class="emphasis"><em>端末エミュレーション</em></span>
	  を行うソフトウェアのみです。</p><p>このような環境は、家庭においてよく利用されます。
	  たとえば、あなたの同居人が FreeBSD
	  のコンソールを専有している時などに、
	  あまりパワーのないコンピュータを FreeBSD
	  システムにシリアル端末として接続し、
	  その端末上でテキストだけを用いる作業をおこなうことができます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-x"></a>19.3.1.3. X 端末</h4></div></div></div><p>X 端末は、
	  既存のものの中で最も洗練された種類の端末といえます。
	  X 端末は、たいていの場合シリアルポートではなく、
	  イーサネットのようなネットワークを利用した接続をおこないます。
	  また、アプリケーションの利用においても、
	  テキストベースのものだけでなく、
	  X アプリケーションの利用が可能です。</p><p>ここでは、参考までに端末について紹介しただけで、
	  X 端末の設定や利用についての解説は
	  <span class="emphasis"><em>おこないません</em></span>。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-config"></a>19.3.2. 設定</h3></div></div></div><p>ここでは、端末からのログインを可能にするために必要な
	FreeBSD  側の設定について解説します。
	既に端末を接続するポートが利用できるように  kernel
	の設定をおこない、端末が接続されているものと考えて、解説を進め
	ます。</p><p><a class="xref" href="#boot" title="第13章 FreeBSD の起動のプロセス">13章<em>FreeBSD の起動のプロセス</em></a> で述べたように
	<code class="command">init</code> プロセスは、
	システム起動時にすべてのプロセス管理や初期化をおこなっています。
	<code class="command">init</code> が行っている仕事の一つは、
	<code class="filename">/etc/ttys</code> ファイルを読んで、利用可能な端末上で
	<code class="command">getty</code> プロセスを起動することです。
	<code class="command">getty</code> プロセスは、
	ログイン名を読み込み <code class="command">login</code>
	プログラムを起動します。</p><p>したがって、FreeBSD の端末を設定するには、
	<code class="systemitem">root</code>
	で次の手順を踏まなければなりません。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>端末を接続するポートの <code class="filename">/dev</code>
	    のエントリが含ま れている行がまだ存在しなければ、これを
	    <code class="filename">/etc/ttys</code> に追加してく ださい。</p></li><li class="step"><p><code class="command">/usr/libexec/getty</code>
	    が対象となるポートに対して
	    実行されるように指定してください。また、
	    <code class="filename">/etc/gettytab</code> ファイ ル内の適切な
	    <em class="replaceable"><code>getty</code></em>
	    タイプのエントリを指定してください。</p></li><li class="step"><p>デフォルトのターミナルタイプを指定してください。</p></li><li class="step"><p>対象となるポートを <span class="quote">「<span class="quote">on</span>」</span>
	    に設定してください。</p></li><li class="step"><p>そのポートが <span class="quote">「<span class="quote">secure</span>」</span>
	    であるかどうかを指定してください。</p></li><li class="step"><p><code class="command">init</code> に
	    <code class="filename">/etc/ttys</code> を読み込みなおさせてく
	    ださい。</p></li></ol></div><p>また、必要に応じて <code class="filename">/etc/gettytab</code>
	を変更し、上の 2で使用する
	<em class="replaceable"><code>getty</code></em> のエントリを追加してください。
	この章ではこの方法については特に解説しませんので、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a>
	および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a> のマニュアルをご覧ください。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-etcttys"></a>19.3.2.1. <code class="filename">/etc/ttys</code> へのエントリの追加</h4></div></div></div><p><code class="filename">/etc/ttys</code> には、
	  FreeBSDシステム上のログインを許可するすべての
	  ポートを記述します。たとえば、一つ目の仮想コンソール
	  <code class="filename">ttyv0</code> のエン
	  トリもこのファイルにあります。このエントリのおかげで、
	  コンソールからの ログインが可能になっています。
	  このファイルには、他の仮想コンソール、シ
	  リアルポートおよび仮想端末のエントリも含まれています。
	  端末を接続する場合は、そのポートの
	  <code class="filename">/dev</code> のエントリを、
	  <code class="filename">/dev</code> の部分を省略して記述します
	  (たとえば <code class="filename">/dev/ttyv0</code> については、
	  <code class="filename">ttyv0</code> として記述します)。</p><p>FreeBSD のデフォルトのインストール状態では、
	  <code class="filename">ttyd0</code> から <code class="filename">ttyd3</code>
	  までの、初めの 4 つのシリアルポートに対応した
	  <code class="filename">/etc/ttys</code> ファイルが置かれています。
	  これらのポートのいずれかに端末を接続する場合は、
	  新たにエントリを追加する必要はありません。</p><div class="example"><a id="ex-etc-ttys"></a><div class="example-title">例19.1 端末の項目を <code class="filename">/etc/ttys</code>
	    に追加する</div><div class="example-contents"><p>システムに 2 台の端末、Wyse-50 と、VT-100
	    端末をエミュレートしている
	    <span class="application">Procomm</span>
	    端末ソフトウェアを動かしている古い 286 IBM PC
	    をシステムに接続しようとしていると考えてください。
	    Wyse は 2 番目のシリアルポートに、286 は
	    6 番目のシリアルポート
	    (マルチポートシリアルカード上のポート) に接続します。
	    <code class="filename">/etc/ttys</code>
	    内の対応する項目は次のようになります。</p><pre class="programlisting">ttyd1<a id="co-ttys-line1col1"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>  "/usr/libexec/getty std.38400"<a id="co-ttys-line1col2"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>  wy50<a id="co-ttys-line1col3"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>  on<a id="co-ttys-line1col4"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>  insecure<a id="co-ttys-line1col5"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span>
ttyd5   "/usr/libexec/getty std.19200"  vt100  on  insecure
	  </pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttys-line1col1"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>最初のフィールドには、通常 <code class="filename">/dev</code>
		にある端末のスペシャルファイル名を指定します。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttys-line1col2"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>2 番目のフィールドは、
		この回線に対して実行するコマンドで、通常は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>
		です。<code class="command">getty</code>
		は、回線を初期化して開き、速度を設定して、
		ユーザ名を入力するプロンプトを出して <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">login</span>(1)</span></a>
		プログラムを実行します。</p><p><code class="command">getty</code> プログラムは、
		コマンドラインから (省略可能な) パラメータ
		<em class="replaceable"><code>getty</code></em> タイプを受け取ります。
		<em class="replaceable"><code>getty</code></em> タイプは、
		bps レートやパリティのような端末回線の特性を示します。
		<code class="command">getty</code> プログラムは、
		これらの特性を <code class="filename">/etc/gettytab</code>
		ファイルから読み込みます。</p><p><code class="filename">/etc/gettytab</code> ファイルには、
		端末回線について新旧多くの項目があります。
		ほとんどの場合、<code class="literal">std</code>
		で始まる項目は、ケーブルで接続された端末に働きます。
		これらの項目はパリティを無視します。110 から 115200
		までの間の bps レートそれぞれに対して一つ
		<code class="literal">std</code> 項目があります。もちろん、
		このファイルに独自の項目を加えてもかまいません。
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a>
		のマニュアルに詳しい情報が載っています。</p><p><code class="filename">/etc/ttys</code> ファイルに
		<em class="replaceable"><code>getty</code></em> タイプを設定する時は、
		端末の通信設定が対応していることを確かめましょう。</p><p>たとえば、Wyse-50 はパリティなしで、38400 bps
		で接続します。286 PC はパリティなしで、19200 bps
		で接続します。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttys-line1col3"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>第 3 フィールドは、その tty
		回線に通常つながる端末の種別です。
		ダイアルアップポートでは、実際、
		ユーザがどんな種類の端末やソフトウェアで接続してくることもありうるので、
		このフィールドには <code class="literal">unknown</code> または
		<code class="literal">dialup</code> がよく使われています。
		ケーブルで配線された端末については、
		端末種別は変わりませんので、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=termcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">termcap</span>(5)</span></a>
		データベースファイルから実際の端末種別を、
		このフィールドに記入できます。</p><p>我々の例では、Wyse-50
		には実際の端末種別を使っていますが、
		<span class="application">Procomm</span> を動かしている
		286 PC は、VT-100
		をエミュレートするように設定します。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttys-line1col4"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>4 番目のフィールドは、
		ポートを有効にすべきかどうかを指定します。
		ここに <code class="literal">on</code> と記入すると、
		<code class="command">init</code> プロセスが
		2 番目のフィールドに記載されているプログラム、
		<code class="command">getty</code> を起動します。
		このフィールドを <code class="literal">off</code> にすると、
		<code class="command">getty</code> は動かず、
		そのポートからはログインできません。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttys-line1col5"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>最後のフィールドは、
		そのポートが安全かどうか指定します。
		あるポートが安全だということは、そのポートから
		<code class="systemitem">root</code> (またはその他の UID が 0 の)
		アカウントのログインを許可してよいと信頼しているということです。
		安全でないポートからは、<code class="systemitem">root</code>
		のログインは許可されません。安全でないポートでは、
		ユーザは特権を持たないアカウントでログインした後に、
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> や類似の仕組みを使ってスーパユーザ特権を獲得します。</p><p>鍵のかかる部屋にある端末であっても、<span class="quote">「<span class="quote">insecure</span>」</span>
		にしておくことが強く推奨されます。
		スーパユーザ特権が必要なら、ログインしてから
		<code class="command">su</code> を使うのは十分簡単です。</p></td></tr></table></div></div></div><br class="example-break" /></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-hup"></a>19.3.2.2. <code class="command">init</code> にファイル
	  <code class="filename">/etc/ttys</code> の再読み込みをさせる</h4></div></div></div><p>必要な変更を <code class="filename">/etc/ttys</code>
	  ファイルに加えたら、SIGHUP (ハングアップ) シグナルを
	  <code class="command">init</code>
	  プロセスに送って設定ファイルを強制的に再読み込みさせます。
	  たとえば</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP 1</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="command">init</code> は、システムで最初に起動するプロセスなので、
	    PID は常に 1 です。</p></div><p>すべての設定が正しくおこなわれ、
	  すべてのケーブルがただしく接続されていて、
	  かつ端末の電源が入っていれば、この時点で各端末で
	  <code class="command">getty</code> プロセスが動いていて、
	  ログインプロンプトが表示されているはずです。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-debug"></a>19.3.3. 接続のトラブルシューティング</h3></div></div></div><p>細心の注意を払って設定をおこなっても、
	ときには端末の接続がう まくいかない場合があるでしょう。以下に、
	よく見られる問題とその解決方法 を示します。</p><div class="qandaset"><a id="idp91462864"></a><dl><dt>19.3.3.1. <a href="#idp91463120">ログインプロンプトが表示されない</a></dt><dt>19.3.3.2. <a href="#idp91472720">ログインプロンプトの代わりにゴミが表示される</a></dt><dt>19.3.3.3. <a href="#idp91477072">文字が重複して表示される、入力したパスワードが表示される</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp91463120"></a><a id="idp91463376"></a><p><strong>19.3.3.1.</strong></p></td><td align="left" valign="top"><p>ログインプロンプトが表示されない</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>端末の電源が接続され、
	      スイッチが入っていることを確認してください。もし、PC
	      を端末として利用している場合は、
	      通信ソフトが適切なシリアルポー
	      トを利用する設定になっているかどうか確かめてください。
	    </p><p>ケーブルがしっかりと端末と
	      FreeBSDが動作しているコンピュータの両方に接続され
	      ていることを確認してください。また、
	      正しい種類のケーブルを利用している
	      か確かめてください。</p><p>端末と FreeBSD
	      の間の通信速度とパリティの設定が一致していることを確認
	      してください。
	      出力をモニタに表示するタイプの端末の場合は、モニタ
	      のコントラストと明るさの設定を確認してください。また、
	      出力が印刷 されるタイプの端末の場合は、
	      紙とインクが十分にあるかどうかを確かめてく
	      ださい。</p><p><code class="command">getty</code> が動いていて、
	      端末を認識していることを確認してください。
	      たとえば、動作中の <code class="command">getty</code>
	      プロセスの一覧を <code class="command">ps</code>
	      で取得するには、以下のように入力してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ps -axww|grep getty</code></strong></pre><p>その端末に対応する項目が表示されるはずです。
	      たとえば、以下の表示例は、<code class="command">getty</code> は
	      2 番目のシリアルポート (<code class="literal">ttyd1</code>)
	      に対して <code class="filename">/etc/gettytab</code> 中の
	      <code class="literal">std.38400</code>
	      エントリを使って動作しているということを示しています。</p><pre class="screen">22189  d1  Is+    0:00.03 /usr/libexec/getty std.38400 ttyd1</pre><p>もし、<code class="command">getty</code>
	      プロセスが一つも動いていないようであれば、
	      <code class="filename">/etc/ttys</code> の中で、
	      そのポートを利用可能にする設定をしたかどうか確かめてください。
	      また、<code class="filename">ttys</code>
	      ファイルを変更したら、<code class="command">kill -HUP 1</code>
	      を実行するのを忘れないでください。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp91472720"></a><a id="idp91472976"></a><p><strong>19.3.3.2.</strong></p></td><td align="left" valign="top"><p>ログインプロンプトの代わりにゴミが表示される</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>端末と FreeBSD
	      の間の通信速度およびパリティの設定が一致していることを確
	      かめてください。また、<code class="command">getty</code>
	      プロセスの情報を調べて、適切な
	      <em class="replaceable"><code>getty</code></em>
	      のタイプが使用されていることを確認してください。間違った
	      <span class="emphasis"><em>getty</em></span>
	      タイプが使用されている場合は、
	      <code class="filename">/etc/ttys</code> を修正し てから、
	      <code class="command">kill -HUP 1</code>
	      を実行してください。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp91477072"></a><a id="idp91477328"></a><p><strong>19.3.3.3.</strong></p></td><td align="left" valign="top"><p>文字が重複して表示される、入力したパスワードが表示される</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>端末または通信ソフトの設定で、<span class="quote">「<span class="quote">半二重 (half
	      duplex)</span>」</span> あるいは <span class="quote">「<span class="quote">ローカ
	      ルエコー</span>」</span> となっているところを、<span class="quote">「<span class="quote">全二重 (full
	      duplex)</span>」</span> に変更してください。</p></td></tr></tbody></table></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dialup"></a>19.4. ダイアルインサービス</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Helmer</span> <span class="firstname">Guy</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">改訂: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Kelly</span> <span class="firstname">Sean</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp91492944" class="indexterm"></a><p><span class="emphasis"><em>訳: 中根 雅文 <code class="email">&lt;<a xmlns="" class="email" href="mailto:max@FreeBSD.org">max@FreeBSD.org</a>&gt;</code>.
	6 September 1996.</em></span></p><p>FreeBSD システムをダイアルインサービス用に設定することは、
      端末の代わりにモデムを扱うこと以外は、
      端末の接続によく似ています。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91494992"></a>19.4.1. 外づけモデムと内蔵モデムについて</h3></div></div></div><p>ダイアルアップのサービスに関していえば、
	  外づけのモデムの方が適している ようです。これは、
	  多くの外づけのモデムは設定を不揮発ラムに書き込んで半
	  永久的に保存することができますし、また RS-232
	  に関する重要な情報を知る
	  ための点滅するライトによるインディケータが
	  搭載されているからです。点滅 するライトは、
	  システムを見に来た訪問者に強い印象を与えるという効果だけ
	  でなく、モデムが適切に動作しているかどうかを知るためにも
	  有効です。</p><p>一方、たいていの内蔵型のモデムには
	  不揮発性ラムが搭載されていないため、ディップ
	  スイッチの変更以外に設定を保存する方法がありません。また、も
	  しインディケータがついていても、おそらくコンピュータのケース
	  カバーが 外されていなければその状態を確認するのは
	  難しいでしょう。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91496400"></a>19.4.1.1. モデムとケーブル</h4></div></div></div><a id="idp91497040" class="indexterm"></a><p>外付けモデムを使用しているなら、
	  それにあったケーブルが必要です。
	  通常の信号が全て接続されている限り、標準的な RS-232C
	  ケーブルで十分でしょう。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Transmitted Data (<acronym class="acronym">SD</acronym>)</p></li><li class="listitem"><p>Received Data (<acronym class="acronym">RD</acronym>)</p></li><li class="listitem"><p>Request to Send (<acronym class="acronym">RTS</acronym>)</p></li><li class="listitem"><p>Clear to Send (<acronym class="acronym">CTS</acronym>)</p></li><li class="listitem"><p>Data Set Ready (<acronym class="acronym">DSR</acronym>)</p></li><li class="listitem"><p>Data Terminal Ready (<acronym class="acronym">DTR</acronym>)</p></li><li class="listitem"><p>Carrier Detect (<acronym class="acronym">CD</acronym>)</p></li><li class="listitem"><p>Signal Ground (<acronym class="acronym">SG</acronym>)</p></li></ul></div><p>FreeBSD で 2400bps 以上の転送速度を利用する場合には、
	  フロー制御のため に <acronym class="acronym">RTS</acronym> 信号と
	  <acronym class="acronym">CTS</acronym> 信号が必要です。また、
	  接続の確立と回線の切 断を検出するために
	  <acronym class="acronym">CD</acronym> 信号を利用します。さらに、
	  <acronym class="acronym">DTR</acronym> 信号を使っ
	  て回線切断後のモデムのリセットを行います。ケーブルの中には、
	  総ての必要 な信号線が接続されていないものもありますので、
	  たとえば、回線切断後でも ログイン
	  セッションが残ってしまうといった問題が発生した場合などには、
	  ケーブルに問題がある可能性もあります。</p><p>FreeBSD も他の Unix 系 OS と同様、回線の接続およ
	  び切断の検出や回線の切断および回線切断後の
	  モデムの初期化にハードウェア  シグナルを利用します。FreeBSD
	  は、モデムに対するコマンドの送信やモデ
	  ムの状態の監視を行いません。パソコンで運用されている BBS
	  への接続に慣 れている方にとっては、
	  ちょっとめんどうかもしれませんね。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91514448"></a>19.4.2. シリアル インタフェースについて</h3></div></div></div><p>FreeBSD では、NS8250-、NS16450-、NS16550- および
	  NS16550A- に基づ いた EIA RS-232C (CCITT V.24)
	  規格のシリアル インタフェースをサポート しています。8250
	  および 16450 ベースのディバイスには1文字のキャラクタ
	  バッファが搭載されています。また、16550 系のディバイスには、
	  16文字分 のバッファが搭載されていて、
	  はるかによいパフォーマンスを得られます (ただし、無印の
	  16550 では、バグがあって 16 文字バッファが利用できませ
	  んので、可能であれば 16550A
	  系のディバイスを利用してください)。1文字 のバッファの物は、
	  16550 系のものと比べて OS にかける負荷が大きいので、16550A
	  系ディバイスの利用を強く推奨します。多数のシリアル
	  ポートを利 用する場合や、負荷の高いシステムにおいては、
	  16550A 系ディバイスを使う ことで、
	  エラー発生率を低く押さえることができます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91515600"></a>19.4.3. 概要</h3></div></div></div><a id="idp91516240" class="indexterm"></a><p>端末に関しては、
	ダイアルイン接続に割り当てられたそれぞれのシリアルポートに対して、
	<code class="command">init</code> が <code class="command">getty</code>
	を起動します。たとえば、モデムが <code class="filename">/dev/ttyd0</code>
	に割り当てられていたら、<code class="command">ps ax</code>
	コマンドを実行すると、以下のような出力が得られるはずです。</p><pre class="screen"> 4850 ??  I      0:00.09 /usr/libexec/getty V19200 ttyd0</pre><p>ユーザがモデムに電話をかけ、モデム同士が接続されると、
	モデムの <acronym class="acronym">CD</acronym> (Carrier Detect) が検出されます。その結果、
	kernel がキャリア信号を検出して、<code class="command">getty</code>
	によるポートのオープンの処理が終了します。
	<code class="command">getty</code> は、<code class="prompt">login:</code>
	プロンプトを指定されている初期回線速度で送信します。
	<code class="command">getty</code> は、
	正常に文字列を受信できるかどうか監視し、通常の設定では、
	もし異常な文字列を検出した場合 (理由としては、
	<code class="command">getty</code> の速度とモデ
	ムの接続速度が異なっているような場合が考えられます)、
	正常に文字列が 受信できるまで、<code class="command">getty</code>
	は速度を変え続けます。</p><a id="idp91522384" class="indexterm"></a><p>ユーザがログイン名を入力すると、
	<code class="command">getty</code>  は
	<code class="filename">/usr/bin/login</code> を起動して、
	パスワードの入力を要求し、その
	後ユーザのシェルを起動します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91524560"></a>19.4.4. 設定ファイル</h3></div></div></div><p>FreeBSD
	のシステムへのダイアルアップによるアクセスを実現するために編集が必要と思われる設定ファイルが、
	<code class="filename">/etc</code> ディレクトリに 3 つあります。まず、
	<code class="filename">/etc/gettytab</code> には、
	<code class="filename">/usr/libexec/getty</code>
	デーモンの設定を記述します。つぎに、
	<code class="filename">/etc/ttys</code> に保存されている情報から、
	<code class="filename">/sbin/init</code> はどの
	<code class="filename">tty</code> デバイスに対して
	<code class="command">getty</code> のプロセスを実行するべきか判断します。
	最後に、<code class="filename">/etc/rc.serial</code> スクリプトに、
	シリアルポートの初期化のためのコマンドを記述することができます。</p><p>Unix にダイアルアップモデムを接続する方法には、
	二つの考え方があります。一つの方法は、
	ダイアルインしてくるユーザの接続速度に関係なく、
	常にモデムとローカルのコンピュータの RS-232
	インタフェースの接続速度を一定に保つように設定する方法です。
	この設定の長所は、ユーザがダイアルインして接続されると、
	即座にシステムからのログインプロンプトが送信されるということです。
	短所は、システムが実際のモデム間の速度を知ることができないために、
	Emacs のようなフルスクリーンのプログラムが、
	端末との接続速度が遅い場合でも、
	そのような場合に効果的な方法で画面出力を行わない点です。</p><p>もう一つは、モデムの RS-232
	インタフェースとコンピュータの接続速度を、
	モデム間の接続速度に応じて変化させるような設定です。たとえば、
	モデム間 の接続が V.32bis (14.4 Kbps) ならば、
	モデムとコンピュータの間の接続を 19.2 Kbps とし、
	モデム間の接続が 2400 bps の時には、モデムとコンピュータ間も
	2400 bps で接続するような設定をします。この場合、
	<code class="command">getty</code>
	は、モデムが返すリザルトコードからモデムとコンピュータの接続速度を認識することができませんので、
	<code class="command">getty</code> は、まず初期速度で
	<code class="prompt">login:</code>
	という文字列を送信して、それに対する応答の文字列を監視します。
	ここで、ユーザ側の端末に無意味な文字列が表示された場合、
	ユーザは意味のある文字列を受信するまで
	<span class="keycode">Enter</span>
	キーを繰り返し押さなければならないということを知っていると仮定しています。
	もし接続速度が間違っている場合、<code class="command">getty</code> は、
	ユーザから送られた文字を無意味な文字列として扱い、
	次の速度を試します。そして、ここで再度 <code class="prompt">login:</code>
	プロンプトを送信します。
	この一連の動作が異常な回数繰り返されることも考えられますが、
	普通は 1 度か 2 度のキー入力があれば、
	ユーザはまともなプロンプトを受信できます。
	このログインの動作が前者の固定速度による方法に比べて美しくないのは明らかですが、
	この方法では、低速度で接続しているユーザに対するフルスクリーンのプログラムからのレスポンスが改善されます。</p><p>このセクションでは、両方の設定方法について解説しますが、
	どちらかというとモデム間の速度に応じて RS-232
	インタフェースの速度が変化するような
	設定の方に偏った説明になってしまうと思います。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91536464"></a>19.4.4.1. <code class="filename">/etc/gettytab</code></h4></div></div></div><a id="idp91537232" class="indexterm"></a><p><code class="filename">/etc/gettytab</code> は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>
	  の設定ファイルで、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=termcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">termcap</span>(5)</span></a>
	  と同様の形式で記述されます。ファイルのフォーマットや定
	  義できる機能についての詳細については、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a>
	  のマニュアルを
	  ご覧ください。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91541072"></a>19.4.4.1.1. 固定速度の設定</h5></div></div></div><p>モデムとコンピュータ間の通信速度を固定して使う場合、
	    おそらく  <code class="filename">/etc/gettytab</code>
	    に特に変更を加える必要はないはずです。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91551056"></a>19.4.4.1.2. 可変速度の設定</h5></div></div></div><p><code class="command">getty</code>
	    が利用するモデムとコンピュータの接続速度に関する情報を
	    <code class="filename">/etc/gettytab</code>
	    に記述する必要があります。もし、2400 bps のモ
	    デムをお使いになるのであれば、既存の
	    <code class="literal">D2400</code> のエントリがそのまま利
	    用できるでしょう。</p><pre class="programlisting">#
# Fast dialup terminals, 2400/1200/300 rotary (can start either way)
#
D2400|d2400|Fast-Dial-2400:\
        :nx=D1200:tc=2400-baud:
3|D1200|Fast-Dial-1200:\
        :nx=D300:tc=1200-baud:
5|D300|Fast-Dial-300:\
        :nx=D2400:tc=300-baud:</pre><p>高速モデムをお使いの場合は、おそらく
	    <code class="filename">/etc/gettytab</code>
	    に新たなエントリを追加する必要があります。
	    以下の例は、14.4 Kbps のモデムを、
	    最大インタフェース速度を 19.2 Kbps
	    として利用するためのエントリです。</p><pre class="programlisting">#
# Additions for a V.32bis Modem
#
um|V300|High Speed Modem at 300,8-bit:\
        :nx=V19200:tc=std.300:
un|V1200|High Speed Modem at 1200,8-bit:\
        :nx=V300:tc=std.1200:
uo|V2400|High Speed Modem at 2400,8-bit:\
        :nx=V1200:tc=std.2400:
up|V9600|High Speed Modem at 9600,8-bit:\
        :nx=V2400:tc=std.9600:
uq|V19200|High Speed Modem at 19200,8-bit:\
        :nx=V9600:tc=std.19200:</pre><p>上記の例を利用した場合、
	    パリティなし、8ビットの接続が行われます。</p><p>上記の例では、まず 19.2 Kbps (V.32bis)
	    によるモデムとコンピュータ間の接続を試み、続いて 9600 bps
	    (V.32)、2400 bps、1200 bps、300 bpsと順に試み、再び
	    19.2 Kbps による接続を試みるという循環に入ります。
	    この接続速度の循環は、<code class="literal">nx=</code>(<span class="quote">「<span class="quote">next
	    table</span>」</span>) の機能で実現されています。また、
	    各行はそれぞれ <code class="literal">tc=</code>(<span class="quote">「<span class="quote">table
	    continuation</span>」</span>) の機能を使って、
	    その他の接続速度に依存した <span class="quote">「<span class="quote">標準的な</span>」</span>
	    設定を取り込んでいます。</p><p>もし、お使いのモデムが 28.8 Kbps であったり、14.4 Kbps
	    の圧縮転送の機能を有効に利用したい場合は、19.2 Kbps
	    よりも速い速度を利用するように設定する必要があります。
	    以下に 57.6 Kbps から接続を試みる
	    <code class="filename">gettytab</code>
	    の設定例を示しておきます。</p><pre class="programlisting">#
# Additions for a V.32bis or V.34 Modem
# Starting at 57.6 Kbps
#
vm|VH300|Very High Speed Modem at 300,8-bit:\
        :nx=VH57600:tc=std.300:
vn|VH1200|Very High Speed Modem at 1200,8-bit:\
        :nx=VH300:tc=std.1200:
vo|VH2400|Very High Speed Modem at 2400,8-bit:\
        :nx=VH1200:tc=std.2400:
vp|VH9600|Very High Speed Modem at 9600,8-bit:\
        :nx=VH2400:tc=std.9600:
vq|VH57600|Very High Speed Modem at 57600,8-bit:\
        :nx=VH9600:tc=std.57600:</pre><p>もし、お使いの CPU が低速のものであったり、CPU
	    に対する負荷が高い場合で、16550A
	    系のシリアルポートをお使いでない場合、
	    57.6 Kbps の接続において、<span class="errorname">sio</span> の
	    <span class="quote">「<span class="quote">silo</span>」</span> エラーが発生するかもしれません。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dialup-ttys"></a>19.4.4.2. <code class="filename">/etc/ttys</code></h4></div></div></div><a id="idp91560912" class="indexterm"></a><p><code class="filename">/etc/ttys</code>
	  ファイルの設定は、<a class="xref" href="#ex-etc-ttys" title="例19.1 端末の項目を /etc/ttys に追加する">例19.1「端末の項目を <code class="filename">/etc/ttys</code>
	    に追加する」</a>
	  で扱われています。
	  モデムの設定も似たようなものですが、<code class="command">getty</code>
	  に異なる引数を渡して、異なる端末種別を指定しなければなりません。
	  固定速度および可変速度両方に共通する形式は次のようになります。</p><pre class="programlisting">ttyd0   "/usr/libexec/getty <em class="replaceable"><code>xxx</code></em>"   dialup on</pre><p>1 番目の項目は、このエントリで対象とするデバイススペシャルファイルです。
	  上の例では <code class="literal">ttyd0</code> として、
	  <code class="filename">/dev/ttyd0</code> を <code class="command">getty</code>
	  に監視させることを表しています。2 番目の項目
	  <code class="literal">"/usr/libexec/getty
	    xxx"</code>
	  (<em class="replaceable"><code>xxx</code></em> は初期段階で使われる
	  <code class="filename">gettytab</code>
	  のエントリに置き換えてください) が、<code class="command">init</code>
	  がこのディバイスに対して起動するプロセスです。3 番目の
	  <code class="literal">dialup</code> は、デフォルトのターミナルタイプです。
	  4 番目の <code class="literal">on</code> は、
	  この行が有効であることを <code class="command">init</code>
	  に対して示しています。5 番目の項目に <code class="literal">secure</code>
	  を指定することもできますが、これは、
	  たとえばシステムのコンソールのように、
	  物理的に安全な端末に対してのみ指定するようにしてください。</p><p>デフォルトのターミナルタイプ (上記の例では
	  <code class="literal">dialup</code>)
	  は、ローカルのユーザの好みによって異なってきます。
	  ユーザがログインスクリプトをカスタマイズして、ターミナルタイプが
	  <code class="literal">dialup</code>
	  の時には自動的に他のターミナルタイプを設定できるように、
	  ダイアルアップのポートのデフォルトのターミナルタイプには
	  <code class="literal">dialup</code> が伝統的に用いられています。
	  しかし、筆者のサイトでは、ほとんどのユーザが VT102
	  エミュレーションを使っているので、
	  ダイアルアップのポートのデフォルトターミナルタイプとして
	  <code class="literal">vt102</code> を指定しています。</p><p><code class="filename">/etc/ttys</code> の修正がすんだら、
	  以下のようなコマンドを使って
	  <code class="command">init</code> プロセスに <acronym class="acronym">HUP</acronym>
	  シグナルを送り、<code class="filename">/etc/ttys</code>
	  を読み込み直させてください。

	  </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP 1</code></strong></pre><p>

	  ただ、もし初めてシステムを設定しているのであれば、
	  モデムが適切に設定されて接続されるまでは、
	  <code class="command">init</code>
	  に対してシグナルを送らない方がいいかもしれません。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91578064"></a>19.4.4.2.1. 固定速度の設定</h5></div></div></div><p>速度を固定する設定では、<code class="filename">/etc/ttys</code>
	    の中で、<code class="command">getty</code> に対し
	    て固定速度のエントリを指定する必要があります。たとえば、
	    以下の例はポートのスピードが 19.2 Kbps
	    に固定されたモデムのための <code class="filename">ttys</code>
	    のエントリです。</p><pre class="programlisting">ttyd0   "/usr/libexec/getty std.19200"   dialup on</pre><p>モデムが異なる速度で固定されている場合は、
	    <code class="literal">std.19200</code> のかわりに
	    <code class="literal">std.speed</code>
	    を適切な値に置き換えたものにしてください。
	    <code class="filename">/etc/gettytab</code>
	    に挙がっている適切な種類を使うようにしてください。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91586512"></a>19.4.4.2.2. 可変速度の設定</h5></div></div></div><p>可変速度の設定では、<code class="filename">ttys</code>
	    のエントリが、<code class="filename">/etc/gettytab</code>
	    の中の適切な <span class="quote">「<span class="quote">自動速度調整</span>」</span>
	    の初期設定のエントリを参照していなければな りません。
	    たとえば、もし前述の 19.2 Kbps
	    から接続を試みる可変速度の設定例
	    (<code class="literal">V19200</code> の
	    <code class="filename">gettytab</code> エントリ)をそのまま
	    <span class="emphasis"><em>ttys</em></span> に追加したのであれば、
	    <code class="filename">ttys</code>
	    エントリは以下のようになります。</p><pre class="programlisting">ttyd0   "/usr/libexec/getty V19200"   dialup on</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91590992"></a>19.4.4.3. <code class="filename">/etc/rc.serial</code></h4></div></div></div><a id="idp91604176" class="indexterm"></a><p>V.32、V.32bis または V.34
	  モデムのような高速モデムを利用する場合、ハードウェア
	  (<code class="filename">RTS/CTS</code>)
	  フロー制御を行う必要があります。FreeBSD kernel
	  のモデムポートにハードウェアフロー制御のフラグを設定するための
	  <code class="command">stty</code> コマンドを、
	  <code class="filename">/etc/rc.serial</code> に記述できます。</p><p>たとえば、シリアルポート 1 番
	  (<code class="filename">COM2</code>)
	  のダイヤルインおよびダイヤルアウト初期化デバイスに
	  <code class="literal">termios</code> フラグ <code class="varname">crtscts</code>
	  を設定するには、次の行を <code class="filename">/etc/rc.serial</code>
	  に追加するとよいでしょう。</p><pre class="programlisting"># Serial port initial configuration
stty -f /dev/ttyid1 crtscts
stty -f /dev/cuai01 crtscts</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91609552"></a>19.4.5. モデムの設定</h3></div></div></div><p>もし、あなたのモデムがパラメータを不揮発ラムに
	保存できるタイプならば、MS-DOS 上の Telix や FreeBSD 上の
	<code class="command">tip</code> などのような通信プログラム を使って、
	パラメータを設定してください。<code class="command">getty</code>
	が利用する初期速度でモデムに接続して、以下の条件を満たすよ
	うに不揮発ラムの設定を変更してください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>接続時に <acronym class="acronym">CD</acronym> 信号がオンになる</p></li><li class="listitem"><p>接続時に <acronym class="acronym">DTR</acronym> がオンになり、
	    <abbr class="abbrev">DTR</abbr> オフで回線を切断しモ
	    デムをリセットする。</p></li><li class="listitem"><p>送信時フロー制御には <acronym class="acronym">CTS</acronym> を利用。</p></li><li class="listitem"><p><acronym class="acronym">XON/XOFF</acronym>
	    によるフロー制御を行わない。</p></li><li class="listitem"><p>受信時のフロー制御は <acronym class="acronym">RTS</acronym> を使用。</p></li><li class="listitem"><p>Quiet mode (リザルト コードを返さない)</p></li><li class="listitem"><p>コマンド エコーを返さない。</p></li></ul></div><p>これらを実現するためのコマンドやディップ
	スイッチの設定に関しては、モ
	デムのマニュアルを参照してください。</p><p>以下に、USRobotics Sportster の 14,400 bps
	の外づけモデムの設定例を示 しておきます。</p><pre class="programlisting">ATZ
AT&amp;C1&amp;D2&amp;H1&amp;I0&amp;R2&amp;W</pre><p>ことのついでに、たとえば、V42.bis や MNP5
	のデータ圧縮を使用するかど
	うかなどのモデムの他の設定について確認、
	調整しておくのもよいかもしれま せん。</p><p>さらに、USRobotics Sportster の 14,400 bps
	の外づけモデムでは、以下の ようなディップ
	スイッチの設定も必要です。他のモデムをお使いの方も、以
	下の例を設定の参考にしてください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>スイッチ 1: UP ― DTR 標準</p></li><li class="listitem"><p>スイッチ 2: N/A
	    (リザルトコードを単語形式にするか数値形式にするか)</p></li><li class="listitem"><p>スイッチ 3: UP ― リザルトコードを返さない</p></li><li class="listitem"><p>スイッチ 4: DOWN ― コマンドエコーを返さない</p></li><li class="listitem"><p>スイッチ 5: UP ― 自動着信</p></li><li class="listitem"><p>スイッチ 6: UP ― CD 標準</p></li><li class="listitem"><p>スイッチ 7: UP ―
	    不揮発ラムからデフォルト値をロードする</p></li><li class="listitem"><p>スイッチ 8: N/A (Smart Mode/Dumb Mode)</p></li></ul></div><p>リザルト コードを返さないように設定しておかないと、
	<code class="command">getty</code> が誤っ て <code class="prompt">login:</code>
	プロンプトをコマンド モードのモデムに送信してしまった場 合に、
	モデムがこの入力をエコーしたり、この入力に対するリザルト
	コード を返してしまったりすることになります。この結果として、
	モデムと  <code class="command">getty</code>
	の間で延々と無意味なやりとりが続いてしまう可能性があります。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91637840"></a>19.4.5.1. 固定速度の設定</h4></div></div></div><p>固定速度の設定では、
	  モデムとコンピュータ間の通信速度をモデムとモデム間
	  の接続速度に関係なく、常に一定に保つように、
	  モデムを設定する必要があり ます。USRobotics Sportster の
	  14,400 bps 外づけモデムの場合、以下のコ マンドで、
	  モデムとコンピュータ間の速度が、コマンド送信時の速度に固定さ
	  れます。</p><pre class="programlisting">ATZ
AT&amp;B1&amp;W</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91639376"></a>19.4.5.2. 可変速度の設定</h4></div></div></div><p>可変速度の設定では、シリアル ポートの速度が、
	  着信速度に応じて変化する ように設定しなければいけません。
	  USRobotics Sporster の 14,400 bps 外 づけモデムの場合、
	  以下のコマンドで、エラー訂正機能を利用した通信の場合 は、
	  コマンドを送信した時の通信速度にシリアル
	  ポートの速度を固定し、エ ラー訂正機能を利用しない接続では、
	  シリアル ポートの速度が変化するよう に設定されます。</p><pre class="programlisting">ATZ
AT&amp;B2&amp;W</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91640912"></a>19.4.5.3. モデムの設定の確認</h4></div></div></div><p>ほとんどの高速モデムには、
	  現在の設定をある程度人間にも理解できる形式に
	  して表示させるコマンドがあります。USRobotics Sporster の
	  14,400 bps  外づけモデムの場合は、<code class="command">ATI5</code>
	  コマンドで、現在の不揮発ラムの設定を 表示することができます。
	  さらに、ディップ スイッチの設定も含めた現在の
	  設定を確認するためには、<code class="command">ATZ</code>
	  コマンドを送信してから、<code class="command">ATI4</code>
	  コマンドを送信してください。</p><p>他のメーカーのモデムをお使いの場合は、
	  モデムのマニュアルで設定値の確認
	  方法を確認してください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91643728"></a>19.4.6. トラブルシューティング</h3></div></div></div><p>以下の手順でダイアル アップ
	モデムの動作を確認することができます。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91644880"></a>19.4.6.1. FreeBSD システムの動作確認</h4></div></div></div><p>モデムを FreeBSD システムに接続し、
	  システムをブートします。あなたのモ
	  デムにモデムの状態を確認するためのインジケータがあれば、
	  <acronym class="acronym">DTR</acronym> のイ
	  ンジケータの状態に注目してください。もし、
	  システムのコンソールに  <code class="prompt">login:</code>
	  プロンプトが表示された時に、<acronym class="acronym">DTR</acronym>
	  のインジケータが点灯 すれば、FreeBSD が適切なポートに対して
	  <code class="command">getty</code> を起動し、モデムへ
	  の着信を待っている状態であることを意味しています。</p><p>もし <acronym class="acronym">DTR</acronym>
	  のインジケータが点灯しない場合は、システムのコンソールから
	  FreeBSD にログインして、<code class="command">ps ax</code> を実行し、
	  FreeBSD が適切なポートに対して<code class="command">getty</code>
	  プロセスを起動しようとしているのかどうか確認してください。
	  プロセスに関する情報の中に、
	  以下のような行が表示されるはずです。</p><pre class="screen">  114 ??  I      0:00.10 /usr/libexec/getty V19200 ttyd0
  115 ??  I      0:00.10 /usr/libexec/getty V19200 ttyd1</pre><p>モデムにまだ着信がない状態の時に、
	  以下のように上とは異なる出力があった
	  場合、<code class="command">getty</code> は既にモデム
	  ポートのオープンを終了したということに
	  なります。

	  </p><pre class="screen">  114 d0  I      0:00.10 /usr/libexec/getty V19200 ttyd0</pre><p>

	  <code class="command">getty</code> は、<acronym class="acronym">CD</acronym>
	  (carrier detect) 信号がオンの状態になるまで、
	  ポートのオープンを完了することはできませんので、
	  この場合は接続に問題が
	  あるか、あるいはモデムの設定に問題があることが考えられます。
	</p><p>もし、期待した
	  <code class="filename">ttydN</code>
	  ポートをオープンしようとしている
	  <code class="command">getty</code> が見あたらない場合は、再度
	  <code class="filename">/etc/ttys</code> の内容を確認し、
	  書式などに誤りがないか 調べてみてください。また、ログ
	  ファイル <code class="filename">/var/log/messages</code> に
	  <code class="command">init</code> および <code class="command">getty</code>
	  から何か出力がないかどうかも確認してみてく ださい。
	  もし何かメッセージが記録されていたら、再度
	  <code class="filename">/etc/ttys</code>、
	  <code class="filename">/etc/gettytab</code> の二つの設定ファイルと、
	  ディバイス スペシャルファイル
	  <code class="filename">/dev/ttydN</code> を確認し、
	  記述に誤りがないか、足りないエントリがないか、
	  足りないディバイス スペシャルファイルがないかといった
	  点について調べてみてください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91655888"></a>19.4.6.2. モデムで接続してみる</h4></div></div></div><p>実際にモデムを使って別のコンピュータから
	  接続してみてください。この時、8 ビット、パリティなし、
	  1 ストップビットで接続するようにしてください。
	  接続後すぐにプロンプトが返ってこない場合や、
	  無意味な文字列が表示される 場合は、1秒に1回くらいの割合で
	  <span class="keycode">Enter</span> キーを押してみてください。
	  しばらくたって、なおも <code class="prompt">login:</code>
	  プロンプトが現れない場合 は、<code class="command">BREAK</code>
	  信号を送信してみてください。この時、端末側で使って
	  いるモデムが高速モデムならば、
	  このモデムのインタフェースの接続速度を固 定してから、
	  再度ダイアル インしてみてください。(たとえば、USRobotics
	  Sportster の場合は、<code class="command">AT&amp;B1</code>)</p><p>それでもまだ <code class="prompt">login:</code>
	  プロンプトが表示されない場合は、
	  <code class="filename">/etc/gettytab</code>
	  の以下の点について再度確認してみてください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/etc/ttys</code> の対応する行の
	      2番目の項目で、<code class="filename">/etc/gettytab</code>
	      の中で定義されているエントリが指定されているか</p></li><li class="listitem"><p>各 <code class="literal">nx=</code> で
	      <code class="filename">/etc/gettytab</code>
	      の中で定義されているもの が指定されているか</p></li><li class="listitem"><p>各 <code class="literal">tc=</code> で
	      <code class="filename">/etc/gettytab</code>
	      の中で定義されているもの が指定されているか</p></li></ul></div><p>もしダイアル インしても、FreeBSD
	  システム側のモデムが応答しない場合は、FreeBSD 側のモデムが
	  <acronym class="acronym">DTR</acronym>
	  がオンになった時に電話にでるように設定さ
	  れているかを確認してください。
	  もしモデムの設定に問題がなさそうならば、
	  モデムのインジケータ (がもしあれば) で、
	  <acronym class="acronym">DTR</acronym> がオンになっているか
	  を確認してください。</p><p>この確認のステップを数回繰り返しても
	  うまくいかない場合は、一度休憩して、
	  しばらくたってから挑戦してみましょう。それでもだめなら、
	  おそらく <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">FreeBSD general questions メーリングリスト</a>
	  にあなたのモデムについての情報と問題を書いたメールを送れ ば、
	  メーリング
	  リストのメンバーが問題の解決を助けるべく努力してくれる
	  でしょう。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dialout"></a>19.5. ダイアルアウトサービス</h2></div></div></div><a id="idp91672016" class="indexterm"></a><p><span class="emphasis"><em>訳: 丸山 剛司 <code class="email">&lt;<a xmlns="" class="email" href="mailto:tmaruya@nnc.or.jp">tmaruya@nnc.or.jp</a>&gt;</code>.
	31 December 1996.</em></span></p><p>以下はモデムを利用して他のコンピュータと
      接続する方法を説明しています。
      これはリモートホストとターミナル接続を確立するための
      適切な方法です。</p><p>これは BBS に接続するときによく使います。</p><p>この種の接続は PPP 接続に問題がある場合、Internet
      上にあるファイルを 転送するのに非常に役に立ちます。FTP
      で何らかのファイルを転送したいのに  PPP
      接続を確立できない場合は、ファイルを FTP
      転送するためにターミナルセッション を利用します。そして ZMODEM
      を利用してファイルを転送します。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91674960"></a>19.5.1. 私の Hayes モデムはサポートされていません、
	どうすればよいでしょう?</h3></div></div></div><p>実際、<code class="command">tip</code> の
	マニュアルページは古くなっています。既に Hayes
	ダイアラが組み込まれています。<code class="filename">/etc/remote</code>
	ファイル中で <code class="literal">at=hayes</code>
	を使ってください。</p><p>Hayes ドライバは、最近のモデムの新しい機能である
	<code class="literal">BUSY</code>、<code class="literal">NO DIALTONE</code>、
	<code class="literal">CONNECT 115200</code>などのメッセージを
	認識できるほど賢くはなく、単に混乱を起こすだけです。
	<code class="command">tip</code>を使う場合には、
	(<code class="command">ATX0&amp;W</code> とするなどして) これらの
	メッセージを表示させないようにしなくてはいけません。</p><p>また、<code class="command">tip</code> のダイアルのタイムアウトは
	60秒です。モデムの タイムアウト設定はそれより短くすべきであり、
	そうしないと  <code class="command">tip</code>
	は通信に問題があると判断するでしょう。
	<code class="command">ATS7=45&amp;W</code>  を実行してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">デフォルトの <code class="command">tip</code> は、
	  Hayes モデムに完全に対応しているわけではありません。解決方法は
	  <code class="filename">/usr/src/usr.bin/tip/tip</code> の下の
	  <code class="filename">tipconf.h</code> を変更することです。
	  もちろんこれにはソース配布ファイルが必要です。</p><p xmlns="http://www.w3.org/1999/xhtml"><code class="literal">#define HAYES 0</code> と記述されている行を
	  <code class="literal">#define HAYES 1</code> と変更し、そして
	  <code class="command">make</code>, <code class="command">make install</code>
	  を実行します。これでうまく動作するでしょう。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="direct-at"></a>19.5.2. これらの AT コマンドを入力するには?</h3></div></div></div><a id="idp91698128" class="indexterm"></a><p><code class="filename">/etc/remote</code> ファイルの中で
	<span class="quote">「<span class="quote">direct</span>」</span> エントリを作ります。たとえばモデムが
	1番目のシリアルポートである <code class="filename">/dev/cuaa0</code>
	に接続されている場合、次のようにします:</p><pre class="programlisting">cuaa0:dv=/dev/cuaa0:br#19200:pa=none</pre><p>モデムがサポートする最大の bps レートを br
	フィールドに使います。そして <code class="command">tip cuaa0</code>
	を実行すると、モデムが利用できるようになります。</p><p><code class="filename">/dev/cuaa0</code>
	がシステムに存在しない場合は、次のようにします:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /dev</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sh MAKEDEV cuaa0</code></strong></pre><p>または <code class="systemitem">root</code> になって以下のように
	<code class="command">cu</code> コマンドを実行します:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cu -lline -sspeed</code></strong></pre><p><em class="replaceable"><code>line</code></em>
	にはシリアルポートを指定します (例えば
	<code class="filename">/dev/cuaa0</code>)。そして
	<em class="replaceable"><code>speed</code></em> には接続する速度を指定します
	(例えば <code class="literal">57600</code>)。その後 AT
	コマンドを実行したら、<span class="keycap"><strong>~.</strong></span>
	と入力すれば終了します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91712976"></a>19.5.3. pn 機能の <code class="literal">@</code> 記号が使えません!</h3></div></div></div><p>電話番号 (pn) 機能の中での <code class="literal">@</code> 記号は、
	tip に <code class="filename">/etc/phone</code>
	にある電話番号を参照するように伝えます。しかし
	<code class="literal">@</code> の文字は <code class="filename">/etc/remote</code>
	のような 設定ファイルの中では特殊文字となります。
	バックスラッシュを使ってエスケープをおこないます:</p><pre class="programlisting">pn=\@</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91720656"></a>19.5.4. コマンドラインから電話番号を指定するには?</h3></div></div></div><p><span class="quote">「<span class="quote">generic</span>」</span> エントリと呼ばれるものを
	<code class="filename">/etc/remote</code> に追加します。
	例えば次のようにします:</p><pre class="programlisting">tip115200|Dial any phone number at 115200 bps:\
	    :dv=/dev/cuaa0:br#115200:at=hayes:pa=none:du:
tip57600|Dial any phone number at 57600bps:\
	    :dv=/dev/cuaa0:br#57600:at=hayes:pa=none:du:</pre><p>そして </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tip -115200 5551234</code></strong></pre><p>のように利用できます。
	<code class="command">tip</code> より <code class="command">cu</code> を使いたい場合、
	<code class="literal">cu</code> の generic エントリを使います。</p><pre class="programlisting">cu115200|Use cu to dial any number at 115200bps:\
	:dv=/dev/cuaa1:br#57600:at=hayes:pa=none:du:</pre><p>そして</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cu 5551234 -s 115200</code></strong></pre><p> と実行します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91727952"></a>19.5.5. 毎回 bps レートを入力しなければいけませんか?</h3></div></div></div><p><code class="literal">tip1200</code> や <code class="literal">cu1200</code>
	用のエントリを記述し、適切な通信速度を br
	フィールドに設定します。<code class="command">tip</code> は 1200 bps
	が正しいデフォルト値であるとみなすので、
	<code class="literal">tip1200</code> エントリを参照します。もちろん 1200
	bps  を使わなければならないわけではありません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91730512"></a>19.5.6. ターミナルサーバを経由して複数のホストへアクセスしたいです</h3></div></div></div><p>毎回接続されるのを待って
	<code class="command">CONNECT &lt;host&gt;</code> と入力する
	かわりに、tip の <code class="literal">cm</code> 機能を使います。
	例えば、<code class="filename">/etc/remote</code>
	に次のようなエントリを追加します:

	</p><pre class="programlisting">pain|pain.deep13.com|Forrester's machine:\
	:cm=CONNECT pain\n:tc=deep13:
muffin|muffin.deep13.com|Frank's machine:\
	:cm=CONNECT muffin\n:tc=deep13:
deep13:Gizmonics Institute terminal server:\
	:dv=/dev/cuaa2:br#38400:at=hayes:du:pa=none:pn=5551234:</pre><p>

	これで、<code class="command">tip pain</code> や
	<code class="command">tip muffin</code> と実行すると
	pain や muffin のホストに接続することができ、
	<code class="command">tip deep13</code>
	を実行するとターミナルサーバに接続します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91734352"></a>19.5.7. tip を使ってそれぞれのサイトの
	複数の回線に接続できますか?</h3></div></div></div><p>これは大学に電話回線がいくつかあって
	数千人の学生が接続しようとする 場合によくある問題です。</p><p>あなたの大学のエントリを <code class="filename">/etc/remote</code>
	ファイルに作成して、<code class="literal">pn</code> のフィールドには
	<code class="literal">@</code> を使います:</p><pre class="programlisting">big-university:\
	:pn=\@:tc=dialout
dialout:\
	:dv=/dev/cuaa3:br#9600:at=courier:du:pa=none:</pre><p>そして <code class="filename">/etc/phone</code>
	ファイルに大学の電話番号の一覧を書きます:</p><pre class="programlisting">big-university 5551111
big-university 5551112
big-university 5551113
big-university 5551114</pre><p><code class="command">tip</code> は一連の電話番号を試みて、
	最終的に接続できなければあきらめます。
	リトライを続けさせたい場合は、<code class="command">tip</code> を while
	ループに入れて 実行します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91739856"></a>19.5.8. <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>P</strong></span>
	を 1 回送るために
	<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>P</strong></span>
	を 2 度押す必要があるのはなぜ?</h3></div></div></div><p><span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>P</strong></span>
	はデフォルトの <span class="quote">「<span class="quote">force (強制)</span>」</span> 文字であり、
	<code class="command">tip</code> に次の文字が
	リテラルデータであることを伝えます。force
	文字は <span class="quote">「<span class="quote">変数の設定</span>」</span> を意味する
	<code class="command">~s</code>
	エスケープによって他の文字にすることができます。</p><p><code class="command">
	  ~sforce=single-char</code>
	と入力して改行します。<em class="replaceable"><code>single-char</code></em>
	は、任意の 1 バイト文字です。
	<em class="replaceable"><code>single-char</code></em> を省略すると NUL
	文字になり、これは
	<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>2</strong></span>
	や
	<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Space</strong></span>
	を押しても入力できます。また、
	<em class="replaceable"><code>single-char</code></em> に
	<span class="keycap"><strong>Shift</strong></span>+<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>6</strong></span>
	を割り当てる方法を使っているターミナルサーバもあります。</p><p><code class="filename">$HOME/.tiprc</code>
	に次のように定義することで、任意の文字を force
	文字として利用できます:</p><pre class="programlisting">force=&lt;single-char&gt;</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91760976"></a>19.5.9. 打ち込んだ文字が突然すべて大文字になりました??</h3></div></div></div><p><span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>A</strong></span>
	を押してしまい、caps-lock
	キーが壊れている場合のために設計された  <code class="command">tip</code>
	の <span class="quote">「<span class="quote">raise character</span>」</span> モードに入ったのでしょう。
	既に述べたように <code class="command">~s</code> を使って、
	<code class="literal">raisechar</code> をより適切な値に
	変更してください。もしこれら両方の機能を使用しないのであれば、
	force 文字と同じ設定にすることもできます。</p><p>以下は
	<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>2</strong></span>
	や
	<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>A</strong></span>
	などを頻繁に使う必要のある
	<span class="application">Emacs</span>
	ユーザにうってつけの .tiprc ファイルのサンプルです。</p><pre class="programlisting">force=^^
raisechar=^^</pre><p>^^ は
	<span class="keycap"><strong>Shift</strong></span>+<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>6</strong></span>
	です。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91770448"></a>19.5.10. <code class="command">tip</code> でファイルを転送するには?</h3></div></div></div><p>もし他の Unix のシステムと接続しているなら、
	<code class="command">~p</code>(put) や  <code class="command">~t</code>(take)
	でファイルの送受信ができます。これらのコマンドは
	相手のシステムの上で <code class="command">cat</code> や
	<code class="command">echo</code> を実行することで 送受信をします。
	書式は以下のようになります:</p><div class="cmdsynopsis"><p><code class="command">~p</code>  ローカルのファイル名  [リモートのファイル名]</p></div><div class="cmdsynopsis"><p><code class="command">~t</code>  リモートのファイル名  [ローカルのファイル名]</p></div><p>この方法ではエラーチェックをおこないませんので、zmodem
	などの他のプロトコルを使った方がよいでしょう。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91781584"></a>19.5.11. <code class="command">tip</code> から zmodem を実行するには?</h3></div></div></div><p>ファイルを受信するには、
	リモート側で送信プログラムを起動します。そして <code class="command">~C
	  rz</code> と入力すると、ローカル側へのファイルの受信が
	始まります。</p><p>ファイルを送信するには、
	リモート側で受信プログラムを起動します。そして <code class="command">~C sz
	  files</code> と入力すると、
	リモート側への ファイルの送信が始まります。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="serialconsole-setup"></a>19.6. シリアルコンソールの設定</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">YOKOTA</span> <span class="firstname">Kazutaka</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Paul</span> <span class="firstname">Bill</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp91792592" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-intro"></a>19.6.1. 導入</h3></div></div></div><p>FreeBSD は、
	コンソールとしてシリアルポート上のダム端末しか持たないシステムでも起動します。
	この様な構成はきっと次のような二種類の人達に便利でしょう。それは、
	キーボードやモニタのないマシンに
	FreeBSD をインストールしたいシステム管理者と、
	カーネルやデバイスドライバをデバッグしたい開発者です。</p><p><a class="xref" href="#boot" title="第13章 FreeBSD の起動のプロセス">13章<em>FreeBSD の起動のプロセス</em></a> で説明されているように、
	FreeBSD は 3 ステージ構成のブートストラップを用いています。
	最初の 2 つのステージは、
	ブートディスクにある FreeBSD スライスの最初に格納されている、
	ブートブロックのコードが行います。
	それからブートブロックは、第 3 ステージのコードとしてブートローダ
	(<code class="filename">/boot/loader</code>) を読み込み、実行します。</p><p>シリアルコンソールを設定するためには、ブートブロックコード、
	ブートローダコード、カーネルを設定する必要があります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-howto"></a>19.6.2. シリアルコンソールの設定</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>シリアルケーブルを用意してください。</p><a id="idp91797456" class="indexterm"></a><p>ヌルモデムケーブル、
	    もしくは標準シリアルケーブルとヌルモデムアダプタが必要となります。
	    シリアルケーブルについては <a class="xref" href="#serial-cables-ports" title="19.2.2. ケーブルとポート">「ケーブルとポート」</a>
	    をご覧ください。</p></li><li class="step"><p>キーボードをはずして下さい。</p><p>たいていの PC システムは Power-On Self-Test (POST)
	    の間にキーボードを検出し、もし見つからなければエラーと
	    なります。また、キーボードがないことを大きな音で知らせ、
	    キーボードが接続されるまでは起動を中断するようなマシンもあります。</p><p>コンピュータがエラーを表示していても、
	    とにかく起動するなら特別な対応は必要ありません
	    (Phoenix BIOS を搭載しているマシンには、
	    <span class="errorname">Keyboard failed</span>
	    と表示されても、正常に起動するものがあります)。</p><p>あなたのコンピュータがキーボードを接続していない状態で
	    起動しないようなら、(もし可能ならば) エラーを無視するように
	    BIOS を設定する必要があります。設定方法の詳細については、
	    マザーボードのマニュアルを調べてください。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">BIOS の設定でキーボードを <span class="quote">「<span class="quote">Not installed</span>」</span>
	      にするということは、キーボードを使えないということを
	      意味しているわけでは<span class="emphasis"><em>ありません</em></span>。これは、BIOS
	      がキーボードがなくても文句を言わないように、電源投入時には
	      キーボードを探すな、と指示するだけです。このフラグを
	      <span class="quote">「<span class="quote">Not installed</span>」</span> にしていてもキーボードを
	      接続したままにできますし、ちゃんと動作します。</p></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">あなたのシステムが PS/2 マウスを使っているなら、
	      おそらくマウスもキーボード同様にはずす必要があるでしょう。
	      というのは、PS/2 マウスは部分的にキーボードとハードウェアを
	      共有しており、マウスを接続したままにしていると、
	      キーボードも存在する、と誤って検出してしまう可能性があるからです。
	      AMI BIOS を持つ Gateway 2000 Pentium 90MHz システム
	      はこれに該当すると言われています。
	      一般的にこれは問題ではありません。なぜなら、どっちにしても
	      マウスはキーボードなしではたいして役に立たないからです。</p></div></li><li class="step"><p><code class="filename">COM1</code> (<code class="filename">sio0</code>)
	    にダム端末を接続してください。</p><p>ダム端末がなければ、かわりに古い PC/XT でモデム
	    プログラムを走らせて使ったり、シリアルポートに他の Unix
	    マシンを繋いだりできます。もしも <code class="filename">COM1</code>
	    (<code class="filename">sio0</code>) がなければ、作成してください。
	    今のところ、<code class="filename">COM1</code> 以外のポートを
	    選択するためにはブートブロックの再コンパイルが必要です。
	    すでに <code class="filename">COM1</code> を他の装置に
	    使っていた場合は、一時的にその装置をはずして
	    いったん FreeBSD がうまく動作してから、
	    新しいブートブロックとカーネルをインストールしてください。
	    (上記はとにかくファイル/演算/端末サーバの
	    <code class="filename">COM1</code> が利用可能であると仮定して
	    います。あなたが本当に何かのために
	    <code class="filename">COM1</code> が必要 (で、なおかつその何かを
	    <code class="filename">COM2</code> (<code class="filename">sio1</code>)
	    に付け替えることができない) ならば、多分、そもそも
	    悩んでる場合ではありません。)</p></li><li class="step"><p>カーネルコンフィグファイルの <code class="filename">COM1</code>
	    (<code class="filename">sio0</code>) に適切なフラグを
	    設定していることを確認してください。</p><p>関連するフラグ:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">0x10</code></span></dt><dd><p>このポートのコンソールサポートを有効にします。
		  このフラグが設定されない場合、他のフラグは無視されます。
		  現在のところ、一つのポートしかコンソールサポートを有効に
		  できません。(config ファイルに書かれた順番で) 最初にこのフラグを
		  指定されたポートが選択されます。
		  なお、このオプションを指定するだけでシリアルポートが
		  コンソールとして使えるわけではありません。
		  このフラグと一緒に、以下のフラグも指定するかもしくは
		  <code class="option">-h</code> オプションも使ってください。</p></dd><dt><span class="term"><code class="literal">0x20</code></span></dt><dd><p>後述される <code class="option">-h</code> オプション
		  を無視して、(他に優先度の高いコンソールがない限り)
	          このポートをコンソールとして指定します。
		  このフラグは FreeBSD バージョン
		  2.<em class="replaceable"><code>X</code></em> の
		  <code class="literal">COMCONSOLE</code> オプションに対応するものです。
		  フラグ <code class="literal">0x20</code> は必ず
		  フラグ <code class="option">0x10</code> と一緒に指定されなければなりません。</p></dd><dt><span class="term"><code class="literal">0x40</code></span></dt><dd><p>(<code class="literal">0x10</code> と組み合わせることで)
		  このポートを予約し、通常のアクセスができない
		  ようにします。
		  このフラグは、シリアルコンソールとして使いたいポートに
		  指定すべきではありません。
		  唯一の使い道は、ユニットがカーネルのリモートデバッグ用
		  であることを指定することです。
		  リモートデバッグの詳細については
	          <a class="link" href="../developers-handbook/index.html" target="_top">The
		  Developer's Handbook</a> を参照してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 4.0 以降では、
		    フラグ <code class="literal">0x40</code> の意味が若干異なり、
		    シリアルポートにリモートデバッグを指定するためには、
		    別のフラグを使います。</p></div></dd></dl></div><p>例:</p><pre class="programlisting">device sio0 at isa? port "IO_COM1" tty flags 0x10 irq 4</pre><p>詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a>
	    のマニュアルを参照してください。</p><p>もしこれらのフラグがセットされていなければ、(別のコンソールで)
	    UserConfig を実行するか、
	    カーネルを再コンパイルする必要があります。</p></li><li class="step"><p>ブートドライブの <code class="literal">a</code> パーティションの
	    ルートディレクトリに <code class="filename">boot.config</code>
	    を作成してください。</p><p>このファイルは、ブートブロックコードに対してどのように
	    システムを起動したいかを教えます。
	    シリアルコンソールを活かすためには、以下のオプションを幾つか
	    ― 複数の場合も一行で、設定する必要があります:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-h</code></span></dt><dd><p>内蔵コンソールとシリアルコンソールの切替えを行います。
		  これを使用してコンソールデバイスを変更できます。
		  例えば、内蔵 (ビデオ) コンソールからブートした場合、
		  カーネルとブートローダがコンソールデバイスとして
		  シリアルポートを使用するようにするため、
		  <code class="option">-h</code> を使って指示できます。
		  反対に、シリアルポートからブートした場合、
		  ブートローダとカーネルがコンソールとして代わりに
		  ビデオディスプレイを使用するようにするため、
		  <code class="option">-h</code> を使用できます。</p></dd><dt><span class="term"><code class="option">-D</code></span></dt><dd><p>シングルとデュアルのコンソール設定を切り替えます。
		  シングル設定では、上記の <code class="option">-h</code>
		  オプションの状態によって、コンソールは内蔵コンソール
		  (ビデオディスプレイ)かシリアルポートのいずれかになります。
		  デュアルコンソール設定では、ビデオディスプレイと
		  シリアルポートの両方が、<code class="option">-h</code>
		  オプションの状態によらず、同時にコンソールになります。
		  しかし、デュアルコンソール設定は、ブートブロックが
		  実行されている間でしか効果を持ちません。
		  一旦ブートローダに制御が移ると、<code class="option">-h</code>
		  オプションによって指定されたコンソールが
		  唯一のコンソールになります。</p></dd><dt><span class="term"><code class="option">-P</code></span></dt><dd><p>ブートブロックがキーボードを検出するようにします。
		  キーボードが発見できなかった場合には、
		  <code class="option">-D</code> と <code class="option">-h</code>
	          オプションが自動的にセットされます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">現バージョンのブートブロックでは容量の制限により、
		    <code class="option">-P</code> オプションは拡張キーボードしか
		    検出できません。キーが 101 個より少ない (そして F11
		    と F12 がない) キーボードは検出されない可能性があります。
		    この制限から、いくつかのラップトップコンピュータの
		    キーボードは正しく検出されないでしょう。
		    もし、あなたのシステムがこのようなキーボードを使っているのであれば、
		    <code class="option">-P</code> オプションを外してください。
		    残念ながら、この問題の回避策はありません。</p></div></dd></dl></div><p><code class="option">-P</code> オプションを使ってコンソールを
	    自動的に選ぶか、<code class="option">-h</code> オプションを使って
	    シリアルコンソールを有効にしてください。</p><p>さらに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot</span>(8)</span></a> で説明されている他のオプションも使う
	    ことができます。</p><p><code class="option">-P</code> 以外のオプションはブートローダ
	    (<code class="filename">/boot/loader</code>) に渡されます。
	    ブートローダは、<code class="option">-h</code> オプションだけの状態を
	    調べることで内蔵ビデオとシリアルポートのどちらがコンソールに
	    なるのか決めます。
	    つまり、<code class="filename">/boot.config</code> の中で
	    <code class="option">-D</code> オプションを指定して
	    <code class="option">-h</code> オプションを指定しなかった場合、
	    ブートブロック実行中でのみシリアルポートをコンソールとして
	    使うことができます。ブートローダは内蔵ビデオディスプレイを
	    コンソールとして使います。</p></li><li class="step"><p>マシンを起動する。</p><p>FreeBSD を起動したとき、ブートブロックは
	    <code class="filename">/boot.config</code> の内容をコンソールに表示
	    します。例えば、</p><pre class="screen">/boot.config: -P
Keyboard: no</pre><p>行の二番目は、
	    <code class="filename">/boot.config</code> にオプション
	    <code class="option">-P</code> が指定してあるときだけ表示され、
	    キーボードが存在するかどうかを表します。
	    これらのメッセージは、シリアルか内蔵のいずれか、
	    あるいはその両方のコンソールに表示されます。
	    どちらに表示されるかは、
	    <code class="filename">/boot.config</code> の設定によって変わります。</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>オプション指定</th><th>メッセージの表示される場所</th></tr></thead><tbody><tr><td>なし</td><td>内蔵</td></tr><tr><td><code class="option">-h</code></td><td>シリアル</td></tr><tr><td><code class="option">-D</code></td><td>シリアルと内蔵の両方</td></tr><tr><td><code class="option">-Dh</code></td><td>シリアルと内蔵の両方</td></tr><tr><td><code class="option">-P</code>、キーボードが存在する場合</td><td>内蔵</td></tr><tr><td><code class="option">-P</code>、キーボードが存在しない場合</td><td>シリアル</td></tr></tbody></table></div><p>このメッセージが表示された後、
	    ブートブロックがブートローダのロードを再開し、
	    他の全てのメッセージがコンソールに表示されるまで、
	    若干時間がかかります。通常の環境では、ブートブロックに
	    割り込みをかける必要はありませんが、
	    ちゃんとセットアップされているかどうか確かめるために、
	    割り込みをかけることができるようになっています。</p><p>ブートプロセスに割り込みをかけるには、
	    コンソールの (<span class="keycode">Enter</span> 以外の)
	    キーをたたいて下さい。
	    ブートブロックはその時、操作を指定するためのプロンプトを表示します。
	    こんな風に表示されるでしょう。
	  </p><pre class="screen">&gt;&gt; FreeBSD/i386 BOOT
Default: 0:wd(0,a)/boot/loader
boot:</pre><p>上に示したメッセージが、シリアルか内蔵、
	    あるいはその両方といった、<code class="filename">/boot.config</code>
	    で指定したとおりのコンソールに表示されることを確認して下さい。
	    メッセージが正しいコンソールに表示されたら、
	    <span class="keycode">Enter</span>
	    キーを押してブートプロセスを継続してください。
	  </p><p>もし、シリアルコンソールを利用するように設定しているのに
	    シリアル端末にプロンプトが出てこない場合は、
	    設定のどこかに間違いがあります。
	    ブートブロック(とブートローダ、カーネル)に対して
	    シリアルポートをコンソールに使うことを伝えるため、
	    割り込みをかけた時に <code class="option">-h</code> を入力し、
	    (可能ならば) Enter/Return キーを押して下さい。そして、
	    一度システムを起動させてから、どこが悪いのかをチェックして下さい。</p></li></ol></div><p>ブートローダがロードされ、ブートプロセスの第三ステージに
      いる時には、まだ内蔵コンソールとシリアルコンソールを切り替えることができます。
      それにはブートローダの環境変数を適切に設定すれは良いのですが、
      詳細については <a class="xref" href="#serialconsole-loader" title="19.6.5. ブートローダからコンソールを変更するには">「ブートローダからコンソールを変更するには」</a> を参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-summary"></a>19.6.3. まとめ</h3></div></div></div><p>このセクションで扱ったさまざまな設定と、
	最終的に選択されるコンソールに関するまとめです。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91880912"></a>19.6.3.1. Case 1: <code class="filename">sio0</code> の
	  flags に 0x10 をセットした場合</h4></div></div></div><pre class="programlisting">device sio0 at isa? port "IO_COM1" tty flags 0x10 irq 4</pre><div class="informaltable"><table border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>/boot.config 内のオプション</th><th>ブートブロック実行中のコンソール</th><th>ブートローダ実行中のコンソール</th><th>カーネルのコンソール</th></tr></thead><tbody><tr><td>なし</td><td>内蔵</td><td>内蔵</td><td>内蔵</td></tr><tr><td><code class="option">-h</code></td><td>シリアル</td><td>シリアル</td><td>シリアル</td></tr><tr><td><code class="option">-D</code></td><td>内蔵、シリアルの両方</td><td>内蔵</td><td>内蔵</td></tr><tr><td><code class="option">-Dh</code></td><td>内蔵、シリアルの両方</td><td>シリアル</td><td>シリアル</td></tr><tr><td><code class="option">-P</code>、キーボードが存在する場合</td><td>内蔵</td><td>内蔵</td><td>内蔵</td></tr><tr><td><code class="option">-P</code>、キーボードが存在しない場合</td><td>内蔵、シリアルの両方</td><td>シリアル</td><td>シリアル</td></tr></tbody></table></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91911120"></a>19.6.3.2. Case 2:  sio0 の flags に 0x30 をセットした場合</h4></div></div></div><pre class="programlisting">device sio0 at isa? port "IO_COM1" tty flags 0x30 irq 4</pre><div class="informaltable"><table border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>/boot.config 内のオプション</th><th>ブートブロック実行中のコンソール</th><th>ブートローダ実行中のコンソール</th><th>カーネルのコンソール</th></tr></thead><tbody><tr><td>なし</td><td>内蔵</td><td>内蔵</td><td>シリアル</td></tr><tr><td><code class="option">-h</code></td><td>シリアル</td><td>シリアル</td><td>シリアル</td></tr><tr><td><code class="option">-D</code></td><td>内蔵、シリアルの両方</td><td>内蔵</td><td>シリアル</td></tr><tr><td><code class="option">-Dh</code></td><td>内蔵、シリアルの両方</td><td>シリアル</td><td>シリアル</td></tr><tr><td><code class="option">-P</code>、キーボードが存在する場合</td><td>内蔵</td><td>内蔵</td><td>シリアル</td></tr><tr><td><code class="option">-P</code>、キーボードが存在しない場合</td><td>内蔵、シリアルの両方</td><td>シリアル</td><td>シリアル</td></tr></tbody></table></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-tips"></a>19.6.4. シリアルコンソールを利用する上で役に立つ情報</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91937872"></a>19.6.4.1. シリアルポートの通信速度をもっと速いものに設定するには</h4></div></div></div><p>デフォルトのシリアルポート通信速度は、9600 ボー、
	  8 ビット、パリティなし、ストップビット 1 です。
	  通信速度を変更したい場合には、少なくとも
	  ブートブロックの再コンパイルが必要になります。
	  <code class="filename">/etc/make.conf</code> に次のような行を追加して、
	  新しくブートブロックをコンパイルして下さい。</p><pre class="programlisting">BOOT_COMCONSOLE_SPEED=19200</pre><p>もし、シリアルコンソールがブート時の <code class="option">-h</code>
	  オプション以外の方法で設定されていたり、
	  カーネルが利用するシリアルコンソールが
	  ブートブロック実行中のものと異なる場合には、
	  カーネルコンフィグレーションファイルに次のオプションを追加して、
	  新しくカーネルをコンパイルしなければなりません。</p><pre class="programlisting">options CONSPEED=19200</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-com2"></a>19.6.4.2. <code class="filename">sio0</code> 以外のシリアルポートを
	  コンソールとして使うには</h4></div></div></div><p><code class="filename">sio0</code>
	  以外のポートをコンソールとして使うには、再コンパイルが必要です。
	  それがどんな理由であれ、他のポートを使用する場合には
	  ブートブロック、ブートローダ、カーネルを
	  次のようにして再コンパイルして下さい。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>カーネルソースを取得する (<a class="xref" href="#updating-upgrading" title="第18章 FreeBSD のアップデートとアップグレード">18章<em>FreeBSD のアップデートとアップグレード</em></a>
	      をご覧ください)。</p></li><li class="step"><p><code class="filename">/etc/make.conf</code> を編集し、
	      <code class="literal">BOOT_COMCONSOLE_PORT</code> に
	      使用したいポートのアドレス(0x3F8、0x2F8、0x3E8 or 0x2E8)を
	      設定してください。使用可能なのは
	      <code class="filename">sio0</code> から
	      <code class="filename">sio3</code> (<code class="filename">COM1</code>
	      から <code class="filename">COM4</code>) までで、
	      マルチポートシリアルカードは使えません。
	      また、ここで割り込みの設定をする必要はありません。</p></li><li class="step"><p>設定を変更するために新たなカーネルコンフィグレーションファイルを作成し、
	      使いたいシリアルポートのフラグを適切に設定します。
	      例えば、<code class="filename">sio1</code>
	      (<code class="filename">COM2</code>) をコンソールにしたければ、</p><pre class="programlisting">device sio1 at isa? port "IO_COM2" tty flags 0x10 irq 3</pre><p>または、</p><pre class="programlisting">device sio1 at isa? port "IO_COM2" tty flags 0x30 irq 3</pre><p>とします。その際、
	    他のシリアルポートにコンソールフラグをつけてはいけません。</p></li><li class="step"><p>ブートブロックを再コンパイルし、インストールする。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /sys/boot/i386/boot2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong></pre></li><li class="step"><p>ブートローダを再コンパイルし、インストールする。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /sys/boot/i386/loader</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong></pre></li><li class="step"><p>カーネルを再構築し、インストールする。</p></li><li class="step"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>
	      を使ってブートブロックをブートディスクに書き込み、
	      新しいカーネルから起動する。</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91963472"></a>19.6.4.3. シリアルポートから DDB デバッガを起動するには</h4></div></div></div><p>シリアルコンソールからカーネルデバッガを起動したい(これは
	  リモートで診断する際に便利ですが、もしおかしな BREAK
	  信号がシリアルポートに送られるような場合には危険です!)
	  場合には、次のオプションを使ってカーネルをコンパイルして下さい。
	</p><pre class="programlisting">options BREAK_TO_DEBUGGER
options DDB</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91965008"></a>19.6.4.4. シリアルコンソールにログインプロンプトを表示させるには</h4></div></div></div><p>シリアルコンソールからブートメッセージを確認したり、
	  シリアルコンソールを経由してカーネルデバッグセッションに入ることが
	  できるので、これは必要がないかもしれませんが、
	  <span class="emphasis"><em>login</em></span> プロンプトをシリアルポートに
	  出力するように設定することもできます。
	  これには、次のようにします。</p><p>エディタで <code class="filename">/etc/ttys</code> というファイルを開き、
	  次に示す行に移動して下さい。</p><pre class="programlisting">ttyd0 "/usr/libexec/getty std.9600" unknown off secure
ttyd1 "/usr/libexec/getty std.9600" unknown off secure
ttyd2 "/usr/libexec/getty std.9600" unknown off secure
ttyd3 "/usr/libexec/getty std.9600" unknown off secure</pre><p><code class="literal">ttyd0</code> から
	  <code class="literal">ttyd3</code> は、
	  <code class="filename">COM1</code> から
	  <code class="filename">COM4</code> に対応しています。
	  設定したいポートの <code class="literal">off</code> を
	  <code class="literal">on</code> に変更して下さい。
	  また、もしシリアルポートの通信速度を変更しているなら、
	  <code class="literal">std.9600</code> が実際の通信速度になるように、
	  例えば <code class="literal">std.19200</code> のように変更して下さい。</p><p>さらに、実際のシリアル端末に合わせて、
	  端末タイプを <code class="literal">unknown</code> から変更することも可能です。
	</p><p>ファイルの編集が終了したら、
	  変更を有効化するために <code class="command">kill -HUP 1</code>
	  を実行しなければなりません。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-loader"></a>19.6.5. ブートローダからコンソールを変更するには</h3></div></div></div><p>前セクションは、ブートブロックの設定を変更することでシリアルコンソールを
	セットアップする方法について解説していました。
	このセクションでは、ブートローダへのコマンド入力と環境変数設定で
	コンソールの指定を行なう方法を紹介します。
	ブートローダがブートブロックの後、
	ブートプロセスの第三ステージで呼び出されたとき、
	ブートローダの設定には、ブートブロックの設定がそのまま使われます。
	</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91978320"></a>19.6.5.1. シリアルコンソールをセットアップする</h4></div></div></div><p>ブートローダとカーネルに対して
	  シリアルコンソールを使用するように設定するには、
	  単に <code class="filename">/boot/loader.rc</code>
	  のファイルに、次のような一行を書くだけで実現できます。</p><pre class="programlisting">set console=comconsole</pre><p>これは、前セクションで扱ったブートブロックの設定に
	  全く関係なく機能します。</p><p>上に示した行は、
	  <code class="filename">/boot/loader.rc</code>
	  の最初の行に書き込まなくてはいけません。
	  これはできるだけ早く、ブートメッセージをシリアルコンソールに
	  出力させるために必要なことです。</p><p>同様にして、次のように内蔵コンソールを指定することもできます。</p><pre class="programlisting">set console=vidconsole</pre><p>もし、ブートローダの環境変数
	  <code class="envar">console</code> が設定されていない場合、
	  ブートローダ、そしてその次に起動するカーネルは
	  ブートブロックで指定された <code class="option">-h</code> オプションに
	  示されたコンソールを使用します。
	  </p><p>3.2 以降のバージョンにおいては
	  <code class="filename">/boot/loader.rc</code> ではなく、
	  <code class="filename">/boot/loader.conf.local</code> や
	  <code class="filename">/boot/loader.conf</code>
	  にコンソール指定を書き込みます。
	  その場合、
	  <code class="filename">/boot/loader.rc</code>
	  は次のようになっていなければなりません。
	  </p><pre class="programlisting">include /boot/loader.4th
start</pre><p>それから、<code class="filename">/boot/loader.conf.local</code>
	  を作成して、次の行をそこに追加して下さい。
	</p><pre class="programlisting">console=comconsole</pre><p>か、もしくは</p><pre class="programlisting">console=vidconsole</pre><p>です。詳細については、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a> を参照して下さい。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">その際、ブートローダはオプション指定なし
	  (ブートブロックに <code class="option">-P</code> オプションが指定されたのと等価)になり、
	  キーボードの存在を調べて
	  内蔵コンソールとシリアルコンソールを自動的に選択する機能は働きません。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91994320"></a>19.6.5.2. <code class="filename">sio0</code> 以外のシリアルポートを
	  コンソールとして使うには</h4></div></div></div><p><code class="filename">sio0</code> 以外のシリアルポートを
	  コンソールとして使うには、ブートローダを再コンパイルする必要があります。
	  それには、
	  <a class="xref" href="#serialconsole-com2" title="19.6.4.2. sio0 以外のシリアルポートを コンソールとして使うには">「<code class="filename">sio0</code> 以外のシリアルポートを
	  コンソールとして使うには」</a> に書かれている説明にしたがって下さい。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-caveats"></a>19.6.6. 注意</h3></div></div></div><p>シリアルコンソールというアイデアは、
	グラフィック出力用のハードウェアやキーボードが接続されていない
	専用サーバのセットアップを可能にするためのものです。
	ほとんどのシステムはキーボードなしで起動できますが、
	不幸にも、グラフィックアダプタなしでは起動できないシステムはたくさんあります。
	AMI BIOS を採用しているマシンでは、CMOS 設定の
	`graphics adapter' を `Not Installed'
	にするだけで、
	グラフィックアダプタがなくとも起動できるように設定することができます。</p><p>しかしながら、多くのマシンはこのようなオプションを持っていませんし、
	ディスプレイハードウェアがシステムに存在しないと起動しないように
	なっています。そのようなマシンでは、
	モニタを接続する必要がなかったとしても、
	適当なグラフィックカード(モノクロのジャンク品でも構いません)を
	挿入したままにしておく必要があるでしょう。
	また、AMI BIOS をインストールする、という手もあります。</p></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp91243088" class="footnote"><p><a href="#idp91243088" class="para"><sup class="para">[6] </sup></a>訳注: リバースケーブル、
	  もしくはクロスケーブルと呼ばれることもあります。</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ppp-and-slip"></a>第20章 PPP と SLIP</h2></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#idp92000208">20.1. この章では</a></span></dt><dt><span class="sect1"><a href="#userppp">20.2. ユーザ ppp の利用</a></span></dt><dt><span class="sect1"><a href="#ppp">20.3. カーネル PPP の利用</a></span></dt><dt><span class="sect1"><a href="#pppoe">20.4.  PPP オーバイーサネット (PPPoE) の利用</a></span></dt><dt><span class="sect1"><a href="#slip">20.5. SLIP の利用</a></span></dt></dl></div><p><span class="emphasis"><em>改訂: Jim Mock,
      2000 年 3 月 1 日.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp92000208"></a>20.1. この章では</h2></div></div></div><p>もしあなたがモデムを使ってインターネットに接続したり,
      他の人々に FreeBSD によるインターネットへのダイヤルアップ接続を
      提供しようとしているのでしたら, PPP または SLIP
      接続を選択することができます.</p><p>この節では 3 種類の PPP について説明しています.
      それは <span class="emphasis"><em>ユーザ</em></span>, <span class="emphasis"><em>カーネル</em></span>, そして
      <span class="emphasis"><em>PPPoE</em></span> (PPP オーバイーサネット) です.  また
      SLIP のクライアントとサーバの設定についても記述しています.</p><p>最初に説明するのは, ユーザ PPP です.  ユーザ PPP は FreeBSD
      に 2.0.5-RELEASE の時に, 既に存在していたカーネル実装の PPP
      に加えて導入されました.</p><p>ユーザ PPP とカーネル PPP の主な違いは何かと疑問に思われるかも
      知れませんが, その答えは簡単です.  ユーザ PPP はデーモンとしては実行されず
      必要に応じて実行されるのです.  PPP インタフェイスを組み込んだカーネルは
      必要ではなく, ユーザプロセスとして実行されカーネルとのデータの
      やり取りにはトンネルデバイスドライバ (<code class="filename">tun</code>) を
      使用します.</p><p>この節ではこれ以降ユーザ PPP のことは, <code class="command">pppd</code>
      のような他の PPP ソフトウエアと特に区別する必要がある場合を除いて,
      単に ppp と記述します.  またこの節に記述されているコマンドは
      すべて root で実行されなければなりません.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="userppp"></a>20.2. ユーザ ppp の利用</h2></div></div></div><p><span class="emphasis"><em>原作: Brian Somers, 協力:
        Nik Clayton, Dirk-Willem van Gulik <code class="email">&lt;<a xmlns="" class="email" href="mailto:Dirk.vanGulik@jrc.it">Dirk.vanGulik@jrc.it</a>&gt;</code>,
        Peter Childs <code class="email">&lt;<a xmlns="" class="email" href="mailto:pjchilds@imforei.apana.org.au">pjchilds@imforei.apana.org.au</a>&gt;</code>.</em></span>
    </p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92007120"></a>20.2.1. ユーザ PPP</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92007760"></a>20.2.1.1. 前提条件</h4></div></div></div><p>以下の情報を手に入れておく必要があるでしょう:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>PPP で接続するインターネットサービスプロバイダ (ISP)
              のアカウント.  さらに, 接続済みのモデム
              (またはその他のデバイス) があり,
              プロバイダとの接続が可能なように正しく設定されている.</p></li><li class="listitem"><p>プロバイダの電話番号.</p></li><li class="listitem"><p>ログイン名とパスワード. これは通常の unix
              形式のログイン名と パスワードの組という場合もありますし,
              PPP PAP または CHAP の
              ログイン名とパスワードの組という場合もあります.</p></li><li class="listitem"><p>一つ以上のネームサーバの IP アドレス. 通常,
              プロバイダから IP アドレスを二つ指示されている はずです.
              一つすら提供されていないならば, <code class="filename">ppp.conf</code>
              ファイル中で <code class="command">enable dns</code> コマンドを使って
              <span class="application">ppp</span> にネームサーバを設定するよう
              指示できます.</p></li></ul></div><p>プロバイダからは以下の情報が提供されているはずですが,
          どうしても必要というわけではありません: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>プロバイダのゲートウェイの IP アドレス.
              ゲートウェイとは, あなたがそこに接続をおこなって,
              <span class="emphasis"><em>デフォルトルート</em></span>
              として設定することになるマシンです.
              プロバイダがこのアドレスを明示していなくても, 最初は
              適当に設定しておいて, 接続時にプロバイダの PPP サーバから
              正しいアドレスを教えてもらうことができます.</p><p>このアドレスは, <span class="application">ppp</span> から
              <code class="literal">HISADDR</code>として参照されます.</p></li><li class="listitem"><p>プロバイダのネットマスク設定.
              プロバイダが明示していないとしても,  ネットマスクとして
              <code class="systemitem">255.255.255.0</code>
              を使用しておけば問題ありません.</p></li><li class="listitem"><p>もしプロバイダから固定の IP
              アドレスとホスト名の割り当てを 受けていれば,
              その情報を指定しておくこともできます.
              割り当てを受けていなければ, 接続先から適切な IP
              アドレスを指定してもらいます. </p></li></ul></div><p>もし, 必要な情報が不足していれば, プロバイダに連絡を取って
          確認しておいてください.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92027600"></a>20.2.1.2. ppp 対応カーネルの構築</h4></div></div></div><p>説明でも述べているように, <code class="command">ppp</code>
          はカーネルの <code class="filename">tun</code> デバイスを使います.
          使っているカーネルがどれであっても,
          <code class="filename">tun</code> デバイスを設定しなければなりません.
          FreeBSDに付属しているデフォルトの
          <code class="filename">GENERIC</code> カーネルに合うように
          <code class="filename">tun</code> デバイスは前もって設定されています.
          しかしながら, 自分で修正したカーネルをインストールするのであれば,
          pppが正しく動くよう, カーネルが設定されているか確認しなくてはいけません.</p><p>これを確認するには, カーネルコンパイルディレクトリ
          (<code class="filename">/sys/i386/conf</code> または
          <code class="filename">/sys/pc98/conf</code>) に移動して,
          カーネルコンフィグレーションファイルを調べます.
          以下の行がどこかに含まれている必要があります.</p><pre class="programlisting">pseudo-device tun 1</pre><p>この行がカーネルコンフィグレーションファイルに
          含まれていない場合, この行を追加して
          カーネルの再コンパイルとインストールをおこなう必要があります.
          元々の <code class="filename">GENERIC</code> カーネルは
          標準でこれを含んでいますので,
          カスタムカーネルをインストールしているのではなかったり,
          <code class="filename">/sys</code> ディレクトリが存在しないのであれば,
          何も変更する必要はありません.
          カーネルコンフィグレーションの詳細については,
          <a class="link" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">FreeBSD
            カーネルのコンフィグレーション</a>
          を参照してください.</p><p>以下のコマンドを実行することで,
          現在のカーネルにトンネルデバイスが
          いくつ組み込まれているかを調べることができます:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig -a</code></strong>
tun0: flags=8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500
	inet 200.10.100.1 --&gt; 203.10.100.24 netmask 0xffffffff
tun1: flags=8050&lt;POINTOPOINT,RUNNING,MULTICAST&gt; mtu 576
tun2: flags=8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500
	inet 203.10.100.1 --&gt; 203.10.100.20 netmask 0xffffffff
tun3: flags=8010&lt;POINTOPOINT,MULTICAST&gt; mtu 1500</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 4.0やより最近のリリースでは, すでに使われている
            <code class="filename">tun</code> デバイスしか見つけることが
            できないでしょう. これは, <span class="emphasis"><em>全く</em></span>
            <code class="filename">tun</code> デバイスを見つけることが
            できないかもしれないということです. しかし, もしこうなって
            しまっても, 心配することはありません. そのデバイスは
            <code class="command">ppp</code> が使おうとする時に動的に作られるはず
            だからです. </p></div><p>この例ではトンネルデバイスが四つ存在し, そのうち二つに
          設定がおこなわれ, 使用中であることがわかります.  上の例で
          <code class="literal">RUNNING</code> フラグがオンになっている
          ものがありますが, これは
          そのインタフェースが何かに使用されていることを示している
          だけであるということに注意してください. つまり,
          <code class="literal">RUNNING</code> になっていない
          インタフェースがあったとしても, それはエラーではありません.
        </p><p>トンネルデバイスがカーネルに組み込まれておらず,
          何らかの理由で
          カーネルの再構築ができない場合でも,
          方法がないわけではありません.
          動的にデバイスをロードすることができるはずです.
          詳細については
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=modload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">modload</span>(8)</span></a> や <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lkm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lkm</span>(4)</span></a> など,
          適切なマニュアルを参照してください.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92040784"></a>20.2.1.3. tun デバイスの確認</h4></div></div></div><p>ほとんどのユーザは <code class="filename">tun</code> デバイス
          (<code class="filename">/dev/tun0</code>) が一つあれば充分でしょう.
          より多くのデバイスを使う場合 (すなわち,
          カーネルコンフィグレーション ファイルで <code class="literal">pseudo-device
            tun</code> の行に <code class="literal">1</code>
          以外の数値を指定している場合),  以下で
          <code class="filename">tun0</code> と書かれている部分をすべて,
          あなたが使うデバイスの番号に
          あわせて読みかえてください.</p><p><code class="filename">tun0</code>
          デバイスが正しく作成されていることを確認する最も簡単な方法は,
          それを作り直すことです. そのためには,
          以下のコマンドを実行します:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /dev</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./MAKEDEV tun0</code></strong></pre><p>カーネルに 16 個のトンネルデバイスを組み込んだのであれば,
          <code class="filename">tun0</code> だけでなく他の tun
          デバイスも作成しておく必要があるでしょう:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /dev</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./MAKEDEV tun15</code></strong></pre><p>また, カーネルが正しく設定されているかどうかを調べるために
          以下のコマンドを実行して,
          このような出力が得られることを確認します:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig tun0</code></strong>
tun0: flags=8050&lt;POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500</pre><p>まだ <code class="literal">RUNNING</code>
          フラグがセットされていない場合もあります.
          その時は以下のような出力が得られるでしょう: </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig tun0</code></strong>
tun0: flags=8010&lt;POINTOPOINT,MULTICAST&gt; mtu 1500</pre><p>前述したように, FreeBSD 4.0 以降のリリースでは
          <code class="filename">tun</code> デバイスは要求に応じて
          作られるので, もしそのデバイスがまだ使われていなければ,
          見つけられないかもしれないということを思い出してください.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92057040"></a>20.2.1.4. 名前の解決に関する設定</h4></div></div></div><p>リゾルバ (resolver) はシステムの一部分で, IP
          アドレスとホスト名との 変換をおこないます. IP
          アドレスとホスト名を対応させるためのマップを,
          二つの場所のうちの一つから探すように設定できます.  一つめは
          <code class="filename">/etc/hosts</code> (<code class="command">man 5
            hosts</code>) と呼ばれるファイルです.   二つめはインターネット
          ドメインネームサービス (DNS) と呼ばれる
          分散データベースですが, これに関する議論は
          このドキュメントで扱う範囲を 越えていますので,
          これについての説明はおこないません.</p><p>リゾルバは名前のマッピングを
          おこなうシステムコールの集合体です. ただし
          どこからマッピング情報を見つけるのかは,
          最初に指示しておく必要があります.  これは まず
          <code class="filename">/etc/host.conf</code>
          ファイルを編集することでおこないます.  混乱の元になりますので,
          このファイルを <code class="filename">/etc/hosts.conf </code>と
          呼んだりしては<span class="emphasis"><em>いけません</em></span> (余分な
          <code class="literal">s</code> がついていますね).</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92061008"></a>20.2.1.4.1. <code class="filename">/etc/host.conf</code> ファイルの編集</h5></div></div></div><p>このファイルには 以下の 2 行が (この順番で)
            書かれているはずです:</p><pre class="programlisting">hosts
bind</pre><p>これは, 最初に <code class="filename">/etc/hosts</code>
            ファイルを調べ, そこで目的の名前が 見つけられなかった場合に
            DNS を引きにいくようリゾルバに指示します.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92088272"></a>20.2.1.4.2. /etc/hosts(5) ファイルの編集</h5></div></div></div><p>このファイルはローカルネットワーク上に存在するマシンの
            IP アドレスと ホスト名を含んでいるはずです. 最低でも ppp
            を動作させるマシンのエントリが 含まれている必要があります.
            そのマシンのホスト名が <code class="systemitem">foo.bar.com</code>
            で,  IP アドレスが
            <code class="systemitem">10.0.0.1</code> であると仮定すると,
            <code class="filename">/etc/hosts</code> は
            以下の行を含んでいなければいけません:</p><pre class="programlisting">127.0.0.1	localhost.bar.com	localhost
127.0.0.1	localhost.bar.com.
10.0.0.1	foo.bar.com		foo
10.0.0.1	foo.bar.com.</pre><p>一つめの行は <code class="systemitem">localhost</code>
            を現在のマシンの別名として定義しています.  マシン固有の IP
            アドレスが何であっても, この行の IP アドレスは 常に
            <code class="systemitem">127.0.0.1</code> でなければいけません.
            二つめの行はホスト名 <code class="systemitem">foo.bar.com</code>
            (と, その省略形
            <code class="systemitem">foo</code>) を IP アドレス
            <code class="systemitem">10.0.0.1</code> にマップします.</p><p>もしプロバイダから固定の IP
            アドレスとホスト名を割り当てられて いるのであれば, それを
            <code class="systemitem">10.0.0.1</code>
            エントリのかわりに使ってください.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92099536"></a>20.2.1.4.3. <code class="filename">/etc/resolv.conf</code> ファイルの編集</h5></div></div></div><p><code class="filename">/etc/resolv.conf</code>
            はリゾルバの振舞いを指定します.  もし自前の DNS
            サーバを走らせているのなら, このファイルは空のままに
            しておくこともできます. 通常は,
            以下のように書いておく必要があるでしょう:</p><pre class="programlisting">domain <em class="replaceable"><code>bar.com</code></em>
nameserver <em class="replaceable"><code>x.x.x.x</code></em>
nameserver <em class="replaceable"><code>y.y.y.y</code></em></pre><p><code class="systemitem"><em class="replaceable"><code>x.x.x.x</code></em></code>
            と <code class="systemitem"><em class="replaceable"><code>y.y.y.y</code></em></code>
            はプロバイダから指示されたアドレスで,
            接続するプロバイダが提供しているネームサーバを
            すべて書いてください.  <code class="literal">domain</code>
            に指定するのは このマシンのデフォルトのドメイン名で,
            おそらく 書かなくても問題は無いでしょう.
            このファイルの各エントリの詳細については,
            <code class="filename">resolv.conf</code>
            のマニュアルページを参照してください.</p><p>バージョン 2 以降の ppp を使用している場合には,
            <code class="command">enable dns</code>
            コマンドを使用してネームサーバのアドレスを
            プロバイダに問い合わせるように指示することができます.
            上の指定とは異なるアドレスをプロバイダが指定してきた場合
            (または <code class="filename">/etc/resolv.conf</code>
            でネームサーバが指定されていない場合),  ppp
            はプロバイダが指定したアドレスで
            <code class="filename">resolv.conf</code> を書きかえます. </p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92106576"></a>20.2.1.5. <code class="command">ppp</code> の設定</h4></div></div></div><p>ユーザ ppp と <code class="command">pppd</code> (カーネルレベルの
          PPP 実装) は どちらも <code class="filename">/usr/share/examples/ppp</code>
          ディレクトリに置かれた設定ファイルを使います.
          ここには設定ファイルのサンプルが用意されていて, ユーザ ppp
          の設定を おこなう際に大変参考になりますので,
          削除したりしないでください.</p><p><code class="command">ppp</code> の設定をするためには,
          必要に応じていくつかのファイルを編集する必要が あります.
          書き込む内容は, プロバイダが静的に IP アドレスを割り当てる
          (つまり, 固定の IP アドレスを一つ与えられて, 常にそれを使う)
          か,  または動的に IP アドレスを割り当てる (つまり, PPP
          セッションごとに  IP アドレスが変化する可能性がある)
          かということに ある程度依存します.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-staticIP"></a>20.2.1.5.1. 静的 IP アドレスによる PPP 接続</h5></div></div></div><p>まず <code class="filename">/etc/ppp/ppp.conf</code>
            という設定ファイルを作成する必要があります.
            これは以下の例とほとんど同じようなものになるでしょう.</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="literal">:</code> で終る行は  1 カラム目から始め,
              その他の行はスペースまたはタブで以下の例のように
              段をつける (インデントする) 必要があります.</p></div><pre class="programlisting">1     default:
2       set device /dev/cuaa0
3       set speed 115200
4       set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 5 \"\" ATE1Q0 OK-AT-OK \\dATDT\\TTIMEOUT 40 CONNECT"
5     provider:
6       set phone "(123) 456 7890"
7       set login "TIMEOUT 10 \"\" \"\" gin:--gin: foo word: bar col: ppp"
8       set timeout 300
9       set ifaddr <em class="replaceable"><code>x.x.x.x</code></em> <em class="replaceable"><code>y.y.y.y</code></em> 255.255.255.0 0.0.0.0
10      add default HISADDR
11      enable dns</pre><p>ファイルでは行番号を取り除いておいてください.
            これは解説の際に参照する行を示すためにつけたものです.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Line 1:</span></dt><dd><p>デフォルトエントリを指定します.
                  このエントリ中のコマンドは ppp
                  が起動された際に自動的に実行されます.</p></dd><dt><span class="term">Line 2:</span></dt><dd><p>モデムが接続されているデバイスを指定します.
                  <code class="filename">COM1:</code> は
                  <code class="filename">/dev/cuaa0</code> に,
                  <code class="filename">COM2:</code> は
                  <code class="filename">/dev/cuaa1</code> になります.</p></dd><dt><span class="term">Line 3:</span></dt><dd><p>通信速度 (DTE 速度) を指定します. もし 115200
                  が使えない (最近のモデムなら大抵使えるはずですが)
                  場合には,  かわりに 38400
                  を指定してみてください.</p></dd><dt><span class="term">Line 4:</span></dt><dd><p>ダイアルスクリプトを指定します.  ユーザ PPP は
		  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chat</span>(8)</span></a> 言語に似た, 受信待ち文字列と
                  送信文字列の対からなるスクリプトを使用します.
                  この言語の機能に関しては,
                  マニュアルページを参照してください.</p></dd><dt><span class="term">Line 5:</span></dt><dd><p>接続するプロバイダの名前 <span class="quote">「<span class="quote">provider</span>」</span> を
                  エントリ名として指定します.</p></dd><dt><span class="term">Line 6:</span></dt><dd><p>このプロバイダの電話番号を指定します.
                  複数の電話番号を  <code class="literal">:</code> や
                  <code class="literal">|</code> で区切って指定することができます.
                  これら区切り文字の違いについては, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
                  に 詳しく書かれています.
                  要約すると, 毎回違う番号に かけたいのであれば
                  <code class="literal">:</code> を使います.  常に
                  まず先頭の番号にかけてみて, つながらない時にだけ  2
                  番目以降の番号に かけたいのであれば
                  <code class="literal">|</code> を使います.
                  例に示されているように, 常に電話番号全体を引用符で
                  くくって (クォートして) おきます.</p></dd><dt><span class="term">Line 7:</span></dt><dd><p>ダイアルスクリプトと同様に, ログインスクリプトも
                  chat 言語風の記述をおこないます.  この例は,
                  以下のようなログインセッションを使用する
                  プロバイダのためのものです:</p><pre class="screen">J. Random Provider
login: <em class="replaceable"><code>foo</code></em>
password: <em class="replaceable"><code>bar</code></em>
protocol: ppp</pre><p>このスクリプトは必要に応じて
                  書きかえなければならないでしょう.
                  初めてスクリプトを書く時には, 予想した通りに
                  処理が進んだかどうかを確認するため, <span class="quote">「<span class="quote">chat</span>」</span>
                  ログを とるようにしておいた方が良いでしょう. </p><p>PAP や CHAP を使用する場合には,
                  ここでログインすることは  ありませんから,
                  ログイン文字列は空白のままにしておくべきです.
                  詳細については <a class="link" href="#userppp-PAPnCHAP" title="20.2.1.5.5. PAP および CHAP による認証">PAP
                    および CHAP
                    による認証</a>を参照してください.</p></dd><dt><span class="term">Line 8:</span></dt><dd><p>デフォルトの接続タイムアウト時間を (秒数で)
                  指定します.  この例では, 300 秒間
                  通信がおこなわれなければ
                  自動的に接続を切るように指定しています.
                  タイムアウトさせたくない場合には, この値を 0
                  に設定します.</p></dd><dt><span class="term">Line 9:</span></dt><dd><p>インタフェースのアドレスを指定します. 文字列
                  <em class="replaceable"><code>x.x.x.x</code></em> は
                  プロバイダに割り当てられた IP
                  アドレスで置きかえてください.  文字列
                  <em class="replaceable"><code>y.y.y.y</code></em>
                  はプロバイダから指示されたゲートウェイ
                  (接続先となるマシン) の IP
                  アドレスで置きかえてください.
                  プロバイダがゲートウェイのアドレスを
                  指示していない場合は,  <code class="systemitem">10.0.0.2/0</code>
                  を使用しておいてください. もし <span class="quote">「<span class="quote">仮の</span>」</span>
                  アドレスを使用する必要がある場合には,
                  <a class="link" href="#userppp-dynamicIP" title="20.2.1.5.2. 動的 IP アドレスによる PPP 接続">動的 IP アドレスによる
                    PPP 接続</a>に関する指示に従って,
                  <code class="filename">/etc/ppp/ppp.linkup</code>
                  にエントリを作成していることを 確認してください.
                  この行が省略されている場合, ppp を
                  <code class="option">-auto</code>
                  モードで動作させることはできません. </p></dd><dt><span class="term">Line 10:</span></dt><dd><p>プロバイダのゲートウェイへの経路を
                  デフォルトルートとして 追加します. 特殊文字列
                  <code class="literal">HISADDR</code> は, 9 行目で指定された
                  ゲートウェイのアドレスで置きかえられます.
                  <code class="literal">HISADDR</code> は 9
                  行目までは初期化されていませんので,
                  その行よりも後でしか使えないことに
                  注意してください.</p></dd><dt><span class="term">Line 11:</span></dt><dd><p>ネームサーバのアドレスが正しいか
                  どうかを確認するため,
                  プロバイダに問い合わせをおこなうよう ppp に指示します.
                  プロバイダがこの機能をサポートしていれば, ppp は
                  <code class="filename">/etc/resolv.conf</code>
                  のネームサーバエントリを
                  正しいアドレスに更新することができます. </p></dd></dl></div><p>静的な IP アドレスを持っていて,
            接続が完了する前にルーティングテーブルの
            エントリが正しく設定されているのであれば,
            <code class="filename">ppp.linkup</code> に
            エントリを追加する必要はありません.  しかし,
            この場合でもエントリを追加して, 接続が完了した時点で
            プログラムを呼び出したいことがあるかもしれません.
            これについては後ほど sendmail を例として説明します.</p><p>これらの設定ファイルのサンプルが
            <code class="filename">/usr/share/examples/ppp</code> ディレクトリに
            置かれています.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-dynamicIP"></a>20.2.1.5.2. 動的 IP アドレスによる PPP 接続</h5></div></div></div><p>プロバイダが静的な IP
            アドレスの割り当てをおこなっていない場合,
            <code class="command">ppp</code> が相手側のホスト (ゲートウェイ)
            と交渉して, こちら側と相手側のアドレスを
            決めるように設定することができます.  これは,
            起動時には<span class="quote">「<span class="quote">仮の</span>」</span>アドレスを使っておいて,
            接続後に IP コンフィグレーション プロトコル (IPCP)
            を使用して <code class="command">ppp</code> が IP
            アドレスを正しく設定できるようにすることで実現されます.
            <a class="link" href="#userppp-staticIP" title="20.2.1.5.1. 静的 IP アドレスによる PPP 接続">静的 IP アドレスによる PPP
              接続</a>に 以下の変更を加える以外は,
            <code class="filename">ppp.conf</code> の設定は同じです:</p><pre class="programlisting">9       set ifaddr 10.0.0.1/0 10.0.0.2/0 255.255.255.0</pre><p>繰り返しますが, 行番号は取り除いておいてください.
            これは解説の際に参照する行を示すためにつけたものです.  なお,
            少なくともスペース 1 個分の段づけ (インデント)
            が必要です.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Line 9:</span></dt><dd><p><code class="literal">/</code> 文字の後ろの数字は,
                  アドレス交渉の際に固定しておきたい ビットの数です.
                  場合によっては, もっと適切な IP アドレスを
                  指定しておきたいこともあるかもしれませんが,
                  ほとんどの場合には 上の例の通りで問題ありません.
                </p><p>最後の引数 (<code class="literal">0.0.0.0</code>) は,
                  アドレスの交渉の際に <code class="systemitem">10.0.0.1</code>
                  ではなく <code class="systemitem">0.0.0.0</code> を使用するよう ppp
                  に指示するためのものです.  <code class="command">set
                    ifaddr</code> コマンドの最初の引数として
                  <code class="literal">0.0.0.0</code> を指定してはいけません.
                  さもないと, <code class="option">-auto</code>
                  モードで動作させる際に
                  初期経路を設定することができなくなります. </p></dd></dl></div><p>バージョン 1.X の ppp を使用する場合,
            <code class="filename">/etc/ppp/ppp.linkup</code>
            にもエントリを作成しておく必要があります.
            <code class="filename">ppp.linkup</code>
            は接続が確立された後に使用されます. この時点では,
            <code class="command">ppp</code> は<span class="emphasis"><em>実際に</em></span>どの IP
            アドレスを使うべきなのか わかっているはずです.
            以下のエントリは存在する仮の経路を削除し,
            正しい経路を作成します:</p><pre class="programlisting">1     provider:
2       delete ALL
3       add default HISADDR</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">Line 1:</span></dt><dd><p>接続を確立する際に, <code class="command">ppp</code>
                  は以下のルールに従って
                  <code class="filename">ppp.linkup</code>
                  のエントリを検索します:  まず
                  <code class="filename">ppp.conf</code>
                  で使用されたのと同じラベルを探します.
                  もし見つからなければ, ゲートウェイの IP
                  アドレスのエントリを 探します. このエントリは 4
                  オクテットの IP アドレス形式の ラベルです. それでも
                  まだエントリが見つからなければ,
                  <code class="literal">MYADDR</code> エントリを探します.</p></dd><dt><span class="term">Line 2:</span></dt><dd><p>この行は, 使用する tun
                  インタフェースに関する既存の経路を
                  (ダイレクトルートのエントリを除き) すべて削除するよう
                  <code class="command">ppp</code> に指示します.</p></dd><dt><span class="term">Line 3:</span></dt><dd><p>この行は <code class="literal">HISADDR</code>
                  への経路をデフォルトルートとして 追加するように ppp
                  に指示します. <code class="literal">HISADDR</code> は IPCP で
                  決定されたゲートウェイの IP
                  アドレスで置きかえられます.</p></dd></dl></div><p>詳細なサンプルについては,
            <code class="filename">/usr/share/examples/ppp/ppp.conf.sample</code>
            ファイル中のpmdemand エントリと
            <code class="filename">/usr/share/examples/ppp/ppp.linkup.sample</code>
            を参照してください.</p><p>バージョン 2 の ppp から <span class="quote">「<span class="quote">sticky routes</span>」</span>
            が導入されました.  <code class="literal">MYADDR</code> や
            <code class="literal">HISADDR</code> を含む <code class="literal">add</code>
            コマンドと  <code class="literal">delete</code> コマンドを記憶して,
            <code class="literal">MYADDR</code> や <code class="literal">HISADDR</code> の
            アドレスが変化した際には経路の再設定をおこないます.
            したがって, これらのコマンドを
            <code class="filename">ppp.linkup</code> に
            繰り返し記述する必要は無くなりました. </p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92221392"></a>20.2.1.5.3. かかってきた電話を <code class="command">ppp</code>
            で受けるには</h5></div></div></div><p>かかってきた電話を <code class="command">ppp</code>
            が受けるように設定する際に,  そのマシンが LAN
            に接続されているのであれば,  パケットを LAN
            に転送するかどうかを決定する必要があります.
            転送をおこなう場合には, その LAN のサブネットから IP
            アドレスを ppp クライアントに割り当て,
            以下のコマンドを指定するのが良いでしょう. </p><pre class="programlisting">gateway_enable=YES</pre><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92223568"></a>20.2.1.5.3.1. どの getty を使いますか?</h6></div></div></div><p>getty
              でダイアルアップサービスをおこなう場合の優れた解説が
              <a class="link" href="#dialup" title="19.4. ダイアルインサービス">FreeBSD
                でダイアルアップサービスをおこなうための設定
              </a>にあります.</p><p><code class="command">getty</code> に代わるものとしては,
              <a class="link" href="http://www.leo.org/~doering/mgetty/index.html" target="_top">
                mgetty</a> があります. これは
              <code class="command">getty</code> をより柔軟にしたもので,
              ダイアルアップ回線での使用を意図して
              設計されています.</p><p><code class="command">mgetty</code> を使う場合の利点は,
              <code class="command">mgetty</code>
              が積極的にモデムと<span class="emphasis"><em>通信する</em></span>
              ということです. つまり, もし
              <code class="filename">/etc/ttys</code> でポートを閉じている場合,
              モデムは電話をとらなくなります.</p><p>最近のバージョンの <code class="command">mgetty</code> (0.99beta
              以降) では, PPP ストリームの
              自動検出もサポートされています. これにより,
              クライアント側で スクリプトを準備しなくてもサーバに
              アクセスすることができます.</p><p><code class="command">mgetty</code> に関する,
              より詳細な情報については
              <a class="link" href="#userppp-mgetty" title="20.2.1.5.4.1. mgetty と AutoPPP">Mgetty と AutoPPP</a>
              を参照してください.</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92255184"></a>20.2.1.5.3.2. ppp の実行許可</h6></div></div></div><p><code class="command">ppp</code> は通常, ID 0 のユーザ (root)
              として動作しなければいけませんが,  以下で説明するように,
              <code class="command">ppp</code>
              を通常のユーザとしてサーバモードで実行させたい 場合には,
              そのユーザを <code class="filename">/etc/group</code> の
              <code class="systemitem">network</code> グループに 追加して, ppp
              を実行する許可を与えておかなければいけません.</p><p>また, そのユーザが設定ファイル内の目的のエントリに
              アクセスできるように,  以下のように
              <code class="command">allow</code>
              コマンドで許可を与えておく必要があります: </p><pre class="programlisting">allow users fred mary</pre><p>このコマンドがデフォルトエントリに
              書かれている場合には, 指定されたユーザは
              すべてのエントリをアクセスできるようになります.</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92263632"></a>20.2.1.5.3.3. 動的 IP ユーザのための ppp シェルの設定</h6></div></div></div><p><code class="filename">/etc/ppp/ppp-shell</code> という名前で,
              以下のような内容のファイルを 作成します:</p><pre class="programlisting">#!/bin/sh
IDENT=`echo $0 | sed -e 's/^.*-\(.*\)$/\1/'`
CALLEDAS="$IDENT"
TTY=`tty`

if [ x$IDENT = xdialup ]; then
	IDENT=`basename $TTY`
fi

echo "PPP for $CALLEDAS on $TTY"
echo "Starting PPP for $IDENT"

exec /usr/sbin/ppp -direct $IDENT</pre><p>このスクリプトには実行可能属性をつけておきます.  次に,
              以下のコマンドを実行し, <code class="filename">ppp-dialup</code>
              という名前で このスクリプトへのリンクを作成します:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s ppp-shell /etc/ppp/ppp-dialup</code></strong></pre><p>すべてのダイアルアップ ppp
              ユーザのログイン<span class="emphasis"><em>シェル</em></span>として
              このスクリプトを使用します. 以下は
              <code class="systemitem">pchilds</code> というユーザ名の
              ダイアルアップユーザを <code class="filename">/etc/password</code>
              へ登録した場合の例です.
              (パスワードファイルを直接エディタで編集したりせず,
              <code class="command">vipw</code> を使ってください)</p><pre class="programlisting">pchilds:*:1011:300:Peter Childs PPP:/home/ppp:/etc/ppp/ppp-dialup</pre><p>任意のユーザが読むことのできる,
              <code class="filename">/home/ppp</code> ディレクトリを 作成します.
              <code class="filename">/etc/motd</code>
              が表示されないようにするため,
              このディレクトリには以下のように大きさが 0
              バイトのファイルを 作成しておきます.</p><pre class="screen">-r--r--r--   1 root     wheel           0 May 27 02:23 .hushlogin
-r--r--r--   1 root     wheel           0 May 27 02:22 .rhosts</pre></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92271184"></a>20.2.1.5.3.4. 静的 IP ユーザのための PPP シェルの設定</h6></div></div></div><p>上記と同じように <code class="filename">ppp-shell</code>
              ファイルを作成し,  静的な IP
              アドレスを割り当てるアカウントそれぞれについて
              <code class="filename">ppp-shell</code>
              へのシンボリックリンクを作成します.</p><p>例えば, クラス C ネットワークの経路制御を必要とする,
              三人のダイアルアップユーザ <code class="systemitem">fred</code>,
              <code class="systemitem">sam</code>, <code class="systemitem">mary</code>
              がいるとすると,
              以下のコマンドを実行することになります:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-fred</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-sam</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-mary</code></strong></pre><p>これらのユーザのダイアルアップアカウントでは,
              上で作成した それぞれのシンボリックリンクを
              ログインシェルとして設定しておきます.  (つまり, ユーザ
              <code class="systemitem">mary</code> のログインシェルは
              <code class="filename">/etc/ppp/ppp-mary</code> に
              なります).</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92278736"></a>20.2.1.5.3.5. 動的 IP ユーザのための ppp.conf の設定</h6></div></div></div><p><code class="filename">/etc/ppp/ppp.conf</code> ファイルは,
              大体以下のような内容になるでしょう:</p><pre class="programlisting">default:
  set debug phase lcp chat
  set timeout 0

ttyd0:
  set ifaddr 203.14.100.1 203.14.100.20 255.255.255.255
  enable proxy

ttyd1:
  set ifaddr 203.14.100.1 203.14.100.21 255.255.255.255
  enable proxy</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">上の例のように段をつける (インデントする)
                必要があることに注意してください.</p></div><p><code class="literal">default:</code>
              エントリはセッションごとにロードされます.
              <code class="filename">/etc/ttys</code>
              で有効にしてある各ダイアルアップ回線ごとに一つ,  上記の
              <code class="literal">ttyd0:</code> のようなエントリを作成します.
              各行の相手側アドレスとして, それぞれ別の IP アドレスを
              動的 IP ユーザのための IP
              アドレスのプールから割り当てておく必要があります.</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92303696"></a>20.2.1.5.3.6. 静的 IP ユーザのための <code class="filename">ppp.conf</code>
              の設定</h6></div></div></div><p>上のサンプルの
              <code class="filename">/usr/share/examples/ppp/ppp.conf</code>
              の内容に加えて,  静的に IP
              を割り当てられたダイアルアップユーザ
              それぞれのためのエントリを追加する必要があります.
              ここでも <code class="systemitem">fred</code>,
              <code class="systemitem">sam</code>, <code class="systemitem">mary</code>
              の例を使うことにしましょう.</p><pre class="programlisting">fred:
  set ifaddr 203.14.100.1 203.14.101.1 255.255.255.255

sam:
  set ifaddr 203.14.100.1 203.14.102.1 255.255.255.255

mary:
  set ifaddr 203.14.100.1 203.14.103.1 255.255.255.255</pre><p>必要であれば, それぞれの静的 IP
              ユーザに対する経路制御情報も
              <code class="filename">/etc/ppp/ppp.linkup</code>
              ファイルに書いておくべきでしょう.
              以下の例ではクライアントの PPP リンクを経由する,  クラス C
              の <code class="systemitem">203.14.101.0</code>
              ネットワークへの経路を追加しています.</p><pre class="programlisting">fred:
  add 203.14.101.0 netmask 255.255.255.0 HISADDR

sam:
  add 203.14.102.0 netmask 255.255.255.0 HISADDR

mary:
  add 203.14.103.0 netmask 255.255.255.0 HISADDR</pre></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92309584"></a>20.2.1.5.4. <code class="command">mgetty</code>, AutoPPP,
	    マイクロソフト拡張の詳細</h5></div></div></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-mgetty"></a>20.2.1.5.4.1. <code class="command">mgetty</code> と AutoPPP</h6></div></div></div><p><code class="literal">AUTO_PPP</code>
	      オプションつきでコンパイルした <code class="command">mgetty</code>
	      を使えば, <code class="command">mgetty</code> が PPP 接続の LCP
	      フェーズを検出して, 自動的に PPP シェルを起動するように
	      設定することができます.  しかし この場合, デフォルトの
	      login/password シーケンスは発生しないので,
	      ユーザの認証は PAP または CHAP
	      を使っておこなう必要があります.</p><p>このセクションでは, ユーザ (あなた) が問題なく
	      <code class="literal">AUTO_PPP</code> オプションつきの
	      <code class="command">mgetty</code> (v0.99beta またはそれ以降)
	      の設定,  コンパイル,
	      インストールができているものと仮定しています.</p><p><code class="filename">
		/usr/local/etc/mgetty+sendfax/login.config</code>
	      ファイルが
	      以下の行を含んでいることを確認してください:</p><pre class="programlisting">/AutoPPP/ -     -       /etc/ppp/ppp-pap-dialup</pre><p>これにより, PPP 接続を検出したら
	      <code class="command">mgetty</code> が
	      <code class="filename">ppp-pap-dialup</code>
	      スクリプトを実行するようになります.</p><p><code class="filename">/etc/ppp/ppp-pap-dialup</code>
	      という名前で, 以下のような内容のファイルを 作成します
	      (このファイルには実行可能属性を
	      つけておく必要があります):</p><pre class="programlisting">#!/bin/sh
exec /usr/sbin/ppp -direct pap</pre><p>さらに, かかってきた電話すべてを自分で扱うエントリを
	      <code class="filename">/etc/ppp/ppp.conf</code>
	      に作成します.</p><pre class="programlisting">pap:
  enable pap
  set ifaddr 203.14.100.1 203.14.100.20-203.14.100.40
  enable proxy</pre><p>この方法でログインする それぞれのユーザは, PAP
	      によるユーザ認証を おこなうために
	      <code class="filename">/etc/ppp/ppp.secret</code>
	      ファイルにユーザ名とパスワードを 書いておくか, または
	      <code class="filename">/etc/password</code>
	      ファイルを使うように,</p><pre class="programlisting">enable passwdauth</pre><p>ユーザに静的な IP アドレスを割り当てる場合には,
	      そのアドレスを  <code class="filename">/etc/ppp/ppp.secret</code>
	      の第三引数として指定することができます.
	      サンプルについては,
	      <code class="filename">/usr/share/examples/ppp/ppp.secret.sample</code>
	      を参照してください.</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92321744"></a>20.2.1.5.4.2. マイクロソフト拡張</h6></div></div></div><p>クライアントからの要求に応じて, ppp が DNS や
	      NetBIOS ネームサーバの アドレスを通知するように
	      設定をおこなうこともできます.</p><p>バージョン 1.X の ppp で
	      これらの拡張機能を有効にするには, 以下の行を
	      <code class="filename">/etc/ppp/ppp.conf</code>
	      の適切なセクションに追加する必要があるでしょう. </p><pre class="programlisting">enable msext
set ns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</pre><p>バージョン 2 以降の ppp では,
	      以下のようになります:</p><pre class="programlisting">accept dns
set dns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</pre><p>これにより, クライアントはプライマリと
	      セカンダリのネームサーバアドレス および NetBIOS
	      ネームサーバホストを知ることができます.</p><p>バージョン 2 以降の ppp では, <code class="literal">set
		dns</code> の行を省略した場合には
	      <code class="filename">/etc/resolv.conf</code>
	      に書かれているネームサーバのアドレスを使用します.
	    </p></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-PAPnCHAP"></a>20.2.1.5.5. PAP および CHAP による認証</h5></div></div></div><p>いくつかのプロバイダでは, PAP または CHAP
            のいずれかの認証メカニズムを
            使用して接続時の認証をおこなうように
            システムを設定しています.  この場合, プロバイダは接続の際に
            <code class="prompt">login:</code> プロンプトを送信せず,  最初から PPP
            で通信を始めようとするでしょう.</p><p>PAP ではパスワードがそのまま送られてしまうため, CHAP
            に比べると安全性が 低くなりますが,
            このパスワードはシリアル回線のみを通して送られます.
            そのため,
            クラッカーが <span class="quote">「<span class="quote">盗み聞き</span>」</span> する余地は多くないので,
            通常ここの セキュリティは問題にはなりません.</p><p><a class="link" href="#userppp-staticIP" title="20.2.1.5.1. 静的 IP アドレスによる PPP 接続">静的 IP アドレスによる
              PPP 接続</a>または
            <a class="link" href="#userppp-dynamicIP" title="20.2.1.5.2. 動的 IP アドレスによる PPP 接続">動的 IP アドレスによる PPP
              接続</a>の セクションに戻って,
            以下の変更をおこないます:</p><pre class="programlisting">7       set login
…
12      set authname <em class="replaceable"><code>MyUserName</code></em>
13      set authkey <em class="replaceable"><code>MyPassword</code></em></pre><p>これまでと同様に, 行番号は取り除いておいてください.
            これは解説の際に参照する行を示すためにつけたものです.  なお,
            少なくともスペース 1 個分の段づけ (インデント)
            が必要です.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Line 7:</span></dt><dd><p>PAP または CHAP を使用する場合, 通常
                  プロバイダはサーバへの ログインを必要としません.
                  そのため, <span class="quote">「<span class="quote">set login</span>」</span> 文字列を
                  無効にしておかなければいけません.</p></dd><dt><span class="term">Line 12:</span></dt><dd><p>この行は PAP/CHAP ユーザ名を指定します.
                  <em class="replaceable"><code>MyUserName</code></em> に
                  正しい値を入れておく必要があります.</p></dd><dt><span class="term">Line 13:</span></dt><dd><p>この行は PAP/CHAP パスワードを指定します.
                  <em class="replaceable"><code>MyPassword</code></em> に
                  正しい値を入れておく必要があります.
                  PAP と CHAP はデフォルトで両方とも
                  受け付けられるようになって
                  いますが, PAP や CHAP を使用するという
                  意思を明示するために,

                  </p><pre class="programlisting">15      accept PAP</pre><p>

                  または

                  </p><pre class="programlisting">15      accept CHAP</pre><p>

                  という行を追加しておくのも良いでしょう.</p></dd></dl></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92347088"></a>20.2.1.5.6. 動作中の ppp の設定変更</h5></div></div></div><p>適切な診断ポートが設定されている場合には,
            バックグラウンドで動作中の  <code class="command">ppp</code>
            プログラムと通信することができます.
            この設定をおこなうためには,
            以下の行を設定ファイルに追加しておきます: </p><pre class="programlisting">set server /var/run/ppp-tun%d DiagnosticPassword 0177</pre><p>これにより, ppp は指定された unix ドメインの
            ソケットをモニタして,
            クライアントから正しいパスワードを受け取った後に
            アクセスを許可します.  このソケット名に含まれる
            <code class="literal">%d</code> は, この ppp が使用している
            <code class="filename">tun</code>
            デバイスの デバイス番号で置きかえられます.</p><p>一旦ソケットの設定が終了したら, スクリプト中で
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pppctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pppctl</span>(8)</span></a> を 使用して, 動作中の ppp
            を操作することができるでしょう.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-final"></a>20.2.1.6. システムの最終設定</h4></div></div></div><p>これで <code class="command">ppp</code> の設定は終りました.  しかし
          <code class="command">ppp</code> を動かす前に,
          まだ少し必要なことがあります.  それらの設定は, すべて
          <code class="filename">/etc/rc.conf</code> ファイルを
          編集することでおこないます.  (このファイルは以前には
          <code class="filename">/etc/sysconfig</code> と呼ばれていました)</p><p>このファイルを上から順に設定していきます.  まずは
          <code class="literal">hostname=</code>
          の行が設定されていることを確認します.
          例えば以下のように:</p><pre class="programlisting">hostname="foo.bar.com"</pre><p>もしプロバイダが静的な IP
          アドレスとホスト名を割り当てているのなら,
          ホスト名としてそれを使うのが おそらくベストでしょう.</p><p>次に <code class="literal">network_interfaces</code> 変数を調べます.
          必要に応じて (on demand)
          プロバイダにダイアルするようにシステムを設定したい場合には,
          <code class="filename">tun0</code>
          デバイスがこのリストに追加されていることを確認しておきます.
          それ以外の場合には, tun0
          デバイスをリストから削除しておきます.</p><pre class="programlisting">network_interfaces="lo0 tun0" ifconfig_tun0=</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="literal">ifconfig_tun0</code> 変数が空で,
            <code class="filename">/etc/start_if.tun0</code> という名前の
            ファイルが作成されていなければなりません.
            このファイルの内容は以下のようになります.</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">ppp -auto mysystem</pre><p xmlns="http://www.w3.org/1999/xhtml">このスクリプトはネットワークの設定時に実行され,  ppp
            デーモンを自動モードで立ち上げます.  このマシンがもし LAN
            のゲートウェイであれば,  <code class="option">-alias</code>
            スイッチも使用したいと思うかもしれません.  詳細に関しては,
            マニュアルページを参照してください.</p></div><p>以下のようにルータプログラムを <code class="literal">NO</code>
          に設定します.</p><pre class="programlisting">router_enable="NO"</pre><p><code class="command">routed</code> は, <code class="command">ppp</code>
          が作成したデフォルトのルーティングテーブル
          エントリを削除してしまう場合がありますので,
          (初期設定では起動されるようになっている)
          <code class="command">routed</code> デーモンが
          起動されないようにしておくことが重要です.</p><p><code class="literal">sendmail_flags</code> 行が <code class="option">-q</code>
          オプションを含まないように 設定しておいた方がよいでしょう.
          さもないと, <code class="command">sendmail</code> が
          アドレスを調べようとして発信をおこなってしまう場合があります.
          以下のような設定で良いでしょう:</p><pre class="programlisting">sendmail_flags="-bd"</pre><p>この結果, PPP リンクを立ち上げた時には
          いつでも以下のコマンドを実行して, キューにたまっているメールを
          <code class="command">sendmail</code>
          に送信させる作業が必要になるでしょう.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/sbin/sendmail -q</code></strong></pre><p><code class="filename">ppp.linkup</code> 中で
          <code class="command">!bg</code> コマンドを使用することで,
          これを自動的に おこなうこともできます:</p><pre class="programlisting">1     provider:
2       delete ALL
3       add 0 0 HISADDR
4       !bg sendmail -bd -q30m</pre><p>こうするのが嫌であれば, SMTP
          トラフィックをブロックするように <span class="quote">「<span class="quote">dfilter</span>」</span>
          を設定しておくこともできます.
          詳細についてはサンプルファイルを参照してください.</p><p>後はマシンをリブートするだけです.</p><p>リブートが終ったら,</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp</code></strong></pre><p>コマンドを実行し, 続いて PPP セッションを開始させるために
          <code class="command">dial provider</code> と入力することもできますし,
          (<code class="filename">start_if.tun0</code>
          スクリプトを作成していない場合に),
          外部へのトラフィックが発生した時に, <code class="command">ppp</code>
          が自動的に セッションを確立してくれるようにしたいのであれば,
          以下のコマンドを実行することもできます.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp -auto provider</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92385232"></a>20.2.1.7. まとめ</h4></div></div></div><p>要約すると, 初めて ppp を設定する際には,
          以下のステップが不可欠です:</p><p>クライアント側:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>カーネルに <code class="filename">tun</code>
              デバイスが組み込まれていることを確認.</p></li><li class="step"><p><code class="filename">/dev</code> ディレクトリに
              <code class="filename">tunX</code>
              デバイスファイルが 存在することを確認.</p></li><li class="step"><p><code class="filename">/etc/ppp/ppp.conf</code>
              にエントリを作成.  ほとんどのプロバイダでは,
              <code class="filename">pmdemand</code> の例で充分でしょう.</p></li><li class="step"><p>動的 IP アドレスを使用するなら,
              <code class="filename">/etc/ppp/ppp.linkup</code> に
              エントリを作成.</p></li><li class="step"><p><code class="filename">/etc/rc.conf</code> (または
              <code class="filename">sysconfig</code>) ファイルを更新.</p></li><li class="step"><p>必要に応じてダイヤル (demand dialing)
              したいのであれば,  <code class="filename">start_if.tun0</code>
              スクリプトを作成.</p></li></ol></div><p>サーバ側:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>カーネルに <code class="filename">tun</code>
              デバイスが組み込まれていることを確認.</p></li><li class="step"><p><code class="filename">/dev</code> ディレクトリに
              <code class="filename">tunX</code>
              デバイスファイルが 存在することを確認.</p></li><li class="step"><p>(<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a> コマンドを使って)
              <code class="filename">/etc/passwd</code> にエントリを作成.</p></li><li class="step"><p>このユーザのホームディレクトリに <code class="command">ppp -direct
                direct-server</code>
              か何かを実行するプロファイルを作成.</p></li><li class="step"><p><code class="filename">/etc/ppp/ppp.conf</code>
              にエントリを作成.  <code class="filename">direct-server</code>
              の例で充分でしょう.</p></li><li class="step"><p><code class="filename">/etc/ppp/ppp.linkup</code>
              にエントリを作成.</p></li><li class="step"><p><code class="filename">/etc/rc.conf</code>ファイルを更新.</p></li></ol></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ppp"></a>20.3. カーネル PPP の利用</h2></div></div></div><p><span class="emphasis"><em>原作: Gennady B. Sorokopud <code class="email">&lt;<a xmlns="" class="email" href="mailto:gena@NetVision.net.il">gena@NetVision.net.il</a>&gt;</code>, Robert Huff <code class="email">&lt;<a xmlns="" class="email" href="mailto:rhuff@cybercom.net">rhuff@cybercom.net</a>&gt;</code>.</em></span></p><p><span class="emphasis"><em>訳: 石墨 紀孝 <code class="email">&lt;<a xmlns="" class="email" href="mailto:graphite@jp.FreeBSD.org">graphite@jp.FreeBSD.org</a>&gt;</code>.
	1996 年 9 月 6 日.</em></span></p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92416720"></a>20.3.1. カーネル PPP の設定</h3></div></div></div><p>PPP の設定を始める前に, <code class="command">pppd</code> が
        <code class="filename">/usr/sbin</code> にあり, また
        <code class="filename">/etc/ppp</code> という
        ディレクトリが存在することを確認してください.</p><p><code class="command">pppd</code> はふたつのモードで動作します.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><span class="quote">「<span class="quote">クライアント</span>」</span> モード.
            シリアル接続やモデムを利用して, そのマシンを
            外部のネットワークに PPP 接続したい場合に用います.</p></li><li class="listitem"><p><span class="quote">「<span class="quote">サーバ</span>」</span> モード.
            そのマシンがネットワーク上にあるときに, PPP を使って
            ほかのコンピュータを接続する際に用います.</p></li></ol></div><p>どちらの場合でも, オプションファイルを設定する必要があります
        (<code class="filename">/etc/ppp/options</code> または, そのマシン上で
        PPP を使用する人が 複数いる場合には
        <code class="filename">~/.ppprc</code>).</p><p>また, ダイヤルとリモートホストへの接続をおこなうために,
        シリアル接続やモデムを 操作する,
        なんらかのソフトウェアが必要です (kermit
        が適しているでしょう).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92423760"></a>20.3.2. PPP クライアントとしての動作</h3></div></div></div><p>わたしは, CISCO ターミナルサーバの PPP 回線に接続するために,
	下記のような <code class="filename">/etc/ppp/options</code>
	を使用しています.</p><pre class="programlisting">crtscts         # enable hardware flow control
modem           # modem control line
noipdefault     # remote PPP server must supply your IP address.
                # if the remote host doesn't send your IP during IPCP
                # negotiation , remove this option
passive         # wait for LCP packets
domain ppp.foo.com      # put your domain name here

:&lt;remote_ip&gt;    # put the IP of remote PPP host here
                # it will be used to route packets via PPP link
                # if you didn't specified the noipdefault option
                # change this line to &lt;local_ip&gt;:&lt;remote_ip&gt;

defaultroute    # put this if you want that PPP server will be your
                # default router</pre><p>接続方法:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>kermit (またはその他のモデム操作プログラム)
	    を使ってリモートホストに ダイヤルし, 接続してください.
	    そして, あなたのユーザ名とパスワード (必要 であれば,
	    その他にもリモートホストで PPP を有効にするための操作)
	    を入力 します.</p></li><li class="step"><p>kermit を抜けてください. (回線を切断せずに)</p></li><li class="step"><p>下記のように入力します: </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/src/usr.sbin/pppd.new/pppd /dev/tty01 19200</code></strong></pre><p>(通信速度とデバイス名には,
	    あなたの環境に適したものを入れてください)</p></li></ol></div><p>これでこのコンピュータは PPP で接続されました. もし,
	なんらかの理由で 接続に失敗したならば,
	<code class="filename">/etc/ppp/options</code> ファイルに
	<code class="option">debug</code>  オプションを追加して,
	問題点を突き止めるために, コンソールに表示される
	メッセージを調べてください.</p><p>下記の <code class="filename">/etc/ppp/pppup</code> スクリプトは,
	上記の作業を すべて自動的におこないます:</p><pre class="programlisting">#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.dial
pppd /dev/tty01 19200</pre><p><code class="filename">/etc/ppp/kermit.dial</code> は kermit
	用のスクリプトで, ダイヤルして,
	リモートホストでの認証に必要なすべての処理をおこないます.
	(そのようなスクリプトの例は
	この文書の終わりに添付してあります)</p><p>PPP 接続を切断するには, 下記のような
	<code class="filename">/etc/ppp/pppdown</code> スクリプトを
	使用します:</p><pre class="programlisting">#!/bin/sh
pid=`ps ax |grep pppd |grep -v grep|awk '{print $1;}'`
if [ X${pid} != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill -TERM ${pid}
fi

ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

/sbin/ifconfig ppp0 down
/sbin/ifconfig ppp0 delete
kermit -y /etc/ppp/kermit.hup
/etc/ppp/ppptest</pre><p>PPP が動作中かどうかを調べます
	(<code class="filename">/usr/etc/ppp/ppptest</code>):</p><pre class="programlisting">#!/bin/sh
pid=`ps ax| grep pppd |grep -v grep|awk '{print $1;}'`
if [ X${pid} != "X" ] ; then
        echo 'pppd running: PID=' ${pid-NONE}
else
        echo 'No pppd running.'
fi
set -x
netstat -n -I ppp0
ifconfig ppp0</pre><p>モデム回線を切断します
	(<code class="filename">/etc/ppp/kermit.hup</code>):</p><pre class="programlisting">set line /dev/tty01	; put your modem device here
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
echo \13
exit</pre><p>次は <code class="command">kermit</code> の代わりに
	<code class="command">chat</code> を使う方法です.</p><p><span class="emphasis"><em>原作: Robert Huff <code class="email">&lt;<a xmlns="" class="email" href="mailto:rhuff@cybercom.net">rhuff@cybercom.net</a>&gt;</code>.</em></span></p><p>pppd 接続を確立するためには,
	次の二つのファイルの設定だけで十分です.</p><p><code class="filename">/etc/ppp/options</code>:</p><pre class="programlisting">/dev/cuaa1 115200

crtscts		# enable hardware flow control
modem		# modem control line
connect "/usr/bin/chat -f /etc/ppp/login.chat.script"
noipdefault	# remote PPP serve must supply your IP address.
	        # if the remote host doesn't send your IP during
                # IPCP negotiation, remove this option
passive         # wait for LCP packets
domain &lt;your.domain&gt;	# put your domain name here

:		# put the IP of remote PPP host here
	        # it will be used to route packets via PPP link
                # if you didn't specified the noipdefault option
                # change this line to &lt;local_ip&gt;:&lt;remote_ip&gt;

defaultroute	# put this if you want that PPP server will be
	        # your default router</pre><p><code class="filename">/etc/ppp/login.chat.script</code>:</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">(実際には一行になります.)</p></div><pre class="programlisting">ABORT BUSY ABORT 'NO CARRIER' "" AT OK ATDT&lt;phone.number&gt;
 CONNECT "" TIMEOUT 10 ogin:-\\r-ogin: &lt;login-id&gt;
 TIMEOUT 5 sword: &lt;password&gt;</pre><p>正しくインストールし編集した後は,
	必要な事はこれだけです</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pppd</code></strong></pre><p>このサンプルは主に Trev Roydhouse
	&lt;Trev.Roydhouse@f401.n711.z3.fidonet.org&gt;
	から寄せられた情報に基づいており,
	承諾を得て使用しています.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92460240"></a>20.3.3. PPP サーバとしての動作</h3></div></div></div><p><code class="filename">/etc/ppp/options</code>:</p><pre class="programlisting">crtscts                         # Hardware flow control
netmask 255.255.255.0           # netmask ( not required )
192.114.208.20:192.114.208.165  # ip's of local and remote hosts
                                # local ip must be different from one
                                # you assigned to the ethernet ( or other )
                                # interface on your machine.
                                # remote IP is ip address that will be
                                # assigned to the remote machine
domain ppp.foo.com              # your domain
passive                         # wait for LCP
modem                           # modem line</pre><p>下記のような <code class="filename">/etc/ppp/pppserv</code>
	スクリプトで, そのマシンを PPP
	サーバにすることができます.</p><pre class="programlisting">#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

# reset ppp interface
ifconfig ppp0 down
ifconfig ppp0 delete

# enable autoanswer mode
kermit -y /etc/ppp/kermit.ans

# run ppp
pppd /dev/tty01 19200</pre><p>PPP サーバを終了するには, この
	<code class="filename">/etc/ppp/pppservdown</code> スクリプト
	を使用します:</p><pre class="programlisting">#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi
ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.noans</pre><p>下記の kermit スクリプトは, モデムの自動応答機能を有効,
	または無効にします
	(<code class="filename">/etc/ppp/kermit.ans</code>):</p><pre class="programlisting">set line /dev/tty01
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
inp 5 OK
echo \13
out ATS0=1\13   ; change this to out ATS0=0\13 if you want to disable
                ; autoanswer mod
inp 5 OK
echo \13
exit</pre><p>この <code class="filename">/etc/ppp/kermit.dial</code>
	スクリプトは, リモートホストに ダイヤルし,
	認証手続きをするのに使用します. あなたは必要に応じて, これを
	変更しないといけないでしょう.
	あなたのユーザ名とパスワードをこの
	スクリプトに書かなければいけませんし,
	モデムやリモートホストからの 応答によっては,
	入力待ちの文を変更する必要もあります.</p><pre class="programlisting">;
; put the com line attached to the modem here:
;
set line /dev/tty01
;
; put the modem speed here:
;
set speed 19200
set file type binary            ; full 8 bit file xfer
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none
set modem hayes
set dial hangup off
set carrier auto                ; Then SET CARRIER if necessary,
set dial display on             ; Then SET DIAL if necessary,
set input echo on
set input timeout proceed
set input case ignore
def \%x 0                       ; login prompt counter
goto slhup

:slcmd                          ; put the modem in command mode
echo Put the modem in command mode.
clear                           ; Clear unread characters from input buffer
pause 1
output +++                      ; hayes escape sequence
input 1 OK\13\10                ; wait for OK
if success goto slhup
output \13
pause 1
output at\13
input 1 OK\13\10
if fail goto slcmd              ; if modem doesn't answer OK, try again

:slhup                          ; hang up the phone
clear                           ; Clear unread characters from input buffer
pause 1
echo Hanging up the phone.
output ath0\13                  ; hayes command for on hook
input 2 OK\13\10
if fail goto slcmd              ; if no OK answer, put modem in command mode

:sldial                         ; dial the number
pause 1
echo Dialing.
output atdt9,550311\13\10               ; put phone number here
assign \%x 0                    ; zero the time counter

:look
clear                           ; Clear unread characters from input buffer
increment \%x                   ; Count the seconds
input 1 {CONNECT }
if success goto sllogin
reinput 1 {NO CARRIER\13\10}
if success goto sldial
reinput 1 {NO DIALTONE\13\10}
if success goto slnodial
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 60 goto look
else goto slhup

:sllogin                        ; login
assign \%x 0                    ; zero the time counter
pause 1
echo Looking for login prompt.

:slloop
increment \%x                   ; Count the seconds
clear                           ; Clear unread characters from input buffer
output \13
;
; put your expected login prompt here:
;
input 1 {Username: }
if success goto sluid
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 10 goto slloop         ; try 10 times to get a login prompt
else goto slhup                 ; hang up and start again if 10 failures

:sluid
;
; put your userid here:
;
output ppp-login\13
input 1 {Password: }
;
; put your password here:
;
output ppp-password\13
input 1 {Entering SLIP mode.}
echo
quit

:slnodial
echo \7No dialtone.  Check the telephone line!\7
exit 1

; local variables:
; mode: csh
; comment-start: "; "
; comment-start-skip: "; "
; end:</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pppoe"></a>20.4.  PPP オーバイーサネット (PPPoE) の利用</h2></div></div></div><p><span class="emphasis"><em>原作: Jim Mock  ( <a class="link" href="http://node.to/freebsd/how-tos/how-to-freebsd-pppoe.html" target="_top">node.to</a> より) 10 Jan 2000.</em></span></p><p>以下の解説は, PPPoE として知られる,
      PPP オーバイーサネットの設定法です.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92473168"></a>20.4.1. 必要なもの</h3></div></div></div><p>あなたのシステムで PPPoE を適切に機能させるためには,
        以下のものが必要です.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD 3.4やそれより新しいバージョンのカーネルソース</p></li><li class="listitem"><p>FreeBSD 3.4やそれより新しいバージョンの<span class="application">ppp</span></p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92476624"></a>20.4.2. カーネルコンフィギュレーション</h3></div></div></div><p>以下に示すオプションをカーネルコンフィギュレーションファイルに
        追加して, その後 <a class="link" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">新しいカーネルを
        コンパイルする</a>必要があります.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>options NETGRAPH</p></li></ul></div><p>以下は任意</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>options NETGRAPH_PPPOE</p></li><li class="listitem"><p>options NETGRAPH_SOCKET</p></li></ul></div><p>
        この機能は実行時には有効ではありませんが, 要求に応じて
        <span class="application">ppp</span> は関係のあるモジュールを
        読み込みます.
      </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92482768"></a>20.4.3. <code class="filename">ppp.conf</code> の設定</h3></div></div></div><p>これは動作している <code class="filename">ppp.conf</code> の
        例です:</p><pre class="programlisting">default: # or name_of_service_provider
  set device PPPoE:xl1 # replace xl1 with your ethernet device
  set mru 1492
  set mtu 1492
  set authname YOURLOGINNAME
  set authkey YOURPASSWORD
  set log Phase tun command # you can add more detailed logging if you wish
  set dial
  set login
  set ifaddr 10.0.0.1/0 10.0.0.2/0
  add default HISADDR
  nat enable yes # if you want to enable nat for your local net

papchap:
  set authname YOURLOGINNAME
  set authkey YOURPASSWORD</pre><p>
        <a class="link" href="../FAQ/ppp.html#PPPoEwithNAT" target="_top">
        <code class="option">-nat</code>オプションを付けてPPPoE
        </a>を起動する際には注意するべきです.
      </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92486224"></a>20.4.4. <span class="application">PPP</span> の起動</h3></div></div></div><p>以下を root 権限において実行することで,
        起動させることができます:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp -ddial name_of_service_provider</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92496848"></a>20.4.5. システム起動時に <span class="application">PPP</span> を立ち上げる</h3></div></div></div><p><code class="filename">/etc/rc.conf</code> ファイルに以下の行を追加
        してください:</p><pre class="programlisting">ppp_enable="YES"
ppp_mode="ddial"
ppp_nat="YES"
ppp_profile="default" # or your provider</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="slip"></a>20.5. SLIP の利用</h2></div></div></div><p><span class="emphasis"><em>原作: 浅見 賢 <code class="email">&lt;<a xmlns="" class="email" href="mailto:asami@FreeBSD.org">asami@FreeBSD.org</a>&gt;</code>,Guy Helmer, 協力: Wilko Bulte,
      Piero Serini.</em></span></p><p><span class="emphasis"><em>訳: 花井 浩之 <code class="email">&lt;<a xmlns="" class="email" href="mailto:hanai@FreeBSD.org">hanai@FreeBSD.org</a>&gt;</code>
        1996 年 8 月 8 日.</em></span></p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slipc"></a>20.5.1. SLIPクライアントのセットアップ</h3></div></div></div><p>ここには FreeBSD
        マシンを静的アドレスのネットワークにつなげる場合の
        SLIPのセットアップの一つの方法を書いてあります.
        ホスト名を動的に割り当てる(つまり,
        ダイヤルアップするたびにアドレスが かわる)ためには,
        おそらくもっと凝ったことが必要です.</p><p>まず,
        モデムがどのシリアルポートにつながっているか決めましょう. 私は
        <code class="filename">/dev/cuaa1</code> から
        <code class="filename">/dev/modem</code>へというシンボリックリンクを張り,
        コンフィグレーションではその名前だけを使っています.
        <code class="filename">/etc</code> や<code class="filename">.kermrc</code>
        など, システム全体に散らばっているファイルを修正する
        必要がでるとまったく煩わしいのです!</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">ここで, <code class="filename">/dev/cuaa0</code>は
          <code class="filename">COM1</code>であり,
          <code class="filename">cuaa1</code>は<code class="filename">COM2</code>です.</p></div><p>カーネルのコンフィグレーションファイルに

        </p><pre class="programlisting">pseudo-device   sl      1</pre><p>

        という記述があるのを確認してください.
        これは <code class="filename">GENERIC</code> カーネルに含まれている
        ので削除していない限り大丈夫でしょう.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92508624"></a>20.5.1.1. 最初の設定</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p><code class="filename">/etc/hosts</code>
              ファイルにあなたのマシンのゲートウェイとネームサーバ
              を加えてください.  私のは以下のようになっています.</p><pre class="programlisting">127.0.0.1               localhost loghost
136.152.64.181          silvia.HIP.Berkeley.EDU silvia.HIP silvia
136.152.64.1            inr-3.Berkeley.EDU inr-3 slip-gateway
128.32.136.9            ns1.Berkeley.edu ns1
128.32.136.12           ns2.Berkeley.edu ns2</pre></li><li class="step"><p><code class="filename">/etc/host.conf</code> ファイル中で
              <code class="option">hosts</code>が<code class="option">bind</code>
              よりも前にあること を確認してください.
              さもないとヘンなことが起こるかもしれません.</p></li><li class="step"><p><code class="filename">/etc/rc.conf</code>
              ファイルを編集してください. なお, お使いの  FreeBSD が
              2.2.2 よりも前のバージョンのものの場合は,
              <code class="filename">/etc/sysconfig</code>
              を編集してください.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>行</p><pre class="programlisting"><span class="quote">「<span class="quote">hostname=myname.my.domain</span>」</span></pre><p>を編集してホスト名をセットしてください.
                  完全なInternetホスト名を与えるべきです.</p></li><li class="listitem"><p>行</p><pre class="programlisting"><span class="quote">「<span class="quote">network_interfaces="lo0"</span>」</span></pre><p>を</p><pre class="programlisting"><span class="quote">「<span class="quote">network_interfaces="lo0 sl0"</span>」</span></pre><p>へ変更することにより
                  ネットワークインタフェースのリストに sl0
                  を加えてください.</p></li><li class="listitem"><p>行</p><pre class="programlisting">ifconfig_sl0="inet ${hostname} slip-gateway netmask 0xffffff00 up"</pre><p>を加えて sl0
                  のスタートアップフラグをセットしてください.</p></li><li class="listitem"><p>行</p><pre class="programlisting"><span class="quote">「<span class="quote">defaultrouter=NO</span>」</span></pre><p>を</p><pre class="programlisting"><span class="quote">「<span class="quote">defaultrouter=slip-gateway</span>」</span></pre><p>へ変更してデフォルトのルータを
                  指定してください.</p></li></ol></div></li><li class="step"><p>次の</p><pre class="programlisting">domain HIP.Berkeley.EDU
nameserver 128.32.136.9
nameserver 128.32.136.12</pre><p>という内容を含むファイル
              <code class="filename">/etc/resolv.conf</code> を作ってください.
              見ればわかるように,
              これらはネームサーバホストを設定しています. もちろん,
              実際のドメイン名やアドレスは
              あなたの環境に依存します.</p></li><li class="step"><p>root と toor
              (及びパスワードを持っていない他のアカウントすべて)
              のパスワード を設定してください.
              passwdコマンドを使いましょう.
              <code class="filename">/etc/passwd</code> や
              <code class="filename">/etc/master.passwd</code>
              といったファイルを編集してはいけません!</p></li><li class="step"><p>マシンを再起動して正しいホスト名で
              立ち上がることを確認してください.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92531792"></a>20.5.1.2. SLIP接続をおこなう</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>モデムを起動, つながったらプロンプトで
              <code class="command">slip</code>とタイプし, マシン名と
              パスワードを入力してください.
              入力する必要があるものは環境に よって異なります.
              私は次のようなスクリプトでkermitを使っています.</p><pre class="programlisting"># kermit setup
set modem hayes
set line /dev/modem
set speed 115200
set parity none
set flow rts/cts
set terminal bytesize 8
set file type binary
# The next macro will dial up and login
define slip dial 643-9600, input 10 =&gt;, if failure stop, -
output slip\x0d, input 10 Username:, if failure stop, -
output silvia\x0d, input 10 Password:, if failure stop, -
output ***\x0d, echo \x0aCONNECTED\x0a</pre><p>(もちろん,
              ホスト名とパスワードは変える必要があります).
              接続するためには kermit のプロンプトで
              <code class="command">slip</code>とタイプするだけです.</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">ファイルシステムのどんなところにもプレインテキスト
                にパスワードを書いておくのは一般的にはよくありません.
                覚悟の上で やってください.
                私は単に不精なだけです.</p></div></li><li class="step"><p>ここでkermitから抜け出し
              (<code class="command">z</code>でkermitをサスペンドできます), root
              で</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>slattach -h -c -s 115200 /dev/modem</code></strong></pre><p>と入力しましょう. もしルータの向う側のホストへ
              <code class="command">ping</code> できるなら接続成功です! もしうまく
              いかなければslattachへの引数として <code class="option">-c</code>
              の代わりに<code class="option">-a</code>とやってみてください.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92539728"></a>20.5.1.3. 接続の切り方</h4></div></div></div><p>slattachを殺すためにrootで

          </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -INT `cat /var/run/slattach.modem.pid`</code></strong></pre><p>

          とタイプしてください. そして kermit に戻り
          (もしkermitをサスペンドしていたなら
          <code class="command">fg</code>), kermitから抜けてください
          (<code class="command">q</code>).</p><p>slattachのマニュアルページにはインタフェースを落すために
          <code class="command">ifconfig sl0
            down</code>をしなければいけないと書いていますが,
          私には差がないように見えます. (<code class="command">ifconfig
            sl0</code>とやっても同じ結果が得られる.)</p><p>時にはモデムがキャリアを落すのを
          拒絶するかもしれません(私のは よくそうなります).
          その時は単にkermitをスタートしてまた終了 してください.
          普通は2回目で落ちます.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92548304"></a>20.5.1.4. トラブルシューティング</h4></div></div></div><p>もし動かなければ自由に私に質問してください.
          今までいろんな人がつまずいた のは次のようなことです.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>slattach で <code class="option">-c</code> や <code class="option">-a</code>
              を使わなかった(私はなぜこれが致命的になり得るのか
              わかりませんが, このフラグを付けることで少なくとも一人の
              問題は解決しました.)</p></li><li class="listitem"><p><code class="option">sl0</code> の代わりに <code class="option">s10</code>
              を使った(いくつかのフォントでは見分けるのは難しい
              かもしれません).</p></li><li class="listitem"><p>インタフェースの状態を見るために <code class="command">ifconfig
                sl0</code> をやってみてください. 私は,</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig sl0</code></strong>
sl0: flags=10&lt;POINTOPOINT&gt;
        inet 136.152.64.181 --&gt; 136.152.64.1 netmask ffffff00</pre><p>となります.</p></li><li class="listitem"><p>また, pingが <span class="quote">「<span class="quote">no route to host</span>」</span>
              というメッセージを返す時には <code class="command">netstat
                -r</code>でルーティングテーブルを確認しましょう.
              私のは,</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>netstat -r</code></strong>
Routing tables
Destination      Gateway            Flags     Refs     Use  IfaceMTU    Rtt
Netmasks:
(root node)
(root node)

Route Tree for Protocol Family inet:
(root node) =&gt;
default          inr-3.Berkeley.EDU UG          8   224515  sl0 -      -
localhost.Berkel localhost.Berkeley UH          5    42127  lo0 -       0.438
inr-3.Berkeley.E silvia.HIP.Berkele UH          1        0  sl0 -      -
silvia.HIP.Berke localhost.Berkeley UGH        34 47641234  lo0 -       0.438
(root node)</pre><p>となります.
              (これはたくさんのファイルを転送した後でのもので,
              あなたの見る数字はもっと小さいかも
              しれません).</p></li></ul></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slips"></a>20.5.2. SLIPサーバのセットアップ方法</h3></div></div></div><p><span class="emphasis"><em>訳: 冨田 重成 <code class="email">&lt;<a xmlns="" class="email" href="mailto:ts@icu.ac.jp">ts@icu.ac.jp</a>&gt;</code>.
          1996 年 9 月 6 日.</em></span></p><p>この文書の目的は, SLIPサーバ機能を
        FreeBSDシステムのもとで設定するため の助言を提供することです.
        SLIPサーバ機能を設定するということは, リモー トの
        SLIPクライアントがログインできるようにするために, 自動的に接続処
        理をおこなうようにすることです.
        この文書は著者の経験に基づいておりますが,
        実際のシステム構成や要望は異なりますから,
        すべての疑問にこの文書が答え ることはできません. なお,
        ここでの助言を試みた結果, あなたのシステムへ
        の悪影響やデータの損失が生じたとしても,
        著者が責任を持つことはできませ
        んのでご了解をお願いします.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slips-prereqs"></a>20.5.2.1. 前提</h4></div></div></div><p>この文書の内容はテクニカルなものなので,
          前提知識が必要です. すなわち,
          TCP/IPネットワークプロトコルについての知識, 特に,
          ネットワークとノード のアドレス指定をはじめ,
          ネットワークアドレスマスク, サブネット化, ルー ティング,
          および RIPなどのルーティングプロトコルなどに関する知識を前提
          としています. ダイヤルアップサーバで
          SLIP機能を設定するためには, これ
          らの概念についての知識が必要ですから,
          もし不案内であると思われる方は, O'Reilly &amp; Associates,
          Inc.から出版されている Craig Hunt氏の  <span class="emphasis"><em>TCP/IP
            Network Administration</em></span> (ISBN 0-937175-82-X)か,
          または  Douglas Comer氏の
          TCP/IPプロトコルに関する一連の書籍をお読みください.</p><p>前提知識に加え, さらに, モデムの設定が完了しており,
          そのモデムを経由し てログインできるように,
          システムファイル群が適切に記述できているものと 仮定しています.
          もしモデムの準備ができていないときには, あらかじめダイヤ
          ルアップ機能の設定についてのチュートリアルをお読みください.
          Webブラ ウザが使えるのであれば
          <a class="link" href="http://www.FreeBSD.org/" target="_top"> http://www.FreeBSD.org/
          </a> におけるチュー トリアルの一覧を調べてください.
          あるいは, この文書を見つけた場所を調べ て,
          <code class="filename">dialup.txt</code>
          やそれに類似した名前の文書をお読みください. 関連す
          るマニュアルページとしては,
          シリアルポート向けデバイスドライバについて
          の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> をはじめ, モデムからのログインを
          受理できるようにシステ
          ムを設定するための <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>,
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> など, さらには, シリアルポート関連パラメータ ( たと
          えば直接接続シリアルインタフェースの
          <code class="literal">clocal</code> ) についての
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a>  なども助けになるかもしれません.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92573264"></a>20.5.2.2. 概要</h4></div></div></div><p>一般的な設定内容で FreeBSDを SLIPサーバとして利用すると,
          その動作は次 のようになります. まず, SLIPユーザが FreeBSD
          による SLIPサーバへ電話し て, SLIP専用IDでログインします.
          なお, このIDを持ったユーザはシェルとし て
          <code class="filename">/usr/sbin/sliplogin</code> を使います. この
          <code class="command">sliplogin</code> は, ファイル
          <code class="filename">/etc/sliphome/slip.hosts</code> の中から,
          ログインIDと一致する 記述行を探します. もし一致する行があれば,
          ログインしたシリアル回線を,  利用可能な
          SLIPインタフェースへ接続し, その後にシェルスクリプト
          <code class="filename">/etc/sliphome/slip.login</code> で
          SLIPインタフェースを設定します.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92576080"></a>20.5.2.2.1. SLIPサーバへのログイン例</h5></div></div></div><p>仮に SLIPユーザIDが <code class="systemitem">Shelmerg</code>
            とします. すると, <code class="filename">/etc/master.passwd</code>
            における <code class="systemitem">Shelmerg</code> のエントリは次のよ
            うなものになります (実際には一つの行に続いている) .</p><pre class="programlisting">Shelmerg:password:1964:89::0:0:Guy Helmer - SLIP:/usr/users/Shelmerg:/usr/sbin/sliplogin</pre><p><code class="systemitem">Shelmerg</code> がログインすると,
            <code class="command">sliplogin</code> は, ファイル
            <code class="filename">/etc/sliphome/slip.hosts</code>
            からユーザIDと一致する行を探しま す. いま仮に,
            <code class="filename">/etc/sliphome/slip.hosts</code>
            に次のような記述がなされていたとします.</p><pre class="programlisting">Shelmerg        dc-slip sl-helmer       0xfffffc00      autocomp</pre><p><code class="command">sliplogin</code>
            が上記のエントリを見つけると,
            <span class="emphasis"><em>Shelmerg</em></span> が使用して
            いるシリアル回線を, 利用可能な
            SLIPインタフェースのなかの最初のものへ 接続し, 次の内容の
            <code class="filename">/etc/sliphome/slip.login</code>
            を実行します.</p><pre class="programlisting">/etc/sliphome/slip.login 0 19200 Shelmerg dc-slip sl-helmer 0xfffffc00 autocomp</pre><p>もし上記の手順が正常に処理されると,
            <code class="filename">/etc/sliphome/slip.login</code>  は,
            <code class="command">sliplogin</code> が割り当てた SLIPインタフェース
            (この例では  <code class="filename">slip.login</code>
            で与えられたパラメータのうちで最初の値である SLIP
            インタフェース0である) に対して <code class="command">ifconfig</code>
            を実行し, ローカル  IPアドレス
            (<code class="systemitem">dc-slip</code>)をはじめ, リモート IPアドレス
            (<code class="systemitem">sl-helmer</code>),
            SLIPインタフェースへのネットワークマスク
            (<code class="systemitem">0xfffffc00</code>), およびその他のフラグ
            (<code class="literal">autocomp</code>)を設定 します. 逆に,
            さきほどの手順が正常に終了しなかった場合, 通常は
            <code class="command">sliplogin</code> は十分な情報を syslog の
            <code class="literal">daemon</code> 機能経由で  
            <code class="filename">/var/log/messages</code> へ記録します
            ( <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> や
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">syslog.conf</span>(5)</span></a> のマニュアルページを参照のうえ, さらに
            <code class="filename">/etc/syslog.conf</code> を調べて
            <code class="command">syslogd</code> がどのファイルへ記
            録するかを確認のこと) .</p><p>例はこのくらいにして,
            さっそくシステムのセットアップを始めてみましょう.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92599760"></a>20.5.2.3. カーネルのコンフィグレーション</h4></div></div></div><p>FreeBSD のデフォルトのカーネルには, 通常, 二つの
          SLIPインタフェースが 準備されています
          (<code class="filename">sl0</code> と <code class="filename">sl1</code>)
          . これらのインタフェー
          スが使用中のカーネルに準備されているかどうかを調べるには,
          <code class="command">netstat -i</code> を実行してください.</p><p><code class="command">netstat -i</code> の出力例</p><pre class="screen">Name  Mtu   Network     Address            Ipkts Ierrs    Opkts Oerrs  Coll
ed0   1500  &lt;Link&gt;0.0.c0.2c.5f.4a         291311     0   174209     0   133
ed0   1500  138.247.224 ivory             291311     0   174209     0   133
lo0   65535 &lt;Link&gt;                            79     0       79     0     0
lo0   65535 loop        localhost             79     0       79     0     0
sl0*  296   &lt;Link&gt;                             0     0        0     0     0
sl1*  296   &lt;Link&gt;                             0     0        0     0     0</pre><p><code class="command">netstat -i</code> の出力に
          <code class="filename">sl0</code> と <code class="filename">sl1</code>
          のインタフェー スが含まれているということから,
          カーネルには二つの SLIPインタフェー
          スが組み込まれているということを示しています.
          (<code class="literal">sl0</code> と  <code class="literal">sl1</code>
          に付いたアスタリスクは, <code class="command">netstat -i</code>
          の実行時点で はインタフェースが <span class="quote">「<span class="quote">ダウン</span>」</span>
          していることを表しています. )</p><p>なお, パケットのフォワード機能は FreeBSD
          のデフォルトのカーネルでは設定 されていません
          (すなわちルータとしては動作しない) . もしインターネット
          接続ホストについての RFC要件 ( RFC 1009 [Requirements for
          Internet Gateways] と 1122 [Requirements for Internet Hosts
          ― Communication Layers], おそらく 1127 [A Perspective on
          the Host Requirements RFCs] も ) に準拠して, FreeBSDによる
          SLIPサー バをルータとして動作させたいときには,
          <code class="filename">/etc/rc.conf</code> (バージョ ン 2.2.2 より前の
          FreeBSD では <code class="filename">/etc/sysconfig</code>) ファイル の
          <code class="literal">gateway_enable</code> 変数を <code class="option">YES</code>
          としてください. もし古いシステ ムで
          <code class="filename">/etc/sysconfig</code> ファイルすらないときには,
          次のコマン ドを <code class="filename">/etc/rc.local</code>
          へ追加してください.</p><pre class="programlisting">sysctl -w net.inet.ip.forwarding = 1</pre><p>この新しい設定を有効とするには,
          リブートする必要があります.</p><p>デフォルトのカーネルコンフィグレーションファイル
          (<code class="filename">/sys/i386/conf/GENERIC</code>) の最後の部分に,
          次のような行がありま す.</p><pre class="programlisting">pseudo-device sl 2</pre><p>この行によって, 使用可能な SLIPデバイスの総数が決まります.
          すなわち, 行 末の数値が, 同時に動作可能な
          SLIP接続の最大数となります.</p><p>カーネルの再構築については,
          <a class="link" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">FreeBSDカー
            ネルのコンフィグレーション</a> を参照ください.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92616400"></a>20.5.2.4. Sliploginのコンフィグレーション</h4></div></div></div><p>すでにご説明したように,
          <code class="filename">/usr/sbin/sliplogin</code> のコンフィグレー
          ションのために,
          3種類のファイルが<code class="filename">/etc/sliphome</code>
          ディレクトリに あります (<code class="command">sliplogin</code>
          についての実際のマニュアルページとしては
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sliplogin&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sliplogin</span>(8)</span></a> を参照のこと) .
          ファイル <code class="filename">slip.hosts</code> は
          SLIPユーザおよびその IPアドレスを決めます. 通常, ファイル
          <code class="filename">slip.login</code> は,
          SLIPインタフェースを設定することだけに使
          用します. <code class="filename">slip.logout</code>
          はオプションのファイルで,
          <code class="filename">slip.login</code> で設定した内容を,
          シリアル接続が終了した時点で解除
          するときに使用します.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92621136"></a>20.5.2.4.1. <code class="filename">slip.hosts</code>
	  のコンフィグレーション</h5></div></div></div><p><code class="filename">/etc/sliphome/slip.hosts</code> には,
            少なくとも 4 つの項目をホワイ トスペース (スペースやタブ)
            で区切って指定します.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>SLIPユーザのログインID</p></li><li class="listitem"><p>SLIPリンクのローカル (SLIPサーバ側) アドレス</p></li><li class="listitem"><p>SLIPリンクのリモートアドレス</p></li><li class="listitem"><p>ネットワークマスク</p></li></ul></div><p>ホスト名をローカルおよびリモートのアドレスとして
            記述できます (IPアドレ スの決定は,
            <code class="filename">/etc/host.conf</code> の指定内容に応じて,
            <code class="filename">/etc/hosts</code> か
            DNSのいずれかによって決定される) . また, ネット
            ワークマスクも <code class="filename">/etc/networks</code>
            ファイルに記述された名前を参照す ることで,
            指定することもできると思います. これまでの例としてあげたシス
            テムでの <code class="filename">/etc/sliphome/slip.hosts</code>
            は次のようになります.</p><pre class="programlisting">#
# login local-addr      remote-addr     mask            opt1    opt2
#                                               (normal,compress,noicmp)
#
Shelmerg  dc-slip       sl-helmerg      0xfffffc00      autocomp</pre><p>それぞれの行の最後には,
            次に示すオプションを一つ以上指定できます.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="option">normal</code> ― ヘッダを圧縮しない</p></li><li class="listitem"><p><code class="option">compress</code> ― ヘッダを圧縮する</p></li><li class="listitem"><p><code class="option">autocomp</code> ―
                リモートの設定に応じて, ヘッダを圧縮する</p></li><li class="listitem"><p><code class="option">noicmp</code> ―
                ICMPパケットを禁止する
                ( <span class="quote">「<span class="quote">ping</span>」</span> パケットは送出されず,
                バンド幅を占有しない)</p></li></ul></div><p>なお, FreeBSDバージョン2の初期リリースの
            <code class="command">sliplogin</code> は, 旧  FreeBSD
            1.xでは有効であった上記のオプションを無視していましたので,
            <code class="option">normal</code>, <code class="option">compress</code>,
            <code class="option">autocomp</code>, そして <code class="option">noicmp</code>
            などのオプションは FreeBSD
            2.2でサポートされるまでは効果がありませんでした (た
            だしこれらのフラグを使うためには
            <code class="filename">slip.login</code> スクリプトへ記述する
            必要がある) .</p><p>SLIPリンクでのローカルとリモート向けのアドレスの
            選び方は, TCP/IPサブネッ トを専用に割り当てるか,
            または <span class="quote">「<span class="quote">プロキシ ARP</span>」</span> を
            SLIPサーバへ用いるかによって違います ( <span class="quote">「<span class="quote">プロキシ
              ARP</span>」</span> という用語のここでの使い方は本来のものではないが,
            説明のためにこの用語を使う) . もし,
            どちらの方式を選ぶべきか判らなかったり,
            IPアドレスの割り当て方が不明のときには, 上述の
            <a class="link" href="#slips-prereqs" title="20.5.2.1. 前提">前提</a> の節で紹介した
            TCP/IP関連書籍を参考になさるか,  またはあなたの
            IPネットワークを管理している方に相談なさると
            よいでしょう.</p><p>独立したサブネットを SLIPクライアントへ適用するときには,
            すでに割り当てられている
            IPネットワーク番号の範囲からサブネット番号を割り当て, 同
            時にそのサブネットの範囲内で有効な IPアドレスを
            SLIPクライアントの IP 番号として割り当てる必要があります.
            さらに, この SLIPサブネットから SLIPサーバを経由して最も近い
            IPルータへの経路を静的に設定するか, または
            <code class="command">gated</code> を FreeBSDによる
            SLIPサーバへインストールして, 適当
            なルーティングプロトコルを使って,
            SLIPサーバ経由のサブネットへの経路情
            報をルータ群へ通知できるように設定するか,
            のいずれかをおこなう必要があります.</p><p><span class="quote">「<span class="quote">プロキシ ARP</span>」</span> 方式を採用するときには,
            SLIPクライアント向けの IPアドレス
            として, SLIPサーバのサブネットの範囲から
            選んで割り当てるとともに,
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=arp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">arp</span>(8)</span></a> コマンドを使うために
            <code class="filename">/etc/sliphome/slip.login</code>
            と<code class="filename">/etc/sliphome/slip.logout</code>
            のスクリプトを修正して, SLIPサー
            バにおける ARPテーブル内のプロキシ ARPエントリへ
            反映させる必要がありま
            す.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92649808"></a>20.5.2.4.2. <code class="filename">slip.login</code>
            のコンフィグレーション</h5></div></div></div><p>ファイル <code class="filename">/etc/sliphome/slip.login</code>
            の一般的な内容は次にようになります.</p><pre class="programlisting">#!/bin/sh -
#
#	@(#)slip.login  5.1 (Berkeley) 7/1/90

#
# generic login file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6</pre><p>この <code class="filename">slip.login</code>
            ファイルの役目は単に, SLIPインタフェースにつ
            いてのローカルとリモートのアドレス,
            およびそのネットワークマスクを  <code class="command">ifconfig</code>
            コマンドで設定することです.</p><p>もし <span class="quote">「<span class="quote">プロキシ ARP</span>」</span> 方式を採用する
            (SLIPクライアントへ独立したサブネットを使わない) ときには,
            ファイル <code class="filename">/etc/sliphome/slip.login</code>
            は次のような内容になります.</p><pre class="programlisting">#!/bin/sh -
#
#	@(#)slip.login  5.1 (Berkeley) 7/1/90

#
# generic login file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6
# Answer ARP requests for the SLIP client with our Ethernet addr
/usr/sbin/arp -s $5 00:11:22:33:44:55 pub</pre><p>この <code class="filename">slip.login</code> で追加された行
            <code class="command">arp -s $5 00:11:22:33:44:55 pub</code> は,
            SLIPサーバにおける ARPテーブルへ新たなエントリを作ります.
            SLIPサーバ は, この ARPエントリが作られると,
            SLIPクライアントの IPアドレスと話し たい他の
            IPノードが要求してきたときにはいつも, SLIPサーバ の Ethernet
            MACアドレスを返すようになります.</p><p>上記の例を実際に流用なさるときには, 例にある Ethernet
            MACアドレス  (<code class="systemitem">00:11:22:33:44:55</code>)
            を, あなたのシステムの実際のEthernetカー ドの
            MACアドレスと置き換えなければ <span class="quote">「<span class="quote">プロキシ
              ARP</span>」</span> はうまく動作しません!  SLIPサーバの Ethernet
            MACアドレスを調べるには <code class="command">netstat -i</code> コマ
            ンドを利用してください.
            実行結果の第2行は次のようなものになるはずです.</p><pre class="screen">ed0   1500  &lt;Link&gt;0.2.c1.28.5f.4a         191923     0   129457     0   116</pre><p>この例での Ethernet MACアドレスは
            <code class="systemitem">00:02:c1:28:5f:4a</code> であると
            読みます. なお <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=arp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">arp</span>(8)</span></a> における MAC
            アドレスの指定に際しては,
            コマンド <code class="command">netstat -i</code> が付けた
            Ethernet MACアドレスのピリオド記
            号をコロン記号と置き換え, かつ単一桁の 16
            進数にはゼロを先頭に加える必
            要があります. この指定についての正確な情報は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=arp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">arp</span>(8)</span></a>
            を参照く
            ださい.</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">/etc/sliphome/slip.login</code> と
              <code class="filename">/etc/sliphome/slip.logout</code>
              を作成したならば, ファイル属性の <span class="quote">「<span class="quote">実行</span>」</span> ビット
              (すなわち  <code class="command">chmod 755 /etc/sliphome/slip.login
                /etc/sliphome/slip.logout</code>) を
              設定しなければなりません. さもなければ
              <code class="command">sliplogin</code> が
              うまく実行されません.</p></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92692304"></a>20.5.2.4.3. <code class="filename">slip.logout</code>
            のコンフィグレーション</h5></div></div></div><p>ファイル <code class="filename">/etc/sliphome/slip.logout</code>
            は必ずしも必要なものではあ りません (ただし <span class="quote">「<span class="quote">プロキシ
              ARP</span>」</span> を利用する場合を除く) . もしこのファイルを
            作成するときには, 次に示す標準的な
            <code class="filename">slip.logout</code> スクリプト例を
            参考にしてください.</p><pre class="programlisting">#!/bin/sh -
#
#	slip.logout

#
# logout file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 down</pre><p><span class="quote">「<span class="quote">プロキシ ARP</span>」</span> を利用する場合, この
            <code class="filename">/etc/sliphome/slip.logout</code> を 使って,
            特定の SLIPクライアント向けの
            ARPエントリを削除したくなるようなときがあります.</p><pre class="programlisting">#!/bin/sh -
#
#       @(#)slip.logout

#
# logout file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 down
# Quit answering ARP requests for the SLIP client
/usr/sbin/arp -d $5</pre><p>コマンド <code class="command">arp -d $5</code> は,
            SLIPクライアントがログインした 際に, <span class="quote">「<span class="quote">プロキシ
              ARP</span>」</span> を使った <code class="filename">slip.login</code>
            によって追加され た ARPエントリを削除します.</p><p>これによって, 繰り返して利用することができるわけです.
            必ず, <code class="filename">/etc/sliphome/slip.logout</code>
            を作成した後に, 実行ビットを設定し てください (
            <code class="command">chmod 755 /etc/sliphome/slip.logout</code> )
            .</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92703824"></a>20.5.2.5. ルーティングについての考慮点</h4></div></div></div><p><span class="quote">「<span class="quote">プロキシ ARP</span>」</span> 方式を利用せずに
          SLIPクライアントとその他のネットワーク  (Internetも含む)
          の構成要素との間でパケットをルーティングするときには,
          SLIPサーバ経由で
          SLIPクライアントが属するサブネットまでの経路を, 最も
          近いデフォルトのルータ群へ静的な経路情報として
          追加しなければならないか,  または <code class="command">gated</code> を
          FreeBSDによる SLIPサーバへインストールして, SLIP
          サブネットについての経路情報を,
          適当なルーティングプロトコルでルー
          タ群へ通知できるように設定するか,
          のどちらかをおこなわなければなりません.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92705488"></a>20.5.2.5.1. 静的な経路</h5></div></div></div><p>静的な経路を最も近いデフォルトの
            ルータ群へ追加することが困難なことがあ ります
            (経路情報を追加できる権限がなければそもそも不可能となる).
            もし あなたの組織に複数のルータで構成された
            ネットワークがあるならば, ある種 のルータ (たとえば Ciscoや
            Proteonなど) は, 静的な経路を SLIPサブネッ
            トへ使うようにルータを設定しなければならないだけでなく,
            その静的経路を 他のどのルータへ知らせるのかもあらかじめ
            指定しておく必要がありますから,
            静的経路に基づくルーティングを軌道に乗せるには
            それなりの専門的技術やト
            ラブルシューティングやコツが必要だと思います.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92706640"></a>20.5.2.5.2. <code class="command">gated</code>の稼働</h5></div></div></div><p>静的経路についての頭痛への代替手段は,
            <code class="command">gated</code> を FreeBSDによる SLIPサー
            バへインストールして, 適切なルーティングプロトコル
            (RIP/OSPF/BGP/EGP)  を使って
            SLIPサブネットについての経路情報を他のルータへ知らせるように
            設定することです. <a class="link" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">ports
              コレクション</a>から  <code class="command">gated</code>
            を用いることもできますし,
            <a class="link" href="ftp://ftp.gated.merit.edu/research.and.development/gated/" target="_top">
              GateD 匿名 FTP サイト</a>
            から探して自分自身で構築することもで きます.
            この文章を執筆時点の最新バージョンは
            <code class="filename">gated-R3_5Alpha_8.tar.Z</code> であり,
            このファイル <span class="quote">「<span class="quote">だけで</span>」</span> FreeBSDで 動作させることができます.
            <code class="command">gated</code> についてのすべての情報と文書 は
            <a class="link" href="http://www.gated.merit.edu/" target="_top">
              Merit GateD コンソーシアム</a> からはじまる Web
            上で入手でき ます. <code class="command">gated</code>
            のコンパイルとインストールを行ったならば,
            独自の 設定のために <code class="filename">/etc/gated.conf</code>
            ファイルを記述してください. 次の 例は,
            筆者が FreeBSDによる SLIP
            サーバで使っている内容と類似のものです.</p><pre class="programlisting">#
# gated configuration file for dc.dsu.edu; for gated version 3.5alpha5
# Only broadcast RIP information for xxx.xxx.yy out the ed Ethernet interface
#
#
# tracing options
#
traceoptions "/var/tmp/gated.output" replace size 100k files 2 general ;

rip yes {
 interface sl noripout noripin ;
 interface ed ripin ripout version 1 ;
 traceoptions route ;
} ;

#
# Turn on a bunch of tracing info for the interface to the kernel:
kernel {
 traceoptions remnants request routes info interface ;
} ;

#
# Propagate the route to xxx.xxx.yy out the Ethernet interface via RIP
#

export proto rip interface ed {
        proto direct {
                <em class="replaceable"><code>xxx.xxx.yy</code></em> mask 255.255.252.0 metric 1; # SLIP connections
        } ;
} ;

#
# Accept routes from RIP via ed Ethernet interfaces

import proto rip interface ed {
        all ;
} ;</pre><p>この <code class="filename">gated.conf</code> ファイルの例では,
            SLIPのサブネット  <em class="replaceable"><code>xxx.xxx.yy</code></em>
            についての経路情報を RIPを使って Ethernetへブロー
            ドキャストしています. もし <code class="filename">ed</code>
            ドライバ以外の Ethernetドライバを使うのであれば,
            <code class="filename">ed</code>
            インタフェースの記述を適切なものに置き換えてくだ さい.
            またこの例では,
            <code class="command">gated</code>の動作をデバッグするために,
            <code class="filename">/var/tmp/gated.output</code>
            へトレース情報を出力するように指示して います.
            <code class="command">gated</code> が希望通りに動作したならば,
            このトレースオプショ ンを止めることができます. なお,
            例における <em class="replaceable"><code>xxx.xxx.yy</code></em> を, あ
            なた自身の
            SLIPサブネットのネットワークアドレスに換えてください (また
            <code class="literal">proto direct</code>
            部分のネットワークマスクも換えることを忘れないこ と)
            .</p><p><code class="command">gated</code>
            のコンパイルとインストールが終了し, コンフィグレーショ
            ンファイルの作成も完了したら,
            FreeBSDシステムではデフォルトの
            <code class="command">routed</code>に代わって <code class="command">gated</code>
            を起動してください. そのため には,
            <code class="filename">/etc/netstart</code> の
            <code class="filename">routed/gated</code> 起動パラメータを
            適切な値に設定してください. <code class="command">gated</code>
            のコマンドラインパラメータにつ いての情報は,
            <code class="command">gated</code>
            のマニュアルページを参照してください.</p></div></div></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail"></a>第21章 電子メール</h2></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lloyd</span> <span class="firstname">Bill</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">改訂: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Mock</span> <span class="firstname">Jim</span> [FAMILY Given]</span>. </span></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#mail-synopsis">21.1. この章では</a></span></dt><dt><span class="sect1"><a href="#mail-using">21.2. 電子メールを使う</a></span></dt><dt><span class="sect1"><a href="#sendmail">21.3. <span class="application">sendmail</span> の設定</a></span></dt><dt><span class="sect1"><a href="#mail-changingmta">21.4. MTA の変更</a></span></dt><dt><span class="sect1"><a href="#mail-trouble">21.5. トラブルシュート</a></span></dt><dt><span class="sect1"><a href="#mail-advanced">21.6. 先進的なトピックス</a></span></dt><dt><span class="sect1"><a href="#SMTP-UUCP">21.7. UUCP とともに SMTP を使う</a></span></dt><dt><span class="sect1"><a href="#SMTP-dialup">21.8. ダイアルアップ接続でメールを使う</a></span></dt><dt><span class="sect1"><a href="#SMTP-Auth">21.9. SMTP 認証</a></span></dt></dl></div><p><span class="emphasis"><em>訳: 田中 美穂子 <code class="email">&lt;<a xmlns="" class="email" href="mailto:Mihoko_Tanaka@yokogawa.co.jp">Mihoko_Tanaka@yokogawa.co.jp</a>&gt;</code>. 14 January 1997.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-synopsis"></a>21.1. この章では</h2></div></div></div><a id="idp92756176" class="indexterm"></a><a id="idp92756688" class="indexterm"></a><p><span class="quote">「<span class="quote">電子メール</span>」</span>、email としてのほうが知られているでしょう、
      は現代で最も広く利用されているコミュニケーション手段の一つです。
      この章では FreeBSD 上でメールサーバを実行するための基本的な導入を説明します。
      しかし、この文書は完璧な参考文献ではなく、
      実際のところ考慮すべき重要な点の多くが省略されています。
      この件について、より網羅したものについては <a class="xref" href="#bibliography" title="付録B 参考図書">付録B <em>参考図書</em></a>
      に掲載されている多くの優れた書籍を参照してください。</p><p>この章では、以下の分野について説明します。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>電子メールの送受信に関係しているソフトウェアの構成要素</p></li><li class="listitem"><p>FreeBSD における <span class="application">sendmail</span>
	  の基本的な設定ファイルのある場所</p></li><li class="listitem"><p>スパマーがあなたのメールサーバを踏台として不正に使用することを防ぐ方法</p></li><li class="listitem"><p>あなたのシステムに <span class="application">sendmail</span>
	  の置き換えとなる代替の MTA をインストールして設定する方法</p></li><li class="listitem"><p>メールサーバにまつわる共通の問題の解決法</p></li><li class="listitem"><p>UUCP とともに SMTP を使う方法</p></li><li class="listitem"><p>ダイアルアップ接続でメールを使う方法</p></li><li class="listitem"><p>セキュリティを向上するために SMTP 認証を設定する方法</p></li></ul></div><p>この章を読む前に、以下のことを理解しておく必要があります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ネットワーク接続の適切な設定方法
	  (<a class="xref" href="#advanced-networking" title="第22章 高度なネットワーク">22章<em>高度なネットワーク</em></a>)</p></li><li class="listitem"><p>あなたのメールホストに対する DNS 情報の適切な設定方法
	  (<a class="xref" href="#advanced-networking" title="第22章 高度なネットワーク">22章<em>高度なネットワーク</em></a>)</p></li><li class="listitem"><p>サードパーティ製ソフトウェアのインストール方法
	  (<a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a>)</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-using"></a>21.2. 電子メールを使う</h2></div></div></div><a id="idp92779344" class="indexterm"></a><a id="idp92779856" class="indexterm"></a><a id="idp92780368" class="indexterm"></a><p>email の交換には 5 つの主要な部分があります。
      それらは <a class="link" href="#mail-mua" title="21.2.1. ユーザープログラム">ユーザープログラム</a>、
      <a class="link" href="#mail-mta" title="21.2.2. メールホストサーバデーモン">サーバーデーモン</a>、
      <a class="link" href="#mail-dns" title="21.2.3. Email と DNS">DNS</a>、
      <a class="link" href="#mail-receive" title="21.2.4. メールの受け取り">POP もしくは IMAP のデーモン</a>、
      そしてもちろん <a class="link" href="#mail-host" title="21.2.5. メールホスト">メールホスト</a>です。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-mua"></a>21.2.1. ユーザープログラム</h3></div></div></div><p>いくつか名前を挙げれば、
	<span class="application">mutt</span>, <span class="application">pine</span>,
	<span class="application">elm</span> そして
	<span class="application">mail</span>
	といったコマンドラインプログラムや
	<span class="application">balsa</span>,
	<span class="application">xfmail</span> のような
	GUI プログラム、WWW ブラウザーのようにさらに <span class="quote">「<span class="quote">洗練された</span>」</span> ものまであります。
	これらのプログラムは、email の処理を
	<a class="link" href="#mail-mta" title="21.2.2. メールホストサーバデーモン">server daemons</a> を呼び出したり
	TCP 経由で渡したり、といった手段でローカルの
	<a class="link" href="#mail-host" title="21.2.5. メールホスト"><span class="quote">「<span class="quote">メールホスト</span>」</span></a> に任せるだけです。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-mta"></a>21.2.2. メールホストサーバデーモン</h3></div></div></div><a id="idp92789840" class="indexterm"></a><a id="idp92791120" class="indexterm"></a><a id="idp92792400" class="indexterm"></a><a id="idp92793680" class="indexterm"></a><p>通常、これは <span class="application">sendmail</span>
	(FreeBSD のデフォルト) や <span class="application">qmail</span>,
	<span class="application">postfix</span> もしくは
	<span class="application">exim</span>
	といった他のメールサーバーデーモンの一つです。
	他にもあるのですが、以上のものが広く使われています。</p><p>サーバーデーモンは通常 2 つの機能 ―
	やってくるメールを受け取るのと出ていくメールを配送する、
	を持っています。メールを読むために POP や IMAP で接続する、
	ということはできません。
	そのためにはもう一つ<a class="link" href="#mail-receive" title="21.2.4. メールの受け取り">デーモン</a>が必要なのです。</p><p>いくつかの古いバージョンの <span class="application">sendmail</span>
	には深刻なセキュリティ問題がありますが、
	現在のバージョンを使っていれば特に問題ないことに注意してください。
	例のごとく、
	どんなソフトウェアを利用する時にも最新の状態にしておくのが大事なのです。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-dns"></a>21.2.3. Email と DNS</h3></div></div></div><p>Domain Name System (DNS) とそのデーモンである
	<code class="command">named</code> は email の配送において大変重要な役割を担ってます。
	あなたのサイトからもう一つのサイトへメールを配送するためには、
	サーバーデーモンは DNS からそのサイトを探し、
	メールの受け取り先のホストを決定します。</p><p>メールがあなたに送られた場合にも同じような仕組みになっています。
	DNS にはホスト名と IP アドレス、ホスト名とメールホストをマッピングするデータベースがあります。
	IP アドレスは A レコードで指定されます。
	MX (Mail eXchanger) レコードはあなた宛のメールを受け取るホストを指定します。
	あなたのホスト名に対する MX レコードがない場合には、
	メールは直接あなたのホストに配送されます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-receive"></a>21.2.4. メールの受け取り</h3></div></div></div><a id="idp92818128" class="indexterm"></a><p>メールはメールホストが受け取ります。
	このホストは送られてきたメールを集め、
	(ユーザーが) 読んだりピックアップしたりするために保存します。
	保存されているメールをピックアップするにはメールホストに接続する必要があります。
	これは POP や IMAP を用いて行なわれます。
	メールホスト上で直接メールを読みたい時は POP や IMAP のサーバーは必要ありません。</p><a id="idp92819664" class="indexterm"></a><a id="idp92820304" class="indexterm"></a><p>POP や IMAP のサーバーを走らせるためには 2 つのことをやらなければいけません。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>POP や IMAP のデーモンを <a class="link" href="../../../../ports/mail.html" target="_top">ports コレクション</a> からインストールします。</p></li><li class="step"><p><code class="filename">/etc/inetd.conf</code> を修正して POP や IMAP のサーバーが起動されるように設定します。</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-host"></a>21.2.5. メールホスト</h3></div></div></div><a id="idp92824784" class="indexterm"></a><p>メールホストとは責任をもってメールを配送したり、
	あなたのホストや、もしかするネットワークも、に宛てたメールを受け取ったりするホストに与えられる名前です。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sendmail"></a>21.3. <span class="application">sendmail</span> の設定</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Shumway</span> <span class="firstname">Christopher</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp92828880" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> は FreeBSD のデフォルトの
      メールトランスファエージェント (MTA) です。
      <span class="application">sendmail</span>
      の仕事はメールユーザエージェント (MUA) からのメールを受け取り、
      それを設定ファイルで定義された適当なメーラに届けることです。
      <span class="application">sendmail</span> はネットワーク接続を受け入れて、
      ローカルのメールボックスにメールを届けたり
      別のプログラムにメールを渡したりもできます。</p><p><span class="application">sendmail</span> は次の設定ファイルを使用します。</p><a id="idp92832208" class="indexterm"></a><a id="idp92833104" class="indexterm"></a><a id="idp92834000" class="indexterm"></a><a id="idp92834896" class="indexterm"></a><a id="idp92835792" class="indexterm"></a><a id="idp92840912" class="indexterm"></a><a id="idp92841808" class="indexterm"></a><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>ファイル名</th><th>機能</th></tr></thead><tbody><tr><td>
	      <code class="filename">/etc/mail/access</code>
	    </td><td><span class="application">sendmail</span> アクセスデータベースファイル</td></tr><tr><td>
	      <code class="filename">/etc/mail/aliases</code>
	    </td><td>メールボックスエイリアス</td></tr><tr><td>
	      <code class="filename">/etc/mail/local-host-names</code>
	    </td><td><span class="application">sendmail</span> が受け付ける配送先ホストのリスト</td></tr><tr><td>
	      <code class="filename">/etc/mail/mailer.conf</code>
	    </td><td>メーラプログラムの設定</td></tr><tr><td>
	      <code class="filename">/etc/mail/mailertable</code>
	    </td><td>メーラ配送表</td></tr><tr><td>
	      <code class="filename">/etc/mail/sendmail.cf</code>
	    </td><td><span class="application">sendmail</span> の主設定ファイル</td></tr><tr><td>
	      <code class="filename">/etc/mail/virtusertable</code>
	    </td><td>仮想ユーザおよび仮想ドメイン表</td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92869584"></a>21.3.1. <code class="filename">/etc/mail/access</code></h3></div></div></div><p>アクセスデータベースは、
	どのホストまたは IP アドレスがローカルメールサーバに接続できるか、
	そして接続の種類は何か、ということを定義します。
	ホストは <code class="option">OK</code>, <code class="option">REJECT</code>,
	<code class="option">RELAY</code> として指定できます。
	または、メーラエラーを指定することで、
	単に <span class="application">sendmail</span> の
	エラー処理ルーチンに渡されます。
	<code class="option">OK</code> として指定されたホスト (これはデフォルトです) は、
	メールの最終宛先がローカルマシンである限り、
	このホストへメールを送ることを認められます。
	<code class="option">REJECT</code> として指定されたホストは、
	すべてのメール接続を拒絶されます。
	ホスト名に対して <code class="option">RELAY</code>
	オプションを指定されたホストは、
	このメールサーバを通過して任意の宛先へメールを送ることを認められます。</p><div class="example"><a id="idp92873552"></a><div class="example-title">例21.1 <span class="application">sendmail</span>
	  アクセスデータベースの設定</div><div class="example-contents"><pre class="programlisting">cyberspammer.com                550 We don't accept mail from spammers
FREE.STEALTH.MAILER@            550 We don't accept mail from spammers
another.source.of.spam          REJECT
okay.cyberspammer.com           OK
128.32                          RELAY</pre></div></div><br class="example-break" /><p>この例では五つのエントリがあります。
	表の左側に当てはまるメール送信者は、表の右側の動作に支配されます。
	はじめの二つの例は、エラーコードを <span class="application">sendmail</span>
	のエラー処理ルーチンに渡します。
	メールが表の左側に当てはまると、リモートホストにそのメッセージが表示されます。
	次のエントリは <code class="systemitem">another.source.of.spam</code>
	というインターネット上の特定のホストからのメールを拒絶します。
	次のエントリは <code class="systemitem">okay.cyberspammer.com</code>
	からのメール接続を受け入れます。
	このエントリは上にある <code class="systemitem">cyberspammer.com</code> という行よりもさらに厳密です
	(厳密に一致すればするほど、そうでないものより優先されます)。
	最後のエントリは <code class="systemitem">128.32</code> から始まる
	IP アドレスのホストからの電子メールのリレーを認めます。
	これらのホストは他のメールサーバに到達できるこのメールサーバを使ってメールを送ることができるでしょう。</p><p>このファイルを変更したら、
	データベースを更新するために <code class="filename">/etc/mail/</code> ディレクトリで
	<code class="command">make</code> コマンドを実行する必要があります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92878928"></a>21.3.2. <code class="filename">/etc/mail/aliases</code></h3></div></div></div><p>エイリアスデータベースには、
	他のユーザ、ファイル、プログラムまたは他のエイリアスに展開される
	仮想的なメールボックスの一覧が記載されています。
	<code class="filename">/etc/mail/aliases</code> において使用できる例をいくつかあげます。</p><div class="example"><a id="idp92880592"></a><div class="example-title">例21.2 メールエイリアス</div><div class="example-contents"><pre class="programlisting">root: localuser
ftp-bugs: joe,eric,paul
bit.bucket:  /dev/null
procmail: "|/usr/local/bin/procmail"</pre></div></div><br class="example-break" /><p>ファイル形式はシンプルです。
	コロンの左側にあるメールボックス名は、右側のターゲットに展開されます。
	はじめの例は単純に <code class="systemitem">root</code> のメールボックスを
	<code class="systemitem">localuser</code> のメールボックスに展開し、
	それからエイリアスデータベースをもう一度調べます。
	一致するエントリがなければメッセージはローカルユーザである
	<code class="systemitem">localuser</code> に配送されます。
	次の例はメールリストです。
	<code class="systemitem">ftp-bugs</code> のメールボックスへのメールは
	<code class="systemitem">joe</code>, <code class="systemitem">eric</code>
	および <code class="systemitem">paul</code> の三つのローカルメールボックスに展開されます。
	リモートメールボックスは <code class="literal">user@example.com</code>
	のように指定できることに注意してください。
	次の例はメールをファイル、この場合 <code class="filename">/dev/null</code>
	に書き込みます。
	最後の例はメールをプログラムに送ります。
	この場合メールのメッセージは <span class="trademark">UNIX</span>® パイプを通じて
	<code class="filename">/usr/local/bin/procmail</code> の標準入力に書き込まれます。</p><p>このファイルを変更したら、
	データベースを更新するために<code class="filename">/etc/mail/</code> ディレクトリで
	<code class="command">make</code> コマンドを実行する必要があります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92892880"></a>21.3.3. <code class="filename">/etc/mail/local-host-names</code></h3></div></div></div><p>これは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a>
	がローカルホスト名として認めるホスト名のリストです。
	<span class="application">sendmail</span>
	がメールを受け取るすべてのドメインやホストにこのファイルを置いてください。
	たとえば、このメールサーバは
	<code class="systemitem">example.com</code> というドメインおよび
	<code class="systemitem">mail.example.com</code>
	というホストへのメールを受け取るとすると、
	<code class="filename">local-host-names</code> ファイルの内容は次のようになるでしょう。</p><pre class="programlisting">example.com
mail.example.com</pre><p>このファイルを更新したら、変更を読み込むために
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> を再起動する必要があります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92898512"></a>21.3.4. <code class="filename">/etc/mail/sendmail.cf</code></h3></div></div></div><p><span class="application">sendmail</span> の主設定ファイルである
	<code class="filename">sendmail.cf</code> は、電子メールアドレスの書き換えから、
	リモートメールサーバへ拒絶メッセージを送ることまで
	<span class="application">sendmail</span> の全般的な動作をすべて制御します。
	当然、そのようなさまざまな役割によりこの設定ファイルは大変複雑で、
	その詳細についてはこの節の少し範囲外です。好運なことに、
	標準的な構成のメールサーバではこのファイルをめったに変更する必要はありません。</p><p><span class="application">sendmail</span> の主設定ファイルは
	<span class="application">sendmail</span> の機能と動作を決定する
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a> マクロから構築できます。
	詳細については
	<code class="filename">/usr/src/contrib/sendmail/cf/README</code>
	を参照してください。</p><p>このファイルを更新したら、その変更を反映するために
	<span class="application">sendmail</span> を再起動する必要があります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92903888"></a>21.3.5. <code class="filename">/etc/mail/virtusertable</code></h3></div></div></div><p><code class="filename">virtusertable</code> は仮想ドメインおよび仮想メールボックスに対するアドレスを実際のメールボックスと対応づけます。
	これらのメールボックスにはローカル、リモート、
	<code class="filename">/etc/mail/aliases</code> に定義されたエイリアス、
	またはファイルを使用できます。</p><div class="example"><a id="idp92905680"></a><div class="example-title">例21.3 仮想ドメインメール対応表の例</div><div class="example-contents"><pre class="programlisting">root@example.com                root
postmaster@example.com          postmaster@noc.example.net
@example.com                    joe</pre></div></div><br class="example-break" /><p>上の例では <code class="systemitem">example.com</code>
	ドメインへの対応づけをしています。
	このファイルはファイルの下までファーストマッチ
	(訳注: 一致するルールが複数ある場合、
	一番最初に一致したルールが適用されること) で処理されます。
	はじめの行では <code class="literal">root@example.com</code> を
	ローカルの <code class="systemitem">root</code> メールボックスに対応づけています。
	次のエントリでは <code class="literal">postmaster@example.com</code> を
	<code class="systemitem">noc.example.net</code> ホスト上の
	<code class="systemitem">postmaster</code> メールボックスに対応づけています。
	最後に、今までのところでは
	<code class="systemitem">example.com</code>
	に関して何も一致しない場合、最後のエントリと一致するでしょう。
	これは <code class="systemitem">example.com</code>
	の誰かに送ったすべてのメールが一致します。これは
	<code class="systemitem">joe</code> のローカルメールボックスに対応づけられています。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-changingmta"></a>21.4. MTA の変更</h2></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Boothman</span> <span class="firstname">Andrew</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">Information taken from e-mails written by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Neil Shapiro</span> <span class="firstname">Gregory</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp92924368" class="indexterm"></a><p>すでに述べたように、FreeBSD には MTA (Mail Transfer Agent) として、
      <span class="application">sendmail</span> がすでにインストールされています。
      したがって、デフォルトではこれがメールの送受信を担当しています。</p><p>しかしながら、さまざまな理由によって、
      システムの MTA を変更しようと考えるシステム管理者もいるかもしれません。
      その理由は、単に他の MTA を試してみたいというものから
      他のメーラに依存する特定の機能やパッケージが必要だといったものまで、
      多岐にわたることでしょう。
      幸い、理由がどんなものであれ、FreeBSD では簡単に変更できます。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92926672"></a>21.4.1. 新しい MTA のインストール</h3></div></div></div><p>さまざまな MTA が利用できます。
	<a class="link" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">FreeBSD Ports Collection</a>
	から探しはじめるのがよいでしょう。
	もちろん、どんな場所からでも、あなたが利用したい MTA が
	FreeBSD で動作する限りすべて自由に使えます。</p><p>新しい MTA をインストールすることからはじめましょう。
	新しい MTA をインストールすると、
	あなたの要求が実際に実現したかどうか決める機会が与えられます。さらに、
	サービスを <span class="application">sendmail</span> から引き継ぐ前に
	新しいソフトウェアを設定する機会が与えられます。これを行う場合、
	新しいソフトウェアが <code class="filename">/usr/bin/sendmail</code>
	のようなシステムバイナリを上書きしようとしないことを確認してください。
	そうしないとあなたが設定する前に新しいメールソフトウェアが本格的に動作しはじめてしまいます。</p><p>あなたが選択したソフトウェアを設定する方法についての情報は、
	その MTA の文書を参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92929872"></a>21.4.2. <span class="application">sendmail</span> を無効にする</h3></div></div></div><p><span class="application">sendmail</span>
	を起動するために使用されていた手続きは、
	4.5-RELEASE と 4.6-RELEASE の間で著しく変更されました。
	したがって、それを無効にするための手続きは微妙に違います。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92931536"></a>21.4.2.1. 2002 年 4 月 4 日より前の FreeBSD 4.5-STABLE
	  (4.5-RELEASE とそれ以前のバージョンが該当)</h4></div></div></div><p><code class="filename">/etc/rc.conf</code> に次の行を加えてください。</p><pre class="programlisting">sendmail_enable="NO"</pre><p>これは <span class="application">sendmail</span>
	  のメール受信機能を無効にします。
	  しかし <code class="filename">/etc/mail/mailer.conf</code> (下記参照)
	  が変更されていなければ、<span class="application">sendmail</span>
	  はメールの送信にまだ使われるでしょう。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92934992"></a>21.4.2.2. 2002 年 4 月 4 日以降の FreeBSD 4.5-STABLE
	  (4.6-RELEASE とそれ以降のバージョンが該当)</h4></div></div></div><p><span class="application">sendmail</span> を完全に無効にするためには
	  <code class="filename">/etc/rc.conf</code> に次の行を加えなくてはいけません。</p><pre class="programlisting">sendmail_enable="NONE"</pre><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">もしこの方法で <span class="application">sendmail</span>
	    のメール送信機能を無効にしたのなら、
	    完全に動作する代替メール配送システムと置き換えることが重要です。
	    さもなければ、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a> などのシステム機能は、
	    それらの結果を通常想定しているようにメールで配送することができなくなるでしょう。
	    システムの多くの部分が <span class="application">sendmail</span>
	    互換のシステムがあることを想定しているかもしれません。
	    もしそれらを無効にした後に、
	    アプリケーションがメールを送ろうとするために
	    <span class="application">sendmail</span> のバイナリを使用し続ければ、
	    メールは使われていない <span class="application">sendmail</span>
	    のキューに入り、そして決して配送されないでしょう。</p></div><p>もし <span class="application">sendmail</span>
	  のメール受信機能だけを無効にしたいのなら
	  <code class="filename">/etc/rc.conf</code> に以下の行を追加してください。</p><pre class="programlisting">sendmail_enable="NO"</pre><p><span class="application">sendmail</span>の起動オプションに関する詳細は
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.sendmail</span>(8)</span></a> マニュアルをご覧ください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92943440"></a>21.4.3. 起動時に新しい MTA を起動する</h3></div></div></div><p>起動時に新しい MTA を起動するには二つの選択肢があります。
	ここでも、あなたが稼働させている FreeBSD のバージョンに依存します</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92944464"></a>21.4.3.1. 2002 年 4 月 11 日より前の FreeBSD 4.5-STABLE
	  (4.5-RELEASE とそれ以前のバージョンが該当)</h4></div></div></div><p><code class="filename">/usr/local/etc/rc.d/</code> ディレクトリに、
	  ファイル名が <code class="filename">.sh</code> でおわり、
	  <code class="systemitem">root</code> によって実行可能なスクリプトを追加します。
	  このスクリプトは <code class="literal">start</code> および
	  <code class="literal">stop</code> パラメータを引数として受け付けるようにします。
	  起動時にシステムスクリプトは次のコマンドを実行するでしょう。</p><pre class="programlisting">/usr/local/etc/rc.d/supermailer.sh start</pre><p>これは手動でサーバを起動するためにも使用できます。
	  システム終了時にはシステムスクリプトは <code class="literal">stop</code>
	  オプションを使用して、次のコマンドを実行するでしょう。</p><pre class="programlisting">/usr/local/etc/rc.d/supermailer.sh stop</pre><p>これはシステムが稼働している間に手動でサーバを停止するためにも使えます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92953680"></a>21.4.3.2. 2002 年 4 月 11 日以降の FreeBSD 4.5-STABLE
	  (4.6-RELEASE とそれ以降のバージョンが該当)</h4></div></div></div><p>より新しいバージョンの FreeBSD では、
	  上記の方法または次の行を <code class="filename">/etc/rc.conf</code>
	  に設定できます。</p><pre class="programlisting">mta_start_script="filename"</pre><p><em class="replaceable"><code>filename</code></em> は、あなたが
	  MTA を立ち上げるために起動時に実行するスクリプト名です。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92956368"></a>21.4.4. システムのデフォルトメーラとして <span class="application">sendmail</span> を置き換える</h3></div></div></div><p><span class="application">sendmail</span> プログラムは <span class="trademark">UNIX</span>®
	システム上の標準ソフトウェアとして本当にどこでも利用できるので、
	これがすでにインストールおよび設定されているとみなしている
	ソフトウェアもあるかもしれません。
	この理由により、代替となる MTA の多くは
	<span class="application">sendmail</span> コマンドラインインタフェースと
	互換性のある実装を提供しています。
	これを <span class="quote">「<span class="quote">差し込む</span>」</span> ことによって、
	<span class="application">sendmail</span> の置き換えとして代替 MTA
	を使用することが容易になります。</p><p>したがって、あなたが互換メーラを使用しているときには、
	<code class="filename">/usr/bin/sendmail</code> のような標準
	<span class="application">sendmail</span>
	バイナリを実行しようとするソフトウェアが、
	実際にはその代わりにあなたの選択したメーラを実行しているということを
	確かめる必要があるでしょう。
	好運なことに、FreeBSD はこの仕事をする
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mailwrapper&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mailwrapper</span>(8)</span></a> と呼ばれるシステムを提供しています。</p><p>インストールされたまま
	<span class="application">sendmail</span> が稼働しているときには
	<code class="filename">/etc/mail/mailer.conf</code>
	には以下のような記述があるでしょう。</p><pre class="programlisting">sendmail    /usr/libexec/sendmail/sendmail
send-mail   /usr/libexec/sendmail/sendmail
mailq       /usr/libexec/sendmail/sendmail
newaliases  /usr/libexec/sendmail/sendmail
hoststat    /usr/libexec/sendmail/sendmail
purgestat   /usr/libexec/sendmail/sendmail</pre><p>このことは、これらのうちどの共通コマンド
	(<code class="filename">sendmail</code> 自身のような) が実行されても、
	システムは <code class="filename">mailer.conf</code> を確認して、
	代わりに <code class="filename">/usr/libexec/sendmail/sendmail</code> を実行する
	<code class="filename">sendmail</code> という名前の mailwapper
	のコピーを呼び出すことを意味します。
	このようなシステムでは、デフォルトの
	<code class="filename">sendmail</code> が呼び出されたときに、
	どのバイナリが実際に実行されるかを変更するのが簡単になります。</p><p>したがって、<span class="application">sendmail</span> の代わりに
	<code class="filename">/usr/local/supermailer/bin/sendmail-compat</code>
	を実行させたいのなら、次のように
	<code class="filename">/etc/mail/mailer.conf</code> を変更してください。</p><pre class="programlisting">sendmail    /usr/local/supermailer/bin/sendmail-compat
send-mail   /usr/local/supermailer/bin/sendmail-compat
mailq       /usr/local/supermailer/bin/mailq-compat
newaliases  /usr/local/supermailer/bin/newaliases-compat
hoststat    /usr/local/supermailer/bin/hoststat-compat
purgestat   /usr/local/supermailer/bin/purgestat-compat</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp92996688"></a>21.4.5. 完了</h3></div></div></div><p>あなたのやりたいようにすべてを設定しおえたら、
	もはや必要のない <span class="application">sendmail</span>
	のプロセスを終了して新しいソフトウェアに関するプロセスを起動するか、
	単に再起動してください。
	再起動することによって、新しい MTA が起動時に正しく立ち上がるように
	システムが設定されているかどうか確認することもできるでしょう。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-trouble"></a>21.5. トラブルシュート</h2></div></div></div><a id="idp92999120" class="indexterm"></a><div class="qandaset"><a id="idp93000272"></a><dl><dt>21.5.1. <a href="#idp93000528">どうして自分のサイトのホストなのに FQDN を使わなければいけないのですか?</a></dt><dt>21.5.2. <a href="#idp93034576">sendmail が mail loops back to
	      myself というメッセージを出すのですが。</a></dt><dt>21.5.3. <a href="#idp93044560">ダイアルアップ PPP
	    ホストでメールサーバを実行するにはどうしたらいいの?</a></dt><dt>21.5.4. <a href="#idp93064144">なぜ他のホストにメールを送ろうとすると、いつも
	    Relaying Denied と怒られてしまうの ?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp93000528"></a><a id="idp93000784"></a><p><strong>21.5.1.</strong></p></td><td align="left" valign="top"><p>どうして自分のサイトのホストなのに FQDN を使わなければいけないのですか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>恐らく、そのホストは実際には別のドメインにあるのでしょう。
	    例えば <code class="systemitem">foo.bar.edu</code> ドメインにいて、
	    <code class="systemitem">bar.edu</code> というドメイン内の
	    <code class="systemitem">mumble</code> というホストにアクセスしたいとします。
	    この時は単に <code class="systemitem">mumble</code> ではなく
	    <code class="systemitem">mumble.bar.edu</code> と FQDN で参照しなければなりません。</p><p>そもそも、BSD BIND<a id="idp93029456" class="indexterm"></a>
	    のリゾルバー (resolver) ではこのようなことが可能でしたが、
	    FreeBSD に入っている最新版の <span class="application">BIND</span>
	    では自分のドメイン以外に対する FQDN でない省略形は許されません。
	    従ってホストを <code class="systemitem">mumble</code> と曖昧に指定した場合は
	    <code class="systemitem">mumble.foo.bar.edu</code> という名前があればそれになり、
	    そうでなければ root ドメインから検索されます。</p><p>これは、
	    <code class="systemitem">mumble.bar.edu</code> と
	    <code class="systemitem">mumble.edu</code>
	    ということなったドメイン名に対してホスト名のサーチがおこなわれていた以前の振る舞いとは異なったものです。
	    このような事が悪い例もしくはセキュリティホールとみなされる理由については
	    RFC 1535 を見てください。</p><p><code class="filename">/etc/resolv.conf</code> で

	    </p><pre class="programlisting">domain foo.bar.edu</pre><p>

	    と書いてある行を

	    </p><pre class="programlisting">search foo.bar.edu bar.edu</pre><p>

	    と書き換えることで上のようなことができます。
	    しかし、RFC 1535 にあるように検索順序が
	    <span class="quote">「<span class="quote">内部 (local) と外部 (public) の管理の境界</span>」</span>
	    をまたがないようにしてください。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp93034576"></a><a id="idp93034832"></a><p><strong>21.5.2.</strong></p></td><td align="left" valign="top"><p><span class="application">sendmail</span> が <span class="errorname">mail loops back to
	      myself</span> というメッセージを出すのですが。</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><span class="application">sendmail</span>
	    FAQ に次のように書いてあります。</p><pre class="programlisting"><span class="quote">「<span class="quote">Local configuration error</span>」</span> というメッセージが出ます。例えば、

553 relay.domain.net config error: mail loops back to myself
554 &lt;user@domain.net&gt;... Local configuration error

のような感じですが、どうしたら解決できますか?

これは、例えば domain.net のようなドメイン宛てのメールを
<code class="literal">MX</code> レコードで特定のホスト(ここでは
relay.domain.net) に送ろうとしたのに、
そのホストでは domain.net
宛てのメールを受け取れるような設定になっていない場合です。
設定の際に
FEATURE(use_cw_file) を指定してある場合には
/etc/mail/local-host-names の中に domain.net を追加してください。
もしくは、/etc/mail/sendmail.cf の中に <span class="quote">「<span class="quote">Cw domain.net</span>」</span>
を追加してください。</pre><p><span class="application">sendmail</span> FAQ は
	    <code class="uri"><a class="uri" href="http://www.sendmail.org/faq" target="_top">http://www.sendmail.org/faq</a></code> にありますので、
	    メールの設定に <span class="quote">「<span class="quote">おかしなこと</span>」</span> があれば常に読んでください。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp93044560"></a><a id="idp93044816"></a><p><strong>21.5.3.</strong></p></td><td align="left" valign="top"><p>ダイアルアップ PPP<a id="idp93045328" class="indexterm"></a>
	    ホストでメールサーバを実行するにはどうしたらいいの?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>LAN 上にある FreeBSD マシンを、
	    インターネットに接続したいとします。FreeBSD マシンは、その
	    LAN でのメールゲートウェイになります。FreeBSD
	    マシンは専用線接続ではありません (訳注: ダイアルアップ接続など)。</p><p>これには、少なくとも二つの方法があります。
	    一つは UUCP<a id="idp93046992" class="indexterm"></a>
	    を使うことです。</p><p>もう一つの方法は、あなたのドメインに対するセカンダリ
	    MX サービスを提供する常時稼働のインターネットサーバを用意することです。
	    たとえば、あなたの会社のドメインが
	    <code class="systemitem">example.com</code> で、
	    ISP があなたのドメインに セカンダリ MX サービスを提供するために
	    <code class="systemitem">example.net</code> ドメインを
	    用意するとしたら次のようにします。</p><pre class="programlisting">example.com.	MX	10	example.com.
MX	20	example.net.</pre><p>最終的なメール受信先としては、
	    一つのホストだけが定義されるべきです
	    (<code class="systemitem">example.com</code> 上の
	    <code class="filename">/etc/mail/sendmail.cf</code> ファイルに、
	    <code class="literal">Cw example.com</code> を追加します)。</p><p>送信側の <code class="command">sendmail</code> が、
	    メールを配送しようとしている時、モデムの接続を介してあなたのところ
	    (<code class="systemitem">example.com</code>)
	    に接続しようとします。大抵の場合、
	    あなたのマシンがオンラインでないために、
	    接続はタイムアウトしてしまうでしょう。
	    <code class="command">sendmail</code> プログラムは自動的に、
	    たとえばあなたのインターネットプロバイダなどのセカンダリの
	    MX サイト (<code class="systemitem">example.net</code>)
	    にメールを配送するでしょう。
	    セカンダリ MX サイトは定期的にあなたのホストに接続し、
	    プライマリ MX ホスト
	    (<code class="systemitem">example.com</code>)
	    にメールを配送しようとするでしょう。</p><p>ログインスクリプトとして、
	    このようなものを使うとよいでしょう。</p><pre class="programlisting">#!/bin/sh
# Put me in /usr/local/bin/pppmyisp
( sleep 60 ; /usr/sbin/sendmail -q ) &amp;
/usr/sbin/ppp -direct pppmyisp</pre><p>ユーザごとにログインスクリプトを作りたい場合には、
	    上記のスクリプトの代わりに、
	    <code class="command">sendmail -qRexample.com</code>
	    を使用することもできます。
	    このようにすると、
	    キューの中の <code class="systemitem">example.com</code>
	    に対するすべてのメールは、すぐに強制的に処理されます。</p><p>さらに、次のような改良もできます。</p><p>以下は、<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isp" target="_top">FreeBSD Internet service provider's メーリングリスト</a>
	    から抜粋してきたメッセージです。</p><pre class="programlisting">&gt; 私たちはお客様に対して、セカンダリ MX を提供しています。
&gt; お客様は一日に何回か私たちのサービスに接続し、メールを彼らのプライマリ MX
&gt; に受け取ります (彼らのドメインに対するメールが到着した時には、
&gt; 私たちは彼らのサイトを呼び出しません)。
&gt; 私たちの sendmail は、30 分ごとにメールキューに溜っているメールを配送します。
&gt; ちょうどその時に、すべてのメールがプライマリ MX に送られたかどうかを確かめるためには、
&gt; 彼らは 30 分は オンラインでいなければなりません。
&gt;
&gt; すべてのメールを今すぐ送るために sendmail を初期化するコマンドはあるでしょうか?
&gt; もちろん私たちのマシン上には、ユーザはルート (root) 権限を持っていません。

sendmail.cf の <span class="quote">「<span class="quote">privacy flags</span>」</span> セクションに、
Opgoaway,restrictqrun の定義があります。

root 以外のユーザがキューを処理できるようにするには、
restrictqrun を削除してください。また、MX の再調整が必要かもしれません。
あなたがたは、顧客のサイトに対する一番優先度の高い MX なので、
次のように定義します。

# If we are the best MX for a host, try directly instead of generating
# local config error.
OwTrue

このようにすると、リモートサイトからのメールが、
顧客のマシンと接続しようとせず、直接あなたがたのホストマシンに配送されるようになります。
ホストマシンに配送されたメールは、続いて顧客のマシンに送られます。
これはホスト名にのみ有効なので、顧客のメールマシンに、
<span class="quote">「<span class="quote">host.customer.com</span>」</span> とは別に、<span class="quote">「<span class="quote">customer.com</span>」</span> も定義する必要があります。
DNS 上で、<span class="quote">「<span class="quote">customer.com</span>」</span> に対する A レコードを定義してください。</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp93064144"></a><a id="idp93064400"></a><p><strong>21.5.4.</strong></p></td><td align="left" valign="top"><p>なぜ他のホストにメールを送ろうとすると、いつも
	    <span class="errorname">Relaying Denied</span> と怒られてしまうの ?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>FreeBSD がインストールされたデフォルトの状態では、
	    <span class="application">sendmail</span>
	    は動作しているホストからのメールだけを送るように設定されています。
	    たとえば POP3 サーバがインストールされているとすると、
	    ユーザは学校や職場など他のリモートの場所からメールを確認することが
	    できます。しかし、彼らは外部からそのホスト以外へのメールを
	    送ることはやはりできません。
	    通常、メールを送ろうとしてから少しすると、
	    <span class="errorname">5.7 Relaying Denied</span>
	    というエラーメッセージの書かれたメールが
	    <span class="application">MAILER-DAEMON</span> から送られてくるでしょう。</p><p>これを解決する方法はいくつかあります。
	    一番の正攻法は <code class="filename">/etc/mail/relay-domains</code>
	    リレードメインファイルにあなたの ISP のアドレスを書くことです。
	    これをするのに簡単な方法は次のとおりです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "your.isp.example.com" &gt; /etc/mail/relay-domains</code></strong></pre><p>このファイルを作成または編集したら、
	    <span class="application">sendmail</span> を再起動してください。
	    もしあなたがサーバ管理者でメールをローカルに送りたくないか、
	    ポイントを使用して他のマシン (や、さらに他の ISP) の
	    クライアントまたはシステムへ送りたい時は、とても効果があります。
	    さらに、あなたが一つあるいは二つだけのメールアカウントを
	    設定している場合でもこれは非常に有用です。
	    追加すべきアドレスがたくさんある場合には、
	    単にこのファイルをあなたの好きなテキストエディタで開いて、
	    そして一行に一つずつドメインを追加してください。</p><pre class="programlisting">your.isp.example.com
other.isp.example.net
users-isp.example.org
www.example.org</pre><p>これで、リストに掲載されているすべてのホスト
	    (ユーザがあなたのシステムにアカウントを持っていると規定する)
	    からあなたのシステムを通るすべてのメールは送信に成功するでしょう。
	    これはあなたのシステムから SPAM を送ることを認めることなく、
	    リモートであなたのシステムからメールを送ることをユーザに
	    認めるためのとてもよい方法です。</p></td></tr></tbody></table></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-advanced"></a>21.6. 先進的なトピックス</h2></div></div></div><p>これからのセクションでは、
      メールの設定やドメイン全体のためのメールの設定といったさらに突込んだ話題について触れます。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-config"></a>21.6.1. 基本事項</h3></div></div></div><a id="idp93073104" class="indexterm"></a><p>あなたのマシンに FreeBSD を普通にインストールして、
	<code class="filename">/etc/resolv.conf</code> ファイルを設定するか、
	またはネームサーバを走らせれば、
	他のホストへ電子メールを送ることができるようになります。
	あなたのホスト宛のメールをあなた自身の FreeBSD ホスト上の
	MTA (たとえば <span class="application">sendmail</span>)
	に配送するようにしたい場合には、次の二つの方法があります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>自身でネームサーバーを実行し、
	    自分のドメインを持つ。例えば
	    <code class="systemitem">FreeBSD.org</code>。</p></li><li class="listitem"><p>あなたのホストへ直接メールが配送されるようにする。
	    これはメールがあなたのマシンの現在の
	    DNS 名に直接配送されるようにすることにより実現できます。
	    たとえば <code class="systemitem">example.FreeBSD.org</code>。</p></li></ul></div><a id="idp93082576" class="indexterm"></a><p>上のどちらを選ぶ場合でも、自分のホストに直接メールが配送されるようにするには恒久的で
	静的 な IP アドレス
	(ほとんどの PPP ダイアルアップ設定で用いられる動的なアドレスではなく)
	を持っていなければなりません。
	もしファイアウォールの中にいるならば、
	SMTP トラフィックが通過してくれないといけません。
	もし自分のホストでメールを直接受け取りたいならば、
	次の二つのうちのどちらかができていることを確認してください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>自分のドメインでの
	    (一番値の小さい) MX レコード<a id="idp93084240" class="indexterm"></a>が自分のホストの
	    IP アドレスを差していることを確認する。</p></li><li class="listitem"><p>自分のドメインの中に自分のホスト用の
	    MX エントリがないことを確認する。</p></li></ul></div><p>上のどちらかが設定されていれば、
	自分のホストでメールを受け取ることができるでしょう。</p><p>次のコマンドを実行してみてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>hostname</code></strong>
example.FreeBSD.org
<code class="prompt">#</code> <strong class="userinput"><code>host example.FreeBSD.org</code></strong>
example.FreeBSD.org has address 204.216.27.XX</pre><p>もしあなたのマシンが上記のメッセージだけを出力したならば、
	<code class="email">&lt;<a xmlns="" class="email" href="mailto:yourlogin@example.FreeBSD.org">yourlogin@example.FreeBSD.org</a>&gt;</code>
	へのメールは問題なく配送されるでしょう
	(<span class="application">sendmail</span> が
	<code class="systemitem">example.FreeBSD.org</code>
	上で正しく動作していると仮定します)。</p><p>上記のメッセージの代わりに、</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>host example.FreeBSD.org</code></strong>
example.FreeBSD.org has address 204.216.27.XX
example.FreeBSD.org mail is handled (pri=10) by hub.FreeBSD.org</pre><p>というメッセージが出力された場合は、
	あなたのホスト (<code class="systemitem">example.FreeBSD.org</code>)
	に宛てたメールは全て直接配送されずに <code class="systemitem">hub</code>
	上の同じユーザー名に配送されます。</p><p>上の情報は DNS サーバーが扱います。
	メールルーティング情報をもつ DNS レコードは、
	<span class="emphasis"><em>M</em></span>ail e<span class="emphasis"><em>X</em></span>change エントリーです。
	MX エントリが存在しない場合には、IP アドレスにしたがって、
	直接宛先ホストに配送されます。</p><p><code class="systemitem">freefall.FreeBSD.org</code>
	の現時点での MX エントリは、次のようになっています。</p><pre class="programlisting">freefall		MX	30	mail.crl.net
freefall		MX	40	agora.rdrop.com
freefall		MX	10	freefall.FreeBSD.org
freefall		MX	20	who.cdrom.com</pre><p><code class="systemitem">freefall</code> は多くの MX エントリを持っています。
	一番 MX の値の小さいホストが利用可能な場合は直接メールを受け取ります。
	もしなにかの理由でアクセスができない時には、
	他のホスト (ときどき <span class="quote">「<span class="quote">バックアップ MX</span>」</span> と呼ばれます)
	が一時的にメールを受け取ります。そして、
	より値の小さいホストが利用可能になったときにメールを渡し、
	最終的に一番値の小さいホストに渡ります。</p><p>使い勝手をよくするためには、代替の MX サイトは、それぞれ
	別の経路でインターネットへ接続しているとよいでしょう。
	インターネットプロバイダまたは他の関連サイトが、このサービスを
	提供することができます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-domain"></a>21.6.2. あなたのドメインに対するメール設定</h3></div></div></div><p><span class="quote">「<span class="quote">メールホスト</span>」</span> (メールサーバーとしても知られています)
	をセットアップするためには、
	いろいろなワークステーションに宛てた全てのメールを受ける必要があります。
	基本的には、あなたのドメイン内 (この場合だと
	<code class="systemitem">*.FreeBSD.org</code>)
	のすべてのホスト名宛てのすべてのメールを <span class="quote">「<span class="quote">受け取って</span>」</span>、
	そのメールをあなたのメールサーバーに配送し、
	ユーザーがマスタメールサーバ上でメールをチェックできるようにします。</p><a id="idp93108048" class="indexterm"></a><p>話を簡単にするために、あるユーザーのアカウントはどのマシンでも同じ<span class="emphasis"><em>ユーザー名</em></span>にすべきです。
	そのためには <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> を使ってください。</p><p>使用する予定のメールホストは、
	各ワークステーションごとにメール交換が
	できるように設定されていなければなりません。
	これは DNS の設定で次のように行なうことができます。</p><pre class="programlisting">example.FreeBSD.org	A	204.216.27.XX		; ワークステーション
MX	10 hub.FreeBSD.org	; メールホスト</pre><p>これは、ワークステーションの A レコードがどこを指していようとも
	そのワークステーション宛てのメールをメールホストに転送する、というものです。</p><p>自前で DNS サーバを運用しているのでなければ、
	この作業は自分では行えません。自分で DNS
	サーバを運用しないとかできないという場合は、
	あなたの DNS を提供しているインターネットプロバイダなどに依頼して
	作業を行ってもらってください。</p><p>もしバーチャル電子メールホストを運用するなら次の情報が役に立つでしょう。
	例として、あなたには自分のドメイン、ここでは
	<code class="systemitem">customer1.org</code>、
	を持っている顧客がいるとしましょう。
	あなたは <code class="systemitem">customer1.org</code> 宛ての全てのメールを
	<code class="systemitem">mail.myhost.com</code> というメールホストに集めたいとします。
	DNS エントリーは次のようになるでしょう。</p><pre class="programlisting">customer1.org		MX	10 mail.myhost.com</pre><p><code class="systemitem">customer1.org</code>
	に対して電子メールを送りたいだけなら、
	A レコードは必要<span class="emphasis"><em>ありません</em></span>。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="systemitem">customer1.org</code>
	  に対して ping を実行しても、
	  A レコードが存在しない限りうまくいかないことに留意しておいてください。</p></div><p>やらなければいけない最後のことは、
	メールホスト上の <span class="application">sendmail</span>
	に対してどんなドメインやホスト宛のメールを受け取るのか、
	を教えることです。いくつかの方法がありますが次のどちらかでいいでしょう。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">FEATURE(use_cw_file)</code> を使っているなら、
	    <code class="filename">/etc/mail/local-host-names</code>
	    ファイルにホストを加えます。
	    もし <span class="application">sendmail</span> のバージョンが
	    8.10 より前であれば該当ファイルは
	    <code class="filename">/etc/sendmail.cw</code> です。</p></li><li class="listitem"><p><code class="filename">/etc/sendmail.cf</code> もしくは
	    <span class="application">sendmail</span> 8.10 以降なら
	    <code class="filename">/etc/mail/sendmail.cf</code>
	    といったファイルに <code class="literal">Cwyour.host.com</code> という行を加えます。</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="SMTP-UUCP"></a>21.7. UUCP とともに SMTP を使う</h2></div></div></div><p>FreeBSD とともに出荷されている
      <span class="application">sendmail</span> の設定は、
      サイトがインターネットに直接接続しているものとして設計されています。
      UUCP 経由でメールを交換したいサイトは、他にも
      設定ファイルをインストールしなければいけません。</p><p><code class="filename">/etc/mail/sendmail.cf</code>
      を手動で調整することは先進的なトピックです。
      <span class="application">sendmail</span> のバージョン 8 は設定ファイルを
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a> プリプロセッサから生成します。
      これにより、高度に抽象化された設定を行うことができます。
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a> による設定ファイルは
      <code class="filename">/usr/src/usr.sbin/sendmail/cf</code>
      以下にあります。</p><p>もしシステムをすべてのソースとともにインストールしていなければ、
      sendmail の設定材料は分割された個別のソース tarball を取得してください。
      FreeBSD のソースコードが入った CDROM をマウントしているのなら、</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /cdrom/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cat scontrib.?? | tar xzf - -C /usr/src/contrib/sendmail</code></strong></pre><p>と展開してください (展開してもたった数百 KB 程度です)。
      <code class="filename">cf</code> ディレクトリの
      <code class="filename">README</code> ファイルは
      m4 による設定の基本的な手引として役に立つでしょう。</p><p>UUCP 配送に対応するための一番よい方法は
      <code class="literal">mailertable</code> 機能を使用することです。
      これは経路を決定するために
      <span class="application">sendmail</span>
      が使用できるデータベースを作成します。</p><p>まずはじめに <code class="filename">.mc</code>
      ファイルを作成しなければいけません。
      <code class="filename">/usr/src/usr.sbin/sendmail/cf/cf</code>
      にいくつか例があります。<code class="filename">foo.mc</code>
      という名前のファイルをあなたが作成したとすると、
      有効な <code class="filename">sendmail.cf</code>
      ファイルへ変換するには次のようにするだけです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.sbin/sendmail/cf/cf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make foo.cf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp foo.cf /etc/mail/sendmail.cf</code></strong></pre><p>典型的な <code class="filename">.mc</code> ファイルは次のようになるでしょう。</p><pre class="programlisting">VERSIONID(`<em class="replaceable"><code>Your version number</code></em>') OSTYPE(bsd4.4)

FEATURE(accept_unresolvable_domains)
FEATURE(nocanonify)
FEATURE(mailertable, `hash -o /etc/mail/mailertable')

define(`UUCP_RELAY', <em class="replaceable"><code>your.uucp.relay</code></em>)
define(`UUCP_MAX_SIZE', 200000)
define(`confDONT_PROBE_INTERFACES')

MAILER(local)
MAILER(smtp)
MAILER(uucp)

Cw    <em class="replaceable"><code>your.alias.host.name</code></em>
Cw    <em class="replaceable"><code>youruucpnodename.UUCP</code></em></pre><p>
      <code class="literal">accept_unresolvable_domains</code>,
      <code class="literal">nocanonify</code> および
      <code class="literal">confDONT_PROBE_INTERFACES</code> 機能を含んでいる行は、
      メール配送時にまったく DNS を使用しません。
      <code class="literal">UUCP_RELAY</code> の記述は UUCP 配送に対応するのに必要です。
      そこにインターネットホスト名を単に書くだけで
      .UUCP pseudo ドメインアドレスを扱うことができるようになります。
      大抵の場合、あなたの ISP のメールリレーをそこに入力するでしょう。</p><p>次に、
      <code class="filename">/etc/mail/mailertable</code> が必要になります。
      メールを配送するリンクが外界との間に一つだけの場合は、
      次のようにファイルを記述するだけで十分でしょう。</p><pre class="programlisting">#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
.                             uucp-dom:<em class="replaceable"><code>your.uucp.relay</code></em></pre><p>次はさらに複雑な例です。</p><pre class="programlisting">#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
#
horus.interface-business.de   uucp-dom:horus
.interface-business.de        uucp-dom:if-bus
interface-business.de         uucp-dom:if-bus
.heep.sax.de                  smtp8:%1
horus.UUCP                    uucp-dom:horus
if-bus.UUCP                   uucp-dom:if-bus
.                             uucp-dom:</pre><p>はじめの三行はドメインで宛先を指定されたメールが、
      配送路を <span class="quote">「<span class="quote">近道</span>」</span> するために、
      デフォルトルートではなく代わりにいくつかの UUCP 隣接ホストへ送られる特別な場合を扱います。
      次の行はメールを SMTP で配送可能なローカルイーサネットドメインへ送ります。
      最後に
      <code class="literal">uucp-neighbor
	!recipient</code>
      がデフォルトルートを上書きすることを許可するための UUCP 隣接ホストは
      .UUCP 仮想ドメイン記法で言及されます。
      最後の行は常に他のすべてが当てはまるシングルドットです。
      これは UUCP 隣接ホストへの UUCP 配送をすることで、
      世界に向けたあなたの普遍的メールゲートウェイとして役に立ちます。
      <code class="literal">uucp-dom:</code> キーワードの後ろにあるノード名はすべて、
      <code class="literal">uuname</code> コマンドを使用することで確かめられる正しい
      UUCP 隣接ホストである必要があります。</p><p>このファイルは、実際に使用する前に DBM
      データベース形式に変換する必要があることに注意してください。
      これを実行するコマンドラインは mailertable
      ファイルの先頭にコメントとして書かれています。
      mailertable を変更するたびにいつもこのコマンドを実行する必要があります。</p><p>最後のアドバイス: もし、
      いくつかのメールルーティングがうまく動いているかどうか分からないときは
      <span class="application">sendmail</span> に
      <code class="option">-bt</code> オプションをつけることを覚えておいてください。
      これは <span class="application">sendmail</span> を
      <span class="emphasis"><em>アドレステストモード</em></span> で起動します。
      あなたがテストしたいメールルーティングのアドレスを後につけて、
      単純に <code class="literal">3,0</code> と入力してください。
      最後の行は、内部で使われたメールエージェント、
      このエージェントが呼び出された目的地ホスト、および
      (もしかしたら変換された) アドレスを表示します。
      このモードを終了するには
      <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>D</strong></span>
      を入力します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sendmail -bt</code></strong>
ADDRESS TEST MODE (ruleset 3 NOT automatically invoked)
Enter &lt;ruleset&gt; &lt;address&gt;
<code class="prompt">&gt;</code> <strong class="userinput"><code>3,0 foo@example.com</code></strong>
canonify           input: foo @ example . com
...
parse            returns: $# uucp-dom $@ <em class="replaceable"><code>your.uucp.relay</code></em> $: foo &lt; @ example . com . &gt;
<code class="prompt">&gt;</code> <strong class="userinput"><code>^D</code></strong></pre></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="SMTP-dialup"></a>21.8. ダイアルアップ接続でメールを使う</h2></div></div></div><p>あなたが固定 IP アドレスを持っているのなら、
      デフォルトから何も変更する必要はありません。
      割りあてられたインターネット名をホスト名に設定すれば、
      <span class="application">sendmail</span> が残りをやってくれます。</p><p>あなたが動的に割り当てられた IP アドレスを持っていて、
      インターネットに接続するのにダイアルアップ PPP を使用しているのなら、
      おそらく ISP のメールサーバにメールボックスがあるでしょう。
      ここでは、あなたの ISP のドメインが
      <code class="systemitem">example.net</code>,
      あなたのユーザ名が <code class="systemitem">user</code>,
      あなたのマシンは <code class="systemitem">bsd.home</code>
      と呼ばれているものとします。
      また、ISP から、メールリレーとして <code class="systemitem">relay.example.net</code>
      を使用してよいと通知されているとします。</p><p>(訳注: ISP 上の) メールボックスからメールを取得するためには、
      取得アプリケーションをインストールしないといけません。
      <span class="application">fetchmail</span> ユーティリティは、
      さまざまなプロトコルの多くに対応しているのでよい選択肢です。
      通常、あなたの ISP は POP3 を提供しています。
      あなたが user-PPP を使用しているなら、次のエントリを
      <code class="filename">/etc/ppp/ppp.linkup</code> に追加することで、
      インターネット接続が確立したときに自動的にメールを取得することができます。</p><pre class="programlisting">MYADDR:
 !bg su user -c fetchmail</pre><p>あなたがローカルではないアカウントへのメールを配送するために
      (下記のような) <span class="application">sendmail</span>
      を使用しているなら、
      インターネット接続が確立するとすぐに、
      <span class="application">sendmail</span>
      があなたのメールキューを処理して欲しいとおそらく考えるでしょう。
      これを行うには、<code class="filename">/etc/ppp/ppp.linkup</code> ファイルの
      <code class="command">fetchmail</code> コマンドの後に次のコマンドを追加してください。</p><pre class="programlisting"> !bg su user -c "sendmail -q"</pre><p><code class="systemitem">bsd.home</code> 上に <code class="systemitem">user</code>
      というアカウントを所有しているとします。
      <code class="systemitem">bsd.home</code> 上の <code class="systemitem">user</code>
      のホームディレクトリに <code class="filename">.fetchmailrc</code>
      ファイルを作成します。</p><pre class="programlisting">poll example.net protocol pop3 fetchall pass MySecret</pre><p>このファイルはパスワード <code class="literal">MySecret</code>
      を含んでいるので、<code class="systemitem">user</code>
      を除く他の誰にも読めるようになっていてはいけません。</p><p>正しい <code class="literal">from:</code> ヘッダでメールを送るためには、
      <span class="application">sendmail</span> が <code class="literal">user@bsd.home</code>
      ではなく <code class="literal">user@example.net</code> を使用するようにしなくてはいけません。
      また、素早くメール送信をするために
      <span class="application">sendmail</span> にすべてのメールを
      <code class="systemitem">relay.example.net</code> 経由で送るようにもしたいかもしれません。</p><p>次の <code class="filename">.mc</code> ファイルで十分でしょう。</p><pre class="programlisting">VERSIONID(`bsd.home.mc version 1.0')
OSTYPE(bsd4.4)dnl
FEATURE(nouucp)dnl
MAILER(local)dnl
MAILER(smtp)dnl
Cwlocalhost
Cwbsd.home
MASQUERADE_AS(`example.net')dnl
FEATURE(allmasquerade)dnl
FEATURE(masquerade_envelope)dnl
FEATURE(nocanonify)dnl
FEATURE(nodns)dnl
define(`SMART_HOST', `relay.example.net')
Dmbsd.home
define(`confDOMAIN_NAME',`bsd.home')dnl
define(`confDELIVERY_MODE',`deferred')dnl</pre><p><code class="filename">.mc</code> ファイルを <code class="filename">sendmail.cf</code>
      ファイルに変換する方法の詳細については前の節を参照してください。
      また、<code class="filename">sendmail.cf</code> ファイルを変更した後は、
      <span class="application">sendmail</span> を再起動し忘れないでください。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="SMTP-Auth"></a>21.9. SMTP 認証</h2></div></div></div><p>メールサーバ上で <acronym class="acronym">SMTP</acronym> 認証を行うと、
      多くの利益があります。
      <acronym class="acronym">SMTP</acronym> 認証は <span class="application">sendmail</span>
      にもう一つのセキュリティ層を追加することができます。
      さらに、ホストを切りかえるモバイルユーザにとっては、
      その都度メールクライアントの設定を変更せずとも
      同じメールサーバを利用できるようになります。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>ports から
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl/pkg-descr">security/cyrus-sasl</a>
	  をインストールします。
	  この port は
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl/pkg-descr">security/cyrus-sasl</a> にあります。
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl/pkg-descr">security/cyrus-sasl</a>
	  にはここで使用する方法に対する多くのコンパイルオプションがあり、
	  確実に <code class="option">pwcheck</code> オプションを選択してください。</p></li><li class="step"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl/pkg-descr">security/cyrus-sasl</a>
	  をインストールした後に
	  <code class="filename">/usr/local/lib/sasl/Sendmail.conf</code>
	  を編集して (もし無ければ作成して) 次の行を追加してください。</p><pre class="programlisting">pwcheck_method: passwd</pre><p>この方法は <span class="application">sendmail</span>
	  があなたの FreeBSD の <code class="filename">passwd</code>
	  データベースに対して認証することを可能にします。
	  この方法は <acronym class="acronym">SMTP</acronym> 認証に必要となる、
	  それぞれのユーザに対する一組の新しいユーザ名とパスワードを
	  作成する際のトラブルを減らし、
	  ログインパスワードとメールパスワードを同じままにします。</p></li><li class="step"><p>ここで <code class="filename">/etc/make.conf</code> 編集し、
	  次の行を加えます。</p><pre class="programlisting">SENDMAIL_CFLAGS=-I/usr/local/include/sasl1 -DSASL
SENDMAIL_LDFLAGS=-L/usr/local/lib
SENDMAIL_LDADD=-lsasl</pre><p>これらの行は <span class="application">sendmail</span> に対して、
	  コンパイルするときに <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/cyrus-sasl/pkg-descr">cyrus-sasl</a>
	  とリンクするための適切な設定オプションを与えるものです。
	  <span class="application">sendmail</span> を再コンパイルする前に
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/cyrus-sasl/pkg-descr">cyrus-sasl</a>
	  がインストールされていることを確かめてください。</p></li><li class="step"><p>次のコマンドを入力して <span class="application">sendmail</span>
	  を再コンパイルしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.sbin/sendmail</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make obj</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong></pre><p><span class="application">sendmail</span> のコンパイルは
	  <code class="filename">/usr/src</code> が大幅に変更されていなくて、
	  必要な共有ライブラリが利用可能であれば何の問題も起こらないでしょう。</p></li><li class="step"><p><span class="application">sendmail</span>
	  をコンパイルして再インストールした後は、
	  <code class="filename">/etc/mail/freebsd.mc</code> ファイル
	  (またはあなたが <code class="filename">.mc</code>
	  ファイルとして使用しているファイル。
	  多くの管理者は唯一の名前を用いるために <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hostname&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">hostname</span>(1)</span></a> の出力を
	  <code class="filename">.mc</code> として使用することを選んでいます)
	  を編集してください。
	  次の行を加えてください。</p><pre class="programlisting">dnl set SASL options
TRUST_AUTH_MECH(`GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN')dnl
define(`confAUTH_MECHANISMS', `GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN')dnl
define(`confDEF_AUTH_INFO', `/etc/mail/auth-info')dnl</pre><p>これらのオプションは、ユーザを認証するために
	  <span class="application">sendmail</span>
	  が利用可能な異なる方法を設定します。
	  もし <span class="application">pwcheck</span>
	  以外の方法を使用したいのならドキュメントを参照してください。</p></li><li class="step"><p>最後に <code class="filename">/etc/mail</code> で <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>
	  を実行してください。
	  これにより、新しい <code class="filename">.mc</code>
	  ファイルから <code class="filename">freebsd.cf</code> という名前
	  (またはあなたの <code class="filename">.mc</code> に使用している名前) の
	  <code class="filename">.cf</code> ファイルが作成されます。
	  それから <code class="command">make install restart</code>
	  コマンドを実行してください。
	  新しい <code class="filename">.cf</code> ファイルが
	  <code class="filename">sendmail.cf</code> にコピーされ、
	  <span class="application">sendmail</span> が適切に再起動されるでしょう。
	  この手続きについての詳細は
	  <code class="filename">/etc/mail/Makefile</code>を参照してください。</p></li></ol></div><p>すべてがうまくいけば、ログイン情報をメールクライアントに入力し、
      テストメッセージを送ることができるでしょう。
      より詳細に調べるには <span class="application">sendmail</span> の
      <code class="option">LogLevel</code> を 13 に設定し、
      すべてのエラーについて <code class="filename">/var/log/maillog</code>
      を見てください。</p><p>このサービスがシステムを起動した後にいつでも利用可能となるように、
      <code class="filename">/etc/rc.conf</code> に次の行を追加しておくとよいでしょう。</p><pre class="programlisting">sasl_pwcheck_enable="YES"
sasl_pwcheck_program="/usr/local/sbin/pwcheck"</pre><p>これにより、システムの起動時に
      <acronym class="acronym">SMTP_AUTH</acronym> が確実に初期化されるでしょう。</p><p>詳細については
      <a class="link" href="http://www.sendmail.org/~ca/email/auth.html" target="_top">
	<acronym class="acronym">SMTP</acronym> 認証</a> に関する
      <span class="application">sendmail</span> の文書を参照してください。</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="advanced-networking"></a>第22章 高度なネットワーク</h2></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#advanced-networking-synopsis">22.1. この章では</a></span></dt><dt><span class="sect1"><a href="#network-routing">22.2. ゲートウェイと経路</a></span></dt><dt><span class="sect1"><a href="#network-wireless">22.3. 無線ネットワーク</a></span></dt><dt><span class="sect1"><a href="#network-bluetooth">22.4. Bluetooth</a></span></dt><dt><span class="sect1"><a href="#network-bridging">22.5. ブリッジ</a></span></dt><dt><span class="sect1"><a href="#network-nfs">22.6. NFS</a></span></dt><dt><span class="sect1"><a href="#network-diskless">22.7. ディスクレス稼働</a></span></dt><dt><span class="sect1"><a href="#network-isdn">22.8. ISDN</a></span></dt><dt><span class="sect1"><a href="#network-nis">22.9. NIS/YP</a></span></dt><dt><span class="sect1"><a href="#network-dhcp">22.10. DHCP</a></span></dt><dt><span class="sect1"><a href="#network-dns">22.11. DNS</a></span></dt><dt><span class="sect1"><a href="#network-ntp">22.12. NTP</a></span></dt><dt><span class="sect1"><a href="#network-natd">22.13. ネットワークアドレス変換 (NAT)</a></span></dt><dt><span class="sect1"><a href="#network-inetd">22.14. <span class="application">inetd</span> <span class="quote">「<span class="quote">スーパサーバ</span>」</span></a></span></dt><dt><span class="sect1"><a href="#network-plip">22.15. パラレルライン IP (PLIP)</a></span></dt><dt><span class="sect1"><a href="#network-ipv6">22.16. IPv6</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="advanced-networking-synopsis"></a>22.1. この章では</h2></div></div></div><p>この章では <span class="trademark">UNIX</span>®
      システム上で良く利用されるネットワークサービスについて説明します。
      FreeBSD が利用するすべてのネットワークサービスをどのように定義し、
      設定し、テストし、そして保守するのかを扱います。さらに、
      本章を通してあなたの役に立つ設定例が載っています。</p><p>この章を読めば以下のことが分かります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ゲートウェイと経路の基本</p></li><li class="listitem"><p>FreeBSD をブリッジとして動作させる方法</p></li><li class="listitem"><p>ネットワークファイルシステム (NFS) の設定方法</p></li><li class="listitem"><p>ディスクレスマシンのネットワークブートの設定方法</p></li><li class="listitem"><p>ユーザアカウントを共有するためのネットワークインフォメーションサーバ
	  (NIS) の設定方法</p></li><li class="listitem"><p>DHCP を用いて自動的にネットワーク設定を行う方法</p></li><li class="listitem"><p>ドメインネームサーバ (DNS) の設定方法</p></li><li class="listitem"><p>NTP プロトコルを用いて日時を同期してタイムサーバを設定する方法</p></li><li class="listitem"><p>ネットワークアドレス変換 (NAT) の設定方法</p></li><li class="listitem"><p><code class="command">inetd</code> デーモンの管理方法</p></li><li class="listitem"><p>PLIP 経由で二台のコンピュータを接続する方法</p></li><li class="listitem"><p>FreeBSD で IPv6 を設定する方法</p></li></ul></div><p>この章を読む前に、以下のことを行っておくべきです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/etc/rc</code>
	  スクリプトの基本を理解していること</p></li><li class="listitem"><p>基礎的なネットワーク用語に精通していること</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-routing"></a>22.2. ゲートウェイと経路</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Gryphon</span> <span class="firstname">Coranth</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp93264336" class="indexterm"></a><a id="idp93264848" class="indexterm"></a><a id="idp93265360" class="indexterm"></a><p>あるマシンがネットワーク上で他のマシンをみつけることができるようにするには、
      あるマシンから他のマシンへどのようにたどり着くかを記述する適切な仕組みが必要です。
      この仕組みを<em class="firstterm">ルーティング</em>と呼びます。
      <span class="quote">「<span class="quote">経路</span>」</span> (route) は <span class="quote">「<span class="quote">送信先</span>」</span>
      (destination) と <span class="quote">「<span class="quote">ゲートウェイ</span>」</span> の
      2 つのアドレスの組で定義します。この組合せは、この
      <span class="emphasis"><em>送信先</em></span> へたどり着こうとする場合は、その
      <span class="emphasis"><em>ゲートウェイ</em></span>
      を通じて通信することを示しています。
      送信先には個々のホスト、サブネット、<span class="quote">「<span class="quote">デフォルト</span>」</span>
      の 3 つの型があります。
      <span class="quote">「<span class="quote">デフォルトルート</span>」</span>
      は他のどの経路も適用できない場合に使われます。
      デフォルトルートについてはのちほどもう少し詳しく述べます。
      また、ゲートウェイには、個々のホスト、インタフェース
      (<span class="quote">「<span class="quote">リンク</span>」</span> とも呼ばれます)、
      イーサネットハードウェアアドレス (MAC アドレス)
      の 3 つの型があります。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93269840"></a>22.2.1. 例</h3></div></div></div><p>以下に示す <code class="command">netstat</code>
	の例を使って、ルーティングのさまざまな状態を説明します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>netstat -r</code></strong>
Routing tables

Destination      Gateway            Flags     Refs     Use     Netif Expire

default          outside-gw         UGSc       37      418      ppp0
localhost        localhost          UH          0      181       lo0
test0            0:e0:b5:36:cf:4f   UHLW        5    63288       ed0     77
10.20.30.255     link#1             UHLW        1     2421
example.com      link#1             UC          0        0
host1            0:e0:a8:37:8:1e    UHLW        3     4601       lo0
host2            0:e0:a8:37:8:1e    UHLW        0        5       lo0 =&gt;
host2.example.com link#1             UC          0        0
224              link#1             UC          0        0</pre><a id="idp93280592" class="indexterm"></a><p>最初の 2 行はデフォルトルート
	(<a class="link" href="#network-routing-default" title="22.2.2. デフォルトルート">次節</a>で扱います) と、
	<code class="systemitem">localhost</code> への経路を示しています。</p><a id="idp93282384" class="indexterm"></a><p><code class="literal">localhost</code> に割り当てるインタフェース
	(<code class="literal">Netif</code> 欄)
	としてこのルーティングテーブルが指定しているのは
	<code class="filename">lo0</code>
	で、これはループバックデバイスともいいます。
	これは結局のところ出たところに戻るだけなので、
	この送信先あてのトラフィックは、LAN
	に送られずに、すべて内部的に処理されます。</p><a id="idp93284304" class="indexterm"></a><p>次の行では
	<code class="systemitem">0:e0:</code> から始まるアドレスに注目しましょう。
	これはイーサネットハードウェアアドレスで、MAC アドレスともいいます。
	FreeBSD はローカルなイーサネット上の任意のホスト
	(この例では <code class="systemitem">test0</code>) を自動的に認識し、
	イーサネットインタフェース <code class="filename">ed0</code>
	にそのホストへの直接の経路をつけ加えます。
	この種の経路には、タイムアウト時間 (<code class="literal">Expire</code> 欄)
	も結びつけられており、
	指定された時間内にホストからの応答がないことを判断するのに用いられます。
	その場合、そのホストへの経路情報は自動的に削除されます。
	これらのホストは
	RIP (Routing Information Protocol) という、
	最短パス判定に基づいてローカルなホストへの経路を決定する仕組みを利用して認識されます。</p><a id="idp93287632" class="indexterm"></a><p>さらに FreeBSD
	ではローカルサブネットへの経路情報も加えることができます
	(<code class="systemitem">10.20.30.255</code> は
	<code class="systemitem">10.20.30</code>
	というサブネットに対するブロードキャストアドレスで、
	<code class="systemitem">example.com</code>
	はこのサブネットに結びつけられているドメイン名)。
	<code class="literal">link#1</code> という名称は、
	このマシンの一つ目のイーサネットカードのことをさします。
	これらについては、
	何も追加インタフェースが指定されていないことがわかります。</p><p>これら 2 つのグループ
	(ローカルネットワークホストとローカルサブネット)
	は、両方とも <span class="application">routed</span>
	というデーモンによって自動的に経路が設定されます。
	<span class="application">routed</span> を動かさなければ、静的に定義した
	(つまり明示的に設定した) 経路のみが存在することになります。</p><p><code class="literal">host1</code> の行は私たちのホストのことで、
	イーサネットアドレスで示されています。送信側のホストの場合、
	FreeBSDはイーサネットインタフェースへ送るのではなく、
	ループバックインタフェース (<code class="filename">lo0</code>)
	を使います。</p><p>2 つある <code class="literal">host2</code> の行は、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> のエイリアスを使ったときにどのようになるかを示す例です
	(このようなことをする理由については
	Ethernet の節を参照してください)。
	<code class="filename">lo0</code> の後にある <code class="literal">=&gt;</code> は、
	インタフェースが (このアドレスがローカルなホストを参照しているので)
	ループバックを使っているというだけでなく、
	エイリアスになっていることも示しています。
	このような経路はエイリアスに対応しているホストにのみ現れます。
	ローカルネットワーク上の他のすべてのホストでは、
	それぞれの経路に対して単に<code class="literal">link#1</code> となります。</p><p>最後の行 (送信先サブネット <code class="systemitem">224</code>)
	はマルチキャストで扱うものですが、これは他の節で説明します。</p><p>最後に <code class="literal">Flags</code> (フラグ)
	欄にそれぞれの経路のさまざまな属性が表示されます。
	以下にフラグの一部と、それが何を意味しているかを示します。
      </p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>U</td><td>Up: この経路はアクティブです。</td></tr><tr><td>H</td><td>Host: 経路の送信先が単一のホストです。</td></tr><tr><td>G</td><td>Gateway: この送信先へ送られると、
		どこへ送ればよいかを明らかにして、
		そのリモートシステムへ送られます。</td></tr><tr><td>S</td><td>Static:
		この経路はシステムによって自動的に生成されたのではなく、
		手動で作成されました。</td></tr><tr><td>C</td><td>Clone:
		マシンに接続したときにこの経路に基づく新しい経路が作られます。
		この型の経路は通常はローカルネットワークで使われます。</td></tr><tr><td>W</td><td>WasCloned:
		ローカルエリアネットワーク (LAN) の (Clone)
		経路に基づいて自動的に生成された経路であることを示します。</td></tr><tr><td>L</td><td>Link:
		イーサネットハードウェアへの参照を含む経路です。</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-routing-default"></a>22.2.2. デフォルトルート</h3></div></div></div><a id="idp93344592" class="indexterm"></a><p>ローカルシステムからリモートホストにコネクションを張る必要がある場合、
	既知の経路が存在するかどうかを確認するためにルーティングテーブルをチェックします。
	到達するための経路を知っているサブネットの内部にリモートホストがある場合
	(Cloned routes)、
	システムはそのインタフェースから接続できるかどうか確認します。</p><p>知っているパスがすべて駄目だった場合でも、
	システムには最後の手段として <span class="quote">「<span class="quote">デフォルト</span>」</span>
	ルートがあります。このルートはゲートウェイルート
	(普通はシステムに 1 つしかありません) の特別なものです。そして、
	フラグ欄には必ず <code class="literal">c</code>
	が表示されています。このゲートウェイは、LAN
	内のホストにとって、どのマシンでも外部へ
	(PPP リンク、DSL、ケーブルモデム、T1、
	またはその他のネットワークインタフェースのいずれかを経由して)
	直接接続するために設定されるものです。</p><p>外部に対するゲートウェイとして機能するマシンでデフォルトルートを設定する場合、
	デフォルトルートはインターネットサービスプロバイダ (ISP)
	のサイトのゲートウェイマシンになるでしょう。</p><p>それではデフォルトルートの一例を見てみましょう。
	一般的な構成を示します。</p><div class="mediaobject"><img src="advanced-networking/net-routing.png" /></div><p>ホスト <code class="systemitem">Local1</code> とホスト <code class="systemitem">Local2</code>
	はあなたのサイト内にあります。<code class="systemitem">Local1</code>
	はダイアルアップ PPP 接続経由で ISP に接続されています。
	この PPP サーバコンピュータは、その ISP
	のインターネットへの接続点に向けた外部インタフェースを備えた他のゲートウェイコンピュータへ
	LAN を通じて接続しています。</p><p>あなたのマシンのデフォルトルートはそれぞれ次のようになります。</p><div class="informaltable"><table border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>ホスト</th><th>デフォルトゲートウェイ</th><th>インタフェース</th></tr></thead><tbody><tr><td>Local2</td><td>Local1</td><td>Ethernet</td></tr><tr><td>Local1</td><td>T1-GW</td><td>PPP</td></tr></tbody></table></div><p><span class="quote">「<span class="quote">なぜ (あるいは、どうやって)
	デフォルトゲートウェイを、<code class="systemitem">Local1</code> が接続されている
	ISP のサーバではなく、<code class="systemitem">T1-GW</code> に設定するのか</span>」</span>
	という質問がよくあります。</p><p>PPP 接続で、あなたのサイト側の PPP インタフェースは、
	ISP のローカルネットワーク上のアドレスを用いているため、
	ISP のローカルネットワーク上のすべてのマシンへの経路は
	自動的に生成されています。
	つまりあなたのマシンは、どのようにして <code class="systemitem">T1-GW</code>
	に到達するかという経路を既に知っていることになりますから、
	ISP サーバにトラフィックを送るのに、
	中間的な段階を踏む必要はありません。</p><p>一般的にローカルネットワークでは
	<code class="systemitem">X.X.X.1</code>
	というアドレスをゲートウェイアドレスとして使います。ですから
	(同じ例を用います)、あなたの class-C のアドレス空間が
	<code class="systemitem">10.20.30</code> で ISP が
	<code class="systemitem">10.9.9</code> を用いている場合、
	デフォルトルートは次のようになります。</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>ホスト</th><th>デフォルトルート</th></tr></thead><tbody><tr><td>Local2 (10.20.30.2)</td><td>Local1 (10.20.30.1)</td></tr><tr><td>Local1 (10.20.30.1, 10.9.9.30)</td><td>T1-GW (10.9.9.1)</td></tr></tbody></table></div><p>デフォルトルートは <code class="filename">/etc/rc.conf</code>
	ファイルで簡単に定義できます。この例では、
	<code class="systemitem">Local2</code> マシンで <code class="filename">/etc/rc.conf</code>
	に次の行を追加しています。</p><pre class="programlisting">defaultrouter="10.20.30.1"</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a>
	コマンドを使ってコマンドラインから直接実行することもできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add default 10.20.30.1</code></strong></pre><p>経路情報を手動で操作する方法について詳しいことは
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a> のマニュアルページをご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93442384"></a>22.2.3. デュアルホームホスト</h3></div></div></div><a id="idp93447248" class="indexterm"></a><p>ここで扱うべき種類の設定がもう一つあります。
	それは 2 つの異なるネットワークにまたがるホストです。
	技術的にはゲートウェイとして機能するマシン (上の例では
	PPP コネクションを用いています) はすべてデュアルホームホストです。
	しかし実際にはこの言葉は、2 つの
	LAN 上のサイトであるマシンを指す言葉としてのみ使われます。</p><p>2 枚のイーサネットカードを持つマシンが、
	別のサブネット上にそれぞれアドレスを持っている場合があります。
	あるいは、イーサネットカードが 1 枚しかないマシンで、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> のエイリアスを使っているかもしれません。
	物理的に分かれている
	2 つのイーサネットのネットワークが使われているならば前者が用いられます。
	後者は、物理的には 1 つのネットワークセグメントで、
	論理的には 2 つのサブネットに分かれている場合に用いられます。</p><p>どちらにしても、
	このマシンがお互いのサブネットへのゲートウェイ (inbound	route)
	として定義されていることが分かるように、
	おのおののサブネットでルーティングテーブルを設定します。このマシンが
	2 つのサブネットの間のルータとして動作するという構成は、
	パケットのフィルタリングを実装する必要がある場合や、
	一方向または双方向のファイアウォールを利用したセキュリティを構築する場合によく用いられます。</p><p>このマシンが二つのインタフェース間で実際にパケットを受け渡すようにしたい場合は、
      FreeBSD でこの機能を有効にしないといけません。
      くわしい手順については次の節をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-dedicated-router"></a>22.2.4. ルータの構築</h3></div></div></div><a id="idp93450960" class="indexterm"></a><p>ネットワークルータは単にあるインタフェースから別のインタフェースへパケットを転送するシステムです。
	インターネット標準およびすぐれた技術的な慣習から、
	FreeBSD プロジェクトは
	FreeBSD においてこの機能をデフォルトでは有効にしていません。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> 内で次の変数を <code class="literal">YES</code>
	に変更することでこの機能を有効にできます。</p><pre class="programlisting">gateway_enable=YES          # Set to YES if this host will be a gateway</pre><p>このオプションは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> 変数の
	<code class="varname">net.inet.ip.forwarding</code> を
	<code class="literal">1</code> に設定します。
	一時的にルーティングを停止する必要があるときには、
	この変数を一時的に <code class="literal">0</code> に設定しなおせます。</p><p>次に、トラフィックの宛先を決めるために、
	そのルータには経路情報が必要になります。
	ネットワークが十分簡素なら、静的経路が利用できます。
	また、FreeBSD は BSD の標準ルーティングデーモンである
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=routed&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">routed</span>(8)</span></a> を備えています。これは RIP
	(バージョン 1 および 2)	および IRDP を扱えます。
	BGP バージョン 4、OSPF バージョン2、
	その他洗練されたルーティングプロトコルは
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/zebra/pkg-descr">net/zebra</a>
	package を用いれば対応できます。
	また、より複雑なネットワークルーティングソリューションには、
	<span class="application"><span class="trademark">GateD</span>®</span>
	のような商用製品も利用可能です。</p><a id="idp93458000" class="indexterm"></a><a id="idp93458512" class="indexterm"></a><a id="idp93459024" class="indexterm"></a><p>このように FreeBSD を設定したとしても、
	ルータに対するインターネット標準要求を完全に満たすわけではありません。
	しかし、通常利用に関しては十分といえます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93460048"></a>22.2.5. 静的な経路の設定</h3></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Hoang</span> <span class="firstname">Al</span> [FAMILY Given]</span>. </span></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93462736"></a>22.2.5.1. 手動による経路の設定</h4></div></div></div><p>以下のようなネットワークが存在すると仮定します。</p><pre class="literallayout">
    INTERNET
      | (10.0.0.1/24) Default Router to Internet
      |
      |Interface xl0
      |10.0.0.10/24
   +------+
   |      | RouterA
   |      | (FreeBSD gateway)
   +------+
      | Interface xl1
      | 192.168.1.1/24
      |
  +--------------------------------+
   Internal Net 1      | 192.168.1.2/24
                       |
                   +------+
                   |      | RouterB
                   |      |
                   +------+
                       | 192.168.2.1/24
                       |
                     Internal Net 2
	</pre><p>このシナリオでは、FreeBSD マシンの <code class="systemitem">RouterA</code>
	  がインターネットに向けられたルータとして動作します。
	  ルータは外側のネットワークへ接続できるように
	  <code class="systemitem">10.0.0.1</code>
	  へ向けたデフォルトルートを保持しています。
	  <code class="systemitem">RouterB</code> はすでに適切に設定されており、
	  どこへ向かう必要があるか、
	  行き着く方法を知っていると仮定します
	  (この例では、図のように簡単です。
	  <code class="systemitem">192.168.1.1</code>
	  をゲートウェイとして <code class="systemitem">RouterB</code>
	  にデフォルトルートを追加するだけです)。</p><p><code class="systemitem">RouterA</code>
	  のルーティングテーブルを確認すると、
	  以下のような出力を得ます。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>netstat -nr</code></strong>
Routing tables

Internet:
Destination        Gateway            Flags    Refs      Use  Netif  Expire
default            10.0.0.1           UGS         0    49378    xl0
127.0.0.1          127.0.0.1          UH          0        6    lo0
10.0.0/24          link#1             UC          0        0    xl0
192.168.1/24       link#2             UC          0        0    xl1</pre><p>現在のルーティングテーブルでは、<code class="systemitem">RouterA</code>
	  はまだ Internal Net 2 には到達できないでしょう。
	  <code class="systemitem">192.168.2.0/24</code>
	  の経路を保持していないからです。
	  解決するための一つの方法は、経路を手動で追加することです。
	  以下のコマンドで <code class="systemitem">RouterA</code>
	  のルーティングテーブルに <code class="systemitem">192.168.1.2</code>
	  を送り先として、Internal Net 2 ネットワークを追加します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add -net 192.168.2.0/24 192.168.1.2</code></strong></pre><p>これにより、<code class="systemitem">RouterA</code> は、 
	  <code class="systemitem">192.168.2.0/24</code>
	  ネットワーク上のホストに到達出来ます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93481680"></a>22.2.5.2. 永続的な設定</h4></div></div></div><p>上記の例は、
	  起動しているシステム上に静的な経路を設定する方法としては完全です。
	  しかしながら、FreeBSD
	  マシンを再起動した際にルーティング情報が残らないという問題が一つあります。
	  静的な経路を追加するには、<code class="filename">/etc/rc.conf</code>
	  ファイルにルートを追加してください。</p><pre class="programlisting"># Add Internal Net 2 as a static route
static_routes="internalnet2"
route_internalnet2="-net 192.168.2.0/24 192.168.1.2"</pre><p><code class="literal">static_routes</code> の設定変数は、
	  スペースによって分離される文字列のリストです。
	  それぞれの文字列は経路名として参照されます。
	  上記の例では <code class="literal">static_routes</code> 
	  は一つの文字列のみを持ちます。
	  その文字列は <em class="replaceable"><code>internalnet2</code></em> です。その後、
	  <code class="literal">route_internalnet2</code>
	  という設定変数を追加し、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a> コマンドに与えるすべての設定パラメータを指定しています。
	  前節の例では、以下のコマンド</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add -net 192.168.2.0/24 192.168.1.2</code></strong></pre><p>を用いたので、
	  <code class="literal">"-net 192.168.2.0/24 192.168.1.2"</code>
	  が必要になります。</p><p>上記のように <code class="literal">static_routes</code> 
	  は一つ以上の文字列を持つことが出来るので、
	  多数の静的な経路を作ることができます。
	  以下の行は <code class="systemitem">192.168.0.0/24</code>
	  および <code class="systemitem">192.168.1.0/24</code>
	  ネットワークを、
	  仮想ルータ上に静的な経路として追加する例です。</p><pre class="programlisting">static_routes="net1 net2"
route_net1="-net 192.168.0.0/24 192.168.0.1"
route_net2="-net 192.168.1.0/24 192.168.1.1"</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93490640"></a>22.2.6. ルーティングの伝搬</h3></div></div></div><a id="idp93491280" class="indexterm"></a><p>外部との経路をどのように定義したらよいかはすでに説明しました。
	しかし外部から私たちのマシンをどのようにして見つけるのかについては説明していません。</p><p>ある特定のアドレス空間 (この例では class-C のサブネット)
	におけるすべてのトラフィックが、
	到着したパケットを内部で転送するネットワーク上の特定のホストに送られるようにルーティングテーブルを設定することができるのは分かっています。</p><p>あなたのサイトにアドレス空間を割り当てる場合、
	あなたのサブネットへのすべてのトラフィックがすべて
	PPP リンクを通じてサイトに送ってくるようにサービスプロバイダはルーティングテーブルを設定します。
	しかし、国境の向こう側のサイトはどのようにしてあなたの
	ISP へ送ることを知るのでしょうか?</p><p>割り当てられているすべてのアドレス空間の経路を維持する
	(分散している DNS 情報とよく似た) システムがあり、
	そのインターネットバックボーンへの接続点を定義しています。
	<span class="quote">「<span class="quote">バックボーン</span>」</span> とは国を越え、
	世界中のインターネットのトラフィックを運ぶ主要な信用できる幹線のことです。
	どのバックボーンマシンも、
	あるネットワークから特定のバックボーンのマシンへ向かうトラフィックと、
	そのバックボーンのマシンからあなたのネットワークに届くサービスプロバイダまでのチェーンのマスタテーブルのコピーを持っています。</p><p>あなたのサイトが接続
	(プロバイダからみて内側にあることになります) したということを、
	プロバイダからバックボーンサイトへ通知することはプロバイダの仕事です。
	これが経路の伝搬です。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93494224"></a>22.2.7. トラブルシューティング</h3></div></div></div><a id="idp93494864" class="indexterm"></a><p>経路の伝搬に問題が生じて、
	いくつかのサイトが接続をおこなうことができなくなることがあります。
	ルーティングがどこでおかしくなっているかを明らかにするのに最も有効なコマンドはおそらく
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a> コマンドでしょう。
	このコマンドは、あなたがリモートマシンに対して接続をおこなうことができない
	(たとえば <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> に失敗するような)
	場合も、同じように有効です。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a> コマンドは、
	接続を試みているリモートホストを引数にして実行します。
	試みている経路が経由するゲートウェイホストを表示し、
	最終的には目的のホストにたどり着くか、
	コネクションの欠如によって終ってしまうかのどちらかになります。</p><p>より詳しい情報は、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a>
	のマニュアルページをみてください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93500112"></a>22.2.8. マルチキャストルーティング</h3></div></div></div><a id="idp93500752" class="indexterm"></a><p>FreeBSD はマルチキャストアプリケーションとマルチキャストルーティングの両方にネイティブ対応しています。
	マルチキャストアプリケーションを動かすのに FreeBSD
	で特別な設定をする必要は一切ありません。
	アプリケーションは普通はそのままで動くでしょう。
	マルチキャストルーティングに対応するには、
	下のオプションを追加してカーネルをコンパイルする必要があります。</p><pre class="programlisting">options MROUTING</pre><p>さらに、<code class="filename">/etc/mrouted.conf</code>
	を編集してルーティングデーモン <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrouted</span>(8)</span></a>
	を設定し、トンネルと DVMRP を設置する必要があります。
	マルチキャスト設定についての詳細は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrouted</span>(8)</span></a>
	のマニュアルページを参照してください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-wireless"></a>22.3. 無線ネットワーク</h2></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Anderson</span> <span class="firstname">Eric</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp93516496" class="indexterm"></a><a id="idp93517008" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93518160"></a>22.3.1. はじめに</h3></div></div></div><p>常にネットワークケーブルをつないでいるという面倒なことをせずに、
	コンピュータを使用できることは、とても有用でしょう。
	FreeBSD は無線のクライアントとして、
	さらに <span class="quote">「<span class="quote">アクセスポイント</span>」</span> としても使えます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93519696"></a>22.3.2. 無線の動作モード</h3></div></div></div><p>802.11 無線デバイスの設定には、BSS と IBSS
	の二つの方法があります。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93520848"></a>22.3.2.1. BSS モード</h4></div></div></div><p>BSS モードは一般的に使われているモードです。
	  BSS モードはインフラストラクチャモードとも呼ばれています。
	  このモードでは、
	  多くの無線アクセスポイントが
	  1 つの有線ネットワークに接続されます。
	  それぞれのワイヤレスネットワークは固有の名称を持っています。
	  その名称はネットワークの SSID と呼ばれます。</p><p>無線クライアントはこれらの無線アクセスポイントに接続します。
	  IEEE 802.11 標準は無線ネットワークが接続するのに使用するプロトコルを規定しています。
	  SSID が設定されているときは、
	  無線クライアントを特定のネットワークに結びつけることができます。
	  SSID を明示的に指定しないことにより、
	  無線クライアントを任意のネットワークに接続することもできます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93522384"></a>22.3.2.2. IBSS モード</h4></div></div></div><p>アドホックモードとも呼ばれる IBSS モードは、
	  一対一通信のために設計された通信方式です。
	  実際には二種類のアドホックモードがあります。
	  一つは IBSS モードで、アドホックモード、または
	  IEEE アドホックモードとも呼ばれます。
	  このモードは IEEE 802.11 標準に規定されています。
	  もう一つはデモアドホックモードもしくは Lucent アドホックモード
	  (そして時々、紛らわしいことに、アドホックモード)
	  と呼ばれるモードです。
	  このモードは古く、802.11 が標準化する以前のアドホックモードで、
	  これは古い設備でのみ使用されるべきでしょう。
	  ここでは、どちらのアドホックモードについてもこれ以上言及しません。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93523664"></a>22.3.3. インフラストラクチャーモード</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93524304"></a>22.3.3.1. アクセスポイント</h4></div></div></div><p>アクセスポイントは一つ以上の無線クライアントが、
	  そのデバイスをセントラルハブとして利用できるようにする無線ネットワークデバイスです。
	  アクセスポイントを使用している間、
	  すべてのクライアントはアクセスポイントを介して通信します。
	  家屋や職場、または公園などの空間を無線ネットワークで完全にカバーするために、
	  複数のアクセスポイントがよく使われます。</p><p>アクセスポイントは一般的に複数のネットワーク接続
	  (無線カードと、
	  その他のネットワークに接続するための一つ以上の有線イーサネットアダプタ)
	  を持っています。</p><p>アクセスポイントは、出来合いのものを購入することもできますし、
	  FreeBSD と対応している無線カードを組み合わせて、
	  自分で構築することもできます。
	  いくつものメーカが、
	  さまざまな機能をもった無線アクセスポイントおよび無線カードを製造しています。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93526224"></a>22.3.3.2. FreeBSD のアクセスポイントの構築</h4></div></div></div><a id="idp93526864" class="indexterm"></a><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93527888"></a>22.3.3.2.1. 要件</h5></div></div></div><p>FreeBSD で無線アクセスポイントを設定するためには、
	    互換性のある無線カードが必要です。
	    現状では Prism チップセットのカードのみに対応しています。
	    また FreeBSD
	    に対応している有線ネットワークカードも必要になるでしょう
	    (これを見つけるのは難しくないでしょう。
	    FreeBSD は多くの異なるデバイスに対応しているからです) 。
	    この手引きでは、
	    無線デバイスと有線ネットワークカードに接続しているネットワーク間のトラフィックを
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bridge&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bridge</span>(4)</span></a> したいと仮定します。</p><p>FreeBSD がアクセスポイントを実装するのに使用する hostap
	    機能はファームウェアの特定のバージョンで一番よく性能を発揮します。
	    Prism 2 カードは、
	    1.3.4 以降のバージョンのファームウェアで使用すべきです。
	    Prism 2.5 および Prism 3 カードでは、バージョン 1.4.9
	    のバージョンのファームウェアで使用すべきです。
	    それより古いバージョンのファームウェアは、
	    正常に動くかもしれませんし、動かないかもしれません。
	    現時点では、カードのファームウェアを更新する唯一の方法は、
	    カードの製造元から入手できる <span class="trademark">Windows</span>®
	    用ファームウェアアップデートユーティリティを使うものです。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93530704"></a>22.3.3.2.2. 設定</h5></div></div></div><p>はじめにシステムが無線カードを認識していることを確認してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig -a</code></strong>
wi0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet6 fe80::202:2dff:fe2d:c938%wi0 prefixlen 64 scopeid 0x7
        inet 0.0.0.0 netmask 0xff000000 broadcast 255.255.255.255
        ether 00:09:2d:2d:c9:50
        media: IEEE 802.11 Wireless Ethernet autoselect (DS/2Mbps)
        status: no carrier
        ssid ""
        stationname "FreeBSD Wireless node"
        channel 10 authmode OPEN powersavemode OFF powersavesleep 100
        wepmode OFF weptxkey 1</pre><p>細かいことは気にせず、
	    無線カードがインストールされていることを示す何かが表示されていることを確かめてください。
	    PC カードを使用していて、無線インタフェースを認識できない場合、
	    詳しい情報を得るために <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pccardc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pccardc</span>(8)</span></a> と <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pccardd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pccardd</span>(8)</span></a>
	    のマニュアルページを調べてみてください。</p><p>次に、アクセスポイント用に
	    FreeBSD のブリッジ機能を担う部分を有効にするために、
	    モジュールを読み込む必要があるでしょう。
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bridge&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bridge</span>(4)</span></a> モジュールを読み込むには、
	    次のコマンドをそのまま実行します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload bridge</code></strong></pre><p>モジュールを読み込む時には、何もエラーはでないはずです。
	    もしもエラーがでたら、カーネルに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bridge&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bridge</span>(4)</span></a>
	    のコードを入れてコンパイルする必要があるかもしれません。
	    ハンドブックの<a class="link" href="#network-bridging" title="22.5. ブリッジ">ブリッジ</a>の節が、
	    この課題を成し遂げる手助けをになるかもしれません。</p><p>ブリッジ部分が準備できたので、
	    どのインタフェース間をブリッジするのかを
	    FreeBSD カーネルに指定する必要があります。
	    これは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> を使って行います。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl net.link.ether.bridge=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl net.link.ether.bridge_cfg="wi0,xl0"</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl net.inet.ip.forwarding=1</code></strong></pre><p>FreeBSD 5.2-RELEASE
	  以降では、次のように指定しなければなりません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl net.link.ether.bridge.enable=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl net.link.ether.bridge.config="wi0,xl0"</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl net.inet.ip.forwarding=1</code></strong></pre><p>さて、無線カードを設定するときです。
	    次のコマンドはカードをアクセスポイントとして設定します。</p><pre class="screen">
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0 ssid my_net channel 11 media DS/11Mbps mediaopt hostap up stationname "FreeBSD AP"</code></strong>
	  </pre><p>この <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> コマンド行は
	    <code class="filename">wi0</code> インタフェースを up
	    状態にし、SSID を <em class="replaceable"><code>my_net</code></em> に設定し、
	    ステーション名を <em class="replaceable"><code>FreeBSD AP</code></em> に設定します。
	    <code class="option">media DS/11Mbps</code> オプションはカードを 11Mbps
	    モードに設定し、また <code class="option">mediaopt</code>
	    を実際に有効にするのに必要です。
	    <code class="option">mediaopt hostap</code>
	    オプションはインタフェースをアクセスポイントモードにします。
	    <code class="option">channel 11</code> オプションは使用するチャネルを
	    802.11b に設定します。
	    各規制地域 (regulatory domain) で有効なチャネル番号は
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wicontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wicontrol</span>(8)</span></a> マニュアルページに載っています。</p><p>さて、
	    これで完全に機能するアクセスポイントが立ち上がり、動作しています。
	    より詳しい情報については、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wicontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wicontrol</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>
	    および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">wi</span>(4)</span></a> のマニュアルを読むとよいでしょう。
	  </p><p>また、下記の暗号化に関する節を読むこともおすすめします。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93567184"></a>22.3.3.2.3. ステータス情報</h5></div></div></div><p>一度アクセスポイントが設定されて稼働すると、
	    管理者はアクセスポイントを利用しているクライアントを見たいと思うでしょう。
	    いつでも管理者は以下のコマンドを実行できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>wicontrol -l</code></strong>
1 station:
00:09:b7:7b:9d:16  asid=04c0, flags=3&lt;ASSOC,AUTH&gt;, caps=1&lt;ESS&gt;, rates=f&lt;1M,2M,5.5M,11M&gt;, sig=38/15</pre><p>これは一つの局が、
	    表示されているパラメータで接続していることを示します。
	    表示された信号は、
	    相対的な強さを表示しているだけのものとして扱われるべきです。
	    dBm やその他の単位への変換結果は、
	    異なるファームウェアバージョン間で異なります。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93569872"></a>22.3.3.3. クライアント</h4></div></div></div><p>無線クライアントはアクセスポイント、
	  または他のクライアントに直接アクセスするシステムです。</p><p>典型的には、
	  無線クライアントが有しているネットワークデバイスは、
	  無線ネットワークカード 1 枚だけです。</p><p>無線クライアントを設定するにはいくつか方法があります。
	  それぞれは異なる無線モードに依存していますが、
	  一般的には BSS
	  (アクセスポイントを必要とするインフラストラクチャーモード) か、
	  IBSS (アドホック、またはピアツーピアモード) のどちらかです。
	  ここでは、アクセスポイントと通信をするのに、
	  両者のうちで最も広まっている BSS モードを使用します。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93571664"></a>22.3.3.3.1. 要件</h5></div></div></div><p>FreeBSD を無線クライアントとして設定するのに、
	    本当に必要なものはたった 1 つだけです。
	    FreeBSD が対応している無線カードが必要です。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93572816"></a>22.3.3.3.2. 無線 FreeBSD クライアントの設定</h5></div></div></div><p>設定をはじめる前に、
	    あなたが接続しようとする無線ネットワークについていくつか知っておかなければなりません。
	    この例では、<em class="replaceable"><code>my_net</code></em>
	    という名前で暗号化は無効になっているネットワークに接続しようとしています。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">この例では暗号化を行っていないのですが、
	    これは危険な状況です。次の節で、暗号化を有効にする方法と、
	    なぜそれが重要で、
	    暗号技術によっては完全にはあなたを保護することができないのはなぜか、
	    ということを学ぶでしょう。</p></div><p>カードが FreeBSD に認識されていることを確認してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig -a</code></strong>
wi0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet6 fe80::202:2dff:fe2d:c938%wi0 prefixlen 64 scopeid 0x7
        inet 0.0.0.0 netmask 0xff000000 broadcast 255.255.255.255
        ether 00:09:2d:2d:c9:50
        media: IEEE 802.11 Wireless Ethernet autoselect (DS/2Mbps)
        status: no carrier
        ssid ""
        stationname "FreeBSD Wireless node"
        channel 10 authmode OPEN powersavemode OFF powersavesleep 100
        wepmode OFF weptxkey 1</pre><p>それでは、このカードをネットワークに合わせて設定しましょう。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0 inet 192.168.0.20 netmask 255.255.255.0 ssid my_net</code></strong></pre><p><code class="systemitem">192.168.0.20</code> と
	    <code class="systemitem">255.255.255.0</code>
	    を有線ネットワークで有効な
	    IP アドレスとネットマスクに置き換えてください。
	    アクセスポイントは無線ネットワークと有線ネットワークの間でデータをブリッジしているため、
	    ネットワーク上の他のデバイスには、このデバイスが、他と同様に、
	    有線ネットワーク上にあるかのように見えることに注意してください。</p><p>これを終えると、
	    あなたは標準的な有線接続を使用しているかのように、
	    有線ネットワーク上のホストに ping を送ることができるでしょう。</p><p>無線接続に関する問題がある場合は、
	    アクセスポイントに接続されていることを確認してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0</code></strong></pre><p>いくらか情報が表示されるはずです。
	    その中に以下の表示があるはずです。</p><pre class="screen">status: associated</pre><p>もし <code class="literal">associated</code> と表示されなければ、
	    アクセスポイントの範囲外かもしれないし、
	    暗号化が有効になっているかもしれないし、
	    または設定の問題を抱えているのかもしれません。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93639760"></a>22.3.3.4. 暗号化</h4></div></div></div><a id="idp93640400" class="indexterm"></a><p>無線ネットワークを暗号化することが重要なのは、
	  十分保護された領域にネットワークを留める能力がもはやないからです。
	  無線データはその周辺全体にわたって放送されるので、
	  それを読みたいと思う人はだれでも読むことができます。
	  そこで暗号化が役に立ちます。
	  電波に載せて送られるデータを暗号化することによって、
	  興味を抱いた者が空中からデータを取得することをずっと難しくします。</p><p>クライアントとアクセスポイント間のデータを暗号化するもっとも一般的な方法には、
	  WEP と <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipsec&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ipsec</span>(4)</span></a> の二種類があります。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93643088"></a>22.3.3.4.1. WEP</h5></div></div></div><a id="idp93643728" class="indexterm"></a><p>WEP は Wired Equivalency Protocol
	    (訳注: 直訳すると、有線等価プロトコル) の略語です。WEP
	    は無線ネットワークを有線ネットワークと同程度に安全で確実なものにしようとする試みです。
	    残念ながら、これはすでに破られており、
	    破るのはそれほど苦労しません。
	    これは、機密データを暗号化するという場合に、
	    これに頼るものではないということも意味します。</p><p>なにも無いよりはましなので、
	    次のコマンドを使って、あなたの新しい FreeBSD アクセスポイント上で
	    WEP を有効にしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0 inet up ssid my_net wepmode on wepkey 0x1234567890 media DS/11Mbps mediaopt hostap</code></strong></pre><p>クライアントについては次のコマンドで WEP を有効にできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0 inet 192.168.0.20 netmask 255.255.255.0 ssid my_net wepmode on wepkey 0x1234567890</code></strong></pre><p><em class="replaceable"><code>0x1234567890</code></em>
	    をより特異なキーに変更すべきであることに注意してください。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93648080"></a>22.3.3.4.2. IPsec</h5></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipsec&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ipsec</span>(4)</span></a>
	    はネットワーク上で交わされるデータを暗号化するための、
	    はるかに頑健で強力なツールです。
	    これは無線ネットワーク上のデータを暗号化する明らかに好ましい方法です。
	    ハンドブック内の <a class="link" href="#ipsec" title="15.9. IPsec">IPsec</a> 節で
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipsec&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ipsec</span>(4)</span></a> セキュリティ、
	    およびその実装方法の詳細を読むことができます。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93651280"></a>22.3.3.5. ツール</h4></div></div></div><p>無線ネットワークをデバッグしたり設定するのに使うツールがわずかばかりあります。
	  ここでその一部と、それらが何をしているか説明します。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93652304"></a>22.3.3.5.1. <span class="application">bsd-airtools</span> パッケージ</h5></div></div></div><p><span class="application">bsd-airtools</span> パッケージは、
	    WEP キークラッキング、
	    アクセスポイント検知などの無線通信を監査するツールを含む完備されたツール集です。</p><p><span class="application">bsd-airtools</span> ユーティリティは
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/bsd-airtools/pkg-descr">net/bsd-airtools</a> port
	    からインストールできます。
	    ports のインストールに関する情報はこのハンドブックの
	    <a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a> を参照してください。</p><p><code class="command">dstumbler</code> プログラムは、
	    アクセスポイントの発見および
	    S/N 比のグラフ化をできるようにするパッケージツールです。
	    アクセスポイントを立ち上げて動かすのに苦労しているなら、
	    <code class="command">dstumbler</code>
	    はうまく行く手助けになるかもしれません。</p><p>無線ネットワークの安全性をテストするのに、
	    <span class="quote">「<span class="quote">dweputils</span>」</span> (<code class="command">dwepcrack</code>,
	    <code class="command">dwepdump</code> および <code class="command">dwepkeygen</code>)
	    を使用することで、
	    WEP があなたの無線安全性への要求に対する正しい解決策かどうか判断するのを助けられるかもしれません。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93666640"></a>22.3.3.5.2. <code class="command">wicontrol</code>, <code class="command">ancontrol</code> および <code class="command">raycontrol</code> ユーティリティ</h5></div></div></div><p>これらは、無線ネットワーク上で無線カードがどのように動作するかを制御するツールです。
	    上記の例では、無線カードが <code class="filename">wi0</code>
	    インタフェースであるので、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wicontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wicontrol</span>(8)</span></a>
	    を使用することに決めました。
	    もし Cisco の無線デバイスを持っている場合は、それは
	    <code class="filename">an0</code> として動作するでしょうから、
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ancontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ancontrol</span>(8)</span></a> を使うことになるでしょう。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93671120"></a>22.3.3.5.3. <code class="command">ifconfig</code> コマンド</h5></div></div></div><a id="idp93672144" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wicontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wicontrol</span>(8)</span></a>
	    と同じオプションの多くを処理できますが、
	    いくつかのオプションを欠いています。
	    コマンドライン引数とオプションについて
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> を参照してください。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93675472"></a>22.3.3.6. 対応しているカード</h4></div></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93676112"></a>22.3.3.6.1. アクセスポイント</h5></div></div></div><p>現在のところ (アクセスポイントとして)
	    BSS モードに対応した唯一のカードは Prism 2, 2.5
	    または 3 チップセットを利用したデバイスです。
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">wi</span>(4)</span></a> に完全な一覧があります。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93678032"></a>22.3.3.6.2. クライアント</h5></div></div></div><p>現在、FreeBSD では、ほとんどすべての 802.11b
	    無線カードに対応しています。
	    Prism, Spectrum24, Hermes, Aironet または Raylink
	    のチップセットを利用したほとんどのカードは、
	    (アドホック、ピアツーピア、そして BSS の)
	    IBSS モードで無線ネットワークカードとして動作するでしょう。</p></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-bluetooth"></a>22.4. Bluetooth</h2></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lucistnik</span> <span class="firstname">Pav</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp93687120" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93687632"></a>22.4.1. はじめに</h3></div></div></div><p>Bluetooth は免許のいらない 2.4 GHz の帯域を利用して、
	10 m 程度のパーソナルネットワークを作る無線技術です。
	ネットワークはたいていの場合、その場その場で、携帯電話や
	PDA やノートパソコンなどの携帯デバイスから形成されます。
	Wi-Fi などの他の有名な無線技術とは違い、
	Bluetooth はより高いレベルのサービスを提供します。
	たとえば、FTP のようなファイルサーバ、ファイルのプッシュ、
	音声伝送、シリアル線のエミュレーションなどのサービスです。</p><p>FreeBSD 内での Bluetooth スタックは Netgraph フレームワーク
	(<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netgraph&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">netgraph</span>(4)</span></a> 参照) を使って実現されています。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_ubt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_ubt</span>(4)</span></a> ドライバは、
	多種多様な Bluetooth USB ドングルに対応しています。
	Broadcom BCM2033 チップを搭載した Bluetooth デバイスは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ubtbcmfw&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ubtbcmfw</span>(4)</span></a>
	および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_ubt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_ubt</span>(4)</span></a> ドライバによって対応されています。
	3Com Bluetooth PC カード 3CRWB60-A は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_bt3c&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_bt3c</span>(4)</span></a>
	ドライバによって対応されています。
	シリアルおよび UART を搭載した Bluetooth デバイスは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a>,
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_h4&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_h4</span>(4)</span></a> および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hcseriald&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">hcseriald</span>(8)</span></a>
	ドライバによって対応されています。
	この節では USB Bluetooth ドングルの使用法について説明します。
	Bluetooth に対応しているのは FreeBSD 5.0 以降のシステムです。</p><div xmlns="" class="note"><h3 class="admontitle">訳注: </h3><p xmlns="http://www.w3.org/1999/xhtml">5.0, 5.1 Release ではカーネルモジュールは利用可能ですが、
	  種々のユーティリティとマニュアルは標準でコンパイルされていません。
	</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93700688"></a>22.4.2. デバイスの挿入</h3></div></div></div><p>デフォルトでは Bluetooth
	デバイスドライバはカーネルモジュールとして利用できます。
	デバイスを接続する前に、
	カーネルにドライバを読み込む必要があります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload ng_ubt</code></strong></pre><p>Bluetooth デバイスがシステム起動時に存在している場合、
	<code class="filename">/boot/loader.conf</code>
	からモジュールを読み込んでください。</p><pre class="programlisting">ng_ubt_load="YES"</pre><p>USB ドングルを挿してください。コンソールに (または syslog に)
	下記のような表示が現れるでしょう。</p><pre class="screen">ubt0: vendor 0x0a12 product 0x0001, rev 1.10/5.25, addr 2
ubt0: Interface 0 endpoints: interrupt=0x81, bulk-in=0x82, bulk-out=0x2
ubt0: Interface 1 (alt.config 5) endpoints: isoc-in=0x83, isoc-out=0x3,
      wMaxPacketSize=49, nframes=6, buffer size=294</pre><p><code class="filename">/usr/share/examples/netgraph/bluetooth/rc.bluetooth</code>
	を <code class="filename">/etc/rc.bluetooth</code>
	のようなどこか便利な場所にコピーしてください。
	このスクリプトは Bluetooth
	スタックを開始および終了させるのに使われます。
	デバイスを抜く前にスタックを終了するのはよい考えですが、
	(たいていの場合) しなくても致命的ではありません。
	スタックを開始するときに、下記のような出力がされます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.bluetooth start ubt0</code></strong>
BD_ADDR: 00:02:72:00:d4:1a
Features: 0xff 0xff 0xf 00 00 00 00 00
&lt;3-Slot&gt; &lt;5-Slot&gt; &lt;Encryption&gt; &lt;Slot offset&gt;
&lt;Timing accuracy&gt; &lt;Switch&gt; &lt;Hold mode&gt; &lt;Sniff mode&gt;
&lt;Park mode&gt; &lt;RSSI&gt; &lt;Channel quality&gt; &lt;SCO link&gt;
&lt;HV2 packets&gt; &lt;HV3 packets&gt; &lt;u-law log&gt; &lt;A-law log&gt; &lt;CVSD&gt;
&lt;Paging scheme&gt; &lt;Power control&gt; &lt;Transparent SCO data&gt;
Max. ACL packet size: 192 bytes
Number of ACL packets: 8
Max. SCO packet size: 64 bytes
Number of SCO packets: 8</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93711056"></a>22.4.3. ホストコントローラインタフェース (HCI)</h3></div></div></div><a id="idp93711696" class="indexterm"></a><p>ホストコントローラインタフェース (HCI) は、
	ベースバンドコントローラおよびリンクマネージャへのコマンドインタフェースを提供し、
	ハードウェアステータスおよびコントロールレジスタへアクセスします。
	このインタフェースは
	Bluetooth ベースバンド機能へアクセスする画一的な方法を提供します。
	ホストの HCI 層は Bluetooth ハードウェア上の HCI ファームウェアと、
	データとコマンドをやり取りします。
	ホストコントローラトランスポート層 (つまり物理的なバス) のドライバは、
	両方の HCI 層に相互に情報を交換する能力を与えます。</p><p>一つの Bluetooth デバイスにつき、<span class="emphasis"><em>hci</em></span>
	タイプの Netgraph ノードが一つ作成されます。
	HCI ノードは通常 Bluetooth デバイスドライバノード (下流) と
	L2CAP ノード (上流) に接続されます。
	すべての HCI 動作はデバイスドライバノード上ではなく、
	HCI ノード上で行われなくてはいけません。
	HCI ノードのデフォルト名は <span class="quote">「<span class="quote">devicehci</span>」</span> です。
	詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_hci&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_hci</span>(4)</span></a> マニュアルを参照してください。</p><p>最も一般的なタスクの一つに、無線通信的に近傍にある Bluetooth
	デバイスの発見があります。
	この動作は <span class="emphasis"><em>inquiry (問い合わせ)</em></span> と呼ばれています。
	Inquiry や他の HCI に関連した動作は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hccontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">hccontrol</span>(8)</span></a>
	ユーティリティによってなされます。
	下記の例は、どの
	Bluetooth デバイスが通信圏内にあるかを知る方法を示しています。
	デバイスのリストが表示されるには数秒かかります。
	リモートデバイスは <span class="emphasis"><em>discoverable (発見可能な)</em></span>
	モードにある場合にのみ
	inquiry に返答するということに注意してください。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>hccontrol -n ubt0hci inquiry</code></strong>
Inquiry result, num_responses=1
Inquiry result #0
       BD_ADDR: 00:80:37:29:19:a4
       Page Scan Rep. Mode: 0x1
       Page Scan Period Mode: 00
       Page Scan Mode: 00
       Class: 52:02:04
       Clock offset: 0x78ef
Inquiry complete. Status: No error [00]</pre><p><code class="literal">BD_ADDR</code> は
	Bluetooth デバイスに固有のアドレスです。
	これはネットワークカードの MAC アドレスに似ています。
	このアドレスはデバイスとの通信を続けるのに必要となります。
	BD_ADDR に人間が判読しやすい名前を割り当てることもできます。
	<code class="filename">/etc/bluetooth/hosts</code> ファイルには、
	既知の Bluetooth ホストに関する情報が含まれています。
	次の例はリモートデバイスに割り当てられている、
	人間が判読しやすい名前を得る方法を示しています。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>hccontrol -n ubt0hci remote_name_request 00:80:37:29:19:a4</code></strong>
BD_ADDR: 00:80:37:29:19:a4
Name: Pav's T39</pre><p>リモートの Bluetooth デバイス上で inquiry を実行すると、
	あなたのコンピュータは <span class="quote">「<span class="quote">your.host.name (ubt0)</span>」</span>
	と認識されます。
	ローカルデバイスに割り当てられた名前はいつでも変更できます。</p><p>Bluetooth システムは一対一接続 (二つの
	Bluetooth ユニットだけが関係します) または一対多接続を提供します。
	一対多接続では、接続はいくつかの Bluetooth デバイス間で共有されます。
	次の例は、ローカルデバイスに対するアクティブなベースバンド接続のリストを得る方法を示しています。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>hccontrol -n ubt0hci read_connection_list</code></strong>
Remote BD_ADDR    Handle Type Mode Role Encrypt Pending Queue State
00:80:37:29:19:a4     41  ACL    0 MAST    NONE       0     0 OPEN</pre><p><span class="emphasis"><em>connection handle</em></span>
	はベースバンド接続の終了が必要とされるときに便利です。
	もっとも、通常はこれを手動で行う必要はありません。
	Bluetooth スタックはアクティブでないベースバンド接続を自動的に終了します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>hccontrol -n ubt0hci disconnect 41</code></strong>
Connection handle: 41
Reason: Connection terminated by local host [0x16]</pre><p>利用可能な HCI コマンドの完全な一覧を得るには、
	<code class="command">hccontrol help</code> を参照してください。
	HCI コマンドのほとんどはスーパユーザ権限を必要としません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93724368"></a>22.4.4. ロジカルリンクコントロールおよびアダプテーションプロトコル (L2CAP)</h3></div></div></div><a id="idp93725008" class="indexterm"></a><p>ロジカルリンクコントロールおよびアダプテーションプロトコル
	(L2CAP) は、プロトコル多重化ケーパビリティおよび分割・再編成動作を備えた、
	上位層プロトコルへのコネクション指向およびコネクションレスデータサービスを提供します。
	L2CAP は上位層プロトコルおよびアプリケーションが
	64 KB までの長さの
	L2CAP データパケットを送受信することを可能にします。</p><p>L2CAP は <span class="emphasis"><em>チャネル</em></span> の概念に基づいています。
	チャネルはベースバンド接続の上位に位置する論理的な接続です。
	それぞれのチャネルは多対一の方法で一つのプロトコルに結びつけられます。
	複数のチャネルを同じプロトコルに結びつけることは可能ですが、
	一つのチャネルを複数のプロトコルに結びつけることはできません。
	チャネル上で受け取られたそれぞれの L2CAP パケットは、
	適切なより上位のプロトコルに渡されます。
	複数のチャネルは同じベースバンド接続を共有できます。</p><p>一つの Bluetooth デバイスに対して、<span class="emphasis"><em>l2cap</em></span>
	タイプの Netgraph ノードが一つ作成されます。
	L2CAP ノードは通常 Bluetooth HCI ノード (下流) と
	Bluetooth ソケットノード (上流) に接続されます。
	L2CAP ノードのデフォルト名は <span class="quote">「<span class="quote">devicel2cap</span>」</span> です。
	詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_l2cap&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_l2cap</span>(4)</span></a> マニュアルを参照してください。</p><p>便利なコマンドに、他のデバイスに ping を送ることができる
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=l2ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">l2ping</span>(8)</span></a> があります。Bluetooth 実装によっては、
	送られたデータすべては返さないことがあります。
	したがって次の例で <span class="emphasis"><em>0 バイト</em></span> は正常です。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>l2ping -a 00:80:37:29:19:a4</code></strong>
0 bytes from 0:80:37:29:19:a4 seq_no=0 time=48.633 ms result=0
0 bytes from 0:80:37:29:19:a4 seq_no=1 time=37.551 ms result=0
0 bytes from 0:80:37:29:19:a4 seq_no=2 time=28.324 ms result=0
0 bytes from 0:80:37:29:19:a4 seq_no=3 time=46.150 ms result=0</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=l2control&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">l2control</span>(8)</span></a> ユーティリティは
	L2CAP ノード上でさまざまな操作を行うのに使われます。
	この例は、ローカルデバイスに対する論理的な接続 (チャネル)
	およびベースバンド接続の一覧を得る方法を示しています。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>l2control -a 00:02:72:00:d4:1a read_channel_list</code></strong>
L2CAP channels:
Remote BD_ADDR     SCID/ DCID   PSM  IMTU/ OMTU State
00:07:e0:00:0b:ca    66/   64     3   132/  672 OPEN
<code class="prompt">%</code> <strong class="userinput"><code>l2control -a 00:02:72:00:d4:1a read_connection_list</code></strong>
L2CAP connections:
Remote BD_ADDR    Handle Flags Pending State
00:07:e0:00:0b:ca     41 O           0 OPEN</pre><p>別の診断ツールが <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=btsockstat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">btsockstat</span>(1)</span></a> です。
	これは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netstat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">netstat</span>(1)</span></a> と同様の作業を、Bluetooth
	ネットワークに関するデータ構造についての行います。
	下記の例は上の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=l2control&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">l2control</span>(8)</span></a> と同じ論理的な接続を示します。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>btsockstat</code></strong>
Active L2CAP sockets
PCB      Recv-Q Send-Q Local address/PSM       Foreign address   CID   State
c2afe900      0      0 00:02:72:00:d4:1a/3     00:07:e0:00:0b:ca 66    OPEN
Active RFCOMM sessions
L2PCB    PCB      Flag MTU   Out-Q DLCs State
c2afe900 c2b53380 1    127   0     Yes  OPEN
Active RFCOMM sockets
PCB      Recv-Q Send-Q Local address     Foreign address   Chan DLCI State
c2e8bc80      0    250 00:02:72:00:d4:1a 00:07:e0:00:0b:ca 3    6    OPEN</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93742288"></a>22.4.5. RFCOMM プロトコル</h3></div></div></div><a id="idp93742928" class="indexterm"></a><p>RFCOMM プロトコルは L2CAP
	プロトコルを介してシリアルポートのエミュレーションを提供します。
	このプロトコルは ETSI (訳注: 欧州電気通信標準化機構)
	標準 TS 07.10 に基づいています。
	RFCOMM プロトコルは、単純な伝送プロトコルに RS-232 (EIATIA-232-E)
	シリアルポートの 9 本の結線をエミュレートする項目を加えたものです。
	RFCOMM プロトコルは、二つの Bluetooth デバイス間で、最大 60
	までの同時接続 (RFCOMM チャネル) に対応しています。</p><p>RFCOMM の目的から、完全な通信経路は、異なるデバイス上
	(通信の端点) で動作している二つのアプリケーションと、
	その間の通信セグメントを含んでいます。RFCOMM
	は、それが動いているデバイスのシリアルポートを利用するアプリケーションをカバーするためのものです。
	通信セグメントはあるデバイスから他のデバイスへの Bluetooth リンクです
	(直接接続)。</p><p>RFCOMM は直接接続している場合のデバイス間の接続、
	またはネットワークの場合のデバイスとモデムの間の接続にだけ関係があります。
	RFCOMM は、一方が Bluetooth 無線技術で通信し、
	もう一方で有線インタフェースを提供するモジュールのような、
	他の構成にも対応できます。</p><p>FreeBSD では RFCOMM プロトコルは
	Bluetooth ソケット層に実装されています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93745104"></a>22.4.6. デバイスのペアリング</h3></div></div></div><a id="idp93749968" class="indexterm"></a><p>デフォルトでは Bluetooth 通信は認証されておらず、
	すべてのデバイスが他のすべてのデバイスと通信できます。
	Bluetooth デバイス (たとえば携帯電話) は特定のサービス
	(たとえばダイアルアップサービス) を提供するために、
	認証を要求することも選択できます。
	Bluetooth 認証は通常 <span class="emphasis"><em>PIN コード</em></span> で行われます。
	PIN コードは最長 16 文字のアスキー文字列です。
	ユーザは両デバイスで同じ PIN コードを入力することを要求されます。
	一度 PIN コードを入力すると、
	両デバイスは <span class="emphasis"><em>リンクキー</em></span> を作成します。
	その後、リンクキーはそのデバイス自身または、
	不揮発性記憶デバイス内に格納できます。
	次の機会には、両デバイスは前に作成されたリンクキーを使用するでしょう。
	このような手続きを<span class="emphasis"><em>ペアリング (pairing)</em></span>
	と呼びます。いずれかのデバイス上でリンクキーが失われたときには、
	ペアリングをやり直さなければならないことに注意してください。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hcsecd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">hcsecd</span>(8)</span></a> デーモンが
	Bluetooth 認証要求のすべてを扱う責任を負っています。
	デフォルトの設定ファイルは
	<code class="filename">/etc/bluetooth/hcsecd.conf</code> です。
	PIN コードが <span class="quote">「<span class="quote">1234</span>」</span>
	に設定された携帯電話に関する例は以下の通りです。</p><pre class="programlisting">device {
        bdaddr  00:80:37:29:19:a4;
        name    "Pav's T39";
        key     nokey;
        pin     "1234";
      }</pre><p>PIN コードには (長さを除いて) 制限はありません。
	いくつかのデバイス (たとえば Bluetooth ヘッドフォン)
	には固定的な PIN コードが組み込まれているかもしれません。
	<code class="option">-d</code> オプションは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hcsecd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">hcsecd</span>(8)</span></a>
	デーモンがフォアグラウンドで動作するように強制するため、
	何が起きているのか確認しやすくなります。
	リモートデバイスがペアリングを受け取るように設定して、
	リモートデバイスへの Bluetooth 接続を開始してください。
	リモートデバイスはペアリングが受け入れらた、と応答して
	PIN コードを要求するでしょう。
	<code class="filename">hcsecd.conf</code> 内にあるのと同じ
	PIN コードを入力してください。
	これであなたの PC とリモートデバイスがペアとなりました。
	また、リモートデバイスからペアリングを開始することもできます。
	以下は <code class="command">hcsecd</code> の出力例です。</p><pre class="programlisting">hcsecd[16484]: Got Link_Key_Request event from 'ubt0hci', remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Found matching entry, remote bdaddr 0:80:37:29:19:a4, name 'Pav's T39', link key doesn't exist
hcsecd[16484]: Sending Link_Key_Negative_Reply to 'ubt0hci' for remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Got PIN_Code_Request event from 'ubt0hci', remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Found matching entry, remote bdaddr 0:80:37:29:19:a4, name 'Pav's T39', PIN code exists
hcsecd[16484]: Sending PIN_Code_Reply to 'ubt0hci' for remote bdaddr 0:80:37:29:19:a4</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93757136"></a>22.4.7. サービスディスカバリプロトコル (SDP)</h3></div></div></div><a id="idp93757776" class="indexterm"></a><p>サービスディスカバリプロトコル (SDP) は、
	クライアントアプリケーションが、
	サーバアプリケーションが提供するサービスの存在とその属性を発見する手段を提供します。
	サービスの属性には提示されているサービスのタイプまたはクラス、
	および、サービスを利用するのに必要な仕組みまたはプロトコルの情報が含まれます。</p><p>SDP には SDP サーバと SDP クライアント間の通信が含まれます。
	SDP サーバは、サーバに関連づけられたサービスの特性について記述しているサービスレコードの一覧を維持しています。
	各サービスレコードにはそれぞれ 1 つのサービスの情報が書かれています。
	クライアントは SDP リクエストを出すことによって、
	SDP サーバが維持しているサービスレコードから情報を検索できます。
	クライアントまたはクライアントに関連づけられたアプリケーションがサービスを利用することにしたら、
	サービスを利用するためには、
	サービスプロバイダへの接続を別途開かなければなりません。
	SDP はサービスとそれらの属性を発見するための仕組みを提供しますが、
	そのサービスを利用するための仕組みは提供しません。</p><p>通常 SDP
	クライアントは希望するサービスの特性に基づいてサービスを検索します。
	しかしながら、サービスに関する事前の情報なしに、
	どのタイプのサービスが SDP
	サーバのサービスレコードに記述されているか知ることが望ましいことがあります。
	この、提供されている任意のサービスを閲覧する手順を、
	<span class="emphasis"><em>ブラウジング (browsing)</em></span> と呼びます。</p><p>現在のところ Bluetooth SDP サーバおよびクライアントは、
	<a class="link" href="http://www.geocities.com/m_evmenkin/" target="_top">ここ</a>
	からダウンロードできる第三者パッケージ
	<span class="application">sdp-1.5</span> で実装されています。
	<span class="application">sdptool</span>
	はコマンドラインの SDP クライアントです。
	次の例は SDP ブラウズの問い合わせ方法を示しています。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sdptool browse 00:80:37:29:19:a4</code></strong>
Browsing 00:80:37:29:19:A4 ...
Service Name: Dial-up Networking
Protocol Descriptor List:
 "L2CAP" (0x0100)
 "RFCOMM" (0x0003)
   Channel: 1

Service Name: Fax
Protocol Descriptor List:
 "L2CAP" (0x0100)
 "RFCOMM" (0x0003)
   Channel: 2

Service Name: Voice gateway
Service Class ID List:
 "Headset Audio Gateway" (0x1112)
 "Generic Audio" (0x1203)
Protocol Descriptor List:
 "L2CAP" (0x0100)
 "RFCOMM" (0x0003)
   Channel: 3
</pre><p>... 等々。
	それぞれのサービスは属性の一覧 (たとえば RFCOMM チャネル)
	を持っていることに注意してください。サービスによっては、
	属性のリストの一部についてメモをとっておく必要があるかもしれません。
	Bluetooth 実装のいくつかは、サービスブラウジングに対応しておらず、
	空の一覧を返してくるかもしれません。この場合、
	特定のサービスを検索をすることは可能です。下記の例は
	OBEX オブジェクトプッシュ (OPUSH)
	サービスを検索する方法です。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sdptool search --bdaddr 00:07:e0:00:0b:ca OPUSH</code></strong></pre><p>FreeBSD 上における Bluetooth クライアントへのサービス提供は
	<span class="application">sdpd</span> サーバが行います。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sdpd</code></strong></pre><p><span class="application">sdptool</span> は、ローカル
	SDP サーバにサービスを登録するのにも用いられます。
	下記の例は PPP (LAN)
	サービスを備えたネットワークアクセスを登録する方法を示しています。
	一部のサービスでは属性 (たとえば RFCOMM チャネル)
	を要求することに注意してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sdptool add --channel=7 LAN</code></strong></pre><p>ローカル SDP サーバに登録されたサービスの一覧は SDP
	ブラウザの問い合わせを <span class="quote">「<span class="quote">特別な</span>」</span> BD_ADDR
	に送ることで得られます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sdptool browse ff:ff:ff:00:00:00</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93773264"></a>22.4.8. ダイアルアップネットワーク (DUN) および PPP (LAN)
	を用いたネットワークアクセスプロファイル</h3></div></div></div><p>ダイアルアップネットワーク (DUN) プロファイルはほとんどの場合、
	モデムや携帯電話とともに使用されます。
	このプロファイルが対象とする場面は以下のものです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>コンピュータから携帯電話またはモデムを、
	  ダイアルアップインターネットアクセスサーバへの接続、
	  または他のダイアルアップサービスを利用するための無線モデムとして使うこと</p></li><li class="listitem"><p>データ呼び出しを受けるための、
	  コンピュータによる携帯電話またはモデムの使用</p></li></ul></div><p>PPP (LAN) によるネットワークアクセスプロファイルは、
	次の状況で利用できます。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>単一の Bluetooth デバイスへの LAN アクセス
	  </p></li><li class="listitem"><p>マルチ Bluetooth デバイスへの LAN アクセス
	  </p></li><li class="listitem"><p>(シリアルケーブルエミュレーション上の PPP
	    ネットワーク接続を使用した) PC から PC への接続</p></li></ul></div><p>FreeBSD ではどちらのプロファイルも <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> と
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a> (RFCOMM Bluetooth 接続を
	PPP が制御可能なように変換するラッパ) で実装されています。
	いずれかのプロファイルが使用可能となる前に、
	<code class="filename">/etc/ppp/ppp.conf</code> 内に新しい
	PPP ラベルが作成されていなければなりません。
	例については、 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a>
	のマニュアルページを参照してください。</p><p>次の例では、DUN RFCOMM チャネル上で
	BD_ADDR が 00:80:37:29:19:a4 のリモートデバイスへの RFCOMM
	接続を開くのに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a> が使われます。実際の RFCOMM
	チャネル番号は SDP を介してリモートデバイスから得ます。
	手動で RFCOMM チャネルを指定することもでき、その場合
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a> は SDP 問い合わせを実行しません。
	リモートデバイス上の RFCOMM チャネルを見つけるには、
	<span class="application">sdptool</span> を使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rfcomm_pppd -a 00:80:37:29:19:a4 -c -C dun -l rfcomm-dialup</code></strong></pre><p>PPP (LAN) サービスでネットワークアクセスを提供するためには、
	<span class="application">sdpd</span> サーバが動いていなければなりません。
	これはローカル SDP サーバに LAN サービスを登録するのにも必要です。
	LAN サービスは RFCOMM チャネル属性を必要とすることに注意してください。
	<code class="filename">/etc/ppp/ppp.conf</code> ファイル内に
	LAN クライアントの新しいエントリを作成しなければなりません。
	例については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a> のマニュアルページを参照してください。
	最後に、RFCOMM PPP サーバが実行され、
	ローカル SDP サーバに登録されているのと同じ
	RFCOMM チャネルで待ち受けていなければなりません。
	次の例は RFCOMM PPP サーバを起動する方法を示しています。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rfcomm_pppd -s -C 7 -l rfcomm-server</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93800144"></a>22.4.9. OBEX プッシュ (OPUSH) プロファイル</h3></div></div></div><a id="idp93800784" class="indexterm"></a><p>OBEX はモバイルデバイス間で広く使われている単純なファイル転送プロトコルです。
	これは主に赤外線通信で利用されており、ノートパソコンや
	PDA 間の汎用的なファイル転送、および
	PIM アプリケーションを搭載した携帯電話その他のデバイス間で名刺やカレンダーエントリを転送するのに用いられます。</p><p>OBEX サーバおよびクライアントは、
	<a class="link" href="http://www.geocities.com/m_evmenkin/" target="_top">ここ</a>
	からダウンロードできる <span class="application">obexapp-1.0</span>
	という第三者のパッケージとして実装されています。
	このパッケージは <span class="application">openobex</span> ライブラリ
	(上記の <span class="application">obexapp</span> に含まれます) および
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/glib12/pkg-descr">devel/glib12</a> port を必要とします。
	なお、<span class="application">obexapp</span>
	はルート権限を必要としません。</p><p>OBEX クライアントは OBEX
	サーバとの間でオブジェクトを渡したり (プッシュ)
	および受け取ったり (プル) するのに使用されます。
	オブジェクトは、たとえば名刺や予定などになります。
	OBEX クライアントは RFCOMM チャネル番号を
	SDP によってリモートデバイスから得ることができます。
	これは RFCOMM チャネル番号の代わりにサービス名を指定することによって行うことができます。
	対応しているサービス名は IrMC, FTRN および OPUSH です。
	RFCOMM チャネルを番号で指定することもできます。
	下記は、デバイス情報オブジェクトを携帯電話から受け取り、
	新しいオブジェクト (名刺) が携帯電話に渡される場合の
	OBEX セッションの例です。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>obexapp -a 00:80:37:29:19:a4 -C IrMC</code></strong>
obex&gt; get
get: remote file&gt; telecom/devinfo.txt
get: local file&gt; devinfo-t39.txt
Success, response: OK, Success (0x20)
obex&gt; put
put: local file&gt; new.vcf
put: remote file&gt; new.vcf
Success, response: OK, Success (0x20)
obex&gt; di
Success, response: OK, Success (0x20)</pre><p>OBEX プッシュサービスを提供するためには、
	<span class="application">sdpd</span>
	サーバが実行されていなければなりません。
	また OPUSH サービスをローカル SDP サーバに登録することも必要です。
	なお、OPUSH サービスには RFCOMM チャネル属性が必要です。
	渡されるオブジェクトをすべて格納するルートフォルダを作成しなければいけません。
	ルートフォルダのデフォルトパスは
	<code class="filename">/var/spool/obex</code> です。
	最後に OBEX サーバが実行され、
	ローカル SDP サーバに登録されているのと同じ
	RFCOMM チャネルで待ち受けていなければなりません。
	下記の例は OBEX サーバの起動方法を示します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>obexapp -s -C 10</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93808336"></a>22.4.10. シリアルポート (SP) プロファイル</h3></div></div></div><p>シリアルポート (SP) プロファイルは Bluetooth デバイスが RS232
	(または同様の) シリアルケーブルエミュレーションを行えるようにします。
	このプロファイルが対象とする場面は、
	レガシーアプリケーションが、仮想シリアルポート抽象を介して
	Bluetooth をケーブルの代替品として使うところです。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_sppd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rfcomm_sppd</span>(1)</span></a>
	ユーティリティはシリアルポートプロファイルを実装します。
	Pseudo tty が仮想シリアルポート抽象概念として用いられます。
	下記の例はリモートデバイスのシリアルポートサービスへ接続する方法を示します。
	なお、RFCOMM チャネルを指定する必要はありません。―
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_sppd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rfcomm_sppd</span>(1)</span></a> は
	SDP を介してリモートデバイスからその情報を得ることができます。
	これを上書きしたい場合にはコマンドラインで
	RFCOMM チャネルを指定してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rfcomm_sppd -a 00:07:E0:00:0B:CA -t /dev/ttyp6</code></strong>
rfcomm_sppd[94692]: Starting on /dev/ttyp6...</pre><p>接続された pseudo tty はシリアルポートとして利用することができます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cu -l ttyp6</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93813584"></a>22.4.11. トラブルシューティング</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93814224"></a>22.4.11.1. リモートデバイスが接続できません</h4></div></div></div><p>古い Bluetooth
	  デバイスのなかにはロールスイッチング (role switching)
	  に対応していないものがあります。
	  デフォルトでは FreeBSD が新しい接続を受け付けるときに、
	  ロールスイッチを実行してマスタになろうとします。
	  これに対応していないデバイスは接続できないでしょう。
	  なお、ロールスイッチングは新しい接続が確立されるときに実行されるので、
	  ロールスイッチングに対応しているかどうかリモートデバイスに問い合わせることはできません。
	  ローカル側でロールスイッチングを無効にする
	  HCI オプションがあります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>hccontrol -n ubt0hci write_node_role_switch 0</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93824592"></a>22.4.11.2. 何かがうまくいっていないみたいです。
	  何が実際に起こっているか確認できますか?</h4></div></div></div><p>できます。
	  <a class="link" href="http://www.geocities.com/m_evmenkin/" target="_top">ここ</a>
	  からダウンロードできる第三者パッケージ
	  <span class="application">hcidump-1.5</span> を使ってください。
	  <span class="application">hcidump</span> ユーティリティは
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcpdump</span>(1)</span></a> と似ています。
	  これはターミナル上の Bluetooth パケットの内容の表示および
	  Bluetooth パケットをファイルにダンプするのに使えます。</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-bridging"></a>22.5. ブリッジ</h2></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Peterson</span> <span class="firstname">Steve</span> [FAMILY Given]</span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93830736"></a>22.5.1. はじめに</h3></div></div></div><a id="idp93831376" class="indexterm"></a><a id="idp93832016" class="indexterm"></a><p>IP サブネットを作成して、
	それらのセグメントをルータを使って接続することなしに、
	(Ethernet セグメントのような)
	一つの物理ネットワークを二つのネットワークセグメントに分割することはとても有効な場合があります。
	この方法で二つのネットワークを繋ぐデバイスは
	<span class="quote">「<span class="quote">ブリッジ</span>」</span> と呼ばれます。
	二つのネットワークインタフェースカードを持つ FreeBSD
	システムは、ブリッジとして動作することができます。</p><p>ブリッジは、各ネットワークインタフェイスに繋がるデバイスの
	MAC 層のアドレス (Ethernet アドレス) を記憶することにより動作します。
	ブリッジはトラフィックの送信元と受信先が異なったネットワーク上にある場合にのみトラフィックを転送します。</p><p>多くの点で、ブリッジはポート数の少ない Ethernet
	スイッチのようなものといえます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93834320"></a>22.5.2. ブリッジがふさわしい状況</h3></div></div></div><p>今日ブリッジが活躍する場面は大きく分けて二つあります。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93835344"></a>22.5.2.1. トラフィックの激しいセグメント</h4></div></div></div><p>ひとつは、
	  物理ネットワークセグメントがトラフィック過剰になっているが、
	  なんらかの理由によりネットワークをサブネットに分け、
	  ルータで接続することができない場合です。</p><p>編集部門と製作部門がおなじサブネットに同居している新聞社を例に考えてみましょう。
	  編集部門のユーザはファイルサーバとして全員サーバ
	  <code class="systemitem">A</code> を利用し、
	  製作部門のユーザはサーバ <code class="systemitem">B</code> を利用します。
	  すべてのユーザを接続するのには Ethernet が使われており、
	  高負荷となったネットワークは遅くなってしまいます。</p><p>もし編集部門のユーザを一つのネットワークセグメントに分離することができ、
	  製作部門のユーザも同様にできるのなら、
	  二つのネットワークセグメントをブリッジで繋ぐことができます。
	  ブリッジの <span class="quote">「<span class="quote">反対</span>」</span>
	  側へ向かうネットワークトラフィックだけが転送され、
	  各ネットワークセグメントの混雑は緩和されます。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93838544"></a>22.5.2.2. パケットフィルタ/帯域制御用ファイアウォール</h4></div></div></div><a id="idp93839184" class="indexterm"></a><a id="idp93839696" class="indexterm"></a><p>もうひとつはネットワークアドレス変換 (NAT)
	  を使わずにファイアウォール機能を利用したい場合です。</p><p>ここでは DSL もしくは ISDN で
	  ISP に接続している小さな会社を例にとってみましょう。
	  この会社は ISP からグローバル IP アドレスを
	  13 個割り当てられており、ネットワーク上には 10 台の PC が存在します。
	  このような状況では、サブネット化にまつわる問題から、
	  ルータを用いたファイアウォールを利用することは困難です。</p><a id="idp93845200" class="indexterm"></a><a id="idp93845712" class="indexterm"></a><a id="idp93846224" class="indexterm"></a><p>ブリッジを用いたファイアウォールなら、
	  IP アドレスの問題を気にすること無く、
	  DSL/ISDN ルータの下流側に置くように設定できます。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93847376"></a>22.5.3. ブリッジを設定する</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93848016"></a>22.5.3.1. ネットワークインタフェースカードの選択</h4></div></div></div><p>ブリッジを利用するには少なくとも
	  2 枚のネットワークカードが必要です。
	  残念なことに FreeBSD 4.0
	  ではすべてのネットワークインタフェースカードがブリッジ機能に対応しているわけではありません。
	  カードに対応しているかどうかについては <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bridge&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bridge</span>(4)</span></a>
	  を参照してください。</p><p>以下に進む前に、
	  二枚のネットワークカードをインストールしてテストしてください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93850448"></a>22.5.3.2. カーネルコンフィグレーションの変更</h4></div></div></div><a id="idp93851088" class="indexterm"></a><p>カーネルでブリッジ機能を有効にするには</p><pre class="programlisting">options BRIDGE</pre><p>という行をカーネルコンフィグレーションファイルに追加して
	  カーネルを再構築してください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93857744"></a>22.5.3.3. ファイアウォール対応</h4></div></div></div><a id="idp93858384" class="indexterm"></a><p>ファイアウォールとしてブリッジを利用しようとしている場合には
 	  <code class="literal">IPFIREWALL</code> オプションも指定する必要があります。
	  ブリッジをファイアウォールとして設定する際の一般的な情報に関しては、
	  <a class="xref" href="#firewalls" title="15.7. ファイアウォール">「ファイアウォール」</a> を参照してください。</p><p>IP 以外のパケット (ARP など)
	  がブリッジを通過するようにするためには、
 	  ファイアウォール用オプションを設定しなければなりません。
	  このオプションは <code class="literal">IPFIREWALL_DEFAULT_TO_ACCEPT</code>
	  です。この変更により、
 	  デフォルトではファイアウォールがすべてのパケットを受け入れるようになることに注意してください。
 	  この設定を行う前に、
	  この変更が自分のルールセットにどのような影響をおよぼすかを把握しておかなければなりません。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93860944"></a>22.5.3.4. 帯域制御機能</h4></div></div></div><p>ブリッジで帯域制御機能を利用したい場合、
	  カーネルコンフィグレーションで <code class="literal">DUMMYNET</code>
	  オプションを加える必要があります。
	  詳しい情報に関しては <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dummynet&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">dummynet</span>(4)</span></a> を参照してください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93863376"></a>22.5.4. ブリッジを有効にする</h3></div></div></div><p>ブリッジを有効にするには、
	<code class="filename">/etc/sysctl.conf</code> に以下の行を加えてください。
      </p><pre class="programlisting">net.link.ether.bridge=1</pre><p>指定したインタフェースでブリッジを可能にするには以下を加えてください。</p><pre class="programlisting">net.link.ether.bridge_cfg=<em class="replaceable"><code>if1</code></em>,<em class="replaceable"><code>if2</code></em></pre><p>(<em class="replaceable"><code>if1</code></em> および
	<em class="replaceable"><code>if2</code></em>
	は二つのネットワークインタフェースの名前に置き換えてください)。
	ブリッジを経由したパケットを <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ipfw</span>(8)</span></a> でフィルタしたい場合には、
	以下の行も付け加える必要があります</p><pre class="programlisting">net.link.ether.bridge_ipfw=1</pre><p>FreeBSD 5.2-RELEASE
	以降では、かわりに以下の行を使用してください。</p><pre class="programlisting">net.link.ether.bridge.enable=1
 net.link.ether.bridge.config=<em class="replaceable"><code>if1</code></em>,<em class="replaceable"><code>if2</code></em>
 net.link.ether.bridge.ipfw=1</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93870672"></a>22.5.5. その他の情報</h3></div></div></div><p>ネットワークからブリッジに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">telnet</span>(1)</span></a> したい場合、
 	ネットワークカードの一つに IP アドレスを割り当てるのが正しいです。
	一般的に、両方のカードに
	IP アドレスを割り当てるのはよい考えではないとされています。</p><p>ネットワーク内に複数のブリッジを設置する場合、
	任意のワークステーション間で一つ以上の経路を持つことはできません。
	技術的には、
	これはスパニングツリーのリンク制御はサポートされていない、
	ということを意味します。</p><p>ブリッジは、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a>
	にかかる時間を遅らせることがあります。特に、
	一方のセグメントからもう一方へのトラフィックでそうなります。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-nfs"></a>22.6. NFS</h2></div><div><span class="authorgroup">追記と再編成: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span> <span class="firstname">Tom</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Swingle</span> <span class="firstname">Bill</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp93878480" class="indexterm"></a><p>FreeBSD がサポートしている多くのファイルシステムの中には、
      <acronym class="acronym">NFS</acronym>
      とも呼ばれているネットワークファイルシステムがあります。
      <acronym class="acronym">NFS</acronym> はあるマシンから他のマシンへと、
      ネットワークを通じてディレクトリとファイルを共有することを可能にします。
      <acronym class="acronym">NFS</acronym> を使うことで、
      ユーザやプログラムはリモートシステムのファイルを、
      それがローカルファイルであるかのようにアクセスすることができます。
    </p><p><acronym class="acronym">NFS</acronym>
      が提供可能な最も特筆すべき利点いくつかは以下のものです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>一般的に使われるデータを単一のマシンに納めることができ、
	  ユーザはネットワークを通じてデータにアクセスできるため、
	  ローカルワークステーションが使用するディスク容量が減ります。</p></li><li class="listitem"><p>ネットワーク上のすべてのマシンに、
	  ユーザが別々にホームディレクトリを持つ必要がありません。
	  <acronym class="acronym">NFS</acronym> サーバ上にホームディレクトリが設定されれば、
	  ネットワークのどこからでもアクセス可能です。</p></li><li class="listitem"><p>フロッピーディスクや CDROM ドライブ、
	  ZIP ドライブなどのストレージデバイスを、
	  ネットワーク上の他のマシンで利用することができます。
	  ネットワーク全体のリムーバブルドライブの数を減らせるかもしれません。</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93904848"></a>22.6.1. <acronym class="acronym">NFS</acronym> はどのように動作するのか</h3></div></div></div><p><acronym class="acronym">NFS</acronym> は最低二つの主要な部分、
	サーバと一つ以上のクライアントからなります。
	クライアントはサーバマシン上に格納されたデータにリモートからアクセスします。
	これが適切に機能するには、
	いくつかのプロセスが設定されて実行されていなければなりません。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.X では <code class="command">portmap</code> ユーティリティは
	  <span class="application">rpcbind</span> ユーティリティに置き換わりました。
	  したがって FreeBSD 5.X では、ユーザは下記の例で、
	  <span class="application">portmap</span> の例のすべてを
	  <code class="command">rpcbind</code> に置き換える必要があります。</p></div><p>サーバは以下のデーモンを動作させなければなりません。</p><a id="idp93908816" class="indexterm"></a><a id="idp93910096" class="indexterm"></a><a id="idp93910992" class="indexterm"></a><a id="idp93911888" class="indexterm"></a><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>デーモン</th><th>説明</th></tr></thead><tbody><tr><td>nfsd</td><td><acronym class="acronym">NFS</acronym>
		クライアントからのリクエストを処理する
		<acronym class="acronym">NFS</acronym> デーモン</td></tr><tr><td>mountd</td><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nfsd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nfsd</span>(8)</span></a> から渡されたリクエストを実際に実行する
		<acronym class="acronym">NFS</acronym> マウントデーモン</td></tr><tr><td>portmap</td><td><acronym class="acronym">NFS</acronym> サーバの利用しているポートを
		<acronym class="acronym">NFS</acronym>
		クライアントから取得できるようにするためのポートマッパデーモン</td></tr></tbody></table></div><p>クライアント側では <span class="application">nfsiod</span>
	というデーモンも実行できます。
	<span class="application">nfsiod</span> デーモンは <acronym class="acronym">NFS</acronym>
	サーバからのリクエストを処理します。
	これは任意であり、性能を改善しますが、
	通常の正しい動作には必要としません。詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nfsiod&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nfsiod</span>(8)</span></a>
	マニュアルページを参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-configuring-nfs"></a>22.6.2. <acronym class="acronym">NFS</acronym> の設定</h3></div></div></div><a id="idp93925456" class="indexterm"></a><p><acronym class="acronym">NFS</acronym> の設定は比較的素直な工程です。
	動かさなければならないプロセスは <code class="filename">/etc/rc.conf</code>
	ファイルを少し変更すれば起動時に実行させられます。</p><p><acronym class="acronym">NFS</acronym> サーバでは
	<code class="filename">/etc/rc.conf</code> ファイルの中で、
	以下のオプションが設定されていることを確かめてください。</p><pre class="programlisting">portmap_enable="YES"
nfs_server_enable="YES"
mountd_flags="-r"</pre><p><code class="command">mountd</code> は
	<acronym class="acronym">NFS</acronym> サーバが有効になっていれば、
	自動的に実行されます。</p><p>クライアント側では <code class="filename">/etc/rc.conf</code>
	内に以下の設定があることを確認してください。</p><pre class="programlisting">nfs_client_enable="YES"</pre><p><code class="filename">/etc/exports</code> ファイルは <acronym class="acronym">NFS</acronym>
	サーバがどのファイルシステムをエクスポート
	(ときどき <span class="quote">「<span class="quote">共有</span>」</span> と呼ばれます) するのかを指定します。
	<code class="filename">/etc/exports</code> ファイル中の各行は、
	エクスポートするファイルシステム、
	およびそのファイルシステムにアクセスできるマシンを指定します。
	ファイルシステムにアクセスできるマシンとともに、
	アクセスオプションも指定できます。
	このファイルで指定できるオプションはたくさんありますが、
	ここではほんの少しだけ言及します。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=exports&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">exports</span>(5)</span></a>
	マニュアルページを読めば、
	他のオプションは簡単にみつけられるでしょう。
      </p><p>いくつか <code class="filename">/etc/exports</code> の設定例を示します。</p><a id="idp93939024" class="indexterm"></a><p>以下の例はファイルシステムのエクスポートの考え方を示しますが、
	あなたの環境とネットワーク設定に応じて設定は少し変わるでしょう。
	たとえば次の行は <code class="filename">/cdrom</code>
	ディレクトリを、サーバと同じドメイン名か
	(そのため、いずれもドメイン名がありません)、
	<code class="filename">/etc/hosts</code>
	に記述されている三つの例となるマシンに対してエクスポートします。
	<code class="option">-ro</code>
	フラグは共有されるファイルシステムを読み込み専用にします。
	このフラグにより、
	リモートシステムは共有されたファイルシステムに対して何の変更も行えなくなります。</p><pre class="programlisting">/cdrom -ro host1 host2 host3</pre><p>以下の設定は IP アドレスで指定した 3 つのホストに対して
	<code class="filename">/home</code> をエクスポートします。
	この設定はプライベートネットワークで
	<acronym class="acronym">DNS</acronym> が設定されていない場合に便利でしょう。
	内部のホスト名に対して <code class="filename">/etc/hosts</code>
	を設定するという手段もあります。
	詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts</span>(5)</span></a> を参照してください。
	<code class="option">-alldirs</code>
	フラグはサブディレクトリがマウントポイントとなることを認めます。
	言い替えると、これはサブディレクトリをマウントしませんが、
	クライアントが要求するか、
	または必要とするディレクトリだけをマウントできるようにします。</p><pre class="programlisting">/home  -alldirs  10.0.0.2 10.0.0.3 10.0.0.4</pre><p>以下の設定は、サーバとは異なるドメイン名の
	2 台のクライアントがアクセスできるように
	<code class="filename">/a</code> をエクスポートします。
	<code class="option">-maproot=root</code> フラグは、リモートシステムの
	<code class="systemitem">root</code> ユーザが、
	エクスポートされたファイルシステムに <code class="systemitem">root</code>
	として書き込むことを許可します。
	<code class="literal">-maproot=root</code> フラグが無ければ、
	リモートマシンの <code class="systemitem">root</code> 権限を持っていても、
	共有されたファイルシステム上のファイルを変更することはできないでしょう。</p><pre class="programlisting">/a  -maproot=root  host.example.com box.example.org</pre><p>クライアントがエクスポートされたファイルシステムにアクセスするためには、
	そうする権限が与えられていなければなりません。
	<code class="filename">/etc/exports</code> ファイルに
	クライアントが含まれているかどうか確認してください。
      </p><p><code class="filename">/etc/exports</code> ファイルでは、
	それぞれの行が一つのファイルシステムを一つのホストにエクスポートすることを表します。
	リモートホストはファイルシステム毎に一度だけ指定することができ、
	それに加えて一つのデフォルトエントリを置けます。たとえば
	<code class="filename">/usr</code> が単一のファイルシステムであると仮定します。
	次の <code class="filename">/etc/exports</code> は無効です。</p><pre class="programlisting">/usr/src   client
/usr/ports client</pre><p>単一のファイルシステムである <code class="filename">/usr</code>
	は、2 行に渡って、同じホスト <code class="systemitem">client</code>
	へエクスポートされています。
	この場合、正しい書式は次のとおりです。</p><pre class="programlisting">/usr/src /usr/ports  client</pre><p>あるホストにエクスポートされるある
	1 つのファイルシステムのプロパティは、
	1 行ですべて指定しなければなりません。
	クライアントの指定のない行は、単一のホストとして扱われます。
	これはファイルシステムをエクスポートできる方法を制限しますが、
	多くの場合これは問題になりません。</p><p>下記は、
	<code class="filename">/usr</code> および <code class="filename">/exports</code>
	がローカルファイルシステムである場合の、
	有効なエクスポートリストの例です。</p><pre class="programlisting"># Export src and ports to client01 and client02, but only
# client01 has root privileges on it
/usr/src /usr/ports -maproot=root    client01
/usr/src /usr/ports               client02
# The client machines have root and can mount anywhere
# on /exports. Anyone in the world can mount /exports/obj read-only
/exports -alldirs -maproot=root      client01 client02
/exports/obj -ro</pre><p>変更が有効となるように、
	<code class="filename">/etc/exports</code> が変更されたら
	<code class="command">mountd</code> を再起動しなければなりません。
	これは <code class="command">mountd</code>
	プロセスに HUP シグナルを送ることで実行できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat /var/run/mountd.pid`</code></strong></pre><p>他には、再起動すれば、FreeBSD はすべてを適切に設定します。
	しかしながら、再起動は必須ではありません。
	<code class="systemitem">root</code>
	権限で以下のコマンドを実行すれば、すべてが起動するでしょう。</p><p><acronym class="acronym">NFS</acronym> サーバでは</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>nfsd -u -t -n 4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mountd -r</code></strong></pre><p><acronym class="acronym">NFS</acronym> クライアントでは</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>nfsiod -n 4</code></strong></pre><p>これでリモートのファイルシステムを実際にマウントする準備がすべてできました。
	この例では、サーバの名前は <code class="literal">server</code> で、
	クライアントの名前は <code class="literal">client</code> とします。
	リモートファイルシステムを一時的にマウントするだけ、
	もしくは設定をテストするだけなら、クライアント上で
	<code class="systemitem">root</code>
	権限で以下のコマンドを実行するだけです。</p><a id="idp93989584" class="indexterm"></a><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount server:/home /mnt</code></strong></pre><p>これで、サーバの <code class="filename">/home</code>
	ディレクトリが、クライアントの <code class="filename">/mnt</code>
	にマウントされます。もしすべてが正しく設定されていれば、
	クライアントの /mnt に入り、
	サーバにあるファイルすべてを見れるはずです。
      </p><p>リモートファイルシステムを起動のたびに自動的にマウントしたいなら、
	ファイルシステムを <code class="filename">/etc/fstab</code>
	ファイルに追加してください。
	例としてはこのようになります。</p><pre class="programlisting">server:/home	/mnt	nfs	rw	0	0</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a>
	マニュアルページに利用可能なオプションがすべて掲載されています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp93995088"></a>22.6.3. 実用的な使い方</h3></div></div></div><p><acronym class="acronym">NFS</acronym> には実用的な使用法がいくつもあります。
	ここで典型的な使用法をいくつか紹介しましょう。</p><a id="idp94021072" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>何台ものマシンで CDROM
	    などのメディアを共有するように設定します。
	    これは安上がりで、たいていは、
	    複数のマシンにソフトウェアをインストールするのにより便利な方法です。</p></li><li class="listitem"><p>大規模なネットワークでは、
	    すべてのユーザのホームディレクトリを格納するメイン
	    <acronym class="acronym">NFS</acronym>
	    サーバを構築すると、ずっと便利でしょう。
	    どのワークステーションにログインしても、
	    ユーザがいつでも同じホームディレクトリを利用できるように、
	    これらのホームディレクトリはネットワークに向けてエクスポートされます。</p></li><li class="listitem"><p>何台ものマシンで <code class="filename">/usr/ports/distfiles</code>
	    ディレクトリを共有できます。こうすると、
	    何台ものマシン上に port をインストールする必要がある時に、
	    それぞれのマシンでソースコードをダウンロードすることなく、
	    直ちにソースにアクセスできます。</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-amd"></a>22.6.4. <span class="application">amd</span> による自動マウント</h3></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Stilwell</span> <span class="firstname">Wylie</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">再構成: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lee</span> <span class="firstname">Chern</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp94030416" class="indexterm"></a><a id="idp94030928" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a> (自動マウントデーモン) は、
	ファイルシステム内のファイルまたはディレクトリがアクセスされると、
	自動的にリモートファイルシステムをマウントします。
	また、一定の間アクセスされないファイルシステムは
	<span class="application">amd</span>
	によって自動的にアンマウントされます。
	<span class="application">amd</span> を使用することは、通常
	<code class="filename">/etc/fstab</code>
	内に記述する恒久的なマウントに対する、
	単純な代替案となります。</p><p><span class="application">amd</span> はそれ自身を NFS サーバとして
	<code class="filename">/host</code> および <code class="filename">/net</code>
	ディレクトリに結びつけることによって動作します。
	このディレクトリ内のどこかでファイルがアクセスされると、
	<span class="application">amd</span> は対応するリモートマウントを調べて、
	自動的にそれをマウントします。
	<code class="filename">/net</code> が、エクスポートされたファイルシステムを
	IP アドレスで指定してマウントするのに利用される一方で、
	<code class="filename">/host</code>
	は、エクスポートされたファイルシステムをリモートホスト名で指定してマウントするのに利用されます。</p><p><code class="filename">/host/foobar/usr</code>
	内のファイルにアクセスすると、
	<span class="application">amd</span> はホスト
	<code class="systemitem">foobar</code> からエクスポートされた
	<code class="filename">/usr</code> をマウントします。</p><div class="example"><a id="idp94046416"></a><div class="example-title">例22.1 <span class="application">amd</span>
	  によるエクスポートされたファイルシステムのマウント</div><div class="example-contents"><p><code class="command">showmount</code> コマンドを用いて、
	  リモートホストのマウントで利用できるものが見られます。
	  たとえば、<code class="systemitem">foobar</code>
	  と名付けられたホストのマウントを見るために次のように利用できます。</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>showmount -e foobar</code></strong>
Exports list on foobar:
/usr                               10.10.10.0
/a                                 10.10.10.0
<code class="prompt">%</code> <strong class="userinput"><code>cd /host/foobar/usr</code></strong></pre></div></div><br class="example-break" /><p>例のように <code class="command">showmount</code> はエクスポートとして
	<code class="filename">/usr</code> を表示します。
	<code class="filename">/host/foobar/usr</code> にディレクトリを変更すると、
	<span class="application">amd</span> はホスト名 <code class="systemitem">foobar</code>
	を解決し、お望みのエクスポートをマウントしようと試みます。</p><p><span class="application">amd</span> は
	<code class="filename">/etc/rc.conf</code> 内に次の行を記述すれば、
	起動スクリプトによって起動されます。</p><pre class="programlisting">amd_enable="YES"</pre><p>さらに <code class="varname">amd_flags</code> オプションによって
	<span class="application">amd</span>
	にフラグをカスタマイズして渡せます。デフォルトでは
	<code class="varname">amd_flags</code> は次のように設定されています。</p><pre class="programlisting">amd_flags="-a /.amd_mnt -l syslog /host /etc/amd.map /net /etc/amd.map"</pre><p><code class="filename">/etc/amd.map</code> ファイルは、
	エクスポートがマウントされるデフォルトオプションを決定します。
	<code class="filename">/etc/amd.conf</code> ファイルは、
	<span class="application">amd</span>
	のより高度な機能の一部を設定します。</p><p>詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a> および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">amd.conf</span>(5)</span></a>
	マニュアルページを参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-nfs-integration"></a>22.6.5. 他のシステムとの統合についての問題</h3></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lind</span> <span class="firstname">John</span> [FAMILY Given]</span>. </span></div></div></div><p><span class="emphasis"><em>訳: 渡辺 智雄 <code class="email">&lt;<a xmlns="" class="email" href="mailto:tomo@jp.FreeBSD.org">tomo@jp.FreeBSD.org</a>&gt;</code>. 6 September 1996.</em></span></p><p>ISA バス用のイーサネットアダプタの中には性能が悪いため、
	ネットワーク、特に NFS で深刻な問題がおきるものがあります。
	これは FreeBSD に限ったことではありませんが
	FreeBSD でも起こり得ます。</p><p>この問題は (FreeBSD を使用した) PC
	がシリコングラフィックス社やサン・マイクロシステムズ社などの高性能なワークステーションにネットワーク接続されている場合に頻繁に起こります。
	NFS マウントはうまく動作するでしょう。
	また、いくつかの操作もうまく動作するかもしれませんが、
	他のシステムに対する要求や応答は続いていても、
	突然サーバがクライアントの要求に対して応答しなくなります。これは、
	クライアントが FreeBSD
	か上記のワークステーションであるときにクライアント側に起きる現象です。
	多くのシステムでは、いったんこの問題が現われると、
	行儀良くクライアントを終了する手段はありません。
	NFS がこの状態に陥ってしまうと正常に戻すことはできないため、
	多くの場合クライアントをリセットすることが唯一の解決法となります。</p><p><span class="quote">「<span class="quote">正しい</span>」</span>
	解決法は、より高性能のイーサネットアダプタを
	FreeBSD システムにインストールすることですが、
	満足に動作させる簡単な方法があります。
	FreeBSD システムが <span class="emphasis"><em>サーバ</em></span> になるのなら、
	クライアントからのマウント時に <code class="option">-w=1024</code>
	オプションをつけて下さい。FreeBSD システムが
	<span class="emphasis"><em>クライアント</em></span> になるのなら、
	NFS ファイルシステムを
	<code class="option">-r=1024</code> オプションつきでマウントして下さい。
	これらのオプションは自動的にマウントをおこなう場合には
	クライアントの <code class="filename">fstab</code>
	エントリの 4 番目のフィールドに指定してもよいですし、
	手動マウントの場合は mount コマンドの <code class="option">-o</code>
	パラメータで指定してもよいでしょう。</p><p>NFS サーバとクライアントが別々のネットワーク上にあるような場合、
	これと間違えやすい他の問題が起きることに注意して下さい。
	そのような場合は、ルータが必要な
	UDP 情報をきちんとルーティングしているかを確かめて下さい。
	していなければ、たとえあなたが何をしようと解決できないでしょう。</p><p>次の例では <code class="systemitem">fastws</code>
	は高性能ワークステーションのホスト (インタフェース) 名で、
	<code class="systemitem">freebox</code> は低性能のイーサネットアダプタを備えた
	FreeBSD システムのホスト (インタフェース) 名です。
	また <code class="filename">/sharedfs</code> はエクスポートされる
	NFS ファイルシステムであり (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=exports&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">exports</span>(5)</span></a> を参照) 、
	<code class="filename">/project</code> はエクスポートされたファイルシステムの、
	クライアント上のマウントポイントとなります。
	すべての場合において、アプリケーションによっては
	<code class="option">hard</code> や <code class="option">soft</code>,	<code class="option">bg</code>
	といった追加オプションがふさわしいかもしれないことに注意して下さい。</p><p>クライアント側 FreeBSD システム (<code class="systemitem">freebox</code>)
	の <code class="filename">/etc/fstab</code> の例は以下のとおりです。</p><pre class="programlisting">fastws:/sharedfs /project nfs rw,-r=1024 0 0</pre><p><code class="systemitem">freebox</code> 上で手動で mount
	コマンドを実行する場合は次のようにして下さい。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t nfs -o -r=1024 fastws:/sharedfs /project</code></strong></pre><p>サーバ側 FreeBSD システム (<code class="systemitem">fastws</code>)
	の <code class="filename">/etc/fstab</code> の例は以下のとおりです。</p><pre class="programlisting">freebox:/sharedfs /project nfs rw,-w=1024 0 0</pre><p><code class="systemitem">fastws</code> 上で手動で mount
	コマンドで実行する場合は次のようにして下さい。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t nfs -o -w=1024 freebox:/sharedfs /project</code></strong></pre><p>近いうちにどのような
	16 ビットのイーサネットアダプタでも、上記の読み出し、
	書き込みサイズの制限なしで操作できるようになるでしょう。</p><p>失敗が発生したとき何が起きているか関心のある人に、
	なぜ回復不可能なのかも含めて説明します。NFS は通常
	(より小さいサイズへ分割されるかもしれませんが)
	8 K の <span class="quote">「<span class="quote">ブロック</span>」</span> サイズで動作します。
	イーサネットのパケットサイズは最大 1500 バイト程度なので、
	上位階層のコードにとっては 1 つのユニットであって、
	NFS <span class="quote">「<span class="quote">ブロック</span>」</span>
	は複数のイーサネットパケットに分割されるものの、
	上位階層のコードにとっては 1 つのユニットであって、
	ユニットとして受信され、組み立て直され、
	<span class="emphasis"><em>肯定応答</em></span> (ACK) されなければなりません。
	高性能のワークステーションは次々に NFS ユニットを構成するパケットを、
	標準の許す限り間隔を詰めて次々に送り出すことができます。
	小さく、容量の低いカードでは、
	同じユニットの前のパケットがホストに転送される前に、
	後のパケットがそれを踏みつぶしてしまいます。
	このため全体としてのユニットは、再構成も肯定応答もできません。
	その結果、
	ワークステーションはタイムアウトして再送を試みますが、
	8 K のユニット全体を再送しようとするので、
	このプロセスは際限無く繰り返されてしまいます。</p><p>ユニットサイズをイーサネットのパケットサイズの
	制限以下に抑えることにより、
	受信した完全なイーサネットパケットについて個々に肯定応答を返せることが保証されるので、
	デッドロック状態を避けられるようになります。</p><p>それでも、高性能なワークステーションが力任せに次々と
	PC システムにデータを送ったときには踏みつぶしが起きるかもしれません。
	しかし、高性能のカードを使っていれば、NFS <span class="quote">「<span class="quote">ユニット</span>」</span>
	で必ずそのような踏みつぶしが起きるとは限りません。
	踏みつぶしが起きたら、影響を受けたユニットは再送されて、
	受信され、組み立てられ、肯定応答される十分な見込みがあります。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-diskless"></a>22.7. ディスクレス稼働</h2></div><div><span class="authorgroup">更新: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Dockès</span> <span class="firstname">Jean-François</span> [FAMILY Given]</span>. </span></div></div></div><p><span class="emphasis"><em>訳: 鈴木 康修 <code class="email">&lt;<a xmlns="" class="email" href="mailto:yasu@hike.te.chiba-u.ac.jp">yasu@hike.te.chiba-u.ac.jp</a>&gt;</code></em></span></p><a id="idp94162384" class="indexterm"></a><a id="idp94162896" class="indexterm"></a><p>FreeBSD マシンはネットワークを通じて起動でき、
      そして NFS サーバからマウントしたファイルシステムを使用して、
      ローカルディスクなしで動作することができます。
      標準の設定ファイルを変更する以上の、システムの修正は必要ありません。
      必要な要素のすべてが用意されているので、
      このようなシステムを設定するのは簡単です。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ネットワークを通じてカーネルを読み込む方法は、
	  少なくとも二つあります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><acronym class="acronym">PXE</acronym>: <span class="trademark">Intel</span>® の
	      Preboot Execution Environment システムは、
	      一部のネットワークカードまたはマザーボードに組み込まれた、
	      スマートなブート ROM の一形態です。
	      詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a> を参照してください。</p></li><li class="listitem"><p>port の <span class="application">etherboot</span>
	      (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/etherboot/pkg-descr">net/etherboot</a>) は、
	      ネットワークを通じてカーネルを起動する ROM
	      化可能なコードを提供します。
	      コードはネットワークカード上のブート PROM に焼き付けるか、
	      あるいはローカルフロッピー (ハード) ディスクドライブ、
	      または動作している <span class="trademark">MS-DOS</span>® システムから読み込むことができます。
	      多くのネットワークカードに対応しています。</p></li></ul></div></li><li class="listitem"><p>サンプルスクリプト
	  (<code class="filename">/usr/share/examples/diskless/clone_root</code>)
	  はサーバ上で、
	  ワークステーションのルートファイルシステムの作成と維持をやり易くします。
	  このスクリプトは少し書き換えないといけないでしょうが、
	  早く取り掛かれるようにします。</p></li><li class="listitem"><p>ディスクレスシステム起動を検知しサポートする標準のシステム起動ファイルが
	  <code class="filename">/etc</code> 内にあります。</p></li><li class="listitem"><p>必要なら、NFS
	  ファイルまたはローカルディスクのどちらかにスワップできます。</p></li></ul></div><p>ディスクレスワークステーションを設定する方法はいろいろあります。
      多くの要素が関わっており、
      その多くはローカルの状況に合わせてカスタマイズできます。下記は、
      単純さと標準の FreeBSD
      起動スクリプトとの互換性を強調した完全なシステムの設定を説明します。
      記述されているシステムの特徴は次のとおりです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ディスクレスワークステーションは、
	  共有された読み取り専用の
	  <code class="filename">ルート</code>ファイルシステムと、
	  共有された読み取り専用の
	  <code class="filename">/usr</code> を使用します。</p><p><code class="filename">ルート</code> ファイルシステムは、
	  標準的な FreeBSD (典型的にはサーバの) のルートのコピーで、
	  一部の設定ファイルが、ディスクレス稼働、
	  また場合によってはそのワークステーションに特有のもので上書きされています。</p><p>書き込み可能でなければならない <code class="filename">ルート</code>
	  の部分は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mfs</span>(8)</span></a> ファイルシステムで覆われます。
	  システムが再起動するときにはすべての変更が失われるでしょう。</p></li><li class="listitem"><p>カーネルは DHCP (または BOOTP) および TFTP を用いて
	  <span class="application">etherboot</span> によって読み込まれます。</p></li></ul></div><div xmlns="" class="caution"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">記述されているとおり、
	このシステムは安全ではありません。
	ネットワークの保護された範囲で使用されるべきであり、
	他のホストから信頼されてはいけません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94216400"></a>22.7.1. セットアップの手順</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94221264"></a>22.7.1.1. DHCP/BOOTP の設定</h4></div></div></div><a id="idp94221904" class="indexterm"></a><p>ネットワークを通じて設定を取得し、
	  ワークステーションを起動するために一般的に使用されるプロトコルには、
	  BOOTP と DHCP の 2 つがあります。
	  それらはワークステーションのブートストラップ時に何ヵ所かで使用されます。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">etherboot</span>
	      はカーネルを見つけるために DHCP (デフォルト) または
	      BOOTP (設定オプションが必要) を使用します
	      (PXE は DHCP を使用します) 。</p></li><li class="listitem"><p>NFS ルートの場所を定めるためにカーネルは
	      BOOTP を使用します。</p></li></ul></div><p>BOOTP だけを使用するようにシステムを設定することもできます。
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bootpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bootpd</span>(8)</span></a> サーバプログラムは
	  FreeBSD のベースシステムに含まれています。</p><p>しかしながら、DHCP には BOOTP に勝る点が多々あります。
	  (よりよい設定ファイル、PXE が使えること、
	  そしてディスクレス稼働には直接関係しない多くの長所)
	  ここでは BOOTP だけ利用する場合と、
	  BOOTP と DHCP を組み合わせた設定を扱います。特に ISC DHCP
	  ソフトウェアパッケージを利用する後者の方法に重点をおきます。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94226896"></a>22.7.1.1.1. ISC DHCP を使用する設定</h5></div></div></div><a id="idp94227536" class="indexterm"></a><p><span class="application">isc-dhcp</span> サーバは、
	    BOOTP および DHCP リクエストの両方に答えることができます。</p><p>4.4-RELEASE の時点で <span class="application">isc-dhcp 3.0</span>
	    はベースシステムの一部では無くなりました。
	    まずはじめに
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a> port
	    または対応する package をインストールする必要があるでしょう。
	    ports および package に関する一般的な情報については
	    <a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a> を参照してください。</p><p><span class="application">isc-dhcp</span> がインストールされると、
	    動作するために設定ファイルを必要とします
	    (通常 <code class="filename">/usr/local/etc/dhcpd.conf</code>
	    が指定されます) 。
	    下記にコメントを含めた例を示します。</p><pre class="programlisting">
          default-lease-time 600;
          max-lease-time 7200;
          authoritative;

          option domain-name "example.com";
          option domain-name-servers 192.168.4.1;
          option routers 192.168.4.1;

          subnet 192.168.4.0 netmask 255.255.255.0 {
            use-host-decl-names on; <a id="co-dhcp-host-name"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
            option subnet-mask 255.255.255.0;
            option broadcast-address 192.168.4.255;

            host margaux {
              hardware ethernet 01:23:45:67:89:ab;
              fixed-address margaux.example.com;
              next-server 192.168.4.4;<a id="co-dhcp-next-server"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
              filename "/tftpboot/kernel.diskless";<a id="co-dhcp-filename"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
              option root-path "192.168.4.4:/data/misc/diskless";<a id="co-dhcp-root-path"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
            }
          }</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-host-name"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>このオプションは
		<code class="literal">host</code> 宣言の値を、
		ディスクレスホストへのホスト名として送るように
		<code class="command">dhcpd</code> に指示します。
		別の方法として、ホスト宣言内に
		<code class="literal">option host-name margaux</code>
		を加えるものがあります。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-next-server"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>TFTP サーバを
		<code class="literal">next-server</code> ディレクティブに指定します
		(デフォルトは DHCP サーバと同じホストを使います)。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-filename"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>カーネルとして
		<span class="application">etherboot</span> が読み込むファイルを
		<code class="literal">filename</code> ディレクティブに指定します。
		</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">PXE は相対的なファイル名を好むようです。
		    また、カーネルではなく <code class="command">pxeboot</code>
		    を読み込みます
		    (<code class="literal">option filename "pxeboot"</code>)。</p></div><p>
	      </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-root-path"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>ルートファイルシステムへのパスを、
		通常の NFS 書式で <code class="literal">root-path</code>
		オプションに指定します。</p></td></tr></table></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94262352"></a>22.7.1.1.2. BOOTP を使用する設定</h5></div></div></div><a id="idp94262992" class="indexterm"></a><p>続けて、<code class="command">bootpd</code>
	    で同等のことをする設定です。
	    これは <code class="filename">/etc/bootptab</code> におきます。</p><p>BOOTP を使用するために、デフォルトではない
	    <code class="literal">NO_DHCP_SUPPORT</code> オプション付きで
	    <span class="application">etherboot</span>
	    をコンパイルしなければならないことと、PXE は DHCP
	    を <span class="emphasis"><em>必要</em></span> とすることに注意してください。
	    <span class="application">bootpd</span> の唯一明白な利点は、
	    これがベースシステムに存在するということです。</p><pre class="programlisting">
          .def100:\
            :hn:ht=1:sa=192.168.4.4:vm=rfc1048:\
            :sm=255.255.255.0:\
            :ds=192.168.4.1:\
            :gw=192.168.4.1:\
            :hd="/tftpboot":\
            :bf="/kernel.diskless":\
            :rp="192.168.4.4:/data/misc/diskless":

          margaux:ha=0123456789ab:tc=.def100</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94272080"></a>22.7.1.2. <span class="application">Etherboot</span>
	  を用いるブートプログラムの準備</h4></div></div></div><a id="idp94272976" class="indexterm"></a><p><a class="link" href="http://etherboot.sourceforge.net" target="_top">Etherboot
	  のウェブサイト</a> には主に Linux システムについて述べた<a class="link" href="http://etherboot.sourceforge.net/doc/html/userman/t1.html" target="_top">
	    広範囲の文書</a>
	  が含まれています。
	  しかし、それにもかかわらず有用な情報を含んでいます。
	  下記は FreeBSD システム上での <span class="application">etherboot</span>
	  の使用法についての概観を示します。</p><p>まずはじめに <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/etherboot/pkg-descr">net/etherboot</a>
	  の package または port をインストールしなければなりません。
	  <span class="application">etherboot</span> port は通常
	  <code class="filename">/usr/ports/net/etherboot</code> にあります。
	  ports ツリーがシステムにインストールされている場合、
	  このディレクトリ内で <code class="literal">make</code>
	  を実行すれば、よきに計らってくれます。
	  ports および packages に関する情報は <a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a>
	  を参照してください。</p><p>ここで説明している方法では、ブートフロッピーを使用します。
	  他の方法 (PROM または DOS プログラム) については
	  <span class="application">etherboot</span>
	  の文書を参照してください。</p><p>ブートフロッピーを作成するためには、
	  <span class="application">etherboot</span>
	  をインストールしたマシンのドライブにフロッピーディスクを挿入します。
	  それからカレントディレクトリを <span class="application">etherboot</span>
	  ツリー内の <code class="filename">src</code>
	  ディレクトリにして次のように入力します。</p><pre class="screen">
	  <code class="prompt">#</code> <strong class="userinput"><code>gmake bin32/devicetype.fd0</code></strong>
	</pre><p><em class="replaceable"><code>devicetype</code></em> は
	  ディスクレスワークステーションのイーサネットカードタイプに依存します。
	  正しい <em class="replaceable"><code>devicetype</code></em> を決定するために、
	  同じディレクトリ内の <code class="filename">NIC</code>
	  ファイルを参照してください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94282960"></a>22.7.1.3. TFTP および NFS サーバの設定</h4></div></div></div><a id="idp94283600" class="indexterm"></a><a id="idp94284752" class="indexterm"></a><p>TFTP サーバ上で <code class="command">tftpd</code>
	  を有効にする必要があります。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p><code class="command">tftpd</code> が提供するファイルを置くディレクトリ
	      (たとえば <code class="filename">/tftpboot</code>)
	      を作成してください。</p></li><li class="step"><p><code class="filename">/etc/inetd.conf</code>
	      ファイルに以下の行を追加してください。</p><pre class="programlisting">tftp    dgram   udp     wait    root  /usr/libexec/tftpd    tftpd -s /tftpboot</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">少なくとも PXE のいくつかのバージョンが TCP 版の
		TFTP を要求するようです。その場合
		<code class="literal">dgram udp</code> を <code class="literal">stream tcp</code>
		に置き換えた 2 番目の行を追加してください。</p></div></li><li class="step"><p><code class="command">inetd</code>
	      に設定ファイルを再読み込みさせてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat /var/run/inetd.pid`</code></strong></pre></li></ol></div><p><code class="filename">tftpboot</code>
	  ディレクトリはサーバ上のどこにでも置けます。
	  その場所が <code class="filename">inetd.conf</code> および
	  <code class="filename">dhcpd.conf</code>
	  の両方に設定されていることを確かめてください。</p><p>さらに NFS を有効にして
	  NFS サーバの適切なファイルシステムをエクスポートする必要があります。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>この行を <code class="filename">/etc/rc.conf</code>
	      に追加してください。</p><pre class="programlisting">nfs_server_enable="YES"</pre></li><li class="step"><p>下記を <code class="filename">/etc/exports</code> に加えることで、
	      ディスクレスマシンのルートディレクトリが位置するファイルシステムをエクスポートしてください
	      (ボリュームのマウントポイントを適当に調節し、
	      <em class="replaceable"><code>margaux</code></em>
	      をディスクレスワークステーションの名前に置き換えてください)。</p><pre class="programlisting"><em class="replaceable"><code>/data/misc</code></em> -alldirs -ro <em class="replaceable"><code>margaux</code></em></pre></li><li class="step"><p><code class="command">mountd</code>
	      に設定ファイルを再読み込みさせてください。
	      <code class="filename">/etc/rc.conf</code> 内で NFS
	      をはじめて有効にする必要があったのなら、
	      代わりに再起動した方がよいかもしれません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat /var/run/mountd.pid`</code></strong></pre></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94302160"></a>22.7.1.4. ディスクレス用のカーネル構築</h4></div></div></div><a id="idp94311120" class="indexterm"></a><p>次のオプションを (通常のものに) 追加した、
	  ディスクレスクライアント用のカーネルコンフィグレーションファイルを作成してください。</p><pre class="programlisting">
          options     BOOTP          # Use BOOTP to obtain IP address/hostname
          options     BOOTP_NFSROOT  # NFS mount root filesystem using BOOTP info
          options     BOOTP_COMPAT   # Workaround for broken bootp daemons.</pre><p><code class="literal">BOOTP_NFSV3</code> および
	  <code class="literal">BOOTP_WIRED_TO</code> を利用してもよいかもしれません
	  (<code class="filename">LINT</code> を参照してください)。</p><p>カーネルを構築して (<a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a> を参照)、
	  <code class="filename">dhcpd.conf</code> に記述した名称で
	  tftp ディレクトリにコピーしてください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94315728"></a>22.7.1.5. ルートファイルシステムの準備</h4></div></div></div><a id="idp94316368" class="indexterm"></a><p><code class="filename">dhcpd.conf</code> に
	  <code class="literal">root-path</code> として記載された
	  ディスクレスワークステーションのためのルートファイルシステムを作成する必要があります。</p><p>これを行う最も簡単な方法は
	  <code class="filename">/usr/share/examples/diskless/clone_root</code>
	  シェルスクリプトを使用することです。
	  このスクリプトは、少なくともファイルシステムが作成される場所
	  (<code class="literal">DEST</code> 変数)
	  を調節するために変更する必要があります。</p><p>説明についてはスクリプトの一番上にあるコメントを参照してください。
	  ベースシステムをどのように構築するか、
	  またファイルがどのようにディスクレス稼働、サブネット、
	  または個々のワークステーションに固有のバージョンによって、
	  選択的にオーバライドできるかを説明します。
	  また、ディスクレスな場合の
	  <code class="filename">/etc/fstab</code> ファイルおよび
	  <code class="filename">/etc/rc.conf</code> ファイルの例を示します。</p><p><code class="filename">/usr/share/examples/diskless</code>
	  内の <code class="filename">README</code>
	  ファイルには、多くの興味深い背景情報が書かれています。
	  しかし <code class="filename">diskless</code> ディレクトリ内の他の例と同じく、
	  <code class="filename">clone_root</code> と
	  <code class="filename">/etc/rc.diskless[12]</code>
	  で実際に使われているものとは異なる設定方法が説明されています。
	  ここに書かれている方法は
	  <code class="filename">rc</code> スクリプトの変更が必要になりますが、
	  こちらの方が気に入ったというのでなければ、
	  参照にとどめてください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94344144"></a>22.7.1.6. スワップの設定</h4></div></div></div><p>必要なら、サーバに置かれたスワップファイルに
	  NFS 経由でアクセスできます。
	  <code class="filename">bootptab</code> または
	  <code class="filename">dhcpd.conf</code> の正確なオプションは、
	  現時点では明確には文書化されていません。
	  下記の設定例は isc-dhcp 3.0rc11
	  を使用して動作したと報告されているものです。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p><code class="filename">dhcpd.conf</code>
	    に下記の行を追加してください。</p><pre class="programlisting">
              # Global section
              option swap-path code 128 = string;
              option swap-size code 129 = integer 32;

              host margaux {
                ... # Standard lines, see above
                option swap-path <em class="replaceable"><code>"192.168.4.4:/netswapvolume/netswap"</code></em>;
                option swap-size <em class="replaceable"><code>64000</code></em>;
              }</pre><p>これは、少なくとも FreeBSD クライアントにおいては、
	      DHCP/BOOTP オプションコードの 128 は
	      NFS スワップファイルへのパスで、オプションコード 129
	      は KB 単位のスワップサイズだということです。
	      もっと古いバージョンの <code class="command">dhcpd</code> では
	      <code class="literal">option option-128 "...</code>
	      という書式が受け付けられましたが、
	      もはや対応していません。</p><p>代わりに、<code class="filename">/etc/bootptab</code>
	      では次の書式を使います。</p><p><code class="literal">T128="192.168.4.4:/netswapvolume/netswap":T129=0000fa00
	      </code></p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">/etc/bootptab</code>
	      では、スワップの大きさは
	      16 進数で表さなければなりません。</p></div></li><li class="step"><p>NFS スワップファイルサーバ側でスワップファイルを作成します。</p><pre class="screen">
              <code class="prompt">#</code> <strong class="userinput"><code>mkdir /netswapvolume/netswap</code></strong>
              <code class="prompt">#</code> <strong class="userinput"><code>cd /netswapvolume/netswap</code></strong>
              <code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero bs=1024 count=64000 of=swap.192.168.4.6</code></strong>
              <code class="prompt">#</code> <strong class="userinput"><code>chmod 0600 swap.192.168.4.6</code></strong></pre><p><em class="replaceable"><code>192.168.4.6</code></em>
	      はディスクレスクライアントの IP アドレスです。</p></li><li class="step"><p>NFS スワップファイルサーバ上で
	      <code class="filename">/etc/exports</code>
	      に下記の行を追加してください。</p><pre class="programlisting">
	      <em class="replaceable"><code>/netswapvolume</code></em>  -maproot=0:10 -alldirs <em class="replaceable"><code>margaux</code></em></pre><p>それから、上述したように <span class="application">mountd</span>
	      にエクスポートファイルを再読み込みさせてください。</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94363856"></a>22.7.1.7. 雑多な問題</h4></div></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94364496"></a>22.7.1.7.1. 読み取り専用の <code class="filename">/usr</code>
	    で動作させる</h5></div></div></div><a id="idp94365520" class="indexterm"></a><p>ディスクレスワークステーションが X
	    を起動するように設定されている場合、
	    xdm 設定ファイルを調整しなければならないでしょう。
	    これはデフォルトでエラーファイルを
	    <code class="filename">/usr</code> に置きます。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94367568"></a>22.7.1.7.2. FreeBSD ではないサーバを使用する</h5></div></div></div><p>ルートファイルシステムを提供するサーバが FreeBSD
	    で動作していない場合、
	    FreeBSD マシン上でルートファイルシステムを作成し、
	    <code class="command">tar</code> または <code class="command">cpio</code>
	    を利用して置きたい場所にコピーしなければならないでしょう。</p><p>この状況では、major/minor 整数サイズが異なっていることにより
	    <code class="filename">/dev</code>
	    内のスペシャルファイルに関する問題が時々おこります。
	    この問題を解決するには、非 FreeBSD
	    サーバからディレクトリをエクスポートして、
	    そのディレクトリを FreeBSD マシンでマウントし、
	    FreeBSD マシン上で <code class="command">MAKEDEV</code>
	    を実行して正しいデバイスエントリを作成します
	    (FreeBSD 5.0 およびそれ以降では、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a>
	    を使用してユーザに意識させずにデバイスノードを割り当てるので、
	    これらのバージョンでは
	    <code class="command">MAKEDEV</code> は必要ありません)。</p></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-isdn"></a>22.8. ISDN</h2></div></div></div><a id="idp94381392" class="indexterm"></a><p><span class="emphasis"><em>訳: はらだ きろう <code class="email">&lt;<a xmlns="" class="email" href="mailto:kiroh@jp.FreeBSD.org">kiroh@jp.FreeBSD.org</a>&gt;</code>.
	11 December 1996.</em></span></p><p>ISDN 技術とハードウェアに関しては、
      <a class="link" href="http://www.alumni.caltech.edu/~dank/isdn/" target="_top">
	Dan Kegel's ISDN Page</a> がよい参考になるでしょう。</p><p>手軽な ISDN の導入手順は以下のようになります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ヨーロッパ在住の方は ISDN カードの節に進んでください。</p></li><li class="listitem"><p>ダイヤルアップ専用でない回線上で、
	  インターネットプロバイダをつかってインターネットに接続するために
	  ISDN を使用することを第一に考えている場合は、
	  ターミナルアダプタの使用を考えてみてください。
	  この方法はもっとも柔軟性があり、
	  プロバイダを変更した場合の問題も少ないでしょう。</p></li><li class="listitem"><p>2 つの LAN を接続する場合や、
	  ISDN 専用線を使用する場合には、
	  スタンドアロンなルータまたはブリッジの使用を勧めます。</p></li></ul></div><p>費用はどの解決法を選ぶかを決める重要な要因です。
      以下に、最も安価な方法から、高価な方法まで順に説明していきます。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-isdn-cards"></a>22.8.1. ISDN カード</h3></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Michaelis</span> <span class="firstname">Hellmuth</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp94394320" class="indexterm"></a><p>FreeBSD の ISDN 実装は、パッシブカードを使用した DSS1/Q.931
	(または Euro-ISDN) 標準だけに対応しています。FreeBSD 4.4
	からは、ファームウェアが他の信号プロトコルにも対応している
	一部のアクティブカードにも対応しました。
	その中には、はじめて対応された一次群速度インタフェース (PRI)
	ISDN カードもあります。</p><p><span class="application">isdn4bsd</span> は IP over raw HDLC
	または同期 PPP を利用して他の ISDN ルータに接続できるようにします。
	PPP では、カーネル PPP を <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sppp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sppp</span>(4)</span></a> ドライバを修正した
	<code class="literal">isppp</code>
	ドライバとともに利用するか、または ユーザプロセス <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	を利用するかのどちらかになります。ユーザ <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	を利用すると、二つ以上の ISDN B チャネルを併せて利用できます。
	ソフトウェア 300 ボーモデムのような多くのユーティリティとともに、
	留守番電話アプリケーションも利用可能です。</p><p>FreeBSD が対応している PC ISDN カードの数は増加しており、
	ヨーロッパ全域や世界のその他多くの地域でうまく使えることが報告されています。</p><p>対応しているパッシブ ISDN カードのほとんどは Infineon
	(前身は Siemens) の ISAC/HSCX/IPAC ISDN
	チップセットを備えたカードですが、
	Cologne Chip から供給されたチップを備えた ISDN カード
	(ISA バスのみ)、Winbond W6692 チップを備えた PCI カード、
	Tiger300/320/ISAC チップセットを組み合わたカードの一部、
	および AVM Fritz!Card PCI V.1.0 や AVM Fritz!Card PnP
	のようなベンダ独自のチップセットに基づいたカードもあります。</p><p>現在のところ、対応しているアクティブカードは
	AVM B1 (ISA および PCI) BRI カードと AVM T1 PCI PRI カードです。</p><p><span class="application">isdn4bsd</span> についての文書は
	FreeBSD システム内の <code class="filename">/usr/share/examples/isdn/</code>
	ディレクトリまたは
	<a class="link" href="http://www.freebsd-support.de/i4b/" target="_top">isdn4bsd
	のウェブサイト</a>を参照してください。
	そこにはヒントや正誤表や
	<a class="link" href="http://people.FreeBSD.org/~hm/" target="_top">isdn4bsd
	ハンドブック</a>のような、
	さらに多くの文書に対するポインタがあります。</p><p>異なる ISDN プロトコルや、現在対応されていない ISDN PC
	カードに対応することや、その他 <span class="application">isdn4bsd</span>
	を拡張することに興味があるなら、Hellmuth Michaelis に連絡してください。</p><p><span class="application">isdn4bsd</span> のインストール、設定、
	そしてトラブルシューティングに関して質問があれば
	<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isdn" target="_top">freebsd-isdn</a> メーリングリストが利用可能です。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94408912"></a>22.8.2. ISDN ターミナルアダプタ</h3></div></div></div><p>ターミナルアダプタ (TA) は ISDN で、
	通常の電話線におけるモデムに相当するものです。</p><a id="idp94442960" class="indexterm"></a><p>ほとんどの TA は、標準のヘイズ AT
	コマンドセットを使用しているので、
	単にモデムと置き換えて使うことができます。</p><p>TA は、基本的にはモデムと同じように動作しますが、
	接続方法は異なり、通信速度も古いモデムよりはるかに速くなります。
	<a class="link" href="#ppp" title="20.3. カーネル PPP の利用">PPP</a> の設定を、
	モデムの場合と同じように行ってください。
	特にシリアル速度を使用できる最高速度に設定するのを忘れないでください。</p><a id="idp94444752" class="indexterm"></a><p>プロバイダへの接続に TA を使用する最大のメリットは、動的
	PPP を行えることです。
	最近 IP アドレス空間がますます不足してきているため、
	ほとんどのプロバイダは、
	固定 IP	アドレスを割り当てないようになっています。
	ほとんどのスタンドアローンルータは、動的 IP
	アドレス割り当てに対応していません。</p><div xmlns="" class="note"><h3 class="admontitle">訳注: </h3><p xmlns="http://www.w3.org/1999/xhtml">最近の ISDN ルータでは
	  IP アドレスの動的割り当てに対応しているものも多いようです。
	  ただし制限がある場合もありますので、
	  詳しくはメーカに問い合わせてください。</p></div><p>TA を使用した場合の機能や接続の安定性は、使用している PPP
	デーモンに完全に依存します。そのため、FreeBSD で PPP
	の設定が完了していれば、使用している既存のモデムを ISDN の TA
	に簡単にアップグレードすることができます。ただし、それまでの
	PPP のプログラムに問題があった場合、その問題は TA
	に置き換えてもそのまま残ります。</p><p>最高の安定性を求めるのであれば、
	<a class="link" href="#userppp" title="20.2. ユーザ ppp の利用">ユーザランド PPP</a> ではなく、カーネル
	<a class="link" href="#ppp" title="20.3. カーネル PPP の利用">PPP</a>を使用してください。</p><p>以下の TA は、FreeBSD で動作確認ずみです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Motorola BitSurfer および Bitsurfer Pro</p></li><li class="listitem"><p>Adtran</p></li></ul></div><p>他の TA もほとんどの場合うまく動作するでしょう。TA
	のメーカーでは、TA  がほとんどの標準モデム AT
	コマンドセットを受け付けるようにするよう努力しているようです。</p><p>外部 TA を使う際の最大の問題点は、
	モデムの場合と同じく良いシリアルカードが必要であるということです。</p><p>シリアルデバイスの詳細と、
	非同期シリアルポートと同期シリアルポートの差を理解するには、<a class="link" href="../../../en_US.ISO8859-1/articles/serial-uart/index.html" target="_top">FreeBSD
	シリアルハードウェア</a>チュートリアルを参照してください。</p><p>標準の PC シリアルポート (非同期) に接続された TA は
	128 Kbs の接続を行っていても、最大通信速度が 115.2 Kbs
	に制限されてしまいます。128 Kbs の ISDN
	の性能を最大限に生かすためには TA
	を同期シリアルカードに接続しなければなりません。</p><p>内蔵 TA を購入すれば、
	同期/非同期問題を回避できるとは思わないでください。内蔵 TA には、
	単に標準 PC シリアルポートのチップが内蔵されているだけです。
	内蔵 TA の利点といえば、
	シリアルケーブルを買わなくていいということと、
	電源コンセントが一つ少なくて済むということくらいでしょう。
      </p><p>同期カードと TA
	の組合せでも、スタンドアロンのルータと同程度の速度は確保できます。
	さらに、386 の FreeBSD マシンと組合せると、
	より柔軟な設定が可能です。</p><p>同期カード/TA を選ぶか、スタンドアロンルータを選ぶかは、
	多分に宗教的な問題です。
	メーリングリストでもいくつか議論がありました。議論の全容については、
	<a class="link" href="../../../../search/search.html" target="_top">アーカイブ</a>
	を検索してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94467152"></a>22.8.3. スタンドアロン ISDN ブリッジ/ルータ</h3></div></div></div><a id="idp94467792" class="indexterm"></a><p>ISDN ブリッジあるいはルータは、
	FreeBSD あるいは他の OS に特有のものでは皆目ありません。
	ルーティングやブリッジング技術に関する詳細は、
	ネットワークの参考書をご覧ください。</p><p>この節では、
	ルータとブリッジのどちらでもあてはまるように記述します。</p><p>ローエンド ISDN ルータ/ブリッジ製品は、
	価格が下がってきていることもあり、
	より広く選択されるようになるでしょう。ISDN ルータは、
	ローカルイーサネットネットワークに直接接続し、
	自身で他のブリッジ/ルータとの接続を制御する小さな箱です。PPP
	や他の広く使用されているプロトコルをつかって通信するためのソフトウェアが組み込まれています。</p><p>ルータは、完全な同期 ISDN 接続を使用するため、通常の TA
	と比較してスループットが大幅に向上します。</p><p>ISDN ルータ/ブリッジを使用する場合の最大の問題点は、
	各メーカーの製品間に相性の問題がまだ存在することです。
	インターネットプロバイダとの接続を考えている場合には、
	プロバイダと相談することをお勧めします。</p><p>事務所の LAN と家庭の LAN の間など、二つの LAN
	セグメントの間を接続しようとしている場合は、
	これはもっともメンテナンスが簡単で、安くあがる解決方法です。
	接続の両側の機材を購入するので、
	リンクがうまくいくであろうことを保証できます。</p><p>たとえば、
	家庭のコンピュータや支店のネットワークを本社のネットワークに接続するためには、
	以下のような設定が使用できます。</p><div class="example"><a id="idp94471760"></a><div class="example-title">例22.2 支店または家庭のネットワーク</div><div class="example-contents"><a id="idp94472400" class="indexterm"></a><p>ネットワークは 10 Base 2 イーサネット
	  (<span class="quote">「<span class="quote">thinnet</span>」</span>)
	  のバス型トポロジを用いています。ルータとネットワークの間は、
	  必要に応じて AUI/10BT トランシーバを使って接続してください。</p><div class="mediaobject"><img src="advanced-networking/isdn-bus.png" alt="10 Base 2 イーサネット" /></div><p>家庭/支店で一台しかコンピュータを使用しないのであれば、
	  クロスのツイストペアケーブルを使用して、
	  直接スタンドアロンルータに接続することも可能です。</p></div></div><br class="example-break" /><div class="example"><a id="idp94477008"></a><div class="example-title">例22.3 本社 LAN や他の LAN</div><div class="example-contents"><p>ネットワークは 10 base T イーサネット
	  (<span class="quote">「<span class="quote">Twisted Pair</span>」</span>)
	  のスター型トポロジを用いています。</p><div class="mediaobject"><img src="advanced-networking/isdn-twisted-pair.png" alt="ISDN ネットワークダイアグラム" /></div></div></div><br class="example-break" /><p>ほとんどのルータ/ブリッジの大きな利点は、
	別々の二つのサイトに対して、<span class="emphasis"><em>同時</em></span>
	にそれぞれ<span class="emphasis"><em>独立した</em></span>二つの PPP
	接続が可能であることです。
	これは、シリアルポートを 2 つもった特定の (通常は高価な)
	モデルを除いて、通常の TA では対応していません。
	チャネルボンディングや MPP などと混同しないでください。</p><p>たとえば、事務所で専用線 ISDN 接続を使用していて、
	別の ISDN 回線を購入したくないときには大変便利な機能です。この場合、
	事務所のルータは、インターネットに接続するための一つの専用線 B
	チャネル接続 (64 Kbs) を管理し、
	別の B チャネルを他のデータ接続に使用できます。
	2 つ目の B チャネルは他の場所とのダイアルイン、
	ダイアルアウトに使用したり、バンド幅を増やすために、
	1 つ目の B チャネルと動的に結合すること (MPPなど)
	ができます。</p><a id="idp94491344" class="indexterm"></a><p>またイーサネットブリッジは、IP パケット以外も中継できます。
	IPX/SPX など、使用するすべてのプロトコルを送ることが可能です。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-nis"></a>22.9. NIS/YP</h2></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Swingle</span> <span class="firstname">Bill</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">追記: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Ogren</span> <span class="firstname">Eric</span> [FAMILY Given]</span> 、 <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Erdelhoff</span> <span class="firstname">Udo</span> [FAMILY Given]</span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94497616"></a>22.9.1. NIS/YP とは?</h3></div></div></div><a id="idp94498256" class="indexterm"></a><a id="idp94498768" class="indexterm"></a><a id="idp94499280" class="indexterm"></a><a id="idp94499792" class="indexterm"></a><a id="idp94500304" class="indexterm"></a><a id="idp94500816" class="indexterm"></a><a id="idp94501328" class="indexterm"></a><p>NIS とは Network Information Services の略で
	Sun Microsystems によって <span class="trademark">UNIX</span>® の (もともとは <span class="trademark">SunOS</span>™ の)
	集中管理のために開発されました。現在では事実上の業界標準になっており、
	主要な <span class="trademark">UNIX</span>® ライクシステム
	(<span class="trademark">Solaris</span>™, HP-UX, <span class="trademark">AIX</span>®, Linux, NetBSD, OpenBSD, FreeBSD、等々)
	はすべてこれをサポートしています。</p><a id="idp94504656" class="indexterm"></a><p>NIS は元々、イエローページといっていましたが、
	商標問題から Sun はその名前を変えました。
	古い用語 (および yp) はまだよく見られ、使用されています。</p><a id="idp94505808" class="indexterm"></a><p>NIS は RPC を使ったクライアント/サーバシステムです。
	これを使うと NIS ドメイン内のマシン間で、
	共通の設定ファイルを共有することができます。
	また NIS を使うことでシステム管理者は最小限の設定データで
	NIS クライアントを立ち上げることができ、
	1 ヶ所から設定データの追加、削除、変更が可能です。</p><a id="idp94507344" class="indexterm"></a><p>NIS は <span class="trademark">Windows NT</span>® のドメインシステムに似ています。
	内部の実装は似ても似つかないものですが、
	基本的な機能を対比することはできます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94508880"></a>22.9.2. 知っておくべき用語 / プロセス</h3></div></div></div><p>NIS サーバの立ち上げや NIS クライアントの設定など、
	NIS を FreeBSD に導入するにあたって、
	目にするであろう用語や重要なユーザプロセスがいくつかあります。</p><a id="idp94509904" class="indexterm"></a><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>用語</th><th>説明</th></tr></thead><tbody><tr><td>NIS ドメイン名</td><td>NIS マスタサーバとそのクライアントすべて
		(スレーブサーバを含む) には NIS ドメイン名がついています。
		<span class="trademark">Windows NT</span>® ドメイン名と同様に、NIS ドメイン名は
		DNS とは何の関係もありません。</td></tr><tr><td>portmap</td><td>RPC (Remote Procedure Call,
		NIS で使用されるネットワークプロトコル)
		を利用するために実行しておかなければなりません。
		<code class="command">portmap</code> が動作していなければ、
		NIS サーバを起動することも、
		NIS クライアントとして動作させることもできません。</td></tr><tr><td>ypbind</td><td>NIS クライアントを
		NIS サーバに <span class="quote">「<span class="quote">結びつけ</span>」</span> ます。
		これは NIS ドメイン名をシステムから取得し
		RPC を用いてサーバに接続します。<code class="command">ypbind</code>
		は NIS 環境におけるクライアントとサーバ間の通信の中枢です。
		クライアントマシンの
		<code class="command">ypbind</code> が停止した場合は、NIS
		サーバへアクセスすることができなくなります。</td></tr><tr><td>ypserv</td><td>は NIS サーバでのみ実行されるべきもので、
		NIS サーバプロセスそのものです。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a>
		が停止した場合、サーバはもはや NIS
		リクエストに応答することができなくなるでしょう
		(できれば、後を引き継ぐスレーブサーバがあるとよいでしょう)。
		今まで使っていたサーバが機能を停止したとき、
		別のサーバに再接続しに行かない NIS の実装もいくつかあります
		(FreeBSD のものは違います)。
		そのような場合に復帰するための唯一の方法は、
		サーバプロセス (あるいはサーバ全体)、もしくはクライアントの
		<code class="command">ypbind</code>
		プロセスを再スタートすることです。</td></tr><tr><td>rpc.yppasswdd</td><td>NIS マスターサーバで動かすべき、
		もう一つのプロセスです。これは NIS クライアントが
		NIS パスワードを変更することを可能にするデーモンです。
		このデーモンが動作していないときは、
		ユーザは NIS マスタサーバにログインし、
		そこでパスワードを変更しなければなりません。</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94531408"></a>22.9.3. 動作のしくみ</h3></div></div></div><p>NIS 環境にあるホストは、
	マスターサーバ、スレーブサーバ、クライアントの
	3 種類に分類されます。
	サーバは、ホストの設定情報の中心的な情報格納庫の役割をします。
	マスターサーバは元となる信頼できる情報を保持し、
	スレーブサーバは冗長性を確保するためこの情報をミラーします。
	そしてクライアントは、サーバから情報の提供を受けて動作します。</p><p>この方法を用いることで、数多くのファイルにある情報が共有できます。
	よく NIS で共有されるのは、
	<code class="filename">master.passwd</code> や <code class="filename">group</code>,
	<code class="filename">hosts</code> といったファイルです。
	クライアント上のプロセスが、
	通常ならローカルのファイルにある情報を必要とするときは、
	クライアントは代わりに接続している
	NIS サーバに問い合わせを行います。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94533968"></a>22.9.3.1. マシンの分類</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>NIS マスターサーバ</em></span><a id="idp94535504" class="indexterm"></a>。
	      このサーバは <span class="trademark">Windows NT</span>®
	      で言うところのプライマリドメインコントローラにあたります。
	      すべての NIS クライアントで利用されるファイルを保守します。
	      <code class="filename">passwd</code> や <code class="filename">group</code>、
	      その他 NIS クライアントが参照するファイルは、
	      マスターサーバにあります。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">一つのマシンが一つ以上の NIS
	        ドメインのマスターサーバになることは可能です。
	        しかし、ここでは比較的小規模の NIS 環境を対象としているため、
	        そのような場合については扱いません。</p></div></li><li class="listitem"><p><span class="emphasis"><em>NIS スレーブサーバ</em></span><a id="idp94539216" class="indexterm"></a>。
	      <span class="trademark">Windows NT</span>® のバックアップドメインコントローラに似たもので、
	      NIS スレーブサーバは NIS
	      マスターサーバのデータファイルのコピーを保持します。
	      NIS スレーブサーバは重要な環境で必要とされる冗長性を提供し、
	      マスターサーバの負荷のバランスをとります。
	      NIS クライアントは常に最初にレスポンスを返したサーバを
	      NIS サーバとして接続しますが、
	      これにはスレーブサーバも含まれます。</p></li><li class="listitem"><p><span class="emphasis"><em>NIS クライアント</em></span><a id="idp94541392" class="indexterm"></a>。
	      NIS クライアントは大部分の <span class="trademark">Windows NT</span>®
	      ワークステーションのように、ログオンに際して
	      NIS サーバ (<span class="trademark">Windows NT</span>® ワークステーションの場合は
	      <span class="trademark">Windows NT</span>® ドメインコントローラ)
	      に接続して認証します。</p></li></ul></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94548560"></a>22.9.4. NIS/YP を使う</h3></div></div></div><p>この節では NIS 環境の立ち上げ例を取り上げます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">この節ではあなたが FreeBSD 3.3
	  以降を使っているものとします。
	  ここで与えられる指示は <span class="emphasis"><em>おそらく</em></span> FreeBSD の
	  3.0 以降のどのバージョンでも機能するでしょうが、
	  それを保証するものではありません。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94550864"></a>22.9.4.1. 計画を立てる</h4></div></div></div><p>あなたが大学の小さな研究室の管理人であるとしましょう。
	  この研究室は 15 台の FreeBSD マシンからなっていて、
	  現在はまだ集中管理されていません。
	  すなわち、各マシンは <code class="filename">/etc/passwd</code> と
	  <code class="filename">/etc/master.passwd</code> を各々が持っています。
	  これらのファイルは手動でお互いに同期させています。
	  つまり現時点では、新しいユーザをあなたが追加するとき、
	  <code class="command">adduser</code> を
	  15 ヶ所すべてで実行しなければなりません。
	  これは明らかに変える必要があるため、
	  あなたはこのうち 2 台をサーバにして
	  NIS を導入することを決めました。</p><p>その結果、研究室の設定はこのようなものになります。</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>マシンの名前</th><th>IP アドレス</th><th>役割</th></tr></thead><tbody><tr><td><code class="systemitem">ellington</code></td><td><code class="systemitem">10.0.0.2</code></td><td>NIS マスタ</td></tr><tr><td><code class="systemitem">coltrane</code></td><td><code class="systemitem">10.0.0.3</code></td><td>NIS スレーブ</td></tr><tr><td><code class="systemitem">basie</code></td><td><code class="systemitem">10.0.0.4</code></td><td>教員用のワークステーション</td></tr><tr><td><code class="systemitem">bird</code></td><td><code class="systemitem">10.0.0.5</code></td><td>クライアントマシン</td></tr><tr><td><code class="systemitem">cli[1-11]</code></td><td><code class="systemitem">10.0.0.[6-17]</code></td><td>その他のクライアントマシン</td></tr></tbody></table></div><p>もし NIS によるシステム管理の設定を行なうのが初めてなら、
	  どのようにしたいのか、
	  ひととおり最後まで考えてみることをお勧めします。
	  ネットワークの規模によらず、
	  いくつか決めるべきことがあるからです。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94566864"></a>22.9.4.1.1. NIS ドメイン名を決める</h5></div></div></div><a id="idp94567504" class="indexterm"></a><p>ここでいうドメイン名は、今まであなたが使っていた、
	    いわゆる <span class="quote">「<span class="quote">ドメイン名</span>」</span> と呼んでいたものとは違います。
	    正確には <span class="quote">「<span class="quote">NIS ドメイン名</span>」</span> と呼ばれます。
	    クライアントがサーバに情報を要求するとき、
	    その要求には自分が属する NIS ドメインの名前が含まれています。
	    これは 1 つのネットワークに複数のサーバがある場合に、
	    どのサーバが要求を処理すれば良いかを決めるために使われます。
	    NIS ドメイン名とは、
	    関連のあるホストをグループ化するための名前である、
	    と考えると良いでしょう。</p><p>組織によってはインターネットのドメイン名を
	    NIS ドメイン名に使っているところがあります。
	    これはネットワークのトラブルをデバッグするときに混乱の原因となるため、
	    お勧めできません。
	    NIS ドメイン名はネットワーク内で一意なければいけません。そして、
	    ドメイン名がドメインに含まれるマシンを表すようなものであれば分かり易いです。
	    たとえば Acme 社のアート (Art) 部門であれば NIS ドメイン名を
	    <span class="quote">「<span class="quote">acme-art</span>」</span> とすれば良いでしょう。この例では
	    NIS ドメイン名として <span class="emphasis"><em>test-domain</em></span>
	    を使用します。</p><a id="idp94570960" class="indexterm"></a><p>しかしながらオペレーティングシステムによっては (特に <span class="trademark">SunOS</span>™)、
	    NIS ドメイン名をネットワークドメイン名として使うものもあります。
	    あなたのネットワークにそのような制限のあるマシンが
	    1 台でもあるときは、NIS
	    のドメイン名としてインターネットのネットワークドメイン名を使わなければ
	    <span class="emphasis"><em>いけません</em></span>。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94572752"></a>22.9.4.1.2. サーバマシンの物理的必要条件</h5></div></div></div><p>NIS サーバとして使うマシンを選ぶ際には、
	    いくつか注意すべき点があります。
	    NIS に関する困ったことの一つに、
	    クライアントのサーバへの依存度があります。
	    クライアントが自分の NIS ドメインのサーバに接続できないと、
	    マシンが使用不能になることがあまりに多いのです。
	    もし、ユーザやグループに関する情報が得られなければ、
	    ほとんどのシステムは一時的に停止してしまいます。
	    こういったことを念頭に置いて、頻繁にリブートされるマシンや、
	    開発に使われそうなマシンを選ばないようにしなければなりません。
	    理想的には NIS サーバはスタンドアロンで
	    NIS サーバ専用のマシンにするべきです。
	    ネットワークの負荷が重くなければ、
	    他のサービスを走らせているマシンを
	    NIS サーバにしてもかまいません。
	    ただし NIS サーバが使えなくなると、
	    <span class="emphasis"><em>すべての</em></span>
	    クライアントに影響をおよぼす、
	    という点には注意しなければなりません。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94578640"></a>22.9.4.2. NIS サーバ</h4></div></div></div><p>元となるすべての NIS 情報は、
	  NIS マスターサーバと呼ばれる 1 台のマシンに格納されます。
	  この情報が格納されるデータベースを NIS マップと呼びます。
	  FreeBSD では、このマップは
	  <code class="filename">/var/yp/[domainname]</code> に置かれます。
	  <code class="filename">[domainname]</code> は、
	  サーバがサービスする NIS ドメインです。
	  1 台の NIS サーバが複数のドメインをサポートすることも可能です。
	  つまり、このディレクトリを各々のドメインごとに作ることができます。
	  それぞれのドメインは、
	  独立したマップの集合を持つことになります。</p><p>NIS のマスターサーバとスレーブサーバ上では、
	  <code class="command">ypserv</code> デーモンがすべての NIS 要求を処理します。
	  <code class="command">ypserv</code> は NIS クライアントからの要求を受け付け、
	  ドメイン名とマップ名を対応するデータベースファイルへのパスに変換し、
	  データをクライアントに返送します。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94581584"></a>22.9.4.2.1. NIS マスターサーバの設定</h5></div></div></div><a id="idp94582224" class="indexterm"></a><p>やりたいことにもよりますが
	    NIS マスターサーバの設定は比較的単純です。
	    FreeBSD は初期状態で NIS に対応しています。
	    必要なのは以下の行を <code class="filename">/etc/rc.conf</code>
	    に追加することだけで、
	    あとは FreeBSD がやってくれます。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><pre class="programlisting">nisdomainname="test-domain"</pre><p>
	      この行はネットワークの設定後に (たとえば再起動後に)
	      NIS のドメイン名を <span class="emphasis"><em>test-domain</em></span>
	      に設定します。</p></li><li class="step"><p>
		</p><pre class="programlisting">nis_server_enable="YES"</pre><p>
		これは FreeBSD に次にネットワークが立ち上がったとき NIS
		のサーバプロセスを起動させます。</p></li><li class="step"><p>
		</p><pre class="programlisting">nis_yppasswdd_enable="YES"</pre><p>
		これは <code class="command">rpc.yppasswdd</code>
		デーモンを有効にします。上述したようにこれはユーザが NIS
		のパスワードをクライアントのマシンから変更することを可能にします。</p></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">NIS の設定によっては、
	      さらに他のエントリを付け加える必要があるかもしれません。
	      詳細については、下記の <a class="link" href="#network-nis-server-is-client" title="22.9.10. NIS クライアントとしても動作している NIS サーバ">NIS
	      クライアントとしても動作している NIS サーバ</a>
	      節を参照してください。</p></div><p>さて、あとはスーパユーザ権限で
	    <code class="command">/etc/netstart</code> コマンドを実行するだけです。
	    これにより <code class="filename">/etc/rc.conf</code>
	    で定義された値を使ってすべての設定が行なわれます。</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94603600"></a>22.9.4.2.2. NIS マップの初期化</h5></div></div></div><a id="idp94604240" class="indexterm"></a><p><span class="emphasis"><em>NIS マップ</em></span> とは
	    <code class="filename">/var/yp</code>
	    ディレクトリにあるデータベースファイルです。
	    これらは NIS マスタの <code class="filename">/etc</code>
	    ディレクトリの設定ファイルから作られます。
	    唯一の例外は <code class="filename">/etc/master.passwd</code>
	    ファイルです。これは <code class="systemitem">root</code>
	    や他の管理用アカウントのパスワードまでその
	    NIS ドメインのすべてのサーバに伝えたくないという、
	    もっともな理由によるものです。このため NIS
	    マップの初期化の前に以下を行う必要があります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp /etc/master.passwd /var/yp/master.passwd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi master.passwd</code></strong></pre><p>システムに関するアカウント
	    (<code class="systemitem">bin</code>, <code class="systemitem">tty</code>,
	    <code class="systemitem">kmem</code>, <code class="systemitem">games</code> など)
	    や、NIS クライアントに伝えたくないアカウント
	    (たとえば <code class="systemitem">root</code>
	    や他の UID が 0 (スーパユーザ) のアカウント)
	    をすべて NIS マップから取り除かなければなりません。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">
	      <code class="filename">/var/yp/master.passwd</code> が
	      グループまたは誰もが読めるようになっていないようにしてください
	      (モード 600)!
	      必要なら <code class="command">chmod</code>
	      コマンドを使ってください。</p></div><a id="idp94614608" class="indexterm"></a><p>すべてが終わったら NIS マップを初期化します!
	    FreeBSD には、これを行うために <code class="command">ypinit</code>
	    という名のスクリプトが含まれています
	    (詳細はそのマニュアルページをご覧ください)。
	    このスクリプトはほとんどの <span class="trademark">UNIX</span>® OS に存在しますが、
	    すべてとは限らないことを覚えておいてください。
	    Digital Unix/Compaq Tru64 UNIX では <code class="command">ypsetup</code>
	    と呼ばれています。NIS マスタのためのマップを作るためには
	    <code class="option">-m</code> オプションを <code class="command">ypinit</code>
	    に与えます。上述のステップを完了しているなら、以下を実行して
	    NIS マップを生成します。</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>ypinit -m test-domain</code></strong>
Server Type: MASTER Domain: test-domain
Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.
Do you want this procedure to quit on non-fatal errors? [y/n: n] <strong class="userinput"><code>n</code></strong>
Ok, please remember to go back and redo manually whatever fails.
If you don't, something might not work.
At this point, we have to construct a list of this domains YP servers.
rod.darktech.org is already known as master server.
Please continue to add any slave servers, one per line. When you are
done with the list, type a &lt;control D&gt;.
master server   :  ellington
next host to add:  <strong class="userinput"><code>coltrane</code></strong>
next host to add:  <strong class="userinput"><code>^D</code></strong>
The current list of NIS servers looks like this:
ellington
coltrane
Is this correct?  [y/n: y] <strong class="userinput"><code>y</code></strong>

[..output from map generation..]

NIS Map update completed.
ellington has been setup as an YP master server without any errors.</pre><p><code class="command">ypinit</code> は
	    <code class="filename">/var/yp/Makefile</code> を
	    <code class="filename">/var/yp/Makefile.dist</code> から作成します。
	    作成された時点では、そのファイルはあなたが FreeBSD
	    マシンだけからなるサーバが 1 台だけの
	    NIS 環境を扱っていると仮定しています。
	    <span class="emphasis"><em>test-domain</em></span>
	    はスレーブサーバを一つ持っていますので
	    <code class="filename">/var/yp/Makefile</code>
	    を編集しなければなりません。</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>vi /var/yp/Makefile</code></strong></pre><p>以下の行を (もし既にコメントアウトされていないならば)
	    コメントアウトしなければなりません。</p><pre class="programlisting">NOPUSH = "True"</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94628560"></a>22.9.4.2.3. NIS スレーブサーバの設定</h5></div></div></div><a id="idp94629200" class="indexterm"></a><p>NIS スレーブサーバの設定はマスターサーバの設定以上に簡単です。
	    スレーブサーバにログオンし <code class="filename">/etc/rc.conf</code>
	    ファイルを前回と同様に編集します。唯一の違うところは
	    <code class="command">ypinit</code> の実行に <code class="option">-s</code>
	    オプションを使わなければいけないことです。
	    <code class="option">-s</code> オプションは
	    NIS マスターサーバの名前を要求し、
	    コマンドラインは以下のようになります。</p><pre class="screen">coltrane<code class="prompt">#</code> <strong class="userinput"><code>ypinit -s ellington test-domain</code></strong>

Server Type: SLAVE Domain: test-domain Master: ellington

Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.

Do you want this procedure to quit on non-fatal errors? [y/n: n]  <strong class="userinput"><code>n</code></strong>

Ok, please remember to go back and redo manually whatever fails.
If you don't, something might not work.
There will be no further questions. The remainder of the procedure
should take a few minutes, to copy the databases from ellington.
Transferring netgroup...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byuser...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byhost...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring group.bygid...
ypxfr: Exiting: Map successfully transferred
Transferring group.byname...
ypxfr: Exiting: Map successfully transferred
Transferring services.byname...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.byname...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.byname...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring netid.byname...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring ypservers...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byname...
ypxfr: Exiting: Map successfully transferred

coltrane has been setup as an YP slave server without any errors.
Don't forget to update map ypservers on ellington.</pre><p>この例の場合 <code class="filename">/var/yp/test-domain</code>
	    というディレクトリが必要になります。
	    NIS マスターサーバのマップファイルのコピーは、
	    このディレクトリに置いてください。
	    これらを確実に最新のものに維持する必要があります。
	    次のエントリをスレーブサーバの <code class="filename">/etc/crontab</code>
	    に追加することで、最新のものに保つことができます。</p><pre class="programlisting">20      *       *       *       *       root   /usr/libexec/ypxfr passwd.byname
21      *       *       *       *       root   /usr/libexec/ypxfr passwd.byuid</pre><p>この二行はスレーブサーバにあるマップファイルを、
	    マスターサーバのマップファイルと同期させるものです。
	    このエントリは必須というわけではありませんが、マスターサーバは
	    NIS マップに対する変更をスレーブサーバに伝えようとしますし、
	    サーバが管理するシステムにとってパスワード情報はとても重要なので、
	    強制的に更新してしまうことはよい考えです。特に、
	    マップファイルの更新がきちんと行なわれるかどうかわからないくらい混雑するネットワークでは、
	    重要になります。</p><p>スレーブサーバ上でも <code class="command">/etc/netstart</code>
	    コマンドを実行して、NIS サーバを再起動してください。</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94649168"></a>22.9.4.3. NIS クライアント</h4></div></div></div><p>NIS クライアントは <code class="command">ypbind</code>
	  デーモンを使って、特定の NIS
	  サーバとの間に結合 (binding) と呼ばれる関係を成立させます。
	  <code class="command">ypbind</code> はシステムのデフォルトのドメイン
	  (<code class="command">domainname</code> コマンドで設定されます)
	  を確認し、RPC 要求をローカルネットワークにブロードキャストします。
	  この RPC 要求により <code class="command">ypbind</code>
	  が結合を成立させようとしているドメイン名が指定されます。
	  要求されているドメイン名に対してサービスするよう設定されたサーバが
	  ブロードキャストを受信すると、
	  サーバは <code class="command">ypbind</code> に応答し<code class="command">ypbind</code>
	  は応答のあったサーバのアドレスを記録します。複数のサーバ
	  (たとえば一つのマスターサーバと、複数のスレーブサーバ)
	  が利用可能な場合、<code class="command">ypbind</code> は、
	  最初に応答したサーバのアドレスを使用します。
	  これ以降、クライアントのシステムは、
	  すべての NIS の要求をそのサーバに向けて送信します。
	  <code class="command">ypbind</code> は、
	  サーバが順調に動作していることを確認するため、
	  時々 <span class="quote">「<span class="quote">ping</span>」</span> をサーバに送ります。
	  反応が戻ってくるべき時間内に ping に対する応答が来なければ、
	  <code class="command">ypbind</code> は、そのドメインを結合不能
	  (unbound) として記録し、別のサーバを見つけるべく、
	  再びブロードキャストパケットの送信を行います。</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94654032"></a>22.9.4.3.1. NIS クライアントの設定</h5></div></div></div><a id="idp94654672" class="indexterm"></a><p>FreeBSD マシンを NIS クライアントにする設定は非常に単純です。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>ネットワークの起動時に NIS ドメイン名を設定して
	        <code class="command">ypbind</code> を起動させるために
		<code class="filename">/etc/rc.conf</code>
		ファイルを編集して以下の行を追加します。</p><pre class="programlisting">nisdomainname="test-domain"
nis_client_enable="YES"</pre></li><li class="step"><p>NIS サーバから、
		利用可能なパスワードエントリをすべて取り込むため、
		<code class="filename">/etc/master.passwd</code>
		からすべてのユーザアカウントを取り除いて、
		<code class="command">vipw</code> コマンドで以下の行を
		<code class="filename">/etc/master.passwd</code> の最後に追加します。</p><pre class="programlisting">+:::::::::</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">この行によって NIS
		  サーバのパスワードマップにアカウントがある人全員にアカウントが与えられます。
		  この行を変更すると、
		  さまざまな NIS クライアントの設定を行なうことが可能です。
		  詳細は <a class="link" href="#network-netgroups" title="22.9.7. ネットグループの利用">ネットグループ</a>
		  を、さらに詳しい情報については、O'Reilly の
		  <code class="literal">Managing NFS and NIS</code> を参照してください。</p></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">/etc/master.passwd</code>
		  内に少なくとも一つのローカルアカウント
		  (つまり NIS 経由でインポートされていないアカウント)
		  を置くべきです。
		  また、このアカウントは <code class="systemitem">wheel</code>
		  グループのメンバーであるべきです。
		  NIS がどこか調子悪いときには、
		  リモートからこのアカウントでログインし、
		  root になって修復するのに利用できます。</p></div></li><li class="step"><p>NIS
		サーバにあるすべてのグループエントリを取り込むため、
		以下の行を <code class="filename">/etc/group</code>
		に追加します。</p><pre class="programlisting">+:*::</pre></li></ol></div><p>上記の手順がすべて完了すれば、
	    <code class="command">ypcat passwd</code> によって
	    NIS サーバの passwd マップが参照できるようになっているはずです。
	  </p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94671184"></a>22.9.5. NIS セキュリティ</h3></div></div></div><p>一般にドメイン名さえ知っていれば、
	どこにいるリモートユーザでも <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> に RPC を発行して
	NIS マップの内容を引き出すことができます。
	こういった不正なやりとりを防ぐため、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> には securenets と呼ばれる機能があります。これは、
	アクセスを決められたホストだけに制限するのに使える機能です。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> は起動時に <code class="filename">/var/yp/securenets</code>
	ファイルから securenets に関する情報を読み込みます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">上記のパス名は <code class="option">-p</code>
	  オプションで指定されたパス名によって変わります。このファイルは、
	  空白で区切られたネットワーク指定とネットマスクのエントリからなっていて、
	  <span class="quote">「<span class="quote">#</span>」</span> で始まる行はコメントとみなされます。
	  簡単な securenets ファイルの例を以下に示します。</p></div><pre class="programlisting"># allow connections from local host -- mandatory
127.0.0.1     255.255.255.255
# allow connections from any host
# on the 192.168.128.0 network
192.168.128.0 255.255.255.0
# allow connections from any host
# between 10.0.0.0 to 10.0.15.255
10.0.0.0      255.255.240.0</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a>
	が上記のルールの一つと合致するアドレスからの要求を受け取った場合、
	処理は正常に行なわれます。
	もしアドレスがルールに合致しなければ、
	その要求は無視されて警告メッセージがログに記録されます。
	また <code class="filename">/var/yp/securenets</code> が存在しない場合、
	<code class="command">ypserv</code> はすべてのホストからの接続を受け入れます。
      </p><p><code class="command">ypserv</code> は Wietse Venema 氏による
	<span class="application">tcpwrapper</span> パッケージもサポートしています。
	そのため <code class="filename">/var/yp/securenets</code> の代わりに
	<span class="application">tcpwrapper</span>
	の設定ファイルを使ってアクセス制御を行なうことも可能です。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">これらのアクセス制御機能は一定のセキュリティを提供しますが、
	  どちらも特権ポートのテストのような <span class="quote">「<span class="quote">IP spoofing</span>」</span>
	  攻撃に対して脆弱です。すべての NIS
	  関連のトラフィックはファイアウォールでブロックされるべきです。</p><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">/var/yp/securenets</code>
	  を使っているサーバは、古い TCP/IP
	  実装を持つ正当なクライアントへのサービスに失敗することがあります。
	  これらの実装の中にはブロードキャストのホストビットをすべて
	  0 でセットしてしまったり、
	  ブロードキャストアドレスの計算でサブネットマスクを見落としてしまったりするものがあります。
	  これらの問題にはクライアントの設定を正しく行なえば解決できるものもありますが、
	  問題となっているクライアントシステムを引退させるか、
	  <code class="filename">/var/yp/securenets</code>
	  を使わないようにしなければならないものもあります。</p><p xmlns="http://www.w3.org/1999/xhtml">このような古風な TCP/IP の実装を持つサーバで
	  <code class="filename">/var/yp/securenets</code>
	  を使うことは実に悪い考えであり、
	  あなたのネットワークの大部分において
	  NIS の機能喪失を招きます。</p><a xmlns="http://www.w3.org/1999/xhtml" id="idp94687440" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">tcpwrapper</span>
	  パッケージを使うとあなたの NIS サーバのレイテンシ (遅延)
	  が増加します。特に混雑したネットワークや遅い NIS
	  サーバでは、遅延の増加によって、
	  クライアントプログラムのタイムアウトが起こるかもしれません。
	  一つ以上のクライアントシステムがこれらの兆候を示したなら、
	  あなたは問題となっているクライアントシステムを
	  NIS スレーブサーバにして自分自身に結び付くように強制すべきです。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94697168"></a>22.9.6. 何人かのユーザのログオンを遮断する</h3></div></div></div><p>わたしたちの研究室には <code class="systemitem">basie</code> という、
	教員専用のマシンがあります。わたしたちはこのマシンを
	NIS ドメインの外に出したくないのですが、
	マスタ NIS サーバの <code class="filename">passwd</code>
	ファイルには教員と学生の両方が載っています。
	どうしたらいいでしょう?</p><p>当該人物が NIS のデータベースに載っていても、
	そのユーザがマシンにログオンできないようにする方法があります。
	そうするには
	<span class="emphasis"><em>-<em class="replaceable"><code>username</code></em></em></span>
	をクライアントマシンの <code class="filename">/etc/master.passwd</code>
	ファイルの末尾に付け足します。
	<em class="replaceable"><code>username</code></em>
	はあなたがログインさせたくないと思っているユーザのユーザ名です。
	これは <code class="command">vipw</code> で行うべきです。
	<code class="command">vipw</code> は <code class="filename">/etc/master.passwd</code>
	への変更をチェックし、編集終了後パスワードデータベースを再構築します。
	たとえば、ユーザ <span class="emphasis"><em>bill</em></span> が <code class="systemitem">basie</code>
	にログオンするのを防ぎたいなら、以下のようにします。</p><pre class="screen">basie<code class="prompt">#</code> <strong class="userinput"><code>vipw</code></strong>
<strong class="userinput"><code>[add -bill to the end, exit]</code></strong>
vipw: rebuilding the database...
vipw: done

basie<code class="prompt">#</code> <strong class="userinput"><code>cat /etc/master.passwd</code></strong>

root:[password]:0:0::0:0:The super-user:/root:/bin/csh
toor:[password]:0:0::0:0:The other super-user:/root:/bin/sh
daemon:*:1:1::0:0:Owner of many system processes:/root:/sbin/nologin
operator:*:2:5::0:0:System &amp;:/:/sbin/nologin
bin:*:3:7::0:0:Binaries Commands and Source,,,:/:/sbin/nologin
tty:*:4:65533::0:0:Tty Sandbox:/:/sbin/nologin
kmem:*:5:65533::0:0:KMem Sandbox:/:/sbin/nologin
games:*:7:13::0:0:Games pseudo-user:/usr/games:/sbin/nologin
news:*:8:8::0:0:News Subsystem:/:/sbin/nologin
man:*:9:9::0:0:Mister Man Pages:/usr/share/man:/sbin/nologin
bind:*:53:53::0:0:Bind Sandbox:/:/sbin/nologin
uucp:*:66:66::0:0:UUCP pseudo-user:/var/spool/uucppublic:/usr/libexec/uucp/uucico
xten:*:67:67::0:0:X-10 daemon:/usr/local/xten:/sbin/nologin
pop:*:68:6::0:0:Post Office Owner:/nonexistent:/sbin/nologin
nobody:*:65534:65534::0:0:Unprivileged user:/nonexistent:/sbin/nologin
+:::::::::
-bill

basie<code class="prompt">#</code></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-netgroups"></a>22.9.7. ネットグループの利用</h3></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Erdelhoff</span> <span class="firstname">Udo</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp94708048" class="indexterm"></a><p>前節までに見てきた手法は、
	極めて少ないユーザ/マシン向けに個別のルールを必要としている場合にはうまく機能します。
	しかし大きなネットワークでは、
	ユーザに触られたくないマシンへログオンを防ぐのを
	<span class="emphasis"><em>忘れるでしょう</em></span> し、
	そうでなくとも各マシンを個別に設定して回らなければならず、
	<span class="emphasis"><em>集中</em></span>管理という NIS の恩恵を失ってしまいます。</p><p>NIS の開発者はこの問題を <span class="emphasis"><em>ネットグループ</em></span>
	と呼ばれる方法で解決しました。
	その目的と意味合いは <span class="trademark">UNIX</span>®
	のファイルシステムで使われている一般的なグループと比較できます。
	主たる相違は数値 ID が存在しないことと、
	ユーザアカウントと別のネットグループを含めたネットグループを定義できることです。</p><p>ネットグループは百人/台以上のユーザとマシンを含む、
	大きく複雑なネットワークを扱うために開発されました。
	あなたがこのような状況を扱わなければならないなら便利なものなのですが、
	一方で、この複雑さは単純な例でネットグループの説明をすることをほとんど不可能にしています。
	この節の残りで使われている例は、この問題を実演しています。</p><p>あなたの行なった、
	研究室への NIS の導入の成功が上司の目に止ったとしましょう。
	あなたの次の仕事は、あなたの NIS
	ドメインをキャンパスの他のいくつものマシンを覆うものへ拡張することです。
	二つの表は新しいユーザと新しいマシンの名前とその説明を含んでいます。</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>ユーザの名前</th><th>説明</th></tr></thead><tbody><tr><td>alpha, beta</td><td>IT 学科の通常の職員</td></tr><tr><td>charlie, delta</td><td>IT 学科の新しい見習い</td></tr><tr><td>echo, foxtrott, golf, ...</td><td>一般の職員</td></tr><tr><td>able, baker, ...</td><td>まだインターン</td></tr></tbody></table></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>マシンの名前</th><th>説明</th></tr></thead><tbody><tr><td>war, death, famine, pollution</td><td>最も重要なサーバ。IT 職員だけがログオンを許されます。</td></tr><tr><td>pride, greed, envy, wrath, lust, sloth</td><td>あまり重要でないサーバ。
		IT 学科の全員がログオンを許されます。</td></tr><tr><td>one, two, three, four, ...</td><td>通常のワークステーション。
	        <span class="emphasis"><em>本当の</em></span>
		職員だけがログオンを許されます。</td></tr><tr><td>trashcan</td><td>重要なデータの入っていないひどく古いマシン。
	        インターンでもこのマシンの使用を許されます。</td></tr></tbody></table></div><p>もしあなたがこの手の制限を各ユーザを個別にブロックする形で実装するなら、
	あなたはそのシステムにログオンすることが許されていない各ユーザについて
	-<em class="replaceable"><code>user</code></em> という 1 行を、各システムの
	<code class="filename">passwd</code> に追加しなければならなくなるでしょう。
	もしあなたが 1 エントリでも忘れればトラブルに巻き込まれてしまいます。
	最初のセットアップの時にこれを正しく行えるのはありえることかも知れませんが、
	遂には連日の業務の間に例の行を追加し<span class="emphasis"><em>忘れてしまうでしょう</em></span>。
	結局マーフィーは楽観主義者だったのです。</p><p>この状況をネットグループで扱うといくつかの有利な点があります。
	各ユーザを別個に扱う必要はなく、
	ユーザを一つ以上のネットグループに割り当て、
	ネットグループの全メンバのログインを許可したり禁止したりすることができます。
	新しいマシンを追加するときはネットグループへログインの制限を定義するだけ、
	新しいユーザを追加するときはそのユーザを一つ以上のネットグループへ追加するだけで、
	それぞれ行なうことができます。
	これらの変更は互いに独立なので、
	<span class="quote">「<span class="quote">ユーザとマシンの組合わせをどうするか</span>」</span>
	は存在しなくなります。
	あなたの NIS のセットアップが注意深く計画されていれば、
	マシンへのアクセスを認めるにも拒否するにも中心の設定をたった一カ所変更するだけです。</p><p>最初のステップは NIS マップネットグループの初期化です。
	FreeBSD の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypinit&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypinit</span>(8)</span></a> はこのマップをデフォルトで作りませんが、
	その NIS の実装はそれが作られさえすればそれをサポートするものです。
	空のマップを作るには、単に</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>vi /var/yp/netgroup</code></strong></pre><p>とタイプして内容を追加していきます。
	わたしたちの例では、すくなくとも IT 職員、IT 見習い、一般職員、
	インターンの 4 つのネットグループが必要です。</p><pre class="programlisting">IT_EMP  (,alpha,test-domain)    (,beta,test-domain)
IT_APP  (,charlie,test-domain)  (,delta,test-domain)
USERS   (,echo,test-domain)     (,foxtrott,test-domain) \
	(,golf,test-domain)
INTERNS (,able,test-domain)     (,baker,test-domain)</pre><p><code class="literal">IT_EMP</code>, <code class="literal">IT_APP</code>
	等はネットグループの名前です。
	それぞれの括弧で囲まれたグループが一人以上のユーザアカウントをそれに登録しています。
	グループの 3 つのフィールドは</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>その記述が有効なホスト (群) の名称。
	    ホスト名を特記しなければそのエントリはすべてのホストで有効です。
	    もしあなたがホスト名を特記するなら、
	    あなたは闇と恐怖と全き混乱の領域に入り込んでしまうでしょう。</p></li><li class="listitem"><p>このネットグループに所属するアカウントの名称。</p></li><li class="listitem"><p>そのアカウントの NIS ドメイン。
	    もしあなたが一つ以上の NIS ドメインの不幸な仲間なら、
	    あなたは他の NIS
	    ドメインからあなたのネットグループにアカウントを導入できます。</p></li></ol></div><p>各フィールドには、ワイルドカードが使えます。
	詳細は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netgroup&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">netgroup</span>(5)</span></a> をご覧ください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp94746704" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">8 文字以上のネットグループ名は、特にあなたの NIS
	  ドメインで他のオペレーティングシステムを走らせているときは使うべきではありません。
	  名前には大文字小文字の区別があります。
	  そのためネットグループ名に大文字を使う事は、
	  ユーザやマシン名とネットグループ名を区別する簡単な方法です。</p><p xmlns="http://www.w3.org/1999/xhtml">(FreeBSD 以外の) NIS クライアントの中には
	  多数のエントリを扱えないものもあります。
	  たとえば <span class="trademark">SunOS</span>™ の古い版では 15 以上の
	  <span class="emphasis"><em>エントリ</em></span>
	  を含むネットグループはトラブルを起こします。
	  この制限は 15 ユーザ以下のサブネットグループをいくつも作り、
	  本当のネットグループはこのサブネットグループからなるようにすることで回避できます。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">BIGGRP1  (,joe1,domain)  (,joe2,domain)  (,joe3,domain) [...]
BIGGRP2  (,joe16,domain)  (,joe17,domain) [...]
BIGGRP3  (,joe31,domain)  (,joe32,domain)
BIGGROUP  BIGGRP1 BIGGRP2 BIGGRP3</pre><p xmlns="http://www.w3.org/1999/xhtml">単一のネットグループに 225 人以上のユーザをいれたいときは、
	  このやり方を繰り返すことができます。</p></div><p>新しい NIS マップの有効化と配布は簡単です。</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
ellington<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong></pre><p>これで新しい 3 つの NIS マップ
	<code class="filename">netgroup</code>,
	<code class="filename">netgroup.byhost</code>,
	<code class="filename">netgroup.byuser</code> ができるはずです。
	新しい NIS マップが利用できるか確かめるには
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypcat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypcat</span>(1)</span></a> を使います。</p><pre class="screen">ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup</code></strong>
ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup.byhost</code></strong>
ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup.byuser</code></strong></pre><p>最初のコマンドの出力は <code class="filename">/var/yp/netgroup</code>
	の内容に似ているはずです。
	2 番目のコマンドはホスト別のネットグループを作っていなければ出力されません。
	3 番目のコマンドはユーザに対するネットグループのリストを得るのに使えます。</p><p>クライアント側の設定は非常に簡単です。
	サーバ <em class="replaceable"><code>war</code></em> を設定するには、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a> を実行して以下の行</p><pre class="programlisting">+:::::::::</pre><p>を</p><pre class="programlisting">+@IT_EMP:::::::::</pre><p>に入れ替えるだけです。</p><p>今、ネットグループ <em class="replaceable"><code>IT_EMP</code></em>
	で定義されたユーザのデータだけが <em class="replaceable"><code>war</code></em>
	のパスワードデータベースに読み込まれ、
	そのユーザだけがログインを許されています。</p><p>残念ながらこの制限はシェルの ~ の機能や、
	ユーザ名や数値の ユーザ ID の変換ルーチンにも影響します。
	つまり、
	<code class="command">cd ~user</code> はうまく動かず、
	<code class="command">ls -l</code> はユーザ名のかわりに数値の ID を表示し
	<code class="command">find . -user joe -print</code> は
	<span class="quote">「<span class="quote">No such user</span>」</span> で失敗します。
	これを避けるためには、すべてのユーザのエントリを
	<span class="emphasis"><em>サーバにログインすることを許さずに</em></span>
	読み込まなければなりません。</p><p>これはもう一行を <code class="filename">/etc/master.passwd</code>
	に追加することで実現できます。その行は以下の</p><p><code class="literal">+:::::::::/sbin/nologin</code> を含んでおり、
	これは
	<span class="quote">「<span class="quote">すべてのエントリを読み込むが、読み込まれたエントリのシェルは
	  <code class="filename">/sbin/nologin</code> で置き換えられる</span>」</span>
	ということを意味します。passwd エントリの他のフィールドを
	<code class="filename">/etc/master.passwd</code>
	の既定値から置き換えることも可能です。</p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="literal">+:::::::::/sbin/nologin</code> の行が
	  <code class="literal">+@IT_EMP:::::::::</code>
	  の行より後ろに位置することに注意してください。
	  さもないと NIS から読み込まれた全ユーザが /sbin/nologin
	  をログインシェルとして持つことになります。</p></div><p>この変更の後では、新しい職員が IT 学科に参加しても
	NIS マップを一つ書き換えるだけで済みます。
	同様にして、あまり重要でないサーバのローカルの
	<code class="filename">/etc/master.passwd</code> のかつての
	<code class="literal">+:::::::::</code> 行を以下のように置き換えます。</p><pre class="programlisting">+@IT_EMP:::::::::
+@IT_APP:::::::::
+:::::::::/sbin/nologin</pre><p>この行は、一般のワークステーションでは以下のようになります。</p><pre class="programlisting">+@IT_EMP:::::::::
+@USERS:::::::::
+:::::::::/sbin/nologin</pre><p>これでしばらく順調に運用していましたが、
	数週間後、ポリシに変更がありました。
	IT 学科はインターンを雇い始め、IT
	インターンは一般のワークステーションと余り重要ではないサーバを使うことが許され、
	IT 見習いはメインサーバへのログインが許されました。
	あなたは新たなネットグループ IT_INTERN を追加して新しい IT
	インターンたちをそのグループに登録し、
	すべてのマシンの設定を変えて回ることにしました。
	古い諺にこうあります。
	<span class="quote">「<span class="quote">集中管理における過ちは、大規模な混乱を導く</span>」</span>。</p><p>いくつかのネットグループから新たなネットグループを作るという
	NIS の機能は、このような状況に対処するために利用できます。
	その方法の一つは、役割別のネットグループを作ることです。
	たとえば、重要なサーバへのログイン制限を定義するために
	<em class="replaceable"><code>BIGSRV</code></em> というネットグループを作り
	あまり重要ではないサーバへは <em class="replaceable"><code>SMALLSRV</code></em>
	というネットグループを、そして一般のワークステーション用に
	<em class="replaceable"><code>USERBOX</code></em> という第 3 のネットグループを
	作ることができます。これらのネットグループの各々は、
	各マシンにログインすることを許されたネットグループを含みます。
	あなたの NIS マップネットグループの新しいエントリは、
	以下のようになるはずです。</p><pre class="programlisting">BIGSRV    IT_EMP  IT_APP
SMALLSRV  IT_EMP  IT_APP  ITINTERN
USERBOX   IT_EMP  ITINTERN USERS</pre><p>このログイン制限の定義法は、
	同一の制限を持つマシンのグループを定義できるときには便利なものです。
	残念ながらこのようなケースは例外的なものです。
	ほとんどの場合、
	各マシンに基づくログイン制限の定義機能が必要となるでしょう。</p><p>マシンごとのネットグループの定義は、
	上述したようなポリシの変更を扱うことができるもうひとつの方法です。
	このシナリオでは、各マシンの
	<code class="filename">/etc/master.passwd</code> は
	<span class="quote">「<span class="quote">+</span>」</span> で始まる 2 つの行からなります。
	最初のものはそのマシンへのログインを許されたアカウントを追加するもので、
	2 番目はその他のアカウントを <code class="filename">/sbin/nologin</code>
	をシェルとして追加するものです。
	マシン名をすべて大文字で記述したものをネットグループの名前として使うのは良い考えです。
	言い換えれば、件の行は次のようになるはずです。</p><pre class="programlisting">+@<em class="replaceable"><code>BOXNAME</code></em>:::::::::
+:::::::::/sbin/nologin</pre><p>一度、各マシンに対してこの作業を済ませてしまえば、
	二度とローカルの <code class="filename">/etc/master.passwd</code>
	を編集する必要がなくなります。
	以降のすべての変更は NIS マップの編集で扱うことができます。
	以下はこのシナリオに対応するネットグループマップに、
	いくつかの便利な定義を追加した例です。</p><pre class="programlisting"># Define groups of users first
IT_EMP    (,alpha,test-domain)    (,beta,test-domain)
IT_APP    (,charlie,test-domain)  (,delta,test-domain)
DEPT1     (,echo,test-domain)     (,foxtrott,test-domain)
DEPT2     (,golf,test-domain)     (,hotel,test-domain)
DEPT3     (,india,test-domain)    (,juliet,test-domain)
ITINTERN  (,kilo,test-domain)     (,lima,test-domain)
D_INTERNS (,able,test-domain)     (,baker,test-domain)
#
# Now, define some groups based on roles
USERS     DEPT1   DEPT2     DEPT3
BIGSRV    IT_EMP  IT_APP
SMALLSRV  IT_EMP  IT_APP    ITINTERN
USERBOX   IT_EMP  ITINTERN  USERS
#
# And a groups for a special tasks
# Allow echo and golf to access our anti-virus-machine
SECURITY  IT_EMP  (,echo,test-domain)  (,golf,test-domain)
#
# machine-based netgroups
# Our main servers
WAR       BIGSRV
FAMINE    BIGSRV
# User india needs access to this server
POLLUTION  BIGSRV  (,india,test-domain)
#
# This one is really important and needs more access restrictions
DEATH     IT_EMP
#
# The anti-virus-machine mentioned above
ONE       SECURITY
#
# Restrict a machine to a single user
TWO       (,hotel,test-domain)
# [...more groups to follow]</pre><p>もしユーザアカウントを管理するのにデータベースの類を使っているなら、
	データベースのレポートツールからマップの最初の部分を作れるようにするべきです。
	そうすれば、新しいユーザは自動的にマシンにアクセスできるでしょう。</p><p>最後に使用上の注意を:
	マシン別のネットグループを使うことが常に賢明というわけではありません。
	あなたが数ダースから数百の同一の環境のマシンを学生の研究室に配置しているのならば、
	NIS マップのサイズを手頃な範囲に押さえるために、
	マシン別のネットグループのかわりに役割別のネットグループを使うべきです。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94790992"></a>22.9.8. 忘れてはいけないこと</h3></div></div></div><p>NIS 環境にある今、
	今までとは違ったやり方が必要なことがいくつかあります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>研究室にユーザを追加するときは、それをマスター
	    NIS サーバに <span class="emphasis"><em>だけ</em></span>
	    追加しなければならず、さらに
	    <span class="emphasis"><em>NIS マップを再構築することを忘れてはいけません</em></span>。
	    これを忘れると新しいユーザは
	    NIS マスタ以外のどこにもログインできなくなります。
	    たとえば、新しくユーザ <span class="quote">「<span class="quote">jsmith</span>」</span>
	    をラボに登録したいときは以下のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw useradd jsmith</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make test-domain</code></strong></pre><p><code class="command">pw useradd jsmith</code> のかわりに
	    <code class="command">adduser jsmith</code> を使うこともできます。</p></li><li class="listitem"><p><span class="emphasis"><em>管理用アカウントを
	    NIS マップから削除してください</em></span>。
	    管理用アカウントやパスワードを、
	    それらのアカウントへアクセスさせてはいけないユーザが居るかも知れないマシンにまで伝えて回りたいとは思わないでしょう。</p></li><li class="listitem"><p><span class="emphasis"><em>NIS のマスタとスレーブをセキュアに、
	      そして機能停止時間を最短に保ってください</em></span>。
	    もし誰かがこれらのマシンをクラックしたり、
	    あるいは単に電源を落としたりすると、
	    彼らは実質的に多くの人を研究室へログインできなくしてしまえます。</p><p>これはどの集中管理システムにとってももっとも大きな弱点でしょう。
	    あなたの NIS
	    サーバを守らなければ怒れるユーザと対面することになるでしょう!</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94804560"></a>22.9.9. NIS v1 との互換性</h3></div></div></div><p>FreeBSD の
	<span class="application">ypserv</span> は、
	NIS v1 クライアントを部分的にサポートしています。
	FreeBSD の NIS 実装は NIS v2 プロトコルのみを使用していますが、
	ほかの実装では、古いシステムとの下位互換性を持たせるため
	v1 プロトコルをサポートしているものもあります。
	そのようなシステムに付いている
	<span class="application">ypbind</span> デーモンは、
	必要がないにもかかわらず NIS v1
	のサーバとの結合を成立させようとします
	(しかも v2 サーバからの応答を受信した後でも、
	ブロードキャストをし続けるかも知れません)。
	FreeBSD の ypserv は、
	クライアントからの通常のリクエストはサポートしていますが、
	v1 のマップ転送リクエストはサポートしていないことに注意してください。
	つまり FreeBSD の ypserv を、
	v1 だけをサポートするような古い NIS サーバと組み合わせて
	マスターやスレーブサーバとして使うことはできません。
	幸いなことに、現在、そのようなサーバが使われていることは
	ほとんどないでしょう。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-nis-server-is-client"></a>22.9.10. NIS クライアントとしても動作している NIS サーバ</h3></div></div></div><p>複数のサーバが存在し、サーバ自身が NIS
	クライアントでもあるようなドメインで
	ypserv が実行される場合には注意が必要です。
	一般的に良いとされているのは、
	他のサーバと結合をつくるようにブロードキャストさせるのではなく、
	サーバをそれ自身に結合させることです。
	もし、サーバ同士が依存関係を持っていて、一つのサーバが停止すると、
	奇妙なサービス不能状態に陥ることがあります。
	その結果、すべてのクライアントはタイムアウトを起こして
	他のサーバに結合しようと試みますが、
	これにかかる時間はかなり大きく、
	サーバ同士がまた互いに結合してしまったりすると、
	サービス不能状態はさらに継続することになります。</p><p>
	<code class="command">ypbind</code> に
	<code class="option">-S</code> オプションフラグを指定して実行することで、
	ホストを特定のサーバに結合することが可能です。
	NIS サーバを再起動するたびに、これを手動で行いたくないなら、
	次の行を <code class="filename">/etc/rc.conf</code>
	に追加すればよいでしょう。</p><pre class="programlisting">nis_client_enable="YES"	# run client stuff as well
nis_client_flags="-S <em class="replaceable"><code>NIS domain</code></em>,<em class="replaceable"><code>server</code></em>"</pre><p>詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypbind&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypbind</span>(8)</span></a> を参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94811728"></a>22.9.11. パスワード形式</h3></div></div></div><a id="idp94812368" class="indexterm"></a><p>
	NIS を実装しようする人の誰もがぶつかる問題の一つに、
	パスワード形式の互換性があります。
	NIS サーバが DES 暗号化パスワード使っている場合には、
	同様に DES を使用しているクライアントしか対応できません。
	たとえば <span class="trademark">Solaris</span>™； の NIS クライアントがネットワーク内にある場合、
	ほぼ確実に DES 暗号化パスワードを使用しなければならないでしょう。</p><p>サーバとクライアントがどのライブラリを使用しているかは、
	<code class="filename">/etc/login.conf</code> を確認してください。
	ホストが DES 暗号パスワードを使用するように設定されている場合、
	<code class="literal">default</code>
	クラスには以下のようなエントリが含まれます。</p><pre class="programlisting">default:\
    :passwd_format=des:\
    :copyright=/etc/COPYRIGHT:\
    [Further entries elided]</pre><p><code class="literal">passwd_format</code>
	特性について他に利用可能な値は
	<code class="literal">blf</code> および <code class="literal">md5</code>
	(それぞれ Blowfish および MD5 暗号化パスワード) です。</p><p><code class="filename">/etc/login.conf</code> を変更したときは、
	ログイン特性データベースも再構築しなければなりません。
	これは <code class="systemitem">root</code>
	権限で下記のようにコマンドを実行すればできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cap_mkdb /etc/login.conf</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">すでに <code class="filename">/etc/master.passwd</code>
	内に記録されているパスワード形式は、
	ログイン特性データベースが再構築された<span class="emphasis"><em>後</em></span>、
	ユーザが彼らのパスワードをはじめて変更するまで変更されないでしょう。</p></div><p>次に、
	パスワードが選択した形式で暗号化されることを確実にするために、
	さらに <code class="filename">/etc/auth.conf</code> 内の
	<code class="literal">crypt_default</code> において、
	選択したパスワード形式に高い優先順位がついていることも確認してください。
	そうするためには、選択した形式をリストの先頭に置いてください。
	たとえば DES 暗号化されたパスワードを使用するときは、
	エントリは次のようになります。</p><pre class="programlisting">crypt_default	=	des blf md5</pre><p>FreeBSD 上の各
	NIS サーバおよびクライアントにおいて上記の手順に従えば、
	ネットワーク内でどのパスワード形式が使用されるかが
	それらのマシン間で整合されているということを確信できます。
	NIS クライアント上で問題があれば、
	ここから問題となりそうな部分を探すと良いでしょう。
	覚えておいてください:
	異種混在ネットワークに NIS サーバを配置したいときには、
	DES が最大公約数的な標準となるでしょうから、
	すべてのシステムで DES を使用しなければならないかもしれません。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-dhcp"></a>22.10. DHCP</h2></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Sutter</span> <span class="firstname">Greg</span> [FAMILY Given]</span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94829648"></a>22.10.1. DHCP とは何でしょうか?</h3></div></div></div><a id="idp94830288" class="indexterm"></a><a id="idp94831568" class="indexterm"></a><p>DHCP (Dynamic Host Configuration Protocol) は、
	システムをネットワークに接続するだけで、
	ネットワークでの通信に必要な情報を入手することができる仕組みです。
	FreeBSD では ISC (Internet Software Consortium) による
	DHCP の実装を使用しています。したがって、
	ここでの説明のうち実装によって異なる部分は
	ISC のもの用になっています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94832848"></a>22.10.2. この節で説明していること</h3></div></div></div><p>この節は ISC DHCP
	システムのクライアント側およびサーバ側の構成要素の両方について説明します。
	クライアント側のプログラムである <code class="command">dhclient</code> は
	FreeBSD のベースシステム内に含まれています。そして、サーバ側の要素は
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a> port
	から利用可能です。下記の説明の他に、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcp-options</span>(5)</span></a> および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.conf</span>(5)</span></a>
	マニュアルページが役にたつ情報源です。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94837328"></a>22.10.3. DHCP の動作</h3></div></div></div><a id="idp94837968" class="indexterm"></a><p>クライアントとなるマシン上で、
	DHCP のクライアントである <code class="command">dhclient</code> を実行すると、
	まず設定情報の要求をブロードキャストします。デフォルトでは、
	このリクエストには UDP のポート 68 を使用します。
	サーバは UDP のポート 67 で応答し、クライアントの IP アドレスと、
	ネットマスクやルータ、DNS サーバなどの関連する情報を提供します。
	これらの情報のすべては DHCP の
	<span class="quote">「<span class="quote">リース</span>」</span> の形で送られ、DHCP
	サーバ管理者によって決められたある一定の時間内でのみ有効になります。
	これによって、ネットワークに存在しなくなったホストの
	IP アドレスは自動的に回収されることになります。</p><p>DHCP
	クライアントはサーバから非常に多くの情報を取得することができます。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcp-options</span>(5)</span></a> に非常に大きなリストが載っています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94845136"></a>22.10.4. FreeBSD への組み込み</h3></div></div></div><p>FreeBSD は ISC の DHCP クライアントである
	<code class="command">dhclient</code> を完全に組み込んでいます。
	DHCP クライアントはインストーラと基本システムの両方で提供されています。
	ですから DHCP サーバを走らせているネットワーク上ではネットワーク関係の設定についての詳細な知識は必要になりません。
	<code class="command">dhclient</code> は、3.2 以降のすべての
	FreeBSD の配布物に含まれています。</p><a id="idp94846928" class="indexterm"></a><p>DHCP は <span class="application">sysinstall</span>
	で対応されており、sysinstall でのネットワークインタフェイス設定の際は、
	<span class="quote">「<span class="quote">このインタフェイスの設定として DHCP を試してみますか?
	(Do you want to try DHCP configuration of this interface?)</span>」</span>
	という質問が最初になされます。
	これに同意することで <code class="command">dhclient</code> が実行され、
	それが成功すればネットワークの設定情報は自動的に取得されます。</p><p>システム起動時に DHCP を使ってネットワーク情報を取得するように
	するには、次の二つを行なう必要があります。</p><a id="idp94849744" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">bpf</code>
	    デバイスがカーネルに組み込まれていることを確認します。
	    これを組み込むには、カーネルコンフィグレーションファイルに
	    <code class="literal">pseudo-device bpf</code>
	    という行を追加し、カーネルを再構築します。
	    カーネルの構築に関する詳細は、
	    <a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a> を参照してください。</p><p><code class="filename">bpf</code> デバイスは、
	    FreeBSD にはじめから用意されている
	    <code class="filename">GENERIC</code> カーネルに組み込まれていますので、
	    自分で設定を変えたカスタムカーネルを使っているのでなければ、
	    DHCP を動作させるためにカーネルを再構築する必要はありません。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">セキュリティに関心のある方向けに注意しておきます。
	      <code class="filename">bpf</code>
	      デバイスは、パケットスニファ (盗聴プログラム)
	      を動作させることができる
	      (ただし <code class="systemitem">root</code> 権限が必要)
	      デバイスです。
	      <code class="filename">bpf</code> は DHCP を動作させるために
	      <span class="emphasis"><em>かならず</em></span>必要ですが、
	      セキュリティが非常に重要な場面では
	      DHCP をいつか使うかもしれないというだけで
	      <code class="filename">bpf</code>
	      デバイスをカーネルに追加すべきではないでしょう。</p></div></li><li class="listitem"><p><code class="filename">/etc/rc.conf</code> を編集して、
	    次の行を追加してください。</p><pre class="programlisting">ifconfig_fxp0="DHCP"</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">
	      で説明されているように <code class="literal">fxp0</code> の部分を、
	      動的に設定したいインタフェースの名前で置き換えることを忘れないようにしてください。</p></div><p>もし、使っている <code class="command">dhclient</code>
	    の場所を変更していたり、<code class="command">dhclient</code>
	    にフラグを渡したい場合は、
	    同様に下のように書き加えてください。</p><pre class="programlisting">dhcp_program="/sbin/dhclient"
dhcp_flags=""</pre></li></ul></div><a id="idp94865488" class="indexterm"></a><p>DHCP サーバ <code class="command">dhcpd</code> は、Ports Collection に
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a>
	の一部として収録されています。
	この port には ISC DHCP サーバと文書が含まれています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94867920"></a>22.10.5. 関連ファイル</h3></div></div></div><a id="idp94868560" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/etc/dhclient.conf</code></p><p><code class="command">dhclient</code> は設定ファイル
	    <code class="filename">/etc/dhclient.conf</code> を必要とします。
	    大抵の場合、このファイルはコメントだけであり、
	    デフォルトが通常使いやすい設定になっています。
	    この設定ファイルは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.conf</span>(5)</span></a>
	    マニュアルページで説明しています。</p></li><li class="listitem"><p><code class="filename">/sbin/dhclient</code></p><p><code class="command">dhclient</code> は静的にリンクされており、
	    <code class="filename">/sbin</code> に置かれています。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a>
	    マニュアルページで <code class="command">dhclient</code>
	    コマンドについてより詳しく説明しています。</p></li><li class="listitem"><p><code class="filename">/sbin/dhclient-script</code></p><p><code class="command">dhclient-script</code> は FreeBSD 特有の、
	    DHCP クライアント設定スクリプトです。これについては
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient-script&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient-script</span>(8)</span></a> マニュアルページで説明されていますが、
	    これを編集する必要はほとんど発生しないでしょう。</p></li><li class="listitem"><p><code class="filename">/var/db/dhclient.leases</code></p><p>DHCP クライアントはこのファイルに有効なリースのデータベースをログとして記録します。
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.leases&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.leases</span>(5)</span></a> にもうすこし詳しい解説があります。</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94880080"></a>22.10.6. 参考になる文献</h3></div></div></div><p>DHCP のプロトコルは
	<a class="link" href="http://www.freesoft.org/CIE/RFC/2131/" target="_top">RFC 2131</a>
	に完全に記述されています。また
	<a class="link" href="http://www.dhcp.org/" target="_top">dhcp.org</a>
	にも有用な情報源が用意されています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-dhcp-server"></a>22.10.7. DHCP サーバのインストールと設定</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94883280"></a>22.10.7.1. この節で説明していること</h4></div></div></div><p>この節は DHCP の ISC (Internet Software Consortium) 実装を用いて
	  FreeBSD システムを
	  DHCP サーバとして動作させる方法の情報を提供します。</p><p>DHCP のサーバ部分は FreeBSD の一部として提供されません。
	  したがって、このサービスを提供するために
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a>
	  port をインストールする必要があるでしょう。
	  Ports Collection を使用する情報についての詳細は
	  <a class="xref" href="#ports" title="第5章 アプリケーションのインストール - packages と ports">5章<em>アプリケーションのインストール - packages と ports</em></a> を参照してください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94885584"></a>22.10.7.2. DHCP サーバのインストール</h4></div></div></div><a id="idp94886224" class="indexterm"></a><p>FreeBSD システムを DHCP サーバとして設定するために、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bpf&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bpf</span>(4)</span></a>
	  デバイスがカーネルに組み込まれていることを保証する必要があります。
	  そうするためには、カーネルコンフィギュレーションファイルに
	  <code class="literal">pseudo-device bpf</code> を追加して、
	  カーネルを再構築してください。
	  カーネルの構築に関する詳細は <a class="xref" href="#kernelconfig" title="第9章 FreeBSD カーネルのコンフィグレーション">9章<em>FreeBSD カーネルのコンフィグレーション</em></a>
	  を参照してください。</p><p><code class="filename">bpf</code> デバイスは、
	  FreeBSD にはじめから用意されている <code class="filename">GENERIC</code>
	  カーネルの一部なので、DHCP
	  を動作させるためにカスタムカーネルを作成する必要はありません。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">セキュリティを特に意識する人は、<code class="filename">bpf</code>
	    <code class="filename">bpf</code> はパケットスニファ (盗聴プログラム)
	    が正常に (このようなプログラムはさらに特権アクセスを必要としますが)
	    動作することを可能にするデバイスでもあることに注意してください。
	    <code class="filename">bpf</code> は DHCP を使用するために必要
	    <span class="emphasis"><em>です</em></span>。
	    しかし、セキュリティをとても気にしているなら、
	    DHCP をいつか使うかもしれないというだけで
	    <code class="filename">bpf</code>
	    デバイスをカーネルに含めるべきではないでしょう。</p></div><p>次に行わねばならないのは、
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a> port
	  によってインストールされた <code class="filename">dhcpd.conf</code>
	  のサンプルを編集することです。
	  デフォルトでは、これは
	  <code class="filename">/usr/local/etc/dhcpd.conf.sample</code> で、
	  編集する前にこれを
	  <code class="filename">/usr/local/etc/dhcpd.conf</code>
	  にコピーするべきでしょう。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94903376"></a>22.10.7.3. DHCP サーバの設定</h4></div></div></div><a id="idp94904016" class="indexterm"></a><p><code class="filename">dhcpd.conf</code>
	  はサブネットおよびホストに関する宣言で構成されます。
	  例を使って説明するのが最も簡単でしょう。</p><pre class="programlisting">option domain-name "example.com";<a id="domain-name"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
option domain-name-servers 192.168.4.100;<a id="domain-name-servers"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
option subnet-mask 255.255.255.0;<a id="subnet-mask"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>

default-lease-time 3600;<a id="default-lease-time"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
max-lease-time 86400;<a id="max-lease-time"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span>
ddns-update-style none;<a id="ddns-update-style"></a><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span>

subnet 192.168.4.0 netmask 255.255.255.0 {
  range 192.168.4.129 192.168.4.254;<a id="range"></a><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span>
  option routers 192.168.4.1;<a id="routers"></a><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span>
}

host mailhost {
  hardware ethernet 02:03:04:05:06:07;<a id="hardware"></a><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span>
  fixed-address mailhost.example.com;<a id="fixed-address"></a><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span>
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#domain-name"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>このオプションは、
	      デフォルト探索ドメインとしてクライアントに渡されるドメインを指定します。
	      これが意味するところの詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=resolv.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">resolv.conf</span>(5)</span></a>
	      を参照してください。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#domain-name-servers"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>このオプションはクライアントが使用する、
	      コンマで区切られた DNS サーバのリストを指定します。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#subnet-mask"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>クライアントに渡されるネットマスクです。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#default-lease-time"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>クライアントは特定のリース期限を要求することもできます。
	      それ以外の場合は、サーバはこのリース期限値 (秒)
	      でリースを割り当てるでしょう。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#max-lease-time"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>これはサーバがリースする時間の最大値です。
	      クライアントがこれより長いリースを要求しても、
	      <code class="literal">max-lease-time</code>
	      秒だけしか有効にならないでしょう。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#ddns-update-style"><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span></a> </p></td><td valign="top" align="left"><p>このオプションは、リースが受理、またはリリースされたときに
	      DHCP サーバが DNS を更新しようとするかどうかを指定します。
	      ISC 実装では、このオプションは
	      <span class="emphasis"><em>必須</em></span> です。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#range"><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span></a> </p></td><td valign="top" align="left"><p>これはどの範囲の IP アドレスが、
	      クライアントに割り当てるために予約されたプールに使用されるかを示します。
	      この範囲に含まれている
	      IP アドレスはクライアントに渡されます。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#routers"><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span></a> </p></td><td valign="top" align="left"><p>クライアントに供給されるデフォルトゲートウェイを宣言します。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#hardware"><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span></a> </p></td><td valign="top" align="left"><p>(リクエストが生じた時に
	      DHCP サーバがホストを認識できるように)
	      ホストのハードウェア MAC アドレスを指定します。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#fixed-address"><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span></a> </p></td><td valign="top" align="left"><p>ホストに常に同じ IP アドレスを付与することを指定します。
	      DHCP サーバはリース情報を返す前にホスト名の名前解決をするので、
	      ここにホスト名を書いても構いません。</p></td></tr></table></div><p><code class="filename">dhcpd.conf</code>
	  を書き終えたら以下のコマンドでサーバを起動できます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/isc-dhcpd.sh start</code></strong></pre><p>今後サーバの設定に変更を加える必要が生じた時には、
	  <code class="literal">SIGHUP</code> シグナルを
	  <span class="application">dhcpd</span> に送っても、
	  多くのデーモンがそうであるようには、
	  設定ファイルが再読み込み <span class="emphasis"><em>されない</em></span>
	  ことに注意してください。
	  <code class="literal">SIGTERM</code> シグナルを送ってプロセスを停止し、
	  それから上記のコマンドを用いて再起動させる必要があります。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94937296"></a>22.10.7.4. ファイル</h4></div></div></div><a id="idp94937936" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/usr/local/sbin/dhcpd</code></p><p><span class="application">dhcpd</span> は静的にリンクされ
	      <code class="filename">/usr/local/sbin</code> に置かれます。
	      <span class="application">dhcpd</span>
	      に関するそれ以上の情報は port とともにインストールされる
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhcpd</span>(8)</span></a> マニュアルページにあります。</p></li><li class="listitem"><p><code class="filename">/usr/local/etc/dhcpd.conf</code></p><p><span class="application">dhcpd</span>
	      はクライアントへのサービス提供をはじめる前に設定ファイル
	      <code class="filename">/usr/local/etc/dhcpd.conf</code>
	      を必要とします。このファイルは、
	      サーバの稼働に関する情報に加えて、
	      サービスされているクライアントに提供される情報のすべてを含む必要があります。
	      この設定ファイルについての詳細は、
	      port によってインストールされる <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcpd.conf</span>(5)</span></a>
	      マニュアルページを参照してください。</p></li><li class="listitem"><p><code class="filename">/var/db/dhcpd.leases</code></p><p>DHCP
	      サーバは発行したリースのデータベースをこのファイルにログとして保持します。
	      port によってインストールされる <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd.leases&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcpd.leases</span>(5)</span></a>
	      にはもう少し詳しい説明があります。</p></li><li class="listitem"><p><code class="filename">/usr/local/sbin/dhcrelay</code></p><p><span class="application">dhcrelay</span> は、DHCP
	      サーバがクライアントからのリクエストを、
	      別のネットワーク上にある
	      DHCP サーバに転送する高度な環境下で使用されます。
	      この機能が必要なら、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a> port
	      をインストールしてください。
	      port とともに提供される <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcrelay&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhcrelay</span>(8)</span></a>
	      マニュアルページにはより詳細な情報が含まれます。</p></li></ul></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-dns"></a>22.11. DNS</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lee</span> <span class="firstname">Chern</span> [FAMILY Given]</span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94961616"></a>22.11.1. 概観</h3></div></div></div><a id="idp94962256" class="indexterm"></a><p>FreeBSD はデフォルトでは
	DNS プロトコルの最も一般的な実装である BIND
	(Berkeley Internet Name Domain) を使用します。DNS はホスト名を
	IP アドレスに、そして IP アドレスをホスト名に関連づけるプロトコルです。
	たとえば <code class="systemitem">www.FreeBSD.org</code> に対する問い合わせは
	The FreeBSD Project の ウェブサーバの IP アドレスを受け取るでしょう。
	その一方で <code class="systemitem">ftp.FreeBSD.org</code> に対する問い合わせは、
	対応する FTP マシンの IP アドレスを返すでしょう。
	同様に、その逆のことも可能です。
	IP アドレスに対する問い合わせを行うことで、
	そのホスト名を解決することができます。
	DNS 検索を実行するために、
	システム上でネームサーバを動作させる必要はありません。</p><a id="idp94963920" class="indexterm"></a><p>DNS は、
	個々のドメイン情報を格納およびキャッシュした、
	権威のあるルートサーバおよび他の小規模なネームサーバによる多少複雑なシステムによって、
	インターネット全体にわたって協調して動作します。</p><p>この文書は FreeBSD で安定版として利用されている
	BIND 8.x について説明します。
	FreeBSD では BIND 9.x を <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/bind9/pkg-descr">net/bind9</a>
	port からインストールできます。</p><p>RFC1034 および RFC1035 は DNS プロトコルを定義しています。</p><p>現在のところ BIND は
	<a class="link" href="http://www.isc.org/" target="_top">Internet Software Consortium
	  (www.isc.org)</a> によって保守されています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94967120"></a>22.11.2. 用語</h3></div></div></div><p>この文書を理解するには
	DNS 関連の用語をいくつか理解しなければいけません。</p><a id="idp94968144" class="indexterm"></a><a id="idp94968656" class="indexterm"></a><a id="idp94969168" class="indexterm"></a><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>用語</th><th>定義</th></tr></thead><tbody><tr><td>正引き DNS</td><td>ホスト名から IP アドレスへの対応です。</td></tr><tr><td>オリジン (origine)</td><td>特定のゾーンファイルによってカバーされるドメインへの参照です。</td></tr><tr><td><span class="application">named</span>, BIND, ネームサーバ</td><td>FreeBSD 内の BIND ネームサーバパッケージの一般名称です。</td></tr><tr><td>リゾルバ (resolver)</td><td>マシンがゾーン情報についてネームサーバに問い合わせるシステムプロセスです。</td></tr><tr><td>逆引き DNS</td><td>正引き DNS の逆です。つまり
		IP アドレスからホスト名への対応です。</td></tr><tr><td>ルートゾーン</td><td>インターネットゾーン階層の起点です。
		すべてのゾーンはルートゾーンの下に属します。
		これはファイルシステムのすべてのファイルがルートディレクトリの下に属することと似ています。</td></tr><tr><td>ゾーン</td><td>同じ権威によって管理される個々の DNS ドメイン、
		DNS サブドメイン、あるいは DNS の一部分です。</td></tr></tbody></table></div><a id="idp94985168" class="indexterm"></a><p>ゾーンの例:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="systemitem">.</code> はルートゾーンです。</p></li><li class="listitem"><p><code class="systemitem">org.</code> はルートゾーンの下のゾーンです。</p></li><li class="listitem"><p><code class="systemitem">example.org</code> は
	    <code class="systemitem">org.</code> ゾーンの下のゾーンです。</p></li><li class="listitem"><p><code class="systemitem">foo.example.org.</code> はサブドメインで、
	    <code class="systemitem">example.org.</code> の下のゾーンです。</p></li><li class="listitem"><p>
	    <code class="systemitem">1.2.3.in-addr.arpa</code> は 3.2.1.* の
	    IP 空間に含まれるすべての IP アドレスを参照するゾーンです。
	  </p></li></ul></div><p>見て分かるように、ホスト名のより詳細な部分はその左側に現れます。
	たとえば <code class="systemitem">example.org.</code> は
	<code class="systemitem">org.</code> より限定的です。同様に <code class="systemitem">org.</code>
	はルートゾーンより限定的です。
	ホスト名の各部分のレイアウトはファイルシステムに非常に似ています。
	たとえば <code class="filename">/dev</code>
	はルートの下であることなどです。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94995408"></a>22.11.3. ネームサーバを実行する理由</h3></div></div></div><p>ネームサーバは通常二つの形式があります:
	権威のあるネームサーバとキャッシュネームサーバです。</p><p>権威のあるネームサーバは以下の場合に必要です。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>問い合わせに対して信頼できる返答をすることで、
	    ある人が DNS 情報を世界に向けて発信したいとき。</p></li><li class="listitem"><p><code class="systemitem">example.org</code>
	    といったドメインが登録されており、
	    その下にあるホスト名に
	    IP アドレスを割り当てる必要があるとき。</p></li><li class="listitem"><p>IP アドレスブロックが (IP からホスト名への)
	    逆引き DNS エントリを必要とするとき。</p></li><li class="listitem"><p>プライマリサーバがダウンしているかまたはアクセスできない場合に、
	    代わりに問い合わせに対してスレーブと呼ばれるバックアップネームサーバが返答しなければならないとき。</p></li></ul></div><p>キャッシュネームサーバは以下の場合に必要です。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ローカルのネームサーバが、
	    外部のネームサーバに問い合わせするよりも、
	    キャッシュしてより速く返答できるとき。</p></li><li class="listitem"><p>ネットワークトラフィックの総量を減らしたいとき
	    (DNS のトラフィックはインターネットトラフィック全体の
	    5% 以上を占めることが測定されています)</p></li></ul></div><p><code class="systemitem">www.FreeBSD.org</code> に対する問い合わせを発したとき、
	リゾルバは大体の場合上流の ISP
	のネームサーバに問い合わせをして返答を得ます。
	ローカルのキャッシュ DNS サーバがあれば、
	問い合わせはキャッシュ
	DNS サーバによって外部に対して一度だけ発せられます。
	情報がローカルに蓄えられるので、
	追加の問い合わせはいずれもローカルネットワークの外側にまで確認しなくてもよくなります。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95024208"></a>22.11.4. 動作のしくみ</h3></div></div></div><p>FreeBSD では BIND デーモンは自明な理由から
	<span class="application">named</span> と呼ばれます。</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>ファイル</th><th>説明</th></tr></thead><tbody><tr><td><span class="application">named</span></td><td>BIND デーモン</td></tr><tr><td><code class="command">ndc</code></td><td>ネームデーモンコントロールプログラム</td></tr><tr><td><code class="filename">/etc/namedb</code></td><td>BIND のゾーン情報が置かれるディレクトリ</td></tr><tr><td><code class="filename">/etc/namedb/named.conf</code></td><td>デーモンの設定ファイル</td></tr></tbody></table></div><p>
	ゾーンファイルは通常 <code class="filename">/etc/namedb</code>
	ディレクトリ内に含まれており、ネームサーバによって処理される
	DNS ゾーン情報を含んでいます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95034960"></a>22.11.5. BIND の起動</h3></div></div></div><a id="idp95035600" class="indexterm"></a><p>BIND はデフォルトでインストールされているので、
	すべてを設定することは比較的単純です。</p><p>named デーモンが起動時に開始されることを保証するには、
	<code class="filename">/etc/rc.conf</code> に以下の変更をいれてください。
      </p><pre class="programlisting">named_enable="YES"</pre><p>デーモンを手動で起動するためには (設定をした後で)</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ndc start</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95039696"></a>22.11.6. 設定ファイル</h3></div></div></div><a id="idp95040464" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95041616"></a>22.11.6.1. <code class="command">make-localhost</code> の利用</h4></div></div></div><p>次のコマンドが</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /etc/namedb</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sh make-localhost</code></strong></pre><p>ローカル逆引き DNS ゾーンファイルを
	  <code class="filename">/etc/namedb/localhost.rev</code>
	  に適切に作成することを確認してください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95045456"></a>22.11.6.2. <code class="filename">/etc/namedb/named.conf</code></h4></div></div></div><pre class="programlisting">// $FreeBSD$
//
// 詳細については named(8) マニュアルページを参照してください。プライマリサーバ
// を設定するつもりなら、DNS がどのように動作するかの詳細を確実に理解してくださ
// い。単純な間違いであっても、影響をうける相手に対する接続を壊したり、無駄な
// インターネットトラフィックを大量に引き起こし得ます。

options {
        directory "/etc/namedb";

// "forwarders" 節に加えて次の行を有効にすることで、ネームサーバに決して自発的
// に問い合わせを発せず、常にそのフォワーダにたいして尋ねるように強制すること
// ができます:
//
//      forward only;

// あなたが上流のプロバイダ周辺の DNS サーバを利用できる場合、その IP アドレス
// をここに入力し、下記の行を有効にしてください。こうすれば、そのキャッシュの
// 恩恵にあやかることができ、インターネット全体の DNS トラフィックが減るでしょう。
/*
        forwarders {
                127.0.0.1;
        };
*/</pre><p>コメントが言っている通り、上流のキャッシュの恩恵を受けるために
	  <code class="literal">forwarders</code> をここで有効にすることができます。
	  通常の状況では、ネームサーバはインターネットの特定のネームサーバを調べて、
	  探している返答を見つけるまで再帰的に問い合わせを行います。
	  これが有効になっていれば、まず上流のネームサーバ
	  (または 与えられたネームサーバ) に問い合わせて、
	  そのキャッシュを利用するでしょう。
	  問い合わせをする上流のネームサーバが極度に通信量が多く、
	  高速であった場合、これを有効にする価値があるかもしれません。</p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">ここに <code class="systemitem">127.0.0.1</code>
	    を指定しても動作 <span class="emphasis"><em>しません</em></span>。
	    上流のネームサーバの IP アドレスに変更してください。</p></div><pre class="programlisting">        /*
         * あなたと利用したいネームサーバとの間にファイアウォールがある場合、
         * 下記の quiery-source 指令を有効にする必要があるでしょう。
         * 過去の BIND のバージョンは常に 53 番ポートに問い合わせをしますが、
         * BIND 8.1 はデフォルトで非特権ポートを使用します。
         */
        // query-source address * port 53;

        /*
         * 砂場内で動作させている場合、ダンプファイルのために異なる場所を指定
         * しなければならないかもしれません。
         */
        // dump-file "s/named_dump.db";
};

// 注意: 下記は将来のリリースで対応されるでしょう。
/*
host { any; } {
        topology {
                127.0.0.0/8;
        };
};
*/

// セカンダリを設定することはより簡単な方法で、そのおおまかな姿が下記で説明さ
// れています。
//
// ローカルネームサーバを有効にする場合、このサーバが最初に尋ねられるように
// /etc/resolv.conf に 127.0.0.1 を入力することを忘れないでください。さらに、
// /etc/rc.conf 内で有効にすることも確認してください。

zone "." {
        type hint;
        file "named.root";
};

zone "0.0.127.IN-ADDR.ARPA" {
        type master;
        file "localhost.rev";
};

zone
"0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.IP6.INT" {
        type master;
        file "localhost.rev";
};

// 注意: 下記の IP アドレスを使用しないでください。これはダミーでありデモや文書
// だけを目的としたものです。
//
// セカンダリ設定の例です。少なくともあなたのドメインが属するゾーンに対するセカ
// ンダリになることは便利かもしれません。プライマリの責を負っている IP アドレス
// をネットワーク管理者に尋ねてください。
//
// 逆引き参照ゾーン (IN-ADDR.ARPA) を含めることを決して忘れないでください!
// (これは ".IN-ADDR.ARPA" を付け加えられたそれぞれの IP アドレスの最初のバイト
// の逆順です。)
//
// プライマリゾーンの設定をはじめる前に DNS および BIND がどのように動作するか
// 完全に理解してください。時々自明でない落し穴があります。それに比べるとセカン
// ダリを設定するのは単純です。
//
// 注意: 下記の例を鵜呑みにして有効にしないでください。:-) 実際の名前とアドレス
// を代わりに使用してください。
//
// 注意!!! FreeBSD は bind を砂場のなかで動かします (rc.conf 内の named_flags
// を参照してください)。セカンダリゾーンを含んだディレクトリは、bind によって
// 書き込み可能でなければなりません。次の手順が推奨されます:
//
//      mkdir /etc/namedb/s
//      chown bind:bind /etc/namedb/s
//      chmod 750 /etc/namedb/s</pre><p>BIND を砂場 (sandbox) で
	  (訳注: chroot をもちいて) 動作させるための詳細は
	  <a class="link" href="#network-named-sandbox" title="22.11.8. 砂場で named を実行する">砂場で named を実行する</a> を参照してください。</p><pre class="programlisting">/*
zone "example.com" {
        type slave;
        file "s/example.com.bak";
        masters {
                192.168.1.1;
        };
};

zone "0.168.192.in-addr.arpa" {
        type slave;
        file "s/0.168.192.in-addr.arpa.bak";
        masters {
                192.168.1.1;
        };
};
*/</pre><p><code class="filename">named.conf</code> の中で、
	  上記は転送と逆引きゾーンのためのスレーブエントリの例です。</p><p>新しくサービスするそれぞれのゾーンについて、新規のエントリを
	  <code class="filename">named.conf</code> に加えなければいけません。</p><p>たとえば <code class="systemitem">example.org</code>
	  に対する最もシンプルなゾーンエントリは以下のようになります。</p><pre class="programlisting">zone "example.org" {
	type master;
	file "example.org";
};</pre><p>このゾーンは <code class="option">type</code>
	  命令で示されているようにマスタで、ゾーン情報を
	  <code class="option">file</code> 命令で指示された
	  <code class="filename">/etc/namedb/example.org</code>
	  ファイルに保持しています。</p><pre class="programlisting">zone "example.org" {
	type slave;
	file "example.org";
};</pre><p>スレーブの場合、
	  ゾーン情報は特定のゾーンのマスタネームサーバから転送され、
	  指定されたファイルに保存されます。
	  マスタサーバが停止するか到達できない場合には、
	  スレーブサーバが転送されたゾーン情報を保持していて、
	  サービスできるでしょう。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95055824"></a>22.11.6.3. ゾーンファイル</h4></div></div></div><p><code class="systemitem">example.org</code> に対するマスタゾーンファイル
	  (<code class="filename">/etc/namedb/example.org</code> に保持されます)
	  の例は以下のようになります。</p><pre class="programlisting">$TTL 3600

example.org. IN SOA ns1.example.org. admin.example.org. (
                        5               ; Serial
                        10800           ; Refresh
                        3600            ; Retry
                        604800          ; Expire
                        86400 )         ; Minimum TTL

; DNS Servers
@       IN NS           ns1.example.org.
@       IN NS           ns2.example.org.

; Machine Names
localhost       IN A    127.0.0.1
ns1             IN A    3.2.1.2
ns2             IN A    3.2.1.3
mail            IN A    3.2.1.10
@               IN A    3.2.1.30

; Aliases
www             IN CNAME        @

; MX Record
@               IN MX   10      mail.example.org.</pre><p><span class="quote">「<span class="quote">.</span>」</span>
	  が最後についているすべてのホスト名は正確なホスト名であり、
	  一方で <span class="quote">「<span class="quote">.</span>」</span>
	  で終了しないすべての行はオリジンが参照されることに注意してください。
	  たとえば <code class="literal">www</code> は <code class="literal">www + オリジン</code>
	  に展開されます。この架空のゾーンファイルでは、
	  オリジンは <code class="systemitem">example.org.</code> なので
	  <code class="literal">www</code> は <code class="systemitem">www.example.org.</code>
	  に展開されます。</p><p>
	  ゾーンファイルの書式は次のとおりです。
	</p><pre class="programlisting">recordname      IN recordtype   value</pre><a id="idp95074128" class="indexterm"></a><p>DNS レコードに使われる最も一般的なものは以下のとおりです。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">SOA</span></dt><dd><p>ゾーン権威の起点</p></dd><dt><span class="term">NS</span></dt><dd><p>権威のあるネームサーバ</p></dd><dt><span class="term">A</span></dt><dd><p>ホストのアドレス</p></dd><dt><span class="term">CNAME</span></dt><dd><p>別名としての正規の名称</p></dd><dt><span class="term">MX</span></dt><dd><p>メールエクスチェンジャ</p></dd><dt><span class="term">PTR</span></dt><dd><p>ドメインネームポインタ
		(逆引き DNS で使用されます)</p></dd></dl></div><pre class="programlisting">
example.org. IN SOA ns1.example.org. admin.example.org. (
                        5               ; Serial
                        10800           ; Refresh after 3 hours
                        3600            ; Retry after 1 hour
                        604800          ; Expire after 1 week
                        86400 )         ; Minimum TTL of 1 day</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="systemitem">example.org.</code></span></dt><dd><p>このゾーンのオリジンでもあるドメイン名</p></dd><dt><span class="term"><code class="systemitem">ns1.example.org.</code></span></dt><dd><p>このゾーンに対して権威のあるプライマリネームサーバ</p></dd><dt><span class="term"><code class="literal">admin.example.org.</code></span></dt><dd><p>このゾーンの責任者。@
	      を置き換えた電子メールアドレスを指定します。
	      (<code class="email">&lt;<a xmlns="" class="email" href="mailto:admin@example.org">admin@example.org</a>&gt;</code> は
	      <code class="literal">admin.example.org</code> になります)</p></dd><dt><span class="term"><code class="literal">5</code></span></dt><dd><p>ファイルのシリアル番号です。
		これはファイルが変更されるたびに増加させる必要があります。
		現在では多くの管理者は <code class="literal">yyyymmddrr</code>
		という形式をシリアル番号として使用することを好みます。
		2001041002 は最後に修正されたのが 2001/04/10 で、後ろの 02
		はその日で二回目に修正されたものであるということを意味するでしょう。
		シリアル番号は、
		それが更新されたときにスレーブネームサーバに対してゾーンを通知するので重要です。</p></dd></dl></div><pre class="programlisting">
@       IN NS           ns1.example.org.</pre><p>これは <code class="varname">NS</code> エントリです。
	  このゾーンに対して権威のある返答を返すネームサーバはすべて、
	  このエントリを一つ有していなければなりません。
	  ここにある <code class="literal">@</code> は
	  <code class="systemitem">example.org.</code> を意味します。
	  <code class="literal">@</code> はオリジンに展開されます。</p><pre class="programlisting">
localhost       IN A    127.0.0.1
ns1             IN A    3.2.1.2
ns2             IN A    3.2.1.3
mail            IN A    3.2.1.10
@               IN A    3.2.1.30</pre><p><code class="varname">A</code> レコードはマシン名を示します。
	  上記のように <code class="systemitem">ns1.example.org</code> は
	  <code class="systemitem">3.2.1.2</code> に結びつけられるでしょう。
	  ふたたびオリジンを示す <code class="literal">@</code>
	  がここに使用されていますが、これは
	  <code class="systemitem">example.org</code> が
	  <code class="systemitem">3.2.1.30</code>
	  に結び付けられることを意味しています。</p><pre class="programlisting">
www             IN CNAME        @</pre><p><code class="varname">CNAME</code>
	  レコードは通常マシンに別名を与えるときに使用されます。
	  例では <code class="systemitem">www</code> はオリジン、すなわち
	  <code class="systemitem">example.org</code>
	  (<code class="systemitem">3.2.1.30</code>)
	  のアドレスをふられたマシンへの別名を与えます。
	  <code class="varname">CNAME</code> はホスト名の別名、
	  または複数のマシン間で一つのホスト名をラウンドロビン
	  (訳注: 問い合わせがあるたびに別の IP アドレスを返すことで、
	  一台にアクセスが集中することを防ぐ手法)
	  するときに用いられます。</p><pre class="programlisting">
@               IN MX   10      mail.example.org.</pre><p><code class="varname">MX</code> レコードは、
	  ゾーンに対してどのメールサーバがやってきたメールを扱うことに責任を持っているかを示します。
	  <code class="systemitem">mail.example.org</code>
	  はメールサーバのホスト名で、10 はメールサーバの優先度を示します。</p><p>優先度が 3,2 または
	  1 などのメールサーバをいくつも置くことができます。
	  <code class="systemitem">example.org</code>
	  へ送ろうとしているメールサーバははじめに一番優先度の高いメールサーバに接続しようとします。
	  そして接続できない場合、二番目に優先度の高いサーバに接続しようとし、
	  以下、メールが適切に配送されるまで同様に繰り返します。</p><p>in-addr.arpa ゾーンファイル (逆引き DNS) に対しても
	  <code class="varname">A</code> または <code class="varname">CNAME</code> の代わりに
	  <code class="varname">PTR</code> エントリが用いられることを除けば、
	  同じ書式が使われます。</p><pre class="programlisting">$TTL 3600

1.2.3.in-addr.arpa. IN SOA ns1.example.org. admin.example.org. (
                        5               ; Serial
                        10800           ; Refresh
                        3600            ; Retry
                        604800          ; Expire
                        3600 )          ; Minimum

@       IN NS   ns1.example.org.
@       IN NS   ns2.example.org.

2       IN PTR  ns1.example.org.
3       IN PTR  ns2.example.org.
10      IN PTR  mail.example.org.
30      IN PTR  example.org.</pre><p>このファイルは上記の架空のドメインの
	  IP アドレスからホスト名への対応を与えます。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95114064"></a>22.11.7. キャッシュネームサーバ</h3></div></div></div><a id="idp95114704" class="indexterm"></a><p>キャッシュネームサーバはどのゾーンに対しても権威をもたないネームサーバです。
	キャッシュネームサーバは単に自分で問い合わせをし、
	後で使えるように問い合わせの結果を覚えておきます。
	これを設定するには、ゾーンを何も含まずに、
	通常通りネームサーバを設定してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-named-sandbox"></a>22.11.8. 砂場で <span class="application">named</span> を実行する</h3></div></div></div><a id="idp95117520" class="indexterm"></a><a id="idp95122896" class="indexterm"></a><p>セキュリティを強めるために <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> を非特権ユーザで実行し、
	砂場のディレクトリ内に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chroot</span>(8)</span></a>
	して実行したいと思うかもしれません。
	こうすると <span class="application">named</span>
	デーモンは砂場の外にはまったく手を出すことができません。
	<span class="application">named</span> が乗っ取られたとしても、
	これによって起こりうる損害が小さくなるでしょう。
	FreeBSD にはデフォルトで、そのための <code class="systemitem">bind</code>
	というユーザとグループがあります。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">多くの人々は <span class="application">named</span>
	  を <code class="command">chroot</code> するように設定する代わりに、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a> 環境内で <span class="application">named</span>
	  を実行することを奨めるでしょう。
	  この節ではそれは扱いません。</p></div><p><span class="application">named</span> は砂場の外
	(共有ライブラリ、ログソケットなど) にアクセスできないので、
	<span class="application">named</span>
	を正しく動作させるためにいくつもの段階を経る必要があります。
	下記のチェックリストにおいては、砂場のパスは
	<code class="filename">/etc/namedb</code> で、
	このディレクトリの内容には何も手を加えていないと仮定します。
	<code class="systemitem">root</code> 権限で次のステップを実行してください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">named</span>
	    が存在することを期待しているディレクトリをすべて作成します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /etc/namedb</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p bin dev etc var/tmp var/run master slave</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown bind:bind slave var/*</code></strong><a id="chown-slave"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#chown-slave"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>これらのディレクトリに対して
		<span class="application">named</span>
		が必要なのは書き込み権限だけなので、それだけを与えます。</p></td></tr></table></div></li><li class="listitem"><p>基本ゾーンファイルと設定ファイルの編集と作成を行います。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp /etc/localtime etc</code></strong><a id="localtime"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
<code class="prompt">#</code> <strong class="userinput"><code>mv named.conf etc &amp;&amp; ln -sf etc/named.conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv named.root master</code></strong>

<code class="prompt">#</code> <strong class="userinput"><code>sh make-localhost &amp;&amp; mv localhost.rev localhost-v6.rev master</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cat &gt; master/named.localhost
$ORIGIN localhost.
$TTL 6h
@	IN	SOA	localhost. postmaster.localhost. (
			1	; serial
			3600	; refresh
			1800	; retry
			604800	; expiration
			3600 )	; minimum
	IN	NS	localhost.
	IN	A		127.0.0.1
^D</code></strong></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#localtime"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>これは <span class="application">named</span> が <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a>
	      に正しい時刻でログを書き込むことを可能にします。</p></td></tr></table></div></li><li class="listitem"><p>4.9-RELEASE より前のバージョンの FreeBSD を使用している場合、
	    静的リンクされた <span class="application">named-xfer</span>
	    を構築し、砂場にコピーしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/lib/libisc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir &amp;&amp; make cleandir &amp;&amp; make depend &amp;&amp; make all</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/lib/libbind</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir &amp;&amp; make cleandir &amp;&amp; make depend &amp;&amp; make all</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/libexec/named-xfer</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir &amp;&amp; make cleandir &amp;&amp; make depend &amp;&amp; make NOSHARED=yes all</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp named-xfer /etc/namedb/bin &amp;&amp; chmod 555 /etc/namedb/bin/named-xfer</code></strong><a id="clean-cruft"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></pre><p>静的リンクされた <code class="command">named-xfer</code>
	    をインストールしたら、
	    ソースツリーの中にライブラリまたはプログラムの古くなったコピーを残さないように、
	    掃除する必要があります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/lib/libisc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/lib/libbind</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/libexec/named-xfer</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#clean-cruft"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>このステップは時々失敗することが報告されています。
		もし失敗した場合、次のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src &amp;&amp; make cleandir &amp;&amp; make cleandir</code></strong></pre><p>そして <code class="filename">/usr/obj</code>
		ツリーを削除します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rm -fr /usr/obj &amp;&amp; mkdir /usr/obj</code></strong></pre><p>これはソースツリーからすべての
		<span class="quote">「<span class="quote">がらくた</span>」</span> を一掃します。
		もう一度上記の手順を行うと、今度はうまく動作するでしょう。</p></td></tr></table></div><p>バージョン 4.9-RELEASE 以降の
	    FreeBSD を使用している場合 <code class="filename">/usr/libexec</code>
	    にある <code class="command">named-xfer</code>
	    のコピーはデフォルトで静的リンクされています。
	    砂場にコピーするために単純に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cp</span>(1)</span></a> が使えます。</p></li><li class="listitem"><p><span class="application">named</span> が見ることができ、
	    書き込むことのできる <code class="filename">dev/null</code>
	    を作成します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /etc/namedb/dev &amp;&amp; mknod null c 2 2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 666 null</code></strong></pre></li><li class="listitem"><p><code class="filename">/etc/namedb/var/run/ndc</code> から
	    <code class="filename">/var/run/ndc</code>
	    へのシンボリックリンクを作成します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -sf /etc/namedb/var/run/ndc /var/run/ndc</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">これは単に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ndc</span>(8)</span></a> を実行するたびに <code class="option">-c</code>
	      オプションを指定しなくてもよいようにするだけです。
	      /var/run の中身は起動時に削除されるため、
	      これが有用だと思うなら、このコマンドをルートの crontab に
	      <code class="option">@reboot</code>
	      オプションを指定して追加してください。
	      詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">crontab</span>(5)</span></a> を参照してください。</p></div></li><li class="listitem"><p><span class="application">named</span> が書き込める追加の
	    <code class="filename">log</code> ソケットを作成するように
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> を設定します。
	    これを行うためには、<code class="filename">/etc/rc.conf</code>
	    内の <code class="varname">syslogd_flags</code> 変数に
	    <code class="literal">-l /etc/namedb/dev/log</code> を加えてください。</p></li><li class="listitem"><p>次の行を <code class="filename">/etc/rc.conf</code> に加えて
	    <span class="application">named</span> が起動し、
	    自身を砂場内に <code class="command">chroot</code> するように調整します</p><pre class="programlisting">named_enable="YES"
named_flags="-u bind -g bind -t /etc/namedb /etc/named.conf"</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">設定ファイル <em class="replaceable"><code>/etc/named.conf</code></em>
	      は <span class="emphasis"><em>砂場のディレクトリに対して相対的な</em></span>
	      フルパスで表されることに注意してください。
	      つまり、上記の行で示されたファイルは実際には
	      <code class="filename">/etc/namedb/etc/named.conf</code> です。</p></div></li></ul></div><p>次のステップは <span class="application">named</span>
	がどのゾーンを読み込むか、
	そしてディスク上のどこにゾーンファイルがあるのかを知るために
	<code class="filename">/etc/namedb/etc/named.conf</code> を編集することです。
	下記に例をコメントを加えて示します
	(ここで特にコメントされていない内容については、
	砂場の中で動作させない DNS サーバの設定と同じです)。</p><pre class="programlisting">options {
        directory "/";<a id="directory"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
        named-xfer "/bin/named-xfer";<a id="named-xfer"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
        version "";		// Don't reveal BIND version
        query-source address * port 53;
};
// ndc control socket
controls {
        unix "/var/run/ndc" perm 0600 owner 0 group 0;
};
// Zones follow:
zone "localhost" IN {
        type master;
        file "master/named.localhost";<a id="master"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
        allow-transfer { localhost; };
        notify no;
};
zone "0.0.127.in-addr.arpa" IN {
        type master;
        file "master/localhost.rev";
        allow-transfer { localhost; };
        notify no;
};
zone "0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.int" {
	type master;
	file "master/localhost-v6.rev";
	allow-transfer { localhost; };
	notify no;
};
zone "." IN {
        type hint;
        file "master/named.root";
};
zone "private.example.net" in {
        type master;
        file "master/private.example.net.db";
	allow-transfer { 192.168.10.0/24; };
};
zone "10.168.192.in-addr.arpa" in {
        type slave;
        masters { 192.168.10.2; };
        file "slave/192.168.10.db";<a id="slave"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
};</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#directory"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p><code class="literal">directory</code> は
	    <code class="filename">/</code> を指定します。
	    <span class="application">named</span>
	    が必要とするファイルはすべてこのディレクトリにあります。
	    (この指定は <span class="quote">「<span class="quote">通常の</span>」</span> (訳注: 砂場内で動作させない)
	    ユーザにとっての <code class="filename">/etc/namedb</code>
	    と等価です)。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#named-xfer"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p><code class="command">named-xfer</code>
	    バイナリへの (<span class="application">named</span> にとっての)
	    フルパスを指定します。
	    <span class="application">named</span> はデフォルトで
	    <code class="command">named-xfer</code> を <code class="filename">/usr/libexec</code>
	    から探すようにコンパイルされているので、これが必要です</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#master"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>このゾーンに対するゾーンファイルを
	    <span class="application">named</span> が見つけられるようにファイル名を
	    (上記と同様に <code class="literal">directory</code> からの相対パスで)
	    指定します。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#slave"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>このゾーンに対するゾーン情報がマスタサーバからが転送されたあとに、
	    <span class="application">named</span>
	    がゾーンファイルのコピーを書き込むファイル名を
	    (上記と同様に <code class="literal">directory</code> からの相対パスで)
	    指定します。これが、上記のように設定段階で
	    <code class="filename">slave</code> ディレクトリの所有者を
	    <code class="systemitem">bind</code> に変更する理由です。</p></td></tr></table></div><p>上記のステップを完了したら、サーバを再起動するか <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a>
	を再起動し、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> を起動してください。その際、
	<code class="varname">syslogd_flags</code> および
	<code class="varname">named_flags</code>
	に新たに指定したオプションが有効になっていることを確かめてください。
	これで <span class="application">named</span>
	を砂場のなかで動作させることができているはずです!</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95230672"></a>22.11.9. セキュリティ</h3></div></div></div><p>BIND は DNS の最も一般的な実装ではありますが、
	常にセキュリティ問題を抱えています。
	問題になり得る、また悪用可能なセキュリティホールが時々みつかります。
      </p><p>現在のインターネットおよび FreeBSD
	のセキュリティ問題について常に最新の情報を得るために
	<a class="link" href="http://www.cert.org/" target="_top">CERT</a> および
	<a class="link" href="../handbook/eresources.html#ERESOURCES-MAIL" target="_top">freebsd-security-notifications</a>
	を購読するとよいでしょう。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">問題が生じたとしても、
	  最新のソースからビルドした named を用意しておけば、
	  問題にならないかもしれません。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95233744"></a>22.11.10. さらなる情報源</h3></div></div></div><p>
	BIND/named のマニュアルページ: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ndc</span>(8)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">named.conf</span>(5)</span></a>
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.isc.org/products/BIND/" target="_top">ISC Bind
	      公式ページ</a></p></li><li class="listitem"><p><a class="link" href="http://www.nominum.com/getOpenSourceResource.php?id=6" target="_top">
	      BIND FAQ</a></p></li><li class="listitem"><p><a class="link" href="http://www.oreilly.com/catalog/dns4/" target="_top">O'Reilly
	      DNS and BIND 4th Edition</a></p></li><li class="listitem"><p><a class="link" href="ftp://ftp.isi.edu/in-notes/rfc1034.txt" target="_top">RFC1034
	      - Domain Names - Concepts and Facilities</a>
	    (ドメイン名、その概念と基盤)</p></li><li class="listitem"><p><a class="link" href="ftp://ftp.isi.edu/in-notes/rfc1035.txt" target="_top">RFC1035
	      - Domain Names - Implementation and Specification</a>
	    (ドメイン名、その実装と仕様)</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ntp"></a>22.12. NTP</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Hukins</span> <span class="firstname">Tom</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp95250000" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95250512"></a>22.12.1. 概説</h3></div></div></div><p>時間の経過とともに、コンピュータの時計はずれてしまいがちです。
	時間が経つと、コンピュータの時計は正確でなくなってゆきます。
	NTP (Network Time Protocol)
	は時計が正確であることを保証する方法の一つです。</p><p>インターネットサービスの多くは、
	コンピュータの時計が正確であることに依存しているか、
	あるいは多くを負っています。
	たとえば web サーバ は、
	あるファイルがある時刻以降に修正されていたらそのファイルを送ってほしいという要求を受け取るかもしれません。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> のようなサービスは所定の時間にコマンドを実行します。
	時計が正確でない場合、
	これらのコマンドは期待したとおりには実行されないかもしれません。</p><a id="idp95252688" class="indexterm"></a><p>FreeBSD は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> NTP サーバを搭載しています。これは、
	マシンの時計を合わせるために他の NTP サーバに問い合わせをしたり、
	他のマシンに対して時刻を報じるために使用できます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95255120"></a>22.12.2. 適切な NTP サーバの選択</h3></div></div></div><a id="idp95255760" class="indexterm"></a><p>時刻を同期するために利用する NTP サーバを、
	一つ以上見つける必要があります。
	ネットワーク管理者、または ISP はこの目的のために
	NTP サーバを設定しているかもしれません ―
	本当にそうなのか確かめるためにドキュメントを確認してください。
	あなたの近くの NTP サーバを探せる
	<a class="link" href="http://www.eecis.udel.edu/~mills/ntp/servers.html" target="_top">公にアクセス可能な
	NTP サーバのリスト</a> があります。
	どのサーバを選択するとしても、そのサーバの運営ポリシを理解し、
	要求されているなら利用許可を求めることを忘れないでください。</p><p>使用しているサーバのうちのどれかが到達不能になるか、
	その時計の信頼性が低い場合、無関係の
	NTP サーバをいくつか選択するとよいでしょう。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> は他のサーバから受け取った応答を賢く利用します ―
	信頼できないサーバより信頼できるサーバを重視します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95259216"></a>22.12.3. マシンの設定</h3></div></div></div><a id="idp95259856" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95261008"></a>22.12.3.1. 基本設定</h4></div></div></div><a id="idp95261648" class="indexterm"></a><p>マシンが起動するときだけ時計を同期させたい場合は
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a> が使えます。頻繁に再起動され、
	  たまに同期すれば十分なデスクトップマシンには適切かもしれません。
	  しかしほとんどのマシンでは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> を実行するべきです。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> を動かしているマシンでも、起動時に
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a> を使用するのはよい考えです。
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> プログラムは時計を徐々に変更します。しかし
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a>
	  は正しい時刻と現在設定されているマシンの時刻がどんなに離れていようとも時計を設定します。</p><p>起動時に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a> を有効にするためには、
	  <code class="literal">ntpdate_enable="YES"</code> を
	  <code class="filename">/etc/rc.conf</code> に追加してください。
	  さらに、同期したいすべてのサーバおよび、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a>
	  に渡すあらゆるフラグを <code class="varname">ntpdate_flags</code>
	  に指定する必要があるでしょう。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95283152"></a>22.12.3.2. 一般設定</h4></div></div></div><a id="idp95283792" class="indexterm"></a><p>NTP は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ntp.conf</span>(5)</span></a> に記述された書式の
	  <code class="filename">/etc/ntp.conf</code> ファイルによって設定されます。
	  簡単な例を以下に示します。</p><pre class="programlisting">server ntplocal.example.com prefer
server timeserver.example.org
server ntp2a.example.net

driftfile /var/db/ntp.drift</pre><p><code class="literal">server</code> オプションは、
	  使用するサーバを一行に一つずつ指定します。サーバが上記の
	  <code class="systemitem">ntplocal.example.com</code> のように
	  <code class="literal">prefer</code> 引数とともに指定された場合、
	  このサーバは他のサーバより優先されます。
	  優先されたサーバからの応答は、
	  他のサーバの応答と著しく異なる場合は破棄されますが、
	  そうでなければ他の応答を考慮することなく使用されます。
	  <code class="literal">prefer</code> 引数は、通常、
	  特別な時間モニタハードウェアを備えているような非常に正確であるとされている
	  NTP サーバに対して使用されます。</p><p><code class="literal">driftfile</code>
	  オプションはシステム時計の周波数オフセットを格納するために使用するファイルを指定します。
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> プログラムは、
	  時計の自然変動を自動的に補正するためにこれを用います。
	  これにより、一定時間外部の時刻ソースから切り離されたとしても、
	  十分正確な時刻を維持することを可能にします。</p><p><code class="literal">driftfile</code> オプションは、使用している NTP
	  サーバから過去に受け取った応答に関する情報を格納するために、
	  どのファイルが使用されるか指定します。
	  このファイルは NTP に関する内部情報を含んでいます。
	  これは他のプロセスによって修正されてはいけません。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95295312"></a>22.12.3.3. サーバへのアクセス制御</h4></div></div></div><p>デフォルトでは NTP
	  サーバはインターネット上のすべてのホストからアクセスが可能です。
	  <code class="filename">/etc/ntp.conf</code> 内で <code class="literal">restrict</code>
	  オプションを指定することによって、
	  どのマシンがサーバにアクセスできるかを制御できるようにします。</p><p>NTP サーバにアクセスするマシンのすべてを拒否したいのなら、
	  以下の行を <code class="filename">/etc/ntp.conf</code>
	  に追加してください。</p><pre class="programlisting">restrict default ignore</pre><p>あなたのネットワーク内のマシンにだけサーバに接続して時計を同期することを認めたいが、
	  それらからサーバに対して設定を行うのを許さず、
	  同期する端末としても利用されないようにしたいのなら、
	  以下を加えてください。</p><pre class="programlisting">restrict 192.168.1.0 mask 255.255.255.0 notrust nomodify notrap</pre><p><code class="systemitem">192.168.1.0</code>
	  をあなたのネットワークの IP アドレスに
	  <code class="systemitem">255.255.255.0</code>
	  をあなたのネットワークのネットマスクに置き換えてください。</p><p><code class="filename">/etc/ntp.conf</code> には複数の
	  <code class="literal">restrict</code> オプションを置けます。
	  詳細に付いては <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ntp.conf</span>(5)</span></a> の
	  <code class="literal">Access Control Support</code>
	  サブセクションを参照してください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95335888"></a>22.12.4. NTP サーバの実行</h3></div></div></div><p>NTP サーバが起動時に実行されることを保証するために、
	<code class="literal">xntpd_enable="YES"</code> を
	<code class="filename">/etc/rc.conf</code> に加えてください。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> にフラグを追加したい場合は
	<code class="filename">/etc/rc.conf</code> 内の
	<code class="varname">xntpd_flags</code> パラメータを編集してください。</p><p>マシンを再起動することなくサーバを実行したいときは、
	<code class="filename">/etc/rc.conf</code> 内の <code class="varname">xntpd_flags</code>
	で追加されたパラメータをすべて指定して
	<code class="command">ntpd</code> を実行してください。以下に例を示します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ntpd -p /var/run/ntpd.pid</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.X では <code class="filename">/etc/rc.conf</code>
	  内のさまざまなオプションの名前が変わりました。
	  したがって、上記の
	  <code class="literal">xntpd</code> に関するオプションは
	  <code class="literal">ntpd</code> に置き換えてください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95348048"></a>22.12.5. 一時的なインターネット接続で ntpd を使用する</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> プログラムは正しく機能するために、
	インターネットへの常時接続を必要としません。しかしながら、
	オンデマンドでダイアルアップされるように設定された一時的な接続の場合、
	NTP トラフィックがダイアルを引き起こしたり、
	接続を維持し続けるようなことを避けるようにした方がよいでしょう。
	ユーザ PPP を使用している場合、以下の例のように
	<code class="filename">/etc/ppp/ppp.conf</code> 内で
	<code class="literal">filter</code> ディレクティブが使用できます。</p><pre class="programlisting"> set filter dial 0 deny udp src eq 123
 # Prevent NTP traffic from initiating dial out
 set filter dial 1 permit 0 0
 set filter alive 0 deny udp src eq 123
 # Prevent incoming NTP traffic from keeping the connection open
 set filter alive 1 deny udp dst eq 123
 # Prevent outgoing NTP traffic from keeping the connection open
 set filter alive 2 permit 0/0 0/0</pre><p>詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> 内の <code class="literal">PACKET FILTERING</code>
	セクション、および <code class="filename">/usr/share/examples/ppp/</code>
	内の例を参照してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">小さい番号のポートをブロックするインターネットアクセスプロバイダでは、
	  応答があなたのマシンに到達しないので
	  NTP がきちんと動作しない場合もあります。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95357904"></a>22.12.6. さらなる情報源</h3></div></div></div><p>NTP サーバに関する文書は HTML 形式で
	<code class="filename">/usr/share/doc/ntp/</code> にあります。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-natd"></a>22.13. ネットワークアドレス変換 (NAT)</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lee</span> <span class="firstname">Chern</span> [FAMILY Given]</span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natoverview"></a>22.13.1. 概要</h3></div></div></div><a id="idp95362896" class="indexterm"></a><p>一般に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> として知られている FreeBSD
	ネットワークアドレス変換デーモンは、
	raw IP パケットを受信して、
	ソースアドレスをローカルマシンに変更し、
	そのパケットを外向きの IP パケットの流れに再注入するデーモンです。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> は、
	データが戻ってきたときに、データの本来の場所を判別し、
	もともと要求した相手へデータを返すことができるようにソース IP
	アドレスとポートを変更します。</p><a id="idp95369936" class="indexterm"></a><a id="idp95370448" class="indexterm"></a><p>NAT の最も一般的な使用法は、
	一般的にはインターネット接続共有として知られているものを実行することです。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natsetup"></a>22.13.2. 設定</h3></div></div></div><p>IPv4 の IP 空間が足りなくなりつつあること、および、
	ケーブルや DSL のような高速の加入者回線利用者の増加によって、
	人々はますますインターネット接続を共有する手段を必要としています。
	一つの接続および
	IP アドレスを通していくつものコンピュータを回線に接続する能力がある
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> が合理的な選択になります。</p><p>もっともよくあるのは、ユーザが 1 つの
	IP アドレスでケーブルまたは DSL 回線に接続されたマシンを持っており、
	インターネットへのアクセスを
	LAN 経由でいくつかのコンピュータに提供するのに、
	この接続されたコンピュータを使用したいという場合です。</p><p>そのためには、インターネットに接続されている FreeBSD
	マシンはゲートウェイとして動作しなければなりません。
	このゲートウェイマシンは 2 つの NIC が必要です
	(1 つはインターネットルータへ接続するためで、もう 1 つは
	LAN に接続するためです)。
	LAN 上のすべてのマシンはハブまたはスイッチを通して接続されます。</p><div class="mediaobject"><img src="advanced-networking/natd.png" alt="ネットワークレイアウト" /></div><p>インターネット接続を共有するために、
	このような設定がよく使用されています。
	<acronym class="acronym">LAN</acronym> 内のマシンの
	1 台がインターネットに接続しています。
	残りのマシンはその <span class="quote">「<span class="quote">ゲートウェイ</span>」</span>
	マシンを通してインターネットにアクセスします。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natdkernconfiguration"></a>22.13.3. 設定</h3></div></div></div><a id="idp95379280" class="indexterm"></a><p>次のオプションがカーネルコンフィギュレーションファイルに必要です。</p><pre class="programlisting">options IPFIREWALL
options IPDIVERT</pre><p>さらに、次のオプションを入れてもよいでしょう。</p><pre class="programlisting">options IPFIREWALL_DEFAULT_TO_ACCEPT
options IPFIREWALL_VERBOSE</pre><p>下記の設定を <code class="filename">/etc/rc.conf</code>
	で行わなければなりません。</p><pre class="programlisting">gateway_enable="YES"
firewall_enable="YES"
firewall_type="OPEN"
natd_enable="YES"
natd_interface="<em class="replaceable"><code>fxp0</code></em>"
natd_flags=""</pre><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>gateway_enable="YES"</td><td>マシンがゲートウェイとして動作するように設定します。
		<code class="command">sysctl net.inet.ip.forwarding=1</code>
		コマンドを実行しても同じ効果がえられます。</td></tr><tr><td>firewall_enable="YES"</td><td><code class="filename">/etc/rc.firewall</code>
		にあるファイアウォールルールを起動時に有効にします。</td></tr><tr><td>firewall_type="OPEN"</td><td>これはあらかじめ定義されている、
		すべてのパケットを通すファイアウォールルールセットを指定します。
		他のタイプについては <code class="filename">/etc/rc.firewall</code>
		を参照してください。</td></tr><tr><td>natd_interface="fxp0"</td><td>パケットを転送するインタフェースを指定します
		(インターネットに接続されたインタフェース)。</td></tr><tr><td>natd_flags=""</td><td>起動時に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> に渡される追加の引数</td></tr></tbody></table></div><p><code class="filename">/etc/rc.conf</code>
	に前述したオプションを定義すると、起動時に
	<code class="command">natd -interface fxp0</code> が実行されます。
	これは手動でも実行できます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">オプションの定義に <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a>
	  のコンフィグレーションファイルを使うこともできます。
	  この場合には、<code class="filename">/etc/rc.conf</code> に以下の行を追加し、
	  コンフィグレーションファイルを定義してください。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">natd_flags="-f /etc/natd.conf"</pre><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">/etc/natd.conf</code>
          ファイルでは、一行ごとにオプションを設定します。たとえば、
	  次節の例では以下のような行を含むファイルを用意してください。</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">redirect_port tcp 192.168.0.2:6667 6667
redirect_port tcp 192.168.0.3:80 80</pre><p xmlns="http://www.w3.org/1999/xhtml">コンフィグレーションファイルに関する、より詳細な情報については、
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> マニュアルページの <code class="option">-f</code>
	  オプションを調べてください。</p></div><p>LAN にぶら下がっているマシンおよびインタフェースのそれぞれには
	<a class="link" href="ftp://ftp.isi.edu/in-notes/rfc1918.txt" target="_top">RFC 1918</a>
	で定義されているプライベートネットワーク空間の
	IP アドレス番号を割り当て、デフォルトゲートウェイアドレスを
	<span class="application">natd</span> マシンの内側の
	IP アドレスにすべきです。</p><p>たとえば LAN 側のクライアント
	<code class="systemitem">A</code> および <code class="systemitem">B</code> は
	IP アドレス <code class="systemitem">192.168.0.2</code> および
	<code class="systemitem">192.168.0.3</code> を割り当てられており、
	natd マシンの LAN インタフェースは IP アドレス
	<code class="systemitem">192.168.0.1</code>
	を割り当てられています。
	クライアント <code class="systemitem">A</code> および <code class="systemitem">B</code>
	のデフォルトゲートウェイは <span class="application">natd</span>
	マシンの <code class="systemitem">192.168.0.1</code>
	に設定されなければなりません。
	<span class="application">natd</span> マシンの外部、
	またはインターネットインタフェースは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a>
	の動作に際して特別の修正を必要としません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natdport-redirection"></a>22.13.4. ポート転送</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> の短所は、インターネットから
	LAN 内のクライアントにアクセスできないということです。
	LAN 内のクライアントは外部に向けて接続を行うことはできますが、
	入って来るものを受け取ることができません。これは、LAN
	クライアントのどれかでインターネットサービスを動かそうとした場合に、
	問題になります。これを何とかする単純な方法は
	<span class="application">natd</span> マシンから LAN クライアントへ、
	選択したインターネットポートを転送することです。</p><p>たとえばクライアント <code class="systemitem">A</code> で実行されている
	IRC サーバがあり、
	クライアント <code class="systemitem">B</code> 上で実行されている
	web サーバがあるとします。
	これが正しく動作するには、ポート 6667 (IRC) および 80 (web)
	への接続を対応するマシンに転送しなければなりません。</p><p><code class="option">-redirect_port</code> に適切なオプションを加えて
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> に渡さなければなりません。
	書式は以下のとおりです。</p><pre class="programlisting">     -redirect_port proto targetIP:targetPORT[-targetPORT]
                 [aliasIP:]aliasPORT[-aliasPORT]
                 [remoteIP[:remotePORT[-remotePORT]]]</pre><p>上記の例では、引数は以下のようにします。</p><pre class="programlisting">    -redirect_port tcp 192.168.0.2:6667 6667
    -redirect_port tcp 192.168.0.3:80 80</pre><p>これで適切な <span class="emphasis"><em>tcp</em></span> ポートが
	LAN クライアントマシンに転送されます。</p><p><code class="option">-redirect_port</code>
	引数は個々のポートを対応させるポート範囲を示すのに使えます。
	たとえば <em class="replaceable"><code>tcp 192.168.0.2:2000-3000 2000-3000</code></em>
	は 2000 番から 3000番ポートに受け取られたすべての接続を、
	クライアント <code class="systemitem">A</code> 上の
	2000 番から 3000 番に転送します。</p><p>これらのオプションは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> を直接実行するか、
	<code class="filename">/etc/rc.conf</code> 内の
	<code class="literal">natd_flags=""</code> オプションで設定するか、
	もしくはコンフィグレーションファイルから渡してください。</p><p>設定オプションの詳細については
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natdaddress-redirection"></a>22.13.5. アドレス転送</h3></div></div></div><a id="idp95458896" class="indexterm"></a><p>複数の IP アドレスが利用可能ですが、
	それらが 1 台のマシン上になければならないときには、
	アドレス転送が便利です。
	これを用いれば <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> は LAN クライアントのそれぞれに外部
	IP アドレスを割り当てることができます。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> は LAN
	クライアントから外部へ出て行くパケットを適切な外部の
	IP アドレスで書き直し、
	そして特定の IP アドレスに対してやって来るトラフィックのすべてを、
	指定された LAN クライアントに転送します。
	これは静的 NAT としても知られています。
	たとえば <code class="systemitem">128.1.1.1</code>,
	<code class="systemitem">128.1.1.2</code> および
	<code class="systemitem">128.1.1.3</code> の IP アドレスが、
	<span class="application">natd</span>
	ゲートウェイマシンに属しているとします。
	<code class="systemitem">128.1.1.2</code> および
	<code class="systemitem">128.1.1.3</code> は
	LAN クライアントの <code class="systemitem">A</code> および <code class="systemitem">B</code>
	に転送される一方で、<code class="systemitem">128.1.1.1</code> は
	<span class="application">natd</span> ゲートウェイマシンの外部
	IP アドレスとして使用することができます。</p><p><code class="option">-redirect_address</code> の書式は以下のとおりです。</p><pre class="programlisting">-redirect_address localIP publicIP</pre><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>localIP</td><td>LAN クライアントの内部 IP アドレス</td></tr><tr><td>publicIP</td><td>LAN クライアントに対応する外部 IP アドレス</td></tr></tbody></table></div><p>上記の例では引数は以下のようになります。</p><pre class="programlisting">-redirect_address 192.168.0.2 128.1.1.2
-redirect_address 192.168.0.3 128.1.1.3</pre><p><code class="option">-redirect_port</code> と同様に、これらの引数は
	<code class="filename">/etc/rc.conf</code> 内の
	<code class="literal">natd_flags=""</code> オプションで設定するか、
	コンフィグレーションファイルから渡すことで指定できます。
	アドレス転送では、
	特定の IP アドレスで受け取られたデータはすべて転送されるので、
	port 転送は必要ありません。</p><p><span class="application">natd</span> マシン上の外部 IP アドレスは、
	アクティブで外部インタフェースにエイリアスされていなければなりません。
	やりかたは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> を参照してください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-inetd"></a>22.14. <span class="application">inetd</span> <span class="quote">「<span class="quote">スーパサーバ</span>」</span></h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lee</span> <span class="firstname">Chern</span> [FAMILY Given]</span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-overview"></a>22.14.1. 概観</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> は複数のデーモンに対する接続を制御するので、
	<span class="quote">「<span class="quote">インターネットスーパサーバ</span>」</span> と呼ばれます。
	ネットワークサービスを提供するプログラムは、
	一般的にデーモン呼ばれます。<span class="application">inetd</span>
	は他のデーモンを管理するサーバを努めます。
	接続が <span class="application">inetd</span> によって受け付けられると、
	<span class="application">inetd</span>
	は接続がどのデーモンに対するものか判断して、
	そのデーモンを起動し、ソケットを渡します。
	<span class="application">inetd</span> を 1 つ実行することにより、
	それぞれのデーモンをスタンドアロンモードで実行することに比べ、
	全体としてのシステム負荷を減らします。</p><p>基本的に、<span class="application">inetd</span>
	は他のデーモンを起動するために使用されます。しかし、
	<span class="application">chargen</span>, <span class="application">auth</span>
	および <span class="application">daytime</span>
	のようなささいなプロトコルは直接扱われます。</p><p>この節ではコマンドラインオプションおよび設定ファイル
	<code class="filename">/etc/inetd.conf</code> による
	<span class="application">inetd</span> の設定の基本を説明します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-settings"></a>22.14.2. 設定</h3></div></div></div><p><span class="application">inetd</span> は
	<code class="filename">/etc/rc.conf</code> の仕組によって初期化されます。
	デフォルトでは <code class="literal">inetd_enable</code> オプションは
	<span class="quote">「<span class="quote">NO</span>」</span> に設定されています。
	しかし多くの場合、<span class="application">sysinstall</span>
	でセキュリティプロファイルを
	medium に設定することにより、有効化されます。
	</p><pre class="programlisting">inetd_enable="YES"</pre><p> または
	</p><pre class="programlisting">inetd_enable="NO"</pre><p> を
	<code class="filename">/etc/rc.conf</code> に置くことで、起動時に
	<span class="application">inetd</span> を有効または無効にできます。</p><p>さらに <code class="literal">inetd_flags</code> オプションによって、
	いろいろなコマンドラインオプションを
	<span class="application">inetd</span> に渡すことができます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-cmdline"></a>22.14.3. コマンドラインオプション</h3></div></div></div><p><span class="application">inetd</span> 書式</p><p><code class="option">     inetd [-d] [-l] [-w] [-W] [-c maximum] [-C rate] [-a address | hostname]
           [-p filename] [-R rate] [configuration file]</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">-d</span></dt><dd><p>デバッグモードにします。</p></dd><dt><span class="term">-l</span></dt><dd><p>成功した接続のログをとります。</p></dd><dt><span class="term">-w</span></dt><dd><p>外部サービスに対して TCP Wrapper を有効にします
	      (デフォルト)。</p></dd><dt><span class="term">-W</span></dt><dd><p><span class="application">inetd</span>
	      組み込みの内部サービスに対して TCP Wrapper を有効にします
	      (デフォルト)。</p></dd><dt><span class="term">-c maximum</span></dt><dd><p>サービス毎に同時に起動可能な最大値のデフォルトを指定します。
	      デフォルトでは無制限です。サービスごとに指定する
	      <code class="option">max-child</code>
	      パラメータで上書きできます。</p></dd><dt><span class="term">-C rate</span></dt><dd><p>1 分間にひとつの IP アドレスから起動されるサービスの、
	      最大値のデフォルトを指定します。デフォルトは無制限です。
	      サービスごとに指定する
	      <code class="option">max-connections-per-ip-per-minute</code>
	      パラメータで上書きできます。</p></dd><dt><span class="term">-R rate</span></dt><dd><p>あるサービスを 1 分間に起動できる最大の数を指定します。
	      デフォルトは 256 です。rate に 0 を指定すると、
	      起動可能な数は無制限になります。</p></dd><dt><span class="term">-a</span></dt><dd><p>バインドする IP アドレスを一つ指定します。
	      代わりにホスト名も指定できます。この場合、ホスト名に対応する
	      IPv4 または IPv6 アドレスが使用されます。通常
	      <span class="application">inetd</span> が <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>
	      内で起動される時点で、ホスト名が指定されます。この場合、
	      ホスト名は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a> 環境に対応するものです。</p><p>ホスト名指定が使用され、
	      IPv4 および IPv6 両方にバインドしたい場合、
	      <code class="filename">/etc/inetd.conf</code> の各サービスに対して、
	      各バインドに対する適切なプロトコルのエントリが必要です。
	      たとえば TCP ベースのサービスは、
	      ひとつはプロトコルに <span class="quote">「<span class="quote">tcp4</span>」</span> を使用し、
	      もう一つは <span class="quote">「<span class="quote">tcp6</span>」</span> を使用する、
	      2 つのエントリが必要です。</p></dd><dt><span class="term">-p</span></dt><dd><p>デフォルトとは異なる
	       PID を保持するファイルを指定します。</p></dd></dl></div><p><code class="filename">/etc/rc.conf</code> 内の
	<code class="literal">inetd_flags</code> オプションを用いて、これらのオプションを
	<span class="application">inetd</span> に渡すことができます。デフォルトでは
	<code class="literal">inetd_flags</code> は <span class="quote">「<span class="quote">-wW</span>」</span> に設定されており、
	これは <span class="application">inetd</span>
	の内部および外部サービスに対して TCP wrapper を有効にします。
	初心者ユーザはこれらのパラメータを変更する必要は通常ありませんし、
	<code class="filename">/etc/rc.conf</code> に入力する必要もありません。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">外部サービスは、接続を受け取ったときに起動される
	  <span class="application">inetd</span> の外部にあるデーモンで、
	  それに対して、内部サービスは <span class="application">inetd</span>
	  自身が提供する内部のデーモンです。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-conf"></a>22.14.4. <code class="filename">inetd.conf</code></h3></div></div></div><p><span class="application">inetd</span> の設定は
	<code class="filename">/etc/inetd.conf</code>
	ファイルによって制御されます。</p><p><code class="filename">/etc/inetd.conf</code> が変更されたときは、
	以下のように <span class="application">inetd</span> プロセスに
	HangUP シグナルを送ることにより、<span class="application">inetd</span>
	に設定ファイルを再読み込みさせられます。</p><div class="example"><a id="network-inetd-hangup"></a><div class="example-title">例22.4 <span class="application">inetd</span> への HangUP シグナル送付</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat /var/run/inetd.pid`</code></strong></pre></div></div><br class="example-break" /><p>設定ファイルのそれぞれの行は、
	個々のデーモンについての指示になります。
	ファイル内のコメントは <span class="quote">「<span class="quote">#</span>」</span> が先頭につきます。
	<code class="filename">/etc/inetd.conf</code> の書式は以下のとおりです。</p><pre class="programlisting">service-name
socket-type
protocol
{wait|nowait}[/max-child[/max-connections-per-ip-per-minute]]
user[:group][/login-class]
server-program
server-program-arguments</pre><p>IPv4 を利用する <span class="application">ftpd</span>
	デーモンのエントリの例です。</p><pre class="programlisting">ftp     stream  tcp     nowait  root    /usr/libexec/ftpd       ftpd -l</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">service-name</span></dt><dd><p>これは特定のデーモンのサービス名です。
	      これは <code class="filename">/etc/services</code>
	      内のサービスリストに対応していなければなりません。
	      これは <span class="application">inetd</span>
	      がどのポートで受け付けなければならないかを決定します。
	      新しいサービスが作成された場合、まずはじめに
	      <code class="filename">/etc/services</code>
	      内に記載しなければなりません。</p></dd><dt><span class="term">socket-type</span></dt><dd><p><code class="literal">stream</code>,
	      <code class="literal">dgram</code>, <code class="literal">raw</code> または
	      <code class="literal">seqpacket</code> のどれかを指定します。
	      <code class="literal">stream</code>
	      はコネクションに基づいた TCP デーモンに使用しなければならず、
	      一方で <code class="literal">dgram</code> は
	      UDP 転送プロトコルを利用したデーモンに対して使用されます。</p></dd><dt><span class="term">protocol</span></dt><dd><p>次のうちのどれか 1 つを指定します。</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>プロトコル</th><th>説明</th></tr></thead><tbody><tr><td>tcp, tcp4</td><td>TCP IPv4</td></tr><tr><td>udp, udp4</td><td>UDP IPv4</td></tr><tr><td>tcp6</td><td>TCP IPv6</td></tr><tr><td>udp6</td><td>UDP IPv6</td></tr><tr><td>tcp46</td><td>TCP IPv4 および v6 の両方</td></tr><tr><td>udp46</td><td>UDP IPv4 および v6 の両方</td></tr></tbody></table></div></dd><dt><span class="term">{wait|nowait}[/max-child[/max-connections-per-ip-per-minute]]</span></dt><dd><p><code class="option">wait|nowait</code> は
	      <span class="application">inetd</span> から起動したデーモンが、
	      自分のソケットを管理できるかどうかを示します。
	      通常マルチスレッド化されている stream ソケットデーモンは
	      <code class="option">nowait</code> を使用するべきである一方、
	      <code class="option">dgram</code> ソケットタイプは
	      wait オプションを使用しなければなりません。
	      <code class="option">nowait</code>
	      は新しいソケット毎に子のデーモンを起動する一方で、
	      <code class="option">wait</code>
	      は通常複数のソケットを 1 つのデーモンに渡します。</p><p><span class="application">inetd</span>
	      が起動できる子のデーモンの最大数は
	      <code class="option">max-child</code> オプションで設定できます。
	      特定のデーモンに対して、起動する数が
	      10 までという制限が必要な場合、
	      <code class="option">nowait</code> の後に <code class="literal">/10</code>
	      を置きます。</p><p><code class="option">max-child</code> に加えて、他にある
	      1 つの場所から特定のデーモンへの最大接続数を制限するオプションが利用できます。
	      <code class="option">max-connections-per-ip-per-minute</code>
	      がそれです。ここに 10 を指定すると、特定の
	      IP アドレスからの特定のサービスへの接続を
	      1 分間につき 10 回に制限します。
	      これは故意または故意でない資源の浪費および、
	      マシンへのサービス不能 (DoS) 攻撃を防ぐのに有用です。</p><p><code class="option">wait</code> または
	      <code class="option">nowait</code> はこの欄に必ず必要です。
	      <code class="option">max-child</code> および
	      <code class="option">max-connections-per-ip-per-minute</code>
	      は任意です。</p><p><code class="option">max-child</code> または
	      <code class="option">max-connections-per-ip-per-minute</code>
	      制限をかけない
	      stream タイプのマルチスレッドデーモンの設定は
	      <code class="literal">nowait</code> になります。</p><p>作成できる子プロセスの上限が 10 である同じデーモンの設定は
	      <code class="literal">nowait/10</code> になります。</p><p>さらに、
	      1 分間に IP アドレスあたりの接続制限が 20、
	      子プロセスの上限が 10 である同じデーモンの設定は
	      <code class="literal">nowait/10/20</code> になります。</p><p>以下のように、これらのオプションはすべて
	      <span class="application">fingerd</span>
	      デーモンのデフォルト設定に使われています。</p><pre class="programlisting">finger stream  tcp     nowait/3/10 nobody /usr/libexec/fingerd fingerd -s</pre></dd><dt><span class="term">user</span></dt><dd><p>user はあるデーモンが実行するときのユーザ名を指定します。
	      一般的にデーモンは <code class="systemitem">root</code>
	      ユーザとして実行します。セキュリティを考慮して、
	      いくつかのサーバは <code class="systemitem">daemon</code> ユーザ、
	      または最低の権限が与えられている <code class="systemitem">nobody</code>
	      ユーザとして実行することも多く見られます。</p></dd><dt><span class="term">server-program</span></dt><dd><p>接続を受け取ったときに実行するデーモンのフルパスです。
	      デーモンが <span class="application">inetd</span>
	      によって内部的に提供されるサービスの場合
	      <code class="option">internal</code> を使用します。</p></dd><dt><span class="term">server-program-arguments</span></dt><dd><p>ここには、起動するときにデーモンに渡される、
	      argv[0] から始まる引数を指定して、
	      <code class="option">server-program</code> と協調して動作します。
	      <span class="application">mydaemon -d</span> がコマンドラインの場合、
	      <code class="option">server program arguments</code> の値に
	      <code class="literal">mydaemon -d</code> を指定します。
	      また、デーモンが内部サービスの場合、ここに
	      <code class="option">internal</code> を指定します。</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-security"></a>22.14.5. セキュリティ</h3></div></div></div><p>インストールの時に選択したセキュリティプロファイルによっては、
	多くの <span class="application">inetd</span>
	のデーモンがデフォルトで有効になっているかもしれません。
	あるデーモンが特に必要でない場合には、それを無効にしてください!
	問題となっているデーモンが記述されている行の先頭に
	<span class="quote">「<span class="quote">#</span>」</span> をおいて <a class="link" href="#network-inetd-hangup" title="例22.4 inetd への HangUP シグナル送付">inetd
	  にハングアップシグナル</a>を送ってください。
	<span class="application">fingerd</span> のようないくつかのデーモンは、
	動かそうとすべきではないかもしれません。なぜなら、
	それらは攻撃者に対してあまりにも多くの情報を与えるからです。</p><p>セキュリティをあまり考慮せず、
	接続試行に対してタイムアウトまでの時間が長いか、
	タイムアウトしないデーモンもあります。
	これは、特定のデーモンに攻撃者がゆっくり接続要求を送ることによって、
	利用可能なリソースを飽和させることを可能にします。ある種のデーモンに
	<code class="option">ip-per-minute</code> および <code class="option">max-child</code>
	制限を設けることはよい考えかもしれません。</p><p>TCP wrapper はデフォルトで有効です。
	<span class="application">inetd</span>
	から起動されるさまざまなデーモンに対して
	TCP 制限を設けることの詳細については
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts_access&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts_access</span>(5)</span></a> マニュアルページを参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-misc"></a>22.14.6. その他</h3></div></div></div><p><span class="application">daytime</span>,
	<span class="application">time</span>,
	<span class="application">echo</span>,
	<span class="application">discard</span>,
	<span class="application">chargen</span> および
	<span class="application">auth</span> はすべて
	<span class="application">inetd</span>
	が内部的に提供するサービスです。</p><p><span class="application">auth</span> サービスは identity
	(ident, identd) ネットワークサービスを提供し、
	ある程度設定可能です。</p><p>詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> マニュアルを参照してください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-plip"></a>22.15. パラレルライン IP (PLIP)</h2></div></div></div><a id="idp95630800" class="indexterm"></a><a id="idp95631312" class="indexterm"></a><p>PLIP はパラレルポート間で TCP/IP 通信を可能にします。
      これはネットワークカードの無いマシンやノートパソコンにインストールするときに役に立ちます。
      この節では以下について説明します。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>パラレル (ラップリンク または パラレルクロス)
	  ケーブルの作成。</p></li><li class="listitem"><p>2 台のコンピュータの PLIP による接続。</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-create-parallel-cable"></a>22.15.1. パラレル (クロス) ケーブルの作成</h3></div></div></div><p>コンピュータ用品店のほとんどでパラレル (クロス)
	ケーブルを購入することができます。
	購入することができないか、
	単にケーブルがどのような構造であるか知りたい場合は、
	次の表に通常のパラレルプリンタケーブルをもとに作成する方法が示されています。</p><div class="table"><a id="idp95639504"></a><div class="table-title">表22.1 ネットワーク向けのパラレル (クロス) ケーブル結線</div><div class="table-contents"><table summary="ネットワーク向けのパラレル (クロス) ケーブル結線" border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>A-名称</th><th>A-端</th><th>B-端</th><th>説明</th><th>Post/Bit</th></tr></thead><tbody><tr><td><div class="literallayout"><p>DATA0<br />
-ERROR</p></div></td><td><div class="literallayout"><p>2<br />
15</p></div></td><td><div class="literallayout"><p>15<br />
2</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x01<br />
1/0x08</p></div></td></tr><tr><td><div class="literallayout"><p>DATA1<br />
+SLCT</p></div></td><td><div class="literallayout"><p>3<br />
13</p></div></td><td><div class="literallayout"><p>13<br />
3</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x02<br />
1/0x10</p></div></td></tr><tr><td><div class="literallayout"><p>DATA2<br />
+PE</p></div></td><td><div class="literallayout"><p>4<br />
12</p></div></td><td><div class="literallayout"><p>12<br />
4</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x04<br />
1/0x20</p></div></td></tr><tr><td><div class="literallayout"><p>DATA3<br />
-ACK</p></div></td><td><div class="literallayout"><p>5<br />
10</p></div></td><td><div class="literallayout"><p>10<br />
5</p></div></td><td>Strobe</td><td><div class="literallayout"><p>0/0x08<br />
1/0x40</p></div></td></tr><tr><td><div class="literallayout"><p>DATA4<br />
BUSY</p></div></td><td><div class="literallayout"><p>6<br />
11</p></div></td><td><div class="literallayout"><p>11<br />
6</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x10<br />
1/0x80</p></div></td></tr><tr><td>GND</td><td>18-25</td><td>18-25</td><td>GND</td><td>-</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-plip-setup"></a>22.15.2. PLIP の設定</h3></div></div></div><p>はじめに、ラップリンクケーブルを入手しなければなりません。
	次に、両方のコンピュータのカーネルが <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lpt</span>(4)</span></a>
	ドライバ対応であることを確認してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>grep lp /var/run/dmesg.boot</code></strong>
lpt0: &lt;Printer&gt; on ppbus0
lpt0: Interrupt-driven port</pre><p>パラレルポートは割り込み駆動ポートでなければなりません。
	FreeBSD 4.X では、
	以下のような行がカーネルコンフィギュレーションファイル内になければならないでしょう。</p><pre class="programlisting">device ppc0 at isa? irq 7</pre><p>FreeBSD 5.X では <code class="filename">/boot/device.hints</code>
	ファイルに以下の行がなければならないでしょう。</p><pre class="programlisting">hint.ppc.0.at="isa"
hint.ppc.0.irq="7"</pre><p>それからカーネルコンフィギュレーションファイルに
	<code class="literal">device plip</code> という行があるか、または
	<code class="filename">plip.ko</code>
	カーネルモジュールが読み込まれていることを確認してください。
	どちらの場合でも <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> コマンドを直接実行したときに、
	パラレルネットワークインタフェースが現れるはずです。
	FreeBSD 4.X ではこのようになります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig lp0</code></strong>
lp0: flags=8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500</pre><p>FreeBSD 5.X ではこのようになります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig plip0</code></strong>
plip0: flags=8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">パラレルインタフェースに対して用いられるデバイス名は
	  FreeBSD 4.X
	  (<code class="filename">lpX</code>) と
	  FreeBSD 5.X
	  (<code class="filename">plipX</code>)
	  間で異なります。</p></div><p>両方のコンピュータのパラレルインタフェースにラップリンクケーブルを接続します。</p><p>両方のネットワークインタフェースパラメータを
	<code class="systemitem">root</code> で設定します。
	たとえば、FreeBSD 4.X を動作させている <code class="systemitem">host1</code> と
	FreeBSD 5.X を動作させている <code class="systemitem">host2</code>
	の両ホストを接続したい場合は次のようにします。</p><pre class="programlisting">                 host1 &lt;-----&gt; host2
IP Address    10.0.0.1      10.0.0.2</pre><p>次のコマンドで <code class="systemitem">host1</code>
	上のインタフェースを設定します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig lp0 10.0.0.1 10.0.0.2</code></strong></pre><p>次のコマンドで <code class="systemitem">host2</code>
	上のインタフェースを設定します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig plip0 10.0.0.2 10.0.0.1</code></strong></pre><p>さて、これで接続が確立したはずです。詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lp</span>(4)</span></a>
	および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lpt</span>(4)</span></a> マニュアルページをご覧ください。</p><p>さらに<code class="filename">/etc/hosts</code>
	に両ホストを加えるとよいでしょう。</p><pre class="programlisting">127.0.0.1               localhost.my.domain localhost
10.0.0.1                host1.my.domain host1
10.0.0.2                host2.my.domain</pre><p>接続がうまくいっているか確かめるために、
	両方のホスト上で互いを ping してください。
	たとえば <code class="systemitem">host1</code> で以下を実行します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig lp0</code></strong>
lp0: flags=8851&lt;UP,POINTOPOINT,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 10.0.0.1 --&gt; 10.0.0.2 netmask 0xff000000
<code class="prompt">#</code> <strong class="userinput"><code>netstat -r</code></strong>
Routing tables

Internet:
Destination        Gateway          Flags     Refs     Use      Netif Expire
host2              host1              UH          0       0       lp0
<code class="prompt">#</code> <strong class="userinput"><code>ping -c 4 host2</code></strong>
PING host2 (10.0.0.2): 56 data bytes
64 bytes from 10.0.0.2: icmp_seq=0 ttl=255 time=2.774 ms
64 bytes from 10.0.0.2: icmp_seq=1 ttl=255 time=2.530 ms
64 bytes from 10.0.0.2: icmp_seq=2 ttl=255 time=2.556 ms
64 bytes from 10.0.0.2: icmp_seq=3 ttl=255 time=2.714 ms

--- host2 ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max/stddev = 2.530/2.643/2.774/0.103 ms</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ipv6"></a>22.16. IPv6</h2></div><div><span class="authorgroup">原作: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Kaplan</span> <span class="firstname">Aaron</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">再構成と追記: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span> <span class="firstname">Tom</span> [FAMILY Given]</span>. </span></div></div></div><p>IPv6 (IPng <span class="quote">「<span class="quote">IP next generation</span>」</span> とも呼ばれます)
      は、著名な IP プロトコル
      (<acronym class="acronym">IPv4</acronym> とも呼ばれます) の新しいバージョンです。
      他の最新の *BSD システムと同様に FreeBSD は <acronym class="acronym">KAME</acronym>
      IPv6 リファレンス実装を含んでいます。したがって、あなたの
      FreeBSD システムには IPv6を試すために必要なものすべてが備わっています。
      この節では IPv6 の設定と実行に関して説明します。</p><p>1990 年代のはじめには、人々は IPv4
      アドレス空間が急速に縮小していることに気づくようになりました。
      インターネットの成長率が増大するにしたがって、
      2 つの心配ごとがでてきました。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>アドレスの枯渇。
	  今日では、プライベートアドレス空間
	  (<code class="systemitem">10.0.0.0/8</code>,
	  <code class="systemitem">192.168.0.0/24</code> など)
	  およびネットワークアドレス変換 (<acronym class="acronym">NAT</acronym>)
	  が使用されているので、それほど心配されていません。</p></li><li class="listitem"><p>ルーティングテーブルのエントリが大きくなりすぎていました。
	  これは今でも心配な事柄です。</p></li></ul></div><p>IPv6 は以下の、そしてその他多くの問題を扱います。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>128 bit アドレス空間。言い換えると、理論上
	  340,282,366,920,938,463,463,374,607,431,768,211,456
	  個のアドレスが利用可能です。これは地球上の一平方メータあたり、
	  およそ 6.67 * 10^27 個の IPv6 アドレスがあることを意味します。</p></li><li class="listitem"><p>ルータは、
	  ルーティングテーブル内にネットワーク集約アドレスだけを格納することで、
	  ルーティングテーブルの平均を 8192 項目程度に減らします。</p></li></ul></div><p>他にも以下のように IPv6 の便利な機能がたくさんあります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>アドレス自動設定 (RFC2462)</p></li><li class="listitem"><p>エニーキャスト (anycast) アドレス
	  (<span class="quote">「<span class="quote">one-out-of many</span>」</span>
	  訳注: 複数の異なるノードが応答する 1 つのアドレス。
	  RFC2526 を参照してください)。</p></li><li class="listitem"><p>強制マルチキャストアドレス</p></li><li class="listitem"><p>IPsec (IP セキュリティ)</p></li><li class="listitem"><p>シンプルなヘッダ構造</p></li><li class="listitem"><p>モバイル <acronym class="acronym">IP</acronym></p></li><li class="listitem"><p>IPv4 から IPv6 への移行手段</p></li></ul></div><p>詳細については下記を参照してください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.sun.com" target="_top">Sun.com</a>
	  の IPv6 概観</p></li><li class="listitem"><p><a class="link" href="http://www.ipv6.org" target="_top">IPv6.org</a></p></li><li class="listitem"><p><a class="link" href="http://www.kame.net" target="_top">KAME.net</a></p></li><li class="listitem"><p><a class="link" href="http://www.6bone.net" target="_top">6bone.net</a></p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95785808"></a>22.16.1. IPv6 アドレスの背景</h3></div></div></div><p>いくつか違うタイプの IPv6 アドレスがあります。
	ユニキャスト (Unicast)、エニーキャスト (Anycast)
	およびマルチキャスト (Multicast) です。</p><p>ユニキャストアドレスは周知のアドレスです。
	ユニキャストアドレスへ送られたパケットは、
	まさにそのアドレスに属するインターフェースに到着します。</p><p>エニーキャストアドレスはユニキャストアドレスと構文上判別不可能ですが、
	インタフェース群に宛てられています。
	エニーキャストアドレスに送られたパケットは (ルータメトリック的に)
	最も近いインタフェースに到着します。
	エニーキャストアドレスはルータでしか使ってはいけません。</p><p>マルチキャストアドレスはインタフェース群を識別します。
	マルチキャストアドレスに送られたパケットは、
	マルチキャスト群に属するすべてのインタフェースに到着します。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">IPv4 のブロードキャストアドレス
	  (通常 <code class="systemitem">xxx.xxx.xxx.255</code>)
	  は、IPv6 ではマルチキャストアドレスで表現されます。</p></div><div class="table"><a id="idp95789392"></a><div class="table-title">表22.2 予約された IPv6 アドレス</div><div class="table-contents"><table summary="予約された IPv6 アドレス" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>IPv6 アドレス</th><th>プレフィックス長 (ビット)</th><th>説明</th><th>備考</th></tr></thead><tbody><tr><td><code class="systemitem">::</code></td><td>128 ビット</td><td>不特定</td><td>IPv4 の
		<code class="systemitem">0.0.0.0</code> 参照</td></tr><tr><td><code class="systemitem">::1</code></td><td>128 ビット</td><td>ループバックアドレス</td><td>IPv4 の
		<code class="systemitem">127.0.0.1</code> 参照</td></tr><tr><td><code class="systemitem">::00:xx:xx:xx:xx</code></td><td>96 ビット</td><td>IPv4 埋め込みアドレス</td><td>下位の 32 ビットは IPv4 アドレスです。
		<span class="quote">「<span class="quote">IPv4 互換 IPv6 アドレス</span>」</span> とも呼ばれます。</td></tr><tr><td><code class="systemitem">::ff:xx:xx:xx:xx</code></td><td>96 ビット</td><td>IPv4 射影 IPv6 アドレス</td><td>下位の 32 ビットは IPv4 アドレスです。
		IPv6 に対応していないホストに対するアドレスです。</td></tr><tr><td><code class="systemitem">fe80::</code>
		- <code class="systemitem">feb::</code></td><td>10 ビット</td><td>リンクローカル</td><td>IPv4 のループバックアドレス参照</td></tr><tr><td><code class="systemitem">fec0::</code>
		- <code class="systemitem">fef::</code></td><td>10 ビット</td><td>サイトローカル</td><td> </td></tr><tr><td><code class="systemitem">ff::</code></td><td>8 ビット</td><td>マルチキャスト</td><td> </td></tr><tr><td><code class="systemitem">001</code> (基数 2)</td><td>3 ビット</td><td>グローバルユニキャスト</td><td>すべてのグローバルユニキャストアドレスはこのプールから割り当てられます。
		はじめの 3 ビットは <span class="quote">「<span class="quote">001</span>」</span> です。</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95813200"></a>22.16.2. IPv6 アドレスを読む</h3></div></div></div><p>正規の書式では
	<code class="systemitem">x:x:x:x:x:x:x:x</code>
	と表されます。それぞれの
	<span class="quote">「<span class="quote">x</span>」</span> は 16 ビットの 16 進数です。たとえば
	<code class="systemitem">FEBC:A574:382B:23C1:AA49:4592:4EFE:9982</code>
	となります。</p><p>すべてゼロの長い部分文字列がアドレス内によく現れます。
	そのため、そのような部分文字列は <span class="quote">「<span class="quote">::</span>」</span>
	に短縮することができます。
	たとえば、<code class="systemitem">fe80::1</code> は正規形の
	<code class="systemitem">fe80:0000:0000:0000:0000:0000:0000:0001</code>
	に対応します。</p><p>3 番目の形式は、最後の 32 ビットの部分を
	<span class="quote">「<span class="quote">.</span>」</span> を分割文字として使う、
	なじみ深い IPv4 (10 進) 形式で書くことです。
	たとえば <code class="systemitem">2002::10.0.0.1</code>
	は (16 進) 正規形の
	<code class="systemitem">2002:0000:0000:0000:0000:0000:0a00:0001</code>
	に対応し、同時に <code class="systemitem">2002::a00:1</code>
	と書くこととも等価です。</p><p>ここまで来れば、下記を理解することができるでしょう。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig</code></strong></pre><pre class="programlisting">rl0: flags=8943&lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500
         inet 10.0.0.10 netmask 0xffffff00 broadcast 10.0.0.255
         inet6 fe80::200:21ff:fe03:8e1%rl0 prefixlen 64 scopeid 0x1
         ether 00:00:21:03:08:e1
         media: Ethernet autoselect (100baseTX )
         status: active</pre><p><code class="systemitem">fe80::200:21ff:fe03:8e1%rl0</code>
	は自動的に設定されたリンクローカルアドレスです。
	これは自動設定の一環として、
	イーサネット MAC アドレスを変換したものを含んでいます。</p><p>IPv6 アドレス構造についての詳細は RFC3513 をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95834320"></a>22.16.3. 接続</h3></div></div></div><p>現在、他の IPv6 ホストおよびネットワークに接続するためには
	4 つの方法があります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>6bone 実験ネットワークに参加する。</p></li><li class="listitem"><p>上流のプロバイダから IPv6 ネットワークの割り当てを受ける。
	    手順については、インターネットプロバイダに問い合わせてください。</p></li><li class="listitem"><p>IPv6 over IPv4 によるトンネル。</p></li><li class="listitem"><p>ダイアルアップ接続の場合 freenet6 port を使用する。</p></li></ul></div><p>ここでは、現在もっともよく使われている方法と思われる
	6bone へ接続する方法を説明します。</p><p>はじめに 6bone サイトをみて、
	あなたに最も近い 6bone 接続先を見つけてください。
	責任者に連絡すると、少しばかり運がよければ、
	接続を設定する方法についての指示を受けられるでしょう。
	多くのばあい、これには
	GRE (gif) トンネルの設定が含まれます。</p><div xmlns="" class="note"><h3 class="admontitle">訳注: </h3><p xmlns="http://www.w3.org/1999/xhtml">6bone は <code class="systemitem">3ffe::</code> (16 ビット)
	  という IPv6 アドレスを割り振られた実験目的のネットワークでしたが、
	  2006 年 6 月に運用を停止することになっています。
	  他の商用や試験的な IPv6 接続サービスを探してください。</p></div><p>ここに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gif&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gif</span>(4)</span></a> トンネルを設定する典型的な例を示します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0 create</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0</code></strong>
gif0: flags=8010&lt;POINTOPOINT,MULTICAST&gt; mtu 1280
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0 tunnel MY_IPv4_ADDR  HIS_IPv4_ADDR</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0 inet6 alias MY_ASSIGNED_IPv6_TUNNEL_ENDPOINT_ADDR</code></strong></pre><p>大文字になっている単語を、
	上流の 6bone ノードから受け取った情報に置き換えてください。</p><p>これでトンネルが確立されます。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping6&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping6</span>(8)</span></a> を
	<code class="systemitem">ff02::1%gif0</code>
	に送ることによって、トンネルが動作しているか確かめてください。
	ping の応答を 2 つ受け取るはずです。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="systemitem">ff02:1%gif0</code>
	  というアドレスに興味をそそられている場合のために説明すると、
	  これはマルチキャストアドレスです。
	  <code class="literal">%gif0</code> は、ネットワークインタフェース
	  <code class="filename">gif0</code>
	  上のマルチキャストアドレスが使用されるということを示しています。
	  マルチキャストアドレスに対して <code class="command">ping</code>
	  を送ったので、トンネルのもう一方の端も応答します。</p></div><p>ここまで来ると 6bone
	アップリンクに経路設定することは比較的簡単でしょう。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add -inet6 default -interface gif0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ping6 -n MY_UPLINK</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>traceroute6 www.jp.FreeBSD.org</code></strong>
(3ffe:505:2008:1:2a0:24ff:fe57:e561) from 3ffe:8060:100::40:2, 30 hops max, 12 byte packets
     1  atnet-meta6  14.147 ms  15.499 ms  24.319 ms
     2  6bone-gw2-ATNET-NT.ipv6.tilab.com  103.408 ms  95.072 ms *
     3  3ffe:1831:0:ffff::4  138.645 ms  134.437 ms  144.257 ms
     4  3ffe:1810:0:6:290:27ff:fe79:7677  282.975 ms  278.666 ms  292.811 ms
     5  3ffe:1800:0:ff00::4  400.131 ms  396.324 ms  394.769 ms
     6  3ffe:1800:0:3:290:27ff:fe14:cdee  394.712 ms  397.19 ms  394.102 ms</pre><p>この出力はマシンによって異なります。
	これで、あなたが <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mozilla/pkg-descr">www/mozilla</a>
	のような IPv6 が利用可能なブラウザを持っていれば、
	IPv6 サイト
	<a class="link" href="http://www.kame.net" target="_top">www.kame.net</a>
	にいって踊るカメを見ることができるでしょう。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95858768"></a>22.16.4. IPv6 世界の DNS</h3></div></div></div><p>IPv6 のための新しい DNS レコードが 2 種類あります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>AAAA レコード</p></li><li class="listitem"><p>A6 レコード</p></li></ul></div><p>AAAA レコードは簡単に使えます。</p><pre class="programlisting">MYHOSTNAME           AAAA    MYIPv6ADDR</pre><p>上記をプライマリゾーン DNS ファイルに加えて、
	もらったばかりの IPv6 アドレスにホスト名を割り当ててください。
	あなた自身で <acronym class="acronym">DNS</acronym> ゾーンを管理していない場合は、
	<acronym class="acronym">DNS</acronym> プロバイダに頼んでください。
	<span class="application">bind</span> の最新バージョン
	(バージョン 8.3 および 9) は AAAA レコードに対応しています。</p></div></div></div></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="appendices"></a>パート〓V.〓付録</h1></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="appendix"><a href="#mirrors">A. FreeBSD の入手方法</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mirrors-cdrom">A.1. <acronym class="acronym">CD</acronym> および
      <acronym class="acronym">DVD</acronym> セット</a></span></dt><dt><span class="sect1"><a href="#mirrors-ftp">A.2. <acronym class="acronym">FTP</acronym> サイト</a></span></dt><dt><span class="sect1"><a href="#ctm">A.3. CTM を使う</a></span></dt><dt><span class="sect1"><a href="#svn">A.4. <span class="application">Subversion</span> を使う</a></span></dt><dt><span class="sect1"><a href="#mirrors-rsync">A.5. <span class="application">rsync</span> を使用する</a></span></dt></dl></dd><dt><span class="appendix"><a href="#bibliography">B. 参考図書</a></span></dt><dd><dl><dt><span class="sect1"><a href="#bibliography-freebsd">B.1. FreeBSD 専門の書籍</a></span></dt><dt><span class="sect1"><a href="#bibliography-userguides">B.2. 利用者向けのガイド</a></span></dt><dt><span class="sect1"><a href="#bibliography-adminguides">B.3. 管理者向けのガイド</a></span></dt><dt><span class="sect1"><a href="#idp96627920">B.4. プログラマ向けのガイド</a></span></dt><dt><span class="sect1"><a href="#idp96652112">B.5. オペレーティングシステム内部</a></span></dt><dt><span class="sect1"><a href="#idp96687696">B.6. セキュリティの参考資料</a></span></dt><dt><span class="sect1"><a href="#bibliography-hardware">B.7. ハードウェアの参考資料</a></span></dt><dt><span class="sect1"><a href="#bibliography-history">B.8. <span class="trademark">UNIX</span>® の歴史</a></span></dt><dt><span class="sect1"><a href="#bibliography-journals">B.9. 定期刊行物、雑誌およびジャーナル</a></span></dt></dl></dd><dt><span class="appendix"><a href="#eresources">C. インターネット上のリソース</a></span></dt><dd><dl><dt><span class="sect1"><a href="#eresources-mail">C.1. メーリングリスト</a></span></dt><dt><span class="sect1"><a href="#eresources-news">C.2. Usenet ニュースグループ</a></span></dt><dt><span class="sect1"><a href="#eresources-web">C.3. World Wide Web サイト</a></span></dt><dt><span class="sect1"><a href="#eresources-email">C.4. Email アドレス</a></span></dt><dt><span class="sect1"><a href="#eresources-shell">C.5. シェルアカウント</a></span></dt></dl></dd><dt><span class="appendix"><a href="#pgpkeys">D. <acronym class="acronym">PGP</acronym> 公開鍵</a></span></dt><dd><dl><dt><span class="sect1"><a href="#pgpkeys-officers">D.1. オフィサ</a></span></dt></dl></dd></dl></div><div class="appendix"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirrors"></a>付録A FreeBSD の入手方法</h2></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#mirrors-cdrom">A.1. <acronym class="acronym">CD</acronym> および
      <acronym class="acronym">DVD</acronym> セット</a></span></dt><dt><span class="sect1"><a href="#mirrors-ftp">A.2. <acronym class="acronym">FTP</acronym> サイト</a></span></dt><dt><span class="sect1"><a href="#ctm">A.3. CTM を使う</a></span></dt><dt><span class="sect1"><a href="#svn">A.4. <span class="application">Subversion</span> を使う</a></span></dt><dt><span class="sect1"><a href="#mirrors-rsync">A.5. <span class="application">rsync</span> を使用する</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirrors-cdrom"></a>A.1. <acronym class="acronym">CD</acronym> および
      <acronym class="acronym">DVD</acronym> セット</h2></div></div></div><p>FreeBSD の <acronym class="acronym">CD</acronym> および <acronym class="acronym">DVD</acronym>
      のセットは以下のオンライン業者から入手できます。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><div class="address"><p>FreeBSD〓Mall,〓Inc.<br />
	〓〓<span class="street">2420〓Sand〓Creek〓Rd〓C-1〓#347</span><br />
	〓〓<span class="city">Brentwood</span>,〓<span class="state">CA</span><br />
	〓〓<span class="postcode">94513</span><br />
	〓〓<span class="country">USA</span><br />
	〓〓電話:〓<span class="phone">+1〓925〓240-6652</span><br />
	〓〓Fax:〓<span class="fax">+1〓925〓674-0821</span><br />
	〓〓Email:〓<code class="email">&lt;<a xmlns="" class="email" href="mailto:info@freebsdmall.com">info@freebsdmall.com</a>&gt;</code><br />
	〓〓WWW:〓<span class="otheraddr"><a class="otheraddr" href="http://www.freebsdmall.com/" target="_top">http://www.freebsdmall.com/</a></span><br />
	</p></div></li><li class="listitem"><div class="address"><p>Getlinux<br />
	〓〓<span class="street">78〓Rue〓de〓la〓Croix〓Rochopt</span><br />
	〓〓<span class="city">Épinay-sous-Sénart</span><br />
	〓〓<span class="postcode">91860</span><br />
	〓〓<span class="country">France</span><br />
	〓〓Email:〓<code class="email">&lt;<a xmlns="" class="email" href="mailto:contact@getlinux.fr">contact@getlinux.fr</a>&gt;</code><br />
	〓〓WWW:〓<span class="otheraddr"><a class="otheraddr" href="http://www.getlinux.fr" target="_top">http://www.getlinux.fr/</a></span><br />
	</p></div></li><li class="listitem"><div class="address"><p>Dr.〓Hinner〓EDV<br />
	〓〓<span class="street">Kochelseestr.〓11</span><br />
	〓〓<span class="postcode">D-81371</span>〓<span class="city">München</span><br />
	〓〓<span class="country">Germany</span><br />
	〓〓電話:〓<span class="phone">(0177)〓428〓419〓0</span><br />
	〓〓Email:〓<code class="email">&lt;<a xmlns="" class="email" href="mailto:infow@hinner.de">infow@hinner.de</a>&gt;</code><br />
	〓〓WWW:〓<span class="otheraddr"><a class="otheraddr" href="http://www.hinner.de/linux/freebsd.html" target="_top">http://www.hinner.de/linux/freebsd.html</a></span><br />
	</p></div></li><li class="listitem"><div class="address"><p>Linux〓Center<br />
	〓〓<span class="street">Galernaya〓Street,〓55</span><br />
	〓〓<span class="city">Saint-Petersburg</span><br />
	〓〓<span class="postcode">190000</span><br />
	〓〓<span class="country">Russia</span><br />
	〓〓電話:〓<span class="phone">+7-812-309-06-86</span><br />
	〓〓Email:〓<code class="email">&lt;<a xmlns="" class="email" href="mailto:info@linuxcenter.ru">info@linuxcenter.ru</a>&gt;</code><br />
	〓〓WWW:〓<span class="otheraddr"><a class="otheraddr" href="http://linuxcenter.ru/shop/freebsd" target="_top">http://linuxcenter.ru/shop/freebsd</a></span><br />
	</p></div></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirrors-ftp"></a>A.2. <acronym class="acronym">FTP</acronym> サイト</h2></div></div></div><p>FreeBSD の公式な情報は anonymous <acronym class="acronym">FTP</acronym>
      によって世界中のミラーサイトより入手できます。<code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/</a></code>
      サイトは、<acronym class="acronym">HTTP</acronym> および <acronym class="acronym">FTP</acronym>
      経由で利用できます。
      これは、プロジェクトクラスタの管理者により運用されている数多くのコンピュータから構成されています。
      また、GeoDNS により、近くの利用可能なミラーをユーザに提供します。</p><p>さらに、FreeBSD は以下のミラーサイトから anonymous <acronym class="acronym">FTP</acronym>
      によって入手できます。もし FreeBSD を anonymous <acronym class="acronym">FTP</acronym>
      によって手にいれる場合は、
      近くのサイトを利用するようにしてください。
      <span class="quote">「<span class="quote">一次ミラーサイト</span>」</span> としてあげられているサイトには、
      FreeBSD の各アーキテクチャで利用可能なすべてのバージョンのアーカイブ一式が用意されています。
      あなたが住んでいる国や地域には、
      より高速にダウンロードできるサイトがおそらくあるでしょう。
      各国のミラーサイトには、
      人気のあるアーキテクチャの最新のバージョンが置いてありますが、
      FreeBSD のアーカイブ全体はもしかするとないかもしれません。
      すべてのサイトは anonymous <acronym class="acronym">FTP</acronym>
      別の方法によるアクセスを提供しているサイトもあります。
      各サイトで提供しているアクセス方法は、
      ホスト名に続く括弧の中に記載されています。</p><p><a class="link" href="#central-ftp">中央サーバ</a>, <a class="link" href="#mirrors-primary-ftp">一次ミラーサイト</a>, <a class="link" href="#mirrors-ie-ftp">アイルランド</a>, <a class="link" href="#mirrors-us-ftp">アメリカ合衆国</a>, <a class="link" href="#mirrors-am-ftp">アルメニア</a>, <a class="link" href="#mirrors-uk-ftp">イギリス</a>, <a class="link" href="#mirrors-ua-ftp">ウクライナ</a>, <a class="link" href="#mirrors-ee-ftp">エストニア</a>, <a class="link" href="#mirrors-au-ftp">オーストラリア</a>, <a class="link" href="#mirrors-at-ftp">オーストリア</a>, <a class="link" href="#mirrors-nl-ftp">オランダ</a>, <a class="link" href="#mirrors-ca-ftp">カナダ</a>, <a class="link" href="#mirrors-gr-ftp">ギリシア</a>, <a class="link" href="#mirrors-sa-ftp">サウジアラビア</a>, <a class="link" href="#mirrors-ch-ftp">スイス</a>, <a class="link" href="#mirrors-se-ftp">スウェーデン</a>, <a class="link" href="#mirrors-es-ftp">スペイン</a>, <a class="link" href="#mirrors-si-ftp">スロベニア</a>, <a class="link" href="#mirrors-cz-ftp">チェコ共和国</a>, <a class="link" href="#mirrors-dk-ftp">デンマーク</a>, <a class="link" href="#mirrors-de-ftp">ドイツ</a>, <a class="link" href="#mirrors-nz-ftp">ニュージーランド</a>, <a class="link" href="#mirrors-no-ftp">ノルウェー</a>, <a class="link" href="#mirrors-fi-ftp">フィンランド</a>, <a class="link" href="#mirrors-fr-ftp">フランス</a>, <a class="link" href="#mirrors-br-ftp">ブラジル</a>, <a class="link" href="#mirrors-pl-ftp">ポーランド</a>, <a class="link" href="#mirrors-lv-ftp">ラトビア</a>, <a class="link" href="#mirrors-lt-ftp">リトアニア</a>, <a class="link" href="#mirrors-ru-ftp">ロシア</a>, <a class="link" href="#mirrors-kr-ftp">韓国</a>, <a class="link" href="#mirrors-hk-ftp">香港</a>, <a class="link" href="#mirrors-tw-ftp">台湾</a>, <a class="link" href="#mirrors-cn-ftp">中国</a>, <a class="link" href="#mirrors-za-ftp">南アフリカ</a>, <a class="link" href="#mirrors-jp-ftp">日本</a>.</p><p>(  UTC 現在)</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a id="central-ftp"></a>中央サーバ</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/</a> (ftp / ftpv6 / <a class="link" href="http://ftp.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-primary-ftp"></a>一次ミラーサイト</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:mirror-admin@FreeBSD.org">mirror-admin@FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp1.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp1.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.FreeBSD.org/pub/FreeBSD/</a> (ftp / ftpv6 / <a class="link" href="http://ftp4.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp4.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp4.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp4.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp7.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp7.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp10.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp10.FreeBSD.org/pub/FreeBSD/</a> (ftp / ftpv6 / <a class="link" href="http://ftp10.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp10.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp10.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp10.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp11.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp11.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp13.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp13.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp14.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp14.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp14.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp14.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-ie-ftp"></a>アイルランド</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@ie.FreeBSD.org">hostmaster@ie.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp3.ie.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.ie.FreeBSD.org/pub/FreeBSD/</a> (ftp / rsync) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-us-ftp"></a>アメリカ合衆国</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@us.FreeBSD.org">hostmaster@us.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp1.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp1.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.us.FreeBSD.org/pub/FreeBSD/</a> (ftp / ftpv6 / <a class="link" href="http://ftp4.us.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp4.us.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp4.us.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp4.us.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp8.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp8.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp10.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp10.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp11.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp11.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp13.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp13.us.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp13.us.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp13.us.FreeBSD.org/pub/FreeBSD/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp14.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp14.us.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp14.us.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp14.us.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp15.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp15.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-am-ftp"></a>アルメニア</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@am.FreeBSD.org">hostmaster@am.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp1.am.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp1.am.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp1.am.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp1.am.FreeBSD.org/pub/FreeBSD/</a> / rsync) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-uk-ftp"></a>イギリス</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@uk.FreeBSD.org">hostmaster@uk.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.uk.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.uk.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.uk.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.uk.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="rsync://ftp2.uk.FreeBSD.org/ftp.freebsd.org/pub/FreeBSD/" target="_top">rsync://ftp2.uk.FreeBSD.org/ftp.freebsd.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.uk.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.uk.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.uk.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.uk.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.uk.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.uk.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-ua-ftp"></a>ウクライナ</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.ua.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.ua.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.ua.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.ua.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.ua.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.ua.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp6.ua.FreeBSD.org/pub/FreeBSD" target="_top">http://ftp6.ua.FreeBSD.org/pub/FreeBSD</a> / <a class="link" href="rsync://ftp6.ua.FreeBSD.org/FreeBSD/" target="_top">rsync://ftp6.ua.FreeBSD.org/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp7.ua.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp7.ua.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-ee-ftp"></a>エストニア</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@ee.FreeBSD.org">hostmaster@ee.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.ee.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.ee.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-au-ftp"></a>オーストラリア</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@au.FreeBSD.org">hostmaster@au.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.au.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.au.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.au.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.au.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.au.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.au.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-at-ftp"></a>オーストリア</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@at.FreeBSD.org">hostmaster@at.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.at.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.at.FreeBSD.org/pub/FreeBSD/</a> (ftp / ftpv6 / <a class="link" href="http://ftp.at.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.at.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp.at.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.at.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-nl-ftp"></a>オランダ</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@nl.FreeBSD.org">hostmaster@nl.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.nl.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.nl.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.nl.FreeBSD.org/os/FreeBSD/" target="_top">http://ftp.nl.FreeBSD.org/os/FreeBSD/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.nl.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.nl.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-ca-ftp"></a>カナダ</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@ca.FreeBSD.org">hostmaster@ca.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.ca.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.ca.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.ca.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.ca.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-gr-ftp"></a>ギリシア</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@gr.FreeBSD.org">hostmaster@gr.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.gr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.gr.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.gr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.gr.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-sa-ftp"></a>サウジアラビア</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:ftpadmin@isu.net.sa">ftpadmin@isu.net.sa</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.isu.net.sa/pub/ftp.freebsd.org/" target="_top">ftp://ftp.isu.net.sa/pub/ftp.freebsd.org/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-ch-ftp"></a>スイス</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@ch.FreeBSD.org">hostmaster@ch.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.ch.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.ch.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.ch.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.ch.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-se-ftp"></a>スウェーデン</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@se.FreeBSD.org">hostmaster@se.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.se.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.se.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.se.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.se.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="rsync://ftp2.se.FreeBSD.org/" target="_top">rsync://ftp2.se.FreeBSD.org/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.se.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.se.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.se.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.se.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="ftp://ftp4.se.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.se.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp4.se.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp4.se.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp4.se.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp4.se.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="rsync://ftp4.se.FreeBSD.org/pub/FreeBSD/" target="_top">rsync://ftp4.se.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="rsync://ftp4.se.FreeBSD.org/pub/FreeBSD/" target="_top">rsync://ftp4.se.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.se.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.se.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp6.se.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp6.se.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-es-ftp"></a>スペイン</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@es.FreeBSD.org">hostmaster@es.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.es.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.es.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.es.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.es.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.es.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.es.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-si-ftp"></a>スロベニア</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@si.FreeBSD.org">hostmaster@si.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.si.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.si.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-cz-ftp"></a>チェコ共和国</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@cz.FreeBSD.org">hostmaster@cz.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.cz.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.cz.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="ftp://ftp.cz.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.cz.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp.cz.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.cz.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp.cz.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.cz.FreeBSD.org/pub/FreeBSD/</a> / rsync / rsyncv6) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.cz.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.cz.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp2.cz.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp2.cz.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-dk-ftp"></a>デンマーク</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@dk.FreeBSD.org">hostmaster@dk.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.dk.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.dk.FreeBSD.org/pub/FreeBSD/</a> (ftp / ftpv6 / <a class="link" href="http://ftp.dk.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.dk.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp.dk.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.dk.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-de-ftp"></a>ドイツ</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:de-bsd-hubs@de.FreeBSD.org">de-bsd-hubs@de.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.de.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.de.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp1.de.FreeBSD.org/freebsd/" target="_top">ftp://ftp1.de.FreeBSD.org/freebsd/</a> (ftp / <a class="link" href="http://www1.de.FreeBSD.org/freebsd/" target="_top">http://www1.de.FreeBSD.org/freebsd/</a> / <a class="link" href="rsync://rsync3.de.FreeBSD.org/freebsd/" target="_top">rsync://rsync3.de.FreeBSD.org/freebsd/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.de.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.de.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp2.de.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp2.de.FreeBSD.org/pub/FreeBSD/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.de.FreeBSD.org/FreeBSD/" target="_top">ftp://ftp4.de.FreeBSD.org/FreeBSD/</a> (ftp / <a class="link" href="http://ftp4.de.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp4.de.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.de.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.de.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp7.de.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp7.de.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp7.de.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp7.de.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp8.de.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp8.de.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-nz-ftp"></a>ニュージーランド</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.nz.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.nz.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.nz.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.nz.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-no-ftp"></a>ノルウェー</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@no.FreeBSD.org">hostmaster@no.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.no.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.no.FreeBSD.org/pub/FreeBSD/</a> (ftp / rsync) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-fi-ftp"></a>フィンランド</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@fi.FreeBSD.org">hostmaster@fi.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.fi.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.fi.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-fr-ftp"></a>フランス</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@fr.FreeBSD.org">hostmaster@fr.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.fr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.fr.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp1.fr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp1.fr.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp1.fr.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp1.fr.FreeBSD.org/pub/FreeBSD/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.fr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.fr.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.fr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.fr.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.fr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.fr.FreeBSD.org/pub/FreeBSD/</a> (ftp / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp7.fr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp7.fr.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp8.fr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp8.fr.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-br-ftp"></a>ブラジル</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@br.FreeBSD.org">hostmaster@br.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp2.br.FreeBSD.org/FreeBSD/" target="_top">ftp://ftp2.br.FreeBSD.org/FreeBSD/</a> (ftp / <a class="link" href="http://ftp2.br.FreeBSD.org/" target="_top">http://ftp2.br.FreeBSD.org/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.br.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.br.FreeBSD.org/pub/FreeBSD/</a> (ftp / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.br.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.br.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-pl-ftp"></a>ポーランド</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@pl.FreeBSD.org">hostmaster@pl.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.pl.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.pl.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p>ftp2.pl.FreeBSD.org</p></li></ul></div></dd><dt><span class="term"><a id="mirrors-lv-ftp"></a>ラトビア</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@lv.FreeBSD.org">hostmaster@lv.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.lv.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.lv.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.lv.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.lv.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-lt-ftp"></a>リトアニア</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@lt.FreeBSD.org">hostmaster@lt.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.lt.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.lt.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.lt.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.lt.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-ru-ftp"></a>ロシア</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@ru.FreeBSD.org">hostmaster@ru.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.ru.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.ru.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.ru.FreeBSD.org/FreeBSD/" target="_top">http://ftp.ru.FreeBSD.org/FreeBSD/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.ru.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.ru.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp2.ru.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp2.ru.FreeBSD.org/pub/FreeBSD/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.ru.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.ru.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.ru.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.ru.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp5.ru.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp5.ru.FreeBSD.org/pub/FreeBSD/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.ru.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.ru.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-kr-ftp"></a>韓国</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@kr.FreeBSD.org">hostmaster@kr.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.kr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.kr.FreeBSD.org/pub/FreeBSD/</a> (ftp / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.kr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.kr.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp2.kr.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp2.kr.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-hk-ftp"></a>香港</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.hk.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.hk.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-tw-ftp"></a>台湾</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@tw.FreeBSD.org">hostmaster@tw.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="ftp://ftp.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.tw.FreeBSD.org/pub/FreeBSD/</a> / rsync / rsyncv6) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="ftp://ftp2.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.tw.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp2.tw.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp2.tw.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp2.tw.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp2.tw.FreeBSD.org/pub/FreeBSD/</a> / rsync / rsyncv6) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp6.tw.FreeBSD.org/" target="_top">http://ftp6.tw.FreeBSD.org/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp7.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp7.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp8.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp8.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp11.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp11.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp11.tw.FreeBSD.org/FreeBSD/" target="_top">http://ftp11.tw.FreeBSD.org/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp12.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp12.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp13.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp13.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp14.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp14.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp15.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp15.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-cn-ftp"></a>中国</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@cn.FreeBSD.org">hostmaster@cn.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.cn.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.cn.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-za-ftp"></a>南アフリカ</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@za.FreeBSD.org">hostmaster@za.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.za.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.za.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.za.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.za.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.za.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.za.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-jp-ftp"></a>日本</span></dt><dd><p>問題がある場合は、このドメインのホストマスタ
        <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@jp.FreeBSD.org">hostmaster@jp.FreeBSD.org</a>&gt;</code> 宛にお問い合わせください。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp7.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp7.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp8.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp8.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp9.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp9.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd></dl></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ctm"></a>A.3. CTM を使う</h2></div></div></div><a id="idp96290384" class="indexterm"></a><p><span class="emphasis"><em>訳: 花井 浩之 <code class="email">&lt;<a xmlns="" class="email" href="mailto:hanai@FreeBSD.org">hanai@FreeBSD.org</a>&gt;</code>、1997 年 9 月 13 日</em></span></p><p><span class="application">CTM</span> は、
      リモートのディレクトリツリーを中央のツリーに同期させるための手段です。
      FreeBSD システムに組み込まれており、FreeBSD
      のソースリポジトリとの同期に使うことができます。
      リポジトリ全体の同期や特定のブランチセットの同期に用いることができます。</p><p><span class="application">CTM</span> は、
      特にお粗末な TCP/IP 接続しか持っていなかったり、
      TCP/IP 接続が行なえない環境での利用を想定して設計されています。
      変更点を自動的にメールで送られてくるように設定することができます。
      アクティブなブランチでは 1
      日に最大三つまでのデルタを受け取る必要があります。
      デルタのサイズは常にできるだけ小さく保たれています。
      大抵の場合 5KB よりも小さく、
      たまに (10 回に 1 回程度) 10-50KB になり、
      ときおり 100KB 以上のサイズになります。</p><p><span class="application">CTM</span> を使って FreeBSD
      の開発を追いかける時には、
      あらかじめパッケージ化されたリリースとは異なり、
      開発ソースの作業ディレクトリに関連した注意点に気をつけてください。
      これに関しては、
      <a class="link" href="#current-stable" title="18.4. 開発ブランチを追いかける">開発ブランチを追いかける</a>
      の章を参照してください。</p><p>デルタを作り出す過程や <span class="application">CTM</span>
      を他の目的に使うためのドキュメントは現在ほとんどありません。
      <span class="application">CTM</span> に関連した質問については、
      <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/ctm-users" target="_top">ctm-users</a> メーリングリストに相談してください。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirrors-ctm"></a>A.3.1. デルタを入手する</h3></div></div></div><p><span class="application">CTM</span> が用いる <span class="quote">「<span class="quote">デルタ</span>」</span>
	は、anonymous <acronym class="acronym">FTP</acronym>
	もしくはメールで入手できます。</p><p><acronym class="acronym">FTP</acronym>
	のデルタは以下のミラーサイトから入手できます。
	もし anonymous <acronym class="acronym">FTP</acronym> を使って
	<span class="application">CTM</span> のデルタを手にいれる場合は、
	地理的に近くにあるミラーサイトを利用するようにしてください。
	何か問題がある場合は、<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/ctm-users" target="_top">ctm-users</a>
	メーリングリストに相談してください。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">カリフォルニア、サンフランシスコ近辺、公式なソース</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/development/CTM/" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/development/CTM/</a></code></p></li><li class="listitem"><p><code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CTM/" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/CTM/</a></code></p></li></ul></div></dd><dt><span class="term">南アフリカ、古い差分ファイルのバックアップサーバ</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="uri"><a class="uri" href="ftp://ftp.za.FreeBSD.org/pub/FreeBSD/CTM/" target="_top">ftp://ftp.za.FreeBSD.org/pub/FreeBSD/CTM/</a></code></p></li></ul></div></dd><dt><span class="term">台湾/中華民国</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="uri"><a class="uri" href="ftp://ctm.tw.FreeBSD.org/pub/FreeBSD/development/CTM/" target="_top">ftp://ctm.tw.FreeBSD.org/pub/FreeBSD/development/CTM/</a></code></p></li><li class="listitem"><p><code class="uri"><a class="uri" href="ftp://ctm2.tw.FreeBSD.org/pub/FreeBSD/development/CTM/" target="_top">ftp://ctm2.tw.FreeBSD.org/pub/FreeBSD/development/CTM/</a></code></p></li><li class="listitem"><p><code class="uri"><a class="uri" href="ftp://ctm3.tw.FreeBSD.org/pub/FreeBSD/development/CTM/" target="_top">ftp://ctm3.tw.FreeBSD.org/pub/FreeBSD/development/CTM/</a></code></p></li></ul></div></dd></dl></div><p>メールでデルタを得たいという場合は、<code class="uri"><a class="uri" href="http://lists.freebsd.org/mailman/listinfo" target="_top">http://lists.freebsd.org/mailman/listinfo</a></code>
	から、<code class="literal">ctm-src</code>
	配布メーリングリストのいずれかに参加してください。
	たとえば <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/ctm-src-cur" target="_top">ctm-src-cur</a>
	は head 開発ブランチに対応しています。<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/ctm-src-9" target="_top">ctm-src-9</a>
	は 9.X リリースのブランチに対応したものです</p><p>メールで <span class="application">CTM</span>
	の更新ファイルを受け取り始めたら、
	中身を取り出して使用するために
	<code class="command">ctm_rmail</code> を使ってください。
	このプロセスを自動で行ないたいのであれば、
	このコマンドを <code class="filename">/etc/aliases</code>
	から直接実行することもできます。
	さらに詳しいことは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ctm_rmail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ctm_rmail</span>(1)</span></a> をご覧ください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">どの方法を使ってデルタを入手していたとしても、
	  <span class="application">CTM</span> のユーザは
	  <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/ctm-announce" target="_top">ctm-announce</a>
	  メーリングリストを購読するようにしてください。
	  このメーリングリストは、
	  <span class="application">CTM</span>
	  に関するアナウンスが投稿される唯一の場所です。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96327120"></a>A.3.2. <span class="application">CTM</span> の使い方</h3></div></div></div><p>初めて <span class="application">CTM</span>
	デルタを使う前に、出発点を作成しておく必要があります。</p><p>その方法の一つは、空のディレクトリに対して、
	<span class="quote">「<span class="quote">スタータ</span>」</span> デルタを使う方法です。
	スタータデルタは
	<code class="filename">src-cur.3210XEmpty.gz</code>
	のように、<code class="literal">XEmpty</code>
	というファイル名になります。
	<code class="literal">X</code>
	の後ろは最初の開始ポイントに対応し、
	<code class="filename">Empty</code> は空のディレクトリを表します。
	ルールとして <code class="literal">Empty</code> からの移行デルタは
	100 デルタごとに作られます。
	スタータデルタである
	<code class="filename">XEmpty</code> のデルタは、70 から 80MB の
	<code class="command">gzip</code>
	で圧縮された大きなデータということに注意してください。</p><p>もう一つの方法は、RELEASE
	のメディアからソースをコピーしたり展開する方法です。
	この方法では、
	インターネット上で大きなデータの転送を行う必要がありません。</p><p>一度ベースとなるデルタを作成したら、
	それに続く大きな数字を持つ多数のすべてのデルタを適用してください。
	デルタを適用するためには、以下のように実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /directory/to/store/the/stuff</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ctm -v -v /directory/which/stores/the/deltas/src-xxx.*</code></strong></pre><p>一度に適用されるデルタは一つで、
	一度適用されたデルタは無視されるので、
	複数のデルタを一つのコマンドで適用することができます。
	<span class="application">CTM</span>
	は <code class="command">gzip</code> で圧縮されているデルタを理解するので、
	ディスクの節約にもなります。</p><p>デルタを適用せずに確認だけを行うには、
	コマンドラインに <code class="option">-c</code> フラグを加えてください。
	<span class="application">CTM</span>
	はローカルのツリーに対して実際には何も行ないません。
	デルタの完全性を確認し、
	現在のツリーに問題なく使用できるかを確認します。
	オプションに関するより多くの情報や、
	デルタを適用する時に <span class="application">CTM</span>
	が用いるプロセスの全体については、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ctm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ctm</span>(1)</span></a> をご覧ください。</p><p>ローカルのソースツリーを最新に保つには、
	新しいデルタが入手可能になるたびに、
	<span class="application">CTM</span> に適用してください。</p><p>デルタを適用後、
	もしデルタを再ダウンロードするのが骨の折れる作業であれば、
	デルタを消さないでおいてください。
	このようにすると、将来のディザスタリカバリで必要になった場合に、
	ローカルにあるコピーを利用できます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96339920"></a>A.3.3. ローカルの変更を保存する</h3></div></div></div><p>開発者はソースツリー中のファイルを使って、
	実験したり変更したくなるものです。
	<span class="application">CTM</span>
	はローカルの変更を制限つきでサポートします。
	ファイルの存在をチェックする前に、同じ名前で
	<code class="filename">.ctm</code>
	という拡張子のついたファイルを参照しにいきます。
	このファイルが存在する場合、<span class="application">CTM</span>
        はオリジナルファイルの代りにこのファイルを処理します。</p><p>この動作はローカルの変更を保持する簡単な手段を提供します。
	ファイルを変更する前に、<code class="filename">.ctm</code>
	という拡張子のファイル名にコピーしてください。
	あとは自由にオリジナルの名前を持つファイルを変更してください。
	<span class="application">CTM</span> は、<code class="filename">.ctm</code>
	の拡張子を持つファイルにのみに適用されます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96356432"></a>A.3.4. <span class="application">CTM</span>
	のその他のオプション</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">更新で変更されるファイルを正確に知る</span></dt><dd><p><span class="application">CTM</span>
	      がローカルのソースリポジトリに対して、
	      どのような変更を行うかを知るには、
	      <code class="option">-l</code>
	      オプションを使ってください。
	      このオプションは、変更のログを作成したり、
	      変更されたファイルに対して、
	      なんらかの方法で 前・後処理したい場合には、
	      役に立つでしょう。</p></dd><dt><span class="term">更新前にバックアップを取る</span></dt><dd><p><span class="application">CTM</span>
	      の更新によって変更されるファイルすべてのバックアップをとるには、
	      <code class="option">-B
		<em class="replaceable"><code>backup-file</code></em></code>
	      オプションを指定してください。
	      このオプションを使うと、
	      <span class="application">CTM</span> は、
	      デルタで変更されるファイルすべてを
	      <code class="filename">backup-file</code>
	      としてバックアップするようになります。</p></dd><dt><span class="term">更新で変更されるファイルを制限する</span></dt><dd><p><span class="application">CTM</span>
	      の更新の範囲を制限したり一連のデルタのから
	      ほんの数ファイルを抽出するには、
	      使用するファイルを指定する
	      <code class="option">-e</code> と
	      どのファイルを無視するかを指定する
	      <code class="option">-x</code>
	      オプションを使って、正規表現で指定できます。</p><p>例えば、<code class="filename">lib/libc/Makefile</code>
	      の最新のコピーを保存してある <span class="application">CTM</span>
	      デルタのコレクションから抽出するには、
	      以下のコマンドを実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /directory/to/extract/to/</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ctm -e '^lib/libc/Makefile' /directory/which/stores/the/deltas/src-xxx.*</code></strong></pre><p><span class="application">CTM</span>
	      デルタで指定されたファイルごとに、<code class="option">-e</code>
	      そして <code class="option">-x</code>
	      オプションがコマンドラインで指定された順序で適用されます。
	      すべての<code class="option">-e</code> そして <code class="option">-x</code>
	      オプションが適用された後に更新対象と選択された場合に限り、
	      <span class="application">CTM</span>
	      はそのファイルを処理します。</p></dd></dl></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="svn"></a>A.4. <span class="application">Subversion</span> を使う</h2></div></div></div><a id="idp96377040" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="svn-intro"></a>A.4.1. はじめに</h3></div></div></div><p>2012 年 7 月から、FreeBSD
	はすべてのソースコード、ドキュメント、Ports Collection
	を管理するメインのバージョン管理システムに
	<span class="application">Subversion</span> を使っています。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">一般的には <span class="application">Subversion</span>
	  は開発者向けのツールです。
	  大部分のユーザは、FreeBSD のベースシステムのアップデートに
	  <code class="command">freebsd-update</code> (<a class="xref" href="#updating-upgrading-freebsdupdate" title="18.2. FreeBSD Update">「FreeBSD Update」</a>)、
	  Ports Collection のアップデートには <code class="command">portsnap</code> (<a class="xref" href="#ports-using" title="5.5. Ports Collection の利用">「Ports Collection の利用」</a>)
	  を使うべきでしょう。</p></div><p>この章では、FreeBSD システムへの
	<span class="application">Subversion</span> のインストール方法および、
	FreeBSD リポジトリをローカルに準備する方法について説明します。
	また、利用可能な FreeBSD <span class="application">Subversion</span> ミラーの一覧および、
	<span class="application">Subversion</span>
	を利用するための情報についても紹介します。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="svn-install"></a>A.4.2. インストール</h3></div></div></div><p>リポジトリの中身をチェックアウトできるよう、事前に
	<span class="application">Subversion</span>
	をインストールしておく必要があります。
	もし、すでに ports ツリーが用意してあれば、
	以下のようにして <span class="application">Subversion</span>
	をインストールできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/devel/subversion</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>もし ports ツリーを利用できなければ、package から
	<span class="application">Subversion</span> をインストールできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg install devel/subversion</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="svn-usage"></a>A.4.3. <span class="application">Subversion</span> の実行</h3></div></div></div><p><code class="command">svn</code> コマンドを使って、
	必要なリポジトリのソースコードを以下のようにしてダウンロードします。
        このディレクトリにあるファイルを
        <span class="emphasis"><em>ローカル作業コピー</em></span> と呼びます。</p><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="emphasis"><em><code class="command">checkout</code> を使う前に、
	  ローカルディレクトリを移動するか削除してください。</em></span></p><p xmlns="http://www.w3.org/1999/xhtml"><code class="command">svn</code>
	  以外の方法で用意されたディレクトリでチェックアウトすると、
	  すでに存在するファイルと、
	  リポジトリから持ってきたファイルとの間で衝突が起きてしまいます。</p></div><p><span class="application">Subversion</span> では、リポジトリの指定に
	<em class="replaceable"><code>protocol://hostname/path</code></em> 形式の
	<acronym class="acronym">URL</acronym> を用います。
	以下に記載されているように、
	ミラーサイトは異なる複数のプロトコルに対応しています。
	アクセスする FreeBSD リポジトリは、パス (path) の最初で指定します。
	リポジトリは 3 つあります。
	<code class="literal">base</code> は FreeBSD ベースシステムのソースコード、
	<code class="literal">ports</code> は Ports Collection、
	そして <code class="literal">doc</code> はドキュメントのリポジトリです。
	たとえば、
	<code class="literal">svn://svn0.us-east.FreeBSD.org/ports/head/</code>
	という URL は、<code class="literal">svn</code> プロトコルによる <code class="systemitem">svn0.us-east.FreeBSD.org</code>
	ミラー上の ports リポジトリのメインブランチを示しています。</p><p>以下のように入力して、リポジトリからチェックアウトしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn checkout <em class="replaceable"><code>svn-mirror</code></em>/<em class="replaceable"><code>repository</code></em>/<em class="replaceable"><code>branch</code></em> <em class="replaceable"><code>lwcdir</code></em></code></strong></pre><p>ここで、<em class="replaceable"><code>repository</code></em>,
	<em class="replaceable"><code>branch</code></em> および <em class="replaceable"><code>root</code></em>
	は以下のとおりです。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><em class="replaceable"><code>svn-mirror</code></em> は、
	    <a class="link" href="#svn-mirrors" title="A.4.4. Subversion ミラーサイト">Subversion
	    ミラーサイト</a> のひとつの URL です。</p></li><li class="listitem"><p><em class="replaceable"><code>repository</code></em> には、
	    プロジェクトのリポジトリ、すなわち <code class="literal">base</code>,
	    <code class="literal">ports</code>, または <code class="literal">doc</code>
	    のどれかひとつを指定します。</p></li><li class="listitem"><p><em class="replaceable"><code>branch</code></em> は、使うリポジトリによります。
	    <code class="literal">ports</code> および <code class="literal">doc</code>
	    では、ほとんどの変更が
	    <code class="literal">head</code> ブランチで行われます。
	    <code class="literal">base</code> リポジトリでは、<code class="literal">head</code>
	    ブランチで -CURRENT の最新バージョンを管理しています。
	    -STABLE ブランチの最新バージョンは、
	    8.<em class="replaceable"><code>x</code></em> は <code class="literal">stable/8</code>,
	    9.<em class="replaceable"><code>x</code></em> は <code class="literal">stable/9</code>,
	    そして
	    10.<em class="replaceable"><code>x</code></em> は <code class="literal">stable/10</code>
	    で管理しています。</p></li><li class="listitem"><p><em class="replaceable"><code>lwcdir</code></em> は、
	    指定したブランチの中身が置かれるターゲットのディレクトリです。
	    通常 <code class="literal">ports</code> は <code class="filename">/usr/ports</code>、
	    <code class="literal">base</code> は <code class="filename">/usr/src</code>、
	    そして <code class="literal">doc</code> では
	    <code class="filename">/usr/doc</code> と指定します。</p></li></ul></div><p>以下の例では、Ports Collection を western US リポジトリから
        <acronym class="acronym">HTTPS</acronym> プロトコルを使って、チェックアウトします。
	そしてそれらは、
	<code class="filename">/usr/ports</code>
	のローカル作業コピーに置かれます。
	もし <code class="filename">/usr/ports</code> がすでに存在して、
	それが <code class="command">svn</code> によって生成されたものでなければ、
	チェックアウトする前に、名前を変更するか削除してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn checkout <em class="replaceable"><code>https://svn0.us-west.FreeBSD.org</code></em>/ports/head /usr/ports</code></strong></pre><p>初めてチェックアウトする際には、
	リモートリポジトリのすべてのブランチをダウンロードするので時間がかかります。
	どうぞ我慢してください。</p><p>初めてのチェックアウト後は、
	以下を実行することでローカル作業コピーをアップデートできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn update <em class="replaceable"><code>lwcdir</code></em></code></strong></pre><p>この例で作成された
	<code class="filename">/usr/ports</code> をアップデートするには、
	以下のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>svn update /usr/ports</code></strong></pre><p>アップデートはチェックアウトにくらべ、
	変更点のあるファイルのみが転送されるので高速です。</p><p>チェックアウト後、ローカル作業コピーをアップデートするもうひとつの方法は、
	<code class="filename">/usr/ports</code>,
	<code class="filename">/usr/src</code> または
	<code class="filename">/usr/doc</code> ディレクトリの
	<code class="filename">Makefile</code> で提供されています。
	<code class="varname">SVN_UPDATE</code> を設定して
	<code class="buildtarget">update</code> ターゲットを使ってください。
	たとえば、<code class="filename">/usr/src</code>
        をアップデートするには、以下のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make update SVN_UPDATE=yes</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="svn-mirrors"></a>A.4.4. <span class="application">Subversion</span> ミラーサイト</h3></div></div></div><a id="idp96444368" class="indexterm"></a><p>すべてのミラーはすべてのリポジトリを持っています。</p><p>FreeBSD <span class="application">Subversion</span> サーバのマスタである
	<code class="systemitem">svn.FreeBSD.org</code> は、
	公には読み出し専用でアクセスできますが、
	将来的には変更される予定ですので、
	オフィシャルミラーを使うことが推奨されます。
	ブラウザを用いて FreeBSD の Subversion リポジトリを参照するには、<a class="link" href="http://svnweb.FreeBSD.org/" target="_top">http://svnweb.FreeBSD.org/</a>
	を利用してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD の <span class="application">Subversion</span>
	  ミラーのネットワークは、
	  まだ初期の段階にあるので、今後変更されることがあります。
	  以下のミラー一覧を不変なものとは考えないでください。
	  特に、サーバの <acronym class="acronym">SSL</acronym> 証明書は、
	  いずれかの時点で変更になるでしょう。</p></div><div class="informaltable"><table border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>名前</th><th>プロトコル</th><th>位置</th><th><acronym class="acronym">SSL</acronym> フィンガープリント</th></tr></thead><tbody><tr><td><code class="systemitem">svn0.us-west.FreeBSD.org</code></td><td><code class="literal">svn</code>, <a class="link" href="http://svn0.us-west.FreeBSD.org/" target="_top"><code class="literal">http</code></a>,
		<a class="link" href="https://svn0.us-west.FreeBSD.org/" target="_top"><code class="literal">https</code></a></td><td>USA, カリフォルニア</td><td>SHA1
		<code class="literal">1C:BD:85:95:11:9F:EB:75:A5:4B:C8:A3:FE:08:E4:02:73:06:1E:61</code></td></tr><tr><td><code class="systemitem">svn0.us-east.FreeBSD.org</code></td><td><code class="literal">svn</code>, <a class="link" href="http://svn0.us-east.FreeBSD.org/" target="_top"><code class="literal">http</code></a>,
		<a class="link" href="https://svn0.us-east.FreeBSD.org/" target="_top"><code class="literal">https</code></a>,
		<code class="literal">rsync</code></td><td>USA, ニュージャージ</td><td>SHA1
		<code class="literal">1C:BD:85:95:11:9F:EB:75:A5:4B:C8:A3:FE:08:E4:02:73:06:1E:61</code></td></tr><tr><td><code class="systemitem">svn0.eu.FreeBSD.org</code></td><td><code class="literal">svn</code>, <a class="link" href="http://svn0.eu.FreeBSD.org/" target="_top"><code class="literal">http</code></a>,
		<a class="link" href="https://svn0.eu.FreeBSD.org/" target="_top"><code class="literal">https</code></a>,
		<code class="literal">rsync</code></td><td>Europe, UK</td><td>SHA1
		<code class="literal">98:22:1F:B0:CF:20:ED:3F:5D:05:38:AB:50:F1:47:53:3C:6B:14:6A</code></td></tr><tr><td><code class="systemitem">svn0.ru.FreeBSD.org</code></td><td><code class="literal">svn</code>, <a class="link" href="http://svn0.ru.FreeBSD.org/" target="_top"><code class="literal">http</code></a>,
		<a class="link" href="https://svn0.ru.FreeBSD.org/" target="_top"><code class="literal">https</code></a>,
		<code class="literal">rsync</code></td><td>ロシア、モスクワ</td><td>SHA1
		<code class="literal">F6:44:AA:B9:03:89:0E:3E:8C:4D:4D:14:F0:27:E6:C7:C1:8B:17:C5</code></td></tr></tbody></table></div><p><acronym class="acronym">HTTPS</acronym> は推奨されているプロトコルです。
	他のコンピュータが FreeBSD ミラーを装う (一般的には
	<span class="quote">「<span class="quote">マン・イン・ザ・ミドル</span>」</span> 攻撃として知られています)
	ことや、もしくは、
	エンドユーザに対し好ましくない内容を送りつけようということに対し保護を行います。</p><p><a id="svn-mirrors-fingerprint"></a><acronym class="acronym">HTTPS</acronym>
	ミラーへの最初の接続の際には、
	サーバの <span class="emphasis"><em>フィンガープリント</em></span>
	の確認を求められます。</p><pre class="screen">Error validating server certificate for 'https://svn0.us-west.freebsd.org:443':
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
 - The certificate hostname does not match.
Certificate information:
 - Hostname: svnmir.ysv.FreeBSD.org
 - Valid: from Jul 29 22:01:21 2013 GMT until Dec 13 22:01:21 2040 GMT
 - Issuer: clusteradm, FreeBSD.org, (null), CA, US (clusteradm@FreeBSD.org)
 - Fingerprint: 1C:BD:85:95:11:9F:EB:75:A5:4B:C8:A3:FE:08:E4:02:73:06:1E:61
(R)eject, accept (t)emporarily or accept (p)ermanently?</pre><p>フィンガープリントを上の表の一覧のものと照合してください。
	フィンガープリントが一致したら、
	サーバのセキュリティ証明書を一時的 (permanently)
	もしくは恒久的 (temporarily) に受け入れてください。
	一時的な認証であれば、
	サーバとの一回のセッションで有効期限が切れるため、
	次回の接続時にはもう一度検証が行われます。
	恒常的な認証を選んだ場合には、認証のための証明書が
	<code class="filename">~/.subversion/auth/</code> に保存され、
	有効期限が切れるまでは、
	フィンガープリントの確認は求められません。</p><p>ファイアウォールまたは他の問題のため、<code class="literal">https</code>
	を使えなければ、転送速度がより少し早い <code class="literal">svn</code>
	を使ってください。
	両方を使えない場合には、
	<code class="literal">http</code> を使ってください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96497360"></a>A.4.5. より詳しい情報</h3></div></div></div><p><span class="application">Subversion</span> の利用に関する他の情報は、
	<a class="link" href="http://svnbook.red-bean.com/" target="_top">Version
	  Control with Subversion</a> や <a class="link" href="http://subversion.apache.org/docs/" target="_top">Subversion
	Documentation</a> といった
	<span class="quote">「<span class="quote">Subversion Book</span>」</span> をご覧ください。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirrors-rsync"></a>A.5. <span class="application">rsync</span> を使用する</h2></div></div></div><p>次のサイトは、FreeBSD を rsync プロトコルで提供しています。
      <span class="application">rsync</span> ユーティリティは
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rcp</span>(1)</span></a> コマンドとほぼ同じ機能を実現するもので、
      こちらの方が豊富なオプションを備え、送り側と受け側の差分だけを
      転送するという rsync リモート更新プロトコルを使用するという点が異なります。
      rsync を使うと、ネットワーク経由での同期を非常に高速に行なうことが可能です。
      特に、FreeBSD <acronym class="acronym">FTP</acronym> サーバや CVS
      リポジトリのミラーサイトを作成する時に便利でしょう。
      <span class="application">rsync</span> は、多くのオペレーティングシステムで
      利用することができます。FreeBSD 版は、<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/rsync/pkg-descr">net/rsync</a> の
      port か、package を使ってください。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">チェコ共和国</span></dt><dd><p>rsync://ftp.cz.FreeBSD.org/</p><p>提供しているコレクション:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ftp: FreeBSD <acronym class="acronym">FTP</acronym>
		サーバの部分ミラー</p></li><li class="listitem"><p>FreeBSD: FreeBSD <acronym class="acronym">FTP</acronym>
		サーバの全体ミラー</p></li></ul></div></dd><dt><span class="term">オランダ</span></dt><dd><p>rsync://ftp.nl.FreeBSD.org/</p><p>提供しているコレクション:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD: FreeBSD <acronym class="acronym">FTP</acronym>
		サーバの全体ミラー</p></li></ul></div></dd><dt><span class="term">ロシア</span></dt><dd><p>rsync://ftp.mtu.ru/</p><p>提供しているコレクション:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD: FreeBSD <acronym class="acronym">FTP</acronym>
		サーバの全体ミラー</p></li><li class="listitem"><p>FreeBSD-Archive: FreeBSD アーカイブ <acronym class="acronym">FTP</acronym>
		サーバのミラー</p></li></ul></div></dd><dt><span class="term">スウェーデン</span></dt><dd><p>rsync://ftp4.se.freebsd.org/</p><p>提供しているコレクション:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD: FreeBSD <acronym class="acronym">FTP</acronym>
		サーバの全体ミラー</p></li></ul></div></dd><dt><span class="term">台湾</span></dt><dd><p>rsync://ftp.tw.FreeBSD.org/</p><p>rsync://ftp2.tw.FreeBSD.org/</p><p>rsync://ftp6.tw.FreeBSD.org/</p><p>提供しているコレクション:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD: FreeBSD <acronym class="acronym">FTP</acronym>
		サーバの全体ミラー</p></li></ul></div></dd><dt><span class="term">イギリス</span></dt><dd><p>rsync://rsync.mirrorservice.org/</p><p>提供しているコレクション:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ftp.freebsd.org: FreeBSD <acronym class="acronym">FTP</acronym>
		サーバの全体ミラー</p></li></ul></div></dd><dt><span class="term">アメリカ合衆国</span></dt><dd><p>rsync://ftp-master.FreeBSD.org/</p><p>このサーバは、FreeBSD の一次ミラーサイトとしてのみ使われています。</p><p>提供しているコレクション:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD: FreeBSD <acronym class="acronym">FTP</acronym>
		サーバのマスタアーカイブ</p></li><li class="listitem"><p>acl: The FreeBSD マスタ ACL リスト</p></li></ul></div><p>rsync://ftp13.FreeBSD.org/</p><p>提供しているコレクション:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD: FreeBSD <acronym class="acronym">FTP</acronym>
		サーバの全体ミラー</p></li></ul></div></dd></dl></div></div></div><div class="appendix"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bibliography"></a>付録B 参考図書</h2></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#bibliography-freebsd">B.1. FreeBSD 専門の書籍</a></span></dt><dt><span class="sect1"><a href="#bibliography-userguides">B.2. 利用者向けのガイド</a></span></dt><dt><span class="sect1"><a href="#bibliography-adminguides">B.3. 管理者向けのガイド</a></span></dt><dt><span class="sect1"><a href="#idp96627920">B.4. プログラマ向けのガイド</a></span></dt><dt><span class="sect1"><a href="#idp96652112">B.5. オペレーティングシステム内部</a></span></dt><dt><span class="sect1"><a href="#idp96687696">B.6. セキュリティの参考資料</a></span></dt><dt><span class="sect1"><a href="#bibliography-hardware">B.7. ハードウェアの参考資料</a></span></dt><dt><span class="sect1"><a href="#bibliography-history">B.8. <span class="trademark">UNIX</span>® の歴史</a></span></dt><dt><span class="sect1"><a href="#bibliography-journals">B.9. 定期刊行物、雑誌およびジャーナル</a></span></dt></dl></div><p><span class="emphasis"><em>訳: 中井 幸博 <code class="email">&lt;<a xmlns="" class="email" href="mailto:nakai@mlab.t.u-tokyo.ac.jp">nakai@mlab.t.u-tokyo.ac.jp</a>&gt;</code>, 1996 年 10 月 12 日。</em></span></p><p>FreeBSD オペレーティングシステムの個々の部分については
    マニュアルページで定義のような説明がなされていますが,
    どうやってその部分どうしをつなぎあわせて
    オペレーティングシステム全体を円滑に動作させるかについては,
    ほとんど説明されていません。
    それを補うためにはのよい本や, <span class="trademark">UNIX</span>® システム管理についての
    利用者向けのマニュアルが欠かせません。</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-freebsd"></a>B.1. FreeBSD 専門の書籍</h2></div></div></div><p><span class="emphasis"><em>非英語文化圏の書籍:</em></span></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://jdli.tw.FreeBSD.org/publication/book/freebsd2/index.htm" target="_top">
	    FreeBSD 入門與應用</a> (繁体字中国語)。
	  <a class="link" href="http://www.drmaster.com.tw/" target="_top">Drmaster</a>
	  発行, 1997. ISBN 9-578-39435-7.</p></li><li class="listitem"><p>FreeBSD Unleashed (簡体字中国語訳),
	  <a class="link" href="http://www.hzbook.com/" target="_top">China Machine
	    Press</a> 発行. ISBN 7-111-10201-0.</p></li><li class="listitem"><p>FreeBSD From Scratch Second Edition (簡体字中国語),
	  China Machine Press 発行. ISBN
	  7-111-10286-X.</p></li><li class="listitem"><p>FreeBSD ハンドブック第 2 版 (簡体字中国語訳), <a class="link" href="http://www.ptpress.com.cn/" target="_top">Posts &amp;
	    Telecom Press</a> 発行. ISBN 7-115-10541-3.</p></li><li class="listitem"><p>FreeBSD &amp; Windows (簡体字中国語),
	  <a class="link" href="http://www.tdpress.com/" target="_top">China Railway
	    Publishing House</a> 発行. ISBN 7-113-03845-X</p></li><li class="listitem"><p>FreeBSD Internet Services HOWTO (簡体字中国語),
	  China Railway Publishing House 発行. ISBN
	  7-113-03423-3</p></li><li class="listitem"><p>FreeBSD入門キット AT互換機版 第二版。 宮嵜忠臣 著。
	  秀和システム。 ISBN 4-87966-535-5 C3055 2900 円。</p></li><li class="listitem"><p>ここまでできる FreeBSD パワーガイド。
	  霜山 滋, 仲道 嘉夫, 山中 右次 著。 秀和システム。
	  ISBN 4-87966-637-8 2600円。</p></li><li class="listitem"><p><a class="link" href="http://www.shoeisha.co.jp/book/Detail.asp?bid=650" target="_top">
	    FreeBSD徹底入門</a>。
	  あさだ たくや / 天川 修平 / 衛藤 敏寿 / 浜田 直樹 / 細川 達己 / 三田 吉郎 著。
	  <a class="link" href="http://www.shoeisha.co.jp/" target="_top">翔泳社</a>。
	  ISBN 4-88135-473-6 3600 円。</p></li><li class="listitem"><p><a class="link" href="http://www.ascii.co.jp/pb/book1/shinkan/detail/1322785.html" target="_top">パーソナル
	    UNIX スターターキット FreeBSD</a>。
	  民田 雅人 / 古場 正行 / 増田 佳泰 / 天池 健 / 宮川 晋 共著。
	  <a class="link" href="http://www.ascii.co.jp/" target="_top">アスキー</a>。
	  ISBN 4-7561-1733-3 3000 円。</p></li><li class="listitem"><p>FreeBSD ハンドブック (日本語版)。
	  <a class="link" href="http://www.ascii.co.jp/" target="_top">アスキー</a>。
	  ISBN 4-7561-1580-2 3800 円。</p></li><li class="listitem"><p>FreeBSD mit Methode (ドイツ語版)。
	  <a class="link" href="http://www.cul.de" target="_top">Computer und Literatur
	    Verlag</a>/Vertrieb Hanser 発行。1998。 ISBN
	  3-932311-31-0</p></li><li class="listitem"><p><a class="link" href="http://www.mitp.de/vmi/mitp/detail/pWert/1343/" target="_top">
	    FreeBSD de Luxe</a> (ドイツ語),
	  <a class="link" href="http://www.mitp.de" target="_top">Verlag Modere
	    Industrie</a> 発行, 2003 年。ISBN 3-8266-1343-0.
	</p></li><li class="listitem"><p><a class="link" href="http://www.pc.mycom.co.jp/FreeBSD/install-manual.html" target="_top">FreeBSD
	    インストール &amp; 活用マニュアル</a>,
	  <a class="link" href="http://www.pc.mycom.co.jp/" target="_top">
	    毎日コミュニケーションズ</a>発行。1998 年. ISBN
	  4-8399-0112-0.</p></li><li class="listitem"><p>Onno W Purbo, Dodi Maryanto, Syahrial Hubbany, Widjil
	  Widodo 著 <span class="emphasis"><em><a class="link" href="http://maxwell.itb.ac.id/" target="_top">FreeBSD
	    を使ったインターネットサーバの構築 (Building Internet Server
	    with FreeBSD)</a></em></span> (インドネシア語),
	  <a class="link" href="http://www.elexmedia.co.id/" target="_top">Elex
	    Media Komputindo</a> 発行。</p></li><li class="listitem"><p>Absolute BSD: The Ultimate Guide to FreeBSD
	  (繁体字中国語訳) <a class="link" href="http://www.grandtech.com.tw/" target="_top">GrandTech
	    Press</a> 発行 (2003 年)。ISBN 986-7944-92-5.</p></li><li class="listitem"><p><a class="link" href="http://www.twbsd.org/cht/book/" target="_top">The
	    FreeBSD 6.0 Book</a> (繁体字中国語),
	  Drmaster 発行 (2006 年)。ISBN 9-575-27878-X.</p></li></ul></div><p><span class="emphasis"><em>英語の書籍:</em></span></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.absoluteFreeBSD.com/" target="_top">Absolute
	    FreeBSD, 2nd Edition:  The Complete Guide to
	    FreeBSD</a>, <a class="link" href="http://www.nostarch.com/" target="_top">No Starch
	    Press</a> 刊、2007 年。ISBN: 978-1-59327-151-0</p></li><li class="listitem"><p><a class="link" href="http://www.freebsdmall.com/cgi-bin/fm/bsdcomp" target="_top">
	    The Complete FreeBSD</a>,
	  <a class="link" href="http://www.oreilly.com/" target="_top">O'Reilly</a>、
	  2003 年。ISBN: 0596005164</p></li><li class="listitem"><p><a class="link" href="http://www.freebsd-corp-net-guide.com/" target="_top">The
	    FreeBSD Corporate Networker's Guide</a>,
	  <a class="link" href="http://www.awl.com/aw/" target="_top">Addison-Wesley</a> 刊、
	  2000 年。ISBN: 0201704811</p></li><li class="listitem"><p><a class="link" href="http://andrsn.stanford.edu/FreeBSD/introbook/" target="_top">
	    FreeBSD: An Open-Source Operating System for Your Personal
	    Computer</a>、The Bit Tree Press 刊、2001 年。
	  ISBN: 0971204500</p></li><li class="listitem"><p>Teach Yourself FreeBSD in 24 Hours, <a class="link" href="http://www.samspublishing.com/" target="_top">Sams</a> 刊、
	  2002 年。ISBN: 0672324245</p></li><li class="listitem"><p>FreeBSD 6 unleashed, <a class="link" href="http://www.samspublishing.com/" target="_top">Sams</a> 刊、
	  2006 年。ISBN: 0672328755</p></li><li class="listitem"><p>FreeBSD: The Complete Reference, <a class="link" href="http://books.mcgraw-hill.com" target="_top">McGrawHill</a> 刊、
	  2003 年。ISBN: 0072224096</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-userguides"></a>B.2. 利用者向けのガイド</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>オハイオ州立大学による <a class="link" href="http://www.cs.duke.edu/csl/docs/unix_course/" target="_top">UNIX
	    Introductory Course</a>。
	  オンラインで HTML 版と PostScript 版が利用可能。</p><p>FreeBSD イタリア語ドキュメンテーションプロジェクトの一環
	  として、このドキュメントの <a class="link" href="../../../../doc/it_IT.ISO8859-15/books/unix-introduction/index.html" target="_top">イタリア語訳</a>
	  が用意されています。</p></li><li class="listitem"><p><a class="link" href="http://www.jp.FreeBSD.org/" target="_top">FreeBSD
	    友の会 jpman プロジェクト</a>。<a class="link" href="http://www.pc.mycom.co.jp/FreeBSD/urm.html" target="_top">FreeBSD
	    User's Reference Manual</a> (日本語訳)。
	  <a class="link" href="http://www.pc.mycom.co.jp/" target="_top">毎日コミュニケーションズ</a>,
	  1998。ISBN4-8399-0088-4 P3800E。</p></li><li class="listitem"><p><a class="link" href="http://www.ed.ac.uk/" target="_top">Edinburgh
	    University</a> による UNIX 環境の初心者向け
	  <a class="link" href="http://unixhelp.ed.ac.uk/" target="_top">オンラインガイド</a>。</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-adminguides"></a>B.3. 管理者向けのガイド</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.jp.FreeBSD.ORG/" target="_top">FreeBSD
	    友の会 jpman プロジェクト</a>。<a class="link" href="http://www.pc.mycom.co.jp/FreeBSD/sam.html" target="_top">FreeBSD
	    System Administrator's Manual</a> (日本語訳)。
	  <a class="link" href="http://www.pc.mycom.co.jp/" target="_top">毎日コミュニケーションズ</a>,
	  1998.  ISBN4-8399-0109-0
	  P3300E.</p></li><li class="listitem"><p>Dreyfus, Emmanuel.  <a class="link" href="http://www.eyrolles.com/Informatique/Livre/9782212114638/" target="_top">Cahiers
	  de l'Admin: BSD</a> 第 2 版。(フランス語、「管理者ノート」)、Eyrolles,
	  2004.  ISBN 2-212-11463-X</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp96627920"></a>B.4. プログラマ向けのガイド</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Computer Systems Research Group, UC Berkeley.
	  <span class="emphasis"><em>4.4BSD Programmer's Reference Manual</em></span>.
	  O'Reilly &amp; Associates, Inc., 1994.  ISBN
	  1-56592-078-3</p></li><li class="listitem"><p>Computer Systems Research Group, UC Berkeley.
	  <span class="emphasis"><em>4.4BSD Programmer's Supplementary
	    Documents</em></span>.  O'Reilly &amp; Associates, Inc.,
	  1994.  ISBN 1-56592-079-1</p></li><li class="listitem"><p>Harbison, Samuel P. and Steele, Guy L. Jr. <span class="emphasis"><em>C:
	    A Reference Manual</em></span>.  4th Ed. Prentice Hall,
	  1995.  ISBN 0-13-326224-3
	  (訳注: 邦訳は以下のものが出版されています。
	  斎藤 信男監訳。
	  <span class="emphasis"><em>新・詳説 C 言語リファレンス
	    [H&amp;Sリファレンス]</em></span>。
	  ソフトバンク, 1994。
	  ISBN 4-89052-506-8
	  原本は第 4 版だが, 訳出は第 3 版のみ。)</p></li><li class="listitem"><p>Kernighan, Brian and Dennis M. Ritchie.  <span class="emphasis"><em>The C
	    Programming Language</em></span>.  2nd Ed. PTR Prentice
	  Hall, 1988.  ISBN 0-13-110362-8
	  (訳注: 邦訳は以下のものが出版されています。
	  石田 晴久 訳。
	  <span class="emphasis"><em>プログラミング言語 C 第 2 版(訳書訂正版)</em></span>
	  共立出版, 1989。
	  ISBN 4-320-02692-6)</p></li><li class="listitem"><p>Lehey, Greg.  <span class="emphasis"><em>Porting UNIX
	    Software</em></span>.  O'Reilly &amp; Associates, Inc.,
	  1995.  ISBN 1-56592-126-7</p></li><li class="listitem"><p>Plauger, P. J. <span class="emphasis"><em>The Standard C
	    Library</em></span>. Prentice Hall, 1992.
	  ISBN 0-13-131509-9
	  (訳注: 邦訳は以下のものが出版されています。
	  福富 寛 / 門倉 明彦 / 清水 恵介 訳。
	  <span class="emphasis"><em>標準 C ライブラリ ANSI/ISO/JIS C規格</em></span>.
	  トッパン, 1995。
	  ISBN 4-8101-8541-9)</p></li><li class="listitem"><p>Spinellis, Diomidis.  <a class="link" href="http://www.spinellis.gr/codereading/" target="_top"><span class="emphasis"><em>Code
	      Reading: The Open Source Perspective</em></span></a>.
	  Addison-Wesley, 2003.  ISBN 0-201-79940-5</p></li><li class="listitem"><p>Spinellis, Diomidis.  <a class="link" href="http://www.spinellis.gr/codequality/" target="_top"><span class="emphasis"><em>Code
	      Quality: The Open Source Perspective</em></span></a>.
	  Addison-Wesley, 2006.  ISBN 0-321-16607-8</p></li><li class="listitem"><p>Stevens, W. Richard and Stephen A. Rago.
	  <span class="emphasis"><em>Advanced Programming in the UNIX
	    Environment</em></span>.  2nd Ed. Reading, Mass. :
	  Addison-Wesley, 2005.  ISBN 0-201-43307-9
	  (訳注: 第 1 版の邦訳は以下のものが出版されています。
	  大木 敦雄 訳。
	  <span class="emphasis"><em>詳解 UNIX プログラミング</em></span>。トッパン, 1994。
	  ISBN 4-89052-524-6)</p></li><li class="listitem"><p>Stevens, W. Richard. <span class="emphasis"><em>UNIX Network
	    Programming</em></span>. 2nd Ed. PTR Prentice Hall, 1998.
	  ISBN 0-13-949876-1
	  (訳注:
	  第 1 版の邦訳は以下のものが出版されています.
	  篠田 陽一 訳.
	  <span class="emphasis"><em>UNIX ネットワークプログラミング</em></span>。
	  トッパン, 1992.
	  ISBN 4-8101-8509-5)
	  第 2 版の邦訳は以下のものが出版されています。
	  篠田 陽一 訳.
	  <span class="emphasis"><em>UNIX ネットワークプログラミング 第 2 版 Vol.1</em></span>。
	  トッパン, 1999。
	  ISBN 4-8101-8612-1)</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp96652112"></a>B.5. オペレーティングシステム内部</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Andleigh, Prabhat K.  <span class="emphasis"><em>UNIX System
	    Architecture</em></span>.  Prentice-Hall, Inc., 1990.  ISBN
	  0-13-949843-5</p></li><li class="listitem"><p>Jolitz, William.  <span class="quote">「<span class="quote">Porting UNIX to the
	    386</span>」</span>.  <span class="emphasis"><em>Dr. Dobb's Journal</em></span>.
	  January 1991-July 1992.</p></li><li class="listitem"><p>Leffler, Samuel J., Marshall Kirk McKusick, Michael J
	  Karels and John Quarterman <span class="emphasis"><em>The Design and
	    Implementation of the 4.3BSD UNIX Operating
	    System</em></span>.  Reading, Mass. : Addison-Wesley, 1989.
	  ISBN 0-201-06196-1
	  (訳注: 邦訳は以下のものが出版されています。
	  中村 明 / 相田 仁 / 計 宇生 / 小池 汎平 訳。
	  <span class="emphasis"><em>UNIX 4.3BSDの設計と実装</em></span>。丸善, 1991。
	  ISBN 4-621-03607-6)</p></li><li class="listitem"><p>Leffler, Samuel J., Marshall Kirk McKusick,
	  <span class="emphasis"><em>The Design and Implementation of the 4.3BSD UNIX
	    Operating System: Answer Book</em></span>.  Reading, Mass.
	  : Addison-Wesley, 1991.  ISBN 0-201-54629-9
	  (訳注: 邦訳は以下のものが出版されています。
	  相田 仁 / 計 宇生 / 小池 汎平 訳。
	  <span class="emphasis"><em>UNIX 4.3BSDの設計と実装</em></span>。
	  アンサーブック, トッパン, 1991。
	  ISBN 4-8101-8039-5)</p></li><li class="listitem"><p>McKusick, Marshall Kirk, Keith Bostic, Michael J Karels,
	  and John Quarterman. <span class="emphasis"><em>The Design and
	    Implementation of the 4.4BSD Operating System</em></span>.
	  Reading, Mass. : Addison-Wesley, 1996.  ISBN
	  0-201-54979-4</p><p>(この本の第二章が FreeBSD ドキュメンテーションプロジェクト
	  の一部として <a class="link" href="../../../../doc/ja_JP.eucJP/books/design-44bsd/book.html" target="_top">オンライン</a>
	  で公開されています。)</p></li><li class="listitem"><p>Marshall Kirk McKusick, George V. Neville-Neil
	  <span class="emphasis"><em>The Design and Implementation of the FreeBSD
	    Operating System</em></span>.  Boston, Mass. :
	  Addison-Wesley, 2004.  ISBN 0-201-70245-2</p></li><li class="listitem"><p>Marshall Kirk McKusick, George V. Neville-Neil,
	  Robert N. M. Watson <span class="emphasis"><em>The Design and Implementation
	    of the FreeBSD Operating System, 2nd Ed.</em></span>.
	  Westford, Mass. : Pearson Education, Inc., 2014.
	  ISBN 0-321-96897-2</p></li><li class="listitem"><p>Stevens, W. Richard.  <span class="emphasis"><em>TCP/IP Illustrated,
	    Volume 1: The Protocols</em></span>.  Reading, Mass. :
	  Addison-Wesley, 1996. ISBN 0-201-63346-9</p></li><li class="listitem"><p>Schimmel, Curt.  <span class="emphasis"><em>Unix Systems for Modern
	    Architectures</em></span>.  Reading, Mass. :
	  Addison-Wesley, 1994.  ISBN 0-201-63338-8</p></li><li class="listitem"><p>Stevens, W. Richard. <span class="emphasis"><em>TCP/IP Illustrated,
	    Volume 3: TCP for Transactions, HTTP, NNTP and the UNIX
	    Domain Protocols</em></span>.  Reading, Mass. :
	  Addison-Wesley, 1996.  ISBN 0-201-63495-3
	  (訳注: 邦訳は以下のものが出版されています。
	  中本 幸一 / 石川 裕次 / 田中 伸佳 訳。
	  <span class="emphasis"><em>詳解 TCP/IP Vol.3: トランザクション
	    TCP, HTTP, NNTP, UNIX ドメインプロトコル</em></span>,
	  アジソンウェスレイパブリッシャーズジャパン, 1998。
	  ISBN 4-8101-8039-5)</p></li><li class="listitem"><p>Vahalia, Uresh.  <span class="emphasis"><em>UNIX Internals -- The New
	  Frontiers</em></span>.	 Prentice Hall, 1996.  ISBN
	  0-13-101908-2
	  (訳注: 邦訳は以下のものが出版されています。
	  徳田 英幸 / 中村 明 / 戸辺 義人 / 津田 悦幸 訳。
	  <span class="emphasis"><em>最前線UNIXのカーネル</em></span>,
	  ピアソンエデュケーション, 2000。
	  ISBN 4-89471-189-3)</p></li><li class="listitem"><p>Wright, Gary R. and W. Richard Stevens.
	  <span class="emphasis"><em>TCP/IP Illustrated, Volume 2: The
	    Implementation</em></span>.  Reading, Mass. :
	  Addison-Wesley, 1995.  ISBN 0-201-63354-X</p></li><li class="listitem"><p>Messmer, Hans-Peter.  <span class="emphasis"><em>The Indispensable PC
	    Hardware Book</em></span>, 4th Ed. Reading, Mass :
	  Addison-Wesley Pub. Co., 2002.  ISBN 0-201-59616-4</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp96687696"></a>B.6. セキュリティの参考資料</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cheswick, William R. and Steven M. Bellovin.
	  <span class="emphasis"><em>Firewalls and Internet Security: Repelling the
	    Wily Hacker</em></span>.  Reading, Mass. : Addison-Wesley,
	  1995.  ISBN 0-201-63357-4
	  (訳注: 邦訳は以下のものが出版されています。
	  川副 博 監訳。<span class="emphasis"><em>ファイアウォール</em></span>。
	  ソフトバンク, 1995。
	  ISBN 4-89052-672-2)</p></li><li class="listitem"><p>Garfinkel, Simson.  <span class="emphasis"><em>PGP Pretty Good
	    Privacy</em></span> O'Reilly &amp; Associates, Inc., 1995.
	  ISBN 1-56592-098-8</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-hardware"></a>B.7. ハードウェアの参考資料</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Anderson, Don and Tom Shanley.  <span class="emphasis"><em>Pentium
	    Processor System Architecture</em></span>.  2nd Ed.
	  Reading, Mass. : Addison-Wesley, 1995.  ISBN
	  0-201-40992-5</p></li><li class="listitem"><p>Ferraro, Richard F. <span class="emphasis"><em>Programmer's Guide to the
	    EGA, VGA, and Super VGA Cards</em></span>.  3rd ed.
	  Reading, Mass. : Addison-Wesley, 1995.  ISBN
	  0-201-62490-7</p></li><li class="listitem"><p>Intel Corporation は、自社の CPU
	  やチップセットに関する文書を自社の
	  <a class="link" href="http://developer.intel.com/" target="_top">開発者向け Web
	    サイト</a> で公開しています。文書のフォーマットは通常
	  PDF です。</p></li><li class="listitem"><p>Shanley, Tom. <span class="emphasis"><em>80486 System
	    Architecture</em></span>.  3rd Ed. Reading, Mass. :
	  Addison-Wesley, 1995.  ISBN 0-201-40994-1</p></li><li class="listitem"><p>Shanley, Tom. <span class="emphasis"><em>ISA System
	    Architecture</em></span>.  3rd Ed. Reading, Mass. :
	  Addison-Wesley, 1995.  ISBN 0-201-40996-8</p></li><li class="listitem"><p>Shanley, Tom.  <span class="emphasis"><em>PCI System
	    Architecture</em></span>.  4th Ed. Reading, Mass. :
	  Addison-Wesley, 1999.  ISBN 0-201-30974-2</p></li><li class="listitem"><p>Van Gilluwe, Frank.  <span class="emphasis"><em>The Undocumented
	    PC</em></span>, 2nd Ed.  Reading, Mass: Addison-Wesley Pub.
	  Co., 1996.  ISBN 0-201-47950-8</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-history"></a>B.8. <span class="trademark">UNIX</span>® の歴史</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Lion, John <span class="emphasis"><em>Lion's Commentary on UNIX, 6th Ed.
	    With Source Code</em></span>.  ITP Media Group, 1996.  ISBN
	  1573980137</p></li><li class="listitem"><p>Raymond, Eric s. <span class="emphasis"><em>The New Hacker's Dictionary,
	    3rd edition</em></span>.  MIT Press, 1996.  ISBN
	  0-262-68092-0 これは <a class="link" href="http://www.catb.org/~esr/jargon/html/index.html" target="_top">ジャーゴンファイル
	    (Jargon File)</a> として知られています。</p></li><li class="listitem"><p>Saulus, Peter H.  <span class="emphasis"><em>A quarter century of
	    UNIX</em></span>.  Addison-Wesley Publishing Company, Inc.,
	  1994.  ISBN 0-201-54777-5</p></li><li class="listitem"><p>Simon Garfinkel, Daniel Weise, Steven Strassmann.
	  <span class="emphasis"><em>The UNIX-HATERS Handbook</em></span>.  IDG Books
	  Worldwide, Inc., 1994.  ISBN 1-56884-203-1.  絶版となりましたが、<a class="link" href="http://www.simson.net/ref/ugh.pdf" target="_top">オンライン</a>
	  で入手できます。</p></li><li class="listitem"><p>Don Libes, Sandy Ressler <span class="emphasis"><em>Life with
	    UNIX</em></span> ― special edition.  Prentice-Hall,
	  Inc., 1989.  ISBN 0-13-536657-7
	  (訳注: 邦訳は以下のものが出版されています。
	  坂本 文 監訳. <span class="emphasis"><em>Life with UNIX</em></span>.
	  アスキー, 1990。
	  ISBN 4-7561-0783-4
	  邦訳が Special 版の訳出か否かは不明)</p></li><li class="listitem"><p><span class="emphasis"><em>BSD 系 OS の系譜図</em></span>。
	  <code class="uri"><a class="uri" href="https://svnweb.freebsd.org/base/head/share/misc/bsd-family-tree?view=co" target="_top">https://svnweb.freebsd.org/base/head/share/misc/bsd-family-tree?view=co</a></code>
	  か、もしくは、FreeBSD マシンにある <a class="link" href="file://localhost/usr/share/misc/bsd-family-tree" target="_top"><code class="filename">/usr/share/misc/bsd-family-tree</code></a>。</p></li><li class="listitem"><p><span class="emphasis"><em>Networked Computer Science Technical Reports
	    Library</em></span>.  <code class="uri"><a class="uri" href="http://www.ncstrl.org/" target="_top">http://www.ncstrl.org/</a></code></p></li><li class="listitem"><p><span class="emphasis"><em>Computer Systems Research group (CSRG) からの古い
	    BSD リリース集</em></span>。<code class="uri"><a class="uri" href="http://www.mckusick.com/csrg/" target="_top">http://www.mckusick.com/csrg/</a></code>:
	  この 4 枚 CD セットには、1BSD から 4.4BSD までと 4.4BSD-Lite2
	  が含まれます (残念ながら 2.11BSD は含まれていません)。
	  また 4 枚目の CD には、最終ソースおよび SCCS
	  ファイルが含まれています。</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-journals"></a>B.9. 定期刊行物、雑誌およびジャーナル</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.admin-magazin.de/" target="_top">Admin
	    Magazin</a> (in German), published by
	  Medialinx AG. ISSN: 2190-1066</p></li><li class="listitem"><p><a class="link" href="http://www.bsdmag.org/" target="_top">BSD
	    Magazine</a>, published by Software Press Sp. z o.o.
	  SK. ISSN: 1898-9144</p></li><li class="listitem"><p><a class="link" href="http://www.bsdnow.tv/" target="_top">BSD Now
	    ― Video Podcast</a>, published by
	  Jupiter Broadcasting LLC</p></li><li class="listitem"><p><a class="link" href="http://bsdtalk.blogspot.com/" target="_top">BSD
	    Talk Podcast</a>, by Will Backman</p></li><li class="listitem"><p><a class="link" href="http://freebsdjournal.com/" target="_top">FreeBSD
	    Journal</a>, published by S&amp;W
	  Publishing, sponsored by The FreeBSD Foundation.
	  ISBN: 978-0-615-88479-0</p></li></ul></div></div></div><div class="appendix"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="eresources"></a>付録C インターネット上のリソース</h2></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#eresources-mail">C.1. メーリングリスト</a></span></dt><dt><span class="sect1"><a href="#eresources-news">C.2. Usenet ニュースグループ</a></span></dt><dt><span class="sect1"><a href="#eresources-web">C.3. World Wide Web サイト</a></span></dt><dt><span class="sect1"><a href="#eresources-email">C.4. Email アドレス</a></span></dt><dt><span class="sect1"><a href="#eresources-shell">C.5. シェルアカウント</a></span></dt></dl></div><p><span class="emphasis"><em>訳: 前田 幸範 <code class="email">&lt;<a xmlns="" class="email" href="mailto:yuki@jp.FreeBSD.org">yuki@jp.FreeBSD.org</a>&gt;</code>、1996 年 8 月 28 日</em></span></p><p>FreeBSD の進歩は急速であり、
    印刷したメディアは最新の開発をフォローするのに実用的ではありません。
    それだけしかない、というわけではありませんが、
    最新情報を入手する方法としては電子的なリソースがベストです。
    FreeBSD はボランティアの努力によって、ユーザコミュニティ自体が、
    一種の <span class="quote">「<span class="quote">テクニカルサポート部門</span>」</span> としての役割も通常果たしており、
    電子メールや Usenet
    のニュースがこれらのコミュニティにたどり着く最も効果的な方法になっています。</p><p>以下に、FreeBSD
    ユーザコミュニティに連絡を取る場合の最も重要な点についての
    概略を示します。
    もしここに書かれていない他のリソースに気がついた場合は、それらを
    <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc" target="_top">FreeBSD documentation project メーリングリスト</a> に送って頂ければ、
    それらをここに含めるかもしれません。</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-mail"></a>C.1. メーリングリスト</h2></div></div></div><p>多くの FreeBSD の開発メンバは USENET を読むことができますが、
      もし、<code class="literal">comp.unix.bsd.freebsd.*</code>
      のグループの一つに質問を投稿したとしても
      タイムリにその質問を受け取るということは保証できません。
      質問を適切なメーリングリストに投稿すれば、
      私たちか FreeBSD の関係者から、よりよい
      (そして少なくともより早い)
      反応がいつでも得られることでしょう。</p><p>さまざまなメーリングリストの憲章を
      このドキュメントの最後に記載します。<span class="emphasis"><em>私たちは、
	メーリングリストの質、特に技術面に関する質を高く保つ
	ために努力しているので、
	メーリングリストに参加する前にその憲章を読んでください。
      </em></span> 私たちのメーリングリストの参加者のほとんどは、
      現在非常 にたくさんの FreeBSD
      に関連したメッセージを毎日受け取っており、メーリン
      グリストに対するふさわしい
      用いられ方をするための憲章やルールを決めるこ とによって、
      メーリングリストの S/N 比を高くする保つように励んでいます。
      そうしないと、結果的に、メーリングリストがプロジェクトにとって
      事実上のコミュニケーションの手段になってしまうでしょう。</p><p>どのメーリングリストに質問を投稿すべきか迷った場合には、
      <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/freebsd-questions" target="_top">How to get best
      results from the FreeBSD-questions mailing list</a>
      をご覧ください。</p><p>どこのメーリングリストに投稿する場合でも、メーリングリストを
      最大限に活用する方法を理解しておいてください。
      たとえば、<a class="link" href="../../../../doc/en_US.ISO8859-1/articles/mailing-list-faq" target="_top">Mailing
      List Frequently Asked Questions</a> (FAQ) 文書を読んで、
      繰り返し行われる議論を避ける方法を理解してください。</p><p>メーリングリストはいずれもアーカイブされており、それらは
      <a class="link" href="../../../../search/index.html" target="_top">FreeBSD World Wide Web
	server</a> で検索することができます。
      キーワード検索可能なアーカイブの提供は、
      良くある質問に対する回答を見つけるすぐれた方法ですから、
      質問を投稿する前に調べてみるべきでしょう。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="eresources-summary"></a>C.1.1. メーリングリストの概説</h3></div></div></div><p><span class="emphasis"><em>一般的なメーリングリスト:</em></span>
	以下のものは誰でも自由に参加できる (そしておすすめの)
	一般的なものです。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>リスト</th><th>目的</th></tr></thead><tbody><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-advocacy" target="_top">freebsd-advocacy</a></td><td>FreeBSD の福音伝道</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-announce" target="_top">freebsd-announce</a></td><td>重要なイベントやプロジェクトのマイルストン (モデレータ制)</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-arch" target="_top">freebsd-arch</a></td><td>アーキテクチャ、設計に関する議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-bugbusters" target="_top">freebsd-bugbusters</a></td><td>FreeBSD
		障害報告データベースおよび関連するツールの管理に関する議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-bugs" target="_top">freebsd-bugs</a></td><td>バグレポート</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-chat" target="_top">freebsd-chat</a></td><td>FreeBSD
		コミュニティに関連する技術的ではない話題</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">freebsd-current</a></td><td>FreeBSD-CURRENT の使用に関連する議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isp" target="_top">freebsd-isp</a></td><td>FreeBSD を用いている
		インターネットサービスプロバイダの話題</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-jobs" target="_top">freebsd-jobs</a></td><td>FreeBSD 関連の雇用機会に関する話題</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">freebsd-questions</a></td><td>ユーザからの質問と技術サポート</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-security-notifications" target="_top">freebsd-security-notifications</a></td><td>セキュリティに関する通知 (モデレータ制)</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-stable" target="_top">freebsd-stable</a></td><td>FreeBSD-STABLE の使用に関連する議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-test" target="_top">freebsd-test</a></td><td>メッセージの送信試験を行なうために、
                実際のメーリングリストの代わりに使うアドレス</td></tr></tbody></table></div><p><span class="emphasis"><em>技術的なメーリングリスト:</em></span>
	以下のメーリングリストは、技術的な 議論のためのものです。
	それらの利用や内容のためにしっかりとしたガイドラ
	インがあるので、これらのメーリングリストに入ったり、
	どれか一つにメール を送ったりする前には、
	それらのメーリングリストの憲章を注意深く読むべきです。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>リスト</th><th>目的</th></tr></thead><tbody><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-acpi" target="_top">freebsd-acpi</a></td><td>ACPI および電源管理の開発</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-afs" target="_top">freebsd-afs</a></td><td>FreeBSD へのAFSの移植</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/aic7xxx" target="_top">freebsd-aic7xxx</a></td><td><span class="trademark">Adaptec</span>® AIC 7xxx 用ドライバの開発</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-alpha" target="_top">freebsd-alpha</a></td><td>FreeBSD の Alpha への移植</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-amd64" target="_top">freebsd-amd64</a></td><td>FreeBSD の AMD64 システムへの移植 (モデレータ制)</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-apache" target="_top">freebsd-apache</a></td><td><span class="application">Apache</span>
		に関連した ports についての議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-arm" target="_top">freebsd-arm</a></td><td>FreeBSD の <span class="trademark">ARM</span>® プロセッサへの移植</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-atm" target="_top">freebsd-atm</a></td><td>FreeBSD での ATM ネットワーク使用に関する話題</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-bluetooth" target="_top">freebsd-bluetooth</a></td><td>FreeBSD で <span class="trademark">Bluetooth</span>® 技術の使用</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-cluster" target="_top">freebsd-cluster</a></td><td>FreeBSD のクラスタ環境での利用</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-cvsweb" target="_top">freebsd-cvsweb</a></td><td>CVSweb の管理</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-database" target="_top">freebsd-database</a></td><td>FreeBSD
		上でのデータベースの利用や開発に関する議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-desktop" target="_top">freebsd-desktop</a></td><td>デスクトップでの FreeBSD の利用や改良について</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc" target="_top">freebsd-doc</a></td><td>FreeBSD 関連ドキュメントの作成</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-emulation" target="_top">freebsd-emulation</a></td><td>Linux/<span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>®
		のような他のシステムのエミュレーション</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-firewire" target="_top">freebsd-firewire</a></td><td>FreeBSD <span class="trademark">FireWire</span>® (iLink, IEEE 1394)
		に関する技術的な議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-fs" target="_top">freebsd-fs</a></td><td>ファイルシステム</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-geom" target="_top">freebsd-geom</a></td><td>GEOM に関連した議論と実装</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-gnome" target="_top">freebsd-gnome</a></td><td><span class="application">GNOME</span> および
		<span class="application">GNOME</span> アプリケーションの移植</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hackers" target="_top">freebsd-hackers</a></td><td>一般的な技術の議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hardware" target="_top">freebsd-hardware</a></td><td>FreeBSD の走るハードウェアの一般的な議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-i18n" target="_top">freebsd-i18n</a></td><td>FreeBSD の国際化</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ia32" target="_top">freebsd-ia32</a></td><td>FreeBSD の IA-32 (<span class="trademark">Intel</span>® x86) プラットフォームへの移植</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ia64" target="_top">freebsd-ia64</a></td><td>FreeBSD の <span class="trademark">Intel</span>® が開発中の
		IA64 システムへの移植</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-infiniband" target="_top">freebsd-infiniband</a></td><td>FreeBSD での Infiniband の使用</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ipfw" target="_top">freebsd-ipfw</a></td><td>IP firewall コードの再設計に関する技術的議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isdn" target="_top">freebsd-isdn</a></td><td>ISDN 開発者</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-java" target="_top">freebsd-java</a></td><td><span class="trademark">Java</span>™ 開発者や、FreeBSD へ <span class="trademark">JDK</span>™
		を移植する人たち</td></tr><tr><td><a class="link" href="https://mail.kde.org/mailman/listinfo/kde-freebsd" target="_top">freebsd-kde</a></td><td><span class="application">KDE</span> および
		<span class="application">KDE</span> アプリケーションの移植</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-lfs" target="_top">freebsd-lfs</a></td><td>LFS の FreeBSD への移植</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-mips" target="_top">freebsd-mips</a></td><td>FreeBSD の <span class="trademark">MIPS</span>® への移植</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-mobile" target="_top">freebsd-mobile</a></td><td>モーバイルコンピューティングについての議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-new-bus" target="_top">freebsd-new-bus</a></td><td>バスアーキテクチャに関する技術的な議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-net" target="_top">freebsd-net</a></td><td>ネットワークおよび TCP/IP
		ソースコードに関する議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-numerics" target="_top">freebsd-numerics</a></td><td>高品質な libm 機能の実装に関する議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-office" target="_top">freebsd-office</a></td><td>FreeBSD でのオフィスアプリケーションについて</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-performance" target="_top">freebsd-performance</a></td><td>ハイパフォーマンス /
		高負荷での導入のためのパフォーマンスチューニングに関する質問</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-perl" target="_top">freebsd-perl</a></td><td>数多く存在する Perl に関連する port
	        の管理について</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-pkg" target="_top">freebsd-pkg</a></td><td>バイナリ package 管理および
		package ツールについての議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-pf" target="_top">freebsd-pf</a></td><td>パケットフィルタファイアウォールシステムに関する議論および質問</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-platforms" target="_top">freebsd-platforms</a></td><td><span class="trademark">Intel</span>®
		以外のアーキテクチャのプラットフォームへの移植</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">freebsd-ports</a></td><td>Ports Collection に関する議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports-announce" target="_top">freebsd-ports-announce</a></td><td>Ports Collection に関する重要なニュースと案内
		(モデレータ制)</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports-bugs" target="_top">freebsd-ports-bugs</a></td><td>ports のバグや PR についての議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ppc" target="_top">freebsd-ppc</a></td><td>FreeBSD の <span class="trademark">PowerPC</span>® への移植</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-proliant" target="_top">freebsd-proliant</a></td><td>HP ProLiant サーバプラットフォーム上での FreeBSD
		に関する技術的な議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-python" target="_top">freebsd-python</a></td><td>FreeBSD 固有の Python に関する話題</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-qa" target="_top">freebsd-qa</a></td><td>品質保証 (通常はリリースの保留) についての議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-rc" target="_top">freebsd-rc</a></td><td><code class="filename">rc.d</code>
		システムおよび開発に関連した議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-realtime" target="_top">freebsd-realtime</a></td><td>FreeBSD 用のリアルタイム拡張の開発に関する話題</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-scsi" target="_top">freebsd-scsi</a></td><td>SCSI サブシステム</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-security" target="_top">freebsd-security</a></td><td>セキュリティに関する話題</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-small" target="_top">freebsd-small</a></td><td>組み込みアプリケーションにおける FreeBSD の利用</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-smp" target="_top">freebsd-smp</a></td><td>対称 / 非対称の
		マルチプロセッシングの設計に関する議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-snapshots" target="_top">freebsd-snapshots</a></td><td>FreeBSD 開発スナップショットのアナウンス</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-sparc64" target="_top">freebsd-sparc64</a></td><td>FreeBSD の <span class="trademark">SPARC</span>® ベースシステムへの移植</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-standards" target="_top">freebsd-standards</a></td><td>C99 および <span class="trademark">POSIX</span>® 標準への FreeBSD の適合について</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-threads" target="_top">freebsd-threads</a></td><td>FreeBSD 固有の Tcl/Tk に関する議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-threads" target="_top">freebsd-threads</a></td><td>FreeBSD のスレッドについて</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-tokenring" target="_top">freebsd-tokenring</a></td><td>FreeBSD でのトークンリングのサポート</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-usb" target="_top">freebsd-usb</a></td><td>FreeBSD の USB 対応に関する議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-vuxml" target="_top">freebsd-vuxml</a></td><td>VuXML インフラストラクチャに関する議論</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-x11" target="_top">freebsd-x11</a></td><td>FreeBSD での X11 のメンテナンスとサポート</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-xfce" target="_top">freebsd-xfce</a></td><td><span class="application">XFCE</span> の FreeBSD への移植や保守について</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-zope" target="_top">freebsd-zope</a></td><td><span class="application">Zope</span> の FreeBSD への移植や保守について</td></tr></tbody></table></div><p><span class="emphasis"><em>制限されているメーリングリスト:</em></span>
	以下のメーリングリストはより特化された (そしてより厳しい)
	メンバーのためのものであり、一般的な興味を惹くようなものでは
	ありません。
	このようなメーリングリストに参加する前に、技術的なメーリングリストで
	自らの存在感をアピールするのは良い考えです。
	そうすることにより、議論の際のエチケットを学ぶことができるでしょう。
      </p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>メーリングリスト</th><th>目的</th></tr></thead><tbody><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">freebsd-hubs</a></td><td>ミラーサイトを運営している人達
		(基盤のサポート)</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-user-groups" target="_top">freebsd-user-groups</a></td><td>ユーザグループの調整</td></tr></tbody></table></div><p><span class="emphasis"><em>メーリングリストのダイジェスト版:</em></span>
	上述のメーリングリストのすべてでダイジェスト版を利用できます。
	メーリングリストに登録すると、アカウントのオプションセクションで、
	ダイジェストのオプションを変更できます。</p><p><span class="emphasis"><em>SVN メーリングリスト:</em></span>
	以下のメーリングリストはソースツリーの
	さまざまな場所の変更のログメッセージを見ることに
	興味のある人向けです。
	これらは<span class="emphasis"><em>読み専用</em></span>のリストで、
	これらにメールを送る事は出来ません。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>メーリングリスト</th><th>ソースの範囲</th><th>(ソースの) 範囲の説明</th></tr></thead><tbody><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-doc-all" target="_top">svn-doc-all</a></td><td><code class="filename">/usr/doc</code></td><td>doc subversion リポジトリへ加えられたすべての変更
		(<code class="filename">user</code>, <code class="filename">projects</code>
	        および <code class="filename">translations</code> を除く)</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-doc-head" target="_top">svn-doc-head</a></td><td><code class="filename">/usr/doc</code></td><td>doc subversion リポジトリの <span class="quote">「<span class="quote">head</span>」</span>
		ブランチに加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-doc-projects" target="_top">svn-doc-projects</a></td><td><code class="filename">/usr/doc/projects</code></td><td>doc subversion リポジトリの <code class="filename">projects</code>
		に加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-doc-svnadmin" target="_top">svn-doc-svnadmin</a></td><td><code class="filename">/usr/doc</code></td><td>doc subversion リポジトリの管理用スクリプト、
		フックおよび他のコンフィグレーションデータに対して加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-ports-all" target="_top">svn-ports-all</a></td><td><code class="filename">/usr/ports</code></td><td>ports subversion リポジトリへ加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-ports-head" target="_top">svn-ports-head</a></td><td><code class="filename">/usr/ports</code></td><td>ports subversion リポジトリの <span class="quote">「<span class="quote">head</span>」</span>
		ブランチに加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-ports-svnadmin" target="_top">svn-ports-svnadmin</a></td><td><code class="filename">/usr/ports</code></td><td>ports subversion リポジトリの管理用スクリプト、
		フックおよび他のコンフィグレーションデータに対して加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-all" target="_top">svn-src-all</a></td><td><code class="filename">/usr/src</code></td><td>doc subversion リポジトリへ加えられたすべての変更
		(<code class="filename">user</code> および <code class="filename">projects</code>
	        を除く)</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-head" target="_top">svn-src-head</a></td><td><code class="filename">/usr/src</code></td><td>src subversion リポジトリの <span class="quote">「<span class="quote">head</span>」</span>
		ブランチ (FreeBSD-CURRENT ブランチ) に加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-projects" target="_top">svn-src-projects</a></td><td><code class="filename">/usr/projects</code></td><td>src subversion リポジトリの <code class="filename">projects</code>
		に加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-release" target="_top">svn-src-release</a></td><td><code class="filename">/usr/src</code></td><td>src subversion リポジトリの <code class="filename">releases</code>
		に加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-releng" target="_top">svn-src-releng</a></td><td><code class="filename">/usr/src</code></td><td>src subversion リポジトリの <code class="filename">releng</code>
		ブランチ (セキュリティ / リリースエンジニアリングブランチ)
		に加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-stable" target="_top">svn-src-stable</a></td><td><code class="filename">/usr/src</code></td><td>src subversion リポジトリのすべての stable
		ブランチに加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-stable-6" target="_top">svn-src-stable-6</a></td><td><code class="filename">/usr/src</code></td><td>src subversion リポジトリの <code class="filename">stable/6</code>
		ブランチに加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-stable-7" target="_top">svn-src-stable-7</a></td><td><code class="filename">/usr/src</code></td><td>src subversion リポジトリの <code class="filename">stable/7</code>
		ブランチに加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-stable-8" target="_top">svn-src-stable-8</a></td><td><code class="filename">/usr/src</code></td><td>src subversion リポジトリの <code class="filename">stable/8</code>
		ブランチに加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-stable-9" target="_top">svn-src-stable-9</a></td><td><code class="filename">/usr/src</code></td><td>src subversion リポジトリの <code class="filename">stable/9</code>
		ブランチに加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-stable-10" target="_top">svn-src-stable-10</a></td><td><code class="filename">/usr/src</code></td><td>src subversion リポジトリの <code class="filename">stable/10</code>
		ブランチに加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-stable-other" target="_top">svn-src-stable-other</a></td><td><code class="filename">/usr/src</code></td><td>src subversion リポジトリの古い <code class="filename">stable</code>
		ブランチに加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-svnadmin" target="_top">svn-src-svnadmin</a></td><td><code class="filename">/usr/src</code></td><td>src subversion リポジトリの管理用スクリプト、
		フックおよび他のコンフィグレーションデータに対して加えられたすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-user" target="_top">svn-src-user</a></td><td><code class="filename">/usr/src</code></td><td>src subversion リポジトリの <code class="filename">user</code>
		に加えられた実験的なすべての変更</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-vendor" target="_top">svn-src-vendor</a></td><td><code class="filename">/usr/src</code></td><td>src subversion リポジトリの vender
		に加えられたすべての変更</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="eresources-subscribe"></a>C.1.2. 参加方法</h3></div></div></div><p>メーリングリストに参加するには、上記のリストをクリックするか、
	<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo" target="_top">http://lists.FreeBSD.org/mailman/listinfo</a>
	に進んで興味を持っているメーリングリストをクリックしてください。
	メーリングリストのページには、登録に必要な手順が書かれています。</p><p>メーリングリストにメールを送るには、ただ
	<code class="email">&lt;<a xmlns="" class="email" href="mailto:listname@FreeBSD.org&gt;"><em xmlns="http://www.w3.org/1999/xhtml" class="replaceable"><code>listname</code></em>@FreeBSD.org&gt;</a>&gt;</code>
	にメールを送るだけです。すると、
	メーリングリストに登録されている世界中のメンバに再配布されます。</p><p>メーリングリストから登録を解除する場合は、
	メーリングリストで配信されているメールの最後にある
	URL をクリックしてください。
	または、
	<code class="email">&lt;<a xmlns="" class="email" href="mailto:listname-unsubscribe@FreeBSD.org"><em xmlns="http://www.w3.org/1999/xhtml" class="replaceable"><code>listname</code></em>-unsubscribe@FreeBSD.org</a>&gt;</code>
	にメールを送信することでも登録を解除できます。</p><p>再度言いますが、
	私たちは技術的なメーリングリストでは技術的な議論を保つよう
	要求します。もし、重要なアナウンスにのみ興味があるなら、
        <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-announce" target="_top">FreeBSD announcements メーリングリスト</a> への参加をお勧めします。
	これには、あまりたくさんのメールは流れません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="eresources-charters"></a>C.1.3. メーリングリストの憲章</h3></div></div></div><p><span class="emphasis"><em>すべて</em></span> FreeBSD
	メーリングリストは誰でもそれらを利用することに
	固守しなければいけないという一定の簡単なルールがあります。
	これらのルールに従わないと、結果として FreeBSD の Postmaster
	<code class="email">&lt;<a xmlns="" class="email" href="mailto:postmaster@FreeBSD.org">postmaster@FreeBSD.org</a>&gt;</code>から 2 回までは警
	告を受けます。3 回違反すると、
	投稿者はすべての FreeBSD のメーリングリストから削除され、
	そのメーリングリストへのさらなる投稿から締め出されるでしょう。
	これらのルールや対策が必要なのは残念です。
	しかし、今日のインターネッ
	トはずいぶんいやらしい環境になっており、一般の人々は、
	その (対策の) メカニズムがいかにもろいかという事すら
	認識する事が出来ていないと思われます。</p><p>道標</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>いかなる投稿記事もそのメーリングリストの
	    基本的な憲章を守るべきです。たとえば、
	    そのメーリングリストが技術的な問題に関するものであれば、
	    技術的な議論を含む投稿でなければなりません。現在継続中の
	    不適切な憲章やフレイムは、
	    所属しているすべての人に対してメーリングリスト
	    の価値を下げてしまうだけですし、
	    許される行為ではないでしょう。
	    とくに話題のない自由形式の議論に対しては <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-chat" target="_top">FreeBSD chat メーリングリスト</a>
	    が自由に認可されているので、
	    かわりに使うべきでしょう。</p></li><li class="listitem"><p>一度に 3
	    つ以上のメーリングリストには決して投稿すべきでは
	    ありません。2
	    つのメーリングリストには双方に明確な必要性がある場合にのみ
	    投稿すべきです。どのリストに対しても、
	    (メーリングリストの)参加者は (複数のメーリングリ
	    ストに)重複して参加しており、関連する部分が少ない (たとえば、
	    <span class="quote">「<span class="quote">-stable</span>」</span> と <span class="quote">「<span class="quote">-scsi</span>」</span>) メーリングリストを除いては、
	    一度に複数のメーリングリストに投稿する理由は全くありません。もし、
	    <code class="literal">Cc</code> に複数の メーリングリストがそのような形で現れて、
	    あなたに届いたのであれば、再びそのメールに返事を出す前に、
	    <code class="literal">Cc</code> の部分もまた編集するべきです。
	    <span class="emphasis"><em>元記事を書いたのが誰であっても、
	      あなた自身のクロスポストにまだ責任があります。
	    </em></span></p></li><li class="listitem"><p>ユーザであれ開発者であれ、(議論の中で)
	    個人を攻撃したり冒涜したりすることは許されません。
	    個人的なメールを引用したり再投稿したり
	    する許可をもらえなかったり、もらえそうにない時に、
	    それをおこなう ようなネチケット (訳注:
	    ネットワークにおけるエチケット) に対する
	    ひどい違反は好まれませんが、
	    してはならないと特別に定められている わけではありません。
	    <span class="emphasis"><em>しかしながら</em></span>、そのような内容がメー
	    リングリストの憲章に沿う場合はほとんどありません。
	    このため、メー
	    リングリストの憲章に違反しているということだけで警告
	    (または禁止) に値するものと考えていいでしょう。</p></li><li class="listitem"><p>FreeBSD 以外の関連する製品やサービスの広告は、
	    絶対に禁止し、spam
	    による違反者が宣伝していることが明確であったら、
	    すぐに禁止します。</p></li></ul></div><p><span class="emphasis"><em>個々のメーリングリストの憲章:</em></span></p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-acpi" target="_top">freebsd-acpi</a></span></dt><dd><p><span class="emphasis"><em>ACPI および電源管理開発</em></span></p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-afs" target="_top">freebsd-afs</a></span></dt><dd><p><span class="emphasis"><em>Andrew ファイルシステム</em></span></p><p>このリストは、CMU/Transarc の AFS
	      の移植や使用に関する議論のためです．</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-announce" target="_top">freebsd-announce</a></span></dt><dd><p><code class="filename">重要なイベント/マイルストン</code></p><p>これは、単にたまに発表される重要な freebsd
	      のイベントに関心がある人のた めのメーリングリストです。
	      これは、スナップショットやその他のリリースに
	      ついてのアナウンスを含みます。
	      そのアナウンスは新しい FreeBSD の機能のア
	      ナウンスを含んでいます。
	      ボランティア等の呼びかけがあるかもしれません。
	      これは流通量の少ないメーリングリストで、
	      完全なモデレートメーリングリストです。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-arch" target="_top">freebsd-arch</a></span></dt><dd><p><span class="emphasis"><em>アーキテクチャと設計の議論</em></span></p><p>これは、FreeBSD
              のアーキテクチャに関する議論を行なうためのメーリングリストです。
              当然、その内容は原則的に技術的なものに限定されます。
              このメーリングリストにふさわしい話題は以下のようなものです。
	    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>複数のカスタマイズされたビルドを同時に行うには、
		  ビルドシステムをどういじり直せばよいか</p></li><li class="listitem"><p>VFS で Heidemann レイヤを動作させるには、
		  何を修正する必要があるか</p></li><li class="listitem"><p>同一のデバイスドライバを多数のバス、
                  アーキテクチャに共通で使えるようにするには、
		  デバイスドライバインタフェースをどう改変すれば良いか</p></li><li class="listitem"><p>ネットワークドライバの書き方</p></li></ul></div></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-bluetooth" target="_top">freebsd-bluetooth</a></span></dt><dd><p><span class="emphasis"><em>FreeBSD 上での <span class="trademark">Bluetooth</span>®</em></span></p><p>FreeBSD の <span class="trademark">Bluetooth</span>® ユーザが集まるフォーラムです。
	      デザイン、実装の詳細、パッチ、障害報告、開発進捗レポート、
	      機能の要求、<span class="trademark">Bluetooth</span>® に関連したすべての事柄が対象です。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-bugbusters" target="_top">freebsd-bugbusters</a></span></dt><dd><p><span class="emphasis"><em>障害報告の取り扱いに関する調整</em></span></p><p>このメーリングリストは、
	      バグマイスター、バグバスター、および他の障害報告データベースに純粋に興味を持っているグループの調整や議論についてのフォーラムです。
	      このメーリングリストは、個別のバグ、パッチ、障害報告について議論を行うためのものではありません。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-bugs" target="_top">freebsd-bugs</a></span></dt><dd><p><span class="emphasis"><em>バグレポート</em></span></p><p>これは、FreeBSD
	      のバグレポートのためのメーリングリストです。可能である
	      場合はいつでも、バグは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a>
	      を使うか、<a class="link" href="../../../../send-pr.html" target="_top">WEB
		interface</a>を用い
	      て送られる必要があります。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-chat" target="_top">freebsd-chat</a></span></dt><dd><p><span class="emphasis"><em>FreeBSD のコミュニティに関する
		技術的ではない話題</em></span></p><p>このメーリングリストは技術的ではなく、
	      社会的な情報について、
	      他のメーリングリストでは取り扱わない話題を含みます。
	      これは、Jordan がシロイタチに似ているかどうか、
	      大文字で打つかどうか、誰がたくさんコーヒーを飲むか、
	      どこのビールが一番うまいか、
	      誰が地下室でビールを作っているか、
	      などについての議論を含みます。時々重要なイベント
	      (将来開催されるパーティーや、結婚式、誕生日、
	      新しい仕事など) のお知らせが、
	      技術的なメーリングリストから でてきます。しかし、
	      フォローは直接
	      -chatメーリングリストにするべきです。</p></dd><dt><span class="term">freebsd-core</span></dt><dd><p><span class="emphasis"><em>FreeBSD コアチーム</em></span></p><p>これは、コアメンバが使う内部メーリングリストです。
	      FreeBSD に関連する深刻なやっかい事の裁定や
	      ハイレベルな綿密な調査を要求するときに、このメー
	      リングリストにメッセージを送る事が出来ます。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">freebsd-current</a></span></dt><dd><p><span class="emphasis"><em>FreeBSD-CURRENT の使用に関する議論
	      </em></span></p><p>これは FreeBSD-CURRENT
	      のユーザのためのメーリングリストです。
	      メーリングリストでの話題は、-CURRENT
	      で登場した新しい機能について、
	      その新機能によってユーザに影響することについての注意、
	      および -CURRENT
	      のままでいるために必要な手順についての説明を含みます。
	      <span class="quote">「<span class="quote">CURRENT</span>」</span>
	      を走らせている人はこのメーリングリストに
	      登録しなくてはなりません。
	      これは技術的なメーリングリストなので、
	      完全に技術的な内容を要求します。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-cvsweb" target="_top">freebsd-cvsweb</a></span></dt><dd><p><span class="emphasis"><em>FreeBSD CVSweb プロジェクト</em></span></p><p>FreeBSD-CVSweb
	      の利用、開発および管理についての技術的な議論の場です。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-desktop" target="_top">freebsd-desktop</a></span></dt><dd><p><span class="emphasis"><em>デスクトップでの FreeBSD の利用や改良について</em></span></p><p>デスクトップでの FreeBSD について議論を行うためのフォーラムです。
	      主として、デスクトップの移植者やユーザが FreeBSD
	      のデスクトップサポートに関する問題点や改良について議論する場です。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc" target="_top">freebsd-doc</a></span></dt><dd><p><span class="emphasis"><em>ドキュメンテーションプロジェクト</em></span></p><p>このメーリングリストは FreeBSD
              向けの文書の作成に関連する事柄やプロジェクトについて議論を行なうためのものです。
	      このメーリングリストに参加しているメンバは、
              <span class="quote">「<span class="quote">FreeBSD ドキュメンテーションプロジェクト</span>」</span>
	      に参加していることになります。
	      このメーリングリストは公開されているので、
              参加や投稿は自由に行なうことができます。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-firewire" target="_top">freebsd-firewire</a></span></dt><dd><p><span class="emphasis"><em><span class="trademark">FireWire</span>® (iLink, IEEE 1394)</em></span></p><p>このメーリングリストは、FreeBSD における
	      <span class="trademark">FireWire</span>® (IEEE 1394, iLink)
	      サブシステムの設計と実装について議論を行うためのものです。
	      標準化、バスデバイスとそのプロトコル、
	      アダプタボード/カード/チップセット、そして、
	      それらに適切に対応するためのアーキテクチャとコードの実装が特に関連するトピックです。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-fs" target="_top">freebsd-fs</a></span></dt><dd><p><span class="emphasis"><em>ファイルシステム</em></span></p><p>FreeBSD のファイルシステムに関する議論
	      これは技術的なメーリングリストなので、
	      完全に技術的な内容を要求します。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-geom" target="_top">freebsd-geom</a></span></dt><dd><p><span class="emphasis"><em>GEOM</em></span></p><p>GEOM および関連した実装に関する議論。
	      これは技術的なメーリングリストなので、
	      完全に技術的な内容が要求されます。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-gnome" target="_top">freebsd-gnome</a></span></dt><dd><p><span class="emphasis"><em>GNOME</em></span></p><p>FreeBSD の <span class="application">GNOME</span>
	      Desktop Environment に関する議論。
	      これは技術的なメーリングリストなので、
	      完全に技術的な内容を要求します。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-infiniband" target="_top">freebsd-infiniband</a></span></dt><dd><p><span class="emphasis"><em>FreeBSD での Infiniband の使用</em></span></p><p>FreeBSD における Infiniband, OFED および OpenSM
	    に関する技術的なメーリングリストです。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ipfw" target="_top">freebsd-ipfw</a></span></dt><dd><p><span class="emphasis"><em>IP Firewall</em></span></p><p>これは FreeBSD の IP firewall コードの再設計に関する
	      技術的な議論のためのフォーラムです。
	      これは技術的なメーリングリストなので、
	      完全に技術的な内容を要求します。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ia64" target="_top">freebsd-ia64</a></span></dt><dd><p><span class="emphasis"><em>FreeBSD の IA64 への移植</em></span></p><p>これは FreeBSD の <span class="trademark">Intel</span>® の IA-64 プラットフォームへの
	    移植に参加している人達のための技術的なメーリングリストで、
	    問題を提起し解決策を議論するためのものです。
	    このような技術的な議論に興味を持つ個人は歓迎します。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isdn" target="_top">freebsd-isdn</a></span></dt><dd><p><span class="emphasis"><em>ISDN コミュニケーション</em></span></p><p>このメーリングリストは、
	      FreeBSD に対する ISDN サポートの開発の議論を
	      おこなう人のためのものです．</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-java" target="_top">freebsd-java</a></span></dt><dd><p><span class="emphasis"><em><span class="trademark">Java</span>™ の開発</em></span></p><p>このメーリングリストは、FreeBSD
	      向けの重要な <span class="trademark">Java</span>™ アプリケーションの開発や、<span class="trademark">JDK</span>™
	      の移植やメンテナンスの
	      議論をする人のためのものです．</p></dd><dt><a id="eresources-charters-jobs"></a><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-jobs" target="_top">freebsd-jobs</a></span></dt><dd><p><span class="emphasis"><em>求人情報および就職希望情報</em></span></p><p>FreeBSD
	      に関連した就職情報および履歴書を投稿するためのフォーラムです。
	      例えば、もし、FreeBSD に関連した職業を探していたり、
	      FreeBSD に関連した仕事をお持ちで、
	      宣伝したいと考えているのであれば、ここに投稿してください。
	      このメーリングリストは一般的な就職情報のためのものでは
	      <span class="emphasis"><em>ありません</em></span>。
	      一般的な就職情報については、
	      既に別な場所に適切なフォーラムがあるので、
	      そちらに投稿してください。</p><p>他の <code class="systemitem">FreeBSD.org</code>
	      メーリングリスト同様に、
	      このメーリングリストは全世界に配信されます。
	      そのため、地域および在宅勤務なのか、
	      移転のための支援を受けられるかどうかを明確にしてください。</p><p>メールでは、オープンフォーマットのみを使う必要があります。
	      ― プレインテキストが好ましいのですが、
	      多くの読者は、
	      Portable Document Format (<acronym class="acronym">PDF</acronym>),
	      HTML および他にもいくつかのフォーマットを使用できるでしょう。
	      <span class="trademark">Microsoft</span>® Word (<code class="filename">.doc</code>)
	      のようなクローズドフォーマットは、
	      メーリングリストのサーバにより拒否されてしまいます。</p></dd><dt><span class="term"><a class="link" href="https://mail.kde.org/mailman/listinfo/kde-freebsd" target="_top">freebsd-kde</a></span></dt><dd><p><span class="emphasis"><em>KDE</em></span></p><p>FreeBSD システムにおける <span class="application">KDE</span>
	      に関する議論。
	      これは技術的なメーリングリストなので、
	      完全に技術的な内容を要求します。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hackers" target="_top">freebsd-hackers</a></span></dt><dd><p><span class="emphasis"><em>技術的な議論</em></span></p><p>これは FreeBSD に関する技術的な議論のための
	      フォーラムです。
	      これは最もテクニカルなメーリングリストです。
	      このメーリングリストは、FreeBSD
	      上でアクティブに活動をしている人のためのもので、
	      問題を持ち出したり、代わりの解決法を議論します。
	      技術的な議論をフォローするのに興味がある人も歓迎します。
	      これは技術的なメーリングリストなので、
	      完全に技術的な内容を要求します。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hardware" target="_top">freebsd-hardware</a></span></dt><dd><p><span class="emphasis"><em>FreeBSD のハードウェアの一般的な議論
	      </em></span></p><p>FreeBSD が走っているハードウェアのタイプや、
	      何を買ったり避けたりするかに関する様々な問題や、
	      提案に関する議論。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">freebsd-hubs</a></span></dt><dd><p><span class="emphasis"><em>ミラーサイト</em></span></p><p>FreeBSD ミラーサイトを運用している人達向けの、
              アナウンスと議論を行なうメーリングリストです。
            </p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isp" target="_top">freebsd-isp</a></span></dt><dd><p><span class="emphasis"><em>
		インターネットサービスプロバイダのについての話題
	      </em></span></p><p>このメーリングリストは、
	      FreeBSD を用いたインターネット サービスプロバイダ (ISP)
	      に関する話題の議論のためのものです。
	      これは技術的なメーリングリストなので、
	      完全に技術的な内容を要求します。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-office" target="_top">freebsd-office</a></span></dt><dd><p><span class="emphasis"><em>FreeBSD でのオフィスアプリケーション</em></span></p><p>FreeBSD におけるオフィスアプリケーションのインストール、
	      開発およびサポートについての議論の場です。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ops-announce" target="_top">freebsd-ops-announce</a></span></dt><dd><p><span class="emphasis"><em>プロジェクトのインフラストラクチャに関するアナウンス</em></span></p><p>FreeBSD.org
	      プロジェクトのインフラストラクチャの変更や関連した問題について興味を持っている向けのメーリングリストです。</p><p>このモデレートメーリングリストは、アナウンスに制限されています
	      (返答や要求、議論、意見を述べる場ではありません)。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-performance" target="_top">freebsd-performance</a></span></dt><dd><p><span class="emphasis"><em>FreeBSD
		のチューニングや速度向上に関する議論</em></span></p><p>このメーリングリストは、ハッカー、管理者および関連グループが、
	      FreeBSD のパフォーマンスに関するトピックを議論する場です。
	      このメーリングリストで議論されるべきトピックは、
	      高負荷における FreeBSD の導入において経験するパフォーマンスの問題や
	      FreeBSD の限界に挑むような話題を含みます。
	      FreeBSD のパフォーマンスを改善したいと考えている方は、
	      このメーリングリストに登録してください。
	      このメーリングリストは、FreeBSD の高速化、
	      堅牢さ、拡張性に興味をもっている、経験のある
	      FreeBSD ユーザ、ハッカー、管理者向けの高度な技術的メーリングです。
	      ドキュメントに目を通さずに質問して答えを求めるような
	      Q and A タイプのメーリングリストではなく、
	      未解決で答えのないパフォーマンスに関連したトピックへの貢献や問い合わせの場です。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-pkg" target="_top">freebsd-pkg</a></span></dt><dd><p><span class="emphasis"><em>バイナリ package 管理および
	      package ツールについての議論</em></span></p><p>ソフトウェアのインストールにバイナリ package を用いる
	      FreeBSD システム管理のすべての側面に関する議論。
	      バイナリ package のツールキットとフォーマット、
	      それらの FreeBSD における開発とサポート、
	      package リポジトリ管理そしてサードパーティ製 package を含みます。</p><p>package の作成に失敗する ports に関する議論は
	      ports の問題として考えるべきであり、
	      このメーリングリストで議論することは適切ではありません。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-pf" target="_top">freebsd-pf</a></span></dt><dd><p><span class="emphasis"><em>パケットフィルタファイアウォールシステムに関する議論および質問</em></span></p><p>FreeBSD のパケットフィルタ (pf)
	      ファイアウォールシステムに関連した議論。
	      技術的な議論およびユーザによる質問の両方が歓迎されます。
	      このメーリングリストは、ALTQ QoS
	      フレームワークについて議論する場でもあります。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-platforms" target="_top">freebsd-platforms</a></span></dt><dd><p><span class="emphasis"><em><span class="trademark">Intel</span>® 以外のプラットフォームへの移植
	      </em></span></p><p>クロスプラットフォームの FreeBSD の問題。<span class="trademark">Intel</span>®
	      以外のプラットフォームへの FreeBSD
	      の移植についての一般的な議論や提案。
	      これは技術的なメーリングリストなので、
	      完全に技術的な内容を要求します。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">freebsd-ports</a></span></dt><dd><p><span class="emphasis"><em><span class="quote">「<span class="quote">ports</span>」</span> の議論</em></span></p><p>FreeBSD <span class="quote">「<span class="quote">Ports Collection</span>」</span>
	      (<code class="filename">/usr/ports</code>)
              に関連する話題や、
              Ports Collection の基盤および ports の一般的な構成の整備活動に関する議論。
	      これは技術的なメーリングリストなので、
	      厳密に技術的な内容のみが扱われます。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports-announce" target="_top">freebsd-ports-announce</a></span></dt><dd><p><span class="emphasis"><em>FreeBSD <span class="quote">「<span class="quote">Ports Collection</span>」</span>
		に関する重要なニュースと案内</em></span></p><p><span class="quote">「<span class="quote">Ports Collection</span>」</span> (<code class="filename">/usr/ports</code>) の開発者、
	      作成者およびユーザへの重要なニュース。
	      アーキテクチャ/インフラストラクチャの変更、新しい機能、
	      重要なアップグレードの案内、
	      そしてリリースエンジニアリング情報が扱われます。
	      このメーリングリストの流量は少なく、
	      アナウンスを目的としたものです。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports-bugs" target="_top">freebsd-ports-bugs</a></span></dt><dd><p><span class="emphasis"><em><span class="quote">「<span class="quote">ports</span>」</span>
		のバグに関する議論</em></span></p><p><span class="quote">「<span class="quote">Ports Collection</span>」</span> (<code class="filename">/usr/ports</code>) の障害報告や
	      新たな ports や変更についての提案についての議論。
	      これは技術的なメーリングリストなので、
	      厳密に技術的な内容のみが扱われます。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-proliant" target="_top">freebsd-proliant</a></span></dt><dd><p><span class="emphasis"><em>HP ProLiant サーバプラットフォーム上での FreeBSD
		に関する技術的な議論</em></span></p><p>このメーリングリストは、HP ProLiant サーバ上での FreeBSD
	      の利用に関した技術的な議論に用いられます。
	      ProLiant に特有のドライバ、管理ソフトウェア、設定ツール、および
	      BIOS アップデートなどが含まれます。
	      hpasmd, hpasmcli および hpacucli
	      モジュールについて議論する主要な場です。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-python" target="_top">freebsd-python</a></span></dt><dd><p><span class="emphasis"><em>FreeBSD における Python</em></span></p><p>FreeBSD における Python
	      サポートの改良に関連した議論を行うためのメーリングリストです。
	      これは技術的なメーリングリストです。
	      Python の移植に関する作業を行っている方や、
	      サードパーティ製モジュールおよび
	      <span class="application">Zope</span> を FreeBSD
	      に移植している方を対象としたメーリングリストです。
	      技術的な議論に興味を持っている方の参加も歓迎されます。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">freebsd-questions</a></span></dt><dd><p><span class="emphasis"><em>ユーザからの質問</em></span></p><p>FreeBSD に関する質問のためのメーリングリストです。
	      その質問がかなり技術的だと思わないのであれば、
	      <span class="quote">「<span class="quote">どのようにして</span>」</span>
	      という質問を技術的なメーリングリストに送るべきではありません。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-scsi" target="_top">freebsd-scsi</a></span></dt><dd><p><span class="emphasis"><em>SCSI サブシステム</em></span></p><p>これは FreeBSD のための SCSI
	      サブシステムについて作業している人向けです。
	      これは技術的なメーリングリストなので、
	      完全に技術的な内容を要求します。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-security" target="_top">freebsd-security</a></span></dt><dd><p><span class="emphasis"><em>セキュリティの関連の話題</em></span></p><p>FreeBSD コンピュータのセキュリティの話題 (DES,
	      Kerberos, よく知られているセキュリティホールや、
	      それらのふさぎ方など)
	      これは技術的なメーリングリストなので、
	      完全に技術的な議論を要求します。
	      これは、Q and A のメーリングリストではありません。
	      FAQ に対する Q and A (質問と答えの両方) の貢献は、歓迎されます。
	    </p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-security-notifications" target="_top">freebsd-security-notifications</a></span></dt><dd><p><span class="emphasis"><em>セキュリティ関連の通知</em></span></p><p>FreeBSD のセキュリティ問題や、
	      修正に関する通知を行ないます。
	      このメーリングリストは議論を行なうための
	      メーリングリストではありません。
              議論は FreeBSD-security で行ないます。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-small" target="_top">freebsd-small</a></span></dt><dd><p><span class="emphasis"><em>組み込み用に FreeBSD を使う</em></span></p><p>特殊な FreeBSD 小型システムおよび FreeBSD
	      の組み込み技術に関する議論。
	      これは技術的なメーリングリストなので、
	      完全に技術的な内容を要求します。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-snapshots" target="_top">freebsd-snapshots</a></span></dt><dd><p><span class="emphasis"><em>FreeBSD 開発スナップショットのアナウンス
	      </em></span></p><p>このメーリングリストは、head/ および stable/
	      ブランチからの新しい FreeBSD 開発スナップショットのアナウンスを行います。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-stable" target="_top">freebsd-stable</a></span></dt><dd><p><span class="emphasis"><em>FreeBSD-STABLE の使用に関する議論
	      </em></span></p><p>これは FreeBSD-STABLE のユーザ用のメーリングリスト
	      です。メーリングリストでの話題は、-STABLE
	      で登場した新しい機能について、
	      その新機能によってユーザに影響することについての注意、
	      および -STABLE
	      のままでいるために必要な手順についての説明を含みます。
	      <span class="quote">「<span class="quote">STABLE</span>」</span> を走らせている人はこの
	      メーリングリストに登録すべきです。
	      これは技術的なメーリングリストなので、完全に技術的な
	      内容を要求します。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-standards" target="_top">freebsd-standards</a></span></dt><dd><p><span class="emphasis"><em>C99 &amp; POSIX への適合</em></span></p><p>C99 および POSIX 標準への FreeBSD
	      の適合に関連した技術的な議論を行うためのフォーラムです。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-usb" target="_top">freebsd-usb</a></span></dt><dd><p><span class="emphasis"><em>FreeBSD の USB 対応に関する議論</em></span></p><p>これは、FreeBSD の USB
	      対応に関連した議論を行うメーリングリストです。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-user-groups" target="_top">freebsd-user-groups</a></span></dt><dd><p><span class="emphasis"><em>ユーザグループの調整のメーリングリスト
	      </em></span></p><p>これは、ローカルなユーザグループがお互いに、または、
	      コアチームが指定した個人と問題を議論する、
	      それぞれのローカルエリアのユーザグループからの
	      調整人向けの メーリングリストです。
	      このメーリングリストはユーザグループ間の
	      ミーティングの概要やプロジェクトの調整に
	      制限されるべきです。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-xfce" target="_top">freebsd-xfce</a></span></dt><dd><p><span class="emphasis"><em>XFCE</em></span></p><p>これは、<span class="application">XFCE</span> 環境を
	      FreeBSD へ移植することを議論する、技術的なメーリングリストです。
	      活発に <span class="application">XFCE</span> を FreeBSD
	      に移植する作業を行なっている人に向けたもので、
	      問題を提起したり、新しい解決法を議論することを目的としています。
	      技術的な議論に興味を持っている方の参加も歓迎します。</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-zope" target="_top">freebsd-zope</a></span></dt><dd><p><span class="emphasis"><em>Zope</em></span></p><p>これは、<span class="application">Zope</span> 環境を
	      FreeBSD へ移植することを議論する、技術的なメーリングリストです。
	      活発に <span class="application">Zope</span> を FreeBSD
	      に移植する作業を行なっている人に向けたもので、
	      問題を提起したり、新しい解決法を議論することを目的としています。
	      技術的な議論に興味を持っている方の参加も歓迎します。</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="eresources-mailfiltering"></a>C.1.4. メーリングリストのフィルタリング</h3></div></div></div><p>FreeBSD のメーリングリストは、スパム、
	ウィルスおよび他の不要なメールを配布してしまわないよう、
	いくつかの方法でフィルタリングを行なっています。
	この節で説明するフィルタリングは、
	メーリングリストを守るために使われている方法のすべてというわけではありません。</p><p>メーリングリストでは、以下の添付ファイルを送ることができます。
	以下の一覧以外の MIME content type の添付ファイルを含むファイルは、
	メーリングリストに流れる前に取り除かれます。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>application/octet-stream</p></li><li class="listitem"><p>application/pdf</p></li><li class="listitem"><p>application/pgp-signature</p></li><li class="listitem"><p>application/x-pkcs7-signature</p></li><li class="listitem"><p>message/rfc822</p></li><li class="listitem"><p>multipart/alternative</p></li><li class="listitem"><p>multipart/related</p></li><li class="listitem"><p>multipart/signed</p></li><li class="listitem"><p>text/html</p></li><li class="listitem"><p>text/plain</p></li><li class="listitem"><p>text/x-diff</p></li><li class="listitem"><p>text/x-patch</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">他の MIME content type の添付を許可するメーリングリストもありますが、
	  上の一覧に含まれるものであれば、ほとんどのメーリングリストで適用できます。</p></div><p>HTML と plain テキストを両方含むメールでは、
	HTML の部分が削除されます。
	HTML のみを含むメールは、plain テキストに変換されます。</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-news"></a>C.2. Usenet ニュースグループ</h2></div></div></div><p>2 つの FreeBSD 用のニュースグループがあります。ここでは
      FreeBSD の議論をするたくさんの様々な人がおり、
      他にも FreeBSD に関連するユーザがいます。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp97322192"></a>C.2.1. BSD 用のニュースグループ</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="news:comp.unix.bsd.freebsd.announce" target="_top">comp.unix.bsd.freebsd.announce</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.bsd.freebsd.misc" target="_top">comp.unix.bsd.freebsd.misc</a></p></li><li class="listitem"><p><a class="link" href="news:de.comp.os.unix.bsd" target="_top">de.comp.os.unix.bsd</a> (ドイツ)</p></li><li class="listitem"><p><a class="link" href="news:fr.comp.os.bsd" target="_top">fr.comp.os.bsd</a> (フランス)</p></li><li class="listitem"><p><a class="link" href="news:it.comp.os.freebsd" target="_top">it.comp.os.freebsd</a> (イタリア)</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp97328848"></a>C.2.2. 関連する他の <span class="trademark">UNIX</span>® のニュースグループ</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="news:comp.unix" target="_top">comp.unix</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.questions" target="_top">comp.unix.questions</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.admin" target="_top">comp.unix.admin</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.programmer" target="_top">comp.unix.programmer</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.shell" target="_top">comp.unix.shell</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.user-friendly" target="_top">comp.unix.user-friendly</a></p></li><li class="listitem"><p><a class="link" href="news:comp.security.unix" target="_top">comp.security.unix</a></p></li><li class="listitem"><p><a class="link" href="news:comp.sources.unix" target="_top">comp.sources.unix</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.advocacy" target="_top">comp.unix.advocacy</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.misc" target="_top">comp.unix.misc</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.bsd" target="_top">comp.unix.bsd</a></p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp97350224"></a>C.2.3. X Window システム</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="news:comp.windows.x.i386unix" target="_top">comp.windows.x.i386unix</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x" target="_top">comp.windows.x</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.apps" target="_top">comp.windows.x.apps</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.announce" target="_top">comp.windows.x.announce</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.intrinsics" target="_top">comp.windows.x.intrinsics</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.motif" target="_top">comp.windows.x.motif</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.pex" target="_top">comp.windows.x.pex</a></p></li><li class="listitem"><p><a class="link" href="news:comp.emulators.ms-windows.wine" target="_top">comp.emulators.ms-windows.wine</a></p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-web"></a>C.3. World Wide Web サイト</h2></div></div></div><p><a class="link" href="#central-www">中央サーバ</a>, <a class="link" href="#mirrors-ie-www">アイルランド</a>, <a class="link" href="#mirrors-us-www">アメリカ合衆国</a>, <a class="link" href="#mirrors-am-www">アルメニア</a>, <a class="link" href="#mirrors-uk-www">イギリス</a>, <a class="link" href="#mirrors-au-www">オーストラリア</a>, <a class="link" href="#mirrors-at-www">オーストリア</a>, <a class="link" href="#mirrors-nl-www">オランダ</a>, <a class="link" href="#mirrors-ca-www">カナダ</a>, <a class="link" href="#mirrors-ch-www">スイス</a>, <a class="link" href="#mirrors-se-www">スウェーデン</a>, <a class="link" href="#mirrors-es-www">スペイン</a>, <a class="link" href="#mirrors-si-www">スロベニア</a>, <a class="link" href="#mirrors-cz-www">チェコ共和国</a>, <a class="link" href="#mirrors-dk-www">デンマーク</a>, <a class="link" href="#mirrors-de-www">ドイツ</a>, <a class="link" href="#mirrors-no-www">ノルウェー</a>, <a class="link" href="#mirrors-fi-www">フィンランド</a>, <a class="link" href="#mirrors-fr-www">フランス</a>, <a class="link" href="#mirrors-lv-www">ラトビア</a>, <a class="link" href="#mirrors-lt-www">リトアニア</a>, <a class="link" href="#mirrors-ru-www">ロシア</a>, <a class="link" href="#mirrors-hk-www">香港</a>, <a class="link" href="#mirrors-tw-www">台湾</a>, <a class="link" href="#mirrors-za-www">南アフリカ</a>, <a class="link" href="#mirrors-jp-www">日本</a>.</p><p>(  UTC 現在)</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="central-www"></a><p>中央サーバ</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.FreeBSD.org/" target="_top">http://www.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-ie-www"></a><p>アイルランド</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.ie.FreeBSD.org/" target="_top">http://www.ie.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-us-www"></a><p>アメリカ合衆国</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www5.us.FreeBSD.org/" target="_top">http://www5.us.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-am-www"></a><p>アルメニア</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www1.am.FreeBSD.org/" target="_top">http://www1.am.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-uk-www"></a><p>イギリス</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www1.uk.FreeBSD.org/" target="_top">http://www1.uk.FreeBSD.org/</a>
        </p></li><li class="listitem"><p>
          <a class="link" href="http://www3.uk.FreeBSD.org/" target="_top">http://www3.uk.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-au-www"></a><p>オーストラリア</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.au.FreeBSD.org/" target="_top">http://www.au.FreeBSD.org/</a>
        </p></li><li class="listitem"><p>
          <a class="link" href="http://www2.au.FreeBSD.org/" target="_top">http://www2.au.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-at-www"></a><p>オーストリア</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www.at.FreeBSD.org/" target="_top">http://www.at.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-nl-www"></a><p>オランダ</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.nl.FreeBSD.org/" target="_top">http://www.nl.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-ca-www"></a><p>カナダ</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.ca.FreeBSD.org/" target="_top">http://www.ca.FreeBSD.org/</a>
        </p></li><li class="listitem"><p>
          <a class="link" href="http://www2.ca.FreeBSD.org/" target="_top">http://www2.ca.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-ch-www"></a><p>スイス</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www.ch.FreeBSD.org/" target="_top">http://www.ch.FreeBSD.org/</a> (IPv6)</p></li><li class="listitem"><p><a class="link" href="http://www2.ch.FreeBSD.org/" target="_top">http://www2.ch.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-se-www"></a><p>スウェーデン</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.se.FreeBSD.org/" target="_top">http://www.se.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-es-www"></a><p>スペイン</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.es.FreeBSD.org/" target="_top">http://www.es.FreeBSD.org/</a>
        </p></li><li class="listitem"><p>
          <a class="link" href="http://www2.es.FreeBSD.org/" target="_top">http://www2.es.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-si-www"></a><p>スロベニア</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.si.FreeBSD.org/" target="_top">http://www.si.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-cz-www"></a><p>チェコ共和国</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www.cz.FreeBSD.org/" target="_top">http://www.cz.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-dk-www"></a><p>デンマーク</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www.dk.FreeBSD.org/" target="_top">http://www.dk.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-de-www"></a><p>ドイツ</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.de.FreeBSD.org/" target="_top">http://www.de.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-no-www"></a><p>ノルウェー</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.no.FreeBSD.org/" target="_top">http://www.no.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-fi-www"></a><p>フィンランド</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.fi.FreeBSD.org/" target="_top">http://www.fi.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-fr-www"></a><p>フランス</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www1.fr.FreeBSD.org/" target="_top">http://www1.fr.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-lv-www"></a><p>ラトビア</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.lv.FreeBSD.org/" target="_top">http://www.lv.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-lt-www"></a><p>リトアニア</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.lt.FreeBSD.org/" target="_top">http://www.lt.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-ru-www"></a><p>ロシア</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www.ru.FreeBSD.org/" target="_top">http://www.ru.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-hk-www"></a><p>香港</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.hk.FreeBSD.org/" target="_top">http://www.hk.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-tw-www"></a><p>台湾</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.tw.FreeBSD.org/" target="_top">http://www.tw.FreeBSD.org/</a>
        </p></li><li class="listitem"><p>
          <a class="link" href="http://www2.tw.FreeBSD.org/" target="_top">http://www2.tw.FreeBSD.org/</a>
        </p></li><li class="listitem"><p>
          <a class="link" href="http://www4.tw.FreeBSD.org/" target="_top">http://www4.tw.FreeBSD.org/</a>
        </p></li><li class="listitem"><p><a class="link" href="http://www5.tw.FreeBSD.org/" target="_top">http://www5.tw.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-za-www"></a><p>南アフリカ</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.za.FreeBSD.org/" target="_top">http://www.za.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-jp-www"></a><p>日本</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www.jp.FreeBSD.org/www.FreeBSD.org/" target="_top">http://www.jp.FreeBSD.org/www.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-email"></a>C.4. Email アドレス</h2></div></div></div><p>以下のユーザーグループは、メンバーに FreeBSD に関係する
      メールアドレスを提供しています。管理者はアドレスがどのような形であれ
      悪用された場合に、
      アドレスを無効にする権利を留保しています。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>ドメイン</th><th>内容</th><th>ユーザーグループ</th><th>管理者</th></tr></thead><tbody><tr><td>ukug.uk.FreeBSD.org</td><td>forward のみ</td><td><code class="email">&lt;<a xmlns="" class="email" href="mailto:freebsd-users@uk.FreeBSD.org">freebsd-users@uk.FreeBSD.org</a>&gt;</code></td><td>Lee Johnston
	      <code class="email">&lt;<a xmlns="" class="email" href="mailto:lee@uk.FreeBSD.org">lee@uk.FreeBSD.org</a>&gt;</code></td></tr></tbody></table></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-shell"></a>C.5. シェルアカウント</h2></div></div></div><p>以下のユーザーグループは、FreeBSD Project を活発にサポートしてくれる
      人たちにシェルアカウントを提供しています。
      管理者はアカウントがどのような形であれ悪用された場合に、
      アカウントを取り消す権利を留保しています。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>ホスト</th><th>アクセス方法</th><th>提供内容</th><th>管理者</th></tr></thead><tbody><tr><td>dogma.freebsd-uk.eu.org</td><td>Telnet/FTP/SSH</td><td>Email, Web space, Anonymous FTP</td><td>Lee Johnston
		<code class="email">&lt;<a xmlns="" class="email" href="mailto:lee@uk.FreeBSD.org">lee@uk.FreeBSD.org</a>&gt;</code></td></tr></tbody></table></div></div></div><div class="appendix"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pgpkeys"></a>付録D <acronym class="acronym">PGP</acronym> 公開鍵</h2></div></div></div><div class="toc"><div class="toc-title">目次</div><dl class="toc"><dt><span class="sect1"><a href="#pgpkeys-officers">D.1. オフィサ</a></span></dt></dl></div><a id="idp97516496" class="indexterm"></a><p><code class="systemitem">FreeBSD.org</code>
    オフィサの <acronym class="acronym">PGP</acronym> 公開鍵を以下に示します。
    これらの公開鍵は、署名を検証したり、
    オフィサに暗号メールを送る必要がある場合に使用できます。
    すべての FreeBSD 公開鍵の一覧は、
    <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/pgpkeys" target="_top"><acronym class="acronym">PGP</acronym>
      Keys</a> にあります。
    また、完全なキーリングは
    <a class="link" href="https://www.FreeBSD.org/doc/pgpkeyring.txt" target="_top">https://www.FreeBSD.org/doc/pgpkeyring.txt</a> からダウンロードできます。</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pgpkeys-officers"></a>D.1. オフィサ</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pgpkey-security-officer"></a>D.1.1. セキュリティオフィサチーム <code class="email">&lt;<a xmlns="" class="email" href="mailto:security-officer@FreeBSD.org">security-officer@FreeBSD.org</a>&gt;</code></h3></div></div></div><pre class="programlisting">
pub   1024D/15D68804CA6CDFB2 2002-08-27 [expires: 2014-01-01]
      Key fingerprint = C374 0FC5 69A6 FBB1 4AED  B131 15D6 8804 CA6C DFB2
uid                          FreeBSD Security Officer &lt;security-officer@FreeBSD.org&gt;
sub   2048g/E8C96EEFA3071809 2002-08-27 [expires: 2014-01-01]

pub   4096R/ED67ECD65DCF6AE7 2013-09-24 [expires: 2018-01-01]
      Key fingerprint = 1CF7 FF6F ADF5 CA9F BE1B  8CB2 ED67 ECD6 5DCF 6AE7
uid                          FreeBSD Security Officer &lt;security-officer@FreeBSD.org&gt;
sub   4096R/B64357A343D9CBAE 2013-09-24 [expires: 2018-01-01]

</pre><pre class="programlisting">
-----BEGIN PGP PUBLIC KEY BLOCK-----

mQGiBD1rpGQRBACJ1CQS7VnTTvH3wjscXQed2RoeVi+n3HtxaF9ApJbxb77dXk+/
DL1ZR0bcZ8s7uQ1D5BkrqSHevoA9FlEN02MM9qyIerXter2/ZEporVOG+/XMkIiV
rd3AgVwUnawhOMKTlYmttcOpADKr9RkYvCT6QMqFDXJssbW7gPlEqOzhYwCgoIdD
ygZ5RdfXm/hBnp+oTWadeIED/2WvL/Iy0YheRTSmTvEdK+Cd4xPhmY2SrrvF2+lE
oFIn94C0fJhqKhJp+wGXmQ/h3yF0gcr1NfFBm6y1iztEz2n0ciaEmMf1tu0Y+u+Y
E0/1Igpoj9Kj5xxRJD5wYyDi0qzxP8BhvJ6sKJtO+f6/OIgZ0ITYWakim7d3RrNV
0ditA/0XUvDgdEB0hm7iqR8FbwKNmS8DVKGs+CYrFwSBJ0vUH65WFapbdWbi2uwm
8CDKgSWpS16/PVr/ql84ePWdiVhHYmkkjuWPUFHSUcDiYL8YG9rnymw6Enx3Nyyr
ewiUOJFzWN6/u3O4x2M9ljrQQ1FmmAbw9R4KT/KHOyBC0W+xHbQ3RnJlZUJTRCBT
ZWN1cml0eSBPZmZpY2VyIDxzZWN1cml0eS1vZmZpY2VyQEZyZWVCU0Qub3JnPoha
BBMRAgAaBQI9a6RkBQsHAwIBAxUCAwMWAgECHgECF4AACgkQFdaIBMps37J/wQCf
epaHjByMpiZ4IJ7I5va1CwHjTkwAoIWSaoQOtqTuUupwzv4bNpPSBWbBiGAEExEK
ACAFCwcDAgEDFQIDAxYCAQIeAQIXgAUCUkUymwUJFVe2HAAKCRAV1ogEymzfspbW
AKCDvRJCLhfcdt+Rs8j6rxNZeaiPugCdGf70yZDhLmHuZJcirtNKShReca2IRgQT
EQIABgUCPWurSgAKCRCMMoz/FgbbldR2AJ9TkXexibjUd/bysiVJnNAxq3S2FwCg
j2AK9NlD1soRBvC0VVYiTbB5TxWInAQTAQEABgUCPWurawAKCRBVLh4uc9KIpYgV
A/9RhH/BsCRrvLRyTQgtXVFF0bZdKeZxvgxJZ/8tnAx+ZpDncwL6kdtFZsxmplWX
CshFKjCf2pG+YVPSnjtF0nlOgpLwbwcj29Un+2M1TZth9216WvBk++M4noyfj6vO
Rsvc7NQ5kuokLQsq8+gEyZM3OxbtDaDIQx8i6MFueG/PdokBHAQTAQEABgUCPWuv
bQAKCRBnwoCPM8Fie7k1B/95K8U9+QunBDYcYbn/afd195xb5TYUEeHV5Qs2RES1
f78CLE+95jnAno2XfPW9ip6Vk3bHD/66MT3ZuMQhk9BYzzLbEZnbKck9wiwhOhva
Y5C/5R4+AK6fcTfE9EKj45vSOG5PjkxKhIVh5PDXGAwtsIY3sujBMAbeDPK3IkAs
Ya5rC/5X11SCnofkZW/u6RM3Q44MWD0b149sueSvb9NKNk/0oi2HgBgsA6Ziodyy
y5b9QIdvNC+gOajstneVLCWahONnr9npAJse9fS90/SYMbH8/BcRpVHT6TG1Jwoe
6fWegEEDjwDAw021msQc9FUfW/FpJMZiou2cFXXP5vpSiEYEEhECAAYFAj1r6bYA
CgkQbGPaBITQ1+flVQCgxKicYCuXL7hT3Iz/i5YK8vyZy/YAnRpwkzbKaEMnVzMn
smeFMTxejsexiEYEExECAAYFAj1sgqQACgkQhDa3C3+GgmhvrgCfUEAGrporit4V
G/xddNf33zi5jFIAniCdksJJ0DhTekfIGxBOvwq0Nh1viEYEExECAAYFAj1tVWgA
CgkQObaG4P6BelCYDQCgnyVaUr7s/PJhJYpwi256vJ/Ha4EAn1KbR6Wc8JZzv6Bh
+iXkwP5fvgVgiQCVAwUQPdMiy01WKCF5BQwRAQFr5gP/XnIcMS41EP7ooB5Q0th7
QSBtLFCauRCoib7uKmOM5RfftQlSVqvnLOkrIFe/9a9iS9TGSUrphJF3dztcvtp3
0VzsgjZ59NRI7Nlg//FR4re0UFKf3gvHlyYaMd/hYc8M4NDPacAqoSjbMwyXAIKH
UrPYZj+ELOqaW2mWsRGNQUCInAQTAQIABgUCPd1MsAAKCRDhyUtG3x3UcTr0A/48
M61zbAKzmJ0kHZ+Q6ssXtBb1Cd8YSCUGqlr7i+LvyJgdB+ebyUzzXE8KOektIjxj
y0TtVTgsZE8YLW/EdoLKoa6Zw+BQKLuUxH/xEaz7la3kOwrXXOVnmA3zWrKzXFFT
aqaFf8dddCb5iJ/f0aafBNdocaUphSyoJZwyVo4Z2YhGBBMRAgAGBQJAkt8pAAoJ
EOuA3h2LcdOkAuMAoKCz8SumnyZCf1T1C3rMdbmbYNkBAJ9YCNF2x/dPRsxSeKbu
SmBaHlPYH4hFBBMRAgAGBQI/bZczAAoJEN68VxqalnmwSaMAn1l/3BJQzSdWwKd5
1a9x+kxActRyAJi6s5sCKTv9opL9Wj9rWrb9ZPj3iEYEExECAAYFAj9i2VEACgkQ
TyzT2CeTzy0btgCg3BceMu8hKtRCW16fAd0vtHoSp1sAnRLvJuDmypHO3mgvg3TE
Y7gYNsEziEYEExECAAYFAj9iF9kACgkQyIakK9Wy8PuqIACgmj3gpbfiPpkx/tG4
Yf7mxzq4juEAn3cLYlJwL+dcZ074wY2pXfd7cHNliEYEExECAAYFAj4cXQYACgkQ
2MO5UukaublYAQCggRDpTQCl7fpUnunAxxJzK0fOuW0AoIjRbboNnilOL2o4fmt1
TaCRxp0jiEYEExECAAYFAj4cWrwACgkQbZTbIaRBRXHJjACePSDDtm3jIlezrxKu
F+RRo4w+3OkAn1BqRElRGWu8HrG9xhO9dE0jIG0LiEYEEhECAAYFAkBR5+EACgkQ
OO1t8kNcHJqBnQCeIHpxX8Zg3ZYa6ivBJe5AKZiWd8MAn2np9GJi9BMTTLTX2sL8
ekC2lzjaiEYEEhECAAYFAkA+wrsACgkQqh18sBJn8JIccQCfTTO0ZIdIp5CAqlha
drSuNhU48ygAoMmB5mXUlcaV8ee/VlLqSupEqJ51iEYEEhECAAYFAj9h5/cACgkQ
2MoxcVugUsM2vQCgrsl5oItD6odM0TkfSYx273P7WCEAoJDyxJ7b3Xy67sOf1xPh
FXbwmKOaiEYEEhECAAYFAj8+BuMACgkQ2z/V939+MWMItwCfTZsRZJujvGiFYCT3
8JXYY10DOE4AoIPcHvW1WvgMLothdYGLuSADkWrSiEYEEhECAAYFAj67eiwACgkQ
72rIAB3Lz7eyEwCgv5WXThEaxz4fnvKpe8M9xC1qJhsAmgJxO/as8NajfegYmW4u
Gwxt772biEYEERECAAYFAkBHsmYACgkQMEuQSofRzg/UawCglF93sAXFzUFgrPAh
AJldt6l5fkUAmgKVuaJVV5em8kpR/5iz77WV2TsKiEUEEBECAAYFAkAiqvAACgkQ
1hDu5GjD2mW+VgCgxPsh6evF8lP5m9qOA8Dw03SOVOUAl0UuwwXoTlIi550tPdZ4
apxDpFyIRgQQEQIABgUCP+P6fgAKCRCT72NexbJb07I5AJ9g5j8LUeynnc8Qdaa3
2/ELvsgMxgCgmAilm0OaV+GI6VrWMwra+oy4CU6IRgQQEQIABgUCP33yEgAKCRDn
Qgt4utuOEaxTAKCMA67/PUI62JfKwUuow/6NL26W2gCgnMthTlLATPwz2tNeL+Ek
g3o+hF6IRgQQEQIABgUCP3HtvQAKCRBNrPLCwxI7HxuyAJ9/a0KffzpWw2g1lAT4
P7c9eD709wCgkcR0gypA4PPqNlmWlwAWycLb08+IRgQQEQIABgUCPuGahQAKCRDF
CSV+DzAaLn9JAKCWJ4Boe6dag2ukC6jFugnYcloLDACfd5nTjGj2mjJiv16rP6es
KAkz4luIRgQQEQIABgUCPmKk6wAKCRBuxMs5TCWbRzvoAJ4rBT4UpsnuSXHm+W7H
Z1D2wf1wrwCgy0ZnBUT3fFOd1VCDSJLUpSrbE8WIRgQQEQIABgUCPmKdCgAKCRDh
qZsPqaYP4ycuAJwL7n7cri4NzC9yvqW9Gl9nZptpUACfdIRzYqBamZbyO4rOa6Jl
uhH8JAaIRgQQEQIABgUCPlxY8wAKCRDnZkDIb0WuacbQAJ97zdAe3/5VX+d6A8vK
/keJbkKcJACfS7e2yRBp6i/VC5G7bqZvYZqxKYGIRgQQEQIABgUCPkf7+wAKCRB+
kn2FdkGYY2SPAJ0WZWC2fNfdq6cLZPkiWGVnLY/PuwCg+t143ijjKQj61IGoU3ch
hRkYl7yIRgQQEQIABgUCQDeVLQAKCRAqbV2p6xmZrAJJAJ0U+DCVqGxkdSAcfbgm
hkSxW9yuZACcDN88/I6tTSm3/l/occuN7mQGOiOIRgQTEQIABgUCQH+KJAAKCRA1
nhUBgs2eQzJKAJ9hLUeoJ1KhzvmSftxFIAdjoyaB+QCfQZ6UDZDksdUYES0HyZaM
LoEnNsSIRgQTEQIABgUCQSeEqwAKCRA/oN4IoNORaOFPAKCE7SBgOuugO9OOq7LX
nziKHN/PlACfS6tHZbyt4A5HQfwh8G6ay43/7N2IRgQTEQIABgUCQLYRzAAKCRD3
RQ1yObRVQXmtAJ9NP/a9aYNJ6oLx0rlmxIuK6q0ezgCdHg++QjH5OSeEpTYTBxUT
kJWkfDqIRgQTEQIABgUCQLIoXAAKCRB5A4OpdGbmU+7CAKCi8EmsmWPUHVYzCksh
JL6rjcC4IwCeNdpDKcYiOqjrBGmBXYLHN62FgYWIRgQTEQIABgUCQKrpNwAKCRAV
G6mUEXXC4zQ6AJwJjeizo5nnCZ0Qzeo4keC1XPkUpQCffz/qkjK07PRGEfP3FE8m
OuUYIyWIRgQTEQIABgUCQKqnpAAKCRAHYXOxkoTEUrHuAJ93vaIg6+mJX3HDSb2f
vuJQiR2AHgCdHd+yVP5sqYXGeZ+ragpL9sP6K7+IRgQTEQIABgUCQKqCfwAKCRAP
WuglNDguUY1NAJ4wcyUIfCQMXvQ7wqToAH2sJULFJACgqlUFO1GoXQKTvG4JGnfn
0A8D/WuIRgQTEQIABgUCQKjgbwAKCRBxzq+s7KKK22EwAJ42eTYNPJ2bEHL5bgnl
+sgxDCx6GQCfXIFX+AgG9d5TMVf7qj/JKDQXU9KIRgQTEQIABgUCQKjfpgAKCRCg
7/ngeafIcHhRAJ9Vt5ZVFnqstoF7PS+Sl9mybiDdgACggm566eWLJjlax7v4YgDV
P80r8l6IRgQTEQIABgUCQKhLnwAKCRD9/49Y5NtE8tVrAJ0UoRfpoYzGFafo5xOn
tCl6ijp4EQCg0tAVYXnuE4egIEPRB5vtTui5ZL6IRgQTEQIABgUCQKhLnAAKCRDS
D9QFytUJxv8/AJ9fThcbzZTiJv68+i9CrWeZdIUY9gCfbBZoHsaX3GoWQvVLXozg
UxQD1OiIRgQTEQIABgUCQKfupgAKCRB9vQuV7YwgQnJSAJ4mDNsLfr8rBJZgKaks
zvb9W7HRFgCgmFN1I64Cnjr/gET0a05XLSWpnN6IRgQTEQIABgUCQKd8nAAKCRDf
7jeUa+yYCrC+AJ423DDnUbT3auMicWgsBTRioFOHBACfe/773KoNw9MA+0NFygQx
KS0+WYmInAQTAQIABgUCQKnAwAAKCRAff6kIA1j8vdTTA/9UzhCtYCc4vFlD8KDp
m4jGxfGxy420u+VdytDMJdpKWxiGTH7mKq87KGKKzsRli7m/Aeeyy6qezw8LgHlc
AkC5H/438Qfy3gqc//KohzTCngp+lVh/A82q71e+aqM6Zdq/qpg4ZIcNyzKyIBN4
3MSsMVuZApPoR4ecyMXgdllt+ohGBBIRAgAGBQJA5EuHAAoJED8Szz1kFZUJw60A
niDmbeslCVAQZJNxJsxZs2E4kV0ZAJ9Qjjh5d1cm05cTAjjOzEV2SLXpbIhGBBIR
AgAGBQJAsOzKAAoJEH63kt8ZH82KwNsAoKkZuz+38bJ961/LczZF92x0hdxIAJ9Y
HM8/GzeWZG0zq9XHevuibrfdyYhFBBIRAgAGBQJAquvkAAoJEEuzpm9+s1JA58QA
l2BPvrAyoyIcMODMfz80XcD/V9QAnjqI53HdvHKEusjWgeBFz2LMFtiZiEYEEhEC
AAYFAkCo+K8ACgkQM4SDxAv8uX4H9ACeJhldCoPQ8jPLXLeFvoIFLI2M5OwAn14Q
+n+iH5pyXZUO4+crfghC1B4ViEYEEhECAAYFAkCoC7EACgkQDMt+/gswqTtE8wCe
OYv6sCNDH1LS081Io1+4WddTM2YAn0UXd+aIt17uSqgNJD+31mbpldEdiEYEEhEC
AAYFAkCn3TMACgkQSUWlN9d7Q/tBoACghHZaTNqIV03NVSPW94hifHXH6Z8AoIXZ
43KpCmgk4cFI8dzGauB2ggZriEYEEhECAAYFAkCm/AkACgkQF47idPgWcsWfhwCc
DdggxPA9FNa9CFUZeoRQgz7vrUgAoIIaIC3f5Ci/flk4LIpD+8OTkETJiEYEEREC
AAYFAkCm2DEACgkQ6SYtkGO1mF+woACfX9IlrfU63iR+LvT8RUO4whUug/QAn2c0
AlM5wsSQUVYnRl7E5KphSKNSiEoEEBECAAoFAkCm0/gDBQh4AAoJEPYcyLWu8zhH
NIkAn0xhy9EjBPURUFO6teiTB9wcwno6AKCGwl2XUa9TyrKcnpNlHR2nWhvEkYhG
BBARAgAGBQJAqukfAAoJEBUbqZQRdcLjAn0An0TdGpuJxIHokIf0VMI2kXLc/6fe
AJ9WF3rNR2/zc/fk9psqHpdb9W6ItIhGBBARAgAGBQJAqWMbAAoJEGlqm6oW1qT4
8HAAn0drFNBEJ/q970omFYwptBqNZ68JAJoCJ5wIzYKmtytEuc0fgmLOQR8/yohG
BBARAgAGBQI+eTKEAAoJEJAtvZGMOKkKnOQAniJX3xzZ7uWHHTnnSFVQ+cQIdHAE
AKCDOhDg8BFu+brIv63YgzvxGhJcU4hGBBARAgAGBQI/fWYfAAoJELcM/uw7sga/
ulMAn1/jrciw6qJ4Zzp9fXj4tNKkI3hFAKDfiJyUaUf0KJn2buZVpZQIzBsJ8IhG
BBARAgAGBQJAyTLtAAoJEEcxdTMMgeE8SCcAoMUQPwGijQMIEhOqYVKgpHtoJMJw
AKCRT4bUCO4RMGX2QZe9Wt59QUkBbIhGBBARAgAGBQJA5WgKAAoJEFhOU3zw+3u3
UKMAn1WW2WZBBmuhZSA+qxyPuKdRqVgSAJ9B4KhrMFFuzxiKFa14/4wMOIVZhIhG
BBARAgAGBQJB9Na3AAoJEKH3GNLIXe3AXWMAoJzU1RKakiSrTaDWGRk/Ly0zVr4s
AJ9pt+bsB+ArJTjUyrbkDwDpitDV1YhGBBARAgAGBQJCSIaFAAoJEGmo7Unq2nxZ
NokAnA8WM1WobqfbQ9xJbAZpneezHTf/AKC4kbDUDr+b0Dxr0tocT2Efk3yao4hG
BBARAgAGBQJCT17CAAoJEBi2sjIC/3GyOKkAnA1o/lqo3WdBR0aqj6Qmg9dHqyQP
AJ49/qJFJrNO5kwk8azN4CCJzGY0rohGBBARAgAGBQJCe2iZAAoJEPMxmA5OilAb
UgoAoNd6HscseNFee9fE8305ujhGfcuxAJ4nT1RlwoOEpcF6YRzbNxgz2pVe7ohG
BBARAgAGBQJCinGSAAoJEN+ig2JUF1no1NsAn1ZGfKRP2L7njOuzwOEW7swas6UW
AJ0Tf+IBf8fuuo2Ihc6Np1ze67Ti2IhGBBARAgAGBQJCqgu3AAoJEKK7Smn1q0T/
n6EAn32upJu7p8WWtYbR27LLKrXpl/H4AJ9QGsowCK3VyMAES4irU73T9BVtgYhG
BBARAgAGBQJC7B6hAAoJEINk48Y0qnRPlEkAoNXnLLGCNWILyMUvhxSXAyZ5xFs3
AKDqeqqPVWZxzgF0qa/GetzAYPCJNIhGBBARAgAGBQJDb3R6AAoJEK+1mC+KAcSn
tRUAn0kl7pUHCOU77xfrjLWvszlq97giAJ9hQHMzuEqrEnpP+JWLNTy1+rVCAohG
BBARAgAGBQJDzhwGAAoJEDl84qgJDKm0EzcAnitO6fkU1KmnC0hqcpDQCNzJT743
AKCOSf5lEeLQeRjJLAjWBLstOEM57IhGBBARAgAGBQJD4aXHAAoJEMMQ14pUoOQX
VzMAniGfPL9myk46V/ESjoD3HHp6rZxdAJ9kBWJirGJMf1xLR+P/1/xhQ6AVaIhG
BBARAgAGBQJEUlIyAAoJEAssGHlMQ+b1UGEAoJECFUozma7E9Asmq5/SfaxqNTvM
AJ9uDRNRY8cVU+jZe5IAdLX8mTlgr4hGBBARAgAGBQJEkExNAAoJEJjt8eIHzJ5l
vFkAnj/yQBZE3ozWTVkGpySNwhx9JshzAJ4j0UHi+FeuyM+/1zAuBUPJfSM664hG
BBARAgAGBQJE1vEOAAoJEKIjlRMQhVQt3nAAn3aZ+RIOG5GhLjpvqy1OOr178Q1A
AJsEQk83rTJdBmXp3L43RD3crzFr8YhGBBARAgAGBQJFFsqyAAoJEKctGR6SoTMk
ROkAn3X+A+3ztaJ3TzQb5zyMTzkb77RsAJ0Q/Iu+xxIksgIMKj6e/3YdMG+m9ohG
BBARAgAGBQJFVx0aAAoJEDDUOm5k6+Ig7XcAnjNDKUxQwTH7pXu3H/mZU2LoOLNt
AJwMcjCeNwq3QYhlq4RjZivS6SzLY4hGBBARAgAGBQJFm24aAAoJEFpDCyQ8LuZq
eMwAnjvYrEl0MYUWDJON71k3AE80KPhHAJ94HusVFkxy8AIshFd7ykyHxbqehIhG
BBARAgAGBQJF+uPGAAoJEKenCzN5XdlxXuYAn2cKkEBQPgl+/sK70vs2kR/sFuEP
AKCfo09LN9cWyUyGVlyMmOM/u4ApeYhGBBARAgAGBQJGuXwNAAoJEMNToZJ25W+2
52IAni2jS3152HJklqJuNaH5AcAp712vAJ900+YK76yeMjSkC6pXzQIPD3vHeIhG
BBARAgAGBQJGyEG/AAoJELNRWTiXjTGseW0AoKMx1NIg8v0QVOeJLerufrXyojqC
AJ9bX3re1+sLTyAGuKZtMNlJr2bcZIhGBBARAgAGBQJGyEOpAAoJEF+0x22hWnfu
TksAn3+KEMREtXdpGMAU/3Vslc99IGh1AJ0RgkjBif65Oo+sbpid256jODaNxIhG
BBARAgAGBQJJJhYoAAoJEAoQd4z8f0YhVh0AnRNd7kx3gy54FgDkMS59ogKnpMJf
AJ4jW9kd9CnDewdqQQvgA9qWwyjElYhGBBARAgAGBQJKL5R6AAoJEKgTSad+1XPT
1+oAn0z7hK2tQ3TP3zVMtX1BJNlHqiX2AKCVN4GMJ0GtfUV/Ro9IKITqbJ4OQohG
BBARAgAGBQJLIgzIAAoJELTjE/U2ZxFeSnUAnRbPqh79z2K+Y4CYvlFsSLRw91nK
AJ9BZUWrhuqN8WaU2Vy8KzHCsAi2fohGBBARAgAGBQJLtOjFAAoJEGfzMRpuD7SU
+UcAn2zoN6Mz7jsU74iaIdDGl8g5qVh1AJ9RrXqLxHQFxaoQ7Ho+dXVhlOogTIhG
BBARAgAGBQJMRpL4AAoJEE/BMsN8gQR2QAkAoJ1OvW07kFwhFv1WXEN2VFbd9xL/
AJ98ipsE2CmW49OYax8H9+RBG7VUYohGBBARAgAGBQJMZpp4AAoJEFfAdbIXpfJc
dM0AnjomwQIi4csicV/KXOYyFf5ZEBcxAKCCiKBcE15makROEnHazgLpIwYRBIhG
BBARAgAGBQJNbsEQAAoJEE0sDPzVimehi9kAnAma3cts1K0o7cO92WYjJ1VhUco2
AJ4oNnprsH9kB+REAJROg2tb0kEAMohGBBERAgAGBQJLSCKFAAoJEG09p+pjnF0Q
cwAAoMstTzBlHEm1iKoY5ZmyxmXeU6dpAKC3j0aZFfw8hMov+UsNIeUCBTdaqYhG
BBIRAgAGBQI/bSymAAoJEBj1A4AkwngCAZwAoLYGe6+hh1eT95+T2K6lhfZzV5lG
AJ9s/ytvHef5qt3I66rzLb+Evqwq5ohGBBIRAgAGBQI/bSyzAAoJECH5xbz3apv1
w4gAnRGfACThXTlxxtvEc0d1rPsl9V+EAKCz/8yOT+wlxpaxHgW0qt/XHREaOIhG
BBIRAgAGBQJCcRScAAoJEEsiCRufMca1I9kAniwU0GNZDVXzKslbVu4G1EKEHjWg
AJ4hupCGN5Cnzy6ELhc/cXKzux/MDohGBBIRAgAGBQJDHl/wAAoJEPW0eMZmqaUQ
2PgAnRc4o7Id2njS/f4R1JdOCJGdl17xAJwOcnGAwN6I7HSh4KZ51Ks4GnN8aYhG
BBIRAgAGBQJDVnhBAAoJEGbPHiVU26Rh3ngAnjlURkEL/3EqB0gyMgitGbaSm7us
AKDv1bQ25mYhwv8vwXI1fz5MUKfFTYhGBBMRAgAGBQJA4+GnAAoJEOgkW4kiRO2p
qQYAn0xAuwT0FaBtf2nBST6clBcxGyqmAJ9smzk/bOtKBuTKm6M+eTIeME3I/ohG
BBMRAgAGBQJBhLIpAAoJEL9L0OYEnbh5BpkAnA2rOpPzo3Cn53N15UT/4sGmfWrc
AKDoMHtpmWF192QJAmgRGsiSCUnrsYhGBBMRAgAGBQJBmwt2AAoJEMdeyVAbfju7
hQMAn3MCk6kP3/Gr80VFFEZdt+MMNPN2AJ9SRHkmWrbOHKR885L9nb2eENAVQohG
BBMRAgAGBQJBnWMMAAoJEL6YDgZWajXgkjkAn2dOeURnR4RH6ML4/viKf3F++Zpb
AJ4jqD7ftRCxLa27aV+74VtmnR1DB4hGBBMRAgAGBQJCqJF4AAoJEDIrCnSoXv2X
doIAnRskFgXun20T/BEKwFFIk/tdjaIqAJ0W76fYR68dV9DWhWYhkxlHQzEgvYhG
BBMRAgAGBQJC30tQAAoJEGuSvENlxpT3ZnkAn37o3ziLVtmCoSnzHn24LtQzNYmK
AJ9dXs8VxXJEP0Ka6DqPxML56EoYoohGBBMRAgAGBQJEu+5dAAoJEJki45vXY/+i
Z0cAn2IoDE1U25fF2v7fjvG8qxduHM2+AJ990FV84qxE4fS4g4kR1Ahel+tDr4hM
BBARAgAMBQJDuNMtBQMCCMCAAAoJEHSdKVBj61zIIlMAnR6I3IIh0EzwQHezKKHe
jHhVlcK1AJoCbUgOQ8m5nyHMF0bl0VaBGhMrH4haBBMRAgAaBQI9a6RkBQsHAwIB
AxUCAwMWAgECHgECF4AACgkQFdaIBMps37J/wQCgje4X7iqjNbVDgwpk+98vc+/H
oE4An1usSnfAlNcEcd+05ksTw1gPh+h2iF0EExECAB0CHgECF4AFAkNGu/0GCwkI
BwMCBBUCCAMEFgIDAQAKCRAV1ogEymzfsp7eAJ0dbFbiegRXFnp6X1a8B1eTDNdX
WgCeLmzXUp83gjnUnVrJ3sJUREreKVqIXgQQEQgABgUCTJ9xAgAKCRB/urM2KlaH
OGhXAP0X4sBAkxjxf5AcUrbFvyElsACYou25SILHiBMjVzbL6AD/TQpi3dqC01OP
lmSHD/0kADdJm8qI2QdJ6POqj4RTl0yJARwEEAECAAYFAkM9Z0gACgkQgdpXm5x3
8d1Blgf/VEE+rXnWGqITLcnvhNGWE221fd43dJZwWBfw8lkuPMXyRlI1jdVStON6
DMiCS9+Ex9c4nzyGmkKneqkyuhW04+DgCoKpbflAM9tLpTG2Cz43pLMYfiKTPY9Z
4MIlWT8bzpF9jP2YSOt7RSoJna8hiBr3NCxRsll/SZZ5q/bjO8W/aLHGh3VmQFMO
kdsYy5J7NGdv7oTYAnIzyuc3QLESHD80qaJAjrmR7r7clDPPRXfy4GbBI4ZtuRrk
49SdTfz0OM90pGOBPEaZuP+MRLeitfMnRlHirfCv8TMK+Dlk1yH/eYQdVVfeqK7j
XHOCmYWn9OUCjsnP49iUI2lIUHmng4kBHAQQAQIABgUCRGDOXAAKCRCJsz+f21Oa
7WcoB/4kqfVfFZs+i8IvLmibdDL/sR48/SCjE0KSnWyQna6yHpId4t1kRQtuIJSI
7Z7DHNZlfs8xZHFHYRBiot9nfA8GPxw4RhR7MJMEnrPByqEqmtOUGFrCbYfTkSxd
SGXB+2U7MNilkGEeTxyYQ9Pyd0C2eoLGJ3II/fCs4TSb277C0X7G1YDG3/yycdPq
o5grlvikaIFrnP9UsQd9MYFeCM4KUw5Wb+QkxVtElBChBT3KKlYex5wx4IAV913x
P0DfzkUGlpuh8vlyXWriUxJimjUzV6HCyYr+zt+dIaqSqvgDCsq1eNgNO+N1qinW
8BefBW5UNxU7oW2YOaSKdIcW36WhiQEcBBABAgAGBQJNeUGZAAoJEEjb1pAwnDBe
gPIIAIf0exOxFLlv2buqwnPbAwCQUk9+tV4NumL49fs0++JLZnvWs4TlC/llnkTD
aJkd+BSuO+rInccO431RXsm9a9OpjEFzyF5KhFjJicfnFLa1bJoQxsmcmVxEHU4B
OSvDLnEs3NAkYRwDriGNdTiLI9IoBwfYriLgXAVU/PJ+hYKtka5R+akpXEaM7w8X
d1cweXCwl9FSzMEEul1RzxHK1U+7NMYE8XlfPCh7efkR0Vm/07xyNR/tW0jHf6uq
Ioj2WGzW7mJIq006YzBMTFmIOpPHKDF7qFpGakZjTXx7ljB44A9gQXR+WUnJy35p
Ms/RGXxL3BDxyRNf9PBM5Eqrl9CJARwEEQECAAYFAlI8HXIACgkQRG9u+TkF4/0T
vwf+J+nTvymJJNIk5tOH5m1qCdF85xYej2Ey0W+QJgdomfOJ/qfpZZFXnVSInl6y
XhV24iuFC7VfNh1sHvkI8Mz5pOdUWn3wH8NNL+RD8KHK+YVcwjs/eZg6EtAlUfLm
77p9w4tXdsRfE35zGtmNRRGp/CfXolX0UNyEZoTnqyRVjp91PepkY6yOHeLtAcmj
c7+OUM/f/z2lCe/ZXbRTvx0yuE3YGKsvVyNocucSUI67S3KyVXgDz9Gr2CMehjv8
Xx81NmfY76IVpOLRxxSXG8pahCw6xclWQo2BmG17wrELvEoiNTK9kp4Mi+tArcbE
u3y/9wCnkfTnGeofLxlpZ9I+0YkBHAQSAQIABgUCTox57QAKCRB5eCsGL5NY+7+9
B/4y30T1N8UDAPyy4A9D69bfElvULMNaJNbOVP6FQ6eJWWvir1kCkvqVnh5hCfP9
+sF9sdEd4UvmvgIb9bQcPxmtROVbMhK7CouPDbJ3PcFgIewt8G4z6TfMgAbIbNIA
ySo963RI+Hx4hc7UWruMYG/i7OXcRdoVKK73ROO5zxt4XFtSNcst4ThcWxlaWO8B
QnRWYaJIVjgkp++q5fNPUK4Fq2iKq3h65TGtVjD2jdnu37gdSpu0SVLVHjs7jzK9
qzlrMjub4JH38hWmII8d9LJ39izvYxTSY+9Vb10/rD9NjR/J5o/JYkbtLP3s4lht
CyFpfj+VkzMxk9dr86HShplUiQEcBBIBAgAGBQJO9LVPAAoJEOgBcD7A/5N89iUI
AOg+F4XnFFQvMLYodkUJiwOYjw0I/7Z0hfrNKHIj6wUpQKUD3n/fTFCrX+DihQ2d
jrcUrIza2ZQwoRnTyA6zJWrADGqqPlPCJb5zangYwVAyc7+yH/qJtK2TqdVYSgo3
MjvpOJHrQLqlVpUl9nXg75XuCU9BjlMDL+i5BRDOy1TcHQUUbhhPmTmpdeQpxnWY
tuCF2L5IAm8DOH6zkeHNATR7yr+/z3/s97+H0SfxfdocSHUAtpAbeb/HfYzQg15H
SwpLnFg+otJVDaeMiT79jd2G3Jy9MZD0HkuFSiKJzDGA7zr/cO9g/R175WRqFyHS
4zhI4uuVgbZmERpWZ2yETsSJASIEEAECAAwFAkL+Q7QFAwASdQAACgkQlxC4m8pX
rXyxwwgAvjFEl/lyPAFPXTNzHbjGsp3iPo0DxSSHlqCgHA/zcP0veRCsWyDmJmpN
tFnmoCiT23aNtTe/iHhibLcQ8hPbR9oZOiLU/J1A5wvdmK5NqCocbzDPI1u8h72l
YIyvUWvpWGv8e6xnuQQvtX1uxUXK/DPDlHB76TrqVjKVT2CUQ+8vNtgovRE+PHB6
hCEVrtnzoEWGWopruWKBXmdAlqna9os6AWDcK9+KA02KJnALX2XBwPzHU3a3xLJb
aVfqfsIeiGwMQXdaXBHAozM/4exdh9srGmGkHqoA1OmYf7etUe3wwykLCvmhcfBV
dPYu8LYaNUhBvYrCgXqt7ZYrrarvaIkBIgQQAQIADAUCQw98LAUDABJ1AAAKCRCX
ELibyletfEGvB/9/yJIqGF1PrMXhIs7jAhBF5KEqvmvQxnGKQabfYSKciXwewiR9
aSrSrXqGn1lt4ABsc3wqgiFKZBCRfAl/3QrQj46n3gTaiO5FBz5MBJ1VpYUL01+D
JILKfwWT9BbQs9cZuVrLawbId4vBmXvG5EN6bUhVPTgpHRYx1V60v7bjs86c2/du
ExM69o+gL7oXXRgdBhYmkbTewV7uERCvvgrXLUgUN3vuJj1JxBFksFSzGLZ/9ABQ
gBpSbHJlwrX8cXRPvOqu0YoeLuS6Cn7iq/xxLkdSxyZAhsYPUqrteGKLfs4ixzV5
9M1Xu82eNGaWDfCSYHPy6Pdu/ZEkLKBtpqi/iQEiBBABAgAMBQJDEMykBQMAEnUA
AAoJEJcQuJvKV618m8UIAJnp1WA2XMJ5mZ9rNGKCTow4Zs+Fn+8PSWjD+DWxCIUD
AcMqZaUGIv+TJ2YwZ8YqteCAzV7dvr6yjQpNn4XLTcxyQAqFGR39QvyVC4D6u4rW
v+NKgRk2o2J0BooudbEGRk2gwsjzo09OZfaCwtiOgPw9a6Sy4rPjd+fjZYx4EWT4
6u30sUsXiv0gIrUjzd4WPVeLn0j5QPnnDKa199Ekpj0XP5O7YQZUy2Rbh8sCJQQc
z+ewzziodRUsV8cHb3re2wpGHImJCXvMrXZJ6r4aipB60h7SlN0zHW2m9NrNOiHa
by8shlZe1lStADhOQ5BNMy5xvjVn3cNTmUJWxmd4nRSJASIEEAECAAwFAkMSyAsF
AwASdQAACgkQlxC4m8pXrXwPQggAsN8MgCCA2p7+KLETSIsAxOJMi8Sit1+QftkP
f7uuay6BeCyljwuLazl5KiLMjiIx0NWZn9hKYnETvaJAcEFk6VM/4KKc3Q8r/WIX
bqeCqZySRSNYIKXpQcUw7+f++coEiiXK+nHJykWp0z7PmjIVOEiUMwjP/hkE+YYt
/XMOl9p3mIHfQc2zxGm+Te4N7PhBX7QqMMTLJjXB40ajssQDdndbov85ZgTxlOv8
+rygAOfjGX49X3PO5QexTp8dcQUUn1qXVbMe7m5YSBtIVRbi3uTLc0RTWCFyUwdN
GAiwdwKnRrjnQhSN8fmMJ7YMgLeNqICs4pc5pJszdsQbsh3m0YkBIgQQAQIADAUC
QxNwkwUDABJ1AAAKCRCXELibyletfIYLCADIJqYvAp33q9UJzKrhXheAVDlZaNs+
z1XGUUSY+GJJUZ4jlf7UzLdUD3mUzfOSmkkQGzkM8jTz2GzX7LX5EZ9vLGWJXCFa
RauLApB4SW55SELqe2JrUhDJ1GAxmCTOWsjGdVatiiT2tR67z6tnjpcF0neaJiMz
VCXlM9dC/f4odPM71w4e62nSRvDvVKoFVwqKp0Ihwa2PXZBH8+M8V5a/kFt/Jqt2
ooSDM/WVY+ttqbnivh8o4Qvdw4FF9vyJr+buehyW1PZzf7SCG+q+3CKntDo30FAU
nmLU8eZ30rbqPqL7QfwpYRqW5Dc1vUFMAYbrGrcrwbcePHTqhgQ6rs3kiQEiBBAB
AgAMBQJDFBmlBQMAEnUAAAoJEJcQuJvKV618fUQH/3ueYtS/qV6sDgdjLaCTMfNN
dEPFTOTmTMlM8HMb78bYMhtt7KhFQ3z0qbvAZCvawM92fXmUbxCj1rgX1FINPeIx
Gg5FVz1TQjBT3WBLnVvVQgyq+PbBypnrrY2KzcVSg2MG8SRm29PXzZ3Z32IjzW85
f6GkWjq4V+5a9TVI9QUbj14KpcqbVaLXk4HxAQcXtzhUhyxpNs3Z1PlfxPaosZa/
02f7ys9vSMqPZeTionI08p+AkKYjYRrywW2KkGsu7vu0ASWNIf9Bc2qX5SUyv/I2
+CASIiSs9Y6OIECRDWopphEfjWAVmAGOvVFR6xNnKrOXPITipK5TSyQveEjhjYqJ
ASIEEAECAAwFAkMWE5EFAwASdQAACgkQlxC4m8pXrXyAXggAi7kl+4WYEZZex2Hi
t8Q7xpZnkXe9bpRZD7b6Ms50qv5XkCWz2YVKi+IXECFNI3EqvMYq1J8cG3iN2eBz
weXR00WFMnVwDLgY0ijdDKsiuFlaoPXHCR1ql7LKavcHHZYiX5PwHo4EFgNT4adR
eK3tLJtO1h9Fsu+377VzwRWhgFXf0+MxHpr+gkpgSLyxt2zIAYKm5Ekl/OJm6UIM
Qre6yEyYQ5r768s6UsseJoQvxVjuYp7ZJCGFTcRuAp04QFzgRAg47J/GR+CPbwTv
iy0PcnGD1Ag7ZN0t5QC4/gF1kD2GEVDGVOj0RYzuHg1E7pElFgHRYze0a3XeYzrZ
CIEWOIkBIgQQAQIADAUCQxdlmgUDABJ1AAAKCRCXELibyletfHejB/9mY9hrnyeJ
6EPkJumm96b/xCdojboUJmz59aX49DhOaqBLd7lZ4XkyxFxM+n3siJOxjXVc+5hv
AEE4F0laVlVqHiL2wLkGS/tOWlmkQ5DiSQPyhjZuS5JMuBPR8Qza1IIpjEb/hW2T
HongeH0rdICj3ksTgB6ppL7D73BxocO0kHdzqnPVH+kpc68oRsC4OeNKom1Sg2R2
rgeeyTA8HMvgJGpjo3zH3InYonNqkpQG0VXdpAIg/H8KeU/G6nX7dHvMzxOrG4dj
Bik43iOUpnPUeRN8EpZjUMHkTFZ9OTvxUS5/MVAbs9++IHDm9PNX/r1FLxI7ry7D
9XTzaONXx6esiQEiBBABAgAMBQJDGLZNBQMAEnUAAAoJEJcQuJvKV618klIH/RYe
XwfWfXmDk9hwEhl7mx3Tp37MpBFHVg+xAMbJp9RLzr+pMS7bpjq3b0WWbXVwjuIS
UV7lnHwKrBDM3WtNhIWkQbSRhi+B3a6Ky4Hpug6gSvrHce3sOHNYCyNatL1Dgm6i
3lv7xs3NzlmSDNuftEU3Gp6Jv5X5vASjnSL9Y/E4xN3gfot/ltDW+H6SAdFde3z7
IAxXvl7wjxot3M1WNTLqmtLN2MRFsukyX6xVKVboNSMbY48lfcehDwv6uJXkwnO+
aK0fJ75fXRrHonBf1hiiFmer5Oi7WhwGPxlEjmxzKLlyUWmqp3uExuzRDbeXPgbB
IJ1Y3GR4kzY1zt8DLgKJASIEEAECAAwFAkMZX5AFAwASdQAACgkQlxC4m8pXrXxH
Gwf+NSKiOGVC0jpp3IjY5+pZWkCG8qvB34dQga2YxRcvOA0op4pKbIXXsrYmWveX
q7+iK5TSCS7iQyBlLendaNZ7y8dGSS0rxlMKvWePVKmZBXY9uYmJdDEeDcMfj519
wVd8pPmu4Snpc0opaj2gu3n4Dr4tatdvA3sB4AiCiXocDcEub7EsunQab4I0Qvin
j8ApouRMJSTC9Udytow7beh1p7t7SfyoLdlsI/1a4T3TE58jPk3eir/DEAmh88Xy
hXtRq7GBTx48wSa3lGRXfWPJW1ODYS4FViNyhRnZ8q3wkPEJxaHs58MkQqOwxGdP
B/p14HW3T+IV59ACStlXLdfg5IkBIgQQAQIADAUCQxtZCQUDABJ1AAAKCRCXELib
yletfE3PB/9TfKN/QBfAOAmeC1S9Wn6o0YB0WL0i16gtkrxavhvUCkWp29BOuCoe
d8wh2ir6mg9KQ0i/QGTS028slOeO8IVX113aElUN7UsFgP6Oqx/aKtdCO+8ZppGv
6G2QbvebgzPeHKO+UJ5tboA47c2NB+E6Zx4X5dGXQoL1KXSxcUHral9yB13+YBQc
nMZWll+Lb2J4d5L2xG80/qZECxKspsSfTXtUdwYpQ0EN94DiWOt3YIVk+Fxv8328
81RJFMvuR2jY/C8+Finw1BYkVloaXqpyBF4HclJQ+q6xRckv6CaR3pRAqfbSECCS
ZmGpSHKDztTK8wWhnsi8GGb18U321arQiQEiBBABAgAMBQJDG1kJBQMAEnUAAAoJ
EJcQuJvKV618Tc8H/1N8o39AF8A4CZ4LVL1afqjRgHRYvSLXqC2SvFq+G9QKRanb
0E64Kh7/////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////
//////////////////////////////////////+JAZwEEAECAAYFAlF1oN0ACgkQ
jw7rxHtHFsmrwgv/aVGvQnxFX1BGQse85UTZig5GvslhktVGRcdBb86YKzsLxFRE
Pc8IOqItTSxBtvSTQEyQuYXMZfP1+iw1uQm+OyqP0cEipeo/fCcUXDjndMslHb2O
5jE1kqOGh3SvvQzUtS8Y6O/iKiR6urQFJYXGF4gkyvBRw9MyIf60HnSxM8QX8AMh
C3JOoDrTIhFLq8WFkrdPU37zvJet/k80+uFXL7vToO8AIvzynRKzuQLRn0DlFUDA
hWvvy+lXsquL9sGzyE9oOQDcBmkSArNpJ5zFi9g8p/45dvjHWcqNYNe35zq+7QG1
ctN7kjPvJNWFuFE0PwwQ/LCNwg2XYoOUDDnNQXhcZAa/eD5bUmJtD71AYIx0SlmM
X8xoCh83SD6qK/eML6gKSOMc2Kxoq7BEHG230/sjSqUrWHW31ikcPTxB1q8aSW1X
pSNpBcpVNYeJfCImEi/FH+pUY3ueIEt1B2NzuUTmopg7kYqQfEnOFYnNjdV1G4D3
VwwDdWhVVET7x8ltiQGcBBABAgAGBQJRdaDiAAoJEBrKdusyNTqzoLcMAJsY/oTM
zdqj6rAd0rLulQ8ZrTb5VFGS6bhFrv98h8mn/nJ7nM368A7F0GoxjAHTgvXndgxl
7+xuxCCBdcxT0/oFGwU7T1chvZ/MEa6ErXLsJb2jXpI/tXMSuwkhX4Tkza063v+D
yfjDDgIgoblUUSQzJsfrnAGniq1kXl7EdlMTjIRUHKfXLnOqdvWq2cloP0W7RzXC
YMC03w7nOUSbz4PBHHGPareNPz//wEAUeCIt4GcqPNh8n+zRrylklVebO4HMaVuf
r/6F66Q56En8DvyVw4NtGvuo5bZjhmrM6muAvVqHc8qnAb6fhM7VmT57smWRUTDF
2wJeOr6JyAz6A6rRwKI2WUrSgHjBENDJnPJmTeX3O3XTDcN4Y8JeswjsMDBkr5io
qEdwykEEudMstGVV3negPYRQtOiZVPiHSRnrrnKGLHDKtwiwwAl9NmGCFpHqwGNW
+hse1Ze2hFVqlU/EO61TQO/dqwQTmfx4QanKxAIkFxWRFpkbDGiUnzDsCYkCHAQQ
AQIABgUCTDQ2jgAKCRDn+Npl/acoMW3ZD/9YJQejYaKOHz1YAH+jV/BQY+b1X100
ERsA6RzvuAT8Bh5RB0yHlt1cVAjJQlEnEzJuTSwT2EKbDb6MBHtdLjl89PkbvdHF
wVE18h2k2bQWQUHprDQKPjhACA9+ZXdYhVrj4d/W+zsWaFSEs/s1pSf1l1lEDutG
UQD/bmBiIaM10YlKp8YhRBCGPduH5/4p5NY/oF/gfZWDx7/Fy5SYlQc6OpJIx0/7
2V0dNC/ScnaJUHXhLR1D88ste3l0o6fLycUBqfVS2eztvzslXXxNYInhUMuH0SYX
zjJCyjrNxUCrh0g+Npsa9zqmULrPFwtNy/p/7wFww5v5DPAEdzCEw2x19/zWTw3/
EYum6Mv/dL5uvVx1Sm9hIknSmvSgpH5EdBWiJHDjBTD7bkQ4JlGUlzgjqXIFTemc
8VgzL4D/yik+/rlKgh+UHL/CVXcbjr9zsGFb4auZ02koxyWJUUyl+ScDzLd3cq3v
ZDZZTMBep0p+EXJrmxDAgknUe1H+PKRHb16319TaH1+V9JThr1+BAcFqTLJVgb9t
jiDChXxWe0/pTO3LnGp0GLZqP8KPabwI3wFtYYQKBdJBmMfQe0nMOuzg8aREC7qj
uwTncXH4Eqe1I2xtZgfUDx9cWWqLnBktm9b7OVXJ8+7lI4q2PGmDjHgGUpAAjRKp
KphxXsQJwRNYHIkCHAQQAQIABgUCTDz4zAAKCRB0m//TuofodBMTD/9Eh7Sjxn9Y
Z4vwXwcIpEAdJeCrwstNXQFb2MHJere3Ee4sjGQRV+Y8Y8f6axqFVxrpksvcNMuH
ysTo42E7etUWa9I3ZBRbHdzbbKzukUT0Gn9pHSmmAKtmjfZPsIYDQtOeRfjLUgEl
QfGTnexZ66BPqPbORVOGqw7MAniMz3nTtSOkfwJ6TPqBZFx4p+U5spWgw1jdzxwy
bWjAwDC2jronE+ssH3xQc5lb06y6PKYU5bv1D1eMh54yNsC2/R0mCszAB4TuuS5E
314ZuTJwyLgdnZrYqFg5k/lhl90gbJyTa1tADg/HgtkUwiag2gQbB3BmFfxlWwLO
ZkUzEvTIVSv7YqLb0XfYJJfOJHCiE3IyeZvtkX6p9qTH9DgvEgSxLC3dpAWtQYxP
p4KhQMpLoE7EIARRH4dtAr7+y6t4fR54mPJRDmbndErO3+v5YjQvQSPxt+lwDBvm
0pERrWpv7znL4TEZ/e8WA1JDDk9ym5TE1S/QGet8J/psWOgfIXDBGZfMzIgWNzkn
7esnUqG9Y0InWTf+Xtbkg4hPZJGuirI9Ofuzs4IBxuBZVx8tng13fvkIjonNLQxU
lGvCThSAz4KngQvy2nkoeeMa0QPADyFMCSZpL6yWakvY1QcaJkodlv0eP39yca4J
RwIJTGC0aPXlmcrOczj7eNa9zwdvccMY14kCHAQQAQIABgUCTtVixgAKCRBZeIn2
zl348lzrEAChOE/xwQN/deypoRF9+hIF/PAiijRctv0SZ7sqEZnKCSApVOE0i4LJ
X9g0EOC2kxh0D1YBPBdojXMl1uFDRmHQKJX+s+eEGLVWcO1gQVQKxARLtaigdFxv
TqEl+NjDHXOdxY6nksurxvJAgMUk++U+4Taz8qRdjp8YW4nYBAfiAdjTFLl4ub5A
0l/PgK2KsYyxV4e9eVF6HsTPUyZF7sVMOxFxf3j3niRiadLAnzGRF3RkZndhOuEU
+P0qOiZQHSzE29Iu8Eze1PBYpbC6a1T1YNpPKGlPIn5ZbCi0i6o5ZAuyc85qyxBT
yuoYrvixOD5yE2y5edMo4CBd427+V7fX27UU4vH2Vv9Cp1F2YkCZagXpQPYDCE7R
Bi1wmeTx165YOtiic0ScuFaBEa9Tr4VkI5xv04KvEZVyYL//NubNU0ul7Xhrghvz
27s9aZQIFWVjlIm5iGPTFm9I5evqo0LsFvDmxIUk3qooNv5adrN17PAmFLVyQQew
sjrZSN9T6MjP0IpvoomVGtCE6IqzNLqc1pimt871BNHF2p3zHQxx2KfV0lPGz67m
lEKYafCNqJTF+hE9GNyr78++rQnJUK27Ig3RVM9IpQp8QOhRloiQsGQtD//CvSWs
h54c36K15Yl9g5fQ8HUYkbcetiub3uBr0mMdVa7wgYfF1/VZB8bPJYkCHAQQAQIA
BgUCT5TSEQAKCRCjOKb8j8gZbNT+EACmzXhlgI33H0I0PzbSviO4yM0Sa1STzTK0
M1lm51g3Uc43vstS0ruQKZjpLXf1SUhQVyV3QIalx/cQsqxBXonTLfGvEr5EOerz
xrGNRzSNRyV8KNpZ0yoYjvxHGjbYDAEM5HkdBOt0eSJM6Mn5f5W1MwB93YDCg4RE
0ElyvKEezsuhY5tl4nF9X2GeciJBRrd9tE4MdJaj/nj0xcDx4NXNEFF5XMdh10DI
S1ZDVTCFs75coEedoW4GtZAQg6WkKX4yqJ8Vk80tJd4h6IYNYXmATXcuPJ40F28p
WphBbSJmwwLSJO+N8zYTHpbrN0+PmC1WsflMmpy01hp2/+6WFpDgaWToYptZwvau
Apoh3Lo9BMb5+cZd+knogDLB9RGMy9AV9Lt987dKlXexHfwUbfRZzdXuH/vJLwbv
ziYvTXO3N1PXSNE7AQ787KVc8dIPx00RVJf52Es6QuhOFl2Eb2L7sgHDbDpyhwoq
feFKdkH6kWVg90t+uKVuGALTvI0q8xxVnljvD2L2vqZMrmdGzqiylnOPyYXWzYDr
jBJXGaI2bR9mTEE2TWb60ptlKBOpWHLJC0ta+AiHItaDJUs77LPHmozT3UxS6Xtr
Wl40owVS2BdnveYtbS6ShKWYfiwSFqvGxMO6zTiMMLSJqHlM+yVuFVUsF64sICEh
rBZr9ofWZYkCHAQQAQIABgUCURQ6HQAKCRD2xo8/nF8DuUr9D/9r0Mpt+5SV9h+t
l8sYHQQev6odjAQ2u5wG5G7p/2nXFYs3dRpO09up0foqdOPqLYPhe1PaIyp4KFu4
R13yeVbh4iq6hjrOO5ftADj3bBWQTGKlUCaeKXi1TRouoejgO55KBABcVY6PORru
Kz7LQ03ADZFwUkzrG/31yxT/LEU0uHljpmvEmp0OEIIMEjIxUiUF5hOoMhnH+hMH
ENliPGlJJ6H/bvqPvKhyFIusleRktHMEKfNvY8QO4dAcziIcOSo/Mbu9HGBoE+WD
8GDcJE3DdqYOY0uZpghr+V0yvejt0vej5KhbRLO2Cgyora9FO7KUyhcGjMvK3Ti7
3Fe43lr/B1C7ahUmdPBrXKKJMnlVWUC2+8fXvjVQm37/v3JzjAN7lky8041JVNHR
k9Ve1rgTBq4X6bYkHNzCXwb1o06Y4bQr8UiRFLrwue1yUzYp7xTQ4vpsaqkqVVTK
YpKoeURH2qbZ93GJDJV/Pkmn1+VH0TNGzLE/KRtIZy9536YvmZovxF9jVs4kVNIW
0Q17D5mqH64nlRDJgCpOPuTW2jSg0JNzidIY6zvf70BmjiaityHIAtPH8LFyQ2/g
SyzHZ4UJENEw5mMkZG3j7fXN0Pt/NhlQ/mhl7ZbCtQIBnA/3d1fVxBWHuojFqgyZ
IAgIxvlUSwtTEq+KTJlIwuj8N+QrMYkCHAQQAQIABgUCUV2QewAKCRC7m0cb+U6H
svcwD/9LEjuSGv4vfTU8pKOcIzrwKScq6xTgJ9wAyNZ+rC0PJjHHEhLw8j27qZAv
32uohHt3T0F7n/iRKHsCszTKUkYLWmUVBVaOl3y6HufZE7sMDJuidiPhSi11tOgM
t9ekySI1uNBfnLLR1rOUMbxjoG1NbdJIYjUPHCpArlKp6zd0lW+TQdgEQhsWxuM7
Pw3F79s1SVf7twjdj4NbWfnw2ByHX9HGuDytKuoEm/OgjHDapUpD4Ctc8K7l8WCa
ve4YkikxebC6K3C9NAyRmMup1wC1PRpzLD7UNkFXxo+Zt0bETuac6g8UCSR2vs7W
aw8ZiARcLaml3uJvadLP76TkvM86y7zdPWoxPySDtaXtAfEdsBwkmoSma7qK4c1R
IHUGj77TNDsJp4rJW54bFuWMcyY1KYfp5ofqmvXx7nU/7+SG1g/T/e4foBbEsTQ2
nUTMGeEQokHpsDc15a4fTNHL+Yn2ngeO8k1/AtRp6MWPQvVDGWYUO4HFYnihDmMc
6c5H/aKtGepdIqd7vct8Nfdn7ABgNyb5o7znQ02PsClf6G1pQP3erJ1ryywSwKKF
QiIwIL+n/SpAwGO8BfcOeVM3tkLTtnZdvvzaA+VS7407J7AKiyxOFyKdg2NN6woX
dY5YASI4EN9z3TvmEOLtqmCVzUCIN7fL6a50cCdicIeohqej0YkCHAQRAQIABgUC
Ujx7ZwAKCRAnffdJdtkFnwGBEACYxYy1VjQKp6cc5CQQgWju6xTacJjJYMc3nZkq
X8OSuBby+bXLAAaCp+6lhckdtmdOCsw33b7D5/S+GbXoeakxonhN0nNy+zKRz3tl
lNwtNtKgWcM0pJOSH3+X3fPcvQSXY+SMUOtCcBFgg1Xo8dWwIof+M+ZoBghiwZ6O
T2QDoTUUPL6chV1/6FqNK6SoIuIafWTqFOT3mFBhXEd3felA3njkMnsgpGS7XG4i
A+nLB9PmKdkPvz/QBH/zMitJr/JgRGHQCiynh36PkQ8bmZN2fBoviuTxJgTA4jT3
YYAaLQDJjyadl9680TYXs7QX81ZObV5pw9L15qt0locm+eYRpbjJyTreWzrHsglT
MvqOF5RgH1xDX2D3dPLFgZcrHU0uMhqzsHbI/DzTrI9rlkJ6jfbiSTEmn16GThuo
ONVUJ1M3KayFgmkPgYH6OKngwYVynhUSY5YN54MEowuITq7eXfh7Vu9ZhWDeY4yO
pTw/4qdbrZ7AlpaiN74SXvfvm42oyZG4XhLOD7Vnt8zSYvOiHzUx8ci/B88TiX9P
C35OPOi+zxh8Sl4V3o4CqwcQg9SSm040p/CcMJIkan8Ql8UUH/2TiYjXc/89Oi7M
8mH3AW3eSelP1y1zjm9RLdBMsPYUZ1LRTFSsyL8vswwei0554YMWSZCv4ANdm4V0
SYixoIkCHAQTAQIABgUCQZpZ5wAKCRCQnUi5NkQ5u21zEACvJPiTSJhdmKhYmC5O
BoZJwT3kxYhWB4Lr2wsmH9qI/DrnRaCKYVYu39mFWR7i+dQrQT4I0a2HpxRKZRrR
pVlEh0nPHUkgslUyUN4W5XiPW3IsBfBNIsWsDf0ROAHjzuBtThYHDxTyYd/EYwQs
4i2sNVkMbu9BV7s/HElQmlIFSCu51YWbOuq53/19Ma7HMJW4CiX223pWX38n5mhV
e3+mNTO+jSgASNRuDq3pXyuu9gOeUBptlCCfkM63W740kbzlwz/9dYHasV1BX/61
ZWwGGylSrWQaNwMnBCxIfERqfXrsvWd1Y8wmlmGJn8ZUhnpspYbnJkSlV8rKx7+c
JopdZkTv5bzVKGAD6/0nge3iOKzwXY7YdyoboA5HJDNk6vY+HSLYwzHeM1BA/VnJ
JoDlI3XsRDvHbTUcYwp4RGnIsZWNwyQbWEcsDqshkSUM8p8ODkOzmetEBILIDUPb
l0UaUF4gbRUc3Rh+3UiB+MdQiqaPoBx5sKVeUd4SQc958a+z7vx/HrSxP9R9Qpm9
UYZwrIa03CrZMaKEfqInOs74GiA4qkADgw9b8uGXgvpgWMTz5AGSLZqN6B290NDq
GOnhOIZl21UOHrCwEu/qdw+3NqUBfkcLrHqLU9dZ6rHxR4TwwrZ4/nkaA3hS0quO
d66/IDnomgSWtY0vU/AdmZCut4kCHAQTAQoABgUCUaVYaAAKCRAIh22TLlSrLFiw
EAC6UdDRPB/VJnX6Wkg0FB8Y077cQFwnB9gw5jBKP/1kV2nNSQFZJthuKfa8R30l
5pwUBChblOad6aW5cyV43P0n24B5FE9anRpjqX5I6eB04IW/km0Dfg5d5z0PRsSV
EExwLQyxvJJx3gQKvhjzuygWzEfsGSc11+Qie+GEdLr3oNA5EQZ87Jz2En3d8UtQ
Q4zoJfOHaRtjuWMnzp4dxRB0cK2CsZLSsA2/aCygkVkO6wxkchBQLm/m6/cVDqUu
kWpDtZKYxeKcYl+ypwwY1taSoH9XpX/w4zVlkHblesOvfrBtgj6/51YaRhyNOAAf
ijYIyG7n4uNWRrgPNfXbo02NscRg1f2ey9BffZxAzi2lrzyuU536p93wn9wLpUOJ
R06FQyG4DVUEi10iy+jsSwDweqiNJGY0euG14P3770HtdRGmxJkikJRS2evIzzve
/34q/M5cIHOHYzcVX1+207sqH6EGGjypAeHS44CMonXsyV5CK5habTkbxz+X5G03
JKmJEu0yA7udQBPLsmOcQ3yD7BCh28GU0+LNIIuqIa1+Hl/NDkLnvs+u7HsQuqyK
F3M1W4iNre0JANuEN3uU5SOXDKY+sqjrFd8C6ADgR1Mm0nB0LBbudVjrJtF7OYKo
erY/DhCI2t776MPsEY/zIPJQ7QkVXg9i+BQnduEGNB3w8IkCSAQQAQIAMgUCRVcc
NSsaaHR0cDovL3d3dy5wYWVwcy5jeC9ncGcvc2lnbmluZy1wb2xpY3kuYXNjAAoJ
ECZJ5ijF000FvsAQAI16T+yMp+Wif0qllqKzzRrmEvSJi0v4Yj/WEj7fMDj2OHlD
3FPUMm+rZ2pkC+U3ULbUx/qtsRBGHLI5ZUUuw3/wYbMF7L0wSfBcyiqoMu4PF8dS
3E0QS5Y8XpPkPB44daZksCLj8nsMO6cSnGJt70hD6tXYJ8L6Wn6pEeYQ7RvQVA3H
1W37/SwBR+fO8iYUNOhDBxWZI4PfQoDN6uHNvAGm+GOUL6xyMOs2urJQf3TNF0Ct
U486BDp79/XvUXLLqb1NUh0ynHYk4aCXytPBnYYo1QBlStl+u79r45WS1pjmO7fN
vdG8R807jGaUz4Wrv+PC8SPT/W+W3E2FprwOCiYo39FJLy+fd3wrA1hN2zjuiT6k
fS+Mqq8fiolUXC/GpOtDR9d0XC6h5ZjNb9vpYyScAmfFalrpw/y8h+d4tP9+LvmW
a0QMlH04xOq+o+L2jeEpu8aq+9TGRQx5MikojocyNj6Gn1vsBFlRxrHS9Zv4984V
KZaSQbFWYJAL9IxTYiVJxgrZ2g4JO6FINSQLTXLrtS8+m8qjIXUD0QZqUB/JYghp
DtRl4y1GkFg6COqPOEviWbCd/26EFtgKzZWt2x0ZfW/EZOTqGrB46RCol8igwEFO
BAaTaASTiNVyxWweHlAh+Uw+tHyLAZMn9sRrZ9j8jQQxT4Y2R44CRGidk74WiQIc
BBABCAAGBQJSTYTDAAoJECC3DeE/HR5PJWAP/jkgCkQspG7iIpEt525V8W5ikBP2
hlEtDpGqyAvT3HcCuxT01PwrtepaEvyOdtX5TY8h03T8vUesFSMXywNiwt5sTVVs
JJ4jqSRnPjVxdYpf+vk40qZuAs/JHykefrtHpBoIBshKniV2mmNZcbRMZaFvfIRE
7TbQjid+c2dZ/v0Nyy1fD1aRQh4+QgE83Tx3oSGduyiPe6uqenM0+w5duy/xpiKL
d+8JXZDxiRZ77Nr6CCNLlDJc9apNsrFpJCt6/5kw/Q+HIOBQOhc5XS5qkmhkkQGc
JELIr4WpJBGFafBS36/OdbOBUiCDtUL7Fmr7axxMdnKRQCUQV+YqiUaFZnq8tSxZ
0DEMYkQuDZ2Tkyd96QlmmMD9TKUJWpRl6AtiO0bXtK6p3Y1ntQSPE+t0tcOtV3zD
Bxkw8uCKU1iR47OkeIsiBGiSS2GebSS6sFPEC16N3VBgaR2Vn9nM92B1YPhGIkyV
bsJAIwV4T9eH5kerTCgkpaSvTcr2m7MdfIneKk4pLp3lH0rlhL2v2Rr0XbYVRF0Y
LKsZTCZVWl/kamAAQDcwQdW++8n49AWqsOdutpz5rJ5I0CMQAeDb+5e+ofA7Hm9Q
MmHKV2sN+S/DfYkqOvwRUVRmCCK8s20J1CoWEQZR+efi9D1M7OfjyjX9kSn/Nbd2
rttCRoVu6BFJqAfauQINBD1rpGkQCADyZeINQyOAsPXyOkPR5OOj8LaYIs+Iw3vm
KndG0lKD+JBQ+w+jzuHIC6js+tfZTLMylbDtTw815tadrUiT4yGrpJ6ieKW1FhIS
Ae/gpCtAfIp1W82N8w14dVPBDVKyAa8w5Bvdk1iEKkyLaNMt9YFVvkvB1DKgbyqL
ZpwYE6vCPgVsyPuCxqDJzg+e2cMHSiOlY59DSesAr0UcDYwVnxK0p5b/CaxXKCLA
Yk1EJIK7v5SWHOseItOwauS8+EfroNDbOfx9HK8AabdLyu2BB5gBhVIjSmbslAUl
s24mMYRGHnOryse9gCG56xsRWvL6Y7Jtfnzn8lUCXc6cZ69nXtqjAAMFB/9IUrUP
dUVEqdysECd1NBoJ1DtIcEZGRCbONC1pKcG5QGVt+iFAbXjZkHeykw2j3DR9jwRe
cHLtgIOvg7SKf8w1958ifZ2sPmq8yh3+b8qxiwBGqqyKJ65v9vb9U8pRYxqRXpjh
/SZyhxieqPeWUoLZeyWF0Q/70nxjc55zHqCZ65bLxAnMWLrTTvqhRm1aYLznrnzK
4VoPcnv2zTBrSTqjvxa2Zd5Eev02kyPN5WyuR7EqlEN81IyCMFDiisUYJQUMsuq6
g6eMwVdfFfZHa299ENt6lFh5l9uOJ0E2U5P1evVfbVtxsdYRJAuZFm87QS1gRxGG
ntG3oCE/8vveBHgtiEwEGBEKAAwFAlJFMokFCRVXthcACgkQFdaIBMps37IyOwCe
IAXR+JM4sHsiOw4tfniC2LAhmvAAoJ1w1Osdp1sKIp47wyBJOmQPuOtcmQINBFJB
jOYBEADuKnefrbTVFTZf9mITVx1lFAqwDHPRHZeWBr2Vq1B/Y1eKKsenBKbK/O/C
XaLuGFRn/6Ptvi9eLuWnho88qzaPU1Aa7BFRRiZlN+WrTmaDwdONJnJQp1LTPjqH
mLVAkD7mFZe/H8Glxot62zEqY7LrEs+ZuxQ8oI51YKjhGaACvkrFMinO09+TDey1
fupVH1+yskVKQZo1zp//Hl/IrPbZKfGCxIGePQowZF7YLvl8DKPo4jI5KO4tZ1kO
PcPL2CqwhuCDy0fpUhrQZBswp6tsGx5mRJxDxfgePRBYDK4tMK+BSVsRputIKOZ4
zoBf12hYFiJ8Yd7e9cqxTiPa7AhxPbAjppiH7qJ3NJKCXOOp9DcSvrfbymu9cbDI
PNwh/LQ1wt3T+U8QkD6a1a2kJL5+mdg03Ny+8Ej8hUyuJOEx+sxLs+JX4TS1KRre
LzxN7Ak21dNMr8361lB+Uprgi9lOBNLO31TWPABtJhIzwBOhohSqstB9w6I2ZsPp
LqUp/p9BrWlw6+UfOqNDFILZ0CqL1CyFIyrkjutXrUshqniSc/u1VbTURlIcufZh
N3FtW1P6ktUq5ss4dqEh/QZfR1WxBYRMbKXXAN61XO8M2t44I+44DHi7jOs1q6jr
bfAli1ZGYam/5wjOJkvQ3xemP6SaDKnCKOnPHC45EAt2SEVGywARAQABtDdGcmVl
QlNEIFNlY3VyaXR5IE9mZmljZXIgPHNlY3VyaXR5LW9mZmljZXJARnJlZUJTRC5v
cmc+iQI9BBMBCgAnBQJSQYzmAhsDBQkIB+1BBQsJCAcDBRUKCQgLBRYCAwEAAh4B
AheAAAoJEO1n7NZdz2rnKEkQAJWJ2ctNY7vg2pqrabavfRZ4UOWrLi4AgOMnKrsm
4ozZ1mc7NVMRj0Ve8jLLHrySW5QaSmp8TcaI6twxKD8FfTOFYjBU35DUliyRlcbZ
msBk7aG561TPwaK0XnF47RyPZWKbHrO7WgiDveGx52AmBdm2VRyMBwnue3b5RlKn
NVMMSm4RLmrolkL0SAZNAWZGG4FqFtaxPRZo7LR9fEv/NydQN91b2cR8SnLc2F2y
iVc5mq/1f/t8dMBEbNx2+NoFaqP1O+1JeGYgmA/vE9fk1oDnn1pHej8OhoJJ9SsQ
EuaITvzKP9bU+5/o/UqYzAX+y8QbTthjhzpkRwjqwjuMVmp6/f/o8ivlnzD5K1lQ
OP/OJAki63h5LDUC/JHYkT/XN/bbgoSNveFSGV7cdocdSpCoBaZUJ9pfzZpqRxyp
RB57f7bKBCI36E42KJKJ3wo873MJeElAeo31tXi2pBvTN/Idmrl6sDCNPWwgsIOm
u4Xd2FG5lanbTsXHKebCDPh/KK51mWra5judWWFVxChsNSwRHJACBXVa2fPsahfz
4GAEVp0/VbC114m8CHrgm3nh/ZAyNjgJQN5jJ37gQjx2LFsAhW5WKK8U0Es5YXff
jLEiNOnmJ+q8IZj6Mj5lWXkbCvrqjfNTOKnzzZGws+6y4gRQkgkSY3BPp+mpCQPj
ORc/iEYEEBEKAAYFAlJBjuoACgkQFdaIBMps37Jv6QCeJjxijseWZzn/z7Cv3zSw
SFMAWPwAnig7ZgzoqKqwpvnwAXsQpGSnE8K5iQIcBBABCgAGBQJSQZHeAAoJEJLI
Q0VtpqZu8r8P/jHm+xi5yMz3DVj6emMazJdXLtnnGrKTNw5xL1X10a1Rvmo+sj4J
1gmL+Cy2hM6fl6r054E/BYt9GVGaIC4eYiF6DUzlcPWkwniDKfi1lNJzNIja4qha
nuGrK7EJtZXACRhUuNr2EzEm4dd3nXNaBQZv9FlIn79tk4vVho7wK7uiIT7nseUM
WDh7T0h4IVSs2LWdvP71WDx8acoyfspI35C2pKXB5GRWxnzN+wOl+V0kDn2fGd+n
L7ZEb/c/01h6AfyYJGetCXY1omkXSzgD9KKu/RqZuxL8TMMjNN6z4SAyMTthOHW0
lTK/5h55dJYSquBQwuEAX0Z8RT8S4Nva5LKGr25IpIJuP/TxaHIgdncrin4D0Ftu
G0JMOxjuzNdo2lOiMZ/lqZ75l61C68GuKAhU2Rn1toqc/NReL1yLhHoM1o3EvovA
fZmzX3sOugU2N8L+oiTnFFXezpY5Huup5KUkrX+C5EErBIVfvKjNyhhKFru6Jwy9
z3qiGhxNUFAAzftVYhNT1lDkMNqa4jPjOrcWS6+gwVfQAo9k0p5uwPNbIw59RA2q
/wwhZuRoai4nqN9WkgnwmWn0sS9XO87jwN3uvK0IF97MGPSXNcmAGXlxzF3GBFHY
f/bpagrvT4v+DE+gLpgfplo86oZbjDPsXGhVNu1iffC64R+vecw7r3DiiQIcBBAB
AgAGBQJSRaaeAAoJECZJ5ijF000F4jIP+weCFBeCkY7sprDa61kp10GNF4YujiZ1
QKQDgrQA9ipgv3pN+5ovC/ClzZm5baVGi+j5zWD/blG9YZAApM/kkpAIvCPYIuQ9
b+/crOUjuxyywuE2HSbaFuh66lW7Eox3NT8NNMEl6Zry6m8RDHqTZIpwJPBiCgEc
Nqr/dcbtE0XgzJj94NOWSuq1URpP4wIT9aAVBqdj+0KQDkDk6Sqvmf59Cjt8hihv
XAhOqcguKo8y262ABEO8kxwfqvRYECCE+eDEAPUEyOi/6uI0dQjQMytTWKogPIYg
4wQjpG+Pa7wl7AnxOTBp4WvoS0BuCgjSYaxnwVKHBMvxSCuDHBurLN0wqOaKSg9i
b6m/Vy2vfi9ak8crXJFZ6eLrIxt73gyiozfKEfvd6LBOJ9AeXstnubEs7ltNq9qK
yW4+vR9eABmn/wABxCsHNjW+mmi8xAVhhc1KqZC/D4vm6r8ZwrVAsmTADqcTr6A4
8J15FmIwcaQRQWQ4oytxTGA7rHRFVjrt3YIj/WP62byp8s59HOKJE+mA9q7ksAvn
ToLfrMiNA8/18Zm4CADKUny6GLzpuKgcYwTucqE/zBWUszI2NrJNtaKWafdXyEAw
gBxNIl1FiYF9+ntoMWlqDQROPZLYChRThJvRnNNsT+WwcuSHSFexLl14yrPJ3MBE
e7e+2Vpj9HR2iQIcBBABAgAGBQJSSFmrAAoJEDpFFvNRg85IHx8P/3exX3fATzNw
qfININlvYjxMzuGIHdV03w2pHrOllmPX28/UUHSQL9yRRNhzimm/9v3dvu5XHzjU
zCEozoAa74DnICe8wUfju8sGmN5FKolbvSz7VvcW4mAC5RY85zk+7luTg2wHZIId
girTDrgPSirtYkm+qpuX/k5LAkwmYtH6gghqv7rnYNKUChh+Ga+4yNbsdD7blWYr
52UwnfT3evbgI5GqBMZEbghmqNiR2fcII6trNnuawH646UcucwogxPtLxLuZnslE
pWiHQlAVvHlrCMoEkYqS+NRXOwZF04zTwRpLCUlj0PxlRInvTrEpBd1KVejbkNWK
K7wfyL/bF3rR9pMGWuDC32/9BfjtGgNDXJhQMDGntyAeQfiI3Ml5b5SA8bT5DsR/
FIQDg0UDe5jjeVIEGZKunmRT/IqOLFMpZoMHqNqWW8YrHlpN2o2c0/VqWSLzPKmo
cgqLwlkx5oqvn/F12xUzazGhFTFp6IXpqQVTlkSPdDsVJuidj9ZJLMRoKfFD9tIS
qTocGw3suLqp8u5KZf43THWspBi4tD4IoN5rlrLWtPnkteffyO62NZOOyg7rPUGJ
YlpgAMIDkXmsp58CyXqrL1/art0Ymcy5z8ea1eUCnq/ZJJxrj+HrXuwko4fXTewf
+nzSbJ2GEL/fMBkzAOKl9j5bOPAKwiD9iEYEEBECAAYFAlJKlYkACgkQ20zMSyow
1ymmfwCeLqsUDHBH8JnuaJjEUYqACGWZo88An0wcNy95yGdSJtgBFXNPZQJL2gSu
iF4EEBEIAAYFAlJNSA0ACgkQUYUJaGx+XoKvBAD/bUBqzL0oZtaF7WUDXchb4yki
f0ko+zh832R2Ad0KfygBAKNEUUKOnZFLJ8GZqAXmIWktgMiWFOMSxAXDLsyionoh
iQEcBBABCAAGBQJSRqY/AAoJEFF75hSlwe7HvwsIAJUnlLFMOBLvlBrRuxVeAO6X
8DhytdD5YlRzt866cXq6A/dw57O9qwyyDy3upJIGRy6hYlL18ngGZXv5djcw7Rch
QmvBJ9ROkmkCHLe3+fYn668nkxtgQJHWADd90MGFHkLDWa4Pbu5yJKqkTy3tqx2N
mBDEz317F6mMtyTP56QI8PVnh1p6w0McQIVctS3LOC3u4Wjbw7l3Hwof9Pl3u4BZ
L/gJz5KAozUa5TqNV4SLwtUqXBg7kipwfshXVuQekG9XfMC84GaFMqEKTExscHoF
VdSzrBKHn6VlEl1sdhcdS9aKSOsqMXB25xhBe0hOl4Ddw63j7b47XCqcyqAE5eiJ
AhwEEAEIAAYFAlJHAsIACgkQ8cUWs8g1l1OXkhAAvXUR237vXF/sZCZgG0748Dp0
eOhish/c4ODgW3JRehVWAyAlTAit/+xK6oI5xkQA+z3KO6+/bAtnDQgikAkykgpt
VeVW/6v4GGBarUTc/CTcofEpC3rsrEm1ZwPLyva3YuFFnYHATq/2Qi1a5PnSfj5C
O3fZrOgJTXsm6eNt21bH7RYF4DYi4kDNQHxtBOaEcUhcIkS1MsMz5F+/YeqOd12/
FrcIPDq8c0G3Ol+QsHFx+Y6b5Fp/HgkQem9Pzu7XkNcf7nj5UFJw+qx+BivaVYhJ
8Ugq3pXYkNkhYSy/AP/YYp7moOgpo2tY5e+fqho4pVlrHoPqWTNKJJrfYg2Mg/vP
e0nPxiCU3anmFXhfeZy87QLrA2BrO0I45StbU3uBhzT1dfNW2BIgxg+LqUZyTrZ2
qHq8TOPsnplu5Xn/UjEDQ5soTq1zDpslEjCX36R8wL3eai74HUTjstF4xq+kiXmK
bX7HhGKD9TILRjU+toOPXY0ffbS7FOUijLqOJqWEW1nBpoYoHbGfMHn2g2rNFGzz
wiLZgbL2HZsC+kDoog33s60b//A9E3yFIIiPtk668kQmiobs9Iel3RC+eOdHP8lD
gcMN/Rc/5B1S9a+wYC8VTf6KInUTq5YwC0veKbg1s+Ow7tB9ejqgxtHT7iFjR5NB
oOpVkI4UtHDpewRAW9SJAhwEEAEIAAYFAlJIEEoACgkQi+h5sChzHhzyGQ//e6o3
y+pnFTS4UWjUxFTKCtqJeqtS84jvcbXhXFGKfnXX15atLYkVoD2LcO5yvrFRNvY6
PjRkxJmLo2Lb/MpoDupRMfR1PxotFYuNYodmoHxVUun+1eIFQ5XUSiQSsIsjcUYd
EcOoZFzMfWIHZUOA1cGAtb8WL/Ql6cLcZT3fhPjEO253O8XcxKmU7sJ1sCCh3tyL
CY0dvLffA0jgxEXUYmf3DpC6p+MNkPU3EDk60OUzy4/C2HT26Lt4NR6TNcEZg6O/
lPvmD1/ATO9fAHCb4uEIkqR3VLdeg31EHND32gO/2HXc4Xp2dbV8qs+ts13w5L26
D+94PSsTwYF+85mfgu8nBhPOOn7lqWxIO/1MnOrEIVNu+K/fwh4lu8v/6PJYEYIn
LtYkDH3/LcKTsK6N/2KLbtROlHXeNKXyt0UliINteDlV9xYkn6TtzUcTrZ4Xa3HM
yN5mi+a0vptJFBPxyonMMHDAXRkLR8BexxUJqdk2aupIs0Y0Cet6Vk+8Q9bn04gl
pKjTjnnarJJsTlhrdmVobkDhbEGYB3KyrjZp2JmdYYzAbHXbdp3T7yJ4R3/7aQRg
XJIQgEHjmgFf0Wwzxs1JIN2URDZS8k2pyuI6M8ndPtJiYbwqy1Wcflz57aWYAOVf
b/G4IEsicSd1mHjYjsaMV/kp1kGrWihB/Dt79nWJAhwEEwECAAYFAlJJfnUACgkQ
cTWO1j93QHkxbA//SKb0a0wo5dTJpMp7pUL4pkCx1gR3YCZMyiJHAGnC0vHoTmxI
+6+YAU9DBFWjQk2uqqn+GW+3AxLEN08s2xYvNoxJHUB1bF43HI9lXscGmzfjDR62
cIptcWtggeMw6W66UStdFWUudwDM6WV8BTxg2LYD3upeY69GnN92HinMj90D6PMc
iQjfUdZxZAYLKEhic12dKHpWRC0PH9NIAS0EchARkZQmjyPc4trWevAyhmpqdw+H
gxh9EBH2I194SvIXVuU5Gyl/l3a/6ntEUZnitBijU3uUjRnkS5XkJfqy1MjdrJ0o
ymo8mlxOVFKV879ez10KBnE1BLe9ioylOeGQRNcyYehFE7GmzkZHbOk+Pqd1Meaf
AjNIgQxrqgh8pJ2F8Zd8pGDrYspjICGbbdR0WRNcoN4kckJruTWFQ1xr//Kfwp1b
kCQWRwYcRL/RNVVZuHGgvTiTa2wZNbWfZk3tF9cXaYHIqhYU8l7Lc1zK0Fhv2E1t
Phw4pu495RbGRAFOE14S+QmknIy+DgIkTzQ1s36vnI4SVw9zs0D4Np6d1mF1p4gi
VVrgTQnlF3poZNppCUK9Rih8s5kMnyuRruGm/Lod4jL3wcbBz4sxBkCgrc2pyU1M
SNAjM2V8c7cGLgPOqX0eVqgXJoTnlNItF07aIZyFEA6e7YeiTeXxPfU10Q2JAhwE
EAEIAAYFAlJNhQYACgkQILcN4T8dHk8Ifg/+JzwtYSnxoksuU5H4NIH0fchwRLfq
6VAscqaZYxz/KxH9suEaEGoXxMzeHO91OqPqnvMxkpOGEopUssHGOVXYwtw5XCEL
NCjD8PwSlSpDDe5+lYNjMIjtIXieiGt6ZeOO/0VlVXzRCHEtKoN96ikgEaxkPq/m
ZmfQK1PSEFcPWujBxlWjZl2DHv8eAvgFEfX1kyIoxV2nfrllDMaVFU1NvDB+zXdR
Mg1xyEDiCBsldfmHmhSjylunfJeyjpwye65rAVEO7XkmNBy2SloPIHRCiFLPeLku
oD3XaRFHWsRCOBcfwZy519DrvUUpn5InuXB36zu91Qwh8Bd+UJQIowsBoU9AH8n9
lPsUTCU7dl4UqtZxiaTHQB/3+J4o7+m12I5/Y5ftW8ToCRF5EGKoB4r0zhp2BLWG
e+z5B08HjR1NcQVG6Tv6FwSqpqf5m4yFaiEmUCFMfFMXxXGXSjI3JeJeImKYkxOw
aa8XbH65D9Lj7syDz4DSgZiPC+cUL7SNY73YjH0zfL66nGRzwo4zX9T2ermnvCN7
kw11wIfJVOlLG+D9sNpBiikpMPppW73i7g6VuFReSLgmdNCXCoVWQYeelb4E9ulD
KqFj63VChpRaBEv6fz5YFUKqUVAXy8iiptgY/hbF5V/KVlN9JVYOglQ8oq9sSzKG
lUWPldPvS8nzroSJAhwEEAECAAYFAlJNN0YACgkQTaEU5cSi5X+5JA/+L/Ilu9WT
FeVZmGTYkWEOllp7B0tNQKSCwN5L0zt917Vj81udXBKb9O3PKwjpc9rmUh5dRNOV
vAaIj9moU8NoOm1SYvnVvdyAxF5bajnN8u2cNlkdg+fzCiwwUyGPbCQ5elC/sM4k
FB/kw2c8e5uUHBjTmjh18MEqLQYpVaXxmQcica9EQnDvAXq6Ri2dZA4hpb/+qZXC
iS/fojYQmiigV2XugWFr4+rWfcOFACCKWfr8zP/3p+fs29i91tCUwaW49EA1W4qN
8/3NCugXwGaFZBsQdkZotP4WwPToD8KNaUqRvdiz83TAOL2RDZ7P8NmGNeAExeEm
t0+Z5MQeudfvTUCb7YMJKnPttuQ5rIgsLmDHwNariGMa7km0ZykkTgCw3r11efiv
/DwhR5ygZkb8KNVDIBxHGwhz2c4mbNsmRAas/wDboijT/GvA6NTaAaRhH4RpHej1
Bry1j+5mlhve3fKH5vQ+qfyks4yemjXq4meLf+0hj+SKoGcYXnfJUuOV6TB85FcF
EVncY2uh7bU5et9sdDv0HK0yNMGxBqF9ox0VkXVAg28Q10n49CGHHtHaDzTLGPru
hrQX9bTN2pgNticzZu0zDz2a/+rV/TGZ21pMlfPpmks9jcy0NYIn8twoMpRCqfJL
teKUP3kd0WdyT0Y8pB4X+aCzliVB5BmDxxKISgQQEQoACgUCUk3NEAMFAXgACgkQ
OfuToMruuMAgxQCfScnmgUcnT0J07KNsLKLMGW/6ffAAn2J50o8KV/wu8auCY1o6
EkjpiJt/uQINBFJBjOYBEAC2oNVWMm9p1UwMmKl7srU84rhC1wWzCIpgDBzQk6Q5
4zS0OKuis/zr2B0e2S4qvd8S5bSu0h3k54CNIIj00iKFfSvQDaInU+t2GGV6hXsI
XS7QPFNUCj9n0dKa5BahPPfOvTVdfJvulLMlvygYwsYW5DhfXI1FnD/R1oY3eNib
FFYsmP7++VRrO/O3wvbgl0kng8RndM1M46imFkOOfPEYxHbp30VvcxX2QJwEiki/
d7UjwgonKKCaU5SoZEKa6/oIwAMzQ1YQZEGQBSD5iM/sLblBHsO0UtLKiuknZBdR
rHYHCDwXZvX7nil9dtA7bydhGzPLT/JKKtiNqGtP4uIo6Ao3kctOfq8hv8pmCZo9
HgXVxUlg+OXEOJu7bqREiUcEhm5gn12JlKmb+6anhlfLlHzjU2OgZkGkgWx+biiv
Tacu7ESh/qSHLYrWX1Y7xT0CMbTlrM1CEMaKO/gYHgpd+cvENbnWrw9laY/HAESL
uZBuH93YPKrNUuchCJRYyTg44IHdUQdbNLSww5/00EdY4LyOGUdqT3PMHeo2wnrH
UNcgcLd/gPyjAUCrLrPYFWQpDKzubFfNyJO/JgiqtvnKdG2wsvYYx2fU14wXOIHn
XIxqT0EMwYbKZc5tjcaaDbaAXCdv5kHH6s0Aa3hHeeCT78LSN5cfIZA2ezrDCgLK
4wARAQABiQIlBBgBCgAPBQJSQYzmAhsMBQkIB+1BAAoJEO1n7NZdz2rn4csP/3gl
2XgdJvZsDo3WT5KdqO/LsLbEJLoak4wiQNoij4CjB7zmLFwl6qI0ziUGvw4YyoB7
bPRwyzgG88e502Y3/hx4GzHBSeZwKvWEmIRpCvh4BH+UML+nPqC+QKd0MpJ46+Dk
WKJcip/qxNeky7h65ptA7jjzmhtIFoXv/fM5R87dG1p3DSHMRy/9dqIJOgDx/AYU
2MaECaX87u5o+YAjet6XgcwQc3EiCoBEyJg2YU/ydWAmLs6rPqu/rn8T2yG01VCI
cGARcZl/+WyvEGxAmyAbZWP6CCQNk9fkB9PsoJXhSse0z51ffIpvCJbCiw/AqaDN
jFHmpfolnICv7vZmzn95vno0YQZQlgouZYl3znMJAdNmKsWwMi5mzzuhh2sNiYWv
ChaajFmpIt4EI1tRG78Fs7ieclbOvd/CWpY7os87usJp9Qrr+Z1g8m3gKmYN7ega
e10/9RUDXRlDupZgdPM0raF4Gbg0djRAwFdigATlscwIOc1hU3hBFXFTKOxcp+CM
7KLSNkdf738IeKEhdoKo4jgx0vBHHt1TCGgo63nX39aWHvXDSq+D2RW3rcDsS3Kv
vGP8g+kQZREN8P8SFdefSh99Yvz4EpwtinVNun2Al7cBv8XdU5a5p8yWk434iLhg
R6bnoCX8SLywMD4E3tynDujld/4cAbvQJ1xEOftW
=Ba2T
-----END PGP PUBLIC KEY BLOCK-----
</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pgpkey-secteam-secretary"></a>D.1.2. セキュリティチーム書記 <code class="email">&lt;<a xmlns="" class="email" href="mailto:secteam-secretary@FreeBSD.org">secteam-secretary@FreeBSD.org</a>&gt;</code></h3></div></div></div><pre class="programlisting">
pub   4096R/3CB2EAFCC3D6C666 2013-09-24 [expires: 2018-01-01]
      Key fingerprint = FA97 AA04 4DF9 0969 D5EF  4ADA 3CB2 EAFC C3D6 C666
uid                          FreeBSD Security Team Secretary &lt;secteam-secretary@FreeBSD.org&gt;
sub   4096R/509B26612335EB65 2013-09-24 [expires: 2018-01-01]
</pre><pre class="programlisting">
-----BEGIN PGP PUBLIC KEY BLOCK-----

mQINBFJBjIIBEADadvvpXSkdnBOGV2xcsFwBBcSwAdryWuLk6v2VxjwsPcY6Lwqz
NAZr2Ox1BaSgX7106Psa6v9si8nxoOtMc5BCM/ps/fmedFU48YtqOTGF+utxvACg
Ou6SKintEMUa1eoPcww1jzDZ3mxx49bQaNAJLjVxeiAZoYHe9loTe1fxsprCONnx
Era1hrI+YA2KjMWDORcwa0sSXRCI3V+b4PUnbMUOQa3fFVUriM4QjjUBU6hW0Ub0
GDPcZq45nd7PoPPtb3/EauaYfk/zdx8Xt0OmuKTi9/vMkvB09AEUyShbyzoebaKH
dKtXlzyAPCZoH9dihFM67rhUg4umckFLc8vc5P2tNblwYrnhgL8ymUaOIjZB/fOi
Z2OZLVCiDeHNjjK3VZ6jLAiPyiYTG1Hrk9E8NaZDeUgIb9X/K06JXVBQIKNSGfX5
LLp/j2wr+Kbg3QtEBkcStlUGBOzfcbhKpE2nySnuIyspfDb/6JbhD/qYqMJerX0T
d5ekkJ1tXtM6aX2iTXgZ8cqv+5gyouEF5akrkLi1ySgZetQfjm+zhy/1x/NjGd0u
35QbUye7sTbfSimwzCXKIIpy06zIO4iNA0P/vgG4v7ydjMvXsW8FRULSecDT19Gq
xOZGfSPVrSRSAhgNxHzwUivxJbr05NNdwhJSbx9m57naXouLfvVPAMeJYwARAQAB
tD9GcmVlQlNEIFNlY3VyaXR5IFRlYW0gU2VjcmV0YXJ5IDxzZWN0ZWFtLXNlY3Jl
dGFyeUBGcmVlQlNELm9yZz6JAj0EEwEKACcFAlJBjIICGwMFCQgH7b8FCwkIBwMF
FQoJCAsFFgIDAQACHgECF4AACgkQPLLq/MPWxmYt8Q/+IfFhPIbqglh4rwFzgR58
8YonMZcq+5Op3qiUBh6tE6yRz6VEqBqTahyCQGIk4xGzrHSIOIj2e6gEk5a4zYtf
0jNJprk3pxu2Og05USJmd8lPSbyBF20FVm5W0dhWMKHagL5dGS8zInlwRYxr6mMi
UuJjj+2Hm3PoUNGAwL1SH2BVOeAeudtzu80vAlbRlujYVmjIDn/dWVjqnWgEBNHT
SD+WpA3yW4mBJyxWil0sAJQbTlt5EM/XPORVZ2tvETxJIrXea/Sda9mFwvJ02pJn
gHi6TGyOYydmbu0ob9Ma9AvUrRlxv8V9eN7eZUtvNa6n+IT8WEJj2+snJlO4SpHL
D3Z+l7zwfYeM8FOdzGZdVFgxeyBU7t3AnPjYfHmoneqgLcCO0nJDKq/98ohz5T9i
FbNR/vtLaEiYFBeX3C9Ee96pP6BU26BXhw+dRSnFeyIhD+4g+/AZ0XJ1CPF19D+5
z0ojanJkh7lZn4JL+V6+mF1eOExiGrydIiiSXDA/p5FhavMMu8Om4S0sn5iaQ2aX
wRUv2SUKhbHDqhIILLeQKlB3X26obx1Vg0nRhy47qNQn/xc9oSWLAQSVOgsShQeC
6DSzrKIBdKB3V8uWOmuM7lWAoCP53bDRW+XIOu9wfpSaXN2VTyqzU7zpTq5BHX1a
+XRw8KNHZGnCSAOCofZWnKyJAhwEEAEKAAYFAlJBjYgACgkQ7Wfs1l3PaudFcQ//
UiM7EXsIHLwHxez32TzA/0uNMPWFHQN4Ezzg4PKB6Cc4amva5qbgbhoeCPuP+XPI
2ELfRviAHbmyZ/zIgqplDC4nmyisMoKlpK0Yo1w4qbix9EVVZr2ztL8F43qN3Xe/
NUSMTBgt/Jio7l5lYyhuVS3JQCfDlYGbq6NPk0xfYoYOMOZASoPhEquCxM5D4D0Z
3J3CBeAjyVzdF37HUw9rVQe2IRlxGn1YAyMb5EpR2Ij612GFad8c/5ikzDh5q6JD
tB9ApdvLkr0czTBucDljChSpFJ7ENPjAgZuH9N5Dmx2rRUj2mdBmi7HKqxAN9Kdm
+pg/6vZ3vM18rBlXmw1poQdc3srAL+6MHmIfHHrq49oksLyHwyeL8T6BO4d4nTZU
xObP7PLAeWrdrd1Sb3EWlZJ9HB/m2UL9w9Om1c6cb6X2DoCzQAStVypAE6SQCMBK
pxkWRj90L41BS62snja+BlZTELuuLTHULRkWqS3fFkUxlDSMUn96QksWlwZLcxCv
hKxJXOX+pHAiUuMIImaPQ0TBDBWWf5d8zOQlNPsyhSGFR5Skwzlg+m9ErQ+jy7Uz
UmNCNztlYgRKeckXuvr73seoKoNXHrn7vWQ6qB1IRURj2bfphsqlmYuITmcBhfFS
Dw0fdYXSDXrmG9wad98g49g4HwCJhPAl0j55f93gHLGIRgQQEQoABgUCUkGO5gAK
CRAV1ogEymzfsol4AKCI7rOnptuoXgwYx2Z9HkUKuugSRwCgkyW9pxa5EovDijEF
j1jG/cdxTOaJAhwEEAEKAAYFAlJBkdUACgkQkshDRW2mpm6aLxAAzpWNHMZVFt7e
wQnCJnf/FMLTjduGTEhVFnVCkEtI+YKarveE6pclqKJfSRFDxruZ6PHGG2CDfMig
J6mdDdmXCkN//TbIlRGowVgsxpIRg4jQVh4S3D0Nz50h+Zb7CHbjp6WAPVoWZz7b
Myp+pN7qx/miJJwEiw22Eet4Hjj1QymKwjWyY146V928BV/wDBS/xiwfg3xIVPZr
RqtiOGN/AGpMGeGQKKplkeITY7AXiAd+mL4H/eNf8b+o0Ce2Z9oSxSsGPF3DzMTL
kIX7sWD3rjy3Xe2BM20stIDrJS2a1fbnIwFvqszS3Z3sF5bLc6W0iyPJdtbQ0pt6
nekRl9nboAdUs0R+n/6QNYBkj4AcSh3jpZKe82NwnD/6WyzHWtC0SDRTVkcQWXPW
EaWLmv8VqfzdBiw6aLcxlmXQSAr0cUA6zo6/bMQZosKwiCfGl3tR4Pbwgvbyjoii
pF+ZXfz7rWWUqZ2C79hy3YTytwIlVMOnp3MyOV+9ubOsFhLuRDxAksIMaRTsO7ii
5J4z1d+jzWMW4g1B50CoQ8W+FyAfVp/8qGwzvGN7wxN8P1iR+DZjtpCt7J+Xb9Pt
L+lRKSO/aOgOfDksyt2fEKY4yEWdzq9A3VkRo1HCdUQY6SJ/qt7IyQHumxvL90F6
vbB3edrR/fVGeJsz4vE10hzy7kI1QT65Ag0EUkGMggEQAMTsvyKEdUsgEehymKz9
MRn9wiwfHEX5CLmpJAvnX9MITgcsTX8MKiPyrTBnyY/QzA0rh+yyhzkY/y55yxMP
INdpL5xgJCS1SHyJK85HOdN77uKDCkwHfphlWYGlBPuaXyxkiWYXJTVUggSjuO4b
jeKwDqFl/4Xc0XeZNgWVjqHtKF91wwgdXXgAzUL1/nwN3IglxiIR31y10GQdOQEG
4T3ufx6gv73+qbFc0RzgZUQiJykQ3tZK1+Gw6aDirgjQYOc90o2Je0RJHjdObyZQ
aQc4PTZ2DC7CElFEt2EHJCXLyP/taeLq+IdpKe6sLPckwakqtbqwunWVoPTbgkxo
Q1eCMzgrkRu23B2TJaY9zbZAFP3cpL65vQAVJVQISqJvDL8K5hvAWJ3vi92qfBcz
jqydAcbhjkzJUI9t44v63cIXTI0+QyqTQhqkvEJhHZkbb8MYoimebDVxFVtQ3I1p
EynOYPfn4IMvaItLFbkgZpR/zjHYau5snErR9NC4AOIfNFpxM+fFFJQ7W88JP3cG
JLl9dcRGERq28PDU/CTDH9rlk1kZ0xzpRDkJijKDnFIxT2ajijVOZx7l2jPL1njx
s4xa1jK0/39kh6XnrCgK49WQsJM5IflVR2JAi8BLi2q/e0NQG2pgn0QL695Sqbbp
NbrrJGRcRJD9sUkQTpMsLlQTABEBAAGJAiUEGAEKAA8FAlJBjIICGwwFCQgH7b8A
CgkQPLLq/MPWxmZAew//et/LToMVR3q6/qP/pf9ob/QwQ3MgejkC0DY3Md7JBRl/
6GWfySYnO0Vm5IoJofcv1hbhc/y3OeZTvK4s+BOQsNokYe34mCxZG4dypNaepkQi
x0mLujeU/n4Y0p0LTLjhGLVdKina2dM9HmllgYr4KumT58g6eGjxs2oZD6z5ty0L
viU5tx3lz3o0c3I9soH2RN2zNHVjXNW0EvWJwFLxFeLJbk/Y3UY1/kXCtcyMzLua
S5L5012eUOEvaZr5iYDKjy+wOxY4SUCNYf0GPmSej8CBbwHOF2XCwXytSzm6hNb3
5TRgCGbOSFTIy9MxfV5lpddQcdzijmuFSl8LySkL2yuJxjlI7uKNDN+NlfODIPMg
rdH0hBSyKci6Uz7Nz/Up3qdE+aISq68k+Hk1fiKJG1UcBRJidheds29FCzj3hoyZ
VDmf6OL60hL0YI1/4GjIkJyetlPzjMp8J7K3GweOUkfHcFihYZlbiMe7z+oIWEc7
0fNScrAGF/+JN3L6mjXKB6Pv+ER5ztzpfuhBJ/j7AV5BaNMmDXAVO4aTphWl7Dje
iecENuGTpkK8Ugv5cMJc4QJaWDkj/9sACc0EFgigPo68KjegvKg5R8jUPwb8E7T6
lIjBtlclVhaUrE2uLx/yTz2Apbm+GAmD8M0dQ7IYsOFlZNBW9zjgLLCtWDW+p1A=
=5gJ7
-----END PGP PUBLIC KEY BLOCK-----
</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pgpkey-core-secretary"></a>D.1.3. コアチーム書記 <code class="email">&lt;<a xmlns="" class="email" href="mailto:core-secretary@FreeBSD.org">core-secretary@FreeBSD.org</a>&gt;</code></h3></div></div></div><pre class="programlisting">
pub   rsa4096/36A7C05FE1ECF9BB 2014-07-09 [expires: 2016-07-08]
      Key fingerprint = C07B F5E3 10AE 64BF 6120  B0F6 36A7 C05F E1EC F9BB
uid                          Core Secretary &lt;core-secretary@freebsd.org&gt;
uid                          FreeBSD Core Team Secretary &lt;core-secretary@freebsd.org&gt;
sub   rsa4096/7B5150C8D7CE5D02 2014-07-09 [expires: 2016-07-08]

</pre><pre class="programlisting">
-----BEGIN PGP PUBLIC KEY BLOCK-----

mQINBFO9HvEBEADRfuWeoNUwib7ZjNmhg0Kt1kjiGEEosf3O2yMDfYuAXt4De6qK
S4KECe5+vZH2T8g+zmNLl/7JxdqHiWj9cnoZ6T3bqKh7w7pW7QzC/Q2k4mZsQkGl
xzhStHvaHSPKw5808TME0d3ewAfs0dQkDuA0eari0HipCbOVzqHUMTIROr/syPXs
jHxb2bj0KVzzq7wgy+vF4Cv25VzaAPBVgPv3HAoO/gLOr4SnXqBCw2vgprWx335t
QX1JslWlsUDmwwq40q4+eMnSFPZ0ing1DgfhMb+Dnrl6Rbxhb0pwPhbwubppUKfe
W6owOrTuUbATVoAhsfNySmUWQKc2p9w/8uFV/jJj9HOSgIMKrNONvqekPrjWOQn9
/lcQtGhldWmtPbMogOfaQisBEn1XjMZ3VEOagQxIe/6LDjU7GGoYvSdwf8Z0wXUY
/qDntPwudjJA4wQid1Tzf53gpUjr0tYq7aclpiBGs3F5EOs4HMXq5/xlwRGtBDHY
i9RNAlbRSfSD2s1nGsfsImPowlpjtLa+3PqYs/cRLGDu51DsgV/p/CqtAyebG+9O
WsF0Ydt4Q62jEuU8HY7SOj+AuKJVdUkyAZGk5vkPvsKzjdZUqRslurme7d3LqKai
FjBGj8UyId/IomDCjth3baGc/Y4e+JKyx1XDXgFY2HoQ2KzEoANrizjy5QARAQAB
tDhGcmVlQlNEIENvcmUgVGVhbSBTZWNyZXRhcnkgPGNvcmUtc2VjcmV0YXJ5QGZy
ZWVic2Qub3JnPokCPQQTAQoAJwUCU70sxwIbAwUJAeEzgAULCQgHAwUVCgkICwUW
AwIBAAIeAQIXgAAKCRA2p8Bf4ez5u2R4D/4o7Qb/hFz3XFRiBLtcsr+v5CS1fYgk
VN2Xp40dOTtt+Xo257+1oQDsS6McNXT7XSAFOTrFW+XID8GBnY6+ZpRYzontMCJd
25qGHzGBs2aFA/ROfhdvpOkhngxsYG89+IOUjS6SRNqG85Iro6eI7ZLi8sznEhZd
lH1jEWHiJhEubOvcedWS1zSHpOZwNIpyQV5d2O3/EhAOJRWgy8VmegeQLGg0zqdL
r9MKfg8/OwNQlysjrsA5MRnZMZAm6kEO381zYg8+Rwe+HtspzL/1cu4M7k5aBw0m
a8nShgXTqfgX+pwW2zBBL8c42p5D3Jh4Oe7KQ1KEvysZJGWO5ZjR9p4KLu49X2Yl
9cuD3Ii6+Nz9/cUlEGaMm4I8N3jpSNH+GCj7k1Wa9KWMh2ZxmVO5AML8h4g+A7aT
qNasKpG4XLXpcZ38sOw2/h6G2kwnrCel1ViCe0Z4pxeW95bxREqs6pkkym7Wz4sy
F5Mkba0uwFhWg5zBANBteXfOS/WU3fLEWeHXvZu9t44vyvP84qqZfNzBhz9puDVi
kPAY4uiZK4BTDkYZZr3YNKIIwEQ/rjcJSDKZKGJ6dsHKBSi0oGxFZpCE+YMH/Zqq
hTQHgXbMKWLgJ7xxRYJS/apvgnTd1Dc7zc5J7IT7XCdML0+Qj8eD48DwyMu+uAAq
/048iyhu/R8RP4kCHAQQAQoABgUCU70tAgAKCRADb2ye5/Oevxk0D/4wEJarg3nO
/B8ks+s7DadvpmNZrNSGeeR4qSEeZlH1ye30xD1HDE+ekJXC97Td4mKWKTrbRVEX
F1y1aBCe8tL5BbsRDmwzKwpv3OqQ1rhowlAKZD8hdBEyEn15ciaoRisFKpWAv+mm
mZeTnG5sYOo9BF1v36WrX+9AOvy7yduVcZE3kLNoivS+8bXe5ULj6uMoyo/eC5uk
q35f1p1qBzrplMc+vs7z8Npc7YFP2ORhR/mVg0rYFLkPVdPV3uFkrkb/Z2SVu02B
IFWEeJojEBEbFNfziHUaQ8Z7ZdtkZ9OIS1Z0Wuy64xjgORWVcTlRe4AwZKVC8DJs
Fs9Gk9gnsPmfLgM46pcKaac445w9uUQzKLxdCBKLPxMV/JHBRrMghyahevwnpsuB
Ok+ldsCNqjFaeAnVAmv3YtTbZ1JdorupeFa65JyjQon7l1JwWD67P7N0xrn1gxJ+
9uGUeHwGAvDF3IRr5ECISKAW92NfLYuNpyv6re/bt6A+FxaSA+E8P7Z+I4Gl5l37
czz+9ciYipiusweDuxectOlEnh13/WKXuUb68v6ZzbwGjkW8wunavhAN9fWxqqgF
W0tKtmpAOHFzmNOw5WGPfGdKOzc+g5ZqRt3CREVHj/uizNJsHzfadkTqYum+kQTa
y4tSgGH0S3EAiHGsEy4YZ4M/nxdIyakmsIkBHAQQAQIABgUCU701xQAKCRBNWP3N
LKSXdmOGCADEySzz4Q6wKsx/gLiAyhYNbEJbiv1MirxhjIYGP9MqNpxxI1+Q3kuj
01K6ELIMuAhehoQOgU4AssJQxu7q78+hz2O7s+V0Syl+pvEOl2zUCgAmOYfle+BQ
75ZEEiINBuh6SOXBVLhfNp90FZ55KUSW4EeyoT+A4nRGHRgCTEfZ5WHi3lGlaLQd
Z9viLfNKA/DxrLWww+joTPIEhc3eU1mgDrcmfxo/L95EmTyUa5BtE0WuLwQEaY8H
J3eBgA9Y130ubuzzY4jGl4SCNedMzeIroHw2Bogd3V+E5aFtGd8gZUjXXr8rM6yX
PpttP2Hc8Bie2YXI2NffqwVqpL0dxo3uiQIcBBABAgAGBQJTvTYRAAoJEMATMJ1t
fkRccM4P/Rbg0W6l4KPFUvyKcUE6odRwoXExRGHdG9qW8Vf6xtW5eXUX/AZoCnXD
f3yWWttxgzN1e8iNRh0aYfuNSFTuHcHut/xw6GZ1yqASbuDmGWQ6uTb0yHYQcwQ5
ioaRaZZo5cpnSs0qZUpnrSzdUzyVmlKsD+1ut0/Z8yM8WGRyhplWX0dfXKnUUxJG
yh4GQc2dQon1vrsiuDTD2hr3EVues7le4WU+csegZTGPgPjhTSH6ZNFdDs4Y5KPi
unjXx+X6avPKPSJCnC9YlPMkI0RcokVLJW+K3+4QnbqU8m2MpZWVaaOo5s9PCx1I
208EHQ77A7EAFYNFrPZmtSV5X3BhU2rYNoRu0fpsNqJC34Oi7JdZdplPoO7FHRAC
AyQJyv8KUG8VVzK7m6Kt/Okq7LBc8RuvLQpUHSv1Z19fQvFgTegM5Pcpp3/ful/H
QIIc7XRElM57e+t8kbsoRpOlaKa3Okl3KisXdksWB4Fu6XdVArY/jIIQGs6dCpYa
jhRZcjkjHUAPvY/OqD2mBSwj0YwP0RoMVvFHMP1cgB3gjaB37A+DJeiKEXTWzGe1
fKC1TxCcOUZsrcqXnUyy23lKV9CXC7za3eB23dPIfWzJnD9BsVgYsemRVJx8r3Sv
QIL5zjKVDRAuV3M/HbCtSOgO68MExC0TFEl/8LPIMW8oVCY4+iqliQIcBBABCgAG
BQJTvUdSAAoJEO1n7NZdz2rnXxsP/R8WHku1nxjELqdM9M72JLD8UBlaAIwLStDy
hnTvLa0GO6eN0r2eJ1+tG8mKB+PZKOvNt8eZcSO/kjUvTIBILt7fAtN1BhsWpjQz
n+tuVWs4GVoPQssM4N09AYUzx8ni4byADY6n9l4zof2HsPsjXvuw/bzYXctKTQxg
gD3nswtLGY3q6unYewIChyaG8DStihFLcXIhXbwc6EOqdPN3VWwNInG/602UTO2L
eXoEM+tTaXkE51P5otACVH37AW0Vqqh1GxklYlMYLrKKn/YIBRvLVS5G+95iKs3g
MJhnaeFND2s9dmOTXyKyfTUffr/XTL/PVJSCbdqwiuXZQp8J77MtYyJn1262H8ko
59OlPtqvpBNuywco0/F8BOFvSTw5sS8CmU0EHvyunKaofS3mxCFd2B0DzX89+AoY
ZY7CKU8OYt/VqhsfsL0C+DL4+XschBOUoTg6HrqG4F69+gerkK4Ps2984vOeTXe3
IqlYN/Bn92m9rGy9PKkpqG5C6w5X58BgvfeWTAkM4X32rZHKOmyYSCdRJQw7MGSR
24OaWKPmgKvMaH8MQaJx9oSaAgF1y1892+ykVI9ntCVwywkmxNg1lfMuVFM4Vh9j
+C7OngnbQbhYtbFG90z9zfoMln39z8KT2yDP4A7Hklw0xmmT6t8KduGD2tfmaW4+
oz9attTyiQIcBBABCgAGBQJTvUdkAAoJEJLIQ0VtpqZuLNQP/RazXTtk1mixmLfu
nrScgh/1Gtb6XPVDTP5SGb/8HVdY1a+dDBClUIAFbEAUBIcBO4/NVlW9un4IHyri
xdD/ijE/Cr/BMLnSFU5EmHKn8yOc3Bv6eTTRbJ8EYru0Cj5MdSIAoq8JKF8Lbxba
hBFw9ZSIpREPGlxnKI3TEuHJQreSZR07/GPk50suTK2CXxzEsk4VZesSTnwt/1m+
hrdtyNke3+wy8R0Use+KKgmTzpQ9phc8wq3uhHFzLJ5HbE21VRHgFd5+osZuSDuH
jw5o/zU5o0Bq9DDY3TWXPD9lgqKQ2PgH5DG6od9gjpjJdvXpXpck08HJDu2V+u7M
zW5lsnthDsW39YVLRD4ZwZJQaw+0wBuGDDxV+8x4fYhYJnXD8ZtUHCQ56FlcMyzL
m00WRLNxBSJjRvH12geg5xK3JWZ8V6Ce+XhvIAduDkajuUKQoWvTMzYaviqQhfV1
zXNNt5rxDNT+jMiwnAtDeCTZPMfGvzOPw9sYBz5RUa4liVPrGiEW/snAhcMB9JDK
jMAsKHvJwIvB9QrRC9sz6JIgEqv+jlsdkslEVU2AALlcJ3QuXlW0j9Z26q0sNGt8
5FVqhc4DOyXtZhKR5Ru8Lyc3swYRi2ofu9Roycq3L0swcMoGnOikRbj2PuuRdQiU
ozJ7mT6JmNF8ynlx/1+uzniVneEliQIcBBIBCAAGBQJUGDc+AAoJEOqwPFi/3EeP
EpUP/i2p7BLtyrujFmwr6wxru8G2HBWySFeRZ7YC5iH1ZIiGPPi7nuinWEv6FaW6
dW8fzrwmJy0iUpstKM8CUdR10PZ66Un6A9yfj9MuYSWBDQwzkd3wSJ2+HPLeaTsc
hb545CYnIJBaUAWyfufyoeB2+u3DNQd4oHv5ceI781D6J0h9MUz1bNgV2w3prubD
9o8ycaUvXqHrADqDZiUA1zblm19AmbJIJbgeUaXD8iwkyk2hRHScVe9aLzd2J4TX
PIQt9Dj/VnW3TLvTtMPEls1SM+pQ9xYF3IBz5BWbrMuk3o3mpsIijs+vfjJdv77Q
UeyT0Ur0fJ5xa7zWxCs5AMpCFDdLGRW1jzFYipJBBhDVkylIjpr3eoIIU/RxVC6f
5dTaW8GeaspllyJT8BKe54R9u/uf7QPgIkuXdIdaZ4qbbftLxvyBJk6A2gSM/sLY
qeoo+zRxKi+lMZ/Zw8MUZ/ON+yE1ccQJAk1GDqAhUs5f7zCPU6xBLFeXhz9d6bFP
BGWZ3dy7mZaHgALDGqSd240hIoknwzqHaWZK5lWTmzIVUUQPV1Vn68stcaVsuaFd
tnGHv/JMvAj1F9ZlDDRwaPx0ATTXQbBI6JlvDQ8u2tTKIYEswtez/enkjX1dALFl
tV5FNartIWGiHWYxkGVRlh/QtAb0NsBU4/5uZkWpWzG0GtOniQI9BBMBCgAnAhsD
BQsJCAcDBRUKCQgLBRYDAgEAAh4BAheABQJVntrCBQkDwu9RAAoJEDanwF/h7Pm7
aw8QAIJadQ8+oJgvc9yMS+kW+EzkdmGQUDk/7Ozkkj8gk3Fyh2gTI6AenQaDm3QD
/qvShJts/JX9+zVREwGU7WAvXm2EGIB2OB6pVQOGhNc0V8BihykQ27BtetvMivgp
KTYCwdh/CWdF3hAGaPFcc/GkrQThTBZARISUC5zce/FvCSugvRsMdGYjhaCA/LYp
YBGRzXZIrfCaT19tvfW89WdFamT5dVcMVs0uVHw1qYzz9EyH8cj3KwVanZ/KF7zA
pENdsmx2/+EPmVL/oGqctcx5vXtzMYTdr54aRay67oDbtWZNqYoIksShaw5rsNkI
OnqMXCqQkDd0lf46CmqAqqwH0bNlnxTpm8cEcfGIee1yNUc0BGs7qgmtm/7+96My
WPKHixQR48OPiTAdT6/n8msm/+MeL8aRWvhLUkhi3zDWoilScPW121JbE0QytpWP
v+2QCRtvnJritKrzyfjO2CRHOoe5zOY/yRd91CVBde7Tpd0UdQP3vw3B0MznahYQ
+qdt1bMD6NLgADNDP0B2yWMnUS6xku6iBANwZcdLSav4gE7gVFbePKNJnGW6rOIp
ljl0Ivm//KVufLPNX0DAokfvHIvDNNuVuk82UpvVSVxrIaig4HhbWDOnYiDhtE0Q
CDNP7v5e9u/iC3VwBVI73iOsDpPGqEFp1E6UZF6Uvfcxmsp5tCtDb3JlIFNlY3Jl
dGFyeSA8Y29yZS1zZWNyZXRhcnlAZnJlZWJzZC5vcmc+iQIcBBABCgAGBQJTvR9B
AAoJEANvbJ7n856/QGAQANf7Qn3AvTB1Co9oCtKobbtLxOx/FFw6/jnfurJxQ2Y1
8N9zTNJ1KCzI8pYbanicWQFqUfC1wu6FrnSlNGQvW464NqcERElbFE41pvqX+Tb6
/dOX07mMBZYK8wgLDcHEjl4i7NHurx1AKA2ro/5utRvfIqmhPxcHwhNiP1He4MD1
NgkyrxmRWtO4VM99mhXdm+pl/8XwuFJrdg4v36pEws6tYJgPwDc86/XrmeJT6GOC
RFREdwXn6osSvvVYnx4Pyto/xTG5Fm4sa7S4bxgvvSzp2/L+eO4JpOGXuhiIGhfE
wISta1yf14GKTa4a0Qd+gquml4yd1DBybNoa0zcz/sJOBULe/CLKzSs5IuGkfdH0
os1WEjdqQ7JPct3Yizb7Iw/j1YfvDmnM+tt3EMU1DJ1ttY9+XB6pZvtjSHNApaDP
fSeizstpoLle3kvECBJyEIr5u/hL72dYEZtFiYFlHcvWIq6KqWJlIJrOa7vG7r58
6qstiG270tCeaVOfZT5grKNcDf4vYEoxL+2NKcHVA0rogRWPMwSWZbWEAaIilK/6
AVzc8xmefZJEHHxH7PprcPsH3MPpOwmWjfheHBKfIfEu1UqWAD+cRQmE+jEz1vc6
DzVUfA4c27j9/GXT9/NQsBTamC6rT3YUZKWlFulCC3ncRwf9ZTGSsiT5qCuV1ECn
iQIcBBABCgAGBQJTvUdSAAoJEO1n7NZdz2rnVCcP/3zh4y7MrLnV536rB0tDOM+l
sP3UYDmclWZmTENZ+r0ESM4YJzDjKO6ltXhh+MdYqDddY3vqLnsKTNYuMjKiu6jd
0ETy4ThzHxVhcyrgl1yWxyaSsdi5gMOnwNVClHfOD5gaOF0jdRJnLTLMueAEM3fy
NzSUjBOHJpk+RcIV3r/u8LvPFV2qwLWa937vYwfLRJ9jaQur5MnEVOWBz7CB0g1F
06JAcLv16FyWiLCOBxXZJd974lKXHd2yEMkSlF3Of1qX5FI6FK3HQU+c6eJcrWc5
4++zvgWHZTM3SwY9g5rl57Wz9Vpi13Ev6ArIIIEQ9P1ViwK4zyW78rFoM09juqHk
N4uUCWuk0f57XCFkrDA/n6YCSfAxSYXc1I+MKpAm/6yBYiBNpyS3Jz5HGO2S0QGs
PsBcUHGEmO6k/Z6boJLwaCAGx2dSQ84R4DQeFAd3NjBPab2xTNlitcOi+xnidCJZ
oDWQqx5dSLwLeORsw25ikOWroUS1hqfta2HDnnou4zuyppov0Q+50JGFJIril8sv
oUmLfuSk3XUrlxPHgL57Wp5K8NOIU4u/DStX4UaRuHQ+Uu9GV+c6rr3F46+MooqX
ISAw5cm/kDMwuOfQ4GOo8J/ADUfLQa6a/JnWFg3hb/rgt/lHJxjZliOZy8G08HyB
ddNfKCTBauqEyPYWTHzgiQIcBBABCgAGBQJTvUdkAAoJEJLIQ0VtpqZu/g0QAMXE
q8sNraENb3zO8wisdE0UZXOGuQduXDSrwpe26L9mCR/usjeWeGqbG9b6mP+fAwXx
m/BovdkF3bWguo1GCzztEHy+aTB4voxI6lEnyDKB8GG3mlkVjNAbDjVi/jCZfe6T
bJ6xDhX7633ees1An8tvizMHRr+z8zQ3xF4MNjlxLzawPE7/As5uHaT6Q3NhGTGy
G1oGsVlO8pYp97p2E/d44m6IlY5XEzO2A2fIq+0N4dcy8omTX8P4eUZFlUezRbbZ
tNP8Av77hESXO79gpmQir9fC5/qMBgJN+3iB9O+VcB0SeLm0TvUWtSFULqEdDkKA
rLOgZf0HNnsu7/rb1tR9zqSYN8gsF3MvF0RNHUdbyEh189LZTmapwSxcaoUYPcoO
Bfwo0MqMuEuyCkMWSD53BvsaSbcs2OWKYAp+oluM0TrnLup37O2G/EbxmMRHZVVy
uX60pIQDXO4DjLo9tqbM6OUNCG+1tKEX7Bs9GIzUL2mxZ072qE8x1A+eidSzy5Tx
2nE7DOurziiuv8G3JPFDtLkUVtPx9gqyyG3wmfThkMCl1jnutYDjetpeC8LcI5S9
mFE8BXBka7qEEY19GI/1LJcfMI8lMn16OITYv4/cwqWPMbjSMg6JpWBCFdsxRmIW
iggKodt6LfnuEciChejk8ewTf6/47z7aVhdBkYaOiQIcBBIBCAAGBQJUGDc+AAoJ
EOqwPFi/3EePCM0QAKFrkt0wW+am/O8ZzIejSCY+htWilGAIa6REk5gv00k2dKPC
Wf5rNPAXeQRAX4qItmd35hz7czElm2EVbrylDD+F9uN8wbkCMLdIe88caWfoj12l
JACAd0NiBSwJPgrajvER92fr173I31cKT6hwXP6bgjU3J4HICc1h7h5j7g+/YSeH
UacPSiY4MuXAQao6e2BtFI77LOwFvIFFdCEMdZDwoH+7lIF9I+Krm7ojMF5fauaS
K4e3kL029QugIFYlgb7HeDGLlonBSn40YXPenafAin0lNGWMWVv3SKN7tweNkKEh
MVoVReropjYpRg+khKaMumwJ9bdGkYP8jq7DwCKXy/J2rfCUzsyVX5Ga7keT8Ztn
y4RO6YqFtTryraiSPrxDZQ0Gt6kc1m3u+4vh93qJk+foUDRSLWfWjmX9aRf+7+4z
dsYBOrpt3tab6FqXrW7IcI+p8PCyBW4c/WHkU3YWreEba21BXGiMDoxfhQ9OyvSH
t6G8kgO9+k8sRY/78oGYxR4Aait8/Y54DmHkyZKSewu96So0+TDmcbkeatatDhra
sbjfQLWx8363tnQvmhWpw/bpWGmDQDLVTHn9OcXlckGU1fiUM7721g4s2UdijTMp
yYWfsLTaxOujHyxkwkBBtGV3DCas5Ep2KPMfSOgf3YVtPQH9IaotJSw/A6FdiQI9
BBMBCgAnBQJTvR7xAhsDBQkB4TOABQsJCAcDBRUKCQgLBRYDAgEAAh4BAheAAAoJ
EDanwF/h7Pm7QvMQAKE3pM3e7LrDH6+xsdafxb/RxnVwUI6FaoN3dIZRjIIh7Dyd
6WypD43+f4c4AeIX+b78RuCuu+oZMMkHk4/Y4PIRv6jw1wuGa67iHopFXy9KPYjE
QOtLptZUAorqC62CzoVJxwbpIPw1AkKBag7FFKtiymQKbxSAkEkCOTa64RF+FFDJ
zUqbRQPJMMhKR35lJ/W3TfNQQViF/nydDdNmSY+gYAPU8kqhx4K7K9al9DUwVa/P
dL0l549BLOHzmFcEtw4FQOGMYt4Gkma5+6OIMJOuoM/ADAUz7qdcWYYdsFl42HzC
73u7MGLcfGkElcZKkH8sn2zuKsTTtTKD5rhLfIiu132vK7vqoONdJLd7U1X2Bwif
/ub1we7x4eGonZjhKajENpD3o/1Y072gLy8rlZ1r6/J+GQ9TEwUBNV8NNOfDPv0p
xTP6OCFPHEFA4toG0rRBm7OIxmQXFWmfxMT3NnwBqPCufWlOm20JhaU/pefPCqHJ
Vc8Ap+k6/bct3iNuAg1buggFVDWg89uBqF9vfdELiCDF3nRYm4bQ6S1cWxvnu5aq
9MZdt4Dc1WnTSNfY9/zjKJWmG3miv1D1eo3fSyVJNYVfVzQ23KMOPwR/jdr47Gle
8/5OM38zPhZ+vC+XD//Lq0/c8iMO39B4pwQ0Bb8FAhk/6Ug0cYbap+lPWkY+iQI9
BBMBCgAnAhsDBQsJCAcDBRUKCQgLBRYDAgEAAh4BAheABQJVntrOBQkDwu9RAAoJ
EDanwF/h7Pm77qQQALNcLFh7Eqc6gztkIySQtqDgieH1Frj2YGMrTxdzP7fnl4sT
wWQF2H0rsLgvOTZszACwLm9Rg2GaRi/bFZ9S8AIM1klQEQmu5LoQDSPrfX0pNxDl
1WhESECgEAF7++HDk3kHUxr5bCr+AN6kG3mY2nuKtw33G5ZbPtM5Nwgk/GT8dB0w
EazZVAN103RpdDmqGgWhYP/dYjGZJjLQCjGyM4VoQcEu+dPrUlAxhFbm13wRyfgi
fBkOug9pB0lpblEXAbB3slDw+4A1++lUjTLzGHayRZIys3d4uM4l1C1b8Z5SeU4r
mpDcqvRbDkhxwVh6e7YdEbf1VTWjQ2WgvEDQXG74N/nN3npbjPfnyFF79udHTZvb
qW+uqyozxXdtLvIbcEHWVDdQGqqTeeRinRu7sK8PRuJxbI7YaECGFw/1QrXdIUzi
1jxRWgtfWihCArXiEuo1LBwdto8CaSxkKV+QTsaH/t5mUiA+fHzsMlexWe55K/7i
OZ5wViUcffNYwbQ7DgcRxwuzc+IYaGg0GYGzJfWeKnrpwm8uZSccH1LLXdIyf5vp
Q9UojD0qz1+byBPtl5/DBwFi5st248YMnXCItIYkjTfLeXQp4oSi3AHH0TEAxhUt
MLoI7CRnIiuCLmssfGI3sNH55wJQQeD7h8c/DaBI8yDuJ28dNY6H5zjPc82suQIN
BFO9HvEBEACynbl7EgcRIGWP7O6h1O6mrYXNZ2JpJBgYosqizdDHyru2nQSrNfgi
wAM1feB2NLJC0coQzRO1sDK2JP770+eK3ZhbWSP5BWN2toSFVEGlVpGWLBGoefae
ZnZA22IDzpOIjIi7iC92JBsTXESsBoV8iG1rylQ15pcE03IQEuuDu9r7H8RJ3vTf
X1c+a+B8MUHn56kn3QkdG2blV0/3gjFqqavZeOxZpAmyn9n9Vc3yCCPkagtNQwle
NyZOSOLjjVpBjncE6dATdLOj85phfOU6eO/0bMXAgTr7mY41EIqYqdPQYrY93ySG
gBvBkyNaH5AlDNZZwJ4ddtDMFoP8nUhBoRrf5ApYyHcEmSXahLfW3a2qrPm/w5VL
EGLt53/6GZvEetpP+TtBLAxX6XaC2SXAOrzfSZENdYt/Ew6F/dTCZ622m0eW65iV
wSi1sNZD2hNFPs/12a2tem7DAWqD2bi8BltKRbO+8T7BARwIl5hXGq5+YnO+DgTI
f4SYkSt8aiPYwDAF3YSkzpiUmZoBSRt6Sb9sZ3zIxpfnrtLFmSeujzinyCVNzFdn
+HKxZvI9Mc3Tv/LqPruVuWHt1Aj+eygH5bRZw4PTsMNX1FxM/K8hRY91A6Fyp3GC
kb5RzqdEGuSONBseaZirC0d+EYZ4smy1jydpzwT1O8VjY4wi5BdgwQARAQABiQIl
BBgBCgAPBQJTvR7xAhsMBQkB4TOAAAoJEDanwF/h7Pm7gzUP/Auq4I876RUqAP2D
gPNArjuc7jqvIIsgqBvwS2Vdvxg0pFQmsL13nvlmFHR1dp+yOhiz1WmXIVGa9UoB
rVdmDrzqCifHUVlFct99DLJlM+hNmQnHgTABTsClR4idkekOvyEgAW/gsgddYfqm
N8nRKSrokFZvwoR7HlCcSXEuATbqgHjJC8IuJuIgDWjshy3yVLIo5v/g/Yuio4bx
tRTJm72DtUIdDH3tDejc37wd945Rzk4hKzet64inF6XfRhqBsRob1m6/wtP62xPc
Gbb1GlzxYg9WllRJ/ZOTktB4BemVjRn4/0KU93YyxFxHOtXsoZpRGDlovQBUhRkd
b2JEyHaLnFVKa7w7JFKW9d+OdGjV93l//6139QEQlcuocV4QciXZOXTZkWsaKQOb
6WkrSwkQwvNFS2yeUd0x6HD0xebztmSGoXL3uCKyeIxP/8MJjJUkWHh/+DLue4kh
lHwva7Wym0cvYoS3RzfYd26t9OgM7rflE0tOeJovaoaKP6Aant/EkQj2Wb1MssO/
Ia44NyMTrLARAPlAEGW/HI5JL9DZDnmUtByf29yqaHDuJCZS3nvR3T/4q+pblTVd
xQgwopUWjiKkg72yCXMhr/6FcOr9Xgqn++GuMZzh/TFdEoFoJn9stUaScYsoMoih
ym2NFbd1l2Pw/ifTQk5/KpQD/HkwiQIlBBgBCgAPAhsMBQJVnts0BQkDwu/DAAoJ
EDanwF/h7Pm7fV4P/Rb4aYTZmpajgk26vnXIJ2L/Xorx1lV7+a1bDxct71qWSLv3
aCDGDXe1ZLYMnyaNCJHNn4SP2biF7QrRhRmGdETA2VXXCFYLDS7s4OQKltF3p1DS
1UPozfIyXkCFGbOasbaDtJ9SOSv04q1E6nXfCcF8xgjxMHbbrCsGiiHSNet+5A9f
AeZPWKWeUDgc3U7tho0FWyHZWgCjt5x1pYlCsUPgV3vlyo8HqRiWxLYF1WQ7SwV/
1536r5DD5vFbzhdxQ03mPDqLh0VZwPlQ6nb+bKwDX/75Q6tBNBkUQGM7XqI5tZ07
CjjI1/sTYMJz+GNnkIgrSiBr3vihtJgUzbJFfJqoIPkSdpayCP17k2Mdk9eCW6mc
tmtfhU91lzJUvAl3Og1TQP/wiyPQhTrQOlonwkrzY/Bve9Ilh2ZDt/9Q+XzEtSdG
59phFT4s7Yt5f9gVGx2hUhE5mmLN27rQJ2JnyIkA9IyNiycFPRo4ZURXI0yzCwXH
bwLEmA2FVnnyotURN7Z1k2PzUOL6lb7j2fMJZBbaFDR1G7J2pKNihJO3IY80z7Le
tpRpWKSdHTpSW1UXJFQBFT4W7fja03aEXP3bK+RV1MkAp/TCWlVCsqnyJae7BnEu
g9NgaY6PRozzy5ZAdWM36ylnwFyz48fgUWHFhDc7fMCHjwqDtP62K1TbRvFM
=cQn3
-----END PGP PUBLIC KEY BLOCK-----
</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pgpkey-portmgr-secretary"></a>D.1.4. ports 管理チーム書記 <code class="email">&lt;<a xmlns="" class="email" href="mailto:portmgr-secretary@FreeBSD.org">portmgr-secretary@FreeBSD.org</a>&gt;</code></h3></div></div></div><pre class="programlisting">
pub   2048R/D8294EC3BBC4D7D5 2012-07-24
      Key fingerprint = FB37 45C8 6F15 E8ED AC81  32FC D829 4EC3 BBC4 D7D5
uid                          FreeBSD Ports Management Team Secretary &lt;portmgr-secretary@FreeBSD.org&gt;
sub   2048R/5CC117965F65CFE7 2012-07-24
sub   4096R/CA20328577064EB7 2013-10-05
sub   4096R/8B114B3613867E00 2013-10-05

</pre><pre class="programlisting">
-----BEGIN PGP PUBLIC KEY BLOCK-----

mQENBFAOzqYBCACYd+KGv0/DduIRpSEKWZG2yfDILStzWfdaQMD+8zdWihB0x7dd
JDBUpV0o0Ixzt9mvu5CHybx+9lOHeFRhZshFXc+bIJOPyi+JrSs100o7Lo6jg6+c
Si2vME0ixG4x9YjCi8DisXIGJ1kZiDXhmVWwCvL+vLInpeXrtJnK8yFkmszCOr4Y
Q3GXuvdU0BF2tL/Wo/eCbSf+3U9syopVS2L2wKcP76bbYU0ioO35Y503rJEK6R5G
TchwYvYjSXuhv4ec7N1/j3thrMC9GNpoqjVninTynOk2kn+YZuMpO3c6b/pfoNcq
MxoizGlTu8VT4OO/SF1y52OkKjpAsENbFaNTABEBAAG0R0ZyZWVCU0QgUG9ydHMg
TWFuYWdlbWVudCBUZWFtIFNlY3JldGFyeSA8cG9ydG1nci1zZWNyZXRhcnlARnJl
ZUJTRC5vcmc+iQE4BBMBAgAiBQJQDs6mAhsDBgsJCAcDAgYVCAIJCgsEFgIDAQIe
AQIXgAAKCRDYKU7Du8TX1QW2B/0coHe8utbTfGKpeM4BY9IyC+PFgkE58Hq50o8d
shoB9gfommcUaK9PNwJPxTEJNlwiKPZy+VoKs/+dO8gahovchbRdSyP1ejn3CFy+
H8pol0hDDU4n7Ldc50q54GLuZijdcJZqlgOloZqWOYtXFklKPZjdUvYN8KHAntgf
u361rwM4DZ40HngYY9fdGc4SbXurGA5m+vLAURLzPv+QRQqHfaI1DZF6gzMgY49x
qS1JBF4kPoicpgvs3o6CuX8MD9ewGFSAMM3EdzV6ZdC8pnpXC8+8Q+p6FjNqmtjk
GpW39Zq/p8SJVg1RortCH6qWLe7dW7TaFYov7gF1V/DYwDN5iQEcBBABAgAGBQJQ
DuVrAAoJENk3EJekc8mQ3KwIAImNDMXAF8ajPwCZFpM6KDi3F/jpwyBPISGY1oWu
YPEi1zN94k5jS90aZb3W8Y8x4JTh35Ewb6XODi3uGLSLCmnlqu2a80yPfXf5IuWm
IQdFNQxvosj9UHrg+icZGFmm+f0hPJxMTsZREv3AvivQfnb/N3xIICxW4SjKSYXQ
cq4hr4ObhUx7GKnjayq+ofU2cRlujr87uOH0fO3xhOJG4+cX5mI1HGK38k0Csc1z
qYa/66Qe5dnIZz+sNXpEPMLAHIt1a45UB967igJdZSDFN33bPl1QWmf3aUXU3d1V
ttiSyHkpm4kb9KgsDkUk1IJ5nUe9OXydWtoqNW5afDa5N0aIRgQQEQIABgUCUA7l
wwAKCRB59uBxdBRinNh2AJ41+zfsaQSRHWvSkqOXGcP/fgOduwCfUJDT+M1eXe2u
dmKof/9yzGYMirKJASIEEAECAAwFAlAaIT8FAwASdQAACgkQlxC4m8pXrXwCHAf+
J7l+L7AvRpqlQcezjnjFS/zG1098qkDflThHZlpVnrBMJZaXdvL6LzVgiIYVWZC5
CSSazW9EWFjp9VjM7FBHdWFZNMV7GAuUt0jzx6gGXOWwi+/v/hs1P11RyDZN5hIC
HdPNmyZVupciDxe+sIEP9aEbVxcaiccqzM/pFzIVIMMP5tCiA42q6Mz3h0hy6hnt
UKptS8Uon6sje5cDVcVlKAUj1wO2cphCqkYlwMQfZV5J9f/hcW5ODriD3cBwK8So
cA2Cq5JYF8kYDL1+pXnUutGnvAHUYt87RWvQdKmfXjzBcMFJ2LlPUB1+IFvwQ13V
9R8j9B/EdLmSWQYT9qRA2rkBDQRQDs6mAQgAzNxJYpf5PrqV8pdRXkn36Fe45q67
1YtbZ2WrT7D0CVZ8Z+AZsxnP/tiY1SrM2MepCeA2xBAhKGsWBWo1aRk5mfZOksKs
iXsi2XeBVhdZlCkrOMKBTVian7I1lH59ZnNIMX0Nl0tlj3L1IjeWWNvfej43URV8
1S9EmSwpjaWboatr2A+1oJku5m7nPD9JIOckE1TzBsyhx7zIUN9w6MKr7gFw8DCz
ypwUKyYgKYToVm8QlkT/L3B0fuQHWhT6ROGk4o8SC71ia5tc1TzUzGEZ1AQO8bbn
bmJLBDKveWHCoaeAkRzINzoD9wAn9z4pnilze59QtKC1cOqUksTvBSDh6wARAQAB
iQEfBBgBAgAJBQJQDs6mAhsMAAoJENgpTsO7xNfVOHoH/i5VyggVdwpqPX8YBmN5
mXQziYZNQoiON8IhOsxpX4W2nXCj5m6MACV6nJDVV6wyUH8/VvDQC9nHarCe1oaN
sHXJz0HamYt5gHJ0G1bYuBcuJp/FEjLa48XFI7nXQjJHn8rlwZMjK/PWj1lw2WZi
ekviuzTEDH8c3YStGJSa+gYe8Eyq3XJVAe2VQOhImoWgGDR3tWfgrya/IdEFb/jm
jHSG5XUfbI0vNwqlf832BqSQKPG/Zix4MmBJgvAz4R71PH8WBmbmNFjDelxVyfz8
0+iMgEb9aL91MfeBNC2KB1pFmg91mQTsiq7ajwVLVJK8NplHAkdLmkBCO8MgMjzG
hlG5Ag0EUk+ViAEQALkCj95JmvmfgytOxnR1w8xnQBuUxtYxf+BWwqU0IfOMBxAm
XDRfbfe9Bc3DDZygmjrZ0RCDcVJ4OmDNRc/vvoTst870so49dM1h2i6aWUhhD4Hy
cNjkx0wAIyZ9jXidT3LyAhCTSf/GjtpcORCvmAsXcJHzhhbJ5eM2SBkXmNdn4MeC
/hCbfUfzN64fmsGR4tKKIlPPayyQaQv/dOP3ofEh4SWRc8KtjEA6uIyHztWMWEJQ
KN/7nSeVuwDpVJL9l4yUGB0TqlK0p/necoQkOolnHUX5oK7Emin9TjPYCGqYAEWu
M1BbWXiYIdivlEm3ZU+vqq6CbSw/SKDZ2ZuK4UzDGQnW7WycsbXqZ18aewh1mdf+
5+YBxeXazRJvfFapB/WvtVqi84LOWior1IBMMg3PCyBiCjhHwXvoV5V6M3lthrnV
gyiCTreLXvTLNgIKQQFUvwW2Jscuwa3HhBgkhkJBSCPmpWAIZ9eA1RugvFQ893Xh
t8vy+z33WqxgUzhD8ZonKCBEZa29Zj7SeIYXcZmVmxCbRt4PYkgFoq6VC+93qtXu
OaOvC+0b9qkmNj5EqvozRt6SNv0sDe844T0LacR6QS9Pq/YMjAs8ao3gw0iwOAlV
vpiZfoEb6purf0Tz0h/URRHUZngEBsFmhciZxuCg9g/GaD8o/+PX0nzOWH4PABEB
AAGJAz4EGAECAAkFAlJPlYgCGwICKQkQ2ClOw7vE19XBXSAEGQECAAYFAlJPlYgA
CgkQyiAyhXcGTrfF9g/8C6JhufyxnYO0DmPURCFV0em3WjXcxQkhQa03u/sU8OFN
yp2UOB8jxI3XAsGe4RnclPF273K5G5OfUAJ2hjWFGrMqXGNLlsuJvDJCUmdHnI6c
sw1RvOn2myMzUSTqxPQynkvntughqiyXbGQaoxQJVWjruhogcIkVYvOT4nMGXCyk
9Q+uooLNw8xpzsZBw83znWhjjzemu/BbOfjXbf3qdK9NWMkBfcaR9sDhRA+YY4bc
o7oTKXFfh3gMN1pqTuAM8dbGc0/bS558yNQuFaJ+cX3lbSLXz5oibJi6kudyL9E/
CkVvMFWTLcQQWCPS5rK0dctodW1x8JnwVnaG80trFIxmQ+wk4S156CdYwTv/1LbW
GKcVz9Og1e9wIL2LsVaLD9OIRnx4G8dLqZJz4pmGEES7CX6rrJuSpXxNOg4PthiP
s0z/q9deohKJkUgj6tln0OCgI8203GSSLq3FTAFer2VS+m1XMkA2mqk1Wv6tZeyY
MnYAZCBzc16F2zMg5dVKmV114bHmRTX0b5QQNB7JU3C34kdTagjLr4dz/5BhXgof
zjP9HgVQKCp7JvTdUT7N0y/k+mRMmnK8vnWdbOZH48IOELDhMkU5QIiKHoJaXsw7
wVo68LtSQItfIoA/m6EORGZxUWCi/8G+kBK6NEExR1dlAW+M+fRhzNgqvqoLrcfR
4wgAkQGq3M2/hGdU/Z1j6CDKEvA1/iSRpnBnfVM8KUR661QrEctmIo1YwSU7x5+g
H5lfDUjU2cIlD+HgfxERKwl+hb2KY9OyLq2AUhhf8rAvG2dU9djDp7TWIvF3wexL
liu4C6EWcwlnEecCpkPUYv7/PKb0h0xAx32Umb6dzkfd24miWZTI/Gg7R1Qyl1DC
wBM9kgPRgEhnV3ummsD3KPXf5UwzHPslhqWTO1p2iML4exnXlknL7mJKjj4d3gyi
5LxVVSzt2xi5MyCkFhiHFkSfItihcRpHdzxsBW+7YWw1ELlcKMeOkZQcyBm3VpE/
ZD4DQK6zwGfk4y8WS7A5SJEjJrkCDQRST5W/ARAAwbT4loEoK7ZY8fzt8hyhdBgS
bpXFWAB6yeyGDYp9ucG4ySjlfZIAew/EOzIR/68pKiGzIE0+kxKjlvVDcJoqWfrr
gomondGK2oyK35qOsYOlae6tsZm73InJuGSC+fZ1Vv0HBIn8JZpJXFV7z4FotaG5
iaKDdZCjxawVEWDl7z0zDSLKgPLtK4uSsEVsQIhPo5YLSqT7mCnleCqdNu3S4cun
tXaZmmSZnfv3qnkiPNNNSagZrMUK349fVCdvnJ4hKDbMAEgbxZVwEeB4HFicjwAN
UQTO1qSc+h8bwkrN/RgaT0Zz3nak+DJOOrKRV5VWWemx4Oy2oT08SqMRbhip/veI
LvrV+rKH+lb9uxp0vYWnRvWodOlEla0NeBzfz6Sv8ZI2D+xLJ260mIB4f4BUYCBi
SDu8UKTDffYba+50I9RgV9+umJ2WTcp/PA5/59M9e6R2F3dcM0Qey8hVDcf+rPY2
thXymS85IHcPauDjvjpHpx1xvhoEu2iX0yJwBDUX/xVWwH/lei7DT0cd1dB1pKiP
zNvWSoPp6zhqcB6tUvE69CLRzotmb2OiAkFOReEVkcATL+bG9PBN0zWtSXJuCSL5
WAb+syRzBGwLA7+iQOY0yXCZ+Etl6BG8rsyQkBRwpTG5jXzDKUTl2hmKGFmU72xc
cPeNxhbq1tGMGfDVVmkAEQEAAYkBHwQYAQIACQUCUk+VvwIbDAAKCRDYKU7Du8TX
1cEOB/0WwX3yF/MC8upI0YAbjht+KG4cLgU6qo1ydZgQyHpAf8cttzq/uCDu4wLE
g0CDmreTXoiNR9W0ULhkn1LFkZQI6Z2uSH/wqQUJrE4P9Oo61TXClIzvjBoEufkS
3bg3wuAKiQ4cD1XxyThUG3qa4nbGVvKi4eWYuubpzJof7QD75LudHmLneY4mtCNA
ZgmgEWA2Utn0GWN1QNfoy1NGeLt0kza0VFjm6l6KeMc28ULZZztg0KbuFmQIreN9
JHQbJrrqX8ev57SqEtanoPyX4IjxVJFEmTn4xVSlRXY2uFZZtlB1SuyEPYmrdnjb
pDN9ZUgVOk/c+0+5u+G3JBRYu6P1
=fyjO
-----END PGP PUBLIC KEY BLOCK-----
</pre></div></div></div></div><div class="glossary"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsd-glossary"></a>FreeBSD Glossary</h1></div></div></div><p>This glossary contains terms and acronyms used within the FreeBSD
    community and documentation.</p><div class="glossdiv"><h3 class="title">A</h3><dl><dt><span class="glossterm">ACL</span></dt><dd><p><a class="glosssee" href="#acl-glossary">Access Control List</a>参照</p></dd><dt><span class="glossterm">ACPI</span></dt><dd><p><a class="glosssee" href="#acpi-glossary">Advanced Configuration and Power Interface</a>参照</p></dd><dt><span class="glossterm">AMD</span></dt><dd><p><a class="glosssee" href="#amd-glossary">Automatic Mount Daemon</a>参照</p></dd><dt><span class="glossterm">AML</span></dt><dd><p><a class="glosssee" href="#aml-glossary"><acronym class="acronym">ACPI</acronym> Machine Language</a>参照</p></dd><dt><span class="glossterm">API</span></dt><dd><p><a class="glosssee" href="#api-glossary">Application Programming Interface</a>参照</p></dd><dt><span class="glossterm">APIC</span></dt><dd><p><a class="glosssee" href="#apic-glossary">Advanced Programmable Interrupt Controller</a>参照</p></dd><dt><span class="glossterm">APM</span></dt><dd><p><a class="glosssee" href="#apm-glossary">Advanced Power Management</a>参照</p></dd><dt><span class="glossterm">APOP</span></dt><dd><p><a class="glosssee" href="#apop-glossary">Authenticated Post Office Protocol</a>参照</p></dd><dt><span class="glossterm">ASL</span></dt><dd><p><a class="glosssee" href="#asl-glossary"><acronym class="acronym">ACPI</acronym> Source Language</a>参照</p></dd><dt><span class="glossterm">ATA</span></dt><dd><p><a class="glosssee" href="#ata-glossary">Advanced Technology Attachment</a>参照</p></dd><dt><span class="glossterm">ATM</span></dt><dd><p><a class="glosssee" href="#atm-glossary">Asynchronous Transfer Mode</a>参照</p></dd><dt><a id="aml-glossary"></a><span class="glossterm"><acronym class="acronym">ACPI</acronym> Machine Language</span></dt><dd class="glossdef"><p>Pseudocode, interpreted by a virtual machine within an
	  <acronym class="acronym">ACPI</acronym>-compliant operating system, providing a
	  layer between the underlying hardware and the documented
	  interface presented to the <acronym class="acronym">OS</acronym>.</p></dd><dt><a id="asl-glossary"></a><span class="glossterm"><acronym class="acronym">ACPI</acronym> Source Language</span></dt><dd class="glossdef"><p>The programming language <acronym class="acronym">AML</acronym> is written in.</p></dd><dt><a id="acl-glossary"></a><span class="glossterm">Access Control List</span></dt><dd class="glossdef"><p>A list of permissions attached to an object, usually either a
	  file or a network device.</p></dd><dt><a id="acpi-glossary"></a><span class="glossterm">Advanced Configuration and Power Interface</span></dt><dd class="glossdef"><p>A specification which provides an abstraction of the
	  interface the hardware presents to the operating system, so
	  that the operating system should need to know nothing about
	  the underlying hardware to make the most of it.  <acronym class="acronym">ACPI</acronym>
	  evolves and supersedes the functionality provided previously by
	  <acronym class="acronym">APM</acronym>, <acronym class="acronym">PNPBIOS</acronym> and other technologies, and
	  provides facilities for controlling power consumption, machine
	  suspension, device enabling and disabling, etc.</p></dd><dt><a id="api-glossary"></a><span class="glossterm">Application Programming Interface</span></dt><dd class="glossdef"><p>A set of procedures, protocols and tools that specify the
	  canonical interaction of one or more program parts; how, when
	  and why they do work together, and what data they share or
	  operate on.</p></dd><dt><a id="apm-glossary"></a><span class="glossterm">Advanced Power Management</span></dt><dd class="glossdef"><p>An <acronym class="acronym">API</acronym> enabling the operating system to work
	  in conjunction with the <acronym class="acronym">BIOS</acronym> in order to achieve
	  power management.  <acronym class="acronym">APM</acronym> has been superseded by
	  the much more generic and powerful <acronym class="acronym">ACPI</acronym>
	  specification for most applications.</p></dd><dt><a id="apic-glossary"></a><span class="glossterm">Advanced Programmable Interrupt Controller</span></dt><dd class="glossdef"><p></p></dd><dt><a id="ata-glossary"></a><span class="glossterm">Advanced Technology Attachment</span></dt><dd class="glossdef"><p></p></dd><dt><a id="atm-glossary"></a><span class="glossterm">Asynchronous Transfer Mode</span></dt><dd class="glossdef"><p></p></dd><dt><a id="apop-glossary"></a><span class="glossterm">Authenticated Post Office Protocol</span></dt><dd class="glossdef"><p></p></dd><dt><a id="amd-glossary"></a><span class="glossterm">Automatic Mount Daemon</span></dt><dd class="glossdef"><p>A daemon that automatically mounts a filesystem when a file
          or directory within that filesystem is accessed.</p></dd></dl></div><div class="glossdiv"><h3 class="title">B</h3><dl><dt><span class="glossterm">BAR</span></dt><dd><p><a class="glosssee" href="#bar-glossary">Base Address Register</a>参照</p></dd><dt><span class="glossterm">BIND</span></dt><dd><p><a class="glosssee" href="#bind-glossary">Berkeley Internet Name Domain</a>参照</p></dd><dt><span class="glossterm">BIOS</span></dt><dd><p><a class="glosssee" href="#bios-glossary">Basic Input/Output System</a>参照</p></dd><dt><span class="glossterm">BSD</span></dt><dd><p><a class="glosssee" href="#bsd-glossary">Berkeley Software Distribution</a>参照</p></dd><dt><a id="bar-glossary"></a><span class="glossterm">Base Address Register</span></dt><dd class="glossdef"><p>The registers that determine which address range a <acronym class="acronym">PCI</acronym> device
	  will respond to.</p></dd><dt><a id="bios-glossary"></a><span class="glossterm">Basic Input/Output System</span></dt><dd class="glossdef"><p>The definition of <acronym class="acronym">BIOS</acronym> depends a bit on
	  the context. Some people refer to it as the <acronym class="acronym">ROM</acronym>
	  chip with a basic set of routines to provide an interface between
	  software and hardware.  Others refer to it as the set of routines
	  contained in the chip that help in bootstrapping the system.  Some
	  might also refer to it as the screen used to configure the
	  boostrapping process. The <acronym class="acronym">BIOS</acronym> is PC-specific
	  but other systems have something similar.</p></dd><dt><a id="bind-glossary"></a><span class="glossterm">Berkeley Internet Name Domain</span></dt><dd class="glossdef"><p>An implementation of the <acronym class="acronym">DNS</acronym> protocols.</p></dd><dt><a id="bsd-glossary"></a><span class="glossterm">Berkeley Software Distribution</span></dt><dd class="glossdef"><p>This is the name that the Computer Systems Research Group
	  (CSRG) at <a class="link" href="http://www.berkeley.edu" target="_top">The University
	  of California at Berkeley</a>
	  gave to their improvements and modifications to
	  AT&amp;T's 32V <span class="trademark">UNIX</span>®.
	  FreeBSD is a descendant of the CSRG work.</p></dd><dt><a id="bikeshed-glossary"></a><span class="glossterm">Bikeshed Building</span></dt><dd class="glossdef"><p>A phenomenon whereby many people will give an opinion on
	  an uncomplicated topic, whilst a complex topic receives little
	  or no discussion.  See the
	  <a class="link" href="../../../../doc/ja_JP.eucJP/books/faq/misc.html#BIKESHED-PAINTING" target="_top">FAQ</a> for
	  the origin of the term.</p></dd></dl></div><div class="glossdiv"><h3 class="title">C</h3><dl><dt><span class="glossterm">CD</span></dt><dd><p><a class="glosssee" href="#cd-glossary">Carrier Detect</a>参照</p></dd><dt><span class="glossterm">CHAP</span></dt><dd><p><a class="glosssee" href="#chap-glossary">Challenge Handshake Authentication Protocol</a>参照</p></dd><dt><span class="glossterm">CLIP</span></dt><dd><p><a class="glosssee" href="#clip-glossary">Classical <acronym class="acronym">IP</acronym> over <acronym class="acronym">ATM</acronym></a>参照</p></dd><dt><span class="glossterm">COFF</span></dt><dd><p><a class="glosssee" href="#coff-glossary">Common Object File Format</a>参照</p></dd><dt><span class="glossterm">CPU</span></dt><dd><p><a class="glosssee" href="#cpu-glossary">Central Processing Unit</a>参照</p></dd><dt><span class="glossterm">CTS</span></dt><dd><p><a class="glosssee" href="#cts-glossary">Clear To Send</a>参照</p></dd><dt><span class="glossterm">CVS</span></dt><dd><p><a class="glosssee" href="#cvs-glossary">Concurrent Versions System</a>参照</p></dd><dt><a id="cd-glossary"></a><span class="glossterm">Carrier Detect</span></dt><dd class="glossdef"><p>An <acronym class="acronym">RS232C</acronym> signal indicating that a carrier
	  has been detected.</p></dd><dt><a id="cpu-glossary"></a><span class="glossterm">Central Processing Unit</span></dt><dd class="glossdef"><p>Also known as the processor.  This is the brain of the
	  computer where all calculations take place.  There are a number of
	  different architectures with different instruction sets.  Among
	  the more well-known are the Intel-x86 and derivatives, Sun SPARC,
	  PowerPC, and Alpha.</p></dd><dt><a id="chap-glossary"></a><span class="glossterm">Challenge Handshake Authentication Protocol</span></dt><dd class="glossdef"><p>A method of authenticating a user, based on a secret shared
	  between client and server.</p></dd><dt><a id="clip-glossary"></a><span class="glossterm">Classical <acronym class="acronym">IP</acronym> over <acronym class="acronym">ATM</acronym></span></dt><dd class="glossdef"><p></p></dd><dt><a id="cts-glossary"></a><span class="glossterm">Clear To Send</span></dt><dd class="glossdef"><p>An <acronym class="acronym">RS232C</acronym> signal giving the remote system
          permission to send data.</p><p><a class="glossseealso" href="#rts-glossary">Request To Send</a>参照</p></dd><dt><a id="coff-glossary"></a><span class="glossterm">Common Object File Format</span></dt><dd class="glossdef"><p></p></dd><dt><a id="cvs-glossary"></a><span class="glossterm">Concurrent Versions System</span></dt><dd class="glossdef"><p>A version control system, providing a method of working with and
	  keeping track of many different revisions of files.  CVS provides the
	  ability to extract, merge and revert individual changes or sets of
	  changes, and offers the ability to keep track of which changes were
	  made, by who and for what reason.</p></dd></dl></div><div class="glossdiv"><h3 class="title">D</h3><dl><dt><span class="glossterm">DAC</span></dt><dd><p><a class="glosssee" href="#dac-glossary">Discretionary Access Control</a>参照</p></dd><dt><span class="glossterm">DDB</span></dt><dd><p><a class="glosssee" href="#ddb-glossary">Debugger</a>参照</p></dd><dt><span class="glossterm">DES</span></dt><dd><p><a class="glosssee" href="#des-glossary">Data Encryption Standard</a>参照</p></dd><dt><span class="glossterm">DHCP</span></dt><dd><p><a class="glosssee" href="#dhcp-glossary">Dynamic Host Configuration Protocol</a>参照</p></dd><dt><span class="glossterm">DNS</span></dt><dd><p><a class="glosssee" href="#dns-glossary">Domain Name System</a>参照</p></dd><dt><span class="glossterm">DSDT</span></dt><dd><p><a class="glosssee" href="#dsdt-glossary">Differentiated System Description Table</a>参照</p></dd><dt><span class="glossterm">DSR</span></dt><dd><p><a class="glosssee" href="#dsr-glossary">Data Set Ready</a>参照</p></dd><dt><span class="glossterm">DTR</span></dt><dd><p><a class="glosssee" href="#dtr-glossary">Data Terminal Ready</a>参照</p></dd><dt><span class="glossterm">DVMRP</span></dt><dd><p><a class="glosssee" href="#dvmrp-glossary">Distance-Vector Multicast Routing Protocol</a>参照</p></dd><dt><a id="dac-glossary"></a><span class="glossterm">Discretionary Access Control</span></dt><dd class="glossdef"><p></p></dd><dt><a id="des-glossary"></a><span class="glossterm">Data Encryption Standard</span></dt><dd class="glossdef"><p>A method of encrypting information, traditionally used as the
	  method of encryption for <span class="trademark">UNIX</span>® passwords and the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crypt&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">crypt</span>(3)</span></a>
	  function.</p></dd><dt><a id="dsr-glossary"></a><span class="glossterm">Data Set Ready</span></dt><dd class="glossdef"><p>An <acronym class="acronym">RS232C</acronym> signal sent from the modem to the
	  computer or terminal indicating a readiness to send and receive
	  data.</p><p><a class="glossseealso" href="#dtr-glossary">Data Terminal Ready</a>参照</p></dd><dt><a id="dtr-glossary"></a><span class="glossterm">Data Terminal Ready</span></dt><dd class="glossdef"><p>An <acronym class="acronym">RS232C</acronym> signal sent from the computer or
	  terminal to the modem indicating a readiness to send and receive
	  data.</p></dd><dt><a id="ddb-glossary"></a><span class="glossterm">Debugger</span></dt><dd class="glossdef"><p>An interactive in-kernel facility for examining the status of
	  a system, often used after a system has crashed to establish the
	  events surrounding the failure.</p></dd><dt><a id="dsdt-glossary"></a><span class="glossterm">Differentiated System Description Table</span></dt><dd class="glossdef"><p>An <acronym class="acronym">ACPI</acronym> table, supplying basic configuration
	  information about the base system.</p></dd><dt><a id="dvmrp-glossary"></a><span class="glossterm">Distance-Vector Multicast Routing Protocol</span></dt><dd class="glossdef"><p></p></dd><dt><a id="dns-glossary"></a><span class="glossterm">Domain Name System</span></dt><dd class="glossdef"><p>The system that converts humanly readable hostnames (i.e.,
	  mail.example.net) to Internet addresses and vice versa.</p></dd><dt><a id="dhcp-glossary"></a><span class="glossterm">Dynamic Host Configuration Protocol</span></dt><dd class="glossdef"><p>A protocol that dynamically assigns IP addresses to a computer
	  (host) when it requests one from the server.  The address assignment
	  is called a <span class="quote">「<span class="quote">lease</span>」</span>.</p></dd></dl></div><div class="glossdiv"><h3 class="title">E</h3><dl><dt><span class="glossterm">ECOFF</span></dt><dd><p><a class="glosssee" href="#ecoff-glossary">Extended <acronym class="acronym">COFF</acronym></a>参照</p></dd><dt><span class="glossterm">ELF</span></dt><dd><p><a class="glosssee" href="#elf-glossary">Executable and Linking Format</a>参照</p></dd><dt><span class="glossterm">ESP</span></dt><dd><p><a class="glosssee" href="#esp-glossary">Encapsulated Security Payload</a>参照</p></dd><dt><a id="esp-glossary"></a><span class="glossterm">Encapsulated Security Payload</span></dt><dd class="glossdef"><p></p></dd><dt><a id="elf-glossary"></a><span class="glossterm">Executable and Linking Format</span></dt><dd class="glossdef"><p></p></dd><dt><a id="ecoff-glossary"></a><span class="glossterm">Extended <acronym class="acronym">COFF</acronym></span></dt><dd class="glossdef"><p></p></dd></dl></div><div class="glossdiv"><h3 class="title">F</h3><dl><dt><span class="glossterm">FADT</span></dt><dd><p><a class="glosssee" href="#fadt-glossary">Fixed <acronym class="acronym">ACPI</acronym> Description Table</a>参照</p></dd><dt><span class="glossterm">FAT</span></dt><dd><p><a class="glosssee" href="#fat-glossary">File Allocation Table</a>参照</p></dd><dt><span class="glossterm">FAT16</span></dt><dd><p><a class="glosssee" href="#fat16-glossary">File Allocation Table (16-bit)</a>参照</p></dd><dt><span class="glossterm">FTP</span></dt><dd><p><a class="glosssee" href="#ftp-glossary">File Transfer Protocol</a>参照</p></dd><dt><a id="fat-glossary"></a><span class="glossterm">File Allocation Table</span></dt><dd class="glossdef"><p></p></dd><dt><a id="fat16-glossary"></a><span class="glossterm">File Allocation Table (16-bit)</span></dt><dd class="glossdef"><p></p></dd><dt><a id="ftp-glossary"></a><span class="glossterm">File Transfer Protocol</span></dt><dd class="glossdef"><p>A member of the family of high-level protocols implemented
	  on top of <acronym class="acronym">TCP</acronym> which can be used to transfer
	  files over a <acronym class="acronym">TCP/IP</acronym> network.</p></dd><dt><a id="fadt-glossary"></a><span class="glossterm">Fixed <acronym class="acronym">ACPI</acronym> Description Table</span></dt><dd class="glossdef"><p></p></dd></dl></div><div class="glossdiv"><h3 class="title">G</h3><dl><dt><span class="glossterm">GUI</span></dt><dd><p><a class="glosssee" href="#gui-glossary">Graphical User Interface</a>参照</p></dd><dt><a id="giant-glossary"></a><span class="glossterm">Giant</span></dt><dd class="glossdef"><p>The name of a mutual exclusion mechanism
	  (a <code class="literal">sleep mutex</code>) that protects a large
	  set of kernel resources.  Although a simple locking mechanism
	  was adequate in the days where a machine might have only
	  a few dozen processes, one networking card, and certainly
	  only one processor, in current times it is an unacceptable
	  performance bottleneck.  FreeBSD developers are actively working
	  to replace it with locks that protect individual resources,
	  which will allow a much greater degree of parallelism for
	  both single-processor and multi-processor machines.</p></dd><dt><a id="gui-glossary"></a><span class="glossterm">Graphical User Interface</span></dt><dd class="glossdef"><p>A system where the user and computer interact with
          graphics.</p></dd></dl></div><div class="glossdiv"><h3 class="title">H</h3><dl><dt><span class="glossterm">HTML</span></dt><dd><p><a class="glosssee" href="#html-glossary">HyperText Markup Language</a>参照</p></dd><dt><span class="glossterm">HUP</span></dt><dd><p><a class="glosssee" href="#hup-glossary">HangUp</a>参照</p></dd><dt><a id="hup-glossary"></a><span class="glossterm">HangUp</span></dt><dd class="glossdef"><p></p></dd><dt><a id="html-glossary"></a><span class="glossterm">HyperText Markup Language</span></dt><dd class="glossdef"><p>The markup language used to create web pages.</p></dd></dl></div><div class="glossdiv"><h3 class="title">I</h3><dl><dt><span class="glossterm">I/O</span></dt><dd><p><a class="glosssee" href="#io-glossary">Input/Output</a>参照</p></dd><dt><span class="glossterm">IASL</span></dt><dd><p><a class="glosssee" href="#iasl-glossary">Intel’s <acronym class="acronym">ASL</acronym> compiler</a>参照</p></dd><dt><span class="glossterm">IMAP</span></dt><dd><p><a class="glosssee" href="#imap-glossary">Internet Message Access Protocol</a>参照</p></dd><dt><span class="glossterm">IP</span></dt><dd><p><a class="glosssee" href="#ip-glossary">Internet Protocol</a>参照</p></dd><dt><span class="glossterm">IPFW</span></dt><dd><p><a class="glosssee" href="#ipfw-glossary"><acronym class="acronym">IP</acronym> Firewall</a>参照</p></dd><dt><span class="glossterm">IPP</span></dt><dd><p><a class="glosssee" href="#ipp-glossary">Internet Printing Protocol</a>参照</p></dd><dt><span class="glossterm">IPv4</span></dt><dd><p><a class="glosssee" href="#ipv4-glossary"><acronym class="acronym">IP</acronym> Version 4</a>参照</p></dd><dt><span class="glossterm">IPv6</span></dt><dd><p><a class="glosssee" href="#ipv6-glossary"><acronym class="acronym">IP</acronym> Version 6</a>参照</p></dd><dt><span class="glossterm">ISP</span></dt><dd><p><a class="glosssee" href="#isp-glossary">Internet Service Provider</a>参照</p></dd><dt><a id="ipfw-glossary"></a><span class="glossterm"><acronym class="acronym">IP</acronym> Firewall</span></dt><dd class="glossdef"><p></p></dd><dt><a id="ipv4-glossary"></a><span class="glossterm"><acronym class="acronym">IP</acronym> Version 4</span></dt><dd class="glossdef"><p>The <acronym class="acronym">IP</acronym> protocol version 4, which uses 32 bits
	  for addressing.  This version is still the most widely used, but it
	  is slowly being replaced with <acronym class="acronym">IPv6</acronym>.</p><p><a class="glossseealso" href="#ipv6-glossary"><acronym class="acronym">IP</acronym> Version 6</a>参照</p></dd><dt><a id="ipv6-glossary"></a><span class="glossterm"><acronym class="acronym">IP</acronym> Version 6</span></dt><dd class="glossdef"><p>The new <acronym class="acronym">IP</acronym> protocol. Invented because the
	  address space in <acronym class="acronym">IPv4</acronym> is running out.  Uses 128
	  bits for addressing.</p></dd><dt><a id="io-glossary"></a><span class="glossterm">Input/Output</span></dt><dd class="glossdef"><p></p></dd><dt><a id="iasl-glossary"></a><span class="glossterm">Intel’s <acronym class="acronym">ASL</acronym> compiler</span></dt><dd class="glossdef"><p>Intel’s compiler for converting <acronym class="acronym">ASL</acronym> into
	  <acronym class="acronym">AML</acronym>.</p></dd><dt><a id="imap-glossary"></a><span class="glossterm">Internet Message Access Protocol</span></dt><dd class="glossdef"><p>A protocol for accessing email messages on a mail server,
	  characterised by the messages usually being kept on the server as
	  opposed to being downloaded to the mail reader client.</p><p><a class="glossseealso" href="#pop3-glossary">Post Office Protocol Version 3</a>参照</p></dd><dt><a id="ipp-glossary"></a><span class="glossterm">Internet Printing Protocol</span></dt><dd class="glossdef"><p></p></dd><dt><a id="ip-glossary"></a><span class="glossterm">Internet Protocol</span></dt><dd class="glossdef"><p>The packet transmitting protocol that is the basic protocol on
	  the Internet.  Originally developed at the U.S. Department of
	  Defense and an extremely important part of the <acronym class="acronym">TCP/IP
	  </acronym> stack.  Without the Internet Protocol, the Internet
	  would not have become what it is today.  For more information, see
	  <a class="link" href="ftp://ftp.rfc-editor.org/in-notes/rfc791.txt" target="_top">
	  RFC 791</a>.</p></dd><dt><a id="isp-glossary"></a><span class="glossterm">Internet Service Provider</span></dt><dd class="glossdef"><p>A company that provides access to the Internet.</p></dd></dl></div><div class="glossdiv"><h3 class="title">K</h3><dl><dt><a id="kame-glossary"></a><span class="glossterm">KAME</span></dt><dd class="glossdef"><p>Japanese for <span class="quote">「<span class="quote">turtle</span>」</span>, the term KAME is used
	  in computing circles to refer to the <a class="link" href="http://www.kame.net/" target="_top">KAME Project</a>, who work on
	  an implementation of <acronym class="acronym">IPv6</acronym>.</p></dd><dt><span class="glossterm">KDC</span></dt><dd><p><a class="glosssee" href="#kdc-glossary">Key Distribution Center</a>参照</p></dd><dt><span class="glossterm">KLD</span></dt><dd><p><a class="glosssee" href="#kld-glossary">Kernel ld(1)</a>参照</p></dd><dt><span class="glossterm">KSE</span></dt><dd><p><a class="glosssee" href="#kse-glossary">Kernel Scheduler Entities</a>参照</p></dd><dt><span class="glossterm">KVA</span></dt><dd><p><a class="glosssee" href="#kva-glossary">Kernel Virtual Address</a>参照</p></dd><dt><span class="glossterm">Kbps</span></dt><dd><p><a class="glosssee" href="#kbps-glossary">Kilo Bits Per Second</a>参照</p></dd><dt><a id="kld-glossary"></a><span class="glossterm">Kernel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ld&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ld</span>(1)</span></a></span></dt><dd class="glossdef"><p>A method of dynamically loading functionality into a FreeBSD kernel
	  without rebooting the system.</p></dd><dt><a id="kse-glossary"></a><span class="glossterm">Kernel Scheduler Entities</span></dt><dd class="glossdef"><p>A kernel-supported threading system.  See the <a class="link" href="http://www.FreeBSD.org/kse" target="_top">project home page</a>
	  for further details.</p></dd><dt><a id="kva-glossary"></a><span class="glossterm">Kernel Virtual Address</span></dt><dd class="glossdef"><p></p></dd><dt><a id="kdc-glossary"></a><span class="glossterm">Key Distribution Center</span></dt><dd class="glossdef"><p></p></dd><dt><a id="kbps-glossary"></a><span class="glossterm">Kilo Bits Per Second</span></dt><dd class="glossdef"><p>Used to measure bandwidth (how much data can pass a given
	  point at a specified amount of time).  Alternates to the Kilo
	  prefix include Mega, Giga, Tera, and so forth.</p></dd></dl></div><div class="glossdiv"><h3 class="title">L</h3><dl><dt><span class="glossterm">LAN</span></dt><dd><p><a class="glosssee" href="#lan-glossary">Local Area Network</a>参照</p></dd><dt><span class="glossterm">LOR</span></dt><dd><p><a class="glosssee" href="#lor-glossary">Lock Order Reversal</a>参照</p></dd><dt><span class="glossterm">LPD</span></dt><dd><p><a class="glosssee" href="#lpd-glossary">Line Printer Daemon</a>参照</p></dd><dt><a id="lpd-glossary"></a><span class="glossterm">Line Printer Daemon</span></dt><dd class="glossdef"><p></p></dd><dt><a id="lan-glossary"></a><span class="glossterm">Local Area Network</span></dt><dd class="glossdef"><p>A network used on a local area, e.g. office, home, or so forth.
	  </p></dd><dt><a id="lor-glossary"></a><span class="glossterm">Lock Order Reversal</span></dt><dd class="glossdef"><p>The FreeBSD kernel uses a number of resource locks to
	  arbitrate contention for those resources.  A run-time
	  lock diagnostic system found in FreeBSD-CURRENT kernels
	  (but removed for releases), called <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=witness&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">witness</span>(4)</span></a>,
	  detects the potential for deadlocks due to locking errors.
	  (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=witness&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">witness</span>(4)</span></a> is actually slightly conservative, so
	  it is possible to get false positives.)  A true positive
	  report indicates that <span class="quote">「<span class="quote">if you were unlucky, a deadlock would
	  have happened here</span>」</span>.</p><p>True positive LORs tend to get fixed quickly, so
	  check http://lists.FreeBSD.org/mailman/listinfo/freebsd-current and the
	  <a class="link" href="http://sources.zabbadoz.net/freebsd/lor.html" target="_top">
	  LORs Seen</a> page before posting to the mailing lists.</p></dd></dl></div><div class="glossdiv"><h3 class="title">M</h3><dl><dt><span class="glossterm">MAC</span></dt><dd><p><a class="glosssee" href="#mac-glossary">Mandatory Access Control</a>参照</p></dd><dt><span class="glossterm">MADT</span></dt><dd><p><a class="glosssee" href="#madt-glossary">Multiple <acronym class="acronym">APIC</acronym> Description Table</a>参照</p></dd><dt><span class="glossterm">MFC</span></dt><dd><p><a class="glosssee" href="#mfc-glossary">Merge From Current</a>参照</p></dd><dt><span class="glossterm">MFP4</span></dt><dd><p><a class="glosssee" href="#mfp4-glossary">Merge From Perforce</a>参照</p></dd><dt><span class="glossterm">MFS</span></dt><dd><p><a class="glosssee" href="#mfs-glossary">Merge From Stable</a>参照</p></dd><dt><span class="glossterm">MIT</span></dt><dd><p><a class="glosssee" href="#mit-glossary">Massachusetts Institute of Technology</a>参照</p></dd><dt><span class="glossterm">MLS</span></dt><dd><p><a class="glosssee" href="#mls-glossary">Multi-Level Security</a>参照</p></dd><dt><span class="glossterm">MOTD</span></dt><dd><p><a class="glosssee" href="#motd-glossary">Message Of The Day</a>参照</p></dd><dt><span class="glossterm">MTA</span></dt><dd><p><a class="glosssee" href="#mta-glossary">Mail Transfer Agent</a>参照</p></dd><dt><span class="glossterm">MUA</span></dt><dd><p><a class="glosssee" href="#mua-glossary">Mail User Agent</a>参照</p></dd><dt><a id="mta-glossary"></a><span class="glossterm">Mail Transfer Agent</span></dt><dd class="glossdef"><p>An application used to transfer email.  An
	  <acronym class="acronym">MTA</acronym> has traditionally been part of the BSD
	  base system.  Today Sendmail is included in the base system, but
	  there are many other <acronym class="acronym">MTA</acronym>s, such as postfix,
	  qmail and Exim.</p></dd><dt><a id="mua-glossary"></a><span class="glossterm">Mail User Agent</span></dt><dd class="glossdef"><p>An application used by users to display and write email.</p></dd><dt><a id="mac-glossary"></a><span class="glossterm">Mandatory Access Control</span></dt><dd class="glossdef"><p></p></dd><dt><a id="mit-glossary"></a><span class="glossterm">Massachusetts Institute of Technology</span></dt><dd class="glossdef"><p></p></dd><dt><a id="mfc-glossary"></a><span class="glossterm">Merge From Current</span></dt><dd class="glossdef"><p>To merge functionality or a patch from the -CURRENT
	  branch to another, most often -STABLE.</p></dd><dt><a id="mfp4-glossary"></a><span class="glossterm">Merge From Perforce</span></dt><dd class="glossdef"><p>To merge functionality or a patch from the Perforce
	  repository to the -CURRENT branch.</p><p><a class="glossseealso" href="#perforce-glossary">Perforce</a>参照</p></dd><dt><a id="mfs-glossary"></a><span class="glossterm">Merge From Stable</span></dt><dd class="glossdef"><p>In the normal course of FreeBSD development, a change will
	  be committed to the -CURRENT branch for testing before being
	  merged to -STABLE.  On rare occasions, a change will go into
	  -STABLE first and then be merged to -CURRENT.</p><p>This term is also used when a patch is merged from -STABLE
	  to a security branch.</p><p><a class="glossseealso" href="#mfc-glossary">Merge From Current</a>参照</p></dd><dt><a id="motd-glossary"></a><span class="glossterm">Message Of The Day</span></dt><dd class="glossdef"><p>A message, usually shown on login, often used to
	  distribute information to users of the system.</p></dd><dt><a id="mls-glossary"></a><span class="glossterm">Multi-Level Security</span></dt><dd class="glossdef"><p></p></dd><dt><a id="madt-glossary"></a><span class="glossterm">Multiple <acronym class="acronym">APIC</acronym> Description Table</span></dt><dd class="glossdef"><p></p></dd></dl></div><div class="glossdiv"><h3 class="title">N</h3><dl><dt><span class="glossterm">NAT</span></dt><dd><p><a class="glosssee" href="#nat-glossary">Network Address Translation</a>参照</p></dd><dt><span class="glossterm">NDISulator</span></dt><dd><p><a class="glosssee" href="#projectevil-glossary">Project Evil</a>参照</p></dd><dt><span class="glossterm">NFS</span></dt><dd><p><a class="glosssee" href="#nfs-glossary">Network File System</a>参照</p></dd><dt><span class="glossterm">NTFS</span></dt><dd><p><a class="glosssee" href="#ntfs-glossary">New Technology File System</a>参照</p></dd><dt><span class="glossterm">NTP</span></dt><dd><p><a class="glosssee" href="#ntp-glossary">Network Time Protocol</a>参照</p></dd><dt><a id="nat-glossary"></a><span class="glossterm">Network Address Translation</span></dt><dd class="glossdef"><p>A technique where <acronym class="acronym">IP</acronym> packets are rewritten
	  on the way through a gateway, enabling many machines behind the
	  gateway to effectively share a single <acronym class="acronym">IP</acronym> address.</p></dd><dt><a id="nfs-glossary"></a><span class="glossterm">Network File System</span></dt><dd class="glossdef"><p></p></dd><dt><a id="ntfs-glossary"></a><span class="glossterm">New Technology File System</span></dt><dd class="glossdef"><p>A filesystem developed by Microsoft and available in its
	  <span class="quote">「<span class="quote">New Technology</span>」</span> operating systems, such as
	  <span class="trademark">Windows</span>® 2000, <span class="trademark">Windows NT</span>® and <span class="trademark">Windows</span>® XP.</p></dd><dt><a id="ntp-glossary"></a><span class="glossterm">Network Time Protocol</span></dt><dd class="glossdef"><p>A means of synchronizing clocks over a network.</p></dd></dl></div><div class="glossdiv"><h3 class="title">O</h3><dl><dt><span class="glossterm">OBE</span></dt><dd><p><a class="glosssee" href="#obe-glossary">Overtaken By Events</a>参照</p></dd><dt><span class="glossterm">ODMR</span></dt><dd><p><a class="glosssee" href="#odmr-glossary">On-Demand Mail Relay</a>参照</p></dd><dt><span class="glossterm">OS</span></dt><dd><p><a class="glosssee" href="#os-glossary">Operating System</a>参照</p></dd><dt><a id="odmr-glossary"></a><span class="glossterm">On-Demand Mail Relay</span></dt><dd class="glossdef"><p></p></dd><dt><a id="os-glossary"></a><span class="glossterm">Operating System</span></dt><dd class="glossdef"><p>A set of programs, libraries and tools that provide access to
	  the hardware resources of a computer.  Operating systems range
	  today from simplistic designs that support only one program
	  running at a time, accessing only one device to fully
	  multi-user, multi-tasking and multi-process systems that can
	  serve thousands of users simultaneously, each of them running
	  dozens of different applications.</p></dd><dt><a id="obe-glossary"></a><span class="glossterm">Overtaken By Events</span></dt><dd class="glossdef"><p>Indicates a suggested change (such as a Problem Report
	  or a feature request) which is no longer relevant or
	  applicable due to such things as later changes to FreeBSD,
	  changes in networking standards, the affected hardware
	  having since become obsolete, and so forth.</p></dd></dl></div><div class="glossdiv"><h3 class="title">P</h3><dl><dt><span class="glossterm">p4</span></dt><dd><p><a class="glosssee" href="#perforce-glossary">Perforce</a>参照</p></dd><dt><span class="glossterm">PAE</span></dt><dd><p><a class="glosssee" href="#pae-glossary">Physical Address Extensions</a>参照</p></dd><dt><span class="glossterm">PAM</span></dt><dd><p><a class="glosssee" href="#pam-glossary">Pluggable Authentication Modules</a>参照</p></dd><dt><span class="glossterm">PAP</span></dt><dd><p><a class="glosssee" href="#pap-glossary">Password Authentication Protocol</a>参照</p></dd><dt><span class="glossterm">PC</span></dt><dd><p><a class="glosssee" href="#pc-glossary">Personal Computer</a>参照</p></dd><dt><span class="glossterm">PCNSFD</span></dt><dd><p><a class="glosssee" href="#pcnfsd-glossary">Personal Computer Network File System Daemon</a>参照</p></dd><dt><span class="glossterm">PDF</span></dt><dd><p><a class="glosssee" href="#pdf-glossary">Portable Document Format</a>参照</p></dd><dt><span class="glossterm">PID</span></dt><dd><p><a class="glosssee" href="#pid-glossary">Process ID</a>参照</p></dd><dt><span class="glossterm">POLA</span></dt><dd><p><a class="glosssee" href="#pola-glossary">Principle Of Least Astonishment</a>参照</p></dd><dt><span class="glossterm">POP</span></dt><dd><p><a class="glosssee" href="#pop-glossary">Post Office Protocol</a>参照</p></dd><dt><span class="glossterm">POP3</span></dt><dd><p><a class="glosssee" href="#pop3-glossary">Post Office Protocol Version 3</a>参照</p></dd><dt><span class="glossterm">PPD</span></dt><dd><p><a class="glosssee" href="#ppd-glossary">PostScript Printer Description</a>参照</p></dd><dt><span class="glossterm">PPP</span></dt><dd><p><a class="glosssee" href="#ppp-glossary">Point-to-Point Protocol</a>参照</p></dd><dt><span class="glossterm">PPPoA</span></dt><dd><p><a class="glosssee" href="#pppoa-glossary"><acronym class="acronym">PPP</acronym> over <acronym class="acronym">ATM</acronym></a>参照</p></dd><dt><span class="glossterm">PPPoE</span></dt><dd><p><a class="glosssee" href="#pppoe-glossary"><acronym class="acronym">PPP</acronym> over <acronym class="acronym">Ethernet</acronym></a>参照</p></dd><dt><a id="pppoa-glossary"></a><span class="glossterm"><acronym class="acronym">PPP</acronym> over <acronym class="acronym">ATM</acronym></span></dt><dd class="glossdef"><p></p></dd><dt><a id="pppoe-glossary"></a><span class="glossterm"><acronym class="acronym">PPP</acronym> over <acronym class="acronym">Ethernet</acronym></span></dt><dd class="glossdef"><p></p></dd><dt><span class="glossterm">PR</span></dt><dd><p><a class="glosssee" href="#pr-glossary">Problem Report</a>参照</p></dd><dt><span class="glossterm">PXE</span></dt><dd><p><a class="glosssee" href="#pxe-glossary">Preboot eXecution Environment</a>参照</p></dd><dt><a id="pap-glossary"></a><span class="glossterm">Password Authentication Protocol</span></dt><dd class="glossdef"><p></p></dd><dt><a id="perforce-glossary"></a><span class="glossterm">Perforce</span></dt><dd class="glossdef"><p>A source code control product made by
	  <a class="link" href="http://www.perforce.com/" target="_top">Perforce Software</a>
	  which is more advanced than CVS.  Although not open source, its use
	  is free of charge to open-source projects such as FreeBSD.</p><p>Some FreeBSD developers use a Perforce repository as a staging
	  area for code that is considered too experimental for the
	  -CURRENT branch.</p></dd><dt><a id="pc-glossary"></a><span class="glossterm">Personal Computer</span></dt><dd class="glossdef"><p></p></dd><dt><a id="pcnfsd-glossary"></a><span class="glossterm">Personal Computer Network File System Daemon</span></dt><dd class="glossdef"><p></p></dd><dt><a id="pae-glossary"></a><span class="glossterm">Physical Address Extensions</span></dt><dd class="glossdef"><p>A method of enabling access to up to 64 GB of <acronym class="acronym">RAM</acronym> on
	  systems which only physically have a 32-bit wide address space
	  (and would therefore be limited to 4 GB without PAE).</p></dd><dt><a id="pam-glossary"></a><span class="glossterm">Pluggable Authentication Modules</span></dt><dd class="glossdef"><p></p></dd><dt><a id="ppp-glossary"></a><span class="glossterm">Point-to-Point Protocol</span></dt><dd class="glossdef"><p></p></dd><dt><a id="pointyhat"></a><span class="glossterm">Pointy Hat</span></dt><dd class="glossdef"><p>A mythical piece of headgear, much like a
	  <code class="literal">dunce cap</code>, awarded to any FreeBSD
	  committer who breaks the build, makes revision numbers
	  go backwards, or creates any other kind of havoc in
	  the source base.  Any committer worth his or her salt
	  will soon accumulate a large collection.  The usage is
	  (almost always?) humorous.</p></dd><dt><a id="pdf-glossary"></a><span class="glossterm">Portable Document Format</span></dt><dd class="glossdef"><p></p></dd><dt><a id="pop-glossary"></a><span class="glossterm">Post Office Protocol</span></dt><dd class="glossdef"><p></p><p><a class="glossseealso" href="#pop3-glossary">Post Office Protocol Version 3</a>参照</p></dd><dt><a id="pop3-glossary"></a><span class="glossterm">Post Office Protocol Version 3</span></dt><dd class="glossdef"><p>A protocol for accessing email messages on a mail server,
	  characterised by the messages usually being downloaded from the
	  server to the client, as opposed to remaining on the server.</p><p><a class="glossseealso" href="#imap-glossary">Internet Message Access Protocol</a>参照</p></dd><dt><a id="ppd-glossary"></a><span class="glossterm">PostScript Printer Description</span></dt><dd class="glossdef"><p></p></dd><dt><a id="pxe-glossary"></a><span class="glossterm">Preboot eXecution Environment</span></dt><dd class="glossdef"><p></p></dd><dt><a id="pola-glossary"></a><span class="glossterm">Principle Of Least Astonishment</span></dt><dd class="glossdef"><p>As FreeBSD evolves, changes visible to the user should be
	  kept as unsurprising as possible.  For example, arbitrarily
	  rearranging system startup variables in
	  <code class="filename">/etc/defaults/rc.conf</code> violates
	  <acronym class="acronym">POLA</acronym>.  Developers consider
	  <acronym class="acronym">POLA</acronym> when contemplating user-visible
	  system changes.</p></dd><dt><a id="pr-glossary"></a><span class="glossterm">Problem Report</span></dt><dd class="glossdef"><p>A description of some kind of problem that has been
	  found in either the FreeBSD source or documentation.  See
	  <a class="link" href="../../../../doc/ja_JP.eucJP/articles/problem-reports/index.html" target="_top">
	  Writing FreeBSD Problem Reports</a>.</p></dd><dt><a id="pid-glossary"></a><span class="glossterm">Process ID</span></dt><dd class="glossdef"><p>A number, unique to a particular process on a system,
	  which identifies it and allows actions to be taken against it.</p></dd><dt><a id="projectevil-glossary"></a><span class="glossterm">Project Evil</span></dt><dd class="glossdef"><p>The working title for the <acronym class="acronym">NDISulator</acronym>,
	  written by Bill Paul, who named it referring to how awful
	  it is (from a philosophical standpoint) to need to have
	  something like this in the first place.  The
	  <acronym class="acronym">NDISulator</acronym> is a special compatibility
	  module to allow Microsoft Windows™ NDIS miniport
	  network drivers to be used with FreeBSD/i386.  This is usually
	  the only way to use cards where the driver is closed-source.
	  See <code class="filename">src/sys/compat/ndis/subr_ndis.c</code>.</p></dd></dl></div><div class="glossdiv"><h3 class="title">R</h3><dl><dt><span class="glossterm">RA</span></dt><dd><p><a class="glosssee" href="#ra-glossary">Router Advertisement</a>参照</p></dd><dt><span class="glossterm">RAID</span></dt><dd><p><a class="glosssee" href="#raid-glossary">Redundant Array of Inexpensive Disks</a>参照</p></dd><dt><span class="glossterm">RAM</span></dt><dd><p><a class="glosssee" href="#ram-glossary">Random Access Memory</a>参照</p></dd><dt><span class="glossterm">RD</span></dt><dd><p><a class="glosssee" href="#rd-glossary">Received Data</a>参照</p></dd><dt><span class="glossterm">RFC</span></dt><dd><p><a class="glosssee" href="#rfc-glossary">Request For Comments</a>参照</p></dd><dt><span class="glossterm">RISC</span></dt><dd><p><a class="glosssee" href="#risc-glossary">Reduced Instruction Set Computer</a>参照</p></dd><dt><span class="glossterm">RPC</span></dt><dd><p><a class="glosssee" href="#rpc-glossary">Remote Procedure Call</a>参照</p></dd><dt><span class="glossterm">RS232C</span></dt><dd><p><a class="glosssee" href="#rs232c-glossary">Recommended Standard 232C</a>参照</p></dd><dt><span class="glossterm">RTS</span></dt><dd><p><a class="glosssee" href="#rts-glossary">Request To Send</a>参照</p></dd><dt><a id="ram-glossary"></a><span class="glossterm">Random Access Memory</span></dt><dd class="glossdef"><p></p></dd><dt><a id="rcs-glossary"></a><span class="glossterm">Revision Control System</span></dt><dd class="glossdef"><p>The <span class="emphasis"><em>Revision Control System</em></span>
          (<acronym class="acronym">RCS</acronym>) is one of the oldest software suites
          that implement <span class="quote">「<span class="quote">revision control</span>」</span> for plain
          files.  It allows the storage, retrieval, archival, logging,
          identification and merging of multiple revisions for each
          file.  RCS consists of many small tools that work together.
          It lacks some of the features found in more modern revision
          control systems, like CVS or Subversion, but it is very simple
          to install, configure, and start using for a small set of
          files.  Implementations of RCS can be found on every major
          UNIX-like OS.</p><p><a class="glossseealso" href="#cvs-glossary">Concurrent Versions System</a>, <a class="glossseealso" href="#svn-glossary">Subversion</a>参照</p></dd><dt><a id="rd-glossary"></a><span class="glossterm">Received Data</span></dt><dd class="glossdef"><p>An <acronym class="acronym">RS232C</acronym> pin or wire that data is
	  received on.</p><p><a class="glossseealso" href="#td-glossary">Transmitted Data</a>参照</p></dd><dt><a id="rs232c-glossary"></a><span class="glossterm">Recommended Standard 232C</span></dt><dd class="glossdef"><p>A standard for communications between serial devices.</p></dd><dt><a id="risc-glossary"></a><span class="glossterm">Reduced Instruction Set Computer</span></dt><dd class="glossdef"><p>An approach to processor design where the operations the hardware
	  can perform are simplified but made as general purpose as possible.
	  This can lead to lower power consumption, fewer transistors and in
	  some cases, better performance and increased code density.  Examples
	  of RISC processors include the Alpha, <span class="trademark">SPARC</span>®, <span class="trademark">ARM</span>® and
	  <span class="trademark">PowerPC</span>®.</p></dd><dt><a id="raid-glossary"></a><span class="glossterm">Redundant Array of Inexpensive Disks</span></dt><dd class="glossdef"><p></p></dd><dt><a id="rpc-glossary"></a><span class="glossterm">Remote Procedure Call</span></dt><dd class="glossdef"><p></p></dd><dt><span class="glossterm">repocopy</span></dt><dd><p><a class="glosssee" href="#repocopy-glossary">Repository Copy</a>参照</p></dd><dt><a id="repocopy-glossary"></a><span class="glossterm">Repository Copy</span></dt><dd class="glossdef"><p>A direct copying of files within the CVS repository.</p><p>Without a repocopy, if a file needed to be copied or
	  moved to another place in the repository, the committer would
	  run <code class="command">cvs add</code> to put the file in its new
	  location, and then <code class="command">cvs rm</code> on the old file
	  if the old copy was being removed.</p><p>The disadvantage of this method is that the history
	  (i.e. the entries in the CVS logs) of the file would not be
	  copied to the new location. As the FreeBSD Project considers
	  this history very useful, a repository copy is often used
	  instead. This is a process where one of the repository meisters
	  will copy the files directly within the repository, rather than
	  using the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a> program.</p></dd><dt><a id="rfc-glossary"></a><span class="glossterm">Request For Comments</span></dt><dd class="glossdef"><p>A set of documents defining Internet standards, protocols, and
	  so forth.  See
	  <a class="link" href="http://www.rfc-editor.org/" target="_top">www.rfc-editor.org</a>.
	  </p><p>Also used as a general term when someone has a suggested change
	  and wants feedback.</p></dd><dt><a id="rts-glossary"></a><span class="glossterm">Request To Send</span></dt><dd class="glossdef"><p>An <acronym class="acronym">RS232C</acronym> signal requesting that the remote
	  system commences transmission of data.</p><p><a class="glossseealso" href="#cts-glossary">Clear To Send</a>参照</p></dd><dt><a id="ra-glossary"></a><span class="glossterm">Router Advertisement</span></dt><dd class="glossdef"><p></p></dd></dl></div><div class="glossdiv"><h3 class="title">S</h3><dl><dt><span class="glossterm">SCI</span></dt><dd><p><a class="glosssee" href="#sci-glossary">System Control Interrupt</a>参照</p></dd><dt><span class="glossterm">SCSI</span></dt><dd><p><a class="glosssee" href="#scsi-glossary">Small Computer System Interface</a>参照</p></dd><dt><span class="glossterm">SG</span></dt><dd><p><a class="glosssee" href="#sg-glossary">Signal Ground</a>参照</p></dd><dt><span class="glossterm">SMB</span></dt><dd><p><a class="glosssee" href="#smb-glossary">Server Message Block</a>参照</p></dd><dt><span class="glossterm">SMP</span></dt><dd><p><a class="glosssee" href="#smp-glossary">Symmetric MultiProcessor</a>参照</p></dd><dt><span class="glossterm">SMTP</span></dt><dd><p><a class="glosssee" href="#smtp-glossary">Simple Mail Transfer Protocol</a>参照</p></dd><dt><span class="glossterm">SMTP AUTH</span></dt><dd><p><a class="glosssee" href="#smtpauth-glossary"><acronym class="acronym">SMTP</acronym> Authentication</a>参照</p></dd><dt><span class="glossterm">SSH</span></dt><dd><p><a class="glosssee" href="#ssh-glossary">Secure Shell</a>参照</p></dd><dt><span class="glossterm">STR</span></dt><dd><p><a class="glosssee" href="#str-glossary">Suspend To <acronym class="acronym">RAM</acronym></a>参照</p></dd><dt><span class="glossterm">SVN</span></dt><dd><p><a class="glosssee" href="#svn-glossary">Subversion</a>参照</p></dd><dt><a id="smtpauth-glossary"></a><span class="glossterm"><acronym class="acronym">SMTP</acronym> Authentication</span></dt><dd class="glossdef"><p></p></dd><dt><a id="smb-glossary"></a><span class="glossterm">Server Message Block</span></dt><dd class="glossdef"><p></p></dd><dt><a id="sg-glossary"></a><span class="glossterm">Signal Ground</span></dt><dd class="glossdef"><p>An <acronym class="acronym">RS232</acronym> pin or wire that is the ground
	  reference for the signal.</p></dd><dt><a id="smtp-glossary"></a><span class="glossterm">Simple Mail Transfer Protocol</span></dt><dd class="glossdef"><p></p></dd><dt><a id="ssh-glossary"></a><span class="glossterm">Secure Shell</span></dt><dd class="glossdef"><p></p></dd><dt><a id="scsi-glossary"></a><span class="glossterm">Small Computer System Interface</span></dt><dd class="glossdef"><p></p></dd><dt><a id="svn-glossary"></a><span class="glossterm">Subversion</span></dt><dd class="glossdef"><p>Subversion is a version control system, similar to CVS, but
	  with an expanded feature list.</p><p><a class="glossseealso" href="#cvs-glossary">Concurrent Versions System</a>参照</p></dd><dt><a id="str-glossary"></a><span class="glossterm">Suspend To <acronym class="acronym">RAM</acronym></span></dt><dd class="glossdef"><p></p></dd><dt><a id="smp-glossary"></a><span class="glossterm">Symmetric MultiProcessor</span></dt><dd class="glossdef"><p></p></dd><dt><a id="sci-glossary"></a><span class="glossterm">System Control Interrupt</span></dt><dd class="glossdef"><p></p></dd></dl></div><div class="glossdiv"><h3 class="title">T</h3><dl><dt><span class="glossterm">TCP</span></dt><dd><p><a class="glosssee" href="#tcp-glossary">Transmission Control Protocol</a>参照</p></dd><dt><span class="glossterm">TCP/IP</span></dt><dd><p><a class="glosssee" href="#tcpip-glossary">Transmission Control Protocol/Internet Protocol</a>参照</p></dd><dt><span class="glossterm">TD</span></dt><dd><p><a class="glosssee" href="#td-glossary">Transmitted Data</a>参照</p></dd><dt><span class="glossterm">TFTP</span></dt><dd><p><a class="glosssee" href="#tftp-glossary">Trivial <acronym class="acronym">FTP</acronym></a>参照</p></dd><dt><span class="glossterm">TGT</span></dt><dd><p><a class="glosssee" href="#tgt-glossary">Ticket-Granting Ticket</a>参照</p></dd><dt><span class="glossterm">TSC</span></dt><dd><p><a class="glosssee" href="#tsc-glossary">Time Stamp Counter</a>参照</p></dd><dt><a id="tgt-glossary"></a><span class="glossterm">Ticket-Granting Ticket</span></dt><dd class="glossdef"><p></p></dd><dt><a id="tsc-glossary"></a><span class="glossterm">Time Stamp Counter</span></dt><dd class="glossdef"><p>A profiling counter internal to modern <span class="trademark">Pentium</span>® processors
	  that counts core frequency clock ticks.</p></dd><dt><a id="tcp-glossary"></a><span class="glossterm">Transmission Control Protocol</span></dt><dd class="glossdef"><p>A protocol that sits on top of (e.g.) the <acronym class="acronym">IP</acronym>
	  protocol and guarantees that packets are delivered in a reliable,
	  ordered, fashion.</p></dd><dt><a id="tcpip-glossary"></a><span class="glossterm">Transmission Control Protocol/Internet Protocol</span></dt><dd class="glossdef"><p>The term for the combination of the <acronym class="acronym">TCP</acronym>
	  protocol running over the <acronym class="acronym">IP</acronym> protocol.  Much of
	  the Internet runs over <acronym class="acronym">TCP/IP</acronym>.</p></dd><dt><a id="td-glossary"></a><span class="glossterm">Transmitted Data</span></dt><dd class="glossdef"><p>An <acronym class="acronym">RS232C</acronym> pin or wire that data is transmitted
	  on.</p><p><a class="glossseealso" href="#rd-glossary">Received Data</a>参照</p></dd><dt><a id="tftp-glossary"></a><span class="glossterm">Trivial <acronym class="acronym">FTP</acronym></span></dt><dd class="glossdef"><p></p></dd></dl></div><div class="glossdiv"><h3 class="title">U</h3><dl><dt><span class="glossterm">UDP</span></dt><dd><p><a class="glosssee" href="#udp-glossary">User Datagram Protocol</a>参照</p></dd><dt><span class="glossterm">UFS1</span></dt><dd><p><a class="glosssee" href="#ufs1-glossary">Unix File System Version 1</a>参照</p></dd><dt><span class="glossterm">UFS2</span></dt><dd><p><a class="glosssee" href="#ufs2-glossary">Unix File System Version 2</a>参照</p></dd><dt><span class="glossterm">UID</span></dt><dd><p><a class="glosssee" href="#uid-glossary">User ID</a>参照</p></dd><dt><span class="glossterm">URL</span></dt><dd><p><a class="glosssee" href="#url-glossary">Uniform Resource Locator</a>参照</p></dd><dt><span class="glossterm">USB</span></dt><dd><p><a class="glosssee" href="#usb-glossary">Universal Serial Bus</a>参照</p></dd><dt><a id="url-glossary"></a><span class="glossterm">Uniform Resource Locator</span></dt><dd class="glossdef"><p>A method of locating a resource, such as a document on
	  the Internet and a means to identify that resource.</p></dd><dt><a id="ufs1-glossary"></a><span class="glossterm">Unix File System Version 1</span></dt><dd class="glossdef"><p>The original <span class="trademark">UNIX</span>® file system, sometimes called the
	  Berkeley Fast File System.</p></dd><dt><a id="ufs2-glossary"></a><span class="glossterm">Unix File System Version 2</span></dt><dd class="glossdef"><p>An extension to <acronym class="acronym">UFS1</acronym>, introduced in
	  FreeBSD 5-CURRENT.  <acronym class="acronym">UFS2</acronym> adds 64 bit block
	  pointers (breaking the 1T barrier), support for extended file
	  storage and other features.</p></dd><dt><a id="usb-glossary"></a><span class="glossterm">Universal Serial Bus</span></dt><dd class="glossdef"><p>A hardware standard used to connect a wide variety of
	  computer peripherals to a universal interface.</p></dd><dt><a id="uid-glossary"></a><span class="glossterm">User ID</span></dt><dd class="glossdef"><p>A unique number assigned to each user of a computer,
	  by which the resources and permissions assigned to that
	  user can be identified.</p></dd><dt><a id="udp-glossary"></a><span class="glossterm">User Datagram Protocol</span></dt><dd class="glossdef"><p>A simple, unreliable datagram protocol which is used
	  for exchanging data on a TCP/IP network.  <acronym class="acronym">UDP</acronym>
	  does not provide error checking and correction like
	  <acronym class="acronym">TCP</acronym>.</p></dd></dl></div><div class="glossdiv"><h3 class="title">V</h3><dl><dt><span class="glossterm">VPN</span></dt><dd><p><a class="glosssee" href="#vpn-glossary">Virtual Private Network</a>参照</p></dd><dt><a id="vpn-glossary"></a><span class="glossterm">Virtual Private Network</span></dt><dd class="glossdef"><p>A method of using a public telecommunication
	  such as the Internet, to provide remote access to a
	  localized network, such as a corporate
	  <acronym class="acronym">LAN</acronym>.</p></dd></dl></div></div><div class="index"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp98362576"></a>索引</h1></div></div></div><div class="index"><div class="indexdiv"><h3>シンボル</h3><dl><dt>-CURRENT, <a class="indexterm" href="#current-stable">開発ブランチを追いかける</a></dt><dd><dl><dt>using, <a class="indexterm" href="#current">FreeBSD-CURRENT を使う</a></dt><dt>コンパイル, <a class="indexterm" href="#current">FreeBSD-CURRENT を使う</a></dt><dt>使用, <a class="indexterm" href="#current">FreeBSD-CURRENT を使う</a></dt></dl></dd><dt>-STABLE, <a class="indexterm" href="#current-stable">開発ブランチを追いかける</a></dt><dd><dl><dt>利用する, <a class="indexterm" href="#stable">FreeBSD-STABLE を使う</a></dt><dt>構築、コンパイル, <a class="indexterm" href="#stable">FreeBSD-STABLE を使う</a></dt></dl></dd><dt>.rhosts, <a class="indexterm" href="#idp89523024">ダンプとリストア</a></dt><dt>/boot/kernel.old, <a class="indexterm" href="#kernelconfig-building">カスタムカーネルの構築とインストール</a></dt><dt>/etc, <a class="indexterm" href="#configtuning-initial">パーティションレイアウトのデザイン</a></dt><dt>/etc/gettytab, <a class="indexterm" href="#idp91536464">/etc/gettytab</a></dt><dt>/etc/groups, <a class="indexterm" href="#users-groups">グループの管理</a></dt><dt>/etc/login.conf, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>/etc/mail/access, <a class="indexterm" href="#sendmail">sendmail の設定</a></dt><dt>/etc/mail/aliases, <a class="indexterm" href="#sendmail">sendmail の設定</a></dt><dt>/etc/mail/local-host-names, <a class="indexterm" href="#sendmail">sendmail の設定</a></dt><dt>/etc/mail/mailer.conf, <a class="indexterm" href="#sendmail">sendmail の設定</a></dt><dt>/etc/mail/mailertable, <a class="indexterm" href="#sendmail">sendmail の設定</a></dt><dt>/etc/mail/sendmail.cf, <a class="indexterm" href="#sendmail">sendmail の設定</a></dt><dt>/etc/mail/virtusertable, <a class="indexterm" href="#sendmail">sendmail の設定</a></dt><dt>/etc/remote, <a class="indexterm" href="#direct-at">これらの AT コマンドを入力するには?</a></dt><dt>/etc/ttys, <a class="indexterm" href="#dialup-ttys">/etc/ttys</a></dt><dt>/usr, <a class="indexterm" href="#configtuning-initial">パーティションレイアウトのデザイン</a></dt><dt>/usr/bin/login, <a class="indexterm" href="#idp91515600">概要</a></dt><dt>/usr/local/etc, <a class="indexterm" href="#configtuning-appconfig">アプリケーションの設定</a></dt><dt>/usr/local/etc/rc.d, <a class="indexterm" href="#configtuning-starting-services">サービスの起動</a></dt><dt>/usr/share/skel, <a class="indexterm" href="#users-adduser">adduser</a></dt><dt>/var, <a class="indexterm" href="#configtuning-initial">パーティションレイアウトのデザイン</a></dt><dt>10 base 2, <a class="indexterm" href="#idp94467152">スタンドアロン ISDN ブリッジ/ルータ</a></dt><dt>386BSD, <a class="indexterm" href="#intro-history">FreeBSD 小史</a></dt><dt>386BSD Patchkit, <a class="indexterm" href="#intro-history">FreeBSD 小史</a></dt><dt>4.3BSD-Lite, <a class="indexterm" href="#intro-history">FreeBSD 小史</a></dt><dt>4.4BSD-Lite, <a class="indexterm" href="#nutshell">FreeBSD へようこそ!</a>, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>802.11 (参照 無線ネットワーク)</dt><dt>アカウンティング</dt><dd><dl><dt>ディスク領域, <a class="indexterm" href="#quotas">ファイルシステムクォータ</a></dt></dl></dd><dt>アカウント</dt><dd><dl><dt>daemon, <a class="indexterm" href="#users-system">システムアカウント</a></dt><dt>nobody, <a class="indexterm" href="#users-system">システムアカウント</a></dt><dt>operator, <a class="indexterm" href="#users-system">システムアカウント</a></dt><dt>user, <a class="indexterm" href="#users-user">ユーザアカウント</a></dt><dt>グループ, <a class="indexterm" href="#users-groups">グループの管理</a></dt><dt>システム, <a class="indexterm" href="#users-system">システムアカウント</a></dt><dt>スーパーユーザ (root), <a class="indexterm" href="#users-superuser">スーパーユーザアカウント</a></dt><dt>パスワードの変更, <a class="indexterm" href="#users-passwd">passwd</a></dt><dt>制限, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>削除, <a class="indexterm" href="#users-rmuser">rmuser</a></dt><dt>変更, <a class="indexterm" href="#users-modifying">アカウント情報の管理</a></dt><dt>追加, <a class="indexterm" href="#users-adduser">adduser</a></dt></dl></dd><dt>アドレス転送, <a class="indexterm" href="#network-natdaddress-redirection">アドレス転送</a></dt><dt>アプリケーション</dt><dd><dl><dt>Mathematica, <a class="indexterm" href="#linuxemu-mathematicau">Mathematica のインストール</a></dt><dt>Oracle, <a class="indexterm" href="#linuxemu-oracle">Oracle のインストール</a></dt><dt>SAP R/3, <a class="indexterm" href="#sapr3">SAP R/3 (4.6B - IDES) のインストール</a></dt></dl></dd><dt>イエローページ (参照 NIS)</dt><dt>インストール</dt><dd><dl><dt>トラブルシューティング, <a class="indexterm" href="#bsdinstall-install-trouble">トラブルシューティング</a>, <a class="indexterm" href="#install-trouble">トラブルシューティング</a></dt><dt>ネットワーク</dt><dd><dl><dt>FTP, <a class="indexterm" href="#install-media">インストールメディアの選択</a></dt></dl></dd></dl></dd><dt>インターネットソフトウェアコンソーシアム (ISC), <a class="indexterm" href="#idp94829648">DHCP とは何でしょうか?</a></dt><dt>インターネット接続共有, <a class="indexterm" href="#network-natoverview">概要</a></dt><dt>イーサネット</dt><dd><dl><dt>MAC アドレス, <a class="indexterm" href="#idp85839056">Mathematica パスワードの取得</a>, <a class="indexterm" href="#idp93269840">例</a></dt></dl></dd><dt>エディタ, <a class="indexterm" href="#editors">テキストエディタ</a></dt><dd><dl><dt>emacs, <a class="indexterm" href="#editors">テキストエディタ</a></dt><dt>vi, <a class="indexterm" href="#editors">テキストエディタ</a></dt></dl></dd><dt>エンコーディング, <a class="indexterm" href="#idp90165328">エンコーディング</a></dt><dt>オフィススイート</dt><dd><dl><dt>
	  Apache OpenOffice
	, <a class="indexterm" href="#idp82951632">Apache OpenOffice</a></dt><dt>Calligra, <a class="indexterm" href="#idp82918096">Calligra</a></dt><dt>LibreOffice, <a class="indexterm" href="#idp82979792">LibreOffice</a></dt></dl></dd><dt>カーネル</dt><dd><dl><dt>NOTES, <a class="indexterm" href="#kernelconfig-config">コンフィグレーションファイル</a></dt><dt>カスタムカーネルの構築, <a class="indexterm" href="#kernelconfig-synopsis">この章では</a></dt><dt>コンフィグレーションファイル, <a class="indexterm" href="#kernelconfig-config">コンフィグレーションファイル</a></dt><dt>構築 / インストール, <a class="indexterm" href="#kernelconfig-building">カスタムカーネルの構築とインストール</a></dt><dt>設定, <a class="indexterm" href="#sound-setup">サウンドカードの設定</a>, <a class="indexterm" href="#network-natdkernconfiguration">設定</a></dt></dl></dd><dt>カーネル (kernel), <a class="indexterm" href="#boot-introduction">起動時の問題</a></dt><dd><dl><dt>起動フラグ, <a class="indexterm" href="#boot-kernel-bootflags">カーネル起動フラグ</a></dt><dt>起動時の応答, <a class="indexterm" href="#boot-kernel">カーネル起動時の応答</a></dt></dl></dd><dt>カーネルのチューニング, <a class="indexterm" href="#linuxemu-kernel-tuning">カーネルのチューニング</a>, <a class="indexterm" href="#kerneltuning">カーネルのチューニング</a></dt><dt>カーネルオプション</dt><dd><dl><dt>LINUX, <a class="indexterm" href="#linuxemu-lbc-install">インストール</a></dt><dt>options BRIDGE, <a class="indexterm" href="#idp93850448">カーネルコンフィグレーションの変更</a></dt></dl></dd><dt>クォータ (quotas), <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>グループ, <a class="indexterm" href="#users-groups">グループの管理</a></dt><dt>ゲートウェイ, <a class="indexterm" href="#network-routing">ゲートウェイと経路</a></dt><dt>コアチーム, <a class="indexterm" href="#development">FreeBSD の開発モデル</a></dt><dt>コマンドライン, <a class="indexterm" href="#shells">シェル</a></dt><dt>コミッター, <a class="indexterm" href="#development">FreeBSD の開発モデル</a></dt><dt>コンソール, <a class="indexterm" href="#consoles-intro">コンソール</a></dt><dt>コンソール (console), <a class="indexterm" href="#boot-singleuser">シングルユーザモード</a></dt><dt>コントリビュータ, <a class="indexterm" href="#development">FreeBSD の開発モデル</a></dt><dt>コンパイラ</dt><dd><dl><dt>C, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>C++, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt></dl></dd><dt>サウンドカード, <a class="indexterm" href="#sound-setup">サウンドカードの設定</a></dt><dt>サブネット, <a class="indexterm" href="#network-routing">ゲートウェイと経路</a>, <a class="indexterm" href="#idp93269840">例</a></dt><dt>サービス, <a class="indexterm" href="#configtuning-starting-services">サービスの起動</a></dt><dt>サービス妨害 (DoS), <a class="indexterm" href="#security-intro">はじめに</a>, <a class="indexterm" href="#idp87730384">サービス妨害攻撃</a></dt><dt>シェル (shell), <a class="indexterm" href="#shells">シェル</a></dt><dt>システムの設定と最適化, <a class="indexterm" href="#idp86536528">この章では</a></dt><dt>シリアルコンソール, <a class="indexterm" href="#serialconsole-setup">シリアルコンソールの設定</a></dt><dt>シリアルポート, <a class="indexterm" href="#printing-checking-serial">シリアルポートのプリンタとの接続を調べる</a></dt><dt>シリアル通信, <a class="indexterm" href="#serial-synopsis">この章では</a></dt><dt>シングルユーザモード, <a class="indexterm" href="#boot-loader-examples">ローダの使用例</a>, <a class="indexterm" href="#boot-singleuser">シングルユーザモード</a>, <a class="indexterm" href="#canonical-build">システム更新の概要</a></dt><dt>シンボリックリンク, <a class="indexterm" href="#idp85787728">シェアードライブラリの追加</a></dt><dt>スケルトンディレクトリ, <a class="indexterm" href="#users-adduser">adduser</a></dt><dt>スタートアップスクリプト, <a class="indexterm" href="#consoles-login">FreeBSD にログインする</a></dt><dt>スライス, <a class="indexterm" href="#disk-organization">ディスク構成</a>, <a class="indexterm" href="#disks-adding">ディスクの追加</a></dt><dt>セキュリティ, <a class="indexterm" href="#security">セキュリティ</a></dt><dd><dl><dt>crypt, <a class="indexterm" href="#crypt">DES, MD5 と Crypt</a></dt><dt>DoS 攻撃 (参照 サービス妨害 (DoS))</dt><dt>IPsec, <a class="indexterm" href="#ipsec">IPsec</a></dt><dt>OpenSSH, <a class="indexterm" href="#openssh">OpenSSH</a></dt><dt>OpenSSL, <a class="indexterm" href="#openssl">OpenSSL</a></dt><dt>S/Key, <a class="indexterm" href="#skey">S/Key</a></dt><dt>アカウント不正利用, <a class="indexterm" href="#security-intro">はじめに</a></dt><dt>ファイアウォール, <a class="indexterm" href="#firewalls">ファイアウォール</a></dt><dt>安全性を高める, <a class="indexterm" href="#securing-freebsd">FreeBSDの安全性を高める</a></dt><dt>裏口 (バックドア), <a class="indexterm" href="#security-intro">はじめに</a></dt></dl></dd><dt>セントロニクス (参照 パラレルプリンタ)</dt><dt>ソフトアップデート, <a class="indexterm" href="#idp86743888">ソフトアップデート</a></dt><dt>ソフトリミット, <a class="indexterm" href="#idp89918416">クォータリミットの設定</a></dt><dt>ソースコード, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>ゾーン</dt><dd><dl><dt>例, <a class="indexterm" href="#idp94967120">用語</a></dt></dl></dd><dt>ダイアルアウトサービス, <a class="indexterm" href="#dialout">ダイアルアウトサービス</a></dt><dt>ダイアルインサービス, <a class="indexterm" href="#dialup">ダイアルインサービス</a></dt><dt>ダイナミックホストコンフィギュレーションプロトコル
	  (DHCP) (参照 DHCP)</dt><dt>テキストエディタ, <a class="indexterm" href="#editors">テキストエディタ</a></dt><dt>テープメディア, <a class="indexterm" href="#backups-tapebackups">データテープの作成と使用</a></dt><dd><dl><dt>AIT, <a class="indexterm" href="#idp89469648">AIT</a></dt><dt>DDS (4mm) テープ, <a class="indexterm" href="#backups-tapebackups-4mm">4mm (DDS: Digital Data Storage)</a></dt><dt>DLT, <a class="indexterm" href="#backups-tapebackups-dlt">DLT</a></dt><dt>Exabyte (8mm) テープ, <a class="indexterm" href="#backups-tapebackups-8mm">8mm (Exabyte)</a></dt><dt>QIC テープ, <a class="indexterm" href="#backups-tapebackups-4mm">4mm (DDS: Digital Data Storage)</a></dt><dt>QIC-150, <a class="indexterm" href="#backups-tapebackups-qic">QIC</a></dt></dl></dd><dt>ディスク</dt><dd><dl><dt>ファイルベース (4.X), <a class="indexterm" href="#disks-vnconfig">FreeBSD 4.X でファイル中に構築されるファイルシステム</a></dt><dt>ファイルベース (5.X), <a class="indexterm" href="#disks-mdconfig">FreeBSD 5.X でファイル中に構築されるファイルシステム</a></dt><dt>メモリ, <a class="indexterm" href="#disks-virtual">ネットワーク、メモリ、そしてファイルベースのファイルシステム</a></dt><dt>メモリディスクの切り離し, <a class="indexterm" href="#idp89840976">システムからメモリディスクを切り離す</a></dt><dt>メモリファイルシステム (4.X), <a class="indexterm" href="#disks-md-freebsd4">FreeBSD 4.X でのメモリベースのファイルシステム</a></dt><dt>メモリファイルシステム (5.X), <a class="indexterm" href="#disks-md-freebsd5">FreeBSD 5.X でのメモリベースのファイルシステム</a></dt><dt>仮想, <a class="indexterm" href="#disks-virtual">ネットワーク、メモリ、そしてファイルベースのファイルシステム</a></dt><dt>暗号化, <a class="indexterm" href="#disks-encrypting">ディスクパーティションの暗号化</a></dt><dt>追加, <a class="indexterm" href="#disks-adding">ディスクの追加</a></dt></dl></dd><dt>ディスククォータ, <a class="indexterm" href="#users-limiting">ユーザへの制限</a>, <a class="indexterm" href="#quotas">ファイルシステムクォータ</a></dt><dd><dl><dt>チェック, <a class="indexterm" href="#idp89898832">ディスククォータを使うためのシステム設定</a>, <a class="indexterm" href="#idp89993808">クォータリミットとディスク使用状況のチェック</a></dt><dt>制限, <a class="indexterm" href="#idp89918416">クォータリミットの設定</a></dt></dl></dd><dt>ディスクレスワークステーション, <a class="indexterm" href="#network-diskless">ディスクレス稼働</a></dt><dt>ディスクレス稼働, <a class="indexterm" href="#network-diskless">ディスクレス稼働</a></dt><dd><dl><dt>カーネル設定, <a class="indexterm" href="#idp94302160">ディスクレス用のカーネル構築</a></dt><dt>読み取り専用の /usr, <a class="indexterm" href="#idp94364496">読み取り専用の /usr
	    で動作させる</a></dt><dt>起動, <a class="indexterm" href="#idp94221264">DHCP/BOOTP の設定</a></dt></dl></dd><dt>ディレクトリ, <a class="indexterm" href="#permissions">許可属性</a></dt><dt>ディレクトリの階層構造, <a class="indexterm" href="#dirstructure">ディレクトリ構造</a></dt><dt>デバイスノード, <a class="indexterm" href="#troubleshooting">サウンドカードの問題についてのトラブルシューティング</a></dt><dt>デフォルトルート, <a class="indexterm" href="#network-routing-default">デフォルトルート</a></dt><dt>デフォルトルート (default route), <a class="indexterm" href="#idp93269840">例</a></dt><dt>デュアルホームホスト, <a class="indexterm" href="#idp93442384">デュアルホームホスト</a></dt><dt>ヌルモデムケーブル, <a class="indexterm" href="#headless-install">FreeBSD をモニタやキーボードのないシステムにインストールする</a>, <a class="indexterm" href="#term-cables-null">ヌルモデムケーブル</a>, <a class="indexterm" href="#serialconsole-howto">シリアルコンソールの設定</a></dt><dt>ヌルモデム用ケーブル, <a class="indexterm" href="#printing-serial">シリアルポート</a></dt><dt>ネットグループ, <a class="indexterm" href="#network-netgroups">ネットグループの利用</a></dt><dt>ネットワークアドレス変換 (NAT), <a class="indexterm" href="#idp93838544">パケットフィルタ/帯域制御用ファイアウォール</a></dt><dt>ネットワークプリンタ, <a class="indexterm" href="#printing-advanced-network-printers">リモートプリンタからの出力</a>, <a class="indexterm" href="#printing-advanced-network-rm">リモートホストに接続されたプリンタ</a></dt><dt>ハードリミット, <a class="indexterm" href="#idp89918416">クォータリミットの設定</a></dt><dt>バイナリ互換性</dt><dd><dl><dt>BSD/OS, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>Linux, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>NetBSD, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>SCO, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>SVR4, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt></dl></dd><dt>バイナリ互換機能</dt><dd><dl><dt>Linux, <a class="indexterm" href="#idp85701584">この章では</a></dt></dl></dd><dt>バックアップソフトウェア</dt><dd><dl><dt>Amanda, <a class="indexterm" href="#backups-programs-amanda">Amanda</a></dt><dt>cpio, <a class="indexterm" href="#idp89573712">cpio</a></dt><dt>pax, <a class="indexterm" href="#idp89589584">pax</a></dt><dt>tar, <a class="indexterm" href="#idp89557456">tar</a></dt><dt>ダンプ / リストア, <a class="indexterm" href="#idp89523024">ダンプとリストア</a></dt></dl></dd><dt>バックアップフロッピー, <a class="indexterm" href="#floppies-using">データをバックアップするのにフロッピーは使えますか?</a></dt><dt>バナーページ (参照 ヘッダページ)</dt><dt>バーチャルホスト, <a class="indexterm" href="#configtuning-virtual-hosts">バーチャルホスト</a></dt><dt>パラレルライン IP, <a class="indexterm" href="#network-plip">パラレルライン IP (PLIP)</a></dt><dt>パリティ, <a class="indexterm" href="#printing-serial">シリアルポート</a>, <a class="indexterm" href="#printing-checking-serial">シリアルポートのプリンタとの接続を調べる</a></dt><dt>パーティション, <a class="indexterm" href="#disk-organization">ディスク構成</a>, <a class="indexterm" href="#disks-adding">ディスクの追加</a></dt><dt>ビデオ packages, <a class="indexterm" href="#video-ports">ビデオを扱う ports および packages</a></dt><dt>ビデオ ports, <a class="indexterm" href="#video-ports">ビデオを扱う ports および packages</a></dt><dt>ファイアウォール, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a>, <a class="indexterm" href="#firewalls">ファイアウォール</a>, <a class="indexterm" href="#idp93838544">パケットフィルタ/帯域制御用ファイアウォール</a>, <a class="indexterm" href="#idp93857744">ファイアウォール対応</a></dt><dt>ファイルの許可属性 (permissions), <a class="indexterm" href="#permissions">許可属性</a></dt><dt>ファイルシステム</dt><dd><dl><dt>fstab を使ったマウント, <a class="indexterm" href="#disks-fstab">fstab ファイル</a></dt><dt>HFS, <a class="indexterm" href="#mkisofs">mkisofs</a></dt><dt>ISO 9660, <a class="indexterm" href="#idp89187024">はじめに</a>, <a class="indexterm" href="#mkisofs">mkisofs</a></dt><dt>Joliet, <a class="indexterm" href="#mkisofs">mkisofs</a></dt><dt>アンマウント, <a class="indexterm" href="#disks-umount">umount コマンド</a></dt><dt>スナップショット, <a class="indexterm" href="#snapshots">ファイルシステムのスナップショット</a></dt><dt>マウント, <a class="indexterm" href="#disks-mount">mount コマンド</a></dt></dl></dd><dt>フォント, <a class="indexterm" href="#idp85851344">ネットワーク経由での Mathematica フロントエンドの起動</a></dt><dd><dl><dt>LCD スクリーン, <a class="indexterm" href="#antialias">フォントのアンチエイリアス</a></dt><dt>TrueType, <a class="indexterm" href="#truetype">TrueType® フォント</a></dt><dt>アンチエイリアス, <a class="indexterm" href="#antialias">フォントのアンチエイリアス</a></dt><dt>スペーシング, <a class="indexterm" href="#antialias">フォントのアンチエイリアス</a></dt></dl></dd><dt>フォントのアンチエイリアス, <a class="indexterm" href="#antialias">フォントのアンチエイリアス</a></dt><dt>フロッピーディスク, <a class="indexterm" href="#floppies-using">データをバックアップするのにフロッピーは使えますか?</a></dt><dt>フローコントロールプロトコル, <a class="indexterm" href="#printing-serial">シリアルポート</a></dt><dt>ブラウザ</dt><dd><dl><dt>web, <a class="indexterm" href="#desktop-browsers">ブラウザ</a></dt></dl></dd><dt>ブリッジ, <a class="indexterm" href="#idp93830736">はじめに</a></dt><dt>ブートストラップ (bootstrap), <a class="indexterm" href="#boot-synopsis">この章では</a></dt><dt>ブートマネージャ, <a class="indexterm" href="#boot-blocks">ブートマネージャと起動ステージ</a></dt><dt>ブートマネージャ
      (Boot Manager), <a class="indexterm" href="#boot-introduction">起動時の問題</a></dt><dt>ブートローダ
      (Boot Loader), <a class="indexterm" href="#boot-introduction">起動時の問題</a></dt><dt>ブートローダ (boot-loader), <a class="indexterm" href="#boot-loader">起動ステージ 3 /boot/loader</a></dt><dt>プリエンプティブマルチタスキング, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>プリンタ, <a class="indexterm" href="#idp90354768">プリンタの設定</a></dt><dd><dl><dt>USB, <a class="indexterm" href="#printing-ports">ポートとケーブル</a></dt><dt>ケイパビリティ, <a class="indexterm" href="#printing-printcap">スプーラに許可を与える:
	  /etc/printcap ファイル</a></dt><dt>シリアル, <a class="indexterm" href="#printing-ports">ポートとケーブル</a>, <a class="indexterm" href="#printing-checking-serial">シリアルポートのプリンタとの接続を調べる</a>, <a class="indexterm" href="#printing-commparam">スプーラのための通信パラメータの設定</a>, <a class="indexterm" href="#printing-advanced-if-conversion">プレインテキストのジョブを PostScript® プリンタで印字する</a></dt><dt>ネットワーク, <a class="indexterm" href="#printing-advanced-network-printers">リモートプリンタからの出力</a>, <a class="indexterm" href="#printing-advanced-network-rm">リモートホストに接続されたプリンタ</a></dt><dt>パラレル, <a class="indexterm" href="#printing-ports">ポートとケーブル</a>, <a class="indexterm" href="#printing-checking-parallel">パラレルポートのプリンタとの接続を調べる</a></dt><dt>使い方, <a class="indexterm" href="#printing-using">プリンタを使う</a></dt><dt>利用制限, <a class="indexterm" href="#printing-advanced-restricting">プリンタの利用に制約を与える</a></dt></dl></dd><dt>プリンタスプール, <a class="indexterm" href="#printing-spooldir">スプーリングディレクトリの作成</a></dt><dt>プリントジョブ, <a class="indexterm" href="#printing-intro-spooler">はじめに</a>, <a class="indexterm" href="#printing-spooldir">スプーリングディレクトリの作成</a>, <a class="indexterm" href="#printing-advanced-if-conversion">プレインテキストのジョブを PostScript® プリンタで印字する</a>, <a class="indexterm" href="#printing-advanced-restricting-sizes">入力可能なジョブのサイズを制限する</a>, <a class="indexterm" href="#printing-lpq">ジョブの処理状況を調べる</a></dt><dd><dl><dt>制御, <a class="indexterm" href="#printing-advanced-restricting-sizes">入力可能なジョブのサイズを制限する</a></dt></dl></dd><dt>ヘッダページ, <a class="indexterm" href="#printing-printcap">スプーラに許可を与える:
	  /etc/printcap ファイル</a>, <a class="indexterm" href="#printing-advanced-header-pages">ヘッダページ</a></dt><dt>ページ課金, <a class="indexterm" href="#printing-advanced-lpf">テキストフィルタ lpf</a></dt><dt>ボーレート, <a class="indexterm" href="#printing-serial">シリアルポート</a></dt><dt>マスターブートレコード
      (Master Boot Record: MBR), <a class="indexterm" href="#boot-introduction">起動時の問題</a></dt><dt>マスターブートレコード (MBR), <a class="indexterm" href="#boot-boot0">ブートマネージャ</a></dt><dt>マニュアルページ, <a class="indexterm" href="#basics-man">オンラインマニュアル</a></dt><dt>マルチキャスト</dt><dd><dl><dt>options MROUTING, <a class="indexterm" href="#idp93500112">マルチキャストルーティング</a></dt></dl></dd><dt>マルチユーザモード, <a class="indexterm" href="#boot-multiuser">マルチユーザモード</a></dt><dt>マルチユーザ機能, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>メモリ保護, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>メーリングリスト, <a class="indexterm" href="#makeworld">world の再構築</a></dt><dt>メールサーバデーモン</dt><dd><dl><dt>exim, <a class="indexterm" href="#mail-mta">メールホストサーバデーモン</a></dt><dt>postfix, <a class="indexterm" href="#mail-mta">メールホストサーバデーモン</a></dt><dt>qmail, <a class="indexterm" href="#mail-mta">メールホストサーバデーモン</a></dt><dt>sendmail, <a class="indexterm" href="#mail-mta">メールホストサーバデーモン</a></dt></dl></dd><dt>メールホスト, <a class="indexterm" href="#mail-host">メールホスト</a></dt><dt>モデム, <a class="indexterm" href="#idp94408912">ISDN ターミナルアダプタ</a></dt><dt>ユーザ</dt><dd><dl><dt>FreeBSD を利用している大規模サイト, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt></dl></dd><dt>ユーザに対する制限, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dd><dl><dt>coredumpsize, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>cputime, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>filesize, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>maxproc, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>memorylocked, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>memoryuse, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>openfiles, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>sbsize, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>stacksize, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>クォータ, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt></dl></dd><dt>リゾルバ, <a class="indexterm" href="#idp94967120">用語</a></dt><dt>リフレッシュレート, <a class="indexterm" href="#idp82243408">はじめに</a></dt><dt>ルータ, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a>, <a class="indexterm" href="#network-dedicated-router">ルータの構築</a>, <a class="indexterm" href="#idp93838544">パケットフィルタ/帯域制御用ファイアウォール</a></dt><dt>ルーティング, <a class="indexterm" href="#network-routing">ゲートウェイと経路</a></dt><dt>ルーティングの伝搬, <a class="indexterm" href="#idp93490640">ルーティングの伝搬</a></dt><dt>ルートゾーン, <a class="indexterm" href="#idp94967120">用語</a></dt><dt>ルートファイルシステム, <a class="indexterm" href="#mount-unmount">ファイルシステムのマウントとアンマウント</a></dt><dd><dl><dt>ディスクレス稼働, <a class="indexterm" href="#idp94315728">ルートファイルシステムの準備</a></dt></dl></dd><dt>ループバックデバイス (loopback device), <a class="indexterm" href="#idp93269840">例</a></dt><dt>ログインクラス, <a class="indexterm" href="#idp90193232">ロケールを設定する方法</a>, <a class="indexterm" href="#adm-setup">管理者の設定</a></dt><dt>ロケール, <a class="indexterm" href="#necessarylocales">必要となるロケール</a></dt><dt>ロケール (locale), <a class="indexterm" href="#idp90193232">ロケールを設定する方法</a></dt><dt>ロケール(locale), <a class="indexterm" href="#idp90151248">I18N で使えるようになる言語には何があるの?</a>, <a class="indexterm" href="#startup-file">シェルの初期化ファイルによる方法</a></dt><dt>ローダ, <a class="indexterm" href="#boot-loader-flow">ローダプログラムの処理の流れ</a></dt><dt>ローダの設定, <a class="indexterm" href="#boot-loader-flow">ローダプログラムの処理の流れ</a></dt><dt>ワイドスクリーンフラットパネルコンフィグレーション, <a class="indexterm" href="#idp82343760">ワイドスクリーンフラットパネルの追加</a></dt><dt>仮想コンソール, <a class="indexterm" href="#consoles">仮想コンソールと端末</a></dt><dt>仮想ディスク, <a class="indexterm" href="#disks-virtual">ネットワーク、メモリ、そしてファイルベースのファイルシステム</a></dt><dt>仮想メモリ, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>共有ライブラリ, <a class="indexterm" href="#idp85787728">シェアードライブラリの追加</a></dt><dt>印刷, <a class="indexterm" href="#printing-synopsis">この章では</a>, <a class="indexterm" href="#printing-lpr">印字する</a></dt><dd><dl><dt>フィルタ, <a class="indexterm" href="#printing-textfilter">テキストフィルタのインストール</a>, <a class="indexterm" href="#printing-advanced-filter-intro">フィルタ</a>, <a class="indexterm" href="#printing-advanced-filters">フィルタはどのように機能しているか</a></dt><dd><dl><dt>apsfilter, <a class="indexterm" href="#printing-advanced-autoconv">自動変換: その他の変換フィルタ</a></dt></dl></dd><dt>ヘッダページ, <a class="indexterm" href="#printing-no-header-pages">ヘッダページの印字を禁止する</a></dt></dl></dd><dt>危険な専用, <a class="indexterm" href="#disk-organization">ディスク構成</a></dt><dt>国コード, <a class="indexterm" href="#idp90155984">言語コードと国コード</a></dt><dt>国際化 (internationalization) (参照 地域化 (localization))</dt><dt>圧縮, <a class="indexterm" href="#floppies-compress">バックアップを圧縮することはできませんか?</a></dt><dt>地域化</dt><dd><dl><dt>ドイツ語, <a class="indexterm" href="#idp90405456">ドイツ語への地域化 (すべての ISO 8859-1 言語向け)</a></dt><dt>ロシア語, <a class="indexterm" href="#ru-localize">ロシア語 (KOI8-R エンコーディング)</a></dt><dt>日本語, <a class="indexterm" href="#idp90408784">日本語/韓国語への地域化</a></dt><dt>繁体字中国語, <a class="indexterm" href="#idp90399696">台湾向けの繁体字中国語への地域化</a></dt><dt>韓国語, <a class="indexterm" href="#idp90408784">日本語/韓国語への地域化</a></dt></dl></dd><dt>地域化(localization), <a class="indexterm" href="#idp90142288">I18N/L10N とは?</a></dt><dt>垂直同期周波数 (参照 リフレッシュレート)</dt><dt>垂直走査レート (参照 リフレッシュレート)</dt><dt>基本入出力システム
      (Basic Input/Output System) (参照 BIOS)</dt><dt>対称型マルチプロセッシング (SMP), <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>水平同期周波数, <a class="indexterm" href="#idp82243408">はじめに</a></dt><dt>水平走査レート (参照 水平同期周波数)</dt><dt>無線ネットワーク, <a class="indexterm" href="#network-wireless">無線ネットワーク</a></dt><dd><dl><dt>アクセスポイント, <a class="indexterm" href="#idp93526224">FreeBSD のアクセスポイントの構築</a></dt><dt>暗号化, <a class="indexterm" href="#idp93639760">暗号化</a></dt></dl></dd><dt>猶予期間, <a class="indexterm" href="#idp89993808">クォータリミットとディスク使用状況のチェック</a></dt><dt>環境変数 (environment variables), <a class="indexterm" href="#shells">シェル</a></dt><dt>画像スキャナ, <a class="indexterm" href="#scanners">画像スキャナ</a></dt><dt>砂場 (sandbox), <a class="indexterm" href="#idp87657296">root 権限で実行されているサーバと SUID/SGID バイナリの安全性を高める</a></dt><dt>端末, <a class="indexterm" href="#consoles">仮想コンソールと端末</a>, <a class="indexterm" href="#term">シリアル端末</a></dt><dt>繁体字中国語 (Traditional Chinese)</dt><dd><dl><dt>BIG-5 エンコーディング, <a class="indexterm" href="#usr-setup">ユーザの設定</a></dt></dl></dd><dt>自動マウントデーモン, <a class="indexterm" href="#network-amd">amd による自動マウント</a></dt><dt>表計算ソフトウェア</dt><dd><dl><dt>Gnumeric, <a class="indexterm" href="#idp83130192">Gnumeric</a></dt><dt>KMyMoney, <a class="indexterm" href="#idp83143120">KMyMoney</a></dt></dl></dd><dt>言語コード, <a class="indexterm" href="#idp90155984">言語コードと国コード</a></dt><dt>許可属性</dt><dd><dl><dt>シンボル, <a class="indexterm" href="#idp80616144">シンボリック表記</a></dt></dl></dd><dt>許可属性 (permissions), <a class="indexterm" href="#permissions">許可属性</a></dt><dt>課金</dt><dd><dl><dt>プリンタ, <a class="indexterm" href="#printing-advanced-lpf">テキストフィルタ lpf</a>, <a class="indexterm" href="#printing-advanced-acct">プリンタの利用に対する課金</a></dt></dl></dd><dt>起動, <a class="indexterm" href="#boot-synopsis">この章では</a></dt><dt>逆引き DNS, <a class="indexterm" href="#idp94967120">用語</a></dt><dt>電子メール, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a>, <a class="indexterm" href="#mail-synopsis">この章では</a></dt></dl></div><div class="indexdiv"><h3>A</h3><dl><dt>AbiWord, <a class="indexterm" href="#idp82927568">AbiWord</a></dt><dt>ACL, <a class="indexterm" href="#fs-acl">ファイルシステムアクセス制御リスト</a></dt><dt>adduser, <a class="indexterm" href="#users-adduser">adduser</a>, <a class="indexterm" href="#adm-setup">管理者の設定</a></dt><dt>AIX, <a class="indexterm" href="#idp94497616">NIS/YP とは?</a></dt><dt>Amanda, <a class="indexterm" href="#backups-programs-amanda">Amanda</a></dt><dt>amd, <a class="indexterm" href="#network-amd">amd による自動マウント</a></dt><dt>Apache, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt><dt>
	  Apache OpenOffice
	, <a class="indexterm" href="#idp82951632">Apache OpenOffice</a></dt><dt>Apple, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt><dt>apsfilter, <a class="indexterm" href="#printing-advanced-autoconv">自動変換: その他の変換フィルタ</a></dt><dt>ASCII, <a class="indexterm" href="#printing-troubleshooting">トラブルシューティング</a>, <a class="indexterm" href="#idp90165328">エンコーディング</a></dt><dt>AT&amp;T, <a class="indexterm" href="#intro-history">FreeBSD 小史</a></dt></dl></div><div class="indexdiv"><h3>B</h3><dl><dt>BGP, <a class="indexterm" href="#network-dedicated-router">ルータの構築</a></dt><dt>BIND, <a class="indexterm" href="#mail-trouble">トラブルシュート</a>, <a class="indexterm" href="#idp94961616">概観</a></dt><dd><dl><dt>キャッシュネームサーバ, <a class="indexterm" href="#idp95114064">キャッシュネームサーバ</a></dt><dt>砂場での実行, <a class="indexterm" href="#network-named-sandbox">砂場で named を実行する</a></dt><dt>設定ファイル, <a class="indexterm" href="#idp95039696">設定ファイル</a></dt><dt>起動, <a class="indexterm" href="#idp95034960">BIND の起動</a></dt></dl></dd><dt>BIOS, <a class="indexterm" href="#install-drive-bios-numbering">BIOS ドライブの番号付け</a>, <a class="indexterm" href="#boot-introduction">起動時の問題</a></dt><dt>bit/秒, <a class="indexterm" href="#printing-checking-serial">シリアルポートのプリンタとの接続を調べる</a></dt><dt>bits-per-second, <a class="indexterm" href="#serial-terminology">用語解説</a></dt><dt>Bluetooth, <a class="indexterm" href="#network-bluetooth">Bluetooth</a></dt><dt>BOOTP</dt><dd><dl><dt>ディスクレス稼働, <a class="indexterm" href="#idp94262352">BOOTP を使用する設定</a></dt></dl></dd><dt>Bourne シェル (Bourne shells), <a class="indexterm" href="#shells">シェル</a></dt><dt>BSD Copyright, <a class="indexterm" href="#goals">FreeBSD プロジェクトの目標</a></dt><dt>BSD パーティション, <a class="indexterm" href="#idp88879952">sysinstall(8) の利用</a></dt></dl></div><div class="indexdiv"><h3>C</h3><dl><dt>Calligra, <a class="indexterm" href="#idp82918096">Calligra</a></dt><dt>CD ライタ</dt><dd><dl><dt>ATAPI, <a class="indexterm" href="#idp89187024">はじめに</a></dt><dt>ATAPI/CAM ドライバ, <a class="indexterm" href="#idp89187024">はじめに</a>, <a class="indexterm" href="#atapicam">ATAPI/CAM ドライバの使用</a></dt></dl></dd><dt>CDROM</dt><dd><dl><dt>ブータブル (起動可能な) CDROM の作成, <a class="indexterm" href="#mkisofs">mkisofs</a></dt><dt>作成, <a class="indexterm" href="#creating-cds">光メディア (CD &amp; DVD) の作成と使用</a></dt><dt>書き込み, <a class="indexterm" href="#burncd">burncd</a>, <a class="indexterm" href="#cdrecord">cdrecord</a></dt></dl></dd><dt>chpass, <a class="indexterm" href="#users-chpass">chpass</a></dt><dt>Chromium, <a class="indexterm" href="#idp82857680">Chromium</a></dt><dt>chroot, <a class="indexterm" href="#network-named-sandbox">砂場で named を実行する</a></dt><dt>Cisco, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt><dt>Coda, <a class="indexterm" href="#disks-virtual">ネットワーク、メモリ、そしてファイルベースのファイルシステム</a></dt><dt>color</dt><dd><dl><dt>contrast, <a class="indexterm" href="#idp80117200">トラブルシューティングに関する Q &amp; A</a></dt></dl></dd><dt>Computer Systems Research Group (CSRG), <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>comsat, <a class="indexterm" href="#idp87657296">root 権限で実行されているサーバと SUID/SGID バイナリの安全性を高める</a></dt><dt>Concurrent Versions System (参照 CVS)</dt><dt>coredumpsize, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>cpio, <a class="indexterm" href="#idp89573712">cpio</a></dt><dt>cputime, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>crypt, <a class="indexterm" href="#crypt">DES, MD5 と Crypt</a></dt><dt>CTM, <a class="indexterm" href="#synching">ソースの同期</a>, <a class="indexterm" href="#ctm">CTM を使う</a></dt><dt>cu1, <a class="indexterm" href="#headless-install">FreeBSD をモニタやキーボードのないシステムにインストールする</a></dt><dt>cuaa, <a class="indexterm" href="#serial-hw-config">シリアルポートの設定</a></dt><dt>CUPS, <a class="indexterm" href="#printing-lpd-alternatives">標準スプーラの代替品</a></dt><dt>CVS, <a class="indexterm" href="#development">FreeBSD の開発モデル</a></dt><dt>CVS リポジトリ, <a class="indexterm" href="#development">FreeBSD の開発モデル</a></dt></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>DCE, <a class="indexterm" href="#serial-terminology">用語解説</a></dt><dt>Deleting obsolete files and directories, <a class="indexterm" href="#make-delete-old">使われなくなったファイル、ライブラリの削除</a></dt><dt>DES, <a class="indexterm" href="#crypt">DES, MD5 と Crypt</a></dt><dt>device.hints, <a class="indexterm" href="#device-hints">Device Hints</a></dt><dt>DGA, <a class="indexterm" href="#video-interface">ビデオ機能の決定</a></dt><dt>DHCP</dt><dd><dl><dt>dhcpd.conf, <a class="indexterm" href="#idp94903376">DHCP サーバの設定</a></dt><dt>インストール, <a class="indexterm" href="#idp94885584">DHCP サーバのインストール</a></dt><dt>サーバ, <a class="indexterm" href="#idp94845136">FreeBSD への組み込み</a></dt><dt>ディスクレス稼働, <a class="indexterm" href="#idp94226896">ISC DHCP を使用する設定</a></dt><dt>必要条件, <a class="indexterm" href="#idp94845136">FreeBSD への組み込み</a></dt><dt>設定ファイル, <a class="indexterm" href="#idp94867920">関連ファイル</a>, <a class="indexterm" href="#idp94937296">ファイル</a></dt></dl></dd><dt>disklabel, <a class="indexterm" href="#idp89642448">惨事が起きる前に</a>, <a class="indexterm" href="#idp89663568">惨事の後は</a></dt><dt>DNS, <a class="indexterm" href="#idp86650064">ホスト名</a>, <a class="indexterm" href="#mail-using">電子メールを使う</a>, <a class="indexterm" href="#mail-domain">あなたのドメインに対するメール設定</a>, <a class="indexterm" href="#idp94961616">概観</a></dt><dd><dl><dt>レコード, <a class="indexterm" href="#idp95055824">ゾーンファイル</a></dt></dl></dd><dt>DNS サーバ, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>Documentation (参照 Updating and Upgrading)</dt><dt>documentation package (参照 Updating and Upgrading)</dt><dt>DOS, <a class="indexterm" href="#install-boot-media">ブートメディアの準備</a>, <a class="indexterm" href="#idp90321616">カーネルとファイルシステム</a></dt><dt>DoS 攻撃 (参照 サービス妨害 (DoS))</dt><dt>DSL, <a class="indexterm" href="#idp93838544">パケットフィルタ/帯域制御用ファイアウォール</a></dt><dt>DSP, <a class="indexterm" href="#troubleshooting">サウンドカードの問題についてのトラブルシューティング</a></dt><dt>DTE, <a class="indexterm" href="#serial-terminology">用語解説</a></dt><dt>dump, <a class="indexterm" href="#idp89523024">ダンプとリストア</a></dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>editors</dt><dd><dl><dt>ee, <a class="indexterm" href="#editors">テキストエディタ</a></dt></dl></dd><dt>ee, <a class="indexterm" href="#editors">テキストエディタ</a></dt><dt>ELF, <a class="indexterm" href="#idp86488016">どのように動くのでしょう?</a></dt><dd><dl><dt>branding, <a class="indexterm" href="#idp86488016">どのように動くのでしょう?</a></dt></dl></dd><dt>emacs, <a class="indexterm" href="#editors">テキストエディタ</a></dt><dt>email, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a>, <a class="indexterm" href="#mail-synopsis">この章では</a></dt><dd><dl><dt>MTA の変更, <a class="indexterm" href="#mail-changingmta">MTA の変更</a></dt><dt>トラブルシューティング, <a class="indexterm" href="#mail-trouble">トラブルシュート</a></dt><dt>受け取り, <a class="indexterm" href="#mail-receive">メールの受け取り</a></dt><dt>設定, <a class="indexterm" href="#mail-config">基本事項</a></dt></dl></dd><dt>ePDFView, <a class="indexterm" href="#idp83065296">ePDFView</a></dt><dt>Etherboot, <a class="indexterm" href="#idp94272080">Etherboot
	  を用いるブートプログラムの準備</a></dt><dt>execution class loader, <a class="indexterm" href="#idp86488016">どのように動くのでしょう?</a></dt><dt>Experts Exchange, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>fdisk, <a class="indexterm" href="#disks-adding">ディスクの追加</a></dt><dt>filesize, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>finger, <a class="indexterm" href="#idp87657296">root 権限で実行されているサーバと SUID/SGID バイナリの安全性を高める</a></dt><dt>Firefox, <a class="indexterm" href="#idp82763728">Firefox</a></dt><dt>fix-it フロッピー, <a class="indexterm" href="#idp89642448">惨事が起きる前に</a></dt><dt>Flash, <a class="indexterm" href="#moz-flash-plugin">Firefox と Adobe® Flash® プラグイン</a></dt><dt>FORTRAN, <a class="indexterm" href="#idp84702032">どの変換フィルタをインストールすべきか?</a></dt><dt>Free Software
	Foundation, <a class="indexterm" href="#intro-history">FreeBSD 小史</a>, <a class="indexterm" href="#basics-info">GNU の Info ファイル</a></dt><dt>FreeBSD プロジェクト</dt><dd><dl><dt>history, <a class="indexterm" href="#intro-history">FreeBSD 小史</a></dt><dt>目標, <a class="indexterm" href="#goals">FreeBSD プロジェクトの目標</a></dt><dt>開発モデル, <a class="indexterm" href="#development">FreeBSD の開発モデル</a></dt></dl></dd><dt>freebsd-update (参照 updating-upgrading)</dt><dt>FreshPorts, <a class="indexterm" href="#ports-finding-applications">ソフトウェアの探し方</a></dt><dt>FTP</dt><dd><dl><dt>anonymous, <a class="indexterm" href="#ftpanon">Anonymous FTP</a>, <a class="indexterm" href="#network-services">ネットワークサービスの設定</a></dt><dt>HTTP proxy 経由, <a class="indexterm" href="#install-media">インストールメディアの選択</a></dt><dt>Passive モード, <a class="indexterm" href="#install-media">インストールメディアの選択</a></dt></dl></dd><dt>FTP サーバ, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>getty, <a class="indexterm" href="#idp91515600">概要</a></dt><dt>Ghostscript, <a class="indexterm" href="#printing-advanced-ps">非 PostScript® プリンタによる PostScript®
	  のシミュレート</a></dt><dt>GIMP, <a class="indexterm" href="#idp82935888">GIMP</a></dt><dt>GNOME, <a class="indexterm" href="#x11-wm-gnome-about">GNOME について</a></dt><dt>GNU Compiler Collection, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>GNU General Public License (GPL), <a class="indexterm" href="#goals">FreeBSD プロジェクトの目標</a></dt><dt>GNU Lesser General Public License (LGPL), <a class="indexterm" href="#goals">FreeBSD プロジェクトの目標</a></dt><dt>GNU ツールチェイン, <a class="indexterm" href="#idp85799888">Linux の ELF バイナリのインストール</a></dt><dt>GnuCash, <a class="indexterm" href="#idp83122000">GnuCash</a></dt><dt>Gnumeric, <a class="indexterm" href="#idp83130192">Gnumeric</a></dt><dt>GQview, <a class="indexterm" href="#idp83054800">GQview</a></dt><dt>Greenman, David, <a class="indexterm" href="#intro-history">FreeBSD 小史</a></dt><dt>Grimes, Rod, <a class="indexterm" href="#intro-history">FreeBSD 小史</a></dt><dt>gv, <a class="indexterm" href="#idp83044432">gv</a></dt><dt>gzip, <a class="indexterm" href="#floppies-compress">バックアップを圧縮することはできませんか?</a></dt></dl></div><div class="indexdiv"><h3>H</h3><dl><dt>HCI, <a class="indexterm" href="#idp93711056">ホストコントローラインタフェース (HCI)</a></dt><dt>hostname, <a class="indexterm" href="#idp86650064">ホスト名</a></dt><dt>hosts, <a class="indexterm" href="#idp86664144">/etc/hosts</a></dt><dt>HP-UX, <a class="indexterm" href="#idp94497616">NIS/YP とは?</a></dt><dt>HPLIP, <a class="indexterm" href="#printing-lpd-alternatives">標準スプーラの代替品</a></dt><dt>Hubbard, Jordan, <a class="indexterm" href="#intro-history">FreeBSD 小史</a></dt><dt>hw.ata.wc, <a class="indexterm" href="#idp86731728">hw.ata.wc</a></dt></dl></div><div class="indexdiv"><h3>I</h3><dl><dt>I/O ポート, <a class="indexterm" href="#troubleshooting">サウンドカードの問題についてのトラブルシューティング</a></dt><dt>ICMP_BANDLIM, <a class="indexterm" href="#idp87730384">サービス妨害攻撃</a></dt><dt>IEEE, <a class="indexterm" href="#idp89589584">pax</a></dt><dt>ifconfig, <a class="indexterm" href="#idp93671120">ifconfig コマンド</a></dt><dt>IMAP, <a class="indexterm" href="#mail-using">電子メールを使う</a>, <a class="indexterm" href="#mail-receive">メールの受け取り</a></dt><dt>init, <a class="indexterm" href="#boot-introduction">起動時の問題</a>, <a class="indexterm" href="#boot-init">init: プロセス制御の初期化</a></dt><dt>installation, <a class="indexterm" href="#bsdinstall-synopsis">この章では</a>, <a class="indexterm" href="#install-synopsis">この章では</a></dt><dd><dl><dt>from Windows, <a class="indexterm" href="#install-msdos">Windows® パーティションからのインストール</a></dt><dt>headless (serial console), <a class="indexterm" href="#headless-install">FreeBSD をモニタやキーボードのないシステムにインストールする</a></dt><dt>network</dt><dd><dl><dt>Ethernet, <a class="indexterm" href="#idp80444624">ネットワーク経由のインストールの前に</a></dt><dt>FTP, <a class="indexterm" href="#install-ftp">FreeBSD ディスクを使ったローカル FTP サイトの作成</a></dt><dt>NFS, <a class="indexterm" href="#idp80464592">NFS 経由のインストールの前に</a></dt><dt>parallel (PLIP), <a class="indexterm" href="#idp80444624">ネットワーク経由のインストールの前に</a></dt><dt>serial (PPP), <a class="indexterm" href="#idp80444624">ネットワーク経由のインストールの前に</a></dt></dl></dd></dl></dd><dt>Intel i810 graphic chipset, <a class="indexterm" href="#idp82337104">Intel® i810
	  グラフィックチップセットの設定</a></dt><dt>ip aliases, <a class="indexterm" href="#configtuning-virtual-hosts">バーチャルホスト</a></dt><dt>IP サブネット, <a class="indexterm" href="#idp93830736">はじめに</a></dt><dt>IP マスカレード, <a class="indexterm" href="#network-natoverview">概要</a></dt><dt>ipfw, <a class="indexterm" href="#idp88255440">IPFW で何ができるか</a></dt><dd><dl><dt>有効化, <a class="indexterm" href="#idp88258768">FreeBSD で IPFW を有効にする</a></dt><dt>設定, <a class="indexterm" href="#idp88276048">IPFW の設定</a></dt></dl></dd><dt>IPsec, <a class="indexterm" href="#ipsec">IPsec</a></dt><dt>IPX/SPX, <a class="indexterm" href="#idp94467152">スタンドアロン ISDN ブリッジ/ルータ</a></dt><dt>IRQ, <a class="indexterm" href="#troubleshooting">サウンドカードの問題についてのトラブルシューティング</a></dt><dt>ISDN, <a class="indexterm" href="#idp93838544">パケットフィルタ/帯域制御用ファイアウォール</a>, <a class="indexterm" href="#network-isdn">ISDN</a></dt><dd><dl><dt>カード, <a class="indexterm" href="#network-isdn-cards">ISDN カード</a></dt><dt>スタンドアロン ブリッジ/ルータ, <a class="indexterm" href="#idp94467152">スタンドアロン ISDN ブリッジ/ルータ</a></dt></dl></dd><dt>ISO 9660, <a class="indexterm" href="#idp89187024">はじめに</a></dt></dl></div><div class="indexdiv"><h3>J</h3><dl><dt>Jolitz, Bill, <a class="indexterm" href="#intro-history">FreeBSD 小史</a></dt></dl></div><div class="indexdiv"><h3>K</h3><dl><dt>KDE, <a class="indexterm" href="#x11-wm-kde">KDE</a></dt><dd><dl><dt>ディスプレイマネージャ, <a class="indexterm" href="#x11-wm-kde-kdm">KDE ディスプレイマネージャ</a></dt></dl></dd><dt>Kerberos, <a class="indexterm" href="#securing-root-and-staff">root
	アカウントとスタッフアカウントの安全性を高める</a>, <a class="indexterm" href="#idp87800784">Kerberos および SSH を用いたアクセスの問題</a>, <a class="indexterm" href="#kerberos">Kerberos</a></dt><dd><dl><dt>インストール, <a class="indexterm" href="#idp88060880">Kerberos のインストール</a></dt></dl></dd><dt>kern.maxfiles, <a class="indexterm" href="#idp86757712">kern.maxfiles</a></dt><dt>kernel 制限のチューニング, <a class="indexterm" href="#configtuning-kernel-limits">Kernel 制限のチューニング</a></dt><dt>kernel.old, <a class="indexterm" href="#boot-loader-examples">ローダの使用例</a></dt><dt>keymap, <a class="indexterm" href="#setting-console">コンソールの設定</a></dt><dt>KLD (kernel loadable object), <a class="indexterm" href="#linuxemu-lbc-install">インストール</a></dt><dt>KMyMoney, <a class="indexterm" href="#idp83143120">KMyMoney</a></dt><dt>Konqueror, <a class="indexterm" href="#idp82837328">Konqueror</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>L2CAP, <a class="indexterm" href="#idp93724368">ロジカルリンクコントロールおよびアダプテーションプロトコル (L2CAP)</a></dt><dt>LCD スクリーン, <a class="indexterm" href="#antialias">フォントのアンチエイリアス</a></dt><dt>LibreOffice, <a class="indexterm" href="#idp82979792">LibreOffice</a></dt><dt>Linux, <a class="indexterm" href="#idp94497616">NIS/YP とは?</a></dt><dd><dl><dt>/proc ファイルシステム, <a class="indexterm" href="#idp85701584">この章では</a></dt><dt>ELF バイナリ, <a class="indexterm" href="#idp85799888">Linux の ELF バイナリのインストール</a></dt><dt>Linux ライブラリのインストール, <a class="indexterm" href="#idp85762896">Linux ランタイムライブラリのインストール</a></dt></dl></dd><dt>Linux バイナリ互換機能, <a class="indexterm" href="#idp85701584">この章では</a></dt><dt>LISA, <a class="indexterm" href="#idp89637456">どのバックアッププログラムが最適ですか?</a></dt><dt>log files, <a class="indexterm" href="#idp86687312">ログファイルに関係する設定</a></dt><dt>LPD スプーリングシステム, <a class="indexterm" href="#printing-synopsis">この章では</a></dt><dt>LPRng, <a class="indexterm" href="#printing-lpd-alternatives">標準スプーラの代替品</a></dt><dt>ls, <a class="indexterm" href="#permissions">許可属性</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>MacOS, <a class="indexterm" href="#idp87955280">ワンタイムパスワードを一つ生成する</a></dt><dt>make.conf, <a class="indexterm" href="#src-updating">設定ファイル</a></dt><dt>MAKEDEV, <a class="indexterm" href="#serial-hw-config">シリアルポートの設定</a></dt><dt>maxproc, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>MD5, <a class="indexterm" href="#crypt">DES, MD5 と Crypt</a></dt><dt>memorylocked, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>memoryuse, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>mencoder, <a class="indexterm" href="#video-mplayer">MPlayer および
	  MEncoder</a></dt><dt>
	  mergemaster
	, <a class="indexterm" href="#mergemaster">設定ファイルの同期</a></dt><dt>Microsoft Windows, <a class="indexterm" href="#install-drive-bios-numbering">BIOS ドライブの番号付け</a></dt><dt>MIME, <a class="indexterm" href="#setting-locale">ロケールの設定</a>, <a class="indexterm" href="#startup-file">シェルの初期化ファイルによる方法</a></dt><dt>MIT, <a class="indexterm" href="#idp88060880">Kerberos のインストール</a></dt><dt>modem, <a class="indexterm" href="#idp91496400">モデムとケーブル</a></dt><dt>mount, <a class="indexterm" href="#idp89663568">惨事の後は</a></dt><dt>mount8, <a class="indexterm" href="#headless-install">FreeBSD をモニタやキーボードのないシステムにインストールする</a></dt><dt>mountd, <a class="indexterm" href="#idp93904848">NFS はどのように動作するのか</a></dt><dt>moused, <a class="indexterm" href="#setting-console">コンソールの設定</a></dt><dt>MPlayer, <a class="indexterm" href="#video-mplayer">MPlayer および
	  MEncoder</a></dt><dt>MS-DOS, <a class="indexterm" href="#install-drive-bios-numbering">BIOS ドライブの番号付け</a>, <a class="indexterm" href="#printing-troubleshooting">トラブルシューティング</a>, <a class="indexterm" href="#idp87955280">ワンタイムパスワードを一つ生成する</a></dt><dt>MX レコード, <a class="indexterm" href="#mail-config">基本事項</a></dt><dt>MySQL, <a class="indexterm" href="#l10n-compiling">国際化に対応したプログラムのコンパイル</a></dt></dl></div><div class="indexdiv"><h3>N</h3><dl><dt>NAT, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>natd, <a class="indexterm" href="#network-natoverview">概要</a></dt><dt>Net/2, <a class="indexterm" href="#intro-history">FreeBSD 小史</a></dt><dt>NetApp, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt><dt>NetBSD, <a class="indexterm" href="#idp94497616">NIS/YP とは?</a></dt><dt>Netcraft, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt><dt>NetEase, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt><dt>Netflix, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt><dt>newfs, <a class="indexterm" href="#idp89663568">惨事の後は</a></dt><dt>newsyslog.conf, <a class="indexterm" href="#idp86697552">newsyslog.conf</a></dt><dt>NFS, <a class="indexterm" href="#disks-virtual">ネットワーク、メモリ、そしてファイルベースのファイルシステム</a>, <a class="indexterm" href="#idp90008016">NFS 上の クォータ</a>, <a class="indexterm" href="#network-nfs">NFS</a></dt><dd><dl><dt>エクスポートの例, <a class="indexterm" href="#network-configuring-nfs">NFS の設定</a></dt><dt>サーバ, <a class="indexterm" href="#idp93904848">NFS はどのように動作するのか</a></dt><dt>ディスクレス稼働, <a class="indexterm" href="#idp94282960">TFTP および NFS サーバの設定</a></dt><dt>マウント, <a class="indexterm" href="#network-configuring-nfs">NFS の設定</a></dt><dt>使用法, <a class="indexterm" href="#idp93995088">実用的な使い方</a></dt><dt>複数のマシンにインストール, <a class="indexterm" href="#small-lan">複数のマシンで追いかける</a></dt><dt>設定, <a class="indexterm" href="#network-configuring-nfs">NFS の設定</a></dt></dl></dd><dt>nfsd, <a class="indexterm" href="#idp93904848">NFS はどのように動作するのか</a></dt><dt>NIS, <a class="indexterm" href="#idp94497616">NIS/YP とは?</a></dt><dd><dl><dt>クライアント, <a class="indexterm" href="#idp94533968">マシンの分類</a></dt><dt>クライアントの設定, <a class="indexterm" href="#idp94654032">NIS クライアントの設定</a></dt><dt>サーバ設定, <a class="indexterm" href="#idp94581584">NIS マスターサーバの設定</a></dt><dt>スレーブサーバ, <a class="indexterm" href="#idp94533968">マシンの分類</a>, <a class="indexterm" href="#idp94628560">NIS スレーブサーバの設定</a></dt><dt>ドメイン, <a class="indexterm" href="#idp94497616">NIS/YP とは?</a></dt><dt>ドメイン名, <a class="indexterm" href="#idp94566864">NIS ドメイン名を決める</a></dt><dt>パスワード形式, <a class="indexterm" href="#idp94811728">パスワード形式</a></dt><dt>マスタサーバ, <a class="indexterm" href="#idp94533968">マシンの分類</a></dt><dt>マップ, <a class="indexterm" href="#idp94603600">NIS マップの初期化</a></dt></dl></dd><dt>NOTES, <a class="indexterm" href="#kernelconfig-config">コンフィグレーションファイル</a></dt><dt>Novell, <a class="indexterm" href="#intro-history">FreeBSD 小史</a></dt><dt>ntalk, <a class="indexterm" href="#idp87657296">root 権限で実行されているサーバと SUID/SGID バイナリの安全性を高める</a></dt><dt>NTP, <a class="indexterm" href="#network-ntp">NTP</a></dt><dd><dl><dt>ntp.conf, <a class="indexterm" href="#idp95283152">一般設定</a></dt><dt>ntpd, <a class="indexterm" href="#idp95250512">概説</a></dt><dt>サーバ選択, <a class="indexterm" href="#idp95255120">適切な NTP サーバの選択</a></dt><dt>設定, <a class="indexterm" href="#idp95259216">マシンの設定</a></dt></dl></dd><dt>ntpdate, <a class="indexterm" href="#idp95261008">基本設定</a></dt></dl></div><div class="indexdiv"><h3>O</h3><dl><dt>OBEX, <a class="indexterm" href="#idp93800144">OBEX プッシュ (OPUSH) プロファイル</a></dt><dt>Okular, <a class="indexterm" href="#idp83074512">Okular</a></dt><dt>OpenBSD, <a class="indexterm" href="#idp94497616">NIS/YP とは?</a></dt><dt>openfiles, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>OpenSSH, <a class="indexterm" href="#openssh">OpenSSH</a></dt><dd><dl><dt>secure copy, <a class="indexterm" href="#idp88647248">Secure copy</a></dt><dt>クライアント, <a class="indexterm" href="#idp88629328">SSH クライアント</a></dt><dt>トンネリング, <a class="indexterm" href="#idp88679888">SSH トンネリング</a></dt><dt>有効化, <a class="indexterm" href="#idp88625104">sshd を有効にする</a></dt><dt>設定, <a class="indexterm" href="#idp88654800">設定</a></dt></dl></dd><dt>OpenSSL, <a class="indexterm" href="#openssl">OpenSSL</a></dt><dd><dl><dt>インストール, <a class="indexterm" href="#openssl">OpenSSL</a></dt></dl></dd><dt>Opera, <a class="indexterm" href="#idp82815184">Opera</a></dt><dt>OS/2, <a class="indexterm" href="#printing-troubleshooting">トラブルシューティング</a>, <a class="indexterm" href="#idp88947792">専用モード</a></dt><dt>OSPF, <a class="indexterm" href="#network-dedicated-router">ルータの構築</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>packages, <a class="indexterm" href="#ports-synopsis">この章では</a></dt><dt>Pair Networks, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt><dt>pairing, <a class="indexterm" href="#idp93745104">デバイスのペアリング</a></dt><dt>partition layout, <a class="indexterm" href="#configtuning-initial">パーティションレイアウトのデザイン</a></dt><dt>passwd, <a class="indexterm" href="#users-passwd">passwd</a></dt><dt>pax, <a class="indexterm" href="#idp89589584">pax</a></dt><dt>PCI, <a class="indexterm" href="#sound-setup">サウンドカードの設定</a></dt><dt>PCL, <a class="indexterm" href="#printing-testing">プリンタとの通信状況を調べる</a>, <a class="indexterm" href="#printing-troubleshooting">トラブルシューティング</a></dt><dt>PDF</dt><dd><dl><dt>viewing, <a class="indexterm" href="#idp83065296">ePDFView</a>, <a class="indexterm" href="#idp83074512">Okular</a></dt><dt>ビューア, <a class="indexterm" href="#idp83032272">Xpdf</a>, <a class="indexterm" href="#idp83044432">gv</a></dt></dl></dd><dt>pgp公開鍵, <a class="indexterm" href="#pgpkeys">PGP 公開鍵</a></dt><dt>pkg</dt><dd><dl><dt>search, <a class="indexterm" href="#ports-finding-applications">ソフトウェアの探し方</a></dt></dl></dd><dt>PLIP, <a class="indexterm" href="#network-plip">パラレルライン IP (PLIP)</a></dt><dt>POP, <a class="indexterm" href="#mail-using">電子メールを使う</a>, <a class="indexterm" href="#mail-receive">メールの受け取り</a></dt><dt>portmap, <a class="indexterm" href="#idp93904848">NFS はどのように動作するのか</a>, <a class="indexterm" href="#idp94508880">知っておくべき用語 / プロセス</a></dt><dt>portmaster, <a class="indexterm" href="#portmaster">portmaster
	  を用いた ports のアップグレード</a></dt><dt>ports, <a class="indexterm" href="#ports-synopsis">この章では</a></dt><dd><dl><dt>installing, <a class="indexterm" href="#ports-skeleton">ports のインストール</a></dt><dt>アップグレード, <a class="indexterm" href="#ports-upgrading">ports のアップグレード</a></dt><dt>ディスク容量, <a class="indexterm" href="#ports-disk-space">ports とディスク容量</a></dt><dt>削除, <a class="indexterm" href="#ports-removing">インストールした ports の削除</a></dt></dl></dd><dt>ports collection, <a class="indexterm" href="#linuxemu-libs-port">linux_base の port を用いたインストール</a></dt><dt>portupgrade, <a class="indexterm" href="#portupgrade">Portupgrade を用いた ports のアップグレード</a></dt><dt>POSIX, <a class="indexterm" href="#idp89589584">pax</a>, <a class="indexterm" href="#setting-locale">ロケールの設定</a></dt><dt>PostScript, <a class="indexterm" href="#printing-ports">ポートとケーブル</a>, <a class="indexterm" href="#printing-testing">プリンタとの通信状況を調べる</a></dt><dd><dl><dt>エミュレーション, <a class="indexterm" href="#printing-advanced-ps">非 PostScript® プリンタによる PostScript®
	  のシミュレート</a></dt><dt>ビューア, <a class="indexterm" href="#idp83044432">gv</a></dt></dl></dd><dt>PPP, <a class="indexterm" href="#mail-trouble">トラブルシュート</a>, <a class="indexterm" href="#idp94408912">ISDN ターミナルアダプタ</a></dt><dt>pw, <a class="indexterm" href="#users-pw">pw</a>, <a class="indexterm" href="#adm-setup">管理者の設定</a></dt></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>RAID</dt><dd><dl><dt>CCD, <a class="indexterm" href="#ccd">Concatenated Disk Driver (CCD) の設定</a></dt><dt>Vinum, <a class="indexterm" href="#vinum">Vinum ボリュームマネージャ</a></dt><dt>ソフトウェア, <a class="indexterm" href="#ccd">Concatenated Disk Driver (CCD) の設定</a>, <a class="indexterm" href="#vinum">Vinum ボリュームマネージャ</a></dt><dt>ハードウェア, <a class="indexterm" href="#raid-hard">ハードウェア RAID</a></dt></dl></dd><dt>Rambler, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt><dt>rc files</dt><dd><dl><dt>rc.conf, <a class="indexterm" href="#configtuning-core-configuration">中核となる設定</a></dt></dl></dd><dt>rc ファイル</dt><dd><dl><dt>rc.serial, <a class="indexterm" href="#serial-hw-config">シリアルポートの設定</a>, <a class="indexterm" href="#idp91590992">/etc/rc.serial</a></dt></dl></dd><dt>rc ファイル群, <a class="indexterm" href="#boot-rc">リソース設定 (rc)</a></dt><dt>resolv.conf, <a class="indexterm" href="#idp86651856">/etc/resolv.conf</a></dt><dt>restore, <a class="indexterm" href="#idp89523024">ダンプとリストア</a></dt><dt>RFCOMM, <a class="indexterm" href="#idp93742288">RFCOMM プロトコル</a></dt><dt>RIP, <a class="indexterm" href="#network-dedicated-router">ルータの構築</a></dt><dt>rlogind, <a class="indexterm" href="#idp87657296">root 権限で実行されているサーバと SUID/SGID バイナリの安全性を高める</a></dt><dt>rmuser, <a class="indexterm" href="#users-rmuser">rmuser</a></dt><dt>root パーティション, <a class="indexterm" href="#idp89663568">惨事の後は</a></dt><dt>RPMs, <a class="indexterm" href="#installingnecessaryrpms">必要な RPM のインストール</a></dt><dt>RS-232C ケーブル, <a class="indexterm" href="#serial-terminology">用語解説</a>, <a class="indexterm" href="#term-cables-std">スタンダード RS-232C ケーブル</a></dt><dt>rshd, <a class="indexterm" href="#idp87657296">root 権限で実行されているサーバと SUID/SGID バイナリの安全性を高める</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>S/Key, <a class="indexterm" href="#skey">S/Key</a></dt><dt>sbsize, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>scp, <a class="indexterm" href="#idp88647248">Secure copy</a></dt><dt>screenmap, <a class="indexterm" href="#setting-console">コンソールの設定</a></dt><dt>SCSI, <a class="indexterm" href="#install-drive-bios-numbering">BIOS ドライブの番号付け</a></dt><dt>SDL, <a class="indexterm" href="#video-interface">ビデオ機能の決定</a></dt><dt>SDP, <a class="indexterm" href="#idp93757136">サービスディスカバリプロトコル (SDP)</a></dt><dt>sendmail, <a class="indexterm" href="#idp87657296">root 権限で実行されているサーバと SUID/SGID バイナリの安全性を高める</a>, <a class="indexterm" href="#sendmail">sendmail の設定</a></dt><dt>serial console, <a class="indexterm" href="#headless-install">FreeBSD をモニタやキーボードのないシステムにインストールする</a></dt><dt>shutdown, <a class="indexterm" href="#boot-shutdown">シャットダウン動作</a></dt><dt>signal 11, <a class="indexterm" href="#updating-questions">よくある質問</a></dt><dt>Sina, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt><dt>SMTP, <a class="indexterm" href="#mail-config">基本事項</a></dt><dt>Solaris, <a class="indexterm" href="#idp86488016">どのように動くのでしょう?</a>, <a class="indexterm" href="#idp94497616">NIS/YP とは?</a></dt><dt>Sony Japan, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt><dt>SourceForge, <a class="indexterm" href="#ports-finding-applications">ソフトウェアの探し方</a></dt><dt>src.conf, <a class="indexterm" href="#src-updating">設定ファイル</a></dt><dt>SSH</dt><dd><dl><dt>sshd, <a class="indexterm" href="#ssh-login">SSH ログインを有効にする</a></dt></dl></dd><dt>ssh, <a class="indexterm" href="#idp87800784">Kerberos および SSH を用いたアクセスの問題</a></dt><dt>sshd, <a class="indexterm" href="#idp87657296">root 権限で実行されているサーバと SUID/SGID バイナリの安全性を高める</a></dt><dt>stacksize, <a class="indexterm" href="#users-limiting">ユーザへの制限</a></dt><dt>su, <a class="indexterm" href="#securing-root-and-staff">root
	アカウントとスタッフアカウントの安全性を高める</a>, <a class="indexterm" href="#idp88879952">sysinstall(8) の利用</a></dt><dt>Subversion, <a class="indexterm" href="#development">FreeBSD の開発モデル</a>, <a class="indexterm" href="#stable">FreeBSD-STABLE を使う</a>, <a class="indexterm" href="#synching">ソースの同期</a>, <a class="indexterm" href="#svn">Subversion を使う</a></dt><dt>Subversion Repository</dt><dd><dl><dt>ミラーサイト, <a class="indexterm" href="#svn-mirrors">Subversion ミラーサイト</a></dt></dl></dd><dt>Subversion リポジトリ, <a class="indexterm" href="#development">FreeBSD の開発モデル</a></dt><dt>SunOS, <a class="indexterm" href="#idp94566864">NIS ドメイン名を決める</a></dt><dt>SVN (参照 Subversion)</dt><dt>swap partition, <a class="indexterm" href="#configtuning-initial">パーティションレイアウトのデザイン</a></dt><dt>swap sizing, <a class="indexterm" href="#configtuning-initial">パーティションレイアウトのデザイン</a></dt><dt>sysctl, <a class="indexterm" href="#idp86707536">sysctl.conf</a>, <a class="indexterm" href="#configtuning-sysctl">sysctl によるチューニング</a>, <a class="indexterm" href="#idp87697744">カーネルのコア、raw デバイス、ファイルシステムの安全性を
      高める</a></dt><dt>sysctl によるチューニング, <a class="indexterm" href="#configtuning-sysctl">sysctl によるチューニング</a></dt><dt>sysctl.conf, <a class="indexterm" href="#idp86707536">sysctl.conf</a></dt><dt>sysinstall, <a class="indexterm" href="#setting-console">コンソールの設定</a>, <a class="indexterm" href="#idp94845136">FreeBSD への組み込み</a></dt><dd><dl><dt>ディスクの追加, <a class="indexterm" href="#idp88879952">sysinstall(8) の利用</a></dt></dl></dd><dt>syslog.conf, <a class="indexterm" href="#idp86688464">syslog.conf</a></dt><dt>sysutils/mkisofs, <a class="indexterm" href="#idp89187024">はじめに</a></dt></dl></div><div class="indexdiv"><h3>T</h3><dl><dt>tar, <a class="indexterm" href="#floppies-compress">バックアップを圧縮することはできませんか?</a>, <a class="indexterm" href="#idp89557456">tar</a></dt><dt>TCP/IP ネットワーキング, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>tcpwrapper, <a class="indexterm" href="#idp94671184">NIS セキュリティ</a></dt><dt>TELEHOUSE America, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt><dt>telnetd, <a class="indexterm" href="#idp87657296">root 権限で実行されているサーバと SUID/SGID バイナリの安全性を高める</a></dt><dt>TeX, <a class="indexterm" href="#printing-intro-why">どうしてスプーラを使うべきなのか</a>, <a class="indexterm" href="#printing-lpr-options-format">整形と変換に関するオプション</a></dt><dd><dl><dt>DVI ファイルの印刷, <a class="indexterm" href="#idp84686928">なぜ、変換フィルタをインストールするのか?</a></dt></dl></dd><dt>TFTP</dt><dd><dl><dt>ディスクレス稼働, <a class="indexterm" href="#idp94282960">TFTP および NFS サーバの設定</a></dt></dl></dd><dt>traceroute, <a class="indexterm" href="#idp93494224">トラブルシューティング</a></dt><dt>troff, <a class="indexterm" href="#printing-advanced-filters">フィルタはどのように機能しているか</a></dt><dt>Tru64 UNIX, <a class="indexterm" href="#idp94603600">NIS マップの初期化</a></dt><dt>TrueType フォント, <a class="indexterm" href="#truetype">TrueType® フォント</a></dt><dt>ttyd, <a class="indexterm" href="#serial-hw-config">シリアルポートの設定</a></dt><dt>tunefs, <a class="indexterm" href="#idp86743888">ソフトアップデート</a></dt><dt>TV カード, <a class="indexterm" href="#tvcard">TV カードの設定</a></dt></dl></div><div class="indexdiv"><h3>U</h3><dl><dt>U.C. Berkeley, <a class="indexterm" href="#intro-history">FreeBSD 小史</a></dt><dt>UDP, <a class="indexterm" href="#idp94837328">DHCP の動作</a></dt><dt>Unicode, <a class="indexterm" href="#idp90321616">カーネルとファイルシステム</a></dt><dt>UNIX, <a class="indexterm" href="#permissions">許可属性</a></dt><dt>Updating and Upgrading, <a class="indexterm" href="#updating-upgrading-freebsdupdate">FreeBSD Update</a>, <a class="indexterm" href="#updating-upgrading-documentation">ドキュメントのアップデート</a>, <a class="indexterm" href="#doc-ports-install-package">ports を用いたドキュメンテーションのアップデート</a></dt><dt>USENET, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>UUCP, <a class="indexterm" href="#mail-trouble">トラブルシュート</a></dt></dl></div><div class="indexdiv"><h3>V</h3><dl><dt>vfs.vmiodirenable, <a class="indexterm" href="#idp86729296">vfs.vmiodirenable</a></dt><dt>vi, <a class="indexterm" href="#editors">テキストエディタ</a></dt><dt>vipw, <a class="indexterm" href="#adm-setup">管理者の設定</a></dt></dl></div><div class="indexdiv"><h3>W</h3><dl><dt>Walnut Creek CDROM, <a class="indexterm" href="#intro-history">FreeBSD 小史</a></dt><dt>Weathernews, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt><dt>web サーバ, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dt>WEP, <a class="indexterm" href="#idp93643088">WEP</a></dt><dt>wheel, <a class="indexterm" href="#securing-root-and-staff">root
	アカウントとスタッフアカウントの安全性を高める</a></dt><dt>Williams, Nate, <a class="indexterm" href="#intro-history">FreeBSD 小史</a></dt><dt>Windows, <a class="indexterm" href="#idp87955280">ワンタイムパスワードを一つ生成する</a></dt><dt>Windows NT, <a class="indexterm" href="#idp94497616">NIS/YP とは?</a></dt><dt>world の再構築, <a class="indexterm" href="#makeworld">world の再構築</a></dt><dd><dl><dt>時間, <a class="indexterm" href="#make-buildworld">変数とターゲット</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>X</h3><dl><dt>X Window System, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt><dd><dl><dt>Accelerated-X, <a class="indexterm" href="#os-overview">FreeBSD で何ができるの?</a></dt></dl></dd><dt>X ディスプレイマネージャ, <a class="indexterm" href="#idp82449744">概要</a></dt><dt>X11, <a class="indexterm" href="#x-config">X11 の設定</a></dt><dt>X11 Input Method (XIM), <a class="indexterm" href="#idp90317776">非英語の文字を入力する</a></dt><dt>X11 True Type フォントサーバ, <a class="indexterm" href="#idp90313936">フォントの表示</a></dt><dt>X11 のチューニング, <a class="indexterm" href="#idp82253392">X11 の設定</a></dt><dt>XML, <a class="indexterm" href="#antialias">フォントのアンチエイリアス</a></dt><dt>Xorg, <a class="indexterm" href="#x-config">X11 の設定</a></dt><dt>xorg.conf, <a class="indexterm" href="#idp82253392">X11 の設定</a></dt><dt>Xpdf, <a class="indexterm" href="#idp83032272">Xpdf</a></dt><dt>XVideo, <a class="indexterm" href="#video-interface">ビデオ機能の決定</a></dt></dl></div><div class="indexdiv"><h3>Y</h3><dl><dt>Yahoo!, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt><dt>Yandex, <a class="indexterm" href="#introduction-nutshell-users">FreeBSD はどこに使われていますか?</a></dt></dl></div></div></div><div class="colophon"><h1 class="title"><a id="colophon"></a>奥付</h1><p>この本は <span class="quote">「<span class="quote">The FreeBSD Documentation Project</span>」</span>
    に対するたくさんの人々の共同作業によって完成したものです。
    文書は DocBook DTD を用いた XML 形式で管理されており、
    XSLT を使って XML からさまざまな可読形式に組版されています。
    もし、Donald Knuth 氏による組版言語 <span class="application">TeX</span>、
    Leslie Lamport 氏による <span class="application">LaTeX</span> および
    Sebastian Rahtz 氏による <span class="application">JadeTeX</span>
    マクロパッケージがなかったら、
    この文書の書籍版を実現することはできなかったでしょう。</p></div></div></body></html>