<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>4.5. ディスク構成</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD ハンドブック" /><link rel="up" href="basics.html" title="第4章 UNIX の基礎知識" /><link rel="prev" href="dirstructure.html" title="4.4. ディレクトリ構造" /><link rel="next" href="mount-unmount.html" title="4.6. ファイルシステムのマウントとアンマウント" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.5. ディスク構成</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dirstructure.html">戻る</a>〓</td><th width="60%" align="center">第4章 UNIX の基礎知識</th><td width="20%" align="right">〓<a accesskey="n" href="mount-unmount.html">次へ</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disk-organization"></a>4.5. ディスク構成</h2></div></div></div><p>ファイルを見つけるために FreeBSD
	が使用する構成の一番小さな単位はファイル名です。
	ファイル名は、大文字と小文字を区別します。
	このことは
	<code class="filename">readme.txt</code> および <code class="filename">README.TXT</code>
	が異なる二つのファイルであることを意味します。
	FreeBSD はそのファイルがプログラム、または文書、
	あるいはその他の形式かどうかを決定するために拡張子を使用しません。</p><p>ファイルはディレクトリ内に格納されます。
	ディレクトリはファイルを一つも含んでいないかもしれせんし、
	または数百のファイルを含んでいるかもしれません。
	ディレクトリはまた別のディレクトリを含むことができます。
	つまり、ディレクトリの階層構造を構築することができます。
	このことにより、データ構造がはるかに簡単になります。</p><p>ファイルおよびディレクトリは、
	必要な他のディレクトリ名とスラッシュ (<code class="literal">/</code>) を後に続けて
	ファイル名またはディレクトリ名を与えることによって参照されます。
	
	<code class="filename">foo</code> ディレクトリがあって、その中に
	<code class="filename">bar</code> ディレクトリがあるとします。
	そして、その中に <code class="filename">readme.txt</code> があるとすると、
	ファイルへのフルネーム、または<em class="firstterm">パス</em>は
	<code class="filename">foo/bar/readme.txt</code> となります。</p><p>ディレクトリおよびファイルはファイルシステム内に格納されます。
	どのファイルシステムは、そのファイルシステムのための
	<em class="firstterm">ルートディレクトリ</em> とよばれる、
	まさに頂点の位置にちょうど一つのディレクトリを含んでいます。
	このルートディレクトリは他のディレクトリを含むことができます。</p><p>これまでのところ、これはあなたの使ったことのある他の OS
	とおそらく似ているかもしれません。少し違いがあります。
	たとえば、<span class="trademark">MS-DOS</span>® ではファイル名とディレクトリ名を分けるのに
	<code class="literal">\</code> を使います。
	一方、<span class="trademark">Mac OS</span>® では <code class="literal">:</code> を使います。</p><p>FreeBSD はパス内にドライブレターまたは他のドライブ名を使いません。
	あなたは FreeBSD で <code class="filename">c:/foo/bar/readme.txt</code>
	とは書かないでしょう。</p><p>その代わり、一つのファイルシステムは
	<em class="firstterm">ルートファイルシステム</em>として設計されています。
	ルートファイルシステムのルートディレクトリは <code class="literal">/</code>
	として参照されます。それから、他のすべてのファイルシステムは、
	ルートファイルシステム以下に <em class="firstterm">マウント</em>
	されます。
	あなたが FreeBSD システムでどんなに多くのディスクを使用しても、
	すべてのディレクトリは、
	同じディスクの一部であるように見えるので問題ありません。</p><p><code class="literal">A</code>,<code class="literal">B</code> および
	<code class="literal">C</code>
	と呼ばれる三つのファイルシステムがあると仮定しましょう。
	それぞれのファイルファイルシステムには一つのルートディレクトリがあり、
	<code class="literal">A1</code>, <code class="literal">A2</code>
	と呼ばれている二つの他のディレクトリを含んでいます
	(同様に	<code class="literal">B1</code>, <code class="literal">B2</code> および
	<code class="literal">C1</code>, <code class="literal">C2</code> があります)。</p><p><code class="literal">A</code> をルートファイルシステムとします。
	このディレクトリになにが含まれているか見るために
	<code class="command">ls</code> コマンドを使うと、
	<code class="literal">A1</code> および <code class="literal">A2</code>
	の二つのサブディレクトリが現れるでしょう。
	ディレクトリツリーは以下のようになります。</p><div class="mediaobject"><img src="install/example-dir1.png" /></div><p>ファイルシステムはファイルシステム内のディレクトリにマウントしなければいけません。
	それでは、<code class="literal">A1</code> ディレクトリに
	<code class="literal">B</code> ファイルシステムをマウントすると仮定します。
	<code class="literal">B</code> のルートディレクトリは <code class="literal">A1</code>
	に置き換えられ、
	そして <code class="literal">B</code> 内のディレクトリがそれに応じて現れます。</p><div class="mediaobject"><img src="install/example-dir2.png" /></div><p><code class="literal">B1</code> または <code class="literal">B2</code>
	内にあるどんなファイルも、必要なときに
	<code class="filename">/A1/B1</code> または <code class="filename">/A1/B2</code>
	で到達できます。
	<code class="filename">/A1</code>
	にあったすべてのファイルは一時的に隠されました。
	それらは <code class="literal">B</code> が
	A から<em class="firstterm">アンマウント</em>されたら再び現れるでしょう。</p><p>もし <code class="literal">B</code> が <code class="literal">A2</code>
	にマウントされていたら、この図のようになります。</p><div class="mediaobject"><img src="install/example-dir3.png" /></div><p>そして、パスはそれぞれ <code class="filename">/A2/B1</code> および
	<code class="filename">/A2/B2</code> となるでしょう。</p><p>ファイルシステムは互いのファイルシステム上にもマウントできます。
	上記の最後の例に続けて、<code class="literal">C</code> ファイルシステム は
	<code class="literal">B</code> ファイルシステム内の <code class="literal">B1</code>
	ディレクトリ上にマウントできます。
	次の図のようになります。</p><div class="mediaobject"><img src="install/example-dir4.png" /></div><p>または <code class="literal">C</code> は <code class="literal">A1</code> の下の
	<code class="literal">A</code> ファイルシステムに直接マウントできます。</p><div class="mediaobject"><img src="install/example-dir5.png" /></div><p>もしあなたが <span class="trademark">MS-DOS</span>® を使いなれているなら、
	まったく同じではありませんが、これは <code class="command">join</code> コマンドと
	似ています。</p><p>これは、通常あなた自身が心配する必要のあるものではありません。
	一般的に、FreeBSD をインストールするときにファイルシステムを作成し、
	どこにマウントするか決定します。そして、
	新しいディスクを追加しなければそれらを変更することはありません。</p><p>一つの大きなファイルシステムを用意し、
	他のファイルシステムを作成する必要としないことはまったくもって可能です。
	この方法にはいくつかの短所と一つの利点があります。</p><div class="itemizedlist"><div class="itemizedlist-title">マルチファイルシステムの利点</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>異なったファイルシステムは異なった
	    <em class="firstterm">マウントオプション</em> を使用できます。
	    たとえば、注意深い考えなのですが、
	    ルートファイルシステムを読みだし専用でマウントして、
	    不注意によって重大なファイルを削除、
	    または編集できないようににすることができます。
	    また、<code class="filename">/home</code>
	    のようなユーザが書き込み可能なファイルシステムを他のファイルシステムと分けることによって、
	    <em class="firstterm">nosuid</em> でマウントすることも可能になります。
	    このオプションは、ファイルシステムに記録されている
	    <em class="firstterm">suid</em>/<em class="firstterm">guid</em>
	    の実行可能ビットを有効にしないので、安全性を高めることができるでしょう。</p></li><li class="listitem"><p>FreeBSD はファイルシステムがどのように使われているかによって、
	    自動的にファイルシステム上のファイルの配置を最適化します。
	    したがって、連続的に書き込まれた多くの小さなファイルが含まれているファイルシステムは、
	    より大きく少ないファイルが含まれているファイルシステムと異なる最適化をするでしょう。
	    一つの大きなファイルシステムを作成すると、
	    この最適化は成り立たなくなります。</p></li><li class="listitem"><p>FreeBSD のファイルシステムはトラブルが起きてもとても強固です。
	    しかしながら臨界点でのトラブルは、
	    ファイルシステムの構造にまだ損害を与えるかもしれません。
	    マルチファイルシステムへデータを分割しておくことで、
	    必要なときにバックアップからレストアすることをより容易にして、
	    まだシステムが回復するかもしれません。</p></li></ul></div><div class="itemizedlist"><div class="itemizedlist-title">シングルファイルシステムの利点</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ファイルシステムは固定サイズです。
	    FreeBSD をインストールするときにファイルシステムを作成して、
	    固定サイズを割りあてたなら、
	    後になってそのパーティションをより大きくする必要があると気づくかもしれません。
	    パーティションのサイズを変更するには、
	    バックアップ、新しいサイズを指定したファイルシステムの再作成、
	    バックアップしたデータをリストアする作業が必要となるでしょう。</p><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD には、
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">growfs</span>(8)</span></a> コマンドがあります。
	      このコマンドは、この制限を取り除いて、
	      ファイルシステムのファイルを直ちに増加させることを可能にします。
	      </p></div></li></ul></div><p>ファイルシステムはパーティション内に含まれています。
	FreeBSD の <span class="trademark">UNIX</span>® 遺産のために、
	これは普段使われるパーティション (例えば <span class="trademark">MS-DOS</span>® パーティション)
	という用語の意味とは違う意味を持っています。
	それぞれのパーティションは <code class="literal">a</code> から
	<code class="literal">h</code> までの文字で区別されます。
	それぞれのパーティションは、
	一つのファイルシステムだけを含むことができます。
	このことは、ファイルシステムがファイルシステムの階層上の典型的なマウントポイント、
	または含まれているパーティションの文字によって記述されることを意味します。</p><p>FreeBSD は <em class="firstterm">スワップ領域</em>
	にもまたディスク領域を使用します。
	スワップ領域は FreeBSD に <em class="firstterm">仮想メモリ</em>
	を提供します。
	これはあなたのコンピュータが、
	実際に搭載している以上のメモリがあるかのように振舞います。
	FreeBSD がメモリを使い果たしたときに、
	現在使用されていないデータのいくつかをスワップ領域に移動し、
	そのデータが必要となったときに 
	(その他のデータをスワップ領域に移動させてから) 
	メモリ内に移動しなおします。</p><p>いくつかのパーティションはある慣習と関係づけられています。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>パーティション</th><th>慣習</th></tr></thead><tbody valign="top"><tr><td valign="top"><code class="literal">a</code></td><td valign="top">通常、ルートパーティションを含みます。</td></tr><tr><td valign="top"><code class="literal">b</code></td><td valign="top">通常、スワップ領域を含みます。</td></tr><tr><td valign="top"><code class="literal">c</code></td><td valign="top">通常、スライス全体と同じサイズです。
		これは、スライス全体にアクセス必要のあるユーティリティ
		(たとえば、ひどいブロックスキャナ) が、
		<code class="literal">c</code> 
		パーティションにアクセスすることを可能にします。通常、
		このパーティション内にファイルシステムを作成しないでしょう。</td></tr><tr><td valign="top"><code class="literal">d</code></td><td valign="top"><code class="literal">d</code> パーティションは、
		それに関連づけられた特別な意味を持っていましたが、
		今は無いので、普通のパーティションとして動作するでしょう。</td></tr></tbody></table></div><p>ファイルシステムを含んだそれぞれのパーティションは、FreeBSD
	が <em class="firstterm">スライス</em> と呼ぶものの中に格納されます。
	スライスは FreeBSD の用語で、
	普通はパーティションと呼ばれるものです。
	もう一度言及しますが、これは FreeBSD の <span class="trademark">UNIX</span>® 背景によるものです。
	スライスは 1 から 4 までの番号がつけられます。</p><a id="idp82714704" class="indexterm"></a><a id="idp82719440" class="indexterm"></a><a id="idp82719952" class="indexterm"></a><p>スライス番号は 1 から始まり
	<code class="literal">s</code> を前につけられて、デバイス名の後に続きます。
	したがって、<span class="quote">「<span class="quote">da0<span class="emphasis"><em>s1</em></span></span>」</span>
	は一番目の SCSI ドライブ上の 一番目のスライスです。
	ディスク上に四つの物理スライスだけが存在できます。しかし、
	適切な種類の物理スライス内に論理スライスをもつことができます。
	これらの拡張されたスライス番号は 5 から始まります。したがって、
	<span class="quote">「<span class="quote">ad0<span class="emphasis"><em>s5</em></span></span>」</span> 
	は、一番目の IDE ディスク上の一番目の拡張スライスです。
	これらのデバイスは、
	スライスを占有することを予期するファイルシステムによって使用されます。</p><p>スライスや <span class="quote">「<span class="quote">危険な専用</span>」</span> の物理ドライブ、
	そして他のドライブは <code class="literal">a</code> から <code class="literal">h</code>
	までの文字として表される <em class="firstterm">パーティション</em>
	を含んでいます。
	この文字はデバイス名に追加されます。したがって、
	<span class="quote">「<span class="quote">da0<span class="emphasis"><em>a</em></span></span>」</span> 
	は一番目の <span class="quote">「<span class="quote">危険な専用</span>」</span> da ドライブ上の
	a パーティションです。
	<span class="quote">「<span class="quote">ad1s3<span class="emphasis"><em>e</em></span></span>」</span> は、
	二番目の IDE ディスク上の 三番目のスライス内にある五番目のパーティションです。</p><p>最後に、システム上のそれぞれのディスクは識別されます。
	ディスク名はどの種類のディスクであるかを示す記号ではじまり、
	どのディスクかを示す数字が続きます。
	スライスとは違いディスクの番号づけは 0 から始まります。
	共通の記号は <a class="xref" href="disk-organization.html#basics-dev-codes" title="表4.1 ディスクデバイス記号">表4.1「ディスクデバイス記号」</a>
	に示されます。</p><p>パーティションを参照するときには、
	FreeBSD はパーティションを含むスライスおよびパーティションも指定することを必要とします。
	そしてスライスを参照するときはディスク名も参照しないといけません。
	したがって、ディスク名、<code class="literal">s</code>、スライス番号、
	そしてパーティション文字を並べることによってパーティションを参照します。
	<a class="xref" href="disk-organization.html#basics-disk-slice-part" title="例4.1 ディスク名、スライス名、パーティション名のサンプル">例4.1「ディスク名、スライス名、パーティション名のサンプル」</a>に例があります。</p><p><a class="xref" href="disk-organization.html#basics-concept-disk-model" title="例4.2 ディスクの概念的構成">例4.2「ディスクの概念的構成」</a>
	は理解をより明らかにすることを助けるための、
	ディスク構成の概念のモデルを示します。</p><p>FreeBSD をインストールするために、
	まずはじめにディスクスライスの設定をし、
	次に FreeBSD に用いるスライス内のパーティションを作成し、
	それからそれぞれのパーティション内にファイルシステム
	(またはスワップ領域) を作成し、
	ファイルシステムがどこにマウントされるか決定しなければいけません。</p><div class="table"><a id="basics-dev-codes"></a><div class="table-title">表4.1 ディスクデバイス記号</div><div class="table-contents"><table summary="ディスクデバイス記号" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>記号</th><th>意味</th></tr></thead><tbody><tr><td><code class="filename">ad</code></td><td>ATAPI (IDE) ディスク</td></tr><tr><td><code class="filename">da</code></td><td>SCSI ダイレクトアクセスディスク</td></tr><tr><td><code class="filename">acd</code></td><td>ATAPI (IDE) CDROM</td></tr><tr><td><code class="filename">cd</code></td><td>SCSI CDROM</td></tr><tr><td><code class="filename">fd</code></td><td>フロッピーディスク</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="basics-disk-slice-part"></a><div class="example-title">例4.1 ディスク名、スライス名、パーティション名のサンプル</div><div class="example-contents"><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>記号</th><th>意味</th></tr></thead><tbody><tr><td><code class="literal">ad0s1a</code></td><td>一番目の IDE ディスク (<code class="literal">ad0</code>)
		  上の一番目のスライス (<code class="literal">s1</code>) 
		  内の一番目のパーティション (<code class="literal">a</code>)。</td></tr><tr><td><code class="literal">da1s2e</code></td><td>二番目の SCSI ディスク (<code class="literal">da1</code>)
		  上の二番目のスライス (<code class="literal">s2</code>)
		  内の五番目のパーティション (<code class="literal">e</code>)。</td></tr></tbody></table></div></div></div><br class="example-break" /><div class="example"><a id="basics-concept-disk-model"></a><div class="example-title">例4.2 ディスクの概念的構成</div><div class="example-contents"><p>これはシステムに接続された一番目の IDE 
	  ディスクの FreeBSD から見た図を示します。
	  ディスクサイズは 4 GB と仮定し、
	  2 GB のスライス (<span class="trademark">MS-DOS</span>® でいうパーティション) が二つあるとします。
	  一番目のスライスは <span class="trademark">MS-DOS</span>® ディスクの <code class="filename">C:</code>
	  を含んでいます。
	  そして、二番目のスライスは FreeBSD のディスクを含んでいます。
	  これは FreeBSD インストーラが三つのデータパーティションと一つのスワップパーティションを作成した例です。</p><p>三つのパーティションはそれぞれファイルシステムを含んでいます。
	  <code class="literal">a</code> 
	  パーティションはルートファイルシステムに使用され、
	  <code class="literal">e</code> パーティションは <code class="filename">/var</code>
	  ディレクトリ階層に、 <code class="literal">f</code> パーティションは
	  <code class="filename">/usr</code> ディレクトリ階層に使用されるでしょう。</p><div class="mediaobject"><img src="install/disk-layout.png" /></div></div></div><br class="example-break" /></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dirstructure.html">戻る</a>〓</td><td width="20%" align="center"><a accesskey="u" href="basics.html">上に戻る</a></td><td width="40%" align="right">〓<a accesskey="n" href="mount-unmount.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">4.4. ディレクトリ構造〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓4.6. ファイルシステムのマウントとアンマウント</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>