<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>11.5. SAP R/3 (4.6B - IDES) のインストール</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD ハンドブック" /><link rel="up" href="linuxemu.html" title="第11章 Linux バイナリ互換機能" /><link rel="prev" href="linuxemu-oracle.html" title="11.4. Oracle のインストール" /><link rel="next" href="ch11s06.html" title="11.6. 高度なトピックス" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.5. SAP R/3 (4.6B - IDES) のインストール</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="linuxemu-oracle.html">戻る</a>〓</td><th width="60%" align="center">第11章 Linux バイナリ互換機能</th><td width="20%" align="right">〓<a accesskey="n" href="ch11s06.html">次へ</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sapr3"></a>11.5. SAP R/3 (4.6B - IDES) のインストール</h2></div><div><span class="authorgroup">寄稿: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Kipp</span> <span class="firstname">Holger</span> [FAMILY Given]</span>. </span></div><div><span class="authorgroup">SGML への変換: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Vaschetto</span> <span class="firstname">Valentino</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp87921360" class="indexterm"></a><p>SAP サポートチームは、
      認定されたプラットフォームのみをサポートしているので、
      FreeBSD 上への SAP システムのインストールについてはサポートしていません。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="preface"></a>11.5.1. まえがき</h3></div></div></div><p>この文書は、<span class="application">SAP R/3 4.6B IDES-System</span>
	with <span class="application">Oracle 8.0.5</span> for
	Linux を FreeBSD 4.3 上にインストールする方法を、FreeBSD
	4.3-STABLE と <span class="application">Oracle 8.0.5</span>
	のインストール方法と一緒に説明しています。</p><p>この文書では、重要な手順をすべて詳しく説明しようとしていますが、
	<span class="application">Oracle</span> および <span class="application">SAP R/3</span>
	のインストールの手引きを置き換えるものではありません。</p><p><span class="application">SAP</span> や <span class="application">Oracle</span>
	に特有の質問については、<span class="application">SAP R/3</span> の
	Linux 版についてくる文書や <span class="application">Oracle</span> と
	<span class="application">SAP OSS</span>
	が出している資料をご覧ください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="software"></a>11.5.2. ソフトウェア</h3></div></div></div><p>SAP のインストールには以下の CDROM を使いました。</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>名称</th><th>番号</th><th>説明</th></tr></thead><tbody><tr><td>KERNEL</td><td>51009113</td><td>SAP Kernel Oracle /
	  Installation / AIX, Linux, Solaris</td></tr><tr><td>RDBMS</td><td>51007558</td><td>Oracle / RDBMS 8.0.5.X /
	  Linux</td></tr><tr><td>EXPORT1</td><td>51010208</td><td>IDES / DB-Export / Disc
	  1 of 6</td></tr><tr><td>EXPORT2</td><td>51010209</td><td>IDES / DB-Export / Disc
	  2 of 6</td></tr><tr><td>EXPORT3</td><td>51010210</td><td>IDES / DB-Export /
	  Disc3 of 6</td></tr><tr><td>EXPORT4</td><td>51010211</td><td>IDES / DB-Export /
	  Disc4 of 6</td></tr><tr><td>EXPORT5</td><td>51010212</td><td>IDES / DB-Export /
	  Disc5 of 6</td></tr><tr><td>EXPORT6</td><td>51010213</td><td>IDES / DB-Export /
	  Disc6 of 6</td></tr></tbody></table></div><p>更に、<span class="application">Oracle 8 Server</span>
	(Pre-production バージョン 8.0.5 for Linux, カーネルバージョン
	2.0.33) の CD も使いましたが、これは必ずしも必要ではありません。
	また、もちろん FreeBSD 4.3-STABLE
	(4.3-RELEASE から間もない時期のものです) も利用しました。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sap-notes"></a>11.5.3. SAP ノート</h3></div></div></div><p>以下のノートは、<span class="application">SAP R/3</span>
	をインストールする前に読んでおくべき、
	もしくはインストールの際に役立つことが分かっているものです。</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>番号</th><th>題名</th></tr></thead><tbody><tr><td>0171356</td><td>SAP Software auf Linux: grundlegenden
	  Anmerkungen</td></tr><tr><td>0201147</td><td>INST: 4.6C R/3 Inst. on UNIX -
	  Oracle</td></tr><tr><td>0373203</td><td>Update / Migration Oracle 8.0.5 --&gt;
	  8.0.6/8.1.6 LINUX</td></tr><tr><td>0072984</td><td>Release of Digital UNIX 4.0B for
	  Oracle</td></tr><tr><td>0130581</td><td>R3SETUP step DIPGNTAB terminates</td></tr><tr><td>0144978</td><td>Your system has not been installed
	  correctly</td></tr><tr><td>0162266</td><td>Questions and tips for R3SETUP on Windows
	  NT / W2K</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="hardware-requirements"></a>11.5.4. ハードウェア要件</h3></div></div></div><p>以下の機器であれば <span class="application">SAP R/3
	System</span> (4.6B) を動かすのに十分です。</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>構成部品</th><th>4.6B</th><th>4.6C</th></tr></thead><tbody><tr><td>プロセッサ</td><td>2 × 800MHz Pentium III</td><td>2 × 800MHz Pentium III</td></tr><tr><td>メモリ</td><td>1GB ECC</td><td>2GB ECC</td></tr><tr><td>ハードディスク容量</td><td>50-60GB (IDES)</td><td>50-60GB (IDES)</td></tr></tbody></table></div><p>業務で利用するなら、大容量キャッシュメモリを備えた Xeon
	プロセッサ、高速なディスク (SCSI, ハードウェア RAID コントローラ)、
	USV および ECC-RAM を推奨します。
	ハードディスク容量が大きいのは、設定済みの IDES システムが、
	インストール時に 27 GB のデータベースファイルを作成するためです。
	通常、インストール後には一部のテーブル領域を拡張する必要があります。</p><p>私は、800MHz の Pentium III を 2 個、Adaptec 29160
	Ultra160 SCSI アダプタ (40/80 GB DLT テープドライブと CDROM
	にアクセスするため)、Mylex AcelleRAID
	(2 チャンネル、ファームウェアバージョン 6.00-1-00、32MB RAM)
	を積んだデュアルプロセッサボードを使いました。Mylex RAID
	コントローラには 17GB のハードディスク 2 台 (ミラー) と
	36GB のハードディスク (RAID 5) 4 台が接続されています。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installation"></a>11.5.5. FreeBSD 4.3-STABLE のインストール</h3></div></div></div><p>まず、FreeBSD 4.3-STABLE をインストールしました。FTP
	経由のデフォルトインストールを行いました。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-via-ftp"></a>11.5.5.1. FTP 経由のインストール</h4></div></div></div><p>ディスクイメージ kern.flp と mfsroot.flp を入手して、
	  フロッピーディスクに書き込んでください (私は
	  ftp7.de.freebsd.org から入手しました。
	  適切なミラーサイトを選んでください)。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=kern.flp of=/dev/fd0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dd if=mfsroot.flp of=/dev/fd0</code></strong> </pre><p>2 つのイメージファイルそれぞれについて、
	  別のディスクを使うようにしてください。それから kern.flp
	  を書き込んだフロッピーディスクで起動して、指示に従ってください。
	  私は、次のようにディスクを分割しました。</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>ファイルシステム</th><th>容量 (1kB ブロック)</th><th>容量 (GB)</th><th>マウントポイント</th></tr></thead><tbody><tr><td>/dev/da0s1a</td><td>1.016.303</td><td>1</td><td>/</td></tr><tr><td>/dev/da0s1b</td><td> </td><td>6</td><td>&lt;swap&gt;</td></tr><tr><td>/dev/da0s1e</td><td>2.032.623</td><td>2</td><td>/var</td></tr><tr><td>/dev/da0s1f</td><td>8.205.339</td><td>8</td><td>/usr</td></tr><tr><td>/dev/da1s1e</td><td>45.734.361</td><td>45</td><td>/compat/linux/oracle</td></tr><tr><td>/dev/da1s1f</td><td>2.032.623</td><td>2</td><td>/compat/linux/sapmnt</td></tr><tr><td>/dev/da1s1g</td><td>2.032.623</td><td>2</td><td>/compat/linux/usr/sap</td></tr></tbody></table></div><p>はじめに、Mylex のソフトウェアで論理ドライブ
	  2 台を設定して初期化しなければなりませんでした。
	  このソフトウェアはボードに組み込まれていて、
	  PC 起動時に動かせます。</p><p>このディスクの割り当て方は SAP
	  の推奨と少し異なることに注意してください。SAP は oracle (その他)
	  サブディレクトリを別途マウントするように提案していますが、
	  私は簡便であることを優先して、
	  実際にサブディレクトリとして作成するだけにしました。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="getlatestsources"></a>11.5.5.2. 最新の STABLE のソースコードの入手</h4></div></div></div><p>FreeBSD 4.3-STABLE 以降では、
	  最新のソースコードは楽に手に入ります。それより前のバージョンの
	  FreeBSD では、/etc/cvsup
	  に自分で書いたスクリプトを置いていました。FreeBSD 4.3 で
	  <span class="application">CVSup</span> を設定するのは簡単です。
	  <code class="systemitem">root</code> で以下を実行してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp /etc/defaults/make.conf /etc/make.conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/make.conf</code></strong> </pre><p><code class="filename">/etc/make.conf</code> ファイルで、
	  以下の項目を有効にしておかねばなりません。</p><pre class="programlisting">SUP_UPDATE=    yes
SUP=           /usr/local/bin/cvsup
SUPFLAGS=      -g -L 2
SUPHOST=       cvsup8.FreeBSD.org
SUPFILE=       /usr/share/examples/cvsup/stable-supfile
PORTSSUPFILE=  /usr/share/examples/cvsup/ports-supfile
DOCSUPFILE=    /usr/share/examples/cvsup/doc-supfile</pre><p><span class="emphasis"><em>SUPHOST</em></span>
	  の値は適切なものに変更してください。
	  <code class="filename">/usr/share/examples/cvsup</code>
	  にある supfile で十分でしょう。
	  もしもすべてのドキュメントを持ってくるのが嫌なら、
	  <span class="emphasis"><em>DOCSUPFILE</em></span>
	  の項は無効なままにしておいてください。
	  ここまでくれば、<span class="application">cvsup</span>
	  を起動して stable
	  の最新のソースコードを入手するのはたやすいことです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make update</code></strong> </pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makeworldandnewkernel"></a>11.5.5.3. <code class="command">make world</code> と新しいカーネル</h4></div></div></div><p>最初にすべきことは、ソースコードのインストールです。root
	  ユーザで次の作業を行ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make world</code></strong> </pre><p>最後まで実行できたら、
	  新しいカーネルの作成と設定を行えます。
	  通常はここでカーネルコンフィグレーションファイルをカスタマイズします。
	  コンピュータに <code class="systemitem">troubadix</code> という名前をつけているので、
	  コンフィグレーションファイルを <code class="filename">troubadix</code>
	  という名称にするのが自然です。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp GENERIC TROUBADIX</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi TROUBADIX</code></strong> </pre><p>この段階で、どのドライバを使うか、
	  使わないかといったことを決定できます。詳しい説明は、適当な文書や
	  <code class="filename">LINT</code> ファイルをご覧ください。</p><p>また、後述するパラメータをいれることもできます。
	  新しいカーネルを作成するには次のようにしてください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>config TROUBADIX</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/compile/TROUBADIX</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make depend</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong> </pre><p><code class="command">make install</code> が無事終わったら、
	  コンピュータを再起動して新しいカーネルを動かしてください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingthelinuxenviornment"></a>11.5.6. Linux 環境のインストール</h3></div></div></div><p>(2001 年 5 月 2 日時点の 4.3-STABLE 用に) 必要な
	RPM ファイルをダウンロードするのに多少問題があったので、
	以下の場所も (他がすべてだめで、ここが古くなってしまっていなければ)
	試してみるとよいかもしれません。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ftp7.de.freebsd.org/pub/FreeBSD/distfiles/rpm</p></li><li class="listitem"><p>ftp.redhat.com/pub/redhat/linux/6.1/en/os/i386/RedHat/RPMS</p></li></ul></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installinglinuxbase-system"></a>11.5.6.1. Linux ベースシステムのインストール</h4></div></div></div><p>まず、Linux のベースシステムを (root で)
	  インストールしなければなりません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/emulators/linux_base</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make package</code></strong> </pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installinglinuxdevelopment"></a>11.5.6.2. Linux 開発環境のインストール</h4></div></div></div><p>次に、必要なら Linux 開発環境をインストールします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/devel/linux_devtools</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make package</code></strong> </pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingnecessaryrpms"></a>11.5.6.3. 必要な RPM のインストール</h4></div></div></div><a id="idp88078288" class="indexterm"></a><p>R3SETUP プログラムを動かすには、pam
	  サポートが必要になります。
	  これが更に他の package を必要としているので、
	  私は結局いくつもの package をインストールすることになりました。
	  それでも、pam は足りない package があると文句をいうので、
	  強制的にインストールしたら動きました。
	  pam 以外にインストールした package が本当に必要なのか、pam
	  package をインストールするのに十分だったのかよくわかっていません。</p><p>なんにせよ、これが私がインストールした package 一覧です。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>cracklib-2.7-5.i386.rpm</p></li><li class="listitem"><p>cracklib-dicts-2.7-5.i386.rpm</p></li><li class="listitem"><p>pwdb-0.60-1.i386.rpm</p></li><li class="listitem"><p>pam-0.68-7.i386.rpm</p></li></ul></div><p>これらの package は、
	  以下のコマンドでインストールしました。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpm -i --ignoreos --root /compat/linux --dbpath /var/lib/rpm &lt;package_name&gt;</code></strong> </pre><p>ただし、pam
	  パッケージは次のようにして強制的にインストールしました。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpm -i --ignoreos --nodeps --root /compat/linux --dbpath /var/lib/rpm pam-0.68-7.i386.rpm</code></strong> </pre><p><span class="application">Oracle</span> が intelligent agent
	  を動作させるには、次の RedHat Tcl package を (FreeBSD
	  ハンドブックにあるように) インストールしなければなりませんでした。
	  <code class="filename">tcl-8.0.5-30.i386.rpm</code> (そうしないと、
	  <span class="application">Oracle</span>
	  インストール中の再リンクがうまくゆきません)。
	  <span class="application">Oracle</span>
	  の再リンクについては他にも問題がありますが、
	  私が理解している限りでは Oracle-Linux の問題で、FreeBSD
	  に特有のものではありません。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingsapr3env"></a>11.5.7. SAP/R3 環境の構築</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="filesystemsandmountpoints"></a>11.5.7.1. 必要となるファイルシステムとマウントポイントの作成</h4></div></div></div><p>単純なインストールでは、
	  次のファイルシステムを作成すれば事足ります。</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>マウントポイント</th><th>サイズ (GB)</th></tr></thead><tbody><tr><td>/compat/linux/oracle</td><td>45 GB</td></tr><tr><td>/compat/linux/sapmnt</td><td>2 GB</td></tr><tr><td>/compat/linux/usr/sap</td><td>2 GB</td></tr></tbody></table></div><p>また、私は FreeBSD が正しいパスを見付けられるように、
	  いくつかリンクを作成しました。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/oracle /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/sapmnt /sapmnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/usr/sap /usr/sap</code></strong> </pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingusersanddirectories"></a>11.5.7.2. ユーザとディレクトリの作成</h4></div></div></div><p><span class="application">SAP R/3</span> には、
	  2 名のユーザと 3 つのグループが必要です。
	  ユーザ名は 3 文字からなる <span class="application">SAP</span> システム ID (SID)
	  に準じています。SID の中には <span class="application">SAP</span>
	  が予約しているものがあります
	  (たとえば <span class="emphasis"><em>SAP</em></span> や <span class="emphasis"><em>NIX</em></span>
	  です。すべて網羅した一覧は SAP のドキュメントをご覧ください)。
	  IDES のインストールでは、<span class="emphasis"><em>IDS</em></span> を使いました。
	  したがって、次のグループができます (グループ ID
	  は異なっていてもかまいません。
	  これは単に私がインストールした時に使用した値です)。</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>グループ ID</th><th>グループ名</th><th>説明</th></tr></thead><tbody><tr><td>100</td><td>dba</td><td>データベース管理者</td></tr><tr><td>101</td><td>sapsys</td><td>SAP システム</td></tr><tr><td>102</td><td>oper</td><td>データベースオペレータ</td></tr></tbody></table></div><p>デフォルトの Oracle のインストールでは、
	  <code class="systemitem">dba</code> グループだけが使われます。
	  <code class="systemitem">oper</code> グループとして、
	  <code class="systemitem">dba</code> を使う人もいます。(詳しくは Oracle と
	  SAP のドキュメントを参照してください)。</p><p>以下のユーザも必要になります。</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th>ユーザ ID</th><th>ユーザ名</th><th>一般名称</th><th>グループ</th><th>追加グループ</th><th>説明</th></tr></thead><tbody><tr><td>1000</td><td>idsadm</td><td>&lt;sid&gt;adm</td><td>sapsys</td><td>oper</td><td>SAP 管理者</td></tr><tr><td>1002</td><td>oraids</td><td>ora&lt;sid&gt;</td><td>dba</td><td>oper</td><td>DB 管理者</td></tr></tbody></table></div><p><code class="command">adduser</code> でユーザを追加するには、
	  以下の項目が必要になります
	  (シェルとホームディレクトリを控えてください)。
	  SAP 管理者については、</p><pre class="programlisting">Name: idsadm            &lt;sid&gt;adm
Password: ******
Fullname: SAP IDES Administrator
Uid: 1000
Gid: 101 (sapsys)
Class:
Groups: sapsys dba
HOME: /home/idsadm      /home/&lt;sid&gt;adm
Shell: /bin/sh</pre><p>そしてデータベース管理者については、</p><pre class="programlisting">Name: oraids          ora&lt;sid&gt;
Password: ******
Fullname: Oracle IDES Administrator
Uid: 1002
Gid: 100 (dba)
Class:
Groups: dba
HOME: /oracle/IDS     /oracle/&lt;sid&gt;
Shell: /bin/sh</pre><p>あなたが <code class="systemitem">dba</code> と
	  <code class="systemitem">oper</code> の両方のグループを使っていたら、
	  ここには <code class="systemitem">oper</code>
	  グループもいれるべきです。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingdirectories"></a>11.5.7.3. ディレクトリ作成</h4></div></div></div><p>以下のディレクトリは、
	  普通は別のファイルシステムとして作成します。
	  どうするかは、あなたの要件に応じて決めてください。
	  結局はすべてが同じ RAID 5 におかれるので、
	  私は単なるディレクトリにしました。</p><p>まず、一部のディレクトリに (<code class="systemitem">root</code>
	  ユーザで) 所有者と権限を設定しましょう。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 775 /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 777 /sapmnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown root:dba /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown idsadm:sapsys /compat/linux/usr/sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmow 775 /compat/linux/usr/sap</code></strong> </pre><p>第二に、ユーザ ora&lt;sid&gt;
	  権限でディレクトリを作成します。
	  すべて /oracle/IDS のサブディレクトリになります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - oraids</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir mirrlogA mirrlogB origlogA origlogB</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir sapdata1 sapdata2 sapdata3 sapdata4 sapdata5 sapdata6</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir saparch sapreorg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong> </pre><p>第三段階では、<code class="systemitem">idsadm</code> (&lt;sid&gt;adm)
	  ユーザ権限でディレクトリを作成します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - idsadm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir IDS</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir trans</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong> </pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="entriesinslashetcslashservices"></a>11.5.7.4. /etc/services 内の項目</h4></div></div></div><p>SAP R/3 は、<code class="filename">/etc/services</code>
	  にいくつか項目を必要としますが、FreeBSD
	  にインストールする場合は正しく設定されません。
	  次の項目を追加してください
	  (少なくとも、インスタンス番号に対応する項目が必要で、
	  この場合は <span class="emphasis"><em>00</em></span> です。
	  <span class="emphasis"><em>dp</em></span>, <span class="emphasis"><em>gw</em></span>,
	  <span class="emphasis"><em>sp</em></span> および <span class="emphasis"><em>ms</em></span>
	  について
	  <span class="emphasis"><em>00</em></span> から <span class="emphasis"><em>99</em></span>
	  まで項目を追加してもなんの問題もないでしょう)。</p><pre class="programlisting">sapdp00  3200/tcp # SAP Dispatcher.      3200 + インスタンス番号
sapgw00  3300/tcp # SAP Gateway.         3300 + インスタンス番号
sapsp00  3400/tcp #                      3400 + インスタンス番号
sapms00  3500/tcp #                      3500 + インスタンス番号
sapmsIDS 3600/tcp # SAP Message Server.  3600 + インスタンス番号</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="necessarylocales"></a>11.5.7.5. 必要となるロケール</h4></div></div></div><a id="idp88184784" class="indexterm"></a><p>SAP は、デフォルトの RedHat
	  のインストールでは入らないロケールを少なくとも
	  2 つ必要とします。
	  SAP は、必要な RPM を FTP
	  サーバからダウンロードする形で提供しています
	  (OSS アクセス契約している顧客でなければアクセスできません)。
	  必要な RPM の一覧は note 0171356 をご覧ください。</p><p>適切なリンクを (たとえば <span class="emphasis"><em>de_DE</em></span> と
	  <span class="emphasis"><em>en_US</em></span> から) 作成するという手もありますが、
	  業務用システムでそうすることはお勧めしません
	  (いまのところ、IDES システムで問題なく動いてはいますが)。
	  必要なのは、次のロケールです。</p><pre class="programlisting">de_DE.ISO-8859-1
en_US.ISO-8859-1</pre><p>このロケールがないと、
	  インストール時になんらかの問題が起きるでしょう。
	  それを (たとえば CENTRDB.R3S ファイルで問題の段階を
	  OK にして) 無視してしまうと、追加でなにかしないと
	  SAP システムにログオンできないでしょう。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="kerneltuning"></a>11.5.7.6. カーネルのチューニング</h4></div></div></div><a id="idp88188496" class="indexterm"></a><p>SAP R/3 システムには多くのリソースが必要です。
	  そのため、私はカーネルコンフィグレーションファイルに
	  以下のパラメータを追加しました。

	</p><pre class="programlisting"># Set these for memory pigs (SAP and Oracle):
options MAXDSIZ="(1024*1024*1024)"
options DFLDSIZ="(1024*1024*1024)" # System V options needed.
options SYSVSHM #SYSV-style shared memory
options SHMMAXPGS=262144 #max amount of shared mem. pages
options SHMMNI=256 #max number of shared memory ident if.
options SHMSEG=100 #max shared mem.segs per process
options SYSVMSG #SYSV-style message queues
options MSGSEG=32767 #max num. of mes.segments in system
options MSGSSZ=32 #size of msg-seg. MUST be power of 2
options MSGMNB=65535 #max char. per message queue
options MSGTQL=2046 #max amount of msgs in system
options SYSVSEM #SYSV-style semaphores
options SEMMNU=256 #number of semaphore UNDO structures
options SEMMNS=1024 #number of semaphores in system
options SEMMNI=520 #number of semaphore indentifiers
options SEMUME=100 #number of UNDO keys</pre><p>SAP についてくる文書に最小値が指定されています。Linux
	  に関する記述はないので、詳しいことは HP-UX (32-bit)
	  の節を参照してください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingsapr3"></a>11.5.8. SAP R/3 のインストール</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="preparingsapcdroms"></a>11.5.8.1. SAP CDROM の準備</h4></div></div></div><p>インストールの際にマウントしてアンマウントしなければならない
	  CDROM が山ほどあります。十分な数の
	  CDROM ドライブを持っていれば、
	  すべてマウントしてしまえばよいでしょう。私は、CDROM
	  の中身をそれぞれに対応するディレクトリにコピーすることにしました。</p><pre class="programlisting">/oracle/IDS/sapreorg/&lt;cd-name&gt;</pre><p>ここで、&lt;cd-name&gt; は <code class="filename">KERNEL</code>,
	  <code class="filename">RDBMS</code>, <code class="filename">EXPORT1</code>,
	  <code class="filename">EXPORT2</code>, <code class="filename">EXPORT3</code>,
	  <code class="filename">EXPORT4</code>, <code class="filename">EXPORT5</code>
	  および <code class="filename">EXPORT6</code>
	  のいずれかです。すべてのファイル名を大文字にするか、
	  さもなければ、マウントする際に -g オプションをつけるべきです。
	  次のコマンドを使ってください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount_cd9660 -g /dev/cd0a /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp -R /mnt/* /oracle/IDS/sapreorg/&lt;cd-name&gt;</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>umount /mnt</code></strong> </pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="runningtheinstall-script"></a>11.5.8.2. インストールスクリプトの実行</h4></div></div></div><p>まず、インストールディレクトリを用意しなければなりません。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/IDS/sapreorg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd install</code></strong> </pre><p>その後、インストールスクリプトを起動すると、
	  関連するファイルがほぼすべてインストールディレクトリにコピーされます。</p><p><code class="filename">/oracle/IDS/sapreorg/KERNEL/UNIX/INSTTOOL.SH</code></p><p>これは、完全にカスタマイズされた SAP R/3
	  デモシステム付きの IDES のインストールなので、EXPORT CD は
	  3 枚ではなく 6 枚あります。この時点では、
	  インストールテンプレート CENTRDB.R3S
	  は標準の中心インスタンス (R/3 とデータベース)
	  をインストールするためのもので、
	  IDES 中心インスタンスをインストールするためのものではありません。
	  ですから、それに対応する CENTRDB.R3S ファイルを
	  EXPORT1 ディレクトリからコピーしてください。さもないと、
	  R3SETUP は EXPORT CD を 3 枚しか要求しません。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="startr3setup"></a>11.5.8.3. R3SETUP の起動</h4></div></div></div><p>LD_LIBRARY_PATH
	  が正しく設定されていることを確認してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>export LD_LIBRARY_PATH=/oracle/IDS/lib:/sapmnt/IDS/exe:/oracle/805_32/lib</code></strong> </pre><p>インストールディレクトリから root ユーザで
	  R3SETUP を起動してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/IDS/sapreorg/install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRDB.R3S</code></strong> </pre><p>スクリプトがいくつか質問してきます
	  (デフォルトが括弧に囲まれて表示され、
	  その後に実際に入力します)。</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>質問</th><th>デフォルト</th><th>入力</th></tr></thead><tbody><tr><td>Enter SAP System ID
	      (SAP システム ID を入力してください)</td><td>[C11]</td><td>IDS&lt;ret&gt;</td></tr><tr><td>Enter SAP Instance Number
	      (SAP インスタンス番号を入力してください)</td><td>[00]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter SAPMOUNT Directory
	      (SAPMOUNT ディレクトリを入力してください)</td><td>[/sapmnt]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter name of SAP central host
	      (SAP 中心ホストの名称を入力してください)</td><td>[troubadix.domain.de]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter name of SAP db host
	      (SAP データベースホストの名称を入力してください)</td><td>[troubadix]</td><td>&lt;ret&gt;</td></tr><tr><td>Select character set
	      (文字集合を選択してください)</td><td>[1] (WE8DEC)</td><td>&lt;ret&gt;</td></tr><tr><td>Enter Oracle server version
	      (Oracle サーバのバージョンを入力してください)
	      (1) Oracle 8.0.5, (2) Oracle 8.0.6, (3) Oracle 8.1.5, (4) Oracle 8.1.6</td><td> </td><td>1&lt;ret&gt;</td></tr><tr><td>Extract Oracle Client archive
	      (Oracle クライアントアーカイブを展開しますか)</td><td>[1] (はい、展開します)</td><td>&lt;ret&gt;</td></tr><tr><td>Enter path to KERNEL CD
	      (KERNEL CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/KERNEL</td></tr><tr><td>Enter path to RDBMS CD
	      (RDBMS CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/RDBMS</td></tr><tr><td>Enter path to EXPORT1 CD
	      (EXPORT1 CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT1</td></tr><tr><td>Directory to copy EXPORT1 CD
	      (EXPORT1 CD をコピーするディレクトリ)</td><td>[/oracle/IDS/sapreorg/CD4_DIR]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter path to EXPORT2 CD
	      (EXPORT2 CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT2</td></tr><tr><td>Directory to copy EXPORT2 CD
	      (EXPORT2 CD をコピーするディレクトリ)</td><td>[/oracle/IDS/sapreorg/CD5_DIR]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter path to EXPORT3 CD
	      (EXPORT3 CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT3</td></tr><tr><td>Directory to copy EXPORT3 CD
	      (EXPORT3 CD をコピーするディレクトリ)</td><td>[/oracle/IDS/sapreorg/CD6_DIR]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter path to EXPORT4 CD
	      (EXPORT4 CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT4</td></tr><tr><td>Directory to copy EXPORT4 CD
	      (EXPORT4 CD をコピーするディレクトリ)</td><td>[/oracle/IDS/sapreorg/CD7_DIR]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter path to EXPORT5 CD
	      (EXPORT5 CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT5</td></tr><tr><td>Directory to copy EXPORT5 CD
	      (EXPORT5 CD をコピーするディレクトリ)</td><td>[/oracle/IDS/sapreorg/CD8_DIR]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter path to EXPORT6 CD
	      (EXPORT6 CD へのパスを入力してください)</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT6</td></tr><tr><td>Directory to copy EXPORT6 CD
	      (EXPORT6 CD をコピーするディレクトリ)</td><td>[/oracle/IDS/sapreorg/CD9_DIR]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter amount of RAM for SAP + DB
	      (SAP + DB に割り当てる RAM の合計を入力してください)</td><td> </td><td>850&lt;ret&gt; (MB)</td></tr><tr><td>Service Entry Message Server</td><td>[3600]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter Group-ID of sapsys
	      (sapsys のグループ ID を入力してください)</td><td>[101]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter Group-ID of oper
	      (oper のグループ ID を入力してください)</td><td>[102]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter Group-ID of dba
	      (dba のグループ ID を入力してください)</td><td>[100]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter User-ID of &lt;sid&gt;adm
	      (&lt;sid&gt;adm のユーザ ID を入力してください)</td><td>[1000]</td><td>&lt;ret&gt;</td></tr><tr><td>Enter User-ID of ora&lt;sid&gt;
	      (ora&lt;sid&gt; のユーザ ID を入力してください)</td><td>[1002]</td><td>&lt;ret&gt;</td></tr><tr><td>Number of parallel procs
	      (並列プロセスの数)</td><td>[2]</td><td>&lt;ret&gt;</td></tr></tbody></table></div><p>CD をそれぞれ別の場所にコピーしないと、SAP
	  インストーラは (CD 内の <code class="filename">LABEL.ASC</code>
	  ファイルで識別される) 必要な CD を見つけられず、CD
	  を挿入 / マウントして承認するかマウントパスを入力するよう求めてくるでしょう。</p><p><code class="filename">CENTRDB.R3S</code>
	  ファイルには、間違いがないわけではありません。
	  私の場合は、EXPORT4 を再度要求されました
	  (が、正しいキーを表示していたので
	  (6_LOCATION、それから 7_LOCATION など))、
	  正しい値を入力して進めて問題ありませんでした。
	  いらいらしないようにしてください。</p><p>後で触れるいくつかの問題を除けば、Oracle
	  データベースソフトウェアをインストールするところまでは
	  素直に進むはずです。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingoracle805"></a>11.5.9. Oracle 8.0.5 のインストール</h3></div></div></div><p>Linux と Oracle DB で起こりうる問題についての SAP-Notes と
	Oracle の Readme を読むようにしてください。
	すべてではないにしても、
	ほとんどは互換性のないライブラリに起因しています。</p><p>Oracle のインストールについて詳しいことは、<a class="link" href="linuxemu-oracle.html" target="_top">Oracle のインストール</a>
	の章をご覧ください。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingtheoracle805withorainst"></a>11.5.9.1. orainst による Oracle 8.0.5 のインストール</h4></div></div></div><p><span class="application">Oracle 8.0.5</span>
	  を利用する予定なら、
	  無事に再リンクするのにライブラリがいくつか追加で必要です。
	  なぜなら、Oracle 8.0.5 は古い glibc (RedHat 6.0)
	  とリンクされていますが、RedHat 6.1 は新しい glibc
	  を利用しているからです。
	  ですから、リンクが行われることを保証するには、
	  次の追加パッケージをインストールしなければなりません。</p><p><code class="filename">compat-libs-5.2-2.i386.rpm</code></p><p><code class="filename">compat-glibc-5.2-2.0.7.2.i386.rpm</code></p><p><code class="filename">compat-egcs-5.2-1.0.3a.1.i386.rpm</code></p><p><code class="filename">compat-egcs-c++-5.2-1.0.3a.1.i386.rpm</code></p><p><code class="filename">compat-binutils-5.2-2.9.1.0.23.1.i386.rpm</code></p><p>詳しくは、対応する SAP-Note や Oracle Readme
	  をご覧ください。他に選択肢がなければ
	  (私がインストールした時は、確認している暇がありませんでした)、
	  元のバイナリまたは再リンクされたバイナリを、
	  元の RedHat システムから持ってきて使うこともできるでしょう。</p><p>インテリジェントエージェントをコンパイルするために、
	  RedHat Tcl パッケージがインストールされていなければなりません。
	  <code class="filename">tcl-8.0.3-20.i386.rpm</code>
	  が入手できないなら、RedHat 6.1 用の
	  <code class="filename">tcl-8.0.5-30.i386.rpm</code>
	  など新しいものでも構いません。</p><p>再リンク以外は、インストールは簡単です。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - oraids</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export TERM=xterm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export ORACLE_TERM=xterm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export ORACLE_HOME=/oracle/IDS</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /ORACLE_HOME/orainst_sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./orainst</code></strong> </pre><p>ソフトウェアのインストールが終わるまで、すべての画面で
	  Enter を押して承認してください。ただし、
	  <span class="emphasis"><em>Oracle On-Line Text Viewer</em></span>
	  は現時点では Linux 版がないので選択を外してください。
	  その後、Oracle は利用可能な
	  <code class="command">gcc</code>, <code class="command">egcs</code> や
	  <code class="command">i386-redhat-linux-gcc</code> ではなく、
	  <code class="command">i386-glibc20-linux-gcc</code>
	  で再リンクしようとします。</p><p>時間が限られていたので、私は
	  <span class="application">Oracle 8.0.5 PreProduction</span>
	  リリースのバイナリを利用することにしました。
	  最初 RDBMS-CD 収録のバージョンを動かそうとして失敗し、
	  その時点では正しい RPM
	  を見つけて利用するのはまるで悪夢のようだったからです。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingtheoracle805preproduction"></a>11.5.9.2. Linux (Kernel 2.0.33) 用の
	  Oracle 8.0.5 Pre-Production リリースのインストール</h4></div></div></div><p>これをインストールするのは簡単です。
	  CD をマウントして、インストーラを起動してください。
	  インストーラが Oracle ホームディレクトリの位置をたずねて、
	  そこにすべてのバイナリをコピーします。
	  もっとも、私はその前の RDBMS
	  インストールを試した時の残りを削除していませんでした。</p><p>この後、Oracle データベースは問題なく起動できました。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="continuewithsapr4installation"></a>11.5.10. SAP R/3 のインストールの続行</h3></div></div></div><p>まず、<code class="systemitem">idsamd</code> (&lt;sid&gt;adm) ユーザと
	<code class="systemitem">oraids</code> (ora&lt;sid&gt;) ユーザの環境設定を確認してください。
	両者とも、<code class="filename">.profile</code>,
	<code class="filename">.login</code> と <code class="filename">.cshrc</code>
	をもっていて、いずれも <code class="command">hostname</code>
	を使っているはずです。
	そのシステムのホスト名が完全修飾名であれば、すべてのファイルで
	<code class="command">hostname</code> を
	<code class="command">hostname -s</code> に変更する必要があります。</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="databaseload"></a>11.5.10.1. データベースの読み込み</h4></div></div></div><p>その後、(exit を選択したかどうかによって) R3SETUP
	  を再起動または継続実行します。R3SETUP
	  は、テーブル領域を作成し、EXPORT1 から EXPORT6
	  までデータを R3load でデータベースに読み込みます
	  (これは IDES システムです。違う場合は、EXPORT1 から EXPORT3
	  だけになります)。</p><p>データベースの読み込みが完了したら
	  (数時間に渡るかもしれません)、何かパスワードを要求されます。
	  テスト用にインストールしたのであれば、
	  周知のデフォルトパスワードを使ってもよいでしょう
	  (セキュリティが問題になるなら、異なるものを使ってください!)。</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>質問</th><th>入力</th></tr></thead><tbody><tr><td>Enter Password for sapr3
	      (sapr3 のパスワードを入力してください)</td><td>sap&lt;ret&gt;</td></tr><tr><td>Confirum Password for sapr3
	      (sapr3 のパスワードを再入力してください)</td><td>sap&lt;ret&gt;</td></tr><tr><td>Enter Password for sys
	      (sys のパスワードを入力してください)</td><td>change_on_install&lt;ret&gt;</td></tr><tr><td>Confirm Password for sys
	      (sys のパスワードを再入力してください)</td><td>change_on_install&lt;ret&gt;</td></tr><tr><td>Enter Password for system
	      (system のパスワードを入力してください)</td><td>manager&lt;ret&gt;</td></tr><tr><td>Confirm Password for system
	      (system のパスワードを再入力してください)</td><td>manager&lt;ret&gt;</td></tr></tbody></table></div><p>ここで、<code class="literal">dipgntab</code> で少し問題がありました。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="listener"></a>11.5.10.2. Listener</h4></div></div></div><p>次のように、Oracle-Listener を <code class="systemitem">oraids</code>
	  (ora&lt;sid&gt;) ユーザで起動してください。</p><pre class="programlisting">umask 0; lsnrctl start</pre><p>そうしないと、ソケットが正しいパーミッションにならないので、
	  ORA-12546 が発生するかもしれません。SAP note 072984
	  をご覧ください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="postinstallationsteps"></a>11.5.11. インストール後の手順</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="requestsapr3licensekey"></a>11.5.11.1. SAP R/3 ライセンスキーの要求</h4></div></div></div><p>一時ライセンスは
	  4 週間だけ有効なので、これが必要になります。
	  オペレーティングシステムを正しく入力するようにしてください:
	  (X) Other (その他): <span class="emphasis"><em>FreeBSD 4.3 Stable</em></span>。
	  まず、ハードウェアキーを入手してください。
	  <code class="systemitem">idsadm</code> ユーザでログオンし、
	  <code class="command">saplicense</code> を呼び出してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sapmnt/IDS/exe/saplicense -get</code></strong></pre><p><code class="command">saplicense</code>
	  をオプションなしで起動すると、オプション一覧を出力します。
	  ライセンスキーを受け取ったら、
	  次のようにしてインストールできます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sapmnt/IDS/exe/saplicense -install</code></strong></pre><p>そうしたら、次の値を入力します。</p><pre class="programlisting">SAP SYSTEM ID   = &lt;SID, 3 chars&gt;
CUSTOMER KEY    = &lt;hardware key, 11 chars&gt;
INSTALLATION NO = &lt;installation, 10 digits&gt;
EXPIRATION DATE = &lt;yyyymmdd, usually "99991231"&gt;
LICENSE KEY     = &lt;license key, 24 chars&gt;</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingusers"></a>11.5.11.2. ユーザの作成</h4></div></div></div><p>クライアント 000 内でユーザを作成します
	  (クライアント 000 内で行わなければなりませんが、
	  ユーザ <code class="systemitem">sap*</code> や <code class="systemitem">ddic</code>
	  以外のユーザでなければならないタスクのためです)。
	  ユーザ名として、私は通常
	  <em class="replaceable"><code>wartung</code></em> (または
	  英語で <em class="replaceable"><code>service</code></em>)
	  を選択しています。必要となるプロファイルは
	  <span class="emphasis"><em>sap_new</em></span> と <span class="emphasis"><em>sap_all</em></span>
	  です。セキュリティを高めるため、
	  すべてのクライアントのデフォルトユーザのパスワードを変更すべきです
	  (ユーザ <code class="systemitem">sap*</code> と <code class="systemitem">ddic</code>
	  を含みます)。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="configtranssysprofileopermodesetc"></a>11.5.11.3. トランスポートシステム、プロファイル、操作モードなどの設定</h4></div></div></div><p>クライアント 000 内で、<code class="systemitem">ddic</code> と sap*
	  以外のユーザについて、少なくとも次のことを行ってください。</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>作業</th><th>トランザクション</th></tr></thead><tbody><tr><td>トランスポートシステムの設定。たとえば、
	      <span class="emphasis"><em>スタンドアロントランスポートエンティティ</em></span></td><td>STMS</td></tr><tr><td>システム用のプロファイルの作成・編集</td><td>RZ10</td></tr><tr><td>操作モードとインスタンスの維持管理</td><td>RZ04</td></tr></tbody></table></div><p>これらのインストール後の手順は、それ以外も含めて
	  SAP インストールガイドにすべて書かれています。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="editintsidsap"></a>11.5.11.4. Edit init&lt;sid&gt;.sap (initIDS.sap)</h4></div></div></div><p><code class="filename">/oracle/IDS/dbs/initIDS.sap</code>
	  ファイルには
	  SAP バックアッププロファイルが含まれます。ここで、
	  使用するテープの容量、
	  圧縮の種類などを定義しなければなりません。
	  <code class="command">sapdba</code> や <code class="command">brbackup</code>
	  と共に動かすため、以下の値を変更しました。</p><pre class="programlisting">compress = hardware
archive_function = copy_delete_save
cpio_flags = "-ov --format=newc --block-size=128 --quiet"
cpio_in_flags = "-iuv --block-size=128 --quiet"
tape_size = 38000M
tape_address = /dev/nsa0
tape_address_rew = /dev/sa0</pre><p>説明:</p><p><span class="emphasis"><em>compress</em></span> 私が使っているテープは
	  HP DLT1 で、ハードウェア圧縮を行います。</p><p><span class="emphasis"><em>archive_function</em></span>
	  この変数は、Oracle
	  のアーカイブログを保存する際のデフォルトの振る舞いを定義します。
	  新規のログファイルはテープに保存され、
	  保存済みのログファイルは再度保存された後、削除されます。
	  これは、もし、データベースを復旧しなければならなくなったのに、
	  アーカイブテープのどれかが駄目になっていたという場合にも問題を回避します。</p><p><span class="emphasis"><em>cpio_flags</em></span>
	  デフォルトはブロックサイズを 5120 バイトに設定する -B
	  が使われます。DLT テープについては、HP はブロックサイズに
	  32 キロバイト以上を推奨していますので、64 キロバイトに設定する
	  --block-size=128 を用いました。65535 より多くの
	  inode 番号があるので、--format=newc が必要になります。
	  最後のオプション --quiet は、<code class="command">cpio</code>
	  が保存したブロック数を出力すると
	  <code class="command">brbackup</code> が文句をいうので必要になります。</p><p><span class="emphasis"><em>cpio_in_flags</em></span>
	  は、データをテープから読み込むのに必要となるフラグです。
	  データ形式は自動的に認識されます。</p><p><span class="emphasis"><em>tape_size</em></span>
	  これは通常、テープの raw (生の) 容量を表します。
	  (ハードウェア圧縮を利用しているので) 安全のため、</p><p><span class="emphasis"><em>value</em></span>
	  は実際の値よりもわずかに小さくしています。</p><p><span class="emphasis"><em>tape_address</em></span>
	  <code class="command">cpio</code> と組み合わせて用いる巻き戻し不可なデバイス。</p><p><span class="emphasis"><em>tape_address_rew</em></span>
	  cpio と組み合わせて用いる巻き戻し可能なデバイス。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88370128"></a>11.5.11.5. インストール後の設定</h4></div></div></div><p>以下の SAP パラメータについてはインストール後に調整する必要があります。</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>名前</th><th>値</th></tr></thead><tbody><tr><td>ztta/roll_extension</td><td>250000000</td></tr><tr><td>abap/heap_area_dia</td><td>300000000</td></tr><tr><td>abap/heap_area_nondia</td><td>400000000</td></tr><tr><td>em/initial_size_MB</td><td>256</td></tr><tr><td>em/blocksize_kB</td><td>1024</td></tr><tr><td>ipc/shm_psize_40</td><td>70000000</td></tr></tbody></table></div><p>SAP-Note 0013026:</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>名前</th><th>値</th></tr></thead><tbody><tr><td>ztta/dynpro_area</td><td>2500000</td></tr></tbody></table></div><p>SAP-Note 0157246:</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>名前</th><th>値</th></tr></thead><tbody><tr><td>rdisp/ROLL_MAXFS</td><td>16000</td></tr><tr><td>rdisp/PG_MAXFS</td><td>30000</td></tr></tbody></table></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">以上のパラメータと、1 ギガバイトのメモリを持つシステムでは、
	    以下のようなメモリ使用量となるでしょう。

	  </p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">Mem: 547M Active, 305M Inact, 109M Wired, 40M Cache, 112M Buf, 3492K Free</pre></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="problemsduringinstallation"></a>11.5.12. インストール中の問題</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="indoraduringduringr3setup"></a>11.5.12.1. R3SETUP 中の OSUSERSIDADM_IND_ORA エラー</h4></div></div></div><p>この段階で R3SETUP がエラーを報告したら、CENTRDB.R3S
	  ファイルを編集します。[OSUSERSIDADM_IND_ORA]
	  という項目を探して、以下の値を変更します。</p><pre class="programlisting">HOME=/home/idsadm (was empty)
STATUS=OK (had status ERROR)</pre><p>以下のように、R3SETUP を再起動します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRDB.R3S</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="indoraduringr3setup"></a>11.5.12.2. R3SETUP 中の OSUSERDBSID_IND_ORA</h4></div></div></div><p>この段階で R3SETUP がエラーを報告する可能性もあります。
	  CENTRDB.R3S を編集して、[OSUSERDBSID_IND_ORA]
	  という項目を探し、その項目内の次の値を変更してください。</p><pre class="programlisting">STATUS=OK</pre><p>その後、R3SETUP を再起動します。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRDB.R3S</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="oraviewvrffilenotfound"></a>11.5.12.3. Oracle のインストール中に oraview.vrf
	  ファイルがみつからないという (FILE NOT FOUND) エラー</h4></div></div></div><p>インストールを開始する前に
	  <span class="emphasis"><em>Oracle On-Line Text Viewer</em></span>
	  の選択を外すのを忘れています。この選択肢は現在 Linux
	  にはないにもかかわらず、インストール対象に選ばれています。
	  Oracle のインストールメニューでこの製品を選択しているのを外して、
	  インストールを再開してください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="textenvincalid"></a>11.5.12.4. R3SETUP, RFC または SAPGUI 起動時に
	  TEXTENV_INVALID エラー</h4></div></div></div><p>このエラーが起きた場合は、正しいロケールがありません。
	  SAP note 0171356 にインストールしておかなければならない
	  RPM が挙げられています (たとえば、RedHat 6.1 なら
	  <span class="emphasis"><em>saplocales-1.0-3</em></span>,
	  <span class="emphasis"><em>saposcheck-1.0-1</em></span>)。R3SETUP
	  がこれに関係するエラーを出してもすべて無視して、対応する状態を
	  ERROR から OK に (CENTRDB.R3S で) 変更して R3SETUP
	  を再起動していると、SAP システムは正しく設定されず、
	  システムを起動できたとしても、<code class="literal">sapgui</code>
	  でシステムに接続することはできません。古い Linux 版 <code class="literal">sapgui</code>
	  で接続しようとすると、次のメッセージがでます。</p><pre class="programlisting">Sat May 5 14:23:14 2001
*** ERROR =&gt; no valid userarea given [trgmsgo. 0401]
Sat May 5 14:23:22 2001
*** ERROR =&gt; ERROR NR 24 occured [trgmsgi. 0410]
*** ERROR =&gt; Error when generating text environment. [trgmsgi. 0435]
*** ERROR =&gt; function failed [trgmsgi. 0447]
*** ERROR =&gt; no socket operation allowed [trxio.c 3363]
Speicherzugriffsfehler</pre><p>これは、SAP R/3 がロケールを割り当てられないか、
	  正しく設定されていない
	  (データベーステーブルの一部の項目が不足している)
	  ためです。SAP に接続するためには、次の項目をファイル
	  DEFAULT.PFL に追加してください (note 0043288 参照)。</p><pre class="programlisting">abap/set_etct_env_at_new_mode =0
install/collate/active =0
rscp/TCP0B =TCP0B</pre><p>SAP システムを再起動してください。
	  地域特有の言語設定が期待どおりに動かないかもしれませんが、
	  システムに接続できるはずです。
	  地域設定を修正 (して、適切なロケールを提供) したら、
	  これらの項目を DEFAULT.PFL から削除して
	  SAP システムを再起動してかまいません。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ora-12546"></a>11.5.12.5. ORA-12546 エラー。リスナーの適切なパーミッションによる操作</h4></div></div></div><p>次のコマンドを実行して、Oracle リスナーをユーザ
          <code class="systemitem">oraids</code> で起動してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umask 0; lsnrctl start</code></strong></pre><p>そうしないと、
	  ソケットが正しいパーミッションになっていないという
	  ORA-12546 エラーを受け取るかもしれません。
	  SAP note 0072984 をご覧ください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dipgntabindind"></a>11.5.12.6. R3SETUP 中の [DIPGNTAB_IND_IND] エラー</h4></div></div></div><p>一般的なことは SAP note 0130581 (R3SETUP の
	  <code class="literal">DIPGNTAB</code> 段階での終了) をご覧ください。
	  この特定のインストール段階において、
	  なぜかインストールプロセスは、適切な SAP システム名
	  "IDS" を使うかわりに、空文字列 "" を使います。
	  ディレクトリにアクセスするのにパスを &lt;sid&gt;
	  (この場合は IDS) を使って生成するので、
	  これはちょっとした問題を起こすことがあります。</p><pre class="programlisting">/usr/sap/IDS/SYS/...
/usr/sap/IDS/DVMGS00</pre><p>にアクセスするかわりに、
	  つぎのパスを使います。</p><pre class="programlisting">/usr/sap//SYS/...
/usr/sap/D00i</pre><p>インストールを続けるため、
	  リンクと追加のディレクトリを作成します。</p><pre class="screen"><code class="prompt">#</code> pwd
/compat/linux/usr/sap
<code class="prompt">#</code> ls -l
total 4
drwxr-xr-x 3  idsadm sapsys 512 May 5 11:20 D00
drwxr-x--x 5  idsadm sapsys 512 May 5 11:35 IDS
lrwxr-xr-x 1  root   sapsys 7 May 5 11:35 SYS -&gt; IDS/SYS
drwxrwxr-x 2  idsadm sapsys 512 May 5 13:00 tmp
drwxrwxr-x 11 idsadm sapsys 512 May 4 14:20 trans </pre><p>この現象を解説している SAP notes (0029227 and 0008401)
	  があります。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rfcrswboiniindind"></a>11.5.12.7. R3SETUP 中の [RFCRSWBOINI_IND_IND] エラー</h4></div></div></div><p>(ファイル <code class="filename">CENTRDB.R3S</code> で)
	  問題の段階の状態 (STATUS) を ERROR から OK に設定して
	  R3SETUP を再起動してください。
	  インストール後、レポート <code class="literal">RSWBOINS</code>
	  をトランザクション SE38 から実行しなければなりません。
	  <code class="literal">RFCRSWBOINI</code> および <code class="literal">RFCRADDBDIF</code>
	  段階の詳細については
	  SAP note 0162266 をご覧ください。</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rfcraddbdifindind"></a>11.5.12.8. R3SETUP 中の [RFCRADDBDIF_IND_IND] エラー</h4></div></div></div><p>(ファイル <code class="filename">CENTRDB.R3S</code> で)
	  問題の段階の状態 (STATUS) を ERROR から OK に設定して
	  R3SETUP を再起動してください。
	  インストール後、レポート <code class="literal">RADDBDIF</code> をトランザクション SE38
	  から実行しなければなりません。詳しくは
	  SAP note 0162266 をご覧ください。</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="linuxemu-oracle.html">戻る</a>〓</td><td width="20%" align="center"><a accesskey="u" href="linuxemu.html">上に戻る</a></td><td width="40%" align="right">〓<a accesskey="n" href="ch11s06.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">11.4. Oracle のインストール〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓11.6. 高度なトピックス</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>