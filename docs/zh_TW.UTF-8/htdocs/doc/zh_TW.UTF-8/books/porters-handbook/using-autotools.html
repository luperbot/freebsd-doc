<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>6.4. Using GNU autotools</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="special.html" title="章 6. Special considerations" /><link rel="prev" href="building.html" title="6.3. Building mechanisms" /><link rel="next" href="using-gettext.html" title="6.5. Using GNU gettext" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.4. Using GNU autotools</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="building.html">前一頁</a> </td><th width="60%" align="center">章 6. Special considerations</th><td width="20%" align="right"> <a accesskey="n" href="using-gettext.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-autotools"></a>6.4. Using GNU autotools</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-autotools-introduction"></a>6.4.1. Introduction</h3></div></div></div><p>The various GNU autotools provide an abstraction mechanism for
	    building a piece of software over a wide variety of operating
	    systems and machine architectures.  Within the Ports Collection,
	    an individual port can make use of these tools via a simple
	    construct:</p><pre class="programlisting">USE_AUTOTOOLS= <em class="replaceable"><code>tool</code></em>:<em class="replaceable"><code>version</code></em>[:<em class="replaceable"><code>operation</code></em>] ...</pre><p>At the time of writing, <em class="replaceable"><code>tool</code></em> can be
	    one of <code class="literal">libtool</code>, <code class="literal">libltdl</code>,
	    <code class="literal">autoconf</code>, <code class="literal">autoheader</code>,
	    <code class="literal">automake</code> or <code class="literal">aclocal</code>.</p><p><em class="replaceable"><code>version</code></em> specifies the particular
	    tool revision to be used (see
	    <code class="literal">devel/{automake,autoconf,libtool}[0-9]+</code> for
	    valid versions).</p><p><em class="replaceable"><code>operation</code></em> is an optional extension
	    to modify how the tool is used.</p><p>Multiple tools can be specified at once, either by including
	    them all on a single line, or using the <code class="literal">+=</code>
	    Makefile construct.</p><p>Finally, there is the special tool, called
	    <code class="literal">autotools</code>, which is a convenience function
	    to bring in all available versions of the autotools to allow
	    for cross-development work.  This can also be accomplished
	    by installing the <code class="literal">devel/autotools</code> port.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-libtool"></a>6.4.2. <code class="command">libtool</code></h3></div></div></div><p>Shared libraries using the GNU building framework usually use
	    <code class="command">libtool</code> to adjust the compilation and
	    installation of shared libraries to match the specifics of the
	    underlying operating system.  The usual practice is to use copy of
	    <code class="command">libtool</code> bundled with the application.  In case
	    you need to use external <code class="command">libtool</code>, you can use
	    the version provided by The Ports Collection:</p><pre class="programlisting">USE_AUTOTOOLS= libtool:<em class="replaceable"><code>version</code></em>[:env]</pre><p>With no additional operations,
	    <code class="literal">libtool:version</code> tells
	    the building framework to patch the configure script with the
	    system-installed copy of <code class="command">libtool</code>.
	    The <code class="varname">GNU_CONFIGURE</code> is implied.
	    Further, a number of make and shell
	    variables will be assigned for onward use by the port.  See
	    <code class="filename">bsd.autotools.mk</code> for details.</p><p>With the <code class="literal">:env</code> operation, only the
	    environment will be set up.</p><p>Finally, <code class="varname">LIBTOOLFLAGS</code> and
	    <code class="varname">LIBTOOLFILES</code> can be optionally set to override
	    the most likely arguments to, and files patched by,
	    <code class="command">libtool</code>.  Most ports are unlikely to need this.
	    See <code class="filename">bsd.autotools.mk</code> for further
	    details.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-libltdl"></a>6.4.3. <code class="command">libltdl</code></h3></div></div></div><p>Some ports make use of the <code class="command">libltdl</code> library
	    package, which is part of the <code class="command">libtool</code> suite.
	    Use of this library does not automatically necessitate the use of
	    <code class="command">libtool</code> itself, so a separate construct is
	    provided.</p><pre class="programlisting">USE_AUTOTOOLS= libltdl:<em class="replaceable"><code>version</code></em></pre><p>Currently, all this does is to bring in a
	    <code class="varname">LIB_DEPENDS</code> on the appropriate
	    <code class="command">libltdl</code> port, and is provided as a convenience
	    function to help eliminate any dependencies on the autotools ports
	    outside of the <code class="varname">USE_AUTOTOOLS</code> framework.  There
	    are no optional operations for this tool.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-autoconf"></a>6.4.4. <code class="command">autoconf</code> and
	    <code class="command">autoheader</code></h3></div></div></div><p>Some ports do not contain a configure script, but do contain an
	    autoconf template in the <code class="filename">configure.ac</code> file.
	    You can use the following assignments to let
	    <code class="command">autoconf</code> create the configure script, and also
	    have <code class="command">autoheader</code> create template headers for use
	    by the configure script.</p><pre class="programlisting">USE_AUTOTOOLS=	autoconf:<em class="replaceable"><code>version</code></em>[:env]</pre><p>and</p><pre class="programlisting">USE_AUTOTOOLS=	autoheader:<em class="replaceable"><code>version</code></em></pre><p>which also implies the use of
	    <code class="literal">autoconf:version</code>.</p><p>Similarly to <code class="command">libtool</code>, the inclusion of the
	    optional <code class="literal">:env</code> operation simply sets up the
	    environment for further use.  Without it, patching and
	    reconfiguration of the port is carried out.</p><p>The additional optional variables
	    <code class="varname">AUTOCONF_ARGS</code> and
	    <code class="varname">AUTOHEADER_ARGS</code> can be overridden by the port
	    <code class="filename">Makefile</code> if specifically requested.  As with
	    the <code class="command">libtool</code> equivalents, most ports are unlikely
	    to need this.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-automake"></a>6.4.5. <code class="command">automake</code> and
	    <code class="command">aclocal</code></h3></div></div></div><p>Some packages only contain <code class="filename">Makefile.am</code>
	    files.  These have to be converted into
	    <code class="filename">Makefile.in</code> files using
	    <code class="command">automake</code>, and the further processed by
	    <code class="command">configure</code> to generate an actual
	    <code class="filename">Makefile</code>.</p><p>Similarly, packages occasionally do not ship with included
	    <code class="filename">aclocal.m4</code> files, again required to build the
	    software.  This can be achieved with <code class="command">aclocal</code>,
	    which scans <code class="filename">configure.ac</code> or
	    <code class="filename">configure.in</code>.</p><p><code class="command">aclocal</code> has a similar relationship to
	    <code class="command">automake</code> as <code class="command">autoheader</code> does
	    to <code class="command">autoconf</code>, described in the previous section.
	    <code class="command">aclocal</code> implies the use of
	    <code class="command">automake</code>, thus we have:</p><pre class="programlisting">USE_AUTOTOOLS=	automake:<em class="replaceable"><code>version</code></em>[:<em class="replaceable"><code>env</code></em>]</pre><p>and</p><pre class="programlisting">USE_AUTOTOOLS=	aclocal:<em class="replaceable"><code>version</code></em></pre><p>which also implies the use of
	    <code class="literal">automake:version</code>.</p><p>Similarly to <code class="command">libtool</code> and
	    <code class="command">autoconf</code>, the inclusion of the optional
	    <code class="literal">:env</code> operation simply sets up the environment
	    for further use.  Without it, reconfiguration of the port is
	    carried out.</p><p>As with
	    <code class="command">autoconf</code> and <code class="command">autoheader</code>, both
	    <code class="command">automake</code> and <code class="command">aclocal</code> have
	    optional argument variables, <code class="varname">AUTOMAKE_ARGS</code> and
	    <code class="varname">ACLOCAL_ARGS</code> respectively, which may be
	    overriden by the port <code class="filename">Makefile</code> if
	    required.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="building.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="using-gettext.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">6.3. Building mechanisms </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 6.5. Using GNU <code class="literal">gettext</code></td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>