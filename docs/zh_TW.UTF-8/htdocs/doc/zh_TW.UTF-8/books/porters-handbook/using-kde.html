<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>6.9. Using KDE</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="special.html" title="章 6. Special considerations" /><link rel="prev" href="using-gnome.html" title="6.8. Using GNOME" /><link rel="next" href="using-java.html" title="6.10. Using Java" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.9. Using KDE</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-gnome.html">前一頁</a> </td><th width="60%" align="center">章 6. Special considerations</th><td width="20%" align="right"> <a accesskey="n" href="using-java.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-kde"></a>6.9. Using KDE</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="kde-variables"></a>6.9.1. Variable definitions</h3></div></div></div><div class="table"><a id="idp68389072"></a><div class="table-title">表格 6.7. Variables for ports that use KDE</div><div class="table-contents"><table summary="Variables for ports that use KDE" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">USE_KDELIBS_VER</code></td><td>The port uses KDE libraries.  It specifies the
		  major version of KDE to use and implies
		  <code class="varname">USE_QT_VER</code> of the appropriate
		  version.  The only possible value is
		  <code class="literal">3</code>.</td></tr><tr><td><code class="varname">USE_KDEBASE_VER</code></td><td>The port uses KDE base.  It specifies the major
		  version of KDE to use and implies
		  <code class="varname">USE_QT_VER</code> of the appropriate version.
		  The only possible value is <code class="literal">3</code>.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="kde-qt"></a>6.9.2. Ports that require Qt</h3></div></div></div><div class="table"><a id="idp68395984"></a><div class="table-title">表格 6.8. Variables for ports that use Qt</div><div class="table-contents"><table summary="Variables for ports that use Qt" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">USE_QT_VER</code></td><td>The port uses the Qt toolkit.  Possible values
		  are <code class="literal">3</code> and <code class="literal">4</code>;
		  each specify the major version of Qt to use.  Appropriate
		  parameters are passed to <code class="command">configure</code>
		  script and <code class="command">make</code>.</td></tr><tr><td><code class="varname">QT_PREFIX</code></td><td>Set to the path where Qt installed to (read-only
		  variable).</td></tr><tr><td><code class="varname">MOC</code></td><td>Set to the path of <code class="command">moc</code>
		  (read-only variable).  Default set according to
		  <code class="varname">USE_QT_VER</code> value.</td></tr><tr><td><code class="varname">QTCPPFLAGS</code></td><td>Additional compiler flags passed via
		  <code class="varname">CONFIGURE_ENV</code> for Qt toolkit.
		  Default set according to
		  <code class="varname">USE_QT_VER</code>.</td></tr><tr><td><code class="varname">QTCFGLIBS</code></td><td>Additional libraries for linking passed via
		  <code class="varname">CONFIGURE_ENV</code> for Qt toolkit.
		  Default set according to
		  <code class="varname">USE_QT_VER</code>.</td></tr><tr><td><code class="varname">QTNONSTANDARD</code></td><td>Suppress modification of
		  <code class="varname">CONFIGURE_ENV</code>,
		  <code class="varname">CONFIGURE_ARGS</code>, and
		  <code class="varname">MAKE_ENV</code>.</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="idp68422864"></a><div class="table-title">表格 6.9. Additional variables for ports that use Qt 4.x</div><div class="table-contents"><table summary="Additional variables for ports that use Qt 4.x" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">QT_COMPONENTS</code></td><td>Specify tool and library dependencies for Qt4.
		  See below for details.</td></tr><tr><td><code class="varname">UIC</code></td><td>Set to the path of <code class="command">uic</code> (read-only
		  variable).  Default set according to
		  <code class="varname">USE_QT_VER</code> value.</td></tr><tr><td><code class="varname">QMAKE</code></td><td>Set to the path of <code class="command">qmake</code>
		  (read-only variable).  Default set according to
		  <code class="varname">USE_QT_VER</code> value.</td></tr><tr><td><code class="varname">QMAKESPEC</code></td><td>Set to the path of configuration file for
		  <code class="command">qmake</code> (read-only variable).  Default
		  set according to <code class="varname">USE_QT_VER</code>
		  value.</td></tr></tbody></table></div></div><br class="table-break" /><p>When <code class="varname">USE_QT_VER</code> is set, some useful
	  settings are passed to <code class="command">configure</code> script:</p><pre class="programlisting">CONFIGURE_ARGS+= --with-qt-includes=${QT_PREFIX}/include \
                 --with-qt-libraries=${QT_PREFIX}/lib \
		 --with-extra-libs=${LOCALBASE}/lib \
		 --with-extra-includes=${LOCALBASE}/include
CONFIGURE_ENV+=  MOC="${MOC}" CPPFLAGS="${CPPFLAGS} ${QTCPPFLAGS}" LIBS="${QTCFGLIBS}" \
                 QTDIR="${QT_PREFIX}" KDEDIR="${KDE_PREFIX}"</pre><p>If <code class="varname">USE_QT_VER</code> is set to <code class="literal">4</code>,
	  the following settings are also deployed:</p><pre class="programlisting">CONFIGURE_ENV+= UIC="${UIC}" QMAKE="${QMAKE}" QMAKESPEC="${QMAKESPEC}"
MAKE_ENV+=      QMAKESPEC="${QMAKESPEC}"</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="qt4-components"></a>6.9.3. Component selection (Qt 4.x only)</h3></div></div></div><p>When <code class="varname">USE_QT_VER</code> is set to 4, individual
	  Qt4 tool and library dependencies can be specified in the
	  <code class="varname">QT_COMPONENTS</code> variable.  Every component
	  can be suffixed by either <code class="literal">_build</code> or <code class="literal">_run</code>,
	  the suffix indicating whether the component should be depended on at
	  buildtime or runtime, respectively. If unsuffixed, the component will be
	  depended on at both build- and runtime. Usually, library components
	  should be specified unsuffixed, tool components should be
	  specified with the <code class="literal">_build</code> suffix and plugin components
	  should be specified with the <code class="literal">_run</code> suffix. The most commonly
	  used components are listed below (all available components are
	  listed in <code class="varname">_QT_COMPONENTS_ALL</code> in
	  <code class="filename">/usr/ports/Mk/bsd.qt.mk</code>):</p><div class="table"><a id="idp68443856"></a><div class="table-title">表格 6.10. Available Qt4 library components</div><div class="table-contents"><table summary="Available Qt4 library components" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">corelib</code></td><td>core library (can be omitted unless the port
		  uses nothing but <code class="literal">corelib</code>)</td></tr><tr><td><code class="literal">gui</code></td><td>graphical user interface library</td></tr><tr><td><code class="literal">network</code></td><td>network library</td></tr><tr><td><code class="literal">opengl</code></td><td>OpenGL library</td></tr><tr><td><code class="literal">qt3support</code></td><td>Qt3 compatibility library</td></tr><tr><td><code class="literal">qtestlib</code></td><td>unit testing library</td></tr><tr><td><code class="literal">script</code></td><td>script library</td></tr><tr><td><code class="literal">sql</code></td><td>SQL library</td></tr><tr><td><code class="literal">xml</code></td><td>XML library</td></tr></tbody></table></div></div><br class="table-break" /><p>You can determine which libraries the application depends
	  on, by running <code class="command">ldd</code> on the main executable
	  after a successful compilation.</p><div class="table"><a id="idp68468304"></a><div class="table-title">表格 6.11. Available Qt4 tool components</div><div class="table-contents"><table summary="Available Qt4 tool components" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">moc</code></td><td>meta object compiler (needed for almost
		  every Qt application at buildtime)</td></tr><tr><td><code class="literal">qmake</code></td><td>Makefile generator / build utility</td></tr><tr><td><code class="literal">rcc</code></td><td>resource compiler (need if the application comes
		  with <code class="filename">*.rc</code> or <code class="filename">*.qrc</code>
		  files)</td></tr><tr><td><code class="literal">uic</code></td><td>user interface compiler (needed if the application
		  comes with <code class="filename">*.ui</code> files created by Qt Designer
		  - in practice, every Qt application with a GUI)</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="idp68478160"></a><div class="table-title">表格 6.12. Available Qt4 plugin components</div><div class="table-contents"><table summary="Available Qt4 plugin components" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">iconengines</code></td><td>SVG icon engine plugin (if the application
		  ships SVG icons)</td></tr><tr><td><code class="literal">imageformats</code></td><td>imageformat plugins for GIF, JPEG, MNG and
		  SVG (if the application ships image files)</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="qt4-components-example"></a><div class="example-title">範例 6.3. Selecting Qt4 components</div><div class="example-contents"><p>In this example, the ported application uses the
	    Qt4 graphical user interface library, the Qt4 core
	    library, all of the Qt4 code generation tools and Qt4's
	    Makefile generator. Since the gui library implies a
	    dependency on the core library, corelib does
	    not need to be specified. The Qt4 code generation
	    tools moc, uic and rcc, as well as the Makefile generator
	    qmake are only needed at buildtime, thus they are specified
	    with the <code class="literal">_build</code> suffix:</p><pre class="programlisting">USE_QT_VER=    4
QT_COMPONENTS= gui moc_build qmake_build rcc_build uic_build</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="qt-additional"></a>6.9.4. Additional considerations</h3></div></div></div><p>If the application does not provide a
	  <code class="filename">configure</code> file but a <code class="filename">.pro</code>
	  file, you can use the following:</p><pre class="programlisting">HAS_CONFIGURE=  yes

do-configure:
        @cd ${WRKSRC} &amp;&amp; ${SETENV} ${CONFIGURE_ENV} \
	        ${QMAKE} -unix PREFIX=${PREFIX} texmaker.pro</pre><p>Note the similarity to the <code class="command">qmake</code> line
	  from the provided <code class="filename">BUILD.sh</code> script.  Passing
	  <code class="varname">CONFIGURE_ENV</code> ensures <code class="command">qmake</code>
	  will see the <code class="varname">QMAKESPEC</code> variable, without which
	  it cannot work.  <code class="command">qmake</code> generates standard
	  Makefiles, so it is not necessary to write our own
	  <code class="buildtarget">build</code> target.</p><p>Qt applications often are written to be cross-platform
	  and often X11/Unix isn't the platform they are developed on,
	  which in turn often leads to certain loose ends, like:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Missing additional includepaths.</em></span>
	      Many applications come with system tray icon support, but
	      neglect to look for includes and/or libraries in the X11
	      directories.  You can tell <code class="command">qmake</code> to
	      add directories to the include and library searchpaths
	      via the commandline, for example:</p><pre class="programlisting">${QMAKE} -unix PREFIX=${PREFIX} INCLUDEPATH+=${LOCALBASE}/include \
       LIBS+=-L${LOCALBASE}/lib sillyapp.pro</pre></li><li class="listitem"><p><span class="emphasis"><em>Bogus installation paths.</em></span>
	      Sometimes data such as icons or .desktop files are by
	      default installed into directories which aren't scanned by
	      XDG-compatible applications.  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/texmaker/pkg-descr">editors/texmaker</a>
	      is an example for this - look at <code class="filename">patch-texmaker.pro</code>
	      in the <code class="filename">files</code> directory of that port
	      for a template on how to remedy this directly in the Qmake
	      project file.</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-gnome.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="using-java.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">6.8. Using GNOME </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 6.10. Using Java</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>