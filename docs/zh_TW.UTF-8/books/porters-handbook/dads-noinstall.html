<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>12.15. Marking a port not installable with BROKEN, FORBIDDEN, or IGNORE</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="porting-dads.html" title="章 12. Dos and Don'ts" /><link rel="prev" href="dads-readme.html" title="12.14. README.html" /><link rel="next" href="dads-deprecated.html" title="12.16. Marking a port for removal with DEPRECATED or EXPIRATION_DATE" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.15. Marking a port not installable with <code class="varname">BROKEN</code>,
	  <code class="varname">FORBIDDEN</code>, or <code class="varname">IGNORE</code></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dads-readme.html">前一頁</a> </td><th width="60%" align="center">章 12. Dos and Don'ts</th><td width="20%" align="right"> <a accesskey="n" href="dads-deprecated.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dads-noinstall"></a>12.15. Marking a port not installable with <code class="varname">BROKEN</code>,
	  <code class="varname">FORBIDDEN</code>, or <code class="varname">IGNORE</code></h2></div></div></div><p>In certain cases users should be prevented from installing
	  a port.  To tell a user that
	  a port should not be installed, there are several
	  <code class="command">make</code> variables that can be used in a port's
	  <code class="filename">Makefile</code>.  The value of the following
	  <code class="command">make</code> variables will be the reason that is
	  given back to users for why the port refuses to install itself.
	  Please use the correct <code class="command">make</code> variable as
	  each make variable conveys radically different meanings to
	  both users, and to automated systems that depend on the
	  <code class="filename">Makefile</code>s, such as
	<a class="link" href="build-cluster.html" title="14.4. The FreeBSD Port Building Cluster on pointyhat.FreeBSD.org">the ports build cluster</a>,
	<a class="link" href="keeping-up.html#freshports" title="14.1. FreshPorts">FreshPorts</a>, and
	<a class="link" href="portsmon.html" title="14.6. The FreeBSD Ports Monitoring System">portsmon</a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dads-noinstall-variables"></a>12.15.1. Variables</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">BROKEN</code> is reserved for ports that
	      currently do not compile, install, or deinstall correctly.
	      It should be used for ports where the problem is
	      believed to be temporary.</p><p>If instructed, the build cluster will still attempt to
	      try to build
	      them to see if the underlying problem has been
	      resolved.  (However, in general, the cluster is run without
	      this.)</p><p>For instance, use
	      <code class="varname">BROKEN</code> when a port:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>does not compile</p></li><li class="listitem"><p>fails its configuration or installation process</p></li><li class="listitem"><p>installs files outside of
		  <code class="filename">${LOCALBASE}</code></p></li><li class="listitem"><p>does not remove all its files cleanly upon
		  deinstall (however, it may be acceptable, and desirable,
		  for the port to leave user-modified files behind)</p></li></ul></div></li><li class="listitem"><p><code class="varname">FORBIDDEN</code> is used for ports that
	      do contain a security vulnerability or induce grave
	      concern regarding the security of a FreeBSD system with
	      a given port installed (ex: a reputably insecure program
	      or a program that provides easily exploitable services).
	      Ports should be marked as <code class="varname">FORBIDDEN</code>
	      as soon as a particular piece of software has a
	      vulnerability and there is no released upgrade.  Ideally
	      ports should be upgraded as soon as possible when a
	      security vulnerability is discovered so as to reduce the
	      number of vulnerable FreeBSD hosts (we like being known
	      for being secure), however sometimes there is a
	      noticeable time gap between disclosure of a
	      vulnerability and an updated release of the
	      vulnerable software.  Do not mark a port
	      <code class="varname">FORBIDDEN</code> for any reason other than
	      security.</p></li><li class="listitem"><p><code class="varname">IGNORE</code> is reserved for ports that
	      should not be built for some other reason.
	      It should be used for ports where the problem is
	      believed to be structural.
	      The build
	      cluster will not, under any
	      circumstances, build ports marked as
	      <code class="varname">IGNORE</code>.  For instance, use
	      <code class="varname">IGNORE</code> when a port:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>compiles but does not run properly</p></li><li class="listitem"><p>does not work on the installed version of FreeBSD</p></li><li class="listitem"><p>requires FreeBSD kernel sources to build, but the
		  user does not have them installed</p></li><li class="listitem"><p>has a distfile which may not be automatically
		  fetched due to licensing restrictions</p></li><li class="listitem"><p>does not work with some other currently installed
		  port (for instance, the port depends on
		  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache21/pkg-descr">www/apache21</a> but
		  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache13/pkg-descr">www/apache13</a>
		  is installed)</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">If a port would conflict with a currently installed
		port (for example, if they install a file in the same
		place that perfoms a different function),
		<a class="link" href="conflicts.html" title="5.13. CONFLICTS">use
		<code class="varname">CONFLICTS</code> instead</a>.
		<code class="varname">CONFLICTS</code> will set
		<code class="varname">IGNORE</code> by itself.</p></div></li><li class="listitem"><p>If a port should be marked <code class="varname">IGNORE</code>
	      only on certain architectures, there are two other
	      convenience variables that will automatically set
	      <code class="varname">IGNORE</code> for you:
	      <code class="varname">ONLY_FOR_ARCHS</code> and
	      <code class="varname">NOT_FOR_ARCHS</code>.  Examples:</p><pre class="programlisting">ONLY_FOR_ARCHS= i386 amd64</pre><pre class="programlisting">NOT_FOR_ARCHS= alpha ia64 sparc64</pre><p>A custom <code class="varname">IGNORE</code> message can be set
	      using <code class="varname">ONLY_FOR_ARCHS_REASON</code> and
	      <code class="varname">NOT_FOR_ARCHS_REASON</code>.  Per architecture
	      entries are possible with
	      <code class="varname">ONLY_FOR_ARCHS_REASON_<em class="replaceable"><code>ARCH</code></em></code>
	      and
	      <code class="varname">NOT_FOR_ARCHS_REASON_<em class="replaceable"><code>ARCH</code></em></code>.</p></li><li class="listitem"><p>If a port fetches i386 binaries and installs them,
	      <code class="varname">IA32_BINARY_PORT</code> should be set.  If this
	      variable is set, it will be checked whether the
	      <code class="filename">/usr/lib32</code> directory is available for
	      IA32 versions of libraries and whether the kernel
	      has IA32 compatibility compiled in.  If one of these two
	      dependencies is not satisfied, <code class="varname">IGNORE</code> will
	      be set automatically.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dads-noinstall-notes"></a>12.15.2. Implementation Notes</h3></div></div></div><p>The strings should not be quoted.
	    Also, the wording of the string should be somewhat
	    different due to the way the information is shown to the
	    user.  Examples:</p><pre class="programlisting">BROKEN= this port is unsupported on FreeBSD 5.x</pre><pre class="programlisting">IGNORE= is unsupported on FreeBSD 5.x</pre><p>resulting in the following output from
	    <code class="command">make describe</code>:</p><pre class="programlisting">===&gt;  foobar-0.1 is marked as broken: this port is unsupported on FreeBSD 5.x.</pre><pre class="programlisting">===&gt;  foobar-0.1 is unsupported on FreeBSD 5.x.</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dads-readme.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="porting-dads.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="dads-deprecated.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">12.14. <code class="filename">README.html</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 12.16. Marking a port for removal with <code class="varname">DEPRECATED</code>
	  or <code class="varname">EXPIRATION_DATE</code></td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>