<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>7.3. Configuration files</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="plist.html" title="章 7. Advanced pkg-plist practices" /><link rel="prev" href="plist-cleaning.html" title="7.2. Empty directories" /><link rel="next" href="plist-dynamic.html" title="7.4. Dynamic vs. static package list" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7.3. Configuration files</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="plist-cleaning.html">前一頁</a> </td><th width="60%" align="center">章 7. Advanced <code class="filename">pkg-plist</code> practices</th><td width="20%" align="right"> <a accesskey="n" href="plist-dynamic.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="plist-config"></a>7.3. Configuration files</h2></div></div></div><p>If your port requires some configuration files in
	  <code class="filename">PREFIX/etc</code>, do
	  <span class="emphasis"><em>not</em></span> just install them and list them in
	  <code class="filename">pkg-plist</code>.  That will cause
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_delete&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_delete</span>(1)</span></a> to delete files carefully edited by
	  the user and a new installation to wipe them out.</p><p>Instead, install sample files with a suffix
	  (<code class="filename">filename.sample</code>
	  will work well).  Copy the sample file as the real configuration
	  file, if it does not exist.  On deinstall, delete the configuration
	  file, but only if it was not modified by the user.  You need to
	  handle this both in the port <code class="filename">Makefile</code>, and in
	  the <code class="filename">pkg-plist</code> (for installation from
	  the package).</p><p>Example of the <code class="filename">Makefile</code> part:</p><pre class="programlisting">post-install:
	@if [ ! -f ${PREFIX}/etc/orbit.conf ]; then \
		${CP} -p ${PREFIX}/etc/orbit.conf.sample ${PREFIX}/etc/orbit.conf ; \
	fi</pre><p>Example of the <code class="filename">pkg-plist</code> part:</p><pre class="programlisting">@unexec if cmp -s %D/etc/orbit.conf.sample %D/etc/orbit.conf; then rm -f %D/etc/orbit.conf; fi
etc/orbit.conf.sample
@exec if [ ! -f %D/etc/orbit.conf ] ; then cp -p %D/%F %B/orbit.conf; fi</pre><p>Alternatively, print out a <a class="link" href="pkg-files.html#porting-message" title="8.1. pkg-message">message</a> pointing out that the
	  user has to copy and edit the file before the software can be made
	  to work.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="plist-cleaning.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="plist.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="plist-dynamic.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">7.2. Empty directories </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 7.4. Dynamic vs. static package list</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>