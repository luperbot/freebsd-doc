<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>章 10. Upgrading</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="prev" href="testing-tinderbox.html" title="9.5. Tinderbox" /><link rel="next" href="security.html" title="章 11. Ports security" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">章 10. Upgrading</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="testing-tinderbox.html">前一頁</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="security.html">下一頁</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="port-upgrading"></a>章 10. Upgrading</h1></div></div></div><p>When you notice that a port is out of date compared to the latest
	version from the original authors, you should first ensure that you
	have the latest
	port.  You can find them in the
	<code class="filename">ports/ports-current</code> directory of the FreeBSD FTP mirror
	sites.  However, if you are working with more than a few
	ports, you will probably find it easier to use
	<span class="application">CVSup</span> to keep your whole ports collection
	up-to-date, as described in the
	<a class="link" href="../../../../doc/zh_TW.UTF-8/books/handbook/synching.html#CVSUP-CONFIG" target="_top">Handbook</a>.
	This will have the added benefit of tracking all the ports'
	dependencies.</p><p>The next step is to see if there is an update already pending.
	To do this, you have two options.  There is a searchable interface
	to the
	<a class="link" href="http://www.FreeBSD.org/cgi/query-pr-summary.cgi?query" target="_top">
	FreeBSD Problem Report (PR) database</a> (also known as
	<code class="literal">GNATS</code>).  Select <code class="literal">ports</code> in the
	dropdown, and enter the name of the port.</p><p>However, sometimes people forget to put the name of the port
	into the Synopsis field in an unambiguous fashion.  In that case,
	you can try the <a class="link" href="portsmon.html" title="14.6. The FreeBSD Ports Monitoring System">
	FreeBSD Ports Monitoring System</a> (also known as
	<code class="literal">portsmon</code>).  This system attempts to classify
	port PRs by portname.  To search for PRs about a particular port,
	use the <a class="link" href="http://portsmon.FreeBSD.org/portoverview.py" target="_top">
	Overview of One Port</a>.</p><p>If there is no pending PR, the next step is to send an email
	to the port's maintainer, as shown by
	<code class="command">make maintainer</code>.  That person may
	already be working on an upgrade, or have a reason to not upgrade the
	port right now (because of, for example, stability problems of the new
	version); you would not want to duplicate their work.  Note that
	unmaintained ports are listed with a maintainer of
	<code class="literal">ports@FreeBSD.org</code>, which is just the general
	ports mailing list, so sending mail there
	probably will not help in this case.</p><p>If the maintainer asks you to do the upgrade or there is
	no maintainer, then you have a chance to help out FreeBSD by
	preparing the update yourself!  Please make the changes and save
	the result of the
	recursive <code class="command">diff</code> output
	of the new and old
	ports directories (e.g., if your modified port directory is
	called <code class="filename">superedit</code> and the original is in our tree
	as <code class="filename">superedit.bak</code>, then save the result of
	<code class="command">diff -ruN superedit.bak superedit</code>).  Either
	unified or context diff is fine, but port committers generally
	prefer unified diffs.  Note the use of the <code class="literal">-N</code>
	option——this is the accepted way to force diff to properly
	deal with the case of new files being added or old files being
	deleted.  Before sending us the diff, please examine the
	output to make sure all the changes make sense.  To
	simplify common operations with patch files, you can use
	<code class="filename">/usr/ports/Tools/scripts/patchtool.py</code>.
	Before using it, please read
	<code class="filename">/usr/ports/Tools/scripts/README.patchtool</code>.</p><p>If the port is unmaintained, and you are actively using
	it yourself, please consider volunteering to become its
	maintainer.  FreeBSD has over 2000 ports without maintainers,
	and this is an area where more volunteers are always needed.
	(For a detailed description of the responsibilities of maintainers,
	refer to the section in the
	<a class="link" href="../../../../doc/zh_TW.UTF-8/books/developers-handbook/policies.html#POLICIES-MAINTAINER" target="_top">
	Developer's Handbook</a>.)</p><p>最好的方式是使用 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a> 並附上 diff 一併回報(類別請選
	<code class="literal">ports</code>)。  若你是該 port 的維護者，請記得在 synopsis
	那行的開頭註明 <code class="literal">[maintainer update]</code>，並且在 PR 的
	<span class="quote">“<span class="quote">Class</span>”</span> 分類填上 <code class="literal">maintainer-update</code>。
	否則，該 PR 的 <span class="quote">“<span class="quote">Class</span>”</span> 處就是填
	<code class="literal">change-request</code>。
	Please mention any added or
	deleted files in the message, as they have to be explicitly specified
	to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a> when doing a commit.  If the diff is more than about 20KB,
	please compress and uuencode it; otherwise, just include it in the PR
	as is.</p><p>Before you <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a>, you should review the
	<a class="link" href="../../../../doc/zh_TW.UTF-8/articles/problem-reports/pr-writing.html" target="_top">
	Writing the problem report</a> section in the Problem
	Reports article; it contains far more information about how to write
	useful problem reports.</p><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">If your upgrade is motivated by security concerns or a
	  serious fault in the currently committed port, please notify
	  the Ports Management Team <code class="email">&lt;<a xmlns="" class="email" href="mailto:portmgr@FreeBSD.org">portmgr@FreeBSD.org</a>&gt;</code> to request immediate rebuilding and
	  redistribution of your port's package.  Unsuspecting users
	  of <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> will otherwise continue to install the
	  old version via <code class="command">pkg_add -r</code> for several
	  weeks.</p></div><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">Once again, please use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> and not <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">shar</span>(1)</span></a> to send
	  updates to existing ports!</p></div><p>Now that you have done all that, you will want to read about
	how to keep up-to-date in <a class="xref" href="keeping-up.html" title="章 14. Keeping Up">章 14, <em>Keeping Up</em></a>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="testing-tinderbox.html">前一頁</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="security.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">9.5. Tinderbox </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 章 11. Ports security</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>