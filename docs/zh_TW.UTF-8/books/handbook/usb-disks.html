<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>18.5. USB 儲存裝置</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD 使用手冊" /><link rel="up" href="disks.html" title="章 18. 儲存設備篇" /><link rel="prev" href="disks-growing.html" title="18.4. Resizing and Growing Disks" /><link rel="next" href="creating-cds.html" title="18.6. Creating and Using CD Media" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">18.5. USB 儲存裝置</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="disks-growing.html">前一頁</a> </td><th width="60%" align="center">章 18. 儲存設備篇</th><td width="20%" align="right"> <a accesskey="n" href="creating-cds.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="usb-disks"></a>18.5. USB 儲存裝置</h2></div><div><span class="authorgroup">Contributed by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp80357072" class="indexterm"></a><p>在現在，有許多外部儲存裝置採用 USB(Universal Serial Bus) 介面，
      例如硬碟、USB 拇指碟、CD-R 燒錄機等。  FreeBSD 提供對這些裝置的支援。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80358608"></a>18.5.1. 設定</h3></div></div></div><p>USB mass 儲存裝置驅動程式(<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a>)提供 USB 儲存裝置的支援。
	但如果是用 <code class="filename">GENERIC</code> kernel，就不需要做任何設定變動
	。  若是自訂 kernel，請確認 kernel 設定檔含有下面這幾行：</p><pre class="programlisting">device scbus
device da
device pass
device uhci
device ohci
device usb
device umass</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a> 驅動程式透過 SCSI 子系統存取 USB 儲存裝置，
	您的 USB 裝置會被系統辨識成 SCSI 裝置。  依照您主機板上 USB 晶片型號，
	您只需要 <code class="literal">device uhci</code> 或
	<code class="literal">device ohci</code> 其中一個。
	然而，將兩者都編進 kernel 也無妨。  只要別忘了在修改 kernel
	設定後重新編譯及安裝新的 kernel 就行了。</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">如果您的 USB 裝置是 CD-R 或 DVD 燒錄機，則 SCSI 光碟機驅動程式
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">cd</span>(4)</span></a> 必須寫入 kernel 設定檔，像這樣：</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">device cd</pre><p xmlns="http://www.w3.org/1999/xhtml">因為燒錄機會被當成 SCSI 裝置，所以 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atapicam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atapicam</span>(4)</span></a>
	  驅動程式不需要編入 kernel。</p></div><p>USB 2.0 控制器的支援由 FreeBSD; 提供，然而必須在 kernel
	設定檔增加下面這行以提供 USB 2.0 支援：</p><pre class="programlisting">device ehci</pre><p>注意，如果您需要 USB 1.x 支援，您仍然需要將 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uhci&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">uhci</span>(4)</span></a> 及
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ohci&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ohci</span>(4)</span></a> 驅動程式編入 kernel。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80369104"></a>18.5.2. 測試設定</h3></div></div></div><p>The configuration is ready to be tested: plug in your USB
	device, and in the system message buffer (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>), the
	drive should appear as something like:</p><pre class="screen">umass0: USB Solid state disk, rev 1.10/1.00, addr 2
GEOM: create disk da0 dp=0xc2d74850
da0 at umass-sim0 bus 0 target 0 lun 0
da0: &lt;Generic Traveling Disk 1.11&gt; Removable Direct Access SCSI-2 device
da0: 1.000MB/s transfers
da0: 126MB (258048 512 byte sectors: 64H 32S/T 126C)</pre><p>Of course, the brand, the device node
	(<code class="filename">da0</code>) and other details can differ
	according to your configuration.</p><p>Since the USB device is seen as a SCSI one, the
	<code class="command">camcontrol</code> command can be used to list the
	USB storage devices attached to the system:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol devlist</code></strong>
&lt;Generic Traveling Disk 1.11&gt;      at scbus0 target 0 lun 0 (da0,pass0)</pre><p>If the drive comes with a file system, you should be able
	to mount it.  The <a class="xref" href="disks-adding.html" title="18.3. 新增磁碟">節 18.3, “新增磁碟”</a> will help you
	to format and create partitions on the USB drive if
	needed.</p><p>If you unplug the device (the disk must be unmounted
	before), you should see, in the system message buffer,
	something like the following:</p><pre class="screen">umass0: at uhub0 port 1 (addr 2) disconnected
(da0:umass-sim0:0:0:0): lost device
(da0:umass-sim0:0:0:0): removing device entry
GEOM: destroy disk da0 dp=0xc2d74850
umass0: detached</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80375504"></a>18.5.3. Further Reading</h3></div></div></div><p>Beside the <a class="link" href="disks-adding.html" title="18.3. 新增磁碟">Adding
	Disks</a> and <a class="link" href="mount-unmount.html" title="4.7. 掛載與卸載檔案系統">Mounting and
	Unmounting File Systems</a> sections, reading various
	manual pages may be also useful: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a>,
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">camcontrol</span>(8)</span></a>, and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=usbdevs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">usbdevs</span>(8)</span></a>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="disks-growing.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="creating-cds.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">18.4. Resizing and Growing Disks </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 18.6. Creating and Using <acronym class="acronym">CD</acronym> Media</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>