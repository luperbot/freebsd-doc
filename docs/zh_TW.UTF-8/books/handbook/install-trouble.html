<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>3.11. 安裝的疑難雜症解決</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD 使用手冊" /><link rel="up" href="install.html" title="章 3. 安裝 FreeBSD" /><link rel="prev" href="install-post.html" title="3.10. 後續安裝" /><link rel="next" href="install-advanced.html" title="3.12. 進階安裝指南" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.11. 安裝的疑難雜症解決</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="install-post.html">前一頁</a> </td><th width="60%" align="center">章 3. 安裝 FreeBSD</th><td width="20%" align="right"> <a accesskey="n" href="install-advanced.html">下一頁</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-trouble"></a>3.11. 安裝的疑難雜症解決</h2></div></div></div><a id="idp69283664" class="indexterm"></a><p>The following section covers basic installation troubleshooting,
      such as common problems people have reported.  There are also a few
      questions and answers for people wishing to dual-boot FreeBSD with
      <span class="trademark">MS-DOS</span>® or <span class="trademark">Windows</span>®.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69286352"></a>3.11.1. What to Do If Something Goes Wrong</h3></div></div></div><p>Due to various limitations of the PC architecture, it is
        impossible for probing to be 100% reliable, however, there are a
        few things you can do if it fails.</p><p>Check the <a class="link" href="http://www.FreeBSD.org/releases/index.html" target="_top">Hardware Notes
	</a> document for your version of FreeBSD to make sure
	your hardware is supported.</p><p>若硬體有在支援清單內，但使用 <code class="filename">GENERIC</code> kernel
	仍有問題，那麼就可能需要 <a class="link" href="kernelconfig.html" title="章 9. 設定 FreeBSD Kernel">自訂 kernel</a>，以加入有支援的硬體。
        The kernel on the boot disks is configured
        assuming that most hardware devices are in their factory default
        configuration in terms of IRQs, IO addresses, and DMA channels.  If
        your hardware has been reconfigured, you will most likely need to
        edit the kernel configuration and recompile to tell
	FreeBSD where to find things.</p><p>It is also possible that a probe for a device not present will
        cause a later probe for another device that is present to fail.  In
        that case, the probes for the conflicting driver(s) should be
        disabled.</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">Some installation problems can be avoided or alleviated
          by updating the firmware on various hardware components, most notably
          the motherboard.  The motherboard firmware may also be referred to
          as <acronym class="acronym">BIOS</acronym> and most of the motherboard or computer
          manufactures have a website where the upgrades and upgrade information
          may be located.</p><p xmlns="http://www.w3.org/1999/xhtml">Most manufacturers strongly advise against upgrading the motherboard
          <acronym class="acronym">BIOS</acronym> unless there is a good reason for doing so, which
          could possibly be a critical update of sorts.  The upgrade process
          <span class="emphasis"><em>can</em></span> go wrong, causing permanent damage to the
          <acronym class="acronym">BIOS</acronym> chip.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69296976"></a>3.11.2. Using <span class="trademark">MS-DOS</span>® and <span class="trademark">Windows</span>® File Systems</h3></div></div></div><p>At this time, FreeBSD does not support file systems compressed with the
	<span class="application">Double Space™</span> application.  Therefore the file
	system will need to be uncompressed before FreeBSD can access the data.  This
	can be done by running the <span class="application">Compression Agent</span>
	located in the <span class="guimenuitem">Start</span>&gt; <span class="guimenuitem">Programs</span> &gt;
	<span class="guimenuitem">System Tools</span> menu.</p><p>FreeBSD can support <span class="trademark">MS-DOS</span>® based file systems(FAT16 and FAT32).
	This requires you use the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a> command
	with the required parameters.  The utility most common usage is:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t msdosfs /dev/ad0s1 /mnt</code></strong></pre><p>In this example, the <span class="trademark">MS-DOS</span>® file system is located on the first partition of
	the primary hard disk.  Your situation may be different, check the output from
	the <code class="command">dmesg</code>, and <code class="command">mount</code> commands.  They should
	produce enough information to give an idea of the partition layout.</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">Extended <span class="trademark">MS-DOS</span>® file systems are usually mapped after the FreeBSD
	partitions.  In other words, the slice number may be higher than the ones
	FreeBSD is using.  For instance, the first <span class="trademark">MS-DOS</span>® partition may be
	<code class="filename">/dev/ad0s1</code>, the FreeBSD partition may be
	<code class="filename">/dev/ad0s2</code>, with the extended <span class="trademark">MS-DOS</span>® partition being
	located on <code class="filename">/dev/ad0s3</code>.  To some, this can be confusing
	at first.</p></div><p>NTFS partitions can also be mounted in a similar manner
	using the <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_ntfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_ntfs</span>(8)</span></a> command.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69313872"></a>3.11.3. Troubleshooting Questions and Answers</h3></div></div></div><div class="qandaset"><a id="idp69314512"></a><dl><dt>3.11.3.1. <a href="install-trouble.html#idp69314768">My system hangs while probing hardware during boot,
	      or it behaves strangely during install, or the floppy
	      drive isn't probed.</a></dt><dt>3.11.3.2. <a href="install-trouble.html#idp69319120">I go to boot from the hard disk for the first time
	      after installing FreeBSD, the kernel loads and probes my
	      hardware, but stops with messages like:</a></dt><dt>3.11.3.3. <a href="install-trouble.html#idp69332944">I go to boot from the hard disk for the first time
	      after installing FreeBSD, but the Boot Manager prompt just
	      prints F? at the boot menu each time
	      but the boot won't go any further.</a></dt><dt>3.11.3.4. <a href="install-trouble.html#idp69336784">The system finds my ed(4) network card, but I
	      keep getting device timeout errors.</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp69314768"></a><a id="idp69315024"></a><p><strong>3.11.3.1.</strong></p></td><td align="left" valign="top"><p>My system hangs while probing hardware during boot,
	      or it behaves strangely during install, or the floppy
	      drive isn't probed.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>FreeBSD 5.0 and above makes extensive use of the system
	      ACPI service on the i386, amd64 and ia64 platforms to
	      aid in system configuration if it's detected during
	      boot.  Unfortunately, some bugs still exist in both the
	      ACPI driver and within system motherboards and BIOS.
	      The use of ACPI can be disabled by setting
	      the <code class="literal">hint.acpi.0.disabled</code> hint in the
	      third stage boot loader:</p><pre class="screen">set hint.acpi.0.disabled="1"</pre><p>This is reset each time the system is booted, so it
	      is necessary to
	      add <code class="literal">hint.acpi.0.disabled="1"</code> to the
	      file
	      <code class="filename">/boot/loader.conf</code>.  More
	      information about the boot loader can be found
	      in <a class="xref" href="boot.html#boot-synopsis" title="13.1. 概述">節 13.1, “概述”</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp69319120"></a><a id="idp69319376"></a><p><strong>3.11.3.2.</strong></p></td><td align="left" valign="top"><p>I go to boot from the hard disk for the first time
	      after installing FreeBSD, the kernel loads and probes my
	      hardware, but stops with messages like:</p><pre class="screen">changing root device to ad1s1a panic: cannot mount root</pre><p>What is wrong?  What can I do?</p><p>What is this
	      <code class="literal">bios_drive:interface(unit,partition)kernel_name</code>
	      thing that is displayed with the boot help?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>There is a longstanding problem in the case where
	      the boot disk is not the first disk in the system.  The
	      BIOS uses a different numbering scheme to FreeBSD, and
	      working out which numbers correspond to which is
	      difficult to get right.</p><p>In the case where the boot disk is not the first
	      disk in the system, FreeBSD can need some help finding it.
	      There are two common situations here, and in both of
	      these cases, you need to tell FreeBSD where the root
	      filesystem is.  You do this by specifying the BIOS disk
	      number, the disk type and the FreeBSD disk number for that
	      type.</p><p>The first situation is where you have two IDE disks,
	      each configured as the master on their respective IDE
	      busses, and wish to boot FreeBSD from the second disk.  The
	      BIOS sees these as disk 0 and disk 1, while FreeBSD sees
	      them as <code class="filename">ad0</code> and
	      <code class="filename">ad2</code>.</p><p>FreeBSD is on BIOS disk 1, of type
	      <code class="literal">ad</code> and the FreeBSD disk number is 2, so
	      you would say:</p><pre class="screen"><strong class="userinput"><code>1:ad(2,a)kernel</code></strong></pre><p>Note that if you have a slave on the primary bus,
	      the above is not necessary (and is effectively
	      wrong).</p><p>The second situation involves booting from a SCSI
	      disk when you have one or more IDE disks in the system.
	      In this case, the FreeBSD disk number is lower than the
	      BIOS disk number.  If you have two IDE disks as well as
	      the SCSI disk, the SCSI disk is BIOS disk 2,
	      type <code class="literal">da</code> and FreeBSD disk number 0, so
	      you would say:</p><pre class="screen"><strong class="userinput"><code>2:da(0,a)kernel</code></strong></pre><p>To tell FreeBSD that you want to boot from BIOS disk 2,
	      which is the first SCSI disk in the system.  If you only
	      had one IDE disk, you would use '1:' instead.</p><p>Once you have determined the correct values to use,
	      you can put the command exactly as you would have typed
	      it in the <code class="filename">/boot.config</code> file using a
	      standard text editor.  Unless instructed otherwise, FreeBSD
	      will use the contents of this file as the default
	      response to the <code class="literal">boot:</code> prompt.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp69332944"></a><a id="idp69333200"></a><p><strong>3.11.3.3.</strong></p></td><td align="left" valign="top"><p>I go to boot from the hard disk for the first time
	      after installing FreeBSD, but the Boot Manager prompt just
	      prints <code class="literal">F?</code> at the boot menu each time
	      but the boot won't go any further.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The hard disk geometry was set incorrectly in the
	      Partition editor when you installed FreeBSD.  Go back into
	      the partition editor and specify the actual geometry of
	      your hard disk.  You must reinstall FreeBSD again from the
	      beginning with the correct geometry.</p><p>If you are failing entirely in figuring out the
	      correct geometry for your machine, here's a tip: Install
	      a small DOS partition at the beginning of the disk and
	      install FreeBSD after that.  The install program will see
	      the DOS partition and try to infer the correct geometry
	      from it, which usually works.</p><p>The following tip is no longer recommended, but is
	      left here for reference:</p><div class="blockquote"><blockquote class="blockquote"><p>If you are setting up a truly dedicated FreeBSD
		server or workstation where you don't care for
		(future) compatibility with DOS, Linux or another
		operating system, you've also got the option to use
		the entire disk (`A' in the partition editor),
		selecting the non-standard option where FreeBSD occupies
		the entire disk from the very first to the very last
		sector.  This will leave all geometry considerations
		aside, but is somewhat limiting unless you're never
		going to run anything other than FreeBSD on a
		disk.</p></blockquote></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp69336784"></a><a id="idp69337040"></a><p><strong>3.11.3.4.</strong></p></td><td align="left" valign="top"><p>The system finds my <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ed</span>(4)</span></a> network card, but I
	      keep getting device timeout errors.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Your card is probably on a different IRQ from what
	      is specified in
	      the <code class="filename">/boot/device.hints</code> file.  The
	      ed driver does not use the `soft' configuration by
	      default (values entered using EZSETUP in DOS), but it
	      will use the software configuration if you
	      specify <code class="literal">-1</code> in the hints for the
	      interface.</p><p>Either move the jumper on the card to a hard
	      configuration setting (altering the kernel settings if
	      necessary), or specify the IRQ as <code class="literal">-1</code>
	      by setting the hint <span class="quote">“<span class="quote">hint.ed.0.irq="-1"</span>”</span>
	      This will tell the kernel to use the soft
	      configuration.</p><p>Another possibility is that your card is at IRQ 9,
	      which is shared by IRQ 2 and frequently a cause of
	      problems (especially when you have a VGA card using IRQ
	      2!).  You should not use IRQ 2 or 9 if at all
	      possible.</p></td></tr></tbody></table></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="install-post.html">前一頁</a> </td><td width="20%" align="center"><a accesskey="u" href="install.html">上一層</a></td><td width="40%" align="right"> <a accesskey="n" href="install-advanced.html">下一頁</a></td></tr><tr><td width="40%" align="left" valign="top">3.10. 後續安裝 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始頁</a></td><td width="40%" align="right" valign="top"> 3.12. 進階安裝指南</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文及其他文件，可由此下載：
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>若有 FreeBSD 方面疑問，請先閱讀
    <a href="http://www.FreeBSD.org/docs.html">FreeBSD 相關文件</a>，如不能解決的話，再洽詢
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;。<br></br>
    關於本文件的問題，請洽詢
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;。</small></p></body></html>