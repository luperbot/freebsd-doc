<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Mirroring FreeBSD</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="description" content="這是份還在草稿中的文章，主要是(尤其是給各區網中心管理者的參考)介紹如何 mirror FreeBSD。" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div xml:lang="zh_tw" class="article" lang="zh_tw"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp61518800"></a>Mirroring FreeBSD</h1></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Jun</span> <span class="surname">Kuriyama</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a xmlns="" class="email" href="mailto:kuriyama@FreeBSD.org">kuriyama@FreeBSD.org</a>&gt;</code></p></div></div></div><div class="author"><h3 class="author"><span class="firstname">Valentino</span> <span class="surname">Vaschetto</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a xmlns="" class="email" href="mailto:logo@FreeBSD.org">logo@FreeBSD.org</a>&gt;</code></p></div></div></div><div class="author"><h3 class="author"><span class="firstname">Daniel</span> <span class="surname">Lang</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a xmlns="" class="email" href="mailto:dl@leo.org">dl@leo.org</a>&gt;</code></p></div></div></div><div class="author"><h3 class="author"><span class="firstname">Ken</span> <span class="surname">Smith</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a xmlns="" class="email" href="mailto:kensmith@FreeBSD.org">kensmith@FreeBSD.org</a>&gt;</code></p></div></div></div></div></div><div>修訂: <a href="https://svnweb.freebsd.org/changeset/doc/"><span class="svnref"></span></a></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="trademarks"></a><p>FreeBSD 是 FreeBSD基金會的註冊商標</p><p>CVSup 是
  John D. Polstra 的註冊商標。</p><p>許多製造商和經銷商使用一些稱為商標的圖案或文字設計來彰顯自己的產品。
  本文中出現的眾多商標，以及 FreeBSD Project 本身廣所人知的商標，後面將以 '™' 或 '®' 符號來標註。</p></div></div><div>   由 .</div><div><div xmlns="http://www.w3.org/1999/xhtml" class="abstract"><div class="abstract-title">摘要</div><p>這是份還在草稿中的文章，主要是(尤其是給各區網中心管理者的參考)介紹如何 mirror FreeBSD。</p></div></div></div><hr /></div><div class="toc"><div class="toc-title">內容目錄</div><dl class="toc"><dt><span class="sect1"><a href="#mirror-contact">1. 聯繫方式</a></span></dt><dt><span class="sect1"><a href="#mirror-requirements">2. 成為 FreeBSD mirrors 的必備條件</a></span></dt><dt><span class="sect1"><a href="#mirror-howto">3. How to Mirror FreeBSD</a></span></dt><dt><span class="sect1"><a href="#mirror-where">4. Where to mirror from</a></span></dt><dt><span class="sect1"><a href="#mirror-official">5. Official Mirrors</a></span></dt><dt><span class="sect1"><a href="#mirror-statpages">6. Some statistics from mirror sites</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-contact"></a>1. 聯繫方式</h2></div></div></div><p>若要找整個 Mirror 機制的協調者，可以 email 到 <code class="email">&lt;<a xmlns="" class="email" href="mailto:mirror-admin@FreeBSD.org">mirror-admin@FreeBSD.org</a>&gt;</code>。此外，這裡也有份
      <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">FreeBSD mirror sites 郵遞論壇s</a>。</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-requirements"></a>2. 成為 FreeBSD mirrors 的必備條件</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-diskspace"></a>2.1. 硬碟空間</h3></div></div></div><p>
        硬碟空間是最重要的必備條件之一。
        Depending on the set of releases, architectures,
        and degree of completeness you want to mirror, a huge
        amount of disk space may be consumed. Also keep in mind
        that <span class="emphasis"><em>official</em></span> mirrors are probably required to be
        complete. The CVS repository and the web pages should
        always be mirrored completely. Also note that the
        numbers stated here are reflecting the current
        state (at 9.3-RELEASE/10.1-RELEASE). Further development and
        releases will only increase the required amount.
        Also make sure to keep some (ca. 10-20%) extra space
        around just to be sure.
        Here are some approximate figures:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>完整 FTP Distribution: 126 GB</p></li><li class="listitem"><p>CVS repository: 2.7 GB</p></li><li class="listitem"><p>CTM deltas: 1.8 GB</p></li><li class="listitem"><p>Web pages: 300 MB</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-bandwidth"></a>2.2. 網路頻寬</h3></div></div></div><p>
        當然，你一定要能連上 Internet。
        頻寬需求多少，這要看你所想要的 mirror 程度而定。
        若只想要 mirror 一部份的 FreeBSD 檔案以作為網站或 intranet 的局部用途，
        那麼頻寬需求會明顯比成為公共服務用途的小一些。
	若想成為 official mirror 之一的話，那麼頻寬就勢必得增加才夠用。以下，我們僅列出一些估計值以做為參考：
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Local site, no public access: basically no minimum,
           but &lt; 2 Mbps could make syncing too slow.</p></li><li class="listitem"><p>Unofficial public site: 34 Mbps is probably a good start.</p></li><li class="listitem"><p>Official site: &gt; 100 Mbps is recommended, and your host
           should be connected as close as possible to your border router.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-system"></a>2.3. 系統需求、CPU、RAM</h3></div></div></div><p>
        One thing this depends on the expected number of clients,
        which is determined by the server's policy. It is
        also affected by the types of services you want to offer.
        Plain FTP or HTTP services may not require a huge
        amount of resources. Watch out if you provide
        CVSup, rsync or even AnonCVS. This can have a huge
        impact on CPU and memory requirements. Especially
        rsync is considered a memory hog, and CVSup does
        indeed consume some CPU. For AnonCVS it might
        be a nice idea to set up a memory resident file system (MFS) of at least
        300 MB, so you need to take this into account
        for your memory requirements. The following
        are just examples to give you a very rough hint.
      </p><p>
        For a moderately visited site that offers
        <span class="application">Rsync</span>, you might
        consider a current CPU with around 800MHz - 1 GHz,
        and at least 512MB RAM. This is probably the
        minimum you want for an <span class="emphasis"><em>official</em></span>
        site.
      </p><p>
        For a frequently used site you definitely need
        more RAM (consider 2GB as a good start)
        and possibly more CPU, which could also mean
        that you need to go for a SMP system.
      </p><p>
        You also want to consider a fast disk subsystem.
        Operations on the CVS repository require a fast
        disk subsystem (RAID is highly advised). A SCSI
        controller that has a cache of its own can also
        speed up things since most of these services incur a
        large number of small modifications to the disk.
      </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-services"></a>2.4. Services to offer</h3></div></div></div><p>
        Every mirror site is required to have a set of core services
        available. In addition to these required services, there are
        a number of optional services that
        server administrators may choose to offer.  This section explains
        which services you can provide and how to go about implementing them.
      </p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-serv-ftp"></a>2.4.1. FTP (required for FTP fileset)</h4></div></div></div><p>
          This is one of the most basic services, and
          it is required for each mirror offering public
          FTP distributions. FTP access must be
          anonymous, and no upload/download ratios
          are allowed (a ridiculous thing anyway).
          Upload capability is not required (and <span class="emphasis"><em>must</em></span>
          never be allowed for the FreeBSD file space).
          Also the FreeBSD archive should be available under
          the path <code class="filename">/pub/FreeBSD</code>.
        </p><p>
          There is a lot of software available which
          can be set up to allow anonymous FTP
          (in alphabetical order).
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">/usr/libexec/ftpd</code>: FreeBSD's own ftpd
              can be used. Be sure to read <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ftpd</span>(8)</span></a>.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/ncftpd/pkg-descr">ftp/ncftpd</a>: A commercial package,
              free for educational use.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/oftpd/pkg-descr">ftp/oftpd</a>: An ftpd designed with
              security as a main focus.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/proftpd/pkg-descr">ftp/proftpd</a>: A modular and very flexible ftpd.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/pure-ftpd/pkg-descr">ftp/pure-ftpd</a>: Another ftpd developed with
                security in mind.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/twoftpd/pkg-descr">ftp/twoftpd</a>: As above.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/vsftpd/pkg-descr">ftp/vsftpd</a>: The <span class="quote">“<span class="quote">very secure</span>”</span> ftpd.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/wu-ftpd/pkg-descr">ftp/wu-ftpd</a>: The ftpd from Washington
                University. It has become infamous, because of the huge
                amount of security issues that have been found in it.
                If you do choose to use this software be sure to
                keep it up to date.
              </p></li></ul></div><p>
          FreeBSD's <span class="application">ftpd</span>, <span class="application">proftpd</span>,
          <span class="application">wu-ftpd</span> and maybe <span class="application">ncftpd</span>
          are among the most commonly used FTPds.
          The others do not have a large userbase among mirror sites.  One
          thing to consider is that you may need flexibility in limiting
          how many simultaneous connections are allowed, thus limiting how
          much network bandwidth and system resources are consumed.
        </p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-serv-rsync"></a>2.4.2. Rsync (optional for FTP fileset)</h4></div></div></div><p>
          <span class="application">Rsync</span> is often offered for access to the
          contents of the FTP area of FreeBSD, so other mirror sites can use your system as their source.  The
          protocol is different from FTP in many ways.
          It is much more
          bandwidth friendly, as only differences between files
          are transferred instead of whole files when they change.
          <span class="application">Rsync</span> does require a significant amount of memory for
          each instance. The size depends on the size of
          the synced module in terms of the number of directories and
          files. <span class="application">Rsync</span> can use <code class="command">rsh</code> and
          <code class="command">ssh</code> (now default) as a transport,
          or use its own protocol for stand-alone access
          (this is the preferred method for public rsync servers).
          Authentication, connection limits, and other restrictions
          may be applied. There is just one software package
          available:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/rsync/pkg-descr">net/rsync</a></p></li></ul></div><p>
        </p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-serv-http"></a>2.4.3. HTTP (required for web pages, optional for FTP fileset)</h4></div></div></div><p>
          If you want to offer the FreeBSD web pages, you will need
          to install a web server.
          You may optionally offer the FTP fileset via HTTP.
          The choice of web server software is left up to the mirror administrator.
          Some of the most popular choices are:

          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache13/pkg-descr">www/apache13</a>:
                <span class="application">Apache</span> is the most widely
                deployed web server on the Internet. It is used
                extensively by the FreeBSD Project. You may also wish to
                use the next generation of the
                <span class="application">Apache</span> web server, available
                in the ports collection as <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache22/pkg-descr">www/apache22</a>.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/thttpd/pkg-descr">www/thttpd</a>:
                If you are going to be serving a large amount of static content
                you may find that using an application such as thttpd is more
                efficient than <span class="application">Apache</span>. It is
                optimized for excellent performance on FreeBSD.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/boa/pkg-descr">www/boa</a>:
                <span class="application">Boa</span> is another alternative to
                <span class="application">thttpd</span> and
                <span class="application">Apache</span>. It should provide
                considerably better performance than
                <span class="application">Apache</span> for purely static
                content. It does not, at the time of this writing,
                contain the same set of optimizations for FreeBSD that
                are found in <span class="application">thttpd</span>.</p></li></ul></div><p>
        </p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-serv-cvsup"></a>2.4.4. CVSup (desired for CVS repository)</h4></div></div></div><p>
          <span class="application">CVSup</span> is a very efficient way of distributing files.
          It works similar to <span class="application">rsync</span>, but was specially designed for
          use with CVS repositories. If you want to offer the
          FreeBSD CVS repository, you really want to consider
          offering it via <span class="application">CVSup</span>. It is possible to offer
          the CVS repository via <span class="application">AnonCVS</span>, FTP,
          <span class="application">rsync</span> or HTTP, but
          people would benefit much more from <span class="application">CVSup</span> access.
          <span class="application">CVSup</span> was developed by John Polstra.
          It is a bit tricky to install on non-FreeBSD platforms,
          since it is written in Modula-3 and therefore requires
          a Modula-3 environment. John Polstra has built a
          stripped down version of M3 that is sufficient to
          run <span class="application">CVSup</span>, and can be installed much easier.
          See <a class="link" href="http://www.polstra.com/projects/freeware/ezm3/" target="_top">Ezm3</a>
          for details. Related ports are:

          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup/pkg-descr">net/cvsup</a>: The native CVSup port (client and server)
                which requires <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/ezm3/pkg-descr">lang/ezm3</a> now.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup-mirror/pkg-descr">net/cvsup-mirror</a>: The CVSup mirror kit, which requires
                 <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup-without-gui/pkg-descr">net/cvsup-without-gui</a>, and configures it mirror-ready. Some
                 site administrators may want a different setup though.
              </p></li></ul></div><p>

          There are a few more like
          <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup-without-gui/pkg-descr">net/cvsup-without-gui</a> you might want to have
          a look at. If you prefer a static binary package, take a look
          <a class="link" href="http://people.FreeBSD.org/~jdp/s1g/" target="_top">here</a>.
          This page still refers to the S1G bug that was present
          in <span class="application">CVSup</span>. Maybe
          John will set up a generic download-site to get
          static binaries for various platforms.
        </p><p>
          It is possible to use <span class="application">CVSup</span> to offer
          any kind of fileset, not just CVS repositories,
          but configuration can be complex.
          <span class="application">CVSup</span> is known to eat some CPU on both the server and the
          client, since it needs to compare lots of files.
        </p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-anoncvs"></a>2.4.5. AnonCVS (optional for CVS repository)</h4></div></div></div><p>
          If you have the CVS repository, you may want to offer
          anonymous CVS access. A short warning first:
          There is not much demand for it,
          it requires some experience, and you need to know
          what you are doing.
        </p><p>
          Generally there are two ways
          to access a CVS repository remotely: via
          <span class="emphasis"><em>pserver</em></span> or via <code class="command">ssh</code>
          (we do not consider <code class="command">rsh</code>).
          For anonymous access, <span class="emphasis"><em>pserver</em></span> is
          very well suited, but some still offer <code class="command">ssh</code>
          access as well. There is a custom crafted
          <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/development/FreeBSD-CVS/anoncvs.shar" target="_top">wrapper</a>
          in the CVS repository, to be used as a login-shell for the
          anonymous ssh account. It does a chroot, and therefore
          requires the CVS repository to be available under the
          anonymous user's home-directory.   This may not be possible
          for all sites. If you just offer <span class="emphasis"><em>pserver</em></span>
          this restriction does not apply, but you may run with
          more security risks. You do not need to install any special
          software, since <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a> comes with
          FreeBSD. You need to enable access via <code class="command">inetd</code>,
          so add an entry into your <code class="filename">/etc/inetd.conf</code>
          like this:
          </p><pre class="programlisting">
cvspserver stream tcp nowait root /usr/bin/cvs cvs -f -l -R -T /anoncvstmp --allow-root=/home/ncvs pserver
          </pre><p>
          See the manpage for details of the options. Also see the CVS <span class="emphasis"><em>info</em></span>
          page about additional ways to make sure access is read-only.
          It is advised that you create an unprivileged account,
          preferably called <code class="systemitem">anoncvs</code>.
          Also you need to create a file <code class="filename">passwd</code>
          in your <code class="filename">/home/ncvs/CVSROOT</code> and assign a
          CVS password (empty or <code class="literal">anoncvs</code>) to that user.
          The directory <code class="filename">/anoncvstmp</code> is a special
          purpose memory based file system. It is not required but
          advised since <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a> creates a shadow directory
          structure in your <code class="filename">/tmp</code> which is
          not used after the operation but slows things
          dramatically if real disk operations are required.
          Here is an excerpt from <code class="filename">/etc/fstab</code>,
          how to set up such a MFS:
          </p><pre class="programlisting">
/dev/da0s1b /anoncvstmp mfs rw,-s=786432,-b=4096,-f=512,-i=560,-c=3,-m=0,nosuid,nodev 0 0
          </pre><p>
          This is (of course) tuned a lot, and was suggested by John Polstra.
        </p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-howto"></a>3. How to Mirror FreeBSD</h2></div></div></div><p>
      Ok, now you know the requirements and how to offer
      the services, but not how to get it. :-)
      This section explains how to actually mirror
      the various parts of FreeBSD, what tools to use,
      and where to mirror from.
    </p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-ftp"></a>3.1. FTP</h3></div></div></div><p>
        The FTP area is the largest amount of data that
        needs to be mirrored. It includes the <span class="emphasis"><em>distribution
        sets</em></span> required for network installation, the
        <span class="emphasis"><em>branches</em></span> which are actually snapshots
        of checked-out source trees, the <span class="emphasis"><em>ISO Images</em></span>
        to write CD-ROMs with the installation distribution,
        a live file system, lots of packages, the ports tree,
        distfiles, and a huge amount of packages. All of course
        for various FreeBSD versions,
        and various architectures.
      </p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-ftp-ftp"></a>3.1.1. With FTP mirror</h4></div></div></div><p>
          You can use a <span class="application">FTP mirror</span>
          program to get the files. Some of the most commonly used are:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/mirror/pkg-descr">ftp/mirror</a></p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/ftpmirror/pkg-descr">ftp/ftpmirror</a></p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/emirror/pkg-descr">ftp/emirror</a></p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/spegla/pkg-descr">ftp/spegla</a></p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/omi/pkg-descr">ftp/omi</a></p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/wget/pkg-descr">ftp/wget</a></p></li></ul></div><p>

          <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/mirror/pkg-descr">ftp/mirror</a> was very popular, but seemed
          to have some drawbacks, as it is written in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=perl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">perl</span>(1)</span></a>,
          and had real problems with mirroring large
          directories like a FreeBSD site. There are rumors that
          the current version has fixed this by allowing
          a different algorithm for comparing
          the directory structure to be specified.
        </p><p>
          In general FTP is not really good for mirroring.  It transfers
          the whole file if it has changed, and does
          not create a single data stream which would benefit from
          a large TCP congestion window.
        </p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-ftp-rsync"></a>3.1.2. With rsync</h4></div></div></div><p>
          A better way to mirror the FTP area is <span class="application">rsync</span>.
          You can install the port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/rsync/pkg-descr">net/rsync</a> and then use
          rsync to sync with your upstream host.
          <span class="application">rsync</span> is already mentioned
          in <a class="xref" href="#mirror-serv-rsync" title="2.4.2. Rsync (optional for FTP fileset)">節 2.4.2, “Rsync (optional for FTP fileset)”</a>.
          Since <span class="application">rsync</span> access is not
          required, your preferred upstream site may not allow it.
          You may need to hunt around a little bit to find a site
          that allows <span class="application">rsync</span> access.
          </p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">
              Since the number of <span class="application">rsync</span>
              clients will have a significant impact on the server
              machine, most admins impose limitations on their
              server. For a mirror, you should ask the site maintainer
              you are syncing from about their policy, and maybe
              an exception for your host (since you are a mirror).
            </p></div><p>
          A command line to mirror FreeBSD might look like:
          </p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>rsync -vaz --delete ftp4.de.FreeBSD.org::FreeBSD/ /pub/FreeBSD/</code></strong>
          </pre><p>
          Consult the documentation for <span class="application">rsync</span>,
          which is also available at
          <a class="link" href="http://rsync.samba.org/" target="_top">http://rsync.samba.org/</a>,
          about the various options to be used with rsync.
		  If you sync the whole module (unlike subdirectories),
		  be aware that the module-directory (here "FreeBSD")
		  will not be created, so you cannot omit the target directory.
          Also you might
          want to set up a script framework that calls such a command
          via <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>.
        </p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-ftp-cvsup"></a>3.1.3. With CVSup</h4></div></div></div><p>
          A few sites, including the one-and-only <code class="systemitem">ftp-master.FreeBSD.org</code>
          even offer <span class="application">CVSup</span> to mirror the contents of
          the FTP space. You need to install a <span class="application">CVSup</span>
          client, preferably from the port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup/pkg-descr">net/cvsup</a>.
          (Also reread <a class="xref" href="#mirror-serv-cvsup" title="2.4.4. CVSup (desired for CVS repository)">節 2.4.4, “CVSup (desired for CVS repository)”</a>.)
          A sample <code class="filename">supfile</code> suitable for <code class="systemitem">ftp-master.FreeBSD.org</code>
          looks like this:
          </p><pre class="programlisting">
          #
          # FreeBSD archive supfile from master server
          #
          *default host=ftp-master.FreeBSD.org
          *default base=/usr
          *default prefix=/pub
          #*default release=all
          *default delete use-rel-suffix
          *default umask=002

          # If your network link is a T1 or faster, comment out the following line.
          #*default compress

          FreeBSD-archive release=all preserve
          </pre><p>

          It seems <span class="application">CVSup</span> would be the best
          way to mirror the archive in terms of efficiency, but
          it is only available from few sites.
          </p><div xmlns="" class="note"><h3 class="admontitle"><a xmlns="http://www.w3.org/1999/xhtml" id="mirror-cvsup-s-option"></a>注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">
              Please have look at the <span class="application">CVSup</span> documentation
              like <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvsup&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvsup</span>(1)</span></a> and consider using the <code class="option">-s</code>
	      option. This reduces I/O operations by assuming the
	      recorded information about each file is correct.</p></div><p>
        </p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-cvs"></a>3.2. Mirroring the CVS repository</h3></div></div></div><p>There are various ways to mirror the CVS repository.
        <span class="application">CVSup</span> is the most common method.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-cvs-cvsup"></a>3.2.1. Using CVSup</h4></div></div></div><p>
          <span class="application">CVSup</span> is described in some
          detail in <a class="xref" href="#mirror-serv-cvsup" title="2.4.4. CVSup (desired for CVS repository)">節 2.4.4, “CVSup (desired for CVS repository)”</a> and <a class="xref" href="#mirror-ftp-cvsup" title="3.1.3. With CVSup">節 3.1.3, “With CVSup”</a>.
        </p><p>It is very easy to setup a
           <span class="application">CVSup</span> mirror. Installing
           <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup-mirror/pkg-descr">net/cvsup-mirror</a> will
           make sure all of the needed programs are installed and then
           gather all the needed information to configure the mirror.</p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">
            Please do not forget to consider the hint
            mentioned in <a class="link" href="#mirror-cvsup-s-option" title="注意">this note</a>
            above.
          </p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-cvs-other"></a>3.2.2. Using other methods</h4></div></div></div><p>
          Using other methods than <span class="application">CVSup</span> is
          generally not recommended. We describe them in short here
          anyway. Since most sites offer the CVS repository as
          part of the FTP fileset under the path
          <code class="filename">/pub/FreeBSD/development/FreeBSD-CVS</code>,
          the following methods could be used.
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">FTP</span></p></li><li class="listitem"><p><span class="application">Rsync</span></p></li><li class="listitem"><p><span class="application">HTTP</span></p></li></ul></div><p>

          </p><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">AnonCVS cannot be used to mirror the CVS repository
              since CVS does not allow you to access the repository
              itself, only checked out versions of the modules.</p></div><p>
        </p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-www"></a>3.3. Mirroring the WWW pages</h3></div></div></div><p>
        The best way is to check out the <span class="emphasis"><em>www</em></span>
        distribution from CVS. If you have a local mirror of the
        CVS repository, it is as easy as:
        </p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs -d /home/ncvs co www</code></strong></pre><p>
        and a <span class="emphasis"><em>cronjob</em></span>, that calls <code class="command">cvs up -d -P</code>
        on a regular basis, maybe just after your repository was updated.
        Of course, the files need to remain in a directory available
        for public WWW access. The installation and configuration of a
        web server is not discussed here.
      </p><p>
        If you do not have a local repository, you can use
        <span class="application">CVSup</span> to maintain an <span class="quote">“<span class="quote">up to date copy</span>”</span>
        of the www pages. A sample supfile can be found in
        <code class="filename">/usr/share/examples/cvsup/www-supfile</code> and
        could look like this:
        </p><pre class="programlisting">
        #
        # WWW module supfile for FreeBSD
        #
        *default host=cvsup3.de.FreeBSD.org
        *default base=/usr
        *default prefix=/usr/local
        *default release=cvs tag=.
        *default delete use-rel-suffix

        # If your network link is a T1 or faster, comment out the following line.
        *default compress

        # This collection retrieves the www/ tree of the FreeBSD repository
        www
        </pre><p>
     </p><p>
       Using <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/wget/pkg-descr">ftp/wget</a> or other web-mirror tools is
       not recommended.
     </p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-www-doc"></a>3.3.1. Mirroring the FreeBSD documentation</h4></div></div></div><p>
         Since the documentation is referenced a lot from the
         web pages, it is recommended that you mirror the
         FreeBSD documentation as well. However, this is not
         as trivial as the www-pages alone.
       </p><p>
         First of all, you should get the doc sources,
         again preferably via <span class="application">CVSup</span>.
         Here is a corresponding sample supfile:
         </p><pre class="programlisting">
         #
         # FreeBSD documentation supfile
         #
         *default host=cvsup3.de.FreeBSD.org
         *default base=/usr
         *default prefix=/usr/share
         *default release=cvs tag=.
         *default delete use-rel-suffix

         # If your network link is a T1 or faster, comment out the following line.
         #*default compress

         # This will retrieve the entire doc branch of the FreeBSD repository.
         # This includes the handbook, FAQ, and translations thereof.
         doc-all
         </pre><p>
       </p><p>
         Then you need to install a couple of ports.
         You are lucky, there is a meta-port:
         <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/textproc/docproj/pkg-descr">textproc/docproj</a> to do the work
         for you. You need to set up some
         environment variables, like
         <code class="literal">SGML_CATALOG_FILES</code>.
         Also have a look at your <code class="filename">/etc/make.conf</code>
         (copy <code class="filename">/usr/share/examples/etc/make.conf</code> if
         you do not have one), and look at the
         <code class="literal">DOC_LANG</code> variable.
         Now you are probably ready to run <code class="command">make</code>
         in your doc directory (<code class="filename">/usr/share/doc</code>
         by default) and build the documentation.
         Again you need to make it accessible for your web server
         and make sure the links point to the right location.
         </p><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">
             The building of the documentation, as well as lots
             of side issues, is documented itself in the
	     <a class="link" href="../../../../doc/zh_TW.UTF-8/books/fdp-primer" target="_top">FreeBSD Documentation
             Project Primer</a>.
             Please read this piece of documentation, especially if you
             have problems building the documentation.
           </p></div><p>
       </p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-how-often"></a>3.4. How often should I mirror?</h3></div></div></div><p>
       Every mirror should be updated on a regular
       basis. You will certainly need some script
       framework for it that will be called by
       <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>. Since nearly every admin
       does this his own way, we cannot give
       specific instructions. It could work
       like this:
     </p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>
           Put the command to run your mirroring application
           in a script. Use of a plain <code class="command">/bin/sh</code>
           script is recommended.
         </p></li><li class="step"><p>
           Add some output redirections so diagnostic
           messages are logged to a file.
         </p></li><li class="step"><p>
           Test if your script works. Check the logs.
         </p></li><li class="step"><p>
	   Use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">crontab</span>(1)</span></a> to add the script to the
	   appropriate user's <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">crontab</span>(5)</span></a>.  This should be a
	   different user than what your FTP daemon runs as so that
	   if file permissions inside your FTP area are not
	   world-readable those files can not be accessed by anonymous
	   FTP.  This is used to <span class="quote">“<span class="quote">stage</span>”</span> releases ——
	   making sure all of the official mirror sites have all of the
	   necessary release files on release day.
         </p></li></ol></div><p>
       Here are some recommended schedules:
       </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FTP fileset: daily</p></li><li class="listitem"><p>CVS repository: hourly</p></li><li class="listitem"><p>WWW pages: daily</p></li></ul></div><p>
     </p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-where"></a>4. Where to mirror from</h2></div></div></div><p>
      This is an important issue. So this section will
      spend some effort to explain the backgrounds.  We will say this
      several times: under no circumstances should you mirror from
      <code class="systemitem">ftp.FreeBSD.org</code>.
    </p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-organization"></a>4.1. A few words about the organization</h3></div></div></div><p>
        Mirrors are organized by country. All
        official mirrors have a DNS entry of the form
        <code class="systemitem">ftpN.CC.FreeBSD.org</code>.
        <span class="emphasis"><em>CC</em></span> (i.e. country code) is the
        <span class="emphasis"><em>top level domain</em></span> (TLD)
        of the country where this mirror is located.
        <span class="emphasis"><em>N</em></span> is a number,
        telling that the host would be the <span class="emphasis"><em>Nth</em></span>
        mirror in that country.
        (Same applies to <code class="systemitem">cvsupN.CC.FreeBSD.org</code>,
        <code class="systemitem">wwwN.CC.FreeBSD.org</code>, etc.)
        There are mirrors with no <span class="emphasis"><em>CC</em></span> part.
        These are the mirror sites that are very well connected and
        allow a large number of concurrent users.
        <code class="systemitem">ftp.FreeBSD.org</code> is actually two machines, one currently
        located in Denmark and the other in the United States.
        It is <span class="emphasis"><em>NOT</em></span> a master site and should never be
        used to mirror from.  Lots of online documentation leads
        <span class="quote">“<span class="quote">interactive</span>”</span>users to
        <code class="systemitem">ftp.FreeBSD.org</code> so automated mirroring
        systems should find a different machine to mirror from.
      </p><p>
        Additionally there exists a hierarchy of mirrors, which
        is described in terms of <span class="emphasis"><em>tiers</em></span>.
        The master sites are not referred to but can be
        described as <span class="emphasis"><em>Tier-0</em></span>. Mirrors
        that mirror from these sites can be considered
        <span class="emphasis"><em>Tier-1</em></span>, mirrors of <span class="emphasis"><em>Tier-1</em></span>-mirrors,
        are <span class="emphasis"><em>Tier-2</em></span>, etc.
        Official sites are encouraged to be of a low <span class="emphasis"><em>tier</em></span>,
        but the lower the tier the higher the requirements in
        terms as described in <a class="xref" href="#mirror-requirements" title="2. 成為 FreeBSD mirrors 的必備條件">節 2, “成為 FreeBSD mirrors 的必備條件”</a>.
        Also access to low-tier-mirrors may be restricted, and
        access to master sites is definitely restricted.
        The <span class="emphasis"><em>tier</em></span>-hierarchy is not reflected
        by DNS and generally not documented anywhere except
        for the master sites. However, official mirrors with low numbers
        like 1-4, are usually <span class="emphasis"><em>Tier-1</em></span>
        (this is just a rough hint, and there is no rule).
      </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-where"></a>4.2. Ok, but where should I get the stuff now?</h3></div></div></div><p>
        Under no circumstances should you mirror from <code class="systemitem">ftp.FreeBSD.org</code>.
        The short answer is: from the
        site that is closest to you in Internet terms, or gives you
        the fastest access.
      </p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-simple"></a>4.2.1. I just want to mirror from somewhere!</h4></div></div></div><p>
          If you have no special intentions or
          requirements, the statement in <a class="xref" href="#mirror-where-where" title="4.2. Ok, but where should I get the stuff now?">節 4.2, “Ok, but where should I get the stuff now?”</a>
          applies.  This means:
        </p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>
              Look at available mirrors in your country.
              The <a class="link" href="http://mirrorlist.FreeBSD.org/" target="_top">FreeBSD
              Mirror Database</a> can help you with this.
            </p></li><li class="step"><p>
              Check for those which provide fastest access
              (number of hops, round-trip-times)
              and offer the services you intend to
              use (like <span class="application">rsync</span>
              or <span class="application">CVSup</span>).
            </p></li><li class="step"><p>
              Contact the administrators of your chosen site stating your
              request, and asking about their terms and
              policies.
            </p></li><li class="step"><p>
              Set up your mirror as described above.
            </p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-official"></a>4.2.2. I am an official mirror, what is the right site for me?</h4></div></div></div><p>
          In general the description in <a class="xref" href="#mirror-where-simple" title="4.2.1. I just want to mirror from somewhere!">節 4.2.1, “I just want to mirror from somewhere!”</a>
          still applies. Of course you may want to put some
          weight on the fact that your upstream should be of
          a low tier.
          There are some other considerations about <span class="emphasis"><em>official</em></span>
          mirrors that are described in <a class="xref" href="#mirror-official" title="5. Official Mirrors">節 5, “Official Mirrors”</a>.
        </p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-master"></a>4.2.3. I want to access the master sites!</h4></div></div></div><p>
          If you have good reasons and good prerequisites,
          you may want and get access to one of the
          master sites. Access to these sites is
          generally restricted, and there are special policies
          for access. If you are already an <span class="emphasis"><em>official</em></span>
          mirror, this certainly helps you getting access.
          In any other case make sure your country really needs another mirror.
          If it already has three or more, ask the <span class="quote">“<span class="quote">zone administrator</span>”</span> (<code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@CC.FreeBSD.org">hostmaster@CC.FreeBSD.org</a>&gt;</code>) or <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">FreeBSD mirror sites 郵遞論壇s</a> first.</p><p>
	  Whoever helped you become, an <span class="emphasis"><em>official</em></span>
	  should have helped you gain access to an appropriate upstream
	  host, either one of the master sites or a suitable Tier-1
	  site.  If not, you can send email to
	  <code class="email">&lt;<a xmlns="" class="email" href="mailto:mirror-admin@FreeBSD.org">mirror-admin@FreeBSD.org</a>&gt;</code> to request help with
	  that.
        </p><p>
          There are three master sites for the FTP fileset and
          one for the CVS repository (the web pages and docs are
          obtained from CVS, so there is no need for master).
        </p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-master-ftp"></a>4.2.3.1. ftp-master.FreeBSD.org</h5></div></div></div><p>
            This is the master site for the FTP fileset.
          </p><p>
            <code class="systemitem">ftp-master.FreeBSD.org</code> provides
            <span class="application">rsync</span> and <span class="application">CVSup</span>
            access, in addition to FTP.
            Refer to <a class="xref" href="#mirror-ftp-rsync" title="3.1.2. With rsync">節 3.1.2, “With rsync”</a> and
            <a class="xref" href="#mirror-ftp-cvsup" title="3.1.3. With CVSup">節 3.1.3, “With CVSup”</a> how to access
            via these protocols.
          </p><p>
            Mirrors are also encouraged to allow <span class="application">rsync</span>
            access for the FTP contents, since they are
            <span class="emphasis"><em>Tier-1</em></span>-mirrors.
          </p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-master-cvsup"></a>4.2.3.2. cvsup-master.FreeBSD.org</h5></div></div></div><p>
            This is the master site for the CVS repository.
          </p><p>
            <code class="systemitem">cvsup-master.FreeBSD.org</code> provides
            <span class="application">CVSup</span> access only.
            See <a class="xref" href="#mirror-cvs-cvsup" title="3.2.1. Using CVSup">節 3.2.1, “Using CVSup”</a> for details.
          </p><p>
            To get access, you need to contact the CVSup Mirror Site Coordinator <code class="email">&lt;<a xmlns="" class="email" href="mailto:cvsup-master@FreeBSD.org">cvsup-master@FreeBSD.org</a>&gt;</code>.
            Make sure you read the
            <a class="link" href="http://people.FreeBSD.org/~jdp/cvsup-access/" target="_top">FreeBSD CVSup Access Policy</a>
            first!
          </p><p>
            Set up the required authentication by following
            <a class="link" href="http://people.FreeBSD.org/~jdp/cvpasswd/" target="_top">these
            instructions</a>. Make sure you specify the server as
            <code class="systemitem">freefall.FreeBSD.org</code> on the <code class="command">cvpasswd</code>
            command line, as described in this document,
            even when you are contacting
            <code class="systemitem">cvsup-master.FreeBSD.org</code>
          </p></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-official"></a>5. Official Mirrors</h2></div></div></div><p>
      Official mirrors 站為具有下列條件的 mirror 站
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            a) 有 <code class="systemitem">FreeBSD.org</code> DNS entry
            (通常為 CNAME 紀錄)。
          </p></li><li class="listitem"><p>
            b) 被 FreeBSD 文件列為 offical mirror 站(像是 handbook)。
          </p></li></ul></div><p>

      除了以上述方式來分辨是否為 official mirrors 站之外，
      Official mirrors 站不一定得為 <span class="emphasis"><em>Tier-1</em></span>-mirrors 站。
      然而，只要是 <span class="emphasis"><em>Tier-1</em></span>-mirror 站的話，就一定會是
      official mirrors 站。
    </p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-official-requirements"></a>5.1. Special Requirements for official (tier-1) mirrors</h3></div></div></div><p>
        It is not so easy to state requirements for all
        official mirrors, since the project is sort of
        tolerant here. It is more easy to say,
        what <span class="emphasis"><em>official tier-1 mirrors</em></span>
        are required to. All other official mirrors
        can consider this a big <span class="emphasis"><em>should</em></span>.
        </p><div xmlns="" class="note"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">
            The following applies mainly to the FTP fileset,
            since a CVS repository should always be mirrored
            completely, and the web pages are a case of
            its own.
          </p></div><p>
      </p><p>
        Tier-1 mirrors are required to:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>carry the complete fileset</p></li><li class="listitem"><p>allow access to other mirror sites</p></li><li class="listitem"><p>provide <span class="application">FTP</span> and
            <span class="application">rsync</span> access</p></li></ul></div><p>

        Furthermore, admins should be subscribed to the <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">FreeBSD mirror sites 郵遞論壇s</a>.
        See <a class="link" href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/eresources.html#ERESOURCES-MAIL" target="_top">this link</a> for details, how to subscribe.
      </p><div xmlns="" class="important"><h3 class="admontitle">重要: </h3><p xmlns="http://www.w3.org/1999/xhtml">It is <span class="emphasis"><em>very</em></span> important for a hub administrator, especially
          Tier-1 hub admins, to check the
          <a class="link" href="http://www.FreeBSD.org/releng/" target="_top">release schedule</a>
          for the next FreeBSD release. This is important because it will tell you when the
          next release is scheduled
          to come out, and thus giving you time to prepare for the big spike of traffic which follows it.
        </p><p xmlns="http://www.w3.org/1999/xhtml">
          It is also important that hub administrators try to keep their mirrors as up-to-date as
          possible (again, even more crucial for Tier-1 mirrors). If Mirror1 does not update for a
          while, lower tier mirrors will begin to mirror old data from Mirror1 and thus begins
          a downward spiral... Keep your mirrors up to date!
        </p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-official-become"></a>5.2. How to become official then?</h3></div></div></div><p>
        An interesting question, especially, since the state
        of being official comes with some benefits, like a much
        higher bill from your ISP as more people will be using
        your site. Also it may be a key requirement to get access
        to a master site.
      </p><p>
        Before applying, please consider (again) if
        another official mirror is really needed for
        your region. Check first with your zone administrator (<code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@CC.FreeBSD.org">hostmaster@CC.FreeBSD.org</a>&gt;</code>) or, if that fails, ask on the <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">FreeBSD mirror sites 郵遞論壇s</a>.
      </p><p>Ok, here is how to do it:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>
            Get the mirror running in first place (maybe not
            using a master site, yet).
          </p></li><li class="step"><p>
            <a class="link" href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/eresources.html#ERESOURCES-MAIL" target="_top">Subscribe</a> to the <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">FreeBSD mirror sites 郵遞論壇s</a>.
          </p></li><li class="step"><p>
            If everything works so far, contact the DNS administrator responsible
            for your region/country, and ask for a DNS entry for your
            site. The admin should able to be contacted via
            <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@CC.FreeBSD.org">hostmaster@CC.FreeBSD.org</a>&gt;</code>, where
            <span class="emphasis"><em>CC</em></span> is your country code/TLD.
            Your DNS entry will be as described
            in <a class="xref" href="#mirror-where-organization" title="4.1. A few words about the organization">節 4.1, “A few words about the organization”</a>.
          </p><p>
            If there is no subdomain set up for your
            country yet, you should contact
            <code class="email">&lt;<a xmlns="" class="email" href="mailto:mirror-admin@FreeBSD.org">mirror-admin@FreeBSD.org</a>&gt;</code>,
            or you can try the <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">FreeBSD mirror sites 郵遞論壇s</a> first.
          </p></li><li class="step"><p>
            Whoever helps you get an official name should send email
            to <code class="email">&lt;<a xmlns="" class="email" href="mailto:mirror-admin@FreeBSD.org">mirror-admin@FreeBSD.org</a>&gt;</code> so your site will be
            added to the mirror list in the
            <a class="link" href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook" target="_top">FreeBSD
            Handbook</a>.
          </p></li></ol></div><p>That is it.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-statpages"></a>6. Some statistics from mirror sites</h2></div></div></div><p>
      Here are links to the stat pages of your favorite mirrors
      (a.k.a. the only ones who feel like providing stats).
    </p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-statpagesftp"></a>6.1. FTP site statistics</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ftp.is.FreeBSD.org - <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@is.FreeBSD.org">hostmaster@is.FreeBSD.org</a>&gt;</code> -
            <a class="link" href="http://www.rhnet.is/status/draupnir/draupnir.html" target="_top">
            (Bandwidth)</a> <a class="link" href="http://www.rhnet.is/status/ftp/ftp-notendur.html" target="_top">(FTP
            processes)</a> <a class="link" href="http://www.rhnet.is/status/ftp/http-notendur.html" target="_top">(HTTP processes)
            </a>
          </p></li><li class="listitem"><p>ftp.cz.FreeBSD.org - <code class="email">&lt;<a xmlns="" class="email" href="mailto:cejkar@fit.vutbr.cz">cejkar@fit.vutbr.cz</a>&gt;</code> -
            <a class="link" href="http://www.cz.FreeBSD.org/stats/mrtg/net.html" target="_top">(Bandwidth)</a>
            <a class="link" href="http://www.freebsd.cz/stats/mrtg/ftpd.html" target="_top">(FTP processes)</a>
            <a class="link" href="http://www.freebsd.cz/stats/mrtg/rsyncd.html" target="_top">(rsync processes)</a>
          </p></li><li class="listitem"><p>ftp2.ru.FreeBSD.org - <code class="email">&lt;<a xmlns="" class="email" href="mailto:mirror@macomnet.ru">mirror@macomnet.ru</a>&gt;</code> -
            <a class="link" href="http://mirror.macomnet.net/mrtg/mirror.macomnet.net_195.128.64.25.html" target="_top">(Bandwidth)</a>
            <a class="link" href="http://mirror.macomnet.net/mrtg/mirror.macomnet.net_proc.html" target="_top">(HTTP and FTP users)</a>
          </p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-statpagescvsup"></a>6.2. CVSup site stats</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>cvsup[23456].jp.FreeBSD.org - <code class="email">&lt;<a xmlns="" class="email" href="mailto:kuriyama@FreeBSD.org">kuriyama@FreeBSD.org</a>&gt;</code> - <a class="link" href="http://home.jp.FreeBSD.org/stats/mrtg/cvsup/" target="_top">(CVSup processes)</a></p></li><li class="listitem"><p>cvsup.cz.FreeBSD.org - <code class="email">&lt;<a xmlns="" class="email" href="mailto:cejkar@fit.vutbr.cz">cejkar@fit.vutbr.cz</a>&gt;</code> -
            <a class="link" href="http://www.freebsd.cz/stats/mrtg/cvsupd.html" target="_top">(CVSup processes)</a></p></li></ul></div></div></div></div></body></html>