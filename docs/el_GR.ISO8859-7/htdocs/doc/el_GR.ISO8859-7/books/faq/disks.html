<?xml version="1.0" encoding="iso-8859-7" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-7" /><title>Κεφάλαιο 9. Δίσκοι, Συστήματα Αρχείων και Φορτωτές Εκκίνησης</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Συχνές Ερωτήσεις για το FreeBSD 6.X και 7.X" /><link rel="up" href="index.html" title="Συχνές Ερωτήσεις για το FreeBSD 6.X και 7.X" /><link rel="prev" href="kernelconfig.html" title="Κεφάλαιο 8. Ρύθμιση Πυρήνα" /><link rel="next" href="admin.html" title="Κεφάλαιο 10. Διαχείριση Συστήματος" /><link rel="copyright" href="legalnotice.html" title="Νομική Σημείωση" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Κεφάλαιο 9. Δίσκοι, Συστήματα Αρχείων και Φορτωτές Εκκίνησης</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="kernelconfig.html">Προηγ</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="admin.html">Επόμενο</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks"></a>Κεφάλαιο 9. Δίσκοι, Συστήματα Αρχείων και Φορτωτές Εκκίνησης</h1></div></div></div><div class="qandaset"><a id="idp76955728"></a><dl><dt>9.1. <a href="disks.html#idp76955984">How do I move my system over to my huge new disk?</a></dt><dt>9.2. <a href="disks.html#idp77007952">Will a «dangerously dedicated» disk endanger
            my health?</a></dt><dt>9.3. <a href="disks.html#idp77034960">Which partitions can safely use Soft Updates?  I have
            heard that Soft Updates on / can cause
            problems.</a></dt><dt>9.4. <a href="disks.html#idp77046992">What is inappropriate about my ccd?</a></dt><dt>9.5. <a href="disks.html#idp77051600">Why can I not edit the disklabel on my ccd?</a></dt><dt>9.6. <a href="disks.html#idp77063248">Can I mount other foreign filesystems under FreeBSD?</a></dt><dt>9.7. <a href="disks.html#idp77084368">How do I mount a secondary DOS partition?</a></dt><dt>9.8. <a href="disks.html#idp77100624">Is there a cryptographic filesystem for FreeBSD?</a></dt><dt>9.9. <a href="disks.html#idp77104720">How can I use the Windows NT(R) loader to boot FreeBSD?</a></dt><dt>9.10. <a href="disks.html#idp77116368">How do I boot FreeBSD and Linux(R) from LILO?</a></dt><dt>9.11. <a href="disks.html#idp77137488">How do I boot FreeBSD and Linux(R) using GRUB</a></dt><dt>9.12. <a href="disks.html#idp77142352">How do I boot FreeBSD and Linux(R) using BootEasy?</a></dt><dt>9.13. <a href="disks.html#idp77148112">How do I change the boot prompt from ??? to
            something more meaningful?</a></dt><dt>9.14. <a href="disks.html#idp77150928">I have a new removable drive, how do I use it?</a></dt><dt>9.15. <a href="disks.html#idp77172944">Why do I get Incorrect super block when
            mounting a CDROM?</a></dt><dt>9.16. <a href="disks.html#idp77181392">Why do I get Device not
            configured when mounting a CDROM?</a></dt><dt>9.17. <a href="disks.html#idp77184336">Why do all non-English characters in filenames show up as
            «?» on my CDs when mounted in FreeBSD?</a></dt><dt>9.18. <a href="disks.html#idp77192400">I burned a CD under FreeBSD and now I can not read it
            under any other operating system. Why?</a></dt><dt>9.19. <a href="disks.html#idp77195472">How can I create an image of a data CD?</a></dt><dt>9.20. <a href="disks.html#idp77210960">Why can I not mount an audio
          CD?</a></dt><dt>9.21. <a href="disks.html#idp77214544">How do I mount a multi-session CD?</a></dt><dt>9.22. <a href="disks.html#idp77243600">How do I let ordinary users mount floppies, CDROMs and
            other removable media?</a></dt><dt>9.23. <a href="disks.html#idp77281744">The du and df
            commands show different amounts of disk space available.
            What is going on?</a></dt><dt>9.24. <a href="disks.html#idp77298128">How can I add more swap space?</a></dt><dt>9.25. <a href="disks.html#idp77301328">Why does FreeBSD see my disk as smaller than the
            manufacturer says it is?</a></dt><dt>9.26. <a href="disks.html#idp77304272">How is it possible for a partition to be more than 100%
            full?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp76955984"></a><a id="new-huge-disk"></a><p><strong>9.1.</strong></p></td><td align="left" valign="top"><p>How do I move my system over to my huge new disk?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The best way is to reinstall the OS on the new
            disk, then move the user data over.  This is highly
            recommended if you have been tracking -STABLE for more
            than one release, or have updated a release instead of
            installing a new one.  You can install booteasy on both
            disks with <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot0cfg</span>(8)</span></a>, and dual boot them until
            you are happy with the new configuration.  Skip the
            next paragraph to find out how to move the data after
            doing this.</p><p>Should you decide not to do a fresh install, you
            need to partition and label the new disk with either
            <code class="filename">/stand/sysinstall</code>, or <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a>
            and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>.  You should also install booteasy
            on both disks with <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot0cfg</span>(8)</span></a>, so that you can
            dual boot to the old or new system after the copying
            is done.</p><p>Now you have the new disk set up, and are ready
            to move the data.  Unfortunately, you cannot just blindly
            copy the data.  Things like device files (in
	    <code class="filename">/dev</code>), flags, and links tend to
            screw that up.  You need to use tools that understand
            these things, which means <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>.
            Although it is suggested that you move the data in single user
            mode, it is not required.</p><p>You should never use anything but <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> and
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">restore</span>(8)</span></a> to move the root filesystem.  The
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> command may work - then again, it may not.
            You should also use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">restore</span>(8)</span></a>
            if you are moving a single partition to another empty
            partition.  The sequence of steps to use dump to move
            a partitions data to a new partition is:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>newfs the new partition.</p></li><li class="step"><p>mount it on a temporary mount point.</p></li><li class="step"><p>cd to that directory.</p></li><li class="step"><p>dump the old partition, piping output to the
                new one.</p></li></ol></div><p>For example, if you are going to move root to
            <code class="filename">/dev/ad1s1a</code>, with
            <code class="filename">/mnt</code> as the temporary mount point,
            it is:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/ad1s1a</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad1s1a /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dump 0af - / | restore xf -</code></strong></pre><p>Rearranging your partitions with dump takes a bit more
            work. To merge a partition like <code class="filename">/var</code>
            into its parent, create the new partition large enough
            for both, move the parent partition as described above,
            then move the child partition into the empty directory
            that the first move created:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/ad1s1a</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad1s1a /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dump 0af - / | restore xf -</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd var</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dump 0af - /var | restore xf -</code></strong></pre><p>To split a directory from its parent, say putting
	    <code class="filename">/var</code> on its own partition when it was not
	    before, create both partitions, then mount the child partition
	    on the appropriate directory in the temporary mount point, then
	    move the old single partition:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/ad1s1a</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/ad1s1d</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad1s1a /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /mnt/var</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad1s1d /mnt/var</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dump 0af - / | restore xf -</code></strong></pre><p>You might prefer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pax&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pax</span>(1)</span></a>,
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> to <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> for user data. At the time of
            this writing, these are known to lose file flag information,
            so use them with caution.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77007952"></a><a id="dangerously-dedicated"></a><p><strong>9.2.</strong></p></td><td align="left" valign="top"><p>Will a <span class="quote">«<span class="quote">dangerously dedicated</span>»</span> disk endanger
            my health?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><a id="dedicate"></a>The installation procedure allows
            you to chose two different methods in partitioning your
            hard disk(s). The default way makes it compatible with other
            operating systems on the same machine, by using fdisk table
            entries (called <span class="quote">«<span class="quote">slices</span>»</span> in FreeBSD), with a
            FreeBSD slice that employs partitions of its own. Optionally,
            one can chose to install a boot-selector to switch between the
            possible operating systems on the disk(s). The alternative uses
            the entire disk for FreeBSD, and makes no attempt to be
            compatible with other operating systems.</p><p>So why it is called <span class="quote">«<span class="quote">dangerous</span>»</span>?  A disk
            in this mode does not contain what normal PC utilities
            would consider a valid fdisk table. Depending on how well
            they have been designed, they might complain at you once
            they are getting in contact with such a disk, or even
            worse, they might damage the BSD bootstrap without even
            asking or notifying you. In addition, the
            <span class="quote">«<span class="quote">dangerously dedicated</span>»</span> disk's layout is
            known to confuse many BIOSes, including those from AWARD
            (e.g. as found in HP Netserver and Micronics systems as
            well as many others) and Symbios/NCR (for the popular
            53C8xx range of SCSI controllers). This is not a complete
            list, there are more. Symptoms of this confusion include
            the <span class="errorname">read error</span> message printed by
            the FreeBSD bootstrap when it cannot find itself, as well
            as system lockups when booting.</p><p>Why have this mode at all then?  It only saves a few kbytes
            of disk space, and it can cause real problems for a new
            installation. <span class="quote">«<span class="quote">Dangerously dedicated</span>»</span> mode's
            origins lie in a desire to avoid one of the most common
            problems plaguing new FreeBSD installers - matching the BIOS
            <span class="quote">«<span class="quote">geometry</span>»</span> numbers for a disk to the disk
            itself.</p><p><span class="quote">«<span class="quote">Geometry</span>»</span> is an outdated concept, but one
            still at the heart of the PC's BIOS and its interaction with
            disks. When the FreeBSD installer creates slices, it has to
            record the location of these slices on the disk in a fashion
            that corresponds with the way the BIOS expects to find them. If
            it gets it wrong, you will not be able to boot.</p><p><span class="quote">«<span class="quote">Dangerously dedicated</span>»</span> mode tries to work
            around this by making the problem simpler. In some cases, it
            gets it right. But it is meant to be used as a last-ditch
            alternative - there are better ways to solve the problem 99
            times out of 100.</p><p>So, how do you avoid the need for <span class="quote">«<span class="quote">DD</span>»</span> mode
            when you are installing? Start by making a note of the geometry
            that your BIOS claims to be using for your disks. You can
            arrange to have the kernel print this as it boots by specifying
            <code class="option">-v</code> at the <code class="literal">boot:</code> prompt, or
            using <code class="command">boot -v</code> in the loader. Just before the
            installer starts, the kernel will print a list of BIOS
            geometries. Do not panic - wait for the installer to start and
            then use scrollback to read the numbers. Typically the BIOS
            disk units will be in the same order that FreeBSD lists your
            disks, first IDE, then SCSI.</p><p>When you are slicing up your disk, check that the disk
            geometry displayed in the FDISK screen is correct (ie. it
            matches the BIOS numbers); if it is wrong, use the
            <span class="keycap"><strong>g</strong></span> key to fix it. You may have to do this if
            there is absolutely nothing on the disk, or if the disk has been
            moved from another system. Note that this is only an issue with
            the disk that you are going to boot from; FreeBSD will sort
            itself out just fine with any other disks you may have.</p><p>Once you have got the BIOS and FreeBSD agreeing about the
            geometry of the disk, your problems are almost guaranteed to be
            over, and with no need for <span class="quote">«<span class="quote">DD</span>»</span> mode at all. If,
            however, you are still greeted with the dreaded <span class="errorname">read
            error</span> message when you try to boot, it is time to cross
            your fingers and go for it - there is nothing left to
            lose.</p><p>To return a <span class="quote">«<span class="quote">dangerously dedicated</span>»</span> disk
            for normal PC use, there are basically two options. The first
            is, you write enough NULL bytes over the MBR to make any
            subsequent installation believe this to be a blank disk. You
            can do this for example with</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/rda0 count=15</code></strong></pre><p>Alternatively, the undocumented DOS
            <span class="quote">«<span class="quote">feature</span>»</span></p><pre class="screen"><code class="prompt">C:\&gt;</code> <strong class="userinput"><code>fdisk /mbr</code></strong></pre><p>will to install a new master boot record as well, thus
            clobbering the BSD bootstrap.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77034960"></a><a id="safe-softupdates"></a><p><strong>9.3.</strong></p></td><td align="left" valign="top"><p>Which partitions can safely use Soft Updates?  I have
            heard that Soft Updates on <code class="filename">/</code> can cause
            problems.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Short answer: you can usually use Soft Updates safely
            on all partitions.</p><p>Long answer: There used to be some concern over using
            Soft Updates on the root partition.  Soft Updates has two
            characteristics that caused this.  First, a Soft Updates
            partition has a small chance of losing data during a
            system crash.  (The partition will not be corrupted; the
            data will simply be lost.)  Also, Soft Updates can cause
            temporary space shortages.</p><p>When using Soft Updates, the kernel can take up to
            thirty seconds to actually write changes to the physical
            disk.  If you delete a large file, the file still resides
            on disk until the kernel actually performs the deletion.
            This can cause a very simple race condition.  Suppose you
            delete one large file and immediately create another large
            file.  The first large file is not yet actually removed
            from the physical disk, so the disk might not have enough
            room for the second large file.  You get an error that the
            partition does not have enough space, although you know
            perfectly well that you just released a large chunk of
            space!  When you try again mere seconds later, the file
            creation works as you expect.  This has left more than one
            user scratching his head and doubting his sanity, the
            FreeBSD filesystem, or both.</p><p>If a system should crash after the kernel accepts a
            chunk of data for writing to disk, but before that data is
            actually written out, data could be lost or corrupted.
            This risk is extremely small, but generally manageable.
            Use of IDE write caching greatly increases this risk; it
            is strongly recommended that you disable IDE write caching
            when using Soft Updates.</p><p>These issues affect all partitions using Soft Updates.
            So, what does this mean for the root partition?</p><p>Vital information on the root partition changes very
            rarely.  Files such as <code class="filename">/kernel</code> and
            the contents of <code class="filename">/etc</code> only change
            during system maintenance, or when users change their
            passwords.  If the system crashed during the
            thirty-second window after such a change is made, it is
            possible that data could be lost.  This risk is negligible
            for most applications, but you should be aware that it
            exists.  If your system cannot tolerate this much risk,
            do not use Soft Updates on the root filesystem!</p><p><code class="filename">/</code> is traditionally one of the
            smallest partitions.  By default, FreeBSD puts the
            <code class="filename">/tmp</code> directory on
            <code class="filename">/</code>.  If you have a busy
            <code class="filename">/tmp</code>, you might see intermittent
            space problems.  Symlinking <code class="filename">/tmp</code> to
            <code class="filename">/var/tmp</code> will solve this
            problem.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77046992"></a><a id="inappropriate-ccd"></a><p><strong>9.4.</strong></p></td><td align="left" valign="top"><p>What is inappropriate about my ccd?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The symptom of this is:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ccdconfig -C</code></strong>
ccdconfig: ioctl (CCDIOCSET): /dev/ccd0c: Inappropriate file type or format</pre><p>This usually happens when you are trying to concatenate
            the <code class="literal">c</code> partitions, which default to type
            <code class="literal">unused</code>. The ccd driver requires the
            underlying partition type to be FS_BSDFFS. Edit the disklabel
            of the disks you are trying to concatenate and change the types
            of partitions to <code class="literal">4.2BSD</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77051600"></a><a id="ccd-disklabel"></a><p><strong>9.5.</strong></p></td><td align="left" valign="top"><p>Why can I not edit the disklabel on my ccd?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The symptom of this is:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>disklabel ccd0</code></strong>
(it prints something sensible here, so let us try to edit it)
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -e ccd0</code></strong>
(edit, save, quit)
disklabel: ioctl DIOCWDINFO: No disk label on disk;
use "disklabel -r" to install initial label</pre><p>This is because the disklabel returned by ccd is actually
            a <span class="quote">«<span class="quote">fake</span>»</span> one that is not really on the disk.
            You can solve this problem by writing it back explicitly,
            as in:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>disklabel ccd0 &gt; /tmp/disklabel.tmp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -Rr ccd0 /tmp/disklabel.tmp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -e ccd0</code></strong>
(this will work now)</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77063248"></a><a id="mount-foreign-fs"></a><p><strong>9.6.</strong></p></td><td align="left" valign="top"><p>Can I mount other foreign filesystems under FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>FreeBSD supports a variety of other
	    filesystems.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Digital UNIX</span></dt><dd><p>UFS CDROMs can be mounted directly on FreeBSD.
                  Mounting disk partitions from Digital UNIX and other
                  systems that support UFS may be more complex, depending
                  on the details of the disk partitioning for the operating
                  system in question.</p></dd><dt><span class="term"><span class="trademark">Linux</span>(R)</span></dt><dd><p>FreeBSD supports <code class="literal">ext2fs</code>
                  partitions.  See <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_ext2fs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_ext2fs</span>(8)</span></a> for more
                  information.</p></dd><dt><span class="term"><span class="trademark">Windows NT</span>(R)</span></dt><dd><p>FreeBSD includes a read-only NTFS driver.  For
		  more information, see <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_ntfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_ntfs</span>(8)</span></a>.</p></dd><dt><span class="term">FAT</span></dt><dd><p>FreeBSD includes a read-write FAT driver.  For
                  more information, see <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a>.</p></dd><dt><span class="term">ReiserFS</span></dt><dd><p>FreeBSD includes a read-only ReiserFS driver.  For
		  more information, see <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_reiserfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_reiserfs</span>(8)</span></a>.</p></dd></dl></div><p>FreeBSD also supports network filesystems such as NFS
            (see <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_nfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_nfs</span>(8)</span></a>), NetWare (see <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_nwfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_nwfs</span>(8)</span></a>),
            and Microsoft-style SMB filesystems (see
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_smbfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_smbfs</span>(8)</span></a>).</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77084368"></a><a id="mount-dos"></a><p><strong>9.7.</strong></p></td><td align="left" valign="top"><p>How do I mount a secondary DOS partition?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The secondary DOS partitions are found after ALL the
          primary partitions. For example, if you have an
          <span class="quote">«<span class="quote">E</span>»</span> partition as the second DOS partition on
          the second SCSI drive, you need to create the special files
          for <span class="quote">«<span class="quote">slice 5</span>»</span> in <code class="filename">/dev</code>,
          then mount <code class="filename">/dev/da1s5</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /dev</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sh MAKEDEV da1s5</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -t msdosfs /dev/da1s5 /dos/e</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">You can omit this step if you are running FreeBSD
	    5.0-RELEASE or newer with <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a>
	    enabled.</p></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77100624"></a><a id="crypto-filesystem"></a><p><strong>9.8.</strong></p></td><td align="left" valign="top"><p>Is there a cryptographic filesystem for FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Yes.  FreeBSD 5.0 includes <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a>, and FreeBSD 6.0
            added <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a>.  For earlier releases, see the <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cfs/pkg-descr">security/cfs</a> port.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77104720"></a><a id="nt-bootloader"></a><p><strong>9.9.</strong></p></td><td align="left" valign="top"><p>How can I use the <span class="trademark">Windows NT</span>(R) loader to boot FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The general idea is that you copy the first sector of your
            native root FreeBSD partition into a file in the DOS/<span class="trademark">Windows NT</span>(R)
            partition. Assuming you name that file something like
            <code class="filename">c:\bootsect.bsd</code> (inspired by
            <code class="filename">c:\bootsect.dos</code>), you can then edit the
            <code class="filename">c:\boot.ini</code> file to come up with something
            like this:</p><pre class="programlisting">[boot loader]
timeout=30
default=multi(0)disk(0)rdisk(0)partition(1)\WINDOWS
[operating systems]
multi(0)disk(0)rdisk(0)partition(1)\WINDOWS="Windows NT"
C:\BOOTSECT.BSD="FreeBSD"
C:\="DOS"</pre><p>If FreeBSD is installed on the same disk as the <span class="trademark">Windows NT</span>(R) boot
            partition simply copy <code class="filename">/boot/boot1</code> to
            <code class="filename">C:\BOOTSECT.BSD</code>. However, if FreeBSD is
            installed on a different disk <code class="filename">/boot/boot1</code>
            will not work, <code class="filename">/boot/boot0</code> is needed.</p><p><code class="filename">/boot/boot0</code> needs to be installed
            using sysinstall by selecting the FreeBSD boot manager on
            the screen which asks if you wish to use a boot
            manager. This is because <code class="filename">/boot/boot0</code>
            has the partition table area filled with NULL characters
            but sysinstall copies the partition table before copying
            <code class="filename">/boot/boot0</code> to the MBR.</p><div xmlns="" class="warning"><h3 class="admontitle">Προειδοποίηση: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="emphasis"><em>Do not simply copy <code class="filename">/boot/boot0</code>
                instead of <code class="filename">/boot/boot1</code>; you will
                overwrite your partition table and render your computer
                un-bootable!</em></span></p></div><p>When the FreeBSD boot manager runs it records the last
            OS booted by setting the active flag on the partition table
            entry for that OS and then writes the whole 512-bytes of itself
            back to the MBR so if you just copy
            <code class="filename">/boot/boot0</code> to
            <code class="filename">C:\BOOTSECT.BSD</code> then it writes an empty
            partition table, with the active flag set on one entry, to the
            MBR.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77116368"></a><a id="lilo-bootloader"></a><p><strong>9.10.</strong></p></td><td align="left" valign="top"><p>How do I boot FreeBSD and <span class="trademark">Linux</span>(R) from LILO?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>If you have FreeBSD and <span class="trademark">Linux</span>(R) on the same disk, just follow
            LILO's installation instructions for booting a non-<span class="trademark">Linux</span>(R)
            operating system.  Very briefly, these are:</p><p>Boot <span class="trademark">Linux</span>(R), and add the following lines to
            <code class="filename">/etc/lilo.conf</code>:</p><pre class="programlisting">other=/dev/hda2
        table=/dev/hda
        label=FreeBSD</pre><p>(the above assumes that your FreeBSD slice is known to
            <span class="trademark">Linux</span>(R) as <code class="filename">/dev/hda2</code>; tailor to
            suit your setup).  Then, run <code class="command">lilo</code> as
            <code class="systemitem">root</code> and you should be done.</p><p>If FreeBSD resides on another disk, you need to add
            <code class="literal">loader=/boot/chain.b</code> to the LILO entry.
            For example:</p><pre class="programlisting">other=/dev/dab4
        table=/dev/dab
        loader=/boot/chain.b
        label=FreeBSD</pre><p>In some cases you may need to specify the BIOS drive number
            to the FreeBSD boot loader to successfully boot off the second
            disk.  For example, if your FreeBSD SCSI disk is probed by BIOS
            as BIOS disk 1, at the FreeBSD boot loader prompt you need to
            specify:</p><pre class="screen">Boot: <strong class="userinput"><code>1:da(0,a)/kernel</code></strong></pre><p>You can configure
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot</span>(8)</span></a>
            to automatically do this for you at boot time.</p><p>The <a class="link" href="http://sunsite.unc.edu/LDP/HOWTO/mini/Linux+FreeBSD.html" target="_top">
            <span class="trademark">Linux</span>(R)+FreeBSD mini-HOWTO</a> is a good reference for
	    FreeBSD and <span class="trademark">Linux</span>(R) interoperability issues.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77137488"></a><a id="grub-loader"></a><p><strong>9.11.</strong></p></td><td align="left" valign="top"><p>How do I boot FreeBSD and <span class="trademark">Linux</span>(R) using GRUB</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Booting FreeBSD using GRUB is very simple.  Just
	    add the following to your configuration file
	    <code class="filename">/boot/grub/grub.conf</code>.</p><pre class="programlisting">title FreeBSD 6.1
	root (hd0,a)
	kernel /boot/loader
	  </pre><p>Where <code class="literal">hd0,a</code> points to your root partition
	    on the first disk.  If you need to specify which slice number
	    should be used, use something like this <code class="literal">(hd0,2,a)</code>.
	    By default, if the slice number is omitted, GRUB searches the
	    first slice which has <code class="literal">'a'</code> partition.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77142352"></a><a id="booteasy-loader"></a><p><strong>9.12.</strong></p></td><td align="left" valign="top"><p>How do I boot FreeBSD and <span class="trademark">Linux</span>(R) using BootEasy?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Install LILO at the start of your <span class="trademark">Linux</span>(R) boot partition
            instead of in the Master Boot Record.   You can then boot LILO
            from BootEasy.</p><p>If you are running <span class="trademark">Windows</span>(R) 95 and <span class="trademark">Linux</span>(R) this is recommended
            anyway, to make it simpler to get <span class="trademark">Linux</span>(R) booting again if you
            should need to reinstall <span class="trademark">Windows</span>(R) 95 (which is a Jealous
            Operating System, and will bear no other Operating Systems in
            the Master Boot Record).</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77148112"></a><a id="changing-bootprompt"></a><p><strong>9.13.</strong></p></td><td align="left" valign="top"><p>How do I change the boot prompt from <code class="literal">???</code> to
            something more meaningful?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>You can not do that with the standard boot manager without
            rewriting it. There are a number of other boot managers
            in the <code class="filename">sysutils</code> ports category that
            provide this functionality.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77150928"></a><a id="removable-drives"></a><p><strong>9.14.</strong></p></td><td align="left" valign="top"><p>I have a new removable drive, how do I use it?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Whether it is a removable drive like a <span class="trademark">Zip</span>(R) or an EZ drive
            (or even a floppy, if you want to use it that way), or a new
            hard disk, once it is installed and recognized by the system,
            and you have your cartridge/floppy/whatever slotted in, things
            are pretty much the same for all devices.</p><p>(this section is based on <a class="link" href="http://www.vmunix.com/mark/FreeBSD/ZIP-FAQ.html" target="_top">
            Mark Mayo's ZIP FAQ</a>)</p><p>If it is a ZIP drive or a floppy, you have already got a DOS
            filesystem on it, you can use a command like this:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t msdosfs /dev/fd0c /floppy</code></strong></pre><p>if it is a floppy, or this:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t msdosfs /dev/da2s4 /zip</code></strong></pre><p>for a ZIP disk with the factory configuration.</p><p>For other disks, see how they are laid out using
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> or
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>.</p><p>The rest of the examples will be for a ZIP drive on da2,
            the third SCSI disk.</p><p>Unless it is a floppy, or a removable you plan on sharing
            with other people, it is probably a better idea to stick a BSD
            filesystem on it. You will get long filename support, at least a
            2X improvement in performance, and a lot more stability. First,
            you need to redo the DOS-level partitions/filesystems. You can
            either use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> or
            <code class="filename">/stand/sysinstall</code>, or for a small drive
            that you do not want to bother with multiple operating system
            support on, just blow away the whole FAT partition table
            (slices) and just use the BSD partitioning:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/rda2 count=2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -Brw da2 auto</code></strong></pre><p>You can use disklabel or
            <code class="filename">/stand/sysinstall</code> to create multiple BSD
            partitions. You will certainly want to do this if you are adding
            swap space on a fixed disk, but it is probably irrelevant on a
            removable drive like a ZIP.</p><p>Finally, create a new filesystem, this one is on our ZIP
            drive using the whole disk:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/rda2c</code></strong></pre><p>and mount it:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/da2c /zip</code></strong></pre><p>and it is probably a good idea to add a line like this
            to <code class="filename">/etc/fstab</code> (see <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a>) so
            you can just type <code class="command">mount /zip</code> in the
            future:</p><pre class="programlisting">/dev/da2c /zip ffs rw,noauto 0 0</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77172944"></a><a id="mount-cd-superblock"></a><p><strong>9.15.</strong></p></td><td align="left" valign="top"><p>Why do I get <span class="errorname">Incorrect super block</span> when
            mounting a CDROM?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>You have to tell <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> the type of the device
            that you want to mount.  This is described in the <a class="link" href="../../../../doc/el_GR.ISO8859-7/books/handbook/creating-cds.html" target="_top"> Handbook section on
            optical media</a>, specifically the section <a class="link" href="../../../../doc/el_GR.ISO8859-7/books/handbook/creating-cds.html#MOUNTING-CD" target="_top">Using Data
            CDs</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77181392"></a><a id="cdrom-not-configured"></a><p><strong>9.16.</strong></p></td><td align="left" valign="top"><p>Why do I get <span class="errorname">Device not
            configured</span> when mounting a CDROM?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>This generally means that there is no CDROM in the
            CDROM drive, or the drive is not visible on the
            bus. Please see the <a class="link" href="../../../../doc/el_GR.ISO8859-7/books/handbook/creating-cds.html#MOUNTING-CD" target="_top">Using Data
            CDs</a> section of the Handbook for a detailed
            discussion of this issue.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77184336"></a><a id="cdrom-unicode-filenames"></a><p><strong>9.17.</strong></p></td><td align="left" valign="top"><p>Why do all non-English characters in filenames show up as
            <span class="quote">«<span class="quote">?</span>»</span> on my CDs when mounted in FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Your CDROM probably uses the <span class="quote">«<span class="quote">Joliet</span>»</span>
            extension for storing information about files and
            directories.  This is discussed in the Handbook chapter on
            <a class="link" href="../../../../doc/el_GR.ISO8859-7/books/handbook/creating-cds.html" target="_top">creating and
            using CDROMs</a>, specifically the section on <a class="link" href="../../../../doc/el_GR.ISO8859-7/books/handbook/creating-cds.html#MOUNTING-CD" target="_top">Using Data
            CDROMs</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77192400"></a><a id="burncd-isofs"></a><p><strong>9.18.</strong></p></td><td align="left" valign="top"><p>I burned a CD under FreeBSD and now I can not read it
            under any other operating system. Why?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>You most likely burned a raw file to your CD, rather
            than creating an ISO 9660 filesystem.  Take a look at the
            <a class="link" href="../../../../doc/el_GR.ISO8859-7/books/handbook/creating-cds.html" target="_top">Handbook
            chapter on creating CDROMs</a>, particularly the
            section on <a class="link" href="../../../../doc/el_GR.ISO8859-7/books/handbook/creating-cds.html#RAWDATA-CD" target="_top">burning raw
            data CDs</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77195472"></a><a id="copy-cd"></a><p><strong>9.19.</strong></p></td><td align="left" valign="top"><p>How can I create an image of a data CD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>This is discussed in the Handbook section on <a class="link" href="../../../../doc/el_GR.ISO8859-7/books/handbook/creating-cds.html#IMAGING-CD" target="_top">duplicating
            data CDs</a>. For more on working with CDROMs, see the
            <a class="link" href="../../../../doc/el_GR.ISO8859-7/books/handbook/creating-cds.html" target="_top">Creating CDs
            Section</a> in the Storage chapter in the
            Handbook.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77210960"></a><a id="mount-audio-CD"></a><p><strong>9.20.</strong></p></td><td align="left" valign="top"><p>Why can I not <code class="command">mount</code> an audio
          CD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>If you try to mount an audio CD, you will get an error
            like <span class="errorname">cd9660: /dev/acd0c: Invalid
            argument</span>.  This is because
            <code class="command">mount</code> only works on filesystems.  Audio
            CDs do not have filesystems; they just have data.  You
            need a program that reads audio CDs, such as the
            <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/xmcd/pkg-descr">audio/xmcd</a> port.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77214544"></a><a id="multi-session-CD"></a><p><strong>9.21.</strong></p></td><td align="left" valign="top"><p>How do I <code class="command">mount</code> a multi-session CD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>By default, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> will attempt to mount the
            last data track (session) of a CD.  If you would like to
            load an earlier session, you must use the
            <code class="option">-s</code> command line argument.  Please see
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_cd9660&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_cd9660</span>(8)</span></a> for specific examples.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77243600"></a><a id="user-floppymount"></a><p><strong>9.22.</strong></p></td><td align="left" valign="top"><p>How do I let ordinary users mount floppies, CDROMs and
            other removable media?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ordinary users can be permitted to mount devices. Here is
            how:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>As <code class="systemitem">root</code> set the sysctl variable
                <code class="varname">vfs.usermount</code> to
                <code class="literal">1</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl -w vfs.usermount=1</code></strong></pre></li><li class="step"><p>As <code class="systemitem">root</code> assign the appropriate
                permissions to the block device associated with the
                removable media.</p><p>For example, to allow users to mount the first floppy
                drive, use:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 666 /dev/fd0</code></strong></pre><p>To allow users in the group
                <code class="systemitem">operator</code> to mount the CDROM drive,
                use:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chgrp operator /dev/acd0c</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 640 /dev/acd0c</code></strong></pre></li><li class="step"><p>If you are running FreeBSD 5.X or later, you will need to alter
		<code class="filename">/etc/devfs.conf</code> to make these changes
		permanent across reboots.</p><p>As <code class="systemitem">root</code>, add the necessary lines to
		<code class="filename">/etc/devfs.conf</code>.  For example, to allow
		  users to mount the first floppy drive add:</p><pre class="programlisting"># Allow all users to mount the floppy disk.
own       /dev/fd0	  root:operator
perm	  /dev/fd0	  0666</pre><p>To allow users in the group <code class="systemitem">operator</code>
		to mount the CD-ROM drive add:</p><pre class="programlisting"># Allow members of the group operator to mount CD-ROMs.
own       /dev/acd0	  root:operator
perm	  /dev/acd0	  0660</pre></li><li class="step"><p>Finally, add the line
                <code class="literal">vfs.usermount=1</code>
                to the file <code class="filename">/etc/sysctl.conf</code> so
                that it is reset at system boot time.</p></li></ol></div><p>All users can now mount the floppy
            <code class="filename">/dev/fd0</code> onto a directory that they
            own:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mkdir ~/my-mount-point</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>mount -t msdosfs /dev/fd0 ~/my-mount-point</code></strong></pre><p>Users in group <code class="systemitem">operator</code> can now
            mount the CDROM <code class="filename">/dev/acd0c</code> onto a
            directory that they own:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mkdir ~/my-mount-point</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>mount -t cd9660 /dev/acd0c ~/my-mount-point</code></strong></pre><p>Unmounting the device is simple:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>umount ~/my-mount-point</code></strong></pre><p>Enabling <code class="varname">vfs.usermount</code>, however,
            has negative security implications.  A better way to
            access <span class="trademark">MS-DOS</span>(R) formatted media is to use the
            <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/mtools/pkg-descr">emulators/mtools</a>
            package in the ports collection.</p><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">The device name used in the previous examples must be
	      changed according to your configuration.</p></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77281744"></a><a id="du-vs-df"></a><p><strong>9.23.</strong></p></td><td align="left" valign="top"><p>The <code class="command">du</code> and <code class="command">df</code>
            commands show different amounts of disk space available.
            What is going on?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>You need to understand what <code class="command">du</code> and
            <code class="command">df</code> really do.  <code class="command">du</code>
            goes through the directory tree, measures how large each
            file is, and presents the totals.  <code class="command">df</code>
            just asks the filesystem how much space it has left.  They
            seem to be the same thing, but a file without a directory
            entry will affect <code class="command">df</code> but not
            <code class="command">du</code>.</p><p>When a program is using a file, and you delete the
            file, the file is not really removed from the filesystem
            until the program stops using it.  The file is immediately
            deleted from the directory listing, however.  You can see
            this easily enough with a program such as
            <code class="command">more</code>.  Assume you have a file large
            enough that its presence affects the output of
            <code class="command">du</code> and <code class="command">df</code>.  (Since
            disks can be so large today, this might be a
            <span class="emphasis"><em>very</em></span> large file!)  If you delete this
            file while using <code class="command">more</code> on it,
            <code class="command">more</code> does not immediately choke and
            complain that it cannot view the file.  The entry is
            simply removed from the directory so no other program or
            user can access it.  <code class="command">du</code> shows that it
            is gone - it has walked the directory tree and the file
            is not listed.  <code class="command">df</code> shows that it is
            still there, as the filesystem knows that
            <code class="command">more</code> is still using that space.  Once
            you end the <code class="command">more</code> session,
            <code class="command">du</code> and <code class="command">df</code> will
            agree.</p><p>Note that Soft Updates can delay the freeing of disk
            space; you might need to wait up to 30 seconds for the
            change to be visible!</p><p>This situation is common on web servers.  Many people
            set up a FreeBSD web server and forget to rotate the log
            files.  The access log fills up <code class="filename">/var</code>.
            The new administrator deletes the file, but the system
            still complains that the partition is full.  Stopping and
            restarting the web server program would free the file,
            allowing the system to release the disk space.  To prevent
            this from happening, set up <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newsyslog</span>(8)</span></a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77298128"></a><a id="add-swap-space"></a><p><strong>9.24.</strong></p></td><td align="left" valign="top"><p>How can I add more swap space?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>In the <a class="link" href="../../../../doc/el_GR.ISO8859-7/books/handbook/config-tuning.html" target="_top">Configuration and
          Tuning</a> section of the Handbook, you will find a
          <a class="link" href="../../../../doc/el_GR.ISO8859-7/books/handbook/adding-swap-space.html" target="_top">section</a>
          describing how to do this.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77301328"></a><a id="manufacturer-disk-size"></a><p><strong>9.25.</strong></p></td><td align="left" valign="top"><p>Why does FreeBSD see my disk as smaller than the
            manufacturer says it is?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Disk manufacturers calculate gigabytes as a billion bytes
          each, whereas FreeBSD calculates them as 1,073,741,824 bytes
          each. This explains why, for example, FreeBSD's boot messages
          will report a disk that supposedly has 80GB as holding
          76319MB.</p><p>Also note that FreeBSD will (by default)
          <a class="link" href="disks.html#disk-more-than-full" title="9.26.">reserve</a> 8% of the disk
          space.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77304272"></a><a id="disk-more-than-full"></a><p><strong>9.26.</strong></p></td><td align="left" valign="top"><p>How is it possible for a partition to be more than 100%
            full?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A portion of each UFS partition (8%, by default) is
	    reserved for use by the operating system and the
	    <code class="systemitem">root</code> user.
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=df&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">df</span>(1)</span></a> does not count that space when
	    calculating the <code class="literal">Capacity</code> column, so it can
	    exceed 100%.  Also, you will notice that the
	    <code class="literal">Blocks</code> column is always greater than the
	    sum of the <code class="literal">Used</code> and
	    <code class="literal">Avail</code> columns, usually by a factor of
	    8%.</p><p>For more details, look up the <code class="option">-m</code> option
	    in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a>.</p></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="kernelconfig.html">Προηγ</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="admin.html">Επόμενο</a></td></tr><tr><td width="40%" align="left" valign="top">Κεφάλαιο 8. Ρύθμιση Πυρήνα </td><td width="20%" align="center"><a accesskey="h" href="index.html">Αρχή</a></td><td width="40%" align="right" valign="top"> Κεφάλαιο 10. Διαχείριση Συστήματος</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Αυτό το κείμενο, και άλλα κείμενα, μπορεί να βρεθεί στο
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Για ερωτήσεις σχετικά με το FreeBSD, διαβάστε την
    <a href="http://www.FreeBSD.org/docs.html">τεκμηρίωση</a> πριν να επικοινωνήσετε με την
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Για ερωτήσεις σχετικά με αυτή την τεκμηρίωση, στείλτε e-mail στην
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>