<?xml version="1.0" encoding="iso-8859-7" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-7" /><title>24.2. Ενημερώνοντας το FreeBSD</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Εγχειρίδιο του FreeBSD" /><link rel="up" href="updating-upgrading.html" title="Κεφάλαιο 24. Ενημέρωση και Αναβάθμιση του FreeBSD" /><link rel="prev" href="updating-upgrading.html" title="Κεφάλαιο 24. Ενημέρωση και Αναβάθμιση του FreeBSD" /><link rel="next" href="updating-upgrading-portsnap.html" title="24.3. Portsnap: Ένα Εργαλείο Ενημέρωσης της Συλλογής των Ports" /><link rel="copyright" href="legalnotice.html" title="Νομική Σημείωση" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">24.2. Ενημερώνοντας το FreeBSD</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="updating-upgrading.html">Προηγ</a> </td><th width="60%" align="center">Κεφάλαιο 24. Ενημέρωση και Αναβάθμιση του FreeBSD</th><td width="20%" align="right"> <a accesskey="n" href="updating-upgrading-portsnap.html">Επόμενο</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="updating-upgrading-freebsdupdate"></a>24.2. Ενημερώνοντας το FreeBSD</h2></div><div><span class="authorgroup">Γράφηκε από τον <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div><div><span class="authorgroup">Βασίστηκε σε σημειώσεις που παρείχε ο <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Colin</span> <span class="surname">Percival</span></span>. </span></div></div></div><a id="idp92809936" class="indexterm"></a><a id="idp92810448" class="indexterm"></a><p>Η εφαρμογή ενημερώσεων ασφαλείας αποτελεί ένα σημαντικό τμήμα της
      συντήρησης λογισμικού, ειδικά όταν πρόκειται για το λειτουργικό σύστημα.
      Για μεγάλο διάστημα, η διαδικασία αυτή δεν ήταν εύκολη στο FreeBSD.
      Έπρεπε να εφαρμοστούν patches στον πηγαίο κώδικα, να γίνει μεταγλώττιση
      του από την αρχή, και να εγκατασταθούν ξανά τα νέα εκτελέσιμα.</p><p>Αυτό δεν είναι πλέον αναγκαίο, καθώς το FreeBSD διαθέτει τώρα ένα
      βοηθητικό πρόγραμμα, το <code class="command">freebsd-update</code>.  Το πρόγραμμα
      παρέχει δύο διαφορετικές λειτουργίες.  Η πρώτη είναι η δυνατότητα
      δυαδικής (binary) ενημέρωσης του βασικού συστήματος με τις τελευταίες
      διορθώσεις ασφάλειας και λαθών, χωρίς να χρειάζεται ξανά μεταγλώττιση
      και εγκατάσταση.  Η δεύτερη είναι η δυνατότητα αναβάθμισης του
      συστήματος σε μια νέα μικρή ή μεγάλη επίσημη έκδοση (release).</p><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Δυαδικές διορθώσεις λαθών και ασφάλειας, διατίθενται για όλες
	τις αρχιτεκτονικές και εκδόσεις που υποστηρίζονται από την ομάδα
	ασφάλειας.  Πριν προχωρήσετε στην αναβάθμιση σε μια νέα έκδοση,
	θα πρέπει να διαβάσετε τις σχετικές με αυτήν ανακοινώσεις, καθώς
	μπορεί να περιέχουν σημαντικές πληροφορίες.  Μπορείτε να δείτε τις
	ανακοινώσεις εκδόσεων στην παρακάτω τοποθεσία:
	<code class="uri"><a class="uri" href="http://www.FreeBSD.org/releases/" target="_top">http://www.FreeBSD.org/releases/</a></code>.</p></div><p>Αν υπάρχει κάποιο <code class="command">crontab</code> που χρησιμοποιεί τις
      δυνατότητες του <code class="command">freebsd-update</code>, θα πρέπει να
      απενεργοποιηθεί πριν ξεκινήσει η παρακάτω διαδικασία.  Μπορείτε να
      εγκαταστήσετε την τελευταία έκδοση του
      <code class="command">freebsd-update</code> κατεβάζοντας το συμπιεσμένο πακέτο
      από το παραπάνω <acronym class="acronym">URL</acronym> και εκτελώντας τις παρακάτω
      εντολές:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gunzip -c freebsd-update-upgrade.tgz | tar xvf -</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv freebsd-update.sh /usr/sbin/freebsd-update</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv freebsd-update.conf /etc</code></strong></pre><p>Δεν απαιτείται να κατεβάσετε την τελευταία έκδοση, αν χρησιμοποιείτε
      κάποια από τις τρέχουσες εκδόσεις του FreeBSD.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-config-file"></a>24.2.1. Το Αρχείο Ρυθμίσεων</h3></div></div></div><p>Κάποιοι χρήστες ίσως θέλουν να αλλάξουν το προεπιλεγμένο αρχείο
	ρυθμίσεων <code class="filename">/etc/freebsd-update.conf</code>, ώστε
	να έχουν καλύτερο έλεγχο της διαδικασίας.  Οι επιλογές είναι γενικά
	αρκετά καλά τεκμηριωμένες, αλλά οι παρακάτω ίσως να χρειάζονται
	κάποιες επιπλέον επεξηγήσεις:</p><pre class="programlisting"># Components of the base system which should be kept updated.
Components src world kernel</pre><p>Αυτή η παράμετρος ελέγχει ποια τμήματα του FreeBSD θα διατηρούνται
	ενημερωμένα.  Η προεπιλογή είναι να ενημερώνεται ο πηγαίος κώδικας,
	όλο το βασικό σύστημα, και ο πυρήνας.  Τα τμήματα είναι τα ίδια
	που διατίθενται και κατά την εγκατάσταση, για παράδειγμα αν βάλετε
	την επιλογή <code class="literal">world/games</code> θα εγκαθίστανται ενημερώσεις
	για τα παιχνίδια.  Αν βάλετε <code class="literal">src/bin</code> θα επιτρέψετε
	την ενημέρωση του πηγαίου κώδικα του καταλόγου
	<code class="filename">src/bin</code>.</p><p>Η καλύτερη επιλογή είναι να αφήσετε εδώ την προεπιλεγμένη τιμή,
	καθώς αν την αλλάξετε ώστε να περιέχει συγκεκριμένα μόνο τμήματα,
	θα αναγκαστείτε να αναφέρετε χωριστά μέσα στο αρχείο ρυθμίσεων κάθε
	τμήμα που θέλετε να ενημερώνεται.  Αυτό ίσως έχει καταστροφικά
	αποτελέσματα, καθώς είναι πιθανό ο πηγαίος κώδικας και τα εκτελέσιμα
	προγράμματα να μην είναι πλέον σε συγχρονισμό μεταξύ τους.</p><pre class="programlisting"># Paths which start with anything matching an entry in an IgnorePaths
# statement will be ignored.
IgnorePaths</pre><p>Προσθέστε διαδρομές σε καταλόγους, όπως
	<code class="filename">/bin</code> ή
	<code class="filename">/sbin</code> για να αφήσετε
	απείραχτους τους συγκεκριμένους καταλόγους κατά την διαδικασία
	ενημέρωσης.  Η επιλογή αυτή μπορεί να χρησιμοποιηθεί για να αποτρέψει
	το <code class="command">freebsd-update</code> να γράψει πάνω σε πιθανόν
	δικές σας τοπικές αλλαγές.</p><pre class="programlisting"># Paths which start with anything matching an entry in an UpdateIfUnmodified
# statement will only be updated if the contents of the file have not been
# modified by the user (unless changes are merged; see below).
UpdateIfUnmodified /etc/ /var/ /root/ /.cshrc /.profile</pre><p>Η επιλογή αυτή θα ενημερώσει τα αρχεία ρυθμίσεων στους καταλόγους
	που καθορίζονται, μόνο αν αυτά δεν έχουν μεταβληθεί από το χρήστη.
	Αν υπάρχουν τοπικές αλλαγές, δεν θα γίνει ενημέρωση.  Υπάρχει μια
	ακόμα επιλογή, η <code class="literal">KeepModifiedMetadata</code>, η οποία
	οδηγεί το <code class="command">freebsd-update</code> να αποθηκεύσει τις αλλαγές
	μεταξύ των δύο εκδόσεων κατά τη διάρκεια της συγχώνευσης
	(merge).</p><pre class="programlisting"># When upgrading to a new FreeBSD release, files which match MergeChanges
# will have any local changes merged into the version from the new release.
MergeChanges /etc/ /var/named/etc/</pre><p>Πρόκειται για τη λίστα των καταλόγων που περιέχουν αρχεία
	ρυθμίσεων, και στα οποία το <code class="command">freebsd-update</code> θα
	επιχειρεί την διαδικασία συγχώνευσης αλλαγών.  Η διαδικασία
	συγχώνευσης γίνεται με μια σειρά από patches τύπου <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>
	παρόμοια με το <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> αλλά με λιγότερες επιλογές.  Οι
	συγχωνεύσεις είτε γίνονται δεκτές, είτε προκαλούν το άνοιγμα κάποιου
	συντάκτη κειμένου, διαφορετικά η εκτέλεση του
	<code class="command">freebsd-update</code> ακυρώνεται.  Αν δεν είστε
	σίγουρος, κρατήστε αντίγραφο ασφαλείας του καταλόγου
	<code class="filename">/etc</code> και απλώς δεχθείτε τις
	αλλαγές.  Δείτε το <a class="xref" href="makeworld.html#mergemaster" title="24.7.11.1. mergemaster">Τμήμα 24.7.11.1, «<code class="command">mergemaster</code>»</a> για
	περισσότερες πληροφορίες σχετικά με την εντολή
	<code class="command">mergemaster</code>.</p><pre class="programlisting"># Directory in which to store downloaded updates and temporary
# files used by FreeBSD Update.
# WorkDir /var/db/freebsd-update</pre><p>Στον κατάλογο αυτό φυλάσσονται όλα τα patches και τα προσωρινά
	αρχεία.  Σε περιπτώσεις όπου ο χρήστης εκτελεί αναβάθμιση σε μια
	νεότερη έκδοση του FreeBSD, θα πρέπει να διαθέτει τουλάχιστον ένα
	gigabyte ελεύθερου χώρου.</p><pre class="programlisting"># When upgrading between releases, should the list of Components be
# read strictly (StrictComponents yes) or merely as a list of components
# which *might* be installed of which FreeBSD Update should figure out
# which actually are installed and upgrade those (StrictComponents no)?
# StrictComponents no</pre><p>Αν θέσετε την παραπάνω επιλογή στο <code class="literal">yes</code>,
	το <code class="command">freebsd-update</code> θα υποθέσει ότι η λίστα
	<code class="literal">Components</code> είναι πλήρης και δεν θα επιχειρήσει
	να προχωρήσει σε αλλαγές εκτός λίστας.  Ουσιαστικά, το
	<code class="command">freebsd-update</code> θα προσπαθήσει να ενημερώσει κάθε
	αρχείο που ανήκει στη λίστα <code class="literal">Components</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-security-patches"></a>24.2.2. Patches Σχετικά με την Ασφάλεια</h3></div></div></div><p>Τα patches που σχετίζονται με την ασφάλεια, αποθηκεύονται σε
	ένα απομακρυσμένο μηχάνημα και μπορούν να μεταφορτωθούν και να
	εγκατασταθούν με την ακόλουθη εντολή:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update fetch</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><p>Αν με την παραπάνω εντολή εγκατασταθούν ενημερώσεις στον πυρήνα,
	θα χρειαστεί να επανεκκινήσετε το σύστημα.  Αν όλα πάνε καλά, το
	σύστημα θα είναι πλέον ενημερωμένο και μπορείτε να εκτελείτε το
	<code class="command">freebsd-update</code> αυτόματα με την βοήθεια του
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>.  Μια απλή καταχώριση στο αρχείο
	<code class="filename">/etc/crontab</code> είναι επαρκής για αυτό
	το σκοπό:</p><pre class="programlisting">@daily                                  root    freebsd-update cron</pre><p>Η παραπάνω καταχώριση ορίζει ότι το
	<code class="command">freebsd-update</code> θα εκτελείται μια φορά την ημέρα.
	Με τον τρόπο αυτό, και όταν η εκτέλεση είναι μέσω της επιλογής
	<code class="option">cron</code>, το <code class="command">freebsd-update</code> απλώς
	θα ελέγχει για ενημερώσεις.  Αν υπάρχουν, η εφαρμογή θα τις
	κατεβάζει, αλλά δεν θα τις εγκαθιστά.  Θα στέλνει όμως ένα email
	στο χρήστη <code class="systemitem">root</code> ώστε να τις εγκαταστήσει
	χειροκίνητα.</p><p>Αν οτιδήποτε πάει στραβά, το <code class="command">freebsd-update</code>
	έχει την ικανότητα να επιστρέφει στην προηγούμενη σταθερή κατάσταση,
	αναιρώντας το τελευταίο σετ αλλαγών με την ακόλουθη εντολή:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update rollback</code></strong></pre><p>Με την ολοκλήρωση της εντολής, θα πρέπει να επανεκκινήσετε το
	σύστημα αν έχουν γίνει αλλαγές στον πυρήνα ή σε κάποιο από τα
	αρθρώματα του.  Αυτό θα επιτρέψει στο FreeBSD να φορτώσει τα νέα
	εκτελέσιμα στη μνήμη.</p><p>Το βοηθητικό πρόγραμμα <code class="command">freebsd-update</code> μπορεί
	να ενημερώσει αυτόματα μόνο τον πυρήνα <code class="filename">GENERIC</code>.
	Αν χρησιμοποιείται προσαρμοσμένος πυρήνας, θα πρέπει να
	μεταγλωττιστεί ξανά, όταν το <code class="command">freebsd-update</code>
	τελειώσει με την εγκατάσταση των υπόλοιπων ενημερώσεων.  Ωστόσο, το
	<code class="command">freebsd-update</code> θα ανιχνεύσει και θα ενημερώσει
	τον πυρήνα <code class="filename">GENERIC</code> στο <code class="filename">/boot/GENERIC</code> (αν υπάρχει), ακόμα
	και αν δεν είναι ο ενεργός πυρήνας του συστήματος (αυτός που
	εκτελείται τη συγκεκριμένη στιγμή).</p><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Είναι γενικά καλή ιδέα να έχετε πάντα ένα αντίγραφο του
	  πυρήνα <code class="filename">GENERIC</code> στον κατάλογο <code class="filename">/boot/GENERIC</code>.  Θα σας βοηθήσει στην
	  διάγνωση διάφορων προβλημάτων, καθώς και στην αναβάθμιση σε επόμενες
	  εκδόσεις του FreeBSD, μέσω του <code class="command">freebsd-update</code>.
	  Η διαδικασία αυτή περιγράφεται στο
	  <a class="xref" href="updating-upgrading-freebsdupdate.html#freebsdupdate-upgrade" title="24.2.3. Αναβαθμίσεις σε Μικρές και Μεγάλες Εκδόσεις">Τμήμα 24.2.3, «Αναβαθμίσεις σε Μικρές και Μεγάλες Εκδόσεις»</a>.</p></div><p>Αν δεν έχουν γίνει αλλαγές στις προεπιλεγμένες ρυθμίσεις στο
	αρχείο <code class="filename">/etc/freebsd-update.conf</code>, το
	<code class="command">freebsd-update</code> θα εγκαταστήσει τα ανανεωμένα αρχεία
	πηγαίου κώδικα μαζί με τις υπόλοιπες ενημερώσεις.  Μπορείτε έπειτα να
	προχωρήσετε στη μεταγλώττιση και εγκατάσταση νέου προσαρμοσμένου
	πυρήνα, με το συνήθη τρόπο.</p><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Οι ενημερώσεις που διανέμονται μέσω του
	  <code class="command">freebsd-update</code> δεν περιλαμβάνουν πάντοτε αλλαγές
	  στον πυρήνα.  Δεν είναι απαραίτητο να επαναμεταγλωττίσετε τον
	  προσαρμοσμένο πυρήνα σας, αν η εκτέλεση του
	  <code class="command">freebsd-update install</code> δεν επέφερε αλλαγές στα
	  αρχεία πηγαίου κώδικα του πυρήνα.  Ωστόσο, το
	  <code class="command">freebsd-update</code> ενημερώνει πάντοτε το αρχείο
	  <code class="filename">/usr/src/sys/conf/newvers.sh</code>.  Το αρχείο αυτό
	  περιέχει το τρέχον επίπεδο ενημερώσεων (patch level) το οποίο και
	  αναφέρεται ως αριθμός <code class="literal">-p</code> από εντολές όπως η
	  <code class="command">uname -r</code>.  Μεταγλωττίζοντας ξανά τον
	  προσαρμοσμένο πυρήνα σας (ακόμα και αν δεν υπάρχουν άλλες αλλαγές)
	  θα δώσετε τη δυνατότητα στην <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uname&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">uname</span>(1)</span></a> να αναφέρει με ακρίβεια
	  το επίπεδο ενημερώσεων.  Αυτό μπορεί να είναι ιδιαίτερα χρήσιμο
	  όταν συντηρείτε πολλαπλά συστήματα, καθώς σας επιτρέπει να
	  αξιολογήσετε με μια ματιά τι ενημερώσεις έχουν εγκατασταθεί στο
	  καθένα.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-upgrade"></a>24.2.3. Αναβαθμίσεις σε Μικρές και Μεγάλες Εκδόσεις</h3></div></div></div><p>Η διαδικασία αυτή θα απομακρύνει τα παλιά αρχεία αντικειμενικού
	κώδικα (object files) καθώς και τις παλιές βιβλιοθήκες, κάνοντας
	τις περισσότερες εφαρμογές τρίτων κατασκευαστών να μη λειτουργούν.
	Σας συνιστούμε είτε να απεγκαταστήσετε όλα τα εγκατεστημένα ports και
	να τα εγκαταστήσετε ξανά, ή να τα αναβαθμίσετε αργότερα,
	χρησιμοποιώντας το βοηθητικό πρόγραμμα
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a>.
	Οι περισσότεροι χρήστες θα θέλουν να κάνουν μια δοκιμαστική
	μεταγλώττιση χρησιμοποιώντας την ακόλουθη εντολή:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -af</code></strong></pre><p>Με αυτό τον τρόπο εξασφαλίζεται ότι τα πάντα θα επανεγκατασταθούν
	σωστά.  Σημειώστε ότι αν θέσετε την μεταβλητή περιβάλλοντος
	<code class="varname">BATCH</code> στην τιμή <code class="literal">yes</code>, όλες οι
	πιθανές ερωτήσεις που θα εμφανιστούν κατά τη διαδικασία, θα
	απαντηθούν αυτόματα με <code class="literal">yes</code>.  Έτσι δεν υπάρχει πλέον
	ανάγκη για παρέμβαση του χρήστη κατά τη διάρκεια της διαδικασίας
	μεταγλώττισης.</p><p>Αν χρησιμοποιείται προσαρμοσμένος πυρήνας, η διαδικασία
	αναβάθμισης είναι ελαφρά πιο πολύπλοκη.  Θα χρειαστείτε ένα αντίγραφο
	του πυρήνα <code class="filename">GENERIC</code> στον κατάλογο <code class="filename">/boot/GENERIC</code>.  Αν δεν υπάρχει ήδη ο
	πυρήνας <code class="filename">GENERIC</code> στο σύστημα σας, μπορείτε να τον
	ανακτήσετε χρησιμοποιώντας μια από τις παρακάτω μεθόδους:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Αν έχετε μεταγλωττίσει προσαρμοσμένο πυρήνα μόνο μια φορά, ο
	    πυρήνας στον κατάλογο <code class="filename">/boot/kernel.old</code> είναι στην
	    πραγματικότητα ο <code class="filename">GENERIC</code>.  Απλώς μετονομάστε
	    τον κατάλογο σε <code class="filename">/boot/GENERIC</code>.</p></li><li class="listitem"><p>Αν έχετε φυσική πρόσβαση στο μηχάνημα, μπορείτε να
	    εγκαταστήσετε ένα αντίγραφο του πυρήνα <code class="filename">GENERIC</code>
	    από το CD-ROM της εγκατάστασης.  Τοποθετήστε το CD-ROM στον οδηγό
	    και χρησιμοποιήστε τις παρακάτω εντολές:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /cdrom</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /cdrom/X.Y-RELEASE/kernels</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./install.sh GENERIC</code></strong></pre><p>Αντικαταστήστε το <code class="filename">X.Y-RELEASE</code>
	    με τους πραγματικούς αριθμούς της έκδοσης που χρησιμοποιείτε.
	    Ο πυρήνας <code class="filename">GENERIC</code> θα εγκατασταθεί από
	    προεπιλογή στον κατάλογο <code class="filename">/boot/GENERIC</code>.</p></li><li class="listitem"><p>Αν δεν έχετε κάποια από τις παραπάνω επιλογές, μπορείτε να
	    μεταγλωττίσετε και να εγκαταστήσετε τον πυρήνα
	    <code class="filename">GENERIC</code> μέσω του πηγαίου κώδικα:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>env DESTDIR=/boot/GENERIC make kernel</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv /boot/GENERIC/boot/kernel/* /boot/GENERIC</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm -rf /boot/GENERIC/boot</code></strong></pre><p>Για να αναγνωριστεί αυτός ο πυρήνας ως
	    <code class="filename">GENERIC</code> από το
	    <code class="command">freebsd-update</code>, δεν θα πρέπει να έχουν γίνει
	    αλλαγές στο αρχείο ρυθμίσεων του <code class="filename">GENERIC</code>.
	    Συνίσταται επίσης η μεταγλώττιση να γίνει χωρίς άλλες
	    εξειδικευμένες ρυθμίσεις (κατά προτίμηση με κενό το
	    <code class="filename">/etc/make.conf</code>).</p></li></ul></div><p>Δεν χρειάζεται τη δεδομένη στιγμή να επανεκκινήσετε με τον πυρήνα
	<code class="filename">GENERIC</code>.</p><p>Είναι δυνατές οι αναβαθμίσεις τόσο σε μικρές όσο και σε μεγάλες
	εκδόσεις, δίνοντας στην εντολή <code class="command">freebsd-update</code> τον
	επιθυμητό αριθμό έκδοσης.  Για παράδειγμα, η ακόλουθη εντολή θα
	αναβαθμίσει το σύστημα σε FreeBSD 8.1:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update -r 8.1-RELEASE upgrade</code></strong></pre><p>Μετά τη λήψη της εντολής, το
	<code class="command">freebsd-update</code> θα αξιολογήσει την κατάσταση του
	συστήματος και του αρχείου ρυθμίσεων του, σε μια απόπειρα να μαζέψει
	τις απαραίτητες πληροφορίες για την αναβάθμιση του συστήματος.
	Οι πληροφορίες που ανιχνεύθηκαν θα εμφανιστούν στην οθόνη με τη μορφή
	μιας λίστας εγκατεστημένων προγραμμάτων.  Για παράδειγμα:</p><pre class="screen">Looking up update.FreeBSD.org mirrors... 1 mirrors found.
Fetching metadata signature for 8.0-RELEASE from update1.FreeBSD.org... done.
Fetching metadata index... done.
Inspecting system... done.

The following components of FreeBSD seem to be installed:
kernel/smp src/base src/bin src/contrib src/crypto src/etc src/games
src/gnu src/include src/krb5 src/lib src/libexec src/release src/rescue
src/sbin src/secure src/share src/sys src/tools src/ubin src/usbin
world/base world/info world/lib32 world/manpages

The following components of FreeBSD do not seem to be installed:
kernel/generic world/catpages world/dict world/doc world/games
world/proflibs

Does this look reasonable (y/n)? y</pre><p>Στο σημείο αυτό, το <code class="command">freebsd-update</code> θα
	κατεβάσει όλα τα αρχεία που απαιτούνται για την αναβάθμιση.  Σε
	μερικές περιπτώσεις, ο χρήστης θα κληθεί να απαντήσει σε ερωτήσεις
	σχετικά με το τι θα εγκατασταθεί ή πως πρέπει να προχωρήσει η
	διαδικασία.</p><p>Όταν χρησιμοποιείται προσαρμοσμένος πυρήνας, το παραπάνω βήμα
	θα προκαλέσει την εμφάνιση της παρακάτω προειδοποίησης:</p><pre class="screen">WARNING: This system is running a "<em class="replaceable"><code>MYKERNEL</code></em>" kernel, which is not a
kernel configuration distributed as part of FreeBSD 8.0-RELEASE.
This kernel will not be updated: you MUST update the kernel manually
before running "/usr/sbin/freebsd-update install"</pre><p>Μπορείτε να αγνοήσετε αυτή την προειδοποίηση.  Θα χρησιμοποιήσουμε
	τον ενημερωμένο πυρήνα <code class="filename">GENERIC</code> ως ενδιάμεσο βήμα
	στη διαδικασία αναβάθμισης.</p><p>Αφού μεταφορτωθούν όλα τα patches στο τοπικό σύστημα, θα γίνει
	και η εφαρμογή τους.  Η διαδικασία αυτή ίσως πάρει λίγο χρόνο,
	ανάλογα με την ταχύτητα και το φορτίο του μηχανήματος.  Έπειτα θα
	γίνει η συγχώνευση των αρχείων ρυθμίσεων.  Αυτό το μέρος της
	διαδικασίας απαιτεί παρέμβαση του χρήστη, καθώς σε κάποια αρχεία θα
	χρειαστεί η συγχώνευση να γίνει χειροκίνητα με τη βοήθεια κάποιου
	συντάκτη κειμένου.  Ο χρήστης θα ενημερώνεται για το αποτέλεσμα κάθε
	επιτυχημένης συγχώνευσης καθώς εξελίσσεται η διαδικασία.  Σε
	περίπτωση αποτυχημένης συγχώνευσης (ή αγνόησης της), η διαδικασία
	αναβάθμισης θα διακοπεί.  Ενδεχομένως να θέλετε να κρατήσετε αντίγραφο
	ασφαλείας του καταλόγου <code class="filename">/etc</code>
	και να συγχωνεύσετε αργότερα (χειροκίνητα) κάποια σημαντικά αρχεία,
	όπως το <code class="filename">master.passwd</code> ή το
	<code class="filename">group</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Στο σημείο αυτό δεν έχει γίνει ακόμα καμιά αλλαγή στο σύστημα,
	  καθώς όλη η διαδικασία της αναβάθμισης και συγχώνευσης γίνεται σε
	  διαφορετικό κατάλογο.  Όταν εφαρμοστούν επιτυχώς όλα τα patches
	  και ολοκληρωθεί με επιτυχία η διαδικασία της συγχώνευσης όλων των
	  αρχείων ρύθμισης, ο χρήστης θα πρέπει να επιβεβαιώσει την τελική
	  εγκατάσταση.</p></div><p>Με το τέλος αυτής τη διαδικασίας, η αναβάθμιση μπορεί να
	οριστικοποιηθεί στο δίσκο, με τη χρήση της ακόλουθης εντολής:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><p>Στην πρώτη φάση, θα αλλαχθεί ο πυρήνας και τα σχετικά αρθρώματα.
	Στο σημείο αυτό, θα πρέπει να γίνει επανεκκίνηση του μηχανήματος.
	Σε μηχάνημα με προσαρμοσμένο πυρήνα, χρησιμοποιήστε την εντολή
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nextboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nextboot</span>(8)</span></a> ώστε να θέσετε τον πυρήνα για την επόμενη εκκίνηση
	στον <code class="filename">/boot/GENERIC</code> (ο οποίος
	έχει ήδη αναβαθμιστεί):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>nextboot -k GENERIC</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Προειδοποίηση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Πριν επανεκκινήσετε με τον πυρήνα <code class="filename">GENERIC</code>,
	  βεβαιωθείτε ότι περιέχει όλα τα προγράμματα οδήγησης που απαιτούνται
	  για την επιτυχή εκκίνηση του συστήματος σας (και τη λειτουργία του
	  δικτύου, αν αναβαθμίζετε κάποιο απομακρυσμένο μηχάνημα).
	  Ειδικότερα, αν ο προηγούμενος προσαρμοσμένος πυρήνας περιείχε
	  λειτουργίες που συνήθως παρέχονται από αρθρώματα (modules),
	  βεβαιωθείτε ότι φροντίσατε να φορτωθούν προσωρινά στον πυρήνα
	  <code class="filename">GENERIC</code> χρησιμοποιώντας τις δυνατότητες του
	  αρχείου <code class="filename">/boot/loader.conf</code>.  Ίσως επίσης να
	  θέλετε να απενεργοποιήσετε υπηρεσίες, προσαρτήσεις δίσκων και
	  δικτύου κ.λ.π. που δεν είναι απαραίτητες, μέχρι την ολοκλήρωση της
	  διαδικασίας αναβάθμισης.</p></div><p>Μπορείτε να χρησιμοποιήσετε την ακόλουθη εντολή για να
	επανεκκινήσετε το μηχάνημα με τον νέο πυρήνα:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown -r now</code></strong></pre><p>Μόλις το σύστημα επανέλθει σε λειτουργία, θα πρέπει να εκτελέσετε
	ξανά το <code class="command">freebsd-update</code>.  Η προηγούμενη λειτουργία
	έχει αποθηκευθεί, και έτσι το <code class="command">freebsd-update</code> δεν θα
	ξεκινήσει από την αρχή, αλλά θα απομακρύνει όλες τις παλιές
	κοινόχρηστες βιβλιοθήκες και τα αρχεία αντικειμενικού κώδικα.  Για να
	συνεχίσετε σε αυτό το στάδιο, δώστε την ακόλουθη εντολή:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ανάλογα με το αν υπήρξαν αλλαγές στους αριθμούς εκδόσεων των
	  βιβλιοθηκών, ίσως να υπάρχουν μόνο δύο φάσεις εγκατάστασης αντί για
	  τρεις.</p></div><p>Όλο το λογισμικό τρίτου κατασκευαστή θα πρέπει τώρα να
	μεταγλωττιστεί και να επανεγκατασταθεί από την αρχή.  Αυτό απαιτείται
	καθώς το εγκατεστημένο λογισμικό ίσως εξαρτάται από βιβλιοθήκες οι
	οποίες αφαιρέθηκαν κατά τη διαδικασία της αναβάθμισης.  Μπορείτε να
	χρησιμοποιήσετε την εντολή
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a>
	για να αυτοματοποιήσετε αυτή τη διαδικασία.  Για να ξεκινήσετε, δώστε
	τις παρακάτω εντολές:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -f ruby</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm /var/db/pkg/pkgdb.db</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>portupgrade -f ruby18-bdb</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm /var/db/pkg/pkgdb.db /usr/ports/INDEX-*.db</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>portupgrade -af</code></strong></pre><p>Μόλις ολοκληρωθεί το παραπάνω, ολοκληρώστε τη διαδικασία
	αναβάθμισης με μια τελευταία κλήση της εντολής
	<code class="command">freebsd-update</code>.  Δώστε την παρακάτω εντολή για να
	ολοκληρώσετε οτιδήποτε έχει απομείνει στη διαδικασία
	αναβάθμισης:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><p>Αν χρησιμοποιούσατε προσωρινά τον πυρήνα
	<code class="filename">GENERIC</code>, αυτή είναι η κατάλληλη στιγμή για να
	μεταγλωττίσετε και να εγκαταστήσετε νέο προσαρμοσμένο πυρήνα, με το
	συνήθη τρόπο.</p><p>Επανεκκινήστε το μηχάνημα σας στην νέα έκδοση του FreeBSD.
	Η διαδικασία έχει ολοκληρωθεί.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-system-comparison"></a>24.2.4. Σύγκριση Κατάστασης του Συστήματος</h3></div></div></div><p>Το βοηθητικό πρόγραμμα <code class="command">freebsd-update</code> μπορεί να
	χρησιμοποιηθεί για να ελέγξετε την κατάσταση της εγκατεστημένης
	έκδοσης του FreeBSD σε σχέση με μια γνωστή και σωστή εγκατάσταση.
	Η επιλογή αυτή συγκρίνει και αξιολογεί την τρέχουσα έκδοση των
	προγραμμάτων συστήματος, των βιβλιοθηκών και των αρχείων ρύθμισης.
	Για να ξεκινήσετε τη σύγκριση, δώστε την ακόλουθη εντολή:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update IDS &gt;&gt; outfile.ids</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Προειδοποίηση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Αν και το όνομα της εντολής είναι <acronym class="acronym">IDS</acronym>, δεν
	  θα πρέπει σε καμιά περίπτωση να θεωρηθεί υποκατάστατο ενός
	  συστήματος ανίχνευσης εισβολέα (intrusion detection system) όπως
	  είναι για παράδειγμα το
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/snort/pkg-descr">security/snort</a>.
	  Καθώς το <code class="command">freebsd-update</code> αποθηκεύει τα δεδομένα
	  του στο δίσκο, υπάρχει πάντα η πιθανότητα να έχει γίνει αλλοίωση
	  τους.  Αν και η πιθανότητα αυτή μπορεί να μειωθεί χρησιμοποιώντας
	  τη ρύθμιση <code class="varname">kern.securelevel</code> και αποθηκεύοντας
	  τα δεδομένα της εντολής <code class="command">freebsd-update</code> σε ένα
	  σύστημα αρχείων μόνο για ανάγνωση, μια ακόμα καλύτερη λύση θα ήταν
	  να συγκρίνετε το σύστημα με κάποιο δίσκο που θεωρείτε σίγουρα
	  ασφαλή.  Μπορείτε να χρησιμοποιήσετε ένα δίσκο
	  <acronym class="acronym">DVD</acronym> ή ένα εξωτερικό δίσκο <acronym class="acronym">USB</acronym>
	  που φυλάσσετε σε ασφαλή τοποθεσία.</p></div><p>Θα γίνει τώρα μια επιθεώρηση του συστήματος και θα εκτυπωθεί
	μια λίστα από αρχεία και τιμές hash του τύπου <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sha256&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sha256</span>(1)</span></a>,
	τόσο για το εγκατεστημένο όσο και για το γνωστό σύστημα.  Επειδή
	πρόκειται για μεγάλη λίστα, την ανακατευθύνουμε στο αρχείο
	<code class="filename">outfile.ids</code>.  Στην οθόνη το κείμενο θα κυλούσε
	πολύ γρήγορα, και σύντομα θα γέμιζε την προσωρινή μνήμη απεικόνισης
	της κονσόλας.</p><p>Οι γραμμές αυτές έχουν γενικά μεγάλο μήκος, αλλά είναι εύκολο
	να επεξεργαστούμε την έξοδο.  Για παράδειγμα, για να δείτε μια λίστα
	όλων των αρχείων που διαφέρουν από αυτά της επίσημης έκδοσης, δώστε
	την ακόλουθη εντολή:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat outfile.ids | awk '{ print $1 }' | more</code></strong>
/etc/master.passwd
/etc/motd
/etc/passwd
/etc/pf.conf</pre><p>Τα παραπάνω είναι μόνο ένα μέρος της εξόδου, υπάρχουν ακόμα
	πολλά διαφορετικά αρχεία.  Κάποια από αυτά τα αρχεία είναι φυσιολογικό
	να έχουν τροποποιηθεί.  Για παράδειγμα, το
	<code class="filename">/etc/passwd</code> έχει τροποποιηθεί, καθώς έχουν
	προστεθεί χρήστες στο σύστημα.  Σε μερικές περιπτώσεις, μπορεί να
	υπάρχουν και άλλα αρχεία, όπως π.χ. αρθρώματα πυρήνα τα οποία
	διαφέρουν αφού έχουν ενημερωθεί μέσω της
	<code class="command">freebsd-update</code>.  Για να εξαιρέσετε συγκεκριμένα
	αρχεία ή καταλόγους, προσθέστε τα στην επιλογή
	<code class="literal">IDSIgnorePaths</code> στο αρχείο ρυθμίσεων
	<code class="filename">/etc/freebsd-update.conf</code>.</p><p>Εκτός από την χρήση που αναφέραμε προηγουμένως, το σύστημα αυτό
	μπορεί να χρησιμοποιηθεί και ως τμήμα μιας λεπτομερούς διαδικασίας
	αναβάθμισης.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="updating-upgrading.html">Προηγ</a> </td><td width="20%" align="center"><a accesskey="u" href="updating-upgrading.html">Πάνω</a></td><td width="40%" align="right"> <a accesskey="n" href="updating-upgrading-portsnap.html">Επόμενο</a></td></tr><tr><td width="40%" align="left" valign="top">Κεφάλαιο 24. Ενημέρωση και Αναβάθμιση του FreeBSD </td><td width="20%" align="center"><a accesskey="h" href="index.html">Αρχή</a></td><td width="40%" align="right" valign="top"> 24.3. Portsnap: Ένα Εργαλείο Ενημέρωσης της Συλλογής των Ports</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Αυτό το κείμενο, και άλλα κείμενα, μπορεί να βρεθεί στο
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Για ερωτήσεις σχετικά με το FreeBSD, διαβάστε την
    <a href="http://www.FreeBSD.org/docs.html">τεκμηρίωση</a> πριν να επικοινωνήσετε με την
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Για ερωτήσεις σχετικά με αυτή την τεκμηρίωση, στείλτε e-mail στην
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>