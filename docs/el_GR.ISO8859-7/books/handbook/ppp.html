<?xml version="1.0" encoding="iso-8859-7" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-7" /><title>27.3. Χρησιμοποιώντας το PPP του Πυρήνα</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Εγχειρίδιο του FreeBSD" /><link rel="up" href="ppp-and-slip.html" title="Κεφάλαιο 27. PPP και SLIP" /><link rel="prev" href="userppp.html" title="27.2. Χρησιμοποιώντας το PPP Χρήστη" /><link rel="next" href="ppp-troubleshoot.html" title="27.4. Αντιμετώπιση Προβλημάτων σε Συνδέσεις PPP" /><link rel="copyright" href="legalnotice.html" title="Νομική Σημείωση" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">27.3. Χρησιμοποιώντας το PPP του Πυρήνα</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="userppp.html">Προηγ</a> </td><th width="60%" align="center">Κεφάλαιο 27. PPP και SLIP</th><td width="20%" align="right"> <a accesskey="n" href="ppp-troubleshoot.html">Επόμενο</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ppp"></a>27.3. Χρησιμοποιώντας το PPP του Πυρήνα</h2></div><div><span class="authorgroup">Κάποια τμήματα προέρχονται από αρχική συνεισφορά
	    των <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Gennady B.</span> <span class="surname">Sorokopud</span></span> και <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Robert</span> <span class="surname">Huff</span></span>. </span></div></div></div><div xmlns="" class="warning"><h3 class="admontitle">Προειδοποίηση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Η ενότητα αυτή είναι έγκυρη και μπορεί να εφαρμοστεί μόνο σε
	συστήματα FreeBSD 7.X.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95879248"></a>27.3.1. Ρυθμίζοντας το PPP του Πυρήνα</h3></div></div></div><a id="idp95879888" class="indexterm"></a><p>Πριν ξεκινήσετε να ρυθμίζετε το PPP στο μηχάνημα σας, βεβαιωθείτε
	ότι το <code class="command">pppd</code> βρίσκεται στον κατάλογο
	<code class="filename">/usr/sbin</code> και ότι υπάρχει ο
	κατάλογος <code class="filename">/etc/ppp</code>.</p><p>Το <code class="command">pppd</code> έχει δύο καταστάσεις
	λειτουργίας:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Ως πελάτης (<span class="quote">«<span class="quote">client</span>»</span>) - όταν θέλετε να
	    συνδέσετε το μηχάνημα σας με τον έξω κόσμο μέσω σειριακής σύνδεσης
	    σύνδεσης ή γραμμής modem.</p></li><li class="listitem"><p>Ως εξυπηρετητής (<span class="quote">«<span class="quote">server</span>»</span>)<a id="idp95885776" class="indexterm"></a> - το μηχάνημα
	    σας είναι συνδεμένο στο δίκτυο και χρησιμοποιείται για να
	    συνδέσει άλλους υπολογιστές, χρησιμοποιώντας το PPP.</p></li></ol></div><p>Και στις δύο περιπτώσεις θα χρειαστεί να δημιουργήσετε ένα αρχείο
	επιλογών (<code class="filename">/etc/ppp/options</code> ή
	<code class="filename">~/.ppprc</code> αν στο μηχάνημα σας υπάρχουν
	περισσότεροι από ένας χρήστες που χρησιμοποιούν το PPP).</p><p>Θα χρειαστείτε επίσης και κάποιο λογισμικό για χρήση με modem
	και σειριακές συνδέσεις (κατά προτίμηση το <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/comms/kermit/pkg-descr">comms/kermit</a>), ώστε να μπορείτε να
	καλέσετε και να αποκαταστήσετε τη σύνδεση με τον απομακρυσμένο
	εξυπηρετητή.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95888976"></a>27.3.2. Χρησιμοποιώντας το <code class="command">pppd</code> ως Πελάτης</h3></div><div><span class="authorgroup">Βασισμένο σε πληροφορίες που παρείχε ο <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Trev</span> <span class="surname">Roydhouse</span></span>. </span></div></div></div><a id="idp95891792" class="indexterm"></a><a id="idp95893072" class="indexterm"></a><p>Μπορείτε να χρησιμοποιήσετε το
	<code class="filename">/etc/ppp/options</code> που φαίνεται παρακάτω, για να
	συνδεθείτε σε μια γραμμή PPP ενός εξυπηρετητή τερματικών (terminal
	server) της Cisco.</p><pre class="programlisting">crtscts         # enable hardware flow control
modem           # modem control line
noipdefault     # remote PPP server must supply your IP address
                # if the remote host does not send your IP during IPCP
                # negotiation, remove this option
passive         # wait for LCP packets
domain ppp.foo.com      # put your domain name here

:<em class="replaceable"><code>remote_ip</code></em>    # put the IP of remote PPP host here
                # it will be used to route packets via PPP link
                # if you didn't specified the noipdefault option
                # change this line to <em class="replaceable"><code>local_ip</code></em>:<em class="replaceable"><code>remote_ip</code></em>

defaultroute    # put this if you want that PPP server will be your
                # default router</pre><p>Για να συνδεθείτε:</p><a id="idp95896528" class="indexterm"></a><a id="idp95897040" class="indexterm"></a><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Καλέστε τον απομακρυσμένο εξυπηρετητή χρησιμοποιώντας το
	    <span class="application">Kermit</span> (ή κάποιο άλλο πρόγραμμα για
	    modem) και εισάγετε το όνομα χρήστη και τον κωδικό σας (ή ότι άλλο
	    χρειάζεται για να ενεργοποιήσετε το PPP στον απομακρυσμένο
	    υπολογιστή).</p></li><li class="step"><p>Βγείτε από το <span class="application">Kermit</span> (χωρίς να
	    κλείσετε τη γραμμή).</p></li><li class="step"><p>Πληκτρολογήστε τα παρακάτω:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/sbin/pppd /dev/tty01 19200</code></strong></pre><p>Βεβαιωθείτε ότι χρησιμοποιείτε το σωστό όνομα συσκευής και
	    την κατάλληλη ταχύτητα.</p></li></ol></div><p>Ο υπολογιστής σας είναι τώρα συνδεμένος μέσω PPP.  Αν η σύνδεση
	αποτύχει, μπορείτε να χρησιμοποιήσετε την επιλογή
	<code class="option">debug</code> στο αρχείο
	<code class="filename">/etc/ppp/options</code> και να ελέγξετε τα μηνύματα στην
	κονσόλα για να ανιχνεύσετε το πρόβλημα.</p><p>Το παρακάτω script <code class="filename">/etc/ppp/pppup</code>
	αυτοματοποιεί και τα 3 στάδια:</p><pre class="programlisting">#!/bin/sh
pgrep -l pppd
pid=`pgrep pppd`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
pgrep -l kermit
pid=`pgrep kermit`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.dial
pppd /dev/tty01 19200</pre><a id="idp95909200" class="indexterm"></a><p>Το αρχείο <code class="filename">/etc/ppp/kermit.dial</code> είναι ένα
	script για το <span class="application">Kermit</span> το οποίο κάνει την
	κλήση και την πιστοποίηση του χρήστη στον απομακρυσμένο υπολογιστή
	(στο τέλος αυτού του εγγράφου, θα βρείτε ένα παράδειγμα για ένα
	τέτοιο script).</p><p>Χρησιμοποιήστε το παρακάτω script
	<code class="filename">/etc/ppp/pppdown</code> για να αποσυνδέσετε την γραμμή
	PPP:</p><pre class="programlisting">#!/bin/sh
pid=`pgrep pppd`
if [ X${pid} != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill -TERM ${pid}
fi

pgrep -l kermit
pid=`pgrep kermit`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

/sbin/ifconfig ppp0 down
/sbin/ifconfig ppp0 delete
kermit -y /etc/ppp/kermit.hup
/etc/ppp/ppptest</pre><p>Ελέγξτε αν εκτελείται ακόμα το <code class="command">pppd</code>,
	εκτελώντας το <code class="filename">/usr/etc/ppp/ppptest</code>, το οποίο θα
	μοιάζει με το παρακάτω:</p><pre class="programlisting">#!/bin/sh
pid=`pgrep pppd`
if [ X${pid} != "X" ] ; then
        echo 'pppd running: PID=' ${pid-NONE}
else
        echo 'No pppd running.'
fi
set -x
netstat -n -I ppp0
ifconfig ppp0</pre><p>Για να κλείσετε την γραμμή, εκτελέστε το
	<code class="filename">/etc/ppp/kermit.hup</code>, το οποίο θα πρέπει να
	περιέχει:</p><pre class="programlisting">set line /dev/tty01	; put your modem device here
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
echo \13
exit</pre><p>Μια εναλλακτική μέθοδος που χρησιμοποιεί το
	<code class="command">chat</code> αντί για το
	<code class="command">kermit</code>:</p><p>Τα παρακάτω δύο αρχεία επαρκούν για τη δημιουργία μιας σύνδεσης
	<code class="command">pppd</code>.</p><p><code class="filename">/etc/ppp/options</code>:</p><pre class="programlisting">/dev/cuad1 115200

crtscts		# enable hardware flow control
modem		# modem control line
connect "/usr/bin/chat -f /etc/ppp/login.chat.script"
noipdefault	# remote PPP serve must supply your IP address
	        # if the remote host doesn't send your IP during
                # IPCP negotiation, remove this option
passive         # wait for LCP packets
domain <em class="replaceable"><code>your.domain</code></em>	# put your domain name here

:		# put the IP of remote PPP host here
	        # it will be used to route packets via PPP link
                # if you didn't specified the noipdefault option
                # change this line to <em class="replaceable"><code>local_ip</code></em>:<em class="replaceable"><code>remote_ip</code></em>

defaultroute	# put this if you want that PPP server will be
	        # your default router</pre><p><code class="filename">/etc/ppp/login.chat.script</code>:</p><div xmlns="" class="note"><h3 class="admontitle">Σημείωση: </h3><p xmlns="http://www.w3.org/1999/xhtml">Το παρακάτω θα πρέπει να γραφεί σε μια μόνο γραμμή.</p></div><pre class="programlisting">ABORT BUSY ABORT 'NO CARRIER' "" AT OK ATDT<em class="replaceable"><code>phone.number</code></em>
  CONNECT "" TIMEOUT 10 ogin:-\\r-ogin: <em class="replaceable"><code>login-id</code></em>
  TIMEOUT 5 sword: <em class="replaceable"><code>password</code></em></pre><p>Μόλις τροποποιήσετε και εγκαταστήσετε σωστά τα παραπάνω αρχεία,
	το μόνο που χρειάζεται να κάνετε είναι να εκτελέσετε την εντολή
	<code class="command">pppd</code>, με τον τρόπο που φαίνεται παρακάτω:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pppd</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95948880"></a>27.3.3. Χρησιμοποιώντας το <code class="command">pppd</code> ως Εξυπηρετητή</h3></div></div></div><p>Το <code class="filename">/etc/ppp/options</code> θα πρέπει να περιέχει
	κάτι αντίστοιχο με το παρακάτω:</p><pre class="programlisting">crtscts                         # Hardware flow control
netmask 255.255.255.0           # netmask (not required)
192.114.208.20:192.114.208.165  # IP's of local and remote hosts
                                # local ip must be different from one
                                # you assigned to the Ethernet (or other)
                                # interface on your machine.
                                # remote IP is IP address that will be
                                # assigned to the remote machine
domain ppp.foo.com              # your domain
passive                         # wait for LCP
modem                           # modem line</pre><p>Το script <code class="filename">/etc/ppp/pppserv</code> που φαίνεται
	παρακάτω, θα πει στο <span class="application">pppd</span> να λειτουργήσει
	ως εξυπηρετητής:</p><pre class="programlisting">#!/bin/sh
pgrep -l pppd
pid=`pgrep pppd`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
pgrep -l kermit
pid=`pgrep kermit`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

# reset ppp interface
ifconfig ppp0 down
ifconfig ppp0 delete

# enable autoanswer mode
kermit -y /etc/ppp/kermit.ans

# run ppp
pppd /dev/tty01 19200</pre><p>Χρησιμοποιήστε το παρακάτω script
	<code class="filename">/etc/ppp/pppservdown</code> για να σταματήσετε τον
	εξυπηρετητή:</p><pre class="programlisting">#!/bin/sh
pgrep -l pppd
pid=`pgrep pppd`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
pgrep -l kermit
pid=`pgrep kermit`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi
ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.noans</pre><p>Το παρακάτω script για το <span class="application">Kermit</span>
	(<code class="filename">/etc/ppp/kermit.ans</code>) μπορεί να ενεργοποιεί και
	να απενεργοποιεί την λειτουργία αυτόματης απάντησης στο modem
	σας.</p><pre class="programlisting">set line /dev/tty01
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
inp 5 OK
echo \13
out ATS0=1\13   ; change this to out ATS0=0\13 if you want to disable
                ; autoanswer mode
inp 5 OK
echo \13
exit</pre><p>Στον απομακρυσμένο υπολογιστή, χρησιμοποιείται το script
	<code class="filename">/etc/ppp/kermit.dial</code> για κλήση και πιστοποίηση
	του χρήστη.  Θα πρέπει να το τροποποιήσετε σύμφωνα με τις ανάγκες σας.
	Βάλτε το όνομα χρήστη και τον κωδικό σας σε αυτό το script.
	Θα χρειαστεί επίσης να αλλάξετε την γραμμή για την είσοδο (input)
	ανάλογα με τις απαντήσεις που δίνει το modem σας και ο απομακρυσμένος
	υπολογιστής.</p><pre class="programlisting">;
; put the com line attached to the modem here:
;
set line /dev/tty01
;
; put the modem speed here:
;
set speed 19200
set file type binary            ; full 8 bit file xfer
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none
set modem hayes
set dial hangup off
set carrier auto                ; Then SET CARRIER if necessary,
set dial display on             ; Then SET DIAL if necessary,
set input echo on
set input timeout proceed
set input case ignore
def \%x 0                       ; login prompt counter
goto slhup

:slcmd                          ; put the modem in command mode
echo Put the modem in command mode.
clear                           ; Clear unread characters from input buffer
pause 1
output +++                      ; hayes escape sequence
input 1 OK\13\10                ; wait for OK
if success goto slhup
output \13
pause 1
output at\13
input 1 OK\13\10
if fail goto slcmd              ; if modem doesn't answer OK, try again

:slhup                          ; hang up the phone
clear                           ; Clear unread characters from input buffer
pause 1
echo Hanging up the phone.
output ath0\13                  ; hayes command for on hook
input 2 OK\13\10
if fail goto slcmd              ; if no OK answer, put modem in command mode

:sldial                         ; dial the number
pause 1
echo Dialing.
output atdt9,550311\13\10               ; put phone number here
assign \%x 0                    ; zero the time counter

:look
clear                           ; Clear unread characters from input buffer
increment \%x                   ; Count the seconds
input 1 {CONNECT }
if success goto sllogin
reinput 1 {NO CARRIER\13\10}
if success goto sldial
reinput 1 {NO DIALTONE\13\10}
if success goto slnodial
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 60 goto look
else goto slhup

:sllogin                        ; login
assign \%x 0                    ; zero the time counter
pause 1
echo Looking for login prompt.

:slloop
increment \%x                   ; Count the seconds
clear                           ; Clear unread characters from input buffer
output \13
;
; put your expected login prompt here:
;
input 1 {Username: }
if success goto sluid
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 10 goto slloop         ; try 10 times to get a login prompt
else goto slhup                 ; hang up and start again if 10 failures

:sluid
;
; put your userid here:
;
output ppp-login\13
input 1 {Password: }
;
; put your password here:
;
output ppp-password\13
input 1 {Entering SLIP mode.}
echo
quit

:slnodial
echo \7No dialtone.  Check the telephone line!\7
exit 1

; local variables:
; mode: csh
; comment-start: "; "
; comment-start-skip: "; "
; end:</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="userppp.html">Προηγ</a> </td><td width="20%" align="center"><a accesskey="u" href="ppp-and-slip.html">Πάνω</a></td><td width="40%" align="right"> <a accesskey="n" href="ppp-troubleshoot.html">Επόμενο</a></td></tr><tr><td width="40%" align="left" valign="top">27.2. Χρησιμοποιώντας το PPP Χρήστη </td><td width="20%" align="center"><a accesskey="h" href="index.html">Αρχή</a></td><td width="40%" align="right" valign="top"> 27.4. Αντιμετώπιση Προβλημάτων σε Συνδέσεις
      <acronym class="acronym">PPP</acronym></td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Αυτό το κείμενο, και άλλα κείμενα, μπορεί να βρεθεί στο
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Για ερωτήσεις σχετικά με το FreeBSD, διαβάστε την
    <a href="http://www.FreeBSD.org/docs.html">τεκμηρίωση</a> πριν να επικοινωνήσετε με την
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Για ερωτήσεις σχετικά με αυτή την τεκμηρίωση, στείλτε e-mail στην
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>