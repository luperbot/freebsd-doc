==============================
24.2. ????????????? ?? FreeBSD
==============================

.. raw:: html

   <div class="navheader">

24.2. ????????????? ?? FreeBSD
`????? <updating-upgrading.html>`__?
???????? 24. ????????? ??? ?????????? ??? FreeBSD
?\ `??????? <updating-upgrading-portsnap.html>`__

--------------

.. raw:: html

   </div>

.. raw:: html

   <div class="sect1">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

24.2. ????????????? ?? FreeBSD
------------------------------

.. raw:: html

   </div>

.. raw:: html

   <div>

??????? ??? ??? Tom Rhodes.

.. raw:: html

   </div>

.. raw:: html

   <div>

????????? ?? ?????????? ??? ??????? ? Colin Percival.

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

? ???????? ??????????? ????????? ???????? ??? ????????? ????? ???
?????????? ??????????, ?????? ???? ????????? ??? ?? ??????????? ???????.
??? ?????? ????????, ? ?????????? ???? ??? ???? ?????? ??? FreeBSD.
?????? ?? ??????????? patches ???? ?????? ??????, ?? ????? ????????????
??? ??? ??? ????, ??? ?? ????????????? ???? ?? ??? ??????????.

???? ??? ????? ????? ????????, ????? ?? FreeBSD ???????? ???? ???
????????? ?????????, ?? ``freebsd-update``. ?? ????????? ??????? ???
???????????? ???????????. ? ????? ????? ? ?????????? ???????? (binary)
?????????? ??? ??????? ?????????? ?? ??? ?????????? ?????????? ?????????
??? ?????, ????? ?? ?????????? ???? ???????????? ??? ???????????. ?
??????? ????? ? ?????????? ??????????? ??? ?????????? ?? ??? ??? ????? ?
?????? ??????? ?????? (release).

.. raw:: html

   <div class="note" xmlns="">

????????:
~~~~~~~~~

???????? ?????????? ????? ??? ?????????, ??????????? ??? ???? ???
?????????????? ??? ???????? ??? ?????????????? ??? ??? ????? ?????????.
???? ??????????? ???? ?????????? ?? ??? ??? ??????, ?? ?????? ??
????????? ??? ???????? ?? ????? ????????????, ????? ?????? ?? ?????????
?????????? ???????????. ???????? ?? ????? ??? ???????????? ???????? ????
???????? ?????????: ``http://www.FreeBSD.org/releases/``.

.. raw:: html

   </div>

?? ??????? ?????? ``crontab`` ??? ???????????? ??? ??????????? ???
``freebsd-update``, ?? ?????? ?? ??????????????? ???? ????????? ?
???????? ??????????. ???????? ?? ????????????? ??? ????????? ?????? ???
``freebsd-update`` ???????????? ?? ??????????? ?????? ??? ?? ????????
URL ??? ?????????? ??? ???????? ???????:

.. code:: screen

    # gunzip -c freebsd-update-upgrade.tgz | tar xvf -
    # mv freebsd-update.sh /usr/sbin/freebsd-update
    # mv freebsd-update.conf /etc

??? ?????????? ?? ?????????? ??? ????????? ??????, ?? ??????????????
?????? ??? ??? ????????? ???????? ??? FreeBSD.

.. raw:: html

   <div class="sect2">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

24.2.1. ?? ?????? ?????????
~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

??????? ??????? ???? ?????? ?? ???????? ?? ????????????? ??????
????????? ``/etc/freebsd-update.conf``, ???? ?? ????? ???????? ??????
??? ???????????. ?? ???????? ????? ?????? ?????? ???? ?????????????,
???? ?? ???????? ???? ?? ??????????? ??????? ???????? ???????????:

.. code:: programlisting

    # Components of the base system which should be kept updated.
    Components src world kernel

???? ? ?????????? ??????? ???? ??????? ??? FreeBSD ?? ????????????
???????????. ? ?????????? ????? ?? ???????????? ? ??????? ???????, ???
?? ?????? ???????, ??? ? ???????. ?? ??????? ????? ?? ???? ???
??????????? ??? ???? ??? ???????????, ??? ?????????? ?? ?????? ???
??????? ``world/games`` ?? ????????????? ??????????? ??? ?? ?????????.
?? ?????? ``src/bin`` ?? ?????????? ??? ????????? ??? ??????? ?????? ???
????????? ``src/bin``.

? ???????? ??????? ????? ?? ??????? ??? ??? ????????????? ????, ????? ??
??? ???????? ???? ?? ???????? ???????????? ???? ???????, ?? ????????????
?? ????????? ??????? ???? ??? ?????? ????????? ???? ????? ??? ?????? ??
????????????. ???? ???? ???? ???????????? ????????????, ????? ?????
?????? ? ??????? ??????? ??? ?? ?????????? ??????????? ?? ??? ?????
????? ?? ??????????? ?????? ????.

.. code:: programlisting

    # Paths which start with anything matching an entry in an IgnorePaths
    # statement will be ignored.
    IgnorePaths

????????? ????????? ?? ??????????, ???? ``/bin`` ? ``/sbin`` ??? ??
??????? ??????????? ???? ?????????????? ?????????? ???? ??? ??????????
??????????. ? ??????? ???? ?????? ?? ?????????????? ??? ?? ????????? ??
``freebsd-update`` ?? ?????? ???? ?? ??????? ????? ??? ??????? ???????.

.. code:: programlisting

    # Paths which start with anything matching an entry in an UpdateIfUnmodified
    # statement will only be updated if the contents of the file have not been
    # modified by the user (unless changes are merged; see below).
    UpdateIfUnmodified /etc/ /var/ /root/ /.cshrc /.profile

? ??????? ???? ?? ?????????? ?? ?????? ????????? ????? ?????????? ???
????????????, ???? ?? ???? ??? ????? ?????????? ??? ?? ??????. ??
???????? ??????? ???????, ??? ?? ????? ?????????. ??????? ??? ?????
???????, ? ``KeepModifiedMetadata``, ? ????? ?????? ??
``freebsd-update`` ?? ??????????? ??? ??????? ?????? ??? ??? ????????
???? ?? ???????? ??? ??????????? (merge).

.. code:: programlisting

    # When upgrading to a new FreeBSD release, files which match MergeChanges
    # will have any local changes merged into the version from the new release.
    MergeChanges /etc/ /var/named/etc/

????????? ??? ?? ????? ??? ????????? ??? ????????? ?????? ?????????, ???
??? ????? ?? ``freebsd-update`` ?? ????????? ??? ?????????? ???????????
???????. ? ?????????? ??????????? ??????? ?? ??? ????? ??? patches ?????
`diff(1) <http://www.FreeBSD.org/cgi/man.cgi?query=diff&sektion=1>`__
???????? ?? ??
`mergemaster(8) <http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&sektion=8>`__
???? ?? ????????? ????????. ?? ???????????? ???? ???????? ??????, ????
????????? ?? ??????? ??????? ???????? ????????, ??????????? ? ????????
??? ``freebsd-update`` ??????????. ?? ??? ????? ????????, ????????
????????? ????????? ??? ????????? ``/etc`` ??? ????? ???????? ???
???????. ????? ?? `??????24.7.11.1,
?\ ``mergemaster``? <makeworld.html#mergemaster>`__ ??? ????????????
??????????? ??????? ?? ??? ?????? ``mergemaster``.

.. code:: programlisting

    # Directory in which to store downloaded updates and temporary
    # files used by FreeBSD Update.
    # WorkDir /var/db/freebsd-update

???? ???????? ???? ??????????? ??? ?? patches ??? ?? ????????? ??????.
?? ??????????? ???? ? ??????? ??????? ?????????? ?? ??? ??????? ??????
??? FreeBSD, ?? ?????? ?? ???????? ??????????? ??? gigabyte ?????????
?????.

.. code:: programlisting

    # When upgrading between releases, should the list of Components be
    # read strictly (StrictComponents yes) or merely as a list of components
    # which *might* be installed of which FreeBSD Update should figure out
    # which actually are installed and upgrade those (StrictComponents no)?
    # StrictComponents no

?? ?????? ??? ???????? ??????? ??? ``yes``, ?? ``freebsd-update`` ??
???????? ??? ? ????? ``Components`` ????? ?????? ??? ??? ?? ???????????
?? ?????????? ?? ??????? ????? ??????. ??????????, ?? ``freebsd-update``
?? ??????????? ?? ?????????? ???? ?????? ??? ?????? ??? ?????
``Components``.

.. raw:: html

   </div>

.. raw:: html

   <div class="sect2">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

24.2.2. Patches ??????? ?? ??? ????????
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

?? patches ??? ??????????? ?? ??? ????????, ????????????? ?? ???
????????????? ???????? ??? ??????? ?? ????????????? ??? ?? ?????????????
?? ??? ???????? ??????:

.. code:: screen

    # freebsd-update fetch
    # freebsd-update install

?? ?? ??? ???????? ?????? ????????????? ??????????? ???? ??????, ??
????????? ?? ?????????????? ?? ???????. ?? ??? ???? ????, ?? ??????? ??
????? ????? ??????????? ??? ???????? ?? ????????? ?? ``freebsd-update``
???????? ?? ??? ??????? ???
`cron(8) <http://www.FreeBSD.org/cgi/man.cgi?query=cron&sektion=8>`__.
??? ???? ?????????? ??? ?????? ``/etc/crontab`` ????? ??????? ??? ????
?? ?????:

.. code:: programlisting

    @daily                                  root    freebsd-update cron

? ???????? ?????????? ?????? ??? ?? ``freebsd-update`` ?? ?????????? ???
???? ??? ?????. ?? ??? ????? ????, ??? ???? ? ???????? ????? ???? ???
???????? ``cron``, ?? ``freebsd-update`` ????? ?? ??????? ???
???????????. ?? ????????, ? ???????? ?? ??? ?????????, ???? ??? ?? ???
?????????. ?? ??????? ???? ??? email ??? ?????? ``root`` ???? ?? ???
???????????? ???????????.

?? ????????? ???? ??????, ?? ``freebsd-update`` ???? ??? ????????? ??
?????????? ???? ??????????? ??????? ?????????, ?????????? ?? ?????????
??? ??????? ?? ??? ???????? ??????:

.. code:: screen

    # freebsd-update rollback

?? ??? ?????????? ??? ???????, ?? ?????? ?? ?????????????? ?? ??????? ??
????? ????? ??????? ???? ?????? ? ?? ?????? ??? ?? ????????? ???. ????
?? ????????? ??? FreeBSD ?? ???????? ?? ??? ?????????? ??? ?????.

?? ????????? ????????? ``freebsd-update`` ?????? ?? ?????????? ????????
???? ??? ?????? ``GENERIC``. ?? ??????????????? ?????????????? ???????,
?? ?????? ?? ?????????????? ????, ???? ?? ``freebsd-update`` ?????????
?? ??? ??????????? ??? ????????? ???????????. ??????, ??
``freebsd-update`` ?? ?????????? ??? ?? ?????????? ??? ??????
``GENERIC`` ??? ``/boot/GENERIC`` (?? ???????), ????? ??? ?? ??? ????? ?
??????? ??????? ??? ?????????? (????? ??? ?????????? ?? ????????????
??????).

.. raw:: html

   <div class="note" xmlns="">

????????:
~~~~~~~~~

????? ?????? ???? ???? ?? ????? ????? ??? ????????? ??? ??????
``GENERIC`` ???? ???????? ``/boot/GENERIC``. ?? ??? ???????? ????
???????? ???????? ???????????, ????? ??? ???? ?????????? ?? ????????
???????? ??? FreeBSD, ???? ??? ``freebsd-update``. ? ?????????? ????
???????????? ??? `??????24.2.3, ????????????? ?? ?????? ??? ???????
????????? <updating-upgrading-freebsdupdate.html#freebsdupdate-upgrade>`__.

.. raw:: html

   </div>

?? ??? ????? ????? ??????? ???? ?????????????? ????????? ??? ??????
``/etc/freebsd-update.conf``, ?? ``freebsd-update`` ?? ???????????? ??
?????????? ?????? ??????? ?????? ???? ?? ??? ????????? ???????????.
???????? ?????? ?? ??????????? ??? ???????????? ??? ??????????? ????
?????????????? ??????, ?? ?? ?????? ?????.

.. raw:: html

   <div class="note" xmlns="">

????????:
~~~~~~~~~

?? ??????????? ??? ??????????? ???? ??? ``freebsd-update`` ???
????????????? ??????? ??????? ???? ??????. ??? ????? ?????????? ??
??????????????????? ??? ????????????? ?????? ???, ?? ? ???????? ???
``freebsd-update install`` ??? ??????? ??????? ??? ?????? ??????? ??????
??? ??????. ??????, ?? ``freebsd-update`` ?????????? ??????? ?? ??????
``/usr/src/sys/conf/newvers.sh``. ?? ?????? ???? ???????? ?? ??????
??????? ??????????? (patch level) ?? ????? ??? ?????????? ?? ???????
``-p`` ??? ??????? ???? ? ``uname -r``. ???????????????? ???? ???
????????????? ?????? ??? (????? ??? ?? ??? ???????? ????? ???????) ??
?????? ?? ?????????? ????
`uname(1) <http://www.FreeBSD.org/cgi/man.cgi?query=uname&sektion=1>`__
?? ???????? ?? ???????? ?? ??????? ???????????. ???? ?????? ?? ?????
????????? ??????? ???? ?????????? ???????? ?????????, ????? ???
????????? ?? ???????????? ?? ??? ????? ?? ??????????? ????? ????????????
??? ??????.

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   <div class="sect2">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

24.2.3. ???????????? ?? ?????? ??? ??????? ????????
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

? ?????????? ???? ?? ??????????? ?? ????? ?????? ?????????????? ??????
(object files) ????? ??? ??? ?????? ???????????, ???????? ???
???????????? ????????? ?????? ????????????? ?? ?? ???????????. ???
?????????? ???? ?? ??????????????? ??? ?? ????????????? ports ??? ?? ??
????????????? ????, ? ?? ?? ???????????? ????????, ??????????????? ??
????????? ?????????
`ports-mgmt/portupgrade <http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr>`__.
?? ???????????? ??????? ?? ?????? ?? ?????? ??? ??????????? ????????????
??????????????? ??? ???????? ??????:

.. code:: screen

    # portupgrade -af

?? ???? ??? ????? ????????????? ??? ?? ????? ?? ????????????????? ?????.
????????? ??? ?? ?????? ??? ????????? ????????????? ``BATCH`` ???? ????
``yes``, ???? ?? ??????? ????????? ??? ?? ??????????? ???? ??
??????????, ?? ?????????? ???????? ?? ``yes``. ???? ??? ??????? ?????
?????? ??? ????????? ??? ?????? ???? ?? ???????? ??? ???????????
?????????????.

?? ??????????????? ?????????????? ???????, ? ?????????? ???????????
????? ?????? ??? ?????????. ?? ??????????? ??? ????????? ??? ??????
``GENERIC`` ???? ???????? ``/boot/GENERIC``. ?? ??? ??????? ??? ?
??????? ``GENERIC`` ??? ??????? ???, ???????? ?? ??? ??????????
??????????????? ??? ??? ??? ???????? ????????:

.. raw:: html

   <div class="itemizedlist">

-  ?? ????? ????????????? ????????????? ?????? ???? ??? ????, ? ???????
   ???? ???????? ``/boot/kernel.old`` ????? ???? ?????????????? ?
   ``GENERIC``. ????? ??????????? ??? ???????? ?? ``/boot/GENERIC``.

-  ?? ????? ?????? ???????? ??? ????????, ???????? ?? ????????????? ???
   ????????? ??? ?????? ``GENERIC`` ??? ?? CD-ROM ??? ????????????.
   ??????????? ?? CD-ROM ???? ????? ??? ?????????????? ??? ????????
   ???????:

   .. code:: screen

       # mount /cdrom
       # cd /cdrom/X.Y-RELEASE/kernels
       # ./install.sh GENERIC

   ?????????????? ?? ``X.Y-RELEASE`` ?? ???? ???????????? ???????? ???
   ??????? ??? ??????????????. ? ??????? ``GENERIC`` ?? ???????????? ???
   ?????????? ???? ???????? ``/boot/GENERIC``.

-  ?? ??? ????? ?????? ??? ??? ???????? ????????, ???????? ??
   ?????????????? ??? ?? ????????????? ??? ?????? ``GENERIC`` ???? ???
   ??????? ??????:

   .. code:: screen

       # cd /usr/src/
       # env DESTDIR=/boot/GENERIC make kernel
       # mv /boot/GENERIC/boot/kernel/* /boot/GENERIC
       # rm -rf /boot/GENERIC/boot

   ??? ?? ???????????? ????? ? ??????? ?? ``GENERIC`` ??? ??
   ``freebsd-update``, ??? ?? ?????? ?? ????? ????? ??????? ??? ??????
   ????????? ??? ``GENERIC``. ?????????? ?????? ? ???????????? ?? ?????
   ????? ????? ?????????????? ????????? (???? ????????? ?? ???? ??
   ``/etc/make.conf``).

.. raw:: html

   </div>

??? ?????????? ?? ???????? ?????? ?? ?????????????? ?? ??? ??????
``GENERIC``.

????? ??????? ?? ???????????? ???? ?? ?????? ??? ??? ?? ???????
????????, ???????? ???? ?????? ``freebsd-update`` ??? ????????? ??????
???????. ??? ??????????, ? ???????? ?????? ?? ??????????? ?? ??????? ??
FreeBSD?8.1:

.. code:: screen

    # freebsd-update -r 8.1-RELEASE upgrade

???? ?? ???? ??? ???????, ?? ``freebsd-update`` ?? ??????????? ???
????????? ??? ?????????? ??? ??? ??????? ????????? ???, ?? ??? ????????
?? ??????? ??? ??????????? ??????????? ??? ??? ?????????? ???
??????????. ?? ??????????? ??? ???????????? ?? ??????????? ???? ????? ??
?? ????? ???? ?????? ?????????????? ????????????. ??? ??????????:

.. code:: screen

    Looking up update.FreeBSD.org mirrors... 1 mirrors found.
    Fetching metadata signature for 8.0-RELEASE from update1.FreeBSD.org... done.
    Fetching metadata index... done.
    Inspecting system... done.

    The following components of FreeBSD seem to be installed:
    kernel/smp src/base src/bin src/contrib src/crypto src/etc src/games
    src/gnu src/include src/krb5 src/lib src/libexec src/release src/rescue
    src/sbin src/secure src/share src/sys src/tools src/ubin src/usbin
    world/base world/info world/lib32 world/manpages

    The following components of FreeBSD do not seem to be installed:
    kernel/generic world/catpages world/dict world/doc world/games
    world/proflibs

    Does this look reasonable (y/n)? y

??? ?????? ????, ?? ``freebsd-update`` ?? ????????? ??? ?? ?????? ???
??????????? ??? ??? ??????????. ?? ??????? ???????????, ? ??????? ??
?????? ?? ????????? ?? ????????? ??????? ?? ?? ?? ?? ???????????? ? ???
?????? ?? ?????????? ? ??????????.

???? ??????????????? ?????????????? ???????, ?? ???????? ???? ??
?????????? ??? ???????? ??? ???????? ??????????????:

.. code:: screen

    WARNING: This system is running a "MYKERNEL" kernel, which is not a
    kernel configuration distributed as part of FreeBSD 8.0-RELEASE.
    This kernel will not be updated: you MUST update the kernel manually
    before running "/usr/sbin/freebsd-update install"

???????? ?? ????????? ???? ??? ?????????????. ?? ???????????????? ???
??????????? ?????? ``GENERIC`` ?? ????????? ???? ??? ??????????
???????????.

???? ????????????? ??? ?? patches ??? ?????? ???????, ?? ????? ??? ?
???????? ????. ? ?????????? ???? ???? ????? ???? ?????, ??????? ?? ???
???????? ??? ?? ?????? ??? ???????????. ?????? ?? ????? ? ?????????? ???
??????? ?????????. ???? ?? ????? ??? ??????????? ??????? ????????? ???
??????, ????? ?? ?????? ?????? ?? ????????? ? ?????????? ?? ?????
??????????? ?? ?? ??????? ??????? ???????? ????????. ? ??????? ??
???????????? ??? ?? ?????????? ???? ???????????? ??????????? ?????
??????????? ? ??????????. ?? ????????? ???????????? ??????????? (?
???????? ???), ? ?????????? ??????????? ?? ????????. ??????????? ??
?????? ?? ????????? ????????? ????????? ??? ????????? ``/etc`` ??? ??
???????????? ???????? (???????????) ?????? ????????? ??????, ???? ??
``master.passwd`` ? ?? ``group``.

.. raw:: html

   <div class="note" xmlns="">

????????:
~~~~~~~~~

??? ?????? ???? ??? ???? ????? ????? ????? ?????? ??? ???????, ????? ???
? ?????????? ??? ??????????? ??? ??????????? ??????? ?? ???????????
????????. ???? ??????????? ???????? ??? ?? patches ??? ??????????? ??
???????? ? ?????????? ??? ??????????? ???? ??? ??????? ????????, ?
??????? ?? ?????? ?? ???????????? ??? ?????? ???????????.

.. raw:: html

   </div>

?? ?? ????? ????? ?? ???????????, ? ?????????? ?????? ?? ???????????????
??? ?????, ?? ?? ????? ??? ????????? ???????:

.. code:: screen

    # freebsd-update install

???? ????? ????, ?? ???????? ? ??????? ??? ?? ??????? ?????????. ???
?????? ????, ?? ?????? ?? ????? ???????????? ??? ???????????. ??
???????? ?? ????????????? ??????, ?????????????? ??? ??????
`nextboot(8) <http://www.FreeBSD.org/cgi/man.cgi?query=nextboot&sektion=8>`__
???? ?? ?????? ??? ?????? ??? ??? ??????? ???????? ????
``/boot/GENERIC`` (? ?????? ???? ??? ????????????):

.. code:: screen

    # nextboot -k GENERIC

.. raw:: html

   <div class="warning" xmlns="">

?????????????:
~~~~~~~~~~~~~~

???? ?????????????? ?? ??? ?????? ``GENERIC``, ??????????? ??? ????????
??? ?? ??????????? ???????? ??? ??????????? ??? ??? ??????? ???????? ???
?????????? ??? (??? ?? ?????????? ??? ???????, ?? ???????????? ??????
????????????? ????????). ??????????, ?? ? ???????????? ??????????????
??????? ???????? ??????????? ??? ??????? ?????????? ??? ?????????
(modules), ??????????? ??? ?????????? ?? ????????? ????????? ???? ??????
``GENERIC`` ??????????????? ??? ??????????? ??? ???????
``/boot/loader.conf``. ???? ?????? ?? ?????? ?? ????????????????
?????????, ???????????? ?????? ??? ??????? ?.?.?. ??? ??? ?????
???????????, ????? ??? ?????????? ??? ??????????? ???????????.

.. raw:: html

   </div>

???????? ?? ??????????????? ??? ???????? ?????? ??? ?? ?????????????? ??
???????? ?? ??? ??? ??????:

.. code:: screen

    # shutdown -r now

????? ?? ??????? ????????? ?? ??????????, ?? ?????? ?? ?????????? ????
?? ``freebsd-update``. ? ??????????? ?????????? ???? ???????????, ???
???? ?? ``freebsd-update`` ??? ?? ????????? ??? ??? ????, ???? ??
??????????? ???? ??? ?????? ???????????? ??????????? ??? ?? ??????
?????????????? ??????. ??? ?? ?????????? ?? ???? ?? ??????, ????? ???
???????? ??????:

.. code:: screen

    # freebsd-update install

.. raw:: html

   <div class="note" xmlns="">

????????:
~~~~~~~~~

??????? ?? ?? ?? ??????? ??????? ????? ???????? ???????? ???
???????????, ???? ?? ???????? ???? ??? ?????? ???????????? ???? ???
?????.

.. raw:: html

   </div>

??? ?? ????????? ?????? ???????????? ?? ?????? ???? ?? ??????????????
??? ?? ???????????????? ??? ??? ????. ???? ?????????? ????? ??
????????????? ????????? ???? ????????? ??? ??????????? ?? ??????
??????????? ???? ?? ?????????? ??? ???????????. ???????? ??
??????????????? ??? ??????
`ports-mgmt/portupgrade <http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr>`__
??? ?? ???????????????? ???? ?? ??????????. ??? ?? ??????????, ????? ???
???????? ???????:

.. code:: screen

    # portupgrade -f ruby
    # rm /var/db/pkg/pkgdb.db
    # portupgrade -f ruby18-bdb
    # rm /var/db/pkg/pkgdb.db /usr/ports/INDEX-*.db
    # portupgrade -af

????? ??????????? ?? ????????, ??????????? ?? ?????????? ??????????? ??
??? ????????? ????? ??? ??????? ``freebsd-update``. ????? ??? ????????
?????? ??? ?? ???????????? ????????? ???? ????????? ??? ??????????
???????????:

.. code:: screen

    # freebsd-update install

?? ???????????????? ????????? ??? ?????? ``GENERIC``, ???? ????? ?
????????? ?????? ??? ?? ?????????????? ??? ?? ????????????? ???
????????????? ??????, ?? ?? ?????? ?????.

????????????? ?? ???????? ??? ???? ??? ?????? ??? FreeBSD. ? ??????????
???? ???????????.

.. raw:: html

   </div>

.. raw:: html

   <div class="sect2">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

24.2.4. ???????? ?????????? ??? ??????????
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

?? ????????? ????????? ``freebsd-update`` ?????? ?? ?????????????? ???
?? ???????? ??? ????????? ??? ?????????????? ??????? ??? FreeBSD ??
????? ?? ??? ?????? ??? ????? ???????????. ? ??????? ???? ????????? ???
????????? ??? ???????? ?????? ??? ???????????? ??????????, ???
??????????? ??? ??? ??????? ????????. ??? ?? ?????????? ?? ????????,
????? ??? ???????? ??????:

.. code:: screen

    # freebsd-update IDS >> outfile.ids

.. raw:: html

   <div class="warning" xmlns="">

?????????????:
~~~~~~~~~~~~~~

?? ??? ?? ????? ??? ??????? ????? IDS, ??? ?? ?????? ?? ????? ?????????
?? ???????? ???????????? ???? ?????????? ?????????? ???????? (intrusion
detection system) ???? ????? ??? ?????????? ??
`security/snort <http://www.freebsd.org/cgi/url.cgi?ports/security/snort/pkg-descr>`__.
????? ?? ``freebsd-update`` ?????????? ?? ???????? ??? ??? ?????,
??????? ????? ? ?????????? ?? ???? ????? ???????? ????. ?? ??? ?
?????????? ???? ?????? ?? ??????? ??????????????? ?? ???????
``kern.securelevel`` ??? ????????????? ?? ???????? ??? ???????
``freebsd-update`` ?? ??? ??????? ??????? ???? ??? ????????, ??? ?????
???????? ???? ?? ???? ?? ?????????? ?? ??????? ?? ?????? ????? ???
???????? ??????? ??????. ???????? ?? ??????????????? ??? ????? DVD ? ???
????????? ????? USB ??? ????????? ?? ?????? ?????????.

.. raw:: html

   </div>

?? ????? ???? ??? ?????????? ??? ?????????? ??? ?? ????????? ??? ?????
??? ?????? ??? ????? hash ??? ?????
`sha256(1) <http://www.FreeBSD.org/cgi/man.cgi?query=sha256&sektion=1>`__,
???? ??? ?? ????????????? ??? ??? ??? ?? ?????? ???????. ??????
????????? ??? ?????? ?????, ??? ??????????????? ??? ??????
``outfile.ids``. ???? ????? ?? ??????? ?? ??????? ???? ???????, ???
??????? ?? ?????? ??? ????????? ????? ??????????? ??? ????????.

?? ??????? ????? ????? ?????? ?????? ?????, ???? ????? ?????? ??
?????????????? ??? ?????. ??? ??????????, ??? ?? ????? ??? ????? ????
??? ??????? ??? ????????? ??? ???? ??? ???????? ???????, ????? ???
???????? ??????:

.. code:: screen

    # cat outfile.ids | awk '{ print $1 }' | more
    /etc/master.passwd
    /etc/motd
    /etc/passwd
    /etc/pf.conf

?? ???????? ????? ???? ??? ????? ??? ??????, ???????? ????? ?????
??????????? ??????. ?????? ??? ???? ?? ?????? ????? ??????????? ?? ?????
????????????. ??? ??????????, ?? ``/etc/passwd`` ???? ????????????,
????? ????? ????????? ??????? ??? ???????. ?? ??????? ???????????,
?????? ?? ???????? ??? ???? ??????, ???? ?.?. ????????? ?????? ?? ?????
????????? ???? ????? ?????????? ???? ??? ``freebsd-update``. ??? ??
?????????? ???????????? ?????? ? ??????????, ????????? ?? ???? ???????
``IDSIgnorePaths`` ??? ?????? ????????? ``/etc/freebsd-update.conf``.

????? ??? ??? ????? ??? ????????? ????????????, ?? ??????? ???? ??????
?? ?????????????? ??? ?? ????? ???? ??????????? ??????????? ???????????.

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   <div class="navfooter">

--------------

+------------------------------------------------------+--------------------------------------+-------------------------------------------------------------------+
| `????? <updating-upgrading.html>`__?                 | `???? <updating-upgrading.html>`__   | ?\ `??????? <updating-upgrading-portsnap.html>`__                 |
+------------------------------------------------------+--------------------------------------+-------------------------------------------------------------------+
| ???????? 24. ????????? ??? ?????????? ??? FreeBSD?   | `???? <index.html>`__                | ?24.3. Portsnap: ??? ???????? ?????????? ??? ???????? ??? Ports   |
+------------------------------------------------------+--------------------------------------+-------------------------------------------------------------------+

.. raw:: html

   </div>

???? ?? ???????, ??? ???? ???????, ?????? ?? ?????? ???
ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/

| ??? ????????? ??????? ?? ?? FreeBSD, ???????? ???
  `?????????? <http://www.FreeBSD.org/docs.html>`__ ???? ??
  ?????????????? ?? ??? <questions@FreeBSD.org\ >.
|  ??? ????????? ??????? ?? ???? ??? ??????????, ??????? e-mail ????
  <doc@FreeBSD.org\ >.
