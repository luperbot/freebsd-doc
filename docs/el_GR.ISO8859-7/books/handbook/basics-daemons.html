<?xml version="1.0" encoding="iso-8859-7" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-7" /><title>4.8. Δαίμονες, Σήματα, και Τερματισμός Διεργασιών</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Εγχειρίδιο του FreeBSD" /><link rel="up" href="basics.html" title="Κεφάλαιο 4. Βασικές Έννοιες στο UNIX(R)" /><link rel="prev" href="basics-processes.html" title="4.7. Διεργασίες" /><link rel="next" href="shells.html" title="4.9. Κελύφη" /><link rel="copyright" href="legalnotice.html" title="Νομική Σημείωση" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.8. Δαίμονες, Σήματα, και Τερματισμός Διεργασιών</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="basics-processes.html">Προηγ</a> </td><th width="60%" align="center">Κεφάλαιο 4. Βασικές Έννοιες στο <span class="trademark">UNIX</span>(R)</th><td width="20%" align="right"> <a accesskey="n" href="shells.html">Επόμενο</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-daemons"></a>4.8. Δαίμονες, Σήματα, και Τερματισμός Διεργασιών</h2></div></div></div><p>Όταν χρησιμοποιείτε ένα κειμενογράφο, είναι εύκολο να τον ελέγχετε,
      να φορτώνετε αρχεία, και οτιδήποτε άλλο.  Αυτό συμβαίνει διότι ο
      κειμενογράφος παρέχει αυτές τις δυνατότητες, και επίσης επειδή
      είναι προσαρτημένος σε ένα <em class="firstterm">τερματικό</em>.  Μερικά
      προγράμματα δεν είναι σχεδιασμένα να δουλεύουν με συνεχείς χειρισμούς
      από τον χρήστη, και επομένως αποσυνδέονται από το τερματικό με την
      πρώτη ευκαιρία.  Για παράδειγμα, ένας εξυπηρετητής web ξοδεύει όλο του
      το χρόνο στο να απαντά σε αιτήματα web, επομένως δεν χρειάζεται καμιά
      εισαγωγή δεδομένων από τον χρήστη.  Άλλο παραπλήσιο παράδειγμα
      εφαρμογής, είναι τα προγράμματα μεταφοράς μηνυμάτων ηλεκτρονικής
      αλληλογραφίας από μια τοποθεσία σε μιαν άλλη.</p><p>Ονομάζουμε αυτά τα προγράμματα
      <em class="firstterm">δαίμονες (daemons)</em>.  Οι δαίμονες ήταν χαρακτήρες
      της Ελληνικής μυθολογίας (ούτε καλοί - ούτε κακοί), ήταν απλά μικρά
      συνοδευτικά πνεύματα που έκαναν χρήσιμα πράγματα για την ανθρωπότητα,
      όπως ακριβώς και οι διακομιστές web και εξυπηρετητές ηλεκτρονικής
      αλληλογραφίας σήμερα κάνουν χρήσιμα πράγματα.  Αυτός είναι και ο λόγος
      για τον οποίο η μασκότ του BSD είναι εδώ και πολύ καιρό ο
      χαρούμενος δαίμονας με πάνινα σπορ παπούτσια και την τρίαινα.</p><p>Η ονομασία των προγραμμάτων που τρέχουν σαν δαίμονες συμβατικά
      τελειώνει με <span class="quote">«<span class="quote">d</span>»</span>.  Το <span class="application">BIND</span>
      είναι το Berkeley Internet Name Domain, αλλά το πραγματικό πρόγραμμα
      που τρέχει ονομάζεται <code class="command">named</code>, το πρόγραμμα του
      εξυπηρετητή web <span class="application">Apache</span> λέγεται
      <code class="command">httpd</code>, ο δαίμονας ελέγχου των εκτυπωτών
      γραμμής είναι ο <code class="command">lpd</code> και ούτω καθεξής.  Αυτή είναι
      απλά μια σύμβαση, όχι απόλυτος κανόνας, για παράδειγμα, ο κύριος
      δαίμονας ηλεκτρονικής αλληλογραφίας για την εφαρμογή
      <span class="application">Sendmail</span>
      ονομάζεται <code class="command">sendmail</code>, και όχι
      <code class="command">maild</code>, όπως θα ήταν αναμενόμενο.</p><p>Μερικές φορές θα χρειαστεί να επικοινωνείτε με τη διεργασία ενός
      δαίμονα.  Ένας τρόπος για να γίνει αυτό είναι στέλνοντας (όπως και σε
      κάθε εκτελέσιμη διεργασία) <em class="firstterm">σήματα (signals)</em>.
      Υπάρχουν διάφορα σήματα που μπορείτε να στείλετε - μερικά από
      αυτά έχουν μια συγκεκριμένη σημασία, ενώ άλλα ερμηνεύονται
      μέσα από την εφαρμογή, και επομένως για να ξέρουμε πως ερμηνεύονται τα
      σήματα θα πρέπει να διαβάσουμε την τεκμηρίωση της εφαρμογής.  Μπορείτε
      να στείλετε σήμα σε μια διεργασία μόνο αν σας ανήκει.  Αν στείλετε σήμα
      σε μια διεργασία που ανήκει σε κάποιον άλλο με <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> ή
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">kill</span>(2)</span></a>, δεν θα σας επιτραπεί.  Η μοναδική εξαίρεση σε αυτό, είναι
      ο χρήστης <code class="systemitem">root</code>, που μπορεί να στέλνει σήματα στις
      διεργασίες οποιουδήποτε άλλου χρήστη του συστήματος.</p><p>Το FreeBSD στέλνει επίσης σήματα σε εφαρμογές σε μερικές περιπτώσεις.
      Αν μία εφαρμογή είναι γραμμένη άσχημα, και προσπαθεί να προσπελάσει
      μνήμη που δεν της ανήκει, το FreeBSD στέλνει στη διεργασία το σήμα
      <em class="firstterm">Segmentation Violation</em>
      (<code class="literal">SIGSEGV</code>).  Αν μια εφαρμογή χρησιμοποίησε το σύστημα
      ειδοποίησης <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=alarm&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">alarm</span>(3)</span></a> για να ειδοποιηθεί μετά την πάροδο μιας
      χρονικής περιόδου τότε το FreeBSD θα στείλει το Alarm signal
      (<code class="literal">SIGALRM</code>), και ούτω καθ'εξής.</p><p>Δύο σήματα μπορούν να χρησιμοποιηθούν για να σταματήσουν μία
      διαδικασία, το <code class="literal">SIGTERM</code> και το
      <code class="literal">SIGKILL</code>.  Το <code class="literal">SIGTERM</code> είναι ο
      σωστός τρόπος για να σταματήσουμε μια διαδικασία.  Η διεργασία
      <span class="emphasis"><em>αντιλαμβάνεται</em></span> το σήμα, εκτελεί το σταμάτημα
      κλείνοντας όλα τα αρχεία αναφοράς (log files), που πιθανώς να είναι
      ανοιχτά, και γενικώς τελειώνει οτιδήποτε κάνει την συγκεκριμένη
      χρονική στιγμή πριν σταματήσει.  Σε μερικές περιπτώσεις η διεργασία
      μπορεί να αγνοήσει το <code class="literal">SIGTERM</code> εάν βρίσκεται στα
      μισά κάποιας εργασίας που δεν μπορεί να διακοπεί.</p><p>Το σήμα <code class="literal">SIGKILL</code> δεν μπορεί να αγνοηθεί από μία
      διεργασία.  Είναι σαν να λέει στη διεργασία,
      <span class="quote">«<span class="quote">Δεν με ενδιαφέρει τι κάνεις, σταμάτα τώρα αμέσως</span>»</span>.  Αν
      στείλετε το σήμα <code class="literal">SIGKILL</code> σε μια διαδικασία τότε το
      FreeBSD θα σταματήσει την διαδικασία άμεσα

      <a href="#ftn.idp79324368" class="footnote" id="idp79324368"><sup class="footnote">[4]</sup></a>.</p><p>Άλλα σήματα που πιθανώς να θέλετε να χρησιμοποιήσετε είναι τα
      <code class="literal">SIGHUP</code>, <code class="literal">SIGUSR1</code>, και
      <code class="literal">SIGUSR2</code>.  Αυτά είναι σήματα γενικής χρήσης, και
      όταν αποστέλλονται κάνουν διαφορετικά πράγματα ανάλογα με την
      εφαρμογή.</p><p>Ας υποθέσουμε πως αλλάξατε το αρχείο ρύθμισης του εξυπηρετητή
      διαδικτύου σας, και πως θα θέλατε να πείτε στον εξυπηρετητή να
      ξαναδιαβάσει τις ρυθμίσεις.  Θα μπορούσατε να σταματήσετε και να
      επανεκκινήσετε το <code class="command">httpd</code>, αλλά αυτό θα οδηγούσε σε
      μια χρονική περίοδο όπου ο εξυπηρετητής θα έμενε εκτός λειτουργίας,
      κάτι το οποίο μπορεί να είναι ανεπιθύμητο.  Οι περισσότεροι δαίμονες
      είναι σχεδιασμένοι να απαντούν σε σήματα <code class="literal">SIGHUP</code> για
      την εκ νέου ανάγνωση του αρχείου ρύθμισης τους.  Επομένως, αντί να
      σταματήσουμε και να επανεκκινήσουμε το <code class="command">httpd</code> θα
      μπορούσαμε να του στείλουμε το σήμα <code class="literal">SIGHUP</code>.  Επειδή
      δεν υπάρχει συγκεκριμένος τρόπος στην απάντηση αυτών των σημάτων, και
      διαφορετικοί δαίμονες έχουν διαφορετική συμπεριφορά, πρέπει να
      διαβάσετε πρώτα την τεκμηρίωση για τον συγκεκριμένο δαίμονα.</p><p>Τα σήματα στέλνονται χρησιμοποιώντας την εντολή <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a>, όπως
      υποδεικνύει το ακόλουθο παράδειγμα.</p><div class="procedure"><a id="idp79330384"></a><div class="procedure-title">Διαδικασία 4.1. Στέλνοντας Σήμα σε μία Διεργασία</div><p>Αυτό το παράδειγμα δείχνει πως να στείλετε σήμα στην
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>.  Το αρχείο ρύθμισης της <code class="command">inetd</code> είναι
	το <code class="filename">/etc/inetd.conf</code>, και η
	<code class="command">inetd</code> θα ξανα-διαβάσει αυτό το αρχείο ρύθμισης
	όταν θα σταλεί το σήμα <code class="literal">SIGHUP</code>.</p><ol class="procedure" type="1"><li class="step"><p>Βρείτε το PID της διεργασίας, της οποίας επιθυμείτε να στείλετε
	  το σήμα.  Ενεργήστε χρησιμοποιώντας τις εντολές <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> και
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=grep&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">grep</span>(1)</span></a>.  Η εντολή <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=grep&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">grep</span>(1)</span></a> χρησιμοποιείται για να ψάξει
	  στην έξοδο μιας εντολής, για τους αλφαριθμητικούς χαρακτήρες που
	  έχετε ορίσει.  Η εντολή εκτελείται από έναν απλό χρήστη, ενώ η
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> εκτελείται από τον <code class="systemitem">root</code>,
	  επομένως θα πρέπει να προσθέσετε την επιλογή <code class="option">ax</code>
	  στην <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ps -ax | grep inetd</code></strong>
  198  ??  IWs    0:00.00 inetd -wW</pre><p>Επομένως το PID της <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> είναι το 198.  Σε μερικές
	  περιπτώσεις μπορεί να εμφανίζεται στην έξοδο η εντολή
	  <code class="literal">grep inetd</code>.  Αυτό οφείλεται στον τρόπο με τον
	  οποίο η <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> ψάχνει την λίστα των ενεργών διεργασιών.</p></li><li class="step"><p>Χρησιμοποιήστε την <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> για να στείλετε το σήμα.
	  Επειδή η <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> τρέχει από τον <code class="systemitem">root</code>
	  θα πρέπει πρώτα να χρησιμοποιήσετε <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> για να γίνετε
	  πρώτα <code class="systemitem">root</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su</code></strong>
<code class="prompt">Password:</code>
<code class="prompt">#</code> <strong class="userinput"><code>/bin/kill -s HUP 198</code></strong></pre><p>Όπως και με τις περισσότερες εντολές στο <span class="trademark">UNIX</span>(R), η
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> δεν θα τυπώσει τίποτε στην έξοδο αν η εντολή είχε
	  επιτυχία.  Εάν στείλετε ένα σήμα σε μια διεργασία που δεν σας
	  ανήκει θα δείτε <span class="errorname">kill: <em class="replaceable"><code>PID</code></em>:
	  Operation not permitted</span>.  Αν πληκτρολογήσετε λάθος
	  το PID τότε ή θα στείλετε το σήμα σε λάθος διεργασία,κάτι που
	  μπορεί να είναι άσχημο, ή, αν είστε τυχερός, θα έχετε στείλει το
	  σήμα σε ένα PID που δεν χρησιμοποιείται τη συγκεκριμένη στιγμή, και
	  θα δείτε <span class="errorname">kill: <em class="replaceable"><code>PID</code></em>: No such
	  process</span>.</p><div xmlns="" class="note"><h3 class="admontitle">Γιατί να χρησιμοποιήσετε την εντολή
	    <code xmlns="http://www.w3.org/1999/xhtml" class="command">/bin/kill</code>;: </h3><p xmlns="http://www.w3.org/1999/xhtml">Πολλά κελύφη παρέχουν την εντολή <code class="command">kill</code> ως
	    ενσωματωμένη εντολή.  Αυτό σημαίνει πως το κέλυφος θα στείλει
	    το σήμα άμεσα, αντί να τρέξει το <code class="filename">/bin/kill</code>.
	    Αυτό μπορεί να είναι πολύ χρήσιμο, αλλά διαφορετικά κελύφη έχουν
	    διαφορετική σύνταξη για τον καθορισμό το όνομα του σήματος που
	    πρέπει να αποσταλεί.  Αντί λοιπόν να πρέπει να μάθουμε όλες τις
	    περιπτώσεις ,είναι ευκολότερο απλά να χρησιμοποιούμε την εντολή
	    <code class="command">/bin/kill ...</code>
	    άμεσα.</p></div></li></ol></div><p>Η αποστολή άλλων σημάτων μοιάζει πάρα πολύ, απλά αντικαταστήστε
      το <code class="literal">TERM</code> ή το <code class="literal">KILL</code> στη γραμμή
      εντολών με κάποιο άλλο.</p><div xmlns="" class="important"><h3 class="admontitle">Σημαντικό: </h3><p xmlns="http://www.w3.org/1999/xhtml">Η φόνευση τυχαίων διεργασιών στο σύστημα μπορεί να είναι κακή
	ιδέα.  Ιδιαίτερα, η <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>, με PID 1, είναι πολύ ειδική.  Η
	εκτέλεση της εντολής <code class="command">/bin/kill -s KILL 1</code> είναι
	ένας γρήγορος τρόπος να σβήσετε το σύστημα σας.
	<span class="emphasis"><em>Πάντα</em></span> να ελέγχετε δύο φορές τις παραμέτρους που
	χρησιμοποιείτε με την <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> <span class="emphasis"><em>πριν</em></span>
	πιέσετε <span class="keycap"><strong>Return</strong></span>.</p></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp79324368" class="footnote"><p><a href="#idp79324368" class="para"><sup class="para">[4] </sup></a>Αυτό δεν είναι απόλυτα αληθές - Υπάρχουν μερικά πράγματα
	  που δεν μπορούν να διακοπούν.  Για παράδειγμα, εάν η διεργασία
	  προσπαθεί να διαβάσει ένα αρχείο από άλλον υπολογιστή στο δίκτυο
	  και ξαφνικά αυτός ο άλλος υπολογιστής διακόψει για κάποιο λόγο
	  (λόγω κλεισίματος του pc ή λόγω βλάβης στο δίκτυο), τότε η διεργασία
	  ονομάζεται μη <span class="quote">«<span class="quote">διακόψιμη</span>»</span>.  Πιθανώς η διεργασία να
	  κάνει time out, συνήθως μετά από δύο λεπτά.  Μόλις συμβεί αυτό, θα
	  τερματιστεί άμεσα.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="basics-processes.html">Προηγ</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">Πάνω</a></td><td width="40%" align="right"> <a accesskey="n" href="shells.html">Επόμενο</a></td></tr><tr><td width="40%" align="left" valign="top">4.7. Διεργασίες </td><td width="20%" align="center"><a accesskey="h" href="index.html">Αρχή</a></td><td width="40%" align="right" valign="top"> 4.9. Κελύφη</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Αυτό το κείμενο, και άλλα κείμενα, μπορεί να βρεθεί στο
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Για ερωτήσεις σχετικά με το FreeBSD, διαβάστε την
    <a href="http://www.FreeBSD.org/docs.html">τεκμηρίωση</a> πριν να επικοινωνήσετε με την
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Για ερωτήσεις σχετικά με αυτή την τεκμηρίωση, στείλτε e-mail στην
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>