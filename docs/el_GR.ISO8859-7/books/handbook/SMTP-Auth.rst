==========================================
28.10. ??????????? ?????????????? ??? SMTP
==========================================

.. raw:: html

   <div class="navheader">

28.10. ??????????? ?????????????? ??? SMTP
`????? <SMTP-dialup.html>`__?
???????? 28. ??????????? ???????????
?\ `??????? <mail-agents.html>`__

--------------

.. raw:: html

   </div>

.. raw:: html

   <div class="sect1">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

28.10. ??????????? ?????????????? ??? SMTP
------------------------------------------

.. raw:: html

   </div>

.. raw:: html

   <div>

???????? ??? ??? James Gorham.

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

? ????? SMTP ?? ??????????? ?????????????? ???? ??????????? ????????????
???, ?????? ?? ??? ????????? ??? ????? ??? ?????. ?????? ?? ?????????
??? ????? ??????? ????????? ??? sendmail, ??? ???? ??? ?? ???????????
??? ????? ?? ?????????? ????? ??????? ??????? ??????????? (??? ?????
?????????? ???? ???????????? ???????) ?? ????????????? ??? ????
??????????? ???????????? ????? ??? ?????? ????????????? ???? ???? ???
???????????? ????????? / ????? ????????????.

.. raw:: html

   <div class="procedure">

#. ???????????? ??
   `security/cyrus-sasl2 <http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl2/pkg-descr>`__
   ??? ?? ??????? ??? Ports. ?? port ???? ??????????? ??? ????? ???
   ???????? ??? ???????? ?? ?????? ???? ??? ????????????. ??? ??
   ????????? ?? ??????????????? ??? ?????? ???????????????? ??? SMTP ???
   ???????? ???, ??????????? ??? ????? ?????????????? ? ???????
   ``LOGIN``.

#. ???? ??? ??????????? ???
   `security/cyrus-sasl2 <http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl2/pkg-descr>`__,
   ???????????? ?? ?????? ``/usr/local/lib/sasl2/Sendmail.conf`` (?
   ???????????? ?? ?? ??? ???????) ??? ????????? ??? ???????? ??????:

   .. code:: programlisting

       pwcheck_method: saslauthd

#. ???????????? ?????? ??
   `security/cyrus-sasl2-saslauthd <http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl2-saslauthd/pkg-descr>`__,
   ??? ????????? ??? ``/etc/rc.conf`` ??? ???????? ??????:

   .. code:: programlisting

       saslauthd_enable="YES"

   ?????, ????????? ?? ??????? saslauthd:

   .. code:: screen

       # /usr/local/etc/rc.d/saslauthd start

   ? ???????? ????? ??? ?? ?????????? ??? ?? sendmail ???? ?? ???????
   ??????????? ?????????????? ???? ??? ????? ????????? ???????
   ``passwd`` ??? FreeBSD ?????????? ???. ?? ???? ??? ????? ????????????
   ??? ??? ?????? ??????????? ???? ??? ??? ??????? ??????? ??? ????????
   ??? ???? ?????? ??? ?????????? ?? ?????????????? ??????????? ???
   SMTP. ??????????????? ?? ???? ????? ??? ???????, ???? ??? ?????? ???
   ???????, ??? ??? ??? ?? mail.

#. ?????????????? ???? ?? ``/etc/make.conf`` ??? ????????? ??? ?????????
   ???????:

   .. code:: programlisting

       SENDMAIL_CFLAGS=-I/usr/local/include/sasl -DSASL
       SENDMAIL_LDFLAGS=-L/usr/local/lib
       SENDMAIL_LDADD=-lsasl2

   ?? ??????? ?????, ???????? ??? sendmail ??? ?????????? ????????? ????
   ?? ???????? ????? ?? ??
   `cyrus-sasl2 <http://www.freebsd.org/cgi/url.cgi?ports/cyrus-sasl2/pkg-descr>`__
   ???? ?? ???????? ??? ?????????????. ??????????? ??? ?????
   ????????????? ?? ??????
   `cyrus-sasl2 <http://www.freebsd.org/cgi/url.cgi?ports/cyrus-sasl2/pkg-descr>`__
   ???? ?????????? ??? ????????????????? ??? sendmail.

#. ?????????????????? ?? sendmail ?????????? ??? ???????? ???????:

   .. code:: screen

       # cd /usr/src/lib/libsmutil
       # make cleandir && make obj && make
       # cd /usr/src/lib/libsm
       # make cleandir && make obj && make
       # cd /usr/src/usr.sbin/sendmail
       # make cleandir && make obj && make && make install

   ? ???????????? ??? sendmail ??? ?????? ?? ??????????? ??????????, ??
   ?? ``/usr/src`` ??? ???? ??????? ?? ?????? ????? ??? ?????? ????????
   ?? ???????????? ??????????? ??? ???????????.

#. ???? ??? ???????????? ??? ??????????????? ??? sendmail,
   ?????????????? ?? ?????? ``/etc/mail/freebsd.mc`` (? ????? ??????
   ?????????????? ?? ``.mc``. ?????? ???????????? ????????? ??
   ??????????????? ??? ????? ??? ???????
   `hostname(1) <http://www.FreeBSD.org/cgi/man.cgi?query=hostname&sektion=1>`__
   ?? ????? ??? ?? ?????? ``.mc`` ??? ?? ???????????? ??? ?????
   ????????). ????????? ?? ???? ??? ????????? ???????:

   .. code:: programlisting

       dnl set SASL options
       TRUST_AUTH_MECH(`GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN')dnl
       define(`confAUTH_MECHANISMS', `GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN')dnl

   ?? ???????? ????? ????????? ??? ???????????? ???????? ??? ???? ???
   ??????? ??? ?? sendmail, ??????????? ?? ???????????? ???? ???????. ??
   ?????? ?? ??????????????? ?????? ?????? ??????????? ??? ?? pwcheck,
   ????? ??? ?????????? ??? ??????????????.

#. ?????, ?????????
   `make(1) <http://www.FreeBSD.org/cgi/man.cgi?query=make&sektion=1>`__
   ??? ????????? ???? ???????? ``/etc/mail``. ?? ??? ????? ????, ??
   ?????????????? ?? ??? ??? ``.mc`` ?????? ??? ?? ???????????? ???
   ?????? ``.cf`` ?? ????? ``freebsd.cf`` (? ????????? ????? ??????
   ????? ??? ?????? ``.mc``). ?????????????? ?????? ??? ??????
   ``make install restart``, ? ????? ?? ?????????? ?? ?????? ???
   ``sendmail.cf``, ??? ?? ????????????? ????? ?? sendmail. ???
   ???????????? ???????????? ??????? ?? ???? ?? ??????????, ?? ?????? ??
   ????????? ?? ?????? ``/etc/mail/Makefile``.

.. raw:: html

   </div>

?? ??? ????? ????, ?? ?????? ?? ???????? ?? ?????? ?? ???????? ???????
??? ??? ????????? ??? ?????????????? ??? ???????? ??? ???? mail, ??? ??
???????? ??? ??????????? ??????. ??? ?? ???????????? ??????????? ??
??????????, ????? ??? ??????? ``LogLevel`` ??? sendmail ??? 13 ???
?????????????? ?? ``/var/log/maillog`` ??? ????? ????.

??? ???????????? ???????????, ??????????? ?? ????? ?? ?????? ???
sendmail ??? ????? ??? `??????????? ?????????????? ???
SMTP <http://www.sendmail.org/~ca/email/auth.html>`__.

.. raw:: html

   </div>

.. raw:: html

   <div class="navfooter">

--------------

+--------------------------------------------------------------------+-------------------------+---------------------------------------------------+
| `????? <SMTP-dialup.html>`__?                                      | `???? <mail.html>`__    | ?\ `??????? <mail-agents.html>`__                 |
+--------------------------------------------------------------------+-------------------------+---------------------------------------------------+
| 28.9. ??????????????? ?? Mail ???? ?????????? (Dialup) ?????????   | `???? <index.html>`__   | ?28.11. ??????????? ???????????? ??? ??? ??????   |
+--------------------------------------------------------------------+-------------------------+---------------------------------------------------+

.. raw:: html

   </div>

???? ?? ???????, ??? ???? ???????, ?????? ?? ?????? ???
ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/

| ??? ????????? ??????? ?? ?? FreeBSD, ???????? ???
  `?????????? <http://www.FreeBSD.org/docs.html>`__ ???? ??
  ?????????????? ?? ??? <questions@FreeBSD.org\ >.
|  ??? ????????? ??????? ?? ???? ??? ??????????, ??????? e-mail ????
  <doc@FreeBSD.org\ >.
