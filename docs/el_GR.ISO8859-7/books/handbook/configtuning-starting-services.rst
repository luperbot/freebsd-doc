==========================
12.5. E????????? ?????????
==========================

.. raw:: html

   <div class="navheader">

12.5. E????????? ?????????
`????? <configtuning-appconfig.html>`__?
???????? 12. ??????? ??? ??????????????
?\ `??????? <configtuning-cron.html>`__

--------------

.. raw:: html

   </div>

.. raw:: html

   <div class="sect1">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

12.5. E????????? ?????????
--------------------------

.. raw:: html

   </div>

.. raw:: html

   <div>

Contributed by Tom Rhodes.

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

?????? ??????? ????????? ?? ????????????? ????????? ??? ???????
????????????? ??? FreeBSD ??? ??? ??????? ??? Ports. ?? ?????? ??? ?????
??? ??????????? ?????? ?? ????? ?????????? ?? ????????? ?? ????????? ??
?????? ????? ???? ?? ?????? ?? ????????? ? ???????? ??? ???? ???
???????? ??? ??????????. ?????????, ???? ??
`mail/postfix <http://www.freebsd.org/cgi/url.cgi?ports/mail/postfix/pkg-descr>`__
? ??
`www/apache13 <http://www.freebsd.org/cgi/url.cgi?ports/www/apache13/pkg-descr>`__
????? ???? ??? ??? ?? ????? ?????? ?????????? ??? ?????? ?? ???????????
?? ?????????? ???? ??? ???????? ??? ??????????. ?? ????? ???? ??
???????? ??? ?????????? ??????????? ??? ??? ???????? ??????????
??????????? ??? ??????? ?????????????.

??? FreeBSD, ?? ???????????? ???????????? ?????????, ???? ??
`cron(8) <http://www.FreeBSD.org/cgi/man.cgi?query=cron&sektion=8>`__,
????? ??????????? ???? ??? ?? ??????? ????????? ??? ??????????. ??
??????? ???? ?????? ?? ????????? ??????? ?? FreeBSD ? ??? ?????? ???
????????????; ??????, ? ??? ????????? ????? ??? ?????? ?? ?????????
????? ??? ?? ????????? ????????? ???? ??????? ?? ?????????? ???? ??? ???
???? ??????? ?????????.

???? ??? ?????? ??? ``rc.d``, ?? ????????? ????????? ?? ???????????? ???
???? ??????? ????????? ???? ???? ???????? ``/usr/local/etc/rc.d`` ?
?????? ???????? ?? ????????? ??? ?? ??????? ????????? ??? ??????????.
???? ?? ??????? ????????? ?? ??????????? ???? ?? ????????? ??????
????????? ??? ??????????.

??? ?????? ??????? ??????? ????? ???????????? ?? ???????????? ?? ?????
???? ????????? ?? ?? ??? ????, ????????? ??????? ??? ?????? ???????????
????? ???????? ??? ??????? ?? ??????????? ???? ???? ??????????????
????????. ?? ?????? ???????? ??????? ??? ??????? ?????????? ??? ?? ?? ?
??? ? ``rc.d`` ??????????????. ???????????? ??? FreeBSD?5.1 ?? ?????
???? ????????? ???????????????? ??? ?????? ?? ???? ??? ??????????? ???
???? ???? ??????? ?? ????? ???????.

??? ???? ??????? ?????? ?? ????? ????????? ????????? ??????????, ???
???????????? ????? ????? ?? ?????????? ????? ??????????? ??? ??????? ???
FreeBSD. ???? ??????? ?????? ?? ???? ??? ``.sh`` ???????? ????????????
??? ????? ??? ??? ???? ??????? ?????? ?? ????? ?????????? ??? ??
???????. ?? ??????? ?????? ?? ?????????? ??????????????? ??? ``chmod``
?????? ??? ??????????? ??? ????? ``755``. ???? ?????? ?? ???????,
???????????, ??? ??????? ``start`` ??? ??? ??????? ``stop`` ??? ???
????????.

?? ??? ???? ??????? ????????? ?????????? ?? ??????? ?? ?? ????????:

.. code:: programlisting

    #!/bin/sh
    echo -n ' utility'

    case "$1" in
    start)
            /usr/local/bin/utility
            ;;
    stop)
            kill -9 `cat /var/run/utility.pid`
            ;;
    *)
            echo "Usage: `basename $0` {start|stop}" >&2
            exit 64
            ;;
    esac

    exit 0

?? ??????? ???? ??????? ??? ``stop`` ??? ??? ``start`` ??????? ??? ???
???????? ???? ??? ?????????? ??? ?????????? ??? ``utility``.

?????? ?? ????????? ???????????? ????????:

.. code:: screen

    # /usr/local/etc/rc.d/utility.sh start

?????? ??? ??? ???????? ???? ?? ????????? ?? ????????? ??? ??????? ???
``rc.conf``, ?????? ?????????? ??? ??? ??? port ?? ??????????? ??? ??
??????? ???? ??? ???????. ???????? ??? ?????? ????? ??? ???????????? ???
???????????? ??????????? ???? ???? ???????????? ????????. ???????
????????? ??? ??????? ????????????? ???????? ??????? ????????? ?? ?????
?????????? ???? ???????? ?? ?????????????? ?? ?? ``rc.d``, ?????? ????,
???? ?? ????????? ??? ??????? ?????.

.. raw:: html

   <div class="sect2">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

12.5.1. ?????????? ??????? ?????????
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

????? ?? FreeBSD ???????? ?? ``rc.d``, ? ??????? ??? ????????? ???
????????? ???? ????? ??????????, ??? ??? ??????? ?? ???????????.
??????????????? ?????? ??????? ???? ???? ????????
`rc.d <configtuning-rcd.html>`__, ?? ????????? ??????? ????? ?? ????????
?????? ??? ????????????? ????????? ??? ?????????? ??? DNS, ?????? ??
????????? ? ???????? ???????? ?????????? ???? ??? ?? ``rc.conf`` ????
???? ??? ??? ?????o???? ?????????? ??? ?? ??????? ?????????, ????. ???
?????? ??????? ?????? ?? ??????? ?? ?? ????????:

.. code:: programlisting

    #!/bin/sh
    #
    # PROVIDE: utility
    # REQUIRE: DAEMON
    # KEYWORD: shutdown

    . /etc/rc.subr

    name=utility
    rcvar=utility_enable

    command="/usr/local/sbin/utility"

    load_rc_config $name

    #
    # DO NOT CHANGE THESE DEFAULT VALUES HERE
    # SET THEM IN THE /etc/rc.conf FILE
    #
    utility_enable=${utility_enable-"NO"}
    pidfile=${utility_pidfile-"/var/run/utility.pid"}

    run_rc_command "$1"

?? ??????? ???? ?? ??????????? ??? ?? ????????? utility ?? ?????????
???? ??? ??? ``daemon`` ????????. ?? ??????????? ???????? ???? ????? ???
??? ??????? ??? ??? ????????? ??? PID, ? ??? ??????? ??? ID ???
??????????.

? ???????? ?????? ????? ?? ???? ??? ???????? ?????? ???????????? ???
``/etc/rc.conf``:

.. code:: programlisting

    utility_enable="YES"

? ???? ????? ?????? ????????? ???????? ??? ?????????? ???????? ???
?????????? ??? ??????? ???????, ?? ????????? ?? ??? ?????????????
??????????? ??????????? ??? ?? ``/etc/rc.subr``, ?? ??????????? ?? ??
????????? ?????????
`rcorder(8) <http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&sektion=8>`__
??? ???????? ??? ?????????? ??????? ???? ??? ``rc.conf`` ???????.

.. raw:: html

   </div>

.. raw:: html

   <div class="sect2">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

12.5.2. ??????????????? ????????? ??? ??? ???????? ?????????
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

????? ?????????, ???? ? ???????? ??? ????????? POP3, IMAP, ????. ???????
?? ?????????? ??????????????? ??
`inetd(8) <http://www.FreeBSD.org/cgi/man.cgi?query=inetd&sektion=8>`__.
???? ??????? ??? ??????????? ??? ?????????? ???????????? ????????? ???
??? Ports ??????? ??? ??? ?????? ????????? ???????????? ??? ??????
``/etc/inetd.conf``, ? ?????????????????? ??? ??? ??? ??? ??????????
??????? ?????????. ??????????? ?? ?? inetd ??? ??? ????????? ???
???????????? ????????? ??? ????? `inetd <network-inetd.html>`__.

?? ?????? ???????????, ????? ?????? ?? ?????????????? ? ????????
`cron(8) <http://www.FreeBSD.org/cgi/man.cgi?query=cron&sektion=8>`__
??? ??? ???????? ??? ????????? ??? ??????????. ? ?????????? ???? ????
???? ?????? ?????????????? ????? ?? ``cron`` ?????? ??? ?????????? ???
?????????? ??? ``crontab`` ???????. ???? ????????? ????? ??????????
??????? ?? ???????? ??? ?? ?????????????? ??????? ?????????.

?? ????????? ????????? ``cron`` ??????? ??? ???????? ??????????????, ??
``@reboot``, ?? ????? ?????? ?? ?????????????? ???? ???? ??? ????????
???????. ???? ?? ????? ??? ??????? ?? ?????? ???? ??
`cron(8) <http://www.FreeBSD.org/cgi/man.cgi?query=cron&sektion=8>`__
?????????, ??????? ???? ??? ???????? ??? ??????????.

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   <div class="navfooter">

--------------

+--------------------------------------------+---------------------------------+--------------------------------------------+
| `????? <configtuning-appconfig.html>`__?   | `???? <config-tuning.html>`__   | ?\ `??????? <configtuning-cron.html>`__    |
+--------------------------------------------+---------------------------------+--------------------------------------------+
| 12.4. ??????? ??????????                   | `???? <index.html>`__           | ?12.6. ??????????? ?? ????????? ``cron``   |
+--------------------------------------------+---------------------------------+--------------------------------------------+

.. raw:: html

   </div>

???? ?? ???????, ??? ???? ???????, ?????? ?? ?????? ???
ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/

| ??? ????????? ??????? ?? ?? FreeBSD, ???????? ???
  `?????????? <http://www.FreeBSD.org/docs.html>`__ ???? ??
  ?????????????? ?? ??? <questions@FreeBSD.org\ >.
|  ??? ????????? ??????? ?? ???? ??? ??????????, ??????? e-mail ????
  <doc@FreeBSD.org\ >.
