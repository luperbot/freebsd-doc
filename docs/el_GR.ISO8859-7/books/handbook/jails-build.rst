========================================
16.4. ????????????? ??? ?????????? Jails
========================================

.. raw:: html

   <div class="navheader">

16.4. ????????????? ??? ?????????? Jails
`????? <jails-intro.html>`__?
???????? 16. Jails
?\ `??????? <jails-tuning.html>`__

--------------

.. raw:: html

   </div>

.. raw:: html

   <div class="sect1">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

16.4. ????????????? ??? ?????????? Jails
----------------------------------------

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

??????? ???????????? ?????????? ??????????????? ?? jails ?? ???
????????: ?? ?complete (?????)? jails, ?? ????? ????????? ??? ??????????
??????? FreeBSD, ??? ?? ?service? jails, ?? ????? ???????????????? ???
??? ???????? ? ????????, ??? ??????? ?????????? ?? ?????? ????????.
????? ????? ???? ???????? ??????????? ??? ??? ?????? ??? ??????????
??????????? ???? jail. ? ?????? manual ???
`jail(8) <http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=8>`__
???????? ?????????????? ??????????? ??? ?? ?????????? ??????????? ????
jail:

.. code:: screen

    # setenv D /here/is/the/jail
    # mkdir -p $D 
    # cd /usr/src
    # make buildworld 
    # make installworld DESTDIR=$D 
    # make distribution DESTDIR=$D 
    # mount -t devfs devfs $D/dev 

.. raw:: html

   <div class="calloutlist">

+--------------------------------------+--------------------------------------+
| `|1| <#jailpath>`__                  | ? ????????? ?????? ??? ?? ?????????? |
|                                      | ????? ?? ??? ??????? ???? ?????      |
|                                      | (?????????) ??? ?? jail ???. ???? ?? |
|                                      | ?????????? ???????????? ?? ??????    |
|                                      | ??? jail ??? ????? ?? ??????? ???.   |
|                                      | ??? ???? ???? ????? ??               |
|                                      | ``/usr/jail/jailname``, ????         |
|                                      | *``jailname``* ?? hostname ?? ??     |
|                                      | ????? ?? ????????????? ?? jail. ??   |
|                                      | ??????? ??????? ``/usr/`` ????       |
|                                      | ??????? ?????? ???? ??? ?? ???????   |
|                                      | ??????? ??? jail, ?? ?????, ??? ???  |
|                                      | ?complete? jail ????? ??????????     |
|                                      | ???? ?????? ???? ??????? ??? ??????? |
|                                      | ?????????? ??? ??????????????        |
|                                      | ???????????? ??? FreeBSD.            |
+--------------------------------------+--------------------------------------+
| `|2| <#jailbuildworld>`__            | ?? ???? ???? ??? ?????????? ?? ????? |
|                                      | ????????????? ??? ???????? ?? ?????? |
|                                      | ??????? ??????????????? ??? ??????   |
|                                      | ``make world`` ?                     |
|                                      | ``make buildworld``. ???????? ?????  |
|                                      | ?? ????????????? ?? ??????? ???????  |
|                                      | ??? ??? ??? jail.                    |
+--------------------------------------+--------------------------------------+
| `|3| <#jailinstallworld>`__          | ? ?????? ???? ?? ??????????? ???     |
|                                      | ???????? ??? ????????? ??? ?? jail   |
|                                      | ?? ??? ?? ?????????? ??????,         |
|                                      | ???????????, ??????? ???????? ???.   |
+--------------------------------------+--------------------------------------+
| `|4| <#jaildistrib>`__               | ?? ``distribution`` target ??? make  |
|                                      | ????????? ??? ?? ?????? ?????????    |
|                                      | ??? ???????????. ?? ???? ?????,      |
|                                      | ????????? ???? ?????? ??? ??         |
|                                      | ``/usr/src/etc/`` ???? ????????      |
|                                      | ``/etc`` ??? ????????????? jail:     |
|                                      | ``$D/etc/``.                         |
+--------------------------------------+--------------------------------------+
| `|5| <#jaildevfs>`__                 | ?? ?????????? ?? ???????????? ??     |
|                                      | `devfs(8) <http://www.FreeBSD.org/cg |
|                                      | i/man.cgi?query=devfs&sektion=8>`__  |
|                                      | ??? ?????????? ??? jail. ??? ???     |
|                                      | ???? ????, ????, ? ?????? ???? ??    |
|                                      | ????????? ??????????? ???????? ??    |
|                                      | ??????????? ??? ???????, ???????? ?? |
|                                      | ??? ????? ??? ?????????. ????? ????  |
|                                      | ????????? ?? ????????? ? ????????    |
|                                      | ???? ???????? ???? ?? ??? jail,      |
|                                      | ????? ??????????? ????????? ??????   |
|                                      | ?? ?????????? ?? ??????? ???????? ?? |
|                                      | ????? ??????? ?????????? ???? ???    |
|                                      | jail. ? ??????? ???                  |
|                                      | `devfs(8) <http://www.FreeBSD.org/cg |
|                                      | i/man.cgi?query=devfs&sektion=8>`__  |
|                                      | ??????? ???? ???? ??????? ??????? ?? |
|                                      | ?????? ????????????? ???? ???????    |
|                                      | manual ???                           |
|                                      | `devfs(8) <http://www.FreeBSD.org/cg |
|                                      | i/man.cgi?query=devfs&sektion=8>`__  |
|                                      | ??? ???                              |
|                                      | `devfs.conf(5) <http://www.FreeBSD.o |
|                                      | rg/cgi/man.cgi?query=devfs.conf&sekt |
|                                      | ion=5>`__.                           |
+--------------------------------------+--------------------------------------+

.. raw:: html

   </div>

??? ??? ?????? ??? ???? ???????????? ??? jail, ?????? ?? ????????? ?? ??
????? ??? ???????
`jail(8) <http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=8>`__. ?
`jail(8) <http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=8>`__
??????? ???????? ???????????? ??????????? ?? ?????? ????????????? ???
`??????16.3.1, ??? ????? ??? Jail? <jails-intro.html#jails-what>`__.
???????? ?? ?????? ??? ????? ???????????, ?.?., ??? ?? ?????????? ???
????????? ??? ?????????? ??? jail ?? ??? ?????? ???? ?????????????
??????. ? ?????????? ``command`` ????????? ??? ??? ???? ??? jail. ???
??? *???????? ???????*, ?? ``/etc/rc`` ????? ??? ???? ???????, ??? ???
???? ????? ?? ???????????? ??? ?????????? ????????? ???? ???????????
?????????? FreeBSD. ??? ??? *service* jail, ? ?????????? ????????? ???
??? ???????? ? ??? ???????? ??? ?? ?????? ???? ??? jail.

?? jails ??????? ???????? ???? ??? ???????? ??? ? ?????????? ``rc`` ???
FreeBSD ??????? ???? ?????? ????? ??? ?? ????? ???? ??????.

.. raw:: html

   <div class="procedure">

#. ? ????? ?? ?? jails ??? ?????? ?? ???????? ???? ??? ???????? ??
   ?????? ?? ?????????? ??? ??????
   `rc.conf(5) <http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&sektion=5>`__:

   .. code:: programlisting

       jail_enable="YES"   # Set to NO to disable starting of any jails
       jail_list="www"     # Space separated list of names of jails

   .. raw:: html

      <div class="note" xmlns="">

   ????????:
   ~~~~~~~~~

   ?? ????? ??? ???? ???? jail ??? ????? ``jail_list`` ??????????? ??
   ???????? ???? ??????????????? ??????????.

   .. raw:: html

      </div>

#. ??? ???? jail ??? ??????? ??? ``jail_list``, ?? ?????? ?? ?????????
   ??? ????? ??? ????????? ???
   `rc.conf(5) <http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&sektion=5>`__,
   ?? ?????? ?? ?? ???????????:

   .. code:: programlisting

       jail_www_rootdir="/usr/jail/www"     # jail's root directory
       jail_www_hostname="www.example.org"  # jail's hostname
       jail_www_ip="192.168.0.10"           # jail's IP address
       jail_www_devfs_enable="YES"          # mount devfs in the jail
       jail_www_devfs_ruleset="www_ruleset" # devfs ruleset to apply to jail

   ? ????????????? ???????? ??? jail ???? ???
   `rc.conf(5) <http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&sektion=5>`__,
   ?? ????????? ?? script ??? jail ``/etc/rc``, ?? ????? ???????? ??? ??
   jail ????? ??? ???????????? ???????? ???????. ??? service jails, ?
   ????????????? ???????? ?????? ?? ???????, ????????? ????????? ???
   ??????? ``jail_jailname``\ \_exec\_start.

   .. raw:: html

      <div class="note" xmlns="">

   ????????:
   ~~~~~~~~~

   ??? ????? ????? ??? ?????????? ????????, ????? ??
   `rc.conf(5) <http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&sektion=5>`__.

   .. raw:: html

      </div>

.. raw:: html

   </div>

?? script ``/etc/rc.d/jail`` ?????? ?? ?????????????? ??? ?? ????????? ?
?? ?????????? ?????? jail ???????????. ?????? ???? ?? ??????? ?
?????????? ?????????? ??? ``rc.conf``:

.. code:: screen

    # /etc/rc.d/jail start www
    # /etc/rc.d/jail stop www

??? ??? ??? ??? ??????? ??????? ??????? ?????? ?????? ??? ?? ???????????
??????
`jail(8) <http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=8>`__.
???? ?????????, ????? ?? ??????? ??? ???????????????? ??????? ??? ??
??????????? ?? ???????? ??? ???????, ??? ??????? ?? ??????????????? ????
??? ?????????? ???? jail. ? ????????? ?????? ??? ?? ??????????? ??? jail
????? ?? ??? ???????? ??? ????????? ??????? ???? ??? ?? ???? ?? jail ?
?? ????? ??? ?????????? ????????????
`jexec(8) <http://www.FreeBSD.org/cgi/man.cgi?query=jexec&sektion=8>`__
??? ??? ????:

.. code:: screen

    # sh /etc/rc.shutdown

???????????? ??????????? ??????? ?? ???? ?? ?????????? ???????? ??
?????? ??? ?????? ???????? ???
`jail(8) <http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=8>`__

.. raw:: html

   </div>

.. raw:: html

   <div class="navfooter">

--------------

+---------------------------------+-------------------------+--------------------------------------------+
| `????? <jails-intro.html>`__?   | `???? <jails.html>`__   | ?\ `??????? <jails-tuning.html>`__         |
+---------------------------------+-------------------------+--------------------------------------------+
| 16.3. ?????????                 | `???? <index.html>`__   | ?16.5. ?????????? ??????? ??? ??????????   |
+---------------------------------+-------------------------+--------------------------------------------+

.. raw:: html

   </div>

???? ?? ???????, ??? ???? ???????, ?????? ?? ?????? ???
ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/

| ??? ????????? ??????? ?? ?? FreeBSD, ???????? ???
  `?????????? <http://www.FreeBSD.org/docs.html>`__ ???? ??
  ?????????????? ?? ??? <questions@FreeBSD.org\ >.
|  ??? ????????? ??????? ?? ???? ??? ??????????, ??????? e-mail ????
  <doc@FreeBSD.org\ >.

.. |1| image:: ./imagelib/callouts/1.png
.. |2| image:: ./imagelib/callouts/2.png
.. |3| image:: ./imagelib/callouts/3.png
.. |4| image:: ./imagelib/callouts/4.png
.. |5| image:: ./imagelib/callouts/5.png
