==============================
20.8. UFS Journaling ???? GEOM
==============================

.. raw:: html

   <div class="navheader">

20.8. UFS Journaling ???? GEOM
`????? <geom-glabel.html>`__?
???????? 20. GEOM: ?????????? ?????????? ??????
?\ `??????? <filesystems.html>`__

--------------

.. raw:: html

   </div>

.. raw:: html

   <div class="sect1">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

20.8. UFS Journaling ???? GEOM
------------------------------

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

???? ?????? 7.0 ??? FreeBSD ??????????? ??? ????? ???? ? ??? (??? ???
??????? ???????????) ?????????? ??? ????? ??????????? (journal) ???
??????? ???????. ? ????????? ????????? ???? ??? ????????????? GEOM ???
?????? ?? ????????? ?????? ???? ??? ?????????? ????????????
`gjournal(8) <http://www.FreeBSD.org/cgi/man.cgi?query=gjournal&sektion=8>`__.

?? ????? ?? journaling; ?? journaling ?????????? ?? ??? ??????
?????????? (log, ??????????, ? ????? journal) ??? ?????????? ???
?????????? ???????. ?????????? ?????????? ????? ?? ??????? ???
??????????? ??? ??? ????? ?????????? ???????? ??? ?????. ????, ??? log
????????????? ?? ??????? ??? ????-???????? (meta-data) ??? ??? ???? ??
??????, ???? ????? ? ?????? (????????) ?????????? ???? ??? ?????. ??
?????? ?????????? ?????? ???????? ?? ?????????????????? ???? ? ?????????
?? ????? ??? ??? ????, ?????????????? ?? ???? ??? ????? ??? ?? ???????
??????? ?? ?????????? ?? ??????? ?????????.

????????? ?????????? ??? ??? ????? ?????? ?????????? ??? ???????
????????? ??? ?????????? ??? ??????? ???????. ?? ???????? ?? ?? Soft
Updates ?? ????? ?????????? ??? ??????????? ??? ????? ??????? ???
????-?????????, ??? ??? ???????????? (Snapshots) ?? ????? ????? ???????
??? ?????????? ??????? ?? ??? ???????? ??????, ?? log ???????????? ??
???? ??? ???? ????????? ?????? ??? ???? ?? ?????, ??? ?? ???????
??????????? ?????? ?? ???????????? ?? ??????? ??????????? ?????.

?? ???????? ?? ??????????? journaling ?? ???? ????????? ???????, ?
??????? ``gjournal`` ????????? ?? blocks, ??? ??? ??????????? ?? ?????
??? ?????????? ???????, ???? ???? ?? ???????? ??? GEOM.

??? ???????????? ??? ??????????? ``gjournal``, ?? ?????? ?? ??????? ?
???????? ??????? ???? ?????? ??? FreeBSD. ? ??????? ???? ??????? ???
?????????? ???? ?????? 7.0 ??? ???? ??? ???????? ???????? ??? FreeBSD.

.. code:: programlisting

    options  UFS_GJOURNAL

?? ?????????? ?? ???????????? ????? ?? journaling ???? ??? ????????, ??
?????? ?????? ?? ?????????? ???????? ??? ?? ??????? ??????
``geom_journal.ko``. ??? ?? ????? ????, ????????? ??? ???????? ??????
??? ?????? ``/boot/loader.conf``:

.. code:: programlisting

    geom_journal_load="YES"

???????????, ? ?????????? ???? ?????? ?? ??????????? ?? ???
????????????? ??????, ?? ??? ???????? ??? ???????? ??????? ???
?????????? ?????? ?????????:

.. code:: programlisting

    options   GEOM_JOURNAL

? ?????????? journal ?? ??? ???????? ??????? ???????, ?????? ???? ??
????? ?? ?? ???????? ??????, ????????? ??? ? ??????? ``da4`` ????? ????
???? ?????? SCSI:

.. code:: screen

    # gjournal load
    # gjournal label /dev/da4

??? ?????? ???? ?? ??????? ??? ??????? ``/dev/da4`` ????? ??? ???
??????? ``/dev/da4.journal``. ??? ??????? ???? ???????? ???? ??
????????????? ??????? ???????:

.. code:: screen

    # newfs -O 2 -J /dev/da4.journal

? ???????? ?????? ?? ???????????? ??? ??????? ??????? UFS2 ??? ???????
``/dev/da4.journal``, ? ????? ???? ??? ?????????? ??? journaling.

???????? ?? ??????????????? ??? ?????? ``mount`` ??? ?? ???????????? ???
??????? ??? ????????? ?????? ???????????, ???? ???????? ????????:

.. code:: screen

    # mount /dev/da4.journal /mnt

.. raw:: html

   <div class="note" xmlns="">

????????:
~~~~~~~~~

???? ????????? ??????? slice, ?? ???????????? ??? journal ??? ????
????????? slice. ??? ??????????, ?? ???????? ?? slices ``ad4s1`` ???
``ad4s2`` ???? ?? ``gjournal`` ?? ???????????? ??? ????????
``ad4s1.journal`` ??? ``ad4s2.journal``.

.. raw:: html

   </div>

??? ???????? ???????, ???? ????? ????????? ? ?????? ??? journal ??
??????????? ?????. ??? ??? ??????????? ?????, ? ???????? ??????????? (?
??????? ?????? ??? ?? ???????? ?? journal) ?????? ?? ??????? ??
?????????? ???? ??????, ?????? ???? ?? ??????? ?????? ???? ????? ??
????????????? ?? journaling. ???????? ?????? ?? ?????????????? ??
journaling ?? ????????? ????????? ??????? ??????????????? ??? ??????
``tunefs``. ??????, ?? ?????? ?? ????????? ????????? ????????? ???
??????? ???, ???? ???????????? ?? ?????? ??????? ?? ??? ??????? ???????
???????. ???? ???????????? ???????????, ? ``tunefs`` ?? ???????? ?? ???
???????? ?? ???????????? ?? journal, ???? ???? ??? ??? ??????????? ???
??????? ????????? ??? ?????? ?? ???????? ??? ???? ????? ??? ``tunefs``.

????? ?????? ??????? ?? ?????????????? journaling ???? ????? ?????????
???? ?????????? FreeBSD. ???????? ?? ????? `????????? ??? UFS Journaling
?? ??? Desktop
?????????? <../../../../doc/el_GR.ISO8859-7/articles/gjournal-desktop>`__
??? ??????????? ???????.

.. raw:: html

   </div>

.. raw:: html

   <div class="navfooter">

--------------

+---------------------------------------------------------------+-------------------------+-----------------------------------------------+
| `????? <geom-glabel.html>`__?                                 | `???? <GEOM.html>`__    | ?\ `??????? <filesystems.html>`__             |
+---------------------------------------------------------------+-------------------------+-----------------------------------------------+
| 20.7. ????????????? ???????? (Labels) ???? ???????? ???????   | `???? <index.html>`__   | ????????? 21. ?????????? ?????????? ???????   |
+---------------------------------------------------------------+-------------------------+-----------------------------------------------+

.. raw:: html

   </div>

???? ?? ???????, ??? ???? ???????, ?????? ?? ?????? ???
ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/

| ??? ????????? ??????? ?? ?? FreeBSD, ???????? ???
  `?????????? <http://www.FreeBSD.org/docs.html>`__ ???? ??
  ?????????????? ?? ??? <questions@FreeBSD.org\ >.
|  ??? ????????? ??????? ?? ???? ??? ??????????, ??????? e-mail ????
  <doc@FreeBSD.org\ >.
