==========================================
27.6. ??????????????? PPP ???? ATM (PPPoA)
==========================================

.. raw:: html

   <div class="navheader">

27.6. ??????????????? PPP ???? ATM (PPPoA)
`????? <pppoe.html>`__?
???????? 27. PPP ??? SLIP
?\ `??????? <slip.html>`__

--------------

.. raw:: html

   </div>

.. raw:: html

   <div class="sect1">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

27.6. ??????????????? PPP ???? ATM (PPPoA)
------------------------------------------

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

? ??????? ??? ?????????, ?????????? ??? ?? ????????? ?? PPP ???
?????????? ???? ATM (PPPoA). ?? PPPoA ????? ??? ????????? ??????? ?????
???????? ????????? DSL ???? ??????.

.. raw:: html

   <div class="sect2">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

27.6.1. ??????????????? PPPoA ?? ?? Alcatel SpeedTouchTM USB
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

? ?????????? PPPooA ??? ???? ?? ???????, ????????? ?? port ??? FreeBSD,
????? ?? firmware ??? ???????? ?????????? ??? ??? ????? `Alcatel's
license agreement <http://www.speedtouchdsl.com/disclaimer_lx.htm>`__
??? ??? ?????? ?? ?????????? ???????? ?? ?? ?????? ??????? ??? FreeBSD.

??? ?? ????????????? ?? ?????????, ???? ?????????????? ??? `??????? ???
Ports <ports.html>`__. ???????????? ?? port
`net/pppoa <http://www.freebsd.org/cgi/url.cgi?ports/net/pppoa/pkg-descr>`__
??? ??????????? ??? ??????? ??? ??????????????? ?? ????.

???? ?????? ???????? USB, ?? Alcatel SpeedTouchTM ?????????? ??
????????? ?? firmware ??? ??? ??? ?????????? ??? ????? ????? ?????????,
??????????? ?? ???????????? ?????. ? ?????????? ???? ?????? ??
??????????????? ??? FreeBSD, ???? ? ???????? ?? ??????? ???? ???? ???
????????? ? ??????? ??? ???? USB. ???????? ?? ?????????? ??? ????????
??????????? ??? ?????? ``/etc/usbd.conf`` ??? ?? ?????????????? ???
???????? ???????? ??? firmware. ?? ?????? ?? ?????????????? ???? ??
?????? ?? ??????? ``root``.

.. code:: programlisting

    device "Alcatel SpeedTouch USB"
        devname "ugen[0-9]+"
        vendor 0x06b9
        product 0x4061
        attach "/usr/local/sbin/modem_run -f /usr/local/libdata/mgmt.o"

??? ?? ?????????????? ?? usbd, ?? ??????? USB, ????????? ??? ????????
?????? ??? ?????? ``/etc/rc.conf``:

.. code:: programlisting

    usbd_enable="YES"

?????? ?????? ?? ????????? ?? ppp ???? ?? ??????? ???????? ????? ????
??? ???????? ??? ??????????. ??? ?? ????? ????, ????????? ??? ????????
??????? ??? ``/etc/rc.conf``. ?? ?????? ??? ???? ?? ?????????? ??
?????????? ???? ?? ``root``.

.. code:: programlisting

    ppp_enable="YES"
    ppp_mode="ddial"
    ppp_profile="adsl"

??? ?? ???????????? ????? ?? ????????, ?? ?????? ?? ????? ??????????????
?? ????????? ??? ??????? ``ppp.conf`` ?? ????? ????????? ?? ?? port
`net/pppoa <http://www.freebsd.org/cgi/url.cgi?ports/net/pppoa/pkg-descr>`__.

.. raw:: html

   </div>

.. raw:: html

   <div class="sect2">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

27.6.2. ??????????????? ?? mpd
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

???????? ?? ??????????????? ?? mpd ??? ?? ?????????? ?? ??? ??????
?????????, ??? ?????????? ????????? PPTP. ???????? ?? ?????? ?? mpd ????
??????? ??? Ports, ???
`net/mpd <http://www.freebsd.org/cgi/url.cgi?ports/net/mpd/pkg-descr>`__.
????? ADSL modem ???????? ?? ?????????? ???? PPTP ?????? ?????? ???
modem ??? ??? ??????????. ??? ?????? modem ????? ?? Alcatel SpeedTouchTM
Home.

????? ?????? ?? ????????????? ?? port, ??? ???? ???????? ?? ????????? ??
mpd ???? ?? ???????? ??? ?????????? ??? ??? ??? ????????? ??? ???????
???. ?? port ????????? ?????? ???????????? ??????? ????????? ????
???????? ``PREFIX/etc/mpd/``. ?? ?????? ???? ????????? ?????? ????
?????????? ??? ?????????. ????????? ???, ??? ?? *``PREFIX``* ????? ?
????????? ???? ????? ????????????? ?? ports, ??? ??? ?????????? ????? ?
``/usr/local/``. ???? ??? ??????????? ??? port, ?? ?????? ??? ?????
????? ??? ?? ??????? ??? mpd ?? ????? HTML. ? ?????????? ????????????
???? ???????? ``PREFIX/share/doc/mpd/``. ???????? ???????? ??? ?????????
????????? ??? ??????? ?? ??? ???????? ADSL ???? ??? mpd. ?? ?????????
?????????? ?? ??? ??????, ????? ????????? ?? ``mpd.conf``:

.. raw:: html

   <div class="note" xmlns="">

????????:
~~~~~~~~~

?? ???????? ????????? ``mpd.conf`` ?????????? ???? ?? ??? ?????? 4.X ???
mpd.

.. raw:: html

   </div>

.. code:: programlisting

    default:
        load adsl

    adsl:
        new -i ng0 adsl adsl
        set bundle authname username 
        set bundle password password 
        set bundle disable multilink

        set link no pap acfcomp protocomp
        set link disable chap
        set link accept chap
        set link keep-alive 30 10

        set ipcp no vjcomp
        set ipcp ranges 0.0.0.0/0 0.0.0.0/0

        set iface route default
        set iface disable on-demand
        set iface enable proxy-arp
        set iface idle 0

        open

.. raw:: html

   <div class="calloutlist">

+--------------------------------------+--------------------------------------+
| `|1| <#co-mpd-ex-user>`__            | ?? ????? ?????? ?? ?? ????? ???????  |
|                                      | ? ??????????? ???? ISP ???.          |
+--------------------------------------+--------------------------------------+
| `|2| <#co-mpd-ex-pass>`__            | ? ??????? ?? ??? ????? ??????? ?     |
|                                      | ??????????? ???? ISP ???.            |
+--------------------------------------+--------------------------------------+

.. raw:: html

   </div>

?? ?????? ``mpd.links`` ???????? ??????????? ??????? ?? ?? ??????? ? ???
????????? ??? ?? ????????????????. ??? ??????????, ?? ``mpd.links`` ???
????????? ?? ???????? ??????????, ???????? ????????:

.. code:: programlisting

    adsl:
        set link type pptp
        set pptp mode active
        set pptp enable originate outcall
        set pptp self 10.0.0.1 
        set pptp peer 10.0.0.138 

.. raw:: html

   <div class="calloutlist">

+--------------------------------------+--------------------------------------+
| `|1| <#co-mpd-ex-self>`__            | ? ????????? IP ??? FreeBSD           |
|                                      | ?????????? ???, ???? ????? ??        |
|                                      | ??????????????? ?? mpd.              |
+--------------------------------------+--------------------------------------+
| `|2| <#co-mpd-ex-peer>`__            | ? ????????? IP ??? ADSL modem ???.   |
|                                      | ??? ?? Alcatel SpeedTouchTM Home, ?  |
|                                      | ????????? ???? ????? ??? ??????????  |
|                                      | ? ``10.0.0.138``.                    |
+--------------------------------------+--------------------------------------+

.. raw:: html

   </div>

????? ??????? ?? ?????????????? ?? ??????? ??????, ???????? ??? ????????
?????? ?? ``root``:

.. code:: screen

    # mpd -b adsl

???????? ?? ????? ??? ????????? ??? ???????? ?? ??? ???????? ??????:

.. code:: screen

    % ifconfig ng0
    ng0: flags=88d1<UP,POINTOPOINT,RUNNING,NOARP,SIMPLEX,MULTICAST> mtu 1500
         inet 216.136.204.117 --> 204.152.186.171 netmask 0xffffffff

?? mpd ???????? ??? ??????????? ????? ???????? ??? FreeBSD ?? ???
???????? ADSL.

.. raw:: html

   </div>

.. raw:: html

   <div class="sect2">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

27.6.3. ??????????????? ?? pptpclient
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

???????? ?????? ?? ??????????????? ?? FreeBSD ??? ?? ?????????? ?? ?????
????????? PPPoA ??????????????? ??
`net/pptpclient <http://www.freebsd.org/cgi/url.cgi?ports/net/pptpclient/pkg-descr>`__.

??? ?? ??????????????? ??
`net/pptpclient <http://www.freebsd.org/cgi/url.cgi?ports/net/pptpclient/pkg-descr>`__
??? ?? ?????????? ?? ??? ???????? DSL, ???????????? ?? port ? ?? ??????,
??? ?????????????? ?? ?????? ``/etc/ppp/ppp.conf``. ?? ????????? ??
????? ``root`` ??? ?? ?????? ??? ??? ??? ???????? ???????????. ????????
???????? ??? ?????????? ???? ???????? ??? ``ppp.conf``. ??? ????????????
??????????? ??????? ?? ??? ???????? ??? ``ppp.conf``, ????? ?? ??????
manual ??? ppp,
`ppp(8) <http://www.FreeBSD.org/cgi/man.cgi?query=ppp&sektion=8>`__.

.. code:: programlisting

    adsl:
     set log phase chat lcp ipcp ccp tun command
     set timeout 0
     enable dns
     set authname username 
     set authkey password 
     set ifaddr 0 0
     add default HISADDR

.. raw:: html

   <div class="calloutlist">

+--------------------------------------+--------------------------------------+
| `|1| <#co-pptp-ex-user>`__           | ?? ????? ?????? ??? ??? ??????????   |
|                                      | ??? ???? ??????? DSL.                |
+--------------------------------------+--------------------------------------+
| `|2| <#co-pptp-ex-pass>`__           | ? ??????? ??? ??? ?????????? ???.    |
+--------------------------------------+--------------------------------------+

.. raw:: html

   </div>

.. raw:: html

   <div class="warning" xmlns="">

?????????????:
~~~~~~~~~~~~~~

????? ?? ?????? ?? ??????? ??? ?????? ??? ????? ????? ???????? ???
?????? ``ppp.conf``, ?? ?????? ?? ??????????? ??? ??????? ????? ??? ??
?????? ?? ???????? ?? ??????????? ????? ??? ???????. ?? ??? ????????
???????, ???????? ?? ???????????? ??? ?? ?????? ?? ?????? ?? ?????????
???? ???? ??? ?? ?????????? ??? ``root``. ????? ??? ??????? manual ???
`chmod(1) <http://www.FreeBSD.org/cgi/man.cgi?query=chmod&sektion=1>`__
???
`chown(8) <http://www.FreeBSD.org/cgi/man.cgi?query=chown&sektion=8>`__
??? ???????????? ???????????.

.. code:: screen

    # chown root:wheel /etc/ppp/ppp.conf
    # chmod 600 /etc/ppp/ppp.conf

.. raw:: html

   </div>

???? ?? ??????? ??? ?????? ??? ??? ???????? PPP ?? ??? DSL ???????????
???. ?? DSL modem ????? ethernet ????? ??? ?????????????? ????????? IP
??? ?????? ??? ??????, ???? ????? ???????? ?? ??????????. ???? ?????????
??? Alcatel SpeedTouchTM Home, ? ????????? ???? ????? ``10.0.0.138``. ?
?????????? ??? ???????? ? ???????????? ???, ?? ???????? ???? ?????????
???????????? ? ??????? ???. ??? ?? ???????? ?? ?????? ??? ?? ??????????
??? ???????? PPP, ????????? ??? ???????? ??????:

.. code:: screen

    # pptp address adsl

.. raw:: html

   <div class="tip" xmlns="">

????????:
~~~~~~~~~

????? ???? ???? ?? ?????????? ??? ?&? ??? ????? ??? ????????????
???????, ??????????? ?? pptp ??? ?? ??? ?????????? ??? ?????? (????????)
??? ?????????? ???.

.. raw:: html

   </div>

?? ???????????? ??? ??????? ``tun`` (???????? ??????) ??? ???
????????????? ?????? ??? ?????????? pptp ??? ppp. ????? ?????????? ?
???????? ??? ????????? ???, ? ?? pptp ???????????? ?? ???????, ????????
?? ????????? ?? ?????? ?? ??? ????? ??? ???????? ????????:

.. code:: screen

    % ifconfig tun0
    tun0: flags=8051<UP,POINTOPOINT,RUNNING,MULTICAST> mtu 1500
            inet 216.136.204.21 --> 204.152.186.171 netmask 0xffffff00
            Opened by PID 918

?? ??? ????????? ?? ??????????, ??????? ??? ????????? ??? ???????????
???, ?? ?????? ??????? ????? ??????????? ???? telnet ? ???? ???????
????????????. ?? ????? ??? ???????? ?? ??????????, ?? ?????? ??
????????? ??? ????? ??? ??????? ``pptp`` ??? ?? ??????????? ??? ???????
?????????? ??? ppp, ``/var/log/ppp.log`` ??? ?????? ????????.

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   <div class="navfooter">

--------------

+----------------------------------------------------+--------------------------------+----------------------------------+
| `????? <pppoe.html>`__?                            | `???? <ppp-and-slip.html>`__   | ?\ `??????? <slip.html>`__       |
+----------------------------------------------------+--------------------------------+----------------------------------+
| 27.5. ??????????????? PPP ???? Ethernet (PPPoE)?   | `???? <index.html>`__          | ?27.7. ??????????????? ?? SLIP   |
+----------------------------------------------------+--------------------------------+----------------------------------+

.. raw:: html

   </div>

???? ?? ???????, ??? ???? ???????, ?????? ?? ?????? ???
ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/

| ??? ????????? ??????? ?? ?? FreeBSD, ???????? ???
  `?????????? <http://www.FreeBSD.org/docs.html>`__ ???? ??
  ?????????????? ?? ??? <questions@FreeBSD.org\ >.
|  ??? ????????? ??????? ?? ???? ??? ??????????, ??????? e-mail ????
  <doc@FreeBSD.org\ >.

.. |1| image:: ./imagelib/callouts/1.png
.. |2| image:: ./imagelib/callouts/2.png
