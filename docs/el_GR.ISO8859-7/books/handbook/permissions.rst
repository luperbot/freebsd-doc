=========================
4.3. ?????? (Permissions)
=========================

.. raw:: html

   <div class="navheader">

4.3. ?????? (Permissions)
`????? <consoles.html>`__?
???????? 4. ??????? ??????? ??? UNIX(R)
?\ `??????? <dirstructure.html>`__

--------------

.. raw:: html

   </div>

.. raw:: html

   <div class="sect1">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

4.3. ?????? (Permissions)
-------------------------

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

?? FreeBSD ????? ???????? ??? BSD UNIX(R), ??? ??? ???? ?? ????
????????? ?? ??????? ??????? ??????? ??? UNIX(R). ? ????? ??? ???
????????? ????? ??? ?? FreeBSD ????? ??? ???????????? (multiuser)
??????????? ???????. ?? ??????? ?????? ?? ???????????? ??????? ???????
??? ?????????? ?????????? ??? ?? ??????? ??????????? ?????????. ??
??????? ????? ???????? ??? ??? ????? ??????????? ??? ??? ???????
??????????? ???????? hardware, ?????????????, ??????, ??? ??? ?????
???????? ??? ????? ??? CPU ??? ???? ??????.

?????? ?? ??????? ???? ??? ????????? ?? ?????????? ??????? ???????, ??
????????? ?????????????, ??????? ??? ????? ?????? ??? ?????? ?????
?????? ?? ????????, ?? ?????? ??? ?? ????????? ?????? ???? ??????. ??
?????? ????????????? ?? ??????? ????????????? ?? ???? ????, ??? ??? ???
????????? ??? ???????, ??? ??? ??? ????? ???? ????? ?????? ?? ??????,
??? ??? ????? ??? ????? ???? ??????. ??? ???????? ????????????? ???????
?? ??? ???????????? ?????? ??? ?????? ?????? ??? ??? ??????????? ????
?????.

.. raw:: html

   <div class="informaltable">

+--------+-------------------------------------------+-------------------------------------+
| ????   | ?????                                     | ???????? ?? ??????????? ?????????   |
+========+===========================================+=====================================+
| 0      | ????????:???, ???????:???, ????????:???   | ``---``                             |
+--------+-------------------------------------------+-------------------------------------+
| 1      | ????????:???, ???????:???, ????????:???   | ``--x``                             |
+--------+-------------------------------------------+-------------------------------------+
| 2      | ????????:???, ???????:???, ????????:???   | ``-w-``                             |
+--------+-------------------------------------------+-------------------------------------+
| 3      | ????????:???, ???????:???, ????????:???   | ``-wx``                             |
+--------+-------------------------------------------+-------------------------------------+
| 4      | ????????:???, ???????:???, ????????:???   | ``r--``                             |
+--------+-------------------------------------------+-------------------------------------+
| 5      | ????????:???, ???????:???, ????????:???   | ``r-x``                             |
+--------+-------------------------------------------+-------------------------------------+
| 6      | ????????:???, ???????:???, ????????:???   | ``rw-``                             |
+--------+-------------------------------------------+-------------------------------------+
| 7      | ????????:???, ???????:???, ????????:???   | ``rwx``                             |
+--------+-------------------------------------------+-------------------------------------+

.. raw:: html

   </div>

???????? ?? ??????????????? ??? ??????
`ls(1) <http://www.FreeBSD.org/cgi/man.cgi?query=ls&sektion=1>`__ ??
??????? ``-l`` ???? ?????? ??????? ??? ?? ????? ?? ??????????? ?????????
??? ??????????? ??? ?????????? ??? ????? ?? ??? ?????? ??? ??????? ???
??? ?????????, ??? ?????, ??? ??? ????? ???? ??????. ??? ??????????, ??
??????? ``ls -l`` ?? ??? ?????? ????????:

.. code:: screen

    % ls -l
    total 530
    -rw-r--r--  1 root  wheel     512 Sep  5 12:31 myfile
    -rw-r--r--  1 root  wheel     512 Sep  5 12:31 otherfile
    -rw-r--r--  1 root  wheel    7680 Sep  5 12:31 email.txt
    ...

? ????? ????? ??? ????????? ?? ??? ?????? ``ls -l`` ???????????? ??
????:

.. code:: screen

    -rw-r--r--

? ?????? ?????????? (??? ?? ????????) ??? ?????????? ?? ????????? ???
??? ???????? ??????, ????????, ?????? ??????? ??????????, ????????
(socket), ? ??????????? ???o ?????? ?????-????????. ???? ????????? ???,
?? ``-`` ?????????? ??? ???????? ??????. ?? ????????? ????? ??????????,
??? ?????????? ???, ``rw-``, ??????? ??? ?????? ??? ??? ????????? ???
???????. ?? ????? ???????? ??????????, ``r--``, ??????? ??? ?????? ???
??? ????? ???? ????? ?????? ?? ??????. ?? ?????????? ????? ??????????,
``r--``, ??????? ??? ?????? ??? ??? ???????? ?????. ? ????? ???????? ???
? ????? ????? ????????????????. ???? ????????? ??? ??????? ???, ??
?????? ????? ??????? ???? ? ?????????? ?? ?????? ?? ???????? ??? ??
?????? ??? ??????, ? ????? ?? ?????? ?? ???????? ?? ??????, ??? ?
????????? ?????? ?? ?????? ???? ?? ???????? ?? ??????. ??????? ?? ???
???????? ??????, ?? ?????? ??? ???? ?? ?????? ????? ``644``, ???? ??????
??? ?? ???? ????? ??????????? ?? ?????????? ????? ?????? ??? ???????.

????? ??? ????? ??? ????, ???? ???? ??? ?? ??????? ??????? ??? ??????
????????; ?? FreeBSD ?????????????? ??? ???????????? ???????? ??? ???
?????? ?? ????? ?? ??????????? ??????? ?? ????????, ?? ????????? ??? ??
??????? ?? ???? ??? ?? ???? ??? ??????????? ??????. ???? ?? ??????
?????? ???????? ????????????? ???? ???????? ``/dev``.

?? ??????? ?????????????? ?????? ??? ???? ?????????? ?? ??????. ?????
?????? ?????????, ???????? ??? ?????????. ?? bit ??? ?????? ??? ????????
????? ?????????? ???? ??????? ??????????? ????? ??? ??? ??? ??????. ????
???? ????????? ???? ??????? ???????????, ???????? ??? ?????
?????????????, ?????? ????? ????????? ?? ????????? ?? ??? ???????????
??? (?? ??????? ?cd?). ???? ?????? ???????? ??? ??????????? ? ????????
?? ??? ?? ?????? (???? ???? ?? ????? ?? ??? ?????? ??? ????? ???
???????) ??????.

??????????, ??? ?? ???????????? ?? ??????????? ????????? ?????? ?? ????
????? ????? ????????? (read) ???? ????????, ??? ??? ?? ????????? ???
?????? ??? ?????? ????????? ?? ????? ????? ???????? ?? ????? ????? ??
?????? ???????? (write) *???* ????????? (execute) ???? ???????? ???
???????? ?? ??????.

???????? ?? ???? bit ??????, ???? ???????????????? ?????? ?? ???????
??????????? ???? ?? setuid binaries ??? sticky directories. ?? ??????
???????????? ??????????? ??? ??? ?????? ??????? ??? ??? ?? ??? ???????,
?????????????? ?????????? ??? ?????? manual
`chmod(1) <http://www.FreeBSD.org/cgi/man.cgi?query=chmod&sektion=1>`__.

.. raw:: html

   <div class="sect2">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

4.3.1. ?????????? ??????
~~~~~~~~~~~~~~~~~~~~~~~~

.. raw:: html

   </div>

.. raw:: html

   <div>

?????????? ??? Tom Rhodes.

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

?? ?????????? ??????, ??????? ????? ??????????? ??? ?? ??????????
?????????, ????????????? ?????????? ???? ???? ??? ???? ????? ??? ??
?????? ?????? ?? ?????? ? ??????????. ?? ?????????? ?????????
????????????? ??? ??????? (?????) (????????) (??????), ???? ?????
?????????? ?? ????????? ?????:

.. raw:: html

   <div class="informaltable">

+--------------+----------+----------------------------------+
| ???????      | ??????   | ????????                         |
+==============+==========+==================================+
| (?????)      | u        | User (???????)                   |
+--------------+----------+----------------------------------+
| (?????)      | g        | Group owner (????? ??? ??????)   |
+--------------+----------+----------------------------------+
| (?????)      | o        | Other (????????? ???????)        |
+--------------+----------+----------------------------------+
| (?????)      | a        | All (????, ?world?)              |
+--------------+----------+----------------------------------+
| (????????)   | +        | ???????? ??????                  |
+--------------+----------+----------------------------------+
| (????????)   | -        | ???????? ??????                  |
+--------------+----------+----------------------------------+
| (????????)   | =        | ?????? ??????? ??????            |
+--------------+----------+----------------------------------+
| (??????)     | r        | Read (????????)                  |
+--------------+----------+----------------------------------+
| (??????)     | w        | Write (???????)                  |
+--------------+----------+----------------------------------+
| (??????)     | x        | Execute (????????)               |
+--------------+----------+----------------------------------+
| (??????)     | t        | Sticky bit                       |
+--------------+----------+----------------------------------+
| (??????)     | s        | Set UID ? GID                    |
+--------------+----------+----------------------------------+

.. raw:: html

   </div>

?? ????? ?????????? ?? ??? ??????
`chmod(1) <http://www.FreeBSD.org/cgi/man.cgi?query=chmod&sektion=1>`__
???? ????, ???? ?? ????????. ??? ??????????, ?? ?????????? ??
??????????????? ??? ???????? ?????? ??? ?? ???????????? ?? ??????
??????? ??? ???????? ??? *``FILE``*:

.. code:: screen

    % chmod go= FILE

??????? ?? ?????? ???? ??? ??? ??????? ???? ?????? ???? ???????
?????????? ????????????? ??? ??????? ?? ?????. ??? ??????????, ?
???????? ?????? ?? ????????? ???? ????? ??? ???? ????????? ?????? ???
????? ????????, ??? ??? ???????? ?? ????????? ????? ????????? ?? ?????.

.. code:: screen

    % chmod go-w,a+x FILE

.. raw:: html

   </div>

.. raw:: html

   <div class="sect2">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

4.3.2. FreeBSD File Flags
~~~~~~~~~~~~~~~~~~~~~~~~~

.. raw:: html

   </div>

.. raw:: html

   <div>

?????????? ??? Tom Rhodes.

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

???? ??? ??? ?????? ??????? ??? ??????????? ???? ??? ????, ?? FreeBSD
??????????? ??? ????? ??? ?file flags.? ???? ?? flags ?????????? ???
??????????? ??????? ????????? ??? ??????? ?? ??????, ???? ??? ??
??????????.

???? ?? flags ?????????? ??? ???????? ??????? ??????? ?? ??????,
?????????????? ??? ??? ?? ??????? ??????????? ????? ?? ? ``root`` ?? ???
?????? ?? ????????? ? ?? ?????????? ??????.

? ????????? ??? file flags ??????? ?? ???
`chflags(1) <http://www.FreeBSD.org/cgi/man.cgi?query=chflags&sektion=1>`__,
??????????????? ??? ???? ??????????. ??? ??????????, ??? ??
??????????????? ?? flag ??? ?????????? ?? ????????? ??????? ??? ??????
``file1``, ??????? ??? ???????? ??????:

.. code:: screen

    # chflags sunlink file1

??? ?? ????????????????? ?? flag ??? ?????????? ?? ????????? ???????,
???? ??????? ??? ??????????? ?????? ?? ?no? ??????? ??? ?? ``sunlink``.
???????????:

.. code:: screen

    # chflags nosunlink file1

??? ?? ????? ?? flags ???? ???????, ?????????????? ??? ??????
`ls(1) <http://www.FreeBSD.org/cgi/man.cgi?query=ls&sektion=1>`__ ?? ??
??????? ``-lo``:

.. code:: screen

    # ls -lo file1

???? ????? ?? ?????? ?? ????? ???? ???????? ?? ?? ????????:

.. code:: programlisting

    -rw-r--r--  1 trhodes  trhodes  sunlnk 0 Mar  1 05:54 file1

?????? flags ??????? ?? ?????????? ? ?? ?????????? ???? ??? ??? ??????
``root``. ???? ????????? ???????????, ? ?????????? ??? ??????? ?????? ??
????? ???? ?? flags. ??????????? ????? ???????????? ?? ????????? ???
??????? ????????
`chflags(1) <http://www.FreeBSD.org/cgi/man.cgi?query=chflags&sektion=1>`__
???
`chflags(2) <http://www.FreeBSD.org/cgi/man.cgi?query=chflags&sektion=2>`__
??? ???????????? ???????????.

.. raw:: html

   </div>

.. raw:: html

   <div class="sect2">

.. raw:: html

   <div class="titlepage" xmlns="">

.. raw:: html

   <div>

.. raw:: html

   <div>

4.3.3. ?? ?????? setuid, setgid ??? sticky
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. raw:: html

   </div>

.. raw:: html

   <div>

?????????? ??? ??? Tom Rhodes.

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   </div>

????? ??? ??? ?????? ??? ?????? ????????? ???, ???????? ????? ????? ???
?????? ???? ???????????? ?????? ?? ????????. ????????? ??? ??? ??????
``setuid``, ``setgid`` ??? ``sticky``.

?? ???????? ????? ?????????? ??? ??????? ??????????? ??? UNIX(R), ?????
???????? ??????????? ??? ??? ????? ??????????? ?????????? ????? ???????
???????. ??? ?? ??? ???????????, ?? ?????? ????? ?? ?????????? ???
??????? ?????? ??? ??????????? ?????????????? ?????? (real user ID) ???
??? ??????? ?????????????? ?????? (effective user ID).

?? ?????????? ID ??? ??????, ????? ?? UID ??? ????? ??????, ? ?? ??
????? ??????, ??? ?????????. ?? ?????? UID, ????? ?? ?????????????
?????? ?? ????? ??????? ??? ?????????. ??? ??????????, ?? ?????????
?????????
`passwd(1) <http://www.FreeBSD.org/cgi/man.cgi?query=passwd&sektion=1>`__
?????????? ?? ?? ?????????? ID ??? ?????? ??? ??????? ??? ?????? ???.
??????, ??? ?? ?????? ?? ???????????? ??? ???? ????????? ?? ????
???????? ??? ??????????, ?? ????????? ???? ???????????? ?? ?????? ID
???? ??? ?????? ``root``. ?? ???? ??? ?????, ??????????? ????? ??????
??????? ?? ???????? ???? ???????? ???? ????? ?? ???????? ?? ??????
?????? Permission Denied (?????????? ?????????).

.. raw:: html

   <div class="note" xmlns="">

????????:
~~~~~~~~~

? ??????? ``nosuid`` ???? ??????
`mount(8) <http://www.FreeBSD.org/cgi/man.cgi?query=mount&sektion=8>`__
?? ?????????? ???????? ????????? ????? ??? ???????, ??? ??????? ?????
?????? ?????? ??????. ?? ???? ?????, ? ???????? ???? ?? ????????, ??? ?
??????? ??? ?? ?????????? ??? ????. ? ??????? ???? ??? ????? ??????
??????? ???????, ????? (??????? ?? ?? ?????? manual
`mount(8) <http://www.FreeBSD.org/cgi/man.cgi?query=mount&sektion=8>`__)
??????? ?????? ?? ??????????? ???? ??????? ?????????? ``nosuid``
???????????? (wrapper).

.. raw:: html

   </div>

???????? ?? ?????????? ??? ????? setuid, ???????????? ??? ?????? ???????
(4) ??????? ??? ?? ?????? ??? ??? ??????, ???? ???????? ??? ????????
??????????:

.. code:: screen

    # chmod 4755 suidexample.sh

?? ?????? ??? ?????? ``suidexample.sh`` ?? ????????? ???? ???? ????????:

.. code:: programlisting

    -rwsr-xr-x   1 trhodes  trhodes    63 Aug 29 06:36 suidexample.sh

??????????? ??? ??????????, ??? ?? ``s`` ????? ????? ????? ??? ???????
?????? ??? ????? ?????????? ??? ??? ????????? ??? ???????, ??? ????
?????????????? ??? ?????????? ????? ?????????. ?? ??? ????? ????
??????????? ??????????? ??? ??????????? ???????? ??????????, ???? ???
?????????? ? ?????? ``passwd``.

??? ?? ???????????? ???? ?? ?????????? ??? ??? ??? ?????????, ???????
??? ?????????. ??? ?????, ????????? ??? ?????? ``passwd`` ?? ?????????
???????. ????? ? ?????? ?????????? ??? ????????? ??? ??? ???????? ???
???? ???????, ??????? ??? ?????? ?????????? ??? ?????????? ???
??????????? ??? ?????? ??? ??????? ??? ?????? ``passwd``.

??? ????????? ?:

.. code:: screen

    Changing local password for trhodes
    Old Password:

??? ????????? ?:

.. code:: screen

    # ps aux | grep passwd

.. code:: screen

    trhodes  5232  0.0  0.2  3420  1608   0  R+    2:10AM   0:00.00 grep passwd
    root     5211  0.0  0.2  3620  1724   2  I+    2:09AM   0:00.01 passwd

???? ?????? ????????, ? ?????? ``passwd`` ?????????? ??? ??? ????????
??????, ???? ???????????? ?? ?????? UID ??? ?????? ``root``.

? ????? ``setgid`` ??????? ??? ???? ?????????? ???? ??? ? ``setuid``,
???? ?????? ???? ?????? ??? ?????? (group). ???? ?????????? ??? ??????
???????? ? ????????? ?????????, ?? ???????????? ??? ?????? ??? ??????
???? ????? ?????? ?? ??????, ??? ??? ??? ?????? ??? ??? ????????.

??? ?? ?????? ??? ????? ``setgid`` ?? ??? ??????, ?? ?????? ??
???????????? ??? ?????? ??? (2) ??????? ??? ?? ?????? ??????, ????
?????? ``chmod``. ????? ?? ???????? ??????????:

.. code:: screen

    # chmod 2755 sgidexample.sh

???? ??? ????, ?? ???????????? ?? ??? ????? ``s``, ???? ???? ?? ???? ???
??? ??? ?????? ??? ??????:

.. code:: screen

    -rwxr-sr-x   1 trhodes  trhodes    44 Aug 31 01:49 sgidexample.sh

.. raw:: html

   <div class="note" xmlns="">

????????:
~~~~~~~~~

??? ???????????? ???, ?? ??? ?? ?????? ????? ??? ?????????? script ???
???????, ??? ?? ?????????? ?? ??????????? ?????? ID (EUID). ????
????????? ????? ?? ???? ?? scripts ??? ??????????? ? ???????? ????
???????
`setuid(2) <http://www.FreeBSD.org/cgi/man.cgi?query=setuid&sektion=2>`__
??? ??????????.

.. raw:: html

   </div>

?? ??? ?????? ??????? ?????? ??? ?????????, ?? ``setuid`` ???
``setgid``, ??????????? ?? ???????? ??? ???????? ??? ??????????, ????
?????????? ?? ??????????? ?? ??????????? ?? ???????? ??????????. ???????
?????? ??? ????? ?????? ?????, ? ????? ?????? ?? ??????? ??? ????????
??? ??????????: ?? ``sticky bit``.

???? ?????? ?? ``sticky bit`` ?? ??? ????????, ??????????? ? ????????
???? ??????? ???? ??? ??? ????????? ???. ? ????? ???? ????? ??????? ???
?? ??????????? ? ???????? ???? ??????? ??? ????????????? ??????????,
???? ??? ?????????? ? ``/tmp``, ??? ?????? ?????? ??? ??? ????? ?
?????????? ???. ??? ?? ?????? ???? ??? ?????, ??????????? ??? ?????? ???
(1) ???? ???? ??? ??? ??????:

.. code:: screen

    # chmod 1777 /tmp

???????? ???? ?? ????? ?? ??????????, ??????????????? ??? ?????? ``ls``:

.. code:: screen

    # ls -al / | grep tmp

.. code:: screen

    drwxrwxrwt  10 root  wheel         512 Aug 31 01:49 tmp

? ????? ``sticky bit`` ???????? ?? ``t`` ??? ????? ??? ??????? ???
??????.

.. raw:: html

   </div>

.. raw:: html

   </div>

.. raw:: html

   <div class="navfooter">

--------------

+-------------------------------------------+--------------------------+--------------------------------------+
| `????? <consoles.html>`__?                | `???? <basics.html>`__   | ?\ `??????? <dirstructure.html>`__   |
+-------------------------------------------+--------------------------+--------------------------------------+
| 4.2. ????????? ???????? ??? ????????? ?   | `???? <index.html>`__    | ?4.4. ???? ?????????                 |
+-------------------------------------------+--------------------------+--------------------------------------+

.. raw:: html

   </div>

???? ?? ???????, ??? ???? ???????, ?????? ?? ?????? ???
ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/

| ??? ????????? ??????? ?? ?? FreeBSD, ???????? ???
  `?????????? <http://www.FreeBSD.org/docs.html>`__ ???? ??
  ?????????????? ?? ??? <questions@FreeBSD.org\ >.
|  ??? ????????? ??????? ?? ???? ??? ??????????, ??????? e-mail ????
  <doc@FreeBSD.org\ >.
