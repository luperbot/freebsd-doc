<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>17.8. Das MAC Modul bsdextended</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="mac.html" title="Kapitel 17. Verbindliche Zugriffskontrolle" /><link rel="prev" href="mac-seeotheruids.html" title="17.7. Das MAC Modul seeotheruids" /><link rel="next" href="mac-ifoff.html" title="17.9. Das MAC Modul ifoff" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">17.8. Das MAC Modul bsdextended</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mac-seeotheruids.html">Zurück</a> </td><th width="60%" align="center">Kapitel 17. Verbindliche Zugriffskontrolle</th><td width="20%" align="right"> <a accesskey="n" href="mac-ifoff.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-bsdextended"></a>17.8. Das MAC Modul bsdextended</h2></div></div></div><a id="idp79976400" class="indexterm"></a><p>Modulname: <code class="filename">mac_bsdextended.ko</code></p><p>Parameter in der Kernelkonfiguration:
        <code class="literal">options MAC_BSDEXTENDED</code></p><p>Bootparameter: <code class="literal">mac_bsdextended_load="YES"</code></p><p>Das Modul <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_bsdextended&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_bsdextended</span>(4)</span></a> erstellt eine Firewall für
        das Dateisystem und ist eine Erweiterung des sonst üblichen
        Rechtemodells.  Es erlaubt einem Administrator einen Regelsatz zum
        Schutz von Dateien, Werkzeugen und Verzeichnissen in der
        Dateisystemhierarchie zu erstellen, der einer Firewall ähnelt.
        Sobald auf ein Objekt im Dateisystem zugegriffen werden soll, wird eine
        Liste von Regel abgearbeitet, bis eine passende Regel gefunden wird
        oder die Liste zu Ende ist.  Das Verhalten kann durch die Änderung
        des <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> Parameters
        <code class="literal">security.mac.bsdextended.firstmatch_enabled</code>
        eingestellt werden.  Ähnlich wie bei den anderen Firewallmodulen
        in FreeBSD wird eine Datei erstellt, welche die Zugriffsregeln
        enthält.  Diese wird beim Systemstart durch eine Variable in
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> eingebunden.</p><p>Der Regelsatz kann mit dem Programm <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ugidfw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ugidfw</span>(8)</span></a> eingepflegt
        werden, welches eine Syntax bereitstellt, die der von <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ipfw</span>(8)</span></a>
        gleicht.  Weitere Werkzeuge können auch selbst erstellt werden,
        indem die Funktionen der Bibliothek <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=libugidfw&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">libugidfw</span>(3)</span></a> verwendet
        werden.</p><p>Bei der Arbeit mit diesem Modul ist äußerste Vorsicht
        geboten - falscher Gebrauch kann den Zugriff auf Teile des Dateisystems
        komplett unterbinden.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79989840"></a>17.8.1. Beispiele</h3></div></div></div><p>Nachdem das Modul <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_bsdextended&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_bsdextended</span>(4)</span></a> erfolgreich geladen
        wurde, zeigt das folgende Kommando die gegenwärtig aktiven Regeln
        an:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ugidfw list</code></strong> 0 slots, 0 rules</pre><p>Wie erwartet, sind keine Regeln definiert.  Das bedeutet, das auf
        alle Teile des Dateisystems zugegriffen werden kann. Um eine Regel zu
        definieren, die jeden Zugriff durch Nutzer blockiert und nur die Rechte
        von <code class="systemitem">root</code> unangetastet läßt, muß
        lediglich dieses Kommando ausgeführt werden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ugidfw add subject not uid root new object not uid root mode n</code></strong></pre><p>Das ist allerdings keine gute Idee, da nun allen Nutzern der
        Zugriff auf selbst die einfachsten Programme wie <code class="command">ls</code>
        untersagt wird.  Angemessener wäre etwas wie:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ugidfw set 2 subject uid user1 object uid user2 mode n</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ugidfw set 3 subject uid user1 object gid user2 mode n</code></strong></pre><p>Diese Befehle bewirken, dass <code class="systemitem">user1</code> keinen
        Zugriff mehr auf Dateien und Programme hat, die
        <code class="systemitem"><em class="replaceable"><code>user2</code></em></code> gehören.
        Dies schließt das Auslesen von Verzeichniseinträgen ein.
      </p><p>Anstelle <code class="option">uid</code> <code class="systemitem">user1</code>
	könnte auch <code class="option">not uid
	<em class="replaceable"><code>user2</code></em></code> als Parameter übergeben
	werden.  Dies würde diesselben Einschränkungen für alle
	Nutzer bewirken anstatt nur einen einzigen.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="systemitem">root</code> ist von diesen Einstellungen nicht
	  betroffen.</p></div><p>Dies sollte als Überblick ausreichen, um zu verstehen, wie das
        Modul <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_bsdextended&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_bsdextended</span>(4)</span></a> helfen kann, das Dateisystem
        abzuschotten.  Weitere Informationen bieten die Manpages
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_bsdextended&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_bsdextended</span>(4)</span></a> und <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ugidfw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ugidfw</span>(8)</span></a>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mac-seeotheruids.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="mac.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="mac-ifoff.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">17.7. Das MAC Modul seeotheruids </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 17.9. Das MAC Modul ifoff</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>