<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>6.5. Benutzung von GNU gettext</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD Porter-Handbuch" /><link rel="up" href="special.html" title="Kapitel 6. Besonderheiten" /><link rel="prev" href="using-autotools.html" title="6.4. Benutzung von GNU autotools" /><link rel="next" href="using-perl.html" title="6.6. Die Benutzung von perl" /><link rel="copyright" href="trademarks.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.5. Benutzung von GNU <code class="literal">gettext</code></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-autotools.html">Zurück</a> </td><th width="60%" align="center">Kapitel 6. Besonderheiten</th><td width="20%" align="right"> <a accesskey="n" href="using-perl.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-gettext"></a>6.5. Benutzung von GNU <code class="literal">gettext</code></h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68683728"></a>6.5.1. Grundlegende Benutzung</h3></div></div></div><p>Wenn Ihr Port <code class="literal">gettext</code>
	    benötigt, setzen Sie einfach
	    <code class="varname">USE_GETTEXT</code> auf <code class="literal">yes</code>,
	    und Ihr Port bekommt die Abhängigkeit von <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/gettext/pkg-descr">devel/gettext</a>. Der Wert von
	    <code class="varname">USE_GETTEXT</code> kann auch die
	    benötigte Version der
	    <code class="literal">libintl</code>-Bibliothek angeben, der
	    grundlegenden Teil von
	    <code class="literal">gettext</code> &#8211; jedoch
	    wird von der Benutzung dieser Funktion
	    <span class="emphasis"><em>dringend abgeraten</em></span>:
	    Ihr Port sollte einfach nur mit der aktuellen Version von
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/gettext/pkg-descr">devel/gettext</a>
	    funktionieren.</p><p>Ein ziemlich häufiger Fall ist, dass ein Port
	    <code class="literal">gettext</code> und
	    <code class="command">configure</code> benutzt. Normalerweise sollte
	    GNU <code class="command">configure</code>
	    <code class="literal">gettext</code> automatisch finden können.
	    Sollte das einmal nicht funktionieren, können
	    Hinweise über den Ort von <code class="literal">gettext</code>
	    in <code class="envar">CPPFLAGS</code> und <code class="envar">LDFLAGS</code> wie
	    folgt übergeben werden:</p><pre class="programlisting">USE_GETTEXT=    yes
CPPFLAGS+=      -I${LOCALBASE}/include
LDFLAGS+=       -L${LOCALBASE}/lib

GNU_CONFIGURE=  yes
CONFIGURE_ENV=  CPPFLAGS="${CPPFLAGS}" \
	        LDFLAGS="${LDFLAGS}"</pre><p>Natürlich kann der Code kompakter sein,
	    wenn es keine weiteren Flags gibt, die
	    <code class="command">configure</code> übergeben werden
	    müssen:</p><pre class="programlisting">USE_GETTEXT=    yes
GNU_CONFIGURE=  yes
CONFIGURE_ENV=  CPPFLAGS="-I${LOCALBASE}/include" \
	        LDFLAGS="-L${LOCALBASE}/lib"</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68697168"></a>6.5.2. Optionale Benutzung</h3></div></div></div><p>Manche Softwareprodukte erlauben die Deaktivierung
	    von NLS - z.B. durch Übergeben von
	    <code class="option">--disable-nls</code> an
	    <code class="command">configure</code>. In diesem Fall sollte Ihr
	    Port <code class="literal">gettext</code> abhängig vom Status
	    von <a class="link" href="makefile-options.html#knobs-without-nls"><code class="varname">WITHOUT_NLS</code></a>
	    benutzen. Für Ports mit niedriger bis mittlerer
	    Komplexität können Sie sich auf das folgende
	    Idiom verlassen:</p><pre class="programlisting">GNU_CONFIGURE=          yes

.if !defined(WITHOUT_NLS)
USE_GETTEXT=            yes
PLIST_SUB+=             NLS=""
.else
CONFIGURE_ARGS+=        --disable-nls
PLIST_SUB+=             NLS="@comment "
.endif</pre><p>Der nächste Punkt auf Ihrer Todo-Liste ist
	    dafür zu sorgen, dass die Message-Catalog-Dateien
	    nur bedingt in der Packliste aufgeführt werden. Der
	    <code class="filename">Makefile</code>-Teil dieser Aufgabe ist
	    schon durch obiges Idiom erledigt.
	    Das wird im Abschnitt über <a class="link" href="plist.html#plist-sub" title="7.1. Änderungen an pkg-plist mit Hilfe von make-Variablen">Fortgeschrittene
	    <code class="filename">pkg-plist</code>-Methoden</a>
	    erklärt.
	    Kurz gesagt, jedes Vorkommen von
	    <code class="literal">%%NLS%%</code> in
	    <code class="filename">pkg-plist</code> wird durch
	    <span class="quote">&#8222;<span class="quote"><code class="literal">@comment </code></span>&#8220;</span>, wenn NLS
	    abgeschaltet ist, oder durch eine leere Zeichenkette,
	    wenn NLS aktiviert ist, ersetzt. Folglich werden die
	    Zeilen, denen <code class="literal">%%NLS%%</code> vorangestellt
	    ist, zu reinen Kommentaren in der endgültigen
	    Packliste, wenn NLS abgeschaltet ist;
	    andernfalls wird der Prefix einfach nur ausgelassen.
	    Alles, was Sie jetzt noch machen müssen, ist
	    <code class="literal">%%NLS%%</code> vor jedem Pfad zu einer
	    Message-Catalog-Datei in <code class="filename">pkg-plist</code>
	    einzufügen. Zum Beispiel:</p><pre class="programlisting">%%NLS%%share/locale/fr/LC_MESSAGES/foobar.mo
%%NLS%%share/locale/no/LC_MESSAGES/foobar.mo</pre><p>In sehr komplexen Fällen müssen Sie
	    eventuell fortgeschrittenere Techniken als die hier
	    vorgestellte benutzen - wie z.B. <a class="link" href="plist-dynamic.html" title="7.4. Dynamische oder statische Paketliste">Dynamische
	    Packlistenerzeugung</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68710224"></a>6.5.3. Behandlung von Message-Catalog-Verzeichnissen</h3></div></div></div><p>Bei der Installation von Message-Catalog-Dateien
	    gibt es einen Punkt zu beachten. Ihr Zielverzeichnis,
	    das unter <code class="filename">
	    LOCALBASE/share/locale</code>
	    liegt, sollte nur selten von Ihrem Port erzeugt und
	    gelöscht werden. Die Verzeichnisse für die
	    gebräuchlichsten Sprachen sind in
	    <code class="filename">/etc/mtree/BSD.local.dist</code>
	    aufgelistet; das heisst, sie sind Teil des Systems.
	    Die Verzeichnisse für viele andere Sprachen sind
	    Teil des Ports <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/gettext/pkg-descr">devel/gettext</a>. Sie wollen
	    vielleicht dessen <code class="filename">pkg-plist</code>
	    zur Hand nehmen, um festzustellen, ob Ihr Port eine
	    Message-Catalog-Datei für eine seltene Sprache
	    installiert.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-autotools.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="using-perl.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">6.4. Benutzung von GNU autotools </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 6.6. Die Benutzung von <code class="literal">perl</code></td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>