<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>6.19. Verwendung von Lua</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD Porter-Handbuch" /><link rel="up" href="special.html" title="Kapitel 6. Besonderheiten" /><link rel="prev" href="using-wx.html" title="6.18. wxWidgets verwenden" /><link rel="next" href="using-xfce.html" title="6.20. Xfce verwenden" /><link rel="copyright" href="trademarks.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.19. Verwendung von <span class="application">Lua</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-wx.html">Zurück</a> </td><th width="60%" align="center">Kapitel 6. Besonderheiten</th><td width="20%" align="right"> <a accesskey="n" href="using-xfce.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-lua"></a>6.19. Verwendung von <span class="application">Lua</span></h2></div></div></div><p>Dieser Abschnitt beschreibt den Status der
	<span class="application">Lua</span>-Bibliotheken in den Ports
	und deren Einbindung in das Ports System.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="lua-introduction"></a>6.19.1. Einführung</h3></div></div></div><p>Es gibt viele Probleme bei der gleichzeitigen
	  Verwendung unterschiedlicher Versionen von
	  <span class="application">Lua</span>-Bibliotheken (Dateien
	  unterschiedlicher Versionen haben denselben Dateinamen). In
	  den Ports wurde das Problem gelöst, indem jede Version
	  unter einem eigenen Namen mit der Versionsnummer als Suffix
	  installiert wird.</p><p>Der offensichtliche Nachteil dabei ist, dass jede
	  Anwendung so verändert werden muss, dass sie die
	  erwartete Version vorfindet. Dies kann jedoch durch
	  zusätzliche Flags für Compiler und Linker
	  gelöst werden.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="lua-version"></a>6.19.2. Auswahl der Version</h3></div></div></div><p>Um festzulegen, welche Version von
	  <span class="application">Lua</span> verwendet werden soll, gibt
	  es zwei Variablen (falls nur eine der beiden definiert ist,
	  so wird die andere auf einen Standardwert gesetzt):</p><div class="table"><a id="lua-ver-sel-table"></a><div class="table-title">Tabelle 6.34. Variablen, um die
	    <span class="application">Lua</span>-Version festzulegen</div><div class="table-contents"><table summary="Variablen, um die&#10;&#9;    Lua-Version festzulegen" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Variable</th><th>Beschreibung</th><th>Standardwert</th></tr></thead><tbody><tr><td><code class="varname">USE_LUA</code></td><td>Liste der Versionen, welche der Port verwenden
		  kann</td><td>Alle verfügbaren Versionen</td></tr><tr><td><code class="varname">USE_LUA_NOT</code></td><td>Liste der Versionen, die der Port nicht verwenden
		  kann</td><td>Nichts</td></tr></tbody></table></div></div><br class="table-break" /><p>Es folgt eine Liste an möglichen
	  <span class="application">Lua</span>-Versionen und deren
	  zugehöriger Port:</p><div class="table"><a id="idp69606096"></a><div class="table-title">Tabelle 6.35. Verfügbare
	    <span class="application">Lua</span>-Versionen</div><div class="table-contents"><table summary="Verfügbare&#10;&#9;    Lua-Versionen" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Version</th><th>Port</th></tr></thead><tbody><tr><td><code class="literal">4.0</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/lua4/pkg-descr">lang/lua4</a></td></tr><tr><td><code class="literal">5.0</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/lua50/pkg-descr">lang/lua50</a></td></tr><tr><td><code class="literal">5.1</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/lua/pkg-descr">lang/lua</a></td></tr></tbody></table></div></div><br class="table-break" /><p>Die Variablen in <a class="xref" href="using-lua.html#lua-ver-sel-table" title="Tabelle 6.34. Variablen, um die Lua-Version festzulegen">Tabelle 6.34, &#8222;Variablen, um die
	    <span class="application">Lua</span>-Version festzulegen&#8220;</a>
	  können auf einen oder mehrere (durch Leerzeichen
	  getrennt) der folgenden Werte gesetzt werden:</p><div class="table"><a id="idp69614928"></a><div class="table-title">Tabelle 6.36. Spezifikationen der
	    <span class="application">Lua</span>-Versionen</div><div class="table-contents"><table summary="Spezifikationen der&#10;&#9;    Lua-Versionen" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Beschreibung</th><th>Beispiel</th></tr></thead><tbody><tr><td>Spezielle Version</td><td><code class="literal">4.0</code></td></tr><tr><td>Aufsteigende Versionen</td><td><code class="literal">5.0+</code></td></tr><tr><td>Absteigende Versionen</td><td><code class="literal">5.0-</code></td></tr><tr><td>Versionenintervall (muss aufsteigend sein)</td><td><code class="literal">5.0-5.1</code></td></tr></tbody></table></div></div><br class="table-break" /><p>Desweiteren gibt es Variablen, über die eine
	  bevorzugte Version festgelegt werden kann. Die Versionen
	  können als Liste angegeben werden, wobei die
	  Reihenfolge der Priorisierung entspricht.</p><div class="table"><a id="idp69628496"></a><div class="table-title">Tabelle 6.37. Variablen zur Festlegung der bevorzugten
	    <span class="application">Lua</span>-Version</div><div class="table-contents"><table summary="Variablen zur Festlegung der bevorzugten&#10;&#9;    Lua-Version" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Bestimmt für</th></tr></thead><tbody><tr><td><code class="varname">WANT_LUA_VER</code></td><td>den Port</td></tr><tr><td><code class="varname">WITH_LUA_VER</code></td><td>den Benutzer</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="lua-version-example"></a><div class="example-title">Beispiel 6.9. Auswahl der
	    <span class="application">Lua</span>-Version</div><div class="example-contents"><p>Der folgende Ausschnitt entspricht einem Port, der
	    <span class="application">Lua</span> in den Versionen
	    <code class="literal">5.0</code> oder <code class="literal">5.1</code>
	    verwenden kann und standardmäßig
	    <code class="literal">5.0</code> verwendet.  Diese Einstellung kann
	    durch die benutzerdefinierte Variable
	    <code class="varname">WITH_LUA_VER</code> überschrieben
	    werden.</p><pre class="programlisting">USE_LUA=      5.0-5.1
WANT_LUA_VER= 5.0</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="lua-components"></a>6.19.3. Komponentenauswahl</h3></div></div></div><p>Desweiteren gibt es Anwendungen, die nicht direkt
	  <span class="application">Lua</span>-Bibliotheken sind, aber
	  trotzdem mit diesen zusammenhängen. Diese Anwendungen
	  können über die Variable
	  <code class="varname">LUA_COMPS</code> festgelegt werden.  Die
	  folgenden Komponenten sind verfügbar:</p><div class="table"><a id="idp69640912"></a><div class="table-title">Tabelle 6.38. Verfügbare
	    <span class="application">Lua</span>-Komponenten</div><div class="table-contents"><table summary="Verfügbare&#10;&#9;    Lua-Komponenten" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Name</th><th>Beschreibung</th><th>Versionseinschränkungen</th></tr></thead><tbody><tr><td><code class="literal">lua</code></td><td>Hauptbibliothek</td><td>Keine</td></tr><tr><td><code class="literal">tolua</code></td><td>Bibliothek für die Unterstützung von C/C++-Code</td><td><code class="literal">4.0-5.0</code></td></tr><tr><td><code class="literal">ruby</code></td><td>Ruby-Bindungen</td><td><code class="literal">4.0-5.0</code></td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Es gibt weitere Komponenten, die jedoch Module
	    für den Interpreter sind und nicht von Anwendungen
	    benutzt werden (nur von anderen Modulen).</p></div><p>Der Typ der Abhängigkeit kann für jede
	  Komponente durch Hinzufügen eines Suffix (durch
	  Strichpunkt getrennt) festgelegt werden. Falls der Typ nicht
	  angegeben wird, wird ein Standardwert verwendet (siehe <a class="xref" href="using-lua.html#lua-def-dep-types" title="Tabelle 6.40. Standardtypen für Lua-Abhängigkeiten">Tabelle 6.40, &#8222;Standardtypen für
	    <span class="application">Lua</span>-Abhängigkeiten&#8220;</a>).  Die folgenden Typen sind
	  verfügbar:</p><div class="table"><a id="idp69656016"></a><div class="table-title">Tabelle 6.39. Verfügbare Typen von
	    <span class="application">Lua</span>-Abhängigkeiten</div><div class="table-contents"><table summary="Verfügbare Typen von&#10;&#9;    Lua-Abhängigkeiten" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Beschreibung</th></tr></thead><tbody><tr><td><code class="literal">build</code></td><td>Komponente wird zum Bau
		  benötigt &#8211; äquivalent zu
		  <code class="varname">BUILD_DEPENDS</code></td></tr><tr><td><code class="literal">run</code></td><td>Komponente wird zum Ausführen
		  benötigt &#8211; äquivalent zu
		  <code class="varname">RUN_DEPENDS</code></td></tr><tr><td><code class="literal">lib</code></td><td>Komponente wird zum Bau und zum Ausführen
		  benötigt &#8211; äquivalent zu
		  <code class="varname">LIB_DEPENDS</code></td></tr></tbody></table></div></div><br class="table-break" /><p>Die Standardwerte für die einzelnen Komponenten
	  sind in der folgenden Tabelle aufgeführt:</p><div class="table"><a id="lua-def-dep-types"></a><div class="table-title">Tabelle 6.40. Standardtypen für
	    <span class="application">Lua</span>-Abhängigkeiten</div><div class="table-contents"><table summary="Standardtypen für&#10;&#9;    Lua-Abhängigkeiten" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Komponente</th><th>Typ der Abhängigkeit</th></tr></thead><tbody><tr><td><code class="literal">lua</code></td><td><code class="literal">lib</code> für
		  <code class="literal">4.0-5.0</code> (shared) und
		  <code class="literal">build</code> für <code class="literal">5.1</code>
		  (static)</td></tr><tr><td><code class="literal">tolua</code></td><td><code class="literal">build</code> (static)</td></tr><tr><td><code class="literal">ruby</code></td><td><code class="literal">lib</code> (shared)</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="lua-components-example"></a><div class="example-title">Beispiel 6.10. Auswahl von
	    <span class="application">Lua</span>-Komponenten</div><div class="example-contents"><p>Der folgende Ausschnitt entspricht einem Port,
	    welcher die <span class="application">Lua</span>-Version
	    <code class="literal">4.0</code> und die zugehörigen
	    <span class="application">Ruby</span>-Bindungen
	    verwendet.</p><pre class="programlisting">USE_LUA=      4.0
LUA_COMPS=    lua ruby</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="lua-version-detection"></a>6.19.4. Feststellen der installierten Version</h3></div></div></div><p>Um eine bereits installierte Version zu finden, muss
	  <code class="varname">WANT_LUA</code> definiert werden. Falls diese
	  Variable nicht auf eine bestimmte Versionsnummer gesetzt
	  wird, werden die Komponenten einen Suffix mit der
	  Versionsnummer tragen. Die Variable
	  <code class="varname">HAVE_LUA</code> wird gesetzt, falls eine
	  installierte Version vorgefunden wurde.</p><div class="example"><a id="lua-ver-det-example"></a><div class="example-title">Beispiel 6.11. Installierte
	    <span class="application">Lua</span>-Versionen
	    und&#8211; Komponenten feststellen</div><div class="example-contents"><p>Der folgende Ausschnitt kann in einem Port verwendet
	    werden, der <span class="application">Lua</span> benutzt, falls
	    es installiert ist oder eine Option dafür
	    ausgewählt wurde.</p><pre class="programlisting">WANT_LUA=       yes

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITH_LUA5) || ${HAVE_LUA:Mlua-5.[01]} != ""
USE_LUA=        5.0-5.1
CONFIGURE_ARGS+=--enable-lua5
.endif</pre><p>Der folgende Ausschnitt kann verwendet werden, um
	    die Unterstützung für
	    <span class="application">tolua</span> zusätzlich zu der
	    von <span class="application">Lua</span> zu aktivieren (beide in
	    Version 4.0), wenn dies installiert ist oder die Option
	    ausgewählt wurde.</p><pre class="programlisting">USE_LUA=        4.0
LUA_COMPS=      lua
WANT_LUA=       4.0

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITH_TOLUA) || ${HAVE_LUA:Mtolua} != ""
LUA_COMPS+=     tolua
CONFIGURE_ARGS+=--enable-tolua
.endif</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="lua-defined-variables"></a>6.19.5. Vordefinierte Variablen</h3></div></div></div><p>Die folgenden Variablen sind in den Ports
	  verfügbar (nachdem sie entsprechend <a class="xref" href="using-lua.html#lua-ver-sel-table" title="Tabelle 6.34. Variablen, um die Lua-Version festzulegen">Tabelle 6.34, &#8222;Variablen, um die
	    <span class="application">Lua</span>-Version festzulegen&#8220;</a> definiert wurden).</p><div class="table"><a id="idp69689936"></a><div class="table-title">Tabelle 6.41. Vordefinierte Variablen für Ports, die
	    <span class="application">Lua</span> verwenden</div><div class="table-contents"><table summary="Vordefinierte Variablen für Ports, die&#10;&#9;    Lua verwenden" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Beschreibung</th></tr></thead><tbody><tr><td><code class="varname">LUA_VER</code></td><td>Die <span class="application">Lua</span>-Version, die
		  verwendet wird (z.B. <code class="literal">5.1</code>)</td></tr><tr><td><code class="varname">LUA_VER_SH</code></td><td>Die Hauptversion für
		  shared-<span class="application">Lua</span>-Bibliotheken (z.B.
		  <code class="literal">1</code>)</td></tr><tr><td><code class="varname">LUA_VER_STR</code></td><td>Die <span class="application">Lua</span>-Version ohne die
		  Punkte (z.B. <code class="literal">51</code>)</td></tr><tr><td><code class="varname">LUA_PREFIX</code></td><td>Der Präfix, unter dem
		  <span class="application">Lua</span> (und Komponenten)
		  installiert ist</td></tr><tr><td><code class="varname">LUA_SUBDIR</code></td><td>Das Verzeichnis unter
		  <code class="filename">${PREFIX}/bin</code>,
		  <code class="filename">${PREFIX}/share</code> und
		  <code class="filename">${PREFIX}/lib</code>, in welchem
		  <span class="application">Lua</span> installiert ist</td></tr><tr><td><code class="varname">LUA_INCDIR</code></td><td>Das Verzeichnis, in dem
		  <span class="application">Lua</span>- und
		  <span class="application">tolua</span>-Header-Dateien
		  installiert sind</td></tr><tr><td><code class="varname">LUA_LIBDIR</code></td><td>Das Verzeichnis, in dem
		  <span class="application">Lua</span>&#8211; und
		  <span class="application">tolua</span>-Bibliotheken
		  installiert sind</td></tr><tr><td><code class="varname">LUA_MODLIBDIR</code></td><td>Das Verzeichnis, in dem
		  <span class="application">Lua</span> Modul-Bibliotheken
		  (<code class="filename">.so</code>) installiert sind</td></tr><tr><td><code class="varname">LUA_MODSHAREDIR</code></td><td>Das Verzeichnis, in dem
		  <span class="application">Lua</span>-Module
		  (<code class="filename">.lua</code>) installiert sind</td></tr><tr><td><code class="varname">LUA_PKGNAMEPREFIX</code></td><td>Der Paketnamen-Präfix, der von
		  <span class="application">Lua</span>-Modulen verwendet
	          wird</td></tr><tr><td><code class="varname">LUA_CMD</code></td><td>Das Verzeichnis, in dem der
		  <span class="application">Lua</span>-Interpreter liegt</td></tr><tr><td><code class="varname">LUAC_CMD</code></td><td>Das Verzeichnis, in dem der
		  <span class="application">Lua</span>-Compiler liegt</td></tr><tr><td><code class="varname">TOLUA_CMD</code></td><td>Das Verzeichnis, in dem das
		  <span class="application">tolua</span>-Programm liegt</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="lua-variables-example"></a><div class="example-title">Beispiel 6.12. Einem Port mitteilen, in welchem Verzeichnis
	    <span class="application">Lua</span> liegt</div><div class="example-contents"><p>Der folgende Ausschnitt zeigt, wie einem Port,
	    welcher ein configure-Skript verwendet, mitgeteilt werden
	    kann, wo die <span class="application">Lua</span>-Header-Dateien
	    und Bibliotheken liegen.</p><pre class="programlisting">
USE_LUA=        4.0
GNU_CONFIGURE=  yes
CONFIGURE_ENV=  CPPFLAGS="-I${LUA_INCDIR}" LDFLAGS="-L${LUA_LIBDIR}"</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="lua-premk"></a>6.19.6. Verarbeitung in
	  <code class="filename">bsd.port.pre.mk</code></h3></div></div></div><p>Falls die Variablen gleich nach dem Einbinden von
	  <code class="filename">bsd.port.pre.mk</code> benutzt werden sollen,
	  so muss die Variable <code class="varname">LUA_PREMK</code> definiert
	  werden.</p><div xmlns="" class="important"><h3 class="admontitle">Wichtig: </h3><p xmlns="http://www.w3.org/1999/xhtml">Falls <code class="varname">LUA_PREMK</code> definiert ist, so
	    werden Version, Abhängigkeiten, Komponenten und
	    vordefinierte Variablen nicht geändert, wenn die
	    Variablen des <span class="application">Lua</span>-Ports
	    <span class="emphasis"><em>nach</em></span> dem Einbinden von
	    <code class="filename">bsd.port.pre.mk</code> geändert
	    werden.</p></div><div class="example"><a id="lua-premk-example"></a><div class="example-title">Beispiel 6.13. Verwendung von
	    <span class="application">Lua</span>-Variablen in
	    Kommandos</div><div class="example-contents"><p>Der folgende Ausschnitt zeigt die Verwendung von
	    <code class="varname">LUA_PREMK</code> durch Ausführen des
	    <span class="application">Lua</span>-Interpreters, um die
	    vollständige Version als Zeichenkette zu erhalten,
	    diese dann einer Variablen zuzuweisen und die Variable
	    schließlich einem Programm zu übergeben.</p><pre class="programlisting">USE_LUA=        5.0
LUA_PREMK=      yes

.include &lt;bsd.port.pre.mk&gt;

.if exists(${LUA_CMD})
VER_STR!=       ${LUA_CMD} -v

CFLAGS+=        -DLUA_VERSION_STRING="${VER_STR}"
.endif</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Die <span class="application">Lua</span>-Variablen
	    können problemlos in Befehlen benutzt werden, falls
	    diese in Targets ohne gesetztes
	    <code class="varname">LUA_PREMK</code> verwendet werden.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-wx.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="using-xfce.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">6.18. <span class="application">wxWidgets</span> verwenden </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 6.20. Xfce verwenden</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>