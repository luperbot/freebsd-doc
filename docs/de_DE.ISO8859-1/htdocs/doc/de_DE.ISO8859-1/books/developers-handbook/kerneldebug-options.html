<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>10.8. Glossar der Kernel-Optionen zur Fehlersuche</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Developers' Handbook" /><link rel="up" href="kerneldebug.html" title="Kapitel 10. Kernel-Fehlersuche" /><link rel="prev" href="kerneldebug-deadlocks.html" title="10.7. Fehlersuche bei Deadlocks" /><link rel="next" href="architectures.html" title="Teil IV. Architekturen" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">10.8. Glossar der Kernel-Optionen zur Fehlersuche</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="kerneldebug-deadlocks.html">Zurück</a> </td><th width="60%" align="center">Kapitel 10. Kernel-Fehlersuche</th><td width="20%" align="right"> <a accesskey="n" href="architectures.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kerneldebug-options"></a>10.8. Glossar der Kernel-Optionen zur Fehlersuche</h2></div></div></div><p>Dieser Abschnitt bietet ein kurzes Glossar der zur
      Kompilierzeit verfügbaren Kernel-Optionen, die die
      Fehlersuche unterstützen:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">options KDB</code>: Kompiliert das
	  Kernel-Debugger-Framework ein. Wird von <code class="literal">options
	  DDB</code> und <code class="literal">options GDB</code>
	  benötigt. Kein oder nur geringer Leistungs-Overhead.
	  Standardmäßig wird bei einer Panic der Debugger
	  gestartet, anstatt automatisch neu zu starten.</p></li><li class="listitem"><p><code class="literal">options KDB_UNATTENDED</code>: Setzt den
	  Standard des
	  <code class="literal">debug.debugger_on_panic</code>-sysctl-Werts auf
	  0, welcher regelt, ob der Debugger bei einer Panic gestartet
	  wird. Solange <code class="literal">options KDB</code> nicht in den
	  Kernel einkompiliert ist, wird bei einer Panic automatisch
	  neu gestartet; sobald es in den Kernel einkompiliert ist,
	  wird standardmäßig der Debugger gestartet,
	  solange <code class="literal">options KDB_UNATTENDED</code> nicht
	  einkompiliert ist. Falls Sie den Kernel-Debugger in den
	  Kernel einkompiliert lassen wollen, aber möchten, dass
	  das System neu startet, wenn Sie nicht zur Stelle sind, um
	  den Debugger zur Diagnose zu benutzen, wählen Sie diese
	  Option.</p></li><li class="listitem"><p><code class="literal">options KDB_TRACE</code>: Setzt den Standard
	  des <code class="literal">debug.trace_on_panic</code>-sysctl-Werts auf
	  1, welcher regelt, ob der Debugger bei einer Panic
	  automatisch eine Stack-Ablaufverfolgung ausgibt. Besonders
	  wenn der Kernel mit <code class="literal">KDB_UNATTENDED</code>
	  läuft, kann dies hilfreich sein, um grundlegende
	  Informationen zur Fehlersuche auf der seriellen oder
	  Firewire-Konsole zu erhalten, während immer noch zur
	  Wiederherstellung neu gestartet wird.</p></li><li class="listitem"><p><code class="literal">options DDB</code>: Kompiliert die
	  Unterstützung für den Konsolen-Debugger DDB ein.
	  Dieser interaktive Debugger läuft auf was auch immer
	  die aktive Konsole des Systems auf niedrigster Ebene ist,
	  dazu gehören die Video-, serielle und Firewire-Konsole.
	  Er bietet grundlegende, eingebaute Möglichkeiten zur
	  Fehlersuche wie zum Beispiel das Erstellen von
	  Stack-Ablaufverfolgungen, das Auflisten von Prozessen und
	  Threads, das Ablegen des Lock-, VM- und Dateisystemstatus
	  und die Verwaltung des Kernel-Speichers. DDB benötigt
	  keine Software, die auf einem zweiten System läuft,
	  oder die Fähigkeit, einen Kernspeicherauszug oder
	  Kernel-Symbole zur vollen Fehlersuche zu erzeugen und bietet
	  detaillierte Fehlerdiagnose des Kernels zur Laufzeit. Viele
	  Fehler können allein unter Benutzung der DDB-Ausgabe
	  untersucht werden. Diese Option hängt von
	  <code class="literal">options KDB</code> ab.</p></li><li class="listitem"><p><code class="literal">options GDB</code>: Kompiliert die
	  Unterstützung für den Debugger GDB ein, welcher
	  von einem entfernten System aus über ein serielles
	  Kabel oder Firewire agieren kann. Wenn der Debugger
	  gestartet ist, kann GDB dazu verwendet werden, um
	  Struktur-Inhalte einzusehen, Stack-Ablaufverfolgungen zu
	  erzeugen, usw. Bei manchem Kernel-Status ist der Zugriff
	  ungeschickter als mit DDB, welcher dazu in der Lage ist,
	  nützliche Zusammenfassungen des Kernel-Status
	  automatisch zu erstellen wie zum Beispiel das automatische
	  Abgehen der Lock-Fehlersuche oder der Strukturen zur
	  Kernel-Speicher-Verwaltung, und es wird ein zweites System
	  benötigt. Auf der anderen Seite verbindet GDB
	  Informationen aus den Kernel-Quellen mit vollständigen
	  Symbolen zur Fehlersuche, erkennt komplette
	  Datenstrukturdefinitionen, lokale Variablen und ist in
	  Skripten einsetzbar. Diese Option hängt von
	  <code class="literal">options KDB</code> ab, ist aber nicht zur
	  Benutzung von GDB auf einem Kernel-Kernspeicherauszug
	  nötig.</p></li><li class="listitem"><p><code class="literal">options BREAK_TO_DEBUGGER</code>,
	  <code class="literal">options ALT_BREAK_TO_DEBUGGER</code>: Erlaubt
	  ein Abbruch- oder Alternativ-Signal auf der Konsole, um in
	  den Debugger zu gelangen. Falls sich das System ohne eine
	  Panic aufhängt, ist dies ein nützlicher Weg, um
	  den Debugger zu erreichen. Aufgrund der aktuellen
	  Verriegelung durch den Kernel ist ein Abbruch-Signal, das
	  auf einer seriellen Konsole erzeugt wurde, deutlich
	  vertrauenswürdiger beim Gelangen in den Debugger und
	  wird allgemein empfohlen. Diese Option hat kaum oder keine
	  Auswirkung auf den Durchsatz.</p></li><li class="listitem"><p><code class="literal">options INVARIANTS</code>: Kompiliert eine
	  große Anzahl an Aussageprüfungen und -tests
	  (Assertion-Checks und -Tests) ein, welche ständig die
	  Intaktheit der Kernel-Datenstrukturen und die Invarianten
	  der Kernel-Algorithmen prüfen. Diese Tests können
	  aufwendig sein und sind deswegen nicht von Anfang an
	  einkompiliert, aber helfen nützliches "fail
	  stop"-Verhalten, wobei bestimmte Gruppen nicht
	  erwünschten Verhaltens den Debugger öffnen, bevor
	  Beschädigungen an Kernel-Daten auftreten,
	  bereitzustellen, welches es einfacher macht, diese auf
	  Fehler hin zu untersuchen. Die Tests beinhalten Säubern
	  von Speicher und use-after-free-Prüfungen, was eine der
	  bedeutenderen Quellen von Overhead ist. Diese Option
	  hängt von <code class="literal">options INVARIANT_SUPPORT</code>
	  ab.</p></li><li class="listitem"><p><code class="literal">options INVARIANT_SUPPORT</code>: Viele der
	  in <code class="literal">options INVARIANTS</code> vorhandenen Tests
	  benötigen veränderte Datenstrukturen und
	  zusätzliche Kernel-Symbole, die festgelegt werden
	  müssen.</p></li><li class="listitem"><p><code class="literal">options WITNESS</code>: Diese Option
	  aktiviert Verfolgung und Prüfung von Lock-Anforderungen
	  zur Laufzeit und ist als Werkzeug für die
	  Deadlock-Diagnose von unschätzbarem Wert. WITNESS
	  pflegt ein Diagramm mit erworbenen Lock-Anträgen nach
	  Typ geordnet und prüft bei jedem Erwerb nach Zyklen
	  (implizit oder explizit). Falls ein Zyklus entdeckt wird,
	  werden eine Warnung und eine Stack-Ablaufverfolgung erzeugt
	  und als Hinweis, dass ein möglicher Deadlock gefunden
	  wurde, auf der Konsole ausgegeben. WITNESS wird
	  benötigt, um die DDB-Befehle <code class="command">show
	  locks</code>, <code class="command">show witness</code> und
	  <code class="command">show alllocks</code> benutzen zu können.
	  Diese Debug-Option hat einen bedeutenden Leistung-Overhead,
	  welcher ein ein wenig durch Benutzung von <code class="literal">options
	  WITNESS_SKIPSPIN</code> gemildert werden kann.
	  Detaillierte Dokumentation kann in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=witness&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">witness</span>(4)</span></a> gefunden
	  werden.</p></li><li class="listitem"><p><code class="literal">options WITNESS_SKIPSPIN</code>: Deaktiviert
	  die Prüfung von Spinlock-Lock-Anforderungen mit WITNESS
	  zur Laufzeit. Da Spinlocks am häufigsten im Scheduler
	  angefordert werden und Scheduler-Ereignisse oft auftreten,
	  kann diese Option Systeme, die mit WITNESS laufen, merklich
	  beschleunigen. Diese Option hängt von <code class="literal">options
	  WITNESS</code> ab.</p></li><li class="listitem"><p><code class="literal">options WITNESS_KDB</code>: Setzt den
	  Standard des
	  <code class="literal">debug.witness.kdb</code>-sysctl-Werts auf 1, was
	  bewirkt, dass WITNESS den Debugger aufruft, sobald eine
	  Lock-Anforderungsverletzung vorliegt, anstatt einfach nur
	  eine Warnung auszugeben. Diese Option hängt von
	  <code class="literal">options WITNESS</code> ab.</p></li><li class="listitem"><p><code class="literal">options SOCKBUF_DEBUG</code>: Führt
	  umfassende Beschaffenheitsprüfungen in Socket-Puffern
	  durch, was nützlich zur Fehlersuche bei Socket-Fehlern
	  und Anzeichen für Ressourceblockaden (Race) in
	  Protokollen und Gerätetreibern, die mit Sockets
	  arbeiten, sein kann. Diese Option hat bedeutende Auswirkung
	  auf die Netzwerkleistung und kann die Zeitverhältnisse
	  bei gegenseitiger Ressourceblockade in Gerätetreibern
	  ändern.</p></li><li class="listitem"><p><code class="literal">options DEBUG_VFS_LOCKS</code>: Verfolgt
	  Lock-Anforderungs-Einzelheiten bei lockmgr/vnode-Locks, was
	  die Menge der Informationen, die von <code class="command">show
	  lockdevnods</code> in DDB angezeigt werden,
	  vergrößert. Diese Option hat messbare Auswirkung
	  auf die Leistung.</p></li><li class="listitem"><p><code class="literal">options DEBUG_MEMGUARD</code>: Ein Ersatz
	  für die Kernel-Speicher-Zuweisung durch <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a>,
	  die das VM-System benutzt, um Lese- und Schreibzugriffe auf
	  zugewiesenen Speicher nach der Freigabe zu entdecken.
	  Details können in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=memguard&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">memguard</span>(9)</span></a> gefunden werden.
	  Diese Option hat bedeutende Auswirkung auf die Leistung,
	  aber kann sehr nützlich bei der Fehlersuche sein, wenn
	  Kernel-Speicher-Beschädigungen durch Fehler verursacht
	  werden.</p></li><li class="listitem"><p><code class="literal">options DIAGNOSTIC</code>: Aktiviert
	  zusätzliche, aufwendigere Diagnosetests analog zu
	  <code class="literal">options INVARIANTS</code>.</p></li></ul></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="kerneldebug-deadlocks.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="kerneldebug.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="architectures.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">10.7. Fehlersuche bei Deadlocks </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> Teil IV. Architekturen</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>