<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>3. Die rc-Subsysteme und nur-Lese Dateisysteme</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD und Solid State-Geräte" /><link rel="up" href="index.html" title="FreeBSD und Solid State-Geräte" /><link rel="prev" href="kernel.html" title="2. Kerneloptionen" /><link rel="next" href="ar01s04.html" title="4. Ein Dateisystem von Grund auf neu erstellen" /><link rel="copyright" href="trademarks.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. Die <code class="literal">rc</code>-Subsysteme und nur-Lese
      Dateisysteme</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="kernel.html">Zurück</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s04.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ro-fs"></a>3. Die <code class="literal">rc</code>-Subsysteme und nur-Lese
      Dateisysteme</h2></div></div></div><p>Die Initialisierung nach dem Bootvorgang eines eingebetteten
      FreeBSD-Systems wird von <code class="filename">/etc/rc.initdiskless</code>
      kontrolliert.</p><p><code class="filename">/etc/rc.d/var</code> hängt
      <code class="filename">/var</code> als RAM-Disk ein, erstellt eine
      konfigurierbare Liste von Verzeichnissen in
      <code class="filename">/var</code> mittels des <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkdir&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mkdir</span>(1)</span></a>-Kommandos
      und ändert die Attribute von ein paar dieser Verzeichnisse.  Bei
      der Ausführung von <code class="filename">/etc/rc.d/var</code> kommt eine
      andere <code class="filename">rc.conf</code>-Variable ins Spiel:
      <code class="literal">varsize</code>.  Die Datei <code class="filename">/etc/rc.d/var</code>
      erstellt eine <code class="filename">/var</code>-Partition basierend auf
      dem Wert dieser Variable in <code class="filename">rc.conf</code>:</p><pre class="programlisting">varsize=8192</pre><p>Standardmässig wird dieser Wert in Sektoren
      angegeben.</p><p>Der Fakt, dass es sich bei <code class="filename">/var</code> um ein
      nur-Lese Dateisystem handelt, ist eine wichtige Unterscheidung,
      da die <code class="filename">/</code>-Partition (und jede andere
      Partition, die Sie auf Ihrem Flash-Medium haben) nur lesend
      eingehängt wird.  Erinnern Sie sich, dass in <a class="xref" href="index.html#intro" title="1. Solid State Festplattengeräte">Abschnitt 1, &#8222;Solid State Festplattengeräte&#8220;</a> die Beschränkungen von Flash-Speichern
      erläutert wurden, speziell deren begrenzte Kapazität zum
      Schreiben.  Die Notwendigkeit, Dateisysteme auf Flash-Speichern
      nur lesend einzubinden und keine Swap-Dateien zu verwenden, kann
      nicht oft genug erwähnt werden.  Eine Swap-Datei auf einem
      ausgelasteten System kann in weniger als einem Jahr den gesamten
      Flash-Speicher aufbrauchen. Häufige Protokollierung oder das
      Erstellen und Löschen von temporären Dateien kann das gleiche
      verursachen.  Aus diesem Grund sollten Sie zusätzlich zum
      entfernen des <code class="literal">swap</code>-Eintrags aus ihrer
      <code class="filename">/etc/fstab</code>-Datei auch noch die
      Optionsfelder für jedes Dateisystem auf <code class="literal">ro</code>
      wie folgt stellen:</p><pre class="programlisting"># Device                Mountpoint      FStype  Options         Dump    Pass#
/dev/ad0s1a             /               ufs     ro              1       1</pre><p>Ein paar Anwendungen im normalen System werden sofort nach
      dieser Änderung ausfallen.  Beispielsweise wird Cron nicht
      richtig funktionieren, aufgrund von fehlenden Cron-Tabellen in
      <code class="filename">/var</code> die von
      <code class="filename">/etc/rc.d/var</code> erstellt wurden.  Syslog und
      DHCP werden ebenfalls Probleme durch das nur-Lese Dateisystem
      und fehlende Elemente im Verzeichnis <code class="filename">/var</code>
      verursachen, die <code class="filename">/etc/rc.d/var</code> erstellt
      hat.  Diese Probleme sind jedoch nur vorübergehend und werden
      zusammen mit Lösungen zur Ausführung von anderen gebräuchlichen
      Softwarepaketen in <a class="xref" href="strategies.html" title="5. Systemstrategien für kleine und Nur-Lese-Umgebungen">Abschnitt 5, &#8222;Systemstrategien für kleine und Nur-Lese-Umgebungen&#8220;</a>
      angesprochen.</p><p>Eine wichtige Sache, an die man sich erinnern sollte, ist,
      dass ein Dateisystem, welches als nur lesend in
      <code class="filename">/etc/fstab</code> eingebunden wurde, jederzeit als
      schreibend durch das folgende Kommando eingehängt werden
      kann:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/mount -uw partition</code></strong></pre><p>und auch wieder zurück auf nur lesend durch den Befehl:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/mount -ur partition</code></strong></pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="kernel.html">Zurück</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s04.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">2. Kerneloptionen </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 4. Ein Dateisystem von Grund auf neu erstellen</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>