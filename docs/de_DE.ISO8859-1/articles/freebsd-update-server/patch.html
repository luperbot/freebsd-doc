<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>6. Eine Fehlerkorrektur erstellen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Einen eigenen FreeBSD Update Server bauen" /><link rel="up" href="index.html" title="Einen eigenen FreeBSD Update Server bauen" /><link rel="prev" href="build.html" title="5. Den Update Code bauen" /><link rel="next" href="tips.html" title="7. Tipps" /><link rel="copyright" href="trademarks.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6. Eine Fehlerkorrektur erstellen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="build.html">Zurück</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="tips.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="patch"></a>6. Eine Fehlerkorrektur erstellen</h2></div></div></div><p>Jedes Mal, wenn ein <a class="link" href="../../../../security/advisories.html" target="_top">Sicherheits-Hinweis</a>
      oder ein <a class="link" href="../../../../security/notices.html" target="_top">Fehler-Hinweis</a>
      angekündigt wird, kann eine Fehlerkorrektur gebaut
      werden.</p><p>Für dieses Beispiel wird 7.1-RELEASE benutzt.</p><p>Für den Bau eines anderen Release werden ein paar Annahmen
      getroffen:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Richten Sie die korrekte Verzeichnisstruktur für den
	  ersten Bau ein.</p></li><li class="listitem"><p>Führen Sie einen ersten Bau für 7.1-RELEASE aus.</p></li></ul></div><p>Erstellen Sie das Korrekturverzeichnis des jeweiligen
      Releases unter <code class="filename">/usr/local/freebsd-update-server/patches/</code>.</p><div class="informalexample"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mkdir -p /usr/local/freebsd-update-server/patches/7.1-RELEASE/</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cd /usr/local/freebsd-update-server/patches/7.1-RELEASE</code></strong></pre></div><p>Als Beispiel nehmen Sie die Korrektur für <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a>.
      Lesen Sie den Hinweis und laden Sie die erforderliche Datei von
      <a class="link" href="../../../../security/advisories.html" target="_top">FreeBSD
	Sicherheits-Hinweise</a> herunter.  Weitere Informationen
      zur Interpretation der Sicherheitshinweise finden Sie im <a class="link" href="../../../../doc/de_DE.ISO8859-1/books/handbook/security-advisories.html" target="_top">FreeBSD
	Handbuch</a>.</p><p>In der <a class="link" href="http://security.freebsd.org/advisories/FreeBSD-SA-09:12.bind.asc" target="_top">Sicherheits
	Anweisung</a>, nennt sich dieser Hinweis
      <code class="literal">SA-09:12.bind</code>.  Nach dem Herunterladen der
      Datei, ist es erforderlich, die Datei auf einen geeigneten
      Patch-Level umzubenennen.  Es steht Ihnen frei den Namen frei zu
      wählen, es wird jedoch nahegelegt, diesen im Einklang mit dem
      offiziellen FreeBSD Patch-Level zu halten.  Für diesen Bau folgen
      wir der derzeit gängigen Praxis von FreeBSD und benennen sie
      <code class="literal">p7</code>.  Benennen Sie die Datei um:</p><div class="informalexample"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /usr/local/freebsd-update-server/patches/7.1-RELEASE/; mv bind.patch 7-SA-09:12.bind </code></strong></pre></div><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Wenn ein Patch-Level gebaut wird, wird davon ausgegangen,
	dass die bisherigen Korrekturen bereits vorhanden sind.  Wenn
	der Bau läuft, werden alle Korrekturen aus dem
	Patchverzeichnis mit gebaut.</p><p xmlns="http://www.w3.org/1999/xhtml">Es können auch selbsterstellte Korrekturen zum Bau
	hinzugefügt werden.  Benutzen Sie die Zahl Null, oder jede
	andere Zahl.</p></div><div xmlns="" class="warning"><h3 class="admontitle">Warnung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Es liegt in der Verantwortung des Administrators des
	<span class="application">FreeBSD Update Server</span> geeignete Maßnahmen zu treffen, um die Authentizität
	jeder Fehlerkorrektur zu überprüfen.</p></div><p>An dieser Stelle sind wir bereit, einen
      <span class="emphasis"><em>Diff</em></span> zu bauen.  Die Software prüft
      zunächst, ob <code class="filename">scripts/init.sh</code> für das
      jeweilige Release gelaufen ist, bevor mit dem Bau des Diff
      begonnen wird.</p><div class="informalexample"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/local/freebsd-update-server</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sh scripts/diff.sh amd64 7.1-RELEASE 7</code></strong></pre></div><p>Es folgt ein Beispiel für einen <span class="emphasis"><em>Diff</em></span>
      Bauprozess.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sh -e scripts/diff.sh amd64 7.1-RELEASE 7</code></strong>
Wed Aug 26 10:09:59 PDT 2009 Extracting world+src for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 17:10:25 UTC 2009 Building world for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 18:05:11 UTC 2009 Distributing world for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 18:06:16 UTC 2009 Building and distributing kernels for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 18:17:50 UTC 2009 Constructing world components for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 18:18:02 UTC 2009 Distributing source for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 11:19:23 PDT 2009 Moving components into staging area for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 11:19:37 PDT 2009 Extracting extra docs for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 11:19:42 PDT 2009 Indexing world0 for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 11:23:02 PDT 2009 Extracting world+src for FreeBSD/amd64 7.1-RELEASE-p7
Thu Sep 30 18:23:29 UTC 2010 Building world for FreeBSD/amd64 7.1-RELEASE-p7
Thu Sep 30 19:18:15 UTC 2010 Distributing world for FreeBSD/amd64 7.1-RELEASE-p7
Thu Sep 30 19:19:18 UTC 2010 Building and distributing kernels for FreeBSD/amd64 7.1-RELEASE-p7
Thu Sep 30 19:30:52 UTC 2010 Constructing world components for FreeBSD/amd64 7.1-RELEASE-p7
Thu Sep 30 19:31:03 UTC 2010 Distributing source for FreeBSD/amd64 7.1-RELEASE-p7
Thu Sep 30 12:32:25 PDT 2010 Moving components into staging area for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:32:39 PDT 2009 Extracting extra docs for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:32:43 PDT 2009 Indexing world1 for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:35:54 PDT 2009 Locating build stamps for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:36:58 PDT 2009 Reverting changes due to build stamps for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:37:14 PDT 2009 Cleaning staging area for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:37:14 PDT 2009 Preparing to copy files into staging area for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:37:15 PDT 2009 Copying data files into staging area for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:43:23 PDT 2009 Copying metadata files into staging area for FreeBSD/amd64 7.1-RELEASE-p7
Wed Aug 26 12:43:25 PDT 2009 Constructing metadata index and tag for FreeBSD/amd64 7.1-RELEASE-p7
...
Files found which include build stamps:
kernel|generic|/GENERIC/hptrr.ko
kernel|generic|/GENERIC/kernel
world|base|/boot/loader
world|base|/boot/pxeboot
world|base|/etc/mail/freebsd.cf
world|base|/etc/mail/freebsd.submit.cf
world|base|/etc/mail/sendmail.cf
world|base|/etc/mail/submit.cf
world|base|/lib/libcrypto.so.5
world|base|/usr/bin/ntpq
world|base|/usr/include/osreldate.h
world|base|/usr/lib/libalias.a
world|base|/usr/lib/libalias_cuseeme.a
world|base|/usr/lib/libalias_dummy.a
world|base|/usr/lib/libalias_ftp.a
...
Values of build stamps, excluding library archive headers:
v1.2 (Aug 26 2009 18:13:46)
v1.2 (Aug 26 2009 18:11:44)
@(#)FreeBSD 7.1-RELEASE-p7 #0: Wed Aug 26 18:11:50 UTC 2009
FreeBSD 7.1-RELEASE-p7 #0: Wed Aug 26 18:11:50 UTC 2009
    root@server.myhost.com:/usr/obj/usr/src/sys/GENERIC
7.1-RELEASE-p7
Wed Aug 26 17:29:15 UTC 2009
Wed Aug 26 17:29:15 UTC 2009
##### built by root@server.myhost.com on Wed Aug 26 17:49:58 UTC 2009
##### built by root@server.myhost.com on Wed Aug 26 17:49:58 UTC 2009
##### built by root@server.myhost.com on Wed Aug 26 17:49:58 UTC 2009
##### built by root@server.myhost.com on Wed Aug 26 17:49:58 UTC 2009
Wed Aug 26 17:20:39 UTC 2009
ntpq 4.2.4p5-a Wed Aug 26 17:29:42 UTC 2009 (1)
 * Copyright (c) 1992-2009 The FreeBSD Project.
Wed Aug 26 17:20:39 UTC 2009
Wed Aug 26 17:29:30 UTC 2009
Aug 26 2009
ntpd 4.2.4p5-a Wed Aug 26 17:29:41 UTC 2009 (1)
ntpdate 4.2.4p5-a Wed Aug 26 17:29:42 UTC 2009 (1)
ntpdc 4.2.4p5-a Wed Aug 26 17:29:42 UTC 2009 (1)
Wed Aug 26 17:55:02 UTC 2009
Wed Aug 26 17:55:02 UTC 2009
Wed Aug 26 17:55:02 UTC 2009
Wed Aug 26 17:20:39 UTC 2009
...</pre><p>Die Updates werden angezeigt und warten auf
      Genehmigung.</p><pre class="screen">New updates:
kernel|generic|/GENERIC/kernel.symbols|f|0|0|0555|0|7c8dc176763f96ced0a57fc04e7c1b8d793f27e006dd13e0b499e1474ac47e10|
kernel|generic|/GENERIC/kernel|f|0|0|0555|0|33197e8cf15bbbac263d17f39c153c9d489348c2c534f7ca1120a1183dec67b1|
kernel|generic|/|d|0|0|0755|0||
src|base|/|d|0|0|0755|0||
src|bin|/|d|0|0|0755|0||
src|cddl|/|d|0|0|0755|0||
src|contrib|/contrib/bind9/bin/named/update.c|f|0|10000|0644|0|4d434abf0983df9bc47435670d307fa882ef4b348ed8ca90928d250f42ea0757|
src|contrib|/contrib/bind9/lib/dns/openssldsa_link.c|f|0|10000|0644|0|c6805c39f3da2a06dd3f163f26c314a4692d4cd9a2d929c0acc88d736324f550|
src|contrib|/contrib/bind9/lib/dns/opensslrsa_link.c|f|0|10000|0644|0|fa0f7417ee9da42cc8d0fd96ad24e7a34125e05b5ae075bd6e3238f1c022a712|
...
FreeBSD/amd64 7.1-RELEASE update build complete.  Please review
the list of build stamps printed above and the list of updated
files to confirm that they look sensible, then run
# sh -e approve.sh amd64 7.1-RELEASE
to sign the build.</pre><p>Folgen Sie dem zuvor erwähnten Verfahren für die Genehmigung
      des Bauprozesses:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sh -e scripts/approve.sh amd64 7.1-RELEASE</code></strong>
Wed Aug 26 12:50:06 PDT 2009 Signing build for FreeBSD/amd64 7.1-RELEASE
Wed Aug 26 12:50:06 PDT 2009 Copying files to patch source directories for FreeBSD/amd64 7.1-RELEASE
Wed Aug 26 12:50:06 PDT 2009 Copying files to upload staging area for FreeBSD/amd64 7.1-RELEASE
Wed Aug 26 12:50:07 PDT 2009 Updating databases for FreeBSD/amd64 7.1-RELEASE
Wed Aug 26 12:50:07 PDT 2009 Cleaning staging area for FreeBSD/amd64 7.1-RELEASE

The FreeBSD/amd64 7.1-RELEASE update build has been signed and is
ready to be uploaded.  Remember to run
# sh -e umountkey.sh
to unmount the decrypted key once you have finished signing all
the new builds.</pre><p>Nachdem Sie den Bau genehmigt haben, starten Sie den Upload
      der Software:</p><div class="informalexample"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/local/freebsd-update-server</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sh scripts/upload.sh amd64 7.1-RELEASE</code></strong></pre></div><p>Als Referenz wird der gesamte Verlauf von <a class="link" href="diff.txt" target="_top"><code class="filename">diff.sh</code></a>
      beigefügt.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="build.html">Zurück</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="tips.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">5. Den Update Code bauen </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 7. Tipps</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>