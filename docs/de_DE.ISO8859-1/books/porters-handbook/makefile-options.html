<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>5.11. Makefile-Optionen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD Porter-Handbuch" /><link rel="up" href="makefile.html" title="Kapitel 5. Die Konfiguration des Makefile" /><link rel="prev" href="makefile-info.html" title="5.10. Info-Dateien" /><link rel="next" href="makefile-wrkdir.html" title="5.12. Die Festlegung des Arbeitsverzeichnisses" /><link rel="copyright" href="trademarks.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5.11. Makefile-Optionen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="makefile-info.html">Zurück</a> </td><th width="60%" align="center">Kapitel 5. Die Konfiguration des Makefile</th><td width="20%" align="right"> <a accesskey="n" href="makefile-wrkdir.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makefile-options"></a>5.11. Makefile-Optionen</h2></div></div></div><p>Einige größere Applikationen können mit
	einer Reihe von Konfigurationen, die zusätzliche
	Funktionalitäten hinzufügen, erstellt werden,
	falls eine oder mehrere Bibliotheken oder Applikationen
	verfügbar sind. Dazu gehören die Auswahl von
	natürlichen Sprachen, GUI versus Kommandozeilen-Versionen
	oder die Auswahl aus mehreren Datenbank-Programmen.
	Da nicht alle Nutzer diese Bibliotheken oder Applikationen
	wollen, stellt das Ports-System hooks (Haken) zur
	Verfügung, damit der Autor des Ports bestimmen kann,
	welche Konfiguration erstellt werden soll.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68302032"></a>5.11.1. KNOBS (Einstellungen)</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68302672"></a>5.11.1.1. <code class="varname">WITH_<em class="replaceable"><code>*</code></em></code>
	    und
	    <code class="varname">WITHOUT_<em class="replaceable"><code>*</code></em></code>
	  </h4></div></div></div><p>Diese Variablen sind entworfen worden, um vom
	    System-Administrator gesetzt zu werden. Es gibt viele,
	    die in <a class="link" href="http://www.freebsd.org/cgi/cvsweb.cgi/ports/KNOBS?rev=HEAD&amp;content-type=text/x-cvsweb-markup" target="_top"><code class="filename">ports/KNOBS</code></a>
	    standardisiert sind.</p><p>Benennen Sie Schalter bei der Erstellung eines Ports
	    nicht programmspezifisch. Verwenden Sie zum Beispiel im
	    Avahi-Port <code class="varname">WITHOUT_MDNS</code> anstelle von
	    <code class="varname">WITHOUT_AVAHI_MDNS</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Sie sollten nicht annehmen, dass ein
	      <code class="varname">WITH_<em class="replaceable"><code>*</code></em></code>
	      notwendigerweise eine korrespondierende <code class="varname">
	      WITHOUT_<em class="replaceable"><code>*</code></em></code>-Variable
	      hat oder umgekehrt. Im Allgemeinen wird diese
	      Vorgabe einfach unterstellt.</p></div><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Falls nicht anderweitig festgelegt, werden diese
	      Variablen nur dahingehend überprüft, ob sie
	      gesetzt sind oder nicht &#8211; nicht darauf,
	      ob sie auf bestimmte Werte wie <code class="literal">YES</code>
	      oder <code class="literal">NO</code> gesetzt sind.</p></div><div class="table"><a id="idp68310480"></a><div class="table-title">Tabelle 5.3. Häufige
	      <code class="varname">WITH_<em class="replaceable"><code>*</code></em></code>
	      und <code class="varname">
	      WITHOUT_<em class="replaceable"><code>*</code></em></code>-Variablen
	    </div><div class="table-contents"><table summary="Häufige&#10;&#9;      WITH_*&#10;&#9;      und &#10;&#9;      WITHOUT_*-Variablen&#10;&#9;    " border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Bedeutung</th></tr></thead><tbody><tr><td><a id="knobs-without-nls"></a><code class="varname">WITHOUT_NLS</code></td><td>Falls gesetzt, bedeutet sie, dass eine
		    Internationalisierung nicht benötigt wird,
		    was Kompilierzeit sparen kann. Als Vorgabe
		    wird Internationalisierung gebraucht.</td></tr><tr><td><code class="varname">WITH_OPENSSL_BASE</code></td><td>Nutze die Version von OpenSSL aus dem
		    Basissystem.</td></tr><tr><td><code class="varname">WITH_OPENSSL_PORT</code></td><td>Installiert die Version von OpenSSL aus
		    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/openssl/pkg-descr">security/openssl</a>, auch
		    wenn das Basissystem auf aktuellem Stand
		    ist.</td></tr><tr><td><code class="varname">WITHOUT_X11</code></td><td>Falls der Port mit oder ohne
		    Unterstützung für X erstellt werden
		    kann, dann sollte normalerweise mit
		    X-Unterstützung erstellt werden.
		    Falls die Variable gesetzt ist, soll die Version
		    ohne X-Unterstützung erstellt werden.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68320976"></a>5.11.1.2. Benennung von Knobs (Einstellungen)</h4></div></div></div><p>Um die Anzahl der Knobs niedrig zu halten und zum
	    Vorteil des Anwenders, wird empfohlen, dass Porter
	    ähnliche Namen für Knobs verwenden.
	    Eine Liste der beliebtesten Knobs kann in der <a class="link" href="http://www.freebsd.org/cgi/cvsweb.cgi/ports/KNOBS?rev=HEAD&amp;content-type=text/x-cvsweb-markup" target="_top">KNOBS-Datei</a>
	    eingesehen werden.</p><p>Knob-Namen sollten wiederspiegeln, was der Knob
	    bedeutet und was er bewirkt. Wenn ein Port einen
	    lib-Präfix im <code class="varname">PORTNAME</code> hat,
	    dann soll das lib-Präfix im Knob-Namen
	    entfallen.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68323536"></a>5.11.2. <code class="varname">OPTIONS</code></h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68324304"></a>5.11.2.1. Hintergrund</h4></div></div></div><p>Die <code class="varname">OPTIONS</code>-Variable gibt dem
	    Nutzer, der diesen Port installiert, einen Dialog mit
	    auswählbaren Optionen und speichert diese in
	    <code class="filename">/var/db/ports/portname/options</code>.
	    Bei der nächsten Neuerstellung des Ports werden
	    diese Einstellungen wieder verwandt.
	    Sie werden sich niemals mehr an all die zwanzig
	    <code class="varname">WITH_<em class="replaceable"><code>*</code></em></code> und
	    <code class="varname">WITHOUT_<em class="replaceable"><code>*</code></em></code>-Optionen
	    erinnern müssen, die Sie benutzt haben, um diesen
	    Port zu erstellen!</p><p>Wenn der Anwender <code class="command">make config</code>
	    benutzt (oder ein <code class="command">make build</code> das
	    erste Mal laufen lässt) wird das Framework auf
	    <code class="filename">/var/db/ports/portname/options</code>
	    die Einstellungen prüfen. Falls die Datei nicht
	    existiert, werden die Werte von
	    <code class="varname">OPTIONS</code> genutzt, um eine Dialogbox
	    zu erzeugen, in welcher die Optionen an- oder abgeschaltet
	    werden können. Dann wird die
	    <code class="filename">options</code>-Datei gespeichert und die
	    ausgewählten Variablen werden bei der Erstellung
	    des Ports benutzt.</p><p>Falls eine neue Version des Ports
	    <code class="varname">OPTIONS</code> hinzufügt, wird der
	    Dialog mit den gespeicherten Werten dem Nutzer
	    angezeigt.</p><p>Benutzen Sie <code class="command">make showconfig</code>,
	    um die gespeicherte Konfiguration zu betrachten.
	    Benutzen Sie <code class="command">make rmconfig</code>, um die
	    gespeicherte Konfiguration zu Löschen.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68336080"></a>5.11.2.2. Syntax</h4></div></div></div><p>Die Syntax für die
	    <code class="varname">OPTIONS</code>-Variable lautet:

	    </p><pre class="programlisting">OPTIONS=    OPTION    "descriptive text" default ...</pre><p>

	    Der Wert als Vorgabe ist entweder <code class="literal">ON</code>
	    oder <code class="literal">OFF</code>. Wiederholungen dieser drei
	    Felder sind erlaubt.</p><p><code class="varname">OPTIONS</code>-Definitionen
	    müssen vor der Einbindung von
	    <code class="filename">bsd.port.options.mk</code> erscheinen.
	    Die <code class="varname">WITH_*</code> und
	    <code class="varname">WITHOUT_*</code>-Variablen können
	    nur nach der Einbindung von
	    <code class="filename">bsd.port.options.mk</code> getestet
	    werden. <code class="filename">bsd.port.pre.mk</code> kann auch
	    stattdessen eingebunden werden und wird immer noch von
	    vielen Ports eingebunden, die vor der Einführung von
	    <code class="filename">bsd.port.options.mk</code> erstellt wurden.
	    Jedoch wirken manche Variablen nicht wie gewohnt nach der
	    Einbindung von <code class="filename">bsd.port.pre.mk</code>,
	    typischerweise <code class="varname">USE_*</code>-Optionen.</p><div class="example"><a id="ports-options-simple-use"></a><div class="example-title">Beispiel 5.8. Einfache Anwendung von
	      <code class="varname">OPTIONS</code></div><div class="example-contents"><pre class="programlisting">OPTIONS=      FOO "Enable option foo" On \
              BAR "Support feature bar" Off

.include &lt;bsd.port.options.mk&gt;

.if defined(WITHOUT_FOO)
CONFIGURE_ARGS+=    --without-foo
.else
CONFIGURE_ARGS+=    --with-foo
.endif

.if defined(WITH_BAR)
RUN_DEPENDS+=    bar:${PORTSDIR}/bar/bar
.endif

.include &lt;bsd.port.mk&gt;</pre></div></div><br class="example-break" /><div class="example"><a id="ports-options-old-style-use"></a><div class="example-title">Beispiel 5.9. Veraltete Anwendung von
	      <code class="varname">OPTIONS</code></div><div class="example-contents"><pre class="programlisting">OPTIONS=      FOO "Enable option foo" On

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITHOUT_FOO)
CONFIGURE_ARGS+=    --without-foo
.else
CONFIGURE_ARGS+=    --with-foo
.endif

.include &lt;bsd.port.post.mk&gt;</pre></div></div><br class="example-break" /></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68350288"></a>5.11.3. Automatische Aktivierung von Funktionen</h3></div></div></div><p>Wenn Sie ein GNU-Konfigurationsskript benutzen,
	  sollten Sie ein Auge darauf werfen, welche Funktionen
	  durch die automatische Erkennung aktiviert werden.
	  Schalten Sie Funktionen, die Sie nicht möchten,
	  ausdrücklich durch Verwendung von
	  <code class="literal">--without-xxx</code> oder
	  <code class="literal">--disable-xxx</code> in der Variable
	  <code class="varname">CONFIGURE_ARGS</code> einzeln ab.</p><div class="example"><a id="idp68352592"></a><div class="example-title">Beispiel 5.10. Falsche Behandlung einer Option</div><div class="example-contents"><pre class="programlisting">.if defined(WITH_FOO)
LIB_DEPENDS+=        foo.0:${PORTSDIR}/devel/foo
CONFIGURE_ARGS+=    --enable-foo
.endif</pre></div></div><br class="example-break" /><p>Stellen Sie sich vor im obigen Beispiel ist eine
	  Bibliothek libfoo auf dem System installiert. Der Nutzer
	  will nicht, dass diese Applikation libfoo benutzt, also
	  hat er die Option auf "off" im
	  <code class="literal">make config</code>-Dialog umgestellt.
	  Aber das Konfigurationsskript der Applikation hat
	  erkannt, dass die Bibliothek auf dem System vorhanden ist
	  und fügt ihre Funktionen in die Binärdatei ein.
	  Falls der Nutzer sich nun entschliesst libfoo von seinem
	  System zu entfernen, dann wird das Ports-System nicht
	  protestieren (es wurde keine Abhängigkeit von libfoo
	  eingetragen), aber die Applikation bricht ab.</p><div class="example"><a id="idp68354512"></a><div class="example-title">Beispiel 5.11. Korrekte Behandlung einer Option</div><div class="example-contents"><pre class="programlisting">.if defined(WITH_FOO)
LIB_DEPENDS+=        foo.0:${PORTSDIR}/devel/foo
CONFIGURE_ARGS+=    --enable-foo
.else
CONFIGURE_ARGS+=    --disable-foo
.endif</pre></div></div><br class="example-break" /><p>Im zweiten Beispiel wird die Bibliothek libfoo explizit
	  abgeschaltet. Das Konfigurationsskript aktiviert die
	  entsprechenden Funktionen nicht in der Applikation trotz
	  der Anwesenheit der Bibliothek auf dem System.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="makefile-info.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="makefile.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="makefile-wrkdir.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">5.10. Info-Dateien </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 5.12. Die Festlegung des Arbeitsverzeichnisses</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>