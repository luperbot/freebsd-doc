<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>6.11. Benutzung von Java</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD Porter-Handbuch" /><link rel="up" href="special.html" title="Kapitel 6. Besonderheiten" /><link rel="prev" href="using-kde.html" title="6.10. Benutzung von KDE" /><link rel="next" href="using-php.html" title="6.12. Webanwendungen, Apache und PHP" /><link rel="copyright" href="trademarks.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.11. Benutzung von Java</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-kde.html">Zurück</a> </td><th width="60%" align="center">Kapitel 6. Besonderheiten</th><td width="20%" align="right"> <a accesskey="n" href="using-php.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-java"></a>6.11. Benutzung von Java</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="java-variables"></a>6.11.1. Variablen-Definitionen</h3></div></div></div><p>Wenn Ihr Port ein Java&#8482; Development Kit (JDK&#8482;)
	  benötigt, entweder zum Bauen, zur Laufzeit oder
	  sogar, um das Distfile auszupacken, dann sollten Sie
	  <code class="varname">USE_JAVA</code> setzen.</p><p>Es gibt mehrere JDKs in der
	  Ports-Sammlung&#8211; von verschiedenen Anbietern
	  und in verschiedenen Versionen.
	  Wenn Ihr Port eine bestimmte dieser Versionen
	  benötigt, können Sie definieren welche.
	  Die aktuelle Version ist <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/java/jdk16/pkg-descr">java/jdk16</a>.</p><div class="table"><a id="idp69032656"></a><div class="table-title">Tabelle 6.14. Variablen, die von Ports, die Java benutzen, gesetzt
	  werden müssen</div><div class="table-contents"><table summary="Variablen, die von Ports, die Java benutzen, gesetzt&#10;&#9;  werden müssen" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Bedeutung</th></tr></thead><tbody><tr><td><code class="varname">USE_JAVA</code></td><td>Sollte definiert sein, damit die übrigen
		  Variablen irgendeinen Effekt haben.</td></tr><tr><td><code class="varname">JAVA_VERSION</code></td><td>Durch Leerzeichen getrennte Liste von geeigneten
		  Java-Versionen für den Port. Ein optionales
		  <code class="literal">"+"</code> ermöglicht die Angabe eines
		  Bereiches von Versionen (mögliche Werte:
		  <code class="literal">1.5[+] 1.6[+] 1.7[+]</code>).</td></tr><tr><td><code class="varname">JAVA_OS</code></td><td>Durch Leerzeichen getrennte Liste von geeigneten
		  JDK-Port-Betriebssystemen für den Port. (erlaubte
		  Werte: <code class="literal">native linux</code>).</td></tr><tr><td><code class="varname">JAVA_VENDOR</code></td><td>Durch Leerzeichen getrennte Liste von geeigneten
		  JDK-Port-Anbietern für den Port. (erlaubte Werte:
		  <code class="literal">freebsd bsdjava sun openjdk</code>).</td></tr><tr><td><code class="varname">JAVA_BUILD</code></td><td>Bedeutet, falls gesetzt, dass der ausgewählte
		  JDK-Port zu den Build-Abhängigkeiten des Ports
		  hinzugefügt werden soll.</td></tr><tr><td><code class="varname">JAVA_RUN</code></td><td>Bedeutet, falls gesetzt, dass der ausgewählte
		  JDK-Port zu den Laufzeit-Abhängigkeiten des Ports
		  hinzugefügt werden soll.</td></tr><tr><td><code class="varname">JAVA_EXTRACT</code></td><td>Bedeutet, falls gesetzt, dass der ausgewählte
		  JDK-Port zu den Extract-Abhängigkeiten des Ports
		  hinzugefügt werden soll.</td></tr></tbody></table></div></div><br class="table-break" /><p>Das Folgende ist eine Liste aller Variablen, die ein
	  Port bekommt, nachdem er <code class="varname">USE_JAVA</code>
	  gesetzt hat:</p><div class="table"><a id="idp69055696"></a><div class="table-title">Tabelle 6.15. Bereitgestellte Variablen für Ports,
	    die Java benutzen</div><div class="table-contents"><table summary="Bereitgestellte Variablen für Ports,&#10;&#9;    die Java benutzen" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Wert</th></tr></thead><tbody><tr><td><code class="varname">JAVA_PORT</code></td><td>Der Name des JDK-Ports (z.B.
		  <code class="literal">'java/diablo-jdk16'</code>).</td></tr><tr><td><code class="varname">JAVA_PORT_VERSION</code></td><td>Die volle Version des JDK Ports (z.B.
		  <code class="literal">'1.6.0'</code>). Wenn Sie nur die ersten
		  beiden Stellen dieser Versionsnummer benötigen,
		  benutzen Sie <code class="varname">
		  ${JAVA_PORT_VERSION:C/^([0-9])\.([0-9])(.*)$/\1.\2/}</code>.</td></tr><tr><td><code class="varname">JAVA_PORT_OS</code></td><td>Das vom JDK-Port benutzte Betriebssystem (z.B.
		  <code class="literal">'native'</code>).</td></tr><tr><td><code class="varname">JAVA_PORT_VENDOR</code></td><td>Der Anbieter des JDK-Ports (z.B.
		  <code class="literal">'freebsd'</code>).</td></tr><tr><td><code class="varname">JAVA_PORT_OS_DESCRIPTION</code></td><td>Beschreibung des vom JDK-Port benutzten
		  Betriebssystems (z.B.
		  <code class="literal">'Native'</code>).</td></tr><tr><td><code class="varname">JAVA_PORT_VENDOR_DESCRIPTION</code></td><td>Beschreibung des Anbieters des JDK-Ports (z.B.
		  <code class="literal">'FreeBSD Foundation'</code>).</td></tr><tr><td><code class="varname">JAVA_HOME</code></td><td>Pfad zum Installationsverzeichnis des JDK (z.B.
		  <code class="filename">'/usr/local/diablo-jdk1.6.0'</code>).</td></tr><tr><td><code class="varname">JAVAC</code></td><td>Pfad zum Java-Compiler, der benutzt werden soll
		  (z.B. <code class="filename">'/usr/local/diablo-jdk1.6.0/bin/javac'</code>.</td></tr><tr><td><code class="varname">JAR</code></td><td>Pfad zum <code class="command">jar</code>-Werkzeug, das
		  benutzt werden soll
		  (z.B.'<code class="filename">'/usr/local/diablo-jdk1.6.0/bin/jar</code> oder
		  <code class="filename">'/usr/local/bin/fastjar'</code>).</td></tr><tr><td><code class="varname">APPLETVIEWER</code></td><td>Pfad zum <code class="command">appletviewer</code>-Werkzeug
		(z.B. <code class="filename">'/usr/local/diablo-jdk1.6.0/bin/appletviewer'</code>).</td></tr><tr><td><code class="varname">JAVA</code></td><td>Pfad zur <code class="command">java</code> Binärdatei.
		  Benutzen Sie dies, um Java-Programme auszuführen
		  (z.B.<code class="filename">'/usr/local/diablo-jdk1.6.0/bin/java'</code>).</td></tr><tr><td><code class="varname">JAVADOC</code></td><td>Pfad zum
		  <code class="command">javadoc</code>-Werkzeug.</td></tr><tr><td><code class="varname">JAVAH</code></td><td>Pfad zum <code class="command">javah</code>-Programm.</td></tr><tr><td><code class="varname">JAVAP</code></td><td>Pfad zum <code class="command">javap</code>-Programm.</td></tr><tr><td><code class="varname">JAVA_KEYTOOL</code></td><td>Pfad zum <code class="command">keytool</code>-Werkzeug.</td></tr><tr><td><code class="varname">JAVA_N2A</code></td><td>Pfad zum
		  <code class="command">native2ascii</code>-Werkzeug.</td></tr><tr><td><code class="varname">JAVA_POLICYTOOL</code></td><td>Pfad zum <code class="command">policytool</code> Programm.</td></tr><tr><td><code class="varname">JAVA_SERIALVER</code></td><td>Pfad zum
		  <code class="command">serialver</code>-Werkzeug.</td></tr><tr><td><code class="varname">RMIC</code></td><td>Pfad zum RMI Stub/Skeleton-Generator,
		  <code class="command">rmic</code>.</td></tr><tr><td><code class="varname">RMIREGISTRY</code></td><td>Pfad zum RMI Registry-Werkzeug,
		  <code class="command">rmiregistry</code>.</td></tr><tr><td><code class="varname">RMID</code></td><td>Pfad zum RMI Daemon <code class="command">rmid</code>.</td></tr><tr><td><code class="varname">JAVA_CLASSES</code></td><td>Pfad zum Archiv, das die JDK-Klassendateien
		  enthält, <code class="filename">${JAVA_HOME}/jre/lib/rt.jar</code>.</td></tr></tbody></table></div></div><br class="table-break" /><p>Sie können das <code class="literal">java-debug</code>
	  make-Target benutzen, um Information zum Debuggen
	  Ihres Ports zu erhalten. Es wird die Werte vieler
	  der obenangegebenen Variablen anzeigen.</p><p>Zusätzlich sind die folgenden Konstanten
	  definiert, damit alle Java-Ports auf eine konsistente
	  Art installiert werden können:</p><div class="table"><a id="idp69115984"></a><div class="table-title">Tabelle 6.16. Konstanten, die für Ports, welche Java benutzen,
	    definiert sind</div><div class="table-contents"><table summary="Konstanten, die für Ports, welche Java benutzen,&#10;&#9;    definiert sind" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Konstante</th><th>Wert</th></tr></thead><tbody><tr><td><code class="varname">JAVASHAREDIR</code></td><td>Das Basis-Verzeichnis für alles, was mit Java
		  zusammenhängt. Standardmäßig
		  <code class="filename">${PREFIX}/share/java</code>.</td></tr><tr><td><code class="varname">JAVAJARDIR</code></td><td>Das Verzeichnis, wohin JAR-Dateien installiert
		  werden sollen. Standardmäßig
		  <code class="filename">${JAVASHAREDIR}/classes</code>.</td></tr><tr><td><code class="varname">JAVALIBDIR</code></td><td>Das Verzeichnis, in dem JAR-Dateien, die von
		  anderen Ports installiert wurden, liegen.
		  Standardmäßig <code class="filename">
		  ${LOCALBASE}/share/java/classes</code>.</td></tr></tbody></table></div></div><br class="table-break" /><p>Die entsprechenden Einträge sind sowohl in
	  <code class="varname">PLIST_SUB</code> (dokumentiert in
	  <a class="xref" href="plist.html#plist-sub" title="7.1. Änderungen an pkg-plist mit Hilfe von make-Variablen">Abschnitt 7.1, &#8222;Änderungen an <code class="filename">pkg-plist</code> mit
	Hilfe von make-Variablen&#8220;</a>) als auch in
	  <code class="varname">SUB_LIST</code> definiert.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="java-building-with-ant"></a>6.11.2. Kompilieren mit Ant</h3></div></div></div><p>Wenn der Port mit Apache Ant kompiliert werden soll,
	  muss er <code class="varname">USE_ANT</code> setzen. Ant wird dann
	  als das sub-make-Kommando betrachtet. Wenn kein
	  <code class="literal">do-build</code>-Target vom Port definiert ist,
	  wird eine Standardvorgabe benutzt, die einfach Ant
	  entsprechend <code class="varname">MAKE_ENV</code>,
	  <code class="varname">MAKE_ARGS</code> und
	  <code class="varname">ALL_TARGET</code> aufruft. Das ähnelt dem
	  <code class="varname">USE_GMAKE</code>-Mechanismus, der in <a class="xref" href="building.html" title="6.3. Build-Mechanismen">Abschnitt 6.3, &#8222;Build-Mechanismen&#8220;</a> dokumentiert ist.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="java-best-practices"></a>6.11.3. Optimales Verfahren</h3></div></div></div><p>Wenn Sie eine Java-Bibliothek portieren, sollte Ihr Port
	  die JAR-Datei(en) in <code class="filename">${JAVAJARDIR}</code>
	  installieren, und alles andere unter
	  <code class="filename">${JAVASHAREDIR}/${PORTNAME}</code>
	  (ausgenommen die Dokumentation - siehe unten). Um die
	  Größe der Packlistendatei zu reduzieren,
	  können die JAR-Datei(en) direkt im
	  <code class="filename">Makefile</code> angegeben werden. Benutzen
	  Sie einfach die folgende Anweisung (wobei
	  <code class="filename">myport.jar</code> der Name der JAR-Datei ist,
	  die als Teil des Ports installiert wird):</p><pre class="programlisting">PLIST_FILES+= %%JAVAJARDIR%%/myport.jar</pre><p>Beim Portieren einer Java-Applikation installiert der
	  Port normalerweise alles unter einem einzigen Verzeichnis
	  (inklusive seiner JAR-Abhängigkeiten). Die Benutzung
	  von <code class="filename">${JAVASHAREDIR}/${PORTNAME}</code>
	  wird in dieser Beziehung dringend empfohlen. Es liegt
	  im Entscheidungsbereich des Portierenden, ob der Port
	  die zusätzlichen JAR-Abhängigkeiten unter
	  diesem Verzeichnis installieren oder direkt die schon
	  installierten (aus <code class="filename">${JAVAJARDIR}</code>)
	  benutzen soll.</p><p>Unabhängig von der Art Ihres Ports (Bibliothek
	  oder Applikation), sollte die zusätzliche Dokumentation
	  an die <a class="link" href="install.html#install-documentation" title="5.14.4. Installation zusätzlicher Dokumentation">gleiche Stelle</a>
	  installiert werden wie bei jedem anderen Port auch.
	  Das JavaDoc-Werkzeug ist dafür bekannt einen
	  unterschiedlichen Satz von Dateien abhängig von der
	  Version des benutzten JDKs zu erstellen. Für Ports,
	  die nicht die Benutzung eines bestimmten JDKs vorgeben,
	  ist es deshalb eine komplexe Aufgabe die Packliste
	  (<code class="filename">pkg-plist</code>) festzulegen. Dies ist
	  ein Grund, warum dringend angeraten wird, das
	  <code class="varname">PORTDOCS</code>-Makro zu benutzen.
	  Außerdem, selbst wenn Sie den Satz von Dateien,
	  den <code class="command">javadoc</code> erzeugen wird,
	  voraussagen können, die Größe der
	  resultierenden <code class="filename">pkg-plist</code>
	  befürwortet die Benutzung von
	  <code class="varname">PORTDOCS</code>.</p><p>Der Vorgabewert für <code class="varname">DATADIR</code> ist
	  <code class="filename">${PREFIX}/share/${PORTNAME}</code>. Es ist
	  eine gute Idee, <code class="varname">DATADIR</code> für
	  Java-Ports stattdessen auf
	  <code class="filename">${JAVASHAREDIR}/${PORTNAME}</code> zu setzen.
	  In der Tat wird <code class="varname">DATADIR</code> automatisch zu
	  <code class="varname">PLIST_SUB</code> (dokumentiert in <a class="xref" href="plist.html#plist-sub" title="7.1. Änderungen an pkg-plist mit Hilfe von make-Variablen">Abschnitt 7.1, &#8222;Änderungen an <code class="filename">pkg-plist</code> mit
	Hilfe von make-Variablen&#8220;</a>) hinzugefügt, d.h. Sie können
	  <code class="literal">%%DATADIR%%</code> direkt in
	  <code class="filename">pkg-plist</code> benutzen.</p><p>Zu der Frage, ob Java-Ports aus dem Quelltext gebaut
	  werden, oder direkt bereitgestellte binäre
	  Distributionen benutzt werden sollten, gab es, als dies
	  geschrieben wurde, keine definierte Richtlinie. Allerdings
	  ermutigen Mitglieder des <a class="link" href="http://www.freebsd.org/java/" target="_top">FreeBSD
	  Java-Projekts</a> Porter dazu, Ihre Ports aus dem
	  Quelltext kompilieren zu lassen, wann immer dies kein
	  Problem darstellt.</p><p>Alle Eigenschaften, die in diesem Abschnitt
	  präsentiert wurden sind in
	  <code class="filename">bsd.java.mk</code> implementiert.
	  Sollten Sie jemals der Meinung sein, dass Ihr Port
	  ausgefeiltere Java-Unterstützung benötigt,
	  schauen Sie bitte erst in das <a class="link" href="http://www.freebsd.org/cgi/cvsweb.cgi/ports/Mk/bsd.java.mk" target="_top">
	  bsd.java.mk CVS Log</a>, weil es normalerweise immer
	  etwas Zeit braucht bis die neuesten Eigenschaften
	  dokumentiert sind. Wenn Sie glauben, dass der fehlende
	  Support auch für viele andere Java Ports nützlich
	  sein könnte, wenden Sie sich bitte an die
	  <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-java" target="_top">FreeBSD Java Language</a>.</p><p>Obwohl es eine <code class="literal">java</code>-Kategorie
	  für Fehlerberichte gibt, bezieht sich diese auf die
	  JDK-Portierungsbemühungen des FreeBSD Java-Projektes.
	  Deshalb sollten Sie Ihren Java-Port in der
	  <code class="literal">ports</code>-Kategorie einreichen wie bei
	  jeden anderen Port auch - es sei denn, die Angelegenheit,
	  die Sie zu klären versuchen, steht in Zusammenhang
	  entweder mit einer JDK-Implementierung oder
	  <code class="filename">bsd.java.mk</code>.</p><p>Gleichermaßen gibt es eine definierte Richtlinie
	  für die <code class="varname">CATEGORIES</code> eines Java-Ports,
	  die in <a class="xref" href="makefile-categories.html" title="5.3. Kategorisierung">Abschnitt 5.3, &#8222;Kategorisierung&#8220;</a> erklärt
	  wird.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-kde.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="using-php.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">6.10. Benutzung von KDE </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 6.12. Webanwendungen, Apache und PHP</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>