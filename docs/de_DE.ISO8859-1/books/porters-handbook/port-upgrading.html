<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Kapitel 10. Einen existierenden Port aktualisieren</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD Porter-Handbuch" /><link rel="up" href="index.html" title="Das FreeBSD Porter-Handbuch" /><link rel="prev" href="testing-tinderbox.html" title="9.5. Die Tinderbox" /><link rel="next" href="moved-and-updating-files.html" title="10.2. Die Dateien UPDATING und MOVED" /><link rel="copyright" href="trademarks.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Kapitel 10. Einen existierenden Port aktualisieren</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="testing-tinderbox.html">Zurück</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="moved-and-updating-files.html">Weiter</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="port-upgrading"></a>Kapitel 10. Einen existierenden Port aktualisieren</h1></div></div></div><div class="toc"><div class="toc-title">Inhaltsverzeichnis</div><dl class="toc"><dt><span class="sect1"><a href="port-upgrading.html#cvs-diff">10.1. Patches mit CVS erstellen</a></span></dt><dt><span class="sect1"><a href="moved-and-updating-files.html">10.2. Die Dateien UPDATING und MOVED</a></span></dt></dl></div><p>Wenn Sie feststellen, dass ein Port verglichen mit der
      neuesten Version des Originalautors nicht mehr auf dem aktuellen
      Stand ist, sollten Sie als Erstes sicherstellen, dass Sie die
      aktuellste Version des Ports haben. Diese finden Sie im
      Verzeichnis <code class="filename">ports/ports-current</code> der FreeBSD
      FTP-Spiegelseiten. Wenn Sie allerdings mit mehr als ein paar
      Ports arbeiten, werden Sie es wahrscheinlich einfacher finden
      <span class="application">CVSup</span> zu benutzen, um Ihre gesamte
      Ports-Sammlung aktuell zu halten, wie es im <a class="link" href="../../../../doc/de_DE.ISO8859-1/books/handbook/synching.html#CVSUP-CONFIG" target="_top">Handbuch</a>
      beschrieben wird. Das hat zusätzlich den Vorteil, dass Sie
      so auch alle Abhängigkeiten des Ports aktuell
      halten.</p><p>Der nächste Schritt besteht darin festzustellen, ob
      bereits eine Aktualisierung des Ports darauf wartet committet zu
      werden. Um das sicherzustellen haben Sie folgende
      Möglichkeiten. Es gibt eine durchsuchbare Schnittstelle zur
      <a class="link" href="http://www.FreeBSD.org/cgi/query-pr-summary.cgi?query" target="_top">FreeBSD
      Problembericht Datenbank (PR - Problem Report)</a> (auch
      bekannt als <code class="literal">GNATS</code>). Wählen Sie dazu
      <code class="literal">Ports</code> im Drop-Down-Menü und geben Sie
      den Namen des Ports ein.</p><p>Allerdings wird manchmal vergessen den Namen des Ports
      eindeutig im Feld für die Zusammenfassung anzugeben. In
      diesem Fall können Sie das <a class="link" href="portsmon.html" title="14.6. Das FreeBSD Ports-Monitoring-System">FreeBSD
      Ports Monitoring System</a> (auch bekannt als
      <code class="literal">portsmon</code>) nutzen. Dieses versucht PRs von
      Ports nach Portname zu sortieren. Um PRs nach einem bestimmten
      Port zu durchsuchen können Sie die <a class="link" href="http://portsmon.FreeBSD.org/portoverview.py" target="_top">Übersicht
      eines Ports</a> verwenden.</p><p>Wenn es keine wartenden PRs gibt, ist der nächste
      Schritt eine E-Mail an den Maintainer des Ports zu schicken, wie
      von <code class="command">make maintainer</code> gezeigt wird. Diese
      Person arbeitet vielleicht schon an einer Aktualisierung, oder
      hat einen guten Grund den Port im Moment nicht zu aktualisieren
      (z.B. wegen Stabilitätsproblemen der neuen Version). Sie
      wollen sicher nicht die Arbeit des Maintainers doppelt machen.
      Beachten Sie bitte, dass für Ports ohne Maintainer
      <code class="literal">ports@FreeBSD.org</code> eingetragen ist. Das ist
      nur die allgemeine <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">FreeBSD ports</a>-Mailingliste, deshalb wird es in
      diesem Fall wahrscheinlich nicht helfen eine E-Mail dorthin zu
      schicken.</p><p>Wenn Sie der Maintainer bittet die Aktualisierung zu
      erledigen, oder falls es keinen Maintainer gibt, haben Sie
      Gelegenheit, FreeBSD zu helfen, indem Sie die Aktualisierung
      selbst bereitstellen.  Dazu verwenden Sie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>, das
      bereits im Basissystem enthalten ist.</p><p>Um einen brauchbaren <code class="command">diff</code> für einen
      einzelne Datei zu erstellen, kopieren Sie die zu patchende
      Datei nach <em class="replaceable"><code>dateiname.orig</code></em> und speichern
      Ihre Änderungen in die Datei
      <em class="replaceable"><code>dateiname</code></em>.  Danach erzeugen Sie den
      Patch:</p><div class="informalexample"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>/usr/bin/diff dateiname.orig dateiname &gt; dateiname.diff</code></strong></pre></div><p>Soll mehr als eine Datei gepatcht werden, können Sie
      entweder <code class="command">cvs diff</code> verwenden (siehe dazu <a class="xref" href="port-upgrading.html#cvs-diff" title="10.1. Patches mit CVS erstellen">Abschnitt 10.1, &#8222;Patches mit CVS erstellen&#8220;</a>) oder Sie kopieren
      den kompletten Port in ein neues Verzeichnis und speichern die
      Ausgabe des rekursiven <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> auf das neue und alte
      Portverzeichniss (wenn Ihr verändertes Portverzeichnis z.B.
      <code class="filename">superedit</code> und das Original
      <code class="filename">superedit.bak</code> heißt, dann speichern
      Sie bitte die Ergebnisse von <code class="command">diff -ruN superedit.bak
      superedit</code>). Sowohl vereinheitlichendes als auch
      kontextabhängiges diff (Auflistung der Unterschiede zweier
      Dateien) sind akzeptabel, aber im Allgemeinen bevorzugen
      Port-Committer vereinheitlichende <code class="command">diff</code>s.
      Bitte beachten Sie die Verwendung der
      <code class="literal">-N</code>-Option. Dies ist der gebräuchliche
      Weg <code class="command">diff</code> dazu zu bewegen korrekt damit
      umzugehen, neue Dateien anzulegen und alte zu löschen.
      Bevor Sie das diff einsenden überprüfen Sie bitte die
      Ausgabe, um sicherzugehen, dass die Änderungen sinnvoll
      sind.  Stellen Sie insbesondere sicher, dass Sie das
      Arbeitsverzeichnis mit <code class="command">make clean</code>
      aufgerät haben).</p><p>Um gängige Operationen mit Korrekturdateien zu
      vereinfachen, können Sie
      <code class="filename">/usr/ports/Tools/scripts/patchtool.py</code>
      benutzen. Aber lesen Sie bitte vorher
      <code class="filename">/usr/ports/Tools/scripts/README.patchtool</code>.</p><p>Falls der Port keinen Maintainer hat und Sie ihn selbst
      aktiv benutzen, ziehen Sie bitte in Erwägung sich als
      Maintainer zu melden. FreeBSD hat mehr als 4000 Ports ohne
      Maintainer und in diesem Bereich werden immer zusätzliche
      Freiwillige benötigt (Für eine ausführliche
      Beschreibung der Verantwortlichkeiten eines Maintainers lesen
      Sie bitte im <a class="link" href="../../../../doc/de_DE.ISO8859-1/books/developers-handbook/policies.html#POLICIES-MAINTAINER" target="_top">
      Developer's Handbook</a> nach).</p><p>Der beste Weg uns das diff zu schicken ist mittels
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a> (Kategorie Ports). Wenn Sie der Maintainer des
      Ports sind, fügen Sie bitte <code class="literal">[maintainer
      update]</code> an den Anfang Ihrer Zusammenfassung und setzen
      Sie die <span class="quote">&#8222;<span class="quote">Klasse</span>&#8220;</span> des PR auf
      <code class="literal">maintainer-update</code>. Ansonsten sollte die
      <span class="quote">&#8222;<span class="quote">Klasse</span>&#8220;</span> des PR <code class="literal">change-request</code>
      sein. Bitte erwähnen Sie alle hinzugefügten oder
      gelöschten Dateien in der Nachricht, da diese beim Commit
      ausdrücklich an <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a> übergeben werden
      müssen. Wenn das diff größer ist als 20 Kilobyte
      komprimieren und uuencoden Sie es bitte. Ansonsten können
      Sie es in den PR einfügen wie es ist.</p><p>Bevor Sie den PR mit <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a> abschicken, sollten
      Sie den Abschnitt <a class="link" href="../../../../doc/de_DE.ISO8859-1/articles/problem-reports/pr-writing.html" target="_top"> Den
      Problembericht schreiben</a> im Artikel über
      Problemberichte lesen. Dieser enthält sehr viel mehr
      Informationen darüber, wie man nützliche
      Problemberichte verfasst.</p><div xmlns="" class="important"><h3 class="admontitle">Wichtig: </h3><p xmlns="http://www.w3.org/1999/xhtml">Wenn Sie Ihre Aktualisierung aufgrund von
	Sicherheitsbedenken oder eines schwerwiegenden Fehlers
	bereitstellen wollen, informieren Sie bitte das Ports Management Team <code class="email">&lt;<a xmlns="" class="email" href="mailto:portmgr@FreeBSD.org">portmgr@FreeBSD.org</a>&gt;</code>,
	um einen sofortigen Rebuild und eine Neuverteilung des Pakets
	Ihres Ports durchzuführen. Sonst werden ahnungslose
	Nutzer von <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> über mehrere Wochen die alte
	Version durch <code class="command">pkg_add -r</code>
	installieren.</p></div><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Noch einmal: Bitte verwenden Sie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> und nicht
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">shar</span>(1)</span></a>, um Aktualisierungen existierender Ports zu
	senden.  Sie erleichtern es damit den Ports-Committern,
	Ihre Änderungen nachzuvollziehen.</p></div><p>Nun, da Sie all das geschafft haben, können Sie in <a class="xref" href="keeping-up.html" title="Kapitel 14. Auf dem Laufenden bleiben">Kapitel 14, <em>Auf dem Laufenden bleiben</em></a> nachlesen, wie Sie den Port
      aktuell halten.</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="cvs-diff"></a>10.1. Patches mit CVS erstellen</h2></div></div></div><p>Wenn möglich, sollten Sie stets eine <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a>-Differenz
	einreichen.  Diese sind leichter zu bearbeiten als Differenzen
	zwischen <span class="quote">&#8222;<span class="quote">neuen und alten</span>&#8220;</span> Verzeichnissen.  Außerdem
	könenn Sie so einfacher feststellen, welche Änderungen Sie
	vorgenommen haben oder Ihren Patch modifizieren, falls dies durch
	Änderungen in einem anderen Bereich der Ports-Sammlung notwendig
	wird oder Sie vom Committer um eine Korrektur Ihres Patches gebeten
	werden.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd ~/my_wrkdir</code></strong> <a id="my-wrkdir"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
<code class="prompt">%</code> <strong class="userinput"><code>cvs -d R_CVSROOT co pdnsd</code></strong> <a id="R-CVSROOT"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span> <a id="module-name"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
<code class="prompt">%</code> <strong class="userinput"><code>cd ~/my_wrkdir/pdnsd</code></strong></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#my-wrkdir"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Das Verzeichnis, in dem Sie den Port bauen wollen.  Dieses
	    Arbeitsverzeichnis kann sich auch außerhalb von
	    <code class="filename">/usr/ports/</code> befinden.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#R-CVSROOT"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>R_CVSROOT steht für einen öffentlichen CVS-Server.
	    Eine Liste aller verfügbaren Server finden Sie im <a class="link" href="../../../../doc/de_DE.ISO8859-1/books/handbook/cvsup.html" target="_top">FreeBSD Handbuch</a>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#module-name"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Ersetzen Sie <span class="quote">&#8222;<span class="quote">pdnsd</span>&#8220;</span> durch den Modulnamen des
	    Ports.  Dieser entspricht in der Regel dem Namen des Ports.
	    Allerdings gibt es einige Ausnahmen von dieser Regel, insbesondere
	    bei sprachspezifischen Ports (beispielsweise lautet der Modulname
	    für den Port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/german/selfhtml/pkg-descr">german/selfhtml</a>
	    de-selfhtml).  Um den Namen des Moduls herauszufinden, können
	    Sie entweder die <a class="link" href="../../../../cgi/cvsweb.cgi/ports" target="_top">cvsweb-Schnittstelle</a>
	    verwenden oder den kompletten Pfad des Ports angeben (in unserem
	    Beispiel wäre der komplette Pfad also <code class="filename">ports/dns/pdnsd</code>).</p></td></tr></table></div><p>Danach modifizieren Sie den Port in gewohnter Weise.  Falls Sie
	Dateien hinzufügen oder entfernen, sollten Sie dies mit
	<code class="command">cvs</code> protokollieren:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs add new_file</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cvs remove deleted_file</code></strong></pre><p>Überprüfen Sie die Funktion Ihres Ports anhand der
	Checklisten in <a class="xref" href="porting-testing.html" title="3.4. Den Port testen">Abschnitt 3.4, &#8222;Den Port testen&#8220;</a> und
	<a class="xref" href="porting-portlint.html" title="3.5. Ihren Port mit portlint überprüfen">Abschnitt 3.5, &#8222;Ihren Port mit <code class="command">portlint</code>
	überprüfen&#8220;</a>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs status</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cvs update</code></strong> <a id="cvs-update"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#cvs-update"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Dadurch wird versucht, die Differenz zwischen Ihrer
	    geänderten Version und dem aktuellen Stand im CVS zu
	    kombinieren.  Achten Sie dabei unbedingt auf die Ausgabe dieses
	    Befehls.  Vor jeder Datei wird ein Buchstabe angezeigt, der
	    Ihnen mitteilt, was mit dieser Datei passiert ist.  Eine
	    vollständige Liste dieser Präfixe finden Sie in
	    <a class="xref" href="port-upgrading.html#table-cvs-up" title="Tabelle 10.1. Von cvs update verwendete Präfixe">Tabelle 10.1, &#8222;Von cvs update verwendete Präfixe&#8220;</a>.</p></td></tr></table></div><div class="table"><a id="table-cvs-up"></a><div class="table-title">Tabelle 10.1. Von cvs update verwendete Präfixe</div><div class="table-contents"><table summary="Von cvs update verwendete Präfixe" width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>U</td><td>Die Datei wurde aktualisiert.  Es traten dabei keine
		Probleme auf.</td></tr><tr><td>P</td><td>Die Datei wurde ohne Probleme aktualisiert (dieses
		Präfix wird nur verwendet, wenn Sie mit einem
		entfernten Repository arbeiten).</td></tr><tr><td>M</td><td>Die Datei wurde modifiziert.  Es traten keine Konflikte
		auf.</td></tr><tr><td>C</td><td>Die Datei wurde modifiziert, allerdings kam es dabei zu
		Konflikten zwischen Ihrer geänderten Version und der
		aktuellen Version im CVS.</td></tr></tbody></table></div></div><br class="table-break" /><p>Wird das Präfix <code class="literal">C</code> nach einem
	<code class="literal">cvs update</code> angezeigt, bedeutet dies, dass im CVS
	etwas geändert wurde und <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a> daher nicht in der Lage war,
	Ihre Änderungen und die Änderungen im CVS zu kombinieren.
	Es ist immer sinnvoll, sich die Änderungen anzusehen, da
	<code class="command">cvs</code> keine Informationen darüber hat, wie ein
	Port aufgebaut sein soll.  Es kann (und wird wahrscheinlich) daher
	vorkommen, dass sich manchmal Änderungen ergeben, die keinen
	Sinn machen.</p><p>Im letzten Schritt erzeugen Sie einen <span class="quote">&#8222;<span class="quote">unified
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a></span>&#8220;</span> gegen die derzeit im CVS vorhandenen Dateien:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs diff -uN &gt; ../`basename ${PWD}`.diff</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Verwenden Sie unbedingt die Option <code class="option">-N</code>, um
	  sicherzustellen, dass von hinzugefügte oder gelöschte
	  Dateien im Patch erfasst sind.  Der Patch enthät auch
	  von Ihnen gelöschte Dateien (allerdings ohne Inhalt).  Dies
	  ist wichtig, da nur so der Committer wissen kann, welche Dateien
	  er entfernen muss.</p></div><p>Zuletzt reichen Sie Ihren Patch ein, indem Sie der Anleitung in
	<a class="xref" href="port-upgrading.html" title="Kapitel 10. Einen existierenden Port aktualisieren">Kapitel 10, <em>Einen existierenden Port aktualisieren</em></a> folgen.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="testing-tinderbox.html">Zurück</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="moved-and-updating-files.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">9.5. Die Tinderbox </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 10.2. Die Dateien UPDATING und MOVED</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>