<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>5.3. make(1)-Includes des FreeBSD Documentation Projects</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Die Fibel für neue Mitarbeiter des FreeBSD-Dokumentationsprojekts" /><link rel="up" href="doc-build.html" title="Kapitel 5. Die Erzeugung der Zieldokumente" /><link rel="prev" href="doc-build-makefiles.html" title="5.2. Die Makefiles des Dokumentationsbaums verstehen" /><link rel="next" href="the-website.html" title="Kapitel 6. Die Webseite" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5.3. make(1)-Includes des FreeBSD Documentation Projects</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="doc-build-makefiles.html">Zurück</a> </td><th width="60%" align="center">Kapitel 5. Die Erzeugung der Zieldokumente</th><td width="20%" align="right"> <a accesskey="n" href="the-website.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="make-includes"></a>5.3. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>-Includes des FreeBSD Documentation Projects</h2></div></div></div><p>Diese Dateien lassen sich am besten verstehen, indem man sich
      deren Inhalt näher ansieht.  Konkret handelt es sich dabei
      um folgende Dateien:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">doc.project.mk</code> ist die
	  Haupt-Include-Datei, die bei Bedarf alle folgenden
	  Include-Dateien enthält.</p></li><li class="listitem"><p><code class="filename">doc.subdir.mk</code> sorgt dafür, dass
	  alle benötigten Verzeichnisse (und Unterverzeichnisse)
	  beim Bau der Dokumentation durchlaufen werden.</p></li><li class="listitem"><p><code class="filename">doc.install.mk</code> definiert Variablen,
	  die die Installation der Dokumentation beeinflussen.</p></li><li class="listitem"><p><code class="filename">doc.docbook.mk</code> wird verwendet, wenn
	  die Variable <code class="varname">DOCFORMAT</code> den Wert
	  <code class="literal">docbook</code> hat und die Variable
	  <code class="varname">DOC</code> gesetzt ist.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp64608080"></a>5.3.1. <code class="filename">doc.project.mk</code></h3></div></div></div><p>Diese Datei hat folgenden Aufbau:</p><pre class="programlisting">DOCFORMAT?=	docbook
MAINTAINER?=	doc@FreeBSD.org

PREFIX?=	/usr/local
PRI_LANG?=	en_US.ISO8859-1

.if defined(DOC)
.if ${DOCFORMAT} == "docbook"
.include "doc.docbook.mk"
.endif
.endif

.include "doc.subdir.mk"
.include "doc.install.mk"</pre><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp64611920"></a>5.3.1.1. Variablen</h4></div></div></div><p><code class="varname">DOCFORMAT</code> und <code class="varname">MAINTAINER</code>
	  enthalten Standardwerte, falls ihnen über das
	  Dokument-Makefile keine anderen Werte zugewiesen werden.</p><p>Bei <code class="varname">PREFIX</code> handelt es sich um das
	  Präfix, unter dem die zum Bau der Dokumentation
	  erforderlichen <a class="link" href="tools.html" title="Kapitel 2. Die Werkzeuge">SGML-Werkzeuge</a>
	  installiert sind.  In der Regel handelt es sich dabei um
	  <code class="filename">/usr/local</code>.</p><p><code class="varname">PRI_LANG</code> sollte auf die Sprache und
	  Kodierung eingestellt werden, die unter den Leser der
	  Dokumentation am häufigsten verwendet wird.  Diese
	  Variable hat den Standardwert "US English".</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="varname">PRI_LANG</code> beeinflusst nicht,
	    welche Dokumente gebaut werden können oder
	    sollen.  Diese Variable wird lediglich dazu verwendet,
	    häufig verwendete Dokumente in das Wurzelverzeichnis
	    der installierten Dokumentation zu verlinken.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp64661584"></a>5.3.1.2. Bedingungen</h4></div></div></div><p>Die Zeile <code class="literal">.if defined(DOC)</code> ist ein
	  Beispiel für eine <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>-Bedingung, die (analog zum
	  Einsatz in anderen Programmen) festlegt, was geschehen soll,
	  wenn eine Bedingung "wahr" oder "falsch" ist.
	  <code class="literal">defined</code> ist eine Funktion, die
	  zurückgibt, ob die angegebene Variable existiert oder
	  nicht.</p><p><code class="literal">.if ${DOCFORMAT} == "docbook"</code> testet,
	  ob die Variable <code class="varname">DOCFORMAT</code> den Wert
	  <code class="literal">"docbook"</code> hat.  Ist dies der Fall, wird
	  <code class="filename">doc.docbook.mk</code> mit in den Bau
	  aufgenommen.</p><p>Die zwei <code class="literal">.endif</code>s schließen die
	  zwei weiter oben definierten Bedingungen.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp64688080"></a>5.3.2. <code class="filename">doc.subdir.mk</code></h3></div></div></div><p>Den Inhalt dieser Datei hier zu beschreiben, würde
	zu weit führen.  Sie sollten aber nach dem Lesen der
	vorangegangenen Abschnitte und der folgenden Ausführungen
	in der Lage sein, Inhalt und Aufgabe dieser Datei zu
	verstehen.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp64690896"></a>5.3.2.1. Variablen</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">SUBDIR</code> legt die Unterverzeichnisse
	      fest, deren Inhalt beim Bau der Dokumentation inkludiert
	      werden muss.</p></li><li class="listitem"><p>Mit <code class="varname">ROOT_SYMLINKS</code> wird der Name der
	      Verzeichnisse angegeben, die von ihrer tatsächlichen
	      Position aus in das Wurzelverzeichnis, unter dem die
	      Dokumentation installiert wird, verlinkt werden sollen.
	      Vorausgesetzt, bei der verwendeten Sprache handelt es sich
	      um die primäre Sprache (die über
	      <code class="varname">PRI_LANG</code> festgelegt wird).</p></li><li class="listitem"><p><code class="varname">COMPAT_SYMLINK</code> wird im Abschnitt
	      <a class="link" href="doc-build-makefiles.html#sub-make" title="5.2.1. Unterverzeichnis-Makefiles">Unterverzeichnis-Makefile</a>s
	      beschrieben.</p></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp64703312"></a>5.3.2.2. Targets und Makros</h4></div></div></div><p>Abhängigkeiten
	  (<span class="foreignphrase"><em class="foreignphrase">Dependencies</em></span>) werden
	  folgendermaßen definiert:
	  <code class="literal"><em class="replaceable"><code>target</code></em>
	  <em class="replaceable"><code>abhaengigkeit1 abhaengigkeit2 ...</code></em></code>.
	  Um <code class="literal">target</code> zu bauen, müssen Sie zuvor
	  die angegebenen Abhängigkeiten bauen.</p><p>Daran anschließend können Anweisungen zum
	  Bau des angegebenen Targets folgen, falls der
	  Konvertierungsprozess zwischen dem Target und seinen
	  Abhängigkeiten nicht bereits früher definiert
	  wurde oder falls die Konvertierung nicht der
	  Standardkonvertierungsmethode entspricht.</p><p>Die spezielle Abhängigkeit <code class="literal">.USE</code>
	  definiert das Äquivalent eines Makros.</p><pre class="programlisting">_SUBDIRUSE: .USE
.for entry in ${SUBDIR}
	@${ECHO} "===&gt; ${DIRPRFX}${entry}"
	@(cd ${.CURDIR}/${entry} &amp;&amp; \
	${MAKE} ${.TARGET:S/realpackage/package/:S/realinstall/install/} DIRPRFX=${DIRPRFX}${entry}/ )
.endfor</pre><p>In diesem Beispiel kann <code class="buildtarget">_SUBDIRUSE</code>
	  nun als Makro, welches die angegebenen Befehle ausführt,
	  verwendet werden, indem es im Makefile als Abhängigkeit
	  angegeben wird.</p><p>Was unterscheidet dieses Makro nun von beliebigen anderen
	  Targets?  Der Hauptunterschied ist, dass es
	  <span class="emphasis"><em>nach</em></span> den Anweisungen der Bauprozedur,
	  in der es als Abhängigkeit angegeben ist, ausgeführt
	  wird.  Außerdem ändert es die Variable
	  <code class="varname">.TARGET</code> (die den Namen des aktuell gebauten
	  Targets enthält) nicht.</p><pre class="programlisting">clean: _SUBDIRUSE
	rm -f ${CLEANFILES}</pre><p>In diesem Beispiel führt <code class="buildtarget">clean</code>
	  das Makro <code class="buildtarget">_SUBDIRUSE</code> aus, nachdem es
	  den Befehl <code class="command">rm -f ${CLEANFILES}</code> erfolgreich
	  ausgeführt hat.  Dadurch löscht
	  <code class="buildtarget">clean</code> zwar beim Wechsel in ein neues
	  <span class="emphasis"><em>Unterverzeichnis</em></span> beim Bau erstellte
	  Dateien, aber nicht beim Wechsel aus einem Unterverzeichnis
	  in ein übergeordnetes Verzeichnis.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp64724816"></a>5.3.2.2.1. Vorhandene Targets</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="buildtarget">install</code> und
		<code class="buildtarget">package</code> arbeiten nacheinander
		alle Unterverzeichnisse ab und rufen dabei jeweils ihre
		realen Versionen (<code class="buildtarget">realinstall</code>
		beziehungsweise <code class="buildtarget">realpackage</code>)
		auf.</p></li><li class="listitem"><p><code class="buildtarget">clean</code> entfernt alle
		Dateien, die beim Bau der Dokumentation erzeugt wurden
		(dies sowohl im aktuellen Verzeichnis als auch in allen
		Unterverzeichnissen).  <code class="buildtarget">cleandir</code>
		hat die gleiche Aufgabe, würde aber zusätzlich
		die Objekt-Verzeichnisse löschen (falls diese
		existieren).</p></li></ul></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp64749520"></a>5.3.2.3. Weitere Bedingungen</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">exists</code> gibt "wahr" zurück, wenn
	      die angegebene Datei bereits existiert.</p></li><li class="listitem"><p><code class="literal">empty</code> gibt "wahr" zurück, wenn
	      die angegebene Variable leer ist.</p></li><li class="listitem"><p><code class="literal">target</code> gibt "wahr" zurück, wenn
	      das angegebene Target noch nicht existiert.</p></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp64772816"></a>5.3.2.4. Schleifenkonstrukte in
	  <code class="command">make (.for)</code></h4></div></div></div><p><code class="literal">.for</code> erlaubt es, bestimmte
	  Anweisungen für jedes Element einer Variable zu
	  wiederholen, indem dieser Variable in jedem Durchlauf
	  der Schleife das jeweilige Element der untersuchten Liste
	  zugewiesen wird.</p><pre class="programlisting">_SUBDIRUSE: .USE
.for entry in ${SUBDIR}
	@${ECHO} "===&gt; ${DIRPRFX}${entry}"
	@(cd ${.CURDIR}/${entry} &amp;&amp; \
	${MAKE} ${.TARGET:S/realpackage/package/:S/realinstall/install/} DIRPRFX=${DIRPRFX}${entry}/ )
.endfor</pre><p>Falls das Verzeichnis <code class="varname">SUBDIR</code> leer ist,
	  würde in unserem Beispiel keine Aktion erfolgen.
	  Enthält das Verzeichnis hingegen ein oder mehrere
	  Elemente, werden die Anweisungen zwischen
	  <code class="literal">.for</code> und <code class="literal">.endfor</code>
	  für jedes Element ausgeführt, wobei
	  <code class="varname">entry</code> durch das jeweilige Element ersetzt
	  werden würde.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="doc-build-makefiles.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="doc-build.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="the-website.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">5.2. Die <code class="filename">Makefile</code>s des Dokumentationsbaums
      verstehen </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> Kapitel 6. Die Webseite</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>