<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>29.2. User-PPP</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="ppp-and-slip.html" title="Kapitel 29. PPP und SLIP" /><link rel="prev" href="ppp-and-slip.html" title="Kapitel 29. PPP und SLIP" /><link rel="next" href="ppp.html" title="29.3. Kernel-PPP" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">29.2. User-PPP</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ppp-and-slip.html">Zurück</a> </td><th width="60%" align="center">Kapitel 29. PPP und SLIP</th><td width="20%" align="right"> <a accesskey="n" href="ppp.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="userppp"></a>29.2. User-PPP</h2></div><div><span class="authorgroup">Aktualisiert und erweitert von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div><div><span class="authorgroup">Ursprünglich geschrieben von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Brian</span> <span class="surname">Somers</span></span>. </span></div><div><span class="authorgroup">Mit Beiträgen von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Nik</span> <span class="surname">Clayton</span></span>, <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Dirk</span> <span class="surname">Frömberg</span></span> und <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Peter</span> <span class="surname">Childs</span></span>. </span></div></div></div><div xmlns="" class="warning"><h3 class="admontitle">Warnung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Mit FreeBSD 8.0 wurden die Gerätedateien für
	serielle Ports umbenannt:
	<code class="filename">/dev/cuadN</code> wurde
	zu <code class="filename">/dev/cuauN</code>,
	<code class="filename">/dev/ttydN</code> zu
	<code class="filename">/dev/ttyuN</code>.
	Verwenden Sie noch FreeBSD 7.X, müssen Sie dies beim
	Lesen der folgenden Abschnitte berücksichtigen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87342800"></a>29.2.1. User-PPP</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87343440"></a>29.2.1.1. Voraussetzungen</h4></div></div></div><p>Dieses Dokument geht davon aus, dass Sie Folgendes zur
	  Verfügung haben:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Einen Account bei einem Internet Service Provider (ISP)<a id="ppp-isp" class="indexterm"></a>,
	      zu dem Sie mit PPP<a id="ppp-ppp2" class="indexterm"></a> eine Verbindung aufbauen können.</p></li><li class="listitem"><p>Ein Modem oder ein anderes Gerät, das, richtig
	      konfiguriert und mit Ihrem Rechner verbunden, Ihnen die
	      Herstellung einer Verbindung zu Ihrem ISP erlaubt.</p></li><li class="listitem"><p>Die Einwahlnummer(n) Ihres ISP.</p></li><li class="listitem"><p>Ihren Login-Namen<a id="ppp-login" class="indexterm"></a> und Ihr Passwort<a id="ppp-password" class="indexterm"></a> (entweder ein
	      reguläres Login/Passwort-Paar im <span class="trademark">UNIX</span>®-Stil<a id="ppp-unix" class="indexterm"></a> oder
	      ein PAP<a id="ppp-pap" class="indexterm"></a> bzw. CHAP<a id="ppp-chap" class="indexterm"></a> Login/Passwort-Paar).</p></li><li class="listitem"><p>Die IP-Adresse von einem oder mehreren Nameservern<a id="ppp-nameserver" class="indexterm"></a>.
	      Üblicherweise werden Ihnen von Ihrem ISP zwei
	      IP-Adressen für diesen Zweck zur Verfügung gestellt.
	      Wenn Sie keine solche IP-Adresse von Ihrem
	      Provider bekommen haben, können Sie das Kommando
	      <code class="command">enable dns</code> in der Datei
	      <code class="filename">ppp.conf</code> verwenden, um
	      <span class="application">ppp</span> anzuweisen, den Nameserver
	      für Sie einzutragen.  Diese Funktion setzt allerdings
	      voraus, dass Ihr ISP eine PPP-Implementierung verwendet,
	      die das Aushandeln eines Nameservers unterstützt.</p></li></ul></div><p>Die folgenden Informationen werden Ihnen möglicherweise
	  von Ihrem ISP zur Verfügung gestellt, sie sind aber nicht
	  zwingend erforderlich:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Die Gateway IP-Adresse Ihres ISP.  Als Gateway wird
	      der Computer bezeichnet, zu dem Sie eine Verbindung aufbauen.
	      Die IP-Adresse dieses Rechners wird als
	      <span class="emphasis"><em>default route</em></span> eingetragen.  Wenn Sie
	      diese Information nicht zur Verfügung haben, kann PPP so
	      konfiguriert werden, dass der PPP-Server Ihres ISP während
	      des Verbindungsaufbaus eine gültige Adresse
	      übermittelt.</p><p>
	      <span class="application">ppp</span> bezieht sich mit
	      <code class="literal">HISADDR</code> auf diese IP-Adresse.</p></li><li class="listitem"><p>Die Netzmaske, die Sie verwenden sollten.  Falls Ihnen Ihr
	      ISP keine Netzmaske vorgegeben hat, können Sie
	      <code class="systemitem">255.255.255.255</code> verwenden.</p></li><li class="listitem"><p>Wenn Ihnen Ihr ISP eine statische IP-Adresse<a id="ppp-static-ip" class="indexterm"></a> zur
	      Verfügung stellt, können Sie diese eintragen.
	      Andernfalls lassen wir uns einfach von der Gegenstelle
	      eine IP-Adresse zuweisen.</p></li></ul></div><p>Falls Ihnen die erforderlichen Informationen fehlen
	  sollten, nehmen Sie bitte Kontakt mit Ihrem ISP auf.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Die Beispieldateien, die in diesem Kapitel dargestellt werden,
	    enthalten Zeilennummern.  Die Nummerierung dient lediglich einer
	    leichteren Orientierung und sollte von Ihnen nicht in Ihre Dateien
	    übernommen werden.  Richtiges Einrücken, durch
	    Tabulatoren und Leerzeichen, ist ebenfalls wichtig.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87366992"></a>29.2.1.2. Automatische Konfiguration von
	  <span class="application">PPP</span></h4></div></div></div><a id="idp87367888" class="indexterm"></a><p>Sowohl <code class="command">ppp</code> als auch <code class="command">pppd</code>
	  (die PPP-Implementierung auf Kernelebene, nur unter FreeBSD 7.X)
	  verwenden die
	  Konfigurationsdateien im Verzeichnis <code class="filename">/etc/ppp</code>.
          Beispiele für User-PPP sind in <code class="filename">/usr/share/examples/ppp/</code>
          zu finden.</p><p>Die Konfiguration von <code class="command">ppp</code> erfordert,
	  je nach Ihren besonderen Bedingungen, die Bearbeitung
	  einiger Dateien.  Was Sie in diese Dateien eintragen, hängt
	  unter anderem davon ab, ob Ihnen Ihr ISP eine statische
	  IP-Adresse (Sie verwenden immer dieselbe IP-Adresse,
	  die Ihnen einmal zugeteilt wurde) oder eine dynamische IP-Adresse
	  (Ihre IP-Adresse ändert sich bei jeder Verbindung
	  mit dem ISP) zugewiesen hat.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-staticIP"></a>29.2.1.2.1. PPP und statische IP-Adressen</h5></div></div></div><a id="idp87376720" class="indexterm"></a><p>Sie müssen die Konfigurationsdatei
	    <code class="filename">/etc/ppp/ppp.conf</code> bearbeiten.  Sie sollte
            so aussehen, wie in dem unten angegebenen Beispiel.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Zeilen die mit einem <code class="literal">:</code> enden,
	      beginnen in der ersten Spalte (am Beginn der Zeile).  Alle
	      anderen Zeilen sollten wie dargestellt durch Leerzeichen
	      oder Tabulatoren eingerückt werden.</p></div><pre class="programlisting">1     default:
2       set log Phase Chat LCP IPCP CCP tun command
3       ident user-ppp VERSION (built COMPILATIONDATE)
4       set device /dev/cuau0
5       set speed 115200
6       set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 5 \
7                 \"\" AT OK-AT-OK ATE1Q0 OK \\dATDT\\T TIMEOUT 40 CONNECT"
8       set timeout 180
9       enable dns
10
11    provider:
12      set phone "(123) 456 7890"
13      set authname foo
14      set authkey bar
15      set login "TIMEOUT 10 \"\" \"\" gin:--gin: \\U word: \\P col: ppp"
16      set timeout 300
17      set ifaddr <em class="replaceable"><code>x.x.x.x</code></em> <em class="replaceable"><code>y.y.y.y</code></em> 255.255.255.255 0.0.0.0
18      add default HISADDR</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">Zeile 1:</span></dt><dd><p>Gibt den Standardeintrag an.  Befehle dieses
		  Eintrags werden automatisch ausgeführt, wenn
		  ppp läuft.</p></dd><dt><span class="term">Zeile 2:</span></dt><dd><p>Schaltet die Loggingparameter ein.  Wenn die
		  Verbindung zufriedenstellend funktioniert, können
		  Sie diese Zeile verkürzen:</p><pre class="programlisting">set log phase tun</pre><p>Dies verhindert ein übermäßiges
		  Anwachsen der Logdateien.</p></dd><dt><span class="term">Zeile 3:</span></dt><dd><p>Gibt PPP an, wie es sich gegenüber der
		  Gegenstelle identifizieren soll.  PPP identifiziert
		  sich gegenüber der Gegenstelle, wenn es Schwierigkeiten
		  bei der Aushandlung und beim Aufbau der Verbindung gibt.
		  Dabei werden Informationen bereitgestellt, die dem
		  Administrator der Gegenstelle helfen
		  können, die Ursache der Probleme zu finden.</p></dd><dt><span class="term">Zeile 4:</span></dt><dd><p>Gibt das Device an, an dem das Modem
		  angeschlossen ist.
		  <code class="filename">COM1</code> entspricht <code class="filename">/dev/cuad0</code> und
		  <code class="filename">COM2</code> entspricht <code class="filename">/dev/cuad1</code>.</p></dd><dt><span class="term">Zeile 5:</span></dt><dd><p>Legt die Geschwindigkeit fest, mit der Sie
		  die Verbindung betreiben möchten.  Falls ein Wert
		  von 115200 nicht funktioniert (was aber bei jedem
		  einigermaßen neuen Modem
		  funktionieren sollte), versuchen Sie es stattdessen
		  mit 38400.</p></dd><dt><span class="term">Zeilen 6 &amp; 7:</span></dt><dd><p>Die Zeichenfolge für die Einwahl.  User-PPP<a id="idp87421264" class="indexterm"></a>
		  verwendet eine expect-send Syntax, ähnlich dem
		  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chat</span>(8)</span></a>-Programm.  Weitere Informationen zu den
		  Eigenschaften dieser Sprache bietet die Manual-Seite.</p><p>Beachten Sie, dass dieser Befehl aufgrund der
		  besseren Lesbarkeit auf der nächsten Zeile weitergeht.
                  Das kann für jeden Befehl in
                   <code class="filename">ppp.conf</code> gelten, wenn
                   <code class="literal">\</code> das letzte Zeichen in einer Zeile
                   ist.</p></dd><dt><span class="term">Zeile 8:</span></dt><dd><p>Legt den Zeitrahmen fest, innerhalb dessen eine Reaktion
		  erfolgen muss.  Der Standardwert liegt bei 180 Sekunden, so
		  dass diese Zeile lediglich einen kosmetischen Charakter
		  hat.</p></dd><dt><span class="term">Zeile 9:</span></dt><dd><p>Weist PPP an, bei der Gegenstelle eine Bestätigung
		  der lokalen Resolvereinstellungen anzufordern.  Wenn Sie
		  einen lokalen Nameserver betreiben, sollte diese Zeile
		  auskommentiert oder gelöscht werden.</p></dd><dt><span class="term">Zeile 10:</span></dt><dd><p>Eine leere Zeile zur besseren Lesbarkeit.  Leere Zeilen
		  werden von PPP ignoriert.</p></dd><dt><span class="term">Zeile 11:</span></dt><dd><p>Bestimmt einen Provider, namens
		  <span class="quote">&#8222;<span class="quote">provider</span>&#8220;</span>.  Wenn Sie hier den Namen Ihres
		  ISP einsetzen, können Sie später die Verbindung
		  mit <code class="option">load <em class="replaceable"><code>ISP</code></em></code>
		  aufbauen.</p></dd><dt><span class="term">Zeile 12:</span></dt><dd><p> Gibt die Telefonnummer des Providers an.  Mehrere
		  Telefonnummern können angegeben werden, indem Doppelpunkte
		  (<code class="literal">:</code>) oder Pipe-Zeichen
		  (<code class="literal">|</code>) als Trennzeichen verwendet werden.
		  Der Unterschied zwischen diesen beiden Trennzeichen ist in
		  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> beschrieben.
		  Zusammenfassend: Wenn Sie die verschiedenen Nummern
		  abwechselnd verwenden möchten, sollten Sie die
		  Nummern durch einen Doppelpunkt trennen.
		  Wenn Sie immer die erste Nummer verwenden möchten und
		  die anderen nur zum Einsatz kommen sollen, wenn eine Einwahl
		  mit der ersten Telefonnummer nicht möglich ist, sollten
		  Sie das Pipe-Zeichen zur Trennung verwenden.
		  Wie im Beispiel, sollten Sie die gesamte Reihe der
		  Telefonnummern in Anführungszeichen setzen.</p><p>Sie müssen die Telefonnummer in
		  Anführungszeichen (<code class="literal">"</code>) setzen,
		  wenn Sie Leerzeichen in der Telefonnummer verwenden,
		  ansonsten rufen Sie einen Fehler hervor, der vielleicht
		  schwer zu finden ist.</p></dd><dt><span class="term">Zeilen 13 &amp; 14:</span></dt><dd><p>Gibt den Benutzernamen und das Passwort an.  Wenn Sie
		  zur Verbindung einen Login-Prompt im UNIX-Stil verwenden,
		  bezieht sich der Befehl <code class="command">set login</code>
		  mit den \U und \P Variablen auf diese Werte.  Wenn Sie
		  zum Verbindungsaufbau PAP oder CHAP verwenden, werden
		  diese Werte zum Zeitpunkt der
		  Authentifizierung verwendet.</p></dd><dt><span class="term">Zeile 15:</span></dt><dd><p>Wenn Sie PAP<a id="idp87443024" class="indexterm"></a> oder CHAP<a id="idp87443536" class="indexterm"></a> einsetzen, gibt es an
		  dieser Stelle keinen Login-Prompt, weshalb Sie diese
		  Zeile auskommentieren oder löschen sollten.  Der
		  Abschnitt <a class="link" href="userppp.html#userppp-PAPnCHAP" title="29.2.1.2.12. Authentifizierung durch PAP und CHAP">Authentifizierung
		    mit PAP und CHAP</a> enthält hierzu weitere
		  Einzelheiten.</p><p>Der Login-String hat die gleiche chat-ähnliche
		  Syntax, wie der Einwahlstring.  Der String in diesem
		  Beispiel funktioniert mit einem ISP, dessen
		  Login-Session folgendermaßen aussieht:</p><pre class="screen">J. Random Provider
login: <em class="replaceable"><code>foo</code></em>
password: <em class="replaceable"><code>bar</code></em>
protocol: ppp</pre><p>Sie müssen dieses Skript noch an Ihre
		  eigenen Erfordernisse anpassen.  Wenn Sie dieses Skript
		  zum ersten Mal schreiben, sollten Sie sicherstellen,
		  dass Sie <span class="quote">&#8222;<span class="quote">chat</span>&#8220;</span>-logging aktiviert haben,
		  damit Sie überprüfen zu können, ob
		  die Konversation zwischen Ihrem Rechner und dem Rechner
		  des Providers wie erwartet abläuft.</p></dd><dt><span class="term">Zeile 16:</span></dt><dd><p>Setzt einen Zeitrahmen<a id="idp87493584" class="indexterm"></a> (in Sekunden), innerhalb
		  dessen eine Reaktion erfolgen muss.  In diesem Fall,
		  wird die Verbindung nach 300 Sekunden automatisch
		  geschlossen, wenn keine Aktivität zu
		  verzeichnen ist.  Wenn Sie keinen Zeitrahmen festlegen
		  wollen, nach dessen Überschreiten die Verbindung
		  geschlossen wird, können Sie diesen Wert auf 0
		  setzen oder die Kommandozeilen-Option
		  <code class="option">-ddial</code> verwenden.</p></dd><dt><span class="term">Zeile 17:</span></dt><dd><p>Gibt die IP-Adresse für das Interface an.
		  Der String <em class="replaceable"><code>x.x.x.x</code></em> sollte
		  durch die IP-Adresse ersetzt werden, die Ihnen Ihr
		  Provider zugeteilt hat.  Der String
		  <em class="replaceable"><code>y.y.y.y</code></em> sollte durch die
		  IP-Adresse ersetzt werden, die Ihr ISP <a id="idp87496912" class="indexterm"></a> als Gateway
		  angegeben hat (das ist der Rechner, mit dem Ihr Rechner
		  eine Verbindung aufbaut).  Wenn Ihnen Ihr ISP keine
		  Gateway Adresse zur Verfügung gestellt hat,
		  verwenden Sie hier einfach <code class="systemitem">10.0.0.2/0</code>.  Wenn Sie
		  eine <span class="quote">&#8222;<span class="quote">erratene</span>&#8220;</span> IP-Adresse verwenden
		  müssen, sollten Sie in der Datei
		  <code class="filename">/etc/ppp/ppp.linkup</code> einen
		  entsprechenden Eintrag machen.  Folgen Sie dazu den
		  Anweisungen im Abschnitt <a class="link" href="userppp.html#userppp-dynamicIP" title="29.2.1.2.2. PPP und dynamische IP-Adressen">PPP und dynamische
		    IP-Adressen</a>.  Wenn diese Zeile ausgelassen
		  wird, kann <code class="command">ppp</code> nicht im
		  <code class="option">-auto</code> Modus betrieben werden.</p></dd><dt><span class="term">Zeile 18:</span></dt><dd><p>Fügt eine Defaultroute für das Gateway Ihres
		  Providers hinzu.  Das Wort <code class="literal">HISADDR</code> wird
		  dabei durch die in Zeile 17 angegebene Gateway
		  Adresse ersetzt.  Wichtig ist, dass diese Zeile nach
		  Zeile 17 erscheint, da andernfalls
		  <code class="literal">HISADDR</code> noch nicht initialisiert
		  ist.</p><p>Wenn Sie ppp nicht im <code class="option">-auto</code>
		  Modus betreiben, sollte diese Zeile in die Datei
		  <code class="filename">ppp.linkup</code>
		  verschoben werden.</p></dd></dl></div><p>Wenn Sie eine statische IP-Adresse verwenden und ppp im
	    <code class="option">-auto</code> Modus läuft, ist es nicht notwendig,
	    einen Eintrag in die Datei <code class="filename">ppp.linkup</code>
	    hinzuzufügen.  In diesem Fall hat ihre Routingtabelle
	    bereits die richtigen Einträge, bevor Sie die Verbindung
	    aufbauen.  Sie möchten aber vielleicht einen Eintrag
	    hinzufügen, um ein Programm aufzurufen, nachdem die
	    Verbindung aufgebaut ist.  Dies wird weiter unten am Beispiel
	    von Sendmail erklärt.</p><p>Beispiele für Konfigurationsdateien finden Sie
	    im Verzeichnis <code class="filename">/usr/share/examples/ppp/</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-dynamicIP"></a>29.2.1.2.2. PPP und dynamische IP-Adressen</h5></div></div></div><a id="idp87510992" class="indexterm"></a><a id="idp87512272" class="indexterm"></a><p>Wenn Ihnen Ihr ISP keine statische IP-Adresse zuteilt,
	    kann <code class="command">ppp</code> so konfiguriert werden, dass die
	    lokale und die entfernte IP-Adresse beim Verbindungsaufbau
	    ausgehandelt werden.  Dies geschieht, indem zunächst eine
	    IP-Adresse <span class="quote">&#8222;<span class="quote">erraten</span>&#8220;</span> wird, die von
	    <code class="command">ppp</code>, unter Verwendung des IP
	    Configuration Protocol (IPCP) durch eine richtige ersetzt wird,
	    wenn die Verbindung aufgebaut ist.  Die Konfiguration der Datei
	    <code class="filename">ppp.conf</code> entspricht derjenigen, die im
	    Abschnitt <a class="link" href="userppp.html#userppp-staticIP" title="29.2.1.2.1. PPP und statische IP-Adressen">PPP und statische IP-
	      Adressen</a> dargestellt wurde, jedoch mit folgender
	    Änderung:</p><pre class="programlisting">17      set ifaddr 10.0.0.1/0 10.0.0.2/0 255.255.255.255 0.0.0.0</pre><p>Auch hier dient die Zeilennummerierung lediglich der
	    besseren Übersichtlichkeit.  Einrückungen, von
	    mindestens einem Leerzeichen, sind allerdings erforderlich.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Zeile 17:</span></dt><dd><p>Die Zahl nach dem <code class="literal">/</code> Zeichen,
		  gibt die Anzahl der Bits der Adresse an, auf die ppp
		  besteht.  Sie möchten vielleicht andere IP-Adressen
		  verwenden, die oben angegebenen werden aber immer
		  funktionieren.</p><p>Das letzte Argument (<code class="literal">0.0.0.0</code>) weist
		  PPP an, den Verbindungsaufbau mit der Adresse <code class="systemitem">0.0.0.0</code> zu beginnen, statt <code class="systemitem">10.0.0.1</code> zu verwenden.  Dies ist bei
		  einigen ISPs notwendig.  Verwenden Sie nicht
		  <code class="literal">0.0.0.0</code>
		  als erstes Argument für <code class="command">set ifaddr</code>,
		  da so verhindert wird, dass
                  PPP im <code class="option">-auto</code> Modus eine initiale Route
		  setzt.</p></dd></dl></div><p>Wenn PPP nicht im  <code class="option">-auto</code> Modus läuft,
	    müssen Sie die Datei<code class="filename">/etc/ppp/ppp.linkup</code>
	    editieren.  <code class="filename">ppp.linkup</code> kommt zum Einsatz, wenn
	    eine Verbindung aufgebaut worden ist.  Zu diesem Zeitpunkt hat
	    <code class="command">ppp</code> die Interface Adressen vergeben und es ist
	    möglich, die Einträge in der Routingtabelle
	    hinzuzufügen:</p><pre class="programlisting">1     provider:
2      add default HISADDR</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">Zeile 1:</span></dt><dd><p>Beim Aufbau einer Verbindung sucht <code class="command">ppp</code>
		  in der Datei <code class="filename">ppp.linkup</code> nach einem
		  Eintrag.  PPP geht dabei nach folgenden Regeln vor:
		  Suche zunächst nach der gleichen Bezeichnung,
		  die wir auch in der Datei <code class="filename">ppp.conf</code>
		  verwendet haben.  Falls das nicht
		  funktioniert, suche nach einem Eintrag der IP-Adresse unseres
		  Gateways.  Dieser Eintrag ist eine Bezeichnung im Stil von
		  IP-Adressen, die sich aus vier Oktetts zusammensetzt.  Falls
		  immer noch kein passender Eintrag gefunden wurde, suche nach
		  dem Eintrag <code class="literal">MYADDR</code>.</p></dd><dt><span class="term">Zeile 2:</span></dt><dd><p>Diese Zeile weist <code class="command">ppp</code> an, eine
		  Defaultroute zu verwenden, die auf <code class="literal">HISADDR</code>
		  zeigt.  <code class="literal">HISADDR</code> wird nach der
		  Aushandlung mit IPCP durch die IP-Adresse des
		  Gateways ersetzt.</p></dd></dl></div><p>Die Dateien
	    <code class="filename">/usr/share/examples/ppp/ppp.conf.sample</code>
	    und <code class="filename">/usr/share/examples/ppp/ppp.linkup.sample</code>
	    bieten detaillierte Beispiele für <code class="literal">pmdemand</code>
	    Einträge.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87539920"></a>29.2.1.2.3. Annahme eingehender Anrufe</h5></div></div></div><a id="idp87540560" class="indexterm"></a><p>Wenn Sie <span class="application">ppp</span> auf einem Rechner,
	    der in ein LAN eingebunden ist, so konfigurieren, dass eingehende
	    Anrufe angenommen werden, müssen Sie entscheiden,
	    ob Pakete an das LAN weitergeleitet werden sollen.  Wenn Sie das
	    möchten, sollten Sie an die Gegenstelle eine IP-Adresse aus
	    Ihrem lokalen Subnetz vergeben und den Befehl
	    <code class="command">enable proxy</code>
	    in die Datei <code class="filename">/etc/ppp/ppp.conf</code> einfügen.
	    Außerdem sollte die Datei <code class="filename">/etc/rc.conf</code>
	    Folgendes enthalten:</p><pre class="programlisting">gateway_enable="YES"</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87544144"></a>29.2.1.2.4. Welches getty?</h5></div></div></div><p>Der Abschnitt <a class="link" href="dialup.html" title="28.4. Einwählverbindungen">Einwählverbindungen</a>
	    bietet eine gute Beschreibung, wie Einwählverbindungen unter
	    Verwendung von <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a> genutzt werden können.</p><p>Eine Alternative zu <code class="command">getty</code> ist <a class="link" href="http://mgetty.greenie.net/" target="_top">mgetty</a>,
	    eine raffiniertere Version von <code class="command">getty</code>, die mit
	    Blick auf Einwählverbindungen entworfen wurde.  Sie
	    können dieses Paket über den Port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/comms/mgetty+sendfax/pkg-descr">comms/mgetty+sendfax</a>
	    installieren.</p><p>Der Vorteil von <code class="command">mgetty</code> ist,
	    dass es auf aktive Weise mit Modems <span class="emphasis"><em>spricht</em></span>,
	    das heißt wenn ein Port in <code class="filename">/etc/ttys</code>
	    ausgeschaltet ist, wird Ihr Modem nicht auf Anrufe
	    reagieren.</p><p>Spätere Versionen von <code class="command">mgetty</code> (von
	    0.99beta aufwärts) unterstützen auch die automatische
	    Erkennung von PPP-Streams, was Ihren Clients den skriptlosen
	    Zugang zu Ihren Servern erlaubt.</p><p>Der Abschnitt <a class="link" href="userppp.html#userppp-mgetty" title="29.2.1.2.10. mgetty und AutoPPP">Mgetty und
	    AutoPPP</a> bietet weitere Informationen zu
	    <code class="command">mgetty</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87556432"></a>29.2.1.2.5. <span class="application">PPP</span> und Rechte</h5></div></div></div><p>Der Befehl <code class="command">ppp</code> muss normalerweise als
	    <code class="systemitem">root</code> ausgeführt werden.  Wenn Sie
	    jedoch möchten, dass <code class="command">ppp</code> im Server-Modus
	    auch von einem normalen Benutzer, wie unten beschrieben,
	    durch Aufruf von <code class="command">ppp</code>
	    ausgeführt werden kann, müssen Sie
	    diesem Benutzer die Rechte erteilen, <code class="command">ppp</code>
	    auszuführen, indem Sie ihn in der Datei
	    <code class="filename">/etc/group</code> der Gruppe
	    <code class="systemitem">network</code> hinzufügen.</p><p>Sie werden ihm ebenfalls den Zugriff auf einen oder mehrere
	    Abschnitte der Konfigurationsdatei geben müssen, indem Sie
	    den <code class="command">allow</code> Befehl verwenden:</p><pre class="programlisting">allow users fred mary</pre><p>Wenn dieser Befehl im <code class="literal">default</code>
	    Abschnitt verwendet wird, erhalten die angegebenen Benutzer
	    vollständigen Zugriff.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87567056"></a>29.2.1.2.6. PPP-Shells für dynamische IP-Adressen</h5></div></div></div><a id="idp87567696" class="indexterm"></a><p>Erzeugen Sie eine Datei mit dem Namen
	    <code class="filename">/etc/ppp/ppp-shell</code>, die Folgendes
	    enthält:</p><pre class="programlisting">#!/bin/sh
IDENT=`echo $0 | sed -e 's/^.*-\(.*\)$/\1/'`
CALLEDAS="$IDENT"
TTY=`tty`

if [ x$IDENT = xdialup ]; then
        IDENT=`basename $TTY`
fi

echo "PPP for $CALLEDAS on $TTY"
echo "Starting PPP for $IDENT"

exec /usr/sbin/ppp -direct $IDENT</pre><p>Dieses Skript sollte ausführbar sein.  Nun
	    erzeugen Sie einen symbolischen Link
	    <code class="filename">ppp-dialup</code> auf dieses Skript
	    mit folgendem Befehl:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s ppp-shell /etc/ppp/ppp-dialup</code></strong></pre><p>Sie sollten dieses Skript als
	    <span class="emphasis"><em>Shell</em></span> für alle Benutzer von
	    Einwählverbindungen verwenden.  Dies ist ein Beispiel
	    aus der Datei <code class="filename">/etc/passwd</code>
	    für einen Benutzer namens <code class="systemitem">pchilds</code>,
	    der PPP für Einwählverbindungen verwenden kann
	    (Denken Sie daran, die Passwortdatei nicht direkt zu
	    editieren, sondern dafür <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a> zu
	    verwenden).</p><pre class="programlisting">pchilds:*:1011:300:Peter Childs PPP:/home/ppp:/etc/ppp/ppp-dialup</pre><p>Erstellen Sie ein Verzeichnis <code class="filename">/home/ppp</code>, das von allen Benutzern
	    gelesen werden kann und die folgenden leeren Dateien
	    enthält:</p><pre class="screen">-r--r--r--   1 root     wheel           0 May 27 02:23 .hushlogin
-r--r--r--   1 root     wheel           0 May 27 02:22 .rhosts</pre><p>Dies verhindert, dass <code class="filename">/etc/motd</code>
	    angezeigt wird.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87576016"></a>29.2.1.2.7. PPP-Shells für statische IP-Adressen</h5></div></div></div><a id="idp87576656" class="indexterm"></a><p>Erstellen Sie die Datei <code class="filename">ppp-shell</code>
	    wie oben oben dargestellt.  Erzeugen Sie nun für
	    jeden Account mit statischer IP-Adresse einen symbolischen
	    Link auf <code class="filename">ppp-shell</code>.</p><p>Wenn Sie beispielsweise die drei Kunden,
	    <code class="systemitem">fred</code>, <code class="systemitem">sam</code> und
	    <code class="systemitem">mary</code> haben, für die Sie
	    CIDR-/24-Netzwerke routen, schreiben Sie Folgendes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-fred</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-sam</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-mary</code></strong></pre><p>Jeder Einwählzugang dieser Kunden sollte den
	    oben erzeugten symbolischen Link als Shell haben
	    (<code class="systemitem">mary</code>'s Shell
	    sollte also <code class="filename">/etc/ppp/ppp-mary</code> sein).</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87584208"></a>29.2.1.2.8. Einrichten von <code class="filename">ppp.conf</code> für
	    dynamische IP-Adressen</h5></div></div></div><p>Die Datei <code class="filename">/etc/ppp/ppp.conf</code> sollte in
	    etwa wie folgt aussehen:</p><pre class="programlisting">default:
  set debug phase lcp chat
  set timeout 0

ttyu0:
  set ifaddr 203.14.100.1 203.14.100.20 255.255.255.255
  enable proxy

ttyu1:
  set ifaddr 203.14.100.1 203.14.100.21 255.255.255.255
  enable proxy</pre><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Die Einrückungen sind wichtig.</p></div><p>Der Abschnitt <code class="literal">default:</code> wird für
	    jede Sitzung geladen.  Erstellen Sie für jede
	    Einwählverbindung, die Sie in der Datei
	    <code class="filename">/etc/ttys</code> ermöglicht haben, einen
	    Eintrag, wie oben für <code class="literal">ttyu0:</code> gezeigt.
	    Jede Verbindung sollte eine eigene IP-Adresse aus dem Pool
	    der Adressen bekommen, die sie für diese Benutzergruppe
	    reserviert haben.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87588944"></a>29.2.1.2.9. Einrichten von <code class="filename">ppp.conf</code> für
	    statische IP-Adressen</h5></div></div></div><p>Zu dem bisher dargestellten Inhalt der Beispieldatei
	    <code class="filename">/usr/share/examples/ppp/ppp.conf</code> sollten
	    Sie einen Abschnitt für jeden Benutzer mit statisch
	    zugewiesener IP-Adresse hinzufügen.  Wir werden nun
	    unser Beispiel mit den
	    Accounts <code class="systemitem">fred</code>, <code class="systemitem">sam</code> und
	    <code class="systemitem">mary</code> weiterführen.</p><pre class="programlisting">fred:
  set ifaddr 203.14.100.1 203.14.101.1 255.255.255.255

sam:
  set ifaddr 203.14.100.1 203.14.102.1 255.255.255.255

mary:
  set ifaddr 203.14.100.1 203.14.103.1 255.255.255.255</pre><p>Die Datei <code class="filename">/etc/ppp/ppp.linkup</code> sollte,
	    falls erforderlich, ebenfalls Routinginformationen für
	    jeden Benutzer mit statischer IP-Adresse enthalten.  Die unten
	    dargestellte Zeile würde dem Netzwerk  <code class="systemitem">203.14.101.0/24</code> eine Route über die
	    PPP-Verbindung des Client hinzufügen.</p><pre class="programlisting">fred:
  add 203.14.101.0 netmask 255.255.255.0 HISADDR

sam:
  add 203.14.102.0 netmask 255.255.255.0 HISADDR

mary:
  add 203.14.103.0 netmask 255.255.255.0 HISADDR</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-mgetty"></a>29.2.1.2.10. <code class="command">mgetty</code> und AutoPPP</h5></div></div></div><a id="idp87603792" class="indexterm"></a><a id="idp87604688" class="indexterm"></a><a id="idp87605200" class="indexterm"></a><p>In der Voreinstellung wird <code class="command">mgetty</code>
	    mit der Option <code class="literal">AUTO_PPP</code> konfiguriert
	    und kompiliert.  Dadurch kann <code class="command">mgetty</code>
	    die LCP Phase von PPP-Verbindungen
	    erkennen und automatisch eine ppp-Shell starten.
	    Da hierbei jedoch die  Login/Passwort-Sequenz nicht
	    durchlaufen wird, ist es notwendig, Benutzer durch PAP
	    oder CHAP zu authentifizieren.</p><p>In diesem Abschnitt wird davon ausgegangen, dass der
	    Benutzer den Port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/comms/mgetty+sendfax/pkg-descr">comms/mgetty+sendfax</a> auf seinem
	    System kompiliert und installiert hat.</p><p>Stellen Sie sicher, dass die Datei
	    <code class="filename">/usr/local/etc/mgetty+sendfax/login.config</code>
	    Folgendes enthält:</p><pre class="programlisting">/AutoPPP/ -     -		      /etc/ppp/ppp-pap-dialup</pre><p>Hierdurch wird <code class="command">mgetty</code> angewiesen,
	    das Skript <code class="filename">ppp-pap-dialup</code> für
	    die erkannten PPP-Verbindungen auszuführen.</p><p>Erstellen Sie nun die Datei
	    <code class="filename">/etc/ppp/ppp-pap-dialup</code> mit folgendem
	    Inhalt (die Datei sollte ausführbar sein):</p><pre class="programlisting">#!/bin/sh
exec /usr/sbin/ppp -direct pap$IDENT</pre><p>Erstellen Sie bitte für jede Einwählverbindung,
	    die Sie in <code class="filename">/etc/ttys</code> ermöglicht haben,
	    einen korrespondierenden Eintrag in der Datei
	    <code class="filename">/etc/ppp/ppp.conf</code>.  Diese
	    Einträge können problemlos, mit den Definitionen
	    die wir weiter oben gemacht haben, koexistieren.</p><pre class="programlisting">pap:
  enable pap
  set ifaddr 203.14.100.1 203.14.100.20-203.14.100.40
  enable proxy</pre><p>Jeder Benutzer, der sich auf diese Weise anmeldet,
	    benötigt einen Benutzernamen und ein Passwort in der Datei
	    <code class="filename">/etc/ppp/ppp.secret</code>.  Sie haben auch die
	    Möglichkeit, Benutzer mit Hilfe von PAP zu authentifizieren,
	    indem Sie der Datei <code class="filename">/etc/passwd</code> folgende
	    Option hinzufügen:</p><pre class="programlisting">enable passwdauth</pre><p>Wenn Sie bestimmten Benutzern eine statische IP-Adresse
	    zuweisen möchten, können Sie diese als drittes
	    Argument in der Datei
	    <code class="filename">/etc/ppp/ppp.secret</code> angeben.  In
	    <code class="filename">/usr/share/examples/ppp/ppp.secret.sample</code>
	    finden Sie hierfür Beispiele.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87616080"></a>29.2.1.2.11. MS-Erweiterungen</h5></div></div></div><a id="idp87616720" class="indexterm"></a><a id="idp87617232" class="indexterm"></a><a id="idp87617744" class="indexterm"></a><p>Es ist möglich PPP so zu konfigurieren, dass bei Bedarf
	    DNS und NetBIOS Nameserveradressen bereitgestellt werden.</p><p>Um diese Erweiterungen für die PPP Version 1.x
	    zu aktivieren, sollte der entsprechende Abschnitt der Datei
	    <code class="filename">/etc/ppp/ppp.conf</code> um folgende Zeilen
	    ergänzt werden:</p><pre class="programlisting">enable msext
set ns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</pre><p>Für PPP Version 2 und höher:</p><pre class="programlisting">accept dns
set dns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</pre><p>Damit werden den Clients die primären und sekundären
	    Nameserveradressen sowie ein NetBIOS Nameserver-Host
	    mitgeteilt.</p><p>In Version 2 und höher verwendet PPP die Werte, die
	    in <code class="filename">/etc/resolv.conf</code> zu finden sind, wenn
	    die Zeile <code class="literal">set dns</code> weggelassen wird.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-PAPnCHAP"></a>29.2.1.2.12. Authentifizierung durch PAP und CHAP</h5></div></div></div><a id="idp87623888" class="indexterm"></a><a id="idp87624400" class="indexterm"></a><p>Einige ISPs haben ihr System so eingerichtet, dass der
	    Authentifizierungsteil eines Verbindungsaufbaus mit Hilfe von
	    PAP oder CHAP-Mechanismen durchgeführt wird.  Wenn dies bei
	    Ihnen der Fall sein sollte, wird Ihnen Ihr ISP bei der Verbindung
	    keinen <code class="prompt">login:</code>-Prompt präsentieren,
	    sondern sofort mit der Aushandlung der PPP-Verbindung
	    beginnen.</p><p>PAP ist nicht so sicher wie CHAP, doch die Sicherheit ist
	    hierbei normalerweise kein Problem, da Passwörter, obgleich
	    von PAP im Klartext versandt, lediglich über die
	    serielle Verbindung verschickt werden.  Es gibt für Cracker
	    wenig Möglichkeiten zu <span class="quote">&#8222;<span class="quote">lauschen</span>&#8220;</span>.</p><p>Zurückkommend auf die Abschnitte
	    <a class="link" href="userppp.html#userppp-staticIP" title="29.2.1.2.1. PPP und statische IP-Adressen">PPP und statische
	      IP-Adressen</a> oder <a class="link" href="userppp.html#userppp-dynamicIP" title="29.2.1.2.2. PPP und dynamische IP-Adressen">PPP und dynamische IP-Adressen</a>
	    müssen folgende Veränderungen vorgenommen werden:</p><pre class="programlisting">13      set authname <em class="replaceable"><code>MyUserName</code></em>
14      set authkey <em class="replaceable"><code>MyPassword</code></em>
15      set login</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">Zeile 13:</span></dt><dd><p>Diese Zeile legt Ihren PAP/CHAP Benutzernamen fest.
		  Sie müssen den richtigen Wert für
		  <em class="replaceable"><code>MyUserName</code></em> eingeben.</p></dd><dt><span class="term">Zeile 14:</span></dt><dd><p>Diese Zeile legt Ihr PAP/CHAP Passwort<a id="idp87636688" class="indexterm"></a> fest.  Sie
		  müssen den richtigen Wert für
		  <em class="replaceable"><code>MyPassword</code></em> eingeben.
		  Sie können eine zusätzliche Zeile, wie etwa:</p><pre class="programlisting">16      accept PAP</pre><p>oder</p><pre class="programlisting">16      accept CHAP</pre><p>verwenden, um deutlich zu machen, dass dies
		  beabsichtigt ist, aber sowohl PAP wie auch CHAP als
		  standardmäßig akzeptiert werden.</p></dd><dt><span class="term">Zeile 15:</span></dt><dd><p>Ihr ISP wird normalerweise nicht von Ihnen verlangen,
		  dass Sie sich am Server einloggen, wenn Sie PAP oder CHAP
		  verwenden.  Sie müssen deshalb den String
		  <span class="quote">&#8222;<span class="quote">set login</span>&#8220;</span> deaktivieren.</p></dd></dl></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87646032"></a>29.2.1.2.13. Veränderung Ihrer <code class="command">ppp</code>
	    Konfiguration im laufenden Betrieb</h5></div></div></div><p>Es ist möglich, dem Programm <code class="command">ppp</code>
	    Befehle zu erteilen, während es im Hintergrund läuft.
	    Dazu ist jedoch die Einrichtung eines passenden Diagnose-Ports
	    erforderlich.  Ergänzen Sie hierzu Ihre Konfigurationsdatei
	    um folgende Zeile:</p><pre class="programlisting">set server /var/run/ppp-tun<em class="replaceable"><code>%d</code></em> DiagnosticPassword 0177</pre><p>Damit wird PPP angewiesen, auf den angegebenen
	    UNIX-Domainsocket zu hören und Clients nach dem angegebenen
	    Passwort zu fragen, bevor der Zugang Gewährt wird.  Das
	    <code class="literal">%d</code> wird durch die Nummer des benutzten
	    <code class="filename">tun</code>-Devices ersetzt.</p><p>Wenn ein Socket eingerichtet ist, kann das Programm
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pppctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pppctl</span>(8)</span></a> in Skripten verwendet werden, mit denen in das
	    laufende Programm eingegriffen wird.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-nat"></a>29.2.1.3. Interne NAT von PPP benutzen</h4></div></div></div><a id="idp87652048" class="indexterm"></a><p>PPP kann Network Address Translation (NAT) ohne Hilfe des
          Kernels durchführen.  Wenn Sie diese Funktion benutzen
	  wollen, fügen Sie die folgende Zeile in
	  <code class="filename">/etc/ppp/ppp.conf</code> ein:</p><pre class="programlisting">nat enable yes</pre><p>Sie können NAT mit der Option <code class="option">-nat</code>
          auf der Kommandozeile von PPP aktivieren.  Weiterhin kann
	  NAT in <code class="filename">/etc/rc.conf</code> mit der Variablen
	  <code class="varname">ppp_nat</code> aktiviert werden.  Dies ist auch die
	  Voreinstellung.</p><p>Die nachstehende <code class="filename">/etc/ppp/ppp.conf</code>
          benutzt NAT für bestimmte eingehende Verbindungen:</p><pre class="programlisting">nat port tcp 10.0.0.2:ftp ftp
nat port tcp 10.0.0.2:http http</pre><p>Wenn Sie Verbindungen von außen überhaupt nicht
	  trauen, benutzen Sie die folgende Zeile:</p><pre class="programlisting">nat deny_incoming yes</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-final"></a>29.2.1.4. Abschließende Systemkonfiguration</h4></div></div></div><a id="idp87658832" class="indexterm"></a><p>Sie haben <code class="command">ppp</code> nun konfiguriert,
	  aber bevor PPP eingesetzt werden kann, gibt noch einige
	  weitere Dinge zu erledigen, die alle die Bearbeitung der
	  Datei <code class="filename">/etc/rc.conf</code> erfordern.</p><p>Gehen Sie diese Datei von oben nach unten durch, und stellen Sie
	   als Erstes sicher, dass die Zeile <code class="literal">hostname=</code>
	   vorhanden ist:</p><pre class="programlisting">hostname="foo.example.com"</pre><p>Wenn Ihnen Ihr ISP eine statische IP-Adresse und einen Namen
	  zugewiesen hat, ist es wahrscheinlich am besten, wenn Sie diesen
	  Namen als Hostnamen verwenden.</p><p>Schauen Sie nach der Variable
	  <code class="literal">network_interfaces</code>.  Wenn Sie Ihr System
	  so konfigurieren möchten, dass bei Bedarf
	  eine Verbindung zu Ihrem ISP aufgebaut wird, sollten Sie das Device
	  <code class="filename">tun0</code> zu der Liste hinzufügen oder es
	  andernfalls entfernen.</p><pre class="programlisting">network_interfaces="lo0 tun0"
ifconfig_tun0=</pre><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Die Variable <code class="literal">ifconfig_tun0</code> sollte leer sein
	    und eine Datei namens <code class="filename">/etc/start_if.tun0</code> sollte
	    erstellt werden.  Diese Datei sollte die nachfolgende Zeile
	    enthalten:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">ppp -auto mysystem</pre><p xmlns="http://www.w3.org/1999/xhtml">Dieses Skript startet Ihren ppp-Dæmon im Automatik-Modus.
	    Es wird bei der Netzwerkkonfiguration ausgeführt.
	    Wenn Ihr Rechner als Gateway für ein LAN fungiert,
	    möchten Sie vielleicht auch die Option
	    <code class="option">-alias</code> verwenden.  In der Manual-Seite sind
	    weitere Einzelheiten hierzu zu finden.</p></div><p>Stellen Sie sicher, dass der Start eines Routerprogramms
	  in <code class="filename">/etc/rc.conf</code> wie folgt deaktiviert
	  ist:</p><pre class="programlisting">router_enable="NO"</pre><a id="idp87672528" class="indexterm"></a><p>Es ist wichtig, dass der <code class="command">routed</code>
	  Dæmon nicht gestartet wird da <code class="command">routed</code>
	  dazu tendiert, die von <code class="command">ppp</code> erstellten
	  Einträge der Standardroute zu überschreiben.</p><p>Es ist außerdem sinnvoll, darauf zu achten, dass die Zeile
	  <code class="literal">sendmail_flags</code> nicht die Option <code class="option">-q</code>
	  enthält, da <code class="command">sendmail</code> sonst ab und zu
	  die Netzwerkverbindung prüfen wird, was möglicherweise dazu
	  führt, dass sich Ihr Rechner einwählt.  Sie können
	  hier Folgendes angeben:</p><pre class="programlisting">sendmail_flags="-bd"</pre><a id="idp87677136" class="indexterm"></a><p>Der Nachteil dieser Lösung ist, dass Sie
	  <code class="command">sendmail</code> nach jedem Aufbau einer
	  ppp-Verbindung auffordern müssen, die Mailwarteschlange
	  zu überprüfen, indem Sie Folgendes eingeben:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/sbin/sendmail -q</code></strong></pre><p>Vielleicht möchten Sie den Befehl <code class="command">!bg</code>
	  in der Datei <code class="filename">ppp.linkup</code> verwenden, um dies
	  zu automatisieren:</p><pre class="programlisting">1     provider:
2       delete ALL
3       add 0 0 HISADDR
4       !bg sendmail -bd -q30m</pre><a id="idp87681360" class="indexterm"></a><p>Wenn Sie dies nicht möchten, ist es möglich,
	  einen <span class="quote">&#8222;<span class="quote">dfilter</span>&#8220;</span> einzusetzen, um SMTP-Verkehr
	  zu blockieren.  Weitere Einzelheiten hierzu finden Sie in den
	  Beispieldateien.</p><p>Das Einzige, was nun noch zu tun bleibt, ist Ihren Rechner neu
	  zu starten.  Nach dem Neustart können Sie entweder:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp</code></strong></pre><p>und danach <code class="command">dial provider</code> eingeben,
	  um eine PPP-Sitzung zu starten, oder Sie geben:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp -auto provider</code></strong></pre><p>ein, um <code class="command">ppp</code> bei Datenverkehr aus Ihrem
	  Netzwerk heraus, automatisch eine Verbindung herstellen
	  zu lassen (vorausgesetzt Sie haben kein
	  <code class="filename">start_if.tun0</code> Skript erstellt).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87687120"></a>29.2.1.5. Zusammenfassung</h4></div></div></div><p>Die folgenden Schritte sind nötig, wenn ppp zum ersten Mal
	  eingerichtet werden soll:</p><p>Clientseite:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Stellen Sie sicher, dass das
	      <code class="filename">tun</code> Device in den Kernel
	      eingebaut ist.</p></li><li class="step"><p>Vergewissern Sie sich, dass die Gerätedatei <code class="filename">tunN</code>
	      im Verzeichnis <code class="filename">/dev</code> vorhanden ist.</p></li><li class="step"><p>Bearbeiten Sie die Datei
	      <code class="filename">/etc/ppp/ppp.conf</code>.  Das Beispiel
	      <code class="filename">pmdemand</code> sollte für die meisten
	      ISP ausreichen.</p></li><li class="step"><p>Wenn Sie eine dynamische IP-Adresse haben, erstellen Sie
	      einen Eintrag in der Datei
	      <code class="filename">/etc/ppp/ppp.linkup</code>.</p></li><li class="step"><p>Aktualisieren Sie die Datei
	      <code class="filename">/etc/rc.conf</code>.</p></li><li class="step"><p>Erstellen Sie das Skript <code class="filename">start_if.tun0</code>,
	      wenn Sie einen bedarfgesteuerten Einwahlprozess
	      (<span class="foreignphrase"><em class="foreignphrase">demand dialing</em></span>)
	      benötigen.</p></li></ol></div><p>Serverseite:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Stellen Sie sicher, dass das
	      <code class="filename">tun</code> Device in den Kernel
	      eingebaut ist.</p></li><li class="step"><p>Vergewissern Sie sich, dass die Gerätedatei
	      <code class="filename">tunN</code>
	      im Verzeichnis <code class="filename">/dev</code> vorhanden ist</p></li><li class="step"><p>Erstellen Sie einen Eintrag in der Datei
	      <code class="filename">/etc/passwd</code>
	      (verwenden Sie dazu das Programm <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a>).</p></li><li class="step"><p>Erstellen Sie ein Profil im Heimatverzeichnis des
	      Benutzers, das
	      <code class="command">ppp -direct direct-server</code> o.Ä.
	      ausführt.</p></li><li class="step"><p>Bearbeiten Sie die Datei
	      <code class="filename">/etc/ppp/ppp.conf</code>.  Das Beispiel
	      <code class="filename">direct-server</code> sollte ausreichen.</p></li><li class="step"><p>Erzeugen Sie einen Eintrag in
	      <code class="filename">/etc/ppp/ppp.linkup</code>.</p></li><li class="step"><p>Aktualisieren Sie die Datei
	      <code class="filename">/etc/rc.conf</code>.</p></li></ol></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ppp-and-slip.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="ppp-and-slip.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="ppp.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">Kapitel 29. PPP und SLIP </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 29.3. Kernel-PPP</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>