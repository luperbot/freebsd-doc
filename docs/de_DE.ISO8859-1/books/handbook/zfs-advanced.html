<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>21.6. Themen für Fortgeschrittene</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="zfs.html" title="Kapitel 21. Das Z-Dateisystem (ZFS)" /><link rel="prev" href="zfs-zfs-allow.html" title="21.5. Delegierbare Administration" /><link rel="next" href="zfs-links.html" title="21.7. Zusätzliche Informationen" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">21.6. Themen für Fortgeschrittene</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="zfs-zfs-allow.html">Zurück</a> </td><th width="60%" align="center">Kapitel 21. Das Z-Dateisystem (<acronym class="acronym">ZFS</acronym>)</th><td width="20%" align="right"> <a accesskey="n" href="zfs-links.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="zfs-advanced"></a>21.6. Themen für Fortgeschrittene</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="zfs-advanced-tuning"></a>21.6.1. Anpassungen</h3></div></div></div><p>Eine Reihe von Anpassungen können vorgenommen werden, um
	<acronym class="acronym">ZFS</acronym> unter verschiedenen Belastungen während
	des Betriebs bestmöglich einzustellen.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a id="zfs-advanced-tuning-arc_max"></a><span class="emphasis"><em><code class="varname">vfs.zfs.arc_max</code></em></span>
	    - Maximale Größe des <a class="link" href="zfs-term.html#zfs-term-arc"><acronym class="acronym">ARC</acronym></a>.
	    Die Voreinstellung ist der gesamte <acronym class="acronym">RAM</acronym>
	    weniger 1 GB oder die Hälfte vom
	    <acronym class="acronym">RAM</acronym>, je nachdem, was mehr ist.
	    Allerdings sollte ein niedriger Wert verwendet werden,
	    wenn das System weitere Dienste oder Prozesse laufen
	    lässt, welche Hauptspeicher benötigen.  Dieser Wert kann
	    nur zur Bootzeit eingestellt werden und wird in
	    <code class="filename">/boot/loader.conf</code> festgelegt.</p></li><li class="listitem"><p><a id="zfs-advanced-tuning-arc_meta_limit"></a><span class="emphasis"><em><code class="varname">vfs.zfs.arc_meta_limit</code></em></span>
	    - Schränkt die Menge des <a class="link" href="zfs-term.html#zfs-term-arc"><acronym class="acronym">ARC</acronym></a>
	    ein, welche für die Speicherung von Metadaten verwendet
	    wird.  Die Voreinstellung ist ein Viertel von
	    <code class="varname">vfs.zfs.arc_max</code>.  Diesen Wert zu
	    erhöhen steigert die Geschwindigkeit, wenn die Arbeitslast
	    Operationen auf einer großen Menge an Dateien und
	    Verzeichnissen oder häufigen Metadatenoperationen
	    beinhaltet.  Jedoch bedeutet dies auch weniger Dateidaten,
	    die in den <a class="link" href="zfs-term.html#zfs-term-arc"><acronym class="acronym">ARC</acronym></a>
	    passen.  Dieser Wert kann nur zur Bootzeit angepasst
	    werden und wird in <code class="filename">/boot/loader.conf</code>
	    gesetzt.</p></li><li class="listitem"><p><a id="zfs-advanced-tuning-arc_min"></a><span class="emphasis"><em><code class="varname">vfs.zfs.arc_min</code></em></span>
	    - Minimale Größe des <a class="link" href="zfs-term.html#zfs-term-arc"><acronym class="acronym">ARC</acronym></a>.
	    Der Standard beträgt die Hälfte von
	    <code class="varname">vfs.zfs.arc_meta_limit</code>.  Passen Sie
	    diesen Wert an, um zu verhindern, dass andere Anwendungen
	    den gesamten <a class="link" href="zfs-term.html#zfs-term-arc"><acronym class="acronym">ARC</acronym></a>
	    verdrängen.  Dieser Wert kann nur zur Bootzeit geändert
	    und muss in <code class="filename">/boot/loader.conf</code>
	    festgelegt werden.</p></li><li class="listitem"><p><a id="zfs-advanced-tuning-vdev-cache-size"></a><span class="emphasis"><em><code class="varname">vfs.zfs.vdev.cache.size</code></em></span>
	    - Eine vorallokierte Menge von Speicher, die als Cache für
	    jedes Gerät im Pool reserviert wird.  Die Gesamtgröße von
	    verwendetem Speicher ist dieser Wert multipliziert mit der
	    Anzahl an Geräten.  Nur zur Bootzeit kann dieser Wert
	    angepasst werden und wird in
	    <code class="filename">/boot/loader.conf</code> eingestellt.</p></li><li class="listitem"><p><a id="zfs-advanced-tuning-min-auto-ashift"></a><span class="emphasis"><em><code class="varname">vfs.zfs.min_auto_ashift</code></em></span>
	    - Minimaler <code class="varname">ashift</code>-Wert (Sektorgröße),
	    welche zur Erstellungszeit des Pools automatisch verwendet
	    wird.  Der Wert ist ein Vielfaches zur Basis Zwei.  Der
	    Standardwert von <code class="literal">9</code> repräsentiert
	    <code class="literal">2^9 = 512</code>, eine Sektorgröße von 512
	    Bytes.  Um <span class="emphasis"><em>write amplification</em></span> zu
	    vermeiden und die bestmögliche Geschwindigkeit zu
	    erhalten, setzen Sie diesen Wert auf die größte
	    Sektorgröße, die bei einem Gerät im Pool vorhanden
	    ist.</p><p>Viele Geräte besitzen 4 KB große Sektoren.  Die
	    Verwendung der Voreinstellung <code class="literal">9</code> bei
	    <code class="varname">ashift</code> mit diesen Geräten resultiert in
	    einer write amplification auf diesen Geräten.  Daten,
	    welche in einem einzelnen 4 KB Schreibvorgang Platz
	    finden würden, müssen stattdessen in acht 512-byte
	    Schreibvorgänge aufgeteilt werden.  <acronym class="acronym">ZFS</acronym>
	    versucht, die allen Geräten zugrundeliegende Sektorgröße
	    während der Poolerstellung zu lesen, jedoch melden viele
	    Geräte mit 4 KB Sektoren, dass ihre Sektoren aus
	    Kompatibilitätsgründen 512 Bytes betragen.  Durch das
	    Setzen von <code class="varname">vfs.zfs.min_auto_ashift</code> auf
	    <code class="literal">12</code> (<code class="literal">2^12 = 4096</code>)
	    bevor der Pool erstellt wird, zwingt
	    <acronym class="acronym">ZFS</acronym> dazu, für diese Geräte 4 KB
	    Blöcke für bessere Geschwindigkeit zu nutzen.</p><p>Erzwingen von 4 KB Blöcken ist ebenfalls
	    hilfreich auf Pools bei denen Plattenaufrüstungen geplant
	    sind.  Zukünftige Platten werden wahrscheinlich
	    4 KB große Sektoren und der Wert von
	    <code class="varname">ashift</code> lässt sich nach dem Erstellen
	    des Pools nicht mehr ändern.</p><p>In besonderen Fällen ist die kleinere Blockgröße von
	    512-Byte vorzuziehen.  Weniger Daten werden bei kleinen,
	    zufälligen Leseoperationen übertragen, was besonders bei
	    512-Byte großen Platten für Datenbanken oder Plattenplatz
	    für virtuelle Maschinen der Fall ist.  Dies kann bessere
	    Geschwindigkeit bringen, ganz besonders wenn eine kleinere
	    <acronym class="acronym">ZFS</acronym> record size verwendet wird.</p></li><li class="listitem"><p><a id="zfs-advanced-tuning-prefetch_disable"></a><span class="emphasis"><em><code class="varname">vfs.zfs.prefetch_disable</code></em></span>
	    - Prefetch deaktivieren.  Ein Wert von <code class="literal">0</code>
	    bedeutet aktiviert und <code class="literal">1</code> heißt
	    deaktiviert.  Die Voreinstellung ist <code class="literal">0</code>,
	    außer, das System besitzt weniger als
	    4 GB <acronym class="acronym">RAM</acronym>.  Prefetch funktioniert
	    durch das Lesen von grösseren Blöcken in den <a class="link" href="zfs-term.html#zfs-term-arc"><acronym class="acronym">ARC</acronym></a> als
	    angefordert wurden, in der Hoffnung, dass diese Daten
	    ebenfalls bald benötigt werden.  Wenn die I/O-Last viele
	    große Mengen von zufälligen Leseoperationen beinhaltet,
	    ist das Deaktivieren von prefetch eine
	    Geschwindigkeitssteigerung durch die Reduzierung von
	    unnötigen Leseoperationen.  Dieser Wert kann zu jeder Zeit
	    über <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> angepasst werden.</p></li><li class="listitem"><p><a id="zfs-advanced-tuning-vdev-trim_on_init"></a><span class="emphasis"><em><code class="varname">vfs.zfs.vdev.trim_on_init</code></em></span>
	    - Steuert, ob neue Geräte, die dem Pool hinzugefügt
	    werden, das <code class="literal">TRIM</code>-Kommando ausführen
	    sollen.  Das beinhaltet die beste Geschwindigkeit und
	    Langlebigkeit für <acronym class="acronym">SSD</acronym>s, benötigt jedoch
	    zusätzliche Zeit.  Wenn das Gerät bereits sicher gelöscht
	    wurde, kann durch deaktivieren dieser Option das
	    Hinzufügen neuer Geräte schneller geschehen.  Über
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> lässt sich dieser Wert jederzeit
	    einstellen.</p></li><li class="listitem"><p><a id="zfs-advanced-tuning-vdev-max_pending"></a><span class="emphasis"><em><code class="varname">vfs.zfs.vdev.max_pending</code></em></span>
	    - Begrenzt die Menge von ausstehenden I/O-Anfragen pro
	    Gerät.  Ein größerer Wert wird die Gerätewarteschlange
	    für Befehle gefüllt lassen und möglicherweise besseren
	    Durchsatz erzeugen.  Ein niedrigerer Wert reduziert die
	    Latenz.  Jederzeit kann dieser Wert über <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>
	    angepasst werden.</p></li><li class="listitem"><p><a id="zfs-advanced-tuning-top_maxinflight"></a><span class="emphasis"><em><code class="varname">vfs.zfs.top_maxinflight</code></em></span>
	    - Maximale Anzahl von ausstehenden I/Os pro
	    darüberliegendem <a class="link" href="zfs-term.html#zfs-term-vdev">vdev</a>.  Begrenzt die Tiefe
	    Kommandowarteschlange, um hohe Latenzen zu vermeiden.  Das
	    Limit ist pro darüberliegendem vdev, was bedeutet, dass
	    das Limit für jeden <a class="link" href="zfs-term.html#zfs-term-vdev-mirror">mirror</a>, <a class="link" href="zfs-term.html#zfs-term-vdev-raidz">RAID-Z</a>, oder anderes
	    vdev unabhängig gilt.  Mit <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> kann dieser Wert
	    jederzeit angepasst werden.</p></li><li class="listitem"><p><a id="zfs-advanced-tuning-l2arc_write_max"></a><span class="emphasis"><em><code class="varname">vfs.zfs.l2arc_write_max</code></em></span>
	    - Begrenzt die Menge an Daten, die pro Sekunde in den <a class="link" href="zfs-term.html#zfs-term-l2arc"><acronym class="acronym">L2ARC</acronym></a>
	    geschrieben wird.  Durch diese Einstellung lässt sich die
	    Lebensdauer von <acronym class="acronym">SSD</acronym>s erhöhen, indem die
	    Menge an Daten beschränkt wird, die auf das Gerät
	    geschrieben wird.  Dieser Wert ist über <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> zu
	    einem beliebigen Zeitpunkt änderbar.</p></li><li class="listitem"><p><a id="zfs-advanced-tuning-l2arc_write_boost"></a><span class="emphasis"><em><code class="varname">vfs.zfs.l2arc_write_boost</code></em></span>
	    - Der Wert dieser Einstellung wird zu <a class="link" href="zfs-advanced.html#zfs-advanced-tuning-l2arc_write_max"><code class="varname">vfs.zfs.l2arc_write_max</code></a>
	    addiert und erhöht die Schreibgeschwindigkeit auf die
	    <acronym class="acronym">SSD</acronym> bis der erste Block aus dem <a class="link" href="zfs-term.html#zfs-term-l2arc"><acronym class="acronym">L2ARC</acronym></a>
	    verdrängt wurde.  Diese <span class="quote">&#8222;<span class="quote">Turbo Warmup Phase</span>&#8220;</span>
	    wurde entwickelt, um den Geschwindigkeitsverlust eines
	    leeren <a class="link" href="zfs-term.html#zfs-term-l2arc"><acronym class="acronym">L2ARC</acronym></a>
	    nach einem Neustart zu reduzieren.  Jederzeit kann dieser
	    Wert mit <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> geändert werden.</p></li><li class="listitem"><p><a id="zfs-advanced-tuning-scrub_delay"></a><span class="emphasis"><em><code class="varname">vfs.zfs.scrub_delay</code></em></span>
	    - Anzahl von Ticks an Verzögerung zwischen jedem I/O
	    während eines <a class="link" href="zfs-term.html#zfs-term-scrub"><code class="command">scrub</code></a>.
	    Um zu gewährleisten, dass ein <code class="command">scrub</code>
	    nicht mit die normalen Vorgänge eines Pools
	    beeinträchtigt.  Wenn währenddessen andere
	    <acronym class="acronym">I/O</acronym>s durchgeführt werden, wird der
	    <code class="command">scrub</code> zwischen jedem Befehl verzögert.
	    Dieser Wert regelt die Gesamtmenge von
	    <acronym class="acronym">IOPS</acronym> (I/Os Per Second), die von
	    <code class="command">scrub</code> generiert werden.  Die
	    Granularität der Einstellung ist bestimmt durch den Wert
	    von <code class="varname">kern.hz</code>, welcher standardmäßig auf
	    auf 1000 Ticks pro Sekunde eingestellt ist.  Diese
	    Einstellung kann geändert werden, was in einer
	    unterschiedlich effektiven Limitierung der
	    <acronym class="acronym">IOPS</acronym> resultiert.  Der Standardwert ist
	    <code class="literal">4</code>, was ein Limit von
	    1000 ticks/sec / 4 =
	    250 <acronym class="acronym">IOPS</acronym> ergibt.  Ein Wert von
	    <em class="replaceable"><code>20</code></em> würde ein Limit von
	    1000 ticks/sec / 20 =
	    50 <acronym class="acronym">IOPS</acronym> ergeben.  Die
	    <code class="command">scrub</code>-Geschwindigkeit ist nur begrenzt,
	    wenn es kürzlich Aktivität auf dem Pool gab, wie der Wert
	    von <a class="link" href="zfs-advanced.html#zfs-advanced-tuning-scan_idle"><code class="varname">vfs.zfs.scan_idle</code></a>
	    verrät.  Zu einem beliebigen Zeitpunkt kann über
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> eine Änderung an diesem Wert
	    erfolgen.</p></li><li class="listitem"><p><a id="zfs-advanced-tuning-resilver_delay"></a><span class="emphasis"><em><code class="varname">vfs.zfs.resilver_delay</code></em></span>
	    - Anzahl an Millisekunden Verzögerung, die zwischen jedem
	    I/O während eines <a class="link" href="zfs-term.html#zfs-term-resilver">resilver</a> eingefügt
	    wird.  Um zu versichern, dass ein resilver nicht die
	    normalen Vorgänge auf dem Pool stört, wird dieser zwischen
	    jedem Kommando verzögert, wenn andere I/Os auf dem Pool
	    passieren.  Dieser Wert steuert das Limit der
	    Gesamt-<acronym class="acronym">IOPS</acronym> (I/Os Pro Sekunde), die vom
	    resilver erzeugt werden.  Die Granularität der Einstellung
	    wird durch den Wert von <code class="varname">kern.hz</code>
	    bestimmt, welcher standardmäßig 1000 Ticks pro Sekunde
	    beträgt.  Diese Einstellung lässt sich ändern, was in
	    einem unterschiedlich effizienten
	    <acronym class="acronym">IOPS</acronym>-Limit resultiert.  Die
	    Voreinstellung ist 2, was ein Limit von
	    1000 ticks/sec / 2 =
	    500 <acronym class="acronym">IOPS</acronym> beträgt.  Einen Pool
	    wieder in den Zustand <a class="link" href="zfs-term.html#zfs-term-online">Online</a> zu versetzen ist
	    möglicherweise wichtiger wenn eine andere Platte den Pool
	    in den <a class="link" href="zfs-term.html#zfs-term-faulted">Fault</a>-Zustand versetzt,
	    was Datenverlust zur Folge hat.  Ein Wert von 0 wird der
	    resilver-Operation die gleiche Priorität wie anderen
	    Operationen geben, was den Heilungsprozess beschleunigt.
	    Die Geschwindigkeit des resilver wird nur begrenzt, wenn
	    es kürzlich andere Aktivitäten auf dem Pool gab, wie von
	    <a class="link" href="zfs-advanced.html#zfs-advanced-tuning-scan_idle"><code class="varname">vfs.zfs.scan_idle</code></a>
	    festgestellt wird.  Dieser Wert kann zu jeder Zeit über.
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> eingestellt werden.</p></li><li class="listitem"><p><a id="zfs-advanced-tuning-scan_idle"></a><span class="emphasis"><em><code class="varname">vfs.zfs.scan_idle</code></em></span>
	    - Anzahl an Millisekunden seit der letzten Operation bevor
	    der Pool als im Leerlauf befindlich deklariert wird.  Wenn
	    sich der Pool im Leerlauf befindet, wird die Begrenzung
	    für <a class="link" href="zfs-term.html#zfs-term-scrub"><code class="command">scrub</code></a>
	    und
	    <a class="link" href="zfs-term.html#zfs-term-resilver">resilver</a>
	    deaktiviert.  Dieser Wert kann mittels <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>
	    jederzeit angepasst werden.</p></li><li class="listitem"><p><a id="zfs-advanced-tuning-txg-timeout"></a><span class="emphasis"><em><code class="varname">vfs.zfs.txg.timeout</code></em></span>
	    - Maximale Anzahl von Sekunden zwischen
	    <a class="link" href="zfs-term.html#zfs-term-txg">Transaktionsgruppen</a>
	    (transaction group).  Die momentane Transaktionsgruppe
	    wird auf den Pool geschrieben und eine frische
	    Transaktionsgruppe begonnen, wenn diese Menge an Zeit seit
	    der vorherigen Transaktionsgruppe abgelaufen ist.  Eine
	    Transaktionsgruppe kann verfrüht ausgelöst werden, wenn
	    genug Daten geschrieben werden.  Der Standardwert beträgt
	    5 Sekunden.  Ein größerer Wert kann die
	    Lesegeschwindigkeit durch verzögern von asynchronen
	    Schreibvorgängen verbessern, allerdings kann dies
	    ungleiche Geschwindigkeiten hervorrufen, wenn eine
	    Transaktionsgruppe geschrieben wird.  Dieser Wert kann zu
	    einem beliebigen Zeitpunkt mit <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> geändert
	    werden.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="zfs-advanced-i386"></a>21.6.2. <acronym class="acronym">ZFS</acronym> auf i386</h3></div></div></div><p>Manche der Eigenschaften, die von <acronym class="acronym">ZFS</acronym>
	bereitgestellt werden, sind speicherintensiv und benötigen
	Anpassungen für die maximale Effizienz auf Systemen mit
	begrenztem <acronym class="acronym">RAM</acronym>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83705168"></a>21.6.2.1. Hauptspeicher</h4></div></div></div><p>Als absolutes Minimum sollte der gesamte verfügbare
	  Hauptspeicher mindestens ein Gigabyte betragen.  Die
	  vorgeschlagene Menge an <acronym class="acronym">RAM</acronym> ist bedingt
	  durch die Poolgröße und welche Eigenschaften von
	  <acronym class="acronym">ZFS</acronym> verwendet werden.  Eine Faustregel
	  besagt, dass 1 GB RAM für jedes 1 TB Storage
	  vorgesehen werden sollte.  Wenn Deduplizierung zum Einsatz
	  kommt, besagt die Regel, dass 5 GB RAM pro TB an
	  Speicher, der dedupliziert werden soll, bereitgestellt sein
	  muss.  Obwohl manche Anwender <acronym class="acronym">ZFS</acronym> mit
	  weniger <acronym class="acronym">RAM</acronym> einsetzen, stürzen Systeme
	  häufiger wegen unzureichendem Hauptspeicher ab.  Weitere
	  Anpassungen sind unter Umständen nötig für Systeme mit
	  weniger als die vorgeschlagene Menge an RAM.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83707856"></a>21.6.2.2. Kernel-Konfiguration</h4></div></div></div><p>Wegen des begrenzten Addressraumes der <span class="trademark">i386</span>&#8482;-Plattform
	  müssen <acronym class="acronym">ZFS</acronym>-Anwendern auf der
	  <span class="trademark">i386</span>&#8482;-Architektur diese Option der
	  Kernelkonfigurationsdatei hinzufügen, den Kernel erneut
	  bauen und das System neu starten:</p><pre class="programlisting">options        KVA_PAGES=512</pre><p>Dies erweitert den Addressraum des Kernels, was es
	  erlaubt, die Einstellung <code class="varname">vm.kvm_size</code>
	  hinter die momentan vorgegebene Grenze von 1 GB
	  oder das Limit von 2 GB für
	  <acronym class="acronym">PAE</acronym> zu bringen.  Um den passenden Wert
	  für diese Option zu finden, teilen Sie den gewünschten
	  Addressraum in Megabyte durch vier.  In diesem Beispiel
	  beträgt sie <code class="literal">512</code> für 2 GB.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83716304"></a>21.6.2.3. Loader-Anpassungen</h4></div></div></div><p>Der <code class="filename">kmem</code>-Addressraum kann auf allen
	  FreeBSD-Architekturen erhöht werden.  Auf einem Testsystem mit
	  1 GB physischen Speichers wurden mit diesen Optionen in
	  <code class="filename">/boot/loader.conf</code> und einem
	  anschließenden Systemneustart Erfolge erzielt:</p><pre class="programlisting">vm.kmem_size="330M"
vm.kmem_size_max="330M"
vfs.zfs.arc_max="40M"
vfs.zfs.vdev.cache.size="5M"</pre><p>Für eine detailliertere Liste an Empfehlungen für
	  <acronym class="acronym">ZFS</acronym>-bezogene Einstellungen, lesen Sie <a class="link" href="http://wiki.freebsd.org/ZFSTuningGuide" target="_top">http://wiki.freebsd.org/ZFSTuningGuide</a>.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="zfs-zfs-allow.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="zfs.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="zfs-links.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">21.5. Delegierbare Administration </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 21.7. Zusätzliche Informationen</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>