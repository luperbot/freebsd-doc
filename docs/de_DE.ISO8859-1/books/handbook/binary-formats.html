<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>4.12. Binärformate</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="basics.html" title="Kapitel 4. Grundlagen des UNIX Betriebssystems" /><link rel="prev" href="basics-devices.html" title="4.11. Geräte und Gerätedateien" /><link rel="next" href="basics-more-information.html" title="4.13. Weitere Informationen" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.12. Binärformate</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="basics-devices.html">Zurück</a> </td><th width="60%" align="center">Kapitel 4. Grundlagen des UNIX Betriebssystems</th><td width="20%" align="right"> <a accesskey="n" href="basics-more-information.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="binary-formats"></a>4.12. Binärformate</h2></div></div></div><p>Um zu verstehen, warum FreeBSD das Format
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a> benutzt, müssen Sie
      zunächst etwas über die drei gegenwärtig
      <span class="quote">&#8222;<span class="quote">dominanten</span>&#8220;</span> ausführbaren Formate
      für <span class="trademark">UNIX</span>® Systeme wissen:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a></p><p>Das älteste und <span class="quote">&#8222;<span class="quote">klassische</span>&#8220;</span>
          Objektformat von <span class="trademark">UNIX</span>® Systemen.  Es benutzt einen kurzen,
	  kompakten Header mit einer magischen Nummer am Anfang, die oft
          benutzt wird, um das Format zu charakterisieren
          (weitere Details finden Sie unter <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a>).  Es
          enthält drei geladene Segmente: .text, .data und
          .bss, sowie eine Symboltabelle und eine
          Stringtabelle.</p></li><li class="listitem"><p><acronym class="acronym">COFF</acronym></p><p>Das Objektformat von SVR3.  Der Header
          enthält nun eine <span class="quote">&#8222;<span class="quote">Sectiontable</span>&#8220;</span>.  Man kann
          also mit mehr als nur den Sections .text, .data und .bss
          arbeiten.</p></li><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a></p><p>Der Nachfolger von <acronym class="acronym">COFF</acronym>.
          Kennzeichnend sind mehrere Sections und mögliche
          32-Bit- oder 64-Bit-Werte.  Ein wesentlicher Nachteil:
          <acronym class="acronym">ELF</acronym> wurde auch unter der Annahme
          entworfen, dass es nur eine ABI (Application
          Binary Interface) pro Systemarchitektur geben wird.
          Tatsächlich ist diese Annahme falsch &#8211; nicht
          einmal für die kommerzielle SYSV-Welt (in der es
          mindestens drei ABIs gibt: SVR4, Solaris, SCO) trifft
          sie zu.</p><p>FreeBSD versucht, dieses Problem zu umgehen, indem
          ein Werkzeug bereitgestellt wird, um ausführbare
          Dateien im <acronym class="acronym">ELF</acronym>-Format mit
          Informationen über die ABI zu versehen, zu der
          sie passen.  Weitere Informationen finden Sie in der
          Manualpage <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a>.</p></li></ul></div><p>FreeBSD kommt aus dem <span class="quote">&#8222;<span class="quote">klassischen</span>&#8220;</span> Lager
      und verwendete traditionell das Format <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a>, eine
      Technik, die bereits über viele BSD-Releases
      hinweg eingesetzt und geprüft worden ist.  Obwohl es
      bereits seit einiger Zeit möglich war, auf einem
      FreeBSD-System auch Binaries (und Kernel) im
      <acronym class="acronym">ELF</acronym>-Format zu erstellen und
      auszuführen, widersetzte FreeBSD sich anfangs dem
      <span class="quote">&#8222;<span class="quote">Druck</span>&#8220;</span>, auf <acronym class="acronym">ELF</acronym> als
      Standardformat umzusteigen.  Warum?  Nun, als das
      Linux-Lager die schmerzhafte Umstellung auf
      <acronym class="acronym">ELF</acronym> durchführte, ging es nicht so
      sehr darum, dem ausführbaren Format
      <code class="filename">a.out</code> zu entkommen, als dem
      unflexiblen, auf Sprungtabellen basierten Mechanismus
      für <span class="quote">&#8222;<span class="quote">Shared-Libraries</span>&#8220;</span> der die Konstruktion von
      Shared-Libraries für Hersteller und Entwickler
      gleichermaßen sehr kompliziert machte.  Da die
      verfügbaren <acronym class="acronym">ELF</acronym>-Werkzeuge eine
      Lösung für das Problem mit den Shared-Libraries
      anboten und ohnehin generell als <span class="quote">&#8222;<span class="quote">ein Schritt
      vorwärts</span>&#8220;</span> angesehen wurden, wurde der Aufwand
      für die Umstellung als notwendig akzeptiert und die
      Umstellung wurde durchgeführt.  Unter FreeBSD ist der
      Mechanismus von Shared-Libraries enger an den Stil des
      Shared-Library-Mechanismus von Suns <span class="trademark">SunOS</span>&#8482;
      angelehnt und von daher sehr einfach zu verwenden.</p><p>Ja, aber warum gibt es so viele unterschiedliche Formate?</p><p>In alter, grauer Vorzeit gab es simple Hardware.
      Diese simple Hardware unterstützte ein einfaches,
      kleines System.  <code class="filename">a.out</code> war absolut passend
      für die Aufgabe, Binaries auf diesem simplen System (eine PDP-11)
      darzustellen.  Als <span class="trademark">UNIX</span>® von diesem simplen System portiert
      wurde, wurde auch das <code class="filename">a.out</code>-Format beibehalten,
      weil es für die frühen Portierungen auf Architekturen
      wie den Motorola 68000 und VAX ausreichte.</p><p>Dann dachte sich ein schlauer Hardware-Ingenieur,
      dass, wenn er Software zwingen könnte, einige
      Tricks anzustellen, es ihm möglich wäre, ein
      paar Gatter im Design zu sparen, und seinen CPU-Kern
      schneller zu machen.  Obgleich es dazu gebracht wurde, mit
      dieser neuen Art von Hardware (heute als <acronym class="acronym">RISC</acronym>
      bekannt) zu arbeiten, war <code class="filename">a.out</code> für
      diese Hardware schlecht geeignet.  Deshalb wurden viele neue
      Formate entwickelt, um eine bessere Leistung auf dieser
      Hardware zu erreichen, als mit dem begrenzten, simplen
      <code class="filename">a.out</code>-Format.  Dinge wie
      <acronym class="acronym">COFF</acronym>, <acronym class="acronym">ECOFF</acronym> und
      einige andere obskure wurden erdacht und ihre Grenzen
      untersucht, bevor die Dinge sich in Richtung
      <acronym class="acronym">ELF</acronym> entwickelten.</p><p>Hinzu kam, dass die Größe von
      Programmen gewaltig wurde und Festplatten sowie
      physikalischer Speicher immer noch relativ klein waren.
      Also wurde das Konzept von Shared-Libraries geboren.  Das
      VM-System wurde auch immer fortgeschrittener.  Obwohl bei
      jedem dieser Fortschritte das
      <code class="filename">a.out</code>-Format benutzt worden ist,
      wurde sein Nutzen mit jedem neuen Merkmal mehr und mehr
      gedehnt.  Zusätzlich wollte man Dinge dynamisch zur
      Ausführungszeit laden, oder Teile ihres Programms
      nach der Initialisierung wegwerfen, um Hauptspeicher
      oder Swap-Speicher zu sparen.  Programmiersprachen
      wurden immer fortschrittlicher und man wollte, dass
      Code automatisch vor der main-Funktion aufgerufen wird.
      Das <code class="filename">a.out</code>-Format wurde oft
      überarbeitet, um alle diese Dinge zu ermöglichen
      und sie funktionierten auch für einige Zeit.
      <code class="filename">a.out</code> konnte diese Probleme nicht
      ohne ein ständiges Ansteigen eines Overheads im Code
      und in der Komplexität handhaben.  Obwohl
      <acronym class="acronym">ELF</acronym> viele dieser Probleme löste,
      wäre es sehr aufwändig, ein System umzustellen, das
      im Grunde genommen funktionierte.  Also musste
      <acronym class="acronym">ELF</acronym> warten, bis es aufwändiger war, bei
      <code class="filename">a.out</code> zu bleiben, als zu
      <acronym class="acronym">ELF</acronym> überzugehen.</p><p>Im Laufe der Zeit haben sich die Erstellungswerkzeuge,
      von denen FreeBSD seine Erstellungswerkzeuge abgeleitet
      hat (speziell der Assembler und der Loader), in zwei
      parallele Zweige entwickelt.  Im FreeBSD-Zweig wurden
      Shared-Libraries hinzugefügt und einige Fehler
      behoben.  Das GNU-Team, das diese Programme
      ursprünglich geschrieben hat, hat sie umgeschrieben
      und eine simplere Unterstützung zur Erstellung von
      Cross-Compilern durch beliebiges Einschalten verschiedener
      Formate usw. hinzugefügt.  Viele Leute wollten
      Cross-Compiler für FreeBSD erstellen, aber sie hatten
      kein Glück, denn FreeBSD's ältere Sourcen
      für <span class="application">as</span> und <span class="application">ld</span>
      waren hierzu nicht geeignet.  Die neuen
      GNU-Werkzeuge (<span class="application">binutils</span>) unterstützen
      Cross-Compilierung, <acronym class="acronym">ELF</acronym>, Shared-Libraries,
      C++-Erweiterungen und mehr.  Weiterhin geben viele
      Hersteller <acronym class="acronym">ELF</acronym>-Binaries heraus und es
      ist gut, wenn FreeBSD sie ausführen kann.</p><p><acronym class="acronym">ELF</acronym> ist ausdrucksfähiger als
      <code class="filename">a.out</code> und gestattet eine bessere Erweiterbarkeit
      des Basissystems.  Die <acronym class="acronym">ELF</acronym>-Werkzeuge werden
      besser gewartet und bieten Unterstützung von
      Cross-Compilierung, was für viele Leute wichtig ist.
      <acronym class="acronym">ELF</acronym> mag etwas langsamer sein, als
      <code class="filename">a.out</code>, aber zu versuchen, das zu messen,
      könnte schwierig werden.  Es gibt unzählige Details, in
      denen sich die beiden Formate unterscheiden, wie sie Pages
      abbilden, Initialisierungscode handhaben usw.  Keins davon
      ist sehr wichtig, aber es sind Unterschiede.  Irgendwann
      wird die Unterstützung für Programme im
      <code class="filename">a.out</code>-Format aus dem
      <code class="filename">GENERIC</code>-Kernel entfernt werden.
      Wenn es dann keinen oder kaum noch
      Bedarf für die Unterstützung dieses Formates
      gibt, werden die entsprechenden Routinen ganz entfernt
      werden.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="basics-devices.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="basics-more-information.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">4.11. Geräte und Gerätedateien </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 4.13. Weitere Informationen</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>