<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>15.5. Einmalpasswörter</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="security.html" title="Kapitel 15. Sicherheit" /><link rel="prev" href="crypt.html" title="15.4. DES, Blowfish, MD5, und Crypt" /><link rel="next" href="tcpwrappers.html" title="15.6. TCP-Wrapper" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">15.5. Einmalpasswörter</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="crypt.html">Zurück</a> </td><th width="60%" align="center">Kapitel 15. Sicherheit</th><td width="20%" align="right"> <a accesskey="n" href="tcpwrappers.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="one-time-passwords"></a>15.5. Einmalpasswörter</h2></div></div></div><a id="idp78396880" class="indexterm"></a><a id="idp78397392" class="indexterm"></a><p>In der Voreinstellung unterstützt FreeBSD
      OPIE (<span class="foreignphrase"><em class="foreignphrase">One-time Passwords in
      Everything</em></span>), das in der Regel MD5-Hash-Funktionen
      einsetzt.</p><p>Im Folgenden werden drei verschiedene
      Passwörter verwendet.  Das erste ist Ihr normales System- oder
      Kerberos-Passwort und wird im Folgenden <span class="quote">&#8222;<span class="quote">System-Passwort</span>&#8220;</span>
      genannt.  Das zweite ist das Einmalpasswort, das bei OPIE von
      <code class="command">opiekey</code> generiert und von
      <code class="command">opiepasswd</code> und dem Login-Programm akzeptiert wird.
      Im Folgenden wird es <span class="quote">&#8222;<span class="quote">Einmalpasswort</span>&#8220;</span> genannt.  Das dritte
      Passwort ist das geheime Passwort, das Sie mit
      <code class="command">opiekey</code> (manchmal auch mit
      <code class="command">opiepasswd</code>) zum Erstellen
      der Einmalpasswörter verwenden.  Dieses Passwort
      werden wir im Folgenden <span class="quote">&#8222;<span class="quote">geheimes Passwort</span>&#8220;</span>
      oder schlicht <span class="quote">&#8222;<span class="quote">Passwort</span>&#8220;</span> nennen.</p><p>Das geheime Passwort steht in keiner Beziehung zu Ihrem
      System-Passwort, beide können gleich sein, obwohl das nicht
      empfohlen wird.  Die geheimen Passwörter von
      OPIE sind nicht auf eine Länge von 8 Zeichen,
      wie alte <span class="trademark">UNIX</span>® Passwörter<a href="#ftn.idp78411856" class="footnote" id="idp78411856"><sup class="footnote">[10]</sup></a>, beschränkt.
      Sie können so lang sein, wie Sie wollen.  Gebräuchlich sind
      Passwörter, die sich aus sechs bis sieben Wörtern
      zusammensetzen.  Das OPIE-System arbeitet
      größtenteils unabhängig von den
      auf <span class="trademark">UNIX</span>®-Systemen verwendeten Passwort-Mechanismen.</p><p>Neben dem Passwort gibt es noch zwei Werte, die für
      OPIE wichtig sind.  Der erste ist der
      <span class="quote">&#8222;<span class="quote">Initialwert</span>&#8220;</span> (engl. <span class="foreignphrase"><em class="foreignphrase">seed</em></span>
      oder <span class="foreignphrase"><em class="foreignphrase">key</em></span>), der aus zwei Buchstaben
      und fünf Ziffern besteht.  Der zweite Wert ist der
      <span class="quote">&#8222;<span class="quote">Iterationszähler</span>&#8220;</span>, eine Zahl zwischen
      1 und 100.  OPIE generiert das Einmalpasswort, indem
      es den Initialwert und das geheime Passwort aneinander hängt
      und dann die MD5-Hash-Funktion so oft, wie durch den
      Iterationszähler gegeben, anwendet.  Das Ergebnis wird in
      sechs englische Wörter umgewandelt, die Ihr Einmalpasswort
      sind.  Das Authentifizierungssystem (meistens PAM) merkt sich das
      zuletzt benutzte Einmalpasswort und Sie sind authentisiert,
      wenn die Hash-Funktion des Passworts dem vorigen Passwort
      entspricht.  Da nicht umkehrbare Hash-Funktionen benutzt werden,
      ist es unmöglich, aus einem bekannten Passwort weitere
      gültige Einmalpasswörter zu berechnen.  Der
      Iterationszähler wird nach jeder erfolgreichen Anmeldung um
      eins verringert und stellt so die Synchronisation zwischen Benutzer
      und Login-Programm sicher.  Wenn der Iterationszähler den
      Wert 1 erreicht, muss OPIE neu initialisiert werden.</p><p>In jedem System werden mehrere Programme verwendet, die weiter
      unten beschrieben werden.  <code class="command">opiekey</code> verlangt
      einen Iterationszähler, einen Initialwert und ein geheimes
      Passwort.  Daraus generiert es ein Einmalpasswort oder eine Liste
      von Einmalpasswörtern.  <code class="command">opiepasswd</code> wird
      dazu benutzt, um OPIE zu initialisieren.  Mit diesem Programm
      können Passwörter, Iterationszähler oder
      Initialwerte geändert werden.  Als Parameter verlangt es
      entweder ein geheimes Passwort oder einen Iterationszähler
      oder einen Initialwert und ein Einmalpasswort.
      <code class="command">opieinfo</code> hingegen gibt den momentanen
      Iterationszähler und Initialwert eines Benutzers aus.  Diese
      werden aus der Datei <code class="filename">/etc/opiekeys</code>
      ermittelt.</p><p>Im Folgenden werden vier verschiedene Tätigkeiten beschrieben.
      Zuerst wird erläutert, wie
      <code class="command">opiepasswd</code> über eine gesicherte Verbindung
      eingesetzt werden, um Einmalpasswörter das erste Mal
      zu konfigurieren oder das Passwort oder den Initialwert
      zu ändern.  Als nächstes wird erklärt, wie
      <code class="command">opiepasswd</code> über eine nicht gesicherte
      Verbindung, oder zusammen mit <code class="command">opiekey</code> über
      eine gesicherte Verbindung eingesetzt werden, um dasselbe zu
      erreichen. Als drittes wird beschrieben, wie
      <code class="command">opiekey</code> genutzt wird,
      um sich über eine nicht gesicherte Verbindung anzumelden.
      Die vierte Tätigkeit beschreibt, wie mit
      <code class="command">opiekey</code> eine Reihe von Schlüsseln
      generiert wird, die Sie sich aufschreiben oder ausdrucken können,
      um sich von Orten anzumelden, die über keine gesicherten
      Verbindungen verfügen.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78419664"></a>15.5.1. Einrichten über eine gesicherte Verbindung</h3></div></div></div><p>Um OPIE erstmals zu initalisieren, rufen Sie
	<code class="command">opiepasswd</code> auf:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiepasswd -c</code></strong>
[grimreaper] ~ $ opiepasswd -f -c
Adding unfurl:
Only use this method from the console; NEVER from remote. If you are using
telnet, xterm, or a dial-in, type ^C now or exit with no password.
Then run opiepasswd without the -c parameter.
Using MD5 to compute responses.
Enter new secret pass phrase:
Again new secret pass phrase:

ID unfurl OTP key is 499 to4268
MOS MALL GOAT ARM AVID COED
      </pre><p>Nach der Aufforderung <code class="prompt">Enter new secret pass phrase:</code>
	oder <code class="prompt">Enter secret password:</code> geben Sie bitte Ihr
	Passwort ein.  Dies ist nicht das Passwort, mit dem Sie sich
	anmelden, sondern es wird genutzt, um das Einmalpasswort
	zu generieren.  Die Zeile, die mit <span class="quote">&#8222;<span class="quote">ID</span>&#8220;</span> anfängt,
	enthält Ihren Login-Namen, den Iterationszähler und den
	Initialwert.  Diese Werte müssen Sie sich nicht behalten, da
	das System sie zeigen wird, wenn Sie sich anmelden.  In der letzten
	Zeile steht das Einmalpasswort, das aus diesen Parametern
	und Ihrem geheimen Passwort ermittelt wurde.  Wenn sie sich jetzt
	wieder anmelden wollten, dann müssten Sie dieses
	Passwort benutzen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78423888"></a>15.5.2. Einrichten über eine nicht gesicherte Verbindung</h3></div></div></div><p>Um Einmalpasswörter über eine nicht gesicherte
	Verbindung einzurichten, oder das geheime Passwort zu ändern,
        müssen Sie über eine gesicherte Verbindung zu einer Stelle
	verfügen, an der Sie <code class="command">opiekey</code> ausführen.
	Dies kann etwa die Eingabeaufforderung auf einer Maschine, der Sie
	vertrauen, sein.  Zudem müssen Sie einen Iterationszähler
	vorgeben (100 ist ein guter Wert) und einen Initialwert wählen,
	wobei Sie auch einen zufällig generierten benutzen können.
	Benutzen Sie <code class="command">opiepasswd</code> über die ungesicherte
	Verbindung zu der Maschine, die Sie einrichten wollen:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiepasswd</code></strong>

Updating unfurl:
You need the response from an OTP generator.
Old secret pass phrase:
        otp-md5 498 to4268 ext
        Response: GAME GAG WELT OUT DOWN CHAT
New secret pass phrase:
        otp-md5 499 to4269
        Response: LINE PAP MILK NELL BUOY TROY

ID mark OTP key is 499 gr4269
LINE PAP MILK NELL BUOY TROY</pre><p>Drücken Sie <span class="keycap"><strong>Return</strong></span>, um die Vorgabe
	für den Initialwert zu akzeptieren.  Bevor
	Sie nun das Zugriffspasswort
	(engl. <span class="foreignphrase"><em class="foreignphrase">access password</em></span>)
	eingeben, rufen Sie über die gesicherte Verbindung
	<code class="command">opikey</code> mit denselben Parametern auf:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiekey 498 to4268</code></strong>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT</pre><p>Gehen Sie nun zurück zu der nicht gesicherten Verbindung
	und geben dort das eben generierte Einmalpasswort ein.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78429904"></a>15.5.3. Erzeugen eines einzelnen Einmalpasswortes</h3></div></div></div><p>Nachdem Sie OPIE eingerichtet haben, werden Sie beim
	nächsten Anmelden wie folgt begrüßt:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>telnet example.com</code></strong>
Trying 10.0.0.1...
Connected to example.com
Escape character is '^]'.

FreeBSD/i386 (example.com) (ttypa)

login: <strong class="userinput"><code>&lt;username&gt;</code></strong>
otp-md5 498 gr4269 ext
Password: </pre><p>Anmerkung: OPIE besitzt eine nützliche Eigenschaft,
	die hier nicht gezeigt ist.  Wenn Sie an der Eingabeaufforderung
	<span class="keycap"><strong>Return</strong></span> eingeben, wird die echo-Funktion eingeschaltet,
	das heißt Sie sehen, was Sie tippen.  Dies ist besonders
	nützlich, wenn Sie ein generiertes Passwort von einem
	Ausdruck abtippen müssen.</p><a id="idp78437456" class="indexterm"></a><a id="idp78437968" class="indexterm"></a><a id="idp78438480" class="indexterm"></a><p>Jetzt müssen Sie Ihr Einmalpasswort generieren,
	um der Anmeldeaufforderung nachzukommen.  Dies muss auf
	einem gesicherten System geschehen, auf dem Sie
	oder <code class="command">opiekey</code> ausführen können.
	Dieses Programm gibt es übrigens auch für DOS, <span class="trademark">Windows</span>® und
	<span class="trademark">Mac OS</span>®.  Es benötigt den Iterationszähler
	sowie den Initialwert als Parameter, die Sie mittels
	<span class="quote">&#8222;<span class="quote">cut-and-paste</span>&#8220;</span> direkt von der Login-Aufforderung
	nehmen können.</p><p>Auf dem sicheren System:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiekey 498 to4268</code></strong>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT</pre><p>Mit dem jetzt generierten Einmalpasswort können
	Sie die Anmeldeprozedur fortsetzen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78443216"></a>15.5.4. Erzeugen von mehreren Einmalpasswörtern</h3></div></div></div><p>Manchmal müssen Sie sich an Orte begeben, an denen
	Sie keinen Zugriff auf eine sichere Maschine oder eine
	sichere Verbindung haben.  In diesem Fall können Sie
	vorher mit <code class="command">opiekey</code>
	einige Einmalpasswörter generieren, die Sie sich
	ausdrucken und mitnehmen können.  Zum Beispiel:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiekey -n 5 30 zz99999</code></strong>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase: <strong class="userinput"><code>&lt;secret password&gt;</code></strong>
26: JOAN BORE FOSS DES NAY QUIT
27: LATE BIAS SLAY FOLK MUCH TRIG
28: SALT TIN ANTI LOON NEAL USE
29: RIO ODIN GO BYE FURY TIC
30: GREW JIVE SAN GIRD BOIL PHI</pre><p>Mit <code class="option">-n 5</code> fordern Sie fünf
	Passwörter der Reihe nach an.  Der letzte
	Iterationszähler wird durch <code class="option">30</code> gegeben.
	Beachten Sie bitte, dass die Passwörter in der
	<span class="emphasis"><em>umgekehrten</em></span> Reihenfolge, in der sie
	zu benutzen sind, ausgeben werden.  Wenn Sie wirklich paranoid
	sind, schreiben Sie sich jetzt die Passwörter auf,
	ansonsten drucken Sie sie mit <code class="command">lpr</code> aus.
	Beachten Sie, dass jede Zeile den Iterationszähler
	und das Einmalpasswort zeigt, trotzdem finden Sie es
	vielleicht hilfreich, eine Zeile nach Gebrauch durchzustreichen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78448208"></a>15.5.5. Einschränken der Benutzung von
	System-Passwörtern</h3></div></div></div><p>OPIE kann die Verwendung von System-Passwörtern
	abhängig von der Quell-IP-Adresse einschränken.
	Die dazu nötigen Einstellungen werden in der Datei
	<code class="filename">/etc/opieaccess</code> vorgenommen, die
	bei der Installation des Systems automatisch erzeugt wird.
	Weitere Informationen über diese Datei und
	Sicherheitshinweise zu ihrer Verwendung entnehmen Sie bitte
	der Hilfeseite <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=opieaccess&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">opieaccess</span>(5)</span></a>.</p><p>Die Datei <code class="filename">opieaccess</code> könnte
	beispielsweise die folgende Zeile enthalten:</p><pre class="programlisting">permit 192.168.0.0 255.255.0.0</pre><p>Diese Zeile erlaubt es Benutzern, die sich von einer der
	angegebenen Quell-IP-Adressen anmelden, ihr System-Passwort
	zu verwenden.  Beachten Sie bitte, dass eine Quell-IP-Adresse
	leicht gefälscht werden kann.</p><p>Findet sich in <code class="filename">opieaccess</code> kein
	passender Eintrag, muss die Anmeldung mit OPIE erfolgen.</p></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp78411856" class="footnote"><p><a href="#idp78411856" class="para"><sup class="para">[10] </sup></a>Unter FreeBSD darf das System-Passwort maximal
	  128 Zeichen lang sein.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="crypt.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="security.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="tcpwrappers.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">15.4. DES, Blowfish, MD5, und Crypt </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 15.6. TCP-Wrapper</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>