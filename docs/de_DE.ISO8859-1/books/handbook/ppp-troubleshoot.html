<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>29.4. Probleme bei PPP-Verbindungen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="ppp-and-slip.html" title="Kapitel 29. PPP und SLIP" /><link rel="prev" href="ppp.html" title="29.3. Kernel-PPP" /><link rel="next" href="pppoe.html" title="29.5. PPP over Ethernet (PPPoE)" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">29.4. Probleme bei <acronym class="acronym">PPP</acronym>-Verbindungen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ppp.html">Zurück</a> </td><th width="60%" align="center">Kapitel 29. PPP und SLIP</th><td width="20%" align="right"> <a accesskey="n" href="pppoe.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ppp-troubleshoot"></a>29.4. Probleme bei <acronym class="acronym">PPP</acronym>-Verbindungen</h2></div><div><span class="authorgroup">Beigetragen von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp87877072" class="indexterm"></a><div xmlns="" class="warning"><h3 class="admontitle">Warnung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Mit FreeBSD 8.0 wurde der <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a>-Treiber durch den
	  Treiber <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uart&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">uart</span>(4)</span></a> ersetzt.  Parallel dazu wurden auch die
	  entsprechenden Gerätedateien für die seriellen Ports
	  umbenannt:
	  <code class="filename">/dev/cuadN</code> wurde
	  zu <code class="filename">/dev/cuauN</code>,
	  <code class="filename">/dev/ttydN</code> zu
	  <code class="filename">/dev/ttyuN</code>.
	  Verwenden Sie noch FreeBSD 7.X, müssen Sie dies beim
	  Lesen der folgenden Abschnitte berücksichtigen.</p></div><p>Dieser Abschnitt behandelt Probleme, die auftauchen
	können, wenn PPP über ein Modem verwendet wird.
	Sie müssen beispielsweise genau die Eingabeaufforderung
	des Systems kennen, in das Sie sich einwählen.
	Einige <acronym class="acronym">ISP</acronym>s verwenden <code class="literal">ssword</code>
	andere verwenden <code class="literal">password</code>;  wenn
	das Einwahlskript falsch ist, scheitert die Anmeldung.
	Üblicherweise suchen Sie nach Fehlern der PPP-Verbindung
	indem Sie sich manuell verbinden.  Wie das genau geht,
	wird im Folgenden gezeigt.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87883600"></a>29.4.1. Gerätedateien überprüfen</h3></div></div></div><p>Wenn Sie einen eigenen Kernel verwenden, stellen Sie sicher, dass
	  die folgende Zeile in der Kernelkonfigurationsdatei vorhanden
	  ist:</p><pre class="programlisting">device   uart</pre><p>Das <code class="filename">uart</code>-Gerät ist bereits
	  im <code class="literal">GENERIC</code>-Kernel vorhanden, deshalb sind in
	  diesem Fall keine zusätzlichen Schritte vonnöten.
	  Kontrollieren Sie die Ausgabe von <code class="command">dmesg</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dmesg | grep uart</code></strong></pre><p>In der Ausgabe sollten die entsprechenden
	  <code class="filename">uart</code>-Geräte, beispielsweise
	  <code class="filename">uart1</code>
	  (<code class="filename">COM2</code>), angezeigt werden.
	  Wird ein passendes Gerät angezeigt, brauchen Sie
	  keinen neuen Kernel zu erstellen.  Wenn Ihr Modem an
	  <code class="filename">uart1</code>
	  angeschlossen ist (in DOS ist dieser Anschluss als
	  <code class="filename">COM2</code> bekannt), ist <code class="filename">/dev/cuau1</code> die dazugehörende
	  Gerätedatei.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87894480"></a>29.4.2. Manuelle Verbindungen</h3></div></div></div><p>Ein Verbindungsaufbau zum Internet durch manuelle Steuerung
	von <code class="command">ppp</code> geht schnell, ist einfach und
	stellt einen guten Weg dar, eine Verbindung auf Fehler hin
	zu überprüfen  oder einfach Informationen darüber
	zu sammeln, wie Ihr <acronym class="acronym">ISP</acronym> Verbindungen handhabt.
	Lassen Sie uns <span class="application">PPP</span> von der
	Kommandozeile aus starten.  Beachten Sie, dass in allen
	Beispielen <span class="emphasis"><em>example</em></span>
        der Hostname der Maschine ist, auf der
	<span class="application">PPP</span> läuft.  Sie starten
	<code class="command">ppp</code>, indem Sie einfach <code class="command">ppp</code>
	eingeben:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp</code></strong></pre><p>Wir haben <code class="command">ppp</code> nun gestartet.</p><pre class="screen">ppp ON example&gt; <strong class="userinput"><code>set device /dev/cuau1</code></strong></pre><p>Wir geben das Device an, an das unser Modem angeschlossen ist.
	 In diesem Fall ist es <code class="filename">cuau1</code>.</p><pre class="screen">ppp ON example&gt; <strong class="userinput"><code>set speed 115200</code></strong></pre><p>Wir geben die Verbindungsgeschwindigkeit an.  Im Beispiel
	verwenden wir 115200 <acronym class="acronym">kbps</acronym></p><pre class="screen">ppp ON example&gt; <strong class="userinput"><code>enable dns</code></strong></pre><p>Wir weisen <code class="command">ppp</code> an, unseren
        Resolver zu konfigurieren und in der Datei
	<code class="filename">/etc/resolv.conf</code> Einträge für
	den Nameserver hinzuzufügen.  Falls <code class="command">ppp</code>
        unseren Hostnamen nicht bestimmen kann,  geben wir diesen
	später manuell an.</p><pre class="screen">ppp ON example&gt; <strong class="userinput"><code>term</code></strong></pre><p>Wir wechseln in den <span class="quote">&#8222;<span class="quote">Terminal</span>&#8220;</span>-Modus, um
	das Modem manuell kontrollieren zu können.</p><pre class="programlisting">deflink: Entering terminal mode on <code class="filename">/dev/cuau1</code>
type '~h' for help</pre><pre class="screen"><strong class="userinput"><code>at</code></strong>
OK
<strong class="userinput"><code>atdt123456789</code></strong></pre><p>Sie verwenden <code class="command">at</code> zur Initialisierung
	Ihres Modems und dann <code class="command">atdt</code> sowie die Nummer Ihres
        <acronym class="acronym">ISP</acronym>, um den Einwählprozess zu starten.</p><pre class="screen">CONNECT</pre><p>Dies ist die Bestätigung, dass eine Verbindung aufgebaut
	wurde.  Falls wir Verbindungsprobleme bekommen, die nicht
	mit der Hardware zusammenhängen, werden wir an dieser
	Stelle ansetzen müssen, um eine Lösung zu finden.</p><pre class="screen">ISP Login:<strong class="userinput"><code>myusername</code></strong></pre><p>Hier werden Sie nach einem Benutzernamen gefragt.  Geben Sie
	am Prompt den Namen ein, den Ihnen Ihr <acronym class="acronym">ISP</acronym>
	zur Verfügung gestellt hat.</p><pre class="screen">ISP Pass:<strong class="userinput"><code>mypassword</code></strong></pre><p>An dieser Stelle müssen Sie das Passwort angeben, das
        Ihnen von Ihrem <acronym class="acronym">ISP</acronym> vorgegeben wurde.  Das
	Passwort wird, analog dem normalen Anmeldevorgang,
	nicht angezeigt.</p><pre class="screen">Shell or PPP:<strong class="userinput"><code>ppp</code></strong></pre><p>Abhängig von Ihrem <acronym class="acronym">ISP</acronym>, kann es sein,
        dass dieser Prompt bei Ihnen gar nicht erscheint.  Wir werden
	hier gefragt, ob wir eine Shell beim Provider verwenden oder
        <code class="command">ppp</code> starten wollen.  Weil wir eine
	Internetverbindung aufbauen wollen, haben wir uns in diesem
	Beispiel für <code class="command">ppp</code> entschieden.</p><pre class="screen">Ppp ON example&gt;</pre><p>Beachten Sie, dass sich in diesem Beispiel das erste
	<code class="option">p</code> in einen Großbuchstaben verwandelt hat.
	Dies zeigt, dass wir erfolgreich eine Verbindung
        zu unserem <acronym class="acronym">ISP</acronym> hergestellt haben.</p><pre class="screen">PPp ON example&gt;</pre><p>An dieser Stelle haben wir uns erfolgreich bei unserem
        <acronym class="acronym">ISP</acronym> authentifiziert und warten darauf, dass
        uns eine <acronym class="acronym">IP</acronym>-Adresse zugewiesen wird.</p><pre class="screen">PPP ON example&gt;</pre><p>Wir haben uns mit der Gegenstelle auf eine
	<acronym class="acronym">IP</acronym>-Adresse geeinigt und den Verbindungsaufbau
	erfolgreich abgeschlossen</p><pre class="screen">PPP ON example&gt; <strong class="userinput"><code>add default HISADDR</code></strong></pre><p>Hier geben wir unsere Standardroute an.  Weil zu diesem
        Zeitpunkt unsere einzige Verbindung zu unserer Gegenstelle besteht,
        müssen wir dies tun, bevor wir Kontakt zu unserer Umwelt
	aufnehmen können.  Falls dies aufgrund bestehender Routen
	nicht funktionieren sollte, können Sie ein Ausrufungszeichen
        <code class="literal">!</code> vor <code class="option">add</code> setzen.
        Sie können diese Standardroute aber auch vor dem
	eigentlichen Verbindungsaufbau angeben und
	<span class="application">PPP</span> wird entsprechend  eine neue Route
	aushandeln.</p><p>Wenn alles gut ging, sollten wir nun eine aktive
	Internetverbindung haben, die wir mit
        <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>z</strong></span>
	in den Hintergrund schicken können
        Wenn sie feststellen, dass <code class="command">PPP</code> wieder zu
        <code class="command">ppp</code> wird, ist die Verbindung abgebrochen.
        Es ist gut dies zu wissen, weil dadurch der Verbindungsstatus
	angezeigt wird.  Große <code class="literal">P</code>s zeigen an,
	dass wir eine Verbindung zum <acronym class="acronym">ISP</acronym> haben und
	kleine <code class="literal">p</code>s zeigen an, dass
	wir aus irgendeinem Grund die Verbindung verloren haben.
        <code class="command">ppp</code> hat nur diese beiden Zustände.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87946320"></a>29.4.2.1. Fehlersuche</h4></div></div></div><p>Wenn sie einen Direktanschluss haben und keine Verbindung
          aufbauen können, schalten Sie die Hardware-Flusssteuerung
	  <acronym class="acronym">CTS/RTS</acronym> aus, indem Sie die Option
	  <code class="option">set ctsrts off</code> verwenden.  Dies ist
          zumeist dann der Fall, wenn Sie mit einem
          <span class="application">PPP</span>-fähigen Terminalserver
	  verbunden sind.  Hier bleibt <span class="application">PPP</span>
	  bei dem Versuch hängen, Daten über Ihre
          Nachrichtenverbindung zu schicken, weil auf ein
          <acronym class="acronym">CTS</acronym>-Signal (Clear-to-Send) gewartet
	  wird, das nie kommt.  Wenn Sie diese Option jedoch gebrauchen,
	  sollten Sie auch die Option <code class="option">set accmap</code>
          verwenden, die erforderlich sein kann, um bestimmte Hardware
	  zu kontrollieren, die auf die Übertragung bestimmter
	  Zeichen zwischen den Kommunikations-Endpunkten (zumeist
	  XON/XOFF) angewiesen ist.  Die Manual-Seite <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	  bietet mehr Informationen zu dieser Option und ihrer
	  Verwendung.</p><p>Wenn Sie ein älteres Modem haben, benötigen Sie
          vielleicht die Option <code class="option">set parity even</code>.
	  Standardmäßig wird keine Parität vorausgesetzt,
	  sie ist aber für die Fehlerprüfung bei älteren
	  Modems und bei bestimmten <acronym class="acronym">ISP</acronym>s erforderlich.
	  Sie könnten diese Option für den
	  <acronym class="acronym">ISP</acronym> Compuserve benötigen.</p><p><span class="application">PPP</span> kehrt möglicherweise
	  nicht in den Befehlsmodus zurück, was normalerweise
	  auf einen Fehler bei der Aushandlung hinweist, wobei der
	  <acronym class="acronym">ISP</acronym> wartet, dass Ihre Seite den
	  Aushandlungsprozess beginnt.  Die Option <code class="command">~p</code>
	  erzwingt in diesem Fall den Beginn des
	  Aushandlungsprozesses.</p><p>Wenn Sie nie einen Login-Prompt erhalten, müssen
	  Sie statt des im Beispiel gezeigten UNIX-Stils höchst
	  wahrscheinlich <acronym class="acronym">PAP</acronym> oder
	  <acronym class="acronym">CHAP</acronym> für die Authentifizierung
	  verwenden.  Um <acronym class="acronym">PAP</acronym> oder
	  <acronym class="acronym">CHAP</acronym> zu verwenden, ergänzen Sie
          <span class="application">PPP</span> einfach um folgende Optionen,
	  bevor Sie in den Terminalmodus wechseln:</p><pre class="screen">ppp ON example&gt; <strong class="userinput"><code>set authname myusername</code></strong></pre><p>Hierbei sollte <em class="replaceable"><code>myusername</code></em>
	  durch den Benutzernamen ersetzt werden, den Sie von Ihrem
	  <acronym class="acronym">ISP</acronym> bekommen haben.</p><pre class="screen">ppp ON example&gt; <strong class="userinput"><code>set authkey mypassword</code></strong></pre><p><em class="replaceable"><code>mypassword</code></em> sollten Sie
	  durch das Passwort ersetzen, das Ihnen Ihr <acronym class="acronym">ISP</acronym>
	  gegeben hat.</p><p>Wenn die Verbindung aufgebaut wird, Sie aber keine Rechner
	  unter ihrem Domänen-Namen erreichen können, versuchen
	  Sie, einen Rechner mit <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> und seiner
	  <acronym class="acronym">IP</acronym>-Adresse zu erreichen.  Wenn 100% der Pakete
	  verloren gehen, ist es sehr wahrscheinlich, dass Ihnen
	  keine Standardroute zugewiesen wurde.  Überprüfen Sie,
	  ob während des Verbindungsaufbaus die Option
	  <code class="option">add default HISADDR</code> gesetzt war.  Wenn Sie zu
	  einer entfernten <acronym class="acronym">IP</acronym>-Adresse eine Verbindung
	  aufbauen können, ist es möglich, dass die
	  Adresse eines Nameservers nicht in die Datei
	  <code class="filename">/etc/resolv.conf</code> eingetragen
	  wurde.  Diese Datei sollte folgendermaßen aussehen:</p><pre class="programlisting">domain <em class="replaceable"><code>example.com</code></em>
nameserver <em class="replaceable"><code>x.x.x.x</code></em>
nameserver <em class="replaceable"><code>y.y.y.y</code></em></pre><p> Dabei sollten <em class="replaceable"><code>x.x.x.x</code></em> und
          <em class="replaceable"><code>y.y.y.y</code></em> durch die
          <acronym class="acronym">IP</acronym>-Adressen der DNS-Server Ihres
	  <acronym class="acronym">ISP</acronym>s ersetzt werden.  Diese Information
	  ist Ihnen bei Vertragsabschluss mitgeteilt worden.  Wenn
	  nicht, sollte ein Anruf bei Ihrem <acronym class="acronym">ISP</acronym>
	  Abhilfe schaffen.</p><p>Mit <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a> können Sie Ihre
	  <span class="application">PPP</span>-Verbindung protokollieren.
	  Fügen Sie einfach die folgende Zeile in
	  <code class="filename">/etc/syslog.conf</code> ein:</p><pre class="programlisting">!ppp
*.*     /var/log/ppp.log</pre><p>In den meisten Fällen existiert diese
	  Funktionalität bereits.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ppp.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="ppp-and-slip.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="pppoe.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">29.3. Kernel-PPP </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 29.5. PPP over Ethernet (PPPoE)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>