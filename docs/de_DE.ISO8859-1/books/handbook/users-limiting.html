<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>14.7. Benutzer einschränken</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="users.html" title="Kapitel 14. Benutzer und grundlegende Account-Verwaltung" /><link rel="prev" href="users-modifying.html" title="14.6. Accounts verändern" /><link rel="next" href="users-groups.html" title="14.8. Gruppen" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">14.7. Benutzer einschränken</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="users-modifying.html">Zurück</a> </td><th width="60%" align="center">Kapitel 14. Benutzer und grundlegende Account-Verwaltung</th><td width="20%" align="right"> <a accesskey="n" href="users-groups.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-limiting"></a>14.7. Benutzer einschränken</h2></div></div></div><a id="idp77865808" class="indexterm"></a><a id="idp77866320" class="indexterm"></a><p>Wenn ein System von mehreren Benutzern verwendet wird, ist es
      vielleicht notwendig, den Gebrauch des Systems zu beschränken.
      FreeBSD bietet dem Systemadministrator mehrere Möglichkeiten
      die System-Ressourcen, die ein einzelner Benutzer verwenden kann,
      einzuschränken.  Diese Limitierungen sind in zwei Kategorien
      eingeteilt: Festplattenkontingente und andere
      Ressourcenbeschränkungen.</p><a id="idp77867856" class="indexterm"></a><a id="idp77868368" class="indexterm"></a><a id="idp77869520" class="indexterm"></a><p>Festplatten-Kontingente schränken den Plattenplatz, der
      einem Benutzer zur Verfügung steht, ein.  Sie bieten zudem,
      ohne aufwändige Berechnung, einen schnellen Überblick
      über den verbrauchten Plattenplatz.
      Kontingente werden in <a class="xref" href="quotas.html" title="19.15. Dateisystem-Quotas">Abschnitt 19.15, &#8222;Dateisystem-Quotas&#8220;</a> diskutiert.</p><a id="idp77870800" class="indexterm"></a><p>Die Login-Klassen werden in <code class="filename">/etc/login.conf</code>
      definiert.  Auf die präzisen Semantiken gehen wir hier nicht
      weiter ein, sie können jedoch in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>
      nachgelesen werden.  Es ist ausreichend zu sagen, dass jeder
      Benutzer einer Login-Klasse zugewiesen wird (standardmäßig
      <code class="literal">default</code>) und dass jede Login-Klasse mit einem Satz
      von Login-Fähigkeiten verbunden ist.  Eine Login-Fähigkeit
      ist ein <code class="literal">Name=Wert
      </code> Paar, in dem <em class="replaceable"><code>Name</code></em>
      die Fähigkeit bezeichnet und <em class="replaceable"><code>Wert</code></em>
      ein willkürlicher Text ist, der je nach <em class="replaceable"><code>Name
      </code></em> entsprechend verarbeitet wird.  Login-Klassen und
      -Fähigkeiten zu definieren, ist fast schon selbsterklärend
      und wird auch in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> beschrieben.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Das System verwendet die Datei
	<code class="filename">/etc/login.conf</code> normalerweise nicht direkt,
	sondern nur über die Datenbank
	<code class="filename">/etc/login.conf.db</code>, da diese eine
	schnellere Abfrage erlaubt.  Der nachstehende Befehl erzeugt die
	Datenbank <code class="filename">/etc/login.conf.db</code> aus der Datei
	<code class="filename">/etc/login.conf</code>:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cap_mkdb /etc/login.conf</code></strong></pre></div><p>Ressourcenbeschränkungen unterscheiden sich von normalen
      Login-Fähigkeiten zweifach.  Erstens gibt es für jede
      Beschränkung ein aktuelles und ein maximales Limit.  Das
      aktuelle Limit kann vom Benutzer oder einer Anwendung beliebig
      bis zum maximalen Limit verändert werden.  Letzteres kann
      der Benutzer nur heruntersetzen.  Zweitens gelten die meisten
      Ressourcenbeschränkungen für jeden vom Benutzer
      gestarteten Prozess, nicht für den Benutzer selbst.
      Beachten Sie jedoch, dass diese Unterschiede durch das spezifische
      Einlesen der Limits und nicht durch das System der
      Login-Fähigkeiten entstehen (das heißt,
      Ressourcenbeschränkungen sind <span class="emphasis"><em>keine</em></span>
      Login-Fähigkeiten).</p><p>Hier befinden sich die am häufigsten benutzten
      Ressourcenbeschränkungen (der Rest kann zusammen mit den
      anderen Login-Fähigkeiten in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> gefunden
      werden):</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">coredumpsize</code></span></dt><dd><a id="idp77894992" class="indexterm"></a><a id="idp77895504" class="indexterm"></a><p>Das Limit der Größe einer core-Datei, die
	    von einem Programm generiert wird, unterliegt aus
	    offensichtlichen Gründen anderen Limits der
	    Festplattenbenutzung (zum Beispiel <code class="literal">filesize</code>
	    oder Festplattenkontingenten).  Es wird aber trotzdem
	    oft als weniger harte Methode zur Kontrolle des
	    Festplattenplatz-Verbrauchs verwendet: Da Benutzer die
	    core-Dateien nicht selbst erstellen, und sie oft nicht
	    löschen, kann sie diese Option davor retten, dass
	    ihnen kein Festplattenspeicher mehr zur Verfügung
	    steht, sollte ein großes Programm, wie
	    <span class="application">emacs</span>, abstürzen.</p></dd><dt><span class="term"><code class="literal">cputime</code></span></dt><dd><a id="idp77899088" class="indexterm"></a><a id="idp77899600" class="indexterm"></a><p>Die maximale Rechenzeit, die ein Prozess eines Benutzers
	    verbrauchen darf.  Überschreitet der Prozess diesen Wert,
	    wird er vom Kernel beendet.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Die Rechen<span class="emphasis"><em>zeit</em></span> wird limitiert,
		nicht die prozentuale Prozessorenbenutzung, wie es in
		einigen Feldern in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> und <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> dargestellt
		wird.  Letzteres war zu der Zeit, als dies hier geschrieben
		wurde nicht möglich und würde eher nutzlos sein:
		Ein Compiler &#8211; ein wahrscheinlich legitimer
		Vorgang &#8211; kann leicht fast 100% des Prozessors in
		Anspruch nehmen.</p></div></dd><dt><span class="term"><code class="literal">filesize</code></span></dt><dd><a id="idp77905232" class="indexterm"></a><a id="idp77905744" class="indexterm"></a><p>Hiermit lässt sich die maximale Größe einer Datei
	    bestimmen, die der Benutzer besitzen darf.  Im Gegensatz zu
            <a class="link" href="quotas.html" title="19.15. Dateisystem-Quotas">Festplattenkontingenten</a> ist diese
	    Beschränkung nur für jede einzelne Datei gültig
	    und nicht für den Platz, den alle Dateien eines Benutzers
	    verwenden.</p></dd><dt><span class="term"><code class="literal">maxproc</code></span></dt><dd><a id="idp77909072" class="indexterm"></a><a id="idp77909584" class="indexterm"></a><p>Das ist die maximale Anzahl von Prozessen, die ein
	    Benutzer starten darf, und beinhaltet sowohl Vordergrund-
	    als auch Hintergrundprozesse.  Natürlich darf dieser
	    Wert nicht höher sein als das System-Limit, das in
	    <code class="varname">kern.maxproc</code> angegeben ist.  Vergessen
	    Sie auch nicht, dass ein zu kleiner Wert den Benutzer in
	    seiner Produktivität einschränken könnte;
	    es ist oft nützlich, mehrfach eingeloggt zu sein, oder
	    <span class="foreignphrase"><em class="foreignphrase">Pipelines</em></span>
	      <a href="#ftn.idp77911888" class="footnote" id="idp77911888"><sup class="footnote">[8]</sup></a>
	    zu verwenden.  Ein paar Aufgaben, wie die Kompilierung eines
	    großen Programms, starten mehrere Prozesse (zum Beispiel
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cc</span>(1)</span></a> und andere).</p></dd><dt><span class="term"><code class="literal">memorylocked</code></span></dt><dd><a id="idp77916624" class="indexterm"></a><a id="idp77917136" class="indexterm"></a><p>Dieses Limit gibt an, wie viel virtueller Speicher von einem
	    Prozess maximal im Arbeitsspeicher festgesetzt werden kann.
	    (siehe auch <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mlock&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">mlock</span>(2)</span></a>).  Ein paar systemkritische Programme,
	    wie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a>, verhindern damit einen Systemzusammenbruch, der
	    auftreten könnte, wenn sie aus dem Speicher genommen werden.
	  </p></dd><dt><span class="term"><code class="literal">memoryuse</code></span></dt><dd><a id="idp77929808" class="indexterm"></a><a id="idp77930320" class="indexterm"></a><p>Bezeichnet den maximalen Speicher, den ein Prozess benutzen
	    darf und beinhaltet sowohl Arbeitsspeicher-, als auch Swap-
	    Benutzung.  Es ist kein allübergreifendes Limit für
	    den Speicherverbrauch, aber ein guter Anfang.</p></dd><dt><span class="term"><code class="literal">openfiles</code></span></dt><dd><a id="idp77933136" class="indexterm"></a><a id="idp77933648" class="indexterm"></a><p>Mit diesem Limit lässt sich die maximale Anzahl
	    der von einem Prozess des Benutzers geöffneten Dateien
	    festlegen.  In FreeBSD werden Dateien auch verwendet, um Sockets
	    und <span class="foreignphrase"><em class="foreignphrase">IPC</em></span>-Kanäle
	    <a href="#ftn.idp77939664" class="footnote" id="idp77939664"><sup class="footnote">[9]</sup></a>
	    darzustellen.  Setzen Sie es deshalb nicht zu niedrig.  Das
	    System-Limit ist im <code class="varname">kern.maxfiles</code>
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> definiert.</p></dd><dt><span class="term"><code class="literal">sbsize</code></span></dt><dd><a id="idp77943632" class="indexterm"></a><a id="idp77944144" class="indexterm"></a><p>Dieses Limit beschränkt den Netzwerk-Speicher, und damit
	    die mbufs, die ein Benutzer verbrauchen darf.  Es stammt aus einer
	    Antwort auf einen DoS-Angriff, bei dem viele Netzwerk-Sockets
	    geöffnet wurden, kann aber generell dazu benutzt werden
	    Netzwerk-Verbindungen zu beschränken.</p></dd><dt><span class="term"><code class="literal">stacksize</code></span></dt><dd><p>Das ist die maximale Größe, auf die der Stack
	    eines Prozesses heranwachsen darf.  Das allein ist natürlich
	    nicht genug, um den Speicher zu beschränken, den ein Programm
	    verwenden darf.  Es sollte deshalb in Verbindung mit anderen
	    Limits gesetzt werden.</p></dd></dl></div><p>Beim Setzen von Ressourcenbeschränkungen sind noch andere
      Dinge zu beachten.  Nachfolgend ein paar generelle Tipps, Empfehlungen
      und verschiedene Kommentare.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Von <code class="filename">/etc/rc</code> beim Hochfahren des Systems
	  gestartete Prozesse werden der <code class="literal">daemon</code>
	  Login-Klasse zugewiesen.</p></li><li class="listitem"><p>Obwohl das mitgelieferte <code class="filename">/etc/login.conf</code>
	  eine Quelle von vernünftigen Limits darstellt, können nur
	  Sie, der Administrator, wissen, was für Ihr System angebracht
	  ist.  Ein Limit zu hoch anzusetzen könnte Ihr System für
	  Missbrauch öffnen, und ein zu niedriges Limit der
	  Produktivität einen Riegel vorschieben.</p></li><li class="listitem"><p>Benutzer des X-Window Systems (X11) sollten wahrscheinlich
	  mehr Ressourcen zugeteilt bekommen als andere Benutzer.  X11
	  beansprucht selbst schon eine Menge Ressourcen, verleitet die
	  Benutzer aber auch, mehrere Programme gleichzeitig laufen zu
	  lassen.</p></li><li class="listitem"><p>Bedenken Sie, dass viele Limits für einzelne Prozesse
	  gelten und nicht für den Benutzer selbst.  Setzt man
	  zum Beispiel <code class="varname">openfiles</code> auf 50, kann jeder
	  Prozess des Benutzers bis zu 50 Dateien öffnen.  Dadurch
	  ist die maximale Anzahl von Dateien, die von einem Benutzer
	  geöffnet werden können, <code class="literal">openfiles</code>
	  mal <code class="literal">maxproc</code>.  Das gilt auch für den
	  Speicherverbrauch.</p></li></ul></div><p>Weitere Informationen über
      Ressourcenbeschränkungen, Login-Klassen und -Fähigkeiten
      enthalten die Hilfeseiten
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cap_mkdb&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cap_mkdb</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getrlimit&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">getrlimit</span>(2)</span></a> und <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.</p><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp77911888" class="footnote"><p><a href="#idp77911888" class="para"><sup class="para">[8] </sup></a><span class="foreignphrase"><em class="foreignphrase">Pipeline</em></span> =
		  <span class="emphasis"><em>Leitung</em></span>.
		  Mit <span class="foreignphrase"><em class="foreignphrase">Pipes</em></span> sind Verbindungen
		  zwischen zwei Sockets in meistens zwei verschiedenen
		  Prozessen gemeint.</p></div><div id="ftn.idp77939664" class="footnote"><p><a href="#idp77939664" class="para"><sup class="para">[9] </sup></a><span class="foreignphrase"><em class="foreignphrase">IPC</em></span> steht für
		<span class="foreignphrase"><em class="foreignphrase">Interprocess Communication</em></span>.
		</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="users-modifying.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="users.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="users-groups.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">14.6. Accounts verändern </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 14.8. Gruppen</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>