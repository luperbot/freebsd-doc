<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>31.2. Der inetd &#8222;Super-Server&#8220;</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="network-servers.html" title="Kapitel 31. Netzwerkserver" /><link rel="prev" href="network-servers.html" title="Kapitel 31. Netzwerkserver" /><link rel="next" href="network-nfs.html" title="31.3. NFS &#8211; Network File System" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">31.2. Der <span class="application">inetd</span>
      <span class="quote">&#8222;<span class="quote">Super-Server</span>&#8220;</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-servers.html">Zurück</a> </td><th width="60%" align="center">Kapitel 31. Netzwerkserver</th><td width="20%" align="right"> <a accesskey="n" href="network-nfs.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-inetd"></a>31.2. Der <span class="application">inetd</span>
      <span class="quote">&#8222;<span class="quote">Super-Server</span>&#8220;</span></h2></div><div><span class="authorgroup">Beigetragen von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div><div><span class="authorgroup">Aktualisiert vom <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="othername">FreeBSD Documentation Project</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-overview"></a>31.2.1. Überblick</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> wird manchmal auch als <span class="quote">&#8222;<span class="quote">Internet
        Super-Server</span>&#8220;</span> bezeichnet, weil er Verbindungen für
        mehrere Dienste verwaltet.  Wenn eine Verbindung eintrifft,
        bestimmt <span class="application">inetd</span>, welches Programm
        für die eingetroffene Verbindung zuständig ist,
        aktiviert den entsprechenden Prozess und reicht den Socket an
        ihn weiter (der Socket dient dabei als Standardein- und -ausgabe
        sowie zur Fehlerbehandlung).  Der Einsatz des
        <span class="application">inetd</span>-Daemons an Stelle
        viele einzelner Daemonen kann auf nicht komplett ausgelasteten
        Servern zu einer Verringerung der Systemlast führen.</p><p><span class="application">inetd</span> wird vor allem dazu
        verwendet, andere Daemonen zu aktivieren, einige Protokolle
        werden aber auch direkt verwaltet.  Dazu gehören
        <span class="application">chargen</span>,
        <span class="application">auth</span>, sowie
        <span class="application">daytime</span>.</p><p>Dieser Abschnitt beschreibt die Konfiguration von
        <span class="application">inetd</span> durch Kommandozeilenoptionen
        sowie die Konfigurationsdatei
        <code class="filename">/etc/inetd.conf</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-settings"></a>31.2.2. Einstellungen</h3></div></div></div><p><span class="application">inetd</span> wird durch das
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a>-System initialisiert.  Die Option
        <code class="literal">inetd_enable</code> ist in der Voreinstellung zwar
        auf <code class="literal">NO</code> gesetzt, sie kann aber in
        Abhängigkeit von der vom Benutzer bei der Installation
        gewählten Konfiguration von
        <span class="application">sysinstall</span> aktiviert werden.
        Die Verwendung von</p><pre class="programlisting">inetd_enable="YES"</pre><p>oder</p><pre class="programlisting">inetd_enable="NO"</pre><p>in <code class="filename">/etc/rc.conf</code> deaktiviert oder startet
        <span class="application">inetd</span> beim Systemstart.  Über
        den Befehl</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service inetd rcvar</code></strong></pre><p>können Sie die aktuelle Konfiguration
	abfragen.</p><p>Weitere Optionen können über die Option
        <code class="literal">inetd_flags</code> an
        <span class="application">inetd</span> übergeben werden.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-cmdline"></a>31.2.3. Kommandozeilenoptionen</h3></div></div></div><p>Wie die meisten anderen Server-Daemonen lässt
        sich auch <span class="application">inetd</span> über
        verschiedene Optionen steuern.  Eine vollständige Liste
        dieser Optionen finden Sie in der Manualpage von
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>.</p><p>Die verschiedenen Optionen können über die Option
        <code class="literal">inetd_flags</code> der Datei
        <code class="filename">/etc/rc.conf</code> an
        <span class="application">inetd</span> übergeben werden.  In
        der Voreinstellung hat diese Option den Wert
        <code class="literal">-wW -C 60</code>.  Durch das Setzen dieser Werte
        wird das TCP-Wrapping für alle
        <span class="application">inetd</span>-Dienste aktiviert.
        Zusätzlich kann eine einzelne IP-Adresse jeden Dienst
        nur maximal 60 Mal pro Minute anfordern.</p><p>Für Einsteiger ist es erfreulich, dass diese Parameter
        in der Regel nicht angepasst werden müssen.  Da diese
        Parameter aber dennoch von Interesse sein können
        (beispielsweise, wenn Sie eine enorme Anzahl von
        Verbindungsanfragen erhalten), werden einige dieser
        einschränkenden Parameter im Folgenden näher
        erläutert.  Eine vollständige Auflistung aller
        Optionen finden Sie hingegen in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">-c maximum</span></dt><dd><p>Legt die maximale Anzahl von parallen Aufrufen eines
              Dienstes fest; in der Voreinstellung gibt es keine
              Einschränkung.  Diese Einstellung kann für jeden
              Dienst durch Setzen des <code class="option">max-child</code>
              -Parameters festgelegt werden.</p></dd><dt><span class="term">-C rate</span></dt><dd><p>Legt fest, wie oft ein Dienst von einer einzelnen
              IP-Adresse in einer Minute aufgerufen werden kann; in der
              Voreinstellung gibt es keine Einschränkung.  Dieser
              Wert kann für jeden Dienst durch Setzen des
              Parameters
              <code class="option">max-connections-per-ip-per-minute</code>
              festgelegt werden.</p></dd><dt><span class="term">-R rate</span></dt><dd><p>Legt fest, wie oft ein Dienst in der Minute aktiviert
              werden kann; in der Voreinstellung sind dies 256
              Aktivierungen pro Minute.  Ein Wert von 0 erlaubt
              unbegrenzt viele Aktivierungen.</p></dd><dt><span class="term">-s maximum</span></dt><dd><p>Legt fest, wie oft ein Dienst in der Minute von einer
              einzelnen IP-Adresse aus aktiviert werden kann; in der
              Voreinstellung gibt es hier keine Beschränkung.  Diese
              Einstellung kann für jeden Dienst durch die Angabe
              <code class="option">max-child-per-ip</code> angepasst werden.</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-conf"></a>31.2.4. <code class="filename">inetd.conf</code></h3></div></div></div><p>Die Konfiguration von <span class="application">inetd</span>
        erfolgt über die Datei
        <code class="filename">/etc/inetd.conf</code>.</p><p>Wenn <code class="filename">/etc/inetd.conf</code> geändert
        wird, kann <span class="application">inetd</span> veranlasst werden,
        seine Konfigurationsdatei neu einzulesen.</p><div class="example"><a id="network-inetd-reread"></a><div class="example-title">Beispiel 31.1. Die <span class="application">inetd</span>-Konfiguration neu
          einlesen</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service inetd reload</code></strong></pre></div></div><br class="example-break" /><p>Jede Zeile der Konfigurationsdatei beschreibt jeweils einen
        Daemon.  Kommentare beginnen mit einem <span class="quote">&#8222;<span class="quote">#</span>&#8220;</span>.  Ein
        Eintrag der Datei <code class="filename">/etc/inetd.conf</code> hat
        folgenden Aufbau:</p><pre class="programlisting">service-name
socket-type
protocol
{wait|nowait}[/max-child[/max-connections-per-ip-per-minute[/max-child-per-ip]]]
user[:group][/login-class]
server-program
server-program-arguments</pre><p>Ein Eintrag für den IPv4 verwendenden
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ftpd</span>(8)</span></a>-Daemon könnte so aussehen:</p><pre class="programlisting">ftp     stream  tcp     nowait  root    /usr/libexec/ftpd       ftpd -l</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">service-name</span></dt><dd><p>Der Dienstname eines bestimmten Daemons.  Er muss
              einem in <code class="filename">/etc/services</code> aufgelisteten
              Dienst entsprechen.  In dieser Datei wird festgelegt,
              welchen Port <span class="application">inetd</span> abhören
              muss.  Wenn ein neuer Dienst erzeugt wird, muss er zuerst
              in die Datei <code class="filename">/etc/services</code>
              eingetragen werden.</p></dd><dt><span class="term">socket-type</span></dt><dd><p>Entweder <code class="literal">stream</code>,
              <code class="literal">dgram</code>, <code class="literal">raw</code>, oder
              <code class="literal">seqpacket</code>.  <code class="literal">stream</code>
              muss für verbindungsorientierte TCP-Daemonen
              verwendet werden, während <code class="literal">dgram</code>
              das <acronym class="acronym">UDP</acronym>-Protokoll verwaltet.</p></dd><dt><span class="term">protocol</span></dt><dd><p>Eines der folgenden:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Protokoll</th><th>Bedeutung</th></tr></thead><tbody><tr><td>tcp, tcp4</td><td>TCP (IPv4)</td></tr><tr><td>udp, udp4</td><td>UDP (IPv4)</td></tr><tr><td>tcp6</td><td>TCP (IPv6)</td></tr><tr><td>udp6</td><td>UDP (IPv6)</td></tr><tr><td>tcp46</td><td>TCP sowohl unter IPv4 als auch unter IPv6</td></tr><tr><td>udp46</td><td>UDP sowohl unter IPv4 als auch unter IPv6</td></tr></tbody></table></div></dd><dt><span class="term">{wait|nowait}[/max-child[/max-connections-per-ip-per-minute[/max-child-per-ip]]]</span></dt><dd><p><code class="option">wait|nowait</code> gibt an, ob der von
              <span class="application">inetd</span> aktivierte Daemon seinen
              eigenen Socket verwalten kann oder nicht.
              <code class="option">dgram</code>-Sockets müssen die Option
              <code class="option">wait</code> verwenden, während Daemonen mit
              Stream-Sockets, die normalerweise auch aus mehreren
              Threads bestehen, die Option <code class="option">nowait</code>
              verwenden sollten.  Die Option <code class="option">wait</code>
              gibt in der Regel mehrere Sockets an einen einzelnen
              Daemon weiter, während <code class="option">nowait</code>
              für jeden neuen Socket einen Childdaemon erzeugt.</p><p>Die maximale Anzahl an Child-Daemonen, die
              <span class="application">inetd</span> erzeugen kann, wird durch
              die Option <code class="option">max-child</code> festgelegt.  Wenn
              ein bestimmter Daemon 10 Instanzen benötigt, sollte
              der Wert <code class="literal">/10</code> hinter die Option
              <code class="option">nowait</code> gesetzt werden.  Geben Sie
              hingegen den Wert <code class="literal">/0</code> an, gibt es
              keine Beschränkung.</p><p>Zusätzlich zu <code class="option">max-child</code> kann
              die maximale Anzahl von Verbindungen eines Rechners mit
              einem bestimmten Daemon durch zwei weitere Optionen
              beschränkt werden.  Die Option
              <code class="option">max-connections-per-ip-per-minute</code>
              legt die maximale Anzahl von Verbindungsversuchen fest,
              die von einer bestimmten IP-Adresse aus unternommen werden
              können.  Ein Wert von zehn würde die maximale
              Anzahl von Verbindungsversuchen einer IP-Adresse mit einem
              bestimmten Dienst auf zehn Versuche in der Minute
              beschränken.  Durch die Angabe der Option
              <code class="option">max-child-per-ip</code> können Sie hingegen
              festlegen, wie viele Child-Daemonen von einer bestimmten
              IP-Adresse aus gestartet werden können.  Durch diese
              Optionen lassen sich ein absichtlicher oder unabsichtlicher
              Ressourcenverbrauch sowie die Auswirkungen eines
              <code class="literal">Denial of Service (DoS)</code>-Angriffs auf
              einen Rechner begrenzen.</p><p>Sie müssen hier entweder <code class="option">wait</code>
              oder <code class="option">nowait</code> angeben.  Die Angabe von
              <code class="option">max-child</code>,
              <code class="option">max-connections-per-ip-per-minute</code> und
              <code class="option">max-child-per-ip</code> ist hingegen
              optional.</p><p>Ein multithread-Daemon vom Streamtyp ohne die Optionen
              <code class="option">max-child</code>,
              <code class="option">max-connections-per-ip-per-minute</code> oder
              <code class="option">max-child-per-ip</code> sieht so aus:
              <code class="literal">nowait</code></p><p>Der gleiche Daemon mit einer maximal möglichen
              Anzahl von 10 parallelen Daemonen würde so aussehen:
              <code class="literal">nowait/10</code></p><p>Wird zusätzlich die Anzahl der möglichen
              Verbindungen pro Minute für jede IP-Adresse auf
              20 sowie die mögliche Gesamtzahl von Childdaemonen
              auf 10 begrenzt, so sieht der Eintrag so aus:
              <code class="literal">nowait/10/20</code></p><p>All diese Optionen werden vom
              <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fingerd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fingerd</span>(8)</span></a>-Daemon bereits in der Voreinstellung
              verwendet:</p><pre class="programlisting">finger stream  tcp     nowait/3/10 nobody /usr/libexec/fingerd fingerd -s</pre><p>Will man die maximale Anzahl von Child-Daemonen auf
              100 beschränken, wobei von jeder IP-Adresse aus
              maximal 5 Child-Daemonen gestartet werden dürfen,
              verwendet man den folgenden Eintrag:
              <code class="literal">nowait/100/0/5</code>.</p></dd><dt><span class="term">user</span></dt><dd><p>Der Benutzername, unter dem der jeweilige Daemon
              laufen soll.  Meistens laufen Daemonen als User
              <code class="systemitem">root</code>.  Aus Sicherheitsgründen
              laufen einige Server aber auch als User
              <code class="systemitem">daemon</code>, oder als am wenigsten
              privilegierter User <code class="systemitem">nobody</code>.</p></dd><dt><span class="term">server-program</span></dt><dd><p>Der vollständige Pfad des Daemons, der eine
              Verbindung entgegennimmt.  Wird der Daemon von
              <span class="application">inetd</span> intern bereitgestellt,
              sollte die Option <code class="option">internal</code> verwendet
              werden.</p></dd><dt><span class="term">server-program-arguments</span></dt><dd><p>Dieser Eintrag legt (gemeinsam mit
              <code class="option">server-program</code> und beginnend mit
              <code class="literal">argv[0]</code>), die Argumente fest, die bei
              der Aktivierung an den Daemon übergeben werden.
              Wenn die Anweisung auf der Kommandozeile also
              <code class="command">mydaemon -d</code> lautet, wäre
              <code class="literal">mydaemon -d</code> auch der Wert der Option
              <code class="option">server program arguments</code>.  Wenn es sich
              beim Daemon um einen internen Dienst handelt, sollte
              wiederum die Option <code class="option">internal</code> verwendet
              werden.</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-security"></a>31.2.5. Sicherheit</h3></div></div></div><p>Abhängig von der bei der Installation festgelegten
        Konfiguration werden viele der von
        <span class="application">inetd</span> verwalteten Dienste automatisch
        aktiviert!  Wenn Sie einen bestimmten Daemon nicht
        benötigen, sollten Sie ihn deaktivieren!  Dazu kommentieren
        Sie den jeweiligen Daemon in <code class="filename">/etc/inetd.conf</code>
        mit einem <span class="quote">&#8222;<span class="quote">#</span>&#8220;</span> aus, um danach die
        <a class="link" href="network-inetd.html#network-inetd-reread" title="Beispiel 31.1. Die inetd-Konfiguration neu einlesen">inetd-Konfiguration neu
        einzulesen</a>.  Einige Daemonen, zum Beispiel
        <span class="application">fingerd</span>, sollten generell deaktiviert
        werden, da sie zu viele Informationen an einen potentiellen
        Angreifer liefern.</p><p>Einige Daemonen haben unsichere Einstellungen, etwa
        große oder nichtexistierende Timeouts für
        Verbindungsversuche, die es einem Angreifer erlauben, über
        lange Zeit langsam Verbindungen zu einem bestimmten Daemon
        aufzubauen, um dessen verfügbare Ressourcen zu verbrauchen.
        Es ist daher eine gute Idee, diese Daemonen durch die Optionen
        <code class="option">max-connections-per-ip-per-minute</code>,
        <code class="option">max-child</code> sowie
        <code class="option">max-child-per-ip</code> zu beschränken, wenn
        Sie sehr viele Verbindungsversuche mit Ihrem System
        registrieren.</p><p>TCP-Wrapping ist in der Voreinstellung aktiviert.  Lesen Sie
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts_access&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts_access</span>(5)</span></a>, wenn Sie weitere Informationen zum
        Setzen von TCP-Beschränkungen für verschiedene von
        <span class="application">inetd</span> aktivierte Daemonen
        benötigen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-misc"></a>31.2.6. Verschiedenes</h3></div></div></div><p>Bei <span class="application">daytime</span>,
        <span class="application">time</span>,
        <span class="application">echo</span>,
        <span class="application">discard</span>,
        <span class="application">chargen</span>, und
        <span class="application">auth</span> handelt es sich um intern
        von <span class="application">inetd</span> bereitgestellte Dienste.
      </p><p>Der <span class="application">auth</span>-Dienst bietet
        Identifizierungsdienste über das Netzwerk
        an und ist bis zu einem bestimmten Grad konfigurierbar,
        während die meisten anderen Dienste nur aktiviert
        oder deaktiviert werden können.</p><p>Eine ausführliche Beschreibung finden Sie in
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-servers.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="network-nfs.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">Kapitel 31. Netzwerkserver </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 31.3. NFS &#8211; Network File System</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>