<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>15.11. Zugriffskontrolllisten für Dateisysteme</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Das FreeBSD-Handbuch" /><link rel="up" href="security.html" title="Kapitel 15. Sicherheit" /><link rel="prev" href="openssh.html" title="15.10. OpenSSH" /><link rel="next" href="security-portaudit.html" title="15.12. Sicherheitsprobleme in Software Dritter überwachen" /><link rel="copyright" href="legalnotice.html" title="Rechtlicher Hinweis" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">15.11. Zugriffskontrolllisten für Dateisysteme</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="openssh.html">Zurück</a> </td><th width="60%" align="center">Kapitel 15. Sicherheit</th><td width="20%" align="right"> <a accesskey="n" href="security-portaudit.html">Weiter</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="fs-acl"></a>15.11. Zugriffskontrolllisten für Dateisysteme</h2></div><div><span class="authorgroup">Beigetragen von <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp79167184" class="indexterm"></a><p>Zusammen mit anderen Verbesserungen des Dateisystems wie
      Schnappschüsse bietet FreeBSD auch
      <em class="firstterm">Zugriffskontrolllisten</em> (<span class="foreignphrase"><em class="foreignphrase">access
        control list</em></span>, <acronym class="acronym">ACL</acronym>).</p><p>Zugriffskontrolllisten erweitern die normalen Zugriffsrechte
      von <span class="trademark">UNIX</span>® Systemen auf eine kompatible (<span class="trademark">POSIX</span>®.1e) Weise
      und bieten feiner granulierte Sicherheitsmechanismen.</p><p>Zugriffskontrolllisten für Dateisysteme werden mit der
      nachstehenden Zeile in der Kernelkonfiguration aktiviert:</p><pre class="programlisting">options UFS_ACL</pre><p>Diese Option ist in der <code class="filename">GENERIC</code>-Konfiguration
      aktiviert.  Das System gibt eine Warnung aus, wenn ein Dateisystem mit
      <acronym class="acronym">ACL</acronym>s eingehangen werden soll und die
      Unterstützung für <acronym class="acronym">ACL</acronym>s nicht im Kernel
      aktiviert ist.  Das Dateisystem muss weiterhin erweiterte Attribute
      zur Verfügung stellen, damit <acronym class="acronym">ACL</acronym>s verwendet
      werden können.  Das neue <acronym class="acronym">UNIX</acronym>-Dateisystem
      <acronym class="acronym">UFS2</acronym> stellt diese Attribute
      standardmäßig zur Verfügung.</p><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Die Konfiguration erweiterter Attribute auf
      <acronym class="acronym">UFS1</acronym> ist mit einem höheren Aufwand als die
      Konfiguration erweiterter Attribute auf <acronym class="acronym">UFS2</acronym>
      verbunden.  Zudem ist <acronym class="acronym">UFS2</acronym> mit erweiterten
      Attributen leistungsfähiger als <acronym class="acronym">UFS1</acronym>.
      Zugriffskontrolllisten sollten daher mit <acronym class="acronym">UFS2</acronym>
      verwendet werden.</p></div><p>Die Angabe der Option <code class="option">acl</code> in
      <code class="filename">/etc/fstab</code> aktiviert Zugriffskontrolllisten
      für ein Dateisystem.  Die bevorzugte Möglichkeit ist
      die Verwendung von Zugriffskontrolllisten mit <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a> (Option
      <code class="option">-a</code>), im Superblock des Dateisystems festzuschreiben.
      Diese Möglichkeit hat mehrere Vorteile:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Nochmaliges Einhängen eines Dateisystems (Option
	  <code class="option">-u</code> von <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>) verändert den Status
	  der Zugriffskontrolllisten nicht.  Die Verwendung von
	  Zugriffskontrolllisten kann nur durch Abhängen und erneutes
	  Einhängen eines Dateisystems verändert werden.  Das
	  heißt auch, dass Zugriffskontrolllisten nicht
	  nachträglich auf dem Root-Dateisystem aktiviert werden
	  können.</p></li><li class="listitem"><p>Die Zugriffskontrolllisten auf den Dateisystemen sind,
	  unabhängig von den Option in <code class="filename">/etc/fstab</code>
	  oder Namensänderungen der Geräte, immer aktiv.  Dies
	  verhindert auch, dass Zugriffskontrolllisten aus Versehen
	  auf Dateisystem ohne Zugriffskontrolllisten aktiviert werden und
	  durch falsche Zugriffsrechte Sicherheitsprobleme entstehen.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Anmerkung: </h3><p xmlns="http://www.w3.org/1999/xhtml">Es kann sein, dass sich der Status von Zugriffskontrolllisten
        später durch nochmaliges Einhängen des Dateisystems
	(Option <code class="option">-u</code> von <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>) ändern
	lässt.  Die momentane Variante ist aber sicherer, da der
	Status der Zugriffskontrolllisten nicht versehentlich geändert
	werden kann.  Allgemein sollten Zugriffskontrolllisten auf einem
	Dateisystem, auf dem sie einmal verwendet wurden, nicht deaktiviert
	werden, da danach die Zugriffsrechte falsch sein können.
	Werden Zugriffskontrolllisten auf einem solchen Dateisystem wieder
	aktiviert, werden die Zugriffsrechte von Dateien, die sich
	zwischenzeitlich geändert haben, überschrieben, was zu
	erneuten Problemen führt.</p></div><p>Die Zugriffsrechte einer Datei werden durch ein
      <code class="literal">+</code> (Plus) gekennzeichnet, wenn die Datei durch
      Zugriffskontrolllisten geschützt ist:</p><pre class="programlisting">drwx------  2 robert  robert  512 Dec 27 11:54 private
drwxrwx---+ 2 robert  robert  512 Dec 23 10:57 directory1
drwxrwx---+ 2 robert  robert  512 Dec 22 10:20 directory2
drwxrwx---+ 2 robert  robert  512 Dec 27 11:57 directory3
drwxr-xr-x  2 robert  robert  512 Nov 10 11:54 public_html</pre><p>Die Verzeichnisse <code class="filename">directory1</code>,
      <code class="filename">directory2</code> und
      <code class="filename">directory3</code>
      sind durch Zugriffskontrolllisten geschützt, das Verzeichnis
      <code class="filename">public_html</code> nicht.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79188176"></a>15.11.1. Zugriffskontrolllisten benutzen</h3></div></div></div><p>Das Werkzeug <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getfacl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">getfacl</span>(1)</span></a> zeigt Zugriffskontrolllisten
	an.  Das folgende Kommando zeigt die <acronym class="acronym">ACL</acronym>s
	auf der Datei <code class="filename">test</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>getfacl test</code></strong>
	#file:test
	#owner:1001
	#group:1001
	user::rw-
	group::r--
	other::r--</pre><p>Das Werkzeug <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setfacl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">setfacl</span>(1)</span></a> ändert oder entfernt
        <acronym class="acronym">ACL</acronym>s auf Dateien.  Zum Beispiel:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setfacl -k test</code></strong></pre><p>Die Option <code class="option">-k</code> entfernt alle
	<acronym class="acronym">ACL</acronym>s einer Datei oder eines Dateisystems.
	Besser wäre es, die Option <code class="option">-b</code>
	zu verwenden, da sie die erforderlichen Felder
	beibehält.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setfacl -m u:trhodes:rwx,g:web:r--,o::--- test</code></strong></pre><p>Mit dem vorstehenden Kommando werden die eben
	entfernten Zugriffskontrolllisten wiederhergestellt.
	Der Befehl gibt die Fehlermeldung
	<span class="errorname">Invalid argument</span> aus,
	
	wenn Sie nicht existierende Benutzer oder Gruppen
	als Parameter angeben.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="openssh.html">Zurück</a> </td><td width="20%" align="center"><a accesskey="u" href="security.html">Nach oben</a></td><td width="40%" align="right"> <a accesskey="n" href="security-portaudit.html">Weiter</a></td></tr><tr><td width="40%" align="left" valign="top">15.10. OpenSSH </td><td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td><td width="40%" align="right" valign="top"> 15.12. Sicherheitsprobleme in Software Dritter überwachen</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Wenn Sie Fragen zu FreeBSD haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;.<br></br>
    Wenn Sie Fragen zu dieser Dokumentation haben, schicken Sie eine E-Mail an
    &lt;<a href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p></body></html>