<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>7. Dicas</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Construa Seu Próprio Servidor de Atualização do FreeBSD" /><link rel="up" href="index.html" title="Construa Seu Próprio Servidor de Atualização do FreeBSD" /><link rel="prev" href="patch.html" title="6. Compilando um patch" /><link rel="copyright" href="trademarks.html" title="Nota Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7. Dicas</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="patch.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> </td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="tips"></a>7. Dicas</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Se uma versão personalizada tiver sido compilada usando
	  o <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/releng/release-build.html" target="_top">procedimento</a>
	  nativo do <code class="command">make release</code>, o código do
	  <span class="application">freebsd-update-server</span> irá
	  funcionar a partir da sua versão.  Por exemplo, uma versão
	  sem o ports ou sem a documentação pode ser compilada 
	  limpando-se as funcionalidades pertencentes às sub-rotinas 
	  de documentação <code class="function">findextradocs()</code>,
	  <code class="function">addextradocs()</code> e alterando o local de
	  download na <code class="function">fetchiso()</code>,
	  respectivamente, no <code class="filename">scripts/build.subr</code>.
	  Em um último passo, mude o hash <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sha256&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sha256</span>(1)</span></a> em
	  <code class="filename">build.conf</code> na sua respectiva versão e
	  arquitetura e então você está pronto para compilar sua
	  versão personalizada.</p><pre class="screen"># Compare ${WORKDIR}/release and ${WORKDIR}/$1, identify which parts
# of the world|doc subcomponent are missing from the latter, and
# build a tarball out of them.
findextradocs () {
}

# Add extra docs to ${WORKDIR}/$1
addextradocs () {
}
</pre></li><li class="listitem"><p>Adicionando a opção <code class="option">-j
	  <em class="replaceable"><code>NÚMERO</code></em></code> nas etapas
	  <code class="buildtarget">buildworld</code> e
	  <code class="buildtarget">obj</code> no script
	  <code class="filename">scripts/build.subr</code> pode acelerar o
	  processo dependendo do hardware usado, entretanto isto não é
	  necessário.  Usar esta opção em outras etapas não é
	  recomendado, pois pode fazer a compilação ficar
	  instável.</p><pre class="screen">#Build the world
log "Building world"
cd /usr/src &amp;&amp;
make -j 2 ${COMPATFLAGS} buildworld 2&gt;&amp;1

# Distribute the world
log "Distributing world"
cd /usr/src/release &amp;&amp;
make -j 2 obj &amp;&amp;
  make ${COMPATFLAGS} release.1 release.2 2&gt;&amp;1</pre></li><li class="listitem"><p>Crie uma entrada SRV apropriada no <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/network-dns.html" target="_top">DNS</a>
	  para o servidor de atualização, e coloque outros servidores
	  com pesos variados.  Usar este recurso irá permitir que você
	  distribua a carga do processo de atualização entre vários
	  servidores, entretanto esta dica não será necessária a menos
	  que você deseje prover um serviço redundante.</p><pre class="screen"> 
	_http._tcp.update.myserver.com.                  IN SRV   0 2 80   host1.myserver.com.
							    SRV   0 1 80   host2.myserver.com.
							    SRV   0 0 80   host3.myserver.com.</pre></li></ul></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="patch.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> </td></tr><tr><td width="40%" align="left" valign="top">6. Compilando um patch </td><td width="20%" align="center"><a accesskey="h" href="index.html">Principal</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Este, e outros documentos, podem ser obtidos em
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Para perguntas sobre FreeBSD, leia a
    <a href="http://www.FreeBSD.org/docs.html">documentação</a> antes de contatar
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Para perguntas sobre esta documentação, envie e-mail para
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>