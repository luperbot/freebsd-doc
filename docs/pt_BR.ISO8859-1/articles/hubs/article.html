<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Espelhando o FreeBSD</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="description" content="Este artigo aborda a configuração de um site espelho destinado à distribuição do FreeBSD e tem como público alvo os administradores destes sites. Este é um trabalho em andamento." /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div xml:lang="pt_br" class="article" lang="pt_br"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp60370256"></a>Espelhando o FreeBSD</h1></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Jun</span> <span class="surname">Kuriyama</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a xmlns="" class="email" href="mailto:kuriyama@FreeBSD.org">kuriyama@FreeBSD.org</a>&gt;</code></p></div></div></div><div class="author"><h3 class="author"><span class="firstname">Valentino</span> <span class="surname">Vaschetto</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a xmlns="" class="email" href="mailto:logo@FreeBSD.org">logo@FreeBSD.org</a>&gt;</code></p></div></div></div><div class="author"><h3 class="author"><span class="firstname">Daniel</span> <span class="surname">Lang</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a xmlns="" class="email" href="mailto:dl@leo.org">dl@leo.org</a>&gt;</code></p></div></div></div><div class="author"><h3 class="author"><span class="firstname">Ken</span> <span class="surname">Smith</span></h3><div class="affiliation"><div class="address"><p><code class="email">&lt;<a xmlns="" class="email" href="mailto:kensmith@FreeBSD.org">kensmith@FreeBSD.org</a>&gt;</code></p></div></div></div></div></div><div>Revisão: <a href="https://svnweb.freebsd.org/changeset/doc/"><span class="svnref"></span></a></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="trademarks"></a><p>FreeBSD is a registered trademark of
  the FreeBSD Foundation.</p><p>CVSup is a registered trademark of
  John D. Polstra.</p><p>Many of the designations used by
  manufacturers and sellers to distinguish their products are claimed
  as trademarks.  Where those designations appear in this document,
  and the FreeBSD Project was aware of the trademark claim, the
  designations have been followed by the <span class="quote">&#8220;<span class="quote">&#8482;</span>&#8221;</span> or the
  <span class="quote">&#8220;<span class="quote">®</span>&#8221;</span> symbol.</p></div></div><div>   por .</div><div><div xmlns="http://www.w3.org/1999/xhtml" class="abstract"><div class="abstract-title">Resumo</div><p>Este artigo aborda a configuração de um site espelho 
	destinado à distribuição do FreeBSD e tem como público alvo 
	os administradores destes sites.  Este é um trabalho em 
	andamento.</p></div></div></div><div class="docformatnavi">
      [
      <a href="index.html">Documento HTML em partes</a>
      /
      
	  Documento HTML completo
	
      ]
    </div><hr /></div><div class="toc"><div class="toc-title">Índice</div><dl class="toc"><dt><span class="sect1"><a href="#mirror-contact">1. Informações de Contato</a></span></dt><dt><span class="sect1"><a href="#mirror-requirements">2. Requisitos para espelhar o FreeBSD</a></span></dt><dt><span class="sect1"><a href="#mirror-howto">3. Como espelhar o FreeBSD</a></span></dt><dt><span class="sect1"><a href="#mirror-where">4. De onde espelhar</a></span></dt><dt><span class="sect1"><a href="#mirror-official">5. Sites Espelhos Oficiais</a></span></dt><dt><span class="sect1"><a href="#mirror-statpages">6. Algumas estatísticas dos sites espelhos</a></span></dt></dl></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Neste momento nós não estamos aceitando 
      novos sites espelho.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-contact"></a>1. Informações de Contato</h2></div></div></div><p>Os coordenadores do sistema de sites espelho podem ser
      contatados por email no endereço
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:mirror-admin@FreeBSD.org">mirror-admin@FreeBSD.org</a>&gt;</code>.  Também existe a
      <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">lista de discussão
  sobre sites espelhos do FreeBSD</a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-requirements"></a>2. Requisitos para espelhar o FreeBSD</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-diskspace"></a>2.1. Espaço em disco</h3></div></div></div><p>Espaço em disco é um dos requisitos mais
	importantes.  Dependendo do conjunto de releases, de
	arquiteturas e do grau de cobertura que você deseja que
	seu site espelho tenha, uma enorme quantia de espaço em
	disco pode ser consumida.  Também tenha em mente que os sites
	<span class="emphasis"><em>oficiais</em></span> provavelmente precisam estar
	completos.  O repositório CVS e as páginas web devem
	ser sempre espelhados de forma completa.  Também
	observe que os números mencionados neste artigo estão
	refletindo o estado atual
	(9.3-RELEASE/10.1-RELEASE).
	Desenvolvimentos futuros e novas releases apenas irão
	aumentar o espaço requerido.  Certifique-se de manter
	algum espaço extra (entre 10 e 20%) disponível, em
	relação as estimativas abaixo, apenas por
	segurança.  Aqui estão algumas estimativas
	aproximadas:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Distribuição FTP completa: 1.0 TB</p></li><li class="listitem"><p>Repositório CVS: 5.4 GB</p></li><li class="listitem"><p>Deltas CTM: 3.2 GB</p></li><li class="listitem"><p>Páginas Web: 463 MB</p></li></ul></div><p>O uso atual de espaço em disco pela
	distribuição FTP pode ser encontrada em 
	<a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/dir.sizes" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/dir.sizes</a>.
      </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-bandwidth"></a>2.2. Conectividade de rede e largura de banda</h3></div></div></div><p>É claro que você precisa estar conectado à 
	Internet.  A largura de banda que será 
	necessária dependerá do uso previsto para o seu 
	site espelho.  Se você só quer espelhar algumas 
	partes do FreeBSD para uso local no seu Site/Intranet, a 
	demanda pode ser muito menor do que se você quiser 
	tornar os arquivos disponíveis publicamente.  Se 
	você pretende se tornar um site espelho oficial, a 
	largura de banda necessária será ainda maior.  
	Desta forma, nós só podemos dar estimativas 
	grosseiras em relação a este item:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Site local, sem acesso público: basicamente
	     nenhum, mas um link menor que 2 Mbps pode tornar o 
	     processo de sincronismo muito lento.</p></li><li class="listitem"><p>Site público não oficial: um link de 
	     34 Mbps é provavelmente um bom ponto de
	     partida.</p></li><li class="listitem"><p>Site oficial: recomenda-se um link de no 
	     mínimo 100 Mbps, e o seu servidor deverá 
	     estar conectado o mais próximo possível 
	     do seu roteador de borda.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-system"></a>2.3. Requisitos de sistema, CPU e Memória RAM</h3></div></div></div><p>O dimensionamento destes itens depende do número
	esperado de clientes simultâneos, o que é
	determinado pela política de uso do servidor.  Estes
	requisitos também são afetados pelo tipo de
	serviço que você deseja oferecer.
	Serviços básicos de FTP ou HTTP podem não
	necessitar de uma grande quantidade de recursos.  Mas fique
	atento se você for disponibilizar os serviços de
	CVSup, rsync ou mesmo de AnonCVS.  Estes serviços podem
	ter um enorme impacto nos requisitos de CPU e de
	memória.  Especialmente o rsync, o qual é
	considerado um devorador de memória, e o CVSup
	certamente consome um pouco da CPU.  No caso do AnonCVS pode
	ser interessante configurar um sistemas de arquivos residente
	em memória (MFS) de no mínimo 300 MB, desta
	forma você precisa considerar este consumo quando
	avaliar a quantidade de memória requerida.  A seguir você
	irá encontrar alguns exemplos, os quais visam apenas
	lhe dar uma idéia por alto das necessidades.</p><p>Para um site de visitação moderada o qual
	ofereça o serviço de
	<span class="application">Rsync</span>, você pode considerar
	uma CPU entre 800 MHz e 1 GHz, e pelo menos 512 MB de
	memória RAM.  Esta é provavelmente a
	configuração mínima para um site espelho
	<span class="emphasis"><em>oficial</em></span>.</p><p>Para um site de visitação frequente, 
	você definitivamente vai precisar de mais memória
	RAM (considere 2 GB como um bom ponto de partida) e 
	possivelmente de mais poder de processamento (CPU), o que 
	pode significar que você precisará ir para um 
	sistema multiprocessado (SMP).</p><p>Você também pode considerar o uso de um
	subsistema de discos rápidos.  As
	operações em um repositório CVS
	necessitam de um subsistema de discos rápido (o uso de
	RAID é altamente desejável).  Uma controladora
	SCSI que possua cache dedicado também pode melhorar a
	velocidade uma vez que a maioria destes serviços
	incorre na realização de um grande número
	de pequenas modificações no disco.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-services"></a>2.4. Serviços para oferecer</h3></div></div></div><p>Todo site espelho é obrigado a disponibilizar um
	conjunto de serviços básicos.  Em
	adição a estes serviços
	obrigatórios, existe um grande número de
	serviços opcionais os quais o administrador do servidor
	pode optar por oferecer.  Esta sessão irá
	detalhar quais serviços você pode oferecer, bem
	como implementá-los.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-serv-ftp"></a>2.4.1. FTP (necessário para o conjunto de arquivos 
	  do FTP)</h4></div></div></div><p>Este é um dos serviços mais básicos, e ele é 
	  requerido em todos os sites espelhos que oferecem
	  acesso público às distribuições
	  via FTP.  O acesso ao FTP deve ser anônimo, e não
	  é permitido o uso de nenhum controle nas taxas de
	  upload/download (o que seria uma coisa ridícula de
	  qualquer maneira).  Não é necessário
	  ter o upload de arquivos habilitado (e isso
	  <span class="emphasis"><em>nunca</em></span> deve ser permitido na área
	  onde os arquivos do FreeBSD são mantidos).  Os
	  arquivos do FreeBSD devem ficar disponíveis sob o
	  caminho <code class="filename">/pub/FreeBSD</code>.</p><p>Existem diversos softwares disponíveis os quais
	  podem ser configurados para operar como um servidor de FTP
	  anônimo.  Por exemplo (em ordem
	  alfabética).</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">/usr/libexec/ftpd</code>: Este 
		é o servidor de FTP nativo do FreeBSD.
		Certifique-se de ler o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ftpd</span>(8)</span></a>.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/ncftpd/pkg-descr">ftp/ncftpd</a>: Um
		pacote comercial, gratuito para uso com fins
		educacionais.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/oftpd/pkg-descr">ftp/oftpd</a>: Um
		servidor de FTP desenvolvido tendo a segurança
		como seu foco principal.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/proftpd/pkg-descr">ftp/proftpd</a>: 
		Um servidor FTP modular e muito
		flexível.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/pure-ftpd/pkg-descr">ftp/pure-ftpd</a>:
		Outro servidor de FTP desenvolvido tendo a
		segurança em mente.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/twoftpd/pkg-descr">ftp/twoftpd</a>: 
		Mais um servidor desenvolvido com foco em
		segurança.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/vsftpd/pkg-descr">ftp/vsftpd</a>: 
		Um ftpd <span class="quote">&#8220;<span class="quote">muito seguro</span>&#8221;</span>.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/wu-ftpd/pkg-descr">ftp/wu-ftpd</a>: 
		O ftpd da universidade de Washington.  Ele se tornou
		impopular, por causa da enorme quantidade de problemas
		de segurança que foram descobertos nele.  Se
		você optar por utilizar este software,
		certifique-se de mantê-lo atualizado.</p></li></ul></div><p>O <span class="application">ftpd</span> nativo do FreeBSD, o
	    <span class="application">proftpd</span>, o
	    <span class="application">wu-ftpd</span> e talvez o
	    <span class="application">ncftpd</span> são alguns dos
	    servidores de FTP mais comumente utilizados.  Os demais
	    não possuem uma grande base de usuários
	    entre os sites espelhos.  Um item a ser considerado
	    é que você pode precisar de flexibilidade
	    para controlar quantas conexões simultâneas
	    serão permitidas no servidor, limitando desta forma
	    o consumo do seu link IP e dos demais recursos do
	    sistema.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-serv-rsync"></a>2.4.2. Rsync (opcional para o conjunto de arquivos 
	  do FTP)</h4></div></div></div><p>O <span class="application">Rsync</span> é muitas vezes
	  oferecido para acesso ao conteúdo da área de
	  FTP de um site espelho do FreeBSD, desta forma outros sites
	  espelhos podem utilizar o seu sistema como fonte para se
	  espelhar.  O protocolo do rsync é diferente do FTP em
	  muitos aspectos.  Ele é muito mais amigável em
	  relação ao consumo de banda IP, uma vez que
	  quando um arquivo é alterado ao invés de
	  transferí-lo por completo novamente, ele transfere
	  apenas as diferenças entre as duas versões do
	  arquivo.  O <span class="application">Rsync</span> requer uma
	  grande quantidade de memória para cada
	  instância.  A quantidade de memória alocada
	  depende do tamanho do modulo sincronizado em termos do
	  número de diretórios e de arquivos.  O
	  <span class="application">Rsync</span> pode utilizar o
	  <code class="command">rsh</code> e o <code class="command">ssh</code> (que agora
	  é padrão) para transporte dos dados, ou
	  então utilizar o seu próprio protocolo para
	  acesso stand-alone (este é o método preferido
	  para um servidor público de
	  <span class="application">Rsync</span>).  Obrigatoriedade de
	  autenticação, limites ao número de
	  conexões simultâneas e outras restrições
	  podem ser aplicadas.  Há apenas um pacote de software
	  disponível para se implementar um servidor de
	  <span class="application">Rsync</span>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/rsync/pkg-descr">net/rsync</a>
		</p></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-serv-http"></a>2.4.3. HTTP (necessário para as páginas web, 
	  opcional para o conjunto de arquivos do FTP)</h4></div></div></div><p>Se você deseja disponibilizar as páginas 
	  web do FreeBSD, você vai precisar instalar um 
	  servidor web.  Opcionalmente você poderá oferecer 
	  acesso a sua árvore de FTP via HTTP.  A escolha do 
	  software do servidor web é uma escolha do 
	  administrador do site espelho.  As opções 
	  mais populares são:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache22/pkg-descr">www/apache22</a>:
		O <span class="application">Apache</span> é o
		servidor web mais amplamente utilizado na internet.
		Ele é usado extensivamente pelo projeto
		FreeBSD.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/thttpd/pkg-descr">www/thttpd</a>:
		Se você for servir uma grande quantidade de
		conteúdo estático, você pode
		constatar que o uso de uma aplicação
		como o thttpd é mais eficiente do que o uso do
		<span class="application">Apache</span>.  Ele está 
		otimizado para operar sob a máxima performance
		no FreeBSD.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/boa/pkg-descr">www/boa</a>:
		O <span class="application">Boa</span> é uma outra
		alternativa ao <span class="application">thttpd</span> e ao
		<span class="application">Apache</span>.  Ele deve prover
		uma performance consideravelmente melhor que a do
		Apache para conteúdos puramente
		estáticos.  Ele não possui, pelo menos
		até o momento em que esse artigo está
		sendo escrito, o mesmo conjunto de
		otimizações para o ambiente FreeBSD que
		encontramos disponíveis no
		<span class="application">thttpd</span>.</p></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-serv-cvsup"></a>2.4.4. CVSup (desejado para repositórios CVS)</h4></div></div></div><p>O <span class="application">CVSup</span> é um meio 
	  muito eficiente de distribuição de arquivos. 
	  Ele trabalha de forma semelhante ao
	  <span class="application">rsync</span>, mas foi especialmente
	  projetado para uso com repositórios CVS.  Se
	  você deseja disponibilizar o repositório CVS do
	  FreeBSD, você deve considerar seriamente fazê-lo
	  via <span class="application">CVSup</span>.  É
	  possível oferecer acesso a um repositório CVS
	  via <span class="application">AnonCVS</span>, FTP,
	  <span class="application">rsync</span> ou HTTP, mas as pessoas
	  vão se beneficiar muito mais de um acesso via
	  <span class="application">CVSup</span>.  O
	  <span class="application">CVSup</span> foi desenvolvido pelo
	  John Polstra.  É um pouco complicado instalá-lo em
	  uma plataforma diferente do FreeBSD, uma vez que ele foi
	  escrito em Modula-3 e consequentemente necessita de um
	  ambiente Modula-3 disponível.  O John Polstra preparou
	  uma versão simplificada do M3 a qual é
	  suficiente para executar o <span class="application">CVSup</span>,
	  e que pode ser facilmente instalada.  Consulte <a class="link" href="http://www.polstra.com/projects/freeware/ezm3/" target="_top">Ezm3</a>
	  para maiores detalhes.  Os ports relacionados
	  são:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup/pkg-descr">net/cvsup</a>: 
		O port nativo do CVSup (cliente e servidor) o qual
		requer a instalalação do <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/ezm3/pkg-descr">lang/ezm3</a>.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup-mirror/pkg-descr">net/cvsup-mirror</a>: 
		O kit de espelhamento do CVSup, o qual requer o
		<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup-without-gui/pkg-descr">net/cvsup-without-gui</a>, e que
		o configura para atuar no espelhamento dos
		serviços.  Alguns administradores podem preferir
		utilizar uma forma diferente de configurar um site
		espelho.</p></li></ul></div><p>Existem alguns outros, como o <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup-without-gui/pkg-descr">net/cvsup-without-gui</a> o qual
	  você pode desejar olhar.  Se você preferir um
	  pacote binário, compilado estaticamente, de uma
	  olhada <a class="link" href="http://people.FreeBSD.org/~jdp/s1g/" target="_top">aqui</a>.
	  Esta página continua mencionando o erro SG1, o qual
	  esteve presente no <span class="application">CVSup</span>.  Talvez
	  o John venha a criar no futuro um site genérico para
	  download de binários estáticos para
	  várias plataformas.</p><p>É possível utilizar o
	  <span class="application">CVSup</span> para disponibilizar
	  qualquer tipo de arquivo, e não apenas
	  repositórios CVS, mas a configuração
	  pode ser complexa.  O <span class="application">CVSup</span>
	  é conhecido por consumir um pouco de CPU tanto no
	  servidor quanto no cliente, uma vez que ele precisa comparar
	  muitos arquivos.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-anoncvs"></a>2.4.5. AnonCVS (Opcional para reposittórios 
	  CVS)</h4></div></div></div><p>Se você possui o repositório CVS, 
	  você pode desejar disponibilizá-lo via cvs 
	  anônimo.  Um pequeno aviso antes: Não existe 
	  muita demanda para este tipo de acesso, ele requer alguma 
	  experiência, e você precisa saber o que 
	  está fazendo.</p><p>Geralmente há duas formas de se acessar um
	  repositório CVS remotamente: via
	  <span class="emphasis"><em>pserver</em></span> ou via <code class="command">ssh</code>
	  (nós não consideramos o
	  <code class="command">rsh</code>).  Para acesso anônimo, o uso
	  do <span class="emphasis"><em>pserver</em></span> é bastante adequado,
	  mas alguns optam por também oferecer acesso via
	  <code class="command">ssh</code>.  Existe um <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/development/FreeBSD-CVS/anoncvs.shar" target="_top">wrapper</a>
	  customizado no repositório CVS, para ser utilizado
	  como shell para uma conta anônima de ssh.  Ele faz um
	  chroot, e portanto requer que o repositório CVS
	  esteja disponível no diretório home do
	  usuário anônimo.  Isto pode não ser
	  possível para todos os sites.  Se você for
	  oferecer apenas acesso via <span class="emphasis"><em>pserver</em></span>,
	  esta restrição não se aplica, mas
	  você pode ficar sujeito a um risco maior de
	  segurança.  Você não precisa instalar
	  nenhum software especial, uma vez que o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a> vem por
	  padrão na instalação básica do
	  FreeBSD.  Você precisa habilitar o acesso
	  através do <code class="command">inetd</code>, para isto basta
	  adicionar uma entrada ao seu
	  <code class="filename">/etc/inetd.conf</code> semelhante a
	  esta:</p><pre class="programlisting">
cvspserver stream tcp nowait root /usr/bin/cvs cvs -f -l -R -T /anoncvstmp --allow-root=/home/ncvs pserver
          </pre><p>Consulte o manual para detalhes das 
	    opções.  Consulte também a 
	    página de <span class="emphasis"><em>info</em></span> do CVS sobre 
	    formas adicionais de certificar-se de que o acesso ao 
	    repositório está configurado apenas para 
	    leitura.  Recomenda-se que você crie uma conta 
	    não privilegiada, preferencialmente chamada 
	    <code class="systemitem">anoncvs</code>.
	    Você também precisa criar um arquivo
	    <code class="filename">passwd</code> no seu
	    <code class="filename">/home/ncvs/CVSROOT</code> e atribuir um
	    password (em branco ou anoncvs) para acesso deste
	    usuário ao CVS.  O diretório
	    <code class="filename">/anoncvstmp</code> é um sistema de
	    arquivo baseado em memória que tem um
	    propósito especial.  Ele não é
	    obrigatório mas seu uso é recomendado, uma
	    vez que o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a> cria uma estrutura de
	    diretórios ocultos no seu <code class="filename">/tmp</code>
	    a qual não é utilizada depois da
	    operação, mas que deixa as coisas
	    dramaticamente lentas se forem necessárias
	    operações reais de escrita e leitura para o
	    disco.  Aqui está um exemplo de configuração no
	    <code class="filename">/etc/fstab</code>, de como configurar um
	    MFS:</p><pre class="programlisting">
/dev/da0s1b /anoncvstmp mfs rw,-s=786432,-b=4096,-f=512,-i=560,-c=3,-m=0,nosuid 0 0
          </pre><p>Esta é (naturalmente) uma sintaxe otimizada ao
	    máximo, e foi sugerida pelo John Polstra.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-howto"></a>3. Como espelhar o FreeBSD</h2></div></div></div><p>Ok, agora você conhece os requisitos e sabe como oferecer
      os serviços, mas não sabe como começar. :-)
      Esta sessão explica como realizar realmente o
      espelhamento de várias partes do FreeBSD, que ferramentas
      utilizar e a partir de onde espelhar.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-ftp"></a>3.1. FTP</h3></div></div></div><p>A área de FTP representa o maior volume de dados a
	serem espelhados.  Ele inclui os <span class="emphasis"><em>conjuntos de
	distribuição</em></span> os quais são
	requeridos para as instalações via rede, os
	ramos (<span class="emphasis"><em>branches</em></span>) do sistema dos quais se
	tira snapshots a partir da árvore de código
	fonte, as <span class="emphasis"><em>imagens ISO</em></span> para gravar CDs de
	instalação do sistema, um sistema de arquivos
	vivo, a árvore do ports, os distifiles (código
	fonte necessários para compilar o ports) e uma
	quantidade enorme de pacotes.  Tudo, é claro, para as
	várias versões do FreeBSD, e para as
	várias arquiteturas.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-ftp-ftp"></a>3.1.1. Espelhando com FTP</h4></div></div></div><p>Você pode utilizar um aplicativo de espelhamento
	  de FTP para obter os arquivos.  Alguns dos mais utilizados
	  são:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/mirror/pkg-descr">ftp/mirror</a></p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/ftpmirror/pkg-descr">ftp/ftpmirror</a></p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/emirror/pkg-descr">ftp/emirror</a></p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/spegla/pkg-descr">ftp/spegla</a></p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/omi/pkg-descr">ftp/omi</a></p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/wget/pkg-descr">ftp/wget</a></p></li></ul></div><p>O <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/mirror/pkg-descr">ftp/mirror</a> era 
	  muito popular, mas parece ter alguns inconvenientes, como
	  ele está escrito em <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=perl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">perl</span>(1)</span></a> ele possui alguns
	  problemas reais para espelhar grandes diretórios
	  como os de um site espelho do FreeBSD.  Existem rumores de
	  que a versão atual corrigiu isso ao permitir que
	  seja especificado um algoritmo diferente para comparar a
	  estrutura de diretórios.</p><p>Em geral o FTP não é muito bom para 
	  tarefas de espelhamento.  Ele transfere o arquivo inteiro 
	  se o mesmo for alterado, e não cria um fluxo 
	  único de dados do qual ele se beneficiaria no caso 
	  de ocorrer uma grande janela de congestionamento TCP.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-ftp-rsync"></a>3.1.2. Espelhando com o Rsync</h4></div></div></div><p>A melhor forma de espelhar a área FTP é
	  através do uso do <span class="application">rsync</span>.
	  Você pode instalar o port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/rsync/pkg-descr">net/rsync</a> e então
	  utilizá-lo para sincronizar com o seu servidor de
	  <code class="literal">upstream</code>.  O
	  <span class="application">rsync</span> já foi mencionado na
	  <a class="xref" href="#mirror-serv-rsync" title="2.4.2. Rsync (opcional para o conjunto de arquivos do FTP)">Seção 2.4.2, &#8220;Rsync (opcional para o conjunto de arquivos 
	  do FTP)&#8221;</a>.  Uma vez que a
	  disponibilização de acesso via
	  <span class="application">rsync</span> não é
	  obrigatória, o seu site preferido de
	  <code class="literal">upstream</code> pode não disponibilizá-lo.  
	  Você pode precisar gastar algum tempo procurando até 
	  encontrar um servidor que permita o acesso via
	  <span class="application">rsync</span>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Uma vez que o número de clientes
	      <span class="application">rsync</span> gera um impacto
	      significativo no servidor, muitos administradores
	      definem limites para o número de acessos
	      simultâneos aos seus servidores.  Você deve
	      consultar o responsável pelo servidor de
	      <code class="literal">upstream</code> que você está
	      utilizando, sobre as regras do servidor, e sobre a
	      possibilidade dele abrir uma exceção para o seu
	      servidor (uma vez que você é um site
	      espelho).</p></div><p>A linha de comando para espelhar o FreeBSD será
	    parecida com esta:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>rsync -vaz --delete ftp4.de.FreeBSD.org::FreeBSD/ /pub/FreeBSD/</code></strong>
          </pre><p>Consulte a documentação do
	    <span class="application">rsync</span>, a qual está
	    disponível em <a class="link" href="http://rsync.samba.org/" target="_top">http://rsync.samba.org/</a>,
	    para conhecer as várias opções que
	    podem ser utilizadas com o
	    <span class="application">rsync</span>.  Se você
	    sincronizar o módulo inteiro (ao contrário
	    de apenas alguns subdiretórios), esteja ciente de
	    que o módulo-diretório (normalmente
	    "FreeBSD") não será criado, de forma que
	    você não deve omitir o diretório alvo.
	    Além disso, você pode desejar criar um script
	    de trabalho para ser executado pelo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>, para
	    automatizar o processo de espelhamento.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-ftp-cvsup"></a>3.1.3. Espelhando com o CVSup</h4></div></div></div><p>Alguns sites, incluindo o <code class="systemitem">ftp-master.FreeBSD.org</code> 
	  oferecem acesso via <span class="application">CVSup</span> para
	  espelhamento do conteúdo da área de FTP.
	  Você precisa instalar um cliente
	  <span class="application">CVSup</span>, preferencialmente a partir
	  do port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup/pkg-descr">net/cvsup</a>.
	  (consulte também a <a class="xref" href="#mirror-serv-cvsup" title="2.4.4. CVSup (desejado para repositórios CVS)">Seção 2.4.4, &#8220;CVSup (desejado para repositórios CVS)&#8221;</a>).  Abaixo você encontra um
	  exemplo de arquivo <code class="filename">supfile</code> pronto para
	  uso com o
	  <code class="systemitem">ftp-master.FreeBSD.org</code>:</p><pre class="programlisting">
          #
          # FreeBSD archive supfile from master server
          #
          *default host=ftp-master.FreeBSD.org
          *default base=/usr
          *default prefix=/pub
          #*default release=all
          *default delete use-rel-suffix
          *default umask=002

          # If your network link is a T1 or faster, comment out the following line.
          #*default compress

          FreeBSD-archive release=all preserve
          </pre><p>Ao que parece o <span class="application">CVSup</span> 
	    seria a melhor opção para espelhar os arquivos em 
	    termos eficiência, mas infelizmente ele só 
	    está disponível em alguns poucos
	    sites.</p><div xmlns="" class="note"><h3 class="admontitle"><a xmlns="http://www.w3.org/1999/xhtml" id="mirror-cvsup-s-option"></a>Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Por favor, consulte a documentação do
	      <span class="application">CVSup</span>, como por exemplo a
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvsup&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvsup</span>(1)</span></a> e considere o uso da opção
	      <code class="option">-s</code>.  Esta opção reduz as
	      operações de leitura e escrita para o seu
	      disco rígido, assumindo que as
	      informações gravadas sobre cada arquivo
	      estão corretas.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-cvs"></a>3.2. Espelhando o repositório CVS</h3></div></div></div><p>Existem várias formas de se espelhar o
	repositório CVS.  O <span class="application">CVSup</span> 
	é o método mais comum.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-cvs-cvsup"></a>3.2.1. Usando o CVSup</h4></div></div></div><p>O <span class="application">CVSup</span> foi descrito com 
	  algum detalhe na <a class="xref" href="#mirror-serv-cvsup" title="2.4.4. CVSup (desejado para repositórios CVS)">Seção 2.4.4, &#8220;CVSup (desejado para repositórios CVS)&#8221;</a> e na 
	  <a class="xref" href="#mirror-ftp-cvsup" title="3.1.3. Espelhando com o CVSup">Seção 3.1.3, &#8220;Espelhando com o CVSup&#8221;</a>.</p><p>É muito fácil configurar um site espelho
	  com o <span class="application">CVSup</span>.  Basta instalar o 
	  port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup-mirror/pkg-descr">net/cvsup-mirror</a>
	  para que você tenha todos os programas
	  necessários instalados, e para que todas as 
	  informações necessárias para a
	  configuração do site espelho sejam
	  coletadas.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Por favor não se esqueça de avaliar a
	    sugestão mencionada na <a class="link" href="#mirror-cvsup-s-option" title="Nota">nota acima</a></p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-cvs-other"></a>3.2.2. Utilizando outros métodos</h4></div></div></div><p>A utilização de outros métodos que
	  não o <span class="application">CVSup</span> geralmente
	  não é recomendada.  De qualquer forma,
	  nós vamos descrevê-los rapidamente aqui.  Uma
	  vez que a maioria dos sites oferece o repositório
	  CVS como parte da área de FTP, sob o caminho
	  <code class="filename">/pub/FreeBSD/development/FreeBSD-CVS</code>,
	  os seguintes métodos podem ser utilizados:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">FTP</span></p></li><li class="listitem"><p><span class="application">Rsync</span></p></li><li class="listitem"><p><span class="application">HTTP</span></p></li></ul></div><div xmlns="" class="important"><h3 class="admontitle">Importante: </h3><p xmlns="http://www.w3.org/1999/xhtml">O <span class="emphasis"><em>AnonCVS</em></span> não pode ser
	      utilizado para espelhar o repositório CVS, uma
	      vez que o CVS não permite que você acesse o
	      próprio repositório em si (arquivos ",v"),
	      permitindo o acesso somente as versões limpas dos
	      módulos.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-www"></a>3.3. Espelhando as páginas WWW</h3></div></div></div><p>A melhor forma é realizar um <span class="quote">&#8220;<span class="quote"><code class="literal">check
	out</code></span>&#8221;</span> da distribuição www do
	servidor de CVS.  Se você tem um mirror local do
	repositório CVS, isto será tão simples
	quanto executar:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs -d /home/ncvs co www</code></strong></pre><p>e agendar uma tarefa no <span class="emphasis"><em>cron</em></span>, 
	que execute periodicamente o comando 
	<code class="command">cvs up -d -P</code>,  imediatamente
	após a execução do processo que atualiza
	o seu repositório.  É claro que os arquivos
	precisam ser colocados em um diretório disponível para
	acesso público via WWW.  A instalação e
	configuração de um servidor web não
	serão abordadas neste artigo.</p><p>Se você não tem um repositório local,
	você pode utilizar o <span class="application">CVSup</span>
	para manter uma <span class="quote">&#8220;<span class="quote">cópia atualizada</span>&#8221;</span> das
	páginas www.  Um supfile de exemplo para esta tarefa
	pode ser encontrado em
	<code class="filename">/usr/share/examples/cvsup/www-supfile</code>, o
	qual irá se parecer com isto:</p><pre class="programlisting">
        #
        # WWW module supfile for FreeBSD
        #
        *default host=cvsup3.de.FreeBSD.org
        *default base=/usr
        *default prefix=/usr/local
        *default release=cvs tag=.
        *default delete use-rel-suffix

        # If your network link is a T1 or faster, comment out the following line.
        *default compress

        # This collection retrieves the www/ tree of the FreeBSD repository
        www
        </pre><p>A utilização do <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ftp/wget/pkg-descr">ftp/wget</a> ou de outras ferramentas
	de espelhamento web (<code class="literal">web-mirror</code>) 
	não é recomendado.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-www-doc"></a>3.3.1. Espelhando a documentação do FreeBSD</h4></div></div></div><p>Uma vez que a documentação é referenciada em diversas 
	 páginas web, é recomendado que você também espelhe a 
	 documentação do FreeBSD.  No entanto, isto não é tão 
	 trivial quanto o espelhamento das páginas www 
	 isoladamente.</p><p>Em primeiro lugar, você deve obter os fontes da
	 documentação, e recomendamos que você faça isso 
	 preferencialmente via <span class="application">CVSup</span>.  
	 Aqui está um exemplo de supfile para esta tarefa:</p><pre class="programlisting">
         #
         # FreeBSD documentation supfile
         #
         *default host=cvsup3.de.FreeBSD.org
         *default base=/usr
         *default prefix=/usr/share
         *default release=cvs tag=.
         *default delete use-rel-suffix

         # If your network link is a T1 or faster, comment out the following line.
         #*default compress

         # This will retrieve the entire doc branch of the FreeBSD repository.
         # This includes the handbook, FAQ, and translations thereof.
         doc-all
         </pre><p>Então você precisará instalar alguns
	 ports.  Mas você está com sorte pois existe um
	 meta-port, o <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/textproc/docproj/pkg-descr">textproc/docproj</a>, para fazer o
	 trabalho por você.  Você precisa configurar
	 algumas variáveis de ambiente, como por exemplo
	 <code class="literal">SGML_CATALOG_FILES</code>.  Também de uma
	 olhada no seu <code class="filename">/etc/make.conf</code>
	 (faça uma cópia do
	 <code class="filename">/usr/share/examples/etc/make.conf</code> se
	 você não possuir um), e verifique a
	 variável <code class="literal">DOC_LANG</code>.  Agora
	 você provavelmente já está pronto para
	 executar o comando <code class="command">make</code> dentro do
	 diretório com os fontes da documentação
	 (<code class="filename">/usr/share/doc</code> por padrão) para
	 construí-la.  De novo, você precisa tornar os arquivos 
	 acessíveis através do seu servidor web, certificando-se de 
	 que os links apontam para o local correto.</p><div xmlns="" class="important"><h3 class="admontitle">Importante: </h3><p xmlns="http://www.w3.org/1999/xhtml">A construção da documentação, assim como as diversas 
	    tarefas associadas ao processo, estão documentadas
	    no <a class="link" href="../../../../doc/en_US.ISO8859-1/books/fdp-primer" target="_top">FreeBSD Documentation
	    Project Primer</a>.  Por favor, leia este documento,
	    especialmente se você está tendo problemas
	    para construir a documentação.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-how-often"></a>3.4. Com que frequência devo espelhar?</h3></div></div></div><p>Todo site espelho deve ser atualizado regularmente.  
       Você certamente irá precisar de alguns scripts 
       para automatizar este processo de atualização 
       com a ajuda do <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>.  Uma vez que praticamente cada
       administrador implementa este procedimento do seu
       próprio jeito, nós não temos como fornecer
       instruções específicas de como proceder.
       O processo poderia ser resumido em:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Coloque o comando para executar a sua
	   aplicação de espelhamento em um script.  O
	   uso de um script simples em <code class="command">/bin/sh</code>
	   é recomendado.</p></li><li class="step"><p>Adicione alguns redirecionamentos para arquivo das
	   mensagens dos programas, de forma que possa usar o mesmo 
	   com a finalidade de diagnóstico de problemas.</p></li><li class="step"><p>Teste se o seu script funciona.  Verifique o arquivo de
	   log.</p></li><li class="step"><p>Utilize o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">crontab</span>(1)</span></a> para adicionar o script ao
	   <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">crontab</span>(5)</span></a> do usuário apropriado.  O qual deve
	   ser um usuário diferente do usuário sob o
	   qual o servidor de FTP é executado, desta forma
	   não será permitido o acesso via FTP
	   anônimo aos arquivos presentes na área de FTP,
	   os quais não possuam permissões que
	   possibilitem a leitura por todos os demais usuários.
	   Isto é utilizado para a fase de <span class="quote">&#8220;<span class="quote">stage</span>&#8221;</span>
	   das novas distribuições &#8212; garantindo
	   que todos os sites espelhos oficiais possuam todos os
	   arquivos necessários de uma
	   distribuição, no dia em que a mesma é
	   liberada.</p></li></ol></div><p>Aqui estão alguns exemplos da periodicidade
       recomendada para atualização de um site
       espelho:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Conjunto de arquivos do FTP: diária</p></li><li class="listitem"><p>Repositório CVS: horária</p></li><li class="listitem"><p>Páginas WWW: diária</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-where"></a>4. De onde espelhar</h2></div></div></div><p>Esta é uma questão importante.  Portanto, esta
      seção irá gastar algum esforço para
      explicá-la.  Vamos dizer isso várias vezes: em
      nenhuma circunstância você deve espelhar a partir do
      <code class="systemitem">ftp.FreeBSD.org</code>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-organization"></a>4.1. Algumas palavras sobre a 
	organização</h3></div></div></div><p>Os sites espelhos são organizados por país.
	Todos os sites espelhos oficiais possuem uma entrada de DNS no
	formato <code class="systemitem">ftpN.CC.FreeBSD.org</code>.  No
	qual <span class="emphasis"><em>CC</em></span> (i.e. código do
	país / country code) é o <span class="emphasis"><em>domínio de
	primeiro nível</em></span> (TLD) do país no qual
	o site espelho está localizado.  O
	<span class="emphasis"><em>N</em></span> é um número, o qual diz
	que o servidor é o de número
	<span class="emphasis"><em>N</em></span> naquele país.  (o mesmo se
	aplica para <code class="systemitem">cvsupN.CC.FreeBSD.org</code>,
	<code class="systemitem">wwwN.CC.FreeBSD.org</code>, etc.)  Existem sites
	espelho que não possuem os componentes
	<span class="emphasis"><em>CC</em></span> em suas entradas de DNS.  Estes
	são os sites espelhos que estão muito bem
	conectados e que permitem um grande número de
	usuários simultâneos.  O <code class="systemitem">ftp.FreeBSD.org</code> é composto
	atualmente por 2 servidores, um está localizado a
	Dinamarca e o outro nos Estados Unidos.  Ele
	<span class="emphasis"><em>NÃO</em></span> é um site mestre e
	não deve nunca ser utilizado como servidor de upstream
	para o seu espelhamento.  Um grande número de
	documentos online conduzem de forma interativa o
	usuário para <code class="systemitem">ftp.FreeBSD.org</code>, de forma que os sistemas
	de espelhamento automático devem buscar um servidor
	diferente para usar como fonte.</p><p>Adicionalmente existe uma hierarquia para os sites 
	espelhos, a qual é descrita em termos de níveis
	(<span class="emphasis"><em>tiers</em></span>).  Os sites mestres não
	são referenciados, mas eles poderiam ser descritos como
	sendo um <span class="emphasis"><em>Tier-0</em></span>.  Os sites espelhos
	construídos a partir destes servidores podem ser 
	considerados <span class="emphasis"><em>Tier-1</em></span>, os espelhos dos
	espelhos-<span class="emphasis"><em>Tier-1</em></span> são considerados
	<span class="emphasis"><em>Tier-2</em></span>, etc.  Os sites oficiais
	são encorajados a serem um <span class="emphasis"><em>tier</em></span>
	baixo, porém quanto mais baixo o
	<span class="emphasis"><em>tier</em></span>, maiores as exigências nos
	termos descritos na <a class="xref" href="#mirror-requirements" title="2. Requisitos para espelhar o FreeBSD">Seção 2, &#8220;Requisitos para espelhar o FreeBSD&#8221;</a>.  O
	acesso aos sites espelhos de baixo <span class="emphasis"><em>tier</em></span>
	pode ser restito, e o acesso aos sites mestres é
	definitivamente restrito.  A hierarquia de
	<span class="emphasis"><em>tier</em></span> não é refletida pelo
	DNS, e geralmente não é documentada em nenhum
	lugar exceto para os sites mestres.  Entretanto, os sites
	espelhos oficiais com números baixos, de 1 a 4,
	normalmente são <span class="emphasis"><em>Tier-1</em></span> (esta
	é apenas uma sugestão aproximada, pois
	não existe uma regra).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-where"></a>4.2. Ok, mas de onde eu devo obter o material agora?</h3></div></div></div><p>Sob nenhuma circunstância você deve espelhar 
	o seu servidor a partir do <code class="systemitem">ftp.FreeBSD.org</code>.  A resposta curta
	é: A partir do site que for mais próximo de
	você em termos de saltos na internet, ou então do
	que lhe disponibilizar o acesso mais rápido.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-simple"></a>4.2.1. Eu quero apenas espelhar a partir de algum
	  lugar!</h4></div></div></div><p>Se você não possui nenhuma intenção ou necessidade 
	  especial, as instruções da 
	  <a class="xref" href="#mirror-where-where" title="4.2. Ok, mas de onde eu devo obter o material agora?">Seção 4.2, &#8220;Ok, mas de onde eu devo obter o material agora?&#8221;</a> se aplicam.  Isso
	  significa:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Verifique os sites espelhos disponíveis no
	      seu país.  O <a class="link" href="http://mirrorlist.FreeBSD.org/" target="_top">Banco de dados de
	      sites espelho do FreeBSD</a> pode ajudá-lo
	      neste processo.</p></li><li class="step"><p>Verifique qual deles disponibiliza o acesso mais
	      rápido (número de saltos, tempo de
	      latência, etc.) e que oferece os serviços
	      que você planeja utilizar (tal como
	      <span class="application">rsync</span> ou
	      <span class="application">CVSup</span>).</p></li><li class="step"><p>Entre em contato com o administrador do site que
	      você escolheu, mencione sua intenção
	      e pergunte sobre os termos e regras para uso do 
	      servidor.</p></li><li class="step"><p>Configure o seu site espelho como foi descrito
	      anteriormente.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-official"></a>4.2.2. Eu sou um site espelho oficial, qual é o site
	  correto para mim?</h4></div></div></div><p>Em geral a orientação da 
	  <a class="xref" href="#mirror-where-simple" title="4.2.1. Eu quero apenas espelhar a partir de algum lugar!">Seção 4.2.1, &#8220;Eu quero apenas espelhar a partir de algum
	  lugar!&#8221;</a> continua válida.
	  É claro que você pode querer colocar algum peso
	  sobre o fato de que o seu site de upstream deveria ser um
	  servidor de <span class="emphasis"><em>tier</em></span> baixo.  Existem
	  algumas outras considerações sobre sites
	  espelhos <span class="emphasis"><em>oficiais</em></span> que estão
	  descritos na <a class="xref" href="#mirror-official" title="5. Sites Espelhos Oficiais">Seção 5, &#8220;Sites Espelhos Oficiais&#8221;</a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-master"></a>4.2.3. Eu quero acessar um site mestre!</h4></div></div></div><p>Se você tem boas razões e bons
	  pré-requisitos, você pode querer e ter acesso a
	  um dos servidores mestres.  O acesso a estes sites
	  geralmente é restrito e existem regras especiais para o 
	  acesso.  Se você já é um site espelho
	  <span class="emphasis"><em>oficial</em></span>, isto certamente irá
	  ajudá-lo a conseguir o acesso.  Em qualquer outro
	  caso,  certifique-se de que o seu país realmente
	  necessita de outro site espelho.  Se ele já possui 3
	  ou mais, pergunte ao <span class="quote">&#8220;<span class="quote">administrador da zona</span>&#8221;</span>
	  (<code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@CC.FreeBSD.org">hostmaster@CC.FreeBSD.org</a>&gt;</code>) ou primeiro na
	  <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">lista de discussão
  sobre sites espelhos do FreeBSD</a>.</p><p>Quem o ajudou a se tornar um site espelho
	  <span class="emphasis"><em>oficial</em></span>, deveria tê-lo ajudado a
	  ganhar acesso a um servidor apropriado de upstream, seja
	  à um dos servidores mestre ou a um servidor Tier-1
	  adequado.  Se isso não ocorreu, você pode
	  enviar um email para o endereço
	  <code class="email">&lt;<a xmlns="" class="email" href="mailto:mirror-admin@FreeBSD.org">mirror-admin@FreeBSD.org</a>&gt;</code> e solicitar ajuda
	  com isto.</p><p>Existem 3 servidores mestres para o conjunto de arquivos
	  do FTP e um para o repositório de CVS (as 
	  páginas web e os demais documentos são 
	  obtidos a partir do CVS, por isso não existe 
	  necessidade de se ter um servidor mestre para eles).</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-master-ftp"></a>4.2.3.1. ftp-master.FreeBSD.org</h5></div></div></div><p>Este é o servidor mestre para o conjunto de 
	      arquivos do FTP.</p><p>O <code class="systemitem">ftp-master.FreeBSD.org</code>
	    disponibiliza os serviços de 
	    <span class="application">rsync</span> e de 
	    <span class="application">CVSup</span>, além do
	    serviço de FTP.  Consulte a 
	    <a class="xref" href="#mirror-ftp-rsync" title="3.1.2. Espelhando com o Rsync">Seção 3.1.2, &#8220;Espelhando com o Rsync&#8221;</a> e a 
            <a class="xref" href="#mirror-ftp-cvsup" title="3.1.3. Espelhando com o CVSup">Seção 3.1.3, &#8220;Espelhando com o CVSup&#8221;</a> para maiores
	    informações sobre como acessar utilizando
	    estes protocolos.</p><p>Os sites espelhos são encorajados a 
	    também disponibilizarem acesso via
	    <span class="application">rsync</span> à área de
	    FTP, desde que sejam sites
	    espelho-<span class="emphasis"><em>Tier-1</em></span>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-where-master-cvsup"></a>4.2.3.2. cvsup-master.FreeBSD.org</h5></div></div></div><p>Este é o servidor mestre do repositório
	    de CVS.</p><p>O <code class="systemitem">cvsup-master.FreeBSD.org</code>
	    disponibiliza apenas o serviço de
            <span class="application">CVSup</span>.  Consulte a 
            <a class="xref" href="#mirror-cvs-cvsup" title="3.2.1. Usando o CVSup">Seção 3.2.1, &#8220;Usando o CVSup&#8221;</a> para maiores
	    detalhes.</p><p>Para obter acesso, você vai precisar entrar em
	    contato com o Coordenador de sites espelho CVSup 
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:cvsup-master@FreeBSD.org">cvsup-master@FreeBSD.org</a>&gt;</code>.  Certifique-se de ter
	    lido antes as <a class="link" href="http://people.FreeBSD.org/~jdp/cvsup-access/" target="_top">Regras
	    de Acesso ao CVSup do FreeBSD</a>!</p><p>Configure a autenticação
	    necessária seguindo 
	    <a class="link" href="http://people.FreeBSD.org/~jdp/cvpasswd/" target="_top">estas
	    instruções</a>.  Certifique-se de que
	    você especificou o servidor como sendo
	    <code class="systemitem">freefall.FreeBSD.org</code> na linha de comando
	    do <code class="command">cvpasswd</code>, como descrito no documento
	    anterior, mesmo quando você estiver contatando o
	    <code class="systemitem">cvsup-master.FreeBSD.org</code>.</p></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-official"></a>5. Sites Espelhos Oficiais</h2></div></div></div><p>Um site espelho oficial é um site espelho que:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>a) Possui uma entrada <code class="systemitem">FreeBSD.org</code> 
	    no DNS (usualmente um CNAME).</p></li><li class="listitem"><p>b) Está listado como um site espelho oficial
	    na documentação do FreeBSD (como por exemplo
	    no Handbook).</p></li></ul></div><p>Por enquanto isto deve ser o suficiente para que 
	você possa distinguir os sites espelhos oficiais.  Os 
	sites espelhos oficiais não são necessariamente
	espelhos-<span class="emphasis"><em>Tier-1</em></span>.  Entretanto, você
	provavelmente não irá encontrar um site
	espelho-<span class="emphasis"><em>Tier-1</em></span>, que não seja
	oficial.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-official-requirements"></a>5.1. Requisitos especiais para os sites espelhos oficiais
      (Tier-1)</h3></div></div></div><p>Não é assim fácil indicar
	exigências para todos os sites espelho oficiais, uma vez
	que o projeto é um tanto quanto tolerante neste ponto.
	É mais fácil dizer o que é exigido dos
	<span class="emphasis"><em>sites espelhos oficiais Tier-1</em></span>.  Todos os
	outros sites espelhos oficiais devem considerar a lista abaixo
	<span class="emphasis"><em>apenas como orientação</em></span>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">O que está descrito a seguir aplica-se 
	    basicamente à árvore de FTP, uma vez que o
	    repositório de CVS deve ser sempre espelhado
	    completamente, e as páginas web são um caso
	    à parte.</p></div><p>
        Os sites espelho Tier-1 devem:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Carregar o conjunto completo de arquivos do
	      FTP.</p></li><li class="listitem"><p>Permitir o acesso de outros sites espelho.</p></li><li class="listitem"><p>Disponibilizar os serviços de 
	      <span class="application">FTP</span> e de 
            <span class="application">rsync</span></p></li></ul></div><p>Além disso, os administradores devem se
	  inscrever na <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">lista de discussão
  sobre sites espelhos do FreeBSD</a>.  Consulte <a class="link" href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/eresources.html#ERESOURCES-MAIL" target="_top">este link</a>
	  para maiores informações sobre como se
	  inscrever.</p><div xmlns="" class="important"><h3 class="admontitle">Importante: </h3><p xmlns="http://www.w3.org/1999/xhtml">É <span class="emphasis"><em>muito importante</em></span> para um
	    administrador de um site espelho, especialmente para os
	    administradores de um site espelho Tier-1, verificar o
	    <a class="link" href="http://www.FreeBSD.org/releng/" target="_top">calendário de
	    lançamento</a> da próxima versão
	    do FreeBSD.  Isto é importante porque ele
	    irá lhe dizer para quando está previsto o
	    lançamento da próxima versão, dando a
	    você tempo para se preparar para o grande pico de
	    tráfego que se segue a este tipo de evento.</p><p xmlns="http://www.w3.org/1999/xhtml">Também é importante para um 
	    administrador de um site espelho tentar manter o seu 
	    servidor o mais atualizado possível (de novo, 
	    isto é ainda mais crucial para os sites espelhos 
	    Tier-1).  Se os sites espelhos Tier-1 ficarem um bom 
	    tempo sem se atualizarem, os sites espelhos de tiers 
	    mais elevados vão começar a espelhar dados 
	    antigos a partir dos sites espelhos Tier-1, começando 
	    desta forma uma espiral descendente... Portanto, 
	    mantenham os seus sites espelhos atualizados!</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-official-become"></a>5.2. Como se tornar um site espelho oficial?</h3></div></div></div><p>Nós não estamos aceitando nenhum novo site
	espelho no momento.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirror-statpages"></a>6. Algumas estatísticas dos sites espelhos</h2></div></div></div><p>Aqui você encontra links para as páginas de
      estatísticas de acesso aos seus sites espelhos favoritos
      (isto é, pelo menos para os sites que as 
      disponibilizam).</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-statpagesftp"></a>6.1. Estatísticas dos sites de FTP</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ftp.is.FreeBSD.org -
	    <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@is.FreeBSD.org">hostmaster@is.FreeBSD.org</a>&gt;</code> -
            <a class="link" href="http://www.rhnet.is/status/draupnir/draupnir.html" target="_top">
            (Consumo de banda IP)</a> <a class="link" href="http://www.rhnet.is/status/ftp/ftp-notendur.html" target="_top">(Processos FTP)
            </a> <a class="link" href="http://www.rhnet.is/status/ftp/http-notendur.html" target="_top">(Processos HTTP)
            </a>
          </p></li><li class="listitem"><p>ftp.cz.FreeBSD.org - <code class="email">&lt;<a xmlns="" class="email" href="mailto:cejkar@fit.vutbr.cz">cejkar@fit.vutbr.cz</a>&gt;</code> -
            <a class="link" href="http://www.cz.FreeBSD.org/stats/mrtg/net.html" target="_top">(Consumo de banda IP)</a>
            <a class="link" href="http://www.freebsd.cz/stats/mrtg/ftpd.html" target="_top">(Processos FTP)</a>
            <a class="link" href="http://www.freebsd.cz/stats/mrtg/rsyncd.html" target="_top">(Processos rsync)</a>
          </p></li><li class="listitem"><p>ftp2.ru.FreeBSD.org - <code class="email">&lt;<a xmlns="" class="email" href="mailto:mirror@macomnet.ru">mirror@macomnet.ru</a>&gt;</code> -
            <a class="link" href="http://mirror.macomnet.net/mrtg/mirror.macomnet.net_195.128.64.25.html" target="_top">(Consumo de banda IP)</a>
            <a class="link" href="http://mirror.macomnet.net/mrtg/mirror.macomnet.net_proc.html" target="_top">(Usuários HTTP e FTP)</a>
          </p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirror-statpagescvsup"></a>6.2. Estatísticas dos sites de CVSup</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>cvsup[23456].jp.FreeBSD.org - <code class="email">&lt;<a xmlns="" class="email" href="mailto:kuriyama@FreeBSD.org">kuriyama@FreeBSD.org</a>&gt;</code> - <a class="link" href="http://home.jp.FreeBSD.org/stats/mrtg/cvsup/index.en.html" target="_top">(Processos CVSup)</a></p></li><li class="listitem"><p>cvsup.cz.FreeBSD.org - <code class="email">&lt;<a xmlns="" class="email" href="mailto:cejkar@fit.vutbr.cz">cejkar@fit.vutbr.cz</a>&gt;</code> -
            <a class="link" href="http://www.freebsd.cz/stats/mrtg/cvsupd.html" target="_top">(Processos CVSup)</a></p></li><li class="listitem"><p>cvsup4.ru.FreeBSD.org - <code class="email">&lt;<a xmlns="" class="email" href="mailto:maxim@FreeBSD.org">maxim@FreeBSD.org</a>&gt;</code> -
            <a class="link" href="http://ftp.mtu.ru/mrtg/ftp.mtu.ru_proc2.html" target="_top">(Processos CVSup)</a></p></li></ul></div></div></div></div></body></html>