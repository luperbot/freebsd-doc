<?xml version="1.0" encoding="iso-8859-1"?>
<!--
  The FreeBSD Documentation Project
  The FreeBSD Brazilian Portuguese Documentation Project

  Original revision: r39544
-->
<article xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:lang="pt_br">
  <info><title xmlns:xlink="http://www.w3.org/1999/xlink">Espelhando o FreeBSD</title>
    
    <authorgroup xmlns:xlink="http://www.w3.org/1999/xlink">
      <author xmlns:xlink="http://www.w3.org/1999/xlink"><personname xmlns:xlink="http://www.w3.org/1999/xlink"><firstname xmlns:xlink="http://www.w3.org/1999/xlink">Jun</firstname><surname xmlns:xlink="http://www.w3.org/1999/xlink">Kuriyama</surname></personname><affiliation xmlns:xlink="http://www.w3.org/1999/xlink">
          <address xmlns:xlink="http://www.w3.org/1999/xlink"><email xmlns:xlink="http://www.w3.org/1999/xlink">kuriyama@FreeBSD.org</email></address>
        </affiliation></author>
      <author xmlns:xlink="http://www.w3.org/1999/xlink"><personname xmlns:xlink="http://www.w3.org/1999/xlink"><firstname xmlns:xlink="http://www.w3.org/1999/xlink">Valentino</firstname><surname xmlns:xlink="http://www.w3.org/1999/xlink">Vaschetto</surname></personname><affiliation xmlns:xlink="http://www.w3.org/1999/xlink">
          <address xmlns:xlink="http://www.w3.org/1999/xlink"><email xmlns:xlink="http://www.w3.org/1999/xlink">logo@FreeBSD.org</email></address>
        </affiliation></author>
      <author xmlns:xlink="http://www.w3.org/1999/xlink"><personname xmlns:xlink="http://www.w3.org/1999/xlink"><firstname xmlns:xlink="http://www.w3.org/1999/xlink">Daniel</firstname><surname xmlns:xlink="http://www.w3.org/1999/xlink">Lang</surname></personname><affiliation xmlns:xlink="http://www.w3.org/1999/xlink">
          <address xmlns:xlink="http://www.w3.org/1999/xlink"><email xmlns:xlink="http://www.w3.org/1999/xlink">dl@leo.org</email></address>
        </affiliation></author>
      <author xmlns:xlink="http://www.w3.org/1999/xlink"><personname xmlns:xlink="http://www.w3.org/1999/xlink"><firstname xmlns:xlink="http://www.w3.org/1999/xlink">Ken</firstname><surname xmlns:xlink="http://www.w3.org/1999/xlink">Smith</surname></personname><affiliation xmlns:xlink="http://www.w3.org/1999/xlink">
	  <address xmlns:xlink="http://www.w3.org/1999/xlink"><email xmlns:xlink="http://www.w3.org/1999/xlink">kensmith@FreeBSD.org</email></address>
	</affiliation></author>
    </authorgroup>

    <legalnotice xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="trademarks" role="trademarks">
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD is a registered trademark of
  the FreeBSD Foundation.</para>
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">CVSup is a registered trademark of
  John D. Polstra.</para>
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">Many of the designations used by
  manufacturers and sellers to distinguish their products are claimed
  as trademarks.  Where those designations appear in this document,
  and the FreeBSD Project was aware of the trademark claim, the
  designations have been followed by the <quote xmlns:xlink="http://www.w3.org/1999/xlink">&#8482;</quote> or the
  <quote xmlns:xlink="http://www.w3.org/1999/xlink">®</quote> symbol.</para>
    </legalnotice>

    <pubdate xmlns:xlink="http://www.w3.org/1999/xlink">$FreeBSD$</pubdate>

    <releaseinfo xmlns:xlink="http://www.w3.org/1999/xlink">$FreeBSD$</releaseinfo>

    <abstract xmlns:xlink="http://www.w3.org/1999/xlink">
      <para xmlns:xlink="http://www.w3.org/1999/xlink">Este artigo aborda a configuração de um site espelho 
	destinado à distribuição do FreeBSD e tem como público alvo 
	os administradores destes sites.  Este é um trabalho em 
	andamento.</para>
    </abstract>
  </info>

  <note xmlns:xlink="http://www.w3.org/1999/xlink">
    <para xmlns:xlink="http://www.w3.org/1999/xlink">Neste momento nós não estamos aceitando 
      novos sites espelho.</para>
  </note>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-contact">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Informações de Contato</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Os coordenadores do sistema de sites espelho podem ser
      contatados por email no endereço
      <email xmlns:xlink="http://www.w3.org/1999/xlink">mirror-admin@FreeBSD.org</email>.  Também existe a
      <link xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs">lista de discussão
  sobre sites espelhos do FreeBSD</link>.</para>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-requirements">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Requisitos para espelhar o FreeBSD</title>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-diskspace">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Espaço em disco</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Espaço em disco é um dos requisitos mais
	importantes.  Dependendo do conjunto de releases, de
	arquiteturas e do grau de cobertura que você deseja que
	seu site espelho tenha, uma enorme quantia de espaço em
	disco pode ser consumida.  Também tenha em mente que os sites
	<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">oficiais</emphasis> provavelmente precisam estar
	completos.  O repositório CVS e as páginas web devem
	ser sempre espelhados de forma completa.  Também
	observe que os números mencionados neste artigo estão
	refletindo o estado atual
	(9.3-RELEASE/10.1-RELEASE).
	Desenvolvimentos futuros e novas releases apenas irão
	aumentar o espaço requerido.  Certifique-se de manter
	algum espaço extra (entre 10 e 20%) disponível, em
	relação as estimativas abaixo, apenas por
	segurança.  Aqui estão algumas estimativas
	aproximadas:
      </para>

      <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
        <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Distribuição FTP completa: 1.0 TB</para>
	</listitem>
        <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Repositório CVS: 5.4 GB</para>
	</listitem>
        <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Deltas CTM: 3.2 GB</para>
	</listitem>
        <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Páginas Web: 463 MB</para>
	</listitem>
      </itemizedlist>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">O uso atual de espaço em disco pela
	distribuição FTP pode ser encontrada em 
	<link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="ftp://ftp.FreeBSD.org/pub/FreeBSD/dir.sizes">ftp://ftp.FreeBSD.org/pub/FreeBSD/dir.sizes</link>.
      </para>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-bandwidth">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Conectividade de rede e largura de banda</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">É claro que você precisa estar conectado à 
	Internet.  A largura de banda que será 
	necessária dependerá do uso previsto para o seu 
	site espelho.  Se você só quer espelhar algumas 
	partes do FreeBSD para uso local no seu Site/Intranet, a 
	demanda pode ser muito menor do que se você quiser 
	tornar os arquivos disponíveis publicamente.  Se 
	você pretende se tornar um site espelho oficial, a 
	largura de banda necessária será ainda maior.  
	Desta forma, nós só podemos dar estimativas 
	grosseiras em relação a este item:</para>

      <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
         <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	   <para xmlns:xlink="http://www.w3.org/1999/xlink">Site local, sem acesso público: basicamente
	     nenhum, mas um link menor que 2 Mbps pode tornar o 
	     processo de sincronismo muito lento.</para>
         </listitem>

         <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	   <para xmlns:xlink="http://www.w3.org/1999/xlink">Site público não oficial: um link de 
	     34 Mbps é provavelmente um bom ponto de
	     partida.</para>
	 </listitem>

         <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	   <para xmlns:xlink="http://www.w3.org/1999/xlink">Site oficial: recomenda-se um link de no 
	     mínimo 100 Mbps, e o seu servidor deverá 
	     estar conectado o mais próximo possível 
	     do seu roteador de borda.</para>
	 </listitem> 
      </itemizedlist>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-system">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Requisitos de sistema, CPU e Memória RAM</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">O dimensionamento destes itens depende do número
	esperado de clientes simultâneos, o que é
	determinado pela política de uso do servidor.  Estes
	requisitos também são afetados pelo tipo de
	serviço que você deseja oferecer.
	Serviços básicos de FTP ou HTTP podem não
	necessitar de uma grande quantidade de recursos.  Mas fique
	atento se você for disponibilizar os serviços de
	CVSup, rsync ou mesmo de AnonCVS.  Estes serviços podem
	ter um enorme impacto nos requisitos de CPU e de
	memória.  Especialmente o rsync, o qual é
	considerado um devorador de memória, e o CVSup
	certamente consome um pouco da CPU.  No caso do AnonCVS pode
	ser interessante configurar um sistemas de arquivos residente
	em memória (MFS) de no mínimo 300 MB, desta
	forma você precisa considerar este consumo quando
	avaliar a quantidade de memória requerida.  A seguir você
	irá encontrar alguns exemplos, os quais visam apenas
	lhe dar uma idéia por alto das necessidades.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Para um site de visitação moderada o qual
	ofereça o serviço de
	<application xmlns:xlink="http://www.w3.org/1999/xlink">Rsync</application>, você pode considerar
	uma CPU entre 800 MHz e 1 GHz, e pelo menos 512 MB de
	memória RAM.  Esta é provavelmente a
	configuração mínima para um site espelho
	<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">oficial</emphasis>.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Para um site de visitação frequente, 
	você definitivamente vai precisar de mais memória
	RAM (considere 2 GB como um bom ponto de partida) e 
	possivelmente de mais poder de processamento (CPU), o que 
	pode significar que você precisará ir para um 
	sistema multiprocessado (SMP).</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Você também pode considerar o uso de um
	subsistema de discos rápidos.  As
	operações em um repositório CVS
	necessitam de um subsistema de discos rápido (o uso de
	RAID é altamente desejável).  Uma controladora
	SCSI que possua cache dedicado também pode melhorar a
	velocidade uma vez que a maioria destes serviços
	incorre na realização de um grande número
	de pequenas modificações no disco.</para>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-services">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Serviços para oferecer</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Todo site espelho é obrigado a disponibilizar um
	conjunto de serviços básicos.  Em
	adição a estes serviços
	obrigatórios, existe um grande número de
	serviços opcionais os quais o administrador do servidor
	pode optar por oferecer.  Esta sessão irá
	detalhar quais serviços você pode oferecer, bem
	como implementá-los.</para>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-serv-ftp">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">FTP (necessário para o conjunto de arquivos 
	  do FTP)</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">Este é um dos serviços mais básicos, e ele é 
	  requerido em todos os sites espelhos que oferecem
	  acesso público às distribuições
	  via FTP.  O acesso ao FTP deve ser anônimo, e não
	  é permitido o uso de nenhum controle nas taxas de
	  upload/download (o que seria uma coisa ridícula de
	  qualquer maneira).  Não é necessário
	  ter o upload de arquivos habilitado (e isso
	  <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">nunca</emphasis> deve ser permitido na área
	  onde os arquivos do FreeBSD são mantidos).  Os
	  arquivos do FreeBSD devem ficar disponíveis sob o
	  caminho <filename xmlns:xlink="http://www.w3.org/1999/xlink">/pub/FreeBSD</filename>.</para>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">Existem diversos softwares disponíveis os quais
	  podem ser configurados para operar como um servidor de FTP
	  anônimo.  Por exemplo (em ordem
	  alfabética).</para> 
          <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	      <para xmlns:xlink="http://www.w3.org/1999/xlink"><command xmlns:xlink="http://www.w3.org/1999/xlink">/usr/libexec/ftpd</command>: Este 
		é o servidor de FTP nativo do FreeBSD.
		Certifique-se de ler o <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">ftpd</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>.</para>
            </listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
              <para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/ncftpd</package>: Um
		pacote comercial, gratuito para uso com fins
		educacionais.</para>
            </listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
              <para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/oftpd</package>: Um
		servidor de FTP desenvolvido tendo a segurança
		como seu foco principal.</para>
            </listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
              <para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/proftpd</package>: 
		Um servidor FTP modular e muito
		flexível.</para>
            </listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
              <para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/pure-ftpd</package>:
		Outro servidor de FTP desenvolvido tendo a
		segurança em mente.</para>
            </listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	      <para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/twoftpd</package>: 
		Mais um servidor desenvolvido com foco em
		segurança.</para>
	    </listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	      <para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/vsftpd</package>: 
		Um ftpd <quote xmlns:xlink="http://www.w3.org/1999/xlink">muito seguro</quote>.</para>
	    </listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
              <para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/wu-ftpd</package>: 
		O ftpd da universidade de Washington.  Ele se tornou
		impopular, por causa da enorme quantidade de problemas
		de segurança que foram descobertos nele.  Se
		você optar por utilizar este software,
		certifique-se de mantê-lo atualizado.</para>
            </listitem>
          </itemizedlist>

          <para xmlns:xlink="http://www.w3.org/1999/xlink">O <application xmlns:xlink="http://www.w3.org/1999/xlink">ftpd</application> nativo do FreeBSD, o
	    <application xmlns:xlink="http://www.w3.org/1999/xlink">proftpd</application>, o
	    <application xmlns:xlink="http://www.w3.org/1999/xlink">wu-ftpd</application> e talvez o
	    <application xmlns:xlink="http://www.w3.org/1999/xlink">ncftpd</application> são alguns dos
	    servidores de FTP mais comumente utilizados.  Os demais
	    não possuem uma grande base de usuários
	    entre os sites espelhos.  Um item a ser considerado
	    é que você pode precisar de flexibilidade
	    para controlar quantas conexões simultâneas
	    serão permitidas no servidor, limitando desta forma
	    o consumo do seu link IP e dos demais recursos do
	    sistema.</para>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-serv-rsync">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">Rsync (opcional para o conjunto de arquivos 
	  do FTP)</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">O <application xmlns:xlink="http://www.w3.org/1999/xlink">Rsync</application> é muitas vezes
	  oferecido para acesso ao conteúdo da área de
	  FTP de um site espelho do FreeBSD, desta forma outros sites
	  espelhos podem utilizar o seu sistema como fonte para se
	  espelhar.  O protocolo do rsync é diferente do FTP em
	  muitos aspectos.  Ele é muito mais amigável em
	  relação ao consumo de banda IP, uma vez que
	  quando um arquivo é alterado ao invés de
	  transferí-lo por completo novamente, ele transfere
	  apenas as diferenças entre as duas versões do
	  arquivo.  O <application xmlns:xlink="http://www.w3.org/1999/xlink">Rsync</application> requer uma
	  grande quantidade de memória para cada
	  instância.  A quantidade de memória alocada
	  depende do tamanho do modulo sincronizado em termos do
	  número de diretórios e de arquivos.  O
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">Rsync</application> pode utilizar o
	  <command xmlns:xlink="http://www.w3.org/1999/xlink">rsh</command> e o <command xmlns:xlink="http://www.w3.org/1999/xlink">ssh</command> (que agora
	  é padrão) para transporte dos dados, ou
	  então utilizar o seu próprio protocolo para
	  acesso stand-alone (este é o método preferido
	  para um servidor público de
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">Rsync</application>).  Obrigatoriedade de
	  autenticação, limites ao número de
	  conexões simultâneas e outras restrições
	  podem ser aplicadas.  Há apenas um pacote de software
	  disponível para se implementar um servidor de
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">Rsync</application>:</para>

          <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	      <para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">net/rsync</package>
		</para></listitem>
          </itemizedlist>
      </sect3>
      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-serv-http">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">HTTP (necessário para as páginas web, 
	  opcional para o conjunto de arquivos do FTP)</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">Se você deseja disponibilizar as páginas 
	  web do FreeBSD, você vai precisar instalar um 
	  servidor web.  Opcionalmente você poderá oferecer 
	  acesso a sua árvore de FTP via HTTP.  A escolha do 
	  software do servidor web é uma escolha do 
	  administrador do site espelho.  As opções 
	  mais populares são:</para>
          <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
              <para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">www/apache22</package>:
		O <application xmlns:xlink="http://www.w3.org/1999/xlink">Apache</application> é o
		servidor web mais amplamente utilizado na internet.
		Ele é usado extensivamente pelo projeto
		FreeBSD.</para>
            </listitem>

            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
              <para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">www/thttpd</package>:
		Se você for servir uma grande quantidade de
		conteúdo estático, você pode
		constatar que o uso de uma aplicação
		como o thttpd é mais eficiente do que o uso do
		<application xmlns:xlink="http://www.w3.org/1999/xlink">Apache</application>.  Ele está 
		otimizado para operar sob a máxima performance
		no FreeBSD.</para>
	    </listitem>

            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
              <para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">www/boa</package>:
		O <application xmlns:xlink="http://www.w3.org/1999/xlink">Boa</application> é uma outra
		alternativa ao <application xmlns:xlink="http://www.w3.org/1999/xlink">thttpd</application> e ao
		<application xmlns:xlink="http://www.w3.org/1999/xlink">Apache</application>.  Ele deve prover
		uma performance consideravelmente melhor que a do
		Apache para conteúdos puramente
		estáticos.  Ele não possui, pelo menos
		até o momento em que esse artigo está
		sendo escrito, o mesmo conjunto de
		otimizações para o ambiente FreeBSD que
		encontramos disponíveis no
		<application xmlns:xlink="http://www.w3.org/1999/xlink">thttpd</application>.</para>
            </listitem>
          </itemizedlist>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-serv-cvsup">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">CVSup (desejado para repositórios CVS)</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">O <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application> é um meio 
	  muito eficiente de distribuição de arquivos. 
	  Ele trabalha de forma semelhante ao
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">rsync</application>, mas foi especialmente
	  projetado para uso com repositórios CVS.  Se
	  você deseja disponibilizar o repositório CVS do
	  FreeBSD, você deve considerar seriamente fazê-lo
	  via <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application>.  É
	  possível oferecer acesso a um repositório CVS
	  via <application xmlns:xlink="http://www.w3.org/1999/xlink">AnonCVS</application>, FTP,
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">rsync</application> ou HTTP, mas as pessoas
	  vão se beneficiar muito mais de um acesso via
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application>.  O
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application> foi desenvolvido pelo
	  John Polstra.  É um pouco complicado instalá-lo em
	  uma plataforma diferente do FreeBSD, uma vez que ele foi
	  escrito em Modula-3 e consequentemente necessita de um
	  ambiente Modula-3 disponível.  O John Polstra preparou
	  uma versão simplificada do M3 a qual é
	  suficiente para executar o <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application>,
	  e que pode ser facilmente instalada.  Consulte <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.polstra.com/projects/freeware/ezm3/">Ezm3</link>
	  para maiores detalhes.  Os ports relacionados
	  são:</para>

          <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
              <para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">net/cvsup</package>: 
		O port nativo do CVSup (cliente e servidor) o qual
		requer a instalalação do <package xmlns:xlink="http://www.w3.org/1999/xlink">lang/ezm3</package>.</para>
            </listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
              <para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">net/cvsup-mirror</package>: 
		O kit de espelhamento do CVSup, o qual requer o
		<package xmlns:xlink="http://www.w3.org/1999/xlink">net/cvsup-without-gui</package>, e que
		o configura para atuar no espelhamento dos
		serviços.  Alguns administradores podem preferir
		utilizar uma forma diferente de configurar um site
		espelho.</para>
            </listitem>
          </itemizedlist>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Existem alguns outros, como o <package xmlns:xlink="http://www.w3.org/1999/xlink">net/cvsup-without-gui</package> o qual
	  você pode desejar olhar.  Se você preferir um
	  pacote binário, compilado estaticamente, de uma
	  olhada <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://people.FreeBSD.org/~jdp/s1g/">aqui</link>.
	  Esta página continua mencionando o erro SG1, o qual
	  esteve presente no <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application>.  Talvez
	  o John venha a criar no futuro um site genérico para
	  download de binários estáticos para
	  várias plataformas.</para>
	
        <para xmlns:xlink="http://www.w3.org/1999/xlink">É possível utilizar o
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application> para disponibilizar
	  qualquer tipo de arquivo, e não apenas
	  repositórios CVS, mas a configuração
	  pode ser complexa.  O <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application>
	  é conhecido por consumir um pouco de CPU tanto no
	  servidor quanto no cliente, uma vez que ele precisa comparar
	  muitos arquivos.</para>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-anoncvs">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">AnonCVS (Opcional para reposittórios 
	  CVS)</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">Se você possui o repositório CVS, 
	  você pode desejar disponibilizá-lo via cvs 
	  anônimo.  Um pequeno aviso antes: Não existe 
	  muita demanda para este tipo de acesso, ele requer alguma 
	  experiência, e você precisa saber o que 
	  está fazendo.</para>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">Geralmente há duas formas de se acessar um
	  repositório CVS remotamente: via
	  <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">pserver</emphasis> ou via <command xmlns:xlink="http://www.w3.org/1999/xlink">ssh</command>
	  (nós não consideramos o
	  <command xmlns:xlink="http://www.w3.org/1999/xlink">rsh</command>).  Para acesso anônimo, o uso
	  do <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">pserver</emphasis> é bastante adequado,
	  mas alguns optam por também oferecer acesso via
	  <command xmlns:xlink="http://www.w3.org/1999/xlink">ssh</command>.  Existe um <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="ftp://ftp.FreeBSD.org/pub/FreeBSD/development/FreeBSD-CVS/anoncvs.shar">wrapper</link>
	  customizado no repositório CVS, para ser utilizado
	  como shell para uma conta anônima de ssh.  Ele faz um
	  chroot, e portanto requer que o repositório CVS
	  esteja disponível no diretório home do
	  usuário anônimo.  Isto pode não ser
	  possível para todos os sites.  Se você for
	  oferecer apenas acesso via <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">pserver</emphasis>,
	  esta restrição não se aplica, mas
	  você pode ficar sujeito a um risco maior de
	  segurança.  Você não precisa instalar
	  nenhum software especial, uma vez que o <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">cvs</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">1</manvolnum></citerefentry> vem por
	  padrão na instalação básica do
	  FreeBSD.  Você precisa habilitar o acesso
	  através do <command xmlns:xlink="http://www.w3.org/1999/xlink">inetd</command>, para isto basta
	  adicionar uma entrada ao seu
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/inetd.conf</filename> semelhante a
	  esta:</para>

          <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">
cvspserver stream tcp nowait root /usr/bin/cvs cvs -f -l -R -T /anoncvstmp --allow-root=/home/ncvs pserver
          </programlisting>

          <para xmlns:xlink="http://www.w3.org/1999/xlink">Consulte o manual para detalhes das 
	    opções.  Consulte também a 
	    página de <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">info</emphasis> do CVS sobre 
	    formas adicionais de certificar-se de que o acesso ao 
	    repositório está configurado apenas para 
	    leitura.  Recomenda-se que você crie uma conta 
	    não privilegiada, preferencialmente chamada 
	    <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="username">anoncvs</systemitem>.
	    Você também precisa criar um arquivo
	    <filename xmlns:xlink="http://www.w3.org/1999/xlink">passwd</filename> no seu
	    <filename xmlns:xlink="http://www.w3.org/1999/xlink">/home/ncvs/CVSROOT</filename> e atribuir um
	    password (em branco ou anoncvs) para acesso deste
	    usuário ao CVS.  O diretório
	    <filename xmlns:xlink="http://www.w3.org/1999/xlink">/anoncvstmp</filename> é um sistema de
	    arquivo baseado em memória que tem um
	    propósito especial.  Ele não é
	    obrigatório mas seu uso é recomendado, uma
	    vez que o <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">cvs</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">1</manvolnum></citerefentry> cria uma estrutura de
	    diretórios ocultos no seu <filename xmlns:xlink="http://www.w3.org/1999/xlink">/tmp</filename>
	    a qual não é utilizada depois da
	    operação, mas que deixa as coisas
	    dramaticamente lentas se forem necessárias
	    operações reais de escrita e leitura para o
	    disco.  Aqui está um exemplo de configuração no
	    <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/fstab</filename>, de como configurar um
	    MFS:</para>
	  
          <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">
/dev/da0s1b /anoncvstmp mfs rw,-s=786432,-b=4096,-f=512,-i=560,-c=3,-m=0,nosuid 0 0
          </programlisting>

          <para xmlns:xlink="http://www.w3.org/1999/xlink">Esta é (naturalmente) uma sintaxe otimizada ao
	    máximo, e foi sugerida pelo John Polstra.</para>
      </sect3>
   </sect2>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-howto">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Como espelhar o FreeBSD</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Ok, agora você conhece os requisitos e sabe como oferecer
      os serviços, mas não sabe como começar. :-)
      Esta sessão explica como realizar realmente o
      espelhamento de várias partes do FreeBSD, que ferramentas
      utilizar e a partir de onde espelhar.</para>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-ftp">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">FTP</title>
      <para xmlns:xlink="http://www.w3.org/1999/xlink">A área de FTP representa o maior volume de dados a
	serem espelhados.  Ele inclui os <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">conjuntos de
	distribuição</emphasis> os quais são
	requeridos para as instalações via rede, os
	ramos (<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">branches</emphasis>) do sistema dos quais se
	tira snapshots a partir da árvore de código
	fonte, as <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">imagens ISO</emphasis> para gravar CDs de
	instalação do sistema, um sistema de arquivos
	vivo, a árvore do ports, os distifiles (código
	fonte necessários para compilar o ports) e uma
	quantidade enorme de pacotes.  Tudo, é claro, para as
	várias versões do FreeBSD, e para as
	várias arquiteturas.</para>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-ftp-ftp">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">Espelhando com FTP</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">Você pode utilizar um aplicativo de espelhamento
	  de FTP para obter os arquivos.  Alguns dos mais utilizados
	  são:</para>
          <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink"><para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/mirror</package></para></listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink"><para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/ftpmirror</package></para></listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink"><para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/emirror</package></para></listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink"><para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/spegla</package></para></listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink"><para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/omi</package></para></listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink"><para xmlns:xlink="http://www.w3.org/1999/xlink"><package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/wget</package></para></listitem>
          </itemizedlist>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">O <package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/mirror</package> era 
	  muito popular, mas parece ter alguns inconvenientes, como
	  ele está escrito em <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">perl</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">1</manvolnum></citerefentry> ele possui alguns
	  problemas reais para espelhar grandes diretórios
	  como os de um site espelho do FreeBSD.  Existem rumores de
	  que a versão atual corrigiu isso ao permitir que
	  seja especificado um algoritmo diferente para comparar a
	  estrutura de diretórios.</para>
	  
        <para xmlns:xlink="http://www.w3.org/1999/xlink">Em geral o FTP não é muito bom para 
	  tarefas de espelhamento.  Ele transfere o arquivo inteiro 
	  se o mesmo for alterado, e não cria um fluxo 
	  único de dados do qual ele se beneficiaria no caso 
	  de ocorrer uma grande janela de congestionamento TCP.</para>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-ftp-rsync">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">Espelhando com o Rsync</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">A melhor forma de espelhar a área FTP é
	  através do uso do <application xmlns:xlink="http://www.w3.org/1999/xlink">rsync</application>.
	  Você pode instalar o port <package xmlns:xlink="http://www.w3.org/1999/xlink">net/rsync</package> e então
	  utilizá-lo para sincronizar com o seu servidor de
	  <literal xmlns:xlink="http://www.w3.org/1999/xlink">upstream</literal>.  O
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">rsync</application> já foi mencionado na
	  <xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="mirror-serv-rsync"/>.  Uma vez que a
	  disponibilização de acesso via
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">rsync</application> não é
	  obrigatória, o seu site preferido de
	  <literal xmlns:xlink="http://www.w3.org/1999/xlink">upstream</literal> pode não disponibilizá-lo.  
	  Você pode precisar gastar algum tempo procurando até 
	  encontrar um servidor que permita o acesso via
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">rsync</application>.</para>

          <note xmlns:xlink="http://www.w3.org/1999/xlink">
            <para xmlns:xlink="http://www.w3.org/1999/xlink">Uma vez que o número de clientes
	      <application xmlns:xlink="http://www.w3.org/1999/xlink">rsync</application> gera um impacto
	      significativo no servidor, muitos administradores
	      definem limites para o número de acessos
	      simultâneos aos seus servidores.  Você deve
	      consultar o responsável pelo servidor de
	      <literal xmlns:xlink="http://www.w3.org/1999/xlink">upstream</literal> que você está
	      utilizando, sobre as regras do servidor, e sobre a
	      possibilidade dele abrir uma exceção para o seu
	      servidor (uma vez que você é um site
	      espelho).</para>
          </note>

          <para xmlns:xlink="http://www.w3.org/1999/xlink">A linha de comando para espelhar o FreeBSD será
	    parecida com esta:</para>

          <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">%</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">rsync -vaz --delete ftp4.de.FreeBSD.org::FreeBSD/ /pub/FreeBSD/</userinput>
          </screen>

          <para xmlns:xlink="http://www.w3.org/1999/xlink">Consulte a documentação do
	    <application xmlns:xlink="http://www.w3.org/1999/xlink">rsync</application>, a qual está
	    disponível em <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://rsync.samba.org/">http://rsync.samba.org/</link>,
	    para conhecer as várias opções que
	    podem ser utilizadas com o
	    <application xmlns:xlink="http://www.w3.org/1999/xlink">rsync</application>.  Se você
	    sincronizar o módulo inteiro (ao contrário
	    de apenas alguns subdiretórios), esteja ciente de
	    que o módulo-diretório (normalmente
	    "FreeBSD") não será criado, de forma que
	    você não deve omitir o diretório alvo.
	    Além disso, você pode desejar criar um script
	    de trabalho para ser executado pelo <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">cron</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>, para
	    automatizar o processo de espelhamento.</para>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-ftp-cvsup">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">Espelhando com o CVSup</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">Alguns sites, incluindo o <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="fqdomainname">ftp-master.FreeBSD.org</systemitem> 
	  oferecem acesso via <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application> para
	  espelhamento do conteúdo da área de FTP.
	  Você precisa instalar um cliente
	  <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application>, preferencialmente a partir
	  do port <package xmlns:xlink="http://www.w3.org/1999/xlink">net/cvsup</package>.
	  (consulte também a <xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="mirror-serv-cvsup"/>).  Abaixo você encontra um
	  exemplo de arquivo <filename xmlns:xlink="http://www.w3.org/1999/xlink">supfile</filename> pronto para
	  uso com o
	  <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="fqdomainname">ftp-master.FreeBSD.org</systemitem>:</para>

          <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">
          #
          # FreeBSD archive supfile from master server
          #
          *default host=ftp-master.FreeBSD.org
          *default base=/usr
          *default prefix=/pub
          #*default release=all
          *default delete use-rel-suffix
          *default umask=002

          # If your network link is a T1 or faster, comment out the following line.
          #*default compress

          FreeBSD-archive release=all preserve
          </programlisting>

          <para xmlns:xlink="http://www.w3.org/1999/xlink">Ao que parece o <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application> 
	    seria a melhor opção para espelhar os arquivos em 
	    termos eficiência, mas infelizmente ele só 
	    está disponível em alguns poucos
	    sites.</para>

          <note xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-cvsup-s-option">
            <para xmlns:xlink="http://www.w3.org/1999/xlink">Por favor, consulte a documentação do
	      <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application>, como por exemplo a
	      <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" vendor="ports"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">cvsup</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">1</manvolnum></citerefentry> e considere o uso da opção
	      <option xmlns:xlink="http://www.w3.org/1999/xlink">-s</option>.  Esta opção reduz as
	      operações de leitura e escrita para o seu
	      disco rígido, assumindo que as
	      informações gravadas sobre cada arquivo
	      estão corretas.</para>
          </note>
      </sect3>
    </sect2>
    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-cvs">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Espelhando o repositório CVS</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Existem várias formas de se espelhar o
	repositório CVS.  O <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application> 
	é o método mais comum.</para>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-cvs-cvsup">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">Usando o CVSup</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">O <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application> foi descrito com 
	  algum detalhe na <xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="mirror-serv-cvsup"/> e na 
	  <xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="mirror-ftp-cvsup"/>.</para> 
	  
        <para xmlns:xlink="http://www.w3.org/1999/xlink">É muito fácil configurar um site espelho
	  com o <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application>.  Basta instalar o 
	  port <package xmlns:xlink="http://www.w3.org/1999/xlink">net/cvsup-mirror</package>
	  para que você tenha todos os programas
	  necessários instalados, e para que todas as 
	  informações necessárias para a
	  configuração do site espelho sejam
	  coletadas.</para>
	
        <note xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">Por favor não se esqueça de avaliar a
	    sugestão mencionada na <link xmlns:xlink="http://www.w3.org/1999/xlink" linkend="mirror-cvsup-s-option">nota acima</link></para>
        </note>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-cvs-other">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">Utilizando outros métodos</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">A utilização de outros métodos que
	  não o <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application> geralmente
	  não é recomendada.  De qualquer forma,
	  nós vamos descrevê-los rapidamente aqui.  Uma
	  vez que a maioria dos sites oferece o repositório
	  CVS como parte da área de FTP, sob o caminho
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">/pub/FreeBSD/development/FreeBSD-CVS</filename>,
	  os seguintes métodos podem ser utilizados:</para>

          <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	      <para xmlns:xlink="http://www.w3.org/1999/xlink"><application xmlns:xlink="http://www.w3.org/1999/xlink">FTP</application></para>
	    </listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	      <para xmlns:xlink="http://www.w3.org/1999/xlink"><application xmlns:xlink="http://www.w3.org/1999/xlink">Rsync</application></para>
	    </listitem>
            <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	      <para xmlns:xlink="http://www.w3.org/1999/xlink"><application xmlns:xlink="http://www.w3.org/1999/xlink">HTTP</application></para>
	    </listitem>
          </itemizedlist>

          <important xmlns:xlink="http://www.w3.org/1999/xlink">
            <para xmlns:xlink="http://www.w3.org/1999/xlink">O <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">AnonCVS</emphasis> não pode ser
	      utilizado para espelhar o repositório CVS, uma
	      vez que o CVS não permite que você acesse o
	      próprio repositório em si (arquivos ",v"),
	      permitindo o acesso somente as versões limpas dos
	      módulos.</para>
          </important>
      </sect3>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-www">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Espelhando as páginas WWW</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">A melhor forma é realizar um <quote xmlns:xlink="http://www.w3.org/1999/xlink"><literal xmlns:xlink="http://www.w3.org/1999/xlink">check
	out</literal></quote> da distribuição www do
	servidor de CVS.  Se você tem um mirror local do
	repositório CVS, isto será tão simples
	quanto executar:</para>

        <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">%</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cvs -d /home/ncvs co www</userinput></screen>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">e agendar uma tarefa no <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">cron</emphasis>, 
	que execute periodicamente o comando 
	<command xmlns:xlink="http://www.w3.org/1999/xlink">cvs up -d -P</command>,  imediatamente
	após a execução do processo que atualiza
	o seu repositório.  É claro que os arquivos
	precisam ser colocados em um diretório disponível para
	acesso público via WWW.  A instalação e
	configuração de um servidor web não
	serão abordadas neste artigo.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Se você não tem um repositório local,
	você pode utilizar o <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application>
	para manter uma <quote xmlns:xlink="http://www.w3.org/1999/xlink">cópia atualizada</quote> das
	páginas www.  Um supfile de exemplo para esta tarefa
	pode ser encontrado em
	<filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/share/examples/cvsup/www-supfile</filename>, o
	qual irá se parecer com isto:</para>

        <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">
        #
        # WWW module supfile for FreeBSD
        #
        *default host=cvsup3.de.FreeBSD.org
        *default base=/usr
        *default prefix=/usr/local
        *default release=cvs tag=.
        *default delete use-rel-suffix

        # If your network link is a T1 or faster, comment out the following line.
        *default compress

        # This collection retrieves the www/ tree of the FreeBSD repository
        www
        </programlisting>

     <para xmlns:xlink="http://www.w3.org/1999/xlink">A utilização do <package xmlns:xlink="http://www.w3.org/1999/xlink">ftp/wget</package> ou de outras ferramentas
	de espelhamento web (<literal xmlns:xlink="http://www.w3.org/1999/xlink">web-mirror</literal>) 
	não é recomendado.</para>

     <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-www-doc">
       <title xmlns:xlink="http://www.w3.org/1999/xlink">Espelhando a documentação do FreeBSD</title>

       <para xmlns:xlink="http://www.w3.org/1999/xlink">Uma vez que a documentação é referenciada em diversas 
	 páginas web, é recomendado que você também espelhe a 
	 documentação do FreeBSD.  No entanto, isto não é tão 
	 trivial quanto o espelhamento das páginas www 
	 isoladamente.</para>
       
       <para xmlns:xlink="http://www.w3.org/1999/xlink">Em primeiro lugar, você deve obter os fontes da
	 documentação, e recomendamos que você faça isso 
	 preferencialmente via <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application>.  
	 Aqui está um exemplo de supfile para esta tarefa:</para>

         <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">
         #
         # FreeBSD documentation supfile
         #
         *default host=cvsup3.de.FreeBSD.org
         *default base=/usr
         *default prefix=/usr/share
         *default release=cvs tag=.
         *default delete use-rel-suffix

         # If your network link is a T1 or faster, comment out the following line.
         #*default compress

         # This will retrieve the entire doc branch of the FreeBSD repository.
         # This includes the handbook, FAQ, and translations thereof.
         doc-all
         </programlisting>

       <para xmlns:xlink="http://www.w3.org/1999/xlink">Então você precisará instalar alguns
	 ports.  Mas você está com sorte pois existe um
	 meta-port, o <package xmlns:xlink="http://www.w3.org/1999/xlink">textproc/docproj</package>, para fazer o
	 trabalho por você.  Você precisa configurar
	 algumas variáveis de ambiente, como por exemplo
	 <literal xmlns:xlink="http://www.w3.org/1999/xlink">SGML_CATALOG_FILES</literal>.  Também de uma
	 olhada no seu <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/make.conf</filename>
	 (faça uma cópia do
	 <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/share/examples/etc/make.conf</filename> se
	 você não possuir um), e verifique a
	 variável <literal xmlns:xlink="http://www.w3.org/1999/xlink">DOC_LANG</literal>.  Agora
	 você provavelmente já está pronto para
	 executar o comando <command xmlns:xlink="http://www.w3.org/1999/xlink">make</command> dentro do
	 diretório com os fontes da documentação
	 (<filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/share/doc</filename> por padrão) para
	 construí-la.  De novo, você precisa tornar os arquivos 
	 acessíveis através do seu servidor web, certificando-se de 
	 que os links apontam para o local correto.</para>
         
	 <important xmlns:xlink="http://www.w3.org/1999/xlink">
           <para xmlns:xlink="http://www.w3.org/1999/xlink">A construção da documentação, assim como as diversas 
	    tarefas associadas ao processo, estão documentadas
	    no <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/fdp-primer">FreeBSD Documentation
	    Project Primer</link>.  Por favor, leia este documento,
	    especialmente se você está tendo problemas
	    para construir a documentação.</para>
         </important>
     </sect3>
   </sect2>

   <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-how-often">
     <title xmlns:xlink="http://www.w3.org/1999/xlink">Com que frequência devo espelhar?</title>

     <para xmlns:xlink="http://www.w3.org/1999/xlink">Todo site espelho deve ser atualizado regularmente.  
       Você certamente irá precisar de alguns scripts 
       para automatizar este processo de atualização 
       com a ajuda do <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">cron</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">8</manvolnum></citerefentry>.  Uma vez que praticamente cada
       administrador implementa este procedimento do seu
       próprio jeito, nós não temos como fornecer
       instruções específicas de como proceder.
       O processo poderia ser resumido em:</para>

     <procedure xmlns:xlink="http://www.w3.org/1999/xlink">
       <step xmlns:xlink="http://www.w3.org/1999/xlink">
         <para xmlns:xlink="http://www.w3.org/1999/xlink">Coloque o comando para executar a sua
	   aplicação de espelhamento em um script.  O
	   uso de um script simples em <command xmlns:xlink="http://www.w3.org/1999/xlink">/bin/sh</command>
	   é recomendado.</para>
       </step>
       <step xmlns:xlink="http://www.w3.org/1999/xlink">
         <para xmlns:xlink="http://www.w3.org/1999/xlink">Adicione alguns redirecionamentos para arquivo das
	   mensagens dos programas, de forma que possa usar o mesmo 
	   com a finalidade de diagnóstico de problemas.</para>
       </step>
       <step xmlns:xlink="http://www.w3.org/1999/xlink">
         <para xmlns:xlink="http://www.w3.org/1999/xlink">Teste se o seu script funciona.  Verifique o arquivo de
	   log.</para>
       </step>
       <step xmlns:xlink="http://www.w3.org/1999/xlink">
         <para xmlns:xlink="http://www.w3.org/1999/xlink">Utilize o <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">crontab</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">1</manvolnum></citerefentry> para adicionar o script ao
	   <citerefentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><refentrytitle xmlns:xlink="http://www.w3.org/1999/xlink">crontab</refentrytitle><manvolnum xmlns:xlink="http://www.w3.org/1999/xlink">5</manvolnum></citerefentry> do usuário apropriado.  O qual deve
	   ser um usuário diferente do usuário sob o
	   qual o servidor de FTP é executado, desta forma
	   não será permitido o acesso via FTP
	   anônimo aos arquivos presentes na área de FTP,
	   os quais não possuam permissões que
	   possibilitem a leitura por todos os demais usuários.
	   Isto é utilizado para a fase de <quote xmlns:xlink="http://www.w3.org/1999/xlink">stage</quote>
	   das novas distribuições &#8212; garantindo
	   que todos os sites espelhos oficiais possuam todos os
	   arquivos necessários de uma
	   distribuição, no dia em que a mesma é
	   liberada.</para>
       </step>
     </procedure>

     <para xmlns:xlink="http://www.w3.org/1999/xlink">Aqui estão alguns exemplos da periodicidade
       recomendada para atualização de um site
       espelho:</para>

       <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
         <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	   <para xmlns:xlink="http://www.w3.org/1999/xlink">Conjunto de arquivos do FTP: diária</para>
	 </listitem>
         <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	   <para xmlns:xlink="http://www.w3.org/1999/xlink">Repositório CVS: horária</para>
	 </listitem>
         <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	   <para xmlns:xlink="http://www.w3.org/1999/xlink">Páginas WWW: diária</para>
	 </listitem>
       </itemizedlist>
   </sect2>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-where">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">De onde espelhar</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Esta é uma questão importante.  Portanto, esta
      seção irá gastar algum esforço para
      explicá-la.  Vamos dizer isso várias vezes: em
      nenhuma circunstância você deve espelhar a partir do
      <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="fqdomainname">ftp.FreeBSD.org</systemitem>.</para>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-where-organization">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Algumas palavras sobre a 
	organização</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Os sites espelhos são organizados por país.
	Todos os sites espelhos oficiais possuem uma entrada de DNS no
	formato <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="fqdomainname">ftpN.CC.FreeBSD.org</systemitem>.  No
	qual <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">CC</emphasis> (i.e. código do
	país / country code) é o <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">domínio de
	primeiro nível</emphasis> (TLD) do país no qual
	o site espelho está localizado.  O
	<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">N</emphasis> é um número, o qual diz
	que o servidor é o de número
	<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">N</emphasis> naquele país.  (o mesmo se
	aplica para <systemitem xmlns:xlink="http://www.w3.org/1999/xlink">cvsupN.CC.FreeBSD.org</systemitem>,
	<systemitem xmlns:xlink="http://www.w3.org/1999/xlink">wwwN.CC.FreeBSD.org</systemitem>, etc.)  Existem sites
	espelho que não possuem os componentes
	<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">CC</emphasis> em suas entradas de DNS.  Estes
	são os sites espelhos que estão muito bem
	conectados e que permitem um grande número de
	usuários simultâneos.  O <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="fqdomainname">ftp.FreeBSD.org</systemitem> é composto
	atualmente por 2 servidores, um está localizado a
	Dinamarca e o outro nos Estados Unidos.  Ele
	<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">NÃO</emphasis> é um site mestre e
	não deve nunca ser utilizado como servidor de upstream
	para o seu espelhamento.  Um grande número de
	documentos online conduzem de forma interativa o
	usuário para <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="fqdomainname">ftp.FreeBSD.org</systemitem>, de forma que os sistemas
	de espelhamento automático devem buscar um servidor
	diferente para usar como fonte.</para>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Adicionalmente existe uma hierarquia para os sites 
	espelhos, a qual é descrita em termos de níveis
	(<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">tiers</emphasis>).  Os sites mestres não
	são referenciados, mas eles poderiam ser descritos como
	sendo um <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Tier-0</emphasis>.  Os sites espelhos
	construídos a partir destes servidores podem ser 
	considerados <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Tier-1</emphasis>, os espelhos dos
	espelhos-<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Tier-1</emphasis> são considerados
	<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Tier-2</emphasis>, etc.  Os sites oficiais
	são encorajados a serem um <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">tier</emphasis>
	baixo, porém quanto mais baixo o
	<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">tier</emphasis>, maiores as exigências nos
	termos descritos na <xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="mirror-requirements"/>.  O
	acesso aos sites espelhos de baixo <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">tier</emphasis>
	pode ser restito, e o acesso aos sites mestres é
	definitivamente restrito.  A hierarquia de
	<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">tier</emphasis> não é refletida pelo
	DNS, e geralmente não é documentada em nenhum
	lugar exceto para os sites mestres.  Entretanto, os sites
	espelhos oficiais com números baixos, de 1 a 4,
	normalmente são <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Tier-1</emphasis> (esta
	é apenas uma sugestão aproximada, pois
	não existe uma regra).</para>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-where-where">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Ok, mas de onde eu devo obter o material agora?</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Sob nenhuma circunstância você deve espelhar 
	o seu servidor a partir do <systemitem xmlns:xlink="http://www.w3.org/1999/xlink" class="fqdomainname">ftp.FreeBSD.org</systemitem>.  A resposta curta
	é: A partir do site que for mais próximo de
	você em termos de saltos na internet, ou então do
	que lhe disponibilizar o acesso mais rápido.</para>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-where-simple">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">Eu quero apenas espelhar a partir de algum
	  lugar!</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">Se você não possui nenhuma intenção ou necessidade 
	  especial, as instruções da 
	  <xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="mirror-where-where"/> se aplicam.  Isso
	  significa:</para>
        <procedure xmlns:xlink="http://www.w3.org/1999/xlink">
          <step xmlns:xlink="http://www.w3.org/1999/xlink">
            <para xmlns:xlink="http://www.w3.org/1999/xlink">Verifique os sites espelhos disponíveis no
	      seu país.  O <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://mirrorlist.FreeBSD.org/">Banco de dados de
	      sites espelho do FreeBSD</link> pode ajudá-lo
	      neste processo.</para>
          </step>
          <step xmlns:xlink="http://www.w3.org/1999/xlink">
            <para xmlns:xlink="http://www.w3.org/1999/xlink">Verifique qual deles disponibiliza o acesso mais
	      rápido (número de saltos, tempo de
	      latência, etc.) e que oferece os serviços
	      que você planeja utilizar (tal como
	      <application xmlns:xlink="http://www.w3.org/1999/xlink">rsync</application> ou
	      <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application>).</para>
          </step>
          <step xmlns:xlink="http://www.w3.org/1999/xlink">
            <para xmlns:xlink="http://www.w3.org/1999/xlink">Entre em contato com o administrador do site que
	      você escolheu, mencione sua intenção
	      e pergunte sobre os termos e regras para uso do 
	      servidor.</para>
          </step>
          <step xmlns:xlink="http://www.w3.org/1999/xlink">
            <para xmlns:xlink="http://www.w3.org/1999/xlink">Configure o seu site espelho como foi descrito
	      anteriormente.</para>
          </step>
        </procedure>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-where-official">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">Eu sou um site espelho oficial, qual é o site
	  correto para mim?</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">Em geral a orientação da 
	  <xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="mirror-where-simple"/> continua válida.
	  É claro que você pode querer colocar algum peso
	  sobre o fato de que o seu site de upstream deveria ser um
	  servidor de <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">tier</emphasis> baixo.  Existem
	  algumas outras considerações sobre sites
	  espelhos <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">oficiais</emphasis> que estão
	  descritos na <xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="mirror-official"/>.</para>
      </sect3>

      <sect3 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-where-master">
        <title xmlns:xlink="http://www.w3.org/1999/xlink">Eu quero acessar um site mestre!</title>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">Se você tem boas razões e bons
	  pré-requisitos, você pode querer e ter acesso a
	  um dos servidores mestres.  O acesso a estes sites
	  geralmente é restrito e existem regras especiais para o 
	  acesso.  Se você já é um site espelho
	  <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">oficial</emphasis>, isto certamente irá
	  ajudá-lo a conseguir o acesso.  Em qualquer outro
	  caso,  certifique-se de que o seu país realmente
	  necessita de outro site espelho.  Se ele já possui 3
	  ou mais, pergunte ao <quote xmlns:xlink="http://www.w3.org/1999/xlink">administrador da zona</quote>
	  (<email xmlns:xlink="http://www.w3.org/1999/xlink">hostmaster@CC.FreeBSD.org</email>) ou primeiro na
	  <link xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs">lista de discussão
  sobre sites espelhos do FreeBSD</link>.</para>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Quem o ajudou a se tornar um site espelho
	  <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">oficial</emphasis>, deveria tê-lo ajudado a
	  ganhar acesso a um servidor apropriado de upstream, seja
	  à um dos servidores mestre ou a um servidor Tier-1
	  adequado.  Se isso não ocorreu, você pode
	  enviar um email para o endereço
	  <email xmlns:xlink="http://www.w3.org/1999/xlink">mirror-admin@FreeBSD.org</email> e solicitar ajuda
	  com isto.</para>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">Existem 3 servidores mestres para o conjunto de arquivos
	  do FTP e um para o repositório de CVS (as 
	  páginas web e os demais documentos são 
	  obtidos a partir do CVS, por isso não existe 
	  necessidade de se ter um servidor mestre para eles).</para>

        <sect4 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-where-master-ftp">
          <title xmlns:xlink="http://www.w3.org/1999/xlink">ftp-master.FreeBSD.org</title>

          <para xmlns:xlink="http://www.w3.org/1999/xlink">Este é o servidor mestre para o conjunto de 
	      arquivos do FTP.</para>

          <para xmlns:xlink="http://www.w3.org/1999/xlink">O <systemitem xmlns:xlink="http://www.w3.org/1999/xlink">ftp-master.FreeBSD.org</systemitem>
	    disponibiliza os serviços de 
	    <application xmlns:xlink="http://www.w3.org/1999/xlink">rsync</application> e de 
	    <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application>, além do
	    serviço de FTP.  Consulte a 
	    <xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="mirror-ftp-rsync"/> e a 
            <xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="mirror-ftp-cvsup"/> para maiores
	    informações sobre como acessar utilizando
	    estes protocolos.</para>
          
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Os sites espelhos são encorajados a 
	    também disponibilizarem acesso via
	    <application xmlns:xlink="http://www.w3.org/1999/xlink">rsync</application> à área de
	    FTP, desde que sejam sites
	    espelho-<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Tier-1</emphasis>.</para>
        </sect4>
	
        <sect4 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-where-master-cvsup">
          <title xmlns:xlink="http://www.w3.org/1999/xlink">cvsup-master.FreeBSD.org</title>

          <para xmlns:xlink="http://www.w3.org/1999/xlink">Este é o servidor mestre do repositório
	    de CVS.</para>
          
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">O <systemitem xmlns:xlink="http://www.w3.org/1999/xlink">cvsup-master.FreeBSD.org</systemitem>
	    disponibiliza apenas o serviço de
            <application xmlns:xlink="http://www.w3.org/1999/xlink">CVSup</application>.  Consulte a 
            <xref xmlns:xlink="http://www.w3.org/1999/xlink" linkend="mirror-cvs-cvsup"/> para maiores
	    detalhes.</para>
          
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Para obter acesso, você vai precisar entrar em
	    contato com o Coordenador de sites espelho CVSup 
  <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">cvsup-master@FreeBSD.org</email>.  Certifique-se de ter
	    lido antes as <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://people.FreeBSD.org/~jdp/cvsup-access/">Regras
	    de Acesso ao CVSup do FreeBSD</link>!</para>

          <para xmlns:xlink="http://www.w3.org/1999/xlink">Configure a autenticação
	    necessária seguindo 
	    <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://people.FreeBSD.org/~jdp/cvpasswd/">estas
	    instruções</link>.  Certifique-se de que
	    você especificou o servidor como sendo
	    <systemitem xmlns:xlink="http://www.w3.org/1999/xlink">freefall.FreeBSD.org</systemitem> na linha de comando
	    do <command xmlns:xlink="http://www.w3.org/1999/xlink">cvpasswd</command>, como descrito no documento
	    anterior, mesmo quando você estiver contatando o
	    <systemitem xmlns:xlink="http://www.w3.org/1999/xlink">cvsup-master.FreeBSD.org</systemitem>.</para>
        </sect4>
      </sect3>
    </sect2>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-official">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Sites Espelhos Oficiais</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Um site espelho oficial é um site espelho que:</para>

      <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
        <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">a) Possui uma entrada <systemitem xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD.org</systemitem> 
	    no DNS (usualmente um CNAME).</para>
        </listitem>
        <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">b) Está listado como um site espelho oficial
	    na documentação do FreeBSD (como por exemplo
	    no Handbook).</para>
        </listitem>
      </itemizedlist>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Por enquanto isto deve ser o suficiente para que 
	você possa distinguir os sites espelhos oficiais.  Os 
	sites espelhos oficiais não são necessariamente
	espelhos-<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Tier-1</emphasis>.  Entretanto, você
	provavelmente não irá encontrar um site
	espelho-<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Tier-1</emphasis>, que não seja
	oficial.</para>
      
    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-official-requirements">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Requisitos especiais para os sites espelhos oficiais
      (Tier-1)</title>

      <para xmlns:xlink="http://www.w3.org/1999/xlink">Não é assim fácil indicar
	exigências para todos os sites espelho oficiais, uma vez
	que o projeto é um tanto quanto tolerante neste ponto.
	É mais fácil dizer o que é exigido dos
	<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">sites espelhos oficiais Tier-1</emphasis>.  Todos os
	outros sites espelhos oficiais devem considerar a lista abaixo
	<emphasis xmlns:xlink="http://www.w3.org/1999/xlink">apenas como orientação</emphasis>.</para>

        <note xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">O que está descrito a seguir aplica-se 
	    basicamente à árvore de FTP, uma vez que o
	    repositório de CVS deve ser sempre espelhado
	    completamente, e as páginas web são um caso
	    à parte.</para>
        </note>
      <para xmlns:xlink="http://www.w3.org/1999/xlink">
        Os sites espelho Tier-1 devem:</para>
        <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
          <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Carregar o conjunto completo de arquivos do
	      FTP.</para>
	  </listitem>
          <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Permitir o acesso de outros sites espelho.</para>
	  </listitem> 
          <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Disponibilizar os serviços de 
	      <application xmlns:xlink="http://www.w3.org/1999/xlink">FTP</application> e de 
            <application xmlns:xlink="http://www.w3.org/1999/xlink">rsync</application></para>
	  </listitem>
        </itemizedlist>

        <para xmlns:xlink="http://www.w3.org/1999/xlink">Além disso, os administradores devem se
	  inscrever na <link xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs">lista de discussão
  sobre sites espelhos do FreeBSD</link>.  Consulte <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/eresources.html#ERESOURCES-MAIL">este link</link>
	  para maiores informações sobre como se
	  inscrever.</para>
	
	<important xmlns:xlink="http://www.w3.org/1999/xlink">
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">É <emphasis xmlns:xlink="http://www.w3.org/1999/xlink">muito importante</emphasis> para um
	    administrador de um site espelho, especialmente para os
	    administradores de um site espelho Tier-1, verificar o
	    <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.FreeBSD.org/releng/">calendário de
	    lançamento</link> da próxima versão
	    do FreeBSD.  Isto é importante porque ele
	    irá lhe dizer para quando está previsto o
	    lançamento da próxima versão, dando a
	    você tempo para se preparar para o grande pico de
	    tráfego que se segue a este tipo de evento.</para>
	  
	  <para xmlns:xlink="http://www.w3.org/1999/xlink">Também é importante para um 
	    administrador de um site espelho tentar manter o seu 
	    servidor o mais atualizado possível (de novo, 
	    isto é ainda mais crucial para os sites espelhos 
	    Tier-1).  Se os sites espelhos Tier-1 ficarem um bom 
	    tempo sem se atualizarem, os sites espelhos de tiers 
	    mais elevados vão começar a espelhar dados 
	    antigos a partir dos sites espelhos Tier-1, começando 
	    desta forma uma espiral descendente... Portanto, 
	    mantenham os seus sites espelhos atualizados!</para>
      </important>
    </sect2>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-official-become">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Como se tornar um site espelho oficial?</title>
      <!--
      <para>
        An interesting question, especially, since the state
        of being official comes with some benefits, like a much
        higher bill from your ISP as more people will be using
        your site. Also it may be a key requirement to get access
        to a master site.
      </para>
      <para>
        Before applying, please consider (again) if
        another official mirror is really needed for
        your region. Check first with your zone administrator (<email>hostmaster@CC.FreeBSD.org</email>) or, if that fails, ask on the &a.hubs;.
      </para>
      <para>Ok, here is how to do it:</para>
      <procedure>
        <step>
          <para>
            Get the mirror running in first place (maybe not
            using a master site, yet).
          </para>
        </step>
        <step>
          <para>
            <ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/eresources.html#ERESOURCES-MAIL">Subscribe</ulink> to the &a.hubs;.
          </para>
        </step>
        <step>
          <para>
            If everything works so far, contact the DNS administrator responsible
            for your region/country, and ask for a DNS entry for your
            site. The admin should able to be contacted via
            <email>hostmaster@CC.FreeBSD.org</email>, where
            <emphasis>CC</emphasis> is your country code/TLD.
            Your DNS entry will be as described
            in <xref linkend="mirror-where-organization" />.
          </para>
          <para>
            If there is no subdomain set up for your
            country yet, you should contact
            <email>mirror-admin@FreeBSD.org</email>,
            or you can try the &a.hubs; first.
          </para>
        </step>
        <step>
          <para>
            Whoever helps you get an official name should send email
            to <email>mirror-admin@FreeBSD.org</email> so your site will be
            added to the mirror list in the
            <ulink url="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook">FreeBSD
            Handbook</ulink>.
          </para>
        </step>
      </procedure>
      <para>That is it.</para>
		-->
      <para xmlns:xlink="http://www.w3.org/1999/xlink">Nós não estamos aceitando nenhum novo site
	espelho no momento.</para>
    </sect2>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-statpages">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Algumas estatísticas dos sites espelhos</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Aqui você encontra links para as páginas de
      estatísticas de acesso aos seus sites espelhos favoritos
      (isto é, pelo menos para os sites que as 
      disponibilizam).</para>

    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-statpagesftp">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Estatísticas dos sites de FTP</title>
      <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
        <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">ftp.is.FreeBSD.org -
	    <email xmlns:xlink="http://www.w3.org/1999/xlink">hostmaster@is.FreeBSD.org</email> -
            <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.rhnet.is/status/draupnir/draupnir.html">
            (Consumo de banda IP)</link> <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.rhnet.is/status/ftp/ftp-notendur.html">(Processos FTP)
            </link> <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.rhnet.is/status/ftp/http-notendur.html">(Processos HTTP)
            </link>
          </para>
        </listitem>
        <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">ftp.cz.FreeBSD.org - <email xmlns:xlink="http://www.w3.org/1999/xlink">cejkar@fit.vutbr.cz</email> -
            <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.cz.FreeBSD.org/stats/mrtg/net.html">(Consumo de banda IP)</link>
            <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.freebsd.cz/stats/mrtg/ftpd.html">(Processos FTP)</link>
            <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.freebsd.cz/stats/mrtg/rsyncd.html">(Processos rsync)</link>
          </para>
        </listitem>
        <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">ftp2.ru.FreeBSD.org - <email xmlns:xlink="http://www.w3.org/1999/xlink">mirror@macomnet.ru</email> -
            <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://mirror.macomnet.net/mrtg/mirror.macomnet.net_195.128.64.25.html">(Consumo de banda IP)</link>
            <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://mirror.macomnet.net/mrtg/mirror.macomnet.net_proc.html">(Usuários HTTP e FTP)</link>
          </para>
        </listitem>
      </itemizedlist>
    </sect2>
    <sect2 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="mirror-statpagescvsup">
      <title xmlns:xlink="http://www.w3.org/1999/xlink">Estatísticas dos sites de CVSup</title>
      <itemizedlist xmlns:xlink="http://www.w3.org/1999/xlink">
        <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">cvsup[23456].jp.FreeBSD.org - <email xmlns:xlink="http://www.w3.org/1999/xlink">kuriyama@FreeBSD.org</email> - <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://home.jp.FreeBSD.org/stats/mrtg/cvsup/index.en.html">(Processos CVSup)</link></para>
        </listitem>
        <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">cvsup.cz.FreeBSD.org - <email xmlns:xlink="http://www.w3.org/1999/xlink">cejkar@fit.vutbr.cz</email> -
            <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.freebsd.cz/stats/mrtg/cvsupd.html">(Processos CVSup)</link></para>
        </listitem>
        <listitem xmlns:xlink="http://www.w3.org/1999/xlink">
          <para xmlns:xlink="http://www.w3.org/1999/xlink">cvsup4.ru.FreeBSD.org - <email xmlns:xlink="http://www.w3.org/1999/xlink">maxim@FreeBSD.org</email> -
            <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://ftp.mtu.ru/mrtg/ftp.mtu.ru_proc2.html">(Processos CVSup)</link></para>
        </listitem>
      </itemizedlist>
    </sect2>
  </sect1>
</article>
