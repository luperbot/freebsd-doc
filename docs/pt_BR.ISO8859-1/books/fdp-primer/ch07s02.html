<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>7.2. Entendendo Makefiles na árvore da documentação</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Primer do Projeto de Documentação do FreeBSD para novos colaboradores" /><link rel="up" href="doc-build.html" title="Chapter 7. O processo de construção da documentação" /><link rel="prev" href="doc-build.html" title="Chapter 7. O processo de construção da documentação" /><link rel="next" href="make-includes.html" title="7.3. Includes do Make do projeto de documentação do FreeBSD" /><link rel="copyright" href="legalnotice.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7.2. Entendendo <code class="filename">Makefile</code>s na árvore da 
      documentação</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="doc-build.html">Prev</a> </td><th width="60%" align="center">Chapter 7. O processo de construção da 
    documentação</th><td width="20%" align="right"> <a accesskey="n" href="make-includes.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp68074320"></a>7.2. Entendendo <code class="filename">Makefile</code>s na árvore da 
      documentação</h2></div></div></div><p>Há três tipos principais de 
      <code class="filename">Makefile</code>s na árvore do projeto de 
      documentção do FreeBSD.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Os <a class="link" href="ch07s02.html#sub-make" title="7.2.1. Makefiles de Subdiretórios">
	<code class="filename">Makefile</code>s de subdiretório</a> 
	simplesmente passam comandos para os diretórios 
	abaixo dele.</p></li><li class="listitem"><p>Os <a class="link" href="ch07s02.html#doc-make" title="7.2.2. Makefiles de Documentação">
	  <code class="filename">Makefile</code>s de 
	  documentação</a> descrevem o(s) 
	  documento(s) que deve(m) ser produzido(s) a partir deste 
	  diretório.</p></li><li class="listitem"><p>Os <a class="link" href="make-includes.html" title="7.3. Includes do Make do projeto de documentação do FreeBSD">
	  <span class="application">Make</span> includes</a> são 
	  os responsáveis pela produção do 
	  documento, e geralmente possuem o nome no formato 
	  <code class="filename">doc.xxx.mk</code>.
	  </p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sub-make"></a>7.2.1. <code class="filename">Makefile</code>s de Subdiretórios</h3></div></div></div><p>Estes <code class="filename">Makefile</code>s geralmente tem a 
	forma:</p><pre class="programlisting">SUBDIR =articles
SUBDIR+=books

COMPAT_SYMLINK = en

DOC_PREFIX?= ${.CURDIR}/..
.include "${DOC_PREFIX}/share/mk/doc.project.mk"</pre><p>Resumidamente, as primeiras quatro 
	linhas não vazias definem as variáveis do
	<span class="application">make</span>, <code class="varname">SUBDIR</code>, 
	<code class="varname">COMPAT_SYMLINK</code>, e 
	<code class="varname">DOC_PREFIX</code>.</p><p>A primeira declaração da variável  
	<code class="varname">SUBDIR</code>, tanto quanto a
	declaração da variável 
	<code class="varname">COMPAT_SYMLINK</code>, 
	mostra como atribuir um valor a uma variável,
	sobrescrevendo qualquer valor anterior que a mesma
	contenha.</p><p>A segunda declaração da variável
	<code class="varname">SUBDIR</code> mostra como um valor é 
	adicionado ao valor atual de uma variável.  A 
	variável <code class="varname">SUBDIR</code> agora é
	composta por <code class="literal">articles books</code>.</p><p>A declaração do
	<code class="varname">DOC_PREFIX</code> mostra como um valor é 
	atribuído para uma variável, mas somente se 
	ela ainda não estiver definida.  Isto é 
	útil se o <code class="varname">DOC_PREFIX</code> não 
	for onde este <code class="filename">Makefile</code> pensa que 
	é - o usuário pode cancelar e fornecer 
	o valor correto.</p><p>Agora o que tudo isso significa?  O 
	<code class="varname">SUBDIR</code> lista quais subdiretórios 
	abaixo do atual devem ser incluídos no processo de 
	compilação durante a geração 
	do documento.</p><p>O <code class="varname">COMPAT_SYMLINK</code> é 
	específico para compatibilizar os links 
	simbólicos que ligam os idiomas a sua 
	codificação oficial (por exemplo o 
	<code class="filename">doc/en</code> deve apontar para 
	<code class="filename">en_US.ISO-8859-1</code>).</p><p>O <code class="varname">DOC_PREFIX</code> é o caminho para a 
	raíz da árvore do projeto de 
	documentação do FreeBSD.  O qual nem sempre 
	é facil de encontrar, e que também pode ser 
	facilmente sobrescrito, para permitir flexibilidade.  O
	<code class="varname">.CURDIR</code> é uma variável 
	interna do <span class="application">make</span> que contém 
	o caminho para o diretório atual.</p><p>A linha final inclui o arquivo principal do projeto de
	documentação do FreeBSD, o 
	<code class="filename">doc.project.mk</code>, ele é o 
	responsável por converter estas variáveis em 
	instruções de compilação para 
	uso do <span class="application">make</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="doc-make"></a>7.2.2. <code class="filename">Makefile</code>s de Documentação</h3></div></div></div><p>Estes <code class="filename">Makefile</code>s ajustam várias
	variáveis do <span class="application">make</span> as quais
	descrevem como construir a documentação 
	contida em um determinado diretório.</p><p>Aqui está um exemplo:</p><pre class="programlisting">MAINTAINER=nik@FreeBSD.org

DOC?= book

FORMATS?= html-split html

INSTALL_COMPRESSED?= gz
INSTALL_ONLY_COMPRESSED?=

# SGML content
SRCS=  book.xml

DOC_PREFIX?= ${.CURDIR}/../../..

.include "$(DOC_PREFIX)/share/mk/docproj.docbook.mk"</pre><p>A variável <code class="varname">MAINTAINER</code> é 
	uma muito importante.  Esta variável fornece a 
	habilidade de reivindicar a propriedade sobre um documento no 
	projeto de documentação do FreeBSD, é 
	por meio dela que você recebe a responsabilidade de 
	mantê-lo.</p><p><code class="varname">DOC</code> é o nome (sem a 
	extensão <code class="filename">.xml</code>) do principal 
	documento criado por este diretório.  A variável
	<code class="varname">SRCS</code> lista todos os arquivos individuais 
	que compõem o documento.  Ela também deve 
	incluir os arquivos importantes, nos quais qualquer 
	mudança deve resultar em uma 
	reconstrução.</p><p>O <code class="varname">FORMATS</code> indica os formatos 
	nos quais o documento deve ser gerado por padrão.
	O <code class="varname">INSTALL_COMPRESSED</code> contém a lista 
	padrão das técnicas de compressão que 
	devem ser usadas no documento depois que ele é gerado.
	A variável <code class="varname">INSTALL_ONLY_COMPRESS</code>, 
	nula por padrão, deve ser definida para um valor
	não nulo apenas se você desejar gerar 
	exclusivamente a versão compactada do documento.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Nós abordamos a atribuição das 
	  variáveis opcionais na <a class="link" href="ch07s02.html#sub-make" title="7.2.1. Makefiles de Subdiretórios">seção anterior</a>.
	  </p></div><p>Você também já deve estar
      	familiarizado com a atribuição da 
	variável <code class="varname">DOC_PREFIX</code> e com as
	instruções de include.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="doc-build.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="doc-build.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="make-includes.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 7. O processo de construção da 
    documentação </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 7.3. Includes do <span class="application">Make</span> do projeto de documentação 
      do FreeBSD</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Este, e outros documentos, podem ser obtidos em
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Para perguntas sobre FreeBSD, leia a
    <a href="http://www.FreeBSD.org/docs.html">documentação</a> antes de contatar
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Para perguntas sobre esta documentação, envie e-mail para
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>