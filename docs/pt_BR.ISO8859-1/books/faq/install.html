<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Capítulo 3. Instalação</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Perguntas mais freqüentes sobre FreeBSD 2.X, 3.X e 4.X" /><link rel="up" href="index.html" title="Perguntas mais freqüentes sobre FreeBSD 2.X, 3.X e 4.X" /><link rel="prev" href="support.html" title="Capítulo 2. Documentação e Suporte" /><link rel="next" href="hardware.html" title="Capítulo 4. Compatibilidade de Hardware" /><link rel="copyright" href="legalnotice.html" title="Nota Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Capítulo 3. Instalação</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="support.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="hardware.html">Próxima</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install"></a>Capítulo 3. Instalação</h1></div><div><span xmlns="http://www.w3.org/1999/xhtml" class="personname"><span class="firstname">Nik</span> <span class="surname">Clayton</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="affiliation"></span></div></div></div><div class="qandaset"><a id="idp64442448"></a><dl><dt>3.1. <a href="install.html#idp64447696">De qual arquivo eu devo baixar o FreeBSD da
	    rede?</a></dt><dt>3.2. <a href="install.html#idp64486352">O que eu devo fazer se as imagens de disquete
	    não couberem em um único disco?</a></dt><dt>3.3. <a href="install.html#idp64520400">Onde estão as instruções para
	    instalar o FreeBSD?</a></dt><dt>3.4. <a href="install.html#idp64530896">O que é preciso para usar o FreeBSD?</a></dt><dt>3.5. <a href="install.html#idp64550608">Eu tenho apenas 4 MB de memória RAM.  Posso
	    usar o FreeBSD?</a></dt><dt>3.6. <a href="install.html#idp64562128">Como eu crio meu próprio disquete de
	    instalação?</a></dt><dt>3.7. <a href="install.html#idp64573648">O Windows 95/98 pode co-existir com o FreeBSD?</a></dt><dt>3.8. <a href="install.html#idp64589776">O Windows 95/98 sobrescreveu meu gerenciador de
	    inicialização
	    (boot)! Como eu instalo ele
	    de volta?</a></dt><dt>3.9. <a href="install.html#idp64668752">O meu IBM Thinkpad série A, T ou X trava
	    sempre, quando eu tento inicializar
	    (boot) o FreeBSD.  Como eu
	    resolvo isso?</a></dt><dt>3.10. <a href="install.html#idp64787152">Posso instalar o FreeBSD em um disco com bad
	    blocks?</a></dt><dt>3.11. <a href="install.html#idp64802512">Eu acabei de atualizar o sistema da série 3.X
	    para 4.X, e a minha primeira inicialização
	    (boot) falhou com a
	    mensagem bad sector table not
	      supported</a></dt><dt>3.12. <a href="install.html#idp64821712">Como eu faço se um disco tem
	    informações criadas pelo
	    bad144 antes de atualizar o sistema, e
	    depois de atualizado para o FreeBSD 4.0 ou posterior, a
	    inicialização falha?</a></dt><dt>3.13. <a href="install.html#idp64839120">Como eu removo o bad144 do meu
	    sistema anterior ao 4.X de forma que eu possa
	    atualizá-lo com segurança?</a></dt><dt>3.14. <a href="install.html#idp64848080">Coisas estranhas acontecem quando inicio o sistema com
	    o disco de instalação!  O que está
	    acontecendo?</a></dt><dt>3.15. <a href="install.html#idp64879696">Eu inicializei o FreeBSD a partir do meu CDROM ATAPI,
	    mas o programa de instalação diz que o CDROM
	    não foi encontrado.  Para onde ele foi?</a></dt><dt>3.16. <a href="install.html#idp64886352">Posso instalar o FreeBSD no meu laptop via PLIP (IP em
	    Linha Paralela)?</a></dt><dt>3.17. <a href="install.html#idp64903248">Qual geometria eu devo utilizar para um disco?</a></dt><dt>3.18. <a href="install.html#idp64927312">Existem restrições quanto ao
	    particionamento de discos?</a></dt><dt>3.19. <a href="install.html#idp64948176">O FreeBSD suporta programas gerenciadores de
	    discos?</a></dt><dt>3.20. <a href="install.html#idp64962896">Quando eu inicio o FreeBSD, eu obtenho a mensagem
	    Missing Operating System.  O que
	    está acontecendo?</a></dt><dt>3.21. <a href="install.html#idp64980560">Porque eu não consigo passar da tela
	    F? do gerenciador de
	    inicialização
	    (boot)?</a></dt><dt>3.22. <a href="install.html#idp64989008">Eu preciso instalar todos os fontes do sistema
	    operacional?</a></dt><dt>3.23. <a href="install.html#idp65005648">Eu preciso criar um
	    kernel
	    personalizado?</a></dt><dt>3.24. <a href="install.html#idp65030480">Eu devo usar criptografia DES, Blowfish, ou MD5 para
	    senhas do sistema? Como eu defino qual delas o
	    usuário deve usar?</a></dt><dt>3.25. <a href="install.html#idp65045584">Por que o disco de inicialização
	    (boot) inicia, mas trava na
	    tela Probing Devices...?</a></dt><dt>3.26. <a href="install.html#idp65052112">Por que ocorre o erro panic: can't mount
	      root, quando eu reinicio o sistema, depois
	    de tê-lo instalado.</a></dt><dt>3.27. <a href="install.html#idp65103440">Quais são as limitações de
	    memória?</a></dt><dt>3.28. <a href="install.html#idp65117264">Qual a limitação para o sistema de
	    arquivos FFS?</a></dt><dt>3.29. <a href="install.html#idp65175376">Por que a mensagem de erro
	    archsw.readin.failed me perturba
	    sempre, depois que eu recompilo e carrego um
	    kernel novo?</a></dt><dt>3.30. <a href="install.html#idp65188432">Como eu atualizo meu sistema da série 3.X para 4.X?</a></dt><dt>3.31. <a href="install.html#idp67598800">Onde estão essas
	    &#8220;especificações de
	      segurança&#8221;?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp64447696"></a><a id="floppy-download"></a><p><strong>3.1.</strong></p></td><td align="left" valign="top"><p>De qual arquivo eu devo baixar o FreeBSD da
	    rede?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Até a versão 3.1 era necessário
	    apenas um disquete para instalação do
	    FreeBSD, o disco era o
	    <code class="filename">floppies/boot.flp</code>.  Contudo, depois
	    que o 3.1 foi lançado, o Projeto adicionou ao
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> genérico o
	    suporte a uma grande variedade de dispositivos, de forma
	    que ele passou a consumir mais espaço.  Por este
	    motivo, desde a série 3.X são
	    necessários dois disquetes, o
	    <code class="filename">floppies/kernel.flp</code> e o
	    <code class="filename">floppies/mfsroot.flp</code>.  Essas imagens
	    precisam ser copiadas para disquetes, usando ferramentas
	    como o <code class="command">fdimage</code> ou o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a>.</p><p>Caso seja necessário baixar da rede a
	    distribuição do sistema (por exemplo, para
	    uma instalação por meio de um sistema de
	    arquivos DOS), você terá que obter as
	    seguintes estruturas da distribuição
	    padrão:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>bin/</p></li><li class="listitem"><p>manpages/</p></li><li class="listitem"><p>compat*/</p></li><li class="listitem"><p>doc/</p></li><li class="listitem"><p>src/ssys.*</p></li></ul></div><p>Para obter instruções completas sobre o
	    procedimento de instalação do FreeBSD e
	    maiores detalhes sobre os meios de
	    instalação, por gentileza, consulte a <a class="link" href="../handbook/install.html" target="_top">seção de
	      instalação</a> no
	    Manual do FreeBSD.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64486352"></a><a id="floppy-image-too-large"></a><p><strong>3.2.</strong></p></td><td align="left" valign="top"><p>O que eu devo fazer se as imagens de disquete
	    não couberem em um único disco?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Um disquete de 3.5 polegadas (1,44 MB) armazena
	    até 1474560 bytes de dados.  O tamanho da imagem de
	    inicialização é de exatamente 1474560
	    bytes.</p><p>Erros comuns, cometidos na
	    preparação dos discos de
	    inicialização, são:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Baixar a imagem de disco via
		<acronym class="acronym">FTP</acronym> sem utilizar o modo de
		transferência
		<span class="emphasis"><em>binário</em></span>.</p><p>Alguns clientes de FTP - especialmente navegadores
		de Internet - costumam usar por padrão o modo
		de transferência <span class="emphasis"><em>ascii</em></span> nas
		sessões FTP, e para normalizar o arquivo de
		acordo com o sistema, eles tentam alterar os
		caracteres finais de cada linha do arquivo.
		Invariavelmente esse comportamento resulta em baixar
		uma imagem de inicialização
		(<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) corrompida.
		Verifique o tamanho da imagem que você tem em
		mãos, se é exatamente do mesmo tamanho
		da imagem no servidor.  Caso o tamanho não seja
		<span class="emphasis"><em>exatamente</em></span> o mesmo, você
		pode suspeitar do arquivo que você
		baixou.</p><p>Para garantir que esse problema não ocorra,
		digite <span class="emphasis"><em>binary</em></span> na prompt de
		comando do seu cliente FTP, ou defina as
		preferências do programa para utilizar o modo
		binário.  Aí sim, faça baixe da
		rede a imagem de inicialização.</p></li><li class="listitem"><p>Usar o comando <code class="command">copy</code> do DOS (ou
		simplesmente copiar, por meio da Interface
		Gráfica do sistema) para transferir a imagem de
		inicialização para o disquete.</p><p>Programas como o <code class="command">copy</code>
		não vão funcionar para copiar a imagem
		de inicialização direto para o disquete,
		exatamente porque a imagem foi criada de forma que ela
		seja carregada diretamente.  A imagem tem o
		conteúdo completo que o disquete deve ter, com
		seus dados alocados trilha-a-trilha, e portanto
		não pode ser copiado para o disquete como um
		simples arquivo.  Você tem que copiar a imagem
		para o disquete usando alguma ferramenta de
		<span class="quote">&#8220;<span class="quote">cópia crua</span>&#8221;</span> (raw copy, como o
		<code class="command">fdimage</code> ou o
		<code class="command">rawrite</code>) como descrito no <a class="link" href="../handbook/install.html" target="_top">guia de
		  instalação do FreeBSD</a>.</p></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64520400"></a><a id="install-instructions-location"></a><p><strong>3.3.</strong></p></td><td align="left" valign="top"><p>Onde estão as instruções para
	    instalar o FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>As instruções de
	    instalação do FreeBSD podem ser encontradas
	    na <a class="link" href="../handbook/install.html" target="_top">seção de
	      instalação do FreeBSD no
	      Manual do FreeBSD</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64530896"></a><a id="need-to-run"></a><p><strong>3.4.</strong></p></td><td align="left" valign="top"><p>O que é preciso para usar o FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Você vai precisar, no mínimo de um PC 386
	    com 5MB de memória RAM e no mínimo 60 MB em
	    disco.  Essa configuração permite o uso de
	    uma placa de vídeo MDA simples, mas para usar o
	    X11R6 é necessário uma placa de vídeo
	    VGA ou mais avançada.</p><p>Para mais informações consulte <a class="xref" href="hardware.html" title="Capítulo 4. Compatibilidade de Hardware">Capítulo 4, <em>Compatibilidade de Hardware</em></a></p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64550608"></a><a id="four-meg-ram-install"></a><p><strong>3.5.</strong></p></td><td align="left" valign="top"><p>Eu tenho apenas 4 MB de memória RAM.  Posso
	    usar o FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O FreeBSD 2.1.7 foi a última versão do
	    sistema que rodava com apenas 4MB de memória.  A
	    partir do FreeBSD 2.2, é necessário no
	    mínimo 5MB de memória para usar o
	    sistema.</p><p>Praticamente todas as versões do FreeBSD podem
	    <span class="emphasis"><em>rodar</em></span> com 4MB de memória RAM,
	    contudo, a instalação do sistema operacional
	    não pode ser feita com apenas 4MB.  Você pode
	    colocar mais memória para o processo de
	    instalação do sistema, e depois de
	    instalado, voltar a máquina para apenas 4MB de
	    memória, ou como alternativa, instale o seu disco
	    rígido em uma máquina com mais de 4MB,
	    efetue a instalação do sistema, e depois
	    instale o seu disco de volta na máquina com apenas
	    4MB.</p><p>O FreeBSD 2.1.7 não irá instalar em
	    sistemas que usam 640 Kb de memória base + 3 MB de
	    memória extendida.  Se sua placa mãe pode
	    fazer o remapeamento da memória
	    <span class="quote">&#8220;<span class="quote">subutilizada</span>&#8221;</span> que vai sobrar dos 640kB da
	    região de 1MB, ai sim, você vai conseguir
	    usar o FreeBSD 2.1.7.  Entre no Setup da sua BIOS, procure
	    a opção ``remap'' e habilite-a.  Talvez
	    você tenha que desabilitar a opção de
	    ROM shadowing.  Com certeza é mais fácil
	    você conseguir mais 4MB apenas para a
	    instalação, compilar um
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> customizado e
	    portanto menor, e ai sim, tirar esses 4MB sobresalentes e
	    usar o sistema com apenas os 4MB originais.  Também
	    é possível instalar o FreeBSD 2.0.5 e depois
	    <span class="quote">&#8220;<span class="quote">atualizá-lo</span>&#8221;</span> para o 2.1.7 com a
	    opção ``upgrade'' disponível no
	    programa de instalação do FreeBSD
	    2.1.7.</p><p>Depois de instalado o sistema, você pode
	    compilar um <span class="foreignphrase"><em class="foreignphrase">kernel</em></span>
	    personalizado, que provavelmente irá permitir que o
	    sistema seja usado com 4MB de memória apenas.
	    Existem relatos de sucesso na utilização do
	    sistema com apenas 2MB de memória, contudo, nesse
	    caso é praticamente impossível usar alguma
	    outra aplicação junto ao sistema
	    operacional.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64562128"></a><a id="custom-boot-floppy"></a><p><strong>3.6.</strong></p></td><td align="left" valign="top"><p>Como eu crio meu próprio disquete de
	    instalação?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Atualmente não existe uma forma de
	    <span class="emphasis"><em>simplesmente criar</em></span> um disco de
	    instalação personalizado.  Para criar um
	    disquete personalizado você terá que preparar
	    todo um novo <code class="literal">release</code>, o qual, aí
	    sim, teria instruções de
	    instalação.</p><p>Para montar um <code class="literal">release</code>
	    personalizado siga as instruções do artigo
	    de <a class="link" href="../../articles/releng/article.html" target="_top">Engenharia de
	      <code class="literal">Release</code></a> article.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64573648"></a><a id="windows-coexist"></a><p><strong>3.7.</strong></p></td><td align="left" valign="top"><p>O Windows 95/98 pode co-existir com o FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Sim.  Primeiro você deve instalar o seu Windows,
	    e depois instalar o FreeBSD.  O gerenciador de
	    inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) do FreeBSD vai ser
	    instalado na MBR do seu disco, e vai conseguir controlar o
	    inicialização entre o FreeBSD e seu Windows.
	    Se você instalar o Windows depois do FreeBSD, a
	    instalação dele irá sobrescrever o
	    setor de inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) do seu disco, e
	    conseqüentemente seu gerenciador de
	    inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>), sem avisar ou pedir
	    qualquer confirmação.  Se esse for o caso,
	    leia a próxima seção.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64589776"></a><a id="win95-damaged-boot-manager"></a><p><strong>3.8.</strong></p></td><td align="left" valign="top"><p>O Windows 95/98 sobrescreveu meu gerenciador de
	    inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>)! Como eu instalo ele
	    de volta?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Você pode reinstalar o gerenciador de
	    inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) do FreeBSD de uma
	    das 3 maneiras:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Sob o DOS, entre no diretório tools/ da sua
		distribuição do FreeBSD (seu CDROM por
		exemplo) e procure o programa
		<code class="filename">bootinst.exe</code>.  Depois, execute-o
		da seguinte forma:</p><pre class="screen"><code class="prompt">...\TOOLS&gt;</code> <strong class="userinput"><code>bootinst.exe boot.bin</code></strong></pre><p>e o gerenciador de inicialização
		(<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) será
		reinstalado.</p></li><li class="listitem"><p>Faça a inicialização do
		FreeBSD pelos disquetes de instalação ou
		pelo CDROM novamente.  Entre na opção
		"Custom" do menu de
		instalação, escolha a o ítem de
		partições (Partition), selecione o drive
		do disco que continha o seu gerenciador de
		inicialização
		(<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) (normalmente, se
		trata do primeiro disco) e então você
		entra no editor de partições.  Não
		faça nenhuma alteração, apenas
		aperte a tecla W (Write).  O programa de
		instalação irá pedir a
		confirmação, se você quer gravar
		suas informações mesmo sem ter feito
		nenhuma alteração.  Escolha Sim.  O
		programa irá perguntar se você deseja
		instalar o gerenciador de inicialização
		(<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) do FreeBSD ou se
		você deseja deixar o setor de
		inicialização
		(<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) intacto (ou
		instalar um setor de inicialização
		(<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) padrão)
		exatamente como no instante da primeira
		instalação do FreeBSD.  Escolha
		<span class="quote">&#8220;<span class="quote">Boot Manager</span>&#8221;</span>.  Agora o gerenciador de
		inicialização
		(<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) será
		reinstalado no disco.  Saia do programa de
		instalação e reinicie o processo de
		inicialização pelo HD
		normalmente.</p></li><li class="listitem"><p>Inicie o FreeBSD com o disquete (ou CD) de
		inicialização tradicional, escolha a
		opção <span class="quote">&#8220;<span class="quote">Fixit</span>&#8221;</span> no menu do
		sysinstall.  Escolha entre o disquete de
		correção ou o segundo CDROM (a
		opção <span class="quote">&#8220;<span class="quote">live</span>&#8221;</span> na
		distribuição padrão do FreeBSD)
		no menu a seguir, e entre na shell de
		correção do sistema.  Em seguida execute
		o comando:</p><pre class="screen"><code class="prompt">Fixit#</code> <strong class="userinput"><code>fdisk -B -b /boot/boot0 bootdevice</code></strong></pre><p>substituindo <em class="replaceable"><code>bootdevice</code></em>
		pela device controladora do seu disco, como por
		exemplo, <code class="filename">ad0</code> (para o primeiro
		disco IDE),<code class="filename">ad4</code> (para o
		primeiro disco IDE na controladora secundária),
		<code class="filename">da0</code> (para o primeiro disco
		SCSI), etc.</p></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64668752"></a><a id="boot-on-thinkpad"></a><p><strong>3.9.</strong></p></td><td align="left" valign="top"><p>O meu IBM Thinkpad série A, T ou X trava
	    sempre, quando eu tento inicializar
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) o FreeBSD.  Como eu
	    resolvo isso?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Um bug nas primeiras versões da BIOS da IBM
	    nessas máquinas, erroneamente identifica as
	    partições FreeBSD como
	    partições FAT especiais.  Quando a BIOS
	    tenta reconhecer a partição FreeBSD, o
	    sistema trava.</p><p>De acordo com a IBM<a href="#ftn.idp64674640" class="footnote" id="idp64674640"><sup class="footnote">[1]</sup></a>,
	    os seguintes modelos/BIOS tem esse problema
	    corrigido:</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Modelo</th><th>Revisão da BIOS</th></tr></thead><tbody><tr><td>T20</td><td>IYET49WW ou posterior</td></tr><tr><td>T21</td><td>KZET22WW ou posterior</td></tr><tr><td>A20p</td><td>IVET62WW ou posterior</td></tr><tr><td>A20m</td><td>IWET54WW ou posterior</td></tr><tr><td>A21p</td><td>KYET27WW ou posterior</td></tr><tr><td>A21m</td><td>KXET24WW ou posterior</td></tr><tr><td>A21e</td><td>KUET30WW</td></tr></tbody></table></div><p>Existem relatos de que as revisões posteriores
	    das BIOS IBM re-introduziram esse bug.  <a class="link" href="http://www.FreeBSD.org/cgi/getmsg.cgi?fetch=200565+208320+/usr/local/www/db/text/2001/freebsd-mobile/20010429.freebsd-mobile" target="_top">Essa
	      mensagem</a>  enviada por Jacques Vidrine para a
	    <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-mobile" target="_top">lista de discussão de 
  temas específicos ao uso do FreeBSD em notebooks e demais 
  equipamentos móveis.</a> descreve uma série de procedimentos que
	    podem funcionar no seu laptop IBM, caso seja uma
	    versão um pouco mais nova, e que não consiga
	    inicializar (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) o
	    FreeBSD corretamente.  Você pode ainda fazer uma
	    atualização ou desatualização
	    (upgrade ou downgrade) da BIOS.</p><p>Se a BIOS é mais antiga, e você
	    não considera sua atualização, existe
	    uma opção que pode sanar seu problema.  A
	    instalação do FreeBSD pode ser feita
	    alterando-se a identificação da
	    partição (partition ID) do sistema, e depois
	    instalar novos setores de inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) que podem controlar
	    uma partition ID diferente.</p><p>O primeiro passo é restaurar o seu laptop ao
	    ponto onde ele pode fazer os auto-testes, ou seja, os
	    testes básicos de I/O da BIOS.  Para fazer isso,
	    basta ligar o computador de forma que ele não
	    consiga encontrar a partição primária
	    do FreeBSD.  A maneira mais simples de faze-lo, é
	    retirando o disco rígido do seu laptop, e
	    temporariamente ligando-o em um ThinkPad mais antigo (como
	    oThinkPad 600) ou em um PC comum, com um cabo de
	    conversão apropriado.  Uma vez feito isso, basta
	    apagar a partição FreeBSD e colocar o disco
	    de volta no laptop.  Agora sim, o ThinkPad deve estar de
	    volta ao estado onde ele pode reconhecer o disco.</p><p>Com a máquina funcionando, basta seguir as
	    próximas instruções para fazer o seu
	    FreeBSD instalar:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Baixe da rede os arquivos
		<code class="filename">boot1</code> e
		<code class="filename">boot2</code> no site <a class="link" href="http://people.FreeBSD.org/~bmah/ThinkPad/" target="_top">http://people.FreeBSD.org/~bmah/ThinkPad/</a>.
		Coloque esses arquivos em algum lugar onde você
		possa acessá-los posteriormente.</p></li><li class="step"><p>Instale o FreeBSD normalmente no ThinkPad.
		<span class="emphasis"><em>Não</em></span> use o modo
		<code class="literal">Dangerously Dedicated</code>.
		<span class="emphasis"><em>Não</em></span> reinicie o sistema
		quando o processo de instalação for
		concluído.</p></li><li class="step"><p>Vá para a <span class="quote">&#8220;<span class="quote">Shell Holográfica
		  de Emergência</span>&#8221;</span> (<span class="keycap"><strong>ALT</strong></span>+<span class="keycap"><strong>F4</strong></span>) ou inicie uma shell
		de recuperação -
		<span class="quote">&#8220;<span class="quote">fixit</span>&#8221;</span></p></li><li class="step"><p>Use o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> para alterar a partition ID de
		<code class="literal">165</code> para <code class="literal">166</code>
		(166 é o ID usado pelo OpenBSD).</p></li><li class="step"><p>Coloque os arquivos <code class="filename">boot1</code> e
		<code class="filename">boot2</code> no sistema de arquivos
		local.</p></li><li class="step"><p>Use o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a> para escrever o
		<code class="filename">boot1</code> e o
		<code class="filename">boot2</code> na sua
		partição FreeBSD.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>disklabel -B -b boot1 -s boot2 ad0sn</code></strong></pre><p><em class="replaceable"><code>n</code></em> é o
		número da partição onde o FreeBSD
		está instalado.</p></li><li class="step"><p>Reinicie o sistema.  O gerenciador de
		inicialização
		(<span class="foreignphrase"><em class="foreignphrase">boot</em></span>)
		oferecerá a opção de iniciar o
		<code class="literal">OpenBSD</code>, mas na verdade essa
		opção estará iniciando o
		FreeBSD.</p></li></ol></div><p>Agora, se você quer manter os sistemas
	    operacionais OpenBSD e FreeBSD no mesmo laptop ThinkPad,
	    pode considerar isso um exercício prático
	    que fica a critério do leitor.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64787152"></a><a id="install-bad-blocks"></a><p><strong>3.10.</strong></p></td><td align="left" valign="top"><p>Posso instalar o FreeBSD em um disco com bad
	    blocks?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Até a versão 3.0, o FreeBSD tinha um
	    utilitário chamado <code class="command">bad144</code>, que
	    automaticamente remapeava os bad blocks.  Atualmente, os
	    discos IDE modernos são capazes de fazer isso
	    sozinhos, portanto o <code class="command">bad144</code> foi
	    retirado da árvore do FreeBSD.  Se sua
	    intenção é instalar o FreeBSD 3.0 ou
	    alguma versão mais recente, nós sinceramente
	    aconselhamos que você compre um novo disco.  Se
	    você não quer comprar um disco novo,
	    então use o FreeBSD 2.X.</p><p>Se você esta tendo problemas de bad block com
	    algum disco IDE moderno, provavelmente o disco será
	    perdido em breve, já que ele está tão
	    corrompido que a controladora interna não
	    está conseguindo corrigir e remapear os bad blocks.
	    Sugerimos que você compre um disco novo logo, e
	    realize cópia de segurança
	    (<span class="foreignphrase"><em class="foreignphrase">backup</em></span>) dos dados,
	    enquanto o disco ainda funciona.</p><p>Se o drive de disco é SCSI e está
	    apresentando bad blocks, leia <a class="link" href="troubleshoot.html#awre" title="5.1.">essa
	      resposta</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64802512"></a><a id="bad144-3x-4x"></a><p><strong>3.11.</strong></p></td><td align="left" valign="top"><p>Eu acabei de atualizar o sistema da série 3.X
	    para 4.X, e a minha primeira inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) falhou com a
	    mensagem <span class="errorname">bad sector table not
	      supported</span></p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O FreeBSD 3.X e anteriores suportavam o programa
	    <code class="command">bad144</code>, que automaticamente remapeava
	    bad blocks.  O FreeBSD 4.X e posteriores não
	    suportam mais esse programa, devido ao fato que os
	    controladores de discos IDE atuais conseguem remapear bad
	    blocks automaticamente.  Leia <a class="link" href="install.html#install-bad-blocks" title="3.10.">essa pergunta</a> para
	    mais informações.</p><p>Para corrigir esse problema depois de uma
	    atualização, é necessário
	    mover fisicamente o disco com problemas para um outro
	    sistema FreeBSD funcional e usar o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a> da
	    forma discutida a seguir.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64821712"></a><a id="find-bad144"></a><p><strong>3.12.</strong></p></td><td align="left" valign="top"><p>Como eu faço se um disco tem
	    informações criadas pelo
	    <code class="command">bad144</code> antes de atualizar o sistema, e
	    depois de atualizado para o FreeBSD 4.0 ou posterior, a
	    inicialização falha?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Use o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a> para identificar esse ambiente.
	    <code class="command">disklabel -r drive
		device</code> vai te mostrar o
	    conteúdo do disco.  Procure o campo
	    <code class="literal">flags</code>.  Se encontrar a
	    informação <code class="literal">flags: badsect</code>
	    é porque esse disco está usando o bad144.
	    Por exemplo, o disco a seguir tem o
	    <code class="command">bad144</code> habilitado:</p><pre class="screen"><code class="prompt">#</code> disklabel -r wd0
# /dev/rwd0c:
type: ESDI
disk: wd0s1
label:
flags: badsect
bytes/sector: 512
sectors/track: 63</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64839120"></a><a id="disable-bad144"></a><p><strong>3.13.</strong></p></td><td align="left" valign="top"><p>Como eu removo o <code class="command">bad144</code> do meu
	    sistema anterior ao 4.X de forma que eu possa
	    atualizá-lo com segurança?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Use o comando <code class="command">disklabel -e -rwd0</code>
	    para editar as informações do seu disco.
	    Basta retirar a palavra <code class="literal">badsect</code> do seu
	    campo flags, salvar a alteração e sair do
	    programa.  O bad144 ainda estará ocupando algum
	    espaço no seu disco, mas ele estará
	    funcional para série 4.X e posteriores.</p><p>Caso seu disco tenha um número muito alto de
	    bad blocks, é recomendado a troca do disco.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64848080"></a><a id="boot-floppy-strangeness"></a><p><strong>3.14.</strong></p></td><td align="left" valign="top"><p>Coisas estranhas acontecem quando inicio o sistema com
	    o disco de instalação!  O que está
	    acontecendo?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Se sua máquina está desligando ou
	    espontâneamente reiniciando sempre que você
	    tenta iniciar o sistema com o disco de
	    instalação, aqui vão algumas
	    perguntas que você deveria fazer a si mesmo:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>O disco de instalação foi feito a
		partir de um disquete novo, recém formatado e
		completamente livre de erros (de preferência
		algum disco que acabou de sair da caixa, ao
		contrário desse seu disco que estava perdido
		há quase 3 anos debaixo da cama)?</p></li><li class="listitem"><p>Você baixou da rede a imagem em modo
		binário?  (não se envergonhe, até
		o melhor de nós já baixou um arquivo
		binário em modo ASCII ao menos uma vez na
		vida!)</p></li><li class="listitem"><p>No Windows 95 ou 98, você usou o
		<code class="command">fdimage</code> ou o
		<code class="command">rawrite</code> em modo DOS? Esses sistemas
		operacionais as vezes interferem na forma com que os
		programas escrevem dados diretamente no hardware,
		exatamente o que o processo de criação
		da imagem de disco faz, mesmo que você execute
		um prompt do DOS no ambiente gráfico o problema
		pode ocorrer.</p></li></ol></div><p>Ainda existem notícias de arquivos de imagens
	    sendo corrompidos pelo Netscape, durante o
	    <span class="foreignphrase"><em class="foreignphrase">download</em></span>, por isso é
	    mais seguro utilizar um cliente de FTP diferente.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64879696"></a><a id="no-install-cdrom"></a><p><strong>3.15.</strong></p></td><td align="left" valign="top"><p>Eu inicializei o FreeBSD a partir do meu CDROM ATAPI,
	    mas o programa de instalação diz que o CDROM
	    não foi encontrado.  Para onde ele foi?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A causa desse problema curioso é a
	    configuração errada do seu drive de CDROM.
	    Hoje em dia muitos PCs vem com o CDROM instalado como
	    escravo na segunda controladora IDE, sem nenhum disco ou
	    drive óptico do tipo mestre na mesma controladora.
	    De acordo com as especificações ATAPI esse
	    tipo de configuração é incorreta e
	    ilegal.  Alguns sistemas, como o Windows, simplesmente
	    ignoram uma série de especificações
	    legais na arquitetura de computadores pessoais, e acabam
	    oferecendo suporte a essa configuração
	    errônea - o que mais tarde pode causar outros
	    conflitos.  Depois que o sistema inicia, a BIOS passa a
	    ignorar esse drive, e por isso o FreeBSD não
	    consegue encontrá-lo, para completar a
	    instalação.</p><p>Reconfigure o seu computador de forma que o CDROM
	    esteja como mestre na sua controladora IDE, ou que exista
	    um outro periférico como mestre na controladora
	    onde o CD estiver como escravo.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64886352"></a><a id="install-PLIP"></a><p><strong>3.16.</strong></p></td><td align="left" valign="top"><p>Posso instalar o FreeBSD no meu laptop via PLIP (IP em
	    Linha Paralela)?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Claro.  Use o cabo laplink padrão.  Caso
	    necessário, verifique a <a class="link" href="../handbook/plip.html" target="_top">seção de
	      PLIP</a> do Manual do FreeBSD para obter detalhes
	    sobre a instalação do FreeBSD via rede em
	    porta paralela.</p><p>Se você está usando o FreeBSD 3.X ou
	    anterior, dê uma olhada na página de <a class="link" href="http://www.FreeBSD.org/docs.html#PAO" target="_top">Computação
	      Móvel</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64903248"></a><a id="geometry"></a><p><strong>3.17.</strong></p></td><td align="left" valign="top"><p>Qual geometria eu devo utilizar para um disco?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Por <span class="quote">&#8220;<span class="quote">geometria</span>&#8221;</span>, nós entendemos
	      o número de cilindros, cabeças e
	      setores/trilhas de um disco.  Por conveniência,
	      vamos nos referir à esses dados como C/H/S
	      (Cylinders/Heads/Sectores).  É a partir dessa
	      informação que a BIOS dos PCs definem
	      quais áreas de um disco podem ser usadas para
	      leitura/escrita.</p></div><p>A geometria de disco costuma causar uma série
	    de confusões entre administradores de sistemas
	    menos experientes.  Para começar, a geometria
	    <span class="emphasis"><em>física</em></span> de um disco SCSI
	    é totalmente irrelevante, pois o FreeBSD trabalha
	    com blocos de discos.  Na verdade, não existe
	    exatamente <span class="quote">&#8220;<span class="quote">a</span>&#8221;</span> geometria física de um
	    disco, visto que a densidade de um setor varia de acordo
	    com os discos.  Os fabricantes chamam de <span class="quote">&#8220;<span class="quote">geometria
	      física</span>&#8221;</span> as especificações
	    que eles definem para que o menor espaço
	    possível em disco seja desperdiçado.  Em
	    discos IDE, o FreeBSD trabalha com as
	    informações de C/H/S, mas todos os
	    dispositivos modernos, internamente convertem essa
	    informações em referências a blocos de
	    disco.</p><p>O que importa, portanto, é a geometria
	    <span class="emphasis"><em>lógica</em></span>.  O valor lógico
	    é a resposta que a BIOS obtém quando
	    pergunto <span class="quote">&#8220;<span class="quote">qual sua geometria?</span>&#8221;</span> ao disco.
	    É esse valor, então, que é usado para
	    definir a forma de acesso ao dispositivo de armazenamento.
	    O FreeBSD usa as informações da BIOS quando
	    inicializa (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>), e por
	    isso é extremamente importante obter essa
	    informação de maneira correta.  No geral, se
	    você tem mais de um sistema operacional no mesmo
	    disco, eles devem concordar no valor lógico da
	    geometria do disco, caso contrário você
	    terá sérios problemas ao iniciar o
	    sistema.</p><p>Em discos SCSI, a geometria à ser utilizada
	    depende do suporte à tradução
	    extendida definido na sua controladora de disco
	    (normalmente esse suporte é chamado de
	    <span class="quote">&#8220;<span class="quote">support for DOS disks &gt;1GB</span>&#8221;</span>, que
	    identifica o suporte à discos DOS cuja capacidade
	    de armazenamento é maior que 1GB - ou alguma
	    identificação similar.).  Se essa
	    opção está desabilitada, então
	    o C/H/S do disco será de
	    <em class="replaceable"><code>N</code></em> cilindros, 64 cabeças
	    e 32 setores/trilhas, onde o valor
	    <em class="replaceable"><code>N</code></em> equivale a capacidade (em MB)
	    do disco.  Por exemplo, um disco de 2GB teria 2048
	    cilindros, 64 cabeças e 32 setores/trilhas.</p><p>Se a opção <span class="emphasis"><em>estiver</em></span>
	    habilitada (normalmente ela é habilitada por
	    padrão, para sanar algumas limitações
	    de sistemas baseados em MSDOS), e a capacidade do disco
	    forma maior que 1GB, os valores C/H/S do disco
	    serão M cilindros, 63 setores por trilha
	    (<span class="emphasis"><em>não</em></span> 64) e 255 cabeças,
	    sendo 'M' a capacidade do disco, em MB, dividido por
	    7.844238 (!).  Então, por exemplo, o mesmo disco de
	    2GB nessa situação teria 261 cilindros, 63
	    setores por trilha e 255 cabeças.</p><p>Se você não entendeu o porque disso, ou
	    se o seu FreeBSD falha no momento de reconhecer a
	    geometria correta do seu disco durante a
	    instalação, existe uma forma de tentar
	    resolver esse problema.  Crie uma pequena
	    partição do tipo DOS no seu disco, e
	    verifique se a BIOS consegue identificar corretamente a
	    geometria do mesmo.  Caso consiga, a
	    instalação vai se completar com
	    tranqüilidade, e a pequena partição DOS
	    pode sempre ser deletada, com o editor de
	    partições do FreeBSD.</p><p>Como alternativa, existe uma aplicação
	    gratuitamente disponível com a
	    distribuição do FreeBSD, chamada de
	    <code class="filename">pfdisk.exe</code>.  Ela pode ser encontrada
	    sob o diretório <code class="filename">tools</code> no CDROM
	    do FreeBSD ou nos servidores FTP do projeto.  Esse
	    programa serve para descobrir qual a geometria usada por
	    outros sistemas operacionais no disco local.  Nesse caso,
	    esse valor pode ser definido no editor de
	    partições do FreeBSD.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64927312"></a><a id="disk-divide-restrictions"></a><p><strong>3.18.</strong></p></td><td align="left" valign="top"><p>Existem restrições quanto ao
	    particionamento de discos?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Sim, existem.  A principal delas, é que a
	    partição <span class="quote">&#8220;<span class="quote">root</span>&#8221;</span> não pode
	    ter mais de 1024 cilindros, senão a BIOS não
	    consegue iniciar o <span class="foreignphrase"><em class="foreignphrase">kernel</em></span>
	    do sistema a partir dessa partição.  (Note
	    que essa é uma limitação das BIOS dos
	    computadores pessoais, e não do FreeBSD).</p><p>Em um disco SCSI, essa limitação implica
	    que a partição raiz (root) deve estar
	    alocada nos primeiros 1024MB do disco (ou nos primeiros
	    4096MB, caso o suporte a tradução extendida
	    esteja habilitada - veja pergunta anterior).  Em discos
	    IDE, o valor correspondente equivale a 504MB para
	    partição raiz (root).</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64948176"></a><a id="disk-manager"></a><p><strong>3.19.</strong></p></td><td align="left" valign="top"><p>O FreeBSD suporta programas gerenciadores de
	    discos?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O FreeBSD reconhece apenas o <span class="quote">&#8220;<span class="quote">Ontrack Disk
	      Manager</span>&#8221;</span>.  Outros gerenciadores de discos
	    não são suportados.</p><p>Se sua intenção é usar o disco
	    com FreeBSD, você não precisa de um
	    gerenciador de discos.  Basta configurar o disco para o
	    total de espaço que a BIOS reconhece (normalmente
	    504MB) e o FreeBSD vai conseguir identificar o tamanho
	    real do disco.  Se você estiver usando um disco
	    antigo com uma controladora MFM, será
	    necessário avisar ao FreeBSD quantos cilindros o
	    disco tem.</p><p>Caso queira usar o disco com FreeBSD e algum outro
	    sistema operacional, provavelmente também
	    não será necessário um gerenciador de
	    discos.  Certifique-se apenas que a partição
	    de inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) do FreeBSD e a
	    partição do outro sistema operacional
	    estejam nos primeiros 1024 cilindros do disco.
	    Normalmente, para administradores de sistemas que tomam
	    decisões racionais, 20MB de espaço em uma
	    partição de inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) é mais que o
	    suficiente.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64962896"></a><a id="missing-os"></a><p><strong>3.20.</strong></p></td><td align="left" valign="top"><p>Quando eu inicio o FreeBSD, eu obtenho a mensagem
	    <span class="errorname">Missing Operating System</span>.  O que
	    está acontecendo?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Esse é um caso tópico do FreeBSD e o DOS
	    ou qualquer outro sistema operacional discordando de suas
	    definições em relação a <a class="link" href="install.html#geometry" title="3.17.">geometria</a> do disco.
	    Provavelmente você terá que reinstalar o
	    FreeBSD, mas se seguir as instruções citadas
	    nas perguntas anteriores, raramente esse problema vai
	    acontecer.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64980560"></a><a id="stop-at-boot-manager"></a><p><strong>3.21.</strong></p></td><td align="left" valign="top"><p>Porque eu não consigo passar da tela
	    <code class="prompt">F?</code> do gerenciador de
	    inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>)?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Esse é mais um sintoma do problema descrito na
	    pergunta anterior.  A geometria que a sua BIOS reconhece
	    não equivale ao valor definido no FreeBSD! Se a sua
	    controladora de disco ou sua BIOS suportam o modo de
	    tradução de cilindros (normalmente chamado
	    de <span class="quote">&#8220;<span class="quote">&gt;1GB drive support</span>&#8221;</span>), tente alterar
	    essa opção e reinstalar o FreeBSD.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp64989008"></a><a id="need-complete-sources"></a><p><strong>3.22.</strong></p></td><td align="left" valign="top"><p>Eu preciso instalar todos os fontes do sistema
	    operacional?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Geralmente não, mas é altamente
	    recomendável que você instale ao menos os
	    fontes <code class="literal">base</code>, que incluem
	    inúmeros arquivos mencionados ao longo desse
	    documento, como as fontes do sistema,
	    <code class="literal">sys</code> que inclui as fontes do
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> do FreeBSD, sem os
	    quais não se pode criar um
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> personalizado.
	    Não existe qualquer dependência do sistema
	    operacional em relação aos seus fontes;  com
	    a única exceção do programa
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a>, o resto do sistema operacional não
	    precisa dos fontes para funcionar.  Os outros fontes do
	    sistema operacional - exceto os fontes do
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> - podem ser montados
	    remotamente (via NFS, por exemplo) em qualquer lugar, e
	    ainda assim novos binários podem ser compilados a
	    partir dos mesmos.  Devido a restrição
	    única dos fontes do
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span>, é
	    recomendável que os outros fontes não sejam
	    diretamente montados sob <code class="filename">/usr/src</code> mas
	    sim, que sejam montados separadamente e depois
	    interligados com links simbólicos
	    apropriados.</p><p>Tendo todos os fontes disponíveis, e sabendo
	    reconstruir o sistema a partir dos mesmos, será
	    muito mais fácil manter o FreeBSD sincronizado e
	    atualizado com futuros releases.</p><p>Para escolher um subconjunto dos fontes do sistema,
	    escolha a opção <code class="literal">Custom</code>
	    quando estiver na opção
	    <code class="literal">Distributions</code> do programa de
	    instalação do sistema.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp65005648"></a><a id="need-kernel"></a><p><strong>3.23.</strong></p></td><td align="left" valign="top"><p>Eu preciso criar um
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span>
	    personalizado?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Construir um novo
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> costumava ser uma
	    obrigação na instalação do
	    FreeBSD, mas hoje em dia existe uma interface de
	    configuração do
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> muito mais
	    amigável, que permite a redefinição
	    de recursos do sistema.  Para acessar essa ferramenta,
	    basta inicializar (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) o
	    sistema com a opção <code class="option">-c</code> no
	    prompt de (<code class="literal">boot:</code>).  Em especial, os
	    principais periféricos ISA - normalmente os mais
	    problemáticos - podem ser facilmente configurados
	    com essa opção.</p><p>Ainda é recomendável que se construa um
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> personalizado,
	    apenas com suporte aos equipamentos e
	    características do sistema que você precisa,
	    de forma a economizar recursos no sistema (especialmente
	    memória RAM), mas essa recompilação
	    não é mais uma obrigação na
	    maioria dos sistemas - mas é sem dúvida um
	    hábito saudável.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp65030480"></a><a id="password-encryption"></a><p><strong>3.24.</strong></p></td><td align="left" valign="top"><p>Eu devo usar criptografia DES, Blowfish, ou MD5 para
	    senhas do sistema? Como eu defino qual delas o
	    usuário deve usar?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O formato padrão para senhas no FreeBSD
	    é a criptografia <span class="emphasis"><em>MD5</em></span>.  Esse
	    padrão é considerado mais seguro do que os
	    formatos tradicionais de senhas Unix, que normalmente eram
	    baseados no algorítimo <span class="emphasis"><em>DES</em></span>.  O
	    FreeBSD ainda pode trabalhar com senhas em formato DES
	    caso você precise compartilhá-las com
	    sistemas que ainda armazenam suas senhas no formato antigo
	    - e menos seguro - dos sistemas Unix originais (para isso
	    você terá que instalar a
	    distribuição <span class="quote">&#8220;<span class="quote">crypto</span>&#8221;</span> via
	    sysinstall ou apartir do código fonte).  Instalando
	    as bibliotecas crypto será possivel utilizar outros
	    tipos de criptografia, como o formato Blowfish, que
	    é ainda mais seguro do que o MD5.  A
	    definição de qual codificação
	    utilizar é definida no campo
	    <span class="quote">&#8220;<span class="quote">passwd_format</span>&#8221;</span> do arquivo de
	    configurações de login, o
	    <code class="filename">/etc/login.conf</code>.  Esse campo deve ter
	    o valor <span class="quote">&#8220;<span class="quote">des</span>&#8221;</span>, <span class="quote">&#8220;<span class="quote">blf</span>&#8221;</span> (caso suas
	    bibliotecas estejam disponíveis) ou
	    <span class="quote">&#8220;<span class="quote">md5</span>&#8221;</span>.  Veja a página de manuais do
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> para maiores
	    informações.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp65045584"></a><a id="boot-floppy-hangs"></a><p><strong>3.25.</strong></p></td><td align="left" valign="top"><p>Por que o disco de inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) inicia, mas trava na
	    tela <code class="literal">Probing Devices...</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Se você tem um drive Zip IDE ou um Jaz conectado
	    ao seu computador, remova-o e tente de novo.  A
	    inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) de
	    instalação do sistema se confunde as vezes
	    quando esses dispositivos estão disponíveis
	    no computador.  Depois da instalação os
	    drives são reconhecidos e controlados normalmente.
	    Provavelmente - esperamos - esse problema será
	    corrigido nas próximas versões.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp65052112"></a><a id="panic-on-install-reboot"></a><p><strong>3.26.</strong></p></td><td align="left" valign="top"><p>Por que ocorre o erro <span class="errorname">panic: can't mount
	      root</span>, quando eu reinicio o sistema, depois
	    de tê-lo instalado.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Esse problema costuma ocorrer por conta de uma pequena
	    confusão entre os blocos do setor de
	    inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) do disco, e as
	    definições de disco no
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span>.  É um erro
	    típico apenas de sistemas com dois discos IDE,
	    quando os mesmos estão definidos como disco mestre
	    e escravo, mas em controladoras distintas, e com o FreeBSD
	    instalado na controladora secundária.  Os blocos de
	    inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) acham que o sistema
	    está instalado no segundo disco IDE (o segundo
	    disco reconhecido pela BIOS) enquanto o
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> assume o primeiro
	    disco na segunda controladora IDE.  Depois do
	    reconhecimento dos equipamentos do sistema o
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> tenta montar a
	    partição raiz no disco que o bloco de
	    inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) acredita ser o disco
	    de inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>), wd1, ao
	    invés do disco correto na segunda controladora,
	    wd2, e por isso o processo de inicialização
	    falha.</p><p>Para corrigir esse problema, você tem três
	    opções:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>No FreeBSD 3.3 e posteriores, reincie o sistema e
		aperte <span class="keycap"><strong>Enter</strong></span> na tela <code class="literal">Booting
		  kernel in 10 seconds;  hit [Enter] to
		  interrupt</code>.  Você será
		direcionado ao <code class="literal">boot loader</code>.</p><p>Depois, digite <code class="literal"> set
		  root_disk_unit="disk_number"</code>.
		<em class="replaceable"><code>disk_number</code></em> deverá
		ser <code class="literal">0</code> se o FreeBSD estiver
		instalado como mestre na primeira controladora IDE,
		<code class="literal">1</code> se for o escravo na primeira
		controladora, <code class="literal">2</code> se for o mestre da
		segunda controladora IDE, e <code class="literal">3</code> se
		for o escravo na segunda controladora.</p><p>Depois digite <code class="literal">boot</code>, e seu sistema deve ser iniciado corretamente.</p><p>Para tornar essa alteração
		permanente, (para que você não tenha que
		digitar isso na mão toda vez que seu FreeBSD
		tiver que reiniciar) basta colocar a linha <code class="literal">
		  root_disk_unit="disk_number"</code>
		no arquivo
		<code class="filename">/boot/loader.conf.local</code>.</p></li><li class="listitem"><p>Se você estiver usando o FreeBSD 3.2 ou
		alguma versão anterior, digite
		<code class="literal">1:wd(2,a)kernel</code> na prompt de
		inicialização do sistema e aperte
		<span class="keycap"><strong>Enter</strong></span>.  Se o sistema iniciar
		normalmente, execute o comando <code class="command">echo
		  "1:wd(2,a)kernel" &gt; /boot.config</code> para
		tornar essa alteração permanente.</p></li><li class="listitem"><p>Mude o disco com o FreeBSD para primeira
		controladora IDE.</p></li><li class="listitem"><p><a class="link" href="../handbook/kernelconfig.html" target="_top">Recompile o
		  <span class="foreignphrase"><em class="foreignphrase">kernel</em></span></a>,
		altere as linhas de configuração wd
		para: </p><pre class="programlisting">controller      wdc0    at isa? port "IO_WD1" bio irq 14 vector wdintr
disk            wd0     at wdc0 drive 0
# disk            wd1     at wdc0 drive 1 # comment out this line

controller      wdc1    at isa? port "IO_WD2" bio irq 15 vector wdintr
disk            wd1     at wdc1 drive 0 # change from wd2 to wd1
disk            wd2     at wdc1 drive 1 # change from wd3 to wd2</pre><p>E instale o novo
		<span class="foreignphrase"><em class="foreignphrase">kernel</em></span>.  Se você
		mudou seu disco e quer voltar ele para
		configuração original, mude a ordem
		deles no PC e reinicie o sistema.  Seu sistema deve
		iniciar com sucesso.</p></li></ol></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp65103440"></a><a id="memory-limits"></a><p><strong>3.27.</strong></p></td><td align="left" valign="top"><p>Quais são as limitações de
	    memória?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A limitação de memória é
	    de 4 gigabytes.  Essa definição foi testada,
	    veja a <a class="link" href="ftp://ftp.cdrom.com/archive-info/configuration" target="_top">configuração
	      do wcarchive</a> para obter mais detalhes.  Se
	    você pretende instalar essa quantidade de
	    memória no FreeBSD, seja cuidadoso.  Dê
	    preferência para memórias ECC e reduza a
	    capacidade de carga usando modules de memória de 9
	    chips, ai invés dos módulos de 18
	    chips.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp65117264"></a><a id="ffs-limits"></a><p><strong>3.28.</strong></p></td><td align="left" valign="top"><p>Qual a limitação para o sistema de
	    arquivos FFS?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Para o sistema de arquivos FFS, o limite
	    máximo, na teoria é de 8 terabytes (para
	    blocos de 2K), ou 16TB para o tamanho padrão dos
	    blocos, que é de 8K.  Na prática os limites
	    variam de 1TB a 4TB de acordo com algumas
	    modificações no sistema de arquivos.</p><p>O tamanho máximo para um arquivo no sistema FFS
	    é de 1G de blocos (4TB) caso os blocos sejam de
	    4K.</p><div class="table"><a id="idp65122384"></a><div class="table-title">Tabela 3.1. Tamanho máximo dos arquivos.</div><div class="table-contents"><table summary="Tamanho máximo dos arquivos." border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>Tamanho do bloco</th><th>2.2.7-stable</th><th>3.0-current</th><th>Funciona com</th><th>Deve funcionar</th></tr></thead><tbody><tr><td>4K</td><td>4T-1</td><td>4T-1</td><td>4T-1</td><td>&gt;4T</td></tr><tr><td>8K</td><td>&gt;32G</td><td>8T-1</td><td>&gt;32G</td><td>32T-1</td></tr><tr><td>16K</td><td>&gt;128G</td><td>16T-1</td><td>&gt;128G</td><td>32T-1</td></tr><tr><td>32K</td><td>&gt;512G</td><td>32T-1</td><td>&gt;512G</td><td>64T-1</td></tr><tr><td>64K</td><td>&gt;2048G</td><td>64T-1</td><td>&gt;2048G</td><td>128T-1</td></tr></tbody></table></div></div><br class="table-break" /><p>Quando o sistema de arquivos possui blocos de 4K, o
	    triplo de blocos indiretores funcionam, e o limite
	    máximo do sistema de arquivos deveria ser atingido,
	    mas a triplicação dos blocos indiretores
	    (representados aproximadamente pelo resultado de 1K^3 +
	    1K^2 + 1K) se limita ao valor (errôneo) de 1G-1 no
	    número de blocos do sistema de arquivos.  O limite
	    do número de blocos deveria ser 2G-1.  Mas por
	    causa de alguns problemas com o número dos blocos
	    no sistema de arquivos, esse valor não pode ser
	    alcançado quando o tamanho dos blocos no sistema de
	    arquivos é 4K.</p><p>Em blocos com tamanho de 8K ou maiores, o limite geral
	    é de 2G-1 no número de blocos do sistema de
	    arquivos, exceto no FreeBSD -STABLE onde o triplo indireto
	    do número de blocos pode ser alcançado, de
	    forma que o limite máximo do sistema de arquivos
	    seja representado pela equação
	    ((blocksize/4)^2 + (blocksize/4)), e sob o -CURRENT onde a
	    exceção desse limite pode causar
	    problemas.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp65175376"></a><a id="archsw-readin-failed-error"></a><p><strong>3.29.</strong></p></td><td align="left" valign="top"><p>Por que a mensagem de erro
	    <span class="errorname">archsw.readin.failed</span> me perturba
	    sempre, depois que eu recompilo e carrego um
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> novo?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Você pode carregar um novo
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span> ao especifica-lo
	    diretamente no segundo estágio do processo de
	    inicialização, simplesmente apertando
	    qualquer tecla quando o pipe ( | ) aparecer, antes que o
	    loader seja carregado.  Provavelmente você atualizou
	    todo o sistema operacional, mas recompilou apenas o
	    <span class="foreignphrase"><em class="foreignphrase">kernel</em></span>, <span class="emphasis"><em>sem dar
	      um make world</em></span>.  Essa ação
	    é arriscada e não é suportada.
	    Faça um Make World!!!!</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp65188432"></a><a id="upgrade-3x-4x"></a><p><strong>3.30.</strong></p></td><td align="left" valign="top"><p>Como eu atualizo meu sistema da série 3.X para 4.X?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>É <span class="emphasis"><em>altamente</em></span>
	    recomendável que você use
	    <span class="foreignphrase"><em class="foreignphrase">snapshots</em></span> binários
	    para fazer isso.  <span class="foreignphrase"><em class="foreignphrase">Snapshots</em></span>
	    binário do 4-STABLE podem ser encontrados em <a class="link" href="ftp://releng4.FreeBSD.org/" target="_top">ftp://releng4.FreeBSD.org/</a>.</p><p>Devido às inúmeras
	    alterações da série 3.X para
	    série 4-STABLE, uma atualização
	    direta, a partir dos fontes, corre grande riscos de
	    falhar.  A atualização dos fontes pode ser
	    feita, inclusive desde as primórdias versões
	    2.X até as mais recentes 4-STABLE ou até
	    mesmo 5-CURRENT, mas essa atualização deve
	    ser realizada em vários estágios.  Primeiro,
	    atualize a sua série 3.X pra versão mais
	    recente, a 3-STABLE (<code class="literal">RELENG_3</code>).  Depois
	    atualize para o 4.1.1-RELEASE
	    (<code class="literal">RELENG_4_1_1_RELEASE</code>).  Finalmente,
	    tente atualizar para o 4-STABLE
	    (<code class="literal">RELENG_4</code>).</p><p>Se você pretende atualizar seu sistema a partir
	    dos fontes, por gentileza, refira-se ao <a class="link" href="../handbook/cutting-edge.html" target="_top">Manual do FreeBSD</a>
	    para maiores informações.</p><div xmlns="" class="caution"><h3 class="admontitle">Cuidado: </h3><p xmlns="http://www.w3.org/1999/xhtml">A atualização direta por meio dos
	      fontes nunca é aconselhável para
	      usuários inexperientes, a
	      atualização da série 3.X para 4.X
	      portanto é menos aconselhável ainda,
	      portanto, caso você não tenha
	      experiências com esse processo de
	      atualização, leia todas as
	      instruções disponíveis no
	      Manual do FreeBSD com cuidado.</p></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp67598800"></a><a id="security-profiles"></a><p><strong>3.31.</strong></p></td><td align="left" valign="top"><p>Onde estão essas
	    <span class="quote">&#8220;<span class="quote">especificações de
	      segurança</span>&#8221;</span>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Uma <span class="quote">&#8220;<span class="quote">especificação de
	      segurança</span>&#8221;</span> se refere a um conjunto de
	    configurações e de opções no
	    sistema, que tendem a garantir um nível
	    desejável de segurança, por meio de definir
	    ou desabilitar algumas opções e programas no
	    FreeBSD.  Para maiores detalhes, veja a
	    seção de <a class="link" href="../handbook/install-post.html#SECURITYPROFILE" target="_top">
	      Especificação de Segurança</a>
	    no <a class="link" href="../handbook/install-post.html" target="_top">capítulo de
	      pós-instalação</a> do
	    Manual do FreeBSD.</p></td></tr></tbody></table></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp64674640" class="footnote"><p><a href="#idp64674640" class="para"><sup class="para">[1] </sup></a>Em um e-mail
		enviado por Keith Frechettei
		<code class="email">&lt;<a xmlns="" class="email" href="mailto:kfrechet@us.ibm.com">kfrechet@us.ibm.com</a>&gt;</code>.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="support.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="hardware.html">Próxima</a></td></tr><tr><td width="40%" align="left" valign="top">Capítulo 2. Documentação e Suporte </td><td width="20%" align="center"><a accesskey="h" href="index.html">Principal</a></td><td width="40%" align="right" valign="top"> Capítulo 4. Compatibilidade de Hardware</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Este, e outros documentos, podem ser obtidos em
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Para perguntas sobre FreeBSD, leia a
    <a href="http://www.FreeBSD.org/docs.html">documentação</a> antes de contatar
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Para perguntas sobre esta documentação, envie e-mail para
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>