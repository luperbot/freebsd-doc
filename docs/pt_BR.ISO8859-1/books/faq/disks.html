<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Capítulo 9. Discos, Sistemas de Arquivos e Carregadores de Inicialização (Boot Loaders)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Perguntas mais freqüentes sobre FreeBSD 2.X, 3.X e 4.X" /><link rel="up" href="index.html" title="Perguntas mais freqüentes sobre FreeBSD 2.X, 3.X e 4.X" /><link rel="prev" href="kernelconfig.html" title="Capítulo 8. Configuraçãao do Kernel" /><link rel="next" href="admin.html" title="Capítulo 10. Administração do Sistema" /><link rel="copyright" href="legalnotice.html" title="Nota Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Capítulo 9. Discos, Sistemas de Arquivos e Carregadores de
      Inicialização (<span class="foreignphrase"><em class="foreignphrase">Boot
	Loaders</em></span>)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="kernelconfig.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="admin.html">Próxima</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks"></a>Capítulo 9. Discos, Sistemas de Arquivos e Carregadores de
      Inicialização (<span class="foreignphrase"><em class="foreignphrase">Boot
	Loaders</em></span>)</h1></div></div></div><div class="qandaset"><a id="idp68290384"></a><dl><dt>9.1. <a href="disks.html#idp68290640">Como eu mudo todo o meu sistema operacional para um
	    disco novo?</a></dt><dt>9.2. <a href="disks.html#idp68340944">Um disco no modo &#8220;dangerously dedicated&#8221;
	    pode ser prejudicial a minha saúde?</a></dt><dt>9.3. <a href="disks.html#idp68366032">Em quais partições podemos seguramente
	    usar o softupdates?  Eu tenho ouvido falar de problemas em
	    se usar o softupdates na partição
	    /?</a></dt><dt>9.4. <a href="disks.html#idp68373712">O que é inapropriado no meu ccd?</a></dt><dt>9.5. <a href="disks.html#idp68378448">Porque eu não posso editar o disklabel do meu
	    ccd?</a></dt><dt>9.6. <a href="disks.html#idp68386000">Posso montar outros tipos de partições
	    externas sobre FreeBSD?</a></dt><dt>9.7. <a href="disks.html#idp68403152">Como montar uma partição DOS
	    secundária?</a></dt><dt>9.8. <a href="disks.html#idp68408528">Existe um sistema de arquivos criptografado para o
	    FreeBSD?</a></dt><dt>9.9. <a href="disks.html#idp68411344">Como posso usar o carregador do NT para iniciar o
	    FreeBSD?</a></dt><dt>9.10. <a href="disks.html#idp68435536">Como posso iniciar o FreeBSD e o Linux com o
	    LILO?</a></dt><dt>9.11. <a href="disks.html#idp68453840">Como eu inicio o FreeBSD e o Linux usando o
	    BootEasy?</a></dt><dt>9.12. <a href="disks.html#idp68456656">Como eu altero a tela de inicialização
	    (boot) de
	    ??? para algo mais
	    significativo?</a></dt><dt>9.13. <a href="disks.html#idp68465232">Possuo uma nova unidade de disco removível,
	    como posso usa-la?</a></dt><dt>9.14. <a href="disks.html#idp68483536">Por que eu tive o erro Incorrect super
	      block na hora de montar um CDROM?</a></dt><dt>9.15. <a href="disks.html#idp68487760">Device not configured ocorre na
	    hora de montar o CDROM?</a></dt><dt>9.16. <a href="disks.html#idp68502992">Porque todos caracteres não-Inglês
	    são apresentados como &#8220;?&#8221; no sistema
	    de arquivos do CD que acabou de ser montado no
	    FreeBSD?</a></dt><dt>9.17. <a href="disks.html#idp68506960">Eu queimei um CD no FreeBSD e agora esse disco
	    não pode ser lido em nenhum outro sistema
	    operacional.  Por que?</a></dt><dt>9.18. <a href="disks.html#idp68510032">Como posso criar uma imagem de um CD de dados?</a></dt><dt>9.19. <a href="disks.html#idp68513360">Por que um CD de áudio não pode ser
	    montado com o comando mount?</a></dt><dt>9.20. <a href="disks.html#idp68517328">Como eu monto um CD com múltiplas
	    sessões de gravação?</a></dt><dt>9.21. <a href="disks.html#idp68521552">Como posso permitir que usuários comuns montem
	    disquetes, CDROMs e outros tipos de mídia
	    removível?</a></dt><dt>9.22. <a href="disks.html#idp68546384">Os comandos du e
	    df apresentam quantias distintas de
	    espaço em disco disponível.  O que
	    está havendo?</a></dt><dt>9.23. <a href="disks.html#idp68566864">Como eu posso adicionar mais espaço para
	    swap?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp68290640"></a><a id="new-huge-disk"></a><p><strong>9.1.</strong></p></td><td align="left" valign="top"><p>Como eu mudo todo o meu sistema operacional para um
	    disco novo?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A melhor maneira de migrar seu sistema de um disco
	    para o outro é reinstalar completamente o SO na
	    nova unidade de armazenamento e depois migrar os dados dos
	    usuários do disco antigo para nova
	    instalação.  Essa forma é a mais
	    recomendada, caso o sistema tenha sido -STABLE por mais de
	    uma versão, ou caso tenha atualizado um Release ao
	    invés de ter instalado um novo sistema.  O booteasy
	    pode ser facilmente instalado com o comando
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot0cfg</span>(8)</span></a>, de forma a permitir que o sistema possa
	    iniciar dois sistemas distintos, até que você
	    esteja satisfeito com o novo sistema.  Pule o
	    próximo parágrafo para saber algumas formas
	    seguras de migrar os dados dos usuários para o novo
	    disco.</p><p>Você pode ter decidido por não refazer
	    uma nova instalação; nesse caso será
	    necessário reparticionar o novo disco com o
	    <code class="filename">/stand/sysinstall</code>, ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a>
	    ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>.  Também é
	    necessário instalar o booteasy em ambas as unidades
	    com o comando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot0cfg</span>(8)</span></a>, de forma que você
	    possa alternar a inicialização entre o novo
	    sistema e a configuração atual do mesmo,
	    até que a cópia dos dados tenha sido
	    efetuada.</p><p>Agora, com um novo disco configurado, você
	    está pronto para começar a mover os dados da
	    antiga para nova unidade de armazenamento.  Infelizmente
	    os dados não podem simplesmente ser copiados ao
	    acaso.  Existem alguns arquivos especiais (como os
	    arquivos de dispositivos <code class="filename">/dev</code>),
	    flags, e links que tendem a não funcionar no novo
	    sistema, visto que esses arquivos ocupam inodes ou tem
	    informações específicas da unidade, e
	    por isso não podem ser copiados como um arquivo
	    comum.  É necessário usar ferramentas que
	    entendam esse comportamento.  Isso significa que
	    você terá que usar o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>.  É
	    sempre uma boa idéia realizar esse processo de
	    cópia de dados em modo mono-usuário, contudo
	    tal precaução não é
	    obrigatória - é apenas sinal de
	    cuidado.</p><p>Não é aconselhável usar nenhuma
	    outra ferramenta a não ser o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> e
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">restore</span>(8)</span></a> para copiar o sistema de arquivos da
	    partição raiz ("/").  O
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> pode funcionar de forma satisfatória,
	    mas pode ser que não.  Também é
	    ótima idéia usar o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> e
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">restore</span>(8)</span></a> para copiar (ou mover completamente) os
	    dados em uma partição para uma outra
	    partição vazia.  Os passos
	    necessários para usar o dump para copiar os dados
	    de uma partição existente para uma nova
	    partição são:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Crie um novo sistema de arquivos com o
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> na nova partição.</p></li><li class="step"><p>Monte a partição em um ponto de
		montagem temporário.</p></li><li class="step"><p>Entre (cd) no ponto de montagem em
		questão.</p></li><li class="step"><p>Finalmente mova os dados da partição
		existente para a nova partição com o
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>.</p></li></ol></div><p>Por exemplo, se a intenção é
	    copiar os dados da partição raiz para a
	    partição
	    <code class="filename">/dev/ad1s1a</code>, cujo ponto de
	    montagem temporário é o
	    <code class="filename">/mnt</code>, faça o seguinte:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/ad1s1a</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad1s1a /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dump 0af - / | restore xf -</code></strong></pre><p>Redefinir a estrutura das partições com
	    o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> é um processo um pouco mais
	    trabalhoso.  Caso você queira, por exemplo, unir o
	    conteúdo da partição
	    <code class="filename">/var</code> com as partições
	    de nível acima, crie uma partição que
	    seja grande o bastante para alocar o conteúdo de
	    ambas, copie a partição principal como no
	    exemplo descrito acima e depois copie as
	    sub-partições para os diretórios
	    vazios que o primeiro comando deve ter criado:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/ad1s1a</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad1s1a /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dump 0af - / | restore xf -</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd var</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dump 0af - /var | restore xf -</code></strong></pre><p>Para separar um diretório de sua estrutura
	    atual, ou seja, no mesmo exemplo ainda, alocar os dados de
	    <code class="filename">/var</code> em uma partição
	    própria quando na definição atual o
	    /var é apenas um diretório comum, é
	    necessário montar a sub partição no
	    diretório apropriado do ponto de montagem
	    temporário, simulando assim o sistema de arquivos a
	    ser criado a partir da raiz (montada no diretório
	    temporário), depois basta copiar os dados do
	    diretório antigo para nova
	    partição:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/ad1s1a</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/ad1s1d</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad1s1a /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /mnt/var</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad1s1d /mnt/var</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dump 0af - / | restore xf -</code></strong></pre><p>Talvez você prefira usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a>,
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pax&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pax</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> ao invés de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>
	    na hora de copiar os dados de usuários.  Quando
	    este <code class="literal">FAQ</code> foi escrito, esses comandos
	    costumavam perder atributos especiais dos arquivos ou
	    mesmo alterar algumas permissões ou autoridade
	    (dono dos arquivos), portanto use esses comandos com
	    cuidado.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68340944"></a><a id="dangerously-dedicated"></a><p><strong>9.2.</strong></p></td><td align="left" valign="top"><p>Um disco no modo <span class="quote">&#8220;<span class="quote">dangerously dedicated</span>&#8221;</span>
	    pode ser prejudicial a minha saúde?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><a id="dedicate"></a>O processo de
	    instalação permite a escolha entre dois
	    modos distintos de particionar o(s) disco(s)
	    rígido.  A maneira tradicional permite que outros
	    sistemas operacionais na mesma estação
	    possam acessar essas partições, criando
	    entradas na tabela do fdisk (entradas chamadas de
	    <span class="quote">&#8220;<span class="quote">slices</span>&#8221;</span> no FreeBSD) sob uma
	    partição FreeBSD própria.  Uma
	    característica desse particionamento é
	    permitir múltiplos sistemas operacionais e permitir
	    a instalação de um gerenciador de
	    inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) para alternar entre
	    esses sistemas.  A segunda maneira, a alternativa ao modo
	    tradicional faz uso do disco todo para o FreeBSD e
	    não faz esforços para se tornar
	    compatível com outros sistemas operacionais.</p><p>Então, por que esse modo é chamado de
	    <span class="quote">&#8220;<span class="quote">modo perigosamente dedicado</span>&#8221;</span>?  Um disco
	    particionado dessa forma não tem algumas
	    características tradicionais que os PCs poderiam
	    considerar entradas válidas do fdisk.  Dependendo
	    das circunstâncias o PC pode reclamar e gerar
	    advertências sobre o disco em questão, assim
	    que o primeiro contato com essa unidade seja feito, ou
	    pior, o PC pode ainda danificar o processo de
	    inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) do BSD
	    (<span class="foreignphrase"><em class="foreignphrase">bootstrap</em></span>) sem pedir
	    confirmação da alteração ou
	    até mesmo sem avisar o usuário dessa
	    mudança.  O <span class="quote">&#8220;<span class="quote">modo perigosamente
	      dedicado</span>&#8221;</span> ainda costuma confundir várias
	    BIOS, inclusive as BIOS AWARD (encontradas, por exemplo no
	    HP Netserver e em sistemas Micronics assim como em muitos
	    outros) e as BIOS Symbios/NCR (da popular série
	    53C8xx de controladoras SCSI).  Não são
	    apenas esses dois modelos que podem apresentar
	    dificuldades com esse modo de particionamento de disco, a
	    lista completa é ainda maior.  O principal sintoma
	    desse tipo de confusão é a presença
	    de mensagens de <span class="errorname">read error</span>
	    apresentada pelo <span class="foreignphrase"><em class="foreignphrase">bootstrap</em></span>
	    do FreeBSD quando ele tem dificuldades de encontrar-se;
	    outro sintoma é a falta de sistema operacional no
	    momento da inicialização do PC.</p><p>Então porque esse modo de particionamento de
	    disco existe?  Esse modo economiza o uso de alguns poucos
	    kbytes de espaço em disco, e pode, em contrapartida
	    gerar grandes problemas em uma nova
	    instalação do sistema.  O modo
	    <span class="quote">&#8220;<span class="quote">perigosamente dedicado</span>&#8221;</span> em sua origem
	    é um desejo antigo dos usuários do FreeBSD,
	    especialmente durante a instalação, que
	    é simplesmente poder ignorar a
	    <span class="quote">&#8220;<span class="quote">geometria</span>&#8221;</span> de disco reconhecida pela BIOS e
	    usar o disco todo de forma independente, sem prestar
	    satisfação ao sistema básico de
	    entrada/saída do PC.</p><p>O conceito de <span class="quote">&#8220;<span class="quote">Geometria</span>&#8221;</span> é
	    ultrapassado, mas infelizmente ainda faz parte do
	    coração da BIOS dos Computadores Pessoais,
	    sendo extremamente necessário para a
	    interação do computador com seus discos.
	    Quando o FreeBSD cria as partições, ele tem
	    que gravar sua localização de forma
	    correspondente a maneira que a BIOS irá
	    procurá-la.  Se essa informação
	    não é acessível à BIOS, pode
	    ser que o sistema não consiga iniciar-se.</p><p><span class="quote">&#8220;<span class="quote">O modo Dangerously dedicated</span>&#8221;</span> tenta
	    evitar esse desconforto fazendo a operação
	    se tornar mais simples.  Em muitos casos essa forma de
	    particionamento funciona, mas ela foi criada para ser
	    usada como última alternativa à necessidade
	    de definir a geometria do disco - em 99% dos casos existem
	    formas mais vantajosas de resolver problemas com
	    geometria.</p><p>Mas então, como evitar a necessidade do modo
	    <span class="quote">&#8220;<span class="quote">DD</span>&#8221;</span> na instalação do sistema?
	    Comece anotando os valores pra geometria que a BIOS diz
	    estar usando pros discos locais.  Esses valores podem ser
	    apresentados pelo kernel do FreeBSD, especificando a
	    opção <code class="option">-v</code> no prompt de
	    <code class="literal">boot:</code> usando <code class="command">boot
	      -v</code> nas configurações do loader
	    do sistema operacional.  Antes do programa de
	    instalação ser carregado o kernel apresenta
	    a listagem dos valores para a Geometria de discos
	    reconhecida pela BIOS do computador;  não se
	    precipite nem se preocupe, essas informações
	    podem ser visualizadas paginando a tela para as
	    notações anteriores, sendo possível
	    assim verificar esses valores.  Normalmente as unidades de
	    disco da BIOS são apresentadas na mesma ordem que o
	    FreeBSD as encontra, sendo primeiro as unidades IDE
	    seguido das SCSI.</p><p>No momento do particionamento do disco, verifique se a
	    geometria apresentada pelo FDISK corresponde ao valor
	    apresentado pela BIOS;  caso não corresponda use a
	    tecla <span class="keycap"><strong>g</strong></span> para redefinir esses valores.
	    Também pode ser necessário definir a
	    geometria manualmente em casos onde o disco em
	    questão está vazio e sem nenhum outro tipo
	    de partição criada, ou se o disco foi
	    instalado em um outro computador e foi colocado na
	    estação atual recentemente.  Note que esse
	    tipo de complicação não é
	    comum, e quando acontece, acontece apenas com o disco onde
	    o FreeBSD está iniciando;  Qualquer outro disco
	    existente no computador será controlado
	    perfeitamente pelo FreeBSD em qualquer
	    situação.</p><p>Uma vez existindo a concordância de Geometria
	    entre a BIOS e o FreeBSD, com certeza seus problemas
	    terão acabado, e não existia a necessidade
	    de usar o modo <span class="quote">&#8220;<span class="quote">DD</span>&#8221;</span>.  Contudo, se em casos
	    extremos ainda ocorrerem erros de <span class="errorname">read
	      error</span> então pode cruzar os dedos e
	    usar o modo dedicado (DD), afinal não há
	    nada a perder, visto que das formas tradicionais sua BIOS
	    insiste em não cooperar de forma correta.</p><p>Para voltar um disco particionado em modo
	    <span class="quote">&#8220;<span class="quote">dangerously dedicated</span>&#8221;</span> para uso normal em um
	    PC existem duas alternativas.  A primeira é alocar
	    dados nulos (NULL bytes) o bastante na MBR do disco, de
	    forma que qualquer instalação posterior
	    acredite que o disco está vazio.  Isso pode ser
	    feito, por exemplo, da seguinte maneira:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/rda0 count=15</code></strong></pre><p>E a segunda forma, a
	    <span class="quote">&#8220;<span class="quote">opção</span>&#8221;</span> não documentada
	    do DOS:</p><pre class="screen"><code class="prompt">C:\&gt;</code> <strong class="userinput"><code>fdisk /mbr</code></strong></pre><p>instalará um novo registro mestre de
	    inicialização no disco em questão,
	    sobrepondo inclusive o
	    <span class="foreignphrase"><em class="foreignphrase">bootstrap</em></span> do BSD.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68366032"></a><a id="safe-softupdates"></a><p><strong>9.3.</strong></p></td><td align="left" valign="top"><p>Em quais partições podemos seguramente
	    usar o softupdates?  Eu tenho ouvido falar de problemas em
	    se usar o softupdates na partição
	    <code class="filename">/</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A resposta breve: o softupdates pode ser usado com
	    segurança em todas as
	    partições.</p><p>A resposta mais completa: existiam algumas
	    restrições quanto ao uso do softupdates na
	    partição raiz do sistema.  Tais
	    restrições se deviam a duas
	    características causadas pelo softupdates, que eram
	    a pouquíssima chance de perder alguns dados da
	    partição raiz se acontecesse algum system
	    crash;   apesar das probabilidades de perda de dados serem
	    mínimas, elas existem;   não existe uma
	    danificação ou corrosão do sistema de
	    arquivos, apenas alguns arquivos podem ser simplesmente
	    perdidos.  E a segunda característica é a
	    diminuição temporária de
	    espaço em disco.</p><p>Quando o softupdates está ativado o kernel pode
	    levar até trinta segundos para realmente escrever
	    alguns dados fisicamente em disco.  Caso algum arquivo
	    grande seja apagado, ela permanece temporariamente em
	    disco até que o kernel realmente o apague, o que
	    pode causar uma condição de corrida
	    simples(simple race condition).  Imagine, apenas para
	    ilustrar, que você apague um arquivo enorme do
	    disco, e logo em seguida crie um outro arquivo tão
	    grande quanto o primeiro;  a gravação de
	    metadados no disco pode não ter sido realizada
	    ainda quando o segundo arquivo é criado, ou seja o
	    primeiro não foi realmente definido como um arquivo
	    apagado.  Nesse caso é provável que
	    você receba uma mensagem dizendo que não
	    existe espaço o bastante em disco para o segundo
	    arquivo, quando você tem certeza absoluta que o
	    espaço que acabou de ser liberado ao apagar o
	    primeiro arquivo é o suficiente para alocar o
	    segundo!  Aí você tenta gravar o segundo
	    arquivo mais uma vez, alguns meros segundos depois, e o
	    processo de criação do mesmo, simplesmente
	    funciona como esperado.  Esse tipo de comportamento
	    já levou mais de um usuário a
	    balançar sua cabeça e duvidar de sua
	    própria sanidade, ou mesmo da sanidade do sistema
	    de arquivos do FreeBSD;  em caso extremos, de
	    dúvidas do bom estado de ambos, a sanidade do
	    sistema de arquivos e do próprio usuário
	    ;-)</p><p>Se o sistema falhar antes do kernel aceitar um
	    conjunto de dados que tem que ser escrito no disco antes
	    do mesmo ser gravado, é provável que exista
	    perda dos dados em questão.  Esse risco é
	    extremamente baixo, e geralmente é
	    contornável.  O uso, por exemplo, das
	    opções de cache de gravação
	    das unidades de disco IDE é um fator que causa a
	    possibilidade desse tipo de desconforto, portanto é
	    altamente recomendável que essa opção
	    seja desativada nos discos IDE quando for usar o
	    softupdates.</p><p>Esse comportamento afeta todas as
	    partições que estiverem com softupdates.
	    Portanto, o que isso implica para a partição
	    raiz?</p><p>A maioria das informações vitais da
	    partição raiz mudam com pouquíssima
	    freqüência.  Arquivos como o
	    <code class="filename">/kernel</code> e o conteúdo do
	    <code class="filename">/etc</code> são alterados apenas
	    durante a manutenção do sistema operacional,
	    ou quando os usuários alteram suas senhas.  Caso o
	    sistema falhe durante essa janela de trinta segundos,
	    depois que uma dessas alterações foi feita,
	    é possível que alguns dados sejam perdidos.
	    Esse risco é baixíssimo e praticamente
	    indiferente para maioria das aplicações, mas
	    deve-se atentar que o risco existe.  Caso seu sistema
	    não tolere nem uma possibilidade tão baixa
	    de riscos, não use o softupdates na
	    partição raiz!</p><p>A <code class="filename">/</code> normalmente é uma das
	    menores partições do sistema.  Por
	    padrão o FreeBSD coloca o diretório
	    <code class="filename">/tmp</code> na partição
	    <code class="filename">/</code>, comportamento este que pode ser
	    modificado por administradores de sistemas mais
	    experientes.  Caso seu <code class="filename">/tmp</code> costume
	    ocupar muito espaço, pode ser criado um link
	    simbólico para o <code class="filename">/var/tmp</code>, o
	    comportamento inverso também é válido
	    e bastante seguro, caso o /tmp seja uma
	    partição grande o bastante para alocar os
	    dados do /var/tmp também.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68373712"></a><a id="inappropriate-ccd"></a><p><strong>9.4.</strong></p></td><td align="left" valign="top"><p>O que é inapropriado no meu ccd?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Os sintomas desse tipo de dúvida:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ccdconfig -C</code></strong>
ccdconfig: ioctl (CCDIOCSET): /dev/ccd0c: Inappropriate file type or format</pre><p>Esse problema normalmente ocorre quando se tenta
	    concatenar as partições <code class="literal">c</code>
	    cujo tipo padrão é
	    <code class="literal">unused</code>.  O ccd requer que a
	    partição que ele esteja usando seja do tipo
	    FS_BSDFFS.  Edite o disklabel dos discos em questão
	    e altere o tipo das partições para
	    <code class="literal">4.2BSD</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68378448"></a><a id="ccd-disklabel"></a><p><strong>9.5.</strong></p></td><td align="left" valign="top"><p>Porque eu não posso editar o disklabel do meu
	    ccd?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Os sintomas desse tipo de dúvida:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>disklabel ccd0</code></strong>
(it prints something sensible here, so let us try to edit it)
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -e ccd0</code></strong>
(edit, save, quit)
disklabel: ioctl DIOCWDINFO: No disk label on disk;
use "disklabel -r" to install initial label</pre><p>Isso acontece por que o disklabel que o ccd retorna
	    é na verdade um valor <span class="quote">&#8220;<span class="quote">falso</span>&#8221;</span>, que
	    não está realmente gravado no disco.  Esse
	    problema pode ser resolvido ao reescrever explicitamente
	    esse dado, da seguinte forma:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>disklabel ccd0 &gt; /tmp/disklabel.tmp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -Rr ccd0 /tmp/disklabel.tmp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -e ccd0</code></strong>
(agora irá funcionar)</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68386000"></a><a id="mount-foreign-fs"></a><p><strong>9.6.</strong></p></td><td align="left" valign="top"><p>Posso montar outros tipos de partições
	    externas sobre FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><div class="variablelist"><dl class="variablelist"><dt><span class="term">Digital UNIX</span></dt><dd><p>CDROMs do tipo UFS podem ser montados
		  diretamente no FreeBSD, já a montagem de
		  partições de disco do Digital UNIX que
		  usam o UFS pode ser um pouco mais complexa,
		  dependendo dos detalhes do particionamento de disco
		  para o sistema operacional em questão.</p></dd><dt><span class="term">Linux</span></dt><dd><p>A partir do 2.2, o FreeBSD suporta
		  partições do tipo
		  <code class="literal">ext2fs</code>.  Veja o
		  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_ext2fs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_ext2fs</span>(8)</span></a> para obter mais
		  informações.</p></dd><dt><span class="term">NT</span></dt><dd><p>Existe suporte somente-leitura as
		  partições NTFS no FreeBSD.  Para obter
		  mais informações leia esse tutorial,
		  escrito por Mark Ovens em <a class="link" href="http://ukug.uk.FreeBSD.org/~mark/ntfs_install.html" target="_top">http://ukug.uk.FreeBSD.org/~mark/ntfs_install.html</a>.</p></dd></dl></div><p>Mais informações sobre esse assunto
	    seriam bem vindas :-)</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68403152"></a><a id="mount-dos"></a><p><strong>9.7.</strong></p></td><td align="left" valign="top"><p>Como montar uma partição DOS
	    secundária?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>As partições secundárias do DOS
	    são encontradas depois que TODAS as
	    partições primárias foram definidas.
	    Por exemplo, se você tem a partição
	    <span class="quote">&#8220;<span class="quote">E</span>&#8221;</span> como a segunda partição
	    DOS no segundo disco SCSI, será necessário
	    criar um arquivo especial para essa <span class="quote">&#8220;<span class="quote">quinta
	      partição</span>&#8221;</span> (slice 5) no /dev, depois
	    montar /dev/da1s5:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /dev</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sh MAKEDEV da1s5</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -t msdos /dev/da1s5 /dos/e</code></strong></pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68408528"></a><a id="crypto-filesystem"></a><p><strong>9.8.</strong></p></td><td align="left" valign="top"><p>Existe um sistema de arquivos criptografado para o
	    FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Sim, veja o <code class="literal">port</code> <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cfs/pkg-descr">security/cfs</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68411344"></a><a id="nt-bootloader"></a><p><strong>9.9.</strong></p></td><td align="left" valign="top"><p>Como posso usar o carregador do NT para iniciar o
	    FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Esse procedimento é um pouco diferente entre o
	    FreeBSD 2.2.X e o 3.X (que tem um sistema de inicío
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) de 3 fases).</p><p>A idéia geral se consiste em copiar os
	    primeiros setores da partição raiz nativa do
	    FreeBSD e transforma-los em um arquivo, para ser colocado
	    dentro da partição DOS/NT.  Se assumir-mos
	    que você vai chamar esse arquivo de
	    <code class="filename">c:\bootsect.bsd</code> (inspirado por
	    <code class="filename">c:\bootsect.dos</code>), pode-se
	    então editar o arquivo
	    <code class="filename">c:\boot.ini</code> de forma a
	    carregá, mais ou menos assim:</p><pre class="programlisting">[boot loader]
timeout=30
default=multi(0)disk(0)rdisk(0)partition(1)\WINDOWS
[operating systems]
multi(0)disk(0)rdisk(0)partition(1)\WINDOWS="Windows NT"
C:\BOOTSECT.BSD="FreeBSD"
C:\="DOS"</pre><p>No 2.2.X esse procedimento assume que o DOS, o NT, o
	    FreeBSD, ou o que quer que seja, tenha sido instalado em
	    suas partições respectivas do fdisk no
	    <span class="emphasis"><em>mesmo</em></span> disco.  Esse exemplo foi
	    testado em um sistema onde o DOS &amp; NT estavam
	    instalados na primeira partição do fdisk, e
	    o FreeBSD na segunda.  O FreeBSD havia sido configurado
	    para iniciar a partir de sua partição
	    nativa, e não pela MBR do disco.</p><p>Monte um disquete formatado em DOS (caso ele tenha
	    sido convertido para NTFS) ou em FAT, por exemplo, sob o
	    ponto de montagem <code class="filename">/mnt</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/rda0a of=/mnt/bootsect.bsd bs=512 count=1</code></strong></pre><p>Reinicie o computador no DOS ou NT.  Sobre o NTFS,
	    copie o arquivo <code class="filename">bootsect.bsd</code> e/ou
	    arquivo <code class="filename">bootsect.lnx</code> do disquete para
	    <code class="filename">C:\</code>.  Modifique os atributos
	    originais(permissões) do
	    <code class="filename">boot.ini</code> com:</p><pre class="screen"><code class="prompt">C:\&gt;</code> <strong class="userinput"><code>attrib -s -r c:\boot.ini</code></strong></pre><p>Edite e adicione as entradas apropriadas no
	    <code class="filename">boot.ini</code> seguindo o exemplo anterior
	    e volte os atributos originais:</p><pre class="screen"><code class="prompt">C:\&gt;</code> <strong class="userinput"><code>attrib +s +r c:\boot.ini</code></strong></pre><p>Se o FreeBSD estiver inicializando pela MBR,
	    reconstrua-a com o comando <code class="command">fdisk</code> do DOS
	    depois de configurar os sistemas para iniciar a partir de
	    suas partições nativas.</p><p>No FreeBSD 3.X esse procedimento é mais
	    simples.</p><p>Se o FreeBSD estiver instalado no mesmo disco que a
	    partição de inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) do NT está
	    instalada, copie o <code class="filename">/boot/boot1</code> para
	    <code class="filename">C:\BOOTSECT.BSD</code>.  Contundo, se o
	    FreeBSD estiver em uma partição distinta, o
	    <code class="filename">/boot/boot1</code> não irá
	    funcionar, nesse caso, o <code class="filename">/boot/boot0</code>
	    será necessário.

	    </p><div xmlns="" class="warning"><h3 class="admontitle">Atenção: </h3><p xmlns="http://www.w3.org/1999/xhtml">NÃO COPIE SIMPLESMENTE O
		<code class="filename">/boot/boot0</code> NO LUGAR DO
		<code class="filename">/boot/boot1</code>, POIS A TABELA DE
		PARTIÇÃO SERÁ REESCRITA, E O
		COMPUTADOR SE TORNARÁ NÃO
		INICIALIZÁVEL!!</p></div><p> O <code class="filename">/boot/boot0</code> precisa ser
	    instalado com o sysinstall, selecionando o gerenciador de
	    inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) do FreeBSD na tela
	    que o programa pergunta se você deseja usar um
	    gerenciador de inicialização(boot manager).
	    Isso se deve ao fato que o
	    <code class="filename">/boot/boot0</code> contém
	    informações sobre a área da tabela de
	    partições definidas como caracteres nulos,
	    mas o sysinstall copia a tabela de partições
	    antes de copiar o <code class="filename">/boot/boot0</code> para a
	    MBR.</p><p>Quando o gerenciador de inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) do FreeBSD é
	    executado, ele grava qual último sistema
	    operacional foi carregado, definindo uma flag de sistema
	    ativo na tabela de partição referente aquele
	    sistema, e depois ele escreve todos os 512 bytes do
	    próprio gerenciador de inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) de volta na MBR,
	    portanto se o <code class="filename">/boot/boot0</code>
	    simplesmente for copiado para
	    <code class="filename">C:\BOOTSECT.BSD</code> será definida
	    uma tabela de partição vazia com a flag de
	    partição ativa, na MBR.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68435536"></a><a id="lilo-bootloader"></a><p><strong>9.10.</strong></p></td><td align="left" valign="top"><p>Como posso iniciar o FreeBSD e o Linux com o
	    LILO?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Caso o FreeBSD e o Linux estejam no mesmo disco, basta
	    seguir as instruções de
	    instalação do LILO para carregar sistemas
	    operacionais não-Linux.  De forma breve, tais
	    instruções são</p><p>Carregue o Linux e adicione as seguintes linhas no
	    <code class="filename">/etc/lilo.conf</code>:</p><pre class="programlisting">other=/dev/hda2
	table=/dev/hda
	label=FreeBSD</pre><p>(A definição acima assume que a sua
	    partição FreeBSD é conhecida pelo
	    Linux como <code class="filename">/dev/hda2</code>; altere esse
	    valor para sua necessidade).  Depois basta executar o
	    comando <code class="command">lilo</code> como usuário
	    <code class="systemitem">root</code> e deve estar pronto.</p><p>Caso o FreeBSD esteja em um outro disco, será
	    preciso criar uma entrada
	    <code class="literal">loader=/boot/chain.b</code> no LILO.  Por
	    exemplo:</p><pre class="programlisting">other=/dev/dab4
        table=/dev/dab
        loader=/boot/chain.b
        label=FreeBSD</pre><p>Em alguns casos é necessário especificar
	    o número da unidade da BIOS para que o loader do
	    FreeBSD consiga carregar o sistema com sucesso, a partir
	    do segundo disco.  Por exemplo, caso o disco SCSI com o
	    FreeBSD seja reconhecido pela BIOS como o disco 1, na tela
	    do carregadir de inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot loader</em></span>) do FreeBSD
	    será necessário definir:</p><pre class="screen">Boot: <strong class="userinput"><code>1:da(0,a)/kernel</code></strong></pre><p>No FreeBSD 2.2.5 e posteriores, o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot</span>(8)</span></a>  pode
	    ser configurado para que ele automaticamente defina essa
	    informação na hora da
	    inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>).</p><p>The <a class="link" href="http://sunsite.unc.edu/LDP/HOWTO/mini/Linux+FreeBSD.html" target="_top">
	      Linux+FreeBSD mini-HOWTO</a> é uma boa
	    referência sobre a utilização do
	    FreeBSD com o Linux.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68453840"></a><a id="booteasy-loader"></a><p><strong>9.11.</strong></p></td><td align="left" valign="top"><p>Como eu inicio o FreeBSD e o Linux usando o
	    BootEasy?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Instale o LILO no começo da sua
	    partição de inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) do Linux ao
	    invés de instala-lo na MBR.  Agora o LILO pode ser
	    carregado a partir do BootEasy.</p><p>Com Windows 9x e Linux essa é uma
	    ação recomendada sempre, para garantir que o
	    Linux possa ser iniciado de forma mais fácil caso
	    seja necessário reinstalar o Windows (que é
	    um sistema operacional que não espera nenhum outro
	    sistema na MBR).</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68456656"></a><a id="changing-bootprompt"></a><p><strong>9.12.</strong></p></td><td align="left" valign="top"><p>Como eu altero a tela de inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) de
	    <code class="literal">???</code> para algo mais
	    significativo?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Você não pode alterar esse comportamento
	    no gerenciador de inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) padrão sem
	    reescreve-lo.  Existem inúmeros outros
	    gerenciadores de inicialização
	    (<span class="foreignphrase"><em class="foreignphrase">boot</em></span>) na categoria
	    <code class="filename">sysutils</code> da da coleção
	    de <code class="literal">ports</code>, que oferecem esse
	    recurso.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68465232"></a><a id="removable-drives"></a><p><strong>9.13.</strong></p></td><td align="left" valign="top"><p>Possuo uma nova unidade de disco removível,
	    como posso usa-la?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ainda que seja uma unidade removível como um
	    ZIP Drive, um EZ Drive (ou até um disquete, caso
	    queira usa-lo dessa maneira), ou um novo disco, uma vez
	    instalado e reconhecido pelo sistema e assim que o
	    cartucho/disquete/outra-coisa esteja ligado a unidade em
	    questão, as coisas passam a funcionar da mesma
	    forma para qualquer tipo de dispositivo.</p><p><a id="disklabel"></a>(essa seção
	    é baseada no <a class="link" href="http://www.vmunix.com/mark/FreeBSD/ZIP-FAQ.html" target="_top">ZIP
	      <code class="literal">FAQ</code> de Mark Mayo</a>)</p><p>Caso o dispositivo seja um ZIP Drive ou um disquete
	    cujo sistema de arquivos já tenha sido criado como
	    sendo do tipo DOS, o seguinte comando é o bastante
	    para montá-lo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t msdos /dev/fd0c /floppy</code></strong></pre><p>caso seja um disquete, ou então:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t msdos /dev/da2s4 /zip</code></strong></pre><p>caso seja um disco ZIP com as
	    configurações de fábrica.</p><p>Para outros tipos de disco, veja como eles são
	    tratados, usando o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> ou
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>.</p><p>Os próximos exemplos serão para um ZIP
	    Drive controlado pela device da2, ou seja, correspondente
	    ao terceiro disco SCSI.</p><p>A não ser que se trate de um disquete ou de um
	    disco removível que se planeje compartilhar com
	    outras pessoas, provavelmente é mais sensata a
	    idéia de colocar um sistema de arquivos do tipo BSD
	    nesse disco.  Um sistema de arquivos desse tipo
	    possibilita usar o suporte a nomes longos de arquivos, ter
	    uma performance de, pelo menos 2x, e oferece muito mais
	    estabilidade e confiança.  O primeiro passo
	    é redefinir a partição DOS da unidade
	    removível de forma que a mesma passe a ser do tipo
	    BSD;  o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> ou
	    <code class="filename">/stand/sysinstall</code> podem ser usados
	    para esse fim, em um disco pequeno onde não se
	    queira preocupações quanto a possibilidade
	    de manter suporte a múltiplos sistemas
	    operacionais.  Nesse caso simplesmente elimine toda a
	    partição FAT do disco e use o particionador
	    do BSD:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/rda2 count=2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -Brw da2 auto</code></strong></pre><p>O disklabel ou <code class="filename">/stand/sysinstall</code>
	    podem ser usados para criar múltiplas
	    partições do tipo BSD.  Certamente o
	    usuário vai querer criar mais de uma
	    partição BSD se a intenção for
	    criar espaço de Swap.  De qualquer forma, esse tipo
	    de ação é irrelevante em um disco
	    removível do tipo ZIP.</p><p>Finalmente, crie um novo sistema de arquivos como
	    esse, que usa todo o disco em um ZIP Drive:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/rda2c</code></strong></pre><p>e monte-o:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/da2c /zip</code></strong></pre><p>provavelmente é uma boa idéia adicionar
	    uma entrada no <code class="filename">/etc/fstab</code> para
	    facilitar o processo de montagem dessa unidade(veja
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a>)de forma que seja apenas necessário
	    digitar o comando <code class="command">mount /zip</code> no
	    futuro:</p><pre class="programlisting">/dev/da2c /zip ffs rw,noauto 0 0</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68483536"></a><a id="mount-cd-superblock"></a><p><strong>9.14.</strong></p></td><td align="left" valign="top"><p>Por que eu tive o erro <span class="errorname">Incorrect super
	      block</span> na hora de montar um CDROM?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>É necessário avisar ao <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> que
	    tipo de unidade está sendo montada.  Essa
	    definição é tratada com mais detalhes
	    em <a class="link" href="../handbook/creating-cds.html" target="_top"> na
	      seção de mídias ópticas do
	      Manual do FreeBSD </a>, mais precisamente na
	    seção <a class="link" href="../handbook/creating-cds.html#MOUNTING-CD" target="_top">Usando
	      CDs de Dados</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68487760"></a><a id="cdrom-not-configured"></a><p><strong>9.15.</strong></p></td><td align="left" valign="top"><p><span class="errorname">Device not configured</span> ocorre na
	    hora de montar o CDROM?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Geralmente esse tipo de comportamento indica que
	    não existe nenhum CD na unidade de CDROM, ou
	    então, que o CD em questão não
	    é visível ao barramento de dados do seu PC,
	    comum quando um CD-RW não pode ser lido por um
	    drive tradicional.  Por gentileza, queira referir-se a
	    <a class="link" href="../handbook/creating-cds.html#MOUNTING-CD" target="_top">Usando
	      CDs de Dados </a> da seção do
	    Manual do FreeBSD para uma discussão mais
	    detalhada sobre esse assunto.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68502992"></a><a id="cdrom-unicode-filenames"></a><p><strong>9.16.</strong></p></td><td align="left" valign="top"><p>Porque todos caracteres não-Inglês
	    são apresentados como <span class="quote">&#8220;<span class="quote">?</span>&#8221;</span> no sistema
	    de arquivos do CD que acabou de ser montado no
	    FreeBSD?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Provavelmente seu CDROM usa extensões
	    <span class="quote">&#8220;<span class="quote">Joliet</span>&#8221;</span> para armazenar
	    informações sobre tipos de arquivos e
	    diretórios.  Esse assunto é discutido no
	    capítulo de <a class="link" href="../handbook/creating-cds.html" target="_top">
	      Criação e Uso de CDROMs do
	      Manual do FreeBSD</a>, mais precisamente na
	    seção <a class="link" href="../handbook/creating-cds.html#MOUNTING-CD" target="_top">de Uso
	      de CDs de Dados</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68506960"></a><a id="burncd-isofs"></a><p><strong>9.17.</strong></p></td><td align="left" valign="top"><p>Eu queimei um CD no FreeBSD e agora esse disco
	    não pode ser lido em nenhum outro sistema
	    operacional.  Por que?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Provavelmente você queimou um CD de forma crua
	    (usando raw mode) no seu sistema, ao invés de criar
	    um sistema de arquivos do tipo ISO 9660.  Dê uma
	    olhada no <a class="link" href="../handbook/creating-cds.html" target="_top">
	      Capítulo de Criação de CDROMs do
	      Manual do FreeBSD</a>, em específico na
	    seção <a class="link" href="../handbook/creating-cds.html#RAWDATA-CD" target="_top">criando
	      CDS de dados puros</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68510032"></a><a id="copy-cd"></a><p><strong>9.18.</strong></p></td><td align="left" valign="top"><p>Como posso criar uma imagem de um CD de dados?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A criação de imagens de CDs de dados
	    é discutida na seção <a class="link" href="../handbook/creating-cds.html#IMAGING-CD" target="_top">duplicando
	      CDs de dados do Manual do FreeBSD</a>.  Para mais
	    informações sobre unidades ópticas,
	    por gentileza, queira referir-se a seção
	    <a class="link" href="../handbook/creating-cds.html" target="_top">
	      Criação de CDs</a> no capítulo
	    de Armazenamento do Manual do FreeBSD.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68513360"></a><a id="mount-audio-CD"></a><p><strong>9.19.</strong></p></td><td align="left" valign="top"><p>Por que um CD de áudio não pode ser
	    montado com o comando <code class="command">mount</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ao tentar montar um CD de áudio, o mais
	    provável é que ocorra um erro do tipo
	    <span class="errorname">cd9660: /dev/acd0c: Invalid
	      argument</span>.  Isso se deve ao fato que o
	    comando <code class="command">mount</code> trabalha exclusivamente
	    com sistema de arquivos, o que não é o caso
	    de CDs de áudio.  CDs de áudio contém
	    apenas dados, e por isso é necessário alguma
	    aplicação capaz de ler tais CDs.  Use algum
	    programa como o <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/xmcd/pkg-descr">audio/xmcd</a>na
	    coleção de <code class="literal">Ports</code> do
	    FreeBSD para ler dados em CDs desse tipo.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68517328"></a><a id="multi-session-CD"></a><p><strong>9.20.</strong></p></td><td align="left" valign="top"><p>Como eu monto um CD com múltiplas
	    sessões de gravação?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Por padrão, o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> tenta montar a
	    última trilha de dados (sessão) de um CD.
	    Caso queira montar uma sessão anterior pode-se usar
	    o argumento <code class="option">-s</code> na linha de comando em
	    questão.  Por gentileza, refira-se a página
	    de manual do comando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_cd9660&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_cd9660</span>(8)</span></a> para obter
	    exemplos específicos do uso dessa e de outras
	    opções.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68521552"></a><a id="user-floppymount"></a><p><strong>9.21.</strong></p></td><td align="left" valign="top"><p>Como posso permitir que usuários comuns montem
	    disquetes, CDROMs e outros tipos de mídia
	    removível?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Usuários comuns podem ter a permissão de
	    montar dispositivos.  Veja como:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Como <code class="systemitem">root</code> defina a
		variável <code class="varname">vfs.usermount</code> do
		sysctl para <code class="literal">1</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl -w vfs.usermount=1</code></strong></pre></li><li class="step"><p>Como <code class="systemitem">root</code> defina as
		permissões apropriadas nos dispositivos
		associados ao controle da mídia
		removível.</p><p>Por exemplo, para permitir que os usuários
		possam montar a primeira unidade de disquete,
		use:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 666 /dev/fd0</code></strong></pre><p>Para permitir que os usuários do grupo
		<code class="systemitem">operator</code> montem a unidade de
		CDROM, use:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chgrp operator /dev/cd0c</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 640 /dev/cd0c</code></strong></pre></li><li class="step"><p>Finalmente, para tornar essa
		alteração permanente, adicione a linha
		<code class="literal"> vfs.usermount=1</code>
		no arquivo
		<code class="filename">/etc/sysctl.conf</code>.</p></li></ol></div><p>Agora todos os usuários podem montar qualquer
	    disquete no <code class="filename">/dev/fd0</code> em algum
	    ponto de montagem que lhes pertença:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mkdir ~/my-mount-point</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>mount -t msdos /dev/fd0 ~/my-mount-point</code></strong></pre><p>Os usuários no grupo
	    <code class="systemitem">operator</code> agora tem permissão
	    para montar os CDs no <code class="filename">/dev/cd0c</code>
	    em qualquer ponto de montagem que lhes
	    pertença:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mkdir ~/my-mount-point</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>mount -t msdos /dev/cd0c ~/my-mount-point</code></strong></pre><p>Desmontar o dispositivo é extremamente
	    simples:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>umount ~/my-mount-point</code></strong></pre><p>Contudo, habilitar a opção
	    <code class="varname">vfs.usermount</code>, contudo, causa algumas
	    implicâncias quanto ao quesito segurança;.  A
	    forma mais racional de acessar mídia do tipo MSDOS
	    no FreeBSD é usando a aplicação
	    <a class="link" href="http://www.FreeBSD.org/cgi/ports.cgi?query=%5Emtools-&amp;stype=name" target="_top">mtools
	    </a>, disponível na Coleção de
	    <code class="literal">Ports</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68546384"></a><a id="du-vs-df"></a><p><strong>9.22.</strong></p></td><td align="left" valign="top"><p>Os comandos <code class="command">du</code> e
	    <code class="command">df</code> apresentam quantias distintas de
	    espaço em disco disponível.  O que
	    está havendo?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>É necessário entender o que os comandos
	    <code class="command">du</code> e <code class="command">df</code> realmente
	    fazem.  O <code class="command">du</code> percorre a árvore
	    de diretórios medindo o tamanho de cada arquivo e
	    apresentando o total da soma de todos os arquivos
	    encontrados em um dado diretório, e posteriormente
	    apresentando a soma de ambos subdiretórios no
	    diretório de nível seguinte,
	    <code class="command">df</code> simplesmente pergunta ao sistema de
	    arquivos quanto espaço ainda lhe resta.  Parece o
	    mesmo comportamento, mas um arquivo alocado fora de um
	    diretório, por exemplo, afeta os dados apresentados
	    pelo <code class="command">df</code>, mas não afeta o
	    <code class="command">du</code>.</p><p>Quando um programa está usando algum arquivo, e
	    este é apagado, o arquivo não é
	    retirado do sistema de arquivos até que o programa
	    em questão pare de usá-lo.  Contudo, esse
	    arquivo é imediatamente deletado da listagem de
	    diretórios; isso pode ser mais bem observado com
	    algum paginador como o <code class="command">more</code>.  Por
	    exemplo, assuma que existe um arquivo grande o bastante
	    que sua presença seja perceptível claramente
	    na saída dos comandos <code class="command">du</code> e
	    <code class="command">df</code>.  (Considerando que hoje em dia os
	    discos são bem grandes, o arquivo em questão
	    deve ser um arquivo de tamanho <span class="emphasis"><em>extremamente
	      considerável!</em></span>) Caso o arquivo seja
	    apagado em quanto ele esteja sendo paginado com o
	    <code class="command">more</code>, pode-se perceber que o
	    <code class="command">more</code> não passa a reclamar que o
	    arquivo não pode mais ser visualizado no mesmo
	    instante.  Contudo, a listagem, do diretório em
	    questão não apresentará mais esse
	    arquivo, de forma que nenhum usuário ou outro
	    programa possa acessá-lo.  A entrada do arquivo no
	    diretório é simplesmente removida.  O
	    <code class="command">du</code> vai mostrar que esse arquivo
	    não existe mais &#8212; -- afinal, o du percorreu
	    todo o diretório e não encontrou esse
	    arquivo listado -- contudo o <code class="command">df</code> mostra
	    que o arquivo continua no disco, pois o sistema de
	    arquivos sabe que o <code class="command">more</code> continua
	    usando aquele espaço de dados que se encontram no
	    disco.  Uma vez terminada a sessão do
	    <code class="command">more</code>,<code class="command">du</code> e
	    <code class="command">df</code> concordarão entre si.</p><p>Note que em sistemas de arquivos com softupdates, a
	    liberação de espaço em disco
	    também pode ser atrasada em até 30 segundos
	    dependendo da situação; apenas depois desse
	    tempo, a alteração em disco será
	    visível!</p><p>Esse comportamento é comum e fácil de
	    ser observado em Servidores Web.  Muitos usuários
	    configuram algum Servidor Web no FreeBSD e se esquecem de
	    rotacionar os arquivos de log da aplicação,
	    os quais entopem o <code class="filename">/var</code>.  O novo
	    administrador do sistema deleta os arquivos de log em
	    questão, mas o sistema operacional continua
	    reclamando que a partição está cheia,
	    até que o Servidor Web seja desligado e religado,
	    de forma que a aplicação libera o arquivo e
	    permite que o sistema apague o arquivo, recuperando o
	    espaço em disco em questão.  Para prevenir
	    que isso ocorra, configure o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newsyslog</span>(8)</span></a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp68566864"></a><a id="add-swap-space"></a><p><strong>9.23.</strong></p></td><td align="left" valign="top"><p>Como eu posso adicionar mais espaço para
	    <span class="foreignphrase"><em class="foreignphrase">swap</em></span>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>No capítulo <a class="link" href="../handbook/config-tuning.html" target="_top">Configuração
	      e Ajuste Fino
	      (<span class="foreignphrase"><em class="foreignphrase">Tuning</em></span>)</a> do
	    Manual do FreeBSD, pode ser encontrada uma <a class="link" href="../handbook/adding-swap-space.html" target="_top">seção
	    </a> descrevendo como fazer isto.</p></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="kernelconfig.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="admin.html">Próxima</a></td></tr><tr><td width="40%" align="left" valign="top">Capítulo 8. Configuraçãao do
      <span class="foreignphrase"><em class="foreignphrase">Kernel</em></span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Principal</a></td><td width="40%" align="right" valign="top"> Capítulo 10. Administração do Sistema</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Este, e outros documentos, podem ser obtidos em
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Para perguntas sobre FreeBSD, leia a
    <a href="http://www.FreeBSD.org/docs.html">documentação</a> antes de contatar
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Para perguntas sobre esta documentação, envie e-mail para
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>