<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>32.7. Дискгүй ажиллагаа</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="advanced-networking.html" title="Бүлэг 32. Сүлжээний нэмэлт ойлголтууд" /><link rel="prev" href="network-aggregation.html" title="32.6. Холбоос нэгтгэлт ба ослыг тойрон гарах (Link Aggregation and Failover)" /><link rel="next" href="network-pxe-nfs.html" title="32.8. NFS root файлын систем ашиглан PXE ачаалалт хийх" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">32.7. Дискгүй ажиллагаа</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-aggregation.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 32. Сүлжээний нэмэлт ойлголтууд</th><td width="20%" align="right"> <a accesskey="n" href="network-pxe-nfs.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-diskless"></a>32.7. Дискгүй ажиллагаа</h2></div><div><span class="authorgroup">Шинэчилсэн <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Жан-Франсуа</span> <span class="surname">Докье</span></span>. </span></div><div><span class="authorgroup">Дахин зохион байгуулж өргөтгөсөн <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Алекс</span> <span class="surname">Дюпре</span></span>. </span></div></div></div><a id="idp94096336" class="indexterm"></a><a id="idp94096848" class="indexterm"></a><p>FreeBSD машин сүлжээгээр ачаалан локал дискгүйгээр <acronym class="acronym">NFS</acronym>
	сервер дээр холбогдсон файлын системүүд ашиглаад ажиллаж чаддаг. Стандарт тохиргооны
	файлуудаас өөр системийн өөрчлөлт шаардлагагүй. Ийм системийг харьцангуй хялбараар
	тохируулж болдог. Учир нь шаардлагатай бүх элементүүд бэлэн байдаг:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Цөмийг сүлжээгээр ачаалах хоёр боломжит арга хамгийн багаар бодоход
	байдаг:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><acronym class="acronym">PXE</acronym>: <span class="trademark">Intel</span>®-ийн Preboot eXecution
	      Environment буюу ачаалалт хийгдэхээс өмнөх ажиллуулах орчны систем нь
		зарим сүлжээний картууд эсвэл эх хавтангуудад цуг бүтээгдсэн байдаг
		ухаалаг ачаалах ROM-ийн нэг хэлбэр юм. Илүү дэлгэрэнгүйг
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a>-с үзнэ үү.</p></li><li class="listitem"><p><span class="application">Etherboot</span>
	      	порт (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/etherboot/pkg-descr">net/etherboot</a>) нь
		цөмийг сүлжээгээр ачаалах ROM хийгдэх боломжтой код үүсгэдэг.
		Код нь сүлжээний картан дээр ачаалах ROM уруу шарагдсан байх юм уу эсвэл
		локал уян (эсвэл хатуу) дискний хөтчөөс эсвэл ажиллаж байгаа <span class="trademark">MS-DOS</span>®
		системээс дуудагдахаар байдаг. Олон сүлжээний карт дэмжигдсэн
		байгаа.</p></li></ul></div></li><li class="listitem"><p>Жишээ скрипт (<code class="filename">/usr/share/examples/diskless/clone_root</code>)
	нь сервер дээр ажлын станцын root файлын системийг үүсгэх болон түүний ажиллагааг хангах
	үйлдлийг хөнгөвчилдөг. Скрипт нь магадгүй жижиг өөрчлөлтийг шаардаж болох боловч
	энэ нь таныг хурдан эхлүүлэх болно.</p></li><li class="listitem"><p>Дискгүй системийн эхлүүлэлтийг илрүүлж дэмжих стандарт системийн эхлүүлэгч
	файлууд <code class="filename">/etc</code> санд байдаг.</p></li><li class="listitem"><p>swap хийх хэрэв шаардлагатай бол <acronym class="acronym">NFS</acronym> файл эсвэл
	локал диск уруу хийж болох юм.</p></li></ul></div><p>Дискгүй ажлын станцуудыг тохируулах олон арга байдаг. Олон элементүүд үүнд
	хамрагддаг бөгөөд өөрийн сонирхлоор ихэнхийг нь өөрчилж болно. Дараах нь
	бүрэн системийг тохируулах талаар хувилбаруудыг тайлбарлах болно. Ингэхдээ
	стандарт FreeBSD эхлүүлэх скриптүүдтэй хялбар, нийцтэй байхыг чухалчлах
	болно. Тайлбарласан систем нь дараах шинжүүдтэй байна:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Дискгүй ажлын станцууд нь хуваалцсан, зөвхөн уншигдах
	<code class="filename">/</code> файлын систем болон хуваалцсан, зөвхөн уншигдах
	<code class="filename">/usr</code>-г ашигладаг.</p><p>root файлын систем нь зөвхөн дискгүй ажиллагаатай холбоотой эсвэл
	тэдгээрийн харьяалагдах ажлын станцтай холбоотой зарим тохиргооны
	файлууд нь өөрчлөгдсөн стандарт FreeBSD root-ийн (ихэвчлэн серверийн)
	хуулбар юм.</p><p>Бичигдэх боломжтой байх root-ийн хэсэг нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> файлын
	системээр дээр тавигддаг (overlaid). Систем дахин ачаалахад хийгдсэн
	өөрчлөлтүүд алга болох болно.</p></li><li class="listitem"><p>Цөм дамжуулагдаж <span class="application">Etherboot</span> эсвэл
	<acronym class="acronym">PXE</acronym>-ийн аль нэгээр дуудагддаг бөгөөд зарим тохиолдолд
	зөвхөн аль нэг аргыг ашиглахыг шаардаж болох юм.</p></li></ul></div><div xmlns="" class="caution"><h3 class="admontitle">Анхааруулга: </h3><p xmlns="http://www.w3.org/1999/xhtml">Тайлбарласны дагуу энэ систем нь аюултай юм. Энэ нь сүлжээний
	хамгаалагдсан талбарт байх ёстой бөгөөд бусад хостуудаас хандахааргүй
	байх ёстой.</p></div><p>Энэ хэсгийн бүх мэдээллийг FreeBSD 5.2.1-RELEASE ашиглан тест хийсэн болно.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94122448"></a>32.7.1. Үндсэн мэдээлэл</h3></div></div></div><p>Дискгүй ажлын станцуудыг тохируулах нь харьцангуй амархан боловч алдаанд
	өртөх хандлагатай байдаг. Хэд хэдэн шалтгаанаас болоод эдгээрийг заримдаа
	оношлох төвөгтэй байдаг. Жишээ нь:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Эмхэтгэлтийн үеийн тохируулгууд нь ажиллах үед өөрөөр ажиллахыг
		тодорхойлж болох юм.</p></li><li class="listitem"><p>Алдааны мэдэгдлүүд нь ихэвчлэн нуугдмал эсвэл бүр байхгүй ч
		байж болно.</p></li></ul></div><p>Энд гарч болзошгүй асуудлуудыг шийдэхэд үндсэн арга замуудын зарим нэг
	мэдлэгийг ашиглах нь маш ашигтай байдаг.</p><p>Амжилттайгаар эхлүүлэхийн тулд хэд хэдэн үйлдлүүдийг хийх хэрэгтэй:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Машин өөрийн IP хаяг, ажиллах файлын нэр, серверийн нэр, root зам
		зэрэг эхний параметрүүдийг авах хэрэгтэй. Үүнийг <acronym class="acronym">DHCP</acronym> эсвэл
		BOOTP протоколуудыг ашиглан хийдэг. <acronym class="acronym">DHCP</acronym> нь
		BOOTP-ийн нийцтэй өргөтгөл бөгөөд адил портын дугаарууд болон үндсэн
		пакетийн хэлбэршүүлэлтийг ашигладаг.</p><p>Зөвхөн BOOTP ашиглахаар системийг тохируулах боломжтой.
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bootpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bootpd</span>(8)</span></a> серверийн програм нь үндсэн FreeBSD системд орсон
		байдаг.</p><p>Гэхдээ <acronym class="acronym">DHCP</acronym> нь BOOTP-ээс хэд хэдэн давуу
		талтай байдаг (илүү сайхан тохиргооны файлууд, <acronym class="acronym">PXE</acronym>
		ашиглах боломж, дискгүй ажиллагаатай шууд холбоогүй бусад олон давуу талууд)
		бөгөөд бид голчлон <acronym class="acronym">DHCP</acronym> тохиргоог боломжтой бол
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bootpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bootpd</span>(8)</span></a> ашиглан таарах жишээнүүдтэй нь хамт тайлбарлах болно.
		Жишээ тохиргоо нь <span class="application">ISC DHCP</span> програм
		хангамжийн багцыг (тест сервер дээр 3.0.1.r12 хувилбар суулгагдсан)
		ашиглах болно.</p></li><li class="listitem"><p>Машин нь нэг буюу хэд хэдэн програмуудыг локал санах ой уруугаа дамжуулах
		хэрэгтэй болно.  <acronym class="acronym">TFTP</acronym> юм уу эсвэл <acronym class="acronym">NFS</acronym>
		ашиглагдана. <acronym class="acronym">TFTP</acronym> болон <acronym class="acronym">NFS</acronym>-ийн
		сонголтыг хэд хэдэн газар эмхэтгэх үеийн тохируулгаар хийдэг. Алдааны түгээмэл
		эх үүсвэр нь буруу протоколд зориулж файлын нэрүүдийг заах явдал юм:
		<acronym class="acronym">TFTP</acronym> нь сервер дээрх ганц сангаас бүх файлуудыг
		ихэвчлэн дамжуулдаг бөгөөд энэ сантай харьцангуй файлын нэрсийг хүлээдэг.
		<acronym class="acronym">NFS</acronym>-д файлын туйлын (абсолют) замууд хэрэгтэй
		байдаг.
	  </p></li><li class="listitem"><p>Боломжит дундын эхлүүлэх програмууд болон цөм нь эхлэн тохируулагдаж ажиллах
		шаардлагатай. Энд хэд хэдэн чухал хувилбарууд байдаг:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><acronym class="acronym">PXE</acronym> нь FreeBSD-ийн гурав дахь шатны дуудагчийн
		өөрчлөгдсөн хувилбар болох <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a>-ийг ачаална. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a> нь
		системийг эхлүүлэхэд шаардлагатай ихэнх параметрүүдийг авч хяналтыг дамжуулахаасаа
		өмнө тэдгээрийг цөмийн орчинд үлдээх болно. Энэ тохиолдолд
		<code class="filename">GENERIC</code> цөмийг ашиглах боломжтой.</p></li><li class="listitem"><p><span class="application">Etherboot</span> нь бага бэлтгэлтэйгээр
		цөмийг шууд ачаалах болно. Та цөмийг тусгай тохируулгуудтай бүтээх
		хэрэгтэй болно.</p></li></ul></div><p><acronym class="acronym">PXE</acronym> болон <span class="application">Etherboot</span>
		нь адилхан ажиллана; гэхдээ цөмүүд нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>-ийн тэдэнд зориулж
		илүү ажил хийх боломжийг олгодог болохоор <acronym class="acronym">PXE</acronym> нь
		зохимжтой арга юм.</p><p>Хэрэв таны <acronym class="acronym">BIOS</acronym> болон сүлжээний картууд нь
		<acronym class="acronym">PXE</acronym>-г дэмждэг бол та үүнийг ашиглах
		хэрэгтэй байж болох юм.</p></li><li class="listitem"><p>Эцэст нь машин өөрийн файлын системүүдэд хандах хэрэгтэй болно.
		<acronym class="acronym">NFS</acronym> нь бүх тохиолдолд хэрэглэгдэнэ.</p></li></ul></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diskless&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">diskless</span>(8)</span></a> гарын авлагын хуудсыг бас үзнэ үү.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94167120"></a>32.7.2. Тохируулах зааврууд</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94167760"></a>32.7.2.1. <span class="application">ISC DHCP</span> ашиглах тохиргоо</h4></div></div></div><a id="idp94168656" class="indexterm"></a><p><span class="application">ISC DHCP</span> сервер BOOTP болон
		<acronym class="acronym">DHCP</acronym> хүсэлтүүдэд хариулж чаддаг.</p><p><span class="application">ISC DHCP 4.2</span> нь үндсэн системийн
		хэсэг биш юм. Та эхлээд <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp42-server/pkg-descr">net/isc-dhcp42-server</a>
		порт юм уу эсвэл тохирох багцыг суулгах хэрэгтэй.</p><p><span class="application">ISC DHCP</span> суулгагдсаны дараа
		ажиллахын тулд тохиргооны файл хэрэгтэй болно (ихэвчлэн
		<code class="filename">/usr/local/etc/dhcpd.conf</code> гэж
		нэрлэгддэг). Доор <code class="systemitem">margaux</code> хост <span class="application">Etherboot</span>-ийг
		ашигласан ба <code class="systemitem">corbieres</code> хост <acronym class="acronym">PXE</acronym>-г ашиглаж байгаа
		тайлбар хийгдсэн жишээ байна:</p><pre class="programlisting">default-lease-time 600;
max-lease-time 7200;
authoritative;

option domain-name "example.com";
option domain-name-servers 192.168.4.1;
option routers 192.168.4.1;

subnet 192.168.4.0 netmask 255.255.255.0 {
  use-host-decl-names on; <a id="co-dhcp-host-name"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
  option subnet-mask 255.255.255.0;
  option broadcast-address 192.168.4.255;

  host margaux {
    hardware ethernet 01:23:45:67:89:ab;
    fixed-address margaux.example.com;
    next-server 192.168.4.4; <a id="co-dhcp-next-server"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
    filename "/data/misc/kernel.diskless"; <a id="co-dhcp-filename"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
    option root-path "192.168.4.4:/data/misc/diskless"; <a id="co-dhcp-root-path"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
  }
  host corbieres {
    hardware ethernet 00:02:b3:27:62:df;
    fixed-address corbieres.example.com;
    next-server 192.168.4.4;
    filename "pxeboot";
    option root-path "192.168.4.4:/data/misc/diskless";
  }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-host-name"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Энэ тохируулга нь
		<code class="literal">host</code> зарлалтууд дахь утгыг дискгүй хостын
		хувьд хостын нэр болгон илгээхийг <span class="application">dhcpd</span>-д
		хэлнэ. Өөр нэг арга нь <code class="literal">option host-name
		  margaux</code> мөрийг
		<code class="literal">host</code> зарлалтуудын дотор нэмэх явдал юм.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-next-server"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>
		<code class="literal">next-server</code> тохируулга нь дуудагч эсвэл цөмийн
		файлыг дуудахад зориулж <acronym class="acronym">TFTP</acronym> эсвэл
		<acronym class="acronym">NFS</acronym> серверийг ашиглахыг зааж өгнө (анхдагчаар
		<acronym class="acronym">DHCP</acronym> сервер байгаа хостыг ашиглана).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-filename"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>
		<code class="literal">filename</code> тохируулга нь <span class="application">Etherboot</span>
		эсвэл <acronym class="acronym">PXE</acronym>-ийн дараагийн ажиллуулах алхамд дуудах
		файлыг тодорхойлно. Үүнийг ашиглах дамжуулалтын аргын дагуу заасан байх
		ёстой. <span class="application">Etherboot</span>-ийг
		<acronym class="acronym">NFS</acronym> эсвэл <acronym class="acronym">TFTP</acronym>
		ашиглахаар эмхэтгэж болно. FreeBSD порт нь <acronym class="acronym">NFS</acronym>-ийг
		анхдагчаар тохируулдаг. <acronym class="acronym">PXE</acronym> нь
		<acronym class="acronym">TFTP</acronym>-г ашигладаг. Энд яагаад харьцангуй файлын
		нэр хэрэглэгддэгийн учир нь тэр юм (энэ нь <acronym class="acronym">TFTP</acronym>
		серверийн тохиргооноос хамаарах боловч ерөнхийдөө нэлээн энгийн байх болно).
		<acronym class="acronym">PXE</acronym> нь цөмийг биш бас <code class="filename">pxeboot</code>-г
		дууддаг. FreeBSD CD-ROM
		<code class="filename">/boot</code> сангаас
		<code class="filename">pxeboot</code>-ийг дуудах зэрэг бусад сонирхолтой боломжууд
		байдаг (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a> нь <code class="filename">GENERIC</code> цөмийг
		ачаалж чаддаг бөгөөд энэ нь алсын CD-ROM-с ачаалахын тулд <acronym class="acronym">PXE</acronym>-г
		ашиглах боломжтой болгодог юм).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-root-path"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>
		<code class="literal">root-path</code> тохируулга нь root файлын систем хүрэх
		замыг энгийн <acronym class="acronym">NFS</acronym> бичлэгээр тодорхойлдог.
		<acronym class="acronym">PXE</acronym> ашиглаж байгаа үед цөмийн тохиргоо BOOTP-г идэвхжүүлээгүй
		байхад хостын IP-г орхигдуулах боломжтой байдаг. <acronym class="acronym">NFS</acronym>
		сервер дараа нь <acronym class="acronym">TFTP</acronym> сервертэй адил
		болох болно.</p></td></tr></table></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94200656"></a>32.7.2.2. BOOTP ашиглах тохиргоо</h4></div></div></div><a id="idp94201296" class="indexterm"></a><p>Энд <span class="application">bootpd</span>-ийн адил тохиргоо
		(нэг клиент болгож багасгасан) байна. Үүнийг <code class="filename">/etc/bootptab</code>
		файлаас олж болно.</p><p>BOOTP-г ашиглахын тулд <span class="application">Etherboot</span>-ийг
		анхдагч биш тохируулга <code class="literal">NO_DHCP_SUPPORT</code>-тойгоор
		эмхэтгэх ёстой бөгөөд <acronym class="acronym">PXE</acronym>-д <acronym class="acronym">DHCP</acronym>
		<span class="emphasis"><em>хэрэгтэй</em></span> гэдгийг санаарай. <span class="application">bootpd</span>-ийн
		цорын ганц илэрхий давуу тал бол үндсэн системд орсон байдаг явдал юм.</p><pre class="programlisting">.def100:\
  :hn:ht=1:sa=192.168.4.4:vm=rfc1048:\
  :sm=255.255.255.0:\
  :ds=192.168.4.1:\
  :gw=192.168.4.1:\
  :hd="/tftpboot":\
  :bf="/kernel.diskless":\
  :rp="192.168.4.4:/data/misc/diskless":

margaux:ha=0123456789ab:tc=.def100</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94219344"></a>32.7.2.3. Ачаалах програмыг <span class="application">Etherboot</span>-ээр бэлдэх</h4></div></div></div><a id="idp94220368" class="indexterm"></a><p><a class="link" href="http://etherboot.sourceforge.net" target="_top">Etherboot-ийн вэб сайт</a>
	нь Линукс системд голчлон зориулагдсан боловч ашигтай мэдээлэл агуулсан
	<a class="link" href="http://etherboot.sourceforge.net/doc/html/userman/t1.html" target="_top">
	  өргөтгөсөн баримт</a>ыг агуулдаг. Дараах нь FreeBSD систем дээр
	<span class="application">Etherboot</span>-г хэрхэн ашиглах талаар
	тайлбарлах болно.</p><p>Та эхлээд <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/etherboot/pkg-descr">net/etherboot</a> багц юм уу эсвэл портыг
	суулгах ёстой.</p><p><span class="application">Etherboot</span>-ийн тохиргоог
	<span class="application">Etherboot</span>-ийн эх байгаа сан дахь
	<code class="filename">Config</code> файлыг засварлаж (өөрөөр хэлбэл
	<acronym class="acronym">NFS</acronym>-ийн оронд <acronym class="acronym">TFTP</acronym>-г
	ашиглахын тулд) өөрчилж болно.</p><p>Бидний тохиргооны хувьд бид ачаалах уян дискийг ашиглах болно.
	Бусад аргуудын хувьд (PROM, эсвэл <span class="trademark">MS-DOS</span>® програм)
	<span class="application">Etherboot</span>-ийн баримтаас лавлана уу.</p><p>Ачаалах уян дискийг хийхийн тулд <span class="application">Etherboot</span>
	суулгасан машин дээрх хөтөч уруугаа уян дискээ хийгээд <span class="application">Etherboot</span>
	мод дахь <code class="filename">src</code> сан уруу болгож одоогийн сангаа солиод
	доор дурдсан тушаалыг бичнэ:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gmake bin32/devicetype.fd0</code></strong></pre><p><em class="replaceable"><code>devicetype</code></em> нь дискгүй ажлын
	станц дахь Ethernet картын төрлөөс хамаарна.
	Зөв <em class="replaceable"><code>devicetype</code></em> буюу төхөөрөмжийн
	төрлийг тодорхойлохын тулд тэр сан дахь <code class="filename">NIC</code>
	файлд хандана.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94231376"></a>32.7.2.4. <acronym class="acronym">PXE</acronym>-ээр ачаалах</h4></div></div></div><p>Анхдагчаар <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a> дуудагч нь <acronym class="acronym">NFS</acronym>-ээр
	цөмийг дууддаг. <code class="filename">/etc/make.conf</code> файлд
	<code class="literal">LOADER_TFTP_SUPPORT</code> тохируулга заахын оронд
	<acronym class="acronym">TFTP</acronym>-г ашиглахаар эмхэтгэгдэж болно.
	Заавруудын талаар <code class="filename">/usr/share/examples/etc/make.conf</code>
	файл дахь тайлбаруудыг үзнэ үү.</p><p>Цуваа консол дискгүй машин тохируулахад ашигтай байж болох
	 <code class="filename">make.conf</code> файлын өөр хоёр тохируулга байдаг: эдгээр нь
	<code class="literal">BOOT_PXELDR_PROBE_KEYBOARD</code>, болон
	  <code class="literal">BOOT_PXELDR_ALWAYS_SERIAL</code> юм.</p><p>Машин эхлэхэд <acronym class="acronym">PXE</acronym>-г ашиглахын тулд та өөрийн
	<acronym class="acronym">BIOS</acronym>-ийн тохируулгаас <code class="literal">Boot from network</code>
	буюу <code class="literal">Сүлжээнээс ачаалах</code> сонголтыг сонгох юм
	уу эсвэл PC-г эхлүүлж байх үед функцийн товчлуурыг дарах хэрэгтэй.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94239312"></a>32.7.2.5. <acronym class="acronym">TFTP</acronym> болон <acronym class="acronym">NFS</acronym> серверүүдийг тохируулах</h4></div></div></div><a id="idp94240592" class="indexterm"></a><a id="idp94250064" class="indexterm"></a><p>Хэрэв та <acronym class="acronym">TFTP</acronym> ашиглахаар тохируулсан
	<acronym class="acronym">PXE</acronym> юм уу эсвэл  <span class="application">Etherboot</span>-г
	ашиглаж байгаа бол файл сервер дээрээ <span class="application">tftpd</span>-г
	идэвхжүүлэх хэрэгтэй:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p><span class="application">tftpd</span>-д зориулж файлууд байх
		сан үүсгэнэ, өөрөөр хэлбэл <code class="filename">/tftpboot</code>.</p></li><li class="step"><p>Энэ мөрийг өөрийн
	      <code class="filename">/etc/inetd.conf</code> файлд нэмнэ:</p><pre class="programlisting">tftp	dgram	udp	wait	root	/usr/libexec/tftpd	tftpd -l -s /tftpboot</pre><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Зарим нэгэн <acronym class="acronym">PXE</acronym> хувилбарууд нь
		<acronym class="acronym">TFTP</acronym>-ийн <acronym class="acronym">TCP</acronym> хувилбарыг
		хүсдэг байна. Энэ тохиолдолд <code class="literal">dgram udp</code> мөрийг
		<code class="literal">stream tcp</code> болгон сольж хоёр дахь мөрийг
		нэмнэ.</p></div></li><li class="step"><p><span class="application">inetd</span>-д өөрийн тохиргооны файлаа
		дахин уншихыг хэлээрэй. Энэ тушаалыг зөв ажиллуулахын тулд
		<code class="filename">/etc/rc.conf</code> файлд
		<code class="option">inetd_enable="YES"</code> тохируулга заагдсан
		байх ёстой:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service inetd restart</code></strong></pre></li></ol></div><p>Та <code class="filename">tftpboot</code> санг серверийнхээ хаана ч
	байрлуулж болно. <code class="filename">inetd.conf</code> болон
	  <code class="filename">dhcpd.conf</code> файлууд дээрээ байрлалаа
	заасан эсэхээ шалгаарай.</p><p>Аль ч тохиолдолд та бас <acronym class="acronym">NFS</acronym>-ээ идэвхжүүлж
	<acronym class="acronym">NFS</acronym> сервер дээрээ тохирох файлын системээ экспорт хийх
	хэрэгтэй юм.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Үүнийг <code class="filename">/etc/rc.conf</code>-д нэмнэ:</p><pre class="programlisting">nfs_server_enable="YES"</pre></li><li class="step"><p>Доор дурдсаныг <code class="filename">/etc/exports</code> файл уруу нэмж
		дискгүй root сан байгаа файлын системээ экспорт хийнэ (эзлэхүүний холбох
		цэгийг тааруулж <em class="replaceable"><code>margaux corbieres</code></em>
		гэснийг дискгүй ажлын станцуудын нэрсээр солих хэрэгтэй):</p><pre class="programlisting"><em class="replaceable"><code>/data/misc</code></em> -alldirs -ro <em class="replaceable"><code>margaux corbieres</code></em></pre></li><li class="step"><p><span class="application">mountd</span>-д өөрийн тохиргооны файлаа
		дахин уншихыг хэлнэ. Хэрэв та эхний шатандаа <acronym class="acronym">NFS</acronym>-г
		<code class="filename">/etc/rc.conf</code> файлд идэвхжүүлэх хэрэгтэй
		болсон бол харин дахин ачаалахыг хүсэж болох юм.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service mountd restart</code></strong></pre></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94280144"></a>32.7.2.6. Дискгүй цөмийг бүтээх</h4></div></div></div><a id="idp94280784" class="indexterm"></a><p>Хэрэв <span class="application">Etherboot</span>-г ашиглаж байгаа
	бол дискгүй клиентдээ зориулж дараах тохируулгуудтайгаар (ердийн тохируулгуудын хамтаар)
	цөмийн тохиргооны файл үүсгэх хэрэгтэй:</p><pre class="programlisting">options     BOOTP          # Use BOOTP to obtain IP address/hostname
options     BOOTP_NFSROOT  # NFS mount root file system using BOOTP info</pre><p>Та бас <code class="literal">BOOTP_NFSV3</code>,
	  <code class="literal">BOOT_COMPAT</code> болон <code class="literal">BOOTP_WIRED_TO</code>
	  (<code class="filename">NOTES</code> файлаас лавлана уу) тохируулгуудыг ашиглахыг хүсэж болох
	     юм.</p><p>Эдгээр тохируулгуудын нэрс нь уламжлалт бөгөөд тэдгээр нь яг үнэндээ
	<acronym class="acronym">DHCP</acronym> болон BOOTP-ийн өөр хэрэглээг цөм дотор идэвхжүүлдэг
	болохоор нэлээн төөрөгдөлд хүргэж болох юм (зөвхөн BOOTP эсвэл <acronym class="acronym">DHCP</acronym>-ийн
	хэрэглээг ашиглахаар болгох бас боломжтой байдаг).</p><p>Цөмийг бүтээж (<a class="xref" href="kernelconfig.html" title="Бүлэг 9. FreeBSD цөмийг тохируулах нь">Бүлэг 9, <em>FreeBSD цөмийг тохируулах нь</em></a>-г үзнэ үү),
	<code class="filename">dhcpd.conf</code> файлд заасан байрлал уруу
	хуулах хэрэгтэй.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml"><acronym class="acronym">PXE</acronym>-г ашиглаж байгаа үед дээрх тохируулгуудтайгаар
		цөмийг бүтээх нь заавал шаардлагагүй (хэдийгээр зөвлөдөг боловч).
		Тэдгээрийг идэвхжүүлэх нь цөмийг эхлүүлэх явцад илүү олон <acronym class="acronym">DHCP</acronym>
		хүсэлтүүдийг үүсгэж шинэ утгууд болон зарим тусгай тохиолдлуудад <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a>-ийн
		авсан утгуудын хооронд нийцэмжгүй байдлын жижиг эрсдэл гаргахад хүргэдэг.
		Тэдгээрийг ашиглахын давуу тал нь буруу нөлөөллөөс болоод хостын нэр тохируулагддаг
		явдал юм. Үгүй бол та хостын нэрийг өөр аргаар, жишээ нь клиентэд тусгайлан зориулсан
		<code class="filename">rc.conf</code> файлд тохируулах хэрэгтэй болно.</p></div><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">Etherboot</span>-ээр дуудагдах боломжтой
		байхын тулд цөмд төхөөрөмжийн бяцхан зааврууд эмхэтгэгдсэн байх хэрэгтэй
		байдаг. Ингэхдээ та дараах тохируулгыг тохиргооны файлдаа тохируулах
		болно (<code class="filename">NOTES</code> тохиргооны тайлбаруудын файлыг
		үзнэ үү):</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">hints		"GENERIC.hints"</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94296272"></a>32.7.2.7. Root файлын системийг бэлдэх</h4></div></div></div><a id="idp94296912" class="indexterm"></a><p>Дискгүй ажлын станцад зориулж <code class="filename">dhcpd.conf</code>
	файлд <code class="literal">root-path</code> гэж жагсаагдсан байрлалд
	root файлын системийг та үүсгэх хэрэгтэй.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94299216"></a>32.7.2.7.1. root-ийг суурьшуулахын тулд <code class="command">make world</code> тушаал ашиглах</h5></div></div></div><p>Энэ арга нь хурдан байх бөгөөд бүрэн онгон системийг (зөвхөн root файлын
		систем биш) <code class="envar">DESTDIR</code> уруу суулгах болно.
		Та дараах скриптийг л ердөө ажиллуулах хэрэгтэй болно:</p><pre class="programlisting">#!/bin/sh
export DESTDIR=/data/misc/diskless
mkdir -p ${DESTDIR}
cd /usr/src; make buildworld &amp;&amp; make buildkernel
make installworld &amp;&amp; make installkernel
cd /usr/src/etc; make distribution</pre><p>Үүнийг хийсний дараа танд өөрийнхөө хэрэгцээний дагуу
		<code class="envar">DESTDIR</code>-д байрлуулагдсан өөрийн
		<code class="filename">/etc/rc.conf</code> болон
	    <code class="filename">/etc/fstab</code> файлуудаа өөрчлөн тохируулах
		шаардлага гарч болох юм.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94307408"></a>32.7.2.8. Swap-ийг тохируулах</h4></div></div></div><p>Шаардлагатай бол сервер дээр байрласан swap файлд
	<acronym class="acronym">NFS</acronym>-ээр хандаж болно.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94308816"></a>32.7.2.8.1. <acronym class="acronym">NFS</acronym> Swap</h5></div></div></div><p>Цөм нь ачаалах үед <acronym class="acronym">NFS</acronym> swap-ийг
		идэвхжүүлэхийг дэмждэггүй.  Бичигдэх файлын системийг холбож
		swap файлыг үүсгэн идэвхжүүлэх замаар эхлүүлэх скриптүүдээр
		swap нь идэвхжүүлэгдэх ёстой. Зохих хэмжээ бүхий swap файлыг
		үүсгэхдээ та ингэж хийж болно:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/path/to/swapfile bs=1k count=1 oseek=100000</code></strong></pre><p>Үүнийг идэвхжүүлэхийн тулд та дараах мөрийг өөрийн
		<code class="filename">rc.conf</code> файлд нэмэх хэрэгтэй:</p><pre class="programlisting">swapfile=<em class="replaceable"><code>/path/to/swapfile</code></em></pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94313040"></a>32.7.2.9. Бусад асуудлууд</h4></div></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94313680"></a>32.7.2.9.1. Зөвхөн уншигдах <code class="filename">/usr</code> сантайгаар ажиллах</h5></div></div></div><a id="idp94314704" class="indexterm"></a><p>Хэрэв дискгүй ажлын станц нь X-ийг ажиллуулахаар тохируулагдсан бол
		анхдагчаар <code class="filename">/usr</code>-т алдааны бүртгэлийг
		хийдэг <span class="application">XDM</span> тохиргооны файлыг
		та тааруулах хэрэгтэй болно.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp94317264"></a>32.7.2.9.2. FreeBSD биш сервер ашиглах</h5></div></div></div><p>root файлын системд зориулсан сервер нь FreeBSD-г ажиллуулаагүй бол
		та FreeBSD машин дээр root файлын систем үүсгээд хэрэгтэй байрлал
		уруу нь <code class="command">tar</code> эсвэл <code class="command">cpio</code> тушаал
		ашиглан хуулах хэрэгтэй болно.</p><p>Энэ тохиолдолд бүхэл тооны их/бага (major/minor) хэмжээнүүдийн ялгаанаас
		болоод <code class="filename">/dev</code> дахь тусгай файлуудад заримдаа
		асуудал гардаг. Энэ асуудлын шийдэл нь FreeBSD биш серверээс
		уг санг экспорт хийж энэ сангаа FreeBSD машин дээр холбон хэрэглэгчийн
		хувьд төхөөрөмжийн цэгүүдийг харагдахгүйгээр (transparently) хуваарилахын тулд
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a>-ийг ашиглах явдал юм.</p></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-aggregation.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="advanced-networking.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="network-pxe-nfs.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">32.6. Холбоос нэгтгэлт ба ослыг тойрон гарах (Link Aggregation and Failover) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 32.8. NFS root файлын систем ашиглан PXE ачаалалт хийх</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>