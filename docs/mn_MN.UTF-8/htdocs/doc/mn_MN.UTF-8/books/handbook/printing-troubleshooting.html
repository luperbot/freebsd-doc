<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>10.7. Алдааг олж засварлах</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="printing.html" title="Бүлэг 10. Хэвлэлт" /><link rel="prev" href="printing-lpd-alternatives.html" title="10.6. Хэвлэгчийн стандарт түр хадгалагчидтай ижил хадгалагчид" /><link rel="next" href="linuxemu.html" title="Бүлэг 11. Линуксийн Хоёртын Нийлэмж" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">10.7. Алдааг олж засварлах</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="printing-lpd-alternatives.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 10. Хэвлэлт</th><td width="20%" align="right"> <a accesskey="n" href="linuxemu.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-troubleshooting"></a>10.7. Алдааг олж засварлах</h2></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> програмын тусламжтайгаар энгийн шалгах
	  үйлдэл хийж дуусахад та зөв хэвлэгдсэн хүссэн үр дүнд биш
	  харин дараах алдаануудтай тулгарч болзошгүй юм:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Хэвлэж болж байна, гэхдээ хэсэг хугацааны дараа юм уу эсвэл
	анхнаасаа хуудасны тал хэсгийг хэвлээд зогсох.</span></dt><dd><p>Хэвлэгч дээд хэсгийг нь хэвлээд хэсэг хугацааны дараа
	    юу ч хийхгүй болох. Ийм үед та хэвлэгч дээрх
		PRINT REMAINING эсвэл FORM FEED товч дарж үлдсэн хэсгийг нь
		хэвлэх эсэхийг харах хэрэгтэй.</p><p>Хэрэв хэвлэгч өөр хэвлэх юм байгаа эсэхийг хүлээгээд байгаа
	  тийм нөхцөлд орвол хэвлэгч рүү
	  FORM FEED тэмдгийг илгээснээр (эсвэл ямар нэгэн юм) уг асуудал
	  шийдэгдэж болох юм. Өөрийнхөө түр хадгалагч дээр орж ирсэн өгөгдлийг
	  шууд хэвлэдэг хэвлэгчдэд иймэрхүү арга хэрэглэхэд хангалттай билээ.
	  Хэрэв өмнөх хуудас нь хуудасны тал хүртэл байгаад дараагийн хуудас нь
	  шинээр хуудаснаас эхлэх байсан болоод дууссан хуудасны тал
	  хэсгээс хэвлэхгүй байгаад байх нөхцөл үүссэн байж болзошгүйг
	  шалгахад мөн илүүдэхгүй.</p><p><code class="filename">/usr/local/libexec/if-simple</code>
	  бүрхүүлийн скриптэд оруулсан дараах оруулга нь хэвлэх
	  үйлдлийн дараа хэвлэгч рүү хуудас дууссан тэмдэгт илгээнэ:</p><pre class="programlisting">#!/bin/sh
#
# if-simple - Simple text input filter for lpd
# Installed in /usr/local/libexec/if-simple
#
# Simply copies stdin to stdout.  Ignores all filter arguments.
# Writes a form feed character (\f) after printing job.

/bin/cat &amp;&amp; printf "\f" &amp;&amp; exit 0
exit 2</pre></dd><dt><span class="term">Гэхдээ энэ нь <span class="quote">«<span class="quote">хачирхалтай нөлөө</span>»</span> үүсгэж болох юм.</span></dt><dd><p>Та дараах зүйлсийг хуудсан дээрээ харах болно:</p><pre class="screen">!"#$%&amp;'()*+,-./01234
                "#$%&amp;'()*+,-./012345
                                 #$%&amp;'()*+,-./0123456</pre><a id="idp76164048" class="indexterm"></a><a id="idp76164560" class="indexterm"></a><a id="idp76165072" class="indexterm"></a><p>Энэ нь таныг шинэ мөр илэрхийлдэг тэмдэгт хөрвүүлэгдээгүй
	  улмаас өнөөх <span class="emphasis"><em>хачирхалтай нөлөөний</em></span> хохирогч
	  нь болсон байна гэдгийг илэрхийлж байна.
	<span class="trademark">UNIX</span>® төрлийн үйлдлийн системүүд мөр дууссаныг илэрхийлэхийн тулд
	ASCII-н 10 гэсэн дугаарыг буюу line feed (LF) гэсэн нэг л
	тэмдэгт хэрэглэдэг. Харин <span class="trademark">MS-DOS</span>®, <span class="trademark">OS/2</span>®, болон бусад үйлдлийн
	системүүд ASCII-н 10 <span class="emphasis"><em>ба</em></span> ASCII-н
	    13 (CR буюу шинэ мөр эхлэх) гэсэн хоёр тэмдгийг хамтад нь
		хэрэглэдэг. Ихэнх хэвлэгч нар шинэ мөрийг илэрхийлэхдээ
		<span class="trademark">MS-DOS</span>®-н шийдлийг хэрэглэдэг.</p><p>Хэрэв та FreeBSD-с хэвлэхээр бол таны текстүүд
	  зөвхөн мөр дууссан тэмдэгт л агуулсан байгаа.
	  Мөр дууссан тэмдэгтийг хэвлэгч хүлээж авангуутаа хуудсаа нэг мөрөөр
	  дээшлүүлсэн мөртлөө яг тухайн байрлалдаа дараагийн тэмдэгт ирэхийг
	  хүлээж зогсдог. Энэ үед л шинэ мөр гэсэн тэмдэгт ирж байж хэвлэгчийн
	  толгой зүүн хэсэг рүүгээ гүйдэг билээ. </p><p>FreeBSD нь дараах маягаар хэвлэхийг хэвлэгчээс хүсдэг:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>Хэвлэгч CR тэмдэг хүлээж авлаа</td><td>Хэвлэгч CR гэж хэвлэв</td></tr><tr><td>Хэвлэгч LF тэмдэгт хүлээж авлаа</td><td>Хэвлэгч CR + LF гэж хэвлэх</td></tr></tbody></table></div><p>Үүнийг залруулах хэдэн арга бий:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Хэвлэгчийнхээ тохируулгын цонхыг ашиглан
		  эдгээр тэмдэгтийг өөрөөр хөрвүүлж ойлгохоор тохируулах.
		  Иймэрхүү тохиргоо байдаг эсэхийг хэвлэгчийнхээ
		  гарын авлагад харах хэрэгтэй.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв та системээ шинээр ачаалахдаа
			FreeBSD-ээс өөр давхар суусан үйлдлийн систем рүү орвол
			тухайн үйлдлийн системдээ тохируулж  CR болон LF
			тэмдэгтийн хөрвүүлэх тохиргоог
		  <span class="emphasis"><em>дахин хийх</em></span> хэрэг гарч магадгүй юм.</p></div></li><li class="listitem"><p>FreeBSD-н цуваа холболтын таниулагч програм нь
		  автоматаар LF тэмдэгтийг CR+LF тэмдэгт рүү хувиргадаг.
		  Мэдээж энэ нь <span class="emphasis"><em>зөвхөн</em></span> цуваа холболтоор
		  холбогдсон хэвлэгч дээр ажиллана. Энэ шинж чанарыг
		  идэвхжүүлэхийн тулд  <code class="literal">ms#</code> хэрэгслийг
		  ашиглан  <code class="literal">onlcr</code> горимыг хэвлэгчийн
		   <code class="filename">/etc/printcap</code> файл дотор оруулж
		   өгөх хэрэгтэй.</p></li><li class="listitem"><p>Хэвлэгчийн алгасаж болдог
		  <span class="emphasis"><em>escape code</em></span> тэмдэгт
		  илгээж хэвлэгчийг LF тэмдэгт илгээгдсэн гэж ойлгуулж
		  болох юм. Хэвлэгчийн гарын авлагаас ийм тэмдэгт
		  дэмждэг эсэхийг харах хэрэгтэй. Хэрэв та тохирох тийм
		  тэмдэгт олсон бол текст шүүгч програмыг өөрчилж
		  эхлээд тэр тэмдэгтийг илгээгээд дараа нь
		  хэвлэх зүйлсийг илгээхээр засах хэрэгтэй. </p><a id="idp76183632" class="indexterm"></a><p>Энд Hewlett-Packard PCL хэвлэгчийн ойлгодог
		  алгасаж болдог тэмдэгтийн текст шүүгч жишээг татаж үзүүлэв.
		  Энэ шүүгч нь LF тэмдэгтийг LF ба
		CR гэж хөрвүүлээд хэвлэгч рүү
		хэвлэх ажлыг илгээж дараа нь мөр дууссан тэмдэгтийг илгээж
		хэвлэх ажил дууссаныг мэдэгддэг.
		Энэ нь бараг бүх  Hewlett Packard хэвлэгчдэд тохирдог.</p><pre class="programlisting">#!/bin/sh
#
# hpif - Simple text input filter for lpd for HP-PCL based printers
# Installed in /usr/local/libexec/hpif
#
# Simply copies stdin to stdout.  Ignores all filter arguments.
# Tells printer to treat LF as CR+LF.  Ejects the page when done.

printf "\033&amp;k2G" &amp;&amp; cat &amp;&amp; printf "\033&amp;l0H" &amp;&amp; exit 0
exit 2</pre><p>Энд <code class="systemitem">orchid</code> нэртэй компьютерийн
		  <code class="filename">/etc/printcap</code> файлын жишээг харуулж байна.
		Энд <code class="literal">teak</code> нэртэй Hewlett Packard
		LaserJet 3Si хэвлэгчийг зэрэгцээ холболтоор холбосон байгаа.
		Энд өмнө үзүүлсэн скриптийг текст шүүгчээ болгож хэрэглэсэн байгаа:</p><pre class="programlisting">#
#  /etc/printcap for host orchid
#
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=<code class="filename">/dev/lpt0</code>:sh:sd=<code class="filename">/var/spool/lpd/teak</code>:mx#0:\
        :if=<code class="filename">/usr/local/libexec/hpif</code>:</pre></li></ul></div></dd><dt><span class="term">Энэ нь мөрүүдийг давхарлан хэвлэж байх.</span></dt><dd><p>Хэвлэгч мөрөө дээшлүүлсэнгүй.
	  Бүх мөрүүд дээд мөрөнд давхарлагдаж хэвлэгдэв.</p><p>Энэ хүндрэл нь өнөөх хачирхалтай нөлөөний
	  <span class="quote">«<span class="quote">эсрэг</span>»</span> нөлөөлөл бөгөөд арай бага тохиолддог.
	    FreeBSD-н мөрийн төгсгөл илэрхийлсэн LF тэмдэгт нь
	    CR тэмдэгтээр солигдоод мөрөө шинээр ахиулалгүй хуудасны
		эхэнд очиж дахин хэвлэчихсэн байна.</p><p>Хэвлэгчийн тохируулгын цонх ашиглан LF болон CR
	  тэмдэгтүүдийг дараах маягаар хөрвүүлэхээр тохируулах хэрэгтэй:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Хэвлэгчийн хүлээж авалт</th><th>Хэвлэгчийн хэвлэлт</th></tr></thead><tbody><tr><td>CR</td><td>CR</td></tr><tr><td>LF</td><td>CR + LF</td></tr></tbody></table></div></dd><dt><span class="term">Хэвлэгч тэмдэгт гээх үзэгдэл.</span></dt><dd><p>Хэвлэгч хэвлэх үедээ мөрөнд зарим тэмдэгтүүдийг хэвлэхгүй
	  болдог. Энэ хүндрэл нь хэвлэгч ажиллахгүй болох эсвэл маш их тэмдэгт
	  гээж эхлэх зэргээс илүү дор үзэгдэл юм. </p><p>Хүндрэлийн шалтгаан нь цуваа холболтоор компьютерийн илгээсэн
	    хурдтай хэвлэгчийн хэвлэх хурд таарахгүй байгаагаас үүсдэг
		(ийм хүндрэл зэрэгцээ холбосон хэвлэгчдэд тулгардаггүй).
		Энэ хүндрэлийг давах хоёр арга бий:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Хэрэв хэвлэгч нь XON/XOFF гэсэн урсгал зохицуулагчийг
		  дэмждэг бол <code class="literal">ms#</code>  шинж чанарыг ашиглан
		  <code class="literal">ixon</code> горимыг FreeBSD дээр хэрэглэхээр
		  тааруулах хэрэгтэй.</p></li><li class="listitem"><p>Хэрэв хэвлэгч нь Request to Send (Илгээхийг Хүсэх) / Clear to Send (Илгээхдээ цэвэрлэх)
		hardware handshake буюу тоног төхөөрөмжийн тохиролцоог (ихэвчлэн <code class="literal">RTS/CTS</code> гэгддэг) дэмждэг бол
		  <code class="literal">ms#</code> боломжид <code class="literal">crtscts</code>
		  горимыг зааж өгөх хэрэгтэй.
		Тоног төхөөрөмжийн урсгал зохицуулагчид тааруулж цуваа холболтоо зөв
		холбосон эсэхээ магадлах хэрэгтэй.</p></li></ul></div></dd><dt><span class="term">Хог хэвлэх үзэгдэл.</span></dt><dd><p>Хэвлэгч хүссэн текстийг хэвлэхийн оронд
	  хог хэвлээд эхлэв. </p><p>Энэ нь цуваа холболт буруу холбогдсоноос үүсдэг үзэгдэл.
	  Дамжуулах хурдны давтамжийн <code class="literal">br</code> шинж чанарыг
	  шалгаад
	    <code class="literal">ms#</code> шинж чанараар өгөгдөл тэгшилж
		илгээнэ гэх зэрэг
	    <code class="filename">/etc/printcap</code> файлд байгаа
		тохиргоотой тохирч буй эсэхийг шалгах хэрэгтэй.</p></dd><dt><span class="term">Юу ч болохгүй байх.</span></dt><dd><p>Хэрэв юу ч болохгүй байвал хүндрэл нь хэвлэгчид биш
	  FreeBSD-д байж болох юм. <code class="filename">/etc/printcap</code>
	  файлд бүртгэл файл хэрэглэнэ гэсэн
	    (<code class="literal">lf</code>) шинж чанарыг нэмэх хэрэгтэй.
		Жишээ нь энд  <code class="literal">rattan</code> оруулганд
		<code class="literal">lf</code> шинж чанар нэмж байна:</p><pre class="programlisting">rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=<code class="filename">/var/spool/lpd/rattan</code>:\
        :lp=<code class="filename">/dev/lpt0</code>:\
        :if=<code class="filename">/usr/local/libexec/if-simple</code>:\
        :lf=<code class="filename">/var/log/rattan.log</code></pre><p>Тэгээд дахиад хэвлэх гээд оролдоод үз. Гарч болзошгүй алдааны мэдэгдэл
		байгаа эсэхийг бүртгэлийн файлаас (бидний жишээн дээр
	    <code class="filename">/var/log/rattan.log</code>) шалгах хэрэгтэй.
		Мэдэгдлүүдээс хамаарч асуудлыг засахыг оролдох хэрэгтэй.</p><p>Хэрэв та  <code class="literal">lf</code> шинж чанар зааж өгөөгүй бол,
	    <span class="application">LPD</span> нь
	    <code class="filename">/dev/console</code> файлыг анхдагч гэж авч үзнэ.</p></dd></dl></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="printing-lpd-alternatives.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="printing.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="linuxemu.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">10.6. Хэвлэгчийн стандарт түр хадгалагчидтай ижил хадгалагчид  </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> Бүлэг 11. Линуксийн Хоёртын Нийлэмж</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>