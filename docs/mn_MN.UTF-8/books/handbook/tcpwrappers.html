<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>15.6. TCP Гүйцэтгэлийг хялбаршуулагчид</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="security.html" title="Бүлэг 15. Аюулгүй байдал" /><link rel="prev" href="one-time-passwords.html" title="15.5. Нэг удаагийн нууц үгүүд" /><link rel="next" href="kerberos5.html" title="15.7. Kerberos5" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">15.6. TCP Гүйцэтгэлийг хялбаршуулагчид</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="one-time-passwords.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 15. Аюулгүй байдал</th><td width="20%" align="right"> <a accesskey="n" href="kerberos5.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="tcpwrappers"></a>15.6. TCP Гүйцэтгэлийг хялбаршуулагчид</h2></div><div><span class="authorgroup">Бичсэн <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Том</span> <span class="surname">Рөүдс</span></span>. </span></div></div></div><a id="idp79311952" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>-г мэддэг хэн бүхэн <acronym class="acronym">TCP</acronym> Гүйцэтгэлийг хялбаршуулагчдын
	талаар заримдаа сонссон байх. Гэхдээ цөөн хүмүүс энэ боломжийн
	сүлжээний орчин дахь ашигтай талыг бүрэн ойлгодог юм шиг санагддаг.
	Хүн бүхэн сүлжээний холболтууд зохицуулах галт хана суулгахыг хүсдэг
	юм шиг санагддаг.  Галт хана олон төрлийн хэрэглээтэй боловч
	холболт үүсгэгч уруу текст илгээх зэрэг зарим зүйлсийг галт хана хийж
	чаддаггүй. Энд дурдсан <acronym class="acronym">TCP</acronym> Гүйцэтгэлийг хялбаршуулагчид энэ мэтийг болон
	үүнээс илүүг хийдэг. Дараагийн хэдэн хэсэгт <acronym class="acronym">TCP</acronym> Гүйцэтгэлийг хялбаршуулагчдын
	олон боломжуудыг хэлэлцэх бөгөөд боломжтой үед нь жишээ тохиргооны
	мөрийг үзүүлэх болно.</p><p><acronym class="acronym">TCP</acronym> Гүйцэтгэлийг хялбаршуулагчид програм хангамж нь
	<span class="application">inetd</span>-ийн чадваруудыг сервер бүрийн
	хувьд түүний доор хянагдаж болохоор дэмжин өргөтгөдөг. Энэ аргыг ашиглан
	бүртгэл хөтлөх дэмжлэг нэмэх, холболтууд уруу мэдэгдэл буцаах, дэмонд
	зөвхөн дотоод холболтуудыг хүлээн авахыг зөвшөөрөх гэх мэт үйлдлүүдийг
	хийх боломжтой. Эдгээр боломжуудын заримыг галт хана суулган тохируулж хийж
	болох боловч энэ нь зөвхөн хамгаалалтын нэмэлт давхарга болохоос гадна
	галт ханын үзүүлж чаддагаас илүү хяналтыг олгодог юм.</p><p><acronym class="acronym">TCP</acronym> Гүйцэтгэлийг хялбаршуулагчдын ийнхүү нэмэгдсэн
	ажиллагаа нь сайн галт ханыг солихоор зүйл гэж ойлгогдох ёсгүй юм.
	<acronym class="acronym">TCP</acronym> Гүйцэтгэлийг хялбаршуулагчид нь галт хана
	эсвэл өөр бусад аюулгүй байдлыг нэмэгдүүлэгч програмуудын хамтаар
	ашиглагдаж системийн хувьд хамгаалалтын нэмэлт давхарга болон аятайхан
	үйлчлэх боломжтой юм.</p><p>Энэ нь <span class="application">inetd</span>-ийн тохиргооны өргөтгөл болохоор
	энэхүү баримтыг уншигч таныг <a class="link" href="network-inetd.html" title="30.2. inetd «Супер-Сервер»">inetd тохиргоо</a>
	хэсгийг уншсан гэдэгт найдаж байна.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>-ээр ажиллуулагдсан програмууд яг жинхэнээрээ
	<span class="quote">«<span class="quote">дэмонууд</span>»</span> биш боловч тэдгээрийг уламжлалаар дэмонууд гэдэг.
	Энэ ухагдахууныг бид энэ хэсэгт бас ашиглах болно.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79324112"></a>15.6.1. Эхний тохиргоо</h3></div></div></div><p><acronym class="acronym">TCP</acronym> Гүйцэтгэлийг хялбаршуулагчдыг FreeBSD-д
	ашиглахад  байх цорын ганц шаардлага нь <span class="application">inetd</span> серверийг
	<code class="filename">rc.conf</code> файлаас <code class="option">-Ww</code>
	тохируулгатай ажиллуулсан эсэхийг шалгах явдал юм; энэ нь анхдагч тохиргоо
	юм. Мэдээж <code class="filename">/etc/hosts.allow</code> файлын
	зөв тохиргоо бас байгааг хүлээж байдаг боловч эдгээр тохиолдлуудад
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> системийн бүртгэлүүдэд мэдэгдлүүд шиддэг.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Бусад <acronym class="acronym">TCP</acronym> Гүйцэтгэлийг хялбаршуулагчдын
	шийдлүүдтэй харьцуулах юм бол <code class="filename">hosts.deny</code>
	файлыг хэрэглэхээ больсон. Тохиргооны бүх сонголтууд
	<code class="filename">/etc/hosts.allow</code> файлд байх шаардлагатай.</p></div><p>Хамгийн амархан тохиргоогоороо бол дэмоны холболтын бодлогууд
	зөвшөөрөгдсөн эсвэл хаагдсаны аль нэгээр <code class="filename">/etc/hosts.allow</code>
	файл дахь тохируулгуудаас хамааран тохируулагддаг. FreeBSD дээрх анхдагч
	тохиргоо нь <span class="application">inetd</span>-ээр эхэлсэн дэмон бүр уруу хийгдэх
	холболтыг зөвшөөрдөг. Үүнийг өөрчлөх талаар зөвхөн үндсэн тохиргооны тухай
	дурдсаны дараа хэлэлцэх болно.</p><p>Үндсэн тохиргоо ихэвчлэн <code class="literal">дэмон : хаяг : үйлдэл</code>
	хэлбэрийг авдаг. Энд байгаа <code class="literal">дэмон</code> нь
	<code class="command">inetd</code>-ийн эхлүүлсэн дэмоны нэр юм.
	<code class="literal">Хаяг</code> нь зөв хостын нэр, <code class="literal">address</code>
	хаяг эсвэл дөрвөлжин хаалтан ([ ]) доторх IPv6 хаяг байж болно.
	<code class="literal">action</code> буюу үйлдлийн талбар нь <code class="literal">allow</code> буюу зөвшөөрөх
	эсвэл <code class="literal">deny</code> буюу эрхийг хориглох эсвэл хандалтыг хаахын аль нэг байна.
	Тохиргоо эхний тохирсон дүрэм журмын дагуу ажилладаг гэдгийг
	санах хэрэгтэй, энэ нь тохирох дүрмийг тохиргооны файлаас өсөх дарааллаар
	хайна гэсэн үг юм. Тохирох дүрэм олдвол тэр дүрэм ашиглагдаж хайх
	процесс зогсоно.</p><p>Бусад хэд хэдэн тохируулгууд байдаг боловч тэдгээрийг энэ хэсгийн сүүлд
	тайлбарлах болно. Хялбар тохиргооны мөр ганцхан тэр мэдээллийн дагуу амархнаар
	хийгдэж болно. Жишээ нь
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/qpopper/pkg-descr">mail/qpopper</a> дэмоноор дамжин
	хийгдэж болох <acronym class="acronym">POP</acronym>3 холболтуудыг зөвшөөрөхийн тулд
	дараах мөрүүд <code class="filename">hosts.allow</code> файлд нэмж хийгдэх
	хэрэгтэй:</p><pre class="programlisting"># This line is required for POP3 connections:
qpopper : ALL : allow</pre><p>Энэ мөрийг нэмснийхээ дараа <span class="application">inetd</span>-г <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=service&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">service</span>(8)</span></a> ашиглан 
        дахин эхлүүлэх хэрэгтэй:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service inetd restart</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79347152"></a>15.6.2. Дэвшилтэт тохиргоо</h3></div></div></div><p><acronym class="acronym">TCP</acronym> Гүйцэтгэлийг хялбаршуулагчид нь бас дэвшилтэт
	тохируулгуудтай байдаг; тэдгээр нь холболтуудтай хэрхэн ажиллахыг илүүтэйгээр
	хянах боломжийг олгодог. Зарим тохиолдолд тодорхой хостууд эсвэл дэмон
	холболтууд уруу тайлбар буцаах нь зүйтэй санаа байж болох юм. Бусад
	тохиолдолд магадгүй бүртгэлийн файл бичигдэх ёстой эсвэл цахим захидал
	администратор уруу илгээгдэж болох юм. Бусад тохиолдлууд үйлчилгээг зөвхөн
	дотоод холболтууддаа ашиглахыг шаардаж болох юм. Эдгээр нь бүгдээрээ
	<code class="literal">орлуулагддаг тэмдэгтүүд</code>, өргөтгөх тэмдэгтүүд болон
	гадаад тушаалыг ажиллуулах зэрэг тохиргооны сонголтуудын тусламжтай хийгдэх
	боломжтой юм. Дараагийн хоёр хэсэгт эдгээр тохиолдлуудын талаар бичсэн
	байгаа.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79348944"></a>15.6.2.1. Гадаад тушаалууд</h4></div></div></div><p>Холболтыг хааж түүнийг тогтоохыг оролдсон хүн уруу шалтгааныг нь
	илгээх тохиолдол гарчээ гэж бодъё. Үүнийг яаж хийх вэ? Энэ үйлдлийг
	<code class="option">twist</code> тохируулга ашиглан хийх боломжтой.
	Холболт тогтоохоор оролдоход <code class="option">twist</code> тохируулга
	бүрхүүлийн тушаал эсвэл скрипт ажилуулахаар дуудагддаг.
	<code class="filename">hosts.allow</code> файлд үүний жишээ аль хэдийн
	орсон байдаг:</p><pre class="programlisting"># The rest of the daemons are protected.
ALL : ALL \
        : severity auth.info \
        : twist /bin/echo "You are not welcome to use %d from %h."</pre><p>Энэ жишээ нь <span class="quote">«<span class="quote">You are not allowed to use <code class="literal">daemon</code>
	  from <code class="literal">hostname</code>.</span>»</span> буюу
	<span class="quote">«<span class="quote">Та <code class="literal">дэмон</code>ыг <code class="literal">hostname</code>-с
	ашиглах зөвшөөрөлгүй.</span>»</span> гэсэн мэдэгдлийг хандалтын файлд урьдаар
	тохируулагдаагүй дэмон бүрийн хувьд буцаадаг. Энэ нь тогтоогдсон холболт дөнгөж
	салсны дараа холболтыг эхлүүлэгч уруу хариултыг буцааж илгээхэд маш их ашигтай
	байдаг. Буцсан мэдэгдэл бүр <code class="literal">"</code> тэмдэгтүүд дотор
	заавал байх <span class="emphasis"><em>шаардлагатай</em></span>; энэ дүрмэнд ямар нэг
	жич зөвшөөрөл байхгүй.</p><div xmlns="" class="warning"><h3 class="admontitle">Сануулга: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв халдагч эсвэл бүлэг халдагчид эдгээр дэмонуудыг холболт хийх
	хүсэлтээр цутгаж чадах юм бол серверийн эсрэг үйлчилгээг зогсоох халдлага явуулах
	боломжтой байж болох юм.</p></div><p>Өөр нэг боломж нь эдгээр тохиолдлуудад <code class="option">spawn</code>
	тохируулгыг ашиглах явдал юм. <code class="option">twist</code> тохируулгын
	нэгэн адил <code class="option">spawn</code> тохируулга нь холболтуудыг сохроор
	хааж гадаад бүрхүүлийн тушаалууд эсвэл скриптүүдийг ажиллуулахад ашиглагдаж
	болно. <code class="option">twist</code> тохируулгаас ялгаатай тал нь
	<code class="option">spawn</code> нь холболт тогтоосон хүн уруу хариулт буцааж
	илгээдэггүй. Жишээ нь дараах тохиргооны мөр байжээ гэж бодъё:</p><pre class="programlisting"># We do not allow connections from example.com:
ALL : .example.com \
	: spawn (/bin/echo %a from %h attempted to access %d &gt;&gt; \
	  /var/log/connections.log) \
	: deny</pre><p>Энэ нь <code class="systemitem">*.example.com</code> домэйноос
	ирсэн бүх холболтын оролдлогуудаас татгалзахын зэрэгцээ хостын нэр, <acronym class="acronym">IP</acronym>
	хаяг  болон тэдний хандалт хийхийг оролдсон дэмонг <code class="filename">/var/log/connections.log</code>
	файл уруу бүртгэнэ.</p><p>Дээр тайлбарласан орлуулах тэмдэгтүүдээс гадна, өөрөөр хэлбэл
	<code class="literal">%a</code> тэмдэгтээс гадна бусад цөөн хэдэн тэмдэгтүүд бас байдаг. Бүрэн жагсаалтыг
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts_access&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts_access</span>(5)</span></a> гарын авлагын хуудаснаас үзнэ үү.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79362512"></a>15.6.2.2. Орлуулагддаг тэмдэгтүүдийн тохиргоонууд</h4></div></div></div><p>Энэ хүртэл <code class="literal">ALL</code> тохируулга бүх л жишээнүүдэд
	ашиглагдлаа. Ажиллагааг арай цаашлуулж өргөтгөх бусад тохируулгууд
	байдаг. Жишээ нь <code class="literal">ALL</code> нь дэмон, домэйн эсвэл
	<acronym class="acronym">IP</acronym> хаягийн аль нэгтэй тааруулах зорилгоор
	ашиглагдаж болох юм. Өөр нэг орлуулагддаг тэмдэгт нь
	<acronym class="acronym">IP</acronym> хаягаа өөрчлөн хуурсан байж болох дурын хостыг
	тааруулах <code class="literal">PARANOID</code> тохируулга юм. Өөрөөр хэлбэл
	<code class="literal">PARANOID</code> буюу хэт зовнил нь
	өөрийн хостын нэрээс өөр <acronym class="acronym">IP</acronym> хаягтай машинаас
	холболт хийгдэх бүр түүнд тохирох үйлдлийг тодорхойлоход ашиглагдаж
	болох юм. Дараах жишээ энэ хэлэлцүүлэгт арай илүү ойлголт өгч магадгүй
	юм:</p><pre class="programlisting"># Block possibly spoofed requests to sendmail:
sendmail : PARANOID : deny</pre><p>Энэ жишээн дээр <code class="command">sendmail</code> уруу хийгдэж байгаа
	өөрийнхөө хостын нэрээс өөр <acronym class="acronym">IP</acronym> хаягтай холболтын бүх
	хүсэлтүүдээс татгалзан хааж байна.</p><div xmlns="" class="caution"><h3 class="admontitle">Анхааруулга: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв клиент эсвэл сервер эвдэрхий <acronym class="acronym">DNS</acronym>
	суулгацтай бол <code class="literal">PARANOID</code> орлуулагддаг тэмдэгтийг ашиглах нь серверүүдийг
	ноцтойгоор зэрэмдэг болгож болох юм. Иймд администраторын зохион байгуулалт
	болон хуваарилалт хийхийг зөвлөж байна.</p></div><p>Орлуулагддаг тэмдэгтүүдийн талаар болон тэдэнтэй холбоотой ажиллагааны
	талаар дэлгэрэнгүйг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts_access&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts_access</span>(5)</span></a> гарын авлагын хуудаснаас
	үзээрэй.</p><p>Тусгай тохиргооны аль ч мөрүүдийн өмнө дээрх нь ажиллана, эхний тохиргооны
	мөр <code class="filename">hosts.allow</code> файлд тайлбар болгон хаагдах
	шаардлагатай. Үүнийг энэ хэсгийн эхэнд тэмдэглэж хэлсэн байгаа.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="one-time-passwords.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="security.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="kerberos5.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">15.5. Нэг удаагийн нууц үгүүд </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 15.7. <span class="application">Kerberos5</span></td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>