<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>30.4. Сүлжээний Мэдээллийн Систем (NIS/YP)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="network-servers.html" title="Бүлэг 30. Сүлжээний орчны Серверүүд" /><link rel="prev" href="network-nfs.html" title="30.3. Сүлжээний Файлын Систем (NFS)" /><link rel="next" href="network-dhcp.html" title="30.5. Автомат Сүлжээний Тохиргоо (DHCP)" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">30.4. Сүлжээний Мэдээллийн Систем (NIS/YP)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-nfs.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 30. Сүлжээний орчны Серверүүд</th><td width="20%" align="right"> <a accesskey="n" href="network-dhcp.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-nis"></a>30.4. Сүлжээний Мэдээллийн Систем (NIS/YP)</h2></div><div><span class="authorgroup">Бичсэн <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Билл</span> <span class="surname">Свингл</span></span>. </span></div><div><span class="authorgroup">Сайжруулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Эрик</span> <span class="surname">Огрен</span></span> ба <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Удо</span> <span class="surname">Эрделхофф</span></span>. </span></div><div><span class="authorgroup">Орчуулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Лодойсамбын</span> <span class="surname">Баянзул</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90078288"></a>30.4.1. Энэ юу вэ?</h3></div></div></div><a id="idp90078928" class="indexterm"></a><a id="idp90079440" class="indexterm"></a><a id="idp90080080" class="indexterm"></a><a id="idp90080592" class="indexterm"></a><a id="idp90081104" class="indexterm"></a><a id="idp90081616" class="indexterm"></a><a id="idp90082128" class="indexterm"></a><p><acronym class="acronym">NIS</acronym>,
        нь Network Information Services буюу Сүлжээний Мэдээллийн Үйлчилгээнүүд
гэсэн үгийн товчлол бөгөөд <span class="trademark">UNIX</span>® (анхандаа <span class="trademark">SunOS</span>™) системүүдийн
удирдлагыг төвлөрүүлэх зорилгоор Sun Microsystems анх хөгжүүлсэн.
Одоо энэ салбарын үндсэн стандарт болжээ; бүх гол <span class="trademark">UNIX</span>® төрлийн системүүд
(<span class="trademark">Solaris</span>™, HP-UX, <span class="trademark">AIX</span>®, Линукс, NetBSD, OpenBSD, FreeBSD, гэх мэт) <acronym class="acronym">NIS</acronym>-г дэмждэг.</p><a id="idp90086352" class="indexterm"></a><p><acronym class="acronym">NIS</acronym> анх Yellow Pages буюу Шар Хуудас
гэсэн нэртэй байсан боловч худалдааны тэмдгийн асуудлаас болж
Sun нэрийг нь сольсон. Хуучин нэр (ба yp) нь одоо хир нь хэрэглэгдсээр байдаг.</p><a id="idp90092112" class="indexterm"></a><p>Энэ нь RPC дээр үндэслэсэн, нэг NIS домэйнд байгаа
бүлэг машинууд дундаа адилхан тохиргооны файлтай боломжийг
олгодог харилцагч/сервер систем юм. Үүний тусламжтай
системийн администратор NIS харилцагч системийг
зайлшгүй байх үндсэн тохиргоотойгоор үүсгэх, тохиргооны өгөгдлийг
нэг дор нэмэх, хасах, өөрчлөх зэрэг үйлдлүүдийг хийх
боломжтой болдог.</p><a id="idp90093648" class="indexterm"></a><p>Энэ нь <span class="trademark">Windows NT</span>®-н домэйн системтэй төстэй.
Хэдийгээр тэдгээрийн дотоод ажиллагаа нь ердөө ч адилхан биш боловч
үндсэн үүргийг нь адилтгаж болох юм.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90095184"></a>30.4.2. Таны мэдэж байх ёстой Нэр томъёо/Процессууд</h3></div></div></div><p>NIS сервер эсвэл NIS харилцагч байдлаар ажилладаг NIS-г FreeBSD дээр
зохион байгуулахын тулд нилээд хэдэн нэр томъёо, чухал хэрэглэгчийн
процессуудтай та тааралдах болно:</p><a id="idp90096208" class="indexterm"></a><a id="idp90097104" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Нэр томъёо</th><th>Тайлбар</th></tr></thead><tbody><tr><td>NIS домэйн нэр</td><td>NIS мастер сервер болон түүний бүх харилцагчид
(түүний зарц серверийг оруулаад) бүгд NIS домэйн нэртэй байна.
<span class="trademark">Windows NT</span>®-н домэйн нэртэй адилаар, NIS домэйн нэр <acronym class="acronym">DNS</acronym>-тэй
ямар ч хамаагүй.</td></tr><tr><td><span class="application">rpcbind</span></td><td><acronym class="acronym">RPC</acronym>-г (Remote Procedure Call буюу Алсын Процедур Дуудах, NIS-н
ашигладаг сүлжээний протокол) идэвхтэй байлгахын тулд заавал ажиллаж
байх ёстой. Хэрэв <span class="application">rpcbind</span> ажиллахгүй бол,
NIS сервер ажиллуулах, NIS харилцагч болох боломжгүй.</td></tr><tr><td><span class="application">ypbind</span></td><td>NIS харилцагчийг NIS сервертэй <span class="quote">«<span class="quote">холбоно</span>»</span>.
NIS домэйн нэрийг системээс авч, <acronym class="acronym">RPC</acronym> ашиглан сервертэй холбоно.
<span class="application">ypbind</span> нь NIS орчны харилцагч-серверийн харилцааны цөм нь болж
өгдөг; Хэрэв харилцагчийн машин дээр <span class="application">ypbind</span> үхвэл,
NIS сервер рүү хандах боломжгүй болно.</td></tr><tr><td><span class="application">ypserv</span></td><td>Зөвхөн NIS сервер дээр ажиллаж байх ёстой;
энэ бол NIS сервер процесс өөрөө юм. Хэрэв <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> үхвэл,
сервер NIS хүсэлтэд хариу өгөх боломжгүй болно (магадгүй,
түүний үүргийг үргэлжлүүлэх зарц сервер байгаа байх). Зарим
NIS-н хувьд (FreeBSD-гийх биш), анх холбогдож байсан сервер байхгүй болбол
өөр сервертэй холбоо тогтоохыг оролддоггүй хувилбарууд байдаг.
Ихэнхдээ, ийм үед ганц тус болох зүйл бол сервер процессийг
дахин эхлүүлэх (эсвэл серверийг бүхлээр нь), эсвэл харилцагч талын
<span class="application">ypbind</span> процессийг дахин эхлүүлэх юм.</td></tr><tr><td><span class="application">rpc.yppasswdd</span></td><td>Зөвхөн NIS эзэн сервер дээр ажиллаж байх ёстой өөр
нэг процесс; Энэ дэмон NIS харилцагч нарыг өөрсдийн нэвтрэх үгийг
солих боломжийг олгоно. Хэрэв энэ дэмон ажиллахгүй бол,
хэрэглэгчид NIS эзэн сервер рүү нэвтэрч орон тэнд нэвтрэх үгээ солих
хэрэгтэй болно.</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90117200"></a>30.4.3. Хэрхэн ажилладаг вэ?</h3></div></div></div><p>NIS орчинд гурван төрлийн хост байна:
эзэн сервер, зарц сервер, ба харилцагч. Серверүүд нь
хостуудын тохиргооны мэдээллийг хадгалсан агуулахын үүргийг
гүйцэтгэнэ. Эзэн сервер энэ мэдээллийн бүрэн эрхтэй хуулбарыг
хадгалж байдаг бол, зарц сервер нь энэ мэдээллийн хуулбарыг
нөөцөнд хадгалж байдаг. Серверүүд харилцагчдыг эдгээр мэдээллээр
хангана.</p><p>Олон файлд байгаа мэдээллийг энэ маягаар хуваалцаж хэрэглэнэ.
<code class="filename">master.passwd</code>, <code class="filename">group</code>, ба <code class="filename">hosts</code> гэсэн файлуудыг
ихэвчлэн NIS тусламжтай хуваалцана. Эдгээр файлд байдаг мэдээлэл
харилцагч талын нэг процессод хэрэгтэй боллоо гэхэд түүнийг өөрийн дотоодоос
хайхын оронд түүнд оноогдсон NIS серверээс асуулга хийнэ.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90119888"></a>30.4.3.1. Машины төрөл</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="idp90121168" class="indexterm"></a><p><span class="emphasis"><em>NIS эзэн сервер</em></span>. Энэ сервер, <span class="trademark">Windows NT</span>®-н анхдагч
домэйн сервер хянагчийн нэг адил, NIS харилцагчдын хэрэгцээний бүх файлуудыг
агуулсан байна. <code class="filename">passwd</code>, <code class="filename">group</code> ба NIS харилцагчийн хэрэглэх
бусад олон файлууд эзэн сервер дээр байна.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Нэг машин нэгээс олон NIS домэйны хувьд NIS эзэн
сервер байж болно. Гэхдээ, энд бид бага хэмжээний NIS орчны талаар
ярилцах тул энэ талаар энд үзэхгүй.</p></div></li><li class="listitem"><a id="idp90125136" class="indexterm"></a><p><span class="emphasis"><em>NIS зарц сервер</em></span>. <span class="trademark">Windows NT</span>®-н нөөц домэйн хянагчтай адилаар,
NIS зарц сервер нь NIS эзэн серверийн өгөгдлийн файлын хуулбарыг хадгална.
NIS зарц серверүүд нь нөөцөнд байдаг. Тэдгээр нь мөн эзэн серверийн
ачааллыг хуваалцаж байдаг: NIS Харилцагчид нь хамгийн түрүүнд хариу өгсөн
серверт холбогдох ба үүний тоонд зарц серверүүд ч бас орно.</p></li><li class="listitem"><a id="idp90127824" class="indexterm"></a><p><span class="emphasis"><em>NIS харилцагч</em></span>.  NIS харилцагч нь ихэнх
<span class="trademark">Windows NT</span>® ажлын машины адилаар, NIS серверт шалгуулж (эсвэл <span class="trademark">Windows NT</span>® ажлын
машины хувьд <span class="trademark">Windows NT</span>® домэйн хянагчид) нэвтэрнэ.</p></li></ul></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90135888"></a>30.4.4. NIS/YP-г хэрэглэх нь</h3></div></div></div><p>Энэ хэсэгт жишээ NIS орчныг үүсгэх болно.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90136912"></a>30.4.4.1. Төлөвлөх</h4></div></div></div><p>Та өөрийгөө нэгэн их сургуулийн жижигхэн лабораторын
администратор гэж бод. Энэ лаб 15 FreeBSD машинаас бүрдэх ба
одоогоор төвлөрсөн удирдлага байхгүй; машин бүр өөрийн
<code class="filename">/etc/passwd</code> ба <code class="filename">/etc/master.passwd</code> файлуудтай. Эдгээр файлуудыг
адилхан байлгахын тулд гараараа зөөж тавьдаг; одоогийн байдлаар лабораторид шинэ
хэрэглэгч нэмэхийн тулд, бүх 15 машин дээр нэг бүрчлэн <code class="command">adduser</code>
тушаалыг оруулах хэрэгтэй байгаа. Мэдээж үүнийг өөрчлөх хэрэгтэй,
иймээс та лабораторидоо NIS хэрэглэхээр боллоо. Машинуудаасаа хоёрыг
нь сервер болгохоор сонгож авлаа.</p><p>Тиймээс, лабораторын тохиргоо дараах байдалтай байна:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Машины нэр</th><th>IP хаяг</th><th>Машины үүрэг</th></tr></thead><tbody><tr><td><code class="systemitem">ellington</code></td><td><code class="systemitem">10.0.0.2</code></td><td>NIS эзэн</td></tr><tr><td><code class="systemitem">coltrane</code></td><td><code class="systemitem">10.0.0.3</code></td><td>NIS зарц</td></tr><tr><td><code class="systemitem">basie</code></td><td><code class="systemitem">10.0.0.4</code></td><td>Факультетийн ажлын машин</td></tr><tr><td><code class="systemitem">bird</code></td><td><code class="systemitem">10.0.0.5</code></td><td>Харилцагч машин</td></tr><tr><td><code class="systemitem">cli[1-11]</code></td><td><code class="systemitem">10.0.0.[6-17]</code></td><td>Бусад харилцагч машинууд</td></tr></tbody></table></div><p>Хэрэв та NIS зураглалыг анх удаа хийж байгаа бол,
хаанаас эхлэхээ эхлээд сайн бодох хэрэгтэй. Сүлжээ чинь ямар ч
хэмжээтэй байж болно, гол нь хэд хэдэн сонголт хийх хэрэгтэй.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90190032"></a>30.4.4.1.1. NIS Домэйн Нэрийг сонгох нь</h5></div></div></div><a id="idp90190672" class="indexterm"></a><p>Өөрийн тань байнга хэрэглэдэг <span class="quote">«<span class="quote">домэйн нэр</span>»</span> байж болохгүй.
Залруулж хэлбэл <span class="quote">«<span class="quote">NIS домэйн нэр</span>»</span> байх ёстой. Харилцагч мэдээлэл
олж авахын тулд хүсэлтээ цацах үед NIS домэйн нэрийг хэрэглэнэ.
Үүгээр нэг сүлжээнд байгаа олон серверүүд хэн нь хэний асуултанд хариулах
ёстойгоо мэдэж авна. NIS домэйн нэрийг хоорондоо ямар нэг байдлаар
хамаатай бүлэг хостын нэр гэж ойлгож болно.</p><p>Зарим байгууллагууд өөрийн Интернэтийн домэйн нэрийг
NIS домэйн нэрээр хэрэглэх нь байдаг. Энэ нь сүлжээний ямар нэг асуудлыг
задлан шинжлэх явцад түвэг удах тул энэ аргыг зөвлөдөггүй. NIS домэйн нэр нь
сүлжээний орчинд цор ганц байх ёстой бөгөөд төлөөлж байгаа бүлэг машинаа онцолсон
нэр байвал дөхөм байдаг. Жишээлбэл, Acme Inc. компаний Урлагийн хэлтэс <span class="quote">«<span class="quote">acme-art</span>»</span>
гэсэн NIS домэйнтой байж болох юм. Бид өөрсдийн жишээндээ <code class="literal">test-domain</code> гэсэн
домэйн нэрийг авлаа.</p><a id="idp90194256" class="indexterm"></a><p>Гэвч, зарим үйлдлийн системүүд (цохон дурдвал <span class="trademark">SunOS</span>™)
өөрийн NIS домэйн нэрийг Интернэт домэйн нэрээр хэрэглэдэг.
Хэрэв таны сүлжээний нэг болон түүнээс дээш тооны машин
ийм асуудалтай бол, та Интернэт домэйн нэрээ NIS домэйндоо хэрэглэх
<span class="emphasis"><em>ёстой</em></span>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90200272"></a>30.4.4.1.2. Серверт тавигдах шаардлагууд</h5></div></div></div><p>NIS серверт зориулсан машин сонгон авахдаа
анхаарах хэд хэдэн зүйлс бий. NIS-тэй холбоотой нэг учир дутагдалтай
зүйл бол харилцагчдын серверээс хамаарах хамаарал юм. Хэрэв
харилцагч өөрийн NIS домэйныг асуухаар сервертэй холбогдож чадахгүй бол,
тэр машин ашиглагдах боломжгүй болдог. Хэрэглэгч болон бүлгийн мэдээлэл
дутуугаас ихэнх системүүд түр хугацаанд зогсдог. Тиймээс, дахин дахин
асааж унтраалгаад байхааргүй, эсвэл туршилтад хэрэглэгдэхээр
машиныг сонгох хэрэгтэй. NIS сервер нь тусдаа, зөвхөн NIS серверт зориулагдсан
машин байх ёстой. Хэрэв ачаалал багатай сүлжээнд ажиллаж байгаа бол,
NIS серверийг өөр үйлчилгээ ажиллаж байгаа машин дээр тавьж болох талтай.
Хамгийн гол нь NIS сервер чинь ажиллахгүй болбол, <span class="emphasis"><em>бүх</em></span> NIS харилцагчид чинь
мөн ажиллахгүй болохыг санаарай.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90201936"></a>30.4.4.2. NIS Серверүүд</h4></div></div></div><p>Бүх NIS мэдээлэл он цагийн дарааллаараа
NIS эзэн сервер дээр хадгалагдаж байдаг.
Энэ мэдээллийг хадгалж байгаа өгөгдлийн санг NIS буулгалт гэж нэрлэнэ.
FreeBSD-д, эдгээр буулгалтууд <code class="filename">/var/yp/[domainname]</code> файл дотор байрлана.
<code class="filename">[domainname]</code> нь NIS домэйн нэр болно. Нэг NIS сервер хэд хэдэн
домэйныг зэрэг агуулж чадах тул домэйн тус бүрт зориулсан хэд хэдэн
ийм сан байж болно. Домэйн бүр өөрийн гэсэн буулгалтуудтай байна.</p><p>NIS эзэн болон зарц серверүүд бүх NIS хүсэлтийг <code class="command">ypserv</code> дэмоны
тусламжтай удирдаж явуулна. <code class="command">ypserv</code> нь NIS харилцагч нараас
ирж буй хүсэлтийг хүлээн авч, домэйныг хөрвүүлэн, уг домэйн нэрд харгалзах
өгөгдлийн файлын замыг хайж олоод, өгөгдлийг буцаан харилцагчид дамжуулах үүрэгтэй.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90204880"></a>30.4.4.2.1. NIS Эзэн Серверийг зохион байгуулах нь</h5></div></div></div><a id="idp90205520" class="indexterm"></a><p>Эзэн NIS серверийг зохион байгуулах нь харьцангуй
ойлгомжтой. FreeBSD нь бэлэн NIS суучихсан ирдэг. Зөвхөн <code class="filename">/etc/rc.conf</code>
файл дотор дараах мөрүүдийг нэмэхэд л хангалттай, үлдсэнийг нь
FreeBSD таны өмнөөс хийгээд өгөх болно.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><pre class="programlisting">nisdomainname="test-domain"</pre><p>
                Энэ мөр сүлжээ асахад (жишээ нь, систем дахин ачаалсны дараа)
NIS домэйн нэрийг <code class="literal">test-domain</code> болгоно.</p></li><li class="step"><pre class="programlisting">nis_server_enable="YES"</pre><p>
                Энэ мөр нь сүлжээ асахад NIS сервер процессуудыг
асаахыг хэлж өгнө.</p></li><li class="step"><pre class="programlisting">nis_yppasswdd_enable="YES"</pre><p>
                Энэ мөр нь <code class="command">rpc.yppasswdd</code> дэмонг идэвхжүүлнэ. Дээр хэлсэнчлэн,
энэ дэмон нь харилцагч машин дээрээс хэрэглэгч өөрийн NIS нэвтрэх
үгийг солих боломжтой болгодог.</p></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Таны NIS тохиргооноос хамааран, нэмэлт мөрүүдийг оруулах
хэрэгтэй болж магадгүй. <a class="link" href="network-nis.html#network-nis-server-is-client" title="30.4.10. NIS Сервер мөртлөө NIS Харилцагч">NIS сервер мөртлөө давхар NIS
харилцагч серверийн тухай хэсгээс</a>, доор, дэлгэрэнгүй
мэдээллийг авна уу.</p></div><p>Дээрхийг тохируулсны дараа супер хэрэглэгчийн эрхээр
	    <code class="command">/etc/netstart</code> тушаалыг ажиллуулна. Энэ нь
	    таны <code class="filename">/etc/rc.conf</code> файл дотор
	    тодорхойлж өгсөн утгуудыг ашиглан бүх зүйлсийг таны өмнөөс
	    хийх болно. Хамгийн сүүлд нь NIS буулгалтуудыг эхлүүлэхээс өмнө
	  <span class="application">ypserv</span> демоныг гараар ажиллуулах
	  хэрэгтэй.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service ypserv start</code></strong></pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90223952"></a>30.4.4.2.2. NIS Буулгалтуудыг эхлүүлэх нь</h5></div></div></div><a id="idp90224592" class="indexterm"></a><p><span class="emphasis"><em>NIS буулгалтууд</em></span> нь өгөгдлийн сангийн
файлууд бөгөөд <code class="filename">/var/yp</code> сан дотор хадгалагдана.
Тэдгээрийг NIS эзэн серверийн <code class="filename">/etc</code> сан дотор байгаа
<code class="filename">/etc/master.passwd</code> файлаас бусад тохиргооны файлуудаас үүсгэдэг.
Энэ нь их учиртай. Мэдээж та өөрийн <code class="systemitem">root</code> болон удирдах
эрхтэй дансуудынхаа нэвтрэх үгийг NIS домэйн дахь бүх сервер дээр
тарааж тавих хүсэлгүй байгаа биз дээ. Тиймээс,
NIS буулгалтуудыг эхлүүлэхийн өмнө, дараах зүйлсийг хийх хэрэгтэй:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp /etc/master.passwd /var/yp/master.passwd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi master.passwd</code></strong></pre><p>Системийн дансуудад хамаарах мөрүүдийг (<code class="systemitem">bin</code>,
            <code class="systemitem">tty</code>, <code class="systemitem">kmem</code>,
            <code class="systemitem">games</code>, гэх мэт), мөн NIS харилцагч дээр тарааж
тавих хүсэлгүй байгаа дансуудад хамаарах мөрүүдийг (жишээлбэл
<code class="systemitem">root</code> ба бусад UID 0 (супер хэрэглэгчийн) дансууд) бүгдийг
устгах хэрэгтэй.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">/var/yp/master.passwd</code> файл бүлгийн болон нийтийн хувьд
унших эрхгүй (600 төлөв) байгааг нягтална уу! Шаардлагатай бол
<code class="command">chmod</code> тушаалыг хэрэглээрэй.</p></div><a id="idp90242896" class="indexterm"></a><p>Дээр дурдсаныг гүйцэтгэж дууссаны дараа,
сая NIS буулгалтуудыг эхлүүлнэ! FreeBSD нь танд үүнийг хийж өгөх
<code class="command">ypinit</code> нэртэй скриптийг (холбогдох заавар хуудаснаас
дэлгэрэнгүй мэдээллийг авна уу) агуулж байдаг.
Энэ скрипт ихэнх <span class="trademark">UNIX</span>® үйлдлийн системд байдаг боловч,
заримд нь байхгүй байх тохиолдол бий.
Digital UNIX/Compaq Tru64 UNIX дээр энэ скрипт <code class="command">ypsetup</code> гэсэн
нэртэй байдаг. Бид NIS эзэн серверийн хувьд буулгалтуудыг
үүсгэж байгаа тул <code class="command">ypinit</code> тушаалыг <code class="option">-m</code>
тохируулгын хамт өгнө. Дээрх алхмуудыг бүгдийг хийсний дараа,
NIS буулгалтуудыг үүсгэхдээ дараах тушаалыг өгнө:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>ypinit -m test-domain</code></strong>
Server Type: MASTER Domain: test-domain
Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.
Do you want this procedure to quit on non-fatal errors? [y/n: n] <strong class="userinput"><code>n</code></strong>
Ok, please remember to go back and redo manually whatever fails.
If you don't, something might not work.
At this point, we have to construct a list of this domains YP servers.
rod.darktech.org is already known as master server.
Please continue to add any slave servers, one per line. When you are
done with the list, type a &lt;control D&gt;.
master server   :  ellington
next host to add:  <strong class="userinput"><code>coltrane</code></strong>
next host to add:  <strong class="userinput"><code>^D</code></strong>
The current list of NIS servers looks like this:
ellington
coltrane
Is this correct?  [y/n: y] <strong class="userinput"><code>y</code></strong>

[..output from map generation..]

NIS Map update completed.
ellington has been setup as an YP master server without any errors.</pre><p><code class="command">ypinit</code> нь <code class="filename">/var/yp/Makefile.dist</code>-с
<code class="filename">/var/yp/Makefile</code>-г үүсгэсэн байх ёстой.
Үүсэхдээ, энэ файл таныг ганц NIS сервертэй орчинд
зөвхөн FreeBSD машинуудтай ажиллаж байна гэж үзнэ.
<code class="literal">test-domain</code> нь зарц сервертэй тул,
та <code class="filename">/var/yp/Makefile</code> файлыг засах хэрэгтэй:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>vi /var/yp/Makefile</code></strong></pre><p>Доорх мөрийг далдлах хэрэгтэй</p><pre class="programlisting">NOPUSH = "True"</pre><p>(хэрэв далдлагдаагүй бол).</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90257232"></a>30.4.4.2.3. NIS Зарц Серверийг зохион байгуулах нь</h5></div></div></div><a id="idp90257872" class="indexterm"></a><p>NIS зарц серверийг зохион байгуулах нь
эзэн серверийг зохион байгуулахаас ч хялбар байдаг.
Зарц сервер рүү нэвтэрч ороод түрүүн хийсэн шигээ
<code class="filename">/etc/rc.conf</code> файлыг засах хэрэгтэй.
Ганц ялгаа нь <code class="command">ypinit</code> тушаалыг өгөхдөө
<code class="option">-s</code> тохируулгыг өгнө. <code class="option">-s</code> тохируулга нь
NIS эзэн серверийн нэрийг хамт оруулахыг шаардах тул бидний
тушаалын мөр дараах байдалтай байна:</p><pre class="screen">coltrane<code class="prompt">#</code> <strong class="userinput"><code>ypinit -s ellington test-domain</code></strong>

Server Type: SLAVE Domain: test-domain Master: ellington

Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.

Do you want this procedure to quit on non-fatal errors? [y/n: n]  <strong class="userinput"><code>n</code></strong>

Ok, please remember to go back and redo manually whatever fails.
If you don't, something might not work.
There will be no further questions. The remainder of the procedure
should take a few minutes, to copy the databases from ellington.
Transferring netgroup...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byuser...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byhost...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring group.bygid...
ypxfr: Exiting: Map successfully transferred
Transferring group.byname...
ypxfr: Exiting: Map successfully transferred
Transferring services.byname...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.byname...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.byname...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring netid.byname...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring ypservers...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byname...
ypxfr: Exiting: Map successfully transferred

coltrane has been setup as an YP slave server without any errors.
Don't forget to update map ypservers on ellington.</pre><p>Одоо <code class="filename">/var/yp/test-domain</code> нэртэй сан
үүссэн байх ёстой. NIS эзэн серверийн буулгалтуудын хуулбарууд
энэ сан дотор байх ёстой. Эдгээр файлууд шинэчлэгдэж
байгаа эсэхийг нягтлаж байх хэрэгтэй.
Таны зарц серверийн <code class="filename">/etc/crontab</code> доторх дараах мөрүүд
үүнийг хийх болно:</p><pre class="programlisting">20      *       *       *       *       root   /usr/libexec/ypxfr passwd.byname
21      *       *       *       *       root   /usr/libexec/ypxfr passwd.byuid</pre><p>Энэ хоёр мөр нь зарц сервер өөрийн буулгалтуудыг
эзэн сервертэй ижилхэн байлгахыг шаарддаг.
Эзэн сервер буулгалтын өөрчлөлтийг өөрийн зарц нарт автоматаар оруулж өгөхийг
оролддог болохоор эдгээр мөрүүдийг заавал хэрэглэх шаардлагагүй юм.
Гэхдээ зарц серверээс хамааралтай бусад клиентүүд дээрх зөв нууц үгийн мэдээллийн
чухлаас хамаараад нууц үгийн буулгалтын шинэчлэлтийг давтамжтайгаар хийхийг зөвлөдөг.
Буулгалтын шинэчлэлт үргэлж гүйцэд биш байж болох ачаалал их сүлжээний хувьд энэ нь
илүүтэй чухал юм.</p><p>Одоо, зарц сервер талд мөн <code class="command">/etc/netstart</code> тушаалыг өгч
NIS серверийг ажиллуулна.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90265552"></a>30.4.4.3. NIS Харилцагчид</h4></div></div></div><p>NIS харилцагч нь <code class="command">ypbind</code> дэмоны тусламжтай
тодорхой нэг NIS сервертэй холбоо тогтооно. <code class="command">ypbind</code>
системийн анхдагч домэйныг шалгах ба (<code class="command">domainname</code> тушаалаар
өгөгдсөн), дотоод сүлжээнд RPC хүсэлтийг цацаж эхлэнэ.
Эдгээр хүсэлтүүд нь <code class="command">ypbind</code>-н холбоо тогтоох гэж байгаа
домэйн нэрийг зааж өгнө. Хэрэв тухайн домэйнд
үйлчлэхээр тохируулагдсан сервер дээрх хүсэлтийг
хүлээн авбал, <code class="command">ypbind</code>-д хариу өгөх ба хариуг  хүлээж авсан
тал серверийн хаягийг тэмдэглэж авна. Хэрэв хэд хэдэн сервер
хариу өгсөн бол (нэг эзэн ба хэд хэдэн зарц), <code class="command">ypbind</code>
хамгийн түрүүнд хариу өгсөн серверийг сонгон авна. Түүнээс хойш,
харилцагч өөрийн бүх NIS хүсэлтүүдээ тэр сервер рүү явуулна.
<code class="command">ypbind</code> нь хааяа сервер амьд байгаа эсэхийг нягтлахын тулд
<span class="quote">«<span class="quote">ping</span>»</span> хийж үзнэ. Хэрэв хангалттай хугацааны дотор хариу хүлээж
аваагүй бол, <code class="command">ypbind</code> энэ домэйнтой холбоо тасарлаа гэж үзээд
өөр сервер олохын тулд хүсэлтээ цацаж эхэлнэ.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90278352"></a>30.4.4.3.1. NIS Харилцагчийг зохион байгуулах</h5></div></div></div><a id="idp90279120" class="indexterm"></a><p>FreeBSD машин дээр NIS харилцагчийг зохион байгуулах нь
нилээд хялбар байдаг.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p><code class="filename">/etc/rc.conf</code> файлыг нээгээд, NIS
домэйн нэрийг зааж өгөх ба сүлжээ асах үед <code class="command">ypbind</code>-г
ажиллуулдаг болгохын тулд дараах мөрүүдийг нэмж бичнэ:</p><pre class="programlisting">nisdomainname="test-domain"
nis_client_enable="YES"</pre></li><li class="step"><p>NIS серверээс хэрэгтэй нэвтрэх үгүүдийг импортолж
авахын тулд <code class="filename">/etc/master.passwd</code> файл дотор байгаа
бүх хэрэглэгчийн дансыг устгаад, файлын төгсгөлд
дараах мөрийг нэмэхийн тулд <code class="command">vipw</code> тушаалыг
ашиглана:</p><pre class="programlisting">+:::::::::</pre><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Энэ мөр нь NIS серверийн нэвтрэх үгийн буулгалтад
байгаа хүчинтэй хэрэглэгчид данс олгоно. Энэ мөрийг өөрчлөх замаар
NIS харилцагчийг хэд хэдэн янзаар тохируулж болно. Дэлгэрэнгүй
мэдээллийг доорх <a class="link" href="network-nis.html#network-netgroups" title="30.4.7. Netgroups-г Хэрэглэх нь">netgroups
		  section</a> хэсгээс үзнэ үү. Цааш гүнзгийрүүлэн судлах хүсэлтэй бол
<code class="literal">NFS ба NIS-г удирдах нь</code> тухай O'Reilly-н номыг үзнэ үү.</p></div><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Дор хаяж нэг дотоод эрхийг (өөрөөр хэлбэл NIS-с импортолж аваагүй)
<code class="filename">/etc/master.passwd</code> файл дотор авч үлдэх хэрэгтэй.
Энэ данс <code class="systemitem">wheel</code> бүлгийн гишүүн байх ёстой. Хэрэв NIS дээр ямар нэг
асуудал гарлаа гэхэд энэ эрхээр алсаас нэвтрэн орж, <code class="systemitem">root</code> болоод
асуудлыг шийдвэрлэх болно.</p></div></li><li class="step"><p>NIS серверээс бүх бүлгүүдийг импортолж авахын тулд
дараах мөрийг <code class="filename">/etc/group</code> файлд нэмнэ:</p><pre class="programlisting">+:*::</pre></li></ol></div><p>NIS клиентийг нэн даруй эхлүүлэхийн тулд дараах тушаалыг
	     супер хэрэглэгчийн эрхээр ажиллуулах хэрэгтэй:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/netstart</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>service ypbind start</code></strong></pre><p>Үүний дараа, <code class="command">ypcat passwd</code> тушаалыг өгч
NIS серверийн passwd буулгалтыг харж чадаж байх ёстой.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90297936"></a>30.4.5. NIS-н Аюулгүй байдал</h3></div></div></div><p>Ер нь ямар ч алсын хэрэглэгчийн хувьд өөрийн чинь
домэйн нэрийг мэдэж байвал RPC хүсэлтийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a>-д явуулж
NIS буулгалтыг харах боломжтой. Ийм төрлийн зөвшөөрөгдөөгүй
үйлдлээс сэргийлэхийн тулд <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> нь зөвхөн зааж өгсөн  хостуудаас
ирсэн хандалтыг зөвшөөрдөг <span class="quote">«<span class="quote">securenets</span>»</span> гэсэн функцыг агуулж
байдаг. Систем анх ачаалахад, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> нь securenets-н мэдээллийг
<code class="filename">/var/yp/securenets</code> гэсэн файлаас ачаална.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Энэ замыг <code class="option">-p</code> тохируулгаар зааж өгөх ба янз бүр байж болно.
Энэ файлд сүлжээг сүлжээний багийн хамт зайгаар тусгаарлан
оруулж өгсөн байна. <span class="quote">«<span class="quote">#</span>»</span> тэмдгээр эхэлсэн мөрүүд нь тайлбар болно.
Жишээ securenets файл дараах байдалтай байна:</p></div><pre class="programlisting"># allow connections from local host -- mandatory
127.0.0.1     255.255.255.255
# allow connections from any host
# on the 192.168.128.0 network
192.168.128.0 255.255.255.0
# allow connections from any host
# between 10.0.0.0 to 10.0.15.255
# this includes the machines in the testlab
10.0.0.0      255.255.240.0</pre><p>Хэрэв <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a>-н хүсэлт хүлээж авсан хаяг
эдгээр дүрмүүдийн аль нэгэнд тохирч байвал хүсэлтийг
ердийн байдлаар боловсруулна. Хэрэв энэ хаяг ямар ч дүрмэнд
тохирохгүй байвал, хүсэлтийг үл анхаарах бөгөөд
анхааруулах бичлэгийг бүртгэлд нэмнэ. Хэрэв
<code class="filename">/var/yp/securenets</code> гэсэн файл байхгүй бол,
<code class="command">ypserv</code> нь гаднаас ирсэн бүх хүсэлтийг хүлээн авна.</p><p><code class="command">ypserv</code> програм нь Wietse Venema-н <span class="application">TCP Wrapper</span> багцыг
дэмждэг. Энэ нь администраторуудын хувьд <code class="filename">/var/yp/securenets</code>-ны оронд
<span class="application">TCP Wrapper</span>-н тохиргооны файлыг хандалтыг хянахад хэрэглэх
боломжтой болгодог.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Хэдийгээр эдгээр хандалтыг хянах механизмууд нь
аюулгүй байдлыг адил түвшинд хангах боловч,
хоёул <span class="quote">«<span class="quote">IP залилах</span>»</span> халдлагад өртөмтгий байдаг. NIS-тэй холбоотой
бүх урсгалыг галт хана дээрээ хааж өгөх хэрэгтэй.</p><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">/var/yp/securenets</code> хэрэглэж байгаа серверүүд
хуучин TCP/IP дээр ажиллаж байгаа зүй ёсны NIS харилцагчид үйлчилж
чадахгүй байж магадгүй. Учир нь, тэдгээр нь өргөн цацалт хийхдээ
хост битүүдийг бүгдийг тэглэдэг ба өргөн цацалтын хаягийг тооцоолохдоо
дэд сүлжээний багийг таньж чаддаггүй болно. Хэдийгээр эдгээр асуудлуудыг
харилцагчийн тохиргоог өөрчилснөөр шийдэж болох боловч,
бусад асуудлууд нь харилцагчийн системийг цааш ашиглах боломжгүй эсвэл
<code class="filename">/var/yp/securenets</code>-г болиулах шаардлагатай болдог.</p><p xmlns="http://www.w3.org/1999/xhtml">Ийм хуучин TCP/IP дээр ажилладаг сервер дээр
<code class="filename">/var/yp/securenets</code>-г хэрэглэх нь үнэхээр хэрэггүй бөгөөд
сүлжээний ихэнх хэсэгт NIS-г ашиглах боломжгүй байдаг.</p><a xmlns="http://www.w3.org/1999/xhtml" id="idp90314832" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">TCP Wrapper</span> багцыг ашиглах нь
NIS серверийн хоцролтыг ихэсгэдэг. Энэ нэмэлт саатал нь
харилцагчийн програм дээр ялангуяа ачаалал ихтэй сүлжээнд,
эсвэл удаан NIS сервертэй бол хүлээх хугацаа дуусахад хүргэх талтай.
Хэрэв таны харилцагч систем чинь дээрх шинж тэмдгүүдийн аль нэгийг
агуулж байгаа бол та энэ харилцагч системээ NIS зарц сервер болгож өөрчлөн
хүчээр өөрөөсөө өөртөө холбогдохоор тохируулах хэрэгтэй.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90316240"></a>30.4.6. Зарим хэрэглэгчдийн нэвтрэхийг хаах</h3></div></div></div><p>Манай лабораторын жишээн дээр, <code class="systemitem">basie</code> нэртэй нэг
машин байгаа. Энэ машиныг зөвхөн багш нар хэрэглэх ёстой.
Бид энэ машиныг NIS домэйн дотроос гаргахыг хүсэхгүй байгаа, дээр нь
эзэн NIS сервер дээр байгаа <code class="filename">passwd</code> файл нь
багш нар болон оюутнуудын дансыг хоёуланг агуулж байгаа.
Бид одоо яах ёстой вэ?</p><p>NIS өгөгдлийн сан дотор бүртгэл нь байгаа ч, зарим
хэрэглэгчдийг тухайн машин руу нэвтрэхийг хаах нэг арга байна.
Үүний тулд <code class="literal">-username</code> гэсэн мөрийг
бусад мөрүүдийн адил форматаар харилцагч машин дээр <code class="filename">/etc/master.passwd</code> файлын төгсгөлд нэмэх
хэрэгтэй.  Энд <em class="replaceable"><code>username</code></em> гэдэг нь
нэвтрэхийг нь хаах гэж байгаа хэрэглэгчийн нэр юм.
Хаасан хэрэглэгчийн мөр <code class="literal">+</code> гэж нээсэн NIS хэрэглэгчийн 
мөрөөс дээр байх ёстой.
Дээрх үйлдлийг хийхдээ <code class="command">vipw</code>-г ашиглахыг зөвлөж байна.
<code class="command">vipw</code> нь <code class="filename">/etc/master.passwd</code> файл дотор хийгдсэн өөрчлөлтийг
хянах бөгөөд өөрчлөлт хийж дууссаны дараа нэвтрэх үгийн санг автоматаар
дахин үүсгэж өгдөг. Жишээ нь, хэрэв бид <code class="systemitem">bill</code> гэсэн хэрэглэгчийг
<code class="systemitem">basie</code> хост дээр нэвтрэхийг хаахыг хүсэж байгаа бол:</p><pre class="screen">basie<code class="prompt">#</code> <strong class="userinput"><code>vipw</code></strong>
<strong class="userinput"><code>[add -bill::::::::: to the end, exit]</code></strong>
vipw: rebuilding the database...
vipw: done

basie<code class="prompt">#</code> <strong class="userinput"><code>cat /etc/master.passwd</code></strong>

root:[password]:0:0::0:0:The super-user:/root:/bin/csh
toor:[password]:0:0::0:0:The other super-user:/root:/bin/sh
daemon:*:1:1::0:0:Owner of many system processes:/root:/sbin/nologin
operator:*:2:5::0:0:System &amp;:/:/sbin/nologin
bin:*:3:7::0:0:Binaries Commands and Source,,,:/:/sbin/nologin
tty:*:4:65533::0:0:Tty Sandbox:/:/sbin/nologin
kmem:*:5:65533::0:0:KMem Sandbox:/:/sbin/nologin
games:*:7:13::0:0:Games pseudo-user:/usr/games:/sbin/nologin
news:*:8:8::0:0:News Subsystem:/:/sbin/nologin
man:*:9:9::0:0:Mister Man Pages:/usr/share/man:/sbin/nologin
bind:*:53:53::0:0:Bind Sandbox:/:/sbin/nologin
uucp:*:66:66::0:0:UUCP pseudo-user:/var/spool/uucppublic:/usr/libexec/uucp/uucico
xten:*:67:67::0:0:X-10 daemon:/usr/local/xten:/sbin/nologin
pop:*:68:6::0:0:Post Office Owner:/nonexistent:/sbin/nologin
nobody:*:65534:65534::0:0:Unprivileged user:/nonexistent:/sbin/nologin
-bill
+:::::::::

basie<code class="prompt">#</code></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-netgroups"></a>30.4.7. Netgroups-г Хэрэглэх нь</h3></div><div><span class="authorgroup">Хувь нэмрээ оруулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Удо</span> <span class="surname">Эрделхофф</span></span>. </span></div><div><span class="authorgroup">Орчуулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Лодойсамбын</span> <span class="surname">Баянзул</span></span>. </span></div></div></div><a id="idp90357712" class="indexterm"></a><p>Цөөхөн тооны машин эсвэл хэрэглэгчийн хувьд
тусгай дүрэм хэрэгтэй үед өмнөх хэсэгт дурдсан аргыг
хэрэглэх нь илүү тохиромжтой. Харин том сүлжээний хувьд
зарим хэрэглэгчийн чухал машин руу нэвтрэх эрхийг хаахаа мартах,
эсвэл бүх машиныг нэг бүрчлэн гараараа тохируулж өгөх, өөрөөр хэлбэл
NIS-н <span class="emphasis"><em>төвлөрсөн</em></span> удирдлага гэсэн гол санааг ашиглаж чадахгүй байх
тохиолдлууд <span class="emphasis"><em>гарах болно</em></span>.</p><p>NIS-г хөгжүүлэгчид энэ асуудлыг шийдэхийн тулд
<span class="emphasis"><em>netgroups</em></span> буюу сүлжээний бүлгүүд гэсэн шинэ зүйлийг бий болгожээ.
Түүний зорилго болон семантикийг <span class="trademark">UNIX</span>® файл системийн
жирийн бүлэгтэй дүйцүүлж болох юм. Гол ялгаанууд нь гэвэл
тоон дугаар байхгүй, мөн сүлжээний бүлгийг тодорхойлж өгөхдөө
хэрэглэгч болон өөр сүлжээний бүлгийг оруулж болдог.</p><p>Сүлжээний бүлэг нь хэдэн зуун хэрэглэгч болон машинтай
том, төвөгтэй сүлжээтэй ажиллахад зориулж бүтээгдсэн юм.
Нэг талаар, хэрэв та үнэхээр тийм том сүлжээнд ажиллаж байгаа бол
энэ нь Сайн Зүйл юм. Харин нөгөө талаас, энэ байдал нь
жижигхэн сүлжээнд хялбар жишээн дээр сүлжээний бүлгийг тайлбарлах
бараг боломжгүй болгож байна. Энэ хэсгийн үлдсэн хэсэгт хэрэглэж
байгаа жишээн дээр энэ асуудлыг харуулахыг оролдлоо.</p><p>NIS-г лабораторидоо нэвтрүүлсэн тань танай удирдлагуудын
анхаарлыг татсан гэж бодьё. Одоо оюутны хотхон дотор байгаа
бусад машиныг NIS домэйнд оруулж өргөтгөх ажлыг хийхийг танд
даалгажээ. Дараах хоёр хүснэгтэнд шинээр нэмэх хэрэглэгч болон
машины нэрийг товч тайлбарын хамт үзүүллээ.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Хэрэглэгчийн нэр</th><th>Тайлбар</th></tr></thead><tbody><tr><td><code class="systemitem">alpha</code>, <code class="systemitem">beta</code></td><td>IT хэлтсийн ердийн ажилчид</td></tr><tr><td><code class="systemitem">charlie</code>, <code class="systemitem">delta</code></td><td>IT хэлтсийн шинэ дагалдан</td></tr><tr><td><code class="systemitem">echo</code>, <code class="systemitem">foxtrott</code>, <code class="systemitem">golf</code>, ...</td><td>бусад ердийн ажилчид</td></tr><tr><td><code class="systemitem">able</code>, <code class="systemitem">baker</code>, ...</td><td>дадлагажигчид</td></tr></tbody></table></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Машины нэр</th><th>Тайлбар</th></tr></thead><tbody><tr><td><code class="systemitem">war</code>, <code class="systemitem">death</code>,
              <code class="systemitem">famine</code>,
              <code class="systemitem">pollution</code></td><td>Таны хамгийн чухал серверүүд. Зөвхөн IT хэлтсийн
ажилчид л нэвтрэх эрхтэй.</td></tr><tr><td><code class="systemitem">pride</code>, <code class="systemitem">greed</code>,
              <code class="systemitem">envy</code>, <code class="systemitem">wrath</code>,
              <code class="systemitem">lust</code>, <code class="systemitem">sloth</code></td><td>Харьцангуй чухал биш серверүүд. IT хэлтэст харъяалагддаг бүх
хүмүүс нэвтрэх эрхтэй.</td></tr><tr><td><code class="systemitem">one</code>, <code class="systemitem">two</code>,
                <code class="systemitem">three</code>, <code class="systemitem">four</code>,
                ...</td><td>Ердийн ажлын машинууд. Зөвхөн <span class="emphasis"><em>үндсэн</em></span> ажилчид
нэвтрэх эрхтэй.</td></tr><tr><td><code class="systemitem">trashcan</code></td><td>Чухал зүйл байхгүй маш хуучин машин.
Дадлагажигчид хүртэл нэвтрэх эрхтэй.</td></tr></tbody></table></div><p>Хэрэв та дээрх хязгаарлалтуудыг
тус бүрд нь хэрэглэгчийг хаах замаар хийх гэж оролдвол
бүх машин дээр хаах хэрэглэгч тус бүрийн хувьд
<code class="literal">-user</code> мөрийг <code class="filename">passwd</code>
файл дотор нэмж өгөх ёстой болно. Хэрэв нэг л мөрийг
нэмэхээ мартвал асуудалд орно гэсэн үг.</p><p>Энэ байдалд сүлжээний бүлгийг ашиглах нь
нилээд олон давуу талтай. Хэрэглэгч бүрийг тус тусад нь
авч үзнэ; нэг хэрэглэгчийг нэг болон түүнээс дээш тооны
сүлжээний бүлэгт оноож, тухайн сүлжээний бүлгийн бүх гишүүдийн хувьд
нэвтрэхийг эсвэл зөвшөөрч эсвэл хаана.  Хэрэв та шинэ машин нэмбэл,
зөвхөн сүлжээний бүлгүүдийн хувьд л нэвтрэх эрхийг зааж өгнө. Хэрэв шинэ
хэрэглэгч нэмбэл, тухайн хэрэглэгчийг нэг болон түүнээс дээш
тооны сүлжээний бүлэгт нэмэхэд л хангалттай. Эдгээр өөрчлөлтүүд нь нэг
нэгнээсээ хамааралгүй: <span class="quote">«<span class="quote">хэрэглэгч ба машины бүх хувилбарт нэмэх...</span>»</span>
шаардлагагүй болно. Хэрэв та NIS-г анхнаас нь бодлоготой хийх юм бол,
машинууд руу нэвтрэх эрхийг хянахдаа
зөвхөн ганцхан тохиргооны файлыг өөрчлөхөд хангалттай.</p><p>Хамгийн эхний алхам бол NIS сүлжээний бүлгийн буулгалтыг
эхлүүлэх юм. FreeBSD-н <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypinit&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypinit</span>(8)</span></a> нь энэ буулгалтыг анхдагч байдлаар
үүсгэдэггүй, гэвч хэрэв нэгэнт үүсгэчихвэл түүний NIS-тэй ажиллах хэсэг нь
энэ буулгалт дээр ажиллах чадвартай. Хоосон буулгалт үүсгэхийн тулд:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>vi /var/yp/netgroup</code></strong></pre><p>гэж бичээд дараах зүйлсийг нэмж бичнэ. Манай жишээний хувьд,
бидэнд дор хаяж дөрвөн сүлжээний бүлэг хэрэгтэй: IT ажилчид,
IT дагалдангууд, ердийн ажилчид болон дадлагажигчид.</p><pre class="programlisting">IT_EMP  (,alpha,test-domain)    (,beta,test-domain)
IT_APP  (,charlie,test-domain)  (,delta,test-domain)
USERS   (,echo,test-domain)     (,foxtrott,test-domain) \
        (,golf,test-domain)
INTERNS (,able,test-domain)     (,baker,test-domain)</pre><p><code class="literal">IT_EMP</code>, <code class="literal">IT_APP</code> гэх мэт нь сүлжээний бүлгийн
нэр. Хаалтан дотор байгаа бүлэг нь хэрэглэгч нэмж байгаа нь. Бүлэг доторх
гурван талбар нь:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Дараах зүйлүүд хүчинтэй байх хостын нэр. Хэрэв хостын нэр зааж өгөхгүй бол,
бүх хостын хувьд хүчинтэй гэсэн үг. Хэрэв хостын нэр зааж өгвөл,
та үл ойлгогдох, толгой эргүүлсэн хачин зүйлстэй тулгарах болно.</p></li><li class="listitem"><p>Энэ сүлжээний бүлэгт хамаарах дансны нэр.</p></li><li class="listitem"><p>Тухайн дансны NIS домэйн. Хэрэв та нэгээс олон NIS
домэйнд харъяалагддаг азгүй залуусын нэг бол,
өөрийн сүлжээний бүлэгт өөр NIS домэйноос данс импортолж болно.</p></li></ol></div><p>Эдгээр талбаруудын алинд ч орлуулагддаг тэмдэгт ашиглаж болно.
Дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netgroup&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">netgroup</span>(5)</span></a> заавар хуудаснаас үзнэ үү.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp90405328" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">Сүлжээний бүлгүүдийн нэр 8-с дээш тэмдэгт байж
болохгүй, ялангуяа тухайн NIS домэйнд өөр үйлдлийн системтэй
машинууд ажиллаж байгаа бол. Нэрүүд нь том жижиг үсгийн ялгаатай;
сүлжээний бүлгийн нэрийг том үсгээр бичих нь
хэрэглэгчийн нэр, машины нэр болон сүлжээний бүлгийн нэрийг
хооронд нь ялгахад хялбар болгодог.</p><p xmlns="http://www.w3.org/1999/xhtml">Зарим NIS харилцагчид (FreeBSD-с бусад) олон тооны гишүүдтэй
сүлжээний бүлэгтэй ажиллаж чаддаггүй. Жишээлбэл,
<span class="trademark">SunOS</span>™-н зарим хуучин хувилбарууд сүлжээний бүлэг
15-с дээш тооны <span class="emphasis"><em>гишүүн</em></span>-тэй бол асуудалтай байдаг.
Энэ хязгаарыг давахын тулд 15 ба түүнээс доош тооны хэрэглэгчтэй
дэд сүлжээний бүлгүүд үүсгээд, дараа нь эдгээр дэд сүлжээний бүлгүүдээс
тогтсон жинхэнэ сүлжээний бүлэг үүсгэх замаар үүсгэж болно:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">BIGGRP1  (,joe1,domain)  (,joe2,domain)  (,joe3,domain) [...]
BIGGRP2  (,joe16,domain)  (,joe17,domain) [...]
BIGGRP3  (,joe31,domain)  (,joe32,domain)
BIGGROUP  BIGGRP1 BIGGRP2 BIGGRP3</pre><p xmlns="http://www.w3.org/1999/xhtml">Хэрэв танд нэг сүлжээний бүлэгт 225-с дээш хэрэглэгч хэрэгтэй
бол, дээрх үйлдлийг давтах маягаар цааш үргэлжлүүлж болно.</p></div><p>Шинээр үүсгэсэн NIS буулгалтаа идэвхжүүлэх болон тараах нь амархан:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
ellington<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong></pre><p>Ингэснээр <code class="filename">netgroup</code>,
        <code class="filename">netgroup.byhost</code> ба
        <code class="filename">netgroup.byuser</code> гэсэн гурван NIS буулгалт үүсэх болно.
Дээрх шинэ буулгалтууд идэвхтэй болсон эсэхийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypcat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypcat</span>(1)</span></a> ашиглан
шалгаарай:</p><pre class="screen">ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup</code></strong>
ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup.byhost</code></strong>
ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup.byuser</code></strong></pre><p>Эхний тушаалын үр дүн <code class="filename">/var/yp/netgroup</code> файл доторхтой
төстэй байх ёстой. Хэрэв та хостоор тусгайлан сүлжээний бүлэг үүсгээгүй бол
хоёр дахь тушаалын үр дүнд юу ч гарах ёсгүй. Гурав дахь тушаалын
тусламжтай тухайн хэрэглэгчийн сүлжээний бүлгүүдийн жагсаалтыг
харахад хэрэглэгдэнэ.</p><p>Харилцагчийг тохируулахад нилээд хялбар.
<code class="systemitem">war</code> нэртэй серверийг тохируулахын тулд, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a>-г
ажиллуулаад</p><pre class="programlisting">+:::::::::</pre><p>гэсэн мөрийг</p><pre class="programlisting">+@IT_EMP:::::::::</pre><p>гэсэн мөрөөр сольж бичих хэрэгтэй.
Ингэснээр, зөвхөн <code class="literal">IT_EMP</code> сүлжээний бүлэгт заагдсан
хэрэглэгчдийн мэдээлэл <code class="systemitem">war</code>-н нэвтрэх үгийн санд импортлогдож,
зөвхөн эдгээр хэрэглэгчид л энэ машин руу нэвтрэх эрхтэй боллоо.</p><p>Харамсалтай нь, энэ хязгаарлалт нь
бүрхүүлийн <code class="literal">~</code> функцад, мөн хэрэглэгчийн нэр ба тоон дугаарыг
хооронд нь хөрвүүлдэг бүх дэд програмуудад хамаатай. Өөрөөр хэлбэл,
<code class="command">cd ~user</code> тушаал ажиллахгүй,
<code class="command">ls -l</code> тушаал хэрэглэгчийн нэрийн оронд
түүний тоон дугаарыг харуулах ба <code class="command">find . -user joe -print</code> тушаал
<span class="errorname">Тийм хэрэглэгч байхгүй</span> гэсэн алдааны мэдээлэл өгч амжилтгүй
болох болно. Үүнийг засахын тулд, бүх хэрэглэгчдийн бүртгэлийг
<span class="emphasis"><em>сервер рүү нэвтрэх эрхгүйгээр</em></span> импортлох хэрэгтэй болно.</p><p>Үүний тулд өөр нэг мөрийг <code class="filename">/etc/master.passwd</code> файлд нэмж өгөх хэрэгтэй.
Энэ мөр нь:</p><p><code class="literal">+:::::::::/sbin/nologin</code> гэсэн бичлэгийг агуулж байх ёстой бөгөөд,
энэ нь <span class="quote">«<span class="quote">бүх бүртгэлийг импортол, гэхдээ импортлогдож байгаа бүртгэлүүдийн
бүрхүүлийг <code class="filename">/sbin/nologin</code>-р соль</span>»</span> гэсэн утгатай. Үүнтэй адилаар
<code class="literal">passwd</code> файлын ямар ч талбарыг <code class="filename">/etc/master.passwd</code> файл дахь анхдагч
утгыг сольж бичсэнээр өөрчилж болно.</p><div xmlns="" class="warning"><h3 class="admontitle">Сануулга: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="literal">+:::::::::/sbin/nologin</code> гэсэн мөр <code class="literal">+@IT_EMP:::::::::</code> гэсэн мөрийн
дараа бичигдсэн эсэхийг сайтар нягтлаарай. Үгүй бол, NIS-с импортлогдсон бүх
хэрэглэгчдийн бүрхүүл <code class="filename">/sbin/nologin</code> болчихно шүү.</p></div><p>Дээрх өөрчлөлтийг хийсний дараа,
хэрэв IT хэлтэст шинэ ажилчин орвол,
зөвхөн ганцхан NIS буулгалтыг өөрчлөх боллоо. Чухал бус бусад серверийн хувьд
ижилхэн арга хэрэглэж, тэдгээрийн өөрийн <code class="filename">/etc/master.passwd</code> файл дотор байгаа
хуучин <code class="literal">+:::::::::</code> мөрийг:</p><pre class="programlisting">+@IT_EMP:::::::::
+@IT_APP:::::::::
+:::::::::/sbin/nologin</pre><p>гэсэн мөрөөр сольж бичих хэрэгтэй. Ердийн ажлын машины хувьд:</p><pre class="programlisting">+@IT_EMP:::::::::
+@USERS:::::::::
+:::::::::/sbin/nologin</pre><p>байх ёстой. Ингээд бүх зүйл асуудалгүй ажиллах болно.
Гэтэл хэдэн долоо хоногийн дараа дүрэм, журманд өөрчлөлт орлоо:
IT хэлтэс дадлагажигч авч эхэллээ. IT хэлтсийн дадлагажигчид
ердийн ажлын машин болон чухал бус серверүүдэд нэвтрэх эрхтэй;
IT дагалдангууд гол сервер рүү нэвтрэх эрхтэй болжээ. Одоо <code class="literal">IT_INTERN</code>
гэсэн шинэ сүлжээний бүлэг нэмж, энэ бүлэгт шинэ IT дадлагажигчдийг
нэмээд, энэ өөрчлөлтийг бүх машины тохиргоонд оруулж эхлэх хэрэгтэй...
Бидний хэлж заншсанаар: <span class="quote">«<span class="quote">Төвлөрсөн төлөвлөгөөн дээрх алдаа,
бүх юмыг орвонгоор нь эргүүлнэ</span>»</span>.</p><p>Энэ мэт тохиолдолуудад NIS-н
өөр сүлжээний бүлгээс шинэ сүлжээний бүлэг үүсгэх боломж нь тус болно.
Нэг боломж нь үүрэг дээр үндэслэсэн сүлжээний бүлэг юм.
Жишээ нь, чухал серверүүд рүү нэвтрэх эрхийг хянахын тулд
<code class="literal">BIGSRV</code> гэсэн нэртэй сүлжээний бүлэг үүсгэж болох ба,
чухал бус серверүүдийн хувьд өөр <code class="literal">SMALLSRV</code> гэсэн бүрэг үүсгэж,
<code class="literal">USERBOX</code> гэсэн гурав дахь бүлгийг ердийн ажлын машинуудад зориулж
үүсгэж болох юм. Эдгээр сүлжээний бүлэг тус бүр
дээрх гурван төрлийн машинд нэвтрэх эрхтэй
сүлжээний бүлгүүдийг агуулна. NIS сүлжээний бүлгийн буулгалт
дараах байдалтай байна:</p><pre class="programlisting">BIGSRV    IT_EMP  IT_APP
SMALLSRV  IT_EMP  IT_APP  ITINTERN
USERBOX   IT_EMP  ITINTERN USERS</pre><p>Нэвтрэх эрхийг хязгаарлах энэ арга нь
ижил төрлийн хязгаарлалттай машинуудыг нэг бүлэг болговол илүү
үр дүнтэй ажиллана. Харамсалтай нь, заавал тийм байх албагүй.
Ихэнх тохиолдолд, машин тус бүрээр нэвтрэх эрхийг хязгаарлах
боломжтой байх шаардлага зайлшгүй тулгардаг.</p><p>Машин дээр үндэслэсэн сүлжээний бүлэг тодорхойлох нь
дээрх мэтийн дүрэм журамд өөрчлөлт ороход хэрэглэж болох
хоёр дахь боломж юм. Энэ тохиолдолд, машин бүрийн
<code class="filename">/etc/master.passwd</code> файл дотор <span class="quote">«<span class="quote">+</span>»</span>-р эхэлсэн хоёр
мөр бичлэг байна. Эхнийх нь энэ машин руу нэвтрэх эрхтэй дансуудаас бүрдсэн
сүлжээний бүлгийг нэмж өгнө, хоёр дахь нь бусад дансуудыг
<code class="filename">/sbin/nologin</code> бүрхүүлтэйгээр нэмнэ. Сүлжээний бүлгийн нэрийг
машины нэрийг <span class="quote">«<span class="quote">БҮХ ҮСГИЙГ ТОМООР</span>»</span> байхаар сонгож авах нь
тохиромжтой. Өөрөөр хэлбэл, мөрүүд дараах байдалтай харагдах ёстой:</p><pre class="programlisting">+@<em class="replaceable"><code>BOXNAME</code></em>:::::::::
+:::::::::/sbin/nologin</pre><p>Бүх машины хувьд дээрх үйлдлийг хийж дууссаны дараа,
өөрийн <code class="filename">/etc/master.passwd</code> файлыг дахин өөрчлөх шаардлагагүй болно.
Бусад бүх өөрчлөлтүүдийг NIS буулгалтыг өөрчилснөөр шийдэх болно. Дээрх асуудалд
тохирох сүлжээний бүлгийн буулгалтыг зарим нэмэлт өөрчлөлтүүдийн хамт
дор жишээ болгож үзүүлэв:</p><pre class="programlisting"># Define groups of users first
IT_EMP    (,alpha,test-domain)    (,beta,test-domain)
IT_APP    (,charlie,test-domain)  (,delta,test-domain)
DEPT1     (,echo,test-domain)     (,foxtrott,test-domain)
DEPT2     (,golf,test-domain)     (,hotel,test-domain)
DEPT3     (,india,test-domain)    (,juliet,test-domain)
ITINTERN  (,kilo,test-domain)     (,lima,test-domain)
D_INTERNS (,able,test-domain)     (,baker,test-domain)
#
# Now, define some groups based on roles
USERS     DEPT1   DEPT2     DEPT3
BIGSRV    IT_EMP  IT_APP
SMALLSRV  IT_EMP  IT_APP    ITINTERN
USERBOX   IT_EMP  ITINTERN  USERS
#
# And a groups for a special tasks
# Allow echo and golf to access our anti-virus-machine
SECURITY  IT_EMP  (,echo,test-domain)  (,golf,test-domain)
#
# machine-based netgroups
# Our main servers
WAR       BIGSRV
FAMINE    BIGSRV
# User india needs access to this server
POLLUTION  BIGSRV  (,india,test-domain)
#
# This one is really important and needs more access restrictions
DEATH     IT_EMP
#
# The anti-virus-machine mentioned above
ONE       SECURITY
#
# Restrict a machine to a single user
TWO       (,hotel,test-domain)
# [...more groups to follow]</pre><p>Хэрэв та хэрэглэгчдийнхээ дансыг удирдахын тулд
ямар нэг өгөгдлийн санг ашигладаг бол, дээрх буулгалтын эхний
хэсгийг өгөгдлийн сангийнхаа тайлан бэлтгэх багажуудыг
ашиглах үүсгэх боломжтой. Энэ замаар, шинэ хэрэглэгчид машинуудад
хандах эрхийг автоматаар олж авах болно.</p><p>Эцэст нь анхааруулж хэлэх нэг зүйл байна: Машин дээр үндэслэсэн
сүлжээний бүлгийг хэрэглэхийг байнга зөвлөхгүй. Хэрэв
оюутны лабораторид зориулсан, хэдэн арван эсвэл хэдэн зуун
нэг ижил машинтай ажиллаж байгаа бол, NIS буулгалтыг тодорхой хэмжээнд барьж
байхын тулд машин дээр үндэслэсэн сүлжээний бүлгийн оронд үүрэг дээр үндэслэсэн
сүлжээний бүлгийг хэрэглэх хэрэгтэй.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90447312"></a>30.4.8. Санаж явах чухал зүйлс</h3></div></div></div><p>NIS орчинд ороод, өөрөөр хийх ёстой хэд хэдэн зүйлс байна.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Лабораторид шинэ хэрэглэгч нэмэх бүрдээ
<span class="emphasis"><em>зөвхөн</em></span> эзэн NIS серверт нэмэх ёстой,
ба <span class="emphasis"><em>NIS буулгалтыг заавал дахин үүсгэх ёстой</em></span>.
Хэрэв ингэхээ мартвал, шинэ хэрэглэгч эзэн NIS серверээс
өөр хаашаа ч нэвтэрч чадахгүй болно. Жишээ нь,
бид <code class="systemitem">jsmith</code> гэсэн шинэ хэрэглэгчийг лабораторид нэмэх боллоо:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw useradd jsmith</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make test-domain</code></strong></pre><p><code class="command">pw useradd jsmith</code>-н оронд <code class="command">adduser jsmith</code>-г мөн хэрэглэж болно.</p></li><li class="listitem"><p><span class="emphasis"><em>Администратор эрхтэй дансуудыг NIS буулгалтад оруулах ёсгүй</em></span>.
Администратор эрхээр орох ёсгүй хэрэглэгчдийн машин дээр администратор эрхтэй
дансууд болон нэвтрэх үгүүдийг тараах хүсэлгүй байгаа биз дээ.</p></li><li class="listitem"><p><span class="emphasis"><em>NIS эзэн болон зарц серверийн аюулгүй байдлыг хангаж,
ажиллахгүй байх хугацааг багасгах хэрэгтэй</em></span>. Хэрэв хэн нэг нь
серверт нууцаар нэвтэрч, эсвэл унтрааж орхивол хүмүүсийг лабораторын машинууд руу
нэвтрэх боломжгүй болгож, саад болох болно.</p><p>Энэ нь ямар ч төвлөрсөн удирдах системийн
гол сул тал юм. Хэрэв та өөрийн NIS серверийг хамгаалахгүй бол,
та маш олон ууртай хэрэглэгчидтэй таарах болно шүү!</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90473424"></a>30.4.9. NIS v1 нийцтэй байдал</h3></div></div></div><p> FreeBSD-н <span class="application">ypserv</span> нь NIS v1 харилцагчдад үйлчлэх
зарим дэмжигчтэй ирдэг. FreeBSD-н NIS нь зөвхөн NIS v2 протоколыг хэрэглэдэг,
гэхдээ бусад нь хуучин системүүдтэй нийцтэй ажиллахын тулд
v1 протоколыг дэмждэг байхаар бүтээгдсэн байдаг.
Эдгээр системтэй хамт ирсэн <span class="application">ypbind</span> дэмонууд
хэдийгээр үнэн хэрэг дээрээ хэзээ ч хэрэглэхгүй боловч
NIS v1 сервертэй холболт үүсгэхийг оролддог (ба
v2 серверээс хариу хүлээж авсан ч өргөн цацалт хийж
хайлтаа үргэлжлүүлдэг талтай). Хэдийгээр
ердийн харилцагчийн хүсэлтийг дэмждэг боловч,
<span class="application">ypserv</span>-н энэ хувилбар v1 буулгалтыг зөөх хүсэлттэй ажиллаж чадахгүй;
иймээс, зөвхөн v1 протоколыг дэмждэг хуучин NIS серверүүдтэй
холбоотойгоор эзэн эсвэл зарц байдлаар ажиллаж чадахгүй.
Аз болоход, ийм серверийг одоо хэрэглэж байгаа газар байхгүй.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-nis-server-is-client"></a>30.4.10. NIS Сервер мөртлөө NIS Харилцагч</h3></div></div></div><p> Сервер машин нь мөн NIS харилцагч байдлаар ажилладаг
олон сервертэй домэйнд <span class="application">ypserv</span>-г ажиллуулахдаа
анхааралтай байх хэрэгтэй. Ийм серверийг өргөн цацалт хийлгэж,
өөр нэг сервертэй холбоо тогтоохыг зөвшөөрөхийн оронд өөрөө өөртэй нь
хүчээр холбох нь ихэвчлэн дээр байдаг. Хэрэв нэг сервер унтарч, бусад
серверүүд түүнээс хамааралтай байх юм бол хачин алдаанууд гарч болзошгүй.
Эцэст нь бүх харилцагчдын хүлээх хугацаа дуусаж,
бүгд өөр сервертэй холбогдохыг оролдох болно. Хэдийгээр бүх серверүүд
холболтуудаа сэргээж буцаад хэвийн байдалдаа орсон ч, саатлаас болж
харилцагчид холбогдож чадахгүй хэвээр байх болно.</p><p>Хостыг ямар нэг сервертэй холбогдохыг
<code class="command">ypbind</code> тушаалыг <code class="option">-S</code> тугийн хамт ажиллуулж,
урдаас зааж өгч болно. Хэрэв NIS серверийг дахин ачаалах тоолонд энэ
тушаалыг гараар оруулах хүсэлгүй байгаа бол, дараах мөрүүдийг
өөрийн <code class="filename">/etc/rc.conf</code> файл дотор нэмээрэй:</p><pre class="programlisting">nis_client_enable="YES"	# run client stuff as well
nis_client_flags="-S <em class="replaceable"><code>NIS domain</code></em>,<em class="replaceable"><code>server</code></em>"</pre><p>Дэлгэрэнгүй мэдээллийг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypbind&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypbind</span>(8)</span></a> заавар хуудаснаас үзнэ үү.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90485456"></a>30.4.11. Нэвтрэх үгийн хэлбэр</h3></div></div></div><a id="idp90486096" class="indexterm"></a><p>NIS-г зохион байгуулах явцад ихэвчлэн тохиолддог асуудлуудын нэг бол
нэвтрэх үгийн хэлбэрийн нийцгүй байдал юм. Хэрэв таны NIS
сервер DES хувиргалттай нэвтрэх үгийг хэрэглэдэг бол,
зөвхөн DES хэрэглэдэг харилцагчид үйлчлэх чадвартай. Жишээлбэл,
хэрэв сүлжээнд чинь <span class="trademark">Solaris</span>™ NIS харилцагчид байгаа бол,
та бараг л DES хувиргалттай нэвтрэх үг хэрэглэх шаардлагатай гэсэн үг.</p><p>Таны сервер болон харилцагчид ямар хэлбэрийн нэвтрэх үг хэрэглэдгийг
шалгахдаа <code class="filename">/etc/login.conf</code> файлыг үзээрэй. Хэрэв тухайн хост
DES хувиргалттай нэвтрэх үг хэрэглэдэг бол, <code class="literal">default</code> буюу анхдагч ангилал
нь дараах мөрүүдийг агуулсан байх болно:</p><pre class="programlisting">default:\
	:passwd_format=des:\
	:copyright=/etc/COPYRIGHT:\
	[Further entries elided]</pre><p><code class="literal">passwd_format</code> нь өөр <code class="literal">blf</code> ба <code class="literal">md5</code> гэсэн
утгуудыг авч болно (Blowfish болон MD5 хувиргалттай нэвтрэх үгийн хувьд).</p><p>Хэрэв та <code class="filename">/etc/login.conf</code> файлд өөрчлөлт хийсэн бол,
нэвтрэх чадварын санг дахин үүсгэх шаардлагатай. Үүний тулд дараах тушаалыг
<code class="systemitem">root</code> эрхээр өгөх хэрэгтэй:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cap_mkdb /etc/login.conf</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">/etc/master.passwd</code> файл дотор аль хэдийн үүссэн нэвтрэх үгийн
хэлбэр нь хэрэглэгч нэвтрэх чадварын сан дахин үүссэнээс хойш анх удаа нэвтрэх
үгээ солих хүртэл өөрчлөгдөхгүй.</p></div><p>Мөн, таны сонгосон хэлбэрээр нэвтрэх үгүүдэд
хувиргалт хийгддэг болгохын тулд,
<code class="filename">/etc/auth.conf</code> файл доторх <code class="literal">crypt_default</code> утга
таны сонгосон хэлбэрийг хамгийн түрүүнд оруулсан байгаа эсэхийг
шалгах хэрэгтэй. Жишээ нь, DES хувиргалттай нэвтрэх үгийг хэрэглэх үед:</p><pre class="programlisting">crypt_default	=	des blf md5</pre><p>FreeBSD дээр тулгуурласан NIS сервер болон харилцагч бүр дээр дээрх
үйлдлүүдийг хийснээр, нэвтрэх үгийн хэлбэр бүгд таарч байгаа гэдэгт
санаа амар байж болно. Хэрэв NIS харилцагч дээр нэвтэрч ороход асуудал
гарвал, асуудлыг тодруулах нэг газар байна.
Хэрэв та холимог сүлжээний хувьд NIS сервер босгох гэж байгаа бол,
ихэнх систем дээр зайлшгүй байх хамгийн бага стандарт тул,
бүх системүүд дээрээ DES ашиглах хэрэгтэйг санаарай.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-nfs.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="network-dhcp.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">30.3. Сүлжээний Файлын Систем (NFS) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 30.5. Автомат Сүлжээний Тохиргоо (DHCP)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>