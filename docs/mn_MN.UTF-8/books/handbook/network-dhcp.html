<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>30.5. Автомат Сүлжээний Тохиргоо (DHCP)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="network-servers.html" title="Бүлэг 30. Сүлжээний орчны Серверүүд" /><link rel="prev" href="network-nis.html" title="30.4. Сүлжээний Мэдээллийн Систем (NIS/YP)" /><link rel="next" href="network-dns.html" title="30.6. Домэйн Нэрийн Систем (DNS)" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">30.5. Автомат Сүлжээний Тохиргоо (DHCP)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-nis.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 30. Сүлжээний орчны Серверүүд</th><td width="20%" align="right"> <a accesskey="n" href="network-dns.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-dhcp"></a>30.5. Автомат Сүлжээний Тохиргоо (DHCP)</h2></div><div><span class="authorgroup">Бичсэн <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Грег</span> <span class="surname">Саттер</span></span>. </span></div><div><span class="authorgroup">Орчуулсан <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Лодойсамбын</span> <span class="surname">Баянзул</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90508624"></a>30.5.1. DHCP гэж юу вэ?</h3></div></div></div><a id="idp90509264" class="indexterm"></a><a id="idp90510416" class="indexterm"></a><p>DHCP, Dynamic Host Configuration Protocol буюу Динамик Хостын Тохиргооны Протокол нь
систем ямар байдлаар сүлжээнд холбогдох,
тухайн сүлжээнд харилцаанд орохын тулд шаардагдах
мэдээллийг хэрхэн олж авахыг зааж өгдөг. FreeBSD нь
OpenBSD 3.7-с авсан
OpenBSD-н <code class="command">dhclient</code>-г хэрэглэдэг. Энэ бүлэгт гарах
<code class="command">dhclient</code>-р ISC ба OpenBSD DHCP харилцагчийг хоёуланг
нь төлөөлүүлсэн болно. DHCP серверийн хувьд ISC тархацын
серверийг авч үзэх болно.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90512592"></a>30.5.2. Энэ хэсэгт авч үзэх зүйлс</h3></div></div></div><p>Энэ хэсэгт ISC ба OpenBSD DHCP харилцагчийн харилцагч талыг бүтээж байгаа элементүүд,
болон ISC DHCP системийн сервер талыг бүтээж байгаа элементүүдийг хоёуланг нь
авч үзэх болно. Харилцагч талын програм, <code class="command">dhclient</code>, нь
FreeBSD-тэй нэгдмэл байдлаар ирдэг бол, сервер талын хэсэг нь
<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp42-server/pkg-descr">net/isc-dhcp42-server</a> портоос суулгах боломжтой байдлаар ирдэг.
<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcp-options</span>(5)</span></a>, ба <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.conf</span>(5)</span></a> заавар хуудсууд болон доор өгөгдсөн зөвлөмжүүд
нь хэрэг болно.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90516944"></a>30.5.3. Хэрхэн ажилладаг вэ?</h3></div></div></div><a id="idp90517584" class="indexterm"></a><p>Харилцагч машин дээр <code class="command">dhclient</code> DHCP харилцагчийг
ажиллуулахад, тохиргооны мэдээллийг хүссэн хүсэлтийг цацаж эхэлнэ.
Анхдагч байдлаар, эдгээр хүсэлтүүд нь UDP 68-р портоос гарч, серверийн
UDP 67 порт руу илгээгдэнэ. Сервер харилцагчид IP хаяг болон сүлжээний баг,
чиглүүлэгч, DNS серверийн хаяг зэрэг хэрэгтэй мэдээллийг хариу илгээнэ.
Энэ бүх мэдээллийг DHCP <span class="quote">«<span class="quote">түрээслэх</span>»</span> хэлбэрээр өгөх ба зөвхөн тодорхой
хугацааны туршид хүчинтэй байна (DHCP серверийг хариуцагч тохируулж өгсөн байна).
Ийм байдлаар, сүлжээнд холбогдохоо больсон харилцагчийн ашиглагдаагүй
IP хаягуудыг автоматаар буцааж авах боломжтой болно.</p><p>DHCP харилцагч серверээс өргөн мэдээллийг
авч чадна. Бүрэн жагсаалтыг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcp-options</span>(5)</span></a>-с олж үзэж болно.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90520528"></a>30.5.4. FreeBSD-тэй нэгдмэл байдал</h3></div></div></div><p>FreeBSD нь OpenBSD DHCP харилцагч,
        <code class="command">dhclient</code>-г өөртэйгөө бүрэн нэгтгэсэн байдаг.
DHCP сервер ажиллаж байгаа сүлжээнд сүлжээний тохиргоог хийх нарийн
чимхлүүр ажлаас хөнгөвчлөх үүднээс, DHCP харилцагчийг систем суулгагч
болон үндсэн системийн аль алинд хамт оруулж өгсөн байдаг.</p><a id="idp90521936" class="indexterm"></a><p><span class="application">sysinstall</span> нь DHCP-г дэмждэг. <span class="application">sysinstall</span>-р
сүлжээний интерфэйсийг тохируулахад асуудаг хоёр дахь асуулт бол:
<span class="quote">«<span class="quote">Та энэ интерфэйсийг DHCP-р тохируулахыг хүсэж байна уу?</span>»</span>.
Зөвшөөрсөн хариулт өгсөн тохиолдолд <code class="command">dhclient</code>-г ажиллуулах бөгөөд,
хэрэв амжилттай бол сүлжээний тохиргоо автоматаар хийгдэнэ.</p><p>Систем ачаалах үед DHCP ашигладаг болгохын тулд,
хоёр зүйлийг хийх хэрэгтэй:</p><a id="idp90525136" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">bpf</code> төхөөрөмж цөмтэй хамт эмхэтгэгдсэн байх ёстой.
Үүний тулд, <code class="literal">device bpf</code> мөрийг цөмийн
тохиргооны файлд нэмж бичээд цөмийг дахин бүтээх
хэрэгтэй. Цөмийг бүтээх талаар дэлгэрэнгүй мэдээллийг <a class="xref" href="kernelconfig.html" title="Бүлэг 9. FreeBSD цөмийг тохируулах нь">Бүлэг 9, <em>FreeBSD цөмийг тохируулах нь</em></a>
хэсгээс авна уу.</p><p><code class="filename">bpf</code> төхөөрөмж нь FreeBSD-н <code class="filename">GENERAL</code> цөмийн нэг хэсэг
бөгөөд, DHCP-г ажиллуулахын тулд тусгайлан шинээр цөм бүтээх шаардлагагүй.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Аюулгүй байдлын талаар сэтгэл зовнидог хүмүүст зөвлөхөд,
<code class="filename">bpf</code> нь пакет шиншлэгчдийг зөв ажиллах боломжийг олгодог
төхөөрөмж болохыг анхааралдаа авна уу (хэдийгээр тэдгээр програм ажиллахын
тулд <code class="systemitem">root</code> эрх хэрэгтэй боловч). DHCP-г ашиглахын тулд
<code class="filename">bpf</code> <span class="emphasis"><em>заавал</em></span> хэрэгтэй, гэвч хэрэв та аюулгүй байдлыг
маш ихээр анхааралдаа авдаг бол, зөвхөн хэзээ нэгэн цагт DHCP-г
ашиглахын тулд <code class="filename">bpf</code>-г цөмд нэмэх хэрэггүй.</p></div></li><li class="listitem"><p>Анхдагчаар FreeBSD-н DHCP тохиргоо ар талд
	      буюу асинхрон (<em class="firstterm">asynchronously</em>) горимд
	      хийгддэг. DHCP дуустал бусад скриптүүд ажилладаг
	      бөгөөд ингэснээр системийн эхлүүлэлтийг хурдасгадаг.</p><p>Ард ажиллах DHCP нь DHCP сервер хүсэлтүүдэд хурдан
	      хариу өгч DHCP тохиргооны процесс түргэн хийгдэх үед
	      сайн ажилладаг. Гэхдээ DHCP зарим системүүд дээр
	      хийгдэж дуустлаа удаан ажиллаж болно. DHCP дуусахаас
	      өмнө сүлжээний үйлчилгээнүүд ажиллахаар оролдвол
	      амжилтгүй болно. DHCP-г синхрон (<em class="firstterm">synchronous</em>) горимд
	      ашиглах нь DHCP тохиргоог дуустал эхлүүлэлтийг түр зогсоож
	      асуудал гарахаас сэргийлдэг.</p><p>Бусад эхлүүлэлтүүд үргэлжилж байх үед
	      ар талд DHCP сервер рүү холбогдохын тулд (асинхрон горим)
	      <code class="filename">/etc/rc.conf</code> файлд
	      <span class="quote">«<span class="quote"><code class="literal">DHCP</code></span>»</span> гэсэн утгыг
	      ашиглана:</p><pre class="programlisting">ifconfig_<em class="replaceable"><code>fxp0</code></em>="DHCP"</pre><p>DHCP дуустал эхлэлийг түр зогсоохын тулд
	      синхрон горимыг <span class="quote">«<span class="quote"><code class="literal">SYNCDHCP</code></span>»</span>
		утгатайгаар хэрэглэнэ:</p><pre class="programlisting">ifconfig_<em class="replaceable"><code>fxp0</code></em>="SYNCDHCP"</pre><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="xref" href="config-network-setup.html" title="12.8. Сүлжээний интерфэйс картууд суулгах нь">Хэсэг 12.8, «Сүлжээний интерфэйс картууд суулгах нь»</a>-д тайлбарласан ёсоор,
эдгээр жишээн дээр байгаа <code class="literal">fxp0</code>-г динамикаар тохируулах гэж байгаа
интерфэйсийн нэрээр сольж бичнэ.</p></div><p>Хэрэв таны <code class="command">dhclient</code> өөр газар байгаа бол, эсвэл
хэрэв та <code class="command">dhclient</code>-г нэмэлт тугуудын хамт ажиллуулах хүсэлтэй бол,
дараах мөрүүдийг нэмж бичнэ үү (шаардлагатай бол засаж бичнэ үү):</p><pre class="programlisting">dhclient_program="/sbin/dhclient"
dhclient_flags=""</pre></li></ul></div><a id="idp90549328" class="indexterm"></a><p>DHCP сервер <span class="application">dhcpd</span> нь портуудын цуглуулгад байгаа
<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp42-server/pkg-descr">net/isc-dhcp42-server</a> портын нэг хэсэг байдлаар ирдэг. Энэ порт нь
ISC DHCP сервер болон түүний баримтуудыг агуулсан байдаг.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90551888"></a>30.5.5. Файлууд</h3></div></div></div><a id="idp90552528" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/etc/dhclient.conf</code></p><p><code class="command">dhclient</code> нь <code class="filename">/etc/dhclient.conf</code> гэсэн тохиргооны
файлыг шаарддаг. Ихэвчлэн энэ файл зөвхөн тайлбаруудаас бүрдэх ба
анхдагч утгууд нь харьцангуй өөрчлөх шаардлагагүйгээр өгөгдсөн байдаг.
Энэ тохиргооны файлыг <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.conf</span>(5)</span></a> заавар хуудсанд тайлбарласан байгаа.</p></li><li class="listitem"><p><code class="filename">/sbin/dhclient</code></p><p><code class="command">dhclient</code> нь статикаар холбогдсон байх ба
<code class="filename">/sbin</code> дотор байрлана. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a> хуудаснаас
<code class="command">dhclient</code>-н талаар дэлгэрэнгүй мэдээллийг авна уу.</p></li><li class="listitem"><p><code class="filename">/sbin/dhclient-script</code></p><p><code class="command">dhclient-script</code> нь зөвхөн FreeBSD-д байдаг, DHCP харилцагчийг
тохируулах зориулалттай тусгай скрипт юм. Энэ скриптийг
<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient-script&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient-script</span>(8)</span></a> заавар хуудсанд тайлбарласан байх ба, ажиллуулахын
тулд хэрэглэгч ямар нэг засвар хийх шаардлагагүй.</p></li><li class="listitem"><p><code class="filename">/var/db/dhclient.leases.interface</code></p><p>DHCP харилцагч нь түрээсэлж авсан хаягуудаа агуулсан өгөгдлийн
санг энэ файлд хадгалах бөгөөд бүртгэл маягаар бичдэг. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.leases&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.leases</span>(5)</span></a> хэсэгт
илүү дэлгэрэнгүй тайлбар бий.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90568272"></a>30.5.6. Гүнзгийрүүлэн унших</h3></div></div></div><p>DHCP протокол нь бүрэн хэмжээгээр <a class="link" href="http://www.freesoft.org/CIE/RFC/2131/" target="_top">RFC 2131</a>-д
тодорхойлогдсон байдаг. Нэмэлт эх үүсвэрүүд <code class="uri"><a class="uri" href="http://www.dhcp.org/" target="_top">http://www.dhcp.org/</a></code>-д мөн бий.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-dhcp-server"></a>30.5.7. DHCP Серверийг Суулгах болон Тохируулах</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90571344"></a>30.5.7.1. Энэ хэсэгт авч үзэх зүйлс</h4></div></div></div><p>Энэ хэсэгт ISC (Internet Systems Consortium) DHCP серверийг
ашиглан FreeBSD системийг хэрхэн DHCP сервер байдлаар ажиллуулах
талаар авч үзэх болно.</p><p>Сервер нь FreeBSD-н нэг хэсэг байдлаар ирдэггүй бөгөөд
ийм үйлчилгээ үзүүлэхийн тулд <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp42-server/pkg-descr">net/isc-dhcp42-server</a> портыг
суулгах хэрэгтэй болдог. Портуудын цуглуулгын хэрхэн ашиглах талаар
<a class="xref" href="ports.html" title="Бүлэг 5. Програм суулгах: Багцууд болон портууд">Бүлэг 5, <em>Програм суулгах: Багцууд болон портууд</em></a> хэсгээс дэлгэрэнгүй мэдээллийг авна уу.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90573648"></a>30.5.7.2. DHCP Серверийг суулгах нь</h4></div></div></div><a id="idp90574288" class="indexterm"></a><p>FreeBSD системийг DHCP сервер байдлаар тохируулахын тулд,
<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bpf&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bpf</span>(4)</span></a> төхөөрөмж цөмд эмхэтгэгдсэн байх ёстой. Үүний тулд,
цөмийн тохиргооны файл дотор <code class="literal">bpf төхөөрөмж</code>ийг нэмээд цөмийг дахин
бүтээх хэрэгтэй. Цөмийг бүтээх талаар дэлгэрэнгүй мэдээллийг
<a class="xref" href="kernelconfig.html" title="Бүлэг 9. FreeBSD цөмийг тохируулах нь">Бүлэг 9, <em>FreeBSD цөмийг тохируулах нь</em></a> хэсгээс үзнэ үү.</p><p><code class="filename">bpf</code> төхөөрөмж нь FreeBSD-н <code class="filename">GENERAL</code> цөмийн нэг хэсэг бөгөөд,
DHCP-г ажиллуулахын тулд
тусгайлан шинээр цөм бүтээх шаардлагагүй.</p><div xmlns="" class="note"><h3 class="admontitle">Тэмдэглэл: </h3><p xmlns="http://www.w3.org/1999/xhtml">Аюулгүй байдлын талаар сэтгэл зовнидог хүмүүст зөвлөхөд,
<code class="filename">bpf</code> нь пакет шиншлэгчдийг зөв ажиллах боломжийг олгодог
төхөөрөмж болохыг анхааралдаа авна уу (хэдийгээр тэдгээр програм ажиллахын
тулд <code class="systemitem">root</code> эрх хэрэгтэй боловч). DHCP-г ашиглахын тулд
<code class="filename">bpf</code> <span class="emphasis"><em>заавал</em></span> хэрэгтэй, гэвч хэрэв та аюулгүй байдлыг
маш ихээр анхааралдаа авдаг бол, зөвхөн хэзээ нэгэн цагт DHCP-г
ашиглахын тулд <code class="filename">bpf</code>-г цөмд нэмэх хэрэггүй.</p></div><p>Үүний дараа <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp42-server/pkg-descr">net/isc-dhcp42-server</a>
порттой хамт ирсэн жишээ <code class="filename">dhcpd.conf</code> файлыг засах хэрэгтэй.
Анхдагч байдлаар, <code class="filename">/usr/local/etc/dhcpd.conf.sample</code> гэсэн файл байх ба
өөрчлөлт хийхийнхээ өмнө энэ файлыг <code class="filename">/usr/local/etc/dhcpd.conf</code>
нэртэйгээр хуулж тавих хэрэгтэй.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90587728"></a>30.5.7.3. DHCP Серверийг тохируулах</h4></div></div></div><a id="idp90588368" class="indexterm"></a><p><code class="filename">dhcpd.conf</code> нь
дэд сүлжээ болон хостуудтай холбоотой өгөгдөл зарлалтаас
бүрдэх ба жишээн дээр тайлбарлавал илүү амархан байх болов уу:</p><pre class="programlisting">option domain-name "example.com";<a id="domain-name"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
option domain-name-servers 192.168.4.100;<a id="domain-name-servers"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
option subnet-mask 255.255.255.0;<a id="subnet-mask"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>

default-lease-time 3600;<a id="default-lease-time"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
max-lease-time 86400;<a id="max-lease-time"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span>
ddns-update-style none;<a id="ddns-update-style"></a><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span>

subnet 192.168.4.0 netmask 255.255.255.0 {
  range 192.168.4.129 192.168.4.254;<a id="range"></a><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span>
  option routers 192.168.4.1;<a id="routers"></a><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span>
}

host mailhost {
  hardware ethernet 02:03:04:05:06:07;<a id="hardware"></a><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span>
  fixed-address mailhost.example.com;<a id="fixed-address"></a><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span>
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#domain-name"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Энэ тохируулга нь анхдагч хайлтын домэйн байдлаар
харилцагчид өгөх домэйныг заана. Энэ талаар дэлгэрэнгүй мэдээллийг
<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=resolv.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">resolv.conf</span>(5)</span></a> хэсгээс үзнэ үү.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#domain-name-servers"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Энэ тохируулга нь харилцагчийн хэрэглэх ёстой
DNS серверүүдийг таслалаар холбосон жагсаалт байна.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#subnet-mask"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Хэрэглэгчид өгөх сүлжээний багийг заана.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#default-lease-time"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Түрээслэлт (lease) хүчинтэй байх тийм тусгай хугацааг
		харилцагч хүсэж болох юм. Хэрэв харилцагч хүсээгүй бол сервер энд заасан дуусах
		хугацаагаар (секундээр) түрээс хийх болно.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#max-lease-time"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Серверийн түрээслүүлэх хамгийн дээд хугацааг заана.
Харилцагч үүнээс урт хугацаагаар түрээслэх хүсэлт тавибал
хүсэлтийг хүлээж авах боловч зөвхөн <code class="literal">max-lease-time</code> секундын туршид
хүчинтэй байна.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#ddns-update-style"><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Түрээслэх болон эргүүлж авахад DHCP сервер
DNS-г шинэчлэхийг оролдох шаардлагатай эсэхийг зааж өгнө.
ISC шийдлийн хувьд, энэ тохируулга <span class="emphasis"><em>заавал</em></span> байх ёстой.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#range"><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Харилцагчид оноох IP хаягуудын хүрээг заана. Энэ хүрээнд багтах
IP хаягуудыг харилцагчид өгөх болно.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#routers"><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Харилцагчид өгөх анхдагч гарцыг заана.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#hardware"><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Хостын MAC хаягийг заана (ингэснээр DHCP сервер тухайн хостыг
хүсэлт тавихад таньж чадна).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#fixed-address"><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Хостод тогтмол IP хаяг оноохыг заана.
Энд хостын нэрийг хэрэглэж болохыг тэмдэглэх хэрэгтэй.
DHCP сервер IP хаяг түрээслүүлэх
хариуг өгөхөөс өмнө хост нэрийг тайлах болно.</p></td></tr></table></div><p><code class="filename">dhcpd.conf</code> файлыг бичиж дууссаны дараа,
<code class="filename">/etc/rc.conf</code> файл дотор DHCP серверийг идэвхжүүлэх хэрэгтэй,
өөрөөр хэлбэл доорх мөрүүдийг нэмж бичих хэрэгтэй:</p><pre class="programlisting">dhcpd_enable="YES"
dhcpd_ifaces="dc0"</pre><p><code class="literal">dc0</code>-г өөрийн тань DHCP сервер DHCP харилцагчдын хүсэлтийг
хүлээж авах ёстой интерфэйсийн нэрээр (эсвэл интерфэйсүүдийг зайгаар
тусгаарлан) сольж бичих хэрэгтэй.</p><p>Дараа нь, доорх тушаалыг өгөн серверийг ажиллуулах хэрэгтэй:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service isc-dhcpd start</code></strong></pre><p>Серверийнхээ тохиргооны файлд өөрчлөлт оруулах бүрдээ,
<code class="literal">SIGHUP</code> дохиог <span class="application">dhcpd</span>-д өгөх нь бусад дэмонуудын
хувьд тохиргоог дахин дууддаг шиг биш харин тохиргоог дахин
ачаалах<span class="emphasis"><em>гүй</em></span> болохыг анхаарах хэрэгтэй.  Процессийг зогсоохын
тулд <code class="literal">SIGTERM</code> дохиог өгөх хэрэгтэй ба дээрх тушаалыг өгөн дахин эхлүүлэх хэрэгтэй.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90619216"></a>30.5.7.4. Файлууд</h4></div></div></div><a id="idp90619856" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/usr/local/sbin/dhcpd</code></p><p><span class="application">dhcpd</span> нь статикаар холбогдсон байх ба
<code class="filename">/usr/local/sbin</code> дотор байрлана. Порттой хамт суусан
<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhcpd</span>(8)</span></a> заавар хуудаснаас <span class="application">dhcpd</span>-н талаар дэлгэрэнгүй мэдээллийг
авна уу.</p></li><li class="listitem"><p><code class="filename">/usr/local/etc/dhcpd.conf</code></p><p><span class="application">dhcpd</span> нь <code class="filename">/usr/local/etc/dhcpd.conf</code> гэсэн тохиргооны
файлыг шаарддаг. Энэ файл дотор харилцагчид өгөх бүх мэдээллээс гадна
серверийн өөрийн үйл ажиллагаатай холбоотой мэдээлэл байх ёстой. Энэ
тохиргооны файлыг портоос суусан <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcpd.conf</span>(5)</span></a> заавар хуудсанд тайлбарласан байгаа.</p></li><li class="listitem"><p><code class="filename">/var/db/dhcpd.leases</code></p><p>DHCP сервер нь түрээслүүлсэн хаягуудаа агуулсан
өгөгдлийн санг энэ файлд хадгалах бөгөөд бүртгэл маягаар бичдэг.
Портоос суусан <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd.leases&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcpd.leases</span>(5)</span></a> заавар хуудсанд илүү дэлгэрэнгүй
тайлбар бий.</p></li><li class="listitem"><p><code class="filename">/usr/local/sbin/dhcrelay</code></p><p><span class="application">dhcrelay</span>-г нэг DHCP сервер
харилцагчаас хүлээн авсан хүсэлтийг өөр сүлжээнд байгаа
нөгөө DHCP сервер рүү дамжуулдаг, нарийн бүтэцтэй орчинд хэрэглэнэ.
Хэрэв энэ функцыг ашиглах шаардлагатай бол,
<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp42-relay/pkg-descr">net/isc-dhcp42-relay</a> портыг суулгаарай.
Порттой хамт ирэх <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcrelay&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhcrelay</span>(8)</span></a> заавар хуудаснаас дэлгэрэнгүй
мэдээллийг авна уу.</p></li></ul></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-nis.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="network-dns.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">30.4. Сүлжээний Мэдээллийн Систем (NIS/YP) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> 30.6. Домэйн Нэрийн Систем (<acronym class="acronym">DNS</acronym>)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>