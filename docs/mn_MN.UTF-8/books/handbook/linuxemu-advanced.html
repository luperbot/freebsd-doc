<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>11.7. Нэмэлт сэдвүүд</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD гарын авлага" /><link rel="up" href="linuxemu.html" title="Бүлэг 11. Линуксийн Хоёртын Нийлэмж" /><link rel="prev" href="linuxemu-oracle.html" title="11.6. Oracle® суулгах нь" /><link rel="next" href="system-administration.html" title="хэсэг III. Системийн Удирдлага" /><link rel="copyright" href="legalnotice.html" title="Хуулийн заалт" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.7. Нэмэлт сэдвүүд</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="linuxemu-oracle.html">Өмнөх</a> </td><th width="60%" align="center">Бүлэг 11. Линуксийн Хоёртын Нийлэмж</th><td width="20%" align="right"> <a accesskey="n" href="system-administration.html">Дараах</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-advanced"></a>11.7. Нэмэлт сэдвүүд</h2></div></div></div><p>Хэрэв та Линуксийн хоёртын нийлэмж хэрхэн ажилладгийг мэдэхийг хүсэж байгаа
	бол энэ хэсэг нь таны уншихыг хүсэж байгаа хэсэг юм. Доор бичигдсэн зүйлийн ихэнх нь
	Тэрри Лэмбэрт <code class="email">&lt;<a xmlns="" class="email" href="mailto:tlambert@primenet.com">tlambert@primenet.com</a>&gt;</code>-ийн
	<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-chat" target="_top">FreeBSD chat захидлын жагсаалт</a> руу бичсэн цахим захидал (Message ID:
      <code class="literal">&lt;199906020108.SAA07001@usr09.primenet.com&gt;</code>)
	дээр тулгуурласан байгаа.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76646352"></a>11.7.1. Хэрхэн ажилладаг вэ?</h3></div></div></div><a id="idp76646992" class="indexterm"></a><p>FreeBSD нь <span class="quote">«<span class="quote">execution class
	loader</span>»</span> буюу ажиллуулах ангилал дуудагч гэгддэг хийсвэрлэлттэй байдаг.
	Энэ нь <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=execve&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">execve</span>(2)</span></a> системийн дуудлага уруу хийгдэх шаантаг юм.</p><p>Юу болдог вэ гэхээр FreeBSD нь ямар нэгэн бүрхүүлийн тайлбарлагчид эсвэл
	бүрхүүлийн скриптүүдийг ажиллуулахын тулд <code class="literal">#!</code> дуудагч
	уруу ордог нэг дуудагчийн оронд дуудагчдын жагсаалттай байдаг.</p><p>Уламжлалаар бол <span class="trademark">UNIX</span>® тавцангийн дуудагч нь хоёртын файлыг системд
	мэдэгдэж байгаа эсэхийг мэдэхийн тулд шидэт тоог
	(ерөнхийдөө файлын эхний 4 эсвэл 8 байт) шалгадаг бөгөөд
	хэрэв мэдэгдэж байвал хоёртын дуудагчийг ажиллуулдаг ганц дуудагч юм.</p><p>Хэрэв энэ нь системд зориулагдсан хоёртын төрөл биш бол <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=execve&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">execve</span>(2)</span></a>
	дуудлага амжилгүй болон буцаж бүрхүүл үүнийг бүрхүүлийн тушаалууд маягаар
	ажиллуулж эхлэхийг оролддог.</p><p><span class="quote">«<span class="quote">Тухайн үеийн бүрхүүл ямар байгаа</span>»</span> түүнийг анхдагч гэж
	таамагладаг.</p><p>Дараа нь эхний хоёр тэмдэгтүүдийг шалгах засварыг (hack) <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sh</span>(1)</span></a>-д
	зориулж хийсэн бөгөөд хэрэв тэдгээр нь <code class="literal">:\n</code> бол энэ нь
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csh</span>(1)</span></a> бүрхүүлийг ажиллуулдаг (энэ засварыг SCO анхлан хийсэн гэж
	бид итгэдэг).</p><p>Төгсгөлийн дараах дараагийн хоосон зайны дараа байдаг тэмдэгтүүдийн дараа
	<code class="filename">/bin/sh</code> уруу буцдаг тэмдэгтүүд байдаг болохоор
	одоо FreeBSD юу хийдэг вэ гэхээр дуудагчдын жагсаалтаар тайлбарлагчдын талаар
	мэддэг ерөнхий <code class="literal">#!</code> дуудагчтай явдаг.</p><a id="idp76660304" class="indexterm"></a><p>Линуксийн ABI дэмжлэгийн хувьд FreeBSD нь шидэт тоог ELF хоёртын файл
	гэж хардаг (одоогоор энэ нь FreeBSD, <span class="trademark">Solaris</span>™, Линукс болон ELF дүрсний төрөл бүхий
	бусад OS-ийг хооронд нь ялгадаггүй).</p><a id="idp76661584" class="indexterm"></a><p>ELF дуудагч нь тусгай <span class="emphasis"><em>тамга</em></span> хайдаг бөгөөд
	энэ нь ELF дүрс дэх тайлбар хэсэг юм. Энэ нь SVR4/<span class="trademark">Solaris</span>™ ELF хоёртын
	файлуудад байдаггүй.</p><p>Линукс хоёртын файлууд нь ажиллахын тулд тэдгээр нь
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a>-ээр <code class="literal">Линукс</code> гэж <span class="emphasis"><em>тамгалагдах</em></span>
	ёстой байдаг:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>brandelf -t Linux file</code></strong></pre><p>Үүнийг хийсний дараа ELF дуудагч нь файлд
	<code class="literal">Линукс</code> тамгыг харах болно.</p><a id="idp76667088" class="indexterm"></a><p>ELF дуудагч <code class="literal">Линукс</code> тамгыг харах үед дуудагч
	<code class="literal">proc</code> бүтэц дэх заагчийг сольдог. Энэ заагчаар
	бүх системийн дуудлагууд индекслэгддэг (уламжлалт <span class="trademark">UNIX</span>® систем дээр
	энэ нь системийн дуудлагуудыг агуулах <code class="literal">sysent[]</code>
	бүтцийн массив байх юм). Үүнээс гадна процесс нь дохионы трамплиний
	кодонд зориулсан занга векторыг тусгайлан зохицуулахад болон Линуксийн
	цөмийн модулиар зохицуулагддаг бусад хэд хэдэн (жижиг) засваруудад
	зориулагдаж тэмдэглэгддэг.</p><p>Линукс системийн дуудлагын вектор нь бусад зүйлүүдээс гадна
	цөмийн модульд хаягууд нь байдаг <code class="literal">sysent[]</code> оруулгуудын
	жагсаалтыг агуулдаг.</p><p>Системийн дуудлага Линуксийн хоёртын файлаар дуудагдахад занга код
	системийн дуудлагын функц заагчийн хаягийг <code class="literal">proc</code> бүтцээс
	авч FreeBSD-ийн биш Линуксийн системийн дуудлагын оруулгын цэгүүдийг
	авдаг.</p><p>Мөн Линукс горим нь хайлтыг динамикаар <span class="emphasis"><em>дахин эхлүүлдэг</em></span>;
	энэ нь файлын системийн холболтууд дахь <code class="option">union</code> тохируулга
	(<code class="literal">unionfs</code> файлын системийн төрөл <span class="emphasis"><em>биш</em></span>!)
	хийдэг тэр зүйл юм. Эхлээд <code class="filename">/compat/linux/original-path</code>
	сан дахь файлыг хайх бөгөөд <span class="emphasis"><em>дараа нь</em></span> хэрэв энэ нь
	амжилтгүй болвол хайлт
	<code class="filename">/original-path</code>
	санд хийгддэг. Энэ нь бусад хоёртын файлуудыг шаарддаг хоёртын файлуудыг
	ажиллаж чадахаар (өөрөөр хэлбэл Линуксийн хэрэгслийн цуглуулга
	бүгдээрээ Линуксийн ABI дэмжлэгийн доор ажиллаж чаддаг байхаар) болгодог.
	Линуксийн хоёртын файлууд нь тохирох Линуксийн хоёртын файлууд байхгүй бол
	FreeBSD-ийн хоёртын файлуудыг дуудаж ажиллуулж бас чадна гэсэн үг бөгөөд
	Линуксийн хоёртын файлуудыг Линукс дээр ажиллахгүй байгааг нь хэлж чадахааргүй
	болгохын тулд та <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uname&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">uname</span>(1)</span></a> тушаалыг <code class="filename">/compat/linux</code>
	санд байрлуулж болно гэсэн үг юм.</p><p>Үндсэндээ Линуксийн цөм FreeBSD цөмд байдаг; цөмийн үзүүлдэг
	бүх үйлчилгээнүүдийг хийдэг, доор нь орших төрөл бүрийн функцууд нь
	FreeBSD-ийн системийн дуудлагын хүснэгтийн оруулгууд болон
	Линуксийн системийн дуудлагын хүснэгтийн оруулгуудтай ижил байдаг:
	файлын системийн үйлдлүүд, виртуал санах ойн үйлдлүүд, дохио
	хүргэлт, System V IPC, гэх мэт… Цорын ганц ялгаа нь
	FreeBSD-ийн хоёртын файлууд FreeBSD-ийн <span class="emphasis"><em>цавуу</em></span>
	функцуудыг, Линуксийн хоёртын файлууд Линуксийн <span class="emphasis"><em>цавуу</em></span>
	функцуудыг авдаг явдал юм (ихэнх хуучин OS-үүд зөвхөн өөрсдийн <span class="emphasis"><em>цавуу</em></span>
	функцуудтай байсан: дуудлага хийж байгаа процессийн <code class="literal">proc</code> бүтэц дэх
	динамикаар эхлүүлэгдсэн заагчаар хийгдсэн функцуудын хаягуудын оронд
	статик глобал <code class="literal">sysent[]</code> бүтцийн
	массив дахь функцуудын хаягуудтай байсан).</p><p>Аль нь эх FreeBSD ABI вэ? Энэ нь хамаагүй юм.
	Үндсэндээ цорын ганц ялгаа нь (зөвхөн одоогоор; эдгээр нь ирээдүйн хувилбаруудад
	амархан өөрчлөгдөж болох бөгөөд магадгүй үүний дараагаар хийгдэх байх)
	FreeBSD-ийн <span class="emphasis"><em>цавуу</em></span> функцууд нь
	цөмд статикаар холбогдсон байдаг бөгөөд Линуксийн
	<span class="emphasis"><em>цавуу</em></span> функцууд нь статикаар холбогдож эсвэл
	тэдгээрт цөмийн модулийн тусламжтайгаар хандаж болдог явдал юм.</p><p>Тиймээ, гэхдээ энэ нь жинхэнэ эмуляц мөн үү? Үгүй ээ. Энэ нь ABI шийдэл
	болохоос эмуляц биш юм. Ямар ч эмулятор (эсвэл дүр үзүүлэгч (simulator)
	(дараагийн асуултыг асуулгахгүйн тулд)) оролцоогүй.</p><p>Тэгэхээр яагаад энэ нь заримдаа <span class="quote">«<span class="quote">Линукс эмуляц</span>»</span> гэгддэг
	юм бэ? FreeBSD-г худалдахад хэцүү болгохын тулд! Тиймээ,
	юу болж байгааг тайлбарлаж байгаагаас өөр зүйлгүй байх тэр үед уламжлалт
	шийдэл хийгдсэн болохоор тэр юм; хэрэв та кодыг эмхэтгээгүй эсвэл модулийг дуудаагүй бол
	Линуксийн хоёртын файлуудыг FreeBSD ажиллуулдаг гэж хэлэх нь
	үнэн биш бөгөөд юу дуудагдсаныг тайлбарлах үг хэрэгтэй байсан болохоор
	—<span class="quote">«<span class="quote">Линукс эмулятор</span>»</span> гэсэн үг гарсан юм.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="linuxemu-oracle.html">Өмнөх</a> </td><td width="20%" align="center"><a accesskey="u" href="linuxemu.html">Дээш</a></td><td width="40%" align="right"> <a accesskey="n" href="system-administration.html">Дараах</a></td></tr><tr><td width="40%" align="left" valign="top">11.6. <span class="trademark">Oracle</span>® суулгах нь </td><td width="20%" align="center"><a accesskey="h" href="index.html">Эхлэл</a></td><td width="40%" align="right" valign="top"> хэсэг III. Системийн Удирдлага</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Энэ болон бусад баримтуудыг
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    хаягаас татаж авч болно.</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD-ийн талаар
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;
    хаягтай холбоо барихаасаа өмнө
    <a href="http://www.FreeBSD.org/docs.html">баримтыг</a> уншина уу.<br></br>
    Энэ бичиг баримттай холбоотой асуулт байвал
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;
    хаягаар цахим захидал явуулна уу.<br></br>
    Энэ бичиг баримтын орчуулгатай холбоотой асуулт байвал
    &lt;<a href="mailto:admin@mnbsd.org">admin@mnbsd.org</a>&gt;
    хаягаар цахим захидал явуулна уу.</small></p></body></html>