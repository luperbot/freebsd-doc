<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>2.6. ディスク領域の割り当て</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD ハンドブック" /><link rel="up" href="bsdinstall.html" title="第2章 FreeBSD のインストール (9.X 以降の場合)" /><link rel="prev" href="using-bsdinstall.html" title="2.5. bsdinstall の使用" /><link rel="next" href="bsdinstall-final-warning.html" title="2.7. インストール操作の確定" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.6. ディスク領域の割り当て</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-bsdinstall.html">戻る</a>〓</td><th width="60%" align="center">第2章 FreeBSD のインストール (9.<em class="replaceable"><code>X</code></em> 以降の場合)</th><td width="20%" align="right">〓<a accesskey="n" href="bsdinstall-final-warning.html">次へ</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-partitioning"></a>2.6. ディスク領域の割り当て</h2></div></div></div><p>次のメニューでは、ディスク領域を割り当てる方法を選択します。
      メニューで選択できるオプションは、インストールする FreeBSD
      のバージョンに依存します。</p><div class="figure"><a id="bsdinstall-part-guided-manual"></a><div class="figure-title">図2.11 FreeBSD 9.x におけるパーティションの分割の選択肢</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-guided-manual.png" alt="FreeBSD 9.x におけるパーティションの分割の選択肢" /></div></div></div><br class="figure-break" /><div class="figure"><a id="bsdinstall-zfs-partmenu"></a><div class="figure-title">図2.12 FreeBSD 10.x 以降でのパーティション分割の選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-partmenu.png" alt="FreeBSD 10.x 以降でのパーティション分割の選択" /></div></div></div><br class="figure-break" /><p><span class="emphasis"><em>Guided</em></span> によるパーティションの分割方法では、
      ディスクパーティションを自動的に設定します。
      <span class="emphasis"><em>Manual</em></span> によるパーティションの分割方法は、
      高度な知識を持つユーザ向けで、
      メニューオプションからカスタマイズしたパーティションを作成できます。
      <code class="literal">Shell</code> は、シェルプロンプトを起動し、
      高度な知識を持つユーザが、
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gpart&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gpart</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
      のようなコマンドラインのプログラムを実行して、
      カスタマイズしたパーティションを作成できます。
      FreeBSD 10 以降で利用可能な <acronym class="acronym">ZFS</acronym> オプションは、
      <em class="firstterm">ブート環境に対応した</em>
      root-on-ZFS システムを構築します。
      暗号化された root-on-ZFS システムを構築することもできます。</p><p>この章では、
      ディスクパーティションをレイアウトする際の検討事項を説明します。
      その後、各パーティションの作成方法について説明します。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="configtuning-initial"></a>2.6.1. パーティションレイアウトのデザイン</h3></div></div></div><a id="idp80243024" class="indexterm"></a><a id="idp80243536" class="indexterm"></a><a id="idp80244432" class="indexterm"></a><a id="idp80245456" class="indexterm"></a><p>ファイルシステムのレイアウトを行う際には、
	  ハードディスクの外周部は内周部よりもデータ転送が速いということを思い出してください。
	  これに従えば、
	  小さくて激しくアクセスされるファイルシステムを外周付近に、
	  <code class="filename">/usr</code>
	  のようなより大きなパーティションはディスクの内側に配置すべきでしょう。
	  そのため、パーティションを作成する際には、<code class="filename">/</code>、
	  スワップ、<code class="filename">/var</code>, <code class="filename">/usr</code>
	  のような順で作ってゆくのがよいでしょう。</p><p><code class="filename">/var</code> パーティションのサイズは、
	  あなたが計算機をどのように使おうとしているかを反映します。
	  このパーティションには主としてメールボックスやログファイル、
	  プリンタスプールが置かれます。
	  メールボックスとログファイルは、
	  システムのユーザ数やログの保持期間に依存して予期し得ぬサイズにまで成長する可能性があります。
	  概して、ほとんどのユーザは、<code class="filename">/var</code>
	  にギガバイト以上の空き容量を必要とはしないでしょう。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">時には、たくさんのディスク容量が
	  <code class="filename">/var/tmp</code> に必要になるときがあります。
	  新しいソフトウェアをインストールする際、
	  package のツールは、package の一時的なコピーを
	  <code class="filename">/var/tmp</code> 以下に展開します。
	  <code class="filename">/var/tmp</code>
	  以下に十分なディスク容量が用意されていないと、
	  <span class="application">Firefox</span>,
	  <span class="application">OpenOffice</span> や
	  <span class="application">LibreOffice</span> のような、
	  大きなソフトウェア package のインストールが、
	  困難になることがあります。</p></div><p><code class="filename">/usr</code> パーティションには、
	FreeBSD Ports Collection およびシステムのソースコードを含む、
	システムをサポートするのに必要な多くのファイル群が置かれます。
	このパーティションには、少なくとも 2 ギガバイトを用意することをおすすめします。</p><p>パーティションのサイズを考える時、
	必要量を念頭に置いてください。
	別のパーティションには潤沢にスペースが余っているのに、
	あるパーティションでスペースが足らないままというのは、
	フラストレーションがたまるものです。</p><a id="idp80286288" class="indexterm"></a><a id="idp80287056" class="indexterm"></a><p>経験からスワップパーティションのサイズは物理メモリ
	(<acronym class="acronym">RAM</acronym>) の 2 倍というのが一般的です。
	<acronym class="acronym">RAM</acronym> の少ないシステムでは、
	もっとスワップを増した方が性能がよくなります。
	スワップが少なすぎる設定は、
	あなたが後にメモリを増設したときに問題を起すばかりではなく、
	VM ページスキャニングコードの能率を落します。</p><p>複数の <acronym class="acronym">SCSI</acronym>
	ディスクや異なるコントローラで操作される複数の
	<acronym class="acronym">IDE</acronym> ディスクを持つ大規模なシステムでは、
	それぞれのドライブ (4 台まで) にスワップを設定することを推奨します。
	各ドライブのスワップパーティションはほぼ同一サイズであるべきです。
	カーネルは任意のサイズを扱うことができますが、
	内部のデータ構造は最大のスワップパーティションの 4 倍に調節されます。
	スワップパーティションをほぼ同一のサイズにしておくことで、
	カーネルはスワップスペースを最適なかたちでディスクをまたいでストライプさせることができます。
	あなたが通常スワップをたくさん使わないとしても、
	多くのスワップサイズを用意しておくと良いでしょう。
	プログラムが暴走しても再起動させられる前に回復することが容易になります。</p><p>システムを適切にパーティション化することで、
	  小さいが書き込みの激しいパーティションによって引き起こされるフラグメント化を、
	  読み出し専門のパーティションにまで波及させずにすみます。
	  また、書き込みの激しいパーティションをディスクの周辺部に配置することで、
	  <acronym class="acronym">I/O</acronym> パフォーマンスを増大させることができます。
	  大きなパーティション内の <acronym class="acronym">I/O</acronym>
	  パフォーマンスもまた必要とされているでしょうが、
	  ディスク周辺部へ移動させたとしても、
	  <code class="filename">/var</code>
	  を周辺部に移動させることによって大きな効果が得られたのとは対照的に、
	  意味のあるパフォーマンスの増加は見込めないでしょう。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-part-guided"></a>2.6.2. Guided によるパーティションの分割</h3></div></div></div><p>この方法を選択すると、
	メニューには利用可能なディスクが表示されます。
	複数のディスクが接続されている場合には、
	FreeBSD をインストールするディスクを選択してください。</p><div class="figure"><a id="bsdinstall-part-guided-disk"></a><div class="figure-title">図2.13 複数のディスクから選択する</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-guided-disk.png" alt="複数のディスクから選択する" /></div></div></div><br class="figure-break" /><p>ディスクを選択したら、次のメニューでは、
	ディスクのすべてにインストールを行うか、
	または空き容量にパーティションを作成してインストールを行うかを設定します。
	<span class="guibutton">[ Entire Disk ]</span> を選択すると、
	一般的なパーティションレイアウトが自動的に作成されます。
	<span class="guibutton">[ Partition ]</span> を選択すると、
	ディスクの使用していない領域にパーティションレイアウトを作成します。</p><div class="figure"><a id="bsdinstall-part-entire-part"></a><div class="figure-title">図2.14 Entire Disk または Partition の選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-entire-part.png" alt="Entire Disk または Partition の選択" /></div></div></div><br class="figure-break" /><p>パーティションのレイアウトを作成したら、
	インストールの条件を満たしているかどうかを深く確認してください。
	<span class="guibutton">[ Revert ]</span> を選択すると、
	パーティションをオリジナルの値にリセットします。
	また、<span class="guibutton">[ Auto ]</span> を選択すると、
	FreeBSD パーティションを自動的に作成します。
	パーティションを手動で作成、変更、削除することもできます。
	正しくパーティションを作成出来たら、
	<span class="guibutton">[ Finish ]</span> を選択し、
	インストールを進めてください。</p><div class="figure"><a id="bsdinstall-part-review"></a><div class="figure-title">図2.15 作成されたパーティションの確認</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-review.png" alt="作成されたパーティションの確認" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-part-manual"></a>2.6.3. Manual によるパーティションの分割</h3></div></div></div><p>この方法を選択すると、
	パーティションエディタが起動します。</p><div class="figure"><a id="bsdinstall-part-manual-create"></a><div class="figure-title">図2.16 Manual によるパーティションの分割</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-manual-create.png" alt="Manual によるパーティションの分割" /></div></div></div><br class="figure-break" /><p>インストール先のドライブ
	(この例では <code class="filename">ada0</code>) を選び、
	<span class="guibutton">[ Create ]</span> を選択すると、
	利用可能なパーティションスキームの一覧が表示されます。</p><div class="figure"><a id="bsdinstall-part-manual-partscheme"></a><div class="figure-title">図2.17 手動でパーティションを作成する</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-manual-partscheme.png" alt="手動でパーティションを作成する" /></div></div></div><br class="figure-break" /><p>amd64 コンピュータでは、通常 <acronym class="acronym">GPT</acronym>
	が最も適切な選択となります。
	<acronym class="acronym">GPT</acronym> に対応していないような古いコンピュータでは、
	<acronym class="acronym">MBR</acronym> を使う必要があります。
	他のパーティションスキームは、使うことがまれであったり、
	古いコンピュータで用いられるものです。</p><div class="table"><a id="idp80318416"></a><div class="table-title">表2.1 パーティションスキーム</div><div class="table-contents"><table summary="パーティションスキーム" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th align="left">省略形</th><th align="left">説明</th></tr></thead><tbody><tr><td align="left">APM</td><td align="left"><span class="trademark">PowerPC</span>® で使われている Apple Partition Map</td></tr><tr><td align="left">BSD</td><td align="left"><acronym class="acronym">MBR</acronym> を用いない
	      <acronym class="acronym">BSD</acronym> ラベル。
	      <acronym class="acronym">BSD</acronym>
	      以外のディスクユーティリティは認識しないため、しばしば
	      <em class="firstterm">dangerously dedicated mode</em>
	      と呼ばれます。</td></tr><tr><td align="left">GPT</td><td align="left">GUID Partition Table (<a class="link" href="http://en.wikipedia.org/wiki/GUID_Partition_Table" target="_top">http://en.wikipedia.org/wiki/GUID_Partition_Table</a>)</td></tr><tr><td align="left">MBR</td><td align="left">Master Boot Record (<a class="link" href="http://en.wikipedia.org/wiki/Master_boot_record" target="_top">http://en.wikipedia.org/wiki/Master_boot_record</a>)</td></tr><tr><td align="left">PC98</td><td align="left">NEC PC-98 コンピュータで使われている
	      <acronym class="acronym">MBR</acronym> の亜種 (<a class="link" href="http://en.wikipedia.org/wiki/Pc9801" target="_top">http://en.wikipedia.org/wiki/Pc9801</a>)</td></tr><tr><td align="left">VTOC8</td><td align="left">Volume Table Of Contents。
	      Sun SPARC64 および UltraSPARC コンピュータで使われます。</td></tr></tbody></table></div></div><br class="table-break" /><p>パーティションスキームを選択して作成した後で、
	もう一度 <span class="guibutton">[ Create ]</span> を選択すると、
	パーティションが作成されます。</p><div class="figure"><a id="bsdinstall-part-manual-addpart"></a><div class="figure-title">図2.18 手動でパーティションを作成する</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-manual-addpart.png" alt="手動でパーティションを作成する" /></div></div></div><br class="figure-break" /><p>標準の FreeBSD <acronym class="acronym">GPT</acronym> のインストールでは、
	少なくとも 3 つのパーティションが使われます。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">freebsd-boot</code> - FreeBSD
	    ブートコードを含んでいます。</p></li><li class="listitem"><p><code class="literal">freebsd-ufs</code> - FreeBSD
	    <acronym class="acronym">UFS</acronym> ファイルシステム。</p></li><li class="listitem"><p><code class="literal">freebsd-swap</code> - FreeBSD
	    スワップ空間。</p></li></ul></div><p>他のパーティション形式に <code class="literal">freebsd-zfs</code>
	があります。
	これは FreeBSD <acronym class="acronym">ZFS</acronym>
	ファイルシステム (<a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/filesystems-zfs.html" target="_top">
	  The Z File System (ZFS)</a>) を含めるためのものです。
	利用可能な <acronym class="acronym">GPT</acronym>
	パーティションタイプについては、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gpart&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gpart</span>(8)</span></a>
	をご覧ください。</p><p>複数のファイルシステムのパーティションを作成できます。
	<code class="filename">/</code>, <code class="filename">/var</code>,
	<code class="filename">/tmp</code> そして <code class="filename">/usr</code>
	といった伝統的なパーティション分割のレイアウトを好む人もいます。
	レイアウトの例が <a class="xref" href="bsdinstall-partitioning.html#bsdinstall-part-manual-splitfs" title="例2.1 伝統的なファイルシステムのパーティションを作成する。">例2.1「伝統的なファイルシステムのパーティションを作成する。」</a> にあります。</p><p><code class="literal">Size</code> には、
	<span class="emphasis"><em>K</em></span> (キロバイト)、
	<span class="emphasis"><em>M</em></span> (メガバイト)、
	<span class="emphasis"><em>G</em></span> (ギガバイト)
	といった通常の省略形を使用出来ます。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">セクタを適切に配置することで、
	  最良のパフォーマンスを得ることができます。
	  また、パーティションサイズを 4K バイトの偶数倍にすると、
	  512 バイトまたは 4K バイトのセクタでドライブが配置しやすくなります。 一般的に、
	  4K の偶数倍の場所からパーティションが開始するように設定する簡単な方法は、
	  1M または 1G の偶数倍のパーティションサイズを用いることです。
	  ただし、例外があります。
	  <span class="emphasis"><em>freebsd-boot</em></span> パーティションは、
	  ブートコードの制限により 512K 以下である必要があります。</p></div><p>ファイルシステムを持つパーティションでは、
	<code class="literal">Mountpoint</code> が必要となります。
	1 つの <acronym class="acronym">UFS</acronym> パーティションだけを作成したのであれば、
	マウントポイントは <code class="filename">/</code> となります。</p><p><code class="literal">Label</code>
	は作成したパーティションを認識するための名前です。
	ドライブ名や番号は、
	ドライブが別のコントローラやポートに接続されると変わることがありますが、
	パーティションラベルは変わりません。
	<code class="filename">/etc/fstab</code> のようなファイルの中で、
	ドライブ名やパーティション番号ではなく、ラベルを参照することにより、
	システムがハードウェアの変更に対して、より寛容になります。
	<acronym class="acronym">GPT</acronym> ラベルは、
	ディスクが接続されると <code class="filename">/dev/gpt/</code>
	に現れます。他のパーティションスキームでは別のラベルとなり、
	<code class="filename">/dev/</code>
	以下の異なるディレクトリにラベルが現れます。</p><div xmlns="" class="tip"><h3 class="admontitle">ヒント: </h3><p xmlns="http://www.w3.org/1999/xhtml">名前の衝突を避けるため、
	  各パーティションには、一意的な名前使ってください。
	  コンピュータ名、使用、位置情報を表す単語をラベルに追加できます。
	  たとえば、<code class="literal">lab</code> という名前のコンピュータの
	  <acronym class="acronym">UFS</acronym> の root パーティションには、
	  <code class="literal">labroot</code> または
	  <code class="literal">rootfs-lab</code> といった名前を使ってください。</p></div><div class="example"><a id="bsdinstall-part-manual-splitfs"></a><div class="example-title">例2.1 伝統的なファイルシステムのパーティションを作成する。</div><div class="example-contents"><p>伝統的なパーティションレイアウト
	  (<code class="filename">/</code>, <code class="filename">/var</code>,
	  <code class="filename">/tmp</code> および <code class="filename">/usr</code>
	  ディレクトリが各パーティションの別のファイルシステム)
	  を作成するには、
	  <acronym class="acronym">GPT</acronym> パーティションスキームを作成し、
	  その後、示されているようにパーティションを作成してください。
	  示されているパーティションサイズは 20G のディスク用です。
	  ディスクにより多くの容量があれば、swap または
	  <code class="filename">/var</code>
	  パーティションを大きく取ると良いでしょう。
	  ここで示されているラベルには、
	  <code class="literal">example</code> を意味する
	  <code class="literal">ex</code> が付けられていますが、
	  実際には上で説明したように、
	  これとは別のユニークなラベルをつけてください。</p><p>FreeBSD の <code class="filename">gptboot</code> は、
	  デフォルトでは最初に見つかった
	  <acronym class="acronym">UFS</acronym> パーティションが、
	  <code class="filename">/</code> パーティションであることを前提としています。</p><div class="informaltable"><table border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>パーティションタイプ</th><th>サイズ</th><th>マウントポイント</th><th>ラベル</th></tr></thead><tbody><tr><td><code class="literal">freebsd-boot</code></td><td><code class="literal">512K</code></td><td class="auto-generated">〓</td><td class="auto-generated">〓</td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td><code class="literal">2G</code></td><td><code class="filename">/</code></td><td><code class="literal">exrootfs</code></td></tr><tr><td><code class="literal">freebsd-swap</code></td><td><code class="literal">4G</code></td><td>〓</td><td><code class="literal">exswap</code></td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td><code class="literal">2G</code></td><td><code class="filename">/var</code></td><td><code class="literal">exvarfs</code></td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td><code class="literal">1G</code></td><td><code class="filename">/tmp</code></td><td><code class="literal">extmpfs</code></td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td>デフォルト (ディスクの残りのすべての容量)</td><td><code class="filename">/usr</code></td><td><code class="literal">exusrfs</code></td></tr></tbody></table></div></div></div><br class="example-break" /><p>カスタムパーティション を作成したら
	<span class="guibutton">[ Finish ]</span> を選択して、
	インストールを先に進んでください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-part-zfs"></a>2.6.4. root-on-ZFS パーティションの自動作成</h3></div></div></div><p>root-on-ZFS のインストール時の自動作成は、
	FreeBSD 10.0-RELEASE から対応しました。
	このパーティションのモードは、
	ディスクのすべての領域に対して機能するので、
	ディスク上にあるすべての内容を消去してしまいます。
	インストーラは、<acronym class="acronym">ZFS</acronym> が 4k セクタを使うように、
	自動的に 4k の境界にアラインするようパーティションを作成します。
	512 バイトセクタのディスクでも利用できます。
	512 バイトのディスクで作成されたプールに、
	将来ストレージ空間を追加したり、壊れたディスクの置き換えにおいて、4k
	セクタのディスクを追加できるようにしておくことにはメリットがあります。
	インストーラはオプションとして、
	<acronym class="acronym">GELI</acronym> ディスクの暗号化にも対応しています。
	
	暗号化を有効にすると、<code class="filename">/boot</code>
	ディレクトリを含む 2 GB
	の暗号化されていないブートプールが作成されます。
	ここには、カーネルとシステムを起動するのに必要なファイルが含まれます。
	ユーザがサイズを選択可能な swap パーティションも作成され、
	残りのスペースが <acronym class="acronym">ZFS</acronym> プールとして使われます。</p><p>インストーラの <acronym class="acronym">ZFS</acronym> 設定メニューには、
	プールの作成をコントロールする数多くのオプションが用意されています。</p><div class="figure"><a id="bsdinstall-zfs-menu"></a><div class="figure-title">図2.19 <acronym class="acronym">ZFS</acronym> パーティションメニュー</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-menu.png" alt="ZFS パーティションメニュー" /></div></div></div><br class="figure-break" /><p><span class="keycap"><strong>T</strong></span> を選択して、<code class="literal">Pool Type</code>
	およびプールに対応するディスクを選択してください。
	現在のところ、自動の <acronym class="acronym">ZFS</acronym> インストーラは、
	ストライプモードを除き、
	単一のトップレベルの仮想デバイスの作成のみに対応しています。
	より複雑なプールを作成するには、<a class="xref" href="bsdinstall-partitioning.html#bsdinstall-part-shell" title="2.6.5. シェルモードによるパーティションの作成">「シェルモードによるパーティションの作成」</a>
	で説明されている方法で作成してください。
	インストーラは、ストライプ (推奨されません。冗長性なし)、ミラー
	(ベストなパフォーマンス。使用できる容量は最小) および RAID-Z 1, 2
	および 3 (それぞれ 1, 2 および 3 ディスクの同時障害へ対応)、
	といったさまざまなタイプのプールの作成に対応しています。
	選択されているプールタイプに対しては、スクリーンの下に、
	必要なディスク数、RAID-Z の場合には、
	各設定に対して最適なディスクの数についてのアドバイスが表示されます。</p><div class="figure"><a id="bsdinstall-zfs-vdev_type"></a><div class="figure-title">図2.20 <acronym class="acronym">ZFS</acronym> プールタイプ</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-vdev_type.png" alt="ZFS プールタイプ" /></div></div></div><br class="figure-break" /><p><code class="literal">Pool Type</code> を選択したら、
	利用可能なディスクの一覧が表示されます。
	その後、プールを構成するディスクを、1 つまたは複数選択してください。
	十分なディスクが選択されているかどうかについて検証が行われます。
	もし、問題があるようでしたら、
	<span class="guibutton">&lt;Change Selection&gt;</span>
	を選択して、ィスクの一覧に戻ってください。
	もしくは、
	<span class="guibutton">&lt;Cancel&gt;</span> を選択して、
	プールのタイプを変更してください。</p><div class="figure"><a id="bsdinstall-zfs-disk_select"></a><div class="figure-title">図2.21 ディスクの選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-disk_select.png" alt="ディスクの選択" /></div></div></div><br class="figure-break" /><div class="figure"><a id="bsdinstall-zfs-vdev_invalid"></a><div class="figure-title">図2.22 問題のある選択</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-vdev_invalid.png" alt="問題のある選択" /></div></div></div><br class="figure-break" /><p>この一覧の中に抜けているディスクがある時や、
	インストーラが立ち上がった後にディスクを接続した場合に、
	最新の利用可能なディスクの一覧を見るには、
	<span class="guibutton">- Rescan Devices</span> を選択してください。
	間違ったディスクをアクシデントで破壊しないように、
	適切なディスクが選択されていることを確認するには、
	<span class="guibutton">- Disk Info</span> メニュー選択して、
	各ディスクのパーティションテーブル、および、
	デバイスモデル番号およびシリアル番号などのさまざまな情報を確認してください。</p><div class="figure"><a id="bsdinstall-zfs-disk_info"></a><div class="figure-title">図2.23 ディスクの解析</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-disk_info.png" alt="ディスクの解析" /></div></div></div><br class="figure-break" /><p>メインの <acronym class="acronym">ZFS</acronym> 設定メニューでは、
	pool 名の入力、4k セクタ制限の設定の無効化、
	暗号化の有効 / 無効の設定、パーティションテーブルタイプの
	<acronym class="acronym">GPT</acronym> (推奨)
	と <acronym class="acronym">MBR</acronym> の切り替え、
	そしてスワップ領域の容量を設定できます。
	すべてのオプションが適切な値に設定されたら、
	メニューのトップにある
	<span class="guibutton">&gt;&gt;&gt; Install</span>
	オプションを選択してください。</p><p><acronym class="acronym">GELI</acronym> ディスク暗号化を有効にしていたら、
	ディスクを暗号化するために用いるパスフレーズを 2 度求められます。</p><div class="figure"><a id="bsdinstall-zfs-geli_password"></a><div class="figure-title">図2.24 ディスク暗号化パスワード</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-geli_password.png" alt="ディスク暗号化パスワード" /></div></div></div><br class="figure-break" /><p>インストーラは <acronym class="acronym">ZFS</acronym>
	プールを作成するために選択されたドライブの中身を破棄することの最終確認を行います。</p><div class="figure"><a id="bsdinstall-zfs-warning"></a><div class="figure-title">図2.25 最終確認</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-zfs-warning.png" alt="最終確認" /></div></div></div><br class="figure-break" /><p>その後のインストールの過程は、通常通りに進みます。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-part-shell"></a>2.6.5. シェルモードによるパーティションの作成</h3></div></div></div><p>高度なインストールを行うには、<span class="application">bsdinstall</span>
	が提供するパーティション分割のメニューは柔軟性にかけることがあります。
	高度な技術を持つユーザは、パーティションメニューで      
	<span class="guibutton">Shell</span> オプションを選択することで、
	手動でドライブを分割して、ファイルシステムを作成し、
	<code class="filename">/tmp/bsdinstall_etc/fstab</code> を作成し、
	<code class="filename">/mnt</code>
	以下にファイルシステムをマウントできます。
	以上を実行したら、
	<code class="command">exit</code> を実行して
	<span class="application">bsdinstall</span> に戻り、
	インストールを続けてください。</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-bsdinstall.html">戻る</a>〓</td><td width="20%" align="center"><a accesskey="u" href="bsdinstall.html">上に戻る</a></td><td width="40%" align="right">〓<a accesskey="n" href="bsdinstall-final-warning.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">2.5. <span class="application">bsdinstall</span> の使用〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓2.7. インストール操作の確定</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>