<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>14.3. アカウント情報の管理</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD ハンドブック" /><link rel="up" href="users.html" title="第14章 ユーザと基本的なアカウントの管理" /><link rel="prev" href="users-introduction.html" title="14.2. アカウントの種類" /><link rel="next" href="users-limiting.html" title="14.4. ユーザへの制限" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">14.3. アカウント情報の管理</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="users-introduction.html">戻る</a>〓</td><th width="60%" align="center">第14章 ユーザと基本的なアカウントの管理</th><td width="20%" align="right">〓<a accesskey="n" href="users-limiting.html">次へ</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-modifying"></a>14.3. アカウント情報の管理</h2></div></div></div><a id="idp89055696" class="indexterm"></a><p>FreeBSD には、
      ユーザアカウントを操作するのにさまざまなコマンドが用意されています。
      もっとも一般的なコマンドを以下に示し、
      それに続いて詳しい使用例を示します。</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>コマンド</th><th>要約</th></tr></thead><tbody><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a></td><td>コマンドラインからユーザを追加するための推奨アプリケーション</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rmuser</span>(8)</span></a></td><td>コマンドラインからユーザを削除するための推奨アプリケーション</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a></td><td>ユーザデータベースの情報を変更するための柔軟なツール</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">passwd</span>(1)</span></a></td><td>ユーザのパスワードを変更する簡単なコマンドラインツール</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a></td><td>ユーザアカウントのあらゆる箇所を変更する強力で柔軟なツール</td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-adduser"></a>14.3.1. <code class="command">adduser</code></h3></div></div></div><a id="idp89074640" class="indexterm"></a><a id="idp89075792" class="indexterm"></a><a id="idp89076688" class="indexterm"></a><a id="idp89077584" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> は、
        新しいユーザを登録するためのシンプルなプログラムです。
	ユーザを追加すると、
	このプログラムは、<code class="filename">/etc/passwd</code> と
	<code class="filename">/etc/group</code> を自動的に更新します。
	また、新規ユーザのホームディレクトリを作成し、
	<code class="filename">/usr/share/skel</code>
	から、デフォルトで使用される設定ファイルをコピーします。
	また、新しく作成されたユーザに対して、
        ウェルカムメッセージをメールで送信することも可能です。</p><div class="example"><a id="idp89080400"></a><div class="example-title">例14.2 FreeBSD におけるユーザの追加</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>adduser</code></strong>
Username: <strong class="userinput"><code>jru</code></strong>
Full name: <strong class="userinput"><code>J. Random User</code></strong>
Uid (Leave empty for default):
Login group [jru]:
Login group is jru. Invite jru into other groups? []: <strong class="userinput"><code>wheel</code></strong>
Login class [default]:
Shell (sh csh tcsh zsh nologin) [sh]: <strong class="userinput"><code>zsh</code></strong>
Home directory [/home/jru]:
Home directory permissions (Leave empty for default):
Use password-based authentication? [yes]:
Use an empty password? (yes/no) [no]:
Use a random password? (yes/no) [no]:
Enter password:
Enter password again:
Lock out the account after creation? [no]:
Username   : jru
Password   : ****
Full Name  : J. Random User
Uid        : 1001
Class      :
Groups     : jru wheel
Home       : /home/jru
Shell      : /usr/local/bin/zsh
Locked     : no
OK? (yes/no): <strong class="userinput"><code>yes</code></strong>
adduser: INFO: Successfully added (jru) to the user database.
Add another user? (yes/no): <strong class="userinput"><code>no</code></strong>
Goodbye!
<code class="prompt">#</code></pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">入力したパスワードは画面に表示されませんので、
	  ユーザアカウントを作成する際には、
	  パスワードを間違えて入力してしまわないように注意してください。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-rmuser"></a>14.3.2. <code class="command">rmuser</code></h3></div></div></div><a id="idp89086544" class="indexterm"></a><a id="idp89087184" class="indexterm"></a><p>システムから完全にユーザを削除するには、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rmuser</span>(8)</span></a> を使います。
	このコマンドは、次の手順を実行します。</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>指定されたユーザの <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">crontab</span>(1)</span></a>
	    エントリが存在する場合には削除。</p></li><li class="step"><p>指定されたユーザの <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=at&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">at</span>(1)</span></a> ジョブをすべて削除。</p></li><li class="step"><p>指定されたユーザが所有するすべてのプロセスを強制終了。</p></li><li class="step"><p>ローカルパスワードファイルから、
            指定されたユーザのエントリを削除。</p></li><li class="step"><p>指定されたユーザのホームディレクトリを削除
            (ディレクトリの所有者が指定されたユーザのものだった場合)。</p></li><li class="step"><p><code class="filename">/var/mail</code>
            から、指定されたユーザの到着メールファイルを削除。</p></li><li class="step"><p><code class="filename">/tmp</code>
            のような一時ファイル保存領域から、
            指定されたユーザの所有するファイルを削除。</p></li><li class="step"><p>そして最後に、
            <code class="filename">/etc/group</code> にある
            すべてのグループから、指定されたユーザを削除します。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">指定されたユーザと同じ名前のグループで、
	      そのユーザが削除されると空のグループとなる場合は、
	      そのグループ自体が削除されます。
	      これは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> によってユーザごとに作成される、
	      ユニークなグループに対応するものです。</p></div></li></ol></div><p>スーパユーザアカウントの削除に
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rmuser</span>(8)</span></a> を利用することはできません。
        スーパユーザアカウントの削除はほとんどすべての場合、
        大規模なシステムの破壊を意味するからです。</p><p>デフォルトでは、以下の例のような対話モードが使われます。</p><div class="example"><a id="idp89110096"></a><div class="example-title">例14.3 <code class="command">rmuser</code> による対話的なアカウントの削除</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rmuser jru</code></strong>
Matching password entry:
jru:*:1001:1001::0:0:J. Random User:/home/jru:/usr/local/bin/zsh
Is this the entry you wish to remove? <strong class="userinput"><code>y</code></strong>
Remove user's home directory (/home/jru)? <strong class="userinput"><code>y</code></strong>
Updating password file, updating databases, done.
Updating group file: trusted (removing group jru -- personal group is empty) done.
Removing user's incoming mail file /var/mail/jru: done.
Removing files belonging to jru from /tmp: done.
Removing files belonging to jru from /var/tmp: done.
Removing files belonging to jru from /var/tmp/vi.recover: done.
<code class="prompt">#</code></pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-chpass"></a>14.3.3. <code class="command">chpass</code></h3></div></div></div><a id="idp89114320" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a> を用いて、
        パスワード、シェル、その他の個人情報といった、
        ユーザデータベース情報を変更できます。</p><p>スーパユーザ権限に限り、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a> を用い、
	他のユーザの情報やパスワードを変更できます。</p><p>ユーザ名の他にオプションを指定しないと、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a> はユーザ情報を編集するエディタを表示します。
	ユーザがエディタを終了すると、
	ユーザデータベースが新しい情報に更新されます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">スーパユーザでない場合は、
	  エディタを抜けた後にパスワードを聞かれます。</p></div><div class="example"><a id="idp89119056"></a><div class="example-title">例14.4 スーパユーザによる対話的な <code class="command">chpass</code></div><div class="example-contents"><pre class="screen">#Changing user database information for jru.
Login: jru
Password: *
Uid [#]: 1001
Gid [# or name]: 1001
Change [month day year]:
Expire [month day year]:
Class:
Home directory: /home/jru
Shell: /usr/local/bin/zsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:</pre></div></div><br class="example-break" /><p>ユーザは、この情報の限られた部分のみ変更が可能です。
        また、変更できるのはそのユーザ自身のアカウント情報のみです。
      </p><div class="example"><a id="idp89120848"></a><div class="example-title">例14.5 通常のユーザによる対話的な <code class="command">chpass</code></div><div class="example-contents"><pre class="screen">#Changing user database information for jru.
Shell: /usr/local/bin/zsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chfn&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chfn</span>(1)</span></a> および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chsh</span>(1)</span></a> はいずれも、 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a>
	  へのリンクです。
          また、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypchpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypchpass</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypchfn&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypchfn</span>(1)</span></a> および <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypchsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypchsh</span>(1)</span></a> も同様です。
          <acronym class="acronym">NIS</acronym> のサポートは自動的に行なわれますので、
          コマンドの先頭に <code class="literal">yp</code>
          をつける必要はありません。
	  NIS の設定については、
	  
	  で説明されています。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-passwd"></a>14.3.4. <code class="command">passwd</code></h3></div></div></div><a id="idp89138000" class="indexterm"></a><a id="idp89138640" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">passwd</span>(1)</span></a> は、
        ユーザが自分のパスワードを変更する通常の方法です。
        スーパユーザ権限では、
        他のユーザのパスワードを変更するのに使われます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">誤って、または不正なパスワードの変更を避けるため、
	  新しいパスワードを設定する前に、
	  もとのパスワードを入力しなければなりません。
	  スーパーユーザの権限でユーザのパスワードを変更する際には、
	  もとのパスワードを入力する必要はありません。</p></div><div class="example"><a id="idp89141584"></a><div class="example-title">例14.6 自分のパスワードの変更</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>passwd</code></strong>
Changing local password for jru.
Old password:
New password:
Retype new password:
passwd: updating the database...
passwd: done</pre></div></div><br class="example-break" /><div class="example"><a id="idp89143376"></a><div class="example-title">例14.7 スーパーユーザ権限での他のユーザのパスワード変更</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>passwd jru</code></strong>
Changing local password for jru.
New password:
Retype new password:
passwd: updating the database...
passwd: done</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a> 同様、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=yppasswd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">yppasswd</span>(1)</span></a> は、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">passwd</span>(1)</span></a> へのリンクになっていますので、
	  NIS はどちらのコマンドでも動作します。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-pw"></a>14.3.5. <code class="command">pw</code></h3></div></div></div><a id="idp89149392" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> は、ユーザやグループの作成、削除、
	変更および表示を行なうコマンドラインのユーティリティです。
	これは、システムユーザファイルやシステムグループファイルの
	フロントエンドとして働きます。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a>
	はとても強力な一連のコマンドラインオプションを有しており、
	シェルスクリプトで使うのに向いていますが、新しいユーザは、
	この章で紹介されている他のコマンドに比べて難しいと感じるかもしれません。</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="users-introduction.html">戻る</a>〓</td><td width="20%" align="center"><a accesskey="u" href="users.html">上に戻る</a></td><td width="40%" align="right">〓<a accesskey="n" href="users-limiting.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">14.2. アカウントの種類〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓14.4. ユーザへの制限</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>