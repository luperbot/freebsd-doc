<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>16.10. ネットワーク、メモリ、そしてファイルベースのファイルシステム</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD ハンドブック" /><link rel="up" href="disks.html" title="第16章 ストレージ" /><link rel="prev" href="backup-basics.html" title="16.9. バックアップの基本" /><link rel="next" href="snapshots.html" title="16.11. ファイルシステムのスナップショット" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">16.10. ネットワーク、メモリ、そしてファイルベースのファイルシステム</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="backup-basics.html">戻る</a>〓</td><th width="60%" align="center">第16章 ストレージ</th><td width="20%" align="right">〓<a accesskey="n" href="snapshots.html">次へ</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-virtual"></a>16.10. ネットワーク、メモリ、そしてファイルベースのファイルシステム</h2></div><div><span class="authorgroup">再構成および追記: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Fonvieille</span> <span class="firstname">Marc</span> [FAMILY Given]</span>. </span></div></div></div><a id="idp91563216" class="indexterm"></a><a id="idp91563728" class="indexterm"></a><p>FreeBSD にはフロッピーや CD,
      ハードディスクなどの手元の計算機に取り付けたディスクの他に、
      別の形態のディスク、<em class="firstterm">仮想ディスク</em>、もあります。</p><a id="idp91565648" class="indexterm"></a><a id="idp91566160" class="indexterm"></a><a id="idp91570896" class="indexterm"></a><p>これには、<a class="link" href="network-nfs.html" title="22.6. NFS">Network File System</a>
      のようなネットワークファイルシステムや Coda,
      メモリベースのファイルシステムおよびファイルベースのファイルシステムがあります。</p><p>稼働させている FreeBSD のバージョンによって、
      ファイルベースおよびメモリベースのファイルシステムを作成したり操作するために、異なるツールを使用しなければならないでしょう。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 4.X の使用者は必要なデバイスを作成するために
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=MAKEDEV&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">MAKEDEV</span>(8)</span></a> を使用しなければならないでしょう。FreeBSD 5.0
	以降では、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> がデバイスノードを自動的に割り当ててくれるので、
	使用者が意識する必要はありません。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-vnconfig"></a>16.10.1. FreeBSD 4.X でファイル中に構築されるファイルシステム</h3></div></div></div><a id="idp91576528" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a>
	ユーティリティを使えば擬似ディスクデバイスを設定し、
	有効にすることができます。
	<em class="firstterm">vnode</em> とはファイルの内部的な表現方法であり、
	ファイルに関する操作の中心となるものです。つまり、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a>
	はファイルシステムを生成したり操作したりするためにファイルを用いるのです。
	一つ例を挙げると、
	ファイルに収められたフロッピーや CD-ROM のイメージをマウントするために用いることができます。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a> を使用するためには、
	カーネルが <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vn&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">vn</span>(4)</span></a> デバイスに対応している必要があります。
	そうでなければ、カーネルコンフィギュレーションファイルに
	次の行を追加してカーネルを再構築し、システムを再起動してください。</p><pre class="programlisting">pseudo-device vn</pre><p>既にあるファイルシステムイメージのマウント</p><div class="example"><a id="idp91586640"></a><div class="example-title">例16.4 FreeBSD 4.X での vnconfig を用いた既存のファイルシステムイメージのマウント</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vnconfig vn0 diskimage</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/vn0c /mnt</code></strong></pre></div></div><br class="example-break" /><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a> を用いたファイルシステムイメージの新規作成</p><div class="example"><a id="idp91590096"></a><div class="example-title">例16.5 <code class="command">vnconfig</code> を用いたファイルベースディスクの新規作成</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=newimage bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>vnconfig -s labels -c vn0 newimage</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -r -w vn0 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs vn0c</code></strong>
Warning: 2048 sector(s) in last cylinder unallocated
/dev/vn0c:     10240 sectors in 3 cylinders of 1 tracks, 4096 sectors
        5.0MB in 1 cyl groups (16 c/g, 32.00MB/g, 1280 i/g)
super-block backups (for fsck -b #) at:
 32
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/vn0c /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem  1K-blocks     Used    Avail Capacity  Mounted on
/dev/vn0c        4927        1     4532     0%    /mnt</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-mdconfig"></a>16.10.2. FreeBSD 5.X でファイル中に構築されるファイルシステム</h3></div></div></div><a id="idp91597264" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> ユーティリティは FreeBSD 5.X において
	メモリディスク (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>) を設定し、有効にするために使用されます。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> を使用するためには <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> モジュールを読み込むか、
	カーネルコンフィギュレーションファイルに <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>
	デバイスを追加してカーネルを再構築し、システムを再起動してください。</p><pre class="programlisting">device md</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> コマンドは、
	三つのタイプのメモリベース仮想ディスクに対応しています。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a> を用いて割り当てられたメモリディスク、
	ファイルをベースにしたメモリディスク、
	およびスワップ領域をベースにしたメモリディスクです。
	想定される使用法は、ファイル内に保持されたフロッピーイメージまたは
	CD イメージをマウントすることです。</p><p>既にあるファイルシステムイメージのマウント</p><div class="example"><a id="idp91613392"></a><div class="example-title">例16.6 FreeBSD 5.X での <code class="command">mdconfig</code> を用いた既存のファイルシステムイメージのマウント</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f diskimage -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0c /mnt</code></strong></pre></div></div><br class="example-break" /><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> を用いたファイルシステムイメージの新規作成</p><div class="example"><a id="idp91617360"></a><div class="example-title">例16.7 <code class="command">mdconfig</code> を用いたファイルシステムイメージの新規作成</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=newimage bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f newimage -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -r -w md0 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs md0c</code></strong>
/dev/md0c: 5.0MB (10240 sectors) block size 16384, fragment size 2048
	using 4 cylinder groups of 1.27MB, 81 blks, 256 inodes.
super-block backups (for fsck -b #) at:
 32, 2624, 5216, 7808
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0c /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem  1K-blocks     Used    Avail Capacity  Mounted on
/dev/md0c        4846        2     4458     0%    /mnt</pre></div></div><br class="example-break" /><p><code class="option">-u</code> オプションを用いて
	ユニット番号を指定しない場合、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>
	は未使用のデバイスを自動的に選択するために
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> デバイスの auto-unit 機能を使用します。
	割り当てられたユニットの名前は <code class="filename">md4</code>
	のように標準出力に出力されます。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>
	の詳細についてはマニュアルページを参照してください。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.1-RELEASE から、従来の <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>
	  プログラムは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	  ユーティリティに置き換えられました。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> では、
	  使用されていないオプションおよびパラメタの数多くが削除されました。
	  たとえば <code class="option">-r</code> オプションは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	  では取り除かれました。詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	  マニュアルページを参照してください。</p></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> ユーティリティは大変役に立ちますが、
	ファイルベースのファイルシステムを作成するために、
	多くのコマンドの入力が必要となります。FreeBSD 5.0 では
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a> と呼ばれるツールも用意されています。このプログラムは
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> を用いて <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> ディスクを設定し、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>
	を用いて UFS ファイルシステムを作成し、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
	を用いてマウントします。たとえば、上記と同じファイルシステムを作成し、
	マウントしたい場合は、下記のように入力するだけです。</p><div class="example"><a id="idp91649360"></a><div class="example-title">例16.8 <code class="command">mdmfs</code> を用いたファイルベースディスクの設定とマウント</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=newimage bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mdmfs -F newimage -s 5m md0 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md0        4846    2  4458     0%    /mnt</pre></div></div><br class="example-break" /><p>ユニット番号を指定せずに <code class="option">md</code>
	オプションを使用した場合、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>
	は未使用のデバイスを自動的に選択するために <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> デバイスの
	auto-unit 機能を使用します。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>
	についての詳細はマニュアルページを参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-md-freebsd4"></a>16.10.3. FreeBSD 4.X でのメモリベースのファイルシステム</h3></div></div></div><a id="idp91665360" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> ドライバは FreeBSD 4.X
	においてメモリファイルシステムを作成するために単純で効果的な手段です。
	メモリを割り当てるために <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a> 関数が使用されます。</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a> を用いて作成したファイルシステムを例に取ると、
	以下のようにします。</p><div class="example"><a id="idp91673552"></a><div class="example-title">例16.9 FreeBSD 4.X での md メモリディスク</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=newimage of=/dev/md0</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0c /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem  1K-blocks     Used    Avail Capacity  Mounted on
/dev/md0c        4927        1     4532     0%    /mnt</pre></div></div><br class="example-break" /><p>詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> マニュアルページを参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-md-freebsd5"></a>16.10.4. FreeBSD 5.X でのメモリベースのファイルシステム</h3></div></div></div><a id="idp91679184" class="indexterm"></a><p>メモリベースおよびファイルベースのファイルシステムに対しても
	同じツール (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> または <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>) を使用できます。
	メモリベースのファイルシステムに対する記憶領域は
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a> 関数を用いて割り当てられます。</p><div class="example"><a id="idp91683152"></a><div class="example-title">例16.10 <code class="command">mdconfig</code> を用いたメモリベースディスクの新規作成</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t malloc -s 5m -u 1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs -U md1</code></strong>
/dev/md1: 5.0MB (10240 sectors) block size 16384, fragment size 2048
	using 4 cylinder groups of 1.27MB, 81 blks, 256 inodes.
	with soft updates
super-block backups (for fsck -b #) at:
 32, 2624, 5216, 7808
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md1 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md1        4846    2  4458     0%    /mnt</pre></div></div><br class="example-break" /><div class="example"><a id="idp91687632"></a><div class="example-title">例16.11 <code class="command">mdmfs</code> を用いたメモリベースディスクの新規作成</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdmfs -M -s 5m md2 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md2        4846    2  4458     0%    /mnt</pre></div></div><br class="example-break" /><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> のコマンドラインの <code class="option">malloc</code> を
	<code class="option">swap</code> に置き換えることで、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a>
	関数によるファイルシステムを使用する代わりに
	スワップ領域を使用することが可能です。デフォルトでは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>
	ユーティリティはスワップベースのディスクを作成します
	(<code class="option">-M</code> なし)。詳細は <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> および
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a> マニュアルページを参照してください。</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp91700176"></a>16.10.5. システムからメモリディスクを切り離す</h3></div></div></div><a id="idp91700816" class="indexterm"></a><p>メモリベースまたはファイルベースのファイルシステムが使用されていない場合、
	すべてのリソースをシステムに開放するべきです。
	はじめにファイルシステムをアンマウントします。
	次にシステムからディスクを切り離し、リソースを開放するために
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> を使用します。</p><p>たとえば <code class="filename">/dev/md4</code> によって使用されたすべてのリソースを切り離し、開放するには以下のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -d -u 4</code></strong></pre><p><code class="command">mdconfig -l</code> コマンドを使用することによって、
	設定された <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> デバイスについての情報を表示することが可能です。</p><p>FreeBSD 4.X では <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a> はデバイスを切り離すのに使用されます。たとえば <code class="filename">/dev/vn4</code> によって使用されたすべてのリソースを切り離し、開放するには以下のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vnconfig -u vn4</code></strong></pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="backup-basics.html">戻る</a>〓</td><td width="20%" align="center"><a accesskey="u" href="disks.html">上に戻る</a></td><td width="40%" align="right">〓<a accesskey="n" href="snapshots.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">16.9. バックアップの基本〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓16.11. ファイルシステムのスナップショット</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>