<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>3.11. トラブルシューティング</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD ハンドブック" /><link rel="up" href="install.html" title="第3章 FreeBSD 8.X のインストール" /><link rel="prev" href="install-post.html" title="3.10. インストール後の作業" /><link rel="next" href="install-advanced.html" title="3.12. 高度なインストールガイド" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.11. トラブルシューティング</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="install-post.html">戻る</a>〓</td><th width="60%" align="center">第3章 FreeBSD 8.<em class="replaceable"><code>X</code></em> のインストール</th><td width="20%" align="right">〓<a accesskey="n" href="install-advanced.html">次へ</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-trouble"></a>3.11. トラブルシューティング</h2></div></div></div><a id="idp81886032" class="indexterm"></a><p>この節では、
      インストールの際に起こりえる共通の問題を解決するための情報が書いてあります。
      また、FreeBSD と <span class="trademark">Windows</span>®
      のデュアルブートを行う際のいくつかの質問と回答も書いてあります。</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81888080"></a>3.11.1. なにかおかしいときには何をすればよいでしょうか</h3></div></div></div><p>PC アーキテクチャのさまざまな制限により、
	100% 確実にデバイスを認識することは不可能です。
	しかしながら、失敗した時にいくつかできることがあります。</p><p>インストールする FreeBSD のバージョンの <a class="link" href="http://www.FreeBSD.org/ja/releases/index.html" target="_top">ハードウェアノート</a>
	を調べて、
	使っているハードウェアに対応しているかどうかを確認してください。</p><p>もしハードウェアがサポートされているにもかかわらず、
	動作しなかったり他の問題点がある時は、<a class="link" href="kernelconfig.html" title="第9章 FreeBSD カーネルのコンフィグレーション">カスタムカーネル</a>
	を構築して <code class="filename">GENERIC</code>
	カーネルに含まれていないデバイスのサポートを追加してください。
	デフォルトのカーネルでは、ほとんどのハードウェアデバイスの IRQ, IO アドレス、
	DMA チャネルが工場出荷時の状態であると仮定しています。
	もしハードウェアの設定が変更されているのであれば、
	カスタムカーネルのコンフィグレーションファイルを作成し、
	再コンパイルを行なって、
	FreeBSD が認識するよう設定してください。</p><p>存在しないデバイスを認識してしまうことにより、
	その後実際に存在するデバイスの認識を失敗してしまうことがあります。
	このような場合は衝突しているドライバを無効にします。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">いくつかのインストール上の問題は、各ハードウェア装置、
	  特にマザーボード <acronym class="acronym">BIOS</acronym>
	  のファームウェアのアップデートで回避または緩和することができます。
	  ほとんどのマザーボードまたはコンピュータ製造メーカーは、
	  アップグレード情報を載せているウェブサイトを用意しています。</p><p xmlns="http://www.w3.org/1999/xhtml">多くの製造メーカーは、
	  重要な更新のようなそれなりの理由がない限りマザーボードの
	  <acronym class="acronym">BIOS</acronym> のアップグレードは行わないよう強く推奨しています。
	  アップデートの過程で失敗する<span class="emphasis"><em>かもしれず</em></span>、
	  <acronym class="acronym">BIOS</acronym> チップに深刻なダメージを与える原因となり得るからです。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81898832"></a>3.11.2. <span class="trademark">Windows</span>® ファイルシステムの利用</h3></div></div></div><p>現時点では、FreeBSD は、
	<span class="application">Double Space™</span>
	アプリケーションで圧縮されたファイルシステムに対応していません。
	そのため、FreeBSD がデータにアクセスする前に、
	ファイルシステムを展開しておく必要があります。
	展開するには、
	<span class="guimenuitem">Start</span>&gt;
	<span class="guimenuitem">Programs</span> &gt;
	<span class="guimenuitem">System Tools</span> メニューの
	<span class="application">Compression Agent</span> を実行してください。</p><p>FreeBSD は、<span class="trademark">MS-DOS</span>® ファイルシステム
	(FAT ファイルシステムとも呼ばれます) に対応しています。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a> コマンドは、
	ファイルシステムの内容にアクセスできるように、
	ファイルシステムを現存のディレクトリ構成にマウントします。
	通常 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a> プログラムは、
	直接用いられることはありません。
	システムから <code class="filename">/etc/fstab</code> 経由で利用されたり、
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> から適切なパラメータとともに用いられます。</p><p><code class="filename">/etc/fstab</code>
	の典型的な記述例は以下のようになります。</p><pre class="programlisting">/dev/ad0sN  /dos  msdosfs rw  0	0</pre><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">この記述がうまくいくためには、
	  <code class="filename">/dos</code> が存在している必要があります。
	  <code class="filename">/etc/fstab</code> のフォーマットの詳細については、
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> をご覧ください。</p></div><p>FAT ファイルシステムをマウントする <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
	の典型例は以下となります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t msdosfs /dev/ad0s1 /mnt</code></strong></pre><p>この例では、FAT ファイルシステムは、
	プライマリのハードディスクの最初のパーティションに配置されています。
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a> や <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> の出力から、
	パーティションレイアウトを把握するのに十分な情報を得ることが出来ます。</p><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD が割り当てる FAT パーティションの番号は、
	  他のオペレーティングシステムのものとは異なることがあります。
	  特に拡張パーティションには、
	  プライマリパーティションより大きなスライス番号が通常割り当てられます。
	  どのスライスが FreeBSD に属し、
	  どのスライスが他のオペレーティングシステムに属するかを決めるのに
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> は役立ちます。</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81931472"></a>3.11.3. トラブルシューティングに関する Q &amp; A</h3></div></div></div><div class="qandaset"><a id="idp81932112"></a><dl><dt>3.11.3.1. <a href="install-trouble.html#idp81932368">起動時のハードウェア検出で、システムがハングアップします。
	      または、インストール中にシステムがおかしくなります。</a></dt><dt>3.11.3.2. <a href="install-trouble.html#idp81936720">FreeBSD をインストールした後の最初のハードウェアからの起動で、
	      カーネルが読み込まれ、ハードウェアを検出しましたが、
	      次のようなメッセージを表示して停止しました。</a></dt><dt>3.11.3.3. <a href="install-trouble.html#idp81954384">FreeBSD をインストールした後、ハードウェアから起動しましたが、
	      ブートマネージャは、ブートメニューで
	      F? を表示し、それ以上起動が進みません。</a></dt><dt>3.11.3.4. <a href="install-trouble.html#idp81957456">システムが ed(4) ネットワークカードを検出しましたが、
	      デバイスのタイムアウトエラーが出ます。</a></dt><dt>3.11.3.5. <a href="install-trouble.html#idp81971920">Xorg 端末から
	      sysinstall(8) を使うと、
	      ライトグレーの背景にフォントが黄色で表示され、読みずらいです。
	      このアプリケーションのコントラスト
	      
	      を高くすることはできますか?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp81932368"></a><a id="idp81932624"></a><p><strong>3.11.3.1.</strong></p></td><td align="left" valign="top"><p>起動時のハードウェア検出で、システムがハングアップします。
	      または、インストール中にシステムがおかしくなります。</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>i386, amd64 および ia64 プラットフォームにおいて、
	      FreeBSD はシステムの設定を手助けするシステム ACPI サービスを、
	      起動時に検出された場合に広く使います。
	      残念ながら、まだいくつかの不具合が、
	      ACPI ドライバとシステムのマザーボードに存在しています。
	      起動ステージ 3 において、ヒント情報
	      <code class="literal">hint.acpi.0.disabled</code>
	      を以下のように設定すると ACPI を無効にできます。</p><pre class="screen"><strong class="userinput"><code>set hint.acpi.0.disabled="1"</code></strong></pre><p>この設定はシステムが起動するたびにリセットされるので、
	      <code class="filename">/boot/loader.conf</code> に
	      <code class="literal">hint.acpi.0.disabled="1"</code>
	      を追加して、永続的に変更するようにしてください。
	      ブートローダのより詳しい情報については
	      <a class="xref" href="boot.html#boot-synopsis" title="13.1. この章では">「この章では」</a> で説明します。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp81936720"></a><a id="idp81941200"></a><p><strong>3.11.3.2.</strong></p></td><td align="left" valign="top"><p>FreeBSD をインストールした後の最初のハードウェアからの起動で、
	      カーネルが読み込まれ、ハードウェアを検出しましたが、
	      次のようなメッセージを表示して停止しました。</p><pre class="screen">changing root device to ad1s1a panic: cannot mount root</pre><p>何が問題ですか？</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>起動ディスクがシステムの最初のディスクではない場合には、
	      この問題が起こりえます。BIOS は、FreeBSD とは異なる番号付けを用い、
	      どの番号がどの番号に対応するかを正しく見つけ出すことは簡単ではありません。</p><p>この問題が起きた場合には、
	      BIOS ディスク番号、ディスクのタイプおよびそのディスクタイプに対する
	      FreeBSD ディスク番号を設定することで、
	      ルートファイルシステムがどこにあるかを FreeBSD に指定する必要があります。</p><p>システムのそれぞれ IDE バスのマスタに接続された
	      2 つの IDE ディスクがあり、2 番目のディスクから
	      FreeBSD を起動する場合を考えます。
	      BIOS は、これらのデバイスをディスク 0 および ディスク 1 と認識し、
	      一方 FreeBSD は、<code class="filename">ad0</code> および
	      <code class="filename">ad2</code> と認識します。</p><p>BIOS ディスク 1 に FreeBSD があり、
	      ディスクタイプが <code class="literal">ad</code> で、
	      FreeBSD ディスク番号が 2 の場合には、次のようになるでしょう。</p><pre class="screen"><strong class="userinput"><code>1:ad(2,a)kernel</code></strong></pre><p>プライマリバスにスレーブが接続されている場合には、
	      上記は必要なく、適切ではありません。</p><p>2 番目の状況は、システムに 1 つまたはそれ以上の
	      IDE ディスクがあるときに、SCSI ディスクから起動するような場合です。
	      このようなケースでは、FreeBSD ディスク番号は、
	      BIOS ディスク番号より小さな番号になります。
	      2 つの IDE ディスクと SCSI ディスクがある場合には、
	      SCSI ディスクは BIOS ディスク 2、
	      タイプ <code class="literal">da</code>、
	      FreeBSD ディスク番号が 0 となるため、
	      FreeBSD に BIOS ディスク 2 (システムの 1 番目の SCSI ディスク)
	      から起動するように設定するには以下のようになります。</p><pre class="screen"><strong class="userinput"><code>2:da(0,a)kernel</code></strong></pre><p>IDE ディスクが 1 つの場合には、
	      かわりに <code class="literal">1:</code> を指定してください。</p><p>使用する適切な値が決まったら、
	      テキストエディタを使って、コマンドを
	      <code class="filename">/boot.config</code> に記述してください。
	      他に指定がなければ、FreeBSD はこのファイルの内容を、
	      デフォルトの <code class="literal">boot:</code>
	      プロンプトへのレスポンスとして使います。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp81954384"></a><a id="idp81954640"></a><p><strong>3.11.3.3.</strong></p></td><td align="left" valign="top"><p>FreeBSD をインストールした後、ハードウェアから起動しましたが、
	      ブートマネージャは、ブートメニューで
	      <code class="literal">F?</code> を表示し、それ以上起動が進みません。</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> FreeBSD のインストール時に、
	      パーティションエディタで指定したハードウェアのディスクジオメトリが正しくありません。
	      パーティションエディタまで戻り、
	      ハードディスクの正しいジオメトリを指定してください。
	      ジオメトリを正しく設定する所から FreeBSD
	      を再インストールする必要があります。</p><p>FreeBSD 専用のシステムで、
	      他のオペレーティングシステムとの互換性が必要なければ、
	      インストーラのパーティションエディタで
	      <span class="guimenuitem">A</span>) を選択して、
	      ディスクのすべてを使ってください。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp81957456"></a><a id="idp81957712"></a><p><strong>3.11.3.4.</strong></p></td><td align="left" valign="top"><p>システムが <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ed</span>(4)</span></a> ネットワークカードを検出しましたが、
	      デバイスのタイムアウトエラーが出ます。</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>使用しているカードの IRQ が、
	      <code class="filename">/boot/device.hints</code>
	      で指定された IRQ と異なる可能性があります。
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ed</span>(4)</span></a> ドライバは、デフォルトでは <span class="quote">「<span class="quote">ソフトウェア</span>」</span>
	      コンフィグレーションを用いませんが、
	      インターフェースのヒント情報に <code class="literal">-1</code>
	      を指定した場合には、
	      ソフトウェアコンフィグレーションが用いられます。</p><p>カードのジャンパを変更してコンフィグレーションの設定を行うか、
	      <code class="literal">hint.ed.0.irq="-1"</code> と指定して IRQ に
	      <code class="literal">-1</code> を設定してください
	      このように設定すると、
	      カーネルがソフトウェアコンフィグレーションを利用します。</p><p>その他として、利用しているカードが IRQ 9 を使っている可能性があります。
	      この IRQ は IRQ 2 と共有され、
	      特に、IRQ 2 を使っている VGA カードを持っている場合には、
	      しばしば問題を引き起こします。
	      できるだけ IRQ 2 や 9 を避けるべきでしょう。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp81971920"></a><a id="idp81972176"></a><p><strong>3.11.3.5.</strong></p></td><td align="left" valign="top"><p><span class="application">Xorg</span> 端末から
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> を使うと、
	      ライトグレーの背景にフォントが黄色で表示され、読みずらいです。
	      このアプリケーションのコントラスト
	      <a id="idp81973712" class="indexterm"></a>
	      を高くすることはできますか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/xterm/pkg-descr">x11/xterm</a> や <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/rxvt/pkg-descr">x11/rxvt</a>
	      使用時における <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>
	      のデフォルトのカラーが読みにくい場合には、<code class="literal">XTerm*color7:
	      #c0c0c0</code> を <code class="filename">~/.Xdefaults</code>
	      に追加して、より暗いグレーの背景に変更してください。</p></td></tr></tbody></table></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="install-post.html">戻る</a>〓</td><td width="20%" align="center"><a accesskey="u" href="install.html">上に戻る</a></td><td width="40%" align="right">〓<a accesskey="n" href="install-advanced.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">3.10. インストール後の作業〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓3.12. 高度なインストールガイド</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>