<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>第18章 パッキングリストの自動生成</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD port 作成者のためのハンドブック" /><link rel="up" href="index.html" title="FreeBSD port 作成者のためのハンドブック" /><link rel="prev" href="porting-samplem.html" title="第17章 Makefile のサンプル" /><link rel="next" href="changes.html" title="第19章 この文書と ports システムの変更" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第18章 パッキングリストの自動生成</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="porting-samplem.html">戻る</a>〓</td><th width="60%" align="center">〓</th><td width="20%" align="right">〓<a accesskey="n" href="changes.html">次へ</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="porting-autoplist"></a>第18章 パッキングリストの自動生成</h1></div></div></div><p>まず、あなたの port に
      <code class="filename">pkg-plist</code>
      がないことを除けば完成していることを確認してください。</p><p>次に、あなたの port
      をインストールする一時ディレクトリを作成して、
      依存するものをすべてインストールしてください。
      <em class="replaceable"><code>port-type</code></em> は
      X アプリケーションではない port については <code class="literal">local</code>、
      XFree86 4 またはそれより前の XFree86
      のディレクトリ階層にインストールする ports については、それぞれ
      <code class="literal">x11-4</code> または <code class="literal">x11</code>
      にすべきです。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/tmp/port-name</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mtree -U -f /etc/mtree/BSD.port-type.dist -d -e -p /var/tmp/port-name</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make depends PREFIX=/var/tmp/port-name</code></strong></pre><p>このディレクトリ構造を新しいファイルに保存してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>(cd /var/tmp/port-name &amp;&amp; find -d * -type d) | sort &gt; OLD-DIRS</code></strong></pre><p>空の <code class="filename">pkg-plist</code>
      ファイルを作成してください。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>touch pkg-plist</code></strong></pre><p>もしあなたの port が <code class="varname">PREFIX</code> にちゃんと従うなら、
      ここで port をインストールしてパッキングリストを作ることができます。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make install PREFIX=/var/tmp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>(cd /var/tmp/port-name &amp;&amp; find -d * \! -type d) | sort &gt; pkg-plist</code></strong></pre><p>新しく生成されたディレクトリはすべてパッキングリストに追加する必要があります。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>(cd /var/tmp/port-name &amp;&amp; find -d * -type d) | sort | comm -13 OLD-DIRS - | sort -r | sed -e 's#^#@dirrm #' &gt;&gt; pkg-plist</code></strong></pre><p>最後にパッキングリストを手で整える必要があります;
      <span class="emphasis"><em>すべて</em></span>が自動化されているわけではありません。
      マニュアルはパッキングリストに記述するのではなく、
      port の <code class="filename">Makefile</code> 中の
      <code class="varname">MAN<em class="replaceable"><code>n</code></em></code> に
      記述しなければなりません。
      ユーザ設定ファイルは削除するか
      <code class="filename">filename.sample</code>
      としてインストールされなければなりません。
      また <code class="filename">info/dir</code>
      ファイルはリストに含めず、
      <a class="link" href="porting-info.html" title="第12章 Info ファイル">info ファイル</a>に記述されているように、
      適切な <code class="filename">install-info</code> 行に追加しなければなりません。
      port によってインストールされるライブラリは、
      <a class="link" href="special.html#porting-shlibs" title="6.1. 共有ライブラリ">共有ライブラリ</a>
      のセクションで示したように記載されるべきです。</p><p>または、<code class="filename">/usr/ports/Tools/scripts/</code>
      にある <code class="command">plist</code>
      スクリプトを使ってパッキングリストを自動的に生成してください。</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="porting-samplem.html">戻る</a>〓</td><td width="20%" align="center">〓</td><td width="40%" align="right">〓<a accesskey="n" href="changes.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">第17章 <code class="filename">Makefile</code> のサンプル〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓第19章 この文書と ports システムの変更</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>