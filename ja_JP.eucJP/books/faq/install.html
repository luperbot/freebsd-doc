<?xml version="1.0" encoding="euc-jp" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=euc-jp" /><title>第1章 インストール</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD 2.X、3.X、4.X についての FAQ (よくある質問とその答え)" /><link rel="up" href="index.html" title="FreeBSD 2.X、3.X、4.X についての FAQ (よくある質問とその答え)" /><link rel="prev" href="preface.html" title="まえがき" /><link rel="next" href="hardware.html" title="第2章 ハードウェアコンパチビリティ" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第1章 インストール</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="preface.html">戻る</a>〓</td><th width="60%" align="center">〓</th><td width="20%" align="right">〓<a accesskey="n" href="hardware.html">次へ</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install"></a>第1章 インストール</h1></div></div></div><p>
      <span class="emphasis"><em>訳:
        岩崎 満 <code class="email">&lt;<a xmlns="" class="email" href="mailto:iwasaki@FreeBSD.org">iwasaki@FreeBSD.org</a>&gt;</code>、
        むらたしゅういちろう <code class="email">&lt;<a xmlns="" class="email" href="mailto:mrt@mickey.ai.kyutech.ac.jp">mrt@mickey.ai.kyutech.ac.jp</a>&gt;</code>、
        1997 年 11 月 8 日</em></span>
    </p><div class="qandaset"><a id="idp76818640"></a><dl><dt>1.1. <a href="install.html#idp76819408">FreeBSD を入手するには、どのファイルをダウンロードすれば良いのでしょうか?</a></dt><dt>1.2. <a href="install.html#idp76852432">ブートフロッピーイメージが一枚のフロッピーディスクに納まらないみたい!</a></dt><dt>1.3. <a href="install.html#idp76889168">FreeBSD のインストールについての説明書はどこにありますか?</a></dt><dt>1.4. <a href="install.html#idp76895824">FreeBSD を動作させるには何が必要ですか?</a></dt><dt>1.5. <a href="install.html#idp76901712">4MB しかメモリがないのですが、インストールできますか?</a></dt><dt>1.6. <a href="install.html#idp76931664">自分用のインストールフロッピーを作るには?</a></dt><dt>1.7. <a href="install.html#idp76938960">同じマシンで Windows 95/98 と共存できますか?</a></dt><dt>1.8. <a href="install.html#idp76944464">Windows 95/98 がブートマネージャを潰しちゃった! どうやって戻すの?</a></dt><dt>1.9. <a href="install.html#idp76982992">
            IBM Thinkpad の A、T、X シリーズのいずれかを持っています。
            FreeBSD をインストールしたら起動しなくなってしまいました。
            どうすればいいですか?
          </a></dt><dt>1.10. <a href="install.html#idp77096016">不良ブロックのあるディスクにインストールできますか?</a></dt><dt>1.11. <a href="install.html#idp77112784">インストーラから起動したら変なことになりました!</a></dt><dt>1.12. <a href="install.html#idp77141968">ATAPI CD-ROM から起動したのですが、
            インストールプログラムは CD-ROM が見つかりませんと言ってきます。
            CD-ROM はどこに行ってしまったのでしょうか?</a></dt><dt>1.13. <a href="install.html#idp77146960">あれれ? テープからインストールできません!</a></dt><dt>1.14. <a href="install.html#idp77151952">PLIP 経由で二つ FreeBSD box を接続したいのですが</a></dt><dt>1.15. <a href="install.html#idp77208528">ラップトップ PC に PLIP 経由でインストールできますか?</a></dt><dt>1.16. <a href="install.html#idp77326160">ハードディスクドライブには、
            どのジオメトリを使うべきでしょうか?</a></dt><dt>1.17. <a href="install.html#idp77342928">ディスクの分割の仕方で何か制限はありますか?</a></dt><dt>1.18. <a href="install.html#idp77348688">大容量ディスクを持っていますが、ディスクマネージャは使えますか?</a></dt><dt>1.19. <a href="install.html#idp77367760">FreeBSD の起動時に
            Missing Operating System
            と表示されます</a></dt><dt>1.20. <a href="install.html#idp77375440">ブートマネージャの F? プロンプトが表示されません。</a></dt><dt>1.21. <a href="install.html#idp77381840">ソースを全部インストールする必要はありますか?</a></dt><dt>1.22. <a href="install.html#idp77393872">カーネルは必ず作り直さなくちゃならないんですか?</a></dt><dt>1.23. <a href="install.html#idp77400144">DES と MD5、どちらのパスワードを使うべきなのでしょうか?
            また、ユーザがどちらを使うことになるか指定する方法はありますか?</a></dt><dt>1.24. <a href="install.html#idp77421520">ブートフロッピーで起動すると、
            Probing Devices...
            の画面でハングアップします。</a></dt><dt>1.25. <a href="install.html#idp77427536">インストール終了後にシステムを再起動すると、
            panic: cant mount root
            のエラーとなります。</a></dt><dt>1.26. <a href="install.html#idp77467856">メモリの大きさの制限は?</a></dt><dt>1.27. <a href="install.html#idp77473872">ffs ファイルシステムの大きさの制限は?</a></dt><dt>1.28. <a href="install.html#idp77539536">フロッピーに 1 TB のファイルを格納するには?</a></dt><dt>1.29. <a href="install.html#idp77546064">新しいカーネルをコンパイルしたら、起動時に
            archsw.readin.failed
            というエラーメッセージが表示されるようになってしまいました。</a></dt><dt>1.30. <a href="install.html#idp77548880">3.X から 4.X にアップグレードするにはどうしたら良いのですか?</a></dt><dt>1.31. <a href="install.html#idp79990736">「セキュリティプロファイル」
            (「security profiles」) とは何ですか?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp76819408"></a><a id="floppy-download"></a><p><strong>1.1.</strong></p></td><td align="left" valign="top"><p>FreeBSD を入手するには、どのファイルをダウンロードすれば良いのでしょうか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            FreeBSD 3.1-RELEASE 以前では、
            インストールの際に必要なのは
            <code class="filename">floppies/boot.flp</code> と名前のついた
            一つのフロッピーディスクイメージだけでした。
            しかし FreeBSD 3.1-RELEASE 以降、
            幅広い種類のハードウェアサポートが基本システムに追加され、
            そのサポートが必要とする容量を補うため、
            3.X と 4.X の系列では新たに、
            <code class="filename">floppies/kernel.flp</code>
            および
            <code class="filename">floppies/mfsroot.flp</code>
            という、二つのフロッピーディスクイメージを使うようになりました。
            これらのイメージをフロッピーディスクに書き込むには、
            <code class="command">fdimage</code> や
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a> といったツールが必要となります。
          </p><p>
            (DOS ファイルシステムからのインストールなどで)
            あなた自身が手動で配布ファイルをダウンロードする場合には、
            以下の配布ファイルをダウンロードすることをおすすめします。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">bin/</code></p></li><li class="listitem"><p><code class="filename">manpages/</code></p></li><li class="listitem"><p><code class="filename">compat*/</code></p></li><li class="listitem"><p><code class="filename">doc/</code></p></li><li class="listitem"><p><code class="filename">src/ssys.*</code></p></li></ul></div><p>
            この手順の完全な説明と、一般的なインストール時の問題については
            <a class="link" href="../handbook/install.html" target="_top">FreeBSD
              ハンドブックのインストールの節</a>
            を参照してください。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76852432"></a><a id="floppy-image-too-large"></a><p><strong>1.2.</strong></p></td><td align="left" valign="top"><p>ブートフロッピーイメージが一枚のフロッピーディスクに納まらないみたい!</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            3.5 インチ (1.44MB) のフロッピーディスクには、
            1474560 バイトのデータを格納できます。
            ブートイメージはちょうど 1474560 バイトの大きさです。
          </p><p>ブートフロッピーディスクを準備する際のよくある間違いには、
            以下のものがあります。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">FTP</acronym>
                によってフロッピーイメージをダウンロードする際に、
                <span class="emphasis"><em>バイナリ (binary)</em></span> モードにしていなかった。
              </p><p>FTP クライアントの中には、
                転送モードのデフォルトを<span class="emphasis"><em>アスキー (ascii)</em></span> モードにして、
                クライアント側システムの慣習にあうよう、
                すべての行末の文字を変更するものがあります。
                この場合は常に、ブートイメージが壊れたものになります。
                ダウンロードしたブートイメージのサイズをチェックしてください。
                サーバ上のものと<span class="emphasis"><em>正確に</em></span>一致しなければ、
                ダウンロードの処理を疑いましょう。
              </p><p>これを回避するには、
                サーバに接続してイメージのダウンロードを開始する前に
                FTP のコマンドプロンプトで
                <code class="command">binary</code> とタイプします。
              </p></li><li class="listitem"><p>ブートイメージを
                DOS の <code class="command">copy</code> コマンド
                (または GUI の同等のツール) でフロッピーディスクへ転送した。
              </p><p><code class="command">copy</code>
                のようなプログラムは、
                直接起動するように作成されたブートイメージをうまく処理できません。
                イメージにはフロッピーディスクの完全な中身がトラック単位で格納されており、
                フロッピーディスク上に通常のファイルとして
                格納されるように想定されているわけではありません。
                <a class="link" href="../handbook/install.html" target="_top">FreeBSD
                  のインストール</a>に記述されているように、
                低レベルのツール (たとえば
                <code class="command">fdimage</code> や
                <code class="command">rawrite</code>) を使用して
                <span class="quote">「<span class="quote">そのままの (raw)</span>」</span> の状態でフロッピーディスクに
                転送する必要があります。
              </p></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76889168"></a><a id="install-instructions-location"></a><p><strong>1.3.</strong></p></td><td align="left" valign="top"><p>FreeBSD のインストールについての説明書はどこにありますか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            インストールの説明書は<a class="link" href="../handbook/install.html" target="_top">FreeBSD
              ハンドブックのインストールの章</a>にあります。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76895824"></a><a id="need-to-run"></a><p><strong>1.4.</strong></p></td><td align="left" valign="top"><p>FreeBSD を動作させるには何が必要ですか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            386 以上の PC、5MB 以上の RAM、
            そして最低 60MB のハードディスク容量が必要となります。
            ローエンドの MDA カードでも動作しますが、
            X11R6 を使うには VGA かそれ以上のビデオカードが必要となります。
          </p><p>
            <a class="xref" href="hardware.html" title="第2章 ハードウェアコンパチビリティ">2章<em>ハードウェアコンパチビリティ</em></a>
              もご覧ください。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76901712"></a><a id="four-meg-ram-install"></a><p><strong>1.5.</strong></p></td><td align="left" valign="top"><p>4MB しかメモリがないのですが、インストールできますか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            4MB のシステムにインストールできた最後の FreeBSD は
            FreeBSD 2.1.7 でした。2.2 を含むより新しいバージョンの
            FreeBSD は新規のインストールに最低 5MB は必要になります。
          </p><p>
            ただし、インストールプログラムが 4MB では動作しないだけで、
            3.0 を含む FreeBSD のすべてのバージョンは 4MB の RAM
            で<span class="emphasis"><em>動作可能</em></span>です。
            インストールする時だけさらに 4MB 追加しておき、
            システムがセットアップされて動作するようになった後、
            また 4MB を取り出して元に戻すこともできます。
            あるいは 4MB より多くメモリを搭載したシステムにディスクを持っていき、
            そのマシンでインストールした後にディスクを戻すこともできます。
          </p><p>
            また、FreeBSD 2.1.7 であっても、4MB
            ではインストールできない場合があります。
            正確には、640KB のベースメモリ + 3MB の拡張メモリでは、
            インストールはできません。もしマシンのマザーボードが
            640KB から 1MB
            の領域で「失われた」メモリを再マップできる場合は、
            FreeBSD 2.1.7 をインストールできるかもしれません。
          </p><p>
            BIOS のセットアップ画面で、<span class="quote">「<span class="quote">remap</span>」</span>
            のオプションを探して有効 (enable) にしてみてください。
            また、ROM shadowing
            を無効 (disable) にする必要もあります。
          </p><p>
            簡単なやり方としては、インストールする時だけあと
            4MB 追加しておく方法があります。
            必要なオプションだけを選択してカスタムカーネルを構築し、
            また 4MB を取り出してもとに戻せばいいのです。
          </p><p>
            また、2.0.5 をインストールして、
            それから 2.1.7 のインストーラの
            <span class="quote">「<span class="quote">upgrade</span>」</span>
            オプションでシステムを 2.1.7 へアップグレード
            するというやり方もあります。
          </p><p>
            インストールしたあとでカスタムカーネルの構築をした場合には、
            4MB でも動作します。
            2MB で起動に成功した人もいます (でもそのシステムは、
            ほとんど使いものになりませんでした :-))。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76931664"></a><a id="custom-boot-floppy"></a><p><strong>1.6.</strong></p></td><td align="left" valign="top"><p>自分用のインストールフロッピーを作るには?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            現在はカスタムインストールフロッピーディスク「だけ」を作る方法はありません。
            カスタムインストールフロッピーディスクイメージを含む、
            release 環境全体を新たに作る必要があります。
          </p><p>
            カスタムの release 環境をつくるには、
            <a class="link" href="hackers.html#custrel" title="13.2.">ここの指示</a>にしたがってください。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76938960"></a><a id="windows-coexist"></a><p><strong>1.7.</strong></p></td><td align="left" valign="top"><p>同じマシンで Windows 95/98 と共存できますか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            まず Windows 95/98 をインストールしてから、そのあとで FreeBSD
            をインストールしてください。FreeBSD のブートマネージャが Win95
            と FreeBSD のブート管理をしてくれるようになります。
            Windows 95/98 を後にインストールした場合はひどいことに、
            問い合わせることもなくブートマネージャを上書きしてしまいます。
            そうなってしまった場合は次の節をご覧ください。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76944464"></a><a id="win95-damaged-boot-manager"></a><p><strong>1.8.</strong></p></td><td align="left" valign="top"><p>Windows 95/98 がブートマネージャを潰しちゃった! どうやって戻すの?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            ブートマネージャの再インストールの方法として、
            FreeBSD では以下に示す三通りの方法が用意されています。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>DOS を起動し、FreeBSD の配布物の中にある
                <code class="filename">tools/</code> ディレクトリへ移動し、
                <code class="filename">bootinst.exe</code> を探してください。
                そして次のように実行します。
                </p><pre class="screen"><code class="prompt">...\TOOLS&gt;</code> <strong class="userinput"><code>bootinst.exe boot.bin</code></strong></pre><p>
                こうすることで、
                ブートマネージャが再インストールされます。
              </p></li><li class="listitem"><p>
                FreeBSD のブートフロッピーディスクから起動し、
                「カスタム」インストールメニューを選択し、
                続いて「パーティション」を選択します。
                ブートマネージャがインストールされていたドライブ
                (多分最初のもの) を選択し、
                パーティションエディタにたどり着いたら、
                (何も変更せず) そのまま (W)rite を指定します。
                確認のメッセージが出ますので「はい(Y)」と答え、
                ブートマネージャ選択の画面で確実に <span class="quote">「<span class="quote">Boot Manager</span>」</span>
                を選択します。
                これでブートマネージャがディスクに再び書き込まれます。
                インストールメニューから抜けて再起動すると、
                ハードディスクは元通りになります。
              </p></li><li class="listitem"><p>FreeBSD 起動フロッピー (もしくは CD-ROM) から起動し、
                <span class="quote">「<span class="quote">Fixit</span>」</span> メニューを選択します。
                Fixit フロッピーか CD-ROM #2 (<span class="quote">「<span class="quote">live</span>」</span>
                ファイルシステムオプション) の好きな方を選択して
                fixit シェルに入ります。
                そして、次のコマンドを実行してください。</p><pre class="screen"><code class="prompt">Fixit#</code> <strong class="userinput"><code>fdisk -B -b /boot/boot0 起動デバイス</code></strong></pre><p><em class="replaceable"><code>起動デバイス</code></em> の部分は、たとえば
                <code class="filename">ad0</code> (一番目の IDE ディスク)、
                <code class="filename">ad4</code> (セカンダリ IDE コントローラの一番目の IDE ディスク)、
                <code class="filename">da0</code> (一番目の SCSI ディスク)
                などといった、実際の起動デバイスを表しています。</p></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp76982992"></a><a id="boot-on-thinkpad"></a><p><strong>1.9.</strong></p></td><td align="left" valign="top"><p>
            IBM Thinkpad の A、T、X シリーズのいずれかを持っています。
            FreeBSD をインストールしたら起動しなくなってしまいました。
            どうすればいいですか?
          </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
          これらのマシンに使われている初期のリビジョンの IBM BIOS
          にはバグがあり、FreeBSD のパーティションをディスクサスペンド用の
          FAT 領域だと誤認します。 そのため、BIOS が FreeBSD のパーティションを
          検出したところでシステムがハング (停止) してしまいます。
        </p><p>
          IBM <a href="#ftn.idp76987216" class="footnote" id="idp76987216"><sup class="footnote">[1]</sup></a>
          によれば、以下のモデル/BIOS リリース番号には修正が含まれています。
        </p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>モデル</th><th>BIOS リビジョン番号</th></tr></thead><tbody><tr><td>T20</td><td>IYET49WW 以降</td></tr><tr><td>T21</td><td>KZET22WW 以降</td></tr><tr><td>A20p</td><td>IVET62WW 以降</td></tr><tr><td>A20m</td><td>IWET54WW 以降</td></tr><tr><td>A21p</td><td>KYET27WW 以降</td></tr><tr><td>A21m</td><td>KXET24WW 以降</td></tr><tr><td>A21e</td><td>KUET30WW</td></tr></tbody></table></div><p>それより新しいリビジョンの BIOS にまたバグが入り込んだか
          もしれないという報告がありました。Jacques Vidrine は
          <code class="email">&lt;<a xmlns="" class="email" href="mailto:mobile@freebsd.org">mobile@freebsd.org</a>&gt;</code> メーリングリストにあてた <a class="link" href="http://www.FreeBSD.org/cgi/getmsg.cgi?fetch=200565+208320+/usr/local/www/db/text/2001/freebsd-mobile/20010429.freebsd-mobile" target="_top">メッセージ</a>
          で、これ以降の IBM の laptop で FreeBSD が正常に起動しない
          場合におそらくうまく行く、BIOS をアップグレードまたは
          ダウングレードできる手順を説明しています。</p><p>
          もし問題のある BIOS を使っていてアップグレードが選べない場合、
          FreeBSD をインストールしてから FreeBSD が使っているパーティション ID を変更し、
          変更されたパーティション ID を正しく扱うことのできる
          新しい起動ブロックをインストールすることで解決することができます。
        </p><p>
          それにはまず、
          セルフテスト画面を通過する状態にまでマシンを回復させる必要があります。
          そのためには、マシンがプライマリディスクから FreeBSD
          パーティションを見つけないようにして起動しなければなりません。
          たとえば、一度ハードディスクを外してしまって、そのディスクを古い ThinkPad
          (ThinkPad 600 など) やデスクトップ PC に適切な変換ケーブルで接続します。
          その後 FreeBSD のパーティションを削除し、
          ハードディスクを元の ThinkPad に戻します。
          こうすることで ThinkPad は起動可能な状態に戻るはずです。
        </p><p>
          マシンがちゃんと動くようになったら、
          以下の復旧手順に従って FreeBSD をインストールすることができます。
        </p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>
                <a class="link" href="http://people.freebsd.org/~bmah/ThinkPad/" target="_top">http://people.freebsd.org/~bmah/ThinkPad/</a>
                から
                <code class="filename">boot1</code> と
                <code class="filename">boot2</code>
                をダウンロードします。 これらのファイルは、
                あとで必要になった時、取り出せる場所に置いておきます。
              </p></li><li class="step"><p>ThinkPad に普通に FreeBSD をインストールします。
                ただし、<code class="literal">Dangerously Dedicated</code>
                モードを使っては<span class="emphasis"><em>いけません</em></span>。
                また、インストールが終わっても再起動しては<span class="emphasis"><em>いけません</em></span>。</p></li><li class="step"><p>
                <span class="quote">「<span class="quote">緊急ホログラフィックシェル (Emergency Holographic Shell)</span>」</span>
                (<span class="keycap"><strong>ALT</strong></span>+<span class="keycap"><strong>F4</strong></span>)
                に切り替えるか、<span class="quote">「<span class="quote">fixit</span>」</span> シェルを起動します。
              </p></li><li class="step"><p>
                <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> を使って FreeBSD のパーティション ID を
                <code class="literal">165</code> から <code class="literal">166</code> に
                変更します (これは OpenBSD で使われているものです)。
              </p></li><li class="step"><p>
                <code class="filename">boot1</code> と
                <code class="filename">boot2</code>
                のファイルをローカルファイルシステムに持って来ます。
              </p></li><li class="step"><p>
                <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a> を使って
                <code class="filename">boot1</code> と
                <code class="filename">boot2</code> を
                FreeBSD のスライスに書き込みます。
              </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>disklabel -B -b boot1 -s boot2 ad0sn</code></strong></pre><p>
                <em class="replaceable"><code>n</code></em> は、
                あなたが FreeBSD をインストールしたスライスの番号です。
              </p></li><li class="step"><p>
                再起動します。起動プロンプトは <code class="literal">OpenBSD</code>
                と示しますが、実際には、それで FreeBSD が起動します。
              </p></li></ol></div><p>
            この方法で FreeBSD と OpenBSD
            をデュアルブートする方法は、読者への練習問題としましょう。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77096016"></a><a id="install-bad-blocks"></a><p><strong>1.10.</strong></p></td><td align="left" valign="top"><p>不良ブロックのあるディスクにインストールできますか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>FreeBSD 3.0 以前のシステムでは、
            不良ブロックを自動的に再マッピングする
            <code class="command">bad144</code> というユーティリティが含まれていましたが、
            現在の IDE ドライブはドライブ自身がこの機能を備えているため、
            <code class="command">bad144</code> は FreeBSD ソースツリーから削除されました。
            FreeBSD 3.0 かそれ以降をインストールしたいと思っているなら、
            比較的新しいディスクドライブを購入することを強くおすすめします。
            新しいドライブを購入する気がなければ、FreeBSD 2.x を利用するべきです。</p><p>現在の IDE ドライブで不良ブロックによるエラーが発生した場合、
            まもなくドライブが故障する可能性があります
            (それはそのドライブ内蔵の再マッピング機能では
            不良ブロックが修正できなくなったということであり、
            ディスクがひどく壊れていることを意味します)。
            新しいハードディスクドライブに交換しましょう。</p><p>不良ブロックのある SCSI ドライブの場合は、
            <a class="link" href="troubleshoot.html#awre" title="3.1.">この回答</a>を参照してください。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77112784"></a><a id="boot-floppy-strangeness"></a><p><strong>1.11.</strong></p></td><td align="left" valign="top"><p>インストーラから起動したら変なことになりました!</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            インストーラから起動しようとしたときに、マシンが固まってし
            まうとか自然と再起動してしまうといった現象であれば、
            次の三つの項目を確認してください。
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>新品の、フォーマットしたての、
                エラーのないフロッピーディスクを使っていますか?
                (三年間もベッドの下に放置されていた雑誌の付録みたいなやつではなくて、
                買ってきたばかりの新品を使ってください)
              </p></li><li class="listitem"><p>フロッピーイメージをバイナリモードでダウンロードしましたか?
                (困った顔をしないでください。私たちの中で一番優秀な人でさえ、
                少なくとも一回はバイナリファイルを
                ASCII モードで思いがけずダウンロードしたことがあるのです!)
              </p></li><li class="listitem"><p>Windows95 あるいは Windows98 を使用しているなら、
                ありのままの本物の DOS で
                <code class="command">fdimage</code> か
                <code class="command">rawrite</code> を実行しましたか?
                これらの OS はディスク作成プログラムのような、
                ハードウェアに直接書き込みを行なうプログラムに干渉する可能性があります。
                GUI の中の DOS シェル内部で動作している場合でも、
                この問題は発生します。</p></li></ol></div><p>また、Netscape
            でブートイメージをダウンロードする場合も問題があることが報告されていますので、
            できれば別の FTP クライアントを使うのがよいでしょう。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77141968"></a><a id="no-install-cdrom"></a><p><strong>1.12.</strong></p></td><td align="left" valign="top"><p>ATAPI CD-ROM から起動したのですが、
            インストールプログラムは CD-ROM が見つかりませんと言ってきます。
            CD-ROM はどこに行ってしまったのでしょうか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>この問題は通常、CD-ROM ドライブの設定ミスによって発生します。
            大部分の PC の CD-ROM ドライブは、
            セカンダリ側の IDE
            コントローラのスレーブデバイスとして接続され、
            マスタデバイスがない状態で出荷されています。
            この接続方法は ATAPI 規格違反なので、
            Windows は規格どおりに動いたり、動かなかったりしますが、
            BIOS は起動時に規格違反を無視します。
            そのため BIOS は起動時に CD-ROM を見つけられますが、
            FreeBSD は CD-ROM を見つけられず、
            インストールを完了できないのです。</p><p>CD-ROM が 接続されている
            IDE コントローラのマスタデバイスとなるように設定するか、
            もしくはマスタ、
            スレーブの両方にデバイスが接続されているようにシステムを再構成してください。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77146960"></a><a id="cannot-install-tape"></a><p><strong>1.13.</strong></p></td><td align="left" valign="top"><p>あれれ? テープからインストールできません!</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            FreeBSD 2.1.7R をテープからインストールする場合、
            tar ブロックサイズを 10 (5120 バイト)
            にしたテープを作る必要があります。
            デフォルト の tar ブロックサイズは 20 (10240 バイト) で、
            このデフォルトサイズで作られたテープでは FreeBSD 2.1.7R
            をインストールすることはできません。
            もしこうしたテープを使うと、
            レコードサイズが大きすぎるというエラーが起きることになります。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77151952"></a><a id="parallel-connect"></a><p><strong>1.14.</strong></p></td><td align="left" valign="top"><p>PLIP 経由で二つ FreeBSD box を接続したいのですが</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Laplink パラレルケーブルを用意して、
            両方の PC のカーネルに <code class="filename">lpt</code>
            ドライバが組み込まれていることを確認してください。
          </p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>dmesg | grep lp</code></strong>
lpt0 at 0x378-0x37f irq 7 on isa
lpt0: Interrupt-driven port
lp0: TCP/IP capable interface</pre><p>
            パラレルインタフェースに Laplink
            パラレルケーブルを接続します。
          </p><p>
            <code class="systemitem">root</code>
            になって、両方で <code class="filename">lp0</code>
            のネットワークインタフェースパラメータを設定します。
            たとえば、ホスト <code class="systemitem">max</code> と <code class="systemitem">moritz</code> を接続したい場合、
          </p><pre class="programlisting">                max &lt;-----&gt; moritz
IP Address      10.0.0.1        10.0.0.2</pre><p>max 側で次のようにして、</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig lp0 10.0.0.1 10.0.0.2</code></strong></pre><p>moritz 側で同様に次のようにします。</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig lp0 10.0.0.2 10.0.0.1</code></strong></pre><p>以上です!
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lp</span>(4)</span></a> と <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lpt</span>(4)</span></a>
            のマニュアルページも参照してください。
          </p><p>また、
            <code class="filename">/etc/hosts</code> にホストの追加もしましょう。
          </p><pre class="programlisting">127.0.0.1               localhost.my.domain localhost
10.0.0.1                max.my.domain max
10.0.0.2                moritz.my.domain moritz</pre><p>
            動作確認は次のようにします。
          </p><p><code class="systemitem">max</code> 側:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig lp0</code></strong>
lp0: flags=8851&lt;UP,POINTOPOINT,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 10.0.0.1 --&gt; 10.0.0.2 netmask 0xff000000</pre><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>netstat -r</code></strong>
Routing tables

Internet:
Destination        Gateway            Flags     Refs     Use     Netif Expire
moritz              max              UH          4   127592       lp0</pre><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ping -c 4 moritz</code></strong>
PING moritz (10.0.0.2): 56 data bytes
64 bytes from 10.0.0.2: icmp_seq=0 ttl=255 time=2.774 ms
64 bytes from 10.0.0.2: icmp_seq=1 ttl=255 time=2.530 ms
64 bytes from 10.0.0.2: icmp_seq=2 ttl=255 time=2.556 ms
64 bytes from 10.0.0.2: icmp_seq=3 ttl=255 time=2.714 ms

--- moritz ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max/stddev = 2.530/2.643/2.774/0.103 ms</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77208528"></a><a id="install-PLIP"></a><p><strong>1.15.</strong></p></td><td align="left" valign="top"><p>ラップトップ PC に PLIP 経由でインストールできますか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            次のようにして、二つのコンピュータを Laplink
            パラレルケーブルで接続してください。
          </p><div class="table"><a id="idp77246032"></a><div class="table-title">表1.1 ネットワーク接続用のパラレルケーブルの結線</div><div class="table-contents"><table summary="ネットワーク接続用のパラレルケーブルの結線" border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>A-name</th><th>A 側</th><th>B 側</th><th>説明</th><th>ポート / ビット</th></tr></thead><tbody><tr><td><div class="literallayout"><p>DATA0<br />
-ERROR</p></div></td><td><div class="literallayout"><p>2<br />
15</p></div></td><td><div class="literallayout"><p>15<br />
2</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x01<br />
1/0x08</p></div></td></tr><tr><td><div class="literallayout"><p>DATA1<br />
+SLCT</p></div></td><td><div class="literallayout"><p>3<br />
13</p></div></td><td><div class="literallayout"><p>13<br />
3</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x02<br />
1/0x10</p></div></td></tr><tr><td><div class="literallayout"><p>DATA2<br />
+PE</p></div></td><td><div class="literallayout"><p>4<br />
12</p></div></td><td><div class="literallayout"><p>12<br />
4</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x04<br />
1/0x20</p></div></td></tr><tr><td><div class="literallayout"><p>DATA3<br />
-ACK</p></div></td><td><div class="literallayout"><p>5<br />
10</p></div></td><td><div class="literallayout"><p>10<br />
5</p></div></td><td>Strobe</td><td><div class="literallayout"><p>0/0x08<br />
1/0x40</p></div></td></tr><tr><td><div class="literallayout"><p>DATA4<br />
BUSY</p></div></td><td><div class="literallayout"><p>6<br />
11</p></div></td><td><div class="literallayout"><p>11<br />
6</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x10<br />
1/0x80</p></div></td></tr><tr><td>GND</td><td>18-25</td><td>18-25</td><td>GND</td><td>-</td></tr></tbody></table></div></div><br class="table-break" /><p>また、
            <a class="link" href="preface.html#pao">Mobile Computing
              についてのページ</a>もご覧ください。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77326160"></a><a id="geometry"></a><p><strong>1.16.</strong></p></td><td align="left" valign="top"><p>ハードディスクドライブには、
            どのジオメトリを使うべきでしょうか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">ここでディスクの「ジオメトリ」とは、ディスクのシリンダ、ヘッダ、
                トラック当りのセクタの数を意味しています - 便宜上、
                C/H/S とすることにします。これはディスクのどの領域で読み書きを
                行なうかを PC の BIOS が決定する手段となります。</p></div><p>
            これについてはある理由のために、誤解されている点が多いようです。
            まず最初に、FreeBSD はディスクブロックで動作しているため、
            SCSI ドライブの <span class="quote">「<span class="quote">物理的</span>」</span> なジオメトリという言い方は、
            まったく見当違いのものです。事実、
            セクタの密度はディスクによってまちまちであるため、
            物理的なジオメトリというものは存在しません。
            製造者が <span class="quote">「<span class="quote">本当の</span>」</span> 物理的なジオメトリと公表しているものは通常、
            彼らが検査して得た最小の使用不可容量の結果のジオメトリのことです。
            IDE の場合、FreeBSD は C/H/S で動作しますが、
            最近のドライブはすべて、これを内部で参照するブロックに変換しています。
          </p><p>
            問題はとなるのは<span class="emphasis"><em>論理的な</em></span>ジオメトリです。
            これは BIOS がそのディスクのジオメトリについて調べた際に取得されるものであり、
            その後のディスクへのアクセスに使用します。
            FreeBSD は起動時に BIOS を使用するため、
            これを正しく取得することは非常に重要なことなのです。
            実際に、ディスク上に複数のオペレーティングシステムがある場合は、
            ジオメトリはどこからでも同じように解釈される必要があります。
            そうしないと、起動時に深刻な問題が発生します。
          </p><p>
            SCSI ディスクでは、
            使用するジオメトリはコントローラの拡張 BIOS
            トランスレーション (<span class="quote">「<span class="quote">&gt;1GB の
            DOS ディスクドライブのサポート</span>」</span>
            とも呼ばれます) が有効になっているかどうかによります。
            無効になっている場合、N シリンダ、64 ヘッド、
            32 セクタ/トラックを使用しますが、
            ここで `N' は MB 単位のディスク容量です。
            たとえば、2GB ディスクは見かけ上 2048 シリンダ、64 ヘッド、
            32 セクタ/トラックとなります。
          </p><p>
            それが「有効」になっており (MS-DOS
            ではこの方法で、ある制限を回避する場合もあります)、
            ディスク容量が 1GB を越える場合は、M シリンダ、
            63 セクタ/トラック (64 「ではなく」)、
            255 ヘッドを使用します。
            `M' は MB 単位のディスク容量を 7.844238(!)
            で割った値となります。
            ということで、2GB ディスクの例では、
            261 シリンダ、63 セクタ/トラック、255 ヘッドとなります。
            (訳注: 以上は Adaptec 社と NCR 社製の SCSI アダプタの場合です。
            SCSI アダプタによって変換の数値が変わってくるのでマニュアルを
            参照してください)。
          </p><p>
            これについてよく分からない場合や
            FreeBSD がインストール中に正しくジオメトリを取得できない場合、
            これを回避するもっとも簡単な方法は、
            ディスクに小さな DOS パーティションを作ることです。
            そうすると正しいジオメトリが取得されるはずです (そして、
            残しておきたくないとか、
            ネットワークカードのプログラミング用に使いたい場合などには、
            いつでもパーティションエディタで DOS
            パーティションを削除することができます)。
          </p><p>
            もう一つの方法として、FreeBSD
            と一緒に配布されているフリーで使えるユーティリティに
            <code class="filename">pfdisk.exe</code>
            (FreeBSD CD-ROM の <code class="filename">tools</code>
            ディレクトリや、他のさまざまな FTP
            サイトにあります)と呼ばれるものがあり、
            ディスク上の他のオペレーティングシステムが使用している
            ジオメトリを調べるのに役立ちます。
            このジオメトリ情報は、
            パーティションエディタに入力することができます。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77342928"></a><a id="disk-divide-restrictions"></a><p><strong>1.17.</strong></p></td><td align="left" valign="top"><p>ディスクの分割の仕方で何か制限はありますか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            はい。
            BIOS がカーネルを起動できるようにルートパーティションが
            1024 シリンダ以内にあることを確認する必要があります (これは
            FreeBSD ではなく PC の BIOS の制限です)。
          </p><p>
            SCSI ドライブでは、通常はルートパーティションが最初の 1024MB
            に収まっていることが前提となります (または拡張 BIOS
            トランスレーションが有効になっている場合は最初の 4096MB -
            他の質問をご覧ください)。IDE でそれに相当する値は 504MB
            となります (訳注: E-IDE
            対応の BIOS 搭載マシンの場合は
            IDE の 504MB という制限はありません)。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77348688"></a><a id="disk-manager"></a><p><strong>1.18.</strong></p></td><td align="left" valign="top"><p>大容量ディスクを持っていますが、ディスクマネージャは使えますか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            FreeBSD は Ontrack Disk Manager を認識し、これを考慮にいれます。
            他のディスクマネージャはサポートしません。
          </p><p>
            ディスク全体を FreeBSD で使いたい場合、
            ディスクマネージャは必要ありません。
            BIOS が扱える容量 (通常 504MB) いっぱいでディスクの設定を行なうと、
            FreeBSD は実際の容量を算出するはずです。
            MFM コントローラ付きの古いディスクを使っている場合は、
            FreeBSD に使用するシリンダ数を詳細に指定する必要があります。
          </p><p>
            FreeBSD
            と他のオペレーティングシステムが入っているディスクを使用したい場合は、
            ディスクマネージャなしでもできるでしょう。
            FreeBSD
            の起動パーティションと他のオペレーティングシステム用のスライスが、
            最初の 1024 シリンダ内に収まっている事を確認するだけです。
            気になる方は、起動パーティションを 20
            メガバイトぐらいにして大きめにするとよいでしょう。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77367760"></a><a id="missing-os"></a><p><strong>1.19.</strong></p></td><td align="left" valign="top"><p>FreeBSD の起動時に
            <code class="literal">Missing Operating System</code>
            と表示されます</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            これは FreeBSD や DOS、
            そのほかの OS がディスク領域<a class="link" href="install.html#geometry" title="1.16.">ジオメトリ</a>
            のとらえ方で衝突しあっていることから起こる典型的な例です。
            こうなったら FreeBSD
            をインストールし直す以外にはありませんが、
            他のところで説明した手順にしたがってやれば、
            ほぼ間違いなくうまくいくはずです。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77375440"></a><a id="stop-at-boot-manager"></a><p><strong>1.20.</strong></p></td><td align="left" valign="top"><p>ブートマネージャの <code class="literal">F?</code> プロンプトが表示されません。</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            これはすでに前に質問されている問題のもう一つの症状です。
            BIOS のジオメトリと FreeBSD のジオメトリ設定が一致していないのです!
            コントローラや BIOS がシリンダの変換 (<code class="literal">&gt;1GB ドライブの
            サポート</code>とも呼ばれます) をサポートしていたら、
            その設定を無効化して FreeBSD をインストールし直してみてください。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77381840"></a><a id="need-complete-sources"></a><p><strong>1.21.</strong></p></td><td align="left" valign="top"><p>ソースを全部インストールする必要はありますか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            一般的には「いいえ」です。
            しかし最低でも、<code class="literal">base</code>
            ソースキット (これにはこの FAQ
            で述べられているファイルのいくつかが含まれています) と、
            <code class="literal">sys</code> (kernel)
            ソースキット (これにはカーネルのソースが含まれています)
            をインストールする事を強くおすすめします。
            通常、何かの実行にソースが必要になる事はありません。
            しかし、カーネルをコンフィグレーションするためのプログラム <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a>
            を実行する時は例外です。
            カーネルのソースをインストールしなくてもよい例として、
            どこか別の場所からカーネルのソースを読み込み専用で NFS
            マウントすることができます。また、
            そこから新しいバイナリを作成できるようにもなっています
            (カーネルソースの制限があるので、直接 <code class="filename">/usr/src</code>
            をマウントする事はおすすめできません。
            それよりもどこか別のディレクトリにマウントして、
            ソースツリーの複製ができるように適切にシンボリックリンクを張ってください)。
          </p><p>
            ソースをネットワーク上に持ち、
            そこからシステムをビルドするようにしておけば、
            FreeBSD の将来のリリースへのアップグレードがずっと簡単になります。
          </p><p>
            実際にソースのサブセットを選択するには、
            システムインストールツールの「配布ファイル」メニューにある、
            「カスタム」メニューを使用します。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77393872"></a><a id="need-kernel"></a><p><strong>1.22.</strong></p></td><td align="left" valign="top"><p>カーネルは必ず作り直さなくちゃならないんですか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            カーネルを新しく作り直すのは元々、
            FreeBSD のインストール時に必須の作業でした。
            でも最近のリリースでは、
            とてもユーザフレンドリなカーネル設定ツールの恩恵を受けています。
            FreeBSD の起動プロンプト (boot:) で <code class="option">-c</code>
            とタイプすればビジュアルな設定画面になり、
            ほとんどの一般的な ISA
            カードについてのカーネルの設定をすることができるのです。
          </p><p>
            今でも、
            必要なデバイスドライバだけを組み込んだカーネルを作ることはよい事とされています。
            ほんのちょっとだけメモリを節約できますからね。
            でもほとんどのシステムでは、
            もはやどうしてもやらなくちゃならないことではないのです。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77400144"></a><a id="password-encryption"></a><p><strong>1.23.</strong></p></td><td align="left" valign="top"><p>DES と MD5、どちらのパスワードを使うべきなのでしょうか?
            また、ユーザがどちらを使うことになるか指定する方法はありますか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>FreeBSD の標準のパスワードフォーマットは
            <span class="emphasis"><em>MD5</em></span> を使ったものです。 これは
            <span class="emphasis"><em>DES</em></span> アルゴリズムに基づいた手法を用いる
            UNIX の伝統的なパスワードフォーマットより安全 (secure) だと
            信じられているものです。 DES パスワードは
            あなたが FreeBSD のパスワードファイルを、
            安全性に劣るパスワードフォーマットを利用している古い OS
            と共有しなければならなくなったときのために
            利用可能になっています (これは利用するためには、
            sysinstall から <span class="quote">「<span class="quote">crypto</span>」</span> 配布物のインストール
            選ぶか、ソースから build しているなら、
            crypto のソースがインストールされている必要があります)。
            新しいパスワードにどちらのパスワードフォーマットを使うかは
            <code class="filename">/etc/login.conf</code> の中の
            <span class="quote">「<span class="quote">passwd_format</span>」</span> という login
            ケーパビリティで制御されます。このケーパビリティは
            <span class="quote">「<span class="quote">des</span>」</span> (利用できるなら) か
            <span class="quote">「<span class="quote">md5</span>」</span> のどちらかの値を取ります。
            login ケーパビリティの詳細については <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> を
            参照してください。</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77421520"></a><a id="boot-floppy-hangs"></a><p><strong>1.24.</strong></p></td><td align="left" valign="top"><p>ブートフロッピーで起動すると、
            <code class="literal">Probing Devices...</code>
            の画面でハングアップします。</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            IDE Zip か Jaz ドライブが接続されていたら、
            それを取り外してもう一度試してみましょう。
            ブートフロッピーはこの種のドライブを誤認してしまうのです。
            システムがインストールされた後は、そのドライブを再度接続することができます。
            うまくいけばこの問題は将来のリリースで解決されるでしょう。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77427536"></a><a id="panic-on-install-reboot"></a><p><strong>1.25.</strong></p></td><td align="left" valign="top"><p>インストール終了後にシステムを再起動すると、
            <code class="literal">panic: cant mount root</code>
            のエラーとなります。</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            このエラーはディスクデバイスについて、
            起動ブロックとカーネルの認識が混乱しているために起こります。
            このエラーは通常、
            2 台の IDE ディスクがそれぞれ別の IDE
            コントローラのマスターに一つずつ接続されているシステムにおいて、
            FreeBSD がセカンダリ IDE
            コントローラに接続されたディスクにインストールされている場合に発生します。
            起動ブロックは FreeBSD が
            wd1 (2 台目の BIOS
            ディスク) にインストール
            されていると認識するのに対し、
            カーネルはセカンダリ IDE の 1 台目のハードディスクである
            wd2
            にインストールされていると認識するのです。
            デバイス検出後で、
            カーネルは起動ブロックが起動ディスクだと認識したディスクである
            wd1 をマウントしようとします。
            しかし、実際には起動ディスクは
            wd2 なので失敗してしまうのです。
          </p><p>
            この問題を解決するには、以下のどれか一つを行ってください。
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>FreeBSD 3.3 以降を利用している場合には、
                システムを再起動して、<code class="literal">Booting kernel in 10 seconds; hit
                  [Enter] to interrupt</code>
                が表示されている間に <code class="literal">Enter</code> キーを押します。
                すると、ブートローダに移行します。
              </p><p>そうしたら、<code class="literal">set
                  root_disk_unit="disk_number"</code>
                と入力します。 FreeBSD が最初の IDE
                コントローラのマスターに接続されたドライブにインストールされていれば、
                <em class="replaceable"><code>disk_number</code></em> は
                <code class="literal">0</code> です。
                また、
                最初の IDE コントローラのスレーブなら <code class="literal">1</code>、
                二番目の IDE コントローラのマスターなら <code class="literal">2</code>、
                二番目の IDE コントローラのスレーブなら <code class="literal">3</code> になります。
              </p><p>その後、<code class="literal">boot</code> と入力します。
                システムはきちんと再起動するはずです。</p><p>この変更を恒久的なものにする (つまり、
                再起動や電源を入れる度にこの操作をする必要がないようにする) には、
                <code class="filename">/boot/loader.conf.local</code> に
                <code class="literal">root_disk_unit="disk_number"</code>
                という行を追加してください。</p></li><li class="listitem"><p>
                FreeBSD 3.2 以前を利用している場合は、
                Boot: プロンプトで
                <code class="literal">1:wd(2,a)kernel</code>
                と入力してエンターキーを押します。
                システムが起動したら、

                <code class="command">echo "1:wd(2,a)kernel" &gt; /boot.config</code>

                というコマンドを実行してこれをデフォルトのブート文字列とします。
              </p></li><li class="listitem"><p>FreeBSD のディスクをプライマリ IDE コントローラに接続して、
                ハードディスクが連続したドライブ番号で認識されるようにします。
              </p></li><li class="listitem"><p>カーネルのコンフィグレーションファイルで wd
                の行を以下のように変更し、
                <a class="link" href="../handbook/kernelconfig.html" target="_top">カーネルの再構築</a>を行って、
                新しいカーネルをインストールします。</p><pre class="programlisting">controller      wdc0    at isa? port "IO_WD1" bio irq 14 vector wdintr
disk            wd0     at wdc0 drive 0
# disk            wd1     at wdc0 drive 1 # この行をコメントアウト

controller      wdc1    at isa? port "IO_WD2" bio irq 15 vector wdintr
disk            wd1     at wdc1 drive 0 # wd2 から wd1 へ変更
disk            wd2     at wdc1 drive 1 # wd3 から wd2 へ変更</pre><p>ディスクの接続を変更して元の設定に戻したい場合は、ディスクを
                お望みの設定の通りの接続に戻してから再起動します。
                システムは正常に起動するはずです。</p></li></ol></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77467856"></a><a id="memory-limits"></a><p><strong>1.26.</strong></p></td><td align="left" valign="top"><p>メモリの大きさの制限は?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            認識できるメモリの上限は、4GB です。
            この構成は試験済みで、
            詳細は <a class="link" href="ftp://ftp.cdrom.com/archive-info/configuration" target="_top">wcarchive's
              configuration</a> をご覧ください。
            このようにたくさんのメモリをマシンに導入しようという場合には、
            注意が必要です。ECC 機能をサポートし、なおかつ
            容量性負荷 (訳注: 多くのメモリ素子は容量性負荷として働きますが、
            メモリバス上に容量性負荷が増えると信号の伝達が遅れ、誤動作の原因となります) を
            低減させるため、18 チップ構成のメモリモジュールより
            9 チップ構成のメモリモジュールを選択することが、おそらく望ましいでしょう。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77473872"></a><a id="ffs-limits"></a><p><strong>1.27.</strong></p></td><td align="left" valign="top"><p>ffs ファイルシステムの大きさの制限は?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            ffs ファイルシステムの場合、
            論理的な最大の上限は 8 TB (2G ブロック)、
            デフォルトのブロックサイズを 8K とすると 16 TBとなります。
            実際問題として、1 TB のソフトウェアの限界がありますが、
            修正すれば 4 TB のファイルシステムが可能です (実際に存在します)。
          </p><p>一つの ffs のファイルの最大のサイズは、ブロックサイズが 4K の場合で
            約 1G ブロック (4 TB)です。</p><div class="table"><a id="idp77479248"></a><div class="table-title">表1.2 最大ファイルサイズ</div><div class="table-contents"><table summary="最大ファイルサイズ" border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>fs ブロックサイズ</th><th>2.2.7-stable</th><th>3.0-current</th><th>動作確認済みのサイズ</th><th>動作するはずのサイズ</th></tr></thead><tbody><tr><td>4K</td><td>4T-1</td><td>4T-1</td><td>4T-1</td><td>&gt;4T</td></tr><tr><td>8K</td><td>&gt;32G</td><td>8T-1</td><td>&gt;32G</td><td>32T-1</td></tr><tr><td>16K</td><td>&gt;128G</td><td>16T-1</td><td>&gt;128G</td><td>32T-1</td></tr><tr><td>32K</td><td>&gt;512G</td><td>32T-1</td><td>&gt;512G</td><td>64T-1</td></tr><tr><td>64K</td><td>&gt;2048G</td><td>64T-1</td><td>&gt;2048G</td><td>128T-1</td></tr></tbody></table></div></div><br class="table-break" /><p>
            fs ブロックサイズが 4K の場合は三重間接ブロックが使用され、
            いずれの場合でも三重間接ブロックを使用して表現できる最大の
            fs ブロック番号 (およそ 1K^3 + 1K^2 + 1K) に制限されるはずなのですが、
            実際は fs ブロック番号の (間違った) 上限 1G-1 で制限されます。
            fs ブロック番号の制限は 2G-1 となるはずです。2G-1 付近に
            fs ブロック番号のバグが多少ありますが、fs ブロックサイズが
            4K の場合は、ここまでのブロック番号には到達しません。
          </p><p>
            ブロックサイズが 8K 以上の場合、いずれの場合も
            fs ブロック番号の上限 2G-1 で制限されるはずですが、
            実際は fs ブロック番号の上限
            1G-1 で制限されます。
            例外的に -STABLE では三重間接ブロックまでは到達しないため、
            制限は二重間接ブロックで表現できる最大の
            fs ブロック番号 (およそ (blocksize/4)^2 + (blocksize/4)) となります。
            -CURRENT ではこの制限を超えると問題を引き起こすかもしれません。
            正しい制限値である 2G-1 ブロックを使用すると明らかに問題が出ます。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77539536"></a><a id="tb-on-floppy"></a><p><strong>1.28.</strong></p></td><td align="left" valign="top"><p>フロッピーに 1 TB のファイルを格納するには?</p><p><span class="emphasis"><em>寄稿: Bruce Evans、1998 年 9 月</em></span></p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
            わたしのところでは、
            フロッピーにいくつかの実際のファイルを保存しています :-)。
            最大のファイルサイズは最大のディスクサイズとはあまり関係はありません。
            最大のディスクサイズは 1 TB です。
            ファイルサイズがディスクサイズより大きくなりうるというのは仕様です。
          </p><p>
            以下の例は、32K のディスク容量 (3
            つの間接ブロックと 1 つのデータブロック) を使って、
            小さなルートパーティションに
            8T-1 の大きさのファイルを作成します。
            ここでの dd コマンドは大きなファイルが扱えるものが必要です。
          </p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cat foo</code></strong>
df .
dd if=/dev/zero of=z bs=1 seek=`echo 2^43 - 2 | bc` count=1
ls -l z
du z
df .
<code class="prompt">%</code> <strong class="userinput"><code>sh foo</code></strong>
Filesystem  1024-blocks     Used    Avail Capacity  Mounted on
/dev/da0a         64479    27702    31619    47%    /
1+0 records in
1+0 records out
1 bytes transferred in 0.000187 secs (5346 bytes/sec)
-rw-r--r--  1 bde  bin  8796093022207 Sep  7 16:04 z
32      z
Filesystem  1024-blocks     Used    Avail Capacity  Mounted on
/dev/da0a         64479    27734    31587    47%    /</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77546064"></a><a id="archsw-readin-failed-error"></a><p><strong>1.29.</strong></p></td><td align="left" valign="top"><p>新しいカーネルをコンパイルしたら、起動時に
            <code class="literal">archsw.readin.failed</code>
            というエラーメッセージが表示されるようになってしまいました。</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>ローダがスタートする前の | が表示されているときに何かキーを押すことで、
            起動のセカンドステージから直接、起動するカーネルを指定して起動することができます。
            特に、カーネルのソースを更新し、<span class="emphasis"><em>make world
              しないで</em></span>新しいカーネルだけインストールした場合にこの症状が現われます。
            こういう操作は動作が保証されません。きちんと make world してください。
          </p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp77548880"></a><a id="upgrade-3x-4x"></a><p><strong>1.30.</strong></p></td><td align="left" valign="top"><p>3.X から 4.X にアップグレードするにはどうしたら良いのですか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>アップグレードには、
            バイナリスナップショットを使うことを<span class="emphasis"><em>強く</em></span>おすすめします。
            4-STABLE スナップショットは
            <a class="link" href="ftp://releng4.FreeBSD.org/" target="_top">releng4.FreeBSD.org</a>
            から入手可能です。</p><p>ソースを使ってアップグレードする場合は、詳細について
            <a class="link" href="http://www.FreeBSD.org/handbook/cutting-edge.html" target="_top">FreeBSD
              ハンドブック</a>を参照するようにしてください。</p><div xmlns="" class="caution"><h3 class="admontitle">注意: </h3><p xmlns="http://www.w3.org/1999/xhtml">ソースを使ったアップグレードは、
            慣れていないユーザにはまったくおすすめできません。
            3.X から 4.X への場合は特にそうです。
            ソースを使ったアップグレードを試す前に、
            手順を注意深く読むように心がけてください。</p></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp79990736"></a><a id="security-profiles"></a><p><strong>1.31.</strong></p></td><td align="left" valign="top"><p><span class="quote">「<span class="quote">セキュリティプロファイル</span>」</span>
            (<span class="quote">「<span class="quote">security profiles</span>」</span>) とは何ですか?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><span class="quote">「<span class="quote">セキュリティプロファイル</span>」</span>とは、特定の
            プログラムやその他の設定を有効にしたり無効にすることで、求める
            比率で安全と便利さを実現しようとする構成の選択肢の集まりの
            ことです。セキュリティプロファイルが厳しいほど、デフォルトで
            有効になるプログラムが減ります。これは、動かさなければならない
            もの以外は、何も動かしてはいけないというセキュリティの
            基本的原則の一つです。</p><p>セキュリティプロファイルは、単にデフォルトの設定である
            ということに気をつけてください。FreeBSD をインストールした
            あとに <code class="filename">/etc/rc.conf</code> に適切な行を編集したり
            追加すれば、どのプログラムでも有効にしたり無効にしたりできます。
            後者について詳しいことは <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> のマニュアルを
            ご覧ください。</p><p>以下に、各セキュリティプロファイルが何を行うかを説明した
            表を掲載します。列はセキュリティプロファイルの選択肢で、行は
            有効または無効になるプログラムや機能です。</p><div class="table"><a id="idp79999696"></a><div class="table-title">表1.3 指定できるセキュリティプロファイル</div><div class="table-contents"><table summary="指定できるセキュリティプロファイル" border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>〓</th><th>Extreme</th><th>High</th><th>Moderate</th><th>Low</th></tr></thead><tbody><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a></td><td>NO</td><td>NO</td><td>YES</td><td>YES</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a></td><td>NO</td><td>YES</td><td>YES</td><td>YES</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a></td><td>NO</td><td>YES</td><td>YES</td><td>YES</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portmap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portmap</span>(8)</span></a></td><td>NO</td><td>NO</td><td>おそらく (インストール時に、すでにマシンを
                      NFS クライアントまたはサーバとして設定していると、
                      ポートマッパが有効になります。)
                  </td><td>YES</td></tr><tr><td>NFS server</td><td>NO</td><td>NO</td><td>YES</td><td>YES</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=securelevel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">securelevel</span>(8)</span></a></td><td>YES (2) (securelevel を設定するセキュリティプロファイル
                      (Extreme または High) を選択する場合、その影響を
                      承知していなければなりません。<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> のマニュアルを
                      読み、セキュリティレベルの意味について特に注意を
                      払ってください。そうしないと、後で深刻な問題が
                      起きるかもしれません。)
                    </td><td>YES (1)</td><td>NO</td><td>NO</td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="warning"><h3 class="admontitle">警告: </h3><p xmlns="http://www.w3.org/1999/xhtml">セキュリティプロファイルは魔法の薬ではありません。
                High に設定したら、適当な <a class="link" href="../handbook/eresources.html#ERESOURCES-MAIL" target="_top">
                メーリングリスト</a>を読んだり、良質なパスワードや
                パスフレーズを用いたり、セキュリティについてのよい習慣を
                守ったりしなくていいわけではありません。求めるセキュリティと
                便利さの比率を手軽に設定してくれるだけです。</p></div><div xmlns="" class="note"><h3 class="admontitle">注記: </h3><p xmlns="http://www.w3.org/1999/xhtml">セキュリティプロファイルの機構は、FreeBSD を最初に
                インストールする時に使うことを想定しています。すでに
                FreeBSD がインストールされているなら、単に求める機能を
                有効にしたり無効にしたりする方が、おそらく効率が
                よいでしょう。もし、本当にセキュリティプロファイルを
                使いたいのであれば、<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> を再実行すれば
                設定できます。</p></div></td></tr></tbody></table></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp76987216" class="footnote"><p><a href="#idp76987216" class="para"><sup class="para">[1] </sup></a>これは Keith Frechette
          <code class="email">&lt;<a xmlns="" class="email" href="mailto:kfrechet@us.ibm.com">kfrechet@us.ibm.com</a>&gt;</code> からのメールによります。</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="preface.html">戻る</a>〓</td><td width="20%" align="center">〓</td><td width="40%" align="right">〓<a accesskey="n" href="hardware.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">まえがき〓</td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top">〓第2章 ハードウェアコンパチビリティ</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>本文書、および他の文書は
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a>
    からダウンロードできます。</small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>FreeBSD に関する質問がある場合には、
    <a href="http://www.FreeBSD.org/ja/docs.html">ドキュメント</a> を読んだ上で
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt; まで (英語で) 連絡してください。<br></br>
    本文書に関する質問については、
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt; まで電子メールを (英語で) 送ってください。</small></p></body></html>