<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>28.6. Komolyabb témák</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="mail.html" title="28. fejezet - Elektronikus levelezés" /><link rel="prev" href="mail-trouble.html" title="28.5. A hibák elhárítása" /><link rel="next" href="SMTP-UUCP.html" title="28.7. SMTP és az UUCP" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">28.6. Komolyabb témák</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mail-trouble.html">Vissza</a> </td><th width="60%" align="center">28. fejezet - Elektronikus levelezés</th><td width="20%" align="right"> <a accesskey="n" href="SMTP-UUCP.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-advanced"></a>28.6. Komolyabb témák</h2></div></div></div><p>A következõ szakaszban szóba kerülnek
      olyan komolyabb témák, mint például a
      levelek konfigurációja és a levelezés
      beállítása az egész tartomány
      számára.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-config"></a>28.6.1. Alapvetõ beállítások</h3></div></div></div><a id="idp96420176" class="indexterm"></a><p>Alapból képesnek kell lennünk leveleket
	küldeni külsõ gépekre egészen
	addig, amíg az <code class="filename">/etc/resolv.conf</code>
	állomány a megfelelõ
	beállításokat tartalmazza vagy egy
	saját névszervert futtatunk.  Ha
	szeretnénk, hogy a gépünkre
	érkezõ levelek elérjék a FreeBSD-s
	gépünkön futó
	levéltovábbító
	ügynököt (például a
	<span class="application">sendmail</span> programot), akkor erre
	két módszer kínálkozik:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Futtassunk saját névszervert és
	    hozzunk létre magunknak egy tartományt.
	    Például <code class="systemitem">FreeBSD.org</code>.</p></li><li class="listitem"><p>Közvetlenül a gépünkre
	    küldessük a leveleket.  Ezt úgy
	    tehetjük meg, ha egybõl a
	    gépünkhöz tartozó DNS névre
	    küldetjük a leveleket.  Például az
	    <code class="systemitem">enyem.FreeBSD.org</code>
	    címre.</p></li></ul></div><a id="idp96425552" class="indexterm"></a><p>Függetlenül attól, hogy a fentiek
	közül melyik megoldást választjuk, a
	levelek csak akkor tudnak eljutni közvetlenül a
	gépünkre, ha állandó, statikus
	IP-címmel rendelkezünk (tehát nem dinamikus
	címmel, amit általában a
	betárcsázós PPP kapcsolatokhoz szoktak
	kiosztani).  Ha tûzfal mögött vagyunk, akkor
	valamilyen módon felénk kell
	irányítani az SMTP forgalmat is.  Ha
	közvetlenül a gépünkön akarjuk
	fogadni a leveleket, akkor a következõ kettõ
	közül az egyik mindenképpen kelleni fog:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Gondoskodjunk róla, hogy a hozzánk
	    tartozó DNS-ben (legkisebb sorszámú) MX
	    rekord<a id="idp96427216" class="indexterm"></a> a gépünk IP-címére
	    mutat.</p></li><li class="listitem"><p>Gondoskodjunk róla, hogy a hozzánk
	    tartozó DNS-ben nincs semmilyen MX rekord a
	    gépünkhöz.</p></li></ul></div><p>A fentiek közül bármelyik elég
	ahhoz, hogy közvetlenül a gépünkre
	érkezzen meg a levél.</p><p>Próbáljuk ki:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>hostname</code></strong>
enyem.FreeBSD.org
<code class="prompt">#</code> <strong class="userinput"><code>host enyem.FreeBSD.org</code></strong>
enyem.FreeBSD.org has address 204.216.27.XX</pre><p>Ha ezt látjuk, akkor minden gond nélkül
	lehet küldeni levelet a <code class="email">&lt;nevem@enyem.FreeBSD.org&gt;</code> a címre
	(feltételezve, hogy a <span class="application">sendmail</span>
	megfelelõen mûködik az <code class="systemitem">enyem.FreeBSD.org</code> címen).</p><p>Ha viszont ehhez hasonlót tapasztalunk:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>host enyem.FreeBSD.org</code></strong>
enyem.FreeBSD.org has address 204.216.27.XX
enyem.FreeBSD.org mail is handled (pri=10) by kozpont.FreeBSD.org</pre><p>A gépünkre (<code class="systemitem">enyem.FreeBSD.org</code>) küldött
	összes levelet a <code class="systemitem">kozpont</code> szedi össze
	ugyanazon felhasználói névvel ahelyett,
	hogy közvetlenül a gépünkre küldeni
	ezeket.</p><p>Az iménti adatokat a DNS szerver határozza
	meg.  A levelek továbbításával
	kapcsolatos információkat az
	<span class="emphasis"><em>MX</em></span> mint <span class="emphasis"><em>M</em></span>ail
	e<span class="emphasis"><em>X</em></span>change DNS-rekord tárolja.  Ha
	nincs ilyen MX rekord, akkor az IP-cím alapján
	közvetlenül az adott géphez kerül a
	levél.</p><p>Például a <code class="systemitem">freefall.FreeBSD.org</code> MX rekordja
	hajdanán így nézett ki:</p><pre class="programlisting">freefall		MX	30	mail.crl.net
freefall		MX	40	agora.rdrop.com
freefall		MX	10	freefall.FreeBSD.org
freefall		MX	20	who.cdrom.com</pre><p>Láthatjuk, hogy a <code class="systemitem">freefall</code>
	esetében több MX bejegyzés is szerepel.  A
	legalacsonyabb MX-számú gép fogja kapni az
	erre a címre beérkezõ leveleket, amennyiben
	elérhetõ.  Ha valamilyen okból nem
	érhetõ el, akkor helyette ideiglenesen a
	többiek (melyeket néha csak <span class="quote">"<span class="quote">tartalék
	MX-eknek</span>"</span> neveznek) veszik át a levelet és
	átadják a legalacsonyabb számúnak,
	amint az újra elérhetõvé
	válik.</p><p>A tartalék jelleggel megadott MX gépek akkor
	érnek ténylegesen valamit, ha teljesen
	máshonnan csatlakoznak az internethez.  Az internet
	szolgáltató vagy egy ismerõsünk
	gépe valószínûleg minden
	további nélkül segít ennek
	megoldásában.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-domain"></a>28.6.2. Egy egész tartomány leveleinek
	kezelése</h3></div></div></div><p>Egy levelezõ szerver
	beállításához valahogy meg kell
	tudnunk oldalni, hogy a különbözõ
	munkaállomásokra küldött levelek
	közvetlenül hozzá fussanak be.  Alapvetõen
	tehát arról lenne szó, hogy a
	tartományunkon (ez ebben az esetben a <code class="systemitem">*.FreeBSD.org</code>) belüli gépekre
	címzett levelekre ez a gép <span class="quote">"<span class="quote">tart
	igényt</span>"</span> és így ezek ide
	irányítódnak át, majd a
	felhasználók errõl a központi
	levelezõ szerverrõl kapják meg a
	leveleiket.</p><a id="idp96446928" class="indexterm"></a><p>Az életünk
	megkönnyítéséhez minden
	felhasználónak létrehozzuk a saját
	<span class="emphasis"><em>felhasználói nevét</em></span> a
	levelezõ szerveren is.  Ezt az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> paranccsal
	gyorsan el is végezhetjük.</p><p>A levelezõ szerver lesz a hálózat
	összes munkaállomásához kirendelt
	levélváltó.  Ezt a DNS
	beállításai között így
	adhatjuk meg:</p><pre class="programlisting">enyem.FreeBSD.org	A	204.216.27.XX		; Munkaállomás
			MX	10 kozpont.FreeBSD.org	; Levelezõ szerver</pre><p>Ezzel lényegében az A rekord figyelmen
	kívül hagyásával
	átirányítjuk a munkaállomások
	számára érkezõ összes levelet a
	levelezõ szerverre.  A levelek tehát az MX rekord
	által mutatott címre mennek ki.</p><p>Ezt önállóan nem tudjuk elvégezni,
	hacsak nem futattunk egy saját DNS szervert.  Ha nincsen
	vagy nem is tudunk DNS szervert futtatni, akkor ebben a
	kérdésben egyeztessünk az
	internet-szolgáltatónkkal vagy bárkivel,
	aki a DNS beállításaiért
	felelõs.</p><p>Ha virtuális e-mail címket is kezelünk,
	akkor a most következõ információ
	még a hasznunkra lehet.  A példa
	kedvéért most feltesszük, hogy a
	tartományunkban van egy ügyfelünk, jelen
	esetben az <code class="systemitem">ugyfel1.org</code>,
	és azt akarjuk, hogy az <code class="systemitem">ugyfel1.org</code> címére
	küldött levelek a saját levelezõ
	szerverünkre kerüljenek át, a <code class="systemitem">level.sajat.com</code> címre.  A DNS-t
	ehhez így kell beállítani:</p><pre class="programlisting">ugyfel1.org		MX	10	level.sajat.com</pre><p>Ha csak az <code class="systemitem">ugyfel1.org</code>
	levelezését akarjuk kezelni, akkor ahhoz
	<span class="emphasis"><em>nem</em></span> kell külön A rekord.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vigyázzunk, mert az <code class="systemitem">ugyfel1.org</code> csak akkor
	  pingelhetõ, ha létezik hozzá A
	  rekord.</p></div><p>Befejezésül a levelezõ
	szerverünkön futó
	<span class="application">sendmail</span> számára is fel
	kell tárnunk, hogy milyen tartományokhoz
	és/vagy hálózati nevekhez fogadjon
	leveleket.  Ezt több módon is
	elvégezhetjük.  A következõk
	bármelyik megfelel erre a célra:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A <code class="literal">FEATURE(use_cw_file)</code>
	    használata esetén vegyük fel a
	    címeket az
	    <code class="filename">/etc/mail/local-host-names</code>
	    állományba.  Ha a
	    <span class="application">sendmail</span> 8.10 elõtti
	    változatai esetében ehhez az
	    <code class="filename">/etc/sendmail.cw</code>
	    állományra lesz
	    szükségünk.</p></li><li class="listitem"><p>Tegyük be a <code class="literal">Cwsajat.cimunk.com</code>
	    sort az <code class="filename">/etc/sendmail.cf</code> vagy a
	    <span class="application">sendmail</span> 8.10 és
	    késõbbi változatai esetén az
	    <code class="filename">/etc/mail/sendmail.cf</code>
	    állományba.</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mail-trouble.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="mail.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="SMTP-UUCP.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">28.5. A hibák elhárítása </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 28.7. SMTP és az UUCP</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>