<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>24.8. A források követése több géppel</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="updating-upgrading.html" title="24. fejezet - A FreeBSD frissítése és frissen tartása" /><link rel="prev" href="makeworld.html" title="24.7. Az alaprendszer újrafordítása" /><link rel="next" href="dtrace.html" title="25. fejezet - DTrace" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">24.8. A források követése több
      géppel</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="makeworld.html">Vissza</a> </td><th width="60%" align="center">24. fejezet - A FreeBSD frissítése és frissen
    tartása</th><td width="20%" align="right"> <a accesskey="n" href="dtrace.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="small-lan"></a>24.8. A források követése több
      géppel</h2></div><div><span class="authorgroup">Írta: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Meyer</span>, <span class="firstname">Mike</span></span>. </span></div></div></div><a id="idp93832272" class="indexterm"></a><p>Ha egyszerre több
      számítógéppel is szeretnénk
      követni ugyanannak a forrásfának a
      változásait és ezért mindegyikre
      letöltjük a forrásokat majd
      újrafordítjuk ezeket, akkor sok
      erõforrást, de leginkább lemezterületet,
      hálózati sávszélességet
      és processzoridõt, feleslegesen használunk.
      Ezekkel úgy tudunk spórolni, ha
      valójában csak egyetlen géppel
      végeztetjük el a munka legtöbb
      részét, miközben a többi NFS
      használatával dolgozik.  Ez a szakasz ezt a
      módszert foglalja össze.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="small-lan-preliminaries"></a>24.8.1. Elõkészületek</h3></div></div></div><p>Elõször is szedjük össze az egyezõ
	binárisokat futtató gépeket, melyekre a
	továbbiakban csak <span class="emphasis"><em>fordítási
	csoport</em></span> néven hivatkozunk.  Minden
	gépnek lehet saját rendszermagja, viszont a
	felhasználói programok mindegyikõjük
	esetében ugyanazok.  Ebbõl a csoportból
	válasszuk ki egy <span class="emphasis"><em>fordító
	gépet</em></span>.  Ez lesz az a gép, amelyen a
	rendszer és a rendszermag lefordításra
	kerül.  Ideális esetben ez a leggyorsabb gép,
	amelynek elegendõ a processzorkapacitása arra, hogy
	lefuttassa a <code class="command">make buildworld</code> és
	<code class="command">make buildkernel</code> parancsokat.  Érdemes
	még rajta kívül kiválasztanunk egy
	<span class="emphasis"><em>tesztelõ gépet</em></span> is, ahol a
	véglegesítés elõtt
	kipróbálhatjuk a
	szoftverfrissítéseket.  Ennek egy olyan
	gépnek <span class="emphasis"><em>kell</em></span> lennie, amely
	akár hosszabb ideig is nélkülözhetõ
	a csoportból.  Lehet akár maga a
	fordítást végzõ gép is, de nem
	elvárás.</p><p>A fordítási csoportban levõ összes
	gépnek ugyanarról a géprõl és
	ugyanarra a pontra kell csatlakoztatnia a
	<code class="filename">/usr/obj</code> és
	<code class="filename">/usr/src</code> könyvtárakat.  Ezek
	optimális esetben a fordítással
	foglalkozó gép két külön
	lemezmeghajtóján vannak, melyek egyaránt
	elérhetõek NFS-en keresztül.  Ha több
	fordítási csoportunk is van, akkor az
	<code class="filename">/usr/src</code> könyvtárnak
	elegendõ csak egyetlen fordító gépen
	meglennie, a többi pedig csatlakoztassa NFS-en
	keresztül.</p><p>Végül gyõzödjünk meg róla,
	hogy az <code class="filename">/etc/make.conf</code> és a
	<code class="filename">/etc/src.conf</code> állományok
	tartalma a fordítási csoport mindegyik
	gépénél megegyezik a fordító
	gépével.  Ez azt jelenti, hogy a
	fordító gépnek az alaprendszer ugyanazon
	részeit és ugyanúgy kell létrehozni,
	mint amelyet a fordítási csoport akármelyik
	gépére telepíteni is akarunk.
	Ezenkívül még a fordítási
	csoportban levõ minden egyes gép
	<code class="filename">/etc/make.conf</code>
	állományában a <code class="varname">KERNCONF</code>
	értékének a saját
	rendszermagjára vonatkozó
	konfigurációt kell megadni, illetve a
	fordítással foglakozó gép
	<code class="varname">KERNCONF</code>
	változójánál pedig az együtt
	összeset, a sajátjával kezdve.  Ennek
	megfelelõen a fordító gépnek a
	rendszermagok lefordításához rendelkeznie
	kell az egyes gépek
	<code class="filename">/usr/src/sys/arch/conf</code>
	könyvtárában meglevõ
	állományaival.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="small-lan-base-system"></a>24.8.2. Az alaprendszer</h3></div></div></div><p>Most, miután mindent megfelelõen
	elõkészítettünk, készen
	állunk a munkára.  A <a class="xref" href="makeworld.html#make-buildworld" title="24.7.7.2. Az alaprendszer fordítása">24.7.7.2. szakasz - Az alaprendszer fordítása</a>ban leírtak szerint
	fordítsuk le a rendszermagokat és az alaprendszert
	a fordító gépen, de utána még
	nem telepítsünk semmit se.  Ha
	befejezõdött a fordítás,
	lépjünk be a tesztelõ gépre és
	telepítsük a frissen fordított rendszermagot.
	Ha ez a gép NFS-en keresztül éri a
	<code class="filename">/usr/src</code> és
	<code class="filename">/usr/obj</code> könyvtárakat, akkor az
	egyfelhasználós módban aktiválni
	kell a hálózatot, majd csatlakoztatni ezeket.  Ezt
	legkönnyebben úgy tudjuk megcsinálni, ha a
	gépet elõször elindítjuk
	többfelhasználós módban, majd a
	<code class="command">shutdown now</code> paranccsal
	egyfelhasználós módba váltunk.  Ha
	eljuttunk ide, telepítsünk az új
	rendszermagot és rendszert, illetve a megszokott
	módon futtassuk a <code class="command">mergemaster</code>
	parancsot.  Amikor ezt befejeztük, ezen a gépen
	térjünk vissza a hétköznapi
	többfelhasználós mûködési
	módba.</p><p>Miután a tesztelésre szánt gépen
	ellenõriztük, hogy minden a megfelelõ
	módon mûködik, az elõbb tárgyalt
	eljárással telepítsük fel a
	fordítási csoportban levõ összes
	többi gépre is az új szoftvereket.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="small-lan-ports"></a>24.8.3. Portok</h3></div></div></div><p>Ugyanezt a gondolatmenet alkalmazható a portfa
	esetében is.  Az elsõ és egyben legfontosabb
	lépés a <code class="filename">/usr/ports</code>
	csatlakoztatása ugyanarról a géprõl a
	fordítási csoport minden gépére.  Az
	<code class="filename">/etc/make.conf</code> megfelelõ
	beállításával még a
	terjesztési állományokat is meg tudjuk
	osztani.  A <code class="varname">DISTDIR</code>
	értékét egy olyan közösen
	használt könyvtárra állítsuk,
	amely írható az NFS-en keresztül megosztott
	állományrendszerünkben a
	<code class="systemitem">root</code> felhasználóként
	tevékenykedõk számára.  A
	<code class="varname">WRKDIRPREFIX</code> változót minden
	gépen egy helyi fordítási
	könyvtárra állítsuk.
	Zárásképpen még
	hozzátesszük, hogy ha csomagokat akarunk
	készíteni és mások
	számára is elérhetõvé tenni,
	akkor ne felejtsük el a <code class="varname">PACKAGES</code>
	változót a <code class="varname">DISTDIR</code>
	változóhoz hasonlóan
	beállítani.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="makeworld.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="updating-upgrading.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="dtrace.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">24.7. Az alaprendszer újrafordítása </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 25. fejezet - DTrace</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>