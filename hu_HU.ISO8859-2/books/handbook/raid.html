<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>18.4. RAID</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="disks.html" title="18. fejezet - Háttértárak" /><link rel="prev" href="disks-adding.html" title="18.3. Lemezek hozzáadása" /><link rel="next" href="usb-disks.html" title="18.5. USB tárolóeszközök" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">18.4. RAID</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="disks-adding.html">Vissza</a> </td><th width="60%" align="center">18. fejezet - Háttértárak</th><td width="20%" align="right"> <a accesskey="n" href="usb-disks.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="raid"></a>18.4. RAID</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="raid-soft"></a>18.4.1. Szoftveres RAID</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd"></a>18.4.1.1. Összefûzött lemezek
	  beállítása</h4></div><div><span class="authorgroup">Eredetileg készítette: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Shumway</span>, <span class="firstname">Christopher</span></span>. </span></div><div><span class="authorgroup">Ellenõrizte: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Brown</span>, <span class="firstname">Jim</span></span>. </span></div></div></div><a id="idp89726032" class="indexterm"></a><a id="idp89726800" class="indexterm"></a><p>A nagyobb méretû
	  háttértárolók
	  kiválasztásánál a legfontosabb
	  tényezõk a sebesség,
	  megbízhatóság és a
	  költség.  Nagyon ritkán lehet csak ezt a
	  hármat egyensúlyba hozni:
	  általában a gyors és
	  megbízható
	  tárolóeszközök sok pénzbe
	  kerülnek, valamint a költségek
	  megtakarításához vagy a sebességet
	  vagy pedig a megbízhatóságot kell
	  feláldoznunk.</p><p>A továbbiakban egy olyan rendszert mutatunk be,
	  ahol a elsõsorban a költségek, majd csak
	  ezután a sebesség és
	  megbízhatóság kerültek
	  elõtérben.  A rendszer adatátviteli
	  sebességét a hálózat
	  korlátozza.  Habár emellett a
	  megbízhatóság is nagyon fontos, a
	  tárgyalt összefûzött meghajtó
	  (Concenated Disk, CCD) csak adatokat szolgáltat
	  és a teljes tartalma bármikor
	  visszaállítható, mivel
	  rendelkezésre áll CD-n.</p><p>A feladat elvégzésére alkalmas
	  háttértároló
	  kiválasztásában elsõként a
	  saját elvárásainkat kell tudnunk
	  megfogalmazni.  Ha nekünk jobban számít az
	  árnál a sebesség vagy a
	  megbízhatóság, akkor a
	  mostaniaktól némileg eltérõ
	  konfigurációt kell majd
	  építenünk.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-installhw"></a>18.4.1.1.1. A hardver telepítése</h5></div></div></div><p>A rendszert tartalmazó IDE-lemez mellett
	    három darab, egyenként 30 GB-os 5400-as
	    percenkénti fordulatszámú Western
	    Digital gyártmányú merevlemez alkotja
	    majd a létrehozni kívánt, kb.
	    90 GB összméretû
	    összefûzött lemezt.  Ideális esetben
	    minden IDE-lemez saját külön
	    vezérlõn és kábelen van, de a
	    költségek csökkentése miatt nem
	    használtunk további
	    IDE-vezérlõket.  Ehelyett inkább
	    jumperekkel úgy állítottuk be a
	    lemezeket, hogy minden vezérlõre egy mester
	    (master) és egy szolga (slave) módú
	    merevlemez kapcsolódjon.</p><p>A beszerelés után
	    beállítottuk a rendszer BIOS-át, hogy
	    automatikusan felismerje a csatlakoztatott lemezeket.  De
	    ami még fontosabb, hogy a FreeBSD is észlelte
	    ezeket az indítás során:</p><pre class="programlisting">ad0: 19574MB &lt;WDC WD205BA&gt; [39770/16/63] at ata0-master UDMA33
ad1: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata0-slave UDMA33
ad2: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata1-master UDMA33
ad3: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata1-slave UDMA33</pre><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ha a FreeBSD nem látná az összes
	      lemezt, akkor ellenõrizzük a jumperek helyes
	      beállítását.  Napjainkban a
	      legtöbb IDE-meghajtón találunk egy
	      <span class="quote">"<span class="quote">Cable Select</span>"</span> jumpert is.  Ezzel
	      <span class="emphasis"><em>nem</em></span> a mester/szolga módot
	      állítjuk be!  A megfelelõ jumper
	      beazonosításához olvassuk el a
	      meghajtóhoz tartozó
	      dokumentációt.</p></div><p>A következõ lépésben azt
	    vesszük nagyító alá, hogyan lehet
	    ezeket az állományrendszer
	    részévé tenni.  Ezzel kapcsolatban a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a> (<a class="xref" href="vinum-vinum.html" title="21. fejezet - A Vinum kötetkezelõ">21. fejezet - <em>A Vinum kötetkezelõ</em></a>) és a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> elolvasása ajánlatos.  Erre a
	    célra itt most a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
	    használatát választottuk.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-setup"></a>18.4.1.1.2. A CCD beállítása</h5></div></div></div><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> meghajtó
	    segítségével több ugyanolyan
	    lemezt tudunk összefûzni egyetlen logikai
	    állományrendszerré.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
	    használatához arra is
	    szükségünk van, hogy a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
	    támogatása jelen legyen a rendszermagban.  A
	    következõ sor tegyük bele a rendszermag
	    konfigurációs
	    állományába, fordítsuk
	    újra és telepítsük a
	    rendszermagot:</p><pre class="programlisting">device   ccd</pre><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> támogatása modulként
	    is betölthetõ.</p><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> beállításához
	    elõször a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> programmal meg fel kell
	    címkéznünk a lemezeket:</p><pre class="programlisting">bsdlabel -w ad1 auto
bsdlabel -w ad2 auto
bsdlabel -w ad3 auto</pre><p>Így létrejön egy-egy BSD
	    típusú címke a
	    <code class="filename">ad1c</code>, <code class="filename">ad2c</code>
	    és <code class="filename">ad3c</code>
	    eszközökre, amely így lefedi a lemez
	    egész területét.</p><p>Most pedig változtassuk meg a lemezcímke
	    típusát.  Ehhez használjuk ismét
	    a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> programot:</p><pre class="programlisting">bsdlabel -e ad1
bsdlabel -e ad2
bsdlabel -e ad3</pre><p>Az <code class="envar">EDITOR</code> környezeti
	    változóban megadott
	    szövegszerkesztõvel (ez általában a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a>) megnyílik minden egyes lemezhez a
	    jelenlegi lemezcímke.</p><p>Egy módosítatlan lemezcímke
	    valahogy így néz ki:</p><pre class="programlisting">8 partitions:
#        size   offset    fstype   [fsize bsize bps/cpg]
  c: 60074784        0    unused        0     0     0   # (Cyl.    0 - 59597)</pre><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> számára hozzunk létre
	    egy új <code class="literal">e</code> partíciót.
	    Ezt lényegében a <code class="literal">c</code>
	    partíció lemásolásával
	    keletkezik, de nála az <code class="option">fstype</code> (az
	    állományrendszer típusa) oszlopban
	    mindenképpen <strong class="userinput"><code>4.2BSD</code></strong>
	    szerepeljen!  A lemezcímke most már valahogy
	    így fog kinézni:</p><pre class="programlisting">8 partitions:
#        size   offset    fstype   [fsize bsize bps/cpg]
  c: 60074784        0    unused        0     0     0   # (Cyl.    0 - 59597)
  e: 60074784        0    4.2BSD        0     0     0   # (Cyl.    0 - 59597)</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-buildingfs"></a>18.4.1.1.3. Az állományrendszer
	    kiépítése</h5></div></div></div><p>Most, miután felcímkéztük az
	    összes lemezünket, lássunk neki a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> kiépítésének.  Ezt a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a> meghívásával
	    és az alábbihoz hasonló
	    paraméterek átadásával
	    tehetjük meg:</p><pre class="programlisting">ccdconfig ccd0<a id="co-ccd-dev"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span> 32<a id="co-ccd-interleave"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span> 0<a id="co-ccd-flags"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span> /dev/ad1e<a id="co-ccd-devs"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span> /dev/ad2e /dev/ad3e</pre><p>A paraméterek rövid leírása
	    és használata:</p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-dev"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Az elsõ paraméter a
		létrehozandó eszköz, ami jelen
		esetünkben a <code class="filename">/dev/ccd0c</code>.  A
		<code class="filename">/dev/</code> részt nem
		kötelezõ megadni.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-interleave"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>A kihagyás nagysága az
	állományrendszerben.  A kihagyás
	határozza meg a lemezblokkban alkalmazott
	csíkozás (striping) vastagságát, ami
	általában 512 byte.  Ennek megfelelõen a
	32-es kihagyás 16 384 byte-os csíkokat ad
	meg.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-flags"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a>
	beállításai.  Ha engedélyezni
	akarjuk a lemezek tükrözését, akkor itt
	megadhatjuk.  Mivel ez a konfiguráció most nem
	nyújt tükrözést a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
	számára, ezért állítsuk
	nullára (0).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-devs"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a> parancsnak
	utolsóként azokat az eszközöket
	kell felsorolni, amelyeket tömbbe akarunk fûzni.
	Minden eszközt teljes elérési úttal
	adjuk meg.</p></td></tr></table></div><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a> futtatása után a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> beállítódik.  Most
	    már állományrendszert is rakhatunk
	    rá.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> man oldalról szedjük
	    össze a szükséges
	    paraméterezést, vagy egyszerûen csak
	    gépeljünk be ennyit:</p><pre class="programlisting">newfs /dev/ccd0c</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-auto"></a>18.4.1.1.4. Az egész önmûködõvé
	    tétele</h5></div></div></div><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> eszközt általában
	    minden egyes indítás után
	    használni akarjuk.  Ennek
	    eléréséhez elõször ezt be
	    kell állítanunk.  Az alábbi parancs
	    kiadásával írassuk be a jelenlegi
	    beállítasainkat tükrözõ
	    <code class="filename">/etc/ccd.conf</code>
	    állományt:</p><pre class="programlisting">ccdconfig -g &gt; /etc/ccd.conf</pre><p>Az újraindítás során az
	    <code class="command">/etc/rc</code> parancs futtatja le a
	    <code class="command">ccdconfig -C</code> parancsot, ha az
	    <code class="filename">/etc/ccd.conf</code> állomány
	    létezik.  Ez automatikusan beállítja a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> eszközöket, így ilyenkor tudjuk
	    csatlakoztatni is ezeket.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ha egyfelhasználós módban
	      indítjuk a rendszert, mielõtt még a
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> paranccsal csatlakoztatni tudnánk a
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> eszközt, a tömb
	      beállításához meg kell
	      hívnunk a következõ parancsot:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">ccdconfig -C</pre></div><p>Ha a rendszerindításkor automatikusan
	    csatlakoztatni akarjuk a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> eszközt, akkor az
	    <code class="filename">/etc/fstab</code> állományba
	    helyezzünk el egy hozzá tartozó
	    bejegyzést:</p><pre class="programlisting">/dev/ccd0c              /media       ufs     rw      2       2</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="vinum"></a>18.4.1.2. A Vinum kötetkezelõ</h4></div></div></div><a id="idp89790800" class="indexterm"></a><a id="idp89791952" class="indexterm"></a><p>A Vinum kötetkezelõ egy blokkos
	  eszközmeghajtó, ami virtuális lemezes
	  meghajtókat valósít meg.
	  Elkülöníti a lemezes
	  hardvereszközöket a blokkos
	  eszközmeghajtók felületétõl
	  és a kettõ között úgy
	  képezi le az adatokat, hogy a hagyományos
	  lemezes tárolással szemben megnövekedett
	  rugalmasságot, teljesítményt és
	  megbízhatóságot kapunk.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a>
	  ismeri a RAID-0, RAID-1 és RAID-5 modelleket
	  egyaránt, melyeket önmagukban és
	  együttesen kombinálva is
	  használhatunk.</p><p>A <a class="xref" href="vinum-vinum.html" title="21. fejezet - A Vinum kötetkezelõ">21. fejezet - <em>A Vinum kötetkezelõ</em></a> bõvebben ismerteti a
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a> rendszerét.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="raid-hard"></a>18.4.2. Hardveres RAID</h3></div></div></div><a id="idp89850192" class="indexterm"></a><p>A FreeBSD rengeteg különbözõ
	típusú hardveres
	<acronym class="acronym">RAID</acronym>-vezérlõt ismer.  Ezek az
	eszközök a FreeBSD külön erre a célra
	szánt támogatása nélkül
	képesek vezérelni a
	<acronym class="acronym">RAID</acronym>-alrendszert.</p><p>A rajta levõ <acronym class="acronym">BIOS</acronym>
	segítségével a kártya a legtöbb
	lemezmûveletet egyedül kezeli.  A
	következõkben egy Promise <acronym class="acronym">IDE</acronym>
	<acronym class="acronym">RAID</acronym> vezérlõt alkalmazó
	rendszert fogunk beállítani.  Miután
	telepítettük a kártyát és
	indítjuk a rendszert, bekéri a
	szükséges információkat.
	Kövessük az utasításokat és
	lépjünk be a kártya
	beállító képernyõjére.
	Itt tudjuk kombinálni az összes csatlakoztatott
	meghajtónkat.  Amikor ezzel a végeztünk, a
	lemezek egyetlen lemezként fognak a FreeBSD
	számára viselkedni.  A többi
	<acronym class="acronym">RAID</acronym>-szint is ehhez hasonlóan
	állítható be.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89854672"></a>18.4.3. Az ATA RAID-1 tömbök
	újraszervezése</h3></div></div></div><p>A FreeBSD lehetõséget a tömbben levõ
	meghibásodott eszközök menet közben
	elvégezhetõ cseréjére.  Ehhez arra van
	szükségünk, hogy még
	újraindítás elõtt
	elcsípjük a hibát.</p><p>Hiba esetén valami hasonlót fogunk
	látni a <code class="filename">/var/log/messages</code>
	állományban vagy a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>
	kimenetében:</p><pre class="programlisting">ad6 on monster1 suffered a hard error.
ad6: READ command timeout tag=0 serv=0 - resetting
ad6: trying fallback to PIO mode
ata3: resetting devices .. done
ad6: hard error reading fsbn 1116119 of 0-7 (ad6 bn 1116119; cn 1107 tn 4 sn 11)\\
status=59 error=40
ar0: WARNING - mirror lost</pre><p>További információkat az
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atacontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">atacontrol</span>(8)</span></a> programtól szerezhetünk:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol list</code></strong>
ATA channel 0:
	Master:      no device present
	Slave:   acd0 &lt;HL-DT-ST CD-ROM GCR-8520B/1.00&gt; ATA/ATAPI rev 0

ATA channel 1:
	Master:      no device present
	Slave:       no device present

ATA channel 2:
	Master:  ad4 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
	Slave:       no device present

ATA channel 3:
	Master:  ad6 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
	Slave:       no device present

<code class="prompt">#</code> <strong class="userinput"><code>atacontrol status ar0</code></strong>
ar0: ATA RAID1 subdisks: ad4 ad6 status: DEGRADED</pre><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>A lemez biztonságos
	    eltávolításához
	    elõször válasszuk le (detach) a
	    meghibásodott lemezhez tartozó
	    csatornát:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol detach ata3</code></strong></pre></li><li class="step"><p>Cseréljük ki a lemezt.</p></li><li class="step"><p>Csatlakoztassuk újra (attach) az ATA
	    csatornát:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol attach ata3</code></strong>
Master:  ad6 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
Slave:   no device present</pre></li><li class="step"><p>Tartalékként (spare) adjuk hozzá az
	    új lemezt a tömbhöz:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol addspare ar0 ad6</code></strong></pre></li><li class="step"><p>Szervezzük újra (rebuild) a
	    tömböt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol rebuild ar0</code></strong></pre></li><li class="step"><p>A folyamat elõrehaladását a
	    következõ parancs
	    begépelésével tudjuk figyelni:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dmesg | tail -10</code></strong>
[a kimenet többi része]
ad6: removed from configuration
ad6: deleted from ar0 disk1
ad6: inserted into ar0 disk1 as spare

<code class="prompt">#</code> <strong class="userinput"><code>atacontrol status ar0</code></strong>
ar0: ATA RAID1 subdisks: ad4 ad6 status: REBUILDING 0% completed</pre></li><li class="step"><p>Várjunk a mûvelet
	    befejezõdéséig.</p></li></ol></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="disks-adding.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="usb-disks.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">18.3. Lemezek hozzáadása </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 18.5. USB tárolóeszközök</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>