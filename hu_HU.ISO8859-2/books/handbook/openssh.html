<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>14.11. OpenSSH</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="security.html" title="14. fejezet - Biztonság" /><link rel="prev" href="ipsec.html" title="14.10. VPN IPsec felett" /><link rel="next" href="fs-acl.html" title="14.12. Az állományrendszerek hozzáféréseit vezérlõ listák" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">14.11. OpenSSH</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ipsec.html">Vissza</a> </td><th width="60%" align="center">14. fejezet - Biztonság</th><td width="20%" align="right"> <a accesskey="n" href="fs-acl.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="openssh"></a>14.11. OpenSSH</h2></div><div><span class="authorgroup">Írta: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lee</span>, <span class="firstname">Chern</span></span>. </span></div></div></div><a id="idp88026320" class="indexterm"></a><a id="idp88026832" class="indexterm"></a><p>Az <span class="application">OpenSSH</span> olyan
      hálózati kapcsolódási
      eszközök összessége, amivel
      biztonságos módon érhetünk el
      távoli számítógépeket.  Az
      <code class="command">rlogin</code>, <code class="command">rsh</code>,
      <code class="command">rcp</code> és a <code class="command">telnet</code>
      direkt kiváltására használható.
      Emellett SSH-n keresztül TCP/IP kapcsolatok is
      biztonságosan bújtathatóak vagy
      küldhetõek tovább.</p><p>Az <span class="application">OpenSSH</span>-t az OpenBSD projekt
      tartja karban, és az SSH 1.2.12 verziójára
      épül hibajavításokkal és
      frissítésekkel egyetemben.  Az SSH 1 és 2
      protokollokkal egyaránt kompatibilis.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88031184"></a>14.11.1. Az <span class="application">OpenSSH</span>
	használatának elõnyei</h3></div></div></div><p>A hétköznapi esetben, vagyis amikor a
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">telnet</span>(1)</span></a> vagy <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a> alkalmazásokat
	használjuk, az adatok titkosítatlan
	formában közlekednek a hálózaton.  A
	szerver és a kliens közé bárhova
	becsatlakozó hálózati
	kíváncsiskodók így
	könnyedén el tudják lopni a
	felhasználói nevünket és jelszavunkat,
	vagy lényegében bármilyen adatot, ami az
	adott munkamenetben megfordul.  Az
	<span class="application">OpenSSH</span> ennek
	kivédésére kínál fel
	különféle hitelesítési és
	titkosítási eszközöket.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88034640"></a>14.11.2. Az sshd engedélyezése</h3></div></div></div><a id="idp88035280" class="indexterm"></a><p>Az <span class="application">sshd</span> a FreeBSD
	telepítésekor jelentkezõ
	<code class="literal">Standard</code> lehetõségek egyike.  Az
	<span class="application">sshd</span>
	engedélyezését úgy tudjuk
	kideríteni, ha az <code class="filename">rc.conf</code>
	állományban megkeressük a következõ
	sort:</p><pre class="screen">sshd_enable="YES"</pre><p>Ez tölti be a rendszer indításakor az
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a>-t, az <span class="application">OpenSSH</span>
	démonát.  Vagy az
	<code class="filename">/etc/rc.d/sshd</code> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> szkript
	segítségével is elindíthatjuk az
	<span class="application">OpenSSH</span>-t:</p><pre class="programlisting">/etc/rc.d/sshd start</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88050640"></a>14.11.3. Az SSH kliens</h3></div></div></div><a id="idp88051280" class="indexterm"></a><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> segédprogram az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a>
	programhoz hasonlóan mûködik.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ssh felhasználó@gép.hu</code></strong>
Host key not found from the list of known hosts.  Are you sure you
want to continue connecting (yes/no)?  <strong class="userinput"><code>yes</code></strong> Host
'gép.hu' added to the list of known hosts.
felhasználó@gép.hu's password:
<strong class="userinput"><code>*******</code></strong></pre><p>Az üzenetek fordítása:</p><pre class="screen">Nem találtam meg a gépet az ismert gépek között.  Biztosan csatlakozni
akarunk hozzá (igen/nem)?  <strong class="userinput"><code>igen</code></strong> A 'gép.hu'
felkerült az ismert gépek közé.
Adja meg a felhasználó@gép.hu jelszavát:</pre><p>Bejelentkezés után minden ugyanolyan, mintha
	az <code class="command">rlogin</code> vagy a <code class="command">telnet</code>
	programokat használtuk volna.  Az SSH egy kulcs
	segítségével próbálja
	azonosítani a számítógépeket,
	ezzel ellenõrzi a szerver hitelességét a
	kliensek csatlakozásakor.  A felhasználónak
	ilyenkor elõször mindig <code class="literal">yes</code>
	választ kell adnia.  A késõbbi
	bejelentkezési kísérletek pedig majd mindig
	az így kapott kulccsal történnek.  Ha
	eltérne a kulcs, akkor az SSH kliens erre figyelmeztetni
	fog minket.  A kulcsok a <code class="filename">~/.ssh/known_hosts</code>
	vagy az SSH v2 protokoll esetén a
	<code class="filename">~/.ssh/known_hosts2</code>
	állományba kerülnek elmentésre.</p><p>Alapértelmezés szerint az
	<span class="application">OpenSSH</span> szerverek csak SSH v2
	kapcsolatokat fogadnak el.  Lehetõség szerint a
	kliens is ezt a változatot fogja használni, de ha
	nem sikerül, akkor megpróbálkozik a v1-el.  A
	kliensnek a <code class="option">-1</code> vagy <code class="option">-2</code>
	opciók segítségével elõ is
	lehet írni, hogy az elsõ vagy a második
	változatot használja.  A kliensben az elsõ
	változat támogatását csupán a
	régebbi verziók kompatibilitása miatt
	tartják karban.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88061392"></a>14.11.4. Biztonságos másolás</h3></div></div></div><a id="idp88062032" class="indexterm"></a><a id="idp88063184" class="indexterm"></a><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scp</span>(1)</span></a> parancs az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rcp</span>(1)</span></a> parancshoz
	hasonlóan mûködik: egyik géprõl
	másol a másikra, biztonságosan.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code> scp felhasználó@gép.hu:/COPYRIGHT COPYRIGHT</code></strong>
<em class="replaceable"><code>felhasználó@gép.hu</code></em>'s password: <strong class="userinput"><code>*******</code></strong>
COPYRIGHT            100% |*****************************|  4735
00:00
<code class="prompt">#</code></pre><p>Mivel a kulcsot már ismerjük ehhez a
	távoli géphez (az elõbbi
	példából), ezért az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scp</span>(1)</span></a>
	használatakor már ezzel
	hitelesítünk.</p><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scp</span>(1)</span></a> paraméterei hasonlóak a
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cp</span>(1)</span></a> parancséhoz: elsõ helyen az
	állomány vagy állományok neveit
	adjuk meg, a másodikon pedig a célt.  Mivel az
	állományokat a hálózaton SSH-n
	keresztül küldik át, ezért az
	állományok neveit
	<code class="option"><em class="replaceable"><code>felhasználó@gép</code></em>:<em class="replaceable"><code>elérési_út</code></em></code>
	formában kell megadni.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88080208"></a>14.11.5. Beállítások</h3></div></div></div><a id="idp88080848" class="indexterm"></a><p>Az <span class="application">OpenSSH</span> démon és
	kliens rendszerszintû konfigurációs
	állományai az <code class="filename">/etc/ssh</code> könyvtárban
	találhatóak.</p><p>Az <code class="filename">ssh_config</code> tartalmazza a kliens
	beállításait, miközben az
	<code class="filename">sshd_config</code> tartalmazza a
	démonét.</p><p>Emellett az <code class="filename">rc.conf</code>
	állományban megadható
	<code class="option">sshd_program</code> (ez alapból a
	<code class="filename">/usr/sbin/sshd</code>) és
	<code class="option">sshd_flags</code> opciókkal további
	beállítási szinteket
	nyújtanak.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security-ssh-keygen"></a>14.11.6. ssh-keygen</h3></div></div></div><p>Jelszavak helyett az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a> programmal a
	felhasználók azonosítására
	DSA- vagy RSA-kulcsokat tudunk készíteni:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh-keygen -t dsa</code></strong>
Generating public/private dsa key pair.
Enter file in which to save the key (/home/<em class="replaceable"><code>felhasználó</code></em>/.ssh/id_dsa):
Created directory '/home/<em class="replaceable"><code>felhasználó</code></em>/.ssh'.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/<em class="replaceable"><code>felhasználó</code></em>/.ssh/id_dsa.
Your public key has been saved in /home/<em class="replaceable"><code>felhasználó</code></em>/.ssh/id_dsa.pub.
The key fingerprint is:
bb:48:db:f2:93:57:80:b6:aa:bc:f5:d5:ba:8f:79:17 <em class="replaceable"><code>felhasználó@gép.hu</code></em>
</pre><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a> ekkor a hitelesítésre
	létrehoz egy publikus és egy privát
	kulcsból álló párt.  A privát
	kulcs a <code class="filename">~/.ssh/id_dsa</code> vagy
	<code class="filename">~/.ssh/id_rsa</code> állományba
	kerül, miközben a publikus kulcs a
	<code class="filename">~/.ssh/id_dsa.pub</code> vagy
	<code class="filename">~/.ssh/id_rsa.pub</code> lesz attól
	függõen, hogy <acronym class="acronym">DSA</acronym> vagy
	<acronym class="acronym">RSA</acronym> a kulcs típusa.  A módszer
	mûködéséhez a publikus
	<acronym class="acronym">DSA</acronym>- vagy <acronym class="acronym">RSA</acronym>-kulcsot a
	távoli számítógép
	<code class="filename">~/.ssh/authorized_keys</code>
	állományába kell bemásolni.</p><p>Így tehát a távoli
	számítógépre jelszavak
	alkalmazása helyett SSH-kulccsal tudunk
	belépni.</p><p>Ha az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a> parancsnak megadunk egy jelmondatot
	is, akkor a felhasználó a privát
	kulcsát csak ennek megadásával tudja
	használni.  A hosszú jelmondatok
	állandó beirogatásától a
	<a class="xref" href="openssh.html#security-ssh-agent" title="14.11.7. Az ssh-agent és az ssh-add">14.11.7. szakasz - Az ssh-agent és az ssh-add</a> szakaszban hamarosan
	bemutatásra került <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> igyekszik
	megkímélni minket.</p><div xmlns="" class="warning"><h3 class="admontitle">Figyelem: </h3><p xmlns="http://www.w3.org/1999/xhtml">A különbözõ opciók és
	  állományok eltérhetnek a
	  számítógépünkre
	  telepített <span class="application">OpenSSH</span>
	  verziójától függõen.  Ilyen
	  esetben javasolt felkeresni az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a> man
	  oldalát.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security-ssh-agent"></a>14.11.7. Az ssh-agent és az ssh-add</h3></div></div></div><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> és <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-add</span>(1)</span></a>
	segédprogramokkal be tudjuk tölteni az
	<span class="application">SSH</span>-kulcsokat a
	memóriába, amivel elkerülhetjük a
	jelmondat állandó
	begépelését.</p><p>A hitelesítést az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> program
	kezeli a betöltött privát kulcsok
	alapján.  Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a>
	használatával egy másik programot is
	elindhatunk, egy parancsértelmezõtõl kezdve egy
	ablakkezelõig szinte bármit.</p><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> programot úgy tudjuk egy
	parancsértelmezõben használni, hogy
	elõször is elindítjuk vele az adott
	parancsértelmezõt.  Ezután az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-add</span>(1)</span></a>
	lefuttatásával hozzá kell adnunk egy
	identitást, annak jelmondatának
	megadásával.  Miután ezeket megtettük,
	a felhasználó bármelyik olyan távoli
	gépre be tud jelentkezni, ahol a publikus kulcsát
	ismerik.  Például:</p><pre class="screen"><code class="prompt">%</code> ssh-agent <em class="replaceable"><code>csh</code></em>
<code class="prompt">%</code> ssh-add
Enter passphrase for /home/<em class="replaceable"><code>felhasználó</code></em>/.ssh/id_dsa:
Identity added: /home/<em class="replaceable"><code>felhasználó</code></em>/.ssh/id_dsa (/home/<em class="replaceable"><code>felhasználó</code></em>/.ssh/id_dsa)
<code class="prompt">%</code></pre><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> programot X11-el úgy tudjuk
	használni, ha az <code class="filename">~/.xinitrc</code>
	állományba tesszük bele.  Ezzel az
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> az összes X11-ben indított program
	számára rendelkezésre áll.
	Példának vegyük ezt az
	<code class="filename">~/.xinitrc</code> állományt:</p><pre class="programlisting">exec ssh-agent <em class="replaceable"><code>startxfce4</code></em></pre><p>Így az X11 indulásakor mindig elindul az
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a>, amely pedig elindítja az
	<span class="application">XFCE</span> alkalmazást.
	Miután átírtuk a saját
	állományunkat, a rendszer
	életbeléptetéséhez indítsuk
	újra az X11-et, az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-add</span>(1)</span></a>
	futtatásával pedig töltsük be az
	összes SSH-kulcsunkat.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security-ssh-tunneling"></a>14.11.8. Tunnelezés SSH-val</h3></div></div></div><a id="idp88130384" class="indexterm"></a><p>Az <span class="application">OpenSSH</span>-val létre
	tudunk hozni egy tunnelt, amellyel egy másik protokoll
	adatait tudjuk titkosított módon
	becsomagolni.</p><p>Az alábbi parancs arra utasítja az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a>
	programot, hogy hozzon létre egy tunnelt a
	<span class="application">telnet</span>
	használatához:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 5023:localhost:23 felhasználó@izé.mizé.hu</code></strong>
<code class="prompt">%</code></pre><p>Az <code class="command">ssh</code> parancsnak a következõ
	kapcsolókat adtuk meg:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-2</code></span></dt><dd><p>Az <code class="command">ssh</code> parancs a protokoll
	      második változatát használja.
	      (Ne adjuk meg, ha régi SSH szerverekkel
	      dolgozunk.)</p></dd><dt><span class="term"><code class="option">-N</code></span></dt><dd><p>Tunnel létrehozása.  Ha nem adjuk meg,
	      akkor az <code class="command">ssh</code> egy hagyományos
	      munkamenet felépítését kezdi
	      meg.</p></dd><dt><span class="term"><code class="option">-f</code></span></dt><dd><p>Az <code class="command">ssh</code> a háttérben
	      fusson.</p></dd><dt><span class="term"><code class="option">-L</code></span></dt><dd><p>Egy helyi tunnel a
	    <em class="replaceable"><code>helyiport:távoligép:távoliport</code></em>
	      felírásban.</p></dd><dt><span class="term"><code class="option">felhasználó@izé.mizé.hu</code></span></dt><dd><p>A távoli SSH szerver.</p></dd></dl></div><p>Az SSH által létrehozott járatok
	úgy mûködnek, hogy létrehozunk egy
	csatlakozást a <code class="systemitem">localhost</code> (a helyi
	gép) megadott portján.  Ezután minden olyan
	kapcsolatot, ami a helyi gép adott portjára
	érkezik, SSH-n keresztül
	átirányítunk a távoli gép
	portjára.</p><p>Ebben a példában a helyi gép
	<em class="replaceable"><code>5023</code></em> portját
	átirányítjuk a helyi gép
	<em class="replaceable"><code>23</code></em> portjára.  Mivel a
	<em class="replaceable"><code>23</code></em> a
	<span class="application">telnet</span> portja, ezért az
	így definiált SSH járattal egy
	biztonságos <span class="application">telnet</span>
	munkamenetet hozunk létre.</p><p>Ezen a módon tetszõleges nem biztonságos
	TCP protokollt, például SMTP-t, POP3-at, FTP-t
	stb.  be tudunk csomagolni.</p><div class="example"><a id="idp88158288"></a><div class="example-title">14.1. példa - Biztonságos tunnel létrehozása
	  SSH-val SMTP-hez</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 5025:localhost:25 felhasználó@levelezõ.szerver.hu</code></strong>
<em class="replaceable"><code>felhasználó@levelezõ.szerver.hu</code></em>'s password: <strong class="userinput"><code>*****</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>telnet localhost 5025</code></strong>
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
220 <em class="replaceable"><code>levelezõ.szerver.hu</code></em> ESMTP</pre><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a> és további
	  felhasználói hozzáférések
	  alkalmazásával ezen a módon ki tudunk
	  alakítani egy minden további
	  problémától és zûrtõl
	  mentes SSH tunnelezési környezetet.  A jelszavak
	  helyett kulcsokat használunk és minden tunnel
	  külön felhasználóként is
	  futtatható.</p></div></div><br class="example-break" /><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88171472"></a>14.11.8.1. Gyakorlati példák a tunnelek
	  használatára</h4></div></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88172112"></a>14.11.8.1.1. Egy POP3 szerver biztonságos
	    elérése</h5></div></div></div><p>Tegyük fel, hogy a munkahelyünkön van egy
	    SSH szerver, amire kívülrõl lehet
	    csatlakozni, illetve vele egy hálózatban van
	    egy POP3 levelezõ szerver is.  A munkahelyünk
	    és az otthonunk között levõ
	    hálózati útvonalat részben vagy
	    teljesen nem tartjuk megbízhatónak.
	    Ezért az e-mailjeinket valamilyen biztonságos
	    módon szeretnénk elérni.  Ezt
	    úgy tudjuk megvalósítani, ha
	    otthonról csatlakozunk a munkahelyen levõ SSH
	    szerverre és ezen keresztül érjük a
	    levelezõ szervert.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 2110:levél.gép.hu:110 felhasználó@ssh-szerver.gép.hu</code></strong>
<em class="replaceable"><code>felhasználó@ssh-szerver.gép.hu</code></em>'s password: <strong class="userinput"><code>******</code></strong></pre><p>Miután a tunnel létrejött és
	    mûködõképes, állítsuk be
	    a levelezõ kliensünkben, hogy a POP3
	    kéréseket a <code class="systemitem">localhost</code> 2110
	    portjára küldje.  Innen pedig biztonságos
	    módon megy tovább a
	    <code class="systemitem">levél.gép.hu</code>
	    címre.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88176080"></a>14.11.8.1.2. Egy szigorú tûzfal
	    megkerülése</h5></div></div></div><p>Egyes hálózati adminisztrátorok
	    túlságosan szigorú szabályokat
	    adnak meg a tûzfalban, és nem csak a
	    bejövõ kapcsolatokat szûrik, hanem a
	    kimenõket is.  A távoli gépekhez csak a
	    22 (SSH) és 80 (böngészés)
	    portjaikon tudunk csatlakozni.</p><p>Mi viszont szeretnénk más (nem
	    egészen a munkánkkal kapcsolatos)
	    szolgáltatásokat is elérni,
	    például egy Ogg Vorbis szerverrõl
	    zenét hallgatni.  Ehhez a szerverhez viszont csak
	    akkor tudnánk csatlakozni, ha a 22 vagy 80 portokon
	    üzemelne.</p><p>Ezt a problémát úgy oldhatjuk meg,
	    ha felépítünk egy SSH kapcsolatot a
	    hálózatunk tûzfalán
	    kívül levõ
	    számítógéppel és
	    segítségével átbújunk az
	    Ogg Vorbis szerverhez.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 8888:zene.gép.hu:8000 felhasználó@tûzfalazatlan-rendszer.gép.org</code></strong>
<em class="replaceable"><code>felhasználó@tûzfalazatlan-rendszer.gép.org</code></em>'s password: <strong class="userinput"><code>*******</code></strong></pre><p>A zenelejátszó kliensüknek adjuk meg
	    a <code class="systemitem">localhost</code> 8888 portját, amely
	    pedig a tûzfal sikeres
	    kijátszásával
	    továbbítódik a
	    <code class="systemitem">zene.gép.hu</code> 8000-res
	    portjára.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88181200"></a>14.11.9. Az <code class="varname">AllowUsers</code> felhasználói
	beállítás</h3></div></div></div><p>Gyakran nem árt korlátozni a
	felhasználók bejelentkezését.  Az
	<code class="literal">AllowUsers</code> erre tökéletesen
	megfelel.  Például, ha csak <code class="systemitem">192.168.1.32</code> címrõl
	engedjük bejelentkezni a <code class="systemitem">root</code>
	felhasználót, akkor ehhez valami ilyesmit kell
	beírnunk az <code class="filename">/etc/ssh/sshd_config</code>
	állományba:</p><pre class="programlisting">AllowUsers root@192.168.1.32</pre><p>Ezzel pedig csupán nevének
	megadásával engedélyezzük az
	<code class="systemitem">admin</code> felhasználó
	bejelentkezését (bárhonnan):</p><pre class="programlisting">AllowUsers admin</pre><p>Egy sorban több felhasználó is
	megadható, mint például:</p><pre class="programlisting">AllowUsers root@192.168.1.32 admin</pre><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ilyenkor ne felejtsük el megadni az összes
	  bejelentkezésre (valamilyen formában) jogosult
	  felhasználót megadni,
	  máskülönben kizárjuk ezeket.</p></div><p>Miután elvégeztük a szükséges
	változtatásokat az
	<code class="filename">/etc/ssh/sshd_config</code>
	állományban, utasítsuk az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a>
	démont a konfigurációs
	állományok
	újraolvasására:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd reload</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88194768"></a>14.11.10. Ajánlott olvasnivalók (angolul)</h3></div></div></div><p><a class="link" href="http://www.openssh.com/" target="_top">OpenSSH</a></p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scp</span>(1)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a>
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-add</span>(1)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh_config&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ssh_config</span>(5)</span></a></p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sftp-server&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sftp-server</span>(8)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd_config&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">sshd_config</span>(5)</span></a></p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ipsec.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="security.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="fs-acl.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">14.10. VPN IPsec felett </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 14.12. Az állományrendszerek
      hozzáféréseit vezérlõ
      listák</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>