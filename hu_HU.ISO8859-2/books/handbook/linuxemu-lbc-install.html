<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>10.2. Telepítés</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="linuxemu.html" title="10. fejezet - Bináris Linux kompatibilitás" /><link rel="prev" href="linuxemu.html" title="10. fejezet - Bináris Linux kompatibilitás" /><link rel="next" href="linuxemu-mathematica.html" title="10.3. A Mathematica(R) telepítése" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">10.2. Telepítés</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="linuxemu.html">Vissza</a> </td><th width="60%" align="center">10. fejezet - Bináris Linux kompatibilitás</th><td width="20%" align="right"> <a accesskey="n" href="linuxemu-mathematica.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-lbc-install"></a>10.2. Telepítés</h2></div></div></div><a id="idp83075280" class="indexterm"></a><p>A bináris Linux kompatibilitás
      alapértelmezés szerint nem engedélyezett.
      Legkönnyebben úgy tudjuk elérhetõvé
      tenni, ha betöltjük a <code class="literal">linux</code> nevû
      KLD modult (<span class="quote">"<span class="quote">Kernel LoaDable</span>"</span>).  Ehhez
      <code class="systemitem">root</code> felhasználóként a
      következõket kell begépelni:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload linux</code></strong></pre><p>Ha minden egyes rendszerindítás során
      engedélyezni szeretnénk a bináris
      kompatibilitást, akkor tegyük bele az
      <code class="filename">/etc/rc.conf</code> állományba ezt a
      sort:</p><pre class="programlisting">linux_enable="YES"</pre><p>A modul betöltõdését a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldstat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldstat</span>(8)</span></a>
      paranccsal tudjuk ellenõrizni:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kldstat</code></strong>
Id Refs Address    Size     Name
 1    2 0xc0100000 16bdb8   kernel
 7    1 0xc24db000 d000     linux.ko</pre><a id="idp83086032" class="indexterm"></a><p>Ha valamiért nem akarjuk vagy nem éppen nem
      tudjuk betölteni a modult, akkor a bináris Linux
      kompatibilitást az <code class="literal">options COMPAT_LINUX</code>
      beállítással be is tudjuk
      építeni a rendszermagba.  Ennek pontos
      menetét a <a class="xref" href="kernelconfig.html" title="8. fejezet - A FreeBSD rendszermag testreszabása">8. fejezet - <em>A FreeBSD rendszermag testreszabása</em></a>ben találjuk
      meg.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83088336"></a>10.2.1. Linuxos futtatókönyvtárak
	telepítése</h3></div></div></div><a id="idp83088976" class="indexterm"></a><p>A linuxos könyvtárakat két módon
	is felrakhatjuk: egyrészt a <a class="link" href="linuxemu-lbc-install.html#linuxemu-libs-port" title="10.2.1.1. A könyvtárak telepítése a linux_base porttal">linux_base</a> port
	telepítésével, másrészt <a class="link" href="linuxemu-lbc-install.html#linuxemu-libs-manually" title="10.2.1.2. A könyvtárak telepítése manuálisan">manuálisan</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-port"></a>10.2.1.1. A könyvtárak telepítése a
	  linux_base porttal</h4></div></div></div><a id="idp83096528" class="indexterm"></a><p>A futtatókönyvtárakat a lehetõ
	  legegyszerûbben a <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a> porton
	  keresztül tudjuk telepíteni.  Teljesen úgy
	  történik, mint a <a class="link" href="file://localhost/usr/ports/" target="_top">Portgyûjtemény</a>
	  akármelyik másik portjának
	  telepítése.  Csupán ennyit kell
	  beírnunk:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/emulators/linux_base-f10</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install distclean</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">A FreeBSD 8.0 kiadását megelõzõ
	    változataiban az <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base-f10/pkg-descr">emulators/linux_base-f10</a> port
	    helyett az <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base-fc4/pkg-descr">emulators/linux_base-fc4</a> portot
	    használjuk.</p></div><p>A telepítés végeztével kaptunk
	  is egy mûködõ bináris Linux
	  kompatibilitást, habár egyes programok
	  még panaszkodhatnak a rendszerkönyvtárak
	  alverzióit illetõen.
	  Általánosságban véve ez azonban
	  nem okoz nagyobb gondot.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">A <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a> portnak
	    több változata is használható,
	    melyek az egyes Linux disztribúcióknak
	    feleltethetõek meg.  Ilyenkor mindig érdemes
	    közülük azt választani, amelyik a
	    leginkább megfelel a telepíteni
	    kívánt linuxos alkalmazás
	    igényeinek.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-manually"></a>10.2.1.2. A könyvtárak telepítése
	  manuálisan</h4></div></div></div><p>Ha korábban még nem telepítettük
	  volna a Portgyûjteményt, akkor egyénileg
	  kell felraknunk az egyes könyvtárakat.
	  Közülük azokra lesz
	  szükségünk, amelyeket maga az
	  alkalmazás is használni akar, valamint a
	  futásidejû linkerre.  Emellett még a FreeBSD
	  rendszerünkön levõ Linux binárisok
	  számára a <code class="filename">/compat/linux</code>
	  könyvtárban létre kell hoznunk a
	  gyökér ún.
	  <span class="quote">"<span class="quote">árnyékkönyvtárát</span>"</span>
	  is.  A FreeBSD alatt elindított Linux programok
	  elõször ebben a könyvtárban
	  fogják keresni a hozzájuk tartozó osztott
	  könyvtárakat.  Így tehát, amikor egy
	  linuxos program betölti például a
	  <code class="filename">/lib/libc.so</code>
	  függvénykönyvtárat, akkor a FreeBSD
	  elõször a
	  <code class="filename">/compat/linux/lib/libc.so</code>
	  állományt próbálja meg megnyitni,
	  majd ha az nem létezik, akkor a
	  <code class="filename">/lib/libc.so</code> állományt.  Az
	  osztott könyvtárak ezért a
	  <code class="filename">/compat/linux/lib</code>
	  árnyékkönyvtárba
	  telepítendõek, és nem oda, ahova a linuxos
	  <code class="command">ld.so</code> mutat.</p><p>Általánosságban szólva eleinte
	  elég csak azokat az osztott könyvtárakat
	  megkeresni és felrakni, amelyekre a
	  telepítendõ linuxos alkalmazásunknak
	  ténylegesen szüksége van.  Egy idõ
	  után úgyis összegyûlnek azok a
	  fontosabb függvénykönyvtárak, amelyek
	  segítségével már minden
	  további ráfordítás
	  nélkül futtatni tudjuk a frissen importált
	  programokat.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83108176"></a>10.2.1.3. Hogyan telepítsünk újabb osztott
	  könyvtárakat?</h4></div></div></div><a id="idp83108816" class="indexterm"></a><p>Mit tegyünk, ha az <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a> port
	  telepítése után az alkalmazás
	  még mindig hiányol néhány osztott
	  könyvtárat?  Honnan tudhatjuk meg, hogy milyen
	  osztott könyvtárak kellenek majd egy Linux
	  bináris használatához, és honnan
	  szerezzük be ezeket?  Erre alapvetõn két
	  lehetõségünk van (az
	  utasításokat <code class="systemitem">root</code>
	  felhasználóként kell majd
	  végrehajtanunk).</p><p>Ha hozzáférünk egy Linux rendszerhez,
	  akkor szedjük össze az alkalmazásunk
	  futtatásához szükséges osztott
	  könyvtárakat, és másoljuk ezeket a
	  FreeBSD partíciójára.
	  Például:</p><div class="informalexample"><p>Tegyük fel, hogy FTP-n keresztül
	    leszedtük a <span class="application">Doom</span> Linux
	    változatát, és felraktuk egy
	    általunk elérhetõ Linux rendszerre.  Az
	    <code class="command">ldd linuxdoom</code> parancs
	    segítségével ki tudjuk deríteni,
	    milyen osztott könyvtárak kellenek majd
	    nekünk:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ldd linuxdoom</code></strong>
libXt.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libXt.so.3.1.0
libX11.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libX11.so.3.1.0
libc.so.4 (DLL Jump 4.5pl26) =&gt; /lib/libc.so.4.6.29</pre><a id="idp83113552" class="indexterm"></a><p>Az utolsó oszlopban levõ
	    állományokat másoljuk át,
	    tegyük ezeket a <code class="filename">/compat/linux</code>
	    könyvtárba, és hozzunk létre az
	    elsõ oszlopban szereplõ szimbolikus linkeket.
	    Így tehát a következõ
	    állományok kellenének:</p><pre class="screen">/compat/linux/usr/X11/lib/libXt.so.3.1.0
/compat/linux/usr/X11/lib/libXt.so.3 -&gt; libXt.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3 -&gt; libX11.so.3.1.0
/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ha már rendelkezünk az
		<code class="command">ldd</code> kimenetének elsõ
		oszlopában szereplõ
		fõverziószámú osztott
		könyvtárral, akkor nem kell
		átmásolni az utolsó oszlopban
		levõ állományokat, hiszen így
		is mûködnie kellene mindennek.  Ha viszont egy
		újabb változattal találkozunk,
		akkor érdemes mégis inkább
		átmásolni.  Miután a szimbolikus
		linkeket átirányítottuk az
		új változatra, a régit akár
		törölhetjük is.  Ha például
		ezek a könyvtárak elérhetõek a
		rendszerünkön:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.27
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.27</pre><p xmlns="http://www.w3.org/1999/xhtml">Észrevesszük, hogy az
		<code class="command">ldd</code> kimenetében az új
		bináris egy újabb változatot
		igényel:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">libc.so.4 (DLL Jump 4.5pl26) -&gt; libc.so.4.6.29</pre><p xmlns="http://www.w3.org/1999/xhtml">Ha csak az utolsó jegyében marad le
		valamivel a verziószám, akkor nem kell
		különösebben aggódnunk a
		<code class="filename">/lib/libc.so.4.6.29</code> miatt sem,
		hiszen a programnak egy picivel korábbi
		verzióval is remekül kellene tudnia
		mûködni.  Természetesen, ha akarjuk,
		ettõl függetlenül
		lecserélhetjük a
		<code class="filename">libc.so</code> állományt,
		ami ezt eredményezi:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">A szimbolikus linkek karbantartása
		<span class="emphasis"><em>csak</em></span> a Linux binárisok
		esetén szükséges.  A FreeBSD
		saját futásidejû linkere
		magától megkeresi a megfelelõ
		fõverziószámú
		könyvtárakat, ezért emiatt
		általában nem kell aggódni.</p></div></blockquote></div></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83130320"></a>10.2.2. Linux ELF binárisok telepítése</h3></div></div></div><a id="idp83130960" class="indexterm"></a><p>Az ELF binárisok futtatása elõtt
	néha még szükség van a
	<span class="quote">"<span class="quote">megbélyegzés</span>"</span> (branding)
	használatára is.  Ha egy bélyegezetlen ELF
	binárist akarunk elindítani, akkor a
	következõ hibaüzenetet kapjuk:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>./egy-linux-elf-bináris</code></strong>
ELF binary type not known
Abort</pre><p>A FreeBSD rendszermagjának a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a> paranccsal
	tudunk segíteni a FreeBSD és a Linux
	binárisainak
	megkülönböztetésében.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>brandelf -t Linux egy-linux-elf-bináris</code></strong></pre><a id="idp83135952" class="indexterm"></a><p>A GNU által fejlesztett eszközök
	manapság már automatikusan elhelyezik az ELF
	binárisok azonosításához
	szükséges bélyegeket, ezért ez a
	lépés a jövõben egyre inkább
	feleslegessé válik.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83137104"></a>10.2.3. Tetszõleges RPM formátumú csomag
	telepítése</h3></div></div></div><p>A FreeBSD a telepített (akár linuxos)
	alkalmazások nyomonkövetésére
	saját csomagadatbázissal rendelkezik, amelynek
	következtében a <span class="trademark">Linux</span>(R) által
	felkínált RPM adatbázisokat nem
	támogatja.</p><p>Ennek ellenére akármelyik RPM alapú
	<span class="trademark">Linux</span>(R) alkalmazás telepíthetõ
	rendszerünkre a következõ módon:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /compat/linux</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rpm2cpio -q &lt; /a/linuxos/allomány.helye.rpm | cpio -id</code></strong></pre><p>Ezt követõen a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a>
	segítségével állítsuk be az ELF
	binárisokat (könyvtárakat viszont ne!)
	megfelelõ típusúra.  Ekkor ugyan nem
	leszünk képesek rendesen eltávolítani
	az így telepített szoftvert, de ez a
	módszer teszteléshez megfelelõ.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83142608"></a>10.2.4. A névfeloldó
	beállítása</h3></div></div></div><p>Ha a névfeloldás (DNS) valamiért nem
	mûködne, vagy egy ehhez hasonló üzenetet
	kapunk:</p><pre class="screen">resolv+: "bind" is an invalid keyword resolv+:
"hosts" is an invalid keyword</pre><p>Akkor a <code class="filename">/compat/linux/etc/host.conf</code>
	állományba be kell illesztenünk a
	következõ sorokat:</p><pre class="programlisting">order hosts, bind
multi on</pre><p>Az itt megszabott sorrend szerint elõször az
	<code class="filename">/etc/hosts</code> állományt
	nézi át, és majd csak ezután
	próbálja meg feloldani a nevet.  Ha a
	<code class="filename">/compat/linux/etc/host.conf</code>
	állomány nem létezik, akkor a linuxos
	alkalmazás a FreeBSD <code class="filename">/etc/host.conf</code>
	állományát találja meg, és
	panaszkodni fog a FreeBSD eltérõ
	formátumára.  Távolítsuk el a
	<code class="literal">bind</code> szócskát, ha nem
	állítottunk be névszervert az
	<code class="filename">/etc/resolv.conf</code>
	állományhoz.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="linuxemu.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="linuxemu.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="linuxemu-mathematica.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">10. fejezet - Bináris Linux kompatibilitás </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 10.3. A <span class="trademark">Mathematica</span>(R) telepítése</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>