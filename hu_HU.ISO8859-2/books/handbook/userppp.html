<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>27.2. A felhasználói PPP alkalmazása</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="ppp-and-slip.html" title="27. fejezet - A PPP és a SLIP" /><link rel="prev" href="ppp-and-slip.html" title="27. fejezet - A PPP és a SLIP" /><link rel="next" href="ppp.html" title="27.3. A rendszerszintû PPP alkalmazása" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">27.2. A felhasználói PPP alkalmazása</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ppp-and-slip.html">Vissza</a> </td><th width="60%" align="center">27. fejezet - A PPP és a SLIP</th><td width="20%" align="right"> <a accesskey="n" href="ppp.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="userppp"></a>27.2. A felhasználói PPP alkalmazása</h2></div><div><span class="authorgroup">Frissítette és javította:
	    <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span>, <span class="firstname">Tom</span></span>. </span></div><div><span class="authorgroup">Eredetileg készítette: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Somers</span>, <span class="firstname">Brian</span></span>. </span></div><div><span class="authorgroup">Segített még: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Clayton</span>, <span class="firstname">Nik</span></span>, <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Frömberg</span>, <span class="firstname">Dirk</span></span> és <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Childs</span>, <span class="firstname">Peter</span></span>. </span></div></div></div><div xmlns="" class="warning"><h3 class="admontitle">Figyelem: </h3><p xmlns="http://www.w3.org/1999/xhtml">A FreeBSD 8.0 változatától
	kezdõdõen a soros portokhoz tartozó
	eszközök nevei
	<code class="filename">/dev/cuadN</code>
	helyett
	<code class="filename">/dev/cuauN</code>,
	illetve
	<code class="filename">/dev/ttydN</code>
	helyett
	<code class="filename">/dev/ttyuN</code>
	lettek.  A FreeBSD 7.<em class="replaceable"><code>X</code></em>
	felhasználóknak ezeknek a
	változásoknak megfelelõen kell olvasniuk az
	itt szereplõ dokumentációt.
	</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95041232"></a>27.2.1. A felhasználói PPP</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95041872"></a>27.2.1.1. Elõfeltételek</h4></div></div></div><p>A leírás feltételezi, hogy
	  rendelkezünk a következõkkel:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Olyan internet-elõfizetés, ahol PPP-n<a id="ppp-ppp2" class="indexterm"></a>
	      keresztül csatlakozunk</p></li><li class="listitem"><p>Egy modem vagy más olyan
	      rendszerünkhöz csatlakozó eszköz,
	      amelyen keresztül el tudjuk érni az
	      internet-szolgáltatónkat<a id="ppp-isp" class="indexterm"></a></p></li><li class="listitem"><p>Az internet-elõfizetés
	      betárcsázásához
	      szükséges telefonszámok</p></li><li class="listitem"><p>A bejelentkezési nevünk<a id="ppp-login" class="indexterm"></a> és
	      jelszavunk<a id="ppp-password" class="indexterm"></a>.  (Vagy a megszokott <span class="trademark">UNIX</span>(R)-os<a id="ppp-unix" class="indexterm"></a>
	      felhasználói név és
	      jelszó páros, vagy egy PAP<a id="ppp-pap" class="indexterm"></a> esetleg CHAP<a id="ppp-chap" class="indexterm"></a>
	      bejelentkezési név és
	      jelszó.)</p></li><li class="listitem"><p>Egy vagy több névszerver<a id="ppp-nameserver" class="indexterm"></a> IP-címe.
	      Ehhez az internet-szolgáltatók
	      általában két IP-címet adnak
	      meg.  Ha egyet sem kaptunk, akkor a
	      <code class="filename">ppp.conf</code> állományban
	      erre a célra használhatjuk az
	      <code class="command">enable dns</code> parancsot, és ekkor a
	      <span class="application">ppp</span> majd automatikusan be fogja
	      állítani nekünk a
	      névszervereket.  Ezt a lehetõséget az
	      befolyásolja, hogy az
	      internet-szolgáltató oldalán
	      mûködõ PPP implementáció
	      támogatja-e a névfeloldás
	      egyeztetését (DNS negotiation).</p></li></ul></div><p>A következõ információkat is
	  megkaphatjuk az
	  internet-elõfizetésünkhöz, de nem
	  feltétlenül szükségesek:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Az internet-szolgáltató
	      átjárójának IP-címe.
	      Az átjáró az a gép, amelyen
	      keresztül a gépünk csatlakozik és
	      számára ez lesz az
	      <span class="emphasis"><em>alapértelmezett
	      átjáró</em></span>.  Ha nem
	      rendelkezünk ezzel az információval,
	      akkor csak állítsunk be valamit, és
	      majd a csatlakozáskor a szolgáltató
	      PPP szervere felülírja a megfelelõ
	      beállításokkal.</p><p>Erre a címre a <span class="application">ppp</span>
	      <code class="literal">HISADDR</code> néven hivatkozik.</p></li><li class="listitem"><p>A használandó hálózati
	      maszk.  Amennyiben a szolgáltató ezt nem
	      adta meg, nyugodtan használjuk erre a <code class="systemitem">255.255.255.255</code>
	      értéket.</p></li><li class="listitem"><p>Ha a szolgáltatónk statikus
	      IP-címet<a id="ppp-static-ip" class="indexterm"></a> és rögzített
	      hálózati nevet is biztosít
	      nekünk, ezt is megadhatjuk.  Minden más
	      esetben egyszerûen csak hagyjuk, hogy a rendszer
	      automatikusan válasszon nekünk egyet.</p></li></ul></div><p>Ha a szükséges információknak
	  nem vagyunk birtokában, akkor vegyük fel a
	  kapcsolatot az internet-szolgáltatókkal.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ebben a szakaszban a példákban
	    szereplõ konfigurációs
	    állományok sorait számozva
	    láthatjuk.  Ezek a sorszámok a
	    bemutatás és a tárgyalás
	    megkönnyítése érdekében
	    szerepelnek, és nem az eredeti
	    állományok részei.  Mindezek mellett a
	    tabulátorok és szóközök
	    megfelelõ használata is fontos.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95073488"></a>27.2.1.2. A <span class="application">PPP</span> automatikus
	  beállítása</h4></div></div></div><a id="idp95074512" class="indexterm"></a><p>A <code class="command">ppp</code> és a
	  <code class="command">pppd</code> (a PPP rendszerszintû
	  megvalósítása) egyaránt az
	  <code class="filename">/etc/ppp</code>
	  könyvtárban található
	  konfigurációs állományokat
	  használja.  A felhasználói PPP-hez
	  ezenkívül még a
	  <code class="filename">/usr/share/examples/ppp/</code>
	  könyvtárban vannak példák.</p><p>A <code class="command">ppp</code> parancs
	  beállítása az igényeinktõl
	  függõen számos állomány
	  módosítását igényelheti.  A
	  tartalmukat nagyban befolyásolja, hogy a
	  szolgáltatónk részérõl a
	  címeket kiosztása statikus (vagyis egy adott
	  címet kapunk és folyamatosan azt
	  használjuk) esetleg dinamikus (vagyis az
	  IP-címünk minden egyes
	  kapcsolódáskor más és
	  más).</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-staticIP"></a>27.2.1.2.1. PPP statikus IP-címmel</h5></div></div></div><a id="idp95087568" class="indexterm"></a><p>Ebben az esetben az
	    <code class="filename">/etc/ppp/ppp.conf</code>
	    konfigurációs állományt kell
	    átszerkesztenünk.  Tartalma az alábbi
	    példához hasonlítható.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">A <code class="literal">:</code> karakterrel
	      végzõdõ sorok mindig az elsõ
	      oszlopban kezdõdnek (tehát a sor
	      elején), míg az összes többi sort
	      tabulátorok vagy szóközök
	      használatával bentebb kell raknunk.</p></div><pre class="programlisting">1     default:
2       set log Phase Chat LCP IPCP CCP tun command
3       ident user-ppp VERSION (built COMPILATIONDATE)
4       set device /dev/cuau0
5       set speed 115200
6       set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 5 \
7                 \"\" AT OK-AT-OK ATE1Q0 OK \\dATDT\\T TIMEOUT 40 CONNECT"
8       set timeout 180
9       enable dns
10
11    szolgaltato:
12      set phone "(123) 456 7890"
13      set authname ize
14      set authkey mize
15      set login "TIMEOUT 10 \"\" \"\" gin:--gin: \\U word: \\P col: ppp"
16      set timeout 300
17      set ifaddr <em class="replaceable"><code>x.x.x.x</code></em> <em class="replaceable"><code>y.y.y.y</code></em> 255.255.255.255 0.0.0.0
18      add default HISADDR</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">1. sor:</span></dt><dd><p>Ez azonosítja be az alapértelmezett
		  bejegyzést.  Az itt szereplõ parancsok a
		  <code class="command">ppp</code> minden egyes futásakor
		  magukból végrehajtódnak.</p></dd><dt><span class="term">2. sor:</span></dt><dd><p>Beállítja a naplózás
		  paramétereit.  Amikor a
		  beállításaink már
		  kifogástalanul mûködnek, akkor ezt a
		  sort érdemes átírni a
		  következõre:</p><pre class="programlisting">set log phase tun</pre><p>Ezzel jelentõs mértékben vissza
		  tudjuk fogni a naplózás
		  mértékét.</p></dd><dt><span class="term">3. sor:</span></dt><dd><p>Ezzel mondjuk meg a PPP-nek, hogy a többiek
		  felé miként azonosítsa
		  magát.  A PPP akkor azonosítja
		  magát a társak felé, ha
		  valamilyen gondja akad az egyeztetésekkel
		  és a kapcsolat
		  beállításával.  Az
		  így továbbított
		  információk a másik oldal
		  rendszergazdái számára
		  nyújthatnak segítséget az ilyen
		  jellegû problémák
		  felderítésében.</p></dd><dt><span class="term">4. sor:</span></dt><dd><p>Itt adjuk meg az eszközt, amelyre a modem
		  csatlakozik.  A <code class="filename">COM1</code> neve
		  <code class="filename">/dev/cuau0</code>, a
		  <code class="filename">COM2</code> neve pedig <code class="filename">/dev/cuau1</code>.</p></dd><dt><span class="term">5. sor:</span></dt><dd><p>A csatlakozás sebességét
		  adjuk meg.  Ha a 115 200-as érték
		  itt nem mûködne (ez egyébként
		  minden újabb gyártmányú
		  modem esetében elfogadható), akkor
		  helyette használjuk a 38400-as
		  beállítást.</p></dd><dt><span class="term">6. és 7. sorok:</span></dt><dd><p>A híváshoz használt
		  karakterlánc.  A felhasználói PPP<a id="idp95104208" class="indexterm"></a>
		  a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chat</span>(8)</span></a> programhoz hasonló
		  <span class="quote">"<span class="quote">küldök-várok</span>"</span>
		  típusú szerkesztést alkalmaz.  A
		  kihasználható
		  lehetõségekrõl a man oldalán
		  olvashatunk részletesebben.</p><p>Az olvashatóság
		  kedvéért a parancs a következõ
		  sorban folytatódik.  A
		  <code class="filename">ppp.conf</code>
		  állományban bármelyik parancs,
		  ahol a <code class="literal">\</code> karakterrel zárjuk
		  a sort, az ugyanígy folytatható a
		  következõben.</p></dd><dt><span class="term">8. sor:</span></dt><dd><p>A kapcsolathoz tartozó
		  üresjárati idõt állítja
		  be.  Ennek értéke alapból
		  180 másodperc, így ez a sor
		  pusztán csak az érthetõséget
		  szolgálja.</p></dd><dt><span class="term">9. sor:</span></dt><dd><p>Arra utasítja a PPP-t, hogy a
		  többiektõl kérdezze le a helyi
		  névfeloldó
		  beállításait.  Ha saját
		  névszervert futtatunk, akkor ezt a sort
		  tegyük inkább megjegyzésbe vagy
		  töröljük ki.</p></dd><dt><span class="term">10. sor:</span></dt><dd><p>Ez az üres sor az
		  átláthatóság
		  kedvéért került bele.  A PPP az
		  összes üres sort figyelmen kívül
		  hagyja.</p></dd><dt><span class="term">11. sor:</span></dt><dd><p>Itt kezdõdik a <span class="quote">"<span class="quote">szolgaltato</span>"</span>
		  nevû szolgáltatóhoz tartozó
		  bejegyzés.  Ezt késõbb akár
		  ki is cserélhetjük az
		  internet-szolgáltatónk nevére,
		  így a <code class="option">load
		  <em class="replaceable"><code>szolgáltató</code></em></code>
		  beállítással tudjuk majd
		  beindítani a kapcsolatot.</p></dd><dt><span class="term">12. sor:</span></dt><dd><p>Beállítjuk a
		  szolgáltatóhoz tartozó
		  telefonszámot.  A kettõspont
		  (<code class="literal">:</code>) vagy a csõvezeték
		  (<code class="literal">|</code>) karakterekkel
		  elválasztva több telefonszámot is
		  meg tudunk adni.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> oldalon olvashatunk a
		  két elválasztó közti
		  különbségekrõl.  Röviden
		  ezeket úgy foglalhatnánk össze,
		  hogy ha váltogatni akarunk a számok
		  között, akkor használjuk a
		  kettõspontot.  Ha mindig az elsõként
		  megadott számot akarjuk hívni és
		  a többit csak akkor, ha ez nem mûködik,
		  akkor a csõvezeték karakterre lesz
		  szükségünk.  Ahogy a példa is
		  mutatja, az összes telefonszámot
		  tegyük mindig idézõjelek
		  közé.</p><p>Ha a telefonszámban egyébként
		  is szerepelnek szóközök, akkor is
		  idézõjelek (<code class="literal">"</code>)
		  közé kell tennünk.  Ennek
		  elhagyásával egy egyszerû,
		  ámde kényes hibát
		  ejtünk.</p></dd><dt><span class="term">13. és 14. sor:</span></dt><dd><p>A felhasználói nevet és
		  jelszót tartalmazza.  Amikor egy <span class="trademark">UNIX</span>(R)
		  fajtájú bejelentkezést kapunk,
		  akkor ezekre az értékekre a <code class="command">set
		  login</code> parancsban \U és \P
		  változókkal tudunk hivatkozni.  Ha PAP
		  vagy CHAP használatával
		  jelentkezünk be, akkor ezek az
		  értékek a hitelesítéskor
		  kerülnek felhasználásra.</p></dd><dt><span class="term">15. sor:</span></dt><dd><p>Ha a PAP<a id="idp95130832" class="indexterm"></a> vagy CHAP<a id="idp95131344" class="indexterm"></a> protokollok valamelyikét
		  használjuk, akkor nem lesz
		  szükségünk a login
		  változóra, ezért ezt
		  megjegyzésbe is tehetjük, vagy akár
		  ki is törölhetjük.  A <a class="link" href="userppp.html#userppp-PAPnCHAP" title="27.2.1.2.12. A PAP és CHAP hitelesítés">PAP és CHAP
		  hitelesítésrõl</a>
		  szóló részben olvashatjuk ennek
		  további részleteit.</p><p>A bejelentkezéshez használt
		  karakterlánc hasonlít a
		  behíváshoz használt,
		  chat-szerû felépítéssel
		  rendelkezõ karakterlánchoz.  A
		  példában látható
		  karakterlánc egy olyan
		  szolgáltatáshoz illeszkedik, ahol a
		  bejelentkezés valahogy így néz
		  ki:</p><pre class="screen">A Világ Legjobb Szolgáltatója
login: <em class="replaceable"><code>izé</code></em>
password: <em class="replaceable"><code>mizé</code></em>
protocol: ppp</pre><p>Ezt a szkriptet alakítsuk a saját
		  igényeinkhez.  Ha elõször
		  próbálkozunk ilyen szkript
		  írásával, akkor lehetõleg
		  kapcsoljuk be a rendszerek között
		  lezajló
		  <span class="quote">"<span class="quote">beszélgetés</span>"</span>
		  naplózását, hogy ellenõrizni
		  tudjuk minden a megfelelõen módon
		  történik-e.</p></dd><dt><span class="term">16. sor:</span></dt><dd><p>Beállítjuk a kapcsolathoz
		  tartozó alapértelmezett
		  idõkorlátot<a id="idp95136336" class="indexterm"></a> (másodpercben).  Itt a
		  kapcsolat automatikusan lezárul
		  300 másodperc tétlenséget
		  követõen.  Ha nem akarunk ilyen
		  korlátot szabni, akkor ezt az
		  értéket állítsuk
		  nullára vagy használjuk a
		  <code class="option">-ddial</code> paranccsori
		  kapcsolót.</p></dd><dt><span class="term">17. sor:</span></dt><dd><p>A felülethez tartozó címeket
		  állítja be.  A
		  <em class="replaceable"><code>x.x.x.x</code></em> helyére a
		  szolgáltató<a id="idp95139280" class="indexterm"></a> által kiosztott
		  IP-címet kell beírnunk.  A
		  <em class="replaceable"><code>y.y.y.y</code></em> helyett pedig a
		  szolgáltató
		  átjárója kerül be
		  (lényegében az a gép, amelyhez
		  csatlakozunk).  Amennyiben az
		  internet-szolgáltatónk nem adott meg
		  semmilyen átjárót, erre a
		  célra a <code class="systemitem">10.0.0.2/0</code> címet is
		  használhatjuk.  Amikor <span class="quote">"<span class="quote">nekünk kell
		  kitalálnunk</span>"</span> ezeket a címeket,
		  akkor ne felejtsünk el létrehozni
		  hozzájuk egy bejegyzést az
		  <code class="filename">/etc/ppp/ppp.linkup</code>
		  állományban a <a class="link" href="userppp.html#userppp-dynamicIP" title="27.2.1.2.2. PPP dinamikus IP-címmel">PPP dinamikus
		  IP-címmel </a> szakaszban szereplõek
		  szerint.  Ha nem adjuk meg ezt a sort, akkor a
		  <code class="command">ppp</code> parancs nem képes
		  <code class="option">-auto</code> módban
		  mûködni.</p></dd><dt><span class="term">18. sor:</span></dt><dd><p>A szolgáltató
		  átjárójához felvesz egy
		  alapértelmezett útvonalat.  A
		  <code class="literal">HISADDR</code> kulcsszót a 17.
		  sorban megadott átjáró
		  címével helyettesítjük.
		  Ezért fontos, hogy ez a 17.  sor után
		  szerepeljen, különben a
		  <code class="literal">HISADDR</code> nem lesz képes
		  inicializálódni.</p><p>Ha a <code class="command">ppp</code> parancsot nem akarjuk
		  <code class="option">-auto</code> módban futtatni, akkor ezt
		  a sort a <code class="filename">ppp.linkup</code>
		  állományba is átrakhatjuk.</p></dd></dl></div><p>Ha statikus IP-címmel rendelkezünk és
	    a <code class="command">ppp</code> <code class="option">-auto</code>
	    módban fut, akkor a <code class="filename">ppp.linkup</code>
	    állományba egészen addig nem kell
	    semmit sem írnunk, amíg a csatlakozás
	    elõtt az útválasztási
	    táblázatokban a megfelelõ adatok
	    találhatóak.  Olyankor is jól
	    jöhet, amikor a csatlakozást követõen
	    meg akarunk hívni bizonyos programokat.  Ezt majd a
	    <span class="application">sendmail</span>es példában
	    fogjuk bõvebben kifejteni.</p><p>Erre példákat a
	    <code class="filename">/usr/share/examples/ppp/</code>
	    könyvtárban találhatunk.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-dynamicIP"></a>27.2.1.2.2. PPP dinamikus IP-címmel</h5></div></div></div><a id="idp95155024" class="indexterm"></a><a id="idp95156176" class="indexterm"></a><p>Ha az internet-szolgáltatónktól nem
	    kaptunk statikus IP-címet, akkor a
	    <code class="command">ppp</code> paranccsal is be tudjuk
	    állítani a helyi és távoli
	    címeket.  Ez az IP-címek
	    <span class="quote">"<span class="quote">kitalálásával</span>"</span>
	    történik, valamint úgy, hogy a
	    <code class="command">ppp</code> számára a
	    csatlakozás után lehetõvé
	    tesszük az IP konfigurációs protocol (IP
	    Configuration Protocol, IPCP) használatát.  A
	    <code class="filename">ppp.conf</code> tartalma szinte teljesen
	    megegyezik a <a class="link" href="userppp.html#userppp-staticIP" title="27.2.1.2.1. PPP statikus IP-címmel">PPP statikus
	    IP-címmel</a> részben szereplõvel,
	    egyetlen apró különbséggel:</p><pre class="programlisting">17      set ifaddr 10.0.0.1/0 10.0.0.2/0 255.255.255.255</pre><p>Ismét szeretnénk elmondani, hogy a
	    sorszámot ne írjuk bele, hiszen az csak
	    hivatkozási céllal szerepel.  Legalább
	    egy szóközzel kezdjünk bentebb.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">17. sor:</span></dt><dd><p>A <code class="literal">/</code> után megjelenõ
		  szám azoknak a biteknek a számát
		  adja meg, amire a ppp támaszkodik.  A
		  környezetünknek jobban megfelelõ
		  IP-címeket is megadhatunk, de a fenti
		  példa minden esetben mûködni
		  fog.</p><p>Az utolsó paraméterrel
		  (<code class="literal">0.0.0.0</code>) azt mondjuk a PPP-nek,
		  hogy az egyeztetést ne a <code class="systemitem">10.0.0.1</code>, hanem a <code class="systemitem">0.0.0.0</code> címmel kezdje
		  meg, amire egyes szolgáltatók
		  esetén szükségünk is lesz.  A
		  <code class="command">set ifaddr</code> elsõ
		  paramétereként azonban soha ne adjuk meg
		  a <code class="literal">0.0.0.0</code> címet, mivel ezzel
		  a PPP <code class="option">-auto</code> módban nem tudja
		  beállítani a kezdeti
		  útvonalat.</p></dd></dl></div><p>Ha nem <code class="option">-auto</code> módban
	    indítjuk, akkor az
	    <code class="filename">/etc/ppp/ppp.linkup</code>
	    állományban meg kell adnunk még egy
	    bejegyzést is.  A <code class="filename">ppp.linkup</code>
	    állományt a kapcsolat létrejötte
	    után dolgozzuk fel.  Itt már a
	    <code class="command">ppp</code> megkapta a felülethez
	    tartozó címeket, így az
	    útválasztási táblázatba
	    fel tudjuk venni hozzájuk a megfelelõ
	    bejegyzéseket:</p><pre class="programlisting">1     szolgaltato:
2      add default HISADDR</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">1. sor:</span></dt><dd><p>A kapcsolat felépítése
		  során a <code class="command">ppp</code> a
		  <code class="filename">ppp.linkup</code>
		  állományban a következõ
		  szabályok szerint fogja keresni a
		  bejegyzéseket: elõször a
		  <code class="filename">ppp.conf</code>
		  állományban megadott
		  címkét próbálja
		  megtalálni.  Ha ez nem sikerül, akkor az
		  átjárónknak megfelelõ
		  bejegyzést kezdi el keresni.  Ez egy
		  négy byte-ból álló,
		  felírásában az IP-címekhez
		  hasonlító címke.  Ha még
		  ez a címke sem található, akkor a
		  <code class="literal">MYADDR</code> bejegyzést
		  keresi.</p></dd><dt><span class="term">2. sor:</span></dt><dd><p>Ez a sor mondja meg a <code class="command">ppp</code>
		  programnak, hogy vegyen fel egy
		  <code class="literal">HISADDR</code> címre
		  vonatkozó alapértelmezett
		  útvonalat.  A <code class="literal">HISADDR</code>
		  címet az IPCP által egyeztetett
		  átjáró IP-címére
		  cseréljük ki.</p></dd></dl></div><p>Ha erre a részletesebb példát
	    akarunk látni, akkor a
	    <code class="filename">/usr/share/examples/ppp/ppp.conf.sample</code>
	    és
	    <code class="filename">/usr/share/examples/ppp/ppp.linkup.sample</code>
	    állományokban a <code class="literal">pmdemand</code>
	    bejegyzést nézzük meg.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95192400"></a>27.2.1.2.3. A bejövõ hívások
	    fogadása</h5></div></div></div><a id="idp95193040" class="indexterm"></a><p>Amikor egy helyi hálózathoz
	    csatlakozó gépen akarjuk a
	    <span class="application">ppp</span> programot
	    beállítani a bejövõ
	    hívások fogadására, akkor azt is
	    el kell döntenünk, hogy
	    engedélyezzük-e a csomagok
	    továbbküldését a belsõ
	    hálózat felé.  Amennyiben igen, akkor a
	    becsatlakozó gépenek a belsõ
	    hálózatunkon ki kell osztani egy
	    külön címet és az
	    <code class="filename">/etc/ppp/ppp.conf</code>
	    állományban, és meg kell adnunk az
	    <code class="command">enable proxy</code> parancsot.  Emellett
	    még az <code class="filename">/etc/rc.conf</code>
	    állományban se feleljtsük el megadni a
	    következõ sort:</p><pre class="programlisting">gateway_enable="YES"</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95196752"></a>27.2.1.2.4. Melyik getty?</h5></div></div></div><p><a class="link" href="dialup.html" title="26.4. Betárcsázós szolgáltatások">A FreeBSD
	    beállítása
	    betárcsázós kapcsolatokhoz</a>
	    nagyon jól bemutatja a
	    betárcsázós
	    szolgáltatások
	    beállítását a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>
	    segítségével.</p><p>A <code class="command">getty</code> helyett
	    egyébként az <a class="link" href="http://mgetty.greenie.net/" target="_top">mgetty</a>, a <code class="command">getty</code> egy ügyesebb
	    változata is használható (a <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/comms/mgetty+sendfax/pkg-descr">comms/mgetty+sendfax</a>
	    portból), amely kifejezetten a
	    betárcsázós vonalakhoz
	    készült.</p><p>A <code class="command">mgetty</code> használatának
	    többek közt az egyik elõnye, hogy
	    <span class="emphasis"><em>aktívan tartja a kapcsolatot</em></span> a
	    modemekkel, tehát hogy ha az
	    <code class="filename">/etc/ttys</code> állományban
	    letiltjuk a modemet, akkor nem is fog válaszolni a
	    hívásokra.</p><p>Emellett az <code class="command">mgetty</code>
	    késõbbi változatai (a 0.99 beta
	    változatától kezdve) még a PPP
	    folyamok automatikus észlelését is
	    támogatják, ezáltal a kliensek
	    szkriptek nélkül is képesek elérni
	    a szerverünket.</p><p>Ha errõl többet akarunk megtudni, akkor az
	    <code class="command">mgetty</code> paranccsal kapcsolatban olvassuk
	    el <a class="link" href="userppp.html#userppp-mgetty" title="27.2.1.2.10. Az mgetty és az AutoPPP">Az mgetty és az
	    AutoPPP</a> címû szakaszt.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95209040"></a>27.2.1.2.5. A <span class="application">PPP</span>
	    engedélyei</h5></div></div></div><p>A <code class="command">ppp</code> parancsot
	    általában <code class="systemitem">root</code>
	    felhasználóként kell futtatni.  Ha
	    viszont a <code class="command">ppp</code> parancsot tetszõleges
	    felhasználóval akarjuk szerver módban
	    futtatni az iméntiek szerint, akkor ahhoz fel kell
	    vennünk az <code class="filename">/etc/group</code>
	    állományban szereplõ
	    <code class="systemitem">network</code> csoportba.</p><p>Ezeken kívül még az
	    <code class="command">allow</code> paranccsal is
	    engedélyeznünk kell konfigurációs
	    állomány egy vagy több
	    részének elérését
	    is:</p><pre class="programlisting">allow users fred mary</pre><p>Ha ezt a parancsot a <code class="literal">default</code>
	    bejegyzésnél adjuk meg, akkor az így
	    megadott felhasználók mindenhez hozzá
	    tudnak férni.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95214800"></a>27.2.1.2.6. PPP shellek a dinamikus IP-címek
	    használóinak</h5></div></div></div><a id="idp95215440" class="indexterm"></a><p>Hozzunk létre egy
	    <code class="filename">/etc/ppp/ppp-shell</code> nevû
	    állományt, amelyben a következõk
	    szerepelnek:</p><pre class="programlisting">#!/bin/sh
IDENT=`echo $0 | sed -e 's/^.*-\(.*\)$/\1/'`
CALLEDAS="$IDENT"
TTY=`tty`

if [ x$IDENT = xdialup ]; then
        IDENT=`basename $TTY`
fi

echo "PPP for $CALLEDAS on $TTY"
echo "Starting PPP for $IDENT"

exec /usr/sbin/ppp -direct $IDENT</pre><p>Ez a szkript legyen végrehajtható.
	    Ezután az alábbi paranccsal
	    <code class="filename">ppp-dialup</code> néven
	    készítsünk egy szimbolikus linket erre a
	    szkriptre:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s ppp-shell /etc/ppp/ppp-dialup</code></strong></pre><p>Ez a szkript lesz az összes
	    betárcsázó felhasználónk
	    <span class="emphasis"><em>shellje</em></span>.  A most következõ
	    példa az <code class="filename">/etc/passwd</code>
	    állományban szereplõ,
	    <code class="systemitem">pchilds</code> nevû PPP
	    felhasználó bejegyzését mutatja
	    be (ne felejtsük el, hogy soha ne közvetlenül
	    szerkesszük a jelszavakat tároló
	    állományt, hanem a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a>
	    segítségével).</p><pre class="programlisting">pchilds:*:1011:300:Peter Childs PPP:/home/ppp:/etc/ppp/ppp-dialup</pre><p>Hozzunk létre egy <code class="filename">/home/ppp</code> nevû
	    könyvtárat a következõ bárki
	    által olvasható 0 byte-os
	    állományokkal:</p><pre class="screen">-r--r--r--   1 root     wheel           0 May 27 02:23 .hushlogin
-r--r--r--   1 root     wheel           0 May 27 02:22 .rhosts</pre><p>Ezek hatására az
	    <code class="filename">/etc/motd</code> állomány
	    tartalma nem jelenik meg.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95223760"></a>27.2.1.2.7. PPP shellek a statikus IP-címek
	    használóinak</h5></div></div></div><a id="idp95224528" class="indexterm"></a><p>Az iméntiekhez hasonló módon
	    készítsük el a
	    <code class="filename">ppp-shell</code> állományt,
	    és mindegyik statikus IP-vel rendelkezõ
	    hozzáféréshez csináljunk egy
	    szimbolikus linket a <code class="filename">ppp-shell</code>
	    szkriptre.</p><p>Például, ha három
	    betárcsázós ügyfelünk van,
	    <code class="systemitem">fred</code>, <code class="systemitem">sam</code>
	    és <code class="systemitem">mary</code>, feléjük
	    24 bites CIDR hálózatokat
	    közvetítünk, akkor a következõket
	    kell begépelnünk:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-fred</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-sam</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-mary</code></strong></pre><p>A fentebb szereplõ betárcsázós
	    felhasználók eléréseihez
	    tartozó shelleket állítsuk be az itt
	    létrehozott szimbolikus linkekre (így
	    tehát <code class="systemitem">mary</code> shellje az
	    <code class="filename">/etc/ppp/ppp-mary</code> lesz).</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95232208"></a>27.2.1.2.8. A <code class="filename">ppp.conf</code>
	    beállítása a dinamikus IP-címek
	    használóinak</h5></div></div></div><p>Az <code class="filename">/etc/ppp/ppp.conf</code>
	    állományban a következõ sorok
	    valamelyikének kellene szerepelnie:</p><pre class="programlisting">default:
  set debug phase lcp chat
  set timeout 0

ttyu0:
  set ifaddr 203.14.100.1 203.14.100.20 255.255.255.255
  enable proxy

ttyu1:
  set ifaddr 203.14.100.1 203.14.100.21 255.255.255.255
  enable proxy</pre><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">A bentebb kezdett sorokat mi is kezdjünk
	      bentebb.</p></div><p>A <code class="literal">default:</code> szakasz minden kapcsolat
	    esetén betöltõdik.  Az
	    <code class="filename">/etc/ttys</code> állományban
	    engedélyezett mindegyik
	    betárcsázós vonal létrehoz a
	    fenti <code class="literal">ttyu0:</code> szakaszhoz hasonló
	    bejegyzést.  Minden vonal kap egy egyedi
	    IP-címet a dinamikus felhasználók
	    számára szánt
	    címtartományból.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95270096"></a>27.2.1.2.9. A <code class="filename">ppp.conf</code>
	    beállítása a statikus IP-vel
	    rendelkezõk számára</h5></div></div></div><p>A <code class="filename">/usr/share/examples/ppp/ppp.conf</code>
	    állományban szereplõ tartalom mellett az
	    összes statikus kiosztású
	    IP-címmel rendelkezõ
	    betárcsázó felhasználóhoz
	    még hozzá kell tennünk egy szakaszt.  A
	    példánkban ezek továbbra is
	    <code class="systemitem">fred</code>, <code class="systemitem">sam</code>
	    és <code class="systemitem">mary</code>.</p><pre class="programlisting">fred:
  set ifaddr 203.14.100.1 203.14.101.1 255.255.255.255

sam:
  set ifaddr 203.14.100.1 203.14.102.1 255.255.255.255

mary:
  set ifaddr 203.14.100.1 203.14.103.1 255.255.255.255</pre><p>Amennyiben szükséges, az
	    <code class="filename">/etc/ppp/ppp.linkup</code> tartalmazhat
	    további útválasztási
	    információkat is az egyes statikus
	    IP-címmel rendelkezõ
	    felhasználókhoz.  A lentebb bemutatott sor a
	    kliens ppp összekötettésén
	    keresztül vesz fel egy útvonalat a <code class="systemitem">203.14.101.0/24</code> hálózat
	    felé.</p><pre class="programlisting">fred:
  add 203.14.101.0 netmask 255.255.255.0 HISADDR

sam:
  add 203.14.102.0 netmask 255.255.255.0 HISADDR

mary:
  add 203.14.103.0 netmask 255.255.255.0 HISADDR</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-mgetty"></a>27.2.1.2.10. Az <code class="command">mgetty</code> és az
	    AutoPPP</h5></div></div></div><a id="idp95276880" class="indexterm"></a><a id="idp95277520" class="indexterm"></a><a id="idp95278032" class="indexterm"></a><p>Az <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/comms/mgetty+sendfax/pkg-descr">comms/mgetty+sendfax</a> port
	    alapértelmezés szerint az
	    <code class="literal">AUTO_PPP</code>
	    beállítással érkezik, amely
	    lehetõvé teszi, hogy az
	    <code class="command">mgetty</code> képessé legyen a PPP
	    kapcsolatok LCP fázisát észlelni
	    és magától létrehozni
	    hozzá egy ppp shellt.  Mivel az
	    alapértelmezett név/jelszó páros
	    azonban ilyenkor nem jelenik meg, a
	    felhasználókat a PAP vagy a CHAP protokollon
	    keresztül lehet hitelesíteni.</p><p>Ez a szakasz most feltételezi, hogy a sikeresen
	    beállítottuk, lefordítottuk és
	    telepítettük az <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/comms/mgetty+sendfax/pkg-descr">comms/mgetty+sendfax</a>
	    portot.</p><p>Az
	    <code class="filename">/usr/local/etc/mgetty+sendfax/login.config</code>
	    állományban ne felejtsük
	    ellenõrizni, hogy szerepel a
	    következõ:</p><pre class="programlisting">/AutoPPP/ -     -		      /etc/ppp/ppp-pap-dialup</pre><p>Ezzel utasítjuk az <code class="command">mgetty</code>
	    programot arra, hogy az észlelt PPP kapcsolatokhoz
	    futtassa le a <code class="filename">ppp-pap-dialup</code>
	    szkriptet.</p><p>Hozzunk létre az
	    <code class="filename">/etc/ppp/ppp-pap-dialup</code> nevû
	    állományt, amelyben majd a
	    következõk fognak szerepelni (az
	    állomány legyen
	    végrehajtható):</p><pre class="programlisting">#!/bin/sh
exec /usr/sbin/ppp -direct pap$IDENT</pre><p>Az <code class="filename">/etc/ttys</code>
	    állományban engedélyezett összes
	    betárcsázós vonalhoz
	    készítsük el a megfelelõ
	    bejegyzést az <code class="filename">/etc/ppp/ppp.conf</code>
	    állományban.  Ezek remekül meg fognak
	    férni az imént készített
	    definíciókkal.</p><pre class="programlisting">pap:
  enable pap
  set ifaddr 203.14.100.1 203.14.100.20-203.14.100.40
  enable proxy</pre><p>Minden olyan felhasználónak, aki ezzel a
	    módszerrel jelentkezik be, szüksége lesz
	    egy név/jelszó kombinációra az
	    <code class="filename">/etc/ppp/ppp.secret</code>
	    állományban, vagy az alábbi
	    beállítás megadásával
	    választhatjuk azt is, hogy a
	    felhasználókat az
	    <code class="filename">/etc/passwd</code> állományon
	    keresztül a PAP protokoll
	    segítségével azonosítjuk.</p><pre class="programlisting">enable passwdauth</pre><p>Ha statikus IP-címet akarunk kiosztani
	    némely felhasználóknak, akkor az
	    <code class="filename">/etc/ppp/ppp.secret</code>
	    állományban ezt megadhatjuk a harmadik
	    paraméternek.  Errõl bõvebben a
	    <code class="filename">/usr/share/examples/ppp/ppp.secret.sample</code>
	    állományban láthatunk
	    példát.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95288784"></a>27.2.1.2.11. A Microsoft kiterjesztései</h5></div></div></div><a id="idp95289424" class="indexterm"></a><a id="idp95290064" class="indexterm"></a><a id="idp95290576" class="indexterm"></a><p>A PPP úgy is beállítható,
	    hogy kérésre DNS és NetBIOS
	    típusú névfeloldáshoz is
	    szolgáltasson információkat.</p><p>A PPP 1.x változatával úgy lehet
	    engedélyezni ezeket a kiterjesztéseket, ha az
	    <code class="filename">/etc/ppp/ppp.conf</code>
	    állomány megfelelõ részeibe
	    felvesszük a következõ sorokat:</p><pre class="programlisting">enable msext
set ns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</pre><p>A PPP második és késõbbi
	    változataiban pedig:</p><pre class="programlisting">accept dns
set dns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</pre><p>Ezzel a kliens megkapja az elsõdleges és
	    másodlagos névszerverek címeit,
	    valamint a NetBIOS névszervert.</p><p>Ha a második és az azt követõ
	    verziókban a <code class="literal">set dns</code> sort
	    elhagyjuk, akkor a PPP az
	    <code class="filename">/etc/resolv.conf</code>
	    állományban található
	    értékeket fogja használni.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-PAPnCHAP"></a>27.2.1.2.12. A PAP és CHAP hitelesítés</h5></div></div></div><a id="idp95296464" class="indexterm"></a><a id="idp95296976" class="indexterm"></a><p>Egyes internet-szolgáltatók úgy
	    állítják be a rendszerüket, hogy a
	    kapcsolat felépítése során a
	    hitelesítés a PAP vagy CHAP mechanizmusok
	    valamelyikével történik.  Ilyenkor a
	    szolgáltató nem egy <code class="prompt">login:</code>
	    sorral fogja bekérni a szükséges
	    adatokat, hanem közvetlenül a PPP kapcsolatot
	    kezdi el használni.</p><p>A PAP nem olyan biztonságos, mint a CHAP, de itt
	    a biztonság nem is annyira fontos, mivel a jelszavak,
	    amelyeket ugyan a PAP titkosítatlan formában
	    küld tovább, csak egy soros vonalon haladnak
	    át.  A rossz indulatú támadók
	    itt nem sok mindent tudnak
	    <span class="quote">"<span class="quote">lehallgatni</span>"</span>.</p><p>A <a class="link" href="userppp.html#userppp-staticIP" title="27.2.1.2.1. PPP statikus IP-címmel">PPP statikus
	    IP-címmel</a> és a <a class="link" href="userppp.html#userppp-dynamicIP" title="27.2.1.2.2. PPP dinamikus IP-címmel">PPP dinamikus IP
	    címmel</a> címû szakaszokhoz
	    képest a következõ
	    módosításokat kell
	    elvégeznünk:</p><pre class="programlisting">13      set authname <em class="replaceable"><code>AFelhasználóiNevem</code></em>
14      set authkey <em class="replaceable"><code>AJelszavam</code></em>
15      set login</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">13. sor:</span></dt><dd><p>Ebben a sorban adjuk meg a PAP/CHAP
		  felhasználói nevünket, amelyet
		  <em class="replaceable"><code>AFelhasználóiNevem</code></em>
		  helyett kell beírni.</p></dd><dt><span class="term">14. sor:</span></dt><dd><p>Ebben a sorban adjuk meg a PAP/CHAP jelszavunkat<a id="idp95321424" class="indexterm"></a>,
		  <em class="replaceable"><code>AJelszavam</code></em> helyett.
		  Szándénkunk
		  egyértelmûsítése
		  érdekében ezek mellett még egy
		  további sort is érdemes felvennünk,
		  tehát:</p><pre class="programlisting">16      accept PAP</pre><p>vagy</p><pre class="programlisting">16      accept CHAP</pre><p>Alapértelmezés szerint a PAP
		  és CHAP is egyaránt elfogadott.</p></dd><dt><span class="term">15. sor:</span></dt><dd><p>A PAP és CHAP alkalmazásakor
		  általában nem is kell
		  bejelentkeznünk a szolgáltató
		  szerverére.  Ezért a <span class="quote">"<span class="quote">set
		  login</span>"</span> parancsnál használt
		  karakterláncot le is kell tiltanunk.</p></dd></dl></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95330640"></a>27.2.1.2.13. A <code class="command">ppp</code>
	    beállításainak
	    megváltoztatása menet közben</h5></div></div></div><p>A háttérben futó
	    <code class="command">ppp</code> programhoz menet közben is
	    tudunk beszélni, de csak olyankor, amikor az ehhez
	    szükséges portot megadtuk.  Ezt úgy
	    tudjuk megtenni, ha beállítások
	    közé felvesszük az alábbit:</p><pre class="programlisting">set server /var/run/ppp-tun<em class="replaceable"><code>%d</code></em> DiagnosticPassword 0177</pre><p>Így a PPP az elõre megadott <span class="trademark">UNIX</span>(R)
	    tartománybeli socketen keresztül fogja
	    várni a kapcsolódásunkat, és a
	    konkrét hozzáféréshez
	    jelszót kér.  A névben szereplõ
	    <code class="literal">%d</code> a használatban levõ
	    <code class="filename">tun</code> eszköz
	    sorszámát jelöli.</p><p>Miután a csatlakozás
	    beállítódott, a szkriptekben a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pppctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pppctl</span>(8)</span></a> program használható a
	    futó program
	    vezérléséhez.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-nat"></a>27.2.1.3. A PPP hálózati
	  címfordítási
	  képességének
	  kihasználása</h4></div></div></div><a id="idp95337296" class="indexterm"></a><p>A PPP képes a rendszermag
	  rásegítése nélkül
	  képes hálózati
	  címfordítást végezni.  Ezt a
	  lehetõséget a következõ sor
	  hozzáadásával tudjuk aktiválni az
	  <code class="filename">/etc/ppp/ppp.conf</code>
	  állományban:</p><pre class="programlisting">nat enable yes</pre><p>A PPP-be épített hálózati
	  címfordítás a <code class="literal">-nat</code>
	  parancssori paraméterrel is bekapcsolható.  Az
	  <code class="filename">/etc/rc.conf</code> állományban is
	  található hozzá egy
	  <code class="literal">ppp_nat</code> változó, amely
	  alapértelmezés szerint
	  engedélyezett.</p><p>Amikor használjuk ezt a lehetõséget, az
	  <code class="filename">/etc/ppp/ppp.conf</code>
	  állományban a következõ
	  opciókkal engedélyezhetjük a
	  bejövõ kapcsolatok
	  továbbítását:</p><pre class="programlisting">nat port tcp 10.0.0.2:ftp ftp
nat port tcp 10.0.0.2:http http</pre><p>vagy egyáltalán ne bízzunk meg a
	  külvilágban:</p><pre class="programlisting">nat deny_incoming yes</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-final"></a>27.2.1.4. A rendszer végsõ
	  beállítása</h4></div></div></div><a id="idp95347920" class="indexterm"></a><p>Mostanra ugyan már beállítottuk a
	  <code class="command">ppp</code> programot, azonban még
	  néhány dolgot be kell állítanunk,
	  mielõtt ténylegesen nekilátnánk
	  használni.  Ezek mindegyike az
	  <code class="filename">/etc/rc.conf</code> állomány
	  módosítását igényli.</p><p>Az állományt fentrõl lefelé
	  fogjuk feldolgozni, de elõtte ne felejtsünk el
	  értéket adni a <code class="literal">hostname=</code>
	  változónak, például:</p><pre class="programlisting">hostname="ize.minta.com"</pre><p>Amennyiben a szolgáltatónk statikus
	  IP-címet és nevet biztosít
	  számunkra, az lesz a legjobb, ha itt a tõle kapott
	  nevet adjuk meg.</p><p>Keressük meg a <code class="literal">network_interfaces</code>
	  változót.  Ha a rendszerünkben
	  kérésre akarjuk tárcsázni a
	  szolgáltatónkat, akkor a
	  <code class="filename">tun0</code> eszközt mindenképpen
	  vegyük fel az értékébe, minden
	  más esetben pedig távolítsuk el.</p><pre class="programlisting">network_interfaces="lo0 tun0"
ifconfig_tun0=</pre><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Az <code class="literal">ifconfig_tun0</code>
	    változónak üres értéket
	    kell megadnunk, és létre kell hoznunk egy
	    <code class="filename">/etc/start_if.tun0</code> nevû
	    állományt.  Ebben a következõ sornak
	    kell szerepelnie:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">ppp -auto <em class="replaceable"><code>arendszerem</code></em></pre><p xmlns="http://www.w3.org/1999/xhtml">Ez a szkript a hálózat
	    beállításakor fut le, és a ppp
	    démont automatikus módban indítja el.
	    Ha az adott gép egy helyi hálózat
	    átjárója is egyben, akkor az
	    <code class="option">-alias</code> kapcsolót is érdemes
	    megadnunk mellette.  A pontosabb részletek
	    tekintetében olvassuk el a megfelelõ man
	    oldalt.</p></div><p>Az <code class="filename">/etc/rc.conf</code>
	  állományban a <code class="literal">NO</code>
	  érték megadásával tiltsuk le az
	  útválasztást végzõ program
	  használatát:</p><pre class="programlisting">router_enable="NO"</pre><a id="idp95357904" class="indexterm"></a><p>Fontos, hogy a <code class="command">routed</code> démon ne
	  induljon el, mivel <code class="command">routed</code> hajlamos
	  törölni a <code class="command">ppp</code> által
	  létrehozott alapértelmezett
	  útválasztási bejegyzéseket.</p><p>Ezenkívül még a
	  <code class="literal">sendmail_flags</code>
	  változóról szóló
	  sorból is érdemes kivenni a <code class="option">-q</code>
	  opciót, máskülönben a
	  <code class="command">sendmail</code> minden mûvelet
	  megkezdése elõtt nekiáll felderíteni
	  a hálózatot, és ezzel megindítja a
	  tárcsázást.  Próbáljuk meg
	  így átírni az
	  értékét:</p><pre class="programlisting">sendmail_flags="-bd"</pre><a id="idp95362128" class="indexterm"></a><p>Ezért cserébe viszont a
	  <code class="command">sendmail</code> programot a ppp kapcsolat
	  létrejöttekor mindig utasítanunk kell, hogy
	  újból ellenõrizze a levelezési sort.
	  Ezt a következõk begépelésével
	  érhetjük el:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/sbin/sendmail -q</code></strong></pre><p>Ugyanezt automatikusan is meg tudjuk tenni a
	  <code class="command">!bg</code> paranccsal a
	  <code class="filename">ppp.linkup</code>
	  állományban:</p><pre class="programlisting">1     szolgaltato:
2       delete ALL
3       add 0 0 HISADDR
4       !bg sendmail -bd -q30m</pre><a id="idp95366096" class="indexterm"></a><p>Ha nem felelne meg ez a megoldás, akkor egy
	  <span class="quote">"<span class="quote">dfilter</span>"</span> is beállítható az
	  SMTP forgalom szûrésére.  A
	  példák között megtaláljuk ennek
	  pontos minkéntjét.</p><p>Ezután már csak a gépünk
	  újraindítása maradt hátra.  Az
	  újraindítás után már be is
	  gépelhetjük:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp</code></strong></pre><p>ahol a <code class="command">dial szolgaltato</code> parancs
	  kiadásával meg tudjuk kezdeni a PPP kapcsolat
	  felépítését, vagy a
	  <code class="command">ppp</code> programot megkérhetjük
	  arra, hogy automatikusan kezdje el, amint van kimenõ
	  forgalom (és nem készítettük el a
	  <code class="filename">start_if.tun0</code> szkriptet).  Ekkor
	  gépeljük be ezt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp -auto szolgaltato</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95371216"></a>27.2.1.5. Összefoglalás</h4></div></div></div><p>Gyorsan foglaljuk össze, hogy az ppp
	  beállításához milyen
	  lépések megtétele szükséges
	  az elsõ alkalommal:</p><p>A kliens oldalán:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Gyõzõdjünk meg róla, hogy a
	      <code class="filename">tun</code> eszköz benne van a
	      rendszermagban.</p></li><li class="step"><p>Ellenõrizzük, hogy a
	      <code class="filename">tunN</code>
	      eszközhöz tartozó állomány
	      rendelkezésre áll a
	      <code class="filename">/dev</code>
	      könyvtárban.</p></li><li class="step"><p>Hozzunk létre egy bejegyzést az
	      <code class="filename">/etc/ppp/ppp.conf</code>
	      állományban.  A
	      <code class="filename">pmdemand</code>
	      példából a legtöbb
	      szolgáltató esetében ki tudunk
	      indulni.</p></li><li class="step"><p>Ha dinamikus IP-címet kapunk, akkor az
	      <code class="filename">/etc/ppp/ppp.linkup</code>
	      állományba is vegyünk fel egy
	      bejegyzést.</p></li><li class="step"><p>Frissítsük az
	      <code class="filename">/etc/rc.conf</code>
	      állományunkat.</p></li><li class="step"><p>Ha igény szerint akarunk
	      tárcsázni, akkor hozzunk létre
	      <code class="filename">start_if.tun0</code> néven egy
	      szkriptet.</p></li></ol></div><p>A szerver oldalán:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Gondoskodjunk róla, hogy a
	      <code class="filename">tun</code> eszköz
	      támogatása szerepel rendszermagban.</p></li><li class="step"><p>Gyõzõdjünk meg róla, hogy a
	      <code class="filename">tunN</code>
	      eszköz megtalálható a <code class="filename">/dev</code>
	      könyvtárban.</p></li><li class="step"><p>Az <code class="filename">/etc/passwd</code>
	      állományban (a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a> program
	      használatával) hozzunk létre
	      bejegyzéseket.</p></li><li class="step"><p>A felhasználók könyvtáraiban
	      hozzunk létre egy olyan profilt, amely <code class="command">ppp
	      -direct direct-server</code> vagy egy ehhez
	      hasonló parancsot futtat le.</p></li><li class="step"><p>Az <code class="filename">/etc/ppp/ppp.conf</code>
	      állományban adjuk meg egy bejegyzést.
	      A <code class="filename">direct-server</code> példa ehhez
	      egy remek alapot biztosít.</p></li><li class="step"><p>Az <code class="filename">/etc/ppp/ppp.linkup</code>
	      állományban hozzunk létre egy
	      bejegyzést.</p></li><li class="step"><p>Frissítsük az
	      <code class="filename">/etc/rc.conf</code>
	      állományunkat.</p></li></ol></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ppp-and-slip.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="ppp-and-slip.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="ppp.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">27. fejezet - A PPP és a SLIP </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 27.3. A rendszerszintû PPP alkalmazása</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>