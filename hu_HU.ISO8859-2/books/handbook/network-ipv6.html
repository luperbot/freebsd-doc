<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>31.11. Az IPv6</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="advanced-networking.html" title="31. fejezet - Egyéb haladó hálózati témák" /><link rel="prev" href="network-plip.html" title="31.10. Párhuzamos vonali IP (PLIP)" /><link rel="next" href="network-atm.html" title="31.12. Az Aszinkron adatátviteli mód (ATM)" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">31.11. Az IPv6</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-plip.html">Vissza</a> </td><th width="60%" align="center">31. fejezet - Egyéb haladó hálózati
    témák</th><td width="20%" align="right"> <a accesskey="n" href="network-atm.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ipv6"></a>31.11. Az IPv6</h2></div><div><span class="authorgroup">Eredetileg írta: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Kaplan</span>, <span class="firstname">Aaron</span></span>. </span></div><div><span class="authorgroup">Átszervezte és
	    kiegészítette: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span>, <span class="firstname">Tom</span></span>. </span></div><div><span class="authorgroup">Tovább bõvítette: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Davis</span>, <span class="firstname">Brad</span></span>. </span></div></div></div><p>Az IPv6 (másik néven az IPng, vagy a <span class="quote">"<span class="quote">az
      internet következõ generációs
      protokollja</span>"</span>, <span class="quote">"<span class="quote">IP next generation</span>"</span>) a
      jól ismert IP protokoll (avagy az <acronym class="acronym">IPv4</acronym>)
      új változata.  Hasonlóan a jelenleg
      mûködõ összes többi BSD rendszerhez, a
      FreeBSD is tartalmazza a KAME IPv6 referencia
      implementációt.  Ezért ha ezzel
      szeretnénk kísérletezni, akkor ehhez a FreeBSD
      minden eszköz biztosít számunkra.  Ez a szakasz
      az IPv6 beállítását és
      használatát mutatja be.</p><p>Az 1990-es évek elején az IPv4-es
      címterek rohamos mértékû
      kimerülését figyelték meg.  Az internet
      jelenlegi bõvülési üteme mellett két
      nagyobb aggodalomnak adott okot:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A címek elfogyása.  Napjainkban efelõl
	  egyre kevesebb a kétség, mivel az RFC 1918
	  által megfogalmazott privát címterek
	  (<code class="systemitem">10.0.0.0/8</code>, <code class="systemitem">172.16.0.0/12</code>, és <code class="systemitem">192.168.0.0/16</code>), valamint a
	  hálózati címfordítás
	  (Network Address Translation, <acronym class="acronym">NAT</acronym>)
	  használata igen elterjedt.</p></li><li class="listitem"><p>Az útválasztási
	  táblázatok méretének
	  növekedése.  Ez még manapság is
	  aggasztó.</p></li></ul></div><p>Az IPv6 ezeket és még más egyéb
      problémákat a következõ módon
      igyekszik megoldani:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A 128 bites címtér használata.
	  Más szóval, elméletben összesen
	  340 282 366 920 938 463 463 374 607 431 768 211 456
	  darab címet képes kiosztani.  Ez azt jelenti,
	  hogy bolygónk minden egyes
	  négyzetméterére
	  megközelítõleg 6,67 * 10^27 IPv6
	  típusú cím jut.</p></li><li class="listitem"><p>Az útválasztók a saját
	  táblázataikban csak a hálózatok
	  összevont címeit tárolják el,
	  ezáltal egy átlagos
	  útválasztási táblázatban
	  található bejegyzések száma 8192
	  alá csökken.</p></li></ul></div><p>Az IPv6 emellett még rengeteg más
      elõnyös lehetõséget is
      kínál:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A címek automatikus beállítása
	  (lásd <a class="link" href="http://www.ietf.org/rfc/rfc2462.txt" target="_top">RFC 2462</a>)</p></li><li class="listitem"><p>Anycast (bárkiküldés, vagyis <span class="quote">"<span class="quote">egy
	  a sokból</span>"</span>)</p></li><li class="listitem"><p>Kötelezõ (mandatory) multicast</p></li><li class="listitem"><p>IPsec (IP szintû védelem)</p></li><li class="listitem"><p>Egyszerûsített fejléc</p></li><li class="listitem"><p>Mobil <acronym class="acronym">IP</acronym></p></li><li class="listitem"><p>IPv6-IPv4 közti
	  átjárhatóság</p></li></ul></div><p>Ha mindezekrõl többet szeretnénk megtudni,
      akkor erre érdemes továbblépnünk:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Az IPv6 áttekintése a <a class="link" href="http://playground.sun.com/pub/ipng/html/ipng-main.html" target="_top">playground.sun.com</a>
	  honlapon</p></li><li class="listitem"><p><a class="link" href="http://www.kame.net" target="_top">KAME.net</a></p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101185488"></a>31.11.1. Az IPv6 címek háttere</h3></div></div></div><p>Az IPv6 címeknek több típusa
	létezik: a unicast (egyesküldés), az anycast
	(bárkiküldés) és a multicast
	(többesküldés).</p><p>A unicasthez használt címek jól ismert
	címek.  Az így elküldött csomag pontosan
	ahhoz a felülethez érkezik meg, amelyhez az adott
	cím tartozik.</p><p>Az anycasthez használt címek
	felírásukban tökéletesen megegyeznek a
	unicast esetével, de valójában
	felületek egy csoportját címezik.  Az
	anycastre beállított címekre
	küldött csomagok mindig a(z
	útválasztó szerinti) legközelebb
	levõ felülethez érkeznek meg.  Az anycastet az
	útválasztók számára
	találták ki.</p><p>A multicasthez használt címek felületek
	egy csoportját nevezik meg.  A multicast címekre
	érkezõ csomagokat a csoport minden egyes tagja
	megkapja.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Az IPv4 esetében az
	    üzenetszórásra szánt
	    (általában az <code class="systemitem">xxx.xxx.xxx.255</code>
	    formátumú) címeket az IPv6
	    esetében multicast címekkel fejezzük
	    ki.</p></div><div class="table"><a id="idp101189072"></a><div class="table-title">31.2. táblázat - Fenntartott IPv6 címek</div><div class="table-contents"><table summary="Fenntartott IPv6 címek" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>IPv6 cím</th><th>Az elõtag hossza (bitekben)</th><th>Leírás</th><th>Megjegyzés</th></tr></thead><tbody><tr><td><code class="systemitem">::</code></td><td>128 bit</td><td>nem specifikált</td><td>Vö.  a <code class="systemitem">0.0.0.0</code>
		címmel az IPv4 esetében.</td></tr><tr><td><code class="systemitem">::1</code></td><td>128 bit</td><td>saját cím</td><td>Vö.  a <code class="systemitem">127.0.0.1</code> címmel az IPv4
		esetében.</td></tr><tr><td><code class="systemitem">::00:xx:xx:xx:xx</code></td><td>96 bit</td><td>IPv4 beágyazása</td><td>Az alsó 32 bit egy IPv4
		formátumú cím.  Ezt <span class="quote">"<span class="quote">IPv4
		kompatibilis IPv6 címnek</span>"</span> is
		nevezik.</td></tr><tr><td><code class="systemitem">::ff:xx:xx:xx:xx</code></td><td>96 bit</td><td>IPv4-re leképzett IPv6 címek</td><td>Az alsó 32 bit egy IPv4 címet
		jelöl.  Olyan gépeknél
		használatos, amelyek nem támogatják
		az IPv6 protokollt.</td></tr><tr><td><code class="systemitem">fe80::</code> - <code class="systemitem">feb::</code></td><td>10 bit</td><td>helyi összeköttetés</td><td>Vö.  az IPv4 loopback címeivel.</td></tr><tr><td><code class="systemitem">fec0::</code> - <code class="systemitem">fef::</code></td><td>10 bit</td><td>helyi cím</td><td> </td></tr><tr><td><code class="systemitem">ff::</code></td><td>8 bit</td><td>multicast</td><td> </td></tr><tr><td><code class="systemitem">001</code> (2-es alapú)</td><td>3 bit</td><td>globális unicast</td><td>Az összes globális unicast címet
		ebbõl a tartományból osztjuk ki.  Az
		elsõ 3 bit
		értéke<span class="quote">"<span class="quote">001</span>"</span>.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101229136"></a>31.11.2. Az IPv6 címek olvasása</h3></div></div></div><p>Az IPv6 címek kanonikus formája így
	ábrázolható: <code class="systemitem">x:x:x:x:x:x:x:x</code>, ahol mindegyik
	<span class="quote">"<span class="quote">x</span>"</span> egy 16 bites hexadecimális
	érték.  Például: <code class="systemitem">FEBC:A574:382B:23C1:AA49:4592:4EFE:9982</code>.</p><p>Gyakran a címek hosszú nullákból
	álló sorozatokat tartalmaznak, ezért
	mindegyik ilyen sorozatot rövidíteni tudjuk a
	<span class="quote">"<span class="quote">::</span>"</span> jelöléssel.  Rajtuk
	kívül még az egyes hexadecimális
	csoportokban a bevezetõ nullák is
	elhagyhatóak.  Például az <code class="systemitem">fe80::1</code> cím kanonikus
	formája: <code class="systemitem">fe80:0000:0000:0000:0000:0000:0000:0001</code>.</p><p>A harmadik forma szerint az utolsó 32 bites
	részt írjuk fel a megszokott (decimális)
	IPv4 stílusú pontozással, ahol tehát
	a <span class="quote">"<span class="quote">.</span>"</span> választja el a tagokat.  Így
	például a <code class="systemitem">2002::10.0.0.1</code> felírás a
	<code class="systemitem">2002:0000:0000:0000:0000:0000:0a00:0001</code>
	kanonikus (hexadecimális)
	ábrázolásnak feleltethetõ meg, ami
	pedig egyszerûen <code class="systemitem">2002::a00:1</code> alakban is
	megadható.</p><p>Mostanra már minden bizonnyal a kedves olvasó
	érteni fogja a következõt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig</code></strong></pre><pre class="programlisting">rl0: flags=8943&lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500
         inet 10.0.0.10 netmask 0xffffff00 broadcast 10.0.0.255
         inet6 fe80::200:21ff:fe03:8e1%rl0 prefixlen 64 scopeid 0x1
         ether 00:00:21:03:08:e1
         media: Ethernet autoselect (100baseTX )
         status: active</pre><p>A <code class="systemitem">fe80::200:21ff:fe03:8e1%rl0</code> cím
	az automatikusan beállított helyi
	összeköttetés címe.  Ez az automatikus
	beállítás részeként a
	MAC-címbõl jött létre.</p><p>Az IPv6 címek szerkezetérõl
	további részleteket az <a class="link" href="http://www.ietf.org/rfc/rfc3513.txt" target="_top">RFC 3513</a>-ban
	találunk.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101242704"></a>31.11.3. Kapcsolódás</h3></div></div></div><p>Jelenleg négy módon tudunk más IPv6-os
	géphez és hálózathoz
	csatlakozni:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Kérjünk a hálózati
	    elérésünkért felelõs
	    illetékesektõl IPv6 alapú
	    hálózatot.  A részletek
	    tekintetében vegyük fel a kapcsolatot az
	    internet-szolgáltatónkkal.</p></li><li class="listitem"><p>A <a class="link" href="http://www.sixxs.net" target="_top">SixXS</a> a
	    világ minden táján kínál
	    végpontokkal rendelkezõ tunneleket.</p></li><li class="listitem"><p>Egy 6-ból-4 (<a class="link" href="http://www.ietf.org/rfc/rfc3068.txt" target="_top">RFC 3068</a>)
	    típusú tunnellel.</p></li><li class="listitem"><p>Ha betárcsázós kapcsolatunk van,
	    akkor használjuk a <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/freenet6/pkg-descr">net/freenet6</a> portot.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101248848"></a>31.11.4. A nevek feloldása az IPv6
	világában</h3></div></div></div><p>IPv6 alatt régebben két típusa volt a
	nevek feloldásáért felelõs
	rekordoknak.  Az IETF az A6 rekordokat idõközben
	elavultnak nyilvánította.  Ezért
	manapság már az AAAA rekordok tekinthetõek
	szabványosnak.</p><p>Az AAAA rekordok használata magától
	értetõdik.  A hálózati
	nevükhöz az alábbi módon tudunk IPv6
	címet rendelni az elsõdleges zónát
	leíró állományban:</p><pre class="programlisting"><em class="replaceable"><code>SAJÁTNÉV</code></em>           AAAA    <em class="replaceable"><code>SAJÁTIPv6CÍM</code></em></pre><p>Ha nem rendelkezünk saját
	névfeloldási zónával, akkor erre
	kérjük meg a névfeloldást
	végzõ szolgáltatónkat.  A
	<span class="application">bind</span> jelenlegi változatai (8.3
	és 9), valamint a <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/dns/djbdns/pkg-descr">dns/djbdns</a> (IPv6
	támogatására vonatkozó
	javítással) támogatják az AAAA
	rekordokat.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101252560"></a>31.11.5. Az <code class="filename">/etc/rc.conf</code> szükséges
	módosításai</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101253584"></a>31.11.5.1. Az IPv6 kliensek beállításai</h4></div></div></div><p>Ezek a beállítások egy helyi
	  hálózaton levõ gépre vonatkoznak,
	  nem pedig egy útválasztóra.  Az
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtsol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtsol</span>(8)</span></a> az alábbi megadásával fogja
	  automatikusan beállítani a felületeinket a
	  rendszer indításakor:</p><pre class="programlisting">ipv6_enable="YES"</pre><p>Ha az <code class="filename">fxp0</code> felülethez
	  statikusan akarunk IP-címet rendelni,
	  például a <code class="systemitem">
	  2001:471:1f11:251:290:27ff:fee0:2093</code> címet,
	  akkor ehhez a következõt kell megadni:</p><pre class="programlisting">ipv6_ifconfig_fxp0="2001:471:1f11:251:290:27ff:fee0:2093"</pre><p>Az <code class="filename">/etc/rc.conf</code>
	  állományban az alapértelmezett
	  átjárót a következõ
	  módon tudjuk a <code class="systemitem">2001:471:1f11:251::1</code> címre
	  beállítani:</p><pre class="programlisting">ipv6_defaultrouter="2001:471:1f11:251::1"</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101263184"></a>31.11.5.2. Az IPv6 útválasztók és
	  átjárók
	  beállítása</h4></div></div></div><p>Itt most a tunnelt biztosító
	  szolgáltató által mutatott irányt
	  követjük, és olyan formára
	  alakítjuk, amely megmarad az
	  újraindítás után is.  A rendszer
	  indításakor az <code class="filename">/etc/rc.conf</code>
	  állományban valami ilyesmit kell megadni a
	  járat
	  visszaállításához:</p><p>Soroljuk fel a beállítandó
	  általános tunnel alapú felületeket,
	  ilyen lehet például a
	  <code class="filename">gif0</code>:</p><pre class="programlisting">gif_interfaces="gif0"</pre><p>A felületnek állítsunk be egy helyi
	  végpontot a
	  <em class="replaceable"><code>SAJÁT_IPv4_CÍM</code></em>
	  megadásával, valamint egy távoli
	  végpontot a
	  <em class="replaceable"><code>TÁVOLI_IPv4_CÍM</code></em>
	  megadásával:</p><pre class="programlisting">gifconfig_gif0="<em class="replaceable"><code>SAJÁT_IPv4_CÍM TÁVOLI_IPv4_CÍM</code></em>"</pre><p>Az IPv6 tunnelünk végpontjához kapott
	  cím aktiválásához az
	  alábbit kell még megadnunk:</p><pre class="programlisting">ipv6_ifconfig_gif0="<em class="replaceable"><code>SAJÁT_KAPOTT_IPv6_TUNNEL_VÉGPONTJÁNAK_CÍME</code></em>"</pre><p>Ezután már csak az alapértelmezett
	  útvonalat kell beállítani az IPv6
	  számára.  Ez az IPv6 járat másik
	  oldala:</p><pre class="programlisting">ipv6_defaultrouter="<em class="replaceable"><code>SAJÁT_IPv6_TÁVOLI_TUNNEL_VÉGPONTJÁNAK_CÍME</code></em>"</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101270608"></a>31.11.5.3. Az IPv6 tunnel beállításai</h4></div></div></div><p>Amennyiben a szerver IPv6 alapú forgalmat
	  közvetít a hálózatunk és a
	  világ között, az
	  <code class="filename">/etc/rc.conf</code> állományba a
	  következõt kell felvennünk:</p><pre class="programlisting">ipv6_gateway_enable="YES"</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp101272656"></a>31.11.6. Az útválasztók kihirdetése
	és automatikus konfigurációja</h3></div></div></div><p>Ebben a szakaszban az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtadvd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtadvd</span>(8)</span></a>
	beállításával fogjuk az
	alapértelmezett IPv6 útvonalat kihirdetni.</p><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtadvd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtadvd</span>(8)</span></a> engedélyezéséhez az
	alábbi sort kell betennünk az
	<code class="filename">/etc/rc.conf</code>
	állományba:</p><pre class="programlisting">rtadvd_enable="YES"</pre><p>Emellett még fontos megadnunk azt a felületet,
	ahol az IPv6 útválasztó
	kérelmezését végezzük.  Ha erre
	a feladatra például az
	<code class="filename">fxp0</code> felületet választjuk,
	akkor errõl az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtadvd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtadvd</span>(8)</span></a> így
	értesíthetõ:</p><pre class="programlisting">rtadvd_interfaces="fxp0"</pre><p>Most pedig készítenünk kell hozzá
	egy konfigurációt is, vagyis az
	<code class="filename">/etc/rtadvd.conf</code> állományt.
	Íme erre egy példa:</p><pre class="programlisting">fxp0:\
	:addrs#1:addr="2001:471:1f11:246::":prefixlen#64:tc=ether:</pre><p>Az <code class="filename">fxp0</code> felületet
	természetesen cseréljük ki a
	sajátunkkal.</p><p>Ezután a <code class="systemitem">2001:471:1f11:246::</code> címre
	helyére írjuk be a saját kiosztásunk
	elõtagját.</p><p>Egy egész <code class="systemitem">/64</code>
	alhálózat esetén nem is kell többet
	megadni.  Minden más helyezetben az elõtag
	hosszára <code class="literal">prefixlen#</code> vonatkozó
	értéket is be kell még
	állítanunk.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-plip.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="advanced-networking.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="network-atm.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">31.10. Párhuzamos vonali IP (PLIP) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 31.12. Az Aszinkron adatátviteli mód (ATM)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>