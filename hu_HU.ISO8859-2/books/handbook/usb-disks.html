<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>18.5. USB tárolóeszközök</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="disks.html" title="18. fejezet - Háttértárak" /><link rel="prev" href="raid.html" title="18.4. RAID" /><link rel="next" href="creating-cds.html" title="18.6. Lézeres tárolóeszközök (CD-k) létrehozása és használata" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">18.5. USB tárolóeszközök</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="raid.html">Vissza</a> </td><th width="60%" align="center">18. fejezet - Háttértárak</th><td width="20%" align="right"> <a accesskey="n" href="creating-cds.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="usb-disks"></a>18.5. USB tárolóeszközök</h2></div><div><span class="authorgroup">Írta: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Fonvieille</span>, <span class="firstname">Marc</span></span>. </span></div></div></div><a id="idp89878992" class="indexterm"></a><p>Manapság már számos külsõ
      tárolóeszköz az USB (Universal Serial Bus)
      közvetítésével csatlakozik a
      számítógéphez: merevlemezek, pen
      drive-ok, CD-írók stb.  A FreeBSD ezeket az
      eszközöket is ismeri.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89880528"></a>18.5.1. Beállítás</h3></div></div></div><p>A USB tárolóeszközöket kezelõ
	meghajtó, az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a> felelõs az USB
	alapú tárolóeszközök
	támogatásáért.  Ha a
	<code class="filename">GENERIC</code> rendszermagot használjuk,
	akkor semmit sem kell változtatnunk.  Ha saját
	rendszermagunk van, akkor gondoskodjunk róla, hogy a
	következõ sorokat beraktuk a rendszermag
	beállításait tartalmazó
	állományba:</p><pre class="programlisting">device scbus
device da
device pass
device uhci
device ehci
device usb
device umass</pre><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a> meghajtó a SCSI alrendszeren
	keresztül éri el az USB
	tárolóeszközöket, tehát az USB
	eszközeinket a rendszer SCSI eszközként
	látja.  Az alaplapon található USB
	chipkészlet típusától
	függõen vagy csak a <code class="literal">device uhci</code>,
	vagy USB 1.<em class="replaceable"><code>X</code></em> esetén pedig a
	<code class="literal">device ohci</code> bejegyzésre lesz
	szükségünk.  De abból sem
	származik kárunk, ha mind a kettõt
	meghagyjuk.  Az USB 2.0 szabványú
	vezérlõket a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ehci&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ehci</span>(4)</span></a> meghajtó
	(<code class="literal">device ehci</code>) támogatja.  Ha
	módosítani kellett a konfigurációs
	állományt, akkor ne felejtsük el
	újrafordítani és telepíteni sem a
	rendszermagot.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ha az USB eszközünk egy CD- vagy
	  DVD-író, akkor a következõ sorral a
	  SCSI CD-meghajtók meghajtóját, a
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">cd</span>(4)</span></a> eszközt kell beépítenünk a
	  rendszermagba:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">device cd</pre><p xmlns="http://www.w3.org/1999/xhtml">Mivel az író is SCSI eszközként
	  látszik, ezért az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atapicam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atapicam</span>(4)</span></a> nem
	  szerepelhet a rendszermag beállításai
	  között.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89890128"></a>18.5.2. A beállítások
	kipróbálása</h3></div></div></div><p>A beállításaink készen
	állnak a kipróbálásra:
	csatlakoztassuk a számítógéphez az
	USB eszközünket és a rendszerüzeneteket
	tároló pufferben (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>) hamarosan meg is
	jelenik a hozzá tartozó meghajtó:</p><pre class="screen">umass0: USB Solid state disk, rev 1.10/1.00, addr 2
GEOM: create disk da0 dp=0xc2d74850
da0 at umass-sim0 bus 0 target 0 lun 0
da0: &lt;Generic Traveling Disk 1.11&gt; Removable Direct Access SCSI-2 device
da0: 1.000MB/s transfers
da0: 126MB (258048 512 byte sectors: 64H 32S/T 126C)</pre><p>Természetesen a gyártóra,
	márkára, az eszköz
	leírójára (<code class="filename">da0</code>)
	és egyebekre vonatkozó részletek
	eltérhetnek.</p><p>Mivel az USB eszköz SCSI eszközként
	látszik, ezért a <code class="command">camcontrol</code>
	parancs használható a rendszerhez csatlakoztatott
	USB tárolóeszközök
	listázásához:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol devlist</code></strong>
&lt;Generic Traveling Disk 1.11&gt;      at scbus0 target 0 lun 0 (da0,pass0)</pre><p>Ha a meghajtón állományrendszer is
	található, akkor képesek vagyunk
	csatlakoztatni.  A <a class="xref" href="disks-adding.html" title="18.3. Lemezek hozzáadása">18.3. szakasz - Lemezek hozzáadása</a>
	elolvasása segíthet az USB meghajtón
	partíciókat kialakítani és
	formázni, amennyiben szükséges.</p><div xmlns="" class="warning"><h3 class="admontitle">Figyelem: </h3><p xmlns="http://www.w3.org/1999/xhtml">A rendszer biztonsága szempontjából
	  nem tekinthetõ megbízhatónak, ha olyan
	  felhasználók számára is
	  engedélyezzük tetszõleges meghajtók
	  csatlakoztatását (például a
	  <code class="literal">vfs.usermount</code>
	  engedelyézesével), amelyekben nem bízunk
	  meg.  A FreeBSD által támogatott
	  állományrendszerek döntõ
	  többsége nem nyújt védelmet a
	  káros szándékkal telepített
	  eszközök ellen.</p></div><p>Ha az eszközt normál
	felhasználókkal is
	csatlakoztathatóvá akarjuk tenni, akkor
	további lépések megtételére
	is szükségünk lesz.  Elõször is a
	felhasználóknak valahogy el kell tudniuk
	érniük az USB tárolóeszköz
	csatlakoztatásakor keletkezõ eszközöket.
	Ezt úgy tudjuk megoldani, ha az érintett
	felhasználókat felvesszük az
	<code class="systemitem">operator</code> csoportba.  Ebben a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a>
	lehet a segítségünkre.  Másodsorban
	amikor ezek az eszközök létrejönnek, az
	<code class="systemitem">operator</code> csoportnak tudniuk kell ezeket
	olvasniuk és írniuk.  Ezt úgy tudjuk
	megvalósítani, ha felvesszük a
	következõ sorokat az
	<code class="filename">/etc/devfs.rules</code>
	állományba:</p><pre class="programlisting">[localrules=5]
add path 'da*' mode 0660 group operator</pre><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ha viszont vannak SCSI lemezeink is rendszerben, akkor a
	  helyzet egy kicsit megváltozik.  Tehát
	  például a rendszerben már eleve vannak
	  <code class="filename">da0</code>, <code class="filename">da1</code>
	  és <code class="filename">da2</code> néven lemezek,
	  akkor a második sort ennek megfelelõen
	  változtassuk meg:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">add path 'da[3-9]*' mode 0660 group operator</pre><p xmlns="http://www.w3.org/1999/xhtml">Ezzel kizárunk minden, korábban már
	  létezõ lemezt az <code class="systemitem">operator</code>
	  csoportból.</p></div><p>Emellett még az <code class="filename">/etc/rc.conf</code>
	állományban engedélyeznünk kell a
	saját <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs.rules&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs.rules</span>(5)</span></a>
	szabályrendszerünket is:</p><pre class="programlisting">devfs_system_ruleset="usb_rules"</pre><p>Ezt követõen be kell állítanunk a
	rendszermagban, hogy a hagyományos
	felhasználók képesek legyenek
	állományrendszereket csatlakoztatni.  Ezt a
	legkönnyebb úgy tudjuk megtenni, ha az
	<code class="filename">/etc/sysctl.conf</code> állományba
	felvesszük a következõ sort:</p><pre class="programlisting">vfs.usermount=1</pre><p>Azonban ne felejtsük el, hogy ez csak a rendszer
	következõ indításától
	él.  De a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> parancs
	használatával is beállíthatjuk ezt
	az értéket.</p><p>Az utolsó lépésben hozzunk létre
	egy könyvtárat az állományrendszer
	csatlakoztatásához.  Ezt a könyvtárat
	az a felhasználó fogja birtokolni, aki az
	állományrendszert csatlakoztatnia akarja.  Ez
	például <code class="systemitem">root</code>
	felhasználóként úgy tudjuk megtenni,
	ha a felhasználónak létrehozunk egy
	könyvtárat
	<code class="filename">/mnt/felhasználó</code>
	néven (ahol a
	<em class="replaceable"><code>felhasználó</code></em> nevet
	cseréljük a tényleges
	felhasználó nevére, a
	<em class="replaceable"><code>csoport</code></em> nevet pedig a
	felhasználóhoz tartozó elsõdleges
	csoport nevére):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /mnt/felhasználó</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown felhasználó:csoport /mnt/felhasználó</code></strong></pre><p>Most tegyük fel, hogy csatlakoztatnuk egy USB pen
	drive-ot és ennek megfelelõen megjelenik a
	<code class="filename">/dev/da0s1</code> eszköz.  Mivel az ilyen
	eszközökre általában gyárilag FAT
	állományrendszert tesznek, ezért így
	kell ezeket csatlakoztatni a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> paranccsal:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mount -t msdosfs -o -m=644,-M=755 /dev/da0s1 /mnt/felhasználó</code></strong></pre><p>Ha leválasztjuk az eszközt (miután
	kiadtuk a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a> parancsot), akkor a
	rendszerüzenetek között valami ilyesmit fogunk
	látni:</p><pre class="screen">umass0: at uhub0 port 1 (addr 2) disconnected
(da0:umass-sim0:0:0:0): lost device
(da0:umass-sim0:0:0:0): removing device entry
GEOM: destroy disk da0 dp=0xc2d74850
umass0: detached</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89965392"></a>18.5.3. A témáról bõvebben</h3></div></div></div><p>A <a class="link" href="disks-adding.html" title="18.3. Lemezek hozzáadása">Lemezek
	hozzáadása</a> és az <a class="link" href="mount-unmount.html" title="3.6. Állományrendszerek csatlakoztatása és leválasztása">Állományrendszerek
	  csatlakoztatása és
	  leválasztása</a> címû szakaszok
	elolvasása mellett a következõ man oldalakat is
	ajánljuk: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">camcontrol</span>(8)</span></a> és
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=usbconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">usbconfig</span>(8)</span></a> FreeBSD 8.<em class="replaceable"><code>X</code></em>
	esetében, vagy <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=usbdevs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">usbdevs</span>(8)</span></a> a FreeBSD korábbi
	változatainál.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="raid.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="creating-cds.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">18.4. RAID </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 18.6. Lézeres tárolóeszközök (CD-k)
      létrehozása és használata</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>