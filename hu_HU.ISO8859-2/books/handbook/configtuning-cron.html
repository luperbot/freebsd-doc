<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>11.6. A cron segédprogram beállítása</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="config-tuning.html" title="11. fejezet - Beállítás és finomhangolás" /><link rel="prev" href="configtuning-starting-services.html" title="11.5. Szolgáltatások indítása" /><link rel="next" href="configtuning-rcd.html" title="11.7. Az rc használata FreeBSD alatt" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.6. A <code class="command">cron</code> segédprogram
      beállítása</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configtuning-starting-services.html">Vissza</a> </td><th width="60%" align="center">11. fejezet - Beállítás és
    finomhangolás</th><td width="20%" align="right"> <a accesskey="n" href="configtuning-rcd.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-cron"></a>11.6. A <code class="command">cron</code> segédprogram
      beállítása</h2></div><div><span class="authorgroup">Írta: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span>, <span class="firstname">Tom</span></span>. </span></div></div></div><a id="idp84745680" class="indexterm"></a><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> a FreeBSD egyik leghasznosabb
      segédprogramja.  A <code class="command">cron</code>
      segédprogram a háttérben fut és
      folyamatosan figyeli az <code class="filename">/etc/crontab</code>
      állományt.  Emellett a <code class="command">cron</code>
      új <code class="filename">crontab</code> állományok
      után kutatva folyamatosan ellenõrzi a
      <code class="filename">/var/cron/tabs</code>
      könyvtárat.  Ezek a <code class="filename">crontab</code>
      állományok olyan feladatokról tárolnak
      adatokat, amelyeket a <code class="command">cron</code> programnak egy adott
      pillanatban el kell végeznie.</p><p>A <code class="command">cron</code> a konfigurációs
      állományok két külön
      fajtáját, a rendszer- és
      felhasználói crontabokat használja.  A
      két típus között levõ egyetlen
      különbség a hatodik mezõben
      található.  A rendszerszintû crontabok
      esetében a hatodik mezõ annak a
      felhasználónak a nevét tartalmazza, amivel a
      program fut.  Ezzel a rendszer szintjén
      mûködõ crontaboknak megadatott az a
      képesség, hogy tetszõleges
      felhasználó nevében futtassanak programokat.
      A felhasználók crontabjaiban a hatodik mezõ a
      futtatandó parancsot tartalmazza, és ilyenkor az
      összes parancs a crontabot létrehozó
      felhasználó nevében hajtódik
      végre.  Ez utóbbi egy fontos biztonsági
      jellemzõ.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">A felhasználói crontabok lehetõvé
	teszik az egyes felhasználók
	számára, hogy a <code class="systemitem">root</code>
	felhasználó jogosultságai
	nélkül képesek legyenek feladatokat
	ütemezni, ugyanis a felhasználóhoz
	tartozó crontabban szereplõ parancsok mindegyike a
	tulajdonosának engedélyeivel fut.</p><p xmlns="http://www.w3.org/1999/xhtml">Az átlagos felhasználókhoz
	hasonlóan a <code class="systemitem">root</code>
	felhasználónak is lehet crontabja, ami nem
	ugyanaz, mint az <code class="filename">/etc/crontab</code> (a rendszer
	saját crontab állománya).  De mivel a
	rendszernek külön crontabja van, ezért a
	<code class="systemitem">root</code> felhasználónak nem kell
	külön crontabot létrehozni.</p></div><p>Vessünk egy pillanatást az
      <code class="filename">/etc/crontab</code> (a rendszer crontabjának)
      tartalmára:</p><pre class="programlisting"># /etc/crontab - a root crontabja FreeBSD alatt
#
# $FreeBSD: src/etc/crontab,v 1.32 2002/11/22 16:13:39 tom Exp $
# <a id="co-comments"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
#
SHELL=/bin/sh
PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin <a id="co-env"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
HOME=/var/log
#
#
#minute	hour	day	month	wday	who	command <a id="co-field-descr"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
#
#
*/5	*	*	*	*	root	/usr/libexec/atrun <a id="co-main"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-comments"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>A FreeBSD legtöbb konfigurációs
	  állományához hasonlóan itt is a
	  <code class="literal">#</code> jelöli a megjegyzéseket.  Az
	  ilyen megjegyzések remekül
	  használhatóak annak feljegyzésére,
	  hogy mit és miért akarunk futtatni.  A
	  megjegyzések azonban nem szerepelhetnek a paranccsal
	  egy sorban, mivel máskülönben a parancs
	  részeként kerülnek
	  értelmezésre.  Tehát mindig új
	  sorba kell raknunk ezeket.  Az üres sorokat a program nem
	  veszi figyelembe.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-env"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Elõször is meg kell adnunk egy környezetet.
	  Az egyenlõség (<code class="literal">=</code>) karakter
	  használatos a környezeti
	  beállítások
	  meghatározására, ahogy mindezt az itteni
	  példában is tapasztalhatjuk a
	  <code class="envar">SHELL</code>, <code class="envar">PATH</code> és
	  <code class="envar">HOME</code> értékek esetében.  Ha
	  nem adunk meg mást, akkor a <code class="command">cron</code> az
	  alapértelmezés szerinti <code class="command">sh</code>
	  parancsértelmezõt használja.  Ha nem adjuk
	  meg a <code class="envar">PATH</code> változó
	  értékét, akkor minden
	  állományra abszolút elérési
	  úttal kell hivatkoznunk, mivel ennek nincs
	  alapértelmezett értéke.  Ha nem
	  definiáljuk a <code class="envar">HOME</code> változó
	  értékét, akkor a <code class="command">cron</code>
	  a parancshoz tartozó felhasználó
	  könyvtárából fog dolgozni.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-field-descr"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Ez a sor írja le a megadható hét
	  mezõt.  Az itt szereplõ értékek a
	  <code class="literal">minute</code> (perc), <code class="literal">hour</code>
	  (óra), <code class="literal">mday</code> (a hónap napja),
	  <code class="literal">month</code> (hónap),
	  <code class="literal">wday</code> (a hét napja),
	  <code class="literal">who</code> (ki) és
	  <code class="literal">command</code> (mit).  A mezõk szinte
	  maguktól értetõdnek.  A
	  <code class="literal">minute</code> egy órán belül
	  adja meg azokat a perceket, amikor az adott parancsot le kell
	  futtatni.  A <code class="literal">hour</code> hasonló a
	  <code class="literal">minute</code> beállításhoz,
	  csak az itt szereplõ értékét
	  órákban kell értelmezni.  Az
	  <code class="literal">mday</code> a hónap napjaiban
	  számol.  A <code class="literal">month</code> hasonló a
	  <code class="literal">minute</code> és <code class="literal">hour</code>
	  opciókhoz, de ez hónapot jelöl.  A
	  <code class="literal">wday</code> a hét egy napját jelzi.
	  Ezeknek a mezõknek numerikus, valamint a
	  huszonnégy órás
	  idõformátumnak megfelelõ
	  értékeket kell tartalmazniuk.  A
	  <code class="literal">who</code> mezõ, a többiektõl
	  eltérõ módon, csak az
	  <code class="filename">/etc/crontab</code> állományban
	  jelenik meg.  Ez a mezõ adja meg, hogy a parancsot milyen
	  felhasználóval kell futtatni.  Ez az
	  opció nem jelenik meg a felhasználók
	  saját <code class="filename">crontab</code>
	  állományainak telepítésekor.  A
	  sor végén láthatjuk még a
	  <code class="literal">command</code> oszlopot is.  Ez az utolsó
	  mezõ, és ide kerül a
	  végrehajtandó parancs.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-main"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Ez az utolsó sor a fentebb tárgyalt
	  értékeket határozza meg.
	  Észrevehetjük, hogy a sor egy
	  <code class="literal">*/5</code> alakú felírással
	  kezdõdik, amelyet további <code class="literal">*</code>
	  karakterek követnek.  A <code class="literal">*</code> karakterek
	  jelentése <span class="quote">"<span class="quote">elsõ-utolsó</span>"</span>, ami
	  arra utal, hogy <span class="emphasis"><em>mindig</em></span>.  Ennek
	  megfelelõen úgy értelmezhetjük ezt a
	  sort, hogy a <code class="systemitem">root</code>
	  felhasználóval le kell futtatni az
	  <code class="command">atrun</code> parancsot minden ötödik
	  percben, függetlenül attól, hogy milyen nap
	  vagy hónap van.  Az <code class="command">atrun</code>
	  parancsról részletesebban az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atrun&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">atrun</span>(8)</span></a> man
	  oldalán kapunk
	  felvilágosítást.</p><p>Az itt szereplõ parancsoknak tetszõleges
	  mennyiségû paraméter adható
	  át, azonban a több soron keresztül
	  átívelõ parancsok
	  tördelését a sor végén a
	  <span class="quote">"<span class="quote">\</span>"</span> karakterrel kell jelezni.</p></td></tr></table></div><p>Ez mindegyik <code class="filename">crontab</code>
      állomány alapbeállítása,
      habár ettõl általában egy dologban
      eltérnek.  A hatodik mezõ, ahol a
      felhasználót adtuk meg, csak a rendszer
      <code class="filename">/etc/crontab</code>
      állományában jelenik meg.  Ez a mezõ a
      felhasználók <code class="filename">crontab</code>
      állományaiból kimarad.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="configtuning-installcrontab"></a>11.6.1. Egy crontab telepítése</h3></div></div></div><div xmlns="" class="important"><h3 class="admontitle">Fontos: </h3><p xmlns="http://www.w3.org/1999/xhtml">Nem kötelezõ az itt ismertetésre
	  kerülõ módon szerkeszteni vagy
	  telepíteni a rendszer crontabját.
	  Egyszerûen nyissuk meg a kedvenc
	  szövegszerkesztõnkkel, és a
	  <code class="command">cron</code> segédprogram majd
	  észreveszi, hogy az állomány
	  megváltozott, majd ennek megfelelõen neki is
	  lát a módosított változat
	  használatának.  Errõl <a class="link" href="../../../../doc/en_US.ISO8859-1/books/faq/admin.html#ROOT-NOT-FOUND-CRON-ERRORS" target="_top">a
	  GYIK-ban (angolul)</a> többet is megtudhatunk.</p></div><p>Egy frissen készített
	felhasználói <code class="filename">crontab</code>
	telepítéséhez elõször a kedvenc
	szövegszerkesztõnk segítségével
	létre kell hoznunk a megfelelõ
	formátumú állományt, majd
	használnunk a <code class="command">crontab</code>
	segédprogramot.  Ennek általános
	alakja:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>crontab crontab_állomány</code></strong></pre><p>Ebben a példában a
      <code class="filename">crontab_állomány</code>
	a korábban létrehozott
	<code class="filename">crontab</code> neve lesz.</p><p>Lehetõségünk van lekérdezni a
	telepített <code class="filename">crontab</code>
	állományokat: egyszerûen adjuk át a
	<code class="option">-l</code> kapcsolót a
	<code class="command">crontab</code> parancsnak, és
	nézzük meg, mit ad vissza.</p><p>A <code class="command">crontab -e</code> használata olyan
	felhasználók számára
	ajánlott, akik sablon alkalmazása
	nélkül szeretnének teljesen maguktól
	megírni egy crontab állományt.  Ennek
	hatására a kiválasztott
	szövegszerkesztõ egy üres állományt
	kap.  Miután ezt az állományt
	elmentettük, a <code class="command">crontab</code> programmal
	magától telepítésre
	kerül.</p><p>Ha a késõbbiekben törölni akarjuk a
	felhasználónkhoz tartozó
	<code class="filename">crontab</code> állományt, akkor erre
	a célra használjuk a <code class="command">crontab</code>
	<code class="option">-r</code> kapcsolóját.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configtuning-starting-services.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="configtuning-rcd.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">11.5. Szolgáltatások indítása </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 11.7. Az rc használata FreeBSD alatt</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>