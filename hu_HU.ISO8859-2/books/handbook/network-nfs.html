<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>29.3. A hálózati állományrendszer (NFS)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="network-servers.html" title="29. fejezet - Hálózati szerverek" /><link rel="prev" href="network-inetd.html" title="29.2. Az inetd "szuperszerver"" /><link rel="next" href="network-nis.html" title="29.4. Hálózati információs rendszer (NIS/YP)" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">29.3. A hálózati állományrendszer
      (NFS)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-inetd.html">Vissza</a> </td><th width="60%" align="center">29. fejezet - Hálózati szerverek</th><td width="20%" align="right"> <a accesskey="n" href="network-nis.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-nfs"></a>29.3. A hálózati állományrendszer
      (NFS)</h2></div><div><span class="authorgroup">Átdolgozta és javította:
	    <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span>, <span class="firstname">Tom</span></span>. </span></div><div><span class="authorgroup">Írta: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Swingle</span>, <span class="firstname">Bill</span></span>. </span></div></div></div><a id="idp97048016" class="indexterm"></a><p>A FreeBSD több állományrendszert ismer,
      köztük a hálózati
      állományrendszert (Network File System, <acronym class="acronym">NFS</acronym>) is.  Az <acronym class="acronym">NFS</acronym> állományok
      és könyvtárak megosztását teszi
      lehetõvé a hálózaton keresztül.  Az
      <acronym class="acronym">NFS</acronym>
      használatával a felhasználók és
      a programok képesek majdnem úgy elérni a
      távoli rendszereken található
      állományokat, mintha helyben
      léteznének.</p><p>Íme az <acronym class="acronym">NFS</acronym> néhány
      legjelentõsebb elõnye:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A helyi munkaállomások kevesebb
	  tárterületet használnak, mivel a
	  közös adatokat csak egyetlen
	  számítógépen tároljuk
	  és megosztjuk mindenki között.</p></li><li class="listitem"><p>A felhasználóknak nem kell a
	  hálózat minden egyes gépén
	  külön felhasználói
	  könyvtárral rendelkezniük.  Ezek ugyanis az
	  <acronym class="acronym">NFS</acronym> segítségével
	  akár egy szerveren is
	  beállíthatóak és
	  elérhetõvé tehetõek a
	  hálózaton keresztül.</p></li><li class="listitem"><p>A különbözõ
	  háttértárak, mint például a
	  floppy lemezek, CD-meghajtók és <span class="trademark">Zip</span>(R)
	  meghajtók a hálózaton több
	  számítógép között
	  megoszthatóak.  Ezzel csökkenteni tudjuk a
	  hálózatunkban szükséges
	  cserélhetõ lemezes eszközök
	  számát.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp97054800"></a>29.3.1. Ahogy az <acronym class="acronym">NFS</acronym> mûködik</h3></div></div></div><p>Az <acronym class="acronym">NFS</acronym> legalább két fõ
	részbõl rakható össze: egy
	szerverbõl és egy vagy több kliensbõl.  A
	kliensek a szerver által megosztott adatokhoz
	képesek távolról hozzáférni.
	A megfelelõ mûködéshez mindössze csak
	néhány programot kell beállítani
	és futtatni.</p><p>A szervernek a következõ démonokat kell
	mûködtetnie:</p><a id="idp97057232" class="indexterm"></a><a id="idp97058384" class="indexterm"></a><a id="idp97059536" class="indexterm"></a><a id="idp97060432" class="indexterm"></a><a id="idp97061328" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Démon</th><th>Leírás</th></tr></thead><tbody><tr><td><span class="application">nfsd</span></td><td>Az <acronym class="acronym">NFS</acronym> démon, amely
		kiszolgálja az <acronym class="acronym">NFS</acronym>
		kliensektõl érkezõ
		kéréseket.</td></tr><tr><td><span class="application">mountd</span></td><td>Az <acronym class="acronym">NFS</acronym> csatlakoztató
		démonja, amely végrehajtja az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nfsd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nfsd</span>(8)</span></a>
		által átküldött
		kéréseket.</td></tr><tr><td><span class="application">rpcbind</span></td><td>Ez a démon lehetõvé teszi az
		<acronym class="acronym">NFS</acronym> kliensek számára,
		hogy fel tudják deríteni az
		<acronym class="acronym">NFS</acronym> szerver által
		használt portot.</td></tr></tbody></table></div><p>A kliensen is futnia kell egy démonnak, amelynek a
	neve <span class="application">nfsiod</span>.  Az
	<span class="application">nfsiod</span> démon az
	<acronym class="acronym">NFS</acronym> szerver felõl érkezõ
	kéréseket szolgálja ki.  A
	használata teljesen opcionális, csupán a
	teljesítményt hívatott javítani, de
	a normális és helyes mûködéshez
	nincs rá szükségünk.  Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nfsiod&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nfsiod</span>(8)</span></a>
	man oldalán errõl többet is
	megtudhatunk.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-configuring-nfs"></a>29.3.2. Az <acronym class="acronym">NFS</acronym>
	beállítása</h3></div></div></div><a id="idp97084752" class="indexterm"></a><p>Az <acronym class="acronym">NFS</acronym> beállítása
	viszonylag egyértelmûen adja magát.  A
	mûködéséhez szükséges
	programok automatikus elindítása csupán
	néhány apró módosítást
	igényel az <code class="filename">/etc/rc.conf</code>
	állományban.</p><p>Az <acronym class="acronym">NFS</acronym> szerveren gondoskodjunk
	róla, hogy az alábbi
	beállítások szerepeljenek az
	<code class="filename">/etc/rc.conf</code>
	állományban:</p><pre class="programlisting">rpcbind_enable="YES"
nfs_server_enable="YES"
mountd_flags="-r"</pre><p>A <span class="application">mountd</span> magától el
	fog indulni, ha az <acronym class="acronym">NFS</acronym> szervert
	engedélyezzük.</p><p>A kliensen a következõ
	beállítást kell felvennünk az
	<code class="filename">/etc/rc.conf</code>
	állományba:</p><pre class="programlisting">nfs_client_enable="YES"</pre><p>Az <code class="filename">/etc/exports</code> állomány
	adja meg, hogy az <acronym class="acronym">NFS</acronym> milyen
	állományrendszereket exportáljon (vagy
	másképpen szólva <span class="quote">"<span class="quote">osszon
	meg</span>"</span>).  Az <code class="filename">/etc/exports</code>
	állományban tehát a megosztani
	kívánt állományrendszereket kell
	szerepeltetnünk, és azt, hogy melyik
	számítógépekkel tudjuk ezeket
	elérni.  A gépek megnevezése mellett a
	hozzáférésre további
	megszorításokat írhatunk fel.  Ezek
	részletes leírását az
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=exports&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">exports</span>(5)</span></a> man oldalon találjuk meg.</p><p>Lássunk néhány példát az
	<code class="filename">/etc/exports</code> állományban
	megjelenõ bejegyzésekre:</p><a id="idp97094608" class="indexterm"></a><p>A most következõ példákban az
	állományrendszerek
	exportálásának finomságait
	igyekszünk érzékeltetni, noha a
	konkrét beállítások gyakran a
	rendszerünktõl és a hálózati
	konfigurációtól függenek.
	Például, ha a <code class="filename">/cdrom</code>
	könytárat akarjuk három gép
	számára megosztani, akik a szerverrel
	megegyezõ tartományban találhatóak
	(ezért nem is kell megadnunk a tartományt) vagy
	mert egyszerûen megtalálhatók az
	<code class="filename">/etc/hosts</code> állományunkban.
	Az <code class="option">-ro</code> beállítás az
	exportált állományrendszereket
	írásvédetté teszi.  Ezzel a
	beállítással a távoli rendszerek nem
	lesznek képesek módosítani az
	exportált állományrendszer
	tartalmát.</p><pre class="programlisting">/cdrom -ro <em class="replaceable"><code>gép1 gép2 gép3</code></em></pre><p>A következõ sorban a <code class="filename">/home</code>
	könyvtárat három gép
	számára osztjuk meg, melyeket IP-címekkel
	adtunk meg.  Ez olyan helyi hálózat esetén
	hasznos, ahol nem állítottunk be
	névfeloldást.  Esetleg a belsõ
	hálózati neveket az
	<code class="filename">/etc/hosts</code> állományban is
	tárolhatjuk.  Ezzel utóbbival kapcsolatban a
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts</span>(5)</span></a> man oldalt érdemes fellapoznunk.  Az
	<code class="option">-alldirs</code> beállítás
	lehetõvé teszi, hogy az alkönyvtárak is
	csatlakozási pontok lehessenek.  Más
	szóval, nem fogja csatlakoztatni az
	alkönyvtárakat, de megengedi a kliensek
	számára, hogy csak azokat a
	könyvtárakat csatlakoztassák, amelyeket kell
	vagy amelyekre szükségünk van.</p><pre class="programlisting">/home  -alldirs  10.0.0.2 10.0.0.3 10.0.0.4</pre><p>A következõ sorban az <code class="filename">/a</code>
	könyvtárat úgy exportáljuk, hogy az
	állományrendszerhez két
	különbözõ tartományból is
	hozzá lehessen férni.  A
	<code class="option">-maproot=root</code> beállítás
	hatására a távoli rendszer
	<code class="systemitem">root</code> felhasználója az
	exportált állományrendszeren szintén
	<code class="systemitem">root</code> felhasználóként
	fogja írni az adatokat.  Amennyiben a
	<code class="literal">-maproot=root</code> beállítást
	nem adjuk meg, akkor a távoli rendszeren hiába
	<code class="systemitem">root</code> az adott felhasználó, az
	exportált állományrendszeren nem lesz
	képes egyetlen állományt sem
	módosítani.</p><pre class="programlisting">/a  -maproot=root  gep.minta.com doboz.haz.org</pre><p>A kliensek is csak a megfelelõ engedélyek
	birtokában képesek elérni a megosztott
	állományrendszereket.  Ezért a klienst ne
	felejtsük el felvenni a szerver
	<code class="filename">/etc/exports</code>
	állományába.</p><p>Az <code class="filename">/etc/exports</code>
	állományban az egyes sorok az egyes
	állományrendszerekre és az egyes
	gépekre vonatkoznak.  A távoli gépek
	állományrendszerenként csak egyszer
	adhatóak meg, és csak egy alapértelmezett
	bejegyzésük lehet.  Például
	tegyük fel, hogy a <code class="filename">/usr</code> egy
	önálló állományrendszer.  Ennek
	megfelelõen az alábbi bejegyzések az
	<code class="filename">/etc/exports</code> állományban
	érvénytelenek:</p><pre class="programlisting"># Nem használható, ha a /usr egy állományrendszer:
/usr/src   kliens
/usr/ports kliens</pre><p>Egy állományrendszerhez, vagyis itt a
	<code class="filename">/usr</code> partícióhoz, két
	export sort is megadtunk ugyanahhoz a <code class="systemitem">kliens</code>
	nevû géphez.  Helyesen így kell megoldani az
	ilyen helyzeteket:</p><pre class="programlisting">/usr/src /usr/ports  kliens</pre><p>Az adott géphez tartozó egy
	állományrendszerre vonatkozó exportoknak
	mindig egy sorban kell szerepelniük.  A kliens
	nélkül felírt sorok egyetlen géphez
	tartozónak fognak számítani.  Ezzel az
	állományrendszerek megosztását
	tudjuk szabályozni, de legtöbbek
	számára nem jelent gondot.</p><p>Most egy érvényes exportlista következik,
	ahol a <code class="filename">/usr</code> és az
	<code class="filename">/exports</code> mind helyi
	állományrendszerek:</p><pre class="programlisting"># Osszuk meg az src és ports könyvtárakat a kliens01 és kliens02 részére, de csak a
# kliens01 férhessen hozzá rendszeradminisztrátori jogokkal:
/usr/src /usr/ports -maproot=root    kliens01
/usr/src /usr/ports               kliens02
# A kliensek az /exports könyvtárban teljes joggal rendelkeznek és azon belül
# bármit tudnak csatlakoztatni. Rajtuk kívül mindenki csak írásvédetten képes
# elérni az /exports/obj könyvtárat:
/exports -alldirs -maproot=root      kliens01 kliens02
/exports/obj -ro</pre><p>A <span class="application">mountd</span> démonnal az
	<code class="filename">/etc/exports</code> állományt minden
	egyes módosítása után újra be
	kell olvastatni, mivel a változtatásaink csak
	így fognak érvényesülni.  Ezt
	megcsinálhatjuk úgy is, hogy küldünk egy
	HUP (hangup, avagy felfüggesztés) jelzést a
	már futó démonnak:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat /var/run/mountd.pid`</code></strong></pre><p>vagy meghívjuk a <code class="command">mountd</code> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a>
	szkriptet a megfelelõ paraméterrel:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/mountd onereload</code></strong></pre><p>Az <a class="xref" href="configtuning-rcd.html" title="11.7. Az rc használata FreeBSD alatt">11.7. szakasz - Az rc használata FreeBSD alatt</a>ban tudhatunk meg
	részleteket az rc szkriptek
	használatáról.</p><p>Ezek után akár a FreeBSD
	újraindításával is
	aktiválhatjuk a megosztásokat, habár ez nem
	feltétlenül szükséges.  Ha
	<code class="systemitem">root</code> felhasználónként
	kiadjuk a következõ parancsokat, akkor azzal minden
	szükséges programot elindítunk.</p><p>Az <acronym class="acronym">NFS</acronym> szerveren tehát:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpcbind</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>nfsd -u -t -n 4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mountd -r</code></strong></pre><p>Az <acronym class="acronym">NFS</acronym> kliensen pedig:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>nfsiod -n 4</code></strong></pre><p>Ezzel most már minden készen áll a
	távoli állományrendszer
	csatlakoztatására.  A példákban a
	szerver neve <code class="systemitem">szerver</code> lesz, valamint a kliens
	neve <code class="systemitem">kliens</code>.  Ha csak ideiglenesen akarunk
	csatlakoztatni egy állományrendszert vagy
	egyszerûen csak ki akarjuk próbálni a
	beállításainkat, a kliensen
	<code class="systemitem">root</code> felhasználóként
	az alábbi parancsot hajtsuk végre:</p><a id="idp97140304" class="indexterm"></a><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount szerver:/home /mnt</code></strong></pre><p>Ezzel a szerveren található
	<code class="filename">/home</code> könyvtárat fogjuk a
	kliens <code class="filename">/mnt</code> könyvtárába
	csatlakoztatni.  Ha mindent jól
	beállítottunk, akkor a kliensen most már be
	tudunk lépni az <code class="filename">/mnt</code>
	könyvtárba és láthatjuk a szerveren
	található állományokat.</p><p>Ha a számítógép
	indításával automatikusan akarunk
	hálózati állományrendszereket
	csatlakoztatni, akkor vegyük fel ezeket az
	<code class="filename">/etc/fstab</code> állományba.  Erre
	íme egy példa:</p><pre class="programlisting">szerver:/home	/mnt	nfs	rw	0	0</pre><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> man megtalálhatjuk az összes
	többi beállítást.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp97146448"></a>29.3.3. Zárolások</h3></div></div></div><p>Bizonyos alkalmazások (például a
	<span class="application">mutt</span>) csak akkor mûködnek
	megfelelõen, ha az állományokat a
	megfelelõ módon zárolják.  Az
	<acronym class="acronym">NFS</acronym> esetében az
	<span class="application">rpc.lockd</span> használható
	az ilyen zárolások
	megvalósítására.  Az
	engedélyezéséhez mind a szerveren és
	a kliensen vegyük fel a következõ sort az
	<code class="filename">/etc/rc.conf</code> állományba (itt
	már feltételezzük, hogy az
	<acronym class="acronym">NFS</acronym> szervert és klienst
	korábban beállítottuk):</p><pre class="programlisting">rpc_lockd_enable="YES"
rpc_statd_enable="YES"</pre><p>A következõ módon indíthatjuk
	el:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/lockd start</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/statd start</code></strong></pre><p>Ha nincs szükségünk valódi
	zárolásra az <acronym class="acronym">NFS</acronym> kliensek
	és az <acronym class="acronym">NFS</acronym> szerver között,
	akkor megcsinálhatjuk azt is, hogy az
	<acronym class="acronym">NFS</acronym> kliensen a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_nfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_nfs</span>(8)</span></a> programnak
	az <code class="option">-L</code> paraméter
	átadásával csak helyileg
	végzünk zárolást.  Ennek
	további részleterõl a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_nfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_nfs</span>(8)</span></a> man
	oldalon kaphatunk felvilágosítást.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp97155664"></a>29.3.4. Gyakori felhasználási módok</h3></div></div></div><p>Az <acronym class="acronym">NFS</acronym> megoldását a
	gyakorlatban rengeteg esetben alkalmazzák.  Ezek
	közül most felsoroljuk a legelterjedtebbeket:</p><a id="idp97157072" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Több gép között megosztunk egy
	    telepítõlemezt vagy más
	    telepítõeszközt.  Ez így sokkal
	    olcsóbb és gyakorta kényelmes
	    megoldás abban az esetben, ha egyszerre több
	    gépre akarjuk ugyanazt a szoftvert
	    telepíteni.</p></li><li class="listitem"><p>Nagyobb hálózatokon sokkal
	    kényelmesebb lehet egy központi
	    <acronym class="acronym">NFS</acronym> szerver használata, ahol a
	    felhasználók könyvtárait
	    tároljuk.  Ezek a felhasználói
	    könyvtárak aztán megoszthatóak a
	    hálózaton keresztül, így a
	    felhasználók mindig ugyanazt a
	    könyvárat kapják függetlenül
	    attól, hogy milyen
	    munkaállomásról is jelentkeztek
	    be.</p></li><li class="listitem"><p>Több géppel is képes így
	    osztozni az <code class="filename">/usr/ports/distfiles</code>
	    könyvtáron.  Ezen a módon sokkal
	    gyorsabban tudunk portokat telepíteni a
	    gépekre, mivel nem kell külön mindegyikre
	    letölteni az ehhez szükséges
	    forrásokat.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-amd"></a>29.3.5. Automatikus csatlakoztatás az
	<span class="application">amd</span>
	használatával</h3></div><div><span class="authorgroup">Készítette: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Stilwell</span>, <span class="firstname">Wylie</span></span>. </span></div><div><span class="authorgroup">Újraírta: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lee</span>, <span class="firstname">Chern</span></span>. </span></div></div></div><a id="idp97166416" class="indexterm"></a><a id="idp97166928" class="indexterm"></a><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a> (automatikus csatlakoztató
	démon, az automatic mounter daemon)
	önmûködõen csatlakoztatja a távoli
	állományrendszereket, amikor azokon belül
	valamelyik állományhoz vagy
	könyvtárhoz próbálunk
	hozzáférni.  Emellett az
	<span class="application">amd</span> az egy ideje már
	inaktív állományrendszereket is
	automatikusan leválasztja.  Az
	<span class="application">amd</span> használata egy remek
	alternatívát kínál az
	általában az <code class="filename">/etc/fstab</code>
	állományban megjelenõ állandóan
	csatlakoztatott állományrendszerekkel
	szemben.</p><p>Az <span class="application">amd</span> úgy
	mûködik, hogy kapcsolódik egy NFS szerver
	<code class="filename">/host</code> és <code class="filename">/net</code>
	könyvtáraihoz.  Amikor egy állományt
	akarunk elérni ezeken a könyvtárakon
	belül, az <span class="application">amd</span> kikeresi a
	megfelelõ távoli csatlakoztatást és
	magától csatlakoztatja.  A
	<code class="filename">/net</code> segítségével egy
	IP-címrõl tudunk exportált
	állományrendszereket csatlakoztatni, miközben
	a <code class="filename">/host</code> a távoli gép
	hálózati neve esetében
	használatos.</p><p>Ha tehát a <code class="filename">/host/izemize/usr</code>
	könyvtárban akarunk elérni egy
	állományt, akkor az <span class="application">amd</span>
	démonnak ahhoz elõször az
	<code class="systemitem">izemize</code> nevû géprõl
	exportált <code class="filename">/usr</code>
	könyvtárat kell csatlakoztatnia.</p><div class="example"><a id="idp97178832"></a><div class="example-title">29.2. példa - Egy exportált állományrendszer
	  csatlakoztatása az <span class="application">amd</span>
	  használatával</div><div class="example-contents"><p>Egy távoli számítógép
	  által rendelkezésre bocsátott
	  megosztásokat a <code class="command">showmount</code> paranccsal
	  tudjuk lekérdezni.  Például az
	  <code class="systemitem">izemize</code> gépen elérhetõ
	  exportált állományrendszereket így
	  láthatjuk:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>showmount -e izemize</code></strong>
Exports list on izemize:
/usr                               10.10.10.0
/a                                 10.10.10.0
<code class="prompt">%</code> <strong class="userinput"><code>cd /host/izemize/usr</code></strong></pre></div></div><br class="example-break" /><p>Ahogy a példában látjuk is, a
	<code class="command">showmount</code> parancs a <code class="filename">/usr</code>
	könyvtárat mutatja megosztásként.
	Amikor tehát belépünk a
	<code class="filename">/host/izemize/usr</code> könyvtárba,
	akkor <span class="application">amd</span> magától
	megpróbálja feloldani az <code class="systemitem">izemize</code>
	hálózati nevet és csatlakoztatni az
	elérni kívánt exportált
	állományrendszert.</p><p>Az <span class="application">amd</span> az indító
	szkripteken keresztül az <code class="filename">/etc/rc.conf</code>
	alábbi beállításával
	engedélyezhetõ:</p><pre class="programlisting">amd_enable="YES"</pre><p>Emellett még az <code class="varname">amd_flags</code>
	használatával további paraméterek is
	átadható az <span class="application">amd</span>
	felé.  Alapértelmezés szerint az
	<code class="varname">amd_flags</code> tartalmaz az alábbi:</p><pre class="programlisting">amd_flags="-a /.amd_mnt -l syslog /host /etc/amd.map /net /etc/amd.map"</pre><p>Az <code class="filename">/etc/amd.map</code> állomány
	adja meg az exportált állományrendszerek
	alapértelmezett beállításait.  Az
	<code class="filename">/etc/amd.conf</code> állományban az
	<span class="application">amd</span> további
	lehetõségeit konfigurálhatjuk..</p><p>Ha többet is szeretnénk tudni a
	témáról, akkor az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a> és az
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">amd.conf</span>(5)</span></a> man oldalakat javasolt elolvasnunk.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-nfs-integration"></a>29.3.6. Problémák más rendszerek
	használatakor</h3></div><div><span class="authorgroup">Készítette: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Lind</span>, <span class="firstname">John</span></span>. </span></div></div></div><p>Némely PC-s ISA buszos Ethernet
	kártyákra olyan korlátozások
	érvényesek, melyek komoly hálózati
	problémák keletkezéséhez
	vezethetnek, különösen az NFS esetében.
	Ez a nehézség nem FreeBSD-függõ, de a FreeBSD
	rendszereket is érinti.</p><p>Ez gond általában majdnem mindig akkor
	merül fel, amikor egy (FreeBSD-s) PC egy
	hálózatba kerül többek közt a
	Silicon Graphic és a Sun Microsystems által
	gyártott nagyteljesítményû
	munkaállomásokkal.  Az NFS csatlakoztatása
	és bizonyos mûveletek még hibátlanul
	végrehajtódnak, azonban hirtelen a szerver
	látszólag nem válaszol többet a kliens
	felé úgy, hogy a többi rendszertõl
	folyamatosan dolgozza felfele a kéréseket.  Ez a
	kliens rendszeren tapasztalható csak, amikor a kliens
	FreeBSD vagy egy munkaállomás.  Sok rendszeren
	egyszerûen rendesen le sem lehet állítani a
	klienst, ha a probléma egyszer már
	felütötte a fejét.  Egyedüli
	megoldás gyakran csak a kliens
	újraindítása marad, mivel az NFS-ben
	kialakult helyzetet máshogy nem lehet megoldani.</p><p>Noha a <span class="quote">"<span class="quote">helyes</span>"</span> megoldás az lenne, ha
	beszereznénk egy nagyobb teljesítményû
	és kapacitású kártyát a FreeBSD
	rendszer számára, azonban egy jóval
	egyszerûbb kerülõút is
	található a kielégítõ
	mûködés eléréséhez.  Ha a
	FreeBSD rendszer képviseli a <span class="emphasis"><em>szervert</em></span>,
	akkor a kliensnél adjuk meg a <code class="option">-w=1024</code>
	beállítást is a
	csatlakoztatásnál.  Ha a FreeBSD rendszer a
	<span class="emphasis"><em>kliens</em></span> szerepét tölti be, akkor
	az NFS állományrendszert az
	<code class="option">-r=1024</code> beállítással
	csatlakoztassuk róla.  Ezek a
	beállítások az <code class="filename">fstab</code>
	állomány negyedik mezõjében is
	megadhatóak az automatikus csatlakoztatáshoz, vagy
	manuális esetben a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> parancsnak a
	<code class="option">-o</code> paraméterrel.</p><p>Hozzá kell azonban tennünk, hogy létezik
	egy másik probléma, amit gyakran ezzel
	tévesztenek össze, amikor az NFS szerverek és
	kliensek nem ugyanabban a hálózatban
	találhatóak.  Ilyen esetekben mindenképpen
	<span class="emphasis"><em>gyõzõdjünk meg róla</em></span>,
	hogy az útválasztók rendesen
	továbbküldik a mûködéshez
	szükséges <acronym class="acronym">UDP</acronym>
	információkat, különben nem sokat tudunk
	tenni a megoldás érdekében.</p><p>A most következõ példákban a
	<code class="systemitem">gyorsvonat</code> lesz a
	nagyteljesítményû munkaállomás
	(felület) neve, illetve a <code class="systemitem">freebsd</code> pedig a
	gyengébb teljesítményû Ethernet
	kártyával rendelkezõ FreeBSD rendszer
	(felület) neve.  A szerveren az
	<code class="filename">/osztott</code> nevû könyvtárat
	fogjuk NFS állományrendszerként
	exportálni (lásd <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=exports&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">exports</span>(5)</span></a>), amelyet majd a
	<code class="filename">/projekt</code> könyvtárba fogunk
	csatlakoztatni a kliensen.  Minden esetben érdemes lehet
	még megadnunk a <code class="option">hard</code> vagy
	<code class="option">soft</code>, illetve <code class="option">bg</code>
	opciókat is.</p><p>Ebben a példában a FreeBSD rendszer
	(<code class="systemitem">freebsd</code>) lesz a kliens, és az
	<code class="filename">/etc/fstab</code>
	állományában így szerepel az
	exportált állományrendszer:</p><pre class="programlisting">gyorsvonat:/osztott /projekt nfs rw,-r=1024 0 0</pre><p>És így tudjuk manuálisan
	csatlakoztatni:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t nfs -o -r=1024 gyorsvonat:/osztott /projekt</code></strong></pre><p>Itt a FreeBSD rendszer lesz a szerver, és a
	<code class="systemitem">gyorsvonat</code> <code class="filename">/etc/fstab</code>
	állománya így fog kinézni:</p><pre class="programlisting">freebsd:/osztott /projekt nfs rw,-w=1024 0 0</pre><p>Manuálisan így csatlakoztathatjuk az
	állományrendszert:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t nfs -o -w=1024 freebsd:/osztott /projekt</code></strong></pre><p>Szinte az összes 16 bites Ethernet kártya
	képes mûködni a fenti írási vagy
	olvasási korlátozások nélkül
	is.</p><p>A kíváncsibb olvasók
	számára eláruljuk, hogy pontosan
	miért is következik be ez a hiba, ami egyben arra is
	magyarázatot ad, hogy miért nem tudjuk
	helyrehozni.  Az NFS általában 8 kilobyte-os
	<span class="quote">"<span class="quote">blokkokkal</span>"</span> dolgozik (habár kisebb
	méretû darabkákat is tud
	készíteni).  Mivel az Ethernet által kezelt
	legnagyobb méret nagyjából 1500 byte,
	ezért az NFS <span class="quote">"<span class="quote">blokkokat</span>"</span> több Ethernet
	csomagra kell osztani - még olyankor is, ha ez a
	program felsõbb rétegeiben osztatlan
	egységként látszik - ezt aztán
	fogadni kell, összerakni és
	<span class="emphasis"><em>nyugtázni</em></span> mint egységet.  A
	nagyteljesítményû
	munkaállomások a szabvány által
	még éppen megengedett szorossággal
	képesek ontani magukból az egy egységhez
	tartozó csomagokat, közvetlenül egymás
	után.  A kisebb, gyengébb
	teljesítményû kártyák
	esetében azonban az egymáshoz tartozó,
	késõbb érkezõ csomagok ráfutnak a
	korábban megkapott csomagokra még pontosan
	azelõtt, hogy elérnék a gépet,
	így az egységek nem
	állíthatóak össze vagy nem
	nyugtázhatóak.  Ennek
	eredményeképpen a munkaállomás egy
	adott idõ múlva megint próbálkozik, de
	ismét az egész 8 kilobyte-os blokkot
	küldi el, ezért ez a folyamat a
	végtelenségig ismétlõdik.</p><p>Ha a küldendõ egységek
	méretét az Ethernet által kezelt csomagok
	maximális mérete alá csökkentjük,
	akkor biztosak lehetünk benne, hogy a teljes Ethernet
	csomag egyben megérkezik és
	nyugtázódik, így elkerüljük a
	holtpontot.</p><p>A nagyteljesítményû
	munkaállomások természetesen
	továbbra is küldhetnek a PC-s rendszerek felé
	túlfutó csomagokat, de egy jobb
	kártyával az ilyen túlfutások nem
	érintik az NFS által használt
	<span class="quote">"<span class="quote">egységeket</span>"</span>.  Amikor egy ilyen
	túlfutás bekövetkezik, az érintett
	egységet egyszerûen újra elküldik,
	amelyet a rákövetkezõ alkalommal nagy
	valószínûséggel már tudunk
	rendesen fogadni, összerakni és
	nyugtázni.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-inetd.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="network-nis.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">29.2. Az <span class="application">inetd</span>
      <span class="quote">"<span class="quote">szuperszerver</span>"</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 29.4. Hálózati információs rendszer
      (NIS/YP)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>