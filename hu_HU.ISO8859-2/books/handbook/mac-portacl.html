<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>16.10. A portacl MAC-modul</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="mac.html" title="16. fejezet - Kötelezõ hozzáférés-vezérlés (MAC)" /><link rel="prev" href="mac-ifoff.html" title="16.9. Az ifoff MAC-modul" /><link rel="next" href="mac-partition.html" title="16.11. A partition MAC-modul" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">16.10. A portacl MAC-modul</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mac-ifoff.html">Vissza</a> </td><th width="60%" align="center">16. fejezet - Kötelezõ
    hozzáférés-vezérlés (MAC)</th><td width="20%" align="right"> <a accesskey="n" href="mac-partition.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-portacl"></a>16.10. A portacl MAC-modul</h2></div></div></div><a id="idp89075408" class="indexterm"></a><p>A modul neve: <code class="filename">mac_portacl.ko</code></p><p>A rendszermag konfigurációs
      beállítása:
      <code class="literal">MAC_PORTACL</code></p><p>Rendszerindítási beállítás:
      <code class="literal">mac_portacl_load="YES"</code></p><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_portacl</span>(4)</span></a> modul a helyi <acronym class="acronym">TCP</acronym>
      és <acronym class="acronym">UDP</acronym> portok kiosztásának
      korlátozását teszi lehetõvé
      különféle
      <code class="command">sysctl</code>-változókon keresztül.
      A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_portacl</span>(4)</span></a> segítségével
      lényegében a nem-<code class="systemitem">root</code>
      felhasználók is használhatnak
      privilegizált, tehát 1024 alatti portokat.</p><p>Miután betöltöttük, a modul az
      összes csatlakozásra alkalmazza a
      <acronym class="acronym">MAC</acronym>-házirendet.  Ezután az
      alábbi változókkal hangolhatjuk a
      viselkedését:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A <code class="literal">security.mac.portacl.enabled</code>
	  totálisan engedélyezi vagy letiltja a
	  házirend használatát.</p></li><li class="listitem"><p>A <code class="literal">security.mac.portacl.port_high</code>
	  megadja azt a legmagasabb portot, amelyre még kiterjed
	  a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_portacl</span>(4)</span></a> védelme.</p></li><li class="listitem"><p>Ha a <code class="literal">security.mac.portacl.suser_exempt</code>
	  változónak nem nulla értéket adunk
	  meg, akkor azzal a <code class="systemitem">root</code>
	  felhasználót kivonjuk a
	  szabályozások alól.</p></li><li class="listitem"><p>A <code class="literal">security.mac.portacl.rules</code> az
	  érvényes mac_portacl házirendet adja meg,
	  lásd lentebb.</p></li></ul></div><p>A <code class="literal">security.mac.portacl.rules</code>
      változó által megadott aktuális
      <code class="literal">mac_portacl</code> házirend formátuma a
      következõ:
      <code class="literal">szabály[,szabály,...]</code>, ahol ezen
      a módon tetszõleges számú
      szabályt adhatunk meg.  Az egyes szabályok pedig
      így írhatóak fel: <code class="literal">
      azonosítótípus:
      azonosító:
      protokoll:
      port</code>.  Az
      <em class="parameter"><code>azonosítótípus</code></em>
      értéke <code class="literal">uid</code> vagy
      <code class="literal">gid</code> lehet, amivel megadjuk, hogy az
      <em class="parameter"><code>azonosító</code></em> paraméter
      felhasználóra vagy csoportra hivatkozik.  A
      <em class="parameter"><code>protokoll</code></em> paraméter adja meg, hogy a
      szabályt <acronym class="acronym">TCP</acronym> vagy <acronym class="acronym">UDP</acronym>
      típusú kapcsolatra értjük, és
      ennek megfelelõen az értéke is
      <code class="literal">tcp</code> vagy <code class="literal">udp</code> lehet.  A sort
      végül a <em class="parameter"><code>port</code></em> paraméter
      zárja, ahol annak a portnak számát adjuk meg,
      amelyhez az adott felhasználót vagy csoportot
      akarjuk kötni.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Mivel a szabályokat közvetlenül maga a
	rendszermag dolgozza fel, ezért a
	felhasználók illetve csoportok
	azonosítója, valamint a port értéke
	kizárólag numerikus érték lehet.
	Tehát a szabályokban név szerint nem
	hivatkozhatunk felhasználókra, csoportokra vagy
	szolgáltatásokra.</p></div><p>A <span class="trademark">UNIX</span>(R)-szerû rendszereken alapértelmezés
      szerint az 1024 alatti portokat csak privilegizált
      programok kaphatják meg és
      használhatják, tehát a
      <code class="systemitem">root</code> felhasználó neve alatt
      kell futniuk.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_portacl</span>(4)</span></a> azonban a nem
      privilegizált programok számára is
      lehetõvé teszi, hogy elfoglalhassanak 1024 alatti
      portokat, amihez viszont elõször le kell tiltani ezt a
      szabvány <span class="trademark">UNIX</span>(R)-os korlátozást.  Ezt
      úgy érhetjük el, ha a
      <code class="literal">net.inet.ip.portrange.reservedlow</code> és
      <code class="literal">net.inet.ip.portrange.reservedhigh</code>
      változókat egyaránt nullára
      állítjuk.</p><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_portacl</span>(4)</span></a> mûködésének
      részleteirõl a példákon keresztül
      vagy a megfelelõ man oldalakból tudhatunk meg
      többet.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89104464"></a>16.10.1. Példák</h3></div></div></div><p>A következõ példák az
	iméntieket igyekeznek jobban
	megvilágítani:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl security.mac.portacl.port_high=1023</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl net.inet.ip.portrange.reservedlow=0 net.inet.ip.portrange.reservedhigh=0</code></strong></pre><p>Elsõként beállítjuk, hogy a
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_portacl</span>(4)</span></a> vegye át a szabványos
	privilegizált portok vezérlését
	és letiltjuk a normál <span class="trademark">UNIX</span>(R)-os
	korlátozásokat.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl security.mac.portacl.suser_exempt=1</code></strong></pre><p>A <code class="systemitem">root</code> felhasználót
	azonban nem akarjuk kitenni a házirendnek, ezért a
	<code class="literal">security.mac.portacl.suser_exempt</code>
	változónak egy nem nulla értéket
	adunk meg.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_portacl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">mac_portacl</span>(4)</span></a> modul most pontosan
	ugyanúgy mûködik, mint a <span class="trademark">UNIX</span>(R)-szerû
	rendszerek alapértelmezés szerint.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl security.mac.portacl.rules=uid:80:tcp:80</code></strong></pre><p>A 80-as azonosítóval rendelkezõ
	felhasználó (aki általában a
	<code class="systemitem">www</code>) számára
	engedélyezzük a 80-as port
	használatát.  Így a
	<code class="systemitem">www</code> felhasználó
	anélkül képes webszervert futtatni, hogy
	szüksége lenne a <code class="systemitem">root</code>
	jogosultságaira.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl security.mac.portacl.rules=uid:1001:tcp:110,uid:1001:tcp:995</code></strong></pre><p>Az 1001-es azonosítóval rendelkezõ
	felhasználónak megengedjük, hogy
	elfoglalhassa a 110-es (<span class="quote">"<span class="quote">pop3</span>"</span>) és
	995-ös (<span class="quote">"<span class="quote">pop3s</span>"</span>) portokat.  Ennek
	köszönhetõen az adott felhasználó
	el tud indítani egy szervert, amihez a 110-es és
	995-ös portokon lehet kapcsolódni.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mac-ifoff.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="mac.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="mac-partition.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">16.9. Az ifoff MAC-modul </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 16.11. A partition MAC-modul</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>