<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>27.7. A SLIP használata</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="ppp-and-slip.html" title="27. fejezet - A PPP és a SLIP" /><link rel="prev" href="pppoa.html" title="27.6. PPP ATM felett (PPPoA)" /><link rel="next" href="mail.html" title="28. fejezet - Elektronikus levelezés" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">27.7. A SLIP használata</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="pppoa.html">Vissza</a> </td><th width="60%" align="center">27. fejezet - A PPP és a SLIP</th><td width="20%" align="right"> <a accesskey="n" href="mail.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="slip"></a>27.7. A SLIP használata</h2></div><div><span class="authorgroup">Eredetileg készítette: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Asami</span>, <span class="firstname">Satoshi</span></span>. </span></div><div><span class="authorgroup">A hozzávalókat biztosította:
	    <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Helmer</span>, <span class="firstname">Guy</span></span> és <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Serini</span>, <span class="firstname">Piero</span></span>. </span></div></div></div><a id="idp95827920" class="indexterm"></a><div xmlns="" class="warning"><h3 class="admontitle">Figyelem: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ez a szakasz csak FreeBSD 7.<em class="replaceable"><code>X</code></em>
	rendszerekre érvényes.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slipc"></a>27.7.1. A SLIP kliensek beállítása</h3></div></div></div><a id="idp95830352" class="indexterm"></a><p>A következõkben azt mutatjuk be, hogy egy FreeBSD-s
	gépet miként tudunk egy hálózaton
	statikus névvel beállítani a SLIP
	használatával.  A dinamikus hálózati
	nevek használatakor (vagyis amikor a címünk
	minden egyes tárcsázáskor
	megváltozhat) egy valamivel bonyolultabb
	beállításra van
	szükségünk.</p><p>Elõször is állapítsuk meg, hogy a
	modemünk melyik soros portra csatlakozik.  Sokan
	<code class="filename">/dev/modem</code> néven
	egy szimbolikus linket hoznak létre a valódi
	eszközre, például a <code class="filename">/dev/cuadN</code>
	leíróra.  Ennek köszönhetõen az
	eszköz tényleges névetõl el tudunk
	vonatkoztatni és soha nem kell módosítanunk
	semmit, ha a modemet például egy másik
	portra kell átraknunk.  Ugyanis könnyedén
	kacifántossá tud válni a helyzet, amikor
	egyszerre kell megváltoztatnunk egy rakat dolgot az
	<code class="filename">/etc</code>
	könyvtárban és módosítanunk az
	összes <code class="filename">.kermrc</code>
	állományt!</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">A <code class="filename">/dev/cuad0</code> a
	  <code class="filename">COM1</code> port, a <code class="filename">/dev/cuad1</code> a
	  <code class="filename">COM2</code> és így
	  tovább.</p></div><p>A rendszermag beállításait
	tartalmazó állományban a
	következõnek mindenképpen szerepelnie
	kell:</p><pre class="programlisting">device   sl</pre><p>Mivel ez általában a
	<code class="filename">GENERIC</code> rendszermagban
	megtalálható, így ez nem okoz semmilyen
	gondot, kivéve, hogy ha korábban már
	kitöröltük.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95837776"></a>27.7.1.1. Amit csak egyszer kell megtenni</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Vegyük fel az otthoni gépünket, az
	      átjárónkat és a
	      névszervereket az <code class="filename">/etc/hosts</code>
	      állományba.  Erre álljon itt egy
	      konkrét példa:</p><pre class="programlisting">127.0.0.1               localhost loghost
136.152.64.181          water.CS.Example.EDU water.CS water
136.152.64.1            inr-3.CS.Example.EDU inr-3 slip-gateway
128.32.136.9            ns1.Example.EDU ns1
128.32.136.12           ns2.Example.EDU ns2</pre></li><li class="step"><p>Figyeljünk oda, hogy az
	      <code class="filename">/etc/nsswitch.conf</code>
	      állományban szereplõ
	      <code class="option">hosts</code> szakaszban a <code class="literal">dns</code>
	      szó elõtt a <code class="literal">files</code>
	      szónak kell megjelennie.  Ezek nélkül
	      mókás dolgok tudnak történni
	      rendszerünkben.</p></li><li class="step"><p>Szerkesszük át az
	      <code class="filename">/etc/rc.conf</code>
	      állományt.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>A hálózati nevünket a
		  következõ sorban tudjuk megadni:</p><pre class="programlisting">hostname="az.en.nevem"</pre><p>Ide a gépünk teljes internetes
		  hálózati nevét kell
		  beírnunk.</p></li><li class="listitem"><p>Az alapértelmezett
		  átjárót<a id="idp95854288" class="indexterm"></a> az alábbi sor
		  módosításával tudjuk
		  beállítani úgy, hogy a</p><pre class="programlisting">defaultrouter="NO"</pre><p>változó értékét
		  átírjuk:</p><pre class="programlisting">defaultrouter="slip-gateway"</pre></li></ol></div></li><li class="step"><p>Készítsük el az
	      <code class="filename">/etc/resolv.conf</code>
	      állományt, amelyben majd a
	      következõk legyenek:</p><pre class="programlisting">domain CS.Example.EDU
nameserver 128.32.136.9
nameserver 128.32.136.12</pre><a id="idp95862096" class="indexterm"></a><a id="idp95862608" class="indexterm"></a><p>Látható, hogy ezek a
	      névfeloldásért felelõs szerverek
	      címei.  Természetesen a ténylegesen
	      beírandó tartomány (domain) neve
	      és a névszerverek címei mindig az
	      adott környezetünktõl függenek.</p></li><li class="step"><p>Állítsuk be egy jelszót a
	      <code class="systemitem">root</code> és
	      <code class="systemitem">toor</code> felhasználóknak
	      (és mindenki másnak, akinek még nem
	      lenne).</p></li><li class="step"><p>Indítsuk újra a
	      számítógépünket és
	      utána gyõzõdjünk meg róla,
	      hogy a megfelelõ hálózati névvel
	      rendelkezik.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95866448"></a>27.7.1.2. A SLIP kapcsolatok
	  felépítése</h4></div></div></div><a id="idp95867088" class="indexterm"></a><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Tárcsázzunk és
	      gépeljük be a <code class="command">slip</code>
	      parancsot, majd ezt követõen a
	      gépünk nevét és a
	      jelszót.  Ez leginkább a konkrét
	      környezettõl függ.  Ha a
	      <span class="application">Kermit</span> nevû programot
	      használjuk, akkor egy ilyen szkripttel is
	      próbálkozhatunk:</p><pre class="programlisting"># a kermit beállítása
set modem hayes
set line /dev/modem
set speed 115200
set parity none
set flow rts/cts
set terminal bytesize 8
set file type binary
# a következõ makró felelõs a tárcsázásért és a bejelentkezésért
define slip dial 643-9600, input 10 =&gt;, if failure stop, -
output slip\x0d, input 10 Azonosito:, if failure stop, -
output silvia\x0d, input 10 Jelszo:, if failure stop, -
output ***\x0d, echo \x0aCONNECTED\x0a</pre><p>Természetesen a felhasználói
	      nevet és a jelszót a sajátunkra kell
	      benne kicserélnünk.  Miután ezzel is
	      megvagyunk, a <span class="application">Kermit</span>
	      paranccsorában a csatlakozáshoz
	      egyszerûen csak írjuk be, hogy
	      <code class="command">slip</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="emphasis"><em>Nem</em></span> javasoljuk, hogy az
	  állományrendszeren a jelszavakat
	  titkosítatlan formában tároljuk.  Mindeki
	  csak a saját felelõsségére tegyen
	  ilyet.</p></div></li><li class="step"><p>Hagyjuk el a <span class="application">Kermit</span>
	      programot (a <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>z</strong></span>
	      billentyûkombinációval bármikor
	      fel tudjuk függeszteni a futását)
	      és <code class="systemitem">root</code>
	      felhasználóként írjuk be a
	      következõt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>slattach -h -c -s 115200 /dev/modem</code></strong></pre><p>Ha ezután már képesek vagyunk a
	      <code class="command">ping</code> paranccsal elérni az
	      útválasztó másik
	      oldalán található gépet, akkor
	      az azt jelenti, hogy sikerült csatlakoznunk!  Ha
	      viszont itt még nem járnánk sikerrel,
	      akkor az <code class="command">slattach</code> parancsnak ne a
	      <code class="option">-c</code> paramétert adjuk meg, hanem a
	      <code class="option">-a</code> paramétert.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95887056"></a>27.7.1.3. Hogyan bontsunk egy kapcsolatot</h4></div></div></div><p>Tegyük a következõket:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -INT `cat /var/run/slattach.modem.pid`</code></strong></pre><p>Ez leállítja az <code class="command">slattach</code>
	  programot.  Ne felejtsük el azonban, hogy ezt csak a
	  <code class="systemitem">root</code> felhasználóval tudjuk
	  végrehajtani.  Ezután térjünk vissza
	  a <code class="command">kermit</code> programhoz (ha
	  felfüggesztettük volna, akkor ehhez a
	  <code class="command">fg</code> parancsra lesz
	  szükségünk), és lépjünk ki
	  belõle (<span class="keycap"><strong>q</strong></span>).</p><p>Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=slattach&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">slattach</span>(8)</span></a> man oldala ehhez a <code class="command">ifconfig
	  sl0 down</code> parancsot javasolja, amellyel
	  lényegében leállítjuk a
	  hozzá tartozó felületet.
	  Igazából a kettõ között nincs
	  semmilyen komolyabb eltérés (mivel az
	  (<code class="command">ifconfig sl0</code> is ugyanezt
	  eredményezi.)</p><p>Néha elõfordulhat, hogy a modem
	  egyszerûen nem hajlandó eldobni a vonalat.  Ilyen
	  esetekben indítsuk el a <code class="command">kermit</code>
	  programot és lépjünk ki megint.
	  Másodjára általában már
	  sikerül.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95898704"></a>27.7.1.4. Hibaelhárítás</h4></div></div></div><p>Ha valamiért ez mégsem válna be,
	  akkor csak nyugodtan kérdezõsködjünk a
	  <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-net" target="_top">freebsd-net</a> levelezési listán.  A tapasztalatok
	  szerint az embereknek eddig a következõkkel voltak
	  problémáik:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Az <code class="command">slattach</code>
	      meghívásakor sem a <code class="option">-c</code>, sem
	      pedig a <code class="option">-a</code> paramétert nem
	      adták meg.  (Ez ugyan nem végzetes hiba, de
	      egyes felhasználók szerint ez
	      segített megoldani a gondokat.)</p></li><li class="listitem"><p>Az <code class="option">sl0</code> helyett
	      <code class="option">s10</code>-et írtak be (egyes
	      betûtípusoknál könnyen össze
	      lehet téveszteni ezeket).</p></li><li class="listitem"><p>Az <code class="command">ifconfig sl0</code>
	      segítségével ellenõrizhetõ
	      a felület állapota.  Például
	      ilyet láthatunk:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig sl0</code></strong>
sl0: flags=10&lt;POINTOPOINT&gt;
        inet 136.152.64.181 --&gt; 136.152.64.1 netmask ffffff00</pre></li><li class="listitem"><p>Ha a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> <span class="errorname">no route to
	      host</span> hibaüzenetet ad, akkor az
	      útválasztási
	      táblázattal van a gond.  A <code class="command">netstat
	      -r</code> paranccsal gyorsan ki tudjuk listázni
	      a rendszerünkben jelenleg nyilvántartott
	      utakat:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>netstat -r</code></strong>
Routing tables
Destination      Gateway            Flags     Refs     Use  IfaceMTU    Rtt    Netmasks:

(root node)
(root node)

Route Tree for Protocol Family inet:
(root node) =&gt;
default          inr-3.Example.EDU  UG          8   224515  sl0 -      -
localhost.Exampl localhost.Example. UH          5    42127  lo0 -       0.438
inr-3.Example.ED water.CS.Example.E UH          1        0  sl0 -      -
water.CS.Example localhost.Example. UGH        34 47641234  lo0 -       0.438
(root node)</pre><p>Az elõzõ példákat egy
	      viszonylag forgalmas rendszerbõl ragadtuk ki.  A
	      rendszerünkön megjelenõ számok a
	      hálózati aktivitás
	      mértékének
	      függvényei.</p></li></ul></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slips"></a>27.7.2. A SLIP szerverek beállítása</h3></div></div></div><a id="idp95915344" class="indexterm"></a><p>Ebben a leírásban igyekszünk bemutatni
	hogyan kell egy FreeBSD típusú rendszer alatt SLIP
	szervert beállítani, ami általában
	annyit jelent, hogy a rendszerünben a távoli SLIP
	kliensek csatlakozásakor automatikusan elindítjuk
	a kapcsolatokat.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slips-prereqs"></a>27.7.2.1. Elõfeltételek</h4></div></div></div><a id="idp95917776" class="indexterm"></a><p>Ez a szakasz igen szakmai jellegû, ezért az
	  olvasó részérõl
	  feltételezünk a témában némi
	  alapismeretet.  Ez alatt alapvetõen a TPC/IP
	  hálózati protokollt értjük,
	  különös hangsúllyal a
	  hálózatok és hálózati
	  csomópontok címzéséen, a
	  hálózati maszkokon, alhálózatokon,
	  útválasztáson, az olyan
	  útválasztási protokollokon, mint
	  például a RIP.  A SLIP
	  beállítása egy
	  betárcsázós szerveren mindezen fogalmak
	  ismeretét igényli, és ha ezekkel
	  még nem lennénk tisztában, akkor olvassuk
	  el például Craig Hunt <span class="emphasis"><em>TCP/IP Network
	  Administration</em></span> címû könyvét
	  (O'Reilly &amp; Associates, Inc.; ISBN: 0-937175-82-X) vagy
	  Douglas Comer TCP/IP protokollról szóló
	  könyveit.</p><a id="idp95919056" class="indexterm"></a><p>Mindezek mellett még feltételezzük,
	  hogy már beállítottuk a modem(ek)et
	  és a rajtuk keresztüli bejelentkezéshez
	  szükséges állományokat.  Ha
	  még nem készítettük volna fel erre a
	  rendszerünket, akkor a <a class="xref" href="dialup.html" title="26.4. Betárcsázós szolgáltatások">26.4. szakasz - Betárcsázós
      szolgáltatások</a> ad
	  részletes tájékoztatást a
	  betárcsázós szolgáltatások
	  beállításáról.  A soros
	  vonali eszközmeghajtóval kapcsolatban
	  továbbá érdemes átolvasni a
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> oldalt, valamint a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a>,
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a> és <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> oldalakat a
	  bejelentkezések modemen keresztüli
	  fogadásáról, illetve talán az
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a> oldalt a soros port paramétereinek
	  megfelelõ
	  beállításáról (mint
	  például a <code class="literal">clocal</code> a
	  közvetlenül csatlakozó soros felületek
	  esetében).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95929808"></a>27.7.2.2. Gyors áttekintés</h4></div></div></div><p>A FreeBSD SLIP szerverként általában a
	  következõ módon üzemel: a SLIP
	  felhasználó tárcsázza a FreeBSD-s
	  SLIP szerverünket, majd bejelentkezik egy specális
	  SLIP bejelentkezési azonosító
	  használatával, amely a
	  <code class="filename">/usr/sbin/sliplogin</code> shellt
	  használja.  A <code class="command">sliplogin</code> program az
	  <code class="filename">/etc/sliphome/slip.hosts</code>
	  állományban megkeresi a speciális
	  felhasználóhoz tartozó sort, és ha
	  talál egy ilyet, akkor csatlakoztatja a soros vonalat
	  egy rendelkezésre álló SLIP
	  felületre, amelyen aztán a SLIP felültet
	  beállításához lefuttatja az
	  <code class="filename">/etc/sliphome/slip.login</code> shell
	  szkriptet.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95932368"></a>27.7.2.2.1. Példa SLIP szerveren keresztüli
	    bejelentkezésre</h5></div></div></div><p>Például, ha a SLIP
	    felhasználó azonosítója
	    <code class="systemitem">Shelmerg</code>, akkor az
	    <code class="filename">/etc/master.passwd</code>
	    állományban a hozzá tartozó
	    bejegyzést nagyjából ilyen:</p><pre class="programlisting">Shelmerg:password:1964:89::0:0:Guy Helmer - SLIP:/usr/users/Shelmerg:/usr/sbin/sliplogin</pre><p>Amikor <code class="systemitem">Shelmerg</code> bejelentkezik, a
	    <code class="command">sliplogin</code> az
	    <code class="filename">/etc/sliphome/slip.hosts</code>
	    állományban keresni fog egy
	    felhasználó
	    azonosítójához illeszkedõ sort.
	    Például tegyük fel, hogy az
	    <code class="filename">/etc/sliphome/slip.hosts</code>
	    állományban szerepel egy ilyen sor:</p><pre class="programlisting">Shelmerg        dc-slip sl-helmer       0xfffffc00		  autocomp</pre><p>A <code class="command">sliplogin</code> ezt a sor fogja
	    megtalálni, majd a soros vonalat a
	    következõ elérhetõ SLIP
	    felülethez kapcsolja, amelyen ezután
	    végrehajtja az
	    <code class="filename">/etc/sliphome/slip.login</code> szkriptet a
	    következõ módon:</p><pre class="programlisting">/etc/sliphome/slip.login 0 19200 Shelmerg dc-slip sl-helmer 0xfffffc00 autocomp</pre><p>Ha minden jól megy, akkor az
	    <code class="filename">/etc/sliphome/slip.login</code> kiad egy
	    <code class="command">ifconfig</code> parancsot azon a SLIP
	    felületen, amelyre a <code class="command">sliplogin</code>
	    magát csatlakoztatta (amely a fenti
	    példában a 0.  SLIP felület volt,
	    és amelyet meg is adtunk
	    <code class="filename">slip.login</code> elsõ
	    paramétereként), és így
	    beállítja a helyi IP-címet
	    (<code class="systemitem">dc-slip</code>), a távoli IP-címet
	    (<code class="systemitem">sl-helmer</code>), a SLIP felülethez
	    tartozó hálózati maszkot (<code class="systemitem">0xfffffc00</code>) valamint a
	    további opciókat
	    (<code class="literal">autocomp</code>).  Ha valami rosszul sülne
	    el, akkor a <code class="command">sliplogin</code> ezekrõl
	    általában nagyon jó
	    minõségû,
	    információdús üzeneteket
	    készít, amelyeket a
	    <span class="application">syslogd</span> démon pedig a
	    <code class="filename">/var/log/messages</code>
	    állományba rögzít.  (A
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> és <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">syslog.conf</span>(5)</span></a> man oldalak
	    és talán maga az
	    <code class="filename">/etc/syslog.conf</code> segíthet
	    kideríteni, hogy a <span class="application">syslogd</span>
	    jelenleg naplóz-e, és ha igen, akkor
	    hova.)</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95962960"></a>27.7.2.3. A rendszermag beállítása</h4></div></div></div><a id="idp95963600" class="indexterm"></a><a id="idp95964752" class="indexterm"></a><p>A FreeBSD alap (vagyis a <code class="filename">GENERIC</code>)
	  rendszermagja támogatja a SLIP (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sl</span>(4)</span></a>)
	  használatát.  Ha viszont saját
	  rendszermagunk van, akkor elõfordulhat, hogy
	  beállítások közé fel kell
	  vennünk a következõ sort is:</p><pre class="programlisting">device   sl</pre><p>Alapértelmezés szerint a FreeBSD nem
	  továbbít semmilyen csomagot.  Amennyiben a FreeBSD
	  SLIP szerverünket
	  útválasztóként is
	  mûködtetni akarjuk, úgy az
	  <code class="filename">/etc/rc.conf</code> állományban a
	  <code class="literal">gateway_enable</code> változót
	  át kell állítanunk a <code class="option">YES</code>
	  értékre.  Ennek hatására az
	  újraindítás után is megmarad a
	  csomagok továbbítása.</p><p>A változtatások azonnali
	  életbeléptetéséhez adjuk ki
	  <code class="systemitem">root</code> felhasználóként
	  a következõ parancsot:</p><pre class="screen"><code class="prompt">#</code> /etc/rc.d/routing start</pre><p>Ha a FreeBSD rendszermag beállítása
	  során segítségre szorulnánk, akkor
	  olvassuk el <a class="xref" href="kernelconfig.html" title="8. fejezet - A FreeBSD rendszermag testreszabása">8. fejezet - <em>A FreeBSD rendszermag testreszabása</em></a>et.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95979472"></a>27.7.2.4. A sliplogin beállítása</h4></div></div></div><p>Ahogy arra már korábban is utaltunk, az
	  <code class="filename">/etc/sliphome</code>
	  könyvtárban három állomány
	  felelõs a <code class="filename">/usr/sbin/sliplogin</code>
	  beállításáért (lásd
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sliplogin&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sliplogin</span>(8)</span></a>): a <code class="filename">slip.hosts</code>,
	  amelyekben a SLIP felhasználókat és a
	  hozzájuk tartozó IP-címeket adjuk meg; a
	  <code class="filename">slip.login</code>, amely általában
	  csak a SLIP felületet állítja be; (az
	  elhagyható) <code class="filename">slip.logout</code>, amely a
	  soros vonal bontásakor a
	  <code class="filename">slip.login</code> hatását
	  igyekszik visszafordítani.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95983568"></a>27.7.2.4.1. A <code class="filename">slip.hosts</code>
	    beállítása</h5></div></div></div><p>Az <code class="filename">/etc/sliphome/slip.hosts</code>
	    soraiban whitespace karakterekkel tagoltan legalább
	    négy elem szerepel:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>a SLIP felhasználó
		bejelentkezési azonosítója</p></li><li class="listitem"><p>a SLIP kapcsolat helyi címe (a SLIP
		szerveréhez képest)</p></li><li class="listitem"><p>a SLIP kapcsolat távoli címe</p></li><li class="listitem"><p>hálózati maszk</p></li></ul></div><p>A helyi és távoli címek lehetnek
	    hálózati nevek is (amelyeket vagy az
	    <code class="filename">/etc/hosts</code>, vagy pedig az
	    <code class="filename">/etc/nsswitch.conf</code>
	    állományban szereplõ
	    beállítások alapján tudunk
	    feloldani IP-címre), illetve a hálózati
	    maszk is lehet egy olyan név, amelyet az
	    <code class="filename">/etc/networks</code> fel tud oldani.  A
	    példaként bemutatott rendszerünkben az
	    <code class="filename">/etc/sliphome/slip.hosts</code>
	    állomány nagyjából így
	    épül fel:</p><pre class="programlisting">#
# login helyi-cím       távoli-cím      maszk            opc1    opc2
#                                               (normal,compress,noicmp)
#
Shelmerg  dc-slip       sl-helmerg      0xfffffc00      autocomp</pre><p>A sorok végén az alábbi
	    opciók közül egy vagy több
	    szerepelhet:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="option">normal</code> - a fejléceket
		nem tömörítjük</p></li><li class="listitem"><p><code class="option">compress</code> - a fejlécek
		tömörítése</p></li><li class="listitem"><p><code class="option">autocomp</code> - ha a távoli
		végpont engedi, akkor
		tömörítsük a
		fejléceket</p></li><li class="listitem"><p><code class="option">noicmp</code> - az ICMP csomagok
		tiltása (így például a
		<span class="quote">"<span class="quote">ping</span>"</span> által generált
		csomagok is eldobódnak a
		sávszélesség felemésztese
		helyett)</p></li></ul></div><a id="idp95996752" class="indexterm"></a><a id="idp95997264" class="indexterm"></a><p>A SLIP kapcsolathoz tartozó helyi és
	    távoli címek megválasztása
	    függ attól, hogy egy külön TCP/IP
	    alhálózatot szentelünk-e neki, vagy a
	    SLIP szerverünkön egy <span class="quote">"<span class="quote">ARP proxy</span>"</span>-t
	    használunk (amely tulajdonképpen nem egy
	    <span class="quote">"<span class="quote">valódi</span>"</span> ARP proxy, de ebben a
	    szakaszban így fogunk rá hivatkozni).  Ha nem
	    vagyunk biztosak benne, hogy melyik módszert
	    válasszuk vagy hogy miként osszuk ki az
	    IP-címeket, akkor nézzünk utána
	    ezekenek a SLIP használatával kapcsolatos
	    elõfeltételek között
	    megemlített könyvekben (<a class="xref" href="slip.html#slips-prereqs" title="27.7.2.1. Elõfeltételek">27.7.2.1. szakasz - Elõfeltételek</a>) és/vagy
	    konzultáljunk a hálózatunk
	    karbantartójával.</p><p>Ha a SLIP klienseknek külön
	    alhálózatokat osztunk ki, akkor a saját
	    IP-címünkbõl kell létrehoznunk
	    és kiadnunk ezeket.  Ezután
	    valószínûleg a SLIP
	    szerverünkön keresztül még meg kell
	    adnunk egy statikus útvonalat legközelebbi IP
	    útválasztó felé.</p><a id="idp95999824" class="indexterm"></a><p>Minden más esetben az <span class="quote">"<span class="quote">ARP proxy</span>"</span>
	    módszert kell alkalmaznunk, ahol a SLIP kliensek
	    IP-címeit a SLIP szerver Ethernet
	    alhálózatából osztjuk ki,
	    és ennek megfelelõen az
	    <code class="filename">/etc/sliphome/slip.login</code> és
	    <code class="filename">/etc/sliphome/slip.logout</code> szkripteket
	    módosítanunk kell úgy, hogy az
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=arp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">arp</span>(8)</span></a> segítségével képesek
	    legyenek a SLIP szerver ARP
	    táblázatában kezelni a <span class="quote">"<span class="quote">proxy
	    ARP</span>"</span> bejegyzéseket.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96007504"></a>27.7.2.4.2. A <code class="filename">slip.login</code>
	    beállítása</h5></div></div></div><p>Egy átlagos
	    <code class="filename">/etc/sliphome/slip.login</code>
	    állomány körülbelül
	    ilyen:</p><pre class="programlisting">#!/bin/sh -
#
#       @(#)slip.login  5.1 (Berkeley) 7/1/90

#
# Egy általános slip vonali bejelentkezési állomány. A sliplogin ezt az alábbi
# paraméterekkel hívja meg:
#      1        2         3        4          5         6     7-n
#   slipegys. ttyseb.  azonosító helyi-cím távoli-cím maszk egyéb-pmek.
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6</pre><p>Ez a <code class="filename">slip.login</code>
	    állomány az <code class="command">ifconfig</code>
	    segítségével pusztán
	    beállítja a megfelelõ SLIP
	    felülethez tartozó helyi, valamint távoli
	    címet és a hálózati
	    maszkot.</p><p>Ha ehelyett azonban az <span class="quote">"<span class="quote">ARP proxy</span>"</span>
	    módszerét választottuk volna
	    (tehát a SLIP kliensekenek nem akarunk egész
	    alhálózatokat kiutalni), akkor az
	    <code class="filename">/etc/sliphome/slip.login</code>
	    állomány eképpen alakul:</p><pre class="programlisting">#!/bin/sh -
#
#       @(#)slip.login  5.1 (Berkeley) 7/1/90

#
# Egy általános slip vonali bejelentkezési állomány. A sliplogin ezt az alábbi
# paraméterekkel hívja meg:
#      1        2         3        4          5         6     7-n
#   slipegys. ttyseb.  azonosító helyi-cím távoli-cím maszk egyéb-pmek.
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6
# A SLIP kliensre vonatkozó ARP kéréseket a mi Ethernet címünkkel
# válaszoljuk meg:
/usr/sbin/arp -s $5 00:11:22:33:44:55 pub</pre><p>Láthatjuk, hogy az elõbbi
	    <code class="filename">slip.login</code> állomány egy
	    <code class="command">arp -s $5 00:11:22:33:44:55 pub</code>
	    paranccsal egészült ki, ami a SLIP szerver ARP
	    táblázatában hoz létre egy ARP
	    bejegyzést.  Ez az ARP bejegyzés gondoskodik
	    róla, hogy a SLIP szerver válaszoljon a
	    saját Ethernetes MAC-címével, amikor
	    egy másik IP csomópont a SLIP kliens
	    IP-címe felõl érdeklõdik.</p><a id="idp96013520" class="indexterm"></a><p>Amikor a fenti példából indulunk
	    ki, a benne megadott MAC-címet (<code class="systemitem">00:11:22:33:44:55</code>)
	    feltétlenül cseréljük a
	    rendszerünk Ethernet kártyájának
	    MAC-címével, mert különben az
	    <span class="quote">"<span class="quote">ARP proxy</span>"</span> egyáltalán nem fog
	    mûködni!  A SLIP szerverünk
	    MAC-címét a <code class="command">netstat -i</code>
	    paranccsal deríthetjük ki, amelynek a
	    kimenetében a második sor valahogy így
	    néz ki:</p><pre class="screen">ed0   1500  &lt;Link&gt;0.2.c1.28.5f.4a         191923	0   129457     0   116</pre><p>Ebbõl derül ki, hogy az adott rendszer
	    valódi MAC-címe a <code class="systemitem">00:02:c1:28:5f:4a</code> - az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=arp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">arp</span>(8)</span></a>
	    számára azonban a <code class="command">netstat
	    -i</code> kimenetében szereplõ pontokat
	    kettõspontokra kell cserélni, és a
	    tagokat ki kell egészíteni
	    kétkarakteres hexadecimális
	    számokká.  Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=arp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">arp</span>(8)</span></a> man oldalán
	    tudhatunk meg ennek részleteirõl
	    többet.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Amikor létrehozzuk az
	      <code class="filename">/etc/sliphome/slip.login</code> és
	      <code class="filename">/etc/sliphome/slip.logout</code>
	      állományokat, akkor ne felejtsük el
	      hozzájuk beállítani a
	      <span class="quote">"<span class="quote">végrehajtást</span>"</span>
	      engedélyezõ bitet sem (tehát ilyenkor
	      mindig adjuk ki a <code class="command">chmod 755
	      /etc/sliphome/slip.login
	      /etc/sliphome/slip.logout</code> parancsokat is),
	      különben a <code class="command">sliplogin</code> ezeket
	      nem tudja majd elindítani.</p></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96026576"></a>27.7.2.4.3. A <code class="filename">slip.logout</code>
	    beállítása</h5></div></div></div><p>Az <code class="filename">/etc/sliphome/slip.logout</code>
	    állományra nincs feltétlenül
	    szükségünk (hacsak nem egy <span class="quote">"<span class="quote">ARP
	    proxy</span>"</span>-t akarunk csinálni), de ha
	    valamiért mégis el akarjuk
	    készíteni, akkor ehhez a következõ
	    alapvetõ <code class="filename">slip.logout</code> szkript
	    használható:</p><pre class="programlisting">#!/bin/sh -
#
#       slip.logout

#
# Egy logout állomány a slip vonalhoz. A sliplogin ezt a szkriptet a
# következõ paraméterekkel hívja:
#      1        2         3        4          5         6     7-n
#   slipegys. ttyseb.   login helyi-cím  távoli-cím   maszk opc-pmek.
#
/sbin/ifconfig sl$1 down</pre><p>Ha az <span class="quote">"<span class="quote">ARP proxy</span>"</span> módszert
	    használjuk, és az
	    <code class="filename">/etc/sliphome/slip.logout</code>
	    felhasználásával akarjuk a SLIP
	    klienshez tartozó ARP bejegyzést
	    törölni, akkor ebbõl induljunk ki:</p><pre class="programlisting">#!/bin/sh -
#
#       @(#)slip.logout

#
# Egy logout állomány a slip vonalhoz. A sliplogin ezt a szkriptet a
# következõ paraméterekkel hívja:
#      1        2         3        4          5         6     7-n
#   slipegys. ttyseb.   login helyi-cím  távoli-cím   maszk opc-pmek.
#
sbin/ifconfig sl$1 down
# Ne válaszoljunk többet a SLIP kliensre vonatkozó ARP kérésekre
/usr/sbin/arp -d $5</pre><p>Az <code class="command">arp -d $5</code> parancs
	    eltávolítja az <span class="quote">"<span class="quote">ARP proxy</span>"</span>
	    mûködéséhez bejegyzést,
	    amelyet még a <code class="filename">slip.login</code>
	    szkripttel vettünk fel a SLIP kliens
	    bejelentkezésekor.</p><p>Talán felesleges ismételgetésnek
	    tûnhet: az
	    <code class="filename">/etc/sliphome/slip.logout</code>
	    állománynak létrehozása
	    után állítsuk be a
	    végrehajtásra szóló bitet
	    (vagyis adjuk ki a <code class="command">chmod 755
	    /etc/sliphome/slip.logout</code> parancsot).</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96042448"></a>27.7.2.5. Az útválasztással kapcsolatos
	  megfontolások</h4></div></div></div><a id="idp96043088" class="indexterm"></a><p>Ha a hálózatunk többi része
	  (lényegében az internet) és a SLIP
	  klienseink között nem az <span class="quote">"<span class="quote">ARP proxy</span>"</span>
	  módszerrel közvetítjük a csomagokat,
	  akkor a legközelebbi alapértelmezett
	  átjárókhoz minden bizonnyal fel kell
	  vennünk statikus útvonalakat, így a SLIP
	  kliensek alhálózatai a SLIP
	  szerverünkön keresztül ki tudnak jutni.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96049232"></a>27.7.2.5.1. Statikus útvonalak</h5></div></div></div><a id="idp96049872" class="indexterm"></a><p>A legközelebbi alapértelmezett
	    átjárók felé nem minden esetben
	    könnyû felvenni statikus útvonalakat (vagy
	    egyes esetekben pedig egyenesen lehetetlen, mivel nincsenek
	    meg hozzá a jogaink).  Ha az
	    intézményünkön belül több
	    átjáró is megtalálható,
	    akkor bizonyos útválasztók,
	    például a Cisco és Proteon
	    gyártmányúak esetében nem csak a
	    SLIP alhálózatok felé kell
	    beállítanunk statikus útvonalakat,
	    hanem azt is meg kell mondanunk, hogy ezekrõl milyen
	    más útválasztók is tudjanak.
	    Pontosan emiatt a statikus útválasztás
	    beüzemeléséhez
	    szükségünk lesz egy kis
	    utánajárásra és
	    próbálgatásra.</p></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pppoa.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="ppp-and-slip.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="mail.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">27.6. <span class="application">PPP</span> ATM felett (PPPoA) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 28. fejezet - Elektronikus levelezés</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>