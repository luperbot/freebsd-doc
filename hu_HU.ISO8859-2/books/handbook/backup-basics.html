<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>18.12. Alapvetõ tudnivalók a biztonsági mentésrõl</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="disks.html" title="18. fejezet - Háttértárak" /><link rel="prev" href="backup-strategies.html" title="18.11. Mentési stratégiák" /><link rel="next" href="disks-virtual.html" title="18.13. Hálózat, memória és állomány alapú állományrendszerek" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">18.12. Alapvetõ tudnivalók a biztonsági
      mentésrõl</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="backup-strategies.html">Vissza</a> </td><th width="60%" align="center">18. fejezet - Háttértárak</th><td width="20%" align="right"> <a accesskey="n" href="disks-virtual.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="backup-basics"></a>18.12. Alapvetõ tudnivalók a biztonsági
      mentésrõl</h2></div></div></div><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> és <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> a
      három legfontosabb biztonsági mentésekkel
      kapcsolatos program.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90705104"></a>18.12.1. Mentés és
	helyreállítás</h3></div></div></div><a id="idp90705744" class="indexterm"></a><a id="idp90706896" class="indexterm"></a><a id="idp90707536" class="indexterm"></a><p>A <span class="trademark">UNIX</span>(R) típusú rendszerekben a
	biztonsági mentést hagyományosan a
	<code class="command">dump</code> és <code class="command">restore</code>
	programok végzik.  A meghajtókat lemezblokkok
	összeségeként kezelik, az
	állományrendszerek által létrehozott
	állományok, linkek és
	könyvtárak szintje alatt.  Eltérõen
	más, biztonsági mentést végzõ
	szoftverektõl, a <code class="command">dump</code> az adott
	eszközön egy egész
	állományrendszert képes lementeni.  Nem
	képes csak az állományrendszer vagy egy
	több állományrendszerre kiterjedõ
	könyvtárszerkezet egy részét
	lementeni.  A <code class="command">dump</code> nem
	állományokat és könyvtárakat
	ír a szalagra, hanem nyers adatblokkokat, amelyek
	állományokat és könyvtárakat
	formáznak.  A <code class="command">restore</code> parancs az
	adatokat alapértelmezés szerint a <code class="filename">/tmp</code> könyvtárba
	tömöríti ki.  Ha nem lenne elegendõ
	helyünk a <code class="filename">/tmp</code>
	könyvtárban, akkor a <code class="envar">TMPDIR</code>
	környezeti változó
	átállításával ehelyett
	megadhatunk egy olyat, ahol már kellõ
	mennyiségû terület áll
	rendelkezésre a <code class="command">restore</code>
	akadálytalan lefutásához.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ha a <code class="command">dump</code> parancsot a
	  gyökér könyvtárban adjuk ki, akkor nem
	  fogja lementeni a <code class="filename">/home</code> vagy
	  <code class="filename">/usr</code> vagy bármilyen más
	  könyvtárat, mivel ezek jellemzõ módon
	  más állományrendszerek
	  csatlakozási pontja vagy más
	  állományrendszerekre mutató szimbolikus
	  linkek.</p></div><p>A <code class="command">dump</code> parancsnak vannak olyan
	rigolyái, amelyek még az AT&amp;T UNIX 6.
	verziójából (1975
	környékérõl) maradtak vissza.  Az
	alapértelmezett paraméterezése 9
	sávos szalagokat feltételezi (6250 bpi), nem pedig
	a napjainkban elterjedt nagy
	írássûrûsségû
	(egészen 62 182 ftpi-s) adathordozókat.  Ezek
	az alapértelmezések természetesen
	paranccsorból felülbírálhatóak,
	és így a manapság alkalmazott szalagos
	meghajtók teljes kapacitása is
	kihasználható vele.</p><a id="idp90719440" class="indexterm"></a><p>Emellett az <code class="command">rdump</code> és
	<code class="command">rrestore</code> programok
	segítségével hálózaton
	keresztül is le tudjuk menteni az adatainkat egy
	másik számítógépre
	csatlakoztatott szalagos egységre.  Mind a két
	program az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcmd&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">rcmd</span>(3)</span></a> és a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ruserok&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">ruserok</span>(3)</span></a> parancsokat
	használja a távoli szalagos meghajtó
	eléréséhez.  Az <code class="command">rdump</code>
	és <code class="command">rrestore</code> paramétereinek a
	távoli számítógép
	használatához kell illeszkedniük.  Amikor egy
	FreeBSD rendszerû számítógépet az
	<code class="command">rdump</code> paranccsal egy Sun rendszerû,
	<code class="systemitem">komodo</code> nevû
	számítógépre mentünk, amelyhez
	egy Exabyte szalagos meghajtó csatlakozik, akkor ezt a
	írjuk be:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/rdump 0dsbfu 54000 13000 126 komodo:/dev/nsa8 /dev/da0a 2&gt;&amp;1</code></strong></pre><p>Figyelem: az <code class="filename">.rhosts</code>
	állományon keresztül
	hitelesítésnek megvannak a maga biztonsági
	kockázatai.  Ne felejtsük el felmérni ezt a
	saját környezetünkben sem.</p><p>A <code class="command">dump</code> és
	<code class="command">restore</code> parancsokat az <code class="command">ssh</code>
	használatával még
	biztonságosabbá tehetjük.</p><div class="example"><a id="idp90727632"></a><div class="example-title">18.1. példa - A <code class="command">dump</code> használata az
	  <span class="application">ssh</span> alkalmazással</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/dump -0uan -f - /usr | gzip -2 | ssh -c blowfish \
          célfelhasználó@cél.gép.hu dd of=/nagyállományok/dump-usr-l0.gz</code></strong></pre></div></div><br class="example-break" /><p>Vagy az <code class="envar">RSH</code> környezeti
	változó megfelelõ
	beállításával használhatjuk a
	<code class="command">dump</code> beépített
	módszerét:</p><div class="example"><a id="idp90735440"></a><div class="example-title">18.2. példa - A <code class="command">dump</code> használata az
	  <span class="application">ssh</span> alkalmazással, az
	  <code class="envar">RSH</code> környezeti változó
	  beállításával</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>RSH=/usr/bin/ssh /sbin/dump -0uan -f célfelhasználó@cél.gép.hu:/dev/sa0 /usr</code></strong></pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90738384"></a>18.12.2. <code class="command">tar</code></h3></div></div></div><a id="idp90739152" class="indexterm"></a><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> is az AT&amp;T UNIX 6.
	verziójáig nyúlik vissza (tehát
	nagyjából 1975-ig).  A <code class="command">tar</code> az
	állományrendszerrel szoros
	együttmûködésben dolgozik,
	állományokat és könyvtárakat
	ír a szalagra.  A <code class="command">tar</code> ugyan nem ismeri
	a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> által felkínált összes
	lehetõséget, de nincs is szüksége olyan
	szokatlan paranccsoros összekapcsolásokra, mint a
	<code class="command">cpio</code> parancsnak.</p><a id="idp90743632" class="indexterm"></a><p>A FreeBSD 5.3 vagy késõbbi
	változataiban a GNU <code class="command">tar</code> és az
	alapértelmezés szerinti <code class="command">bsdtar</code>
	egyaránt elérhetõ.  A GNU változat a
	<code class="command">gtar</code> paranccsal hívható meg.
	Az <code class="command">rdump</code> parancshoz hasonló
	felírásban képes kezelni a távoli
	eszközöket.  Tehát így tudjuk
	használni a <code class="command">tar</code> parancsot a
	<code class="systemitem">komodo</code> nevû Sun
	számítógép Exabíte szalagos
	meghajtójának
	elérésére:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/bin/gtar cf komodo:/dev/nsa8 . 2&gt;&amp;1</code></strong></pre><p>Ugyanez eltérhetõ a <code class="command">bsdtar</code>
	használatával is, amikor az <code class="command">rsh</code>
	programmal összekapcsolva küldünk át a
	távoli szalagos egységre.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar cf - . | rsh hálózati-név dd of=szalagos-eszköz obs=20b</code></strong></pre><p>Ha a hálózaton keresztül mentés
	során fontos számunkra a biztonság, akkor
	az <code class="command">rsh</code> parancs helyett az
	<code class="command">ssh</code> parancsot használjuk.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90751312"></a>18.12.3. <code class="command">cpio</code></h3></div></div></div><a id="idp90752208" class="indexterm"></a><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> eredetileg a <span class="trademark">UNIX</span>(R) szalagos programjai
	és szalagos egységei között
	közvetített.  A <code class="command">cpio</code> parancs
	(többek közt) képes a byte-ok
	sorrendjének felcserélésére,
	több különbözõ archívum
	formátuma szerint írni és adatokat
	közvetíteni más programok felé.  Ez
	utóbbi lehetõsége miatt a
	<code class="command">cpio</code> kíválóan alkalmas a
	telepítõeszközök számára.  A
	<code class="command">cpio</code> nem képes bejárni a
	könyvtárszerkezetet, és az
	állományok listáját a
	szabványos bemeneten keresztül kell megadni
	neki.</p><a id="idp90756432" class="indexterm"></a><p>A <code class="command">cpio</code> nem támogatja a
	biztonsági mentés
	átküldését a hálózaton.
	Programok összekapcsolásával és az
	<code class="command">rsh</code> használatával tudunk
	adatokat küldeni távoli szalagos
	meghajtókra.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>for f in könyvtár_lista; do</code></strong>
<strong class="userinput"><code>find $f &gt;&gt; mentési.lista</code></strong>
<strong class="userinput"><code>done</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cpio -v -o --format=newc &lt; backup.list | ssh felhasználó@gép "cat &gt; mentõeszköz"</code></strong></pre><p>Ahol a <em class="replaceable"><code>könyvtár_lista</code></em>
	a menteni kívánt könyvtárak
	listája, a
	<em class="replaceable"><code>felhasználó</code></em>@<em class="replaceable"><code>gép</code></em>
	a mentést végzõ gép
	felhasználójának és
	hálózati nevének együttese, valamint a
	<em class="replaceable"><code>mentõeszköz</code></em>, ahova a
	mentés kerül (például
	<code class="filename">/dev/nsa0</code>).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90771408"></a>18.12.4. <code class="command">pax</code></h3></div></div></div><a id="idp90772176" class="indexterm"></a><a id="idp90773456" class="indexterm"></a><a id="idp90774096" class="indexterm"></a><a id="idp90774608" class="indexterm"></a><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pax&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pax</span>(1)</span></a> az IEEE/<span class="trademark">POSIX</span>(R) válasza a
	<code class="command">tar</code> és <code class="command">cpio</code>
	programokra.  Az évek során a
	<code class="command">tar</code> és a <code class="command">cpio</code>
	különbözõ változatai egy kissé
	inkompatibilissé váltak.  Ezért a
	szabványosításuk kiharcolása helyett
	inkább a <span class="trademark">POSIX</span>(R) létrehozott egy új
	archiváló segédprogramot.  A
	<code class="command">pax</code> megpróbálja írni
	és olvasni a <code class="command">cpio</code> és
	<code class="command">tar</code> formátumok legtöbb
	változatát, valamint emellett további
	saját formátumokat is kezel.  A
	parancskészlete inkább a <code class="command">cpio</code>
	parancséra emlékeztet, mintsem a
	<code class="command">tar</code> parancséra.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-programs-amanda"></a>18.12.5. <span class="application">Amanda</span></h3></div></div></div><a id="idp90782032" class="indexterm"></a><a id="idp90783312" class="indexterm"></a><p>Az <span class="application">Amanda</span> (Advanced Maryland
	Network Disk Archiver) egy kliens-szerver alapú
	mentési rendszer, nem pedig egy önálló
	program.  Az <span class="application">Amanda</span> szerver menti
	tetszõleges számú
	számítógép adatát egyetlen
	szalagra, melyek az <span class="application">Amanda</span> klienst
	futtatják és hálózaton
	keresztül hozzá csatlakoznak.  A nagy
	mennyiségû és nagy kapacitású
	lemezekkel rendelkezõ rendszerekben közvetlenül a
	mentéshez szükséges idõ nem áll
	rendelkezésre a feladat
	elvégzéséhez.  Az
	<span class="application">Amanda</span> viszont képes megoldani
	ezt a problémát.  Az
	<span class="application">Amanda</span> képes egy
	<span class="quote">"<span class="quote">saját lemez</span>"</span> használatával
	egyszerre több állományrendszerrõl is
	biztonsági mentést készíteni.  Az
	<span class="application">Amanda</span>
	<span class="quote">"<span class="quote">archívumkészleteket</span>"</span> hoz
	létre: az <span class="application">Amanda</span>
	konfigurációs állományában
	megadott állományrendszerekrõl
	készít teljes mentést egy adott idõ
	alatt egy adott mennyiségû szalagra.  Az
	<span class="quote">"<span class="quote">archívumkészlet</span>"</span>
	ezenkívül még tartalmaz egy napi
	inkrementális (vagy különbözeti)
	mentést is minden egyes
	állományrendszerrõl.  A sérült
	állományrendszerek
	visszaállításához mindig a
	legújabb teljes biztonsági mentésre
	és a hozzá tartozó inkrementális
	mentésekre van szükségünk.</p><p>A konfigurációs állomány
	segítségével precíz
	irányítást gyakorolhatunk a
	létrehozott mentések és az
	<span class="application">Amanda</span> által keltett
	hálózati forgalom felett.  Az
	<span class="application">Amanda</span> a fentiek közül
	bármelyik programmal képes az adatokat szalagra
	rögzíteni.  Az <span class="application">Amanda</span>
	portként vagy csomagként is elérhetõ,
	alapértelmezés szerint nem települ.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90789968"></a>18.12.6. Ne csináljunk semmit</h3></div></div></div><p>A <span class="quote">"<span class="quote">Ne csináljunk semmit</span>"</span> nem egy
	újabb számítógépes program,
	hanem egy igen gyakran alkalmazott mentési
	stratégia.  Nem kell beruházni.  Nem kell
	semmilyen biztonsági mentési rendet követni.
	Egyszerûen semmit se csinálunk.  Ha
	véletlenül valami történne az
	adatainkkal, akkor csak mosolyogjunk és
	törõdjünk bele!</p><p>Amennyiben az idõnk és adataink keveset vagy
	éppen semmit se érnek, akkor a <span class="quote">"<span class="quote">Ne
	csináljunk semmit</span>"</span> az elérhetõ legjobb
	biztonsági mentési megoldás
	számítógépünk
	számára.  De legyünk óvatosak, mert a
	<span class="trademark">UNIX</span>(R) egy igen hasznos eszköz, és fél
	éven belül könnyen úgy
	találhatjuk magunkat, hogy mégis csak vannak
	értékes adataink.</p><p>A <span class="quote">"<span class="quote">Ne csináljunk semmit</span>"</span>
	tökéletesen megfelelõ mentési
	módszer a <code class="filename">/usr/obj</code> és a
	hozzá hasonló módon a
	számítógépen automatikusan
	generált könyvtárak és
	állományok esetében.  Ugyanilyen
	példa lehetne a kézikönyv HTML vagy
	<span class="trademark">PostScript</span>(R) változata.  Ezek a formátumok ugyanis
	az SGML források alapján keletkeznek, így a
	HTML vagy <span class="trademark">PostScript</span>(R) állományok mentése
	nem életbevágó.  Az SGML
	állományokat viszont már annál
	inkább mentsük!</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90799184"></a>18.12.7. Melyik a legjobb?</h3></div></div></div><a id="idp90799824" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> <span class="emphasis"><em>Pont.</em></span> Elizabeth D.  Zwicky
	komolyan letesztelte az itt felsorolt összes programot.  A
	<span class="trademark">UNIX</span>(R) állományrendszerek
	jellegzetességeinek és rajtuk az összes
	adatunk megõrzésének egyértelmûen
	a <code class="command">dump</code> felel meg a legjobban.  Elizabeth a
	minden egyes program tesztjéhez olyan
	állományrendszereket hozott létre, amelyek
	rengeteg különféle szokatlan helyzetet
	tartalmaztak (valamint néhány nem annyira
	szokatlant).  Az érintett jellegzetességek: lyukas
	állományok, lyukas állományok
	és egy halom nulla, állományok
	érdekes karakterekkel a nevükben, olvashatatlan
	és írhatatlan állományok,
	eszközök, a mentés közben
	méretüket változtató
	állományok, a mentés közben
	keletkezõ és megszûnõ
	állományok és még sok minden
	más.  Az eredményeit a LISA V-ben jelentette meg
	1991 októberében.  Lásd <a class="link" href="http://www.coredumps.de/doc/dump/zwicky/testdump.doc.html" target="_top"> A
	biztonsági mentéshez és
	archiváláshoz használt programok tesztje
	(angolul)</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90803280"></a>18.12.8. Az adatok helyreállítása
	vészhelyzetben</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90803920"></a>18.12.8.1. A katasztrófa elõtt</h4></div></div></div><p>Csupán négy lépést kell
	  megtennünk az esetleges katasztrófák
	  bekövetkezésének esetére.</p><a id="idp90805072" class="indexterm"></a><p>Elõször is két példányban
	  nyomtassuk ki az egyes lemezek
	  lemezcímkéjét (például a
	  <code class="command">bsdlabel da0 | lpr</code> paranccsal) valamint az
	  állományrendszerek
	  táblázatát (az
	  <code class="filename">/etc/fstab</code> állományt)
	  és az összes rendszerindításkor
	  megjelenõ üzenetet.</p><a id="idp90806864" class="indexterm"></a><p>A második lépésben
	  készítenünk kell egy
	  <span class="quote">"<span class="quote">élõ</span>"</span> rendszerrel rendelkezõ
	  CD-lemezt.  Ezen a lemezen megtalálható minden,
	  ami el tudunk indítani egy
	  helyreállításhoz elegendõ rendszert.
	  Ekkor a felhasználó futtatni tudja
	  például a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">restore</span>(8)</span></a>,
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
	  és a többi segédprogramot.  Ez az image a
	  FreeBSD/i386 8.1-RELEASE kiadáshoz
	  az <code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/ISO-IMAGES/8.1/FreeBSD-8.1-RELEASE-i386-livefs.iso" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/ISO-IMAGES/8.1/FreeBSD-8.1-RELEASE-i386-livefs.iso</a></code>
	  címrõl tölthetõ le.</p><p>A harmadik lépésben igyekezzünk
	  minél gyakrabban szalagra menteni.  Mindig gondoljuk
	  arra, hogy a legutolsó mentés óta
	  létrehozott változatásaink teljesen el
	  fognak veszni.  A mentéseket tartalmazó
	  szalagokat tegyük
	  írásvédetté.</p><p>A negyedik lépésben ellenõrizzük a
	  a második lépésben
	  készített helyreállító
	  lemezünket és a biztonsági
	  mentéseket tartalmazó szalagokat.
	  Jegyezzük le az eljárást.  Ezeket a
	  jegyzeteket is rakjuk el rendszerindító
	  lemezzel, a kinyomtatott adatokkal és a
	  mentéseket tartalmazó szalagokkal együtt.
	  Ezek a jegyzetek megvédenek minket attól, hogy a
	  helyreállítás közbeni
	  kétségbeesésünkben nehogy
	  véletlenül tönkretegyük a
	  biztonsági mentéseinket.  (Hogy miként
	  is?  Például ha a <code class="command">tar xvf
	    /dev/sa0</code> parancs helyett izgalmunkban a
	  <code class="command">tar cvf /dev/sa0</code> parancsot
	  gépeljük be, akkor azzal felülírjuk a
	  biztonsági mentéseinket).</p><p>A fokozott biztonság kedvéért minden
	  alkalommal készítsünk
	  rendszerindító lemezt és
	  legalább két mentést.  Az egyiket
	  valamilyen távoli helyen tároljuk.  Ez a
	  távoli hely NE ugyanannak az épületnek az
	  alagsora legyen!  Számos cég alaposan megtanulta
	  ezt a szabályt a Világkereskedelmi központ
	  tragédiája kapcsán.  Ez a távoli
	  hely számítógépeinkbõl
	  és merevlemezes meghajtóinkól is
	  fizikailag jól elkülöníthetõ,
	  jelentõs távolságban legyen.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp90819536"></a>18.12.8.2. A katasztrófa után</h4></div></div></div><p>Az alapvetõ kérdés: a hardver
	  túlélte?  Ha rendszeresen
	  készítettünk biztonsági
	  mentéseket, akkor a szoftverek miatt
	  egyáltalán nem kell aggódnunk.</p><p>Ha a hardver megsérült, akkor a
	  számítógép
	  használatának újból
	  megkezdése elõtt javasolt cserélni a
	  meghibásodott alkatrészeket.</p><p>Ha a hardverrel minden rendben találtunk, akkor
	  helyzezzük be a helyreállításhoz
	  használatos <span class="quote">"<span class="quote">élõ</span>"</span> rendszert
	  tartalmazó lemezt a CD-meghajtóba, és
	  indítsuk el vele a
	  számítógépet.  Ezután
	  nemsokára a telepítési menü jelenik
	  meg.  Itt a megfelelõ ország után a
	  <span class="guimenuitem">Fixit -- Repair mode with CDROM/DVD/floppy or
	    start a shell</span>
	  (<span class="quote">"<span class="quote">Helyreállítás CD/DVD/floppy
	  használatával, vagy parancssor
	  indítása</span>"</span>), majd a <span class="guimenuitem">CDROM/DVD
	    -- Use the live filesystem CDROM/DVD</span> (<span class="quote">"<span class="quote">A
	  CD/DVD-n található élõ rendszer
	  használata</span>"</span>) menüpontokat válasszuk.
	  A <code class="command">restore</code> és a többi
	  segédprogram a <code class="filename">/mnt2/rescue</code>
	  könyvtárban lesznek elérhetõek.</p><p>Egyenként állítsuk vissza az egyes
	  állományrendszereket.</p><a id="idp90824400" class="indexterm"></a><a id="idp90825040" class="indexterm"></a><a id="idp90833872" class="indexterm"></a><a id="idp90834512" class="indexterm"></a><p>A <code class="command">mount</code> paranccsal
	  próbáljuk meg csatlakoztatni az elsõ
	  lemezünk rendszerindító
	  partícióját (például
	  <code class="command">mount /dev/da0a /mt</code>).  Ha a
	  lemezcímke megsérült, akkor
	  <code class="command">bsdlabel</code> alkalmazásával
	  partícionáljuk újra a lemezt és
	  címkézzük meg a korábban
	  kinyomtatott címke adatainak megfelelõen.  A
	  <code class="command">newfs</code> segítségével
	  újra hozzuk létre az
	  állományrendszereket.
	  Írható-olvasható módban
	  csatlakoztassuk újra a lemez
	  rendszerinító partícióját
	  (<code class="command">mount -u -o rw /mnt</code>).  A biztonság
	  mentést végzõ program és a
	  biztonsági mentést tartalmazó szalagok
	  használatával állítsuk helyre az
	  állományrendszer tartalmát
	  (például <code class="command">restore vrf
	    /dev/sa0</code>).  Válasszuk le az
	  állományrendszert (például
	  <code class="command">umount /mnt</code>).  Mindegyik sérült
	  állományrendszerre ismételjük a
	  folyamatot.</p><p>Ahogy mûködõképessé
	  vált a rendszerünk, mentsük az adatainkat
	  új szalagokra.  Akármi is okozta a rendszer
	  összeomlását vagy az adatvesztést,
	  ismét lecsaphat.  Ha most áldozunk erre
	  még egy órát, akkor azzal a
	  késõbbiekben számos
	  kellemetlenségtõl óvhatjuk meg
	  magunkat.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="backup-strategies.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="disks-virtual.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">18.11. Mentési stratégiák </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 18.13. Hálózat, memória és
      állomány alapú
      állományrendszerek</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>