<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>13.7. A felhasználók korlátozása</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="users.html" title="13. fejezet - Felhasználók és hozzáférések alapvetõ kezelése" /><link rel="prev" href="users-modifying.html" title="13.6. A hozzáférések módosítása" /><link rel="next" href="users-groups.html" title="13.8. Csoportok" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">13.7. A felhasználók
      korlátozása</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="users-modifying.html">Vissza</a> </td><th width="60%" align="center">13. fejezet - Felhasználók és
    hozzáférések alapvetõ
    kezelése</th><td width="20%" align="right"> <a accesskey="n" href="users-groups.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-limiting"></a>13.7. A felhasználók
      korlátozása</h2></div></div></div><a id="idp86385360" class="indexterm"></a><a id="idp86385872" class="indexterm"></a><p>Ha már vannak felhasználóink, gyakran
      szóba kerülhet esetükben a rendszer
      használatának korlátozása.  A FreeBSD
      rengeteg módon engedi korlátozni a
      rendszergazdának az egyénenként
      használható erõforrások
      mennyiségét a rendszerben.  Ezek a korlátok
      két részre oszthatóak: a
      lemezkvótákra és egyéb
      erõforráskorlátokra.</p><a id="idp86387408" class="indexterm"></a><a id="idp86387920" class="indexterm"></a><a id="idp86389072" class="indexterm"></a><p>A lemezkvóták a felhasználók
      lemezhasználatát korlátozzák,
      és lehetõvé teszik, hogy állandó
      újraszámolás nélkül, gyorsan
      ellenõrizni tudjuk ennek mértékét.  A
      kvótákat a <a class="xref" href="quotas.html" title="18.15. Az állományrendszerek kvótái">18.15. szakasz - Az állományrendszerek
      kvótái</a>ban
      részletezzük.</p><p>A többi erõforrás korlátozása
      magában foglalja a processzoridõ, memória
      és minden olyan erõforrás
      behatárolását, amihez a
      felhasználó csak hozzá tud férni.
      Ezeket bejelentkezési osztályokon keresztül
      határozzuk meg, ezekrõl esik itt most
      szó.</p><a id="idp86390864" class="indexterm"></a><p>A bejelentkezési osztályokat az
      <code class="filename">/etc/login.conf</code> állományban
      adhatjuk meg.  Ennek pontos ismertetése nem tárgya
      ennek a szakasznak, de ezt megtalálhatjuk a
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> man oldalon.  Elegendõ csak annyit
      mondanunk, hogy minden felhasználóhoz tartozik egy
      bejelentkezési osztály (alapértelmezés
      szerint a <code class="literal">default</code> nevû), és minden
      egyes bejelentkezési osztályhoz tulajdonságok
      egy halmaza társul.  Ezek a bejelentkezési
      tulajdonságok
      <code class="literal">név=érték</code>
      párosokból állnak, ahol
      <em class="replaceable"><code>név</code></em> egy jól ismert
      azonosító, illetve az
      <em class="replaceable"><code>érték</code></em> egy
      tetszõleges sztring, melyet a nevétõl
      függõ módon dolgozunk fel.  A
      bejelentkezési osztályok és
      tulajdonságok beállítása
      eléggé magától
      értetõdõ, és a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> man
      oldal is jól leírja.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">A rendszer általában nem magát az
	<code class="filename">/etc/login.conf</code> állományban
	található beállításokat
	olvassa be, hanem az <code class="filename">/etc/login.conf.db</code>
	állományt, amiben gyorsabban lehet keresni.  Az
	<code class="filename">/etc/login.conf</code>
	állományból az
	<code class="filename">/etc/login.conf.db</code> állományt
	az alábbi paranccsal tudjuk legyártani:
      </p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cap_mkdb /etc/login.conf</code></strong></pre></div><p>Az erõforrások korlátozása
      két irányban is eltér a sima
      hétköznapi bejelentkezési
      tulajdonságoktól.  Elõször is minden
      korláthoz létezik egy gyenge (aktuális)
      és egy erõs korlát.  A gyenge korlátok a
      felhasználók vagy az alkalmazások
      részérõl még
      finomíthatóak, de az erõs korláton
      túl már nem.  Ez utóbbit mindig tudja
      csökkenteni a felhasználó, de sose tudja
      növelni.  Másodsorban a legtöbb
      erõforráskorlát az adott
      felhasználó által futtatott programokra
      egyenként vonatkozik, nem pedig az összesre
      együttesen.  Megjegyezzük azonban, hogy ezeket az
      eltéréseket a korlátok különleges
      kezelése indokolja, nem pedig a bejelentkezési
      tulajdonságok rendszerének
      megvalósítása (tehát a korlátok
      <span class="emphasis"><em>valójában nem</em></span> ezen
      tulajdonságok speciális esetei.)</p><p>Így aztán, minden további
      magyarázkodás nélkül, felsoroljunk alant
      a leggyakrabban alkalmazott erõforráskorlátokat
      (a többi, más egyéb bejelentkezési
      tulajdonságokkal együtt, megtalálható a
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> man oldalon).</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">coredumpsize</code></span></dt><dd><a id="idp86406096" class="indexterm"></a><a id="idp86406608" class="indexterm"></a><p>A program által létrehozott
	    memóriakivonat maximális méretét
	    határolja be ez a korlát,
	    értelemszerûen a többi lemezterületre
	    vonatkozó korlátnak (például a
	    <code class="literal">filesize</code> vagy a
	    lemezkvóták) alárendelt módon.
	    Mindazonáltal ezt gyakran használjuk egyfajta
	    enyhébb lemezfoglalási
	    korlátként.  Mivel nem maguk a
	    felhasználók hozzák létre ezeket
	    az állományokat és sokszor nem is
	    törlik le ezeket, ez a beállítás
	    azonban megmentheti ezeket a nagyobb programok (mint
	    például az <span class="application">emacs</span>)
	    összeomlása során keletkezõ
	    memóriakivonatok felesleges
	    helyfoglalásától.</p></dd><dt><span class="term"><code class="literal">cputime</code></span></dt><dd><a id="idp86410320" class="indexterm"></a><a id="idp86410832" class="indexterm"></a><p>Az a maximális processzoridõ, amit a
	    felhasználó által futtatott programok
	    egyenként fogyaszthatnak.  A vétkezõ
	    programok futását a rendszermag
	    leállítja.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ez a korlát a
		processzor<span class="emphasis"><em>idõ</em></span>re vonatkozik,
		nem pedig a processzor
		kihasználtságának
		százalékára, ahogy a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a>
		és a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> szokta megjeleníteni.  Ez
		utóbbi alapján korlátozni ugyanis,
		még ezen leírás
		készítésének pillanataiban
		nem lehetséges, és meglehetõsen
		hasztalan is lenne: egy fordítóprogram
		- ami minden bizonnyal egy szabályosan
		futó program - könnyen fel tudja
		emészteni majdnem az egész processzort egy
		idõre.</p></div></dd><dt><span class="term"><code class="literal">filesize</code></span></dt><dd><a id="idp86416336" class="indexterm"></a><a id="idp86416848" class="indexterm"></a><p>A felhasználó által
	    birtokolható állományok
	    maximális mérete.  Eltérõen a
	    <a class="link" href="quotas.html" title="18.15. Az állományrendszerek kvótái">lemezkvótáktól</a>,
	    ez a korlát az egyes állományokra
	    vonatkozik, nem pedig a felhasználó
	    összes állományára
	    együttesen.</p></dd><dt><span class="term"><code class="literal">maxproc</code></span></dt><dd><a id="idp86420304" class="indexterm"></a><a id="idp86420816" class="indexterm"></a><p>A felhasználó által egyidõben,
	    az elõtérben és a háttérben
	    futtatható programok maximális száma.
	    Érthetõ okokból ez az érték
	    nem lehet nagyobb, mint a rendszerben a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>
	    által definiált
	    <code class="varname">kern.maxproc</code> (a rendszermag által
	    maximálisan futtatható programok
	    számának) értéke.
	    Érdemes még továbbá megjegyezni,
	    hogy ez a beállítás gátolhatja a
	    felhasználó munkáját: gyakran
	    hasznos lehet egyszerre több példányban
	    is bejelentkezni a rendszerbe vagy csövekkel
	    összekapcsolt programokat futtatni.  Bizonyos
	    feladatok, mint például egy nagyobb program
	    lefordítása, több program
	    futására is szétterjedhetnek
	    (például a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cc</span>(1)</span></a> és
	    egyéb köztes feldolgozókra).</p></dd><dt><span class="term"><code class="literal">memorylocked</code></span></dt><dd><a id="idp86434640" class="indexterm"></a><a id="idp86435152" class="indexterm"></a><p>Ezzel korlátozhatjuk az egyes futó
	    programok által zárolható
	    memóriaterület méretét a
	    központi memóriában (lásd
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mlock&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">mlock</span>(2)</span></a>).  Egyes rendszerkritikus programok, mint
	    például az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a>, zárolják
	    magukat a központi memóriában, és
	    ezért soha nem lapozódnak ki onnan.  Ennek
	    köszönhetõen nem érinti ezeket a
	    rendszer lapozásból eredõ esetleges
	    lelassulása.</p></dd><dt><span class="term"><code class="literal">memoryuse</code></span></dt><dd><a id="idp86439632" class="indexterm"></a><a id="idp86440144" class="indexterm"></a><p>Ez az a maximális memóriamennyiség,
	    amelyet egy futó program egyszerre használhat.
	    Ebbe együttesen beleértendõ a központi
	    memóriában és a
	    lapozóállományban elfoglalt hely.  Ez
	    ugyan nem minden szempontból korlátozza egy
	    program memóriahasználatát, de
	    indulásnak megfelelõ.</p></dd><dt><span class="term"><code class="literal">openfiles</code></span></dt><dd><a id="idp86443088" class="indexterm"></a><a id="idp86443600" class="indexterm"></a><p>A felhasználó egyes futtatott programjai
	    által egy idõben megnyitható
	    állományok maximális száma.
	    FreeBSD-ben az állományok közé a
	    foglalatok és az IPC-csatornák is
	    beszámítanak.  Ezért vigyázzunk,
	    nehogy véletlenül túlságosan
	    alacsonyra állítsuk ezt az
	    értéket.  Ezt rendszerszinten a
	    <code class="varname">kern.maxfiles</code> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>
	    érték határozza meg.</p></dd><dt><span class="term"><code class="literal">sbsize</code></span></dt><dd><a id="idp86447568" class="indexterm"></a><a id="idp86448080" class="indexterm"></a><p>A korlátozás a felhasználó
	    által egyszerre maximálisan
	    elérhetõ hálózati memória
	    és így a rendszermag puffereire vonatkozik.
	    Eredetileg a régebbi, sok csatlakozást
	    felemésztõ DoS (Denial of Service)
	    támadások ellen nyújtana
	    védelmet, de általánosságban
	    alkalmazható a hálózati
	    kommunikáció
	    korlátozására is.</p></dd><dt><span class="term"><code class="literal">stacksize</code></span></dt><dd><a id="idp86455120" class="indexterm"></a><a id="idp86455632" class="indexterm"></a><p>Ez a felhasználó által
	    mûködtetett egyes programok vermeinek
	    maximális mérete.  Önmagában nem
	    elegendõ a programok által használt
	    memóriamennyiség
	    korlátozására, így emiatt
	    inkább a többi korláttal együtt
	    érdemes alkalmazni.</p></dd></dl></div><p>Van néhány tényezõ, amelyekre
      érdemes odafigyelni az erõforrások
      korlátainak beállítása során.
      Most következik pár tipp, javaslat és
      egyéb megjegyzés a témához.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A rendszerindítás során az
	  <code class="filename">/etc/rc</code> által indított
	  programok a <code class="literal">daemon</code> bejelentkezési
	  osztályba tartoznak.</p></li><li class="listitem"><p>Habár a rendszerrel érkezõ
	  <code class="filename">/etc/login.conf</code> állományban
	  remekül be van állítva a legtöbb
	  korlát, de nekünk, mint rendszergazdáknak,
	  kell ismernünk a saját rendszerünk
	  korlátait.  Ezen korlátok túlzott
	  tágításával a rendszerünk
	  könnyen leterhelhetõvé válik,
	  míg a túlzott
	  szûkítésével akadályozhatjuk
	  a hatékony használatát.</p></li><li class="listitem"><p>Az X Window System (X11) felhasználóinak a
	  többi felhasználónál
	  valószínûleg jóval több
	  erõforráshoz kell tudniuk
	  hozzáférni.  Az X11 már
	  önmagában sok erõforrást eszik, de
	  egyben bátorítja is a
	  felhasználókat több program
	  párhuzamos futtatására.</p></li><li class="listitem"><p>Ne felejtsük el, hogy sok korlát az egyes
	  különállóan futó programokra
	  vonatkozik, nem pedig a felhasználó összes
	  futtatott programjára.  Például ha
	  beállítjuk 50-re az <code class="varname">openfiles</code>
	  értékét, a felhasználó
	  által elindított programok mindegyike legfeljebb
	  50 állományt tud majd megnyitni.  Emiatt a
	  felhasználó által egyszerre
	  ténylegesen megnyitható állományok
	  száma az <code class="literal">openfiles</code> és a
	  <code class="literal">maxproc</code> aktuális
	  értékeinek szorzatából
	  adódik.  Ugyanez igaz a
	  memóriahasználatra is.</p></li></ul></div><p>Az erõforrások
      korlátozásáról, a
      bejelentkezési osztályokról és
      tulajdonságaikról a hozzájuk tartozó
      man oldalakon olvashatunk: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cap_mkdb&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cap_mkdb</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getrlimit&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">getrlimit</span>(2)</span></a>
      és <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="users-modifying.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="users.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="users-groups.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">13.6. A hozzáférések
      módosítása </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 13.8. Csoportok</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>