<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>18.3. Lemezek hozzáadása</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="disks.html" title="18. fejezet - Háttértárak" /><link rel="prev" href="disks-naming.html" title="18.2. Az eszközök elnevezései" /><link rel="next" href="raid.html" title="18.4. RAID" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">18.3. Lemezek hozzáadása</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="disks-naming.html">Vissza</a> </td><th width="60%" align="center">18. fejezet - Háttértárak</th><td width="20%" align="right"> <a accesskey="n" href="raid.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-adding"></a>18.3. Lemezek hozzáadása</h2></div><div><span class="authorgroup">Eredetileg írta: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">O'Brien</span>, <span class="firstname">David</span></span>. </span></div></div></div><a id="idp89715408" class="indexterm"></a><p>Ebben a szakaszban arról lesz szó, hogy a
      jelenleg egyetlen meghajtót tartalmazó
      rendszerünket hogyan tudjuk bõvíteni egy
      új SCSI-lemez hozzáadásával.  Ehhez
      elsõként kapcsoljuk ki a
      számítógépünket és
      szereljük be a helyére az új meghajtót a
      számítógép, a lemezvezérlõ
      és a meghajtó gyártójának
      utasításai alapján.  Mivel ezt a
      mûveletet rengeteg módon lehet elvégezni,
      ezért ennek pontos részleteivel ez a
      leírás most nem foglalkozik.</p><p>Jelentkezzünk be <code class="systemitem">root</code>
      felhasználóként.  Miután
      beszereltük a meghajtót, a
      <code class="filename">/var/run/dmesg.boot</code> állomány
      végignézésével bizonyosodjuk meg
      róla, hogy a rendszer valóban megtalálta a
      lemezt.  A példánk szerint ez a meghajtó
      tehát a <code class="filename">da1</code> nevet fogja viselni,
      amelyet a <code class="filename">/1</code> könyvtárba akarunk
      csatlakoztatni (ha IDE-meghajtót telepítünk,
      akkor a hozzá tartozó eszköz neve
      <code class="filename">ad1</code> lesz).</p><a id="idp89719376" class="indexterm"></a><a id="idp89719888" class="indexterm"></a><a id="idp89720400" class="indexterm"></a><p>Mivel a FreeBSD IBM PC kompatibilis
      számítógépeken fut, ezért nem
      szabad figyelmen kívül hagynunk a PC BIOS
      partícióit is.  Ezek eltérnek a
      hagyományos BSD partícióktól.  Egy
      PC-s lemeznek négy BIOS-os
      partícióbejegyzése lehet.  Ha egy lemezt
      tényleg csak a FreeBSD-nek szánunk, akkor
      használhatjuk az ún.
      <span class="emphasis"><em>dedikált</em></span> módot.  Minden
      más esetben a FreeBSD-nek egy PC BIOS
      partícióban kell elhelyezkednie.  A FreeBSD a PC BIOS
      partícióit <span class="emphasis"><em>slice</em></span>-nak nevezi,
      ezzel különbözteti ezeket a hagyományos BSD
      partícióktól.  Dedikált esetekben is
      használhatjuk, de elsõsorban akkor kap fontosabb
      szerepet, amikor a FreeBSD-nek más operációs
      rendszerekkel kell megosztani a helyet.  Ezzel el tudjuk
      kerülni, hogy a más operációs
      rendszerekben megtalálható, nem FreeBSD alapú
      <code class="command">fdisk</code> parancs megzavarodjon.</p><p>A slice-ok használatakor a meghajtó
      <code class="filename">/dev/da1s1e</code> néven kerül
      hozzáadásra.  Így kell olvasni: egyes SCSI
      lemezes egység (második SCSI lemez), elsõ slice
      (elsõ PC BIOS partíció) és
      <code class="filename">e</code> BSD partíció.  A
      dedikált esetben a meghajtó neve viszont
      egyszerûen csak <code class="filename">/dev/da1e</code>.</p><p>Mivel a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> 32 bites egész számokat
      használ a szektorok számának
      tárolására, ezért lemezenként
      csak 2^32-1 szektort tud ábrázolni, ami az esetek
      többségében 2 TB méretû
      címezhetõ területet jelent.  Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a>
      formátuma szerint sem a kezdõszektor, sem a hossz nem
      lehet 2^32-1-nél több, amivel így a
      partíciókat 2 TB, a lemezeket pedig 4 TB
      méretûre korlátozza.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sunlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sunlabel</span>(8)</span></a>
      formátuma partíciónként 2^32-1
      szektort enged meg és összesen 8
      partíciót, amely ezáltal 16 TB
      terület lefedését teszi lehetõvé.
      Nagyobb lemezekhez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gpt&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gpt</span>(8)</span></a> partíciók
      használatosak.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89752272"></a>18.3.1. A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> használatával</h3></div></div></div><a id="idp89753680" class="indexterm"></a><a id="idp89754960" class="indexterm"></a><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Közlekedés a
	    <span class="application">sysinstall</span> programban</strong></p><p>A <code class="command">sysinstall</code> könnyen
	    használható menüinek
	    segítségével az új lemezen
	    pillanatok alatt létre tudunk hozni
	    partíciókat és
	    megcímkézni ezeket.  Ehhez vagy
	    <code class="systemitem">root</code>
	    felhasználóként jelentkezzünk be a
	    rendszerbe, vagy adjuk ki a <code class="command">su</code> parancsot.
	    A <code class="command">sysinstall</code> parancs kiadása
	    után lépjünk be a
	    <code class="literal">Configure</code>
	    (Beállítások) menübe.  A
	    <code class="literal">FreeBSD Configuration Menu</code> menüben
	    ezután keressük meg és válasszuk
	    ki az <code class="literal">Fdisk</code> menüpontot.</p></li><li class="step"><p class="title"><strong>Az <span class="application">fdisk</span>
	    partíciószerkesztõ</strong></p><p>Miután eljutottunk az
	    <span class="application">fdisk</span> alkalmazáshoz, az
	    <span class="keycap"><strong>A</strong></span> lenyomásával
	    felajánlhatjuk az egész lemezt a FreeBSD
	    számára.  Amikor elõkerül a
	    kérdés, hogy <span class="quote">"<span class="quote">remain cooperative with
	    any future possible operating systems</span>"</span>
	    (<span class="quote">"<span class="quote">mûködõképes maradjon-e a
	    késõbbiekben telepítendõ
	    operációs rendszerekkel</span>"</span>), akkor
	    válaszoljuk rá <code class="literal">YES</code>-szel
	    (tehát igen).  A <span class="keycap"><strong>W</strong></span> gomb
	    lenyomásával írjuk a lemezre a most
	    elvégzett változtatásokat.
	    Ezután már a <span class="keycap"><strong>Q</strong></span>
	    használatával ki is léphetünk az
	    FDISK szerkesztõbõl.  A következõ
	    lépésben a <span class="quote">"<span class="quote">Master Boot
	    Record</span>"</span>-ról fognak minket megkérdezni.
	    Mivel most egy már mûködõ rendszert
	    bõvítünk, ezért a válaszunk
	    erre <code class="literal">None</code> lesz.</p></li><li class="step"><p class="title"><strong>A lemezcímkék szerkesztése</strong></p><a id="idp89770192" class="indexterm"></a><p>Most lépjünk ki a
	    <span class="application">sysinstall</span>
	    alkalmazásból és indítsuk el
	    újra.  Kövessük az iménti
	    útmutatásokat, de ezúttal a
	    <code class="literal">Label</code> menüpontot válasszuk
	    ki.  Ezzel a <code class="literal">Disk Label Editor</code>-ba vagyis
	    a lemezcímkék szerkesztõjéhez
	    jutunk.  Itt fogjuk létrehozni a hagyományos
	    BSD partíciókat.  Egy lemezen nyolc ilyen
	    partíció lehet,
	    <code class="literal">a</code>-tól <code class="literal">h</code>-ig.
	    Közülük néhány
	    partíció címkéjét
	    megkülönböztetjük.  Az
	    <code class="literal">a</code> partíció jelöli a
	    rendszer indításához használt
	    partíciót, a
	    gyökérpartíciót
	    (<code class="filename">/</code>).  Tehát <code class="literal">a</code>
	    partíció csak a rendszerlemezünkön
	    szerepelhet (tehát ahonnan indul a rendszer).  A
	    <code class="literal">b</code> partíció a
	    lapozáshoz használt partíciókat
	    jelöli és több lemezen is szerepelhet.  A
	    <code class="literal">c</code> partíción keresztül
	    lehet elérni az egészt lemezt dedikált
	    módban vagy az egész FreeBSD slice-ot slice
	    módban.  A többi partíció
	    tetszõlegesen felhasználható.</p><p>A <span class="application">sysinstall</span>
	    címkeszerkesztõje az <code class="literal">e</code>
	    betûvel szereti megjelölni a sem nem
	    rendszerindító, sem nem lapozó
	    partíciókat.  A címkeszerkesztõben
	    egyetlen állományrendszert a
	    <span class="keycap"><strong>C</strong></span> lenyomásával lehet
	    készíteni.  Amikor erre válaszul
	    megkérdezi a típusát (FS
	    (állományrendszer) vagy swap
	    (lapozóterület) legyen), akkor válasszuk
	    az <code class="literal">FS</code> beállítást
	    és adjuk meg a csatlakozási pontját
	    (például <code class="filename">/mnt</code>).  Amikor a
	    lemezt telepítés után (post-install)
	    adjuk hozzá, akkor a
	    <span class="application">sysinstall</span>
	    valójában nem hoz létre hozzá
	    bejegyzéseket az <code class="filename">/etc/fstab</code>
	    állományban, ezért a
	    csatlakozási pont megadása nem is
	    feltétlenül fontos.</p><p>Most már készen állunk arra, hogy
	    rögzítsük az új címkét
	    a lemezre és létrehozzunk vele egy
	    állományrendszert.  Ehhez nyomjuk le a
	    <span class="keycap"><strong>W</strong></span> gombot.  Ne foglalkozzunk vele, ha a
	    <span class="application">sysinstall</span> nem képes
	    csatlakoztatni az új partíciót.  Ha
	    ezzel megvagyunk, akkor lépjünk ki a
	    címkeszerkesztõbõl és a
	    <span class="application">sysinstall</span>ból is.</p></li><li class="step"><p class="title"><strong>Befejezés</strong></p><p>Most már csak annyi teendõnk maradt, hogy
	    felvegyük az <code class="filename">/etc/fstab</code>
	    állományba az új lemezhez
	    tartozó bejegyzést.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89831120"></a>18.3.2. Parancssoros eszközök
	használatával</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89831760"></a>18.3.2.1. Slice módban</h4></div></div></div><p>Ezzel a beállítással a
	  lemezünkre késõbb más
	  operációs rendszereket is
	  telepíthetünk, és nem okoz gondot a
	  saját <code class="command">fdisk</code> segédprogramjaik
	  mûködésében.  Az új lemezek
	  telepítésénél ezt a módszer
	  ajánlatos követni.  A dedikált módot
	  viszont csak abban az esetben használjuk, ha erre
	  nyomós okunk van!</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 bs=1k count=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>fdisk -BI da1</code></strong> # inicializáljuk az új lemezt
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -B -w da1s1 auto</code></strong> # címkézzük meg
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -e da1s1</code></strong> # szerkeszzük át a frissen létrehozott címkét és vegyünk fel egy új partíciót
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da1s1e</code></strong> # ismételjük meg minden létrehozott partícióhoz
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/da1s1e /1</code></strong> # csatlakoztassuk a partíció(ka)t
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong> # vegyük fel a megfelelõ bejegyzés(eke)t az <code class="filename">/etc/fstab</code> állományba</pre><p>IDE-lemezek esetén az<code class="filename">ad</code>
	  eszközt a <code class="filename">da</code> eszközzel
	  helyettesítsük.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89841360"></a>18.3.2.2. Dedikált módban</h4></div></div></div><a id="idp89842000" class="indexterm"></a><p>Amennyiben az új meghajtót nem akarjuk
	  megosztani egyetlen más operációs
	  rendszerrel sem, használhatjuk a
	  <code class="literal">dedicated</code> (dedikált) módot.
	  Ne felejtsük el azonban, hogy ez képes
	  összezavarni a Microsoft operációs
	  rendszereit, habár ebbõl semmilyen kárunk
	  nem fog származni.  Az IBM <span class="trademark">OS/2</span>(R)
	  operációs rendszere azonban
	  <span class="quote">"<span class="quote">kisajátít</span>"</span> minden olyan
	  partíciót, amelyet nem tud olvasni.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 bs=1k count=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -Bw da1 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -e da1</code></strong>				# létrehozzuk az `e' partíciót
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da1e</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong>				# felvesszük a /dev/da1e partíciót
<code class="prompt">#</code> <strong class="userinput"><code>mount /1</code></strong></pre><p>Egy másik megoldás:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 count=2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel /dev/da1 | bsdlabel -BR da1 /dev/stdin</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da1e</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong>					# felvesszük a /dev/da1e partíciót
<code class="prompt">#</code> <strong class="userinput"><code>mount /1</code></strong></pre></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="disks-naming.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="raid.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">18.2. Az eszközök elnevezései </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 18.4. RAID</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>