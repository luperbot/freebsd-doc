<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>28.3. A sendmail beállítása</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="mail.html" title="28. fejezet - Elektronikus levelezés" /><link rel="prev" href="mail-using.html" title="28.2. Az elektronikus levelezés használata" /><link rel="next" href="mail-changingmta.html" title="28.4. A levéltovábbító ügynök megváltoztatása" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">28.3. A <span class="application">sendmail</span>
      beállítása</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mail-using.html">Vissza</a> </td><th width="60%" align="center">28. fejezet - Elektronikus levelezés</th><td width="20%" align="right"> <a accesskey="n" href="mail-changingmta.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sendmail"></a>28.3. A <span class="application">sendmail</span>
      beállítása</h2></div><div><span class="authorgroup">Írta: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Shumway</span>, <span class="firstname">Christopher</span></span>. </span></div></div></div><a id="idp96168016" class="indexterm"></a><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> a FreeBSD alapértelmezett
      levéltovábbító ügynöke (Mail
      Transfer Agent, <acronym class="acronym">MTA</acronym>).  A
      <span class="application">sendmail</span> feladata fogadni a
      levelezõ kliensektõl (Mail User Agent,
      <acronym class="acronym">MUA</acronym>) érkezõ leveleket és
      kézbesíteni azokat a konfigurációs
      állományában megadott megfelelõ
      levelezõnek.  A <span class="application">sendmail</span>
      hálózati kapcsolatokat is fogad, képes a
      helyi postaládákba vagy akár más
      programoknak is leveleket továbbítani.</p><p>A <span class="application">sendmail</span> a következõ
      állományban tárolja
      beállításait:</p><a id="idp96180432" class="indexterm"></a><a id="idp96181072" class="indexterm"></a><a id="idp96181712" class="indexterm"></a><a id="idp96182352" class="indexterm"></a><a id="idp96182992" class="indexterm"></a><a id="idp96183632" class="indexterm"></a><a id="idp96184272" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Állomány</th><th>Szerep</th></tr></thead><tbody><tr><td>
	      <code class="filename">/etc/mail/access</code>
	    </td><td>A <span class="application">sendmail</span> által
	      engedélyezett hozzáféréseket
	      tároló adatbázis</td></tr><tr><td>
	      <code class="filename">/etc/mail/aliases</code>
	    </td><td>A postaládák álnevei</td></tr><tr><td>
	      <code class="filename">/etc/mail/local-host-names</code>
	    </td><td>Azon nevek felsorolása, amelyek
	      számára a
	      <span class="application">sendmail</span> leveleket
	      fogad</td></tr><tr><td>
	      <code class="filename">/etc/mail/mailer.conf</code>
	    </td><td>A levelezõ programok
	      beállításai</td></tr><tr><td>
	      <code class="filename">/etc/mail/mailertable</code>
	    </td><td>A levelezõ programok
	      kézbesítési
	      táblázata</td></tr><tr><td>
	      <code class="filename">/etc/mail/sendmail.cf</code>
	    </td><td>A <span class="application">sendmail</span> központi
	      beállításait tároló
	      állomány</td></tr><tr><td>
	      <code class="filename">/etc/mail/virtusertable</code>
	    </td><td>Virtuális felhasználók és
	      tartományok táblázatai</td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96208848"></a>28.3.1. <code class="filename">/etc/mail/access</code></h3></div></div></div><p>Az engedélyezett hozzáféréseket
	tároló adatbázis tartalmazza milyen
	hálózati neveken vagy IP-címeken lehet
	elérni a helyi levelezõ szervert és azok
	milyen típusú hozzáférést
	kapnak.  A gépek az <code class="option">OK</code> (rendben),
	<code class="option">REJECT</code> (visszautasít),
	<code class="option">RELAY</code> (továbbítás)
	beállításokat alkalmazhatjuk, vagy
	egyszerûen meghívhatjuk hozzájuk a
	<span class="application">sendmail</span> hibakezelõ
	rutinját egy adott kézbesítési
	hibával.  Ha egy gépet az <code class="option">OK</code>
	beállítással veszük fel a
	listára, ami egyébként
	alapértelmezés, akkor ez a gép levelet tud
	küldeni egészen addig, amíg a
	végsõ cél a helyi gép marad.  A
	<code class="option">REJECT</code> beállítással
	felsorolt gépek számára semmiféle
	levelezés nem engedélyezett.  Ha pedig egy
	gép mellett a <code class="option">RELAY</code>
	beállítás jelenik meg, akkor a szerveren
	keresztül tetszõleges címre
	küldhet.</p><div class="example"><a id="idp96216912"></a><div class="example-title">28.1. példa - A <span class="application">sendmail</span>
	  elérését szabályozó
	  adatbázis beállítása</div><div class="example-contents"><pre class="programlisting">cyberspammer.com                550 Nem szeretjuk a spammereket
FREE.STEALTH.MAILER@            550 Nem szeretjuk a spammereket
another.source.of.spam          REJECT
okay.cyberspammer.com           OK
128.32                          RELAY</pre></div></div><br class="example-break" /><p>Ebben a példában öt bejegyzést
	láthatunk.  A táblázat bal felének
	valamelyik sorára illeszkedõ küldõkre a
	táblázatban a sor jobb felén megjelenõ
	cselekvés érvényesül.  Az elsõ
	két sorban a <span class="application">sendmail</span>
	hibakezelõ rutinjának adunk át
	hibakódokat.  A hozzá tartozó üzenet
	akkor fog megjelenni a távoli gépen, amikor a
	tõle érkezõ levél illeszkedik a bal
	oldali szabályra.  Az ezeket követõ
	bejegyzésben visszalökünk minden olyan levelet,
	amely az internetrõl egy adott
	számítógéptõl érkezik,
	például az <code class="systemitem">another.source.of.spam</code>
	címrõl.  A következõ bejegyzésben
	az <code class="systemitem">okay.cyberspammer.com</code>
	címrõl elfogadjuk a kapcsolódást, ami
	viszont sokkal pontosabb megjelölés a fentebb
	szereplõ <code class="systemitem">cyberspammer.com</code> sornál.  A
	pontosabban kifejtett nevek
	felülbírálják a kevésbé
	pontosan megnevezetteket.  Végül az utolsó
	bejegyzésben engedélyezzük a levelek
	továbbküldését minden olyan gép
	számára, amelynek címe a
	<code class="systemitem">128.32</code> elõtaggal kezdõdik.  Ezek
	tehát képesek ezen a levelezõ szerveren
	keresztül bárhova leveleket küldeni.</p><p>Az állomány módosítása
	után az adatbázis
	frissítéséhez mindig le kell futtatnunk egy
	<code class="command">make</code> parancsot az
	<code class="filename">/etc/mail/</code> könyvtárban.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96222416"></a>28.3.2. <code class="filename">/etc/mail/aliases</code></h3></div></div></div><p>Az álneveket tartalmazó adatbázis
	virtuális postaládákat sorol fel, amelyek
	más felhasználókra,
	állományokra, programokra vagy további
	álnevekre vonatkozhatnak.  Íme
	néhány példa az
	<code class="filename">/etc/mail/aliases</code> állományban
	szereplõ bejegyzésekre:</p><div class="example"><a id="idp96224080"></a><div class="example-title">28.2. példa - Virtuális postaládák</div><div class="example-contents"><pre class="programlisting">root: localuser
ftp-bugs: joe,eric,paul
bit.bucket:  /dev/null
procmail: "|/usr/local/bin/procmail"</pre></div></div><br class="example-break" /><p>A formai szabályok egyszerûek: a kettõspont
	bal oldalára kell írni azt a
	postaládát, amely a jobb oldalán levõ
	célokra bomlik.  A példa elsõ sorában
	egyszerûen megfeleltetjük a <code class="systemitem">root</code>
	postaládáját a
	<code class="systemitem">localuser</code>
	postaládájának, majd ezt a nevet
	keressük az álnevek adatbázisában.  Ha
	nem találunk már rá illeszkedést,
	akkor az üzenetet a <code class="systemitem">localuser</code>
	nevû helyi felhasználónak
	továbbítjuk.  A következõ sorban
	címek listáját láthatjuk.  Ennek
	megfelelõen a <code class="systemitem">ftp-bugs</code>
	postaláda címére küldött levelek
	három további helyi postaládára
	mennek tovább: ezek név szerint a
	<code class="systemitem">joe</code>, <code class="systemitem">eric</code> és
	<code class="systemitem">paul</code> felhasználók
	postaládái.  Itt a távoli
	postaládák
	<code class="email">&lt;<a xmlns="" class="email" href="mailto:felhasználó@példa.hu">felhasználó@példa.hu</a>&gt;</code> alakban
	adhatóak meg.  A következõ sor az
	állományok használatát
	példázza, ahol konkrétan a
	<code class="filename">/dev/null</code> állományba
	irányítjuk át az adott címre
	érkezõ leveleket.  Az utolsó sorban pedig a
	programok használatára láthatunk
	példát, ahol ebben az esetben a levél egy
	<span class="trademark">UNIX</span>(R)-os csövön keresztül a
	<code class="filename">/usr/local/bin/procmail</code> szabványos
	bemenetére kerül.</p><p>Ha megváltoztatjuk ezt az állományt,
	akkor utána az adatbázis
	frissítéséhez ne felejtsük el
	meghívni a <code class="command">make</code> parancsot az
	<code class="filename">/etc/mail/</code> könyvtárban.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96236496"></a>28.3.3. <code class="filename">/etc/mail/local-host-names</code></h3></div></div></div><p>Ebben az állományban adhatjuk meg, hogy a
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> milyen hálózati neveket fogadjon
	el helyi hálózati névként.  Ide kell
	raknunk azokat a tartományokat vagy címeket,
	amelyektõl a <span class="application">sendmail</span> leveleket
	fogad el.  Például, ha a levelezõ szerver az
	<code class="systemitem">minta.com</code>
	tartományból és a <code class="systemitem">level.minta.com</code> címrõl fogad el
	leveleket, akkor a <code class="filename">local-host-names</code>
	valahogy így fog kinézni:</p><pre class="programlisting">minta.com
level.minta.com</pre><p>Az állomány módosításakor
	a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> programot újra kell indítani a
	változások
	érvényesítéséhez.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96242000"></a>28.3.4. <code class="filename">/etc/mail/sendmail.cf</code></h3></div></div></div><p>Ahogy a <span class="application">sendmail</span> központi
	konfigurációs állománya, a
	<code class="filename">sendmail.cf</code> irányítja a
	<span class="application">sendmail</span> átfogó
	viselkedését, beleértve mindent az e-mail
	címek átírásától
	kezdve a távoli szervereknek küldött
	elutasító üzenetek
	küldéséig.  Mivel ennyire sokfajta szerepet
	tölt be egyszerre, ezért ez a
	konfigurációs állomány
	meglehetõsen összetett és a
	részletezése meghaladná ennek a
	leírásnak a határait.  Szerencsére
	az átlagos levelezõ szerverek esetében ezt az
	állományt nagyon ritkán kell
	módosítani.</p><p>A <span class="application">sendmail</span> központi
	konfigurációs állománya a
	<span class="application">sendmail</span> lehetõségeit
	és viselkedését meghatározó
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a> makrókból építhetõ
	fel.  A pontosabb részleteket a
	<code class="filename">/usr/src/contrib/sendmail/cf/README</code>
	állományban találjuk meg.</p><p>Az állomány megváltoztatása
	után a módosítások
	érvényesítéséhez újra
	kell indítani a <span class="application">sendmail</span>
	programot.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp96247760"></a>28.3.5. <code class="filename">/etc/mail/virtusertable</code></h3></div></div></div><p>A <code class="filename">virtusertable</code> állomány
	képezi le a virtuális tartományokhoz
	tartozó címeket valódi
	postaládák címeire.  Ezek a
	postaládák lehetnek helyiek, távoliak, az
	<code class="filename">/etc/mail/aliases</code> állományban
	megadott álnevek vagy állományok.</p><div class="example"><a id="idp96249680"></a><div class="example-title">28.3. példa - Példa a virtuális tartományok
	  leképezésére</div><div class="example-contents"><pre class="programlisting">root@minta.com                root
postmaster@minta.com          postmaster@noc.minta.net
@minta.com                    joe</pre></div></div><br class="example-break" /><p>A fenti példában megadtunk egy
	leképezést a <code class="systemitem">minta.com</code> tartományhoz.  Ez az
	állomány úgy dolgozódik fel, hogy
	fentrõl lefelé illesztõdnek a címek,
	egészen az elsõ egyezésig.  Az elsõ
	bejegyzés szerint a <code class="email">&lt;<a xmlns="" class="email" href="mailto:root@minta.com">root@minta.com</a>&gt;</code> a helyi
	<code class="systemitem">root</code> felhasználó
	postaládájára képzõdik le.  A
	következõ bejegyzés szerint a
	<code class="email">&lt;<a xmlns="" class="email" href="mailto:postmaster@minta.com">postmaster@minta.com</a>&gt;</code> a <code class="systemitem">noc.minta.net</code> címen
	található <code class="systemitem">postmaster</code>
	nevû felhasználó
	postaládájára képzõdik le.
	Végezetül, ha a <code class="systemitem">minta.com</code> címrõl eddig
	még semmi sem illeszkedett volna, akkor az utolsó
	leképezés veszi át, amely az <code class="systemitem">minta.com</code> tartományon
	belül az összes többi címre
	küldött levelet a helyi <code class="systemitem">joe</code>
	nevû felhasználó
	postaládájára képezi le.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mail-using.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="mail.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="mail-changingmta.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">28.2. Az elektronikus levelezés használata </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 28.4. A levéltovábbító ügynök
      megváltoztatása</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>