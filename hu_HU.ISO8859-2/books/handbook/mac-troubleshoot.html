<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>16.17. A hibák elhárítása a MAC rendszerben</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="mac.html" title="16. fejezet - Kötelezõ hozzáférés-vezérlés (MAC)" /><link rel="prev" href="mac-userlocked.html" title="16.16. A felhasználók korlátozása" /><link rel="next" href="audit.html" title="17. fejezet - Biztonsági események vizsgálata" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">16.17. A hibák elhárítása a MAC
      rendszerben</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mac-userlocked.html">Vissza</a> </td><th width="60%" align="center">16. fejezet - Kötelezõ
    hozzáférés-vezérlés (MAC)</th><td width="20%" align="right"> <a accesskey="n" href="audit.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-troubleshoot"></a>16.17. A hibák elhárítása a MAC
      rendszerben</h2></div></div></div><a id="idp89252304" class="indexterm"></a><p>A fejlesztés fázisában bizonyos
      normál konfigurációval rendelkezõ
      felhasználók gondokat jeleztek.  Ezeket foglaljuk
      most itt össze:</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89253200"></a>16.17.1. A <code class="option">multilabel</code>
	beállítás nem adható meg a
	<code class="filename">/</code> állományrendszerre</h3></div></div></div><p>A <code class="option">multilabel</code> beállítás
	nem marad meg a rendszerindító
	(<code class="filename">/</code>) partíciómon!</p><p>A tapasztalatok szerint körülbelül minden
	ötvenedik felhasználó szembesül ezzel a
	problémával, és mi is találkozunk
	vele a kezdeti konfigurációk
	kialakítása során.  Ennek az
	úgynevezett <span class="quote">"<span class="quote">hibának</span>"</span> a
	behatóbb tanulmányozása során arra
	jutottunk, hogy ez többnyire vagy a hibás
	dokumentálásból vagy a
	dokumentáció
	félreértelmezésébõl ered.
	Független attól, hogy ez mitõl is
	következett be, a következõ lépések
	megtételével orvosolhatjuk:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Nyissuk meg az <code class="filename">/etc/fstab</code>
	    állományt és adjuk meg a
	    rendszerindító partíciónak az
	    <code class="option">ro</code>, vagyis az
	    írásvédett (read-only)
	    beállítást.</p></li><li class="step"><p>Indítsuk újra a gépet
	    egyfelhasználós módban.</p></li><li class="step"><p>A <code class="command">tunefs</code> <code class="option">-l enable</code>
	    parancsot futtassuk le a <code class="filename">/</code>
	    állományrendszeren.</p></li><li class="step"><p>Indítsuk újra a rendszert normál
	    módban.</p></li><li class="step"><p>Adjuk ki a <code class="command">mount</code>
	    <code class="option">-urw</code> <code class="filename">/</code> parancsot, majd
	    az <code class="filename">/etc/fstab</code> állományban
	    írjuk át a <code class="option">ro</code>
	    beállítást az <code class="option">rw</code>
	    értékre és megint indítsuk
	    újra a rendszert.</p></li><li class="step"><p>Alaposan nézzük át a
	    <code class="command">mount</code> parancs kimenetét és
	    gyõzödjünk meg róla, hogy a
	    <code class="option">multilabel</code> opció valóban
	    beállítódott a
	    rendszerindító
	    állományrendszerre.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89271376"></a>16.17.2. A <acronym class="acronym">MAC</acronym> után nem lehet
	indítani az X11 szervert</h3></div></div></div><p>Nem indul az X, miután <acronym class="acronym">MAC</acronym>-kel
	kialakítottunk egy biztonságos
	környezetet!</p><p>Ezt vagy a <acronym class="acronym">MAC</acronym>
	<code class="literal">partition</code> házirendje okozza, vagy az
	egyik címkékeket használó
	házirend helytelen beállítása.  A
	következõ módon deríthetjük ki az
	okát:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Figyelmesen olvassuk el a hibaüzenetet: ha a
	    felhasználó az <code class="literal">insecure</code>
	    osztály tagja, akkor a <code class="literal">partition</code>
	    házirend lesz a bûnös.
	    Próbáljuk meg a felhasználót
	    visszatenni a <code class="literal">default</code> osztályba
	    és a <code class="command">cap_mkdb</code> paranccsal
	    újragenerálni az adatbázist.  Ha ez nem
	    segít a problémán, akkor haladjunk
	    tovább.</p></li><li class="step"><p>Alaposan ellenõrizzük a
	    címkékhez tartozó házirendeket.
	    Vizsgáljuk meg, hogy a kérdeses
	    felhasználó esetében a
	    házirendet és az X11 alkalmazást,
	    valamint a <code class="filename">/dev</code>
	    eszközöket tényleg jól
	    állítottuk be.</p></li><li class="step"><p>Ha az iméntiek egyik sem oldja meg gondunkat,
	    küldjük el a hibaüzenetet és a
	    környezetünk rövid
	    leírását a a <a class="link" href="http://www.TrustedBSD.org" target="_top">TrustedBSD</a>
	    honlapjáról elérhetõ TrustedBSD
	    levelezési lista vagy a <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">FreeBSD general questions levelezési lista</a>
	    címére.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89284304"></a>16.17.3. Hiba: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=_secure_path&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">_secure_path</span>(3)</span></a> cannot stat
	<code class="filename">.login_conf</code></h3></div></div></div><p>Amikor a rendszerben megpróbálok a
	<code class="systemitem">root</code> felhasználóról
	átváltani egy másik
	felhasználóra, a <span class="errorname">_secure_path: unable
	to state .login_conf</span> hibaüzenet jelenik
	meg.</p><p>Ez az üzenet általában akkor
	látható, amikor a felhasználó
	nagyobb értékû címkével
	rendelkezik annál, mint akivé válni akar.
	Például vegyük a <code class="systemitem">joska</code>
	nevû felhasználót a rendszerben, aki az alap
	<code class="literal">biba/low</code> címkével rendelkezik.
	A <code class="systemitem">root</code> felhasználó, akinek
	<code class="literal">biba/high</code> címkéje van, nem
	láthatja <code class="systemitem">joska</code>
	felhasználói könyvtárát.  Ez
	attól függetlenül megtörténik, hogy
	a <code class="systemitem">root</code> a <code class="command">su</code> paranccsal
	váltott át a <code class="systemitem">joska</code> nevû
	felhasználóra vagy sem.  Egy ilyen helyzetben a
	Biba sértetlenségi modellje nem fogja engedni a
	<code class="systemitem">root</code> felhasználóra
	számára, hogy láthassa a
	kevésbé sértetlen objektumokat.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp89292240"></a>16.17.4. A <code class="systemitem">root</code> felhasználó nem
	megy!</h3></div></div></div><p>A rendszer normál vagy egyfelhasználós
	módban sem ismeri fel a <code class="systemitem">root</code>
	felhasználót.  A <code class="command">whoami</code> parancs
	0 (nullát) ad vissza és a <code class="command">su</code>
	parancs pedig annyit mond: <span class="errorname">who are you?</span>
	(<span class="errorname">ki vagy?</span>).  Mi
	történhetett?</p><p>Ez csak olyankor történhet, ha a
	címkézési házirendet nem
	engedélyezzük, vagy a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>
	használatával, vagy pedig a modul
	eltávolításával.  Ha a
	házirendet letiltjuk vagy ideiglenesen letiltódik,
	akkor a bejelentkezési tulajdonságokat
	tároló adatbázist a <code class="option">label</code>
	beállítás
	eltávolításával kell
	újrakonfigurálni.  A
	<code class="filename">login.conf</code> állományból
	ne felejtsük el kivenni az összes
	<code class="option">label</code> beállítást és
	a <code class="command">cap_mkdb</code> paranccsal
	újragenerálni az adatbázist.</p><p>Ilyen akkor is elõfordulhat, amikor a házirend
	valamilyen módon korlátozza a
	<code class="filename">master.passwd</code> állomány vagy
	adatbázis elérhetõségét.  Ezt
	általában az okozza, hogy a rendszergazda az
	állományt olyan címke alatt
	módosítja, amely ütközik a rendszerben
	alkalmazott általános házirenddel.  Ebben
	az esetekben a rendszer próbálja meg beolvasni a
	felhasználók adatait, azonban mivel közben az
	állomány új címkét
	örökölt, nem fér hozzá.  Ha a
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> paranccsal letiltjuk a házirendet, minden
	vissza fog térni a rendes
	kerékvágásba.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mac-userlocked.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="mac.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="audit.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">16.16. A felhasználók
      korlátozása </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 17. fejezet - Biztonsági események vizsgálata</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>