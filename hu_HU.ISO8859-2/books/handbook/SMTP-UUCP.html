<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>28.7. SMTP és az UUCP</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="mail.html" title="28. fejezet - Elektronikus levelezés" /><link rel="prev" href="mail-advanced.html" title="28.6. Komolyabb témák" /><link rel="next" href="outgoing-only.html" title="28.8. Csak küldés beállítása" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">28.7. SMTP és az UUCP</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mail-advanced.html">Vissza</a> </td><th width="60%" align="center">28. fejezet - Elektronikus levelezés</th><td width="20%" align="right"> <a accesskey="n" href="outgoing-only.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="SMTP-UUCP"></a>28.7. SMTP és az UUCP</h2></div></div></div><p>A FreeBSD-hez tartozó <span class="application">sendmail</span>
      olyan gépek számára lett kialakítva,
      amelyek közvetlenül az internethez csatlakoznak.  Az
      UUCP használatával levelezõ rendszerek
      számára egy másik konfigurációs
      állományt kell telepíteni a
      <span class="application">sendmail</span> számára.</p><p>Az <code class="filename">/etc/mail/sendmail.cf</code>
      állítása kézzel
      egyáltalán nem könnyû.  A
      <span class="application">sendmail</span> 8.  változata
      ráadásul a konfigurációs
      állományokat az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a> elõfeldolgozó
      segítségével gyártja le, ahol a
      tényleges beállítások egy magasabb
      absztrakciós szinten jelennek meg.  Az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a>
      típusú konfigurációs
      állományok a
      <code class="filename">/usr/share/sendmail/cf</code>
      könyvtárban találhatóak.  A
      <code class="filename">cf</code> alkönyvtárban levõ
      <code class="filename">README</code> állomány igyekszik a
      felhasználót bevezetni az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a> alapú
      beállítások világába.</p><p>A <code class="literal">mailertable</code> nevû
      lehetõség használatával tudjuk a
      legjobban támogatni az UUCP protokollon keresztüli
      kézbesítést.  Ezzel felépül egy
      olyan adatbázis, amelyet a
      <span class="application">sendmail</span> fel tud használni a
      továbbítást érintõ
      döntésekben.</p><p>Ehhez elsõként hozzuk is létre a
      saját <code class="filename">.mc</code> állományunkat.
      Ehhez a <code class="filename">/usr/share/sendmail/cf/cf</code>
      könyvtár tartalmaz néhány
      példát.  Hívjuk most ezt az
      állomnyunkat <code class="filename">ize.mc</code> néven.  A
      következõ módszerrel tudjuk egy valós
      <code class="filename">sendmail.cf</code> állománnyá
      alakítani:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /etc/mail</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make ize.cf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp ize.cf /etc/mail/sendmail.cf</code></strong></pre><p>Egy átlagos <code class="filename">.mc</code>
      állomány egyébként valahogy így
      épül fel:</p><pre class="programlisting">VERSIONID(`<em class="replaceable"><code>verziószám</code></em>') OSTYPE(bsd4.4)

FEATURE(accept_unresolvable_domains)
FEATURE(nocanonify)
FEATURE(mailertable, `hash -o /etc/mail/mailertable')

define(`UUCP_RELAY', <em class="replaceable"><code>sajat.uucp.relay</code></em>)
define(`UUCP_MAX_SIZE', 200000)
define(`confDONT_PROBE_INTERFACES')

MAILER(local)
MAILER(smtp)
MAILER(uucp)

Cw    <em class="replaceable"><code>sajat.al.nev</code></em>
Cw    <em class="replaceable"><code>azuucpgepneve.UUCP</code></em></pre><p>Az <code class="literal">accept_unresolvable_domains</code>,
      <code class="literal">nocanonify</code> és
      <code class="literal">confDONT_PROBE_INTERFACES</code>
      lehetõségekre hivatkozó sorok
      megakadályozzák, hogy a levél
      kézbesítésében a DNS is szerepet
      játsszon.  Az <code class="literal">UUCP_RELAY</code> az UUCP
      alapú kézbesítés
      támogatását engedélyezi.
      Egyszerûen csak írjunk ide egy internetes
      hálózati nevet, amely képes feldolgozni az
      .UUCP áltartomány címeit.  Az esetek
      többségében ide az
      internet-szolgáltatónk levelek
      továbbküldéséért felelõs
      gépe kerül.</p><p>Miután ezzel végeztünk,
      szükségünk lesz még az
      <code class="filename">/etc/mail/mailertable</code>
      állományra is.  Ha a külvilág
      felé csak egyetlen összeköttetést
      használunk a levelekhez, akkor az alábbi pontosan
      megfelel:</p><pre class="programlisting">#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
.                             uucp-dom:<em class="replaceable"><code>sajat.uucp.relay</code></em></pre><p>Egy bonyolultabb példa pedig így néz
      ki:</p><pre class="programlisting">#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
#
horus.interface-business.de   uucp-dom:horus
.interface-business.de        uucp-dom:if-bus
interface-business.de         uucp-dom:if-bus
.heep.sax.de                  smtp8:%1
horus.UUCP                    uucp-dom:horus
if-bus.UUCP                   uucp-dom:if-bus
.                             uucp-dom:</pre><p>Az elsõ három sor azokat a speciális
      eseteket kezeli, ahol a tartomány felé
      küldött levelek nem az alapértelmezett
      úton visszük tovább, hanem valamelyik UUCP
      szomszéd felé és így <span class="quote">"<span class="quote">le tudjuk
      rövidíteni</span>"</span> a kézbesítés
      útvonalát.  Az ezeket követõ sor dolgozza
      fel a helyi Ethernet tartomány felé STMP protokollal
      továbbítható leveleket.  Végül az
      UUCP szomszédokat is felsoroljuk az .UUCP
      áltartomány jelölése szerint, így
      megengedjük, hogy a
      <code class="literal">uucp-szomszéd!
      címzett</code>
      felülbírálja az alapértelmezett
      szabályokat.  Az utolsó sorban mindig egyetlen pont
      szerepel, ami minden másra illeszkedik, így az UUCP
      kézbesítés egy olyan UUCP szomszéd
      felé halad, amely a világ felé egy
      univerzális levelezõ átjárónak
      tekinthetõ.  A <code class="literal">uucp-dom:</code> kulcsszó
      mögött szereplõ összes csomópont
      nevének érvényes UUCP szomszédra kell
      utalnia, amelyet a <code class="command">uuname</code> paranccsal le is
      tudunk ellenõrizni.</p><p>A feladatból már csak annyi maradt hátra,
      hogy használat elõtt ezt az állományt
      át kell alakítani DBM adatbázis
      formátumba.  Az ehhez szükséges parancsot
      érdemes <code class="filename">mailertable</code>
      állomány elejére bejegyzésben
      felírni.  A <code class="filename">mailertable</code>
      megváltoztatásakor mindig le kell futtatni ezt a
      parancsot.</p><p>Utolsó jótanács: ha nem lennénk
      biztosak valamelyik kézbesítési
      útvonal mûködésében, ne
      felejtsük el a <span class="application">sendmail</span>
      <code class="option">-bt</code> beállítását.
      Ezzel a <span class="application">sendmail</span> az ún.
      <span class="emphasis"><em>címtesztelõ módban</em></span>
      (address test mode) indul el.  Gépeljük be, hogy
      <code class="literal">3,0</code>, majd írjuk be a tesztelni
      kívánt címet.  Az utolsó sorban
      láthatjuk a felhasznált belsõ
      levéltovábbító
      ügynököt, a célgépet, amellyel ezt
      meghívjuk, és a (valószínûleg az
      átfordított) címet.  Innen a <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>D</strong></span>
      billentyûkombinációval léphetünk
      ki.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sendmail -bt</code></strong>
ADDRESS TEST MODE (ruleset 3 NOT automatically invoked)
Enter &lt;ruleset&gt; &lt;address&gt;
<code class="prompt">&gt;</code> <strong class="userinput"><code>3,0 ize@pelda.com</code></strong>
canonify           input: ize @ pelda . com
...
parse            returns: $# uucp-dom $@ <em class="replaceable"><code>sajat.uucp.relay</code></em> $: ize &lt; @ pelda . com . &gt;
<code class="prompt">&gt;</code> <strong class="userinput"><code>^D</code></strong></pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mail-advanced.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="mail.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="outgoing-only.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">28.6. Komolyabb témák </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 28.8. Csak küldés
      beállítása</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>