<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>14. fejezet - PPP</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Gyakran Ismételt Kérdések a FreeBSD 6.X, 7.X és 8.X változatairól" /><link rel="up" href="index.html" title="Gyakran Ismételt Kérdések a FreeBSD 6.X, 7.X és 8.X változatairól" /><link rel="prev" href="security.html" title="13. fejezet - Biztonság" /><link rel="next" href="serial.html" title="15. fejezet - Soros vonali kommunikáció" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">14. fejezet - PPP</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="security.html">Vissza</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="serial.html">Elõre</a></td></tr></table><hr /></div><div xml:lang="hu" class="chapter" lang="hu"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ppp"></a>14. fejezet - PPP</h1></div></div></div><div class="qandaset"><a id="idp78388176"></a><dl><dt>14.1. <a href="ppp.html#idp78388432">Nem mûködik a ppp(8).  Mit lehet a
	    gond?</a></dt><dt>14.2. <a href="ppp.html#idp78406352">A ppp(8) miért bontja a vonalat, amikor
	    elindul?</a></dt><dt>14.3. <a href="ppp.html#idp78412624">A ppp(8) miért nem tárcsáz
	    -auto módban?</a></dt><dt>14.4. <a href="ppp.html#idp78426320">Mit jelent a No route to host
	    hibaüzenet?</a></dt><dt>14.5. <a href="ppp.html#idp78440016">Miért szakad meg a kapcsolat 3 perc
	    után?</a></dt><dt>14.6. <a href="ppp.html#idp78451152">A kapcsolat miért szakad meg nagyobb
	    terhelést alatt?</a></dt><dt>14.7. <a href="ppp.html#idp78454480">A kapcsolat miért szakad meg
	    véletlenszerûen?</a></dt><dt>14.8. <a href="ppp.html#idp78463312">A kapcsolat miért fullad le
	    véletlenszerûen?</a></dt><dt>14.9. <a href="ppp.html#idp78474832">A vonal túlsó végérõl
	    nem érkezik válasz.  Mi lehet tenni?</a></dt><dt>14.10. <a href="ppp.html#idp78482384">A ppp(8) teljesen megállt.  Mi lehet
	    tenni?</a></dt><dt>14.11. <a href="ppp.html#idp78500432">Miért nem történik semmi a
	    "Login OK!" üzenet után?</a></dt><dt>14.12. <a href="ppp.html#idp78506704">Folyamatosan Magic is same
	    hibák jelennek meg.  Ez mire utal?</a></dt><dt>14.13. <a href="ppp.html#idp78536272">Az LCP beállítása egészen a
	    kapcsolat befejezõdéséig
	    folytatódik.  Mi lehet a probléma?</a></dt><dt>14.14. <a href="ppp.html#idp78562896">Miért akad meg a ppp(8), ha egy
	    külsõ parancsot adunk ki alatta?</a></dt><dt>14.15. <a href="ppp.html#idp78574544">A ppp(8) null-modem kábel
	    használatakor miért nem lép ki
	    soha?</a></dt><dt>14.16. <a href="ppp.html#idp78579664">A ppp(8) miért tárcsáz
	    látszólag minden különösebb ok
	    nélkül -auto
	    módban?</a></dt><dt>14.17. <a href="ppp.html#idp78600784">Mit jelentenek a CCP hibák?</a></dt><dt>14.18. <a href="ppp.html#idp78605520">A ppp(8) miért nem naplózza a
	    kapcsolat sebességét?</a></dt><dt>14.19. <a href="ppp.html#idp78623824">A ppp(8) miért hagyja figyelmen
	    kívül a \ karaktereket a
	    szkriptekben?</a></dt><dt>14.20. <a href="ppp.html#idp78633552">A ppp(8) miért küld
	    Segmentation Fault hibát,
	    miközben nem is keletkezik
	    ppp.core állomány?</a></dt><dt>14.21. <a href="ppp.html#idp78664272">Miért nem csatlakozik soha az a program, amely a
	    hívást kezdeményezte
	    -auto módban?</a></dt><dt>14.22. <a href="ppp.html#idp78691152">A legtöbb játék miért nem
	    mûködik a -nat kapcsoló
	    megadásával?</a></dt><dt>14.23. <a href="ppp.html#idp78718416">Valaki összeírta már a hasznosabb
	    portok sorszámait?</a></dt><dt>14.24. <a href="ppp.html#idp78758608">Mik azok az FCS hibák?</a></dt><dt>14.25. <a href="ppp.html#PPPoEwithNAT">A Mac OS(R) és Windows(R) 98 alól
	    indított kapcsolatok miért állnak le, ha
	    PPPoE fut az átjárón?</a></dt><dt>14.26. <a href="ppp.html#idp78834128">Ezek közül egyik sem használt -
	    segítség!  Mit lehetne még
	    tenni?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp78388432"></a><a id="userppp"></a><p><strong>14.1.</strong></p></td><td align="left" valign="top"><p>Nem mûködik a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>.  Mit lehet a
	    gond?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Elsõként mindenképpen olvassuk el a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> man oldalt és a kézikönyv
	    <a class="link" href="../../../../doc/hu_HU.ISO8859-2/books/handbook/ppp-and-slip.html#USERPPP" target="_top">PPP-vel</a>
	    foglalkozó részét.  A
	    következõ paranccsal engedélyezzük a
	    naplózást:</p><pre class="programlisting">set log Phase Chat Connect Carrier lcp ipcp ccp command</pre><p>Ezt a parancsot a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> parancssorában vagy
	    az <code class="filename">/etc/ppp/ppp.conf</code>
	    konfigurációs állományban kell
	    megadnunk (leginkább a <code class="literal">default</code>
	    szakasz elejére érdemes betennünk).
	    Gondoskodjunk róla, hogy az
	    <code class="filename">/etc/syslog.conf</code> állomány
	    (lásd <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">syslog.conf</span>(5)</span></a>) tartalmazza az
	    alábbi sort, illetve az
	    <code class="filename">/var/log/ppp.log</code> állomány
	    létezzen:</p><pre class="programlisting">!ppp
*.*        /var/log/ppp.log</pre><p>A napló segítségével
	    már több mindent ki tudunk deríteni a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> mûködésérõl.  Ne
	    aggódjunk, ha nem értünk belõle
	    semmit.  Kérjünk segítséget
	    másoktól, nekik minden bizonnyal
	    segíteni fog a probléma
	    felderítésében.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78406352"></a><a id="ppp-hangs"></a><p><strong>14.2.</strong></p></td><td align="left" valign="top"><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> miért bontja a vonalat, amikor
	    elindul?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ilyen általában azért
	    történik, mert nem tudta feloldani a
	    hálózati nevet.  Ezt a legkönnyebben
	    úgy tudjuk orvosolni, ha az
	    <code class="filename">/etc/host.conf</code> állományba
	    elõre rakjuk a <code class="literal">hosts</code> sort,
	    így a névfeloldó elõször az
	    <code class="filename">/etc/hosts</code> állománnyal
	    fog próbálkozni.  Ezután a
	    <code class="filename">/etc/hosts</code> állományba
	    vegyük fel a helyi gépet.  Ha nincs helyi
	    hálózatunk, akkor így írjuk
	    át a <code class="systemitem">localhost</code> sort:</p><pre class="programlisting">127.0.0.1        ize.minta.com ize localhost</pre><p>Minden más esetben egyszerûen csak
	    vegyünk fel egy újabb bejegyzést a
	    gépünkhöz.  Ennek pontosabb
	    részleteivel kapcsolatban nézzük meg a
	    megfelelõ man oldalakat.</p><p>Ha mindent jól csináltunk, akkor a
	    <code class="command">ping -c1 `hostname`</code> parancs hiba
	    nélkül tér vissza.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78412624"></a><a id="ppp-nodial-auto"></a><p><strong>14.3.</strong></p></td><td align="left" valign="top"><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> miért nem tárcsáz
	    <code class="literal">-auto</code> módban?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Elõször is ellenõrizzük, hogy
	    létezik az alapértelmezett útvonal.  A
	    <code class="command">netstat -rn</code> parancs (lásd
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netstat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">netstat</span>(1)</span></a>) kiadása után
	    nagyjából a következõ két
	    bejegyzést kell látnunk:</p><pre class="programlisting">Destination        Gateway            Flags     Refs     Use     Netif Expire
default            10.0.0.2           UGSc        0        0      tun0
10.0.0.2           10.0.0.1           UH          0        0      tun0</pre><p>Feltételezzük, hogy a
	    kézikönyvbõl, a man oldalról vagy
	    <code class="filename">ppp.conf.sample</code>
	    állományból másoltuk ki ezeket a
	    címeket.  Ha nincs alapértelmezett
	    útvonalunk, akkor annak az lehet az oka, hogy a
	    <code class="filename">ppp.conf</code> állományba
	    elfelejtettük felvenni a <code class="literal">HISADDR</code>
	    kulcsszót.</p><p>Az alapértelmezett útvonal
	    hiányának másik oka lehet még, ha
	    az <code class="filename">/etc/rc.conf</code>
	    állományban (lásd <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>)
	    beállítottunk egy alapértelmezett
	    átjárót, de elfelejtettük az
	    <code class="filename">ppp.conf</code> állományba
	    betenni a következõ sort:</p><pre class="programlisting">delete ALL</pre><p>Ebben az esetben menjünk vissza a
	    kézikönyv <a class="link" href="../../../../doc/hu_HU.ISO8859-2/books/handbook/userppp.html#USERPPP-FINAL" target="_top">A rendszer végsõ beállítása</a>
	    címû részéhez.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78426320"></a><a id="no-route-to-host"></a><p><strong>14.4.</strong></p></td><td align="left" valign="top"><p>Mit jelent a <span class="errorname">No route to host</span>
	    hibaüzenet?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Általában azért jelentkezik, mert
	    az <code class="filename">/etc/ppp/ppp.linkup</code>
	    állományban nem adtuk meg az
	    alábbiakat:</p><pre class="programlisting">MYADDR:
  delete ALL
  add 0 0 HISADDR</pre><p>Erre csak akkor van szükségünk, ha
	    dinamikus IP-címünk van, vagy nem ismerjük az
	    átjáró címét.  Ha az
	    interaktív módot használjuk, akkor
	    ehhez a következõket kell begépelni
	    csomag módba lépés után (a
	    csomag módot a csupa nagybetûs
	    <acronym class="acronym">PPP</acronym> jelzi a parancssorban):</p><pre class="programlisting">delete ALL
add 0 0 HISADDR</pre><p>A kézikönyv <a class="link" href="../../../../doc/hu_HU.ISO8859-2/books/handbook/userppp.html#USERPPP-DYNAMICIP" target="_top">A PPP és a dinamikus IP-címek</a>
	    címû részében olvashatunk
	    errõl bõvebben.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78440016"></a><a id="connection-threeminutedrop"></a><p><strong>14.5.</strong></p></td><td align="left" valign="top"><p>Miért szakad meg a kapcsolat 3 perc
	    után?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A PPP alrendszer alapértelmezett lejárati
	    ideje 3 perc.  Ezt a beállítást a
	    következõ sor megadásával tudjuk
	    módosítani:</p><pre class="programlisting">set timeout <em class="replaceable"><code>NNN</code></em></pre><p>ahol az <em class="replaceable"><code>NNN</code></em>
	    másodpercekben megadja a kapcsolat
	    lezárása elõtti inaktivitás
	    maximális idejét.  Ha az
	    <em class="replaceable"><code>NNN</code></em> értéke nulla,
	    akkor a kapcsolat idõtúllépés
	    miatt soha nem fog magától megszakadni.  Ezt a
	    parancsot a <code class="filename">ppp.conf</code>
	    állományba tudjuk felvenni, vagy
	    interaktív módban a parancssorban
	    gépelhetjük be.  Emellett menet közben is
	    állítani tudjuk ezt az értéket,
	    ha a <span class="application">ppp</span> szerverre a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">telnet</span>(1)</span></a> vagy a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pppctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pppctl</span>(8)</span></a>
	    segítségével rácsatlakozunk.
	    Errõl a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> man oldal ad részletesebb
	    tájékoztatást.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78451152"></a><a id="ppp-drop-heavy-load"></a><p><strong>14.6.</strong></p></td><td align="left" valign="top"><p>A kapcsolat miért szakad meg nagyobb
	    terhelést alatt?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ha beállítottuk a Link Quality Reporting
	    (LQR) használatát, akkor elõfordulhat,
	    hogy túlságosan sok csomag veszik el a
	    gépünk és a másik oldal
	    között.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> ezért a vonalat
	    rossznak érzékeli és bontja.  A
	    FreeBSD 2.2.5 változata elõtt az LQR
	    alapértelmezés szerint engedélyezett
	    volt.  Az LQR így tiltható le:</p><pre class="programlisting">disable lqr</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78454480"></a><a id="ppp-drop-random"></a><p><strong>14.7.</strong></p></td><td align="left" valign="top"><p>A kapcsolat miért szakad meg
	    véletlenszerûen?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Néha elõfordulhat, hogy a zajos telefonvonal
	    esetén vagy a
	    hívásvárakoztatás
	    használatakor a modem bontja a vonalat, mivel
	    (helytelenül) azt hiszi, hogy nincs kapcsolat.</p><p>Manapság a legtöbb modemen
	    általában be lehet valahogy
	    állítani, hogy mennyire legyenek
	    elnézõek a kapcsolat ideiglenes
	    megszakadásával szemben.
	    Például egy <span class="trademark">U.S. Robotics</span>(R) <span class="trademark">Sportster</span>(R)
	    esetén ezt tizedmásodpercekben mérik az
	    <code class="literal">S10</code> regiszter
	    segítségével.  A modemünk ilyenkor
	    tehát úgy tehetõ sokkal
	    toleránsabbá, ha a következõ
	    hívási beállítást
	    adjuk:</p><pre class="programlisting">set dial "...... ATS10=10 OK ......"</pre><p>További részleteket a modem
	    kézikönyvébõl tudhatunk meg.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78463312"></a><a id="ppp-hangs-random"></a><p><strong>14.8.</strong></p></td><td align="left" valign="top"><p>A kapcsolat miért fullad le
	    véletlenszerûen?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Sokan tapasztalják, hogy a kapcsolat minden
	    különösebb magyarázat nélkül
	    lefullad.  Ilyenkor elsõként azt érdemes
	    tisztázni, hogy az összeköttetés
	    melyik oldalán történt a vonal
	    bontása.</p><p>Ha belsõ modemet használunk, akkor
	    próbáljuk meg a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> paranccsal
	    ellenõrizni, hogy a modem <acronym class="acronym">TD</acronym>
	    lámpája villog-e az adatok
	    küldésekor.  Amennyiben igen (miközben az
	    <acronym class="acronym">RD</acronym> lámpa viszont nem), akkor a
	    gond a vonal másik végén lesz.  Ha
	    viszont a <acronym class="acronym">TD</acronym> nem villog, akkor a
	    probléma a mi oldalunkon áll fenn.  A
	    belsõ modemek esetében a
	    <code class="filename">ppp.conf</code> állományban a
	    <code class="literal">set server</code> parancsot is érdemes
	    megadnunk, így amikor a kapcsolat
	    leállását tapasztaljuk, a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pppctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pppctl</span>(8)</span></a> segítségével rá
	    tudunk csatlakozni a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> démonra.  Ha a
	    hálózati kapcsolat ekkor hirtelen erõre
	    kapna (mivel rácsatlakoztunk
	    kívülrõl) vagy egyáltalán nem
	    tudunk csatlakozni (feltételezve, hogy a <code class="literal">set
	    socket</code> parancs sikeresen lefutott az
	    induláskor), akkor a probléma még
	    mindig nálunk lesz.  Ha viszont sikerül
	    csatlakoznunk és a vonallal még mindig gondok
	    vannak, akkor próbáljuk a <code class="literal">set log
	    local async</code> parancs használatával
	    engedélyezni a helyi aszinkron
	    naplózást, majd egy másik
	    konzolból a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> parancs
	    segítségével kezdjük el
	    használni az összeköttetést.  Az
	    aszinkron naplózás jelezni fogja, ha
	    sikerül adatokat átvinni és fogadni a
	    kapcsolaton keresztül.  Ha ilyenkor nem látunk
	    visszafele érkezõ adatokat, akkor az arra utal,
	    hogy a gond a vonal távoli végén
	    van.</p><p>Miután sikeresen kiderítettük, hogy
	    az adott probléma helyi vagy távoli, két
	    lehetõségünk van:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Amennyiben távoli, olvassuk el a <a class="xref" href="ppp.html#ppp-remote-not-responding" title="14.9.">K: 14.9</a>
		  válaszát.</p></li><li class="listitem"><p>Amennyiben helyi, olvassuk el a <a class="xref" href="ppp.html#ppp-hung" title="14.10.">K: 14.10</a> válaszát.</p></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78474832"></a><a id="ppp-remote-not-responding"></a><p><strong>14.9.</strong></p></td><td align="left" valign="top"><p>A vonal túlsó végérõl
	    nem érkezik válasz.  Mi lehet tenni?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ezzel szemben nagyon keveset tudunk mi,
	    felhasználók tenni.  A legtöbb
	    internetszolgáltató egyszerûen nem
	    hajlandó segítséget nyújtani
	    abban az esetben, ha nem valamelyik <span class="trademark">Microsoft</span>(R)
	    operációs rendszert használjuk.  A
	    <code class="filename">ppp.conf</code> állományunkban a
	    <code class="literal">enable lqr</code> sor megadásával
	    engedélyezni tudjuk a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    számára, hogy észlelhesse a
	    távoli hibákat és bontsa a vonalat, de
	    ez a vizsgálat viszonylag idõigényes
	    és ennélfogva nem túlságosan
	    hasznos.  A szolgáltatónknak pedig ne nagyon
	    emlegessük, hogy felhasználói PPP-t
	    futtatunk.</p><p>Elõször próbáljunk meg letiltani
	    mindenféle tömörítést a
	    következõ sor megadásával:</p><pre class="programlisting">disable pred1 deflate deflate24 protocomp acfcomp shortseq vj
deny pred1 deflate deflate24 protocomp acfcomp shortseq vj</pre><p>Kapcsolódjunk újra és
	    ellenõrizzük, hogy továbbra is
	    mûködõképes a kapcsolat.  Ha ennek
	    hatására javul a helyzet vagy a
	    probléma teljesen megoldódik, akkor a
	    beállítások egyenkénti
	    próbálgatásával keressük
	    meg, hogy melyik okozta a gondot.  Ez már
	    elegendõ lesz ahhoz, hogy komolyabban felvegyük a
	    kapcsolatot a szolgáltatónkkal (habár
	    ebbõl gyorsan ki fog derülni, hogy nem <span class="trademark">Microsoft</span>(R)
	    terméket használunk).</p><p>Mielõtt szólnánk a
	    szolgáltatónknak, a gépünkön
	    engedélyezzük az aszinkron
	    naplózást és várjuk meg,
	    amíg a kapcsolat újra megszakad.  Erre nem
	    árt felkészülnünk, mert viszonylag
	    sok tárhelyet igényel.  Innen majd a
	    portról utoljára olvasott adat lesz a
	    lényeges.  Ez általában szöveges
	    adat és akár a probléma konkrét
	    okára is utalhat (<span class="errorname">Memory
	    fault</span>, <span class="errorname">Core
	    dumped</span>?).</p><p>Ha segítõkész
	    szolgáltatót választottuk, akkor a
	    naplózást akár az õ oldalunkon is
	    engedélyezhetjük, így amikor a vonal
	    megszakad, az õ szemszögükbõl is
	    képesek leszünk elemezni a
	    problémát.  Ilyen esetben nyugodtan
	    küldjünk egy levelet Brian Somers
	    címére vagy kérjük meg a
	    szolgáltatónkat, hogy közvetlenül
	    vele tárgyaljon.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78482384"></a><a id="ppp-hung"></a><p><strong>14.10.</strong></p></td><td align="left" valign="top"><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> teljesen megállt.  Mi lehet
	    tenni?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A legjobban úgy járunk, ha a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    programot nyomkövetési
	    információkkal fordítjuk újra,
	    majd a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gdb&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gdb</span>(1)</span></a> segítségével
	    lekérünk egy hívási láncot
	    az éppen megakadt <span class="application">ppp</span>
	    példánytól.  A
	    <span class="application">ppp</span> alkalmazást a
	    következõ parancsokkal tudjuk úgy
	    újrafordítani, hogy tartalmazza a
	    kívánt információkat:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gdb ppp `pgrep ppp`</code></strong></pre><p>Ezt követõen a <span class="application">gdb</span>
	    parancssorában a <code class="command">bt</code> és
	    <code class="command">where</code> parancsok
	    segítségével hozzá tudunk jutni
	    a hívási lánchoz.  Mentsük el
	    valahova a <span class="application">gdb</span> által
	    kinyert adatokat, majd a <code class="command">detach</code>
	    paranccsal váljunk le a futó programról
	    és a <code class="command">quit</code>
	    begépelésével lépjünk ki a
	    <span class="application">gdb</span> programból.</p><p>Végezetül az elmentett eredményeket
	    küldjük el Brian Somers címére.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78500432"></a><a id="ppp-loginok-thennothing"></a><p><strong>14.11.</strong></p></td><td align="left" valign="top"><p>Miért nem történik semmi a
	    <span class="quote">"<span class="quote">Login OK!</span>"</span> üzenet után?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A FreeBSD 2.2.5 elõtti kiadásaiban a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> az összeköttetés
	    létrejötte után megvárta, hogy a
	    távoli pont kezdeményezze a
	    kapcsolatvezérlõ protokoll (Line Control
	    Protocol, LCP) használatát.  Sok
	    szolgáltató azonban nem csinál ilyet,
	    ehelyett inkább a klienstõl várják
	    mindezt.  Az LCP kezdeményezését
	    így kényszeríthetjük ki a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> használata során:</p><pre class="programlisting">set openmode active</pre><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">Általában semmilyen gond nem
		származik abból, ha a mind a két
		oldal kezdeményez, így az
		<code class="varname">openmode</code> alapértelmezés
		szerint <code class="literal">active</code>
		értékû.  A következõ
		szakaszban azonban bemutatjuk mikor <span class="emphasis"><em>gondot
		okoz</em></span> a használata.</p></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78506704"></a><a id="ppp-same-magic"></a><p><strong>14.12.</strong></p></td><td align="left" valign="top"><p>Folyamatosan <span class="errorname">Magic is same</span>
	    hibák jelennek meg.  Ez mire utal?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Csatlakozás után idõnként
	    elõfordulhat, hogy <span class="errorname">magic is the
	    same</span> hibaüzeneteket látunk a
	    naplóban.  Ezek az üzenetek bizonyos esetekben
	    teljesen ártalmatlanok, máskor viszont
	    akár komolyabb problémákat is jelezhet.
	    A legtöbb PPP implementáció nem él
	    túl egy ilyen hibát, és még ha
	    látszólag létre is jön ilyenkor a
	    kapcsolat, folyamatosan konfigurációs
	    kérések és válaszok
	    jönnek-mennek a naplóban egészen addig,
	    amíg a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> végül fel nem adja
	    és lezárja a kapcsolatot.</p><p>Ez általában olyan szervereken jelenik
	    meg, ahol nem elég gyorsak a lemezek és minden
	    kapcsolathoz elindítanak egy <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a> és
	    a bejelentkezéskor vagy azt következõ
	    elindítják a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> programot.  Egyes
	    visszajelzések szerint ilyen egyébként
	    gyakran elõfordul a slirp használatakor.  A
	    problémát egyébként a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a> és a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> indítása
	    között eltelt idõ okozza, amikor a kliens
	    oldalán futó <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> elkezdi küldeni
	    a kapcsolatvezérlõ (Line Control Protocol, LCP)
	    csomagokat.  Mivel ilyenkor az ECHO még mindig
	    aktív a szerver adott portján, a kliens
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> a saját csomagjainak
	    <span class="quote">"<span class="quote">tükrözõdését</span>"</span>
	    fogja látni.</p><p>Az LCP beállításának
	    része az összeköttetés két
	    oldalán egy-egy bûvös szám
	    (<span class="quote">"<span class="quote">magic number</span>"</span>)
	    megállapítása, amellyel ezután
	    észlelhetõek az ilyen
	    <span class="quote">"<span class="quote">tükrözõdések</span>"</span>.  A
	    protokoll szerint amikor a két pont
	    megpróbálja ugyanazt a bûvös
	    számot használni, akkor visszautasítja
	    (NAK jelzést küld) és egy másikat
	    választ.  Ha ilyenkor még a szerver
	    portján aktív az ECHO, akkor a kliens oldali
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> azt tapasztalja, hogy elkezd LCP csomagokat
	    küldeni, majd mivel ugyanazt kapja vissza, erre egy NAK
	    jelzést válaszol.  Ugyanígy
	    látja magát a NAK jelzést (aminek
	    hatására a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> megváltoztatja a
	    bûvös számát) is.  Ennek
	    eredményeképpen hirtelen nagy
	    mennyiségû
	    bûvösszám-váltás keletkezik,
	    ami pedig szépen felhalmozódik a szerver
	    terminálpufferében.  Ahogy a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    végre elindul a szerveren, elönti ez a rengeteg
	    információ, aminek alapján
	    sikertelennek ítéli meg az LCP
	    beállítását és feladja a
	    további próbálkozást.
	    Eközben a kliens számára megszûnnek
	    a visszaverõdõ csomagok és csak annyit
	    lát, hogy a szerver bontja a kapcsolatot.</p><p>Ezt úgy tudjuk elkerülni, ha a
	    <code class="filename">ppp.conf</code> állományban a
	    távoli pontra bízzuk az
	    beállítás
	    kezdeményezését:</p><pre class="programlisting">set openmode passive</pre><p>Ennek hatására a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    megvárja, hogy a szerver kezdeményezze az LCP
	    beállítását.  Egyes szerverek
	    azonban sosem teszik meg ezt.  Ilyenkor valami ilyesmit
	    tudunk tenni:</p><pre class="programlisting">set openmode active 3</pre><p>Így a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> 3 másodpercig
	    passzív marad, majd csak ezután kezd el LCP
	    kérésket küldeni.  Ha a távoli
	    pont eközben küld valamilyen kérést,
	    az <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> azonnal válaszol rá és
	    nem várja végig a 3 másodperces
	    idõtartamot.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78536272"></a><a id="ppp-lcp-constant"></a><p><strong>14.13.</strong></p></td><td align="left" valign="top"><p>Az LCP beállítása egészen a
	    kapcsolat befejezõdéséig
	    folytatódik.  Mi lehet a probléma?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> programban jelenleg van egy olyan
	    hibásan implementált jellemzõ, ahol az LCP,
	    CCP és IPCP válaszokat nem
	    társítja az eredeti kérésekhez.
	    Ennek következményeképpen, ha az egyik
	    PPP implementáció 6 másodperccel
	    lassabb a másik oldalnál, akkor az még
	    két további LCP konfigurációs
	    kérést is küld, ami viszont
	    végzetesnek bizonyul.</p><p>Vegyünk például két
	    implementációt, az <code class="systemitem">A</code> és
	    a <code class="systemitem">B</code> pontokat.  Az <code class="systemitem">A</code>
	    már közvetlenül a csatlakozás
	    után LCP kéréseket kezd el
	    küldeni, miközben a <code class="systemitem">B</code> csak
	    7 másodperc múlva tud elindulni.  Mire
	    végre a <code class="systemitem">B</code> pont is elindul, addigra
	    az <code class="systemitem">A</code> már kiküldött 3 LCP
	    kérést.  Most feltételezzük, hogy
	    nincs ECHO, máskülönben az elõzõ
	    szakaszban leírt, bûvös számokkal
	    kapcsolatos problémába
	    ütköznénk.  A <code class="systemitem">B</code> ekkor
	    tehát küld egy kérést, majd
	    nyugtázza az <code class="systemitem">A</code> ponttól kapott
	    korábbi kérést.  Ennek
	    hatására az <code class="systemitem">A</code> pont
	    <acronym class="acronym">OPENED</acronym> állapotba megy át,
	    újra küld és nyugtázza az
	    elõzõ kérést <code class="systemitem">B</code>
	    felé.  Eközben a <code class="systemitem">B</code>
	    további két nyugtázást küld
	    az <code class="systemitem">A</code> pontról kapott további
	    két kérésre, a <code class="systemitem">B</code>
	    indulása elõttrõl.  A <code class="systemitem">B</code>
	    ekkor megkapja az <code class="systemitem">A</code> elsõ
	    nyugtáját és átvált
	    <acronym class="acronym">OPENED</acronym> állapotba.  Az
	    <code class="systemitem">A</code> ekkor megkapja a második
	    nyugtát a <code class="systemitem">B</code> ponttól és
	    visszavált <acronym class="acronym">REQ-SENT</acronym>
	    állapotba, majd az RFC szerint elküld
	    (elõre) egy újabb kérést.  Ekkor
	    megkapja a harmadik nyugtát és
	    <acronym class="acronym">OPENED</acronym> állapotba vált.
	    Eközben a <code class="systemitem">B</code> megkapja elõre
	    küldött kérést a <code class="systemitem">A</code>
	    ponttól, amelynek hatására
	    <acronym class="acronym">ACK-SENT</acronym> állapotba vált
	    vissza, és az RFC szerint ismét küld egy
	    (második) kérést és egy
	    nyugtázást.  Az <code class="systemitem">A</code> erre
	    megkapja a kérést, visszavált
	    <acronym class="acronym">REQ-SENT</acronym> állapotban és
	    küld egy újabb kérést.  Ekkor
	    közvetlenül megkapja a
	    rákövetkezõ nyugtázást
	    és átvált <acronym class="acronym">OPENED</acronym>
	    állapotba.</p><p>Ez egészen addig folytatódik, amíg
	    az egyik oldal rá nem eszmél, hogy ennek nincs
	    túlságosan sok értelme és
	    feladja a próbálkozást.</p><p>Ez legkönnyebben úgy kerülhetõ el,
	    ha ilyenkor az egyik oldalt <code class="literal">passive</code>
	    típusúra állítjuk, vagyis az
	    egyik oldalon várunk egy keveset a
	    beállítás
	    kezdeményezésére.  Ezt a
	    következõ paranccsal lehet megoldani:</p><pre class="programlisting">set openmode passive</pre><p>Óvatosan bánjunk ezzel a
	    paraméterrel!  A beállítás
	    kezdeményezésének
	    várakoztatási idejét a
	    következõ paraméterrel tudjuk
	    megadni:</p><pre class="programlisting">set stopped <em class="replaceable"><code>N</code></em></pre><p>Használhatjuk viszont ezt a parancsot is (ahol
	    <em class="replaceable"><code>N</code></em> adja meg, hogy mennyi
	    másodperc teljen el a beállítás
	    megkezdése elõtt):</p><pre class="programlisting">set openmode active <em class="replaceable"><code>N</code></em></pre><p>Az ezzel kapcsolatos további részleteket a
	    man oldalon olvashatjuk.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78562896"></a><a id="ppp-shell-test-lockup"></a><p><strong>14.14.</strong></p></td><td align="left" valign="top"><p>Miért akad meg a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>, ha egy
	    külsõ parancsot adunk ki alatta?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A <code class="command">shell</code> vagy <code class="command">!</code>
	    parancsok végrehajtásakor a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    elindít egy parancsértelmezõt (illetve ha
	    paramétereket is adtunk meg, akkor a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    átadja azokat is), majd megvárja annak
	    befejezõdését.  Ha a parancs
	    futtatása közben éppen egy PPP
	    kapcsolatot akartunk használni, akkor erre az
	    idõre az elõbbiek miatt látszólag
	    meg fog állni.  Ez tehát azért
	    történik, mert a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> megvárja a
	    parancs lefutását.</p><p>Ha nem akarjuk megvárni a parancs
	    befejezõdését, akkor inkább
	    használjuk a <code class="command">!bg</code> parancsot.  Ennek
	    hatására az adott parancs a
	    háttérben fog lefutni és a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    képes lesz folyamatosan szemmel tartani az
	    összeköttetést.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78574544"></a><a id="ppp-null-modem"></a><p><strong>14.15.</strong></p></td><td align="left" valign="top"><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> null-modem kábel
	    használatakor miért nem lép ki
	    soha?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> ilyen esetekben nem képes
	    magától megállapítani, hogy mikor
	    bontották a vonalat.  Ennek oka a tûk null-modem
	    kábelben kiosztott szerepében keresendõ.
	    Amikor ilyen típusú kapcsolattal dolgozunk, a
	    következõ sor megadásával ne
	    felejtsük el engedélyezni az LQR
	    használatát:</p><pre class="programlisting">enable lqr</pre><p>Ha a távoli pont LQR csomagokat küld, akkor
	    a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> alapértelmezés szerint fogadja
	    azokat.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78579664"></a><a id="ppp-auto-noreasondial"></a><p><strong>14.16.</strong></p></td><td align="left" valign="top"><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> miért tárcsáz
	    látszólag minden különösebb ok
	    nélkül <code class="option">-auto</code>
	    módban?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Amennyiben a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> szándékainkkal
	    szemben váratlanul kezdene el tárcsázni,
	    akkor keressük meg kiváltó okát
	    és használjunk hívási
	    szûrést (Dial filter, dfilter) ennek
	    megelõzésére.</p><p>A tárcsázás okát a
	    következõ sor használatával tudjuk
	    kideríteni:</p><pre class="programlisting">set log +tcp/ip</pre><p>Ennek hatására a kapcsolaton
	    keresztüláramló összes forgalmat
	    naplózni fogjuk.  Így a legközelebb,
	    amikor a vonal hirtelen aktív lesz, a
	    hozzá tartozó idõbélyegek
	    alapján könnyen elõ tudjuk keresni, hogy
	    pontosan miért is történt.</p><p>Az automatikus tárcsázást bizonyos
	    esetekben le tudjuk tiltani.  Ez általában egy
	    olyan probléma, amely a névfeloldások
	    miatt keletkezik.  Úgy tudjuk megakadályozni,
	    hogy a névfeloldások
	    felépítsék a kapcsolatot (ami viszont
	    <span class="emphasis"><em>nem</em></span> gátolja abban a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    programot, hogy egy már meglevõ kapcsolaton
	    keresztül küldjön ilyen csomagokat), ha az
	    alábbi beállításokat adjuk
	    meg:</p><pre class="programlisting">set dfilter 1 deny udp src eq 53
set dfilter 2 deny udp dst eq 53
set dfilter 3 permit 0/0 0/0</pre><p>Ezek az értékek nem minden esetben
	    megfelelõek számunkra, hiszen ezzel együtt az
	    igény szerinti tárcsázás
	    kényelmét is szûkítjük, mivel
	    a legtöbb program közvetlenül
	    névfeloldással kezd, mielõtt komolyabb
	    hálózati forgalmat bonyolítana
	    le.</p><p>A névfeloldás esetében
	    igyekezzünk kideríteni, hogy pontosan melyik
	    program is próbál hálózati
	    neveket feloldatni.  Az esetek
	    többségében
	    valószínûleg a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> lesz a
	    bûnös.  Amennyiben ez a helyzet, akkor az
	    <span class="application">sendmail</span> démonnak a
	    saját konfigurációs
	    állományában kell
	    beállítanunk, hogy ne oldasson fel
	    hálózati neveket.  Az érintett
	    konfigurációs állomány
	    módosításának pontos
	    részleteirõl a kézikönyv <a class="link" href="../../../../doc/hu_HU.ISO8859-2/books/handbook/smtp-dialup.html" target="_top">Levelezés
	      betárcsázós kapcsolattal</a>
	    címû szakszában olvashatunk
	    bõvebben.  Továbbá az
	    <code class="filename">.mc</code> állományunkba a
	    következõ sort is érdemes
	    felvennünk:</p><pre class="programlisting">define(`confDELIVERY_MODE', `d')dnl</pre><p>Ezzel a <span class="application">sendmail</span>
	    beindításáig mindent egy sorban fog
	    eltárolni (általában a
	    <span class="application">sendmail</span> démont a
	    <code class="option">-bd -q30m</code> paraméterekkel
	    szokták meghívni, ami arra utasítja,
	    hogy 30 percenként dolgozza fel a sorát)
	    vagy amíg a <code class="command">sendmail
	    -q</code> parancs le nem fut
	    (például a <code class="filename">ppp.linkup</code>
	    állományból).</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78600784"></a><a id="ccp-errors"></a><p><strong>14.17.</strong></p></td><td align="left" valign="top"><p>Mit jelentenek a CCP hibák?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A naplóban folyamatosan a következõ
	    üzeneteket lehet látni:</p><pre class="programlisting">CCP: CcpSendConfigReq
CCP: Received Terminate Ack (1) state = Req-Sent (6)</pre><p>Ilyenek azért keletkeznek, mert a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> a
	    <code class="literal">Predictor1</code>
	    tömörítési eljárást
	    próbálja meg beállítani, azonban
	    a távoli pont egyáltalán semmilyen
	    tömörítést nem akar
	    használni.  Az ilyen üzenetek többnyire
	    ártalmatlanok, de ha el akarjuk tüntetni ezeket,
	    akkor próbáljuk meg a következõ
	    módon kikapcsolni a <code class="literal">Predictor1</code>
	    tömörítés
	    használatát:</p><pre class="programlisting">disable pred1</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78605520"></a><a id="ppp-connectionspeed"></a><p><strong>14.18.</strong></p></td><td align="left" valign="top"><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> miért nem naplózza a
	    kapcsolat sebességét?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A modemmel végzett teljes
	    <span class="quote">"<span class="quote">beszélgetés</span>"</span>
	    szövegének
	    rögzítéséhez a
	    következõket kell engedélyezni:</p><pre class="programlisting">set log +connect</pre><p>Ennek eredményeképpen a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    egészen az utolsóként lekért
	    karakterláncig naplóz mindent.</p><p>Ha PAP vagy CHAP hitelesítést
	    használunk (ezért a <code class="literal">CONNECT</code>
	    parancs kiadása után már nincs semmi
	    <span class="quote">"<span class="quote">mondanivalónk</span>"</span> a
	    hívószkriptben, tehát nincs
	    <code class="literal">set login</code> szkript), és
	    szeretnénk látni a csatlakozási
	    sebességet, ne felejtsük el utasítani a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> programot, hogy a teljes
	    <code class="literal">CONNECT</code> sort kérje le, valahogy
	    így:</p><pre class="programlisting">set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 4 \
  \"\" ATZ OK-ATZ-OK ATDT\\T TIMEOUT 60 CONNECT \\c \\n"</pre><p>Itt most megkapjuk a <code class="literal">CONNECT</code> sort,
	    ezután nem küldünk semmit, majd
	    várunk egy soremelést, aminek
	    hatására a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> arra
	    kényszerül, hogy a teljes
	    <code class="literal">CONNECT</code> választ beolvassa.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78623824"></a><a id="ppp-ignores-backslash"></a><p><strong>14.19.</strong></p></td><td align="left" valign="top"><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> miért hagyja figyelmen
	    kívül a <code class="literal">\</code> karaktereket a
	    szkriptekben?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A <span class="application">ppp</span> a
	    konfigurációs állományokból
	    minden sort külön beolvas, ezért a
	    <code class="literal">set phone "123 456 789"</code> és
	    hozzá hasonló karakterláncok
	    esetén képes felismerni, hogy a megadott
	    számok valójában
	    <span class="emphasis"><em>egyetlen</em></span> paramétert
	    formáznak.  A <code class="literal">"</code>
	    megadásához a visszaper karaktert
	    (<code class="literal">\</code>) kell használnunk.</p><p>Amikor tárcsázásért
	    felelõs értelmezõ beolvassa az egyes
	    paramétereket, újraértelmezi ezeket
	    olyan speciális helyettesítési
	    szekvenciák után kutatva, mint
	    például a <code class="literal">\P</code> vagy
	    <code class="literal">\T</code> (részletesebben lásd a
	    man oldalon).  A kettõs elemzés miatt
	    nekünk is a megfelelõ számban kell
	    megadnunk ezeket a helyettesítendõ
	    karaktereket.</p><p>Ha tehát egy <code class="literal">\</code> karaktert
	    szeretnénk átküldeni a modemünknek,
	    akkor nagyjából valami ilyesmit kellene
	    írnunk:</p><pre class="programlisting">set dial "\"\" ATZ OK-ATZ-OK AT\\\\X OK"</pre><p>Ennek az eredménye a következõ
	    lesz:</p><pre class="programlisting">ATZ
OK
AT\X
OK</pre><p>Vagy:</p><pre class="programlisting">set phone 1234567
set dial "\"\" ATZ OK ATDT\\T"</pre><p>Ez pedig a következõ szekvenciát
	    adja:</p><pre class="programlisting">ATZ
OK
ATDT1234567</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78633552"></a><a id="ppp-segfault-nocore"></a><p><strong>14.20.</strong></p></td><td align="left" valign="top"><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> miért küld
	    <span class="errorname">Segmentation Fault</span> hibát,
	    miközben nem is keletkezik
	    <code class="filename">ppp.core</code> állomány?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A <span class="application">ppp</span> (vagy más
	    hasonló program) elméletileg soha nem hoz
	    létre <code class="filename">.core</code>
	    állományt.  Mivel a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    tulajdonképpen a nullás
	    felhasználói azonosítóval fut,
	    az operációs rendszer soha nem fogja a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> memórialenyomatát
	    leállítása elõtt a lemezre
	    menteni.  Ha viszont <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> mûködése
	    valóban leáll egy szegmentációs
	    hiba vagy bármilyen más
	    <code class="filename">.core</code> állományt
	    eredményezõ jelzés miatt,
	    <span class="emphasis"><em>és</em></span> valóban a legfrissebb
	    változatát használjuk (lásd a
	    fejezet elejét), akkor a következõt
	    tehetjük:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.sbin/ppp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>echo STRIP= &gt;&gt; /etc/make.conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>echo CFLAGS+=-g &gt;&gt; /etc/make.conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>A fenti parancsokkal telepíteni tudjuk a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> egy nyomonkövethetõ
	    változatát.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    futtatásához <code class="systemitem">root</code>
	    felhasználónak kell lennünk, mivel minden
	    korábbi engedélyét
	    felülírtuk az elõbbiek során.  A
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> indításakor ne felejtsük el
	    megjegyezni pontosan az aktuális
	    könyvtárat sem.</p><p>Innentõl kezdve, amikor a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> kap egy
	    szegmentációs hibára vonatkozó
	    jelzést, létre fog hozni egy
	    <code class="filename">ppp.core</code> nevû
	    állományt.  Ennek birtokában a
	    következõt kell csinálnunk:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>gdb /usr/sbin/ppp ppp.core</code></strong>
<code class="prompt">(gdb)</code> <strong class="userinput"><code>bt</code></strong>
.....
<code class="prompt">(gdb)</code> <strong class="userinput"><code>f 0</code></strong>
....
<code class="prompt">(gdb)</code> <strong class="userinput"><code>i args</code></strong>
....
<code class="prompt">(gdb)</code> <strong class="userinput"><code>l</code></strong>
.....</pre><p>Az így beszerzett információkat
	    mellékelve nagyobb
	    valószínûséggel kaphatunk
	    választ az ezzel kapcsolatos
	    kérdésünkre.</p><p>Ha járatosak vagyunk a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gdb&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gdb</span>(1)</span></a>
	    használatában, akkor a
	    <code class="filename">.core</code> állományban
	    további részletek és
	    információk utáni is kutathatunk,
	    például mi okozta a hibát, milyen
	    változóknak ekkor milyen értékei
	    voltak stb.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78664272"></a><a id="ppp-autodialprocess-noconnect"></a><p><strong>14.21.</strong></p></td><td align="left" valign="top"><p>Miért nem csatlakozik soha az a program, amely a
	    hívást kezdeményezte
	    <code class="option">-auto</code> módban?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ez korábban egy ismert probléma volt a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> használatával kapcsolatban, amikor
	    dinamikus helyi IP-címet akart
	    beállítani <code class="option">-auto</code>
	    módban.  Ez a hiba az újabb
	    változatokban már nem nincs meg (a man oldalon
	    keressünk rá az <code class="literal">iface</code>
	    részre).</p><p>A gondot az okozta, hogy amikor a
	    tárcsázást elindító
	    program meghívja a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=connect&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">connect</span>(2)</span></a>
	    rendszerhívást, akkor a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tun&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">tun</span>(4)</span></a>
	    interfészhez tartozó IP-cím a
	    végpontot képviselõ sockethez
	    társul.  A rendszermag létrehozza az elsõ
	    kimenõ csomagot és kiírja a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tun&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">tun</span>(4)</span></a>
	    eszközre.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> ekkor beolvassa a csomagot
	    és felépíti a kapcsolatot.  Ha a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> dinamikus IP-cím
	    kiosztásának eredményeképpen
	    ilyenkor az interfész címe megváltozik,
	    akkor azzal egyidõben az eredeti socket végpont
	    érvénytelenné válik.  Így
	    a távoli végpont felé küldött
	    további csomagok általában
	    eldobódnak.  Ha valahogy mégis
	    eljutnának a céljukhoz, a válasz
	    már semmiképpen sem érkezhet meg, mivel
	    a küldéshez használt IP-címnek
	    már nem az adott gép a tulajdonosa.</p><p>Számos elméleti
	    megközelítés létezik az
	    imént felvázolt probléma
	    megoldására.  A legszebb az lenne, ha a
	    távoli pont lehetõség szerint a
	    korábban használt IP-címet
	    osztaná ki újra.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> jelenlegi
	    változata pontosan ugyanezt teszi, viszont a
	    legtöbbi implementáció már
	    nem.</p><p>Részünkrõl az bizonyulna a
	    legegyszerûbb megoldásnak, ha a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tun&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">tun</span>(4)</span></a>
	    intefész IP-címe egyáltalán nem
	    változhatna meg, hanem helyette menet közben az
	    összes kimenõ csomag, köztük
	    természetesen a forrás IP-címe az
	    interfész IP-címérõl az
	    idõközben beállított IP-címre
	    változna.  Ez lényegében az, amit a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> legújabb változataiban
	    felbukkanó <code class="literal">iface-alias</code>
	    opció is csinál (a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=libalias&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">libalias</span>(3)</span></a> és
	    a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> <code class="option">-nat</code> kapcsolója
	    segítségével): karbantartja az
	    összes korábban használt interfész
	    címét és átfordítja
	    ezeket az utoljára beállított
	    címre.</p><p>A másik (és
	    valószínûleg a sokkal
	    megbízhatóbb) lehetõség egy olyan
	    rendszerhívás implementálása
	    lenne, amely képes az összes használatban
	    levõ socketet egyik IP-címrõl a
	    másik IP-címre
	    átállítani.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> ekkor fel
	    tudná használni ezt arra, hogy
	    módosítsa az összes addig futó
	    program socketjét az új IP-cím
	    beállításakor.  Ugyanezzel a
	    rendszerhívással a <acronym class="acronym">DHCP</acronym>
	    kliensek is képesek lennének
	    átállítani a socketjeiket.</p><p>Lehetõségünk van még
	    IP-cím nélkül is létrehozni
	    interfészeket.  A kimenõ csomagok ekkor a
	    <code class="systemitem">255.255.255.255</code>
	    IP-címet használnák egészen
	    addig, amíg az elsõ
	    <code class="literal">SIOCAIFADDR</code> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ioctl&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">ioctl</span>(2)</span></a>
	    rendszerhívás le nem zajlik.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    feladata ilyenkor a forrás IP-cím
	    megváltoztatása, de ha ez <code class="systemitem">255.255.255.255</code>, akkor egyedül
	    csak az IP-címnek és az
	    ellenõrzõösszegnek kell megváltoznia.
	    Ez viszont már valamilyen mértékben
	    trükközést a rendszermagon belül,
	    mivel így könnyen tudunk csomagokat küldeni
	    egy rosszul beállított interfészre is,
	    feltételezve, hogy valamilyen módon
	    képesek vagyunk ilyeneket visszamenõleg
	    helyreállítani.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78691152"></a><a id="ppp-nat-games"></a><p><strong>14.22.</strong></p></td><td align="left" valign="top"><p>A legtöbb játék miért nem
	    mûködik a <code class="option">-nat</code> kapcsoló
	    megadásával?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A játékok és a hozzájuk
	    hasonló alkalmazások általában
	    azért nem mûködnek, amikor a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=libalias&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">libalias</span>(3)</span></a> könyvtárat használjuk,
	    mert a távoli gép megpróbál
	    kapcsolódni a belsõ hálózatunkon
	    levõ géphez és kéretlen UDP
	    csomagokat kezd el küldeni neki.  A
	    címfordítást végzõ
	    programnak fogalma sincs róla, hogy ezeket a
	    csomagokat egy belsõ gépnek kell
	    továbbküldenie.</p><p>Akkor lehetünk biztosak ebben, ha egyedül csak
	    azt a szoftvert indítjuk el, amellyel gondjaink
	    akadtak, majd a vagy az átjáró
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tun&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">tun</span>(4)</span></a> interfészét kezdjük el a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcpdump</span>(1)</span></a> segítségével, vagy
	    pedig engedélyezzük az
	    átjárón a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> TCP/IP
	    naplózó funkcióját (<code class="literal">set
	    log +tcp/ip</code>).</p><p>Ahogy elindítjuk a gondokat okozó
	    programot, látnunk kell a csomagjait, ahogy
	    megpróbálnak keresztüljutni az
	    átjárón.  Az erre érkezõ
	    válaszolok eldobódnak (ez jelenti a
	    problémát).  Jegyezzük fel a csomagokhoz
	    társuló portszámokat és
	    állítsuk el a programot.  Csináljuk meg
	    néhányszor ezt a vizsgálatot,
	    így ellenõrizni tudjuk, hogy mindig ugyanazokat
	    a portokat használja-e.  Amennyiben úgy
	    tapasztaljuk, hogy igen, akkor az
	    <code class="filename">/etc/ppp/ppp.conf</code>
	    állományba a következõ sort kell
	    betenni a megfelelõ helyre a mûködés
	    helyreállításához:</p><pre class="programlisting">nat port <em class="replaceable"><code>protokoll</code></em> <em class="replaceable"><code>belsõ-gép</code></em>:<em class="replaceable"><code>port</code></em> <em class="replaceable"><code>port</code></em></pre><p>ahol a <em class="replaceable"><code>protokoll</code></em> lehet
	    <code class="literal">tcp</code> vagy <code class="literal">udp</code>, a
	    <em class="replaceable"><code>belsõ-gép</code></em> annak a
	    gépnek a címe, ahova tovább akarjuk
	    küldeni a csomagokat, valamint a
	    <em class="replaceable"><code>port</code></em> a csomagok
	    célportját adja meg.</p><p>A fenti parancs megváltoztatása
	    nélkül nem tudjuk ugyanezt a szoftvert más
	    gépeken is használni, és itt azzal most
	    nem is foglalkozunk, hogy miként lehet két
	    belsõ géprõl használni ugyanazt a
	    programot.  Mindenesetre annyi biztos, hogy a
	    külvilág felé a belsõ
	    hálózatunk csupán egyetlen
	    gépnek fog látszani.</p><p>Ha azt látjuk, hogy az alkalmazás nem
	    mindig ugyanazt a portot használja, akkor három
	    választási lehetõségünk
	    van:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Készítsük el a
		támogatását a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=libalias&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">libalias</span>(3)</span></a>
		függvénykönyvtárhoz.  A
		különbözõ
		<span class="quote">"<span class="quote">szélsõséges esetekre</span>"</span> a
		<code class="filename">/usr/src/sys/netinet/libalias/alias_*.c</code>
		állományokban találhatunk
		példákat (az
		<code class="filename">alias_ftp.c</code> tökéletes
		kiindulási alap).  Ez általában
		annyit jelent, hogy beolvasunk bizonyos ismert
		kimenõ csomagokat, beazonosítjuk benne azt
		az utasítást, amelynek
		hatására a külsõ gép
		csatlakozni próbál a belsõ
		géphez egy adott (véletlenszerûen
		választott) porton, majd beállítunk
		hozzá egy <span class="quote">"<span class="quote">útvonalat</span>"</span>,
		így a rákövetkezõ csomagok
		már tudni fogják, hogy merre
		menjenek.</p><p>Ez ugyan a legnehezebb megoldás, de egyben ez
		is a legjobb, ráadásul így a szoftver
		több gépen is
		mûködtethetõ.</p></li><li class="listitem"><p>Proxy használata.  Elõfordulhat, hogy az
		alkalmazás támogatja a
		<code class="literal">socks5</code> protokollt vagy (mint ahogy a
		<code class="command">cvsup</code> is csinálja) rendelkezik
		<span class="quote">"<span class="quote">passzív</span>"</span> móddal, és
		így lehetõleg igyekszik elkerülni azt,
		hogy a távoli géprõl kapcsolatot
		próbáljanak meg indítani a helyi
		gépre.</p></li><li class="listitem"><p>A <code class="literal">nat addr</code>
		használatával irányítsunk
		át mindent a belsõ gépre.  Ez viszont
		egy nagyon durva megközelítés.</p></li></ol></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78718416"></a><a id="useful-port-numbers"></a><p><strong>14.23.</strong></p></td><td align="left" valign="top"><p>Valaki összeírta már a hasznosabb
	    portok sorszámait?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Egyelõre még nem, de
	  szándékunkban áll
	    összeállítani egy ilyen listát
	    (már amennyiben igény lesz rá).  Minden
	    itt szereplõ példában az
	    <em class="replaceable"><code>belsõ</code></em> helyett mindig annak a
	    gépnek a belsõ IP-címét
	    írjuk, amelyrõl játszani akarunk.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">Asheron's Call</span></p><p><code class="literal">nat port udp
		belsõ :65000
		65000</code></p><p>Manuálisan változtassuk meg a
		játékon belül a portszámot
		<code class="literal">65000</code>-re.  Ha a belsõ
		hálózatunkról több
		gépen is szeretnénk játszni, akkor
		mindegyiknek adjuk meg egy egyedi portot (vagyis
		<code class="literal">65001</code>, <code class="literal">65002</code>
		stb.), majd vegyünk fel mindegyikhez egy-egy
		<code class="literal">nat port</code> sort.</p></li><li class="listitem"><p><span class="application">Half Life</span></p><p><code class="literal">nat port udp
		belsõ:27005
		27015</code></p></li><li class="listitem"><p><span class="application">PCAnywhere 8.0</span></p><p><code class="literal">nat port udp
		belsõ:5632
		5632</code></p><p><code class="literal">nat port tcp
		belsõ:5631
		5631</code></p></li><li class="listitem"><p><span class="application">Quake</span></p><p><code class="literal">nat port udp
		belsõ:6112
		6112</code></p></li><li class="listitem"><p><span class="application">Quake 2</span></p><p><code class="literal">nat port udp
		belsõ:27901
		27910</code></p><p><code class="literal">nat port udp
		belsõ:60021
		60021</code></p><p><code class="literal">nat port udp
		belsõ:60040
		60040</code></p></li><li class="listitem"><p><span class="application">Red Alert</span></p><p><code class="literal">nat port udp
		belsõ:8675
		8675</code></p><p><code class="literal">nat port udp
		belsõ:5009
		5009</code></p></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78758608"></a><a id="fcs-errors"></a><p><strong>14.24.</strong></p></td><td align="left" valign="top"><p>Mik azok az FCS hibák?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Az FCS jelentése <code class="literal">F</code>rame
	    <code class="literal">C</code>heck <code class="literal">S</code>equence, vagyis
	    az <span class="quote">"<span class="quote">Adatkeret ellenõrzésének
	    sorozata</span>"</span>.  Mindegyik PPP csomaghoz tartozik egy
	    ellenõrzõösszeg, amely arról
	    gondoskodik, hogy ugyanaz az adat érkezzen meg, mint
	    amit elküldtek.  Amennyiben egy bejövõ csomag
	    FCS értéke érvénytelennek
	    minõsül, a csomag eldobódik és a
	    HDLC FCS számláló
	    értékkel eggyel növekszik.  A HDLC
	    hibaszámlálói a <code class="literal">show
	    hdlc</code> parancs segítségével
	    tekinthetõek meg.</p><p>Ha rosszul mûködik az
	    összeköttetés (vagy a soros vonali
	    meghajtónk folyamatosan eldobja a csomagokat), akkor
	    láthatunk helyenként FCS hibákat.
	    Többnyire nem érdemes az ilyenek miatt
	    aggódni, habár ez jelentõs
	    mértékben lassítja a
	    tömörítést végzõ
	    protokollok munkáját.  Ha külsõ
	    modemünk van, akkor ne felejtsük el a
	    megfelelõ módon leárnyékolni,
	    mivel ebbõl is származhat a
	    probléma.</p><p>Ha a vonal a kapcsolódást
	    követõen szinte azonnal lemerevedik és
	    hirtelen nagy mennyiségû FCS hiba jelentkezik,
	    akkor az arra is utalhat, hogy az
	    összeköttetés nem tisztán
	    8 bites.  Gondoskodjunk róla, hogy a modem ne a
	    szoftveres forgalomirányítást
	    (XON/XOFF) használja.  Ha viszont az adatok
	    közvetítéséhez mégis
	    szoftveres forgalomirányítást
	    <span class="emphasis"><em>kell</em></span> használnunk, akkor a
	    <code class="literal">set accmap 0x000a0000</code> parancs
	    kiadásával jelezzük a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>
	    felé, hogy a <code class="literal">^Q</code> és
	    <code class="literal">^S</code> karaktereket
	    helyettesítse.</p><p>Nagy mennyiségû FCS hibát olyan
	    esetekben is tapasztalhatunk, amikor a távoli pont
	    abbahagyta a <acronym class="acronym">PPP</acronym> üzenetek
	    küldését.  Ilyenkor javasolt
	    engedélyezni az aszinkron naplózás
	    használatát, aminek
	    segítségével gyorsan meg tudjuk
	    állapítani, hogy a beérkezõ adatok
	    bejelentkezõ vagy shell üzeneteket.  Ha a
	    másik oldalon egy shell parancssorát kapjuk
	    meg, akkor a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> a <code class="command">close lcp</code>
	    megadásával a vonal eldobása
	    nélkül leállítható (az
	    utána következõ <code class="command">term</code>
	    paranccsal pedig a távoli gépen futó
	    shellre tudunk csatlakozni).</p><p>Ha a naplókban látszólag semmi sem
	    indokolja az összeköttetés
	    leállását, próbáljunk meg
	    erre rákérdezni a távoli pont
	    (talán a szolgáltató?)
	    karbantartójánál.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="PPPoEwithNAT"></a><a id="macos-win98-pppoe-freeze"></a><p><strong>14.25.</strong></p></td><td align="left" valign="top"><p>A <span class="trademark">Mac OS</span>(R) és <span class="trademark">Windows</span>(R) 98 alól
	    indított kapcsolatok miért állnak le, ha
	    PPPoE fut az átjárón?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A probléma megoldását Michael
	    Wozniak (<code class="email">&lt;<a xmlns="" class="email" href="mailto:mwozniak@netcom.ca">mwozniak@netcom.ca</a>&gt;</code>) adta meg, valamint
	    Dan Flemming (<code class="email">&lt;<a xmlns="" class="email" href="mailto:danflemming@mac.com">danflemming@mac.com</a>&gt;</code>) alkalmazta
	    ugyanezt Macre:</p><p>Ennek oka az ún.
	    útválasztási <span class="quote">"<span class="quote">fekete lyuk</span>"</span>.
	    A <span class="trademark">Mac OS</span>(R) és a <span class="trademark">Windows</span>(R) 98 (de
	    valószínûleg az összes többi
	    <span class="trademark">Microsoft</span>(R) operációs rendszer) olyan nagy
	    méretû TCP csomagokat küld, amelyek
	    már nem férnek bele egy PPPoE keretbe (amely
	    mérete Ethernet estén 1500 byte
	    alapértelmezés szerint)
	    <span class="emphasis"><em>és</em></span> beállítja
	    hozzá a darabolás letiltását
	    jelzõ (<span class="quote">"<span class="quote">do not fragment</span>"</span>) bitet (TCP
	    esetén ez alapértelmezett), és a Telco
	    útválasztó pedig nem küldi el a
	    <span class="quote">"<span class="quote">must fragment</span>"</span> (<span class="quote">"<span class="quote">darabolni kell</span>"</span>)
	    ICMP csomagot a letölteni kívánt oldal
	    szolgáltatója felé.  (Másik
	    lehetõség, hogy az
	    útválasztó ugyan küld egy ilyen
	    ICMP csomagot, de ezt a
	    tartalomszolgáltatónál
	    található tûzfal eldobja.) Amikor
	    válaszul a szolgáltató olyan kereteket
	    kezd el küldeni, amelyek nem illeszkednek a PPPoE
	    keresztmetszetébe, a Telco
	    útválasztó egyszerûen eldobja
	    ezeket és a lap nem pedig nem lesz
	    elérhetõ (egyes képek és oldalak
	    esetén elõfordul).  Úgy tûnik, ez az
	    alapbeállítás a legtöbb Telco
	    PPPoE konfiguráció esetében.</p><p>Ezt a hibát úgy javíthatjuk, ha a
	    <span class="trademark">Windows</span>(R) 95/98 rendszerekben megtalálható
	    <code class="command">regedit</code> segítségével
	    felvesszük a következõ
	    regisztrációs bejegyzést:</p><pre class="programlisting">HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Class\NetTrans\0000\MaxMTU</pre><p>A karakterlánc értéke legyen
	    <code class="literal">1436</code>, mivel bizonyos ADSL
	    útválasztók
	    állítólag nem képesek
	    ennél nagyobb méretû csomagokat kezelni.
	    <span class="trademark">Windows</span>(R) 2000 esetén ezt a
	    beállítást a
	    <code class="literal">Tcpip\Parameters\Interfaces\a
	    hálózati kártya
	    azonosítója\MTU</code> helyen kell keresni
	    és típusa duplaszó (DWORD).</p><p>A <span class="trademark">Windows</span>(R) MTU beállításaival
	    kapcsolatban olvassuk el a Microsoft Knowledge Base
	    címén található dokumentumokat:
	    <a class="link" href="http://support.microsoft.com/support/kb/articles/Q158/4/74.asp" target="_top">Q158474
	    - Windows TCPIP Registry Entries</a> és <a class="link" href="http://support.microsoft.com/support/kb/articles/Q120/6/42.asp" target="_top">Q120642
	    - TCPIP &amp; NBT Configuration Parameters for <span class="trademark">Windows NT</span>(R)
	    </a>.</p><p><span class="trademark">Windows</span>(R) 2000 alatt a regisztrációs
	    adatbázisban érdemes még a
	    <code class="literal">Tcpip\Parameters\Interfaces\a
	    hálózati kártya
	    azonosítója\EnablePMTUBHDetect</code>
	    duplaszó értékét
	    <code class="literal">1</code>-re állítani, ahogy arra
	    az imént említett 120642-es <span class="trademark">Microsoft</span>(R)
	    dokumentum is hivatkozik.</p><p>Sajnos a <span class="trademark">Mac OS</span>(R) nem nyújt semmilyen
	    beállítási lehetõséget a
	    TCP/IP beállítások
	    megváltoztatására.  Léteznek
	    viszont kereskedelmi termékek, amelyek
	    lehetõvé teszi a felhasználók
	    számára, hogy igényeik szerint
	    módosítsák rendszerük TCP/IP
	    beállításait.  A hálózati
	    címfordítást használók
	    keressék meg az MTU
	    beállításaikat és adják
	    meg az <code class="literal">1450</code> értéket az
	    eredeti <code class="literal">1500</code> helyett.</p><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> újabb (2.3 vagy afeletti)
	    változatai már tartalmaznak egy
	    <code class="command">enable tcpmssfixup</code> parancsot, amellyel az
	    MSS értéke tetszõlegesen
	    átállítható.  Ez
	    alapértelmezés szerint engedélyezett.
	    Ha valamiért mégis a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> egy
	    korábbi változatával kellene
	    dolgoznunk, akkor érdemes megnéznünk
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/tcpmssd/pkg-descr">net/tcpmssd</a>
	    portot.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp78834128"></a><a id="desperation"></a><p><strong>14.26.</strong></p></td><td align="left" valign="top"><p>Ezek közül egyik sem használt -
	    segítség!  Mit lehetne még
	    tenni?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Ha eddig minden más csõdött mondott,
	    akkor próbáljuk meg elküldeni az
	    összes beszerezhetõ információt,
	    beleértve a konfigurációs
	    állományokat, hogyan indítjuk el a
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> programot, a naplók fontosabb
	    részeit és a <code class="command">netstat -rn</code>
	    parancs kimenetét (a csatlakozás elõtt
	    és után) a <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">FreeBSD general questions levelezési lista</a> címére
	    vagy a <a class="link" href="news:comp.unix.bsd.freebsd.misc" target="_top">comp.unix.bsd.freebsd.misc</a>
	    hírcsoportba, és valaki talán majd
	    megmutatja a helyes irányt.</p></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="security.html">Vissza</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="serial.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">13. fejezet - Biztonság </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 15. fejezet - Soros vonali kommunikáció</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>