<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>27.4. PPP kapcsolatok hibaelhárítása</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD kézikönyv" /><link rel="up" href="ppp-and-slip.html" title="27. fejezet - A PPP és a SLIP" /><link rel="prev" href="ppp.html" title="27.3. A rendszerszintû PPP alkalmazása" /><link rel="next" href="pppoe.html" title="27.5. A PPP használata Ethernet felett (PPPoE)" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">27.4. <acronym class="acronym">PPP</acronym> kapcsolatok
      hibaelhárítása</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ppp.html">Vissza</a> </td><th width="60%" align="center">27. fejezet - A PPP és a SLIP</th><td width="20%" align="right"> <a accesskey="n" href="pppoe.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ppp-troubleshoot"></a>27.4. <acronym class="acronym">PPP</acronym> kapcsolatok
      hibaelhárítása</h2></div><div><span class="authorgroup">Készítette: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="surname">Rhodes</span>, <span class="firstname">Tom</span></span>. </span></div></div></div><a id="idp95599184" class="indexterm"></a><div xmlns="" class="warning"><h3 class="admontitle">Figyelem: </h3><p xmlns="http://www.w3.org/1999/xhtml">A FreeBSD 8.0 kiadásától
	  kezdõdõen a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> meghajtó
	  szerepét a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uart&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">uart</span>(4)</span></a> veszi át.  Emiatt a
	  soros vonali eszközöket <code class="filename">/dev/cuadN</code>
	  és <code class="filename">/dev/cuauN</code>
	  helyett <code class="filename">/dev/ttydN</code>
	  és <code class="filename">/dev/ttyuN</code>
	  néven lehet elérni.  A FreeBSD
	  7.<em class="replaceable"><code>X</code></em> változatok
	  felhasználóinak ennek megfelelõen kell
	  olvasniuk ezt a leírást.</p></div><p>Ebben a szakaszban összefoglalunk néhány
	olyan problémát, ami a PPP modemen keresztüli
	használata során keletkezhet.
	Például pontosan tisztában kell
	lennünk azzal, hogy a tárcsázott rendszer
	milyen adatokat és hogyan fog tõlünk
	bekérni.  Egyes szolgáltatók egy
	<code class="literal">ssword</code> promptot, míg mások egy
	<code class="literal">password</code> promptot adnak.  Ha a
	<code class="command">ppp</code> szkript nem illeszkedik ezekhez az
	elvárásokhoz, akkor nem tudunk bejelentkezni.  A
	<code class="command">ppp</code> csatlakozások
	nyomonkövetésének egyik leggyakoribb
	módja a manuális kapcsolódás.  A
	következõkben ezért a manuális
	csatlakozásokra vonatkozó
	legszükségesebb ismereteket mutatjuk be
	lépésrõl lépésre.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95614800"></a>27.4.1. Az eszközleírók
	ellenõrzése</h3></div></div></div><p>Ha saját rendszermagot használunk, ne
	felejtsük el felvenni a következõ sort a
	konfigurációs állományba:</p><pre class="programlisting">device   uart</pre><p>A <code class="literal">GENERIC</code> rendszermag az
	<code class="filename">uart</code> eszközt már
	alapértelmezés szerint tartalmazza, ezért
	ilyenkor már nincs több teendõnk.
	Egyszerûen csak a <code class="command">dmesg</code> parancs
	kimenetében keressük meg a modemes
	eszközhöz tartozó adatokat:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dmesg | grep uart</code></strong></pre><p>Ennek eredményeképpen kapunk egy rövid
	összefoglalást a <code class="filename">uart</code>
	típusú eszközökrõl.  Ezek lesznek a
	számunkra fontos COM portok.  Amennyiben a modemünk
	egy szabványos soros portként mûködik,
	akkor a <code class="filename">uart1</code> vagy
	<code class="filename">COM2</code> néven kell keresnünk.
	Ha megtaláltuk, akkor nem kell új rendszermagot
	fordítanunk.  Amikor a soros vonali modemünk a
	<code class="filename">uart1</code> vagy
	<code class="filename">COM2</code> porton csatlakozik DOS-ban, akkor
	itt a neki megfelelõ eszköz a <code class="filename">/dev/cuau1</code> lesz.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95634000"></a>27.4.2. Kapcsolódás manuálisan</h3></div></div></div><p>A <code class="command">ppp</code> kézi
	irányításával gyorsan,
	egyszerûen és minden fájdalomtól
	mentesen tudunk csatlakozni az internethez, de olyankor is
	hasznos, ha ki akarjuk deríteni, hogy az
	internet-szolgáltatónk milyen módon kezeli
	a kliensek <code class="command">ppp</code> csatlakozásait.  Nos,
	akkor ehhez indítsuk is el a
	<span class="application">PPP</span> alkalmazást a
	paranccsorból.  Az alábbi példákban
	rendre a <span class="emphasis"><em>pelda</em></span> névvel hivatkozunk a
	<span class="application">PPP</span>-t mûködtetõ
	gépre.  A <code class="command">ppp</code> tehát a
	<code class="command">ppp</code> parancs
	begépelésével
	indítható:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp</code></strong></pre><p>Ezzel elindítottuk a <code class="command">ppp</code>
	programot.</p><pre class="screen">ppp ON pelda&gt; <strong class="userinput"><code>set device /dev/cuau1</code></strong></pre><p>Beállítjuk a modemünket, ami ebben az
	esetben a <code class="filename">cuau1</code>.</p><pre class="screen">ppp ON pelda&gt; <strong class="userinput"><code>set speed 115200</code></strong></pre><p>Beállítjuk a csatlakozás
	sebességét, ami ebben az esetben 115 200
	kbit/mp.</p><pre class="screen">ppp ON pelda&gt; <strong class="userinput"><code>enable dns</code></strong></pre><p>Azt mondjuk a <code class="command">ppp</code> programnak, hogy
	állítsa be a névfeloldót és
	az <code class="filename">/etc/resolv.conf</code> állományt
	egészítse ki a megfelelõ
	névszerverekkel.  Ha a <code class="command">ppp</code> nem
	képes megállapítani a gépünk
	nevét, akkor késõbb ezt még
	kézzel is be tudjuk állítani.</p><pre class="screen">ppp ON pelda&gt; <strong class="userinput"><code>term</code></strong></pre><p>Váltsunk <span class="quote">"<span class="quote">terminál</span>"</span> módba,
	így mi irányítjuk a modemet.</p><pre class="programlisting">deflink: Entering terminal mode on /dev/cuau1
type '~h' for help</pre><pre class="screen"><strong class="userinput"><code>at</code></strong>
OK
<strong class="userinput"><code>atdt123456789</code></strong></pre><p>Az <code class="command">at</code> paranccsal hozzuk alaphelyzetbe a
	modemet, majd a <code class="command">atdt</code> paranccsal és egy
	telefonszám megadásával megkezdjük a
	szolgáltató
	tárcsázását.</p><pre class="screen">CONNECT</pre><p>Ezzel jelez vissza a kapcsolódás
	megkezdésérõl.  Ha itt bármilyen
	hardvertõl független csatlakozási
	probléma merülne fel, akkor ezen a ponton tudunk
	ellene tenni valamit.</p><pre class="screen">ISP Login:<strong class="userinput"><code>felhasznalonev</code></strong></pre><p>Itt kell megadnunk a felhasználói
	nevünket, ami megegyezik a szolgáltató
	által adott azonosítónkkal.</p><pre class="screen">ISP Pass:<strong class="userinput"><code>jelszo</code></strong></pre><p>Ezúttal a jelszavunkat kell megadni, amit
	szintén a szolgáltató bocsátott
	rendelkezésünkre az azonosító mellett.
	Akárcsak amikor bejelentkezünk a FreeBSD-be, itt sem
	fog látszódni a jelszavunk.</p><pre class="screen">Shell or PPP:<strong class="userinput"><code>ppp</code></strong></pre><p>Szolgáltatótól függõen
	elõfordulhat, hogy ez a sor soha nem is jelenik meg.  Itt
	kérdezik meg, hogy a szolgáltatónál
	egy shellt akarunk használni, vagy csak elindítani
	egy <code class="command">ppp</code> kapcsolatot.  Ebben a
	példában természetesen a
	<code class="command">ppp</code> opciót választjuk, mivel
	egy internet-elõfizetés birtokosai vagyunk.</p><pre class="screen">Ppp ON pelda&gt;</pre><p>Figyeljük meg, hogy az elsõ <code class="option">p</code>
	nagybetûssé vált.  Ezzel jelzi a program,
	hogy sikeresen csatlakoztunk a
	szolgáltatónkhoz.</p><pre class="screen">PPp ON pelda&gt;</pre><p>Sikeresen azonosítottuk magunkat a
	szolgáltató felé és várjuk az
	IP-címünket.</p><pre class="screen">PPP ON pelda&gt;</pre><p>Megkaptuk az IP-címünket és ezzel
	sikeresen felépült a kapcsolat.</p><pre class="screen">PPP ON pelda&gt;<strong class="userinput"><code>add default HISADDR</code></strong></pre><p>Itt adjuk hozzá az alapértelmezett
	útvonalat, amire mindenképpen
	szükségünk van ahhoz, hogy a
	külvilággal is kapcsolatban tudjunk lépni,
	mivel jelenleg csak a vonal másik végén
	lévõ gépet érjük el.  Ha ezt
	bizonyos, már meglevõ útvonalak miatt nem
	sikerül felvenni, akkor az <code class="option">add</code> elé
	tegyünk egy <code class="literal">!</code> jelet.  Ezt viszont a
	kapcsolat felépítése elõtt is
	megtehetjük, így menet közben az új
	útvonalat felveszi a többi közé.</p><p>Ha eddig minden remekül ment, akkor ezen ponton
	már egy élõ internet-kapcsolattal
	rendelkezünk, és a programot a <span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>z</strong></span>
	lenyomásával a háttérbe is
	tehetjük.  Ha a <code class="command">PPP</code> felirat ismét
	a <code class="command">ppp</code> feliratra váltana, akkor az arra
	utal, hogy elvesztettük a kapcsolatot.  Erre nem árt
	figyelni, mivel ezzel jelzi az aktuális kapcsolat
	állapotát.  A nagybetûs P-k jelölik,
	hogy az adott szinten megvan a kapcsolat a
	szolgáltató felé, a kisbetûs p-k pedig
	arra utalnak, hogy azon a szinten a kapcsolat valamiért
	megszûnt.  A <code class="command">ppp</code> csak ezt a két
	állapotot ismeri.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp95668176"></a>27.4.2.1. Nyomkövetés</h4></div></div></div><p>Ha közvetlen vonalunk van és mégsem
	  sikerül kapcsolatot létesíteni, akkor
	  tiltsuk le a hardveres <acronym class="acronym">CTS/RTS</acronym>
	  forgalomirányítást a <code class="option">set ctsrts
	  off</code> paranccsal.  Ez leginkább akkor fordul
	  elõ, ha csatlakoztunk egy olyan
	  terminálszerverhez, amely valamennyire képes
	  kezelni a <span class="application">PPP</span> kapcsolatokat, de a
	  <span class="application">PPP</span> megáll, mikor adatot
	  próbál írni a kommunikációs
	  csatornára, mivel arra a <acronym class="acronym">CTS</acronym> (Clear
	  To Send - <span class="quote">"<span class="quote">lehet küldeni</span>"</span>)
	  jelzésre vár, amely soha nem fog
	  megérkezni.  Ha mégis ezt a
	  beállítást akarjuk használni,
	  akkor a <code class="option">set accmap</code>
	  beállításra is
	  szükségünk lesz, mivel ez kell bizonyos
	  karakterek hardverfüggõ
	  átküldésének
	  felülbírálásához,
	  legtöbb esetben a XON/XOFF miatt.  A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> man
	  oldalon találhatunk errõl és ennek
	  használatáról részletesebb
	  leírást.</p><p>Ha egy régebbi gyártmányú
	  modemünk van, akkor a <code class="option">set parity even</code>
	  beállítás alkalmazása is javasolt.
	  Alapértelmezés szerint ugyanis nincs
	  paritás, de a régebbi modemek és (a
	  forgalom növekedésével) egyes
	  szolgáltatók még használják
	  hibaellenõrzésre.  Ha Compuserve
	  elõfizetésünk van, mindenképpen
	  kapcsoljuk be.</p><p>Amikor a <span class="application">PPP</span> nem tér
	  vissza parancs módba, akkor gyaníthatóan
	  az egyeztetésben lesz valahol probléma, mivel a
	  szolgáltató a kliensüktõl várja
	  a kezdeményezését.  Ezen a ponton a
	  <code class="command">~p</code> paranccsal utasíthatjuk a ppp
	  programot a konfigurációs
	  információk
	  átküldésének
	  megkezdésére.</p><p>Ha egyáltalán nem kapunk promptot a
	  bejelentkezéshez, akkor nagy a
	  alószínûsége, hogy az iménti
	  <span class="trademark">UNIX</span>(R) stílusú hitelesítés helyett
	  <acronym class="acronym">PAP</acronym> vagy <acronym class="acronym">CHAP</acronym> protokollt
	  kell használnunk.  A <acronym class="acronym">PAP</acronym> vagy
	  <acronym class="acronym">CHAP</acronym> használatához
	  mindössze a következõ
	  beállításokat kell megadnunk
	  <span class="application">PPP</span> programnak a terminál
	  mód aktiválása elõtt:</p><pre class="screen">ppp ON pelda&gt; <strong class="userinput"><code>set authname felhasznalonev</code></strong></pre><p>ahol a <em class="replaceable"><code>felhasznalonev</code></em> helyett a
	  szolgáltatótól kapott
	  azonosítót kell beírnunk.</p><pre class="screen">ppp ON pelda&gt; <strong class="userinput"><code>set authkey jelszo</code></strong></pre><p>ahol a <em class="replaceable"><code>jelszo</code></em> helyett a
	  szolgáltatótól kapott jelszót kell
	  megadnunk.</p><p>Ha sikeresen csatlakoztunk, de még nem
	  találunk semmilyen tartománynevet, akkor a
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> és IP-cím
	  segítségével tudjuk megvizsgálni,
	  hogy mûködõképes-e a kapcsolat.  Ha
	  100 százalékos (100%) csomagvesztést
	  (packet loss) tapasztalunk, akkor szinte biztos, hogy nincs
	  meg az alapértelmezett útvonal.
	  Nézzük meg újra, hogy az <code class="option">add
	  default HISADDR</code> beállítást
	  megadtuk-e a kapcsolat felépítésekor.  Ha
	  viszont már el tudunk érni egy távoli
	  IP-címet, akkor nagyon valószínû,
	  hogy az <code class="filename">/etc/resolv.conf</code>
	  állományba nem került bele a megfelelõ
	  névfeloldó címe.  Az említett
	  állománynak valahogy így kellene
	  kinéznie:</p><pre class="programlisting">domain <em class="replaceable"><code>minta.com</code></em>
nameserver <em class="replaceable"><code>x.x.x.x</code></em>
nameserver <em class="replaceable"><code>y.y.y.y</code></em></pre><p>Ahol az <em class="replaceable"><code>x.x.x.x</code></em> és
	  <em class="replaceable"><code>y.y.y.y</code></em> címeket a
	  szolgáltatónk névszervereinek
	  címével kell behelyettesíteni.  Ez nem
	  minden esetben található meg az
	  elõfizetõi szerzõdésben, de ha
	  felhívjuk a szolgáltatónkat, akkor minden
	  bizonnyal elárulják ezeket a
	  címeket.</p><p>A <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a> is alkalmas a
	  <span class="application">PPP</span> kapcsolatok
	  naplózására.  Ehhez csupán ennyit
	  kell megadnunk az <code class="filename">/etc/syslog.conf</code>
	  állományban:</p><pre class="programlisting">!ppp
*.*     /var/log/ppp.log</pre><p>A legtöbb esetben ez a lehetõség
	  már eleve adott.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ppp.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="ppp-and-slip.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="pppoe.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">27.3. A rendszerszintû PPP alkalmazása </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 27.5. A PPP használata Ethernet felett (PPPoE)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>