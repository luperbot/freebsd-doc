<?xml version="1.0" encoding="iso-8859-2" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" /><title>7.2. A dokumentációt tároló könyvtárban található Makefile állományok</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="A FreeBSD Dokumentációs Projekt irányelvei kezdõknek" /><link rel="up" href="doc-build.html" title="7. fejezet - A dokumentáció elõállításának folyamata" /><link rel="prev" href="doc-build.html" title="7. fejezet - A dokumentáció elõállításának folyamata" /><link rel="next" href="make-includes.html" title="7.3. A FreeBSD Dokumentációs Projekt .mk állományai" /><link rel="copyright" href="legalnotice.html" title="Jogi közlemény" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7.2. A dokumentációt tároló
      könyvtárban található
      <code class="filename">Makefile</code> állományok</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="doc-build.html">Vissza</a> </td><th width="60%" align="center">7. fejezet - A dokumentáció
    elõállításának folyamata</th><td width="20%" align="right"> <a accesskey="n" href="make-includes.html">Elõre</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="doc-build-makefiles"></a>7.2. A dokumentációt tároló
      könyvtárban található
      <code class="filename">Makefile</code> állományok</h2></div></div></div><p>A FreeBSD Dokumentációs Projekt által
      használt könyvtárakban megtalálható
      <code class="filename">Makefile</code> állományoknak
      három típusa létezik:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Az <a class="link" href="doc-build-makefiles.html#sub-make" title="7.2.1. Az alkönyvtári Makefile állományok">alkönyvtári
	  <code class="filename">Makefile</code> állományok</a>
	  egyszerûen csak továbbadják a parancsokat
	  az alkönyvtáraiknak.</p></li><li class="listitem"><p>A <a class="link" href="doc-build-makefiles.html#doc-make" title="7.2.2. A dokumentumokra vonatkozó Makefile állományok">dokumentumokra vonatkozó
	  <code class="filename">Makefile</code> állományok</a>
	  írják le, hogy milyen dokumentumokat kellene az
	  adott könyvtárban
	  elõállítani.</p></li><li class="listitem"><p>Az <a class="link" href="make-includes.html" title="7.3. A FreeBSD Dokumentációs Projekt .mk állományai"><code class="filename">.mk</code>
	  állományok</a> segítik valamilyen
	  formában a dokumentumok
	  elõállítását.  Többnyire
	  <code class="filename">doc.xxx.mk</code>
	  névvel láthatóak.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sub-make"></a>7.2.1. Az alkönyvtári <code class="filename">Makefile</code>
	állományok</h3></div></div></div><p>Ezek a típusú <code class="filename">Makefile</code>
	állományok általában a
	következõ alakúak:</p><pre class="programlisting">SUBDIR =articles
SUBDIR+=books

COMPAT_SYMLINK = en

DOC_PREFIX?= ${.CURDIR}/..
.include "${DOC_PREFIX}/share/mk/doc.project.mk"</pre><p>Röviden összefoglalva: az elsõ négy
	nem üres sorban ún.  <code class="command">make</code>
	változókat definiálunk.  Ezek rendre a
	<code class="varname">SUBDIR</code>, <code class="varname">COMPAT_SYMLINK</code>
	és <code class="varname">DOC_PREFIX</code>.</p><p>Az elsõ <code class="varname">SUBDIR</code> sornál,
	illetve a <code class="varname">COMPAT_SYMLINK</code> sorában
	láthatjuk hogyan kell egy új értéket
	beállítani egy ilyen
	változónak.</p><p>A második <code class="varname">SUBDIR</code> sorban azt
	láthatjuk, hogyan tudunk a változó
	aktuális értékéhez
	továbbiakat hozzáfûzni.  Ebben az esetben
	tehát az utasítás
	végrehajtása után a
	<code class="varname">SUBDIR</code> értéke <code class="literal">articles
	books</code> lesz.</p><p>A <code class="varname">DOC_PREFIX</code> esetében pedig olyan
	értékadást figyelhetünk meg, amelyik
	csak akkor hajtódik végre ténylegesen, ha a
	változónak addig még nem volt
	értéke.  Ez olyankor tud kapóra jönni,
	amikor a <code class="varname">DOC_PREFIX</code> nem pontosan az, amire a
	<code class="filename">Makefile</code> számít - a
	felhasználó ekkor meg tudja adni a helyes
	értéket.</p><p>Ez így együttesen tehát mit is jelent?  A
	<code class="varname">SUBDIR</code> összefoglalja azokat a
	könyvtárakat, amelyekben a dokumentumok
	elõállításának
	folyamatának folytatódnia kell majd.</p><p>A <code class="varname">COMPAT_SYMLINK</code> a kompatibilitás
	céljából létrehozott szimbolikus
	linkekre vonatkozik, amelyek (valamilyen csoda folytán)
	az adott nyelv hivatalos kódolására
	mutatnak (tehát például a
	<code class="filename">doc/en</code> a
	<code class="filename">en_US.ISO8859-1</code>
	könyvtárra).</p><p>A <code class="varname">DOC_PREFIX</code> a FreeBSD
	Dokumentációs Projekt
	fõkönyvtárához vezetõ utat adja
	meg.  Ezt nem mindig egyszerû megtalálni,
	ezért a rugalmasság kedvéért
	könnyedén felül is definiálható.
	A <code class="varname">.CURDIR</code> a <code class="command">make</code> egyik
	saját belsõ változója, amelyben az
	aktuális könyvtár elérési
	útját tárolja.</p><p>Végül az utolsó sorban a FreeBSD
	Dokumentációs Projekt összes
	<code class="filename">Makefile</code> állományára
	vonatkozó, rendszerszintû
	<code class="filename">doc.project.mk</code> állományra
	hivatkozunk, amelyen keresztül az iménti
	változókból épül fel a
	dokumentumok elõállításának
	pontos menete.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="doc-make"></a>7.2.2. A dokumentumokra vonatkozó
	<code class="filename">Makefile</code> állományok</h3></div></div></div><p>Ezekben a <code class="filename">Makefile</code>
	állományokban az adott könyvtárban
	található dokumentumok
	elõállítását
	leíró különbözõ
	<code class="command">make</code> változók
	szerepelnek.</p><p>Lássunk erre egy példát:</p><pre class="programlisting">MAINTAINER=pgj@FreeBSD.org

DOC?= book

FORMATS?= html-split html

INSTALL_COMPRESSED?= gz
INSTALL_ONLY_COMPRESSED?=

# Az SGML forrás
SRCS=  book.xml

DOC_PREFIX?= ${.CURDIR}/../../..

.include "$(DOC_PREFIX)/share/mk/docproj.docbook.mk"</pre><p>A <code class="varname">MAINTAINER</code> változó nagyon
	fontos.  A FreeBSD Dokumentációs Projekten belül
	ezen a változón keresztül jelezhetjük a
	dokumentum birtoklását, vagyis
	karbantartási kötelezettségünket.</p><p>A <code class="varname">DOC</code> hivatkozik (az
	<code class="filename">.xml</code> kiterjesztés
	nélkül) az adott könyvtárban
	található dokumentum fõ
	forrására.  Emellett az <code class="varname">SRCS</code>
	változóban kell összefoglalnunk a
	dokumentumot alkotó források neveit.  Ebben
	érdemes megadni minden olyan állományt,
	amelynek megváltozása esetén újra
	elõ kell állítani az érintett
	dokumentumot.</p><p>A <code class="varname">FORMATS</code>
	segítségével definiáljuk a dokumentum
	alapértelmezetten elõállítandó
	formátumait.  A <code class="varname">INSTALL_COMPRESSED</code>
	változóban a dokumentum
	elkészítésekor felhasználandó
	tömörítési formákat adhatjuk meg.
	A <code class="varname">INSTALL_ONLY_COMPRESSED</code>
	változó alapból üres, de ha adunk neki
	valamilyen egyéb értéket, akkor a
	dokumentumoknak csak a tömörített
	változata fog elkészülni.</p><div xmlns="" class="note"><h3 class="admontitle">Megjegyzés: </h3><p xmlns="http://www.w3.org/1999/xhtml">A változók feltételes
	  értékadásáról már
	  volt szó <a class="link" href="doc-build-makefiles.html#sub-make" title="7.2.1. Az alkönyvtári Makefile állományok">az elõzõ
	    szakaszban</a>.</p></div><p>A <code class="varname">DOC_PREFIX</code> változó
	és az <code class="literal">.include</code> utasítás a
	korábbiak alapján már ismerõs
	lehet.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="doc-build.html">Vissza</a> </td><td width="20%" align="center"><a accesskey="u" href="doc-build.html">Fel</a></td><td width="40%" align="right"> <a accesskey="n" href="make-includes.html">Elõre</a></td></tr><tr><td width="40%" align="left" valign="top">7. fejezet - A dokumentáció
    elõállításának folyamata </td><td width="20%" align="center"><a accesskey="h" href="index.html">Fõoldal</a></td><td width="40%" align="right" valign="top"> 7.3. A FreeBSD Dokumentációs Projekt
      <code class="filename">.mk</code> állományai</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ha kérdése van a FreeBSD-vel kapcsolatban, a
    következõ címre írhat (angolul):
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Ha ezzel a dokumentummal kapcsolatban van kérdése, kérjük erre a címre írjon:
    &lt;<a href="mailto:gabor@FreeBSD.org">gabor@FreeBSD.org</a>&gt;.</small></p></body></html>