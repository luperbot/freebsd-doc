<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>18.4. RAID</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manual de FreeBSD" /><link rel="up" href="disks.html" title="Capítulo 18. Almacenamiento" /><link rel="prev" href="disks-adding.html" title="18.3. Añadir discos" /><link rel="next" href="usb-disks.html" title="18.5. Dispositivos de almacenamiento USB" /><link rel="copyright" href="legalnotice.html" title="Aviso Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">18.4. RAID</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="disks-adding.html">Anterior</a> </td><th width="60%" align="center">Capítulo 18. Almacenamiento</th><td width="20%" align="right"> <a accesskey="n" href="usb-disks.html">Siguiente</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="raid"></a>18.4. RAID</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="raid-soft"></a>18.4.1. Software RAID</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd"></a>18.4.1.1. Configuración de controlador de disco
	  concatenado (CCD)</h4></div><div><span class="authorgroup">Texto original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Christopher</span> <span class="surname">Shumway</span></span>. </span></div><div><span class="authorgroup">Revisado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Brown</span></span>. </span></div></div></div><a id="idp77299664" class="indexterm"></a><a id="idp77308752" class="indexterm"></a><p>Al escoger una solución de almacenamiento masivo
          los factores más importantes a considerar son velocidad,
          fiabilidad y coste.  Es raro tener los tres por igual;
          normalmente un dispositivo de almacenamiento masivo veloz y
          fiable es caro, y para recortar los costes suele sacrificarse
          la velocidad o la fiabilidad.</p><p>Al diseñar el sistema descrito más adelante se
          eligió el coste como el factor más importante,
          seguido de la velocidad, y luego la fiabilidad.
          La velocidad de transferencia de datos para este sistema está,
          en última instancia, limitada por la red.  Y mientras que la
          confiabilidad es muy importante, el controlador CCD descrito
          más adelante sirve datos que están respaldados
          en CD-R y pueden ser reemplazados sin dificultad.</p><p>Al escoger una solución de almacenamiento masivo el
          primer paso es definir sus necesidades.  Si prefiere velocidad o
          fiabilidad por encima del coste, el resultado será
          distinto del que vamos a describir en esta sección.
          </p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-installhw"></a>18.4.1.1.1. Instalación del hardware</h5></div></div></div><p>Además del disco IDE, el núcleo del
            disco CCD está compuesto por tres discos IDE
            discos IDE Western Digital de 30GB y 5400 RPM, que
            ofrecen aproximadamente 90GB de almacenamiento.
            Lo ideal sería que cada disco IDE tuviera
            su propio cable y controlador, pero para minimizar
            costes no se utilizaron controladores IDE adicionales.
            En lugar de eso se configuraron los discos
            con <span class="quote">&#8220;<span class="quote">jumpers</span>&#8221;</span> para que cada controlador IDE
            tuviera un maestro y un esclavo.</p><p>Despues de reiniciar la BIOS se configuró
            para que detectara automáticamente los discos
            conectados.
            FreeBSD los detectó al reiniciar:</p><pre class="programlisting">ad0: 19574MB &lt;WDC WD205BA&gt; [39770/16/63] at ata0-master UDMA33
ad1: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata0-slave UDMA33
ad2: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata1-master UDMA33
ad3: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata1-slave UDMA33</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si FreeBSD no detecta todos los discos
            asegúrese de que ha colocado correctamente los
            <span class="quote">&#8220;<span class="quote">jumpers</span>&#8221;</span>.  La mayoría de los discos IDE
            tienen  un <span class="quote">&#8220;<span class="quote">jumper</span>&#8221;</span> <span class="quote">&#8220;<span class="quote">Cable Select</span>&#8221;</span>.
            Este <span class="emphasis"><em>no</em></span> es el
            <span class="quote">&#8220;<span class="quote">jumper</span>&#8221;</span> que define la relación
            maestro/esclavo.  Consulte la documentación
            del disco para identificar el <span class="quote">&#8220;<span class="quote">jumper</span>&#8221;</span>
            correcto.</p></div><p>El siguiente paso es estudiar cómo conectarlos
            para que formen parte del sistema de ficheros.  Investigue
            Debe investigar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a>
            (<a class="xref" href="vinum-vinum.html" title="Capítulo 20. El Gestor de Volúmenes Vinum">Capítulo 20, <em>El Gestor de Volúmenes Vinum</em></a>) y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>. Nosotros
            elegimos <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> para nuestra
            configuración.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-setup"></a>18.4.1.1.2. Configuración de CCD</h5></div></div></div><p>El controlador <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> le permite tomar
            varios discos idénticos y concatenarlos
            en un solo sistema lógico de ficheros.
            Para poder usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> necesita un
            kernel compilado con soporte de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>.
            Añada esta línea al fichero de
            configuración de su kernel, recompile y
            reinstale su kernel:</p><pre class="programlisting">pseudo-device   ccd     4</pre><p>En sistemas 5.X, use la siguiente línea:</p><pre class="programlisting">device   ccd</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En FreeBSD 5.X no es necesario especificar
            un número de dispositivos <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>, ya que el controlador
            de dispositivo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> es capaz de clonarse a sí
            mismo (se crearán nuevas instancias de dispositivo
            automáticamente según vayan haciendo falta).
            </p></div><p>El soporte de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> también puede
            cargarse como módulo en FreeBSD 3.0 y
            posteriores.</p><p>Para configurar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> tendrá que
            usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a> para etiquetar los
            discos:</p><pre class="programlisting">disklabel -r -w ad1 auto
disklabel -r -w ad2 auto
disklabel -r -w ad3 auto</pre><p>Esto crea una etiqueta de disco para
            <code class="filename">ad1c</code>,
            <code class="filename">ad2c</code> y
            <code class="filename">ad3c</code> que abarcan
            el disco completo.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">A partir de FreeBSD 5.1-RELEASE
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> reemplazó al antiguo programa
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>.  En <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> se eliminaron muchas
          opciones y parámetros obsoletos;
          en los ejemplos de arriba la opción <code class="option">-r</code>
          deben obviarse.  Para más información consulte
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>.</p></div><p>El siguiente paso es cambiar el tipo de etiqueta
            de disco.  Edite los discos con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>:
            </p><pre class="programlisting">disklabel -e ad1
disklabel -e ad2
disklabel -e ad3</pre><p>Esto abre la etiqueta de disco de cada disco
            con el editor declarado en la variable de
            entorno <code class="envar">EDITOR</code>, por defecto <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a>.</p><p>Esta es una etiqueta de disco sin modificar:</p><pre class="programlisting">8 partitions:
#        size   offset    fstype   [fsize bsize bps/cpg]
  c: 60074784        0    unused        0     0     0   # (Cyl.    0 - 59597)</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> necesita que añada una nueva
            partición <code class="literal">e</code>.  Puede copiarla desde la
            partición <code class="literal">c</code>, pero el tipo de sistema de
            ficheros (la opción <code class="option">fstype</code>) debe ser
            <strong class="userinput"><code>4.2BSD</code></strong>.  La etiqueta del disco
            debería tener este aspecto:</p><pre class="programlisting">8 partitions:
#        size   offset    fstype   [fsize bsize bps/cpg]
  c: 60074784        0    unused        0     0     0   # (Cyl.    0 - 59597)
  e: 60074784        0    4.2BSD        0     0     0   # (Cyl.    0 - 59597)</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-buildingfs"></a>18.4.1.1.3. Contrucción del sistema de ficheros</h5></div></div></div><p>Puede que todavía no exista el
              nodo de dispositivo para <code class="filename">ccd0c</code>.
              Si es así, ejecute lo siguiente:
              </p><pre class="programlisting">cd /dev
sh MAKEDEV ccd0</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En FreeBSD 5.0 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> administrará
            automáticamente los nodos de dispositivos en
            <code class="filename">/dev</code>, así que no tendrá que
            usar <code class="command">MAKEDEV</code>.</p></div><p>Una vez etiquetados todos los discos construya
            el <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>. Utilice
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a> con opciones similares a las siguientes:</p><pre class="programlisting">ccdconfig ccd0<a id="co-ccd-dev"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span> 32<a id="co-ccd-interleave"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span> 0<a id="co-ccd-flags"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span> /dev/ad1e<a id="co-ccd-devs"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span> /dev/ad2e /dev/ad3e</pre><p>El uso y el significado de cada una de las opciones se
            muestra más abajo:</p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-dev"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El primer argumento es el dispositivo a configurar, en este
              caso <code class="filename">/dev/ccd0c</code>.  La parte
              <code class="filename">/dev/</code> es opcional.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-interleave"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El intervalo para el sistema de ficheros.  El intervalo
              define el tamaño de una banda en bloques de disco,
              normalmente 512 bytes.  Por lo tanto, un intervalo
              de 32 equivaldría 16.384 bytes.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-flags"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Banderas para <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a>. Si desea disponer
              sus discos en espejo use aquí una bandera.
              Esta configuración no necesita discos en espejo,
              por lo que está dispuesta a 0 (cero).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-devs"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Los últimos argumentos de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a>
              son los dispositivos a colocar en el array.  Utilice
              la ruta completa para cada dispositivo.</p></td></tr></table></div><p>Despues de ejecutar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a> el <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
            estará configurado y podrá instalar un sistema
            de ficheros.  Consulte las opciones de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> y
            ejecute:</p><pre class="programlisting">newfs /dev/ccd0c</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-auto"></a>18.4.1.1.4. Automatización</h5></div></div></div><p>Seguramente querrá que
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> esté dispuesto tras cada reinicio.  Para
            ello, debe configurarlo.  Guarde su configuración
            en <code class="filename">/etc/ccd.conf</code> mediante lo
            siguiente:</p><pre class="programlisting">ccdconfig -g &gt; /etc/ccd.conf</pre><p>Durante el reinicio, el <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span>
            <code class="command">/etc/rc</code>
            ejecuta <code class="command">ccdconfig -C</code> si encuentra
            el fichero <code class="filename">/etc/ccd.conf</code>.  De este modo
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> queda configurado automáticamente para que
            pueda montarse.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si ha arrancando en modo mono usuario necesita
            ejecutar el siguiente comando antes de que pueda montar
            el <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> para configurar el array:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">ccdconfig -C</pre></div><p>Para montar automaticamente el <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
            coloque una entrada para <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> en
            <code class="filename">/etc/fstab</code> para que se monte
            durante el arranque:</p><pre class="programlisting">/dev/ccd0c              /media       ufs     rw      2       2</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="vinum"></a>18.4.1.2. El administrador de volúmenes Vinum</h4></div></div></div><a id="idp77388240" class="indexterm"></a><a id="idp77389008" class="indexterm"></a><p>El administrador de volúmenes Vinum es un
          controlador de dispositivos de bloque que implementa
          unidades de disco virtuales.  Aísla los discos hardware de
          la interfaz de dispositivos de bloque y mapea datos de
          modo que revierta en un incremento de flexibilidad,
          rendimiento y fiabilidad comparados con el sistema de slices
          de almacenamiento de disco tradicional.
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a> implementa los modelos RAID-0, RAID-1 y
          RAID-5, individualmente o combinados.</p><p>Consulte el <a class="xref" href="vinum-vinum.html" title="Capítulo 20. El Gestor de Volúmenes Vinum">Capítulo 20, <em>El Gestor de Volúmenes Vinum</em></a> para mayor
          información sobre <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="raid-hard"></a>18.4.2. RAID por Hardware</h3></div></div></div><a id="idp77406288" class="indexterm"></a><p>FreeBSD admite una gran variedad de controladores
        <acronym class="acronym">RAID</acronym> por hardware.  Estos dispositivos
        controlan un subsistema <acronym class="acronym">RAID</acronym> sin necesidad
        de software específico para FreeBSD que administre el
        array.</p><p>Puede controlar la mayoría de las operaciones de disco con
        una tarjeta que incorpore <acronym class="acronym">BIOS</acronym>.
        El siguiente texto es una breve
        descripción de configuración utilizando una
        controladora Promise <acronym class="acronym">RAID</acronym> <acronym class="acronym">IDE</acronym>.
        Cuando se instala esta tarjeta e inicia el sistema despliega
        un <span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span> pidiendo información.  Siga las
        instrucciones para entrar a la pantalla de configuración de la
        tarjeta.  Ahí tendrá posibilidad de combinar todos los
        discos que haya conectado.  Hecho esto el disco (o discos)
        aparecerán como una sola unidad en FreeBSD.  Pueden configurarse
        otros niveles de
        <acronym class="acronym">RAID</acronym>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77411152"></a>18.4.3. Reconstrucción de arrays ATA RAID1</h3></div></div></div><p>FreeBSD le permite reemplazar en caliente un disco dañado.
        Esto requiere que lo intercepte antes de reiniciar.</p><p>Probablemente vea algo como lo siguiente en
        <code class="filename">/var/log/messages</code> o en la salida de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>:</p><pre class="programlisting">ad6 on monster1 suffered a hard error.
ad6: READ command timeout tag=0 serv=0 - resetting
ad6: trying fallback to PIO mode
ata3: resetting devices .. done
ad6: hard error reading fsbn 1116119 of 0-7 (ad6 bn 1116119; cn 1107 tn 4 sn 11)\\
status=59 error=40
ar0: WARNING - mirror lost</pre><p>Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atacontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">atacontrol</span>(8)</span></a> para más
        información:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol list</code></strong>
ATA channel 0:
	Master:      no device present
	Slave:   acd0 &lt;HL-DT-ST CD-ROM GCR-8520B/1.00&gt; ATA/ATAPI rev 0

ATA channel 1:
	Master:      no device present
	Slave:       no device present

ATA channel 2:
	Master:  ad4 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
	Slave:       no device present

ATA channel 3:
	Master:  ad6 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
	Slave:       no device present

<code class="prompt">#</code> <strong class="userinput"><code>atacontrol status ar0</code></strong>
ar0: ATA RAID1 subdisks: ad4 ad6 status: DEGRADED</pre><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Primero debe desconectar el disco del array para
            que pueda retirarlo con seguridad:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol detach 3</code></strong></pre></li><li class="step"><p>Reemplace el disco.</p></li><li class="step"><p>Conecte el disco de repuesto:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol attach 3</code></strong>
Master:  ad6 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
Slave:   no device present</pre></li><li class="step"><p>Reconstruya el array:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol rebuild ar0</code></strong></pre></li><li class="step"><p>El comando de reconstrucción no responderá hasta
            que termine la tarea.  Puede abrir otra terminal (mediante
            <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F<em class="replaceable"><code>n</code></em></strong></span>)
            y revisar el progreso ejecutando lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dmesg | tail -10</code></strong>
[texto eliminado]
ad6: removed from configuration
ad6: deleted from ar0 disk1
ad6: inserted into ar0 disk1 as spare

<code class="prompt">#</code> <strong class="userinput"><code>atacontrol status ar0</code></strong>
ar0: ATA RAID1 subdisks: ad4 ad6 status: REBUILDING 0% completed</pre></li><li class="step"><p>Espere hasta que termine la operación.</p></li></ol></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="disks-adding.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="usb-disks.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">18.3. Añadir discos </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 18.5. Dispositivos de almacenamiento USB</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Puede descargar éste y muchos otros documentos desde
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Si tiene dudas sobre FreeBSD consulte la
    <a href="http://www.FreeBSD.org/docs.html">documentación</a> antes de escribir a la lista
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Envíe sus preguntas sobre la documentación a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>