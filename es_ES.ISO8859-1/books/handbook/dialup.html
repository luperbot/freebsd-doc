<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>24.4. Servicio dial-in</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manual de FreeBSD" /><link rel="up" href="serialcomms.html" title="Capítulo 24. Comunicaciones serie" /><link rel="prev" href="term.html" title="24.3. Terminales" /><link rel="next" href="dialout.html" title="24.5. Servicio dial-out" /><link rel="copyright" href="legalnotice.html" title="Aviso Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">24.4. Servicio dial-in</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="term.html">Anterior</a> </td><th width="60%" align="center">Capítulo 24. Comunicaciones serie</th><td width="20%" align="right"> <a accesskey="n" href="dialout.html">Siguiente</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dialup"></a>24.4. Servicio dial-in</h2></div><div><span class="authorgroup">Contribuido por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Guy</span> <span class="surname">Helmer</span></span>. </span></div><div><span class="authorgroup">Adiciones por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Sean</span> <span class="surname">Kelly</span></span>. </span></div></div></div><a id="idp79559248" class="indexterm"></a><p>Configurar su sistema FreeBSD para servicio dial-in es muy
      similar a conectar terminales excepto que en lugar de lidiar con
      terminales se hace con modems.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79560144"></a>24.4.1. Modems externos vs. internos</h3></div></div></div><p>Los modems externos parecen ser más convenientes para
          dial-up, debido a que los modems externos con frecuencia pueden
          ser configurados semi permanentemente vía parámetros
          almacenados en RAM no volatil y usualmente proveen indicadores
          luminosos que despliegan el estado de señales importantes RS-232.
          Luces parpadeantes impresionan a los visitantes, pero las luces son
          también útiles para ver si un modem se encuentra
          operando adecuádamente.</p><p>Los modems internos usualmente carecen de RAM no volatil,
          entonces su configuración puede estar limitada a
          especificar DIP switches. Si su modem interno cuenta con
          algún indicador luminoso de señales, es probablemente
          dificil observar las luces cuando el sistema está cubierto
          y en su lugar.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79573968"></a>24.4.1.1. Modems y cables</h4></div></div></div><a id="idp79574608" class="indexterm"></a><p>Si se encuentra utilizando un modem externo, entonces
          necesitará por supuesto un cable adecuado. Un cable
          serie estándar RS-232C debe ser suficiente mientras
          todas las señales normales sean cableadas:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Transmitted Data (<acronym class="acronym">TD</acronym>)</p></li><li class="listitem"><p>Received Data (<acronym class="acronym">RD</acronym>)</p></li><li class="listitem"><p>Request to Send (<acronym class="acronym">RTS</acronym>)</p></li><li class="listitem"><p>Clear to Send (<acronym class="acronym">CTS</acronym>)</p></li><li class="listitem"><p>Data Set Ready (<acronym class="acronym">DSR</acronym>)</p></li><li class="listitem"><p>Data Terminal Ready (<acronym class="acronym">DTR</acronym>)</p></li><li class="listitem"><p>Carrier Detect (<acronym class="acronym">CD</acronym>)</p></li><li class="listitem"><p>Signal Ground (<acronym class="acronym">SG</acronym>)</p></li></ul></div><p>FreeBSD necesita las señales <acronym class="acronym">RTS</acronym> y
          <acronym class="acronym">CTS</acronym> para control de flujo a velocidades
          mayores a 2400 bps, la señal <acronym class="acronym">CD</acronym> para
          detectar cuando una llamada ha sido respondida o la línea ha
          sido colgada, y la señal <acronym class="acronym">DTR</acronym> para reiniciar el
          modem despues de completar una sesión.
          Algunos cables son hechos sin incluir todas las señales necesarias,
          así que si tiene problemas, como cuando una sesión no
          finaliza cuando la línea es colgada, tal vez el problema se
          deba al cable.</p><p>Como otros sistemas operativos tipo <span class="trademark">UNIX</span>®, FreeBSD utiliza
          las señales de hardware para saber cuando una llamada ha sido
          contestada o una línea ha sido colgada y poder colgar
          y reiniciar el modem despues de una llamada. FreeBSD evita
          enviar comandos al modem o esperar por reportes de estado del
          modem. Si está familiarizado con la conexión de
          modems una PC funcionando como BBS, tal ves esto parezca extraño.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79592400"></a>24.4.2. Consideraciones de interfaces serie</h3></div></div></div><p>FreeBSD soporta interfaces de comunicación  NS8250-,
          NS16450-, NS16550-, y  NS16550A-basado en EIA RS-232C (CCITT V.24).
          Los dispositivos 8250 y 16450 tienen buffers de un solo caracter.
          El dispositivo 16550 brinda un buffer de 16 caracteres, el cual
          permite un mejor desempeño del sistema. (Errores en 16550 simple
          impiden el uso del buffer de 16 caracteres, así que utilice
          16550A si es posible). Debido a que los dispositivos de buffer de
          un solo caracter requieren más trabajo del sistema operativo
          que los dispotivos de buffer de 16 caracteres, las tarjetas de
          interfaz serie basadas en 16550A son mayormente preferidas.
          Si el sistema tiene muchos puertos serie activos o tendrá
          una carga elevada, las tarjetas basadas en 16550A son mejores para
          comunicaciones con baja tasa de error.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79593552"></a>24.4.3. Revisión rápida</h3></div></div></div><a id="idp79594320" class="indexterm"></a><p>Como con las terminales, <code class="command">init</code>
        engendra un proceso <code class="command">getty</code> para cada
        puerto serie configurado para conexiones dial-in.
        Por ejemplo, si un modem está conectado a
        <code class="filename">/dev/ttyd0</code>, el comando
        <code class="command">ps ax</code> podría mostrar esto:</p><pre class="screen"> 4850 ??  I      0:00.09 /usr/libexec/getty V19200 ttyd0</pre><p>Cuando un usuario marca la línea del modem y el modem
        conecta, la línea <acronym class="acronym">CD</acronym> (Carrier Detect)
        es reportada por el modem.
        El kernel
        nota que se ha detectado una portadora y completa la apertura de
        <code class="command">getty</code> del puerto. <code class="command">getty</code>
        manda un prompt <code class="prompt">login:</code> a la velocidad inicial
        de línea especificada. <code class="command">getty</code> observa si
        se reciben caracteres válidos, y, en una configuración
        típica, si encuentra basura (probablemente debido a que la
        velocidad de conexión del modem es diferente a la velocidad
        de <code class="command">getty</code>),  <code class="command">getty</code> trata de
        ajustar la velocidad de la línea hasta que recibe caracteres
        razonables.</p><a id="idp79600336" class="indexterm"></a><p>Despues que el usuario entra su nombre de
        login, <code class="command">getty</code> ejecuta
        <code class="filename">/usr/bin/login</code>, que completa
        la entrada preguntando por la contraseña del usuario y entonces
        inicia el shell del usuario.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79602640"></a>24.4.4. Archivos de configuración</h3></div></div></div><p>Existen tres ficheros de configuración del sistema
        en el directorio <code class="filename">/etc</code> que probablemente
        necesitará editar para permitir acceso de dial-up a su
        sistema FreeBSD. El primero, <code class="filename">/etc/gettytab</code>,
        contiene información de configuración para el
        daemon <code class="filename">/usr/libexec/getty</code>. El segundo,
        <code class="filename">/etc/ttys</code> contiene información que
        le dice a <code class="filename">/sbin/init</code> que dispositivos
        <code class="filename">tty</code> deben tener procesos <code class="command">getty</code>
        corriendo. Por último, puede incluir comandos de inicialización
        de puerto en el script <code class="filename">/etc/rc.serial</code>.</p><p>Existen dos escuelas de pensamiento en relación a modems dial-up
        en <span class="trademark">UNIX</span>®.
        Un grupo gusta de configurar sus modems y sistemas para que sin
        importar a que velocidad un usuario remoto marque, la interfaz local
        RS-232 computadora-a-modem corra a una velocidad fija. El beneficio
        de esta configuración es que el usuario remoto siempre obtiene
        un prompt de login del sistema inmediátamente.
        La desventaja es que el sistema no sabe cual es la tasa de datos
        verdadera del usuario, así que programas a pantalla completa
        como Emacs no ajustarán sus métodos de dibujado de
        pantalla para mejorar sus respuestas en conexiones más lentas.</p><p>La otra escuela configura sus modems de interfaz RS-232 para variar
 	su velocidad basado en la velocidad de conexión del usuario remoto.
        Por ejemplo, conexiones V.32bis (14.4 Kbps) al modem podrían
        hacer al modem correr su interfaz RS-232 a 19.2 Kbps, mientras que
        conexiones 2400 bps hacen correr la interfaz RS-232 del modem a
        2400 bps. Debido a que <code class="command">getty</code> no entiende
        el reporte de velocidad de conexión de cualquier modem,
        <code class="command">getty</code> brinda un mensaje <code class="prompt">login:</code> a una
        velocidad inicial y observa los caracteres que regresan en respuesta.
        Si el usuario recibe basura, se asume que sabe que debe presionar la
        tecla <span class="keycode">Enter</span> hasta que reciba un prompt reconocible.
        Si la tasa de datos no concuerda, <code class="command">getty</code> trata todo
        lo que el usuario escriba como <span class="quote">&#8220;<span class="quote">basura</span>&#8221;</span>, trata yendo a la
        siguiente velocidad y brinda el prompt <code class="prompt">login:</code> de nuevo.
        Este procedimiento puede continuar hasta el cansancio, pero normalmente
        solo toma un teclazo o dos antes que el usuario reciba un prompt
        correcto. Obviamente, esta secuencia de login no parece tan limpia
        como el anterior método de <span class="quote">&#8220;<span class="quote">velocidad fija</span>&#8221;</span>, pero
        un usuario en una conexión de velocidad baja podría
        recibir una respuesta interactiva mejor desde programas a pantalla
        completa.</p><p>Esta sección tratará de dar información de
        configuración balanceada, pero está cargada hacia tener la
        tasa de datos del modem siguiendo la tasa de conexión.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79611600"></a>24.4.4.1. <code class="filename">/etc/gettytab</code></h4></div></div></div><a id="idp79612368" class="indexterm"></a><p><code class="filename">/etc/gettytab</code> es un fichero tipo
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=termcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">termcap</span>(5)</span></a> de información de configuración para
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>. Por favor vea la página de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a>
          para información completa del formato del fichero y la lista
          de capacidades.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79616208"></a>24.4.4.1.1. Configuración de velocidad fija</h5></div></div></div><p>Si está fijando la tasa de comunicación de datos
            de su modem a una velocidad particular, probablemente no necesitará
            ningún cambio a <code class="filename">/etc/gettytab</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79617744"></a>24.4.4.1.2. Configuración de velocidad concordante</h5></div></div></div><p>Necesitará crear una entrada en
            <code class="filename">/etc/gettytab</code> para darle información a
            <code class="command">getty</code> acerca de las velocidades que desea usar
            para su modem. Si tiene un modem 2400 bps, puede probablemente
            utilizar la entrada existente <code class="literal">D2400</code>.</p><pre class="programlisting">#
# Fast dialup terminals, 2400/1200/300 rotary (can start either way)
#
D2400|d2400|Fast-Dial-2400:\
        :nx=D1200:tc=2400-baud:
3|D1200|Fast-Dial-1200:\
        :nx=D300:tc=1200-baud:
5|D300|Fast-Dial-300:\
        :nx=D2400:tc=300-baud:</pre><p>Si tiene un modem de mayor velocidad, probablemente necesite
            agregar una entrada en <code class="filename">/etc/gettytab</code>; aquí
            está una entrada que puede utilizar para un modem 14.4 Kbps
            con una velociad de interfaz máxima de 19.2 Kbps:</p><pre class="programlisting">#
# Additions for a V.32bis Modem
#
um|V300|High Speed Modem at 300,8-bit:\
        :nx=V19200:tc=std.300:
un|V1200|High Speed Modem at 1200,8-bit:\
        :nx=V300:tc=std.1200:
uo|V2400|High Speed Modem at 2400,8-bit:\
        :nx=V1200:tc=std.2400:
up|V9600|High Speed Modem at 9600,8-bit:\
        :nx=V2400:tc=std.9600:
uq|V19200|High Speed Modem at 19200,8-bit:\
        :nx=V9600:tc=std.19200:</pre><p>esto resultará en una conexión de 8 bits, sin paridad.</p><p>El ejemplo de arriba inicia la tasa de comunicaciones a 19.2 Kbps
            (para conexiones V.32bis), entonces cicla a través de 9600 bps
            (para V.32), 2400 bps, 1200 bps, 300 bps, y de vuelta a
            19.2 Kbps. El ciclado de la tasa de comunicaciones es implementado
            con la capacidad <code class="literal">nx=</code> (<span class="quote">&#8220;<span class="quote">siguiente tabla</span>&#8221;</span>).
            Cada una de las líneas usa una entrada
            <code class="literal">tc=</code> (<span class="quote">&#8220;<span class="quote">continuación de tabla</span>&#8221;</span>) para
            recoger el resto de las propiedades <span class="quote">&#8220;<span class="quote">estándar</span>&#8221;</span> para
            una tasa de datos en particular.</p><p>Si tiene un modem 28.8 Kbps y/o quiere tomar ventaja
            de la compresión en un modem 14.4 Kbps, necesita
            utilizar una tasa de comunicaciones mayor a 19.2 Kbps. Aquí
            hay un ejemplo de una entrada <code class="filename">gettytab</code> iniciando
            a 57.6 Kbps:</p><pre class="programlisting">#
# Additions for a V.32bis or V.34 Modem
# Starting at 57.6 Kbps
#
vm|VH300|Very High Speed Modem at 300,8-bit:\
        :nx=VH57600:tc=std.300:
vn|VH1200|Very High Speed Modem at 1200,8-bit:\
        :nx=VH300:tc=std.1200:
vo|VH2400|Very High Speed Modem at 2400,8-bit:\
        :nx=VH1200:tc=std.2400:
vp|VH9600|Very High Speed Modem at 9600,8-bit:\
        :nx=VH2400:tc=std.9600:
vq|VH57600|Very High Speed Modem at 57600,8-bit:\
        :nx=VH9600:tc=std.57600:</pre><p>Si tiene un CPU lento o un sistema muy cargado y no tiene
            puertos serie basados en 16550A, tal vez reciba errores en
            <span class="errorname">sio</span>
            <span class="quote">&#8220;<span class="quote">silo</span>&#8221;</span> a 57.6 Kbps.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dialup-ttys"></a>24.4.4.2. <code class="filename">/etc/ttys</code></h4></div></div></div><a id="idp79636176" class="indexterm"></a><p>La configuración del fichero <code class="filename">/etc/ttys</code>
          fué cubierto en <a class="xref" href="term.html#ex-etc-ttys" title="Ejemplo 24.1. Agregando entradas de terminal a /etc/ttys">Ejemplo 24.1, &#8220;Agregando entradas de terminal a
	    <code class="filename">/etc/ttys</code>&#8221;</a>.
          La configuración para modems es similar pero debemos
          pasar un argumento diferente a <code class="command">getty</code> y
          especificar un tipo diferente de terminal. El formato general
          tanto para configuración de velocidad fija y velocidad
          concordante es:</p><pre class="programlisting">ttyd0   "/usr/libexec/getty <em class="replaceable"><code>xxx</code></em>"   dialup on</pre><p>El primer componente de la línea de arriba es el fichero
          de dispositivo especial para esta entrada &#8212; <code class="literal">ttyd0</code>
          significa que <code class="filename">/dev/ttyd0</code> es el fichero que
          <code class="command">getty</code> estará vigilando. El segundo
          componente <code class="literal">"/usr/libexec/getty
          xxx"</code>
          (<em class="replaceable"><code>xxx</code></em> será reemplazado por la
          capacidad inicial de <code class="filename">gettytab</code>) es el proceso
          que <code class="command">init</code> ejecutará en el dispositivo.
          El tercer componente, <code class="literal">dialup</code>, es el tipo de
          terminal por omisión. El cuarto parámetro,
          <code class="literal">on</code>, le indica a <code class="command">init</code> que
          la línea es operacional. Puede existir un quinto parámetro,
          <code class="literal">secure</code>, pero solo debería ser utilizado para
          terminales que estén físicamente seguras (como la consola
          del sistema).</p><p>El tipo de terminal por omisión (<code class="literal">dialup</code>
          en el ejemplo de arriba) puede depender de preferencias locales.
          <code class="literal">dialup</code> es el tipo de terminal tradicional por
          omisión en líneas dial-up para que los usuarios
          puedan personalizar sus scripts de login para reconocer cuando
          la terminal es <code class="literal">dialup</code> y ajustar sus tipos de
          terminal automáticamente. De toda maneras, el autor encuentra
          más sencillo especificar en su sitio <code class="literal">vt102</code>
          como el tipo de terminal por omisión, puesto que los usuarios
          solo utilizan emulación VT102 en sus sistemas remotos.</p><p>Despues de realizar los cambios a <code class="filename">/etc/ttys</code>,
          puede enviar al proceso <code class="command">init</code> una señal <acronym class="acronym">HUP</acronym>
          para que relea el fichero. Puede utilizar el comando

	</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP 1</code></strong></pre><p>

          para mandar la señal. Si esta es su primera vez instalando el
          sistema, tal vez quiera esperar hasta que su(s) modem(s) estén
          configurados y conectados correctamente antes de señalizar a
          <code class="command">init</code>.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79649104"></a>24.4.4.2.1. Configuración de velocidad fija</h5></div></div></div><p>Para una configuración de velocidad
            fija, su entrada <code class="filename">ttys</code> necesita tener una
            entrada de velocidad fija provista en <code class="command">getty</code>.
            Para un modem cuya velocidad de puerto está fijada en
            19.2 Kbps, la entrada <code class="filename">ttys</code> podría
            verse así:</p><pre class="programlisting">ttyd0   "/usr/libexec/getty std.19200"   dialup on</pre><p>Si su modem está fijado a un velocidad de
            datos diferente, sustituya el valor apropiado por
            <code class="literal">std.velocidad</code>
            en lugar de <code class="literal">std.19200</code>. Asegúrese
            de usar un tipo válido listado en
            <code class="filename">/etc/gettytab</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79657552"></a>24.4.4.2.2. Configuración de velocidad concordante</h5></div></div></div><p>En una configuración de velocidad concordante su entrada
            <code class="filename">ttys</code> necesita referenciar el inicio de la entrada
            <span class="quote">&#8220;<span class="quote">auto-baud</span>&#8221;</span> (sic) en
            <code class="filename">/etc/gettytab</code>. Por ejemplo, si agregó la
            entrada sugerida arriba para un modem con velocidad concordante que
            inicia a 19.2 Kbps (la entrada <code class="filename">gettytab</code>
            conteniendo el punto de inicio <code class="literal">V19200</code>), su entrada
            <code class="filename">ttys</code> podría verse como esta:</p><pre class="programlisting">ttyd0   "/usr/libexec/getty V19200"   dialup on</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79661520"></a>24.4.4.3. <code class="filename">/etc/rc.serial</code></h4></div></div></div><a id="idp79662288" class="indexterm"></a><p>Modems de alta velocidad, como V.32, V.32bis, y V.34,
          necesitan usar control de flujo por hardware (<code class="filename">RTS/CTS</code>).
          Puede agregar comandos <code class="command">stty</code> a
          <code class="filename">/etc/rc.serial</code> para activar la bandera
          de control de flujo por hardware en el kernel de FreeBSD para
          los puertos del modem.</p><p>Por ejemplo para activar la bandera <code class="literal">termios</code>
          <code class="varname">crtscts</code> de dispositivos de inicialización
          dial-in y dial-out en el puerto serie #1
          (<code class="filename">COM2</code>), las siguientes líneas
          pueden agregarse a
          <code class="filename">/etc/rc.serial</code>:</p><pre class="programlisting"># Serial port initial configuration
stty -f /dev/ttyid1 crtscts
stty -f /dev/cuaia1 crtscts</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79667792"></a>24.4.5. Propiedades del modem</h3></div></div></div><p>Si tiene un modem cuyos parámetros pueden ser activados
        permanentemente en RAM no volatil, necesitará utilizar un
        programa de terminal (como Telix en <span class="trademark">MS-DOS</span>® o <code class="command">tip</code> en
        FreeBSD) para activar los parámetros.
        Conecte al modem usando la misma velocidad de comunicación
        como velocidad inicial que <code class="command">getty</code> usará y
        configure la RAM no volatil del modem para que concuerde con estos
        requerimientos:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">CD</acronym> activado cuando esté conectado</p></li><li class="listitem"><p><acronym class="acronym">DTR</acronym> activado para operación; tirar DTR
	    cuelga la línea y reinicia el modem</p></li><li class="listitem"><p><acronym class="acronym">CTS</acronym> control de flujo de datos transmitidos</p></li><li class="listitem"><p>Deshabilitar control de flujo <acronym class="acronym">XON/XOFF</acronym></p></li><li class="listitem"><p><acronym class="acronym">RTS</acronym> control de flujo de datos recibidos</p></li><li class="listitem"><p>Modo silencioso (sin códigos resultantes)</p></li><li class="listitem"><p>Sin eco de comandos</p></li></ul></div><p>Por favor lea la documentación de su modem para saber
        que comandos y/o switches DIP necesita proporcionarle.</p><p>Pro ejemplo, para activar los parámetros de arriba
        en un modem <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14,400 externo, uno podría
        dar estos comandos al modem:</p><pre class="programlisting">ATZ
AT&amp;C1&amp;D2&amp;H1&amp;I0&amp;R2&amp;W</pre><p>Tal vez quiera también tomar esta oportunidad para
        ajustar otras propiedades en el modem, como si utilizará
        compresión V.42bis y/o MNP5.</p><p>El modem <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14,400 externo también posee
        switches DIP que necesitan activarse; para otros modems, tal vez pueda
        utilizar estas propiedades como un ejemplo:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Switch 1: ARRIBA &#8212; DTR Normal</p></li><li class="listitem"><p>Switch 2: N/A (Códigos resultantes verbales/Códigos resultantes
	    numéricos)</p></li><li class="listitem"><p>Switch 3: ARRIBA &#8212; Suprimir códigos resultantes</p></li><li class="listitem"><p>Switch 4: ABAJO &#8212; No eco, comandos offline</p></li><li class="listitem"><p>Switch 5: ARRIBA &#8212; Auto respuesta</p></li><li class="listitem"><p>Switch 6: ARRIBA &#8212; Detección de señal Normal</p></li><li class="listitem"><p>Switch 7: ARRIBA &#8212; Cargar valores NVRAM por omisión</p></li><li class="listitem"><p>Switch 8: N/A (Modo inteligente/Modo tonto)</p></li></ul></div><p>Códigos resultantes deberían ser deshabilitados
        o suprimidos para modems dial-up para evitar problemas que pueden
        ocurrir si <code class="command">getty</code> erroneamente ofrece un prompt
        <code class="prompt">login:</code> a un modem que se encuentra en modo de
        comandos y el modem hace eco del comando o regresa un código
        resultante. Esta secuencia puede resultar en una conversación
        larga y tonta entre <code class="command">getty</code> y el modem.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79702096"></a>24.4.5.1. Configuración de velocidad fija</h4></div></div></div><p>Para una configuración de velocidad fija necesitará
          configurar el modem para mantener una tasa de datos constante
          modem-a-computadora independiente de la tasa de comunicaciones.
          En un modem <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14,400 externo estos comandos
          fijarán la tasa de datos modem-a-computadora a la velocidad
          utilizada para pasar los comandos:</p><pre class="programlisting">ATZ
AT&amp;B1&amp;W</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79704656"></a>24.4.5.2. Configuración de velocidad concordante</h4></div></div></div><p>Para una configuración de velocidad variable necesitará
          configurar su modem para ajustar la tasa de datos de su puerto serie
          para que coincida con la tasa de llamada entrante. En un modem
          <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14,400 externo estos comandos
          fijarán la tasa de corrección de errores de datos a la
          velocidad usada para pasar los comandos, pero le permite a la tasa del
          puerto serie variar para conexiones que no corrigen errores:</p><pre class="programlisting">ATZ
AT&amp;B2&amp;W</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79707216"></a>24.4.5.3. Revisando la configuración del modem</h4></div></div></div><p>La mayoría de los modems de alta velocidad brindan
          comandos para ver los parámetros actuales de operación
          del modem en un modo entendible para humanos.
          En el modem <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14,400 externo, el comando
          <code class="command">ATI5</code> despliega los parámetros que están
          almacenados en la RAM no volatil. Para ver los parámetros reales
          de operación del modem (influenciado por los parámetros
          de los switches DIP del modem), utilice el comando <code class="command">ATZ</code> y
          entonces <code class="command">ATI4</code>.</p><p>Si tiene una marca diferente de modem, revise el manual de
          su modem para ver como checar doblemente los parámetros de
          configuración de su modem.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79711184"></a>24.4.6. Determinando errores</h3></div></div></div><p>Aquí hay unos cuantos pasos que puede seguir para revisar
        en sus sistema el modem dial-up.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79712208"></a>24.4.6.1. Revisando el sistema FreeBSD</h4></div></div></div><p>Conecte su modem a su sistema FreeBSD, arranque el sistema, y,
          si su modem tiene luces de indicación de estado, mire si el
          indicador <acronym class="acronym">DTR</acronym> del modem enciende cuando el prompt
          <code class="prompt">login:</code> aparece en la consola del sistema
          &#8212; si enciende, eso debería significar que FreeBSD ha
          iniciado un proceso <code class="command">getty</code> en el puerto de
          comunicaciones apropiado y está esperando a que el modem
          acepte la llamada.</p><p>Si el indicador <acronym class="acronym">DTR</acronym> no enciende, entre al
          sistema FreeBSD a travás de la consola y ponga un <code class="command">ps
           ax</code> para ver si FreeBSD está tratando de correr
          un proceso <code class="command">getty</code> en el puerto correcto. Debería
          ver líneas como estas entre los procesos desplegados:</p><pre class="screen">  114 ??  I      0:00.10 /usr/libexec/getty V19200 ttyd0
  115 ??  I      0:00.10 /usr/libexec/getty V19200 ttyd1</pre><p>Si ve algo diferente, como esto:</p><pre class="screen">  114 d0  I      0:00.10 /usr/libexec/getty V19200 ttyd0</pre><p>y el modem no ha aceptado una llamada todavía, esto
          significa que <code class="command">getty</code> ha completado su apertura
          en el puerto de comunicaciones. Esto puede indicar un problema
          con el cableado o un modem mal configurado, debido a que
          <code class="command">getty</code> no podría abrir el puerto de
          comunicaciones hasta que un <acronym class="acronym">CD</acronym> (detección
          de señal) sea afirmado por el modem.</p><p>si no ve ningún proceso <code class="command">getty</code> esperando
          para abrir el puerto
          <code class="filename">ttydN</code> deseado,
          revise de nuevo sus entradas en <code class="filename">/etc/ttys</code> para
          ver si existe algún error ahí. También revise
          el fichero de log <code class="filename">/var/log/messages</code> para ver
          si existe algún mensaje de <code class="command">init</code> o de
          <code class="command">getty</code> relacionados a cualquier problema.
          Si existe cualquier mensaje, revise nuevamente los ficheros de
          configuración <code class="filename">/etc/ttys</code> y
          <code class="filename">/etc/gettytab</code>, así como los ficheros
          especiales de dispositivo <code class="filename">/dev/ttydN</code>, por
          cualquier error, entradas faltantes, o ficheros especiales de
          dispositivo faltantes.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79723088"></a>24.4.6.2. Trate de llamar</h4></div></div></div><p>Trate de llamar al sistema; asegúrese de usar 8 bits,
          sin paridad, y 1 bit de parada en el sistema remoto.
          Si no obtiene un prompt inmediatamente, o recibe basura, trate
          presionando <span class="keycode">Enter</span> una vez por segundo.
          Si continua sin ver un prompt de <code class="prompt">login:</code> despues
          de un tiempo, trate enviando un <code class="command">BREAK</code>. Si
          está usando un modem de alta velocidad para realizar la
          marcación, trate marcando de nuevo despues de fijar la
          velociad de interfaz del modem (por medio de <code class="command">AT&amp;B1</code>
          en un modem <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>®, por ejemplo).</p><p>Si todavía no puede obtener un prompt de <code class="prompt">login:</code>,
          revise <code class="filename">/etc/gettytab</code> de nuevo y revise nuevamente
          que</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>El nombre de capacidad inicial especificado en
              <code class="filename">/etc/ttys</code> para la línea coincida con
              un nombre de una capacidad en <code class="filename">/etc/gettytab</code></p></li><li class="listitem"><p>Cada entrada <code class="literal">nx=</code> coincida con otro
              nombre de capacidad de <code class="filename">gettytab</code></p></li><li class="listitem"><p>Cada entrada <code class="literal">tc=</code> coincida con otro
              nombre de capacidad de <code class="filename">gettytab</code></p></li></ul></div><p>Si marca pero el modem en el sistema FreeBSD no contesta,
          asegúrese que el modem está configurado para
          contestar el teléfono cuando <acronym class="acronym">DTR</acronym> sea
          detectado. Si el modem parece estar configurado correctamente,
          verifique que <acronym class="acronym">DTR</acronym> sea detectado revisando
          las luces indicadoras del modem (si tiene alguna).</p><p>Si ha revisado todo varias veces y todavía no funciona,
          tome un descanso y regrese a eso depues. Si todavía continua
          sin funcionar, tal vez puede mandar un correo electrónico a
          <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">lista de correo para preguntas generales sobre FreeBSD</a> describiendo su modem y su problema, y las buenas
          personas en la lista tratarán de ayudarle.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="term.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="serialcomms.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="dialout.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">24.3. Terminales </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 24.5. Servicio dial-out</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Puede descargar éste y muchos otros documentos desde
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Si tiene dudas sobre FreeBSD consulte la
    <a href="http://www.FreeBSD.org/docs.html">documentación</a> antes de escribir a la lista
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Envíe sus preguntas sobre la documentación a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>