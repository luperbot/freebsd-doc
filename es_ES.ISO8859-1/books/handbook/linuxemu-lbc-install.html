<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>10.2. Instalación</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manual de FreeBSD" /><link rel="up" href="linuxemu.html" title="Capítulo 10. Compatibilidad binaria con Linux" /><link rel="prev" href="linuxemu.html" title="Capítulo 10. Compatibilidad binaria con Linux" /><link rel="next" href="linuxemu-mathematica.html" title="10.3. Instalación de Mathematica®" /><link rel="copyright" href="legalnotice.html" title="Aviso Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">10.2. Instalación</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="linuxemu.html">Anterior</a> </td><th width="60%" align="center">Capítulo 10. Compatibilidad binaria con Linux</th><td width="20%" align="right"> <a accesskey="n" href="linuxemu-mathematica.html">Siguiente</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-lbc-install"></a>10.2. Instalación</h2></div></div></div><a id="idp72933328" class="indexterm"></a><p>La compatibilidad binaria con Linux no viene activada
      por omisión.  La forma más sencilla de habilitarla
      es cargar el KLD (<span class="quote">&#8220;<span class="quote">objeto cargable en el kernel</span>&#8221;</span>)
      <code class="literal">linux</code>.  Como usuario
      <code class="systemitem">root</code> proceda del siguiente modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload linux</code></strong></pre><p>Si quiere que la compatibilidad con Linux esté
      siempre activada tendrá que añadir la siguiente
      línea en <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">linux_enable="YES"</pre><p>Utilice <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldstat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldstat</span>(8)</span></a> para verificar que el KLD
      esté cargado:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kldstat</code></strong>
Id Refs Address    Size     Name
 1    2 0xc0100000 16bdb8   kernel
 7    1 0xc24db000 d000     linux.ko</pre><a id="idp72939856" class="indexterm"></a><p>Si por alguna razón no desea o no puede cargar el KLD,
      entonces puede enlazar estáticamente la compatibilidad de binarios
      Linux en el kernel agregando <code class="literal">options COMPAT_LINUX</code>
      a su fichero de configuración del kernel. Luego instale
      su nuevo kernel como se describe en
      <a class="xref" href="kernelconfig.html" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72942288"></a>10.2.1. Instalación de bibliotecas de ejecución Linux</h3></div></div></div><a id="idp72942928" class="indexterm"></a><p>Puede hacerse de dos maneras, ya sea usando
        el port <a class="link" href="linuxemu-lbc-install.html#linuxemu-libs-port" title="10.2.1.1. Instalación usando el port linux_base">linux_base</a>,
        o instalándolas
	<a class="link" href="linuxemu-lbc-install.html#linuxemu-libs-manually" title="10.2.1.2. Instalación manual de bibliotecas">de forma manual</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-port"></a>10.2.1.1. Instalación usando el port linux_base</h4></div></div></div><a id="idp72946256" class="indexterm"></a><p>Este es con mucho el método mas sencillo
          para instalar bibliotecas de ejecución.  Es como
          instalar cualquier otro port de la
          <a class="link" href="file://localhost/usr/ports/" target="_top">Colección
          de Ports</a>. Es tan sencillo como esto:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/emulators/linux_base</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install distclean</code></strong></pre><p>Hecho esto debería disponer de compatibilidad binaria con
          Linux.  Algunos programas pueden <span class="quote">&#8220;<span class="quote">quejarse</span>&#8221;</span> por
          la presencia de versiones antiguas de algunas bibliotecas del
          sistema.  Generalmente esto no suele ser un problema muy
	  grave.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Pueden coexistir múltiples versiones
          del port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a>
          disponibles correspondientes a distintas versiones de diversas
          distribuciones de Linux.  Tendrá que instalar el port
          que más se ajuste a las necesidades de las aplicaciones
          de Linux que quiera instalar.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-manually"></a>10.2.1.2. Instalación manual de bibliotecas</h4></div></div></div><p>Si, por el motivo que fuese, no tiene instalada
          la colección de ports puede instalar las bibliotecas
          que necesite de forma manual.
          Necesitará las bibliotecas compartidas Linux de
          las que depende el programa y el enlazador en tiempo de
          ejecución (<span class="quote">&#8220;<span class="quote">runtime linker</span>&#8221;</span>).
          Necesitará también
          crear un directorio
          <code class="filename">/compat/linux</code> donde alojar las bibliotecas
          Linux en su sistema FreeBSD  Cualquier biblioteca compartida a la
          que haya recurrido un programa de Linux ejecutado en FreeBSD
          buscará en primer lugar en dicho directorio.
          Por lo tanto, si se carga un
          programa Linux, por ejemplo <code class="filename">/lib/libc.so</code>,
          FreeBSD intentará en primer lugar abrir
          <code class="filename">/compat/linux/lib/libc.so</code> y, si no
          existe, lo intentará con
	  <code class="filename">/lib/libc.so</code>.  Las bibliotecas
	  compartidas deben instalarse en
	  <code class="filename">/compat/linux/lib</code> en lugar de las rutas que
	  el <code class="command">ld.so</code> de Linux proporcione.</p><p>En general, necesitará buscar las bibliotecas
          compartidas de las que los binarios Linux dependen
          sólamente las primeras veces que instale un programa
          Linux en su FreeBSD.  Más adelante tendrá un conjunto
          suficiente de bibliotecas compartidas Linux en su sistema
          para poder ejecutar binarios Linux sin que tenga que hacer nada
          más.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72955856"></a>10.2.1.3. Cómo instalar bibliotecas compartidas adicionales</h4></div></div></div><a id="idp72956496" class="indexterm"></a><p>?Que pasaría si instalara el port
	  <code class="filename">linux_base</code> y su aplicación
	  todavía tuviera problemas debido a bibliotecas compartidas
          que no encuentra en el sistema?
	  ?Cómo saber qué bibliotecas compartidas
	  necesitan los binarios Linux? Básicamente hay dos
          posibilidades (para poder ejecutar las siguientes instrucciones
	  necesitará estar como <code class="systemitem">root</code>
	  </p><p>Si tiene acceso a un sistema Linux busque en él
          qué bibliotecas necesita la aplicación, y
          cópielas a su sistema FreeBSD.  Veamos unos ejemplos:
          </p><div class="informalexample"><p>Asumiremos que utilizó FTP para conseguir los
            binarios Linux de <span class="application">Doom</span> y los
            puso en un sistema Linux.
            Para ver qué bibliotecas compartidas necesitará
            ejecute <code class="command">ldd linuxdoom</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ldd linuxdoom</code></strong>
libXt.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libXt.so.3.1.0
libX11.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libX11.so.3.1.0
libc.so.4 (DLL Jump 4.5pl26) =&gt; /lib/libc.so.4.6.29</pre><a id="idp72969424" class="indexterm"></a><p>Necesitaría todos los ficheros de la
            segunda columna, y tendrá que ponerlos en
            <code class="filename">/compat/linux</code> con los nombres de
            la primera columna como enlaces
            simbólicos apuntando hacia ellos.  De este modo
            tendría en su sistema FreeBSD los siguientes ficheros:
            </p><pre class="screen">/compat/linux/usr/X11/lib/libXt.so.3.1.0
/compat/linux/usr/X11/lib/libXt.so.3 -&gt; libXt.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3 -&gt; libX11.so.3.1.0
/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Recuerde que si ya tiene una biblioteca
                compartida Linux con un número de versión
                mayor que coincida con la primera columna de la salida de
                <code class="command">ldd</code> no necesitará copiar el
                fichero que aparece en la última columna;
                el que tiene debería funcionar, aunque se aconseja
                copiar la biblioteca compartida de todas maneras
                si es una nueva versión.  Puede eliminar la vieja
                siempre que haga que el enlace simbólico apunte
                a la nueva.  Si tiene estas bibliotecas
                en su sistema:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.27
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.27</pre><p xmlns="http://www.w3.org/1999/xhtml">y  un binario requiere
                una versión más reciente (como indica la
                siguiente salida de <code class="command">ldd</code>):</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">libc.so.4 (DLL Jump 4.5pl26) -&gt; libc.so.4.6.29</pre><p xmlns="http://www.w3.org/1999/xhtml">si solo ve una o dos versiones desfasadas en los
                últimos dígitos no se preocupe
                de copiar <code class="filename">/lib/libc.so.4.6.29</code>,
                el programa debería funcionar
                bien con una versión ligeramente antigua.
                De todas formas, si así lo prefiere, puede actualizar
                <code class="filename">libc.so</code>; el resultado sería
                este:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">El mecanismo de enlazado simbólico
                <span class="emphasis"><em>sólamente</em></span> es necesario con
                binarios Linux.  El enlazador en tiempo de ejecución
                de FreeBSD se encarga de buscar él mismo las versiones
                correctas, así que no tendrá que preocuparse
                usted de hacerlo.</p></div></blockquote></div></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73006672"></a>10.2.2. Instalar binarios ELF Linux</h3></div></div></div><a id="idp73007312" class="indexterm"></a><p>Los binarios ELF algunas veces requieren un paso extra de
        <span class="quote">&#8220;<span class="quote">marcado</span>&#8221;</span>.  Si trata de ejecutar un binario ELF no
        marcado recibirá un mensaje de error como el siguiente:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>./mi-binario-elf</code></strong>
ELF binary type not known
Abort</pre><p>Para ayudar al kernel de FreeBSD a distinguir entre un binario
        ELF de FreeBSD y uno de Linux utilice <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>brandelf -t Linux mi-binario-elf-de-linux</code></strong></pre><a id="idp73012432" class="indexterm"></a><p>Las herramientas GNU se encargan de ubicar automáticamente
        la marca apropiada en los binarios ELF, por lo tanto este
        paso será innecesario en un futuro próximo.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73013456"></a>10.2.3. Configuración de la resolución de nombres de
       equipos</h3></div></div></div><p>Si el DNS no funciona u obtiene este mensaje:</p><pre class="screen">resolv+: "bind" is an invalid keyword resolv+:
"hosts" is an invalid keyword</pre><p>Necesitará un fichero
        <code class="filename">/compat/linux/etc/host.conf</code>
        con el siguiente contenido:</p><pre class="programlisting">order hosts, bind
multi on</pre><p>Significa que
        <code class="filename">/etc/hosts</code> seráanalizado en primer lugar
        y después se usará DNS.
	Si <code class="filename">/compat/linux/etc/host.conf</code> no
        está instalado, las aplicaciones Linux usan el
	<code class="filename">/etc/host.conf</code> de FreeBSD y chocan con la
	sintaxis (incompatible) de FreeBSD.  Borre
	<code class="literal">bind</code> de su <code class="filename">/etc/resolv.conf</code>
        si no tiene configurado un servidor de nombres.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="linuxemu.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="linuxemu.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="linuxemu-mathematica.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">Capítulo 10. Compatibilidad binaria con Linux </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 10.3. Instalación de <span class="trademark">Mathematica</span>®</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Puede descargar éste y muchos otros documentos desde
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Si tiene dudas sobre FreeBSD consulte la
    <a href="http://www.FreeBSD.org/docs.html">documentación</a> antes de escribir a la lista
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Envíe sus preguntas sobre la documentación a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>