<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>7.6. Escáneres de imágenes</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manual de FreeBSD" /><link rel="up" href="multimedia.html" title="Capítulo 7. Multimedia" /><link rel="prev" href="tvcard.html" title="7.5. Configuración de tarjetas de TV" /><link rel="next" href="kernelconfig.html" title="Capítulo 8. Configuración del kernel de FreeBSD" /><link rel="copyright" href="legalnotice.html" title="Aviso Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7.6. Escáneres de imágenes</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tvcard.html">Anterior</a> </td><th width="60%" align="center">Capítulo 7. Multimedia</th><td width="20%" align="right"> <a accesskey="n" href="kernelconfig.html">Siguiente</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="scanners"></a>7.6. Escáneres de imágenes</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp72133456" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72134224"></a>7.6.1. Introducción</h3></div></div></div><p>El acceso a escáneres de imágenes en FreeBSD
        funciona gracias a la  <acronym class="acronym">API</acronym>
	<span class="application">SANE</span> (siglas de «Scanner Access Now
	Easy», «el acceso a escáneres ahora es
	fácil»), disponible en la Colección de Ports
	de FreeBSD.  <span class="application">SANE</span> utiliza también
	ciertos controladores de FreeBSD para acceder al hardware del
	escáner.</p><p>FreeBSD puede utilizar tanto escáneres SCSI como USB.
        Asegúrese de que el suyo funciona con
	<span class="application">SANE</span> antes de intentar ningún
	tipo de configuración.  <span class="application">SANE</span>
	tiene una lista de <a class="link" href="http://www.sane-project.org/sane-supported-devices.html" target="_top">dispositivos
	soportados</a> donde encontrará información
	actualizada sobre hasta dónde funciona el escáner
	y su estatus.  La página de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uscanner&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">uscanner</span>(4)</span></a>
	incluye una listas de escáneres USB que funcionan con
	<span class="application">SANE</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72143824"></a>7.6.2. Configuración del kernel</h3></div></div></div><p>Como ya se ha dicho tanto los interfaces USB como las
         SCSI funcionan.  Según sea el interfaz de su
	 escáner necesitará un tipo diferente de
	 controlador:</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="scanners-kernel-usb"></a>7.6.2.1. Interfaz USB</h4></div></div></div><p>El kernel <code class="filename">GENERIC</code> incluye por
	  omisión los controladores de dispositivo necesarios
	  para poder usar escáneres USB.  Si va a personalizar
	  su kernel asegúrese de que esto está en el
	  fichero de configuración del mismo:</p><pre class="programlisting">device usb
device uhci
device ohci
device uscanner</pre><p>Según cual sea el chipset de su placa base
	  tendrá que usar <code class="literal">device uhci</code> o
	  <code class="literal">device ohci</code>, aunque si tiene ambos
	  no tendrá problemas por eso.</p><p>Si por cualquier motivo no quiere recompilar su
	  kernel y su kernel no es el
	  <code class="filename">GENERIC</code> puede cargar el módulo
	  controlador de dispositivo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uscanner&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">uscanner</span>(4)</span></a> con
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload uscanner</code></strong></pre><p>Si quiere cargar este módulo cada vez que arranque
	  el sistema debe añadir la siguiente
	  línea a
	  <code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">uscanner_load="YES"</pre><p>Tras reiniciar con el kernel correcto (o una vez
	  que el módulo esté cargado) conecte su
	  escáner USB.  Debe aparecer en el «buffer»
	  de mensajes del sistema (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>) un mensaje una
	  línea como la siguiente:</p><pre class="screen">uscanner0: EPSON EPSON Scanner, rev 1.10/3.02, addr 2</pre><p>La línea del ejemplo muestra que nuestro
	  escáner está utilizando el nodo de
	  dispositivo<code class="filename">/dev/uscanner0</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72154960"></a>7.6.2.2. Interfaz SCSI</h4></div></div></div><p>Si su escáner tiene un interfaz SCSI es importante
	  saber qué controladora SCSI incorpora.
	  El chipset SCSI que tenga influirá en la
	  configuración del kernel que tenga que
	  personalizar.  El kernel <code class="filename">GENERIC</code>
	  tiene controladores de dispositivo para las controladoras
	  SCSI más comunes.  Consulte el fichero
	  <code class="filename">NOTES</code> y añada la
	  línea correcta al fichero de configuración
	  de su kernel.  Tendrá que añadir
	  también la siguiente línea:</p><pre class="programlisting">device scbus
device pass</pre><p>Una vez compilado e instalado el kernel correctamente
	  tiene ya que ver sus nuevos dispositivos en el
	  «buffer» de mensajes del sistema:</p><pre class="screen">pass2 at aic0 bus 0 target 2 lun 0
pass2: &lt;AGFA SNAPSCAN 600 1.10&gt; Fixed Scanner SCSI-2 device
pass2: 3.300MB/s transfers</pre><p>Si su escáner estaba apagado durante el arranque
	  puede forzar manualmente la detección si ejecuta una
	  búsqueda de buses SCSI con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">camcontrol</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol rescan all</code></strong>
Re-scan of bus 0 was successful
Re-scan of bus 1 was successful
Re-scan of bus 2 was successful
Re-scan of bus 3 was successful</pre><p>El escáner aparecerá en la lista de
	  dispositivos SCSI:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol devlist</code></strong>
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 5 lun 0 (pass0,da0)
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 6 lun 0 (pass1,da1)
&lt;AGFA SNAPSCAN 600 1.10&gt;           at scbus1 target 2 lun 0 (pass3)
&lt;PHILIPS CDD3610 CD-R/RW 1.00&gt;     at scbus2 target 0 lun 0 (pass2,cd0)</pre><p>Tiene todos los detalles sobre los dispositivos
	  SCSI en las páginas de manual de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scsi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">scsi</span>(4)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">camcontrol</span>(8)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72168144"></a>7.6.3. Configuración de SANE</h3></div></div></div><p>El sistema <span class="application">SANE</span> se divide
	en dos partes: los «backends» (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-backends/pkg-descr">graphics/sane-backends</a>) y los
	«frontends» (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-frontends/pkg-descr">graphics/sane-frontends</a>).  Los
	 «backends» facilitan el acceso al escáner
	 propiamente dicho.  La
	<a class="link" href="http://www.sane-project.org/sane-supported-devices.html" target="_top">lista
	de dispositivos que funcionan con </a>
	<span class="application">SANE</span> le dirá qué
	«backend» hará funcionar su escáner
	de imágenes.  No hay más remedio que identificar
	correctamente el «backend» de su escáner
	para poder usarlo.  Los «frontends» ofrecen
	una interfaz gráfica para escanear
	(<span class="application">xscanimage</span>).</p><p>Lo primero que hay que hacer es instalar el port
        o package de <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-backends/pkg-descr">graphics/sane-backends</a>.  Después
	ejecute la orden <code class="command">sane-find-scanner</code>
	para comprobar el funcionamiento de la detección
	de escáneres del sistema
	<span class="application">SANE</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sane-find-scanner -q</code></strong>
found SCSI scanner "AGFA SNAPSCAN 600 1.10" at /dev/pass3</pre><p>En la salida de la orden anterior se le mostrará
        el tipo de interfaz del escáner y el nodo de dispositivo
	a través del cual el sistema accede a él.  Es
	posible que no aparezcan la marca y el modelo, pero eso no
	tiene importancia.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Algunos escáneres USB necesitan que les instale un
	  «firmware»; esto se explica en la página
	  de manual del «backend» correspondiente.  También
	  debe leer las páginas de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sane-find-scanner&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sane-find-scanner</span>(1)</span></a>
	  y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sane&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">sane</span>(7)</span></a>.</p></div><p>Ahora hay que comprobar que el «frontend» de
        escaneo puede identificar el escáner.  Por omisión
	los «backends» de
	<span class="application">SANE</span> incorporan una herramienta de
	línea de órdenes llamada <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scanimage&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scanimage</span>(1)</span></a>, que
	le mostrará una lista de dispositivos e incluso una
	captura de imagen desde la shell.  La opción
	<code class="option">-L</code> muestra una lista de escáners:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>
device `snapscan:/dev/pass3' is a AGFA SNAPSCAN 600 flatbed scanner</pre><p>Si el software no lanza ningún mensaje, o si
        el mensaje indica que no se han encontrado escáneres
	significa que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scanimage&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scanimage</span>(1)</span></a> no puede identificar su
	escáner.  Si este es el caso tendrá que
	editar el fichero de configuración del
	«backend»y definir en él el
	escáner que quiera utilizar.  Encontrará
	todos los ficheros de configuración de los
	«backends» en el directorio <code class="filename">/usr/local/etc/sane.d/</code>.  Este
	problema con la identificación del hardware
	es relativamente frecuente con ciertos modelos de
	escáneres USB.</p><p>Por ejemplo, con el escáner que hemos usado en
        la <a class="xref" href="scanners.html#scanners-kernel-usb" title="7.6.2.1. Interfaz USB">Sección 7.6.2.1, &#8220;Interfaz USB&#8221;</a> la orden
	<code class="command">sane-find-scanner</code> nos da la siguiente
	información:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sane-find-scanner -q</code></strong>
found USB scanner (UNKNOWN vendor and product) at device /dev/uscanner0</pre><p>El escáner ha sido detectado sin problemas, utiliza el
        interfaz USB y está conectado al nodo de dispositivo
	<code class="filename">/dev/uscanner0</code> .  Ahora comprobaremos
	que podemos identificar correctamente el escáner:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>

No scanners were identified. If you were expecting something different,
check that the scanner is plugged in, turned on and detected by the
sane-find-scanner tool (if appropriate). Please read the documentation
which came with this software (README, FAQ, manpages).</pre><p>No hemos podido identificar el escáner, así
        que hemos de editar el fichero
	<code class="filename">/usr/local/etc/sane.d/epson.conf</code>.  Estamos
	usando el modelo de escáner <span class="trademark">EPSON
  Perfection</span>® 1650,
	así que ya sabemos que el escáner utilizará
	el «backend» <code class="literal">epson</code>.  Lea
	atentamente los comentarios que hay en los ficheros de
	configuración de los «backends».  Lo que
	hay que hacer es muy sencillo: basta con comentar las
	líneas en las que aparecen interfaces que no sean el
	perfecto para su escáner.  En nuestro caso comentaremos
	todas las líneas que comiencen por
	<code class="literal">scsi</code> puesto que nuestro escáner
	tiene interfaz USB.  Después de esto hay que
	añadir una lína al final del fichero declarando
	el interfaz y el nodo de dispositivo que se van a usar.  En
	el caso del ejemplo esto es lo que añadimos:</p><pre class="programlisting">usb /dev/uscanner0</pre><p>Por favor, lea los comentarios que encontrará
        en el fichero de configuración del «backend»
	y la pángina de manual de del «backend»
	si necesita más información sobre la
	sintaxis que debe usar.  Hecho esto podemos verificar si
	ya podemos identificar el escáner:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>
device `epson:/dev/uscanner0' is a Epson GT-8200 flatbed scanner</pre><p>Hemos identificado nuestro escáner USB.  Ni tiene
        importancia si la marca y modelo que hemos visto no coinciden
	con nuestro escáner.  Lo único realmente
	importante es el campo
	<code class="literal">`epson:/dev/uscanner0'</code>, que nos da
	el nombre correcto del «backend» y el
	nodo de dispositivo correcto.</p><p>Una vez que <code class="command">scanimage -L</code> llega a ver
        al escáner hemos terminado con la configuración.
	El dispositivo está listo para escanear
	imángenes.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scanimage&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scanimage</span>(1)</span></a> permite ejecutar una captura de
        imágen desde la línea de órdenes,
	pero siempre es mejor utilizar un interfaz gráfico de
	usuario para estas tareas.
	<span class="application">SANE</span> ofrece un interfaz
	gráfico simple pero eficiente:
	<span class="application">xscanimage</span>
	(<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-frontends/pkg-descr">graphics/sane-frontends</a>).</p><p>Otro «frontend» gráfico para
        escanear que se ha hecho muy popular es
	<span class="application">Xsane</span> (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/xsane/pkg-descr">graphics/xsane</a>).  Este
	«frontend» tiene características muy
	avanzadas como varios modos de escaneo (fotocopia, fax, etc.),
	corrección de color, escaneo de imágenes por
	lotes, etc.  Ambas aplicaciones pueden utilizarse además
	como «plugins» de
	<span class="application">GIMP</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72216272"></a>7.6.4. Dar acceso al escáner a otros usuarios</h3></div></div></div><p>Todo lo que se ha mostrado en esta sección
        se ha ejecutado con privilegios de
	<code class="systemitem">root</code>.  Lo normal es que haya otros usuarios
	que tengan que tener acceso al escáner.  Un usuario
	que quiera usar el escáner tiene que tener acceso
	de lectura y escritura al nodo de dispositivo que usa
	el escáner.  Por ejemplo, nuestro escáner
	USB utiliza el nodo de dispositivo
	<code class="filename">/dev/uscanner0</code> propiedad del grupo
	<code class="systemitem">operator</code>.  Al añadir al usuario
	<code class="systemitem"><em class="replaceable"><code>joe</code></em></code> al
	grupo <code class="systemitem">operator</code> éste podrá
	acceder al esc´ner:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupmod operator -m joe</code></strong></pre><p>Para más información sobre el uso de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> lea su página de manual.  Tendrá
	también que configurar correctamente los permisos de
	escritura (0660 o 0664) en el nodo de dispositivo
	<code class="filename">/dev/uscanner0</code>; por omisión los
	miembros del grupo <code class="systemitem">operator</code> sólo
	tienen acceso de lectura en este nodo de dispositivo.
	Añada las siguientes líneas al fichero
	lines to the <code class="filename">/etc/devfs.rules</code>:</p><pre class="programlisting">[system=5]
add path uscanner0 mode 660</pre><p>Ahora añada lo siguiente a
	<code class="filename">/etc/rc.conf</code> y reinicie la
	máquina:</p><pre class="programlisting">devfs_system_ruleset="system"</pre><p>Para más información sobre lo que acaba de
        leer consulte la página de manual de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">devfs</span>(8)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Por seguridad debería pensarse dos veces
	  el hecho mismo de añadir cualquier usuario
	  a un grupo y muy especialmente al grupo
	  <code class="systemitem">operator</code>.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tvcard.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="multimedia.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="kernelconfig.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">7.5. Configuración de tarjetas de TV </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Capítulo 8. Configuración del kernel de FreeBSD</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Puede descargar éste y muchos otros documentos desde
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Si tiene dudas sobre FreeBSD consulte la
    <a href="http://www.FreeBSD.org/docs.html">documentación</a> antes de escribir a la lista
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Envíe sus preguntas sobre la documentación a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>