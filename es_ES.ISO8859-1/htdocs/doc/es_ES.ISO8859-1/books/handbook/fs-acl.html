<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>14.12. Listas de control de acceso a sistemas de ficheros</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manual de FreeBSD" /><link rel="up" href="security.html" title="Capítulo 14. Seguridad" /><link rel="prev" href="openssh.html" title="14.11. OpenSSH" /><link rel="next" href="security-portaudit.html" title="14.13. Monitorización de fallos de seguridad de aplicaciones" /><link rel="copyright" href="legalnotice.html" title="Aviso Legal" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">14.12. Listas de control de acceso a sistemas de ficheros</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="openssh.html">Anterior</a> </td><th width="60%" align="center">Capítulo 14. Seguridad</th><td width="20%" align="right"> <a accesskey="n" href="security-portaudit.html">Siguiente</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="fs-acl"></a>14.12. Listas de control de acceso a sistemas de ficheros</h2></div><div><span class="authorgroup">Contribuido por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp76539472" class="indexterm"></a><p>Además de otras mejoras del sistema de ficheros como
      las instantáneas (<span class="quote">&#8220;<span class="quote">snapshots</span>&#8221;</span>), FreeBSD 5.0 y
      siguientes ofrecen las ACL (<span class="quote">&#8220;<span class="quote">Access Control Lists</span>&#8221;</span>,
      listas de control de acceso) como un elemento más de
      seguridad.</p><p>Las listas de control de acceso extienden el modelo de
      permisos estándar de <span class="trademark">UNIX</span>® de una manera altamente
      compatible (<span class="trademark">POSIX</span>®.1e).  Esta opción permite al
      administrador usar con gran provecho un modelo de seguridad
      más sofisticado.</p><p>Para habilitar soporte de <acronym class="acronym">ACL</acronym> en sistemas
      de ficheros <acronym class="acronym">UFS</acronym> la siguiente opción:</p><pre class="programlisting">options UFS_ACL</pre><p>debe ser compilada en el kernel.  Si esta opción
      no ha sido compilada, se mostrará un mensaje de advertencia
      si se intenta montar un sistema de ficheros que soporte
      <acronym class="acronym">ACL</acronym>.  Esta opción viene incluida
      en el kernel <code class="filename">GENERIC</code>.
      Las <acronym class="acronym">ACL</acronym> dependen de los atributos extendidos
      habilitados en el sistema de ficheros.  Los atributos extendidos
      están incluidos por defecto en la nueva generación
      de sistemas de ficheros <span class="trademark">UNIX</span>® <acronym class="acronym">UFS2</acronym>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Los atributos extendidos pueden usarse también
      en <acronym class="acronym">UFS1</acronym> pero requieren una carga de trabajo
      mucho más elevada que en <acronym class="acronym">UFS2</acronym>.
      El rendimiento de los atributos extendidos es, también,
      notablemente mayor en <acronym class="acronym">UFS2</acronym>.  Por todo esto
      si quiere usar ACL le recomendamos encarecidamente que use
      <acronym class="acronym">UFS2</acronym>.</p></div><p>Las<acronym class="acronym">ACL</acronym> se habilitadan mediante una bandera
      administrativa durante el montaje, <code class="option">acls</code>, en el fichero
      <code class="filename">/etc/fstab</code>.  La bandera de montaje puede
      también activarse de forma permanente mediante
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a> para modificar una bandera de superbloque
      <acronym class="acronym">ACLs</acronym> en la cabecera del sistema de ficheros.
      En general es preferible usar la bandera de superbloque por
      varios motivos:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La bandera de montaje <acronym class="acronym">ACL</acronym> no puede cambiarse
         por un remontaje (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> <code class="option">-u</code>), sino con un
         completo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a> y un <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.  Esto significa
         que no se pueden habilitar las <acronym class="acronym">ACL</acronym> en el sistema
         de ficheros raíz después del arranque.  También
	 significa que no se puede cambiar la disposición de un
         de ficheros una vez que se ha comenzado a usar.</p></li><li class="listitem"><p>Activar la bandera de superbloque provocará que el sistema
          de ficheros se monte siempre con las <acronym class="acronym">ACL</acronym>
	  habilitadas incluso si no existe una entrada en
          <code class="filename">fstab</code> o si los dispositivos se reordenan.
          Esto es así para prevenir un montaje accidental del
          sistema de ficheros sin tener las <acronym class="acronym">ACL</acronym> habilitadas,
          que podría resultar en que se impongan de forma inadecuada las
          <acronym class="acronym">ACL</acronym>, y en consecuencia problema de
	  seguridad.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Podemos cambiar el comportamiento de las
      <acronym class="acronym">ACL</acronym> para permitirle a la bandera ser habilitada
      sin un <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> completo, pero puede salirle el tiro por la
      culata si activa las <acronym class="acronym">ACL</acronym>, luego las desactiva,
      y después las vuelve a activar sin configurar desde cero las
      atributos extendidos.  En general, una vez que se han deshabilitado
      las <acronym class="acronym">ACL</acronym> en un sistema de ficheros no deben
      dehabilitarse, ya que la protección de ficheros resultante
      puede no ser compatible las que esperan los usuarios del sistema,
      y al volver a activar las <acronym class="acronym">ACL</acronym> volver a asignar
      las <acronym class="acronym">ACL</acronym> a ficheros cuyos permisos hubieran sido
      cambiados, lo que puede desenbocar en un escenario
      impredecible.</p></div><p>Los sistemas de ficheros con <acronym class="acronym">ACL</acronym> habilitadas
      tienen un signo <code class="literal">+</code> (más) al visualizar
      sus configuraciones de permisos.  Por ejemplo:</p><pre class="programlisting">drwx------  2 robert  robert  512 Dec 27 11:54 private
drwxrwx---+ 2 robert  robert  512 Dec 23 10:57 directorio1
drwxrwx---+ 2 robert  robert  512 Dec 22 10:20 directorio2
drwxrwx---+ 2 robert  robert  512 Dec 27 11:57 directorio3
drwxr-xr-x  2 robert  robert  512 Nov 10 11:54 public_html</pre><p>Aquí vemos que los directorios
      <code class="filename">directorio1</code>,
      <code class="filename">directorio2</code>, y <code class="filename">directorio3</code>
      están usando <acronym class="acronym">ACL</acronym>.
      El directorio <code class="filename">public_html</code> no.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76570192"></a>14.12.1. Uso de <acronym class="acronym">ACL</acronym></h3></div></div></div><p>Las <acronym class="acronym">ACL</acronym>s del sistema de ficheros pueden
        comprobarse con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getfacl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">getfacl</span>(1)</span></a>.  Por ejemplo,
        para ver las configuraciones de <acronym class="acronym">ACL</acronym> del
        fichero <code class="filename">test</code>, uno podría
        usar lo siguiente:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>getfacl test</code></strong>
	#file:test
	#owner:1001
	#group:1001
	user::rw-
	group::r--
	other::r--</pre><p>Para cambiar las configuraciones de las <acronym class="acronym">ACL</acronym> en
        este fichero use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setfacl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">setfacl</span>(1)</span></a>.  Observe:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setfacl -k test</code></strong></pre><p>La bandera <code class="option">-k</code> eliminará todas
        las <acronym class="acronym">ACL</acronym>s definidas para un fichero o sistema
        ficheros.  El método preferible sería utilizar
        <code class="option">-b</code>, ya que deja los campos básicos
        imprescindibles para que las <acronym class="acronym">ACL</acronym> sigan
	funcionando.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setfacl -m u:trhodes:rwx,group:web:r--,o::--- test</code></strong></pre><p>La opción <code class="option">-m</code> se usa para modificar
        las entradas por defecto de las <acronym class="acronym">ACL</acronym>.
        Debido a que no había entradas predefinidas puesto que
        fueron eliminadas por la orden anterior, restauraremos las
        opciones por defecto y asignará las opciones listadas.
	Tenga en cuenta que si añade un nuevo usuario o grupo
	aparecerá el error <span class="errorname">Invalid argument</span>
	en la salida estándar
	<code class="filename">stdout</code>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="openssh.html">Anterior</a> </td><td width="20%" align="center"><a accesskey="u" href="security.html">Subir</a></td><td width="40%" align="right"> <a accesskey="n" href="security-portaudit.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">14.11. OpenSSH </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 14.13. Monitorización de fallos de seguridad de aplicaciones</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Puede descargar éste y muchos otros documentos desde
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Si tiene dudas sobre FreeBSD consulte la
    <a href="http://www.FreeBSD.org/docs.html">documentación</a> antes de escribir a la lista
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Envíe sus preguntas sobre la documentación a
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>